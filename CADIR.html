<!DOCTYPE html>
<html lang="fr"><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PILOTE — PERDIR</title>
    <link rel="stylesheet" href="CADIR_fichiers/all.min.css">
    <!-- Aptos: police native Windows 11/Office. Pas de Google Fonts nécessaire -->
    <script src="CADIR_fichiers/xlsx.full.min.js"></script>
    <style>
        :root {
            --nav-h: 52px;
            --c-bg: #f0f1f4;
            --c-nav: #1b2433;
            --c-nav-hover: #273347;
            --c-accent: #d4483b;
            --c-accent-glow: rgba(212,72,59,0.35);
            --c-text: #e8eaed;
            --c-text-dim: #8b92a0;
            --c-card: #ffffff;
            --c-border: #dfe2e8;
            --c-success: #2ecc71;
            --c-info: #3498db;
            --c-warning: #f39c12;
            --c-purple: #9b59b6;
            --radius: 10px;
            --shadow: 0 4px 24px rgba(0,0,0,0.08);
            --font: 'Aptos', 'Calibri', 'Trebuchet MS', Arial, sans-serif;
            --font-display: 'Aptos', 'Calibri', 'Trebuchet MS', Arial, sans-serif;
        }
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body { font-family: var(--font); background: var(--c-bg); height: 100vh; display: flex; flex-direction: column; overflow: hidden; color: #2c3040; }

        /* ═══ TOP NAV ═══ */
        .topnav { height: var(--nav-h); background: var(--c-nav); display: flex; align-items: center; padding: 0 16px; box-shadow: 0 2px 12px rgba(0,0,0,0.25); z-index: 1000; flex-shrink: 0; position: relative; }
        .topnav::after { content:''; position:absolute; bottom:0; left:0; right:0; height:2px; background:linear-gradient(90deg,var(--c-accent),#f39c12,var(--c-accent)); opacity:0.7; }
        .brand { display:flex; align-items:center; gap:8px; margin-right:20px; cursor:pointer; text-decoration:none; }
        .brand-icon { width:32px; height:32px; background:var(--c-accent); border-radius:7px; display:flex; align-items:center; justify-content:center; font-size:15px; color:white; font-weight:700; box-shadow:0 2px 8px var(--c-accent-glow); overflow:hidden; }
        .brand-icon img { width:100%; height:100%; object-fit:contain; }
        .brand-text { font-family:var(--font-display); font-size:1.05rem; font-weight:700; color:#fff; }
        .brand-text span { color:var(--c-text-dim); font-family:var(--font); font-weight:400; font-size:0.6rem; display:block; margin-top:-2px; letter-spacing:1.5px; text-transform:uppercase; }
        .nav-sep { width:1px; height:24px; background:rgba(255,255,255,0.1); margin:0 6px; }
        .nav-items { display:flex; align-items:center; gap:3px; height:100%; }
        .nav-item { display:flex; align-items:center; gap:7px; padding:7px 14px; border-radius:7px; cursor:pointer; transition:all 0.2s; color:var(--c-text-dim); font-size:0.8rem; font-weight:500; position:relative; height:34px; user-select:none; white-space:nowrap; }
        .nav-item:hover { background:var(--c-nav-hover); color:var(--c-text); }
        
        .nav-shortcut { font-size:.5rem; background:rgba(255,255,255,.15); color:rgba(255,255,255,.5); padding:1px 4px; border-radius:3px; margin-left:4px; font-family:monospace; vertical-align:middle; display:none; }
        .nav-item:hover .nav-shortcut { display:inline; }
        .nav-item.active { background:rgba(212,72,59,0.12); color:#fff; }
        .nav-item.active::after { content:''; position:absolute; bottom:-9px; left:50%; transform:translateX(-50%); width:20px; height:3px; background:var(--c-accent); border-radius:3px 3px 0 0; }
        .nav-item.hidden-module { display: none !important; }
        .nav-item i { font-size:0.9rem; width:16px; text-align:center; }
        .nav-badge { font-size:0.55rem; padding:1px 5px; border-radius:10px; font-weight:600; }
        .nav-item[data-module="perdir"] .nav-badge { background:var(--c-info); color:#fff; }
        .nav-item[data-module="exam"] .nav-badge { background:var(--c-accent); color:#fff; }
        .nav-item[data-module="oral"] .nav-badge { background:var(--c-warning); color:#fff; }
        .nav-item[data-module="aed"] .nav-badge { background:var(--c-success); color:#fff; }
            [data-module="bibase"] .nav-badge { background:#e67e22; color:#fff; }
        .nav-item[data-module="data"] .nav-badge { background:var(--c-purple); color:#fff; }
        .nav-right { margin-left:auto; display:flex; align-items:center; gap:8px; }
        .nav-clock { color:var(--c-text-dim); font-size:0.75rem; font-variant-numeric:tabular-nums; }
        .nav-btn { width:32px; height:32px; border-radius:7px; border:none; background:var(--c-nav-hover); color:var(--c-text-dim); cursor:pointer; display:flex; align-items:center; justify-content:center; transition:all 0.2s; font-size:0.8rem; }
        .nav-btn:hover { background:rgba(255,255,255,0.12); color:white; }

        /* ═══ SETTINGS OVERLAY ═══ */
        .settings-overlay { position:fixed; inset:0; background:rgba(0,0,0,0.4); z-index:2000; display:none; align-items:center; justify-content:center; backdrop-filter:blur(4px); }
        .settings-overlay.open { display:flex; }
        .settings-panel { background:white; border-radius:14px; width:720px; max-width:95vw; max-height:92vh; overflow-y:auto; box-shadow:0 20px 60px rgba(0,0,0,0.25); animation:panelIn 0.25s ease; }
        @keyframes panelIn { from{opacity:0;transform:translateY(20px) scale(0.97)} to{opacity:1;transform:none} }
        .settings-header { padding:18px 24px; border-bottom:1px solid #eee; display:flex; justify-content:space-between; align-items:center; }
        .settings-header h2 { font-size:1.1rem; font-weight:600; color:var(--c-nav); display:flex; align-items:center; gap:10px; }
        .settings-header h2 i { color:var(--c-accent); }
        .settings-close { background:none; border:none; font-size:1.3rem; cursor:pointer; color:#999; padding:4px; }
        .settings-close:hover { color:#333; }
        .settings-body { padding:24px; }
        .settings-section { margin-bottom:24px; }
        .settings-section h3 { font-size:0.8rem; font-weight:600; color:#666; text-transform:uppercase; letter-spacing:1px; margin-bottom:12px; display:flex; align-items:center; gap:8px; }
        .settings-section h3 i { color:var(--c-info); }
        .settings-grid { display:grid; grid-template-columns:1fr 1fr; gap:14px; }
        .form-group { display:flex; flex-direction:column; gap:4px; }
        .form-group label { font-size:0.78rem; font-weight:500; color:#555; }
        .form-group input[type="text"] { padding:9px 12px; border:1px solid #ddd; border-radius:8px; font-size:0.85rem; font-family:var(--font); transition:border 0.2s; }
        .form-group input[type="text"]:focus { outline:none; border-color:var(--c-info); box-shadow:0 0 0 3px rgba(52,152,219,0.1); }
        .form-group input[type="file"] { font-size:0.75rem; }
        .img-preview { width:100%; height:72px; border:2px dashed #ddd; border-radius:8px; display:flex; align-items:center; justify-content:center; background:#fafafa; margin-top:4px; overflow:hidden; position:relative; }
        .img-preview img { max-height:64px; max-width:100%; object-fit:contain; }
        .img-preview .placeholder { color:#bbb; font-size:0.7rem; }
        .img-preview .btn-clear { position:absolute; top:3px; right:3px; width:18px; height:18px; background:rgba(0,0,0,0.5); color:white; border:none; border-radius:50%; cursor:pointer; font-size:0.55rem; display:none; align-items:center; justify-content:center; }
        .img-preview:hover .btn-clear { display:flex; }

        
        /* ═══ ACCORDION SETTINGS ═══ */
        .acc-section{border:1px solid #e8eaed;border-radius:10px;margin-bottom:10px;}
        .acc-header{display:flex;align-items:center;gap:10px;padding:14px 18px;cursor:pointer;background:#fafbfc;border-radius:10px;user-select:none;}
        .acc-header:hover{background:#eaf4fe;}
        .acc-header h3{font-size:0.82rem;font-weight:600;color:#444;text-transform:uppercase;letter-spacing:0.8px;margin:0;display:flex;align-items:center;gap:8px;flex:1;}
        .acc-header h3 i{color:var(--c-info);font-size:.85rem;}
        .acc-chevron{font-size:.7rem;color:#aaa;transition:transform 0.3s;}
        .acc-section.open .acc-header{background:#eaf4fe;border-bottom:1px solid #e0e0e0;border-radius:10px 10px 0 0;}
        .acc-section.open .acc-chevron{transform:rotate(90deg);color:var(--c-info);}
        .acc-body{display:none;padding:16px 18px;}
        .acc-section.open .acc-body{display:block;}

        
        .cloud-prov-btn{padding:10px 14px;border:2px solid #e0e0e0;border-radius:10px;background:#fff;cursor:pointer;text-align:center;font-family:var(--font);font-size:.78rem;font-weight:600;color:#555;transition:all .2s;flex:1;min-width:110px;}
        .cloud-prov-btn:hover{border-color:#3498db;background:#f0f7ff;}
        .cloud-prov-btn.active{border-color:#3498db;background:#eaf4fe;color:#2c3e50;box-shadow:0 2px 8px rgba(52,152,219,.15);}
        .cloud-prov-btn i{font-size:1.2rem;display:block;margin-bottom:4px;}
        .cloud-prov-btn small{font-weight:400;color:#888;font-size:.62rem;}

        /* Module toggles */
        .module-toggle { display:flex; align-items:center; gap:12px; padding:9px 0; border-bottom:1px solid #f0f0f0; }
        .module-toggle:last-child { border-bottom:none; }
        .module-toggle-icon { width:30px; height:30px; border-radius:7px; display:flex; align-items:center; justify-content:center; color:white; font-size:0.8rem; }
        .module-toggle-info { flex:1; }
        .module-toggle-info strong { font-size:0.82rem; color:#333; }
        .module-toggle-info span { font-size:0.68rem; color:#999; display:block; }
        .toggle-switch { position:relative; width:42px; height:23px; cursor:pointer; }
        .toggle-switch input { opacity:0; width:0; height:0; }
        .toggle-slider { position:absolute; inset:0; background:#ddd; border-radius:23px; transition:0.3s; }
        .toggle-slider::before { content:''; position:absolute; height:17px; width:17px; left:3px; bottom:3px; background:white; border-radius:50%; transition:0.3s; box-shadow:0 1px 3px rgba(0,0,0,0.2); }
        .toggle-switch input:checked + .toggle-slider { background:var(--c-success); }
        .toggle-switch input:checked + .toggle-slider::before { transform:translateX(19px); }

        /* Drag-and-drop order */
        .order-list { list-style:none; }
        .order-item { display:flex; align-items:center; gap:12px; padding:10px 14px; margin-bottom:6px; background:#f8f9fa; border:1px solid #e8eaed; border-radius:8px; cursor:grab; transition:all 0.2s; user-select:none; }
        .order-item:active { cursor:grabbing; }
        .order-item.dragging { opacity:0.4; background:#e8eaed; }
        .order-item.drag-over { border-color:var(--c-info); background:#eaf4fe; transform:scale(1.01); }
        .order-grip { color:#bbb; font-size:0.9rem; }
        .order-icon { width:26px; height:26px; border-radius:6px; display:flex; align-items:center; justify-content:center; color:white; font-size:0.7rem; flex-shrink:0; }
        .order-label { flex:1; font-size:0.82rem; font-weight:500; color:#333; }
        .order-hint { font-size:0.65rem; color:#aaa; margin-top:6px; }

        /* Export/Import buttons */
        .settings-backup { display:flex; gap:8px; flex-wrap:wrap; }
        .backup-btn { display:flex; align-items:center; gap:7px; padding:8px 16px; border:1px solid #ddd; border-radius:8px; background:#fafbfc; cursor:pointer; font-size:0.78rem; font-weight:500; font-family:var(--font); color:#555; transition:all 0.2s; }
        .backup-btn:hover { border-color:var(--c-info); background:#eaf4fe; color:var(--c-info); }
        .backup-btn i { font-size:0.85rem; }
        .backup-btn.import-btn { position:relative; }
        .backup-btn.import-btn input[type="file"] { position:absolute; inset:0; opacity:0; cursor:pointer; }

        .settings-footer { padding:14px 24px; border-top:1px solid #eee; display:flex; justify-content:flex-end; gap:10px; }
        .btn-settings { padding:9px 22px; border:none; border-radius:8px; font-size:0.82rem; font-weight:600; cursor:pointer; font-family:var(--font); transition:all 0.2s; }
        .btn-save { background:var(--c-accent); color:white; }
        .btn-save:hover { background:#c0392b; }
        .btn-cancel { background:#f0f0f0; color:#666; }
        .btn-cancel:hover { background:#e0e0e0; }

        /* ═══ DATA PANEL ═══ */
        .data-panel { position:absolute; inset:0; display:none; flex-direction:column; background:var(--c-bg); z-index:10; overflow-y:auto; }
        .data-panel.active { display:flex; }
        .data-header { padding:30px 40px 0; }
        .data-header h1 { font-family:var(--font-display); font-size:1.6rem; font-weight:700; color:var(--c-nav); display:flex; align-items:center; gap:12px; }
        .data-header h1 i { color:var(--c-purple); }
        .data-header p { color:#6b7280; font-size:0.85rem; margin-top:6px; }
        .data-body { padding:24px 40px 40px; display:grid; grid-template-columns:1fr 1fr; gap:24px; }
        .data-card { background:white; border-radius:var(--radius); box-shadow:var(--shadow); border:1px solid var(--c-border); overflow:hidden; }
        .data-card-header { padding:16px 20px; border-bottom:1px solid #eee; display:flex; align-items:center; gap:10px; }
        .data-card-header i { font-size:1.1rem; }
        .data-card-header.teachers i { color:var(--c-info); }
        .data-card-header.students i { color:var(--c-purple); }
        .data-card-header h3 { font-size:0.95rem; font-weight:600; color:var(--c-nav); }
        .data-card-header .data-badge { margin-left:auto; font-size:0.7rem; padding:3px 10px; border-radius:20px; font-weight:600; background:#f0f0f0; color:#888; }
        .data-card-header .data-badge.has-data { background:#e8f8f0; color:var(--c-success); }
        .data-card-body { padding:20px; }

        .excel-drop { border:2px dashed #ccc; border-radius:8px; padding:24px; text-align:center; transition:0.2s; cursor:pointer; position:relative; background:#fafbfc; }
        .excel-drop:hover { border-color:var(--c-info); background:#f0f7ff; }
        .excel-drop.loaded { border-color:var(--c-success); background:#f0fff4; }
        .excel-drop input[type="file"] { position:absolute; inset:0; opacity:0; cursor:pointer; }
        .excel-drop i.drop-icon { font-size:2rem; color:#ccc; margin-bottom:8px; display:block; }
        .excel-drop.loaded i.drop-icon { color:var(--c-success); }
        .excel-drop .drop-label { font-size:0.82rem; color:#888; }
        .excel-drop.loaded .drop-label { color:var(--c-success); font-weight:600; }
        .excel-drop .drop-hint { font-size:0.68rem; color:#bbb; margin-top:4px; }

        .data-actions { display:flex; gap:8px; margin-top:12px; flex-wrap:wrap; }
        .data-btn { padding:7px 14px; border:none; border-radius:7px; font-size:0.75rem; font-weight:600; cursor:pointer; font-family:var(--font); transition:0.2s; display:flex; align-items:center; gap:6px; }
        .data-btn-view { background:#eaf4fe; color:var(--c-info); }
        .data-btn-view:hover { background:#d0e8fc; }
        .data-btn-clear { background:#fff0f0; color:var(--c-accent); }
        .data-btn-clear:hover { background:#fde0e0; }
        .data-btn-tpl { background:#f0f7ff; color:var(--c-purple); }
        .data-btn-tpl:hover { background:#e4edfe; }

        .data-preview { margin-top:14px; max-height:260px; overflow-y:auto; border:1px solid #eee; border-radius:8px; }
        .data-preview table { width:100%; border-collapse:collapse; font-size:0.72rem; }
        .data-preview th { background:#f4f5f7; padding:7px 10px; text-align:left; font-weight:600; color:#555; position:sticky; top:0; border-bottom:1px solid #ddd; }
        .data-preview td { padding:6px 10px; border-bottom:1px solid #f0f0f0; color:#444; }
        .data-preview tr:hover td { background:#f8f9ff; }
        .data-count { font-size:0.72rem; color:#888; margin-top:8px; display:flex; align-items:center; gap:6px; }
        .data-count strong { color:var(--c-nav); }
        .data-count i { color:var(--c-success); }

        /* ═══ CONTENT ═══ */
        .content-area { flex:1; position:relative; overflow:hidden; }
        .welcome { position:absolute; inset:0; display:flex; flex-direction:column; align-items:center; justify-content:center; background:linear-gradient(160deg,#f0f1f4,#e4e7ee,#dfe2ea); z-index:10; transition:opacity 0.4s,transform 0.4s; padding:40px; }
        .welcome.hidden { opacity:0; transform:scale(0.98); pointer-events:none; }
        .welcome-header { text-align:center; margin-bottom:40px; }
        .welcome-logo { width:auto; height:auto; min-height:56px; background:var(--c-accent); border-radius:14px; display:flex; align-items:center; justify-content:center; font-size:24px; color:white; font-weight:700; margin:0 auto 16px; box-shadow:0 8px 32px var(--c-accent-glow); overflow:hidden; }
        .welcome-logo img { height:4cm; width:auto; object-fit:contain; }
        .welcome-title { font-family:var(--font-display); font-size:2rem; font-weight:700; color:var(--c-nav); margin-bottom:6px; }
        .welcome-subtitle { color:#6b7280; font-size:0.95rem; }
        .module-grid { display:flex; flex-wrap:wrap; justify-content:center; gap:16px; max-width:1000px; width:100%; }
        .module-card { background:var(--c-card); border-radius:var(--radius); padding:24px 20px; cursor:pointer; transition:all 0.25s; box-shadow:var(--shadow); border:1px solid var(--c-border); text-align:center; position:relative; overflow:hidden; width:170px; flex-shrink:0; }
        .module-card::before { content:''; position:absolute; top:0; left:0; right:0; height:3px; border-radius:var(--radius) var(--radius) 0 0; transition:height 0.3s; }
        .module-card:hover { transform:translateY(-4px); box-shadow:0 8px 32px rgba(0,0,0,0.12); }
        .module-card:hover::before { height:5px; }
        .module-card.card-hidden { display:none !important; }
        .module-card[data-m="perdir"]::before { background:var(--c-info); }
        .module-card[data-m="exam"]::before { background:var(--c-accent); }
        .module-card[data-m="oral"]::before { background:var(--c-warning); }
        .module-card[data-m="aed"]::before { background:var(--c-success); }
        .module-card[data-m="bibase"]::before { background:#e67e22; }
            .module-card[data-m="data"]::before { background:var(--c-purple); }
        .module-icon { width:44px; height:44px; border-radius:11px; display:flex; align-items:center; justify-content:center; font-size:1.1rem; color:white; margin:0 auto 12px; }
        .module-card[data-m="perdir"] .module-icon { background:var(--c-info); }
        .module-card[data-m="exam"] .module-icon { background:var(--c-accent); }
        .module-card[data-m="oral"] .module-icon { background:var(--c-warning); }
        .module-card[data-m="aed"] .module-icon { background:var(--c-success); }
        .module-card[data-m="bibase"] .module-icon { background:#e67e22; }
            .module-card[data-m="data"] .module-icon { background:var(--c-purple); }
        .module-card h3 { font-size:0.9rem; font-weight:600; color:var(--c-nav); margin-bottom:4px; }
        .module-card p { font-size:0.7rem; color:#9ca3af; line-height:1.3; }

        .module-frame { position:absolute; inset:0; border:none; width:100%; height:100%; display:none; background:white; }
        .module-frame.active { display:block; }
        .loader-overlay { position:absolute; inset:0; background:rgba(240,241,244,0.92); display:flex; flex-direction:column; align-items:center; justify-content:center; z-index:20; opacity:0; pointer-events:none; transition:opacity 0.3s; }
        .loader-overlay.show { opacity:1; pointer-events:auto; }
        .loader-spinner { width:32px; height:32px; border:3px solid var(--c-border); border-top-color:var(--c-accent); border-radius:50%; animation:spin 0.8s linear infinite; margin-bottom:10px; }
        .loader-text { font-size:0.8rem; color:#6b7280; }
        @keyframes spin { to{transform:rotate(360deg)} }

        .bottom-bar { height:26px; background:var(--c-nav); display:flex; align-items:center; justify-content:space-between; padding:0 16px; font-size:0.6rem; color:var(--c-text-dim); flex-shrink:0; }
        .status-dot { display:inline-block; width:5px; height:5px; border-radius:50%; background:var(--c-success); margin-right:5px; animation:pulse-dot 2s ease infinite; }
        @keyframes pulse-dot { 0%,100%{opacity:1} 50%{opacity:0.4} }

        @media (max-width:900px) { .module-grid{grid-template-columns:repeat(2,1fr);max-width:460px} .nav-item .nav-label{display:none} .nav-item{padding:7px 10px} .brand-text span{display:none} .nav-clock{display:none} .settings-grid{grid-template-columns:1fr} .data-body{grid-template-columns:1fr;padding:20px} }
        @media (max-width:500px) { .module-grid{grid-template-columns:1fr;max-width:300px} }
    </style>
    <script src="CADIR_fichiers/client" async="" defer="defer"></script>
<style id="googleidentityservice_button_styles">.qJTHM{-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;color:#202124;direction:ltr;-webkit-touch-callout:none;font-family:"Roboto-Regular",arial,sans-serif;-webkit-font-smoothing:antialiased;font-weight:400;margin:0;overflow:hidden;-webkit-text-size-adjust:100%}.ynRLnc{left:-9999px;position:absolute;top:-9999px}.L6cTce{display:none}.bltWBb{overflow-wrap:break-word;word-break:break-word}.hSRGPd{color:#1a73e8;cursor:pointer;font-weight:500;text-decoration:none}.Bz112c-W3lGp{height:16px;width:16px}.Bz112c-E3DyYd{height:20px;width:20px}.Bz112c-r9oPif{height:24px;width:24px}.Bz112c-u2z5K{height:36px;width:36px}.Bz112c-uaxL4e{border-radius:10px}.LgbsSe-Bz112c{display:block}.S9gUrf-YoZ4jf{border:none;margin:0;padding:0}.S9gUrf-YoZ4jf *{border:none;margin:0;padding:0}.fFW7wc-ibnC6b>.aZ2wEe>div{border-color:#4285f4}.P1ekSe-ZMv3u{transition:height linear .2s}.P1ekSe-ZMv3u>div:nth-child(1){background-color:#1a73e8!important;transition:width linear .3s}.P1ekSe-ZMv3u>div:nth-child(2){background-image:linear-gradient(to right,rgba(255,255,255,.7),rgba(255,255,255,.7)),linear-gradient(to right,#1a73e8,#1a73e8)!important}.P1ekSe-ZMv3u>div:nth-child(3){background-image:linear-gradient(to right,rgba(255,255,255,.7),rgba(255,255,255,.7)),linear-gradient(to right,#1a73e8,#1a73e8)!important}.haAclf{display:inline-block}.nsm7Bb-HzV7m-LgbsSe{border-radius:4px;-moz-box-sizing:border-box;box-sizing:border-box;transition:background-color .218s,border-color .218s;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;-webkit-appearance:none;background-color:#fff;background-image:none;border:1px solid #dadce0;color:#3c4043;cursor:pointer;font-family:"Google Sans",arial,sans-serif;font-size:14px;height:40px;letter-spacing:.25px;outline:none;overflow:hidden;padding:0 12px;position:relative;text-align:center;vertical-align:middle;white-space:nowrap;width:auto}@media screen and (-ms-high-contrast:active){.nsm7Bb-HzV7m-LgbsSe{border:2px solid windowText;color:windowText}}@media screen and (preferes-contrast:more){.nsm7Bb-HzV7m-LgbsSe{color:#000}}.nsm7Bb-HzV7m-LgbsSe.pSzOP-SxQuSe{font-size:14px;height:32px;letter-spacing:.25px;padding:0 10px}.nsm7Bb-HzV7m-LgbsSe.purZT-SxQuSe{font-size:11px;height:20px;letter-spacing:.3px;padding:0 8px}.nsm7Bb-HzV7m-LgbsSe.Bz112c-LgbsSe{padding:0;width:40px}.nsm7Bb-HzV7m-LgbsSe.Bz112c-LgbsSe.pSzOP-SxQuSe{width:32px}.nsm7Bb-HzV7m-LgbsSe.Bz112c-LgbsSe.purZT-SxQuSe{width:20px}.nsm7Bb-HzV7m-LgbsSe.JGcpL-RbRzK{border-radius:20px}.nsm7Bb-HzV7m-LgbsSe.JGcpL-RbRzK.pSzOP-SxQuSe{border-radius:16px}.nsm7Bb-HzV7m-LgbsSe.JGcpL-RbRzK.purZT-SxQuSe{border-radius:10px}.nsm7Bb-HzV7m-LgbsSe.MFS4be-Ia7Qfc{border:none;color:#fff}.nsm7Bb-HzV7m-LgbsSe.MFS4be-v3pZbf-Ia7Qfc{background-color:#1a73e8}.nsm7Bb-HzV7m-LgbsSe.MFS4be-JaPV2b-Ia7Qfc{background-color:#202124;color:#e8eaed}@media screen and (prefers-contrast:more){.nsm7Bb-HzV7m-LgbsSe.MFS4be-JaPV2b-Ia7Qfc{color:#fff}}.nsm7Bb-HzV7m-LgbsSe .nsm7Bb-HzV7m-LgbsSe-Bz112c{height:18px;margin-right:8px;min-width:18px;width:18px}.nsm7Bb-HzV7m-LgbsSe.pSzOP-SxQuSe .nsm7Bb-HzV7m-LgbsSe-Bz112c{height:14px;min-width:14px;width:14px}.nsm7Bb-HzV7m-LgbsSe.purZT-SxQuSe .nsm7Bb-HzV7m-LgbsSe-Bz112c{height:10px;min-width:10px;width:10px}.nsm7Bb-HzV7m-LgbsSe.jVeSEe .nsm7Bb-HzV7m-LgbsSe-Bz112c{margin-left:8px;margin-right:-4px}.nsm7Bb-HzV7m-LgbsSe.Bz112c-LgbsSe .nsm7Bb-HzV7m-LgbsSe-Bz112c{margin:0;padding:10px}.nsm7Bb-HzV7m-LgbsSe.Bz112c-LgbsSe.pSzOP-SxQuSe .nsm7Bb-HzV7m-LgbsSe-Bz112c{padding:8px}.nsm7Bb-HzV7m-LgbsSe.Bz112c-LgbsSe.purZT-SxQuSe .nsm7Bb-HzV7m-LgbsSe-Bz112c{padding:4px}.nsm7Bb-HzV7m-LgbsSe .nsm7Bb-HzV7m-LgbsSe-Bz112c-haAclf{border-top-left-radius:3px;border-bottom-left-radius:3px;display:-moz-box;display:flex;-moz-box-pack:center;justify-content:center;-moz-box-align:center;align-items:center;background-color:#fff;height:36px;margin-left:-10px;margin-right:12px;min-width:36px;width:36px}.nsm7Bb-HzV7m-LgbsSe .nsm7Bb-HzV7m-LgbsSe-Bz112c-haAclf .nsm7Bb-HzV7m-LgbsSe-Bz112c,.nsm7Bb-HzV7m-LgbsSe.Bz112c-LgbsSe .nsm7Bb-HzV7m-LgbsSe-Bz112c-haAclf .nsm7Bb-HzV7m-LgbsSe-Bz112c{margin:0;padding:0}.nsm7Bb-HzV7m-LgbsSe.pSzOP-SxQuSe .nsm7Bb-HzV7m-LgbsSe-Bz112c-haAclf{height:28px;margin-left:-8px;margin-right:10px;min-width:28px;width:28px}.nsm7Bb-HzV7m-LgbsSe.purZT-SxQuSe .nsm7Bb-HzV7m-LgbsSe-Bz112c-haAclf{height:16px;margin-left:-6px;margin-right:8px;min-width:16px;width:16px}.nsm7Bb-HzV7m-LgbsSe.Bz112c-LgbsSe .nsm7Bb-HzV7m-LgbsSe-Bz112c-haAclf{border-radius:3px;margin-left:2px;margin-right:0;padding:0}.nsm7Bb-HzV7m-LgbsSe.JGcpL-RbRzK .nsm7Bb-HzV7m-LgbsSe-Bz112c-haAclf{border-radius:18px}.nsm7Bb-HzV7m-LgbsSe.pSzOP-SxQuSe.JGcpL-RbRzK .nsm7Bb-HzV7m-LgbsSe-Bz112c-haAclf{border-radius:14px}.nsm7Bb-HzV7m-LgbsSe.purZT-SxQuSe.JGcpL-RbRzK .nsm7Bb-HzV7m-LgbsSe-Bz112c-haAclf{border-radius:8px}.nsm7Bb-HzV7m-LgbsSe .nsm7Bb-HzV7m-LgbsSe-bN97Pc-sM5MNb{display:-moz-box;display:flex;-moz-box-align:center;align-items:center;-moz-box-orient:horizontal;-moz-box-direction:normal;flex-direction:row;-moz-box-pack:justify;justify-content:space-between;flex-wrap:nowrap;height:100%;position:relative;width:100%}.nsm7Bb-HzV7m-LgbsSe .oXtfBe-l4eHX{-moz-box-pack:center;justify-content:center}.nsm7Bb-HzV7m-LgbsSe .nsm7Bb-HzV7m-LgbsSe-BPrWId{-moz-box-flex:1;flex-grow:1;font-family:"Google Sans",arial,sans-serif;font-weight:500;overflow:hidden;text-overflow:ellipsis;vertical-align:top}.nsm7Bb-HzV7m-LgbsSe.purZT-SxQuSe .nsm7Bb-HzV7m-LgbsSe-BPrWId{font-weight:300}.nsm7Bb-HzV7m-LgbsSe .oXtfBe-l4eHX .nsm7Bb-HzV7m-LgbsSe-BPrWId{-moz-box-flex:0;flex-grow:0}.nsm7Bb-HzV7m-LgbsSe .nsm7Bb-HzV7m-LgbsSe-MJoBVe{transition:background-color .218s;bottom:0;left:0;position:absolute;right:0;top:0}.nsm7Bb-HzV7m-LgbsSe:hover,.nsm7Bb-HzV7m-LgbsSe:focus{box-shadow:none;border-color:rgb(210,227,252);outline:none}.nsm7Bb-HzV7m-LgbsSe:focus-within{outline:2px solid #00639b;border-color:transparent}.nsm7Bb-HzV7m-LgbsSe:hover .nsm7Bb-HzV7m-LgbsSe-MJoBVe{background:rgba(66,133,244,.08)}.nsm7Bb-HzV7m-LgbsSe:active .nsm7Bb-HzV7m-LgbsSe-MJoBVe,.nsm7Bb-HzV7m-LgbsSe:focus .nsm7Bb-HzV7m-LgbsSe-MJoBVe{background:rgba(66,133,244,.1)}.nsm7Bb-HzV7m-LgbsSe.MFS4be-Ia7Qfc:hover .nsm7Bb-HzV7m-LgbsSe-MJoBVe{background:rgba(255,255,255,.24)}.nsm7Bb-HzV7m-LgbsSe.MFS4be-Ia7Qfc:active .nsm7Bb-HzV7m-LgbsSe-MJoBVe,.nsm7Bb-HzV7m-LgbsSe.MFS4be-Ia7Qfc:focus .nsm7Bb-HzV7m-LgbsSe-MJoBVe{background:rgba(255,255,255,.32)}.nsm7Bb-HzV7m-LgbsSe .n1UuX-DkfjY{border-radius:50%;display:-moz-box;display:flex;height:20px;margin-left:-4px;margin-right:8px;min-width:20px;width:20px}.nsm7Bb-HzV7m-LgbsSe.jVeSEe .nsm7Bb-HzV7m-LgbsSe-BPrWId{font-family:"Roboto";font-size:12px;text-align:left}.nsm7Bb-HzV7m-LgbsSe.jVeSEe .nsm7Bb-HzV7m-LgbsSe-BPrWId .ssJRIf,.nsm7Bb-HzV7m-LgbsSe.jVeSEe .nsm7Bb-HzV7m-LgbsSe-BPrWId .K4efff .fmcmS{overflow:hidden;text-overflow:ellipsis}.nsm7Bb-HzV7m-LgbsSe.jVeSEe .nsm7Bb-HzV7m-LgbsSe-BPrWId .K4efff{display:-moz-box;display:flex;-moz-box-align:center;align-items:center;color:#5f6368;fill:#5f6368;font-size:11px;font-weight:400}.nsm7Bb-HzV7m-LgbsSe.jVeSEe.MFS4be-Ia7Qfc .nsm7Bb-HzV7m-LgbsSe-BPrWId .K4efff{color:#e8eaed;fill:#e8eaed}@media screen and (prefers-contrast:more){.nsm7Bb-HzV7m-LgbsSe.jVeSEe .nsm7Bb-HzV7m-LgbsSe-BPrWId .K4efff,.nsm7Bb-HzV7m-LgbsSe.jVeSEe.MFS4be-Ia7Qfc .nsm7Bb-HzV7m-LgbsSe-BPrWId .K4efff{color:#000;fill:#000}}.nsm7Bb-HzV7m-LgbsSe.jVeSEe .nsm7Bb-HzV7m-LgbsSe-BPrWId .K4efff .Bz112c{height:18px;margin:-3px -3px -3px 2px;min-width:18px;width:18px}.nsm7Bb-HzV7m-LgbsSe.jVeSEe .nsm7Bb-HzV7m-LgbsSe-Bz112c-haAclf{border-top-left-radius:0;border-bottom-left-radius:0;border-top-right-radius:3px;border-bottom-right-radius:3px;margin-left:12px;margin-right:-10px}.nsm7Bb-HzV7m-LgbsSe.jVeSEe.JGcpL-RbRzK .nsm7Bb-HzV7m-LgbsSe-Bz112c-haAclf{border-radius:18px}.L5Fo6c-sM5MNb{border:0;display:block;left:0;position:relative;top:0}.L5Fo6c-bF1uUb{border-radius:4px;bottom:0;cursor:pointer;left:0;position:absolute;right:0;top:0}.L5Fo6c-bF1uUb:focus{border:none;outline:none}sentinel{}</style></head>
<body>

    <nav class="topnav">
        <a class="brand" onclick="goHome()" title="Accueil">
            <div class="brand-icon" id="brandIcon"><span id="brandLetter">P</span><img id="brandLogo" style="display:none"></div>
            <div class="brand-text">CADIR<span>Suite Direction</span></div>
        </a>
        <div class="nav-sep"></div>
        <div class="nav-items" id="navItems"><div class="nav-item active" data-module="perdir" onclick="loadModule('perdir')" title="Ctrl+P"><i class="fas fa-building-columns"></i><span class="nav-label">CADIR</span><span class="nav-badge">Direction</span><kbd class="nav-shortcut">Ctrl+P</kbd></div><div class="nav-item" data-module="exam" onclick="loadModule('exam')" title="Ctrl+E"><i class="fas fa-file-pen"></i><span class="nav-label">EXAM</span><span class="nav-badge">Épreuves</span><kbd class="nav-shortcut">Ctrl+E</kbd></div><div class="nav-item" data-module="oral" onclick="loadModule('oral')" title="Ctrl+O"><i class="fas fa-comments"></i><span class="nav-label">ORAL</span><span class="nav-badge">Oraux</span><kbd class="nav-shortcut">Ctrl+O</kbd></div><div class="nav-item" data-module="aed" onclick="loadModule('aed')" title="Ctrl+A"><i class="fas fa-user-shield"></i><span class="nav-label">AED</span><span class="nav-badge">Vie Scolaire</span><kbd class="nav-shortcut">Ctrl+A</kbd></div><div class="nav-item" data-module="bibase" onclick="loadModule('bibase')" title="Ctrl+B"><i class="fas fa-newspaper"></i><span class="nav-label">BULLETIN</span><span class="nav-badge">Information</span><kbd class="nav-shortcut">Ctrl+B</kbd></div><div class="nav-item" data-module="data" onclick="openDataPanel()" title="Ctrl+D"><i class="fas fa-database"></i><span class="nav-label">Données</span><span class="nav-badge">Import</span><kbd class="nav-shortcut">Ctrl+D</kbd></div></div>
        <div class="nav-right">
            <div class="nav-clock" id="clock">mer. 18 févr., 21:26</div>
            <button class="nav-btn" onclick="openSettings()" title="Paramètres (Alt+P)"><i class="fas fa-cog"></i></button>
            <button class="nav-btn" onclick="toggleFullscreen()" title="Plein écran"><i class="fas fa-expand" id="fs-icon"></i></button>
        </div>
    </nav>

    <!-- ═══ SETTINGS ═══ -->
    <div class="settings-overlay" id="settingsOverlay" onclick="if(event.target===this)closeSettings()">
        <div class="settings-panel">
            <div class="settings-header">
                <h2><i class="fas fa-cog"></i> Paramètres généraux</h2>
                <button class="settings-close" onclick="closeSettings()">×</button>
            </div>
            <div class="settings-body">

                <div class="acc-section open">
                    <div class="acc-header" onclick="toggleAcc(this)"><h3><i class="fas fa-id-card"></i> Identité &amp; Établissement</h3><i class="fas fa-chevron-right acc-chevron"></i></div>
                    <div class="acc-body">
                    <div class="settings-grid">
                        <div class="form-group"><label>Nom de l'établissement</label><input type="text" id="s-school" placeholder="Lycée Jean-Antoine"></div>
                        <div class="form-group"><label>Nom &amp; Prénom</label><input type="text" id="s-name" placeholder="M. Dupont"></div>
                        <div class="form-group"><label>Fonction</label><input type="text" id="s-role" placeholder="Proviseur adjoint"></div>
                        <div class="form-group"><label>Ville</label><input type="text" id="s-city" placeholder="Rennes"></div>
                        <div class="form-group"><label>Zone de vacances</label><select id="s-zone" style="padding:8px 12px;border:1px solid #ddd;border-radius:8px;font-size:.85rem;width:100%;"><option value="A">Zone A</option><option value="B" selected="selected">Zone B</option><option value="C">Zone C</option></select></div>
                        <div class="form-group" style="display:flex;align-items:flex-end;">
                            <button onclick="triggerVacancesUpdate()" style="padding:9px 16px;border:none;border-radius:8px;background:#e67e22;color:#fff;font-weight:600;font-size:.78rem;cursor:pointer;white-space:nowrap;display:flex;align-items:center;gap:6px;height:40px;">
                                <i class="fas fa-calendar-day"></i> MAJ Vacances scolaires
                            </button>
                        </div>
                    </div>
                </div></div>
                <div class="acc-section">
                    <div class="acc-header" onclick="toggleAcc(this)"><h3><i class="fas fa-image"></i> Logo &amp; Signature</h3><i class="fas fa-chevron-right acc-chevron"></i></div>
                    <div class="acc-body">
                    <div class="settings-grid">
                        <div class="form-group">
                            <label>Logo de l'établissement</label>
                            <input type="file" accept="image/*" onchange="handleSettingsImage(this,'logo')">
                            <div class="img-preview" id="prev-logo">
                                <span class="placeholder" id="ph-logo">Aucun logo</span>
                                <img id="img-logo" style="display:none">
                                <button class="btn-clear" onclick="clearImage('logo')" title="Supprimer">×</button>
                            </div>
                        </div>
                        <div class="form-group">
                            <label>Signature scannée</label>
                            <input type="file" accept="image/*" onchange="handleSettingsImage(this,'sign')">
                            <div class="img-preview" id="prev-sign">
                                <span class="placeholder" id="ph-sign">Aucune signature</span>
                                <img id="img-sign" style="display:none">
                                <button class="btn-clear" onclick="clearImage('sign')" title="Supprimer">×</button>
                            </div>
                        </div>
                    </div>
                </div></div>
                <div class="acc-section">
                    <div class="acc-header" onclick="toggleAcc(this)"><h3><i class="fas fa-sliders"></i> Modules &amp; Organisation</h3><i class="fas fa-chevron-right acc-chevron"></i></div>
                    <div class="acc-body">
                        <h4 style="font-size:.78rem;font-weight:600;color:#666;margin:0 0 10px;text-transform:uppercase;letter-spacing:.5px"><i class="fas fa-eye" style="color:var(--c-info)"></i> Modules affichés</h4>
                        <div class="module-toggle">
                        <div class="module-toggle-icon" style="background:var(--c-info)"><i class="fas fa-building-columns"></i></div>
                        <div class="module-toggle-info"><strong>CADIR</strong><span>Direction &amp; pilotage</span></div>
                        <label class="toggle-switch"><input type="checkbox" id="tog-perdir" checked="checked" onchange="updateModuleVisibility()"><span class="toggle-slider"></span></label>
                    </div>
                    <div class="module-toggle">
                        <div class="module-toggle-icon" style="background:var(--c-accent)"><i class="fas fa-file-pen"></i></div>
                        <div class="module-toggle-info"><strong>EXAM</strong><span>Organisation des épreuves</span></div>
                        <label class="toggle-switch"><input type="checkbox" id="tog-exam" checked="checked" onchange="updateModuleVisibility()"><span class="toggle-slider"></span></label>
                    </div>
                    <div class="module-toggle">
                        <div class="module-toggle-icon" style="background:var(--c-warning)"><i class="fas fa-comments"></i></div>
                        <div class="module-toggle-info"><strong>ORAL</strong><span>Gestion des oraux</span></div>
                        <label class="toggle-switch"><input type="checkbox" id="tog-oral" checked="checked" onchange="updateModuleVisibility()"><span class="toggle-slider"></span></label>
                    </div>
                    <div class="module-toggle">
                        <div class="module-toggle-icon" style="background:var(--c-success)"><i class="fas fa-user-shield"></i></div>
                        <div class="module-toggle-info"><strong>AED</strong><span>Assistants d'éducation</span></div>
                        <label class="toggle-switch"><input type="checkbox" id="tog-aed" checked="checked" onchange="updateModuleVisibility()"><span class="toggle-slider"></span></label>
                    </div>
                    <div class="module-toggle">
                        <div class="module-toggle-icon" style="background:#e67e22"><i class="fas fa-newspaper"></i></div>
                        <div class="module-toggle-info"><strong>BULLETIN</strong><span>Bulletin d'information</span></div>
                        <label class="toggle-switch"><input type="checkbox" id="tog-bibase" checked="checked" onchange="updateModuleVisibility()"><span class="toggle-slider"></span></label>
                    </div>
                        <hr style="margin:18px 0;border:none;border-top:1px solid #eee">
                        <h4 style="font-size:.78rem;font-weight:600;color:#666;margin:0 0 10px;text-transform:uppercase;letter-spacing:.5px"><i class="fas fa-arrows-up-down" style="color:var(--c-info)"></i> Ordre des menus</h4>
                        <ul class="order-list" id="orderList"><li class="order-item" draggable="true" data-module="perdir">
                <span class="order-grip"><i class="fas fa-grip-vertical"></i></span>
                <span class="order-icon" style="background:var(--c-info)"><i class="fas fa-building-columns"></i></span>
                <span class="order-label">PERDIR <span style="color:#999;font-weight:400;font-size:0.72rem;">— Direction</span></span>
            </li><li class="order-item" draggable="true" data-module="exam">
                <span class="order-grip"><i class="fas fa-grip-vertical"></i></span>
                <span class="order-icon" style="background:var(--c-accent)"><i class="fas fa-file-pen"></i></span>
                <span class="order-label">EXAM <span style="color:#999;font-weight:400;font-size:0.72rem;">— Épreuves</span></span>
            </li><li class="order-item" draggable="true" data-module="oral">
                <span class="order-grip"><i class="fas fa-grip-vertical"></i></span>
                <span class="order-icon" style="background:var(--c-warning)"><i class="fas fa-comments"></i></span>
                <span class="order-label">ORAL <span style="color:#999;font-weight:400;font-size:0.72rem;">— Oraux</span></span>
            </li><li class="order-item" draggable="true" data-module="aed">
                <span class="order-grip"><i class="fas fa-grip-vertical"></i></span>
                <span class="order-icon" style="background:var(--c-success)"><i class="fas fa-user-shield"></i></span>
                <span class="order-label">AED <span style="color:#999;font-weight:400;font-size:0.72rem;">— Vie Scolaire</span></span>
            </li><li class="order-item" draggable="true" data-module="bibase">
                <span class="order-grip"><i class="fas fa-grip-vertical"></i></span>
                <span class="order-icon" style="background:#e67e22"><i class="fas fa-newspaper"></i></span>
                <span class="order-label">BULLETIN <span style="color:#999;font-weight:400;font-size:0.72rem;">— Information</span></span>
            </li><li class="order-item" draggable="true" data-module="data">
                <span class="order-grip"><i class="fas fa-grip-vertical"></i></span>
                <span class="order-icon" style="background:var(--c-purple)"><i class="fas fa-database"></i></span>
                <span class="order-label">DONNÉES <span style="color:#999;font-weight:400;font-size:0.72rem;">— Import</span></span>
            </li></ul>
                    <div class="order-hint"><i class="fas fa-hand-pointer"></i> Glissez-déposez pour réorganiser l'ordre</div>
                    
                    </div>
                </div>
                <div class="acc-section">
                    <div class="acc-header" onclick="toggleAcc(this)"><h3><i class="fas fa-bars"></i> Sous-menus CADIR</h3><i class="fas fa-chevron-right acc-chevron"></i></div>
                    <div class="acc-body"><div class="acc-body-inner">
                        <small style="color:#888;display:block;margin-bottom:10px;">Affichez/masquez et réorganisez les sous-menus du module CADIR par glisser-déposer.</small>
                        <div id="perdir-submenu-list" style="margin-bottom:8px;"></div>
                        <div class="order-hint" style="font-size:.68rem;color:#aaa;"><i class="fas fa-hand-pointer"></i> Glissez pour réordonner. Décochez pour masquer.</div>
                    </div></div>
                </div>
                <div class="acc-section">
                    <div class="acc-header" onclick="toggleAcc(this)"><h3><i class="fas fa-file-pdf"></i> En-têtes des documents PDF</h3><i class="fas fa-chevron-right acc-chevron"></i></div>
                    <div class="acc-body">
                        <small style="color:#888;display:block;margin-bottom:12px;">Personnalisez l'en-tête des PDF générés dans CADIR (entretiens, réunions, conseil de direction…).</small>
                        <div class="settings-grid">
                            <div class="form-group">
                                <label>Style de l'en-tête</label>
                                <select id="s-pdf-layout" style="padding:9px 12px;border:1px solid #ddd;border-radius:8px;font-size:.85rem;font-family:var(--font);width:100%;">
                                    <option value="classique" selected="selected">Classique — logo + nom + séparateur</option>
                                    <option value="bandeau">Bandeau coloré pleine largeur</option>
                                    <option value="moderne">Moderne — centré avec accent coloré</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Couleur principale</label>
                                <div style="display:flex;align-items:center;gap:8px;">
                                    <input type="color" id="s-pdf-color" value="#1b2433" style="width:42px;height:36px;border:1px solid #ddd;border-radius:6px;cursor:pointer;padding:2px;" oninput="var h=document.getElementById('s-pdf-color-hex');if(h)h.value=this.value;" onchange="var h=document.getElementById('s-pdf-color-hex');if(h)h.value=this.value;">
                                    <input type="text" id="s-pdf-color-hex" value="#1b2433" placeholder="#1b2433" style="flex:1;padding:8px;border:1px solid #ddd;border-radius:8px;font-size:.82rem;" oninput="document.getElementById('s-pdf-color').value=this.value">
                                </div>
                            </div>
                            <div class="form-group" style="grid-column:1/-1;">
                                <label>Sous-titre (département, service…)</label>
                                <input type="text" id="s-pdf-subtitle" placeholder="Direction" style="padding:9px 12px;border:1px solid #ddd;border-radius:8px;font-size:.85rem;font-family:var(--font);">
                                <small style="color:#aaa;font-size:.65rem;margin-top:3px;">Affiché sous le nom d'établissement dans l'en-tête. Laissez vide pour "Direction".</small>
                            </div>
                        </div>
                        <div id="pdf-header-preview" style="margin-top:14px;border:1px solid #e0e0e0;border-radius:8px;overflow:hidden;font-family:'Times New Roman',serif;font-size:.8rem;">
                            <div style="background:#f5f5f5;padding:6px 12px;font-size:.7rem;color:#888;font-family:var(--font);border-bottom:1px solid #eee;">Aperçu</div>
                            <div style="padding:12px 16px;" id="pdf-header-preview-inner"><div style="display:flex;justify-content:space-between;align-items:flex-start;border-bottom:1.5px solid #000;padding-bottom:8px;"><div><div style="font-weight:bold;text-transform:uppercase;font-size:.9rem;">Nom de l'établissement</div><div style="font-size:.7rem;color:#555;margin-top:1px;">Direction</div></div><div></div></div></div>
                        </div>
                        <button onclick="updatePdfHeaderPreview()" style="margin-top:8px;padding:6px 14px;border:none;border-radius:7px;background:#eaf4fe;color:var(--c-info);font-weight:600;font-size:.75rem;cursor:pointer;font-family:var(--font);"><i class="fas fa-sync"></i> Aperçu</button>
                    </div>
                </div>
                <div class="acc-section">
                    <div class="acc-header" onclick="toggleAcc(this)"><h3><i class="fas fa-calendar-alt"></i> Agendas externes</h3><i class="fas fa-chevron-right acc-chevron"></i></div>
                    <div class="acc-body">
                    <div class="settings-grid">
                        <div class="form-group" style="grid-column:1/-1;">
                            <label style="display:flex;align-items:center;gap:8px;cursor:pointer;">
                                <input type="checkbox" id="s-gcal" onchange="toggleGcal()" style="width:18px;height:18px;cursor:pointer;accent-color:#4285f4;">
                                <span style="font-weight:600;">Utiliser Google Agenda dans CADIR</span>
                            </label>
                            <small style="color:#888;font-size:.65rem;margin-top:2px;display:block;margin-left:26px;">Si décoché, l'agenda CADIR fonctionne en mode local (déconnecté).</small>
                        </div>
                        <div id="gcal-opts" style="display:none;grid-column:1/-1;">
                            <div style="background:#f8f9fa;border:1px solid #e0e0e0;border-radius:10px;padding:14px;margin-bottom:12px;">
                                <div style="font-weight:600;font-size:.8rem;margin-bottom:8px;color:#333;"><i class="fab fa-google" style="color:#4285f4;margin-right:4px;"></i> Connexion OAuth2</div>
                                <div class="form-group" style="margin-bottom:8px">
                                    <label style="font-size:.75rem;">Client ID OAuth2</label>
                                    <input type="text" id="s-gcal-clientid" placeholder="xxxxx.apps.googleusercontent.com" style="padding:8px;border:1px solid #ddd;border-radius:8px;width:100%;font-size:.8rem;">
                                    <small style="color:#888;font-size:.62rem;">Console Google Cloud → API &amp; Services → Identifiants → ID client OAuth 2.0 (<a href="https://console.cloud.google.com/apis/credentials" target="_blank">ouvrir</a>)</small>
                                </div>
                                <div style="display:flex;gap:8px;align-items:center;flex-wrap:wrap;">
                                    <button onclick="gcalAuth()" id="btn-gcal-auth" style="padding:7px 16px;border:none;border-radius:8px;background:#4285f4;color:#fff;font-weight:600;font-size:.78rem;cursor:pointer;display:flex;align-items:center;gap:6px;">
                                        <i class="fas fa-sign-in-alt"></i> Se connecter à Google
                                    </button>
                                    <span id="gcal-auth-status" style="font-size:.72rem;color:#999;"></span>
                                </div>
                            </div>

                            <div id="gcal-list-wrap" style="display:none;">
                                <div style="font-weight:600;font-size:.78rem;margin-bottom:6px;color:#333;"><i class="fas fa-list"></i> Vos agendas Google</div>
                                <div id="gcal-list" style="margin-bottom:8px;max-height:200px;overflow-y:auto;"></div>
                                <button onclick="gcalFetchEvents()" style="padding:7px 14px;border:none;border-radius:8px;background:#34a853;color:#fff;font-weight:600;font-size:.78rem;cursor:pointer;"><i class="fas fa-sync"></i> Synchroniser les événements</button>
                                <div id="gcal-events-status" style="margin-top:6px;font-size:.72rem;color:#888;"></div>
                            </div>

                            <div style="margin-top:12px;border-top:1px solid #eee;padding-top:10px;">
                                <details>
                                    <summary style="cursor:pointer;font-size:.72rem;color:#888;font-weight:600;"><i class="fas fa-keyboard"></i> Ajouter un agenda manuellement</summary>
                                    <div style="margin-top:8px;">
                                        <small style="color:#888;font-size:.62rem;display:block;margin-bottom:6px;">Pour les agendas publics : copiez l'ID depuis Google Agenda → Paramètres de l'agenda.</small>
                                        <div class="form-group" style="margin-bottom:6px">
                                            <label style="font-size:.72rem;">Clé API (pour agendas publics)</label>
                                            <input type="text" id="s-gcal-key" placeholder="AIzaSy..." style="padding:7px;border:1px solid #ddd;border-radius:8px;width:100%;font-size:.78rem;">
                                        </div>
                                        <div style="display:flex;gap:6px;align-items:flex-end;">
                                            <div class="form-group" style="flex:2;">
                                                <label style="font-size:.72rem;">ID du calendrier</label>
                                                <input type="text" id="gcal-manual-id" placeholder="email@gmail.com" style="padding:7px;border:1px solid #ddd;border-radius:8px;width:100%;font-size:.78rem;">
                                            </div>
                                            <div class="form-group" style="flex:1;">
                                                <label style="font-size:.72rem;">Nom</label>
                                                <input type="text" id="gcal-manual-name" placeholder="Mon agenda" style="padding:7px;border:1px solid #ddd;border-radius:8px;width:100%;font-size:.78rem;">
                                            </div>
                                            <button onclick="addManualCal()" style="padding:7px 12px;border:none;border-radius:8px;background:var(--c-info);color:#fff;font-weight:700;cursor:pointer;font-size:.85rem;height:36px;">+</button>
                                        </div>
                                        <div id="gcal-manual-list" style="margin-top:6px;"></div>
                                    </div>
                                </details>
                            </div>
                        </div>

                            <div style="margin-top:20px;border-top:2px solid #e0e0e0;padding-top:16px;">
                                <div style="font-weight:700;font-size:.88rem;margin-bottom:10px;color:#0078d4;display:flex;align-items:center;gap:8px;"><i class="fab fa-microsoft"></i> Outlook / Office 365</div>
                                <small style="color:#666;display:block;margin-bottom:10px;line-height:1.4;font-size:.7rem;">Connectez un calendrier Outlook / Microsoft 365 via Microsoft Graph API.</small>
                                <div class="form-group" style="margin-bottom:8px;"><label style="font-size:.72rem;">Application (client) ID</label><input type="text" id="s-outlook-clientid" placeholder="Azure AD App ID" style="padding:8px;border:1px solid #ddd;border-radius:8px;width:100%;font-size:.78rem;"></div>
                                <button onclick="outlookAuth()" id="btn-outlook-auth" style="padding:9px 18px;border:none;border-radius:8px;background:#0078d4;color:#fff;font-weight:600;cursor:pointer;display:flex;align-items:center;gap:8px;font-size:.8rem;"><i class="fab fa-microsoft"></i> Connecter Outlook</button>
                                <span id="outlook-auth-status" style="font-size:.72rem;color:#888;margin-left:8px;"></span>
                                <div id="outlook-cal-list-wrap" style="display:none;margin-top:12px;">
                                    <label style="font-size:.72rem;font-weight:600;">Agendas Outlook :</label>
                                    <div id="outlook-cal-list" style="margin-top:6px;"></div>
                                    <button onclick="outlookFetchEvents()" style="margin-top:8px;padding:8px 16px;border:none;border-radius:8px;background:#0078d4;color:#fff;font-weight:600;cursor:pointer;font-size:.78rem;"><i class="fas fa-sync"></i> Synchroniser</button>
                                    <span id="outlook-events-status" style="font-size:.72rem;margin-left:8px;"></span>
                                </div>
                            </div>
                    </div>
                </div></div>
                <div class="acc-section">
                    <div class="acc-header" onclick="toggleAcc(this)"><h3><i class="fas fa-hard-drive"></i> Sauvegarde &amp; Synchronisation</h3><i class="fas fa-chevron-right acc-chevron"></i></div>
                    <div class="acc-body">
                    <div style="margin-bottom:18px;padding:16px;background:#f0f7ff;border:1px solid #c8ddf5;border-radius:10px;">
                        <div style="display:flex;align-items:center;gap:8px;margin-bottom:10px;">
                            <i class="fas fa-cloud" style="color:#3498db;font-size:1.1rem;"></i>
                            <strong style="font-size:.85rem;color:#2c3e50;">Synchronisation en ligne</strong>
                            <label class="toggle-switch" style="margin-left:auto;"><input type="checkbox" id="s-cloud-enabled" onchange="toggleCloudUI()"><span class="toggle-slider"></span></label>
                        </div>
                        <div id="cloud-opts" style="display:none;">
                            <div style="margin-bottom:12px;">
                                <label style="font-size:.78rem;font-weight:600;color:#333;display:block;margin-bottom:6px;">Fournisseur de stockage</label>
                                <div style="display:flex;gap:8px;flex-wrap:wrap;" id="cloud-provider-btns">
                                    <button class="cloud-prov-btn active" data-prov="jsonbin" onclick="selectCloudProvider('jsonbin')"><i class="fas fa-database" style="color:#3498db"></i> jsonbin.io<br><small>Gratuit • Simple</small></button>
                                    <button class="cloud-prov-btn" data-prov="gist" onclick="selectCloudProvider('gist')"><i class="fab fa-github" style="color:#333"></i> GitHub Gist<br><small>Gratuit • Illimité</small></button>
                                    <button class="cloud-prov-btn" data-prov="webdav" onclick="selectCloudProvider('webdav')"><i class="fas fa-server" style="color:#e67e22"></i> WebDAV / FTP<br><small>Serveur perso</small></button>
                                    <button class="cloud-prov-btn" data-prov="gdrive" onclick="selectCloudProvider('gdrive')"><i class="fab fa-google-drive" style="color:#0f9d58"></i> Google Drive<br><small>OAuth2</small></button>
                                    <button class="cloud-prov-btn" data-prov="localfolder" onclick="selectCloudProvider('localfolder')"><i class="fas fa-folder-open" style="color:#0078d4"></i> Dossier Local<br><small>OneDrive / GDrive / Dropbox</small></button>
                                </div>
                            </div>
                            <div id="cloud-cfg-jsonbin">
                                <small style="color:#666;display:block;margin-bottom:8px;line-height:1.4;"><a href="https://jsonbin.io/" target="_blank" style="color:#3498db;">jsonbin.io</a> — Créez un compte gratuit, copiez votre <b>X-Master-Key</b> depuis le dashboard.</small>
                                <div class="settings-grid">
                                    <div class="form-group"><label style="font-size:.72rem;">Clé API (X-Master-Key)</label><input type="password" id="s-cloud-key" placeholder="$2a$10$xxxxxxx..." style="padding:8px;border:1px solid #ddd;border-radius:8px;width:100%;font-size:.78rem;"></div>
                                    <div class="form-group"><label style="font-size:.72rem;">ID du Bin <small style="color:#aaa;">(auto-créé)</small></label><input type="text" id="s-cloud-bin" placeholder="Automatique au 1er envoi" style="padding:8px;border:1px solid #ddd;border-radius:8px;width:100%;font-size:.78rem;"></div>
                                </div>
                            </div>
                            <div id="cloud-cfg-gist" style="display:none;">
                                <small style="color:#666;display:block;margin-bottom:8px;line-height:1.4;"><a href="https://github.com/settings/tokens" target="_blank" style="color:#333;">GitHub</a> — Créez un <b>Personal Access Token</b> (scope <code>gist</code>). Stockage illimité et privé.</small>
                                <div class="settings-grid">
                                    <div class="form-group"><label style="font-size:.72rem;">Personal Access Token</label><input type="password" id="s-gist-token" placeholder="ghp_xxxxxxxxxxxx" style="padding:8px;border:1px solid #ddd;border-radius:8px;width:100%;font-size:.78rem;"></div>
                                    <div class="form-group"><label style="font-size:.72rem;">Gist ID <small style="color:#aaa;">(auto-créé)</small></label><input type="text" id="s-gist-id" placeholder="Automatique au 1er envoi" style="padding:8px;border:1px solid #ddd;border-radius:8px;width:100%;font-size:.78rem;"></div>
                                </div>
                            </div>
                            <div id="cloud-cfg-gdrive" style="display:none;">
                                <small style="color:#666;display:block;margin-bottom:8px;line-height:1.4;">Utilisez <b>Google Drive</b> pour stocker vos données. Nécessite le même Client ID OAuth2 que Google Agenda (ajouter le scope <code>drive.file</code>).</small>
                                <div class="settings-grid">
                                    <div class="form-group"><label style="font-size:.72rem;">Client ID OAuth2</label><input type="text" id="s-gdrive-clientid" placeholder="Même que Google Agenda" style="padding:8px;border:1px solid #ddd;border-radius:8px;width:100%;font-size:.78rem;"></div>
                                    <div class="form-group"><label style="font-size:.72rem;">File ID <small style="color:#aaa;">(auto-créé)</small></label><input type="text" id="s-gdrive-fileid" placeholder="Automatique au 1er envoi" style="padding:8px;border:1px solid #ddd;border-radius:8px;width:100%;font-size:.78rem;"></div>
                                </div>
                                <button class="backup-btn" onclick="gdriveAuth()" style="margin-top:8px;background:#0f9d58;color:#fff;border-color:#0f9d58;"><i class="fab fa-google"></i> Connecter Google Drive</button>
                                <span id="gdrive-auth-status" style="font-size:.72rem;color:#888;margin-left:8px;"></span>
                            </div>
                            <div id="cloud-cfg-localfolder" style="display:none;">
                                <div id="lf-mode-auto" style="display:none;">
                                    <small style="color:#666;display:block;margin-bottom:10px;line-height:1.4;"><b>Mode automatique</b> — Toutes vos données sont synchronisées en temps réel dans le dossier local choisi (OneDrive, Google Drive, Dropbox…).</small>
                                    <div style="display:flex;align-items:center;gap:10px;flex-wrap:wrap;margin-bottom:8px;">
                                        <button class="backup-btn" onclick="lfPickFolder()" style="background:#0078d4;color:#fff;border-color:#0078d4;" id="lf-pick-btn"><i class="fas fa-folder-open"></i> Choisir le dossier</button>
                                        <span id="lf-auto-status" style="font-size:.72rem;color:#888;"></span>
                                    </div>
                                    <div id="lf-auto-actions" style="display:none;margin-top:6px;">
                                        <div style="display:flex;gap:8px;flex-wrap:wrap;">
                                            <button class="backup-btn" onclick="lfForceSave()" style="background:#27ae60;color:#fff;border-color:#27ae60;font-size:.72rem;padding:6px 12px;"><i class="fas fa-save"></i> Forcer la sauvegarde</button>
                                            <button class="backup-btn" onclick="lfForceLoad()" style="background:#3498db;color:#fff;border-color:#3498db;font-size:.72rem;padding:6px 12px;"><i class="fas fa-sync"></i> Recharger depuis le fichier</button>
                                        </div>
                                    </div>
                                    <small style="color:#aaa;display:block;margin-top:8px;"><i class="fas fa-info-circle"></i> Le fichier <code>pilote_data.json</code> est automatiquement mis à jour dans le dossier sélectionné à chaque modification.</small>
                                </div>
                                <div id="lf-mode-manual">
                                    <small style="color:#666;display:block;margin-bottom:10px;line-height:1.4;">Sauvegardez vos données dans un fichier <code>pilote_data.json</code> que vous placez dans votre <b>dossier synchronisé</b> (OneDrive, Google Drive, Dropbox…).</small>
                                    <div style="display:flex;gap:10px;flex-wrap:wrap;margin-bottom:8px;">
                                        <button class="backup-btn" onclick="localFolderExport()" style="background:#0078d4;color:#fff;border-color:#0078d4;"><i class="fas fa-download"></i> Exporter</button>
                                        <label class="backup-btn" style="background:#27ae60;color:#fff;border-color:#27ae60;cursor:pointer;margin:0;"><i class="fas fa-upload"></i> Importer
                                            <input type="file" id="localfolder-import" accept=".json" style="display:none;" onchange="localFolderImport(this)">
                                        </label>
                                    </div>
                                    <span id="localfolder-status" style="font-size:.72rem;color:#888;display:block;margin-top:4px;"></span>
                                    <div style="background:#fffbea;border:1px solid #f0d060;border-radius:8px;padding:10px 12px;margin-top:10px;">
                                        <small style="color:#8a6d00;line-height:1.5;display:block;"><i class="fas fa-lightbulb" style="color:#f0a030;"></i> <b>Astuce — Synchronisation automatique :</b><br>
                                        Lancez un mini-serveur local pour activer l'écriture directe dans votre dossier :<br>
                                        <code style="background:#fff;padding:3px 8px;border-radius:4px;display:inline-block;margin:4px 0;user-select:all;cursor:pointer;" onclick="navigator.clipboard.writeText(this.textContent)" title="Cliquer pour copier">python3 -m http.server 8080</code><br>
                                        puis ouvrez <code style="user-select:all;cursor:pointer;" onclick="navigator.clipboard.writeText('http://localhost:8080/PILOTE_Suite.html')">http://localhost:8080/PILOTE_Suite.html</code></small>
                                    </div>
                                </div>
                            </div>
                            <div id="cloud-cfg-webdav" style="display:none;">
                                <small style="color:#666;display:block;margin-bottom:8px;line-height:1.4;">Connectez un serveur <b>WebDAV</b>
 (Nextcloud, OwnCloud, Synology, NAS…). Le protocole FTP natif n'est pas
 supporté par les navigateurs — utilisez un proxy WebDAV.</small>
                                <div class="settings-grid">
                                    <div class="form-group" style="grid-column:1/-1;"><label style="font-size:.72rem;">URL du serveur WebDAV</label><input type="text" id="s-webdav-url" placeholder="https://cloud.monserveur.fr/remote.php/dav/files/user/" style="padding:8px;border:1px solid #ddd;border-radius:8px;width:100%;font-size:.78rem;"></div>
                                    <div class="form-group"><label style="font-size:.72rem;">Identifiant</label><input type="text" id="s-webdav-user" placeholder="utilisateur" style="padding:8px;border:1px solid #ddd;border-radius:8px;width:100%;font-size:.78rem;"></div>
                                    <div class="form-group"><label style="font-size:.72rem;">Mot de passe</label><input type="password" id="s-webdav-pass" placeholder="••••••••" style="padding:8px;border:1px solid #ddd;border-radius:8px;width:100%;font-size:.78rem;"></div>
                                </div>
                            </div>
                            <div style="display:flex;gap:8px;flex-wrap:wrap;margin-top:12px;">
                                <button class="backup-btn" onclick="cloudPush()" style="background:#27ae60;color:#fff;border-color:#27ae60;"><i class="fas fa-cloud-arrow-up"></i> Envoyer</button>
                                <button class="backup-btn" onclick="cloudPull()" style="background:#3498db;color:#fff;border-color:#3498db;"><i class="fas fa-cloud-arrow-down"></i> Récupérer</button>
                            </div>
                            <div id="cloud-status" style="margin-top:8px;font-size:.72rem;color:#888;"></div>
                            <label style="display:flex;align-items:center;gap:6px;margin-top:10px;cursor:pointer;font-size:.75rem;color:#555;">
                                <input type="checkbox" id="s-cloud-auto" style="accent-color:#27ae60;"> Sync automatique à chaque sauvegarde
                            </label>
                        </div>
                    </div>
                    <div class="settings-backup">
                        <button class="backup-btn" onclick="exportSettings()"><i class="fas fa-download"></i> Exporter les paramètres</button>
                        <label class="backup-btn import-btn"><i class="fas fa-upload"></i> Importer des paramètres<input type="file" accept=".json" onchange="importSettings(this)"></label>
                    </div>
                    <div class="order-hint" style="margin-top:8px"><i class="fas fa-info-circle"></i>
 Exportez vos paramètres pour les conserver entre les versions. Le 
fichier JSON contient identité, images, ordre et visibilité des modules.</div>
                </div></div>
            </div>
            <div class="acc-section">
                    <div class="acc-header" onclick="toggleAcc(this)"><h3><i class="fas fa-newspaper" style="color:#e67e22"></i> Bulletin d'information</h3><i class="fas fa-chevron-right acc-chevron"></i></div>
                    <div class="acc-body">
                    <small style="color:#888;display:block;margin-bottom:12px">Paramètres du module Bulletin d'information.</small>
                    <div class="settings-grid">
                        <div class="form-group">
                            <label>Mise en page du PDF</label>
                            <select id="bib-layout" style="padding:8px 12px;border:1px solid #ddd;border-radius:8px;font-size:.85rem;width:100%;">
                                <option value="classic" selected="selected">Classique</option>
                                <option value="modern">Centré</option>
                                <option value="banner">Bandeau</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Police d'écriture</label>
                            <select id="bib-font" style="padding:8px 12px;border:1px solid #ddd;border-radius:8px;font-size:.85rem;width:100%;">
                                <option value="inter" selected="selected">Inter (Moderne, Sans Serif)</option>
                                <option value="serif">Merriweather (Classique, Serif)</option>
                                <option value="mono">Roboto Mono (Monospace)</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Signataire par défaut</label>
                            <select id="bib-signatory" style="padding:8px 12px;border:1px solid #ddd;border-radius:8px;font-size:.85rem;width:100%;">
                                <option value="L'équipe de direction" selected="selected">L'équipe de direction</option>
                                <option value="Le Chef d'établissement">Le Chef d'établissement</option>
                                <option value="Le Directeur adjoint">Le Directeur adjoint</option>
                                <option value="Le Proviseur">Le Proviseur</option>
                                <option value="Le Principal">Le Principal</option>
                                <option value="Tous">Tous</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Titre du document</label>
                            <input type="text" id="bib-doc-title" value="Bulletin d'information" style="padding:8px 12px;border:1px solid #ddd;border-radius:8px;font-size:.85rem;width:100%;">
                        </div>
                    </div>
                    <div style="margin-top:10px">
                        <div class="form-group">
                            <label>Note de pied de page (PDF)</label>
                            <input type="text" id="bib-doc-footer" placeholder="Ex: Document Interne - Ne pas diffuser" style="padding:8px 12px;border:1px solid #ddd;border-radius:8px;font-size:.85rem;width:100%;">
                        </div>
                    </div>
                </div></div>
            <div class="settings-footer">
                <button class="btn-settings btn-cancel" onclick="closeSettings()">Annuler</button>
                <button class="btn-settings btn-save" onclick="saveSettings()"><i class="fas fa-check"></i> Enregistrer</button>
            </div>
        </div>
    </div>

    <!-- ═══ CONTENT ═══ -->
    <div class="content-area" id="contentArea">
        <div class="welcome hidden" id="welcome">
            <div class="welcome-header">
                <div class="welcome-logo" id="welcomeLogo"><span id="welcomeLetter">P</span><img id="welcomeLogoImg" style="display:none"></div>
                <h1 class="welcome-title">Bienvenue sur CADIR</h1>
                <p class="welcome-subtitle" id="welcomeSubtitle">Suite d'outils pour la direction d'établissement</p>
            </div>
            <div class="module-grid" id="moduleGrid"><div class="module-card" data-m="perdir" onclick="loadModule('perdir')"><div class="module-icon"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="22" height="22"><rect x="3" y="10" width="18" height="11" rx="1"></rect><path d="M3 10l9-7 9 7"></path><line x1="12" y1="3" x2="12" y2="10"></line><rect x="7" y="14" width="3" height="7"></rect><rect x="14" y="14" width="3" height="7"></rect></svg></div><h3>CADIR</h3><p>Direction &amp; pilotage</p></div><div class="module-card" data-m="exam" onclick="loadModule('exam')"><div class="module-icon"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="22" height="22"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="16" y1="13" x2="8" y2="13"></line><line x1="16" y1="17" x2="8" y2="17"></line><path d="M10 9H8"></path></svg></div><h3>EXAM</h3><p>Organisation des épreuves</p></div><div class="module-card" data-m="oral" onclick="loadModule('oral')"><div class="module-icon"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="22" height="22"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path></svg></div><h3>ORAL</h3><p>Gestion des oraux &amp; écrits</p></div><div class="module-card" data-m="aed" onclick="loadModule('aed')"><div class="module-icon"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="22" height="22"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle><path d="M18 8s2 2 0 5"></path></svg></div><h3>AED</h3><p>Assistants d'éducation</p></div><div class="module-card" data-m="bibase" onclick="loadModule('bibase')"><div class="module-icon"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="22" height="22"><path d="M4 22h16a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v16a4 4 0 0 1-4-4V6"></path><line x1="16" y1="6" x2="10" y2="6"></line><line x1="16" y1="10" x2="10" y2="10"></line><line x1="16" y1="14" x2="10" y2="14"></line></svg></div><h3>BULLETIN</h3><p>Bulletin d'information</p></div><div class="module-card" data-m="data" onclick="openDataPanel()"><div class="module-icon"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="22" height="22"><ellipse cx="12" cy="5" rx="9" ry="3"></ellipse><path d="M21 12c0 1.66-4 3-9 3s-9-1.34-9-3"></path><path d="M3 5v14c0 1.66 4 3 9 3s9-1.34 9-3V5"></path></svg></div><h3>DONNÉES</h3><p>Import élèves &amp; enseignants</p></div></div>
        </div>

        <!-- DATA PANEL -->
        <div class="data-panel" id="dataPanel">
            <div class="data-header">
                <h1><i class="fas fa-database"></i> Données</h1>
                <p>Importez vos listes d'enseignants et d'élèves. Les données seront partagées avec tous les modules.</p>
            </div>
            <div class="data-body">
                <div class="data-card">
                    <div class="data-card-header teachers">
                        <i class="fas fa-chalkboard-teacher"></i>
                        <h3>Enseignants</h3>
                        <span class="data-badge has-data" id="badge-teachers">Non chargé</span>
                    </div>
                    <div class="data-card-body">
                        <div class="data-actions" style="margin-bottom:12px">
                            <button class="data-btn data-btn-tpl" onclick="downloadTemplate('teachers')"><i class="fas fa-file-download"></i> Télécharger le modèle vierge</button>
                        </div>
                        <div class="excel-drop loaded" id="drop-teachers">
                            <input type="file" accept=".xlsx,.xls,.csv" multiple="" onchange="handleExcelImport(this,'teachers')">
                            <i class="fas fa-file-excel drop-icon"></i>
                            <div class="drop-label" id="lbl-teachers">Cliquez ou glissez un ou plusieurs fichiers Excel</div>
                            <div class="drop-hint">.xlsx, .xls ou .csv — plusieurs fichiers possibles</div>
                        </div>
                        <div class="data-actions" id="actions-teachers" style="display:none">
                            <button class="data-btn data-btn-view" onclick="togglePreview('teachers')"><i class="fas fa-table"></i> Voir / Masquer</button>
                            <button class="data-btn data-btn-clear" onclick="clearExcelData('teachers')"><i class="fas fa-trash"></i> Supprimer</button>
                        </div>
                        <div class="data-count" id="count-teachers"></div>
                        <div class="data-preview" id="preview-teachers" style="display:none"></div>
                    </div>
                </div>
                <div class="data-card">
                    <div class="data-card-header students">
                        <i class="fas fa-user-graduate"></i>
                        <h3>Élèves</h3>
                        <span class="data-badge has-data" id="badge-students">Non chargé</span>
                    </div>
                    <div class="data-card-body">
                        <div class="data-actions" style="margin-bottom:12px">
                            <button class="data-btn data-btn-tpl" onclick="downloadTemplate('students')"><i class="fas fa-file-download"></i> Télécharger le modèle vierge</button>
                        </div>
                        <div class="excel-drop loaded" id="drop-students">
                            <input type="file" accept=".xlsx,.xls,.csv" multiple="" onchange="handleExcelImport(this,'students')">
                            <i class="fas fa-file-excel drop-icon"></i>
                            <div class="drop-label" id="lbl-students">Cliquez ou glissez un ou plusieurs fichiers Excel</div>
                            <div class="drop-hint">.xlsx, .xls ou .csv — plusieurs fichiers possibles</div>
                        </div>
                        <div class="data-actions" id="actions-students" style="display:none">
                            <button class="data-btn data-btn-view" onclick="togglePreview('students')"><i class="fas fa-table"></i> Voir / Masquer</button>
                            <button class="data-btn data-btn-clear" onclick="clearExcelData('students')"><i class="fas fa-trash"></i> Supprimer</button>
                        </div>
                        <div class="data-count" id="count-students"></div>
                        <div class="data-preview" id="preview-students" style="display:none"></div>
                    </div>
                </div>
            </div>
        </div>

        <div class="loader-overlay" id="loader"><div class="loader-spinner"></div><div class="loader-text">Chargement du module…</div></div>
        <iframe class="module-frame active" id="frame-perdir" sandbox="allow-scripts allow-same-origin allow-popups allow-modals allow-downloads allow-forms" src="blob:null/51323e71-e24a-4649-809a-7b80b991e53a"></iframe>
        <iframe class="module-frame" id="frame-exam" sandbox="allow-scripts allow-same-origin allow-popups allow-modals allow-downloads allow-forms"></iframe>
        <iframe class="module-frame" id="frame-oral" sandbox="allow-scripts allow-same-origin allow-popups allow-modals allow-downloads allow-forms"></iframe>
        <iframe class="module-frame" id="frame-aed" sandbox="allow-scripts allow-same-origin allow-popups allow-modals allow-downloads allow-forms"></iframe>
        <iframe class="module-frame" id="frame-bibase" sandbox="allow-scripts allow-same-origin allow-popups allow-modals allow-downloads allow-forms"></iframe>
    </div>

    <div class="bottom-bar">
        <div><span class="status-dot"></span>Tous les modules opérationnels</div>
        <div id="lf-sync-indicator" style="display:none;font-size:.7rem;color:#888;cursor:pointer;" onclick="lfForceSave()" title="Cliquer pour forcer la sauvegarde"><i class="fas fa-circle" style="color:#27ae60;font-size:.5rem;vertical-align:middle;margin-right:4px;"></i><span id="lf-sync-text">Synchronisé</span></div>
        <div id="bottomBarInfo">CADIR Suite — Direction</div>
    </div>

    <script>
    const MODULE_DATA = {"perdir":"PCFET0NUWVBFIGh0bWw+CjxodG1sIGxhbmc9ImZyIj4KPGhlYWQ+CiAgICA8bWV0YSBjaGFyc2V0PSJVVEYtOCI+CiAgICA8bWV0YSBuYW1lPSJ2aWV3cG9ydCIgY29udGVudD0id2lkdGg9ZGV2aWNlLXdpZHRoLCBpbml0aWFsLXNjYWxlPTEuMCI+CiAgICA8dGl0bGU+Q0FESVI8L3RpdGxlPgogICAgPGxpbmsgaHJlZj0iaHR0cHM6Ly9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvZm9udC1hd2Vzb21lLzYuNC4wL2Nzcy9hbGwubWluLmNzcyIgcmVsPSJzdHlsZXNoZWV0Ij4KICAgIDxzY3JpcHQgc3JjPSJodHRwczovL2Nkbi5qc2RlbGl2ci5uZXQvbnBtL2NoYXJ0LmpzIj48L3NjcmlwdD4KICAgIDxzdHlsZT4KICAgICAgICA6cm9vdCB7CiAgICAgICAgICAgIC0tcHJpbWFyeTogIzJjM2U1MDsKICAgICAgICAgICAgLS1zZWNvbmRhcnk6ICMzNDQ5NWU7CiAgICAgICAgICAgIC0tYWNjZW50OiAjYzAzOTJiOwogICAgICAgICAgICAtLWhlYWRlcjogIzJjM2U1MDsKICAgICAgICAgICAgLS1tZW51LXRleHQ6ICMxYWJjOWM7CiAgICAgICAgICAgIC0taGlnaGxpZ2h0OiAjZTc0YzNjOwogICAgICAgICAgICAtLXdhcm5pbmc6ICNmMzljMTI7CiAgICAgICAgICAgIC0tc3VjY2VzczogIzI3YWU2MDsKICAgICAgICAgICAgLS1pbmZvOiAjMjk4MGI5OwogICAgICAgICAgICAtLWxpZ2h0OiAjZWNmMGYxOwogICAgICAgICAgICAtLWZvbnQtbWFpbjogJ0FwdG9zJywgJ0NhbGlicmknLCAnVHJlYnVjaGV0IE1TJywgQXJpYWwsIHNhbnMtc2VyaWY7CiAgICAgICAgfQoKICAgICAgICAqIHsgYm94LXNpemluZzogYm9yZGVyLWJveDsgbWFyZ2luOiAwOyBwYWRkaW5nOiAwOyB9CiAgICAgICAgYm9keSB7IGZvbnQtZmFtaWx5OiB2YXIoLS1mb250LW1haW4pOyBiYWNrZ3JvdW5kLWNvbG9yOiAjZWVmMmY1OyBjb2xvcjogIzMzMzsgZGlzcGxheTogZmxleDsgaGVpZ2h0OiAxMDB2aDsgb3ZlcmZsb3c6IGhpZGRlbjsgfQoKICAgICAgICAvKiBTSURFQkFSICovCiAgICAgICAgLnNpZGViYXIgeyB3aWR0aDogMjgwcHg7IGJhY2tncm91bmQtY29sb3I6IHZhcigtLXByaW1hcnkpOyBjb2xvcjogd2hpdGU7IGRpc3BsYXk6IGZsZXg7IGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47IGZsZXgtc2hyaW5rOiAwOyB9CiAgICAgICAgLmJyYW5kIHsgcGFkZGluZzogMjVweCAyMHB4OyBmb250LXNpemU6IDEuMnJlbTsgZm9udC13ZWlnaHQ6IGJvbGQ7IHRleHQtYWxpZ246IGNlbnRlcjsgYmFja2dyb3VuZDogIzFhMjUyZjsgYm9yZGVyLWJvdHRvbTogMnB4IHNvbGlkIHZhcigtLW1lbnUtdGV4dCk7IH0KICAgICAgICAuYnJhbmQgc3BhbiB7IGNvbG9yOiB2YXIoLS1tZW51LXRleHQpOyBkaXNwbGF5OiBibG9jazsgZm9udC1zaXplOiAwLjhyZW07IG1hcmdpbi10b3A6IDVweDsgZm9udC13ZWlnaHQ6IG5vcm1hbDsgfQogICAgICAgIC5tZW51IHsgZmxleDogMTsgcGFkZGluZy10b3A6IDEwcHg7IG92ZXJmbG93LXk6IGF1dG87IH0KICAgICAgICAubWVudS1pdGVtIHsgcGFkZGluZzogMTVweCAyMHB4OyBjdXJzb3I6IHBvaW50ZXI7IHRyYW5zaXRpb246IDAuM3M7IGRpc3BsYXk6IGZsZXg7IGFsaWduLWl0ZW1zOiBjZW50ZXI7IGNvbG9yOiAjYmRjM2M3OyB0ZXh0LWRlY29yYXRpb246IG5vbmU7IGJvcmRlci1sZWZ0OiA0cHggc29saWQgdHJhbnNwYXJlbnQ7IGZvbnQtc2l6ZTogMC45cmVtOyB9CiAgICAgICAgLm1lbnUtaXRlbTpob3ZlciwgLm1lbnUtaXRlbS5hY3RpdmUgeyBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1zZWNvbmRhcnkpOyBjb2xvcjogd2hpdGU7IGJvcmRlci1sZWZ0LWNvbG9yOiB2YXIoLS1tZW51LXRleHQpOyB9CiAgICAgICAgLm1lbnUtaXRlbSBpIHsgd2lkdGg6IDMwcHg7IGZvbnQtc2l6ZTogMS4xcmVtOyBtYXJnaW4tcmlnaHQ6IDEwcHg7IH0KICAgICAgICAubWVudS1udW0geyBkaXNwbGF5Om5vbmU7IH0KICAgICAgICAubWVudS1zZXBhcmF0b3J7aGVpZ2h0OjFweDtiYWNrZ3JvdW5kOnJnYmEoMjU1LDI1NSwyNTUsLjE1KTttYXJnaW46OHB4IDEycHh9CiAgICAgICAgLmZvb3Rlci1pbmZvIHsgcGFkZGluZzogMTVweDsgZm9udC1zaXplOiAwLjdyZW07IHRleHQtYWxpZ246IGNlbnRlcjsgYm9yZGVyLXRvcDogMXB4IHNvbGlkICMzNDQ5NWU7IGNvbG9yOiAjN2Y4YzhkOyB9CgogICAgICAgIC8qIE1BSU4gKi8KICAgICAgICAubWFpbi1jb250ZW50IHsgZmxleDogMTsgb3ZlcmZsb3cteTogYXV0bzsgcGFkZGluZzogMzBweDsgZGlzcGxheTogZmxleDsgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsgfQogICAgICAgIC50b3AtYmFyIHsgZGlzcGxheTogZmxleDsganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOyBhbGlnbi1pdGVtczogY2VudGVyOyBtYXJnaW4tYm90dG9tOiAzMHB4OyBiYWNrZ3JvdW5kOiB3aGl0ZTsgcGFkZGluZzogMTVweCAyNXB4OyBib3JkZXItcmFkaXVzOiA4cHg7IGJveC1zaGFkb3c6IDAgMnB4IDEwcHggcmdiYSgwLDAsMCwwLjA1KTsgfQogICAgICAgIC5wYWdlLXRpdGxlIGgyIHsgY29sb3I6IHZhcigtLXNlY29uZGFyeSk7IG1hcmdpbjogMDsgfQogICAgICAgIC5zeXN0ZW0tc3RhdHVzIHsgZGlzcGxheTogZmxleDsgYWxpZ24taXRlbXM6IGNlbnRlcjsgZ2FwOiAyMHB4OyB9CiAgICAgICAgLnNhdmUtaW5kaWNhdG9yIHsgZm9udC1zaXplOiAwLjhyZW07IGNvbG9yOiB2YXIoLS1zdWNjZXNzKTsgZGlzcGxheTogbm9uZTsgYWxpZ24taXRlbXM6IGNlbnRlcjsgZ2FwOiA1cHg7IGZvbnQtd2VpZ2h0OiBib2xkOyB9CgogICAgICAgIC8qIFVJIEVMRU1FTlRTICovCiAgICAgICAgLmJ0biB7IHBhZGRpbmc6IDEwcHggMjBweDsgYm9yZGVyOiBub25lOyBib3JkZXItcmFkaXVzOiA1cHg7IGN1cnNvcjogcG9pbnRlcjsgZm9udC13ZWlnaHQ6IDYwMDsgdHJhbnNpdGlvbjogMC4yczsgZGlzcGxheTogaW5saW5lLWZsZXg7IGFsaWduLWl0ZW1zOiBjZW50ZXI7IGdhcDogOHB4OyBmb250LXNpemU6IDAuOXJlbTsgfQogICAgICAgIC5idG46aG92ZXIgeyBvcGFjaXR5OiAwLjk7IHRyYW5zZm9ybTogdHJhbnNsYXRlWSgtMXB4KTsgfQogICAgICAgIC5idG4tcHJpbWFyeSB7IGJhY2tncm91bmQtY29sb3I6IHZhcigtLXNlY29uZGFyeSk7IGNvbG9yOiB3aGl0ZTsgfQogICAgICAgIC5idG4tYWNjZW50IHsgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tYWNjZW50KTsgY29sb3I6IHdoaXRlOyB9CiAgICAgICAgLmJ0bi1zdWNjZXNzIHsgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tc3VjY2Vzcyk7IGNvbG9yOiB3aGl0ZTsgfQogICAgICAgIC5idG4taW5mbyB7IGJhY2tncm91bmQtY29sb3I6IHZhcigtLWluZm8pOyBjb2xvcjogd2hpdGU7IH0KICAgICAgICAuYnRuLWRhbmdlciB7IGJhY2tncm91bmQtY29sb3I6IHZhcigtLWhpZ2hsaWdodCk7IGNvbG9yOiB3aGl0ZTsgfQogICAgICAgIC5idG4td2FybmluZyB7IGJhY2tncm91bmQtY29sb3I6IHZhcigtLXdhcm5pbmcpOyBjb2xvcjogd2hpdGU7IH0KICAgICAgICAuYnRuLWRhcmsgeyBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1wcmltYXJ5KTsgY29sb3I6IHdoaXRlOyB9CiAgICAgICAgLmJ0bi13b3JkIHsgYmFja2dyb3VuZC1jb2xvcjogIzJiNTc5YTsgY29sb3I6IHdoaXRlOyB9IC8qIENvdWxldXIgV29yZCAqLwogICAgICAgIC5idG4tc20geyBwYWRkaW5nOiA1cHggMTBweDsgZm9udC1zaXplOiAwLjhyZW07IH0KICAgICAgICAuYnRuLWljb24geyBwYWRkaW5nOiA4cHg7IHdpZHRoOiAzNXB4OyBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsgfQoKICAgICAgICAuYnRuLXVwZGF0ZS1tb2RlIHsgYmFja2dyb3VuZC1jb2xvcjogI2YzOWMxMiAhaW1wb3J0YW50OyBjb2xvcjogd2hpdGUgIWltcG9ydGFudDsgYW5pbWF0aW9uOiBwdWxzZSAycyBpbmZpbml0ZTsgfQogICAgICAgIEBrZXlmcmFtZXMgcHVsc2UgeyAwJSB7IGJveC1zaGFkb3c6IDAgMCAwIDAgcmdiYSgyNDMsIDE1NiwgMTgsIDAuNCk7IH0gNzAlIHsgYm94LXNoYWRvdzogMCAwIDAgMTBweCByZ2JhKDI0MywgMTU2LCAxOCwgMCk7IH0gMTAwJSB7IGJveC1zaGFkb3c6IDAgMCAwIDAgcmdiYSgyNDMsIDE1NiwgMTgsIDApOyB9IH0KCiAgICAgICAgLnNlY3Rpb24geyBkaXNwbGF5OiBub25lOyBhbmltYXRpb246IGZhZGVJbiAwLjNzIGVhc2UtaW4tb3V0OyB9CiAgICAgICAgLnNlY3Rpb24uYWN0aXZlIHsgZGlzcGxheTogYmxvY2s7IH0KICAgICAgICAuZm9ybS1jYXJkIHsgYmFja2dyb3VuZDogd2hpdGU7IHBhZGRpbmc6IDMwcHg7IHBhZGRpbmctYm90dG9tOjEwcHg7CiAgICAgICAgLnNhdmUtYmFye3Bvc2l0aW9uOnN0aWNreTtib3R0b206MDtiYWNrZ3JvdW5kOmxpbmVhci1ncmFkaWVudCh0cmFuc3BhcmVudCwjZmZmIDE1JSk7cGFkZGluZzoxNXB4IDAgNXB4O3otaW5kZXg6MTA7dGV4dC1hbGlnbjpyaWdodDttYXJnaW4tdG9wOjIwcHg7fQogICAgICAgIC5zYXZlLWJhciAuYnRue2JveC1zaGFkb3c6MCAycHggOHB4IHJnYmEoMCwwLDAsMC4xNSk7Zm9udC1zaXplOi45cmVtO3BhZGRpbmc6MTBweCAyNHB4O30KIGJvcmRlci1yYWRpdXM6IDhweDsgYm94LXNoYWRvdzogMCA0cHggMTVweCByZ2JhKDAsMCwwLDAuMDUpOyB9CiAgICAgICAgLmZvcm0tZ3JpZCB7IGRpc3BsYXk6IGdyaWQ7IGdyaWQtdGVtcGxhdGUtY29sdW1uczogMWZyIDFmcjsgZ2FwOiAyMHB4OyBtYXJnaW4tYm90dG9tOiAyMHB4OyB9CiAgICAgICAgLmZvcm0tZnVsbCB7IG1hcmdpbi1ib3R0b206IDIwcHg7IH0KICAgICAgICAuZm9ybS1ncm91cCBsYWJlbCB7IGRpc3BsYXk6IGJsb2NrOyBtYXJnaW4tYm90dG9tOiA4cHg7IGZvbnQtd2VpZ2h0OiA2MDA7IGNvbG9yOiB2YXIoLS1zZWNvbmRhcnkpOyBmb250LXNpemU6IDAuOXJlbTsgfQogICAgICAgIC5mb3JtLWNvbnRyb2wgeyB3aWR0aDogMTAwJTsgcGFkZGluZzogMTJweDsgYm9yZGVyOiAycHggc29saWQgI2MwYzVjZTsgYm9yZGVyLXJhZGl1czogNnB4OyBmb250LWZhbWlseTogaW5oZXJpdDsgZm9udC1zaXplOiAwLjk1cmVtOyB0cmFuc2l0aW9uOiAwLjJzOyB9CiAgICAgICAgICAgIC5mb3JtLWNvbnRyb2w6Zm9jdXMgeyBib3JkZXItY29sb3I6IHZhcigtLWFjY2VudCk7IG91dGxpbmU6bm9uZTsgYm94LXNoYWRvdzowIDAgMCAzcHggcmdiYSg1MiwxNTIsMjE5LDAuMTUpOyB9CiAgICAgICAgLm11bHRpLXJvdyB7IGRpc3BsYXk6IGZsZXg7IGdhcDogMTBweDsgbWFyZ2luLWJvdHRvbTogMTBweDsgYWxpZ24taXRlbXM6IGNlbnRlcjsgfQogICAgICAgIC5tdWx0aS1yb3cgaW5wdXQgeyBmbGV4OiAxOyB9CiAgICAgICAgCiAgICAgICAgLyogQVRUQUNITUVOVFMgQVJFQSAqLwogICAgICAgIC5hdHRhY2htZW50cy1hcmVhIHsgYm9yZGVyOiAycHggZGFzaGVkICNiZGMzYzc7IGJhY2tncm91bmQ6ICNmOWY5Zjk7IHBhZGRpbmc6IDE1cHg7IGJvcmRlci1yYWRpdXM6IDZweDsgbWFyZ2luLXRvcDogMTBweDsgfQogICAgICAgIC5hdHRhY2htZW50LWxpc3QgeyBtYXJnaW4tdG9wOiAxMHB4OyBsaXN0LXN0eWxlOiBub25lOyB9CiAgICAgICAgLmF0dGFjaG1lbnQtaXRlbSB7IGRpc3BsYXk6IGZsZXg7IGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjsgYmFja2dyb3VuZDogd2hpdGU7IHBhZGRpbmc6IDhweDsgbWFyZ2luLWJvdHRvbTogNXB4OyBib3JkZXItcmFkaXVzOiA0cHg7IGJvcmRlci1sZWZ0OiAzcHggc29saWQgdmFyKC0taW5mbyk7IGZvbnQtc2l6ZTogMC44NXJlbTsgYWxpZ24taXRlbXM6IGNlbnRlcjsgfQogICAgICAgIC5maWxlLXdhcm5pbmcgeyBmb250LXNpemU6IDAuNzVyZW07IGNvbG9yOiAjZTc0YzNjOyBtYXJnaW4tdG9wOiA1cHg7IGZvbnQtc3R5bGU6IGl0YWxpYzsgfQoKICAgICAgICAvKiBEUkFHICYgRFJPUCAvIEtBTkJBTiAqLwogICAgICAgIC50b2RvLWdyaWQgeyBkaXNwbGF5OiBncmlkOyBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IDFmciAxZnI7IGdhcDogMjVweDsgfQogICAgICAgIC50b2RvLWJveCB7IGJhY2tncm91bmQ6IHdoaXRlOyBib3JkZXItcmFkaXVzOiA4cHg7IHBhZGRpbmc6IDIwcHg7IGJveC1zaGFkb3c6IDAgNHB4IDEwcHggcmdiYSgwLDAsMCwwLjA1KTsgYm9yZGVyLXRvcDogNXB4IHNvbGlkICNjY2M7IGRpc3BsYXk6IGZsZXg7IGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47IG1pbi1oZWlnaHQ6IDM1MHB4OyB9CiAgICAgICAgLnRvZG8tdXJnZW50IHsgYm9yZGVyLXRvcC1jb2xvcjogdmFyKC0taGlnaGxpZ2h0KTsgfSAudG9kby1wbGFuIHsgYm9yZGVyLXRvcC1jb2xvcjogdmFyKC0tcHJpbWFyeSk7IH0gLnRvZG8tcG9zc2libGUgeyBib3JkZXItdG9wLWNvbG9yOiB2YXIoLS1zdWNjZXNzKTsgfSAudG9kby1kZWxlZ2F0ZSB7IGJvcmRlci10b3AtY29sb3I6IHZhcigtLXdhcm5pbmcpOyB9CiAgICAgICAgLnRvZG8taGVhZGVyIHsgZGlzcGxheTogZmxleDsganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOyBhbGlnbi1pdGVtczogY2VudGVyOyBtYXJnaW4tYm90dG9tOiAxNXB4OyBib3JkZXItYm90dG9tOiAxcHggc29saWQgI2VlZTsgcGFkZGluZy1ib3R0b206IDEwcHg7IH0KICAgICAgICAudG9kby1pbnB1dC1ncm91cCB7IGRpc3BsYXk6IGZsZXg7IGdhcDogNXB4OyBtYXJnaW4tYm90dG9tOiAxNXB4OyB9CiAgICAgICAgLnRvZG8taW5wdXQtZ3JvdXAgaW5wdXQgeyBmbGV4OiAxOyBwYWRkaW5nOiA4cHg7IGJvcmRlcjogMXB4IHNvbGlkICNkZGQ7IGJvcmRlci1yYWRpdXM6IDRweDsgfQogICAgICAgIC50b2RvLWxpc3QgeyBsaXN0LXN0eWxlOiBub25lOyBmbGV4OiAxOyBvdmVyZmxvdy15OiBhdXRvOyBtYXgtaGVpZ2h0OiAzNTBweDsgcGFkZGluZzogNXB4OyBtaW4taGVpZ2h0OiAxMDBweDsgdHJhbnNpdGlvbjogMC4yczsgfQogICAgICAgIC50b2RvLWxpc3QuZHJhZy1vdmVyIHsgYmFja2dyb3VuZC1jb2xvcjogI2YwZjBmMDsgYm9yZGVyLXJhZGl1czogNHB4OyBvdXRsaW5lOiAycHggZGFzaGVkICNjY2M7IH0KICAgICAgICAvKiBTdHlsZSBhbcOpbGlvcsOpIHBvdXIgbGUgRHJhZyAmIERyb3AgKi8KICAgICAgICAudG9kby1pdGVtIHsgZGlzcGxheTogZmxleDsganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOyBhbGlnbi1pdGVtczogY2VudGVyOyBwYWRkaW5nOiAxMnB4OyBib3JkZXItYm90dG9tOiAxcHggc29saWQgI2Y0ZjRmNDsgYmFja2dyb3VuZDogd2hpdGU7IG1hcmdpbi1ib3R0b206IDhweDsgYm9yZGVyLXJhZGl1czogNHB4OyBjdXJzb3I6IGdyYWI7IGJvcmRlci1sZWZ0OiAzcHggc29saWQgI2VlZTsgYm94LXNoYWRvdzogMCAxcHggM3B4IHJnYmEoMCwwLDAsMC4wNSk7IH0KICAgICAgICAudG9kby1pdGVtOmFjdGl2ZSB7IGN1cnNvcjogZ3JhYmJpbmc7IH0KICAgICAgICAudG9kby1pdGVtLmRyYWctb3Zlci1pdGVtIHsgYm9yZGVyLXRvcDogMnB4IHNvbGlkIHZhcigtLW1lbnUtdGV4dCk7IG1hcmdpbi10b3A6IDE1cHg7IH0gLyogSW5kaWNhdGV1ciB2aXN1ZWwgZCdpbnNlcnRpb24gKi8KICAgICAgICAudG9kby1pdGVtIHNwYW5bY29udGVudGVkaXRhYmxlXSB7IGZsZXg6MTsgbWFyZ2luLXJpZ2h0OjEwcHg7IHBhZGRpbmc6MnB4OyBib3JkZXI6MXB4IHNvbGlkIHRyYW5zcGFyZW50OyB0cmFuc2l0aW9uOjAuMnM7IH0KICAgICAgICAudG9kby1pdGVtIHNwYW5bY29udGVudGVkaXRhYmxlXTpmb2N1cyB7IGJvcmRlci1ib3R0b20tY29sb3I6IHZhcigtLWFjY2VudCk7IG91dGxpbmU6bm9uZTsgYmFja2dyb3VuZDojZjlmYmZmOyB9CiAgICAgICAgLmZyb20tYWdlbmRhIHsgYmFja2dyb3VuZC1jb2xvcjogI2ZmZjhlMTsgYm9yZGVyLWxlZnQ6IDRweCBzb2xpZCAjZjFjNDBmOyB9CiAgICAgICAgLnRvZG8tYWN0aW9ucyBpIHsgY3Vyc29yOiBwb2ludGVyOyBjb2xvcjogI2JkYzNjNzsgdHJhbnNpdGlvbjogMC4yczsgbWFyZ2luLWxlZnQ6IDhweDsgfQogICAgICAgIC50b2RvLWFjdGlvbnMgaTpob3ZlciB7IGNvbG9yOiB2YXIoLS1hY2NlbnQpOyB9CiAgICAgICAgCiAgICAgICAgLnRvZG8tdG9kYXktem9uZSB7IG1hcmdpbi1ib3R0b206IDIwcHg7IHBhZGRpbmc6IDE1cHg7IGJhY2tncm91bmQ6ICNmZmYzZTA7IGJvcmRlcjogMnB4IHNvbGlkICNmMzljMTI7IGJvcmRlci1yYWRpdXM6IDhweDsgZGlzcGxheTogbm9uZTsgfQogICAgICAgIC50b2RvLXRvZGF5LXpvbmUuYWN0aXZlIHsgZGlzcGxheTogYmxvY2s7IGFuaW1hdGlvbjogZmFkZUluIDAuNXM7IH0KICAgICAgICAudG9kby10b2RheS1pdGVtIHsgYmFja2dyb3VuZDogd2hpdGU7IHBhZGRpbmc6IDEwcHg7IGJvcmRlci1yYWRpdXM6IDRweDsgYm9yZGVyLWxlZnQ6IDRweCBzb2xpZCAjZTc0YzNjOyBtYXJnaW4tYm90dG9tOiA1cHg7IGN1cnNvcjogZ3JhYjsgZGlzcGxheTogZmxleDsganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOyBhbGlnbi1pdGVtczogY2VudGVyOyBib3gtc2hhZG93OiAwIDJweCA0cHggcmdiYSgwLDAsMCwwLjA1KTsgfQoKICAgICAgICAvKiBDQUxFTkRBUiAqLwogICAgICAgIC5jYWxlbmRhci10YWJsZSB7IHdpZHRoOiAxMDAlOyBib3JkZXItY29sbGFwc2U6IGNvbGxhcHNlOyBiYWNrZ3JvdW5kOiB3aGl0ZTsgfQogICAgICAgIC5jYWxlbmRhci10YWJsZSB0aCB7IGJhY2tncm91bmQ6IHZhcigtLXNlY29uZGFyeSk7IGNvbG9yOiB3aGl0ZTsgcGFkZGluZzogMTJweDsgdGV4dC1hbGlnbjogbGVmdDsgfQogICAgICAgIC5jYWxlbmRhci10YWJsZSB0ZCB7IHBhZGRpbmc6IDEycHg7IGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjZWVlOyB9CiAgICAgICAgLnJvdy10b2RheSB7IGJhY2tncm91bmQtY29sb3I6ICNmZmY4ZTE7IGZvbnQtd2VpZ2h0OiBib2xkOyBib3JkZXItbGVmdDogNXB4IHNvbGlkICNlNzRjM2M7IH0gCgogICAgICAgIC8qIEVESVRPUiAqLwogICAgICAgIC5kb2MtZWRpdG9yIHsgYm9yZGVyOiAxcHggc29saWQgI2RkZDsgcGFkZGluZzogNDBweDsgYmFja2dyb3VuZDogd2hpdGU7IG1pbi1oZWlnaHQ6IDIwMHB4OyBib3JkZXItcmFkaXVzOiA0cHg7IGZvbnQtZmFtaWx5OiAnQXB0b3MnLCAnQ2FsaWJyaScsICdUcmVidWNoZXQgTVMnLCBBcmlhbCwgc2Fucy1zZXJpZjsgbGluZS1oZWlnaHQ6IDEuNjsgY29sb3I6IzAwMDsgYm94LXNoYWRvdzogaW5zZXQgMCAwIDEwcHggcmdiYSgwLDAsMCwwLjA1KTsgcmVzaXplOiB2ZXJ0aWNhbDsgb3ZlcmZsb3c6IGF1dG87IH0KICAgICAgICAuZG9jLWVkaXRvcjpmb2N1cyB7IG91dGxpbmU6IG5vbmU7IGJvcmRlci1jb2xvcjogdmFyKC0tYWNjZW50KTsgfQogICAgICAgIC5ub3Rlcy1lZGl0b3IgeyBtaW4taGVpZ2h0OiAxNTBweDsgYmFja2dyb3VuZDogI2ZmZmZmMDsgYm9yZGVyLWNvbG9yOiAjZTBlMGQwOyB9CiAgICAgICAgCiAgICAgICAgLyogREFTSEJPQVJEICovCiAgICAgICAgLmRhc2gta3BpLWdyaWQgeyBkaXNwbGF5OiBncmlkOyBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IHJlcGVhdCgzLCAxZnIpOyBnYXA6IDIwcHg7IG1hcmdpbi1ib3R0b206IDMwcHg7IH0KICAgICAgICAua3BpLWNhcmQgeyBiYWNrZ3JvdW5kOiB3aGl0ZTsgcGFkZGluZzogMjBweDsgYm9yZGVyLXJhZGl1czogMTBweDsgYm94LXNoYWRvdzogMCA0cHggNnB4IHJnYmEoMCwwLDAsMC4wNSk7IHRleHQtYWxpZ246IGNlbnRlcjsgYm9yZGVyLWJvdHRvbTogNHB4IHNvbGlkIHZhcigtLXNlY29uZGFyeSk7IGRpc3BsYXk6ZmxleDsgZmxleC1kaXJlY3Rpb246Y29sdW1uOyBqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyOyBhbGlnbi1pdGVtczpjZW50ZXI7IG1pbi1oZWlnaHQ6IDE0MHB4OyB9CiAgICAgICAgLmtwaS1udW0geyBmb250LXNpemU6IDNyZW07IGZvbnQtd2VpZ2h0OiBib2xkOyBjb2xvcjogdmFyKC0tc2Vjb25kYXJ5KTsgZGlzcGxheTogYmxvY2s7IG1hcmdpbjogMTBweCAwOyB9CiAgICAgICAgLmtwaS1sYWJlbCB7IGZvbnQtc2l6ZTogMC45cmVtOyB0ZXh0LXRyYW5zZm9ybTogdXBwZXJjYXNlOyBmb250LXdlaWdodDogYm9sZDsgY29sb3I6ICM3ZjhjOGQ7IH0KICAgICAgICAuY2hhcnRzLWdyaWQgeyBkaXNwbGF5OiBncmlkOyBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IDFmciAxZnI7IGdhcDogMjBweDsgbWFyZ2luLWJvdHRvbTogMzBweDsgfQogICAgICAgIC5jaGFydC1jb250YWluZXIgeyBiYWNrZ3JvdW5kOiB3aGl0ZTsgcGFkZGluZzogMjBweDsgYm9yZGVyLXJhZGl1czogMTBweDsgYm94LXNoYWRvdzogMCA0cHggNnB4IHJnYmEoMCwwLDAsMC4wNSk7IGhlaWdodDogMzUwcHg7IH0KICAgICAgICAudG9wLXN0dWRlbnRzLWxpc3QgeyBsaXN0LXN0eWxlOiBub25lOyBwYWRkaW5nOiAwOyB9CiAgICAgICAgLnRvcC1zdHVkZW50LWl0ZW0geyBkaXNwbGF5OiBmbGV4OyBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47IHBhZGRpbmc6IDhweCAwOyBib3JkZXItYm90dG9tOiAxcHggc29saWQgI2VlZTsgfQoKICAgICAgICAvKiBUQUJMRVMgKi8KICAgICAgICAuZGF0YS10YWJsZSB7IHdpZHRoOiAxMDAlOyBib3JkZXItY29sbGFwc2U6IGNvbGxhcHNlOyBiYWNrZ3JvdW5kOiB3aGl0ZTsgfQogICAgICAgIC5kYXRhLXRhYmxlIHRoIHsgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tc2Vjb25kYXJ5KTsgY29sb3I6IHdoaXRlOyBwYWRkaW5nOiAxNXB4OyB0ZXh0LWFsaWduOiBsZWZ0OyB9CiAgICAgICAgLmRhdGEtdGFibGUgdGQgeyBwYWRkaW5nOiAxNXB4OyBib3JkZXItYm90dG9tOiAxcHggc29saWQgI2VlZTsgfQogICAgICAgIC5iYWRnZSB7IHBhZGRpbmc6IDRweCA4cHg7IGJvcmRlci1yYWRpdXM6IDEycHg7IGZvbnQtc2l6ZTogMC43NXJlbTsgZm9udC13ZWlnaHQ6IGJvbGQ7IGNvbG9yOiB3aGl0ZTsgfQogICAgICAgIC5iZy1lbnQgeyBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1hY2NlbnQpOyB9IC5iZy1yZXUgeyBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1zdWNjZXNzKTsgfSAuYmctc3VpdmkgeyBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1pbmZvKTsgfSAuYmctZGlyIHsgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tcHJpbWFyeSk7IH0KCiAgICAgICAgLyogRklMVEVSUyAqLwogICAgICAgIC5maWx0ZXJzLWJhciB7IGRpc3BsYXk6IGZsZXg7IGdhcDogMTVweDsgYmFja2dyb3VuZDogd2hpdGU7IHBhZGRpbmc6IDE1cHg7IGJvcmRlci1yYWRpdXM6IDhweDsgbWFyZ2luLWJvdHRvbTogMjBweDsgYWxpZ24taXRlbXM6IGZsZXgtZW5kOyB9CgogICAgICAgIAogICAgICAgIC8qIOKVkOKVkOKVkCBQcm9jw6lkdXJlcyDilZDilZDilZAgKi8KICAgICAgICAucHJvYy1oZWFkZXJ7ZGlzcGxheTpmbGV4O2p1c3RpZnktY29udGVudDpzcGFjZS1iZXR3ZWVuO2FsaWduLWl0ZW1zOmNlbnRlcjttYXJnaW4tYm90dG9tOjE2cHh9CiAgICAgICAgLnByb2MtaGVhZGVyIGJ1dHRvbntiYWNrZ3JvdW5kOnZhcigtLWhlYWRlciwjMmMzZTUwKTtjb2xvcjojZmZmO2JvcmRlcjpub25lO3BhZGRpbmc6MTBweCAyMHB4O2JvcmRlci1yYWRpdXM6OHB4O2N1cnNvcjpwb2ludGVyO2ZvbnQtc2l6ZTouODVyZW07Zm9udC13ZWlnaHQ6NjAwO2JveC1zaGFkb3c6MCAycHggOHB4IHJnYmEoNDQsNjIsODAsLjMpfQogICAgICAgIC5wcm9jLWhlYWRlciBidXR0b246aG92ZXJ7b3BhY2l0eTouOTt0cmFuc2Zvcm06dHJhbnNsYXRlWSgtMXB4KX0KICAgICAgICAucHJvYy1saXN0e2Rpc3BsYXk6ZmxleDtmbGV4LWRpcmVjdGlvbjpjb2x1bW47Z2FwOjhweH0KICAgICAgICAucHJvYy1jYXJke2JhY2tncm91bmQ6I2ZmZjtib3JkZXItcmFkaXVzOjEwcHg7cGFkZGluZzoxMHB4IDE0cHg7ZGlzcGxheTpmbGV4O2FsaWduLWl0ZW1zOmNlbnRlcjtnYXA6MTBweDtjdXJzb3I6cG9pbnRlcjtib3gtc2hhZG93OjAgMXB4IDRweCByZ2JhKDAsMCwwLC4wNik7dHJhbnNpdGlvbjpib3gtc2hhZG93IC4xNXN9CiAgICAgICAgLnByb2MtY2FyZDpob3Zlcntib3gtc2hhZG93OjAgM3B4IDEycHggcmdiYSgwLDAsMCwuMTIpfQogICAgICAgIC5wcm9jLWNvZGV7ZGlzcGxheTppbmxpbmUtYmxvY2s7cGFkZGluZzo0cHggMTBweDtib3JkZXItcmFkaXVzOjZweDtmb250LXdlaWdodDo3MDA7Zm9udC1zaXplOi44cmVtO2NvbG9yOiNmZmY7bWluLXdpZHRoOjQ0cHg7dGV4dC1hbGlnbjpjZW50ZXJ9CiAgICAgICAgLnByb2MtY2FyZC1ib2R5e2ZsZXg6MTttaW4td2lkdGg6MH0KICAgICAgICAucHJvYy1jYXJkLXRpdGxle2ZvbnQtd2VpZ2h0OjYwMDtmb250LXNpemU6Ljg4cmVtO2NvbG9yOiMzMzN9CiAgICAgICAgLnByb2MtY2FyZC1tZXRhe2ZvbnQtc2l6ZTouNzJyZW07Y29sb3I6Izk5OTttYXJnaW4tdG9wOjJweH0KICAgICAgICAucHJvYy1jYXJkLWNhdHtkaXNwbGF5OmlubGluZS1ibG9jaztiYWNrZ3JvdW5kOiNmMGYwZjA7cGFkZGluZzoycHggOHB4O2JvcmRlci1yYWRpdXM6MTBweDtmb250LXNpemU6LjY4cmVtO2NvbG9yOiM2NjY7bWFyZ2luLWxlZnQ6NnB4fQogICAgICAgIC5wcm9jLWNhcmQtYWN0aW9uc3tkaXNwbGF5OmZsZXg7Z2FwOjZweH0KICAgICAgICAucHJvYy1jYXJkLWFjdGlvbnMgYnV0dG9ue2JhY2tncm91bmQ6bm9uZTtib3JkZXI6bm9uZTtjdXJzb3I6cG9pbnRlcjtwYWRkaW5nOjRweCA4cHg7Ym9yZGVyLXJhZGl1czo2cHg7Y29sb3I6Izg4ODtmb250LXNpemU6LjhyZW19CiAgICAgICAgLnByb2MtY2FyZC1hY3Rpb25zIGJ1dHRvbjpob3ZlcntiYWNrZ3JvdW5kOiNmMGYwZjA7Y29sb3I6IzMzM30KICAgICAgICAucHJvYy1maWx0ZXJze2Rpc3BsYXk6ZmxleDtmbGV4LXdyYXA6d3JhcDtnYXA6NnB4O21hcmdpbi1ib3R0b206MTRweH0KICAgICAgICAucHJvYy1maWx0ZXJzIGJ1dHRvbntib3JkZXI6MXB4IHNvbGlkICNkZGQ7YmFja2dyb3VuZDojZmZmO3BhZGRpbmc6NHB4IDEycHg7Ym9yZGVyLXJhZGl1czoxNnB4O2ZvbnQtc2l6ZTouNzJyZW07Y3Vyc29yOnBvaW50ZXI7Y29sb3I6IzY2Nn0KICAgICAgICAucHJvYy1maWx0ZXJzIGJ1dHRvbi5hY3RpdmV7YmFja2dyb3VuZDp2YXIoLS1oZWFkZXIsIzJjM2U1MCk7Y29sb3I6I2ZmZjtib3JkZXItY29sb3I6dHJhbnNwYXJlbnR9CiAgICAgICAgLnByb2Mtdmlld3tiYWNrZ3JvdW5kOiNmZmY7Ym9yZGVyLXJhZGl1czoxMnB4O292ZXJmbG93OmhpZGRlbjtib3gtc2hhZG93OjAgMnB4IDEwcHggcmdiYSgwLDAsMCwuMDgpO3dpZHRoOjEwMCU7Ym94LXNpemluZzpib3JkZXItYm94fQogICAgICAgIC5wcm9jLXZpZXctaGVhZGVye3BhZGRpbmc6MThweCAyMnB4O2NvbG9yOiNmZmZ9CiAgICAgICAgLnByb2Mtdmlldy1oZWFkZXIgaDJ7bWFyZ2luOjA7Zm9udC1zaXplOjEuMXJlbX0KICAgICAgICAucHJvYy12aWV3LWhlYWRlciAucHYtY29kZXtmb250LXNpemU6Ljg1cmVtO29wYWNpdHk6Ljg1O21hcmdpbi10b3A6MnB4fQogICAgICAgIC5wcm9jLXZpZXctYm9keXtwYWRkaW5nOjE2cHggMTJweH0KICAgICAgICAucHJvYy16b25le2JvcmRlci1sZWZ0OjNweCBzb2xpZCAjZGRkO3BhZGRpbmc6MTBweCAxNHB4O21hcmdpbjoxMHB4IDA7YmFja2dyb3VuZDojZmFmYWZhO2JvcmRlci1yYWRpdXM6MCA4cHggOHB4IDA7d2lkdGg6MTAwJTtib3gtc2l6aW5nOmJvcmRlci1ib3h9CiAgICAgICAgLnByb2Mtem9uZSBoNHtmb250LXNpemU6Ljc4cmVtO2ZvbnQtd2VpZ2h0OjYwMDtjb2xvcjojOTk5O21hcmdpbjowIDAgNnB4O3RleHQtdHJhbnNmb3JtOnVwcGVyY2FzZTtsZXR0ZXItc3BhY2luZzouNXB4fQogICAgICAgIC5wcm9jLXpvbmUtY29udGVudHtmb250LXNpemU6Ljg1cmVtO2xpbmUtaGVpZ2h0OjEuNTtjb2xvcjojNDQ0fQogICAgICAgIC5wcm9jLXpvbmUtY29udGVudCBwe21hcmdpbjo0cHggMH0KICAgICAgICAucHJvYy1pY29uLW1haWwsLnByb2MtaWNvbi1hbGVydCwucHJvYy1pY29uLWlkZWF7ZGlzcGxheTppbmxpbmUtYmxvY2s7d2lkdGg6MjBweDtoZWlnaHQ6MjBweDt0ZXh0LWFsaWduOmNlbnRlcjtsaW5lLWhlaWdodDoyMHB4O2JvcmRlci1yYWRpdXM6NTAlO2ZvbnQtc2l6ZTouNjVyZW07bWFyZ2luOjAgMnB4O3ZlcnRpY2FsLWFsaWduOm1pZGRsZX0KICAgICAgICAucHJvYy1pY29uLW1haWx7YmFja2dyb3VuZDojMzQ5OGRiO2NvbG9yOiNmZmZ9CiAgICAgICAgLnByb2MtaWNvbi1hbGVydHtiYWNrZ3JvdW5kOiNlNzRjM2M7Y29sb3I6I2ZmZn0KICAgICAgICAucHJvYy1pY29uLWlkZWF7YmFja2dyb3VuZDojZjM5YzEyO2NvbG9yOiNmZmZ9CgogICAgICAgIC8qIFBSSU5UIENPTkZJRyAqLwogICAgICAgIEBtZWRpYSBwcmludCB7CiAgICAgICAgICAgIC5zaWRlYmFyLCAubm8tcHJpbnQsIC50b3AtYmFyLCAuc2VjdGlvbiB7IGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDsgfQogICAgICAgICAgICBib2R5IHsgYmFja2dyb3VuZDogd2hpdGU7IGhlaWdodDogYXV0bzsgb3ZlcmZsb3c6IHZpc2libGU7IG1hcmdpbjogMDsgcGFkZGluZzogMDsgZm9udC1mYW1pbHk6ICdUaW1lcyBOZXcgUm9tYW4nLCBzZXJpZjsgY29sb3I6ICMwMDA7IC13ZWJraXQtcHJpbnQtY29sb3ItYWRqdXN0OiBleGFjdDsgfQogICAgICAgICAgICAubWFpbi1jb250ZW50IHsgcGFkZGluZzogMDsgbWFyZ2luOiAwOyB3aWR0aDogMTAwJTsgZGlzcGxheTogYmxvY2s7IH0KICAgICAgICAgICAgLnByaW50LWFyZWEgeyBkaXNwbGF5OiBibG9jayAhaW1wb3J0YW50OyB3aWR0aDogMTAwJTsgcG9zaXRpb246IHN0YXRpYzsgb3ZlcmZsb3c6IHZpc2libGUgIWltcG9ydGFudDsgfQogICAgICAgICAgICBAcGFnZSB7IHNpemU6IEE0OyBtYXJnaW46IDVtbSA1bW0gMTJtbSA1bW07IH0KICAgICAgICAgICAgLnByaW50LXBhZ2UgeyB3aWR0aDogMTAwJTsgbWFyZ2luOiAwOyBwYWRkaW5nOiAwOyBwYWdlLWJyZWFrLWFmdGVyOiBhbHdheXM7IG92ZXJmbG93OiBoaWRkZW47IH0KICAgICAgICAgICAgLnByaW50LXBhZ2U6bGFzdC1jaGlsZCB7IHBhZ2UtYnJlYWstYWZ0ZXI6IGF2b2lkOyB9CiAgICAgICAgICAgIC5vZmZpY2lhbC1oZWFkZXIgeyBkaXNwbGF5OiBmbGV4ICFpbXBvcnRhbnQ7IGZsZXgtZGlyZWN0aW9uOiByb3cgIWltcG9ydGFudDsganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuICFpbXBvcnRhbnQ7IGFsaWduLWl0ZW1zOiBmbGV4LXN0YXJ0OyBtYXJnaW4tYm90dG9tOiAyMHB4OyBib3JkZXItYm90dG9tOiAxLjVweCBzb2xpZCAjMDAwOyBwYWRkaW5nLWJvdHRvbTogMTVweDsgfQogICAgICAgICAgICAub2ZmaWNpYWwtcmlnaHQgeyB0ZXh0LWFsaWduOiByaWdodCAhaW1wb3J0YW50OyBmbGV4LXNocmluazogMDsgfQogICAgICAgICAgICAuc2Nob29sLW5hbWUgeyBmb250LXdlaWdodDogYm9sZDsgdGV4dC10cmFuc2Zvcm06IHVwcGVyY2FzZTsgZm9udC1zaXplOiAxLjJyZW07IH0KICAgICAgICAgICAgLm9mZmljaWFsLWxvZ28geyBtYXgtaGVpZ2h0OiA5MHB4OyBtYXgtd2lkdGg6IDE4MHB4OyBvYmplY3QtZml0OiBjb250YWluOyBkaXNwbGF5OiBibG9jayAhaW1wb3J0YW50OyAtd2Via2l0LXByaW50LWNvbG9yLWFkanVzdDogZXhhY3QgIWltcG9ydGFudDsgcHJpbnQtY29sb3ItYWRqdXN0OiBleGFjdCAhaW1wb3J0YW50OyB9CiAgICAgICAgICAgIC5vZmZpY2lhbC1wYXJ0aWNpcGFudHMgeyBiYWNrZ3JvdW5kOiAjZjRmNGY0ICFpbXBvcnRhbnQ7IHBhZGRpbmc6IDEycHg7IGJvcmRlcjogMXB4IHNvbGlkICNjY2M7IG1hcmdpbi1ib3R0b206IDIwcHg7IGZvbnQtc2l6ZTogMXJlbTsgfQogICAgICAgICAgICAub2ZmaWNpYWwtY29udGVudCB7IHRleHQtYWxpZ246IGp1c3RpZnk7IGxpbmUtaGVpZ2h0OiAxLjY7IGZvbnQtc2l6ZTogMS4xcmVtOyB9CiAgICAgICAgICAgIC5vZmZpY2lhbC1jb250ZW50IGltZywgLnByaW50LXBhZ2UgaW1nIHsgZGlzcGxheTogaW5saW5lLWJsb2NrICFpbXBvcnRhbnQ7IHZpc2liaWxpdHk6IHZpc2libGUgIWltcG9ydGFudDsgbWF4LWhlaWdodDogODBweDsgbWF4LXdpZHRoOiAxNjBweDsgLXdlYmtpdC1wcmludC1jb2xvci1hZGp1c3Q6IGV4YWN0ICFpbXBvcnRhbnQ7IHByaW50LWNvbG9yLWFkanVzdDogZXhhY3QgIWltcG9ydGFudDsgfQogICAgICAgICAgICAub2ZmaWNpYWwtZm9vdGVyIHsgbWFyZ2luLXRvcDogNDBweDsgdGV4dC1hbGlnbjogcmlnaHQ7IGZvbnQtc2l6ZTogMS4xcmVtOyB9CiAgICAgICAgICAgIC5zaWduYXR1cmUtaW1nIHsgbWF4LWhlaWdodDogNzBweDsgZGlzcGxheTogYmxvY2s7IG1hcmdpbi1sZWZ0OiBhdXRvOyB9CiAgICAgICAgICAgIC5hdHRhY2htZW50LXByaW50LWxpc3QgeyBtYXJnaW4tdG9wOiAyMHB4OyBib3JkZXItdG9wOiAxcHggZG90dGVkICNjY2M7IHBhZGRpbmctdG9wOiAxMHB4OyBmb250LXNpemU6IDAuOXJlbTsgfQogICAgICAgIH0KICAgICAgICAucHJpbnQtYXJlYSB7IGRpc3BsYXk6IG5vbmU7IH0KICAgICAgICBAa2V5ZnJhbWVzIGZhZGVJbiB7IGZyb20geyBvcGFjaXR5OiAwOyB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoMTBweCk7IH0gdG8geyBvcGFjaXR5OiAxOyB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoMCk7IH0gfQogICAgCiAgICAgICAgCiAgICAgICAgLyog4pWQ4pWQ4pWQIFVOSUZJRUQgQ0FMRU5EQVIgVjEyLjEzIOKVkOKVkOKVkCAqLwogICAgICAgIC51Y2FsLWhlYWRlcntkaXNwbGF5OmZsZXg7YWxpZ24taXRlbXM6Y2VudGVyO2dhcDo4cHg7bWFyZ2luLWJvdHRvbToxNnB4O2ZsZXgtd3JhcDp3cmFwO30KICAgICAgICAudWNhbC1uYXYtYnRue2JhY2tncm91bmQ6bm9uZTtib3JkZXI6MXB4IHNvbGlkICNkZGQ7Ym9yZGVyLXJhZGl1czo4cHg7cGFkZGluZzo4cHggMTJweDtjdXJzb3I6cG9pbnRlcjtmb250LXNpemU6LjlyZW07Y29sb3I6IzU1NTt0cmFuc2l0aW9uOmFsbCAuMTVzO30KICAgICAgICAudWNhbC1uYXYtYnRuOmhvdmVye2JhY2tncm91bmQ6I2Y1ZjVmNTtib3JkZXItY29sb3I6I2JiYjt9CiAgICAgICAgLnVjYWwtdGl0bGV7bWFyZ2luOjA7Zm9udC1zaXplOjEuMXJlbTtjb2xvcjojMmMzZTUwO21pbi13aWR0aDoxODBweDt0ZXh0LWFsaWduOmNlbnRlcjt9CiAgICAgICAgLnVjYWwtYnRuLXRvZGF5e2JhY2tncm91bmQ6I2ZmZjtib3JkZXI6MXB4IHNvbGlkICMzNDk4ZGI7Y29sb3I6IzM0OThkYjtib3JkZXItcmFkaXVzOjhweDtwYWRkaW5nOjdweCAxNHB4O2N1cnNvcjpwb2ludGVyO2ZvbnQtc2l6ZTouNzhyZW07Zm9udC13ZWlnaHQ6NjAwO3RyYW5zaXRpb246YWxsIC4xNXM7fQogICAgICAgIC51Y2FsLWJ0bi10b2RheTpob3ZlcntiYWNrZ3JvdW5kOiMzNDk4ZGI7Y29sb3I6I2ZmZjt9CiAgICAgICAgLnVjYWwtYnRuLWFkZHtiYWNrZ3JvdW5kOiMyN2FlNjA7Y29sb3I6I2ZmZjtib3JkZXI6bm9uZTtib3JkZXItcmFkaXVzOjhweDtwYWRkaW5nOjhweCAxNnB4O2N1cnNvcjpwb2ludGVyO2ZvbnQtc2l6ZTouNzhyZW07Zm9udC13ZWlnaHQ6NjAwO2Rpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXI7Z2FwOjZweDt9CiAgICAgICAgLnVjYWwtYnRuLWFkZDpob3ZlcntiYWNrZ3JvdW5kOiMyMTlhNTI7fQogICAgICAgIC51Y2FsLWJ0bi1yZWZyZXNoe2JhY2tncm91bmQ6bm9uZTtib3JkZXI6MXB4IHNvbGlkICM0Mjg1ZjQ7Y29sb3I6IzQyODVmNDtib3JkZXItcmFkaXVzOjhweDtwYWRkaW5nOjhweCAxMnB4O2N1cnNvcjpwb2ludGVyO2ZvbnQtc2l6ZTouNzhyZW07fQogICAgICAgIC51Y2FsLWJ0bi1yZWZyZXNoOmhvdmVye2JhY2tncm91bmQ6IzQyODVmNDtjb2xvcjojZmZmO30KICAgICAgICAudWNhbC1sZWdlbmR7ZGlzcGxheTpmbGV4O2dhcDoxMHB4O2ZvbnQtc2l6ZTouNjVyZW07Y29sb3I6Izg4ODthbGlnbi1pdGVtczpjZW50ZXI7ZmxleC13cmFwOndyYXA7fQogICAgICAgIC51Y2FsLWxlZ2VuZC1kb3R7d2lkdGg6MTBweDtoZWlnaHQ6MTBweDtib3JkZXItcmFkaXVzOjUwJTtkaXNwbGF5OmlubGluZS1ibG9jazttYXJnaW4tcmlnaHQ6M3B4O30KICAgICAgICAudWNhbC1kYXktZ3JvdXB7bWFyZ2luLWJvdHRvbTo0cHg7fQogICAgICAgIC51Y2FsLWRheS1oZHJ7Zm9udC1zaXplOi43OHJlbTtmb250LXdlaWdodDo3MDA7Y29sb3I6IzU1NTtwYWRkaW5nOjEwcHggMTRweCA0cHg7cG9zaXRpb246c3RpY2t5O3RvcDowO2JhY2tncm91bmQ6I2Y5ZmFmYjt6LWluZGV4OjI7dGV4dC10cmFuc2Zvcm06Y2FwaXRhbGl6ZTtib3JkZXItYm90dG9tOjFweCBzb2xpZCAjZWVlO30KICAgICAgICAudWNhbC1kYXktaGRyLmlzLXRvZGF5e2NvbG9yOiNlNjdlMjI7YmFja2dyb3VuZDojZmZmOGYwO30KICAgICAgICAudWNhbC1pdGVte2Rpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpmbGV4LXN0YXJ0O2dhcDoxMHB4O3BhZGRpbmc6MTBweCAxNHB4O2JvcmRlci1ib3R0b206MXB4IHNvbGlkICNmMGYwZjA7dHJhbnNpdGlvbjpiYWNrZ3JvdW5kIC4xcztjdXJzb3I6ZGVmYXVsdDt9CiAgICAgICAgLnVjYWwtaXRlbTpob3ZlcntiYWNrZ3JvdW5kOiNmOGY5ZmE7fQogICAgICAgIC51Y2FsLWRvdHt3aWR0aDoxMHB4O2hlaWdodDoxMHB4O2JvcmRlci1yYWRpdXM6NTAlO2ZsZXgtc2hyaW5rOjA7bWFyZ2luLXRvcDo1cHg7fQogICAgICAgIC51Y2FsLWxlZnR7ZGlzcGxheTpmbGV4O2ZsZXgtZGlyZWN0aW9uOmNvbHVtbjthbGlnbi1pdGVtczpmbGV4LXN0YXJ0O21pbi13aWR0aDo5MHB4O2ZsZXgtc2hyaW5rOjA7fQogICAgICAgIC51Y2FsLWluZm97ZmxleDoxO21pbi13aWR0aDowO30KICAgICAgICAudWNhbC1pdGVtLXRpdGxle2ZvbnQtc2l6ZTouODJyZW07Y29sb3I6IzJjM2U1MDtmb250LXdlaWdodDo1MDA7fQogICAgICAgIC51Y2FsLWl0ZW0tbWV0YXtmb250LXNpemU6LjY1cmVtO2NvbG9yOiNhYWE7bWFyZ2luLXRvcDoxcHg7fQogICAgICAgIC51Y2FsLWl0ZW0tdGltZXtmb250LXNpemU6LjcycmVtO2NvbG9yOiM4ODg7fQogICAgICAgIC51Y2FsLWl0ZW0tYWN0aW9uc3tkaXNwbGF5OmZsZXg7Z2FwOjFweDttYXJnaW4tdG9wOjRweDtvcGFjaXR5OjA7dHJhbnNpdGlvbjpvcGFjaXR5IC4xNXM7fQogICAgICAgIC51Y2FsLWl0ZW06aG92ZXIgLnVjYWwtaXRlbS1hY3Rpb25ze29wYWNpdHk6MTt9CiAgICAgICAgLnVjYWwtaXRlbS1hY3Rpb25zIGJ1dHRvbntiYWNrZ3JvdW5kOm5vbmU7Ym9yZGVyOm5vbmU7Y3Vyc29yOnBvaW50ZXI7cGFkZGluZzozcHggNnB4O2JvcmRlci1yYWRpdXM6NXB4O2ZvbnQtc2l6ZTouNjhyZW07Y29sb3I6I2JiYjt9CiAgICAgICAgLnVjYWwtaXRlbS1hY3Rpb25zIGJ1dHRvbjpob3ZlcntiYWNrZ3JvdW5kOiNlZWU7Y29sb3I6IzU1NTt9CiAgICAgICAgLnVjYWwtaXRlbS1hY3Rpb25zIGJ1dHRvbi5hY3QtZGVsOmhvdmVye2NvbG9yOiNlNzRjM2M7YmFja2dyb3VuZDojZmRmMGYwO30KICAgICAgICAudWNhbC1lbXB0eXt0ZXh0LWFsaWduOmNlbnRlcjtjb2xvcjojY2NjO3BhZGRpbmc6NTBweCAyMHB4O2ZvbnQtc2l6ZTouODVyZW07fQogICAgICAgIC51Y2FsLWVtcHR5IGl7Zm9udC1zaXplOjJyZW07ZGlzcGxheTpibG9jazttYXJnaW4tYm90dG9tOjEwcHg7fQogICAgICAgIC51Y2FsLWRlc3Qtb3B0e2Rpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXI7Z2FwOjZweDtwYWRkaW5nOjhweCAxNHB4O2JvcmRlcjoycHggc29saWQgI2UwZTBlMDtib3JkZXItcmFkaXVzOjhweDtjdXJzb3I6cG9pbnRlcjtmb250LXNpemU6Ljc4cmVtO2ZvbnQtd2VpZ2h0OjUwMDtjb2xvcjojNTU1O3RyYW5zaXRpb246YWxsIC4xNXM7fQogICAgICAgIC51Y2FsLWRlc3Qtb3B0OmhvdmVye2JvcmRlci1jb2xvcjojMzQ5OGRiO30KICAgICAgICAudWNhbC1kZXN0LW9wdC5hY3RpdmV7Ym9yZGVyLWNvbG9yOiMzNDk4ZGI7YmFja2dyb3VuZDojZWFmNGZlO2NvbG9yOiMyYzNlNTA7fQogICAgICAgIC51Y2FsLWRlc3Qtb3B0IGlucHV0e2Rpc3BsYXk6bm9uZTt9CiAgICAgICAgLnVjYWwtc3JjLWJhZGdle2ZvbnQtc2l6ZTouNTVyZW07cGFkZGluZzoxcHggNXB4O2JvcmRlci1yYWRpdXM6NHB4O2NvbG9yOiNmZmY7Zm9udC13ZWlnaHQ6NjAwO21hcmdpbi1sZWZ0OjZweDt9CgogICAgICAgIC8qIOKVkOKVkOKVkCBJTkxJTkUgTE9HTyDilZDilZDilZAgKi8KICAgICAgICAucnRlLWxvZ28taW1nIHsgbWF4LWhlaWdodDo2MHB4OyBtYXgtd2lkdGg6MTIwcHg7IHZlcnRpY2FsLWFsaWduOm1pZGRsZTsgZGlzcGxheTppbmxpbmUtYmxvY2sgIWltcG9ydGFudDsgLXdlYmtpdC1wcmludC1jb2xvci1hZGp1c3Q6ZXhhY3QgIWltcG9ydGFudDsgcHJpbnQtY29sb3ItYWRqdXN0OmV4YWN0ICFpbXBvcnRhbnQ7IH0KICAgICAgICAvKiDilZDilZDilZAgUklDSCBURVhUIEVESVRPUiDilZDilZDilZAgKi8KICAgICAgICAucnRlLXdyYXB7Ym9yZGVyOjFweCBzb2xpZCAjZGRkO2JvcmRlci1yYWRpdXM6OHB4O292ZXJmbG93OmhpZGRlbjtiYWNrZ3JvdW5kOiNmZmZ9CiAgICAgICAgLnJ0ZS1iYXJ7ZGlzcGxheTpmbGV4O2dhcDoycHg7cGFkZGluZzo0cHggNnB4O2JhY2tncm91bmQ6I2Y0ZjVmNztib3JkZXItYm90dG9tOjFweCBzb2xpZCAjZGRkfQogICAgICAgIC5ydGUtYmFyIGJ1dHRvbnt3aWR0aDoyOHB4O2hlaWdodDoyNnB4O2JvcmRlcjpub25lO2JvcmRlci1yYWRpdXM6NHB4O2JhY2tncm91bmQ6dHJhbnNwYXJlbnQ7Y3Vyc29yOnBvaW50ZXI7Zm9udC1zaXplOi43OHJlbTtjb2xvcjojNTU1O2Rpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXI7anVzdGlmeS1jb250ZW50OmNlbnRlcn0KICAgICAgICAucnRlLWJhciBidXR0b246aG92ZXJ7YmFja2dyb3VuZDojZTBlMGUwfQogICAgICAgIC5ydGUtc2Vwe2Rpc3BsYXk6aW5saW5lLWJsb2NrO3dpZHRoOjFweDtoZWlnaHQ6MTZweDtiYWNrZ3JvdW5kOiNkZGQ7bWFyZ2luOjAgM3B4O3ZlcnRpY2FsLWFsaWduOm1pZGRsZTt9CiAgICAgICAgLnJ0ZS1jb2xvci1wb3B7cG9zaXRpb246YWJzb2x1dGU7dG9wOjEwMCU7bGVmdDowO2JhY2tncm91bmQ6I2ZmZjtib3JkZXI6MXB4IHNvbGlkICNkZGQ7Ym9yZGVyLXJhZGl1czo4cHg7Ym94LXNoYWRvdzowIDRweCAxMnB4IHJnYmEoMCwwLDAsLjE1KTtwYWRkaW5nOjhweDtkaXNwbGF5OmZsZXg7Z2FwOjRweDtmbGV4LXdyYXA6d3JhcDt6LWluZGV4OjEwMDt3aWR0aDoxNjBweDt9CiAgICAgICAgLnJ0ZS1jb2xvci1zd3t3aWR0aDoyMHB4O2hlaWdodDoyMHB4O2JvcmRlci1yYWRpdXM6NHB4O2JvcmRlcjoxcHggc29saWQgI2RkZDtjdXJzb3I6cG9pbnRlcjt9CiAgICAgICAgLnJ0ZS1jb2xvci1zdzpob3Zlcnt0cmFuc2Zvcm06c2NhbGUoMS4yKTtib3gtc2hhZG93OjAgMCA0cHggcmdiYSgwLDAsMCwuMik7fQoKICAgICAgICAucnRlLWJvZHl7bWluLWhlaWdodDo4MHB4O292ZXJmbG93OmF1dG87cmVzaXplOnZlcnRpY2FsO3BhZGRpbmc6OHB4IDEwcHg7Zm9udC1zaXplOi44MnJlbTtsaW5lLWhlaWdodDoxLjU7b3V0bGluZTpub25lfQogICAgICAgIC5ydGUtYm9keSB1bCwucnRlLWJvZHkgb2x7bWFyZ2luOjRweCAwIDRweCAxOHB4O3BhZGRpbmc6MH0KCiAgICAgICAgCiAgICAgICAgLyog4pWQ4pWQ4pWQIEFVVE9DT01QTEVURSDDiUzDiFZFUyDilZDilZDilZAgKi8KICAgICAgICAuYWMtd3JhcHtwb3NpdGlvbjpyZWxhdGl2ZX0KICAgICAgICAuYWMtbGlzdHtwb3NpdGlvbjphYnNvbHV0ZTt0b3A6MTAwJTtsZWZ0OjA7cmlnaHQ6MDttYXgtaGVpZ2h0OjE4MHB4O292ZXJmbG93LXk6YXV0bztiYWNrZ3JvdW5kOiNmZmY7Ym9yZGVyOjFweCBzb2xpZCAjZGRkO2JvcmRlci10b3A6bm9uZTtib3JkZXItcmFkaXVzOjAgMCA4cHggOHB4O2JveC1zaGFkb3c6MCA0cHggMTJweCByZ2JhKDAsMCwwLC4xMik7ei1pbmRleDo5OTk7ZGlzcGxheTpub25lfQogICAgICAgIC5hYy1saXN0LnNob3d7ZGlzcGxheTpibG9ja30KICAgICAgICAuYWMtaXRlbXtwYWRkaW5nOjdweCAxMnB4O2ZvbnQtc2l6ZTouNzhyZW07Y3Vyc29yOnBvaW50ZXI7ZGlzcGxheTpmbGV4O2p1c3RpZnktY29udGVudDpzcGFjZS1iZXR3ZWVuO2FsaWduLWl0ZW1zOmNlbnRlcn0KICAgICAgICAuYWMtaXRlbTpob3ZlciwuYWMtaXRlbS5hY3RpdmV7YmFja2dyb3VuZDojZWFmNGZlfQogICAgICAgIC5hYy1pdGVtIC5hYy1jbGFzc2V7Zm9udC1zaXplOi42NXJlbTtjb2xvcjojODg4O2JhY2tncm91bmQ6I2YwZjBmMDtwYWRkaW5nOjFweCA2cHg7Ym9yZGVyLXJhZGl1czo0cHh9CgogICAgICAgIC8qIOKVkOKVkOKVkCBFVkVORU1FTlRTIChtZW51MTApIOKVkOKVkOKVkCAqLwogICAgICAgIC5ldi1oZWFkZXJ7ZGlzcGxheTpmbGV4O2FsaWduLWl0ZW1zOmNlbnRlcjtqdXN0aWZ5LWNvbnRlbnQ6c3BhY2UtYmV0d2VlbjttYXJnaW4tYm90dG9tOjE0cHg7ZmxleC13cmFwOndyYXA7Z2FwOjhweH0KICAgICAgICAuZXYtaGVhZGVyIGgye2NvbG9yOnZhcigtLWhlYWRlcik7Zm9udC1zaXplOjEuMDVyZW07ZGlzcGxheTpmbGV4O2FsaWduLWl0ZW1zOmNlbnRlcjtnYXA6OHB4O21hcmdpbjowfQogICAgICAgIC5ldi10b3B7ZGlzcGxheTpmbGV4O2dhcDoxMnB4O21hcmdpbi1ib3R0b206MTRweDtmbGV4LXdyYXA6d3JhcDthbGlnbi1pdGVtczpjZW50ZXJ9CiAgICAgICAgLmV2LWtwaXN7ZGlzcGxheTpmbGV4O2dhcDoxMHB4O2ZsZXg6MTtmbGV4LXdyYXA6d3JhcH0KICAgICAgICAuZXYta3Bpe2JhY2tncm91bmQ6I2ZmZjtib3JkZXI6MXB4IHNvbGlkICNlOGVhZWQ7Ym9yZGVyLXJhZGl1czoxMHB4O3BhZGRpbmc6MTBweCAxNnB4O3RleHQtYWxpZ246Y2VudGVyO21pbi13aWR0aDo5MHB4fQogICAgICAgIC5ldi1rcGkgLmt2e2ZvbnQtc2l6ZToxLjNyZW07Zm9udC13ZWlnaHQ6NzAwfS5ldi1rcGkgLmtse2ZvbnQtc2l6ZTouNjVyZW07Y29sb3I6Izg4ODttYXJnaW4tdG9wOjJweH0KICAgICAgICAuZXYtZmlsdGVyc3tkaXNwbGF5OmZsZXg7Z2FwOjhweDtmbGV4LXdyYXA6d3JhcDttYXJnaW4tYm90dG9tOjE0cHg7YWxpZ24taXRlbXM6Y2VudGVyfQogICAgICAgIC5ldi1maWx0ZXJzIHNlbGVjdCwuZXYtZmlsdGVycyBpbnB1dHtwYWRkaW5nOjZweCAxMHB4O2JvcmRlcjoxcHggc29saWQgI2RkZDtib3JkZXItcmFkaXVzOjhweDtmb250LXNpemU6Ljc4cmVtfQogICAgICAgIC5ldi1ncmlke2Rpc3BsYXk6Z3JpZDtncmlkLXRlbXBsYXRlLWNvbHVtbnM6cmVwZWF0KGF1dG8tZmlsbCxtaW5tYXgoMzIwcHgsMWZyKSk7Z2FwOjE0cHh9CiAgICAgICAgLmV2LWNhcmR7YmFja2dyb3VuZDojZmZmO2JvcmRlcjoxcHggc29saWQgI2U4ZWFlZDtib3JkZXItcmFkaXVzOjEwcHg7cGFkZGluZzoxNnB4O2JveC1zaGFkb3c6MCAxcHggNHB4IHJnYmEoMCwwLDAsLjA0KTt0cmFuc2l0aW9uOmFsbCAuMTVzO3Bvc2l0aW9uOnJlbGF0aXZlfQogICAgICAgIC5ldi1jYXJkOmhvdmVye2JveC1zaGFkb3c6MCA0cHggMTRweCByZ2JhKDAsMCwwLC4xKTt0cmFuc2Zvcm06dHJhbnNsYXRlWSgtMXB4KX0KICAgICAgICAuZXYtY2FyZC1oZHtkaXNwbGF5OmZsZXg7YWxpZ24taXRlbXM6ZmxleC1zdGFydDtnYXA6OHB4O21hcmdpbi1ib3R0b206OHB4fQogICAgICAgIC5ldi1jYXJkIGg0e2ZvbnQtc2l6ZTouODhyZW07Zm9udC13ZWlnaHQ6NzAwO2NvbG9yOiMyYzNlNTA7bWFyZ2luOjA7ZmxleDoxO2xpbmUtaGVpZ2h0OjEuM30KICAgICAgICAuZXYtY2FyZC1hY3Rze2Rpc3BsYXk6ZmxleDtnYXA6M3B4fQogICAgICAgIC5ldi1jYXJkLWFjdHMgYnV0dG9ue3dpZHRoOjI2cHg7aGVpZ2h0OjI2cHg7Ym9yZGVyOm5vbmU7Ym9yZGVyLXJhZGl1czo2cHg7Y3Vyc29yOnBvaW50ZXI7Zm9udC1zaXplOi43cmVtO2Rpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXI7anVzdGlmeS1jb250ZW50OmNlbnRlcjtiYWNrZ3JvdW5kOiNmMGYwZjA7Y29sb3I6Izg4OH0KICAgICAgICAuZXYtY2FyZC1hY3RzIGJ1dHRvbjpob3ZlcntiYWNrZ3JvdW5kOiNkZGQ7Y29sb3I6IzMzM30KICAgICAgICAuZXYtY2FyZC1tZXRhe2Rpc3BsYXk6ZmxleDtnYXA6MTBweDtmbGV4LXdyYXA6d3JhcDtmb250LXNpemU6LjdyZW07Y29sb3I6Izg4ODttYXJnaW4tYm90dG9tOjZweH0KICAgICAgICAuZXYtY2FyZC1tZXRhIHNwYW57ZGlzcGxheTpmbGV4O2FsaWduLWl0ZW1zOmNlbnRlcjtnYXA6M3B4fQogICAgICAgIC5ldi1jYXJkLWRlc2N7Zm9udC1zaXplOi43NnJlbTtjb2xvcjojNTU1O2xpbmUtaGVpZ2h0OjEuNDttYXgtaGVpZ2h0OjYwcHg7b3ZlcmZsb3c6aGlkZGVuO21hcmdpbi1ib3R0b206OHB4fQogICAgICAgIC5ldi1jYXJkLWZ0e2Rpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXI7Z2FwOjZweDtmbGV4LXdyYXA6d3JhcH0KICAgICAgICAuZXYtYmFkZ2V7cGFkZGluZzoycHggOHB4O2JvcmRlci1yYWRpdXM6MTBweDtmb250LXNpemU6LjZyZW07Zm9udC13ZWlnaHQ6NjAwO2NvbG9yOiNmZmZ9CiAgICAgICAgLmV2LWJhZGdlLnRvZG97YmFja2dyb3VuZDojZTc0YzNjfS5ldi1iYWRnZS5wcm9ncmVzc3tiYWNrZ3JvdW5kOiNmMzljMTJ9LmV2LWJhZGdlLmRvbmV7YmFja2dyb3VuZDojMjdhZTYwfS5ldi1iYWRnZS5ibG9ja2Vke2JhY2tncm91bmQ6Izk1YTVhNn0KICAgICAgICAuZXYtcGJhcntoZWlnaHQ6NHB4O2JhY2tncm91bmQ6I2VjZjBmMTtib3JkZXItcmFkaXVzOjRweDtvdmVyZmxvdzpoaWRkZW47ZmxleDoxO21pbi13aWR0aDo2MHB4fQogICAgICAgIC5ldi1wZmlsbHtoZWlnaHQ6MTAwJTtib3JkZXItcmFkaXVzOjRweH0KICAgICAgICAuZXYtdGFne3BhZGRpbmc6MXB4IDVweDtib3JkZXItcmFkaXVzOjZweDtmb250LXNpemU6LjU4cmVtO2JhY2tncm91bmQ6I2VlZjtjb2xvcjojNjY2fQogICAgICAgIC5ldi1hdHRhY2h7Zm9udC1zaXplOi42NnJlbTtjb2xvcjp2YXIoLS1oZWFkZXIpO2N1cnNvcjpwb2ludGVyO2Rpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXI7Z2FwOjNweH0KICAgICAgICAuZXYtYXR0YWNoOmhvdmVye3RleHQtZGVjb3JhdGlvbjp1bmRlcmxpbmV9CgogICAgICAgIC8qIOKVkOKVkOKVkCBHQU5UVCBUQUJMRSAobWVudTExKSDilZDilZDilZAgKi8KICAgICAgICAuZ3QtYmFye2Rpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXI7anVzdGlmeS1jb250ZW50OnNwYWNlLWJldHdlZW47bWFyZ2luLWJvdHRvbToxMnB4O2ZsZXgtd3JhcDp3cmFwO2dhcDo4cHg7cGFkZGluZzoxMnB4IDE2cHg7YmFja2dyb3VuZDojZmRmMmU5O2JvcmRlci1yYWRpdXM6MTBweDtib3JkZXI6MXB4IHNvbGlkICNmMGM0OWJ9CiAgICAgICAgLmd0LWJhciBoMntjb2xvcjojZDM1NDAwO2ZvbnQtc2l6ZToxLjA1cmVtO2Rpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXI7Z2FwOjhweDttYXJnaW46MH0KICAgICAgICAuZ3QtYmFyLWJ0bnN7ZGlzcGxheTpmbGV4O2dhcDo2cHh9CiAgICAgICAgLmd0LWJhci1idG5zIGJ1dHRvbntwYWRkaW5nOjZweCAxNHB4O2JvcmRlcjpub25lO2JvcmRlci1yYWRpdXM6NnB4O2ZvbnQtd2VpZ2h0OjYwMDtjdXJzb3I6cG9pbnRlcjtmb250LXNpemU6Ljc4cmVtO2Rpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXI7Z2FwOjVweH0KICAgICAgICAuZ3QtYnRuLWFkZHtiYWNrZ3JvdW5kOiNkMzU0MDA7Y29sb3I6I2ZmZn0uZ3QtYnRuLWFkZDpob3ZlcntiYWNrZ3JvdW5kOiNlNjdlMjJ9CiAgICAgICAgLmd0LWJ0bi1zZWN7YmFja2dyb3VuZDojZmZmO2NvbG9yOiM1NTU7Ym9yZGVyOjFweCBzb2xpZCAjY2NjfS5ndC1idG4tc2VjOmhvdmVye2JhY2tncm91bmQ6I2Y1ZjVmNX0KICAgICAgICAuZ3QtbmF2e2Rpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXI7Z2FwOjZweDttYXJnaW4tYm90dG9tOjEwcHg7ZmxleC13cmFwOndyYXB9CiAgICAgICAgLmd0LW5hdiBidXR0b257aGVpZ2h0OjI4cHg7Ym9yZGVyOjFweCBzb2xpZCAjZGRkO2JvcmRlci1yYWRpdXM6NXB4O2JhY2tncm91bmQ6I2ZmZjtjdXJzb3I6cG9pbnRlcjtmb250LXNpemU6LjcycmVtO3BhZGRpbmc6MCA4cHh9CiAgICAgICAgLmd0LW5hdiBidXR0b246aG92ZXJ7YmFja2dyb3VuZDojZjBmMGYwfQogICAgICAgIC5ndC1uYXYgc2VsZWN0e3BhZGRpbmc6NHB4IDhweDtib3JkZXI6MXB4IHNvbGlkICNkZGQ7Ym9yZGVyLXJhZGl1czo1cHg7Zm9udC1zaXplOi43NXJlbX0KICAgICAgICAuZ3Qtd3JhcHtvdmVyZmxvdy14OmF1dG87Ym9yZGVyOjFweCBzb2xpZCAjZGRkO2JvcmRlci1yYWRpdXM6OHB4O2JhY2tncm91bmQ6I2ZmZn0KICAgICAgICB0YWJsZS5ndHt3aWR0aDoxMDAlO2JvcmRlci1jb2xsYXBzZTpjb2xsYXBzZTt0YWJsZS1sYXlvdXQ6Zml4ZWR9CiAgICAgICAgLmd0IHRoe3BhZGRpbmc6NHB4IDJweDtmb250LXNpemU6LjYycmVtO2ZvbnQtd2VpZ2h0OjYwMDtjb2xvcjojNjY2O2JvcmRlci1ib3R0b206MXB4IHNvbGlkICNkZGQ7dGV4dC1hbGlnbjpjZW50ZXI7YmFja2dyb3VuZDojZjhmOGY4fQogICAgICAgIC5ndCB0aC5ndC1tb3tiYWNrZ3JvdW5kOiNlOGU4ZTg7Zm9udC1zaXplOi42OHJlbTtjb2xvcjojNDQ0O2JvcmRlci1yaWdodDoxcHggc29saWQgI2RkZH0KICAgICAgICAuZ3QgdGguZ3QtbGN7bWluLXdpZHRoOjI3MHB4O3dpZHRoOjI3MHB4O3RleHQtYWxpZ246bGVmdDtwYWRkaW5nLWxlZnQ6MTBweH0KICAgICAgICAuZ3QgdGguZ3QtY2N7d2lkdGg6NTBweDt0ZXh0LWFsaWduOmNlbnRlcn0uZ3QgdGguZ3QtZGN7d2lkdGg6NTVweDt0ZXh0LWFsaWduOmNlbnRlcn0KICAgICAgICAuZ3QgdGguZ3QtY3d7YmFja2dyb3VuZDojZDM1NDAwO2NvbG9yOiNmZmZ9CiAgICAgICAgLmd0IHRoLmd0LXZhe2JhY2tncm91bmQ6cmVwZWF0aW5nLWxpbmVhci1ncmFkaWVudCg0NWRlZywjZjBmMGYwLCNmMGYwZjAgM3B4LCNlOGU4ZTggM3B4LCNlOGU4ZTggNnB4KX0KICAgICAgICAuZ3QgdGR7cGFkZGluZzowO2hlaWdodDoyOHB4O2JvcmRlci1ib3R0b206MXB4IHNvbGlkICNmMGYwZjA7Ym9yZGVyLXJpZ2h0OjFweCBzb2xpZCAjZjhmOGY4O3Bvc2l0aW9uOnJlbGF0aXZlfQogICAgICAgIC5ndCB0ZC5ndC1sYXtmb250LXNpemU6Ljc0cmVtO2ZvbnQtd2VpZ2h0OjUwMDtjb2xvcjojMzMzO3BhZGRpbmctbGVmdDoxMHB4O3doaXRlLXNwYWNlOm5vd3JhcDtvdmVyZmxvdzpoaWRkZW47dGV4dC1vdmVyZmxvdzplbGxpcHNpcztjdXJzb3I6cG9pbnRlcjtib3JkZXItcmlnaHQ6MXB4IHNvbGlkICNlZWV9CiAgICAgICAgLmd0IHRkLmd0LWxhOmhvdmVye2NvbG9yOiNkMzU0MDA7dGV4dC1kZWNvcmF0aW9uOnVuZGVybGluZX0KICAgICAgICAuZ3QgdGQuZ3QtY297Zm9udC1zaXplOi43cmVtO2ZvbnQtd2VpZ2h0OjcwMDt0ZXh0LWFsaWduOmNlbnRlcjtjb2xvcjojZDM1NDAwO2JvcmRlci1yaWdodDoxcHggc29saWQgI2VlZX0KICAgICAgICAuZ3QgdGQuZ3QtY2t7dGV4dC1hbGlnbjpjZW50ZXI7Ym9yZGVyLXJpZ2h0OjFweCBzb2xpZCAjZWVlfQogICAgICAgIC5ndCB0ZC5ndC12YXtiYWNrZ3JvdW5kOnJlcGVhdGluZy1saW5lYXItZ3JhZGllbnQoNDVkZWcsI2YwZjBmMCwjZjBmMGYwIDNweCwjZThlOGU4IDNweCwjZThlOGU4IDZweCkhaW1wb3J0YW50fQogICAgICAgIC5ndC1jZntwb3NpdGlvbjphYnNvbHV0ZTtpbnNldDozcHggMXB4O2JvcmRlci1yYWRpdXM6M3B4fQogICAgICAgIC5ndC1jZi5kb25le29wYWNpdHk6LjR9CiAgICAgICAgLmd0LWNmLmMtcmVudHJlZXtiYWNrZ3JvdW5kOiM1ZGFkZTJ9Lmd0LWNmLmMtZXhhbWVuc3tiYWNrZ3JvdW5kOiMyZTg2YzF9CiAgICAgICAgLmd0LWNmLmMtb3JpZW50YXRpb257YmFja2dyb3VuZDojMWE1Mjc2fS5ndC1jZi5jLWNvbnNlaWxze2JhY2tncm91bmQ6IzI0NzFhM30KICAgICAgICAuZ3QtY2YuYy1hZG1pbntiYWNrZ3JvdW5kOiMxNDhmNzd9Lmd0LWNmLmMtYXV0cmV7YmFja2dyb3VuZDojNWI2ZDVifQogICAgICAgIC5ndC1jZi5jLXBlZGFnb2d7YmFja2dyb3VuZDojOGU0NGFkfS5ndC1jZi5jLXJoe2JhY2tncm91bmQ6I2MwMzkyYn0KICAgICAgICAuZ3QtbGVne2Rpc3BsYXk6ZmxleDtnYXA6MTJweDtmbGV4LXdyYXA6d3JhcDttYXJnaW4tdG9wOjhweDtwYWRkaW5nOjRweCAwfQogICAgICAgIC5ndC1sZWcgc3BhbntkaXNwbGF5OmZsZXg7YWxpZ24taXRlbXM6Y2VudGVyO2dhcDo0cHg7Zm9udC1zaXplOi42OHJlbTtjb2xvcjojNjY2fQogICAgICAgIC5ndC1sZWcgaXt3aWR0aDoxMnB4O2hlaWdodDo4cHg7Ym9yZGVyLXJhZGl1czoycHg7ZGlzcGxheTppbmxpbmUtYmxvY2t9CgogICAgICAgIC8qIOKVkOKVkOKVkCBNT0RBTFMg4pWQ4pWQ4pWQICovCiAgICAgICAgLm0tb3Z7ZGlzcGxheTpub25lO3Bvc2l0aW9uOmZpeGVkO2luc2V0OjA7YmFja2dyb3VuZDpyZ2JhKDAsMCwwLC40KTt6LWluZGV4Ojk5OTk7YWxpZ24taXRlbXM6Y2VudGVyO2p1c3RpZnktY29udGVudDpjZW50ZXJ9CiAgICAgICAgLm0tb3Yub3BlbntkaXNwbGF5OmZsZXh9CiAgICAgICAgLm0tYm94e2JhY2tncm91bmQ6I2ZmZjtib3JkZXItcmFkaXVzOjE0cHg7cGFkZGluZzoyNnB4O21heC13aWR0aDo5NXZ3O21heC1oZWlnaHQ6OTB2aDtvdmVyZmxvdy15OmF1dG87Ym94LXNoYWRvdzowIDIwcHggNjBweCByZ2JhKDAsMCwwLC4yNSl9CiAgICAgICAgLm0tYm94IGgze21hcmdpbjowIDAgMTZweDtkaXNwbGF5OmZsZXg7YWxpZ24taXRlbXM6Y2VudGVyO2dhcDo4cHh9Lm0tYm94IGgzIGl7Y29sb3I6dmFyKC0taGVhZGVyKX0KICAgICAgICAubS1yb3d7ZGlzcGxheTpncmlkO2dyaWQtdGVtcGxhdGUtY29sdW1uczoxZnIgMWZyO2dhcDoxMnB4O21hcmdpbi1ib3R0b206MTJweH0KICAgICAgICAubS1hY3Rze2Rpc3BsYXk6ZmxleDtnYXA6OHB4O2p1c3RpZnktY29udGVudDpmbGV4LWVuZDttYXJnaW4tdG9wOjEycHh9CiAgICAgICAgLm1ie3BhZGRpbmc6OHB4IDE4cHg7Ym9yZGVyOm5vbmU7Ym9yZGVyLXJhZGl1czo4cHg7Y3Vyc29yOnBvaW50ZXI7Zm9udC13ZWlnaHQ6NjAwO2ZvbnQtc2l6ZTouOHJlbTtkaXNwbGF5OmZsZXg7YWxpZ24taXRlbXM6Y2VudGVyO2dhcDo1cHh9CiAgICAgICAgLm1iLWN7YmFja2dyb3VuZDojZjBmMGYwO2NvbG9yOiM1NTU7cGFkZGluZzoxMHB4IDIwcHg7Zm9udC1zaXplOi44NXJlbTtib3JkZXItcmFkaXVzOjhweH0ubWItb2t7YmFja2dyb3VuZDp2YXIoLS1oZWFkZXIpO2NvbG9yOiNmZmY7Zm9udC1zaXplOi45cmVtO3BhZGRpbmc6MTBweCAyNHB4O2JveC1zaGFkb3c6MCAycHggOHB4IHJnYmEoNDQsNjIsODAsLjMpO3RyYW5zaXRpb246dHJhbnNmb3JtIC4xcyxib3gtc2hhZG93IC4xc30ubWItb2s6aG92ZXJ7dHJhbnNmb3JtOnRyYW5zbGF0ZVkoLTFweCk7Ym94LXNoYWRvdzowIDRweCAxMnB4IHJnYmEoNDQsNjIsODAsLjQpfQogICAgICAgIC5tYi1kZWx7YmFja2dyb3VuZDojZTc0YzNjO2NvbG9yOiNmZmY7bWFyZ2luLXJpZ2h0OmF1dG99CgogICAgICAgIEBtZWRpYSBwcmludHsKICAgICAgICAgICAgLnNpZGViYXIsLmd0LWJhci1idG5zLC5ndC1uYXYsLmd0LWxlZywuZ3QtY2ssLmV2LWhlYWRlciwuZXYtdG9wLC5ldi1maWx0ZXJzLC5ldi1jYXJkLWFjdHMsLm5vLXByaW50e2Rpc3BsYXk6bm9uZSFpbXBvcnRhbnR9CiAgICAgICAgICAgIC5jb250ZW50e21hcmdpbi1sZWZ0OjAhaW1wb3J0YW50O3BhZGRpbmc6OHB4IWltcG9ydGFudH0KICAgICAgICAgICAgLmd0LXdyYXB7Ym9yZGVyOjFweCBzb2xpZCAjOTk5O21heC1oZWlnaHQ6bm9uZSFpbXBvcnRhbnQ7b3ZlcmZsb3c6dmlzaWJsZSFpbXBvcnRhbnR9CiAgICAgICAgICAgIC5ndCB0ZCwuZ3QgdGh7Ym9yZGVyOjFweCBzb2xpZCAjY2NjIWltcG9ydGFudH0KICAgICAgICAgICAgLmd0LWNme3ByaW50LWNvbG9yLWFkanVzdDpleGFjdDstd2Via2l0LXByaW50LWNvbG9yLWFkanVzdDpleGFjdH0KICAgICAgICB9CgogICAgCi8qIOKUgOKUgCBHb29nbGUgQ2FsZW5kYXIgZHVhbCB2aWV3IOKUgOKUgCAqLwouZ2NhbC1iYW5uZXJ7YmFja2dyb3VuZDpsaW5lYXItZ3JhZGllbnQoMTM1ZGVnLCM0Mjg1ZjQsIzM0YTg1Myk7Y29sb3I6I2ZmZjtwYWRkaW5nOjE0cHggMThweDtib3JkZXItcmFkaXVzOjEycHg7ZGlzcGxheTpmbGV4O2FsaWduLWl0ZW1zOmNlbnRlcjtnYXA6MTJweDttYXJnaW4tYm90dG9tOjE2cHg7Zm9udC1zaXplOi44NXJlbTt9Ci5nY2FsLWJhbm5lciBpe2ZvbnQtc2l6ZToxLjNyZW07fQouZ2NhbC1iYW5uZXIgLmdjYWwtc3RhdHVze2ZvbnQtd2VpZ2h0OjYwMDt9Ci5nY2FsLWJhbm5lciAuZ2NhbC1zdWJ7b3BhY2l0eTouODU7Zm9udC1zaXplOi43MnJlbTt9Ci5nY2FsLW9mZmxpbmUtYmFubmVye2JhY2tncm91bmQ6I2YwZjBmMDtjb2xvcjojNTU1O3BhZGRpbmc6MTRweCAxOHB4O2JvcmRlci1yYWRpdXM6MTJweDtkaXNwbGF5OmZsZXg7YWxpZ24taXRlbXM6Y2VudGVyO2dhcDoxMnB4O21hcmdpbi1ib3R0b206MTZweDtmb250LXNpemU6Ljg1cmVtO30KLmdjYWwtb2ZmbGluZS1iYW5uZXIgaXtmb250LXNpemU6MS4zcmVtO2NvbG9yOiM5OTk7fQouZ2NhbC1ldnQtbGlzdHttYXgtaGVpZ2h0OjYwdmg7b3ZlcmZsb3cteTphdXRvO30KLmdjYWwtZGF5LWdyb3Vwe21hcmdpbi1ib3R0b206MTRweDt9Ci5nY2FsLWRheS1oZWFkZXJ7Zm9udC13ZWlnaHQ6NzAwO2ZvbnQtc2l6ZTouODJyZW07Y29sb3I6IzMzMztwYWRkaW5nOjZweCAwO2JvcmRlci1ib3R0b206MnB4IHNvbGlkICNlMGUwZTA7bWFyZ2luLWJvdHRvbTo2cHg7cG9zaXRpb246c3RpY2t5O3RvcDowO2JhY2tncm91bmQ6I2ZmZjt6LWluZGV4OjE7fQouZ2NhbC1kYXktaGVhZGVyLmlzLXRvZGF5e2NvbG9yOiNlNjdlMjI7Ym9yZGVyLWJvdHRvbS1jb2xvcjojZTY3ZTIyO30KLmdjYWwtaXRlbXtkaXNwbGF5OmZsZXg7YWxpZ24taXRlbXM6ZmxleC1zdGFydDtnYXA6MTBweDtwYWRkaW5nOjdweCAxMHB4O2JvcmRlci1yYWRpdXM6OHB4O2ZvbnQtc2l6ZTouOHJlbTt0cmFuc2l0aW9uOmJhY2tncm91bmQgLjE1czt9Ci5nY2FsLWl0ZW06aG92ZXJ7YmFja2dyb3VuZDojZjVmNWY1O30KLmdjYWwtaXRlbSAuZ2NhbC1kb3R7d2lkdGg6MTBweDtoZWlnaHQ6MTBweDtib3JkZXItcmFkaXVzOjUwJTtmbGV4LXNocmluazowO21hcmdpbi10b3A6M3B4O30KLmdjYWwtaXRlbSAuZ2NhbC10aW1le2ZvbnQtd2VpZ2h0OjYwMDtjb2xvcjojNTU1O21pbi13aWR0aDo0OHB4O2ZvbnQtc2l6ZTouNzVyZW07fQouZ2NhbC1pdGVtIC5nY2FsLXRpdGxle2ZsZXg6MTtjb2xvcjojMjIyO30KLmdjYWwtaXRlbSAuZ2NhbC1jYWwtbmFtZXtmb250LXNpemU6LjY1cmVtO2NvbG9yOiM5OTk7bWFyZ2luLXRvcDoxcHg7fQouZ2NhbC1uYXZ7ZGlzcGxheTpmbGV4O2FsaWduLWl0ZW1zOmNlbnRlcjtnYXA6OHB4O21hcmdpbi1ib3R0b206MTJweDtmbGV4LXdyYXA6d3JhcDt9Ci5nY2FsLW5hdiBidXR0b257cGFkZGluZzo2cHggMTJweDtib3JkZXI6MXB4IHNvbGlkICNkZGQ7Ym9yZGVyLXJhZGl1czo4cHg7YmFja2dyb3VuZDojZmZmO2N1cnNvcjpwb2ludGVyO2ZvbnQtc2l6ZTouNzhyZW07Zm9udC13ZWlnaHQ6NjAwO30KLmdjYWwtbmF2IGJ1dHRvbjpob3ZlcntiYWNrZ3JvdW5kOiNmMGYwZjA7fQouZ2NhbC1uYXYgLmdjYWwtcGVyaW9ke2ZvbnQtd2VpZ2h0OjcwMDtmb250LXNpemU6LjlyZW07Y29sb3I6IzMzMzttaW4td2lkdGg6MTYwcHg7dGV4dC1hbGlnbjpjZW50ZXI7fQouZ2NhbC1lbXB0eXt0ZXh0LWFsaWduOmNlbnRlcjtwYWRkaW5nOjMwcHg7Y29sb3I6I2FhYTtmb250LXNpemU6Ljg1cmVtO30KLmdjYWwtZW1wdHkgaXtmb250LXNpemU6MnJlbTtkaXNwbGF5OmJsb2NrO21hcmdpbi1ib3R0b206OHB4O30KCjwvc3R5bGU+CjwvaGVhZD4KPGJvZHk+Cgo8bmF2IGNsYXNzPSJzaWRlYmFyIG5vLXByaW50Ij4KICAgIDxkaXYgY2xhc3M9ImJyYW5kIj5DQURJUjwvZGl2PgogICAgPGRpdiBjbGFzcz0ibWVudSI+CiAgICAgICAgPGEgY2xhc3M9Im1lbnUtaXRlbSIgZGF0YS1tZW51PSJtZW51MSIgb25jbGljaz0ic3dpdGNoTWVudSgnbWVudTEnKSI+PGkgY2xhc3M9ImZhcyBmYS1jb2dzIj48L2k+IFBhcmFtw6h0cmVzPC9hPgogICAgICAgIDxhIGNsYXNzPSJtZW51LWl0ZW0gYWN0aXZlIiBkYXRhLW1lbnU9Im1lbnUyIiBvbmNsaWNrPSJzd2l0Y2hNZW51KCdtZW51MicpIj48aSBjbGFzcz0iZmFzIGZhLWNoZWNrLXNxdWFyZSI+PC9pPiBUbyBEbyBMaXN0PC9hPgogICAgICAgIDxhIGNsYXNzPSJtZW51LWl0ZW0iIGRhdGEtbWVudT0ibWVudTMiIG9uY2xpY2s9InN3aXRjaE1lbnUoJ21lbnUzJykiPjxpIGNsYXNzPSJmYXMgZmEtY2FsZW5kYXItYWx0Ij48L2k+IENhbGVuZHJpZXI8L2E+CiAgICAgICAgPGEgY2xhc3M9Im1lbnUtaXRlbSIgZGF0YS1tZW51PSJtZW51NCIgb25jbGljaz0ic3dpdGNoTWVudSgnbWVudTQnKSI+PGkgY2xhc3M9ImZhcyBmYS1jbGlwYm9hcmQtbGlzdCI+PC9pPiBDb25zZWlsIGRlIERpcmVjdGlvbjwvYT4KICAgICAgICA8YSBjbGFzcz0ibWVudS1pdGVtIiBkYXRhLW1lbnU9Im1lbnU1IiBvbmNsaWNrPSJzd2l0Y2hNZW51KCdtZW51NScpIj48aSBjbGFzcz0iZmFzIGZhLXVzZXItZ3JhZHVhdGUiPjwvaT4gU3Vpdmkgw4lsw6h2ZSAvIFBvaW50IENQRTwvYT4KICAgICAgICA8YSBjbGFzcz0ibWVudS1pdGVtIiBkYXRhLW1lbnU9Im1lbnU2IiBvbmNsaWNrPSJzd2l0Y2hNZW51KCdtZW51NicpIj48aSBjbGFzcz0iZmFzIGZhLWNvbW1lbnRzIj48L2k+IEVudHJldGllbnM8L2E+CiAgICAgICAgPGEgY2xhc3M9Im1lbnUtaXRlbSIgZGF0YS1tZW51PSJtZW51NyIgb25jbGljaz0ic3dpdGNoTWVudSgnbWVudTcnKSI+PGkgY2xhc3M9ImZhcyBmYS11c2VycyI+PC9pPiBSw6l1bmlvbnM8L2E+CiAgICAgICAgPGEgY2xhc3M9Im1lbnUtaXRlbSIgZGF0YS1tZW51PSJtZW51OCIgb25jbGljaz0ic3dpdGNoTWVudSgnbWVudTgnKSI+PGkgY2xhc3M9ImZhcyBmYS1oaXN0b3J5Ij48L2k+IEhpc3RvcmlxdWU8L2E+CiAgICAgICAgPGEgY2xhc3M9Im1lbnUtaXRlbSIgZGF0YS1tZW51PSJtZW51OSIgb25jbGljaz0ic3dpdGNoTWVudSgnbWVudTknKSI+PGkgY2xhc3M9ImZhcyBmYS1jaGFydC1saW5lIj48L2k+IFRhYmxlYXUgZGUgQm9yZDwvYT4KICAgICAgICA8YSBjbGFzcz0ibWVudS1pdGVtIiBkYXRhLW1lbnU9Im1lbnUxMCIgb25jbGljaz0ic3dpdGNoTWVudSgnbWVudTEwJykiPjxpIGNsYXNzPSJmYXMgZmEtY2FsZW5kYXItY2hlY2siPjwvaT4gQWN0aXZpdMOpcyBww6lkYWdvZ2lxdWVzPC9hPgogICAgICAgIDxhIGNsYXNzPSJtZW51LWl0ZW0iIGRhdGEtbWVudT0ibWVudTExIiBvbmNsaWNrPSJzd2l0Y2hNZW51KCdtZW51MTEnKSI+PGkgY2xhc3M9ImZhcyBmYS1zdHJlYW0iPjwvaT4gw4ljaMOpYW5jZXM8L2E+CiAgICAgICAgPGEgY2xhc3M9Im1lbnUtaXRlbSIgZGF0YS1tZW51PSJtZW51MTIiIG9uY2xpY2s9InN3aXRjaE1lbnUoJ21lbnUxMicpIj48aSBjbGFzcz0iZmFzIGZhLWJvb2siPjwvaT4gUHJvY8OpZHVyZXM8L2E+CiAgICA8L2Rpdj4KICAgIDxkaXYgY2xhc3M9ImZvb3Rlci1pbmZvIj5DQURJUiBieSBGUzwvZGl2Pgo8L25hdj4KCjxkaXYgY2xhc3M9Im1haW4tY29udGVudCI+CiAgICA8ZGl2IGNsYXNzPSJ0b3AtYmFyIG5vLXByaW50Ij4KICAgICAgICA8ZGl2IGNsYXNzPSJwYWdlLXRpdGxlIj48aDIgaWQ9ImN1cnJlbnQtdGl0bGUiPlBhcmFtw6h0cmVzPC9oMj48cCBpZD0iY3VycmVudC1kYXRlIj48L3A+PC9kaXY+CiAgICAgICAgPGRpdiBjbGFzcz0ic3lzdGVtLXN0YXR1cyI+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9InNhdmUtaW5kaWNhdG9yIiBpZD0iYXV0by1zYXZlLW1zZyI+PGkgY2xhc3M9ImZhcyBmYS1zeW5jLWFsdCBmYS1zcGluIj48L2k+IERvbm7DqWVzIMOgIGpvdXI8L2Rpdj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0iYWN0aW9uLWJ1dHRvbnMiPgogICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9ImZpbGUiIGlkPSJpbXBvcnRGaWxlIiBzdHlsZT0iZGlzcGxheTpub25lIiBvbmNoYW5nZT0iaW1wb3J0RGF0YSh0aGlzKSI+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgIDwvZGl2PgogICAgPC9kaXY+CgogICAgPGRpdiBpZD0ibWVudTEiIGNsYXNzPSJzZWN0aW9uIGFjdGl2ZSI+CiAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1jYXJkIj4KICAgICAgICAgICAgPGgzPlBhcmFtw6h0cmVzIEfDqW7DqXJhdXg8L2gzPgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWdyaWQiPgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1ncm91cCI+PGxhYmVsPk5vbSDDiXRhYmxpc3NlbWVudDwvbGFiZWw+PGlucHV0IHR5cGU9InRleHQiIGlkPSJjZmctc2Nob29sIiBjbGFzcz0iZm9ybS1jb250cm9sIiBvbmlucHV0PSJzYXZlRGF0YSgpOyI+PC9kaXY+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWdyb3VwIj48bGFiZWw+Tm9tICYgRm9uY3Rpb24gKFNpZ25hdHVyZSk8L2xhYmVsPjxpbnB1dCB0eXBlPSJ0ZXh0IiBpZD0iY2ZnLXVzZXIiIGNsYXNzPSJmb3JtLWNvbnRyb2wiIHBsYWNlaG9sZGVyPSJNLiBsZSBQcmluY2lwYWwiIG9uaW5wdXQ9InNhdmVEYXRhKCk7Ij48L2Rpdj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZ3JpZCI+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWdyb3VwIj48bGFiZWw+TG9nbzwvbGFiZWw+PGlucHV0IHR5cGU9ImZpbGUiIG9uY2hhbmdlPSJlbmNvZGVJbWFnZSh0aGlzLCAnY2ZnLWxvZ28tcHJldmlldycsICdsb2dvJykiIGNsYXNzPSJmb3JtLWNvbnRyb2wiPjxpbWcgaWQ9ImNmZy1sb2dvLXByZXZpZXciIHNyYz0iIiBzdHlsZT0iaGVpZ2h0OjUwcHg7IGRpc3BsYXk6bm9uZTsgbWFyZ2luLXRvcDoxMHB4OyI+PC9kaXY+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWdyb3VwIj48bGFiZWw+U2lnbmF0dXJlPC9sYWJlbD48aW5wdXQgdHlwZT0iZmlsZSIgb25jaGFuZ2U9ImVuY29kZUltYWdlKHRoaXMsICdjZmctc2lnLXByZXZpZXcnLCAnc2lnbmF0dXJlJykiIGNsYXNzPSJmb3JtLWNvbnRyb2wiPjxpbWcgaWQ9ImNmZy1zaWctcHJldmlldyIgc3JjPSIiIHN0eWxlPSJoZWlnaHQ6NTBweDsgZGlzcGxheTpub25lOyBtYXJnaW4tdG9wOjEwcHg7Ij48L2Rpdj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDxkaXYgc3R5bGU9Im1hcmdpbi10b3A6MjBweDsgZGlzcGxheTpmbGV4OyBqdXN0aWZ5LWNvbnRlbnQ6c3BhY2UtYmV0d2VlbjsiPgogICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYnRuIGJ0bi1wcmltYXJ5IiBvbmNsaWNrPSJzYXZlU2V0dGluZ3MoKSI+RW5yZWdpc3RyZXIgbGVzIHBhcmFtw6h0cmVzPC9idXR0b24+CiAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJidG4gYnRuLWRhbmdlciIgb25jbGljaz0iY2xlYXJBbGwoKSI+UmVzZXQgQXBwPC9idXR0b24+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8ZGl2IHN0eWxlPSJtYXJnaW4tdG9wOjE0cHgiPgogICAgICAgICAgICAgICAgPGxhYmVsIHN0eWxlPSJmb250LXNpemU6Ljc4cmVtO2ZvbnQtd2VpZ2h0OjYwMDtkaXNwbGF5OmJsb2NrO21hcmdpbi1ib3R0b206NnB4Ij48aSBjbGFzcz0iZmFzIGZhLWdyaXAtbGluZXMiIHN0eWxlPSJjb2xvcjojOTk5Ij48L2k+IFPDqXBhcmF0ZXVycyBkZSBzb3VzLW1lbnVzPC9sYWJlbD4KICAgICAgICAgICAgICAgIDxzbWFsbCBzdHlsZT0iY29sb3I6Izg4ODtkaXNwbGF5OmJsb2NrO21hcmdpbi1ib3R0b206OHB4Ij5Db2NoZXogbGVzIHNvdXMtbWVudXMgYXByw6hzIGxlc3F1ZWxzIGFmZmljaGVyIHVuIHPDqXBhcmF0ZXVyLjwvc21hbGw+CiAgICAgICAgICAgICAgICA8ZGl2IGlkPSJzZXAtY29uZmlnIiBzdHlsZT0iZGlzcGxheTpmbGV4O2ZsZXgtZGlyZWN0aW9uOmNvbHVtbjtnYXA6NHB4Ij48L2Rpdj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgCiAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1jYXJkIiBzdHlsZT0ibWFyZ2luLXRvcDoyMHB4OyI+CiAgICAgICAgICAgIDxoMz48aSBjbGFzcz0iZmFzIGZhLWZpbGUtYWx0Ij48L2k+IE1vZMOobGVzIHBhciBkw6lmYXV0PC9oMz4KICAgICAgICAgICAgPHNtYWxsIHN0eWxlPSJjb2xvcjojODg4O2Rpc3BsYXk6YmxvY2s7bWFyZ2luLWJvdHRvbToxMnB4OyI+UGVyc29ubmFsaXNleiBsZSBjb250ZW51IHBhciBkw6lmYXV0IGRlcyB6b25lcyBkZSBwcmlzZSBkZSBub3Rlcy48L3NtYWxsPgogICAgICAgICAgICA8ZGl2IHN0eWxlPSJkaXNwbGF5OmZsZXg7ZmxleC1kaXJlY3Rpb246Y29sdW1uO2dhcDoxNHB4OyI+CiAgICAgICAgICAgICAgICA8ZGl2PgogICAgICAgICAgICAgICAgICAgIDxsYWJlbCBzdHlsZT0iZm9udC1zaXplOi43OHJlbTtmb250LXdlaWdodDo2MDA7bWFyZ2luLWJvdHRvbTo0cHg7ZGlzcGxheTpibG9jazsiPjxpIGNsYXNzPSJmYXMgZmEtY29tbWVudHMiIHN0eWxlPSJjb2xvcjojOWI1OWI2Ij48L2k+IEVudHJldGllbjwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0icnRlLXdyYXAiPjxkaXYgY2xhc3M9InJ0ZS1iYXIiPgo8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0iZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2JvbGQnKSIgdGl0bGU9IkdyYXMiPjxiPkc8L2I+PC9idXR0b24+CjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJkb2N1bWVudC5leGVjQ29tbWFuZCgnaXRhbGljJykiIHRpdGxlPSJJdGFsaXF1ZSI+PGk+STwvaT48L2J1dHRvbj4KPGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9ImRvY3VtZW50LmV4ZWNDb21tYW5kKCdpbnNlcnRVbm9yZGVyZWRMaXN0JykiIHRpdGxlPSJQdWNlcyI+PGkgY2xhc3M9ImZhcyBmYS1saXN0LXVsIj48L2k+PC9idXR0b24+CjxzcGFuIGNsYXNzPSJydGUtc2VwIj48L3NwYW4+PGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9ImRvY3VtZW50LmV4ZWNDb21tYW5kKCdqdXN0aWZ5TGVmdCcpIiB0aXRsZT0iQWxpZ25lciDDoCBnYXVjaGUiPjxpIGNsYXNzPSJmYXMgZmEtYWxpZ24tbGVmdCI+PC9pPjwvYnV0dG9uPjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJkb2N1bWVudC5leGVjQ29tbWFuZCgnanVzdGlmeUNlbnRlcicpIiB0aXRsZT0iQ2VudHJlciI+PGkgY2xhc3M9ImZhcyBmYS1hbGlnbi1jZW50ZXIiPjwvaT48L2J1dHRvbj48YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0iZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2p1c3RpZnlGdWxsJykiIHRpdGxlPSJKdXN0aWZpZXIiPjxpIGNsYXNzPSJmYXMgZmEtYWxpZ24tanVzdGlmeSI+PC9pPjwvYnV0dG9uPjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJwYXN0ZUZyb21Xb3JkKCkiIHRpdGxlPSJDb2xsZXIgZGVwdWlzIFdvcmQgZW4gY29uc2VydmFudCBsYSBtaXNlIGVuIHBhZ2UiIHN0eWxlPSJtYXJnaW4tbGVmdDo2cHg7YmFja2dyb3VuZDojMmI1NzlhO2NvbG9yOndoaXRlO2JvcmRlci1yYWRpdXM6NHB4O3BhZGRpbmc6MnB4IDhweDtmb250LXNpemU6LjY4cmVtO2JvcmRlcjpub25lO2N1cnNvcjpwb2ludGVyO2ZvbnQtZmFtaWx5OmluaGVyaXQ7ZGlzcGxheTppbmxpbmUtZmxleDthbGlnbi1pdGVtczpjZW50ZXI7Z2FwOjNweDt2ZXJ0aWNhbC1hbGlnbjptaWRkbGU7Ij48aSBjbGFzcz0iZmFzIGZhLWZpbGUtd29yZCI+PC9pPsKgV29yZDwvYnV0dG9uPgo8L2Rpdj48ZGl2IGlkPSJ0cGwtZW50IiBjbGFzcz0iZG9jLWVkaXRvciIgY29udGVudGVkaXRhYmxlPSJ0cnVlIiBzdHlsZT0ibWluLWhlaWdodDo4MHB4O2ZvbnQtc2l6ZTouOHJlbTtyZXNpemU6dmVydGljYWw7b3ZlcmZsb3c6YXV0bzsiPjwvZGl2PjwvZGl2PgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICA8ZGl2PgogICAgICAgICAgICAgICAgICAgIDxsYWJlbCBzdHlsZT0iZm9udC1zaXplOi43OHJlbTtmb250LXdlaWdodDo2MDA7bWFyZ2luLWJvdHRvbTo0cHg7ZGlzcGxheTpibG9jazsiPjxpIGNsYXNzPSJmYXMgZmEtdXNlcnMiIHN0eWxlPSJjb2xvcjojZTc0YzNjIj48L2k+IFLDqXVuaW9uPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJydGUtd3JhcCI+PGRpdiBjbGFzcz0icnRlLWJhciI+CjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJkb2N1bWVudC5leGVjQ29tbWFuZCgnYm9sZCcpIiB0aXRsZT0iR3JhcyI+PGI+RzwvYj48L2J1dHRvbj4KPGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9ImRvY3VtZW50LmV4ZWNDb21tYW5kKCdpdGFsaWMnKSIgdGl0bGU9Ikl0YWxpcXVlIj48aT5JPC9pPjwvYnV0dG9uPgo8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0iZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2luc2VydFVub3JkZXJlZExpc3QnKSIgdGl0bGU9IlB1Y2VzIj48aSBjbGFzcz0iZmFzIGZhLWxpc3QtdWwiPjwvaT48L2J1dHRvbj4KPHNwYW4gY2xhc3M9InJ0ZS1zZXAiPjwvc3Bhbj48YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0iZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2p1c3RpZnlMZWZ0JykiIHRpdGxlPSJBbGlnbmVyIMOgIGdhdWNoZSI+PGkgY2xhc3M9ImZhcyBmYS1hbGlnbi1sZWZ0Ij48L2k+PC9idXR0b24+PGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9ImRvY3VtZW50LmV4ZWNDb21tYW5kKCdqdXN0aWZ5Q2VudGVyJykiIHRpdGxlPSJDZW50cmVyIj48aSBjbGFzcz0iZmFzIGZhLWFsaWduLWNlbnRlciI+PC9pPjwvYnV0dG9uPjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJkb2N1bWVudC5leGVjQ29tbWFuZCgnanVzdGlmeUZ1bGwnKSIgdGl0bGU9Ikp1c3RpZmllciI+PGkgY2xhc3M9ImZhcyBmYS1hbGlnbi1qdXN0aWZ5Ij48L2k+PC9idXR0b24+PGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9InBhc3RlRnJvbVdvcmQoKSIgdGl0bGU9IkNvbGxlciBkZXB1aXMgV29yZCBlbiBjb25zZXJ2YW50IGxhIG1pc2UgZW4gcGFnZSIgc3R5bGU9Im1hcmdpbi1sZWZ0OjZweDtiYWNrZ3JvdW5kOiMyYjU3OWE7Y29sb3I6d2hpdGU7Ym9yZGVyLXJhZGl1czo0cHg7cGFkZGluZzoycHggOHB4O2ZvbnQtc2l6ZTouNjhyZW07Ym9yZGVyOm5vbmU7Y3Vyc29yOnBvaW50ZXI7Zm9udC1mYW1pbHk6aW5oZXJpdDtkaXNwbGF5OmlubGluZS1mbGV4O2FsaWduLWl0ZW1zOmNlbnRlcjtnYXA6M3B4O3ZlcnRpY2FsLWFsaWduOm1pZGRsZTsiPjxpIGNsYXNzPSJmYXMgZmEtZmlsZS13b3JkIj48L2k+wqBXb3JkPC9idXR0b24+CjwvZGl2PjxkaXYgaWQ9InRwbC1yZXUiIGNsYXNzPSJkb2MtZWRpdG9yIiBjb250ZW50ZWRpdGFibGU9InRydWUiIHN0eWxlPSJtaW4taGVpZ2h0OjgwcHg7Zm9udC1zaXplOi44cmVtO3Jlc2l6ZTp2ZXJ0aWNhbDtvdmVyZmxvdzphdXRvOyI+PC9kaXY+PC9kaXY+CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIDxkaXY+CiAgICAgICAgICAgICAgICAgICAgPGxhYmVsIHN0eWxlPSJmb250LXNpemU6Ljc4cmVtO2ZvbnQtd2VpZ2h0OjYwMDttYXJnaW4tYm90dG9tOjRweDtkaXNwbGF5OmJsb2NrOyI+PGkgY2xhc3M9ImZhcyBmYS1jbGlwYm9hcmQtbGlzdCIgc3R5bGU9ImNvbG9yOiMyYzNlNTAiPjwvaT4gQ29uc2VpbCBkZSBEaXJlY3Rpb24gKE9ESik8L2xhYmVsPgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InJ0ZS13cmFwIj48ZGl2IGNsYXNzPSJydGUtYmFyIj4KPGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9ImRvY3VtZW50LmV4ZWNDb21tYW5kKCdib2xkJykiIHRpdGxlPSJHcmFzIj48Yj5HPC9iPjwvYnV0dG9uPgo8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0iZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2l0YWxpYycpIiB0aXRsZT0iSXRhbGlxdWUiPjxpPkk8L2k+PC9idXR0b24+CjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJkb2N1bWVudC5leGVjQ29tbWFuZCgnaW5zZXJ0VW5vcmRlcmVkTGlzdCcpIiB0aXRsZT0iUHVjZXMiPjxpIGNsYXNzPSJmYXMgZmEtbGlzdC11bCI+PC9pPjwvYnV0dG9uPgo8c3BhbiBjbGFzcz0icnRlLXNlcCI+PC9zcGFuPjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJkb2N1bWVudC5leGVjQ29tbWFuZCgnanVzdGlmeUxlZnQnKSIgdGl0bGU9IkFsaWduZXIgw6AgZ2F1Y2hlIj48aSBjbGFzcz0iZmFzIGZhLWFsaWduLWxlZnQiPjwvaT48L2J1dHRvbj48YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0iZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2p1c3RpZnlDZW50ZXInKSIgdGl0bGU9IkNlbnRyZXIiPjxpIGNsYXNzPSJmYXMgZmEtYWxpZ24tY2VudGVyIj48L2k+PC9idXR0b24+PGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9ImRvY3VtZW50LmV4ZWNDb21tYW5kKCdqdXN0aWZ5RnVsbCcpIiB0aXRsZT0iSnVzdGlmaWVyIj48aSBjbGFzcz0iZmFzIGZhLWFsaWduLWp1c3RpZnkiPjwvaT48L2J1dHRvbj48YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0icGFzdGVGcm9tV29yZCgpIiB0aXRsZT0iQ29sbGVyIGRlcHVpcyBXb3JkIGVuIGNvbnNlcnZhbnQgbGEgbWlzZSBlbiBwYWdlIiBzdHlsZT0ibWFyZ2luLWxlZnQ6NnB4O2JhY2tncm91bmQ6IzJiNTc5YTtjb2xvcjp3aGl0ZTtib3JkZXItcmFkaXVzOjRweDtwYWRkaW5nOjJweCA4cHg7Zm9udC1zaXplOi42OHJlbTtib3JkZXI6bm9uZTtjdXJzb3I6cG9pbnRlcjtmb250LWZhbWlseTppbmhlcml0O2Rpc3BsYXk6aW5saW5lLWZsZXg7YWxpZ24taXRlbXM6Y2VudGVyO2dhcDozcHg7dmVydGljYWwtYWxpZ246bWlkZGxlOyI+PGkgY2xhc3M9ImZhcyBmYS1maWxlLXdvcmQiPjwvaT7CoFdvcmQ8L2J1dHRvbj4KPC9kaXY+PGRpdiBpZD0idHBsLWRpciIgY2xhc3M9ImRvYy1lZGl0b3IiIGNvbnRlbnRlZGl0YWJsZT0idHJ1ZSIgc3R5bGU9Im1pbi1oZWlnaHQ6ODBweDtmb250LXNpemU6LjhyZW07cmVzaXplOnZlcnRpY2FsO292ZXJmbG93OmF1dG87Ij48L2Rpdj48L2Rpdj4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgPGRpdj4KICAgICAgICAgICAgICAgICAgICA8bGFiZWwgc3R5bGU9ImZvbnQtc2l6ZTouNzhyZW07Zm9udC13ZWlnaHQ6NjAwO21hcmdpbi1ib3R0b206NHB4O2Rpc3BsYXk6YmxvY2s7Ij48aSBjbGFzcz0iZmFzIGZhLXVzZXItZ3JhZHVhdGUiIHN0eWxlPSJjb2xvcjojMjdhZTYwIj48L2k+IFN1aXZpIMOJbMOodmU8L2xhYmVsPgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InJ0ZS13cmFwIj48ZGl2IGNsYXNzPSJydGUtYmFyIj4KPGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9ImRvY3VtZW50LmV4ZWNDb21tYW5kKCdib2xkJykiIHRpdGxlPSJHcmFzIj48Yj5HPC9iPjwvYnV0dG9uPgo8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0iZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2l0YWxpYycpIiB0aXRsZT0iSXRhbGlxdWUiPjxpPkk8L2k+PC9idXR0b24+CjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJkb2N1bWVudC5leGVjQ29tbWFuZCgnaW5zZXJ0VW5vcmRlcmVkTGlzdCcpIiB0aXRsZT0iUHVjZXMiPjxpIGNsYXNzPSJmYXMgZmEtbGlzdC11bCI+PC9pPjwvYnV0dG9uPgo8c3BhbiBjbGFzcz0icnRlLXNlcCI+PC9zcGFuPjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJkb2N1bWVudC5leGVjQ29tbWFuZCgnanVzdGlmeUxlZnQnKSIgdGl0bGU9IkFsaWduZXIgw6AgZ2F1Y2hlIj48aSBjbGFzcz0iZmFzIGZhLWFsaWduLWxlZnQiPjwvaT48L2J1dHRvbj48YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0iZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2p1c3RpZnlDZW50ZXInKSIgdGl0bGU9IkNlbnRyZXIiPjxpIGNsYXNzPSJmYXMgZmEtYWxpZ24tY2VudGVyIj48L2k+PC9idXR0b24+PGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9ImRvY3VtZW50LmV4ZWNDb21tYW5kKCdqdXN0aWZ5RnVsbCcpIiB0aXRsZT0iSnVzdGlmaWVyIj48aSBjbGFzcz0iZmFzIGZhLWFsaWduLWp1c3RpZnkiPjwvaT48L2J1dHRvbj48YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0icGFzdGVGcm9tV29yZCgpIiB0aXRsZT0iQ29sbGVyIGRlcHVpcyBXb3JkIGVuIGNvbnNlcnZhbnQgbGEgbWlzZSBlbiBwYWdlIiBzdHlsZT0ibWFyZ2luLWxlZnQ6NnB4O2JhY2tncm91bmQ6IzJiNTc5YTtjb2xvcjp3aGl0ZTtib3JkZXItcmFkaXVzOjRweDtwYWRkaW5nOjJweCA4cHg7Zm9udC1zaXplOi42OHJlbTtib3JkZXI6bm9uZTtjdXJzb3I6cG9pbnRlcjtmb250LWZhbWlseTppbmhlcml0O2Rpc3BsYXk6aW5saW5lLWZsZXg7YWxpZ24taXRlbXM6Y2VudGVyO2dhcDozcHg7dmVydGljYWwtYWxpZ246bWlkZGxlOyI+PGkgY2xhc3M9ImZhcyBmYS1maWxlLXdvcmQiPjwvaT7CoFdvcmQ8L2J1dHRvbj4KPC9kaXY+PGRpdiBpZD0idHBsLXN1aXZpIiBjbGFzcz0iZG9jLWVkaXRvciIgY29udGVudGVkaXRhYmxlPSJ0cnVlIiBzdHlsZT0ibWluLWhlaWdodDo4MHB4O2ZvbnQtc2l6ZTouOHJlbTtyZXNpemU6dmVydGljYWw7b3ZlcmZsb3c6YXV0bzsiPjwvZGl2PjwvZGl2PgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJidG4gYnRuLWFjY2VudCIgb25jbGljaz0ic2F2ZVRlbXBsYXRlcygpIiBzdHlsZT0iYWxpZ24tc2VsZjpmbGV4LXN0YXJ0OyI+PGkgY2xhc3M9ImZhcyBmYS1zYXZlIj48L2k+IEVucmVnaXN0cmVyIGxlcyBtb2TDqGxlczwvYnV0dG9uPgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICA8L2Rpdj4KCiAgICAgICAgPCEtLSBFeHBvcnQgLyBJbXBvcnQgLS0+CiAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1jYXJkIiBzdHlsZT0ibWFyZ2luLXRvcDoxNnB4O2JvcmRlcjoycHggc29saWQgI2UwZTdmZjtiYWNrZ3JvdW5kOiNmOGZhZmYiPgogICAgICAgICAgICA8aDM+PGkgY2xhc3M9ImZhcyBmYS1kYXRhYmFzZSIgc3R5bGU9ImNvbG9yOiMzQjgyRjYiPjwvaT4gU2F1dmVnYXJkZSAmIFJlc3RhdXJhdGlvbiBkZXMgZG9ubsOpZXM8L2gzPgogICAgICAgICAgICA8ZGl2IHN0eWxlPSJiYWNrZ3JvdW5kOiNmMGZkZjQ7Ym9yZGVyOjJweCBzb2xpZCAjMjJDNTVFO2JvcmRlci1yYWRpdXM6MTBweDtwYWRkaW5nOjE0cHggMThweDttYXJnaW4tYm90dG9tOjE2cHgiPgogICAgICAgICAgICAgICAgPGg0IHN0eWxlPSJtYXJnaW46MCAwIDhweDtmb250LXNpemU6LjlyZW07Y29sb3I6IzE2NjUzNCI+PGkgY2xhc3M9ImZhcyBmYS1oZGQiPjwvaT4gU2F1dmVnYXJkZSBmaWNoaWVyIGxvY2FsPC9oND4KICAgICAgICAgICAgICAgIDxwIHN0eWxlPSJmb250LXNpemU6Ljc4cmVtO2NvbG9yOiM1NTU7bWFyZ2luOjAgMCAxMHB4Ij5DaG9pc2lzc2V6IHVuIGRvc3NpZXIgc3VyIHZvdHJlIGRpc3F1ZSwgcsOpc2VhdSwgb3UgY2xvdWQgKE9uZURyaXZlLCBHb29nbGUgRHJpdmXigKYpLiBMZSBmaWNoaWVyIDxzdHJvbmc+Y2FkaXJfZGF0YS5qc29uPC9zdHJvbmc+IHkgc2VyYSBjcsOpw6kgZXQgbWlzIMOgIGpvdXIgYXV0b21hdGlxdWVtZW50LjwvcD4KICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9ImRpc3BsYXk6ZmxleDtnYXA6MTBweDthbGlnbi1pdGVtczpjZW50ZXI7ZmxleC13cmFwOndyYXAiPgogICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImJ0biIgb25jbGljaz0id2luZG93LnBpY2tTYXZlRmlsZSgpIiBzdHlsZT0iYmFja2dyb3VuZDojMTY2NTM0O2NvbG9yOiNmZmY7Zm9udC1zaXplOi44cmVtIj48aSBjbGFzcz0iZmFzIGZhLWZvbGRlci1vcGVuIj48L2k+IENob2lzaXIgdW4gZG9zc2llcjwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImJ0biIgb25jbGljaz0id2luZG93LnBpY2tFeGlzdGluZ0ZpbGUoKSIgc3R5bGU9ImJhY2tncm91bmQ6IzI1NjNFQjtjb2xvcjojZmZmO2ZvbnQtc2l6ZTouOHJlbSI+PGkgY2xhc3M9ImZhcyBmYS1maWxlLWltcG9ydCI+PC9pPiBPdXZyaXIgdW4gZmljaGllciBleGlzdGFudDwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImJ0biIgaWQ9ImZpbGUtdW5saW5rLWJ0biIgb25jbGljaz0id2luZG93LnVubGlua0ZpbGUoKSIgc3R5bGU9ImJhY2tncm91bmQ6I2RjMjYyNjtjb2xvcjojZmZmO2ZvbnQtc2l6ZTouNzVyZW07ZGlzcGxheTpub25lIj48aSBjbGFzcz0iZmFzIGZhLXVubGluayI+PC9pPiBEw6lsaWVyPC9idXR0b24+CiAgICAgICAgICAgICAgICAgICAgPHNwYW4gaWQ9ImZpbGUtbGluay1zdGF0dXMiIHN0eWxlPSJmb250LXNpemU6LjhyZW0iPjxpIGNsYXNzPSJmYXMgZmEtdW5saW5rIiBzdHlsZT0iY29sb3I6I2FhYSI+PC9pPiA8c3BhbiBzdHlsZT0iY29sb3I6Izk5OSI+QXVjdW4gZmljaGllciBsacOpPC9zcGFuPjwvc3Bhbj4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgPHAgc3R5bGU9ImZvbnQtc2l6ZTouNjhyZW07Y29sb3I6Izg4ODttYXJnaW46OHB4IDAgMCI+PGkgY2xhc3M9ImZhcyBmYS1pbmZvLWNpcmNsZSI+PC9pPiBMZSBmaWNoaWVyIHBldXQgw6p0cmUgc3VyIHZvdHJlIGRpc3F1ZSwgdW4gcsOpc2VhdSBwYXJ0YWfDqSwgR29vZ2xlIERyaXZlLCBPbmVEcml2ZSwgZXRjLiBGb25jdGlvbm5lIGF2ZWMgQ2hyb21lIGV0IEVkZ2UuPC9wPgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPHAgc3R5bGU9ImZvbnQtc2l6ZTouOHJlbTtjb2xvcjojNjY2O21hcmdpbjowIDAgMTJweCI+Vm91cyBwb3V2ZXogYXVzc2kgZXhwb3J0ZXIvaW1wb3J0ZXIgbWFudWVsbGVtZW50IDo8L3A+CiAgICAgICAgICAgIDxkaXYgc3R5bGU9ImRpc3BsYXk6ZmxleDtnYXA6MTBweDtmbGV4LXdyYXA6d3JhcDthbGlnbi1pdGVtczpjZW50ZXIiPgogICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYnRuIGJ0bi1hY2NlbnQiIG9uY2xpY2s9IndpbmRvdy5leHBvcnREYXRhKCkiIHN0eWxlPSJiYWNrZ3JvdW5kOiMzQjgyRjYiPjxpIGNsYXNzPSJmYXMgZmEtZG93bmxvYWQiPjwvaT4gRXhwb3J0ZXIgSlNPTjwvYnV0dG9uPgogICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYnRuIiBvbmNsaWNrPSJkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW1wb3J0LWZpbGUnKS5jbGljaygpIiBzdHlsZT0iYmFja2dyb3VuZDojMjJDNTVFO2NvbG9yOiNmZmYiPjxpIGNsYXNzPSJmYXMgZmEtdXBsb2FkIj48L2k+IEltcG9ydGVyIEpTT048L2J1dHRvbj4KICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJmaWxlIiBpZD0iaW1wb3J0LWZpbGUiIGFjY2VwdD0iLmpzb24iIHN0eWxlPSJkaXNwbGF5Om5vbmUiIG9uY2hhbmdlPSJpbXBvcnREYXRhKHRoaXMpIj4KICAgICAgICAgICAgICAgIDxzcGFuIGlkPSJsYXN0LWV4cG9ydCIgc3R5bGU9ImZvbnQtc2l6ZTouN3JlbTtjb2xvcjojOTk5Ij48L3NwYW4+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8cCBzdHlsZT0iZm9udC1zaXplOi43cmVtO2NvbG9yOiM5OTk7bWFyZ2luOjhweCAwIDAiPjxpIGNsYXNzPSJmYXMgZmEtaW5mby1jaXJjbGUiPjwvaT4gTGUgZmljaGllciBleHBvcnTDqSBwZXV0IMOqdHJlIHN0b2Nrw6kgc3VyIHVuIHLDqXNlYXUsIHVuZSBjbMOpIFVTQiwgdW4gRlRQLCBHb29nbGUgRHJpdmUsIGV0Yy48L3A+CiAgICAgICAgPC9kaXY+CgogICAgPC9kaXY+CiAgICA8L2Rpdj4KCiAgICA8ZGl2IGlkPSJtZW51MiIgY2xhc3M9InNlY3Rpb24iPgogICAgICAgIDxkaXYgaWQ9InRvZG8tdG9kYXktem9uZSIgY2xhc3M9InRvZG8tdG9kYXktem9uZSI+CiAgICAgICAgICAgIDxkaXYgc3R5bGU9ImZvbnQtd2VpZ2h0OmJvbGQ7IGNvbG9yOiNkMzU0MDA7IG1hcmdpbi1ib3R0b206MTBweDsgZGlzcGxheTpmbGV4OyBhbGlnbi1pdGVtczpjZW50ZXI7IGdhcDoxMHB4OyI+PGkgY2xhc3M9ImZhcyBmYS1iZWxsIGZhLWxnIj48L2k+IEFHRU5EQSBEVSBKT1VSIChHbGlzc2V6LWxlcyBkYW5zIHZvcyBjb2xvbm5lcyk8L2Rpdj4KICAgICAgICAgICAgPGRpdiBpZD0idG9kby10b2RheS1saXN0Ij48L2Rpdj4KICAgICAgICA8L2Rpdj4KICAgICAgICA8ZGl2IGNsYXNzPSJ0b2RvLWdyaWQiPgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJ0b2RvLWJveCB0b2RvLXVyZ2VudCI+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJ0b2RvLWhlYWRlciI+PGgzIHN0eWxlPSJjb2xvcjp2YXIoLS1oaWdobGlnaHQpIj5VUkdFTlQ8L2gzPjwvZGl2PgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0idG9kby1pbnB1dC1ncm91cCI+PGlucHV0IHR5cGU9InRleHQiIGlkPSJ0b2RvLWlucHV0LXVyZ2VudCIgcGxhY2Vob2xkZXI9IkFqb3V0ZXIuLi4iIG9ua2V5cHJlc3M9ImhhbmRsZUVudGVyKGV2ZW50LCAndXJnZW50JykiPjxidXR0b24gY2xhc3M9ImJ0biBidG4tZGFuZ2VyIGJ0bi1zbSIgb25jbGljaz0iYWRkVG9kbygndXJnZW50JykiPis8L2J1dHRvbj48L2Rpdj4KICAgICAgICAgICAgICAgIDx1bCBjbGFzcz0idG9kby1saXN0IiBpZD0ibGlzdC11cmdlbnQiIG9uZHJvcD0iZHJvcChldmVudCwgJ3VyZ2VudCcpIiBvbmRyYWdvdmVyPSJhbGxvd0Ryb3AoZXZlbnQpIj48L3VsPgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0idG9kby1ib3ggdG9kby1wbGFuIj4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InRvZG8taGVhZGVyIj48aDMgc3R5bGU9ImNvbG9yOnZhcigtLXByaW1hcnkpIj5BIFBMQU5JRklFUjwvaDM+PC9kaXY+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJ0b2RvLWlucHV0LWdyb3VwIj48aW5wdXQgdHlwZT0idGV4dCIgaWQ9InRvZG8taW5wdXQtcGxhbiIgcGxhY2Vob2xkZXI9IkFqb3V0ZXIuLi4iIG9ua2V5cHJlc3M9ImhhbmRsZUVudGVyKGV2ZW50LCAncGxhbicpIj48YnV0dG9uIGNsYXNzPSJidG4gYnRuLXByaW1hcnkgYnRuLXNtIiBvbmNsaWNrPSJhZGRUb2RvKCdwbGFuJykiPis8L2J1dHRvbj48L2Rpdj4KICAgICAgICAgICAgICAgIDx1bCBjbGFzcz0idG9kby1saXN0IiBpZD0ibGlzdC1wbGFuIiBvbmRyb3A9ImRyb3AoZXZlbnQsICdwbGFuJykiIG9uZHJhZ292ZXI9ImFsbG93RHJvcChldmVudCkiPjwvdWw+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJ0b2RvLWJveCB0b2RvLXBvc3NpYmxlIj4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InRvZG8taGVhZGVyIj48aDMgc3R5bGU9ImNvbG9yOnZhcigtLXN1Y2Nlc3MpIj5TSSBQT1NTSUJMRTwvaDM+PC9kaXY+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJ0b2RvLWlucHV0LWdyb3VwIj48aW5wdXQgdHlwZT0idGV4dCIgaWQ9InRvZG8taW5wdXQtcG9zc2libGUiIHBsYWNlaG9sZGVyPSJBam91dGVyLi4uIiBvbmtleXByZXNzPSJoYW5kbGVFbnRlcihldmVudCwgJ3Bvc3NpYmxlJykiPjxidXR0b24gY2xhc3M9ImJ0biBidG4tc3VjY2VzcyBidG4tc20iIG9uY2xpY2s9ImFkZFRvZG8oJ3Bvc3NpYmxlJykiPis8L2J1dHRvbj48L2Rpdj4KICAgICAgICAgICAgICAgIDx1bCBjbGFzcz0idG9kby1saXN0IiBpZD0ibGlzdC1wb3NzaWJsZSIgb25kcm9wPSJkcm9wKGV2ZW50LCAncG9zc2libGUnKSIgb25kcmFnb3Zlcj0iYWxsb3dEcm9wKGV2ZW50KSI+PC91bD4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9InRvZG8tYm94IHRvZG8tZGVsZWdhdGUiPgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0idG9kby1oZWFkZXIiPjxoMyBzdHlsZT0iY29sb3I6dmFyKC0td2FybmluZykiPkEgREVMRUdVRVI8L2gzPjwvZGl2PgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0idG9kby1pbnB1dC1ncm91cCI+PGlucHV0IHR5cGU9InRleHQiIGlkPSJ0b2RvLWlucHV0LWRlbGVnYXRlIiBwbGFjZWhvbGRlcj0iQWpvdXRlci4uLiIgb25rZXlwcmVzcz0iaGFuZGxlRW50ZXIoZXZlbnQsICdkZWxlZ2F0ZScpIj48YnV0dG9uIGNsYXNzPSJidG4gYnRuLWRhcmsgYnRuLXNtIiBzdHlsZT0iYmFja2dyb3VuZDp2YXIoLS13YXJuaW5nKTtib3JkZXI6bm9uZSIgb25jbGljaz0iYWRkVG9kbygnZGVsZWdhdGUnKSI+KzwvYnV0dG9uPjwvZGl2PgogICAgICAgICAgICAgICAgPHVsIGNsYXNzPSJ0b2RvLWxpc3QiIGlkPSJsaXN0LWRlbGVnYXRlIiBvbmRyb3A9ImRyb3AoZXZlbnQsICdkZWxlZ2F0ZScpIiBvbmRyYWdvdmVyPSJhbGxvd0Ryb3AoZXZlbnQpIj48L3VsPgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICA8L2Rpdj4KICAgIDwvZGl2PgoKICAgIDxkaXYgaWQ9Im1lbnUzIiBjbGFzcz0ic2VjdGlvbiI+CiAgICAgICAgPCEtLSBDYWxlbmRyaWVyIFVuaWZpw6kgVjEyLjEzIC0tPgogICAgICAgIDxkaXYgY2xhc3M9InVjYWwtaGVhZGVyIj4KICAgICAgICAgICAgPGJ1dHRvbiBvbmNsaWNrPSJ1Y2FsUHJldigpIiBjbGFzcz0idWNhbC1uYXYtYnRuIj48aSBjbGFzcz0iZmFzIGZhLWNoZXZyb24tbGVmdCI+PC9pPjwvYnV0dG9uPgogICAgICAgICAgICA8aDMgY2xhc3M9InVjYWwtdGl0bGUiIGlkPSJ1Y2FsLXRpdGxlIj7igJQ8L2gzPgogICAgICAgICAgICA8YnV0dG9uIG9uY2xpY2s9InVjYWxOZXh0KCkiIGNsYXNzPSJ1Y2FsLW5hdi1idG4iPjxpIGNsYXNzPSJmYXMgZmEtY2hldnJvbi1yaWdodCI+PC9pPjwvYnV0dG9uPgogICAgICAgICAgICA8YnV0dG9uIG9uY2xpY2s9InVjYWxUb2RheSgpIiBjbGFzcz0idWNhbC1idG4tdG9kYXkiPkF1am91cmQnaHVpPC9idXR0b24+CiAgICAgICAgICAgIDxkaXYgc3R5bGU9ImZsZXg6MSI+PC9kaXY+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9InVjYWwtbGVnZW5kIiBpZD0idWNhbC1sZWdlbmQiPjwvZGl2PgogICAgICAgICAgICA8YnV0dG9uIG9uY2xpY2s9Im9wZW5VY2FsQWRkTW9kYWwoKSIgY2xhc3M9InVjYWwtYnRuLWFkZCI+PGkgY2xhc3M9ImZhcyBmYS1wbHVzIj48L2k+IEFqb3V0ZXI8L2J1dHRvbj4KICAgICAgICAgICAgPGJ1dHRvbiBvbmNsaWNrPSJ1Y2FsUmVmcmVzaCgpIiBjbGFzcz0idWNhbC1idG4tcmVmcmVzaCIgdGl0bGU9IlN5bmNocm9uaXNlciBHb29nbGUgQWdlbmRhIj48aSBjbGFzcz0iZmFzIGZhLXN5bmMiPjwvaT48L2J1dHRvbj4KICAgICAgICA8L2Rpdj4KICAgICAgICA8ZGl2IGlkPSJ1Y2FsLWJvZHkiPjwvZGl2PgoKICAgICAgICA8IS0tIE1vZGFsIEFqb3V0L0VkaXQgw6l2w6luZW1lbnQgLS0+CiAgICAgICAgPGRpdiBpZD0idWNhbE1vZGFsIiBjbGFzcz0ibS1vdiIgb25jbGljaz0iaWYoZXZlbnQudGFyZ2V0PT09dGhpcyljbG9zZVVjYWxNb2RhbCgpIiBzdHlsZT0iZGlzcGxheTpub25lIj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0ibS1ib3giIHN0eWxlPSJ3aWR0aDo0ODBweDsiPgogICAgICAgICAgICAgICAgPGgzPjxpIGNsYXNzPSJmYXMgZmEtY2FsZW5kYXItcGx1cyI+PC9pPiA8c3BhbiBpZD0idWNhbC1tb2RhbC10aXRsZSI+Tm91dmVsIMOpdsOpbmVtZW50PC9zcGFuPjwvaDM+CiAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0iaGlkZGVuIiBpZD0idWNhbC1laWQiPgogICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9ImhpZGRlbiIgaWQ9InVjYWwtZXNyYyI+CiAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0iaGlkZGVuIiBpZD0idWNhbC1lY2FsaWQiPgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ibS1yb3ciPgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAiPjxsYWJlbD5EYXRlICo8L2xhYmVsPjxpbnB1dCB0eXBlPSJkYXRlIiBpZD0idWNhbC1kYXRlIiBjbGFzcz0iZm9ybS1jb250cm9sIj48L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWdyb3VwIj48bGFiZWw+SGV1cmUgZMOpYnV0PC9sYWJlbD48aW5wdXQgdHlwZT0idGltZSIgaWQ9InVjYWwtdGltZSIgY2xhc3M9ImZvcm0tY29udHJvbCI+PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1ncm91cCI+PGxhYmVsPkhldXJlIGZpbjwvbGFiZWw+PGlucHV0IHR5cGU9InRpbWUiIGlkPSJ1Y2FsLWVuZHRpbWUiIGNsYXNzPSJmb3JtLWNvbnRyb2wiPjwvZGl2PgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWdyb3VwIiBzdHlsZT0ibWFyZ2luLWJvdHRvbToxMHB4Ij48bGFiZWw+SW50aXR1bMOpICo8L2xhYmVsPjxpbnB1dCB0eXBlPSJ0ZXh0IiBpZD0idWNhbC10YXNrIiBjbGFzcz0iZm9ybS1jb250cm9sIiBwbGFjZWhvbGRlcj0iRXg6IENvbnNlaWwgZGUgY2xhc3NlIFQzIj48L2Rpdj4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAiIHN0eWxlPSJtYXJnaW4tYm90dG9tOjE0cHgiIGlkPSJ1Y2FsLWRlc3Qtd3JhcCI+CiAgICAgICAgICAgICAgICAgICAgPGxhYmVsPkVucmVnaXN0cmVyIGRhbnM8L2xhYmVsPgogICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9ImRpc3BsYXk6ZmxleDtnYXA6OHB4O2ZsZXgtd3JhcDp3cmFwIiBpZD0idWNhbC1kZXN0LWJ0bnMiPgogICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9InVjYWwtZGVzdC1vcHQgYWN0aXZlIiBkYXRhLWRlc3Q9ImxvY2FsIj48aW5wdXQgdHlwZT0icmFkaW8iIG5hbWU9InVjYWwtZGVzdCIgdmFsdWU9ImxvY2FsIiBjaGVja2VkPjxpIGNsYXNzPSJmYXMgZmEtZGF0YWJhc2UiIHN0eWxlPSJjb2xvcjojMzQ5OGRiIj48L2k+IEFnZW5kYSBsb2NhbDwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz0idWNhbC1kZXN0LW9wdCIgZGF0YS1kZXN0PSJnY2FsIj48aW5wdXQgdHlwZT0icmFkaW8iIG5hbWU9InVjYWwtZGVzdCIgdmFsdWU9ImdjYWwiPjxpIGNsYXNzPSJmYWIgZmEtZ29vZ2xlIiBzdHlsZT0iY29sb3I6IzQyODVmNCI+PC9pPiBHb29nbGUgQWdlbmRhPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPSJ1Y2FsLWRlc3Qtb3B0IiBkYXRhLWRlc3Q9Im91dGxvb2siIHN0eWxlPSJkaXNwbGF5Om5vbmUiPjxpbnB1dCB0eXBlPSJyYWRpbyIgbmFtZT0idWNhbC1kZXN0IiB2YWx1ZT0ib3V0bG9vayI+PGkgY2xhc3M9ImZhYiBmYS1taWNyb3NvZnQiIHN0eWxlPSJjb2xvcjojMDA3OGQ0Ij48L2k+IE91dGxvb2s8L2xhYmVsPgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgIDxzZWxlY3QgaWQ9InVjYWwtZ2NhbC10YXJnZXQiIGNsYXNzPSJmb3JtLWNvbnRyb2wiIHN0eWxlPSJkaXNwbGF5Om5vbmU7bWFyZ2luLXRvcDo2cHg7Zm9udC1zaXplOi43OHJlbTsiPgogICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSIiPuKAlCBDaG9pc2lyIHVuIGFnZW5kYSDigJQ8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICA8L3NlbGVjdD4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ic2F2ZS1iYXIiPgogICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImJ0biIgb25jbGljaz0iY2xvc2VVY2FsTW9kYWwoKSIgc3R5bGU9ImJhY2tncm91bmQ6I2VlZTtjb2xvcjojNTU1O21hcmdpbi1yaWdodDo4cHg7Ij5Bbm51bGVyPC9idXR0b24+CiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYnRuIGJ0bi1hY2NlbnQiIG9uY2xpY2s9InNhdmVVY2FsRXZlbnQoKSI+PGkgY2xhc3M9ImZhcyBmYS1zYXZlIj48L2k+IEVucmVnaXN0cmVyPC9idXR0b24+CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgPC9kaXY+CiAgICA8L2Rpdj4KCiAgICA8ZGl2IGlkPSJtZW51NCIgY2xhc3M9InNlY3Rpb24iPgogICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tY2FyZCI+CiAgICAgICAgICAgIDxkaXYgc3R5bGU9ImRpc3BsYXk6ZmxleDsganVzdGlmeS1jb250ZW50OnNwYWNlLWJldHdlZW47IGFsaWduLWl0ZW1zOmNlbnRlcjsiPgogICAgICAgICAgICAgICAgPGgzIHN0eWxlPSJjb2xvcjp2YXIoLS1wcmltYXJ5KSI+UsOpdW5pb24gZGUgRGlyZWN0aW9uPC9oMz4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImFjdGlvbi1yb3ciPgogICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImJ0biBidG4td2FybmluZyBidG4tc20iIG9uY2xpY2s9InJhelBhZ2UoJ0RJUicpIj48aSBjbGFzcz0iZmFzIGZhLWVyYXNlciI+PC9pPiBSQVo8L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJidG4gYnRuLXdvcmQgYnRuLXNtIiBvbmNsaWNrPSJleHBvcnREb2NXb3JkKCdQUkVQX0RJUicpIj48aSBjbGFzcz0iZmFzIGZhLWZpbGUtd29yZCI+PC9pPiBXb3JkPC9idXR0b24+CiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYnRuIGJ0bi1kYXJrIGJ0bi1zbSIgb25jbGljaz0icHJpbnRDdXJyZW50Rm9ybSgnUFJFUF9ESVInKSI+PGkgY2xhc3M9ImZhcyBmYS1wcmludCI+PC9pPiBQREY8L2J1dHRvbj4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1ncmlkIiBzdHlsZT0ibWFyZ2luLXRvcDoxNXB4OyI+PGRpdiBjbGFzcz0iZm9ybS1ncm91cCI+PGxhYmVsPkRhdGU8L2xhYmVsPjxpbnB1dCB0eXBlPSJkYXRlIiBpZD0iZGlyLWRhdGUiIGNsYXNzPSJmb3JtLWNvbnRyb2wiPjwvZGl2PjxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAiPjxsYWJlbD5QYXJ0aWNpcGFudHM8L2xhYmVsPjxpbnB1dCB0eXBlPSJ0ZXh0IiBpZD0iZGlyLXBhcnRzIiBjbGFzcz0iZm9ybS1jb250cm9sIiBwbGFjZWhvbGRlcj0iQWRqLCBDUEUsIERERlBULi4uIj48L2Rpdj48L2Rpdj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1mdWxsIj48bGFiZWwgc3R5bGU9ImNvbG9yOnZhcigtLXByaW1hcnkpOyBmb250LXNpemU6MXJlbTsgYm9yZGVyLWJvdHRvbToycHggc29saWQgI2VlZTsgcGFkZGluZy1ib3R0b206NXB4OyBtYXJnaW4tYm90dG9tOjEwcHg7Ij48aSBjbGFzcz0iZmFzIGZhLWxpc3QtdWwiPjwvaT4gUHLDqXBhcmF0aW9uIDogVGjDqG1lcyAmIFN1amV0czwvbGFiZWw+PGRpdiBjbGFzcz0icnRlLXdyYXAiPjxkaXYgY2xhc3M9InJ0ZS1iYXIiPgo8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0iZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2JvbGQnKSIgdGl0bGU9IkdyYXMiPjxiPkc8L2I+PC9idXR0b24+CjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJkb2N1bWVudC5leGVjQ29tbWFuZCgnaXRhbGljJykiIHRpdGxlPSJJdGFsaXF1ZSI+PGk+STwvaT48L2J1dHRvbj4KPGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9ImRvY3VtZW50LmV4ZWNDb21tYW5kKCd1bmRlcmxpbmUnKSIgdGl0bGU9IlNvdWxpZ27DqSI+PHU+UzwvdT48L2J1dHRvbj4KPHNwYW4gY2xhc3M9InJ0ZS1zZXAiPjwvc3Bhbj4KPGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9ImRvY3VtZW50LmV4ZWNDb21tYW5kKCdpbnNlcnRVbm9yZGVyZWRMaXN0JykiIHRpdGxlPSJMaXN0ZSDDoCBwdWNlcyI+PGkgY2xhc3M9ImZhcyBmYS1saXN0LXVsIj48L2k+PC9idXR0b24+CjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJkb2N1bWVudC5leGVjQ29tbWFuZCgnaW5zZXJ0T3JkZXJlZExpc3QnKSIgdGl0bGU9Ikxpc3RlIG51bcOpcm90w6llIj48aSBjbGFzcz0iZmFzIGZhLWxpc3Qtb2wiPjwvaT48L2J1dHRvbj4KPHNwYW4gY2xhc3M9InJ0ZS1zZXAiPjwvc3Bhbj4KPGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9InJ0ZUNvbG9yKHRoaXMpIiB0aXRsZT0iQ291bGV1ciI+PGkgY2xhc3M9ImZhcyBmYS1wYWxldHRlIj48L2k+PC9idXR0b24+CjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJydGVMaW5rKHRoaXMpIiB0aXRsZT0iTGllbiI+PGkgY2xhc3M9ImZhcyBmYS1saW5rIj48L2k+PC9idXR0b24+CjxzcGFuIGNsYXNzPSJydGUtc2VwIj48L3NwYW4+CjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJkb2N1bWVudC5leGVjQ29tbWFuZCgndW5kbycpIiB0aXRsZT0iQW5udWxlciI+PGkgY2xhc3M9ImZhcyBmYS11bmRvIj48L2k+PC9idXR0b24+CjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJkb2N1bWVudC5leGVjQ29tbWFuZCgncmVkbycpIiB0aXRsZT0iUmVzdGF1cmVyIj48aSBjbGFzcz0iZmFzIGZhLXJlZG8iPjwvaT48L2J1dHRvbj48c3BhbiBjbGFzcz0icnRlLXNlcCI+PC9zcGFuPjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJydGVJbnNlcnRMb2dvKCkiIHRpdGxlPSJJbnPDqXJlciBsZSBsb2dvIj48aSBjbGFzcz0iZmFzIGZhLXN0YW1wIiBzdHlsZT0iY29sb3I6I2U2N2UyMiI+PC9pPjwvYnV0dG9uPgo8c3BhbiBjbGFzcz0icnRlLXNlcCI+PC9zcGFuPjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJkb2N1bWVudC5leGVjQ29tbWFuZCgnanVzdGlmeUxlZnQnKSIgdGl0bGU9IkFsaWduZXIgw6AgZ2F1Y2hlIj48aSBjbGFzcz0iZmFzIGZhLWFsaWduLWxlZnQiPjwvaT48L2J1dHRvbj48YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0iZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2p1c3RpZnlDZW50ZXInKSIgdGl0bGU9IkNlbnRyZXIiPjxpIGNsYXNzPSJmYXMgZmEtYWxpZ24tY2VudGVyIj48L2k+PC9idXR0b24+PGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9ImRvY3VtZW50LmV4ZWNDb21tYW5kKCdqdXN0aWZ5RnVsbCcpIiB0aXRsZT0iSnVzdGlmaWVyIj48aSBjbGFzcz0iZmFzIGZhLWFsaWduLWp1c3RpZnkiPjwvaT48L2J1dHRvbj48YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0icGFzdGVGcm9tV29yZCgpIiB0aXRsZT0iQ29sbGVyIGRlcHVpcyBXb3JkIGVuIGNvbnNlcnZhbnQgbGEgbWlzZSBlbiBwYWdlIiBzdHlsZT0ibWFyZ2luLWxlZnQ6NnB4O2JhY2tncm91bmQ6IzJiNTc5YTtjb2xvcjp3aGl0ZTtib3JkZXItcmFkaXVzOjRweDtwYWRkaW5nOjJweCA4cHg7Zm9udC1zaXplOi42OHJlbTtib3JkZXI6bm9uZTtjdXJzb3I6cG9pbnRlcjtmb250LWZhbWlseTppbmhlcml0O2Rpc3BsYXk6aW5saW5lLWZsZXg7YWxpZ24taXRlbXM6Y2VudGVyO2dhcDozcHg7dmVydGljYWwtYWxpZ246bWlkZGxlOyI+PGkgY2xhc3M9ImZhcyBmYS1maWxlLXdvcmQiPjwvaT7CoFdvcmQ8L2J1dHRvbj4KPC9kaXY+PGRpdiBpZD0iZGlyLWNvbnRlbnUiIGNsYXNzPSJkb2MtZWRpdG9yIiBjb250ZW50ZWRpdGFibGU9InRydWUiPjwvZGl2PjwvZGl2PjwvZGl2PgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWZ1bGwiIHN0eWxlPSJtYXJnaW4tdG9wOiAzMHB4OyI+PGxhYmVsIHN0eWxlPSJjb2xvcjp2YXIoLS1hY2NlbnQpOyBmb250LXNpemU6MXJlbTsgYm9yZGVyLWJvdHRvbToycHggc29saWQgI2VlZTsgcGFkZGluZy1ib3R0b206NXB4OyBtYXJnaW4tYm90dG9tOjEwcHg7Ij48aSBjbGFzcz0iZmFzIGZhLXBlbi1hbHQiPjwvaT4gU8OpYW5jZSA6IE5vdGVzICYgRMOpY2lzaW9uczwvbGFiZWw+PGRpdiBjbGFzcz0icnRlLXdyYXAiPjxkaXYgY2xhc3M9InJ0ZS1iYXIiPgo8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0iZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2JvbGQnKSIgdGl0bGU9IkdyYXMiPjxiPkc8L2I+PC9idXR0b24+CjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJkb2N1bWVudC5leGVjQ29tbWFuZCgnaXRhbGljJykiIHRpdGxlPSJJdGFsaXF1ZSI+PGk+STwvaT48L2J1dHRvbj4KPGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9ImRvY3VtZW50LmV4ZWNDb21tYW5kKCd1bmRlcmxpbmUnKSIgdGl0bGU9IlNvdWxpZ27DqSI+PHU+UzwvdT48L2J1dHRvbj4KPHNwYW4gY2xhc3M9InJ0ZS1zZXAiPjwvc3Bhbj4KPGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9ImRvY3VtZW50LmV4ZWNDb21tYW5kKCdpbnNlcnRVbm9yZGVyZWRMaXN0JykiIHRpdGxlPSJMaXN0ZSDDoCBwdWNlcyI+PGkgY2xhc3M9ImZhcyBmYS1saXN0LXVsIj48L2k+PC9idXR0b24+CjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJkb2N1bWVudC5leGVjQ29tbWFuZCgnaW5zZXJ0T3JkZXJlZExpc3QnKSIgdGl0bGU9Ikxpc3RlIG51bcOpcm90w6llIj48aSBjbGFzcz0iZmFzIGZhLWxpc3Qtb2wiPjwvaT48L2J1dHRvbj4KPHNwYW4gY2xhc3M9InJ0ZS1zZXAiPjwvc3Bhbj4KPGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9InJ0ZUNvbG9yKHRoaXMpIiB0aXRsZT0iQ291bGV1ciI+PGkgY2xhc3M9ImZhcyBmYS1wYWxldHRlIj48L2k+PC9idXR0b24+CjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJydGVMaW5rKHRoaXMpIiB0aXRsZT0iTGllbiI+PGkgY2xhc3M9ImZhcyBmYS1saW5rIj48L2k+PC9idXR0b24+CjxzcGFuIGNsYXNzPSJydGUtc2VwIj48L3NwYW4+CjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJkb2N1bWVudC5leGVjQ29tbWFuZCgndW5kbycpIiB0aXRsZT0iQW5udWxlciI+PGkgY2xhc3M9ImZhcyBmYS11bmRvIj48L2k+PC9idXR0b24+CjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJkb2N1bWVudC5leGVjQ29tbWFuZCgncmVkbycpIiB0aXRsZT0iUmVzdGF1cmVyIj48aSBjbGFzcz0iZmFzIGZhLXJlZG8iPjwvaT48L2J1dHRvbj48c3BhbiBjbGFzcz0icnRlLXNlcCI+PC9zcGFuPjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJydGVJbnNlcnRMb2dvKCkiIHRpdGxlPSJJbnPDqXJlciBsZSBsb2dvIj48aSBjbGFzcz0iZmFzIGZhLXN0YW1wIiBzdHlsZT0iY29sb3I6I2U2N2UyMiI+PC9pPjwvYnV0dG9uPgo8c3BhbiBjbGFzcz0icnRlLXNlcCI+PC9zcGFuPjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJkb2N1bWVudC5leGVjQ29tbWFuZCgnanVzdGlmeUxlZnQnKSIgdGl0bGU9IkFsaWduZXIgw6AgZ2F1Y2hlIj48aSBjbGFzcz0iZmFzIGZhLWFsaWduLWxlZnQiPjwvaT48L2J1dHRvbj48YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0iZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2p1c3RpZnlDZW50ZXInKSIgdGl0bGU9IkNlbnRyZXIiPjxpIGNsYXNzPSJmYXMgZmEtYWxpZ24tY2VudGVyIj48L2k+PC9idXR0b24+PGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9ImRvY3VtZW50LmV4ZWNDb21tYW5kKCdqdXN0aWZ5RnVsbCcpIiB0aXRsZT0iSnVzdGlmaWVyIj48aSBjbGFzcz0iZmFzIGZhLWFsaWduLWp1c3RpZnkiPjwvaT48L2J1dHRvbj48YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0icGFzdGVGcm9tV29yZCgpIiB0aXRsZT0iQ29sbGVyIGRlcHVpcyBXb3JkIGVuIGNvbnNlcnZhbnQgbGEgbWlzZSBlbiBwYWdlIiBzdHlsZT0ibWFyZ2luLWxlZnQ6NnB4O2JhY2tncm91bmQ6IzJiNTc5YTtjb2xvcjp3aGl0ZTtib3JkZXItcmFkaXVzOjRweDtwYWRkaW5nOjJweCA4cHg7Zm9udC1zaXplOi42OHJlbTtib3JkZXI6bm9uZTtjdXJzb3I6cG9pbnRlcjtmb250LWZhbWlseTppbmhlcml0O2Rpc3BsYXk6aW5saW5lLWZsZXg7YWxpZ24taXRlbXM6Y2VudGVyO2dhcDozcHg7dmVydGljYWwtYWxpZ246bWlkZGxlOyI+PGkgY2xhc3M9ImZhcyBmYS1maWxlLXdvcmQiPjwvaT7CoFdvcmQ8L2J1dHRvbj4KPC9kaXY+PGRpdiBpZD0iZGlyLW5vdGVzIiBjbGFzcz0iZG9jLWVkaXRvciBub3Rlcy1lZGl0b3IiIGNvbnRlbnRlZGl0YWJsZT0idHJ1ZSI+PC9kaXY+PC9kaXY+PC9kaXY+CiAgICAgICAgICAgIAogICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWZ1bGwgYXR0YWNobWVudHMtYXJlYSI+CiAgICAgICAgICAgICAgICA8bGFiZWw+PGkgY2xhc3M9ImZhcyBmYS1wYXBlcmNsaXAiPjwvaT4gUGnDqGNlcyBqb2ludGVzIC8gRG9jdW1lbnRzIGxpw6lzPC9sYWJlbD4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZpbGUtd2FybmluZyI+TGltaXRlIGNvbnNlaWxsw6llIDogZmljaGllcnMgbMOpZ2VycyBvdSBsaWVucy4gR3JvcyBmaWNoaWVycyA9IHJpc3F1ZSBkZSByYWxlbnRpc3NlbWVudC48L2Rpdj4KICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJmaWxlIiBpZD0iZGlyLWZpbGUtaW5wdXQiIGNsYXNzPSJmb3JtLWNvbnRyb2wiIG9uY2hhbmdlPSJhZGRBdHRhY2htZW50KCdkaXItYXR0YWNobWVudHMnLCB0aGlzKSI+CiAgICAgICAgICAgICAgICA8dWwgaWQ9ImRpci1hdHRhY2htZW50cyIgY2xhc3M9ImF0dGFjaG1lbnQtbGlzdCI+PC91bD4KICAgICAgICAgICAgPC9kaXY+CgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJzYXZlLWJhciI+PGJ1dHRvbiBpZD0iYnRuLXNhdmUtZGlyIiBjbGFzcz0iYnRuIGJ0bi1wcmltYXJ5IiBvbmNsaWNrPSJzYXZlUHJlcERpcmVjdGlvbigpIj48aSBjbGFzcz0iZmFzIGZhLXNhdmUiIHN0eWxlPSJtYXJnaW4tcmlnaHQ6NnB4Ij48L2k+RW5yZWdpc3RyZXIgKEhpc3RvcmlxdWUpPC9idXR0b24+PC9kaXY+CiAgICAgICAgPC9kaXY+CiAgICA8L2Rpdj4KCiAgICA8ZGl2IGlkPSJtZW51NSIgY2xhc3M9InNlY3Rpb24iPgogICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tY2FyZCI+CiAgICAgICAgICAgIDxkaXYgc3R5bGU9ImRpc3BsYXk6ZmxleDsganVzdGlmeS1jb250ZW50OnNwYWNlLWJldHdlZW47IGFsaWduLWl0ZW1zOmNlbnRlcjsiPgogICAgICAgICAgICAgICAgPGgzIHN0eWxlPSJjb2xvcjp2YXIoLS1pbmZvKSI+U3Vpdmkgw4lsw6h2ZSAvIFBvaW50IENQRTwvaDM+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJhY3Rpb24tcm93Ij4KICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJidG4gYnRuLXdhcm5pbmcgYnRuLXNtIiBvbmNsaWNrPSJyYXpQYWdlKCdTVUlWSScpIj48aSBjbGFzcz0iZmFzIGZhLWVyYXNlciI+PC9pPiBSQVo8L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJidG4gYnRuLXdvcmQgYnRuLXNtIiBvbmNsaWNrPSJleHBvcnREb2NXb3JkKCdTVUlWSScpIj48aSBjbGFzcz0iZmFzIGZhLWZpbGUtd29yZCI+PC9pPiBXb3JkPC9idXR0b24+CiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYnRuIGJ0bi1kYXJrIGJ0bi1zbSIgb25jbGljaz0icHJpbnRDdXJyZW50Rm9ybSgnU1VJVkknKSI+PGkgY2xhc3M9ImZhcyBmYS1wcmludCI+PC9pPiBQREY8L2J1dHRvbj4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1ncmlkIiBzdHlsZT0ibWFyZ2luLXRvcDoxNXB4OyI+PGRpdiBjbGFzcz0iZm9ybS1ncm91cCI+PGxhYmVsPkRhdGU8L2xhYmVsPjxpbnB1dCB0eXBlPSJkYXRlIiBpZD0ic3VpdmktZGF0ZSIgY2xhc3M9ImZvcm0tY29udHJvbCI+PC9kaXY+PGRpdiBjbGFzcz0iZm9ybS1ncm91cCI+PGxhYmVsPlBhcnRpY2lwYW50cyAoQ1BFLCBQcm9mcy4uLik8L2xhYmVsPjxpbnB1dCB0eXBlPSJ0ZXh0IiBpZD0ic3VpdmktcGFydHMiIGNsYXNzPSJmb3JtLWNvbnRyb2wiPjwvZGl2PjxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAiPjxsYWJlbD5DbGFzc2VzIENvbmNlcm7DqWVzPC9sYWJlbD48aW5wdXQgdHlwZT0idGV4dCIgaWQ9InN1aXZpLWNsYXNzZXMiIGNsYXNzPSJmb3JtLWNvbnRyb2wiPjwvZGl2PjwvZGl2PgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWZ1bGwiPjxsYWJlbD5TaXR1YXRpb25zIMOpbMOodmVzIGFib3Jkw6llcyAoTm90ZXMpPC9sYWJlbD48ZGl2IGNsYXNzPSJydGUtd3JhcCI+PGRpdiBjbGFzcz0icnRlLWJhciI+CjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJkb2N1bWVudC5leGVjQ29tbWFuZCgnYm9sZCcpIiB0aXRsZT0iR3JhcyI+PGI+RzwvYj48L2J1dHRvbj4KPGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9ImRvY3VtZW50LmV4ZWNDb21tYW5kKCdpdGFsaWMnKSIgdGl0bGU9Ikl0YWxpcXVlIj48aT5JPC9pPjwvYnV0dG9uPgo8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0iZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ3VuZGVybGluZScpIiB0aXRsZT0iU291bGlnbsOpIj48dT5TPC91PjwvYnV0dG9uPgo8c3BhbiBjbGFzcz0icnRlLXNlcCI+PC9zcGFuPgo8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0iZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2luc2VydFVub3JkZXJlZExpc3QnKSIgdGl0bGU9Ikxpc3RlIMOgIHB1Y2VzIj48aSBjbGFzcz0iZmFzIGZhLWxpc3QtdWwiPjwvaT48L2J1dHRvbj4KPGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9ImRvY3VtZW50LmV4ZWNDb21tYW5kKCdpbnNlcnRPcmRlcmVkTGlzdCcpIiB0aXRsZT0iTGlzdGUgbnVtw6lyb3TDqWUiPjxpIGNsYXNzPSJmYXMgZmEtbGlzdC1vbCI+PC9pPjwvYnV0dG9uPgo8c3BhbiBjbGFzcz0icnRlLXNlcCI+PC9zcGFuPgo8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0icnRlQ29sb3IodGhpcykiIHRpdGxlPSJDb3VsZXVyIj48aSBjbGFzcz0iZmFzIGZhLXBhbGV0dGUiPjwvaT48L2J1dHRvbj4KPGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9InJ0ZUxpbmsodGhpcykiIHRpdGxlPSJMaWVuIj48aSBjbGFzcz0iZmFzIGZhLWxpbmsiPjwvaT48L2J1dHRvbj4KPHNwYW4gY2xhc3M9InJ0ZS1zZXAiPjwvc3Bhbj4KPGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9ImRvY3VtZW50LmV4ZWNDb21tYW5kKCd1bmRvJykiIHRpdGxlPSJBbm51bGVyIj48aSBjbGFzcz0iZmFzIGZhLXVuZG8iPjwvaT48L2J1dHRvbj4KPGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9ImRvY3VtZW50LmV4ZWNDb21tYW5kKCdyZWRvJykiIHRpdGxlPSJSZXN0YXVyZXIiPjxpIGNsYXNzPSJmYXMgZmEtcmVkbyI+PC9pPjwvYnV0dG9uPjxzcGFuIGNsYXNzPSJydGUtc2VwIj48L3NwYW4+PGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9InJ0ZUluc2VydExvZ28oKSIgdGl0bGU9Ikluc8OpcmVyIGxlIGxvZ28iPjxpIGNsYXNzPSJmYXMgZmEtc3RhbXAiIHN0eWxlPSJjb2xvcjojZTY3ZTIyIj48L2k+PC9idXR0b24+CjxzcGFuIGNsYXNzPSJydGUtc2VwIj48L3NwYW4+PGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9ImRvY3VtZW50LmV4ZWNDb21tYW5kKCdqdXN0aWZ5TGVmdCcpIiB0aXRsZT0iQWxpZ25lciDDoCBnYXVjaGUiPjxpIGNsYXNzPSJmYXMgZmEtYWxpZ24tbGVmdCI+PC9pPjwvYnV0dG9uPjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJkb2N1bWVudC5leGVjQ29tbWFuZCgnanVzdGlmeUNlbnRlcicpIiB0aXRsZT0iQ2VudHJlciI+PGkgY2xhc3M9ImZhcyBmYS1hbGlnbi1jZW50ZXIiPjwvaT48L2J1dHRvbj48YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0iZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2p1c3RpZnlGdWxsJykiIHRpdGxlPSJKdXN0aWZpZXIiPjxpIGNsYXNzPSJmYXMgZmEtYWxpZ24tanVzdGlmeSI+PC9pPjwvYnV0dG9uPjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJwYXN0ZUZyb21Xb3JkKCkiIHRpdGxlPSJDb2xsZXIgZGVwdWlzIFdvcmQgZW4gY29uc2VydmFudCBsYSBtaXNlIGVuIHBhZ2UiIHN0eWxlPSJtYXJnaW4tbGVmdDo2cHg7YmFja2dyb3VuZDojMmI1NzlhO2NvbG9yOndoaXRlO2JvcmRlci1yYWRpdXM6NHB4O3BhZGRpbmc6MnB4IDhweDtmb250LXNpemU6LjY4cmVtO2JvcmRlcjpub25lO2N1cnNvcjpwb2ludGVyO2ZvbnQtZmFtaWx5OmluaGVyaXQ7ZGlzcGxheTppbmxpbmUtZmxleDthbGlnbi1pdGVtczpjZW50ZXI7Z2FwOjNweDt2ZXJ0aWNhbC1hbGlnbjptaWRkbGU7Ij48aSBjbGFzcz0iZmFzIGZhLWZpbGUtd29yZCI+PC9pPsKgV29yZDwvYnV0dG9uPgo8L2Rpdj48ZGl2IGlkPSJzdWl2aS1jb250ZW51IiBjbGFzcz0iZG9jLWVkaXRvciIgY29udGVudGVkaXRhYmxlPSJ0cnVlIj48L2Rpdj48L2Rpdj48L2Rpdj4KICAgICAgICAgICAgCiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZnVsbCBhdHRhY2htZW50cy1hcmVhIj4KICAgICAgICAgICAgICAgIDxsYWJlbD48aSBjbGFzcz0iZmFzIGZhLXBhcGVyY2xpcCI+PC9pPiBQacOoY2VzIGpvaW50ZXM8L2xhYmVsPgogICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9ImZpbGUiIGlkPSJzdWl2aS1maWxlLWlucHV0IiBjbGFzcz0iZm9ybS1jb250cm9sIiBvbmNoYW5nZT0iYWRkQXR0YWNobWVudCgnc3VpdmktYXR0YWNobWVudHMnLCB0aGlzKSI+CiAgICAgICAgICAgICAgICA8dWwgaWQ9InN1aXZpLWF0dGFjaG1lbnRzIiBjbGFzcz0iYXR0YWNobWVudC1saXN0Ij48L3VsPgogICAgICAgICAgICA8L2Rpdj4KCiAgICAgICAgICAgIDxkaXYgY2xhc3M9InNhdmUtYmFyIj48YnV0dG9uIGlkPSJidG4tc2F2ZS1zdWl2aSIgY2xhc3M9ImJ0biBidG4taW5mbyIgb25jbGljaz0ic2F2ZVN1aXZpRWxldmUoKSI+PGkgY2xhc3M9ImZhcyBmYS1zYXZlIiBzdHlsZT0ibWFyZ2luLXJpZ2h0OjZweCI+PC9pPkVucmVnaXN0cmVyIChIaXN0b3JpcXVlKTwvYnV0dG9uPjwvZGl2PgogICAgICAgIDwvZGl2PgogICAgPC9kaXY+CgogICAgPGRpdiBpZD0ibWVudTYiIGNsYXNzPSJzZWN0aW9uIj4KICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWNhcmQiPgogICAgICAgICAgICA8ZGl2IHN0eWxlPSJkaXNwbGF5OmZsZXg7IGp1c3RpZnktY29udGVudDpzcGFjZS1iZXR3ZWVuOyBhbGlnbi1pdGVtczpjZW50ZXI7Ij4KICAgICAgICAgICAgICAgIDxoMyBzdHlsZT0iY29sb3I6dmFyKC0tYWNjZW50KSI+U2Fpc2lyIHVuIEVudHJldGllbjwvaDM+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJhY3Rpb24tcm93Ij4KICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJidG4gYnRuLXdhcm5pbmcgYnRuLXNtIiBvbmNsaWNrPSJyYXpQYWdlKCdFTlQnKSI+PGkgY2xhc3M9ImZhcyBmYS1lcmFzZXIiPjwvaT4gUkFaPC9idXR0b24+CiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYnRuIGJ0bi13b3JkIGJ0bi1zbSIgb25jbGljaz0iZXhwb3J0RG9jV29yZCgnRU5UJykiPjxpIGNsYXNzPSJmYXMgZmEtZmlsZS13b3JkIj48L2k+IFdvcmQ8L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJidG4gYnRuLWRhcmsgYnRuLXNtIiBvbmNsaWNrPSJwcmludEN1cnJlbnRGb3JtKCdFTlQnKSI+PGkgY2xhc3M9ImZhcyBmYS1wcmludCI+PC9pPiBQREY8L2J1dHRvbj4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1ncmlkIiBzdHlsZT0ibWFyZ2luLXRvcDoxNXB4OyI+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWdyb3VwIj48bGFiZWw+RGF0ZTwvbGFiZWw+PGlucHV0IHR5cGU9ImRhdGUiIGlkPSJlbnQtZGF0ZSIgY2xhc3M9ImZvcm0tY29udHJvbCI+PC9kaXY+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWdyb3VwIj4KICAgICAgICAgICAgICAgICAgICA8bGFiZWw+VHlwZTwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iZGlzcGxheTpmbGV4OyBnYXA6NXB4OyI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxzZWxlY3QgaWQ9ImVudC10eXBlIiBjbGFzcz0iZm9ybS1jb250cm9sIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24+RW50cmV0aWVuIFJIIC8gUGVyc29ubmVsPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uPlJlbmRlei12b3VzIEZhbWlsbGU8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24+U3Vpdmkgw4lsw6h2ZTwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbj5QYXJ0ZW5haXJlczwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbj5JbnNwZWN0aW9uPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uPkF1dHJlPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvc2VsZWN0PgogICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJidG4gYnRuLXByaW1hcnkgYnRuLWljb24iIG9uY2xpY2s9ImFkZEN1c3RvbVR5cGUoJ2VudC10eXBlJykiPjxpIGNsYXNzPSJmYXMgZmEtcGx1cyI+PC9pPjwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8ZGl2IHN0eWxlPSJkaXNwbGF5OmZsZXg7Z2FwOjE1cHg7ZmxleC13cmFwOndyYXA7Ij4KICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9ImZsZXg6MTttaW4td2lkdGg6MjUwcHg7YmFja2dyb3VuZDojZjlmOWY5O3BhZGRpbmc6MTVweDtib3JkZXItcmFkaXVzOjVweDtib3JkZXItbGVmdDozcHggc29saWQgI2U2N2UyMjsiPgogICAgICAgICAgICAgICAgICAgIDxsYWJlbD48aSBjbGFzcz0iZmFzIGZhLXVzZXItZ3JhZHVhdGUiIHN0eWxlPSJjb2xvcjojZTY3ZTIyO21hcmdpbi1yaWdodDo0cHgiPjwvaT4gw4lsw6h2ZXMgY29uY2VybsOpczwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBpZD0iZW50LXN0dWRlbnRzLWNvbnRhaW5lciI+PGRpdiBjbGFzcz0ibXVsdGktcm93IGVudC1zdHVkZW50Ij48aW5wdXQgdHlwZT0idGV4dCIgY2xhc3M9ImZvcm0tY29udHJvbCBuYW1lIiBwbGFjZWhvbGRlcj0iTm9tIFByw6lub20iPjxidXR0b24gY2xhc3M9ImJ0biBidG4tZGFuZ2VyIGJ0bi1pY29uIiBvbmNsaWNrPSJ0aGlzLnBhcmVudEVsZW1lbnQucmVtb3ZlKCkiPjxpIGNsYXNzPSJmYXMgZmEtdGltZXMiPjwvaT48L2J1dHRvbj48L2Rpdj48L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJidG4gYnRuLXNtIGJ0bi1zdWNjZXNzIiBvbmNsaWNrPSJhZGRNdWx0aVJvdygnZW50LXN0dWRlbnRzLWNvbnRhaW5lcicsICdlbnQtc3R1ZGVudCcsICdOb20gw4lsw6h2ZScpIj4rIMOJbMOodmU8L2J1dHRvbj4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iZmxleDoxO21pbi13aWR0aDoyNTBweDtiYWNrZ3JvdW5kOiNmOWY5Zjk7cGFkZGluZzoxNXB4O2JvcmRlci1yYWRpdXM6NXB4O2JvcmRlci1sZWZ0OjNweCBzb2xpZCAjMjk4MGI5OyI+CiAgICAgICAgICAgICAgICAgICAgPGxhYmVsPjxpIGNsYXNzPSJmYXMgZmEtY2hhbGtib2FyZC10ZWFjaGVyIiBzdHlsZT0iY29sb3I6IzI5ODBiOTttYXJnaW4tcmlnaHQ6NHB4Ij48L2k+IEVuc2VpZ25hbnRzIC8gUGVyc29ubmVsczwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBpZD0iZW50LXRlYWNoZXJzLWNvbnRhaW5lciI+PGRpdiBjbGFzcz0ibXVsdGktcm93IGVudC10ZWFjaGVyIj48aW5wdXQgdHlwZT0idGV4dCIgY2xhc3M9ImZvcm0tY29udHJvbCBuYW1lIiBwbGFjZWhvbGRlcj0iTm9tIFByw6lub20iPjxidXR0b24gY2xhc3M9ImJ0biBidG4tZGFuZ2VyIGJ0bi1pY29uIiBvbmNsaWNrPSJ0aGlzLnBhcmVudEVsZW1lbnQucmVtb3ZlKCkiPjxpIGNsYXNzPSJmYXMgZmEtdGltZXMiPjwvaT48L2J1dHRvbj48L2Rpdj48L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJidG4gYnRuLXNtIGJ0bi1zdWNjZXNzIiBvbmNsaWNrPSJhZGRNdWx0aVJvdygnZW50LXRlYWNoZXJzLWNvbnRhaW5lcicsICdlbnQtdGVhY2hlcicsICdOb20gUGVyc29ubmVsJykiPisgUGVyc29ubmVsPC9idXR0b24+CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZnVsbCI+PGxhYmVsPk9iamV0PC9sYWJlbD48aW5wdXQgdHlwZT0idGV4dCIgaWQ9ImVudC1vYmpldCIgY2xhc3M9ImZvcm0tY29udHJvbCI+PC9kaXY+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZnVsbCI+PGxhYmVsPkNvbXB0ZSBSZW5kdTwvbGFiZWw+PGRpdiBjbGFzcz0icnRlLXdyYXAiPjxkaXYgY2xhc3M9InJ0ZS1iYXIiPgo8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0iZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2JvbGQnKSIgdGl0bGU9IkdyYXMiPjxiPkc8L2I+PC9idXR0b24+CjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJkb2N1bWVudC5leGVjQ29tbWFuZCgnaXRhbGljJykiIHRpdGxlPSJJdGFsaXF1ZSI+PGk+STwvaT48L2J1dHRvbj4KPGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9ImRvY3VtZW50LmV4ZWNDb21tYW5kKCd1bmRlcmxpbmUnKSIgdGl0bGU9IlNvdWxpZ27DqSI+PHU+UzwvdT48L2J1dHRvbj4KPHNwYW4gY2xhc3M9InJ0ZS1zZXAiPjwvc3Bhbj4KPGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9ImRvY3VtZW50LmV4ZWNDb21tYW5kKCdpbnNlcnRVbm9yZGVyZWRMaXN0JykiIHRpdGxlPSJMaXN0ZSDDoCBwdWNlcyI+PGkgY2xhc3M9ImZhcyBmYS1saXN0LXVsIj48L2k+PC9idXR0b24+CjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJkb2N1bWVudC5leGVjQ29tbWFuZCgnaW5zZXJ0T3JkZXJlZExpc3QnKSIgdGl0bGU9Ikxpc3RlIG51bcOpcm90w6llIj48aSBjbGFzcz0iZmFzIGZhLWxpc3Qtb2wiPjwvaT48L2J1dHRvbj4KPHNwYW4gY2xhc3M9InJ0ZS1zZXAiPjwvc3Bhbj4KPGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9InJ0ZUNvbG9yKHRoaXMpIiB0aXRsZT0iQ291bGV1ciI+PGkgY2xhc3M9ImZhcyBmYS1wYWxldHRlIj48L2k+PC9idXR0b24+CjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJydGVMaW5rKHRoaXMpIiB0aXRsZT0iTGllbiI+PGkgY2xhc3M9ImZhcyBmYS1saW5rIj48L2k+PC9idXR0b24+CjxzcGFuIGNsYXNzPSJydGUtc2VwIj48L3NwYW4+CjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJkb2N1bWVudC5leGVjQ29tbWFuZCgndW5kbycpIiB0aXRsZT0iQW5udWxlciI+PGkgY2xhc3M9ImZhcyBmYS11bmRvIj48L2k+PC9idXR0b24+CjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJkb2N1bWVudC5leGVjQ29tbWFuZCgncmVkbycpIiB0aXRsZT0iUmVzdGF1cmVyIj48aSBjbGFzcz0iZmFzIGZhLXJlZG8iPjwvaT48L2J1dHRvbj48c3BhbiBjbGFzcz0icnRlLXNlcCI+PC9zcGFuPjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJydGVJbnNlcnRMb2dvKCkiIHRpdGxlPSJJbnPDqXJlciBsZSBsb2dvIj48aSBjbGFzcz0iZmFzIGZhLXN0YW1wIiBzdHlsZT0iY29sb3I6I2U2N2UyMiI+PC9pPjwvYnV0dG9uPgo8c3BhbiBjbGFzcz0icnRlLXNlcCI+PC9zcGFuPjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJkb2N1bWVudC5leGVjQ29tbWFuZCgnanVzdGlmeUxlZnQnKSIgdGl0bGU9IkFsaWduZXIgw6AgZ2F1Y2hlIj48aSBjbGFzcz0iZmFzIGZhLWFsaWduLWxlZnQiPjwvaT48L2J1dHRvbj48YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0iZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2p1c3RpZnlDZW50ZXInKSIgdGl0bGU9IkNlbnRyZXIiPjxpIGNsYXNzPSJmYXMgZmEtYWxpZ24tY2VudGVyIj48L2k+PC9idXR0b24+PGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9ImRvY3VtZW50LmV4ZWNDb21tYW5kKCdqdXN0aWZ5RnVsbCcpIiB0aXRsZT0iSnVzdGlmaWVyIj48aSBjbGFzcz0iZmFzIGZhLWFsaWduLWp1c3RpZnkiPjwvaT48L2J1dHRvbj48YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0icGFzdGVGcm9tV29yZCgpIiB0aXRsZT0iQ29sbGVyIGRlcHVpcyBXb3JkIGVuIGNvbnNlcnZhbnQgbGEgbWlzZSBlbiBwYWdlIiBzdHlsZT0ibWFyZ2luLWxlZnQ6NnB4O2JhY2tncm91bmQ6IzJiNTc5YTtjb2xvcjp3aGl0ZTtib3JkZXItcmFkaXVzOjRweDtwYWRkaW5nOjJweCA4cHg7Zm9udC1zaXplOi42OHJlbTtib3JkZXI6bm9uZTtjdXJzb3I6cG9pbnRlcjtmb250LWZhbWlseTppbmhlcml0O2Rpc3BsYXk6aW5saW5lLWZsZXg7YWxpZ24taXRlbXM6Y2VudGVyO2dhcDozcHg7dmVydGljYWwtYWxpZ246bWlkZGxlOyI+PGkgY2xhc3M9ImZhcyBmYS1maWxlLXdvcmQiPjwvaT7CoFdvcmQ8L2J1dHRvbj4KPC9kaXY+PGRpdiBpZD0iZW50LWNvbnRlbnUiIGNsYXNzPSJkb2MtZWRpdG9yIiBjb250ZW50ZWRpdGFibGU9InRydWUiPjwvZGl2PjwvZGl2PjwvZGl2PgogICAgICAgICAgICAKICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1mdWxsIGF0dGFjaG1lbnRzLWFyZWEiPgogICAgICAgICAgICAgICAgPGxhYmVsPjxpIGNsYXNzPSJmYXMgZmEtcGFwZXJjbGlwIj48L2k+IFBpw6hjZXMgam9pbnRlczwvbGFiZWw+CiAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0iZmlsZSIgaWQ9ImVudC1maWxlLWlucHV0IiBjbGFzcz0iZm9ybS1jb250cm9sIiBvbmNoYW5nZT0iYWRkQXR0YWNobWVudCgnZW50LWF0dGFjaG1lbnRzJywgdGhpcykiPgogICAgICAgICAgICAgICAgPHVsIGlkPSJlbnQtYXR0YWNobWVudHMiIGNsYXNzPSJhdHRhY2htZW50LWxpc3QiPjwvdWw+CiAgICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgICAgPGRpdiBjbGFzcz0ic2F2ZS1iYXIiPjxidXR0b24gaWQ9ImJ0bi1zYXZlLWVudCIgY2xhc3M9ImJ0biBidG4tcHJpbWFyeSIgb25jbGljaz0ic2F2ZUVudHJldGllbigpIj48aSBjbGFzcz0iZmFzIGZhLXNhdmUiIHN0eWxlPSJtYXJnaW4tcmlnaHQ6NnB4Ij48L2k+RW5yZWdpc3RyZXI8L2J1dHRvbj48L2Rpdj4KICAgICAgICA8L2Rpdj4KICAgIDwvZGl2PgoKICAgIDxkaXYgaWQ9Im1lbnU3IiBjbGFzcz0ic2VjdGlvbiI+CiAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1jYXJkIj4KICAgICAgICAgICAgPGRpdiBzdHlsZT0iZGlzcGxheTpmbGV4OyBqdXN0aWZ5LWNvbnRlbnQ6c3BhY2UtYmV0d2VlbjsgYWxpZ24taXRlbXM6Y2VudGVyOyI+CiAgICAgICAgICAgICAgICA8aDMgc3R5bGU9ImNvbG9yOnZhcigtLXN1Y2Nlc3MpIj5TYWlzaXIgdW5lIFLDqXVuaW9uPC9oMz4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImFjdGlvbi1yb3ciPgogICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImJ0biBidG4td2FybmluZyBidG4tc20iIG9uY2xpY2s9InJhelBhZ2UoJ1JFVScpIj48aSBjbGFzcz0iZmFzIGZhLWVyYXNlciI+PC9pPiBSQVo8L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJidG4gYnRuLXdvcmQgYnRuLXNtIiBvbmNsaWNrPSJleHBvcnREb2NXb3JkKCdSRVUnKSI+PGkgY2xhc3M9ImZhcyBmYS1maWxlLXdvcmQiPjwvaT4gV29yZDwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImJ0biBidG4tZGFyayBidG4tc20iIG9uY2xpY2s9InByaW50Q3VycmVudEZvcm0oJ1JFVScpIj48aSBjbGFzcz0iZmFzIGZhLXByaW50Ij48L2k+IFBERjwvYnV0dG9uPgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWdyaWQiIHN0eWxlPSJtYXJnaW4tdG9wOjE1cHg7Ij4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAiPjxsYWJlbD5EYXRlPC9sYWJlbD48aW5wdXQgdHlwZT0iZGF0ZSIgaWQ9InJldS1kYXRlIiBjbGFzcz0iZm9ybS1jb250cm9sIj48L2Rpdj4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAiPgogICAgICAgICAgICAgICAgICAgIDxsYWJlbD5UeXBlIGRlIHLDqXVuaW9uPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJkaXNwbGF5OmZsZXg7IGdhcDo1cHg7Ij4KICAgICAgICAgICAgICAgICAgICAgICAgPHNlbGVjdCBpZD0icmV1LXR5cGUiIGNsYXNzPSJmb3JtLWNvbnRyb2wiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbj5Db25zZWlsIGQnQWRtaW5pc3RyYXRpb248L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24+Q29uc2VpbCBQw6lkYWdvZ2lxdWU8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24+Q29taXTDqSBkZSBQaWxvdGFnZSAoQ09QSUwpPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uPkNvbW1pc3Npb24gw4lkdWNhdGl2ZTwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbj7DiXF1aXBlIMOpZHVjYXRpdmU8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24+RVNTPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uPkdQRFM8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24+Q2VsbHVsZSBkZSB2ZWlsbGU8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24+Rm9uZCBzb2NpYWw8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24+QXV0cmU8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICAgICAgPC9zZWxlY3Q+CiAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImJ0biBidG4tc3VjY2VzcyBidG4taWNvbiIgb25jbGljaz0iYWRkQ3VzdG9tVHlwZSgncmV1LXR5cGUnKSI+PGkgY2xhc3M9ImZhcyBmYS1wbHVzIj48L2k+PC9idXR0b24+CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDxkaXYgc3R5bGU9ImRpc3BsYXk6ZmxleDtnYXA6MTVweDtmbGV4LXdyYXA6d3JhcDsiPgogICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iZmxleDoxO21pbi13aWR0aDoyNTBweDtiYWNrZ3JvdW5kOiNmOWY5Zjk7cGFkZGluZzoxNXB4O2JvcmRlci1yYWRpdXM6NXB4O2JvcmRlci1sZWZ0OjNweCBzb2xpZCAjZTY3ZTIyOyI+CiAgICAgICAgICAgICAgICAgICAgPGxhYmVsPjxpIGNsYXNzPSJmYXMgZmEtdXNlci1ncmFkdWF0ZSIgc3R5bGU9ImNvbG9yOiNlNjdlMjI7bWFyZ2luLXJpZ2h0OjRweCI+PC9pPiDDiWzDqHZlcyBjb25jZXJuw6lzPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICA8ZGl2IGlkPSJyZXUtc3R1ZGVudHMtY29udGFpbmVyIj48ZGl2IGNsYXNzPSJtdWx0aS1yb3cgcmV1LXN0dWRlbnQiPjxpbnB1dCB0eXBlPSJ0ZXh0IiBjbGFzcz0iZm9ybS1jb250cm9sIG5hbWUiIHBsYWNlaG9sZGVyPSJOb20gUHLDqW5vbSI+PGJ1dHRvbiBjbGFzcz0iYnRuIGJ0bi1kYW5nZXIgYnRuLWljb24iIG9uY2xpY2s9InRoaXMucGFyZW50RWxlbWVudC5yZW1vdmUoKSI+PGkgY2xhc3M9ImZhcyBmYS10aW1lcyI+PC9pPjwvYnV0dG9uPjwvZGl2PjwvZGl2PgogICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImJ0biBidG4tc20gYnRuLXN1Y2Nlc3MiIG9uY2xpY2s9ImFkZE11bHRpUm93KCdyZXUtc3R1ZGVudHMtY29udGFpbmVyJywgJ3JldS1zdHVkZW50JywgJ05vbSDDiWzDqHZlJykiPisgw4lsw6h2ZTwvYnV0dG9uPgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJmbGV4OjE7bWluLXdpZHRoOjI1MHB4O2JhY2tncm91bmQ6I2Y5ZjlmOTtwYWRkaW5nOjE1cHg7Ym9yZGVyLXJhZGl1czo1cHg7Ym9yZGVyLWxlZnQ6M3B4IHNvbGlkICMyOTgwYjk7Ij4KICAgICAgICAgICAgICAgICAgICA8bGFiZWw+PGkgY2xhc3M9ImZhcyBmYS1jaGFsa2JvYXJkLXRlYWNoZXIiIHN0eWxlPSJjb2xvcjojMjk4MGI5O21hcmdpbi1yaWdodDo0cHgiPjwvaT4gUGFydGljaXBhbnRzIC8gUGVyc29ubmVsczwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBpZD0icmV1LXRlYWNoZXJzLWNvbnRhaW5lciI+PGRpdiBjbGFzcz0ibXVsdGktcm93IHJldS10ZWFjaGVyIj48aW5wdXQgdHlwZT0idGV4dCIgY2xhc3M9ImZvcm0tY29udHJvbCBuYW1lIiBwbGFjZWhvbGRlcj0iTm9tIFByw6lub20iPjxidXR0b24gY2xhc3M9ImJ0biBidG4tZGFuZ2VyIGJ0bi1pY29uIiBvbmNsaWNrPSJ0aGlzLnBhcmVudEVsZW1lbnQucmVtb3ZlKCkiPjxpIGNsYXNzPSJmYXMgZmEtdGltZXMiPjwvaT48L2J1dHRvbj48L2Rpdj48L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJidG4gYnRuLXNtIGJ0bi1zdWNjZXNzIiBvbmNsaWNrPSJhZGRNdWx0aVJvdygncmV1LXRlYWNoZXJzLWNvbnRhaW5lcicsICdyZXUtdGVhY2hlcicsICdOb20gUGVyc29ubmVsJykiPisgUGVyc29ubmVsPC9idXR0b24+CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZnVsbCI+PGxhYmVsPk9yZHJlIGR1IGpvdXI8L2xhYmVsPjxpbnB1dCB0eXBlPSJ0ZXh0IiBpZD0icmV1LW9kaiIgY2xhc3M9ImZvcm0tY29udHJvbCI+PC9kaXY+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZnVsbCI+PGxhYmVsPkNvbXB0ZS1yZW5kdTwvbGFiZWw+PGRpdiBjbGFzcz0icnRlLXdyYXAiPjxkaXYgY2xhc3M9InJ0ZS1iYXIiPgo8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0iZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2JvbGQnKSIgdGl0bGU9IkdyYXMiPjxiPkc8L2I+PC9idXR0b24+CjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJkb2N1bWVudC5leGVjQ29tbWFuZCgnaXRhbGljJykiIHRpdGxlPSJJdGFsaXF1ZSI+PGk+STwvaT48L2J1dHRvbj4KPGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9ImRvY3VtZW50LmV4ZWNDb21tYW5kKCd1bmRlcmxpbmUnKSIgdGl0bGU9IlNvdWxpZ27DqSI+PHU+UzwvdT48L2J1dHRvbj4KPHNwYW4gY2xhc3M9InJ0ZS1zZXAiPjwvc3Bhbj4KPGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9ImRvY3VtZW50LmV4ZWNDb21tYW5kKCdpbnNlcnRVbm9yZGVyZWRMaXN0JykiIHRpdGxlPSJMaXN0ZSDDoCBwdWNlcyI+PGkgY2xhc3M9ImZhcyBmYS1saXN0LXVsIj48L2k+PC9idXR0b24+CjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJkb2N1bWVudC5leGVjQ29tbWFuZCgnaW5zZXJ0T3JkZXJlZExpc3QnKSIgdGl0bGU9Ikxpc3RlIG51bcOpcm90w6llIj48aSBjbGFzcz0iZmFzIGZhLWxpc3Qtb2wiPjwvaT48L2J1dHRvbj4KPHNwYW4gY2xhc3M9InJ0ZS1zZXAiPjwvc3Bhbj4KPGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9InJ0ZUNvbG9yKHRoaXMpIiB0aXRsZT0iQ291bGV1ciI+PGkgY2xhc3M9ImZhcyBmYS1wYWxldHRlIj48L2k+PC9idXR0b24+CjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJydGVMaW5rKHRoaXMpIiB0aXRsZT0iTGllbiI+PGkgY2xhc3M9ImZhcyBmYS1saW5rIj48L2k+PC9idXR0b24+CjxzcGFuIGNsYXNzPSJydGUtc2VwIj48L3NwYW4+CjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJkb2N1bWVudC5leGVjQ29tbWFuZCgndW5kbycpIiB0aXRsZT0iQW5udWxlciI+PGkgY2xhc3M9ImZhcyBmYS11bmRvIj48L2k+PC9idXR0b24+CjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJkb2N1bWVudC5leGVjQ29tbWFuZCgncmVkbycpIiB0aXRsZT0iUmVzdGF1cmVyIj48aSBjbGFzcz0iZmFzIGZhLXJlZG8iPjwvaT48L2J1dHRvbj48c3BhbiBjbGFzcz0icnRlLXNlcCI+PC9zcGFuPjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJydGVJbnNlcnRMb2dvKCkiIHRpdGxlPSJJbnPDqXJlciBsZSBsb2dvIj48aSBjbGFzcz0iZmFzIGZhLXN0YW1wIiBzdHlsZT0iY29sb3I6I2U2N2UyMiI+PC9pPjwvYnV0dG9uPgo8c3BhbiBjbGFzcz0icnRlLXNlcCI+PC9zcGFuPjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJkb2N1bWVudC5leGVjQ29tbWFuZCgnanVzdGlmeUxlZnQnKSIgdGl0bGU9IkFsaWduZXIgw6AgZ2F1Y2hlIj48aSBjbGFzcz0iZmFzIGZhLWFsaWduLWxlZnQiPjwvaT48L2J1dHRvbj48YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0iZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2p1c3RpZnlDZW50ZXInKSIgdGl0bGU9IkNlbnRyZXIiPjxpIGNsYXNzPSJmYXMgZmEtYWxpZ24tY2VudGVyIj48L2k+PC9idXR0b24+PGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9ImRvY3VtZW50LmV4ZWNDb21tYW5kKCdqdXN0aWZ5RnVsbCcpIiB0aXRsZT0iSnVzdGlmaWVyIj48aSBjbGFzcz0iZmFzIGZhLWFsaWduLWp1c3RpZnkiPjwvaT48L2J1dHRvbj48YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0icGFzdGVGcm9tV29yZCgpIiB0aXRsZT0iQ29sbGVyIGRlcHVpcyBXb3JkIGVuIGNvbnNlcnZhbnQgbGEgbWlzZSBlbiBwYWdlIiBzdHlsZT0ibWFyZ2luLWxlZnQ6NnB4O2JhY2tncm91bmQ6IzJiNTc5YTtjb2xvcjp3aGl0ZTtib3JkZXItcmFkaXVzOjRweDtwYWRkaW5nOjJweCA4cHg7Zm9udC1zaXplOi42OHJlbTtib3JkZXI6bm9uZTtjdXJzb3I6cG9pbnRlcjtmb250LWZhbWlseTppbmhlcml0O2Rpc3BsYXk6aW5saW5lLWZsZXg7YWxpZ24taXRlbXM6Y2VudGVyO2dhcDozcHg7dmVydGljYWwtYWxpZ246bWlkZGxlOyI+PGkgY2xhc3M9ImZhcyBmYS1maWxlLXdvcmQiPjwvaT7CoFdvcmQ8L2J1dHRvbj4KPC9kaXY+PGRpdiBpZD0icmV1LWNvbnRlbnUiIGNsYXNzPSJkb2MtZWRpdG9yIiBjb250ZW50ZWRpdGFibGU9InRydWUiPjwvZGl2PjwvZGl2PjwvZGl2PgogICAgICAgICAgICAKICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1mdWxsIGF0dGFjaG1lbnRzLWFyZWEiPgogICAgICAgICAgICAgICAgPGxhYmVsPjxpIGNsYXNzPSJmYXMgZmEtcGFwZXJjbGlwIj48L2k+IFBpw6hjZXMgam9pbnRlczwvbGFiZWw+CiAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0iZmlsZSIgaWQ9InJldS1maWxlLWlucHV0IiBjbGFzcz0iZm9ybS1jb250cm9sIiBvbmNoYW5nZT0iYWRkQXR0YWNobWVudCgncmV1LWF0dGFjaG1lbnRzJywgdGhpcykiPgogICAgICAgICAgICAgICAgPHVsIGlkPSJyZXUtYXR0YWNobWVudHMiIGNsYXNzPSJhdHRhY2htZW50LWxpc3QiPjwvdWw+CiAgICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgICAgPGRpdiBjbGFzcz0ic2F2ZS1iYXIiPjxidXR0b24gaWQ9ImJ0bi1zYXZlLXJldSIgY2xhc3M9ImJ0biBidG4tc3VjY2VzcyIgb25jbGljaz0ic2F2ZVJldW5pb24oKSI+PGkgY2xhc3M9ImZhcyBmYS1zYXZlIiBzdHlsZT0ibWFyZ2luLXJpZ2h0OjZweCI+PC9pPkVucmVnaXN0cmVyPC9idXR0b24+PC9kaXY+CiAgICAgICAgPC9kaXY+CiAgICA8L2Rpdj4KCiAgICA8ZGl2IGlkPSJtZW51OCIgY2xhc3M9InNlY3Rpb24iPgogICAgICAgIDxkaXYgY2xhc3M9ImZpbHRlcnMtYmFyIj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1ncm91cCIgc3R5bGU9ImZsZXg6MTsiPjxsYWJlbD5SZWNoZXJjaGUgZ2xvYmFsZTwvbGFiZWw+PGlucHV0IHR5cGU9InRleHQiIGlkPSJzZWFyY2gtc3R1ZGVudCIgY2xhc3M9ImZvcm0tY29udHJvbCIgcGxhY2Vob2xkZXI9IlRhcGVyIHVuIG5vbS4uLiIgZGF0YS1zdHVkZW50LWFjPSIxIiBvbmtleXVwPSJyZW5kZXJIaXN0b3J5KCkiPjwvZGl2PgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWdyb3VwIiBzdHlsZT0iZmxleDoxOyI+PGxhYmVsPlR5cGU8L2xhYmVsPjxzZWxlY3QgaWQ9InNlYXJjaC10eXBlIiBjbGFzcz0iZm9ybS1jb250cm9sIiBvbmNoYW5nZT0icmVuZGVySGlzdG9yeSgpIj48b3B0aW9uIHZhbHVlPSJBTEwiPlRvdXQ8L29wdGlvbj48b3B0aW9uIHZhbHVlPSJFTlQiPkVudHJldGllbnM8L29wdGlvbj48b3B0aW9uIHZhbHVlPSJSRVUiPlLDqXVuaW9uczwvb3B0aW9uPjxvcHRpb24gdmFsdWU9IkRJUiI+RGlyZWN0aW9uPC9vcHRpb24+PG9wdGlvbiB2YWx1ZT0iU1VJVkkiPlN1aXZpPC9vcHRpb24+PC9zZWxlY3Q+PC9kaXY+CiAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImJ0biBidG4tZGFyayBidG4tc20iIG9uY2xpY2s9InByaW50QWxsSGlzdG9yeSgpIj5Ub3V0IEltcHJpbWVyPC9idXR0b24+CiAgICAgICAgPC9kaXY+CiAgICAgICAgPHRhYmxlIGNsYXNzPSJkYXRhLXRhYmxlIiBpZD0iaGlzdG9yeS10YWJsZSI+PHRoZWFkPjx0cj48dGg+RGF0ZTwvdGg+PHRoPlR5cGU8L3RoPjx0aD5TdWpldCAvIFBlcnNvbm5lczwvdGg+PHRoPkFjdGlvbnM8L3RoPjwvdHI+PC90aGVhZD48dGJvZHk+PC90Ym9keT48L3RhYmxlPgogICAgPC9kaXY+CgogICAgPGRpdiBpZD0ibWVudTkiIGNsYXNzPSJzZWN0aW9uIj4KICAgICAgICA8aDMgc3R5bGU9Im1hcmdpbi1ib3R0b206MjBweDsgY29sb3I6dmFyKC0tcHJpbWFyeSk7Ij48aSBjbGFzcz0iZmFzIGZhLWNoYXJ0LWxpbmUiPjwvaT4gUGlsb3RhZ2UgR2xvYmFsPC9oMz4KICAgICAgICA8ZGl2IGNsYXNzPSJkYXNoLWtwaS1ncmlkIj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0ia3BpLWNhcmQiIHN0eWxlPSJib3JkZXItYm90dG9tLWNvbG9yOnZhcigtLWhpZ2hsaWdodCkiPjxpIGNsYXNzPSJmYXMgZmEtZmlyZSBmYS0yeCBrcGktaWNvbiIgc3R5bGU9ImNvbG9yOnZhcigtLWhpZ2hsaWdodCkiPjwvaT48c3BhbiBjbGFzcz0ia3BpLW51bSIgaWQ9ImtwaS10b2RvIj4wPC9zcGFuPjxzcGFuIGNsYXNzPSJrcGktbGFiZWwiPlVyZ2VuY2VzPC9zcGFuPjwvZGl2PgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJrcGktY2FyZCIgc3R5bGU9ImJvcmRlci1ib3R0b20tY29sb3I6dmFyKC0tcHJpbWFyeSkiPjxpIGNsYXNzPSJmYXMgZmEtY2xpcGJvYXJkLWxpc3QgZmEtMngga3BpLWljb24iIHN0eWxlPSJjb2xvcjp2YXIoLS1wcmltYXJ5KSI+PC9pPjxzcGFuIGNsYXNzPSJrcGktbnVtIiBpZD0ia3BpLWRpciI+MDwvc3Bhbj48c3BhbiBjbGFzcz0ia3BpLWxhYmVsIj5EaXJlY3Rpb248L3NwYW4+PC9kaXY+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImtwaS1jYXJkIiBzdHlsZT0iYm9yZGVyLWJvdHRvbS1jb2xvcjp2YXIoLS1hY2NlbnQpIj48aSBjbGFzcz0iZmFzIGZhLWNvbW1lbnRzIGZhLTJ4IGtwaS1pY29uIiBzdHlsZT0iY29sb3I6dmFyKC0tYWNjZW50KSI+PC9pPjxzcGFuIGNsYXNzPSJrcGktbnVtIiBpZD0ia3BpLWVudCI+MDwvc3Bhbj48c3BhbiBjbGFzcz0ia3BpLWxhYmVsIj5FbnRyZXRpZW5zPC9zcGFuPjwvZGl2PgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJrcGktY2FyZCIgc3R5bGU9ImJvcmRlci1ib3R0b20tY29sb3I6dmFyKC0tc3VjY2VzcykiPjxpIGNsYXNzPSJmYXMgZmEtdXNlcnMgZmEtMngga3BpLWljb24iIHN0eWxlPSJjb2xvcjp2YXIoLS1zdWNjZXNzKSI+PC9pPjxzcGFuIGNsYXNzPSJrcGktbnVtIiBpZD0ia3BpLXJldSI+MDwvc3Bhbj48c3BhbiBjbGFzcz0ia3BpLWxhYmVsIj5Sw6l1bmlvbnM8L3NwYW4+PC9kaXY+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImtwaS1jYXJkIiBzdHlsZT0iYm9yZGVyLWJvdHRvbS1jb2xvcjp2YXIoLS13YXJuaW5nKSI+PGkgY2xhc3M9ImZhcyBmYS1jYWxlbmRhci1hbHQgZmEtMngga3BpLWljb24iIHN0eWxlPSJjb2xvcjp2YXIoLS13YXJuaW5nKSI+PC9pPjxzcGFuIGNsYXNzPSJrcGktbnVtIiBpZD0ia3BpLWNhbCI+MDwvc3Bhbj48c3BhbiBjbGFzcz0ia3BpLWxhYmVsIj5BZ2VuZGE8L3NwYW4+PC9kaXY+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImtwaS1jYXJkIiBzdHlsZT0iYm9yZGVyLWJvdHRvbS1jb2xvcjp2YXIoLS1pbmZvKSI+PGkgY2xhc3M9ImZhcyBmYS11c2VyLWdyYWR1YXRlIGZhLTJ4IGtwaS1pY29uIiBzdHlsZT0iY29sb3I6dmFyKC0taW5mbykiPjwvaT48c3BhbiBjbGFzcz0ia3BpLW51bSIgaWQ9ImtwaS1zdWl2aSI+MDwvc3Bhbj48c3BhbiBjbGFzcz0ia3BpLWxhYmVsIj5TdWl2aTwvc3Bhbj48L2Rpdj4KICAgICAgICA8L2Rpdj4KICAgICAgICA8ZGl2IGNsYXNzPSJjaGFydHMtZ3JpZCI+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImNoYXJ0LWNvbnRhaW5lciI+PGgzPlLDqXBhcnRpdGlvbiBBY3Rpdml0w6k8L2gzPjxjYW52YXMgaWQ9ImNoYXJ0VHlwZXMiPjwvY2FudmFzPjwvZGl2PgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJjaGFydC1jb250YWluZXIiPgogICAgICAgICAgICAgICAgPGgzPlRvcCA1IMOJbMOodmVzIChIaXN0b3JpcXVlKTwvaDM+CiAgICAgICAgICAgICAgICA8dWwgaWQ9InRvcC1zdHVkZW50cy1saXN0IiBjbGFzcz0idG9wLXN0dWRlbnRzLWxpc3QiIHN0eWxlPSJtYXJnaW4tdG9wOjIwcHg7Ij48L3VsPgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICA8L2Rpdj4KICAgICAgICA8ZGl2IGNsYXNzPSJjaGFydC1jb250YWluZXIiIHN0eWxlPSJ3aWR0aDoxMDAlOyBoZWlnaHQ6MzAwcHg7Ij48aDM+w4l2b2x1dGlvbiAoNiBtb2lzKTwvaDM+PGNhbnZhcyBpZD0iY2hhcnRNb250aGx5Ij48L2NhbnZhcz48L2Rpdj4KICAgIDwvZGl2PgoKCjwhLS0g4pWQ4pWQ4pWQIEVWRU5FTUVOVFMgKG1lbnUxMCkg4pWQ4pWQ4pWQIC0tPgo8ZGl2IGlkPSJtZW51MTAiIGNsYXNzPSJzZWN0aW9uIj4KICAgIDxkaXYgY2xhc3M9ImV2LWhlYWRlciI+CiAgICAgICAgPGgyPjxpIGNsYXNzPSJmYXMgZmEtY2FsZW5kYXItY2hlY2siPjwvaT4gQWN0aXZpdMOpcyBww6lkYWdvZ2lxdWVzPC9oMj4KICAgICAgICA8YnV0dG9uIGNsYXNzPSJhY3Rpb24tYnRuIiBzdHlsZT0iYmFja2dyb3VuZDp2YXIoLS1oZWFkZXIpO2NvbG9yOiNmZmY7cGFkZGluZzoxMHB4IDIwcHg7Zm9udC1zaXplOi45NXJlbTtmb250LXdlaWdodDo3MDA7Ym9yZGVyLXJhZGl1czoxMHB4O2JvcmRlcjpub25lO2N1cnNvcjpwb2ludGVyO2JveC1zaGFkb3c6MCAzcHggMTBweCByZ2JhKDQ0LDYyLDgwLC4zKTt0cmFuc2l0aW9uOnRyYW5zZm9ybSAuMTVzLGJveC1zaGFkb3cgLjE1czsiIG9ubW91c2VvdmVyPSJ0aGlzLnN0eWxlLnRyYW5zZm9ybT0ndHJhbnNsYXRlWSgtMnB4KSc7dGhpcy5zdHlsZS5ib3hTaGFkb3c9JzAgNXB4IDE1cHggcmdiYSg0NCw2Miw4MCwuNCknIiBvbm1vdXNlb3V0PSJ0aGlzLnN0eWxlLnRyYW5zZm9ybT0nbm9uZSc7dGhpcy5zdHlsZS5ib3hTaGFkb3c9JzAgM3B4IDEwcHggcmdiYSg0NCw2Miw4MCwuMyknIiBvbmNsaWNrPSJvcGVuRXZNb2RhbCgpIj48aSBjbGFzcz0iZmFzIGZhLXBsdXMiPjwvaT4gTm91dmVsIMOpdsOpbmVtZW50PC9idXR0b24+CiAgICA8L2Rpdj4KICAgIDxkaXYgY2xhc3M9ImV2LXRvcCI+CiAgICAgICAgPGRpdiBjbGFzcz0iZXYta3BpcyI+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImV2LWtwaSI+PGRpdiBjbGFzcz0ia3YiIGlkPSJrcGktZXYtdG90IiBzdHlsZT0iY29sb3I6dmFyKC0taGVhZGVyKSI+MDwvZGl2PjxkaXYgY2xhc3M9ImtsIj5Ub3RhbDwvZGl2PjwvZGl2PgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJldi1rcGkiPjxkaXYgY2xhc3M9Imt2IiBpZD0ia3BpLWV2LW1zZyIgc3R5bGU9ImNvbG9yOiMyN2FlNjAiPjA8L2Rpdj48ZGl2IGNsYXNzPSJrbCI+TXNnIFBhcmVudHM8L2Rpdj48L2Rpdj4KICAgICAgICA8L2Rpdj4KICAgIDwvZGl2PgogICAgPGRpdiBjbGFzcz0iZXYtZmlsdGVycyI+CiAgICAgICAgCiAgICAgICAgCiAgICAgICAgPGlucHV0IHR5cGU9InRleHQiIGlkPSJldi1zZWFyY2giIHBsYWNlaG9sZGVyPSJSZWNoZXJjaGVy4oCmIiBvbmlucHV0PSJyZW5kZXJFdmVudHMoKSIgc3R5bGU9ImZsZXg6MTttaW4td2lkdGg6MTIwcHg7bWF4LXdpZHRoOjI2MHB4Ij4KICAgIDwvZGl2PgogICAgPGRpdiBjbGFzcz0iZXYtZ3JpZCIgaWQ9ImV2LWdyaWQiPjwvZGl2Pgo8L2Rpdj4KCjwhLS0gTU9EQUwgRVZFTkVNRU5UIC0tPgo8ZGl2IGlkPSJldk1vZCIgY2xhc3M9Im0tb3YiIHN0eWxlPSJsZWZ0OjI4MHB4IiBvbmNsaWNrPSJpZihldmVudC50YXJnZXQ9PT10aGlzKWNsb3NlRXZNb2RhbCgpIj4KICAgIDxkaXYgY2xhc3M9Im0tYm94IiBzdHlsZT0id2lkdGg6Y2FsYygxMDB2dyAtIDI4MHB4KTttYXgtd2lkdGg6Y2FsYygxMDB2dyAtIDI4MHB4KTtoZWlnaHQ6MTAwdmg7bWF4LWhlaWdodDoxMDB2aDtib3JkZXItcmFkaXVzOjA7cGFkZGluZzoyMHB4IDI4cHg7Ym94LXNpemluZzpib3JkZXItYm94O21hcmdpbi1sZWZ0OmF1dG8iPgogICAgICAgIDxoMz48aSBjbGFzcz0iZmFzIGZhLWNhbGVuZGFyLWNoZWNrIj48L2k+IDxzcGFuIGlkPSJldi1tdCI+Tm91dmVsIMOpdsOpbmVtZW50PC9zcGFuPjwvaDM+CiAgICAgICAgPGlucHV0IHR5cGU9ImhpZGRlbiIgaWQ9ImV2LWVpZCI+CiAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1ncm91cCIgc3R5bGU9Im1hcmdpbi1ib3R0b206MTBweCI+PGxhYmVsPkludGl0dWzDqSAqPC9sYWJlbD48aW5wdXQgdHlwZT0idGV4dCIgaWQ9ImV2LW5hbWUiIGNsYXNzPSJmb3JtLWNvbnRyb2wiIHBsYWNlaG9sZGVyPSJFeDogSm91cm7DqWUgcG9ydGVzIG91dmVydGVzIj48L2Rpdj4KICAgICAgICA8ZGl2IGNsYXNzPSJtLXJvdyI+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAiPjxsYWJlbD5Ew6lidXQ8L2xhYmVsPjxpbnB1dCB0eXBlPSJkYXRlIiBpZD0iZXYtc3RhcnQiIGNsYXNzPSJmb3JtLWNvbnRyb2wiPjwvZGl2PgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWdyb3VwIj48bGFiZWw+w4ljaMOpYW5jZTwvbGFiZWw+PGlucHV0IHR5cGU9ImRhdGUiIGlkPSJldi1kZWFkIiBjbGFzcz0iZm9ybS1jb250cm9sIj48L2Rpdj4KICAgICAgICA8L2Rpdj4KICAgICAgICA8ZGl2IGNsYXNzPSJtLXJvdyI+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAiPjxsYWJlbD5QaWxvdGU8L2xhYmVsPjxzZWxlY3QgaWQ9ImV2LXJlc3AiIGNsYXNzPSJmb3JtLWNvbnRyb2wiPjxvcHRpb24gdmFsdWU9IiI+LS0gQ2hvaXNpciAtLTwvb3B0aW9uPjwvc2VsZWN0PjwvZGl2PgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWdyb3VwIiBzdHlsZT0iZGlzcGxheTpmbGV4O2FsaWduLWl0ZW1zOmNlbnRlcjtnYXA6OHB4O3BhZGRpbmctdG9wOjIycHgiPjxpbnB1dCB0eXBlPSJjaGVja2JveCIgaWQ9ImV2LW1zZ3BhcmVudHMiIHN0eWxlPSJ3aWR0aDoxOHB4O2hlaWdodDoxOHB4O2N1cnNvcjpwb2ludGVyIj48bGFiZWwgZm9yPSJldi1tc2dwYXJlbnRzIiBzdHlsZT0ibWFyZ2luOjA7Y3Vyc29yOnBvaW50ZXI7Zm9udC1zaXplOi44NXJlbSI+TWVzc2FnZSBlbnZvecOpIGF1eCBwYXJlbnRzPC9sYWJlbD48L2Rpdj4KICAgICAgICA8L2Rpdj4KICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWdyb3VwIiBzdHlsZT0ibWFyZ2luLWJvdHRvbToxMHB4Ij48bGFiZWw+Q2xhc3NlcyBjb25jZXJuw6llczwvbGFiZWw+CiAgICAgICAgICAgIDxkaXYgc3R5bGU9ImRpc3BsYXk6ZmxleDtnYXA6OHB4O2FsaWduLWl0ZW1zOmNlbnRlciI+CiAgICAgICAgICAgICAgICA8c2VsZWN0IGlkPSJldi1jbGFzc2UiIGNsYXNzPSJmb3JtLWNvbnRyb2wiIHN0eWxlPSJmbGV4OjEiPjxvcHRpb24gdmFsdWU9IiI+LS0gQ2hvaXNpciBvdSBzYWlzaXIgLS08L29wdGlvbj48L3NlbGVjdD4KICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT0iYnV0dG9uIiBjbGFzcz0ibWIiIHN0eWxlPSJiYWNrZ3JvdW5kOiM1NTU7Y29sb3I6I2ZmZjtwYWRkaW5nOjZweCAxMHB4O2ZvbnQtc2l6ZTouNzVyZW0iIG9uY2xpY2s9IndpbmRvdy5hZGRFdkNsYXNzZSgpIj48aSBjbGFzcz0iZmFzIGZhLXBsdXMiPjwvaT48L2J1dHRvbj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDxkaXYgaWQ9ImV2LWNsYXNzZXMtbGlzdCIgc3R5bGU9ImRpc3BsYXk6ZmxleDtmbGV4LXdyYXA6d3JhcDtnYXA6NHB4O21hcmdpbi10b3A6NnB4Ij48L2Rpdj4KICAgICAgICA8L2Rpdj4KICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWdyb3VwIiBzdHlsZT0ibWFyZ2luLWJvdHRvbToxMHB4Ij48bGFiZWw+TWVzc2FnZSDDoCBhZHJlc3NlciBhdXggcGFyZW50czwvbGFiZWw+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9InJ0ZS13cmFwIj48ZGl2IGNsYXNzPSJydGUtYmFyIj4KICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJkb2N1bWVudC5leGVjQ29tbWFuZCgnYm9sZCcpIiB0aXRsZT0iR3JhcyI+PGI+RzwvYj48L2J1dHRvbj4KICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJkb2N1bWVudC5leGVjQ29tbWFuZCgnaXRhbGljJykiIHRpdGxlPSJJdGFsaXF1ZSI+PGk+STwvaT48L2J1dHRvbj4KICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJkb2N1bWVudC5leGVjQ29tbWFuZCgndW5kZXJsaW5lJykiIHRpdGxlPSJTb3VsaWduw6kiPjx1PlM8L3U+PC9idXR0b24+CiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz0icnRlLXNlcCI+PC9zcGFuPgogICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9ImRvY3VtZW50LmV4ZWNDb21tYW5kKCdpbnNlcnRVbm9yZGVyZWRMaXN0JykiIHRpdGxlPSJQdWNlcyI+PGkgY2xhc3M9ImZhcyBmYS1saXN0LXVsIj48L2k+PC9idXR0b24+CiAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0iZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2luc2VydE9yZGVyZWRMaXN0JykiIHRpdGxlPSJMaXN0ZSBudW3DqXJvdMOpZSI+PGkgY2xhc3M9ImZhcyBmYS1saXN0LW9sIj48L2k+PC9idXR0b24+CiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz0icnRlLXNlcCI+PC9zcGFuPgogICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9InJ0ZUNvbG9yKHRoaXMpIiB0aXRsZT0iQ291bGV1ciI+PGkgY2xhc3M9ImZhcyBmYS1wYWxldHRlIj48L2k+PC9idXR0b24+CiAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0icnRlTGluayh0aGlzKSIgdGl0bGU9IkxpZW4iPjxpIGNsYXNzPSJmYXMgZmEtbGluayI+PC9pPjwvYnV0dG9uPgogICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9InJ0ZS1zZXAiPjwvc3Bhbj4KICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJkb2N1bWVudC5leGVjQ29tbWFuZCgndW5kbycpIiB0aXRsZT0iQW5udWxlciI+PGkgY2xhc3M9ImZhcyBmYS11bmRvIj48L2k+PC9idXR0b24+CiAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0iZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ3JlZG8nKSIgdGl0bGU9IlJlc3RhdXJlciI+PGkgY2xhc3M9ImZhcyBmYS1yZWRvIj48L2k+PC9idXR0b24+CiAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJydGUtc2VwIj48L3NwYW4+PGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9ImRvY3VtZW50LmV4ZWNDb21tYW5kKCdqdXN0aWZ5TGVmdCcpIiB0aXRsZT0iQWxpZ25lciDDoCBnYXVjaGUiPjxpIGNsYXNzPSJmYXMgZmEtYWxpZ24tbGVmdCI+PC9pPjwvYnV0dG9uPjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJkb2N1bWVudC5leGVjQ29tbWFuZCgnanVzdGlmeUNlbnRlcicpIiB0aXRsZT0iQ2VudHJlciI+PGkgY2xhc3M9ImZhcyBmYS1hbGlnbi1jZW50ZXIiPjwvaT48L2J1dHRvbj48YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0iZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2p1c3RpZnlGdWxsJykiIHRpdGxlPSJKdXN0aWZpZXIiPjxpIGNsYXNzPSJmYXMgZmEtYWxpZ24tanVzdGlmeSI+PC9pPjwvYnV0dG9uPjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJwYXN0ZUZyb21Xb3JkKCkiIHRpdGxlPSJDb2xsZXIgZGVwdWlzIFdvcmQgZW4gY29uc2VydmFudCBsYSBtaXNlIGVuIHBhZ2UiIHN0eWxlPSJtYXJnaW4tbGVmdDo2cHg7YmFja2dyb3VuZDojMmI1NzlhO2NvbG9yOndoaXRlO2JvcmRlci1yYWRpdXM6NHB4O3BhZGRpbmc6MnB4IDhweDtmb250LXNpemU6LjY4cmVtO2JvcmRlcjpub25lO2N1cnNvcjpwb2ludGVyO2ZvbnQtZmFtaWx5OmluaGVyaXQ7ZGlzcGxheTppbmxpbmUtZmxleDthbGlnbi1pdGVtczpjZW50ZXI7Z2FwOjNweDt2ZXJ0aWNhbC1hbGlnbjptaWRkbGU7Ij48aSBjbGFzcz0iZmFzIGZhLWZpbGUtd29yZCI+PC9pPsKgV29yZDwvYnV0dG9uPgo8L2Rpdj48ZGl2IGNsYXNzPSJydGUtYm9keSIgaWQ9ImV2LWRlc2MiIGNvbnRlbnRlZGl0YWJsZT0idHJ1ZSIgc3R5bGU9Im1pbi1oZWlnaHQ6MTIwcHg7Ym9yZGVyOjJweCBzb2xpZCAjZTBlMGUwO2JvcmRlci1yYWRpdXM6MCAwIDhweCA4cHg7cGFkZGluZzoxMHB4Ij48L2Rpdj48L2Rpdj4KICAgICAgICA8L2Rpdj4KICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWdyb3VwIiBzdHlsZT0ibWFyZ2luLWJvdHRvbToxMHB4Ij48bGFiZWw+w4l0aXF1ZXR0ZXMgKHZpcmd1bGVzKTwvbGFiZWw+PGlucHV0IHR5cGU9InRleHQiIGlkPSJldi10YWdzIiBjbGFzcz0iZm9ybS1jb250cm9sIiBwbGFjZWhvbGRlcj0iSlBPLCBjb21tdW5pY2F0aW9uLCBvcmllbnRhdGlvbiI+PC9kaXY+CiAgICAgICAgCiAgICAgICAgPGRpdiBjbGFzcz0ibS1hY3RzIj4KICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0ibWIgbWItZGVsIiBpZD0iZXYtZGVsLWJ0biIgc3R5bGU9ImRpc3BsYXk6bm9uZSIgb25jbGljaz0id2luZG93LmRlbEV2RnJvbU1vZGFsKCkiPjxpIGNsYXNzPSJmYXMgZmEtdHJhc2giPjwvaT4gU3VwcHJpbWVyPC9idXR0b24+CiAgICAgICAgICAgIDxidXR0b24gY2xhc3M9Im1iIG1iLWMiIG9uY2xpY2s9IndpbmRvdy5jbG9zZUV2TW9kYWwoKSI+QW5udWxlcjwvYnV0dG9uPgogICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJtYiBtYi1vayIgb25jbGljaz0id2luZG93LnNhdmVFdmVudCgpIj48aSBjbGFzcz0iZmFzIGZhLWNoZWNrIj48L2k+IEVucmVnaXN0cmVyPC9idXR0b24+CiAgICAgICAgPC9kaXY+CiAgICA8L2Rpdj4KPC9kaXY+Cgo8IS0tIOKVkOKVkOKVkCBHQU5UVCAvIFBST0NFRFVSRVMgKG1lbnUxMSkg4pWQ4pWQ4pWQIC0tPgo8ZGl2IGlkPSJtZW51MTEiIGNsYXNzPSJzZWN0aW9uIj4KICAgIDxkaXYgY2xhc3M9Imd0LWJhciI+CiAgICAgICAgPGgyPjxpIGNsYXNzPSJmYXMgZmEtc3RyZWFtIj48L2k+IMOJY2jDqWFuY2VzPC9oMj4KICAgICAgICA8ZGl2IGNsYXNzPSJndC1iYXItYnRucyI+CiAgICAgICAgICAgIDxidXR0b24gY2xhc3M9Imd0LWJ0bi1hZGQiIG9uY2xpY2s9IndpbmRvdy5vcGVuR3RNb2RhbCgpIj48aSBjbGFzcz0iZmFzIGZhLXBsdXMiPjwvaT4gw4ljaMOpYW5jZTwvYnV0dG9uPgogICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJndC1idG4tc2VjIiBvbmNsaWNrPSJ3aW5kb3cucHJpbnRHYW50dCgpIj48aSBjbGFzcz0iZmFzIGZhLXByaW50Ij48L2k+IEltcHJpbWVyPC9idXR0b24+CiAgICAgICAgPC9kaXY+CiAgICA8L2Rpdj4KICAgIAogICAgPGRpdiBjbGFzcz0iZ3QtbmF2Ij4KICAgICAgICA8YnV0dG9uIG9uY2xpY2s9IndpbmRvdy5ndFByZXYoKSIgdGl0bGU9IlByw6ljw6lkZW50Ij48aSBjbGFzcz0iZmFzIGZhLWNoZXZyb24tbGVmdCI+PC9pPjwvYnV0dG9uPgogICAgICAgIDxzcGFuIHN0eWxlPSJmb250LXNpemU6Ljc2cmVtO2ZvbnQtd2VpZ2h0OjYwMDttaW4td2lkdGg6MTUwcHg7dGV4dC1hbGlnbjpjZW50ZXIiIGlkPSJndC1wZXIiPjwvc3Bhbj4KICAgICAgICA8YnV0dG9uIG9uY2xpY2s9IndpbmRvdy5ndE5leHQoKSIgdGl0bGU9IlN1aXZhbnQiPjxpIGNsYXNzPSJmYXMgZmEtY2hldnJvbi1yaWdodCI+PC9pPjwvYnV0dG9uPgogICAgICAgIDxidXR0b24gb25jbGljaz0id2luZG93Lmd0WWVhcigpIj5Bbm7DqWU8L2J1dHRvbj4KICAgICAgICA8YnV0dG9uIG9uY2xpY2s9IndpbmRvdy5ndFRvZGF5KCkiPkF1ai48L2J1dHRvbj4KICAgICAgICA8c2VsZWN0IGlkPSJndC1mYyIgb25jaGFuZ2U9IndpbmRvdy5yZW5kZXJHYW50dCgpIiBzdHlsZT0ibWFyZ2luLWxlZnQ6YXV0byI+PG9wdGlvbiB2YWx1ZT0iQUxMIj5Ub3V0ZXMgY2F0w6lnb3JpZXM8L29wdGlvbj48L3NlbGVjdD4KICAgIDwvZGl2PgogICAgPGRpdiBjbGFzcz0iZ3Qtd3JhcCIgc3R5bGU9Im1heC1oZWlnaHQ6Y2FsYygxMDB2aCAtIDI2MHB4KTtvdmVyZmxvdy15OmF1dG8iPgogICAgICAgIDx0YWJsZSBjbGFzcz0iZ3QiIGlkPSJndC10YmwiPjwvdGFibGU+CiAgICA8L2Rpdj4KICAgIDxkaXYgY2xhc3M9Imd0LWxlZyI+CiAgICAgICAgPHNwYW4+PGkgc3R5bGU9ImJhY2tncm91bmQ6IzVkYWRlMiI+PC9pPlJlbnRyw6llPC9zcGFuPgogICAgICAgIDxzcGFuPjxpIHN0eWxlPSJiYWNrZ3JvdW5kOiMyZTg2YzEiPjwvaT5FeGFtZW5zPC9zcGFuPgogICAgICAgIDxzcGFuPjxpIHN0eWxlPSJiYWNrZ3JvdW5kOiMxYTUyNzYiPjwvaT5PcmllbnRhdGlvbjwvc3Bhbj4KICAgICAgICA8c3Bhbj48aSBzdHlsZT0iYmFja2dyb3VuZDojMjQ3MWEzIj48L2k+Q29uc2VpbHM8L3NwYW4+CiAgICAgICAgPHNwYW4+PGkgc3R5bGU9ImJhY2tncm91bmQ6IzhlNDRhZCI+PC9pPlDDqWRhZ29naXF1ZTwvc3Bhbj4KICAgICAgICA8c3Bhbj48aSBzdHlsZT0iYmFja2dyb3VuZDojMTQ4Zjc3Ij48L2k+QWRtaW48L3NwYW4+CiAgICAgICAgPHNwYW4+PGkgc3R5bGU9ImJhY2tncm91bmQ6I2MwMzkyYiI+PC9pPlJIPC9zcGFuPgogICAgICAgIDxzcGFuPjxpIHN0eWxlPSJiYWNrZ3JvdW5kOiM1YjZkNWIiPjwvaT5BdXRyZTwvc3Bhbj4KICAgICAgICA8c3Bhbj48aSBzdHlsZT0iYmFja2dyb3VuZDpyZXBlYXRpbmctbGluZWFyLWdyYWRpZW50KDQ1ZGVnLCNmMGYwZjAsI2YwZjBmMCAycHgsI2U4ZThlOCAycHgsI2U4ZThlOCA0cHgpO2JvcmRlcjoxcHggc29saWQgI2NjYyI+PC9pPlZhY2FuY2VzPC9zcGFuPgogICAgICAgIDxzcGFuPjxpIHN0eWxlPSJiYWNrZ3JvdW5kOiNkMzU0MDAiPjwvaT5TZW0uIGNvdXJhbnRlPC9zcGFuPgogICAgPC9kaXY+CjwvZGl2PgoKPCEtLSBNT0RBTCBHQU5UVCAtLT4KPGRpdiBpZD0iZ3RNb2QiIGNsYXNzPSJtLW92IiBvbmNsaWNrPSJpZihldmVudC50YXJnZXQ9PT10aGlzKWNsb3NlR3RNb2RhbCgpIj4KICAgIDxkaXYgY2xhc3M9Im0tYm94IiBzdHlsZT0id2lkdGg6NTAwcHg7Ij4KICAgICAgICA8aDM+PGkgY2xhc3M9ImZhcyBmYS1zdHJlYW0iPjwvaT4gPHNwYW4gaWQ9Imd0LW10Ij5Ob3V2ZWxsZSDDqWNow6lhbmNlPC9zcGFuPjwvaDM+CiAgICAgICAgPGlucHV0IHR5cGU9ImhpZGRlbiIgaWQ9Imd0LWVpZCI+CiAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1ncm91cCIgc3R5bGU9Im1hcmdpbi1ib3R0b206MTBweCI+PGxhYmVsPkludGl0dWzDqSAqPC9sYWJlbD48aW5wdXQgdHlwZT0idGV4dCIgaWQ9Imd0LW5hbWUiIGNsYXNzPSJmb3JtLWNvbnRyb2wiIHBsYWNlaG9sZGVyPSJDb25zZWlscyBkZSBjbGFzc2UgVDIiPjwvZGl2PgogICAgICAgIDxkaXYgY2xhc3M9Im0tcm93Ij4KICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1ncm91cCI+PGxhYmVsPkNvZGU8L2xhYmVsPjxpbnB1dCB0eXBlPSJ0ZXh0IiBpZD0iZ3QtY29kZSIgY2xhc3M9ImZvcm0tY29udHJvbCIgcGxhY2Vob2xkZXI9IkEgNCIgbWF4bGVuZ3RoPSI2Ij48L2Rpdj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1ncm91cCI+PGxhYmVsPkNhdMOpZ29yaWU8L2xhYmVsPgogICAgICAgICAgICAgICAgPHNlbGVjdCBpZD0iZ3QtY2F0IiBjbGFzcz0iZm9ybS1jb250cm9sIj4KICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJBZG1pbmlzdHJhdGlmIj5BZG1pbmlzdHJhdGlmPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iw4lsw6h2ZXMgQkVQIj7DiWzDqHZlcyBCRVA8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJDb25jZXJ0YXRpb25zIj5Db25jZXJ0YXRpb25zPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iRGlzcG9zaXRpZnMgUMOpZGFnb2dpcXVlcyI+RGlzcG9zaXRpZnMgUMOpZGFnb2dpcXVlczwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IlN1aXZpIGRlcyDDqWzDqHZlcyI+U3VpdmkgZGVzIMOpbMOodmVzPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iSW50ZXJ2ZW5hbnRzIj5JbnRlcnZlbmFudHM8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJOdW3DqXJpcXVlIj5OdW3DqXJpcXVlPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iT3JpZW50YXRpb24iPk9yaWVudGF0aW9uPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iUHJvamV0cyI+UHJvamV0czwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IlBvcnRlcyBPdXZlcnRlcyI+UG9ydGVzIE91dmVydGVzPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iUmVzc291cmNlcyBIdW1haW5lcyI+UmVzc291cmNlcyBIdW1haW5lczwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IlPDqWN1cml0w6kiPlPDqWN1cml0w6k8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJBdXRyZSI+QXV0cmU8L29wdGlvbj4KICAgICAgICAgICAgICAgIDwvc2VsZWN0PgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICA8L2Rpdj4KICAgICAgICA8ZGl2IGNsYXNzPSJtLXJvdyIgc3R5bGU9ImFsaWduLWl0ZW1zOmZsZXgtZW5kIj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1ncm91cCIgc3R5bGU9Im1heC13aWR0aDoxMjBweCI+PGxhYmVsPlNlbS4gZMOpYnV0IChJU08pPC9sYWJlbD48aW5wdXQgdHlwZT0ibnVtYmVyIiBpZD0iZ3Qtd3MiIGNsYXNzPSJmb3JtLWNvbnRyb2wiIG1pbj0iMSIgbWF4PSI1MyIgc3R5bGU9IndpZHRoOjEwMHB4O3RleHQtYWxpZ246Y2VudGVyIj48L2Rpdj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1ncm91cCIgc3R5bGU9Im1heC13aWR0aDoxMjBweCI+PGxhYmVsPlNlbS4gZmluIChJU08pPC9sYWJlbD48aW5wdXQgdHlwZT0ibnVtYmVyIiBpZD0iZ3Qtd2UiIGNsYXNzPSJmb3JtLWNvbnRyb2wiIG1pbj0iMSIgbWF4PSI1MyIgc3R5bGU9IndpZHRoOjEwMHB4O3RleHQtYWxpZ246Y2VudGVyIj48L2Rpdj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1ncm91cCIgc3R5bGU9ImZsZXg6MSI+PC9kaXY+CiAgICAgICAgPC9kaXY+CiAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1ncm91cCIgc3R5bGU9Im1hcmdpbi1ib3R0b206MTBweCI+PGxhYmVsPlJlc3BvbnNhYmxlPC9sYWJlbD48c2VsZWN0IGlkPSJndC1yZXNwIiBjbGFzcz0iZm9ybS1jb250cm9sIj48b3B0aW9uIHZhbHVlPSIiPi0tIENob2lzaXIgLS08L29wdGlvbj48L3NlbGVjdD48L2Rpdj4KICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWdyb3VwIiBzdHlsZT0ibWFyZ2luLWJvdHRvbToxMHB4Ij48bGFiZWw+Tm90ZXM8L2xhYmVsPgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJydGUtd3JhcCI+PGRpdiBjbGFzcz0icnRlLWJhciI+CiAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0iZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2JvbGQnKSIgdGl0bGU9IkdyYXMiPjxiPkc8L2I+PC9idXR0b24+CiAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0iZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2l0YWxpYycpIiB0aXRsZT0iSXRhbGlxdWUiPjxpPkk8L2k+PC9idXR0b24+CiAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0iZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ3VuZGVybGluZScpIiB0aXRsZT0iU291bGlnbsOpIj48dT5TPC91PjwvYnV0dG9uPgogICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9InJ0ZS1zZXAiPjwvc3Bhbj4KICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJkb2N1bWVudC5leGVjQ29tbWFuZCgnaW5zZXJ0VW5vcmRlcmVkTGlzdCcpIiB0aXRsZT0iUHVjZXMiPjxpIGNsYXNzPSJmYXMgZmEtbGlzdC11bCI+PC9pPjwvYnV0dG9uPgogICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9ImRvY3VtZW50LmV4ZWNDb21tYW5kKCdpbnNlcnRPcmRlcmVkTGlzdCcpIiB0aXRsZT0iTnVtw6lyb3TDqWUiPjxpIGNsYXNzPSJmYXMgZmEtbGlzdC1vbCI+PC9pPjwvYnV0dG9uPgogICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9InJ0ZS1zZXAiPjwvc3Bhbj4KICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJydGVDb2xvcih0aGlzKSIgdGl0bGU9IkNvdWxldXIiPjxpIGNsYXNzPSJmYXMgZmEtcGFsZXR0ZSI+PC9pPjwvYnV0dG9uPgogICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9InJ0ZUxpbmsodGhpcykiIHRpdGxlPSJMaWVuIj48aSBjbGFzcz0iZmFzIGZhLWxpbmsiPjwvaT48L2J1dHRvbj4KICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJydGUtc2VwIj48L3NwYW4+CiAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0iZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ3VuZG8nKSIgdGl0bGU9IkFubnVsZXIiPjxpIGNsYXNzPSJmYXMgZmEtdW5kbyI+PC9pPjwvYnV0dG9uPgogICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9ImRvY3VtZW50LmV4ZWNDb21tYW5kKCdyZWRvJykiIHRpdGxlPSJSZXN0YXVyZXIiPjxpIGNsYXNzPSJmYXMgZmEtcmVkbyI+PC9pPjwvYnV0dG9uPgogICAgICAgICAgICA8c3BhbiBjbGFzcz0icnRlLXNlcCI+PC9zcGFuPjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJkb2N1bWVudC5leGVjQ29tbWFuZCgnanVzdGlmeUxlZnQnKSIgdGl0bGU9IkFsaWduZXIgw6AgZ2F1Y2hlIj48aSBjbGFzcz0iZmFzIGZhLWFsaWduLWxlZnQiPjwvaT48L2J1dHRvbj48YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0iZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2p1c3RpZnlDZW50ZXInKSIgdGl0bGU9IkNlbnRyZXIiPjxpIGNsYXNzPSJmYXMgZmEtYWxpZ24tY2VudGVyIj48L2k+PC9idXR0b24+PGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9ImRvY3VtZW50LmV4ZWNDb21tYW5kKCdqdXN0aWZ5RnVsbCcpIiB0aXRsZT0iSnVzdGlmaWVyIj48aSBjbGFzcz0iZmFzIGZhLWFsaWduLWp1c3RpZnkiPjwvaT48L2J1dHRvbj48YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0icGFzdGVGcm9tV29yZCgpIiB0aXRsZT0iQ29sbGVyIGRlcHVpcyBXb3JkIGVuIGNvbnNlcnZhbnQgbGEgbWlzZSBlbiBwYWdlIiBzdHlsZT0ibWFyZ2luLWxlZnQ6NnB4O2JhY2tncm91bmQ6IzJiNTc5YTtjb2xvcjp3aGl0ZTtib3JkZXItcmFkaXVzOjRweDtwYWRkaW5nOjJweCA4cHg7Zm9udC1zaXplOi42OHJlbTtib3JkZXI6bm9uZTtjdXJzb3I6cG9pbnRlcjtmb250LWZhbWlseTppbmhlcml0O2Rpc3BsYXk6aW5saW5lLWZsZXg7YWxpZ24taXRlbXM6Y2VudGVyO2dhcDozcHg7dmVydGljYWwtYWxpZ246bWlkZGxlOyI+PGkgY2xhc3M9ImZhcyBmYS1maWxlLXdvcmQiPjwvaT7CoFdvcmQ8L2J1dHRvbj4KPC9kaXY+PGRpdiBjbGFzcz0icnRlLWJvZHkiIGlkPSJndC1ub3RlcyIgY29udGVudGVkaXRhYmxlPSJ0cnVlIiBzdHlsZT0iYm9yZGVyOjJweCBzb2xpZCAjZTBlMGUwO2JvcmRlci1yYWRpdXM6MCAwIDhweCA4cHg7cGFkZGluZzoxMHB4O21pbi1oZWlnaHQ6ODBweCI+PC9kaXY+PC9kaXY+CiAgICAgICAgPC9kaXY+CiAgICAgICAgPGRpdiBjbGFzcz0ibS1hY3RzIiBzdHlsZT0icGFkZGluZy10b3A6MTJweDtib3JkZXItdG9wOjFweCBzb2xpZCAjZWVlO2Rpc3BsYXk6ZmxleDtnYXA6OHB4O2p1c3RpZnktY29udGVudDpmbGV4LWVuZCI+CiAgICAgICAgICAgIDxidXR0b24gdHlwZT0iYnV0dG9uIiBjbGFzcz0ibWIgbWItZGVsIiBpZD0iZ3QtZGVsLWJ0biIgc3R5bGU9ImRpc3BsYXk6bm9uZSIgb25jbGljaz0id2luZG93LmRlbEd0RnJvbU1vZGFsKCkiPjxpIGNsYXNzPSJmYXMgZmEtdHJhc2giPjwvaT4gU3VwcHJpbWVyPC9idXR0b24+CiAgICAgICAgICAgIDxidXR0b24gdHlwZT0iYnV0dG9uIiBjbGFzcz0ibWIgbWItYyIgb25jbGljaz0id2luZG93LmNsb3NlR3RNb2RhbCgpIj5Bbm51bGVyPC9idXR0b24+CiAgICAgICAgICAgIDxidXR0b24gdHlwZT0iYnV0dG9uIiBjbGFzcz0ibWIgbWItb2siIG9uY2xpY2s9IndpbmRvdy5zYXZlR3QoKSI+PGkgY2xhc3M9ImZhcyBmYS1jaGVjayI+PC9pPiBFbnJlZ2lzdHJlcjwvYnV0dG9uPgogICAgICAgIDwvZGl2PgogICAgPC9kaXY+CjwvZGl2PgogICAgPCEtLSDilZDilZDilZAgUFJPQ8OJRFVSRVMg4pWQ4pWQ4pWQIC0tPgogICAgPGRpdiBpZD0ibWVudTEyIiBjbGFzcz0ic2VjdGlvbiI+CiAgICAgICAgPGRpdiBjbGFzcz0iZXYtaGVhZGVyIiBzdHlsZT0iZGlzcGxheTpmbGV4O2p1c3RpZnktY29udGVudDpzcGFjZS1iZXR3ZWVuO2FsaWduLWl0ZW1zOmNlbnRlcjttYXJnaW4tYm90dG9tOjE2cHgiPgogICAgICAgICAgICA8aDIgc3R5bGU9ImNvbG9yOnZhcigtLWhlYWRlcik7Zm9udC1zaXplOjEuMDVyZW07ZGlzcGxheTpmbGV4O2FsaWduLWl0ZW1zOmNlbnRlcjtnYXA6OHB4O21hcmdpbjowIj48aSBjbGFzcz0iZmFzIGZhLWJvb2siPjwvaT4gUHJvY8OpZHVyZXM8L2gyPgogICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJhY3Rpb24tYnRuIiBzdHlsZT0iYmFja2dyb3VuZDp2YXIoLS1oZWFkZXIpO2NvbG9yOiNmZmY7cGFkZGluZzoxMHB4IDIwcHg7Zm9udC1zaXplOi45NXJlbTtmb250LXdlaWdodDo3MDA7Ym9yZGVyLXJhZGl1czoxMHB4O2JvcmRlcjpub25lO2N1cnNvcjpwb2ludGVyO2JveC1zaGFkb3c6MCAzcHggMTBweCByZ2JhKDQ0LDYyLDgwLC4zKSIgb25jbGljaz0ib3BlblByb2NNb2RhbCgpIj48aSBjbGFzcz0iZmFzIGZhLXBsdXMiPjwvaT4gTm91dmVsbGUgcHJvY8OpZHVyZTwvYnV0dG9uPgogICAgICAgIDwvZGl2PgogICAgICAgIDxkaXYgY2xhc3M9InByb2MtZmlsdGVycyIgaWQ9InByb2MtZmlsdGVycyI+PC9kaXY+CiAgICAgICAgPGRpdiBpZD0icHJvYy12aWV3LWFyZWEiIHN0eWxlPSJkaXNwbGF5Om5vbmUiPjwvZGl2PgogICAgICAgIDxkaXYgY2xhc3M9InByb2MtbGlzdCIgaWQ9InByb2MtbGlzdCI+PC9kaXY+CiAgICA8L2Rpdj4KCjwvZGl2PjwhLS0gL21haW4tY29udGVudCAtLT4KCjxkaXYgaWQ9InByaW50LXpvbmUiIGNsYXNzPSJwcmludC1hcmVhIj48L2Rpdj4KCjxzY3JpcHQ+CiAgICBsZXQgYXBwRGF0YSA9IHsgCiAgICAgICAgc2V0dGluZ3M6IHsgc2Nob29sOiAiTHljw6llIiwgdXNlcjogIlByb3Zpc2V1ciIsIGxvZ286ICIiLCBzaWduYXR1cmU6ICIiLCBjdXN0b21FbnRUeXBlczogW10sIGN1c3RvbVJldVR5cGVzOiBbXSwgem9uZTogIkIiIH0sIAogICAgICAgIGVudHJldGllbnM6IFtdLCByZXVuaW9uczogW10sIHN1aXZpRWxldmVzOiBbXSwgCiAgICAgICAgdG9kbzogeyB1cmdlbnQ6W10sIHBsYW46W10sIHBvc3NpYmxlOltdLCBkZWxlZ2F0ZTpbXSB9LCAKICAgICAgICBjYWxlbmRhcjogW10sCiAgICAgICAgZXZlbnRzOiBbXSwKICAgICAgICAgICAgcHJvY2VkdXJlczogW10sCiAgICAgICAgZ2FudHQ6IFtdCiAgICB9OwogICAgbGV0IGNoYXJ0SW5zdGFuY2VzID0ge307CiAgICBsZXQgY3VycmVudEVkaXRJZCA9IG51bGw7CiAgICBsZXQgY3VycmVudEVkaXRUeXBlID0gbnVsbDsgCgogICAgd2luZG93Lm9ubG9hZCA9ICgpID0+IHsKICAgICAgICBpbml0V29yZFBhc3RlKCk7CiAgICAgICAgbG9hZERhdGEoKTsKICAgICAgICByZXNldEFsbERhdGVzKCk7CiAgICAgICAgaW5pdERvY1RlbXBsYXRlcygpOwogICAgICAgIHJlbmRlclRvZG8oKTsgY2hlY2tEYWlseVRhc2tzKCk7IHVwZGF0ZVByZXZpZXdzKCk7IHN3aXRjaE1lbnUoJ21lbnUyJyk7IGFwcGx5U2VwYXJhdG9ycygpOwogICAgICAgIGxvYWRDdXN0b21UeXBlcygpOwogICAgfTsKCiAgICBmdW5jdGlvbiByZXNldEFsbERhdGVzKCkgewogICAgICAgIGNvbnN0IHRvZGF5ID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpLnNwbGl0KCdUJylbMF07CiAgICAgICAgWydlbnQtZGF0ZScsJ3JldS1kYXRlJywnZGlyLWRhdGUnLCdzdWl2aS1kYXRlJywnY2FsLWRhdGUnXS5mb3JFYWNoKGlkID0+IHsgY29uc3QgZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCk7IGlmKGVsKSBlbC52YWx1ZSA9IHRvZGF5OyB9KTsKICAgIH0KCiAgICAKICAgIC8vIOKVkOKVkOKVkCBTQVVWRUdBUkRFIEZJQ0hJRVIgTE9DQUwg4pWQ4pWQ4pWQCiAgICB2YXIgX2ZpbGVIYW5kbGUgPSBudWxsOwogICAgdmFyIF9kaXJIYW5kbGUgPSBudWxsOwoKICAgIGZ1bmN0aW9uIHN0b3JlRGlySGFuZGxlKGhhbmRsZSl7CiAgICAgICAgb3BlbkhhbmRsZURCKCkudGhlbihmdW5jdGlvbihkYil7CiAgICAgICAgICAgIHZhciB0eD1kYi50cmFuc2FjdGlvbignaGFuZGxlcycsJ3JlYWR3cml0ZScpOwogICAgICAgICAgICB0eC5vYmplY3RTdG9yZSgnaGFuZGxlcycpLnB1dChoYW5kbGUsJ3NhdmVEaXInKTsKICAgICAgICB9KS5jYXRjaChmdW5jdGlvbigpe30pOwogICAgfQogICAgZnVuY3Rpb24gZ2V0U3RvcmVkRGlySGFuZGxlKCl7CiAgICAgICAgcmV0dXJuIG9wZW5IYW5kbGVEQigpLnRoZW4oZnVuY3Rpb24oZGIpewogICAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSl7CiAgICAgICAgICAgICAgICB2YXIgdHg9ZGIudHJhbnNhY3Rpb24oJ2hhbmRsZXMnLCdyZWFkb25seScpOwogICAgICAgICAgICAgICAgdmFyIHJxPXR4Lm9iamVjdFN0b3JlKCdoYW5kbGVzJykuZ2V0KCdzYXZlRGlyJyk7CiAgICAgICAgICAgICAgICBycS5vbnN1Y2Nlc3M9ZnVuY3Rpb24oKXtyZXNvbHZlKHJxLnJlc3VsdHx8bnVsbCk7fTsKICAgICAgICAgICAgICAgIHJxLm9uZXJyb3I9ZnVuY3Rpb24oKXtyZXNvbHZlKG51bGwpO307CiAgICAgICAgICAgIH0pOwogICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uKCl7cmV0dXJuIG51bGw7fSk7CiAgICB9CgogICAgLy8gSW5kZXhlZERCIHBvdXIgcGVyc2lzdGVyIGxlIGZpbGVIYW5kbGUgZW50cmUgc2Vzc2lvbnMKICAgIGZ1bmN0aW9uIG9wZW5IYW5kbGVEQigpewogICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLHJlamVjdCl7CiAgICAgICAgICAgIHZhciBycT1pbmRleGVkREIub3BlbignY2FkaXJfaGFuZGxlcycsMSk7CiAgICAgICAgICAgIHJxLm9udXBncmFkZW5lZWRlZD1mdW5jdGlvbihlKXtlLnRhcmdldC5yZXN1bHQuY3JlYXRlT2JqZWN0U3RvcmUoJ2hhbmRsZXMnKTt9OwogICAgICAgICAgICBycS5vbnN1Y2Nlc3M9ZnVuY3Rpb24oZSl7cmVzb2x2ZShlLnRhcmdldC5yZXN1bHQpO307CiAgICAgICAgICAgIHJxLm9uZXJyb3I9ZnVuY3Rpb24oKXtyZWplY3QoKTt9OwogICAgICAgIH0pOwogICAgfQogICAgZnVuY3Rpb24gc3RvcmVIYW5kbGUoaGFuZGxlKXsKICAgICAgICBvcGVuSGFuZGxlREIoKS50aGVuKGZ1bmN0aW9uKGRiKXsKICAgICAgICAgICAgdmFyIHR4PWRiLnRyYW5zYWN0aW9uKCdoYW5kbGVzJywncmVhZHdyaXRlJyk7CiAgICAgICAgICAgIHR4Lm9iamVjdFN0b3JlKCdoYW5kbGVzJykucHV0KGhhbmRsZSwnc2F2ZUZpbGUnKTsKICAgICAgICB9KS5jYXRjaChmdW5jdGlvbigpe30pOwogICAgfQogICAgZnVuY3Rpb24gZ2V0U3RvcmVkSGFuZGxlKCl7CiAgICAgICAgcmV0dXJuIG9wZW5IYW5kbGVEQigpLnRoZW4oZnVuY3Rpb24oZGIpewogICAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSl7CiAgICAgICAgICAgICAgICB2YXIgdHg9ZGIudHJhbnNhY3Rpb24oJ2hhbmRsZXMnLCdyZWFkb25seScpOwogICAgICAgICAgICAgICAgdmFyIHJxPXR4Lm9iamVjdFN0b3JlKCdoYW5kbGVzJykuZ2V0KCdzYXZlRmlsZScpOwogICAgICAgICAgICAgICAgcnEub25zdWNjZXNzPWZ1bmN0aW9uKCl7cmVzb2x2ZShycS5yZXN1bHR8fG51bGwpO307CiAgICAgICAgICAgICAgICBycS5vbmVycm9yPWZ1bmN0aW9uKCl7cmVzb2x2ZShudWxsKTt9OwogICAgICAgICAgICB9KTsKICAgICAgICB9KS5jYXRjaChmdW5jdGlvbigpe3JldHVybiBudWxsO30pOwogICAgfQogICAgZnVuY3Rpb24gY2xlYXJTdG9yZWRIYW5kbGUoKXsKICAgICAgICBvcGVuSGFuZGxlREIoKS50aGVuKGZ1bmN0aW9uKGRiKXsKICAgICAgICAgICAgdmFyIHR4PWRiLnRyYW5zYWN0aW9uKCdoYW5kbGVzJywncmVhZHdyaXRlJyk7CiAgICAgICAgICAgIHR4Lm9iamVjdFN0b3JlKCdoYW5kbGVzJykuZGVsZXRlKCdzYXZlRmlsZScpOwogICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uKCl7fSk7CiAgICB9CgogICAgLy8gQ2hvaXNpciB1biBmaWNoaWVyIGRlIHNhdXZlZ2FyZGUKICAgIGFzeW5jIGZ1bmN0aW9uIHBpY2tTYXZlRmlsZSgpewogICAgICAgIHRyeXsKICAgICAgICAgICAgLy8gQ2hvaXNpciB1biBkb3NzaWVyCiAgICAgICAgICAgIHZhciBkaXJIYW5kbGU9YXdhaXQgd2luZG93LnNob3dEaXJlY3RvcnlQaWNrZXIoe21vZGU6J3JlYWR3cml0ZSd9KTsKICAgICAgICAgICAgLy8gQ3LDqWVyIG91IG91dnJpciBsZSBmaWNoaWVyIGRhbnMgY2UgZG9zc2llcgogICAgICAgICAgICB2YXIgZmlsZUhhbmRsZT1hd2FpdCBkaXJIYW5kbGUuZ2V0RmlsZUhhbmRsZSgnY2FkaXJfZGF0YS5qc29uJyx7Y3JlYXRlOnRydWV9KTsKICAgICAgICAgICAgX2ZpbGVIYW5kbGU9ZmlsZUhhbmRsZTsKICAgICAgICAgICAgX2RpckhhbmRsZT1kaXJIYW5kbGU7CiAgICAgICAgICAgIHN0b3JlSGFuZGxlKGZpbGVIYW5kbGUpOwogICAgICAgICAgICBzdG9yZURpckhhbmRsZShkaXJIYW5kbGUpOwogICAgICAgICAgICBhd2FpdCB3cml0ZVRvRmlsZSgpOwogICAgICAgICAgICB1cGRhdGVGaWxlVUkoKTsKICAgICAgICB9Y2F0Y2goZSl7CiAgICAgICAgICAgIGlmKGUubmFtZSE9PSdBYm9ydEVycm9yJykgYWxlcnQoJ0VycmV1ciA6ICcrZS5tZXNzYWdlKTsKICAgICAgICB9CiAgICB9CgogICAgLy8gQXVzc2kgcGVybWV0dHJlIGRlIGNob2lzaXIgdW4gZmljaGllciBleGlzdGFudAogICAgYXN5bmMgZnVuY3Rpb24gcGlja0V4aXN0aW5nRmlsZSgpewogICAgICAgIHRyeXsKICAgICAgICAgICAgdmFyIGhhbmRsZXM9YXdhaXQgd2luZG93LnNob3dPcGVuRmlsZVBpY2tlcih7CiAgICAgICAgICAgICAgICB0eXBlczpbe2Rlc2NyaXB0aW9uOidKU09OJyxhY2NlcHQ6eydhcHBsaWNhdGlvbi9qc29uJzpbJy5qc29uJ119fV0KICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHZhciBoYW5kbGU9aGFuZGxlc1swXTsKICAgICAgICAgICAgX2ZpbGVIYW5kbGU9aGFuZGxlOwogICAgICAgICAgICBzdG9yZUhhbmRsZShoYW5kbGUpOwogICAgICAgICAgICAvLyBDaGFyZ2VyIGxlcyBkb25uw6llcyBkZXB1aXMgbGUgZmljaGllcgogICAgICAgICAgICB2YXIgbG9hZGVkPWF3YWl0IGxvYWRGcm9tRmlsZSgpOwogICAgICAgICAgICB1cGRhdGVGaWxlVUkoKTsKICAgICAgICAgICAgaWYobG9hZGVkKXtsb2NhdGlvbi5yZWxvYWQoKTt9CiAgICAgICAgfWNhdGNoKGUpewogICAgICAgICAgICBpZihlLm5hbWUhPT0nQWJvcnRFcnJvcicpIGFsZXJ0KCdFcnJldXIgOiAnK2UubWVzc2FnZSk7CiAgICAgICAgfQogICAgfQoKICAgIC8vIMOJY3JpcmUgZGFucyBsZSBmaWNoaWVyIGNob2lzaQogICAgYXN5bmMgZnVuY3Rpb24gd3JpdGVUb0ZpbGUoKXsKICAgICAgICBpZighX2ZpbGVIYW5kbGUpcmV0dXJuOwogICAgICAgIHRyeXsKICAgICAgICAgICAgdmFyIHdyaXRhYmxlPWF3YWl0IF9maWxlSGFuZGxlLmNyZWF0ZVdyaXRhYmxlKCk7CiAgICAgICAgICAgIGF3YWl0IHdyaXRhYmxlLndyaXRlKEpTT04uc3RyaW5naWZ5KGFwcERhdGEsbnVsbCwyKSk7CiAgICAgICAgICAgIGF3YWl0IHdyaXRhYmxlLmNsb3NlKCk7CiAgICAgICAgfWNhdGNoKGUpewogICAgICAgICAgICBjb25zb2xlLndhcm4oJ8OJY3JpdHVyZSBmaWNoaWVyIMOpY2hvdcOpZTonLGUpOwogICAgICAgICAgICAvLyBTaSBwZXJtaXNzaW9uIHJlZnVzw6llLCB0ZW50ZXIgZGUgcmVkZW1hbmRlcgogICAgICAgICAgICBpZihlLm5hbWU9PT0nTm90QWxsb3dlZEVycm9yJyl7CiAgICAgICAgICAgICAgICB0cnl7CiAgICAgICAgICAgICAgICAgICAgdmFyIHBlcm09YXdhaXQgX2ZpbGVIYW5kbGUucmVxdWVzdFBlcm1pc3Npb24oe21vZGU6J3JlYWR3cml0ZSd9KTsKICAgICAgICAgICAgICAgICAgICBpZihwZXJtPT09J2dyYW50ZWQnKXsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHcyPWF3YWl0IF9maWxlSGFuZGxlLmNyZWF0ZVdyaXRhYmxlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHcyLndyaXRlKEpTT04uc3RyaW5naWZ5KGFwcERhdGEsbnVsbCwyKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHcyLmNsb3NlKCk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfWNhdGNoKGUyKXtjb25zb2xlLndhcm4oJ1Blcm1pc3Npb24gcmVmdXPDqWU6JyxlMik7fQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQoKICAgIC8vIENoYXJnZXIgZGVwdWlzIGxlIGZpY2hpZXIKICAgIGFzeW5jIGZ1bmN0aW9uIGxvYWRGcm9tRmlsZSgpewogICAgICAgIGlmKCFfZmlsZUhhbmRsZSlyZXR1cm4gZmFsc2U7CiAgICAgICAgdHJ5ewogICAgICAgICAgICB2YXIgcGVybT1hd2FpdCBfZmlsZUhhbmRsZS5xdWVyeVBlcm1pc3Npb24oe21vZGU6J3JlYWR3cml0ZSd9KTsKICAgICAgICAgICAgaWYocGVybSE9PSdncmFudGVkJyl7CiAgICAgICAgICAgICAgICBwZXJtPWF3YWl0IF9maWxlSGFuZGxlLnJlcXVlc3RQZXJtaXNzaW9uKHttb2RlOidyZWFkd3JpdGUnfSk7CiAgICAgICAgICAgICAgICBpZihwZXJtIT09J2dyYW50ZWQnKXJldHVybiBmYWxzZTsKICAgICAgICAgICAgfQogICAgICAgICAgICB2YXIgZmlsZT1hd2FpdCBfZmlsZUhhbmRsZS5nZXRGaWxlKCk7CiAgICAgICAgICAgIHZhciB0ZXh0PWF3YWl0IGZpbGUudGV4dCgpOwogICAgICAgICAgICB2YXIgZGF0YT1KU09OLnBhcnNlKHRleHQpOwogICAgICAgICAgICBhcHBEYXRhPWRhdGE7CiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdwZXJkaXJfcGlsb3RlX3YxMCcsSlNPTi5zdHJpbmdpZnkoYXBwRGF0YSkpOwogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9Y2F0Y2goZSl7CiAgICAgICAgICAgIGNvbnNvbGUud2FybignTGVjdHVyZSBmaWNoaWVyIMOpY2hvdcOpZTonLGUpOwogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQogICAgfQoKICAgIC8vIETDqWxpZXIgbGUgZmljaGllcgogICAgZnVuY3Rpb24gdW5saW5rRmlsZSgpewogICAgICAgIGlmKGNvbmZpcm0oJ0TDqWxpZXIgbGUgZG9zc2llciBkZSBzYXV2ZWdhcmRlID9cbkxlcyBkb25uw6llcyByZXN0ZXJvbnQgZGFucyBsZSBuYXZpZ2F0ZXVyLicpKXsKICAgICAgICAgICAgX2ZpbGVIYW5kbGU9bnVsbDsKICAgICAgICAgICAgX2RpckhhbmRsZT1udWxsOwogICAgICAgICAgICBjbGVhclN0b3JlZEhhbmRsZSgpOwogICAgICAgICAgICBvcGVuSGFuZGxlREIoKS50aGVuKGZ1bmN0aW9uKGRiKXt2YXIgdHg9ZGIudHJhbnNhY3Rpb24oJ2hhbmRsZXMnLCdyZWFkd3JpdGUnKTt0eC5vYmplY3RTdG9yZSgnaGFuZGxlcycpLmRlbGV0ZSgnc2F2ZURpcicpO30pLmNhdGNoKGZ1bmN0aW9uKCl7fSk7CiAgICAgICAgICAgIHVwZGF0ZUZpbGVVSSgpOwogICAgICAgIH0KICAgIH0KCiAgICAvLyBNaXNlIMOgIGpvdXIgZGUgbCdhZmZpY2hhZ2UKICAgIGZ1bmN0aW9uIHVwZGF0ZUZpbGVVSSgpewogICAgICAgIHZhciBlbD1kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmlsZS1saW5rLXN0YXR1cycpOwogICAgICAgIHZhciBidG49ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpbGUtdW5saW5rLWJ0bicpOwogICAgICAgIGlmKCFlbClyZXR1cm47CiAgICAgICAgaWYoX2ZpbGVIYW5kbGUpewogICAgICAgICAgICB2YXIgZGlyTmFtZT1fZGlySGFuZGxlP19kaXJIYW5kbGUubmFtZSsnLyc6Jyc7CiAgICAgICAgICAgIGVsLmlubmVySFRNTD0nPGkgY2xhc3M9ImZhcyBmYS1jaGVjay1jaXJjbGUiIHN0eWxlPSJjb2xvcjojMjJDNTVFIj48L2k+IDxzdHJvbmc+JytkaXJOYW1lK19maWxlSGFuZGxlLm5hbWUrJzwvc3Ryb25nPiA8c3BhbiBzdHlsZT0iY29sb3I6IzIyQzU1RTtmb250LXNpemU6LjdyZW0iPihzYXV2ZWdhcmRlIGF1dG9tYXRpcXVlKTwvc3Bhbj4nOwogICAgICAgICAgICBpZihidG4pYnRuLnN0eWxlLmRpc3BsYXk9J2lubGluZS1mbGV4JzsKICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgZWwuaW5uZXJIVE1MPSc8aSBjbGFzcz0iZmFzIGZhLXVubGluayIgc3R5bGU9ImNvbG9yOiNhYWEiPjwvaT4gPHNwYW4gc3R5bGU9ImNvbG9yOiM5OTkiPkF1Y3VuIGRvc3NpZXIgc8OpbGVjdGlvbm7DqTwvc3Bhbj4nOwogICAgICAgICAgICBpZihidG4pYnRuLnN0eWxlLmRpc3BsYXk9J25vbmUnOwogICAgICAgIH0KICAgIH0KCiAgICAvLyBSZXN0YXVyZXIgbGUgaGFuZGxlIGF1IGTDqW1hcnJhZ2UKICAgIGFzeW5jIGZ1bmN0aW9uIHJlc3RvcmVGaWxlSGFuZGxlKCl7CiAgICAgICAgaWYoIXdpbmRvdy5zaG93RGlyZWN0b3J5UGlja2VyJiYhd2luZG93LnNob3dTYXZlRmlsZVBpY2tlcilyZXR1cm47CiAgICAgICAgdmFyIGRoPWF3YWl0IGdldFN0b3JlZERpckhhbmRsZSgpOwogICAgICAgIGlmKGRoKV9kaXJIYW5kbGU9ZGg7CiAgICAgICAgdmFyIGhhbmRsZT1hd2FpdCBnZXRTdG9yZWRIYW5kbGUoKTsKICAgICAgICBpZihoYW5kbGUpewogICAgICAgICAgICBfZmlsZUhhbmRsZT1oYW5kbGU7CiAgICAgICAgICAgIHVwZGF0ZUZpbGVVSSgpOwogICAgICAgICAgICAvLyBUZW50ZXIgZGUgY2hhcmdlciBsZXMgZG9ubsOpZXMgZHUgZmljaGllciAocGx1cyByw6ljZW50ZXMgPykKICAgICAgICAgICAgdHJ5ewogICAgICAgICAgICAgICAgdmFyIHBlcm09YXdhaXQgaGFuZGxlLnF1ZXJ5UGVybWlzc2lvbih7bW9kZToncmVhZHdyaXRlJ30pOwogICAgICAgICAgICAgICAgaWYocGVybT09PSdncmFudGVkJyl7CiAgICAgICAgICAgICAgICAgICAgdmFyIGZpbGU9YXdhaXQgaGFuZGxlLmdldEZpbGUoKTsKICAgICAgICAgICAgICAgICAgICB2YXIgdGV4dD1hd2FpdCBmaWxlLnRleHQoKTsKICAgICAgICAgICAgICAgICAgICB2YXIgZmlsZURhdGE9SlNPTi5wYXJzZSh0ZXh0KTsKICAgICAgICAgICAgICAgICAgICAvLyBDb21wYXJlciBsZXMgdGltZXN0YW1wcyBwb3VyIHByZW5kcmUgbGUgcGx1cyByw6ljZW50CiAgICAgICAgICAgICAgICAgICAgdmFyIGZpbGVNb2Q9ZmlsZS5sYXN0TW9kaWZpZWR8fDA7CiAgICAgICAgICAgICAgICAgICAgdmFyIGxvY2FsU3RyPWxvY2FsU3RvcmFnZS5nZXRJdGVtKCdwZXJkaXJfcGlsb3RlX3YxMCcpOwogICAgICAgICAgICAgICAgICAgIGlmKGxvY2FsU3RyKXsKICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgbGUgZmljaGllciBlc3QgcGx1cyByw6ljZW50LCBjaGFyZ2VyIGRlcHVpcyBsZSBmaWNoaWVyCiAgICAgICAgICAgICAgICAgICAgICAgIGFwcERhdGE9ZmlsZURhdGE7CiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdwZXJkaXJfcGlsb3RlX3YxMCcsSlNPTi5zdHJpbmdpZnkoYXBwRGF0YSkpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfWNhdGNoKGUpe2NvbnNvbGUubG9nKCdSZXN0YXVyYXRpb24gYXV0bzogZW4gYXR0ZW50ZSBkZSBwZXJtaXNzaW9uIHV0aWxpc2F0ZXVyJyk7fQogICAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBzYXZlRGF0YSgpewogICAgICAgIHRyeXtsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgncGVyZGlyX3BpbG90ZV92MTAnLEpTT04uc3RyaW5naWZ5KGFwcERhdGEpKTtpZihfZmlsZUhhbmRsZSl3cml0ZVRvRmlsZSgpO31jYXRjaChlKXtjb25zb2xlLmVycm9yKCdzYXZlRGF0YTonLGUpO30KICAgICAgICB0cnl7dmFyIG1zZz1kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYXV0by1zYXZlLW1zZycpO2lmKG1zZyl7bXNnLnN0eWxlLmRpc3BsYXk9J2ZsZXgnO3NldFRpbWVvdXQoZnVuY3Rpb24oKXttc2cuc3R5bGUuZGlzcGxheT0nbm9uZSc7fSwxMDAwKTt9fWNhdGNoKGUyKXt9CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIGxvYWREYXRhKCkgeyAKICAgICAgICBjb25zdCBkID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3BlcmRpcl9waWxvdGVfdjEwJyk7IAogICAgICAgIC8vIE1pZ3JhdGlvbiBkZXB1aXMgdjkuOSBzaSBuw6ljZXNzYWlyZQogICAgICAgIGNvbnN0IG9sZCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdwZXJkaXJfcGlsb3RlX3Y5Jyk7CiAgICAgICAgaWYoZCkgewogICAgICAgICAgICBhcHBEYXRhID0gSlNPTi5wYXJzZShkKTsgCiAgICAgICAgfSBlbHNlIGlmIChvbGQpIHsKICAgICAgICAgICAgYXBwRGF0YSA9IEpTT04ucGFyc2Uob2xkKTsKICAgICAgICAgICAgc2F2ZURhdGEoKTsgLy8gU2F2ZSBhcyBuZXcgdmVyc2lvbgogICAgICAgIH0KICAgICAgICAKICAgICAgICAvLyBJbml0IHN0cnVjdHVyZXMgaWYgbWlzc2luZwogICAgICAgIGlmKCFhcHBEYXRhLnRvZG8pIGFwcERhdGEudG9kbyA9IHsgdXJnZW50OltdLCBwbGFuOltdLCBwb3NzaWJsZTpbXSwgZGVsZWdhdGU6W10gfTsKICAgICAgICBpZighYXBwRGF0YS5zZXR0aW5ncy5jdXN0b21FbnRUeXBlcykgYXBwRGF0YS5zZXR0aW5ncy5jdXN0b21FbnRUeXBlcyA9IFtdOwogICAgICAgIGlmKCFhcHBEYXRhLnNldHRpbmdzLmN1c3RvbVJldVR5cGVzKSBhcHBEYXRhLnNldHRpbmdzLmN1c3RvbVJldVR5cGVzID0gW107CiAgICB9CgogICAgZnVuY3Rpb24gYWRkQ3VzdG9tVHlwZShzZWxlY3RJZCkgewogICAgICAgIGNvbnN0IG5ld1R5cGUgPSBwcm9tcHQoIkVudHJleiBsZSBub3V2ZWF1IHR5cGUgOiIpOwogICAgICAgIGlmIChuZXdUeXBlKSB7CiAgICAgICAgICAgIGNvbnN0IHNlbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHNlbGVjdElkKTsKICAgICAgICAgICAgY29uc3Qgb3B0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnb3B0aW9uJyk7CiAgICAgICAgICAgIG9wdC50ZXh0ID0gbmV3VHlwZTsKICAgICAgICAgICAgc2VsLmFkZChvcHQsIHNlbFtzZWwubGVuZ3RoIC0gMV0pOwogICAgICAgICAgICBzZWwudmFsdWUgPSBuZXdUeXBlOwogICAgICAgICAgICBpZihzZWxlY3RJZCA9PT0gJ2VudC10eXBlJykgYXBwRGF0YS5zZXR0aW5ncy5jdXN0b21FbnRUeXBlcy5wdXNoKG5ld1R5cGUpOwogICAgICAgICAgICBlbHNlIGFwcERhdGEuc2V0dGluZ3MuY3VzdG9tUmV1VHlwZXMucHVzaChuZXdUeXBlKTsKICAgICAgICAgICAgc2F2ZURhdGEoKTsKICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gbG9hZEN1c3RvbVR5cGVzKCkgewogICAgICAgIGNvbnN0IGVudFNlbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlbnQtdHlwZScpOwogICAgICAgIGFwcERhdGEuc2V0dGluZ3MuY3VzdG9tRW50VHlwZXMuZm9yRWFjaCh0ID0+IHsgaWYoIUFycmF5LmZyb20oZW50U2VsLm9wdGlvbnMpLnNvbWUobyA9PiBvLnRleHQgPT09IHQpKSB7IGNvbnN0IG9wdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ29wdGlvbicpOyBvcHQudGV4dCA9IHQ7IGVudFNlbC5hZGQob3B0LCBlbnRTZWxbZW50U2VsLmxlbmd0aC0xXSk7IH0gfSk7CiAgICAgICAgY29uc3QgcmV1U2VsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JldS10eXBlJyk7CiAgICAgICAgYXBwRGF0YS5zZXR0aW5ncy5jdXN0b21SZXVUeXBlcy5mb3JFYWNoKHQgPT4geyBpZighQXJyYXkuZnJvbShyZXVTZWwub3B0aW9ucykuc29tZShvID0+IG8udGV4dCA9PT0gdCkpIHsgY29uc3Qgb3B0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnb3B0aW9uJyk7IG9wdC50ZXh0ID0gdDsgcmV1U2VsLmFkZChvcHQsIHJldVNlbFtyZXVTZWwubGVuZ3RoLTFdKTsgfSB9KTsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gc3dpdGNoTWVudShpZCkgewogICAgICAgIGlmKGlkID09PSAnbWVudTgnKSByZXNldEVkaXRNb2RlKCk7CiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLm1lbnUtaXRlbScpLmZvckVhY2goZWw9PmVsLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpKTsKICAgICAgICB2YXIgbWkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1tZW51PSInK2lkKyciXScpOwogICAgICAgIGlmKG1pKSBtaS5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTsKICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuc2VjdGlvbicpLmZvckVhY2goZWw9PmVsLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpKTsKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCkuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7CiAgICAgICAgY29uc3QgdCA9IHsnbWVudTEnOidQYXJhbcOodHJlcycsJ21lbnUyJzonVG8gRG8gTGlzdCcsJ21lbnUzJzonQ2FsZW5kcmllcicsJ21lbnU0JzonQ29uc2VpbCBkZSBEaXJlY3Rpb24nLCdtZW51NSc6J1N1aXZpIMOJbMOodmUnLCdtZW51Nic6J0VudHJldGllbnMnLCdtZW51Nyc6J1LDqXVuaW9ucycsJ21lbnU4JzonSGlzdG9yaXF1ZScsJ21lbnU5JzonVGFibGVhdSBkZSBCb3JkJywnbWVudTEwJzonQWN0aXZpdMOpcyBww6lkYWdvZ2lxdWVzJywnbWVudTExJzonw4ljaMOpYW5jZXMnLCdtZW51MTInOidQcm9jw6lkdXJlcyd9OwogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjdXJyZW50LXRpdGxlJykuaW5uZXJUZXh0ID0gdFtpZF0gfHwgJ0NBRElSJzsKICAgICAgICBpZihpZD09PSdtZW51MicpIHsgcmVuZGVyVG9kbygpOyBjaGVja0RhaWx5VGFza3MoKTsgfQogICAgICAgIGlmKGlkPT09J21lbnUzJykgeyByZW5kZXJVbmlmaWVkQ2FsKCk7IH0KICAgICAgICBpZihpZD09PSdtZW51OCcpIHJlbmRlckhpc3RvcnkoKTsKICAgICAgICBpZihpZD09PSdtZW51OScpIHJlbmRlckRhc2hib2FyZCgpOwogICAgICAgIGlmKGlkPT09J21lbnUxJyl7bG9hZFNldHRpbmdzVUkoKTt1cGRhdGVGaWxlVUkoKTt9CiAgICAgICAgaWYoaWQ9PT0nbWVudTEwJykgcmVuZGVyRXZlbnRzKCk7CiAgICAgICAgaWYoaWQ9PT0nbWVudTEyJyl7YXV0b1Jlc2V0RG9uZSgpO3JlbmRlclByb2NlZHVyZXMoKTt9CiAgICAgICAgaWYoaWQ9PT0nbWVudTExJykgeyBhdXRvUmVzZXREb25lKCk7IGlmKCF3aW5kb3cuX2dhbnR0UmVhZHkpIGluaXRHYW50dFZpZXcoKTsgZ3RUb2RheSgpOyB9CiAgICB9CgogICAgCiAgICAvLyDilZDilZDilZAgVEVNUExBVEVTIFBBUiBEw4lGQVVUIOKVkOKVkOKVkAogICAgdmFyIERFRkFVTFRfVEVNUExBVEVTID0gewogICAgICAgIGVudDogJzxwPjxzdHJvbmc+T2JqZXQgOjwvc3Ryb25nPiAuLi48L3A+PHA+PHN0cm9uZz7DiWNoYW5nZXMgOjwvc3Ryb25nPjwvcD48dWw+PGxpPi4uLjwvbGk+PC91bD48cD48c3Ryb25nPkTDqWNpc2lvbnMgOjwvc3Ryb25nPjwvcD48cD4uLi48L3A+JywKICAgICAgICByZXU6ICc8cD48c3Ryb25nPk9yZHJlIGR1IGpvdXIgOjwvc3Ryb25nPiAuLi48L3A+PHA+PHN0cm9uZz5Ew6lsaWLDqXJhdGlvbnMgOjwvc3Ryb25nPjwvcD48dWw+PGxpPi4uLjwvbGk+PC91bD4nLAogICAgICAgIGRpcjogJzxwPjxzdHJvbmc+VGjDqG1lcyBhYm9yZMOpcyA6PC9zdHJvbmc+PC9wPjx1bD48bGk+UMOpZGFnb2dpZSA6IC4uLjwvbGk+PGxpPlZpZSBTY29sYWlyZSA6IC4uLjwvbGk+PGxpPlPDqWN1cml0w6kgOiAuLi48L2xpPjxsaT5EaXZlcnMgOiAuLi48L2xpPjwvdWw+JywKICAgICAgICBzdWl2aTogJzxwPjxzdHJvbmc+U2l0dWF0aW9ucyDDqWzDqHZlcyA6PC9zdHJvbmc+PC9wPjx1bD48bGk+W05PTSBQcsOpbm9tXSA6IC4uLjwvbGk+PC91bD4nCiAgICB9OwoKICAgIGZ1bmN0aW9uIGxvYWRUZW1wbGF0ZXNVSSgpIHsKICAgICAgICB2YXIgdHBscyA9IGFwcERhdGEuc2V0dGluZ3MudGVtcGxhdGVzIHx8IERFRkFVTFRfVEVNUExBVEVTOwogICAgICAgIHZhciBlbDsKICAgICAgICBlbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0cGwtZW50Jyk7IGlmIChlbCkgZWwuaW5uZXJIVE1MID0gdHBscy5lbnQgfHwgREVGQVVMVF9URU1QTEFURVMuZW50OwogICAgICAgIGVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RwbC1yZXUnKTsgaWYgKGVsKSBlbC5pbm5lckhUTUwgPSB0cGxzLnJldSB8fCBERUZBVUxUX1RFTVBMQVRFUy5yZXU7CiAgICAgICAgZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndHBsLWRpcicpOyBpZiAoZWwpIGVsLmlubmVySFRNTCA9IHRwbHMuZGlyIHx8IERFRkFVTFRfVEVNUExBVEVTLmRpcjsKICAgICAgICBlbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0cGwtc3VpdmknKTsgaWYgKGVsKSBlbC5pbm5lckhUTUwgPSB0cGxzLnN1aXZpIHx8IERFRkFVTFRfVEVNUExBVEVTLnN1aXZpOwogICAgfQoKICAgIGZ1bmN0aW9uIHNhdmVUZW1wbGF0ZXMoKSB7CiAgICAgICAgaWYgKCFhcHBEYXRhLnNldHRpbmdzKSBhcHBEYXRhLnNldHRpbmdzID0ge307CiAgICAgICAgYXBwRGF0YS5zZXR0aW5ncy50ZW1wbGF0ZXMgPSB7CiAgICAgICAgICAgIGVudDogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RwbC1lbnQnKS5pbm5lckhUTUwsCiAgICAgICAgICAgIHJldTogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RwbC1yZXUnKS5pbm5lckhUTUwsCiAgICAgICAgICAgIGRpcjogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RwbC1kaXInKS5pbm5lckhUTUwsCiAgICAgICAgICAgIHN1aXZpOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndHBsLXN1aXZpJykuaW5uZXJIVE1MCiAgICAgICAgfTsKICAgICAgICBzYXZlRGF0YSgpOwogICAgICAgIGFsZXJ0KCdNb2TDqGxlcyBlbnJlZ2lzdHLDqXMgIScpOwogICAgfQoKICAgIGZ1bmN0aW9uIGdldFRlbXBsYXRlKHR5cGUpIHsKICAgICAgICB2YXIgdHBscyA9IChhcHBEYXRhLnNldHRpbmdzICYmIGFwcERhdGEuc2V0dGluZ3MudGVtcGxhdGVzKSA/IGFwcERhdGEuc2V0dGluZ3MudGVtcGxhdGVzIDogREVGQVVMVF9URU1QTEFURVM7CiAgICAgICAgcmV0dXJuIHRwbHNbdHlwZV0gfHwgREVGQVVMVF9URU1QTEFURVNbdHlwZV0gfHwgJyc7CiAgICB9CgogICAgZnVuY3Rpb24gaW5pdERvY1RlbXBsYXRlcygpIHsKICAgICAgICBjb25zdCBoZWFkZXIgPSBgPGRpdiBjbGFzcz0ibm8tcHJpbnQiIHN0eWxlPSJtYXJnaW4tYm90dG9tOjIwcHg7IGJvcmRlci1ib3R0b206MXB4IHNvbGlkICNlZWU7IHBhZGRpbmctYm90dG9tOjEwcHg7Ij48c3Ryb25nPiR7YXBwRGF0YS5zZXR0aW5ncy5zY2hvb2x9PC9zdHJvbmc+IHwgRGlyZWN0aW9uPC9kaXY+YDsKICAgICAgICBjb25zdCBlbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZW50LWNvbnRlbnUnKTsgY29uc3QgcmV1ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JldS1jb250ZW51Jyk7CiAgICAgICAgY29uc3QgZGlyYyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkaXItY29udGVudScpOyBjb25zdCBkaXJuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Rpci1ub3RlcycpOwogICAgICAgIGNvbnN0IHN1aSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzdWl2aS1jb250ZW51Jyk7CgogICAgICAgIGlmKGVudCAmJiBlbnQuaW5uZXJUZXh0LnRyaW0oKT09PSIiKSBlbnQuaW5uZXJIVE1MID0gaGVhZGVyICsgZ2V0VGVtcGxhdGUoJ2VudCcpOwogICAgICAgIGlmKHJldSAmJiByZXUuaW5uZXJUZXh0LnRyaW0oKT09PSIiKSByZXUuaW5uZXJIVE1MID0gaGVhZGVyICsgZ2V0VGVtcGxhdGUoJ3JldScpOwogICAgICAgIGlmKGRpcmMgJiYgZGlyYy5pbm5lclRleHQudHJpbSgpPT09IiIpIGRpcmMuaW5uZXJIVE1MID0gZ2V0VGVtcGxhdGUoJ2RpcicpOwogICAgICAgIGlmKGRpcm4gJiYgZGlybi5pbm5lclRleHQudHJpbSgpPT09IiIpIGRpcm4uaW5uZXJIVE1MID0gYDxwPjxlbT5Ob3RlcyBkZSBzw6lhbmNlLi4uPC9lbT48L3A+YDsKICAgICAgICBpZihzdWkgJiYgc3VpLmlubmVyVGV4dC50cmltKCk9PT0iIikgc3VpLmlubmVySFRNTCA9IGhlYWRlciArIGdldFRlbXBsYXRlKCdzdWl2aScpOwogICAgfQoKICAgIGZ1bmN0aW9uIHJhelBhZ2UobW9kZSkgewogICAgICAgIGlmKCFjb25maXJtKCJFZmZhY2VyIHRvdXQgbGUgY29udGVudSBkZSBjZXR0ZSBwYWdlID8iKSkgcmV0dXJuOwogICAgICAgIHJlc2V0RWRpdE1vZGUoKTsKICAgICAgICBjb25zdCB0b2RheSA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKS5zcGxpdCgnVCcpWzBdOwogICAgICAgIGlmKG1vZGUgPT09ICdESVInKSB7IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkaXItZGF0ZScpLnZhbHVlID0gdG9kYXk7IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkaXItcGFydHMnKS52YWx1ZSA9ICIiOyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGlyLWNvbnRlbnUnKS5pbm5lckhUTUwgPSAiIjsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Rpci1ub3RlcycpLmlubmVySFRNTCA9ICIiOyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGlyLWF0dGFjaG1lbnRzJykuaW5uZXJIVE1MID0gIiI7IH0KICAgICAgICBlbHNlIGlmIChtb2RlID09PSAnU1VJVkknKSB7IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzdWl2aS1kYXRlJykudmFsdWUgPSB0b2RheTsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N1aXZpLXBhcnRzJykudmFsdWUgPSAiIjsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N1aXZpLWNsYXNzZXMnKS52YWx1ZSA9ICIiOyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3VpdmktY29udGVudScpLmlubmVySFRNTCA9ICIiOyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3VpdmktYXR0YWNobWVudHMnKS5pbm5lckhUTUwgPSAiIjsgfQogICAgICAgIGVsc2UgaWYgKG1vZGUgPT09ICdFTlQnKSB7IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlbnQtZGF0ZScpLnZhbHVlID0gdG9kYXk7IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlbnQtb2JqZXQnKS52YWx1ZSA9ICIiOyByZXNldE11bHRpKCdlbnQtc3R1ZGVudHMtY29udGFpbmVyJywgJ2VudC1zdHVkZW50JywgJ05vbSDDiWzDqHZlJyk7IHJlc2V0TXVsdGkoJ2VudC10ZWFjaGVycy1jb250YWluZXInLCAnZW50LXRlYWNoZXInLCAnTm9tIFBlcnNvbm5lbCcpOyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZW50LWNvbnRlbnUnKS5pbm5lckhUTUwgPSAiIjsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VudC1hdHRhY2htZW50cycpLmlubmVySFRNTCA9ICIiOyB9CiAgICAgICAgZWxzZSBpZiAobW9kZSA9PT0gJ1JFVScpIHsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JldS1kYXRlJykudmFsdWUgPSB0b2RheTsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JldS1vZGonKS52YWx1ZSA9ICIiOyByZXNldE11bHRpKCdyZXUtc3R1ZGVudHMtY29udGFpbmVyJywgJ3JldS1zdHVkZW50JywgJ05vbSDDiWzDqHZlJyk7IHJlc2V0TXVsdGkoJ3JldS10ZWFjaGVycy1jb250YWluZXInLCAncmV1LXRlYWNoZXInLCAnTm9tIFBlcnNvbm5lbCcpOyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmV1LWNvbnRlbnUnKS5pbm5lckhUTUwgPSAiIjsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JldS1hdHRhY2htZW50cycpLmlubmVySFRNTCA9ICIiOyB9CiAgICAgICAgaW5pdERvY1RlbXBsYXRlcygpOwogICAgfQoKICAgIC8vIC0tLSBUT0RPIExPR0lDIChJTVBST1ZFRCBSRU9SREVSSU5HKSAtLS0KICAgIGxldCBkcmFnZ2VkSXRlbUlkID0gbnVsbDsKICAgIGxldCBzb3VyY2VDb2x1bW4gPSBudWxsOwogICAgCiAgICBmdW5jdGlvbiBhZGRUb2RvKHR5cGUpIHsgY29uc3QgdD1kb2N1bWVudC5nZXRFbGVtZW50QnlJZChgdG9kby1pbnB1dC0ke3R5cGV9YCkudmFsdWUudHJpbSgpOyBpZih0KXsgYXBwRGF0YS50b2RvW3R5cGVdLnB1c2goe2lkOkRhdGUubm93KCkudG9TdHJpbmcoKSwgdGV4dDp0LCBpc0Zyb21BZ2VuZGE6ZmFsc2V9KTsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYHRvZG8taW5wdXQtJHt0eXBlfWApLnZhbHVlPSIiOyBzYXZlRGF0YSgpOyByZW5kZXJUb2RvKCk7IH0gfQogICAgZnVuY3Rpb24gcmVtb3ZlVG9kbyh0eXBlLCBpZCkgeyBhcHBEYXRhLnRvZG9bdHlwZV0gPSBhcHBEYXRhLnRvZG9bdHlwZV0uZmlsdGVyKHQgPT4gdC5pZC50b1N0cmluZygpICE9PSBpZC50b1N0cmluZygpKTsgc2F2ZURhdGEoKTsgcmVuZGVyVG9kbygpOyB9CiAgICBmdW5jdGlvbiB1cGRhdGVUb2RvVGV4dCh0eXBlLCBpZCwgbmV3VGV4dCkgeyBjb25zdCBpdGVtID0gYXBwRGF0YS50b2RvW3R5cGVdLmZpbmQodCA9PiB0LmlkLnRvU3RyaW5nKCkgPT09IGlkLnRvU3RyaW5nKCkpOyBpZihpdGVtKSB7IGl0ZW0udGV4dCA9IG5ld1RleHQ7IHNhdmVEYXRhKCk7IH0gfQogICAgZnVuY3Rpb24gaGFuZGxlRW50ZXIoZSx0KXsgaWYoZS5rZXk9PT0nRW50ZXInKSBhZGRUb2RvKHQpOyB9CiAgICAKICAgIGZ1bmN0aW9uIGRyYWdUb2RvKGUsIGlkLCBzb3VyY2VDb2wpIHsgCiAgICAgICAgZHJhZ2dlZEl0ZW1JZCA9IGlkLnRvU3RyaW5nKCk7IAogICAgICAgIHNvdXJjZUNvbHVtbiA9IHNvdXJjZUNvbDsgCiAgICAgICAgZS5kYXRhVHJhbnNmZXIuc2V0RGF0YSgidGV4dC9wbGFpbiIsIGlkKTsgCiAgICAgICAgZS5kYXRhVHJhbnNmZXIuZWZmZWN0QWxsb3dlZCA9ICJtb3ZlIjsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gYWxsb3dEcm9wKGUpIHsgCiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOyAKICAgICAgICBjb25zdCB0YXJnZXRJdGVtID0gZS50YXJnZXQuY2xvc2VzdCgnLnRvZG8taXRlbScpOwogICAgICAgIGlmICh0YXJnZXRJdGVtKSB7CiAgICAgICAgICAgIHRhcmdldEl0ZW0uY2xhc3NMaXN0LmFkZCgnZHJhZy1vdmVyLWl0ZW0nKTsKICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnRvZG8taXRlbScpLmZvckVhY2goZWwgPT4gewogICAgICAgICAgICAgICAgaWYoZWwgIT09IHRhcmdldEl0ZW0pIGVsLmNsYXNzTGlzdC5yZW1vdmUoJ2RyYWctb3Zlci1pdGVtJyk7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGUuY3VycmVudFRhcmdldC5jbGFzc0xpc3QuYWRkKCJkcmFnLW92ZXIiKTsgCiAgICAgICAgfQogICAgfQogICAgCiAgICBmdW5jdGlvbiBkcmFnTGVhdmUoZSkgeyAKICAgICAgICBlLmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgiZHJhZy1vdmVyIik7CiAgICAgICAgaWYoZS50YXJnZXQuY2xvc2VzdCgnLnRvZG8taXRlbScpKSBlLnRhcmdldC5jbG9zZXN0KCcudG9kby1pdGVtJykuY2xhc3NMaXN0LnJlbW92ZSgnZHJhZy1vdmVyLWl0ZW0nKTsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gZHJvcChlLCB0YXJnZXRDb2wpIHsKICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnRvZG8tbGlzdCcpLmZvckVhY2goZWwgPT4gZWwuY2xhc3NMaXN0LnJlbW92ZSgnZHJhZy1vdmVyJykpOwogICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy50b2RvLWl0ZW0nKS5mb3JFYWNoKGVsID0+IGVsLmNsYXNzTGlzdC5yZW1vdmUoJ2RyYWctb3Zlci1pdGVtJykpOwoKICAgICAgICBpZiAoc291cmNlQ29sdW1uID09PSAnQUdFTkRBX1NPVVJDRScpIHsKICAgICAgICAgICAgY29uc3QgYWdUYXNrID0gYXBwRGF0YS5jYWxlbmRhci5maW5kKGMgPT4gYy5pZC50b1N0cmluZygpID09PSBkcmFnZ2VkSXRlbUlkKTsKICAgICAgICAgICAgaWYoYWdUYXNrKSBhcHBEYXRhLnRvZG9bdGFyZ2V0Q29sXS5wdXNoKHtpZDogRGF0ZS5ub3coKS50b1N0cmluZygpLCB0ZXh0OiBhZ1Rhc2sudGFzaywgaXNGcm9tQWdlbmRhOiB0cnVlfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgY29uc3Qgc291cmNlTGlzdCA9IGFwcERhdGEudG9kb1tzb3VyY2VDb2x1bW5dOwogICAgICAgICAgICBjb25zdCBpdGVtSWR4ID0gc291cmNlTGlzdC5maW5kSW5kZXgodCA9PiB0LmlkLnRvU3RyaW5nKCkgPT09IGRyYWdnZWRJdGVtSWQpOwogICAgICAgICAgICBpZihpdGVtSWR4ID09PSAtMSkgcmV0dXJuOwogICAgICAgICAgICBjb25zdCBbbW92ZWRJdGVtXSA9IHNvdXJjZUxpc3Quc3BsaWNlKGl0ZW1JZHgsIDEpOwoKICAgICAgICAgICAgY29uc3QgZHJvcFRhcmdldCA9IGUudGFyZ2V0LmNsb3Nlc3QoJy50b2RvLWl0ZW0nKTsKICAgICAgICAgICAgaWYoZHJvcFRhcmdldCAmJiBzb3VyY2VDb2x1bW4gPT09IHRhcmdldENvbCkgewogICAgICAgICAgICAgICAgY29uc3QgdGFyZ2V0SWQgPSBkcm9wVGFyZ2V0LmdldEF0dHJpYnV0ZSgnZGF0YS1pZCcpOwogICAgICAgICAgICAgICAgY29uc3QgdGFyZ2V0SWR4ID0gYXBwRGF0YS50b2RvW3RhcmdldENvbF0uZmluZEluZGV4KHQgPT4gdC5pZC50b1N0cmluZygpID09PSB0YXJnZXRJZCk7CiAgICAgICAgICAgICAgICBpZih0YXJnZXRJZHggPiAtMSkgewogICAgICAgICAgICAgICAgICAgIGFwcERhdGEudG9kb1t0YXJnZXRDb2xdLnNwbGljZSh0YXJnZXRJZHgsIDAsIG1vdmVkSXRlbSk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIGFwcERhdGEudG9kb1t0YXJnZXRDb2xdLnB1c2gobW92ZWRJdGVtKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICBhcHBEYXRhLnRvZG9bdGFyZ2V0Q29sXS5wdXNoKG1vdmVkSXRlbSk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgc2F2ZURhdGEoKTsgcmVuZGVyVG9kbygpOwogICAgfQoKICAgIGZ1bmN0aW9uIHJlbmRlclRvZG8oKSB7CiAgICAgICAgWyd1cmdlbnQnLCdwbGFuJywncG9zc2libGUnLCdkZWxlZ2F0ZSddLmZvckVhY2goY29sID0+IHsKICAgICAgICAgICAgY29uc3QgbGlzdEVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYGxpc3QtJHtjb2x9YCk7IGlmKCFsaXN0RWwpIHJldHVybjsgbGlzdEVsLmlubmVySFRNTCA9ICIiOwogICAgICAgICAgICBhcHBEYXRhLnRvZG9bY29sXS5mb3JFYWNoKGl0ZW0gPT4gewogICAgICAgICAgICAgICAgbGlzdEVsLmlubmVySFRNTCArPSBgPGxpIGNsYXNzPSJ0b2RvLWl0ZW0gJHtpdGVtLmlzRnJvbUFnZW5kYT8nZnJvbS1hZ2VuZGEnOicnfSIgZGF0YS1pZD0iJHtpdGVtLmlkfSIgZHJhZ2dhYmxlPSJ0cnVlIiBvbmRyYWdzdGFydD0iZHJhZ1RvZG8oZXZlbnQsICcke2l0ZW0uaWR9JywgJyR7Y29sfScpIiBvbmRyYWdvdmVyPSJhbGxvd0Ryb3AoZXZlbnQpIiBvbmRyYWdsZWF2ZT0iZHJhZ0xlYXZlKGV2ZW50KSI+JHtpdGVtLmlzRnJvbUFnZW5kYT8nPGkgY2xhc3M9ImZhcyBmYS1iZWxsIiBzdHlsZT0iY29sb3I6I2YxYzQwZjttYXJnaW4tcmlnaHQ6OHB4OyI+PC9pPic6Jyd9PHNwYW4gY29udGVudGVkaXRhYmxlPSJ0cnVlIiBvbmJsdXI9InVwZGF0ZVRvZG9UZXh0KCcke2NvbH0nLCcke2l0ZW0uaWR9Jyx0aGlzLmlubmVyVGV4dCkiPiR7aXRlbS50ZXh0fTwvc3Bhbj48ZGl2IGNsYXNzPSJ0b2RvLWFjdGlvbnMiPjxpIGNsYXNzPSJmYXMgZmEtdHJhc2giIG9uY2xpY2s9InJlbW92ZVRvZG8oJyR7Y29sfScsJyR7aXRlbS5pZH0nKSI+PC9pPjwvZGl2PjwvbGk+YDsKICAgICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICB9CgogICAgLy8gLS0tIENBTEVOREFSIC0tLQogICAgZnVuY3Rpb24gYWRkQ2FsZW5kYXJFdmVudCgpIHsKICAgICAgICBjb25zdCBkYXRlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NhbC1kYXRlJykudmFsdWU7IGNvbnN0IHRhc2sgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2FsLXRhc2snKS52YWx1ZS50cmltKCk7CiAgICAgICAgaWYoIWRhdGUgfHwgIXRhc2spIHJldHVybiBhbGVydCgiU2Fpc2llIGluY29tcGzDqHRlIik7CiAgICAgICAgYXBwRGF0YS5jYWxlbmRhci5wdXNoKHtpZDpEYXRlLm5vdygpLnRvU3RyaW5nKCksIGRhdGUsIHRhc2t9KTsgYXBwRGF0YS5jYWxlbmRhci5zb3J0KChhLGIpPT4gbmV3IERhdGUoYS5kYXRlKSAtIG5ldyBEYXRlKGIuZGF0ZSkpOwogICAgICAgIHNhdmVEYXRhKCk7IHJlbmRlckNhbGVuZGFyKCk7IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjYWwtdGFzaycpLnZhbHVlPSIiOwogICAgfQogICAgZnVuY3Rpb24gcmVuZGVyQ2FsZW5kYXIoKSB7CiAgICAgICAgdmFyIGxpc3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2FsZW5kYXItbGlzdCcpOwogICAgICAgIGlmICghbGlzdCkgcmV0dXJuOwogICAgICAgIGxpc3QuaW5uZXJIVE1MID0gJyc7CiAgICAgICAgdmFyIHRvZGF5ID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpLnNwbGl0KCdUJylbMF07CiAgICAgICAgdmFyIHVwY29taW5nID0gYXBwRGF0YS5jYWxlbmRhci5maWx0ZXIoZnVuY3Rpb24oYyl7IHJldHVybiBjLnRhc2sgJiYgYy50YXNrLnRyaW0oKS5sZW5ndGggPiAzICYmIGMuZGF0ZSA+PSB0b2RheTsgfSk7CgogICAgICAgIC8vIEZ1c2lvbm5lciBsZXMgw6l2w6luZW1lbnRzIEdvb2dsZSBDYWxlbmRhciBzaSBhY3RpdsOpCiAgICAgICAgaWYgKF9nY2FsRXZlbnRzICYmIF9nY2FsRXZlbnRzLmxlbmd0aCkgewogICAgICAgICAgICBfZ2NhbEV2ZW50cy5mb3JFYWNoKGZ1bmN0aW9uKGdlKSB7CiAgICAgICAgICAgICAgICBpZiAoZ2UuZGF0ZSA+PSB0b2RheSAmJiBnZS50aXRsZSAmJiBnZS50aXRsZS50cmltKCkubGVuZ3RoID4gMykgewogICAgICAgICAgICAgICAgICAgIHZhciBleGlzdHMgPSB1cGNvbWluZy5zb21lKGZ1bmN0aW9uKHUpeyByZXR1cm4gdS50YXNrID09PSBnZS50aXRsZSAmJiB1LmRhdGUgPT09IGdlLmRhdGU7IH0pOwogICAgICAgICAgICAgICAgICAgIGlmICghZXhpc3RzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHVwY29taW5nLnB1c2goe2lkOidnY2FsXycrZ2UuaWQsIGRhdGU6Z2UuZGF0ZSwgdGFzazogZ2UudGl0bGUsIGdjYWw6dHJ1ZSwgY29sb3I6Z2UuY29sb3IsIGNhbE5hbWU6Z2UuY2FsTmFtZSwgdGltZTpnZS50aW1lfSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9CgogICAgICAgIHVwY29taW5nLnNvcnQoZnVuY3Rpb24oYSxiKXsgcmV0dXJuIGEuZGF0ZS5sb2NhbGVDb21wYXJlKGIuZGF0ZSk7IH0pOwogICAgICAgIGlmKCF1cGNvbWluZy5sZW5ndGgpIHsgbGlzdC5pbm5lckhUTUwgPSAnPHRyPjx0ZCBjb2xzcGFuPSI0IiBzdHlsZT0idGV4dC1hbGlnbjpjZW50ZXI7Y29sb3I6I2JiYjtwYWRkaW5nOjIwcHgiPkF1Y3VuIMOpdsOpbmVtZW50IMOgIHZlbmlyPC90ZD48L3RyPic7IH0KICAgICAgICB1cGNvbWluZy5mb3JFYWNoKGZ1bmN0aW9uKGMpIHsKICAgICAgICAgICAgdmFyIGlzVG9kYXkgPSBjLmRhdGUgPT09IHRvZGF5OwogICAgICAgICAgICB2YXIgY2xzID0gaXNUb2RheSA/ICdyb3ctdG9kYXknIDogJyc7CiAgICAgICAgICAgIHZhciBzcmMgPSBjLmdjYWwgPyAnPHNwYW4gc3R5bGU9ImNvbG9yOiM0Mjg1ZjQ7Zm9udC1zaXplOi42NXJlbSIgdGl0bGU9Ikdvb2dsZSI+PGkgY2xhc3M9ImZhYiBmYS1nb29nbGUiPjwvaT48L3NwYW4+JyA6ICcnOwogICAgICAgICAgICB2YXIgdGltZVN0ciA9IGMudGltZSA/ICc8c21hbGwgc3R5bGU9ImNvbG9yOiM4ODgiPiAnK2MudGltZSsnPC9zbWFsbD4nIDogJyc7CiAgICAgICAgICAgIHZhciBhY3Rpb25zID0gJyc7CiAgICAgICAgICAgIGlmICghYy5nY2FsKSB7CiAgICAgICAgICAgICAgICBhY3Rpb25zID0gJzxidXR0b24gY2xhc3M9ImJ0biBidG4tc20iIHN0eWxlPSJiYWNrZ3JvdW5kOm5vbmU7Y29sb3I6IzM0OThkYjtib3JkZXI6bm9uZTtwYWRkaW5nOjJweCA0cHgiIG9uY2xpY2s9ImVkaXRDYWxFdmVudChcJycrYy5pZCsnXCcpIj48aSBjbGFzcz0iZmFzIGZhLXBlbiI+PC9pPjwvYnV0dG9uPic7CiAgICAgICAgICAgICAgICBhY3Rpb25zICs9ICc8YnV0dG9uIGNsYXNzPSJidG4gYnRuLWRhbmdlciBidG4tc20iIG9uY2xpY2s9ImRlbGV0ZUNhbEV2ZW50KFwnJytjLmlkKydcJykiPjxpIGNsYXNzPSJmYXMgZmEtdHJhc2giPjwvaT48L2J1dHRvbj4nOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGxpc3QuaW5uZXJIVE1MICs9ICc8dHIgY2xhc3M9IicrY2xzKyciPjx0ZCBzdHlsZT0id2hpdGUtc3BhY2U6bm93cmFwIj4nK25ldyBEYXRlKGMuZGF0ZSkudG9Mb2NhbGVEYXRlU3RyaW5nKCdmci1GUicpKyc8L3RkPjx0ZD4nK3NyYysnICcrYy50YXNrK3RpbWVTdHIrJzwvdGQ+PHRkIHN0eWxlPSJ3aGl0ZS1zcGFjZTpub3dyYXA7dGV4dC1hbGlnbjpyaWdodCI+JythY3Rpb25zKyc8L3RkPjwvdHI+JzsKICAgICAgICB9KTsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gZWRpdENhbEV2ZW50KGlkKSB7CiAgICAgICAgdmFyIGl0ZW0gPSBhcHBEYXRhLmNhbGVuZGFyLmZpbmQoZnVuY3Rpb24oYyl7IHJldHVybiBjLmlkLnRvU3RyaW5nKCkgPT09IGlkLnRvU3RyaW5nKCk7IH0pOwogICAgICAgIGlmICghaXRlbSkgcmV0dXJuOwogICAgICAgIHZhciBuZXdUYXNrID0gcHJvbXB0KCdNb2RpZmllciBsXCfDqXbDqW5lbWVudCA6JywgaXRlbS50YXNrKTsKICAgICAgICBpZiAobmV3VGFzayA9PT0gbnVsbCkgcmV0dXJuOwogICAgICAgIHZhciBuZXdEYXRlID0gcHJvbXB0KCdEYXRlIChBQUFBLU1NLUpKKSA6JywgaXRlbS5kYXRlKTsKICAgICAgICBpZiAobmV3RGF0ZSA9PT0gbnVsbCkgcmV0dXJuOwogICAgICAgIGl0ZW0udGFzayA9IG5ld1Rhc2s7CiAgICAgICAgaXRlbS5kYXRlID0gbmV3RGF0ZTsKICAgICAgICBzYXZlRGF0YSgpOyByZW5kZXJDYWxlbmRhcigpOyBjaGVja0RhaWx5VGFza3MoKTsKICAgIH0KCiAgICBmdW5jdGlvbiBkZWxldGVDYWxFdmVudChpZCkgewogICAgICAgIGFwcERhdGEuY2FsZW5kYXIgPSBhcHBEYXRhLmNhbGVuZGFyLmZpbHRlcihmdW5jdGlvbihjKSB7IHJldHVybiBjLmlkLnRvU3RyaW5nKCkgIT09IGlkLnRvU3RyaW5nKCk7IH0pOwogICAgICAgIHNhdmVEYXRhKCk7IHJlbmRlckNhbGVuZGFyKCk7IGNoZWNrRGFpbHlUYXNrcygpOwogICAgfQogICAgZnVuY3Rpb24gY2hlY2tEYWlseVRhc2tzKCkgewogICAgICAgIHZhciB0b2RheSA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKS5zcGxpdCgnVCcpWzBdOwogICAgICAgIHZhciBsaXN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RvZG8tdG9kYXktbGlzdCcpOwogICAgICAgIGlmICghbGlzdCkgcmV0dXJuOwogICAgICAgIGxpc3QuaW5uZXJIVE1MID0gJyc7CiAgICAgICAgdmFyIGMgPSAwOwogICAgICAgIGFwcERhdGEuY2FsZW5kYXIuZmlsdGVyKGZ1bmN0aW9uKHQpeyByZXR1cm4gdC50YXNrICYmIHQudGFzay50cmltKCkubGVuZ3RoID4gMzsgfSkuZm9yRWFjaChmdW5jdGlvbih0KSB7CiAgICAgICAgICAgIGlmICh0LmRhdGUgPT09IHRvZGF5KSB7CiAgICAgICAgICAgICAgICBjKys7CiAgICAgICAgICAgICAgICBsaXN0LmlubmVySFRNTCArPSAnPGRpdiBjbGFzcz0idG9kby10b2RheS1pdGVtIiBkcmFnZ2FibGU9InRydWUiIG9uZHJhZ3N0YXJ0PSJkcmFnVG9kbyhldmVudCwgXCcnICsgdC5pZCArICdcJywgXCdBR0VOREFfU09VUkNFXCcpIj48c3Bhbj48aSBjbGFzcz0iZmFzIGZhLWJlbGwiIHN0eWxlPSJjb2xvcjpyZWQ7IG1hcmdpbi1yaWdodDo1cHg7Ij48L2k+JyArIHQudGFzayArICc8L3NwYW4+IDxzbWFsbCBzdHlsZT0iY29sb3I6Izk5OSI+PGkgY2xhc3M9ImZhcyBmYS1hcnJvd3MtYWx0Ij48L2k+IEdsaXNzZXI8L3NtYWxsPjwvZGl2Pic7CiAgICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndG9kby10b2RheS16b25lJykuY2xhc3NMaXN0LnRvZ2dsZSgnYWN0aXZlJywgYyA+IDApOwogICAgfQoKICAgIC8vIC0tLSBBVFRBQ0hNRU5UUyAmIEhFTFBFUlMgLS0tCiAgICBmdW5jdGlvbiBhZGRNdWx0aVJvdyhjSWQsIGNsLCBwaDEpIHsKICAgICAgICB2YXIgY29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoY0lkKTsKICAgICAgICB2YXIgcm93ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgICAgcm93LmNsYXNzTmFtZSA9ICdtdWx0aS1yb3cgJyArIGNsOwogICAgICAgIHZhciBpbnAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpOwogICAgICAgIGlucC50eXBlID0gJ3RleHQnOyBpbnAuY2xhc3NOYW1lID0gJ2Zvcm0tY29udHJvbCBuYW1lJzsgaW5wLnBsYWNlaG9sZGVyID0gcGgxOwogICAgICAgIHZhciBidG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTsKICAgICAgICBidG4uY2xhc3NOYW1lID0gJ2J0biBidG4tZGFuZ2VyIGJ0bi1pY29uJzsKICAgICAgICBidG4uaW5uZXJIVE1MID0gJzxpIGNsYXNzPSJmYXMgZmEtdGltZXMiPjwvaT4nOwogICAgICAgIGJ0bi5vbmNsaWNrID0gZnVuY3Rpb24oKSB7IHRoaXMucGFyZW50RWxlbWVudC5yZW1vdmUoKTsgfTsKICAgICAgICByb3cuYXBwZW5kQ2hpbGQoaW5wKTsKICAgICAgICByb3cuYXBwZW5kQ2hpbGQoYnRuKTsKICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQocm93KTsKICAgICAgICBpZiAoY2wuaW5kZXhPZignc3R1ZGVudCcpID49IDAgfHwgY2wuaW5kZXhPZignZWxldmUnKSA+PSAwKSB7IGF0dGFjaFN0dWRlbnRBQyhpbnApOyB9CiAgICAgICAgaWYgKGNsLmluZGV4T2YoJ3RlYWNoZXInKSA+PSAwKSB7IGF0dGFjaFRlYWNoZXJBQyhpbnApOyB9CiAgICB9CiAgICBmdW5jdGlvbiBnZXRNdWx0aURhdGEoY0lkLCBjbCkgeyBsZXQgcmVzID0gW107IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoYCMke2NJZH0gLiR7Y2x9YCkuZm9yRWFjaChyb3cgPT4geyBjb25zdCBuID0gcm93LnF1ZXJ5U2VsZWN0b3IoJy5uYW1lJykudmFsdWUudHJpbSgpOyBpZihuKSByZXMucHVzaCh7bmFtZTpufSk7IH0pOyByZXR1cm4gcmVzOyB9CiAgICBmdW5jdGlvbiByZXN0b3JlTXVsdGlSb3dzKGNJZCwgY2wsIGRhdGEsIHBoMSkgeyBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChjSWQpOyBpZighY29udGFpbmVyKSByZXR1cm47IGNvbnRhaW5lci5pbm5lckhUTUwgPSAiIjsgaWYoIWRhdGEgfHwgZGF0YS5sZW5ndGggPT09IDApIHsgcmVzZXRNdWx0aShjSWQsIGNsLCBwaDEpOyByZXR1cm47IH0gZGF0YS5mb3JFYWNoKGQgPT4geyBjb250YWluZXIuaW5uZXJIVE1MICs9IGA8ZGl2IGNsYXNzPSJtdWx0aS1yb3cgJHtjbH0iPjxpbnB1dCB0eXBlPSJ0ZXh0IiBjbGFzcz0iZm9ybS1jb250cm9sIG5hbWUiIHZhbHVlPSIke2QubmFtZX0iIHBsYWNlaG9sZGVyPSIke3BoMX0iPjxidXR0b24gY2xhc3M9ImJ0biBidG4tZGFuZ2VyIGJ0bi1pY29uIiBvbmNsaWNrPSJ0aGlzLnBhcmVudEVsZW1lbnQucmVtb3ZlKCkiPjxpIGNsYXNzPSJmYXMgZmEtdGltZXMiPjwvaT48L2J1dHRvbj48L2Rpdj5gOyB9KTsgfQogICAgZnVuY3Rpb24gcmVzZXRNdWx0aShjSWQsIGNsLCBwaDEpIHsgY29uc3QgYyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGNJZCk7IGlmKGMpIGMuaW5uZXJIVE1MID0gYDxkaXYgY2xhc3M9Im11bHRpLXJvdyAke2NsfSI+PGlucHV0IHR5cGU9InRleHQiIGNsYXNzPSJmb3JtLWNvbnRyb2wgbmFtZSIgcGxhY2Vob2xkZXI9IiR7cGgxfSI+PGJ1dHRvbiBjbGFzcz0iYnRuIGJ0bi1kYW5nZXIgYnRuLWljb24iIG9uY2xpY2s9InRoaXMucGFyZW50RWxlbWVudC5yZW1vdmUoKSI+PGkgY2xhc3M9ImZhcyBmYS10aW1lcyI+PC9pPjwvYnV0dG9uPjwvZGl2PmA7IH0KICAgIAogICAgZnVuY3Rpb24gYWRkQXR0YWNobWVudChsaXN0SWQsIGlucHV0KSB7CiAgICAgICAgY29uc3QgZmlsZSA9IGlucHV0LmZpbGVzWzBdOwogICAgICAgIGlmKCFmaWxlKSByZXR1cm47CiAgICAgICAgaWYgKGZpbGUuc2l6ZSA+IDE1MDAwMCkgewogICAgICAgICAgICAgYWxlcnQoIkZpY2hpZXIgdHJvcCB2b2x1bWluZXV4IHBvdXIgbGEgc2F1dmVnYXJkZSBsb2NhbGUgKD4xNTBrbykuIFNldWwgbGUgbm9tIGR1IGZpY2hpZXIgc2VyYSBjb25zZXJ2w6kgZW4gcsOpZsOpcmVuY2UuIik7CiAgICAgICAgICAgICBhcHBlbmRBdHRhY2htZW50VUkobGlzdElkLCB7bmFtZTogZmlsZS5uYW1lLCBkYXRhOiBudWxsLCBpc1JlZjogdHJ1ZX0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICBjb25zdCByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpOwogICAgICAgICAgICAgcmVhZGVyLm9ubG9hZCA9IGZ1bmN0aW9uKGUpIHsgYXBwZW5kQXR0YWNobWVudFVJKGxpc3RJZCwge25hbWU6IGZpbGUubmFtZSwgZGF0YTogZS50YXJnZXQucmVzdWx0LCBpc1JlZjogZmFsc2V9KTsgfTsKICAgICAgICAgICAgIHJlYWRlci5yZWFkQXNEYXRhVVJMKGZpbGUpOwogICAgICAgIH0KICAgICAgICBpbnB1dC52YWx1ZSA9ICIiOwogICAgfQoKICAgIGZ1bmN0aW9uIGFwcGVuZEF0dGFjaG1lbnRVSShsaXN0SWQsIGZpbGVPYmopIHsKICAgICAgICBjb25zdCB1bCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGxpc3RJZCk7CiAgICAgICAgY29uc3QgbGkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpOwogICAgICAgIGxpLmNsYXNzTmFtZSA9ICdhdHRhY2htZW50LWl0ZW0nOwogICAgICAgIGxpLmRhdGFzZXQubmFtZSA9IGZpbGVPYmoubmFtZTsKICAgICAgICBsaS5kYXRhc2V0LmRhdGEgPSBmaWxlT2JqLmRhdGEgfHwgIiI7CiAgICAgICAgbGkuZGF0YXNldC5pc1JlZiA9IGZpbGVPYmouaXNSZWY7CiAgICAgICAgY29uc3QgbGluayA9IGZpbGVPYmouZGF0YSA/IGA8YSBocmVmPSIjIiBvbmNsaWNrPSJkb3dubG9hZEJhc2U2NCgnJHtmaWxlT2JqLmRhdGF9JywgJyR7ZmlsZU9iai5uYW1lfScpIj4ke2ZpbGVPYmoubmFtZX08L2E+YCA6IGA8c3Bhbj4ke2ZpbGVPYmoubmFtZX0gKFLDqWbDqXJlbmNlIHNldWxlKTwvc3Bhbj5gOwogICAgICAgIGxpLmlubmVySFRNTCA9IGA8ZGl2PjxpIGNsYXNzPSJmYXMgZmEtZmlsZSI+PC9pPiAke2xpbmt9PC9kaXY+IDxpIGNsYXNzPSJmYXMgZmEtdHJhc2giIHN0eWxlPSJjb2xvcjojZTc0YzNjOyBjdXJzb3I6cG9pbnRlcjsiIG9uY2xpY2s9InRoaXMucGFyZW50RWxlbWVudC5yZW1vdmUoKSI+PC9pPmA7CiAgICAgICAgdWwuYXBwZW5kQ2hpbGQobGkpOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBkb3dubG9hZEJhc2U2NChiYXNlNjQsIG5hbWUpIHsKICAgICAgICBjb25zdCBhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiYSIpOwogICAgICAgIGEuaHJlZiA9IGJhc2U2NDsKICAgICAgICBhLmRvd25sb2FkID0gbmFtZTsKICAgICAgICBhLmNsaWNrKCk7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIGdldEF0dGFjaG1lbnRzRGF0YShsaXN0SWQpIHsKICAgICAgICBjb25zdCByZXMgPSBbXTsKICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGAjJHtsaXN0SWR9IC5hdHRhY2htZW50LWl0ZW1gKS5mb3JFYWNoKGxpID0+IHsKICAgICAgICAgICAgcmVzLnB1c2goewogICAgICAgICAgICAgICAgbmFtZTogbGkuZGF0YXNldC5uYW1lLAogICAgICAgICAgICAgICAgZGF0YTogbGkuZGF0YXNldC5kYXRhID09PSAibnVsbCIgfHwgbGkuZGF0YXNldC5kYXRhID09PSAiIiA/IG51bGwgOiBsaS5kYXRhc2V0LmRhdGEsCiAgICAgICAgICAgICAgICBpc1JlZjogbGkuZGF0YXNldC5pc1JlZiA9PT0gInRydWUiCiAgICAgICAgICAgIH0pOwogICAgICAgIH0pOwogICAgICAgIHJldHVybiByZXM7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIHJlc3RvcmVBdHRhY2htZW50cyhsaXN0SWQsIGRhdGEpIHsKICAgICAgICBjb25zdCB1bCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGxpc3RJZCk7CiAgICAgICAgdWwuaW5uZXJIVE1MID0gIiI7CiAgICAgICAgaWYoIWRhdGEpIHJldHVybjsKICAgICAgICBkYXRhLmZvckVhY2goZCA9PiBhcHBlbmRBdHRhY2htZW50VUkobGlzdElkLCBkKSk7CiAgICB9CgogICAgZnVuY3Rpb24gcmVzZXRFZGl0TW9kZSgpIHsgY3VycmVudEVkaXRJZCA9IG51bGw7IGN1cnJlbnRFZGl0VHlwZSA9IG51bGw7IFsnYnRuLXNhdmUtZW50JywnYnRuLXNhdmUtcmV1JywnYnRuLXNhdmUtZGlyJywnYnRuLXNhdmUtc3VpdmknXS5mb3JFYWNoKGlkID0+IHsgY29uc3QgYiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKTsgaWYoYikgeyBiLmlubmVyVGV4dCA9IChpZC5pbmNsdWRlcygnZGlyJykgfHwgaWQuaW5jbHVkZXMoJ3N1aXZpJykpID8gIkVucmVnaXN0cmVyIChIaXN0b3JpcXVlKSIgOiAiRW5yZWdpc3RyZXIiOyBiLmNsYXNzTmFtZSA9IGIuaWQuaW5jbHVkZXMoJ3N1aXZpJykgPyAiYnRuIGJ0bi1pbmZvIiA6IChiLmlkLmluY2x1ZGVzKCdyZXUnKSA/ICJidG4gYnRuLXN1Y2Nlc3MiIDogImJ0biBidG4tcHJpbWFyeSIpOyB9IH0pOyB9CiAgICBmdW5jdGlvbiBhY3RpdmF0ZUVkaXRNb2RlKHQsIGlkKSB7IGN1cnJlbnRFZGl0SWQgPSBpZDsgY3VycmVudEVkaXRUeXBlID0gdDsgY29uc3QgbSA9IHsnRU5UJzonYnRuLXNhdmUtZW50JywnUkVVJzonYnRuLXNhdmUtcmV1JywnRElSJzonYnRuLXNhdmUtZGlyJywnU1VJVkknOididG4tc2F2ZS1zdWl2aSd9OyBjb25zdCBiID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQobVt0XSk7IGlmKGIpIHsgYi5pbm5lclRleHQgPSAiTWV0dHJlIMOgIGpvdXIgbGUgZG9jdW1lbnQiOyBiLmNsYXNzTmFtZSA9ICJidG4gYnRuLXVwZGF0ZS1tb2RlIjsgfSB9CgogICAgZnVuY3Rpb24gbG9hZEl0ZW1Gb3JFZGl0KHR5cGUsIGlkKSB7CiAgICAgICAgbGV0IGl0OwogICAgICAgIGlmKHR5cGUgPT09ICdFTlQnKSB7CiAgICAgICAgICAgIGl0ID0gYXBwRGF0YS5lbnRyZXRpZW5zLmZpbmQoeCA9PiB4LmlkLnRvU3RyaW5nKCkgPT09IGlkLnRvU3RyaW5nKCkpOyBpZighaXQpIHJldHVybjsKICAgICAgICAgICAgc3dpdGNoTWVudSgnbWVudTYnKTsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VudC1kYXRlJykudmFsdWUgPSBpdC5kYXRlOyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZW50LXR5cGUnKS52YWx1ZSA9IGl0LnR5cGU7IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlbnQtb2JqZXQnKS52YWx1ZSA9IGl0Lm9iamV0OyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZW50LWNvbnRlbnUnKS5pbm5lckhUTUwgPSBpdC5ib2R5OwogICAgICAgICAgICByZXN0b3JlTXVsdGlSb3dzKCdlbnQtc3R1ZGVudHMtY29udGFpbmVyJywgJ2VudC1zdHVkZW50JywgaXQuc3R1ZGVudHMsICdOb20gw4lsw6h2ZScpOyByZXN0b3JlTXVsdGlSb3dzKCdlbnQtdGVhY2hlcnMtY29udGFpbmVyJywgJ2VudC10ZWFjaGVyJywgaXQudGVhY2hlcnMsICdOb20gUGVyc29ubmVsJyk7CiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJyNlbnQtc3R1ZGVudHMtY29udGFpbmVyIC5uYW1lJykuZm9yRWFjaChhdHRhY2hTdHVkZW50QUMpOwogICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcjZW50LXRlYWNoZXJzLWNvbnRhaW5lciAubmFtZScpLmZvckVhY2goYXR0YWNoVGVhY2hlckFDKTsKICAgICAgICAgICAgcmVzdG9yZUF0dGFjaG1lbnRzKCdlbnQtYXR0YWNobWVudHMnLCBpdC5hdHRhY2htZW50cyk7CiAgICAgICAgfSBlbHNlIGlmICh0eXBlID09PSAnUkVVJykgewogICAgICAgICAgICBpdCA9IGFwcERhdGEucmV1bmlvbnMuZmluZCh4ID0+IHguaWQudG9TdHJpbmcoKSA9PT0gaWQudG9TdHJpbmcoKSk7IGlmKCFpdCkgcmV0dXJuOwogICAgICAgICAgICBpZihpdC50eXBlID09PSAiUsOpdW5pb24gZGUgRGlyZWN0aW9uIikgeyAKICAgICAgICAgICAgICAgIHN3aXRjaE1lbnUoJ21lbnU0Jyk7IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkaXItZGF0ZScpLnZhbHVlID0gaXQuZGF0ZTsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Rpci1wYXJ0cycpLnZhbHVlID0gaXQucGFydHMgfHwgIiI7IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkaXItY29udGVudScpLmlubmVySFRNTCA9IGl0Lm9kajsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Rpci1ub3RlcycpLmlubmVySFRNTCA9IGl0LmNyOyAKICAgICAgICAgICAgICAgIHJlc3RvcmVBdHRhY2htZW50cygnZGlyLWF0dGFjaG1lbnRzJywgaXQuYXR0YWNobWVudHMpOwogICAgICAgICAgICAgICAgYWN0aXZhdGVFZGl0TW9kZSgnRElSJywgaWQpOyByZXR1cm47IAogICAgICAgICAgICB9IAogICAgICAgICAgICBlbHNlIHsgCiAgICAgICAgICAgICAgICBzd2l0Y2hNZW51KCdtZW51NycpOyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmV1LWRhdGUnKS52YWx1ZSA9IGl0LmRhdGU7IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXUtdHlwZScpLnZhbHVlID0gaXQudHlwZTsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JldS1vZGonKS52YWx1ZSA9IGl0Lm9kajsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JldS1jb250ZW51JykuaW5uZXJIVE1MID0gaXQuYm9keTsgCiAgICAgICAgICAgICAgICByZXN0b3JlTXVsdGlSb3dzKCdyZXUtc3R1ZGVudHMtY29udGFpbmVyJywgJ3JldS1zdHVkZW50JywgaXQuc3R1ZGVudHMsICdOb20gw4lsw6h2ZScpOyByZXN0b3JlTXVsdGlSb3dzKCdyZXUtdGVhY2hlcnMtY29udGFpbmVyJywgJ3JldS10ZWFjaGVyJywgaXQudGVhY2hlcnMsICdOb20gUGVyc29ubmVsJyk7CiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJyNyZXUtc3R1ZGVudHMtY29udGFpbmVyIC5uYW1lJykuZm9yRWFjaChhdHRhY2hTdHVkZW50QUMpOwogICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcjcmV1LXRlYWNoZXJzLWNvbnRhaW5lciAubmFtZScpLmZvckVhY2goYXR0YWNoVGVhY2hlckFDKTsgCiAgICAgICAgICAgICAgICByZXN0b3JlQXR0YWNobWVudHMoJ3JldS1hdHRhY2htZW50cycsIGl0LmF0dGFjaG1lbnRzKTsKICAgICAgICAgICAgfQogICAgICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gJ1NVSVZJJykgewogICAgICAgICAgICBpdCA9IGFwcERhdGEuc3VpdmlFbGV2ZXMuZmluZCh4ID0+IHguaWQudG9TdHJpbmcoKSA9PT0gaWQudG9TdHJpbmcoKSk7IGlmKCFpdCkgcmV0dXJuOwogICAgICAgICAgICBzd2l0Y2hNZW51KCdtZW51NScpOyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3VpdmktZGF0ZScpLnZhbHVlID0gaXQuZGF0ZTsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N1aXZpLXBhcnRzJykudmFsdWUgPSBpdC5wYXJ0aWNpcGFudHM7IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzdWl2aS1jbGFzc2VzJykudmFsdWUgPSBpdC5jbGFzc2VzOyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3VpdmktY29udGVudScpLmlubmVySFRNTCA9IGl0LmJvZHk7CiAgICAgICAgICAgIHJlc3RvcmVBdHRhY2htZW50cygnc3VpdmktYXR0YWNobWVudHMnLCBpdC5hdHRhY2htZW50cyk7CiAgICAgICAgfQogICAgICAgIGFjdGl2YXRlRWRpdE1vZGUodHlwZSwgaWQpOwogICAgfQoKICAgIC8vIC0tLSBTQVZJTkcgLS0tCiAgICBmdW5jdGlvbiBzYXZlUHJlcERpcmVjdGlvbigpIHsKICAgICAgICBjb25zdCBkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Rpci1kYXRlJykudmFsdWU7IGlmKCFkKSByZXR1cm4gYWxlcnQoIkRhdGUgcmVxdWlzZSIpOwogICAgICAgIGNvbnN0IG4gPSB7IGlkOiBjdXJyZW50RWRpdElkIHx8IERhdGUubm93KCkudG9TdHJpbmcoKSwgZGF0ZTpkLCB0eXBlOiJSw6l1bmlvbiBkZSBEaXJlY3Rpb24iLCBvZGo6ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Rpci1jb250ZW51JykuaW5uZXJIVE1MLCBjcjpkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGlyLW5vdGVzJykuaW5uZXJIVE1MLCBwYXJ0czpkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGlyLXBhcnRzJykudmFsdWUsIGF0dGFjaG1lbnRzOiBnZXRBdHRhY2htZW50c0RhdGEoJ2Rpci1hdHRhY2htZW50cycpIH07CiAgICAgICAgaWYoY3VycmVudEVkaXRJZCkgeyBjb25zdCBpZHggPSBhcHBEYXRhLnJldW5pb25zLmZpbmRJbmRleCh4ID0+IHguaWQudG9TdHJpbmcoKSA9PT0gY3VycmVudEVkaXRJZC50b1N0cmluZygpKTsgaWYoaWR4ID4gLTEpIGFwcERhdGEucmV1bmlvbnNbaWR4XSA9IG47IH0gZWxzZSB7IGFwcERhdGEucmV1bmlvbnMudW5zaGlmdChuKTsgfQogICAgICAgIHNhdmVEYXRhKCk7IHJlc2V0RWRpdE1vZGUoKTsgYWxlcnQoIkVucmVnaXN0csOpIik7IHN3aXRjaE1lbnUoJ21lbnU4Jyk7CiAgICB9CiAgICBmdW5jdGlvbiBzYXZlU3VpdmlFbGV2ZSgpIHsKICAgICAgICBjb25zdCBkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N1aXZpLWRhdGUnKS52YWx1ZTsgaWYoIWQpIHJldHVybiBhbGVydCgiRGF0ZSByZXF1aXNlIik7CiAgICAgICAgY29uc3QgbiA9IHsgaWQ6IGN1cnJlbnRFZGl0SWQgfHwgRGF0ZS5ub3coKS50b1N0cmluZygpLCBkYXRlOmQsIHR5cGU6ICJTdWl2aSDDiWzDqHZlIC8gUG9pbnQgQ1BFIiwgcGFydGljaXBhbnRzOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3VpdmktcGFydHMnKS52YWx1ZSwgY2xhc3NlczogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N1aXZpLWNsYXNzZXMnKS52YWx1ZSwgYm9keTogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N1aXZpLWNvbnRlbnUnKS5pbm5lckhUTUwsIGF0dGFjaG1lbnRzOiBnZXRBdHRhY2htZW50c0RhdGEoJ3N1aXZpLWF0dGFjaG1lbnRzJykgfTsKICAgICAgICBpZihjdXJyZW50RWRpdElkKSB7IGNvbnN0IGlkeCA9IGFwcERhdGEuc3VpdmlFbGV2ZXMuZmluZEluZGV4KHggPT4geC5pZC50b1N0cmluZygpID09PSBjdXJyZW50RWRpdElkLnRvU3RyaW5nKCkpOyBpZihpZHggPiAtMSkgYXBwRGF0YS5zdWl2aUVsZXZlc1tpZHhdID0gbjsgfSBlbHNlIHsgYXBwRGF0YS5zdWl2aUVsZXZlcy51bnNoaWZ0KG4pOyB9CiAgICAgICAgc2F2ZURhdGEoKTsgcmVzZXRFZGl0TW9kZSgpOyBhbGVydCgiRW5yZWdpc3Ryw6kiKTsgc3dpdGNoTWVudSgnbWVudTgnKTsKICAgIH0KICAgIGZ1bmN0aW9uIHNhdmVFbnRyZXRpZW4oKSB7CiAgICAgICAgY29uc3QgZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlbnQtZGF0ZScpLnZhbHVlOyBpZighZCkgcmV0dXJuIGFsZXJ0KCJEYXRlIHJlcXVpc2UiKTsKICAgICAgICBjb25zdCBuID0ge2lkOiBjdXJyZW50RWRpdElkIHx8IERhdGUubm93KCkudG9TdHJpbmcoKSwgZGF0ZTpkLCB0eXBlOmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlbnQtdHlwZScpLnZhbHVlLCBvYmpldDpkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZW50LW9iamV0JykudmFsdWUsIGJvZHk6ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VudC1jb250ZW51JykuaW5uZXJIVE1MLCBzdHVkZW50czpnZXRNdWx0aURhdGEoJ2VudC1zdHVkZW50cy1jb250YWluZXInLCdlbnQtc3R1ZGVudCcpLCB0ZWFjaGVyczpnZXRNdWx0aURhdGEoJ2VudC10ZWFjaGVycy1jb250YWluZXInLCdlbnQtdGVhY2hlcicpLCBhdHRhY2htZW50czogZ2V0QXR0YWNobWVudHNEYXRhKCdlbnQtYXR0YWNobWVudHMnKX07CiAgICAgICAgaWYoY3VycmVudEVkaXRJZCkgeyBjb25zdCBpZHggPSBhcHBEYXRhLmVudHJldGllbnMuZmluZEluZGV4KHggPT4geC5pZC50b1N0cmluZygpID09PSBjdXJyZW50RWRpdElkLnRvU3RyaW5nKCkpOyBpZihpZHggPiAtMSkgYXBwRGF0YS5lbnRyZXRpZW5zW2lkeF0gPSBuOyB9IGVsc2UgeyBhcHBEYXRhLmVudHJldGllbnMudW5zaGlmdChuKTsgfQogICAgICAgIHNhdmVEYXRhKCk7IHJlc2V0RWRpdE1vZGUoKTsgYWxlcnQoIkVucmVnaXN0csOpIik7IHN3aXRjaE1lbnUoJ21lbnU4Jyk7CiAgICB9CiAgICBmdW5jdGlvbiBzYXZlUmV1bmlvbigpIHsKICAgICAgICBjb25zdCBkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JldS1kYXRlJykudmFsdWU7IGlmKCFkKSByZXR1cm4gYWxlcnQoIkRhdGUgcmVxdWlzZSIpOwogICAgICAgIGNvbnN0IG4gPSB7aWQ6IGN1cnJlbnRFZGl0SWQgfHwgRGF0ZS5ub3coKS50b1N0cmluZygpLCBkYXRlOmQsIHR5cGU6ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JldS10eXBlJykudmFsdWUsIG9kajpkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmV1LW9kaicpLnZhbHVlLCBib2R5OmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXUtY29udGVudScpLmlubmVySFRNTCwgc3R1ZGVudHM6Z2V0TXVsdGlEYXRhKCdyZXUtc3R1ZGVudHMtY29udGFpbmVyJywncmV1LXN0dWRlbnQnKSwgdGVhY2hlcnM6Z2V0TXVsdGlEYXRhKCdyZXUtdGVhY2hlcnMtY29udGFpbmVyJywncmV1LXRlYWNoZXInKSwgYXR0YWNobWVudHM6IGdldEF0dGFjaG1lbnRzRGF0YSgncmV1LWF0dGFjaG1lbnRzJyl9OwogICAgICAgIGlmKGN1cnJlbnRFZGl0SWQpIHsgY29uc3QgaWR4ID0gYXBwRGF0YS5yZXVuaW9ucy5maW5kSW5kZXgoeCA9PiB4LmlkLnRvU3RyaW5nKCkgPT09IGN1cnJlbnRFZGl0SWQudG9TdHJpbmcoKSk7IGlmKGlkeCA+IC0xKSBhcHBEYXRhLnJldW5pb25zW2lkeF0gPSBuOyB9IGVsc2UgeyBhcHBEYXRhLnJldW5pb25zLnVuc2hpZnQobik7IH0KICAgICAgICBzYXZlRGF0YSgpOyByZXNldEVkaXRNb2RlKCk7IGFsZXJ0KCJFbnJlZ2lzdHLDqSIpOyBzd2l0Y2hNZW51KCdtZW51OCcpOwogICAgfQoKICAgIC8vIC0tLSBXT1JEIEVYUE9SVCBXSVRIIEhFQURFUlMgKFRBQkxFIEJBU0VEKSAtLS0KICAgIGZ1bmN0aW9uIGV4cG9ydERvY1dvcmQobW9kZSkgewogICAgICAgIGxldCB0aXRsZSwgY29udGVudCwgbWV0YSA9ICIiOwogICAgICAgIAogICAgICAgIC8vIFByZXBhcmUgY29udGVudCBiYXNlZCBvbiBtb2RlCiAgICAgICAgaWYobW9kZSA9PT0gJ0VOVCcpIHsKICAgICAgICAgICAgdGl0bGUgPSAiQ29tcHRlLVJlbmR1IGQnRW50cmV0aWVuIjsKICAgICAgICAgICAgbWV0YSA9IGA8cD48c3Ryb25nPk9iamV0IDo8L3N0cm9uZz4gJHtkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZW50LXR5cGUnKS52YWx1ZX0gLSAke2RvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlbnQtb2JqZXQnKS52YWx1ZX08L3A+CiAgICAgICAgICAgICAgICAgICAgPHA+PHN0cm9uZz5EYXRlOjwvc3Ryb25nPiAke2RvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlbnQtZGF0ZScpLnZhbHVlfTwvcD5gOwogICAgICAgICAgICBjb250ZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VudC1jb250ZW51JykuaW5uZXJIVE1MOwogICAgICAgIH0gZWxzZSBpZiAobW9kZSA9PT0gJ1BSRVBfRElSJykgewogICAgICAgICAgICB0aXRsZSA9ICJSw6l1bmlvbiBkZSBEaXJlY3Rpb24iOwogICAgICAgICAgICBtZXRhID0gYDxwPjxzdHJvbmc+RGF0ZTo8L3N0cm9uZz4gJHtkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGlyLWRhdGUnKS52YWx1ZX08L3A+CiAgICAgICAgICAgICAgICAgICAgPHA+PHN0cm9uZz5QYXJ0aWNpcGFudHM6PC9zdHJvbmc+ICR7ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Rpci1wYXJ0cycpLnZhbHVlfTwvcD5gOwogICAgICAgICAgICBjb250ZW50ID0gYDxoND5PcmRyZSBkdSBqb3VyPC9oND4ke2RvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkaXItY29udGVudScpLmlubmVySFRNTH08aHI+PGg0Pk5vdGVzPC9oND4ke2RvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkaXItbm90ZXMnKS5pbm5lckhUTUx9YDsKICAgICAgICB9IGVsc2UgaWYgKG1vZGUgPT09ICdSRVUnKSB7CiAgICAgICAgICAgIHRpdGxlID0gIkNvbXB0ZS1SZW5kdSA6ICIgKyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmV1LXR5cGUnKS52YWx1ZTsKICAgICAgICAgICAgbWV0YSA9IGA8cD48c3Ryb25nPkRhdGU6PC9zdHJvbmc+ICR7ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JldS1kYXRlJykudmFsdWV9PC9wPmA7CiAgICAgICAgICAgIGNvbnRlbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmV1LWNvbnRlbnUnKS5pbm5lckhUTUw7CiAgICAgICAgfSBlbHNlIGlmIChtb2RlID09PSAnU1VJVkknKSB7CiAgICAgICAgICAgIHRpdGxlID0gIlN1aXZpIMOJbMOodmUgLyBQb2ludCBDUEUiOwogICAgICAgICAgICBtZXRhID0gYDxwPjxzdHJvbmc+RGF0ZTo8L3N0cm9uZz4gJHtkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3VpdmktZGF0ZScpLnZhbHVlfTwvcD4KICAgICAgICAgICAgICAgICAgICA8cD48c3Ryb25nPlBhcnRpY2lwYW50czo8L3N0cm9uZz4gJHtkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3VpdmktcGFydHMnKS52YWx1ZX08L3A+YDsKICAgICAgICAgICAgY29udGVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzdWl2aS1jb250ZW51JykuaW5uZXJIVE1MOwogICAgICAgIH0KCiAgICAgICAgLy8gSGVhZGVyIFRhYmxlIGZvciBXb3JkIChMZWZ0OiBTY2hvb2wsIFJpZ2h0OiBMb2dvKQogICAgICAgIGNvbnN0IGxvZ29JbWcgPSBhcHBEYXRhLnNldHRpbmdzLmxvZ28gPyBgPGltZyBzcmM9IiR7YXBwRGF0YS5zZXR0aW5ncy5sb2dvfSIgd2lkdGg9IjE1MCIgaGVpZ2h0PSJhdXRvIiBhbHQ9IkxvZ28iPmAgOiAnJzsKICAgICAgICBjb25zdCBzaWdJbWcgPSBhcHBEYXRhLnNldHRpbmdzLnNpZ25hdHVyZSA/IGA8aW1nIHNyYz0iJHthcHBEYXRhLnNldHRpbmdzLnNpZ25hdHVyZX0iIHdpZHRoPSIxNTAiIGhlaWdodD0iYXV0byIgYWx0PSJTaWduYXR1cmUiPmAgOiAnJzsKCiAgICAgICAgY29uc3QgaGVhZGVyU2VjdGlvbiA9IGAKICAgICAgICA8dGFibGUgd2lkdGg9IjEwMCUiIGJvcmRlcj0iMCIgY2VsbHBhZGRpbmc9IjAiIGNlbGxzcGFjaW5nPSIwIiBzdHlsZT0ibWFyZ2luLWJvdHRvbTogMjBweDsgYm9yZGVyLWJvdHRvbTogMnB4IHNvbGlkICMzMzM7Ij4KICAgICAgICAgICAgPHRyPgogICAgICAgICAgICAgICAgPHRkIHZhbGlnbj0idG9wIiBzdHlsZT0idGV4dC1hbGlnbjogbGVmdDsiPgogICAgICAgICAgICAgICAgICAgIDxoMSBzdHlsZT0iZm9udC1zaXplOiAyNHB4OyBtYXJnaW46IDA7IHBhZGRpbmc6IDA7Ij4ke2FwcERhdGEuc2V0dGluZ3Muc2Nob29sfTwvaDE+CiAgICAgICAgICAgICAgICAgICAgPHAgc3R5bGU9Im1hcmdpbjogNXB4IDAgMTBweCAwOyBmb250LXNpemU6IDE0cHg7IGNvbG9yOiAjNjY2OyI+RGlyZWN0aW9uPC9wPgogICAgICAgICAgICAgICAgPC90ZD4KICAgICAgICAgICAgICAgIDx0ZCB2YWxpZ249InRvcCIgc3R5bGU9InRleHQtYWxpZ246IHJpZ2h0OyI+CiAgICAgICAgICAgICAgICAgICAgJHtsb2dvSW1nfQogICAgICAgICAgICAgICAgPC90ZD4KICAgICAgICAgICAgPC90cj4KICAgICAgICA8L3RhYmxlPmA7CgogICAgICAgIGNvbnN0IGZvb3RlclNlY3Rpb24gPSBgCiAgICAgICAgPGRpdiBzdHlsZT0ibWFyZ2luLXRvcDogNTBweDsgdGV4dC1hbGlnbjogcmlnaHQ7Ij4KICAgICAgICAgICAgJHtzaWdJbWd9CiAgICAgICAgICAgIDxwPjxzdHJvbmc+JHthcHBEYXRhLnNldHRpbmdzLnVzZXJ9PC9zdHJvbmc+PC9wPgogICAgICAgIDwvZGl2PmA7CgogICAgICAgIGNvbnN0IGhlYWRlciA9IGA8aHRtbCB4bWxuczpvPSd1cm46c2NoZW1hcy1taWNyb3NvZnQtY29tOm9mZmljZTpvZmZpY2UnIHhtbG5zOnc9J3VybjpzY2hlbWFzLW1pY3Jvc29mdC1jb206b2ZmaWNlOndvcmQnIHhtbG5zPSdodHRwOi8vd3d3LnczLm9yZy9UUi9SRUMtaHRtbDQwJz48aGVhZD48bWV0YSBjaGFyc2V0PSd1dGYtOCc+PHRpdGxlPiR7dGl0bGV9PC90aXRsZT48L2hlYWQ+PGJvZHk+YDsKICAgICAgICBjb25zdCBmb290ZXIgPSAiPC9ib2R5PjwvaHRtbD4iOwogICAgICAgIAogICAgICAgIGNvbnN0IGZ1bGxIdG1sID0gaGVhZGVyICsgaGVhZGVyU2VjdGlvbiArIGA8aDIgc3R5bGU9InRleHQtYWxpZ246Y2VudGVyOyBtYXJnaW4tYm90dG9tOjIwcHg7Ij4ke3RpdGxlfTwvaDI+YCArIG1ldGEgKyBgPGhyPmAgKyBjb250ZW50ICsgZm9vdGVyU2VjdGlvbiArIGZvb3RlcjsKCiAgICAgICAgY29uc3QgYmxvYiA9IG5ldyBCbG9iKFsnXHVmZWZmJywgZnVsbEh0bWxdLCB7IHR5cGU6ICdhcHBsaWNhdGlvbi9tc3dvcmQnIH0pOwogICAgICAgIGNvbnN0IHVybCA9IFVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7CiAgICAgICAgY29uc3QgbGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTsKICAgICAgICBsaW5rLmhyZWYgPSB1cmw7CiAgICAgICAgbGluay5kb3dubG9hZCA9IGAke3RpdGxlLnJlcGxhY2UoLyAvZywnXycpfV8ke25ldyBEYXRlKCkudG9JU09TdHJpbmcoKS5zcGxpdCgnVCcpWzBdfS5kb2NgOwogICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQobGluayk7CiAgICAgICAgbGluay5jbGljaygpOwogICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQobGluayk7CiAgICB9CgogICAgLy8gLS0tIFBSSU5USU5HIC0tLQogICAgZnVuY3Rpb24gZ2VuZXJhdGVPZmZpY2lhbFByaW50KHRpdGxlLCBkYXRlLCB0eXBlLCBwU3RyLCBib2R5LCBhdHRhY2htZW50cykgewogICAgICAgIGNvbnN0IHMgPSBhcHBEYXRhLnNldHRpbmdzIHx8IHt9OwogICAgICAgIGNvbnN0IHNpZyA9IHMuc2lnbmF0dXJlID8gYDxpbWcgc3JjPSIke3Muc2lnbmF0dXJlfSIgY2xhc3M9InNpZ25hdHVyZS1pbWciPmAgOiAnJzsKICAgICAgICBsZXQgYXR0SHRtbCA9ICIiOwogICAgICAgIGlmKGF0dGFjaG1lbnRzICYmIGF0dGFjaG1lbnRzLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgYXR0SHRtbCA9IGA8ZGl2IGNsYXNzPSJhdHRhY2htZW50LXByaW50LWxpc3QiPjxzdHJvbmc+UGnDqGNlcyBqb2ludGVzIC8gRG9jdW1lbnRzIGxpw6lzIDo8L3N0cm9uZz48dWw+YCArIGF0dGFjaG1lbnRzLm1hcChhID0+IGA8bGk+JHthLm5hbWV9PC9saT5gKS5qb2luKCcnKSArIGA8L3VsPjwvZGl2PmA7CiAgICAgICAgfQogICAgICAgIGNvbnN0IGxheW91dCAgID0gcy5wZGZIZWFkZXJMYXlvdXQgICB8fCAnY2xhc3NpcXVlJzsKICAgICAgICBjb25zdCBoQ29sb3IgICA9IHMucGRmSGVhZGVyQ29sb3IgICAgfHwgJyMxYjI0MzMnOwogICAgICAgIGNvbnN0IHN1YnRpdGxlID0gcy5wZGZIZWFkZXJTdWJ0aXRsZSB8fCAnRGlyZWN0aW9uJzsKICAgICAgICBjb25zdCBzY2hvb2wgICA9IHMuc2Nob29sIHx8ICcnOwogICAgICAgIGNvbnN0IGNpdHkgICAgID0gcy5jaXR5ICAgfHwgJyc7CiAgICAgICAgY29uc3QgdXNlciAgICAgPSBzLnVzZXIgfHwgcy5uYW1lIHx8ICcnOwogICAgICAgIGNvbnN0IGRhdGVTdHIgID0gZGF0ZSA/ICdMZcKgJyArIG5ldyBEYXRlKGRhdGUpLnRvTG9jYWxlRGF0ZVN0cmluZygnZnItRlInKSA6ICcnOwogICAgICAgIGNvbnN0IGxvZ29UYWcgID0gcy5sb2dvID8gYDxpbWcgc3JjPSIke3MubG9nb30iIHN0eWxlPSJtYXgtaGVpZ2h0OjgwcHg7bWF4LXdpZHRoOjE2MHB4O29iamVjdC1maXQ6Y29udGFpbjtkaXNwbGF5OmJsb2NrOy13ZWJraXQtcHJpbnQtY29sb3ItYWRqdXN0OmV4YWN0O3ByaW50LWNvbG9yLWFkanVzdDpleGFjdDsiPmAgOiAnJzsKICAgICAgICBjb25zdCBsb2dvVGFnU209IHMubG9nbyA/IGA8aW1nIHNyYz0iJHtzLmxvZ299IiBzdHlsZT0ibWF4LWhlaWdodDo1MHB4O21heC13aWR0aDoxMTBweDtvYmplY3QtZml0OmNvbnRhaW47YmFja2dyb3VuZDp3aGl0ZTtwYWRkaW5nOjNweDtib3JkZXItcmFkaXVzOjNweDstd2Via2l0LXByaW50LWNvbG9yLWFkanVzdDpleGFjdDtwcmludC1jb2xvci1hZGp1c3Q6ZXhhY3Q7Ij5gIDogJyc7CgogICAgICAgIGxldCBoZWFkZXJIdG1sID0gJyc7CiAgICAgICAgaWYgKGxheW91dCA9PT0gJ21vZGVybmUnKSB7CiAgICAgICAgICAgIGhlYWRlckh0bWwgPSBgPGRpdiBzdHlsZT0idGV4dC1hbGlnbjpjZW50ZXI7bWFyZ2luLWJvdHRvbToyMHB4O3BhZGRpbmctYm90dG9tOjE1cHg7Ym9yZGVyLWJvdHRvbTozcHggc29saWQgJHtoQ29sb3J9OyI+CiAgICAgICAgICAgICAgICAke3MubG9nbyA/IGA8aW1nIHNyYz0iJHtzLmxvZ299IiBzdHlsZT0ibWF4LWhlaWdodDo3MHB4O29iamVjdC1maXQ6Y29udGFpbjtkaXNwbGF5OmJsb2NrO21hcmdpbjowIGF1dG8gOHB4Oy13ZWJraXQtcHJpbnQtY29sb3ItYWRqdXN0OmV4YWN0O3ByaW50LWNvbG9yLWFkanVzdDpleGFjdDsiPmAgOiAnJ30KICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9ImZvbnQtc2l6ZToxLjNyZW07Zm9udC13ZWlnaHQ6OTAwO3RleHQtdHJhbnNmb3JtOnVwcGVyY2FzZTtsZXR0ZXItc3BhY2luZzoycHg7Y29sb3I6JHtoQ29sb3J9OyI+JHtzY2hvb2x9PC9kaXY+CiAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJmb250LXNpemU6LjgycmVtO2NvbG9yOiM2NjY7bWFyZ2luLXRvcDoycHg7Ij4ke3N1YnRpdGxlfSR7Y2l0eSA/ICcg4oCUICcgKyBjaXR5IDogJyd9PC9kaXY+CiAgICAgICAgICAgIDwvZGl2PmA7CiAgICAgICAgfSBlbHNlIGlmIChsYXlvdXQgPT09ICdiYW5kZWF1JykgewogICAgICAgICAgICBoZWFkZXJIdG1sID0gYDxkaXYgc3R5bGU9ImJhY2tncm91bmQ6JHtoQ29sb3J9O2NvbG9yOndoaXRlO3BhZGRpbmc6MTRweCAyMHB4O21hcmdpbi1ib3R0b206MjBweDtkaXNwbGF5OmZsZXg7YWxpZ24taXRlbXM6Y2VudGVyO2dhcDoxNnB4Oy13ZWJraXQtcHJpbnQtY29sb3ItYWRqdXN0OmV4YWN0O3ByaW50LWNvbG9yLWFkanVzdDpleGFjdDsiPgogICAgICAgICAgICAgICAgJHtzLmxvZ28gPyBgPGltZyBzcmM9IiR7cy5sb2dvfSIgc3R5bGU9Im1heC1oZWlnaHQ6NTJweDttYXgtd2lkdGg6MTAwcHg7b2JqZWN0LWZpdDpjb250YWluO2JhY2tncm91bmQ6d2hpdGU7cGFkZGluZzo0cHg7Ym9yZGVyLXJhZGl1czo1cHg7ZmxleC1zaHJpbms6MDstd2Via2l0LXByaW50LWNvbG9yLWFkanVzdDpleGFjdDtwcmludC1jb2xvci1hZGp1c3Q6ZXhhY3Q7Ij5gIDogJyd9CiAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJmbGV4OjE7Ij4KICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJmb250LXNpemU6MS4xcmVtO2ZvbnQtd2VpZ2h0OjkwMDt0ZXh0LXRyYW5zZm9ybTp1cHBlcmNhc2U7bGV0dGVyLXNwYWNpbmc6MS41cHg7Ij4ke3NjaG9vbH08L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJmb250LXNpemU6Ljc1cmVtO29wYWNpdHk6Ljg1O21hcmdpbi10b3A6MnB4OyI+JHtzdWJ0aXRsZX0ke2NpdHkgPyAnIOKAlCAnICsgY2l0eSA6ICcnfTwvZGl2PgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDwvZGl2PmA7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgLy8gQ2xhc3NpcXVlCiAgICAgICAgICAgIGhlYWRlckh0bWwgPSBgPGRpdiBzdHlsZT0iZGlzcGxheTpmbGV4O2p1c3RpZnktY29udGVudDpzcGFjZS1iZXR3ZWVuO2FsaWduLWl0ZW1zOmZsZXgtc3RhcnQ7bWFyZ2luLWJvdHRvbToyMHB4O2JvcmRlci1ib3R0b206MS41cHggc29saWQgIzAwMDtwYWRkaW5nLWJvdHRvbToxNXB4OyI+CiAgICAgICAgICAgICAgICA8ZGl2PgogICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9ImZvbnQtd2VpZ2h0OmJvbGQ7dGV4dC10cmFuc2Zvcm06dXBwZXJjYXNlO2ZvbnQtc2l6ZToxLjJyZW07Ij4ke3NjaG9vbH08L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJmb250LXNpemU6LjgycmVtO2NvbG9yOiM1NTU7bWFyZ2luLXRvcDoycHg7Ij4ke3N1YnRpdGxlfSR7Y2l0eSA/ICcg4oCUICcgKyBjaXR5IDogJyd9PC9kaXY+CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIDxkaXY+JHtsb2dvVGFnfTwvZGl2PgogICAgICAgICAgICA8L2Rpdj5gOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIGA8ZGl2IGNsYXNzPSJwcmludC1wYWdlIj4KICAgICAgICAgICAgJHtoZWFkZXJIdG1sfQogICAgICAgICAgICA8ZGl2IGNsYXNzPSJvZmZpY2lhbC1tZXRhIj4ke2RhdGVTdHJ9PC9kaXY+CiAgICAgICAgICAgIDxoMiBzdHlsZT0idGV4dC1hbGlnbjpjZW50ZXI7Ij4ke3RpdGxlfTwvaDI+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9Im9mZmljaWFsLXN1YmplY3QiPk9CSkVUwqA6ICR7dHlwZX08L2Rpdj4KICAgICAgICAgICAgJHtwU3RyID8gYDxkaXYgY2xhc3M9Im9mZmljaWFsLXBhcnRpY2lwYW50cyI+JHtwU3RyfTwvZGl2PmAgOiAnJ30KICAgICAgICAgICAgPGRpdiBjbGFzcz0ib2ZmaWNpYWwtY29udGVudCI+JHtib2R5fTwvZGl2PgogICAgICAgICAgICAke2F0dEh0bWx9CiAgICAgICAgICAgIDxkaXYgY2xhc3M9Im9mZmljaWFsLWZvb3RlciI+JHtzaWd9PHN0cm9uZz4ke3VzZXJ9PC9zdHJvbmc+PC9kaXY+CiAgICAgICAgPC9kaXY+YDsKICAgIH0KCiAgICAKICAgIAogICAgZnVuY3Rpb24gcnRlSW5zZXJ0TG9nbygpIHsKICAgICAgICB2YXIgbG9nbyA9IGFwcERhdGEuc2V0dGluZ3MgJiYgYXBwRGF0YS5zZXR0aW5ncy5sb2dvOwogICAgICAgIGlmICghbG9nbykgeyBhbGVydCgnQXVjdW4gbG9nbyBkw6lmaW5pLiBBam91dGV6IHVuIGxvZ28gZGFucyBsZXMgUGFyYW3DqHRyZXMuJyk7IHJldHVybjsgfQogICAgICAgIGRvY3VtZW50LmV4ZWNDb21tYW5kKCdpbnNlcnRIVE1MJywgZmFsc2UsICc8aW1nIHNyYz0iJytsb2dvKyciIGNsYXNzPSJydGUtbG9nby1pbWciIHN0eWxlPSJtYXgtaGVpZ2h0OjYwcHg7bWF4LXdpZHRoOjEyMHB4O3ZlcnRpY2FsLWFsaWduOm1pZGRsZTsiIGFsdD0iTG9nbyI+Jyk7CiAgICB9CiAgICBmdW5jdGlvbiBydGVDb2xvcihidG4pIHsKICAgICAgICB2YXIgZXhpc3RpbmcgPSBidG4ucGFyZW50RWxlbWVudC5xdWVyeVNlbGVjdG9yKCcucnRlLWNvbG9yLXBvcCcpOwogICAgICAgIGlmIChleGlzdGluZykgeyBleGlzdGluZy5yZW1vdmUoKTsgcmV0dXJuOyB9CiAgICAgICAgdmFyIGNvbG9ycyA9IFsnIzAwMDAwMCcsJyNlNzRjM2MnLCcjZTY3ZTIyJywnI2YxYzQwZicsJyMyN2FlNjAnLCcjMjk4MGI5JywnIzhlNDRhZCcsJyMyYzNlNTAnLCcjOTVhNWE2JywnIzFhYmM5YycsJyNkMzU0MDAnLCcjYzAzOTJiJywnIzE2YTA4NScsJyMyZWNjNzEnLCcjMzQ5OGRiJywnIzliNTliNiddOwogICAgICAgIHZhciBwb3AgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgICAgICBwb3AuY2xhc3NOYW1lID0gJ3J0ZS1jb2xvci1wb3AnOwogICAgICAgIGNvbG9ycy5mb3JFYWNoKGZ1bmN0aW9uKGMpIHsKICAgICAgICAgICAgdmFyIHN3ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgICAgICAgIHN3LmNsYXNzTmFtZSA9ICdydGUtY29sb3Itc3cnOwogICAgICAgICAgICBzdy5zdHlsZS5iYWNrZ3JvdW5kID0gYzsKICAgICAgICAgICAgc3cub25jbGljayA9IGZ1bmN0aW9uKGUpIHsgZS5zdG9wUHJvcGFnYXRpb24oKTsgZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2ZvcmVDb2xvcicsIGZhbHNlLCBjKTsgcG9wLnJlbW92ZSgpOyB9OwogICAgICAgICAgICBwb3AuYXBwZW5kQ2hpbGQoc3cpOwogICAgICAgIH0pOwogICAgICAgIGJ0bi5zdHlsZS5wb3NpdGlvbiA9ICdyZWxhdGl2ZSc7CiAgICAgICAgYnRuLmFwcGVuZENoaWxkKHBvcCk7CiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpeyBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIGhhbmRsZXIoZSl7IGlmKCFwb3AuY29udGFpbnMoZS50YXJnZXQpKXtwb3AucmVtb3ZlKCk7ZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLGhhbmRsZXIpO30gfSwge29uY2U6ZmFsc2V9KTsgfSwxMCk7CiAgICB9CiAgICBmdW5jdGlvbiBydGVMaW5rKGJ0bikgewogICAgICAgIHZhciB1cmwgPSBwcm9tcHQoJ1VSTCBkdSBsaWVuIDonLCdodHRwczovLycpOwogICAgICAgIGlmICh1cmwpIGRvY3VtZW50LmV4ZWNDb21tYW5kKCdjcmVhdGVMaW5rJywgZmFsc2UsIHVybCk7CiAgICB9CgogICAgZnVuY3Rpb24gd2FpdEZvckltYWdlc1RoZW5QcmludCgpIHsKICAgICAgICB2YXIgem9uZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcmludC16b25lJyk7CiAgICAgICAgdmFyIGltZ3MgPSB6b25lLnF1ZXJ5U2VsZWN0b3JBbGwoJ2ltZycpOwogICAgICAgIGlmIChpbWdzLmxlbmd0aCA9PT0gMCkgeyB3aW5kb3cucHJpbnQoKTsgcmV0dXJuOyB9CiAgICAgICAgdmFyIGxvYWRlZCA9IDA7CiAgICAgICAgdmFyIHRvdGFsID0gaW1ncy5sZW5ndGg7CiAgICAgICAgdmFyIGRvbmUgPSBmYWxzZTsKICAgICAgICB2YXIgdGltZW91dCA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7IGlmICghZG9uZSkgeyBkb25lID0gdHJ1ZTsgd2luZG93LnByaW50KCk7IH0gfSwgMjAwMCk7CiAgICAgICAgaW1ncy5mb3JFYWNoKGZ1bmN0aW9uKGltZykgewogICAgICAgICAgICBpZiAoaW1nLmNvbXBsZXRlICYmIGltZy5uYXR1cmFsSGVpZ2h0ID4gMCkgewogICAgICAgICAgICAgICAgbG9hZGVkKys7CiAgICAgICAgICAgICAgICBpZiAobG9hZGVkID49IHRvdGFsICYmICFkb25lKSB7IGRvbmUgPSB0cnVlOyBjbGVhclRpbWVvdXQodGltZW91dCk7IHdpbmRvdy5wcmludCgpOyB9CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBpbWcub25sb2FkID0gaW1nLm9uZXJyb3IgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICBsb2FkZWQrKzsKICAgICAgICAgICAgICAgICAgICBpZiAobG9hZGVkID49IHRvdGFsICYmICFkb25lKSB7IGRvbmUgPSB0cnVlOyBjbGVhclRpbWVvdXQodGltZW91dCk7IHdpbmRvdy5wcmludCgpOyB9CiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgLy8gRm9yY2UgcmVsb2FkIGZvciBiYXNlNjQgaW1hZ2VzCiAgICAgICAgICAgICAgICBpZiAoaW1nLnNyYyAmJiBpbWcuc3JjLmluZGV4T2YoJ2RhdGE6JykgPT09IDApIHsKICAgICAgICAgICAgICAgICAgICB2YXIgc3JjID0gaW1nLnNyYzsKICAgICAgICAgICAgICAgICAgICBpbWcuc3JjID0gJyc7CiAgICAgICAgICAgICAgICAgICAgaW1nLnNyYyA9IHNyYzsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0pOwogICAgfQoKICAgIGZ1bmN0aW9uIHByaW50Q3VycmVudEZvcm0obW9kZSkgewogICAgICAgIGxldCB0aXRsZSwgZGF0ZSwgdHlwZSwgYm9keSwgcFN0cj0iIiwgYXR0cz1bXTsKICAgICAgICBpZihtb2RlID09PSAnRU5UJykgewogICAgICAgICAgICB0aXRsZSA9ICJDb21wdGUtUmVuZHUgZCdFbnRyZXRpZW4iOyBkYXRlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VudC1kYXRlJykudmFsdWU7IHR5cGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZW50LXR5cGUnKS52YWx1ZSArICIgLSAiICsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VudC1vYmpldCcpLnZhbHVlOyBib2R5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VudC1jb250ZW51JykuaW5uZXJIVE1MOwogICAgICAgICAgICBsZXQgcyA9IGdldE11bHRpRGF0YSgnZW50LXN0dWRlbnRzLWNvbnRhaW5lcicsICdlbnQtc3R1ZGVudCcpOyBsZXQgdCA9IGdldE11bHRpRGF0YSgnZW50LXRlYWNoZXJzLWNvbnRhaW5lcicsICdlbnQtdGVhY2hlcicpOwogICAgICAgICAgICBpZihzLmxlbmd0aCkgcFN0ciArPSAiPHN0cm9uZz7DiWzDqHZlcyBjb25jZXJuw6lzIDo8L3N0cm9uZz4gIiArIHMubWFwKHg9PngubmFtZSkuam9pbignLCAnKSArICI8YnI+IjsKICAgICAgICAgICAgaWYodC5sZW5ndGgpIHBTdHIgKz0gIjxzdHJvbmc+UHLDqXNlbnRzIDo8L3N0cm9uZz4gIiArIHQubWFwKHg9PngubmFtZSkuam9pbignLCAnKTsKICAgICAgICAgICAgYXR0cyA9IGdldEF0dGFjaG1lbnRzRGF0YSgnZW50LWF0dGFjaG1lbnRzJyk7CiAgICAgICAgfSBlbHNlIGlmKG1vZGUgPT09ICdSRVUnKSB7CiAgICAgICAgICAgIHRpdGxlID0gIkNvbXB0ZS1SZW5kdSBkZSBSw6l1bmlvbiI7IGRhdGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmV1LWRhdGUnKS52YWx1ZTsgdHlwZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXUtdHlwZScpLnZhbHVlOyBib2R5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JldS1jb250ZW51JykuaW5uZXJIVE1MOwogICAgICAgICAgICBsZXQgcyA9IGdldE11bHRpRGF0YSgncmV1LXN0dWRlbnRzLWNvbnRhaW5lcicsICdyZXUtc3R1ZGVudCcpOyBsZXQgdCA9IGdldE11bHRpRGF0YSgncmV1LXRlYWNoZXJzLWNvbnRhaW5lcicsICdyZXUtdGVhY2hlcicpOwogICAgICAgICAgICBpZihzLmxlbmd0aCkgcFN0ciArPSAiPHN0cm9uZz7DiWzDqHZlcyBjb25jZXJuw6lzIDo8L3N0cm9uZz4gIiArIHMubWFwKHg9PngubmFtZSkuam9pbignLCAnKSArICI8YnI+IjsKICAgICAgICAgICAgaWYodC5sZW5ndGgpIHBTdHIgKz0gIjxzdHJvbmc+UGFydGljaXBhbnRzIDo8L3N0cm9uZz4gIiArIHQubWFwKHg9PngubmFtZSkuam9pbignLCAnKTsKICAgICAgICAgICAgYXR0cyA9IGdldEF0dGFjaG1lbnRzRGF0YSgncmV1LWF0dGFjaG1lbnRzJyk7CiAgICAgICAgfSBlbHNlIGlmKG1vZGUgPT09ICdQUkVQX0RJUicpIHsKICAgICAgICAgICAgdGl0bGUgPSAiUsOpdW5pb24gZGUgRGlyZWN0aW9uIjsgZGF0ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkaXItZGF0ZScpLnZhbHVlOyB0eXBlID0gIkNvbXB0ZS1yZW5kdSI7IHBTdHIgPSAiPHN0cm9uZz5QcsOpc2VudHMgOjwvc3Ryb25nPiAiICsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Rpci1wYXJ0cycpLnZhbHVlOwogICAgICAgICAgICBib2R5ID0gYDxoMz5PUkRSRSBEVSBKT1VSPC9oMz4ke2RvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkaXItY29udGVudScpLmlubmVySFRNTH08ZGl2IGNsYXNzPSJwcmludC1zZXBhcmF0b3IiIHN0eWxlPSJtYXJnaW46MjBweCAwOyBib3JkZXItdG9wOjFweCBkYXNoZWQgI2NjYyI+PC9kaXY+PGgzPk5PVEVTICYgRMOJQ0lTSU9OUzwvaDM+JHtkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGlyLW5vdGVzJykuaW5uZXJIVE1MfWA7CiAgICAgICAgICAgIGF0dHMgPSBnZXRBdHRhY2htZW50c0RhdGEoJ2Rpci1hdHRhY2htZW50cycpOwogICAgICAgIH0gZWxzZSBpZihtb2RlID09PSAnU1VJVkknKSB7CiAgICAgICAgICAgIHRpdGxlID0gIlBvaW50IFN1aXZpIMOJbMOodmUiOyBkYXRlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N1aXZpLWRhdGUnKS52YWx1ZTsgdHlwZSA9ICJDb29yZGluYXRpb24gQ1BFIC8gRGlyZWN0aW9uIjsgcFN0ciA9ICI8c3Ryb25nPlBhcnRpY2lwYW50cyA6PC9zdHJvbmc+ICIgKyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3VpdmktcGFydHMnKS52YWx1ZSArICIgfCA8c3Ryb25nPk5pdmVhdXggOjwvc3Ryb25nPiAiICsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N1aXZpLWNsYXNzZXMnKS52YWx1ZTsKICAgICAgICAgICAgYm9keSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzdWl2aS1jb250ZW51JykuaW5uZXJIVE1MOwogICAgICAgICAgICBhdHRzID0gZ2V0QXR0YWNobWVudHNEYXRhKCdzdWl2aS1hdHRhY2htZW50cycpOwogICAgICAgIH0KICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJpbnQtem9uZScpLmlubmVySFRNTCA9IGdlbmVyYXRlT2ZmaWNpYWxQcmludCh0aXRsZSwgZGF0ZSwgdHlwZSwgcFN0ciwgYm9keSwgYXR0cyk7CiAgICAgICAgd2FpdEZvckltYWdlc1RoZW5QcmludCgpOwogICAgfQoKICAgIGZ1bmN0aW9uIHByaW50U2F2ZWREb2ModHlwZSwgaWQpIHsKICAgICAgICBsZXQgaXQsIHRpdGxlLCBzdWIsIGJvZHksIHBTdHI9IiI7CiAgICAgICAgaWYodHlwZT09PSdFTlQnKSB7IGl0ID0gYXBwRGF0YS5lbnRyZXRpZW5zLmZpbmQoeD0+eC5pZC50b1N0cmluZygpPT09aWQudG9TdHJpbmcoKSk7IHRpdGxlPSJFbnRyZXRpZW4iOyBzdWI9aXQudHlwZSsiIC0gIitpdC5vYmpldDsgYm9keT1pdC5ib2R5OyBpZihpdC5zdHVkZW50cy5sZW5ndGgpIHBTdHIrPSI8c3Ryb25nPsOJbMOodmVzIDo8L3N0cm9uZz4gIitpdC5zdHVkZW50cy5tYXAoeD0+eC5uYW1lKS5qb2luKCcsICcpKyI8YnI+IjsgaWYoaXQudGVhY2hlcnMubGVuZ3RoKSBwU3RyKz0iPHN0cm9uZz5QcsOpc2VudHMgOjwvc3Ryb25nPiAiK2l0LnRlYWNoZXJzLm1hcCh4PT54Lm5hbWUpLmpvaW4oJywgJyk7IH0gCiAgICAgICAgZWxzZSBpZiAodHlwZT09PSdSRVUnKSB7IGl0ID0gYXBwRGF0YS5yZXVuaW9ucy5maW5kKHg9PnguaWQudG9TdHJpbmcoKT09PWlkLnRvU3RyaW5nKCkpOyBpZihpdC50eXBlID09PSAiUsOpdW5pb24gZGUgRGlyZWN0aW9uIikgeyB0aXRsZT0iRGlyZWN0aW9uIjsgc3ViPSJDb21wdGUtcmVuZHUiOyBwU3RyPSI8c3Ryb25nPlByw6lzZW50cyA6PC9zdHJvbmc+ICIrKGl0LnBhcnRzIHx8ICIiKTsgYm9keSA9IGA8aDM+T0RKPC9oMz4ke2l0Lm9kan08ZGl2IGNsYXNzPSJwcmludC1zZXBhcmF0b3IiIHN0eWxlPSJtYXJnaW46MjBweCAwOyBib3JkZXItdG9wOjFweCBkYXNoZWQgI2NjYyI+PC9kaXY+PGgzPk5PVEVTPC9oMz4ke2l0LmNyfWA7IH0gZWxzZSB7IHRpdGxlPSJSw6l1bmlvbiI7IHN1Yj1pdC50eXBlOyBib2R5PWl0LmJvZHk7IGlmKGl0LnN0dWRlbnRzLmxlbmd0aCkgcFN0cis9IjxzdHJvbmc+w4lsw6h2ZXMgOjwvc3Ryb25nPiAiK2l0LnN0dWRlbnRzLm1hcCh4PT54Lm5hbWUpLmpvaW4oJywgJykrIjxicj4iOyBpZihpdC50ZWFjaGVycy5sZW5ndGgpIHBTdHIrPSI8c3Ryb25nPlBhcnRpY2lwYW50cyA6PC9zdHJvbmc+ICIraXQudGVhY2hlcnMubWFwKHg9PngubmFtZSkuam9pbignLCAnKTsgfSB9IAogICAgICAgIGVsc2UgaWYgKHR5cGU9PT0nU1VJVkknKSB7IGl0ID0gYXBwRGF0YS5zdWl2aUVsZXZlcy5maW5kKHg9PnguaWQudG9TdHJpbmcoKT09PWlkLnRvU3RyaW5nKCkpOyB0aXRsZT0iU3VpdmkiOyBzdWI9IlBvaW50IENQRSI7IGJvZHk9aXQuYm9keTsgcFN0ciA9ICI8c3Ryb25nPlBhcnRpY2lwYW50cyA6PC9zdHJvbmc+ICIraXQucGFydGljaXBhbnRzKyIgfCA8c3Ryb25nPk5pdmVhdXggOjwvc3Ryb25nPiAiK2l0LmNsYXNzZXM7IH0KICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJpbnQtem9uZScpLmlubmVySFRNTCA9IGdlbmVyYXRlT2ZmaWNpYWxQcmludCh0aXRsZSwgaXQuZGF0ZSwgc3ViLCBwU3RyLCBib2R5LCBpdC5hdHRhY2htZW50cyk7IHdhaXRGb3JJbWFnZXNUaGVuUHJpbnQoKTsKICAgIH0KCiAgICBmdW5jdGlvbiBwcmludEFsbEhpc3RvcnkoKSB7CiAgICAgICAgY29uc3QgbGlzdCA9IGdldEhpc3RvcnlMaXN0KCk7IGlmKCFsaXN0Lmxlbmd0aCkgcmV0dXJuOwogICAgICAgIGxldCBodG1sID0gIiI7CiAgICAgICAgbGlzdC5mb3JFYWNoKGkgPT4gewogICAgICAgICAgICBsZXQgdGl0bGUsIHN1YiwgYm9keSwgcFN0cj0iIjsKICAgICAgICAgICAgaWYoaS50PT09J0VOVCcpIHsgdGl0bGU9IkVudHJldGllbiI7IHN1Yj1pLmQudHlwZSsiIC0gIitpLmQub2JqZXQ7IGJvZHk9aS5kLmJvZHk7IGlmKGkuZC5zdHVkZW50cy5sZW5ndGgpIHBTdHIrPSLDiWzDqHZlcyA6ICIraS5kLnN0dWRlbnRzLm1hcCh4PT54Lm5hbWUpLmpvaW4oJywgJykrIjxicj4iOyBpZihpLmQudGVhY2hlcnMubGVuZ3RoKSBwU3RyKz0iUHLDqXNlbnRzIDogIitpLmQudGVhY2hlcnMubWFwKHg9PngubmFtZSkuam9pbignLCAnKTsgfSAKICAgICAgICAgICAgZWxzZSBpZiAoaS50PT09J1JFVScpIHsgaWYoaS5kLnR5cGUgPT09ICJSw6l1bmlvbiBkZSBEaXJlY3Rpb24iKSB7IHRpdGxlPSJEaXJlY3Rpb24iOyBzdWI9IkNvbXB0ZS1yZW5kdSI7IHBTdHI9IlByw6lzZW50cyA6ICIrKGkuZC5wYXJ0cyB8fCAiIik7IGJvZHkgPSBgPGgzPk9ESjwvaDM+JHtpLmQub2RqfTxkaXYgc3R5bGU9Im1hcmdpbjoyMHB4IDA7IGJvcmRlci10b3A6MXB4IGRhc2hlZCAjY2NjIj48L2Rpdj48aDM+Q1I8L2gzPiR7aS5kLmNyfWA7IH0gZWxzZSB7IHRpdGxlPSJSw6l1bmlvbiI7IHN1Yj1pLmQudHlwZTsgYm9keT1pLmQuYm9keTsgaWYoaS5kLnN0dWRlbnRzLmxlbmd0aCkgcFN0cis9IsOJbMOodmVzIDogIitpLmQuc3R1ZGVudHMubWFwKHg9PngubmFtZSkuam9pbignLCAnKSsiPGJyPiI7IGlmKGkuZC50ZWFjaGVycy5sZW5ndGgpIHBTdHIrPSJQYXJ0aWNpcGFudHMgOiAiK2kuZC50ZWFjaGVycy5tYXAoeD0+eC5uYW1lKS5qb2luKCcsICcpOyB9IH0gCiAgICAgICAgICAgIGVsc2UgaWYgKGkudD09PSdTVUlWSScpIHsgdGl0bGU9IlN1aXZpIjsgc3ViPSJQb2ludCBDUEUiOyBib2R5PWkuZC5ib2R5OyBwU3RyID0gIlBhcnRpY2lwYW50cyA6ICIraS5kLnBhcnRpY2lwYW50cysiIHwgQ2xhc3NlcyA6ICIraS5kLmNsYXNzZXM7IH0KICAgICAgICAgICAgaHRtbCArPSBnZW5lcmF0ZU9mZmljaWFsUHJpbnQodGl0bGUsIGkuZC5kYXRlLCBzdWIsIHBTdHIsIGJvZHksIGkuZC5hdHRhY2htZW50cyk7CiAgICAgICAgfSk7CiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ByaW50LXpvbmUnKS5pbm5lckhUTUwgPSBodG1sOyB3YWl0Rm9ySW1hZ2VzVGhlblByaW50KCk7CiAgICB9CgogICAgLy8gLS0tIEhJU1RPUlkgUkVOREVSIC0tLQogICAgZnVuY3Rpb24gZ2V0SGlzdG9yeUxpc3QoKSB7CiAgICAgICAgY29uc3QgcSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZWFyY2gtc3R1ZGVudCcpLnZhbHVlLnRvTG93ZXJDYXNlKCkudHJpbSgpOwogICAgICAgIGNvbnN0IGYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2VhcmNoLXR5cGUnKS52YWx1ZTsKICAgICAgICBsZXQgbGlzdCA9IFtdOwogICAgICAgIGNvbnN0IGlzTSA9IChpdCkgPT4gewogICAgICAgICAgICBpZiAoIXEpIHJldHVybiB0cnVlOwogICAgICAgICAgICBpZiAoaXQudHlwZT8udG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhxKSB8fCBpdC5vYmpldD8udG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhxKSB8fCBpdC5vZGo/LnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMocSkgfHwgaXQuYm9keT8udG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhxKSB8fCBpdC5jcj8udG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhxKSB8fCBpdC5wYXJ0aWNpcGFudHM/LnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMocSkgfHwgaXQucGFydHM/LnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMocSkpIHJldHVybiB0cnVlOwogICAgICAgICAgICBpZiAoaXQuc3R1ZGVudHM/LnNvbWUocyA9PiBzLm5hbWUudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhxKSkgfHwgaXQudGVhY2hlcnM/LnNvbWUodCA9PiB0Lm5hbWUudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhxKSkpIHJldHVybiB0cnVlOwogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfTsKICAgICAgICBpZihmPT09IkFMTCJ8fGY9PT0iRU5UIikgYXBwRGF0YS5lbnRyZXRpZW5zLmZvckVhY2goZT0+eyBpZihpc00oZSkpIGxpc3QucHVzaCh7dDonRU5UJyxkOmUsdGltZTpuZXcgRGF0ZShlLmRhdGUpLmdldFRpbWUoKX0pOyB9KTsKICAgICAgICBpZihmPT09IkFMTCJ8fGY9PT0iUkVVInx8Zj09PSJESVIiKSBhcHBEYXRhLnJldW5pb25zLmZvckVhY2gocj0+eyBjb25zdCBpc0QgPSByLnR5cGU9PT0iUsOpdW5pb24gZGUgRGlyZWN0aW9uIjsgaWYoZj09PSJESVIiICYmICFpc0QpIHJldHVybjsgaWYoZj09PSJSRVUiICYmIGlzRCkgcmV0dXJuOyBpZihpc00ocikpIGxpc3QucHVzaCh7dDonUkVVJyxkOnIsdGltZTpuZXcgRGF0ZShyLmRhdGUpLmdldFRpbWUoKX0pOyB9KTsKICAgICAgICBpZihmPT09IkFMTCJ8fGY9PT0iU1VJVkkiKSBhcHBEYXRhLnN1aXZpRWxldmVzLmZvckVhY2goc3U9PnsgaWYoaXNNKHN1KSkgbGlzdC5wdXNoKHt0OidTVUlWSScsZDpzdSx0aW1lOm5ldyBEYXRlKHN1LmRhdGUpLmdldFRpbWUoKX0pOyB9KTsKICAgICAgICByZXR1cm4gbGlzdC5zb3J0KChhLGIpPT5iLnRpbWUtYS50aW1lKTsKICAgIH0KCiAgICBmdW5jdGlvbiByZW5kZXJIaXN0b3J5KCkgewogICAgICAgIGNvbnN0IGxpc3QgPSBnZXRIaXN0b3J5TGlzdCgpOyBjb25zdCB0Ym9keSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNoaXN0b3J5LXRhYmxlIHRib2R5Jyk7IHRib2R5LmlubmVySFRNTD0iIjsKICAgICAgICBpZighbGlzdC5sZW5ndGgpIHsgdGJvZHkuaW5uZXJIVE1MPSI8dHI+PHRkIGNvbHNwYW49JzQnIHN0eWxlPSd0ZXh0LWFsaWduOmNlbnRlcjtjb2xvcjojOTk5O3BhZGRpbmc6MjBweCc+QXVjdW4gZG9jdW1lbnQ8L3RkPjwvdHI+IjsgcmV0dXJuOyB9CiAgICAgICAgbGlzdC5mb3JFYWNoKGk9PnsKICAgICAgICAgICAgbGV0IGR0bCA9ICIiOwogICAgICAgICAgICBpZihpLnQ9PT0nRU5UJykgewogICAgICAgICAgICAgICAgdmFyIF9lcyA9IChpLmQuc3R1ZGVudHN8fFtdKS5tYXAocz0+cy5uYW1lKS5maWx0ZXIoQm9vbGVhbik7CiAgICAgICAgICAgICAgICB2YXIgX2V0ID0gKGkuZC50ZWFjaGVyc3x8W10pLm1hcCh0PT50Lm5hbWUpLmZpbHRlcihCb29sZWFuKTsKICAgICAgICAgICAgICAgIGR0bCA9ICc8c3Ryb25nPicraS5kLm9iamV0Kyc8L3N0cm9uZz48YnI+JzsKICAgICAgICAgICAgICAgIGlmKF9lcy5sZW5ndGgpIGR0bCArPSAnPHNtYWxsPjxpIGNsYXNzPSJmYXMgZmEtdXNlci1ncmFkdWF0ZSIgc3R5bGU9ImNvbG9yOiNlNjdlMjI7bWFyZ2luLXJpZ2h0OjNweCI+PC9pPicrX2VzLmpvaW4oJywgJykrJzwvc21hbGw+JzsKICAgICAgICAgICAgICAgIGlmKF9ldC5sZW5ndGgpIGR0bCArPSAnPGJyPjxzbWFsbD48aSBjbGFzcz0iZmFzIGZhLWNoYWxrYm9hcmQtdGVhY2hlciIgc3R5bGU9ImNvbG9yOiMyOTgwYjk7bWFyZ2luLXJpZ2h0OjNweCI+PC9pPicrX2V0LmpvaW4oJywgJykrJzwvc21hbGw+JzsKICAgICAgICAgICAgfSBlbHNlIGlmKGkudD09PSdSRVUnKSB7CiAgICAgICAgICAgICAgICB2YXIgX3JzID0gKGkuZC5zdHVkZW50c3x8W10pLm1hcChzPT5zLm5hbWUpLmZpbHRlcihCb29sZWFuKTsKICAgICAgICAgICAgICAgIHZhciBfcnQgPSAoaS5kLnRlYWNoZXJzfHxbXSkubWFwKHQ9PnQubmFtZSkuZmlsdGVyKEJvb2xlYW4pOwogICAgICAgICAgICAgICAgdmFyIF9oZHIgPSBpLmQudHlwZT09PSJSw6l1bmlvbiBkZSBEaXJlY3Rpb24iPyJEaXJlY3Rpb24iOihpLmQub2RqfHwnJykucmVwbGFjZSgvPFtePl0qPi9nLCAnJykuc3Vic3RyaW5nKDAsNTApOwogICAgICAgICAgICAgICAgZHRsID0gJzxzdHJvbmc+JytfaGRyKyc8L3N0cm9uZz48YnI+JzsKICAgICAgICAgICAgICAgIGlmKF9ycy5sZW5ndGgpIGR0bCArPSAnPHNtYWxsPjxpIGNsYXNzPSJmYXMgZmEtdXNlci1ncmFkdWF0ZSIgc3R5bGU9ImNvbG9yOiNlNjdlMjI7bWFyZ2luLXJpZ2h0OjNweCI+PC9pPicrX3JzLmpvaW4oJywgJykrJzwvc21hbGw+JzsKICAgICAgICAgICAgICAgIGlmKF9ydC5sZW5ndGgpIGR0bCArPSAnPGJyPjxzbWFsbD48aSBjbGFzcz0iZmFzIGZhLWNoYWxrYm9hcmQtdGVhY2hlciIgc3R5bGU9ImNvbG9yOiMyOTgwYjk7bWFyZ2luLXJpZ2h0OjNweCI+PC9pPicrX3J0LmpvaW4oJywgJykrJzwvc21hbGw+JzsKICAgICAgICAgICAgICAgIGlmKCFfcnMubGVuZ3RoICYmICFfcnQubGVuZ3RoICYmIGkuZC5wYXJ0cykgZHRsICs9ICc8c21hbGw+JytpLmQucGFydHMrJzwvc21hbGw+JzsKICAgICAgICAgICAgfSBlbHNlIGlmKGkudD09PSdTVUlWSScpIGR0bCA9ICc8c3Ryb25nPkNsYXNzZXMgOiAnK2kuZC5jbGFzc2VzKyc8L3N0cm9uZz48YnI+PHNtYWxsPicraS5kLnBhcnRpY2lwYW50cysnPC9zbWFsbD4nOwogICAgICAgICAgICAKICAgICAgICAgICAgY29uc3QgaGFzQXR0ID0gKGkuZC5hdHRhY2htZW50cyAmJiBpLmQuYXR0YWNobWVudHMubGVuZ3RoID4gMCkgPyAnPGkgY2xhc3M9ImZhcyBmYS1wYXBlcmNsaXAiIHN0eWxlPSJjb2xvcjojN2Y4YzhkOyBtYXJnaW4tbGVmdDo1cHg7Ij48L2k+JyA6ICcnOwoKICAgICAgICAgICAgdGJvZHkuaW5uZXJIVE1MICs9IGA8dHI+PHRkPiR7bmV3IERhdGUoaS5kLmRhdGUpLnRvTG9jYWxlRGF0ZVN0cmluZygnZnItRlInKX08L3RkPjx0ZD48c3BhbiBjbGFzcz0iYmFkZ2UgJHtpLnQ9PT0nRU5UJz8nYmctZW50JzooaS50PT09J1NVSVZJJz8nYmctc3VpdmknOihpLmQudHlwZS5pbmNsdWRlcygnRGlyJyk/J2JnLWRpcic6J2JnLXJldScpKX0iPiR7aS5kLnR5cGV9PC9zcGFuPiR7aGFzQXR0fTwvdGQ+PHRkPiR7ZHRsfTwvdGQ+PHRkPjxidXR0b24gY2xhc3M9ImJ0biBidG4td2FybmluZyBidG4tc20iIG9uY2xpY2s9ImxvYWRJdGVtRm9yRWRpdCgnJHtpLnR9JywgJyR7aS5kLmlkfScpIj48aSBjbGFzcz0iZmFzIGZhLXBlbiI+PC9pPjwvYnV0dG9uPiA8YnV0dG9uIGNsYXNzPSJidG4gYnRuLWRhcmsgYnRuLXNtIiBvbmNsaWNrPSJwcmludFNhdmVkRG9jKCcke2kudH0nLCcke2kuZC5pZH0nKSI+PGkgY2xhc3M9ImZhcyBmYS1wcmludCI+PC9pPjwvYnV0dG9uPiA8YnV0dG9uIGNsYXNzPSJidG4gYnRuLWRhbmdlciBidG4tc20iIG9uY2xpY2s9ImRlbGV0ZUl0ZW0oJyR7aS50PT09J0VOVCc/J2VudHJldGllbnMnOihpLnQ9PT0nUkVVJz8ncmV1bmlvbnMnOidzdWl2aUVsZXZlcycpfScsJHtpLmQuaWR9KSI+PGkgY2xhc3M9ImZhcyBmYS10cmFzaCI+PC9pPjwvYnV0dG9uPjwvdGQ+PC90cj5gOwogICAgICAgIH0pOwogICAgfQoKICAgIC8vIC0tLSBEQVNIQk9BUkQgJiBTVEFUUyAtLS0KICAgIGZ1bmN0aW9uIHJlbmRlckRhc2hib2FyZCgpIHsKICAgICAgICBjb25zdCB0cyA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKS5zcGxpdCgnVCcpWzBdOwogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdrcGktZW50JykuaW5uZXJUZXh0ID0gYXBwRGF0YS5lbnRyZXRpZW5zLmxlbmd0aDsKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgna3BpLXJldScpLmlubmVyVGV4dCA9IGFwcERhdGEucmV1bmlvbnMuZmlsdGVyKHI9PnIudHlwZSE9PSJSw6l1bmlvbiBkZSBEaXJlY3Rpb24iKS5sZW5ndGg7CiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2twaS1kaXInKS5pbm5lclRleHQgPSBhcHBEYXRhLnJldW5pb25zLmZpbHRlcihyPT5yLnR5cGU9PT0iUsOpdW5pb24gZGUgRGlyZWN0aW9uIikubGVuZ3RoOwogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdrcGktc3VpdmknKS5pbm5lclRleHQgPSBhcHBEYXRhLnN1aXZpRWxldmVzLmxlbmd0aDsKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgna3BpLXRvZG8nKS5pbm5lclRleHQgPSBhcHBEYXRhLnRvZG8udXJnZW50Lmxlbmd0aDsKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgna3BpLWNhbCcpLmlubmVyVGV4dCA9IGFwcERhdGEuY2FsZW5kYXIuZmlsdGVyKGM9PmMuZGF0ZT49dHMpLmxlbmd0aDsKICAgICAgICAKICAgICAgICByZW5kZXJDaGFydCgnY2hhcnRUeXBlcycsICdkb3VnaG51dCcsIHsgCiAgICAgICAgICAgIGxhYmVsczogWydVcmdlbmNlcycsICdEaXJlY3Rpb24nLCAnRW50cmV0aWVucycsICdSw6l1bmlvbnMnLCAnQWdlbmRhJywgJ1N1aXZpJ10sIAogICAgICAgICAgICBkYXRhc2V0czogW3sgCiAgICAgICAgICAgICAgICBkYXRhOiBbYXBwRGF0YS50b2RvLnVyZ2VudC5sZW5ndGgsIGFwcERhdGEucmV1bmlvbnMuZmlsdGVyKHI9PnIudHlwZT09PSJSw6l1bmlvbiBkZSBEaXJlY3Rpb24iKS5sZW5ndGgsIGFwcERhdGEuZW50cmV0aWVucy5sZW5ndGgsIGFwcERhdGEucmV1bmlvbnMuZmlsdGVyKHI9PnIudHlwZSE9PSJSw6l1bmlvbiBkZSBEaXJlY3Rpb24iKS5sZW5ndGgsIGFwcERhdGEuY2FsZW5kYXIubGVuZ3RoLCBhcHBEYXRhLnN1aXZpRWxldmVzLmxlbmd0aF0sIAogICAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiBbJyNlNzRjM2MnLCcjMmMzZTUwJywnI2MwMzkyYicsJyMyN2FlNjAnLCcjZjM5YzEyJywnIzI5ODBiOSddIAogICAgICAgICAgICB9XSAKICAgICAgICB9KTsKICAgICAgICAKICAgICAgICBjb25zdCBzdCA9IGdldE1vbnRobHlTdGF0cygpOyAKICAgICAgICByZW5kZXJDaGFydCgnY2hhcnRNb250aGx5JywgJ2xpbmUnLCB7IGxhYmVsczogc3QubGFiZWxzLCBkYXRhc2V0czogW3sgbGFiZWw6ICdBY3Rpdml0w6lzJywgZGF0YTogc3QudmFsdWVzLCBib3JkZXJDb2xvcjogJyMyOTgwYjknLCBmaWxsOiB0cnVlLCB0ZW5zaW9uOiAwLjMgfV0gfSk7CiAgICAgICAgcmVuZGVyVG9wU3R1ZGVudHMoKTsKICAgIH0KCiAgICBmdW5jdGlvbiByZW5kZXJUb3BTdHVkZW50cygpIHsKICAgICAgICBjb25zdCBjb3VudHMgPSB7fTsKICAgICAgICBbLi4uYXBwRGF0YS5lbnRyZXRpZW5zLCAuLi5hcHBEYXRhLnJldW5pb25zXS5mb3JFYWNoKGl0ID0+IHsKICAgICAgICAgICAgaWYoaXQuc3R1ZGVudHMpIHsKICAgICAgICAgICAgICAgIGl0LnN0dWRlbnRzLmZvckVhY2gocyA9PiB7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgbmFtZSA9IHMubmFtZS50cmltKCk7CiAgICAgICAgICAgICAgICAgICAgaWYobmFtZSkgY291bnRzW25hbWVdID0gKGNvdW50c1tuYW1lXSB8fCAwKSArIDE7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgIH0pOwogICAgICAgIGNvbnN0IHNvcnRlZCA9IE9iamVjdC5lbnRyaWVzKGNvdW50cykuc29ydCgoYSxiKSA9PiBiWzFdIC0gYVsxXSkuc2xpY2UoMCwgNSk7CiAgICAgICAgY29uc3QgbGlzdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0b3Atc3R1ZGVudHMtbGlzdCcpOwogICAgICAgIGxpc3QuaW5uZXJIVE1MID0gc29ydGVkLmxlbmd0aCA/ICIiIDogIjxsaSBzdHlsZT0nY29sb3I6Izk5OSc+QXVjdW5lIGRvbm7DqWUgw6lsw6h2ZTwvbGk+IjsKICAgICAgICBzb3J0ZWQuZm9yRWFjaCgoW25hbWUsIGNvdW50XSkgPT4gewogICAgICAgICAgICBsaXN0LmlubmVySFRNTCArPSBgPGxpIGNsYXNzPSJ0b3Atc3R1ZGVudC1pdGVtIj48c3Bhbj4ke25hbWV9PC9zcGFuPiA8c3Ryb25nPiR7Y291bnR9IGZvaXM8L3N0cm9uZz48L2xpPmA7CiAgICAgICAgfSk7CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0TW9udGhseVN0YXRzKCkgewogICAgICAgIGNvbnN0IG10aHMgPSBbXTsgY29uc3QgbiA9IG5ldyBEYXRlKCk7CiAgICAgICAgZm9yIChsZXQgaT01OyBpPj0wOyBpLS0pIHsgY29uc3QgZD1uZXcgRGF0ZShuLmdldEZ1bGxZZWFyKCksIG4uZ2V0TW9udGgoKS1pLCAxKTsgbXRocy5wdXNoKHsgbGFiZWw6IGQudG9Mb2NhbGVEYXRlU3RyaW5nKCdmci1GUicsIHttb250aDonc2hvcnQnLCB5ZWFyOicyLWRpZ2l0J30pLCBrZXk6IGAke2QuZ2V0RnVsbFllYXIoKX0tJHtTdHJpbmcoZC5nZXRNb250aCgpKzEpLnBhZFN0YXJ0KDIsJzAnKX1gLCBjb3VudDogMCB9KTsgfQogICAgICAgIFsuLi5hcHBEYXRhLmVudHJldGllbnMsIC4uLmFwcERhdGEucmV1bmlvbnMsIC4uLmFwcERhdGEuc3VpdmlFbGV2ZXNdLmZvckVhY2goaXQgPT4geyBpZihpdC5kYXRlKSB7IGNvbnN0IGsgPSBpdC5kYXRlLnN1YnN0cmluZygwLDcpOyBjb25zdCBtID0gbXRocy5maW5kKHg9Pngua2V5PT09ayk7IGlmKG0pIG0uY291bnQrKzsgfSB9KTsKICAgICAgICByZXR1cm4geyBsYWJlbHM6IG10aHMubWFwKG09Pm0ubGFiZWwpLCB2YWx1ZXM6IG10aHMubWFwKG09Pm0uY291bnQpIH07CiAgICB9CgogICAgZnVuY3Rpb24gcmVuZGVyQ2hhcnQoaWQsIHR5cGUsIGRhdGEpIHsKICAgICAgICBjb25zdCBjYW52YXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCk7IGlmKCFjYW52YXMpIHJldHVybjsKICAgICAgICBjb25zdCBjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTsgaWYoY2hhcnRJbnN0YW5jZXNbaWRdKSBjaGFydEluc3RhbmNlc1tpZF0uZGVzdHJveSgpOwogICAgICAgIGNoYXJ0SW5zdGFuY2VzW2lkXSA9IG5ldyBDaGFydChjdHgsIHsgdHlwZSwgZGF0YSwgb3B0aW9uczogeyByZXNwb25zaXZlOiB0cnVlLCBtYWludGFpbkFzcGVjdFJhdGlvOiBmYWxzZSB9IH0pOwogICAgfQoKICAgIGZ1bmN0aW9uIGxvYWRTZXR0aW5nc1VJKCkgewogICAgICAgIGxvYWRUZW1wbGF0ZXNVSSgpOyBsb2FkU2VwQ29uZmlnKCk7IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjZmctc2Nob29sJykudmFsdWU9YXBwRGF0YS5zZXR0aW5ncy5zY2hvb2w7IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjZmctdXNlcicpLnZhbHVlPWFwcERhdGEuc2V0dGluZ3MudXNlcjsgdXBkYXRlUHJldmlld3MoKTsgfQogICAgZnVuY3Rpb24gc2F2ZVNldHRpbmdzKCkgeyBhcHBEYXRhLnNldHRpbmdzLnNjaG9vbD1kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2ZnLXNjaG9vbCcpLnZhbHVlOyBhcHBEYXRhLnNldHRpbmdzLnVzZXI9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NmZy11c2VyJykudmFsdWU7IHNhdmVEYXRhKCk7IGFsZXJ0KCJFbnJlZ2lzdHLDqSIpOyB9CiAgICBmdW5jdGlvbiB1cGRhdGVQcmV2aWV3cygpIHsgaWYoYXBwRGF0YS5zZXR0aW5ncy5sb2dvKSB7IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjZmctbG9nby1wcmV2aWV3Jykuc3JjPWFwcERhdGEuc2V0dGluZ3MubG9nbzsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NmZy1sb2dvLXByZXZpZXcnKS5zdHlsZS5kaXNwbGF5PSdibG9jayc7IH0gaWYoYXBwRGF0YS5zZXR0aW5ncy5zaWduYXR1cmUpIHsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NmZy1zaWctcHJldmlldycpLnNyYz1hcHBEYXRhLnNldHRpbmdzLnNpZ25hdHVyZTsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NmZy1zaWctcHJldmlldycpLnN0eWxlLmRpc3BsYXk9J2Jsb2NrJzsgfSB9CiAgICBmdW5jdGlvbiBlbmNvZGVJbWFnZShpLCBpZCwgaykgeyBjb25zdCBmPWkuZmlsZXNbMF07IGNvbnN0IHI9bmV3IEZpbGVSZWFkZXIoKTsgci5vbmxvYWRlbmQ9KCk9PnsgYXBwRGF0YS5zZXR0aW5nc1trXT1yLnJlc3VsdDsgc2F2ZURhdGEoKTsgdXBkYXRlUHJldmlld3MoKTsgfTsgaWYoZikgci5yZWFkQXNEYXRhVVJMKGYpOyB9CiAgICBmdW5jdGlvbiBkZWxldGVJdGVtKGMsIGlkKSB7IGlmKGNvbmZpcm0oIlN1cHByaW1lciA/IikpIHsgYXBwRGF0YVtjXT1hcHBEYXRhW2NdLmZpbHRlcihpPT5pLmlkLnRvU3RyaW5nKCkhPT1pZC50b1N0cmluZygpKTsgc2F2ZURhdGEoKTsgcmVuZGVySGlzdG9yeSgpOyB9IH0KICAgIGZ1bmN0aW9uIGNsZWFyQWxsKCkgeyBpZihjb25maXJtKCJTdXBwcmltZXIgVE9VVEVTIGxlcyBkb25uw6llcyA/IikpIHsgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ3BlcmRpcl9waWxvdGVfdjEwJyk7IGxvY2F0aW9uLnJlbG9hZCgpOyB9IH0KICAgIGZ1bmN0aW9uIGV4cG9ydERhdGEoKSB7IGNvbnN0IGE9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpOyBhLmhyZWY9ImRhdGE6dGV4dC9qc29uO2NoYXJzZXQ9dXRmLTgsIitlbmNvZGVVUklDb21wb25lbnQoSlNPTi5zdHJpbmdpZnkoYXBwRGF0YSkpOyBhLmRvd25sb2FkPSJwZXJkaXJfYmFja3VwLmpzb24iOyBhLmNsaWNrKCk7IH0KICAgIGZ1bmN0aW9uIGltcG9ydERhdGEoaSkgeyBjb25zdCByPW5ldyBGaWxlUmVhZGVyKCk7IHIub25sb2FkPWU9PnsgdHJ5IHsgYXBwRGF0YT1KU09OLnBhcnNlKGUudGFyZ2V0LnJlc3VsdCk7IHNhdmVEYXRhKCk7IGxvY2F0aW9uLnJlbG9hZCgpOyB9IGNhdGNoKGVycikgeyBhbGVydCgiRm9ybWF0IGludmFsaWRlIik7IH0gfTsgci5yZWFkQXNUZXh0KGkuZmlsZXNbMF0pOyB9CgogICAgLy8g4pWQ4pWQ4pWQIFNIQVJFRDogVGVhY2hlciBsaXN0IGZyb20gUElMT1RFIGRvbm7DqWVzIOKVkOKVkOKVkAogICAgdmFyIF90ZWFjaGVycyA9IFtdOwogICAgdmFyIF9zdHVkZW50cyA9IFtdOwogICAgZnVuY3Rpb24gZmlsbFRlYWNoZXJTZWwoc2VsSWQsIHZhbCkgewogICAgICAgIHZhciBzZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChzZWxJZCk7IGlmKCFzZWwpIHJldHVybjsKICAgICAgICB2YXIgaCA9ICc8b3B0aW9uIHZhbHVlPSIiPi0tIENob2lzaXIgLS08L29wdGlvbj48b3B0aW9uIHZhbHVlPSJfX2MiPlx1MjcwRiBTYWlzaXIuLi48L29wdGlvbj4nOwogICAgICAgIF90ZWFjaGVycy5mb3JFYWNoKGZ1bmN0aW9uKHQpewogICAgICAgICAgICB2YXIgbiA9ICgodC5Ob218fHQubm9tfHwnJykgKyAnICcgKyAodFsnUHLDqW5vbSddfHx0LlByZW5vbXx8dFsncHLDqW5vbSddfHwnJykpLnRyaW0oKTsKICAgICAgICAgICAgaWYobikgaCArPSAnPG9wdGlvbiB2YWx1ZT0iJytuKyciJysobj09PXZhbD8nIHNlbGVjdGVkJzonJykrJz4nK24rJzwvb3B0aW9uPic7CiAgICAgICAgfSk7CiAgICAgICAgaWYodmFsICYmIHZhbCE9PSdfX2MnICYmIGguaW5kZXhPZigndmFsdWU9IicrdmFsKyciJyk8MCkgaCs9JzxvcHRpb24gdmFsdWU9IicrdmFsKyciIHNlbGVjdGVkPicrdmFsKyc8L29wdGlvbj4nOwogICAgICAgIHNlbC5pbm5lckhUTUw9aDsgaWYodmFsKSBzZWwudmFsdWU9dmFsOwogICAgICAgIHNlbC5vbmNoYW5nZT1mdW5jdGlvbigpeyBpZih0aGlzLnZhbHVlPT09J19fYycpe3ZhciB4PXByb21wdCgnTm9tIDonKTtpZih4JiZ4LnRyaW0oKSl7dGhpcy5pbnNlcnRBZGphY2VudEhUTUwoJ2JlZm9yZWVuZCcsJzxvcHRpb24gdmFsdWU9IicreC50cmltKCkrJyI+Jyt4LnRyaW0oKSsnPC9vcHRpb24+Jyk7dGhpcy52YWx1ZT14LnRyaW0oKTt9ZWxzZSB0aGlzLnZhbHVlPScnO30gfTsKICAgIH0KCiAgICAvLyDilZDilZDilZAgRVZFTkVNRU5UUyDilZDilZDilZAKICAgIHZhciBFVl9TPXt0b2RvOifDgCBmYWlyZScscHJvZ3Jlc3M6J0VuIGNvdXJzJyxkb25lOidUZXJtaW7DqScsYmxvY2tlZDonQmxvcXXDqSd9OwogICAgdmFyIEVWX0M9e3RvZG86JyNlNzRjM2MnLHByb2dyZXNzOicjZjM5YzEyJyxkb25lOicjMjdhZTYwJyxibG9ja2VkOicjOTVhNWE2J307CiAgICB2YXIgRVZfUD17aGF1dGU6J1x1ezFGNTM0fScsbW95ZW5uZTonXHV7MUY3RTF9JyxiYXNzZTonXHV7MUY3RTJ9J307CiAgICB2YXIgX2V2RmlsZT1udWxsOwoKCiAgICAvLyDilZDilZDilZAgQVVUT0NPTVBMRVRFIMOJTMOIVkVTIOKVkOKVkOKVkAogICAgZnVuY3Rpb24gZ2V0U3R1ZGVudE5hbWVzKCkgewogICAgICAgIHJldHVybiBfc3R1ZGVudHMubWFwKGZ1bmN0aW9uKHMpIHsKICAgICAgICAgICAgdmFyIG5vbSA9IChzLk5vbXx8cy5ub218fCcnKS50cmltKCk7CiAgICAgICAgICAgIHZhciBwcmVub20gPSAoc1snUHLDqW5vbSddfHxzLlByZW5vbXx8c1sncHLDqW5vbSddfHxzLnByZW5vbXx8JycpLnRyaW0oKTsKICAgICAgICAgICAgdmFyIGNsYXNzZSA9IChzLkNsYXNzZXx8cy5jbGFzc2V8fCcnKS50cmltKCk7CiAgICAgICAgICAgIHJldHVybiB7IGZ1bGw6IG5vbSArICcgJyArIHByZW5vbSwgY2xhc3NlOiBjbGFzc2UgfTsKICAgICAgICB9KS5maWx0ZXIoZnVuY3Rpb24ocykgeyByZXR1cm4gcy5mdWxsLnRyaW0oKTsgfSk7CiAgICB9CgogICAgZnVuY3Rpb24gYXR0YWNoU3R1ZGVudEFDKGlucHV0KSB7CiAgICAgICAgaWYgKGlucHV0Ll9hY0F0dGFjaGVkKSByZXR1cm47CiAgICAgICAgaW5wdXQuX2FjQXR0YWNoZWQgPSB0cnVlOwogICAgICAgIHZhciB3cmFwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgICAgd3JhcC5jbGFzc05hbWUgPSAnYWMtd3JhcCc7CiAgICAgICAgaW5wdXQucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUod3JhcCwgaW5wdXQpOwogICAgICAgIHdyYXAuYXBwZW5kQ2hpbGQoaW5wdXQpOwogICAgICAgIHZhciBsaXN0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgICAgbGlzdC5jbGFzc05hbWUgPSAnYWMtbGlzdCc7CiAgICAgICAgd3JhcC5hcHBlbmRDaGlsZChsaXN0KTsKICAgICAgICB2YXIgc2VsSWR4ID0gLTE7CgogICAgICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIHZhciBxID0gdGhpcy52YWx1ZS50cmltKCkudG9Mb3dlckNhc2UoKTsKICAgICAgICAgICAgaWYgKHEubGVuZ3RoIDwgMSB8fCAhX3N0dWRlbnRzLmxlbmd0aCkgeyBsaXN0LmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3cnKTsgcmV0dXJuOyB9CiAgICAgICAgICAgIHZhciBuYW1lcyA9IGdldFN0dWRlbnROYW1lcygpOwogICAgICAgICAgICB2YXIgbWF0Y2hlcyA9IG5hbWVzLmZpbHRlcihmdW5jdGlvbihzKSB7IHJldHVybiBzLmZ1bGwudG9Mb3dlckNhc2UoKS5pbmRleE9mKHEpID49IDA7IH0pLnNsaWNlKDAsIDEyKTsKICAgICAgICAgICAgaWYgKCFtYXRjaGVzLmxlbmd0aCkgeyBsaXN0LmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3cnKTsgcmV0dXJuOyB9CiAgICAgICAgICAgIHNlbElkeCA9IC0xOwogICAgICAgICAgICBsaXN0LmlubmVySFRNTCA9IG1hdGNoZXMubWFwKGZ1bmN0aW9uKHMsIGkpIHsKICAgICAgICAgICAgICAgIHJldHVybiAnPGRpdiBjbGFzcz0iYWMtaXRlbSIgZGF0YS12YWw9IicgKyBzLmZ1bGwgKyAnIj48c3Bhbj4nICsgcy5mdWxsICsgJzwvc3Bhbj4nICsgKHMuY2xhc3NlID8gJzxzcGFuIGNsYXNzPSJhYy1jbGFzc2UiPicgKyBzLmNsYXNzZSArICc8L3NwYW4+JyA6ICcnKSArICc8L2Rpdj4nOwogICAgICAgICAgICB9KS5qb2luKCcnKTsKICAgICAgICAgICAgbGlzdC5jbGFzc0xpc3QuYWRkKCdzaG93Jyk7CiAgICAgICAgICAgIGxpc3QucXVlcnlTZWxlY3RvckFsbCgnLmFjLWl0ZW0nKS5mb3JFYWNoKGZ1bmN0aW9uKGVsKSB7CiAgICAgICAgICAgICAgICBlbC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgICAgICAgICAgICAgIGlucHV0LnZhbHVlID0gdGhpcy5kYXRhc2V0LnZhbDsKICAgICAgICAgICAgICAgICAgICBsaXN0LmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3cnKTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9KTsKICAgICAgICB9KTsKCiAgICAgICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgdmFyIGl0ZW1zID0gbGlzdC5xdWVyeVNlbGVjdG9yQWxsKCcuYWMtaXRlbScpOwogICAgICAgICAgICBpZiAoIWl0ZW1zLmxlbmd0aCB8fCAhbGlzdC5jbGFzc0xpc3QuY29udGFpbnMoJ3Nob3cnKSkgcmV0dXJuOwogICAgICAgICAgICBpZiAoZS5rZXkgPT09ICdBcnJvd0Rvd24nKSB7IGUucHJldmVudERlZmF1bHQoKTsgc2VsSWR4ID0gTWF0aC5taW4oc2VsSWR4ICsgMSwgaXRlbXMubGVuZ3RoIC0gMSk7IHVwZGF0ZVNlbChpdGVtcyk7IH0KICAgICAgICAgICAgZWxzZSBpZiAoZS5rZXkgPT09ICdBcnJvd1VwJykgeyBlLnByZXZlbnREZWZhdWx0KCk7IHNlbElkeCA9IE1hdGgubWF4KHNlbElkeCAtIDEsIDApOyB1cGRhdGVTZWwoaXRlbXMpOyB9CiAgICAgICAgICAgIGVsc2UgaWYgKGUua2V5ID09PSAnRW50ZXInICYmIHNlbElkeCA+PSAwKSB7IGUucHJldmVudERlZmF1bHQoKTsgaW5wdXQudmFsdWUgPSBpdGVtc1tzZWxJZHhdLmRhdGFzZXQudmFsOyBsaXN0LmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3cnKTsgfQogICAgICAgICAgICBlbHNlIGlmIChlLmtleSA9PT0gJ0VzY2FwZScpIHsgbGlzdC5jbGFzc0xpc3QucmVtb3ZlKCdzaG93Jyk7IH0KICAgICAgICB9KTsKCiAgICAgICAgZnVuY3Rpb24gdXBkYXRlU2VsKGl0ZW1zKSB7IGl0ZW1zLmZvckVhY2goZnVuY3Rpb24oZWwsIGkpIHsgZWwuY2xhc3NMaXN0LnRvZ2dsZSgnYWN0aXZlJywgaSA9PT0gc2VsSWR4KTsgfSk7IH0KCiAgICAgICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignYmx1cicsIGZ1bmN0aW9uKCkgeyBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgeyBsaXN0LmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3cnKTsgfSwgMTUwKTsgfSk7CiAgICB9CgogICAgLy8gQXV0by1hdHRhY2ggdG8gYWxsIGV4aXN0aW5nIHN0dWRlbnQgbmFtZSBpbnB1dHMKICAgIGZ1bmN0aW9uIGluaXRTdHVkZW50QUMoKSB7CiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnI2VudC1zdHVkZW50cy1jb250YWluZXIgLm5hbWUsICNyZXUtc3R1ZGVudHMtY29udGFpbmVyIC5uYW1lLCBbZGF0YS1zdHVkZW50LWFjXScpLmZvckVhY2goYXR0YWNoU3R1ZGVudEFDKTsKICAgIH0KCiAgICAvLyDilZDilZDilZAgQVVUT0NPTVBMRVRFIEVOU0VJR05BTlRTIC8gUEVSU09OTkVMIOKVkOKVkOKVkAogICAgZnVuY3Rpb24gZ2V0VGVhY2hlck5hbWVzKCkgewogICAgICAgIHJldHVybiBfdGVhY2hlcnMubWFwKGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgdmFyIG5vbSA9ICh0Lk5vbXx8dC5ub218fCcnKS50cmltKCk7CiAgICAgICAgICAgIHZhciBwcmVub20gPSAodFsnUHLDqW5vbSddfHx0LlByZW5vbXx8dFsncHLDqW5vbSddfHx0LnByZW5vbXx8JycpLnRyaW0oKTsKICAgICAgICAgICAgcmV0dXJuIHsgZnVsbDogbm9tICsgJyAnICsgcHJlbm9tIH07CiAgICAgICAgfSkuZmlsdGVyKGZ1bmN0aW9uKHQpIHsgcmV0dXJuIHQuZnVsbC50cmltKCk7IH0pOwogICAgfQoKICAgIGZ1bmN0aW9uIGF0dGFjaFRlYWNoZXJBQyhpbnB1dCkgewogICAgICAgIGlmIChpbnB1dC5fYWNBdHRhY2hlZCkgcmV0dXJuOwogICAgICAgIGlucHV0Ll9hY0F0dGFjaGVkID0gdHJ1ZTsKICAgICAgICB2YXIgd3JhcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgICAgIHdyYXAuY2xhc3NOYW1lID0gJ2FjLXdyYXAnOwogICAgICAgIGlucHV0LnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKHdyYXAsIGlucHV0KTsKICAgICAgICB3cmFwLmFwcGVuZENoaWxkKGlucHV0KTsKICAgICAgICB2YXIgbGlzdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgICAgIGxpc3QuY2xhc3NOYW1lID0gJ2FjLWxpc3QnOwogICAgICAgIHdyYXAuYXBwZW5kQ2hpbGQobGlzdCk7CiAgICAgICAgdmFyIHNlbElkeCA9IC0xOwoKICAgICAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIGZ1bmN0aW9uKCkgewogICAgICAgICAgICB2YXIgcSA9IHRoaXMudmFsdWUudHJpbSgpLnRvTG93ZXJDYXNlKCk7CiAgICAgICAgICAgIGlmIChxLmxlbmd0aCA8IDEgfHwgIV90ZWFjaGVycy5sZW5ndGgpIHsgbGlzdC5jbGFzc0xpc3QucmVtb3ZlKCdzaG93Jyk7IHJldHVybjsgfQogICAgICAgICAgICB2YXIgbmFtZXMgPSBnZXRUZWFjaGVyTmFtZXMoKTsKICAgICAgICAgICAgdmFyIG1hdGNoZXMgPSBuYW1lcy5maWx0ZXIoZnVuY3Rpb24odCkgeyByZXR1cm4gdC5mdWxsLnRvTG93ZXJDYXNlKCkuaW5kZXhPZihxKSA+PSAwOyB9KS5zbGljZSgwLCAxMik7CiAgICAgICAgICAgIGlmICghbWF0Y2hlcy5sZW5ndGgpIHsgbGlzdC5jbGFzc0xpc3QucmVtb3ZlKCdzaG93Jyk7IHJldHVybjsgfQogICAgICAgICAgICBzZWxJZHggPSAtMTsKICAgICAgICAgICAgbGlzdC5pbm5lckhUTUwgPSBtYXRjaGVzLm1hcChmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICByZXR1cm4gJzxkaXYgY2xhc3M9ImFjLWl0ZW0iIGRhdGEtdmFsPSInICsgdC5mdWxsICsgJyI+PHNwYW4+JyArIHQuZnVsbCArICc8L3NwYW4+PHNwYW4gY2xhc3M9ImFjLWNsYXNzZSI+UHJvZjwvc3Bhbj48L2Rpdj4nOwogICAgICAgICAgICB9KS5qb2luKCcnKTsKICAgICAgICAgICAgbGlzdC5jbGFzc0xpc3QuYWRkKCdzaG93Jyk7CiAgICAgICAgICAgIGxpc3QucXVlcnlTZWxlY3RvckFsbCgnLmFjLWl0ZW0nKS5mb3JFYWNoKGZ1bmN0aW9uKGVsKSB7CiAgICAgICAgICAgICAgICBlbC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgICAgICAgICAgICAgIGlucHV0LnZhbHVlID0gdGhpcy5kYXRhc2V0LnZhbDsKICAgICAgICAgICAgICAgICAgICBsaXN0LmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3cnKTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9KTsKICAgICAgICB9KTsKCiAgICAgICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgdmFyIGl0ZW1zID0gbGlzdC5xdWVyeVNlbGVjdG9yQWxsKCcuYWMtaXRlbScpOwogICAgICAgICAgICBpZiAoIWl0ZW1zLmxlbmd0aCB8fCAhbGlzdC5jbGFzc0xpc3QuY29udGFpbnMoJ3Nob3cnKSkgcmV0dXJuOwogICAgICAgICAgICBpZiAoZS5rZXkgPT09ICdBcnJvd0Rvd24nKSB7IGUucHJldmVudERlZmF1bHQoKTsgc2VsSWR4ID0gTWF0aC5taW4oc2VsSWR4ICsgMSwgaXRlbXMubGVuZ3RoIC0gMSk7IHVwZGF0ZVNlbChpdGVtcyk7IH0KICAgICAgICAgICAgZWxzZSBpZiAoZS5rZXkgPT09ICdBcnJvd1VwJykgeyBlLnByZXZlbnREZWZhdWx0KCk7IHNlbElkeCA9IE1hdGgubWF4KHNlbElkeCAtIDEsIDApOyB1cGRhdGVTZWwoaXRlbXMpOyB9CiAgICAgICAgICAgIGVsc2UgaWYgKGUua2V5ID09PSAnRW50ZXInICYmIHNlbElkeCA+PSAwKSB7IGUucHJldmVudERlZmF1bHQoKTsgaW5wdXQudmFsdWUgPSBpdGVtc1tzZWxJZHhdLmRhdGFzZXQudmFsOyBsaXN0LmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3cnKTsgfQogICAgICAgICAgICBlbHNlIGlmIChlLmtleSA9PT0gJ0VzY2FwZScpIHsgbGlzdC5jbGFzc0xpc3QucmVtb3ZlKCdzaG93Jyk7IH0KICAgICAgICB9KTsKCiAgICAgICAgZnVuY3Rpb24gdXBkYXRlU2VsKGl0ZW1zKSB7IGl0ZW1zLmZvckVhY2goZnVuY3Rpb24oZWwsIGkpIHsgZWwuY2xhc3NMaXN0LnRvZ2dsZSgnYWN0aXZlJywgaSA9PT0gc2VsSWR4KTsgfSk7IH0KICAgICAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKCdibHVyJywgZnVuY3Rpb24oKSB7IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7IGxpc3QuY2xhc3NMaXN0LnJlbW92ZSgnc2hvdycpOyB9LCAxNTApOyB9KTsKICAgIH0KCiAgICBmdW5jdGlvbiBpbml0VGVhY2hlckFDKCkgewogICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJyNlbnQtdGVhY2hlcnMtY29udGFpbmVyIC5uYW1lLCAjcmV1LXRlYWNoZXJzLWNvbnRhaW5lciAubmFtZScpLmZvckVhY2goYXR0YWNoVGVhY2hlckFDKTsKICAgIH0KCgogICAgZnVuY3Rpb24gZXZQcmV2aWV3RmlsZShpbnApewogICAgICAgIHZhciBmPWlucC5maWxlc1swXTsKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZXYtZm5hbWUnKS50ZXh0Q29udGVudD1mP2YubmFtZSsnICgnKyhmLnNpemUvMTAyNCkudG9GaXhlZCgwKSsnIEtvKSc6Jyc7CiAgICAgICAgaWYoZiYmZi5zaXplPjUqMTAyNCoxMDI0KXthbGVydCgnTWF4IDUgTW8nKTtpbnAudmFsdWU9Jyc7X2V2RmlsZT1udWxsO3JldHVybjt9CiAgICAgICAgX2V2RmlsZT1mfHxudWxsOwogICAgfQogICAgZnVuY3Rpb24gdG9CNjQoZmlsZSxjYil7dmFyIHI9bmV3IEZpbGVSZWFkZXIoKTtyLm9ubG9hZD1mdW5jdGlvbihlKXtjYih7bmFtZTpmaWxlLm5hbWUsdHlwZTpmaWxlLnR5cGUsc2l6ZTpmaWxlLnNpemUsZGF0YTplLnRhcmdldC5yZXN1bHR9KTt9O3IucmVhZEFzRGF0YVVSTChmaWxlKTt9CgogICAgZnVuY3Rpb24gb3BlbkV2TW9kYWwoaWQpewogICAgICAgIHZhciBfZXZtPWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdldk1vZCcpO19ldm0uY2xhc3NMaXN0LmFkZCgnb3BlbicpO19ldm0uc3R5bGUuZGlzcGxheT0nZmxleCc7CiAgICAgICAgZmlsbFRlYWNoZXJTZWwoJ2V2LXJlc3AnKTtidWlsZENsYXNzU2VsZWN0KCk7ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2V2LW1zZ3BhcmVudHMnKS5jaGVja2VkPWZhbHNlOwogICAgICAgIAogICAgICAgIGlmKGlkKXsKICAgICAgICAgICAgdmFyIHA9KGFwcERhdGEuZXZlbnRzfHxbXSkuZmluZChmdW5jdGlvbih4KXtyZXR1cm4geC5pZC50b1N0cmluZygpPT09aWQudG9TdHJpbmcoKTt9KTtpZighcClyZXR1cm47CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdldi1tdCcpLnRleHRDb250ZW50PSdNb2RpZmllciBsXHUyMDE5w6l2w6luZW1lbnQnOwogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZXYtZWlkJykudmFsdWU9aWQ7ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2V2LW5hbWUnKS52YWx1ZT1wLm5hbWU7CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdldi1zdGFydCcpLnZhbHVlPXAuc3RhcnR8fCcnO2RvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdldi1kZWFkJykudmFsdWU9cC5kZWFkbGluZXx8Jyc7CiAgICAgICAgICAgIF9ldkNsYXNzZXM9KHAuY2xhc3Nlc3x8W10pLnNsaWNlKCk7cmVuZGVyRXZDbGFzc2VzKCk7CiAgICAgICAgICAgIGZpbGxUZWFjaGVyU2VsKCdldi1yZXNwJyxwLnJlc3ApOwogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZXYtbXNncGFyZW50cycpLmNoZWNrZWQ9ISFwLm1zZ1BhcmVudHM7ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2V2LWRlc2MnKS5pbm5lckhUTUw9cC5kZXNjfHwnJzsKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2V2LXRhZ3MnKS52YWx1ZT0ocC50YWdzfHxbXSkuam9pbignLCAnKTsKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2V2LWRlbC1idG4nKS5zdHlsZS5kaXNwbGF5PSdmbGV4JzsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZXYtbXQnKS50ZXh0Q29udGVudD0nTm91dmVsIMOpdsOpbmVtZW50Jztkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZXYtZWlkJykudmFsdWU9Jyc7CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdldi1uYW1lJykudmFsdWU9Jyc7ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2V2LXN0YXJ0JykudmFsdWU9bmV3IERhdGUoKS50b0lTT1N0cmluZygpLnNwbGl0KCdUJylbMF07CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdldi1kZWFkJykudmFsdWU9Jyc7CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdldi1kZXNjJykuaW5uZXJIVE1MPScnO2RvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdldi10YWdzJykudmFsdWU9Jyc7CiAgICAgICAgICAgIF9ldkNsYXNzZXM9W107cmVuZGVyRXZDbGFzc2VzKCk7CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdldi1kZWwtYnRuJykuc3R5bGUuZGlzcGxheT0nbm9uZSc7CiAgICAgICAgfQogICAgfQogICAgZnVuY3Rpb24gY2xvc2VFdk1vZGFsKCl7dmFyIG09ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2V2TW9kJyk7bS5jbGFzc0xpc3QucmVtb3ZlKCdvcGVuJyk7bS5zdHlsZS5kaXNwbGF5PSdub25lJzt9CiAgICBmdW5jdGlvbiBkZWxFdkZyb21Nb2RhbCgpe3ZhciBpZD1kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZXYtZWlkJykudmFsdWU7aWYoaWQmJmNvbmZpcm0oJ1N1cHByaW1lciA/Jykpe2FwcERhdGEuZXZlbnRzPShhcHBEYXRhLmV2ZW50c3x8W10pLmZpbHRlcihmdW5jdGlvbihwKXtyZXR1cm4gcC5pZC50b1N0cmluZygpIT09aWQudG9TdHJpbmcoKTt9KTtzYXZlRGF0YSgpO2Nsb3NlRXZNb2RhbCgpO3JlbmRlckV2ZW50cygpO319CgogICAgZnVuY3Rpb24gc2F2ZUV2ZW50KCl7CiAgICAgICAgdmFyIG5tPWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdldi1uYW1lJykudmFsdWUudHJpbSgpO2lmKCFubSl7YWxlcnQoJ0ludGl0dWzDqSByZXF1aXMnKTtyZXR1cm47fQogICAgICAgIHZhciBlaWQ9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2V2LWVpZCcpLnZhbHVlOwogICAgICAgIHZhciBvYmo9e2lkOmVpZHx8RGF0ZS5ub3coKS50b1N0cmluZygpLG5hbWU6bm0sc3RhcnQ6ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2V2LXN0YXJ0JykudmFsdWUsCiAgICAgICAgICAgIGRlYWRsaW5lOmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdldi1kZWFkJykudmFsdWUscmVzcDpkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZXYtcmVzcCcpLnZhbHVlLGNsYXNzZXM6X2V2Q2xhc3Nlcy5zbGljZSgpLAogICAgICAgICAgICBtc2dQYXJlbnRzOmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdldi1tc2dwYXJlbnRzJykuY2hlY2tlZCwKICAgICAgICAgICAgZGVzYzpkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZXYtZGVzYycpLmlubmVySFRNTCwKICAgICAgICAgICAgdGFnczpkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZXYtdGFncycpLnZhbHVlLnNwbGl0KCcsJykubWFwKGZ1bmN0aW9uKHQpe3JldHVybiB0LnRyaW0oKTt9KS5maWx0ZXIoQm9vbGVhbiksCiAgICAgICAgICAgIGNyZWF0ZWQ6bmV3IERhdGUoKS50b0lTT1N0cmluZygpfTsKICAgICAgICBpZighYXBwRGF0YS5ldmVudHMpIGFwcERhdGEuZXZlbnRzPVtdOwogICAgICAgIGlmKGVpZCl7CiAgICAgICAgICAgIHZhciBpZHg9LTE7Zm9yKHZhciBrPTA7azxhcHBEYXRhLmV2ZW50cy5sZW5ndGg7aysrKXtpZihTdHJpbmcoYXBwRGF0YS5ldmVudHNba10uaWQpPT09U3RyaW5nKGVpZCkpe2lkeD1rO2JyZWFrO319CiAgICAgICAgICAgIGlmKGlkeD49MCl7b2JqLmNyZWF0ZWQ9YXBwRGF0YS5ldmVudHNbaWR4XS5jcmVhdGVkO2FwcERhdGEuZXZlbnRzW2lkeF09b2JqO30KICAgICAgICAgICAgZWxzZXthcHBEYXRhLmV2ZW50cy5wdXNoKG9iaik7fQogICAgICAgIH1lbHNle2FwcERhdGEuZXZlbnRzLnB1c2gob2JqKTt9CiAgICAgICAgc2F2ZURhdGEoKTtjbG9zZUV2TW9kYWwoKTtyZW5kZXJFdmVudHMoKTsKICAgIH0KICAgIGZ1bmN0aW9uIGRsRXZGaWxlKGlkKXt2YXIgcD0oYXBwRGF0YS5ldmVudHN8fFtdKS5maW5kKGZ1bmN0aW9uKHgpe3JldHVybiB4LmlkLnRvU3RyaW5nKCk9PT1pZC50b1N0cmluZygpO30pO2lmKHAmJnAuZmlsZSl7dmFyIGE9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpO2EuaHJlZj1wLmZpbGUuZGF0YTthLmRvd25sb2FkPXAuZmlsZS5uYW1lO2EuY2xpY2soKTt9fQoKICAgIGZ1bmN0aW9uIHJlbmRlckV2ZW50cygpewogICAgICAgIGlmKCFhcHBEYXRhLmV2ZW50cylhcHBEYXRhLmV2ZW50cz1bXTsKICAgICAgICB2YXIgcXM9KGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdldi1zZWFyY2gnKS52YWx1ZXx8JycpLnRvTG93ZXJDYXNlKCkudHJpbSgpOwogICAgICAgIHZhciB0ZD1uZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkuc3BsaXQoJ1QnKVswXTsKICAgICAgICB2YXIgbGlzdD1hcHBEYXRhLmV2ZW50cy5maWx0ZXIoZnVuY3Rpb24ocCl7CiAgICAgICAgICAgIGlmKHFzJiZwLm5hbWUudG9Mb3dlckNhc2UoKS5pbmRleE9mKHFzKTwwJiYocC5yZXNwfHwnJykudG9Mb3dlckNhc2UoKS5pbmRleE9mKHFzKTwwKSByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0pOwogICAgICAgIGxpc3Quc29ydChmdW5jdGlvbihhLGIpe3JldHVybiBuZXcgRGF0ZShhLmRlYWRsaW5lfHxhLnN0YXJ0fHwnOTk5OScpLW5ldyBEYXRlKGIuZGVhZGxpbmV8fGIuc3RhcnR8fCc5OTk5Jyk7fSk7CiAgICAgICAgdmFyIGFsbD1hcHBEYXRhLmV2ZW50czsKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgna3BpLWV2LXRvdCcpLnRleHRDb250ZW50PWFsbC5sZW5ndGg7CiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2twaS1ldi1tc2cnKS50ZXh0Q29udGVudD1hbGwuZmlsdGVyKGZ1bmN0aW9uKHApe3JldHVybiBwLm1zZ1BhcmVudHM7fSkubGVuZ3RoOwogICAgICAgIHZhciBib3g9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2V2LWdyaWQnKTsKICAgICAgICBpZighbGlzdC5sZW5ndGgpe2JveC5pbm5lckhUTUw9JzxkaXYgc3R5bGU9InRleHQtYWxpZ246Y2VudGVyO2NvbG9yOiNiYmI7cGFkZGluZzo0MHB4IDIwcHg7Z3JpZC1jb2x1bW46MS8tMSI+PGkgY2xhc3M9ImZhcyBmYS1jYWxlbmRhci1jaGVjayIgc3R5bGU9ImZvbnQtc2l6ZToycmVtO21hcmdpbi1ib3R0b206MTBweDtkaXNwbGF5OmJsb2NrIj48L2k+QXVjdW4gw6l2w6luZW1lbnQ8L2Rpdj4nO3JldHVybjt9CiAgICAgICAgdmFyIGg9Jyc7bGlzdC5mb3JFYWNoKGZ1bmN0aW9uKHApewogICAgICAgICAgICB2YXIgYz1wLm1zZ1BhcmVudHM/JyMyN2FlNjAnOid2YXIoLS1oZWFkZXIpJyxsYXRlPXAuZGVhZGxpbmUmJnAuZGVhZGxpbmU8dGQ7CiAgICAgICAgICAgIHZhciBkcz1wLmRlYWRsaW5lP25ldyBEYXRlKHAuZGVhZGxpbmUpLnRvTG9jYWxlRGF0ZVN0cmluZygnZnItRlInLHtkYXk6J251bWVyaWMnLG1vbnRoOidzaG9ydCd9KTonJzsKICAgICAgICAgICAgaCs9JzxkaXYgY2xhc3M9ImV2LWNhcmQiIHN0eWxlPSJib3JkZXItbGVmdDo0cHggc29saWQgJytjKyciPic7CiAgICAgICAgICAgIGgrPSc8ZGl2IGNsYXNzPSJldi1jYXJkLWhkIj48aDQ+JysocC5tc2dQYXJlbnRzPydcdTI3MDlcdUZFMEYgJzonJykrIHAubmFtZSsnPC9oND48ZGl2IGNsYXNzPSJldi1jYXJkLWFjdHMiPjxidXR0b24gb25jbGljaz0ib3BlbkV2TW9kYWwoXCcnK3AuaWQrJ1wnKSIgdGl0bGU9Ik1vZGlmaWVyIj48aSBjbGFzcz0iZmFzIGZhLXBlbiI+PC9pPjwvYnV0dG9uPjxidXR0b24gb25jbGljaz0iaWYoY29uZmlybShcJ1N1cHByaW1lciA/XCcpKWRlbEV2RGlyZWN0KFwnJytwLmlkKydcJykiIHRpdGxlPSJTdXBwcmltZXIiPjxpIGNsYXNzPSJmYXMgZmEtdHJhc2giPjwvaT48L2J1dHRvbj48L2Rpdj48L2Rpdj4nOwogICAgICAgICAgICBoKz0nPGRpdiBjbGFzcz0iZXYtY2FyZC1tZXRhIj4nOwogICAgICAgICAgICBpZihkcykgaCs9JzxzcGFuPjxpIGNsYXNzPSJmYXMgZmEtZmxhZyI+PC9pPiAnK2RzKyhsYXRlPycgPGIgc3R5bGU9ImNvbG9yOiNlNzRjM2MiPlx1MjZBMCDDiWNow6lhbmNlIGTDqXBhc3PDqWU8L2I+JzonJykrJzwvc3Bhbj4nOwogICAgICAgICAgICBpZihwLnJlc3ApIGgrPSc8c3Bhbj48aSBjbGFzcz0iZmFzIGZhLXVzZXIiPjwvaT4gJytwLnJlc3ArJzwvc3Bhbj4nOwogICAgICAgICAgICBpZihwLm1zZ1BhcmVudHMpIGgrPSc8c3BhbiBzdHlsZT0iY29sb3I6IzI3YWU2MDtmb250LXNpemU6LjdyZW07Ij48aSBjbGFzcz0iZmFzIGZhLWVudmVsb3BlIj48L2k+IFBhcmVudHMgaW5mb3Jtw6lzPC9zcGFuPic7aCs9JzwvZGl2Pic7CiAgICAgICAgICAgIGlmKHAuZGVzYyl7aCs9JzxkaXYgY2xhc3M9ImV2LWNhcmQtZGVzYyI+JytwLmRlc2MrJzwvZGl2Pic7fQogICAgICAgICAgICBoKz0nPGRpdiBjbGFzcz0iZXYtY2FyZC1mdCI+JzsKICAgICAgICAgICAgaWYocC50YWdzJiZwLnRhZ3MubGVuZ3RoKSBwLnRhZ3MuZm9yRWFjaChmdW5jdGlvbih0KXtoKz0nPHNwYW4gY2xhc3M9ImV2LXRhZyI+Jyt0Kyc8L3NwYW4+Jzt9KTsKICAgICAgICAgICAgaWYocC5maWxlKSBoKz0nPHNwYW4gY2xhc3M9ImV2LWF0dGFjaCIgb25jbGljaz0iZGxFdkZpbGUoXCcnK3AuaWQrJ1wnKSIgdGl0bGU9IlTDqWzDqWNoYXJnZXIiPjxpIGNsYXNzPSJmYXMgZmEtcGFwZXJjbGlwIj48L2k+ICcrcC5maWxlLm5hbWUrJzwvc3Bhbj4nOwogICAgICAgICAgICAKICAgICAgICAgICAgaCs9JzwvZGl2PjwvZGl2Pic7CiAgICAgICAgfSk7Ym94LmlubmVySFRNTD1oOwogICAgfQogICAgZnVuY3Rpb24gZGVsRXZEaXJlY3QoaWQpe2FwcERhdGEuZXZlbnRzPShhcHBEYXRhLmV2ZW50c3x8W10pLmZpbHRlcihmdW5jdGlvbihwKXtyZXR1cm4gcC5pZC50b1N0cmluZygpIT09aWQudG9TdHJpbmcoKTt9KTtzYXZlRGF0YSgpO3JlbmRlckV2ZW50cygpO30KCiAgICAvLyDilZDilZDilZAgR0FOVFQgLyBQUk9DRURVUkVTIOKVkOKVkOKVkAogICAgdmFyIFZBQz17YWxsOls0Myw0NCw1MiwxXSxBOls3LDgsMTUsMTZdLEI6WzgsOSwxNiwxN10sQzpbOSwxMCwxNywxOF19OwogICAgdmFyIF9ndnM9bnVsbCxfZ3ZsPTE2LFNZPVtdOwogICAgZnVuY3Rpb24gYnVpbGRTWSgpe1NZPVtdO2Zvcih2YXIgdz0zNjt3PD01Mzt3KyspU1kucHVzaCh3KTtmb3IodmFyIHc9MTt3PD0yNjt3KyspU1kucHVzaCh3KTt9CiAgICBmdW5jdGlvbiBnZXRWVygpe3ZhciB6PShhcHBEYXRhLnNldHRpbmdzJiZhcHBEYXRhLnNldHRpbmdzLnpvbmUpfHwnQic7dmFyIHY9VkFDLmFsbC5zbGljZSgpO2lmKFZBQ1t6XSl2PXYuY29uY2F0KFZBQ1t6XSk7cmV0dXJuIHY7fQogICAgZnVuY3Rpb24gaXNvVyhkKXt2YXIgZHQ9bmV3IERhdGUoRGF0ZS5VVEMoZC5nZXRGdWxsWWVhcigpLGQuZ2V0TW9udGgoKSxkLmdldERhdGUoKSkpO2R0LnNldFVUQ0RhdGUoZHQuZ2V0VVRDRGF0ZSgpKzQtKGR0LmdldFVUQ0RheSgpfHw3KSk7dmFyIHkwPW5ldyBEYXRlKERhdGUuVVRDKGR0LmdldFVUQ0Z1bGxZZWFyKCksMCwxKSk7cmV0dXJuIE1hdGguY2VpbCgoKChkdC15MCkvODY0ZTUpKzEpLzcpO30KICAgIGZ1bmN0aW9uIGN1clcoKXtyZXR1cm4gaXNvVyhuZXcgRGF0ZSgpKTt9CiAgICBmdW5jdGlvbiB3a01vKHcpe3ZhciB5PXc+PTM2PzIwMjU6MjAyNjt2YXIgajQ9bmV3IERhdGUoeSwwLDQpO3ZhciBkPW5ldyBEYXRlKGo0LmdldFRpbWUoKSsoKHctMSkqNy0oKGo0LmdldERheSgpKzYpJTcpKSo4NjRlNSk7dmFyIG1uPWQudG9Mb2NhbGVEYXRlU3RyaW5nKCdmci1GUicse21vbnRoOidzaG9ydCd9KS5yZXBsYWNlKCcuJywnJyk7cmV0dXJuIG1uLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpK21uLnNsaWNlKDEpO30KICAgIGZ1bmN0aW9uIGluaXRHYW50dFZpZXcoKXtidWlsZFNZKCk7dmFyIGN3PWN1clcoKSxpPVNZLmluZGV4T2YoY3cpO2lmKGk8MClpPTA7X2d2cz1NYXRoLm1heCgwLGkpO19ndmw9MTY7d2luZG93Ll9nYW50dFJlYWR5PXRydWU7fQogICAgZnVuY3Rpb24gZ3RQcmV2KCl7X2d2cz1NYXRoLm1heCgwLF9ndnMtX2d2bCk7cmVuZGVyR2FudHQoKTt9CiAgICBmdW5jdGlvbiBndE5leHQoKXtfZ3ZzPU1hdGgubWluKFNZLmxlbmd0aC1fZ3ZsLF9ndnMrX2d2bCk7aWYoX2d2czwwKV9ndnM9MDtyZW5kZXJHYW50dCgpO30KICAgIGZ1bmN0aW9uIGd0VG9kYXkoKXt2YXIgY3c9Y3VyVygpLGk9U1kuaW5kZXhPZihjdyk7aWYoaTwwKWk9MDtfZ3ZzPU1hdGgubWF4KDAsaSk7X2d2bD0xNjtyZW5kZXJHYW50dCgpO30KICAgIGZ1bmN0aW9uIGd0WWVhcigpe19ndnM9MDtfZ3ZsPVNZLmxlbmd0aDtyZW5kZXJHYW50dCgpO19ndmw9MTY7fQoKICAgIGZ1bmN0aW9uIG9wZW5HdE1vZGFsKGlkKXsKICAgICAgICB2YXIgX2d0bT1kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ3RNb2QnKTtfZ3RtLmNsYXNzTGlzdC5hZGQoJ29wZW4nKTtfZ3RtLnN0eWxlLmRpc3BsYXk9J2ZsZXgnOwogICAgICAgIGZpbGxUZWFjaGVyU2VsKCdndC1yZXNwJyk7dmFyIGN3PWN1clcoKTsKICAgICAgICBpZihpZCl7dmFyIGc9KGFwcERhdGEuZ2FudHR8fFtdKS5maW5kKGZ1bmN0aW9uKHgpe3JldHVybiB4LmlkLnRvU3RyaW5nKCk9PT1pZC50b1N0cmluZygpO30pO2lmKCFnKXJldHVybjsKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2d0LW10JykudGV4dENvbnRlbnQ9J01vZGlmaWVyIGxceDI3w6ljaMOpYW5jZSc7ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2d0LWVpZCcpLnZhbHVlPWlkOwogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ3QtbmFtZScpLnZhbHVlPWcubmFtZTtkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ3QtY29kZScpLnZhbHVlPWcuY29kZXx8Jyc7CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdndC1jYXQnKS52YWx1ZT1nLmNhdHx8J0F1dHJlJztkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ3Qtd3MnKS52YWx1ZT1nLndzdGFydHx8Y3c7CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdndC13ZScpLnZhbHVlPWcud2VuZHx8Y3c7ZmlsbFRlYWNoZXJTZWwoJ2d0LXJlc3AnLGcucmVzcCk7CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdndC1ub3RlcycpLmlubmVySFRNTD1nLm5vdGVzfHwnJzsKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2d0LWRlbC1idG4nKS5zdHlsZS5kaXNwbGF5PSdmbGV4JzsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ3QtbXQnKS50ZXh0Q29udGVudD0nTm91dmVsbGUgw6ljaMOpYW5jZSc7ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2d0LWVpZCcpLnZhbHVlPScnOwogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ3QtbmFtZScpLnZhbHVlPScnO2RvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdndC1jb2RlJykudmFsdWU9Jyc7CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdndC1jYXQnKS52YWx1ZT0nQXV0cmUnO2RvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdndC13cycpLnZhbHVlPWN3OwogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ3Qtd2UnKS52YWx1ZT1jdztkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ3Qtbm90ZXMnKS5pbm5lckhUTUw9Jyc7CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdndC1kZWwtYnRuJykuc3R5bGUuZGlzcGxheT0nbm9uZSc7CiAgICAgICAgfQogICAgfQogICAgZnVuY3Rpb24gY2xvc2VHdE1vZGFsKCl7dmFyIG09ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2d0TW9kJyk7bS5jbGFzc0xpc3QucmVtb3ZlKCdvcGVuJyk7bS5zdHlsZS5kaXNwbGF5PSdub25lJzt9CiAgICBmdW5jdGlvbiBkZWxHdEZyb21Nb2RhbCgpe3ZhciBpZD1kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ3QtZWlkJykudmFsdWU7aWYoaWQmJmNvbmZpcm0oJ1N1cHByaW1lciBjZXR0ZSBwcm9jw6lkdXJlID8nKSl7YXBwRGF0YS5nYW50dD0oYXBwRGF0YS5nYW50dHx8W10pLmZpbHRlcihmdW5jdGlvbihnKXtyZXR1cm4gZy5pZC50b1N0cmluZygpIT09aWQudG9TdHJpbmcoKTt9KTtzYXZlRGF0YSgpO2Nsb3NlR3RNb2RhbCgpO3JlbmRlckdhbnR0KCk7fX0KICAgIGZ1bmN0aW9uIHRvZ2dsZUd0RG9uZShpZCl7dmFyIGc9KGFwcERhdGEuZ2FudHR8fFtdKS5maW5kKGZ1bmN0aW9uKHgpe3JldHVybiB4LmlkLnRvU3RyaW5nKCk9PT1pZC50b1N0cmluZygpO30pO2lmKGcpe2cuZG9uZT0hZy5kb25lO3NhdmVEYXRhKCk7cmVuZGVyR2FudHQoKTt9fQogICAgZnVuY3Rpb24gc2F2ZUd0KCl7CiAgICAgICAgdmFyIG5tPWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdndC1uYW1lJykudmFsdWUudHJpbSgpO2lmKCFubSl7YWxlcnQoJ0ludGl0dWzDqSByZXF1aXMnKTtyZXR1cm47fQogICAgICAgIHZhciBlaWQ9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2d0LWVpZCcpLnZhbHVlOwogICAgICAgIHZhciB3cz1wYXJzZUludChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ3Qtd3MnKS52YWx1ZSl8fDEsd2U9cGFyc2VJbnQoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2d0LXdlJykudmFsdWUpfHx3czsKICAgICAgICB2YXIgb2JqPXtpZDplaWR8fERhdGUubm93KCkudG9TdHJpbmcoKSxuYW1lOm5tLGNvZGU6ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2d0LWNvZGUnKS52YWx1ZS50cmltKCksCiAgICAgICAgICAgIGNhdDpkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ3QtY2F0JykudmFsdWUsd3N0YXJ0OndzLHdlbmQ6d2UsCiAgICAgICAgICAgIGRvbmU6ZWlkPygoYXBwRGF0YS5nYW50dHx8W10pLmZpbmQoZnVuY3Rpb24oZyl7cmV0dXJuIGcuaWQudG9TdHJpbmcoKT09PWVpZC50b1N0cmluZygpfSl8fHt9KS5kb25lfHxmYWxzZTpmYWxzZSwKICAgICAgICAgICAgcmVzcDpkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ3QtcmVzcCcpLnZhbHVlLG5vdGVzOmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdndC1ub3RlcycpLmlubmVySFRNTH07CiAgICAgICAgaWYoIWFwcERhdGEuZ2FudHQpYXBwRGF0YS5nYW50dD1bXTsKICAgICAgICBpZihlaWQpe3ZhciBpPWFwcERhdGEuZ2FudHQuZmluZEluZGV4KGZ1bmN0aW9uKGcpe3JldHVybiBnLmlkLnRvU3RyaW5nKCk9PT1laWQudG9TdHJpbmcoKTt9KTtpZihpPj0wKWFwcERhdGEuZ2FudHRbaV09b2JqO2Vsc2UgYXBwRGF0YS5nYW50dC5wdXNoKG9iaik7fQogICAgICAgIGVsc2UgYXBwRGF0YS5nYW50dC5wdXNoKG9iaik7CiAgICAgICAgc2F2ZURhdGEoKTtjbG9zZUd0TW9kYWwoKTtyZW5kZXJHYW50dCgpOwogICAgfQoKICAgIGZ1bmN0aW9uIHdJblIodyx3cyx3ZSl7cmV0dXJuIHdzPD13ZT8odz49d3MmJnc8PXdlKToodz49d3N8fHc8PXdlKTt9CgogICAgZnVuY3Rpb24gcmVuZGVyR2FudHQoKXsKICAgICAgICBpZighU1kubGVuZ3RoKWJ1aWxkU1koKTtpZihfZ3ZzPT09bnVsbClpbml0R2FudHRWaWV3KCk7CiAgICAgICAgdmFyIGZjPWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdndC1mYycpLnZhbHVlOwogICAgICAgIHZhciBwcm9jcz0oYXBwRGF0YS5wcm9jZWR1cmVzfHxbXSkuZmlsdGVyKGZ1bmN0aW9uKHApe3JldHVybiAocC53c3RhcnR8fHAuYW5uZWUpJiYhcC5kb25lJiYoZmM9PT0nQUxMJ3x8cC5jYXQ9PT1mYyk7fSk7CiAgICAgICAgLy8gQWxzbyBpbmNsdWRlIHN0YW5kYWxvbmUgZ2FudHQgaXRlbXMgKMOpY2jDqWFuY2VzIG5vdCBsaW5rZWQgdG8gcHJvY2VkdXJlcykKICAgICAgICB2YXIgZ2FudHRJdGVtcz0oYXBwRGF0YS5nYW50dHx8W10pLmZpbHRlcihmdW5jdGlvbihnKXtyZXR1cm4gZy53c3RhcnQmJiFnLmRvbmUmJihmYz09PSdBTEwnfHxnLmNhdD09PWZjKTt9KTsKICAgICAgICBnYW50dEl0ZW1zLmZvckVhY2goZnVuY3Rpb24oZyl7aWYoIWcudGl0bGUpZy50aXRsZT1nLm5hbWU7fSk7CiAgICAgICAgcHJvY3M9cHJvY3MuY29uY2F0KGdhbnR0SXRlbXMpOwogICAgICAgIC8vIFNvcnQgYnkgd3N0YXJ0IHRoZW4gY29kZSBudW1iZXIKICAgICAgICBwcm9jcy5zb3J0KGZ1bmN0aW9uKGEsYil7CiAgICAgICAgICAgIC8vIGFubmVlIGl0ZW1zIGdvIHRvIHRoZSBlbmQKICAgICAgICAgICAgaWYoYS5hbm5lZSYmIWIuYW5uZWUpcmV0dXJuIDE7aWYoIWEuYW5uZWUmJmIuYW5uZWUpcmV0dXJuIC0xOwogICAgICAgICAgICBpZihhLmFubmVlJiZiLmFubmVlKXJldHVybiBuYXRDb2RlU29ydChhLGIpOwogICAgICAgICAgICAvLyBvdGhlcnMgYnkgd3N0YXJ0IHRoZW4gd2VuZAogICAgICAgICAgICB2YXIgaWE9U1kuaW5kZXhPZihhLndzdGFydCksaWI9U1kuaW5kZXhPZihiLndzdGFydCk7CiAgICAgICAgICAgIGlmKGlhPDApaWE9OTk5O2lmKGliPDApaWI9OTk5OwogICAgICAgICAgICBpZihpYSE9PWliKXJldHVybiBpYS1pYjsKICAgICAgICAgICAgdmFyIGVhPVNZLmluZGV4T2YoYS53ZW5kKSxlYj1TWS5pbmRleE9mKGIud2VuZCk7CiAgICAgICAgICAgIGlmKGVhPDApZWE9OTk5O2lmKGViPDApZWI9OTk5OwogICAgICAgICAgICBpZihlYSE9PWViKXJldHVybiBlYS1lYjsKICAgICAgICAgICAgcmV0dXJuIG5hdENvZGVTb3J0KGEsYik7CiAgICAgICAgfSk7CiAgICAgICAgdmFyIHZsPU1hdGgubWluKF9ndmwsU1kubGVuZ3RoLV9ndnMpLHZpcz1TWS5zbGljZShfZ3ZzLF9ndnMrdmwpLGN3PWN1clcoKSx2dz1nZXRWVygpOwogICAgICAgIHZhciBpdGVtcz1wcm9jcy5maWx0ZXIoZnVuY3Rpb24oZyl7aWYoZy5hbm5lZSlyZXR1cm4gdHJ1ZTtmb3IodmFyIHZpPTA7dmk8dmlzLmxlbmd0aDt2aSsrKXtpZih3SW5SKHZpc1t2aV0sZy53c3RhcnQsZy53ZW5kKSlyZXR1cm4gdHJ1ZTt9cmV0dXJuIGZhbHNlO30pOwogICAgICAgIGlmKHZpcy5sZW5ndGgpIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdndC1wZXInKS50ZXh0Q29udGVudD0nUycrdmlzWzBdKycgXHUyMTkyIFMnK3Zpc1t2aXMubGVuZ3RoLTFdKycgKCcrdmlzLmxlbmd0aCsnIHNlbS4pJzsKICAgICAgICAvLyBNb250aCBoZWFkZXJzCiAgICAgICAgdmFyIG1vcz1bXSxjbT0nJzt2aXMuZm9yRWFjaChmdW5jdGlvbih3KXt2YXIgbWw9d2tNbyh3KTtpZihtbCE9PWNtKXttb3MucHVzaCh7bjptbCxzOjF9KTtjbT1tbDt9ZWxzZSBtb3NbbW9zLmxlbmd0aC0xXS5zKys7fSk7CiAgICAgICAgdmFyIGg9Jzx0aGVhZD48dHI+PHRoIGNsYXNzPSJndC1tbyBndC1sYyIgcm93c3Bhbj0iMiI+UHJvY8OpZHVyZTwvdGg+PHRoIGNsYXNzPSJndC1tbyBndC1kYyIgcm93c3Bhbj0iMiI+XHUyNzE0PC90aD4nOwogICAgICAgIG1vcy5mb3JFYWNoKGZ1bmN0aW9uKG0pe2grPSc8dGggY2xhc3M9Imd0LW1vIiBjb2xzcGFuPSInK20ucysnIj4nK20ubisnPC90aD4nO30pOwogICAgICAgIGgrPSc8L3RyPjx0cj4nO3Zpcy5mb3JFYWNoKGZ1bmN0aW9uKHcpewogICAgICAgICAgICB2YXIgY2xzPScnOwogICAgICAgICAgICBpZih3PT09Y3cpIGNscz0nZ3QtY3cnOwogICAgICAgICAgICBlbHNlIGlmKHZ3LmluZGV4T2Yodyk+PTApIGNscz0nZ3QtdmEnOwogICAgICAgICAgICBoKz0nPHRoJysoY2xzPycgY2xhc3M9IicrY2xzKyciJzonJykrJz5TJyt3Kyc8L3RoPic7CiAgICAgICAgfSk7CiAgICAgICAgaCs9JzwvdHI+PC90aGVhZD48dGJvZHk+JzsKICAgICAgICBpZighaXRlbXMubGVuZ3RoKSBoKz0nPHRyPjx0ZCBjb2xzcGFuPSInKygyK3Zpcy5sZW5ndGgpKyciIHN0eWxlPSJ0ZXh0LWFsaWduOmNlbnRlcjtjb2xvcjojYmJiO3BhZGRpbmc6MzBweCI+PGkgY2xhc3M9ImZhcyBmYS1zdHJlYW0iIHN0eWxlPSJmb250LXNpemU6MS4zcmVtO2Rpc3BsYXk6YmxvY2s7bWFyZ2luLWJvdHRvbTo2cHgiPjwvaT5BdWN1bmUgcHJvY8OpZHVyZSDigJQgY2xpcXVleiArR8OpcmVyIHBvdXIgY29tbWVuY2VyPC90ZD48L3RyPic7CiAgICAgICAgaXRlbXMuZm9yRWFjaChmdW5jdGlvbihnKXsKICAgICAgICAgICAgdmFyIGNvbD1nZXRQcm9jQ29sb3IoZy5jb2RlKTsKICAgICAgICAgICAgaCs9Jzx0cicrKGcuZG9uZT8nIHN0eWxlPSJvcGFjaXR5Oi42Iic6JycpKyc+JzsKICAgICAgICAgICAgdmFyIGlzUmVhbFByb2M9KGFwcERhdGEucHJvY2VkdXJlc3x8W10pLmluZGV4T2YoZyk+PTA7CiAgICAgICAgICAgIHZhciBoYXNMaW5rZWRQcm9jPSFpc1JlYWxQcm9jJiZnLmNvZGUmJihhcHBEYXRhLnByb2NlZHVyZXN8fFtdKS5zb21lKGZ1bmN0aW9uKHBwKXtyZXR1cm4gcHAuY29kZT09PWcuY29kZTt9KTsKICAgICAgICAgICAgaWYoaXNSZWFsUHJvYyYmZy5jb2RlKXsKICAgICAgICAgICAgICAgIGgrPSc8dGQgY2xhc3M9Imd0LWxhIiBvbmNsaWNrPSJ3aW5kb3cudmlld1Byb2NSZWFkb25seShcJycrKChnLmNvZGV8fCcnKS5yZXBsYWNlKC8nL2csIlxcJyIpKSsnXCcpIiBzdHlsZT0iY3Vyc29yOnBvaW50ZXIiIHRpdGxlPSJWb2lyIGxhIHByb2PDqWR1cmUiPicrKGcudGl0bGV8fGcubmFtZXx8JycpKyc8L3RkPic7CiAgICAgICAgICAgIH0gZWxzZSBpZihoYXNMaW5rZWRQcm9jKXsKICAgICAgICAgICAgICAgIGgrPSc8dGQgY2xhc3M9Imd0LWxhIiBzdHlsZT0iY3Vyc29yOnBvaW50ZXIiPic7CiAgICAgICAgICAgICAgICBoKz0nPHNwYW4gb25jbGljaz0id2luZG93LnZpZXdQcm9jUmVhZG9ubHkoXCcnKygoZy5jb2RlfHwnJykucmVwbGFjZSgvJy9nLCJcXCciKSkrJ1wnKSIgdGl0bGU9IlZvaXIgbGEgcHJvY8OpZHVyZSI+JysoZy50aXRsZXx8Zy5uYW1lfHwnJykrJzwvc3Bhbj4nOwogICAgICAgICAgICAgICAgaCs9JyA8aSBjbGFzcz0iZmFzIGZhLXBlbmNpbC1hbHQiIG9uY2xpY2s9ImV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO3dpbmRvdy5vcGVuR3RNb2RhbChcJycrZy5pZCsnXCcpIiBzdHlsZT0iY29sb3I6Izg4ODtmb250LXNpemU6LjdyZW07Y3Vyc29yOnBvaW50ZXI7bWFyZ2luLWxlZnQ6NnB4IiB0aXRsZT0iTW9kaWZpZXIgbFx4MjfDqWNow6lhbmNlIj48L2k+JzsKICAgICAgICAgICAgICAgIGgrPSc8L3RkPic7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBoKz0nPHRkIGNsYXNzPSJndC1sYSIgb25jbGljaz0id2luZG93Lm9wZW5HdE1vZGFsKFwnJytnLmlkKydcJykiIHN0eWxlPSJjdXJzb3I6cG9pbnRlciIgdGl0bGU9Ik1vZGlmaWVyIGxceDI3w6ljaMOpYW5jZSI+JysoZy50aXRsZXx8Zy5uYW1lfHwnJykrJzwvdGQ+JzsKICAgICAgICAgICAgfQogICAgICAgICAgICB2YXIgaXNBbm5lZT1nLmFubmVlfHxmYWxzZTsKICAgICAgICAgICAgaCs9Jzx0ZCBjbGFzcz0iZ3QtY2siPicrKGlzQW5uZWU/JzxzcGFuIHRpdGxlPSLDgCBsXCdhbm7DqWUiIHN0eWxlPSJjb2xvcjojYWFhO2ZvbnQtc2l6ZTouN3JlbSI+XHUyMjFFPC9zcGFuPic6JzxpbnB1dCB0eXBlPSJjaGVja2JveCIgJysoZy5kb25lPydjaGVja2VkJzonJykrJyBvbmNoYW5nZT0id2luZG93LnRvZ2dsZVByb2NEb25lKFwnJytnLmlkKydcJykiIHRpdGxlPSJUZXJtaW7DqWUiPicpKyc8L3RkPic7CiAgICAgICAgICAgIHZpcy5mb3JFYWNoKGZ1bmN0aW9uKHcpewogICAgICAgICAgICAgICAgdmFyIHZhYz12dy5pbmRleE9mKHcpPj0wLCBpcj13SW5SKHcsZy53c3RhcnQsZy53ZW5kKTsKICAgICAgICAgICAgICAgIGgrPSc8dGQnKyh2YWM/JyBjbGFzcz0iZ3QtdmEiJzonJykrJyBzdHlsZT0icG9zaXRpb246cmVsYXRpdmUiPic7CiAgICAgICAgICAgICAgICBpZihpcikgaCs9JzxkaXYgY2xhc3M9Imd0LWNmIiBzdHlsZT0iYmFja2dyb3VuZDonK2NvbCsnOy13ZWJraXQtcHJpbnQtY29sb3ItYWRqdXN0OmV4YWN0O3ByaW50LWNvbG9yLWFkanVzdDpleGFjdCcrKGcuZG9uZT8nO29wYWNpdHk6LjQnOicnKSsnIj4nKyc8L2Rpdj4nOwogICAgICAgICAgICAgICAgaCs9JzwvdGQ+JzsKICAgICAgICAgICAgfSk7aCs9JzwvdHI+JzsKICAgICAgICB9KTsKICAgICAgICBoKz0nPC90Ym9keT4nO2RvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdndC10YmwnKS5pbm5lckhUTUw9aDsKICAgICAgICAvLyBVcGRhdGUgZmlsdGVyIG9wdGlvbnMgZHluYW1pY2FsbHkKICAgICAgICB2YXIgZnNlbD1kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ3QtZmMnKTt2YXIgY3VyVmFsPWZzZWwudmFsdWU7CiAgICAgICAgdmFyIGNhdHMyPXt9OyhhcHBEYXRhLnByb2NlZHVyZXN8fFtdKS5mb3JFYWNoKGZ1bmN0aW9uKHBwKXtpZihwcC5jYXQmJihwcC53c3RhcnR8fHBwLmFubmVlKSljYXRzMltwcC5jYXRdPTE7fSk7CiAgICAgICAgKGFwcERhdGEuZ2FudHR8fFtdKS5mb3JFYWNoKGZ1bmN0aW9uKGdnKXtpZihnZy5jYXQmJmdnLndzdGFydCljYXRzMltnZy5jYXRdPTE7fSk7CiAgICAgICAgdmFyIGZvcHRzPSc8b3B0aW9uIHZhbHVlPSJBTEwiPlRvdXRlcyBjYXTDqWdvcmllczwvb3B0aW9uPic7CiAgICAgICAgT2JqZWN0LmtleXMoY2F0czIpLnNvcnQoKS5mb3JFYWNoKGZ1bmN0aW9uKGMpe2ZvcHRzKz0nPG9wdGlvbiB2YWx1ZT0iJytjKyciJysoY3VyVmFsPT09Yz8nIHNlbGVjdGVkJzonJykrJz4nK2MrJzwvb3B0aW9uPic7fSk7CiAgICAgICAgZnNlbC5pbm5lckhUTUw9Zm9wdHM7CiAgICB9CgoKICAgICAgICAvLyBTaG93IGxhc3QgZXhwb3J0CiAgICAgICAgaWYoYXBwRGF0YS5zZXR0aW5ncyYmYXBwRGF0YS5zZXR0aW5ncy5sYXN0RXhwb3J0KXsKICAgICAgICAgICAgdmFyIGVsPWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsYXN0LWV4cG9ydCcpOwogICAgICAgICAgICBpZihlbCllbC50ZXh0Q29udGVudD0nRGVybmllciBleHBvcnQgOiAnK25ldyBEYXRlKGFwcERhdGEuc2V0dGluZ3MubGFzdEV4cG9ydCkudG9Mb2NhbGVTdHJpbmcoJ2ZyLUZSJyk7CiAgICAgICAgfQoKICAgIHdpbmRvdy5zYXZlRXZlbnQgPSBzYXZlRXZlbnQ7CiAgICB3aW5kb3cub3BlbkV2TW9kYWwgPSBvcGVuRXZNb2RhbDsKICAgIHdpbmRvdy5jbG9zZUV2TW9kYWwgPSBjbG9zZUV2TW9kYWw7CiAgICB3aW5kb3cuZGVsRXZGcm9tTW9kYWwgPSBkZWxFdkZyb21Nb2RhbDsKICAgIHdpbmRvdy5maWxsVGVhY2hlclNlbCA9IGZpbGxUZWFjaGVyU2VsOwogICAgd2luZG93LnBpY2tTYXZlRmlsZSA9IHBpY2tTYXZlRmlsZTsKICAgIHdpbmRvdy5waWNrRXhpc3RpbmdGaWxlID0gcGlja0V4aXN0aW5nRmlsZTsKICAgIHdpbmRvdy51bmxpbmtGaWxlID0gdW5saW5rRmlsZTsKICAgIHdpbmRvdy53cml0ZVRvRmlsZSA9IHdyaXRlVG9GaWxlOwogICAgd2luZG93LmxvYWRGcm9tRmlsZSA9IGxvYWRGcm9tRmlsZTsKICAgIHdpbmRvdy51cGRhdGVGaWxlVUkgPSB1cGRhdGVGaWxlVUk7CiAgICB3aW5kb3cucmVzdG9yZUZpbGVIYW5kbGUgPSByZXN0b3JlRmlsZUhhbmRsZTsKICAgIHdpbmRvdy5leHBvcnREYXRhID0gZXhwb3J0RGF0YTsKICAgIHdpbmRvdy5pbXBvcnREYXRhID0gaW1wb3J0RGF0YTsKPC9zY3JpcHQ+Cgo8c2NyaXB0PgooZnVuY3Rpb24oKXsKICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgZnVuY3Rpb24oZSkgewogICAgICAgIGlmICghZS5kYXRhIHx8IGUuZGF0YS50eXBlICE9PSAncGlsb3RlLXNldHRpbmdzJykgcmV0dXJuOwogICAgICAgIHZhciBzID0gZS5kYXRhLmRhdGE7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgaWYgKHR5cGVvZiBhcHBEYXRhICE9PSAndW5kZWZpbmVkJykgewogICAgICAgICAgICAgICAgaWYgKHMuc2Nob29sKSBhcHBEYXRhLnNldHRpbmdzLnNjaG9vbCA9IHMuc2Nob29sOwogICAgICAgICAgICAgICAgaWYgKHMubmFtZSkgYXBwRGF0YS5zZXR0aW5ncy51c2VyID0gcy5uYW1lOwogICAgICAgICAgICAgICAgaWYgKHMubG9nb1NyYykgYXBwRGF0YS5zZXR0aW5ncy5sb2dvID0gcy5sb2dvU3JjOwogICAgICAgICAgICAgICAgaWYgKHMucGRmSGVhZGVyTGF5b3V0KSAgIGFwcERhdGEuc2V0dGluZ3MucGRmSGVhZGVyTGF5b3V0ICAgPSBzLnBkZkhlYWRlckxheW91dDsKICAgICAgICAgICAgICAgIGlmIChzLnBkZkhlYWRlckNvbG9yKSAgICBhcHBEYXRhLnNldHRpbmdzLnBkZkhlYWRlckNvbG9yICAgID0gcy5wZGZIZWFkZXJDb2xvcjsKICAgICAgICAgICAgICAgIGlmIChzLnBkZkhlYWRlclN1YnRpdGxlKSBhcHBEYXRhLnNldHRpbmdzLnBkZkhlYWRlclN1YnRpdGxlID0gcy5wZGZIZWFkZXJTdWJ0aXRsZTsKICAgICAgICAgICAgICAgIGlmIChzLnNpZ25TcmMpIGFwcERhdGEuc2V0dGluZ3Muc2lnbmF0dXJlID0gcy5zaWduU3JjOwogICAgICAgICAgICAgICAgaWYgKHMuem9uZSkgYXBwRGF0YS5zZXR0aW5ncy56b25lID0gcy56b25lOwogICAgICAgICAgICAgICAgaWYgKHMudGVhY2hlcnMgJiYgcy50ZWFjaGVycy5sZW5ndGgpIHsgX3RlYWNoZXJzID0gcy50ZWFjaGVyczsgfQogICAgICAgICAgICAgICAgaWYgKHMuc3R1ZGVudHMgJiYgcy5zdHVkZW50cy5sZW5ndGgpIHsgX3N0dWRlbnRzID0gcy5zdHVkZW50czsgfQogICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBzLmdjYWxFbmFibGVkICE9PSAndW5kZWZpbmVkJykgeyBzZXRDYWxlbmRhck1vZGUocy5nY2FsRW5hYmxlZCk7IH0KICAgICAgICAgICAgICAgIGlmIChzLmdjYWxFdmVudHMpIHsgX2djYWxFdmVudHMgPSBzLmdjYWxFdmVudHM7IHJlbmRlclVuaWZpZWRDYWwoKTsgfQogICAgICAgICAgICAgICAgaWYgKHMuZ2NhbENhbGVuZGFycykgeyBfZ2NhbENhbGVuZGFycyA9IHMuZ2NhbENhbGVuZGFyczsgfQogICAgICAgICAgICAgICAgaWYgKHMuZ2NhbFNlbCkgeyBfZ2NhbFNlbGVjdGVkSWRzID0gcy5nY2FsU2VsOyB9CiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHNhdmVEYXRhID09PSAnZnVuY3Rpb24nKSBzYXZlRGF0YSgpOwogICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBpbml0U3R1ZGVudEFDID09PSAnZnVuY3Rpb24nKSBpbml0U3R1ZGVudEFDKCk7CiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGluaXRUZWFjaGVyQUMgPT09ICdmdW5jdGlvbicpIGluaXRUZWFjaGVyQUMoKTsKICAgICAgICAgICAgfQogICAgICAgIH0gY2F0Y2goZXJyKSB7IGNvbnNvbGUud2FybignQnJpZGdlIGVycm9yOicsIGVycik7IH0KICAgIH0pOwogICAgd2luZG93LnBhcmVudC5wb3N0TWVzc2FnZSh7IHR5cGU6ICdwaWxvdGUtbW9kdWxlLXJlYWR5JywgbW9kdWxlOiAncGVyZGlyJyB9LCAnKicpOwoKICAgIAogICAgLy8g4pWQ4pWQ4pWQIFRBQiBLRVkgSU4gUlRFIEVESVRPUlMg4pWQ4pWQ4pWQCiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgZnVuY3Rpb24oZSkgewogICAgICAgIHZhciBlbCA9IGUudGFyZ2V0OwogICAgICAgIGlmICghZWwgfHwgIWVsLmNsYXNzTGlzdCB8fCAhZWwuY2xhc3NMaXN0LmNvbnRhaW5zKCdkb2MtZWRpdG9yJykgfHwgIWVsLmlzQ29udGVudEVkaXRhYmxlKSByZXR1cm47CiAgICAgICAgaWYgKGUua2V5ID09PSAnVGFiJykgewogICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgICAgIGlmIChlLnNoaWZ0S2V5KSB7CiAgICAgICAgICAgICAgICBkb2N1bWVudC5leGVjQ29tbWFuZCgnb3V0ZGVudCcsIGZhbHNlLCBudWxsKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGRvY3VtZW50LmV4ZWNDb21tYW5kKCdpbmRlbnQnLCBmYWxzZSwgbnVsbCk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9KTsKCiAgICAvLyBGb3J3YXJkIGtleWJvYXJkIHNob3J0Y3V0cyB0byBwYXJlbnQKICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBmdW5jdGlvbihlKSB7CiAgICAgICAgaWYgKCFlLmN0cmxLZXkgfHwgZS5zaGlmdEtleSB8fCBlLmFsdEtleSB8fCBlLm1ldGFLZXkpIHJldHVybjsKICAgICAgICB2YXIga2V5ID0gZS5rZXkudG9Mb3dlckNhc2UoKTsKICAgICAgICBpZiAoWydwJywnZScsJ28nLCdhJywnZCddLmluZGV4T2Yoa2V5KSA+PSAwKSB7CiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgICAgICAgd2luZG93LnBhcmVudC5wb3N0TWVzc2FnZSh7dHlwZToncGlsb3RlLXNob3J0Y3V0Jywga2V5OmtleX0sICcqJyk7CiAgICAgICAgfQogICAgfSk7CgoKICAgIC8vIExpc3RlbiBmb3IgZ2NhbCBDUlVEIHJlc3BvbnNlcwogICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCBmdW5jdGlvbihlT0wpIHsKICAgICAgICBpZiAoIWVPTC5kYXRhIHx8IGVPTC5kYXRhLnR5cGUgIT09ICdwaWxvdGUtb3V0bG9vaycpIHJldHVybjsKICAgICAgICB2YXIgb2QgPSBlT0wuZGF0YS5kYXRhOwogICAgICAgIGlmIChvZCkgewogICAgICAgICAgICBpZiAob2Qub3V0bG9va0V2ZW50cykgeyBfb3V0bG9va0V2ZW50cyA9IG9kLm91dGxvb2tFdmVudHM7IHJlbmRlclVuaWZpZWRDYWwoKTsgfQogICAgICAgICAgICBpZiAob2Qub3V0bG9va0NhbHMpIF9vdXRsb29rQ2FsZW5kYXJzID0gb2Qub3V0bG9va0NhbHM7CiAgICAgICAgICAgIGlmICh0eXBlb2Ygb2Qub3V0bG9va0VuYWJsZWQgIT09ICd1bmRlZmluZWQnKSBfb3V0bG9va0VuYWJsZWQgPSBvZC5vdXRsb29rRW5hYmxlZDsKICAgICAgICB9CiAgICB9KTsKICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgZnVuY3Rpb24oZTIpIHsKICAgICAgICBpZiAoIWUyLmRhdGEpIHJldHVybjsKICAgICAgICBpZiAoZTIuZGF0YS50eXBlID09PSAncGlsb3RlLWdjYWwtY3J1ZC1vaycpIHsKICAgICAgICAgICAgLy8gUmVmcmVzaCBhZnRlciBDUlVECiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXsgd2luZG93LnBhcmVudC5wb3N0TWVzc2FnZSh7dHlwZToncGlsb3RlLWdjYWwtcmVmcmVzaCd9LCAnKicpOyB9LCA1MDApOwogICAgICAgIH0KICAgIH0pOwp9KSgpOwoKICAgIAogICAgZnVuY3Rpb24gZXNjSHRtbChzKSB7IHZhciBkPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOyBkLnRleHRDb250ZW50PXM7IHJldHVybiBkLmlubmVySFRNTDsgfQoKICAgIGZ1bmN0aW9uIHNldENhbGVuZGFyTW9kZShlbmFibGVkKSB7IF9nY2FsRW5hYmxlZCA9IGVuYWJsZWQ7IH0KCiAgICAvLyDilZDilZDilZAgQ0FMRU5EUklFUiBVTklGScOJIFYxMi4xMyDilZDilZDilZAKICAgIHZhciBfZ2NhbEVuYWJsZWQgPSBmYWxzZTsKICAgIHZhciBfZ2NhbEV2ZW50cyA9IFtdOwogICAgdmFyIF91Y2FsTW9udGggPSBuZXcgRGF0ZSgpLmdldE1vbnRoKCk7CiAgICB2YXIgX3VjYWxZZWFyID0gbmV3IERhdGUoKS5nZXRGdWxsWWVhcigpOwogICAgdmFyIF9nY2FsQ2FsZW5kYXJzID0gW107IC8vIGxpc3Qgb2Yge2lkLCBuYW1lLCBiZ30KICAgIHZhciBfZ2NhbFNlbGVjdGVkSWRzID0gW107IC8vIElEcyBzZWxlY3RlZCBpbiBtYXN0ZXIgc2V0dGluZ3MKICAgIHZhciBfb3V0bG9va0V2ZW50cyA9IFtdOwogICAgdmFyIF9vdXRsb29rQ2FsZW5kYXJzID0gW107CiAgICB2YXIgX291dGxvb2tFbmFibGVkID0gZmFsc2U7CgogICAgLy8gQ29sb3IgbWFwIGZvciBldmVudCB0eXBlcwogICAgdmFyIFVDQUxfQ09MT1JTID0gewogICAgICAgIGxvY2FsOiAnIzM0OThkYicsCiAgICAgICAgZmVyaWU6ICcjZTc0YzNjJywKICAgICAgICB2YWM6ICcjZTY3ZTIyJywKICAgICAgICBnY2FsRGVmYXVsdDogJyM0Mjg1ZjQnCiAgICB9OwoKICAgIGZ1bmN0aW9uIHVjYWxQcmV2KCkgeyBfdWNhbE1vbnRoLS07IGlmKF91Y2FsTW9udGg8MCl7X3VjYWxNb250aD0xMTtfdWNhbFllYXItLTt9IHJlbmRlclVuaWZpZWRDYWwoKTsgfQogICAgZnVuY3Rpb24gdWNhbE5leHQoKSB7IF91Y2FsTW9udGgrKzsgaWYoX3VjYWxNb250aD4xMSl7X3VjYWxNb250aD0wO191Y2FsWWVhcisrO30gcmVuZGVyVW5pZmllZENhbCgpOyB9CiAgICBmdW5jdGlvbiB1Y2FsVG9kYXkoKSB7IF91Y2FsTW9udGg9bmV3IERhdGUoKS5nZXRNb250aCgpOyBfdWNhbFllYXI9bmV3IERhdGUoKS5nZXRGdWxsWWVhcigpOyByZW5kZXJVbmlmaWVkQ2FsKCk7IH0KICAgIGZ1bmN0aW9uIHVjYWxSZWZyZXNoKCkgeyB3aW5kb3cucGFyZW50LnBvc3RNZXNzYWdlKHt0eXBlOidwaWxvdGUtZ2NhbC1yZWZyZXNoJ30sICcqJyk7IH0KCiAgICBmdW5jdGlvbiByZW5kZXJVbmlmaWVkQ2FsKCkgewogICAgICAgIHZhciBtTmFtZXMgPSBbJ0phbnZpZXInLCdGw6l2cmllcicsJ01hcnMnLCdBdnJpbCcsJ01haScsJ0p1aW4nLCdKdWlsbGV0JywnQW/Du3QnLCdTZXB0ZW1icmUnLCdPY3RvYnJlJywnTm92ZW1icmUnLCdEw6ljZW1icmUnXTsKICAgICAgICB2YXIgdGl0bGVFbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd1Y2FsLXRpdGxlJyk7CiAgICAgICAgaWYgKHRpdGxlRWwpIHRpdGxlRWwudGV4dENvbnRlbnQgPSBtTmFtZXNbX3VjYWxNb250aF0gKyAnICcgKyBfdWNhbFllYXI7CgogICAgICAgIHZhciBib2R5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3VjYWwtYm9keScpOwogICAgICAgIGlmICghYm9keSkgcmV0dXJuOwogICAgICAgIHZhciB0b2RheSA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKS5zcGxpdCgnVCcpWzBdOwogICAgICAgIHZhciBtU3RyID0gX3VjYWxZZWFyICsgJy0nICsgU3RyaW5nKF91Y2FsTW9udGgrMSkucGFkU3RhcnQoMiwnMCcpOwogICAgICAgIHZhciBpc0N1cnJlbnRNb250aCA9IChfdWNhbE1vbnRoID09PSBuZXcgRGF0ZSgpLmdldE1vbnRoKCkgJiYgX3VjYWxZZWFyID09PSBuZXcgRGF0ZSgpLmdldEZ1bGxZZWFyKCkpOwoKICAgICAgICAvLyBDb2xsZWN0IEFMTCBldmVudHMgZm9yIHRoaXMgbW9udGgKICAgICAgICB2YXIgYWxsID0gW107CgogICAgICAgIC8vIDEuIExvY2FsIGV2ZW50cwogICAgICAgIChhcHBEYXRhLmNhbGVuZGFyIHx8IFtdKS5mb3JFYWNoKGZ1bmN0aW9uKGMpIHsKICAgICAgICAgICAgaWYgKCFjLmRhdGUgfHwgIWMudGFzayB8fCBjLmRhdGUuc3Vic3RyaW5nKDAsNykgIT09IG1TdHIpIHJldHVybjsKICAgICAgICAgICAgdmFyIHR5cGUgPSAnbG9jYWwnOwogICAgICAgICAgICBpZiAoYy52YWNPZmZpY2llbCkgdHlwZSA9IGMudGFzay5pbmRleE9mKCfwn4er8J+HtycpID49IDAgPyAnZmVyaWUnIDogJ3ZhYyc7CiAgICAgICAgICAgIGFsbC5wdXNoKHsKICAgICAgICAgICAgICAgIGlkOiBjLmlkLCB0aXRsZTogYy50YXNrLCBkYXRlOiBjLmRhdGUsIHRpbWU6ICcnLCBlbmRUaW1lOiAnJywKICAgICAgICAgICAgICAgIHNyYzogJ2xvY2FsJywgdHlwZTogdHlwZSwKICAgICAgICAgICAgICAgIGNvbG9yOiB0eXBlID09PSAnZmVyaWUnID8gVUNBTF9DT0xPUlMuZmVyaWUgOiB0eXBlID09PSAndmFjJyA/IFVDQUxfQ09MT1JTLnZhYyA6IFVDQUxfQ09MT1JTLmxvY2FsLAogICAgICAgICAgICAgICAgY2FsTmFtZTogdHlwZSA9PT0gJ2ZlcmllJyA/ICdKb3VyIGbDqXJpw6knIDogdHlwZSA9PT0gJ3ZhYycgPyAnVmFjYW5jZXMnIDogJ0FnZW5kYSBsb2NhbCcsCiAgICAgICAgICAgICAgICBjYWxJZDogJycsIGVkaXRhYmxlOiB0eXBlID09PSAnbG9jYWwnCiAgICAgICAgICAgIH0pOwogICAgICAgIH0pOwoKICAgICAgICAvLyAyLiBHb29nbGUgQ2FsZW5kYXIgZXZlbnRzCiAgICAgICAgKF9nY2FsRXZlbnRzIHx8IFtdKS5mb3JFYWNoKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgaWYgKCFlLmRhdGUgfHwgZS5kYXRlLnN1YnN0cmluZygwLDcpICE9PSBtU3RyKSByZXR1cm47CiAgICAgICAgICAgIC8vIEF2b2lkIGR1cGxpY2F0ZXMgd2l0aCBsb2NhbAogICAgICAgICAgICB2YXIgaXNEdXAgPSBhbGwuc29tZShmdW5jdGlvbihhKXsgcmV0dXJuIGEudGl0bGUgPT09IGUudGl0bGUgJiYgYS5kYXRlID09PSBlLmRhdGUgJiYgYS5zcmMgPT09ICdsb2NhbCc7IH0pOwogICAgICAgICAgICBpZiAoaXNEdXApIHJldHVybjsKICAgICAgICAgICAgYWxsLnB1c2goewogICAgICAgICAgICAgICAgaWQ6IGUuaWQsIHRpdGxlOiBlLnRpdGxlLCBkYXRlOiBlLmRhdGUsIHRpbWU6IGUudGltZSB8fCAnJywgZW5kVGltZTogZS5lbmRUaW1lIHx8ICcnLAogICAgICAgICAgICAgICAgc3JjOiAnZ2NhbCcsIHR5cGU6ICdnY2FsJywKICAgICAgICAgICAgICAgIGNvbG9yOiBlLmNvbG9yIHx8IFVDQUxfQ09MT1JTLmdjYWxEZWZhdWx0LAogICAgICAgICAgICAgICAgY2FsTmFtZTogZS5jYWxOYW1lIHx8ICdHb29nbGUnLCBjYWxJZDogZS5jYWxJZCB8fCAnJywKICAgICAgICAgICAgICAgIGVkaXRhYmxlOiAhIV9nY2FsRW5hYmxlZAogICAgICAgICAgICB9KTsKICAgICAgICB9KTsKCiAgICAgICAgLy8gMy4gT3V0bG9vayBldmVudHMKICAgICAgICAoX291dGxvb2tFdmVudHMgfHwgW10pLmZvckVhY2goZnVuY3Rpb24oZSkgewogICAgICAgICAgICBpZiAoIWUuZGF0ZSB8fCBlLmRhdGUuc3Vic3RyaW5nKDAsNykgIT09IG1TdHIpIHJldHVybjsKICAgICAgICAgICAgdmFyIGlzRHVwID0gYWxsLnNvbWUoZnVuY3Rpb24oYSl7IHJldHVybiBhLnRpdGxlID09PSBlLnRpdGxlICYmIGEuZGF0ZSA9PT0gZS5kYXRlOyB9KTsKICAgICAgICAgICAgaWYgKGlzRHVwKSByZXR1cm47CiAgICAgICAgICAgIGFsbC5wdXNoKHsKICAgICAgICAgICAgICAgIGlkOiBlLmlkLCB0aXRsZTogZS50aXRsZSwgZGF0ZTogZS5kYXRlLCB0aW1lOiBlLnRpbWUgfHwgJycsIGVuZFRpbWU6IGUuZW5kVGltZSB8fCAnJywKICAgICAgICAgICAgICAgIHNyYzogJ291dGxvb2snLCB0eXBlOiAnb3V0bG9vaycsCiAgICAgICAgICAgICAgICBjb2xvcjogZS5jb2xvciB8fCAnIzAwNzhkNCcsCiAgICAgICAgICAgICAgICBjYWxOYW1lOiBlLmNhbE5hbWUgfHwgJ091dGxvb2snLCBjYWxJZDogZS5jYWxJZCB8fCAnJywKICAgICAgICAgICAgICAgIGVkaXRhYmxlOiAhIV9vdXRsb29rRW5hYmxlZAogICAgICAgICAgICB9KTsKICAgICAgICB9KTsKCiAgICAgICAgLy8gU29ydCBieSBkYXRlK3RpbWUKICAgICAgICBhbGwuc29ydChmdW5jdGlvbihhLGIpIHsgcmV0dXJuIChhLmRhdGUrJyAnKyhhLnRpbWV8fCcwMDowMCcpKS5sb2NhbGVDb21wYXJlKGIuZGF0ZSsnICcrKGIudGltZXx8JzAwOjAwJykpOyB9KTsKCiAgICAgICAgLy8gRmlsdGVyOiBmb3IgY3VycmVudCBtb250aCwgb25seSBmdXR1cmUgZXZlbnRzCiAgICAgICAgaWYgKGlzQ3VycmVudE1vbnRoKSB7CiAgICAgICAgICAgIGFsbCA9IGFsbC5maWx0ZXIoZnVuY3Rpb24oZSkgeyByZXR1cm4gZS5kYXRlID49IHRvZGF5OyB9KTsKICAgICAgICB9CgogICAgICAgIGlmICghYWxsLmxlbmd0aCkgewogICAgICAgICAgICBib2R5LmlubmVySFRNTCA9ICc8ZGl2IGNsYXNzPSJ1Y2FsLWVtcHR5Ij48aSBjbGFzcz0iZmFzIGZhLWNhbGVuZGFyLWNoZWNrIj48L2k+QXVjdW4gw6l2w6luZW1lbnQgY2UgbW9pczwvZGl2Pic7CiAgICAgICAgICAgIHJlbmRlclVjYWxMZWdlbmQoW10pOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICAvLyBHcm91cCBieSBkYXkKICAgICAgICB2YXIgZ3JvdXBzID0ge307CiAgICAgICAgYWxsLmZvckVhY2goZnVuY3Rpb24oZSkgeyBpZighZ3JvdXBzW2UuZGF0ZV0pIGdyb3Vwc1tlLmRhdGVdPVtdOyBncm91cHNbZS5kYXRlXS5wdXNoKGUpOyB9KTsKCiAgICAgICAgdmFyIGh0bWwgPSAnJzsKICAgICAgICB2YXIgc3JjU2V0ID0gbmV3IFNldCgpOwogICAgICAgIE9iamVjdC5rZXlzKGdyb3Vwcykuc29ydCgpLmZvckVhY2goZnVuY3Rpb24oZGF0ZSkgewogICAgICAgICAgICB2YXIgZCA9IG5ldyBEYXRlKGRhdGUgKyAnVDEyOjAwOjAwJyk7CiAgICAgICAgICAgIHZhciBkYXlOYW1lID0gZC50b0xvY2FsZURhdGVTdHJpbmcoJ2ZyLUZSJywge3dlZWtkYXk6J2xvbmcnLCBkYXk6J251bWVyaWMnLCBtb250aDonbG9uZyd9KTsKICAgICAgICAgICAgZGF5TmFtZSA9IGRheU5hbWUuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBkYXlOYW1lLnNsaWNlKDEpOwogICAgICAgICAgICB2YXIgaXNUb2RheSA9IGRhdGUgPT09IHRvZGF5OwoKICAgICAgICAgICAgaHRtbCArPSAnPGRpdiBjbGFzcz0idWNhbC1kYXktZ3JvdXAiPic7CiAgICAgICAgICAgIGh0bWwgKz0gJzxkaXYgY2xhc3M9InVjYWwtZGF5LWhkcicrKGlzVG9kYXk/JyBpcy10b2RheSc6JycpKyciPicrKGlzVG9kYXk/JzxpIGNsYXNzPSJmYXMgZmEtc3RhciIgc3R5bGU9ImNvbG9yOiNlNjdlMjI7bWFyZ2luLXJpZ2h0OjRweDtmb250LXNpemU6LjdyZW0iPjwvaT4nOicnKStkYXlOYW1lKyc8L2Rpdj4nOwoKICAgICAgICAgICAgZ3JvdXBzW2RhdGVdLmZvckVhY2goZnVuY3Rpb24oZXYpIHsKICAgICAgICAgICAgICAgIHNyY1NldC5hZGQoZXYudHlwZSA9PT0gJ2djYWwnID8gZXYuY2FsTmFtZSA6IGV2LnR5cGUpOwogICAgICAgICAgICAgICAgaHRtbCArPSAnPGRpdiBjbGFzcz0idWNhbC1pdGVtIj4nOwogICAgICAgICAgICAgICAgaHRtbCArPSAnPGRpdiBjbGFzcz0idWNhbC1kb3QiIHN0eWxlPSJiYWNrZ3JvdW5kOicrZXYuY29sb3IrJyI+PC9kaXY+JzsKICAgICAgICAgICAgICAgIGh0bWwgKz0gJzxkaXYgY2xhc3M9InVjYWwtbGVmdCI+JzsKICAgICAgICAgICAgICAgIGh0bWwgKz0gJzxkaXYgY2xhc3M9InVjYWwtaXRlbS10aW1lIj4nKyhldi50aW1lID8gZXYudGltZSsoZXYuZW5kVGltZT8nIOKAkyAnK2V2LmVuZFRpbWU6JycpIDogJzxzcGFuIHN0eWxlPSJjb2xvcjojY2NjIj5Kb3VybsOpZTwvc3Bhbj4nKSsnPC9kaXY+JzsKICAgICAgICAgICAgICAgIGlmIChldi5lZGl0YWJsZSB8fCBldi5zcmM9PT0nZ2NhbCcpIHsKICAgICAgICAgICAgICAgICAgICBodG1sICs9ICc8ZGl2IGNsYXNzPSJ1Y2FsLWl0ZW0tYWN0aW9ucyI+JzsKICAgICAgICAgICAgICAgICAgICBodG1sICs9ICc8YnV0dG9uIG9uY2xpY2s9ImVkaXRVY2FsRXZlbnQoXCcnK2V2LmlkKydcJyxcJycrZXYuc3JjKydcJyxcJycrZXYuY2FsSWQucmVwbGFjZSgvJy9nLCJcXCciKSsnXCcpIj48aSBjbGFzcz0iZmFzIGZhLXBlbiI+PC9pPjwvYnV0dG9uPic7CiAgICAgICAgICAgICAgICAgICAgaHRtbCArPSAnPGJ1dHRvbiBjbGFzcz0iYWN0LWRlbCIgb25jbGljaz0iZGVsZXRlVWNhbEV2ZW50KFwnJytldi5pZCsnXCcsXCcnK2V2LnNyYysnXCcsXCcnK2V2LmNhbElkLnJlcGxhY2UoLycvZywiXFwnIikrJ1wnKSI+PGkgY2xhc3M9ImZhcyBmYS10cmFzaCI+PC9pPjwvYnV0dG9uPic7CiAgICAgICAgICAgICAgICAgICAgaHRtbCArPSAnPC9kaXY+JzsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGh0bWwgKz0gJzwvZGl2Pic7CiAgICAgICAgICAgICAgICBodG1sICs9ICc8ZGl2IGNsYXNzPSJ1Y2FsLWluZm8iPic7CiAgICAgICAgICAgICAgICBodG1sICs9ICc8ZGl2IGNsYXNzPSJ1Y2FsLWl0ZW0tdGl0bGUiPicrZXNjSHRtbChldi50aXRsZSkrJzwvZGl2Pic7CiAgICAgICAgICAgICAgICBodG1sICs9ICc8ZGl2IGNsYXNzPSJ1Y2FsLWl0ZW0tbWV0YSI+Jytlc2NIdG1sKGV2LmNhbE5hbWUpOwogICAgICAgICAgICAgICAgaWYgKGV2LnNyYz09PSdnY2FsJykgaHRtbCArPSAnIDxzcGFuIGNsYXNzPSJ1Y2FsLXNyYy1iYWRnZSIgc3R5bGU9ImJhY2tncm91bmQ6IzQyODVmNCI+Rzwvc3Bhbj4nOwogICAgICAgICAgICAgICAgaHRtbCArPSAnPC9kaXY+PC9kaXY+JzsKICAgICAgICAgICAgICAgIGh0bWwgKz0gJzwvZGl2Pic7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBodG1sICs9ICc8L2Rpdj4nOwogICAgICAgIH0pOwogICAgICAgIGJvZHkuaW5uZXJIVE1MID0gaHRtbDsKICAgICAgICByZW5kZXJVY2FsTGVnZW5kKHNyY1NldCk7CiAgICB9CgogICAgZnVuY3Rpb24gcmVuZGVyVWNhbExlZ2VuZChzcmNTZXQpIHsKICAgICAgICB2YXIgbGVnID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3VjYWwtbGVnZW5kJyk7CiAgICAgICAgaWYgKCFsZWcpIHJldHVybjsKICAgICAgICB2YXIgaXRlbXMgPSBbCiAgICAgICAgICAgIHtsYWJlbDonTG9jYWwnLCBjb2xvcjpVQ0FMX0NPTE9SUy5sb2NhbCwga2V5Oidsb2NhbCd9LAogICAgICAgICAgICB7bGFiZWw6J0bDqXJpw6lzJywgY29sb3I6VUNBTF9DT0xPUlMuZmVyaWUsIGtleTonZmVyaWUnfSwKICAgICAgICAgICAge2xhYmVsOidWYWNhbmNlcycsIGNvbG9yOlVDQUxfQ09MT1JTLnZhYywga2V5Oid2YWMnfSwKICAgICAgICAgICAge2xhYmVsOidPdXRsb29rJywgY29sb3I6JyMwMDc4ZDQnLCBrZXk6J291dGxvb2snfQogICAgICAgIF07CiAgICAgICAgLy8gQWRkIGdjYWwgY2FsZW5kYXJzCiAgICAgICAgKF9nY2FsRXZlbnRzIHx8IFtdKS5mb3JFYWNoKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgaWYgKGUuY2FsTmFtZSAmJiAhaXRlbXMuc29tZShmdW5jdGlvbihpKXtyZXR1cm4gaS5sYWJlbD09PWUuY2FsTmFtZTt9KSkgewogICAgICAgICAgICAgICAgaXRlbXMucHVzaCh7bGFiZWw6ZS5jYWxOYW1lLCBjb2xvcjplLmNvbG9yfHxVQ0FMX0NPTE9SUy5nY2FsRGVmYXVsdCwga2V5OmUuY2FsTmFtZX0pOwogICAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgbGVnLmlubmVySFRNTCA9IGl0ZW1zLm1hcChmdW5jdGlvbihpKXsKICAgICAgICAgICAgcmV0dXJuICc8c3Bhbj48c3BhbiBjbGFzcz0idWNhbC1sZWdlbmQtZG90IiBzdHlsZT0iYmFja2dyb3VuZDonK2kuY29sb3IrJyI+PC9zcGFuPicraS5sYWJlbCsnPC9zcGFuPic7CiAgICAgICAgfSkuam9pbignJyk7CiAgICB9CgogICAgLy8g4pSA4pSAIENSVUQg4pSA4pSACiAgICBmdW5jdGlvbiBvcGVuVWNhbEFkZE1vZGFsKCkgewogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd1Y2FsLWVpZCcpLnZhbHVlID0gJyc7CiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3VjYWwtZXNyYycpLnZhbHVlID0gJ2xvY2FsJzsKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndWNhbC1lY2FsaWQnKS52YWx1ZSA9ICcnOwogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd1Y2FsLWRhdGUnKS52YWx1ZSA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKS5zcGxpdCgnVCcpWzBdOwogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd1Y2FsLXRpbWUnKS52YWx1ZSA9ICcnOwogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd1Y2FsLWVuZHRpbWUnKS52YWx1ZSA9ICcnOwogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd1Y2FsLXRhc2snKS52YWx1ZSA9ICcnOwogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd1Y2FsLW1vZGFsLXRpdGxlJykudGV4dENvbnRlbnQgPSAnTm91dmVsIMOpdsOpbmVtZW50JzsKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndWNhbC1kZXN0LXdyYXAnKS5zdHlsZS5kaXNwbGF5ID0gJyc7CiAgICAgICAgc2V0VWNhbERlc3QoJ2xvY2FsJyk7CiAgICAgICAgdXBkYXRlR2NhbFRhcmdldExpc3QoKTsKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndWNhbE1vZGFsJykuc3R5bGUuZGlzcGxheSA9ICdmbGV4JzsKICAgIH0KCiAgICBmdW5jdGlvbiBjbG9zZVVjYWxNb2RhbCgpIHsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3VjYWxNb2RhbCcpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7IH0KCiAgICBmdW5jdGlvbiBzZXRVY2FsRGVzdChkZXN0KSB7CiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnVjYWwtZGVzdC1vcHQnKS5mb3JFYWNoKGZ1bmN0aW9uKGVsKXsKICAgICAgICAgICAgZWwuY2xhc3NMaXN0LnRvZ2dsZSgnYWN0aXZlJywgZWwuZGF0YXNldC5kZXN0ID09PSBkZXN0KTsKICAgICAgICAgICAgZWwucXVlcnlTZWxlY3RvcignaW5wdXQnKS5jaGVja2VkID0gZWwuZGF0YXNldC5kZXN0ID09PSBkZXN0OwogICAgICAgIH0pOwogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd1Y2FsLWdjYWwtdGFyZ2V0Jykuc3R5bGUuZGlzcGxheSA9IChkZXN0ID09PSAnZ2NhbCcgfHwgZGVzdCA9PT0gJ291dGxvb2snKSA/ICdibG9jaycgOiAnbm9uZSc7CiAgICAgICAgaWYgKGRlc3QgPT09ICdvdXRsb29rJykgdXBkYXRlT3V0bG9va1RhcmdldExpc3QoKTsKICAgICAgICBlbHNlIGlmIChkZXN0ID09PSAnZ2NhbCcpIHVwZGF0ZUdjYWxUYXJnZXRMaXN0KCk7CiAgICB9CgogICAgLy8gV2lyZSB1cCBkZXN0IGJ1dHRvbnMKICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZSkgewogICAgICAgIHZhciBvcHQgPSBlLnRhcmdldC5jbG9zZXN0KCcudWNhbC1kZXN0LW9wdCcpOwogICAgICAgIGlmIChvcHQpIHNldFVjYWxEZXN0KG9wdC5kYXRhc2V0LmRlc3QpOwogICAgfSk7CgogICAgZnVuY3Rpb24gdXBkYXRlT3V0bG9va1RhcmdldExpc3QoKSB7CiAgICAgICAgdmFyIHNlbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd1Y2FsLWdjYWwtdGFyZ2V0Jyk7CiAgICAgICAgc2VsLmlubmVySFRNTCA9ICc8b3B0aW9uIHZhbHVlPSIiPuKAlCBDaG9pc2lyIHVuIGFnZW5kYSDigJQ8L29wdGlvbj4nOwogICAgICAgIChfb3V0bG9va0NhbGVuZGFycyB8fCBbXSkuZm9yRWFjaChmdW5jdGlvbihjKSB7CiAgICAgICAgICAgIHNlbC5pbm5lckhUTUwgKz0gJzxvcHRpb24gdmFsdWU9IicrZXNjSHRtbChjLmlkKSsnIj4nK2VzY0h0bWwoYy5uYW1lKSsnPC9vcHRpb24+JzsKICAgICAgICB9KTsKICAgICAgICB2YXIgb3V0bG9va09wdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy51Y2FsLWRlc3Qtb3B0W2RhdGEtZGVzdD0ib3V0bG9vayJdJyk7CiAgICAgICAgaWYgKG91dGxvb2tPcHQpIG91dGxvb2tPcHQuc3R5bGUuZGlzcGxheSA9IChfb3V0bG9va0NhbGVuZGFycyAmJiBfb3V0bG9va0NhbGVuZGFycy5sZW5ndGgpID8gJycgOiAnbm9uZSc7CiAgICB9CiAgICBmdW5jdGlvbiB1cGRhdGVHY2FsVGFyZ2V0TGlzdCgpIHsKICAgICAgICB2YXIgc2VsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3VjYWwtZ2NhbC10YXJnZXQnKTsKICAgICAgICBzZWwuaW5uZXJIVE1MID0gJzxvcHRpb24gdmFsdWU9IiI+4oCUIENob2lzaXIgdW4gYWdlbmRhIOKAlDwvb3B0aW9uPic7CiAgICAgICAgLy8gT25seSBzaG93IGNhbGVuZGFycyBzZWxlY3RlZCBpbiBtYXN0ZXIgc2V0dGluZ3MgKGdjYWxTZWwpCiAgICAgICAgdmFyIHNlbGVjdGVkSWRzID0gX2djYWxTZWxlY3RlZElkcyB8fCBbXTsKICAgICAgICAoX2djYWxDYWxlbmRhcnMgfHwgW10pLmZvckVhY2goZnVuY3Rpb24oYykgewogICAgICAgICAgICBpZiAoc2VsZWN0ZWRJZHMubGVuZ3RoID09PSAwIHx8IHNlbGVjdGVkSWRzLmluZGV4T2YoYy5pZCkgPj0gMCkgewogICAgICAgICAgICAgICAgc2VsLmlubmVySFRNTCArPSAnPG9wdGlvbiB2YWx1ZT0iJytlc2NIdG1sKGMuaWQpKyciPicrZXNjSHRtbChjLm5hbWUpKyc8L29wdGlvbj4nOwogICAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgLy8gSWYgbm8gR29vZ2xlIGNhbGVuZGFycyBhdmFpbGFibGUsIGhpZGUgR29vZ2xlIG9wdGlvbgogICAgICAgIHZhciBnY2FsT3B0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnVjYWwtZGVzdC1vcHRbZGF0YS1kZXN0PSJnY2FsIl0nKTsKICAgICAgICB2YXIgb3V0bG9va09wdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy51Y2FsLWRlc3Qtb3B0W2RhdGEtZGVzdD0ib3V0bG9vayJdJyk7CiAgICAgICAgaWYgKGdjYWxPcHQpIGdjYWxPcHQuc3R5bGUuZGlzcGxheSA9IChfZ2NhbENhbGVuZGFycyAmJiBfZ2NhbENhbGVuZGFycy5sZW5ndGgpID8gJycgOiAnbm9uZSc7CiAgICB9CgogICAgZnVuY3Rpb24gZWRpdFVjYWxFdmVudChpZCwgc3JjLCBjYWxJZCkgewogICAgICAgIGlmIChzcmMgPT09ICdsb2NhbCcpIHsKICAgICAgICAgICAgdmFyIGl0ZW0gPSAoYXBwRGF0YS5jYWxlbmRhcnx8W10pLmZpbmQoZnVuY3Rpb24oYyl7IHJldHVybiBjLmlkLnRvU3RyaW5nKCk9PT1pZC50b1N0cmluZygpOyB9KTsKICAgICAgICAgICAgaWYgKCFpdGVtKSByZXR1cm47CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd1Y2FsLWVpZCcpLnZhbHVlID0gaWQ7CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd1Y2FsLWVzcmMnKS52YWx1ZSA9ICdsb2NhbCc7CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd1Y2FsLWVjYWxpZCcpLnZhbHVlID0gJyc7CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd1Y2FsLWRhdGUnKS52YWx1ZSA9IGl0ZW0uZGF0ZSB8fCAnJzsKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3VjYWwtdGltZScpLnZhbHVlID0gaXRlbS50aW1lIHx8ICcnOwogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndWNhbC1lbmR0aW1lJykudmFsdWUgPSBpdGVtLmVuZFRpbWUgfHwgJyc7CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd1Y2FsLXRhc2snKS52YWx1ZSA9IGl0ZW0udGFzayB8fCAnJzsKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3VjYWwtbW9kYWwtdGl0bGUnKS50ZXh0Q29udGVudCA9ICdNb2RpZmllciBsXCfDqXbDqW5lbWVudCc7CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd1Y2FsLWRlc3Qtd3JhcCcpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd1Y2FsTW9kYWwnKS5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnOwogICAgICAgIH0gZWxzZSBpZiAoc3JjID09PSAnZ2NhbCcpIHsKICAgICAgICAgICAgdmFyIGV2ID0gKF9nY2FsRXZlbnRzfHxbXSkuZmluZChmdW5jdGlvbihlKXsgcmV0dXJuIGUuaWQ9PT1pZDsgfSk7CiAgICAgICAgICAgIGlmICghZXYpIHJldHVybjsKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3VjYWwtZWlkJykudmFsdWUgPSBpZDsKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3VjYWwtZXNyYycpLnZhbHVlID0gJ2djYWwnOwogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndWNhbC1lY2FsaWQnKS52YWx1ZSA9IGNhbElkIHx8IGV2LmNhbElkIHx8ICcnOwogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndWNhbC1kYXRlJykudmFsdWUgPSBldi5kYXRlIHx8ICcnOwogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndWNhbC10aW1lJykudmFsdWUgPSBldi50aW1lIHx8ICcnOwogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndWNhbC1lbmR0aW1lJykudmFsdWUgPSBldi5lbmRUaW1lIHx8ICcnOwogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndWNhbC10YXNrJykudmFsdWUgPSBldi50aXRsZSB8fCAnJzsKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3VjYWwtbW9kYWwtdGl0bGUnKS50ZXh0Q29udGVudCA9ICdNb2RpZmllciAoR29vZ2xlIEFnZW5kYSknOwogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndWNhbC1kZXN0LXdyYXAnKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOwogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndWNhbE1vZGFsJykuc3R5bGUuZGlzcGxheSA9ICdmbGV4JzsKICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gc2F2ZVVjYWxFdmVudCgpIHsKICAgICAgICB2YXIgaWQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndWNhbC1laWQnKS52YWx1ZTsKICAgICAgICB2YXIgc3JjID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3VjYWwtZXNyYycpLnZhbHVlOwogICAgICAgIHZhciBjYWxJZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd1Y2FsLWVjYWxpZCcpLnZhbHVlOwogICAgICAgIHZhciBkYXRlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3VjYWwtZGF0ZScpLnZhbHVlOwogICAgICAgIHZhciB0aW1lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3VjYWwtdGltZScpLnZhbHVlOwogICAgICAgIHZhciBlbmRUaW1lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3VjYWwtZW5kdGltZScpLnZhbHVlOwogICAgICAgIHZhciB0YXNrID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3VjYWwtdGFzaycpLnZhbHVlLnRyaW0oKTsKICAgICAgICBpZiAoIWRhdGUgfHwgIXRhc2spIHJldHVybiBhbGVydCgnRGF0ZSBldCBpbnRpdHVsw6kgcmVxdWlzJyk7CgogICAgICAgIGlmIChpZCAmJiBzcmMgPT09ICdsb2NhbCcpIHsKICAgICAgICAgICAgLy8gVXBkYXRlIGxvY2FsCiAgICAgICAgICAgIHZhciBpdGVtID0gKGFwcERhdGEuY2FsZW5kYXJ8fFtdKS5maW5kKGZ1bmN0aW9uKGMpeyByZXR1cm4gYy5pZC50b1N0cmluZygpPT09aWQudG9TdHJpbmcoKTsgfSk7CiAgICAgICAgICAgIGlmIChpdGVtKSB7IGl0ZW0uZGF0ZSA9IGRhdGU7IGl0ZW0udGFzayA9IHRhc2s7IGl0ZW0udGltZSA9IHRpbWU7IGl0ZW0uZW5kVGltZSA9IGVuZFRpbWU7IH0KICAgICAgICAgICAgc2F2ZURhdGEoKTsKICAgICAgICB9IGVsc2UgaWYgKGlkICYmIHNyYyA9PT0gJ2djYWwnKSB7CiAgICAgICAgICAgIHdpbmRvdy5wYXJlbnQucG9zdE1lc3NhZ2Uoe3R5cGU6J3BpbG90ZS1nY2FsLXVwZGF0ZScsIGV2ZW50SWQ6aWQsIGNhbElkOmNhbElkLCB0aXRsZTp0YXNrLCBkYXRlOmRhdGUsIHRpbWU6dGltZSwgZW5kVGltZTplbmRUaW1lfSwgJyonKTsKICAgICAgICB9IGVsc2UgaWYgKGlkICYmIHNyYyA9PT0gJ291dGxvb2snKSB7CiAgICAgICAgICAgIHdpbmRvdy5wYXJlbnQucG9zdE1lc3NhZ2Uoe3R5cGU6J3BpbG90ZS1vdXRsb29rLXVwZGF0ZScsIGV2ZW50SWQ6aWQsIGNhbElkOmNhbElkLCB0aXRsZTp0YXNrLCBkYXRlOmRhdGUsIHRpbWU6dGltZSwgZW5kVGltZTplbmRUaW1lfSwgJyonKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAvLyBOZXcgZXZlbnQKICAgICAgICAgICAgdmFyIGRlc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdpbnB1dFtuYW1lPSJ1Y2FsLWRlc3QiXTpjaGVja2VkJyk7CiAgICAgICAgICAgIHZhciBkZXN0VmFsID0gZGVzdCA/IGRlc3QudmFsdWUgOiAnbG9jYWwnOwogICAgICAgICAgICBpZiAoZGVzdFZhbCA9PT0gJ2xvY2FsJykgewogICAgICAgICAgICAgICAgYXBwRGF0YS5jYWxlbmRhci5wdXNoKHtpZDpEYXRlLm5vdygpLnRvU3RyaW5nKCksIGRhdGU6ZGF0ZSwgdGFzazp0YXNrLCB0aW1lOnRpbWUsIGVuZFRpbWU6ZW5kVGltZX0pOwogICAgICAgICAgICAgICAgc2F2ZURhdGEoKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHZhciB0YXJnZXRDYWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndWNhbC1nY2FsLXRhcmdldCcpLnZhbHVlOwogICAgICAgICAgICAgICAgaWYgKCF0YXJnZXRDYWwpIHJldHVybiBhbGVydCgnU8OpbGVjdGlvbm5leiB1biBhZ2VuZGEgR29vZ2xlJyk7CiAgICAgICAgICAgICAgICB2YXIgZGVzdFZhbDIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdpbnB1dFtuYW1lPSJ1Y2FsLWRlc3QiXTpjaGVja2VkJykudmFsdWU7CiAgICAgICAgICAgICAgICBpZiAoZGVzdFZhbDIgPT09ICdnY2FsJykgewogICAgICAgICAgICAgICAgICAgIHdpbmRvdy5wYXJlbnQucG9zdE1lc3NhZ2Uoe3R5cGU6J3BpbG90ZS1nY2FsLWFkZCcsIGNhbElkOnRhcmdldENhbCwgdGl0bGU6dGFzaywgZGF0ZTpkYXRlLCB0aW1lOnRpbWUsIGVuZFRpbWU6ZW5kVGltZX0sICcqJyk7CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGRlc3RWYWwyID09PSAnb3V0bG9vaycpIHsKICAgICAgICAgICAgICAgICAgICB3aW5kb3cucGFyZW50LnBvc3RNZXNzYWdlKHt0eXBlOidwaWxvdGUtb3V0bG9vay1hZGQnLCBjYWxJZDp0YXJnZXRDYWwsIHRpdGxlOnRhc2ssIGRhdGU6ZGF0ZSwgdGltZTp0aW1lLCBlbmRUaW1lOmVuZFRpbWV9LCAnKicpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGNsb3NlVWNhbE1vZGFsKCk7CiAgICAgICAgcmVuZGVyVW5pZmllZENhbCgpOwogICAgICAgIGlmKHR5cGVvZiBjaGVja0RhaWx5VGFza3MgPT09ICdmdW5jdGlvbicpIGNoZWNrRGFpbHlUYXNrcygpOwogICAgfQoKICAgIGZ1bmN0aW9uIGRlbGV0ZVVjYWxFdmVudChpZCwgc3JjLCBjYWxJZCkgewogICAgICAgIGlmICghY29uZmlybSgnU3VwcHJpbWVyIGNldCDDqXbDqW5lbWVudCA/JykpIHJldHVybjsKICAgICAgICBpZiAoc3JjID09PSAnbG9jYWwnKSB7CiAgICAgICAgICAgIGFwcERhdGEuY2FsZW5kYXIgPSAoYXBwRGF0YS5jYWxlbmRhcnx8W10pLmZpbHRlcihmdW5jdGlvbihjKXsgcmV0dXJuIGMuaWQudG9TdHJpbmcoKSE9PWlkLnRvU3RyaW5nKCk7IH0pOwogICAgICAgICAgICBzYXZlRGF0YSgpOwogICAgICAgICAgICByZW5kZXJVbmlmaWVkQ2FsKCk7CiAgICAgICAgICAgIGlmKHR5cGVvZiBjaGVja0RhaWx5VGFza3MgPT09ICdmdW5jdGlvbicpIGNoZWNrRGFpbHlUYXNrcygpOwogICAgICAgIH0gZWxzZSBpZiAoc3JjID09PSAnZ2NhbCcpIHsKICAgICAgICAgICAgd2luZG93LnBhcmVudC5wb3N0TWVzc2FnZSh7dHlwZToncGlsb3RlLWdjYWwtZGVsZXRlJywgZXZlbnRJZDppZCwgY2FsSWQ6Y2FsSWR9LCAnKicpOwogICAgICAgICAgICBfZ2NhbEV2ZW50cyA9IF9nY2FsRXZlbnRzLmZpbHRlcihmdW5jdGlvbihlKXsgcmV0dXJuIGUuaWQgIT09IGlkOyB9KTsKICAgICAgICAgICAgcmVuZGVyVW5pZmllZENhbCgpOwogICAgICAgIH0gZWxzZSBpZiAoc3JjID09PSAnb3V0bG9vaycpIHsKICAgICAgICAgICAgd2luZG93LnBhcmVudC5wb3N0TWVzc2FnZSh7dHlwZToncGlsb3RlLW91dGxvb2stZGVsZXRlJywgZXZlbnRJZDppZCwgY2FsSWQ6Y2FsSWR9LCAnKicpOwogICAgICAgICAgICBfb3V0bG9va0V2ZW50cyA9IF9vdXRsb29rRXZlbnRzLmZpbHRlcihmdW5jdGlvbihlKXsgcmV0dXJuIGUuaWQgIT09IGlkOyB9KTsKICAgICAgICAgICAgcmVuZGVyVW5pZmllZENhbCgpOwogICAgICAgIH0KICAgIH0KCiAgICAvLyBPdmVycmlkZSBvbGQgcmVuZGVyQ2FsZW5kYXIgdG8gdXNlIHVuaWZpZWQKICAgIGZ1bmN0aW9uIHJlbmRlckNhbGVuZGFyKCkgeyByZW5kZXJVbmlmaWVkQ2FsKCk7IH0KCiAgICBmdW5jdGlvbiBtYWpWYWNhbmNlcygpIHsKICAgICAgICB2YXIgem9uZSA9IChhcHBEYXRhLnNldHRpbmdzICYmIGFwcERhdGEuc2V0dGluZ3Muem9uZSkgfHwgJ0InOwogICAgICAgIHZhciB6b25lTmFtZSA9ICdab25lICcgKyB6b25lOwoKICAgICAgICAvLyBEw6l0ZXJtaW5lciBsJ2FubsOpZSBzY29sYWlyZSBjb3VyYW50ZSAoc2VwdCDDoCBhb8O7dCkKICAgICAgICB2YXIgbm93ID0gbmV3IERhdGUoKTsKICAgICAgICB2YXIgeWVhciA9IG5vdy5nZXRNb250aCgpID49IDggPyBub3cuZ2V0RnVsbFllYXIoKSA6IG5vdy5nZXRGdWxsWWVhcigpIC0gMTsKICAgICAgICB2YXIgYW5uZWVTY28gPSB5ZWFyICsgJy0nICsgKHllYXIgKyAxKTsKCiAgICAgICAgLy8gSm91cnMgZsOpcmnDqXMgZnJhbsOnYWlzIChjYWxjdWzDqXMgZHluYW1pcXVlbWVudCkKICAgICAgICBmdW5jdGlvbiBqb3Vyc0Zlcmllcyh5KSB7CiAgICAgICAgICAgIC8vIENhbGN1bCBkZSBQw6JxdWVzIChhbGdvcml0aG1lIGRlIE1lZXVzKQogICAgICAgICAgICB2YXIgYT15JTE5LCBiPU1hdGguZmxvb3IoeS8xMDApLCBjPXklMTAwLCBkPU1hdGguZmxvb3IoYi80KSwgZT1iJTQ7CiAgICAgICAgICAgIHZhciBmPU1hdGguZmxvb3IoKGIrOCkvMjUpLCBnPU1hdGguZmxvb3IoKGItZisxKS8zKSwgaD0oMTkqYStiLWQtZysxNSklMzA7CiAgICAgICAgICAgIHZhciBpPU1hdGguZmxvb3IoYy80KSwgaz1jJTQsIGw9KDMyKzIqZSsyKmktaC1rKSU3OwogICAgICAgICAgICB2YXIgbT1NYXRoLmZsb29yKChhKzExKmgrMjIqbCkvNDUxKSwgbW9udGg9TWF0aC5mbG9vcigoaCtsLTcqbSsxMTQpLzMxKS0xOwogICAgICAgICAgICB2YXIgZGF5PShoK2wtNyptKzExNCklMzErMTsKICAgICAgICAgICAgdmFyIHBhcXVlcyA9IG5ldyBEYXRlKHksIG1vbnRoLCBkYXkpOwogICAgICAgICAgICB2YXIgdG9JU08gPSBmdW5jdGlvbihkKXsgcmV0dXJuIGQudG9JU09TdHJpbmcoKS5zcGxpdCgnVCcpWzBdOyB9OwogICAgICAgICAgICB2YXIgYWRkRGF5cyA9IGZ1bmN0aW9uKGQsbil7IHZhciByPW5ldyBEYXRlKGQpOyByLnNldERhdGUoci5nZXREYXRlKCkrbik7IHJldHVybiByOyB9OwogICAgICAgICAgICByZXR1cm4gWwogICAgICAgICAgICAgICAge25hbWU6J0pvdXIgZGUgbFwnQW4nLCBkYXRlOnRvSVNPKG5ldyBEYXRlKHksMCwxKSl9LAogICAgICAgICAgICAgICAge25hbWU6J0x1bmRpIGRlIFDDonF1ZXMnLCBkYXRlOnRvSVNPKGFkZERheXMocGFxdWVzLDEpKX0sCiAgICAgICAgICAgICAgICB7bmFtZTonRsOqdGUgZHUgVHJhdmFpbCcsIGRhdGU6dG9JU08obmV3IERhdGUoeSw0LDEpKX0sCiAgICAgICAgICAgICAgICB7bmFtZTonVmljdG9pcmUgMTk0NScsIGRhdGU6dG9JU08obmV3IERhdGUoeSw0LDgpKX0sCiAgICAgICAgICAgICAgICB7bmFtZTonQXNjZW5zaW9uJywgZGF0ZTp0b0lTTyhhZGREYXlzKHBhcXVlcywzOSkpfSwKICAgICAgICAgICAgICAgIHtuYW1lOidMdW5kaSBkZSBQZW50ZWPDtHRlJywgZGF0ZTp0b0lTTyhhZGREYXlzKHBhcXVlcyw1MCkpfSwKICAgICAgICAgICAgICAgIHtuYW1lOidGw6p0ZSBOYXRpb25hbGUnLCBkYXRlOnRvSVNPKG5ldyBEYXRlKHksNiwxNCkpfSwKICAgICAgICAgICAgICAgIHtuYW1lOidBc3NvbXB0aW9uJywgZGF0ZTp0b0lTTyhuZXcgRGF0ZSh5LDcsMTUpKX0sCiAgICAgICAgICAgICAgICB7bmFtZTonVG91c3NhaW50JywgZGF0ZTp0b0lTTyhuZXcgRGF0ZSh5LDEwLDEpKX0sCiAgICAgICAgICAgICAgICB7bmFtZTonQXJtaXN0aWNlJywgZGF0ZTp0b0lTTyhuZXcgRGF0ZSh5LDEwLDExKSl9LAogICAgICAgICAgICAgICAge25hbWU6J05vw6tsJywgZGF0ZTp0b0lTTyhuZXcgRGF0ZSh5LDExLDI1KSl9CiAgICAgICAgICAgIF07CiAgICAgICAgfQoKICAgICAgICAvLyBUZW50ZXIgbGUgZmV0Y2ggQVBJIG9mZmljaWVsbGUKICAgICAgICB2YXIgYXBpVXJsID0gJ2h0dHBzOi8vZGF0YS5lZHVjYXRpb24uZ291di5mci9hcGkvZXhwbG9yZS92Mi4xL2NhdGFsb2cvZGF0YXNldHMvZnItZW4tY2FsZW5kcmllci1zY29sYWlyZS9yZWNvcmRzP3doZXJlPWFubmVlX3Njb2xhaXJlJTNEJTIyJyArIGFubmVlU2NvICsgJyUyMiUyMEFORCUyMCh6b25lcyUzRCUyMicgKyB6b25lTmFtZSArICclMjIlMjBPUiUyMHpvbmVzJTNEJTIyRnJhbmNlJTIwZW50acOocmUlMjIpJmxpbWl0PTUwJm9yZGVyX2J5PXN0YXJ0X2RhdGUnOwoKICAgICAgICB2YXIgYnRuID0gZXZlbnQgJiYgZXZlbnQudGFyZ2V0ID8gZXZlbnQudGFyZ2V0LmNsb3Nlc3QoJ2J1dHRvbicpIDogbnVsbDsKICAgICAgICBpZiAoYnRuKSB7IGJ0bi5kaXNhYmxlZCA9IHRydWU7IGJ0bi5pbm5lckhUTUwgPSAnPGkgY2xhc3M9ImZhcyBmYS1zcGlubmVyIGZhLXNwaW4iPjwvaT4gQ2hhcmdlbWVudC4uLic7IH0KCiAgICAgICAgZmV0Y2goYXBpVXJsKS50aGVuKGZ1bmN0aW9uKHIpIHsKICAgICAgICAgICAgaWYgKCFyLm9rKSB0aHJvdyBuZXcgRXJyb3IoJ0hUVFAgJyArIHIuc3RhdHVzKTsKICAgICAgICAgICAgcmV0dXJuIHIuanNvbigpOwogICAgICAgIH0pLnRoZW4oZnVuY3Rpb24oZGF0YSkgewogICAgICAgICAgICBpZiAoIWRhdGEucmVzdWx0cyB8fCAhZGF0YS5yZXN1bHRzLmxlbmd0aCkgdGhyb3cgbmV3IEVycm9yKCdBdWN1bmUgZG9ubsOpZScpOwoKICAgICAgICAgICAgLy8gU3VwcHJpbWVyIGFuY2llbm5lcyBlbnRyw6llcwogICAgICAgICAgICBhcHBEYXRhLmNhbGVuZGFyID0gYXBwRGF0YS5jYWxlbmRhci5maWx0ZXIoZnVuY3Rpb24oYykgeyByZXR1cm4gIWMudmFjT2ZmaWNpZWw7IH0pOwogICAgICAgICAgICB2YXIgYWRkZWQgPSAwOwoKICAgICAgICAgICAgZGF0YS5yZXN1bHRzLmZvckVhY2goZnVuY3Rpb24ocmVjKSB7CiAgICAgICAgICAgICAgICB2YXIgZGVzYyA9IHJlYy5kZXNjcmlwdGlvbiB8fCAnJzsKICAgICAgICAgICAgICAgIHZhciBzdGFydCA9IChyZWMuc3RhcnRfZGF0ZSB8fCAnJykuc3BsaXQoJ1QnKVswXTsKICAgICAgICAgICAgICAgIHZhciBlbmQgPSAocmVjLmVuZF9kYXRlIHx8ICcnKS5zcGxpdCgnVCcpWzBdOwogICAgICAgICAgICAgICAgaWYgKCFzdGFydCB8fCAhZW5kKSByZXR1cm47CgogICAgICAgICAgICAgICAgdmFyIGlkID0gJ3ZhY18nICsgZGVzYy5yZXBsYWNlKC9bXmEtekEtWjAtOV0vZywnXycpICsgJ18nICsgc3RhcnQ7CiAgICAgICAgICAgICAgICBpZiAoIWFwcERhdGEuY2FsZW5kYXIuc29tZShmdW5jdGlvbihjKXsgcmV0dXJuIGMuaWQgPT09IGlkOyB9KSkgewogICAgICAgICAgICAgICAgICAgIGFwcERhdGEuY2FsZW5kYXIucHVzaCh7aWQ6IGlkLCBkYXRlOiBzdGFydCwgdGFzazogJ1x1ezFGM0Q2fSBEw6lidXQgJyArIGRlc2MgKyAnICgnICsgem9uZU5hbWUgKyAnKScsIHZhY09mZmljaWVsOiB0cnVlfSk7CiAgICAgICAgICAgICAgICAgICAgYXBwRGF0YS5jYWxlbmRhci5wdXNoKHtpZDogaWQrJ19lbmQnLCBkYXRlOiBlbmQsIHRhc2s6ICdcdXsxRjREQX0gUmVwcmlzZSAnICsgZGVzYyArICcgKCcgKyB6b25lTmFtZSArICcpJywgdmFjT2ZmaWNpZWw6IHRydWV9KTsKICAgICAgICAgICAgICAgICAgICBhZGRlZCsrOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIC8vIEFqb3V0ZXIgam91cnMgZsOpcmnDqXMgcG91ciBsZXMgMiBhbm7DqWVzIGNpdmlsZXMKICAgICAgICAgICAgW3llYXIsIHllYXIrMV0uZm9yRWFjaChmdW5jdGlvbih5KSB7CiAgICAgICAgICAgICAgICBqb3Vyc0Zlcmllcyh5KS5mb3JFYWNoKGZ1bmN0aW9uKGpmKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKGpmLmRhdGUgPj0geWVhcisnLTA5LTAxJyAmJiBqZi5kYXRlIDw9ICh5ZWFyKzEpKyctMDgtMzEnKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBmaWQgPSAnZmVyaWVfJyArIGpmLmRhdGU7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghYXBwRGF0YS5jYWxlbmRhci5zb21lKGZ1bmN0aW9uKGMpeyByZXR1cm4gYy5pZCA9PT0gZmlkOyB9KSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgYXBwRGF0YS5jYWxlbmRhci5wdXNoKHtpZDogZmlkLCBkYXRlOiBqZi5kYXRlLCB0YXNrOiAnXHV7MUYxRUJ9XHV7MUYxRjd9ICcgKyBqZi5uYW1lLCB2YWNPZmZpY2llbDogdHJ1ZX0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYWRkZWQrKzsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIC8vIE1BSiBzZW1haW5lcyB2YWNhbmNlcyBwb3VyIEdhbnR0CiAgICAgICAgICAgIHVwZGF0ZVZhY1dlZWtzRnJvbUFQSShkYXRhLnJlc3VsdHMsIHpvbmUpOwoKICAgICAgICAgICAgc2F2ZURhdGEoKTsgcmVuZGVyQ2FsZW5kYXIoKTsKICAgICAgICAgICAgaWYodHlwZW9mIGNoZWNrRGFpbHlUYXNrcyA9PT0gJ2Z1bmN0aW9uJykgY2hlY2tEYWlseVRhc2tzKCk7CiAgICAgICAgICAgIGFsZXJ0KCdcdTI3MDUgQ2FsZW5kcmllciAnICsgYW5uZWVTY28gKyAnIG1pcyDDoCBqb3VyICFcblxuJyArIHpvbmVOYW1lICsgJyDigJQgJyArIGFkZGVkICsgJyBlbnRyw6llKHMpIGFqb3V0w6llKHMpXG5cblNvdXJjZSA6IGRhdGEuZWR1Y2F0aW9uLmdvdXYuZnIgKEFQSSBvZmZpY2llbGxlKScpOwogICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uKGVycikgewogICAgICAgICAgICBjb25zb2xlLndhcm4oJ0FQSSBpbmRpc3BvbmlibGUsIGZhbGxiYWNrIGRvbm7DqWVzIGxvY2FsZXM6JywgZXJyKTsKICAgICAgICAgICAgbWFqVmFjYW5jZXNGYWxsYmFjayh6b25lLCB6b25lTmFtZSk7CiAgICAgICAgfSkuZmluYWxseShmdW5jdGlvbigpIHsKICAgICAgICAgICAgaWYgKGJ0bikgeyBidG4uZGlzYWJsZWQgPSBmYWxzZTsgYnRuLmlubmVySFRNTCA9ICc8aSBjbGFzcz0iZmFzIGZhLXN5bmMiPjwvaT4gTUFKIFZhY2FuY2VzJzsgfQogICAgICAgIH0pOwogICAgfQoKICAgIGZ1bmN0aW9uIHVwZGF0ZVZhY1dlZWtzRnJvbUFQSShyZXN1bHRzLCB6b25lKSB7CiAgICAgICAgdmFyIG5ld1ZBQyA9IHthbGw6W10sIEE6W10sIEI6W10sIEM6W119OwogICAgICAgIHJlc3VsdHMuZm9yRWFjaChmdW5jdGlvbihyZWMpIHsKICAgICAgICAgICAgdmFyIHN0YXJ0ID0gcmVjLnN0YXJ0X2RhdGUgPyBuZXcgRGF0ZShyZWMuc3RhcnRfZGF0ZSkgOiBudWxsOwogICAgICAgICAgICB2YXIgZW5kID0gcmVjLmVuZF9kYXRlID8gbmV3IERhdGUocmVjLmVuZF9kYXRlKSA6IG51bGw7CiAgICAgICAgICAgIGlmICghc3RhcnQgfHwgIWVuZCkgcmV0dXJuOwogICAgICAgICAgICB2YXIgem9uZXMgPSByZWMuem9uZXMgfHwgJyc7CiAgICAgICAgICAgIGZvciAodmFyIGQgPSBuZXcgRGF0ZShzdGFydCk7IGQgPCBlbmQ7IGQuc2V0RGF0ZShkLmdldERhdGUoKSs3KSkgewogICAgICAgICAgICAgICAgdmFyIHcgPSBnZXRJU09XZWVrKGQpOwogICAgICAgICAgICAgICAgaWYgKHpvbmVzLmluZGV4T2YoJ0ZyYW5jZScpID49IDApIHsgaWYgKG5ld1ZBQy5hbGwuaW5kZXhPZih3KTwwKSBuZXdWQUMuYWxsLnB1c2godyk7IH0KICAgICAgICAgICAgICAgIGVsc2UgaWYgKHpvbmVzLmluZGV4T2YoJ0EnKSA+PSAwKSB7IGlmIChuZXdWQUMuQS5pbmRleE9mKHcpPDApIG5ld1ZBQy5BLnB1c2godyk7IH0KICAgICAgICAgICAgICAgIGVsc2UgaWYgKHpvbmVzLmluZGV4T2YoJ0InKSA+PSAwKSB7IGlmIChuZXdWQUMuQi5pbmRleE9mKHcpPDApIG5ld1ZBQy5CLnB1c2godyk7IH0KICAgICAgICAgICAgICAgIGVsc2UgaWYgKHpvbmVzLmluZGV4T2YoJ0MnKSA+PSAwKSB7IGlmIChuZXdWQUMuQy5pbmRleE9mKHcpPDApIG5ld1ZBQy5DLnB1c2godyk7IH0KICAgICAgICAgICAgfQogICAgICAgIH0pOwogICAgICAgIGlmIChuZXdWQUMuYWxsLmxlbmd0aCkgVkFDID0gbmV3VkFDOwogICAgfQoKICAgIGZ1bmN0aW9uIGdldElTT1dlZWsoZCkgewogICAgICAgIHZhciBkYXRlID0gbmV3IERhdGUoZC5nZXRUaW1lKCkpOwogICAgICAgIGRhdGUuc2V0SG91cnMoMCwwLDAsMCk7CiAgICAgICAgZGF0ZS5zZXREYXRlKGRhdGUuZ2V0RGF0ZSgpKzMtKGRhdGUuZ2V0RGF5KCkrNiklNyk7CiAgICAgICAgdmFyIHdlZWsxID0gbmV3IERhdGUoZGF0ZS5nZXRGdWxsWWVhcigpLDAsNCk7CiAgICAgICAgcmV0dXJuIDErTWF0aC5yb3VuZCgoKGRhdGUuZ2V0VGltZSgpLXdlZWsxLmdldFRpbWUoKSkvODY0MDAwMDAtMysod2VlazEuZ2V0RGF5KCkrNiklNykvNyk7CiAgICB9CgogICAgZnVuY3Rpb24gbWFqVmFjYW5jZXNGYWxsYmFjayh6b25lLCB6b25lTmFtZSkgewogICAgICAgIHZhciBWQUNBTkNFUyA9IHsKICAgICAgICAgICAgYWxsOlt7bmFtZTonVG91c3NhaW50JyxzdGFydDonMjAyNS0xMC0xOCcsZW5kOicyMDI1LTExLTAzJ30se25hbWU6J05vw6tsJyxzdGFydDonMjAyNS0xMi0yMCcsZW5kOicyMDI2LTAxLTA1J30se25hbWU6J0FzY2Vuc2lvbicsc3RhcnQ6JzIwMjYtMDUtMTMnLGVuZDonMjAyNi0wNS0xOCd9LHtuYW1lOifDiXTDqScsc3RhcnQ6JzIwMjYtMDctMDQnLGVuZDonMjAyNi0wOS0wMSd9XSwKICAgICAgICAgICAgQTpbe25hbWU6J0hpdmVyJyxzdGFydDonMjAyNi0wMi0wNycsZW5kOicyMDI2LTAyLTIzJ30se25hbWU6J1ByaW50ZW1wcycsc3RhcnQ6JzIwMjYtMDQtMDQnLGVuZDonMjAyNi0wNC0yMCd9XSwKICAgICAgICAgICAgQjpbe25hbWU6J0hpdmVyJyxzdGFydDonMjAyNi0wMi0xNCcsZW5kOicyMDI2LTAzLTAyJ30se25hbWU6J1ByaW50ZW1wcycsc3RhcnQ6JzIwMjYtMDQtMTEnLGVuZDonMjAyNi0wNC0yNyd9XSwKICAgICAgICAgICAgQzpbe25hbWU6J0hpdmVyJyxzdGFydDonMjAyNi0wMi0yMScsZW5kOicyMDI2LTAzLTA5J30se25hbWU6J1ByaW50ZW1wcycsc3RhcnQ6JzIwMjYtMDQtMTgnLGVuZDonMjAyNi0wNS0wNCd9XQogICAgICAgIH07CiAgICAgICAgYXBwRGF0YS5jYWxlbmRhciA9IGFwcERhdGEuY2FsZW5kYXIuZmlsdGVyKGZ1bmN0aW9uKGMpeyByZXR1cm4gIWMudmFjT2ZmaWNpZWw7IH0pOwogICAgICAgIHZhciBwZXJpb2RzID0gVkFDQU5DRVMuYWxsLmNvbmNhdChWQUNBTkNFU1t6b25lXXx8W10pOwogICAgICAgIHZhciBhZGRlZCA9IDA7CiAgICAgICAgcGVyaW9kcy5mb3JFYWNoKGZ1bmN0aW9uKHYpIHsKICAgICAgICAgICAgdmFyIGlkID0gJ3ZhY18nK3YubmFtZS5yZXBsYWNlKC9ccy9nLCdfJykrJ18nK3Yuc3RhcnQ7CiAgICAgICAgICAgIGFwcERhdGEuY2FsZW5kYXIucHVzaCh7aWQ6aWQsZGF0ZTp2LnN0YXJ0LHRhc2s6J1x1ezFGM0Q2fSBEw6lidXQgVmFjLiAnK3YubmFtZSsnICgnK3pvbmVOYW1lKycpJyx2YWNPZmZpY2llbDp0cnVlfSk7CiAgICAgICAgICAgIGFwcERhdGEuY2FsZW5kYXIucHVzaCh7aWQ6aWQrJ19lbmQnLGRhdGU6di5lbmQsdGFzazonXHV7MUY0REF9IFJlcHJpc2UgJyt2Lm5hbWUrJyAoJyt6b25lTmFtZSsnKScsdmFjT2ZmaWNpZWw6dHJ1ZX0pOwogICAgICAgICAgICBhZGRlZCsrOwogICAgICAgIH0pOwogICAgICAgIHZhciBuZXdWQUMgPSB7YWxsOls0Myw0NCw1MiwxXSxBOls3LDgsMTUsMTZdLEI6WzgsOSwxNiwxN10sQzpbOSwxMCwxNywxOF19OwogICAgICAgIFZBQyA9IG5ld1ZBQzsKICAgICAgICBzYXZlRGF0YSgpOyByZW5kZXJDYWxlbmRhcigpOwogICAgICAgIGlmKHR5cGVvZiBjaGVja0RhaWx5VGFza3MgPT09ICdmdW5jdGlvbicpIGNoZWNrRGFpbHlUYXNrcygpOwogICAgICAgIGFsZXJ0KCdcdTI3MDUgQ2FsZW5kcmllciBtaXMgw6Agam91ciAoZG9ubsOpZXMgaW50w6lncsOpZXMpXG5cbicgKyB6b25lTmFtZSArICcg4oCUICcgKyBhZGRlZCArICcgcMOpcmlvZGUocylcblxu4pqgIEFQSSBpbmRpc3BvbmlibGUsIGRvbm7DqWVzIDIwMjUtMjAyNiB1dGlsaXPDqWVzLicpOwogICAgfQoKCiAgICAKICAgIC8vIOKVkOKVkOKVkCBQUk9Dw4lEVVJFUyDilZDilZDilZAKICAgIHZhciBQUk9DX0NPTE9SUz17QTonIzNCODJGNicsQjonIzhCNUNGNicsQzonI0VDNDg5OScsRDonI0VGNDQ0NCcsRTonI0Y5NzMxNicsRjonIzZCNzI4MCcsRzonIzZCNzI4MCcsSDonIzZCNzI4MCcsSTonI0VBQjMwOCcsSjonIzZCNzI4MCcsSzonIzZCNzI4MCcsTDonIzZCNzI4MCcsTTonIzZCNzI4MCcsTjonIzIyQzU1RScsTzonIzEwQjk4MScsUDonIzYzNjZGMScsUTonIzZCNzI4MCcsUjonI0E4NTVGNycsUzonI0ZCNzE4NScsVDonIzZCNzI4MCcsVTonIzZCNzI4MCcsVjonIzZCNzI4MCcsVzonIzZCNzI4MCcsWDonIzZCNzI4MCcsWTonIzZCNzI4MCcsWjonIzZCNzI4MCd9OwogICAgZnVuY3Rpb24gZ2V0UHJvY0NvbG9yKGNvZGUpe2lmKCFjb2RlKXJldHVybicjODg4Jzt2YXIgYz1jb2RlLnRyaW0oKS50b1VwcGVyQ2FzZSgpO2lmKGMuaW5kZXhPZignUE8nKT09PTApcmV0dXJuJyMwNkI2RDQnO2lmKGMuaW5kZXhPZignUkgnKT09PTApcmV0dXJuJyNBODU1RjcnO3ZhciBsPWMuY2hhckF0KDApO3JldHVybiBQUk9DX0NPTE9SU1tsXXx8JyM4ODgnO30KICAgIHdpbmRvdy53aW5kb3cuX3Byb2NFZGl0SWQ9bnVsbDsKICAgIGZ1bmN0aW9uIG9wZW5Qcm9jTW9kYWwoaWQpewogICAgICAgIHdpbmRvdy5fcHJvY0VkaXRJZD1pZHx8bnVsbDsKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJvY01vZC10aXRsZScpLnRleHRDb250ZW50PWlkPydNb2RpZmllciBsYSBwcm9jw6lkdXJlJzonTm91dmVsbGUgcHJvY8OpZHVyZSc7CiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Byb2MtZGVsLWJ0bicpLnN0eWxlLmRpc3BsYXk9aWQ/Jyc6J25vbmUnOwogICAgICAgIGlmKGlkKXsKICAgICAgICAgICAgdmFyIHA9KGFwcERhdGEucHJvY2VkdXJlc3x8W10pLmZpbmQoZnVuY3Rpb24oeCl7cmV0dXJuIHguaWQ9PT1pZDt9KTsKICAgICAgICAgICAgaWYocCl7CiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJvYy1jb2RlJykudmFsdWU9cC5jb2RlfHwnJzsKICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcm9jLXRpdGxlJykudmFsdWU9cC50aXRsZXx8Jyc7CiAgICAgICAgICAgICAgICB2YXIgc2VsPWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcm9jLWNhdCcpOwogICAgICAgICAgICAgICAgdmFyIGZvdW5kPWZhbHNlOwogICAgICAgICAgICAgICAgZm9yKHZhciBpPTA7aTxzZWwub3B0aW9ucy5sZW5ndGg7aSsrKXtpZihzZWwub3B0aW9uc1tpXS52YWx1ZT09PXAuY2F0KXtmb3VuZD10cnVlO2JyZWFrO319CiAgICAgICAgICAgICAgICBpZighZm91bmQmJnAuY2F0KXt2YXIgb3B0PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ29wdGlvbicpO29wdC52YWx1ZT1wLmNhdDtvcHQudGV4dD1wLmNhdDtzZWwuaW5zZXJ0QmVmb3JlKG9wdCxzZWwucXVlcnlTZWxlY3Rvcignb3B0aW9uW3ZhbHVlPSJfX25ld19fIl0nKSk7fTsKICAgICAgICAgICAgICAgIHNlbC52YWx1ZT1wLmNhdHx8Jyc7CiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJvYy1hbm5lZScpLmNoZWNrZWQ9ISFwLmFubmVlOwogICAgICAgICAgICAgICAgaWYocC5hbm5lZSl7CiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Byb2Mtd3MnKS52YWx1ZT0nJzsKICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJvYy13ZScpLnZhbHVlPScnOwogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcm9jLXdzJykuZGlzYWJsZWQ9dHJ1ZTsKICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJvYy13ZScpLmRpc2FibGVkPXRydWU7CiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Byb2Mtd3MnKS5zdHlsZS5vcGFjaXR5PScuNCc7CiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Byb2Mtd2UnKS5zdHlsZS5vcGFjaXR5PScuNCc7CiAgICAgICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJvYy13cycpLnZhbHVlPXAud3N0YXJ0fHwnJzsKICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJvYy13ZScpLnZhbHVlPXAud2VuZHx8Jyc7CiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Byb2Mtd3MnKS5kaXNhYmxlZD1mYWxzZTsKICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJvYy13ZScpLmRpc2FibGVkPWZhbHNlOwogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcm9jLXdzJykuc3R5bGUub3BhY2l0eT0nMSc7CiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Byb2Mtd2UnKS5zdHlsZS5vcGFjaXR5PScxJzsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcm9jLXoyJykuaW5uZXJIVE1MPXAuem9uZTJ8fCcnOwogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Byb2MtejMnKS5pbm5lckhUTUw9cC56b25lM3x8Jyc7CiAgICAgICAgICAgIH0KICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Byb2MtY29kZScpLnZhbHVlPScnOwogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJvYy10aXRsZScpLnZhbHVlPScnOwogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJvYy1jYXQnKS52YWx1ZT0nJzsKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Byb2Mtd3MnKS52YWx1ZT0nJzsKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Byb2Mtd2UnKS52YWx1ZT0nJzsKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Byb2MtYW5uZWUnKS5jaGVja2VkPWZhbHNlOwogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJvYy13cycpLmRpc2FibGVkPWZhbHNlOwogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJvYy13ZScpLmRpc2FibGVkPWZhbHNlOwogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJvYy13cycpLnN0eWxlLm9wYWNpdHk9JzEnOwogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJvYy13ZScpLnN0eWxlLm9wYWNpdHk9JzEnOwogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJvYy16MicpLmlubmVySFRNTD0nJzsKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Byb2MtejMnKS5pbm5lckhUTUw9Jyc7CiAgICAgICAgfQogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcm9jTW9kJykuc3R5bGUuZGlzcGxheT0nZmxleCc7CiAgICB9CiAgICBmdW5jdGlvbiBjbG9zZVByb2NNb2RhbCgpe3ZhciBwbT1kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJvY01vZCcpO3BtLnN0eWxlLmRpc3BsYXk9J25vbmUnO3BtLmNsYXNzTGlzdC5yZW1vdmUoJ29wZW4nKTt3aW5kb3cuX3Byb2NFZGl0SWQ9bnVsbDt9CiAgICBmdW5jdGlvbiBwcm9jSW5zZXJ0SWNvbih0eXBlKXsKICAgICAgICB2YXIgaWNvbnM9e21haWw6JzxzcGFuIGNsYXNzPSJwcm9jLWljb24tbWFpbCI+PGkgY2xhc3M9ImZhcyBmYS1lbnZlbG9wZSI+PC9pPjwvc3Bhbj4nLGFsZXJ0Oic8c3BhbiBjbGFzcz0icHJvYy1pY29uLWFsZXJ0Ij48aSBjbGFzcz0iZmFzIGZhLWV4Y2xhbWF0aW9uIj48L2k+PC9zcGFuPicsaWRlYTonPHNwYW4gY2xhc3M9InByb2MtaWNvbi1pZGVhIj48aSBjbGFzcz0iZmFzIGZhLWxpZ2h0YnVsYiI+PC9pPjwvc3Bhbj4nfTsKICAgICAgICBkb2N1bWVudC5leGVjQ29tbWFuZCgnaW5zZXJ0SFRNTCcsZmFsc2UsaWNvbnNbdHlwZV0rJyZuYnNwOycpOwogICAgfQogICAgZnVuY3Rpb24gc2F2ZVByb2MoKXsKICAgICAgICB0cnl7CiAgICAgICAgdmFyIHJhd0NvZGU9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Byb2MtY29kZScpLnZhbHVlLnRyaW0oKS50b1VwcGVyQ2FzZSgpOwogICAgICAgIHZhciBjb2RlPXJhd0NvZGUucmVwbGFjZSgvXihbQS1aXSspKFxkKS8sJyQxICQyJyk7CiAgICAgICAgdmFyIHRpdGxlPWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcm9jLXRpdGxlJykudmFsdWUudHJpbSgpOwogICAgICAgIGlmKCFjb2RlfHwhdGl0bGUpe2FsZXJ0KCdDb2RlIGV0IHRpdHJlIHJlcXVpcy4nKTtyZXR1cm47fQogICAgICAgIGlmKCFhcHBEYXRhLnByb2NlZHVyZXMpYXBwRGF0YS5wcm9jZWR1cmVzPVtdOwogICAgICAgIHZhciBhbm5lZT1kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJvYy1hbm5lZScpLmNoZWNrZWQ7CiAgICAgICAgdmFyIHdzPWFubmVlPzA6KHBhcnNlSW50KGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcm9jLXdzJykudmFsdWUpfHwwKTsKICAgICAgICB2YXIgd2U9YW5uZWU/MDoocGFyc2VJbnQoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Byb2Mtd2UnKS52YWx1ZSl8fHdzKTsKICAgICAgICB2YXIgb2JqPXtpZDp3aW5kb3cuX3Byb2NFZGl0SWR8fERhdGUubm93KCkudG9TdHJpbmcoKSxjb2RlOmNvZGUsdGl0bGU6dGl0bGUsY2F0OmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcm9jLWNhdCcpLnZhbHVlLHdzdGFydDp3cyx3ZW5kOndlLGFubmVlOmFubmVlLHpvbmUyOmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcm9jLXoyJykuaW5uZXJIVE1MLHpvbmUzOmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcm9jLXozJykuaW5uZXJIVE1MLHVwZGF0ZWQ6bmV3IERhdGUoKS50b0lTT1N0cmluZygpLnNwbGl0KCdUJylbMF19OwogICAgICAgIGlmKHdpbmRvdy5fcHJvY0VkaXRJZCl7dmFyIGlkeD1hcHBEYXRhLnByb2NlZHVyZXMuZmluZEluZGV4KGZ1bmN0aW9uKHgpe3JldHVybiB4LmlkPT09d2luZG93Ll9wcm9jRWRpdElkO30pO2lmKGlkeD49MClhcHBEYXRhLnByb2NlZHVyZXNbaWR4XT1vYmo7fQogICAgICAgIGVsc2V7YXBwRGF0YS5wcm9jZWR1cmVzLnB1c2gob2JqKTt9CiAgICAgICAgc2F2ZURhdGEoKTtjbG9zZVByb2NNb2RhbCgpO3JlbmRlclByb2NlZHVyZXMoKTsKICAgICAgICB9Y2F0Y2goZXJyKXthbGVydCgnRXJyZXVyIHNhdXZlZ2FyZGU6ICcrZXJyLm1lc3NhZ2UpO2NvbnNvbGUuZXJyb3IoZXJyKTt9CiAgICB9CiAgICBmdW5jdGlvbiBkZWxQcm9jKCl7CiAgICAgICAgaWYoIV9wcm9jRWRpdElkKXJldHVybjtpZighY29uZmlybSgnU3VwcHJpbWVyIGNldHRlIHByb2PDqWR1cmUgPycpKXJldHVybjsKICAgICAgICBhcHBEYXRhLnByb2NlZHVyZXM9KGFwcERhdGEucHJvY2VkdXJlc3x8W10pLmZpbHRlcihmdW5jdGlvbih4KXtyZXR1cm4geC5pZCE9PXdpbmRvdy5fcHJvY0VkaXRJZDt9KTsKICAgICAgICBzYXZlRGF0YSgpO2Nsb3NlUHJvY01vZGFsKCk7cmVuZGVyUHJvY2VkdXJlcygpOwogICAgfQogICAgd2luZG93Ll9wcm9jRmlsdGVyQ2F0PScnOwogICAgCiAgICBmdW5jdGlvbiBmb3JtYXREYXRlRlIoZCkgewogICAgICAgIGlmKCFkKSByZXR1cm4gJyc7CiAgICAgICAgdmFyIGR0ID0gKGQgaW5zdGFuY2VvZiBEYXRlKSA/IGQgOiBuZXcgRGF0ZShkKTsKICAgICAgICBpZihpc05hTihkdC5nZXRUaW1lKCkpKSByZXR1cm4gZDsKICAgICAgICByZXR1cm4gZHQudG9Mb2NhbGVEYXRlU3RyaW5nKCdmci1GUicse2RheTonMi1kaWdpdCcsbW9udGg6J2xvbmcnLHllYXI6J251bWVyaWMnfSk7CiAgICB9CgogICAgCiAgICAvLyBBbm7DqWUgc2NvbGFpcmUgY291cmFudGUgKGV4OiAiMjAyNS0yMDI2IikKICAgIGZ1bmN0aW9uIGdldEN1cnJlbnRTY2hvb2xZZWFyKCl7CiAgICAgICAgdmFyIG5vdz1uZXcgRGF0ZSgpLG09bm93LmdldE1vbnRoKCkrMSx5PW5vdy5nZXRGdWxsWWVhcigpOwogICAgICAgIHJldHVybiBtPj04Pyh5KyctJysoeSsxKSk6KCh5LTEpKyctJyt5KTsKICAgIH0KICAgIC8vIEF1dG8tcmVzZXQ6IHLDqXRhYmxpdCBsZXMgcHJvY8OpZHVyZXMgdGVybWluw6llcyBkJ3VuZSBhbm7DqWUgcHLDqWPDqWRlbnRlCiAgICBmdW5jdGlvbiBhdXRvUmVzZXREb25lKCl7CiAgICAgICAgdmFyIHN5PWdldEN1cnJlbnRTY2hvb2xZZWFyKCk7dmFyIGNoYW5nZWQ9ZmFsc2U7CiAgICAgICAgKGFwcERhdGEucHJvY2VkdXJlc3x8W10pLmZvckVhY2goZnVuY3Rpb24ocCl7CiAgICAgICAgICAgIGlmKHAuZG9uZSYmcC5kb25lU1kmJnAuZG9uZVNZIT09c3kpe3AuZG9uZT1mYWxzZTtwLmRvbmVTWT0nJztjaGFuZ2VkPXRydWU7fQogICAgICAgIH0pOwogICAgICAgIChhcHBEYXRhLmdhbnR0fHxbXSkuZm9yRWFjaChmdW5jdGlvbihnKXsKICAgICAgICAgICAgaWYoZy5kb25lJiZnLmRvbmVTWSYmZy5kb25lU1khPT1zeSl7Zy5kb25lPWZhbHNlO2cuZG9uZVNZPScnO2NoYW5nZWQ9dHJ1ZTt9CiAgICAgICAgfSk7CiAgICAgICAgaWYoY2hhbmdlZClzYXZlRGF0YSgpOwogICAgfQoKICAgIGZ1bmN0aW9uIG5hdENvZGVTb3J0KGEsYil7CiAgICAgICAgdmFyIGNhPShhLmNvZGV8fCcnKSxjYj0oYi5jb2RlfHwnJyk7CiAgICAgICAgdmFyIHBhPWNhLm1hdGNoKC9eKFtBLVphLXpdKylccyooXGQqKSQvKXx8WycnLCcnLDBdOwogICAgICAgIHZhciBwYj1jYi5tYXRjaCgvXihbQS1aYS16XSspXHMqKFxkKikkLyl8fFsnJywnJywwXTsKICAgICAgICB2YXIgbGE9cGFbMV0udG9VcHBlckNhc2UoKSxsYj1wYlsxXS50b1VwcGVyQ2FzZSgpOwogICAgICAgIGlmKGxhPGxiKXJldHVybiAtMTtpZihsYT5sYilyZXR1cm4gMTsKICAgICAgICByZXR1cm4ocGFyc2VJbnQocGFbMl0pfHwwKS0ocGFyc2VJbnQocGJbMl0pfHwwKTsKICAgIH0KICAgIGZ1bmN0aW9uIHJlbmRlclByb2NlZHVyZXMoKXsKICAgICAgICB2YXIgcHJvY3M9KGFwcERhdGEucHJvY2VkdXJlc3x8W10pLnNsaWNlKCkuc29ydChuYXRDb2RlU29ydCk7CiAgICAgICAgdmFyIGNhdHM9e307cHJvY3MuZm9yRWFjaChmdW5jdGlvbihwKXtpZihwLmNhdCljYXRzW3AuY2F0XT0oY2F0c1twLmNhdF18fDApKzE7fSk7CiAgICAgICAgdmFyIGZoPSc8YnV0dG9uIGNsYXNzPSInKyghX3Byb2NGaWx0ZXJDYXQ/J2FjdGl2ZSc6JycpKyciIG9uY2xpY2s9Il9wcm9jRmlsdGVyQ2F0PVwnXCc7cmVuZGVyUHJvY2VkdXJlcygpIj5Ub3VzICgnK3Byb2NzLmxlbmd0aCsnKTwvYnV0dG9uPic7CiAgICAgICAgT2JqZWN0LmtleXMoY2F0cykuc29ydCgpLmZvckVhY2goZnVuY3Rpb24oYyl7ZmgrPSc8YnV0dG9uIGNsYXNzPSInKyhfcHJvY0ZpbHRlckNhdD09PWM/J2FjdGl2ZSc6JycpKyciIG9uY2xpY2s9Il9wcm9jRmlsdGVyQ2F0PVwnJytjLnJlcGxhY2UoLycvZywiXFwnIikrJ1wnO3JlbmRlclByb2NlZHVyZXMoKSI+JytjKycgKCcrY2F0c1tjXSsnKTwvYnV0dG9uPic7fSk7CiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Byb2MtZmlsdGVycycpLmlubmVySFRNTD1maDsKICAgICAgICB2YXIgZmlsdGVyZWQ9X3Byb2NGaWx0ZXJDYXQ/cHJvY3MuZmlsdGVyKGZ1bmN0aW9uKHApe3JldHVybiBwLmNhdD09PV9wcm9jRmlsdGVyQ2F0O30pOnByb2NzOwogICAgICAgIHZhciBoPScnOwogICAgICAgIGlmKCFmaWx0ZXJlZC5sZW5ndGgpe2g9JzxkaXYgc3R5bGU9InRleHQtYWxpZ246Y2VudGVyO3BhZGRpbmc6NDBweDtjb2xvcjojOTk5Ij48aSBjbGFzcz0iZmFzIGZhLWJvb2siIHN0eWxlPSJmb250LXNpemU6MnJlbTttYXJnaW4tYm90dG9tOjEwcHg7ZGlzcGxheTpibG9jayI+PC9pPkF1Y3VuZSBwcm9jw6lkdXJlPC9kaXY+Jzt9CiAgICAgICAgZmlsdGVyZWQuZm9yRWFjaChmdW5jdGlvbihwKXsKICAgICAgICAgICAgdmFyIGNvbD1nZXRQcm9jQ29sb3IocC5jb2RlKTsKICAgICAgICAgICAgaCs9JzxkaXYgY2xhc3M9InByb2MtY2FyZCIgb25jbGljaz0idmlld1Byb2MoXCcnK3AuaWQrJ1wnKSIgc3R5bGU9ImRpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXI7Z2FwOjEwcHg7cGFkZGluZzoxMHB4IDE0cHgiPic7CiAgICAgICAgICAgIGgrPSc8c3BhbiBjbGFzcz0icHJvYy1jb2RlIiBzdHlsZT0iYmFja2dyb3VuZDonK2NvbCsnO3BhZGRpbmc6NnB4IDEwcHg7Ym9yZGVyLXJhZGl1czo4cHg7Zm9udC13ZWlnaHQ6NzAwO2ZvbnQtc2l6ZTouOHJlbTtjb2xvcjojZmZmO21pbi13aWR0aDo0MHB4O3RleHQtYWxpZ246Y2VudGVyIj4nKyhwLmNvZGV8fCc/JykrJzwvc3Bhbj4nOwogICAgICAgICAgICBoKz0nPHNwYW4gc3R5bGU9ImZvbnQtd2VpZ2h0OjYwMDtmb250LXNpemU6Ljg4cmVtO2NvbG9yOiMzMzM7ZmxleDoxO3doaXRlLXNwYWNlOm5vd3JhcDtvdmVyZmxvdzpoaWRkZW47dGV4dC1vdmVyZmxvdzplbGxpcHNpcyI+JysocC50aXRsZXx8J1NhbnMgdGl0cmUnKSsnPC9zcGFuPic7CiAgICAgICAgICAgIGgrPSc8c3BhbiBzdHlsZT0iZm9udC1zaXplOi43MnJlbTtjb2xvcjojOTk5O3doaXRlLXNwYWNlOm5vd3JhcCI+Jytmb3JtYXREYXRlRlIocC51cGRhdGVkKSsnPC9zcGFuPic7CiAgICAgICAgICAgIGgrPShwLmNhdD8nPHNwYW4gY2xhc3M9InByb2MtY2FyZC1jYXQiIHN0eWxlPSJ3aGl0ZS1zcGFjZTpub3dyYXAiPicrcC5jYXQrJzwvc3Bhbj4nOicnKTsKICAgICAgICAgICAgaCs9JzxkaXYgY2xhc3M9InByb2MtY2FyZC1hY3Rpb25zIiBzdHlsZT0iZGlzcGxheTpmbGV4O2dhcDo0cHg7bWFyZ2luLWxlZnQ6NHB4Ij48YnV0dG9uIG9uY2xpY2s9ImV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO29wZW5Qcm9jTW9kYWwoXCcnK3AuaWQrJ1wnKSIgdGl0bGU9Ik1vZGlmaWVyIj48aSBjbGFzcz0iZmFzIGZhLXBlbiI+PC9pPjwvYnV0dG9uPic7CiAgICAgICAgICAgIGgrPSc8YnV0dG9uIG9uY2xpY2s9ImV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO3ByaW50UHJvYyhcJycrcC5pZCsnXCcpIiB0aXRsZT0iSW1wcmltZXIiPjxpIGNsYXNzPSJmYXMgZmEtcHJpbnQiPjwvaT48L2J1dHRvbj48L2Rpdj48L2Rpdj4nOwogICAgICAgIH0pOwogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcm9jLWxpc3QnKS5pbm5lckhUTUw9aDsKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJvYy12aWV3LWFyZWEnKS5zdHlsZS5kaXNwbGF5PSdub25lJzsKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJvYy1saXN0Jykuc3R5bGUuZGlzcGxheT0nJzsKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJvYy1maWx0ZXJzJykuc3R5bGUuZGlzcGxheT0nJzsKICAgIH0KICAgIGZ1bmN0aW9uIHZpZXdQcm9jKGlkKXsKICAgICAgICB2YXIgcD0oYXBwRGF0YS5wcm9jZWR1cmVzfHxbXSkuZmluZChmdW5jdGlvbih4KXtyZXR1cm4geC5pZD09PWlkO30pO2lmKCFwKXJldHVybjsKICAgICAgICB2YXIgY29sPWdldFByb2NDb2xvcihwLmNvZGUpOwogICAgICAgIHZhciBoPSc8ZGl2IGNsYXNzPSJwcm9jLXZpZXciPjxkaXYgY2xhc3M9InByb2Mtdmlldy1oZWFkZXIiIHN0eWxlPSJiYWNrZ3JvdW5kOicrY29sKyciPjxoMj4nKyhwLnRpdGxlfHwnJykrJzwvaDI+PGRpdiBjbGFzcz0icHYtY29kZSI+JysocC5jb2RlfHwnJykrKHAuY2F0Pycg4oCUICcrcC5jYXQ6JycpKyc8L2Rpdj48L2Rpdj48ZGl2IGNsYXNzPSJwcm9jLXZpZXctYm9keSI+JzsKICAgICAgICBoKz0nPGRpdiBzdHlsZT0ibWFyZ2luLWJvdHRvbToxNnB4O2Rpc3BsYXk6ZmxleDtnYXA6OHB4Ij48YnV0dG9uIGNsYXNzPSJtYiBtYi1vayIgb25jbGljaz0ib3BlblByb2NNb2RhbChcJycraWQrJ1wnKSI+PGkgY2xhc3M9ImZhcyBmYS1wZW4iPjwvaT4gTW9kaWZpZXI8L2J1dHRvbj48YnV0dG9uIGNsYXNzPSJtYiIgc3R5bGU9ImJhY2tncm91bmQ6IzU1NTtjb2xvcjojZmZmIiBvbmNsaWNrPSJwcmludFByb2MoXCcnK2lkKydcJykiPjxpIGNsYXNzPSJmYXMgZmEtcHJpbnQiPjwvaT4gSW1wcmltZXI8L2J1dHRvbj48YnV0dG9uIGNsYXNzPSJtYiBtYi1jIiBvbmNsaWNrPSJyZW5kZXJQcm9jZWR1cmVzKCkiPjxpIGNsYXNzPSJmYXMgZmEtYXJyb3ctbGVmdCI+PC9pPiBSZXRvdXI8L2J1dHRvbj48L2Rpdj4nOwogICAgICAgIGlmKHAuem9uZTIpaCs9JzxkaXYgY2xhc3M9InByb2Mtem9uZSIgc3R5bGU9ImJvcmRlci1sZWZ0LWNvbG9yOicrY29sKyciPjxoND5BY3Rpb25zIC8gw4l0YXBlczwvaDQ+PGRpdiBjbGFzcz0icHJvYy16b25lLWNvbnRlbnQiPicrcC56b25lMisnPC9kaXY+PC9kaXY+JzsKICAgICAgICBpZihwLnpvbmUzKWgrPSc8ZGl2IGNsYXNzPSJwcm9jLXpvbmUiIHN0eWxlPSJib3JkZXItbGVmdC1jb2xvcjonK2NvbCsnIj48aDQ+Tm90ZXM8L2g0PjxkaXYgY2xhc3M9InByb2Mtem9uZS1jb250ZW50Ij4nK3Auem9uZTMrJzwvZGl2PjwvZGl2Pic7CiAgICAgICAgaCs9JzwvZGl2PjwvZGl2Pic7CiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Byb2Mtdmlldy1hcmVhJykuaW5uZXJIVE1MPWg7CiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Byb2Mtdmlldy1hcmVhJykuc3R5bGUuZGlzcGxheT0nJzsKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJvYy1saXN0Jykuc3R5bGUuZGlzcGxheT0nbm9uZSc7CiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Byb2MtZmlsdGVycycpLnN0eWxlLmRpc3BsYXk9J25vbmUnOwogICAgfQogICAgZnVuY3Rpb24gcHJpbnRQcm9jKGlkKXsKICAgICAgICB2YXIgcD0oYXBwRGF0YS5wcm9jZWR1cmVzfHxbXSkuZmluZChmdW5jdGlvbih4KXtyZXR1cm4geC5pZD09PWlkO30pO2lmKCFwKXJldHVybjsKICAgICAgICB2YXIgY29sPWdldFByb2NDb2xvcihwLmNvZGUpOwogICAgICAgIC8vIExpZ2h0ZW4gY29sb3IgZm9yIHpvbmUgYmcKICAgICAgICBmdW5jdGlvbiBoZXhUb1JnYmEoaGV4LGEpewogICAgICAgICAgICB2YXIgcj1wYXJzZUludChoZXguc2xpY2UoMSwzKSwxNiksZz1wYXJzZUludChoZXguc2xpY2UoMyw1KSwxNiksYj1wYXJzZUludChoZXguc2xpY2UoNSw3KSwxNik7CiAgICAgICAgICAgIHJldHVybidyZ2JhKCcrcisnLCcrZysnLCcrYisnLCcrYSsnKSc7CiAgICAgICAgfQogICAgICAgIHZhciBsaWdodENvbD1oZXhUb1JnYmEoY29sLDAuMik7CiAgICAgICAgdmFyIGxvZ29TcmM9KGFwcERhdGEuc2V0dGluZ3MmJmFwcERhdGEuc2V0dGluZ3MubG9nbyl8fCcnOwogICAgICAgIHZhciB0b2RheT1uZXcgRGF0ZSgpLnRvTG9jYWxlRGF0ZVN0cmluZygnZnItRlInLHtkYXk6JzItZGlnaXQnLG1vbnRoOidsb25nJyx5ZWFyOidudW1lcmljJ30pOwogICAgICAgIHZhciB1c2VyTmFtZT0oYXBwRGF0YS5zZXR0aW5ncyYmYXBwRGF0YS5zZXR0aW5ncy51c2VyKXx8Jyc7CiAgICAgICAgdmFyIGh0bWw9Jyc7CiAgICAgICAgaHRtbCs9JzxzdHlsZT5AcGFnZXtzaXplOkE0O21hcmdpbjo1bW0gNW1tIDI1bW0gNW1tfWJvZHl7bWFyZ2luOjA7cGFkZGluZzowfTwvc3R5bGU+JzsKICAgICAgICBodG1sKz0nPGRpdiBzdHlsZT0iZm9udC1mYW1pbHk6QXJpYWwsc2Fucy1zZXJpZjtwYWRkaW5nLWJvdHRvbToyNW1tIj4nOwogICAgICAgIGh0bWwrPSc8ZGl2IHN0eWxlPSJiYWNrZ3JvdW5kOicrY29sKyc7Y29sb3I6I2ZmZjtwYWRkaW5nOjEwcHggMTRweDstd2Via2l0LXByaW50LWNvbG9yLWFkanVzdDpleGFjdDtwcmludC1jb2xvci1hZGp1c3Q6ZXhhY3Q7dGV4dC1hbGlnbjpyaWdodCI+JzsKICAgICAgICBodG1sKz0nPGgxIHN0eWxlPSJtYXJnaW46MDtmb250LXNpemU6MS4zcmVtO2ZvbnQtd2VpZ2h0OjcwMCI+JytwLmNvZGUrJyAtICcrcC50aXRsZSsnPC9oMT4nOwogICAgICAgIGh0bWwrPSc8L2Rpdj4nOwogICAgICAgIGh0bWwrPSc8ZGl2IHN0eWxlPSJwYWRkaW5nOjhweCAxMHB4O2NvbG9yOiMzMzMiPic7CiAgICAgICAgaWYocC56b25lMil7CiAgICAgICAgaHRtbCs9JzxkaXYgc3R5bGU9Im1hcmdpbjo4cHggMDtwYWRkaW5nOjAiPic7CiAgICAgICAgaHRtbCs9JzxkaXYgc3R5bGU9ImJhY2tncm91bmQ6JytsaWdodENvbCsnO3BhZGRpbmc6OHB4IDE0cHg7Zm9udC13ZWlnaHQ6NzAwO2ZvbnQtc2l6ZTouODVyZW07Y29sb3I6IzMzMzt0ZXh0LXRyYW5zZm9ybTp1cHBlcmNhc2U7bGV0dGVyLXNwYWNpbmc6LjVweDtib3JkZXItcmFkaXVzOjZweCA2cHggMCAwOy13ZWJraXQtcHJpbnQtY29sb3ItYWRqdXN0OmV4YWN0O3ByaW50LWNvbG9yLWFkanVzdDpleGFjdCI+QWN0aW9ucyAvIMOJdGFwZXM8L2Rpdj4nOwogICAgICAgIGh0bWwrPSc8ZGl2IHN0eWxlPSJwYWRkaW5nOjhweCAxNHB4O2ZvbnQtc2l6ZTouOXJlbTtsaW5lLWhlaWdodDoxLjY1O2NvbG9yOiM0NDQ7Ym9yZGVyLWxlZnQ6NHB4IHNvbGlkICcrY29sKyciPicrcC56b25lMisnPC9kaXY+PC9kaXY+Jzt9CiAgICAgICAgaWYocC56b25lMyl7CiAgICAgICAgaHRtbCs9JzxkaXYgc3R5bGU9Im1hcmdpbjo4cHggMDtwYWRkaW5nOjAiPic7CiAgICAgICAgaHRtbCs9JzxkaXYgc3R5bGU9ImJhY2tncm91bmQ6JytsaWdodENvbCsnO3BhZGRpbmc6OHB4IDE0cHg7Zm9udC13ZWlnaHQ6NzAwO2ZvbnQtc2l6ZTouODVyZW07Y29sb3I6IzMzMzt0ZXh0LXRyYW5zZm9ybTp1cHBlcmNhc2U7bGV0dGVyLXNwYWNpbmc6LjVweDtib3JkZXItcmFkaXVzOjZweCA2cHggMCAwOy13ZWJraXQtcHJpbnQtY29sb3ItYWRqdXN0OmV4YWN0O3ByaW50LWNvbG9yLWFkanVzdDpleGFjdCI+Tm90ZXMgLyBSZW1hcnF1ZXM8L2Rpdj4nOwogICAgICAgIGh0bWwrPSc8ZGl2IHN0eWxlPSJwYWRkaW5nOjhweCAxNHB4O2ZvbnQtc2l6ZTouOXJlbTtsaW5lLWhlaWdodDoxLjY1O2NvbG9yOiM0NDQ7Ym9yZGVyLWxlZnQ6NHB4IHNvbGlkICcrY29sKyciPicrcC56b25lMysnPC9kaXY+PC9kaXY+Jzt9CiAgICAgICAgaHRtbCs9JzwvZGl2PjwvZGl2Pic7CiAgICAgICAgaHRtbCs9JzxkaXYgc3R5bGU9InBvc2l0aW9uOmZpeGVkO2JvdHRvbTowO2xlZnQ6MDtyaWdodDowO2Rpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXI7anVzdGlmeS1jb250ZW50OnNwYWNlLWJldHdlZW47cGFkZGluZzo2cHggMTBweDtib3JkZXItdG9wOjJweCBzb2xpZCAjY2NjO2ZvbnQtZmFtaWx5OkFyaWFsLHNhbnMtc2VyaWY7LXdlYmtpdC1wcmludC1jb2xvci1hZGp1c3Q6ZXhhY3Q7cHJpbnQtY29sb3ItYWRqdXN0OmV4YWN0O2JhY2tncm91bmQ6I2ZmZiI+JzsKICAgICAgICBpZihsb2dvU3JjKWh0bWwrPSc8aW1nIHNyYz0iJytsb2dvU3JjKyciIHN0eWxlPSJoZWlnaHQ6MWNtIj4nOwogICAgICAgIGh0bWwrPSc8ZGl2IHN0eWxlPSJ0ZXh0LWFsaWduOnJpZ2h0Ij48ZGl2IHN0eWxlPSJmb250LXNpemU6LjhyZW07Zm9udC13ZWlnaHQ6NjAwO2NvbG9yOiM1NTUiPicrcC5jb2RlKycgLSAnK3AudGl0bGUrJzwvZGl2Pic7CiAgICAgICAgaHRtbCs9JzxkaXYgc3R5bGU9ImZvbnQtc2l6ZTouNjJyZW07Y29sb3I6Izk5OSI+JysodXNlck5hbWU/dXNlck5hbWUrJyAtICc6JycpK3RvZGF5Kyc8L2Rpdj48L2Rpdj4nOwogICAgICAgIGh0bWwrPSc8L2Rpdj4nOwogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcmludC16b25lJykuaW5uZXJIVE1MPWh0bWw7CiAgICAgICAgdmFyIG9sZFRpdGxlPWRvY3VtZW50LnRpdGxlO2RvY3VtZW50LnRpdGxlPXAuY29kZSsnIC0gJytwLnRpdGxlOwogICAgICAgIHRyeXt3aW5kb3cucGFyZW50LmRvY3VtZW50LnRpdGxlPXAuY29kZSsnIC0gJytwLnRpdGxlO31jYXRjaChlKXt9CiAgICAgICAgd2FpdEZvckltYWdlc1RoZW5QcmludCgpOwogICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtkb2N1bWVudC50aXRsZT1vbGRUaXRsZTt0cnl7d2luZG93LnBhcmVudC5kb2N1bWVudC50aXRsZT0nUElMT1RFIFx1MjAxNCBTdWl0ZSBkZSBEaXJlY3Rpb24nO31jYXRjaChlKXt9fSwzMDAwKTsKICAgIH0KICAgIC8vIOKVkOKVkOKVkCBTw4lQQVJBVEVVUlMg4pWQ4pWQ4pWQCiAgICBmdW5jdGlvbiBsb2FkU2VwQ29uZmlnKCl7CiAgICAgICAgdmFyIGJveD1kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2VwLWNvbmZpZycpO2lmKCFib3gpcmV0dXJuOwogICAgICAgIHZhciBpdGVtcz1kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcubWVudS1pdGVtW2RhdGEtbWVudV0nKTsKICAgICAgICB2YXIgc2Vwcz0oYXBwRGF0YS5zZXR0aW5ncyYmYXBwRGF0YS5zZXR0aW5ncy5zZXBhcmF0b3JzKXx8W107CiAgICAgICAgdmFyIGg9Jyc7CiAgICAgICAgaXRlbXMuZm9yRWFjaChmdW5jdGlvbihpdGVtKXt2YXIgbWVudUlkPWl0ZW0uZ2V0QXR0cmlidXRlKCdkYXRhLW1lbnUnKTtpZihtZW51SWQ9PT0nbWVudTEnKXJldHVybjt2YXIgbGFiZWw9aXRlbS50ZXh0Q29udGVudC50cmltKCk7dmFyIGNoZWNrZWQ9c2Vwcy5pbmRleE9mKG1lbnVJZCk+PTA/JyBjaGVja2VkJzonJztoKz0nPGxhYmVsIHN0eWxlPSJmb250LXNpemU6Ljc4cmVtO2Rpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXI7Z2FwOjZweDtjdXJzb3I6cG9pbnRlciI+PGlucHV0IHR5cGU9ImNoZWNrYm94IiB2YWx1ZT0iJyttZW51SWQrJyInK2NoZWNrZWQrJyBvbmNoYW5nZT0ic2F2ZVNlcENvbmZpZygpIj4gJytsYWJlbCsnPC9sYWJlbD4nO30pOwogICAgICAgIGJveC5pbm5lckhUTUw9aDsKICAgIH0KICAgIGZ1bmN0aW9uIHNhdmVTZXBDb25maWcoKXsKICAgICAgICB2YXIgY2hlY2tzPWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJyNzZXAtY29uZmlnIGlucHV0W3R5cGU9Y2hlY2tib3hdOmNoZWNrZWQnKTsKICAgICAgICB2YXIgc2Vwcz1bXTtjaGVja3MuZm9yRWFjaChmdW5jdGlvbihjKXtzZXBzLnB1c2goYy52YWx1ZSk7fSk7CiAgICAgICAgaWYoIWFwcERhdGEuc2V0dGluZ3MpYXBwRGF0YS5zZXR0aW5ncz17fTthcHBEYXRhLnNldHRpbmdzLnNlcGFyYXRvcnM9c2VwcztzYXZlRGF0YSgpO2FwcGx5U2VwYXJhdG9ycygpOwogICAgfQogICAgZnVuY3Rpb24gYXBwbHlTZXBhcmF0b3JzKCl7CiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLm1lbnUtc2VwYXJhdG9yJykuZm9yRWFjaChmdW5jdGlvbihzKXtzLnJlbW92ZSgpO30pOwogICAgICAgIHZhciBzZXBzPShhcHBEYXRhLnNldHRpbmdzJiZhcHBEYXRhLnNldHRpbmdzLnNlcGFyYXRvcnMpfHxbXTsKICAgICAgICBzZXBzLmZvckVhY2goZnVuY3Rpb24obWVudUlkKXt2YXIgaXRlbT1kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubWVudS1pdGVtW2RhdGEtbWVudT0iJyttZW51SWQrJyJdJyk7aWYoaXRlbSYmaXRlbS5uZXh0RWxlbWVudFNpYmxpbmcpe3ZhciBzZXA9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7c2VwLmNsYXNzTmFtZT0nbWVudS1zZXBhcmF0b3InO2l0ZW0ucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoc2VwLGl0ZW0ubmV4dEVsZW1lbnRTaWJsaW5nKTt9fSk7CiAgICB9CiAgICAvLyBFeHBvc2UgcHJvYyBmdW5jdGlvbnMgdG8gZ2xvYmFsIHNjb3BlIChJSUZFIGNsb3N1cmUpCiAgICAKICAgIC8vIFZpZXcgcHJvY2VkdXJlIGZyb20gR2FudHQgKHJlYWQtb25seSBwb3B1cCkKICAgIGZ1bmN0aW9uIHZpZXdQcm9jUmVhZG9ubHkoY29kZSkgewogICAgICAgIGlmKCFjb2RlKSByZXR1cm47CiAgICAgICAgLy8gUmVtb3ZlIGV4aXN0aW5nIHBvcHVwCiAgICAgICAgdmFyIG9sZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcm9jLXJvLXBvcHVwJyk7CiAgICAgICAgaWYob2xkKSBvbGQucmVtb3ZlKCk7CiAgICAgICAgLy8gU2VhcmNoIGluIHByb2NlZHVyZXMgZmlyc3QsIHRoZW4gZmFsbCBiYWNrIHRvIGdhbnR0IGl0ZW0KICAgICAgICB2YXIgcHJvY3MgPSBhcHBEYXRhLnByb2NlZHVyZXMgfHwgW107CiAgICAgICAgdmFyIHByb2MgPSBwcm9jcy5maW5kKGZ1bmN0aW9uKHgpeyByZXR1cm4geC5jb2RlICYmIHguY29kZS50cmltKCkudG9VcHBlckNhc2UoKSA9PT0gY29kZS50cmltKCkudG9VcHBlckNhc2UoKTsgfSk7CiAgICAgICAgdmFyIGdhbnR0SXRlbSA9IChhcHBEYXRhLmdhbnR0fHxbXSkuZmluZChmdW5jdGlvbih4KXsgcmV0dXJuIHguY29kZSAmJiB4LmNvZGUudHJpbSgpLnRvVXBwZXJDYXNlKCkgPT09IGNvZGUudHJpbSgpLnRvVXBwZXJDYXNlKCk7IH0pOwogICAgICAgIGlmKCFwcm9jICYmICFnYW50dEl0ZW0pIHsgYWxlcnQoJ0F1Y3VuZSBwcm9jw6lkdXJlIHRyb3V2w6llIGF2ZWMgbGUgY29kZSAiJyArIGNvZGUgKyAnIicpOyByZXR1cm47IH0KICAgICAgICAvLyBVc2UgcHJvY2VkdXJlIGRhdGEgaWYgYXZhaWxhYmxlLCBvdGhlcndpc2UgYnVpbGQgZnJvbSBnYW50dAogICAgICAgIHZhciB0aXRsZSA9IHByb2MgPyBwcm9jLnRpdGxlIDogKGdhbnR0SXRlbSA/IGdhbnR0SXRlbS5uYW1lIDogJycpOwogICAgICAgIHZhciBwQ29kZSA9IHByb2MgPyBwcm9jLmNvZGUgOiBjb2RlOwogICAgICAgIHZhciBjYXQgPSBwcm9jID8gcHJvYy5jYXQgOiAoZ2FudHRJdGVtID8gZ2FudHRJdGVtLmNhdCA6ICcnKTsKICAgICAgICAKICAgICAgICB2YXIgejIgPSBwcm9jID8gKHByb2Muem9uZTJ8fCcnKSA6ICcnOwogICAgICAgIHZhciB6MyA9IHByb2MgPyAocHJvYy56b25lM3x8JycpIDogKGdhbnR0SXRlbSAmJiBnYW50dEl0ZW0ubm90ZXMgPyBnYW50dEl0ZW0ubm90ZXMgOiAnJyk7CiAgICAgICAgdmFyIHBJZCA9IHByb2MgPyBwcm9jLmlkIDogbnVsbDsKICAgICAgICB2YXIgYmcgPSAodHlwZW9mIGdldFByb2NDb2xvcj09PSdmdW5jdGlvbicpID8gZ2V0UHJvY0NvbG9yKHBDb2RlKSA6ICcjMmMzZTUwJzsKICAgICAgICAvLyBCdWlsZCBwb3B1cAogICAgICAgIHZhciBoID0gJzxkaXYgc3R5bGU9InBvc2l0aW9uOmZpeGVkO3RvcDowO2xlZnQ6MDt3aWR0aDoxMDAlO2hlaWdodDoxMDAlO2JhY2tncm91bmQ6cmdiYSgwLDAsMCwuNSk7ei1pbmRleDo5OTk5O2Rpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXI7anVzdGlmeS1jb250ZW50OmNlbnRlciIgb25jbGljaz0iaWYoZXZlbnQudGFyZ2V0PT09dGhpcyl0aGlzLnJlbW92ZSgpIiBpZD0icHJvYy1yby1wb3B1cCI+JzsKICAgICAgICBoICs9ICc8ZGl2IHN0eWxlPSJiYWNrZ3JvdW5kOiNmZmY7Ym9yZGVyLXJhZGl1czoxNHB4O3dpZHRoOjgwdnc7bWF4LWhlaWdodDo4NXZoO292ZXJmbG93LXk6YXV0bztib3gtc2hhZG93OjAgMjBweCA2MHB4IHJnYmEoMCwwLDAsLjI1KSI+JzsKICAgICAgICBoICs9ICc8ZGl2IHN0eWxlPSJiYWNrZ3JvdW5kOicrYmcrJztjb2xvcjojZmZmO3BhZGRpbmc6MThweCAyMnB4O2JvcmRlci1yYWRpdXM6MTRweCAxNHB4IDAgMDtkaXNwbGF5OmZsZXg7YWxpZ24taXRlbXM6Y2VudGVyO2p1c3RpZnktY29udGVudDpzcGFjZS1iZXR3ZWVuIj4nOwogICAgICAgIGggKz0gJzxkaXY+PHNwYW4gc3R5bGU9ImZvbnQtc2l6ZToxLjFyZW07Zm9udC13ZWlnaHQ6NzAwO29wYWNpdHk6Ljk7YmFja2dyb3VuZDpyZ2JhKDI1NSwyNTUsMjU1LC4yKTtwYWRkaW5nOjRweCAxMnB4O2JvcmRlci1yYWRpdXM6NnB4O21hcmdpbi1yaWdodDoxMnB4Ij4nK3BDb2RlKyc8L3NwYW4+JzsKICAgICAgICBoICs9ICc8c3BhbiBzdHlsZT0iZm9udC1zaXplOjEuMXJlbTtmb250LXdlaWdodDo3MDAiPicrdGl0bGUrJzwvc3Bhbj48L2Rpdj4nOwogICAgICAgIGggKz0gJzxidXR0b24gb25jbGljaz0iZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXHgyN3Byb2Mtcm8tcG9wdXBceDI3KS5yZW1vdmUoKSIgc3R5bGU9ImJhY2tncm91bmQ6cmdiYSgyNTUsMjU1LDI1NSwuMik7Ym9yZGVyOm5vbmU7Y29sb3I6I2ZmZjt3aWR0aDozMnB4O2hlaWdodDozMnB4O2JvcmRlci1yYWRpdXM6NTAlO2N1cnNvcjpwb2ludGVyO2ZvbnQtc2l6ZToxLjFyZW0iPiZ0aW1lczs8L2J1dHRvbj4nOwogICAgICAgIGggKz0gJzwvZGl2Pic7CiAgICAgICAgaWYoY2F0KSBoICs9ICc8ZGl2IHN0eWxlPSJwYWRkaW5nOjEwcHggMjJweCAwO2ZvbnQtc2l6ZTouNzhyZW07Y29sb3I6Izg4OCI+Q2F0w6lnb3JpZSA6IDxzdHJvbmc+JytjYXQrJzwvc3Ryb25nPjwvZGl2Pic7CiAgICAgICAgaWYoIXByb2MpIGggKz0gJzxkaXYgc3R5bGU9InBhZGRpbmc6MTBweCAyMnB4IDA7Zm9udC1zaXplOi43OHJlbTtjb2xvcjojZTY3ZTIyIj48aSBjbGFzcz0iZmFzIGZhLWluZm8tY2lyY2xlIj48L2k+IEF1Y3VuZSBmaWNoZSBwcm9jw6lkdXJlIGFzc29jacOpZSDigJQgY3LDqWV6LWxhIGRhbnMgbGUgc291cy1tZW51IFByb2PDqWR1cmVzIGF2ZWMgbGUgY29kZSA8c3Ryb25nPicrcENvZGUrJzwvc3Ryb25nPjwvZGl2Pic7CiAgICAgICAgdmFyIHpvbmVzID0gWwogICAgICAgICAgICB7bGFiZWw6J0FjdGlvbnMgLyDDiXRhcGVzJywgaWNvbjoncHJvYy1pY29uLWFsZXJ0JywgY29udGVudDp6Mn0sCiAgICAgICAgICAgIHtsYWJlbDonTm90ZXMgLyBSZW1hcnF1ZXMnLCBpY29uOidwcm9jLWljb24taWRlYScsIGNvbnRlbnQ6ejN9CiAgICAgICAgXTsKICAgICAgICB2YXIgaGFzQ29udGVudCA9IHoyfHx6MzsKICAgICAgICBoICs9ICc8ZGl2IHN0eWxlPSJwYWRkaW5nOjE2cHggMjJweCI+JzsKICAgICAgICBpZihoYXNDb250ZW50KSB7CiAgICAgICAgICAgIHpvbmVzLmZvckVhY2goZnVuY3Rpb24oeil7CiAgICAgICAgICAgICAgICBpZih6LmNvbnRlbnQpIHsKICAgICAgICAgICAgICAgICAgICBoICs9ICc8ZGl2IHN0eWxlPSJib3JkZXItbGVmdDozcHggc29saWQgI2RkZDtwYWRkaW5nOjEwcHggMTRweDttYXJnaW46MTJweCAwO2JhY2tncm91bmQ6I2ZhZmFmYTtib3JkZXItcmFkaXVzOjAgOHB4IDhweCAwIj4nOwogICAgICAgICAgICAgICAgICAgIGggKz0gJzxoNCBzdHlsZT0iZm9udC1zaXplOi43OHJlbTtmb250LXdlaWdodDo2MDA7Y29sb3I6Izk5OTttYXJnaW46MCAwIDZweDt0ZXh0LXRyYW5zZm9ybTp1cHBlcmNhc2U7bGV0dGVyLXNwYWNpbmc6LjVweCI+PHNwYW4gY2xhc3M9Iicrei5pY29uKyciIHN0eWxlPSJtYXJnaW4tcmlnaHQ6NnB4Ij48L3NwYW4+Jyt6LmxhYmVsKyc8L2g0Pic7CiAgICAgICAgICAgICAgICAgICAgaCArPSAnPGRpdiBzdHlsZT0iZm9udC1zaXplOi44NXJlbTtsaW5lLWhlaWdodDoxLjU7Y29sb3I6IzQ0NCI+Jyt6LmNvbnRlbnQrJzwvZGl2Pic7CiAgICAgICAgICAgICAgICAgICAgaCArPSAnPC9kaXY+JzsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgaCArPSAnPGRpdiBzdHlsZT0idGV4dC1hbGlnbjpjZW50ZXI7cGFkZGluZzozMHB4O2NvbG9yOiNiYmIiPjxpIGNsYXNzPSJmYXMgZmEtZmlsZS1hbHQiIHN0eWxlPSJmb250LXNpemU6MnJlbTtkaXNwbGF5OmJsb2NrO21hcmdpbi1ib3R0b206OHB4Ij48L2k+QXVjdW4gY29udGVudSByZW5zZWlnbsOpPC9kaXY+JzsKICAgICAgICB9CiAgICAgICAgaCArPSAnPC9kaXY+JzsKICAgICAgICBoICs9ICc8ZGl2IHN0eWxlPSJwYWRkaW5nOjEycHggMjJweCAxOHB4O3RleHQtYWxpZ246cmlnaHQ7Ym9yZGVyLXRvcDoxcHggc29saWQgI2VlZSI+JzsKICAgICAgICBoICs9ICc8YnV0dG9uIG9uY2xpY2s9ImRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFx4Mjdwcm9jLXJvLXBvcHVwXHgyNykucmVtb3ZlKCkiIHN0eWxlPSJwYWRkaW5nOjhweCAyMHB4O2JvcmRlcjoxcHggc29saWQgI2RkZDtib3JkZXItcmFkaXVzOjhweDtiYWNrZ3JvdW5kOiNmZmY7Y3Vyc29yOnBvaW50ZXI7bWFyZ2luLXJpZ2h0OjhweDtmb250LXNpemU6Ljg1cmVtIj5GZXJtZXI8L2J1dHRvbj4nOwogICAgICAgIGlmKHBJZCkgaCArPSAnPGJ1dHRvbiBvbmNsaWNrPSJkb2N1bWVudC5nZXRFbGVtZW50QnlJZChceDI3cHJvYy1yby1wb3B1cFx4MjcpLnJlbW92ZSgpO3N3aXRjaE1lbnUoXHgyN21lbnUxMlx4MjcpO3NldFRpbWVvdXQoZnVuY3Rpb24oKXt2aWV3UHJvYyhceDI3JytwSWQrJ1x4MjcpfSwyMDApIiBzdHlsZT0icGFkZGluZzo4cHggMjBweDtib3JkZXI6bm9uZTtib3JkZXItcmFkaXVzOjhweDtiYWNrZ3JvdW5kOnZhcigtLWhlYWRlciwjMmMzZTUwKTtjb2xvcjojZmZmO2N1cnNvcjpwb2ludGVyO2ZvbnQtc2l6ZTouODVyZW0iPjxpIGNsYXNzPSJmYXMgZmEtZWRpdCI+PC9pPiBPdXZyaXIgZGFucyBQcm9jw6lkdXJlczwvYnV0dG9uPic7CiAgICAgICAgaCArPSAnPC9kaXY+PC9kaXY+PC9kaXY+JzsKICAgICAgICBkb2N1bWVudC5ib2R5Lmluc2VydEFkamFjZW50SFRNTCgnYmVmb3JlZW5kJywgaCk7CiAgICB9CgogICAgCiAgICB2YXIgX1BST0NfQ0FUX01BUCA9IFsKICAgICAgICB7cHJlZml4OidQTycsIGNhdDonUG9ydGVzIE91dmVydGVzJ30sCiAgICAgICAge3ByZWZpeDonUkgnLCBjYXQ6J1Jlc3NvdXJjZXMgSHVtYWluZXMnfSwKICAgICAgICB7cHJlZml4OidBJywgY2F0OidBZG1pbmlzdHJhdGlmJ30sCiAgICAgICAge3ByZWZpeDonQicsIGNhdDonw4lsw6h2ZXMgQkVQJ30sCiAgICAgICAge3ByZWZpeDonQycsIGNhdDonQ29uY2VydGF0aW9ucyd9LAogICAgICAgIHtwcmVmaXg6J0QnLCBjYXQ6J0Rpc3Bvc2l0aWZzIFDDqWRhZ29naXF1ZXMnfSwKICAgICAgICB7cHJlZml4OidFJywgY2F0OidTdWl2aSBkZXMgw6lsw6h2ZXMnfSwKICAgICAgICB7cHJlZml4OidJJywgY2F0OidJbnRlcnZlbmFudHMnfSwKICAgICAgICB7cHJlZml4OidOJywgY2F0OidOdW3DqXJpcXVlJ30sCiAgICAgICAge3ByZWZpeDonTycsIGNhdDonT3JpZW50YXRpb24nfSwKICAgICAgICB7cHJlZml4OidQJywgY2F0OidQcm9qZXRzJ30sCiAgICAgICAge3ByZWZpeDonUycsIGNhdDonU8OpY3VyaXTDqSd9CiAgICBdOwogICAgZnVuY3Rpb24gYXV0b1Byb2NDYXQoY29kZSkgewogICAgICAgIGlmKCFjb2RlKSByZXR1cm47CiAgICAgICAgdmFyIGMgPSBjb2RlLnRyaW0oKS50b1VwcGVyQ2FzZSgpOwogICAgICAgIHZhciBzZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJvYy1jYXQnKTsKICAgICAgICBmb3IodmFyIGk9MDtpPF9QUk9DX0NBVF9NQVAubGVuZ3RoO2krKyl7CiAgICAgICAgICAgIGlmKGMuaW5kZXhPZihfUFJPQ19DQVRfTUFQW2ldLnByZWZpeCk9PT0wKXsKICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIG9wdGlvbiBleGlzdHMKICAgICAgICAgICAgICAgIHZhciBmb3VuZD1mYWxzZTsKICAgICAgICAgICAgICAgIGZvcih2YXIgaj0wO2o8c2VsLm9wdGlvbnMubGVuZ3RoO2orKyl7aWYoc2VsLm9wdGlvbnNbal0udmFsdWU9PT1fUFJPQ19DQVRfTUFQW2ldLmNhdCl7Zm91bmQ9dHJ1ZTticmVhazt9fQogICAgICAgICAgICAgICAgaWYoZm91bmQpIHNlbC52YWx1ZT1fUFJPQ19DQVRfTUFQW2ldLmNhdDsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KCiAgICAKICAgIAogICAgZnVuY3Rpb24gcHJpbnRHYW50dCgpewogICAgICAgIHZhciBzdz1wcm9tcHQoJ1NlbWFpbmUgZGUgZMOpYnV0IChleDogMzYpOicsJzM2Jyk7aWYoIXN3KXJldHVybjtzdz1wYXJzZUludChzdyk7CiAgICAgICAgdmFyIGV3PXByb21wdCgnU2VtYWluZSBkZSBmaW4gKGV4OiAyNik6JywnMjYnKTtpZighZXcpcmV0dXJuO2V3PXBhcnNlSW50KGV3KTsKICAgICAgICBpZighc3d8fCFldylyZXR1cm47CiAgICAgICAgLy8gQnVpbGQgd2VlayBsaXN0CiAgICAgICAgdmFyIHdlZWtzPVtdOwogICAgICAgIGlmKHN3PmV3KXtmb3IodmFyIHc9c3c7dzw9NTM7dysrKXdlZWtzLnB1c2godyk7Zm9yKHZhciB3PTE7dzw9ZXc7dysrKXdlZWtzLnB1c2godyk7fQogICAgICAgIGVsc2V7Zm9yKHZhciB3PXN3O3c8PWV3O3crKyl3ZWVrcy5wdXNoKHcpO30KICAgICAgICB2YXIgcHJvY3M9KGFwcERhdGEucHJvY2VkdXJlc3x8W10pLmZpbHRlcihmdW5jdGlvbihwKXtyZXR1cm4gcC53c3RhcnQ7fSk7CiAgICAgICAgcHJvY3Muc29ydChmdW5jdGlvbihhLGIpewogICAgICAgICAgICB2YXIgaWE9d2Vla3MuaW5kZXhPZihhLndzdGFydCksaWI9d2Vla3MuaW5kZXhPZihiLndzdGFydCk7CiAgICAgICAgICAgIGlmKGlhPDApaWE9OTk5O2lmKGliPDApaWI9OTk5OwogICAgICAgICAgICBpZihpYSE9PWliKXJldHVybiBpYS1pYjsKICAgICAgICAgICAgdmFyIG5hPXBhcnNlSW50KChhLmNvZGV8fCcnKS5yZXBsYWNlKC9bXjAtOV0vZywnJykpfHwwOwogICAgICAgICAgICB2YXIgbmI9cGFyc2VJbnQoKGIuY29kZXx8JycpLnJlcGxhY2UoL1teMC05XS9nLCcnKSl8fDA7CiAgICAgICAgICAgIHJldHVybiBuYS1uYjsKICAgICAgICB9KTsKICAgICAgICB2YXIgdnc9Z2V0VlcoKTsKICAgICAgICB2YXIgbW9zPVtdLGNtPScnO3dlZWtzLmZvckVhY2goZnVuY3Rpb24odyl7dmFyIG1sPXdrTW8odyk7aWYobWwhPT1jbSl7bW9zLnB1c2goe246bWwsczoxfSk7Y209bWw7fWVsc2UgbW9zW21vcy5sZW5ndGgtMV0ucysrO30pOwogICAgICAgIHZhciBjdz1jdXJXKCk7CiAgICAgICAgdmFyIGg9JzxzdHlsZT5AcGFnZXtzaXplOkEzIGxhbmRzY2FwZTttYXJnaW46NW1tfWJvZHl7Zm9udC1mYW1pbHk6QXJpYWwsc2Fucy1zZXJpZjttYXJnaW46MH10YWJsZXtib3JkZXItY29sbGFwc2U6Y29sbGFwc2U7d2lkdGg6MTAwJTtmb250LXNpemU6LjU1cmVtfXRoLHRke2JvcmRlcjoxcHggc29saWQgI2NjYztwYWRkaW5nOjJweCAzcHg7dGV4dC1hbGlnbjpjZW50ZXJ9dGh7YmFja2dyb3VuZDojZjVmNWY1O2ZvbnQtd2VpZ2h0OjYwMH0uZ3QtY3d7YmFja2dyb3VuZDojZmZmM2NkIWltcG9ydGFudH0uZ3QtdmF7YmFja2dyb3VuZDojZjhmOGY4fS5iYXJ7cG9zaXRpb246YWJzb2x1dGU7aW5zZXQ6MnB4IDFweDtib3JkZXItcmFkaXVzOjJweDstd2Via2l0LXByaW50LWNvbG9yLWFkanVzdDpleGFjdDtwcmludC1jb2xvci1hZGp1c3Q6ZXhhY3R9Lmxhe3RleHQtYWxpZ246bGVmdDtmb250LXNpemU6LjZyZW07d2hpdGUtc3BhY2U6bm93cmFwO21heC13aWR0aDoyMDBweDtvdmVyZmxvdzpoaWRkZW47dGV4dC1vdmVyZmxvdzplbGxpcHNpc30uZnR7ZGlzcGxheTpmbGV4O2FsaWduLWl0ZW1zOmNlbnRlcjtqdXN0aWZ5LWNvbnRlbnQ6c3BhY2UtYmV0d2VlbjtwYWRkaW5nOjRweCAxMHB4O21hcmdpbi10b3A6OHB4O2ZvbnQtc2l6ZTouNnJlbTtjb2xvcjojOTk5fTwvc3R5bGU+JzsKICAgICAgICBoKz0nPHRhYmxlPjx0aGVhZD48dHI+PHRoIHJvd3NwYW49IjIiIHN0eWxlPSJtaW4td2lkdGg6MTYwcHg7dGV4dC1hbGlnbjpsZWZ0Ij5Qcm9jw6lkdXJlPC90aD4nOwogICAgICAgIG1vcy5mb3JFYWNoKGZ1bmN0aW9uKG0pe2grPSc8dGggY29sc3Bhbj0iJyttLnMrJyI+JyttLm4rJzwvdGg+Jzt9KTsKICAgICAgICBoKz0nPC90cj48dHI+JzsKICAgICAgICB3ZWVrcy5mb3JFYWNoKGZ1bmN0aW9uKHcpewogICAgICAgICAgICB2YXIgY2xzPScnO2lmKHc9PT1jdyljbHM9J2d0LWN3JztlbHNlIGlmKHZ3LmluZGV4T2Yodyk+PTApY2xzPSdndC12YSc7CiAgICAgICAgICAgIGgrPSc8dGgnKyhjbHM/JyBjbGFzcz0iJytjbHMrJyInOicnKSsnPicrdysnPC90aD4nOwogICAgICAgIH0pOwogICAgICAgIGgrPSc8L3RyPjwvdGhlYWQ+PHRib2R5Pic7CiAgICAgICAgcHJvY3MuZm9yRWFjaChmdW5jdGlvbihnKXsKICAgICAgICAgICAgdmFyIGNvbD1nZXRQcm9jQ29sb3IoZy5jb2RlKTsKICAgICAgICAgICAgaCs9Jzx0cj48dGQgY2xhc3M9ImxhIj4nK2cuY29kZSsnIC0gJysoZy50aXRsZXx8JycpKyc8L3RkPic7CiAgICAgICAgICAgIHdlZWtzLmZvckVhY2goZnVuY3Rpb24odyl7CiAgICAgICAgICAgICAgICB2YXIgdmFjPXZ3LmluZGV4T2Yodyk+PTAsaXI9d0luUih3LGcud3N0YXJ0LGcud2VuZCk7CiAgICAgICAgICAgICAgICBoKz0nPHRkJysodmFjPycgY2xhc3M9Imd0LXZhIic6JycpKycgc3R5bGU9InBvc2l0aW9uOnJlbGF0aXZlO2hlaWdodDoxNHB4Ij4nOwogICAgICAgICAgICAgICAgaWYoaXIpaCs9JzxkaXYgY2xhc3M9ImJhciIgc3R5bGU9ImJhY2tncm91bmQ6Jytjb2wrJyI+PC9kaXY+JzsKICAgICAgICAgICAgICAgIGgrPSc8L3RkPic7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBoKz0nPC90cj4nOwogICAgICAgIH0pOwogICAgICAgIGgrPSc8L3Rib2R5PjwvdGFibGU+JzsKICAgICAgICB2YXIgbG9nb1NyYz0oYXBwRGF0YS5zZXR0aW5ncyYmYXBwRGF0YS5zZXR0aW5ncy5sb2dvKXx8Jyc7CiAgICAgICAgdmFyIHRvZGF5PW5ldyBEYXRlKCkudG9Mb2NhbGVEYXRlU3RyaW5nKCdmci1GUicse2RheTonMi1kaWdpdCcsbW9udGg6J2xvbmcnLHllYXI6J251bWVyaWMnfSk7CiAgICAgICAgaCs9JzxkaXYgY2xhc3M9ImZ0Ij4nOwogICAgICAgIGlmKGxvZ29TcmMpaCs9JzxpbWcgc3JjPSInK2xvZ29TcmMrJyIgc3R5bGU9ImhlaWdodDoxY20iPic7CiAgICAgICAgaCs9JzxzcGFuPicrdG9kYXkrJzwvc3Bhbj48L2Rpdj4nOwogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcmludC16b25lJykuaW5uZXJIVE1MPWg7CiAgICAgICAgd2FpdEZvckltYWdlc1RoZW5QcmludCgpOwogICAgfQoKICAgIGZ1bmN0aW9uIHRvZ2dsZVByb2NEb25lKGlkKXsKICAgICAgICB2YXIgc3k9Z2V0Q3VycmVudFNjaG9vbFllYXIoKTsKICAgICAgICB2YXIgcDI9KGFwcERhdGEucHJvY2VkdXJlc3x8W10pLmZpbmQoZnVuY3Rpb24oeCl7cmV0dXJuIHguaWQ9PT1pZDt9KTsKICAgICAgICBpZihwMil7cDIuZG9uZT0hcDIuZG9uZTtwMi5kb25lU1k9cDIuZG9uZT9zeTonJztzYXZlRGF0YSgpO3JlbmRlckdhbnR0KCk7cmV0dXJuO30KICAgICAgICB2YXIgZz0oYXBwRGF0YS5nYW50dHx8W10pLmZpbmQoZnVuY3Rpb24oeCl7cmV0dXJuIHguaWQ9PT1pZDt9KTsKICAgICAgICBpZihnKXtnLmRvbmU9IWcuZG9uZTtnLmRvbmVTWT1nLmRvbmU/c3k6Jyc7c2F2ZURhdGEoKTtyZW5kZXJHYW50dCgpO30KICAgIH0KCiAgICB3aW5kb3cub3BlblByb2NNb2RhbCA9IG9wZW5Qcm9jTW9kYWw7CiAgICB3aW5kb3cuY2xvc2VQcm9jTW9kYWwgPSBjbG9zZVByb2NNb2RhbDsKICAgIHdpbmRvdy5zYXZlUHJvYyA9IHNhdmVQcm9jOwogICAgd2luZG93LmRlbFByb2MgPSBkZWxQcm9jOwogICAgd2luZG93LnJlbmRlclByb2NlZHVyZXMgPSByZW5kZXJQcm9jZWR1cmVzOwogICAgd2luZG93LnZpZXdQcm9jID0gdmlld1Byb2M7CiAgICB3aW5kb3cucHJpbnRQcm9jID0gcHJpbnRQcm9jOwogICAgd2luZG93LnByb2NJbnNlcnRJY29uID0gcHJvY0luc2VydEljb247CiAgICB3aW5kb3cubG9hZFNlcENvbmZpZyA9IGxvYWRTZXBDb25maWc7CiAgICB3aW5kb3cuc2F2ZVNlcENvbmZpZyA9IHNhdmVTZXBDb25maWc7CiAgICB3aW5kb3cuYXBwbHlTZXBhcmF0b3JzID0gYXBwbHlTZXBhcmF0b3JzOwogICAgd2luZG93LnZpZXdQcm9jUmVhZG9ubHkgPSB2aWV3UHJvY1JlYWRvbmx5OwogICAgd2luZG93LnRvZ2dsZVByb2NEb25lID0gdG9nZ2xlUHJvY0RvbmU7CiAgICB3aW5kb3cucHJpbnRHYW50dCA9IHByaW50R2FudHQ7CiAgICAKICAgIGZ1bmN0aW9uIHJ0ZUltZ1Jlc2l6ZShzaXplKXsKICAgICAgICB2YXIgc2VsPXdpbmRvdy5nZXRTZWxlY3Rpb24oKTtpZighc2VsLnJhbmdlQ291bnQpcmV0dXJuOwogICAgICAgIHZhciBub2RlPXNlbC5hbmNob3JOb2RlOwogICAgICAgIC8vIEZpbmQgbmVhcmVzdCBpbWcKICAgICAgICB2YXIgZWw9bm9kZTt3aGlsZShlbCYmZWwudGFnTmFtZSE9PSdJTUcnKXtpZihlbC5jaGlsZE5vZGVzKXtmb3IodmFyIGk9MDtpPGVsLmNoaWxkTm9kZXMubGVuZ3RoO2krKyl7aWYoZWwuY2hpbGROb2Rlc1tpXS50YWdOYW1lPT09J0lNRycpe2VsPWVsLmNoaWxkTm9kZXNbaV07YnJlYWs7fX19aWYoZWwudGFnTmFtZSE9PSdJTUcnKWVsPWVsLnBhcmVudE5vZGU7fQogICAgICAgIGlmKCFlbHx8ZWwudGFnTmFtZSE9PSdJTUcnKXsKICAgICAgICAgICAgLy8gVHJ5IHRvIGZpbmQgYW55IHNlbGVjdGVkIGltZwogICAgICAgICAgICB2YXIgaW1ncz1zZWwuYW5jaG9yTm9kZS5wYXJlbnROb2RlLnF1ZXJ5U2VsZWN0b3JBbGwoJ2ltZycpOwogICAgICAgICAgICBpZihpbWdzLmxlbmd0aD09PTEpZWw9aW1nc1swXTsKICAgICAgICAgICAgZWxzZXthbGVydCgnU8OpbGVjdGlvbm5leiB1bmUgaW1hZ2UgZFwnYWJvcmQnKTtyZXR1cm47fQogICAgICAgIH0KICAgICAgICB2YXIgc2l6ZXM9eydzbWFsbCc6JzI1JScsJ21lZGl1bSc6JzUwJScsJ2xhcmdlJzonNzUlJywnZnVsbCc6JzEwMCUnfTsKICAgICAgICBlbC5zdHlsZS53aWR0aD1zaXplc1tzaXplXXx8JzUwJSc7ZWwuc3R5bGUuaGVpZ2h0PSdhdXRvJzsKICAgIH0KICAgIHdpbmRvdy5ydGVJbWdSZXNpemUgPSBydGVJbWdSZXNpemU7CiAgICBmdW5jdGlvbiBleHBvcnREYXRhKCl7CiAgICAgICAgdmFyIGpzb249SlNPTi5zdHJpbmdpZnkoYXBwRGF0YSxudWxsLDIpOwogICAgICAgIHZhciBibG9iPW5ldyBCbG9iKFtqc29uXSx7dHlwZTonYXBwbGljYXRpb24vanNvbid9KTsKICAgICAgICB2YXIgdXJsPVVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7CiAgICAgICAgdmFyIGE9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpOwogICAgICAgIHZhciBkPW5ldyBEYXRlKCk7CiAgICAgICAgdmFyIGZuYW1lPSdDQURJUl9iYWNrdXBfJytkLmdldEZ1bGxZZWFyKCkrJy0nK1N0cmluZyhkLmdldE1vbnRoKCkrMSkucGFkU3RhcnQoMiwnMCcpKyctJytTdHJpbmcoZC5nZXREYXRlKCkpLnBhZFN0YXJ0KDIsJzAnKSsnXycrU3RyaW5nKGQuZ2V0SG91cnMoKSkucGFkU3RhcnQoMiwnMCcpKydoJytTdHJpbmcoZC5nZXRNaW51dGVzKCkpLnBhZFN0YXJ0KDIsJzAnKSsnLmpzb24nOwogICAgICAgIGEuaHJlZj11cmw7YS5kb3dubG9hZD1mbmFtZTthLmNsaWNrKCk7VVJMLnJldm9rZU9iamVjdFVSTCh1cmwpOwogICAgICAgIHZhciBlbD1kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbGFzdC1leHBvcnQnKTsKICAgICAgICBpZihlbCllbC50ZXh0Q29udGVudD0nRGVybmllciBleHBvcnQgOiAnK2QudG9Mb2NhbGVTdHJpbmcoJ2ZyLUZSJyk7CiAgICAgICAgYXBwRGF0YS5zZXR0aW5ncy5sYXN0RXhwb3J0PWQudG9JU09TdHJpbmcoKTtzYXZlRGF0YSgpOwogICAgfQogICAgZnVuY3Rpb24gaW1wb3J0RGF0YShpbnB1dCl7CiAgICAgICAgaWYoIWlucHV0LmZpbGVzfHwhaW5wdXQuZmlsZXNbMF0pcmV0dXJuOwogICAgICAgIGlmKCFjb25maXJtKCfimqDvuI8gSW1wb3J0ZXIgdmEgUkVNUExBQ0VSIHRvdXRlcyB2b3MgZG9ubsOpZXMgYWN0dWVsbGVzLlxuXG5Wb3VsZXotdm91cyBjb250aW51ZXIgPycpKXJldHVybjsKICAgICAgICB2YXIgcmVhZGVyPW5ldyBGaWxlUmVhZGVyKCk7CiAgICAgICAgcmVhZGVyLm9ubG9hZD1mdW5jdGlvbihlKXsKICAgICAgICAgICAgdHJ5ewogICAgICAgICAgICAgICAgdmFyIGRhdGE9SlNPTi5wYXJzZShlLnRhcmdldC5yZXN1bHQpOwogICAgICAgICAgICAgICAgaWYoIWRhdGEuc2V0dGluZ3Mpe2FsZXJ0KCdGaWNoaWVyIGludmFsaWRlIDogcGFzIGRlIHNlY3Rpb24gc2V0dGluZ3MnKTtyZXR1cm47fQogICAgICAgICAgICAgICAgLy8gTWVyZ2UgaW50byBhcHBEYXRhCiAgICAgICAgICAgICAgICBPYmplY3Qua2V5cyhkYXRhKS5mb3JFYWNoKGZ1bmN0aW9uKGspe2FwcERhdGFba109ZGF0YVtrXTt9KTsKICAgICAgICAgICAgICAgIHNhdmVEYXRhKCk7CiAgICAgICAgICAgICAgICBhbGVydCgn4pyFIEltcG9ydCByw6l1c3NpICEgTGEgcGFnZSB2YSBzZSByZWNoYXJnZXIuJyk7CiAgICAgICAgICAgICAgICBsb2NhdGlvbi5yZWxvYWQoKTsKICAgICAgICAgICAgfWNhdGNoKGVycil7CiAgICAgICAgICAgICAgICBhbGVydCgnRXJyZXVyIGRlIGxlY3R1cmUgOiAnK2Vyci5tZXNzYWdlKTsKICAgICAgICAgICAgfQogICAgICAgIH07CiAgICAgICAgcmVhZGVyLnJlYWRBc1RleHQoaW5wdXQuZmlsZXNbMF0pOwogICAgICAgIGlucHV0LnZhbHVlPScnOwogICAgfQogICAgd2luZG93LmV4cG9ydERhdGEgPSBleHBvcnREYXRhOwogICAgd2luZG93LmltcG9ydERhdGEgPSBpbXBvcnREYXRhOwoKICAgIHZhciBfZXZDbGFzc2VzPVtdOwogICAgZnVuY3Rpb24gYnVpbGRDbGFzc1NlbGVjdCgpewogICAgICAgIHZhciBzZWw9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2V2LWNsYXNzZScpO2lmKCFzZWwpcmV0dXJuOwogICAgICAgIHZhciBjbGFzc2VzPXt9OwogICAgICAgIChhcHBEYXRhLnN0dWRlbnRzfHxbXSkuZm9yRWFjaChmdW5jdGlvbihzKXt2YXIgYz1zLkNsYXNzZXx8cy5jbGFzc2U7aWYoYyljbGFzc2VzW2NdPTE7fSk7CiAgICAgICAgdmFyIGg9JzxvcHRpb24gdmFsdWU9IiI+LS0gQ2hvaXNpciBvdSBzYWlzaXIgLS08L29wdGlvbj4nOwogICAgICAgIE9iamVjdC5rZXlzKGNsYXNzZXMpLnNvcnQoKS5mb3JFYWNoKGZ1bmN0aW9uKGMpe2grPSc8b3B0aW9uIHZhbHVlPSInK2MrJyI+JytjKyc8L29wdGlvbj4nO30pOwogICAgICAgIGgrPSc8b3B0aW9uIHZhbHVlPSJfX2N1c3RvbSI+XHUyNzBGIFNhaXNpci4uLjwvb3B0aW9uPic7CiAgICAgICAgc2VsLmlubmVySFRNTD1oOwogICAgfQogICAgZnVuY3Rpb24gYWRkRXZDbGFzc2UoKXsKICAgICAgICB2YXIgc2VsPWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdldi1jbGFzc2UnKTsKICAgICAgICB2YXIgdj1zZWwudmFsdWU7CiAgICAgICAgaWYodj09PSdfX2N1c3RvbScpe3Y9cHJvbXB0KCdDbGFzc2UgOicpO2lmKCF2KXJldHVybjt9CiAgICAgICAgaWYoIXYpcmV0dXJuOwogICAgICAgIGlmKF9ldkNsYXNzZXMuaW5kZXhPZih2KTwwKV9ldkNsYXNzZXMucHVzaCh2KTsKICAgICAgICByZW5kZXJFdkNsYXNzZXMoKTsKICAgIH0KICAgIGZ1bmN0aW9uIHJlbW92ZUV2Q2xhc3NlKGMpe19ldkNsYXNzZXM9X2V2Q2xhc3Nlcy5maWx0ZXIoZnVuY3Rpb24oeCl7cmV0dXJuIHghPT1jO30pO3JlbmRlckV2Q2xhc3NlcygpO30KICAgIGZ1bmN0aW9uIHJlbmRlckV2Q2xhc3NlcygpewogICAgICAgIHZhciBoPScnO19ldkNsYXNzZXMuZm9yRWFjaChmdW5jdGlvbihjKXsKICAgICAgICAgICAgaCs9JzxzcGFuIHN0eWxlPSJiYWNrZ3JvdW5kOiNlMGU3ZmY7Y29sb3I6IzM3MzBhMztwYWRkaW5nOjNweCA4cHg7Ym9yZGVyLXJhZGl1czoxMnB4O2ZvbnQtc2l6ZTouNzVyZW07ZGlzcGxheTppbmxpbmUtZmxleDthbGlnbi1pdGVtczpjZW50ZXI7Z2FwOjRweCI+JytjKycgPHNwYW4gc3R5bGU9ImN1cnNvcjpwb2ludGVyO2ZvbnQtd2VpZ2h0OjcwMCIgb25jbGljaz0id2luZG93LnJlbW92ZUV2Q2xhc3NlKFwnJytjKydcJykiPlx1MDBENzwvc3Bhbj48L3NwYW4+JzsKICAgICAgICB9KTsKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZXYtY2xhc3Nlcy1saXN0JykuaW5uZXJIVE1MPWg7CiAgICB9CiAgICB3aW5kb3cuYWRkRXZDbGFzc2UgPSBhZGRFdkNsYXNzZTsKICAgIHdpbmRvdy5yZW1vdmVFdkNsYXNzZSA9IHJlbW92ZUV2Q2xhc3NlOwogICAgd2luZG93LmJ1aWxkQ2xhc3NTZWxlY3QgPSBidWlsZENsYXNzU2VsZWN0OwogICAgd2luZG93LnNhdmVFdmVudCA9IHR5cGVvZiBzYXZlRXZlbnQhPT0ndW5kZWZpbmVkJz9zYXZlRXZlbnQ6ZnVuY3Rpb24oKXt9OwogICAgd2luZG93LmNsb3NlRXZNb2RhbCA9IHR5cGVvZiBjbG9zZUV2TW9kYWwhPT0ndW5kZWZpbmVkJz9jbG9zZUV2TW9kYWw6ZnVuY3Rpb24oKXt9OwogICAgd2luZG93LmRlbEV2RnJvbU1vZGFsID0gdHlwZW9mIGRlbEV2RnJvbU1vZGFsIT09J3VuZGVmaW5lZCc/ZGVsRXZGcm9tTW9kYWw6ZnVuY3Rpb24oKXt9OwogICAgd2luZG93Lm9wZW5Fdk1vZGFsID0gdHlwZW9mIG9wZW5Fdk1vZGFsIT09J3VuZGVmaW5lZCc/b3BlbkV2TW9kYWw6ZnVuY3Rpb24oKXt9OwoKCiAgICB3aW5kb3cuYXV0b1Byb2NDYXQgPSBhdXRvUHJvY0NhdDsKICAgIHdpbmRvdy5hdXRvUmVzZXREb25lID0gYXV0b1Jlc2V0RG9uZTsKICAgIHdpbmRvdy5nZXRDdXJyZW50U2Nob29sWWVhciA9IGdldEN1cnJlbnRTY2hvb2xZZWFyOwogICAgd2luZG93LnNhdmVHdCA9IHNhdmVHdDsKICAgIHdpbmRvdy5vcGVuR3RNb2RhbCA9IG9wZW5HdE1vZGFsOwogICAgd2luZG93LmNsb3NlR3RNb2RhbCA9IGNsb3NlR3RNb2RhbDsKICAgIHdpbmRvdy5kZWxHdEZyb21Nb2RhbCA9IGRlbEd0RnJvbU1vZGFsOwogICAgd2luZG93LnRvZ2dsZUd0RG9uZSA9IHRvZ2dsZUd0RG9uZTsKICAgIHdpbmRvdy5yZW5kZXJHYW50dCA9IHJlbmRlckdhbnR0OwogICAgd2luZG93Lmd0UHJldiA9IGd0UHJldjsKICAgIHdpbmRvdy5ndE5leHQgPSBndE5leHQ7CiAgICB3aW5kb3cuZ3RUb2RheSA9IGd0VG9kYXk7CiAgICB3aW5kb3cuZ3RZZWFyID0gZ3RZZWFyOwogICAgd2luZG93LmZpbGxUZWFjaGVyU2VsID0gZmlsbFRlYWNoZXJTZWw7CgoKICAgIAovLyBBdXRvLXJlc2V0IGF1IGTDqW1hcnJhZ2UKZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZ1bmN0aW9uKCl7CiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7IGlmKHR5cGVvZiBhdXRvUmVzZXREb25lPT09J2Z1bmN0aW9uJykgYXV0b1Jlc2V0RG9uZSgpOyB9LCA1MDApOwogICAgc2V0VGltZW91dChmdW5jdGlvbigpeyBpZih0eXBlb2YgcmVzdG9yZUZpbGVIYW5kbGU9PT0nZnVuY3Rpb24nKSByZXN0b3JlRmlsZUhhbmRsZSgpOyB9LCAzMDApOwp9KTsKCgogICAgLy8gPT09IFdPUkQgUEFTVEUg4oCUIENvbGxhZ2UgaW50ZWxsaWdlbnQgZGVwdWlzIFdvcmQgPT09CiAgICBmdW5jdGlvbiBjbGVhbldvcmRIdG1sKGh0bWwpIHsKICAgICAgICAvLyDilIDilIAgMS4gU3VwcHJpbWVyIGNvbW1lbnRhaXJlcyBjb25kaXRpb25uZWxzIFdvcmQg4pSA4pSACiAgICAgICAgaHRtbCA9IGh0bWwucmVwbGFjZSgvPCEtLVxbaWZbXlxdXSpcXT5bXHNcU10qPzwhXFtlbmRpZlxdLS0+L2dpLCAnJyk7CgogICAgICAgIC8vIOKUgOKUgCAyLiBTdXBwcmltZXIgYmFsaXNlcyBYTUwgV29yZCAobzosIHc6LCBtOikg4pSA4pSACiAgICAgICAgaHRtbCA9IGh0bWwucmVwbGFjZSgvPFwvP286W2EtekEtWl1bXj5dKj4vZ2ksICcnKTsKICAgICAgICBodG1sID0gaHRtbC5yZXBsYWNlKC88XC8/dzpbYS16QS1aXVtePl0qPi9naSwgJycpOwogICAgICAgIGh0bWwgPSBodG1sLnJlcGxhY2UoLzxcLz9tOlthLXpBLVpdW14+XSo+L2dpLCAnJyk7CiAgICAgICAgaHRtbCA9IGh0bWwucmVwbGFjZSgvPHY6W14+XSs+W1xzXFNdKj88XC92OltePl0rPi9naSwgJycpOwogICAgICAgIGh0bWwgPSBodG1sLnJlcGxhY2UoLzxcLz92OltePl0rPi9naSwgJycpOwoKICAgICAgICAvLyDilIDilIAgMy4gQ29udmVydGlyIGxpc3RlcyBXb3JkIGF2ZWMgbml2ZWF1eCDilIDilIAKICAgICAgICAvLyBXb3JkIGVuY29kZTogPHAgY2xhc3M9Ik1zb0xpc3RQYXJhZ3JhcGgiIHN0eWxlPSIuLi5tc28tbGlzdDpsMCBsZXZlbDIgbGZvMS4uLiI+CiAgICAgICAgLy8gT24gZXh0cmFpdCBsZSBuaXZlYXUgZXQgY29uc3RydWl0IHVuZSBsaXN0ZSBpbWJyaXF1w6llCgogICAgICAgIC8vIDNhLiBQYXJzZXIgY2hhcXVlIHBhcmFncmFwaGUgbGlzdGUgZW4gb2JqZXQge2xldmVsLCBvcmRlcmVkLCBjb250ZW50fQogICAgICAgIHZhciBsaXN0SXRlbXMgPSBbXTsKICAgICAgICB2YXIgbGlzdFJhbmdlcyA9IFtdOyAvLyBwb3NpdGlvbnMgZGFucyBsZSBIVE1MIHBvdXIgcmVjb25zdHJ1Y3Rpb24KCiAgICAgICAgdmFyIHBMaXN0UmUgPSAvPHAoW14+XSooPzptc28tbGlzdHxNc29MaXN0KVtePl0qKT4oW1xzXFNdKj8pPFwvcD4vZ2k7CiAgICAgICAgdmFyIG1hdGNoOwogICAgICAgIHdoaWxlICgobWF0Y2ggPSBwTGlzdFJlLmV4ZWMoaHRtbCkpICE9PSBudWxsKSB7CiAgICAgICAgICAgIHZhciBhdHRycyA9IG1hdGNoWzFdOwogICAgICAgICAgICB2YXIgaW5uZXIgPSBtYXRjaFsyXTsKICAgICAgICAgICAgdmFyIGxldmVsTSA9IC9tc28tbGlzdDpbXjtdKj9sZXZlbChcZCspL2kuZXhlYyhhdHRycyk7CiAgICAgICAgICAgIHZhciBsZXZlbCA9IGxldmVsTSA/IHBhcnNlSW50KGxldmVsTVsxXSkgOiAxOwogICAgICAgICAgICBpZiAobGV2ZWwgPCAxKSBsZXZlbCA9IDE7CiAgICAgICAgICAgIGlmIChsZXZlbCA+IDMpIGxldmVsID0gMzsKCiAgICAgICAgICAgIC8vIETDqXRlY3RlciBsaXN0ZSBvcmRvbm7DqWU6IGxlIHNwYW4gZGUgcHVjZSBjb250aWVudCBjaGlmZnJlL2xldHRyZStwb25jdHVhdGlvbgogICAgICAgICAgICB2YXIgaXNPcmRlcmVkID0gZmFsc2U7CiAgICAgICAgICAgIHZhciBmaXJzdFNwYW4gPSBpbm5lci5tYXRjaCgvPHNwYW5bXj5dKj4oW1xzXFNdKj8pPFwvc3Bhbj4vaSk7CiAgICAgICAgICAgIGlmIChmaXJzdFNwYW4pIHsKICAgICAgICAgICAgICAgIHZhciB0eHQgPSBmaXJzdFNwYW5bMV0ucmVwbGFjZSgvPFtePl0rPi9nLCcnKS5yZXBsYWNlKC8mbmJzcDsvZywnICcpLnRyaW0oKTsKICAgICAgICAgICAgICAgIGlzT3JkZXJlZCA9IC9eW1xkXHddK1suKV1ccyokLy50ZXN0KHR4dCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC8vIE5ldHRveWVyIGxlIGNvbnRlbnU6IHN1cHByaW1lciBsZSBzcGFuIGRlIHB1Y2UgKFN5bWJvbC9XaW5nZGluZ3MvbXNvLWxpc3QpCiAgICAgICAgICAgIGlubmVyID0gaW5uZXIucmVwbGFjZSgvPHNwYW5bXj5dKmZvbnQtZmFtaWx5XHMqOlxzKlsnIl0/XHMqKD86U3ltYm9sfFdpbmdkaW5ncylbXj5dKj5bXHNcU10qPzxcL3NwYW4+L2dpLCAnJyk7CiAgICAgICAgICAgIGlubmVyID0gaW5uZXIucmVwbGFjZSgvPHNwYW5bXj5dKm1zby1saXN0W14+XSo+W1xzXFNdKj88XC9zcGFuPi9naSwgJycpOwogICAgICAgICAgICAvLyBTdXBwcmltZXIgbGVzICZuYnNwOyBkJ2luZGVudGF0aW9uIGVuIGTDqWJ1dAogICAgICAgICAgICBpbm5lciA9IGlubmVyLnJlcGxhY2UoL14oXHMqJm5ic3A7XHMqKSsvLCAnJyk7CiAgICAgICAgICAgIGlubmVyID0gaW5uZXIudHJpbSgpOwoKICAgICAgICAgICAgbGlzdEl0ZW1zLnB1c2goeyBsZXZlbDogbGV2ZWwsIG9yZGVyZWQ6IGlzT3JkZXJlZCwgY29udGVudDogaW5uZXIsIGZ1bGw6IG1hdGNoWzBdLCBpbmRleDogbWF0Y2guaW5kZXggfSk7CiAgICAgICAgICAgIGxpc3RSYW5nZXMucHVzaCh7IHN0YXJ0OiBtYXRjaC5pbmRleCwgZW5kOiBtYXRjaC5pbmRleCArIG1hdGNoWzBdLmxlbmd0aCB9KTsKICAgICAgICB9CgogICAgICAgIC8vIDNiLiBDb25zdHJ1aXJlIGwnSFRNTCBkZSBsaXN0ZSBpbWJyaXF1w6llIMOgIHBhcnRpciBkZXMgaXRlbXMKICAgICAgICBmdW5jdGlvbiBidWlsZE5lc3RlZExpc3QoaXRlbXMpIHsKICAgICAgICAgICAgaWYgKCFpdGVtcy5sZW5ndGgpIHJldHVybiAnJzsKICAgICAgICAgICAgdmFyIHJlc3VsdCA9ICcnOwogICAgICAgICAgICB2YXIgaSA9IDA7CgogICAgICAgICAgICBmdW5jdGlvbiBwcm9jZXNzR3JvdXAocGFyZW50TGV2ZWwpIHsKICAgICAgICAgICAgICAgIHZhciBncm91cEh0bWwgPSAnJzsKICAgICAgICAgICAgICAgIHZhciBsaXN0VGFnID0gbnVsbDsKICAgICAgICAgICAgICAgIHdoaWxlIChpIDwgaXRlbXMubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGl0ZW0gPSBpdGVtc1tpXTsKICAgICAgICAgICAgICAgICAgICBpZiAoaXRlbS5sZXZlbCA8IHBhcmVudExldmVsKSBicmVhazsKICAgICAgICAgICAgICAgICAgICBpZiAoaXRlbS5sZXZlbCA+IHBhcmVudExldmVsKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNvdXMtbGlzdGUgw6AgbCdpbnTDqXJpZXVyIGR1IGRlcm5pZXIgPGxpPgogICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3ViVGFnID0gaXRlbS5vcmRlcmVkID8gJ29sJyA6ICd1bCc7CiAgICAgICAgICAgICAgICAgICAgICAgIGdyb3VwSHRtbCArPSAnPCcgKyBzdWJUYWcgKyAnIHN0eWxlPSJtYXJnaW46MnB4IDAgMnB4IDIycHg7cGFkZGluZy1sZWZ0OjA7Ij4nOwogICAgICAgICAgICAgICAgICAgICAgICBncm91cEh0bWwgKz0gcHJvY2Vzc0dyb3VwKGl0ZW0ubGV2ZWwpOwogICAgICAgICAgICAgICAgICAgICAgICBncm91cEh0bWwgKz0gJzwvJyArIHN1YlRhZyArICc+JzsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAvLyBNw6ptZSBuaXZlYXUKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGN1clRhZyA9IGl0ZW0ub3JkZXJlZCA/ICdvbCcgOiAndWwnOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWxpc3RUYWcpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpc3RUYWcgPSBjdXJUYWc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBncm91cEh0bWwgPSAnPCcgKyBjdXJUYWcgKyAnIHN0eWxlPSJtYXJnaW46NHB4IDA7cGFkZGluZy1sZWZ0OjIycHg7Ij4nOwogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGN1clRhZyAhPT0gbGlzdFRhZykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ3JvdXBIdG1sICs9ICc8LycgKyBsaXN0VGFnICsgJz48JyArIGN1clRhZyArICcgc3R5bGU9Im1hcmdpbjo0cHggMDtwYWRkaW5nLWxlZnQ6MjJweDsiPic7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaXN0VGFnID0gY3VyVGFnOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGdyb3VwSHRtbCArPSAnPGxpPicgKyBpdGVtLmNvbnRlbnQ7CiAgICAgICAgICAgICAgICAgICAgICAgIGkrKzsKICAgICAgICAgICAgICAgICAgICAgICAgLy8gVsOpcmlmaWVyIHNpIGxlIHByb2NoYWluIGl0ZW0gZXN0IHVuIHNvdXMtbml2ZWF1CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpIDwgaXRlbXMubGVuZ3RoICYmIGl0ZW1zW2ldLmxldmVsID4gcGFyZW50TGV2ZWwpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdyb3VwSHRtbCArPSBwcm9jZXNzR3JvdXAoaXRlbXNbaV0ubGV2ZWwpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGdyb3VwSHRtbCArPSAnPC9saT4nOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmIChsaXN0VGFnKSBncm91cEh0bWwgKz0gJzwvJyArIGxpc3RUYWcgKyAnPic7CiAgICAgICAgICAgICAgICByZXR1cm4gZ3JvdXBIdG1sOwogICAgICAgICAgICB9CgogICAgICAgICAgICByZXR1cm4gcHJvY2Vzc0dyb3VwKDEpOwogICAgICAgIH0KCiAgICAgICAgaWYgKGxpc3RJdGVtcy5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgIC8vIFJlbXBsYWNlciBsZXMgYmxvY3MgZGUgbGlzdGUgZGFucyBsZSBIVE1MCiAgICAgICAgICAgIC8vIFRyb3V2ZXIgbGVzIGdyb3VwZXMgZGUgbGlzdGVzIGNvbnPDqWN1dGl2ZXMKICAgICAgICAgICAgdmFyIGdyb3VwcyA9IFtdOwogICAgICAgICAgICB2YXIgY3VycmVudEdyb3VwID0gW2xpc3RJdGVtc1swXV07CiAgICAgICAgICAgIGZvciAodmFyIGdpID0gMTsgZ2kgPCBsaXN0SXRlbXMubGVuZ3RoOyBnaSsrKSB7CiAgICAgICAgICAgICAgICAvLyBDb25zw6ljdXRpZiBzaSBsZXMgcG9zaXRpb25zIHNvbnQgcHJvY2hlcyAocGFzIGQnYXV0cmUgY29udGVudSBlbnRyZSBldXgpCiAgICAgICAgICAgICAgICB2YXIgcHJldkVuZCA9IGxpc3RSYW5nZXNbZ2ktMV0uZW5kOwogICAgICAgICAgICAgICAgdmFyIG5leHRTdGFydCA9IGxpc3RSYW5nZXNbZ2ldLnN0YXJ0OwogICAgICAgICAgICAgICAgdmFyIGJldHdlZW4gPSBodG1sLnN1YnN0cmluZyhwcmV2RW5kLCBuZXh0U3RhcnQpLnJlcGxhY2UoL1xzKy9nLCcnKTsKICAgICAgICAgICAgICAgIGlmIChiZXR3ZWVuID09PSAnJyB8fCBiZXR3ZWVuLmxlbmd0aCA8IDUwKSB7CiAgICAgICAgICAgICAgICAgICAgY3VycmVudEdyb3VwLnB1c2gobGlzdEl0ZW1zW2dpXSk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIGdyb3Vwcy5wdXNoKHsgaXRlbXM6IGN1cnJlbnRHcm91cCwgc3RhcnQ6IGxpc3RSYW5nZXNbZ2kgLSBjdXJyZW50R3JvdXAubGVuZ3RoXS5zdGFydCwgZW5kOiBsaXN0UmFuZ2VzW2dpLTFdLmVuZCB9KTsKICAgICAgICAgICAgICAgICAgICBjdXJyZW50R3JvdXAgPSBbbGlzdEl0ZW1zW2dpXV07CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZ3JvdXBzLnB1c2goeyBpdGVtczogY3VycmVudEdyb3VwLCBzdGFydDogbGlzdFJhbmdlc1tsaXN0SXRlbXMubGVuZ3RoIC0gY3VycmVudEdyb3VwLmxlbmd0aF0uc3RhcnQsIGVuZDogbGlzdFJhbmdlc1tsaXN0SXRlbXMubGVuZ3RoLTFdLmVuZCB9KTsKCiAgICAgICAgICAgIC8vIFJlY29uc3RydWlyZSBsZSBIVE1MIGVuIHJlbXBsYcOnYW50IGNoYXF1ZSBncm91cGUKICAgICAgICAgICAgdmFyIG5ld0h0bWwgPSAnJzsKICAgICAgICAgICAgdmFyIGxhc3RQb3MgPSAwOwogICAgICAgICAgICBncm91cHMuZm9yRWFjaChmdW5jdGlvbihncm91cCkgewogICAgICAgICAgICAgICAgbmV3SHRtbCArPSBodG1sLnN1YnN0cmluZyhsYXN0UG9zLCBncm91cC5zdGFydCk7CiAgICAgICAgICAgICAgICBuZXdIdG1sICs9IGJ1aWxkTmVzdGVkTGlzdChncm91cC5pdGVtcyk7CiAgICAgICAgICAgICAgICBsYXN0UG9zID0gZ3JvdXAuZW5kOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgbmV3SHRtbCArPSBodG1sLnN1YnN0cmluZyhsYXN0UG9zKTsKICAgICAgICAgICAgaHRtbCA9IG5ld0h0bWw7CiAgICAgICAgfQoKICAgICAgICAvLyDilIDilIAgNC4gSW1hZ2VzIDogZ2FyZGVyIGRhdGE6IGV0IGh0dHA6LCBzdXBwcmltZXIgZmlsZTovLyDilIDilIAKICAgICAgICBodG1sID0gaHRtbC5yZXBsYWNlKC88aW1nKFtePl0qKT4vZ2ksIGZ1bmN0aW9uKG0sIGF0dHJzKSB7CiAgICAgICAgICAgIHZhciBzcmNNID0gL3NyY1xzKj1ccypbIiddKFteIiddKylbIiddL2kuZXhlYyhhdHRycyk7CiAgICAgICAgICAgIGlmICghc3JjTSkgcmV0dXJuICcnOwogICAgICAgICAgICB2YXIgc3JjID0gc3JjTVsxXTsKICAgICAgICAgICAgaWYgKHNyYy5zdGFydHNXaXRoKCdkYXRhOicpIHx8IHNyYy5zdGFydHNXaXRoKCdodHRwOi8vJykgfHwgc3JjLnN0YXJ0c1dpdGgoJ2h0dHBzOi8vJykpIHsKICAgICAgICAgICAgICAgIHJldHVybiAnPGltZyBzcmM9IicgKyBzcmMgKyAnIiBzdHlsZT0ibWF4LXdpZHRoOjEwMCU7aGVpZ2h0OmF1dG87Ij4nOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiAnJzsKICAgICAgICB9KTsKCiAgICAgICAgLy8g4pSA4pSAIDUuIFN1cHByaW1lciBwcm9wcmnDqXTDqXMgbXNvLSBkYW5zIHN0eWxlcyDilIDilIAKICAgICAgICBodG1sID0gaHRtbC5yZXBsYWNlKC9tc28tW2EtekEtWlwtXStccyo6W147Il0qKDt8KD89XHMqIikpL2csICcnKTsKCiAgICAgICAgLy8g4pSA4pSAIDYuIFN1cHByaW1lciBmb250LWZhbWlseSBTeW1ib2wvV2luZ2RpbmdzIOKUgOKUgAogICAgICAgIGh0bWwgPSBodG1sLnJlcGxhY2UoL2ZvbnQtZmFtaWx5XHMqOlxzKlsiJ10/XHMqKD86U3ltYm9sfFdpbmdkaW5nc1teOywnIl0qKVxzKlsiJ10/XHMqOz8vZ2ksICcnKTsKCiAgICAgICAgLy8g4pSA4pSAIDcuIFN1cHByaW1lciBjbGFzc2VzIE1zbyDilIDilIAKICAgICAgICBodG1sID0gaHRtbC5yZXBsYWNlKC9ccypjbGFzcz0iTXNvW14iXSoiL2dpLCAnJyk7CgogICAgICAgIC8vIOKUgOKUgCA4LiBOZXR0b3llciBzdHlsZXMgdmlkZXMgZXQgcGFyYWdyYXBoZXMgdmlkZXMg4pSA4pSACiAgICAgICAgaHRtbCA9IGh0bWwucmVwbGFjZSgvXHMqc3R5bGU9IlxzKjs/XHMqIi9naSwgJycpOwogICAgICAgIGh0bWwgPSBodG1sLnJlcGxhY2UoLzxwW14+XSo+XHMqKDxiclxzKlwvPz4pP1xzKjxcL3A+L2dpLCAnJyk7CiAgICAgICAgaHRtbCA9IGh0bWwucmVwbGFjZSgvPHNwYW5ccyo+KFtcc1xTXSo/KTxcL3NwYW4+L2dpLCAnJDEnKTsKCiAgICAgICAgcmV0dXJuIGh0bWwudHJpbSgpOwogICAgfQoKICAgIGZ1bmN0aW9uIGFwcGx5Q2xlYW5QYXN0ZShlZGl0b3IsIGh0bWwpIHsKICAgICAgICB2YXIgY2xlYW5lZCA9IGNsZWFuV29yZEh0bWwoaHRtbCk7CiAgICAgICAgZWRpdG9yLmZvY3VzKCk7CiAgICAgICAgdmFyIHNlbCA9IHdpbmRvdy5nZXRTZWxlY3Rpb24oKTsKICAgICAgICB2YXIgcmFuZ2UgPSBzZWwgJiYgc2VsLnJhbmdlQ291bnQgPyBzZWwuZ2V0UmFuZ2VBdCgwKSA6IG51bGw7CiAgICAgICAgaWYgKHJhbmdlICYmIGVkaXRvci5jb250YWlucyhyYW5nZS5jb21tb25BbmNlc3RvckNvbnRhaW5lcikpIHsKICAgICAgICAgICAgcmFuZ2UuZGVsZXRlQ29udGVudHMoKTsKICAgICAgICAgICAgdmFyIGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgICAgICAgICBkaXYuaW5uZXJIVE1MID0gY2xlYW5lZDsKICAgICAgICAgICAgdmFyIGZyYWcgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7CiAgICAgICAgICAgIHZhciBub2RlOwogICAgICAgICAgICB3aGlsZSAoKG5vZGUgPSBkaXYuZmlyc3RDaGlsZCkpIGZyYWcuYXBwZW5kQ2hpbGQobm9kZSk7CiAgICAgICAgICAgIHJhbmdlLmluc2VydE5vZGUoZnJhZyk7CiAgICAgICAgICAgIC8vIE1vdmUgY3Vyc29yIHRvIGVuZCBvZiBpbnNlcnRlZCBjb250ZW50CiAgICAgICAgICAgIHJhbmdlLmNvbGxhcHNlKGZhbHNlKTsKICAgICAgICAgICAgc2VsLnJlbW92ZUFsbFJhbmdlcygpOwogICAgICAgICAgICBzZWwuYWRkUmFuZ2UocmFuZ2UpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGRvY3VtZW50LmV4ZWNDb21tYW5kKCdpbnNlcnRIVE1MJywgZmFsc2UsIGNsZWFuZWQpOwogICAgICAgIH0KICAgIH0KCiAgICBhc3luYyBmdW5jdGlvbiBwYXN0ZUZyb21Xb3JkKCkgewogICAgICAgIC8vIFVzZSB0cmFja2VkIGVkaXRvciAoYnV0dG9uIGNsaWNrIHN0ZWFscyBmb2N1cyBmcm9tIGNvbnRlbnRlZGl0YWJsZSkKICAgICAgICB2YXIgZWRpdG9yID0gd2luZG93Ll9sYXN0Rm9jdXNlZEVkaXRvciB8fCBkb2N1bWVudC5hY3RpdmVFbGVtZW50OwogICAgICAgIGlmICghZWRpdG9yIHx8ICFlZGl0b3IuaXNDb250ZW50RWRpdGFibGUpIHsKICAgICAgICAgICAgYWxlcnQoJ0NsaXF1ZXogZFwnYWJvcmQgZGFucyBsYSB6b25lIGRlIHRleHRlLCBwdWlzIHV0aWxpc2V6IGNlIGJvdXRvbi4nKTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICBlZGl0b3IuZm9jdXMoKTsKICAgICAgICB0cnkgewogICAgICAgICAgICBpZiAoIW5hdmlnYXRvci5jbGlwYm9hcmQgfHwgIW5hdmlnYXRvci5jbGlwYm9hcmQucmVhZCkgdGhyb3cgbmV3IEVycm9yKCdBUEkgbm9uIGRpc3BvbmlibGUnKTsKICAgICAgICAgICAgdmFyIGl0ZW1zID0gYXdhaXQgbmF2aWdhdG9yLmNsaXBib2FyZC5yZWFkKCk7CiAgICAgICAgICAgIGZvciAodmFyIGl0ZW0gb2YgaXRlbXMpIHsKICAgICAgICAgICAgICAgIGlmIChpdGVtLnR5cGVzLmluY2x1ZGVzKCd0ZXh0L2h0bWwnKSkgewogICAgICAgICAgICAgICAgICAgIHZhciBibG9iID0gYXdhaXQgaXRlbS5nZXRUeXBlKCd0ZXh0L2h0bWwnKTsKICAgICAgICAgICAgICAgICAgICB2YXIgaHRtbCA9IGF3YWl0IGJsb2IudGV4dCgpOwogICAgICAgICAgICAgICAgICAgIGFwcGx5Q2xlYW5QYXN0ZShlZGl0b3IsIGh0bWwpOwogICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmIChpdGVtLnR5cGVzLmluY2x1ZGVzKCd0ZXh0L3BsYWluJykpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgYmxvYiA9IGF3YWl0IGl0ZW0uZ2V0VHlwZSgndGV4dC9wbGFpbicpOwogICAgICAgICAgICAgICAgICAgIHZhciB0eHQgPSBhd2FpdCBibG9iLnRleHQoKTsKICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5leGVjQ29tbWFuZCgnaW5zZXJ0VGV4dCcsIGZhbHNlLCB0eHQpOwogICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0gY2F0Y2goZSkgewogICAgICAgICAgICAvLyBGYWxsYmFjazogYXNrIHVzZXIgdG8gdXNlIEN0cmwrViDigJQgdGhlIHBhc3RlIGV2ZW50IGxpc3RlbmVyIHdpbGwgY2xlYW4gaXQKICAgICAgICAgICAgYWxlcnQoJ1V0aWxpc2V6IEN0cmwrViBkaXJlY3RlbWVudCBkYW5zIGxcJ8OpZGl0ZXVyIDogbGEgbWlzZSBlbiBmb3JtZSBXb3JkIHNlcmEgYXV0b21hdGlxdWVtZW50IHByw6lzZXJ2w6llIGV0IG5ldHRvecOpZS4nKTsKICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gaW5pdFdvcmRQYXN0ZSgpIHsKICAgICAgICAvLyBBam91dGVyIHVuIMOpY291dGV1ciBkZSBjb2xsYWdlIHN1ciBUT1VTIGxlcyDDqWRpdGV1cnMKICAgICAgICAvLyBDJ2VzdCBsYSBtw6l0aG9kZSBsYSBwbHVzIGZpYWJsZSA6IGludGVyY2VwdGUgQ3RybCtWIG5hdGl2ZW1lbnQKICAgICAgICBmdW5jdGlvbiB3b3JkUGFzdGVIYW5kbGVyKGUpIHsKICAgICAgICAgICAgdmFyIGNkID0gZS5jbGlwYm9hcmREYXRhIHx8IHdpbmRvdy5jbGlwYm9hcmREYXRhOwogICAgICAgICAgICBpZiAoIWNkKSByZXR1cm47CiAgICAgICAgICAgIHZhciBlZGl0b3IgPSBlLmN1cnJlbnRUYXJnZXQ7CgogICAgICAgICAgICAvLyDilIDilIAgQ2hlcmNoZXIgdW5lIGltYWdlIGRhbnMgaXRlbXMgKHNjcmVlbnNob3QsIGNvcGllIGQnaW1hZ2UpIOKUgOKUgAogICAgICAgICAgICBmdW5jdGlvbiBnZXRJbWFnZUl0ZW0oY2QpIHsKICAgICAgICAgICAgICAgIGlmICghY2QuaXRlbXMpIHJldHVybiBudWxsOwogICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjZC5pdGVtcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgICAgIGlmIChjZC5pdGVtc1tpXS50eXBlLnN0YXJ0c1dpdGgoJ2ltYWdlLycpKSByZXR1cm4gY2QuaXRlbXNbaV07CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgdmFyIGh0bWwgPSBjZC5nZXREYXRhKCd0ZXh0L2h0bWwnKTsKICAgICAgICAgICAgdmFyIGltZ0l0ZW0gPSBnZXRJbWFnZUl0ZW0oY2QpOwoKICAgICAgICAgICAgLy8g4pSA4pSAIENhcyAxIDogSW1hZ2Ugc2V1bGUgKHBhcyBkZSBIVE1MIG91IEhUTUwgdmlkZSkg4pSA4pSACiAgICAgICAgICAgIGlmIChpbWdJdGVtICYmICghaHRtbCB8fCBodG1sLnRyaW0oKSA9PT0gJycpKSB7CiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgICAgICAgICB2YXIgYmxvYiA9IGltZ0l0ZW0uZ2V0QXNGaWxlKCk7CiAgICAgICAgICAgICAgICBpZiAoIWJsb2IpIHJldHVybjsKICAgICAgICAgICAgICAgIHZhciByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpOwogICAgICAgICAgICAgICAgcmVhZGVyLm9ubG9hZCA9IGZ1bmN0aW9uKGV2KSB7CiAgICAgICAgICAgICAgICAgICAgZWRpdG9yLmZvY3VzKCk7CiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2luc2VydEhUTUwnLCBmYWxzZSwKICAgICAgICAgICAgICAgICAgICAgICAgJzxpbWcgc3JjPSInICsgZXYudGFyZ2V0LnJlc3VsdCArICciIHN0eWxlPSJtYXgtd2lkdGg6MTAwJTtoZWlnaHQ6YXV0bztkaXNwbGF5OmJsb2NrO21hcmdpbjo0cHggMDsiPicpOwogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIHJlYWRlci5yZWFkQXNEYXRhVVJMKGJsb2IpOwogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAoIWh0bWwpIHJldHVybjsKCiAgICAgICAgICAgIC8vIFNpIHBhcyBkZSBtYXJxdWV1ciBXb3JkIG5pIEhUTUwgcmljaGUg4oaSIGxhaXNzZXIgbGUgbmF2aWdhdGV1ciBnw6lyZXIKICAgICAgICAgICAgdmFyIGlzV29yZCA9IGh0bWwuaW5jbHVkZXMoJ21zby0nKSB8fCBodG1sLmluY2x1ZGVzKCd1cm46c2NoZW1hcy1taWNyb3NvZnQtY29tJykgfHwKICAgICAgICAgICAgICAgICAgICAgICAgIGh0bWwuaW5jbHVkZXMoJ01zb05vcm1hbCcpIHx8IGh0bWwuaW5jbHVkZXMoJ1dvcmREb2N1bWVudCcpOwogICAgICAgICAgICB2YXIgaXNSaWNoSHRtbCA9IGh0bWwuaW5jbHVkZXMoJzx1bCcpIHx8IGh0bWwuaW5jbHVkZXMoJzxvbCcpIHx8CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaHRtbC5pbmNsdWRlcygnPHRhYmxlJykgfHwgaHRtbC5pbmNsdWRlcygnPGltZycpOwogICAgICAgICAgICBpZiAoIWlzV29yZCAmJiAhaXNSaWNoSHRtbCkgcmV0dXJuOwoKICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwoKICAgICAgICAgICAgLy8g4pSA4pSAIENhcyAyIDogSFRNTCBXb3JkIGF2ZWMgcG9zc2libGVzIGltYWdlcyBpbmxpbmUg4pSA4pSACiAgICAgICAgICAgIGlmIChpbWdJdGVtICYmIGlzV29yZCkgewogICAgICAgICAgICAgICAgdmFyIGJsb2IyID0gaW1nSXRlbS5nZXRBc0ZpbGUoKTsKICAgICAgICAgICAgICAgIGlmIChibG9iMikgewogICAgICAgICAgICAgICAgICAgIHZhciByZWFkZXIyID0gbmV3IEZpbGVSZWFkZXIoKTsKICAgICAgICAgICAgICAgICAgICByZWFkZXIyLm9ubG9hZCA9IGZ1bmN0aW9uKGV2KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJlbXBsYWNlciBsZSBwcmVtaWVyIDxpbWc+IHNhbnMgZGF0YTogc3JjIHBhciBjZXR0ZSBpbWFnZQogICAgICAgICAgICAgICAgICAgICAgICB2YXIgcHJvY2Vzc2VkSHRtbCA9IGh0bWwucmVwbGFjZSgvPGltZyhbXj5dKik+L2ksIGZ1bmN0aW9uKG0sIGF0dHJzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3JjTSA9IC9zcmNccyo9XHMqWyInXShbXiInXSspWyInXS9pLmV4ZWMoYXR0cnMpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNyY00gJiYgc3JjTVsxXS5zdGFydHNXaXRoKCdkYXRhOicpKSByZXR1cm4gbTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAnPGltZyBzcmM9IicgKyBldi50YXJnZXQucmVzdWx0ICsgJyIgc3R5bGU9Im1heC13aWR0aDoxMDAlO2hlaWdodDphdXRvOyI+JzsKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGFwcGx5Q2xlYW5QYXN0ZShlZGl0b3IsIHByb2Nlc3NlZEh0bWwpOwogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgcmVhZGVyMi5yZWFkQXNEYXRhVVJMKGJsb2IyKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGFwcGx5Q2xlYW5QYXN0ZShlZGl0b3IsIGh0bWwpOwogICAgICAgIH0KICAgICAgICAvLyBBdHRhY2hlciDDoCB0b3VzIGxlcyDDqWRpdGV1cnMgZXhpc3RhbnRzCiAgICAgICAgLy8gVHJhY2sgbGFzdCBmb2N1c2VkIGVkaXRvciBzbyBidXR0b24gY2xpY2sgZG9lc24ndCBicmVhayBmb2N1cyBkZXRlY3Rpb24KICAgICAgICBmdW5jdGlvbiB0cmFja0ZvY3VzKGVsKSB7CiAgICAgICAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoJ2ZvY3VzJywgZnVuY3Rpb24oKSB7IHdpbmRvdy5fbGFzdEZvY3VzZWRFZGl0b3IgPSBlbDsgfSk7CiAgICAgICAgfQogICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ1tjb250ZW50ZWRpdGFibGU9InRydWUiXScpLmZvckVhY2goZnVuY3Rpb24oZWwpIHsKICAgICAgICAgICAgZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcigncGFzdGUnLCB3b3JkUGFzdGVIYW5kbGVyKTsKICAgICAgICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcigncGFzdGUnLCB3b3JkUGFzdGVIYW5kbGVyKTsKICAgICAgICAgICAgdHJhY2tGb2N1cyhlbCk7CiAgICAgICAgfSk7CiAgICAgICAgLy8gT2JzZXJ2ZXIgcG91ciBmdXR1cnMgw6lkaXRldXJzIGR5bmFtaXF1ZXMKICAgICAgICBpZiAod2luZG93Ll93b3JkUGFzdGVPYnNlcnZlcikgd2luZG93Ll93b3JkUGFzdGVPYnNlcnZlci5kaXNjb25uZWN0KCk7CiAgICAgICAgd2luZG93Ll93b3JkUGFzdGVPYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKGZ1bmN0aW9uKG11dGF0aW9ucykgewogICAgICAgICAgICBtdXRhdGlvbnMuZm9yRWFjaChmdW5jdGlvbihtKSB7CiAgICAgICAgICAgICAgICBtLmFkZGVkTm9kZXMuZm9yRWFjaChmdW5jdGlvbihub2RlKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKG5vZGUubm9kZVR5cGUgPT09IDEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5vZGUuY29udGVudEVkaXRhYmxlID09PSAndHJ1ZScpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vZGUuYWRkRXZlbnRMaXN0ZW5lcigncGFzdGUnLCB3b3JkUGFzdGVIYW5kbGVyKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vZGUuYWRkRXZlbnRMaXN0ZW5lcignZm9jdXMnLCBmdW5jdGlvbigpIHsgd2luZG93Ll9sYXN0Rm9jdXNlZEVkaXRvciA9IG5vZGU7IH0pOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIG5vZGUucXVlcnlTZWxlY3RvckFsbCAmJiBub2RlLnF1ZXJ5U2VsZWN0b3JBbGwoJ1tjb250ZW50ZWRpdGFibGU9InRydWUiXScpLmZvckVhY2goZnVuY3Rpb24oZWwpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoJ3Bhc3RlJywgd29yZFBhc3RlSGFuZGxlcik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbC5hZGRFdmVudExpc3RlbmVyKCdmb2N1cycsIGZ1bmN0aW9uKCkgeyB3aW5kb3cuX2xhc3RGb2N1c2VkRWRpdG9yID0gZWw7IH0pOwogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICAgICAgd2luZG93Ll93b3JkUGFzdGVPYnNlcnZlci5vYnNlcnZlKGRvY3VtZW50LmJvZHksIHsgY2hpbGRMaXN0OiB0cnVlLCBzdWJ0cmVlOiB0cnVlIH0pOwogICAgfQoKICAgIDwvc2NyaXB0PgoKICAgIDwhLS0gTW9kYWwgUHJvY8OpZHVyZSAtLT4KICAgIDxkaXYgaWQ9InByb2NNb2QiIGNsYXNzPSJtLW92IiBzdHlsZT0iZGlzcGxheTpub25lO2xlZnQ6MjgwcHgiIG9uY2xpY2s9ImlmKGV2ZW50LnRhcmdldD09PXRoaXMpY2xvc2VQcm9jTW9kYWwoKSI+CiAgICAgICAgPGRpdiBjbGFzcz0ibS1ib3giIHN0eWxlPSJ3aWR0aDpjYWxjKDEwMHZ3IC0gMjgwcHgpO21heC13aWR0aDpjYWxjKDEwMHZ3IC0gMjgwcHgpO2hlaWdodDoxMDB2aDttYXgtaGVpZ2h0OjEwMHZoO2JvcmRlci1yYWRpdXM6MDtwYWRkaW5nOjIwcHggMjhweDtib3gtc2l6aW5nOmJvcmRlci1ib3g7bWFyZ2luLWxlZnQ6YXV0byI+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9Im0taGVhZCI+PGgzIGlkPSJwcm9jTW9kLXRpdGxlIj5Ob3V2ZWxsZSBwcm9jw6lkdXJlPC9oMz48YnV0dG9uIGNsYXNzPSJtLWNscyIgb25jbGljaz0id2luZG93LmNsb3NlUHJvY01vZGFsKCkiPiZ0aW1lczs8L2J1dHRvbj48L2Rpdj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0ibS1ib2R5IiBzdHlsZT0ibWF4LWhlaWdodDo3OHZoO292ZXJmbG93LXk6YXV0byI+CiAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJkaXNwbGF5OmZsZXg7Z2FwOjE0cHg7bWFyZ2luLWJvdHRvbToxNnB4O2JhY2tncm91bmQ6I2Y4ZjlmYTtwYWRkaW5nOjE2cHg7Ym9yZGVyLXJhZGl1czoxMHB4O2JvcmRlcjoxcHggc29saWQgI2VlZSI+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iZmxleDowIDAgMTEwcHgiPgogICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgc3R5bGU9ImRpc3BsYXk6YmxvY2s7Zm9udC1zaXplOi43cmVtO2ZvbnQtd2VpZ2h0OjYwMDtjb2xvcjojODg4O3RleHQtdHJhbnNmb3JtOnVwcGVyY2FzZTtsZXR0ZXItc3BhY2luZzouNXB4O21hcmdpbi1ib3R0b206NnB4Ij5Db2RlPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IGlkPSJwcm9jLWNvZGUiIHBsYWNlaG9sZGVyPSJBIDEiIG1heGxlbmd0aD0iMTAiIG9uaW5wdXQ9ImF1dG9Qcm9jQ2F0KHRoaXMudmFsdWUpIiBzdHlsZT0id2lkdGg6MTAwJTtwYWRkaW5nOjEwcHggMTJweDtib3JkZXI6MnB4IHNvbGlkICNlMGUwZTA7Ym9yZGVyLXJhZGl1czo4cHg7Zm9udC1zaXplOjFyZW07Zm9udC13ZWlnaHQ6NzAwO3RleHQtdHJhbnNmb3JtOnVwcGVyY2FzZTt0ZXh0LWFsaWduOmNlbnRlcjtiYWNrZ3JvdW5kOiNmZmY7dHJhbnNpdGlvbjpib3JkZXItY29sb3IgLjJzO291dGxpbmU6bm9uZTtib3gtc2l6aW5nOmJvcmRlci1ib3giIG9uZm9jdXM9InRoaXMuc3R5bGUuYm9yZGVyQ29sb3I9J3ZhcigtLWhlYWRlciwjMmMzZTUwKSciIG9uYmx1cj0idGhpcy5zdHlsZS5ib3JkZXJDb2xvcj0nI2UwZTBlMCciPgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9ImZsZXg6MSI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBzdHlsZT0iZGlzcGxheTpibG9jaztmb250LXNpemU6LjdyZW07Zm9udC13ZWlnaHQ6NjAwO2NvbG9yOiM4ODg7dGV4dC10cmFuc2Zvcm06dXBwZXJjYXNlO2xldHRlci1zcGFjaW5nOi41cHg7bWFyZ2luLWJvdHRvbTo2cHgiPlRpdHJlPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IGlkPSJwcm9jLXRpdGxlIiBwbGFjZWhvbGRlcj0iVGl0cmUgZGUgbGEgcHJvY8OpZHVyZSIgc3R5bGU9IndpZHRoOjEwMCU7cGFkZGluZzoxMHB4IDEycHg7Ym9yZGVyOjJweCBzb2xpZCAjZTBlMGUwO2JvcmRlci1yYWRpdXM6OHB4O2ZvbnQtc2l6ZTouOTVyZW07YmFja2dyb3VuZDojZmZmO3RyYW5zaXRpb246Ym9yZGVyLWNvbG9yIC4ycztvdXRsaW5lOm5vbmU7Ym94LXNpemluZzpib3JkZXItYm94IiBvbmZvY3VzPSJ0aGlzLnN0eWxlLmJvcmRlckNvbG9yPSd2YXIoLS1oZWFkZXIsIzJjM2U1MCknIiBvbmJsdXI9InRoaXMuc3R5bGUuYm9yZGVyQ29sb3I9JyNlMGUwZTAnIj4KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJmbGV4OjAgMCAyMjBweCI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBzdHlsZT0iZGlzcGxheTpibG9jaztmb250LXNpemU6LjdyZW07Zm9udC13ZWlnaHQ6NjAwO2NvbG9yOiM4ODg7dGV4dC10cmFuc2Zvcm06dXBwZXJjYXNlO2xldHRlci1zcGFjaW5nOi41cHg7bWFyZ2luLWJvdHRvbTo2cHgiPkNhdMOpZ29yaWU8L2xhYmVsPgogICAgICAgICAgICAgICAgICAgIDxzZWxlY3QgaWQ9InByb2MtY2F0IiBzdHlsZT0id2lkdGg6MTAwJTtwYWRkaW5nOjEwcHggMTJweDtib3JkZXI6MnB4IHNvbGlkICNlMGUwZTA7Ym9yZGVyLXJhZGl1czo4cHg7Zm9udC1zaXplOi44OHJlbTtiYWNrZ3JvdW5kOiNmZmY7Y3Vyc29yOnBvaW50ZXI7b3V0bGluZTpub25lO3RyYW5zaXRpb246Ym9yZGVyLWNvbG9yIC4yczthcHBlYXJhbmNlOmF1dG87Ym94LXNpemluZzpib3JkZXItYm94IiBvbmNoYW5nZT0iaWYodGhpcy52YWx1ZT09PSdfX25ld19fJyl7dmFyIG49cHJvbXB0KCdOb3V2ZWxsZSBjYXTDqWdvcmllIDonKTtpZihuKXt2YXIgbz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCdvcHRpb24nKTtvLnZhbHVlPW47by50ZXh0PW47dGhpcy5pbnNlcnRCZWZvcmUobyx0aGlzLmxhc3RDaGlsZCk7dGhpcy52YWx1ZT1uO31lbHNle3RoaXMudmFsdWU9Jyc7fX0iPgogICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSIiPuKAlCBDaG9pc2lyIOKAlDwvb3B0aW9uPjxvcHRpb24gdmFsdWU9IkFkbWluaXN0cmF0aWYiPkFkbWluaXN0cmF0aWY8L29wdGlvbj48b3B0aW9uIHZhbHVlPSLDiWzDqHZlcyBCRVAiPsOJbMOodmVzIEJFUDwvb3B0aW9uPjxvcHRpb24gdmFsdWU9IkNvbmNlcnRhdGlvbnMiPkNvbmNlcnRhdGlvbnM8L29wdGlvbj48b3B0aW9uIHZhbHVlPSJEaXNwb3NpdGlmcyBQw6lkYWdvZ2lxdWVzIj5EaXNwb3NpdGlmcyBQw6lkYWdvZ2lxdWVzPC9vcHRpb24+PG9wdGlvbiB2YWx1ZT0iU3VpdmkgZGVzIMOpbMOodmVzIj5TdWl2aSBkZXMgw6lsw6h2ZXM8L29wdGlvbj48b3B0aW9uIHZhbHVlPSJJbnRlcnZlbmFudHMiPkludGVydmVuYW50czwvb3B0aW9uPjxvcHRpb24gdmFsdWU9Ik51bcOpcmlxdWUiPk51bcOpcmlxdWU8L29wdGlvbj48b3B0aW9uIHZhbHVlPSJPcmllbnRhdGlvbiI+T3JpZW50YXRpb248L29wdGlvbj48b3B0aW9uIHZhbHVlPSJQcm9qZXRzIj5Qcm9qZXRzPC9vcHRpb24+PG9wdGlvbiB2YWx1ZT0iUG9ydGVzIE91dmVydGVzIj5Qb3J0ZXMgT3V2ZXJ0ZXM8L29wdGlvbj48b3B0aW9uIHZhbHVlPSJSZXNzb3VyY2VzIEh1bWFpbmVzIj5SZXNzb3VyY2VzIEh1bWFpbmVzPC9vcHRpb24+PG9wdGlvbiB2YWx1ZT0iU8OpY3VyaXTDqSI+U8OpY3VyaXTDqTwvb3B0aW9uPjxvcHRpb24gdmFsdWU9Il9fbmV3X18iPisgTm91dmVsbGUgY2F0w6lnb3JpZeKApjwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgIDwvc2VsZWN0PgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJkaXNwbGF5OmZsZXg7Z2FwOjE0cHg7bWFyZ2luLWJvdHRvbToxNnB4O2JhY2tncm91bmQ6I2Y4ZjlmYTtwYWRkaW5nOjEycHggMTZweDtib3JkZXItcmFkaXVzOjEwcHg7Ym9yZGVyOjFweCBzb2xpZCAjZWVlO2FsaWduLWl0ZW1zOmNlbnRlciI+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0id2lkdGg6ODBweDtmbGV4LXNocmluazowIj4KICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIHN0eWxlPSJkaXNwbGF5OmJsb2NrO2ZvbnQtc2l6ZTouN3JlbTtmb250LXdlaWdodDo2MDA7Y29sb3I6Izg4ODt0ZXh0LXRyYW5zZm9ybTp1cHBlcmNhc2U7bGV0dGVyLXNwYWNpbmc6LjVweDttYXJnaW4tYm90dG9tOjZweCI+U2VtLiBkw6lidXQ8L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0ibnVtYmVyIiBpZD0icHJvYy13cyIgbWluPSIxIiBtYXg9IjUzIiBzdHlsZT0id2lkdGg6ODBweDtwYWRkaW5nOjhweCA2cHg7Ym9yZGVyOjJweCBzb2xpZCAjZTBlMGUwO2JvcmRlci1yYWRpdXM6OHB4O2ZvbnQtc2l6ZTouOXJlbTt0ZXh0LWFsaWduOmNlbnRlcjtib3gtc2l6aW5nOmJvcmRlci1ib3giPgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9IndpZHRoOjgwcHg7ZmxleC1zaHJpbms6MCI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBzdHlsZT0iZGlzcGxheTpibG9jaztmb250LXNpemU6LjdyZW07Zm9udC13ZWlnaHQ6NjAwO2NvbG9yOiM4ODg7dGV4dC10cmFuc2Zvcm06dXBwZXJjYXNlO2xldHRlci1zcGFjaW5nOi41cHg7bWFyZ2luLWJvdHRvbTo2cHgiPlNlbS4gZmluPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9Im51bWJlciIgaWQ9InByb2Mtd2UiIG1pbj0iMSIgbWF4PSI1MyIgc3R5bGU9IndpZHRoOjgwcHg7cGFkZGluZzo4cHggNnB4O2JvcmRlcjoycHggc29saWQgI2UwZTBlMDtib3JkZXItcmFkaXVzOjhweDtmb250LXNpemU6LjlyZW07dGV4dC1hbGlnbjpjZW50ZXI7Ym94LXNpemluZzpib3JkZXItYm94Ij4KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJkaXNwbGF5OmZsZXg7YWxpZ24taXRlbXM6Y2VudGVyO2dhcDo2cHg7cGFkZGluZy10b3A6MTRweCI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJjaGVja2JveCIgaWQ9InByb2MtYW5uZWUiIHN0eWxlPSJ3aWR0aDoxOHB4O2hlaWdodDoxOHB4O2N1cnNvcjpwb2ludGVyIiBvbmNoYW5nZT0idmFyIGQ9dGhpcy5jaGVja2VkO2RvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcm9jLXdzJykuZGlzYWJsZWQ9ZDtkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJvYy13ZScpLmRpc2FibGVkPWQ7aWYoZCl7ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Byb2Mtd3MnKS52YWx1ZT0nJztkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJvYy13ZScpLnZhbHVlPScnO2RvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcm9jLXdzJykuc3R5bGUub3BhY2l0eT0nLjQnO2RvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcm9jLXdlJykuc3R5bGUub3BhY2l0eT0nLjQnO31lbHNle2RvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcm9jLXdzJykuc3R5bGUub3BhY2l0eT0nMSc7ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Byb2Mtd2UnKS5zdHlsZS5vcGFjaXR5PScxJzt9Ij4KICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGZvcj0icHJvYy1hbm5lZSIgc3R5bGU9Im1hcmdpbjowO2N1cnNvcjpwb2ludGVyO2ZvbnQtc2l6ZTouOHJlbTtmb250LXdlaWdodDo2MDA7Y29sb3I6IzU1NTt3aGl0ZS1zcGFjZTpub3dyYXAiPsOAIGwnYW5uw6llPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJtYXJnaW4tYm90dG9tOjhweCI+PGxhYmVsIHN0eWxlPSJkaXNwbGF5OmJsb2NrO2ZvbnQtc2l6ZTouODJyZW07Zm9udC13ZWlnaHQ6NjAwO2NvbG9yOiM1NTU7bWFyZ2luLWJvdHRvbTo2cHgiPkFjdGlvbnMgLyDDiXRhcGVzPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJydGUtYmFyIj48YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0iZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2JvbGQnKSIgdGl0bGU9IkdyYXMiPjxiPkc8L2I+PC9idXR0b24+PGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9ImRvY3VtZW50LmV4ZWNDb21tYW5kKCdpdGFsaWMnKSIgdGl0bGU9Ikl0YWxpcXVlIj48aT5JPC9pPjwvYnV0dG9uPjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJkb2N1bWVudC5leGVjQ29tbWFuZCgndW5kZXJsaW5lJykiIHRpdGxlPSJTb3VsaWduw6kiPjx1PlM8L3U+PC9idXR0b24+PHNwYW4gY2xhc3M9InJ0ZS1zZXAiPjwvc3Bhbj48YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0iZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2luc2VydFVub3JkZXJlZExpc3QnKSIgdGl0bGU9IlB1Y2VzIj48aSBjbGFzcz0iZmFzIGZhLWxpc3QtdWwiPjwvaT48L2J1dHRvbj48YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0iZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2luc2VydE9yZGVyZWRMaXN0JykiIHRpdGxlPSJOdW3DqXJvdMOpZSI+PGkgY2xhc3M9ImZhcyBmYS1saXN0LW9sIj48L2k+PC9idXR0b24+PHNwYW4gY2xhc3M9InJ0ZS1zZXAiPjwvc3Bhbj48YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0icHJvY0luc2VydEljb24oJ21haWwnKSIgdGl0bGU9Ik1haWwiPjxzcGFuIGNsYXNzPSJwcm9jLWljb24tbWFpbCI+PGkgY2xhc3M9ImZhcyBmYS1lbnZlbG9wZSI+PC9pPjwvc3Bhbj48L2J1dHRvbj48YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0icHJvY0luc2VydEljb24oJ2FsZXJ0JykiIHRpdGxlPSJBbGVydGUiPjxzcGFuIGNsYXNzPSJwcm9jLWljb24tYWxlcnQiPjxpIGNsYXNzPSJmYXMgZmEtZXhjbGFtYXRpb24iPjwvaT48L3NwYW4+PC9idXR0b24+PGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9InByb2NJbnNlcnRJY29uKCdpZGVhJykiIHRpdGxlPSJJZMOpZSI+PHNwYW4gY2xhc3M9InByb2MtaWNvbi1pZGVhIj48aSBjbGFzcz0iZmFzIGZhLWxpZ2h0YnVsYiI+PC9pPjwvc3Bhbj48L2J1dHRvbj48c3BhbiBjbGFzcz0icnRlLXNlcCI+PC9zcGFuPjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJydGVDb2xvcih0aGlzKSIgdGl0bGU9IkNvdWxldXIiPjxpIGNsYXNzPSJmYXMgZmEtcGFsZXR0ZSI+PC9pPjwvYnV0dG9uPjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJkb2N1bWVudC5leGVjQ29tbWFuZCgndW5kbycpIiB0aXRsZT0iQW5udWxlciI+PGkgY2xhc3M9ImZhcyBmYS11bmRvIj48L2k+PC9idXR0b24+PHNwYW4gY2xhc3M9InJ0ZS1zZXAiPjwvc3Bhbj48YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0icnRlSW1nUmVzaXplKCdzbWFsbCcpIiB0aXRsZT0iSW1hZ2UgMjUlIj4mI3gxRjVCQztTPC9idXR0b24+PGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9InJ0ZUltZ1Jlc2l6ZSgnbWVkaXVtJykiIHRpdGxlPSJJbWFnZSA1MCUiPiYjeDFGNUJDO008L2J1dHRvbj48YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0icnRlSW1nUmVzaXplKCdsYXJnZScpIiB0aXRsZT0iSW1hZ2UgNzUlIj4mI3gxRjVCQztMPC9idXR0b24+PGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9InJ0ZUltZ1Jlc2l6ZSgnZnVsbCcpIiB0aXRsZT0iSW1hZ2UgMTAwJSI+JiN4MUY1QkM7RjwvYnV0dG9uPjxzcGFuIGNsYXNzPSJydGUtc2VwIj48L3NwYW4+PGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9ImRvY3VtZW50LmV4ZWNDb21tYW5kKCdqdXN0aWZ5TGVmdCcpIiB0aXRsZT0iQWxpZ25lciDDoCBnYXVjaGUiPjxpIGNsYXNzPSJmYXMgZmEtYWxpZ24tbGVmdCI+PC9pPjwvYnV0dG9uPjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJkb2N1bWVudC5leGVjQ29tbWFuZCgnanVzdGlmeUNlbnRlcicpIiB0aXRsZT0iQ2VudHJlciI+PGkgY2xhc3M9ImZhcyBmYS1hbGlnbi1jZW50ZXIiPjwvaT48L2J1dHRvbj48YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0iZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2p1c3RpZnlGdWxsJykiIHRpdGxlPSJKdXN0aWZpZXIiPjxpIGNsYXNzPSJmYXMgZmEtYWxpZ24tanVzdGlmeSI+PC9pPjwvYnV0dG9uPjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJwYXN0ZUZyb21Xb3JkKCkiIHRpdGxlPSJDb2xsZXIgZGVwdWlzIFdvcmQgZW4gY29uc2VydmFudCBsYSBtaXNlIGVuIHBhZ2UiIHN0eWxlPSJtYXJnaW4tbGVmdDo2cHg7YmFja2dyb3VuZDojMmI1NzlhO2NvbG9yOndoaXRlO2JvcmRlci1yYWRpdXM6NHB4O3BhZGRpbmc6MnB4IDhweDtmb250LXNpemU6LjY4cmVtO2JvcmRlcjpub25lO2N1cnNvcjpwb2ludGVyO2ZvbnQtZmFtaWx5OmluaGVyaXQ7ZGlzcGxheTppbmxpbmUtZmxleDthbGlnbi1pdGVtczpjZW50ZXI7Z2FwOjNweDt2ZXJ0aWNhbC1hbGlnbjptaWRkbGU7Ij48aSBjbGFzcz0iZmFzIGZhLWZpbGUtd29yZCI+PC9pPsKgV29yZDwvYnV0dG9uPgo8L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8ZGl2IGlkPSJwcm9jLXoyIiBjbGFzcz0icnRlLWJvZHkiIGNvbnRlbnRlZGl0YWJsZT0idHJ1ZSIgc3R5bGU9Im1pbi1oZWlnaHQ6MTIwcHg7Ym9yZGVyOjJweCBzb2xpZCAjZTBlMGUwO2JvcmRlci1yYWRpdXM6MCAwIDhweCA4cHg7cGFkZGluZzoxMHB4Ij48L2Rpdj4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0ibWFyZ2luLWJvdHRvbTo4cHgiPjxsYWJlbCBzdHlsZT0iZGlzcGxheTpibG9jaztmb250LXNpemU6LjgycmVtO2ZvbnQtd2VpZ2h0OjYwMDtjb2xvcjojNTU1O21hcmdpbi1ib3R0b206NnB4Ij5Ob3RlcyAvIFJlbWFycXVlczwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0icnRlLWJhciI+PGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9ImRvY3VtZW50LmV4ZWNDb21tYW5kKCdib2xkJykiIHRpdGxlPSJHcmFzIj48Yj5HPC9iPjwvYnV0dG9uPjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJkb2N1bWVudC5leGVjQ29tbWFuZCgnaXRhbGljJykiIHRpdGxlPSJJdGFsaXF1ZSI+PGk+STwvaT48L2J1dHRvbj48YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0iZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ3VuZGVybGluZScpIiB0aXRsZT0iU291bGlnbsOpIj48dT5TPC91PjwvYnV0dG9uPjxzcGFuIGNsYXNzPSJydGUtc2VwIj48L3NwYW4+PGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9ImRvY3VtZW50LmV4ZWNDb21tYW5kKCdpbnNlcnRVbm9yZGVyZWRMaXN0JykiIHRpdGxlPSJQdWNlcyI+PGkgY2xhc3M9ImZhcyBmYS1saXN0LXVsIj48L2k+PC9idXR0b24+PGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9ImRvY3VtZW50LmV4ZWNDb21tYW5kKCdpbnNlcnRPcmRlcmVkTGlzdCcpIiB0aXRsZT0iTnVtw6lyb3TDqWUiPjxpIGNsYXNzPSJmYXMgZmEtbGlzdC1vbCI+PC9pPjwvYnV0dG9uPjxzcGFuIGNsYXNzPSJydGUtc2VwIj48L3NwYW4+PGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9InByb2NJbnNlcnRJY29uKCdtYWlsJykiIHRpdGxlPSJNYWlsIj48c3BhbiBjbGFzcz0icHJvYy1pY29uLW1haWwiPjxpIGNsYXNzPSJmYXMgZmEtZW52ZWxvcGUiPjwvaT48L3NwYW4+PC9idXR0b24+PGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9InByb2NJbnNlcnRJY29uKCdhbGVydCcpIiB0aXRsZT0iQWxlcnRlIj48c3BhbiBjbGFzcz0icHJvYy1pY29uLWFsZXJ0Ij48aSBjbGFzcz0iZmFzIGZhLWV4Y2xhbWF0aW9uIj48L2k+PC9zcGFuPjwvYnV0dG9uPjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJwcm9jSW5zZXJ0SWNvbignaWRlYScpIiB0aXRsZT0iSWTDqWUiPjxzcGFuIGNsYXNzPSJwcm9jLWljb24taWRlYSI+PGkgY2xhc3M9ImZhcyBmYS1saWdodGJ1bGIiPjwvaT48L3NwYW4+PC9idXR0b24+PHNwYW4gY2xhc3M9InJ0ZS1zZXAiPjwvc3Bhbj48YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0icnRlQ29sb3IodGhpcykiIHRpdGxlPSJDb3VsZXVyIj48aSBjbGFzcz0iZmFzIGZhLXBhbGV0dGUiPjwvaT48L2J1dHRvbj48YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0iZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ3VuZG8nKSIgdGl0bGU9IkFubnVsZXIiPjxpIGNsYXNzPSJmYXMgZmEtdW5kbyI+PC9pPjwvYnV0dG9uPjxzcGFuIGNsYXNzPSJydGUtc2VwIj48L3NwYW4+PGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9InJ0ZUltZ1Jlc2l6ZSgnc21hbGwnKSIgdGl0bGU9IkltYWdlIDI1JSI+JiN4MUY1QkM7UzwvYnV0dG9uPjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJydGVJbWdSZXNpemUoJ21lZGl1bScpIiB0aXRsZT0iSW1hZ2UgNTAlIj4mI3gxRjVCQztNPC9idXR0b24+PGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9InJ0ZUltZ1Jlc2l6ZSgnbGFyZ2UnKSIgdGl0bGU9IkltYWdlIDc1JSI+JiN4MUY1QkM7TDwvYnV0dG9uPjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJydGVJbWdSZXNpemUoJ2Z1bGwnKSIgdGl0bGU9IkltYWdlIDEwMCUiPiYjeDFGNUJDO0Y8L2J1dHRvbj48c3BhbiBjbGFzcz0icnRlLXNlcCI+PC9zcGFuPjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJkb2N1bWVudC5leGVjQ29tbWFuZCgnanVzdGlmeUxlZnQnKSIgdGl0bGU9IkFsaWduZXIgw6AgZ2F1Y2hlIj48aSBjbGFzcz0iZmFzIGZhLWFsaWduLWxlZnQiPjwvaT48L2J1dHRvbj48YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0iZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2p1c3RpZnlDZW50ZXInKSIgdGl0bGU9IkNlbnRyZXIiPjxpIGNsYXNzPSJmYXMgZmEtYWxpZ24tY2VudGVyIj48L2k+PC9idXR0b24+PGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9ImRvY3VtZW50LmV4ZWNDb21tYW5kKCdqdXN0aWZ5RnVsbCcpIiB0aXRsZT0iSnVzdGlmaWVyIj48aSBjbGFzcz0iZmFzIGZhLWFsaWduLWp1c3RpZnkiPjwvaT48L2J1dHRvbj48YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0icGFzdGVGcm9tV29yZCgpIiB0aXRsZT0iQ29sbGVyIGRlcHVpcyBXb3JkIGVuIGNvbnNlcnZhbnQgbGEgbWlzZSBlbiBwYWdlIiBzdHlsZT0ibWFyZ2luLWxlZnQ6NnB4O2JhY2tncm91bmQ6IzJiNTc5YTtjb2xvcjp3aGl0ZTtib3JkZXItcmFkaXVzOjRweDtwYWRkaW5nOjJweCA4cHg7Zm9udC1zaXplOi42OHJlbTtib3JkZXI6bm9uZTtjdXJzb3I6cG9pbnRlcjtmb250LWZhbWlseTppbmhlcml0O2Rpc3BsYXk6aW5saW5lLWZsZXg7YWxpZ24taXRlbXM6Y2VudGVyO2dhcDozcHg7dmVydGljYWwtYWxpZ246bWlkZGxlOyI+PGkgY2xhc3M9ImZhcyBmYS1maWxlLXdvcmQiPjwvaT7CoFdvcmQ8L2J1dHRvbj4KPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBpZD0icHJvYy16MyIgY2xhc3M9InJ0ZS1ib2R5IiBjb250ZW50ZWRpdGFibGU9InRydWUiIHN0eWxlPSJtaW4taGVpZ2h0OjEyMHB4O2JvcmRlcjoycHggc29saWQgI2UwZTBlMDtib3JkZXItcmFkaXVzOjAgMCA4cHggOHB4O3BhZGRpbmc6MTBweCI+PC9kaXY+CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9Im0tYWN0cyI+CiAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgaWQ9InByb2MtZGVsLWJ0biIgY2xhc3M9Im1iIiBzdHlsZT0iYmFja2dyb3VuZDojZTc0YzNjO2NvbG9yOiNmZmY7ZGlzcGxheTpub25lIiBvbmNsaWNrPSJ3aW5kb3cuZGVsUHJvYygpIj48aSBjbGFzcz0iZmFzIGZhLXRyYXNoIj48L2k+IFN1cHByaW1lcjwvYnV0dG9uPgogICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPSJidXR0b24iIGNsYXNzPSJtYiBtYi1jIiBvbmNsaWNrPSJ3aW5kb3cuY2xvc2VQcm9jTW9kYWwoKSI+QW5udWxlcjwvYnV0dG9uPgogICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPSJidXR0b24iIGNsYXNzPSJtYiBtYi1vayIgb25jbGljaz0id2luZG93LnNhdmVQcm9jKCkiPjxpIGNsYXNzPSJmYXMgZmEtY2hlY2siPjwvaT4gRW5yZWdpc3RyZXI8L2J1dHRvbj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgPC9kaXY+CiAgICA8L2Rpdj4KCgo8L2JvZHk+CjwvaHRtbD4=","exam":"PCFET0NUWVBFIGh0bWw+CjxodG1sIGxhbmc9ImZyIj4KPGhlYWQ+CiAgICA8bWV0YSBjaGFyc2V0PSJVVEYtOCI+CiAgICA8bWV0YSBuYW1lPSJ2aWV3cG9ydCIgY29udGVudD0id2lkdGg9ZGV2aWNlLXdpZHRoLCBpbml0aWFsLXNjYWxlPTEuMCI+CiAgICA8dGl0bGU+RVhBTSBQSUxPVEUgLSBPcmdhbmlzYXRpb24gZGVzIMOJcHJldXZlczwvdGl0bGU+CiAgICAKICAgIDxzY3JpcHQgc3JjPSJodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy94bHN4LzAuMTguNS94bHN4LmZ1bGwubWluLmpzIj48L3NjcmlwdD4KICAgIDxzY3JpcHQgc3JjPSJodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9mb250LWF3ZXNvbWUvNi40LjAvY3NzL2FsbC5taW4uY3NzIj48L3NjcmlwdD4KICAgIAogICAgPCEtLSBBcHRvcyBmb250IChuYXRpdmUpIC0tPgoKICAgIDxzdHlsZT4KICAgICAgICA6cm9vdCB7CiAgICAgICAgICAgIC0tcHJpbWFyeS1jb2xvcjogI2MwMzkyYjsgCiAgICAgICAgICAgIC0tc2Vjb25kYXJ5LWNvbG9yOiAjZTc0YzNjOwogICAgICAgICAgICAtLWFjY2VudC1jb2xvcjogI2YzOWMxMjsKICAgICAgICAgICAgLS1iZy1jb2xvcjogI2Y0ZjZmODsKICAgICAgICAgICAgLS10ZXh0LWNvbG9yOiAjMmMzZTUwOwogICAgICAgICAgICAtLXNpZGViYXItd2lkdGg6IDI4MHB4OwogICAgICAgICAgICAtLXRvb2xiYXItaGVpZ2h0OiA2MHB4OwogICAgICAgIH0KCiAgICAgICAgYm9keSB7IGZvbnQtZmFtaWx5OiAnQXB0b3MnLCAnQ2FsaWJyaScsICdUcmVidWNoZXQgTVMnLCBBcmlhbCwgc2Fucy1zZXJpZjsgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tYmctY29sb3IpOyBtYXJnaW46IDA7IHBhZGRpbmc6IDA7IGRpc3BsYXk6IGZsZXg7IGhlaWdodDogMTAwdmg7IGNvbG9yOiB2YXIoLS10ZXh0LWNvbG9yKTsgb3ZlcmZsb3c6IGhpZGRlbjsgfQoKICAgICAgICAvKiBTSURFQkFSICovCiAgICAgICAgLnNpZGViYXIgeyB3aWR0aDogdmFyKC0tc2lkZWJhci13aWR0aCk7IGJhY2tncm91bmQtY29sb3I6ICMyYzNlNTA7IGNvbG9yOiB3aGl0ZTsgZGlzcGxheTogZmxleDsgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsgYm94LXNoYWRvdzogMnB4IDAgNXB4IHJnYmEoMCwwLDAsMC4xKTsgZmxleC1zaHJpbms6IDA7IHotaW5kZXg6IDEwMDsgfQogICAgICAgIC5icmFuZCB7IHBhZGRpbmc6IDE1cHg7IHRleHQtYWxpZ246IGNlbnRlcjsgYmFja2dyb3VuZC1jb2xvcjogIzFhMjUyZjsgYm9yZGVyLWJvdHRvbTogM3B4IHNvbGlkIHZhcigtLXByaW1hcnktY29sb3IpOyB9CiAgICAgICAgLmJyYW5kIGgxIHsgbWFyZ2luOiAwOyBmb250LXNpemU6IDEuM3JlbTsgZm9udC13ZWlnaHQ6IDkwMDsgbGV0dGVyLXNwYWNpbmc6IDFweDsgfQogICAgICAgIC5zdGVwcy1uYXYgeyBmbGV4OiAxOyBwYWRkaW5nOiA1cHggMDsgb3ZlcmZsb3cteTogYXV0bzsgfQogICAgICAgIC5zdGVwLWJ0biB7IGRpc3BsYXk6IGZsZXg7IGFsaWduLWl0ZW1zOiBjZW50ZXI7IHBhZGRpbmc6IDEwcHggMTVweDsgY29sb3I6ICNlY2YwZjE7IHRleHQtZGVjb3JhdGlvbjogbm9uZTsgdHJhbnNpdGlvbjogYWxsIDAuMnM7IGJvcmRlci1sZWZ0OiA0cHggc29saWQgdHJhbnNwYXJlbnQ7IGN1cnNvcjogcG9pbnRlcjsgZm9udC1zaXplOiAwLjg1cmVtOyBib3JkZXItYm90dG9tOiAxcHggc29saWQgcmdiYSgyNTUsMjU1LDI1NSwwLjAzKTsgfQogICAgICAgIC5zdGVwLWJ0bjpob3ZlciwgLnN0ZXAtYnRuLmFjdGl2ZSB7IGJhY2tncm91bmQtY29sb3I6ICMzNDQ5NWU7IGJvcmRlci1sZWZ0LWNvbG9yOiB2YXIoLS1wcmltYXJ5LWNvbG9yKTsgcGFkZGluZy1sZWZ0OiAyMHB4OyB9CiAgICAgICAgLnN0ZXAtYnRuIGkgeyBtYXJnaW4tcmlnaHQ6IDEycHg7IHdpZHRoOiAxOHB4OyB0ZXh0LWFsaWduOiBjZW50ZXI7IGNvbG9yOiAjYmRjM2M3OyB9CiAgICAgICAgLnN0ZXAtYnRuLmFjdGl2ZSBpIHsgY29sb3I6IHZhcigtLXByaW1hcnktY29sb3IpOyB9CiAgICAgICAgLmZvb3Rlci1pbmZvIHsgcGFkZGluZzogMTBweDsgZm9udC1zaXplOiAwLjY1cmVtOyB0ZXh0LWFsaWduOiBjZW50ZXI7IG9wYWNpdHk6IDAuNTsgYmFja2dyb3VuZDogIzFhMjUyZjsgYm9yZGVyLXRvcDogMXB4IHNvbGlkICMzNDQ5NWU7IH0KCiAgICAgICAgLyogTUFJTiAqLwogICAgICAgIC5tYWluLXdyYXBwZXIgeyBmbGV4OiAxOyBkaXNwbGF5OiBmbGV4OyBmbGV4LWRpcmVjdGlvbjogY29sdW1uOyBvdmVyZmxvdzogaGlkZGVuOyB9CiAgICAgICAgLmdsb2JhbC10b29sYmFyIHsgaGVpZ2h0OiB2YXIoLS10b29sYmFyLWhlaWdodCk7IGJhY2tncm91bmQ6IHdoaXRlOyBib3JkZXItYm90dG9tOiAxcHggc29saWQgI2RkZDsgZGlzcGxheTogZmxleDsgYWxpZ24taXRlbXM6IGNlbnRlcjsganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOyBwYWRkaW5nOiAwIDMwcHg7IGJveC1zaGFkb3c6IDAgMnB4IDVweCByZ2JhKDAsMCwwLDAuMDUpOyB6LWluZGV4OiA1MDsgfQogICAgICAgIC50b29sYmFyLXRpdGxlIHsgZm9udC13ZWlnaHQ6IGJvbGQ7IGZvbnQtc2l6ZTogMS4xcmVtOyBjb2xvcjogIzdmOGM4ZDsgZGlzcGxheTogZmxleDsgYWxpZ24taXRlbXM6IGNlbnRlcjsgZ2FwOiAxMHB4OyB9CiAgICAgICAgLnRvb2xiYXItYWN0aW9ucyB7IGRpc3BsYXk6IGZsZXg7IGdhcDogMTBweDsgfQogICAgICAgIC5idG4tdG9vbGJhciB7IHBhZGRpbmc6IDhweCAxNXB4OyBib3JkZXI6IG5vbmU7IGJvcmRlci1yYWRpdXM6IDRweDsgY3Vyc29yOiBwb2ludGVyOyBmb250LXNpemU6IDAuOXJlbTsgZm9udC13ZWlnaHQ6IDUwMDsgZGlzcGxheTogZmxleDsgYWxpZ24taXRlbXM6IGNlbnRlcjsgZ2FwOiA4cHg7IHRyYW5zaXRpb246IDAuMnM7IH0KICAgICAgICAuYnRuLXNhdmUtcHJvamVjdCB7IGJhY2tncm91bmQtY29sb3I6ICMyN2FlNjA7IGNvbG9yOiB3aGl0ZTsgfSAKICAgICAgICAuYnRuLWxvYWQtcHJvamVjdCB7IGJhY2tncm91bmQtY29sb3I6ICMzNDQ5NWU7IGNvbG9yOiB3aGl0ZTsgfQogICAgICAgIC5tYWluLWNvbnRlbnQgeyBmbGV4OiAxOyBvdmVyZmxvdy15OiBhdXRvOyBwYWRkaW5nOiAyMHB4OyBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1iZy1jb2xvcik7IH0KCiAgICAgICAgLyogVUkgRUxFTUVOVFMgKi8KICAgICAgICAuaGVhZGVyLXBhbmVsIHsgZGlzcGxheTogZmxleDsganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOyBhbGlnbi1pdGVtczogY2VudGVyOyBtYXJnaW4tYm90dG9tOiAxNXB4OyBib3JkZXItYm90dG9tOiAycHggc29saWQgI2UwZTBlMDsgcGFkZGluZy1ib3R0b206IDEwcHg7IH0KICAgICAgICAuaGVhZGVyLXBhbmVsIGgyIHsgbWFyZ2luOiAwOyBmb250LXNpemU6IDEuNnJlbTsgY29sb3I6IHZhcigtLXByaW1hcnktY29sb3IpOyB9CiAgICAgICAgLnNlY3Rpb24tdmlldyB7IGRpc3BsYXk6IG5vbmU7IGFuaW1hdGlvbjogZmFkZUluIDAuM3MgZWFzZTsgfQogICAgICAgIC5zZWN0aW9uLXZpZXcuYWN0aXZlIHsgZGlzcGxheTogYmxvY2s7IH0KICAgICAgICAuY2FyZCB7IGJhY2tncm91bmQ6IHdoaXRlOyBib3JkZXItcmFkaXVzOiA4cHg7IHBhZGRpbmc6IDIwcHg7IGJveC1zaGFkb3c6IDAgMnB4IDEwcHggcmdiYSgwLDAsMCwwLjA1KTsgbWFyZ2luLWJvdHRvbTogMjBweDsgfQoKICAgICAgICAvKiBJTVBPUlQgKi8KICAgICAgICAuaW1wb3J0LWdyaWQgeyBkaXNwbGF5OiBncmlkOyBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IHJlcGVhdCgyLCAxZnIpOyBnYXA6IDIwcHg7IH0KICAgICAgICAuZmlsZS1kcm9wLXpvbmUgeyBib3JkZXI6IDJweCBkYXNoZWQgI2JkYzNjNzsgYm9yZGVyLXJhZGl1czogOHB4OyBwYWRkaW5nOiAyMHB4OyB0ZXh0LWFsaWduOiBjZW50ZXI7IHRyYW5zaXRpb246IDAuM3M7IHBvc2l0aW9uOiByZWxhdGl2ZTsgYmFja2dyb3VuZDogI2ZmZjsgbWluLWhlaWdodDogMTIwcHg7IGRpc3BsYXk6IGZsZXg7IGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47IGp1c3RpZnktY29udGVudDogY2VudGVyOyBhbGlnbi1pdGVtczogY2VudGVyOyB9CiAgICAgICAgLmZpbGUtZHJvcC16b25lOmhvdmVyIHsgYm9yZGVyLWNvbG9yOiB2YXIoLS1wcmltYXJ5LWNvbG9yKTsgYmFja2dyb3VuZDogI2ZkZjJmMjsgfQogICAgICAgIC5maWxlLWRyb3Atem9uZS5sb2FkZWQgeyBib3JkZXItY29sb3I6ICMyN2FlNjA7IGJhY2tncm91bmQ6ICNmMGZmZjQ7IH0KICAgICAgICAuZmlsZS1kcm9wLXpvbmUgaW5wdXRbdHlwZT1maWxlXSB7IHBvc2l0aW9uOiBhYnNvbHV0ZTsgdG9wOiAwOyBsZWZ0OiAwOyB3aWR0aDogMTAwJTsgaGVpZ2h0OiAxMDAlOyBvcGFjaXR5OiAwOyBjdXJzb3I6IHBvaW50ZXI7IH0KICAgICAgICAuc3RhdHVzLWJhZGdlIHsgZGlzcGxheTogbm9uZTsgbWFyZ2luLXRvcDogMTBweDsgZm9udC13ZWlnaHQ6IGJvbGQ7IGZvbnQtc2l6ZTogMC45cmVtOyBwYWRkaW5nOiA1cHggMTBweDsgYm9yZGVyLXJhZGl1czogMTVweDsgfQogICAgICAgIC5zdGF0dXMtb2sgeyBiYWNrZ3JvdW5kOiAjMjdhZTYwOyBjb2xvcjogd2hpdGU7IH0KCiAgICAgICAgLyogQ09ORklHICovCiAgICAgICAgLmNvbmZpZy1jb250YWluZXIgeyBkaXNwbGF5OiBmbGV4OyBnYXA6IDQwcHg7IH0KICAgICAgICAuY29uZmlnLWNvbCB7IGZsZXg6IDE7IGJhY2tncm91bmQ6IHdoaXRlOyBwYWRkaW5nOiAzMHB4OyBib3JkZXItcmFkaXVzOiA4cHg7IGJveC1zaGFkb3c6IDAgMnB4IDEwcHggcmdiYSgwLDAsMCwwLjA1KTsgfQogICAgICAgIC5mb3JtLWdyb3VwIHsgbWFyZ2luLWJvdHRvbTogMjBweDsgfQogICAgICAgIC5mb3JtLWdyb3VwIGxhYmVsIHsgZGlzcGxheTogYmxvY2s7IG1hcmdpbi1ib3R0b206IDhweDsgZm9udC13ZWlnaHQ6IGJvbGQ7IGNvbG9yOiAjMzQ0OTVlOyBmb250LXNpemU6IDEuMXJlbTsgfQogICAgICAgIC5mb3JtLWdyb3VwIGlucHV0IHsgd2lkdGg6IDEwMCU7IHBhZGRpbmc6IDEycHg7IGJvcmRlcjogMXB4IHNvbGlkICNkZGQ7IGJvcmRlci1yYWRpdXM6IDVweDsgZm9udC1zaXplOiAxcmVtOyBib3gtc2l6aW5nOiBib3JkZXItYm94OyB9CiAgICAgICAgLnByZXZpZXctYm94IHsgd2lkdGg6IDEwMCU7IGhlaWdodDogMTUwcHg7IGJvcmRlcjogMnB4IHNvbGlkICNlZWU7IGRpc3BsYXk6IGZsZXg7IGFsaWduLWl0ZW1zOiBjZW50ZXI7IGp1c3RpZnktY29udGVudDogY2VudGVyOyBtYXJnaW4tdG9wOiAxMHB4OyBiYWNrZ3JvdW5kOiAjZmFmYWZhOyB9CiAgICAgICAgLnByZXZpZXctYm94IGltZyB7IG1heC1oZWlnaHQ6IDEwMCU7IG1heC13aWR0aDogMTAwJTsgfQoKICAgICAgICAvKiBSRVBBUlRJVElPTiAqLwogICAgICAgIC5leGFtLW5hdmlnYXRpb24tYmFyIHsgYmFja2dyb3VuZDogI2ZmZjsgcGFkZGluZzogMTVweDsgYm9yZGVyLXJhZGl1czogOHB4OyBib3gtc2hhZG93OiAwIDJweCA1cHggcmdiYSgwLDAsMCwwLjA1KTsgZGlzcGxheTogZmxleDsganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOyBhbGlnbi1pdGVtczogY2VudGVyOyBtYXJnaW4tYm90dG9tOiAyMHB4OyBib3JkZXI6IDFweCBzb2xpZCAjZGRkOyB9CiAgICAgICAgLm5hdi1idG4geyBiYWNrZ3JvdW5kOiAjMmMzZTUwOyBjb2xvcjogd2hpdGU7IGJvcmRlcjogbm9uZTsgcGFkZGluZzogMTBweCAyMHB4OyBib3JkZXItcmFkaXVzOiA1cHg7IGN1cnNvcjogcG9pbnRlcjsgZm9udC13ZWlnaHQ6IGJvbGQ7IGRpc3BsYXk6IGZsZXg7IGFsaWduLWl0ZW1zOiBjZW50ZXI7IGdhcDogMTBweDsgfQogICAgICAgIC5leGFtLXNlbGVjdG9yIHsgcGFkZGluZzogMTBweDsgZm9udC1zaXplOiAxcmVtOyBib3JkZXI6IDFweCBzb2xpZCAjY2NjOyBib3JkZXItcmFkaXVzOiA1cHg7IG1pbi13aWR0aDogMzAwcHg7IH0KICAgICAgICAKICAgICAgICAuZXhhbS1zZWN0aW9uLWJsb2NrIHsgYm9yZGVyOiAxcHggc29saWQgI2NjYzsgYmFja2dyb3VuZDogI2ZmZjsgYm9yZGVyLXJhZGl1czogOHB4OyBwYWRkaW5nOiAxNXB4OyBib3gtc2hhZG93OiAwIDRweCAxMHB4IHJnYmEoMCwwLDAsMC4wNSk7IH0KICAgICAgICAuZXhhbS1zZWN0aW9uLWhlYWRlciB7IGJhY2tncm91bmQtY29sb3I6IHZhcigtLXByaW1hcnktY29sb3IpOyBjb2xvcjogd2hpdGU7IHBhZGRpbmc6IDE1cHg7IGJvcmRlci1yYWRpdXM6IDZweDsgbWFyZ2luLWJvdHRvbTogMTVweDsgZGlzcGxheTogZmxleDsganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOyBmb250LXNpemU6IDEuMnJlbTsgZm9udC13ZWlnaHQ6IGJvbGQ7IH0KICAgICAgICAuc3RvcmFnZS16b25lIHsgYmFja2dyb3VuZDogI2VjZjBmMTsgYm9yZGVyOiAzcHggZGFzaGVkICNiZGMzYzc7IHBhZGRpbmc6IDEwcHg7IGJvcmRlci1yYWRpdXM6IDhweDsgbWluLWhlaWdodDogODBweDsgbWF4LWhlaWdodDogMjAwcHg7IG92ZXJmbG93LXk6IGF1dG87IGRpc3BsYXk6IGZsZXg7IGZsZXgtd3JhcDogd3JhcDsgZ2FwOiAxMHB4OyBhbGlnbi1jb250ZW50OiBmbGV4LXN0YXJ0OyBtYXJnaW4tYm90dG9tOiAyMHB4OyB9CiAgICAgICAgLnJvb21zLWdyaWQgeyBkaXNwbGF5OiBncmlkOyBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IHJlcGVhdChhdXRvLWZpbGwsIG1pbm1heCgzMjBweCwgMWZyKSk7IGdhcDogMjVweDsgfQogICAgICAgIC5yb29tLWNhcmQgeyBiYWNrZ3JvdW5kOiB3aGl0ZTsgYm9yZGVyOiAxcHggc29saWQgI2RkZDsgYm9yZGVyLXJhZGl1czogOHB4OyBkaXNwbGF5OiBmbGV4OyBmbGV4LWRpcmVjdGlvbjogY29sdW1uOyBoZWlnaHQ6IDQ4MHB4OyBib3gtc2hhZG93OiAwIDRweCA2cHggcmdiYSgwLDAsMCwwLjA1KTsgfQogICAgICAgIC5yb29tLWNhcmQucm9vbS10dCB7IGJvcmRlcjogNHB4IHNvbGlkIHZhcigtLWFjY2VudC1jb2xvcik7IGJhY2tncm91bmQtY29sb3I6ICNmZmZjZjU7IH0KICAgICAgICAucm9vbS1oZWFkZXIgeyBwYWRkaW5nOiAxMnB4OyBiYWNrZ3JvdW5kOiAjMmMzZTUwOyBjb2xvcjogd2hpdGU7IGJvcmRlci1yYWRpdXM6IDZweCA2cHggMCAwOyBmb250LXdlaWdodDogYm9sZDsgZGlzcGxheTogZmxleDsganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOyBhbGlnbi1pdGVtczogY2VudGVyOyBmb250LXNpemU6IDFyZW07IH0KICAgICAgICAucm9vbS10dCAucm9vbS1oZWFkZXIgeyBiYWNrZ3JvdW5kOiB2YXIoLS1hY2NlbnQtY29sb3IpOyBjb2xvcjogIzJjM2U1MDsgfQogICAgICAgIAogICAgICAgIC8qIFNVUlZFSUxMQU5UUyBBSlVTVEVNRU5UUyAqLwogICAgICAgIC5yb29tLXN1cnZlaWxsYW50cy1hcmVhIHsgcGFkZGluZzogMTBweDsgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICNlZWU7IGJhY2tncm91bmQ6ICNmOGY5ZmE7IG1heC1oZWlnaHQ6IDEyMHB4OyBvdmVyZmxvdy15OiBhdXRvOyB9CiAgICAgICAgLnN1cnZlaWxsYW50LXJvdyB7IGRpc3BsYXk6IGZsZXg7IGdhcDogNXB4OyBtYXJnaW4tYm90dG9tOiA1cHg7IGFsaWduLWl0ZW1zOiBjZW50ZXI7IH0KICAgICAgICAuc3VydmVpbGxhbnQtcm93IHNlbGVjdCB7IGZsZXg6IDE7IHBhZGRpbmc6IDVweDsgYm9yZGVyOiAxcHggc29saWQgI2NjYzsgYm9yZGVyLXJhZGl1czogNHB4OyBmb250LXNpemU6IDAuODVyZW07IG1heC13aWR0aDogNTUlOyB9CiAgICAgICAgLnN1cnZlaWxsYW50LXJvdyBpbnB1dC50aW1lLWlucHV0IHsgZmxleDogMTsgcGFkZGluZzogNXB4OyBib3JkZXI6IDFweCBzb2xpZCAjY2NjOyBib3JkZXItcmFkaXVzOiA0cHg7IGZvbnQtc2l6ZTogMC44cmVtOyB3aWR0aDogODBweDsgdGV4dC1hbGlnbjogY2VudGVyOyB9CiAgICAgICAgLmJ0bi1kZWwtc3VydiB7IGJhY2tncm91bmQ6ICNlNzRjM2M7IGNvbG9yOiB3aGl0ZTsgYm9yZGVyOm5vbmU7IGJvcmRlci1yYWRpdXM6NHB4OyBjdXJzb3I6cG9pbnRlcjsgcGFkZGluZzogNXB4IDhweDsgZm9udC1zaXplOjAuN3JlbTt9CgogICAgICAgIC5idG4tYWRkLXN1cnYgeyBiYWNrZ3JvdW5kOiAjMjdhZTYwOyBjb2xvcjogd2hpdGU7IGJvcmRlcjogbm9uZTsgYm9yZGVyLXJhZGl1czogMCAwIDRweCA0cHg7IGN1cnNvcjogcG9pbnRlcjsgd2lkdGg6IDEwMCU7IHBhZGRpbmc6IDZweDsgZm9udC1zaXplOiAwLjhyZW07IH0KICAgICAgICAucm9vbS1ib2R5IHsgZmxleDogMTsgcGFkZGluZzogMTBweDsgb3ZlcmZsb3cteTogYXV0bzsgYmFja2dyb3VuZC1jb2xvcjogI2ZmZjsgfQogICAgICAgIC5zdHVkZW50LWl0ZW0geyBiYWNrZ3JvdW5kOiB3aGl0ZTsgYm9yZGVyOiAxcHggc29saWQgI2UwZTBlMDsgcGFkZGluZzogNnB4IDEwcHg7IG1hcmdpbi1ib3R0b206IDVweDsgYm9yZGVyLXJhZGl1czogNHB4OyBjdXJzb3I6IGdyYWI7IGZvbnQtc2l6ZTogMC44cmVtOyBkaXNwbGF5OiBmbGV4OyBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47IGFsaWduLWl0ZW1zOiBjZW50ZXI7IGJveC1zaGFkb3c6IDAgMXB4IDJweCByZ2JhKDAsMCwwLDAuMDMpOyB9CiAgICAgICAgLnN0dWRlbnQtaXRlbS5pcy10dCB7IGJvcmRlci1sZWZ0OiA1cHggc29saWQgdmFyKC0tYWNjZW50LWNvbG9yKTsgYmFja2dyb3VuZDogI2ZmZmNmMDsgZm9udC13ZWlnaHQ6Ym9sZDsgfQoKICAgICAgICAvKiBDT01NT04gKi8KICAgICAgICAuY29udHJvbHMtYmFyIHsgZGlzcGxheTogZmxleDsgZ2FwOiAxNXB4OyBtYXJnaW4tYm90dG9tOiAyMHB4OyBhbGlnbi1pdGVtczogY2VudGVyOyBiYWNrZ3JvdW5kOiB3aGl0ZTsgcGFkZGluZzogMTVweDsgYm9yZGVyLXJhZGl1czogOHB4OyBib3gtc2hhZG93OiAwIDJweCA1cHggcmdiYSgwLDAsMCwwLjA1KTsgZmxleC13cmFwOiB3cmFwO30KICAgICAgICAuYWN0aW9uLWJ0biB7IHBhZGRpbmc6IDEwcHggMTVweDsgYm9yZGVyOiBub25lOyBib3JkZXItcmFkaXVzOiA1cHg7IGN1cnNvcjogcG9pbnRlcjsgZm9udC13ZWlnaHQ6IGJvbGQ7IGNvbG9yOiB3aGl0ZTsgZGlzcGxheTogZmxleDsgYWxpZ24taXRlbXM6IGNlbnRlcjsgZ2FwOiA4cHg7IH0KICAgICAgICAuYnRuLWNhbGMgeyBiYWNrZ3JvdW5kOiB2YXIoLS1hY2NlbnQtY29sb3IpOyBjb2xvcjogIzMzMzsgfQogICAgICAgIC5idG4tcHJpbnQgeyBiYWNrZ3JvdW5kOiAjMmMzZTUwOyB9CiAgICAgICAgLmxheW91dC1zZXR0aW5ncyB7IGJhY2tncm91bmQ6ICNmMWYyZjY7IGJvcmRlcjogMXB4IHNvbGlkICNjY2M7IHBhZGRpbmc6IDEwcHg7IGJvcmRlci1yYWRpdXM6IDVweDsgZGlzcGxheTogZmxleDsgZ2FwOiAxNXB4OyBhbGlnbi1pdGVtczogY2VudGVyOyBmb250LXNpemU6IDAuODVyZW07IG1hcmdpbi10b3A6IDEwcHg7IHdpZHRoOiAxMDAlOyB9CiAgICAgICAgLmxheW91dC1zZXR0aW5ncyBpbnB1dCB7IHdpZHRoOiA2MHB4OyBwYWRkaW5nOiAzcHg7IGJvcmRlcjogMXB4IHNvbGlkICNjY2M7IGJvcmRlci1yYWRpdXM6IDNweDsgfQogICAgICAgIC5kYXRhLXRhYmxlIHsgd2lkdGg6IDEwMCU7IGJvcmRlci1jb2xsYXBzZTogY29sbGFwc2U7IG1hcmdpbi10b3A6IDE1cHg7IGZvbnQtc2l6ZTogMC45cmVtOyBiYWNrZ3JvdW5kOiB3aGl0ZTsgfQogICAgICAgIC5kYXRhLXRhYmxlIHRoIHsgYmFja2dyb3VuZDogIzJjM2U1MDsgY29sb3I6IHdoaXRlOyBwYWRkaW5nOiAxMnB4OyB0ZXh0LWFsaWduOiBsZWZ0OyB9CiAgICAgICAgLmRhdGEtdGFibGUgdGQgeyBwYWRkaW5nOiAxMHB4OyBib3JkZXItYm90dG9tOiAxcHggc29saWQgI2VlZTsgfQogICAgICAgIC5hbm9ueW0tYmFkZ2UgeyBiYWNrZ3JvdW5kOiAjMmMzZTUwOyBjb2xvcjogd2hpdGU7IHBhZGRpbmc6IDNweCA4cHg7IGJvcmRlci1yYWRpdXM6IDEwcHg7IGZvbnQtZmFtaWx5OiBtb25vc3BhY2U7IGZvbnQtc2l6ZTogMXJlbTsgfQoKICAgICAgICAvKiBQQVBFUiAtIFByZXZpZXcgT25seSAqLwogICAgICAgIC5wYXBlci1zaGVldCB7IGJhY2tncm91bmQ6IHdoaXRlOyB3aWR0aDogMjEwbW07IG1pbi1oZWlnaHQ6IDI5N21tOyBwYWRkaW5nOiAyMG1tOyBib3gtc2hhZG93OiAwIDAgMTBweCByZ2JhKDAsMCwwLDAuMyk7IGJveC1zaXppbmc6IGJvcmRlci1ib3g7IHBvc2l0aW9uOiByZWxhdGl2ZTsgZm9udC1mYW1pbHk6ICdUaW1lcyBOZXcgUm9tYW4nLCBUaW1lcywgc2VyaWY7IGNvbG9yOiAjMDAwOyBkaXNwbGF5OmZsZXg7IGZsZXgtZGlyZWN0aW9uOmNvbHVtbjsganVzdGlmeS1jb250ZW50OiBjZW50ZXI7IH0gCiAgICAgICAgLmNvbnZvYy1oZWFkZXItcm93IHsgZGlzcGxheTogZmxleDsganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOyBtYXJnaW4tYm90dG9tOiAzMHB4OyB9CiAgICAgICAgLmNvbnZvYy1hZGRyZXNzIHsgd2lkdGg6IDUwJTsgZm9udC1zaXplOiAxcmVtOyB9CiAgICAgICAgLmNvbnZvYy1hZGRyZXNzIHRleHRhcmVhIHsgd2lkdGg6IDEwMCU7IGhlaWdodDogODBweDsgYm9yZGVyOiAxcHggZGFzaGVkICNjY2M7IGZvbnQtZmFtaWx5OiBpbmhlcml0OyBmb250LXNpemU6IGluaGVyaXQ7IHJlc2l6ZTogbm9uZTsgfQogICAgICAgIC5jb252b2MtbG9nbyB7IG1heC13aWR0aDogMTUwcHg7IG1heC1oZWlnaHQ6IDgwcHg7IH0KICAgICAgICAuY29udm9jLXRpdGxlIHsgdGV4dC1hbGlnbjogY2VudGVyOyBmb250LXdlaWdodDogYm9sZDsgZm9udC1zaXplOiAxLjRyZW07IHRleHQtZGVjb3JhdGlvbjogdW5kZXJsaW5lOyBtYXJnaW46IDMwcHggMDsgfQogICAgICAgIC5jb252b2Mtc3R1ZGVudC1pbmZvIHsgbWFyZ2luLWJvdHRvbTogMjBweDsgZm9udC1zaXplOiAxLjFyZW07IGxpbmUtaGVpZ2h0OiAxLjY7IH0KICAgICAgICAuY29udm9jLWJvZHkgeyBtYXJnaW4tYm90dG9tOiAyMHB4OyB9CiAgICAgICAgLmVkaXRhYmxlLXRleHQgeyBib3JkZXI6IDFweCBkYXNoZWQgI2NjYzsgcGFkZGluZzogNXB4OyBtaW4taGVpZ2h0OiAyMHB4OyB3aGl0ZS1zcGFjZTogcHJlLXdyYXA7IH0KICAgICAgICAuY29udm9jLXRhYmxlIHsgd2lkdGg6IDEwMCU7IGJvcmRlci1jb2xsYXBzZTogY29sbGFwc2U7IG1hcmdpbi1ib3R0b206IDMwcHg7IH0KICAgICAgICAuY29udm9jLXRhYmxlIHRoLCAuY29udm9jLXRhYmxlIHRkIHsgYm9yZGVyOiAxcHggc29saWQgIzAwMDsgcGFkZGluZzogOHB4OyB0ZXh0LWFsaWduOiBjZW50ZXI7IH0KICAgICAgICAuY29udm9jLWZvb3RlciB7IGRpc3BsYXk6IGZsZXg7IGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjsgYWxpZ24taXRlbXM6IGZsZXgtZW5kOyBtYXJnaW4tdG9wOiAzMHB4OyB9CiAgICAgICAgCiAgICAgICAgQGtleWZyYW1lcyBmYWRlSW4geyBmcm9tIHsgb3BhY2l0eTogMDsgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKDEwcHgpOyB9IHRvIHsgb3BhY2l0eTogMTsgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKDApOyB9IH0KCiAgICAgICAgLyogUFJJTlQgKi8KICAgICAgICBAbWVkaWEgcHJpbnQgewogICAgICAgICAgICAuc2lkZWJhciwgLmdsb2JhbC10b29sYmFyLCAubm8tcHJpbnQsIC5tYWluLXdyYXBwZXIsIC5zZWN0aW9uLXZpZXcgeyBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7IH0KICAgICAgICAgICAgYm9keSA+ICo6bm90KCNwcmludC1hcmVhKSB7IGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDsgfQogICAgICAgICAgICBib2R5LCBodG1sIHsgbWFyZ2luOiAwOyBwYWRkaW5nOiAwOyB3aWR0aDogMTAwJTsgaGVpZ2h0OiAxMDAlOyBiYWNrZ3JvdW5kOiB3aGl0ZTsgZGlzcGxheTogYmxvY2s7IG92ZXJmbG93OiB2aXNpYmxlOyB9CiAgICAgICAgICAgICNwcmludC1hcmVhIHsgZGlzcGxheTogYmxvY2sgIWltcG9ydGFudDsgcG9zaXRpb246IGFic29sdXRlOyB0b3A6IDA7IGxlZnQ6IDA7IHdpZHRoOiAxMDAlOyB6LWluZGV4OiA5OTk5OyBiYWNrZ3JvdW5kOiB3aGl0ZTsgfQogICAgICAgICAgICBAcGFnZSB7IHNpemU6IEE0IHBvcnRyYWl0OyBtYXJnaW46IDA7IH0KICAgICAgICAgICAgCiAgICAgICAgICAgIC5wcmludC1wYWdlLWNvbnZvYyB7IAogICAgICAgICAgICAgICAgd2lkdGg6IDIxMG1tOyBoZWlnaHQ6IDI5N21tOyBwYWRkaW5nOiAxNW1tOyBib3gtc2l6aW5nOiBib3JkZXItYm94OyBwYWdlLWJyZWFrLWFmdGVyOiBhbHdheXM7IAogICAgICAgICAgICAgICAgZm9udC1mYW1pbHk6ICdUaW1lcyBOZXcgUm9tYW4nLCBUaW1lcywgc2VyaWY7IGJhY2tncm91bmQ6IHdoaXRlOyAKICAgICAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7IGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47IGp1c3RpZnktY29udGVudDogY2VudGVyOwogICAgICAgICAgICB9CiAgICAgICAgICAgIC5wcmludC1wYWdlLWNvbnZvYzpsYXN0LWNoaWxkIHsgcGFnZS1icmVhay1hZnRlcjogYXV0bzsgfQoKICAgICAgICAgICAgLnByaW50LXBhZ2UtbGlzdCB7IAogICAgICAgICAgICAgICAgd2lkdGg6IDIxMG1tOyBtaW4taGVpZ2h0OiAyOTdtbTsgcGFkZGluZzogMTVtbTsgYm94LXNpemluZzogYm9yZGVyLWJveDsgcGFnZS1icmVhay1hZnRlcjogYWx3YXlzOyAKICAgICAgICAgICAgICAgIGZvbnQtZmFtaWx5OiAnVGltZXMgTmV3IFJvbWFuJywgVGltZXMsIHNlcmlmOyBiYWNrZ3JvdW5kOiB3aGl0ZTsgCiAgICAgICAgICAgICAgICBkaXNwbGF5OiBibG9jazsgCiAgICAgICAgICAgIH0KICAgICAgICAgICAgCiAgICAgICAgICAgIC5wcmludC1mbG93IHsKICAgICAgICAgICAgICAgIHdpZHRoOiAyMTBtbTsgcGFkZGluZzogMTVtbTsgYm94LXNpemluZzogYm9yZGVyLWJveDsKICAgICAgICAgICAgICAgIGZvbnQtZmFtaWx5OiAnVGltZXMgTmV3IFJvbWFuJywgVGltZXMsIHNlcmlmOyBiYWNrZ3JvdW5kOiB3aGl0ZTsKICAgICAgICAgICAgfQogICAgICAgICAgICAKICAgICAgICAgICAgLnByaW50LWhlYWRlciB7IGRpc3BsYXk6IGZsZXg7IGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjsgYWxpZ24taXRlbXM6IGNlbnRlcjsgYm9yZGVyLWJvdHRvbTogMnB4IHNvbGlkICMwMDA7IHBhZGRpbmctYm90dG9tOiAxMHB4OyBtYXJnaW4tYm90dG9tOiAyMHB4OyB9CiAgICAgICAgICAgIC5wcmludC1sb2dvIHsgbWF4LWhlaWdodDogODBweDsgbWF4LXdpZHRoOiAxNTBweDsgfQogICAgICAgICAgICAucHJpbnQtZG9jLXRpdGxlIHsgZm9udC1zaXplOiAxLjVyZW07IGZvbnQtd2VpZ2h0OiBib2xkOyB0ZXh0LWFsaWduOiBjZW50ZXI7IG1hcmdpbjogMjBweCAwOyB0ZXh0LXRyYW5zZm9ybTogdXBwZXJjYXNlOyBib3JkZXI6IDJweCBzb2xpZCAjMDAwOyBwYWRkaW5nOiAxMHB4OyB9CiAgICAgICAgICAgIC5wcmludC1pbmZvcy1ib3ggeyBib3JkZXI6IDFweCBzb2xpZCAjMDAwOyBwYWRkaW5nOiAxMHB4OyBtYXJnaW4tYm90dG9tOiAxNXB4OyBiYWNrZ3JvdW5kOiAjZjlmOWY5OyBwYWdlLWJyZWFrLWluc2lkZTogYXZvaWQ7IH0KICAgICAgICAgICAgLnByaW50LXRhYmxlIHsgd2lkdGg6IDEwMCU7IGJvcmRlci1jb2xsYXBzZTogY29sbGFwc2U7IG1hcmdpbi10b3A6IDEwcHg7IGZvbnQtc2l6ZTogMC45cmVtOyBwYWdlLWJyZWFrLWluc2lkZTogYXV0bzsgfQogICAgICAgICAgICAucHJpbnQtdGFibGUgdGgsIC5wcmludC10YWJsZSB0ZCB7IGJvcmRlcjogMXB4IHNvbGlkICMwMDA7IHBhZGRpbmc6IDZweDsgdGV4dC1hbGlnbjogY2VudGVyOyB9CiAgICAgICAgICAgIC5wcmludC10YWJsZSB0aCB7IGJhY2tncm91bmQtY29sb3I6ICNlZWU7IH0KICAgICAgICAgICAgLnByaW50LXRhYmxlIHRyIHsgcGFnZS1icmVhay1pbnNpZGU6IGF2b2lkOyBwYWdlLWJyZWFrLWFmdGVyOiBhdXRvOyB9CiAgICAgICAgICAgIAogICAgICAgICAgICAubGFiZWwtc2hlZXQgeyAKICAgICAgICAgICAgICAgIGRpc3BsYXk6IGdyaWQ7IAogICAgICAgICAgICAgICAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiAxZnIgMWZyOyAKICAgICAgICAgICAgICAgIGdyaWQtdGVtcGxhdGUtcm93czogcmVwZWF0KDcsIDFmcik7IAogICAgICAgICAgICAgICAgd2lkdGg6IDIxMG1tOyBoZWlnaHQ6IDI5N21tOyAKICAgICAgICAgICAgICAgIHBhZGRpbmc6IDE1bW0gNW1tOwogICAgICAgICAgICAgICAgYm94LXNpemluZzogYm9yZGVyLWJveDsgCiAgICAgICAgICAgICAgICBwYWdlLWJyZWFrLWFmdGVyOiBhbHdheXM7IAogICAgICAgICAgICAgICAgZ2FwOiAwOyAKICAgICAgICAgICAgfQogICAgICAgICAgICAubGFiZWwtY2FyZCB7IAogICAgICAgICAgICAgICAgcGFkZGluZzogNXB4IDE1cHg7IAogICAgICAgICAgICAgICAgZGlzcGxheTogZmxleDsgCiAgICAgICAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uOyAKICAgICAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOyAKICAgICAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7IAogICAgICAgICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyOyAKICAgICAgICAgICAgICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7IAogICAgICAgICAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjsKICAgICAgICAgICAgfQogICAgICAgICAgICAubGFiZWwtbG9nbyB7IG1heC1oZWlnaHQ6IDM1cHg7IG1hcmdpbi1ib3R0b206IDVweDsgfQogICAgICAgICAgICAubGFiZWwtbmFtZSB7IGZvbnQtd2VpZ2h0OiBib2xkOyBmb250LXNpemU6IDEuMXJlbTsgbWFyZ2luLWJvdHRvbTogMnB4OyB9CiAgICAgICAgICAgIC5sYWJlbC1jbGFzcyB7IGZvbnQtc3R5bGU6IGl0YWxpYzsgZm9udC1zaXplOiAwLjlyZW07IG1hcmdpbi1ib3R0b206IDVweDsgfQogICAgICAgICAgICAubGFiZWwtYW5vbnltIHsgZm9udC1zaXplOiAxLjNyZW07IGZvbnQtd2VpZ2h0OiA5MDA7IGJvcmRlcjogMnB4IHNvbGlkICMwMDA7IHBhZGRpbmc6IDNweCA4cHg7IGJvcmRlci1yYWRpdXM6IDVweDsgfQoKICAgICAgICAgICAgLnB2LXNpZ25hdHVyZXMgeyBkaXNwbGF5OiBmbGV4OyBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47IG1hcmdpbi10b3A6IDMwcHg7IGhlaWdodDogMTAwcHg7IHBhZ2UtYnJlYWstaW5zaWRlOiBhdm9pZDsgfQogICAgICAgICAgICAucHYtYm94IHsgYm9yZGVyOiAxcHggc29saWQgIzAwMDsgd2lkdGg6IDQ1JTsgcGFkZGluZzogNXB4OyBmb250LXNpemU6IDAuOHJlbTsgfQogICAgICAgICAgICAKICAgICAgICAgICAgLmRpc3BsYXktbGlzdC1yb3cgdGQgeyBwYWRkaW5nOiA4cHg7IGZvbnQtc2l6ZTogMS4xcmVtOyB9CiAgICAgICAgfQogICAgPC9zdHlsZT4KPC9oZWFkPgo8Ym9keT4KICAgIDxkaXYgY2xhc3M9InNpZGViYXIiPgogICAgICAgIDxkaXYgY2xhc3M9ImJyYW5kIj48aDE+RVhBTSBQSUxPVEU8L2gxPjxzcGFuPmJ5IFN5bHbDqHJlIE1pY2hlbGV0PC9zcGFuPjwvZGl2PgogICAgICAgIDxuYXYgY2xhc3M9InN0ZXBzLW5hdiI+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9InN0ZXAtYnRuIGFjdGl2ZSIgb25jbGljaz0ic3dpdGNoVGFiKHRoaXMsICd2aWV3MScpIj48aSBjbGFzcz0iZmEtc29saWQgZmEtc2xpZGVycyI+PC9pPiAxLiBQYXJhbcOpdHJhZ2U8L2Rpdj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0ic3RlcC1idG4iIG9uY2xpY2s9InN3aXRjaFRhYih0aGlzLCAndmlldzInKSI+PGkgY2xhc3M9ImZhLXNvbGlkIGZhLWZpbGUtaW1wb3J0Ij48L2k+IDIuIEltcG9ydCBkb25uw6llczwvZGl2PgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJzdGVwLWJ0biIgb25jbGljaz0ic3dpdGNoVGFiKHRoaXMsICd2aWV3MycpIj48aSBjbGFzcz0iZmEtc29saWQgZmEtdXNlcnMtdmlld2ZpbmRlciI+PC9pPiAzLiBSw6lwYXJ0aXRpb248L2Rpdj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0ic3RlcC1idG4iIG9uY2xpY2s9InN3aXRjaFRhYih0aGlzLCAndmlldzQnKSI+PGkgY2xhc3M9ImZhLXNvbGlkIGZhLWVudmVsb3BlLW9wZW4tdGV4dCI+PC9pPiA0LiBDb252b2NhdGlvbnMgw4lsw6h2ZXM8L2Rpdj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0ic3RlcC1idG4iIG9uY2xpY2s9InN3aXRjaFRhYih0aGlzLCAndmlldzUnKSI+PGkgY2xhc3M9ImZhLXNvbGlkIGZhLWlkLWJhZGdlIj48L2k+IDUuIENvbnZvY2F0aW9ucyBTdXJ2ZWlsbGFudHM8L2Rpdj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0ic3RlcC1idG4iIG9uY2xpY2s9InN3aXRjaFRhYih0aGlzLCAndmlldzYnKSI+PGkgY2xhc3M9ImZhLXNvbGlkIGZhLWNsaXBib2FyZC1saXN0Ij48L2k+IDYuIMOJbWFyZ2VtZW50cyBldCBBZmZpY2hhZ2U8L2Rpdj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0ic3RlcC1idG4iIG9uY2xpY2s9InN3aXRjaFRhYih0aGlzLCAndmlldzcnKSI+PGkgY2xhc3M9ImZhLXNvbGlkIGZhLWZpbGUtc2lnbmF0dXJlIj48L2k+IDcuIFByb2PDqHMgVmVyYmFsIGV0IFBvY2hldHRlczwvZGl2PgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJzdGVwLWJ0biIgb25jbGljaz0ic3dpdGNoVGFiKHRoaXMsICd2aWV3OCcpIj48aSBjbGFzcz0iZmEtc29saWQgZmEtYmFyY29kZSI+PC9pPiA4LiBBbm9ueW1hdCBldCDDqXRpcXVldHRlczwvZGl2PgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJzdGVwLWJ0biIgb25jbGljaz0ic3dpdGNoVGFiKHRoaXMsICd2aWV3OScpIj48aSBjbGFzcz0iZmEtc29saWQgZmEtdGFibGUtbGlzdCI+PC9pPiA5LiBUYWJsZWF1IFLDqWNhcGl0dWxhdGlmPC9kaXY+CiAgICAgICAgPC9uYXY+CiAgICAgICAgPGRpdiBjbGFzcz0iZm9vdGVyLWluZm8iPsKpIDIwMjQtMjAyNSBFRFUgUElMT1RFIFN5c3RlbS48L2Rpdj4KICAgIDwvZGl2PgogCiAgICA8ZGl2IGNsYXNzPSJtYWluLXdyYXBwZXIiPgogICAgICAgIDxkaXYgY2xhc3M9Imdsb2JhbC10b29sYmFyIG5vLXByaW50Ij4KICAgICAgICAgICAgPGRpdiBjbGFzcz0idG9vbGJhci10aXRsZSI+PGkgY2xhc3M9ImZhLXNvbGlkIGZhLWZvbGRlci10cmVlIj48L2k+IEdlc3Rpb24gZHUgUHJvamV0PC9kaXY+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9InRvb2xiYXItYWN0aW9ucyI+CiAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJmaWxlIiBpZD0ibG9hZFByb2plY3RJbnB1dCIgc3R5bGU9ImRpc3BsYXk6bm9uZTsiIGFjY2VwdD0iLmpzb24iIG9uY2hhbmdlPSJsb2FkUHJvamVjdCh0aGlzKSI+CiAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImJ0bi10b29sYmFyIGJ0bi1sb2FkLXByb2plY3QiIG9uY2xpY2s9ImRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb2FkUHJvamVjdElucHV0JykuY2xpY2soKSI+PGkgY2xhc3M9ImZhLXNvbGlkIGZhLXVwbG9hZCI+PC9pPiBPdXZyaXI8L2J1dHRvbj4KICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYnRuLXRvb2xiYXIgYnRuLXNhdmUtcHJvamVjdCIgb25jbGljaz0ic2F2ZVByb2plY3QoKSI+PGkgY2xhc3M9ImZhLXNvbGlkIGZhLWRvd25sb2FkIj48L2k+IFNhdXZlZ2FyZGVyPC9idXR0b24+CiAgICAgICAgICAgPC9kaXY+CiAgICAgICAgPC9kaXY+CiAKICAgICAgICA8ZGl2IGNsYXNzPSJtYWluLWNvbnRlbnQiPgogICAgICAgICAgICA8ZGl2IGlkPSJ2aWV3MSIgY2xhc3M9InNlY3Rpb24tdmlldyBhY3RpdmUiPgogICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJoZWFkZXItcGFuZWwiPjxoMj48aSBjbGFzcz0iZmEtc29saWQgZmEtc2xpZGVycyI+PC9pPiAxLiBQYXJhbcOpdHJhZ2U8L2gyPjwvZGl2PgogICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJjb25maWctY29udGFpbmVyIj4KICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImNvbmZpZy1jb2wiPgogICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAiPjxsYWJlbD5Ob208L2xhYmVsPjxpbnB1dCB0eXBlPSJ0ZXh0IiBpZD0iY29uZmlnTmFtZSIgcGxhY2Vob2xkZXI9IlZvdHJlIG5vbSIgb25jaGFuZ2U9IkFwcFN0YXRlLmNvbmZpZy5uYW1lPXRoaXMudmFsdWUiPjwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAiPjxsYWJlbD5Gb25jdGlvbjwvbGFiZWw+PGlucHV0IHR5cGU9InRleHQiIGlkPSJjb25maWdSb2xlIiBwbGFjZWhvbGRlcj0iVm90cmUgZm9uY3Rpb24iIG9uY2hhbmdlPSJBcHBTdGF0ZS5jb25maWcucm9sZT10aGlzLnZhbHVlIj48L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWdyb3VwIj48bGFiZWw+SW50aXR1bMOpIGRlIGwnZXhhbWVuPC9sYWJlbD48aW5wdXQgdHlwZT0idGV4dCIgaWQ9ImNvbmZpZ0V4YW1UaXRsZSIgcGxhY2Vob2xkZXI9IkV4OiBCQUMgQkxBTkMgMjAyNSIgb25jaGFuZ2U9IkFwcFN0YXRlLmNvbmZpZy5leGFtVGl0bGU9dGhpcy52YWx1ZSI+PC9kaXY+CiAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImNvbmZpZy1jb2wiPgogICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAiPjxsYWJlbD5Mb2dvIMOJdGFibGlzc2VtZW50PC9sYWJlbD48aW5wdXQgdHlwZT0iZmlsZSIgYWNjZXB0PSJpbWFnZS8qIiBvbmNoYW5nZT0iaGFuZGxlSW1hZ2UodGhpcywgJ2xvZ29QcmV2aWV3JykiPjxkaXYgY2xhc3M9InByZXZpZXctYm94Ij48aW1nIGlkPSJsb2dvUHJldmlldyIgYWx0PSJBcGVyw6d1IiBzdHlsZT0iZGlzcGxheTpub25lOyI+PC9kaXY+PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1ncm91cCI+PGxhYmVsPlNpZ25hdHVyZTwvbGFiZWw+PGlucHV0IHR5cGU9ImZpbGUiIGFjY2VwdD0iaW1hZ2UvKiIgb25jaGFuZ2U9ImhhbmRsZUltYWdlKHRoaXMsICdzaWduUHJldmlldycpIj48ZGl2IGNsYXNzPSJwcmV2aWV3LWJveCI+PGltZyBpZD0ic2lnblByZXZpZXciIGFsdD0iQXBlcsOndSIgc3R5bGU9ImRpc3BsYXk6bm9uZTsiPjwvZGl2PjwvZGl2PgogICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgCiAgICAgICAgICAgIDxkaXYgaWQ9InZpZXcyIiBjbGFzcz0ic2VjdGlvbi12aWV3Ij4KICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iaGVhZGVyLXBhbmVsIj48aDI+PGkgY2xhc3M9ImZhLXNvbGlkIGZhLWZpbGUtaW1wb3J0Ij48L2k+IDIuIEltcG9ydCBkZXMgZG9ubsOpZXM8L2gyPjwvZGl2PgogICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJpbXBvcnQtZ3JpZCI+CiAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmaWxlLWRyb3Atem9uZSIgaWQ9InpvbmUtZWxldmVzIj48aDM+QS4gQmFzZSDDiWzDqHZlczwvaDM+PHAgc3R5bGU9ImZvbnQtc2l6ZTowLjhyZW07IGNvbG9yOiM2NjY7Ij5Ob20sIFByw6lub20sIENsYXNzZSwgVFQ8L3A+PHNwYW4gc3R5bGU9ImZvbnQtc2l6ZTowLjdyZW07IGNvbG9yOiM5OTk7Ij4oRW4gYXR0ZW50ZSk8L3NwYW4+PGlucHV0IHR5cGU9ImZpbGUiIGFjY2VwdD0iLnhsc3gsIC54bHMsIC5jc3YiIG9uY2hhbmdlPSJoYW5kbGVGaWxlKHRoaXMsICdFTEVWRVMnKSI+PGRpdiBpZD0ic3RhdHVzLWVsZXZlcyIgY2xhc3M9InN0YXR1cy1iYWRnZSI+RmljaGllciBtYW5xdWFudDwvZGl2PjwvZGl2PgogICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZmlsZS1kcm9wLXpvbmUiIGlkPSJ6b25lLWVwcmV1dmVzIj48aDM+Qi4gUGxhbm5pbmcgw4lwcmV1dmVzPC9oMz48cCBzdHlsZT0iZm9udC1zaXplOjAuOHJlbTsgY29sb3I6IzY2NjsiPk1hdGnDqHJlLCBEYXRlLCBIZXVyZSwgRHVyw6llPC9wPjxzcGFuIHN0eWxlPSJmb250LXNpemU6MC43cmVtOyBjb2xvcjojOTk5OyI+KEVuIGF0dGVudGUpPC9zcGFuPjxpbnB1dCB0eXBlPSJmaWxlIiBhY2NlcHQ9Ii54bHN4LCAueGxzLCAuY3N2IiBvbmNoYW5nZT0iaGFuZGxlRmlsZSh0aGlzLCAnRVBSRVVWRVMnKSI+PGRpdiBpZD0ic3RhdHVzLWVwcmV1dmVzIiBjbGFzcz0ic3RhdHVzLWJhZGdlIj5GaWNoaWVyIG1hbnF1YW50PC9kaXY+PC9kaXY+CiAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmaWxlLWRyb3Atem9uZSIgaWQ9InpvbmUtcmVzc291cmNlcyI+PGgzPkMuIFNhbGxlczwvaDM+PHAgc3R5bGU9ImZvbnQtc2l6ZTowLjhyZW07IGNvbG9yOiM2NjY7Ij5TYWxsZSwgQ2FwYWNpdMOpLCBUeXBlIChUVCk8L3A+PHNwYW4gc3R5bGU9ImZvbnQtc2l6ZTowLjdyZW07IGNvbG9yOiM5OTk7Ij4oRW4gYXR0ZW50ZSk8L3NwYW4+PGlucHV0IHR5cGU9ImZpbGUiIGFjY2VwdD0iLnhsc3gsIC54bHMsIC5jc3YiIG9uY2hhbmdlPSJoYW5kbGVGaWxlKHRoaXMsICdSRVNTT1VSQ0VTJykiPjxkaXYgaWQ9InN0YXR1cy1yZXNzb3VyY2VzIiBjbGFzcz0ic3RhdHVzLWJhZGdlIj5GaWNoaWVyIG1hbnF1YW50PC9kaXY+PC9kaXY+CiAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmaWxlLWRyb3Atem9uZSIgaWQ9InpvbmUtc3VydmVpbGxhbnRzIj48aDM+RC4gU3VydmVpbGxhbnRzPC9oMz48cCBzdHlsZT0iZm9udC1zaXplOjAuOHJlbTsgY29sb3I6IzY2NjsiPk5vbSwgUHLDqW5vbTwvcD48c3BhbiBzdHlsZT0iZm9udC1zaXplOjAuN3JlbTsgY29sb3I6Izk5OTsiPihFbiBhdHRlbnRlKTwvc3Bhbj48aW5wdXQgdHlwZT0iZmlsZSIgYWNjZXB0PSIueGxzeCwgLnhscywgLmNzdiIgb25jaGFuZ2U9ImhhbmRsZUZpbGUodGhpcywgJ1NVUlZFSUxMQU5UUycpIj48ZGl2IGlkPSJzdGF0dXMtc3VydmVpbGxhbnRzIiBjbGFzcz0ic3RhdHVzLWJhZGdlIj5GaWNoaWVyIG1hbnF1YW50PC9kaXY+PC9kaXY+CiAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8L2Rpdj4KIAogICAgICAgICAgICA8ZGl2IGlkPSJ2aWV3MyIgY2xhc3M9InNlY3Rpb24tdmlldyI+CiAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImhlYWRlci1wYW5lbCI+PGgyPjxpIGNsYXNzPSJmYS1zb2xpZCBmYS11c2Vycy12aWV3ZmluZGVyIj48L2k+IDMuIFLDqXBhcnRpdGlvbiDDqWzDqHZlcyBldCBzdXJ2ZWlsbGFudHM8L2gyPjwvZGl2PgogICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJjb250cm9scy1iYXIiPgogICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iZm9udC1zaXplOjAuOXJlbTsgY29sb3I6IzU1NTsgbWFyZ2luLXJpZ2h0OmF1dG87Ij5JbXBvcnRleiBsZXMgZmljaGllcnMgw6AgbCfDqXRhcGUgMiwgcHVpcyBsYW5jZXogbGUgY2FsY3VsLjwvZGl2PgogICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJkaXNwbGF5OmZsZXg7IGZsZXgtZGlyZWN0aW9uOmNvbHVtbjsgZ2FwOjVweDsgbWFyZ2luLXJpZ2h0OjE1cHg7IHRleHQtYWxpZ246cmlnaHQ7Ij4KICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgc3R5bGU9ImZvbnQtc2l6ZTowLjg1cmVtOyBmb250LXdlaWdodDpib2xkOyI+VHJpIDo8L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICAgICA8c2VsZWN0IGlkPSJkaXN0cmliLW1ldGhvZCIgc3R5bGU9InBhZGRpbmc6NHB4OyBib3JkZXItcmFkaXVzOjRweDsgZm9udC1zaXplOjAuODVyZW07Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IkFMUEhBIj5PcmRyZSBBbHBoYWLDqXRpcXVlPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJDTEFTUyI+UGFyIENsYXNzZSAoU3RyaWN0KTwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgICAgICAgICA8L3NlbGVjdD4KICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgc3R5bGU9ImZvbnQtc2l6ZTowLjg1cmVtOyBmb250LXdlaWdodDpib2xkOyI+UG9ydMOpZSA6PC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNlbGVjdCBpZD0iZGlzdHJpYi1zY29wZSIgc3R5bGU9InBhZGRpbmc6NHB4OyBib3JkZXItcmFkaXVzOjRweDsgZm9udC1zaXplOjAuODVyZW07Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IkFMTCI+VG91dGVzIGxlcyDDqXByZXV2ZXM8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IkNVUlJFTlQiPsOJcHJldXZlIGFjdHVlbGxlPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc2VsZWN0PgogICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgPC9kaXY+CgogICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBvbmNsaWNrPSJsYXVuY2hEaXN0cmlidXRpb24oKSIgc3R5bGU9InBhZGRpbmc6MTBweCAyMHB4OyBiYWNrZ3JvdW5kOiB2YXIoLS1wcmltYXJ5LWNvbG9yKTsgY29sb3I6d2hpdGU7IGJvcmRlcjpub25lOyBib3JkZXItcmFkaXVzOjVweDsgY3Vyc29yOnBvaW50ZXI7Ij48aSBjbGFzcz0iZmEtc29saWQgZmEtd2FuZC1tYWdpYy1zcGFya2xlcyI+PC9pPiBDYWxjdWxlcjwvYnV0dG9uPgogICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgPGRpdiBpZD0iZXhhbS1uYXZpZ2F0aW9uIiBjbGFzcz0iZXhhbS1uYXZpZ2F0aW9uLWJhciIgc3R5bGU9ImRpc3BsYXk6bm9uZTsiPgogICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0ibmF2LWJ0biIgb25jbGljaz0icHJldkV4YW0oKSI+PGkgY2xhc3M9ImZhLXNvbGlkIGZhLWNoZXZyb24tbGVmdCI+PC9pPiBQcsOpY8OpZGVudDwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgPGRpdj48c3Ryb25nPsOJcHJldXZlIGFjdHVlbGxlIDogPC9zdHJvbmc+PHNlbGVjdCBpZD0iZXhhbS1kcm9wZG93biIgY2xhc3M9ImV4YW0tc2VsZWN0b3IiIG9uY2hhbmdlPSJqdW1wVG9FeGFtKHRoaXMudmFsdWUpIj48L3NlbGVjdD48L2Rpdj4KICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9Im5hdi1idG4iIG9uY2xpY2s9Im5leHRFeGFtKCkiPlN1aXZhbnQgPGkgY2xhc3M9ImZhLXNvbGlkIGZhLWNoZXZyb24tcmlnaHQiPjwvaT48L2J1dHRvbj4KICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgIDxkaXYgaWQ9ImN1cnJlbnQtZXhhbS1jb250YWluZXIiPjxkaXYgY2xhc3M9ImNhcmQiIHN0eWxlPSJ0ZXh0LWFsaWduOmNlbnRlcjsgY29sb3I6IzdmOGM4ZDsiPlZldWlsbGV6IGltcG9ydGVyIGxlcyBkb25uw6llcyBwdWlzIGNsaXF1ZXIgc3VyIENhbGN1bGVyLjwvZGl2PjwvZGl2PgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgCiAgICAgICAgICAgIDxkaXYgaWQ9InZpZXc0IiBjbGFzcz0ic2VjdGlvbi12aWV3Ij4KICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iaGVhZGVyLXBhbmVsIj48aDI+PGkgY2xhc3M9ImZhLXNvbGlkIGZhLWVudmVsb3BlLW9wZW4tdGV4dCI+PC9pPiA0LiBDb252b2NhdGlvbnMgw4lsw6h2ZXM8L2gyPjwvZGl2PgogICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJjb250cm9scy1iYXIiPgogICAgICAgICAgICAgICAgICAgPGxhYmVsPkZpbHRyZXIgcGFyIGNsYXNzZSA6PC9sYWJlbD48c2VsZWN0IGlkPSJjb252b2MtY2xhc3MtZmlsdGVyIiBzdHlsZT0icGFkZGluZzo4cHg7IGJvcmRlci1yYWRpdXM6NXB4OyBtYXJnaW4tbGVmdDoxMHB4OyI+PG9wdGlvbiB2YWx1ZT0iQUxMIj5Ub3V0ZXMgbGVzIGNsYXNzZXM8L29wdGlvbj48L3NlbGVjdD4KICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImFjdGlvbi1idG4gYnRuLXByaW50IiBvbmNsaWNrPSJwcmludENvbnZvY2F0aW9ucygpIiBzdHlsZT0ibWFyZ2luLWxlZnQ6YXV0bzsiPjxpIGNsYXNzPSJmYS1zb2xpZCBmYS1wcmludCI+PC9pPiBJbXByaW1lcjwvYnV0dG9uPgogICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ibGF5b3V0LXNldHRpbmdzIj4KICAgICAgICAgICAgICAgICAgIDxzcGFuPjxpIGNsYXNzPSJmYS1zb2xpZCBmYS1ydWxlci1jb21iaW5lZCI+PC9pPiBNaXNlIGVuIHBhZ2UgOjwvc3Bhbj4KICAgICAgICAgICAgICAgICAgIDxsYWJlbD5IYXV0IDxpbnB1dCB0eXBlPSJudW1iZXIiIGlkPSJzZXRzLXN0ZC10b3AiIHZhbHVlPSIyMCIgb25jaGFuZ2U9ImFwcGx5TGF5b3V0KCdzdGQnKSI+PC9sYWJlbD4KICAgICAgICAgICAgICAgICAgIDxsYWJlbD5CYXMgPGlucHV0IHR5cGU9Im51bWJlciIgaWQ9InNldHMtc3RkLWJvdCIgdmFsdWU9IjIwIiBvbmNoYW5nZT0iYXBwbHlMYXlvdXQoJ3N0ZCcpIj48L2xhYmVsPgogICAgICAgICAgICAgICAgICAgPGxhYmVsPlBvbGljZSA8aW5wdXQgdHlwZT0ibnVtYmVyIiBpZD0ic2V0cy1zdGQtZm9udCIgdmFsdWU9IjE2IiBvbmNoYW5nZT0iYXBwbHlMYXlvdXQoJ3N0ZCcpIj48L2xhYmVsPgogICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iZGlzcGxheTpmbGV4OyBqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyOyBiYWNrZ3JvdW5kOiNjY2M7IHBhZGRpbmc6MjBweDsgb3ZlcmZsb3cteTphdXRvOyBoZWlnaHQ6Y2FsYygxMDB2aCAtIDMwMHB4KTsiPgogICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0icGFwZXItc2hlZXQiIGlkPSJjb252b2MtdGVtcGxhdGUiPgogICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImNvbnZvYy1oZWFkZXItcm93Ij48ZGl2IGNsYXNzPSJjb252b2MtYWRkcmVzcyI+PHRleHRhcmVhIGlkPSJ0eHQtYWRkcmVzcyIgcGxhY2Vob2xkZXI9Ik5vbSBkZSBsJ8OpdGFibGlzc2VtZW50Li4uIj48L3RleHRhcmVhPjwvZGl2PjxkaXYgY2xhc3M9ImNvbnZvYy1sb2dvLXpvbmUiPjxpbWcgaWQ9ImNvbnZvYy1sb2dvLWltZyIgY2xhc3M9ImNvbnZvYy1sb2dvIiBhbHQ9IkxvZ28iPjwvZGl2PjwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImNvbnZvYy10aXRsZSI+Q09OVk9DQVRJT04gPHNwYW4gaWQ9InR4dC10aXRsZS1kaXNwbGF5IiBjb250ZW50ZWRpdGFibGU9InRydWUiIHN0eWxlPSJib3JkZXI6IDFweCBkYXNoZWQgI2NjYzsgcGFkZGluZzogMnB4OyI+QVVYIMOJUFJFVVZFUyBCTEFOQ0hFUzwvc3Bhbj48L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJjb252b2Mtc3R1ZGVudC1pbmZvIj48c3Ryb25nPk5vbSBldCBQcsOpbm9tIDo8L3N0cm9uZz4gW05vbSBQcsOpbm9tXTxicj48c3Ryb25nPkNsYXNzZSA6PC9zdHJvbmc+IFtDbGFzc2VdPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iY29udm9jLWJvZHkgZWRpdGFibGUtdGV4dCIgaWQ9InR4dC1ib2R5IiBjb250ZW50ZWRpdGFibGU9InRydWUiPk1hZGFtZSwgTW9uc2lldXIsPGJyPkRhbnMgbGUgY2FkcmUgZGUgbGEgcHLDqXBhcmF0aW9uIGF1eCBleGFtZW5zLCB2b3RyZSBlbmZhbnQgZXN0IGNvbnZvcXXDqShlKSBhdXggw6lwcmV1dmVzIGJsYW5jaGVzIHNlbG9uIGxlIHBsYW5uaW5nIHN1aXZhbnQgOjwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgIDx0YWJsZSBjbGFzcz0iY29udm9jLXRhYmxlIj48dGhlYWQ+PHRyPjx0aD7DiXByZXV2ZTwvdGg+PHRoPkRhdGU8L3RoPjx0aD5Ib3JhaXJlIGTDqWJ1dDwvdGg+PHRoPkR1csOpZTwvdGg+PHRoPlNhbGxlPC90aD48L3RyPjwvdGhlYWQ+PHRib2R5Pjx0cj48dGQgY29sc3Bhbj0iNSI+KFRhYmxlYXUgaWNpKTwvdGQ+PC90cj48L3Rib2R5PjwvdGFibGU+CiAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iZm9udC13ZWlnaHQ6Ym9sZDsgbWFyZ2luLWJvdHRvbTo1cHg7Ij5Sw6hnbGVtZW50IGV0IGNvbnNpZ25lcyA6PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iY29udm9jLXJ1bGVzIGVkaXRhYmxlLXRleHQiIGlkPSJ0eHQtcnVsZXMiIGNvbnRlbnRlZGl0YWJsZT0idHJ1ZSIgc3R5bGU9ImZvbnQtc2l6ZTowLjlyZW07Ij4tIExlcyDDqWzDqHZlcyBkb2l2ZW50IHNlIHByw6lzZW50ZXIgMzAgbWludXRlcyBhdmFudCBsZSBkw6lidXQgZGUgY2hhcXVlIMOpcHJldXZlLjxicj4tIExlcyB0w6lsw6lwaG9uZXMgcG9ydGFibGVzIHNvbnQgc3RyaWN0ZW1lbnQgaW50ZXJkaXRzLiBUb3V0IGNvbW1lIGxlcyBtb250cmVzIGNvbm5lY3TDqWVzLjxicj4tIFBpw6hjZSBkJ2lkZW50aXTDqSBvYmxpZ2F0b2lyZS48L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJjb252b2MtZm9vdGVyIiBzdHlsZT0ianVzdGlmeS1jb250ZW50OiBmbGV4LWVuZDsiPjxkaXYgY2xhc3M9ImNvbnZvYy1zaWduIiBzdHlsZT0idGV4dC1hbGlnbjpyaWdodDsiPjxkaXY+RmFpdCDDoCA8c3BhbiBpZD0idHh0LWNpdHkiIGNvbnRlbnRlZGl0YWJsZT0idHJ1ZSIgc3R5bGU9ImJvcmRlci1ib3R0b206MXB4IGRvdHRlZCAjMDAwOyI+VmlsbGU8L3NwYW4+LCBsZSA8c3BhbiBpZD0iY3VycmVudC1kYXRlIj48L3NwYW4+PC9kaXY+PGRpdiBzdHlsZT0ibWFyZ2luLXRvcDoxNXB4OyBmb250LXdlaWdodDpib2xkOyIgaWQ9ImNvbnZvYy1zaWduLW5hbWUiPjwvZGl2PjxkaXYgc3R5bGU9ImZvbnQtc3R5bGU6aXRhbGljOyIgaWQ9ImNvbnZvYy1zaWduLXJvbGUiPjwvZGl2PjxpbWcgaWQ9ImNvbnZvYy1zaWduLWltZyIgc3R5bGU9Im1heC1oZWlnaHQ6NjBweDsgbWFyZ2luLXRvcDoxMHB4OyI+PC9kaXY+PC9kaXY+CiAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgICAgPGRpdiBpZD0idmlldzUiIGNsYXNzPSJzZWN0aW9uLXZpZXciPgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iaGVhZGVyLXBhbmVsIj48aDI+PGkgY2xhc3M9ImZhLXNvbGlkIGZhLWlkLWJhZGdlIj48L2k+IDUuIENvbnZvY2F0aW9ucyBTdXJ2ZWlsbGFudHM8L2gyPjwvZGl2PgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iY29udHJvbHMtYmFyIj4KICAgICAgICAgICAgICAgICAgICA8bGFiZWw+SW1wcmltZXIgcG91ciA6PC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICA8c2VsZWN0IGlkPSJjb252b2Mtc3Vydi1maWx0ZXIiIHN0eWxlPSJwYWRkaW5nOjhweDsgYm9yZGVyLXJhZGl1czo1cHg7IG1hcmdpbi1sZWZ0OjEwcHg7Ij48b3B0aW9uIHZhbHVlPSJBTEwiPlRvdXMgbGVzIHN1cnZlaWxsYW50czwvb3B0aW9uPjwvc2VsZWN0PgogICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImFjdGlvbi1idG4gYnRuLXByaW50IiBvbmNsaWNrPSJwcmludFN1cnZlaWxsYW50Q29udm9jYXRpb25zKCkiIHN0eWxlPSJtYXJnaW4tbGVmdDphdXRvOyI+PGkgY2xhc3M9ImZhLXNvbGlkIGZhLXByaW50Ij48L2k+IEltcHJpbWVyPC9idXR0b24+CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImxheW91dC1zZXR0aW5ncyI+CiAgICAgICAgICAgICAgICAgICAgPGxhYmVsPkhhdXQgPGlucHV0IHR5cGU9Im51bWJlciIgaWQ9InNldHMtc3Vydi10b3AiIHZhbHVlPSIyMCIgb25jaGFuZ2U9ImFwcGx5TGF5b3V0KCdzdXJ2JykiPjwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgPGxhYmVsPkJhcyA8aW5wdXQgdHlwZT0ibnVtYmVyIiBpZD0ic2V0cy1zdXJ2LWJvdCIgdmFsdWU9IjIwIiBvbmNoYW5nZT0iYXBwbHlMYXlvdXQoJ3N1cnYnKSI+PC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICA8bGFiZWw+UG9saWNlIDxpbnB1dCB0eXBlPSJudW1iZXIiIGlkPSJzZXRzLXN1cnYtZm9udCIgdmFsdWU9IjE2IiBvbmNoYW5nZT0iYXBwbHlMYXlvdXQoJ3N1cnYnKSI+PC9sYWJlbD4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iZGlzcGxheTpmbGV4OyBqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyOyBiYWNrZ3JvdW5kOiNjY2M7IHBhZGRpbmc6MjBweDsgb3ZlcmZsb3cteTphdXRvOyBoZWlnaHQ6Y2FsYygxMDB2aCAtIDMwMHB4KTsiPgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InBhcGVyLXNoZWV0IiBpZD0iY29udm9jLXN1cnYtdGVtcGxhdGUiPgogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJjb252b2MtaGVhZGVyLXJvdyI+PGRpdiBjbGFzcz0iY29udm9jLWFkZHJlc3MiPjx0ZXh0YXJlYSBpZD0idHh0LXN1cnYtYWRkcmVzcyIgcGxhY2Vob2xkZXI9Ik5vbSDDqXRhYmxpc3NlbWVudC4uLiI+PC90ZXh0YXJlYT48L2Rpdj48aW1nIGlkPSJjb252b2Mtc3Vydi1sb2dvLWltZyIgY2xhc3M9ImNvbnZvYy1sb2dvIj48L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iY29udm9jLXRpdGxlIj5DT05WT0NBVElPTiA8c3BhbiBpZD0idHh0LXN1cnYtdGl0bGUtZGlzcGxheSIgY29udGVudGVkaXRhYmxlPSJ0cnVlIiBzdHlsZT0iYm9yZGVyOiAxcHggZGFzaGVkICNjY2M7IHBhZGRpbmc6IDJweDsiPlNVUlZFSUxMQU5DRVM8L3NwYW4+PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImNvbnZvYy1zdHVkZW50LWluZm8iPjxzdHJvbmc+U3VydmVpbGxhbnQgOjwvc3Ryb25nPiBbTm9tXTwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJjb252b2MtYm9keSBlZGl0YWJsZS10ZXh0IiBpZD0idHh0LXN1cnYtYm9keSIgY29udGVudGVkaXRhYmxlPSJ0cnVlIj5Wb3VzIMOqdGVzIGNvbnZvcXXDqShlKSBwb3VyIGxlcyBzdXJ2ZWlsbGFuY2VzIHN1aXZhbnRlcyA6PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgIDx0YWJsZSBjbGFzcz0iY29udm9jLXRhYmxlIj48dGhlYWQ+PHRyPjx0aD7DiXByZXV2ZTwvdGg+PHRoPkRhdGU8L3RoPjx0aD5Ib3JhaXJlPC90aD48dGg+RHVyw6llPC90aD48dGg+U2FsbGU8L3RoPjwvdHI+PC90aGVhZD48dGJvZHk+PHRyPjx0ZCBjb2xzcGFuPSI1Ij4uLi48L3RkPjwvdHI+PC90Ym9keT48L3RhYmxlPgogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJjb252b2MtcnVsZXMgZWRpdGFibGUtdGV4dCIgaWQ9InR4dC1zdXJ2LXJ1bGVzIiBjb250ZW50ZWRpdGFibGU9InRydWUiPk1lcmNpIGRlIHZvdHJlIHByw6lzZW5jZSAzMCBtaW51dGVzIGF2YW50IGxlIGTDqWJ1dCBkZSBsJ8OpcHJldXZlLjwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJjb252b2MtZm9vdGVyIiBzdHlsZT0ianVzdGlmeS1jb250ZW50OiBmbGV4LWVuZDsiPjxkaXYgY2xhc3M9ImNvbnZvYy1zaWduIiBzdHlsZT0idGV4dC1hbGlnbjpyaWdodDsiPjxkaXY+RmFpdCDDoCA8c3BhbiBpZD0idHh0LXN1cnYtY2l0eSIgY29udGVudGVkaXRhYmxlPSJ0cnVlIj5WaWxsZTwvc3Bhbj4sIGxlIDxzcGFuIGlkPSJjdXJyZW50LWRhdGUtc3VydiI+PC9zcGFuPjwvZGl2PjxkaXYgaWQ9ImNvbnZvYy1zdXJ2LXNpZ24tbmFtZSIgc3R5bGU9ImZvbnQtd2VpZ2h0OmJvbGQ7IG1hcmdpbi10b3A6MTVweDsiPjwvZGl2PjxkaXYgaWQ9ImNvbnZvYy1zdXJ2LXNpZ24tcm9sZSIgc3R5bGU9ImZvbnQtc3R5bGU6aXRhbGljOyI+PC9kaXY+PGltZyBpZD0iY29udm9jLXN1cnYtc2lnbi1pbWciIHN0eWxlPSJtYXgtaGVpZ2h0OjYwcHg7IG1hcmdpbi10b3A6MTBweDsiPjwvZGl2PjwvZGl2PgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgICAgPGRpdiBpZD0idmlldzYiIGNsYXNzPSJzZWN0aW9uLXZpZXciPgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iaGVhZGVyLXBhbmVsIj48aDI+PGkgY2xhc3M9ImZhLXNvbGlkIGZhLWNsaXBib2FyZC1saXN0Ij48L2k+IDYuIMOJbWFyZ2VtZW50cyBldCBBZmZpY2hhZ2U8L2gyPjwvZGl2PgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iY29udHJvbHMtYmFyIj4KICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJmb250LXNpemU6MC45cmVtOyBjb2xvcjojNTU1OyBtYXJnaW4tcmlnaHQ6MTVweDsiPkZpbHRyZSBzYWxsZSAobGFpc3NlciBzdXIgVE9VVCBwb3VyIHRvdXQgaW1wcmltZXIpIDo8L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8c2VsZWN0IGlkPSJlbWFyZ2VtZW50LXJvb20tZmlsdGVyIiBzdHlsZT0icGFkZGluZzo4cHg7IGJvcmRlci1yYWRpdXM6NXB4OyBtYXJnaW4tbGVmdDoxMHB4OyI+PG9wdGlvbiB2YWx1ZT0iQUxMIj5Ub3V0ZXMgbGVzIHNhbGxlcyB1dGlsaXPDqWVzPC9vcHRpb24+PC9zZWxlY3Q+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0ibWFyZ2luLWxlZnQ6YXV0bzsgZGlzcGxheTpmbGV4OyBnYXA6MTBweDsiPgogICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJhY3Rpb24tYnRuIGJ0bi1wcmludCIgb25jbGljaz0icHJpbnREaXNwbGF5TGlzdCgpIj5JbXByaW1lciBMaXN0ZXMgZCdhZmZpY2hhZ2UgKFRvdXRlcyDDiXByZXV2ZXMpPC9idXR0b24+CiAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImFjdGlvbi1idG4gYnRuLXByaW50IiBvbmNsaWNrPSJwcmludEVtYXJnZW1lbnQoKSI+SW1wcmltZXIgw4ltYXJnZW1lbnRzIChUb3V0ZXMgw4lwcmV1dmVzKTwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJiYWNrZ3JvdW5kOiNlZWU7IHBhZGRpbmc6MjBweDsgdGV4dC1hbGlnbjpjZW50ZXI7IGNvbG9yOiAjNTU1OyI+TGVzIGRvY3VtZW50cyBzZXJvbnQgZ8OpbsOpcsOpcyBwb3VyIDxzdHJvbmc+dG91dGVzIGxlcyDDqXByZXV2ZXM8L3N0cm9uZz4uPGJyPkNoYXF1ZSBzYWxsZSBzZXJhIHN1ciB1bmUgbm91dmVsbGUgcGFnZS48L2Rpdj4KICAgICAgICAgICAgPC9kaXY+CgogICAgICAgICAgICA8ZGl2IGlkPSJ2aWV3NyIgY2xhc3M9InNlY3Rpb24tdmlldyI+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJoZWFkZXItcGFuZWwiPjxoMj48aSBjbGFzcz0iZmEtc29saWQgZmEtZmlsZS1zaWduYXR1cmUiPjwvaT4gNy4gUHJvY8OocyBWZXJiYWwgZXQgUG9jaGV0dGVzPC9oMj48L2Rpdj4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImNvbnRyb2xzLWJhciI+CiAgICAgICAgICAgICAgICAgICAgPHNlbGVjdCBpZD0icHYtZXhhbS1zZWxlY3QiIG9uY2hhbmdlPSJ1cGRhdGVQVlJvb21TZWxlY3QoKSI+PC9zZWxlY3Q+CiAgICAgICAgICAgICAgICAgICAgPHNlbGVjdCBpZD0icHYtcm9vbS1zZWxlY3QiPjwvc2VsZWN0PgogICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9Im1hcmdpbi1sZWZ0OmF1dG87IGRpc3BsYXk6ZmxleDsgZ2FwOjEwcHg7Ij4KICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYWN0aW9uLWJ0biBidG4tcHJpbnQiIG9uY2xpY2s9InByaW50UFYoKSI+SW1wcmltZXIgUFY8L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYWN0aW9uLWJ0biBidG4tcHJpbnQiIG9uY2xpY2s9InByaW50UG9jaGV0dGVzKCkiPkltcHJpbWVyIFBvY2hldHRlczwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJjYXJkIj4KICAgICAgICAgICAgICAgICAgICA8aDM+Q29uc2lnbmVzIChwb3VyIGxhIHBvY2hldHRlKTwvaDM+CiAgICAgICAgICAgICAgICAgICAgPHRleHRhcmVhIGlkPSJ0eHQtcG9jaGV0dGUtc3VydiIgc3R5bGU9IndpZHRoOjEwMCU7IGhlaWdodDoyNTBweDsgcGFkZGluZzoxMHB4OyBib3JkZXI6MXB4IHNvbGlkICNjY2M7IGJvcmRlci1yYWRpdXM6NHB4OyIgb25pbnB1dD0ic2F2ZVBvY2hldHRlVGV4dCgnc3VydicsIHRoaXMudmFsdWUpIj48L3RleHRhcmVhPgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgICAgPGRpdiBpZD0idmlldzgiIGNsYXNzPSJzZWN0aW9uLXZpZXciPgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iaGVhZGVyLXBhbmVsIj48aDI+PGkgY2xhc3M9ImZhLXNvbGlkIGZhLWJhcmNvZGUiPjwvaT4gOC4gQW5vbnltYXQgZXQgw6l0aXF1ZXR0ZXM8L2gyPjwvZGl2PgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iY29udHJvbHMtYmFyIj4KICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJkaXNwbGF5OmZsZXg7IGZsZXgtZGlyZWN0aW9uOmNvbHVtbjsgZ2FwOjVweDsgbWFyZ2luLXJpZ2h0OjEwcHg7Ij4KICAgICAgICAgICAgICAgICAgICAgICAgPHNlbGVjdCBpZD0ibGFiZWwtZXhhbS1zZWxlY3QiIG9uY2hhbmdlPSJ1cGRhdGVMYWJlbFJvb21TZWxlY3QoKSIgc3R5bGU9InBhZGRpbmc6NXB4OyBib3JkZXItcmFkaXVzOjRweDsgZm9udC1zaXplOjAuOHJlbTsgd2lkdGg6MjAwcHg7Ij48L3NlbGVjdD4KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iZGlzcGxheTpmbGV4OyBnYXA6NXB4OyI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c2VsZWN0IGlkPSJsYWJlbC1yb29tLXNlbGVjdCIgc3R5bGU9InBhZGRpbmc6NXB4OyBib3JkZXItcmFkaXVzOjRweDsgZm9udC1zaXplOjAuOHJlbTsgd2lkdGg6MTIwcHg7Ij48L3NlbGVjdD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzZWxlY3QgaWQ9ImxhYmVsLWNsYXNzLXNlbGVjdCIgc3R5bGU9InBhZGRpbmc6NXB4OyBib3JkZXItcmFkaXVzOjRweDsgZm9udC1zaXplOjAuOHJlbTsgd2lkdGg6MTAwcHg7Ij48L3NlbGVjdD4KICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJtYXJnaW4tbGVmdDoxMHB4OyBib3JkZXItbGVmdDoxcHggc29saWQgI2NjYzsgcGFkZGluZy1sZWZ0OjEwcHg7Ij4KICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIHN0eWxlPSJmb250LXNpemU6MC44cmVtOyI+VHJpIExpc3RlL8OJdGlxdWV0dGVzIDo8L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICA8c2VsZWN0IGlkPSJsaXN0aW5nLXNvcnQtbW9kZSIgc3R5bGU9InBhZGRpbmc6NXB4OyBib3JkZXItcmFkaXVzOjRweDsgZm9udC1zaXplOjAuOHJlbTsiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iQUxQSEEiPkFscGhhYsOpdGlxdWU8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IkNMQVNTIj5QYXIgQ2xhc3NlPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJST09NIj5QYXIgU2FsbGU8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICAgICAgPC9zZWxlY3Q+CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CgogICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImFjdGlvbi1idG4gYnRuLWNhbGMiIG9uY2xpY2s9ImdlbmVyYXRlQW5vbnltaXR5KCkiPkfDqW7DqXJlciBDb2RlczwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImFjdGlvbi1idG4gYnRuLXByaW50IiBvbmNsaWNrPSJwcmludFRhYmxlTGFiZWxzKCkiPsOJdGlxdWV0dGVzPC9idXR0b24+CiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYWN0aW9uLWJ0biBidG4tcHJpbnQiIG9uY2xpY2s9InByaW50QW5vbnltaXR5TGlzdCgpIj5MaXN0aW5nPC9idXR0b24+CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIDxkaXYgaWQ9ImFub255bWl0eS10YWJsZS1jb250YWluZXIiPjwvZGl2PgogICAgICAgICAgICA8L2Rpdj4KCiAgICAgICAgICAgIDxkaXYgaWQ9InZpZXc5IiBjbGFzcz0ic2VjdGlvbi12aWV3Ij4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImhlYWRlci1wYW5lbCI+PGgyPjxpIGNsYXNzPSJmYS1zb2xpZCBmYS10YWJsZS1saXN0Ij48L2k+IDkuIFRhYmxlYXUgUsOpY2FwaXR1bGF0aWY8L2gyPjwvZGl2PgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iY29udHJvbHMtYmFyIj4KICAgICAgICAgICAgICAgICAgICA8bGFiZWw+w4lwcmV1dmUgOjwvbGFiZWw+IDxzZWxlY3QgaWQ9InJlY2FwLWV4YW0tc2VsZWN0IiBvbmNoYW5nZT0idXBkYXRlUmVjYXBSb29tU2VsZWN0KCkiPjwvc2VsZWN0PgogICAgICAgICAgICAgICAgICAgIDxsYWJlbCBzdHlsZT0ibWFyZ2luLWxlZnQ6MTBweDsiPlNhbGxlIDo8L2xhYmVsPiA8c2VsZWN0IGlkPSJyZWNhcC1yb29tLXNlbGVjdCI+PC9zZWxlY3Q+CiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYWN0aW9uLWJ0biBidG4tcHJpbnQiIG9uY2xpY2s9InByaW50R2xvYmFsUmVjYXAoKSIgc3R5bGU9Im1hcmdpbi1sZWZ0OmF1dG87Ij5JbXByaW1lciBUYWJsZWF1eDwvYnV0dG9uPgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJiYWNrZ3JvdW5kOiNmOWY5Zjk7IHBhZGRpbmc6MjBweDsgdGV4dC1hbGlnbjpjZW50ZXI7Ij5Hw6luw6hyZSB1biB0YWJsZWF1IHBhciDDqXByZXV2ZSBldCBwYXIgc2FsbGUgaW5kaXF1YW50IGF1eCDDqWzDqHZlcyBvw7kgc2UgcmVuZHJlLjwvZGl2PgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICA8L2Rpdj4KICAgIDwvZGl2PgogICAgPGRpdiBpZD0icHJpbnQtYXJlYSIgc3R5bGU9ImRpc3BsYXk6bm9uZTsiPjwvZGl2PgoKICAgIDxzY3JpcHQ+CiAgICAgICAgLy8gVkFSSUFCTEUgR0xPQkFMRQogICAgICAgIGxldCBBcHBTdGF0ZSA9IHsgY29uZmlnOiB7fSwgY29udm9jVGV4dDoge30sIHN1cnZDb252b2NUZXh0OiB7fSwgcG9jaGV0dGVUZXh0OiB7fSwgbGF5b3V0OiB7IHN0ZDoge3RvcDoyMCwgYm90OjIwLCBmb250OjE2fSwgc3Vydjoge3RvcDoyMCwgYm90OjIwLCBmb250OjE2fSB9LCBlbGV2ZXM6IFtdLCBlcHJldXZlczogW10sIHNhbGxlczogW10sIHN1cnZlaWxsYW50czogW10sIGRpc3RyaWJ1dGlvbkRhdGE6IFtdLCBjdXJyZW50RXhhbUluZGV4OiAwIH07CiAgICAgICAgY29uc3Qgbm9ybWFsaXplID0gcyA9PiBzID8gcy50b1N0cmluZygpLnRvTG93ZXJDYXNlKCkudHJpbSgpIDogJyc7CiAgICAgICAgY29uc3Qgbm9ybUNsYXNzID0gKHMpID0+IHMgPyBTdHJpbmcocykudG9VcHBlckNhc2UoKS5yZXBsYWNlKC9ccysvZywgJycpLnRyaW0oKSA6ICJOL0EiOwoKICAgICAgICAvLyBGVU5DVElPTiBESVNQTEFZIERVUkFUSU9OIAogICAgICAgIGZ1bmN0aW9uIGZvcm1hdER1cmF0aW9uRGlzcGxheSh2YWwpIHsKICAgICAgICAgICAgaWYgKCF2YWwpIHJldHVybiAiIjsKICAgICAgICAgICAgY29uc3QgcyA9IFN0cmluZyh2YWwpLnRyaW0oKTsKICAgICAgICAgICAgaWYgKHMuaW5jbHVkZXMoJ2gnKSB8fCBzLmluY2x1ZGVzKCc6JykpIHsKICAgICAgICAgICAgICAgIHJldHVybiBzLnJlcGxhY2UoJzonLCAnaCcpOyAKICAgICAgICAgICAgfQogICAgICAgICAgICBjb25zdCBudW0gPSBwYXJzZUZsb2F0KHMpOwogICAgICAgICAgICBpZiAoIWlzTmFOKG51bSkpIHsKICAgICAgICAgICAgICAgIGNvbnN0IGggPSBNYXRoLmZsb29yKG51bSAvIDYwKTsKICAgICAgICAgICAgICAgIGNvbnN0IG0gPSBNYXRoLnJvdW5kKG51bSAlIDYwKTsKICAgICAgICAgICAgICAgIGNvbnN0IG1TdHIgPSBtIDwgMTAgPyAnMCcgKyBtIDogbTsKICAgICAgICAgICAgICAgIGlmKGggPiAwKSByZXR1cm4gYCR7aH1oJHttU3RyfWA7CiAgICAgICAgICAgICAgICByZXR1cm4gYCR7bX0gbWluYDsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gczsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgLy8gLS0tIE5PVVZFTExFIEZPTkNUSU9OIERFIFRSSSBST0JVU1RFIERBVEUgRlJBTkNBSVNFICsgSEVVUkUgLS0tCiAgICAgICAgZnVuY3Rpb24gZ2V0RGF0ZVRpbWVWYWx1ZShleGFtUmF3LCBpc1RUKSB7CiAgICAgICAgICAgIGxldCBkVmFsID0gZ2V0VmFsdWUoZXhhbVJhdywgWydEYXRlJywgJ0pvdXInLCAnRGF0ZSDDqXByZXV2ZScsICdEYXRlIGRlYnV0J10pOwogICAgICAgICAgICBsZXQgZGF0ZU9iaiA9IG51bGw7CiAgICAgICAgICAgIGNvbnN0IGZyZW5jaE1vbnRocyA9IHsKICAgICAgICAgICAgICAgICdqYW52aWVyJzogMCwgJ2bDqXZyaWVyJzogMSwgJ2ZldnJpZXInOiAxLCAnbWFycyc6IDIsICdhdnJpbCc6IDMsICdtYWknOiA0LCAnanVpbic6IDUsCiAgICAgICAgICAgICAgICAnanVpbGxldCc6IDYsICdhb8O7dCc6IDcsICdhb3V0JzogNywgJ3NlcHRlbWJyZSc6IDgsICdvY3RvYnJlJzogOSwgJ25vdmVtYnJlJzogMTAsICdkw6ljZW1icmUnOiAxMSwgJ2RlY2VtYnJlJzogMTEKICAgICAgICAgICAgfTsKICAgICAgICAgICAgaWYgKGRWYWwpIHsKICAgICAgICAgICAgICAgIGlmICghaXNOYU4oZFZhbCkgJiYgZFZhbCA+IDIwMDAwKSB7CiAgICAgICAgICAgICAgICAgICAgIGRhdGVPYmogPSBuZXcgRGF0ZSgoZFZhbCAtIDI1NTY5KSAqIDg2NDAwICogMTAwMCk7CiAgICAgICAgICAgICAgICB9IAogICAgICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mIGRWYWwgPT09ICdzdHJpbmcnKSB7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgY2xlYW5WYWwgPSBkVmFsLnRvTG93ZXJDYXNlKCkudHJpbSgpOwogICAgICAgICAgICAgICAgICAgIGlmIChjbGVhblZhbC5pbmNsdWRlcygnLycpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhcnRzID0gY2xlYW5WYWwuc3BsaXQoJy8nKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBhcnRzLmxlbmd0aCA9PT0gMykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZU9iaiA9IG5ldyBEYXRlKHBhcnNlSW50KHBhcnRzWzJdKSwgcGFyc2VJbnQocGFydHNbMV0pIC0gMSwgcGFyc2VJbnQocGFydHNbMF0pKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGV4dE1hdGNoID0gY2xlYW5WYWwubWF0Y2goLyhcZHsxLDJ9fDFlcilccysoW2EtesOpw7tdKykvKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRleHRNYXRjaCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGRheSA9ICh0ZXh0TWF0Y2hbMV0gPT09ICcxZXInKSA/IDEgOiBwYXJzZUludCh0ZXh0TWF0Y2hbMV0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG1vbnRoTmFtZSA9IHRleHRNYXRjaFsyXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmcmVuY2hNb250aHMuaGFzT3duUHJvcGVydHkobW9udGhOYW1lKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRZZWFyID0gbmV3IERhdGUoKS5nZXRGdWxsWWVhcigpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGVPYmogPSBuZXcgRGF0ZShjdXJyZW50WWVhciwgZnJlbmNoTW9udGhzW21vbnRoTmFtZV0sIGRheSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKCFkYXRlT2JqIHx8IGlzTmFOKGRhdGVPYmouZ2V0VGltZSgpKSkgewogICAgICAgICAgICAgICAgZGF0ZU9iaiA9IG5ldyBEYXRlKDApOyAKICAgICAgICAgICAgfQogICAgICAgICAgICBsZXQgdFZhbCA9IGlzVFQgPyBnZXRWYWx1ZShleGFtUmF3LCBbJ0hldXJlIGRlIGTDqWJ1dCB0aWVycyB0ZW1wcycsICdIZXVyZSBUVCddKSA6IGdldFZhbHVlKGV4YW1SYXcsIFsnSGV1cmUgZGUgZMOpYnV0JywgJ0hldXJlJywgJ0hvcmFpcmUnXSk7CiAgICAgICAgICAgIGlmKCF0VmFsKSB0VmFsID0gZ2V0VmFsdWUoZXhhbVJhdywgWydIZXVyZSBkZSBkw6lidXQnLCAnSGV1cmUnLCAnSG9yYWlyZSddKTsKICAgICAgICAgICAgbGV0IGhvdXJzID0gMCwgbWludXRlcyA9IDA7CiAgICAgICAgICAgIGlmKHRWYWwpIHsKICAgICAgICAgICAgICAgIGxldCB0U3RyID0gU3RyaW5nKHRWYWwpLnRvTG93ZXJDYXNlKCkucmVwbGFjZSgnaCcsICc6JykucmVwbGFjZSgnLicsICc6JykudHJpbSgpOwogICAgICAgICAgICAgICAgY29uc3QgdFBhcnRzID0gdFN0ci5zcGxpdCgnOicpOwogICAgICAgICAgICAgICAgaWYodFBhcnRzLmxlbmd0aCA+PSAxKSBob3VycyA9IHBhcnNlSW50KHRQYXJ0c1swXSkgfHwgMDsKICAgICAgICAgICAgICAgIGlmKHRQYXJ0cy5sZW5ndGggPj0gMikgbWludXRlcyA9IHBhcnNlSW50KHRQYXJ0c1sxXSkgfHwgMDsKICAgICAgICAgICAgfQogICAgICAgICAgICBkYXRlT2JqLnNldEhvdXJzKGhvdXJzLCBtaW51dGVzLCAwLCAwKTsKICAgICAgICAgICAgcmV0dXJuIGRhdGVPYmouZ2V0VGltZSgpOwogICAgICAgIH0KCiAgICAgICAgLy8gLS0tIDEuIEZPTkNUSU9OUyBTQVVWRUdBUkRFIEVUIENIQVJHRU1FTlQgLS0tCiAgICAgICAgZnVuY3Rpb24gc3luY1N0YXRlRnJvbURPTSgpIHsKICAgICAgICAgICAgQXBwU3RhdGUuY29uZmlnLm5hbWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29uZmlnTmFtZScpLnZhbHVlOwogICAgICAgICAgICBBcHBTdGF0ZS5jb25maWcucm9sZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb25maWdSb2xlJykudmFsdWU7CiAgICAgICAgICAgIEFwcFN0YXRlLmNvbmZpZy5leGFtVGl0bGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29uZmlnRXhhbVRpdGxlJykudmFsdWU7CiAgICAgICAgICAgIGlmKCFBcHBTdGF0ZS5jb252b2NUZXh0KSBBcHBTdGF0ZS5jb252b2NUZXh0ID0ge307CiAgICAgICAgICAgIEFwcFN0YXRlLmNvbnZvY1RleHQuYWRkcmVzcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0eHQtYWRkcmVzcycpLnZhbHVlOwogICAgICAgICAgICBBcHBTdGF0ZS5jb252b2NUZXh0LmJvZHkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndHh0LWJvZHknKS5pbm5lckhUTUw7CiAgICAgICAgICAgIEFwcFN0YXRlLmNvbnZvY1RleHQucnVsZXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndHh0LXJ1bGVzJykuaW5uZXJIVE1MOwogICAgICAgICAgICBBcHBTdGF0ZS5jb252b2NUZXh0LmNpdHkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndHh0LWNpdHknKS5pbm5lclRleHQ7CiAgICAgICAgICAgIGlmKCFBcHBTdGF0ZS5sYXlvdXQuc3RkKSBBcHBTdGF0ZS5sYXlvdXQuc3RkID0ge307CiAgICAgICAgICAgIEFwcFN0YXRlLmxheW91dC5zdGQudG9wID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NldHMtc3RkLXRvcCcpLnZhbHVlOwogICAgICAgICAgICBBcHBTdGF0ZS5sYXlvdXQuc3RkLmJvdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZXRzLXN0ZC1ib3QnKS52YWx1ZTsKICAgICAgICAgICAgQXBwU3RhdGUubGF5b3V0LnN0ZC5mb250ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NldHMtc3RkLWZvbnQnKS52YWx1ZTsKICAgICAgICAgICAgaWYoIUFwcFN0YXRlLmxheW91dC5zdXJ2KSBBcHBTdGF0ZS5sYXlvdXQuc3VydiA9IHt9OwogICAgICAgICAgICBBcHBTdGF0ZS5sYXlvdXQuc3Vydi50b3AgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2V0cy1zdXJ2LXRvcCcpLnZhbHVlOwogICAgICAgICAgICBBcHBTdGF0ZS5sYXlvdXQuc3Vydi5ib3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2V0cy1zdXJ2LWJvdCcpLnZhbHVlOwogICAgICAgICAgICBBcHBTdGF0ZS5sYXlvdXQuc3Vydi5mb250ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NldHMtc3Vydi1mb250JykudmFsdWU7CiAgICAgICAgICAgIGlmKCFBcHBTdGF0ZS5zdXJ2Q29udm9jVGV4dCkgQXBwU3RhdGUuc3VydkNvbnZvY1RleHQgPSB7fTsKICAgICAgICAgICAgQXBwU3RhdGUuc3VydkNvbnZvY1RleHQuYWRkcmVzcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0eHQtc3Vydi1hZGRyZXNzJykudmFsdWU7CiAgICAgICAgICAgIEFwcFN0YXRlLnN1cnZDb252b2NUZXh0LmJvZHkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndHh0LXN1cnYtYm9keScpLmlubmVySFRNTDsKICAgICAgICAgICAgQXBwU3RhdGUuc3VydkNvbnZvY1RleHQucnVsZXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndHh0LXN1cnYtcnVsZXMnKS5pbm5lckhUTUw7CiAgICAgICAgICAgIEFwcFN0YXRlLnN1cnZDb252b2NUZXh0LmNpdHkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndHh0LXN1cnYtY2l0eScpLmlubmVyVGV4dDsKICAgICAgICAgICAgaWYoIUFwcFN0YXRlLnBvY2hldHRlVGV4dCkgQXBwU3RhdGUucG9jaGV0dGVUZXh0ID0ge307CiAgICAgICAgICAgIEFwcFN0YXRlLnBvY2hldHRlVGV4dC5zdXJ2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3R4dC1wb2NoZXR0ZS1zdXJ2JykudmFsdWU7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBzYXZlUHJvamVjdCgpIHsKICAgICAgICAgICAgaWYoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ZpZXczJykuY2xhc3NMaXN0LmNvbnRhaW5zKCdhY3RpdmUnKSkgewogICAgICAgICAgICAgICAgdXBkYXRlQ3VycmVudEV4YW1TdGF0ZSgpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHN5bmNTdGF0ZUZyb21ET00oKTsKICAgICAgICAgICAgY29uc3QgZGF0YVN0ciA9IEpTT04uc3RyaW5naWZ5KEFwcFN0YXRlKTsKICAgICAgICAgICAgY29uc3QgYmxvYiA9IG5ldyBCbG9iKFtkYXRhU3RyXSwge3R5cGU6ICJhcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9dXRmLTgifSk7CiAgICAgICAgICAgIGNvbnN0IHVybCA9IFVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7CiAgICAgICAgICAgIGNvbnN0IGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7CiAgICAgICAgICAgIGEuaHJlZiA9IHVybDsKICAgICAgICAgICAgY29uc3QgZCA9IG5ldyBEYXRlKCk7CiAgICAgICAgICAgIGNvbnN0IGRhdGVTdHIgPSBkLnRvSVNPU3RyaW5nKCkuc3BsaXQoJ1QnKVswXTsKICAgICAgICAgICAgYS5kb3dubG9hZCA9IGBQUk9KRVRfRVhBTV8ke2RhdGVTdHJ9Lmpzb25gOwogICAgICAgICAgICBhLmNsaWNrKCk7CiAgICAgICAgICAgIFVSTC5yZXZva2VPYmplY3RVUkwodXJsKTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGxvYWRQcm9qZWN0KGlucHV0KSB7CiAgICAgICAgICAgIGNvbnN0IGZpbGUgPSBpbnB1dC5maWxlc1swXTsKICAgICAgICAgICAgaWYgKCFmaWxlKSByZXR1cm47CiAgICAgICAgICAgIGNvbnN0IHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7CiAgICAgICAgICAgIHJlYWRlci5vbmxvYWQgPSBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIEFwcFN0YXRlID0gSlNPTi5wYXJzZShlLnRhcmdldC5yZXN1bHQpOwogICAgICAgICAgICAgICAgICAgIHJlc3RvcmVQcm9qZWN0VUkoKTsKICAgICAgICAgICAgICAgICAgICBhbGVydCgiUHJvamV0IGNoYXJnw6kgYXZlYyBzdWNjw6hzICEiKTsKICAgICAgICAgICAgICAgIH0gY2F0Y2goZXJyKSB7IGNvbnNvbGUuZXJyb3IoZXJyKTsgYWxlcnQoIkVycmV1ciBsb3JzIGRlIGxhIGxlY3R1cmUuIik7IH0KICAgICAgICAgICAgfTsKICAgICAgICAgICAgcmVhZGVyLnJlYWRBc1RleHQoZmlsZSk7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiByZXN0b3JlUHJvamVjdFVJKCkgewogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29uZmlnTmFtZScpLnZhbHVlID0gQXBwU3RhdGUuY29uZmlnLm5hbWUgfHwgIiI7CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb25maWdSb2xlJykudmFsdWUgPSBBcHBTdGF0ZS5jb25maWcucm9sZSB8fCAiIjsKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbmZpZ0V4YW1UaXRsZScpLnZhbHVlID0gQXBwU3RhdGUuY29uZmlnLmV4YW1UaXRsZSB8fCAiIjsKICAgICAgICAgICAgaWYoQXBwU3RhdGUuY29uZmlnLmxvZ29TcmMpIHsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvZ29QcmV2aWV3Jykuc3JjID0gQXBwU3RhdGUuY29uZmlnLmxvZ29TcmM7IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb2dvUHJldmlldycpLnN0eWxlLmRpc3BsYXk9J2Jsb2NrJzsgfQogICAgICAgICAgICBpZihBcHBTdGF0ZS5jb25maWcuc2lnblNyYykgeyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2lnblByZXZpZXcnKS5zcmMgPSBBcHBTdGF0ZS5jb25maWcuc2lnblNyYzsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NpZ25QcmV2aWV3Jykuc3R5bGUuZGlzcGxheT0nYmxvY2snOyB9CiAgICAgICAgICAgIGlmKEFwcFN0YXRlLmVsZXZlcyAmJiBBcHBTdGF0ZS5lbGV2ZXMubGVuZ3RoKSB1cGRhdGVTdGF0dXMoJ3pvbmUtZWxldmVzJywgJ3N0YXR1cy1lbGV2ZXMnLCBgJHtBcHBTdGF0ZS5lbGV2ZXMubGVuZ3RofSDDqWzDqHZlc2ApOwogICAgICAgICAgICBpZihBcHBTdGF0ZS5lcHJldXZlcyAmJiBBcHBTdGF0ZS5lcHJldXZlcy5sZW5ndGgpIHVwZGF0ZVN0YXR1cygnem9uZS1lcHJldXZlcycsICdzdGF0dXMtZXByZXV2ZXMnLCBgJHtBcHBTdGF0ZS5lcHJldXZlcy5sZW5ndGh9IMOpcHJldXZlc2ApOwogICAgICAgICAgICBpZihBcHBTdGF0ZS5zYWxsZXMgJiYgQXBwU3RhdGUuc2FsbGVzLmxlbmd0aCkgdXBkYXRlU3RhdHVzKCd6b25lLXJlc3NvdXJjZXMnLCAnc3RhdHVzLXJlc3NvdXJjZXMnLCBgJHtBcHBTdGF0ZS5zYWxsZXMubGVuZ3RofSBzYWxsZXNgKTsKICAgICAgICAgICAgaWYoQXBwU3RhdGUuc3VydmVpbGxhbnRzICYmIEFwcFN0YXRlLnN1cnZlaWxsYW50cy5sZW5ndGgpIHVwZGF0ZVN0YXR1cygnem9uZS1zdXJ2ZWlsbGFudHMnLCAnc3RhdHVzLXN1cnZlaWxsYW50cycsIGAke0FwcFN0YXRlLnN1cnZlaWxsYW50cy5sZW5ndGh9IHN1cnZlaWxsYW50c2ApOwogICAgICAgICAgICBpZihBcHBTdGF0ZS5kaXN0cmlidXRpb25EYXRhICYmIEFwcFN0YXRlLmRpc3RyaWJ1dGlvbkRhdGEubGVuZ3RoKSB7IHJlbmRlckV4YW1OYXZpZ2F0aW9uKCk7IHJlbmRlckN1cnJlbnRFeGFtKCk7IH0KICAgICAgICAgICAgaWYoQXBwU3RhdGUuY29udm9jVGV4dCkgewogICAgICAgICAgICAgICAgaWYoQXBwU3RhdGUuY29udm9jVGV4dC5hZGRyZXNzKSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndHh0LWFkZHJlc3MnKS52YWx1ZSA9IEFwcFN0YXRlLmNvbnZvY1RleHQuYWRkcmVzczsKICAgICAgICAgICAgICAgIGlmKEFwcFN0YXRlLmNvbnZvY1RleHQuYm9keSkgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3R4dC1ib2R5JykuaW5uZXJIVE1MID0gQXBwU3RhdGUuY29udm9jVGV4dC5ib2R5OwogICAgICAgICAgICAgICAgaWYoQXBwU3RhdGUuY29udm9jVGV4dC5ydWxlcykgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3R4dC1ydWxlcycpLmlubmVySFRNTCA9IEFwcFN0YXRlLmNvbnZvY1RleHQucnVsZXM7CiAgICAgICAgICAgICAgICBpZihBcHBTdGF0ZS5jb252b2NUZXh0LmNpdHkpIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0eHQtY2l0eScpLmlubmVyVGV4dCA9IEFwcFN0YXRlLmNvbnZvY1RleHQuY2l0eTsKICAgICAgICAgICAgfQogICAgICAgICAgICAgaWYoQXBwU3RhdGUuc3VydkNvbnZvY1RleHQpIHsKICAgICAgICAgICAgICAgIGlmKEFwcFN0YXRlLnN1cnZDb252b2NUZXh0LmFkZHJlc3MpIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0eHQtc3Vydi1hZGRyZXNzJykudmFsdWUgPSBBcHBTdGF0ZS5zdXJ2Q29udm9jVGV4dC5hZGRyZXNzOwogICAgICAgICAgICAgICAgaWYoQXBwU3RhdGUuc3VydkNvbnZvY1RleHQuYm9keSkgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3R4dC1zdXJ2LWJvZHknKS5pbm5lckhUTUwgPSBBcHBTdGF0ZS5zdXJ2Q29udm9jVGV4dC5ib2R5OwogICAgICAgICAgICAgICAgaWYoQXBwU3RhdGUuc3VydkNvbnZvY1RleHQucnVsZXMpIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0eHQtc3Vydi1ydWxlcycpLmlubmVySFRNTCA9IEFwcFN0YXRlLnN1cnZDb252b2NUZXh0LnJ1bGVzOwogICAgICAgICAgICAgICAgaWYoQXBwU3RhdGUuc3VydkNvbnZvY1RleHQuY2l0eSkgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3R4dC1zdXJ2LWNpdHknKS5pbm5lclRleHQgPSBBcHBTdGF0ZS5zdXJ2Q29udm9jVGV4dC5jaXR5OwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmKEFwcFN0YXRlLnBvY2hldHRlVGV4dCAmJiBBcHBTdGF0ZS5wb2NoZXR0ZVRleHQuc3VydikgeyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndHh0LXBvY2hldHRlLXN1cnYnKS52YWx1ZSA9IEFwcFN0YXRlLnBvY2hldHRlVGV4dC5zdXJ2OyB9IGVsc2UgeyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndHh0LXBvY2hldHRlLXN1cnYnKS52YWx1ZSA9IGRlZmF1bHRDb25zaWduZXM7IH0KICAgICAgICAgICAgcG9wdWxhdGVDbGFzc0ZpbHRlcigpOwogICAgICAgICAgICBwb3B1bGF0ZVN1cnZlaWxsYW50RmlsdGVyKCk7CiAgICAgICAgICAgIHBvcHVsYXRlRW1hcmdlbWVudEZpbHRlcnMoKTsKICAgICAgICAgICAgcG9wdWxhdGVQVkV4YW1TZWxlY3QoKTsKICAgICAgICAgICAgcG9wdWxhdGVSZWNhcEZpbHRlcnMoKTsKICAgICAgICAgICAgcG9wdWxhdGVMYWJlbEZpbHRlcnMoKTsKICAgICAgICAgICAgaWYoQXBwU3RhdGUuZWxldmVzLmxlbmd0aCA+IDAgJiYgQXBwU3RhdGUuZWxldmVzWzBdLk51bUFub255bWF0KSByZW5kZXJBbm9ueW1pdHlUYWJsZSgpOwogICAgICAgIH0KICAgICAgICAKICAgICAgICBmdW5jdGlvbiBnZXRWYWx1ZShyb3csIHBvc3NpYmxlS2V5cykgewogICAgICAgICAgICBpZiAoIXJvdykgcmV0dXJuIG51bGw7CiAgICAgICAgICAgIGNvbnN0IHJvd0tleXMgPSBPYmplY3Qua2V5cyhyb3cpOwogICAgICAgICAgICBmb3IgKGxldCBwayBvZiBwb3NzaWJsZUtleXMpIHsKICAgICAgICAgICAgICAgIGNvbnN0IHRhcmdldCA9IG5vcm1hbGl6ZShwayk7CiAgICAgICAgICAgICAgICBjb25zdCBmb3VuZEtleSA9IHJvd0tleXMuZmluZChrID0+IG5vcm1hbGl6ZShrKSA9PT0gdGFyZ2V0KTsKICAgICAgICAgICAgICAgIGlmIChmb3VuZEtleSkgcmV0dXJuIHJvd1tmb3VuZEtleV07CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBpc1RpZXJzVGVtcHModmFsKSB7IGlmICghdmFsKSByZXR1cm4gZmFsc2U7IGNvbnN0IHMgPSB2YWwudG9TdHJpbmcoKS50b1VwcGVyQ2FzZSgpOyByZXR1cm4gcy5pbmNsdWRlcygnVFQnKSB8fCBzLmluY2x1ZGVzKCdPVUknKSB8fCBzLmluY2x1ZGVzKCdUSUVSUycpIHx8IHMuaW5jbHVkZXMoJ1lFUycpOyB9CgogICAgICAgIGZ1bmN0aW9uIGhhbmRsZUZpbGUoaW5wdXQsIHR5cGUpIHsgCiAgICAgICAgICAgIGNvbnN0IGZpbGUgPSBpbnB1dC5maWxlc1swXTsgaWYgKCFmaWxlKSByZXR1cm47CiAgICAgICAgICAgIGNvbnN0IHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7CiAgICAgICAgICAgIHJlYWRlci5vbmxvYWQgPSBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICBjb25zdCBkYXRhID0gbmV3IFVpbnQ4QXJyYXkoZS50YXJnZXQucmVzdWx0KTsgCiAgICAgICAgICAgICAgICBjb25zdCB3b3JrYm9vayA9IFhMU1gucmVhZChkYXRhLCB7dHlwZTogJ2FycmF5J30pOwogICAgICAgICAgICAgICAgY29uc3QganNvbkRhdGEgPSBYTFNYLnV0aWxzLnNoZWV0X3RvX2pzb24od29ya2Jvb2suU2hlZXRzW3dvcmtib29rLlNoZWV0TmFtZXNbMF1dKTsKICAgICAgICAgICAgICAgIGlmICh0eXBlID09PSAnRUxFVkVTJykgeyBBcHBTdGF0ZS5lbGV2ZXMgPSBqc29uRGF0YTsgdXBkYXRlU3RhdHVzKCd6b25lLWVsZXZlcycsICdzdGF0dXMtZWxldmVzJywgYCR7anNvbkRhdGEubGVuZ3RofSDDqWzDqHZlc2ApOyB9CiAgICAgICAgICAgICAgICBlbHNlIGlmICh0eXBlID09PSAnRVBSRVVWRVMnKSB7IEFwcFN0YXRlLmVwcmV1dmVzID0ganNvbkRhdGE7IHVwZGF0ZVN0YXR1cygnem9uZS1lcHJldXZlcycsICdzdGF0dXMtZXByZXV2ZXMnLCBgJHtqc29uRGF0YS5sZW5ndGh9IMOpcHJldXZlc2ApOyB9CiAgICAgICAgICAgICAgICBlbHNlIGlmICh0eXBlID09PSAnUkVTU09VUkNFUycpIHsgQXBwU3RhdGUuc2FsbGVzID0ganNvbkRhdGE7IHVwZGF0ZVN0YXR1cygnem9uZS1yZXNzb3VyY2VzJywgJ3N0YXR1cy1yZXNzb3VyY2VzJywgYCR7anNvbkRhdGEubGVuZ3RofSBzYWxsZXNgKTsgfQogICAgICAgICAgICAgICAgZWxzZSBpZiAodHlwZSA9PT0gJ1NVUlZFSUxMQU5UUycpIHsgQXBwU3RhdGUuc3VydmVpbGxhbnRzID0ganNvbkRhdGE7IHVwZGF0ZVN0YXR1cygnem9uZS1zdXJ2ZWlsbGFudHMnLCAnc3RhdHVzLXN1cnZlaWxsYW50cycsIGAke2pzb25EYXRhLmxlbmd0aH0gc3VydmVpbGxhbnRzYCk7IH0KICAgICAgICAgICAgfTsgCiAgICAgICAgICAgIHJlYWRlci5yZWFkQXNBcnJheUJ1ZmZlcihmaWxlKTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIHVwZGF0ZVN0YXR1cyh6b25lSWQsIHN0YXR1c0lkLCBtc2cpIHsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoem9uZUlkKS5jbGFzc0xpc3QuYWRkKCdsb2FkZWQnKTsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoc3RhdHVzSWQpLmlubmVySFRNTCA9ICc8aSBjbGFzcz0iZmEtc29saWQgZmEtY2hlY2siPjwvaT4gJyArIG1zZzsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoc3RhdHVzSWQpLmNsYXNzTmFtZSA9ICdzdGF0dXMtYmFkZ2Ugc3RhdHVzLW9rJzsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoc3RhdHVzSWQpLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snOyB9CgogICAgICAgIGZ1bmN0aW9uIGxhdW5jaERpc3RyaWJ1dGlvbigpIHsKICAgICAgICAgICAgaWYoIUFwcFN0YXRlLmVwcmV1dmVzLmxlbmd0aCB8fCAhQXBwU3RhdGUuZWxldmVzLmxlbmd0aCB8fCAhQXBwU3RhdGUuc2FsbGVzLmxlbmd0aCkgeyBhbGVydCgiSW1wb3J0IG1hbnF1YW50LiIpOyByZXR1cm47IH0KICAgICAgICAgICAgaWYoIWNvbmZpcm0oIkxhbmNlciBsZSBjYWxjdWwgPyBBdHRlbnRpb24sIGNlbGEgw6ljcmFzZXJhIGxhIHLDqXBhcnRpdGlvbiBleGlzdGFudGUgcG91ciBsYSBwb3J0w6llIHPDqWxlY3Rpb25uw6llLiIpKSByZXR1cm47CiAgICAgICAgICAgIGNvbnN0IG1ldGhvZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkaXN0cmliLW1ldGhvZCcpLnZhbHVlOyAKICAgICAgICAgICAgY29uc3Qgc2NvcGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGlzdHJpYi1zY29wZScpLnZhbHVlOyAgIAogICAgICAgICAgICBjYWxjdWxhdGVEaXN0cmlidXRpb24obWV0aG9kLCBzY29wZSk7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBjYWxjdWxhdGVEaXN0cmlidXRpb24obWV0aG9kLCBzY29wZSkgewogICAgICAgICAgICBjb25zdCBmaXJzdFN0dWRlbnQgPSBBcHBTdGF0ZS5lbGV2ZXNbMF07CiAgICAgICAgICAgIGNvbnN0IGhhc1NwZWNpYWx0eSA9IGdldFZhbHVlKGZpcnN0U3R1ZGVudCwgWydTcMOpY2lhbGl0w6kxJywgJ1NwZTEnLCAnU3BlIDEnXSkgIT09IG51bGw7CiAgICAgICAgICAgIGlmIChzY29wZSA9PT0gJ0FMTCcgfHwgQXBwU3RhdGUuZGlzdHJpYnV0aW9uRGF0YS5sZW5ndGggPT09IDApIHsKICAgICAgICAgICAgICAgIEFwcFN0YXRlLmRpc3RyaWJ1dGlvbkRhdGEgPSBuZXcgQXJyYXkoQXBwU3RhdGUuZXByZXV2ZXMubGVuZ3RoKS5maWxsKG51bGwpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGxldCBpbmRpY2VzVG9Qcm9jZXNzID0gW107CiAgICAgICAgICAgIGlmIChzY29wZSA9PT0gJ0FMTCcpIHsKICAgICAgICAgICAgICAgIGZvcihsZXQgaT0wOyBpPEFwcFN0YXRlLmVwcmV1dmVzLmxlbmd0aDsgaSsrKSBpbmRpY2VzVG9Qcm9jZXNzLnB1c2goaSk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBpbmRpY2VzVG9Qcm9jZXNzLnB1c2goQXBwU3RhdGUuY3VycmVudEV4YW1JbmRleCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaW5kaWNlc1RvUHJvY2Vzcy5mb3JFYWNoKGV4YW1JZHggPT4gewogICAgICAgICAgICAgICAgY29uc3QgZXhhbSA9IEFwcFN0YXRlLmVwcmV1dmVzW2V4YW1JZHhdOwogICAgICAgICAgICAgICAgbGV0IGV4YW1TdGF0ZSA9IHsgZXhhbUlkeDogZXhhbUlkeCwgc3RvcmFnZTogW10sIHJvb21zOiBbXSB9OwogICAgICAgICAgICAgICAgY29uc3QgbWF0aWVyZSA9IGdldFZhbHVlKGV4YW0sIFsnTWF0acOocmUnLCAnRXByZXV2ZScsICdOb20nXSkgfHwgKCfDiXByZXV2ZSAnICsgKGV4YW1JZHggKyAxKSk7CiAgICAgICAgICAgICAgICBsZXQgY2FuZGlkYXRlcyA9IEFwcFN0YXRlLmVsZXZlcy5maWx0ZXIoZSA9PiB7CiAgICAgICAgICAgICAgICAgICAgaWYgKCFoYXNTcGVjaWFsdHkpIHJldHVybiB0cnVlOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IHNwZTEgPSBnZXRWYWx1ZShlLCBbJ1Nww6ljaWFsaXTDqTEnLCAnU3BlMScsICdTcGUgMSddKTsKICAgICAgICAgICAgICAgICAgICBjb25zdCBzcGUyID0gZ2V0VmFsdWUoZSwgWydTcMOpY2lhbGl0w6kyJywgJ1NwZTInLCAnU3BlIDInXSk7CiAgICAgICAgICAgICAgICAgICAgaWYgKCFzcGUxICYmICFzcGUyKSByZXR1cm4gdHJ1ZTsgCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChzcGUxID09IG1hdGllcmUgfHwgc3BlMiA9PSBtYXRpZXJlIHx8IFsiUGhpbG9zb3BoaWUiLCAiRnJhbsOnYWlzIiwgIkhpc3RvaXJlLUfDqW8iLCAiRW5zZWlnbmVtZW50IFNjaWVudGlmaXF1ZSJdLmluY2x1ZGVzKG1hdGllcmUpKTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgaWYgKG1ldGhvZCA9PT0gJ0NMQVNTJykgewogICAgICAgICAgICAgICAgICAgIGNhbmRpZGF0ZXMuc29ydCgoYSwgYikgPT4gewogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjQSA9IG5vcm1DbGFzcyhnZXRWYWx1ZShhLCBbJ0NsYXNzZScsICdEaXYnXSkpOwogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjQiA9IG5vcm1DbGFzcyhnZXRWYWx1ZShiLCBbJ0NsYXNzZScsICdEaXYnXSkpOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoY0EgIT09IGNCKSByZXR1cm4gY0EubG9jYWxlQ29tcGFyZShjQik7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoZ2V0VmFsdWUoYSxbJ05vbSddKXx8JycpLmxvY2FsZUNvbXBhcmUoZ2V0VmFsdWUoYixbJ05vbSddKXx8JycpOwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBjYW5kaWRhdGVzLnNvcnQoKGEsIGIpID0+IChnZXRWYWx1ZShhLFsnTm9tJ10pfHwnJykubG9jYWxlQ29tcGFyZShnZXRWYWx1ZShiLFsnTm9tJ10pfHwnJykpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY29uc3QgdHRTdHVkZW50cyA9IGNhbmRpZGF0ZXMuZmlsdGVyKGUgPT4gaXNUaWVyc1RlbXBzKGdldFZhbHVlKGUsIFsnVGllcnMgdGVtcHMnLCAnVFQnXSkpKTsKICAgICAgICAgICAgICAgIGNvbnN0IHJlZ1N0dWRlbnRzID0gY2FuZGlkYXRlcy5maWx0ZXIoZSA9PiAhaXNUaWVyc1RlbXBzKGdldFZhbHVlKGUsIFsnVGllcnMgdGVtcHMnLCAnVFQnXSkpKTsKICAgICAgICAgICAgICAgIGxldCByZW1haW5pbmdUVCA9IFsuLi50dFN0dWRlbnRzXTsKICAgICAgICAgICAgICAgIGxldCByZW1haW5pbmdSZWcgPSBbLi4ucmVnU3R1ZGVudHNdOwogICAgICAgICAgICAgICAgQXBwU3RhdGUuc2FsbGVzLmZvckVhY2goKHNhbGxlLCByb29tSWR4KSA9PiB7CiAgICAgICAgICAgICAgICAgICAgbGV0IHJhd05hbWUgPSBnZXRWYWx1ZShzYWxsZSwgWydTYWxsZScsICdOb20nXSkgfHwgKCdTYWxsZSAnICsgKHJvb21JZHggKyAxKSk7CiAgICAgICAgICAgICAgICAgICAgbGV0IGNsZWFuTmFtZSA9IHJhd05hbWUudG9TdHJpbmcoKS5yZXBsYWNlKC9ccypcKD9UVFwpP1xzKiQvaSwgJycpOyAKICAgICAgICAgICAgICAgICAgICBjb25zdCByb29tVHlwZSA9IGdldFZhbHVlKHNhbGxlLCBbJ1R5cGUnXSkgfHwgIiI7CiAgICAgICAgICAgICAgICAgICAgY29uc3Qgcm9vbUNhcCA9IHBhcnNlSW50KGdldFZhbHVlKHNhbGxlLCBbJ0NhcGFjaXTDqSddKSkgfHwgOTk7IAogICAgICAgICAgICAgICAgICAgIGNvbnN0IGlzUm9vbVRUID0gaXNUaWVyc1RlbXBzKHJvb21UeXBlKTsKICAgICAgICAgICAgICAgICAgICBsZXQgbGlzdFRvVXNlOwogICAgICAgICAgICAgICAgICAgIGlmKGlzUm9vbVRUKSB7IGxpc3RUb1VzZSA9IHJlbWFpbmluZ1RUOyB9IGVsc2UgeyBsaXN0VG9Vc2UgPSByZW1haW5pbmdSZWc7IH0KICAgICAgICAgICAgICAgICAgICBsZXQgcm9vbVN0dWRlbnRzID0gW107CiAgICAgICAgICAgICAgICAgICAgaWYgKG1ldGhvZCA9PT0gJ0NMQVNTJykgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAobGlzdFRvVXNlLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGZpcnN0U3R1ZGVudENsYXNzID0gbm9ybUNsYXNzKGdldFZhbHVlKGxpc3RUb1VzZVswXSwgWydDbGFzc2UnLCAnRGl2J10pKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBzYW1lQ2xhc3NDb3VudCA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IobGV0IGs9MDsgayA8IGxpc3RUb1VzZS5sZW5ndGg7IGsrKykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChub3JtQ2xhc3MoZ2V0VmFsdWUobGlzdFRvVXNlW2tdLCBbJ0NsYXNzZScsICdEaXYnXSkpID09PSBmaXJzdFN0dWRlbnRDbGFzcykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzYW1lQ2xhc3NDb3VudCsrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGFtb3VudFRvVGFrZSA9IE1hdGgubWluKHJvb21DYXAsIHNhbWVDbGFzc0NvdW50KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvb21TdHVkZW50cyA9IGxpc3RUb1VzZS5zcGxpY2UoMCwgYW1vdW50VG9UYWtlKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGFtb3VudFRvVGFrZSA9IE1hdGgubWluKHJvb21DYXAsIGxpc3RUb1VzZS5sZW5ndGgpOwogICAgICAgICAgICAgICAgICAgICAgICByb29tU3R1ZGVudHMgPSBsaXN0VG9Vc2Uuc3BsaWNlKDAsIGFtb3VudFRvVGFrZSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHJvb21TdHVkZW50cy5zb3J0KChhLGIpID0+IChnZXRWYWx1ZShhLFsnTm9tJ10pfHwnJykubG9jYWxlQ29tcGFyZShnZXRWYWx1ZShiLFsnTm9tJ10pfHwnJykpOwogICAgICAgICAgICAgICAgICAgIGV4YW1TdGF0ZS5yb29tcy5wdXNoKHsgbmFtZTogY2xlYW5OYW1lLCBjYXBhY2l0eTogcm9vbUNhcCwgaXNUVDogaXNSb29tVFQsIHN1cnZlaWxsYW50czogW10sIHN0dWRlbnRzOiByb29tU3R1ZGVudHMgfSk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIGV4YW1TdGF0ZS5zdG9yYWdlID0gWy4uLnJlbWFpbmluZ1RULCAuLi5yZW1haW5pbmdSZWddLnNvcnQoKGEsYikgPT4gKGdldFZhbHVlKGEsWydOb20nXSl8fCcnKS5sb2NhbGVDb21wYXJlKGdldFZhbHVlKGIsWydOb20nXSl8fCcnKSk7IAogICAgICAgICAgICAgICAgQXBwU3RhdGUuZGlzdHJpYnV0aW9uRGF0YVtleGFtSWR4XSA9IGV4YW1TdGF0ZTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGlmIChzY29wZSA9PT0gJ0FMTCcpIEFwcFN0YXRlLmN1cnJlbnRFeGFtSW5kZXggPSAwOwogICAgICAgICAgICByZW5kZXJFeGFtTmF2aWdhdGlvbigpOyAKICAgICAgICAgICAgcmVuZGVyQ3VycmVudEV4YW0oKTsgCiAgICAgICAgICAgIHBvcHVsYXRlUFZFeGFtU2VsZWN0KCk7IAogICAgICAgICAgICBwb3B1bGF0ZUVtYXJnZW1lbnRGaWx0ZXJzKCk7IAogICAgICAgICAgICBwb3B1bGF0ZVJlY2FwRmlsdGVycygpOwogICAgICAgICAgICBwb3B1bGF0ZUxhYmVsRmlsdGVycygpOyAKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIHJlbmRlckV4YW1OYXZpZ2F0aW9uKCkgewogICAgICAgICAgICBjb25zdCBuYXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZXhhbS1uYXZpZ2F0aW9uJyk7IG5hdi5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnOwogICAgICAgICAgICBjb25zdCBzZWxlY3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZXhhbS1kcm9wZG93bicpOyBzZWxlY3QuaW5uZXJIVE1MID0gIiI7CiAgICAgICAgICAgIEFwcFN0YXRlLmRpc3RyaWJ1dGlvbkRhdGEuZm9yRWFjaCgoZWQsIGlkeCkgPT4gewogICAgICAgICAgICAgICAgaWYoIWVkICYmIEFwcFN0YXRlLmVwcmV1dmVzW2lkeF0pIHsKICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGV4YW1JbmZvID0gQXBwU3RhdGUuZXByZXV2ZXNbaWR4XTsKICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1hdGllcmUgPSBnZXRWYWx1ZShleGFtSW5mbywgWydNYXRpw6hyZScsICdFcHJldXZlJywgJ05vbSddKSB8fCAoJ8OJcHJldXZlICcgKyAoaWR4KzEpKTsKICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG9wdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ29wdGlvbicpOyBvcHQudmFsdWUgPSBpZHg7IG9wdC50ZXh0ID0gYCR7aWR4KzF9LiAke21hdGllcmV9IChOb24gY2FsY3Vsw6kpYDsKICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdC5hcHBlbmRDaGlsZChvcHQpOwogICAgICAgICAgICAgICAgfSBlbHNlIGlmKGVkKSB7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgZXhhbUluZm8gPSBBcHBTdGF0ZS5lcHJldXZlc1tlZC5leGFtSWR4XTsKICAgICAgICAgICAgICAgICAgICBjb25zdCBtYXRpZXJlID0gZ2V0VmFsdWUoZXhhbUluZm8sIFsnTWF0acOocmUnLCAnRXByZXV2ZScsICdOb20nXSkgfHwgKCfDiXByZXV2ZSAnICsgKGlkeCsxKSk7CiAgICAgICAgICAgICAgICAgICAgY29uc3Qgb3B0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnb3B0aW9uJyk7IG9wdC52YWx1ZSA9IGlkeDsgb3B0LnRleHQgPSBgJHtpZHgrMX0uICR7bWF0aWVyZX1gOwogICAgICAgICAgICAgICAgICAgIGlmKGlkeCA9PT0gQXBwU3RhdGUuY3VycmVudEV4YW1JbmRleCkgb3B0LnNlbGVjdGVkID0gdHJ1ZTsgc2VsZWN0LmFwcGVuZENoaWxkKG9wdCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gcmVuZGVyQ3VycmVudEV4YW0oKSB7IAogICAgICAgICAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY3VycmVudC1leGFtLWNvbnRhaW5lcicpOyBjb250YWluZXIuaW5uZXJIVE1MID0gIiI7CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdleGFtLWRyb3Bkb3duJykudmFsdWUgPSBBcHBTdGF0ZS5jdXJyZW50RXhhbUluZGV4OwogICAgICAgICAgICBjb25zdCBleGFtU3RhdGUgPSBBcHBTdGF0ZS5kaXN0cmlidXRpb25EYXRhW0FwcFN0YXRlLmN1cnJlbnRFeGFtSW5kZXhdOyAKICAgICAgICAgICAgaWYgKCFleGFtU3RhdGUpIHsKICAgICAgICAgICAgICAgICBjb250YWluZXIuaW5uZXJIVE1MID0gJzxkaXYgY2xhc3M9ImNhcmQiIHN0eWxlPSJ0ZXh0LWFsaWduOmNlbnRlcjsgY29sb3I6I2MwMzkyYjsiPlLDqXBhcnRpdGlvbiBub24gY2FsY3Vsw6llIHBvdXIgY2V0dGUgw6lwcmV1dmUuPC9kaXY+JzsKICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KICAgICAgICAgICAgY29uc3QgZXhhbUluZm8gPSBBcHBTdGF0ZS5lcHJldXZlc1tleGFtU3RhdGUuZXhhbUlkeF07CiAgICAgICAgICAgIGNvbnN0IG1hdGllcmUgPSBnZXRWYWx1ZShleGFtSW5mbywgWydNYXRpw6hyZScsICdFcHJldXZlJywgJ05vbSddKTsKICAgICAgICAgICAgY29uc3QgYmxvY2tIdG1sID0gYDxkaXYgY2xhc3M9ImV4YW0tc2VjdGlvbi1ibG9jayI+PGRpdiBjbGFzcz0iZXhhbS1zZWN0aW9uLWhlYWRlciI+PHNwYW4+JHttYXRpZXJlfTwvc3Bhbj48L2Rpdj48aDQgc3R5bGU9Im1hcmdpbjoxMHB4IDAgNXB4IDA7IGNvbG9yOiM3ZjhjOGQ7IGZvbnQtc2l6ZTowLjlyZW07Ij5ab25lIGRlIHN0b2NrYWdlIChOb24gcGxhY8Opcyk8L2g0PjxkaXYgY2xhc3M9InN0b3JhZ2Utem9uZSIgb25kcm9wPSJkcm9wKGV2ZW50KSIgb25kcmFnb3Zlcj0iYWxsb3dEcm9wKGV2ZW50KSI+PC9kaXY+PGRpdiBjbGFzcz0icm9vbXMtZ3JpZCI+PC9kaXY+PC9kaXY+YDsKICAgICAgICAgICAgY29udGFpbmVyLmluc2VydEFkamFjZW50SFRNTCgnYmVmb3JlZW5kJywgYmxvY2tIdG1sKTsKICAgICAgICAgICAgY29uc3QgYmxvY2sgPSBjb250YWluZXIucXVlcnlTZWxlY3RvcignLmV4YW0tc2VjdGlvbi1ibG9jaycpOwogICAgICAgICAgICBjb25zdCBzdG9yYWdlRGl2ID0gYmxvY2sucXVlcnlTZWxlY3RvcignLnN0b3JhZ2Utem9uZScpOwogICAgICAgICAgICBleGFtU3RhdGUuc3RvcmFnZS5mb3JFYWNoKHMgPT4gY3JlYXRlU3R1ZGVudEVsZW1lbnQocywgc3RvcmFnZURpdikpOwogICAgICAgICAgICBjb25zdCByb29tc0dyaWQgPSBibG9jay5xdWVyeVNlbGVjdG9yKCcucm9vbXMtZ3JpZCcpOwogICAgICAgICAgICBleGFtU3RhdGUucm9vbXMuZm9yRWFjaCgocm9vbVN0YXRlLCBySWR4KSA9PiB7CiAgICAgICAgICAgICAgICBjb25zdCB1bmlxdWVJZCA9IGByb29tLSR7cklkeH1gLCBzdXJ2Q29udGFpbmVySWQgPSBgc3Vydi0ke3JJZHh9YDsKICAgICAgICAgICAgICAgIGNvbnN0IHR0Q2xhc3MgPSByb29tU3RhdGUuaXNUVCA/ICJyb29tLXR0IiA6ICIiOwogICAgICAgICAgICAgICAgbGV0IHN1cnZIdG1sID0gIiI7CiAgICAgICAgICAgICAgICBpZihyb29tU3RhdGUuc3VydmVpbGxhbnRzICYmIHJvb21TdGF0ZS5zdXJ2ZWlsbGFudHMubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgICAgICAgIHJvb21TdGF0ZS5zdXJ2ZWlsbGFudHMuZm9yRWFjaCgoc3Vydk9iaiwgaWR4UykgPT4gewogICAgICAgICAgICAgICAgICAgICAgICBsZXQgc05hbWUgPSAodHlwZW9mIHN1cnZPYmogPT09ICdzdHJpbmcnKSA/IHN1cnZPYmogOiBzdXJ2T2JqLm5hbWU7CiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBzVGltZSA9ICh0eXBlb2Ygc3Vydk9iaiA9PT0gJ29iamVjdCcgJiYgc3Vydk9iai50aW1lKSA/IHN1cnZPYmoudGltZSA6ICIiOwogICAgICAgICAgICAgICAgICAgICAgICBzdXJ2SHRtbCArPSBjcmVhdGVTdXJ2ZWlsbGFudFJvdyhzTmFtZSwgc1RpbWUpOwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBzdXJ2SHRtbCA9IGNyZWF0ZVN1cnZlaWxsYW50Um93KCIiLCAiIik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBjb25zdCByb29tSHRtbCA9IGAKICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJyb29tLWNhcmQgJHt0dENsYXNzfSI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InJvb20taGVhZGVyIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuPiR7cm9vbVN0YXRlLm5hbWV9ICR7cm9vbVN0YXRlLmlzVFQ/JyhUVCknOicnfTwvc3Bhbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9ImRpc3BsYXk6ZmxleDsgYWxpZ24taXRlbXM6Y2VudGVyOyBnYXA6MTBweDsiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuPiR7cm9vbVN0YXRlLnN0dWRlbnRzLmxlbmd0aH0vJHtyb29tU3RhdGUuY2FwYWNpdHl9PC9zcGFuPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gb25jbGljaz0iY2xlYXJSb29tKCR7cklkeH0pIiBzdHlsZT0iYmFja2dyb3VuZDp3aGl0ZTsgYm9yZGVyOm5vbmU7IGNvbG9yOiNjMDM5MmI7IGN1cnNvcjpwb2ludGVyOyBwYWRkaW5nOjJweCA2cHg7IGJvcmRlci1yYWRpdXM6NHB4OyIgdGl0bGU9IlZpZGVyIGxhIHNhbGxlIj48aSBjbGFzcz0iZmEtc29saWQgZmEtdHJhc2giPjwvaT48L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0icm9vbS1zdXJ2ZWlsbGFudHMtYXJlYSIgaWQ9IiR7c3VydkNvbnRhaW5lcklkfSI+JHtzdXJ2SHRtbH08L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYnRuLWFkZC1zdXJ2IiBvbmNsaWNrPSJhZGRTdXJ2ZWlsbGFudEZpZWxkKCcke3N1cnZDb250YWluZXJJZH0nKSI+QWpvdXRlcjwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJyb29tLWJvZHkiIGlkPSIke3VuaXF1ZUlkfSIgb25kcm9wPSJkcm9wKGV2ZW50KSIgb25kcmFnb3Zlcj0iYWxsb3dEcm9wKGV2ZW50KSIgZGF0YS1jYXBhY2l0eT0iJHtyb29tU3RhdGUuY2FwYWNpdHl9IiBkYXRhLWlzLXR0PSIke3Jvb21TdGF0ZS5pc1RUfSI+PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+YDsKICAgICAgICAgICAgICAgIHJvb21zR3JpZC5pbnNlcnRBZGphY2VudEhUTUwoJ2JlZm9yZWVuZCcsIHJvb21IdG1sKTsKICAgICAgICAgICAgICAgIGNvbnN0IGJvZHlEaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh1bmlxdWVJZCk7CiAgICAgICAgICAgICAgICByb29tU3RhdGUuc3R1ZGVudHMuZm9yRWFjaChzID0+IGNyZWF0ZVN0dWRlbnRFbGVtZW50KHMsIGJvZHlEaXYpKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBjcmVhdGVTdHVkZW50RWxlbWVudChkYXRhLCBwYXJlbnQpIHsgY29uc3QgZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsgZWwuY2xhc3NOYW1lID0gJ3N0dWRlbnQtaXRlbSc7IGVsLmRhdGFzZXQuaW5mbyA9IEpTT04uc3RyaW5naWZ5KGRhdGEpOyBpZihpc1RpZXJzVGVtcHMoZ2V0VmFsdWUoZGF0YSxbJ1RpZXJzIHRlbXBzJywnVFQnXSkpKSBlbC5jbGFzc0xpc3QuYWRkKCdpcy10dCcpOyBjb25zdCBmdWxsTmFtZSA9IGdldFZhbHVlKGRhdGEsWydOb20nXSkgKyAiICIgKyBnZXRWYWx1ZShkYXRhLFsnUHLDqW5vbSddKTsgZWwuaW5uZXJIVE1MID0gYDxzcGFuPiR7ZnVsbE5hbWV9ICgke2dldFZhbHVlKGRhdGEsWydDbGFzc2UnXSl9KTwvc3Bhbj5gOyBlbC5zZXRBdHRyaWJ1dGUoJ2RhdGEtc29ydCcsIGZ1bGxOYW1lLnRvVXBwZXJDYXNlKCkpOyBlbC5kcmFnZ2FibGUgPSB0cnVlOyBlbC5pZCA9ICJzLSIrTWF0aC5yYW5kb20oKTsgZWwub25kcmFnc3RhcnQgPSBkcmFnOyBwYXJlbnQuYXBwZW5kQ2hpbGQoZWwpOyB9CiAgICAgICAgCiAgICAgICAgZnVuY3Rpb24gc3dpdGNoVGFiKGVsZW1lbnQsIHRhYklkKSB7IAogICAgICAgICAgICBpZihkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndmlldzMnKS5jbGFzc0xpc3QuY29udGFpbnMoJ2FjdGl2ZScpICYmIEFwcFN0YXRlLmRpc3RyaWJ1dGlvbkRhdGEubGVuZ3RoPjApIHsKICAgICAgICAgICAgICAgIHRyeSB7IHVwZGF0ZUN1cnJlbnRFeGFtU3RhdGUoKTsgfSBjYXRjaChlKSB7IGNvbnNvbGUud2FybigiU2F2ZSBzdGF0ZSBmYWlsZWQiLCBlKTsgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5zdGVwLWJ0bicpLmZvckVhY2goYnRuID0+IGJ0bi5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKSk7IAogICAgICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpOyAKICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnNlY3Rpb24tdmlldycpLmZvckVhY2godmlldyA9PiB2aWV3LmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpKTsgCiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRhYklkKS5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTsgCiAgICAgICAgICAgIGlmKHRhYklkPT09J3ZpZXc0JykgcG9wdWxhdGVDbGFzc0ZpbHRlcigpOyAKICAgICAgICAgICAgaWYodGFiSWQ9PT0ndmlldzUnKSBwb3B1bGF0ZVN1cnZlaWxsYW50RmlsdGVyKCk7IAogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24ganVtcFRvRXhhbShpZHgpIHsgdXBkYXRlQ3VycmVudEV4YW1TdGF0ZSgpOyBBcHBTdGF0ZS5jdXJyZW50RXhhbUluZGV4ID0gcGFyc2VJbnQoaWR4KTsgcmVuZGVyQ3VycmVudEV4YW0oKTsgfQogICAgICAgIGZ1bmN0aW9uIHByZXZFeGFtKCkgeyBpZihBcHBTdGF0ZS5jdXJyZW50RXhhbUluZGV4PjApIHsgdXBkYXRlQ3VycmVudEV4YW1TdGF0ZSgpOyBBcHBTdGF0ZS5jdXJyZW50RXhhbUluZGV4LS07IHJlbmRlckN1cnJlbnRFeGFtKCk7IH0gfQogICAgICAgIGZ1bmN0aW9uIG5leHRFeGFtKCkgeyBpZihBcHBTdGF0ZS5jdXJyZW50RXhhbUluZGV4PEFwcFN0YXRlLmRpc3RyaWJ1dGlvbkRhdGEubGVuZ3RoLTEpIHsgdXBkYXRlQ3VycmVudEV4YW1TdGF0ZSgpOyBBcHBTdGF0ZS5jdXJyZW50RXhhbUluZGV4Kys7IHJlbmRlckN1cnJlbnRFeGFtKCk7IH0gfQogICAgICAgIAogICAgICAgIGZ1bmN0aW9uIHVwZGF0ZUN1cnJlbnRFeGFtU3RhdGUoKSB7IAogICAgICAgICAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY3VycmVudC1leGFtLWNvbnRhaW5lcicpOyAKICAgICAgICAgICAgY29uc3QgYmxvY2sgPSBjb250YWluZXIucXVlcnlTZWxlY3RvcignLmV4YW0tc2VjdGlvbi1ibG9jaycpOyAKICAgICAgICAgICAgaWYoIWJsb2NrKSByZXR1cm47IAogICAgICAgICAgICBjb25zdCBleGFtU3RhdGUgPSBBcHBTdGF0ZS5kaXN0cmlidXRpb25EYXRhW0FwcFN0YXRlLmN1cnJlbnRFeGFtSW5kZXhdOyAKICAgICAgICAgICAgaWYoIWV4YW1TdGF0ZSkgcmV0dXJuOyAKICAgICAgICAgICAgY29uc3Qgc3RvcmFnZURpdiA9IGJsb2NrLnF1ZXJ5U2VsZWN0b3IoJy5zdG9yYWdlLXpvbmUnKTsgCiAgICAgICAgICAgIGV4YW1TdGF0ZS5zdG9yYWdlID0gQXJyYXkuZnJvbShzdG9yYWdlRGl2LmNoaWxkcmVuKS5tYXAoY2hpbGQgPT4gSlNPTi5wYXJzZShjaGlsZC5kYXRhc2V0LmluZm8pKTsgCiAgICAgICAgICAgIGNvbnN0IHJvb21DYXJkcyA9IGJsb2NrLnF1ZXJ5U2VsZWN0b3JBbGwoJy5yb29tLWNhcmQnKTsgCiAgICAgICAgICAgIGV4YW1TdGF0ZS5yb29tcyA9IFtdOyAKICAgICAgICAgICAgcm9vbUNhcmRzLmZvckVhY2goY2FyZCA9PiB7IAogICAgICAgICAgICAgICAgY29uc3QgYm9keSA9IGNhcmQucXVlcnlTZWxlY3RvcignLnJvb20tYm9keScpOyAKICAgICAgICAgICAgICAgIGNvbnN0IGNhcCA9IGJvZHkuZ2V0QXR0cmlidXRlKCdkYXRhLWNhcGFjaXR5Jyk7IAogICAgICAgICAgICAgICAgY29uc3QgaXNUVCA9IGJvZHkuZ2V0QXR0cmlidXRlKCdkYXRhLWlzLXR0JykgPT09ICd0cnVlJzsgCiAgICAgICAgICAgICAgICBjb25zdCByb29tTmFtZSA9IGNhcmQucXVlcnlTZWxlY3RvcignLnJvb20taGVhZGVyIHNwYW4nKS50ZXh0Q29udGVudC5yZXBsYWNlKCcoVFQpJywnJykudHJpbSgpOyAKICAgICAgICAgICAgICAgIGNvbnN0IHN1cnZSb3dzID0gQXJyYXkuZnJvbShjYXJkLnF1ZXJ5U2VsZWN0b3JBbGwoJy5zdXJ2ZWlsbGFudC1yb3cnKSk7CiAgICAgICAgICAgICAgICBjb25zdCBzdXJ2RGF0YSA9IHN1cnZSb3dzLm1hcChyb3cgPT4gewogICAgICAgICAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IHJvdy5xdWVyeVNlbGVjdG9yKCdzZWxlY3QnKS52YWx1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgdGltZTogcm93LnF1ZXJ5U2VsZWN0b3IoJ2lucHV0LnRpbWUtaW5wdXQnKS52YWx1ZQogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIGNvbnN0IHN0dWRlbnRzID0gQXJyYXkuZnJvbShib2R5LmNoaWxkcmVuKS5tYXAocyA9PiBKU09OLnBhcnNlKHMuZGF0YXNldC5pbmZvKSk7IAogICAgICAgICAgICAgICAgZXhhbVN0YXRlLnJvb21zLnB1c2goeyBuYW1lOiByb29tTmFtZSwgY2FwYWNpdHk6IGNhcCwgaXNUVDogaXNUVCwgc3VydmVpbGxhbnRzOiBzdXJ2RGF0YSwgc3R1ZGVudHM6IHN0dWRlbnRzIH0pOyAKICAgICAgICAgICAgfSk7IAogICAgICAgIH0KICAgICAgICAKICAgICAgICBmdW5jdGlvbiBkcmFnKGV2KSB7IGV2LmRhdGFUcmFuc2Zlci5zZXREYXRhKCJ0ZXh0IiwgZXYudGFyZ2V0LmlkKTsgfQogICAgICAgIAogICAgICAgIC8vIC0tLSBHRVNUSU9OIERVIERFRklMRU1FTlQgQVVUTyAoT1BUSU1JU8OJRSBWSVRFU1NFKSAtLS0KICAgICAgICBsZXQgc2Nyb2xsSW50ZXJ2YWw7CiAgICAgICAgY29uc3QgbWFpbkNvbnRlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubWFpbi1jb250ZW50Jyk7CiAgICAgICAgY29uc3Qgc2Nyb2xsVGhyZXNob2xkID0gMTAwOwoKICAgICAgICBmdW5jdGlvbiBzdG9wQXV0b1Njcm9sbCgpIHsKICAgICAgICAgICAgY2xlYXJJbnRlcnZhbChzY3JvbGxJbnRlcnZhbCk7CiAgICAgICAgICAgIHNjcm9sbEludGVydmFsID0gbnVsbDsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGhhbmRsZUF1dG9TY3JvbGwoZSkgewogICAgICAgICAgICBjb25zdCByZWN0ID0gbWFpbkNvbnRlbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7CiAgICAgICAgICAgIGNvbnN0IG1vdXNlWSA9IGUuY2xpZW50WTsKICAgICAgICAgICAgY29uc3QgZGlzdFRvcCA9IG1vdXNlWSAtIHJlY3QudG9wOwogICAgICAgICAgICBjb25zdCBkaXN0Qm90dG9tID0gcmVjdC5ib3R0b20gLSBtb3VzZVk7CgogICAgICAgICAgICBzdG9wQXV0b1Njcm9sbCgpOwoKICAgICAgICAgICAgLy8gU2kgc3Vydm9sIGQndW5lIHpvbmUgc2Nyb2xsYWJsZSAocm9vbXMtZ3JpZCkgb3Ugc3RvcmFnZQogICAgICAgICAgICBpZiAoZS50YXJnZXQuY2xvc2VzdCgnLnJvb21zLWdyaWQnKSB8fCBlLnRhcmdldC5jbG9zZXN0KCcuc3RvcmFnZS16b25lJykpIHsKICAgICAgICAgICAgICAgIGlmIChkaXN0VG9wIDwgc2Nyb2xsVGhyZXNob2xkIHx8IGRpc3RCb3R0b20gPCBzY3JvbGxUaHJlc2hvbGQpIHsKICAgICAgICAgICAgICAgICAgICBzY3JvbGxJbnRlcnZhbCA9IHNldEludGVydmFsKCgpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHNwZWVkID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRpc3RUb3AgPCBzY3JvbGxUaHJlc2hvbGQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFBsdXMgcHJvY2hlIGR1IGhhdXQgPSBQbHVzIHJhcGlkZSAodml0ZXNzZSBleHBvbmVudGllbGxlKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3BlZWQgPSAtTWF0aC5wb3coKHNjcm9sbFRocmVzaG9sZCAtIGRpc3RUb3ApIC8gMTAsIDIpIC0gNTsKICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChkaXN0Qm90dG9tIDwgc2Nyb2xsVGhyZXNob2xkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBQbHVzIHByb2NoZSBkdSBiYXMgPSBQbHVzIHJhcGlkZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3BlZWQgPSBNYXRoLnBvdygoc2Nyb2xsVGhyZXNob2xkIC0gZGlzdEJvdHRvbSkgLyAxMCwgMikgKyA1OwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIG1haW5Db250ZW50LnNjcm9sbFRvcCArPSBzcGVlZDsKICAgICAgICAgICAgICAgICAgICB9LCAxNik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGRyb3AoZXYpIHsgCiAgICAgICAgICAgIGV2LnByZXZlbnREZWZhdWx0KCk7IAogICAgICAgICAgICBzdG9wQXV0b1Njcm9sbCgpOwogICAgICAgICAgICB2YXIgZGF0YSA9IGV2LmRhdGFUcmFuc2Zlci5nZXREYXRhKCJ0ZXh0Iik7IAogICAgICAgICAgICB2YXIgZHJhZ2dlZEVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZGF0YSk7IAogICAgICAgICAgICBsZXQgdGFyZ2V0ID0gZXYudGFyZ2V0OyAKICAgICAgICAgICAgd2hpbGUodGFyZ2V0ICYmICF0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdyb29tLWJvZHknKSAmJiAhdGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnc3RvcmFnZS16b25lJykpIHRhcmdldCA9IHRhcmdldC5wYXJlbnRFbGVtZW50OyAKICAgICAgICAgICAgaWYodGFyZ2V0KSB7IAogICAgICAgICAgICAgICAgaWYodGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygncm9vbS1ib2R5JykpIHsgCiAgICAgICAgICAgICAgICAgICAgY29uc3QgY2FwID0gcGFyc2VJbnQodGFyZ2V0LmdldEF0dHJpYnV0ZSgnZGF0YS1jYXBhY2l0eScpKTsgCiAgICAgICAgICAgICAgICAgICAgaWYodGFyZ2V0LmNoaWxkcmVuLmxlbmd0aCA+PSBjYXApIHsgYWxlcnQoIlBsZWluICEiKTsgcmV0dXJuOyB9IAogICAgICAgICAgICAgICAgfSAKICAgICAgICAgICAgICAgIHRhcmdldC5hcHBlbmRDaGlsZChkcmFnZ2VkRWwpOyAKICAgICAgICAgICAgICAgIHNvcnRDb250YWluZXIodGFyZ2V0KTsKICAgICAgICAgICAgICAgIHVwZGF0ZUN1cnJlbnRFeGFtU3RhdGUoKTsKICAgICAgICAgICAgICAgIHVwZGF0ZVJlYWxUaW1lQ291bnRlcnMoKTsKICAgICAgICAgICAgfSAKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGFsbG93RHJvcChldikgeyAKICAgICAgICAgICAgZXYucHJldmVudERlZmF1bHQoKTsKICAgICAgICAgICAgZXYuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7IC8vIFByw6l2ZW50aW9uIGRlcyBjb25mbGl0cyBkZSBzw6lsZWN0aW9uCiAgICAgICAgICAgIGhhbmRsZUF1dG9TY3JvbGwoZXYpOwogICAgICAgIH0KCiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignZHJhZ2VuZCcsIHN0b3BBdXRvU2Nyb2xsKTsKICAgICAgICAKICAgICAgICBmdW5jdGlvbiBzb3J0Q29udGFpbmVyKGNvbnRhaW5lcikgeyAKICAgICAgICAgICAgY29uc3QgaXRlbXMgPSBBcnJheS5mcm9tKGNvbnRhaW5lci5jaGlsZHJlbik7IAogICAgICAgICAgICBpdGVtcy5zb3J0KChhLCBiKSA9PiB7IAogICAgICAgICAgICAgICAgY29uc3QgbmFtZUEgPSBhLmdldEF0dHJpYnV0ZSgnZGF0YS1zb3J0JykgfHwgIiI7IAogICAgICAgICAgICAgICAgY29uc3QgbmFtZUIgPSBiLmdldEF0dHJpYnV0ZSgnZGF0YS1zb3J0JykgfHwgIiI7IAogICAgICAgICAgICAgICAgcmV0dXJuIG5hbWVBLmxvY2FsZUNvbXBhcmUobmFtZUIpOyAKICAgICAgICAgICAgfSk7IAogICAgICAgICAgICBpdGVtcy5mb3JFYWNoKGl0ZW0gPT4gY29udGFpbmVyLmFwcGVuZENoaWxkKGl0ZW0pKTsgCiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBjbGVhclJvb20ocklkeCkgewogICAgICAgICAgICBpZighY29uZmlybSgiVm91bGV6LXZvdXMgdnJhaW1lbnQgdmlkZXIgdG91dGUgY2V0dGUgc2FsbGUgPyIpKSByZXR1cm47CiAgICAgICAgICAgIHVwZGF0ZUN1cnJlbnRFeGFtU3RhdGUoKTsKICAgICAgICAgICAgY29uc3QgZXhhbURhdGEgPSBBcHBTdGF0ZS5kaXN0cmlidXRpb25EYXRhW0FwcFN0YXRlLmN1cnJlbnRFeGFtSW5kZXhdOwogICAgICAgICAgICBjb25zdCByb29tID0gZXhhbURhdGEucm9vbXNbcklkeF07CiAgICAgICAgICAgIGlmKHJvb20uc3R1ZGVudHMubGVuZ3RoID09PSAwKSByZXR1cm47CiAgICAgICAgICAgIGV4YW1EYXRhLnN0b3JhZ2UucHVzaCguLi5yb29tLnN0dWRlbnRzKTsKICAgICAgICAgICAgcm9vbS5zdHVkZW50cyA9IFtdOwogICAgICAgICAgICBleGFtRGF0YS5zdG9yYWdlLnNvcnQoKGEsYikgPT4gKGdldFZhbHVlKGEsWydOb20nXSl8fCcnKS5sb2NhbGVDb21wYXJlKGdldFZhbHVlKGIsWydOb20nXSl8fCcnKSk7CiAgICAgICAgICAgIHJlbmRlckN1cnJlbnRFeGFtKCk7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBnZXRTdXJ2ZWlsbGFudE9wdGlvbnMoc2VsZWN0ZWQ9IiIpIHsgaWYoIUFwcFN0YXRlLnN1cnZlaWxsYW50cykgcmV0dXJuICIiOyBsZXQgb3B0cyA9ICc8b3B0aW9uIHZhbHVlPSIiPi0tIFN1cnYgLS08L29wdGlvbj4nOyBBcHBTdGF0ZS5zdXJ2ZWlsbGFudHMuZm9yRWFjaChzID0+IHsgY29uc3QgdmFsID0gZ2V0VmFsdWUocyxbJ05vbSddKSArICcgJyArIGdldFZhbHVlKHMsWydQcsOpbm9tJ10pOyBvcHRzICs9IGA8b3B0aW9uIHZhbHVlPSIke3ZhbH0iICR7KHZhbD09PXNlbGVjdGVkKT8nc2VsZWN0ZWQnOicnfT4ke3ZhbH08L29wdGlvbj5gOyB9KTsgcmV0dXJuIG9wdHM7IH0KICAgICAgICAKICAgICAgICBmdW5jdGlvbiBjcmVhdGVTdXJ2ZWlsbGFudFJvdyhzZWxlY3RlZE5hbWUsIHRpbWVWYWwpIHsKICAgICAgICAgICAgcmV0dXJuIGA8ZGl2IGNsYXNzPSJzdXJ2ZWlsbGFudC1yb3ciPgogICAgICAgICAgICAgICAgICAgICAgICA8c2VsZWN0IG9uY2hhbmdlPSJ1cGRhdGVDdXJyZW50RXhhbVN0YXRlKCkiPiR7Z2V0U3VydmVpbGxhbnRPcHRpb25zKHNlbGVjdGVkTmFtZSl9PC9zZWxlY3Q+CiAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiBjbGFzcz0idGltZS1pbnB1dCIgcGxhY2Vob2xkZXI9IkhvcmFpcmUgKGV4OiAxMGgwMCDDoCAxMWgwMCkiIHZhbHVlPSIke3RpbWVWYWwgfHwgJyd9IiBvbmNoYW5nZT0idXBkYXRlQ3VycmVudEV4YW1TdGF0ZSgpIj4KICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYnRuLWRlbC1zdXJ2IiBvbmNsaWNrPSJ0aGlzLnBhcmVudEVsZW1lbnQucmVtb3ZlKCk7IHVwZGF0ZUN1cnJlbnRFeGFtU3RhdGUoKTsiPjxpIGNsYXNzPSJmYS1zb2xpZCBmYS14bWFyayI+PC9pPjwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgIDwvZGl2PmA7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBhZGRTdXJ2ZWlsbGFudEZpZWxkKGlkKSB7IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKS5pbnNlcnRBZGphY2VudEhUTUwoJ2JlZm9yZWVuZCcsIGNyZWF0ZVN1cnZlaWxsYW50Um93KCIiLCAiIikpOyB9CiAgICAgICAgCiAgICAgICAgZnVuY3Rpb24gaGFuZGxlSW1hZ2UoaW5wdXQsIHByZXZpZXdJZCkgeyBjb25zdCBmaWxlID0gaW5wdXQuZmlsZXNbMF07IGlmICghZmlsZSkgcmV0dXJuOyBjb25zdCByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpOyByZWFkZXIub25sb2FkID0gZnVuY3Rpb24oZSkgeyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChwcmV2aWV3SWQpLnNyYyA9IGUudGFyZ2V0LnJlc3VsdDsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQocHJldmlld0lkKS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJzsgaWYocHJldmlld0lkID09PSAnbG9nb1ByZXZpZXcnKSBBcHBTdGF0ZS5jb25maWcubG9nb1NyYyA9IGUudGFyZ2V0LnJlc3VsdDsgaWYocHJldmlld0lkID09PSAnc2lnblByZXZpZXcnKSBBcHBTdGF0ZS5jb25maWcuc2lnblNyYyA9IGUudGFyZ2V0LnJlc3VsdDsgfTsgcmVhZGVyLnJlYWRBc0RhdGFVUkwoZmlsZSk7IH0KICAgICAgICBmdW5jdGlvbiBwb3B1bGF0ZUNsYXNzRmlsdGVyKCl7IGNvbnN0IHM9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbnZvYy1jbGFzcy1maWx0ZXInKTsgcy5pbm5lckhUTUw9JzxvcHRpb24gdmFsdWU9IkFMTCI+VG91dGVzPC9vcHRpb24+JzsgY29uc3QgY2w9bmV3IFNldCgpOyBBcHBTdGF0ZS5lbGV2ZXMuZm9yRWFjaChlPT57Y29uc3QgYz1nZXRWYWx1ZShlLFsnQ2xhc3NlJywnRGl2J10pOyBpZihjKSBjbC5hZGQoYyl9KTsgQXJyYXkuZnJvbShjbCkuc29ydCgpLmZvckVhY2goYz0+cy5hZGQobmV3IE9wdGlvbihjLGMpKSk7IHBvcHVsYXRlU2VsZWN0RnJvbVNldCgncHYtY2xhc3MtZmlsdGVyJywgY2wpOyB9CiAgICAgICAgZnVuY3Rpb24gcG9wdWxhdGVTZWxlY3RGcm9tU2V0KGlkLCBzZXQpIHsgY29uc3Qgcz1kb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCk7IGlmKCFzKSByZXR1cm47IHMuaW5uZXJIVE1MPSc8b3B0aW9uIHZhbHVlPSJBTEwiPlRvdXRlczwvb3B0aW9uPic7IEFycmF5LmZyb20oc2V0KS5zb3J0KCkuZm9yRWFjaChjPT5zLmFkZChuZXcgT3B0aW9uKGMsYykpKTsgfQogICAgICAgIGZ1bmN0aW9uIHBvcHVsYXRlU3VydmVpbGxhbnRGaWx0ZXIoKXsgY29uc3Qgcz1kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29udm9jLXN1cnYtZmlsdGVyJyk7IHMuaW5uZXJIVE1MPSc8b3B0aW9uIHZhbHVlPSJBTEwiPlRvdXM8L29wdGlvbj4nOyBpZighQXBwU3RhdGUuc3VydmVpbGxhbnRzKSByZXR1cm47IEFwcFN0YXRlLnN1cnZlaWxsYW50cy5mb3JFYWNoKHN1PT57Y29uc3Qgbj1nZXRWYWx1ZShzdSxbJ05vbSddKSsnICcrZ2V0VmFsdWUoc3UsWydQcsOpbm9tJ10pOyBzLmFkZChuZXcgT3B0aW9uKG4sbikpfSk7IH0KICAgICAgICBmdW5jdGlvbiBzYXZlUG9jaGV0dGVUZXh0KHR5cGUsIHZhbCkgeyBpZighQXBwU3RhdGUucG9jaGV0dGVUZXh0KSBBcHBTdGF0ZS5wb2NoZXR0ZVRleHQgPSB7fTsgQXBwU3RhdGUucG9jaGV0dGVUZXh0W3R5cGVdID0gdmFsOyB9CiAgICAgICAgZnVuY3Rpb24gcG9wdWxhdGVQVkV4YW1TZWxlY3QoKSB7IGNvbnN0IHMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHYtZXhhbS1zZWxlY3QnKTsgcy5pbm5lckhUTUwgPSAnPG9wdGlvbiB2YWx1ZT0iQUxMIj5UT1VUIElNUFJJTUVSPC9vcHRpb24+JzsgQXBwU3RhdGUuZGlzdHJpYnV0aW9uRGF0YS5mb3JFYWNoKChkLCBpKSA9PiB7IGlmKCFkKSByZXR1cm47IGNvbnN0IGV4YW0gPSBBcHBTdGF0ZS5lcHJldXZlc1tkLmV4YW1JZHhdOyBzLmFkZChuZXcgT3B0aW9uKGdldFZhbHVlKGV4YW0sIFsnTWF0acOocmUnLCAnRXByZXV2ZSddKSwgaSkpOyB9KTsgcy5vbmNoYW5nZSgpOyB9CiAgICAgICAgCiAgICAgICAgZnVuY3Rpb24gdXBkYXRlUFZSb29tU2VsZWN0KCkgeyAKICAgICAgICAgICAgY29uc3QgZXhhbUlkeCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwdi1leGFtLXNlbGVjdCcpLnZhbHVlOyAKICAgICAgICAgICAgY29uc3QgcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwdi1yb29tLXNlbGVjdCcpOyAKICAgICAgICAgICAgcy5pbm5lckhUTUwgPSAnPG9wdGlvbiB2YWx1ZT0iQUxMIj5UT1VURVMgTEVTIFNBTExFUyBVVElMSVPDiUVTPC9vcHRpb24+JzsgCiAgICAgICAgICAgIGlmKGV4YW1JZHggPT09ICJBTEwiKSB7IAogICAgICAgICAgICAgICAgcy5kaXNhYmxlZCA9IHRydWU7IHJldHVybjsgCiAgICAgICAgICAgIH0gZWxzZSB7IAogICAgICAgICAgICAgICAgcy5kaXNhYmxlZCA9IGZhbHNlOyAKICAgICAgICAgICAgfSAKICAgICAgICAgICAgY29uc3QgZGlzdCA9IEFwcFN0YXRlLmRpc3RyaWJ1dGlvbkRhdGFbZXhhbUlkeF07IAogICAgICAgICAgICBpZihkaXN0KSB7CiAgICAgICAgICAgICAgICBkaXN0LnJvb21zLmZvckVhY2goKHIsIGkpID0+IHsgCiAgICAgICAgICAgICAgICAgICAgaWYoci5zdHVkZW50cy5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHMuYWRkKG5ldyBPcHRpb24oci5uYW1lLCBpKSk7IAogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOyAKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICAKICAgICAgICBmdW5jdGlvbiBwb3B1bGF0ZUVtYXJnZW1lbnRGaWx0ZXJzKCkgeyAKICAgICAgICAgICAgY29uc3QgcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlbWFyZ2VtZW50LXJvb20tZmlsdGVyJyk7IAogICAgICAgICAgICBzLmlubmVySFRNTCA9ICc8b3B0aW9uIHZhbHVlPSJBTEwiPlRvdXRlcyBsZXMgc2FsbGVzIHV0aWxpc8OpZXM8L29wdGlvbj4nOyAKICAgICAgICAgICAgbGV0IHVzZWRSb29tcyA9IG5ldyBTZXQoKTsgCiAgICAgICAgICAgIEFwcFN0YXRlLmRpc3RyaWJ1dGlvbkRhdGEuZm9yRWFjaChkID0+IHsKICAgICAgICAgICAgICAgIGlmKGQgJiYgZC5yb29tcykgewogICAgICAgICAgICAgICAgICAgIGQucm9vbXMuZm9yRWFjaChyID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoci5zdHVkZW50cy5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2VkUm9vbXMuYWRkKHIubmFtZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIEFycmF5LmZyb20odXNlZFJvb21zKS5zb3J0KCkuZm9yRWFjaChyID0+IHMuYWRkKG5ldyBPcHRpb24ociwgcikpKTsgCiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBwcmludEVtYXJnZW1lbnQoKSB7IGdlbmVyYXRlTGlzdERvYygnZW1hcmdlbWVudCcpOyB9CiAgICAgICAgZnVuY3Rpb24gcHJpbnREaXNwbGF5TGlzdCgpIHsgZ2VuZXJhdGVMaXN0RG9jKCdkaXNwbGF5Jyk7IH0KICAgICAgICAKICAgICAgICBmdW5jdGlvbiBnZW5lcmF0ZUxpc3REb2ModHlwZSkgewogICAgICAgICAgICBpZighQXBwU3RhdGUuZGlzdHJpYnV0aW9uRGF0YS5sZW5ndGgpIHJldHVybiBhbGVydCgiUsOpcGFydGl0aW9uIG1hbnF1YW50ZSIpOwogICAgICAgICAgICBjb25zdCByb29tRmlsdGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VtYXJnZW1lbnQtcm9vbS1maWx0ZXInKS52YWx1ZTsKICAgICAgICAgICAgY29uc3QgbG9nbyA9IEFwcFN0YXRlLmNvbmZpZy5sb2dvU3JjIHx8ICIiOwogICAgICAgICAgICBjb25zdCB0aXRsZSA9IHR5cGUgPT09ICdlbWFyZ2VtZW50JyA/ICJMSVNURSBEJ8OJTUFSR0VNRU5UIiA6ICJMSVNURSBEJ0FGRklDSEFHRSAtIENBTkRJREFUUyI7CiAgICAgICAgICAgIGxldCBmdWxsSHRtbCA9ICIiOwogICAgICAgICAgICBBcHBTdGF0ZS5kaXN0cmlidXRpb25EYXRhLmZvckVhY2goZXhhbURhdGEgPT4gewogICAgICAgICAgICAgICAgaWYoIWV4YW1EYXRhKSByZXR1cm47CiAgICAgICAgICAgICAgICBjb25zdCBleGFtSW5mbyA9IEFwcFN0YXRlLmVwcmV1dmVzW2V4YW1EYXRhLmV4YW1JZHhdOwogICAgICAgICAgICAgICAgY29uc3QgZGF0ZVN0ciA9IGZvcm1hdERhdGUoZ2V0VmFsdWUoZXhhbUluZm8sWydEYXRlJ10pKTsKICAgICAgICAgICAgICAgIGV4YW1EYXRhLnJvb21zLmZvckVhY2gocm9vbURhdGEgPT4gewogICAgICAgICAgICAgICAgICAgIGlmKHJvb21GaWx0ZXIgIT09ICJBTEwiICYmIHJvb21EYXRhLm5hbWUgIT09IHJvb21GaWx0ZXIpIHJldHVybjsKICAgICAgICAgICAgICAgICAgICBpZihyb29tRGF0YS5zdHVkZW50cy5sZW5ndGggPT09IDApIHJldHVybjsKICAgICAgICAgICAgICAgICAgICBjb25zdCBzdHVkZW50cyA9IFsuLi5yb29tRGF0YS5zdHVkZW50c107CiAgICAgICAgICAgICAgICAgICAgc3R1ZGVudHMuc29ydCgoYSxiKSA9PiBnZXRWYWx1ZShhLFsnTm9tJ10pLmxvY2FsZUNvbXBhcmUoZ2V0VmFsdWUoYixbJ05vbSddKSkpOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IGlzVFQgPSByb29tRGF0YS5pc1RUOwogICAgICAgICAgICAgICAgICAgIGxldCB0aW1lID0gaXNUVCA/IGdldFZhbHVlKGV4YW1JbmZvLCBbJ0hldXJlIGRlIGTDqWJ1dCB0aWVycyB0ZW1wcycsICdIZXVyZSBUVCddKSA6IGdldFZhbHVlKGV4YW1JbmZvLCBbJ0hldXJlIGRlIGTDqWJ1dCcsICdIZXVyZSddKTsKICAgICAgICAgICAgICAgICAgICBpZighdGltZSkgdGltZSA9IGdldFZhbHVlKGV4YW1JbmZvLCBbJ0hldXJlIGRlIGTDqWJ1dCcsICdIZXVyZSddKTsKICAgICAgICAgICAgICAgICAgICBsZXQgc3Vydk5hbWVzID0gW107CiAgICAgICAgICAgICAgICAgICAgaWYocm9vbURhdGEuc3VydmVpbGxhbnRzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJvb21EYXRhLnN1cnZlaWxsYW50cy5mb3JFYWNoKHMgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG4gPSAodHlwZW9mIHMgPT09ICdvYmplY3QnKSA/IHMubmFtZSA6IHM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihuKSBzdXJ2TmFtZXMucHVzaChuKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGxldCByb3dzID0gIiI7CiAgICAgICAgICAgICAgICAgICAgc3R1ZGVudHMuZm9yRWFjaChzID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgcm93cyArPSBgPHRyIGNsYXNzPSIke3R5cGV9LXJvdyI+PHRkPiR7Z2V0VmFsdWUocyxbJ05vbSddKX08L3RkPjx0ZD4ke2dldFZhbHVlKHMsWydQcsOpbm9tJ10pfTwvdGQ+PHRkPiR7Z2V0VmFsdWUocyxbJ0NsYXNzZSddKX08L3RkPiR7dHlwZT09PSdlbWFyZ2VtZW50JyA/ICc8dGQ+PC90ZD4nIDogJyd9PC90cj5gOwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIGZ1bGxIdG1sICs9IGA8ZGl2IGNsYXNzPSJwcmludC1wYWdlLWxpc3QiIHN0eWxlPSJwYWdlLWJyZWFrLWFmdGVyOiBhbHdheXM7Ij48ZGl2IGNsYXNzPSJwcmludC1oZWFkZXIiPjxkaXYgc3R5bGU9ImZvbnQtd2VpZ2h0OmJvbGQ7IGZvbnQtc2l6ZToxLjJyZW07Ij4ke0FwcFN0YXRlLmNvbmZpZy5leGFtVGl0bGUgfHwgIkVYQU1FTiJ9PC9kaXY+JHtsb2dvID8gYDxpbWcgc3JjPSIke2xvZ299IiBjbGFzcz0icHJpbnQtbG9nbyI+YCA6ICcnfTwvZGl2PjxkaXYgY2xhc3M9InByaW50LWRvYy10aXRsZSI+JHt0aXRsZX08L2Rpdj48ZGl2IGNsYXNzPSJwcmludC1pbmZvcy1ib3giPjxzdHJvbmc+w4lwcmV1dmUgOjwvc3Ryb25nPiAke2dldFZhbHVlKGV4YW1JbmZvLFsnTWF0acOocmUnLCdFcHJldXZlJ10pfTxicj48c3Ryb25nPkRhdGUgOjwvc3Ryb25nPiAke2RhdGVTdHJ9IC0gPHN0cm9uZz5IZXVyZSA6PC9zdHJvbmc+ICR7dGltZX08YnI+PHN0cm9uZz5TYWxsZSA6PC9zdHJvbmc+ICR7cm9vbURhdGEubmFtZX08YnI+PHN0cm9uZz5TdXJ2ZWlsbGFudHMgOjwvc3Ryb25nPiAke3N1cnZOYW1lcy5qb2luKCcsICcpfTwvZGl2Pjx0YWJsZSBjbGFzcz0icHJpbnQtdGFibGUgJHt0eXBlPT09J2Rpc3BsYXknPydkaXNwbGF5LWxpc3Qtcm93JzonJ30iPjx0aGVhZD48dHI+PHRoPk5vbTwvdGg+PHRoPlByw6lub208L3RoPjx0aD5DbGFzc2U8L3RoPiR7dHlwZT09PSdlbWFyZ2VtZW50Jz8nPHRoIHN0eWxlPSJ3aWR0aDoxNTBweDsiPlNpZ25hdHVyZTwvdGg+JzonJ308L3RyPjwvdGhlYWQ+PHRib2R5PiR7cm93c308L3Rib2R5PjwvdGFibGU+PC9kaXY+YDsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgaWYoZnVsbEh0bWwgPT09ICIiKSByZXR1cm4gYWxlcnQoIkF1Y3VuIMOpbMOodmUgdHJvdXbDqSBwb3VyIGNlIGZpbHRyZSAob3Ugc2FsbGVzIHZpZGVzKS4iKTsKICAgICAgICAgICAgY29uc3QgcGEgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJpbnQtYXJlYScpOyBwYS5pbm5lckhUTUwgPSBmdWxsSHRtbDsgd2luZG93LnByaW50KCk7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBwcmludENvbnZvY2F0aW9ucygpIHsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIGlmKCFBcHBTdGF0ZS5kaXN0cmlidXRpb25EYXRhIHx8IEFwcFN0YXRlLmRpc3RyaWJ1dGlvbkRhdGEubGVuZ3RoID09PSAwKSB7IGFsZXJ0KCJWZXVpbGxleiBjYWxjdWxlciBsYSByw6lwYXJ0aXRpb24gKE1lbnUgMykuIik7IHJldHVybjsgfQogICAgICAgICAgICAgICAgY29uc3QgcHJpbnRBcmVhID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ByaW50LWFyZWEnKTsgcHJpbnRBcmVhLmlubmVySFRNTCA9ICIiOwogICAgICAgICAgICAgICAgY29uc3QgZmlsdGVyQ2xhc3MgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29udm9jLWNsYXNzLWZpbHRlcicpLnZhbHVlOwogICAgICAgICAgICAgICAgY29uc3QgbG9nb1NyYyA9IEFwcFN0YXRlLmNvbmZpZy5sb2dvU3JjIHx8ICIiOwogICAgICAgICAgICAgICAgY29uc3Qgc2lnblNyYyA9IEFwcFN0YXRlLmNvbmZpZy5zaWduU3JjIHx8ICIiOwogICAgICAgICAgICAgICAgY29uc3QgdHh0QWRkcmVzcyA9IChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndHh0LWFkZHJlc3MnKS52YWx1ZSB8fCAiIikucmVwbGFjZSgvXG4vZywgJzxicj4nKTsKICAgICAgICAgICAgICAgIGNvbnN0IHR4dFRpdGxlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3R4dC10aXRsZS1kaXNwbGF5JykuaW5uZXJUZXh0OwogICAgICAgICAgICAgICAgY29uc3QgdHh0Qm9keSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0eHQtYm9keScpLmlubmVySFRNTDsKICAgICAgICAgICAgICAgIGNvbnN0IHR4dFJ1bGVzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3R4dC1ydWxlcycpLmlubmVySFRNTDsKICAgICAgICAgICAgICAgIGNvbnN0IHR4dENpdHkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndHh0LWNpdHknKS5pbm5lclRleHQ7CiAgICAgICAgICAgICAgICBjb25zdCB0b3BNYXJnaW4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2V0cy1zdGQtdG9wJykudmFsdWU7CiAgICAgICAgICAgICAgICBjb25zdCBib3RNYXJnaW4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2V0cy1zdGQtYm90JykudmFsdWU7CiAgICAgICAgICAgICAgICBjb25zdCBmb250U2l6ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZXRzLXN0ZC1mb250JykudmFsdWU7CiAgICAgICAgICAgICAgICBsZXQgY291bnQgPSAwOwogICAgICAgICAgICAgICAgQXBwU3RhdGUuZWxldmVzLmZvckVhY2goc3R1ZGVudCA9PiB7CiAgICAgICAgICAgICAgICAgICAgbGV0IHNDbGFzcyA9IGdldFZhbHVlKHN0dWRlbnQsIFsnQ2xhc3NlJywgJ0RpdiddKTsgc0NsYXNzID0gc0NsYXNzID8gc0NsYXNzLnRvU3RyaW5nKCkudHJpbSgpIDogIk4vQSI7CiAgICAgICAgICAgICAgICAgICAgaWYoZmlsdGVyQ2xhc3MgIT09ICJBTEwiICYmIHNDbGFzcyAhPT0gZmlsdGVyQ2xhc3MpIHJldHVybjsKICAgICAgICAgICAgICAgICAgICBjb25zdCBub20gPSBub3JtYWxpemUoZ2V0VmFsdWUoc3R1ZGVudCwgWydOb20nXSkpOyAKICAgICAgICAgICAgICAgICAgICBjb25zdCBwcmVub20gPSBub3JtYWxpemUoZ2V0VmFsdWUoc3R1ZGVudCwgWydQcsOpbm9tJ10pKTsKICAgICAgICAgICAgICAgICAgICBsZXQgc3R1ZGVudEV4YW1zTGlzdCA9IFtdOwogICAgICAgICAgICAgICAgICAgIEFwcFN0YXRlLmRpc3RyaWJ1dGlvbkRhdGEuZm9yRWFjaCgoZXhhbURhdGEpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoIWV4YW1EYXRhKSByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBzdHVkZW50Um9vbSA9IG51bGw7CiAgICAgICAgICAgICAgICAgICAgICAgIGV4YW1EYXRhLnJvb21zLmZvckVhY2gociA9PiB7IAogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoci5zdHVkZW50cy5maW5kKHMgPT4gbm9ybWFsaXplKGdldFZhbHVlKHMsWydOb20nXSkpID09PSBub20gJiYgbm9ybWFsaXplKGdldFZhbHVlKHMsWydQcsOpbm9tJ10pKSA9PT0gcHJlbm9tKSkgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R1ZGVudFJvb20gPSByOyAKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHN0dWRlbnRSb29tKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBleGFtUmF3ID0gQXBwU3RhdGUuZXByZXV2ZXNbZXhhbURhdGEuZXhhbUlkeF07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHVkZW50RXhhbXNMaXN0LnB1c2goeyBleGFtOiBleGFtUmF3LCByb29tOiBzdHVkZW50Um9vbSB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIHN0dWRlbnRFeGFtc0xpc3Quc29ydCgoYSwgYikgPT4gewogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0aW1lQSA9IGdldERhdGVUaW1lVmFsdWUoYS5leGFtLCBhLnJvb20uaXNUVCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRpbWVCID0gZ2V0RGF0ZVRpbWVWYWx1ZShiLmV4YW0sIGIucm9vbS5pc1RUKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRpbWVBIC0gdGltZUI7CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgaWYoc3R1ZGVudEV4YW1zTGlzdC5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvdW50Kys7CiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBleGFtc1Jvd3MgPSAiIjsKICAgICAgICAgICAgICAgICAgICAgICAgc3R1ZGVudEV4YW1zTGlzdC5mb3JFYWNoKGl0ZW0gPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZXhhbVJhdyA9IGl0ZW0uZXhhbTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHN0dWRlbnRSb29tID0gaXRlbS5yb29tOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaXNUVCA9IHN0dWRlbnRSb29tLmlzVFQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBleGFtTmFtZSA9IGdldFZhbHVlKGV4YW1SYXcsIFsnTWF0acOocmUnLCAnRXByZXV2ZSddKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGRhdGVTdHIgPSBmb3JtYXREYXRlKGdldFZhbHVlKGV4YW1SYXcsIFsnRGF0ZSddKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgdGltZSA9IGlzVFQgPyBnZXRWYWx1ZShleGFtUmF3LCBbJ0hldXJlIGRlIGTDqWJ1dCB0aWVycyB0ZW1wcycsICdIZXVyZSBUVCcsICdIZXVyZSBkw6lidXQgVFQnXSkgOiBnZXRWYWx1ZShleGFtUmF3LCBbJ0hldXJlIGRlIGTDqWJ1dCcsICdIZXVyZSddKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCF0aW1lKSB0aW1lID0gZ2V0VmFsdWUoZXhhbVJhdywgWydIZXVyZSBkZSBkw6lidXQnLCAnSGV1cmUnXSk7IAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGR1cmF0aW9uID0gaXNUVCA/IGdldFZhbHVlKGV4YW1SYXcsIFsnRHVyw6llIHRpZXJzIHRlbXBzJywgJ0R1csOpZSBlbiBtaW51dGUgdGllcnMgdGVtcHMnLCAnRHVyw6llIFRUJ10pIDogZ2V0VmFsdWUoZXhhbVJhdywgWydEdXLDqWUgZW4gbWludXRlJywgJ0R1csOpZSddKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCFkdXJhdGlvbikgZHVyYXRpb24gPSBnZXRWYWx1ZShleGFtUmF3LCBbJ0R1csOpZSBlbiBtaW51dGUnLCAnRHVyw6llJ10pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhhbXNSb3dzICs9IGA8dHI+PHRkPiR7ZXhhbU5hbWV9PC90ZD48dGQ+JHtkYXRlU3RyfTwvdGQ+PHRkPiR7dGltZX08L3RkPjx0ZD4ke2Zvcm1hdER1cmF0aW9uRGlzcGxheShkdXJhdGlvbil9PC90ZD48dGQ+JHtzdHVkZW50Um9vbS5uYW1lfTwvdGQ+PC90cj5gOwogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYW5vbnltU3RyID0gc3R1ZGVudC5OdW1Bbm9ueW1hdCA/IGA8YnI+PHN0cm9uZz5OwrAgQW5vbnltYXQgOjwvc3Ryb25nPiAke3N0dWRlbnQuTnVtQW5vbnltYXR9YCA6ICIiOwogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzdHlsZVN0ciA9IGBwYWRkaW5nLXRvcDoke3RvcE1hcmdpbn1tbTsgcGFkZGluZy1ib3R0b206JHtib3RNYXJnaW59bW07IGZvbnQtc2l6ZToke2ZvbnRTaXplfXB4O2A7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhZ2VIdG1sID0gYDxkaXYgY2xhc3M9InByaW50LXBhZ2UtY29udm9jIiBzdHlsZT0iJHtzdHlsZVN0cn0iPjxkaXYgY2xhc3M9ImNvbnZvYy1oZWFkZXItcm93Ij48ZGl2IGNsYXNzPSJjb252b2MtYWRkcmVzcyI+JHt0eHRBZGRyZXNzfTwvZGl2PjxkaXYgY2xhc3M9ImNvbnZvYy1sb2dvLXpvbmUiPiR7bG9nb1NyYyA/IGA8aW1nIHNyYz0iJHtsb2dvU3JjfSIgY2xhc3M9ImNvbnZvYy1sb2dvIj5gIDogJyd9PC9kaXY+PC9kaXY+PGRpdiBjbGFzcz0iY29udm9jLXRpdGxlIj5DT05WT0NBVElPTiAke3R4dFRpdGxlfTwvZGl2PjxkaXYgY2xhc3M9ImNvbnZvYy1zdHVkZW50LWluZm8iPjxzdHJvbmc+Tm9tIGV0IFByw6lub20gOjwvc3Ryb25nPiAke2dldFZhbHVlKHN0dWRlbnQsIFsnTm9tJ10pfSAke2dldFZhbHVlKHN0dWRlbnQsIFsnUHLDqW5vbSddKX08YnI+PHN0cm9uZz5DbGFzc2UgOjwvc3Ryb25nPiAke3NDbGFzc30ke2Fub255bVN0cn08L2Rpdj48ZGl2IGNsYXNzPSJjb252b2MtYm9keSI+JHt0eHRCb2R5fTwvZGl2Pjx0YWJsZSBjbGFzcz0iY29udm9jLXRhYmxlIj48dGhlYWQ+PHRyPjx0aD7DiXByZXV2ZTwvdGg+PHRoPkRhdGU8L3RoPjx0aD5Ib3JhaXJlIGTDqWJ1dDwvdGg+PHRoPkR1csOpZTwvdGg+PHRoPlNhbGxlPC90aD48L3RyPjwvdGhlYWQ+PHRib2R5PiR7ZXhhbXNSb3dzfTwvdGJvZHk+PC90YWJsZT48ZGl2IHN0eWxlPSJmb250LXdlaWdodDpib2xkOyBtYXJnaW4tYm90dG9tOjVweDsiPlLDqGdsZW1lbnQgZXQgY29uc2lnbmVzIDo8L2Rpdj48ZGl2IGNsYXNzPSJjb252b2MtcnVsZXMiIHN0eWxlPSJmb250LXNpemU6MC45cmVtOyI+JHt0eHRSdWxlc308L2Rpdj48ZGl2IGNsYXNzPSJjb252b2MtZm9vdGVyIiBzdHlsZT0ianVzdGlmeS1jb250ZW50OiBmbGV4LWVuZDsiPjxkaXYgY2xhc3M9ImNvbnZvYy1zaWduIiBzdHlsZT0idGV4dC1hbGlnbjpyaWdodDsiPjxkaXY+RmFpdCDDoCAke3R4dENpdHl9LCBsZSAke25ldyBEYXRlKCkudG9Mb2NhbGVEYXRlU3RyaW5nKCdmci1GUicpfTwvZGl2PiR7c2lnblNyYyA/IGA8aW1nIHNyYz0iJHtzaWduU3JjfSIgc3R5bGU9Im1heC1oZWlnaHQ6NjBweDsgbWFyZ2luLXRvcDoxMHB4OyI+YCA6ICcnfTxkaXYgc3R5bGU9Im1hcmdpbi10b3A6MTBweDsgZm9udC13ZWlnaHQ6Ym9sZDsiPiR7QXBwU3RhdGUuY29uZmlnLm5hbWUgfHwgJyd9PC9kaXY+PGRpdiBzdHlsZT0iZm9udC1zdHlsZTppdGFsaWM7Ij4ke0FwcFN0YXRlLmNvbmZpZy5yb2xlIHx8ICcnfTwvZGl2PjwvZGl2PjwvZGl2PjwvZGl2PmA7CiAgICAgICAgICAgICAgICAgICAgICAgIHByaW50QXJlYS5pbnNlcnRBZGphY2VudEhUTUwoJ2JlZm9yZWVuZCcsIHBhZ2VIdG1sKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIGlmKGNvdW50ID4gMCkgd2luZG93LnByaW50KCk7IGVsc2UgYWxlcnQoIkF1Y3VuZSBjb252b2NhdGlvbiBnw6luw6lyw6llLiIpOwogICAgICAgICAgICB9IGNhdGNoKGUpIHsgY29uc29sZS5lcnJvcihlKTsgYWxlcnQoIkVycmV1ciBpbXByZXNzaW9uOiAiICsgZS5tZXNzYWdlKTsgfQogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gcHJpbnRTdXJ2ZWlsbGFudENvbnZvY2F0aW9ucygpIHsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIGlmKCFBcHBTdGF0ZS5kaXN0cmlidXRpb25EYXRhIHx8IEFwcFN0YXRlLmRpc3RyaWJ1dGlvbkRhdGEubGVuZ3RoID09PSAwKSB7IGFsZXJ0KCJWZXVpbGxleiBjYWxjdWxlciBsYSByw6lwYXJ0aXRpb24uIik7IHJldHVybjsgfQogICAgICAgICAgICAgICAgY29uc3QgcHJpbnRBcmVhID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ByaW50LWFyZWEnKTsgcHJpbnRBcmVhLmlubmVySFRNTCA9ICIiOwogICAgICAgICAgICAgICAgY29uc3QgZmlsdGVyU3VydiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb252b2Mtc3Vydi1maWx0ZXInKS52YWx1ZTsKICAgICAgICAgICAgICAgIGNvbnN0IGxvZ29TcmMgPSBBcHBTdGF0ZS5jb25maWcubG9nb1NyYyB8fCAiIjsgY29uc3Qgc2lnblNyYyA9IEFwcFN0YXRlLmNvbmZpZy5zaWduU3JjIHx8ICIiOwogICAgICAgICAgICAgICAgY29uc3QgdHh0QWRkcmVzcyA9IChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndHh0LXN1cnYtYWRkcmVzcycpLnZhbHVlIHx8ICIiKS5yZXBsYWNlKC9cbi9nLCAnPGJyPicpOwogICAgICAgICAgICAgICAgY29uc3QgdHh0VGl0bGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndHh0LXN1cnYtdGl0bGUtZGlzcGxheScpLmlubmVyVGV4dDsKICAgICAgICAgICAgICAgIGNvbnN0IHR4dEJvZHkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndHh0LXN1cnYtYm9keScpLmlubmVySFRNTDsKICAgICAgICAgICAgICAgIGNvbnN0IHR4dFJ1bGVzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3R4dC1zdXJ2LXJ1bGVzJykuaW5uZXJIVE1MOwogICAgICAgICAgICAgICAgY29uc3QgdHh0Q2l0eSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0eHQtc3Vydi1jaXR5JykuaW5uZXJUZXh0OwogICAgICAgICAgICAgICAgY29uc3QgdG9wTWFyZ2luID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NldHMtc3Vydi10b3AnKS52YWx1ZTsKICAgICAgICAgICAgICAgIGNvbnN0IGJvdE1hcmdpbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZXRzLXN1cnYtYm90JykudmFsdWU7CiAgICAgICAgICAgICAgICBjb25zdCBmb250U2l6ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZXRzLXN1cnYtZm9udCcpLnZhbHVlOwogICAgICAgICAgICAgICAgbGV0IHNjaGVkdWxlTWFwID0ge307CiAgICAgICAgICAgICAgICBBcHBTdGF0ZS5kaXN0cmlidXRpb25EYXRhLmZvckVhY2goZXhhbURhdGEgPT4gewogICAgICAgICAgICAgICAgICAgIGlmKCFleGFtRGF0YSkgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IGV4YW1SYXcgPSBBcHBTdGF0ZS5lcHJldXZlc1tleGFtRGF0YS5leGFtSWR4XTsgCiAgICAgICAgICAgICAgICAgICAgY29uc3QgZXhhbU5hbWUgPSBnZXRWYWx1ZShleGFtUmF3LCBbJ01hdGnDqHJlJywgJ0VwcmV1dmUnXSk7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgZGF0ZVN0ciA9IGZvcm1hdERhdGUoZ2V0VmFsdWUoZXhhbVJhdywgWydEYXRlJ10pKTsKICAgICAgICAgICAgICAgICAgICBleGFtRGF0YS5yb29tcy5mb3JFYWNoKHJvb20gPT4gewogICAgICAgICAgICAgICAgICAgICAgICBpZihyb29tLnN1cnZlaWxsYW50cykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcm9vbS5zdXJ2ZWlsbGFudHMuZm9yRWFjaChzdXJ2SXRlbSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHN1cnZOYW1lID0gKHR5cGVvZiBzdXJ2SXRlbSA9PT0gJ29iamVjdCcpID8gc3Vydkl0ZW0ubmFtZSA6IHN1cnZJdGVtOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBzcGVjaWZpY1RpbWUgPSAodHlwZW9mIHN1cnZJdGVtID09PSAnb2JqZWN0JykgPyBzdXJ2SXRlbS50aW1lIDogIiI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoIXN1cnZOYW1lKSByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoIXNjaGVkdWxlTWFwW3N1cnZOYW1lXSkgc2NoZWR1bGVNYXBbc3Vydk5hbWVdID0gW107CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaXNUVCA9IHJvb20uaXNUVDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgdGltZSA9IGlzVFQgPyBnZXRWYWx1ZShleGFtUmF3LCBbJ0hldXJlIGRlIGTDqWJ1dCB0aWVycyB0ZW1wcycsICdIZXVyZSBUVCcsICdIZXVyZSBkw6lidXQgVFQnXSkgOiBnZXRWYWx1ZShleGFtUmF3LCBbJ0hldXJlIGRlIGTDqWJ1dCcsICdIZXVyZSddKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZighdGltZSkgdGltZSA9IGdldFZhbHVlKGV4YW1SYXcsIFsnSGV1cmUgZGUgZMOpYnV0JywgJ0hldXJlJ10pOyAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgZHVyYXRpb24gPSBpc1RUID8gZ2V0VmFsdWUoZXhhbVJhdywgWydEdXLDqWUgdGllcnMgdGVtcHMnLCAnRHVyw6llIGVuIG1pbnV0ZSB0aWVycyB0ZW1wcycsICdEdXLDqWUgVFQnXSkgOiBnZXRWYWx1ZShleGFtUmF3LCBbJ0R1csOpZSBlbiBtaW51dGUnLCAnRHVyw6llJ10pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCFkdXJhdGlvbikgZHVyYXRpb24gPSBnZXRWYWx1ZShleGFtUmF3LCBbJ0R1csOpZSBlbiBtaW51dGUnLCAnRHVyw6llJ10pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBmaW5hbFRpbWVEaXNwbGF5ID0gc3BlY2lmaWNUaW1lID8gc3BlY2lmaWNUaW1lIDogdGltZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY2hlZHVsZU1hcFtzdXJ2TmFtZV0ucHVzaCh7IAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByYXdFeGFtOiBleGFtUmF3LCAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNUVDogaXNUVCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXByZXV2ZTogZXhhbU5hbWUsIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRlOiBkYXRlU3RyLCAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGV1cmU6IGZpbmFsVGltZURpc3BsYXksIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkdXJlZTogZHVyYXRpb24sIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzYWxsZTogcm9vbS5uYW1lIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgbGV0IGNvdW50ID0gMDsgCiAgICAgICAgICAgICAgICBjb25zdCBzb3J0ZWRTdXJ2cyA9IE9iamVjdC5rZXlzKHNjaGVkdWxlTWFwKS5zb3J0KCk7CiAgICAgICAgICAgICAgICBzb3J0ZWRTdXJ2cy5mb3JFYWNoKHN1cnZOYW1lID0+IHsKICAgICAgICAgICAgICAgICAgICBpZihmaWx0ZXJTdXJ2ICE9PSAiQUxMIiAmJiBzdXJ2TmFtZSAhPT0gZmlsdGVyU3VydikgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IHNsb3RzID0gc2NoZWR1bGVNYXBbc3Vydk5hbWVdOwogICAgICAgICAgICAgICAgICAgIHNsb3RzLnNvcnQoKGEsIGIpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGltZUEgPSBnZXREYXRlVGltZVZhbHVlKGEucmF3RXhhbSwgYS5pc1RUKTsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGltZUIgPSBnZXREYXRlVGltZVZhbHVlKGIucmF3RXhhbSwgYi5pc1RUKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRpbWVBIC0gdGltZUI7CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgbGV0IHJvd3MgPSAiIjsKICAgICAgICAgICAgICAgICAgICBzbG90cy5mb3JFYWNoKHNsb3QgPT4geyByb3dzICs9IGA8dHI+PHRkPiR7c2xvdC5lcHJldXZlfTwvdGQ+PHRkPiR7c2xvdC5kYXRlfTwvdGQ+PHRkPiR7c2xvdC5oZXVyZX08L3RkPjx0ZD4ke2Zvcm1hdER1cmF0aW9uRGlzcGxheShzbG90LmR1cmVlKX08L3RkPjx0ZD4ke3Nsb3Quc2FsbGV9PC90ZD48L3RyPmA7IH0pOwogICAgICAgICAgICAgICAgICAgIGNvdW50Kys7CiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3R5bGVTdHIgPSBgcGFkZGluZy10b3A6JHt0b3BNYXJnaW59bW07IHBhZGRpbmctYm90dG9tOiR7Ym90TWFyZ2lufW1tOyBmb250LXNpemU6JHtmb250U2l6ZX1weDtgOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhZ2VIdG1sID0gYDxkaXYgY2xhc3M9InByaW50LXBhZ2UtY29udm9jIiBzdHlsZT0iJHtzdHlsZVN0cn0iPjxkaXYgY2xhc3M9ImNvbnZvYy1oZWFkZXItcm93Ij48ZGl2IGNsYXNzPSJjb252b2MtYWRkcmVzcyI+JHt0eHRBZGRyZXNzfTwvZGl2PjxkaXYgY2xhc3M9ImNvbnZvYy1sb2dvLXpvbmUiPiR7bG9nb1NyYyA/IGA8aW1nIHNyYz0iJHtsb2dvU3JjfSIgY2xhc3M9ImNvbnZvYy1sb2dvIj5gIDogJyd9PC9kaXY+PC9kaXY+PGRpdiBjbGFzcz0iY29udm9jLXRpdGxlIj5DT05WT0NBVElPTiAke3R4dFRpdGxlfTwvZGl2PjxkaXYgY2xhc3M9ImNvbnZvYy1zdHVkZW50LWluZm8iPjxzdHJvbmc+U3VydmVpbGxhbnQgOjwvc3Ryb25nPiAke3N1cnZOYW1lfTwvZGl2PjxkaXYgY2xhc3M9ImNvbnZvYy1ib2R5Ij4ke3R4dEJvZHl9PC9kaXY+PHRhYmxlIGNsYXNzPSJjb252b2MtdGFibGUiPjx0aGVhZD48dHI+PHRoPsOJcHJldXZlPC90aD48dGg+RGF0ZTwvdGg+PHRoPkhvcmFpcmU8L3RoPjx0aD5EdXLDqWU8L3RoPjx0aD5TYWxsZTwvdGg+PC90cj48L3RoZWFkPjx0Ym9keT4ke3Jvd3N9PC90Ym9keT48L3RhYmxlPjxkaXYgc3R5bGU9ImZvbnQtd2VpZ2h0OmJvbGQ7IG1hcmdpbi1ib3R0b206NXB4OyI+Q29uc2lnbmVzIDo8L2Rpdj48ZGl2IGNsYXNzPSJjb252b2MtcnVsZXMiIHN0eWxlPSJmb250LXNpemU6MC45cmVtOyI+JHt0eHRSdWxlc308L2Rpdj48ZGl2IGNsYXNzPSJjb252b2MtZm9vdGVyIiBzdHlsZT0ianVzdGlmeS1jb250ZW50OiBmbGV4LWVuZDsiPjxkaXYgY2xhc3M9ImNvbnZvYy1zaWduIiBzdHlsZT0idGV4dC1hbGlnbjpyaWdodDsiPjxkaXY+RmFpdCDDoCAke3R4dENpdHl9LCBsZSAke25ldyBEYXRlKCkudG9Mb2NhbGVEYXRlU3RyaW5nKCdmci1GUicpfTwvZGl2PiR7c2lnblNyYyA/IGA8aW1nIHNyYz0iJHtzaWduU3JjfSIgc3R5bGU9Im1heC1oZWlnaHQ6NjBweDsgbWFyZ2luLXRvcDoxMHB4OyI+YCA6ICcnfTxkaXYgc3R5bGU9Im1hcmdpbi10b3A6MTBweDsgZm9udC13ZWlnaHQ6Ym9sZDsiPiR7QXBwU3RhdGUuY29uZmlnLm5hbWUgfHwgJyd9PC9kaXY+PGRpdiBzdHlsZT0iZm9udC1zdHlsZTppdGFsaWM7Ij4ke0FwcFN0YXRlLmNvbmZpZy5yb2xlIHx8ICcnfTwvZGl2PjwvZGl2PjwvZGl2PjwvZGl2PmA7CiAgICAgICAgICAgICAgICAgICAgcHJpbnRBcmVhLmluc2VydEFkamFjZW50SFRNTCgnYmVmb3JlZW5kJywgcGFnZUh0bWwpOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBpZihjb3VudCA+IDApIHdpbmRvdy5wcmludCgpOyBlbHNlIGFsZXJ0KCJBdWN1bmUgc3VydmVpbGxhbmNlIHRyb3V2w6llLiIpOwogICAgICAgICAgICB9IGNhdGNoKGUpIHsgY29uc29sZS5lcnJvcihlKTsgYWxlcnQoIkVycmV1ciBpbXByZXNzaW9uOiAiICsgZS5tZXNzYWdlKTsgfQogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gZ2VuZXJhdGVBbm9ueW1pdHkoKSB7IGlmKCFBcHBTdGF0ZS5lbGV2ZXMubGVuZ3RoKSByZXR1cm4gYWxlcnQoIkF1Y3VuIMOpbMOodmUiKTsgY29uc3QgdXNlZCA9IG5ldyBTZXQoKTsgQXBwU3RhdGUuZWxldmVzLmZvckVhY2goZSA9PiB7IGlmKCFlLk51bUFub255bWF0KSB7IGxldCBpZDsgZG8geyBpZCA9IE1hdGguZmxvb3IoMTAwMDAwICsgTWF0aC5yYW5kb20oKSAqIDkwMDAwMCkudG9TdHJpbmcoKTsgfSB3aGlsZSh1c2VkLmhhcyhpZCkpOyB1c2VkLmFkZChpZCk7IGUuTnVtQW5vbnltYXQgPSBpZDsgfSBlbHNlIHsgdXNlZC5hZGQoZS5OdW1Bbm9ueW1hdCk7IH0gfSk7IHJlbmRlckFub255bWl0eVRhYmxlKCk7IH0KICAgICAgICBmdW5jdGlvbiByZW5kZXJBbm9ueW1pdHlUYWJsZSgpIHsgY29uc3QgYyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhbm9ueW1pdHktdGFibGUtY29udGFpbmVyJyk7IGxldCBoID0gYDxkaXYgY2xhc3M9ImNhcmQiPjx0YWJsZSBjbGFzcz0iZGF0YS10YWJsZSI+PHRoZWFkPjx0cj48dGg+Tm9tPC90aD48dGg+UHLDqW5vbTwvdGg+PHRoPkNsYXNzZTwvdGg+PHRoPkFub255bWF0PC90aD48L3RyPjwvdGhlYWQ+PHRib2R5PmA7IEFwcFN0YXRlLmVsZXZlcy5mb3JFYWNoKGUgPT4geyBoKz1gPHRyPjx0ZD4ke2dldFZhbHVlKGUsWydOb20nXSl9PC90ZD48dGQ+JHtnZXRWYWx1ZShlLFsnUHLDqW5vbSddKX08L3RkPjx0ZD4ke2dldFZhbHVlKGUsWydDbGFzc2UnXSl9PC90ZD48dGQ+PHN0cm9uZz4ke2UuTnVtQW5vbnltYXR9PC9zdHJvbmc+PC90ZD48L3RyPmA7IH0pOyBoKz0nPC90Ym9keT48L3RhYmxlPjwvZGl2Pic7IGMuaW5uZXJIVE1MID0gaDsgfQogICAgICAgIAogICAgICAgIGZ1bmN0aW9uIHBvcHVsYXRlTGFiZWxGaWx0ZXJzKCkgewogICAgICAgICAgICBjb25zdCBleFNlbGVjdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsYWJlbC1leGFtLXNlbGVjdCcpOwogICAgICAgICAgICBleFNlbGVjdC5pbm5lckhUTUwgPSAnPG9wdGlvbiB2YWx1ZT0iQUxMIj5Ub3V0ZXMgbGVzIMOpcHJldXZlcyAoQmFzZSDDiWzDqHZlcyk8L29wdGlvbj4nOwogICAgICAgICAgICBBcHBTdGF0ZS5lcHJldXZlcy5mb3JFYWNoKChlLCBpKSA9PiB7CiAgICAgICAgICAgICAgICBleFNlbGVjdC5hZGQobmV3IE9wdGlvbihnZXRWYWx1ZShlLCBbJ01hdGnDqHJlJywgJ0VwcmV1dmUnXSksIGkpKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGNvbnN0IGNsU2VsZWN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xhYmVsLWNsYXNzLXNlbGVjdCcpOwogICAgICAgICAgICBjbFNlbGVjdC5pbm5lckhUTUwgPSAnPG9wdGlvbiB2YWx1ZT0iQUxMIj5Ub3V0ZXMgY2xhc3Nlczwvb3B0aW9uPic7CiAgICAgICAgICAgIGNvbnN0IGNsYXNzZXMgPSBuZXcgU2V0KCk7CiAgICAgICAgICAgIEFwcFN0YXRlLmVsZXZlcy5mb3JFYWNoKGUgPT4geyBjb25zdCBjID0gZ2V0VmFsdWUoZSxbJ0NsYXNzZScsJ0RpdiddKTsgaWYoYykgY2xhc3Nlcy5hZGQoYyk7IH0pOwogICAgICAgICAgICBBcnJheS5mcm9tKGNsYXNzZXMpLnNvcnQoKS5mb3JFYWNoKGMgPT4gY2xTZWxlY3QuYWRkKG5ldyBPcHRpb24oYywgYykpKTsKICAgICAgICAgICAgdXBkYXRlTGFiZWxSb29tU2VsZWN0KCk7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiB1cGRhdGVMYWJlbFJvb21TZWxlY3QoKSB7CiAgICAgICAgICAgIGNvbnN0IGV4YW1JZHggPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbGFiZWwtZXhhbS1zZWxlY3QnKS52YWx1ZTsKICAgICAgICAgICAgY29uc3Qgcm1TZWxlY3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbGFiZWwtcm9vbS1zZWxlY3QnKTsKICAgICAgICAgICAgcm1TZWxlY3QuaW5uZXJIVE1MID0gJzxvcHRpb24gdmFsdWU9IkFMTCI+VG91dGVzIHNhbGxlczwvb3B0aW9uPic7CiAgICAgICAgICAgIGlmIChleGFtSWR4ICE9PSAiQUxMIikgewogICAgICAgICAgICAgICAgcm1TZWxlY3QuZGlzYWJsZWQgPSBmYWxzZTsKICAgICAgICAgICAgICAgIGNvbnN0IGRpc3QgPSBBcHBTdGF0ZS5kaXN0cmlidXRpb25EYXRhW2V4YW1JZHhdOwogICAgICAgICAgICAgICAgaWYgKGRpc3QgJiYgZGlzdC5yb29tcykgewogICAgICAgICAgICAgICAgICAgIGRpc3Qucm9vbXMuZm9yRWFjaChyID0+IHJtU2VsZWN0LmFkZChuZXcgT3B0aW9uKHIubmFtZSwgci5uYW1lKSkpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgcm1TZWxlY3QuZGlzYWJsZWQgPSB0cnVlOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBwcmludFRhYmxlTGFiZWxzKCkgewogICAgICAgICAgICBjb25zdCBleGFtSWR4ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xhYmVsLWV4YW0tc2VsZWN0JykudmFsdWU7CiAgICAgICAgICAgIGNvbnN0IHJvb21GaWx0ZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbGFiZWwtcm9vbS1zZWxlY3QnKS52YWx1ZTsKICAgICAgICAgICAgY29uc3QgY2xhc3NGaWx0ZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbGFiZWwtY2xhc3Mtc2VsZWN0JykudmFsdWU7CiAgICAgICAgICAgIGNvbnN0IHNvcnRNb2RlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xpc3Rpbmctc29ydC1tb2RlJykudmFsdWU7IAogICAgICAgICAgICBjb25zdCBsb2dvID0gQXBwU3RhdGUuY29uZmlnLmxvZ29TcmMgfHwgIiI7CiAgICAgICAgICAgIGxldCBzdHVkZW50c1RvUHJpbnQgPSBbXTsKICAgICAgICAgICAgaWYgKGV4YW1JZHggIT09ICJBTEwiKSB7CiAgICAgICAgICAgICAgICBjb25zdCBkaXN0ID0gQXBwU3RhdGUuZGlzdHJpYnV0aW9uRGF0YVtleGFtSWR4XTsKICAgICAgICAgICAgICAgIGlmICghZGlzdCkgcmV0dXJuIGFsZXJ0KCJSw6lwYXJ0aXRpb24gbm9uIGNhbGN1bMOpZSBwb3VyIGNldHRlIMOpcHJldXZlLiIpOwogICAgICAgICAgICAgICAgaWYgKHJvb21GaWx0ZXIgIT09ICJBTEwiKSB7CiAgICAgICAgICAgICAgICAgICAgY29uc3Qgcm9vbSA9IGRpc3Qucm9vbXMuZmluZChyID0+IHIubmFtZSA9PT0gcm9vbUZpbHRlcik7CiAgICAgICAgICAgICAgICAgICAgaWYgKHJvb20pIHN0dWRlbnRzVG9QcmludCA9IFsuLi5yb29tLnN0dWRlbnRzXTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgZGlzdC5yb29tcy5mb3JFYWNoKHIgPT4gewogICAgICAgICAgICAgICAgICAgICAgICByLnN0dWRlbnRzLmZvckVhY2gocyA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHVkZW50c1RvUHJpbnQucHVzaCh7Li4ucywgX3RlbXBSb29tOiByLm5hbWV9KTsKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBzdHVkZW50c1RvUHJpbnQgPSBbLi4uQXBwU3RhdGUuZWxldmVzXTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoY2xhc3NGaWx0ZXIgIT09ICJBTEwiKSB7CiAgICAgICAgICAgICAgICBzdHVkZW50c1RvUHJpbnQgPSBzdHVkZW50c1RvUHJpbnQuZmlsdGVyKHMgPT4gZ2V0VmFsdWUocywgWydDbGFzc2UnLCdEaXYnXSkgPT0gY2xhc3NGaWx0ZXIpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChzb3J0TW9kZSA9PT0gJ1JPT00nICYmIGV4YW1JZHggIT09ICJBTEwiKSB7CiAgICAgICAgICAgICAgICAgc3R1ZGVudHNUb1ByaW50LnNvcnQoKGEsIGIpID0+IHsKICAgICAgICAgICAgICAgICAgICBjb25zdCByQSA9IGEuX3RlbXBSb29tIHx8ICIiOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IHJCID0gYi5fdGVtcFJvb20gfHwgIiI7CiAgICAgICAgICAgICAgICAgICAgaWYockEgIT09IHJCKSByZXR1cm4gckEubG9jYWxlQ29tcGFyZShyQiwgdW5kZWZpbmVkLCB7bnVtZXJpYzogdHJ1ZX0pOwogICAgICAgICAgICAgICAgICAgIHJldHVybiAoZ2V0VmFsdWUoYSxbJ05vbSddKXx8JycpLmxvY2FsZUNvbXBhcmUoZ2V0VmFsdWUoYixbJ05vbSddKXx8JycpOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0gZWxzZSBpZiAoc29ydE1vZGUgPT09ICdDTEFTUycpIHsKICAgICAgICAgICAgICAgIHN0dWRlbnRzVG9QcmludC5zb3J0KChhLCBiKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgY0EgPSBub3JtQ2xhc3MoZ2V0VmFsdWUoYSwgWydDbGFzc2UnLCAnRGl2J10pKTsKICAgICAgICAgICAgICAgICAgICBjb25zdCBjQiA9IG5vcm1DbGFzcyhnZXRWYWx1ZShiLCBbJ0NsYXNzZScsICdEaXYnXSkpOwogICAgICAgICAgICAgICAgICAgIGlmIChjQSAhPT0gY0IpIHJldHVybiBjQS5sb2NhbGVDb21wYXJlKGNCKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gKGdldFZhbHVlKGEsWydOb20nXSl8fCcnKS5sb2NhbGVDb21wYXJlKGdldFZhbHVlKGIsWydOb20nXSl8fCcnKTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgc3R1ZGVudHNUb1ByaW50LnNvcnQoKGEsIGIpID0+IChnZXRWYWx1ZShhLFsnTm9tJ10pfHwnJykubG9jYWxlQ29tcGFyZShnZXRWYWx1ZShiLFsnTm9tJ10pfHwnJykpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChzdHVkZW50c1RvUHJpbnQubGVuZ3RoID09PSAwKSByZXR1cm4gYWxlcnQoIkF1Y3VuIMOpbMOodmUgdHJvdXbDqSBwb3VyIGNlcyBjcml0w6hyZXMuIik7CiAgICAgICAgICAgIGxldCBodG1sID0gIiI7CiAgICAgICAgICAgIGxldCBjaHVuayA9IDE0OyAKICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdHVkZW50c1RvUHJpbnQubGVuZ3RoOyBpICs9IGNodW5rKSB7CiAgICAgICAgICAgICAgICBjb25zdCBiYXRjaCA9IHN0dWRlbnRzVG9QcmludC5zbGljZShpLCBpICsgY2h1bmspOwogICAgICAgICAgICAgICAgaHRtbCArPSBgPGRpdiBjbGFzcz0ibGFiZWwtc2hlZXQiPmA7CiAgICAgICAgICAgICAgICBiYXRjaC5mb3JFYWNoKGUgPT4gewogICAgICAgICAgICAgICAgICAgIGh0bWwgKz0gYDxkaXYgY2xhc3M9ImxhYmVsLWNhcmQiPiR7bG9nbyA/IGA8aW1nIHNyYz0iJHtsb2dvfSIgY2xhc3M9ImxhYmVsLWxvZ28iPmAgOiAnJ308ZGl2IGNsYXNzPSJsYWJlbC1uYW1lIj4ke2dldFZhbHVlKGUsWydOb20nXSl9ICR7Z2V0VmFsdWUoZSxbJ1Byw6lub20nXSl9PC9kaXY+PGRpdiBjbGFzcz0ibGFiZWwtY2xhc3MiPiR7Z2V0VmFsdWUoZSxbJ0NsYXNzZSddKX08L2Rpdj48ZGl2IGNsYXNzPSJsYWJlbC1hbm9ueW0iPiR7ZS5OdW1Bbm9ueW1hdCB8fCAiPyJ9PC9kaXY+PC9kaXY+YDsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgaHRtbCArPSBgPC9kaXY+YDsKICAgICAgICAgICAgfQogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJpbnQtYXJlYScpLmlubmVySFRNTCA9IGh0bWw7CiAgICAgICAgICAgIHdpbmRvdy5wcmludCgpOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gcHJpbnRBbm9ueW1pdHlMaXN0KCkgeyAKICAgICAgICAgICAgY29uc3QgbG9nbyA9IEFwcFN0YXRlLmNvbmZpZy5sb2dvU3JjIHx8ICIiOyAKICAgICAgICAgICAgY29uc3Qgc29ydE1vZGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbGlzdGluZy1zb3J0LW1vZGUnKS52YWx1ZTsKICAgICAgICAgICAgY29uc3QgZXhhbUlkeCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsYWJlbC1leGFtLXNlbGVjdCcpLnZhbHVlOwogICAgICAgICAgICBsZXQgbGlzdCA9IFtdOwogICAgICAgICAgICBpZiAoZXhhbUlkeCAhPT0gIkFMTCIpIHsKICAgICAgICAgICAgICAgIGNvbnN0IGRpc3QgPSBBcHBTdGF0ZS5kaXN0cmlidXRpb25EYXRhW2V4YW1JZHhdOwogICAgICAgICAgICAgICAgaWYgKGRpc3QpIHsKICAgICAgICAgICAgICAgICAgICBkaXN0LnJvb21zLmZvckVhY2gociA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIHIuc3R1ZGVudHMuZm9yRWFjaChzID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpc3QucHVzaCh7IC4uLnMsIF9yb29tTmFtZTogci5uYW1lIH0pOwogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGxpc3QgPSBbLi4uQXBwU3RhdGUuZWxldmVzXTsKICAgICAgICAgICAgfQogICAgICAgICAgICBjb25zdCBjbGFzc0ZpbHRlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsYWJlbC1jbGFzcy1zZWxlY3QnKS52YWx1ZTsKICAgICAgICAgICAgaWYgKGNsYXNzRmlsdGVyICE9PSAiQUxMIikgewogICAgICAgICAgICAgICAgbGlzdCA9IGxpc3QuZmlsdGVyKHMgPT4gZ2V0VmFsdWUocywgWydDbGFzc2UnLCdEaXYnXSkgPT0gY2xhc3NGaWx0ZXIpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChzb3J0TW9kZSA9PT0gJ1JPT00nICYmIGV4YW1JZHggIT09ICJBTEwiKSB7CiAgICAgICAgICAgICAgICAgbGlzdC5zb3J0KChhLCBiKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgckEgPSBhLl9yb29tTmFtZSB8fCAiIjsKICAgICAgICAgICAgICAgICAgICBjb25zdCByQiA9IGIuX3Jvb21OYW1lIHx8ICIiOwogICAgICAgICAgICAgICAgICAgIGlmKHJBICE9PSByQikgcmV0dXJuIHJBLmxvY2FsZUNvbXBhcmUockIsIHVuZGVmaW5lZCwge251bWVyaWM6IHRydWV9KTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gKGdldFZhbHVlKGEsWydOb20nXSl8fCcnKS5sb2NhbGVDb21wYXJlKGdldFZhbHVlKGIsWydOb20nXSl8fCcnKTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9IGVsc2UgaWYgKHNvcnRNb2RlID09PSAnQ0xBU1MnKSB7CiAgICAgICAgICAgICAgICBsaXN0LnNvcnQoKGEsIGIpID0+IHsKICAgICAgICAgICAgICAgICAgICBjb25zdCBjQSA9IG5vcm1DbGFzcyhnZXRWYWx1ZShhLCBbJ0NsYXNzZScsICdEaXYnXSkpOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IGNCID0gbm9ybUNsYXNzKGdldFZhbHVlKGIsIFsnQ2xhc3NlJywgJ0RpdiddKSk7CiAgICAgICAgICAgICAgICAgICAgaWYgKGNBICE9PSBjQikgcmV0dXJuIGNBLmxvY2FsZUNvbXBhcmUoY0IpOwogICAgICAgICAgICAgICAgICAgIHJldHVybiAoZ2V0VmFsdWUoYSxbJ05vbSddKXx8JycpLmxvY2FsZUNvbXBhcmUoZ2V0VmFsdWUoYixbJ05vbSddKXx8JycpOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBsaXN0LnNvcnQoKGEsIGIpID0+IChnZXRWYWx1ZShhLFsnTm9tJ10pfHwnJykubG9jYWxlQ29tcGFyZShnZXRWYWx1ZShiLFsnTm9tJ10pfHwnJykpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGxldCByb3dzID0gIiI7IAogICAgICAgICAgICBsZXQgY3VycmVudFJvb20gPSAiIjsKICAgICAgICAgICAgbGlzdC5mb3JFYWNoKGUgPT4gewogICAgICAgICAgICAgICAgaWYoc29ydE1vZGUgPT09ICdST09NJyAmJiBleGFtSWR4ICE9PSAiQUxMIiAmJiBlLl9yb29tTmFtZSAhPT0gY3VycmVudFJvb20pIHsKICAgICAgICAgICAgICAgICAgICBjdXJyZW50Um9vbSA9IGUuX3Jvb21OYW1lOwogICAgICAgICAgICAgICAgICAgIHJvd3MgKz0gYDx0ciBzdHlsZT0iYmFja2dyb3VuZDojZWVlOyBmb250LXdlaWdodDpib2xkOyI+PHRkIGNvbHNwYW49IjQiPlNhbGxlIDogJHtjdXJyZW50Um9vbX08L3RkPjwvdHI+YDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJvd3MrPWA8dHI+PHRkPiR7Z2V0VmFsdWUoZSxbJ05vbSddKX08L3RkPjx0ZD4ke2dldFZhbHVlKGUsWydQcsOpbm9tJ10pfTwvdGQ+PHRkPiR7Z2V0VmFsdWUoZSxbJ0NsYXNzZSddKX08L3RkPjx0ZD4ke2UuTnVtQW5vbnltYXQgfHwgJyd9PC90ZD48L3RyPmA7CiAgICAgICAgICAgIH0pOyAKICAgICAgICAgICAgY29uc3QgaHRtbCA9IGA8ZGl2IGNsYXNzPSJwcmludC1wYWdlLWxpc3QiPjxkaXYgY2xhc3M9InByaW50LWhlYWRlciI+PGRpdj5MSVNUSU5HIEFOT05ZTUFUPC9kaXY+JHtsb2dvID8gYDxpbWcgc3JjPSIke2xvZ299IiBjbGFzcz0icHJpbnQtbG9nbyI+YCA6ICcnfTwvZGl2Pjx0YWJsZSBjbGFzcz0icHJpbnQtdGFibGUiPjx0aGVhZD48dHI+PHRoPk5vbTwvdGg+PHRoPlByw6lub208L3RoPjx0aD5DbGFzc2U8L3RoPjx0aD5OwrAgQW5vbnltYXQ8L3RoPjwvdHI+PC90aGVhZD48dGJvZHk+JHtyb3dzfTwvdGJvZHk+PC90YWJsZT48L2Rpdj5gOyAKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ByaW50LWFyZWEnKS5pbm5lckhUTUwgPSBodG1sOyAKICAgICAgICAgICAgd2luZG93LnByaW50KCk7IAogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gcG9wdWxhdGVSZWNhcEZpbHRlcnMoKSB7IAogICAgICAgICAgICBjb25zdCBleGFtU2VsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JlY2FwLWV4YW0tc2VsZWN0Jyk7IAogICAgICAgICAgICBleGFtU2VsLmlubmVySFRNTCA9ICc8b3B0aW9uIHZhbHVlPSJBTEwiPlRvdXRlcyBsZXMgw6lwcmV1dmVzPC9vcHRpb24+JzsgCiAgICAgICAgICAgIEFwcFN0YXRlLmRpc3RyaWJ1dGlvbkRhdGEuZm9yRWFjaCgoZCwgaSkgPT4geyAKICAgICAgICAgICAgICAgIGlmKCFkKSByZXR1cm47IAogICAgICAgICAgICAgICAgY29uc3QgZXhhbSA9IEFwcFN0YXRlLmVwcmV1dmVzW2QuZXhhbUlkeF07IAogICAgICAgICAgICAgICAgZXhhbVNlbC5hZGQobmV3IE9wdGlvbihnZXRWYWx1ZShleGFtLCBbJ01hdGnDqHJlJywgJ0VwcmV1dmUnXSksIGkpKTsgCiAgICAgICAgICAgIH0pOyAKICAgICAgICAgICAgdXBkYXRlUmVjYXBSb29tU2VsZWN0KCk7IAogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gdXBkYXRlUmVjYXBSb29tU2VsZWN0KCkgeyAKICAgICAgICAgICAgY29uc3Qgcm9vbVNlbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZWNhcC1yb29tLXNlbGVjdCcpOyAKICAgICAgICAgICAgcm9vbVNlbC5pbm5lckhUTUwgPSAnPG9wdGlvbiB2YWx1ZT0iQUxMIj5Ub3V0ZXMgbGVzIHNhbGxlcyB1dGlsaXPDqWVzPC9vcHRpb24+JzsgCiAgICAgICAgICAgIGNvbnN0IGV4YW1JZHggPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVjYXAtZXhhbS1zZWxlY3QnKS52YWx1ZTsgCiAgICAgICAgICAgIGlmKGV4YW1JZHggIT09ICJBTEwiKSB7IAogICAgICAgICAgICAgICAgY29uc3QgZGlzdCA9IEFwcFN0YXRlLmRpc3RyaWJ1dGlvbkRhdGFbZXhhbUlkeF07IAogICAgICAgICAgICAgICAgaWYoZGlzdCkgewogICAgICAgICAgICAgICAgICAgIGRpc3Qucm9vbXMuZm9yRWFjaChyID0+IHsgCiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHIuc3R1ZGVudHMubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcm9vbVNlbC5hZGQobmV3IE9wdGlvbihyLm5hbWUsIHIubmFtZSkpOyAKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pIAogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGVsc2UgeyAKICAgICAgICAgICAgICAgIGxldCByb29tcyA9IG5ldyBTZXQoKTsgCiAgICAgICAgICAgICAgICBBcHBTdGF0ZS5kaXN0cmlidXRpb25EYXRhLmZvckVhY2goZCA9PiB7IAogICAgICAgICAgICAgICAgICAgIGlmKGQpIGQucm9vbXMuZm9yRWFjaChyID0+IHsgCiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHIuc3R1ZGVudHMubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcm9vbXMuYWRkKHIubmFtZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9KSAKICAgICAgICAgICAgICAgIH0pOyAKICAgICAgICAgICAgICAgIEFycmF5LmZyb20ocm9vbXMpLnNvcnQoKS5mb3JFYWNoKHIgPT4gcm9vbVNlbC5hZGQobmV3IE9wdGlvbihyLCByKSkpOyAKICAgICAgICAgICAgfSAKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIHByaW50R2xvYmFsUmVjYXAoKSB7IAogICAgICAgICAgICBpZighQXBwU3RhdGUuZGlzdHJpYnV0aW9uRGF0YS5sZW5ndGgpIHJldHVybiBhbGVydCgiUsOpcGFydGl0aW9uIHZpZGUiKTsgCiAgICAgICAgICAgIGNvbnN0IGV4YW1GaWx0ZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVjYXAtZXhhbS1zZWxlY3QnKS52YWx1ZTsgCiAgICAgICAgICAgIGNvbnN0IHJvb21GaWx0ZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVjYXAtcm9vbS1zZWxlY3QnKS52YWx1ZTsgCiAgICAgICAgICAgIGNvbnN0IGxvZ28gPSBBcHBTdGF0ZS5jb25maWcubG9nb1NyYyB8fCAiIjsgCiAgICAgICAgICAgIGxldCBodG1sID0gIiI7IAogICAgICAgICAgICBsZXQgZXhhbXNUb1ByaW50ID0gKGV4YW1GaWx0ZXIgPT09ICJBTEwiKSA/IEFwcFN0YXRlLmRpc3RyaWJ1dGlvbkRhdGEgOiBbQXBwU3RhdGUuZGlzdHJpYnV0aW9uRGF0YVtleGFtRmlsdGVyXV07IAogICAgICAgICAgICBleGFtc1RvUHJpbnQuZm9yRWFjaChkaXN0ID0+IHsgCiAgICAgICAgICAgICAgICBpZighZGlzdCkgcmV0dXJuOyAKICAgICAgICAgICAgICAgIGNvbnN0IGV4YW1OYW1lID0gZ2V0VmFsdWUoQXBwU3RhdGUuZXByZXV2ZXNbZGlzdC5leGFtSWR4XSwgWydNYXRpw6hyZScsJ0VwcmV1dmUnXSk7IAogICAgICAgICAgICAgICAgY29uc3QgZXhhbUluZm8gPSBBcHBTdGF0ZS5lcHJldXZlc1tkaXN0LmV4YW1JZHhdOyAKICAgICAgICAgICAgICAgIGRpc3Qucm9vbXMuZm9yRWFjaChyID0+IHsgCiAgICAgICAgICAgICAgICAgICAgaWYocm9vbUZpbHRlciAhPT0gIkFMTCIgJiYgci5uYW1lICE9PSByb29tRmlsdGVyKSByZXR1cm47IAogICAgICAgICAgICAgICAgICAgIGlmKHIuc3R1ZGVudHMubGVuZ3RoID09PSAwKSByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgbGV0IGxpc3QgPSByLnN0dWRlbnRzOyAKICAgICAgICAgICAgICAgICAgICBpZihsaXN0Lmxlbmd0aCA9PT0gMCkgcmV0dXJuOyAKICAgICAgICAgICAgICAgICAgICBsaXN0LnNvcnQoKGEsYikgPT4gZ2V0VmFsdWUoYSxbJ05vbSddKS5sb2NhbGVDb21wYXJlKGdldFZhbHVlKGIsWydOb20nXSkpKTsgCiAgICAgICAgICAgICAgICAgICAgY29uc3QgaXNUVCA9IHIuaXNUVDsgCiAgICAgICAgICAgICAgICAgICAgbGV0IHRpbWUgPSBpc1RUID8gZ2V0VmFsdWUoZXhhbUluZm8sIFsnSGV1cmUgZGUgZMOpYnV0IHRpZXJzIHRlbXBzJywgJ0hldXJlIFRUJ10pIDogZ2V0VmFsdWUoZXhhbUluZm8sIFsnSGV1cmUgZGUgZMOpYnV0JywgJ0hldXJlJ10pOyAKICAgICAgICAgICAgICAgICAgICBpZighdGltZSkgdGltZSA9IGdldFZhbHVlKGV4YW1JbmZvLCBbJ0hldXJlIGRlIGTDqWJ1dCcsICdIZXVyZSddKTsgCiAgICAgICAgICAgICAgICAgICAgbGV0IGR1cmF0aW9uID0gaXNUVCA/IGdldFZhbHVlKGV4YW1JbmZvLCBbJ0R1csOpZSBlbiBtaW51dGUgdGllcnMgdGVtcHMnLCAnRHVyw6llIFRUJ10pIDogZ2V0VmFsdWUoZXhhbUluZm8sIFsnRHVyw6llIGVuIG1pbnV0ZScsICdEdXLDqWUnXSk7IAogICAgICAgICAgICAgICAgICAgIGlmKCFkdXJhdGlvbikgZHVyYXRpb24gPSBnZXRWYWx1ZShleGFtSW5mbywgWydEdXLDqWUgZW4gbWludXRlJywgJ0R1csOpZSddKTsgCiAgICAgICAgICAgICAgICAgICAgbGV0IHJvd3MgPSAiIjsgCiAgICAgICAgICAgICAgICAgICAgbGlzdC5mb3JFYWNoKGl0ZW0gPT4geyByb3dzICs9IGA8dHI+PHRkPiR7Z2V0VmFsdWUoaXRlbSxbJ05vbSddKX08L3RkPjx0ZD4ke2dldFZhbHVlKGl0ZW0sWydQcsOpbm9tJ10pfTwvdGQ+PHRkPiR7Z2V0VmFsdWUoaXRlbSxbJ0NsYXNzZSddKX08L3RkPjwvdHI+YDsgfSk7IAogICAgICAgICAgICAgICAgICAgIGNvbnN0IGRhdGVTdHIgPSBmb3JtYXREYXRlKGdldFZhbHVlKGV4YW1JbmZvLFsnRGF0ZSddKSk7IAogICAgICAgICAgICAgICAgICAgIGh0bWwgKz0gYDxkaXYgY2xhc3M9InByaW50LXBhZ2UtbGlzdCIgc3R5bGU9InBhZ2UtYnJlYWstYWZ0ZXI6IGFsd2F5czsiPjxkaXYgY2xhc3M9InByaW50LWhlYWRlciI+PGRpdj5UQUJMRUFVIFLDiUNBUElUVUxBVElGPC9kaXY+JHtsb2dvID8gYDxpbWcgc3JjPSIke2xvZ299IiBjbGFzcz0icHJpbnQtbG9nbyI+YCA6ICcnfTwvZGl2PjxkaXYgY2xhc3M9InByaW50LWRvYy10aXRsZSI+JHtleGFtTmFtZX0gLSBTYWxsZSAke3IubmFtZX08L2Rpdj48ZGl2IHN0eWxlPSJ0ZXh0LWFsaWduOmNlbnRlcjsgZm9udC1zaXplOjEuMXJlbTsgbWFyZ2luLWJvdHRvbToxMHB4OyI+PHN0cm9uZz5EYXRlIDo8L3N0cm9uZz4gJHtkYXRlU3RyfSAtIDxzdHJvbmc+RMOpYnV0IDo8L3N0cm9uZz4gJHt0aW1lfSAtIDxzdHJvbmc+RHVyw6llIDo8L3N0cm9uZz4gJHtmb3JtYXREdXJhdGlvbkRpc3BsYXkoZHVyYXRpb24pfTwvZGl2Pjx0YWJsZSBjbGFzcz0icHJpbnQtdGFibGUiPjx0aGVhZD48dHI+PHRoPk5vbTwvdGg+PHRoPlByw6lub208L3RoPjx0aD5DbGFzc2U8L3RoPjwvdHI+PC90aGVhZD48dGJvZHk+JHtyb3dzfTwvdGJvZHk+PC90YWJsZT48L2Rpdj5gOyAKICAgICAgICAgICAgICAgIH0pOyAKICAgICAgICAgICAgfSk7IAogICAgICAgICAgICBpZihodG1sID09PSAiIikgcmV0dXJuIGFsZXJ0KCJBdWN1bmUgZG9ubsOpZSBwb3VyIGNlIGZpbHRyZSAob3Ugc2FsbGVzIHZpZGVzKS4iKTsgCiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcmludC1hcmVhJykuaW5uZXJIVE1MID0gaHRtbDsgCiAgICAgICAgICAgIHdpbmRvdy5wcmludCgpOyAKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgZnVuY3Rpb24gcHJpbnRQVigpIHsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIGNvbnN0IGV4YW1JZHggPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHYtZXhhbS1zZWxlY3QnKS52YWx1ZTsKICAgICAgICAgICAgICAgIGNvbnN0IHJvb21JZHggPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHYtcm9vbS1zZWxlY3QnKS52YWx1ZTsKICAgICAgICAgICAgICAgIGlmKCFBcHBTdGF0ZS5kaXN0cmlidXRpb25EYXRhIHx8IEFwcFN0YXRlLmRpc3RyaWJ1dGlvbkRhdGEubGVuZ3RoID09PSAwKSB7IGFsZXJ0KCJSw6lwYXJ0aXRpb24gbWFucXVhbnRlLiIpOyByZXR1cm47IH0KICAgICAgICAgICAgICAgIGNvbnN0IGxvZ28gPSBBcHBTdGF0ZS5jb25maWcubG9nb1NyYyB8fCAiIjsKICAgICAgICAgICAgICAgIGxldCBodG1sID0gIiI7CiAgICAgICAgICAgICAgICBsZXQgZXhhbXNUb1ByaW50ID0gKGV4YW1JZHggPT09ICJBTEwiKSA/IEFwcFN0YXRlLmRpc3RyaWJ1dGlvbkRhdGEgOiBbQXBwU3RhdGUuZGlzdHJpYnV0aW9uRGF0YVtleGFtSWR4XV07CiAgICAgICAgICAgICAgICBleGFtc1RvUHJpbnQuZm9yRWFjaChleGFtRGF0YSA9PiB7CiAgICAgICAgICAgICAgICAgICAgaWYoIWV4YW1EYXRhKSByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgY29uc3QgZXhhbUluZm8gPSBBcHBTdGF0ZS5lcHJldXZlc1tleGFtRGF0YS5leGFtSWR4XTsKICAgICAgICAgICAgICAgICAgICBsZXQgcm9vbXNUb1ByaW50ID0gKHJvb21JZHggPT09ICJBTEwiIHx8IGV4YW1JZHggPT09ICJBTEwiKSA/IGV4YW1EYXRhLnJvb21zIDogW2V4YW1EYXRhLnJvb21zW3Jvb21JZHhdXTsKICAgICAgICAgICAgICAgICAgICByb29tc1RvUHJpbnQuZm9yRWFjaChyb29tRGF0YSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHJvb21EYXRhLnN0dWRlbnRzLmxlbmd0aCA9PT0gMCkgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpc1RUID0gcm9vbURhdGEuaXNUVDsKICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHRpbWUgPSBpc1RUID8gZ2V0VmFsdWUoZXhhbUluZm8sIFsnSGV1cmUgZGUgZMOpYnV0IHRpZXJzIHRlbXBzJywgJ0hldXJlIFRUJ10pIDogZ2V0VmFsdWUoZXhhbUluZm8sIFsnSGV1cmUgZGUgZMOpYnV0JywgJ0hldXJlJ10pOwogICAgICAgICAgICAgICAgICAgICAgICBpZighdGltZSkgdGltZSA9IGdldFZhbHVlKGV4YW1JbmZvLCBbJ0hldXJlIGRlIGTDqWJ1dCcsICdIZXVyZSddKTsKICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGR1cmF0aW9uID0gaXNUVCA/IGdldFZhbHVlKGV4YW1JbmZvLCBbJ0R1csOpZSBlbiBtaW51dGUgdGllcnMgdGVtcHMnLCAnRHVyw6llIFRUJ10pIDogZ2V0VmFsdWUoZXhhbUluZm8sIFsnRHVyw6llIGVuIG1pbnV0ZScsICdEdXLDqWUnXSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCFkdXJhdGlvbikgZHVyYXRpb24gPSBnZXRWYWx1ZShleGFtSW5mbywgWydEdXLDqWUgZW4gbWludXRlJywgJ0R1csOpZSddKTsKICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHN1cnZOYW1lcyA9IFtdOwogICAgICAgICAgICAgICAgICAgICAgICBpZihyb29tRGF0YS5zdXJ2ZWlsbGFudHMpIHJvb21EYXRhLnN1cnZlaWxsYW50cy5mb3JFYWNoKHMgPT4gc3Vydk5hbWVzLnB1c2goKHR5cGVvZiBzPT09J29iamVjdCcpP3MubmFtZTpzKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGh0bWwgKz0gYDxkaXYgY2xhc3M9InByaW50LXBhZ2UtbGlzdCIgc3R5bGU9InBhZ2UtYnJlYWstYWZ0ZXI6IGFsd2F5czsiPjxkaXYgY2xhc3M9InByaW50LWhlYWRlciI+PGRpdj4ke0FwcFN0YXRlLmNvbmZpZy5leGFtVGl0bGUgfHwgIkVYQU1FTiJ9PC9kaXY+JHtsb2dvID8gYDxpbWcgc3JjPSIke2xvZ299IiBjbGFzcz0icHJpbnQtbG9nbyI+YCA6ICcnfTwvZGl2PjxkaXYgY2xhc3M9InByaW50LWRvYy10aXRsZSI+UFJPQ8OIUyBWRVJCQUwgREUgU0FMTEU8L2Rpdj48ZGl2IGNsYXNzPSJwcmludC1pbmZvcy1ib3giPjxzdHJvbmc+w4lwcmV1dmUgOjwvc3Ryb25nPiAke2dldFZhbHVlKGV4YW1JbmZvLFsnTWF0acOocmUnLCdFcHJldXZlJ10pfTxicj48c3Ryb25nPkRhdGUgOjwvc3Ryb25nPiAke2Zvcm1hdERhdGUoZ2V0VmFsdWUoZXhhbUluZm8sWydEYXRlJ10pKX08YnI+PHN0cm9uZz5IZXVyZSBkw6lidXQgOjwvc3Ryb25nPiAke3RpbWV9IC0gPHN0cm9uZz5EdXLDqWUgOjwvc3Ryb25nPiAke2Zvcm1hdER1cmF0aW9uRGlzcGxheShkdXJhdGlvbil9PGJyPjxzdHJvbmc+U2FsbGUgOjwvc3Ryb25nPiAke3Jvb21EYXRhLm5hbWV9PGJyPjxzdHJvbmc+Tm9tYnJlIGRlIGNhbmRpZGF0cyA6PC9zdHJvbmc+ICR7cm9vbURhdGEuc3R1ZGVudHMubGVuZ3RofTwvZGl2PjxkaXYgc3R5bGU9ImJvcmRlcjoxcHggc29saWQgIzAwMDsgcGFkZGluZzoxMHB4OyBoZWlnaHQ6MzAwcHg7IG1hcmdpbi1ib3R0b206MjBweDsiPjxzdHJvbmc+T2JzZXJ2YXRpb25zIC8gSW5jaWRlbnRzIDo8L3N0cm9uZz48L2Rpdj48ZGl2IHN0eWxlPSJib3JkZXI6MXB4IHNvbGlkICMwMDA7IHBhZGRpbmc6MTBweDsgaGVpZ2h0OjE1MHB4OyBtYXJnaW4tYm90dG9tOjIwcHg7Ij48c3Ryb25nPkFic2VudHMgKE5vbXMgZXQgUHLDqW5vbXMpIDo8L3N0cm9uZz48L2Rpdj48ZGl2IGNsYXNzPSJwdi1zaWduYXR1cmVzIj48ZGl2IGNsYXNzPSJwdi1ib3giPjxzdHJvbmc+U2lnbmF0dXJlIFN1cnZlaWxsYW50IDEgOjwvc3Ryb25nPjwvZGl2PjxkaXYgY2xhc3M9InB2LWJveCI+PHN0cm9uZz5TaWduYXR1cmUgU3VydmVpbGxhbnQgMiA6PC9zdHJvbmc+PC9kaXY+PC9kaXY+PGRpdiBjbGFzcz0iY29udm9jLWZvb3RlciIgc3R5bGU9Imp1c3RpZnktY29udGVudDogZmxleC1lbmQ7IG1hcmdpbi10b3A6NTBweDsiPjxkaXYgY2xhc3M9ImNvbnZvYy1zaWduIiBzdHlsZT0idGV4dC1hbGlnbjpyaWdodDsiPjxkaXY+RmFpdCDDoCAke0FwcFN0YXRlLmNvbnZvY1RleHQuY2l0eSB8fCAnVmlsbGUnfSwgbGUgJHtuZXcgRGF0ZSgpLnRvTG9jYWxlRGF0ZVN0cmluZygnZnItRlInKX08L2Rpdj48ZGl2IHN0eWxlPSJtYXJnaW4tdG9wOjEwcHg7IGZvbnQtd2VpZ2h0OmJvbGQ7Ij4ke0FwcFN0YXRlLmNvbmZpZy5uYW1lfTwvZGl2PjwvZGl2PjwvZGl2PjwvZGl2PmA7CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcmludC1hcmVhJykuaW5uZXJIVE1MID0gaHRtbDsgd2luZG93LnByaW50KCk7CiAgICAgICAgICAgIH0gY2F0Y2goZSl7IGNvbnNvbGUuZXJyb3IoZSk7IGFsZXJ0KCJFcnJldXIgaW1wcmVzc2lvbiBQViIpOyB9CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBwcmludFBvY2hldHRlcygpIHsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIGNvbnN0IGV4YW1JZHggPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHYtZXhhbS1zZWxlY3QnKS52YWx1ZTsKICAgICAgICAgICAgICAgIGNvbnN0IHJvb21JZHggPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHYtcm9vbS1zZWxlY3QnKS52YWx1ZTsKICAgICAgICAgICAgICAgIGlmKCFBcHBTdGF0ZS5kaXN0cmlidXRpb25EYXRhIHx8IEFwcFN0YXRlLmRpc3RyaWJ1dGlvbkRhdGEubGVuZ3RoID09PSAwKSB7IGFsZXJ0KCJSw6lwYXJ0aXRpb24gbWFucXVhbnRlLiIpOyByZXR1cm47IH0KICAgICAgICAgICAgICAgIGNvbnN0IGxvZ28gPSBBcHBTdGF0ZS5jb25maWcubG9nb1NyYyB8fCAiIjsKICAgICAgICAgICAgICAgIGNvbnN0IGNvbnNpZ25lcyA9IEFwcFN0YXRlLnBvY2hldHRlVGV4dC5zdXJ2IHx8ICIiOwogICAgICAgICAgICAgICAgbGV0IGh0bWwgPSAiIjsKICAgICAgICAgICAgICAgIGxldCBleGFtc1RvUHJpbnQgPSAoZXhhbUlkeCA9PT0gIkFMTCIpID8gQXBwU3RhdGUuZGlzdHJpYnV0aW9uRGF0YSA6IFtBcHBTdGF0ZS5kaXN0cmlidXRpb25EYXRhW2V4YW1JZHhdXTsKICAgICAgICAgICAgICAgIGV4YW1zVG9QcmludC5mb3JFYWNoKGV4YW1EYXRhID0+IHsKICAgICAgICAgICAgICAgICAgICBpZighZXhhbURhdGEpIHJldHVybjsKICAgICAgICAgICAgICAgICAgICBjb25zdCBleGFtSW5mbyA9IEFwcFN0YXRlLmVwcmV1dmVzW2V4YW1EYXRhLmV4YW1JZHhdOwogICAgICAgICAgICAgICAgICAgIGxldCByb29tc1RvUHJpbnQgPSAocm9vbUlkeCA9PT0gIkFMTCIgfHwgZXhhbUlkeCA9PT0gIkFMTCIpID8gZXhhbURhdGEucm9vbXMgOiBbZXhhbURhdGEucm9vbXNbcm9vbUlkeF1dOwogICAgICAgICAgICAgICAgICAgIHJvb21zVG9QcmludC5mb3JFYWNoKHJvb21EYXRhID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYocm9vbURhdGEuc3R1ZGVudHMubGVuZ3RoID09PSAwKSByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGlzVFQgPSByb29tRGF0YS5pc1RUOwogICAgICAgICAgICAgICAgICAgICAgICBsZXQgdGltZSA9IGlzVFQgPyBnZXRWYWx1ZShleGFtSW5mbywgWydIZXVyZSBkZSBkw6lidXQgdGllcnMgdGVtcHMnLCAnSGV1cmUgVFQnXSkgOiBnZXRWYWx1ZShleGFtSW5mbywgWydIZXVyZSBkZSBkw6lidXQnLCAnSGV1cmUnXSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCF0aW1lKSB0aW1lID0gZ2V0VmFsdWUoZXhhbUluZm8sIFsnSGV1cmUgZGUgZMOpYnV0JywgJ0hldXJlJ10pOwogICAgICAgICAgICAgICAgICAgICAgICBsZXQgZHVyYXRpb24gPSBpc1RUID8gZ2V0VmFsdWUoZXhhbUluZm8sIFsnRHVyw6llIGVuIG1pbnV0ZSB0aWVycyB0ZW1wcycsICdEdXLDqWUgVFQnXSkgOiBnZXRWYWx1ZShleGFtSW5mbywgWydEdXLDqWUgZW4gbWludXRlJywgJ0R1csOpZSddKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoIWR1cmF0aW9uKSBkdXJhdGlvbiA9IGdldFZhbHVlKGV4YW1JbmZvLCBbJ0R1csOpZSBlbiBtaW51dGUnLCAnRHVyw6llJ10pOwogICAgICAgICAgICAgICAgICAgICAgICBsZXQgc3Vydk5hbWVzID0gW107CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHJvb21EYXRhLnN1cnZlaWxsYW50cykgcm9vbURhdGEuc3VydmVpbGxhbnRzLmZvckVhY2gocyA9PiBzdXJ2TmFtZXMucHVzaCgodHlwZW9mIHM9PT0nb2JqZWN0Jyk/cy5uYW1lOnMpKTsKICAgICAgICAgICAgICAgICAgICAgICAgaHRtbCArPSBgPGRpdiBjbGFzcz0icHJpbnQtcGFnZS1jb252b2MiPjxkaXYgY2xhc3M9InByaW50LWhlYWRlciI+PGRpdiBzdHlsZT0iZm9udC1zaXplOjEuNXJlbTsgZm9udC13ZWlnaHQ6Ym9sZDsiPlBPQ0hFVFRFIFNVSkVUPC9kaXY+JHtsb2dvID8gYDxpbWcgc3JjPSIke2xvZ299IiBjbGFzcz0icHJpbnQtbG9nbyI+YCA6ICcnfTwvZGl2PjxkaXYgc3R5bGU9ImJvcmRlcjo0cHggc29saWQgIzAwMDsgcGFkZGluZzoyMHB4OyB0ZXh0LWFsaWduOmNlbnRlcjsgbWFyZ2luOjMwcHggMDsiPjxoMSBzdHlsZT0iZm9udC1zaXplOjNyZW07IG1hcmdpbjowOyI+JHtyb29tRGF0YS5uYW1lfTwvaDE+PGgyIHN0eWxlPSJmb250LXNpemU6MnJlbTsgbWFyZ2luOjEwcHggMDsiPiR7Z2V0VmFsdWUoZXhhbUluZm8sWydNYXRpw6hyZScsJ0VwcmV1dmUnXSl9PC9oMj48aDMgc3R5bGU9Im1hcmdpbjowOyI+JHtyb29tRGF0YS5zdHVkZW50cy5sZW5ndGh9IENvcGllczwvaDM+PC9kaXY+PGRpdiBjbGFzcz0icHJpbnQtaW5mb3MtYm94IiBzdHlsZT0iZm9udC1zaXplOjEuMnJlbTsiPjxzdHJvbmc+RGF0ZSA6PC9zdHJvbmc+ICR7Zm9ybWF0RGF0ZShnZXRWYWx1ZShleGFtSW5mbyxbJ0RhdGUnXSkpfTxicj48c3Ryb25nPkhvcmFpcmUgOjwvc3Ryb25nPiAke3RpbWV9PGJyPjxzdHJvbmc+RHVyw6llIDo8L3N0cm9uZz4gJHtmb3JtYXREdXJhdGlvbkRpc3BsYXkoZHVyYXRpb24pfTxicj48c3Ryb25nPlN1cnZlaWxsYW50cyA6PC9zdHJvbmc+ICR7c3Vydk5hbWVzLmpvaW4oJyAvICcpfTwvZGl2PjxkaXYgc3R5bGU9Im1hcmdpbi10b3A6MjBweDsgYm9yZGVyOjFweCBzb2xpZCAjMDAwOyBwYWRkaW5nOjE1cHg7IGZsZXg6MTsiPjxzdHJvbmc+Q09OU0lHTkVTIEFVWCBTVVJWRUlMTEFOVFMgOjwvc3Ryb25nPjxicj48YnI+PGRpdiBzdHlsZT0id2hpdGUtc3BhY2U6IHByZS13cmFwOyI+JHtjb25zaWduZXN9PC9kaXY+PC9kaXY+PGRpdiBjbGFzcz0iY29udm9jLWZvb3RlciIgc3R5bGU9Imp1c3RpZnktY29udGVudDogZmxleC1lbmQ7Ij48ZGl2IGNsYXNzPSJjb252b2Mtc2lnbiIgc3R5bGU9InRleHQtYWxpZ246cmlnaHQ7Ij48ZGl2PkZhaXQgw6AgJHtBcHBTdGF0ZS5jb252b2NUZXh0LmNpdHkgfHwgJ1ZpbGxlJ30sIGxlICR7bmV3IERhdGUoKS50b0xvY2FsZURhdGVTdHJpbmcoJ2ZyLUZSJyl9PC9kaXY+PGRpdiBzdHlsZT0ibWFyZ2luLXRvcDoxMHB4OyBmb250LXdlaWdodDpib2xkOyI+JHtBcHBTdGF0ZS5jb25maWcubmFtZX08L2Rpdj48L2Rpdj48L2Rpdj48L2Rpdj5gOwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJpbnQtYXJlYScpLmlubmVySFRNTCA9IGh0bWw7IHdpbmRvdy5wcmludCgpOwogICAgICAgICAgICB9IGNhdGNoKGUpeyBjb25zb2xlLmVycm9yKGUpOyBhbGVydCgiRXJyZXVyIGltcHJlc3Npb24gUG9jaGV0dGUiKTsgfQogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gZm9ybWF0RGF0ZShkKSB7IGlmKCFkKSByZXR1cm4gIiI7IGlmKCFpc05hTihkKSAmJiBkID4gMTAwMCkgeyBjb25zdCBkYXRlT2JqID0gbmV3IERhdGUoKGQgLSAoMjU1NjcgKyAyKSkqODY0MDAqMTAwMCk7IHJldHVybiBkYXRlT2JqLnRvTG9jYWxlRGF0ZVN0cmluZygnZnItRlInKTsgfSByZXR1cm4gZDsgfQogICAgICAgIGZ1bmN0aW9uIGFwcGx5TGF5b3V0KHR5cGUpeyBpZih0eXBlID09PSAnc3RkJykgeyBjb25zdCBzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbnZvYy10ZW1wbGF0ZScpOyBzLnN0eWxlLnBhZGRpbmdUb3AgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2V0cy1zdGQtdG9wJykudmFsdWUgKyAnbW0nOyBzLnN0eWxlLnBhZGRpbmdCb3R0b20gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2V0cy1zdGQtYm90JykudmFsdWUgKyAnbW0nOyBzLnN0eWxlLmZvbnRTaXplID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NldHMtc3RkLWZvbnQnKS52YWx1ZSArICdweCc7IH0gaWYodHlwZSA9PT0gJ3N1cnYnKSB7IGNvbnN0IHMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29udm9jLXN1cnYtdGVtcGxhdGUnKTsgcy5zdHlsZS5wYWRkaW5nVG9wID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NldHMtc3Vydi10b3AnKS52YWx1ZSArICdtbSc7IHMuc3R5bGUucGFkZGluZ0JvdHRvbSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZXRzLXN1cnYtYm90JykudmFsdWUgKyAnbW0nOyBzLnN0eWxlLmZvbnRTaXplID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NldHMtc3Vydi1mb250JykudmFsdWUgKyAncHgnOyB9IH0KCiAgICAgICAgZnVuY3Rpb24gdXBkYXRlUmVhbFRpbWVDb3VudGVycygpIHsKICAgICAgICAgICAgY29uc3QgY2FyZHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcucm9vbS1jYXJkJyk7CiAgICAgICAgICAgIGNhcmRzLmZvckVhY2goY2FyZCA9PiB7CiAgICAgICAgICAgICAgICBjb25zdCBib2R5ID0gY2FyZC5xdWVyeVNlbGVjdG9yKCcucm9vbS1ib2R5Jyk7CiAgICAgICAgICAgICAgICBjb25zdCBoZWFkZXJDb3VudFNwYW4gPSBjYXJkLnF1ZXJ5U2VsZWN0b3IoJy5yb29tLWhlYWRlciA+IGRpdiA+IHNwYW4nKTsKICAgICAgICAgICAgICAgIGlmKGJvZHkgJiYgaGVhZGVyQ291bnRTcGFuKSB7CiAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvdW50ID0gYm9keS5jaGlsZHJlbi5sZW5ndGg7CiAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNhcCA9IGJvZHkuZ2V0QXR0cmlidXRlKCdkYXRhLWNhcGFjaXR5Jyk7CiAgICAgICAgICAgICAgICAgICAgIGhlYWRlckNvdW50U3Bhbi5pbm5lclRleHQgPSBgJHtjb3VudH0vJHtjYXB9YDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgfQoKICAgICAgICAvLyBJTklUCiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2N1cnJlbnQtZGF0ZScpLmlubmVyVGV4dCA9IG5ldyBEYXRlKCkudG9Mb2NhbGVEYXRlU3RyaW5nKCdmci1GUicpOwogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjdXJyZW50LWRhdGUtc3VydicpLmlubmVyVGV4dCA9IG5ldyBEYXRlKCkudG9Mb2NhbGVEYXRlU3RyaW5nKCdmci1GUicpOwogICAgICAgIGNvbnN0IGRlZmF1bHRDb25zaWduZXMgPSBgLUluc3RhbGxlciBsZXMgw6lsw6h2ZXMgZGFucyBsZSBzaWxlbmNlXG4tRmFpcmUgw6l0ZWluZHJlIGxlcyB0w6lsw6lwaG9uZXMgZXQgbGVzIG1vbnRyZXMgY29ubmVjdMOpZXMgKGxlcyBmYWlyZSByYW5nZXIgZGFucyBsZXMgc2Fjcylcbi1GYWlyZSByYW5nZXIgbGVzIHNhY3Mgc291cyBsZSB0YWJsZWF1XG4tVsOpcmlmaWVyIGxlcyBwacOoY2VzIGQnaWRlbnRpdMOpXG4tQWZmaWNoZXIgbGVzIGhvcmFpcmVzIGF1IHRhYmxlYXVcbi1EaXN0cmlidWVyIGxlcyBjb3BpZXMgcmV0b3VybsOpZXNcbi1BIGxhIGZpbiBkZSBsJ8OpcHJldXZlLCBsZXMgw6lsw6h2ZXMgcmVzdGVudCDDoCBsZXVyIHBsYWNlXG4tU2lnbmF0dXJlIMOpbWFyZ2VtZW50IGV0IHJhbmdlbWVudCBkZXMgY29waWVzIHBhciBvcmRyZSBhbHBoYWLDqXRpcXVlXG4tQ29tcGzDqXRlciBsZSBwcm9jw6hzIHZlcmJhbFxuLUTDqXBvc2VyIHRvdXMgbGVzIMOpbMOpbWVudHMgYXUgc2VjcsOpdGFyaWF0IGQnZXhhbWVuYDsKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndHh0LXBvY2hldHRlLXN1cnYnKS52YWx1ZSA9IGRlZmF1bHRDb25zaWduZXM7CiAgICAgICAgQXBwU3RhdGUucG9jaGV0dGVUZXh0LnN1cnYgPSBkZWZhdWx0Q29uc2lnbmVzOwogICAgPC9zY3JpcHQ+Cgo8c2NyaXB0PgooZnVuY3Rpb24oKXsKICAgIGZ1bmN0aW9uIHBhdGNoVUkoKSB7CiAgICAgICAgLy8gSGlkZSBuYW1lLCByb2xlIGZvcm0tZ3JvdXBzCiAgICAgICAgdmFyIG5hbWVFbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb25maWdOYW1lJyk7CiAgICAgICAgdmFyIHJvbGVFbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb25maWdSb2xlJyk7CiAgICAgICAgaWYgKG5hbWVFbCkgeyB2YXIgZmcgPSBuYW1lRWwuY2xvc2VzdCgnLmZvcm0tZ3JvdXAnKTsgaWYoZmcpIGZnLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7IH0KICAgICAgICBpZiAocm9sZUVsKSB7IHZhciBmZyA9IHJvbGVFbC5jbG9zZXN0KCcuZm9ybS1ncm91cCcpOyBpZihmZykgZmcuc3R5bGUuZGlzcGxheSA9ICdub25lJzsgfQogICAgICAgIC8vIEhpZGUgc2Vjb25kIGNvbmZpZy1jb2wgKGxvZ28gKyBzaWduYXR1cmUpCiAgICAgICAgdmFyIGNvbHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcjdmlldzEgLmNvbmZpZy1jb2wnKTsKICAgICAgICBpZiAoY29scy5sZW5ndGggPj0gMikgY29sc1sxXS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOwogICAgICAgIC8vIEFkZCBpbmZvIGJhbm5lciBhZnRlciBoZWFkZXIKICAgICAgICB2YXIgaGVhZGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3ZpZXcxIC5oZWFkZXItcGFuZWwnKTsKICAgICAgICBpZiAoaGVhZGVyICYmICFkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGlsb3RlLW5vdGljZScpKSB7CiAgICAgICAgICAgIHZhciBkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgICAgICAgIGQuaWQgPSAncGlsb3RlLW5vdGljZSc7CiAgICAgICAgICAgIGQuc3R5bGUuY3NzVGV4dCA9ICdiYWNrZ3JvdW5kOiNlYWY0ZmU7Ym9yZGVyOjFweCBzb2xpZCAjMzQ5OGRiO2JvcmRlci1yYWRpdXM6OHB4O3BhZGRpbmc6MTBweCAxNnB4O21hcmdpbi1ib3R0b206MTVweDtmb250LXNpemU6MC44NXJlbTtjb2xvcjojMmMzZTUwO2Rpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXI7Z2FwOjEwcHg7JzsKICAgICAgICAgICAgZC5pbm5lckhUTUwgPSAnPGkgY2xhc3M9ImZhcyBmYS1pbmZvLWNpcmNsZSIgc3R5bGU9ImNvbG9yOiMzNDk4ZGI7Zm9udC1zaXplOjEuMXJlbTsiPjwvaT4gTm9tLCBmb25jdGlvbiwgbG9nbyBldCBzaWduYXR1cmUgc29udCBkYW5zIGxlIG1lbnUgPHN0cm9uZz5QYXJhbcOodHJlcyDimpk8L3N0cm9uZz4gZGUgbGEgYmFycmUgcHJpbmNpcGFsZS4nOwogICAgICAgICAgICBoZWFkZXIuYWZ0ZXIoZCk7CiAgICAgICAgfQogICAgfQogICAgc2V0VGltZW91dChwYXRjaFVJLCAxNTApOwogICAgc2V0VGltZW91dChwYXRjaFVJLCA2MDApOwoKICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgZnVuY3Rpb24oZSkgewogICAgICAgIGlmICghZS5kYXRhIHx8IGUuZGF0YS50eXBlICE9PSAncGlsb3RlLXNldHRpbmdzJykgcmV0dXJuOwogICAgICAgIHZhciBzID0gZS5kYXRhLmRhdGE7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgaWYgKHR5cGVvZiBBcHBTdGF0ZSAhPT0gJ3VuZGVmaW5lZCcpIHsKICAgICAgICAgICAgICAgIGlmIChzLm5hbWUpIHsgQXBwU3RhdGUuY29uZmlnLm5hbWUgPSBzLm5hbWU7IHZhciBlbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb25maWdOYW1lJyk7IGlmKGVsKSBlbC52YWx1ZSA9IHMubmFtZTsgfQogICAgICAgICAgICAgICAgaWYgKHMucm9sZSkgeyBBcHBTdGF0ZS5jb25maWcucm9sZSA9IHMucm9sZTsgdmFyIGVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbmZpZ1JvbGUnKTsgaWYoZWwpIGVsLnZhbHVlID0gcy5yb2xlOyB9CiAgICAgICAgICAgICAgICBpZiAocy5sb2dvU3JjKSB7IEFwcFN0YXRlLmNvbmZpZy5sb2dvU3JjID0gcy5sb2dvU3JjOyB2YXIgZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbG9nb1ByZXZpZXcnKTsgaWYoZWwpe2VsLnNyYz1zLmxvZ29TcmM7ZWwuc3R5bGUuZGlzcGxheT0nYmxvY2snO30gfQogICAgICAgICAgICAgICAgaWYgKHMuc2lnblNyYykgeyBBcHBTdGF0ZS5jb25maWcuc2lnblNyYyA9IHMuc2lnblNyYzsgdmFyIGVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NpZ25QcmV2aWV3Jyk7IGlmKGVsKXtlbC5zcmM9cy5zaWduU3JjO2VsLnN0eWxlLmRpc3BsYXk9J2Jsb2NrJzt9IH0KICAgICAgICAgICAgfQogICAgICAgIAogICAgICAgICAgICAgICAgaWYgKHMudGVhY2hlcnMgJiYgcy50ZWFjaGVycy5sZW5ndGgpIHsKICAgICAgICAgICAgICAgICAgICBBcHBTdGF0ZS5zdXJ2ZWlsbGFudHMgPSBzLnRlYWNoZXJzOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGNhdGNoKGVycikge30KICAgIH0pOwogICAgd2luZG93LnBhcmVudC5wb3N0TWVzc2FnZSh7IHR5cGU6ICdwaWxvdGUtbW9kdWxlLXJlYWR5JywgbW9kdWxlOiAnZXhhbScgfSwgJyonKTsKfSkoKTsKPC9zY3JpcHQ+CgoKPHNjcmlwdD4KZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGZ1bmN0aW9uKGUpIHsKICAgIGlmICghZS5jdHJsS2V5IHx8IGUuc2hpZnRLZXkgfHwgZS5hbHRLZXkgfHwgZS5tZXRhS2V5KSByZXR1cm47CiAgICB2YXIga2V5ID0gZS5rZXkudG9Mb3dlckNhc2UoKTsKICAgIGlmIChbJ3AnLCdlJywnbycsJ2EnLCdkJ10uaW5kZXhPZihrZXkpID49IDApIHsKICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgd2luZG93LnBhcmVudC5wb3N0TWVzc2FnZSh7dHlwZToncGlsb3RlLXNob3J0Y3V0Jywga2V5OmtleX0sICcqJyk7CiAgICB9Cn0pOwo8L3NjcmlwdD4KPC9ib2R5Pgo8L2h0bWw+","oral":"PCFET0NUWVBFIGh0bWw+CjxodG1sIGxhbmc9ImZyIj4KPGhlYWQ+CiAgICA8bWV0YSBjaGFyc2V0PSJVVEYtOCI+CiAgICA8bWV0YSBuYW1lPSJ2aWV3cG9ydCIgY29udGVudD0id2lkdGg9ZGV2aWNlLXdpZHRoLCBpbml0aWFsLXNjYWxlPTEuMCI+CiAgICA8dGl0bGU+T1JBTCBQSUxPVEUgLSBHZXN0aW9uIE9yYXV4ICYgw4ljcml0czwvdGl0bGU+CiAgICAKICAgIDxzY3JpcHQgc3JjPSJodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy94bHN4LzAuMTguNS94bHN4LmZ1bGwubWluLmpzIj48L3NjcmlwdD4KICAgIDxzY3JpcHQgc3JjPSJodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9mb250LWF3ZXNvbWUvNi40LjAvY3NzL2FsbC5taW4uY3NzIj48L3NjcmlwdD4KICAgIAogICAgPCEtLSBBcHRvcyBmb250IChuYXRpdmUpIC0tPgoKICAgIDxzdHlsZT4KICAgICAgICA6cm9vdCB7CiAgICAgICAgICAgIC0tcHJpbWFyeS1jb2xvcjogIzI5ODBiOTsgLyogQmxldSBwbHVzIGluc3RpdHV0aW9ubmVsIHBvdXIgT3JhdXggKi8KICAgICAgICAgICAgLS1zZWNvbmRhcnktY29sb3I6ICMzNDk4ZGI7CiAgICAgICAgICAgIC0tYWNjZW50LWNvbG9yOiAjZTY3ZTIyOwogICAgICAgICAgICAtLWJnLWNvbG9yOiAjZjRmNmY4OwogICAgICAgICAgICAtLXRleHQtY29sb3I6ICMyYzNlNTA7CiAgICAgICAgICAgIC0tc2lkZWJhci13aWR0aDogMjgwcHg7CiAgICAgICAgICAgIC0tdG9vbGJhci1oZWlnaHQ6IDYwcHg7CiAgICAgICAgfQoKICAgICAgICBib2R5IHsgZm9udC1mYW1pbHk6ICdBcHRvcycsICdDYWxpYnJpJywgJ1RyZWJ1Y2hldCBNUycsIEFyaWFsLCBzYW5zLXNlcmlmOyBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1iZy1jb2xvcik7IG1hcmdpbjogMDsgcGFkZGluZzogMDsgZGlzcGxheTogZmxleDsgaGVpZ2h0OiAxMDB2aDsgY29sb3I6IHZhcigtLXRleHQtY29sb3IpOyBvdmVyZmxvdzogaGlkZGVuOyB9CgogICAgICAgIC8qIFNJREVCQVIgKi8KICAgICAgICAuc2lkZWJhciB7IHdpZHRoOiB2YXIoLS1zaWRlYmFyLXdpZHRoKTsgYmFja2dyb3VuZC1jb2xvcjogIzJjM2U1MDsgY29sb3I6IHdoaXRlOyBkaXNwbGF5OiBmbGV4OyBmbGV4LWRpcmVjdGlvbjogY29sdW1uOyBib3gtc2hhZG93OiAycHggMCA1cHggcmdiYSgwLDAsMCwwLjEpOyBmbGV4LXNocmluazogMDsgei1pbmRleDogMTAwOyB9CiAgICAgICAgLmJyYW5kIHsgcGFkZGluZzogMTVweDsgdGV4dC1hbGlnbjogY2VudGVyOyBiYWNrZ3JvdW5kLWNvbG9yOiAjMWEyNTJmOyBib3JkZXItYm90dG9tOiAzcHggc29saWQgdmFyKC0tcHJpbWFyeS1jb2xvcik7IH0KICAgICAgICAuYnJhbmQgaDEgeyBtYXJnaW46IDA7IGZvbnQtc2l6ZTogMS4zcmVtOyBmb250LXdlaWdodDogOTAwOyBsZXR0ZXItc3BhY2luZzogMXB4OyB9CiAgICAgICAgLnN0ZXBzLW5hdiB7IGZsZXg6IDE7IHBhZGRpbmc6IDVweCAwOyBvdmVyZmxvdy15OiBhdXRvOyB9CiAgICAgICAgLnN0ZXAtYnRuIHsgZGlzcGxheTogZmxleDsgYWxpZ24taXRlbXM6IGNlbnRlcjsgcGFkZGluZzogMTBweCAxNXB4OyBjb2xvcjogI2VjZjBmMTsgdGV4dC1kZWNvcmF0aW9uOiBub25lOyB0cmFuc2l0aW9uOiBhbGwgMC4yczsgYm9yZGVyLWxlZnQ6IDRweCBzb2xpZCB0cmFuc3BhcmVudDsgY3Vyc29yOiBwb2ludGVyOyBmb250LXNpemU6IDAuODVyZW07IGJvcmRlci1ib3R0b206IDFweCBzb2xpZCByZ2JhKDI1NSwyNTUsMjU1LDAuMDMpOyB9CiAgICAgICAgLnN0ZXAtYnRuOmhvdmVyLCAuc3RlcC1idG4uYWN0aXZlIHsgYmFja2dyb3VuZC1jb2xvcjogIzM0NDk1ZTsgYm9yZGVyLWxlZnQtY29sb3I6IHZhcigtLXByaW1hcnktY29sb3IpOyBwYWRkaW5nLWxlZnQ6IDIwcHg7IH0KICAgICAgICAuc3RlcC1idG4gaSB7IG1hcmdpbi1yaWdodDogMTJweDsgd2lkdGg6IDE4cHg7IHRleHQtYWxpZ246IGNlbnRlcjsgY29sb3I6ICNiZGMzYzc7IH0KICAgICAgICAuc3RlcC1idG4uYWN0aXZlIGkgeyBjb2xvcjogdmFyKC0tcHJpbWFyeS1jb2xvcik7IH0KICAgICAgICAuZm9vdGVyLWluZm8geyBwYWRkaW5nOiAxMHB4OyBmb250LXNpemU6IDAuNjVyZW07IHRleHQtYWxpZ246IGNlbnRlcjsgb3BhY2l0eTogMC41OyBiYWNrZ3JvdW5kOiAjMWEyNTJmOyBib3JkZXItdG9wOiAxcHggc29saWQgIzM0NDk1ZTsgfQoKICAgICAgICAvKiBNQUlOICovCiAgICAgICAgLm1haW4td3JhcHBlciB7IGZsZXg6IDE7IGRpc3BsYXk6IGZsZXg7IGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47IG92ZXJmbG93OiBoaWRkZW47IH0KICAgICAgICAuZ2xvYmFsLXRvb2xiYXIgeyBoZWlnaHQ6IHZhcigtLXRvb2xiYXItaGVpZ2h0KTsgYmFja2dyb3VuZDogd2hpdGU7IGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjZGRkOyBkaXNwbGF5OiBmbGV4OyBhbGlnbi1pdGVtczogY2VudGVyOyBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47IHBhZGRpbmc6IDAgMzBweDsgYm94LXNoYWRvdzogMCAycHggNXB4IHJnYmEoMCwwLDAsMC4wNSk7IHotaW5kZXg6IDUwOyB9CiAgICAgICAgLnRvb2xiYXItdGl0bGUgeyBmb250LXdlaWdodDogYm9sZDsgZm9udC1zaXplOiAxLjFyZW07IGNvbG9yOiAjN2Y4YzhkOyBkaXNwbGF5OiBmbGV4OyBhbGlnbi1pdGVtczogY2VudGVyOyBnYXA6IDEwcHg7IH0KICAgICAgICAudG9vbGJhci1hY3Rpb25zIHsgZGlzcGxheTogZmxleDsgZ2FwOiAxMHB4OyB9CiAgICAgICAgLmJ0bi10b29sYmFyIHsgcGFkZGluZzogOHB4IDE1cHg7IGJvcmRlcjogbm9uZTsgYm9yZGVyLXJhZGl1czogNHB4OyBjdXJzb3I6IHBvaW50ZXI7IGZvbnQtc2l6ZTogMC45cmVtOyBmb250LXdlaWdodDogNTAwOyBkaXNwbGF5OiBmbGV4OyBhbGlnbi1pdGVtczogY2VudGVyOyBnYXA6IDhweDsgdHJhbnNpdGlvbjogMC4yczsgfQogICAgICAgIC5idG4tc2F2ZS1wcm9qZWN0IHsgYmFja2dyb3VuZC1jb2xvcjogIzI3YWU2MDsgY29sb3I6IHdoaXRlOyB9IAogICAgICAgIC5idG4tbG9hZC1wcm9qZWN0IHsgYmFja2dyb3VuZC1jb2xvcjogIzM0NDk1ZTsgY29sb3I6IHdoaXRlOyB9CiAgICAgICAgLm1haW4tY29udGVudCB7IGZsZXg6IDE7IG92ZXJmbG93LXk6IGF1dG87IHBhZGRpbmc6IDIwcHg7IGJhY2tncm91bmQtY29sb3I6IHZhcigtLWJnLWNvbG9yKTsgfQoKICAgICAgICAvKiBVSSBFTEVNRU5UUyAqLwogICAgICAgIC5oZWFkZXItcGFuZWwgeyBkaXNwbGF5OiBmbGV4OyBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47IGFsaWduLWl0ZW1zOiBjZW50ZXI7IG1hcmdpbi1ib3R0b206IDE1cHg7IGJvcmRlci1ib3R0b206IDJweCBzb2xpZCAjZTBlMGUwOyBwYWRkaW5nLWJvdHRvbTogMTBweDsgfQogICAgICAgIC5oZWFkZXItcGFuZWwgaDIgeyBtYXJnaW46IDA7IGZvbnQtc2l6ZTogMS42cmVtOyBjb2xvcjogdmFyKC0tcHJpbWFyeS1jb2xvcik7IH0KICAgICAgICAuc2VjdGlvbi12aWV3IHsgZGlzcGxheTogbm9uZTsgYW5pbWF0aW9uOiBmYWRlSW4gMC4zcyBlYXNlOyB9CiAgICAgICAgLnNlY3Rpb24tdmlldy5hY3RpdmUgeyBkaXNwbGF5OiBibG9jazsgfQogICAgICAgIC5jYXJkIHsgYmFja2dyb3VuZDogd2hpdGU7IGJvcmRlci1yYWRpdXM6IDhweDsgcGFkZGluZzogMjBweDsgYm94LXNoYWRvdzogMCAycHggMTBweCByZ2JhKDAsMCwwLDAuMDUpOyBtYXJnaW4tYm90dG9tOiAyMHB4OyB9CgogICAgICAgIC8qIElNUE9SVCAqLwogICAgICAgIC5pbXBvcnQtZ3JpZCB7IGRpc3BsYXk6IGdyaWQ7IGdyaWQtdGVtcGxhdGUtY29sdW1uczogcmVwZWF0KDIsIDFmcik7IGdhcDogMjBweDsgfQogICAgICAgIC5maWxlLWRyb3Atem9uZSB7IGJvcmRlcjogMnB4IGRhc2hlZCAjYmRjM2M3OyBib3JkZXItcmFkaXVzOiA4cHg7IHBhZGRpbmc6IDIwcHg7IHRleHQtYWxpZ246IGNlbnRlcjsgdHJhbnNpdGlvbjogMC4zczsgcG9zaXRpb246IHJlbGF0aXZlOyBiYWNrZ3JvdW5kOiAjZmZmOyBtaW4taGVpZ2h0OiAxMjBweDsgZGlzcGxheTogZmxleDsgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsganVzdGlmeS1jb250ZW50OiBjZW50ZXI7IGFsaWduLWl0ZW1zOiBjZW50ZXI7IH0KICAgICAgICAuZmlsZS1kcm9wLXpvbmU6aG92ZXIgeyBib3JkZXItY29sb3I6IHZhcigtLXByaW1hcnktY29sb3IpOyBiYWNrZ3JvdW5kOiAjZWJmNWZiOyB9CiAgICAgICAgLmZpbGUtZHJvcC16b25lLmxvYWRlZCB7IGJvcmRlci1jb2xvcjogIzI3YWU2MDsgYmFja2dyb3VuZDogI2YwZmZmNDsgfQogICAgICAgIC5maWxlLWRyb3Atem9uZSBpbnB1dFt0eXBlPWZpbGVdIHsgcG9zaXRpb246IGFic29sdXRlOyB0b3A6IDA7IGxlZnQ6IDA7IHdpZHRoOiAxMDAlOyBoZWlnaHQ6IDEwMCU7IG9wYWNpdHk6IDA7IGN1cnNvcjogcG9pbnRlcjsgfQogICAgICAgIC5zdGF0dXMtYmFkZ2UgeyBkaXNwbGF5OiBub25lOyBtYXJnaW4tdG9wOiAxMHB4OyBmb250LXdlaWdodDogYm9sZDsgZm9udC1zaXplOiAwLjlyZW07IHBhZGRpbmc6IDVweCAxMHB4OyBib3JkZXItcmFkaXVzOiAxNXB4OyB9CiAgICAgICAgLnN0YXR1cy1vayB7IGJhY2tncm91bmQ6ICMyN2FlNjA7IGNvbG9yOiB3aGl0ZTsgfQoKICAgICAgICAvKiBDT05GSUcgKi8KICAgICAgICAuY29uZmlnLWNvbnRhaW5lciB7IGRpc3BsYXk6IGZsZXg7IGdhcDogNDBweDsgfQogICAgICAgIC5jb25maWctY29sIHsgZmxleDogMTsgYmFja2dyb3VuZDogd2hpdGU7IHBhZGRpbmc6IDMwcHg7IGJvcmRlci1yYWRpdXM6IDhweDsgYm94LXNoYWRvdzogMCAycHggMTBweCByZ2JhKDAsMCwwLDAuMDUpOyB9CiAgICAgICAgLmZvcm0tZ3JvdXAgeyBtYXJnaW4tYm90dG9tOiAyMHB4OyB9CiAgICAgICAgLmZvcm0tZ3JvdXAgbGFiZWwgeyBkaXNwbGF5OiBibG9jazsgbWFyZ2luLWJvdHRvbTogOHB4OyBmb250LXdlaWdodDogYm9sZDsgY29sb3I6ICMzNDQ5NWU7IGZvbnQtc2l6ZTogMS4xcmVtOyB9CiAgICAgICAgLmZvcm0tZ3JvdXAgaW5wdXQgeyB3aWR0aDogMTAwJTsgcGFkZGluZzogMTJweDsgYm9yZGVyOiAxcHggc29saWQgI2RkZDsgYm9yZGVyLXJhZGl1czogNXB4OyBmb250LXNpemU6IDFyZW07IGJveC1zaXppbmc6IGJvcmRlci1ib3g7IH0KICAgICAgICAucHJldmlldy1ib3ggeyB3aWR0aDogMTAwJTsgaGVpZ2h0OiAxNTBweDsgYm9yZGVyOiAycHggc29saWQgI2VlZTsgZGlzcGxheTogZmxleDsgYWxpZ24taXRlbXM6IGNlbnRlcjsganVzdGlmeS1jb250ZW50OiBjZW50ZXI7IG1hcmdpbi10b3A6IDEwcHg7IGJhY2tncm91bmQ6ICNmYWZhZmE7IH0KICAgICAgICAucHJldmlldy1ib3ggaW1nIHsgbWF4LWhlaWdodDogMTAwJTsgbWF4LXdpZHRoOiAxMDAlOyB9CgogICAgICAgIC8qIFJFUEFSVElUSU9OICYgT1JBVVggKi8KICAgICAgICAuZXhhbS1uYXZpZ2F0aW9uLWJhciB7IGJhY2tncm91bmQ6ICNmZmY7IHBhZGRpbmc6IDE1cHg7IGJvcmRlci1yYWRpdXM6IDhweDsgYm94LXNoYWRvdzogMCAycHggNXB4IHJnYmEoMCwwLDAsMC4wNSk7IGRpc3BsYXk6IGZsZXg7IGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjsgYWxpZ24taXRlbXM6IGNlbnRlcjsgbWFyZ2luLWJvdHRvbTogMjBweDsgYm9yZGVyOiAxcHggc29saWQgI2RkZDsgfQogICAgICAgIC5uYXYtYnRuIHsgYmFja2dyb3VuZDogIzJjM2U1MDsgY29sb3I6IHdoaXRlOyBib3JkZXI6IG5vbmU7IHBhZGRpbmc6IDEwcHggMjBweDsgYm9yZGVyLXJhZGl1czogNXB4OyBjdXJzb3I6IHBvaW50ZXI7IGZvbnQtd2VpZ2h0OiBib2xkOyBkaXNwbGF5OiBmbGV4OyBhbGlnbi1pdGVtczogY2VudGVyOyBnYXA6IDEwcHg7IH0KICAgICAgICAuZXhhbS1zZWxlY3RvciB7IHBhZGRpbmc6IDEwcHg7IGZvbnQtc2l6ZTogMXJlbTsgYm9yZGVyOiAxcHggc29saWQgI2NjYzsgYm9yZGVyLXJhZGl1czogNXB4OyBtaW4td2lkdGg6IDMwMHB4OyB9CiAgICAgICAgCiAgICAgICAgLmV4YW0tc2VjdGlvbi1ibG9jayB7IGJvcmRlcjogMXB4IHNvbGlkICNjY2M7IGJhY2tncm91bmQ6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDhweDsgcGFkZGluZzogMTVweDsgYm94LXNoYWRvdzogMCA0cHggMTBweCByZ2JhKDAsMCwwLDAuMDUpOyB9CiAgICAgICAgLmV4YW0tc2VjdGlvbi1oZWFkZXIgeyBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1wcmltYXJ5LWNvbG9yKTsgY29sb3I6IHdoaXRlOyBwYWRkaW5nOiAxNXB4OyBib3JkZXItcmFkaXVzOiA2cHg7IG1hcmdpbi1ib3R0b206IDE1cHg7IGRpc3BsYXk6IGZsZXg7IGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjsgZm9udC1zaXplOiAxLjJyZW07IGZvbnQtd2VpZ2h0OiBib2xkOyB9CiAgICAgICAgLnN0b3JhZ2Utem9uZSB7IGJhY2tncm91bmQ6ICNlY2YwZjE7IGJvcmRlcjogM3B4IGRhc2hlZCAjYmRjM2M3OyBwYWRkaW5nOiAxMHB4OyBib3JkZXItcmFkaXVzOiA4cHg7IG1pbi1oZWlnaHQ6IDgwcHg7IG1heC1oZWlnaHQ6IDIwMHB4OyBvdmVyZmxvdy15OiBhdXRvOyBkaXNwbGF5OiBmbGV4OyBmbGV4LXdyYXA6IHdyYXA7IGdhcDogMTBweDsgYWxpZ24tY29udGVudDogZmxleC1zdGFydDsgbWFyZ2luLWJvdHRvbTogMjBweDsgfQogICAgICAgIC5yb29tcy1ncmlkIHsgZGlzcGxheTogZ3JpZDsgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiByZXBlYXQoYXV0by1maWxsLCBtaW5tYXgoMzQwcHgsIDFmcikpOyBnYXA6IDI1cHg7IH0gLyogU2xpZ2h0bHkgd2lkZXIgZm9yIG9yYWwgY29udHJvbHMgKi8KICAgICAgICAucm9vbS1jYXJkIHsgYmFja2dyb3VuZDogd2hpdGU7IGJvcmRlcjogMXB4IHNvbGlkICNkZGQ7IGJvcmRlci1yYWRpdXM6IDhweDsgZGlzcGxheTogZmxleDsgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsgaGVpZ2h0OiA2MDBweDsgYm94LXNoYWRvdzogMCA0cHggNnB4IHJnYmEoMCwwLDAsMC4wNSk7IH0KICAgICAgICAucm9vbS1jYXJkLnJvb20tdHQgeyBib3JkZXI6IDRweCBzb2xpZCB2YXIoLS1hY2NlbnQtY29sb3IpOyBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmY2Y1OyB9CiAgICAgICAgLnJvb20taGVhZGVyIHsgcGFkZGluZzogMTBweDsgYmFja2dyb3VuZDogIzJjM2U1MDsgY29sb3I6IHdoaXRlOyBib3JkZXItcmFkaXVzOiA2cHggNnB4IDAgMDsgZm9udC13ZWlnaHQ6IGJvbGQ7IGZvbnQtc2l6ZTogMC45NXJlbTsgfQogICAgICAgIC5yb29tLWhlYWRlci10b3AgeyBkaXNwbGF5OiBmbGV4OyBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47IGFsaWduLWl0ZW1zOiBjZW50ZXI7IG1hcmdpbi1ib3R0b206IDVweDt9CiAgICAgICAgLnJvb20tdHQgLnJvb20taGVhZGVyIHsgYmFja2dyb3VuZDogdmFyKC0tYWNjZW50LWNvbG9yKTsgY29sb3I6ICMyYzNlNTA7IH0KICAgICAgICAucm9vbS1zdXJ2ZWlsbGFudHMtYXJlYSB7IHBhZGRpbmc6IDEwcHg7IGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjZWVlOyBiYWNrZ3JvdW5kOiAjZjhmOWZhOyBtYXgtaGVpZ2h0OiAxMjBweDsgb3ZlcmZsb3cteTogYXV0bzsgfQogICAgICAgIC5zdXJ2ZWlsbGFudC1yb3cgeyBkaXNwbGF5OiBmbGV4OyBnYXA6IDVweDsgbWFyZ2luLWJvdHRvbTogNXB4OyB9CiAgICAgICAgLnN1cnZlaWxsYW50LXJvdyBzZWxlY3QgeyB3aWR0aDogMTAwJTsgcGFkZGluZzogNXB4OyBib3JkZXI6IDFweCBzb2xpZCAjY2NjOyBib3JkZXItcmFkaXVzOiA0cHg7IGZvbnQtc2l6ZTogMC44NXJlbTsgfQogICAgICAgIC5idG4tYWRkLXN1cnYgeyBiYWNrZ3JvdW5kOiAjMjdhZTYwOyBjb2xvcjogd2hpdGU7IGJvcmRlcjogbm9uZTsgYm9yZGVyLXJhZGl1czogMCAwIDRweCA0cHg7IGN1cnNvcjogcG9pbnRlcjsgd2lkdGg6IDEwMCU7IHBhZGRpbmc6IDZweDsgZm9udC1zaXplOiAwLjhyZW07IH0KICAgICAgICAucm9vbS1ib2R5IHsgZmxleDogMTsgcGFkZGluZzogMTBweDsgb3ZlcmZsb3cteTogYXV0bzsgYmFja2dyb3VuZC1jb2xvcjogI2ZmZjsgfQogICAgICAgIAogICAgICAgIC5zdHVkZW50LWl0ZW0geyBiYWNrZ3JvdW5kOiB3aGl0ZTsgYm9yZGVyOiAxcHggc29saWQgI2UwZTBlMDsgcGFkZGluZzogOHB4OyBtYXJnaW4tYm90dG9tOiA4cHg7IGJvcmRlci1yYWRpdXM6IDRweDsgY3Vyc29yOiBncmFiOyBmb250LXNpemU6IDAuODVyZW07IGRpc3BsYXk6IGZsZXg7IGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47IGdhcDo1cHg7IGJveC1zaGFkb3c6IDAgMXB4IDJweCByZ2JhKDAsMCwwLDAuMDMpOyB9CiAgICAgICAgLnN0dWRlbnQtaXRlbS5pcy10dCB7IGJvcmRlci1sZWZ0OiA1cHggc29saWQgdmFyKC0tYWNjZW50LWNvbG9yKTsgYmFja2dyb3VuZDogI2ZmZmNmMDsgfQogICAgICAgIC5zdHVkZW50LW1haW4taW5mbyB7IGRpc3BsYXk6IGZsZXg7IGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjsgZm9udC13ZWlnaHQ6IDUwMDsgfQogICAgICAgIC5zdHVkZW50LW9yYWwtY29udHJvbHMgeyBkaXNwbGF5OiBmbGV4OyBnYXA6IDVweDsgYWxpZ24taXRlbXM6IGNlbnRlcjsgYmFja2dyb3VuZDogI2YxZjJmNjsgcGFkZGluZzogNHB4OyBib3JkZXItcmFkaXVzOiA0cHg7fQogICAgICAgIC5zdHVkZW50LW9yYWwtY29udHJvbHMgbGFiZWwgeyBmb250LXNpemU6IDAuN3JlbTsgY29sb3I6ICM3ZjhjOGQ7IGZvbnQtd2VpZ2h0OiBib2xkO30KICAgICAgICAuc3R1ZGVudC1vcmFsLWNvbnRyb2xzIGlucHV0W3R5cGU9InRpbWUiXSB7IGJvcmRlcjogMXB4IHNvbGlkICNjY2M7IGJvcmRlci1yYWRpdXM6IDNweDsgZm9udC1zaXplOiAwLjhyZW07IHBhZGRpbmc6IDJweDsgd2lkdGg6IDY1cHg7IH0KCiAgICAgICAgLnNjaGVkdWxlLWJ0biB7IGJhY2tncm91bmQ6ICM4ZTQ0YWQ7IGNvbG9yOiB3aGl0ZTsgYm9yZGVyOm5vbmU7IGJvcmRlci1yYWRpdXM6M3B4OyBmb250LXNpemU6MC43cmVtOyBwYWRkaW5nOiAzcHggOHB4OyBjdXJzb3I6IHBvaW50ZXI7IGRpc3BsYXk6IGZsZXg7IGFsaWduLWl0ZW1zOiBjZW50ZXI7IGdhcDogNHB4O30KICAgICAgICAuc2NoZWR1bGUtYnRuOmhvdmVyIHsgYmFja2dyb3VuZDogIzliNTliNjsgfQoKICAgICAgICAvKiBDT01NT04gKi8KICAgICAgICAuY29udHJvbHMtYmFyIHsgZGlzcGxheTogZmxleDsgZ2FwOiAxNXB4OyBtYXJnaW4tYm90dG9tOiAyMHB4OyBhbGlnbi1pdGVtczogY2VudGVyOyBiYWNrZ3JvdW5kOiB3aGl0ZTsgcGFkZGluZzogMTVweDsgYm9yZGVyLXJhZGl1czogOHB4OyBib3gtc2hhZG93OiAwIDJweCA1cHggcmdiYSgwLDAsMCwwLjA1KTsgZmxleC13cmFwOiB3cmFwO30KICAgICAgICAuYWN0aW9uLWJ0biB7IHBhZGRpbmc6IDEwcHggMTVweDsgYm9yZGVyOiBub25lOyBib3JkZXItcmFkaXVzOiA1cHg7IGN1cnNvcjogcG9pbnRlcjsgZm9udC13ZWlnaHQ6IGJvbGQ7IGNvbG9yOiB3aGl0ZTsgZGlzcGxheTogZmxleDsgYWxpZ24taXRlbXM6IGNlbnRlcjsgZ2FwOiA4cHg7IH0KICAgICAgICAuYnRuLWNhbGMgeyBiYWNrZ3JvdW5kOiB2YXIoLS1hY2NlbnQtY29sb3IpOyBjb2xvcjogIzMzMzsgfQogICAgICAgIC5idG4tcHJpbnQgeyBiYWNrZ3JvdW5kOiAjMmMzZTUwOyB9CiAgICAgICAgLmxheW91dC1zZXR0aW5ncyB7IGJhY2tncm91bmQ6ICNmMWYyZjY7IGJvcmRlcjogMXB4IHNvbGlkICNjY2M7IHBhZGRpbmc6IDEwcHg7IGJvcmRlci1yYWRpdXM6IDVweDsgZGlzcGxheTogZmxleDsgZ2FwOiAxNXB4OyBhbGlnbi1pdGVtczogY2VudGVyOyBmb250LXNpemU6IDAuODVyZW07IG1hcmdpbi10b3A6IDEwcHg7IHdpZHRoOiAxMDAlOyB9CiAgICAgICAgLmxheW91dC1zZXR0aW5ncyBpbnB1dCB7IHdpZHRoOiA2MHB4OyBwYWRkaW5nOiAzcHg7IGJvcmRlcjogMXB4IHNvbGlkICNjY2M7IGJvcmRlci1yYWRpdXM6IDNweDsgfQogICAgICAgIC5kYXRhLXRhYmxlIHsgd2lkdGg6IDEwMCU7IGJvcmRlci1jb2xsYXBzZTogY29sbGFwc2U7IG1hcmdpbi10b3A6IDE1cHg7IGZvbnQtc2l6ZTogMC45cmVtOyBiYWNrZ3JvdW5kOiB3aGl0ZTsgfQogICAgICAgIC5kYXRhLXRhYmxlIHRoIHsgYmFja2dyb3VuZDogIzJjM2U1MDsgY29sb3I6IHdoaXRlOyBwYWRkaW5nOiAxMnB4OyB0ZXh0LWFsaWduOiBsZWZ0OyB9CiAgICAgICAgLmRhdGEtdGFibGUgdGQgeyBwYWRkaW5nOiAxMHB4OyBib3JkZXItYm90dG9tOiAxcHggc29saWQgI2VlZTsgfQogICAgICAgIC5hbm9ueW0tYmFkZ2UgeyBiYWNrZ3JvdW5kOiAjMmMzZTUwOyBjb2xvcjogd2hpdGU7IHBhZGRpbmc6IDNweCA4cHg7IGJvcmRlci1yYWRpdXM6IDEwcHg7IGZvbnQtZmFtaWx5OiBtb25vc3BhY2U7IGZvbnQtc2l6ZTogMXJlbTsgfQoKICAgICAgICAvKiBQQVBFUiAtIFByZXZpZXcgT25seSAqLwogICAgICAgIC5wYXBlci1zaGVldCB7IGJhY2tncm91bmQ6IHdoaXRlOyB3aWR0aDogMjEwbW07IG1pbi1oZWlnaHQ6IDI5N21tOyBwYWRkaW5nOiAyMG1tOyBib3gtc2hhZG93OiAwIDAgMTBweCByZ2JhKDAsMCwwLDAuMyk7IGJveC1zaXppbmc6IGJvcmRlci1ib3g7IHBvc2l0aW9uOiByZWxhdGl2ZTsgZm9udC1mYW1pbHk6ICdUaW1lcyBOZXcgUm9tYW4nLCBUaW1lcywgc2VyaWY7IGNvbG9yOiAjMDAwOyBkaXNwbGF5OmZsZXg7IGZsZXgtZGlyZWN0aW9uOmNvbHVtbjsganVzdGlmeS1jb250ZW50OiBjZW50ZXI7IH0gCiAgICAgICAgLmNvbnZvYy1oZWFkZXItcm93IHsgZGlzcGxheTogZmxleDsganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOyBtYXJnaW4tYm90dG9tOiAzMHB4OyB9CiAgICAgICAgLmNvbnZvYy1hZGRyZXNzIHsgd2lkdGg6IDUwJTsgZm9udC1zaXplOiAxcmVtOyB9CiAgICAgICAgLmNvbnZvYy1hZGRyZXNzIHRleHRhcmVhIHsgd2lkdGg6IDEwMCU7IGhlaWdodDogODBweDsgYm9yZGVyOiAxcHggZGFzaGVkICNjY2M7IGZvbnQtZmFtaWx5OiBpbmhlcml0OyBmb250LXNpemU6IGluaGVyaXQ7IHJlc2l6ZTogbm9uZTsgfQogICAgICAgIC5jb252b2MtbG9nbyB7IG1heC13aWR0aDogMTUwcHg7IG1heC1oZWlnaHQ6IDgwcHg7IH0KICAgICAgICAuY29udm9jLXRpdGxlIHsgdGV4dC1hbGlnbjogY2VudGVyOyBmb250LXdlaWdodDogYm9sZDsgZm9udC1zaXplOiAxLjRyZW07IHRleHQtZGVjb3JhdGlvbjogdW5kZXJsaW5lOyBtYXJnaW46IDMwcHggMDsgfQogICAgICAgIC5jb252b2Mtc3R1ZGVudC1pbmZvIHsgbWFyZ2luLWJvdHRvbTogMjBweDsgZm9udC1zaXplOiAxLjFyZW07IGxpbmUtaGVpZ2h0OiAxLjY7IH0KICAgICAgICAuY29udm9jLWJvZHkgeyBtYXJnaW4tYm90dG9tOiAyMHB4OyB9CiAgICAgICAgLmVkaXRhYmxlLXRleHQgeyBib3JkZXI6IDFweCBkYXNoZWQgI2NjYzsgcGFkZGluZzogNXB4OyBtaW4taGVpZ2h0OiAyMHB4OyB3aGl0ZS1zcGFjZTogcHJlLXdyYXA7IH0KICAgICAgICAuY29udm9jLXRhYmxlIHsgd2lkdGg6IDEwMCU7IGJvcmRlci1jb2xsYXBzZTogY29sbGFwc2U7IG1hcmdpbi1ib3R0b206IDMwcHg7IH0KICAgICAgICAuY29udm9jLXRhYmxlIHRoLCAuY29udm9jLXRhYmxlIHRkIHsgYm9yZGVyOiAxcHggc29saWQgIzAwMDsgcGFkZGluZzogOHB4OyB0ZXh0LWFsaWduOiBjZW50ZXI7IH0KICAgICAgICAuY29udm9jLWZvb3RlciB7IGRpc3BsYXk6IGZsZXg7IGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjsgYWxpZ24taXRlbXM6IGZsZXgtZW5kOyBtYXJnaW4tdG9wOiAzMHB4OyB9CiAgICAgICAgCiAgICAgICAgQGtleWZyYW1lcyBmYWRlSW4geyBmcm9tIHsgb3BhY2l0eTogMDsgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKDEwcHgpOyB9IHRvIHsgb3BhY2l0eTogMTsgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKDApOyB9IH0KCiAgICAgICAgLyogUFJJTlQgKi8KICAgICAgICBAbWVkaWEgcHJpbnQgewogICAgICAgICAgICAuc2lkZWJhciwgLmdsb2JhbC10b29sYmFyLCAubm8tcHJpbnQsIC5tYWluLXdyYXBwZXIsIC5zZWN0aW9uLXZpZXcgeyBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7IH0KICAgICAgICAgICAgYm9keSA+ICo6bm90KCNwcmludC1hcmVhKSB7IGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDsgfQogICAgICAgICAgICBib2R5LCBodG1sIHsgbWFyZ2luOiAwOyBwYWRkaW5nOiAwOyB3aWR0aDogMTAwJTsgaGVpZ2h0OiAxMDAlOyBiYWNrZ3JvdW5kOiB3aGl0ZTsgZGlzcGxheTogYmxvY2s7IG92ZXJmbG93OiB2aXNpYmxlOyB9CiAgICAgICAgICAgICNwcmludC1hcmVhIHsgZGlzcGxheTogYmxvY2sgIWltcG9ydGFudDsgcG9zaXRpb246IGFic29sdXRlOyB0b3A6IDA7IGxlZnQ6IDA7IHdpZHRoOiAxMDAlOyB6LWluZGV4OiA5OTk5OyBiYWNrZ3JvdW5kOiB3aGl0ZTsgfQogICAgICAgICAgICBAcGFnZSB7IHNpemU6IEE0IHBvcnRyYWl0OyBtYXJnaW46IDA7IH0KICAgICAgICAgICAgCiAgICAgICAgICAgIC5wcmludC1wYWdlLWNvbnZvYyB7IAogICAgICAgICAgICAgICAgd2lkdGg6IDIxMG1tOyBoZWlnaHQ6IDI5N21tOyBwYWRkaW5nOiAxNW1tOyBib3gtc2l6aW5nOiBib3JkZXItYm94OyBwYWdlLWJyZWFrLWFmdGVyOiBhbHdheXM7IAogICAgICAgICAgICAgICAgZm9udC1mYW1pbHk6ICdUaW1lcyBOZXcgUm9tYW4nLCBUaW1lcywgc2VyaWY7IGJhY2tncm91bmQ6IHdoaXRlOyAKICAgICAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7IGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47IGp1c3RpZnktY29udGVudDogY2VudGVyOwogICAgICAgICAgICB9CiAgICAgICAgICAgIC5wcmludC1wYWdlLWNvbnZvYzpsYXN0LWNoaWxkIHsgcGFnZS1icmVhay1hZnRlcjogYXV0bzsgfQoKICAgICAgICAgICAgLnByaW50LXBhZ2UtbGlzdCB7IAogICAgICAgICAgICAgICAgd2lkdGg6IDIxMG1tOyBtaW4taGVpZ2h0OiAyOTdtbTsgcGFkZGluZzogMTVtbTsgYm94LXNpemluZzogYm9yZGVyLWJveDsgcGFnZS1icmVhay1hZnRlcjogYWx3YXlzOyAKICAgICAgICAgICAgICAgIGZvbnQtZmFtaWx5OiAnVGltZXMgTmV3IFJvbWFuJywgVGltZXMsIHNlcmlmOyBiYWNrZ3JvdW5kOiB3aGl0ZTsgCiAgICAgICAgICAgICAgICBkaXNwbGF5OiBibG9jazsgCiAgICAgICAgICAgIH0KICAgICAgICAgICAgCiAgICAgICAgICAgIC5wcmludC1mbG93IHsKICAgICAgICAgICAgICAgIHdpZHRoOiAyMTBtbTsgcGFkZGluZzogMTVtbTsgYm94LXNpemluZzogYm9yZGVyLWJveDsKICAgICAgICAgICAgICAgIGZvbnQtZmFtaWx5OiAnVGltZXMgTmV3IFJvbWFuJywgVGltZXMsIHNlcmlmOyBiYWNrZ3JvdW5kOiB3aGl0ZTsKICAgICAgICAgICAgfQogICAgICAgICAgICAKICAgICAgICAgICAgLnByaW50LWhlYWRlciB7IGRpc3BsYXk6IGZsZXg7IGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjsgYWxpZ24taXRlbXM6IGNlbnRlcjsgYm9yZGVyLWJvdHRvbTogMnB4IHNvbGlkICMwMDA7IHBhZGRpbmctYm90dG9tOiAxMHB4OyBtYXJnaW4tYm90dG9tOiAyMHB4OyB9CiAgICAgICAgICAgIC5wcmludC1sb2dvIHsgbWF4LWhlaWdodDogODBweDsgbWF4LXdpZHRoOiAxNTBweDsgfQogICAgICAgICAgICAucHJpbnQtZG9jLXRpdGxlIHsgZm9udC1zaXplOiAxLjVyZW07IGZvbnQtd2VpZ2h0OiBib2xkOyB0ZXh0LWFsaWduOiBjZW50ZXI7IG1hcmdpbjogMjBweCAwOyB0ZXh0LXRyYW5zZm9ybTogdXBwZXJjYXNlOyBib3JkZXI6IDJweCBzb2xpZCAjMDAwOyBwYWRkaW5nOiAxMHB4OyB9CiAgICAgICAgICAgIC5wcmludC1pbmZvcy1ib3ggeyBib3JkZXI6IDFweCBzb2xpZCAjMDAwOyBwYWRkaW5nOiAxMHB4OyBtYXJnaW4tYm90dG9tOiAxNXB4OyBiYWNrZ3JvdW5kOiAjZjlmOWY5OyBwYWdlLWJyZWFrLWluc2lkZTogYXZvaWQ7IH0KICAgICAgICAgICAgLnByaW50LXRhYmxlIHsgd2lkdGg6IDEwMCU7IGJvcmRlci1jb2xsYXBzZTogY29sbGFwc2U7IG1hcmdpbi10b3A6IDEwcHg7IGZvbnQtc2l6ZTogMC45cmVtOyBwYWdlLWJyZWFrLWluc2lkZTogYXV0bzsgfQogICAgICAgICAgICAucHJpbnQtdGFibGUgdGgsIC5wcmludC10YWJsZSB0ZCB7IGJvcmRlcjogMXB4IHNvbGlkICMwMDA7IHBhZGRpbmc6IDZweDsgdGV4dC1hbGlnbjogY2VudGVyOyB9CiAgICAgICAgICAgIC5wcmludC10YWJsZSB0aCB7IGJhY2tncm91bmQtY29sb3I6ICNlZWU7IH0KICAgICAgICAgICAgLnByaW50LXRhYmxlIHRyIHsgcGFnZS1icmVhay1pbnNpZGU6IGF2b2lkOyBwYWdlLWJyZWFrLWFmdGVyOiBhdXRvOyB9CiAgICAgICAgICAgIAogICAgICAgICAgICAucHYtc2lnbmF0dXJlcyB7IGRpc3BsYXk6IGZsZXg7IGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjsgbWFyZ2luLXRvcDogMzBweDsgaGVpZ2h0OiAxMDBweDsgcGFnZS1icmVhay1pbnNpZGU6IGF2b2lkOyB9CiAgICAgICAgICAgIC5wdi1ib3ggeyBib3JkZXI6IDFweCBzb2xpZCAjMDAwOyB3aWR0aDogNDUlOyBwYWRkaW5nOiA1cHg7IGZvbnQtc2l6ZTogMC44cmVtOyB9CiAgICAgICAgICAgIAogICAgICAgICAgICAuZGlzcGxheS1saXN0LXJvdyB0ZCB7IHBhZGRpbmc6IDhweDsgZm9udC1zaXplOiAxLjFyZW07IH0KICAgICAgICB9CiAgICA8L3N0eWxlPgo8L2hlYWQ+Cjxib2R5PgogICAgPGRpdiBjbGFzcz0ic2lkZWJhciI+CiAgICAgICAgPGRpdiBjbGFzcz0iYnJhbmQiPjxoMT5PUkFMIFBJTE9URTwvaDE+PHNwYW4+YnkgU3lsdsOocmUgTWljaGVsZXQ8L3NwYW4+PC9kaXY+CiAgICAgICAgPG5hdiBjbGFzcz0ic3RlcHMtbmF2Ij4KICAgICAgICAgICAgPGRpdiBjbGFzcz0ic3RlcC1idG4gYWN0aXZlIiBvbmNsaWNrPSJzd2l0Y2hUYWIodGhpcywgJ3ZpZXcxJykiPjxpIGNsYXNzPSJmYS1zb2xpZCBmYS1zbGlkZXJzIj48L2k+IDEuIFBhcmFtw6l0cmFnZTwvZGl2PgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJzdGVwLWJ0biIgb25jbGljaz0ic3dpdGNoVGFiKHRoaXMsICd2aWV3MicpIj48aSBjbGFzcz0iZmEtc29saWQgZmEtZmlsZS1pbXBvcnQiPjwvaT4gMi4gSW1wb3J0IGRvbm7DqWVzPC9kaXY+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9InN0ZXAtYnRuIiBvbmNsaWNrPSJzd2l0Y2hUYWIodGhpcywgJ3ZpZXczJykiPjxpIGNsYXNzPSJmYS1zb2xpZCBmYS1jbG9jayI+PC9pPiAzLiBPcmdhbmlzYXRpb24gJiBPcmF1eDwvZGl2PgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJzdGVwLWJ0biIgb25jbGljaz0ic3dpdGNoVGFiKHRoaXMsICd2aWV3NCcpIj48aSBjbGFzcz0iZmEtc29saWQgZmEtZW52ZWxvcGUtb3Blbi10ZXh0Ij48L2k+IDQuIENvbnZvY2F0aW9ucyDDiWzDqHZlczwvZGl2PgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJzdGVwLWJ0biIgb25jbGljaz0ic3dpdGNoVGFiKHRoaXMsICd2aWV3NScpIj48aSBjbGFzcz0iZmEtc29saWQgZmEtaWQtYmFkZ2UiPjwvaT4gNS4gQ29udm9jYXRpb25zIFN1cnZlaWxsYW50czwvZGl2PgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJzdGVwLWJ0biIgb25jbGljaz0ic3dpdGNoVGFiKHRoaXMsICd2aWV3NicpIj48aSBjbGFzcz0iZmEtc29saWQgZmEtY2xpcGJvYXJkLWxpc3QiPjwvaT4gNi4gw4ltYXJnZW1lbnRzIGV0IEFmZmljaGFnZTwvZGl2PgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJzdGVwLWJ0biIgb25jbGljaz0ic3dpdGNoVGFiKHRoaXMsICd2aWV3NycpIj48aSBjbGFzcz0iZmEtc29saWQgZmEtZmlsZS1zaWduYXR1cmUiPjwvaT4gNy4gUHJvY8OocyBWZXJiYWwgZXQgUG9jaGV0dGVzPC9kaXY+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9InN0ZXAtYnRuIiBvbmNsaWNrPSJzd2l0Y2hUYWIodGhpcywgJ3ZpZXc4JykiPjxpIGNsYXNzPSJmYS1zb2xpZCBmYS10YWJsZS1saXN0Ij48L2k+IDguIFRhYmxlYXUgUsOpY2FwaXR1bGF0aWY8L2Rpdj4KICAgICAgICA8L25hdj4KICAgICAgICA8ZGl2IGNsYXNzPSJmb290ZXItaW5mbyI+wqkgMjAyNC0yMDI1IEVEVSBQSUxPVEUgU3lzdGVtLjwvZGl2PgogICAgPC9kaXY+CiAKICAgIDxkaXYgY2xhc3M9Im1haW4td3JhcHBlciI+CiAgICAgICAgPGRpdiBjbGFzcz0iZ2xvYmFsLXRvb2xiYXIgbm8tcHJpbnQiPgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJ0b29sYmFyLXRpdGxlIj48aSBjbGFzcz0iZmEtc29saWQgZmEtZm9sZGVyLXRyZWUiPjwvaT4gR2VzdGlvbiBkdSBQcm9qZXQ8L2Rpdj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0idG9vbGJhci1hY3Rpb25zIj4KICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9ImZpbGUiIGlkPSJsb2FkUHJvamVjdElucHV0IiBzdHlsZT0iZGlzcGxheTpub25lOyIgYWNjZXB0PSIuanNvbiIgb25jaGFuZ2U9ImxvYWRQcm9qZWN0KHRoaXMpIj4KICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYnRuLXRvb2xiYXIgYnRuLWxvYWQtcHJvamVjdCIgb25jbGljaz0iZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvYWRQcm9qZWN0SW5wdXQnKS5jbGljaygpIj48aSBjbGFzcz0iZmEtc29saWQgZmEtdXBsb2FkIj48L2k+IE91dnJpcjwvYnV0dG9uPgogICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJidG4tdG9vbGJhciBidG4tc2F2ZS1wcm9qZWN0IiBvbmNsaWNrPSJzYXZlUHJvamVjdCgpIj48aSBjbGFzcz0iZmEtc29saWQgZmEtZG93bmxvYWQiPjwvaT4gU2F1dmVnYXJkZXI8L2J1dHRvbj4KICAgICAgICAgICA8L2Rpdj4KICAgICAgICA8L2Rpdj4KIAogICAgICAgIDxkaXYgY2xhc3M9Im1haW4tY29udGVudCI+CiAgICAgICAgICAgIDxkaXYgaWQ9InZpZXcxIiBjbGFzcz0ic2VjdGlvbi12aWV3IGFjdGl2ZSI+CiAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImhlYWRlci1wYW5lbCI+PGgyPjxpIGNsYXNzPSJmYS1zb2xpZCBmYS1zbGlkZXJzIj48L2k+IDEuIFBhcmFtw6l0cmFnZTwvaDI+PC9kaXY+CiAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImNvbmZpZy1jb250YWluZXIiPgogICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iY29uZmlnLWNvbCI+CiAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1ncm91cCI+PGxhYmVsPk5vbTwvbGFiZWw+PGlucHV0IHR5cGU9InRleHQiIGlkPSJjb25maWdOYW1lIiBwbGFjZWhvbGRlcj0iVm90cmUgbm9tIiBvbmNoYW5nZT0iQXBwU3RhdGUuY29uZmlnLm5hbWU9dGhpcy52YWx1ZSI+PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1ncm91cCI+PGxhYmVsPkZvbmN0aW9uPC9sYWJlbD48aW5wdXQgdHlwZT0idGV4dCIgaWQ9ImNvbmZpZ1JvbGUiIHBsYWNlaG9sZGVyPSJWb3RyZSBmb25jdGlvbiIgb25jaGFuZ2U9IkFwcFN0YXRlLmNvbmZpZy5yb2xlPXRoaXMudmFsdWUiPjwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAiPjxsYWJlbD5JbnRpdHVsw6kgZGUgbCdleGFtZW48L2xhYmVsPjxpbnB1dCB0eXBlPSJ0ZXh0IiBpZD0iY29uZmlnRXhhbVRpdGxlIiBwbGFjZWhvbGRlcj0iRXg6IEJBQyBCTEFOQyAyMDI1IiBvbmNoYW5nZT0iQXBwU3RhdGUuY29uZmlnLmV4YW1UaXRsZT10aGlzLnZhbHVlIj48L2Rpdj4KICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iY29uZmlnLWNvbCI+CiAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1ncm91cCI+PGxhYmVsPkxvZ28gw4l0YWJsaXNzZW1lbnQ8L2xhYmVsPjxpbnB1dCB0eXBlPSJmaWxlIiBhY2NlcHQ9ImltYWdlLyoiIG9uY2hhbmdlPSJoYW5kbGVJbWFnZSh0aGlzLCAnbG9nb1ByZXZpZXcnKSI+PGRpdiBjbGFzcz0icHJldmlldy1ib3giPjxpbWcgaWQ9ImxvZ29QcmV2aWV3IiBhbHQ9IkFwZXLDp3UiIHN0eWxlPSJkaXNwbGF5Om5vbmU7Ij48L2Rpdj48L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWdyb3VwIj48bGFiZWw+U2lnbmF0dXJlPC9sYWJlbD48aW5wdXQgdHlwZT0iZmlsZSIgYWNjZXB0PSJpbWFnZS8qIiBvbmNoYW5nZT0iaGFuZGxlSW1hZ2UodGhpcywgJ3NpZ25QcmV2aWV3JykiPjxkaXYgY2xhc3M9InByZXZpZXctYm94Ij48aW1nIGlkPSJzaWduUHJldmlldyIgYWx0PSJBcGVyw6d1IiBzdHlsZT0iZGlzcGxheTpub25lOyI+PC9kaXY+PC9kaXY+CiAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAKICAgICAgICAgICAgPGRpdiBpZD0idmlldzIiIGNsYXNzPSJzZWN0aW9uLXZpZXciPgogICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJoZWFkZXItcGFuZWwiPjxoMj48aSBjbGFzcz0iZmEtc29saWQgZmEtZmlsZS1pbXBvcnQiPjwvaT4gMi4gSW1wb3J0IGRlcyBkb25uw6llczwvaDI+PC9kaXY+CiAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImltcG9ydC1ncmlkIj4KICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZpbGUtZHJvcC16b25lIiBpZD0iem9uZS1lbGV2ZXMiPjxoMz5BLiBCYXNlIMOJbMOodmVzPC9oMz48cCBzdHlsZT0iZm9udC1zaXplOjAuOHJlbTsgY29sb3I6IzY2NjsiPk5vbSwgUHLDqW5vbSwgQ2xhc3NlLCBUVDwvcD48c3BhbiBzdHlsZT0iZm9udC1zaXplOjAuN3JlbTsgY29sb3I6Izk5OTsiPihFbiBhdHRlbnRlKTwvc3Bhbj48aW5wdXQgdHlwZT0iZmlsZSIgYWNjZXB0PSIueGxzeCwgLnhscywgLmNzdiIgb25jaGFuZ2U9ImhhbmRsZUZpbGUodGhpcywgJ0VMRVZFUycpIj48ZGl2IGlkPSJzdGF0dXMtZWxldmVzIiBjbGFzcz0ic3RhdHVzLWJhZGdlIj5GaWNoaWVyIG1hbnF1YW50PC9kaXY+PC9kaXY+CiAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmaWxlLWRyb3Atem9uZSIgaWQ9InpvbmUtZXByZXV2ZXMiPjxoMz5CLiBQbGFubmluZyDDiXByZXV2ZXM8L2gzPjxwIHN0eWxlPSJmb250LXNpemU6MC44cmVtOyBjb2xvcjojNjY2OyI+TWF0acOocmUsIERhdGUsIEhldXJlLCBEdXLDqWU8L3A+PHNwYW4gc3R5bGU9ImZvbnQtc2l6ZTowLjdyZW07IGNvbG9yOiM5OTk7Ij4oRW4gYXR0ZW50ZSk8L3NwYW4+PGlucHV0IHR5cGU9ImZpbGUiIGFjY2VwdD0iLnhsc3gsIC54bHMsIC5jc3YiIG9uY2hhbmdlPSJoYW5kbGVGaWxlKHRoaXMsICdFUFJFVVZFUycpIj48ZGl2IGlkPSJzdGF0dXMtZXByZXV2ZXMiIGNsYXNzPSJzdGF0dXMtYmFkZ2UiPkZpY2hpZXIgbWFucXVhbnQ8L2Rpdj48L2Rpdj4KICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZpbGUtZHJvcC16b25lIiBpZD0iem9uZS1yZXNzb3VyY2VzIj48aDM+Qy4gU2FsbGVzPC9oMz48cCBzdHlsZT0iZm9udC1zaXplOjAuOHJlbTsgY29sb3I6IzY2NjsiPlNhbGxlLCBDYXBhY2l0w6ksIFR5cGUgKFRUKTwvcD48c3BhbiBzdHlsZT0iZm9udC1zaXplOjAuN3JlbTsgY29sb3I6Izk5OTsiPihFbiBhdHRlbnRlKTwvc3Bhbj48aW5wdXQgdHlwZT0iZmlsZSIgYWNjZXB0PSIueGxzeCwgLnhscywgLmNzdiIgb25jaGFuZ2U9ImhhbmRsZUZpbGUodGhpcywgJ1JFU1NPVVJDRVMnKSI+PGRpdiBpZD0ic3RhdHVzLXJlc3NvdXJjZXMiIGNsYXNzPSJzdGF0dXMtYmFkZ2UiPkZpY2hpZXIgbWFucXVhbnQ8L2Rpdj48L2Rpdj4KICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZpbGUtZHJvcC16b25lIiBpZD0iem9uZS1zdXJ2ZWlsbGFudHMiPjxoMz5ELiBTdXJ2ZWlsbGFudHM8L2gzPjxwIHN0eWxlPSJmb250LXNpemU6MC44cmVtOyBjb2xvcjojNjY2OyI+Tm9tLCBQcsOpbm9tPC9wPjxzcGFuIHN0eWxlPSJmb250LXNpemU6MC43cmVtOyBjb2xvcjojOTk5OyI+KEVuIGF0dGVudGUpPC9zcGFuPjxpbnB1dCB0eXBlPSJmaWxlIiBhY2NlcHQ9Ii54bHN4LCAueGxzLCAuY3N2IiBvbmNoYW5nZT0iaGFuZGxlRmlsZSh0aGlzLCAnU1VSVkVJTExBTlRTJykiPjxkaXYgaWQ9InN0YXR1cy1zdXJ2ZWlsbGFudHMiIGNsYXNzPSJzdGF0dXMtYmFkZ2UiPkZpY2hpZXIgbWFucXVhbnQ8L2Rpdj48L2Rpdj4KICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDwvZGl2PgogCiAgICAgICAgICAgIDxkaXYgaWQ9InZpZXczIiBjbGFzcz0ic2VjdGlvbi12aWV3Ij4KICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iaGVhZGVyLXBhbmVsIj48aDI+PGkgY2xhc3M9ImZhLXNvbGlkIGZhLWNsb2NrIj48L2k+IDMuIE9yZ2FuaXNhdGlvbiAmIE9yYXV4PC9oMj48L2Rpdj4KICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iY29udHJvbHMtYmFyIj4KICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9ImZvbnQtc2l6ZTowLjlyZW07IGNvbG9yOiM1NTU7IG1hcmdpbi1yaWdodDphdXRvOyI+SW1wb3J0ZXogbGVzIGZpY2hpZXJzLCBjYWxjdWxleiwgcHVpcyBhZmZpbmV6IGxlcyBob3JhaXJlcyBwb3VyIGxlcyBvcmF1eC48L2Rpdj4KICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iZGlzcGxheTpmbGV4OyBmbGV4LWRpcmVjdGlvbjpjb2x1bW47IGdhcDo1cHg7IG1hcmdpbi1yaWdodDoxNXB4OyB0ZXh0LWFsaWduOnJpZ2h0OyI+CiAgICAgICAgICAgICAgICAgICAgICAgPGRpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIHN0eWxlPSJmb250LXNpemU6MC44NXJlbTsgZm9udC13ZWlnaHQ6Ym9sZDsiPlRyaSA6PC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNlbGVjdCBpZD0iZGlzdHJpYi1tZXRob2QiIHN0eWxlPSJwYWRkaW5nOjRweDsgYm9yZGVyLXJhZGl1czo0cHg7IGZvbnQtc2l6ZTowLjg1cmVtOyI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJBTFBIQSI+T3JkcmUgQWxwaGFiw6l0aXF1ZTwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iQ0xBU1MiPlBhciBDbGFzc2UgKFN0cmljdCk8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zZWxlY3Q+CiAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgPGRpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIHN0eWxlPSJmb250LXNpemU6MC44NXJlbTsgZm9udC13ZWlnaHQ6Ym9sZDsiPlBvcnTDqWUgOjwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzZWxlY3QgaWQ9ImRpc3RyaWItc2NvcGUiIHN0eWxlPSJwYWRkaW5nOjRweDsgYm9yZGVyLXJhZGl1czo0cHg7IGZvbnQtc2l6ZTowLjg1cmVtOyI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJBTEwiPlRvdXRlcyBsZXMgw6lwcmV1dmVzPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJDVVJSRU5UIj7DiXByZXV2ZSBhY3R1ZWxsZTwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgICAgICAgICA8L3NlbGVjdD4KICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgICAgICAgICAgIDxidXR0b24gb25jbGljaz0ibGF1bmNoRGlzdHJpYnV0aW9uKCkiIHN0eWxlPSJwYWRkaW5nOjEwcHggMjBweDsgYmFja2dyb3VuZDogdmFyKC0tcHJpbWFyeS1jb2xvcik7IGNvbG9yOndoaXRlOyBib3JkZXI6bm9uZTsgYm9yZGVyLXJhZGl1czo1cHg7IGN1cnNvcjpwb2ludGVyOyI+PGkgY2xhc3M9ImZhLXNvbGlkIGZhLXdhbmQtbWFnaWMtc3BhcmtsZXMiPjwvaT4gQ2FsY3VsZXIgLyBSw6lpbml0aWFsaXNlcjwvYnV0dG9uPgogICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgPGRpdiBpZD0iZXhhbS1uYXZpZ2F0aW9uIiBjbGFzcz0iZXhhbS1uYXZpZ2F0aW9uLWJhciIgc3R5bGU9ImRpc3BsYXk6bm9uZTsiPgogICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0ibmF2LWJ0biIgb25jbGljaz0icHJldkV4YW0oKSI+PGkgY2xhc3M9ImZhLXNvbGlkIGZhLWNoZXZyb24tbGVmdCI+PC9pPiBQcsOpY8OpZGVudDwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgPGRpdj48c3Ryb25nPsOJcHJldXZlIGFjdHVlbGxlIDogPC9zdHJvbmc+PHNlbGVjdCBpZD0iZXhhbS1kcm9wZG93biIgY2xhc3M9ImV4YW0tc2VsZWN0b3IiIG9uY2hhbmdlPSJqdW1wVG9FeGFtKHRoaXMudmFsdWUpIj48L3NlbGVjdD48L2Rpdj4KICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9Im5hdi1idG4iIG9uY2xpY2s9Im5leHRFeGFtKCkiPlN1aXZhbnQgPGkgY2xhc3M9ImZhLXNvbGlkIGZhLWNoZXZyb24tcmlnaHQiPjwvaT48L2J1dHRvbj4KICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgIDxkaXYgaWQ9ImN1cnJlbnQtZXhhbS1jb250YWluZXIiPjxkaXYgY2xhc3M9ImNhcmQiIHN0eWxlPSJ0ZXh0LWFsaWduOmNlbnRlcjsgY29sb3I6IzdmOGM4ZDsiPlZldWlsbGV6IGltcG9ydGVyIGxlcyBkb25uw6llcyBwdWlzIGNsaXF1ZXIgc3VyIENhbGN1bGVyLjwvZGl2PjwvZGl2PgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgCiAgICAgICAgICAgIDxkaXYgaWQ9InZpZXc0IiBjbGFzcz0ic2VjdGlvbi12aWV3Ij4KICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iaGVhZGVyLXBhbmVsIj48aDI+PGkgY2xhc3M9ImZhLXNvbGlkIGZhLWVudmVsb3BlLW9wZW4tdGV4dCI+PC9pPiA0LiBDb252b2NhdGlvbnMgw4lsw6h2ZXM8L2gyPjwvZGl2PgogICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJjb250cm9scy1iYXIiPgogICAgICAgICAgICAgICAgICAgPGxhYmVsPkZpbHRyZXIgcGFyIGNsYXNzZSA6PC9sYWJlbD48c2VsZWN0IGlkPSJjb252b2MtY2xhc3MtZmlsdGVyIiBzdHlsZT0icGFkZGluZzo4cHg7IGJvcmRlci1yYWRpdXM6NXB4OyBtYXJnaW4tbGVmdDoxMHB4OyI+PG9wdGlvbiB2YWx1ZT0iQUxMIj5Ub3V0ZXMgbGVzIGNsYXNzZXM8L29wdGlvbj48L3NlbGVjdD4KICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImFjdGlvbi1idG4gYnRuLXByaW50IiBvbmNsaWNrPSJwcmludENvbnZvY2F0aW9ucygpIiBzdHlsZT0ibWFyZ2luLWxlZnQ6YXV0bzsiPjxpIGNsYXNzPSJmYS1zb2xpZCBmYS1wcmludCI+PC9pPiBJbXByaW1lcjwvYnV0dG9uPgogICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ibGF5b3V0LXNldHRpbmdzIj4KICAgICAgICAgICAgICAgICAgIDxzcGFuPjxpIGNsYXNzPSJmYS1zb2xpZCBmYS1ydWxlci1jb21iaW5lZCI+PC9pPiBNaXNlIGVuIHBhZ2UgOjwvc3Bhbj4KICAgICAgICAgICAgICAgICAgIDxsYWJlbD5IYXV0IDxpbnB1dCB0eXBlPSJudW1iZXIiIGlkPSJzZXRzLXN0ZC10b3AiIHZhbHVlPSIyMCIgb25jaGFuZ2U9ImFwcGx5TGF5b3V0KCdzdGQnKSI+PC9sYWJlbD4KICAgICAgICAgICAgICAgICAgIDxsYWJlbD5CYXMgPGlucHV0IHR5cGU9Im51bWJlciIgaWQ9InNldHMtc3RkLWJvdCIgdmFsdWU9IjIwIiBvbmNoYW5nZT0iYXBwbHlMYXlvdXQoJ3N0ZCcpIj48L2xhYmVsPgogICAgICAgICAgICAgICAgICAgPGxhYmVsPlBvbGljZSA8aW5wdXQgdHlwZT0ibnVtYmVyIiBpZD0ic2V0cy1zdGQtZm9udCIgdmFsdWU9IjE2IiBvbmNoYW5nZT0iYXBwbHlMYXlvdXQoJ3N0ZCcpIj48L2xhYmVsPgogICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iZGlzcGxheTpmbGV4OyBqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyOyBiYWNrZ3JvdW5kOiNjY2M7IHBhZGRpbmc6MjBweDsgb3ZlcmZsb3cteTphdXRvOyBoZWlnaHQ6Y2FsYygxMDB2aCAtIDMwMHB4KTsiPgogICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0icGFwZXItc2hlZXQiIGlkPSJjb252b2MtdGVtcGxhdGUiPgogICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImNvbnZvYy1oZWFkZXItcm93Ij48ZGl2IGNsYXNzPSJjb252b2MtYWRkcmVzcyI+PHRleHRhcmVhIGlkPSJ0eHQtYWRkcmVzcyIgcGxhY2Vob2xkZXI9Ik5vbSBkZSBsJ8OpdGFibGlzc2VtZW50Li4uIj48L3RleHRhcmVhPjwvZGl2PjxkaXYgY2xhc3M9ImNvbnZvYy1sb2dvLXpvbmUiPjxpbWcgaWQ9ImNvbnZvYy1sb2dvLWltZyIgY2xhc3M9ImNvbnZvYy1sb2dvIiBhbHQ9IkxvZ28iPjwvZGl2PjwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImNvbnZvYy10aXRsZSIgaWQ9InR4dC10aXRsZS1kaXNwbGF5Ij5DT05WT0NBVElPTiA8c3BhbiBpZD0idHh0LXRpdGxlLWV4dHJhLXN0ZCIgY29udGVudGVkaXRhYmxlPSJ0cnVlIiBzdHlsZT0iYm9yZGVyLWJvdHRvbTogMXB4IGRvdHRlZCAjMDAwOyBtaW4td2lkdGg6IDUwcHg7IGRpc3BsYXk6IGlubGluZS1ibG9jazsiPkFVWCDDiVBSRVVWRVMgQkxBTkNIRVM8L3NwYW4+PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iY29udm9jLXN0dWRlbnQtaW5mbyI+PHN0cm9uZz5Ob20gZXQgUHLDqW5vbSA6PC9zdHJvbmc+IFtOb20gUHLDqW5vbV08YnI+PHN0cm9uZz5DbGFzc2UgOjwvc3Ryb25nPiBbQ2xhc3NlXTwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImNvbnZvYy1ib2R5IGVkaXRhYmxlLXRleHQiIGlkPSJ0eHQtYm9keSIgY29udGVudGVkaXRhYmxlPSJ0cnVlIj5NYWRhbWUsIE1vbnNpZXVyLDxicj5EYW5zIGxlIGNhZHJlIGRlIGxhIHByw6lwYXJhdGlvbiBhdXggZXhhbWVucywgdm90cmUgZW5mYW50IGVzdCBjb252b3F1w6koZSkgYXV4IMOpcHJldXZlcyBibGFuY2hlcyBzZWxvbiBsZSBwbGFubmluZyBzdWl2YW50IDo8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICA8dGFibGUgY2xhc3M9ImNvbnZvYy10YWJsZSI+PHRoZWFkPjx0cj48dGg+w4lwcmV1dmU8L3RoPjx0aD5EYXRlPC90aD48dGg+SGV1cmUgUGFzc2FnZTwvdGg+PHRoPkhldXJlIExvZ2U8L3RoPjx0aD5TYWxsZTwvdGg+PC90cj48L3RoZWFkPjx0Ym9keT48dHI+PHRkIGNvbHNwYW49IjUiPihUYWJsZWF1IGljaSk8L3RkPjwvdHI+PC90Ym9keT48L3RhYmxlPgogICAgICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9ImZvbnQtd2VpZ2h0OmJvbGQ7IG1hcmdpbi1ib3R0b206NXB4OyI+UsOoZ2xlbWVudCBldCBjb25zaWduZXMgOjwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImNvbnZvYy1ydWxlcyBlZGl0YWJsZS10ZXh0IiBpZD0idHh0LXJ1bGVzIiBjb250ZW50ZWRpdGFibGU9InRydWUiIHN0eWxlPSJmb250LXNpemU6MC45cmVtOyI+LSBMZXMgw6lsw6h2ZXMgZG9pdmVudCBzZSBwcsOpc2VudGVyIDMwIG1pbnV0ZXMgYXZhbnQgbGUgZMOpYnV0IGRlIGNoYXF1ZSDDqXByZXV2ZS48YnI+LSBMZXMgdMOpbMOpcGhvbmVzIHBvcnRhYmxlcyBzb250IHN0cmljdGVtZW50IGludGVyZGl0cy4gVG91dCBjb21tZSBsZXMgbW9udHJlcyBjb25uZWN0w6llcy48YnI+LSBQacOoY2UgZCdpZGVudGl0w6kgb2JsaWdhdG9pcmUuPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iY29udm9jLWZvb3RlciIgc3R5bGU9Imp1c3RpZnktY29udGVudDogZmxleC1lbmQ7Ij48ZGl2IGNsYXNzPSJjb252b2Mtc2lnbiIgc3R5bGU9InRleHQtYWxpZ246cmlnaHQ7Ij48ZGl2PkZhaXQgw6AgPHNwYW4gaWQ9InR4dC1jaXR5IiBjb250ZW50ZWRpdGFibGU9InRydWUiIHN0eWxlPSJib3JkZXItYm90dG9tOjFweCBkb3R0ZWQgIzAwMDsiPlZpbGxlPC9zcGFuPiwgbGUgPHNwYW4gaWQ9ImN1cnJlbnQtZGF0ZSI+PC9zcGFuPjwvZGl2PjxkaXYgc3R5bGU9Im1hcmdpbi10b3A6MTVweDsgZm9udC13ZWlnaHQ6Ym9sZDsiIGlkPSJjb252b2Mtc2lnbi1uYW1lIj48L2Rpdj48ZGl2IHN0eWxlPSJmb250LXN0eWxlOml0YWxpYzsiIGlkPSJjb252b2Mtc2lnbi1yb2xlIj48L2Rpdj48aW1nIGlkPSJjb252b2Mtc2lnbi1pbWciIHN0eWxlPSJtYXgtaGVpZ2h0OjYwcHg7IG1hcmdpbi10b3A6MTBweDsiPjwvZGl2PjwvZGl2PgogICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8L2Rpdj4KCiAgICAgICAgICAgIDxkaXYgaWQ9InZpZXc1IiBjbGFzcz0ic2VjdGlvbi12aWV3Ij4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImhlYWRlci1wYW5lbCI+PGgyPjxpIGNsYXNzPSJmYS1zb2xpZCBmYS1pZC1iYWRnZSI+PC9pPiA1LiBDb252b2NhdGlvbnMgU3VydmVpbGxhbnRzPC9oMj48L2Rpdj4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImNvbnRyb2xzLWJhciI+CiAgICAgICAgICAgICAgICAgICAgPGxhYmVsPkltcHJpbWVyIHBvdXIgOjwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgPHNlbGVjdCBpZD0iY29udm9jLXN1cnYtZmlsdGVyIiBzdHlsZT0icGFkZGluZzo4cHg7IGJvcmRlci1yYWRpdXM6NXB4OyBtYXJnaW4tbGVmdDoxMHB4OyI+PG9wdGlvbiB2YWx1ZT0iQUxMIj5Ub3VzIGxlcyBzdXJ2ZWlsbGFudHM8L29wdGlvbj48L3NlbGVjdD4KICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJhY3Rpb24tYnRuIGJ0bi1wcmludCIgb25jbGljaz0icHJpbnRTdXJ2ZWlsbGFudENvbnZvY2F0aW9ucygpIiBzdHlsZT0ibWFyZ2luLWxlZnQ6YXV0bzsiPjxpIGNsYXNzPSJmYS1zb2xpZCBmYS1wcmludCI+PC9pPiBJbXByaW1lcjwvYnV0dG9uPgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJsYXlvdXQtc2V0dGluZ3MiPgogICAgICAgICAgICAgICAgICAgIDxsYWJlbD5IYXV0IDxpbnB1dCB0eXBlPSJudW1iZXIiIGlkPSJzZXRzLXN1cnYtdG9wIiB2YWx1ZT0iMjAiIG9uY2hhbmdlPSJhcHBseUxheW91dCgnc3VydicpIj48L2xhYmVsPgogICAgICAgICAgICAgICAgICAgIDxsYWJlbD5CYXMgPGlucHV0IHR5cGU9Im51bWJlciIgaWQ9InNldHMtc3Vydi1ib3QiIHZhbHVlPSIyMCIgb25jaGFuZ2U9ImFwcGx5TGF5b3V0KCdzdXJ2JykiPjwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgPGxhYmVsPlBvbGljZSA8aW5wdXQgdHlwZT0ibnVtYmVyIiBpZD0ic2V0cy1zdXJ2LWZvbnQiIHZhbHVlPSIxNiIgb25jaGFuZ2U9ImFwcGx5TGF5b3V0KCdzdXJ2JykiPjwvbGFiZWw+CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9ImRpc3BsYXk6ZmxleDsganVzdGlmeS1jb250ZW50OmNlbnRlcjsgYmFja2dyb3VuZDojY2NjOyBwYWRkaW5nOjIwcHg7IG92ZXJmbG93LXk6YXV0bzsgaGVpZ2h0OmNhbGMoMTAwdmggLSAzMDBweCk7Ij4KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJwYXBlci1zaGVldCIgaWQ9ImNvbnZvYy1zdXJ2LXRlbXBsYXRlIj4KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iY29udm9jLWhlYWRlci1yb3ciPjxkaXYgY2xhc3M9ImNvbnZvYy1hZGRyZXNzIj48dGV4dGFyZWEgaWQ9InR4dC1zdXJ2LWFkZHJlc3MiIHBsYWNlaG9sZGVyPSJOb20gw6l0YWJsaXNzZW1lbnQuLi4iPjwvdGV4dGFyZWE+PC9kaXY+PGltZyBpZD0iY29udm9jLXN1cnYtbG9nby1pbWciIGNsYXNzPSJjb252b2MtbG9nbyI+PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImNvbnZvYy10aXRsZSIgaWQ9InR4dC1zdXJ2LXRpdGxlLWRpc3BsYXkiPkNPTlZPQ0FUSU9OIDxzcGFuIGlkPSJ0eHQtdGl0bGUtZXh0cmEtc3VydiIgY29udGVudGVkaXRhYmxlPSJ0cnVlIiBzdHlsZT0iYm9yZGVyLWJvdHRvbTogMXB4IGRvdHRlZCAjMDAwOyBtaW4td2lkdGg6IDUwcHg7IGRpc3BsYXk6IGlubGluZS1ibG9jazsiPlNVUlZFSUxMQU5DRVM8L3NwYW4+PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImNvbnZvYy1zdHVkZW50LWluZm8iPjxzdHJvbmc+U3VydmVpbGxhbnQgOjwvc3Ryb25nPiBbTm9tXTwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJjb252b2MtYm9keSBlZGl0YWJsZS10ZXh0IiBpZD0idHh0LXN1cnYtYm9keSIgY29udGVudGVkaXRhYmxlPSJ0cnVlIj5Wb3VzIMOqdGVzIGNvbnZvcXXDqShlKSBwb3VyIGxlcyBzdXJ2ZWlsbGFuY2VzIHN1aXZhbnRlcyA6PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgIDx0YWJsZSBjbGFzcz0iY29udm9jLXRhYmxlIj48dGhlYWQ+PHRyPjx0aD7DiXByZXV2ZTwvdGg+PHRoPkRhdGU8L3RoPjx0aD5Ib3JhaXJlPC90aD48dGg+RHVyw6llPC90aD48dGg+U2FsbGU8L3RoPjwvdHI+PC90aGVhZD48dGJvZHk+PHRyPjx0ZCBjb2xzcGFuPSI1Ij4uLi48L3RkPjwvdHI+PC90Ym9keT48L3RhYmxlPgogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJjb252b2MtcnVsZXMgZWRpdGFibGUtdGV4dCIgaWQ9InR4dC1zdXJ2LXJ1bGVzIiBjb250ZW50ZWRpdGFibGU9InRydWUiPk1lcmNpIGRlIHZvdHJlIHByw6lzZW5jZSAzMCBtaW51dGVzIGF2YW50IGxlIGTDqWJ1dCBkZSBsJ8OpcHJldXZlLjwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJjb252b2MtZm9vdGVyIiBzdHlsZT0ianVzdGlmeS1jb250ZW50OiBmbGV4LWVuZDsiPjxkaXYgY2xhc3M9ImNvbnZvYy1zaWduIiBzdHlsZT0idGV4dC1hbGlnbjpyaWdodDsiPjxkaXY+RmFpdCDDoCA8c3BhbiBpZD0idHh0LXN1cnYtY2l0eSIgY29udGVudGVkaXRhYmxlPSJ0cnVlIj5WaWxsZTwvc3Bhbj4sIGxlIDxzcGFuIGlkPSJjdXJyZW50LWRhdGUtc3VydiI+PC9zcGFuPjwvZGl2PjxkaXYgaWQ9ImNvbnZvYy1zdXJ2LXNpZ24tbmFtZSIgc3R5bGU9ImZvbnQtd2VpZ2h0OmJvbGQ7IG1hcmdpbi10b3A6MTVweDsiPjwvZGl2PjxkaXYgaWQ9ImNvbnZvYy1zdXJ2LXNpZ24tcm9sZSIgc3R5bGU9ImZvbnQtc3R5bGU6aXRhbGljOyI+PC9kaXY+PGltZyBpZD0iY29udm9jLXN1cnYtc2lnbi1pbWciIHN0eWxlPSJtYXgtaGVpZ2h0OjYwcHg7IG1hcmdpbi10b3A6MTBweDsiPjwvZGl2PjwvZGl2PgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgICAgPGRpdiBpZD0idmlldzYiIGNsYXNzPSJzZWN0aW9uLXZpZXciPgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iaGVhZGVyLXBhbmVsIj48aDI+PGkgY2xhc3M9ImZhLXNvbGlkIGZhLWNsaXBib2FyZC1saXN0Ij48L2k+IDYuIMOJbWFyZ2VtZW50cyBldCBBZmZpY2hhZ2U8L2gyPjwvZGl2PgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iY29udHJvbHMtYmFyIj4KICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJmb250LXNpemU6MC45cmVtOyBjb2xvcjojNTU1OyBtYXJnaW4tcmlnaHQ6MTVweDsiPkZpbHRyZSBzYWxsZSAobGFpc3NlciBzdXIgVE9VVCBwb3VyIHRvdXQgaW1wcmltZXIpIDo8L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8c2VsZWN0IGlkPSJlbWFyZ2VtZW50LXJvb20tZmlsdGVyIiBzdHlsZT0icGFkZGluZzo4cHg7IGJvcmRlci1yYWRpdXM6NXB4OyBtYXJnaW4tbGVmdDoxMHB4OyI+PG9wdGlvbiB2YWx1ZT0iQUxMIj5Ub3V0ZXMgbGVzIHNhbGxlcyB1dGlsaXPDqWVzPC9vcHRpb24+PC9zZWxlY3Q+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0ibWFyZ2luLWxlZnQ6YXV0bzsgZGlzcGxheTpmbGV4OyBnYXA6MTBweDsiPgogICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJhY3Rpb24tYnRuIGJ0bi1wcmludCIgb25jbGljaz0icHJpbnREaXNwbGF5TGlzdCgpIj5JbXByaW1lciBMaXN0ZXMgZCdhZmZpY2hhZ2UgKFRvdXRlcyDDiXByZXV2ZXMpPC9idXR0b24+CiAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImFjdGlvbi1idG4gYnRuLXByaW50IiBvbmNsaWNrPSJwcmludEVtYXJnZW1lbnQoKSI+SW1wcmltZXIgw4ltYXJnZW1lbnRzIChUb3V0ZXMgw4lwcmV1dmVzKTwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJiYWNrZ3JvdW5kOiNlZWU7IHBhZGRpbmc6MjBweDsgdGV4dC1hbGlnbjpjZW50ZXI7IGNvbG9yOiAjNTU1OyI+TGVzIGRvY3VtZW50cyBzZXJvbnQgZ8OpbsOpcsOpcyBwb3VyIDxzdHJvbmc+dG91dGVzIGxlcyDDqXByZXV2ZXM8L3N0cm9uZz4uPGJyPkNoYXF1ZSBzYWxsZSBzZXJhIHN1ciB1bmUgbm91dmVsbGUgcGFnZS48L2Rpdj4KICAgICAgICAgICAgPC9kaXY+CgogICAgICAgICAgICA8ZGl2IGlkPSJ2aWV3NyIgY2xhc3M9InNlY3Rpb24tdmlldyI+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJoZWFkZXItcGFuZWwiPjxoMj48aSBjbGFzcz0iZmEtc29saWQgZmEtZmlsZS1zaWduYXR1cmUiPjwvaT4gNy4gUHJvY8OocyBWZXJiYWwgZXQgUG9jaGV0dGVzPC9oMj48L2Rpdj4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImNvbnRyb2xzLWJhciI+CiAgICAgICAgICAgICAgICAgICAgPHNlbGVjdCBpZD0icHYtZXhhbS1zZWxlY3QiIG9uY2hhbmdlPSJ1cGRhdGVQVlJvb21TZWxlY3QoKSI+PC9zZWxlY3Q+CiAgICAgICAgICAgICAgICAgICAgPHNlbGVjdCBpZD0icHYtcm9vbS1zZWxlY3QiPjwvc2VsZWN0PgogICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9Im1hcmdpbi1sZWZ0OmF1dG87IGRpc3BsYXk6ZmxleDsgZ2FwOjEwcHg7Ij4KICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYWN0aW9uLWJ0biBidG4tcHJpbnQiIG9uY2xpY2s9InByaW50UFYoKSI+SW1wcmltZXIgUFY8L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYWN0aW9uLWJ0biBidG4tcHJpbnQiIG9uY2xpY2s9InByaW50UG9jaGV0dGVzKCkiPkltcHJpbWVyIFBvY2hldHRlczwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJjYXJkIj4KICAgICAgICAgICAgICAgICAgICA8aDM+Q29uc2lnbmVzIChwb3VyIGxhIHBvY2hldHRlKTwvaDM+CiAgICAgICAgICAgICAgICAgICAgPHRleHRhcmVhIGlkPSJ0eHQtcG9jaGV0dGUtc3VydiIgc3R5bGU9IndpZHRoOjEwMCU7IGhlaWdodDoyNTBweDsgcGFkZGluZzoxMHB4OyBib3JkZXI6MXB4IHNvbGlkICNjY2M7IGJvcmRlci1yYWRpdXM6NHB4OyIgb25pbnB1dD0ic2F2ZVBvY2hldHRlVGV4dCgnc3VydicsIHRoaXMudmFsdWUpIj48L3RleHRhcmVhPgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgICAgPGRpdiBpZD0idmlldzgiIGNsYXNzPSJzZWN0aW9uLXZpZXciPgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iaGVhZGVyLXBhbmVsIj48aDI+PGkgY2xhc3M9ImZhLXNvbGlkIGZhLXRhYmxlLWxpc3QiPjwvaT4gOC4gVGFibGVhdSBSw6ljYXBpdHVsYXRpZjwvaDI+PC9kaXY+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJjb250cm9scy1iYXIiPgogICAgICAgICAgICAgICAgICAgIDxsYWJlbD7DiXByZXV2ZSA6PC9sYWJlbD4gPHNlbGVjdCBpZD0icmVjYXAtZXhhbS1zZWxlY3QiIG9uY2hhbmdlPSJ1cGRhdGVSZWNhcFJvb21TZWxlY3QoKSI+PC9zZWxlY3Q+CiAgICAgICAgICAgICAgICAgICAgPGxhYmVsIHN0eWxlPSJtYXJnaW4tbGVmdDoxMHB4OyI+U2FsbGUgOjwvbGFiZWw+IDxzZWxlY3QgaWQ9InJlY2FwLXJvb20tc2VsZWN0Ij48L3NlbGVjdD4KICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJhY3Rpb24tYnRuIGJ0bi1wcmludCIgb25jbGljaz0icHJpbnRHbG9iYWxSZWNhcCgpIiBzdHlsZT0ibWFyZ2luLWxlZnQ6YXV0bzsiPkltcHJpbWVyIFRhYmxlYXV4PC9idXR0b24+CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9ImJhY2tncm91bmQ6I2Y5ZjlmOTsgcGFkZGluZzoyMHB4OyB0ZXh0LWFsaWduOmNlbnRlcjsiPkfDqW7DqHJlIHVuIHRhYmxlYXUgcGFyIMOpcHJldXZlIGV0IHBhciBzYWxsZSBpbmRpcXVhbnQgYXV4IMOpbMOodmVzIG/DuSBzZSByZW5kcmUuPC9kaXY+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgIDwvZGl2PgogICAgPC9kaXY+CiAgICA8ZGl2IGlkPSJwcmludC1hcmVhIiBzdHlsZT0iZGlzcGxheTpub25lOyI+PC9kaXY+CgogICAgPHNjcmlwdD4KICAgICAgICAvLyBWQVJJQUJMRSBHTE9CQUxFCiAgICAgICAgbGV0IEFwcFN0YXRlID0geyBjb25maWc6IHt9LCBjb252b2NUZXh0OiB7fSwgc3VydkNvbnZvY1RleHQ6IHt9LCBwb2NoZXR0ZVRleHQ6IHt9LCBsYXlvdXQ6IHsgc3RkOiB7dG9wOjIwLCBib3Q6MjAsIGZvbnQ6MTZ9LCBzdXJ2OiB7dG9wOjIwLCBib3Q6MjAsIGZvbnQ6MTZ9IH0sIGVsZXZlczogW10sIGVwcmV1dmVzOiBbXSwgc2FsbGVzOiBbXSwgc3VydmVpbGxhbnRzOiBbXSwgZGlzdHJpYnV0aW9uRGF0YTogW10sIGN1cnJlbnRFeGFtSW5kZXg6IDAgfTsKICAgICAgICBjb25zdCBub3JtYWxpemUgPSBzID0+IHMgPyBzLnRvU3RyaW5nKCkudG9Mb3dlckNhc2UoKS50cmltKCkgOiAnJzsKICAgICAgICBjb25zdCBub3JtQ2xhc3MgPSAocykgPT4gcyA/IFN0cmluZyhzKS50b1VwcGVyQ2FzZSgpLnJlcGxhY2UoL1xzKy9nLCAnJykudHJpbSgpIDogIk4vQSI7CgogICAgICAgIC8vIEZVTkNUSU9OIERJU1BMQVkgRFVSQVRJT04gCiAgICAgICAgZnVuY3Rpb24gZm9ybWF0RHVyYXRpb25EaXNwbGF5KHZhbCkgewogICAgICAgICAgICBpZiAoIXZhbCkgcmV0dXJuICIiOwogICAgICAgICAgICBjb25zdCBzID0gU3RyaW5nKHZhbCkudHJpbSgpOwogICAgICAgICAgICBpZiAocy5pbmNsdWRlcygnaCcpIHx8IHMuaW5jbHVkZXMoJzonKSkgewogICAgICAgICAgICAgICAgcmV0dXJuIHMucmVwbGFjZSgnOicsICdoJyk7IAogICAgICAgICAgICB9CiAgICAgICAgICAgIGNvbnN0IG51bSA9IHBhcnNlRmxvYXQocyk7CiAgICAgICAgICAgIGlmICghaXNOYU4obnVtKSkgewogICAgICAgICAgICAgICAgY29uc3QgaCA9IE1hdGguZmxvb3IobnVtIC8gNjApOwogICAgICAgICAgICAgICAgY29uc3QgbSA9IE1hdGgucm91bmQobnVtICUgNjApOwogICAgICAgICAgICAgICAgY29uc3QgbVN0ciA9IG0gPCAxMCA/ICcwJyArIG0gOiBtOwogICAgICAgICAgICAgICAgaWYoaCA+IDApIHJldHVybiBgJHtofWgke21TdHJ9YDsKICAgICAgICAgICAgICAgIHJldHVybiBgJHttfSBtaW5gOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiBzOwogICAgICAgIH0KICAgICAgICAKICAgICAgICAvLyAtLS0gTk9VVkVMTEUgRk9OQ1RJT04gREUgVFJJIFJPQlVTVEUgREFURSBGUkFOQ0FJU0UgKyBIRVVSRSAoU3DDqWNpZmlxdWUgT3JhdXgpIC0tLQogICAgICAgIGZ1bmN0aW9uIGdldERhdGVUaW1lVmFsdWUoZXhhbVJhdywgc3R1ZGVudFJvb21EYXRhLCBpc1RUKSB7CiAgICAgICAgICAgIGxldCBkVmFsID0gZ2V0VmFsdWUoZXhhbVJhdywgWydEYXRlJywgJ0pvdXInLCAnRGF0ZSDDqXByZXV2ZScsICdEYXRlIGRlYnV0J10pOwogICAgICAgICAgICBsZXQgZGF0ZU9iaiA9IG51bGw7CiAgICAgICAgICAgIGNvbnN0IGZyZW5jaE1vbnRocyA9IHsKICAgICAgICAgICAgICAgICdqYW52aWVyJzogMCwgJ2bDqXZyaWVyJzogMSwgJ2ZldnJpZXInOiAxLCAnbWFycyc6IDIsICdhdnJpbCc6IDMsICdtYWknOiA0LCAnanVpbic6IDUsCiAgICAgICAgICAgICAgICAnanVpbGxldCc6IDYsICdhb8O7dCc6IDcsICdhb3V0JzogNywgJ3NlcHRlbWJyZSc6IDgsICdvY3RvYnJlJzogOSwgJ25vdmVtYnJlJzogMTAsICdkw6ljZW1icmUnOiAxMSwgJ2RlY2VtYnJlJzogMTEKICAgICAgICAgICAgfTsKICAgICAgICAgICAgaWYgKGRWYWwpIHsKICAgICAgICAgICAgICAgIGlmICghaXNOYU4oZFZhbCkgJiYgZFZhbCA+IDIwMDAwKSB7CiAgICAgICAgICAgICAgICAgICAgIGRhdGVPYmogPSBuZXcgRGF0ZSgoZFZhbCAtIDI1NTY5KSAqIDg2NDAwICogMTAwMCk7CiAgICAgICAgICAgICAgICB9IAogICAgICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mIGRWYWwgPT09ICdzdHJpbmcnKSB7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgY2xlYW5WYWwgPSBkVmFsLnRvTG93ZXJDYXNlKCkudHJpbSgpOwogICAgICAgICAgICAgICAgICAgIGlmIChjbGVhblZhbC5pbmNsdWRlcygnLycpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhcnRzID0gY2xlYW5WYWwuc3BsaXQoJy8nKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBhcnRzLmxlbmd0aCA9PT0gMykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZU9iaiA9IG5ldyBEYXRlKHBhcnNlSW50KHBhcnRzWzJdKSwgcGFyc2VJbnQocGFydHNbMV0pIC0gMSwgcGFyc2VJbnQocGFydHNbMF0pKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGV4dE1hdGNoID0gY2xlYW5WYWwubWF0Y2goLyhcZHsxLDJ9fDFlcilccysoW2EtesOpw7tdKykvKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRleHRNYXRjaCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGRheSA9ICh0ZXh0TWF0Y2hbMV0gPT09ICcxZXInKSA/IDEgOiBwYXJzZUludCh0ZXh0TWF0Y2hbMV0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG1vbnRoTmFtZSA9IHRleHRNYXRjaFsyXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmcmVuY2hNb250aHMuaGFzT3duUHJvcGVydHkobW9udGhOYW1lKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRZZWFyID0gbmV3IERhdGUoKS5nZXRGdWxsWWVhcigpOyAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRlT2JqID0gbmV3IERhdGUoY3VycmVudFllYXIsIGZyZW5jaE1vbnRoc1ttb250aE5hbWVdLCBkYXkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmICghZGF0ZU9iaiB8fCBpc05hTihkYXRlT2JqLmdldFRpbWUoKSkpIGRhdGVPYmogPSBuZXcgRGF0ZSgwKTsgCiAgICAgICAgICAgIGxldCB0VmFsOwogICAgICAgICAgICBpZiAoc3R1ZGVudFJvb21EYXRhICYmIHN0dWRlbnRSb29tRGF0YS5wYXNzYWdlVGltZSkgewogICAgICAgICAgICAgICAgdFZhbCA9IHN0dWRlbnRSb29tRGF0YS5wYXNzYWdlVGltZTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHRWYWwgPSBpc1RUID8gZ2V0VmFsdWUoZXhhbVJhdywgWydIZXVyZSBkZSBkw6lidXQgdGllcnMgdGVtcHMnLCAnSGV1cmUgVFQnLCAnSGV1cmUgZMOpYnV0IFRUJ10pIDogZ2V0VmFsdWUoZXhhbVJhdywgWydIZXVyZSBkZSBkw6lidXQnLCAnSGV1cmUnLCAnSG9yYWlyZSddKTsKICAgICAgICAgICAgICAgIGlmICghdFZhbCkgdFZhbCA9IGdldFZhbHVlKGV4YW1SYXcsIFsnSGV1cmUgZGUgZMOpYnV0JywgJ0hldXJlJywgJ0hvcmFpcmUnXSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgbGV0IGhvdXJzID0gMCwgbWludXRlcyA9IDA7CiAgICAgICAgICAgIGlmKHRWYWwpIHsKICAgICAgICAgICAgICAgIGxldCB0U3RyID0gU3RyaW5nKHRWYWwpLnRvTG93ZXJDYXNlKCkucmVwbGFjZSgnaCcsICc6JykucmVwbGFjZSgnLicsICc6JykudHJpbSgpOwogICAgICAgICAgICAgICAgY29uc3QgdFBhcnRzID0gdFN0ci5zcGxpdCgnOicpOwogICAgICAgICAgICAgICAgaWYodFBhcnRzLmxlbmd0aCA+PSAxKSBob3VycyA9IHBhcnNlSW50KHRQYXJ0c1swXSkgfHwgMDsKICAgICAgICAgICAgICAgIGlmKHRQYXJ0cy5sZW5ndGggPj0gMikgbWludXRlcyA9IHBhcnNlSW50KHRQYXJ0c1sxXSkgfHwgMDsKICAgICAgICAgICAgfQogICAgICAgICAgICBkYXRlT2JqLnNldEhvdXJzKGhvdXJzLCBtaW51dGVzLCAwLCAwKTsKICAgICAgICAgICAgcmV0dXJuIGRhdGVPYmouZ2V0VGltZSgpOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gc3luY1N0YXRlRnJvbURPTSgpIHsKICAgICAgICAgICAgQXBwU3RhdGUuY29uZmlnLm5hbWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29uZmlnTmFtZScpLnZhbHVlOwogICAgICAgICAgICBBcHBTdGF0ZS5jb25maWcucm9sZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb25maWdSb2xlJykudmFsdWU7CiAgICAgICAgICAgIEFwcFN0YXRlLmNvbmZpZy5leGFtVGl0bGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29uZmlnRXhhbVRpdGxlJykudmFsdWU7CiAgICAgICAgICAgIGlmKCFBcHBTdGF0ZS5jb252b2NUZXh0KSBBcHBTdGF0ZS5jb252b2NUZXh0ID0ge307CiAgICAgICAgICAgIEFwcFN0YXRlLmNvbnZvY1RleHQuYWRkcmVzcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0eHQtYWRkcmVzcycpLnZhbHVlOwogICAgICAgICAgICBBcHBTdGF0ZS5jb252b2NUZXh0LmJvZHkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndHh0LWJvZHknKS5pbm5lckhUTUw7CiAgICAgICAgICAgIEFwcFN0YXRlLmNvbnZvY1RleHQucnVsZXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndHh0LXJ1bGVzJykuaW5uZXJIVE1MOwogICAgICAgICAgICBBcHBTdGF0ZS5jb252b2NUZXh0LmNpdHkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndHh0LWNpdHknKS5pbm5lclRleHQ7CiAgICAgICAgICAgIEFwcFN0YXRlLmNvbnZvY1RleHQudGl0bGVFeHRyYVN0ZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0eHQtdGl0bGUtZXh0cmEtc3RkJykuaW5uZXJUZXh0OwogICAgICAgICAgICBpZighQXBwU3RhdGUubGF5b3V0LnN0ZCkgQXBwU3RhdGUubGF5b3V0LnN0ZCA9IHt9OwogICAgICAgICAgICBBcHBTdGF0ZS5sYXlvdXQuc3RkLnRvcCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZXRzLXN0ZC10b3AnKS52YWx1ZTsKICAgICAgICAgICAgQXBwU3RhdGUubGF5b3V0LnN0ZC5ib3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2V0cy1zdGQtYm90JykudmFsdWU7CiAgICAgICAgICAgIEFwcFN0YXRlLmxheW91dC5zdGQuZm9udCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZXRzLXN0ZC1mb250JykudmFsdWU7CiAgICAgICAgICAgIGlmKCFBcHBTdGF0ZS5sYXlvdXQuc3VydikgQXBwU3RhdGUubGF5b3V0LnN1cnYgPSB7fTsKICAgICAgICAgICAgQXBwU3RhdGUubGF5b3V0LnN1cnYudG9wID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NldHMtc3Vydi10b3AnKS52YWx1ZTsKICAgICAgICAgICAgQXBwU3RhdGUubGF5b3V0LnN1cnYuYm90ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NldHMtc3Vydi1ib3QnKS52YWx1ZTsKICAgICAgICAgICAgQXBwU3RhdGUubGF5b3V0LnN1cnYuZm9udCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZXRzLXN1cnYtZm9udCcpLnZhbHVlOwogICAgICAgICAgICBpZighQXBwU3RhdGUuc3VydkNvbnZvY1RleHQpIEFwcFN0YXRlLnN1cnZDb252b2NUZXh0ID0ge307CiAgICAgICAgICAgIEFwcFN0YXRlLnN1cnZDb252b2NUZXh0LmFkZHJlc3MgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndHh0LXN1cnYtYWRkcmVzcycpLnZhbHVlOwogICAgICAgICAgICBBcHBTdGF0ZS5zdXJ2Q29udm9jVGV4dC5ib2R5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3R4dC1zdXJ2LWJvZHknKS5pbm5lckhUTUw7CiAgICAgICAgICAgIEFwcFN0YXRlLnN1cnZDb252b2NUZXh0LnJ1bGVzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3R4dC1zdXJ2LXJ1bGVzJykuaW5uZXJIVE1MOwogICAgICAgICAgICBBcHBTdGF0ZS5zdXJ2Q29udm9jVGV4dC5jaXR5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3R4dC1zdXJ2LWNpdHknKS5pbm5lclRleHQ7CiAgICAgICAgICAgIEFwcFN0YXRlLnN1cnZDb252b2NUZXh0LnRpdGxlRXh0cmFTdXJ2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3R4dC10aXRsZS1leHRyYS1zdXJ2JykuaW5uZXJUZXh0OwogICAgICAgICAgICBpZighQXBwU3RhdGUucG9jaGV0dGVUZXh0KSBBcHBTdGF0ZS5wb2NoZXR0ZVRleHQgPSB7fTsKICAgICAgICAgICAgQXBwU3RhdGUucG9jaGV0dGVUZXh0LnN1cnYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndHh0LXBvY2hldHRlLXN1cnYnKS52YWx1ZTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIHNhdmVQcm9qZWN0KCkgewogICAgICAgICAgICBzeW5jU3RhdGVGcm9tRE9NKCk7CiAgICAgICAgICAgIGNvbnN0IGRhdGFTdHIgPSBKU09OLnN0cmluZ2lmeShBcHBTdGF0ZSk7CiAgICAgICAgICAgIGNvbnN0IGJsb2IgPSBuZXcgQmxvYihbZGF0YVN0cl0sIHt0eXBlOiAiYXBwbGljYXRpb24vanNvbiJ9KTsKICAgICAgICAgICAgY29uc3QgdXJsID0gVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTsKICAgICAgICAgICAgY29uc3QgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTsKICAgICAgICAgICAgYS5ocmVmID0gdXJsOwogICAgICAgICAgICBjb25zdCBkID0gbmV3IERhdGUoKTsKICAgICAgICAgICAgY29uc3QgZGF0ZVN0ciA9IGQudG9JU09TdHJpbmcoKS5zcGxpdCgnVCcpWzBdOwogICAgICAgICAgICBhLmRvd25sb2FkID0gYFBST0pFVF9FWEFNXyR7ZGF0ZVN0cn0uanNvbmA7CiAgICAgICAgICAgIGEuY2xpY2soKTsKICAgICAgICAgICAgVVJMLnJldm9rZU9iamVjdFVSTCh1cmwpOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gbG9hZFByb2plY3QoaW5wdXQpIHsKICAgICAgICAgICAgY29uc3QgZmlsZSA9IGlucHV0LmZpbGVzWzBdOwogICAgICAgICAgICBpZiAoIWZpbGUpIHJldHVybjsKICAgICAgICAgICAgY29uc3QgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTsKICAgICAgICAgICAgcmVhZGVyLm9ubG9hZCA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgQXBwU3RhdGUgPSBKU09OLnBhcnNlKGUudGFyZ2V0LnJlc3VsdCk7CiAgICAgICAgICAgICAgICAgICAgcmVzdG9yZVByb2plY3RVSSgpOwogICAgICAgICAgICAgICAgICAgIGFsZXJ0KCJQcm9qZXQgY2hhcmfDqSBhdmVjIHN1Y2PDqHMgISIpOwogICAgICAgICAgICAgICAgfSBjYXRjaChlcnIpIHsgY29uc29sZS5lcnJvcihlcnIpOyBhbGVydCgiRXJyZXVyIGxvcnMgZGUgbGEgbGVjdHVyZS4iKTsgfQogICAgICAgICAgICB9OwogICAgICAgICAgICByZWFkZXIucmVhZEFzVGV4dChmaWxlKTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIHJlc3RvcmVQcm9qZWN0VUkoKSB7CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb25maWdOYW1lJykudmFsdWUgPSBBcHBTdGF0ZS5jb25maWcubmFtZSB8fCAiIjsKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbmZpZ1JvbGUnKS52YWx1ZSA9IEFwcFN0YXRlLmNvbmZpZy5yb2xlIHx8ICIiOwogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29uZmlnRXhhbVRpdGxlJykudmFsdWUgPSBBcHBTdGF0ZS5jb25maWcuZXhhbVRpdGxlIHx8ICIiOwogICAgICAgICAgICBpZihBcHBTdGF0ZS5jb25maWcubG9nb1NyYykgeyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbG9nb1ByZXZpZXcnKS5zcmMgPSBBcHBTdGF0ZS5jb25maWcubG9nb1NyYzsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvZ29QcmV2aWV3Jykuc3R5bGUuZGlzcGxheT0nYmxvY2snOyB9CiAgICAgICAgICAgIGlmKEFwcFN0YXRlLmNvbmZpZy5zaWduU3JjKSB7IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzaWduUHJldmlldycpLnNyYyA9IEFwcFN0YXRlLmNvbmZpZy5zaWduU3JjOyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2lnblByZXZpZXcnKS5zdHlsZS5kaXNwbGF5PSdibG9jayc7IH0KICAgICAgICAgICAgaWYoQXBwU3RhdGUuZWxldmVzICYmIEFwcFN0YXRlLmVsZXZlcy5sZW5ndGgpIHVwZGF0ZVN0YXR1cygnem9uZS1lbGV2ZXMnLCAnc3RhdHVzLWVsZXZlcycsIGAke0FwcFN0YXRlLmVsZXZlcy5sZW5ndGh9IMOpbMOodmVzYCk7CiAgICAgICAgICAgIGlmKEFwcFN0YXRlLmVwcmV1dmVzICYmIEFwcFN0YXRlLmVwcmV1dmVzLmxlbmd0aCkgdXBkYXRlU3RhdHVzKCd6b25lLWVwcmV1dmVzJywgJ3N0YXR1cy1lcHJldXZlcycsIGAke0FwcFN0YXRlLmVwcmV1dmVzLmxlbmd0aH0gw6lwcmV1dmVzYCk7CiAgICAgICAgICAgIGlmKEFwcFN0YXRlLnNhbGxlcyAmJiBBcHBTdGF0ZS5zYWxsZXMubGVuZ3RoKSB1cGRhdGVTdGF0dXMoJ3pvbmUtcmVzc291cmNlcycsICdzdGF0dXMtcmVzc291cmNlcycsIGAke0FwcFN0YXRlLnNhbGxlcy5sZW5ndGh9IHNhbGxlc2ApOwogICAgICAgICAgICBpZihBcHBTdGF0ZS5zdXJ2ZWlsbGFudHMgJiYgQXBwU3RhdGUuc3VydmVpbGxhbnRzLmxlbmd0aCkgdXBkYXRlU3RhdHVzKCd6b25lLXN1cnZlaWxsYW50cycsICdzdGF0dXMtc3VydmVpbGxhbnRzJywgYCR7QXBwU3RhdGUuc3VydmVpbGxhbnRzLmxlbmd0aH0gc3VydmVpbGxhbnRzYCk7CiAgICAgICAgICAgIGlmKEFwcFN0YXRlLmRpc3RyaWJ1dGlvbkRhdGEgJiYgQXBwU3RhdGUuZGlzdHJpYnV0aW9uRGF0YS5sZW5ndGgpIHsgcmVuZGVyRXhhbU5hdmlnYXRpb24oKTsgcmVuZGVyQ3VycmVudEV4YW0oKTsgfQogICAgICAgICAgICBpZihBcHBTdGF0ZS5jb252b2NUZXh0KSB7CiAgICAgICAgICAgICAgICBpZihBcHBTdGF0ZS5jb252b2NUZXh0LmFkZHJlc3MpIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0eHQtYWRkcmVzcycpLnZhbHVlID0gQXBwU3RhdGUuY29udm9jVGV4dC5hZGRyZXNzOwogICAgICAgICAgICAgICAgaWYoQXBwU3RhdGUuY29udm9jVGV4dC5ib2R5KSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndHh0LWJvZHknKS5pbm5lckhUTUwgPSBBcHBTdGF0ZS5jb252b2NUZXh0LmJvZHk7CiAgICAgICAgICAgICAgICBpZihBcHBTdGF0ZS5jb252b2NUZXh0LnJ1bGVzKSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndHh0LXJ1bGVzJykuaW5uZXJIVE1MID0gQXBwU3RhdGUuY29udm9jVGV4dC5ydWxlczsKICAgICAgICAgICAgICAgIGlmKEFwcFN0YXRlLmNvbnZvY1RleHQuY2l0eSkgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3R4dC1jaXR5JykuaW5uZXJUZXh0ID0gQXBwU3RhdGUuY29udm9jVGV4dC5jaXR5OwogICAgICAgICAgICAgICAgaWYoQXBwU3RhdGUuY29udm9jVGV4dC50aXRsZUV4dHJhU3RkKSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndHh0LXRpdGxlLWV4dHJhLXN0ZCcpLmlubmVyVGV4dCA9IEFwcFN0YXRlLmNvbnZvY1RleHQudGl0bGVFeHRyYVN0ZDsKICAgICAgICAgICAgfQogICAgICAgICAgICAgaWYoQXBwU3RhdGUuc3VydkNvbnZvY1RleHQpIHsKICAgICAgICAgICAgICAgIGlmKEFwcFN0YXRlLnN1cnZDb252b2NUZXh0LmFkZHJlc3MpIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0eHQtc3Vydi1hZGRyZXNzJykudmFsdWUgPSBBcHBTdGF0ZS5zdXJ2Q29udm9jVGV4dC5hZGRyZXNzOwogICAgICAgICAgICAgICAgaWYoQXBwU3RhdGUuc3VydkNvbnZvY1RleHQuYm9keSkgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3R4dC1zdXJ2LWJvZHknKS5pbm5lckhUTUwgPSBBcHBTdGF0ZS5zdXJ2Q29udm9jVGV4dC5ib2R5OwogICAgICAgICAgICAgICAgaWYoQXBwU3RhdGUuc3VydkNvbnZvY1RleHQucnVsZXMpIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0eHQtc3Vydi1ydWxlcycpLmlubmVySFRNTCA9IEFwcFN0YXRlLnN1cnZDb252b2NUZXh0LnJ1bGVzOwogICAgICAgICAgICAgICAgaWYoQXBwU3RhdGUuc3VydkNvbnZvY1RleHQuY2l0eSkgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3R4dC1zdXJ2LWNpdHknKS5pbm5lclRleHQgPSBBcHBTdGF0ZS5zdXJ2Q29udm9jVGV4dC5jaXR5OwogICAgICAgICAgICAgICAgaWYoQXBwU3RhdGUuc3VydkNvbnZvY1RleHQudGl0bGVFeHRyYVN1cnYpIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0eHQtdGl0bGUtZXh0cmEtc3VydicpLmlubmVyVGV4dCA9IEFwcFN0YXRlLnN1cnZDb252b2NUZXh0LnRpdGxlRXh0cmFTdXJ2OwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmKEFwcFN0YXRlLnBvY2hldHRlVGV4dCAmJiBBcHBTdGF0ZS5wb2NoZXR0ZVRleHQuc3VydikgeyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndHh0LXBvY2hldHRlLXN1cnYnKS52YWx1ZSA9IEFwcFN0YXRlLnBvY2hldHRlVGV4dC5zdXJ2OyB9IGVsc2UgeyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndHh0LXBvY2hldHRlLXN1cnYnKS52YWx1ZSA9IGRlZmF1bHRDb25zaWduZXM7IH0KICAgICAgICAgICAgcG9wdWxhdGVDbGFzc0ZpbHRlcigpOyBwb3B1bGF0ZVN1cnZlaWxsYW50RmlsdGVyKCk7IHBvcHVsYXRlRW1hcmdlbWVudEZpbHRlcnMoKTsgcG9wdWxhdGVQVkV4YW1TZWxlY3QoKTsgcG9wdWxhdGVSZWNhcEZpbHRlcnMoKTsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgZnVuY3Rpb24gZ2V0VmFsdWUocm93LCBwb3NzaWJsZUtleXMpIHsKICAgICAgICAgICAgaWYgKCFyb3cpIHJldHVybiBudWxsOwogICAgICAgICAgICBjb25zdCByb3dLZXlzID0gT2JqZWN0LmtleXMocm93KTsKICAgICAgICAgICAgZm9yIChsZXQgcGsgb2YgcG9zc2libGVLZXlzKSB7CiAgICAgICAgICAgICAgICBjb25zdCB0YXJnZXQgPSBub3JtYWxpemUocGspOwogICAgICAgICAgICAgICAgY29uc3QgZm91bmRLZXkgPSByb3dLZXlzLmZpbmQoayA9PiBub3JtYWxpemUoaykgPT09IHRhcmdldCk7CiAgICAgICAgICAgICAgICBpZiAoZm91bmRLZXkpIHJldHVybiByb3dbZm91bmRLZXldOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gaXNUaWVyc1RlbXBzKHZhbCkgeyBpZiAoIXZhbCkgcmV0dXJuIGZhbHNlOyBjb25zdCBzID0gdmFsLnRvU3RyaW5nKCkudG9VcHBlckNhc2UoKTsgcmV0dXJuIHMuaW5jbHVkZXMoJ1RUJykgfHwgcy5pbmNsdWRlcygnT1VJJykgfHwgcy5pbmNsdWRlcygnVElFUlMnKSB8fCBzLmluY2x1ZGVzKCdZRVMnKTsgfQoKICAgICAgICBmdW5jdGlvbiBoYW5kbGVGaWxlKGlucHV0LCB0eXBlKSB7IAogICAgICAgICAgICBjb25zdCBmaWxlID0gaW5wdXQuZmlsZXNbMF07IGlmICghZmlsZSkgcmV0dXJuOwogICAgICAgICAgICBjb25zdCByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpOwogICAgICAgICAgICByZWFkZXIub25sb2FkID0gZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgY29uc3QgZGF0YSA9IG5ldyBVaW50OEFycmF5KGUudGFyZ2V0LnJlc3VsdCk7IAogICAgICAgICAgICAgICAgY29uc3Qgd29ya2Jvb2sgPSBYTFNYLnJlYWQoZGF0YSwge3R5cGU6ICdhcnJheSd9KTsKICAgICAgICAgICAgICAgIGNvbnN0IGpzb25EYXRhID0gWExTWC51dGlscy5zaGVldF90b19qc29uKHdvcmtib29rLlNoZWV0c1t3b3JrYm9vay5TaGVldE5hbWVzWzBdXSk7CiAgICAgICAgICAgICAgICBpZiAodHlwZSA9PT0gJ0VMRVZFUycpIHsgQXBwU3RhdGUuZWxldmVzID0ganNvbkRhdGE7IHVwZGF0ZVN0YXR1cygnem9uZS1lbGV2ZXMnLCAnc3RhdHVzLWVsZXZlcycsIGAke2pzb25EYXRhLmxlbmd0aH0gw6lsw6h2ZXNgKTsgfQogICAgICAgICAgICAgICAgZWxzZSBpZiAodHlwZSA9PT0gJ0VQUkVVVkVTJykgeyBBcHBTdGF0ZS5lcHJldXZlcyA9IGpzb25EYXRhOyB1cGRhdGVTdGF0dXMoJ3pvbmUtZXByZXV2ZXMnLCAnc3RhdHVzLWVwcmV1dmVzJywgYCR7anNvbkRhdGEubGVuZ3RofSDDqXByZXV2ZXNgKTsgfQogICAgICAgICAgICAgICAgZWxzZSBpZiAodHlwZSA9PT0gJ1JFU1NPVVJDRVMnKSB7IEFwcFN0YXRlLnNhbGxlcyA9IGpzb25EYXRhOyB1cGRhdGVTdGF0dXMoJ3pvbmUtcmVzc291cmNlcycsICdzdGF0dXMtcmVzc291cmNlcycsIGAke2pzb25EYXRhLmxlbmd0aH0gc2FsbGVzYCk7IH0KICAgICAgICAgICAgICAgIGVsc2UgaWYgKHR5cGUgPT09ICdTVVJWRUlMTEFOVFMnKSB7IEFwcFN0YXRlLnN1cnZlaWxsYW50cyA9IGpzb25EYXRhOyB1cGRhdGVTdGF0dXMoJ3pvbmUtc3VydmVpbGxhbnRzJywgJ3N0YXR1cy1zdXJ2ZWlsbGFudHMnLCBgJHtqc29uRGF0YS5sZW5ndGh9IHN1cnZlaWxsYW50c2ApOyB9CiAgICAgICAgICAgIH07IAogICAgICAgICAgICByZWFkZXIucmVhZEFzQXJyYXlCdWZmZXIoZmlsZSk7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiB1cGRhdGVTdGF0dXMoem9uZUlkLCBzdGF0dXNJZCwgbXNnKSB7IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHpvbmVJZCkuY2xhc3NMaXN0LmFkZCgnbG9hZGVkJyk7IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHN0YXR1c0lkKS5pbm5lckhUTUwgPSAnPGkgY2xhc3M9ImZhLXNvbGlkIGZhLWNoZWNrIj48L2k+ICcgKyBtc2c7IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHN0YXR1c0lkKS5jbGFzc05hbWUgPSAnc3RhdHVzLWJhZGdlIHN0YXR1cy1vayc7IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHN0YXR1c0lkKS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJzsgfQoKICAgICAgICBmdW5jdGlvbiBsYXVuY2hEaXN0cmlidXRpb24oKSB7CiAgICAgICAgICAgIGlmKCFBcHBTdGF0ZS5lcHJldXZlcy5sZW5ndGggfHwgIUFwcFN0YXRlLmVsZXZlcy5sZW5ndGggfHwgIUFwcFN0YXRlLnNhbGxlcy5sZW5ndGgpIHsgYWxlcnQoIkltcG9ydCBtYW5xdWFudC4iKTsgcmV0dXJuOyB9CiAgICAgICAgICAgIGlmKCFjb25maXJtKCJMYW5jZXIgbGUgY2FsY3VsID8gQXR0ZW50aW9uLCBjZWxhIMOpY3Jhc2VyYSBsYSByw6lwYXJ0aXRpb24gZXhpc3RhbnRlLiIpKSByZXR1cm47CiAgICAgICAgICAgIGNvbnN0IG1ldGhvZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkaXN0cmliLW1ldGhvZCcpLnZhbHVlOyAKICAgICAgICAgICAgY29uc3Qgc2NvcGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGlzdHJpYi1zY29wZScpLnZhbHVlOyAgIAogICAgICAgICAgICBjYWxjdWxhdGVEaXN0cmlidXRpb24obWV0aG9kLCBzY29wZSk7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBjYWxjdWxhdGVEaXN0cmlidXRpb24obWV0aG9kLCBzY29wZSkgewogICAgICAgICAgICBjb25zdCBmaXJzdFN0dWRlbnQgPSBBcHBTdGF0ZS5lbGV2ZXNbMF07CiAgICAgICAgICAgIGNvbnN0IGhhc1NwZWNpYWx0eSA9IGdldFZhbHVlKGZpcnN0U3R1ZGVudCwgWydTcMOpY2lhbGl0w6kxJywgJ1NwZTEnLCAnU3BlIDEnXSkgIT09IG51bGw7CiAgICAgICAgICAgIGlmIChzY29wZSA9PT0gJ0FMTCcgfHwgQXBwU3RhdGUuZGlzdHJpYnV0aW9uRGF0YS5sZW5ndGggPT09IDApIEFwcFN0YXRlLmRpc3RyaWJ1dGlvbkRhdGEgPSBuZXcgQXJyYXkoQXBwU3RhdGUuZXByZXV2ZXMubGVuZ3RoKS5maWxsKG51bGwpOwogICAgICAgICAgICBsZXQgaW5kaWNlc1RvUHJvY2VzcyA9IFtdOwogICAgICAgICAgICBpZiAoc2NvcGUgPT09ICdBTEwnKSB7CiAgICAgICAgICAgICAgICBmb3IobGV0IGk9MDsgaTxBcHBTdGF0ZS5lcHJldXZlcy5sZW5ndGg7IGkrKykgaW5kaWNlc1RvUHJvY2Vzcy5wdXNoKGkpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgaW5kaWNlc1RvUHJvY2Vzcy5wdXNoKEFwcFN0YXRlLmN1cnJlbnRFeGFtSW5kZXgpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGluZGljZXNUb1Byb2Nlc3MuZm9yRWFjaChleGFtSWR4ID0+IHsKICAgICAgICAgICAgICAgIGNvbnN0IGV4YW0gPSBBcHBTdGF0ZS5lcHJldXZlc1tleGFtSWR4XTsKICAgICAgICAgICAgICAgIGxldCBleGFtU3RhdGUgPSB7IGV4YW1JZHg6IGV4YW1JZHgsIHN0b3JhZ2U6IFtdLCByb29tczogW10gfTsKICAgICAgICAgICAgICAgIGNvbnN0IG1hdGllcmUgPSBnZXRWYWx1ZShleGFtLCBbJ01hdGnDqHJlJywgJ0VwcmV1dmUnLCAnTm9tJ10pIHx8ICgnw4lwcmV1dmUgJyArIChleGFtSWR4ICsgMSkpOwogICAgICAgICAgICAgICAgbGV0IGNhbmRpZGF0ZXMgPSBBcHBTdGF0ZS5lbGV2ZXMuZmlsdGVyKGUgPT4gewogICAgICAgICAgICAgICAgICAgIGlmICghaGFzU3BlY2lhbHR5KSByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICBjb25zdCBzcGUxID0gZ2V0VmFsdWUoZSwgWydTcMOpY2lhbGl0w6kxJywgJ1NwZTEnLCAnU3BlIDEnXSk7CiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3BlMiA9IGdldFZhbHVlKGUsIFsnU3DDqWNpYWxpdMOpMicsICdTcGUyJywgJ1NwZSAyJ10pOwogICAgICAgICAgICAgICAgICAgIGlmICghc3BlMSAmJiAhc3BlMikgcmV0dXJuIHRydWU7IAogICAgICAgICAgICAgICAgICAgIHJldHVybiAoc3BlMSA9PSBtYXRpZXJlIHx8IHNwZTIgPT0gbWF0aWVyZSB8fCBbIlBoaWxvc29waGllIiwgIkZyYW7Dp2FpcyIsICJIaXN0b2lyZS1Hw6lvIiwgIkVuc2VpZ25lbWVudCBTY2llbnRpZmlxdWUiXS5pbmNsdWRlcyhtYXRpZXJlKSk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIGlmIChtZXRob2QgPT09ICdDTEFTUycpIHsKICAgICAgICAgICAgICAgICAgICBjYW5kaWRhdGVzLnNvcnQoKGEsIGIpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY0EgPSBub3JtQ2xhc3MoZ2V0VmFsdWUoYSwgWydDbGFzc2UnLCAnRGl2J10pKTsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY0IgPSBub3JtQ2xhc3MoZ2V0VmFsdWUoYiwgWydDbGFzc2UnLCAnRGl2J10pKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNBICE9PSBjQikgcmV0dXJuIGNBLmxvY2FsZUNvbXBhcmUoY0IpOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKGdldFZhbHVlKGEsWydOb20nXSl8fCcnKS5sb2NhbGVDb21wYXJlKGdldFZhbHVlKGIsWydOb20nXSl8fCcnKTsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgY2FuZGlkYXRlcy5zb3J0KChhLCBiKSA9PiAoZ2V0VmFsdWUoYSxbJ05vbSddKXx8JycpLmxvY2FsZUNvbXBhcmUoZ2V0VmFsdWUoYixbJ05vbSddKXx8JycpKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGNvbnN0IHR0U3R1ZGVudHMgPSBjYW5kaWRhdGVzLmZpbHRlcihlID0+IGlzVGllcnNUZW1wcyhnZXRWYWx1ZShlLCBbJ1RpZXJzIHRlbXBzJywgJ1RUJ10pKSk7CiAgICAgICAgICAgICAgICBjb25zdCByZWdTdHVkZW50cyA9IGNhbmRpZGF0ZXMuZmlsdGVyKGUgPT4gIWlzVGllcnNUZW1wcyhnZXRWYWx1ZShlLCBbJ1RpZXJzIHRlbXBzJywgJ1RUJ10pKSk7CiAgICAgICAgICAgICAgICBsZXQgcmVtYWluaW5nVFQgPSBbLi4udHRTdHVkZW50c107CiAgICAgICAgICAgICAgICBsZXQgcmVtYWluaW5nUmVnID0gWy4uLnJlZ1N0dWRlbnRzXTsKICAgICAgICAgICAgICAgIEFwcFN0YXRlLnNhbGxlcy5mb3JFYWNoKChzYWxsZSwgcm9vbUlkeCkgPT4gewogICAgICAgICAgICAgICAgICAgIGxldCByYXdOYW1lID0gZ2V0VmFsdWUoc2FsbGUsIFsnU2FsbGUnLCAnTm9tJ10pIHx8ICgnU2FsbGUgJyArIChyb29tSWR4ICsgMSkpOwogICAgICAgICAgICAgICAgICAgIGxldCBjbGVhbk5hbWUgPSByYXdOYW1lLnRvU3RyaW5nKCkucmVwbGFjZSgvXHMqXCg/VFRcKT9ccyokL2ksICcnKTsgCiAgICAgICAgICAgICAgICAgICAgY29uc3Qgcm9vbVR5cGUgPSBnZXRWYWx1ZShzYWxsZSwgWydUeXBlJ10pIHx8ICIiOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IHJvb21DYXAgPSBwYXJzZUludChnZXRWYWx1ZShzYWxsZSwgWydDYXBhY2l0w6knXSkpIHx8IDk5OyAKICAgICAgICAgICAgICAgICAgICBjb25zdCBpc1Jvb21UVCA9IGlzVGllcnNUZW1wcyhyb29tVHlwZSk7CiAgICAgICAgICAgICAgICAgICAgbGV0IGxpc3RUb1VzZSA9IGlzUm9vbVRUID8gcmVtYWluaW5nVFQgOiByZW1haW5pbmdSZWc7CiAgICAgICAgICAgICAgICAgICAgbGV0IHJvb21TdHVkZW50cyA9IFtdOwogICAgICAgICAgICAgICAgICAgIGlmIChtZXRob2QgPT09ICdDTEFTUycpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGxpc3RUb1VzZS5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBmaXJzdFN0dWRlbnRDbGFzcyA9IG5vcm1DbGFzcyhnZXRWYWx1ZShsaXN0VG9Vc2VbMF0sIFsnQ2xhc3NlJywgJ0RpdiddKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgc2FtZUNsYXNzQ291bnQgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yKGxldCBrPTA7IGsgPCBsaXN0VG9Vc2UubGVuZ3RoOyBrKyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobm9ybUNsYXNzKGdldFZhbHVlKGxpc3RUb1VzZVtrXSwgWydDbGFzc2UnLCAnRGl2J10pKSA9PT0gZmlyc3RTdHVkZW50Q2xhc3MpIHNhbWVDbGFzc0NvdW50Kys7IGVsc2UgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhbW91bnRUb1Rha2UgPSBNYXRoLm1pbihyb29tQ2FwLCBzYW1lQ2xhc3NDb3VudCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByb29tU3R1ZGVudHMgPSBsaXN0VG9Vc2Uuc3BsaWNlKDAsIGFtb3VudFRvVGFrZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhbW91bnRUb1Rha2UgPSBNYXRoLm1pbihyb29tQ2FwLCBsaXN0VG9Vc2UubGVuZ3RoKTsKICAgICAgICAgICAgICAgICAgICAgICAgcm9vbVN0dWRlbnRzID0gbGlzdFRvVXNlLnNwbGljZSgwLCBhbW91bnRUb1Rha2UpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICByb29tU3R1ZGVudHMgPSByb29tU3R1ZGVudHMubWFwKHMgPT4gKHsgLi4ucywgcGFzc2FnZVRpbWU6ICIiLCBsb2RnZVRpbWU6ICIiIH0pKTsKICAgICAgICAgICAgICAgICAgICByb29tU3R1ZGVudHMuc29ydCgoYSxiKSA9PiAoZ2V0VmFsdWUoYSxbJ05vbSddKXx8JycpLmxvY2FsZUNvbXBhcmUoZ2V0VmFsdWUoYixbJ05vbSddKXx8JycpKTsKICAgICAgICAgICAgICAgICAgICBleGFtU3RhdGUucm9vbXMucHVzaCh7IG5hbWU6IGNsZWFuTmFtZSwgY2FwYWNpdHk6IHJvb21DYXAsIGlzVFQ6IGlzUm9vbVRULCBzdXJ2ZWlsbGFudHM6IFtdLCBzdHVkZW50czogcm9vbVN0dWRlbnRzIH0pOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBleGFtU3RhdGUuc3RvcmFnZSA9IFsuLi5yZW1haW5pbmdUVCwgLi4ucmVtYWluaW5nUmVnXS5zb3J0KChhLGIpID0+IChnZXRWYWx1ZShhLFsnTm9tJ10pfHwnJykubG9jYWxlQ29tcGFyZShnZXRWYWx1ZShiLFsnTm9tJ10pfHwnJykpOyAKICAgICAgICAgICAgICAgIEFwcFN0YXRlLmRpc3RyaWJ1dGlvbkRhdGFbZXhhbUlkeF0gPSBleGFtU3RhdGU7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBpZiAoc2NvcGUgPT09ICdBTEwnKSBBcHBTdGF0ZS5jdXJyZW50RXhhbUluZGV4ID0gMDsKICAgICAgICAgICAgcmVuZGVyRXhhbU5hdmlnYXRpb24oKTsgcmVuZGVyQ3VycmVudEV4YW0oKTsgcG9wdWxhdGVQVkV4YW1TZWxlY3QoKTsgcG9wdWxhdGVFbWFyZ2VtZW50RmlsdGVycygpOyBwb3B1bGF0ZVJlY2FwRmlsdGVycygpOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gcmVuZGVyRXhhbU5hdmlnYXRpb24oKSB7CiAgICAgICAgICAgIGNvbnN0IG5hdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdleGFtLW5hdmlnYXRpb24nKTsgbmF2LnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7CiAgICAgICAgICAgIGNvbnN0IHNlbGVjdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdleGFtLWRyb3Bkb3duJyk7IHNlbGVjdC5pbm5lckhUTUwgPSAiIjsKICAgICAgICAgICAgQXBwU3RhdGUuZGlzdHJpYnV0aW9uRGF0YS5mb3JFYWNoKChlZCwgaWR4KSA9PiB7CiAgICAgICAgICAgICAgICBpZighZWQgJiYgQXBwU3RhdGUuZXByZXV2ZXNbaWR4XSkgewogICAgICAgICAgICAgICAgICAgIGNvbnN0IGV4YW1JbmZvID0gQXBwU3RhdGUuZXByZXV2ZXNbaWR4XTsKICAgICAgICAgICAgICAgICAgICBjb25zdCBtYXRpZXJlID0gZ2V0VmFsdWUoZXhhbUluZm8sIFsnTWF0acOocmUnLCAnRXByZXV2ZScsICdOb20nXSkgfHwgKCfDiXByZXV2ZSAnICsgKGlkeCsxKSk7CiAgICAgICAgICAgICAgICAgICAgY29uc3Qgb3B0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnb3B0aW9uJyk7IG9wdC52YWx1ZSA9IGlkeDsgb3B0LnRleHQgPSBgJHtpZHgrMX0uICR7bWF0aWVyZX0gKE5vbiBjYWxjdWzDqSlgOwogICAgICAgICAgICAgICAgICAgIHNlbGVjdC5hcHBlbmRDaGlsZChvcHQpOwogICAgICAgICAgICAgICAgfSBlbHNlIGlmKGVkKSB7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgZXhhbUluZm8gPSBBcHBTdGF0ZS5lcHJldXZlc1tlZC5leGFtSWR4XTsKICAgICAgICAgICAgICAgICAgICBjb25zdCBtYXRpZXJlID0gZ2V0VmFsdWUoZXhhbUluZm8sIFsnTWF0acOocmUnLCAnRXByZXV2ZScsICdOb20nXSkgfHwgKCfDiXByZXV2ZSAnICsgKGlkeCsxKSk7CiAgICAgICAgICAgICAgICAgICAgY29uc3Qgb3B0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnb3B0aW9uJyk7IG9wdC52YWx1ZSA9IGlkeDsgb3B0LnRleHQgPSBgJHtpZHgrMX0uICR7bWF0aWVyZX1gOwogICAgICAgICAgICAgICAgICAgIGlmKGlkeCA9PT0gQXBwU3RhdGUuY3VycmVudEV4YW1JbmRleCkgb3B0LnNlbGVjdGVkID0gdHJ1ZTsgc2VsZWN0LmFwcGVuZENoaWxkKG9wdCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gcmVuZGVyQ3VycmVudEV4YW0oKSB7IAogICAgICAgICAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY3VycmVudC1leGFtLWNvbnRhaW5lcicpOyBjb250YWluZXIuaW5uZXJIVE1MID0gIiI7CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdleGFtLWRyb3Bkb3duJykudmFsdWUgPSBBcHBTdGF0ZS5jdXJyZW50RXhhbUluZGV4OwogICAgICAgICAgICBjb25zdCBleGFtU3RhdGUgPSBBcHBTdGF0ZS5kaXN0cmlidXRpb25EYXRhW0FwcFN0YXRlLmN1cnJlbnRFeGFtSW5kZXhdOyAKICAgICAgICAgICAgaWYgKCFleGFtU3RhdGUpIHsKICAgICAgICAgICAgICAgICBjb250YWluZXIuaW5uZXJIVE1MID0gJzxkaXYgY2xhc3M9ImNhcmQiIHN0eWxlPSJ0ZXh0LWFsaWduOmNlbnRlcjsgY29sb3I6I2MwMzkyYjsiPlLDqXBhcnRpdGlvbiBub24gY2FsY3Vsw6llIHBvdXIgY2V0dGUgw6lwcmV1dmUuPC9kaXY+JzsKICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KICAgICAgICAgICAgY29uc3QgZXhhbUluZm8gPSBBcHBTdGF0ZS5lcHJldXZlc1tleGFtU3RhdGUuZXhhbUlkeF07CiAgICAgICAgICAgIGNvbnN0IG1hdGllcmUgPSBnZXRWYWx1ZShleGFtSW5mbywgWydNYXRpw6hyZScsICdFcHJldXZlJywgJ05vbSddKTsKICAgICAgICAgICAgY29uc3QgYmxvY2tIdG1sID0gYDxkaXYgY2xhc3M9ImV4YW0tc2VjdGlvbi1ibG9jayI+PGRpdiBjbGFzcz0iZXhhbS1zZWN0aW9uLWhlYWRlciI+PHNwYW4+JHttYXRpZXJlfTwvc3Bhbj48L2Rpdj48aDQgc3R5bGU9Im1hcmdpbjoxMHB4IDAgNXB4IDA7IGNvbG9yOiM3ZjhjOGQ7IGZvbnQtc2l6ZTowLjlyZW07Ij5ab25lIGRlIHN0b2NrYWdlIChOb24gcGxhY8Opcyk8L2g0PjxkaXYgY2xhc3M9InN0b3JhZ2Utem9uZSIgb25kcm9wPSJkcm9wKGV2ZW50KSIgb25kcmFnb3Zlcj0iYWxsb3dEcm9wKGV2ZW50KSI+PC9kaXY+PGRpdiBjbGFzcz0icm9vbXMtZ3JpZCI+PC9kaXY+PC9kaXY+YDsKICAgICAgICAgICAgY29udGFpbmVyLmluc2VydEFkamFjZW50SFRNTCgnYmVmb3JlZW5kJywgYmxvY2tIdG1sKTsKICAgICAgICAgICAgY29uc3QgYmxvY2sgPSBjb250YWluZXIucXVlcnlTZWxlY3RvcignLmV4YW0tc2VjdGlvbi1ibG9jaycpOwogICAgICAgICAgICBjb25zdCBzdG9yYWdlRGl2ID0gYmxvY2sucXVlcnlTZWxlY3RvcignLnN0b3JhZ2Utem9uZScpOwogICAgICAgICAgICBleGFtU3RhdGUuc3RvcmFnZS5mb3JFYWNoKHMgPT4gY3JlYXRlU3R1ZGVudEVsZW1lbnQocywgc3RvcmFnZURpdiwgZmFsc2UpKTsKICAgICAgICAgICAgY29uc3Qgcm9vbXNHcmlkID0gYmxvY2sucXVlcnlTZWxlY3RvcignLnJvb21zLWdyaWQnKTsKICAgICAgICAgICAgZXhhbVN0YXRlLnJvb21zLmZvckVhY2goKHJvb21TdGF0ZSwgcklkeCkgPT4gewogICAgICAgICAgICAgICAgY29uc3QgdW5pcXVlSWQgPSBgcm9vbS0ke3JJZHh9YCwgc3VydkNvbnRhaW5lcklkID0gYHN1cnYtJHtySWR4fWA7CiAgICAgICAgICAgICAgICBjb25zdCB0dENsYXNzID0gcm9vbVN0YXRlLmlzVFQgPyAicm9vbS10dCIgOiAiIjsKICAgICAgICAgICAgICAgIGxldCBzdXJ2SHRtbCA9ICIiOyBpZihyb29tU3RhdGUuc3VydmVpbGxhbnRzLmxlbmd0aCA+IDApIHsgcm9vbVN0YXRlLnN1cnZlaWxsYW50cy5mb3JFYWNoKHZhbCA9PiB7IHN1cnZIdG1sICs9IGA8ZGl2IGNsYXNzPSJzdXJ2ZWlsbGFudC1yb3ciPjxzZWxlY3Qgb25jaGFuZ2U9InVwZGF0ZUN1cnJlbnRFeGFtU3RhdGUoKSI+JHtnZXRTdXJ2ZWlsbGFudE9wdGlvbnModmFsKX08L3NlbGVjdD48L2Rpdj5gOyB9KTsgfSBlbHNlIHsgc3Vydkh0bWwgPSBgPGRpdiBjbGFzcz0ic3VydmVpbGxhbnQtcm93Ij48c2VsZWN0IG9uY2hhbmdlPSJ1cGRhdGVDdXJyZW50RXhhbVN0YXRlKCkiPiR7Z2V0U3VydmVpbGxhbnRPcHRpb25zKCl9PC9zZWxlY3Q+PC9kaXY+YDsgfQogICAgICAgICAgICAgICAgY29uc3Qgcm9vbUh0bWwgPSBgCiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0icm9vbS1jYXJkICR7dHRDbGFzc30iPgogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJyb29tLWhlYWRlciI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJyb29tLWhlYWRlci10b3AiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuPiR7cm9vbVN0YXRlLm5hbWV9ICR7cm9vbVN0YXRlLmlzVFQ/JyhUVCknOicnfTwvc3Bhbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJkaXNwbGF5OmZsZXg7IGFsaWduLWl0ZW1zOmNlbnRlcjsgZ2FwOjEwcHg7Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4+JHtyb29tU3RhdGUuc3R1ZGVudHMubGVuZ3RofS8ke3Jvb21TdGF0ZS5jYXBhY2l0eX08L3NwYW4+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gb25jbGljaz0iY2xlYXJSb29tKCR7cklkeH0pIiBzdHlsZT0iYmFja2dyb3VuZDp3aGl0ZTsgYm9yZGVyOm5vbmU7IGNvbG9yOiNjMDM5MmI7IGN1cnNvcjpwb2ludGVyOyBwYWRkaW5nOjJweCA2cHg7IGJvcmRlci1yYWRpdXM6NHB4OyIgdGl0bGU9IlZpZGVyIGxhIHNhbGxlIj48aSBjbGFzcz0iZmEtc29saWQgZmEtdHJhc2giPjwvaT48L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0ic2NoZWR1bGUtYnRuIiBvbmNsaWNrPSJzY2hlZHVsZVJvb20oJHtySWR4fSkiPjxpIGNsYXNzPSJmYS1zb2xpZCBmYS13YW5kLW1hZ2ljLXNwYXJrbGVzIj48L2k+IFBsYW5pZmllcjwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0icm9vbS1zdXJ2ZWlsbGFudHMtYXJlYSIgaWQ9IiR7c3VydkNvbnRhaW5lcklkfSI+JHtzdXJ2SHRtbH08L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYnRuLWFkZC1zdXJ2IiBvbmNsaWNrPSJhZGRTdXJ2ZWlsbGFudEZpZWxkKCcke3N1cnZDb250YWluZXJJZH0nKSI+QWpvdXRlcjwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJyb29tLWJvZHkiIGlkPSIke3VuaXF1ZUlkfSIgb25kcm9wPSJkcm9wKGV2ZW50KSIgb25kcmFnb3Zlcj0iYWxsb3dEcm9wKGV2ZW50KSIgZGF0YS1jYXBhY2l0eT0iJHtyb29tU3RhdGUuY2FwYWNpdHl9IiBkYXRhLWlzLXR0PSIke3Jvb21TdGF0ZS5pc1RUfSI+PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+YDsKICAgICAgICAgICAgICAgIHJvb21zR3JpZC5pbnNlcnRBZGphY2VudEhUTUwoJ2JlZm9yZWVuZCcsIHJvb21IdG1sKTsKICAgICAgICAgICAgICAgIGNvbnN0IGJvZHlEaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh1bmlxdWVJZCk7CiAgICAgICAgICAgICAgICByb29tU3RhdGUuc3R1ZGVudHMuZm9yRWFjaChzID0+IGNyZWF0ZVN0dWRlbnRFbGVtZW50KHMsIGJvZHlEaXYsIHRydWUpKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICAgIAogICAgICAgIGZ1bmN0aW9uIGNyZWF0ZVN0dWRlbnRFbGVtZW50KGRhdGEsIHBhcmVudCwgaXNJbnNpZGVSb29tKSB7IAogICAgICAgICAgICBjb25zdCBlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOyBlbC5jbGFzc05hbWUgPSAnc3R1ZGVudC1pdGVtJzsgZWwuZGF0YXNldC5pbmZvID0gSlNPTi5zdHJpbmdpZnkoZGF0YSk7IAogICAgICAgICAgICBpZihpc1RpZXJzVGVtcHMoZ2V0VmFsdWUoZGF0YSxbJ1RpZXJzIHRlbXBzJywnVFQnXSkpKSBlbC5jbGFzc0xpc3QuYWRkKCdpcy10dCcpOyAKICAgICAgICAgICAgY29uc3QgZnVsbE5hbWUgPSBnZXRWYWx1ZShkYXRhLFsnTm9tJ10pICsgIiAiICsgZ2V0VmFsdWUoZGF0YSxbJ1Byw6lub20nXSk7IAogICAgICAgICAgICBsZXQgaW5uZXJIVE1MID0gYDxkaXYgY2xhc3M9InN0dWRlbnQtbWFpbi1pbmZvIj48c3Bhbj4ke2Z1bGxOYW1lfTwvc3Bhbj48c3BhbiBzdHlsZT0iZm9udC1zaXplOjAuNzVyZW07IGNvbG9yOiM3ZjhjOGQ7Ij4ke2dldFZhbHVlKGRhdGEsWydDbGFzc2UnXSl9PC9zcGFuPjwvZGl2PmA7CiAgICAgICAgICAgIGlmKGlzSW5zaWRlUm9vbSkgewogICAgICAgICAgICAgICAgaW5uZXJIVE1MICs9IGAKICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InN0dWRlbnQtb3JhbC1jb250cm9scyI+CiAgICAgICAgICAgICAgICAgICAgPGxhYmVsPlA6PC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0idGltZSIgdmFsdWU9IiR7ZGF0YS5wYXNzYWdlVGltZSB8fCAnJ30iIG9uY2hhbmdlPSJ1cGRhdGVTdHVkZW50RGF0YSh0aGlzLCAncGFzc2FnZVRpbWUnKSIgdGl0bGU9IkhldXJlIGRlIFBhc3NhZ2UiPgogICAgICAgICAgICAgICAgICAgIDxsYWJlbD5MOjwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9InRpbWUiIHZhbHVlPSIke2RhdGEubG9kZ2VUaW1lIHx8ICcnfSIgb25jaGFuZ2U9InVwZGF0ZVN0dWRlbnREYXRhKHRoaXMsICdsb2RnZVRpbWUnKSIgdGl0bGU9IkhldXJlIGRlIExvZ2UiPgogICAgICAgICAgICAgICAgPC9kaXY+YDsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbC5pbm5lckhUTUwgPSBpbm5lckhUTUw7IGVsLnNldEF0dHJpYnV0ZSgnZGF0YS1zb3J0JywgZnVsbE5hbWUudG9VcHBlckNhc2UoKSk7IGVsLmRyYWdnYWJsZSA9IHRydWU7IGVsLmlkID0gInMtIitNYXRoLnJhbmRvbSgpOyBlbC5vbmRyYWdzdGFydCA9IGRyYWc7IHBhcmVudC5hcHBlbmRDaGlsZChlbCk7IAogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gdXBkYXRlU3R1ZGVudERhdGEoaW5wdXQsIGZpZWxkKSB7CiAgICAgICAgICAgIGNvbnN0IHN0dWRlbnRFbCA9IGlucHV0LmNsb3Nlc3QoJy5zdHVkZW50LWl0ZW0nKTsKICAgICAgICAgICAgY29uc3QgZGF0YSA9IEpTT04ucGFyc2Uoc3R1ZGVudEVsLmRhdGFzZXQuaW5mbyk7CiAgICAgICAgICAgIGRhdGFbZmllbGRdID0gaW5wdXQudmFsdWU7CiAgICAgICAgICAgIHN0dWRlbnRFbC5kYXRhc2V0LmluZm8gPSBKU09OLnN0cmluZ2lmeShkYXRhKTsKICAgICAgICAgICAgdXBkYXRlQ3VycmVudEV4YW1TdGF0ZSgpOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gc2NoZWR1bGVSb29tKHJJZHgpIHsKICAgICAgICAgICAgY29uc3Qgc3RhcnRUaW1lID0gcHJvbXB0KCJIZXVyZSBkZSBkw6lidXQgZHUgcHJlbWllciBwYXNzYWdlIChISDpNTSkgOiIsICIwODowMCIpOyBpZighc3RhcnRUaW1lKSByZXR1cm47CiAgICAgICAgICAgIGNvbnN0IGR1cmF0aW9uID0gcHJvbXB0KCJEdXLDqWUgcGFyIGNhbmRpZGF0IChtaW51dGVzKSA6IiwgIjIwIik7IGlmKCFkdXJhdGlvbikgcmV0dXJuOwogICAgICAgICAgICBjb25zdCBsb2RnZU9mZnNldCA9IHByb21wdCgiRMOpbGFpIGRlIG1pc2UgZW4gbG9nZSBhdmFudCBwYXNzYWdlIChtaW51dGVzKSAtIE1ldHRyZSAwIHNpIGF1Y3VuZSA6IiwgIjMwIik7IGlmKGxvZGdlT2Zmc2V0ID09PSBudWxsKSByZXR1cm47CiAgICAgICAgICAgIGNvbnN0IHdhbnRCcmVhayA9IGNvbmZpcm0oIlZvdWxlei12b3VzIGluc8OpcmVyIHVuZSBwYXVzZSBwb3VyIGxlcyBzdXJ2ZWlsbGFudHMgPyIpOwogICAgICAgICAgICBsZXQgYnJlYWtBZnRlciA9IDAsIGJyZWFrRHVyYXRpb24gPSAwOwogICAgICAgICAgICBpZiAod2FudEJyZWFrKSB7IGJyZWFrQWZ0ZXIgPSBwYXJzZUludChwcm9tcHQoIkluc8OpcmVyIHVuZSBwYXVzZSBhcHLDqHMgY29tYmllbiBkZSBjYW5kaWRhdHMgPyIsICI0IikpOyBicmVha0R1cmF0aW9uID0gcGFyc2VJbnQocHJvbXB0KCJEdXLDqWUgZGUgbGEgcGF1c2UgKG1pbnV0ZXMpIDoiLCAiMTUiKSk7IH0KICAgICAgICAgICAgY29uc3Qgc3RhcnRQYXJ0cyA9IHN0YXJ0VGltZS5zcGxpdCgnOicpOwogICAgICAgICAgICBsZXQgY3VycmVudFRpbWUgPSBuZXcgRGF0ZSgpOyBjdXJyZW50VGltZS5zZXRIb3VycyhwYXJzZUludChzdGFydFBhcnRzWzBdKSwgcGFyc2VJbnQoc3RhcnRQYXJ0c1sxXSksIDAsIDApOwogICAgICAgICAgICBjb25zdCBkdXJNaW4gPSBwYXJzZUludChkdXJhdGlvbiksIGxvZGdlTWluID0gcGFyc2VJbnQobG9kZ2VPZmZzZXQpOwogICAgICAgICAgICBjb25zdCByb29tQm9keSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGByb29tLSR7cklkeH1gKTsKICAgICAgICAgICAgY29uc3QgaXRlbXMgPSBBcnJheS5mcm9tKHJvb21Cb2R5LmNoaWxkcmVuKTsKICAgICAgICAgICAgbGV0IHN0dWRlbnRzUHJvY2Vzc2VkID0gMDsKICAgICAgICAgICAgaXRlbXMuZm9yRWFjaChpdGVtID0+IHsKICAgICAgICAgICAgICAgIGlmICh3YW50QnJlYWsgJiYgc3R1ZGVudHNQcm9jZXNzZWQgPiAwICYmIChzdHVkZW50c1Byb2Nlc3NlZCAlIGJyZWFrQWZ0ZXIgPT09IDApKSBjdXJyZW50VGltZSA9IG5ldyBEYXRlKGN1cnJlbnRUaW1lLmdldFRpbWUoKSArIChicmVha0R1cmF0aW9uICogNjAwMDApKTsKICAgICAgICAgICAgICAgIGNvbnN0IGhQID0gY3VycmVudFRpbWUuZ2V0SG91cnMoKS50b1N0cmluZygpLnBhZFN0YXJ0KDIsICcwJyk7CiAgICAgICAgICAgICAgICBjb25zdCBtUCA9IGN1cnJlbnRUaW1lLmdldE1pbnV0ZXMoKS50b1N0cmluZygpLnBhZFN0YXJ0KDIsICcwJyk7CiAgICAgICAgICAgICAgICBjb25zdCBwYXNzYWdlU3RyID0gYCR7aFB9OiR7bVB9YDsKICAgICAgICAgICAgICAgIGxldCBsb2RnZVRpbWVEYXRlID0gbmV3IERhdGUoY3VycmVudFRpbWUuZ2V0VGltZSgpIC0gKGxvZGdlTWluICogNjAwMDApKTsKICAgICAgICAgICAgICAgIGNvbnN0IGhMID0gbG9kZ2VUaW1lRGF0ZS5nZXRIb3VycygpLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgJzAnKTsKICAgICAgICAgICAgICAgIGNvbnN0IG1MID0gbG9kZ2VUaW1lRGF0ZS5nZXRNaW51dGVzKCkudG9TdHJpbmcoKS5wYWRTdGFydCgyLCAnMCcpOwogICAgICAgICAgICAgICAgY29uc3QgbG9kZ2VTdHIgPSBgJHtoTH06JHttTH1gOwogICAgICAgICAgICAgICAgbGV0IGRhdGEgPSBKU09OLnBhcnNlKGl0ZW0uZGF0YXNldC5pbmZvKTsgZGF0YS5wYXNzYWdlVGltZSA9IHBhc3NhZ2VTdHI7IGRhdGEubG9kZ2VUaW1lID0gbG9kZ2VNaW4gPiAwID8gbG9kZ2VTdHIgOiAiIjsKICAgICAgICAgICAgICAgIGl0ZW0uZGF0YXNldC5pbmZvID0gSlNPTi5zdHJpbmdpZnkoZGF0YSk7CiAgICAgICAgICAgICAgICBjb25zdCBpbnB1dHMgPSBpdGVtLnF1ZXJ5U2VsZWN0b3JBbGwoJ2lucHV0W3R5cGU9InRpbWUiXScpOwogICAgICAgICAgICAgICAgaWYoaW5wdXRzLmxlbmd0aCA+PSAyKSB7IGlucHV0c1swXS52YWx1ZSA9IHBhc3NhZ2VTdHI7IGlucHV0c1sxXS52YWx1ZSA9IGxvZGdlTWluID4gMCA/IGxvZGdlU3RyIDogIiI7IH0KICAgICAgICAgICAgICAgIGN1cnJlbnRUaW1lID0gbmV3IERhdGUoY3VycmVudFRpbWUuZ2V0VGltZSgpICsgKGR1ck1pbiAqIDYwMDAwKSk7CiAgICAgICAgICAgICAgICBzdHVkZW50c1Byb2Nlc3NlZCsrOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgdXBkYXRlQ3VycmVudEV4YW1TdGF0ZSgpOwogICAgICAgIH0KICAgICAgICAKICAgICAgICBmdW5jdGlvbiBzd2l0Y2hUYWIoZWxlbWVudCwgdGFiSWQpIHsgCiAgICAgICAgICAgIGlmKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd2aWV3MycpLmNsYXNzTGlzdC5jb250YWlucygnYWN0aXZlJykgJiYgQXBwU3RhdGUuZGlzdHJpYnV0aW9uRGF0YS5sZW5ndGg+MCkgeyB0cnkgeyB1cGRhdGVDdXJyZW50RXhhbVN0YXRlKCk7IH0gY2F0Y2goZSkgeyBjb25zb2xlLndhcm4oIlNhdmUgc3RhdGUgZmFpbGVkIiwgZSk7IH0gfQogICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuc3RlcC1idG4nKS5mb3JFYWNoKGJ0biA9PiBidG4uY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJykpOyBlbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpOyAKICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnNlY3Rpb24tdmlldycpLmZvckVhY2godmlldyA9PiB2aWV3LmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpKTsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGFiSWQpLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpOyAKICAgICAgICAgICAgaWYodGFiSWQ9PT0ndmlldzQnKSBwb3B1bGF0ZUNsYXNzRmlsdGVyKCk7IGlmKHRhYklkPT09J3ZpZXc1JykgcG9wdWxhdGVTdXJ2ZWlsbGFudEZpbHRlcigpOyAKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGp1bXBUb0V4YW0oaWR4KSB7IHVwZGF0ZUN1cnJlbnRFeGFtU3RhdGUoKTsgQXBwU3RhdGUuY3VycmVudEV4YW1JbmRleCA9IHBhcnNlSW50KGlkeCk7IHJlbmRlckN1cnJlbnRFeGFtKCk7IH0KICAgICAgICBmdW5jdGlvbiBwcmV2RXhhbSgpIHsgaWYoQXBwU3RhdGUuY3VycmVudEV4YW1JbmRleD4wKSB7IHVwZGF0ZUN1cnJlbnRFeGFtU3RhdGUoKTsgQXBwU3RhdGUuY3VycmVudEV4YW1JbmRleC0tOyByZW5kZXJDdXJyZW50RXhhbSgpOyB9IH0KICAgICAgICBmdW5jdGlvbiBuZXh0RXhhbSgpIHsgaWYoQXBwU3RhdGUuY3VycmVudEV4YW1JbmRleDxBcHBTdGF0ZS5kaXN0cmlidXRpb25EYXRhLmxlbmd0aC0xKSB7IHVwZGF0ZUN1cnJlbnRFeGFtU3RhdGUoKTsgQXBwU3RhdGUuY3VycmVudEV4YW1JbmRleCsrOyByZW5kZXJDdXJyZW50RXhhbSgpOyB9IH0KICAgICAgICAKICAgICAgICBmdW5jdGlvbiB1cGRhdGVDdXJyZW50RXhhbVN0YXRlKCkgeyAKICAgICAgICAgICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2N1cnJlbnQtZXhhbS1jb250YWluZXInKTsgCiAgICAgICAgICAgIGNvbnN0IGJsb2NrID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5leGFtLXNlY3Rpb24tYmxvY2snKTsgaWYoIWJsb2NrKSByZXR1cm47IAogICAgICAgICAgICBjb25zdCBleGFtU3RhdGUgPSBBcHBTdGF0ZS5kaXN0cmlidXRpb25EYXRhW0FwcFN0YXRlLmN1cnJlbnRFeGFtSW5kZXhdOyBpZighZXhhbVN0YXRlKSByZXR1cm47IAogICAgICAgICAgICBjb25zdCBzdG9yYWdlRGl2ID0gYmxvY2sucXVlcnlTZWxlY3RvcignLnN0b3JhZ2Utem9uZScpOyAKICAgICAgICAgICAgZXhhbVN0YXRlLnN0b3JhZ2UgPSBBcnJheS5mcm9tKHN0b3JhZ2VEaXYuY2hpbGRyZW4pLm1hcChjaGlsZCA9PiBKU09OLnBhcnNlKGNoaWxkLmRhdGFzZXQuaW5mbykpOyAKICAgICAgICAgICAgY29uc3Qgcm9vbUNhcmRzID0gYmxvY2sucXVlcnlTZWxlY3RvckFsbCgnLnJvb20tY2FyZCcpOyAKICAgICAgICAgICAgZXhhbVN0YXRlLnJvb21zID0gW107IAogICAgICAgICAgICByb29tQ2FyZHMuZm9yRWFjaChjYXJkID0+IHsgCiAgICAgICAgICAgICAgICBjb25zdCBib2R5ID0gY2FyZC5xdWVyeVNlbGVjdG9yKCcucm9vbS1ib2R5Jyk7IGNvbnN0IGNhcCA9IGJvZHkuZ2V0QXR0cmlidXRlKCdkYXRhLWNhcGFjaXR5Jyk7IGNvbnN0IGlzVFQgPSBib2R5LmdldEF0dHJpYnV0ZSgnZGF0YS1pcy10dCcpID09PSAndHJ1ZSc7IAogICAgICAgICAgICAgICAgY29uc3Qgcm9vbU5hbWUgPSBjYXJkLnF1ZXJ5U2VsZWN0b3IoJy5yb29tLWhlYWRlciBzcGFuJykudGV4dENvbnRlbnQucmVwbGFjZSgnKFRUKScsJycpLnRyaW0oKTsgCiAgICAgICAgICAgICAgICBjb25zdCBzdXJ2cyA9IEFycmF5LmZyb20oY2FyZC5xdWVyeVNlbGVjdG9yQWxsKCdzZWxlY3QnKSkubWFwKHMgPT4gcy52YWx1ZSk7IAogICAgICAgICAgICAgICAgY29uc3Qgc3R1ZGVudHMgPSBBcnJheS5mcm9tKGJvZHkuY2hpbGRyZW4pLm1hcChzID0+IEpTT04ucGFyc2Uocy5kYXRhc2V0LmluZm8pKTsgCiAgICAgICAgICAgICAgICBleGFtU3RhdGUucm9vbXMucHVzaCh7IG5hbWU6IHJvb21OYW1lLCBjYXBhY2l0eTogY2FwLCBpc1RUOiBpc1RULCBzdXJ2ZWlsbGFudHM6IHN1cnZzLCBzdHVkZW50czogc3R1ZGVudHMgfSk7IAogICAgICAgICAgICB9KTsgCiAgICAgICAgfQogICAgICAgIAogICAgICAgIGZ1bmN0aW9uIGRyYWcoZXYpIHsgZXYuZGF0YVRyYW5zZmVyLnNldERhdGEoInRleHQiLCBldi50YXJnZXQuaWQpOyB9CiAgICAgICAgZnVuY3Rpb24gZHJvcChldikgeyAKICAgICAgICAgICAgZXYucHJldmVudERlZmF1bHQoKTsgCiAgICAgICAgICAgIHZhciBkYXRhID0gZXYuZGF0YVRyYW5zZmVyLmdldERhdGEoInRleHQiKTsgdmFyIGRyYWdnZWRFbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGRhdGEpOyAKICAgICAgICAgICAgbGV0IHRhcmdldCA9IGV2LnRhcmdldDsgd2hpbGUodGFyZ2V0ICYmICF0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdyb29tLWJvZHknKSAmJiAhdGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnc3RvcmFnZS16b25lJykpIHRhcmdldCA9IHRhcmdldC5wYXJlbnRFbGVtZW50OyAKICAgICAgICAgICAgaWYodGFyZ2V0KSB7IAogICAgICAgICAgICAgICAgaWYodGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygncm9vbS1ib2R5JykpIHsgCiAgICAgICAgICAgICAgICAgICAgY29uc3QgY2FwID0gcGFyc2VJbnQodGFyZ2V0LmdldEF0dHJpYnV0ZSgnZGF0YS1jYXBhY2l0eScpKTsgCiAgICAgICAgICAgICAgICAgICAgaWYodGFyZ2V0LmNoaWxkcmVuLmxlbmd0aCA+PSBjYXApIHsgYWxlcnQoIlBsZWluICEiKTsgcmV0dXJuOyB9IAogICAgICAgICAgICAgICAgfSAKICAgICAgICAgICAgICAgIGNvbnN0IHN0dWRlbnREYXRhID0gSlNPTi5wYXJzZShkcmFnZ2VkRWwuZGF0YXNldC5pbmZvKTsKICAgICAgICAgICAgICAgIGNvbnN0IGlzVGFyZ2V0Um9vbSA9IHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3Jvb20tYm9keScpOwogICAgICAgICAgICAgICAgdGFyZ2V0LmFwcGVuZENoaWxkKGRyYWdnZWRFbCk7IGRyYWdnZWRFbC5yZW1vdmUoKTsgY3JlYXRlU3R1ZGVudEVsZW1lbnQoc3R1ZGVudERhdGEsIHRhcmdldCwgaXNUYXJnZXRSb29tKTsgCiAgICAgICAgICAgICAgICBzb3J0Q29udGFpbmVyKHRhcmdldCk7IHVwZGF0ZUN1cnJlbnRFeGFtU3RhdGUoKTsgdXBkYXRlUmVhbFRpbWVDb3VudGVycygpOwogICAgICAgICAgICB9IAogICAgICAgIH0KICAgICAgICBmdW5jdGlvbiBhbGxvd0Ryb3AoZXYpIHsgZXYucHJldmVudERlZmF1bHQoKTsgfQogICAgICAgIAogICAgICAgIGZ1bmN0aW9uIHNvcnRDb250YWluZXIoY29udGFpbmVyKSB7IAogICAgICAgICAgICBjb25zdCBpdGVtcyA9IEFycmF5LmZyb20oY29udGFpbmVyLmNoaWxkcmVuKTsgaXRlbXMuc29ydCgoYSwgYikgPT4geyAKICAgICAgICAgICAgICAgIGNvbnN0IG5hbWVBID0gYS5nZXRBdHRyaWJ1dGUoJ2RhdGEtc29ydCcpIHx8ICIiOyBjb25zdCBuYW1lQiA9IGIuZ2V0QXR0cmlidXRlKCdkYXRhLXNvcnQnKSB8fCAiIjsgcmV0dXJuIG5hbWVBLmxvY2FsZUNvbXBhcmUobmFtZUIpOyAKICAgICAgICAgICAgfSk7IAogICAgICAgICAgICBpdGVtcy5mb3JFYWNoKGl0ZW0gPT4gY29udGFpbmVyLmFwcGVuZENoaWxkKGl0ZW0pKTsgCiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBjbGVhclJvb20ocklkeCkgewogICAgICAgICAgICBpZighY29uZmlybSgiVm91bGV6LXZvdXMgdnJhaW1lbnQgdmlkZXIgdG91dGUgY2V0dGUgc2FsbGUgPyIpKSByZXR1cm47CiAgICAgICAgICAgIHVwZGF0ZUN1cnJlbnRFeGFtU3RhdGUoKTsgY29uc3QgZXhhbURhdGEgPSBBcHBTdGF0ZS5kaXN0cmlidXRpb25EYXRhW0FwcFN0YXRlLmN1cnJlbnRFeGFtSW5kZXhdOyBjb25zdCByb29tID0gZXhhbURhdGEucm9vbXNbcklkeF07CiAgICAgICAgICAgIGlmKHJvb20uc3R1ZGVudHMubGVuZ3RoID09PSAwKSByZXR1cm47CiAgICAgICAgICAgIHJvb20uc3R1ZGVudHMuZm9yRWFjaChzID0+IHsgcy5wYXNzYWdlVGltZSA9ICIiOyBzLmxvZGdlVGltZSA9ICIiOyB9KTsKICAgICAgICAgICAgZXhhbURhdGEuc3RvcmFnZS5wdXNoKC4uLnJvb20uc3R1ZGVudHMpOyByb29tLnN0dWRlbnRzID0gW107CiAgICAgICAgICAgIGV4YW1EYXRhLnN0b3JhZ2Uuc29ydCgoYSxiKSA9PiAoZ2V0VmFsdWUoYSxbJ05vbSddKXx8JycpLmxvY2FsZUNvbXBhcmUoZ2V0VmFsdWUoYixbJ05vbSddKXx8JycpKTsKICAgICAgICAgICAgcmVuZGVyQ3VycmVudEV4YW0oKTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGdldFN1cnZlaWxsYW50T3B0aW9ucyhzZWxlY3RlZD0iIikgeyBpZighQXBwU3RhdGUuc3VydmVpbGxhbnRzKSByZXR1cm4gIiI7IGxldCBvcHRzID0gJzxvcHRpb24gdmFsdWU9IiI+LS0gU3VydiAtLTwvb3B0aW9uPic7IEFwcFN0YXRlLnN1cnZlaWxsYW50cy5mb3JFYWNoKHMgPT4geyBjb25zdCB2YWwgPSBnZXRWYWx1ZShzLFsnTm9tJ10pICsgJyAnICsgZ2V0VmFsdWUocyxbJ1Byw6lub20nXSk7IG9wdHMgKz0gYDxvcHRpb24gdmFsdWU9IiR7dmFsfSIgJHsodmFsPT09c2VsZWN0ZWQpPydzZWxlY3RlZCc6Jyd9PiR7dmFsfTwvb3B0aW9uPmA7IH0pOyByZXR1cm4gb3B0czsgfQogICAgICAgIGZ1bmN0aW9uIGFkZFN1cnZlaWxsYW50RmllbGQoaWQpIHsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpLmluc2VydEFkamFjZW50SFRNTCgnYmVmb3JlZW5kJywgYDxkaXYgY2xhc3M9InN1cnZlaWxsYW50LXJvdyI+PHNlbGVjdCBvbmNoYW5nZT0idXBkYXRlQ3VycmVudEV4YW1TdGF0ZSgpIj4ke2dldFN1cnZlaWxsYW50T3B0aW9ucygpfTwvc2VsZWN0PjwvZGl2PmApOyB9CiAgICAgICAgZnVuY3Rpb24gaGFuZGxlSW1hZ2UoaW5wdXQsIHByZXZpZXdJZCkgeyBjb25zdCBmaWxlID0gaW5wdXQuZmlsZXNbMF07IGlmICghZmlsZSkgcmV0dXJuOyBjb25zdCByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpOyByZWFkZXIub25sb2FkID0gZnVuY3Rpb24oZSkgeyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChwcmV2aWV3SWQpLnNyYyA9IGUudGFyZ2V0LnJlc3VsdDsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQocHJldmlld0lkKS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJzsgaWYocHJldmlld0lkID09PSAnbG9nb1ByZXZpZXcnKSBBcHBTdGF0ZS5jb25maWcubG9nb1NyYyA9IGUudGFyZ2V0LnJlc3VsdDsgaWYocHJldmlld0lkID09PSAnc2lnblByZXZpZXcnKSBBcHBTdGF0ZS5jb25maWcuc2lnblNyYyA9IGUudGFyZ2V0LnJlc3VsdDsgfTsgcmVhZGVyLnJlYWRBc0RhdGFVUkwoZmlsZSk7IH0KICAgICAgICBmdW5jdGlvbiBwb3B1bGF0ZUNsYXNzRmlsdGVyKCl7IGNvbnN0IHM9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbnZvYy1jbGFzcy1maWx0ZXInKTsgcy5pbm5lckhUTUw9JzxvcHRpb24gdmFsdWU9IkFMTCI+VG91dGVzPC9vcHRpb24+JzsgY29uc3QgY2w9bmV3IFNldCgpOyBBcHBTdGF0ZS5lbGV2ZXMuZm9yRWFjaChlPT57Y29uc3QgYz1nZXRWYWx1ZShlLFsnQ2xhc3NlJywnRGl2J10pOyBpZihjKSBjbC5hZGQoYyl9KTsgQXJyYXkuZnJvbShjbCkuc29ydCgpLmZvckVhY2goYz0+cy5hZGQobmV3IE9wdGlvbihjLGMpKSk7IHBvcHVsYXRlU2VsZWN0RnJvbVNldCgncHYtY2xhc3MtZmlsdGVyJywgY2wpOyB9CiAgICAgICAgZnVuY3Rpb24gcG9wdWxhdGVTZWxlY3RGcm9tU2V0KGlkLCBzZXQpIHsgY29uc3Qgcz1kb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCk7IGlmKCFzKSByZXR1cm47IHMuaW5uZXJIVE1MPSc8b3B0aW9uIHZhbHVlPSJBTEwiPlRvdXRlczwvb3B0aW9uPic7IEFycmF5LmZyb20oc2V0KS5zb3J0KCkuZm9yRWFjaChjPT5zLmFkZChuZXcgT3B0aW9uKGMsYykpKTsgfQogICAgICAgIGZ1bmN0aW9uIHBvcHVsYXRlU3VydmVpbGxhbnRGaWx0ZXIoKXsgY29uc3Qgcz1kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29udm9jLXN1cnYtZmlsdGVyJyk7IHMuaW5uZXJIVE1MPSc8b3B0aW9uIHZhbHVlPSJBTEwiPlRvdXM8L29wdGlvbj4nOyBpZighQXBwU3RhdGUuc3VydmVpbGxhbnRzKSByZXR1cm47IEFwcFN0YXRlLnN1cnZlaWxsYW50cy5mb3JFYWNoKHN1PT57Y29uc3Qgbj1nZXRWYWx1ZShzdSxbJ05vbSddKSsnICcrZ2V0VmFsdWUoc3UsWydQcsOpbm9tJ10pOyBzLmFkZChuZXcgT3B0aW9uKG4sbikpfSk7IH0KICAgICAgICBmdW5jdGlvbiBzYXZlUG9jaGV0dGVUZXh0KHR5cGUsIHZhbCkgeyBpZighQXBwU3RhdGUucG9jaGV0dGVUZXh0KSBBcHBTdGF0ZS5wb2NoZXR0ZVRleHQgPSB7fTsgQXBwU3RhdGUucG9jaGV0dGVUZXh0W3R5cGVdID0gdmFsOyB9CiAgICAgICAgZnVuY3Rpb24gcG9wdWxhdGVQVkV4YW1TZWxlY3QoKSB7IGNvbnN0IHMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHYtZXhhbS1zZWxlY3QnKTsgcy5pbm5lckhUTUwgPSAnPG9wdGlvbiB2YWx1ZT0iQUxMIj5UT1VUIElNUFJJTUVSPC9vcHRpb24+JzsgQXBwU3RhdGUuZGlzdHJpYnV0aW9uRGF0YS5mb3JFYWNoKChkLCBpKSA9PiB7IGlmKCFkKSByZXR1cm47IGNvbnN0IGV4YW0gPSBBcHBTdGF0ZS5lcHJldXZlc1tkLmV4YW1JZHhdOyBzLmFkZChuZXcgT3B0aW9uKGdldFZhbHVlKGV4YW0sIFsnTWF0acOocmUnLCAnRXByZXV2ZSddKSwgaSkpOyB9KTsgcy5vbmNoYW5nZSgpOyB9CiAgICAgICAgCiAgICAgICAgZnVuY3Rpb24gdXBkYXRlUFZSb29tU2VsZWN0KCkgeyAKICAgICAgICAgICAgY29uc3QgZXhhbUlkeCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwdi1leGFtLXNlbGVjdCcpLnZhbHVlOyAKICAgICAgICAgICAgY29uc3QgcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwdi1yb29tLXNlbGVjdCcpOyBzLmlubmVySFRNTCA9ICc8b3B0aW9uIHZhbHVlPSJBTEwiPlRPVVRFUyBMRVMgU0FMTEVTIFVUSUxJU8OJRVM8L29wdGlvbj4nOyAKICAgICAgICAgICAgaWYoZXhhbUlkeCA9PT0gIkFMTCIpIHsgcy5kaXNhYmxlZCA9IHRydWU7IHJldHVybjsgfSBlbHNlIHMuZGlzYWJsZWQgPSBmYWxzZTsgCiAgICAgICAgICAgIGNvbnN0IGRpc3QgPSBBcHBTdGF0ZS5kaXN0cmlidXRpb25EYXRhW2V4YW1JZHhdOyAKICAgICAgICAgICAgaWYoZGlzdCkgZGlzdC5yb29tcy5mb3JFYWNoKChyLCBpKSA9PiB7IGlmKHIuc3R1ZGVudHMubGVuZ3RoID4gMCkgcy5hZGQobmV3IE9wdGlvbihyLm5hbWUsIGkpKTsgfSk7IAogICAgICAgIH0KICAgICAgICAKICAgICAgICBmdW5jdGlvbiBwb3B1bGF0ZUVtYXJnZW1lbnRGaWx0ZXJzKCkgeyAKICAgICAgICAgICAgY29uc3QgcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlbWFyZ2VtZW50LXJvb20tZmlsdGVyJyk7IHMuaW5uZXJIVE1MID0gJzxvcHRpb24gdmFsdWU9IkFMTCI+VG91dGVzIGxlcyBzYWxsZXMgdXRpbGlzw6llczwvb3B0aW9uPic7IAogICAgICAgICAgICBsZXQgdXNlZFJvb21zID0gbmV3IFNldCgpOyBBcHBTdGF0ZS5kaXN0cmlidXRpb25EYXRhLmZvckVhY2goZCA9PiB7IGlmKGQgJiYgZC5yb29tcykgZC5yb29tcy5mb3JFYWNoKHIgPT4geyBpZihyLnN0dWRlbnRzLmxlbmd0aCA+IDApIHVzZWRSb29tcy5hZGQoci5uYW1lKTsgfSk7IH0pOwogICAgICAgICAgICBBcnJheS5mcm9tKHVzZWRSb29tcykuc29ydCgpLmZvckVhY2gociA9PiBzLmFkZChuZXcgT3B0aW9uKHIsIHIpKSk7IAogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gcHJpbnRFbWFyZ2VtZW50KCkgeyBnZW5lcmF0ZUxpc3REb2MoJ2VtYXJnZW1lbnQnKTsgfQogICAgICAgIGZ1bmN0aW9uIHByaW50RGlzcGxheUxpc3QoKSB7IGdlbmVyYXRlTGlzdERvYygnZGlzcGxheScpOyB9CiAgICAgICAgCiAgICAgICAgZnVuY3Rpb24gZ2VuZXJhdGVMaXN0RG9jKHR5cGUpIHsKICAgICAgICAgICAgaWYoIUFwcFN0YXRlLmRpc3RyaWJ1dGlvbkRhdGEubGVuZ3RoKSByZXR1cm4gYWxlcnQoIlLDqXBhcnRpdGlvbiBtYW5xdWFudGUiKTsKICAgICAgICAgICAgY29uc3Qgcm9vbUZpbHRlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlbWFyZ2VtZW50LXJvb20tZmlsdGVyJykudmFsdWU7CiAgICAgICAgICAgIGNvbnN0IGxvZ28gPSBBcHBTdGF0ZS5jb25maWcubG9nb1NyYyB8fCAiIjsKICAgICAgICAgICAgY29uc3QgdGl0bGUgPSB0eXBlID09PSAnZW1hcmdlbWVudCcgPyAiTElTVEUgRCfDiU1BUkdFTUVOVCIgOiAiTElTVEUgRCdBRkZJQ0hBR0UgLSBDQU5ESURBVFMiOwogICAgICAgICAgICBsZXQgZnVsbEh0bWwgPSAiIjsKICAgICAgICAgICAgQXBwU3RhdGUuZGlzdHJpYnV0aW9uRGF0YS5mb3JFYWNoKGV4YW1EYXRhID0+IHsKICAgICAgICAgICAgICAgIGlmKCFleGFtRGF0YSkgcmV0dXJuOwogICAgICAgICAgICAgICAgY29uc3QgZXhhbUluZm8gPSBBcHBTdGF0ZS5lcHJldXZlc1tleGFtRGF0YS5leGFtSWR4XTsKICAgICAgICAgICAgICAgIGNvbnN0IGRhdGVTdHIgPSBmb3JtYXREYXRlKGdldFZhbHVlKGV4YW1JbmZvLFsnRGF0ZSddKSk7CiAgICAgICAgICAgICAgICBleGFtRGF0YS5yb29tcy5mb3JFYWNoKHJvb21EYXRhID0+IHsKICAgICAgICAgICAgICAgICAgICBpZihyb29tRmlsdGVyICE9PSAiQUxMIiAmJiByb29tRGF0YS5uYW1lICE9PSByb29tRmlsdGVyKSByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgaWYocm9vbURhdGEuc3R1ZGVudHMubGVuZ3RoID09PSAwKSByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3R1ZGVudHMgPSBbLi4ucm9vbURhdGEuc3R1ZGVudHNdOwogICAgICAgICAgICAgICAgICAgIHN0dWRlbnRzLnNvcnQoKGEsYikgPT4gewogICAgICAgICAgICAgICAgICAgICAgICBpZihhLnBhc3NhZ2VUaW1lICYmIGIucGFzc2FnZVRpbWUpIHJldHVybiBhLnBhc3NhZ2VUaW1lLmxvY2FsZUNvbXBhcmUoYi5wYXNzYWdlVGltZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBnZXRWYWx1ZShhLFsnTm9tJ10pLmxvY2FsZUNvbXBhcmUoZ2V0VmFsdWUoYixbJ05vbSddKSk7CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgaXNUVCA9IHJvb21EYXRhLmlzVFQ7CiAgICAgICAgICAgICAgICAgICAgbGV0IHRpbWUgPSBpc1RUID8gZ2V0VmFsdWUoZXhhbUluZm8sIFsnSGV1cmUgZGUgZMOpYnV0IHRpZXJzIHRlbXBzJywgJ0hldXJlIFRUJ10pIDogZ2V0VmFsdWUoZXhhbUluZm8sIFsnSGV1cmUgZGUgZMOpYnV0JywgJ0hldXJlJ10pOwogICAgICAgICAgICAgICAgICAgIGlmKCF0aW1lKSB0aW1lID0gZ2V0VmFsdWUoZXhhbUluZm8sIFsnSGV1cmUgZGUgZMOpYnV0JywgJ0hldXJlJ10pOwogICAgICAgICAgICAgICAgICAgIGxldCByb3dzID0gIiI7CiAgICAgICAgICAgICAgICAgICAgc3R1ZGVudHMuZm9yRWFjaChzID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGluZm9TdXAgPSBzLnBhc3NhZ2VUaW1lID8gYCA8c3BhbiBzdHlsZT0iZm9udC1zaXplOjAuOHJlbSI+KCR7cy5wYXNzYWdlVGltZX0pPC9zcGFuPmAgOiAiIjsKICAgICAgICAgICAgICAgICAgICAgICAgcm93cyArPSBgPHRyIGNsYXNzPSIke3R5cGV9LXJvdyI+PHRkPiR7Z2V0VmFsdWUocyxbJ05vbSddKX08L3RkPjx0ZD4ke2dldFZhbHVlKHMsWydQcsOpbm9tJ10pfTwvdGQ+PHRkPiR7Z2V0VmFsdWUocyxbJ0NsYXNzZSddKX0ke2luZm9TdXB9PC90ZD4ke3R5cGU9PT0nZW1hcmdlbWVudCcgPyAnPHRkPjwvdGQ+JyA6ICcnfTwvdHI+YDsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICBmdWxsSHRtbCArPSBgPGRpdiBjbGFzcz0icHJpbnQtcGFnZS1saXN0IiBzdHlsZT0icGFnZS1icmVhay1hZnRlcjogYWx3YXlzOyI+PGRpdiBjbGFzcz0icHJpbnQtaGVhZGVyIj48ZGl2IHN0eWxlPSJmb250LXdlaWdodDpib2xkOyBmb250LXNpemU6MS4ycmVtOyI+JHtBcHBTdGF0ZS5jb25maWcuZXhhbVRpdGxlIHx8ICJFWEFNRU4ifTwvZGl2PiR7bG9nbyA/IGA8aW1nIHNyYz0iJHtsb2dvfSIgY2xhc3M9InByaW50LWxvZ28iPmAgOiAnJ308L2Rpdj48ZGl2IGNsYXNzPSJwcmludC1kb2MtdGl0bGUiPiR7dGl0bGV9PC9kaXY+PGRpdiBjbGFzcz0icHJpbnQtaW5mb3MtYm94Ij48c3Ryb25nPsOJcHJldXZlIDo8L3N0cm9uZz4gJHtnZXRWYWx1ZShleGFtSW5mbyxbJ01hdGnDqHJlJywnRXByZXV2ZSddKX08YnI+PHN0cm9uZz5EYXRlIDo8L3N0cm9uZz4gJHtkYXRlU3RyfSAtIDxzdHJvbmc+SGV1cmUgR2xvYmFsIDo8L3N0cm9uZz4gJHt0aW1lfTxicj48c3Ryb25nPlNhbGxlIDo8L3N0cm9uZz4gJHtyb29tRGF0YS5uYW1lfTxicj48c3Ryb25nPlN1cnZlaWxsYW50cyA6PC9zdHJvbmc+ICR7cm9vbURhdGEuc3VydmVpbGxhbnRzLmpvaW4oJywgJyl9PC9kaXY+PHRhYmxlIGNsYXNzPSJwcmludC10YWJsZSAke3R5cGU9PT0nZGlzcGxheSc/J2Rpc3BsYXktbGlzdC1yb3cnOicnfSI+PHRoZWFkPjx0cj48dGg+Tm9tPC90aD48dGg+UHLDqW5vbTwvdGg+PHRoPkNsYXNzZSAoUGFzc2FnZSk8L3RoPiR7dHlwZT09PSdlbWFyZ2VtZW50Jz8nPHRoIHN0eWxlPSJ3aWR0aDoxNTBweDsiPlNpZ25hdHVyZTwvdGg+JzonJ308L3RyPjwvdGhlYWQ+PHRib2R5PiR7cm93c308L3Rib2R5PjwvdGFibGU+PC9kaXY+YDsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgaWYoZnVsbEh0bWwgPT09ICIiKSByZXR1cm4gYWxlcnQoIkF1Y3VuIMOpbMOodmUgdHJvdXbDqSBwb3VyIGNlIGZpbHRyZSAob3Ugc2FsbGVzIHZpZGVzKS4iKTsKICAgICAgICAgICAgY29uc3QgcGEgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJpbnQtYXJlYScpOyBwYS5pbm5lckhUTUwgPSBmdWxsSHRtbDsgd2luZG93LnByaW50KCk7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBwcmludENvbnZvY2F0aW9ucygpIHsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIGlmKCFBcHBTdGF0ZS5kaXN0cmlidXRpb25EYXRhIHx8IEFwcFN0YXRlLmRpc3RyaWJ1dGlvbkRhdGEubGVuZ3RoID09PSAwKSB7IGFsZXJ0KCJWZXVpbGxleiBjYWxjdWxlciBsYSByw6lwYXJ0aXRpb24gKE1lbnUgMykuIik7IHJldHVybjsgfQogICAgICAgICAgICAgICAgY29uc3QgcHJpbnRBcmVhID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ByaW50LWFyZWEnKTsgcHJpbnRBcmVhLmlubmVySFRNTCA9ICIiOwogICAgICAgICAgICAgICAgY29uc3QgZmlsdGVyQ2xhc3MgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29udm9jLWNsYXNzLWZpbHRlcicpLnZhbHVlOwogICAgICAgICAgICAgICAgY29uc3QgbG9nb1NyYyA9IEFwcFN0YXRlLmNvbmZpZy5sb2dvU3JjIHx8ICIiOyBjb25zdCBzaWduU3JjID0gQXBwU3RhdGUuY29uZmlnLnNpZ25TcmMgfHwgIiI7CiAgICAgICAgICAgICAgICBjb25zdCB0eHRBZGRyZXNzID0gKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0eHQtYWRkcmVzcycpLnZhbHVlIHx8ICIiKS5yZXBsYWNlKC9cbi9nLCAnPGJyPicpOwogICAgICAgICAgICAgICAgY29uc3QgdHh0VGl0bGUgPSAiQ09OVk9DQVRJT04gIiArIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0eHQtdGl0bGUtZXh0cmEtc3RkJykuaW5uZXJUZXh0OwogICAgICAgICAgICAgICAgY29uc3QgdHh0Qm9keSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0eHQtYm9keScpLmlubmVySFRNTDsgY29uc3QgdHh0UnVsZXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndHh0LXJ1bGVzJykuaW5uZXJIVE1MOwogICAgICAgICAgICAgICAgY29uc3QgdHh0Q2l0eSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0eHQtY2l0eScpLmlubmVyVGV4dDsgY29uc3QgdG9wTWFyZ2luID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NldHMtc3RkLXRvcCcpLnZhbHVlOwogICAgICAgICAgICAgICAgY29uc3QgYm90TWFyZ2luID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NldHMtc3RkLWJvdCcpLnZhbHVlOyBjb25zdCBmb250U2l6ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZXRzLXN0ZC1mb250JykudmFsdWU7CiAgICAgICAgICAgICAgICBsZXQgY291bnQgPSAwOwogICAgICAgICAgICAgICAgQXBwU3RhdGUuZWxldmVzLmZvckVhY2goc3R1ZGVudCA9PiB7CiAgICAgICAgICAgICAgICAgICAgbGV0IHNDbGFzcyA9IGdldFZhbHVlKHN0dWRlbnQsIFsnQ2xhc3NlJywgJ0RpdiddKTsgc0NsYXNzID0gc0NsYXNzID8gc0NsYXNzLnRvU3RyaW5nKCkudHJpbSgpIDogIk4vQSI7CiAgICAgICAgICAgICAgICAgICAgaWYoZmlsdGVyQ2xhc3MgIT09ICJBTEwiICYmIHNDbGFzcyAhPT0gZmlsdGVyQ2xhc3MpIHJldHVybjsKICAgICAgICAgICAgICAgICAgICBjb25zdCBub20gPSBub3JtYWxpemUoZ2V0VmFsdWUoc3R1ZGVudCwgWydOb20nXSkpOyBjb25zdCBwcmVub20gPSBub3JtYWxpemUoZ2V0VmFsdWUoc3R1ZGVudCwgWydQcsOpbm9tJ10pKTsKICAgICAgICAgICAgICAgICAgICBsZXQgc3R1ZGVudEV4YW1zTGlzdCA9IFtdOwogICAgICAgICAgICAgICAgICAgIEFwcFN0YXRlLmRpc3RyaWJ1dGlvbkRhdGEuZm9yRWFjaCgoZXhhbURhdGEpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoIWV4YW1EYXRhKSByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBzdHVkZW50Um9vbSA9IG51bGwsIHN0dWRlbnREYXRhSW5Sb29tID0gbnVsbDsKICAgICAgICAgICAgICAgICAgICAgICAgZXhhbURhdGEucm9vbXMuZm9yRWFjaChyID0+IHsgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgZm91bmQgPSByLnN0dWRlbnRzLmZpbmQocyA9PiBub3JtYWxpemUoZ2V0VmFsdWUocyxbJ05vbSddKSkgPT09IG5vbSAmJiBub3JtYWxpemUoZ2V0VmFsdWUocyxbJ1Byw6lub20nXSkpID09PSBwcmVub20pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoZm91bmQpIHsgc3R1ZGVudFJvb20gPSByOyBzdHVkZW50RGF0YUluUm9vbSA9IGZvdW5kOyB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICBpZihzdHVkZW50Um9vbSkgc3R1ZGVudEV4YW1zTGlzdC5wdXNoKHsgZXhhbTogQXBwU3RhdGUuZXByZXV2ZXNbZXhhbURhdGEuZXhhbUlkeF0sIHJvb206IHN0dWRlbnRSb29tLCBkYXRhOiBzdHVkZW50RGF0YUluUm9vbSB9KTsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICBzdHVkZW50RXhhbXNMaXN0LnNvcnQoKGEsIGIpID0+IGdldERhdGVUaW1lVmFsdWUoYS5leGFtLCBhLmRhdGEsIGEucm9vbS5pc1RUKSAtIGdldERhdGVUaW1lVmFsdWUoYi5leGFtLCBiLmRhdGEsIGIucm9vbS5pc1RUKSk7CiAgICAgICAgICAgICAgICAgICAgaWYoc3R1ZGVudEV4YW1zTGlzdC5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvdW50Kys7CiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBleGFtc1Jvd3MgPSAiIjsKICAgICAgICAgICAgICAgICAgICAgICAgc3R1ZGVudEV4YW1zTGlzdC5mb3JFYWNoKGl0ZW0gPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhhbXNSb3dzICs9IGA8dHI+PHRkPiR7Z2V0VmFsdWUoaXRlbS5leGFtLCBbJ01hdGnDqHJlJywgJ0VwcmV1dmUnXSl9PC90ZD48dGQ+JHtmb3JtYXREYXRlKGdldFZhbHVlKGl0ZW0uZXhhbSwgWydEYXRlJ10pKX08L3RkPjx0ZD48c3Ryb25nPiR7aXRlbS5kYXRhLnBhc3NhZ2VUaW1lIHx8ICJOb24gZMOpZmluaSJ9PC9zdHJvbmc+PC90ZD48dGQ+JHtpdGVtLmRhdGEubG9kZ2VUaW1lIHx8ICItIn08L3RkPjx0ZD4ke2l0ZW0ucm9vbS5uYW1lfTwvdGQ+PC90cj5gOwogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3R5bGVTdHIgPSBgcGFkZGluZy10b3A6JHt0b3BNYXJnaW59bW07IHBhZGRpbmctYm90dG9tOiR7Ym90TWFyZ2lufW1tOyBmb250LXNpemU6JHtmb250U2l6ZX1weDtgOwogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwYWdlSHRtbCA9IGA8ZGl2IGNsYXNzPSJwcmludC1wYWdlLWNvbnZvYyIgc3R5bGU9IiR7c3R5bGVTdHJ9Ij48ZGl2IGNsYXNzPSJjb252b2MtaGVhZGVyLXJvdyI+PGRpdiBjbGFzcz0iY29udm9jLWFkZHJlc3MiPiR7dHh0QWRkcmVzc308L2Rpdj48ZGl2IGNsYXNzPSJjb252b2MtbG9nby16b25lIj4ke2xvZ29TcmMgPyBgPGltZyBzcmM9IiR7bG9nb1NyY30iIGNsYXNzPSJjb252b2MtbG9nbyI+YCA6ICcnfTwvZGl2PjwvZGl2PjxkaXYgY2xhc3M9ImNvbnZvYy10aXRsZSI+JHt0eHRUaXRsZX08L2Rpdj48ZGl2IGNsYXNzPSJjb252b2Mtc3R1ZGVudC1pbmZvIj48c3Ryb25nPk5vbSBldCBQcsOpbm9tIDo8L3N0cm9uZz4gJHtnZXRWYWx1ZShzdHVkZW50LCBbJ05vbSddKX0gJHtnZXRWYWx1ZShzdHVkZW50LCBbJ1Byw6lub20nXSl9PGJyPjxzdHJvbmc+Q2xhc3NlIDo8L3N0cm9uZz4gJHtzQ2xhc3N9PC9kaXY+PGRpdiBjbGFzcz0iY29udm9jLWJvZHkiPiR7dHh0Qm9keX08L2Rpdj48dGFibGUgY2xhc3M9ImNvbnZvYy10YWJsZSI+PHRoZWFkPjx0cj48dGg+w4lwcmV1dmU8L3RoPjx0aD5EYXRlPC90aD48dGg+SGV1cmUgUGFzc2FnZTwvdGg+PHRoPkhldXJlIExvZ2U8L3RoPjx0aD5TYWxsZTwvdGg+PC90cj48L3RoZWFkPjx0Ym9keT4ke2V4YW1zUm93c308L3Rib2R5PjwvdGFibGU+PGRpdiBzdHlsZT0iZm9udC13ZWlnaHQ6Ym9sZDsgbWFyZ2luLWJvdHRvbTo1cHg7Ij5Sw6hnbGVtZW50IGV0IGNvbnNpZ25lcyA6PC9kaXY+PGRpdiBjbGFzcz0iY29udm9jLXJ1bGVzIiBzdHlsZT0iZm9udC1zaXplOjAuOXJlbTsiPiR7dHh0UnVsZXN9PC9kaXY+PGRpdiBjbGFzcz0iY29udm9jLWZvb3RlciIgc3R5bGU9Imp1c3RpZnktY29udGVudDogZmxleC1lbmQ7Ij48ZGl2IGNsYXNzPSJjb252b2Mtc2lnbiIgc3R5bGU9InRleHQtYWxpZ246cmlnaHQ7Ij48ZGl2PkZhaXQgw6AgJHt0eHRDaXR5fSwgbGUgJHtuZXcgRGF0ZSgpLnRvTG9jYWxlRGF0ZVN0cmluZygnZnItRlInKX08L2Rpdj4ke3NpZ25TcmMgPyBgPGltZyBzcmM9IiR7c2lnblNyY30iIHN0eWxlPSJtYXgtaGVpZ2h0OjYwcHg7IG1hcmdpbi10b3A6MTBweDsiPmAgOiAnJ308ZGl2IHN0eWxlPSJtYXJnaW4tdG9wOjEwcHg7IGZvbnQtd2VpZ2h0OmJvbGQ7Ij4ke0FwcFN0YXRlLmNvbmZpZy5uYW1lIHx8ICcnfTwvZGl2PjxkaXYgc3R5bGU9ImZvbnQtc3R5bGU6aXRhbGljOyI+JHtBcHBTdGF0ZS5jb25maWcucm9sZSB8fCAnJ308L2Rpdj48L2Rpdj48L2Rpdj48L2Rpdj5gOwogICAgICAgICAgICAgICAgICAgICAgICBwcmludEFyZWEuaW5zZXJ0QWRqYWNlbnRIVE1MKCdiZWZvcmVlbmQnLCBwYWdlSHRtbCk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBpZihjb3VudCA+IDApIHdpbmRvdy5wcmludCgpOyBlbHNlIGFsZXJ0KCJBdWN1bmUgY29udm9jYXRpb24gZ8OpbsOpcsOpZS4iKTsKICAgICAgICAgICAgfSBjYXRjaChlKSB7IGNvbnNvbGUuZXJyb3IoZSk7IGFsZXJ0KCJFcnJldXIgaW1wcmVzc2lvbjogIiArIGUubWVzc2FnZSk7IH0KICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIHByaW50U3VydmVpbGxhbnRDb252b2NhdGlvbnMoKSB7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBpZighQXBwU3RhdGUuZGlzdHJpYnV0aW9uRGF0YSB8fCBBcHBTdGF0ZS5kaXN0cmlidXRpb25EYXRhLmxlbmd0aCA9PT0gMCkgeyBhbGVydCgiVmV1aWxsZXogY2FsY3VsZXIgbGEgcsOpcGFydGl0aW9uLiIpOyByZXR1cm47IH0KICAgICAgICAgICAgICAgIGNvbnN0IHByaW50QXJlYSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcmludC1hcmVhJyk7IHByaW50QXJlYS5pbm5lckhUTUwgPSAiIjsKICAgICAgICAgICAgICAgIGNvbnN0IGZpbHRlclN1cnYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29udm9jLXN1cnYtZmlsdGVyJykudmFsdWU7CiAgICAgICAgICAgICAgICBjb25zdCBsb2dvU3JjID0gQXBwU3RhdGUuY29uZmlnLmxvZ29TcmMgfHwgIiI7IGNvbnN0IHNpZ25TcmMgPSBBcHBTdGF0ZS5jb25maWcuc2lnblNyYyB8fCAiIjsKICAgICAgICAgICAgICAgIGNvbnN0IHR4dEFkZHJlc3MgPSAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3R4dC1zdXJ2LWFkZHJlc3MnKS52YWx1ZSB8fCAiIikucmVwbGFjZSgvXG4vZywgJzxicj4nKTsKICAgICAgICAgICAgICAgIGNvbnN0IHR4dFRpdGxlID0gIkNPTlZPQ0FUSU9OICIgKyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndHh0LXRpdGxlLWV4dHJhLXN1cnYnKS5pbm5lclRleHQ7CiAgICAgICAgICAgICAgICBjb25zdCB0eHRCb2R5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3R4dC1zdXJ2LWJvZHknKS5pbm5lckhUTUw7IGNvbnN0IHR4dFJ1bGVzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3R4dC1zdXJ2LXJ1bGVzJykuaW5uZXJIVE1MOwogICAgICAgICAgICAgICAgY29uc3QgdHh0Q2l0eSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0eHQtc3Vydi1jaXR5JykuaW5uZXJUZXh0OyBjb25zdCB0b3BNYXJnaW4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2V0cy1zdXJ2LXRvcCcpLnZhbHVlOwogICAgICAgICAgICAgICAgY29uc3QgYm90TWFyZ2luID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NldHMtc3Vydi1ib3QnKS52YWx1ZTsgY29uc3QgZm9udFNpemUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2V0cy1zdXJ2LWZvbnQnKS52YWx1ZTsKICAgICAgICAgICAgICAgIGxldCBzY2hlZHVsZU1hcCA9IHt9OwogICAgICAgICAgICAgICAgQXBwU3RhdGUuZGlzdHJpYnV0aW9uRGF0YS5mb3JFYWNoKGV4YW1EYXRhID0+IHsKICAgICAgICAgICAgICAgICAgICBpZighZXhhbURhdGEpIHJldHVybjsKICAgICAgICAgICAgICAgICAgICBjb25zdCBleGFtUmF3ID0gQXBwU3RhdGUuZXByZXV2ZXNbZXhhbURhdGEuZXhhbUlkeF07IAogICAgICAgICAgICAgICAgICAgIGV4YW1EYXRhLnJvb21zLmZvckVhY2gocm9vbSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJvb20uc3VydmVpbGxhbnRzLmZvckVhY2goc3Vydk5hbWUgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoIXN1cnZOYW1lKSByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZighc2NoZWR1bGVNYXBbc3Vydk5hbWVdKSBzY2hlZHVsZU1hcFtzdXJ2TmFtZV0gPSBbXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGlzVFQgPSByb29tLmlzVFQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgdGltZSA9IGlzVFQgPyBnZXRWYWx1ZShleGFtUmF3LCBbJ0hldXJlIGRlIGTDqWJ1dCB0aWVycyB0ZW1wcycsICdIZXVyZSBUVCcsICdIZXVyZSBkw6lidXQgVFQnXSkgOiBnZXRWYWx1ZShleGFtUmF3LCBbJ0hldXJlIGRlIGTDqWJ1dCcsICdIZXVyZSddKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCF0aW1lKSB0aW1lID0gZ2V0VmFsdWUoZXhhbVJhdywgWydIZXVyZSBkZSBkw6lidXQnLCAnSGV1cmUnXSk7IAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGR1cmF0aW9uID0gaXNUVCA/IGdldFZhbHVlKGV4YW1SYXcsIFsnRHVyw6llIHRpZXJzIHRlbXBzJywgJ0R1csOpZSBlbiBtaW51dGUgdGllcnMgdGVtcHMnLCAnRHVyw6llIFRUJ10pIDogZ2V0VmFsdWUoZXhhbVJhdywgWydEdXLDqWUgZW4gbWludXRlJywgJ0R1csOpZSddKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCFkdXJhdGlvbikgZHVyYXRpb24gPSBnZXRWYWx1ZShleGFtUmF3LCBbJ0R1csOpZSBlbiBtaW51dGUnLCAnRHVyw6llJ10pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2NoZWR1bGVNYXBbc3Vydk5hbWVdLnB1c2goeyByYXdFeGFtOiBleGFtUmF3LCBpc1RUOiBpc1RULCBlcHJldXZlOiBnZXRWYWx1ZShleGFtUmF3LCBbJ01hdGnDqHJlJywgJ0VwcmV1dmUnXSksIGRhdGU6IGZvcm1hdERhdGUoZ2V0VmFsdWUoZXhhbVJhdywgWydEYXRlJ10pKSwgaGV1cmU6IHRpbWUsIGR1cmVlOiBkdXJhdGlvbiwgc2FsbGU6IHJvb20ubmFtZSB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIGxldCBjb3VudCA9IDA7IGNvbnN0IHNvcnRlZFN1cnZzID0gT2JqZWN0LmtleXMoc2NoZWR1bGVNYXApLnNvcnQoKTsKICAgICAgICAgICAgICAgIHNvcnRlZFN1cnZzLmZvckVhY2goc3Vydk5hbWUgPT4gewogICAgICAgICAgICAgICAgICAgIGlmKGZpbHRlclN1cnYgIT09ICJBTEwiICYmIHN1cnZOYW1lICE9PSBmaWx0ZXJTdXJ2KSByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2xvdHMgPSBzY2hlZHVsZU1hcFtzdXJ2TmFtZV07CiAgICAgICAgICAgICAgICAgICAgc2xvdHMuc29ydCgoYSwgYikgPT4gZ2V0RGF0ZVRpbWVWYWx1ZShhLnJhd0V4YW0sIG51bGwsIGEuaXNUVCkgLSBnZXREYXRlVGltZVZhbHVlKGIucmF3RXhhbSwgbnVsbCwgYi5pc1RUKSk7CiAgICAgICAgICAgICAgICAgICAgbGV0IHJvd3MgPSAiIjsKICAgICAgICAgICAgICAgICAgICBzbG90cy5mb3JFYWNoKHNsb3QgPT4geyByb3dzICs9IGA8dHI+PHRkPiR7c2xvdC5lcHJldXZlfTwvdGQ+PHRkPiR7c2xvdC5kYXRlfTwvdGQ+PHRkPiR7c2xvdC5oZXVyZX08L3RkPjx0ZD4ke2Zvcm1hdER1cmF0aW9uRGlzcGxheShzbG90LmR1cmVlKX08L3RkPjx0ZD4ke3Nsb3Quc2FsbGV9PC90ZD48L3RyPmA7IH0pOwogICAgICAgICAgICAgICAgICAgIGNvdW50Kys7CiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3R5bGVTdHIgPSBgcGFkZGluZy10b3A6JHt0b3BNYXJnaW59bW07IHBhZGRpbmctYm90dG9tOiR7Ym90TWFyZ2lufW1tOyBmb250LXNpemU6JHtmb250U2l6ZX1weDtgOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhZ2VIdG1sID0gYDxkaXYgY2xhc3M9InByaW50LXBhZ2UtY29udm9jIiBzdHlsZT0iJHtzdHlsZVN0cn0iPjxkaXYgY2xhc3M9ImNvbnZvYy1oZWFkZXItcm93Ij48ZGl2IGNsYXNzPSJjb252b2MtYWRkcmVzcyI+JHt0eHRBZGRyZXNzfTwvZGl2PjxkaXYgY2xhc3M9ImNvbnZvYy1sb2dvLXpvbmUiPiR7bG9nb1NyYyA/IGA8aW1nIHNyYz0iJHtsb2dvU3JjfSIgY2xhc3M9ImNvbnZvYy1sb2dvIj5gIDogJyd9PC9kaXY+PC9kaXY+PGRpdiBjbGFzcz0iY29udm9jLXRpdGxlIj4ke3R4dFRpdGxlfTwvZGl2PjxkaXYgY2xhc3M9ImNvbnZvYy1zdHVkZW50LWluZm8iPjxzdHJvbmc+U3VydmVpbGxhbnQgOjwvc3Ryb25nPiAke3N1cnZOYW1lfTwvZGl2PjxkaXYgY2xhc3M9ImNvbnZvYy1ib2R5Ij4ke3R4dEJvZHl9PC9kaXY+PHRhYmxlIGNsYXNzPSJjb252b2MtdGFibGUiPjx0aGVhZD48dHI+PHRoPsOJcHJldXZlPC90aD48dGg+RGF0ZTwvdGg+PHRoPkhvcmFpcmUgR2xvYmFsPC90aD48dGg+RHVyw6llPC90aD48dGg+U2FsbGU8L3RoPjwvdHI+PC90aGVhZD48dGJvZHk+JHtyb3dzfTwvdGJvZHk+PC90YWJsZT48ZGl2IHN0eWxlPSJmb250LXdlaWdodDpib2xkOyBtYXJnaW4tYm90dG9tOjVweDsiPkNvbnNpZ25lcyA6PC9kaXY+PGRpdiBjbGFzcz0iY29udm9jLXJ1bGVzIiBzdHlsZT0iZm9udC1zaXplOjAuOXJlbTsiPiR7dHh0UnVsZXN9PC9kaXY+PGRpdiBjbGFzcz0iY29udm9jLWZvb3RlciIgc3R5bGU9Imp1c3RpZnktY29udGVudDogZmxleC1lbmQ7Ij48ZGl2IGNsYXNzPSJjb252b2Mtc2lnbiIgc3R5bGU9InRleHQtYWxpZ246cmlnaHQ7Ij48ZGl2PkZhaXQgw6AgJHt0eHRDaXR5fSwgbGUgJHtuZXcgRGF0ZSgpLnRvTG9jYWxlRGF0ZVN0cmluZygnZnItRlInKX08L2Rpdj4ke3NpZ25TcmMgPyBgPGltZyBzcmM9IiR7c2lnblNyY30iIHN0eWxlPSJtYXgtaGVpZ2h0OjYwcHg7IG1hcmdpbi10b3A6MTBweDsiPmAgOiAnJ308ZGl2IHN0eWxlPSJtYXJnaW4tdG9wOjEwcHg7IGZvbnQtd2VpZ2h0OmJvbGQ7Ij4ke0FwcFN0YXRlLmNvbmZpZy5uYW1lIHx8ICcnfTwvZGl2PjxkaXYgc3R5bGU9ImZvbnQtc3R5bGU6aXRhbGljOyI+JHtBcHBTdGF0ZS5jb25maWcucm9sZSB8fCAnJ308L2Rpdj48L2Rpdj48L2Rpdj48L2Rpdj5gOwogICAgICAgICAgICAgICAgICAgIHByaW50QXJlYS5pbnNlcnRBZGphY2VudEhUTUwoJ2JlZm9yZWVuZCcsIHBhZ2VIdG1sKTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgaWYoY291bnQgPiAwKSB3aW5kb3cucHJpbnQoKTsgZWxzZSBhbGVydCgiQXVjdW5lIHN1cnZlaWxsYW5jZSB0cm91dsOpZS4iKTsKICAgICAgICAgICAgfSBjYXRjaChlKSB7IGNvbnNvbGUuZXJyb3IoZSk7IGFsZXJ0KCJFcnJldXIgaW1wcmVzc2lvbjogIiArIGUubWVzc2FnZSk7IH0KICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIHBvcHVsYXRlUmVjYXBGaWx0ZXJzKCkgeyAKICAgICAgICAgICAgY29uc3QgZXhhbVNlbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZWNhcC1leGFtLXNlbGVjdCcpOyBleGFtU2VsLmlubmVySFRNTCA9ICc8b3B0aW9uIHZhbHVlPSJBTEwiPlRvdXRlcyBsZXMgw6lwcmV1dmVzPC9vcHRpb24+JzsgCiAgICAgICAgICAgIEFwcFN0YXRlLmRpc3RyaWJ1dGlvbkRhdGEuZm9yRWFjaCgoZCwgaSkgPT4geyBpZighZCkgcmV0dXJuOyBleGFtU2VsLmFkZChuZXcgT3B0aW9uKGdldFZhbHVlKEFwcFN0YXRlLmVwcmV1dmVzW2QuZXhhbUlkeF0sIFsnTWF0acOocmUnLCAnRXByZXV2ZSddKSwgaSkpOyB9KTsgCiAgICAgICAgICAgIHVwZGF0ZVJlY2FwUm9vbVNlbGVjdCgpOyAKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIHVwZGF0ZVJlY2FwUm9vbVNlbGVjdCgpIHsgCiAgICAgICAgICAgIGNvbnN0IHJvb21TZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVjYXAtcm9vbS1zZWxlY3QnKTsgcm9vbVNlbC5pbm5lckhUTUwgPSAnPG9wdGlvbiB2YWx1ZT0iQUxMIj5Ub3V0ZXMgbGVzIHNhbGxlcyB1dGlsaXPDqWVzPC9vcHRpb24+JzsgCiAgICAgICAgICAgIGNvbnN0IGV4YW1JZHggPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVjYXAtZXhhbS1zZWxlY3QnKS52YWx1ZTsgCiAgICAgICAgICAgIGlmKGV4YW1JZHggIT09ICJBTEwiKSB7IAogICAgICAgICAgICAgICAgY29uc3QgZGlzdCA9IEFwcFN0YXRlLmRpc3RyaWJ1dGlvbkRhdGFbZXhhbUlkeF07IGlmKGRpc3QpIGRpc3Qucm9vbXMuZm9yRWFjaChyID0+IHsgaWYoci5zdHVkZW50cy5sZW5ndGggPiAwKSByb29tU2VsLmFkZChuZXcgT3B0aW9uKHIubmFtZSwgci5uYW1lKSk7IH0pOyAKICAgICAgICAgICAgfSBlbHNlIHsgCiAgICAgICAgICAgICAgICBsZXQgcm9vbXMgPSBuZXcgU2V0KCk7IEFwcFN0YXRlLmRpc3RyaWJ1dGlvbkRhdGEuZm9yRWFjaChkID0+IHsgaWYoZCkgZC5yb29tcy5mb3JFYWNoKHIgPT4geyBpZihyLnN0dWRlbnRzLmxlbmd0aCA+IDApIHJvb21zLmFkZChyLm5hbWUpOyB9KTsgfSk7IAogICAgICAgICAgICAgICAgQXJyYXkuZnJvbShyb29tcykuc29ydCgpLmZvckVhY2gociA9PiByb29tU2VsLmFkZChuZXcgT3B0aW9uKHIsIHIpKSk7IAogICAgICAgICAgICB9IAogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gcHJpbnRHbG9iYWxSZWNhcCgpIHsgCiAgICAgICAgICAgIGlmKCFBcHBTdGF0ZS5kaXN0cmlidXRpb25EYXRhLmxlbmd0aCkgcmV0dXJuIGFsZXJ0KCJSw6lwYXJ0aXRpb24gdmlkZSIpOyAKICAgICAgICAgICAgY29uc3QgZXhhbUZpbHRlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZWNhcC1leGFtLXNlbGVjdCcpLnZhbHVlOyAKICAgICAgICAgICAgY29uc3Qgcm9vbUZpbHRlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZWNhcC1yb29tLXNlbGVjdCcpLnZhbHVlOyAKICAgICAgICAgICAgY29uc3QgbG9nbyA9IEFwcFN0YXRlLmNvbmZpZy5sb2dvU3JjIHx8ICIiOyAKICAgICAgICAgICAgbGV0IGh0bWwgPSAiIjsgCiAgICAgICAgICAgIGxldCBleGFtc1RvUHJpbnQgPSAoZXhhbUZpbHRlciA9PT0gIkFMTCIpID8gQXBwU3RhdGUuZGlzdHJpYnV0aW9uRGF0YS5maWx0ZXIoZCA9PiBkICE9PSBudWxsKSA6IFtBcHBTdGF0ZS5kaXN0cmlidXRpb25EYXRhW2V4YW1GaWx0ZXJdXTsgCiAgICAgICAgICAgIAogICAgICAgICAgICBleGFtc1RvUHJpbnQuZm9yRWFjaChkaXN0ID0+IHsgCiAgICAgICAgICAgICAgICBpZighZGlzdCkgcmV0dXJuOyAKICAgICAgICAgICAgICAgIGNvbnN0IGV4YW1JbmZvID0gQXBwU3RhdGUuZXByZXV2ZXNbZGlzdC5leGFtSWR4XTsgCiAgICAgICAgICAgICAgICBjb25zdCBleGFtTmFtZSA9IGdldFZhbHVlKGV4YW1JbmZvLCBbJ01hdGnDqHJlJywnRXByZXV2ZSddKTsgCiAgICAgICAgICAgICAgICBkaXN0LnJvb21zLmZvckVhY2gociA9PiB7IAogICAgICAgICAgICAgICAgICAgIGlmKHJvb21GaWx0ZXIgIT09ICJBTEwiICYmIHIubmFtZSAhPT0gcm9vbUZpbHRlcikgcmV0dXJuOyAKICAgICAgICAgICAgICAgICAgICBpZihyLnN0dWRlbnRzLmxlbmd0aCA9PT0gMCkgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgIGxldCBsaXN0ID0gWy4uLnIuc3R1ZGVudHNdOyAKICAgICAgICAgICAgICAgICAgICBsaXN0LnNvcnQoKGEsYikgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGEucGFzc2FnZVRpbWUgJiYgYi5wYXNzYWdlVGltZSkgcmV0dXJuIGEucGFzc2FnZVRpbWUubG9jYWxlQ29tcGFyZShiLnBhc3NhZ2VUaW1lKTsKICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKGdldFZhbHVlKGEsWydOb20nXSkgfHwgIiIpLmxvY2FsZUNvbXBhcmUoZ2V0VmFsdWUoYixbJ05vbSddKSB8fCAiIik7CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgbGV0IHJvd3MgPSAiIjsgCiAgICAgICAgICAgICAgICAgICAgbGlzdC5mb3JFYWNoKGl0ZW0gPT4geyAKICAgICAgICAgICAgICAgICAgICAgICAgcm93cyArPSBgPHRyPjx0ZD4ke2dldFZhbHVlKGl0ZW0sWydOb20nXSl9PC90ZD48dGQ+JHtnZXRWYWx1ZShpdGVtLFsnUHLDqW5vbSddKX08L3RkPjx0ZD4ke2dldFZhbHVlKGl0ZW0sWydDbGFzc2UnXSl9PC90ZD48dGQ+PHN0cm9uZz4ke2l0ZW0ucGFzc2FnZVRpbWUgfHwgIi0ifTwvc3Ryb25nPjwvdGQ+PC90cj5gOyAKICAgICAgICAgICAgICAgICAgICB9KTsgCiAgICAgICAgICAgICAgICAgICAgaHRtbCArPSBgPGRpdiBjbGFzcz0icHJpbnQtcGFnZS1saXN0IiBzdHlsZT0icGFnZS1icmVhay1hZnRlcjogYWx3YXlzOyI+PGRpdiBjbGFzcz0icHJpbnQtaGVhZGVyIj48ZGl2PlRBQkxFQVUgUsOJQ0FQSVRVTEFUSUY8L2Rpdj4ke2xvZ28gPyBgPGltZyBzcmM9IiR7bG9nb30iIGNsYXNzPSJwcmludC1sb2dvIj5gIDogJyd9PC9kaXY+PGRpdiBjbGFzcz0icHJpbnQtZG9jLXRpdGxlIj4ke2V4YW1OYW1lfSAtIFNhbGxlICR7ci5uYW1lfTwvZGl2PjxkaXYgc3R5bGU9InRleHQtYWxpZ246Y2VudGVyOyBmb250LXNpemU6MS4xcmVtOyBtYXJnaW4tYm90dG9tOjEwcHg7Ij48c3Ryb25nPkRhdGUgOjwvc3Ryb25nPiAke2Zvcm1hdERhdGUoZ2V0VmFsdWUoZXhhbUluZm8sWydEYXRlJ10pKX08L2Rpdj48dGFibGUgY2xhc3M9InByaW50LXRhYmxlIj48dGhlYWQ+PHRyPjx0aD5Ob208L3RoPjx0aD5QcsOpbm9tPC90aD48dGg+Q2xhc3NlPC90aD48dGg+SGV1cmUgRMOpYnV0PC90aD48L3RyPjwvdGhlYWQ+PHRib2R5PiR7cm93c308L3Rib2R5PjwvdGFibGU+PC9kaXY+YDsgCiAgICAgICAgICAgICAgICB9KTsgCiAgICAgICAgICAgIH0pOyAKICAgICAgICAgICAgaWYoaHRtbCA9PT0gIiIpIHJldHVybiBhbGVydCgiQXVjdW5lIGRvbm7DqWUgcG91ciBjZSBmaWx0cmUuIik7IAogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJpbnQtYXJlYScpLmlubmVySFRNTCA9IGh0bWw7IHdpbmRvdy5wcmludCgpOyAKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgZnVuY3Rpb24gcHJpbnRQVigpIHsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIGNvbnN0IGV4YW1JZHggPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHYtZXhhbS1zZWxlY3QnKS52YWx1ZTsKICAgICAgICAgICAgICAgIGNvbnN0IHJvb21JZHggPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHYtcm9vbS1zZWxlY3QnKS52YWx1ZTsKICAgICAgICAgICAgICAgIGlmKCFBcHBTdGF0ZS5kaXN0cmlidXRpb25EYXRhIHx8IEFwcFN0YXRlLmRpc3RyaWJ1dGlvbkRhdGEubGVuZ3RoID09PSAwKSB7IGFsZXJ0KCJSw6lwYXJ0aXRpb24gbWFucXVhbnRlLiIpOyByZXR1cm47IH0KICAgICAgICAgICAgICAgIGNvbnN0IGxvZ28gPSBBcHBTdGF0ZS5jb25maWcubG9nb1NyYyB8fCAiIjsgbGV0IGh0bWwgPSAiIjsKICAgICAgICAgICAgICAgIGxldCBleGFtc1RvUHJpbnQgPSAoZXhhbUlkeCA9PT0gIkFMTCIpID8gQXBwU3RhdGUuZGlzdHJpYnV0aW9uRGF0YSA6IFtBcHBTdGF0ZS5kaXN0cmlidXRpb25EYXRhW2V4YW1JZHhdXTsKICAgICAgICAgICAgICAgIGV4YW1zVG9QcmludC5mb3JFYWNoKGV4YW1EYXRhID0+IHsKICAgICAgICAgICAgICAgICAgICBpZighZXhhbURhdGEpIHJldHVybjsKICAgICAgICAgICAgICAgICAgICBjb25zdCBleGFtSW5mbyA9IEFwcFN0YXRlLmVwcmV1dmVzW2V4YW1EYXRhLmV4YW1JZHhdOwogICAgICAgICAgICAgICAgICAgIGxldCByb29tc1RvUHJpbnQgPSAocm9vbUlkeCA9PT0gIkFMTCIgfHwgZXhhbUlkeCA9PT0gIkFMTCIpID8gZXhhbURhdGEucm9vbXMgOiBbZXhhbURhdGEucm9vbXNbcm9vbUlkeF1dOwogICAgICAgICAgICAgICAgICAgIHJvb21zVG9QcmludC5mb3JFYWNoKHJvb21EYXRhID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYocm9vbURhdGEuc3R1ZGVudHMubGVuZ3RoID09PSAwKSByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGlzVFQgPSByb29tRGF0YS5pc1RUOwogICAgICAgICAgICAgICAgICAgICAgICBsZXQgdGltZSA9IGlzVFQgPyBnZXRWYWx1ZShleGFtSW5mbywgWydIZXVyZSBkZSBkw6lidXQgdGllcnMgdGVtcHMnLCAnSGV1cmUgVFQnXSkgOiBnZXRWYWx1ZShleGFtSW5mbywgWydIZXVyZSBkZSBkw6lidXQnLCAnSGV1cmUnXSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCF0aW1lKSB0aW1lID0gZ2V0VmFsdWUoZXhhbUluZm8sIFsnSGV1cmUgZGUgZMOpYnV0JywgJ0hldXJlJ10pOwogICAgICAgICAgICAgICAgICAgICAgICBsZXQgZHVyYXRpb24gPSBpc1RUID8gZ2V0VmFsdWUoZXhhbUluZm8sIFsnRHVyw6llIGVuIG1pbnV0ZSB0aWVycyB0ZW1wcycsICdEdXLDqWUgVFQnXSkgOiBnZXRWYWx1ZShleGFtSW5mbywgWydEdXLDqWUgZW4gbWludXRlJywgJ0R1csOpZSddKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoIWR1cmF0aW9uKSBkdXJhdGlvbiA9IGdldFZhbHVlKGV4YW1JbmZvLCBbJ0R1csOpZSBlbiBtaW51dGUnLCAnRHVyw6llJ10pOwogICAgICAgICAgICAgICAgICAgICAgICBodG1sICs9IGA8ZGl2IGNsYXNzPSJwcmludC1wYWdlLWxpc3QiIHN0eWxlPSJwYWdlLWJyZWFrLWFmdGVyOiBhbHdheXM7Ij48ZGl2IGNsYXNzPSJwcmludC1oZWFkZXIiPjxkaXY+JHtBcHBTdGF0ZS5jb25maWcuZXhhbVRpdGxlIHx8ICJFWEFNRU4ifTwvZGl2PiR7bG9nbyA/IGA8aW1nIHNyYz0iJHtsb2dvfSIgY2xhc3M9InByaW50LWxvZ28iPmAgOiAnJ308L2Rpdj48ZGl2IGNsYXNzPSJwcmludC1kb2MtdGl0bGUiPlBST0PDiFMgVkVSQkFMIERFIFNBTExFPC9kaXY+PGRpdiBjbGFzcz0icHJpbnQtaW5mb3MtYm94Ij48c3Ryb25nPsOJcHJldXZlIDo8L3N0cm9uZz4gJHtnZXRWYWx1ZShleGFtSW5mbyxbJ01hdGnDqHJlJywnRXByZXV2ZSddKX08YnI+PHN0cm9uZz5EYXRlIDo8L3N0cm9uZz4gJHtmb3JtYXREYXRlKGdldFZhbHVlKGV4YW1JbmZvLFsnRGF0ZSddKSl9PGJyPjxzdHJvbmc+SGV1cmUgZMOpYnV0IDo8L3N0cm9uZz4gJHt0aW1lfSAtIDxzdHJvbmc+RHVyw6llIDo8L3N0cm9uZz4gJHtmb3JtYXREdXJhdGlvbkRpc3BsYXkoZHVyYXRpb24pfTxicj48c3Ryb25nPlNhbGxlIDo8L3N0cm9uZz4gJHtyb29tRGF0YS5uYW1lfTxicj48c3Ryb25nPk5vbWJyZSBkZSBjYW5kaWRhdHMgOjwvc3Ryb25nPiAke3Jvb21EYXRhLnN0dWRlbnRzLmxlbmd0aH08L2Rpdj48ZGl2IHN0eWxlPSJib3JkZXI6MXB4IHNvbGlkICMwMDA7IHBhZGRpbmc6MTBweDsgaGVpZ2h0OjMwMHB4OyBtYXJnaW4tYm90dG9tOjIwcHg7Ij48c3Ryb25nPk9ic2VydmF0aW9ucyAvIEluY2lkZW50cyA6PC9zdHJvbmc+PC9kaXY+PGRpdiBzdHlsZT0iYm9yZGVyOjFweCBzb2xpZCAjMDAwOyBwYWRkaW5nOjEwcHg7IGhlaWdodDoxNTBweDsgbWFyZ2luLWJvdHRvbToyMHB4OyI+PHN0cm9uZz5BYnNlbnRzIChOb21zIGV0IFByw6lub21zKSA6PC9zdHJvbmc+PC9kaXY+PGRpdiBjbGFzcz0icHYtc2lnbmF0dXJlcyI+PGRpdiBjbGFzcz0icHYtYm94Ij48c3Ryb25nPlNpZ25hdHVyZSBTdXJ2ZWlsbGFudCAxIDo8L3N0cm9uZz48L2Rpdj48ZGl2IGNsYXNzPSJwdi1ib3giPjxzdHJvbmc+U2lnbmF0dXJlIFN1cnZlaWxsYW50IDIgOjwvc3Ryb25nPjwvZGl2PjwvZGl2PjxkaXYgY2xhc3M9ImNvbnZvYy1mb290ZXIiIHN0eWxlPSJqdXN0aWZ5LWNvbnRlbnQ6IGZsZXgtZW5kOyBtYXJnaW4tdG9wOjUwcHg7Ij48ZGl2IGNsYXNzPSJjb252b2Mtc2lnbiIgc3R5bGU9InRleHQtYWxpZ246cmlnaHQ7Ij48ZGl2PkZhaXQgw6AgJHtBcHBTdGF0ZS5jb252b2NUZXh0LmNpdHkgfHwgJ1ZpbGxlJ30sIGxlICR7bmV3IERhdGUoKS50b0xvY2FsZURhdGVTdHJpbmcoJ2ZyLUZSJyl9PC9kaXY+PGRpdiBzdHlsZT0ibWFyZ2luLXRvcDoxMHB4OyBmb250LXdlaWdodDpib2xkOyI+JHtBcHBTdGF0ZS5jb25maWcubmFtZX08L2Rpdj48L2Rpdj48L2Rpdj48L2Rpdj5gOwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJpbnQtYXJlYScpLmlubmVySFRNTCA9IGh0bWw7IHdpbmRvdy5wcmludCgpOwogICAgICAgICAgICB9IGNhdGNoKGUpeyBjb25zb2xlLmVycm9yKGUpOyBhbGVydCgiRXJyZXVyIGltcHJlc3Npb24gUFYiKTsgfQogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gcHJpbnRQb2NoZXR0ZXMoKSB7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBjb25zdCBleGFtSWR4ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3B2LWV4YW0tc2VsZWN0JykudmFsdWU7CiAgICAgICAgICAgICAgICBjb25zdCByb29tSWR4ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3B2LXJvb20tc2VsZWN0JykudmFsdWU7CiAgICAgICAgICAgICAgICBpZighQXBwU3RhdGUuZGlzdHJpYnV0aW9uRGF0YSB8fCBBcHBTdGF0ZS5kaXN0cmlidXRpb25EYXRhLmxlbmd0aCA9PT0gMCkgeyBhbGVydCgiUsOpcGFydGl0aW9uIG1hbnF1YW50ZS4iKTsgcmV0dXJuOyB9CiAgICAgICAgICAgICAgICBjb25zdCBsb2dvID0gQXBwU3RhdGUuY29uZmlnLmxvZ29TcmMgfHwgIiI7IGNvbnN0IGNvbnNpZ25lcyA9IEFwcFN0YXRlLnBvY2hldHRlVGV4dC5zdXJ2IHx8ICIiOyBsZXQgaHRtbCA9ICIiOwogICAgICAgICAgICAgICAgbGV0IGV4YW1zVG9QcmludCA9IChleGFtSWR4ID09PSAiQUxMIikgPyBBcHBTdGF0ZS5kaXN0cmlidXRpb25EYXRhIDogW0FwcFN0YXRlLmRpc3RyaWJ1dGlvbkRhdGFbZXhhbUlkeF1dOwogICAgICAgICAgICAgICAgZXhhbXNUb1ByaW50LmZvckVhY2goZXhhbURhdGEgPT4gewogICAgICAgICAgICAgICAgICAgIGlmKCFleGFtRGF0YSkgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IGV4YW1JbmZvID0gQXBwU3RhdGUuZXByZXV2ZXNbZXhhbURhdGEuZXhhbUlkeF07CiAgICAgICAgICAgICAgICAgICAgbGV0IHJvb21zVG9QcmludCA9IChyb29tSWR4ID09PSAiQUxMIiB8fCBleGFtSWR4ID09PSAiQUxMIikgPyBleGFtRGF0YS5yb29tcyA6IFtleGFtRGF0YS5yb29tc1tyb29tSWR4XV07CiAgICAgICAgICAgICAgICAgICAgcm9vbXNUb1ByaW50LmZvckVhY2gocm9vbURhdGEgPT4gewogICAgICAgICAgICAgICAgICAgICAgICBpZihyb29tRGF0YS5zdHVkZW50cy5sZW5ndGggPT09IDApIHJldHVybjsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaXNUVCA9IHJvb21EYXRhLmlzVFQ7CiAgICAgICAgICAgICAgICAgICAgICAgIGxldCB0aW1lID0gaXNUVCA/IGdldFZhbHVlKGV4YW1JbmZvLCBbJ0hldXJlIGRlIGTDqWJ1dCB0aWVycyB0ZW1wcycsICdIZXVyZSBUVCddKSA6IGdldFZhbHVlKGV4YW1JbmZvLCBbJ0hldXJlIGRlIGTDqWJ1dCcsICdIZXVyZSddKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoIXRpbWUpIHRpbWUgPSBnZXRWYWx1ZShleGFtSW5mbywgWydIZXVyZSBkZSBkw6lidXQnLCAnSGV1cmUnXSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBkdXJhdGlvbiA9IGlzVFQgPyBnZXRWYWx1ZShleGFtSW5mbywgWydEdXLDqWUgZW4gbWludXRlIHRpZXJzIHRlbXBzJywgJ0R1csOpZSBUVCddKSA6IGdldFZhbHVlKGV4YW1JbmZvLCBbJ0R1csOpZSBlbiBtaW51dGUnLCAnRHVyw6llJ10pOwogICAgICAgICAgICAgICAgICAgICAgICBpZighZHVyYXRpb24pIGR1cmF0aW9uID0gZ2V0VmFsdWUoZXhhbUluZm8sIFsnRHVyw6llIGVuIG1pbnV0ZScsICdEdXLDqWUnXSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGh0bWwgKz0gYDxkaXYgY2xhc3M9InByaW50LXBhZ2UtY29udm9jIj48ZGl2IGNsYXNzPSJwcmludC1oZWFkZXIiPjxkaXYgc3R5bGU9ImZvbnQtc2l6ZToxLjVyZW07IGZvbnQtd2VpZ2h0OmJvbGQ7Ij5QT0NIRVRURSBTVUpFVDwvZGl2PiR7bG9nbyA/IGA8aW1nIHNyYz0iJHtsb2dvfSIgY2xhc3M9InByaW50LWxvZ28iPmAgOiAnJ308L2Rpdj48ZGl2IHN0eWxlPSJib3JkZXI6NHB4IHNvbGlkICMwMDA7IHBhZGRpbmc6MjBweDsgdGV4dC1hbGlnbjpjZW50ZXI7IG1hcmdpbjozMHB4IDA7Ij48aDEgc3R5bGU9ImZvbnQtc2l6ZTozcmVtOyBtYXJnaW46MDsiPiR7cm9vbURhdGEubmFtZX08L2gxPjxoMiBzdHlsZT0iZm9udC1zaXplOjJyZW07IG1hcmdpbjoxMHB4IDA7Ij4ke2dldFZhbHVlKGV4YW1JbmZvLFsnTWF0acOocmUnLCdFcHJldXZlJ10pfTwvaDI+PGgzIHN0eWxlPSJtYXJnaW46MDsiPiR7cm9vbURhdGEuc3R1ZGVudHMubGVuZ3RofSBDb3BpZXM8L2gzPjwvZGl2PjxkaXYgY2xhc3M9InByaW50LWluZm9zLWJveCIgc3R5bGU9ImZvbnQtc2l6ZToxLjJyZW07Ij48c3Ryb25nPkRhdGUgOjwvc3Ryb25nPiAke2Zvcm1hdERhdGUoZ2V0VmFsdWUoZXhhbUluZm8sWydEYXRlJ10pKX08YnI+PHN0cm9uZz5Ib3JhaXJlIDo8L3N0cm9uZz4gJHt0aW1lfTxicj48c3Ryb25nPkR1csOpZSA6PC9zdHJvbmc+ICR7Zm9ybWF0RHVyYXRpb25EaXNwbGF5KGR1cmF0aW9uKX08YnI+PHN0cm9uZz5TdXJ2ZWlsbGFudHMgOjwvc3Ryb25nPiAke3Jvb21EYXRhLnN1cnZlaWxsYW50cy5qb2luKCcgLyAnKX08L2Rpdj48ZGl2IHN0eWxlPSJtYXJnaW4tdG9wOjIwcHg7IGJvcmRlcjoxcHggc29saWQgIzAwMDsgcGFkZGluZzoxNXB4OyBmbGV4OjE7Ij48c3Ryb25nPkNPTlNJR05FUyBBVVggU1VSVkVJTExBTlRTIDo8L3N0cm9uZz48YnI+PGJyPjxkaXYgc3R5bGU9IndoaXRlLXNwYWNlOiBwcmUtd3JhcDsiPiR7Y29uc2lnbmVzfTwvZGl2PjwvZGl2PjxkaXYgY2xhc3M9ImNvbnZvYy1mb290ZXIiIHN0eWxlPSJqdXN0aWZ5LWNvbnRlbnQ6IGZsZXgtZW5kOyI+PGRpdiBjbGFzcz0iY29udm9jLXNpZ24iIHN0eWxlPSJ0ZXh0LWFsaWduOnJpZ2h0OyI+PGRpdj5GYWl0IMOgICR7QXBwU3RhdGUuY29udm9jVGV4dC5jaXR5IHx8ICdWaWxsZSd9LCBsZSAke25ldyBEYXRlKCkudG9Mb2NhbGVEYXRlU3RyaW5nKCdmci1GUicpfTwvZGl2PjxkaXYgc3R5bGU9Im1hcmdpbi10b3A6MTBweDsgZm9udC13ZWlnaHQ6Ym9sZDsiPiR7QXBwU3RhdGUuY29uZmlnLm5hbWV9PC9kaXY+PC9kaXY+PC9kaXY+PC9kaXY+YDsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ByaW50LWFyZWEnKS5pbm5lckhUTUwgPSBodG1sOyB3aW5kb3cucHJpbnQoKTsKICAgICAgICAgICAgfSBjYXRjaChlKXsgY29uc29sZS5lcnJvcihlKTsgYWxlcnQoIkVycmV1ciBpbXByZXNzaW9uIFBvY2hldHRlIik7IH0KICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGZvcm1hdERhdGUoZCkgeyBpZighZCkgcmV0dXJuICIiOyBpZighaXNOYU4oZCkgJiYgZCA+IDEwMDApIHsgY29uc3QgZGF0ZU9iaiA9IG5ldyBEYXRlKChkIC0gKDI1NTY3ICsgMikpKjg2NDAwKjEwMDApOyByZXR1cm4gZGF0ZU9iai50b0xvY2FsZURhdGVTdHJpbmcoJ2ZyLUZSJyk7IH0gcmV0dXJuIGQ7IH0KICAgICAgICBmdW5jdGlvbiBhcHBseUxheW91dCh0eXBlKXsgCiAgICAgICAgICAgIGlmKHR5cGUgPT09ICdzdGQnKSB7IGNvbnN0IHMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29udm9jLXRlbXBsYXRlJyk7IHMuc3R5bGUucGFkZGluZ1RvcCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZXRzLXN0ZC10b3AnKS52YWx1ZSArICdtbSc7IHMuc3R5bGUucGFkZGluZ0JvdHRvbSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZXRzLXN0ZC1ib3QnKS52YWx1ZSArICdtbSc7IHMuc3R5bGUuZm9udFNpemUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2V0cy1zdGQtZm9udCcpLnZhbHVlICsgJ3B4JzsgfSAKICAgICAgICAgICAgaWYodHlwZSA9PT0gJ3N1cnYnKSB7IGNvbnN0IHMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29udm9jLXN1cnYtdGVtcGxhdGUnKTsgcy5zdHlsZS5wYWRkaW5nVG9wID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NldHMtc3Vydi10b3AnKS52YWx1ZSArICdtbSc7IHMuc3R5bGUucGFkZGluZ0JvdHRvbSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZXRzLXN1cnYtYm90JykudmFsdWUgKyAnbW0nOyBzLnN0eWxlLmZvbnRTaXplID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NldHMtc3Vydi1mb250JykudmFsdWUgKyAncHgnOyB9IAogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gdXBkYXRlUmVhbFRpbWVDb3VudGVycygpIHsKICAgICAgICAgICAgY29uc3QgY2FyZHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcucm9vbS1jYXJkJyk7CiAgICAgICAgICAgIGNhcmRzLmZvckVhY2goY2FyZCA9PiB7CiAgICAgICAgICAgICAgICBjb25zdCBib2R5ID0gY2FyZC5xdWVyeVNlbGVjdG9yKCcucm9vbS1ib2R5Jyk7CiAgICAgICAgICAgICAgICBpZihib2R5KSB7CiAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvdW50ID0gYm9keS5jaGlsZHJlbi5sZW5ndGg7IGNvbnN0IGNhcCA9IGJvZHkuZ2V0QXR0cmlidXRlKCdkYXRhLWNhcGFjaXR5Jyk7CiAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IGNhcmQucXVlcnlTZWxlY3RvcignLnJvb20taGVhZGVyLXRvcCBkaXYgc3BhbicpOyBpZihjb250YWluZXIpIGNvbnRhaW5lci5pbm5lclRleHQgPSBgJHtjb3VudH0vJHtjYXB9YDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgfQoKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY3VycmVudC1kYXRlJykuaW5uZXJUZXh0ID0gbmV3IERhdGUoKS50b0xvY2FsZURhdGVTdHJpbmcoJ2ZyLUZSJyk7CiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2N1cnJlbnQtZGF0ZS1zdXJ2JykuaW5uZXJUZXh0ID0gbmV3IERhdGUoKS50b0xvY2FsZURhdGVTdHJpbmcoJ2ZyLUZSJyk7CiAgICAgICAgY29uc3QgZGVmYXVsdENvbnNpZ25lcyA9IGAtSW5zdGFsbGVyIGxlcyDDqWzDqHZlcyBkYW5zIGxlIHNpbGVuY2Vcbi1GYWlyZSDDqXRlaW5kcmUgbGVzIHTDqWzDqXBob25lcyBldCBsZXMgbW9udHJlcyBjb25uZWN0w6llc1xuLUZhaXJlIHJhbmdlciBsZXMgc2Fjc1xuLVbDqXJpZmllciBsZXMgcGnDqGNlcyBkJ2lkZW50aXTDqVxuLUFmZmljaGVyIGxlcyBob3JhaXJlcyBhdSB0YWJsZWF1XG4tRGlzdHJpYnVlciBsZXMgY29waWVzIHJldG91cm7DqWVzXG4tQSBsYSBmaW4gZGUgbCfDqXByZXV2ZSwgbGVzIMOpbMOodmVzIHJlc3RlbnQgw6AgbGV1ciBwbGFjZVxuLVNpZ25hdHVyZSDDqW1hcmdlbWVudFxuLUNvbXBsw6l0ZXIgbGUgcHJvY8OocyB2ZXJiYWxcbi1Ew6lwb3NlciB0b3VzIGxlcyDDqWzDqW1lbnRzIGF1IHNlY3LDqXRhcmlhdGA7CiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3R4dC1wb2NoZXR0ZS1zdXJ2JykudmFsdWUgPSBkZWZhdWx0Q29uc2lnbmVzOyBBcHBTdGF0ZS5wb2NoZXR0ZVRleHQuc3VydiA9IGRlZmF1bHRDb25zaWduZXM7CiAgICA8L3NjcmlwdD4KCjxzY3JpcHQ+CihmdW5jdGlvbigpewogICAgZnVuY3Rpb24gcGF0Y2hVSSgpIHsKICAgICAgICB2YXIgbmFtZUVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbmZpZ05hbWUnKTsKICAgICAgICB2YXIgcm9sZUVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbmZpZ1JvbGUnKTsKICAgICAgICBpZiAobmFtZUVsKSB7IHZhciBmZyA9IG5hbWVFbC5jbG9zZXN0KCcuZm9ybS1ncm91cCcpOyBpZihmZykgZmcuc3R5bGUuZGlzcGxheSA9ICdub25lJzsgfQogICAgICAgIGlmIChyb2xlRWwpIHsgdmFyIGZnID0gcm9sZUVsLmNsb3Nlc3QoJy5mb3JtLWdyb3VwJyk7IGlmKGZnKSBmZy5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOyB9CiAgICAgICAgdmFyIGNvbHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcjdmlldzEgLmNvbmZpZy1jb2wnKTsKICAgICAgICBpZiAoY29scy5sZW5ndGggPj0gMikgY29sc1sxXS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOwogICAgICAgIHZhciBoZWFkZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjdmlldzEgLmhlYWRlci1wYW5lbCcpOwogICAgICAgIGlmIChoZWFkZXIgJiYgIWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwaWxvdGUtbm90aWNlJykpIHsKICAgICAgICAgICAgdmFyIGQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgICAgICAgICAgZC5pZCA9ICdwaWxvdGUtbm90aWNlJzsKICAgICAgICAgICAgZC5zdHlsZS5jc3NUZXh0ID0gJ2JhY2tncm91bmQ6I2VhZjRmZTtib3JkZXI6MXB4IHNvbGlkICMzNDk4ZGI7Ym9yZGVyLXJhZGl1czo4cHg7cGFkZGluZzoxMHB4IDE2cHg7bWFyZ2luLWJvdHRvbToxNXB4O2ZvbnQtc2l6ZTowLjg1cmVtO2NvbG9yOiMyYzNlNTA7ZGlzcGxheTpmbGV4O2FsaWduLWl0ZW1zOmNlbnRlcjtnYXA6MTBweDsnOwogICAgICAgICAgICBkLmlubmVySFRNTCA9ICc8aSBjbGFzcz0iZmFzIGZhLWluZm8tY2lyY2xlIiBzdHlsZT0iY29sb3I6IzM0OThkYjtmb250LXNpemU6MS4xcmVtOyI+PC9pPiBOb20sIGZvbmN0aW9uLCBsb2dvIGV0IHNpZ25hdHVyZSBzb250IGRhbnMgbGUgbWVudSA8c3Ryb25nPlBhcmFtw6h0cmVzIOKamTwvc3Ryb25nPiBkZSBsYSBiYXJyZSBwcmluY2lwYWxlLic7CiAgICAgICAgICAgIGhlYWRlci5hZnRlcihkKTsKICAgICAgICB9CiAgICB9CiAgICBzZXRUaW1lb3V0KHBhdGNoVUksIDE1MCk7CiAgICBzZXRUaW1lb3V0KHBhdGNoVUksIDYwMCk7CgogICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCBmdW5jdGlvbihlKSB7CiAgICAgICAgaWYgKCFlLmRhdGEgfHwgZS5kYXRhLnR5cGUgIT09ICdwaWxvdGUtc2V0dGluZ3MnKSByZXR1cm47CiAgICAgICAgdmFyIHMgPSBlLmRhdGEuZGF0YTsKICAgICAgICB0cnkgewogICAgICAgICAgICBpZiAodHlwZW9mIEFwcFN0YXRlICE9PSAndW5kZWZpbmVkJykgewogICAgICAgICAgICAgICAgaWYgKHMubmFtZSkgeyBBcHBTdGF0ZS5jb25maWcubmFtZSA9IHMubmFtZTsgdmFyIGVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbmZpZ05hbWUnKTsgaWYoZWwpIGVsLnZhbHVlID0gcy5uYW1lOyB9CiAgICAgICAgICAgICAgICBpZiAocy5yb2xlKSB7IEFwcFN0YXRlLmNvbmZpZy5yb2xlID0gcy5yb2xlOyB2YXIgZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29uZmlnUm9sZScpOyBpZihlbCkgZWwudmFsdWUgPSBzLnJvbGU7IH0KICAgICAgICAgICAgICAgIGlmIChzLmxvZ29TcmMpIHsgQXBwU3RhdGUuY29uZmlnLmxvZ29TcmMgPSBzLmxvZ29TcmM7IHZhciBlbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb2dvUHJldmlldycpOyBpZihlbCl7ZWwuc3JjPXMubG9nb1NyYztlbC5zdHlsZS5kaXNwbGF5PSdibG9jayc7fSB9CiAgICAgICAgICAgICAgICBpZiAocy5zaWduU3JjKSB7IEFwcFN0YXRlLmNvbmZpZy5zaWduU3JjID0gcy5zaWduU3JjOyB2YXIgZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2lnblByZXZpZXcnKTsgaWYoZWwpe2VsLnNyYz1zLnNpZ25TcmM7ZWwuc3R5bGUuZGlzcGxheT0nYmxvY2snO30gfQogICAgICAgICAgICB9CiAgICAgICAgfSBjYXRjaChlcnIpIHt9CiAgICB9KTsKICAgIHdpbmRvdy5wYXJlbnQucG9zdE1lc3NhZ2UoeyB0eXBlOiAncGlsb3RlLW1vZHVsZS1yZWFkeScsIG1vZHVsZTogJ29yYWwnIH0sICcqJyk7Cn0pKCk7Cjwvc2NyaXB0PgoKCjxzY3JpcHQ+CmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBmdW5jdGlvbihlKSB7CiAgICBpZiAoIWUuY3RybEtleSB8fCBlLnNoaWZ0S2V5IHx8IGUuYWx0S2V5IHx8IGUubWV0YUtleSkgcmV0dXJuOwogICAgdmFyIGtleSA9IGUua2V5LnRvTG93ZXJDYXNlKCk7CiAgICBpZiAoWydwJywnZScsJ28nLCdhJywnZCddLmluZGV4T2Yoa2V5KSA+PSAwKSB7CiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgIHdpbmRvdy5wYXJlbnQucG9zdE1lc3NhZ2Uoe3R5cGU6J3BpbG90ZS1zaG9ydGN1dCcsIGtleTprZXl9LCAnKicpOwogICAgfQp9KTsKPC9zY3JpcHQ+CjwvYm9keT4KPC9odG1sPg==","aed":"PCFET0NUWVBFIGh0bWw+CjxodG1sIGxhbmc9ImZyIj4KPGhlYWQ+CiAgICA8bWV0YSBjaGFyc2V0PSJVVEYtOCI+CiAgICA8bWV0YSBuYW1lPSJ2aWV3cG9ydCIgY29udGVudD0id2lkdGg9ZGV2aWNlLXdpZHRoLCBpbml0aWFsLXNjYWxlPTEuMCI+CiAgICA8dGl0bGU+QUVEIFBJTE9URSBCeSBTeWx2w6hyZSBNaWNoZWxldDwvdGl0bGU+CiAgICA8c2NyaXB0IHNyYz0iaHR0cHM6Ly9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMveGxzeC8wLjE4LjUveGxzeC5mdWxsLm1pbi5qcyI+PC9zY3JpcHQ+CiAgICA8bGluayByZWw9InN0eWxlc2hlZXQiIGhyZWY9Imh0dHBzOi8vY2RuanMuY2xvdWRmbGFyZS5jb20vYWpheC9saWJzL2ZvbnQtYXdlc29tZS82LjAuMC9jc3MvYWxsLm1pbi5jc3MiPgogICAgCiAgICA8c3R5bGU+CiAgICAgICAgOnJvb3QgewogICAgICAgICAgICAtLXByaW1hcnk6ICMyYzNlNTA7CiAgICAgICAgICAgIC0tc2Vjb25kYXJ5OiAjMzQ5OGRiOwogICAgICAgICAgICAtLWFjY2VudDogI2U3NGMzYzsKICAgICAgICAgICAgLS1zdWNjZXNzOiAjMjdhZTYwOwogICAgICAgICAgICAtLWJnOiAjZjBmMmY1OwogICAgICAgICAgICAtLXRleHQ6ICMzMzM7CiAgICAgICAgfQoKICAgICAgICBib2R5IHsgZm9udC1mYW1pbHk6ICdBcHRvcycsICdDYWxpYnJpJywgJ1RyZWJ1Y2hldCBNUycsIEFyaWFsLCBzYW5zLXNlcmlmOyBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1iZyk7IGNvbG9yOiB2YXIoLS10ZXh0KTsgbWFyZ2luOiAwOyBwYWRkaW5nOiAwOyBkaXNwbGF5OiBmbGV4OyBmbGV4LWRpcmVjdGlvbjogY29sdW1uOyBoZWlnaHQ6IDEwMHZoOyB9CgogICAgICAgIC8qIC0tLSBOQVZJR0FUSU9OIC0tLSAqLwogICAgICAgIG5hdiB7CiAgICAgICAgICAgIGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCg5MGRlZywgIzFhMmEzYSwgIzJjM2U1MCk7CiAgICAgICAgICAgIGNvbG9yOiB3aGl0ZTsgcGFkZGluZzogMCAxNXB4OyBoZWlnaHQ6IDYwcHg7CiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7IGFsaWduLWl0ZW1zOiBjZW50ZXI7IGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjsKICAgICAgICAgICAgYm94LXNoYWRvdzogMCAycHggNXB4IHJnYmEoMCwwLDAsMC4yKTsgei1pbmRleDogMTAwOwogICAgICAgIH0KICAgICAgICAubmF2LWxlZnQgeyBkaXNwbGF5OiBmbGV4OyBhbGlnbi1pdGVtczogY2VudGVyOyBnYXA6IDE1cHg7IH0KICAgICAgICAubmF2LXRpdGxlIHsgZm9udC1zaXplOiAxLjFyZW07IGZvbnQtd2VpZ2h0OiBib2xkOyBsZXR0ZXItc3BhY2luZzogMC41cHg7IGRpc3BsYXk6IGZsZXg7IGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47IH0KICAgICAgICAubmF2LXN1YnRpdGxlIHsgZm9udC1zaXplOiAwLjdyZW07IGNvbG9yOiAjYmRjM2M3OyBmb250LXdlaWdodDogbm9ybWFsOyB9CiAgICAgICAgLm5hdi1hY3Rpb25zIHsgZGlzcGxheTogZmxleDsgZ2FwOiAxMHB4OyBtYXJnaW4tcmlnaHQ6IDIwcHg7IGJvcmRlci1yaWdodDogMXB4IHNvbGlkIHJnYmEoMjU1LDI1NSwyNTUsMC4yKTsgcGFkZGluZy1yaWdodDogMjBweDsgfQogICAgICAgIC5idG4tbmF2LWFjdGlvbiB7IGJhY2tncm91bmQ6IHJnYmEoMjU1LDI1NSwyNTUsMC4xKTsgYm9yZGVyOiAxcHggc29saWQgcmdiYSgyNTUsMjU1LDI1NSwwLjMpOyBjb2xvcjogd2hpdGU7IHBhZGRpbmc6IDVweCAxMHB4OyBib3JkZXItcmFkaXVzOiA0cHg7IGN1cnNvcjogcG9pbnRlcjsgZm9udC1zaXplOiAwLjhyZW07IHRyYW5zaXRpb246IDAuMnM7IH0KICAgICAgICAuYnRuLW5hdi1hY3Rpb246aG92ZXIgeyBiYWNrZ3JvdW5kOiB2YXIoLS1zZWNvbmRhcnkpOyBib3JkZXItY29sb3I6IHZhcigtLXNlY29uZGFyeSk7IH0KICAgICAgICAuYnRuLWRhbmdlci1uYXYgeyBiYWNrZ3JvdW5kOiByZ2JhKDIzMSwgNzYsIDYwLCAwLjIpOyBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1hY2NlbnQpOyBjb2xvcjogI2ZmY2NjYzsgfQogICAgICAgIC5idG4tZGFuZ2VyLW5hdjpob3ZlciB7IGJhY2tncm91bmQ6IHZhcigtLWFjY2VudCk7IGNvbG9yOiB3aGl0ZTsgfQoKICAgICAgICAubmF2LXRhYnMgeyBkaXNwbGF5OiBmbGV4OyBnYXA6IDVweDsgfQogICAgICAgIC50YWItYnRuIHsKICAgICAgICAgICAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7IGJvcmRlcjogbm9uZTsgY29sb3I6ICNiZGMzYzc7CiAgICAgICAgICAgIHBhZGRpbmc6IDAgMTVweDsgaGVpZ2h0OiA2MHB4OyBjdXJzb3I6IHBvaW50ZXI7IGZvbnQtd2VpZ2h0OiA2MDA7IGZvbnQtc2l6ZTogMC45NXJlbTsKICAgICAgICAgICAgdHJhbnNpdGlvbjogYWxsIDAuMnM7IGJvcmRlci1ib3R0b206IDRweCBzb2xpZCB0cmFuc3BhcmVudDsKICAgICAgICB9CiAgICAgICAgLnRhYi1idG4uYWN0aXZlIHsgY29sb3I6IHdoaXRlOyBib3JkZXItYm90dG9tLWNvbG9yOiB2YXIoLS1zZWNvbmRhcnkpOyBiYWNrZ3JvdW5kOiByZ2JhKDAsMCwwLDAuMSk7IH0KCiAgICAgICAgLyogLS0tIExBWU9VVCAtLS0gKi8KICAgICAgICBtYWluIHsgZmxleDogMTsgb3ZlcmZsb3c6IGhpZGRlbjsgcG9zaXRpb246IHJlbGF0aXZlOyB9CiAgICAgICAgLnZpZXctc2VjdGlvbiB7CiAgICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsgdG9wOiAwOyBsZWZ0OiAwOyByaWdodDogMDsgYm90dG9tOiAwOwogICAgICAgICAgICBwYWRkaW5nOiAyMHB4OyBvdmVyZmxvdy15OiBhdXRvOyBkaXNwbGF5OiBub25lOwogICAgICAgIH0KICAgICAgICAudmlldy1zZWN0aW9uLmFjdGl2ZSB7IGRpc3BsYXk6IGJsb2NrOyB9CgogICAgICAgIC8qIC0tLSBVSSBDT01QT05FTlRTIC0tLSAqLwogICAgICAgIC5jYXJkIHsgYmFja2dyb3VuZDogd2hpdGU7IHBhZGRpbmc6IDIwcHg7IGJvcmRlci1yYWRpdXM6IDhweDsgYm94LXNoYWRvdzogMCAycHggNXB4IHJnYmEoMCwwLDAsMC4wNSk7IG1hcmdpbi1ib3R0b206IDIwcHg7IH0KICAgICAgICBzZWxlY3QsIGlucHV0W3R5cGU9dGV4dF0sIGlucHV0W3R5cGU9bnVtYmVyXSwgaW5wdXRbdHlwZT10aW1lXSB7IHBhZGRpbmc6IDhweDsgYm9yZGVyOiAxcHggc29saWQgI2RkZDsgYm9yZGVyLXJhZGl1czogNHB4OyB9CiAgICAgICAgLmJ0biB7IGJvcmRlcjogbm9uZTsgcGFkZGluZzogOHB4IDE2cHg7IGJvcmRlci1yYWRpdXM6IDRweDsgY3Vyc29yOiBwb2ludGVyOyBmb250LXdlaWdodDogYm9sZDsgfQogICAgICAgIC5idG4tcHJpbWFyeSB7IGJhY2tncm91bmQ6IHZhcigtLXNlY29uZGFyeSk7IGNvbG9yOiB3aGl0ZTsgfQogICAgICAgIC5idG4tZGFuZ2VyIHsgYmFja2dyb3VuZDogdmFyKC0tYWNjZW50KTsgY29sb3I6IHdoaXRlOyB9CiAgICAgICAgCiAgICAgICAgLyogLS0tIE1FTlUgMSA6IERBU0hCT0FSRCAtLS0gKi8KICAgICAgICAuaW1wb3J0LWhlYWRlciB7IGJhY2tncm91bmQ6IHdoaXRlOyBwYWRkaW5nOiAyMHB4OyBib3JkZXItcmFkaXVzOiA4cHg7IG1hcmdpbi1ib3R0b206IDIwcHg7IGRpc3BsYXk6IGZsZXg7IGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjsgYWxpZ24taXRlbXM6IGNlbnRlcjsgYm94LXNoYWRvdzogMCAycHggNXB4IHJnYmEoMCwwLDAsMC4wNSk7IH0KICAgICAgICAuZGFzaGJvYXJkLWdyaWQgeyBkaXNwbGF5OiBncmlkOyBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IHJlcGVhdChhdXRvLWZpbGwsIG1pbm1heCgzNTBweCwgMWZyKSk7IGdhcDogMjBweDsgfQogICAgICAgIC5hZWQtc3VtbWFyeS1jYXJkIHsgYmFja2dyb3VuZDogd2hpdGU7IGJvcmRlci1yYWRpdXM6IDEwcHg7IG92ZXJmbG93OiBoaWRkZW47IGJveC1zaGFkb3c6IDAgM3B4IDZweCByZ2JhKDAsMCwwLDAuMSk7IGJvcmRlci10b3A6IDVweCBzb2xpZCB2YXIoLS1zZWNvbmRhcnkpOyBicmVhay1pbnNpZGU6IGF2b2lkOyB9CiAgICAgICAgLmNhcmQtaGVhZGVyIHsgcGFkZGluZzogMTVweDsgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICNlZWU7IGRpc3BsYXk6IGZsZXg7IGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjsgYWxpZ24taXRlbXM6IGNlbnRlcjsgYmFja2dyb3VuZDogI2Y5ZjlmOTsgfQogICAgICAgIC5jYXJkLWJvZHkgeyBwYWRkaW5nOiAxNXB4OyBmb250LXNpemU6IDAuOXJlbTsgfQogICAgICAgIC5zdGF0LXJvdyB7IGRpc3BsYXk6IGZsZXg7IGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjsgbWFyZ2luLWJvdHRvbTogOHB4OyBwYWRkaW5nLWJvdHRvbTogOHB4OyBib3JkZXItYm90dG9tOiAxcHggZGFzaGVkICNlZWU7IH0KICAgICAgICAuY29uc3RyYWludHMtYm94IHsgbWFyZ2luLXRvcDogMTBweDsgYmFja2dyb3VuZDogI2ZmZjVmNTsgY29sb3I6ICNjMDM5MmI7IHBhZGRpbmc6IDhweDsgYm9yZGVyLXJhZGl1czogNHB4OyBmb250LXNpemU6IDAuODVyZW07IH0KCiAgICAgICAgLyogQmFkZ2UgcG91ciBxdW90aXTDqSBub24tc3RhbmRhcmQgKi8KICAgICAgICAuYmFkZ2UtY3VzdG9tIHsgYmFja2dyb3VuZDogI2U3NGMzYyAhaW1wb3J0YW50OyB9CiAgICAgICAgLmJhZGdlLXN0YW5kYXJkIHsgYmFja2dyb3VuZDogdmFyKC0tc2Vjb25kYXJ5KTsgfQoKICAgICAgICAvKiAtLS0gTUVOVSAyIDogUExBTk5JTkcgLS0tICovCiAgICAgICAgLnBsYW5uZXItdG9vbGJhciB7CiAgICAgICAgICAgIGJhY2tncm91bmQ6IHdoaXRlOyBwYWRkaW5nOiAxMHB4IDE1cHg7IGJvcmRlci1yYWRpdXM6IDhweDsgbWFyZ2luLWJvdHRvbTogMTBweDsKICAgICAgICAgICAgZGlzcGxheTogZmxleDsganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOyBhbGlnbi1pdGVtczogY2VudGVyOyBnYXA6IDEwcHg7CiAgICAgICAgICAgIGJveC1zaGFkb3c6IDAgMXB4IDNweCByZ2JhKDAsMCwwLDAuMSk7IGZsZXgtd3JhcDogd3JhcDsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgLnBhbGV0dGUgeyBkaXNwbGF5OiBmbGV4OyBnYXA6IDhweDsgZmxleC13cmFwOiB3cmFwOyBhbGlnbi1pdGVtczogY2VudGVyOyB9CiAgICAgICAgLnBhbGV0dGUtYnRuIHsKICAgICAgICAgICAgcGFkZGluZzogOHB4IDEycHg7IGJvcmRlci1yYWRpdXM6IDRweDsgY3Vyc29yOiBwb2ludGVyOyBjb2xvcjogd2hpdGU7IGZvbnQtc2l6ZTogMC44NXJlbTsgZm9udC13ZWlnaHQ6IGJvbGQ7CiAgICAgICAgICAgIGJvcmRlcjogMnB4IHNvbGlkIHdoaXRlOyBib3gtc2hhZG93OiAwIDJweCA0cHggcmdiYSgwLDAsMCwwLjEpOyB0ZXh0LXNoYWRvdzogMCAxcHggMXB4IHJnYmEoMCwwLDAsMC4yKTsKICAgICAgICB9CiAgICAgICAgLnBhbGV0dGUtYnRuOmhvdmVyIHsgdHJhbnNmb3JtOiBzY2FsZSgxLjA1KTsgfQogICAgICAgIC5wYWxldHRlLWJ0bi5zZWxlY3RlZCB7IGJvcmRlci1jb2xvcjogIzMzMzsgdHJhbnNmb3JtOiBzY2FsZSgxLjEpOyBib3gtc2hhZG93OiAwIDRweCA4cHggcmdiYSgwLDAsMCwwLjIpOyB9CgogICAgICAgIC8qIENPVUxFVVJTICovCiAgICAgICAgLmJnLWdyaWxsZSB7IGJhY2tncm91bmQtY29sb3I6ICNmZjAwZmY7IH0gCiAgICAgICAgLmJnLWFkbWluIHsgYmFja2dyb3VuZC1jb2xvcjogIzAwYjg5NDsgfSAKICAgICAgICAuYmctZXR1ZGUgeyBiYWNrZ3JvdW5kLWNvbG9yOiAjOGU0NGFkOyB9IAogICAgICAgIC5iZy1zZWxmIHsgYmFja2dyb3VuZC1jb2xvcjogI2U2N2UyMjsgfSAKICAgICAgICAuYmctY291bG9pcnMgeyBiYWNrZ3JvdW5kLWNvbG9yOiAjZjFjNDBmOyBjb2xvcjogIzMzMzsgdGV4dC1zaGFkb3c6IG5vbmU7IH0KICAgICAgICAuYmctY291ciB7IGJhY2tncm91bmQtY29sb3I6ICNkNjMwMzE7IH0gCiAgICAgICAgLmJnLXN1aXZpIHsgYmFja2dyb3VuZC1jb2xvcjogIzI3YWU2MDsgfSAKICAgICAgICAuYmctZXJhc2VyIHsgYmFja2dyb3VuZC1jb2xvcjogI2RmZTZlOTsgY29sb3I6ICM2MzZlNzI7IHRleHQtc2hhZG93OiBub25lOyBib3JkZXI6IDFweCBzb2xpZCAjYjJiZWMzOyB9CgogICAgICAgIC8qIFNlcnZpY2VzIGR5bmFtaXF1ZXMgKi8KICAgICAgICAuYnRuLWFkZC1zZXJ2aWNlIHsgCiAgICAgICAgICAgIGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCgxMzVkZWcsICM2NjdlZWEgMCUsICM3NjRiYTIgMTAwJSk7IAogICAgICAgICAgICBib3JkZXI6IDJweCBkYXNoZWQgd2hpdGU7IAogICAgICAgICAgICBmb250LXNpemU6IDEuMnJlbTsgCiAgICAgICAgICAgIHBhZGRpbmc6IDhweCAxNHB4OwogICAgICAgIH0KICAgICAgICAuYnRuLWFkZC1zZXJ2aWNlOmhvdmVyIHsgdHJhbnNmb3JtOiBzY2FsZSgxLjEpOyB9CiAgICAgICAgCiAgICAgICAgLnNlcnZpY2UtZGVsZXRlIHsgCiAgICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsgdG9wOiAtNnB4OyByaWdodDogLTZweDsgCiAgICAgICAgICAgIGJhY2tncm91bmQ6ICNlNzRjM2M7IGNvbG9yOiB3aGl0ZTsgCiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDUwJTsgd2lkdGg6IDE2cHg7IGhlaWdodDogMTZweDsgCiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTBweDsgY3Vyc29yOiBwb2ludGVyOyAKICAgICAgICAgICAgZGlzcGxheTogbm9uZTsgYWxpZ24taXRlbXM6IGNlbnRlcjsganVzdGlmeS1jb250ZW50OiBjZW50ZXI7CiAgICAgICAgICAgIGJvcmRlcjogbm9uZTsgbGluZS1oZWlnaHQ6IDE7CiAgICAgICAgfQogICAgICAgIC5wYWxldHRlLWJ0bi13cmFwcGVyIHsgcG9zaXRpb246IHJlbGF0aXZlOyBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7IH0KICAgICAgICAucGFsZXR0ZS1idG4td3JhcHBlcjpob3ZlciAuc2VydmljZS1kZWxldGUgeyBkaXNwbGF5OiBmbGV4OyB9CiAgICAgICAgCiAgICAgICAgLyogTW9kYWwgcG91ciBham91dGVyIHVuIHNlcnZpY2UgZXQgY29uZmlnICovCiAgICAgICAgLm1vZGFsLW92ZXJsYXkgewogICAgICAgICAgICBwb3NpdGlvbjogZml4ZWQ7IHRvcDogMDsgbGVmdDogMDsgcmlnaHQ6IDA7IGJvdHRvbTogMDsKICAgICAgICAgICAgYmFja2dyb3VuZDogcmdiYSgwLDAsMCwwLjUpOyBkaXNwbGF5OiBub25lOyAKICAgICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjsganVzdGlmeS1jb250ZW50OiBjZW50ZXI7IHotaW5kZXg6IDEwMDA7CiAgICAgICAgfQogICAgICAgIC5tb2RhbC1vdmVybGF5LmFjdGl2ZSB7IGRpc3BsYXk6IGZsZXg7IH0KICAgICAgICAubW9kYWwtYm94IHsKICAgICAgICAgICAgYmFja2dyb3VuZDogd2hpdGU7IHBhZGRpbmc6IDI1cHg7IGJvcmRlci1yYWRpdXM6IDEycHg7CiAgICAgICAgICAgIGJveC1zaGFkb3c6IDAgMTBweCA0MHB4IHJnYmEoMCwwLDAsMC4zKTsgbWluLXdpZHRoOiAzNTBweDsKICAgICAgICAgICAgbWF4LXdpZHRoOiA1MDBweDsKICAgICAgICB9CiAgICAgICAgLm1vZGFsLWJveCBoMyB7IG1hcmdpbi10b3A6IDA7IGNvbG9yOiB2YXIoLS1wcmltYXJ5KTsgYm9yZGVyLWJvdHRvbTogMnB4IHNvbGlkIHZhcigtLXNlY29uZGFyeSk7IHBhZGRpbmctYm90dG9tOiAxMHB4OyB9CiAgICAgICAgLm1vZGFsLWJveCBsYWJlbCB7IGRpc3BsYXk6IGJsb2NrOyBtYXJnaW4tYm90dG9tOiA1cHg7IGZvbnQtd2VpZ2h0OiBib2xkOyBjb2xvcjogIzU1NTsgfQogICAgICAgIC5tb2RhbC1ib3ggaW5wdXRbdHlwZT0idGV4dCJdLCAubW9kYWwtYm94IGlucHV0W3R5cGU9Im51bWJlciJdIHsgd2lkdGg6IDEwMCU7IHBhZGRpbmc6IDEwcHg7IG1hcmdpbi1ib3R0b206IDE1cHg7IGJveC1zaXppbmc6IGJvcmRlci1ib3g7IH0KICAgICAgICAubW9kYWwtYm94IGlucHV0W3R5cGU9ImNvbG9yIl0geyB3aWR0aDogMTAwJTsgaGVpZ2h0OiA1MHB4OyBwYWRkaW5nOiAwOyBib3JkZXI6IG5vbmU7IGN1cnNvcjogcG9pbnRlcjsgbWFyZ2luLWJvdHRvbTogMTVweDsgfQogICAgICAgIC5tb2RhbC1hY3Rpb25zIHsgZGlzcGxheTogZmxleDsgZ2FwOiAxMHB4OyBqdXN0aWZ5LWNvbnRlbnQ6IGZsZXgtZW5kOyBtYXJnaW4tdG9wOiAyMHB4OyB9CiAgICAgICAgLm1vZGFsLWFjdGlvbnMgYnV0dG9uIHsgcGFkZGluZzogMTBweCAyMHB4OyBib3JkZXI6IG5vbmU7IGJvcmRlci1yYWRpdXM6IDZweDsgY3Vyc29yOiBwb2ludGVyOyBmb250LXdlaWdodDogYm9sZDsgfQogICAgICAgIC5idG4tY2FuY2VsIHsgYmFja2dyb3VuZDogI2JkYzNjNzsgY29sb3I6ICMyYzNlNTA7IH0KICAgICAgICAuYnRuLWNvbmZpcm0geyBiYWNrZ3JvdW5kOiB2YXIoLS1zZWNvbmRhcnkpOyBjb2xvcjogd2hpdGU7IH0KICAgICAgICAuY29sb3ItcHJlc2V0cyB7IGRpc3BsYXk6IGZsZXg7IGdhcDogOHB4OyBmbGV4LXdyYXA6IHdyYXA7IG1hcmdpbi1ib3R0b206IDE1cHg7IH0KICAgICAgICAuY29sb3ItcHJlc2V0IHsgCiAgICAgICAgICAgIHdpZHRoOiAzMHB4OyBoZWlnaHQ6IDMwcHg7IGJvcmRlci1yYWRpdXM6IDZweDsgY3Vyc29yOiBwb2ludGVyOyAKICAgICAgICAgICAgYm9yZGVyOiAycHggc29saWQgdHJhbnNwYXJlbnQ7IHRyYW5zaXRpb246IDAuMnM7CiAgICAgICAgfQogICAgICAgIC5jb2xvci1wcmVzZXQ6aG92ZXIgeyB0cmFuc2Zvcm06IHNjYWxlKDEuMSk7IGJvcmRlci1jb2xvcjogIzMzMzsgfQogICAgICAgIC5wcmV2aWV3LWJ0biB7IAogICAgICAgICAgICBwYWRkaW5nOiAxMHB4IDIwcHg7IGJvcmRlci1yYWRpdXM6IDZweDsgY29sb3I6IHdoaXRlOyBmb250LXdlaWdodDogYm9sZDsgCiAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjsgbWFyZ2luOiAxNXB4IDA7IHRleHQtdHJhbnNmb3JtOiB1cHBlcmNhc2U7CiAgICAgICAgfQoKICAgICAgICAvKiBMaXN0ZSBkZSBzbG90cyBwb3VyIGxhIGNvbmZpZyAqLwogICAgICAgIC5zbG90LWxpc3QgewogICAgICAgICAgICBtYXgtaGVpZ2h0OiAzMDBweDsgb3ZlcmZsb3cteTogYXV0bzsgYm9yZGVyOiAxcHggc29saWQgI2VlZTsgYm9yZGVyLXJhZGl1czogNHB4OyBwYWRkaW5nOiAxMHB4OyBtYXJnaW4tYm90dG9tOiAxNXB4OwogICAgICAgIH0KICAgICAgICAuc2xvdC1pdGVtIHsKICAgICAgICAgICAgZGlzcGxheTogZmxleDsganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOyBhbGlnbi1pdGVtczogY2VudGVyOyAKICAgICAgICAgICAgcGFkZGluZzogOHB4OyBiYWNrZ3JvdW5kOiAjZjlmOWY5OyBtYXJnaW4tYm90dG9tOiA1cHg7IGJvcmRlci1yYWRpdXM6IDRweDsgYm9yZGVyLWxlZnQ6IDNweCBzb2xpZCB2YXIoLS1zZWNvbmRhcnkpOwogICAgICAgIH0KICAgICAgICAuc2xvdC1pbnB1dHMgeyBkaXNwbGF5OiBmbGV4OyBnYXA6IDEwcHg7IG1hcmdpbi1ib3R0b206IDEwcHg7IGFsaWduLWl0ZW1zOiBmbGV4LWVuZDsgfQoKICAgICAgICAuZWR0LWNvbnRhaW5lciB7IGJhY2tncm91bmQ6IHdoaXRlOyBwYWRkaW5nOiAxNXB4OyBib3JkZXItcmFkaXVzOiA4cHg7IG92ZXJmbG93LXg6IGF1dG87IG1pbi1oZWlnaHQ6IDUwMHB4OyB9CiAgICAgICAgCiAgICAgICAgLyogVEFCTEVBVSBTVEFCSUxJU8OJICovCiAgICAgICAgLmVkdC10YWJsZSB7IHdpZHRoOiAxMDAlOyBib3JkZXItY29sbGFwc2U6IGNvbGxhcHNlOyB0YWJsZS1sYXlvdXQ6IGZpeGVkOyB9CiAgICAgICAgLmVkdC10YWJsZSB0aCB7IGJhY2tncm91bmQ6IHZhcigtLXByaW1hcnkpOyBjb2xvcjogd2hpdGU7IHBhZGRpbmc6IDEwcHg7IHRleHQtYWxpZ246IGNlbnRlcjsgYm9yZGVyOiAxcHggc29saWQgIzM0NDk1ZTsgfQogICAgICAgIC5lZHQtdGFibGUgdGQgeyAKICAgICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgI2NjYzsgaGVpZ2h0OiA0MHB4OyB3aWR0aDogMTglOyBwYWRkaW5nOiAwOyB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlOyBvdmVyZmxvdzogaGlkZGVuOwogICAgICAgIH0KICAgICAgICAuZWR0LXRhYmxlIHRkLnRpbWUtY29sIHsgCiAgICAgICAgICAgIGJhY2tncm91bmQ6ICNmMWYyZjY7IGNvbG9yOiAjMmMzZTUwOyBmb250LXdlaWdodDogYm9sZDsgd2lkdGg6IDkwcHggIWltcG9ydGFudDsgYm9yZGVyLXJpZ2h0OiAycHggc29saWQgI2JkYzNjNzsgCiAgICAgICAgICAgIGZvbnQtc2l6ZTogMC43NXJlbTsgdGV4dC1hbGlnbjogY2VudGVyOwogICAgICAgIH0KCiAgICAgICAgLmNlbGwtY29udGVudCB7CiAgICAgICAgICAgIHdpZHRoOiAxMDAlOyBoZWlnaHQ6IDEwMCU7IGRpc3BsYXk6IGZsZXg7IGFsaWduLWl0ZW1zOiBjZW50ZXI7IGp1c3RpZnktY29udGVudDogY2VudGVyOwogICAgICAgICAgICBmb250LXNpemU6IDAuNzVyZW07IGZvbnQtd2VpZ2h0OiA4MDA7IHRleHQtdHJhbnNmb3JtOiB1cHBlcmNhc2U7IAogICAgICAgICAgICB3aGl0ZS1zcGFjZTogbm93cmFwOyBvdmVyZmxvdzogaGlkZGVuOyB0ZXh0LW92ZXJmbG93OiBlbGxpcHNpczsgY29sb3I6IHdoaXRlOwogICAgICAgIH0KICAgICAgICAuY2VsbC1pbmFjdGl2ZSB7IGJhY2tncm91bmQ6ICNmOWY5Zjk7IGN1cnNvcjogbm90LWFsbG93ZWQ7IH0KICAgICAgICAuY2VsbC1ibG9ja2VkIHsgYmFja2dyb3VuZDogcmVwZWF0aW5nLWxpbmVhci1ncmFkaWVudCg0NWRlZywgI2UwZTBlMCwgI2UwZTBlMCAxMHB4LCAjZWNmMGYxIDEwcHgsICNlY2YwZjEgMjBweCk7IGhlaWdodDogMTAwJTsgfQoKICAgICAgICAvKiAtLS0gTUVOVSAzIDogR0VTVElPTiAtLS0gKi8KICAgICAgICAuZ2VzdGlvbi1ncmlkIHsgZGlzcGxheTogZ3JpZDsgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiAxZnIgMmZyOyBnYXA6IDIwcHg7IH0KICAgICAgICAuc3RhdHMtcm93IHsgZGlzcGxheTogZmxleDsgZ2FwOiAxNXB4OyBtYXJnaW4tYm90dG9tOiAyMHB4OyB9CiAgICAgICAgLmJhbGFuY2UtYm94IHsgCiAgICAgICAgICAgIGZsZXg6IDE7IHRleHQtYWxpZ246IGNlbnRlcjsgcGFkZGluZzogMjBweDsgYmFja2dyb3VuZDogdmFyKC0tcHJpbWFyeSk7IGNvbG9yOiB3aGl0ZTsgYm9yZGVyLXJhZGl1czogOHB4OyAKICAgICAgICAgICAgZGlzcGxheTogZmxleDsgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsganVzdGlmeS1jb250ZW50OiBjZW50ZXI7CiAgICAgICAgfQogICAgICAgIC5iYWxhbmNlLWJveC5zZWNvbmRhcnkgeyBiYWNrZ3JvdW5kOiAjOGU0NGFkOyB9CiAgICAgICAgLmJhbGFuY2UtYW1vdW50IHsgZm9udC1zaXplOiAycmVtOyBmb250LXdlaWdodDogYm9sZDsgbWFyZ2luOiAxMHB4IDA7IH0KICAgICAgICAuaGlzdG9yeS10YWJsZSB7IHdpZHRoOiAxMDAlOyBib3JkZXItY29sbGFwc2U6IGNvbGxhcHNlOyB9CiAgICAgICAgLmhpc3RvcnktdGFibGUgdGggeyB0ZXh0LWFsaWduOiBsZWZ0OyBwYWRkaW5nOiAxMHB4OyBib3JkZXItYm90dG9tOiAycHggc29saWQgI2VlZTsgYmFja2dyb3VuZDogI2Y5ZjlmOTsgfQogICAgICAgIC5oaXN0b3J5LXRhYmxlIHRkIHsgcGFkZGluZzogMTBweDsgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICNlZWU7IH0KCiAgICAgICAgLyogLS0tIE1FTlUgNCA6IFJFUEFSVElUSU9OIChRVUkgRkFJVCBRVU9JKSAtLS0gKi8KICAgICAgICAucmVwYXJ0aXRpb24tdG9vbGJhciB7CiAgICAgICAgICAgIGJhY2tncm91bmQ6IHdoaXRlOyBwYWRkaW5nOiAxNXB4OyBib3JkZXItcmFkaXVzOiA4cHg7IG1hcmdpbi1ib3R0b206IDE1cHg7CiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7IGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjsgYWxpZ24taXRlbXM6IGNlbnRlcjsgYm94LXNoYWRvdzogMCAxcHggM3B4IHJnYmEoMCwwLDAsMC4xKTsKICAgICAgICB9CiAgICAgICAgLnJlcGFydGl0aW9uLXRhYmxlIHsgd2lkdGg6IDEwMCU7IGJvcmRlci1jb2xsYXBzZTogY29sbGFwc2U7IHRhYmxlLWxheW91dDogYXV0bzsgfQogICAgICAgIC5yZXBhcnRpdGlvbi10YWJsZSB0aCB7IGJhY2tncm91bmQ6IHZhcigtLXByaW1hcnkpOyBjb2xvcjogd2hpdGU7IHBhZGRpbmc6IDEycHg7IGJvcmRlcjogMXB4IHNvbGlkICMzNDQ5NWU7IGZvbnQtc2l6ZTogMC45cmVtOyBwb3NpdGlvbjogc3RpY2t5OyB0b3A6IDA7IH0KICAgICAgICAucmVwYXJ0aXRpb24tdGFibGUgdGQgeyBib3JkZXI6IDFweCBzb2xpZCAjY2NjOyBwYWRkaW5nOiA4cHg7IHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7IGJhY2tncm91bmQ6IHdoaXRlOyBmb250LXNpemU6IDAuODVyZW07IGhlaWdodDogYXV0bzsgfQogICAgICAgIC5yZXBhcnRpdGlvbi10YWJsZSB0cjpudGgtY2hpbGQoZXZlbikgdGQgeyBiYWNrZ3JvdW5kLWNvbG9yOiAjZjhmOWZhOyB9CiAgICAgICAgLmFnZW50LXRhZyB7CiAgICAgICAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jazsgcGFkZGluZzogM3B4IDhweDsgbWFyZ2luOiAycHg7CiAgICAgICAgICAgIGJhY2tncm91bmQ6ICNlY2YwZjE7IGJvcmRlci1yYWRpdXM6IDEycHg7IGJvcmRlcjogMXB4IHNvbGlkICNiZGMzYzc7CiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiA2MDA7IGNvbG9yOiAjMmMzZTUwOyBmb250LXNpemU6IDAuOHJlbTsKICAgICAgICB9CgogICAgICAgIC8qIC0tLSBNRU5VIDUgOiBFTiBESVJFQ1QgKE5PVVZFQVUpIC0tLSAqLwogICAgICAgIC5saXZlLWhlYWRlciB7CiAgICAgICAgICAgIGJhY2tncm91bmQ6ICMyYzNlNTA7IGNvbG9yOiB3aGl0ZTsgcGFkZGluZzogMzBweDsgYm9yZGVyLXJhZGl1czogMTBweDsKICAgICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyOyBtYXJnaW4tYm90dG9tOiAzMHB4OyBib3gtc2hhZG93OiAwIDVweCAxNXB4IHJnYmEoMCwwLDAsMC4yKTsKICAgICAgICB9CiAgICAgICAgLmNsb2NrLXRpbWUgeyBmb250LXNpemU6IDNyZW07IGZvbnQtd2VpZ2h0OiA4MDA7IGZvbnQtZmFtaWx5OiAnU2Vnb2UgVUkgTW9ubycsIG1vbm9zcGFjZTsgfQogICAgICAgIC5jbG9jay1kYXkgeyBmb250LXNpemU6IDEuNXJlbTsgY29sb3I6ICMzNDk4ZGI7IG1hcmdpbi1ib3R0b206IDVweDsgdGV4dC10cmFuc2Zvcm06IHVwcGVyY2FzZTsgbGV0dGVyLXNwYWNpbmc6IDJweDsgfQogICAgICAgIAogICAgICAgIC5saXZlLWdyaWQgeyBkaXNwbGF5OiBncmlkOyBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IHJlcGVhdChhdXRvLWZpbGwsIG1pbm1heCgyODBweCwgMWZyKSk7IGdhcDogMjBweDsgfQogICAgICAgIC5saXZlLWNhcmQgewogICAgICAgICAgICBiYWNrZ3JvdW5kOiB3aGl0ZTsgYm9yZGVyLXJhZGl1czogMTBweDsgb3ZlcmZsb3c6IGhpZGRlbjsKICAgICAgICAgICAgYm94LXNoYWRvdzogMCAzcHggNnB4IHJnYmEoMCwwLDAsMC4xKTsKICAgICAgICAgICAgdHJhbnNpdGlvbjogdHJhbnNmb3JtIDAuMnM7CiAgICAgICAgICAgIGJvcmRlci1sZWZ0OiA1cHggc29saWQgI2NjYzsKICAgICAgICB9CiAgICAgICAgLmxpdmUtY2FyZC5hY3RpdmUgeyB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLTVweCk7IGJveC1zaGFkb3c6IDAgOHB4IDE1cHggcmdiYSgwLDAsMCwwLjE1KTsgYm9yZGVyLWxlZnQtY29sb3I6IHZhcigtLXN1Y2Nlc3MpOyB9CiAgICAgICAgLmxpdmUtY2FyZC1ib2R5IHsgcGFkZGluZzogMjBweDsgfQogICAgICAgIC5saXZlLWFnZW50LW5hbWUgeyBmb250LXNpemU6IDEuMnJlbTsgZm9udC13ZWlnaHQ6IGJvbGQ7IG1hcmdpbi1ib3R0b206IDEwcHg7IGNvbG9yOiB2YXIoLS1wcmltYXJ5KTsgfQogICAgICAgIC5saXZlLXN0YXR1cyB7IAogICAgICAgICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7IHBhZGRpbmc6IDVweCAxMHB4OyBib3JkZXItcmFkaXVzOiA0cHg7IAogICAgICAgICAgICBmb250LXNpemU6IDAuOXJlbTsgZm9udC13ZWlnaHQ6IGJvbGQ7IHRleHQtdHJhbnNmb3JtOiB1cHBlcmNhc2U7CiAgICAgICAgfQogICAgICAgIC5zZWN0aW9uLXRpdGxlIHsgbWFyZ2luOiAzMHB4IDAgMTVweCAwOyBjb2xvcjogIzdmOGM4ZDsgZm9udC1zaXplOiAxcmVtOyBib3JkZXItYm90dG9tOiAxcHggc29saWQgI2NjYzsgcGFkZGluZy1ib3R0b206IDVweDsgfQoKICAgICAgICAvKiBJTVBPUlQgSU5GTyAqLwogICAgICAgIC5pbXBvcnQtaW5mbyB7IAogICAgICAgICAgICBiYWNrZ3JvdW5kOiAjZThmNGZkOyBib3JkZXI6IDFweCBzb2xpZCAjMzQ5OGRiOyBib3JkZXItcmFkaXVzOiA4cHg7IAogICAgICAgICAgICBwYWRkaW5nOiAxNXB4OyBtYXJnaW4tYm90dG9tOiAyMHB4OyBmb250LXNpemU6IDAuOXJlbTsgCiAgICAgICAgfQogICAgICAgIC5pbXBvcnQtaW5mbyBzdHJvbmcgeyBjb2xvcjogdmFyKC0tcHJpbWFyeSk7IH0KICAgICAgICAucXVvdGl0ZS1saXN0IHsgZGlzcGxheTogZmxleDsgZ2FwOiAxNXB4OyBmbGV4LXdyYXA6IHdyYXA7IG1hcmdpbi10b3A6IDEwcHg7IH0KICAgICAgICAucXVvdGl0ZS1pdGVtIHsgYmFja2dyb3VuZDogd2hpdGU7IHBhZGRpbmc6IDVweCAxMHB4OyBib3JkZXItcmFkaXVzOiA0cHg7IGZvbnQtc2l6ZTogMC44NXJlbTsgfQoKICAgICAgICAvKiBaT05FUyBEJ0lNUFJFU1NJT04gKENhY2jDqWVzIHBhciBkw6lmYXV0KSAqLwogICAgICAgICNiYXRjaC1wcmludC1hcmVhLCAjZGFzaGJvYXJkLXByaW50LWFyZWEsICNnZXN0aW9uLXByaW50LWFyZWEsICNyZXBhcnRpdGlvbi1wcmludC1hcmVhIHsgZGlzcGxheTogbm9uZTsgfQoKICAgICAgICAvKiAtLS0gUFJJTlQgQ1NTIE9QVElNSVPDiSBQQVlTQUdFIChMQU5EU0NBUEUpIC0tLSAqLwogICAgICAgIEBtZWRpYSBwcmludCB7CiAgICAgICAgICAgIEBwYWdlIHsKICAgICAgICAgICAgICAgIHNpemU6IEE0IGxhbmRzY2FwZTsKICAgICAgICAgICAgICAgIG1hcmdpbjogNW1tOyAvKiBNYXJnZXMgcsOpZHVpdGVzIHBvdXIgbWF4aW1pc2VyIGwnZXNwYWNlICovCiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGJvZHkgeyAKICAgICAgICAgICAgICAgIC13ZWJraXQtcHJpbnQtY29sb3ItYWRqdXN0OiBleGFjdCAhaW1wb3J0YW50OyAKICAgICAgICAgICAgICAgIHByaW50LWNvbG9yLWFkanVzdDogZXhhY3QgIWltcG9ydGFudDsgCiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiB3aGl0ZTsgbWFyZ2luOiAwOyBwYWRkaW5nOiAwOyAKICAgICAgICAgICAgICAgIHdpZHRoOiAxMDAlOwogICAgICAgICAgICAgICAgZm9udC1mYW1pbHk6ICdBcHRvcycsICdDYWxpYnJpJywgJ1RyZWJ1Y2hldCBNUycsIEFyaWFsLCBzYW5zLXNlcmlmOwogICAgICAgICAgICB9CiAgICAgICAgICAgIAogICAgICAgICAgICBuYXYsIC5wbGFubmVyLXRvb2xiYXIsIC5pbXBvcnQtaGVhZGVyLCAubmF2LWFjdGlvbnMsIC50YWItYnRuLCAuaW1wb3J0LWluZm8sIC5yZXBhcnRpdGlvbi10b29sYmFyIHsgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50OyB9CiAgICAgICAgICAgIAogICAgICAgICAgICBib2R5Om5vdCgucHJpbnRpbmctbW9kZSkgLnZpZXctc2VjdGlvbiB7IGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDsgfQoKICAgICAgICAgICAgLyogSGVhZGVyIGQnaW1wcmVzc2lvbiBjb21tdW4gKi8KICAgICAgICAgICAgLnByaW50LWhlYWRlci1iYXRjaCB7IAogICAgICAgICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyOyAKICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMS4ycmVtOyAKICAgICAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiBib2xkOwogICAgICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogNXB4OyAKICAgICAgICAgICAgICAgIGJvcmRlci1ib3R0b206IDJweCBzb2xpZCAjMzMzOyAKICAgICAgICAgICAgICAgIHBhZGRpbmctYm90dG9tOiAycHg7IAogICAgICAgICAgICAgICAgdGV4dC10cmFuc2Zvcm06IHVwcGVyY2FzZTsKICAgICAgICAgICAgICAgIHBhZ2UtYnJlYWstYWZ0ZXI6IGF2b2lkOwogICAgICAgICAgICB9CiAgICAgICAgICAgIAogICAgICAgICAgICAucGFnZS1icmVhayB7IHBhZ2UtYnJlYWstYWZ0ZXI6IGFsd2F5czsgZGlzcGxheTogYmxvY2s7IGhlaWdodDogMXB4OyB9CgogICAgICAgICAgICAvKiBNT0RFOiBEYXNoYm9hcmQgKi8KICAgICAgICAgICAgYm9keS5wcmludGluZy1kYXNoYm9hcmQgbWFpbiB7IGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDsgfQogICAgICAgICAgICBib2R5LnByaW50aW5nLWRhc2hib2FyZCAjZGFzaGJvYXJkLXByaW50LWFyZWEgeyBkaXNwbGF5OiBibG9jayAhaW1wb3J0YW50OyB9CiAgICAgICAgICAgIGJvZHkucHJpbnRpbmctZGFzaGJvYXJkIC5kYXNoYm9hcmQtZ3JpZCB7IAogICAgICAgICAgICAgICAgZGlzcGxheTogZ3JpZDsgCiAgICAgICAgICAgICAgICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IDFmciAxZnIgMWZyOyAvKiAzIGNvbG9ubmVzIGVuIHBheXNhZ2UgKi8KICAgICAgICAgICAgICAgIGdhcDogMTBweDsgCiAgICAgICAgICAgICAgICBmb250LXNpemU6IDAuOHJlbTsKICAgICAgICAgICAgfQogICAgICAgICAgICBib2R5LnByaW50aW5nLWRhc2hib2FyZCAuYWVkLXN1bW1hcnktY2FyZCB7IGJveC1zaGFkb3c6IG5vbmU7IGJvcmRlcjogMXB4IHNvbGlkICNjY2M7IGJyZWFrLWluc2lkZTogYXZvaWQ7IH0KCiAgICAgICAgICAgIC8qIE1PREU6IEVEVCBCYXRjaCAoQWdlbnQgU2V1bCBvdSBUb3V0KSAtIE9QVElNSVPDiSBQQVlTQUdFICovCiAgICAgICAgICAgIGJvZHkucHJpbnRpbmctYmF0Y2ggbWFpbiB7IGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDsgfQogICAgICAgICAgICBib2R5LnByaW50aW5nLWJhdGNoICNiYXRjaC1wcmludC1hcmVhIHsgZGlzcGxheTogYmxvY2sgIWltcG9ydGFudDsgd2lkdGg6IDEwMCU7IH0KICAgICAgICAgICAgCiAgICAgICAgICAgIGJvZHkucHJpbnRpbmctYmF0Y2ggLmVkdC10YWJsZSB7IAogICAgICAgICAgICAgICAgd2lkdGg6IDEwMCU7IAogICAgICAgICAgICAgICAgZm9udC1zaXplOiAwLjdyZW07IAogICAgICAgICAgICAgICAgYm9yZGVyLWNvbGxhcHNlOiBjb2xsYXBzZTsKICAgICAgICAgICAgICAgIHRhYmxlLWxheW91dDogZml4ZWQ7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgYm9keS5wcmludGluZy1iYXRjaCAuZWR0LXRhYmxlIHRoIHsgCiAgICAgICAgICAgICAgICBwYWRkaW5nOiAycHg7IAogICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2NjYyAhaW1wb3J0YW50OyAKICAgICAgICAgICAgICAgIGNvbG9yOiBibGFjayAhaW1wb3J0YW50OyAKICAgICAgICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIGJsYWNrOwogICAgICAgICAgICAgICAgZm9udC1zaXplOiAwLjhyZW07CiAgICAgICAgICAgIH0KICAgICAgICAgICAgYm9keS5wcmludGluZy1iYXRjaCAuZWR0LXRhYmxlIHRkIHsgCiAgICAgICAgICAgICAgICBoZWlnaHQ6IDE4cHggIWltcG9ydGFudDsgLyogSGF1dGV1ciBmb3Jjw6llIHRyw6hzIHBldGl0ZSBwb3VyIHRlbmlyIHN1ciAyMWNtIGRlIGhhdXQgKi8KICAgICAgICAgICAgICAgIHBhZGRpbmc6IDA7IAogICAgICAgICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgYmxhY2s7IAogICAgICAgICAgICAgICAgdmVydGljYWwtYWxpZ246IG1pZGRsZTsKICAgICAgICAgICAgfQogICAgICAgICAgICBib2R5LnByaW50aW5nLWJhdGNoIC5jZWxsLWNvbnRlbnQgeyBmb250LXNpemU6IDAuNjVyZW07IGZvbnQtd2VpZ2h0OiBib2xkOyB9CiAgICAgICAgICAgIAogICAgICAgICAgICAvKiBNT0RFOiBHZXN0aW9uIEZpY2hlIC0gT1BUSU1JU8OJIFBBWVNBR0UgKi8KICAgICAgICAgICAgYm9keS5wcmludGluZy1nZXN0aW9uIG1haW4geyBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7IH0KICAgICAgICAgICAgYm9keS5wcmludGluZy1nZXN0aW9uICNnZXN0aW9uLXByaW50LWFyZWEgeyBkaXNwbGF5OiBibG9jayAhaW1wb3J0YW50OyBwYWRkaW5nOiAwOyB9CiAgICAgICAgICAgIAogICAgICAgICAgICAvKiBEaXNwb3NpdGlvbiBob3Jpem9udGFsZSBwb3VyIGxhIGdlc3Rpb24gKi8KICAgICAgICAgICAgYm9keS5wcmludGluZy1nZXN0aW9uIC5nZXN0aW9uLXN0YXRzLWNvbnRhaW5lciB7CiAgICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4OwogICAgICAgICAgICAgICAgd2lkdGg6IDEwMCU7CiAgICAgICAgICAgICAgICBnYXA6IDIwcHg7CiAgICAgICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAxMHB4OwogICAgICAgICAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgCiAgICAgICAgICAgIGJvZHkucHJpbnRpbmctZ2VzdGlvbiAuYmFsYW5jZS1ib3ggeyAKICAgICAgICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkICMzMzM7IAogICAgICAgICAgICAgICAgY29sb3I6IGJsYWNrICFpbXBvcnRhbnQ7IAogICAgICAgICAgICAgICAgYmFja2dyb3VuZDogd2hpdGUgIWltcG9ydGFudDsgCiAgICAgICAgICAgICAgICBwYWRkaW5nOiA1cHggMjBweDsgCiAgICAgICAgICAgICAgICBmbGV4OiAwIDAgMzAwcHg7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgYm9keS5wcmludGluZy1nZXN0aW9uIC5iYWxhbmNlLWFtb3VudCB7IGZvbnQtc2l6ZTogMS40cmVtOyBjb2xvcjogYmxhY2s7IG1hcmdpbjogNXB4IDA7IH0KICAgICAgICAgICAgCiAgICAgICAgICAgIGJvZHkucHJpbnRpbmctZ2VzdGlvbiAuaGlzdG9yeS10YWJsZSB7IGZvbnQtc2l6ZTogMC44cmVtOyB3aWR0aDogMTAwJTsgfQogICAgICAgICAgICBib2R5LnByaW50aW5nLWdlc3Rpb24gLmhpc3RvcnktdGFibGUgdGgsIGJvZHkucHJpbnRpbmctZ2VzdGlvbiAuaGlzdG9yeS10YWJsZSB0ZCB7IHBhZGRpbmc6IDRweDsgYm9yZGVyOiAxcHggc29saWQgI2NjYzsgfQoKICAgICAgICAgICAgLyogTU9ERTogUsOpcGFydGl0aW9uIC0gT1BUSU1JU8OJIFBBWVNBR0UgKi8KICAgICAgICAgICAgYm9keS5wcmludGluZy1yZXBhcnRpdGlvbiBtYWluIHsgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50OyB9CiAgICAgICAgICAgIGJvZHkucHJpbnRpbmctcmVwYXJ0aXRpb24gI3JlcGFydGl0aW9uLXByaW50LWFyZWEgeyBkaXNwbGF5OiBibG9jayAhaW1wb3J0YW50OyB3aWR0aDogMTAwJTsgcGFkZGluZzogMDsgfQogICAgICAgICAgICBib2R5LnByaW50aW5nLXJlcGFydGl0aW9uIC5yZXBhcnRpdGlvbi10YWJsZSB7IAogICAgICAgICAgICAgICAgd2lkdGg6IDEwMCU7IAogICAgICAgICAgICAgICAgZm9udC1zaXplOiAwLjY1cmVtOyAvKiBQZXRpdCBwb3VyIHRvdXQgZmFpcmUgdGVuaXIgKi8KICAgICAgICAgICAgICAgIGJvcmRlci1jb2xsYXBzZTogY29sbGFwc2U7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgYm9keS5wcmludGluZy1yZXBhcnRpdGlvbiAucmVwYXJ0aXRpb24tdGFibGUgdGgsIAogICAgICAgICAgICBib2R5LnByaW50aW5nLXJlcGFydGl0aW9uIC5yZXBhcnRpdGlvbi10YWJsZSB0ZCB7IAogICAgICAgICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgIzAwMDsgCiAgICAgICAgICAgICAgICBwYWRkaW5nOiAxcHggMnB4OyAKICAgICAgICAgICAgICAgIGhlaWdodDogMThweCAhaW1wb3J0YW50OyAvKiBIYXV0ZXVyIGNvbnRyYWludGUgKi8KICAgICAgICAgICAgICAgIG92ZXJmbG93OiBoaWRkZW47CiAgICAgICAgICAgIH0KICAgICAgICAgICAgYm9keS5wcmludGluZy1yZXBhcnRpdGlvbiAuYWdlbnQtdGFnIHsgCiAgICAgICAgICAgICAgICBib3JkZXI6IG5vbmU7IAogICAgICAgICAgICAgICAgcGFkZGluZzogMCAxcHg7IAogICAgICAgICAgICAgICAgbWFyZ2luOiAwIDFweDsgCiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDsgCiAgICAgICAgICAgICAgICBmb250LXNpemU6IDAuNnJlbTsgCiAgICAgICAgICAgICAgICBkaXNwbGF5OiBpbmxpbmU7CiAgICAgICAgICAgICAgICBsaW5lLWhlaWdodDogMTsKICAgICAgICAgICAgfQogICAgICAgICAgICAKICAgICAgICAgICAgLyogRm9yY2VyIGxlcyBjb3VsZXVycyBpbmxpbmUgw6AgcydpbXByaW1lciAqLwogICAgICAgICAgICAuY2VsbC1jb250ZW50IHsgCiAgICAgICAgICAgICAgICAtd2Via2l0LXByaW50LWNvbG9yLWFkanVzdDogZXhhY3QgIWltcG9ydGFudDsgCiAgICAgICAgICAgICAgICBwcmludC1jb2xvci1hZGp1c3Q6IGV4YWN0ICFpbXBvcnRhbnQ7IAogICAgICAgICAgICB9CiAgICAgICAgfQogICAgPC9zdHlsZT4KPC9oZWFkPgo8Ym9keT4KCjxuYXY+CiAgICA8ZGl2IGNsYXNzPSJuYXYtbGVmdCI+CiAgICAgICAgPGRpdiBjbGFzcz0ibmF2LXRpdGxlIj4KICAgICAgICAgICAgQUVEIFBJTE9URQogICAgICAgICAgICA8c3BhbiBjbGFzcz0ibmF2LXN1YnRpdGxlIj5CeSBTeWx2w6hyZSBNaWNoZWxldCAtIHYyLjkgKEFkYXB0w6llIENTVik8L3NwYW4+CiAgICAgICAgPC9kaXY+CiAgICAgICAgPGRpdiBjbGFzcz0ibmF2LWFjdGlvbnMiPgogICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJidG4tbmF2LWFjdGlvbiIgb25jbGljaz0iZG93bmxvYWRKU09OKCkiIHRpdGxlPSJTYXV2ZWdhcmRlciI+PGkgY2xhc3M9ImZhcyBmYS1kb3dubG9hZCI+PC9pPiBTYXV2ZWdhcmRlcjwvYnV0dG9uPgogICAgICAgICAgICA8bGFiZWwgY2xhc3M9ImJ0bi1uYXYtYWN0aW9uIiB0aXRsZT0iUmVzdGF1cmVyIj4KICAgICAgICAgICAgICAgIDxpIGNsYXNzPSJmYXMgZmEtdXBsb2FkIj48L2k+IFJlc3RhdXJlcgogICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9ImZpbGUiIGlkPSJqc29uSW5wdXQiIGFjY2VwdD0iLmpzb24iIHN0eWxlPSJkaXNwbGF5Om5vbmUiIG9uY2hhbmdlPSJpbXBvcnRKU09OKHRoaXMpIj4KICAgICAgICAgICAgPC9sYWJlbD4KICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYnRuLW5hdi1hY3Rpb24gYnRuLWRhbmdlci1uYXYiIG9uY2xpY2s9InJlc2V0QWxsRGF0YSgpIiB0aXRsZT0iRWZmYWNlciB0b3V0IGV0IHJlY29tbWVuY2VyIj4KICAgICAgICAgICAgICAgIDxpIGNsYXNzPSJmYXMgZmEtdHJhc2giPjwvaT4gVG91dCBFZmZhY2VyCiAgICAgICAgICAgIDwvYnV0dG9uPgogICAgICAgIDwvZGl2PgogICAgPC9kaXY+CiAgICA8ZGl2IGNsYXNzPSJuYXYtdGFicyI+CiAgICAgICAgPGJ1dHRvbiBjbGFzcz0idGFiLWJ0biBhY3RpdmUiIG9uY2xpY2s9InN3aXRjaFRhYignaW1wb3J0JykiPjEuIFZ1ZSBkJ2Vuc2VtYmxlPC9idXR0b24+CiAgICAgICAgPGJ1dHRvbiBjbGFzcz0idGFiLWJ0biIgb25jbGljaz0ic3dpdGNoVGFiKCdjb25jZXB0aW9uJykiPjIuIENvbmNlcHRpb24gRURUPC9idXR0b24+CiAgICAgICAgPGJ1dHRvbiBjbGFzcz0idGFiLWJ0biIgb25jbGljaz0ic3dpdGNoVGFiKCdnZXN0aW9uJykiPjMuIEdlc3Rpb24gUXVvdGlkaWVubmU8L2J1dHRvbj4KICAgICAgICA8YnV0dG9uIGNsYXNzPSJ0YWItYnRuIiBvbmNsaWNrPSJzd2l0Y2hUYWIoJ3JlcGFydGl0aW9uJykiPjQuIFF1aSBmYWl0IHF1b2kgPzwvYnV0dG9uPgogICAgICAgIDxidXR0b24gY2xhc3M9InRhYi1idG4iIG9uY2xpY2s9InN3aXRjaFRhYignbGl2ZScpIj41LiBFbiBEaXJlY3Q8L2J1dHRvbj4KICAgIDwvZGl2Pgo8L25hdj4KCjxtYWluPgogICAgPHNlY3Rpb24gaWQ9InZpZXctaW1wb3J0IiBjbGFzcz0idmlldy1zZWN0aW9uIGFjdGl2ZSI+CiAgICAgICAgPGRpdiBjbGFzcz0iaW1wb3J0LWhlYWRlciI+CiAgICAgICAgICAgIDxkaXY+CiAgICAgICAgICAgICAgICA8aDIgc3R5bGU9Im1hcmdpbjowOyBib3JkZXI6bm9uZTsgY29sb3I6dmFyKC0tcHJpbWFyeSkiPlRhYmxlYXUgZGUgQm9yZDwvaDI+CiAgICAgICAgICAgICAgICA8cCBzdHlsZT0ibWFyZ2luOjVweCAwIDAgMDsgY29sb3I6IzdmOGM4ZDsiPkfDqXJleiB2b3MgZWZmZWN0aWZzIEFFRCBzaW1wbGVtZW50LjwvcD4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDxkaXYgc3R5bGU9ImRpc3BsYXk6ZmxleDsgZ2FwOjEwcHg7Ij4KICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz0iYnRuIGJ0bi1wcmltYXJ5IiBzdHlsZT0iZGlzcGxheTppbmxpbmUtZmxleDsgYWxpZ24taXRlbXM6Y2VudGVyOyBnYXA6MTBweDsiPgogICAgICAgICAgICAgICAgICAgIDxpIGNsYXNzPSJmYXMgZmEtZmlsZS1leGNlbCI+PC9pPiBJbXBvcnRlciBFeGNlbAogICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJmaWxlIiBpZD0iZXhjZWxJbnB1dCIgYWNjZXB0PSIueGxzeCwgLnhscywgLmNzdiIgc3R5bGU9ImRpc3BsYXk6bm9uZSIgb25jaGFuZ2U9ImhhbmRsZUV4Y2VsKHRoaXMpIj4KICAgICAgICAgICAgICAgIDwvbGFiZWw+CiAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJidG4gYnRuLXByaW1hcnkiIG9uY2xpY2s9InByaW50RGFzaGJvYXJkKCkiIHN0eWxlPSJiYWNrZ3JvdW5kOiMzNDQ5NWU7Ij4KICAgICAgICAgICAgICAgICAgICA8aSBjbGFzcz0iZmFzIGZhLXByaW50Ij48L2k+IEltcHJpbWVyIFLDqWNhcAogICAgICAgICAgICAgICAgPC9idXR0b24+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgIDwvZGl2PgogICAgICAgIAogICAgICAgIDxkaXYgaWQ9ImltcG9ydC1pbmZvLWFyZWEiPjwvZGl2PgogICAgICAgIAogICAgICAgIDxkaXYgaWQ9ImRhc2hib2FyZC1hcmVhIiBjbGFzcz0iZGFzaGJvYXJkLWdyaWQiPgogICAgICAgICAgICA8ZGl2IHN0eWxlPSJncmlkLWNvbHVtbjogMS8tMTsgdGV4dC1hbGlnbjpjZW50ZXI7IHBhZGRpbmc6NTBweDsgY29sb3I6I2FhYTsiPgogICAgICAgICAgICAgICAgPGkgY2xhc3M9ImZhcyBmYS1mb2xkZXItb3BlbiIgc3R5bGU9ImZvbnQtc2l6ZTozcmVtOyBtYXJnaW4tYm90dG9tOjEwcHg7Ij48L2k+PGJyPgogICAgICAgICAgICAgICAgQXVjdW5lIGRvbm7DqWUuIFZldWlsbGV6IGltcG9ydGVyIHVuIGZpY2hpZXIgRXhjZWwgb3UgcmVzdGF1cmVyIHVuZSBzYXV2ZWdhcmRlLgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICA8L2Rpdj4KICAgIDwvc2VjdGlvbj4KCiAgICA8c2VjdGlvbiBpZD0idmlldy1jb25jZXB0aW9uIiBjbGFzcz0idmlldy1zZWN0aW9uIj4KICAgICAgICA8ZGl2IGNsYXNzPSJwbGFubmVyLXRvb2xiYXIiPgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJ0b29sLWdyb3VwIj4KICAgICAgICAgICAgICAgIDxsYWJlbD48c3Ryb25nPkFnZW50IDo8L3N0cm9uZz48L2xhYmVsPgogICAgICAgICAgICAgICAgPHNlbGVjdCBpZD0iYWVkLXNlbGVjdC1jb25jZXB0aW9uIiBvbmNoYW5nZT0iY2hhbmdlQUVEKCdjb25jZXB0aW9uJykiPgogICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IiI+LS0gU8OpbGVjdGlvbm5lciAtLTwvb3B0aW9uPgogICAgICAgICAgICAgICAgPC9zZWxlY3Q+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAKICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYnRuIGJ0bi1wcmltYXJ5IiBvbmNsaWNrPSJvcGVuR3JpZENvbmZpZygpIiBzdHlsZT0iYmFja2dyb3VuZDojMmMzZTUwOyBmb250LXNpemU6MC44cmVtOyI+CiAgICAgICAgICAgICAgICA8aSBjbGFzcz0iZmFzIGZhLWNvZyI+PC9pPiBDb25maWcgR3JpbGxlCiAgICAgICAgICAgIDwvYnV0dG9uPgoKICAgICAgICAgICAgPGRpdiBjbGFzcz0idG9vbC1ncm91cCIgc3R5bGU9ImJhY2tncm91bmQ6I2Y4ZjlmYTsgcGFkZGluZzo1cHg7IGJvcmRlci1yYWRpdXM6NHB4OyBib3JkZXI6MXB4IHNvbGlkICNlZWU7Ij4KICAgICAgICAgICAgICAgIDxsYWJlbCBzdHlsZT0iZm9udC1zaXplOjAuOHJlbTsgZm9udC13ZWlnaHQ6Ym9sZDsgY29sb3I6dmFyKC0tcHJpbWFyeSkiPvCfm4/vuI8gSW50ZXJuYXQgKEgpOjwvbGFiZWw+CiAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0ibnVtYmVyIiBpZD0iaW50ZXJuYXQtaG91cnMiIHN0eWxlPSJ3aWR0aDo1MHB4OyBwYWRkaW5nOjRweDsgdGV4dC1hbGlnbjpjZW50ZXIiIG1pbj0iMCIgc3RlcD0iMC41IiB2YWx1ZT0iMCIgb25jaGFuZ2U9InVwZGF0ZUludGVybmF0KCkiPgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgCiAgICAgICAgICAgIDxkaXYgY2xhc3M9InRvb2wtZ3JvdXAgcGFsZXR0ZSIgaWQ9InBhbGV0dGUtY29udGFpbmVyIj4KICAgICAgICAgICAgPC9kaXY+CgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJ0b29sLWdyb3VwIj4KICAgICAgICAgICAgICAgIDxzcGFuIGlkPSJoZWFkZXItc3RhdHMiIHN0eWxlPSJmb250LXNpemU6MC45cmVtOyBmb250LXdlaWdodDpib2xkOyBjb2xvcjp2YXIoLS1wcmltYXJ5KTsgYmFja2dyb3VuZDojZWVlOyBwYWRkaW5nOjVweCAxMHB4OyBib3JkZXItcmFkaXVzOjRweDsiPjBoIC8gMGg8L3NwYW4+CiAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJidG4gYnRuLXByaW1hcnkiIG9uY2xpY2s9InByaW50U2luZ2xlKCkiIHN0eWxlPSJmb250LXNpemU6IDAuOHJlbTsiPjxpIGNsYXNzPSJmYXMgZmEtcHJpbnQiPjwvaT4gQWdlbnQ8L2J1dHRvbj4KICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImJ0biBidG4tcHJpbWFyeSIgb25jbGljaz0icHJpbnRBbGwoKSIgc3R5bGU9ImZvbnQtc2l6ZTogMC44cmVtOyBiYWNrZ3JvdW5kLWNvbG9yOiMyYzNlNTA7Ij48aSBjbGFzcz0iZmFzIGZhLWxheWVyLWdyb3VwIj48L2k+IFRvdXQ8L2J1dHRvbj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgPC9kaXY+CgogICAgICAgIDxkaXYgY2xhc3M9ImVkdC1jb250YWluZXIiPgogICAgICAgICAgICA8dGFibGUgY2xhc3M9ImVkdC10YWJsZSIgaWQ9InRpbWV0YWJsZSI+PC90YWJsZT4KICAgICAgICA8L2Rpdj4KICAgIDwvc2VjdGlvbj4KCiAgICA8ZGl2IGNsYXNzPSJtb2RhbC1vdmVybGF5IiBpZD0ibW9kYWwtc2VydmljZSI+CiAgICAgICAgPGRpdiBjbGFzcz0ibW9kYWwtYm94Ij4KICAgICAgICAgICAgPGgzPjxpIGNsYXNzPSJmYXMgZmEtcGx1cy1jaXJjbGUiPjwvaT4gQWpvdXRlciB1biBTZXJ2aWNlPC9oMz4KICAgICAgICAgICAgCiAgICAgICAgICAgIDxsYWJlbCBmb3I9InNlcnZpY2UtbmFtZSI+Tm9tIGR1IHNlcnZpY2UgOjwvbGFiZWw+CiAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiBpZD0ic2VydmljZS1uYW1lIiBwbGFjZWhvbGRlcj0iRXg6IENESSwgSW5maXJtZXJpZSwgQWNjdWVpbC4uLiIgbWF4bGVuZ3RoPSIxNSI+CiAgICAgICAgICAgIAogICAgICAgICAgICA8bGFiZWw+Q291bGV1ciAocHLDqXNldHMpIDo8L2xhYmVsPgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJjb2xvci1wcmVzZXRzIj4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImNvbG9yLXByZXNldCIgc3R5bGU9ImJhY2tncm91bmQ6I2U3NGMzYyIgb25jbGljaz0ic2V0UHJlc2V0Q29sb3IoJyNlNzRjM2MnKSI+PC9kaXY+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJjb2xvci1wcmVzZXQiIHN0eWxlPSJiYWNrZ3JvdW5kOiNlOTFlNjMiIG9uY2xpY2s9InNldFByZXNldENvbG9yKCcjZTkxZTYzJykiPjwvZGl2PgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iY29sb3ItcHJlc2V0IiBzdHlsZT0iYmFja2dyb3VuZDojOWMyN2IwIiBvbmNsaWNrPSJzZXRQcmVzZXRDb2xvcignIzljMjdiMCcpIj48L2Rpdj4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImNvbG9yLXByZXNldCIgc3R5bGU9ImJhY2tncm91bmQ6IzY3M2FiNyIgb25jbGljaz0ic2V0UHJlc2V0Q29sb3IoJyM2NzNhYjcnKSI+PC9kaXY+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJjb2xvci1wcmVzZXQiIHN0eWxlPSJiYWNrZ3JvdW5kOiMzZjUxYjUiIG9uY2xpY2s9InNldFByZXNldENvbG9yKCcjM2Y1MWI1JykiPjwvZGl2PgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iY29sb3ItcHJlc2V0IiBzdHlsZT0iYmFja2dyb3VuZDojMjE5NmYzIiBvbmNsaWNrPSJzZXRQcmVzZXRDb2xvcignIzIxOTZmMycpIj48L2Rpdj4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImNvbG9yLXByZXNldCIgc3R5bGU9ImJhY2tncm91bmQ6IzAwYmNkNCIgb25jbGljaz0ic2V0UHJlc2V0Q29sb3IoJyMwMGJjZDQnKSI+PC9kaXY+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJjb2xvci1wcmVzZXQiIHN0eWxlPSJiYWNrZ3JvdW5kOiMwMDk2ODgiIG9uY2xpY2s9InNldFByZXNldENvbG9yKCcjMDA5Njg4JykiPjwvZGl2PgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iY29sb3ItcHJlc2V0IiBzdHlsZT0iYmFja2dyb3VuZDojNGNhZjUwIiBvbmNsaWNrPSJzZXRQcmVzZXRDb2xvcignIzRjYWY1MCcpIj48L2Rpdj4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImNvbG9yLXByZXNldCIgc3R5bGU9ImJhY2tncm91bmQ6IzhiYzM0YSIgb25jbGljaz0ic2V0UHJlc2V0Q29sb3IoJyM4YmMzNGEnKSI+PC9kaXY+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJjb2xvci1wcmVzZXQiIHN0eWxlPSJiYWNrZ3JvdW5kOiNmZjk4MDAiIG9uY2xpY2s9InNldFByZXNldENvbG9yKCcjZmY5ODAwJykiPjwvZGl2PgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iY29sb3ItcHJlc2V0IiBzdHlsZT0iYmFja2dyb3VuZDojZmY1NzIyIiBvbmNsaWNrPSJzZXRQcmVzZXRDb2xvcignI2ZmNTcyMicpIj48L2Rpdj4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImNvbG9yLXByZXNldCIgc3R5bGU9ImJhY2tncm91bmQ6Izc5NTU0OCIgb25jbGljaz0ic2V0UHJlc2V0Q29sb3IoJyM3OTU1NDgnKSI+PC9kaXY+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJjb2xvci1wcmVzZXQiIHN0eWxlPSJiYWNrZ3JvdW5kOiM2MDdkOGIiIG9uY2xpY2s9InNldFByZXNldENvbG9yKCcjNjA3ZDhiJykiPjwvZGl2PgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iY29sb3ItcHJlc2V0IiBzdHlsZT0iYmFja2dyb3VuZDojMDAwMDAwIiBvbmNsaWNrPSJzZXRQcmVzZXRDb2xvcignIzAwMDAwMCcpIj48L2Rpdj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIAogICAgICAgICAgICA8bGFiZWwgZm9yPSJzZXJ2aWNlLWNvbG9yIj5PdSBjb3VsZXVyIHBlcnNvbm5hbGlzw6llIDo8L2xhYmVsPgogICAgICAgICAgICA8aW5wdXQgdHlwZT0iY29sb3IiIGlkPSJzZXJ2aWNlLWNvbG9yIiB2YWx1ZT0iIzM0OThkYiIgb25jaGFuZ2U9InVwZGF0ZVByZXZpZXcoKSI+CiAgICAgICAgICAgIAogICAgICAgICAgICA8bGFiZWw+QXBlcsOndSA6PC9sYWJlbD4KICAgICAgICAgICAgPGRpdiBjbGFzcz0icHJldmlldy1idG4iIGlkPSJzZXJ2aWNlLXByZXZpZXciPk5PVVZFQVUgU0VSVklDRTwvZGl2PgogICAgICAgICAgICAKICAgICAgICAgICAgPGRpdiBjbGFzcz0ibW9kYWwtYWN0aW9ucyI+CiAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJidG4tY2FuY2VsIiBvbmNsaWNrPSJjbG9zZVNlcnZpY2VNb2RhbCgpIj5Bbm51bGVyPC9idXR0b24+CiAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJidG4tY29uZmlybSIgb25jbGljaz0iY29uZmlybUFkZFNlcnZpY2UoKSI+PGkgY2xhc3M9ImZhcyBmYS1jaGVjayI+PC9pPiBBam91dGVyPC9idXR0b24+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgIDwvZGl2PgogICAgPC9kaXY+CgogICAgPGRpdiBjbGFzcz0ibW9kYWwtb3ZlcmxheSIgaWQ9Im1vZGFsLWdyaWQtY29uZmlnIj4KICAgICAgICA8ZGl2IGNsYXNzPSJtb2RhbC1ib3giPgogICAgICAgICAgICA8aDM+PGkgY2xhc3M9ImZhcyBmYS1jb2ciPjwvaT4gQ29uZmlndXJhdGlvbiBHcmlsbGUgSG9yYWlyZTwvaDM+CiAgICAgICAgICAgIDxwIHN0eWxlPSJmb250LXNpemU6MC45cmVtOyBjb2xvcjojNjY2OyI+QWpvdXRleiwgc3VwcHJpbWV6IGV0IGTDqWZpbmlzc2V6IHZvcyBjcsOpbmVhdXggcHLDqWNpcyAoZXg6IDhoMjUtOWgyMCkuPC9wPgogICAgICAgICAgICAKICAgICAgICAgICAgPGRpdiBjbGFzcz0ic2xvdC1pbnB1dHMiPgogICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iZmxleDoxIj4KICAgICAgICAgICAgICAgICAgICA8bGFiZWwgc3R5bGU9ImZvbnQtc2l6ZTowLjhyZW0iPkTDqWJ1dDwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9InRpbWUiIGlkPSJuZXctc2xvdC1zdGFydCIgc3R5bGU9IndpZHRoOjEwMCUiPgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJmbGV4OjEiPgogICAgICAgICAgICAgICAgICAgIDxsYWJlbCBzdHlsZT0iZm9udC1zaXplOjAuOHJlbSI+RmluPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0idGltZSIgaWQ9Im5ldy1zbG90LWVuZCIgc3R5bGU9IndpZHRoOjEwMCUiPgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJidG4gYnRuLXByaW1hcnkiIG9uY2xpY2s9ImFkZFNsb3QoKSI+PGkgY2xhc3M9ImZhcyBmYS1wbHVzIj48L2k+PC9idXR0b24+CiAgICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgICAgPGRpdiBjbGFzcz0ic2xvdC1saXN0IiBpZD0ic2xvdC1jb25maWctbGlzdCI+CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgCiAgICAgICAgICAgIDxkaXYgY2xhc3M9Im1vZGFsLWFjdGlvbnMiPgogICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYnRuLWNhbmNlbCIgb25jbGljaz0iZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21vZGFsLWdyaWQtY29uZmlnJykuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJykiPkZlcm1lcjwvYnV0dG9uPgogICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYnRuLWNvbmZpcm0iIG9uY2xpY2s9InNhdmVHcmlkQ29uZmlnKCkiPjxpIGNsYXNzPSJmYXMgZmEtY2hlY2siPjwvaT4gRW5yZWdpc3RyZXIgJiBBcHBsaXF1ZXI8L2J1dHRvbj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgPC9kaXY+CiAgICA8L2Rpdj4KCiAgICA8c2VjdGlvbiBpZD0idmlldy1nZXN0aW9uIiBjbGFzcz0idmlldy1zZWN0aW9uIj4KICAgICAgICA8ZGl2IHN0eWxlPSJtYXJnaW4tYm90dG9tOiAyMHB4OyBkaXNwbGF5OmZsZXg7IGp1c3RpZnktY29udGVudDpzcGFjZS1iZXR3ZWVuOyBhbGlnbi1pdGVtczpjZW50ZXI7Ij4KICAgICAgICAgICAgPGRpdj4KICAgICAgICAgICAgICAgIDxsYWJlbD48c3Ryb25nPkFnZW50IDo8L3N0cm9uZz48L2xhYmVsPgogICAgICAgICAgICAgICAgPHNlbGVjdCBpZD0iYWVkLXNlbGVjdC1nZXN0aW9uIiBvbmNoYW5nZT0iY2hhbmdlQUVEKCdnZXN0aW9uJykiPjwvc2VsZWN0PgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYnRuIGJ0bi1wcmltYXJ5IiBvbmNsaWNrPSJwcmludEdlc3Rpb24oKSI+PGkgY2xhc3M9ImZhcyBmYS1wcmludCI+PC9pPiBJbXByaW1lciBGaWNoZTwvYnV0dG9uPgogICAgICAgIDwvZGl2PgogICAgICAgIDxkaXYgY2xhc3M9Imdlc3Rpb24tZ3JpZCI+CiAgICAgICAgICAgIDxkaXY+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJzdGF0cy1yb3ciPgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImJhbGFuY2UtYm94Ij4KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj5Ub3RhbCBBbm51ZWwgKE5ldCk8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iYmFsYW5jZS1hbW91bnQiIGlkPSJhbm51YWwtdGFyZ2V0LWRpc3BsYXkiPjBoPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9ImZvbnQtc2l6ZTowLjhyZW07IG9wYWNpdHk6MC44OyI+T2JqZWN0aWY8L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJiYWxhbmNlLWJveCBzZWNvbmRhcnkiPgogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PlNvbGRlIEFqdXN0ZW1lbnRzPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImJhbGFuY2UtYW1vdW50IiBpZD0iYmFsYW5jZS1kaXNwbGF5Ij4waDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJmb250LXNpemU6MC44cmVtOyBvcGFjaXR5OjAuODsiPkN1bXVsIChBYnMvU3VwKTwvZGl2PgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgPC9kaXY+CgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iY2FyZCI+CiAgICAgICAgICAgICAgICAgICAgPGgzIHN0eWxlPSJtYXJnaW4tdG9wOjAiPlNhaXNpZSBRdW90aWRpZW5uZTwvaDM+CiAgICAgICAgICAgICAgICAgICAgPHNlbGVjdCBpZD0iYWRqLXR5cGUiIHN0eWxlPSJ3aWR0aDoxMDAlOyBtYXJnaW4tYm90dG9tOjEwcHgiPjxvcHRpb24gdmFsdWU9InBsdXMiPkhldXJlcyBlbiBQTFVTICgrKTwvb3B0aW9uPjxvcHRpb24gdmFsdWU9Im1pbnVzIj5IZXVyZXMgZW4gTU9JTlMgKC0pPC9vcHRpb24+PC9zZWxlY3Q+CiAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9Im51bWJlciIgaWQ9ImFkai1hbW91bnQiIHBsYWNlaG9sZGVyPSJEdXLDqWUiIHN0ZXA9IjAuNSIgc3R5bGU9IndpZHRoOjEwMCU7IG1hcmdpbi1ib3R0b206MTBweDsiPgogICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiBpZD0iYWRqLXJlYXNvbiIgcGxhY2Vob2xkZXI9Ik1vdGlmLi4uIiBzdHlsZT0id2lkdGg6MTAwJTsgbWFyZ2luLWJvdHRvbToxMHB4OyI+CiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYnRuIGJ0bi1wcmltYXJ5IiBzdHlsZT0id2lkdGg6MTAwJSIgb25jbGljaz0iYWRkQWRqdXN0bWVudCgpIj5FbnJlZ2lzdHJlcjwvYnV0dG9uPgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJjYXJkIj4KICAgICAgICAgICAgICAgIDxoMyBzdHlsZT0ibWFyZ2luLXRvcDowIj5IaXN0b3JpcXVlPC9oMz4KICAgICAgICAgICAgICAgIDx0YWJsZSBjbGFzcz0iaGlzdG9yeS10YWJsZSI+CiAgICAgICAgICAgICAgICAgICAgPHRoZWFkPjx0cj48dGg+RGF0ZTwvdGg+PHRoPlR5cGU8L3RoPjx0aD5Nb3RpZjwvdGg+PHRoPkg8L3RoPjx0aD48L3RoPjwvdHI+PC90aGVhZD4KICAgICAgICAgICAgICAgICAgICA8dGJvZHkgaWQ9Imhpc3RvcnktYm9keSI+PC90Ym9keT4KICAgICAgICAgICAgICAgIDwvdGFibGU+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgIDwvZGl2PgogICAgPC9zZWN0aW9uPgoKICAgIDxzZWN0aW9uIGlkPSJ2aWV3LXJlcGFydGl0aW9uIiBjbGFzcz0idmlldy1zZWN0aW9uIj4KICAgICAgICA8ZGl2IGNsYXNzPSJyZXBhcnRpdGlvbi10b29sYmFyIj4KICAgICAgICAgICAgPGRpdiBzdHlsZT0iZGlzcGxheTpmbGV4OyBhbGlnbi1pdGVtczpjZW50ZXI7IGdhcDoxNXB4OyI+CiAgICAgICAgICAgICAgICA8aDIgc3R5bGU9Im1hcmdpbjowOyBjb2xvcjp2YXIoLS1wcmltYXJ5KTsgZm9udC1zaXplOjEuMnJlbTsiPlF1aSBmYWl0IHF1b2kgPzwvaDI+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJ0b29sLWdyb3VwIj4KICAgICAgICAgICAgICAgICAgICA8bGFiZWw+PHN0cm9uZz5Kb3VyIDo8L3N0cm9uZz48L2xhYmVsPgogICAgICAgICAgICAgICAgICAgIDxzZWxlY3QgaWQ9InJlcGFydGl0aW9uLWRheS1zZWxlY3QiIG9uY2hhbmdlPSJyZW5kZXJSZXBhcnRpdGlvbigpIj4KICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iTHVuZGkiPkx1bmRpPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9Ik1hcmRpIj5NYXJkaTwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJNZXJjcmVkaSI+TWVyY3JlZGk8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iSmV1ZGkiPkpldWRpPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IlZlbmRyZWRpIj5WZW5kcmVkaTwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgIDwvc2VsZWN0PgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJidG4gYnRuLXByaW1hcnkiIG9uY2xpY2s9InByaW50UmVwYXJ0aXRpb24oKSI+PGkgY2xhc3M9ImZhcyBmYS1wcmludCI+PC9pPiBJbXByaW1lciBsYSBqb3VybsOpZTwvYnV0dG9uPgogICAgICAgIDwvZGl2PgogICAgICAgIAogICAgICAgIDxkaXYgY2xhc3M9ImVkdC1jb250YWluZXIiPgogICAgICAgICAgICA8ZGl2IGlkPSJyZXBhcnRpdGlvbi1jb250ZW50Ij48L2Rpdj4KICAgICAgICA8L2Rpdj4KICAgIDwvc2VjdGlvbj4KCiAgICA8c2VjdGlvbiBpZD0idmlldy1saXZlIiBjbGFzcz0idmlldy1zZWN0aW9uIj4KICAgICAgICA8ZGl2IGNsYXNzPSJsaXZlLWhlYWRlciI+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImNsb2NrLWRheSIgaWQ9ImxpdmUtZGF5Ij5DSEFSR0VNRU5ULi4uPC9kaXY+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImNsb2NrLXRpbWUiIGlkPSJsaXZlLWNsb2NrIj4tLTotLTotLTwvZGl2PgogICAgICAgIDwvZGl2PgogICAgICAgIAogICAgICAgIDxkaXYgY2xhc3M9InNlY3Rpb24tdGl0bGUiPjxpIGNsYXNzPSJmYXMgZmEtdXNlci1jbG9jayI+PC9pPiBBRUQgRU4gUE9TVEUgQUNUVUVMTEVNRU5UPC9kaXY+CiAgICAgICAgPGRpdiBjbGFzcz0ibGl2ZS1ncmlkIiBpZD0ibGl2ZS1hY3RpdmUtY29udGFpbmVyIj4KICAgICAgICAgICAgPC9kaXY+CgogICAgICAgIDxkaXYgY2xhc3M9InNlY3Rpb24tdGl0bGUiPjxpIGNsYXNzPSJmYXMgZmEtdXNlci1zbGFzaCI+PC9pPiBBQlNFTlRTIC8gTk9OIFBMQU5JRknDiVM8L2Rpdj4KICAgICAgICA8ZGl2IGNsYXNzPSJsaXZlLWdyaWQiIGlkPSJsaXZlLWluYWN0aXZlLWNvbnRhaW5lciIgc3R5bGU9Im9wYWNpdHk6IDAuNjsiPgogICAgICAgICAgICA8L2Rpdj4KICAgIDwvc2VjdGlvbj4KCjwvbWFpbj4KCjxkaXYgaWQ9ImJhdGNoLXByaW50LWFyZWEiPjwvZGl2Pgo8ZGl2IGlkPSJkYXNoYm9hcmQtcHJpbnQtYXJlYSI+PC9kaXY+CjxkaXYgaWQ9Imdlc3Rpb24tcHJpbnQtYXJlYSI+PC9kaXY+CjxkaXYgaWQ9InJlcGFydGl0aW9uLXByaW50LWFyZWEiPjwvZGl2PgoKPHNjcmlwdD4KICAgIC8vIC0tLSBJTklUSUFMSVNBVElPTiBET05Ow4lFUyBWSURFIC0tLQogICAgLy8gQWpvdXQgZGUgInNsb3RzIiBkYW5zIERBVEEuY29uZmlnIHBvdXIgc3RvY2tlciBsZXMgY3LDqW5lYXV4IHBlcnNvbm5hbGlzw6lzCiAgICBsZXQgREFUQSA9IHsgYWdlbnRzOiBbXSwgc2NoZWR1bGVzOiB7fSwgYWRqdXN0bWVudHM6IHt9LCBxdW90aXRlczogW10sIHNlcnZpY2VzOiBbXSwgY29uZmlnOiB7IHNsb3RzOiBbXSB9IH07CiAgICBjb25zdCBEQVlTID0gWydMdW5kaScsICdNYXJkaScsICdNZXJjcmVkaScsICdKZXVkaScsICdWZW5kcmVkaSddOwogICAgCiAgICAvLyBDcsOpbmVhdXggcGFyIGTDqWZhdXQgc2kgYXVjdW5lIGNvbmZpZyAocG91ciDDqXZpdGVyIGxlIHZpZGUgYXUgcHJlbWllciBsYW5jZW1lbnQpCiAgICBjb25zdCBERUZBVUxUX1NMT1RTID0gWwogICAgICAgIHsgc3RhcnQ6ICcwODowMCcsIGVuZDogJzA4OjU1JyB9LAogICAgICAgIHsgc3RhcnQ6ICcwODo1NScsIGVuZDogJzA5OjUwJyB9LAogICAgICAgIHsgc3RhcnQ6ICcwOTo1MCcsIGVuZDogJzEwOjA1JyB9LAogICAgICAgIHsgc3RhcnQ6ICcxMDowNScsIGVuZDogJzExOjAwJyB9LAogICAgICAgIHsgc3RhcnQ6ICcxMTowMCcsIGVuZDogJzExOjU1JyB9LAogICAgICAgIHsgc3RhcnQ6ICcxMjowMCcsIGVuZDogJzEzOjAwJyB9LAogICAgICAgIHsgc3RhcnQ6ICcxMzowMCcsIGVuZDogJzEzOjU1JyB9LAogICAgICAgIHsgc3RhcnQ6ICcxMzo1NScsIGVuZDogJzE0OjUwJyB9LAogICAgICAgIHsgc3RhcnQ6ICcxNDo1MCcsIGVuZDogJzE1OjA1JyB9LAogICAgICAgIHsgc3RhcnQ6ICcxNTowNScsIGVuZDogJzE2OjAwJyB9LAogICAgICAgIHsgc3RhcnQ6ICcxNjowMCcsIGVuZDogJzE2OjU1JyB9LAogICAgICAgIHsgc3RhcnQ6ICcxNjo1NScsIGVuZDogJzE3OjUwJyB9CiAgICBdOwoKICAgIGxldCBDVVJSRU5UX1RPT0wgPSB7IG5hbWU6ICdHcmlsbGUnLCBjb2xvcjogJyNmZjAwZmYnLCBpc0VyYXNlcjogZmFsc2UgfTsKICAgIAogICAgLy8gU2VydmljZXMgcGFyIGTDqWZhdXQKICAgIGNvbnN0IERFRkFVTFRfU0VSVklDRVMgPSBbCiAgICAgICAgeyBpZDogJ2dyaWxsZScsIG5hbWU6ICdHcmlsbGUnLCBjb2xvcjogJyNmZjAwZmYnLCBpc0RlZmF1bHQ6IHRydWUgfSwKICAgICAgICB7IGlkOiAnYWRtaW4nLCBuYW1lOiAnQWRtaW4nLCBjb2xvcjogJyMwMGI4OTQnLCBpc0RlZmF1bHQ6IHRydWUgfSwKICAgICAgICB7IGlkOiAnZXR1ZGUnLCBuYW1lOiAnRXR1ZGUnLCBjb2xvcjogJyM4ZTQ0YWQnLCBpc0RlZmF1bHQ6IHRydWUgfSwKICAgICAgICB7IGlkOiAnc2VsZicsIG5hbWU6ICdTZWxmJywgY29sb3I6ICcjZTY3ZTIyJywgaXNEZWZhdWx0OiB0cnVlIH0sCiAgICAgICAgeyBpZDogJ2NvdWxvaXJzJywgbmFtZTogJ0NvdWxvaXJzJywgY29sb3I6ICcjZjFjNDBmJywgaXNEZWZhdWx0OiB0cnVlIH0sCiAgICAgICAgeyBpZDogJ2NvdXInLCBuYW1lOiAnQ291cicsIGNvbG9yOiAnI2Q2MzAzMScsIGlzRGVmYXVsdDogdHJ1ZSB9LAogICAgICAgIHsgaWQ6ICdzdWl2aScsIG5hbWU6ICdTdWl2aScsIGNvbG9yOiAnIzI3YWU2MCcsIGlzRGVmYXVsdDogdHJ1ZSB9CiAgICBdOwogICAgCiAgICBjb25zdCBTVE9SQUdFX0tFWSA9ICdBRURfUElMT1RFX1YyOF9TTE9UUyc7CgogICAgd2luZG93Lm9ubG9hZCA9IGZ1bmN0aW9uKCkgeyAKICAgICAgICBsb2FkTG9jYWxTdG9yYWdlKCk7IAogICAgICAgIHJlbmRlclBhbGV0dGUoKTsgCiAgICAgICAgLy8gTGFuY2VyIGwnaG9ybG9nZSBwb3VyIGxlIG1lbnUgNQogICAgICAgIHNldEludGVydmFsKHVwZGF0ZUxpdmVWaWV3LCAxMDAwKTsKICAgICAgICB1cGRhdGVMaXZlVmlldygpOwogICAgfTsKCiAgICBmdW5jdGlvbiBzd2l0Y2hUYWIodGFiSWQpIHsKICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcudmlldy1zZWN0aW9uJykuZm9yRWFjaChlbCA9PiBlbC5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKSk7CiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnRhYi1idG4nKS5mb3JFYWNoKGVsID0+IGVsLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpKTsKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndmlldy0nICsgdGFiSWQpLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpOwogICAgICAgIAogICAgICAgIGNvbnN0IHRhYnMgPSBbJ2ltcG9ydCcsICdjb25jZXB0aW9uJywgJ2dlc3Rpb24nLCAncmVwYXJ0aXRpb24nLCAnbGl2ZSddOwogICAgICAgIGNvbnN0IGJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy50YWItYnRuJylbdGFicy5pbmRleE9mKHRhYklkKV07CiAgICAgICAgaWYoYnRuKSBidG4uY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7CiAgICAgICAgCiAgICAgICAgaWYodGFiSWQgPT09ICdjb25jZXB0aW9uJykgdXBkYXRlU3RhdHNIZWFkZXIoKTsKICAgICAgICBpZih0YWJJZCA9PT0gJ2dlc3Rpb24nKSB1cGRhdGVHZXN0aW9uVUkoKTsKICAgICAgICBpZih0YWJJZCA9PT0gJ3JlcGFydGl0aW9uJykgcmVuZGVyUmVwYXJ0aXRpb24oKTsKICAgICAgICBpZih0YWJJZCA9PT0gJ2xpdmUnKSB1cGRhdGVMaXZlVmlldygpOwogICAgfQogICAgCiAgICAvLyAtLS0gR0VTVElPTiBERSBMQSBDT05GSUdVUkFUSU9OIEhPUkFJUkUgQVZBTkNFRSAoTWVudSAyKSAtLS0KICAgIC8vIFZhcmlhYmxlIHRlbXBvcmFpcmUgcG91ciBsJ8OpZGl0aW9uIGRhbnMgbGUgbW9kYWwKICAgIGxldCB0ZW1wU2xvdHMgPSBbXTsKCiAgICBmdW5jdGlvbiBvcGVuR3JpZENvbmZpZygpIHsKICAgICAgICAvLyBDaGFyZ2VyIGxlcyBzbG90cyBhY3R1ZWxzIG91IGxlcyBkw6lmYXV0cwogICAgICAgIHRlbXBTbG90cyA9IChEQVRBLmNvbmZpZyAmJiBEQVRBLmNvbmZpZy5zbG90cyAmJiBEQVRBLmNvbmZpZy5zbG90cy5sZW5ndGggPiAwKSAKICAgICAgICAgICAgICAgICAgICA/IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoREFUQS5jb25maWcuc2xvdHMpKSAKICAgICAgICAgICAgICAgICAgICA6IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoREVGQVVMVF9TTE9UUykpOwogICAgICAgIAogICAgICAgIHJlbmRlclNsb3RDb25maWdMaXN0KCk7CiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21vZGFsLWdyaWQtY29uZmlnJykuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7CiAgICB9CgogICAgZnVuY3Rpb24gcmVuZGVyU2xvdENvbmZpZ0xpc3QoKSB7CiAgICAgICAgY29uc3QgbGlzdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzbG90LWNvbmZpZy1saXN0Jyk7CiAgICAgICAgbGlzdC5pbm5lckhUTUwgPSAnJzsKICAgICAgICAKICAgICAgICAvLyBUcmllciBwYXIgaGV1cmUgZGUgZMOpYnV0CiAgICAgICAgdGVtcFNsb3RzLnNvcnQoKGEsIGIpID0+IGEuc3RhcnQubG9jYWxlQ29tcGFyZShiLnN0YXJ0KSk7CgogICAgICAgIHRlbXBTbG90cy5mb3JFYWNoKChzbG90LCBpbmRleCkgPT4gewogICAgICAgICAgICBjb25zdCBpdGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgICAgICAgIGl0ZW0uY2xhc3NOYW1lID0gJ3Nsb3QtaXRlbSc7CiAgICAgICAgICAgIGl0ZW0uaW5uZXJIVE1MID0gYAogICAgICAgICAgICAgICAgPHNwYW4+PHN0cm9uZz4ke3Nsb3Quc3RhcnR9PC9zdHJvbmc+IMOgIDxzdHJvbmc+JHtzbG90LmVuZH08L3N0cm9uZz48L3NwYW4+CiAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJidG4gYnRuLWRhbmdlciIgc3R5bGU9InBhZGRpbmc6NHB4IDhweDsgZm9udC1zaXplOjAuN3JlbTsiIG9uY2xpY2s9InJlbW92ZVNsb3QoJHtpbmRleH0pIj48aSBjbGFzcz0iZmFzIGZhLXRyYXNoIj48L2k+PC9idXR0b24+CiAgICAgICAgICAgIGA7CiAgICAgICAgICAgIGxpc3QuYXBwZW5kQ2hpbGQoaXRlbSk7CiAgICAgICAgfSk7CiAgICB9CgogICAgZnVuY3Rpb24gYWRkU2xvdCgpIHsKICAgICAgICBjb25zdCBzdGFydCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCduZXctc2xvdC1zdGFydCcpLnZhbHVlOwogICAgICAgIGNvbnN0IGVuZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCduZXctc2xvdC1lbmQnKS52YWx1ZTsKCiAgICAgICAgaWYgKCFzdGFydCB8fCAhZW5kKSB7CiAgICAgICAgICAgIGFsZXJ0KCJWZXVpbGxleiByZW1wbGlyIGwnaGV1cmUgZGUgZMOpYnV0IGV0IGRlIGZpbi4iKTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICBpZiAoc3RhcnQgPj0gZW5kKSB7CiAgICAgICAgICAgIGFsZXJ0KCJMJ2hldXJlIGRlIGTDqWJ1dCBkb2l0IMOqdHJlIGF2YW50IGwnaGV1cmUgZGUgZmluLiIpOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICB0ZW1wU2xvdHMucHVzaCh7IHN0YXJ0OiBzdGFydCwgZW5kOiBlbmQgfSk7CiAgICAgICAgcmVuZGVyU2xvdENvbmZpZ0xpc3QoKTsKICAgICAgICAKICAgICAgICAvLyBSZXNldCBpbnB1dHMKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbmV3LXNsb3Qtc3RhcnQnKS52YWx1ZSA9ICcnOwogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCduZXctc2xvdC1lbmQnKS52YWx1ZSA9ICcnOwogICAgfQoKICAgIGZ1bmN0aW9uIHJlbW92ZVNsb3QoaW5kZXgpIHsKICAgICAgICB0ZW1wU2xvdHMuc3BsaWNlKGluZGV4LCAxKTsKICAgICAgICByZW5kZXJTbG90Q29uZmlnTGlzdCgpOwogICAgfQoKICAgIGZ1bmN0aW9uIHNhdmVHcmlkQ29uZmlnKCkgewogICAgICAgIGlmICh0ZW1wU2xvdHMubGVuZ3RoID09PSAwKSB7CiAgICAgICAgICAgIGlmKCFjb25maXJtKCJMYSBncmlsbGUgZXN0IHZpZGUuIFZvdWxlei12b3VzIHZyYWltZW50IGNvbnRpbnVlciA/IikpIHJldHVybjsKICAgICAgICB9CgogICAgICAgIGlmKCFEQVRBLmNvbmZpZykgREFUQS5jb25maWcgPSB7fTsKICAgICAgICAKICAgICAgICAvLyBPbiB0cmllIHVuZSBkZXJuacOocmUgZm9pcyBwb3VyIMOqdHJlIHPDu3IKICAgICAgICB0ZW1wU2xvdHMuc29ydCgoYSwgYikgPT4gYS5zdGFydC5sb2NhbGVDb21wYXJlKGIuc3RhcnQpKTsKICAgICAgICBEQVRBLmNvbmZpZy5zbG90cyA9IHRlbXBTbG90czsKICAgICAgICAKICAgICAgICBzYXZlTG9jYWxTdG9yYWdlKCk7CiAgICAgICAgCiAgICAgICAgLy8gUmFmcmHDrmNoaXIgbGVzIHZ1ZXMKICAgICAgICByZW5kZXJUaW1ldGFibGUoKTsKICAgICAgICByZW5kZXJSZXBhcnRpdGlvbigpOwogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtb2RhbC1ncmlkLWNvbmZpZycpLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpOwogICAgfQoKICAgIC8vIC0tLSBMT0dJUVVFIE1FTlUgNSA6IEVOIERJUkVDVCAoQWRhcHTDqSBhdXggY3LDqW5lYXV4IGxpYnJlcykgLS0tCiAgICBmdW5jdGlvbiB1cGRhdGVMaXZlVmlldygpIHsKICAgICAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpOwogICAgICAgIGNvbnN0IGRheU5hbWVzID0gWydEaW1hbmNoZScsICdMdW5kaScsICdNYXJkaScsICdNZXJjcmVkaScsICdKZXVkaScsICdWZW5kcmVkaScsICdTYW1lZGknXTsKICAgICAgICBjb25zdCBjdXJyZW50RGF5SW5kZXggPSBub3cuZ2V0RGF5KCk7CiAgICAgICAgY29uc3QgY3VycmVudERheU5hbWUgPSBkYXlOYW1lc1tjdXJyZW50RGF5SW5kZXhdOwogICAgICAgIAogICAgICAgIC8vIEZvcm1hdGFnZSAiSEg6TU0iIHBvdXIgY29tcGFyYWlzb24KICAgICAgICBjb25zdCBob3VycyA9IFN0cmluZyhub3cuZ2V0SG91cnMoKSkucGFkU3RhcnQoMiwgJzAnKTsKICAgICAgICBjb25zdCBtaW51dGVzID0gU3RyaW5nKG5vdy5nZXRNaW51dGVzKCkpLnBhZFN0YXJ0KDIsICcwJyk7CiAgICAgICAgY29uc3QgY3VycmVudFRpbWVTdHIgPSBgJHtob3Vyc306JHttaW51dGVzfWA7CgogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsaXZlLWRheScpLnRleHRDb250ZW50ID0gY3VycmVudERheU5hbWUgKyAiICIgKyBub3cudG9Mb2NhbGVEYXRlU3RyaW5nKCk7CiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xpdmUtY2xvY2snKS50ZXh0Q29udGVudCA9IG5vdy50b0xvY2FsZVRpbWVTdHJpbmcoKTsKCiAgICAgICAgY29uc3QgY29udGFpbmVyQWN0aXZlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xpdmUtYWN0aXZlLWNvbnRhaW5lcicpOwogICAgICAgIGNvbnN0IGNvbnRhaW5lckluYWN0aXZlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xpdmUtaW5hY3RpdmUtY29udGFpbmVyJyk7CiAgICAgICAgCiAgICAgICAgaWYoIWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd2aWV3LWxpdmUnKS5jbGFzc0xpc3QuY29udGFpbnMoJ2FjdGl2ZScpKSByZXR1cm47CgogICAgICAgIGNvbnRhaW5lckFjdGl2ZS5pbm5lckhUTUwgPSAnJzsKICAgICAgICBjb250YWluZXJJbmFjdGl2ZS5pbm5lckhUTUwgPSAnJzsKCiAgICAgICAgLy8gVHJvdXZlciBsJ2luZGV4IGR1IHNsb3QgYWN0aWYKICAgICAgICBjb25zdCBhY3RpdmVTbG90SW5kZXggPSAoREFUQS5jb25maWcuc2xvdHMgfHwgREVGQVVMVF9TTE9UUykuZmluZEluZGV4KHNsb3QgPT4gewogICAgICAgICAgICByZXR1cm4gY3VycmVudFRpbWVTdHIgPj0gc2xvdC5zdGFydCAmJiBjdXJyZW50VGltZVN0ciA8IHNsb3QuZW5kOwogICAgICAgIH0pOwogICAgICAgIAogICAgICAgIGxldCBhY3RpdmVTbG90TGFiZWwgPSAiSE9SUyBDUsOJTkVBVSI7CiAgICAgICAgbGV0IGFjdGl2ZVNsb3RFbmQgPSAiIjsKCiAgICAgICAgaWYoYWN0aXZlU2xvdEluZGV4ICE9PSAtMSkgewogICAgICAgICAgICBjb25zdCBzbG90ID0gKERBVEEuY29uZmlnLnNsb3RzIHx8IERFRkFVTFRfU0xPVFMpW2FjdGl2ZVNsb3RJbmRleF07CiAgICAgICAgICAgIGFjdGl2ZVNsb3RMYWJlbCA9IGAke3Nsb3Quc3RhcnR9IC0gJHtzbG90LmVuZH1gOwogICAgICAgICAgICBhY3RpdmVTbG90RW5kID0gc2xvdC5lbmQ7CiAgICAgICAgfQoKICAgICAgICBsZXQgaGFzQWN0aXZlID0gZmFsc2U7CgogICAgICAgIERBVEEuYWdlbnRzLmZvckVhY2goYWdlbnQgPT4gewogICAgICAgICAgICAvLyBMYSBjbMOpIGVzdCBiYXPDqWUgc3VyIGwnaW5kZXggZHUgc2xvdCA6ICJMdW5kaS0wIiwgIkx1bmRpLTEiLCBldGMuCiAgICAgICAgICAgIGNvbnN0IGtleSA9IGAke2N1cnJlbnREYXlOYW1lfS0ke2FjdGl2ZVNsb3RJbmRleH1gOwogICAgICAgICAgICBjb25zdCBzY2hlZHVsZSA9IERBVEEuc2NoZWR1bGVzW2FnZW50Lm5hbWVdOwogICAgICAgICAgICAKICAgICAgICAgICAgbGV0IGlzQWN0aXZlID0gZmFsc2U7CiAgICAgICAgICAgIGxldCBzZXJ2aWNlSW5mbyA9IG51bGw7CgogICAgICAgICAgICBpZiAoYWN0aXZlU2xvdEluZGV4ICE9PSAtMSAmJiBzY2hlZHVsZSAmJiBzY2hlZHVsZVtrZXldKSB7CiAgICAgICAgICAgICAgICBpc0FjdGl2ZSA9IHRydWU7CiAgICAgICAgICAgICAgICBzZXJ2aWNlSW5mbyA9IHNjaGVkdWxlW2tleV07CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC8vIENyw6lhdGlvbiBkZSBsYSBjYXJ0ZQogICAgICAgICAgICBjb25zdCBjYXJkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgICAgICAgIGNhcmQuY2xhc3NOYW1lID0gYGxpdmUtY2FyZCAke2lzQWN0aXZlID8gJ2FjdGl2ZScgOiAnJ31gOwogICAgICAgICAgICAKICAgICAgICAgICAgaWYoaXNBY3RpdmUgJiYgc2VydmljZUluZm8uY29sb3IpIHsKICAgICAgICAgICAgICAgIGNhcmQuc3R5bGUuYm9yZGVyTGVmdENvbG9yID0gc2VydmljZUluZm8uY29sb3I7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGNvbnN0IGlzTGlnaHQgPSBpc0FjdGl2ZSA/IGlzTGlnaHRDb2xvcihzZXJ2aWNlSW5mby5jb2xvcikgOiB0cnVlOwogICAgICAgICAgICBjb25zdCB0ZXh0Q29sb3IgPSBpc0xpZ2h0ID8gJyMzMzMnIDogJ3doaXRlJzsKCiAgICAgICAgICAgIGNhcmQuaW5uZXJIVE1MID0gYAogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ibGl2ZS1jYXJkLWJvZHkiPgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImxpdmUtYWdlbnQtbmFtZSI+JHthZ2VudC5uYW1lfTwvZGl2PgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImxpdmUtc3RhdHVzIiBzdHlsZT0iYmFja2dyb3VuZC1jb2xvcjogJHtpc0FjdGl2ZSA/IHNlcnZpY2VJbmZvLmNvbG9yIDogJyNlZWUnfTsgY29sb3I6ICR7dGV4dENvbG9yfSI+CiAgICAgICAgICAgICAgICAgICAgICAgICR7aXNBY3RpdmUgPyBzZXJ2aWNlSW5mby50b29sIDogKGFjdGl2ZVNsb3RJbmRleCAhPT0gLTEgPyAnTElCUkUgLyBOT04gUExBTklGScOJJyA6ICdIT1JTIEhPUkFJUkUnKX0KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAke2lzQWN0aXZlID8gYDxkaXYgc3R5bGU9Im1hcmdpbi10b3A6NXB4OyBmb250LXNpemU6MC44cmVtOyBjb2xvcjojNzc3OyI+QWN0dWVsbGVtZW50IDogJHthY3RpdmVTbG90TGFiZWx9PC9kaXY+YCA6ICcnfQogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIGA7CgogICAgICAgICAgICBpZihpc0FjdGl2ZSkgewogICAgICAgICAgICAgICAgY29udGFpbmVyQWN0aXZlLmFwcGVuZENoaWxkKGNhcmQpOwogICAgICAgICAgICAgICAgaGFzQWN0aXZlID0gdHJ1ZTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGNvbnRhaW5lckluYWN0aXZlLmFwcGVuZENoaWxkKGNhcmQpOwogICAgICAgICAgICB9CiAgICAgICAgfSk7CgogICAgICAgIGlmKCFoYXNBY3RpdmUpIHsKICAgICAgICAgICAgY29udGFpbmVyQWN0aXZlLmlubmVySFRNTCA9IGA8ZGl2IHN0eWxlPSJncmlkLWNvbHVtbjoxLy0xOyB0ZXh0LWFsaWduOmNlbnRlcjsgcGFkZGluZzoyMHB4OyBjb2xvcjojYWFhOyI+QXVjdW4gQUVEIGVuIHBvc3RlIHN1ciBsZSBjcsOpbmVhdSBhY3R1ZWwgKCR7YWN0aXZlU2xvdExhYmVsfSkuPC9kaXY+YDsKICAgICAgICB9CiAgICB9CgoKICAgIC8vIC0tLSBMT0dJUVVFIElOVEVSTkFUIC0tLQogICAgZnVuY3Rpb24gdXBkYXRlSW50ZXJuYXQoKSB7CiAgICAgICAgY29uc3QgbmFtZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhZWQtc2VsZWN0LWNvbmNlcHRpb24nKS52YWx1ZTsKICAgICAgICBpZighbmFtZSkgcmV0dXJuOwogICAgICAgIGNvbnN0IHZhbCA9IHBhcnNlRmxvYXQoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ludGVybmF0LWhvdXJzJykudmFsdWUpIHx8IDA7CiAgICAgICAgY29uc3QgYWdlbnQgPSBEQVRBLmFnZW50cy5maW5kKGEgPT4gYS5uYW1lID09PSBuYW1lKTsKICAgICAgICBpZihhZ2VudCkgewogICAgICAgICAgICBhZ2VudC5pbnRlcm5hdEhvdXJzID0gdmFsOwogICAgICAgICAgICBzYXZlTG9jYWxTdG9yYWdlKCk7CiAgICAgICAgICAgIHVwZGF0ZVN0YXRzSGVhZGVyKCk7CiAgICAgICAgfQogICAgfQoKICAgIC8vIC0tLSBJTVBSRVNTSU9OUyAtLS0KICAgIGZ1bmN0aW9uIHByaW50RGFzaGJvYXJkKCkgewogICAgICAgIGlmKERBVEEuYWdlbnRzLmxlbmd0aCA9PT0gMCkgeyBhbGVydCgiQXVjdW5lIGRvbm7DqWUuIik7IHJldHVybjsgfQogICAgICAgIGNvbnN0IGFyZWEgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGFzaGJvYXJkLXByaW50LWFyZWEnKTsKICAgICAgICBhcmVhLmlubmVySFRNTCA9IGAKICAgICAgICAgICAgPGRpdiBjbGFzcz0icHJpbnQtaGVhZGVyLWJhdGNoIj5Sw6ljYXBpdHVsYXRpZiBkZXMgQWdlbnRzIC0gQUVEIFBJTE9URTwvZGl2PgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJkYXNoYm9hcmQtZ3JpZCI+JHtkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGFzaGJvYXJkLWFyZWEnKS5pbm5lckhUTUx9PC9kaXY+CiAgICAgICAgYDsKICAgICAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5hZGQoJ3ByaW50aW5nLWRhc2hib2FyZCcsICdwcmludGluZy1tb2RlJyk7CiAgICAgICAgd2luZG93LnByaW50KCk7CiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LnJlbW92ZSgncHJpbnRpbmctZGFzaGJvYXJkJywgJ3ByaW50aW5nLW1vZGUnKTsKICAgICAgICAgICAgYXJlYS5pbm5lckhUTUwgPSAnJzsKICAgICAgICB9LCAxMDAwKTsKICAgIH0KCiAgICBmdW5jdGlvbiBwcmludEdlc3Rpb24oKSB7CiAgICAgICAgY29uc3QgbmFtZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhZWQtc2VsZWN0LWdlc3Rpb24nKS52YWx1ZTsKICAgICAgICBpZighbmFtZSkgeyBhbGVydCgiU8OpbGVjdGlvbm5leiB1biBhZ2VudCIpOyByZXR1cm47IH0KICAgICAgICBjb25zdCBhbm51YWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYW5udWFsLXRhcmdldC1kaXNwbGF5JykuaW5uZXJUZXh0OwogICAgICAgIGNvbnN0IHNvbGRlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2JhbGFuY2UtZGlzcGxheScpLmlubmVyVGV4dDsKICAgICAgICBjb25zdCBoaXN0b3J5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2hpc3RvcnktYm9keScpLmlubmVySFRNTDsKICAgICAgICBjb25zdCBhcmVhID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2dlc3Rpb24tcHJpbnQtYXJlYScpOwogICAgICAgIGFyZWEuaW5uZXJIVE1MID0gYAogICAgICAgICAgICA8ZGl2IGNsYXNzPSJwcmludC1oZWFkZXItYmF0Y2giPkZpY2hlIGRlIEdlc3Rpb24gOiAke25hbWV9PC9kaXY+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9Imdlc3Rpb24tc3RhdHMtY29udGFpbmVyIj4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImJhbGFuY2UtYm94Ij48aDM+T2JqZWN0aWYgQW5udWVsPC9oMz48ZGl2IGNsYXNzPSJiYWxhbmNlLWFtb3VudCI+JHthbm51YWx9PC9kaXY+PC9kaXY+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJiYWxhbmNlLWJveCBzZWNvbmRhcnkiPjxoMz5Tb2xkZSBBanVzdGVtZW50czwvaDM+PGRpdiBjbGFzcz0iYmFsYW5jZS1hbW91bnQiPiR7c29sZGV9PC9kaXY+PC9kaXY+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8aDM+SGlzdG9yaXF1ZSBkZXMgbW91dmVtZW50czwvaDM+CiAgICAgICAgICAgIDx0YWJsZSBjbGFzcz0iaGlzdG9yeS10YWJsZSI+PHRoZWFkPjx0cj48dGg+RGF0ZTwvdGg+PHRoPlR5cGU8L3RoPjx0aD5Nb3RpZjwvdGg+PHRoPkg8L3RoPjx0aD48L3RoPjwvdHI+PC90aGVhZD48dGJvZHk+JHtoaXN0b3J5fTwvdGJvZHk+PC90YWJsZT4KICAgICAgICBgOwogICAgICAgIGNvbnN0IHRyYXNoZXMgPSBhcmVhLnF1ZXJ5U2VsZWN0b3JBbGwoJy5mYS10cmFzaCcpOwogICAgICAgIHRyYXNoZXMuZm9yRWFjaCh0ID0+IHQuc3R5bGUuZGlzcGxheSA9ICdub25lJyk7CiAgICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuYWRkKCdwcmludGluZy1nZXN0aW9uJywgJ3ByaW50aW5nLW1vZGUnKTsKICAgICAgICB3aW5kb3cucHJpbnQoKTsKICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QucmVtb3ZlKCdwcmludGluZy1nZXN0aW9uJywgJ3ByaW50aW5nLW1vZGUnKTsKICAgICAgICAgICAgYXJlYS5pbm5lckhUTUwgPSAnJzsKICAgICAgICB9LCAxMDAwKTsKICAgIH0KCiAgICBmdW5jdGlvbiBwcmludFJlcGFydGl0aW9uKCkgewogICAgICAgIGNvbnN0IGRheSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXBhcnRpdGlvbi1kYXktc2VsZWN0JykudmFsdWU7CiAgICAgICAgY29uc3QgY29udGVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXBhcnRpdGlvbi1jb250ZW50JykuaW5uZXJIVE1MOwogICAgICAgIGNvbnN0IGFyZWEgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVwYXJ0aXRpb24tcHJpbnQtYXJlYScpOwogICAgICAgIAogICAgICAgIGFyZWEuaW5uZXJIVE1MID0gYAogICAgICAgICAgICA8ZGl2IGNsYXNzPSJwcmludC1oZWFkZXItYmF0Y2giPlF1aSBmYWl0IHF1b2kgPyAtICR7ZGF5fTwvZGl2PgogICAgICAgICAgICAke2NvbnRlbnR9CiAgICAgICAgYDsKICAgICAgICAKICAgICAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5hZGQoJ3ByaW50aW5nLXJlcGFydGl0aW9uJywgJ3ByaW50aW5nLW1vZGUnKTsKICAgICAgICB3aW5kb3cucHJpbnQoKTsKICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QucmVtb3ZlKCdwcmludGluZy1yZXBhcnRpdGlvbicsICdwcmludGluZy1tb2RlJyk7CiAgICAgICAgICAgIGFyZWEuaW5uZXJIVE1MID0gJyc7CiAgICAgICAgfSwgMTAwMCk7CiAgICB9CgogICAgLy8gLS0tIElNUFJFU1NJT04gUEFSIEFHRU5UIC0tLQogICAgZnVuY3Rpb24gcHJpbnRTaW5nbGUoKSB7CiAgICAgICAgY29uc3QgbmFtZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhZWQtc2VsZWN0LWNvbmNlcHRpb24nKS52YWx1ZTsKICAgICAgICBpZighbmFtZSkgeyBhbGVydCgiU8OpbGVjdGlvbm5leiB1biBhZ2VudCAhIik7IHJldHVybjsgfQogICAgICAgIAogICAgICAgIGNvbnN0IGFnZW50ID0gREFUQS5hZ2VudHMuZmluZChhID0+IGEubmFtZSA9PT0gbmFtZSk7CiAgICAgICAgaWYoIWFnZW50KSByZXR1cm47CgogICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdiYXRjaC1wcmludC1hcmVhJyk7CiAgICAgICAgY29udGFpbmVyLmlubmVySFRNTCA9ICcnOyAKICAgICAgICAKICAgICAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5hZGQoJ3ByaW50aW5nLWJhdGNoJywgJ3ByaW50aW5nLW1vZGUnKTsKCiAgICAgICAgY29uc3QgcGFnZURpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgICAgIHBhZ2VEaXYuY2xhc3NOYW1lID0gJ3BhZ2UtYnJlYWsnOwogICAgICAgIHBhZ2VEaXYuaW5uZXJIVE1MID0gYDxkaXYgY2xhc3M9InByaW50LWhlYWRlci1iYXRjaCI+RW1wbG9pIGR1IHRlbXBzIDogJHthZ2VudC5uYW1lfSAoJHthZ2VudC5mdGVMYWJlbH0pPC9kaXY+YDsKICAgICAgICAKICAgICAgICBjb25zdCB0YWJsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RhYmxlJyk7CiAgICAgICAgdGFibGUuY2xhc3NOYW1lID0gJ2VkdC10YWJsZSc7CiAgICAgICAgdGFibGUuaW5uZXJIVE1MID0gZ2VuZXJhdGVUYWJsZUhUTUwoYWdlbnQubmFtZSk7CiAgICAgICAgCiAgICAgICAgcGFnZURpdi5hcHBlbmRDaGlsZCh0YWJsZSk7CiAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKHBhZ2VEaXYpOwoKICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgICAgd2luZG93LnByaW50KCk7CiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QucmVtb3ZlKCdwcmludGluZy1iYXRjaCcsICdwcmludGluZy1tb2RlJyk7CiAgICAgICAgICAgICAgICBjb250YWluZXIuaW5uZXJIVE1MID0gJyc7CiAgICAgICAgICAgIH0sIDEwMDApOwogICAgICAgIH0sIDUwMCk7CiAgICB9CgogICAgZnVuY3Rpb24gcHJpbnRBbGwoKSB7CiAgICAgICAgaWYoREFUQS5hZ2VudHMubGVuZ3RoID09PSAwKSB7IGFsZXJ0KCJBdWN1biBhZ2VudCDDoCBpbXByaW1lci4iKTsgcmV0dXJuOyB9CiAgICAgICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2JhdGNoLXByaW50LWFyZWEnKTsKICAgICAgICBjb250YWluZXIuaW5uZXJIVE1MID0gJyc7IAogICAgICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmFkZCgncHJpbnRpbmctYmF0Y2gnLCAncHJpbnRpbmctbW9kZScpOwogICAgICAgIERBVEEuYWdlbnRzLmZvckVhY2goKGFnZW50LCBpbmRleCkgPT4gewogICAgICAgICAgICBjb25zdCBwYWdlRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgICAgICAgIHBhZ2VEaXYuY2xhc3NOYW1lID0gJ3BhZ2UtYnJlYWsnOwogICAgICAgICAgICBwYWdlRGl2LmlubmVySFRNTCA9IGA8ZGl2IGNsYXNzPSJwcmludC1oZWFkZXItYmF0Y2giPkVtcGxvaSBkdSB0ZW1wcyA6ICR7YWdlbnQubmFtZX0gKCR7YWdlbnQuZnRlTGFiZWx9KTwvZGl2PmA7CiAgICAgICAgICAgIGNvbnN0IHRhYmxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGFibGUnKTsKICAgICAgICAgICAgdGFibGUuY2xhc3NOYW1lID0gJ2VkdC10YWJsZSc7CiAgICAgICAgICAgIHRhYmxlLmlubmVySFRNTCA9IGdlbmVyYXRlVGFibGVIVE1MKGFnZW50Lm5hbWUpOwogICAgICAgICAgICBwYWdlRGl2LmFwcGVuZENoaWxkKHRhYmxlKTsKICAgICAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKHBhZ2VEaXYpOwogICAgICAgIH0pOwogICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgICB3aW5kb3cucHJpbnQoKTsKICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5yZW1vdmUoJ3ByaW50aW5nLWJhdGNoJywgJ3ByaW50aW5nLW1vZGUnKTsKICAgICAgICAgICAgICAgIGNvbnRhaW5lci5pbm5lckhUTUwgPSAnJzsKICAgICAgICAgICAgfSwgMTAwMCk7CiAgICAgICAgfSwgNTAwKTsKICAgIH0KCiAgICAvLyBHRVNUSU9OIERVIFJFTkRVIERFIExBIFRBQkxFIChBZGFwdMOpIGF1eCBzbG90cykKICAgIGZ1bmN0aW9uIGdlbmVyYXRlVGFibGVIVE1MKGFnZW50TmFtZSkgewogICAgICAgIGxldCBodG1sID0gYDx0aGVhZD48dHI+PHRoIHN0eWxlPSJ3aWR0aDo5MHB4Ij5IPC90aD5gOwogICAgICAgIERBWVMuZm9yRWFjaChkID0+IGh0bWwgKz0gYDx0aD4ke2R9PC90aD5gKTsKICAgICAgICBodG1sICs9IGA8L3RyPjwvdGhlYWQ+PHRib2R5PmA7CiAgICAgICAgY29uc3QgYWdlbnQgPSBEQVRBLmFnZW50cy5maW5kKGEgPT4gYS5uYW1lID09PSBhZ2VudE5hbWUpOwogICAgICAgIGNvbnN0IHNjaGVkID0gREFUQS5zY2hlZHVsZXNbYWdlbnROYW1lXSB8fCB7fTsKICAgICAgICAKICAgICAgICBjb25zdCBzbG90cyA9IChEQVRBLmNvbmZpZy5zbG90cyAmJiBEQVRBLmNvbmZpZy5zbG90cy5sZW5ndGggPiAwKSA/IERBVEEuY29uZmlnLnNsb3RzIDogREVGQVVMVF9TTE9UUzsKCiAgICAgICAgLy8gQm91Y2xlIHN1ciBsZXMgY3LDqW5lYXV4IGTDqWZpbmlzCiAgICAgICAgc2xvdHMuZm9yRWFjaCgoc2xvdCwgaW5kZXgpID0+IHsKICAgICAgICAgICAgaHRtbCArPSBgPHRyPjx0ZCBjbGFzcz0idGltZS1jb2wiPiR7c2xvdC5zdGFydH08YnI+LTxicj4ke3Nsb3QuZW5kfTwvdGQ+YDsKICAgICAgICAgICAgREFZUy5mb3JFYWNoKGRheSA9PiB7CiAgICAgICAgICAgICAgICAvLyBMYSBjbMOpIHN0b2Nrw6llIGVzdCBKb3VyLUluZGV4IChleDogTHVuZGktMCkgcG91ciDDqnRyZSBpbmTDqXBlbmRhbnRlIGR1IHRleHRlCiAgICAgICAgICAgICAgICBjb25zdCBrZXkgPSBgJHtkYXl9LSR7aW5kZXh9YDsKICAgICAgICAgICAgICAgIGxldCBjb250ZW50ID0gJyc7CiAgICAgICAgICAgICAgICBsZXQgY2VsbENsYXNzID0gJyc7CiAgICAgICAgICAgICAgICBpZihhZ2VudCAmJiBhZ2VudC5jb25zdHJhaW50cy50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKGRheS50b0xvd2VyQ2FzZSgpKSkgewogICAgICAgICAgICAgICAgICAgIGNlbGxDbGFzcyA9ICdjZWxsLWJsb2NrZWQnOwogICAgICAgICAgICAgICAgfSBlbHNlIGlmKHNjaGVkW2tleV0pIHsKICAgICAgICAgICAgICAgICAgICBjb25zdCBiZ0NvbG9yID0gc2NoZWRba2V5XS5jb2xvciB8fCAnIzk5OSc7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgdGV4dENvbG9yID0gaXNMaWdodENvbG9yKGJnQ29sb3IpID8gJyMzMzMnIDogJ3doaXRlJzsKICAgICAgICAgICAgICAgICAgICBjb250ZW50ID0gYDxkaXYgY2xhc3M9ImNlbGwtY29udGVudCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6JHtiZ0NvbG9yfTtjb2xvcjoke3RleHRDb2xvcn0iPiR7c2NoZWRba2V5XS50b29sfTwvZGl2PmA7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBodG1sICs9IGA8dGQgY2xhc3M9IiR7Y2VsbENsYXNzfSI+JHtjb250ZW50fTwvdGQ+YDsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGh0bWwgKz0gYDwvdHI+YDsKICAgICAgICB9KTsKICAgICAgICBodG1sICs9IGA8L3Rib2R5PmA7CiAgICAgICAgcmV0dXJuIGh0bWw7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIGlzTGlnaHRDb2xvcihoZXgpIHsKICAgICAgICBjb25zdCBjID0gaGV4LnN1YnN0cmluZygxKTsKICAgICAgICBjb25zdCByZ2IgPSBwYXJzZUludChjLCAxNik7CiAgICAgICAgY29uc3QgciA9IChyZ2IgPj4gMTYpICYgMHhmZjsKICAgICAgICBjb25zdCBnID0gKHJnYiA+PiAgOCkgJiAweGZmOwogICAgICAgIGNvbnN0IGIgPSAocmdiID4+ICAwKSAmIDB4ZmY7CiAgICAgICAgY29uc3QgbHVtYSA9IDAuMjk5ICogciArIDAuNTg3ICogZyArIDAuMTE0ICogYjsKICAgICAgICByZXR1cm4gbHVtYSA+IDE2MDsKICAgIH0KCiAgICAvLyAtLS0gU1lTVEVNRSAtLS0KICAgIGZ1bmN0aW9uIHJlc2V0QWxsRGF0YSgpIHsKICAgICAgICBpZihjb25maXJtKCLDinRlcy12b3VzIHPDu3IgZGUgdm91bG9pciBUT1VUIGVmZmFjZXIgZXQgcmVwYXJ0aXIgw6AgesOpcm8gPyBDZXR0ZSBhY3Rpb24gZXN0IGlycsOpdmVyc2libGUuIikpIHsKICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oU1RPUkFHRV9LRVkpOwogICAgICAgICAgICBsb2NhdGlvbi5yZWxvYWQoKTsKICAgICAgICB9CiAgICB9CiAgICBmdW5jdGlvbiBkb3dubG9hZEpTT04oKSB7CiAgICAgICAgY29uc3QgZGF0YVN0ciA9ICJkYXRhOnRleHQvanNvbjtjaGFyc2V0PXV0Zi04LCIgKyBlbmNvZGVVUklDb21wb25lbnQoSlNPTi5zdHJpbmdpZnkoREFUQSkpOwogICAgICAgIGNvbnN0IGFuY2hvciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTsKICAgICAgICBhbmNob3Iuc2V0QXR0cmlidXRlKCJocmVmIiwgZGF0YVN0cik7IGFuY2hvci5zZXRBdHRyaWJ1dGUoImRvd25sb2FkIiwgInNhdXZlZ2FyZGVfYWVkX3BpbG90ZS5qc29uIik7CiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChhbmNob3IpOyBhbmNob3IuY2xpY2soKTsgYW5jaG9yLnJlbW92ZSgpOwogICAgfQogICAgZnVuY3Rpb24gaW1wb3J0SlNPTihpbnB1dCkgewogICAgICAgIGNvbnN0IGZpbGUgPSBpbnB1dC5maWxlc1swXTsKICAgICAgICBpZighZmlsZSkgcmV0dXJuOwogICAgICAgIGNvbnN0IHIgPSBuZXcgRmlsZVJlYWRlcigpOwogICAgICAgIHIub25sb2FkID0gZSA9PiB7IHRyeXsgREFUQSA9IEpTT04ucGFyc2UoZS50YXJnZXQucmVzdWx0KTsgc2F2ZUxvY2FsU3RvcmFnZSgpOyByZWZyZXNoQWxsVUkoKTsgfWNhdGNoKGUpe2FsZXJ0KCJFcnJldXIiKTt9IH07CiAgICAgICAgci5yZWFkQXNUZXh0KGZpbGUpOwogICAgfQogICAgZnVuY3Rpb24gc2F2ZUxvY2FsU3RvcmFnZSgpIHsgbG9jYWxTdG9yYWdlLnNldEl0ZW0oU1RPUkFHRV9LRVksIEpTT04uc3RyaW5naWZ5KERBVEEpKTsgfQogICAgCiAgICBmdW5jdGlvbiBsb2FkTG9jYWxTdG9yYWdlKCkgeyAKICAgICAgICBsZXQgaiA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKFNUT1JBR0VfS0VZKTsKICAgICAgICBpZihqKSB7IAogICAgICAgICAgICBEQVRBID0gSlNPTi5wYXJzZShqKTsgCiAgICAgICAgICAgIC8vIFLDqXRyby1jb21wYXRpYmlsaXTDqSA6IHNpIHBhcyBkZSBzbG90cywgb24gbWV0IGNldXggcGFyIGTDqWZhdXQKICAgICAgICAgICAgaWYoIURBVEEuY29uZmlnKSBEQVRBLmNvbmZpZyA9IHsgc2xvdHM6IERFRkFVTFRfU0xPVFMgfTsKICAgICAgICAgICAgaWYoIURBVEEuY29uZmlnLnNsb3RzKSBEQVRBLmNvbmZpZy5zbG90cyA9IERFRkFVTFRfU0xPVFM7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgLy8gUHJlbWllciBsYW5jZW1lbnQKICAgICAgICAgICAgREFUQS5jb25maWcuc2xvdHMgPSBERUZBVUxUX1NMT1RTOwogICAgICAgIH0KICAgICAgICByZWZyZXNoQWxsVUkoKTsgCiAgICB9CiAgICBmdW5jdGlvbiByZWZyZXNoQWxsVUkoKSB7IHJlbmRlck92ZXJ2aWV3KCk7IHBvcHVsYXRlU2VsZWN0cygpOyByZW5kZXJUaW1ldGFibGUoKTsgcmVuZGVySW1wb3J0SW5mbygpOyByZW5kZXJQYWxldHRlKCk7IH0KCiAgICAvLyAtLS0gR0VTVElPTiBERVMgU0VSVklDRVMgKFBBTEVUVEUgRFlOQU1JUVVFKSAtLS0KICAgIGZ1bmN0aW9uIGdldEFsbFNlcnZpY2VzKCkgewogICAgICAgIGNvbnN0IGN1c3RvbVNlcnZpY2VzID0gREFUQS5zZXJ2aWNlcyB8fCBbXTsKICAgICAgICByZXR1cm4gWy4uLkRFRkFVTFRfU0VSVklDRVMsIC4uLmN1c3RvbVNlcnZpY2VzXTsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gcmVuZGVyUGFsZXR0ZSgpIHsKICAgICAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGFsZXR0ZS1jb250YWluZXInKTsKICAgICAgICBpZighY29udGFpbmVyKSByZXR1cm47CiAgICAgICAgCiAgICAgICAgY29udGFpbmVyLmlubmVySFRNTCA9ICcnOwogICAgICAgIGNvbnN0IHNlcnZpY2VzID0gZ2V0QWxsU2VydmljZXMoKTsKICAgICAgICAKICAgICAgICBzZXJ2aWNlcy5mb3JFYWNoKChzZXJ2aWNlLCBpbmRleCkgPT4gewogICAgICAgICAgICBjb25zdCBpc0xpZ2h0ID0gaXNMaWdodENvbG9yKHNlcnZpY2UuY29sb3IpOwogICAgICAgICAgICBjb25zdCB0ZXh0Q29sb3IgPSBpc0xpZ2h0ID8gJyMzMzMnIDogJ3doaXRlJzsKICAgICAgICAgICAgY29uc3QgdGV4dFNoYWRvdyA9IGlzTGlnaHQgPyAnbm9uZScgOiAnMCAxcHggMXB4IHJnYmEoMCwwLDAsMC4yKSc7CiAgICAgICAgICAgIAogICAgICAgICAgICBjb25zdCB3cmFwcGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgICAgICAgIHdyYXBwZXIuY2xhc3NOYW1lID0gJ3BhbGV0dGUtYnRuLXdyYXBwZXInOwogICAgICAgICAgICAKICAgICAgICAgICAgY29uc3QgYnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgICAgICAgIGJ0bi5jbGFzc05hbWUgPSAncGFsZXR0ZS1idG4nICsgKGluZGV4ID09PSAwID8gJyBzZWxlY3RlZCcgOiAnJyk7CiAgICAgICAgICAgIGJ0bi5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBzZXJ2aWNlLmNvbG9yOwogICAgICAgICAgICBidG4uc3R5bGUuY29sb3IgPSB0ZXh0Q29sb3I7CiAgICAgICAgICAgIGJ0bi5zdHlsZS50ZXh0U2hhZG93ID0gdGV4dFNoYWRvdzsKICAgICAgICAgICAgYnRuLnRleHRDb250ZW50ID0gc2VydmljZS5uYW1lOwogICAgICAgICAgICBidG4ub25jbGljayA9IGZ1bmN0aW9uKGUpIHsgc2V0VG9vbChzZXJ2aWNlLm5hbWUsIHNlcnZpY2UuY29sb3IpOyB9OwogICAgICAgICAgICAKICAgICAgICAgICAgd3JhcHBlci5hcHBlbmRDaGlsZChidG4pOwogICAgICAgICAgICAKICAgICAgICAgICAgaWYoIXNlcnZpY2UuaXNEZWZhdWx0KSB7CiAgICAgICAgICAgICAgICBjb25zdCBkZWxldGVCdG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTsKICAgICAgICAgICAgICAgIGRlbGV0ZUJ0bi5jbGFzc05hbWUgPSAnc2VydmljZS1kZWxldGUnOwogICAgICAgICAgICAgICAgZGVsZXRlQnRuLmlubmVySFRNTCA9ICfDlyc7CiAgICAgICAgICAgICAgICBkZWxldGVCdG4udGl0bGUgPSAnU3VwcHJpbWVyIGNlIHNlcnZpY2UnOwogICAgICAgICAgICAgICAgZGVsZXRlQnRuLm9uY2xpY2sgPSBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgICAgICAgICAgICAgICBkZWxldGVTZXJ2aWNlKHNlcnZpY2UuaWQpOwogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIHdyYXBwZXIuYXBwZW5kQ2hpbGQoZGVsZXRlQnRuKTsKICAgICAgICAgICAgfQogICAgICAgICAgICAKICAgICAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKHdyYXBwZXIpOwogICAgICAgIH0pOwogICAgICAgIAogICAgICAgIGNvbnN0IGFkZEJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgICAgIGFkZEJ0bi5jbGFzc05hbWUgPSAncGFsZXR0ZS1idG4gYnRuLWFkZC1zZXJ2aWNlJzsKICAgICAgICBhZGRCdG4uaW5uZXJIVE1MID0gJzxpIGNsYXNzPSJmYXMgZmEtcGx1cyI+PC9pPic7CiAgICAgICAgYWRkQnRuLnRpdGxlID0gJ0Fqb3V0ZXIgdW4gc2VydmljZSc7CiAgICAgICAgYWRkQnRuLm9uY2xpY2sgPSBvcGVuU2VydmljZU1vZGFsOwogICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChhZGRCdG4pOwogICAgICAgIAogICAgICAgIGNvbnN0IGVyYXNlckJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgICAgIGVyYXNlckJ0bi5jbGFzc05hbWUgPSAncGFsZXR0ZS1idG4gYmctZXJhc2VyJzsKICAgICAgICBlcmFzZXJCdG4uaW5uZXJIVE1MID0gJzxpIGNsYXNzPSJmYXMgZmEtZXJhc2VyIj48L2k+JzsKICAgICAgICBlcmFzZXJCdG4ub25jbGljayA9IGZ1bmN0aW9uKCkgeyBzZXRUb29sKCdnb21tZScsICcnKTsgfTsKICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoZXJhc2VyQnRuKTsKICAgICAgICAKICAgICAgICBpZihzZXJ2aWNlcy5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgIENVUlJFTlRfVE9PTCA9IHsgbmFtZTogc2VydmljZXNbMF0ubmFtZSwgY29sb3I6IHNlcnZpY2VzWzBdLmNvbG9yLCBpc0VyYXNlcjogZmFsc2UgfTsKICAgICAgICB9CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIG9wZW5TZXJ2aWNlTW9kYWwoKSB7CiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21vZGFsLXNlcnZpY2UnKS5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTsKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2VydmljZS1uYW1lJykudmFsdWUgPSAnJzsKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2VydmljZS1jb2xvcicpLnZhbHVlID0gJyMzNDk4ZGInOwogICAgICAgIHVwZGF0ZVByZXZpZXcoKTsKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2VydmljZS1uYW1lJykuZm9jdXMoKTsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gY2xvc2VTZXJ2aWNlTW9kYWwoKSB7CiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21vZGFsLXNlcnZpY2UnKS5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gc2V0UHJlc2V0Q29sb3IoY29sb3IpIHsKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2VydmljZS1jb2xvcicpLnZhbHVlID0gY29sb3I7CiAgICAgICAgdXBkYXRlUHJldmlldygpOwogICAgfQogICAgCiAgICBmdW5jdGlvbiB1cGRhdGVQcmV2aWV3KCkgewogICAgICAgIGNvbnN0IG5hbWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2VydmljZS1uYW1lJykudmFsdWUudHJpbSgpIHx8ICdOT1VWRUFVIFNFUlZJQ0UnOwogICAgICAgIGNvbnN0IGNvbG9yID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NlcnZpY2UtY29sb3InKS52YWx1ZTsKICAgICAgICBjb25zdCBwcmV2aWV3ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NlcnZpY2UtcHJldmlldycpOwogICAgICAgIHByZXZpZXcudGV4dENvbnRlbnQgPSBuYW1lLnRvVXBwZXJDYXNlKCk7CiAgICAgICAgcHJldmlldy5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBjb2xvcjsKICAgICAgICBwcmV2aWV3LnN0eWxlLmNvbG9yID0gaXNMaWdodENvbG9yKGNvbG9yKSA/ICcjMzMzJyA6ICd3aGl0ZSc7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIGNvbmZpcm1BZGRTZXJ2aWNlKCkgewogICAgICAgIGNvbnN0IG5hbWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2VydmljZS1uYW1lJykudmFsdWUudHJpbSgpOwogICAgICAgIGNvbnN0IGNvbG9yID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NlcnZpY2UtY29sb3InKS52YWx1ZTsKICAgICAgICAKICAgICAgICBpZighbmFtZSkgeyBhbGVydCgnVmV1aWxsZXogZW50cmVyIHVuIG5vbSBwb3VyIGxlIHNlcnZpY2UnKTsgcmV0dXJuOyB9CiAgICAgICAgaWYobmFtZS5sZW5ndGggPiAxNSkgeyBhbGVydCgnTGUgbm9tIGR1IHNlcnZpY2UgbmUgZG9pdCBwYXMgZMOpcGFzc2VyIDE1IGNhcmFjdMOocmVzJyk7IHJldHVybjsgfQogICAgICAgIAogICAgICAgIGNvbnN0IGFsbFNlcnZpY2VzID0gZ2V0QWxsU2VydmljZXMoKTsKICAgICAgICBpZihhbGxTZXJ2aWNlcy5zb21lKHMgPT4gcy5uYW1lLnRvTG93ZXJDYXNlKCkgPT09IG5hbWUudG9Mb3dlckNhc2UoKSkpIHsgYWxlcnQoJ1VuIHNlcnZpY2UgYXZlYyBjZSBub20gZXhpc3RlIGTDqWrDoCcpOyByZXR1cm47IH0KICAgICAgICAKICAgICAgICBjb25zdCBuZXdTZXJ2aWNlID0geyBpZDogJ2N1c3RvbV8nICsgRGF0ZS5ub3coKSwgbmFtZTogbmFtZSwgY29sb3I6IGNvbG9yLCBpc0RlZmF1bHQ6IGZhbHNlIH07CiAgICAgICAgaWYoIURBVEEuc2VydmljZXMpIERBVEEuc2VydmljZXMgPSBbXTsKICAgICAgICBEQVRBLnNlcnZpY2VzLnB1c2gobmV3U2VydmljZSk7CiAgICAgICAgCiAgICAgICAgc2F2ZUxvY2FsU3RvcmFnZSgpOwogICAgICAgIHJlbmRlclBhbGV0dGUoKTsKICAgICAgICBjbG9zZVNlcnZpY2VNb2RhbCgpOwogICAgICAgIAogICAgICAgIENVUlJFTlRfVE9PTCA9IHsgbmFtZTogbmV3U2VydmljZS5uYW1lLCBjb2xvcjogbmV3U2VydmljZS5jb2xvciwgaXNFcmFzZXI6IGZhbHNlIH07CiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnBhbGV0dGUtYnRuJykuZm9yRWFjaChiID0+IGIuY2xhc3NMaXN0LnJlbW92ZSgnc2VsZWN0ZWQnKSk7CiAgICAgICAgY29uc3QgYnRucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5wYWxldHRlLWJ0bicpOwogICAgICAgIGlmKGJ0bnMubGVuZ3RoID4gMikgYnRuc1tidG5zLmxlbmd0aCAtIDNdLmNsYXNzTGlzdC5hZGQoJ3NlbGVjdGVkJyk7IAogICAgfQogICAgCiAgICBmdW5jdGlvbiBkZWxldGVTZXJ2aWNlKHNlcnZpY2VJZCkgewogICAgICAgIGlmKCFjb25maXJtKCdTdXBwcmltZXIgY2Ugc2VydmljZSA/JykpIHJldHVybjsKICAgICAgICBEQVRBLnNlcnZpY2VzID0gKERBVEEuc2VydmljZXMgfHwgW10pLmZpbHRlcihzID0+IHMuaWQgIT09IHNlcnZpY2VJZCk7CiAgICAgICAgc2F2ZUxvY2FsU3RvcmFnZSgpOwogICAgICAgIHJlbmRlclBhbGV0dGUoKTsKICAgIH0KICAgIAogICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihlKSB7CiAgICAgICAgY29uc3QgbW9kYWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbW9kYWwtc2VydmljZScpOwogICAgICAgIGlmKGUudGFyZ2V0ID09PSBtb2RhbCkgY2xvc2VTZXJ2aWNlTW9kYWwoKTsKICAgICAgICBjb25zdCBtb2RhbEdyaWQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbW9kYWwtZ3JpZC1jb25maWcnKTsKICAgICAgICBpZihlLnRhcmdldCA9PT0gbW9kYWxHcmlkKSBtb2RhbEdyaWQuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7CiAgICB9KTsKICAgIAogICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZ1bmN0aW9uKCkgewogICAgICAgIGNvbnN0IG5hbWVJbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZXJ2aWNlLW5hbWUnKTsKICAgICAgICBpZihuYW1lSW5wdXQpIG5hbWVJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIHVwZGF0ZVByZXZpZXcpOwogICAgfSk7CgogICAgLy8gLS0tIExPR0lRVUUgTUVOVSA0IDogUVVJIEZBSVQgUVVPSSAoUkVQQVJUSVRJT04pIC0tLQogICAgZnVuY3Rpb24gcmVuZGVyUmVwYXJ0aXRpb24oKSB7CiAgICAgICAgY29uc3QgZGF5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JlcGFydGl0aW9uLWRheS1zZWxlY3QnKS52YWx1ZTsKICAgICAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVwYXJ0aXRpb24tY29udGVudCcpOwogICAgICAgIGNvbnN0IHNlcnZpY2VzID0gZ2V0QWxsU2VydmljZXMoKTsKICAgICAgICAKICAgICAgICBpZighY29udGFpbmVyKSByZXR1cm47CgogICAgICAgIGxldCBodG1sID0gYDx0YWJsZSBjbGFzcz0icmVwYXJ0aXRpb24tdGFibGUiPjx0aGVhZD48dHI+YDsKICAgICAgICBodG1sICs9IGA8dGggc3R5bGU9IndpZHRoOjkwcHg7IGJhY2tncm91bmQ6IzJjM2U1MDsgei1pbmRleDoyMDsiPkhvcmFpcmU8L3RoPmA7CiAgICAgICAgCiAgICAgICAgc2VydmljZXMuZm9yRWFjaChzID0+IHsKICAgICAgICAgICAgY29uc3QgaXNMaWdodCA9IGlzTGlnaHRDb2xvcihzLmNvbG9yKTsKICAgICAgICAgICAgY29uc3QgdGV4dENvbG9yID0gaXNMaWdodCA/ICcjMzMzJyA6ICd3aGl0ZSc7CiAgICAgICAgICAgIGh0bWwgKz0gYDx0aCBzdHlsZT0iYmFja2dyb3VuZDoke3MuY29sb3J9OyBjb2xvcjoke3RleHRDb2xvcn07IGJvcmRlci1jb2xvcjoke2lzTGlnaHQ/JyNjY2MnOnMuY29sb3J9Ij4ke3MubmFtZX08L3RoPmA7CiAgICAgICAgfSk7CiAgICAgICAgaHRtbCArPSBgPC90cj48L3RoZWFkPjx0Ym9keT5gOwoKICAgICAgICBjb25zdCBzbG90cyA9IChEQVRBLmNvbmZpZy5zbG90cyAmJiBEQVRBLmNvbmZpZy5zbG90cy5sZW5ndGggPiAwKSA/IERBVEEuY29uZmlnLnNsb3RzIDogREVGQVVMVF9TTE9UUzsKCiAgICAgICAgc2xvdHMuZm9yRWFjaCgoc2xvdCwgaW5kZXgpID0+IHsKICAgICAgICAgICAgaHRtbCArPSBgPHRyPjx0ZCBzdHlsZT0iZm9udC13ZWlnaHQ6Ym9sZDsgYmFja2dyb3VuZDojZjBmMmY1OyB0ZXh0LWFsaWduOmNlbnRlcjsgYm9yZGVyLXJpZ2h0OjJweCBzb2xpZCAjY2NjOyBmb250LXNpemU6MC43NXJlbTsiPiR7c2xvdC5zdGFydH08YnI+LTxicj4ke3Nsb3QuZW5kfTwvdGQ+YDsKICAgICAgICAgICAgCiAgICAgICAgICAgIHNlcnZpY2VzLmZvckVhY2goc2VydmljZSA9PiB7CiAgICAgICAgICAgICAgICBsZXQgYWdlbnRzT25Qb3N0ID0gW107CiAgICAgICAgICAgICAgICBEQVRBLmFnZW50cy5mb3JFYWNoKGFnZW50ID0+IHsKICAgICAgICAgICAgICAgICAgICBjb25zdCBrZXkgPSBgJHtkYXl9LSR7aW5kZXh9YDsKICAgICAgICAgICAgICAgICAgICBjb25zdCBzY2hlZCA9IERBVEEuc2NoZWR1bGVzW2FnZW50Lm5hbWVdOwogICAgICAgICAgICAgICAgICAgIGlmKHNjaGVkICYmIHNjaGVkW2tleV0gJiYgc2NoZWRba2V5XS50b29sID09PSBzZXJ2aWNlLm5hbWUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgYWdlbnRzT25Qb3N0LnB1c2goYWdlbnQubmFtZSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIGxldCBjZWxsQ29udGVudCA9IGFnZW50c09uUG9zdC5tYXAobmFtZSA9PiBgPHNwYW4gY2xhc3M9ImFnZW50LXRhZyI+JHtuYW1lfTwvc3Bhbj5gKS5qb2luKCcnKTsKICAgICAgICAgICAgICAgIGh0bWwgKz0gYDx0ZD4ke2NlbGxDb250ZW50fTwvdGQ+YDsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGh0bWwgKz0gYDwvdHI+YDsKICAgICAgICB9KTsKCiAgICAgICAgaHRtbCArPSBgPC90Ym9keT48L3RhYmxlPmA7CiAgICAgICAgY29udGFpbmVyLmlubmVySFRNTCA9IGh0bWw7CiAgICB9CgogICAgLy8gLS0tIElNUE9SVCBFWENFTCAtLS0KICAgIGZ1bmN0aW9uIGhhbmRsZUV4Y2VsKGlucHV0KSB7CiAgICAgICAgY29uc3QgZiA9IGlucHV0LmZpbGVzWzBdOyAKICAgICAgICBpZighZikgcmV0dXJuOwogICAgICAgIAogICAgICAgIGNvbnN0IHIgPSBuZXcgRmlsZVJlYWRlcigpOwogICAgICAgIHIub25sb2FkID0gZSA9PiB7CiAgICAgICAgICAgIGNvbnN0IHdiID0gWExTWC5yZWFkKG5ldyBVaW50OEFycmF5KGUudGFyZ2V0LnJlc3VsdCksIHt0eXBlOidhcnJheSd9KTsKICAgICAgICAgICAgY29uc3Qgcm93cyA9IFhMU1gudXRpbHMuc2hlZXRfdG9fanNvbih3Yi5TaGVldHNbd2IuU2hlZXROYW1lc1swXV0sIHtoZWFkZXI6MX0pOwogICAgICAgICAgICAKICAgICAgICAgICAgY29uc3QgaGVhZGVyID0gcm93c1swXTsKICAgICAgICAgICAgY29uc3QgcXVvdGl0ZXMgPSBbXTsKICAgICAgICAgICAgLy8gTU9ESUZJQ0FUSU9OIElDSSA6IE9uIHNjYW5uZSBqdXNxdSfDoCBsYSBjb2xvbm5lIDggKEluZGV4IEkpIHBvdXIgbGVzIHF1b3RpdMOpcwogICAgICAgICAgICBmb3IobGV0IGNvbCA9IDE7IGNvbCA8PSA4OyBjb2wrKykgewogICAgICAgICAgICAgICAgY29uc3QgdmFsID0gcGFyc2VGbG9hdChoZWFkZXJbY29sXSk7CiAgICAgICAgICAgICAgICBpZighaXNOYU4odmFsKSAmJiB2YWwgPiAwKSB7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgZnRlID0gdmFsID4gMSA/IHZhbCAvIDEwMCA6IHZhbDsKICAgICAgICAgICAgICAgICAgICBxdW90aXRlcy5wdXNoKHsgY29sdW1uOiBjb2wsIGZ0ZTogZnRlLCBsYWJlbDogTWF0aC5yb3VuZChmdGUgKiAxMDApICsgJyUnIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIAogICAgICAgICAgICBEQVRBLnF1b3RpdGVzID0gcXVvdGl0ZXM7CiAgICAgICAgICAgIERBVEEuYWdlbnRzID0gW107CiAgICAgICAgICAgIAogICAgICAgICAgICBmb3IobGV0IGkgPSAxOyBpIDwgcm93cy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgY29uc3QgYyA9IHJvd3NbaV07IAogICAgICAgICAgICAgICAgaWYoIWMgfHwgIWNbMF0pIGNvbnRpbnVlOwogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBsZXQgZnRlID0gMDsKICAgICAgICAgICAgICAgIGxldCBmdGVMYWJlbCA9ICJJbmNvbm51IjsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgZm9yKGNvbnN0IHEgb2YgcXVvdGl0ZXMpIHsKICAgICAgICAgICAgICAgICAgICBpZihjaGVja1goY1txLmNvbHVtbl0pKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGZ0ZSA9IHEuZnRlOwogICAgICAgICAgICAgICAgICAgICAgICBmdGVMYWJlbCA9IHEubGFiZWw7CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgaWYoZnRlID09PSAwKSBjb250aW51ZTsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgLy8gTU9ESUZJQ0FUSU9OIElDSSA6IFLDqWFsaWduZW1lbnQgZGVzIGNvbG9ubmVzIHNlbG9uIGxlIG5vdXZlYXUgZmljaGllcgogICAgICAgICAgICAgICAgLy8gQ29sIDEwIChLKSA9IFRlbXBzIGRlIHRyYXZhaWwgYW5udWVsCiAgICAgICAgICAgICAgICAvLyBDb2wgMTEgKEwpID0gQ3LDqWRpdCBmb3JtYXRpb24KICAgICAgICAgICAgICAgIC8vIENvbCA5IChKKSA9IENvbnRyYWludGVzCiAgICAgICAgICAgICAgICBjb25zdCBiYXNlID0gcGFyc2VGbG9hdChjWzEwXSkgfHwgMTYwNzsKICAgICAgICAgICAgICAgIGNvbnN0IGNyZWRpdCA9IHBhcnNlRmxvYXQoY1sxMV0pIHx8IDA7CiAgICAgICAgICAgICAgICBjb25zdCBuZXRBbm51YWwgPSAoYmFzZSAqIGZ0ZSkgLSBjcmVkaXQ7CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIERBVEEuYWdlbnRzLnB1c2goewogICAgICAgICAgICAgICAgICAgIG5hbWU6IGNbMF0sIGZ0ZTogZnRlLCBmdGVMYWJlbDogZnRlTGFiZWwsIGJhc2U6IGJhc2UsCiAgICAgICAgICAgICAgICAgICAgcmF3QW5udWFsOiBiYXNlICogZnRlLCBjcmVkaXQ6IGNyZWRpdCwgbmV0QW5udWFsOiBuZXRBbm51YWwsIAogICAgICAgICAgICAgICAgICAgIHdlZWtseVRhcmdldDogTWF0aC5tYXgoMCwgbmV0QW5udWFsIC8gMzkpLCBpbnRlcm5hdEhvdXJzOiAwLAogICAgICAgICAgICAgICAgICAgIGNvbnN0cmFpbnRzOiAoY1s5XSB8fCAiIikudHJpbSgpCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgICBzYXZlTG9jYWxTdG9yYWdlKCk7IAogICAgICAgICAgICByZWZyZXNoQWxsVUkoKTsKICAgICAgICB9OwogICAgICAgIHIucmVhZEFzQXJyYXlCdWZmZXIoZik7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIGNoZWNrWCh2KSB7IHJldHVybiB2ICYmIFN0cmluZyh2KS50b1VwcGVyQ2FzZSgpLnRyaW0oKSA9PT0gJ1gnOyB9CgogICAgLy8gLS0tIEFGRklDSEFHRSBJTkZPIElNUE9SVCAtLS0KICAgIGZ1bmN0aW9uIHJlbmRlckltcG9ydEluZm8oKSB7CiAgICAgICAgY29uc3QgYXJlYSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbXBvcnQtaW5mby1hcmVhJyk7CiAgICAgICAgaWYoIURBVEEucXVvdGl0ZXMgfHwgREFUQS5xdW90aXRlcy5sZW5ndGggPT09IDApIHsgYXJlYS5pbm5lckhUTUwgPSAnJzsgcmV0dXJuOyB9CiAgICAgICAgCiAgICAgICAgY29uc3QgcXVvdGl0ZUh0bWwgPSBEQVRBLnF1b3RpdGVzLm1hcChxID0+IGA8c3BhbiBjbGFzcz0icXVvdGl0ZS1pdGVtIj48c3Ryb25nPiR7cS5sYWJlbH08L3N0cm9uZz4gKGNvbC4ke3EuY29sdW1uICsgMX0pPC9zcGFuPmApLmpvaW4oJycpOwogICAgICAgIGFyZWEuaW5uZXJIVE1MID0gYAogICAgICAgICAgICA8ZGl2IGNsYXNzPSJpbXBvcnQtaW5mbyI+CiAgICAgICAgICAgICAgICA8aSBjbGFzcz0iZmFzIGZhLWluZm8tY2lyY2xlIiBzdHlsZT0iY29sb3I6dmFyKC0tc2Vjb25kYXJ5KSI+PC9pPgogICAgICAgICAgICAgICAgPHN0cm9uZz5GaWNoaWVyIGltcG9ydMOpPC9zdHJvbmc+IC0gJHtEQVRBLmFnZW50cy5sZW5ndGh9IGFnZW50KHMpIGNoYXJnw6kocykKICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InF1b3RpdGUtbGlzdCI+PHNwYW4gc3R5bGU9ImZvbnQtd2VpZ2h0OmJvbGQ7IG1hcmdpbi1yaWdodDoxMHB4OyI+UXVvdGl0w6lzIGTDqXRlY3TDqWVzIDo8L3NwYW4+JHtxdW90aXRlSHRtbH08L2Rpdj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgYDsKICAgIH0KCiAgICBmdW5jdGlvbiByZW5kZXJPdmVydmlldygpIHsKICAgICAgICBjb25zdCBjID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Rhc2hib2FyZC1hcmVhJyk7IAogICAgICAgIGMuaW5uZXJIVE1MID0gJyc7CiAgICAgICAgaWYoREFUQS5hZ2VudHMubGVuZ3RoID09PSAwKSB7IAogICAgICAgICAgICBjLmlubmVySFRNTCA9ICc8ZGl2IHN0eWxlPSJncmlkLWNvbHVtbjoxLy0xO3RleHQtYWxpZ246Y2VudGVyO3BhZGRpbmc6NTBweDtjb2xvcjojYWFhOyI+PGkgY2xhc3M9ImZhcyBmYS1mb2xkZXItb3BlbiIgc3R5bGU9ImZvbnQtc2l6ZTozcmVtOyBtYXJnaW4tYm90dG9tOjEwcHg7Ij48L2k+PGJyPkF1Y3VuZSBkb25uw6llLiBWZXVpbGxleiBpbXBvcnRlciB1biBmaWNoaWVyIEV4Y2VsIG91IHJlc3RhdXJlciB1bmUgc2F1dmVnYXJkZS48L2Rpdj4nOyAKICAgICAgICAgICAgcmV0dXJuOyAKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgREFUQS5hZ2VudHMuZm9yRWFjaChhID0+IHsKICAgICAgICAgICAgY29uc3Qgc3RhbmRhcmRRdW90aXRlcyA9IFsxLCAwLjgsIDAuNSwgMC4yNV07CiAgICAgICAgICAgIGNvbnN0IGlzU3RhbmRhcmQgPSBzdGFuZGFyZFF1b3RpdGVzLnNvbWUoc3EgPT4gTWF0aC5hYnMoc3EgLSBhLmZ0ZSkgPCAwLjAxKTsKICAgICAgICAgICAgY29uc3QgYmFkZ2VDbGFzcyA9IGlzU3RhbmRhcmQgPyAnYmFkZ2Utc3RhbmRhcmQnIDogJ2JhZGdlLWN1c3RvbSc7CiAgICAgICAgICAgIAogICAgICAgICAgICBjLmlubmVySFRNTCArPSBgPGRpdiBjbGFzcz0iYWVkLXN1bW1hcnktY2FyZCI+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJjYXJkLWhlYWRlciI+PHNwYW4gc3R5bGU9ImZvbnQtd2VpZ2h0OmJvbGQ7Y29sb3I6dmFyKC0tcHJpbWFyeSkiPiR7YS5uYW1lfTwvc3Bhbj48c3BhbiBjbGFzcz0iJHtiYWRnZUNsYXNzfSIgc3R5bGU9ImNvbG9yOndoaXRlO3BhZGRpbmc6MnB4IDhweDtib3JkZXItcmFkaXVzOjEwcHg7Zm9udC1zaXplOjAuOHJlbSI+JHthLmZ0ZUxhYmVsfTwvc3Bhbj48L2Rpdj4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImNhcmQtYm9keSI+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ic3RhdC1yb3ciPjxzcGFuPlF1b3RpdMOpPC9zcGFuPjxzcGFuPiR7KGEuZnRlICogMTAwKS50b0ZpeGVkKDApfSUgKCR7YS5mdGUudG9GaXhlZCgyKX0pPC9zcGFuPjwvZGl2PgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InN0YXQtcm93Ij48c3Bhbj5CYXNlIGFubnVlbGxlPC9zcGFuPjxzcGFuPiR7YS5iYXNlfWg8L3NwYW4+PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ic3RhdC1yb3ciPjxzcGFuPlRlbXBzIHByb3JhdMOpPC9zcGFuPjxzcGFuPiR7YS5yYXdBbm51YWwudG9GaXhlZCgxKX1oPC9zcGFuPjwvZGl2PgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InN0YXQtcm93Ij48c3Bhbj5DcsOpZGl0IGZvcm1hdGlvbjwvc3Bhbj48c3Bhbj4tJHthLmNyZWRpdH1oPC9zcGFuPjwvZGl2PgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InN0YXQtcm93Ij48c3Bhbj5OZXQgQW5udWVsPC9zcGFuPjxzcGFuPjxzdHJvbmc+JHthLm5ldEFubnVhbC50b0ZpeGVkKDEpfWg8L3N0cm9uZz48L3NwYW4+PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ic3RhdC1yb3ciIHN0eWxlPSJiYWNrZ3JvdW5kOiNmMGY5ZmY7Zm9udC13ZWlnaHQ6Ym9sZDtjb2xvcjojMjk4MGI5O21hcmdpbi10b3A6NXB4O3BhZGRpbmc6NXB4OyI+PHNwYW4+Q2libGUgSGViZG8gKMO3MzkpPC9zcGFuPjxzcGFuPiR7YS53ZWVrbHlUYXJnZXQudG9GaXhlZCgyKX1oPC9zcGFuPjwvZGl2PgogICAgICAgICAgICAgICAgICAgICR7YS5jb25zdHJhaW50cyA/IGA8ZGl2IGNsYXNzPSJjb25zdHJhaW50cy1ib3giPuKaoO+4jyAke2EuY29uc3RyYWludHN9PC9kaXY+YCA6ICcnfQogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDwvZGl2PmA7CiAgICAgICAgfSk7CiAgICB9CgogICAgLy8gLS0tIENPTkNFUFRJT04gLS0tCiAgICBmdW5jdGlvbiBwb3B1bGF0ZVNlbGVjdHMoKSB7CiAgICAgICAgY29uc3QgczEgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWVkLXNlbGVjdC1jb25jZXB0aW9uJyk7CiAgICAgICAgY29uc3QgczIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWVkLXNlbGVjdC1nZXN0aW9uJyk7CiAgICAgICAgY29uc3QgdjEgPSBzMS52YWx1ZSwgdjIgPSBzMi52YWx1ZTsKICAgICAgICBzMS5pbm5lckhUTUwgPSBzMi5pbm5lckhUTUwgPSAnPG9wdGlvbiB2YWx1ZT0iIj4tLSBTw6lsZWN0aW9ubmVyIC0tPC9vcHRpb24+JzsKICAgICAgICBEQVRBLmFnZW50cy5mb3JFYWNoKGEgPT4gewogICAgICAgICAgICBjb25zdCBvcHQgPSBgPG9wdGlvbiB2YWx1ZT0iJHthLm5hbWV9Ij4ke2EubmFtZX0gKCR7YS5mdGVMYWJlbH0pPC9vcHRpb24+YDsKICAgICAgICAgICAgczEuaW5uZXJIVE1MICs9IG9wdDsgczIuaW5uZXJIVE1MICs9IG9wdDsKICAgICAgICB9KTsKICAgICAgICBpZih2MSkgczEudmFsdWUgPSB2MTsgaWYodjIpIHMyLnZhbHVlID0gdjI7CiAgICB9CgogICAgZnVuY3Rpb24gY2hhbmdlQUVEKHZpZXcpIHsgCiAgICAgICAgaWYodmlldyA9PT0gJ2NvbmNlcHRpb24nKSB7IAogICAgICAgICAgICBjb25zdCBuYW1lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FlZC1zZWxlY3QtY29uY2VwdGlvbicpLnZhbHVlOwogICAgICAgICAgICBjb25zdCBhZ2VudCA9IERBVEEuYWdlbnRzLmZpbmQoYSA9PiBhLm5hbWUgPT09IG5hbWUpOwogICAgICAgICAgICBpZihhZ2VudCkgeyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW50ZXJuYXQtaG91cnMnKS52YWx1ZSA9IGFnZW50LmludGVybmF0SG91cnMgfHwgMDsgfQogICAgICAgICAgICByZW5kZXJUaW1ldGFibGUoKTsgdXBkYXRlU3RhdHNIZWFkZXIoKTsgCiAgICAgICAgfSBlbHNlIHsgdXBkYXRlR2VzdGlvblVJKCk7IH0gCiAgICB9CgogICAgZnVuY3Rpb24gc2V0VG9vbChuYW1lLCBjb2xvcikgewogICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5wYWxldHRlLWJ0bicpLmZvckVhY2goYiA9PiBiLmNsYXNzTGlzdC5yZW1vdmUoJ3NlbGVjdGVkJykpOwogICAgICAgIGlmKG5hbWUgIT09ICdnb21tZScpIGV2ZW50LnRhcmdldC5jbGFzc0xpc3QuYWRkKCdzZWxlY3RlZCcpOwogICAgICAgIENVUlJFTlRfVE9PTCA9IG5hbWUgPT09ICdnb21tZScgPyB7aXNFcmFzZXI6IHRydWV9IDoge25hbWU6IG5hbWUsIGNvbG9yOiBjb2xvciwgaXNFcmFzZXI6IGZhbHNlfTsKICAgIH0KCiAgICBmdW5jdGlvbiByZW5kZXJUaW1ldGFibGUoKSB7CiAgICAgICAgY29uc3QgbmFtZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhZWQtc2VsZWN0LWNvbmNlcHRpb24nKS52YWx1ZTsKICAgICAgICBjb25zdCB0YWJsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0aW1ldGFibGUnKTsKICAgICAgICBpZighbmFtZSkgeyB0YWJsZS5pbm5lckhUTUwgPSAnJzsgcmV0dXJuOyB9CiAgICAgICAgdGFibGUuaW5uZXJIVE1MID0gZ2VuZXJhdGVUYWJsZUhUTUwobmFtZSk7CiAgICAgICAgCiAgICAgICAgdGFibGUucXVlcnlTZWxlY3RvckFsbCgndGQ6bm90KC50aW1lLWNvbCknKS5mb3JFYWNoKHRkID0+IHsKICAgICAgICAgICAgdGQub25jbGljayA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgY29uc3QgdHIgPSB0aGlzLnBhcmVudE5vZGU7CiAgICAgICAgICAgICAgICBjb25zdCByb3dJbmRleCA9IEFycmF5LmZyb20odHIucGFyZW50Tm9kZS5jaGlsZHJlbikuaW5kZXhPZih0cik7CiAgICAgICAgICAgICAgICBjb25zdCBjb2xJbmRleCA9IEFycmF5LmZyb20odHIuY2hpbGRyZW4pLmluZGV4T2YodGhpcykgLSAxOyAKICAgICAgICAgICAgICAgIGlmKGNvbEluZGV4IDwgMCkgcmV0dXJuOwogICAgICAgICAgICAgICAgLy8gcm93SW5kZXggY29ycmVzcG9uZCDDoCBsJ2luZGV4IGR1IHNsb3QKICAgICAgICAgICAgICAgIGNvbnN0IGRheSA9IERBWVNbY29sSW5kZXhdOwogICAgICAgICAgICAgICAgY2xpY2tDZWxsKGRheSwgcm93SW5kZXgpOwogICAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICB9CgogICAgZnVuY3Rpb24gY2xpY2tDZWxsKGRheSwgc2xvdEluZGV4KSB7CiAgICAgICAgY29uc3QgbmFtZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhZWQtc2VsZWN0LWNvbmNlcHRpb24nKS52YWx1ZTsKICAgICAgICBpZighbmFtZSkgcmV0dXJuOwogICAgICAgIGNvbnN0IGFnZW50ID0gREFUQS5hZ2VudHMuZmluZChhID0+IGEubmFtZSA9PT0gbmFtZSk7CiAgICAgICAgaWYoYWdlbnQgJiYgYWdlbnQuY29uc3RyYWludHMudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhkYXkudG9Mb3dlckNhc2UoKSkpIHJldHVybjsKCiAgICAgICAgaWYoIURBVEEuc2NoZWR1bGVzW25hbWVdKSBEQVRBLnNjaGVkdWxlc1tuYW1lXSA9IHt9OwogICAgICAgIGNvbnN0IGtleSA9IGAke2RheX0tJHtzbG90SW5kZXh9YDsgLy8gQ2zDqSBiYXPDqWUgc3VyIGwnaW5kZXggZHUgY3LDqW5lYXUKCiAgICAgICAgaWYoQ1VSUkVOVF9UT09MLmlzRXJhc2VyKSBkZWxldGUgREFUQS5zY2hlZHVsZXNbbmFtZV1ba2V5XTsKICAgICAgICBlbHNlIERBVEEuc2NoZWR1bGVzW25hbWVdW2tleV0gPSB7IHRvb2w6IENVUlJFTlRfVE9PTC5uYW1lLCBjb2xvcjogQ1VSUkVOVF9UT09MLmNvbG9yIH07CiAgICAgICAgCiAgICAgICAgc2F2ZUxvY2FsU3RvcmFnZSgpOwogICAgICAgIHJlbmRlclRpbWV0YWJsZSgpOwogICAgICAgIHVwZGF0ZVN0YXRzSGVhZGVyKCk7CiAgICB9CgogICAgZnVuY3Rpb24gdXBkYXRlU3RhdHNIZWFkZXIoKSB7CiAgICAgICAgY29uc3QgbmFtZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhZWQtc2VsZWN0LWNvbmNlcHRpb24nKS52YWx1ZTsKICAgICAgICBjb25zdCBlbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdoZWFkZXItc3RhdHMnKTsKICAgICAgICBpZighbmFtZSkgeyBlbC5pbm5lclRleHQgPSAiMGggLyAwaCI7IHJldHVybjsgfQogICAgICAgIAogICAgICAgIGNvbnN0IGFnZW50ID0gREFUQS5hZ2VudHMuZmluZChhID0+IGEubmFtZSA9PT0gbmFtZSk7CiAgICAgICAgY29uc3QgaW50ZXJuYXQgPSBhZ2VudC5pbnRlcm5hdEhvdXJzIHx8IDA7CiAgICAgICAgCiAgICAgICAgLy8gQ2FsY3VsIGR1IHRlbXBzIHBsYW5pZmnDqSBiYXPDqSBzdXIgbGEgZHVyw6llIHLDqWVsbGUgZGVzIHNsb3RzCiAgICAgICAgbGV0IHRvdGFsTWludXRlcyA9IDA7CiAgICAgICAgY29uc3Qgc2xvdHMgPSAoREFUQS5jb25maWcuc2xvdHMgJiYgREFUQS5jb25maWcuc2xvdHMubGVuZ3RoID4gMCkgPyBEQVRBLmNvbmZpZy5zbG90cyA6IERFRkFVTFRfU0xPVFM7CiAgICAgICAgY29uc3Qgc2NoZWQgPSBEQVRBLnNjaGVkdWxlc1tuYW1lXSB8fCB7fTsKCiAgICAgICAgREFZUy5mb3JFYWNoKGRheSA9PiB7CiAgICAgICAgICAgIHNsb3RzLmZvckVhY2goKHNsb3QsIGluZGV4KSA9PiB7CiAgICAgICAgICAgICAgICBjb25zdCBrZXkgPSBgJHtkYXl9LSR7aW5kZXh9YDsKICAgICAgICAgICAgICAgIGlmKHNjaGVkW2tleV0pIHsKICAgICAgICAgICAgICAgICAgICAvLyBDYWxjdWwgZHVyw6llIHNsb3QKICAgICAgICAgICAgICAgICAgICBjb25zdCBbaDEsIG0xXSA9IHNsb3Quc3RhcnQuc3BsaXQoJzonKS5tYXAoTnVtYmVyKTsKICAgICAgICAgICAgICAgICAgICBjb25zdCBbaDIsIG0yXSA9IHNsb3QuZW5kLnNwbGl0KCc6JykubWFwKE51bWJlcik7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgZHVyYXRpb24gPSAoaDIgKiA2MCArIG0yKSAtIChoMSAqIDYwICsgbTEpOwogICAgICAgICAgICAgICAgICAgIGlmKGR1cmF0aW9uID4gMCkgdG90YWxNaW51dGVzICs9IGR1cmF0aW9uOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9KTsKCiAgICAgICAgY29uc3QgZ3JpZEhvdXJzID0gdG90YWxNaW51dGVzIC8gNjA7CiAgICAgICAgY29uc3QgdG90YWxQbGFubmVkID0gZ3JpZEhvdXJzICsgaW50ZXJuYXQ7CiAgICAgICAgY29uc3QgdGFyZ2V0ID0gYWdlbnQud2Vla2x5VGFyZ2V0OwogICAgICAgIGNvbnN0IGRpZmYgPSB0b3RhbFBsYW5uZWQgLSB0YXJnZXQ7CiAgICAgICAgCiAgICAgICAgZWwuaW5uZXJIVE1MID0gYENpYmxlOiAke3RhcmdldC50b0ZpeGVkKDIpfWggfCBQbGFuaWZpw6k6ICR7dG90YWxQbGFubmVkLnRvRml4ZWQoMil9aCA8c21hbGw+KGRvbnQgJHtpbnRlcm5hdH1oIEludC4pPC9zbWFsbD4gfCA8c3BhbiBzdHlsZT0iY29sb3I6JHtNYXRoLmFicyhkaWZmKSA8IDEgPyAnZ3JlZW4nIDogJ3JlZCd9Ij5EaWZmOiAke2RpZmYgPiAwID8gJysnIDogJyd9JHtkaWZmLnRvRml4ZWQoMil9aDwvc3Bhbj5gOwogICAgfQoKICAgIC8vIC0tLSBHRVNUSU9OIC0tLQogICAgZnVuY3Rpb24gYWRkQWRqdXN0bWVudCgpIHsKICAgICAgICBjb25zdCBuYW1lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FlZC1zZWxlY3QtZ2VzdGlvbicpLnZhbHVlOwogICAgICAgIGlmKCFuYW1lKSByZXR1cm4gYWxlcnQoIlPDqWxlY3Rpb25uZXogdW4gYWdlbnQiKTsKICAgICAgICBjb25zdCB0eXBlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Fkai10eXBlJykudmFsdWU7CiAgICAgICAgY29uc3QgYW10ID0gcGFyc2VGbG9hdChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWRqLWFtb3VudCcpLnZhbHVlKTsKICAgICAgICBjb25zdCByID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Fkai1yZWFzb24nKS52YWx1ZTsKICAgICAgICBpZighYW10IHx8ICFyKSByZXR1cm4gYWxlcnQoIkluZm9zIG1hbnF1YW50ZXMiKTsKICAgICAgICBpZighREFUQS5hZGp1c3RtZW50c1tuYW1lXSkgREFUQS5hZGp1c3RtZW50c1tuYW1lXSA9IFtdOwogICAgICAgIERBVEEuYWRqdXN0bWVudHNbbmFtZV0ucHVzaCh7aWQ6IERhdGUubm93KCksIGRhdGU6IG5ldyBEYXRlKCkudG9Mb2NhbGVEYXRlU3RyaW5nKCksIHR5cGUsIGFtb3VudDogYW10LCByZWFzb246IHJ9KTsKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWRqLWFtb3VudCcpLnZhbHVlID0gJyc7IAogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhZGotcmVhc29uJykudmFsdWUgPSAnJzsKICAgICAgICBzYXZlTG9jYWxTdG9yYWdlKCk7IHVwZGF0ZUdlc3Rpb25VSSgpOwogICAgfQogICAgCiAgICBmdW5jdGlvbiB1cGRhdGVHZXN0aW9uVUkoKSB7CiAgICAgICAgY29uc3QgbmFtZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhZWQtc2VsZWN0LWdlc3Rpb24nKS52YWx1ZTsKICAgICAgICBjb25zdCB0YiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdoaXN0b3J5LWJvZHknKTsKICAgICAgICBjb25zdCBiYWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYmFsYW5jZS1kaXNwbGF5Jyk7CiAgICAgICAgY29uc3QgdGFyZ2V0QmFsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FubnVhbC10YXJnZXQtZGlzcGxheScpOwogICAgICAgIAogICAgICAgIHRiLmlubmVySFRNTCA9ICcnOyBiYWwuaW5uZXJUZXh0ID0gJzBoJzsgdGFyZ2V0QmFsLmlubmVyVGV4dCA9ICcwaCc7CiAgICAgICAgaWYoIW5hbWUpIHJldHVybjsKICAgICAgICAKICAgICAgICBjb25zdCBhZ2VudCA9IERBVEEuYWdlbnRzLmZpbmQoYSA9PiBhLm5hbWUgPT09IG5hbWUpOwogICAgICAgIGlmKGFnZW50ICYmIGFnZW50Lm5ldEFubnVhbCkgdGFyZ2V0QmFsLmlubmVyVGV4dCA9IGFnZW50Lm5ldEFubnVhbC50b0ZpeGVkKDEpICsgJ2gnOwoKICAgICAgICBsZXQgYiA9IDA7CiAgICAgICAgKERBVEEuYWRqdXN0bWVudHNbbmFtZV0gfHwgW10pLmZvckVhY2goKGEsIGkpID0+IHsKICAgICAgICAgICAgY29uc3QgcCA9IGEudHlwZSA9PT0gJ3BsdXMnOyBiICs9IHAgPyBhLmFtb3VudCA6IC1hLmFtb3VudDsKICAgICAgICAgICAgdGIuaW5uZXJIVE1MICs9IGA8dHI+PHRkPiR7YS5kYXRlfTwvdGQ+PHRkIHN0eWxlPSJjb2xvcjoke3AgPyAnZ3JlZW4nIDogJ3JlZCd9Ij4ke3AgPyAnKycgOiAnLSd9PC90ZD48dGQ+JHthLnJlYXNvbn08L3RkPjx0ZD4ke2EuYW1vdW50fWg8L3RkPjx0ZD48aSBjbGFzcz0iZmFzIGZhLXRyYXNoIiBvbmNsaWNrPSJkZWxBZGooJyR7bmFtZX0nLCR7aX0pIiBzdHlsZT0iY3Vyc29yOnBvaW50ZXIiPjwvaT48L3RkPjwvdHI+YDsKICAgICAgICB9KTsKICAgICAgICBiYWwuaW5uZXJUZXh0ID0gKGIgPiAwID8gJysnIDogJycpICsgYiArICdoJzsgCiAgICAgICAgYmFsLnN0eWxlLmNvbG9yID0gYiA+PSAwID8gJ3doaXRlJyA6ICcjZmFiMWEwJzsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gZGVsQWRqKG4sIGkpIHsgREFUQS5hZGp1c3RtZW50c1tuXS5zcGxpY2UoaSwgMSk7IHNhdmVMb2NhbFN0b3JhZ2UoKTsgdXBkYXRlR2VzdGlvblVJKCk7IH0KCjwvc2NyaXB0PgoKPHNjcmlwdD4Kd2luZG93LnBhcmVudC5wb3N0TWVzc2FnZSh7IHR5cGU6ICdwaWxvdGUtbW9kdWxlLXJlYWR5JywgbW9kdWxlOiAnYWVkJyB9LCAnKicpOwo8L3NjcmlwdD4KCgo8c2NyaXB0Pgpkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgZnVuY3Rpb24oZSkgewogICAgaWYgKCFlLmN0cmxLZXkgfHwgZS5zaGlmdEtleSB8fCBlLmFsdEtleSB8fCBlLm1ldGFLZXkpIHJldHVybjsKICAgIHZhciBrZXkgPSBlLmtleS50b0xvd2VyQ2FzZSgpOwogICAgaWYgKFsncCcsJ2UnLCdvJywnYScsJ2QnXS5pbmRleE9mKGtleSkgPj0gMCkgewogICAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgICB3aW5kb3cucGFyZW50LnBvc3RNZXNzYWdlKHt0eXBlOidwaWxvdGUtc2hvcnRjdXQnLCBrZXk6a2V5fSwgJyonKTsKICAgIH0KfSk7Cjwvc2NyaXB0Pgo8L2JvZHk+CjwvaHRtbD4=","bibase":"PCFET0NUWVBFIGh0bWw+CjxodG1sIGxhbmc9ImZyIj4KPGhlYWQ+CiAgICA8bWV0YSBjaGFyc2V0PSJVVEYtOCI+CiAgICA8bWV0YSBuYW1lPSJ2aWV3cG9ydCIgY29udGVudD0id2lkdGg9ZGV2aWNlLXdpZHRoLCBpbml0aWFsLXNjYWxlPTEuMCI+CiAgICA8dGl0bGU+QnVsbGV0aW4gZCdpbmZvcm1hdGlvbjwvdGl0bGU+CiAgICA8IS0tIFRhaWx3aW5kIENTUyAtLT4KICAgIDxzY3JpcHQgc3JjPSJodHRwczovL2Nkbi50YWlsd2luZGNzcy5jb20iPjwvc2NyaXB0PgogICAgPCEtLSBIVE1MMlBERiAtLT4KICAgIDxzY3JpcHQgc3JjPSJodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9odG1sMnBkZi5qcy8wLjEwLjEvaHRtbDJwZGYuYnVuZGxlLm1pbi5qcyI+PC9zY3JpcHQ+CiAgICA8IS0tIEV4cG9ydCBXb3JkIChodG1sLWRvY3gtanMpICYgRmlsZVNhdmVyIC0tPgogICAgPHNjcmlwdCBzcmM9Imh0dHBzOi8vdW5wa2cuY29tL2h0bWwtZG9jeC1qcy9kaXN0L2h0bWwtZG9jeC5qcyI+PC9zY3JpcHQ+CiAgICA8c2NyaXB0IHNyYz0iaHR0cHM6Ly9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvRmlsZVNhdmVyLmpzLzIuMC41L0ZpbGVTYXZlci5taW4uanMiPjwvc2NyaXB0PgoKICAgIDwhLS0gUXVpbGwgRWRpdG9yIChXWVNJV1lHKSAtLT4KICAgIDxsaW5rIGhyZWY9Imh0dHBzOi8vY2RuLnF1aWxsanMuY29tLzEuMy42L3F1aWxsLnNub3cuY3NzIiByZWw9InN0eWxlc2hlZXQiPgogICAgPHNjcmlwdCBzcmM9Imh0dHBzOi8vY2RuLnF1aWxsanMuY29tLzEuMy42L3F1aWxsLm1pbi5qcyI+PC9zY3JpcHQ+CiAgICAKICAgIDwhLS0gRm9udCAtLT4KICAgIDxzdHlsZT4KICAgICAgICAvKiBBcHRvcyBmb250IChuYXRpdmUpICovCiAgICAgICAgCiAgICAgICAgYm9keSB7IGZvbnQtZmFtaWx5OiAnQXB0b3MnLCAnQ2FsaWJyaScsICdUcmVidWNoZXQgTVMnLCBBcmlhbCwgc2Fucy1zZXJpZjsgfQogICAgICAgIAogICAgICAgIC8qIEZvbnQgQ2xhc3NlcyAqLwogICAgICAgIC5mb250LWludGVyIHsgZm9udC1mYW1pbHk6ICdBcHRvcycsICdDYWxpYnJpJywgJ1RyZWJ1Y2hldCBNUycsIEFyaWFsLCBzYW5zLXNlcmlmOyB9CiAgICAgICAgLmZvbnQtc2VyaWYgeyBmb250LWZhbWlseTogJ01lcnJpd2VhdGhlcicsIHNlcmlmOyB9CiAgICAgICAgLmZvbnQtbW9ubyB7IGZvbnQtZmFtaWx5OiAnUm9ib3RvIE1vbm8nLCBtb25vc3BhY2U7IH0KCiAgICAgICAgLyogU2Nyb2xsYmFyIGN1c3RvbWlzYXRpb24gKi8KICAgICAgICA6Oi13ZWJraXQtc2Nyb2xsYmFyIHsgd2lkdGg6IDZweDsgfQogICAgICAgIDo6LXdlYmtpdC1zY3JvbGxiYXItdHJhY2sgeyBiYWNrZ3JvdW5kOiAjZjFmNWY5OyB9CiAgICAgICAgOjotd2Via2l0LXNjcm9sbGJhci10aHVtYiB7IGJhY2tncm91bmQ6ICNjYmQ1ZTE7IGJvcmRlci1yYWRpdXM6IDNweDsgfQogICAgICAgIDo6LXdlYmtpdC1zY3JvbGxiYXItdGh1bWI6aG92ZXIgeyBiYWNrZ3JvdW5kOiAjOTRhM2I4OyB9CgogICAgICAgIC8qIEE0IFBhcGVyIFN0eWxlIGZvciBQcmV2aWV3ICovCiAgICAgICAgLmE0LXBhZ2UgewogICAgICAgICAgICB3aWR0aDogMjEwbW07CiAgICAgICAgICAgIG1pbi1oZWlnaHQ6IDI4MG1tOwogICAgICAgICAgICBwYWRkaW5nOiAxNW1tOwogICAgICAgICAgICBtYXJnaW46IDAgYXV0bzsKICAgICAgICAgICAgYmFja2dyb3VuZDogd2hpdGU7CiAgICAgICAgICAgIGJveC1zaGFkb3c6IDAgMCAxNXB4IHJnYmEoMCwwLDAsMC4xKTsKICAgICAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlOwogICAgICAgICAgICBmb250LXNpemU6IDExcHQ7CiAgICAgICAgICAgIGxpbmUtaGVpZ2h0OiAxLjQ7CiAgICAgICAgICAgIGNvbG9yOiAjMWYyOTM3OwogICAgICAgICAgICBkaXNwbGF5OiBmbGV4OwogICAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uOwogICAgICAgIH0KCiAgICAgICAgLnBkZi1mb290ZXItZml4ZWQgewogICAgICAgICAgICBtYXJnaW4tdG9wOiBhdXRvOwogICAgICAgICAgICBwYWRkaW5nLXRvcDogMTBweDsKICAgICAgICAgICAgYm9yZGVyLXRvcDogMXB4IHNvbGlkICNlMmU4ZjA7CiAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjsKICAgICAgICAgICAgZm9udC1zaXplOiA5cHg7CiAgICAgICAgICAgIGNvbG9yOiAjOTRhM2I4OwogICAgICAgIH0KCiAgICAgICAgLyogU3R5bGVzIHNww6ljaWZpcXVlcyBwb3VyIGxlIGNvbnRlbnUgcmljaGUgKFF1aWxsL0hUTUwpIGRhbnMgbGUgUERGIGV0IGxhIFNpZGViYXIgKi8KICAgICAgICAucmljaC10ZXh0LWNvbnRlbnQgdWwgeyBsaXN0LXN0eWxlLXR5cGU6IGRpc2M7IG1hcmdpbi1sZWZ0OiAxLjVlbTsgbWFyZ2luLWJvdHRvbTogMC41ZW07IH0KICAgICAgICAucmljaC10ZXh0LWNvbnRlbnQgb2wgeyBsaXN0LXN0eWxlLXR5cGU6IGRlY2ltYWw7IG1hcmdpbi1sZWZ0OiAxLjVlbTsgbWFyZ2luLWJvdHRvbTogMC41ZW07IH0KICAgICAgICAucmljaC10ZXh0LWNvbnRlbnQgcCB7IG1hcmdpbi1ib3R0b206IDAuNWVtOyB9CiAgICAgICAgLnJpY2gtdGV4dC1jb250ZW50IHN0cm9uZyB7IGZvbnQtd2VpZ2h0OiA3MDA7IH0KICAgICAgICAucmljaC10ZXh0LWNvbnRlbnQgZW0geyBmb250LXN0eWxlOiBpdGFsaWM7IH0KICAgICAgICAucmljaC10ZXh0LWNvbnRlbnQgdSB7IHRleHQtZGVjb3JhdGlvbjogdW5kZXJsaW5lOyB9CiAgICAgICAgCiAgICAgICAgLyogU3R5bGVzIHBvdXIgbGVzIHRhaWxsZXMgZGUgcG9saWNlIFF1aWxsIGRhbnMgbGUgUERGL0FwZXLDp3UgKi8KICAgICAgICAucmljaC10ZXh0LWNvbnRlbnQgLnFsLXNpemUtc21hbGwgeyBmb250LXNpemU6IDAuNzVlbTsgfQogICAgICAgIC5yaWNoLXRleHQtY29udGVudCAucWwtc2l6ZS1sYXJnZSB7IGZvbnQtc2l6ZTogMS41ZW07IH0KICAgICAgICAucmljaC10ZXh0LWNvbnRlbnQgLnFsLXNpemUtaHVnZSB7IGZvbnQtc2l6ZTogMi41ZW07IH0KICAgICAgICAKICAgICAgICAvKiBOZXR0b3lhZ2UgZGVzIG1hcmdlcyBkdSBkZXJuaWVyIMOpbMOpbWVudCBwb3VyIMOpdml0ZXIgbGVzIGVzcGFjZXMgdmlkZXMgKi8KICAgICAgICAucmljaC10ZXh0LWNvbnRlbnQgPiAqOmxhc3QtY2hpbGQgeyBtYXJnaW4tYm90dG9tOiAwOyB9CgogICAgICAgIC8qIFByaW50IHN0eWxlcyAqLwogICAgICAgIEBtZWRpYSBwcmludCB7CiAgICAgICAgICAgIGJvZHkgKiB7IHZpc2liaWxpdHk6IGhpZGRlbjsgfQogICAgICAgICAgICAjcGRmLXByZXZpZXctY29udGFpbmVyLCAjcGRmLXByZXZpZXctY29udGFpbmVyICogeyB2aXNpYmlsaXR5OiB2aXNpYmxlOyB9CiAgICAgICAgICAgICNwZGYtcHJldmlldy1jb250YWluZXIgeyBwb3NpdGlvbjogYWJzb2x1dGU7IGxlZnQ6IDA7IHRvcDogMDsgbWFyZ2luOiAwOyBib3gtc2hhZG93OiBub25lOyB9CiAgICAgICAgICAgIC5uby1wcmludCB7IGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDsgfQogICAgICAgIH0KCiAgICAgICAgLmJpLWhlYWRlciB7CiAgICAgICAgICAgIGJvcmRlci1ib3R0b206IDJweCBzb2xpZCAjMWQ0ZWQ4OwogICAgICAgICAgICBwYWRkaW5nLWJvdHRvbTogMTBweDsKICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogMjBweDsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgLyogUXVpbGwgQ3VzdG9tIE92ZXJyaWRlcyB0byBtYXRjaCB0aGVtZSAqLwogICAgICAgIC5xbC10b29sYmFyLnFsLXNub3cgewogICAgICAgICAgICBib3JkZXI6IG5vbmU7CiAgICAgICAgICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjZjFmNWY5OwogICAgICAgICAgICBiYWNrZ3JvdW5kOiAjZjhmYWZjOwogICAgICAgICAgICBib3JkZXItcmFkaXVzOiAwLjc1cmVtIDAuNzVyZW0gMCAwOwogICAgICAgICAgICBwYWRkaW5nOiA4cHg7CiAgICAgICAgfQogICAgICAgIC5xbC1jb250YWluZXIucWwtc25vdyB7CiAgICAgICAgICAgIGJvcmRlcjogbm9uZTsKICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogMCAwIDAuNzVyZW0gMC43NXJlbTsKICAgICAgICAgICAgZm9udC1mYW1pbHk6ICdBcHRvcycsICdDYWxpYnJpJywgJ1RyZWJ1Y2hldCBNUycsIEFyaWFsLCBzYW5zLXNlcmlmOwogICAgICAgICAgICBmb250LXNpemU6IDAuODc1cmVtOyAvKiB0ZXh0LXNtICovCiAgICAgICAgfQogICAgICAgIC5xbC1lZGl0b3IgewogICAgICAgICAgICBtaW4taGVpZ2h0OiAxMjBweDsKICAgICAgICAgICAgbWF4LWhlaWdodDogMjUwcHg7IC8qIFBhcyBkJ2FncmFuZGlzc2VtZW50IGludXRpbGUgKi8KICAgICAgICAgICAgcGFkZGluZzogMTJweCAxNnB4OwogICAgICAgIH0KICAgICAgICAucWwtZWRpdG9yLnFsLWJsYW5rOjpiZWZvcmUgewogICAgICAgICAgICBmb250LXN0eWxlOiBub3JtYWw7CiAgICAgICAgICAgIGNvbG9yOiAjOTRhM2I4OwogICAgICAgICAgICBmb250LXNpemU6IDAuODc1cmVtOwogICAgICAgIH0KICAgICAgICAKICAgICAgICAvKiBDb250YWluZXIgd3JhcHBlciBmb3IgUXVpbGwgYm9yZGVyICovCiAgICAgICAgLnF1aWxsLXdyYXBwZXIgewogICAgICAgICAgICBib3JkZXI6IDJweCBzb2xpZCAjZjFmNWY5OwogICAgICAgICAgICBib3JkZXItcmFkaXVzOiAwLjc1cmVtOwogICAgICAgICAgICB0cmFuc2l0aW9uOiBib3JkZXItY29sb3IgMC4yczsKICAgICAgICAgICAgYmFja2dyb3VuZDogd2hpdGU7CiAgICAgICAgfQogICAgICAgIC5xdWlsbC13cmFwcGVyOmZvY3VzLXdpdGhpbiB7CiAgICAgICAgICAgIGJvcmRlci1jb2xvcjogI2ZiOTIzYzsgLyogb3JhbmdlLTQwMCAqLwogICAgICAgIH0KCiAgICAgICAgLyogQXV0byBzYXZlIGluZGljYXRvciBhbmltYXRpb24gKi8KICAgICAgICBAa2V5ZnJhbWVzIGZhZGUtaW4tb3V0IHsKICAgICAgICAgICAgMCUgeyBvcGFjaXR5OiAwOyB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoNXB4KTsgfQogICAgICAgICAgICAyMCUgeyBvcGFjaXR5OiAxOyB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoMCk7IH0KICAgICAgICAgICAgODAlIHsgb3BhY2l0eTogMTsgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKDApOyB9CiAgICAgICAgICAgIDEwMCUgeyBvcGFjaXR5OiAwOyB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLTVweCk7IH0KICAgICAgICB9CiAgICAgICAgLnNhdmUtaW5kaWNhdG9yIHsKICAgICAgICAgICAgYW5pbWF0aW9uOiBmYWRlLWluLW91dCAycyBlYXNlLWluLW91dCBmb3J3YXJkczsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgLyogTGF5b3V0IHNwZWNpZmljIHN0eWxlcyAqLwogICAgICAgIC5sYXlvdXQtY2xhc3NpYyAuaGVhZGVyLWJsb2NrIHsgYm9yZGVyLWJvdHRvbS13aWR0aDogNHB4OyBwYWRkaW5nLWJvdHRvbTogMXJlbTsgbWFyZ2luLWJvdHRvbTogMnJlbTsgfQogICAgICAgIC5sYXlvdXQtbW9kZXJuIC5oZWFkZXItYmxvY2sgeyBib3JkZXItYm90dG9tLXdpZHRoOiAxcHg7IHBhZGRpbmctYm90dG9tOiAxLjVyZW07IG1hcmdpbi1ib3R0b206IDJyZW07IHRleHQtYWxpZ246IGNlbnRlcjsgfQogICAgICAgIC5sYXlvdXQtYmFubmVyIC5oZWFkZXItYmxvY2sgeyBtYXJnaW4tYm90dG9tOiAycmVtOyBib3JkZXItcmFkaXVzOiAwLjc1cmVtOyBvdmVyZmxvdzogaGlkZGVuOyBib3gtc2hhZG93OiAwIDRweCA2cHggLTFweCByZ2JhKDAsIDAsIDAsIDAuMSk7IH0KICAgIDwvc3R5bGU+CjwvaGVhZD4KPGJvZHkgY2xhc3M9ImJnLXNsYXRlLTEwMCB0ZXh0LXNsYXRlLTkwMCBoLXNjcmVlbiBvdmVyZmxvdy1oaWRkZW4gZmxleCBmbGV4LWNvbCI+CgogICAgPCEtLSBJQ09OUyAtLT4KICAgIDxzdmcgc3R5bGU9ImRpc3BsYXk6IG5vbmU7Ij4KICAgICAgICA8c3ltYm9sIGlkPSJpY29uLXNldHRpbmdzIiB2aWV3Qm94PSIwIDAgMjQgMjQiIGZpbGw9Im5vbmUiIHN0cm9rZT0iY3VycmVudENvbG9yIiBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCI+PHBhdGggZD0iTTEyLjIyIDJoLS40NGEyIDIgMCAwIDAtMiAydi4xOGEyIDIgMCAwIDEtMSAxLjczbC0uNDMuMjVhMiAyIDAgMCAxLTIgMGwtLjE1LS4wOGEyIDIgMCAwIDAtMi43My43M2wtLjIyLjM4YTIgMiAwIDAgMCAuNzMgMi43M2wuMTUuMWEyIDIgMCAwIDEgMSAxLjcydi41MWEyIDIgMCAwIDEtMSAxLjc0bC0uMTUuMDlhMiAyIDAgMCAwLS43MyAyLjczbC4yMi4zOGEyIDIgMCAwIDAgMi43My43M2wuMTUtLjA4YTIgMiAwIDAgMSAyIDBsLjQzLjI1YTIgMiAwIDAgMSAxIDEuNzNWMjBhMiAyIDAgMCAwIDIgMmguNDRhMiAyIDAgMCAwIDItMnYtLjE4YTIgMiAwIDAgMSAxLTEuNzNsLjQzLS4yNWEyIDIgMCAwIDEgMiAwbC4xNS4wOGEyIDIgMCAwIDAgMi43My0uNzNsLjIyLS4zOWEyIDIgMCAwIDAtLjczLTIuNzNsLS4xNS0uMDlhMiAyIDAgMCAxLTEtMS43NHYtLjQ3YTIgMiAwIDAgMSAxLTEuNzRsLjE1LS4wOWEyIDIgMCAwIDAgLjczLTIuNzNsLS4yMi0uMzlhMiAyIDAgMCAwLTIuNzMtLjczbC0uMTUuMDhhMiAyIDAgMCAxLTIgMGwtLjQzLS4yNWEyIDIgMCAwIDEtMS0xLjczVjRhMiAyIDAgMCAwLTItMnoiLz48Y2lyY2xlIGN4PSIxMiIgY3k9IjEyIiByPSIzIi8+PC9zeW1ib2w+CiAgICAgICAgPHN5bWJvbCBpZD0iaWNvbi10cmFzaCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiPjxwb2x5bGluZSBwb2ludHM9IjMgNiA1IDYgMjEgNiIvPjxwYXRoIGQ9Ik0xOSA2djE0YTIgMiAwIDAgMS0yIDJIN2EyIDIgMCAwIDEtMi0yVjZtMyAwVjRhMiAyIDAgMCAxIDItMmg0YTIgMiAwIDAgMSAyIDJ2MiIvPjxsaW5lIHgxPSIxMCIgeTE9IjExIiB4Mj0iMTAiIHkyPSIxNyIvPjxsaW5lIHgxPSIxNCIgeTE9IjExIiB4Mj0iMTQiIHkyPSIxNyIvPjwvc3ltYm9sPgogICAgICAgIDxzeW1ib2wgaWQ9Imljb24tZWRpdCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiPjxwYXRoIGQ9Ik0xMSA0SDRhMiAyIDAgMCAwLTIgMnYxNGEyIDIgMCAwIDAgMiAyaDE0YTIgMiAwIDAgMCAyLTJ2LTciLz48cGF0aCBkPSJNMTguNSAyLjVhMi4xMjEgMi4xMjEgMCAwIDEgMyAzTDEyIDE1bC00IDEgMS00IDkuNS05LjV6Ii8+PC9zeW1ib2w+CiAgICAgICAgPHN5bWJvbCBpZD0iaWNvbi1kb3dubG9hZCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiPjxwYXRoIGQ9Ik0yMSAxNXY0YTIgMiAwIDAgMS0yIDJINWEyIDIgMCAwIDEtMi0ydi00Ii8+PHBvbHlsaW5lIHBvaW50cz0iNyAxMCAxMiAxNSAxNyAxMCIvPjxsaW5lIHgxPSIxMiIgeTE9IjE1IiB4Mj0iMTIiIHkyPSIzIi8+PC9zeW1ib2w+CiAgICAgICAgPHN5bWJvbCBpZD0iaWNvbi1hcnJvdy11cCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiPjxsaW5lIHgxPSIxMiIgeTE9IjE5IiB4Mj0iMTIiIHkyPSI1Ij48L2xpbmU+PHBvbHlsaW5lIHBvaW50cz0iNSAxMiAxMiA1IDE5IDEyIj48L3BvbHlsaW5lPjwvc3ltYm9sPgogICAgICAgIDxzeW1ib2wgaWQ9Imljb24tYXJyb3ctZG93biIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiPjxsaW5lIHgxPSIxMiIgeTE9IjUiIHgyPSIxMiIgeTI9IjE5Ij48L2xpbmU+PHBvbHlsaW5lIHBvaW50cz0iMTkgMTIgMTIgMTkgNSAxMiI+PC9wb2x5bGluZT48L3N5bWJvbD4KICAgICAgICA8c3ltYm9sIGlkPSJpY29uLWxpc3QiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJjdXJyZW50Q29sb3IiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIj48bGluZSB4MT0iOCIgeTE9IjYiIHgyPSIyMSIgeTI9IjYiPjwvbGluZT48bGluZSB4MT0iOCIgeTE9IjEyIiB4Mj0iMjEiIHkyPSIxMiI+PC9saW5lPjxsaW5lIHgxPSI4IiB5MT0iMTgiIHgyPSIyMSIgeTI9IjE4Ij48L2xpbmU+PGxpbmUgeDE9IjMiIHkxPSI2IiB4Mj0iMy4wMSIgeTI9IjYiPjwvbGluZT48bGluZSB4MT0iMyIgeTE9IjEyIiB4Mj0iMy4wMSIgeTI9IjEyIj48L2xpbmU+PGxpbmUgeDE9IjMiIHkxPSIxOCIgeDI9IjMuMDEiIHkyPSIxOCI+PC9saW5lPjwvc3ltYm9sPgogICAgICAgIDxzeW1ib2wgaWQ9Imljb24td29yZCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiPjxwYXRoIGQ9Ik0xNCAySDZhMiAyIDAgMCAwLTIgMnYxNmEyIDIgMCAwIDAgMiAyaDEyYTIgMiAwIDAgMCAyLTJWOHoiPjwvcGF0aD48cG9seWxpbmUgcG9pbnRzPSIxNCAyIDE0IDggMjAgOCI+PC9wb2x5bGluZT48bGluZSB4MT0iMTYiIHkxPSIxMyIgeDI9IjgiIHkyPSIxMyI+PC9saW5lPjxsaW5lIHgxPSIxNiIgeTE9IjE3IiB4Mj0iOCIgeTI9IjE3Ij48L2xpbmU+PHBvbHlsaW5lIHBvaW50cz0iMTAgOSA5IDkgOCA5Ij48L3BvbHlsaW5lPjwvc3ltYm9sPgogICAgICAgIDxzeW1ib2wgaWQ9Imljb24tc2VhcmNoIiB2aWV3Qm94PSIwIDAgMjQgMjQiIGZpbGw9Im5vbmUiIHN0cm9rZT0iY3VycmVudENvbG9yIiBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCI+PGNpcmNsZSBjeD0iMTEiIGN5PSIxMSIgcj0iOCI+PC9jaXJjbGU+PGxpbmUgeDE9IjIxIiB5MT0iMjEiIHgyPSIxNi42NSIgeTI9IjE2LjY1Ij48L2xpbmU+PC9zeW1ib2w+CiAgICAgICAgPHN5bWJvbCBpZD0iaWNvbi1jb3B5IiB2aWV3Qm94PSIwIDAgMjQgMjQiIGZpbGw9Im5vbmUiIHN0cm9rZT0iY3VycmVudENvbG9yIiBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCI+PHJlY3QgeD0iOSIgeT0iOSIgd2lkdGg9IjEzIiBoZWlnaHQ9IjEzIiByeD0iMiIgcnk9IjIiPjwvcmVjdD48cGF0aCBkPSJNNSAxNUg0YTIgMiAwIDAgMS0yLTJWNGEyIDIgMCAwIDEgMi0yaDlhMiAyIDAgMCAxIDIgMnYxIj48L3BhdGg+PC9zeW1ib2w+CiAgICA8L3N2Zz4KCiAgICA8IS0tIEhFQURFUiAtLT4KICAgIAoKICAgIDwhLS0gQ09OVEVOVCAtLT4KICAgIDxtYWluIGlkPSJjb250ZW50LWFyZWEiIGNsYXNzPSJmbGV4LTEgb3ZlcmZsb3ctaGlkZGVuIHJlbGF0aXZlIHctZnVsbCBmbGV4IGZsZXgtY29sIj4KICAgICAgICAKICAgICAgICA8ZGl2IGlkPSJ2aWV3LWJ1bGxldGluIiBjbGFzcz0iZmxleC0xIGZsZXggb3ZlcmZsb3ctaGlkZGVuIj4KICAgICAgICAgICAgCiAgICAgICAgICAgIDwhLS0gU2lkZWJhcjogQXJjaGl2ZXMgLS0+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9InctNzIgZmxleCBmbGV4LWNvbCBmbGV4LXNocmluay0wIHotMTAgc2hhZG93LXNtIGhpZGRlbiBtZDpmbGV4IiBzdHlsZT0iYmFja2dyb3VuZDojMmMzZTUwO2NvbG9yOiNlY2YwZjEiPgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0icC00IHNwYWNlLXktMyIgc3R5bGU9ImJvcmRlci1ib3R0b206MXB4IHNvbGlkIHJnYmEoMjU1LDI1NSwyNTUsLjEpIj4KICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIG9uY2xpY2s9ImNyZWF0ZU5ld0J1bGxldGluKCkiIGNsYXNzPSJ3LWZ1bGwgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgZ2FwLTIgdGV4dC13aGl0ZSBweS0zIHJvdW5kZWQteGwgZm9udC1ib2xkIHRyYW5zaXRpb24tYWxsIiBzdHlsZT0iYmFja2dyb3VuZDpyZ2JhKDI1NSwyNTUsMjU1LC4xNSk7Ym9yZGVyOjFweCBkYXNoZWQgcmdiYSgyNTUsMjU1LDI1NSwuNCkiPgogICAgICAgICAgICAgICAgICAgICAgICDinKggTm91dmVhdSBCdWxsZXRpbgogICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgIDwhLS0gU2VhcmNoIEJhciAoVjMpIC0tPgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InJlbGF0aXZlIj4KICAgICAgICAgICAgICAgICAgICAgICAgPHN2ZyBjbGFzcz0iYWJzb2x1dGUgbGVmdC0zIHRvcC0yLjUgdy00IGgtNCIgc3R5bGU9ImNvbG9yOnJnYmEoMjU1LDI1NSwyNTUsLjUpIj48dXNlIGhyZWY9IiNpY29uLXNlYXJjaCI+PC91c2U+PC9zdmc+CiAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiBpZD0ic2VhcmNoLWJ1bGxldGluIiBvbmlucHV0PSJyZW5kZXJCdWxsZXRpbkxpc3QoKSIgcGxhY2Vob2xkZXI9IlJlY2hlcmNoZXIgKE7CsC4uLikiIGNsYXNzPSJ3LWZ1bGwgcGwtOSBwci0zIHB5LTIgcm91bmRlZC1sZyB0ZXh0LXNtIGZvY3VzOm91dGxpbmUtbm9uZSB0cmFuc2l0aW9uLWNvbG9ycyIgc3R5bGU9ImJhY2tncm91bmQ6cmdiYSgyNTUsMjU1LDI1NSwuMTIpO2JvcmRlcjoxcHggc29saWQgcmdiYSgyNTUsMjU1LDI1NSwuMTUpO2NvbG9yOiNmZmYiPgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmbGV4LTEgb3ZlcmZsb3cteS1hdXRvIHAtMyBzcGFjZS15LTIiIGlkPSJidWxsZXRpbi1saXN0Ij4KICAgICAgICAgICAgICAgICAgICA8IS0tIExpc3QgaXRlbXMgZ2VuZXJhdGVkIGJ5IEpTIC0tPgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgICAgPCEtLSBFZGl0b3IgLS0+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZsZXgtMSBmbGV4IGZsZXgtY29sIGJnLXNsYXRlLTUwIG92ZXJmbG93LWhpZGRlbiByZWxhdGl2ZSI+CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmbGV4LTEgb3ZlcmZsb3cteS1hdXRvIHAtNiI+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ibWF4LXctNnhsIG14LWF1dG8gZ3JpZCBncmlkLWNvbHMtMSBtZDpncmlkLWNvbHMtMiBnYXAtNiBoLWZ1bGwiPgogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgPCEtLSBMZWZ0OiBGb3JtIC0tPgogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJzcGFjZS15LTYgb3ZlcmZsb3cteS1hdXRvIHBiLTIwIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iYmctd2hpdGUgcC02IHJvdW5kZWQtMnhsIGJvcmRlciBib3JkZXItc2xhdGUtMjAwIHNoYWRvdy1zbSBob3ZlcjpzaGFkb3ctbWQgdHJhbnNpdGlvbi1zaGFkb3cgcmVsYXRpdmUiIGlkPSJmb3JtLWNvbnRhaW5lciI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGgzIGNsYXNzPSJmb250LWJvbGQgdGV4dC1zbGF0ZS04MDAgbWItNCBmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMyI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGlkPSJmb3JtLXRpdGxlIj5TYWlzaXIgdW5lIGluZm88L3NwYW4+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9oMz4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJzcGFjZS15LTQiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPSJibG9jayB0ZXh0LXhzIGZvbnQtYm9sZCB0ZXh0LXNsYXRlLTQwMCB1cHBlcmNhc2UgdHJhY2tpbmctd2lkZXIgbWItMSI+Q2F0w6lnb3JpZTwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmbGV4IGdhcC0yIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c2VsZWN0IGlkPSJpdGVtLWNhdGVnb3J5IiBjbGFzcz0iZmxleC0xIHB4LTQgcHktMi41IGJvcmRlci0yIGJvcmRlci1zbGF0ZS0xMDAgcm91bmRlZC14bCB0ZXh0LXNtIGZvbnQtbWVkaXVtIGJnLXNsYXRlLTUwIGZvY3VzOmJnLXdoaXRlIGZvY3VzOmJvcmRlci1vcmFuZ2UtNDAwIG91dGxpbmUtbm9uZSB0cmFuc2l0aW9uLWFsbCBjdXJzb3ItcG9pbnRlciI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwhLS0gRHluYW1pYyBDYXRlZ29yaWVzIC0tPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc2VsZWN0PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gb25jbGljaz0ib3BlbkNhdGVnb3J5TWFuYWdlcigpIiBjbGFzcz0icHgtMyBiZy1zbGF0ZS0xMDAgdGV4dC1zbGF0ZS02MDAgcm91bmRlZC14bCBob3ZlcjpiZy1zbGF0ZS0yMDAgdHJhbnNpdGlvbi1jb2xvcnMgZm9udC1ib2xkIiB0aXRsZT0iR8OpcmVyIHRvdXRlcyBsZXMgY2F0w6lnb3JpZXMiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3ZnIGNsYXNzPSJ3LTUgaC01Ij48dXNlIGhyZWY9IiNpY29uLWxpc3QiPjwvdXNlPjwvc3ZnPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gb25jbGljaz0iYWRkQ3VzdG9tQ2F0ZWdvcnkoKSIgY2xhc3M9InB4LTQgYmctc2xhdGUtMTAwIHRleHQtc2xhdGUtNjAwIHJvdW5kZWQteGwgaG92ZXI6Ymctc2xhdGUtMjAwIHRyYW5zaXRpb24tY29sb3JzIGZvbnQtYm9sZCB0ZXh0LWxnIiB0aXRsZT0iQ3LDqWVyIHVuZSBub3V2ZWxsZSBjYXTDqWdvcmllIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZmxleCBnYXAtMyI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0idy0xLzMgZmxleCBmbGV4LWNvbCBnYXAtMSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZmxleCBnYXAtMiB0ZXh0LVsxMHB4XSB1cHBlcmNhc2UgZm9udC1ib2xkIHRleHQtc2xhdGUtNDAwIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPSJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMSBjdXJzb3ItcG9pbnRlciI+PGlucHV0IHR5cGU9InJhZGlvIiBuYW1lPSJkYXRlLXR5cGUiIHZhbHVlPSJmaXhlZCIgY2hlY2tlZCBvbmNoYW5nZT0idG9nZ2xlRGF0ZUlucHV0KCkiPiBGaXhlPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPSJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMSBjdXJzb3ItcG9pbnRlciI+PGlucHV0IHR5cGU9InJhZGlvIiBuYW1lPSJkYXRlLXR5cGUiIHZhbHVlPSJ2YXJpYWJsZSIgb25jaGFuZ2U9InRvZ2dsZURhdGVJbnB1dCgpIj4gTGlicmU8L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJkYXRlIiBpZD0iaXRlbS1kYXRlLWZpeGVkIiBjbGFzcz0idy1mdWxsIHB4LTQgcHktMi41IGJvcmRlci0yIGJvcmRlci15ZWxsb3ctMTAwIGJnLXllbGxvdy01MCByb3VuZGVkLXhsIHRleHQtc20gZm9udC1ib2xkIHRleHQteWVsbG93LTgwMCBmb2N1czpib3JkZXIteWVsbG93LTQwMCBvdXRsaW5lLW5vbmUgdHJhbnNpdGlvbi1jb2xvcnMiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiBpZD0iaXRlbS1kYXRlLXZhcmlhYmxlIiBjbGFzcz0idy1mdWxsIHB4LTQgcHktMi41IGJvcmRlci0yIGJvcmRlci15ZWxsb3ctMTAwIGJnLXllbGxvdy01MCByb3VuZGVkLXhsIHRleHQtc20gZm9udC1ib2xkIHRleHQteWVsbG93LTgwMCBmb2N1czpib3JkZXIteWVsbG93LTQwMCBvdXRsaW5lLW5vbmUgdHJhbnNpdGlvbi1jb2xvcnMgaGlkZGVuIiBwbGFjZWhvbGRlcj0iRXg6IFRvdXRlIGxhIHNlbWFpbmUiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InctMi8zIGZsZXggZmxleC1jb2wganVzdGlmeS1lbmQiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiBpZD0iaXRlbS10aXRsZSIgbGlzdD0idGl0bGUtc3VnZ2VzdGlvbnMiIGNsYXNzPSJ3LWZ1bGwgcHgtNCBweS0yLjUgYm9yZGVyLTIgYm9yZGVyLXNsYXRlLTEwMCByb3VuZGVkLXhsIHRleHQtc20gZm9udC1ib2xkIGZvY3VzOmJvcmRlci1vcmFuZ2UtNDAwIG91dGxpbmUtbm9uZSB0cmFuc2l0aW9uLWNvbG9ycyIgcGxhY2Vob2xkZXI9IlRpdHJlIG91IGNob2lzaXIuLi4iPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkYXRhbGlzdCBpZD0idGl0bGUtc3VnZ2VzdGlvbnMiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJBY2N1ZWlsIMOpbGFyZ2kiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJBZmZlY3RhdGlvbiI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IkFTU1IgMTIiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJBVVRSRSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IkJhc3NpbiI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IkNBIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iQ0VDIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iQ0VTQ0UiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJDaG9peCBkJ29yaWVudGF0aW9uIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iQ2l0w6kgw6lkdWNhdGl2ZSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IkNvbW1pc3Npb24gw6lkdWNhdGl2ZSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IkNvbW1pc3Npb24gcGVybWFuZW50ZSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IkNvbnNlaWwgZGUgZGlzY2lwbGluZSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IkNvbnNlaWwgZCdlbnNlaWduZW1lbnQiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJDb25zZWlsIHDDqWRhZ29naXF1ZSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IkNvbnNlaWxzIGRlIGNsYXNzZSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IkRGIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iREdIIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iRWR1Y0Ryb2l0Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iRWR1Y0ZpIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iw4lxdWlwZSDDqWR1Y2F0aXZlIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iRVNTIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iw4l2YWx1YXRpb24gRVBMRSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IsOJdmFsdWF0aW9ucyBuYXRpb25hbGVzIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iRXZhbGFuZyI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IkV4YW1lbnMiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJFeGFtZW5zIGJsYW5jcyI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IkxpYWlzb25zIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iTkFIIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iTnVtw6lyaXF1ZSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IlBJWCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IlBQTVMiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJQUE8iPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJQcm9qZXQgZCfDqXRhYmxpc3NlbWVudCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IlByb2pldHMiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJSZW50csOpZSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IlJJIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iU0MzQyI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IlNvcnRpZSBzY29sYWlyZSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IlN0YWdlIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iVU5TUyI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IlZTIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2RhdGFsaXN0PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwhLS0gV1lTSVdZRyBFRElUT1IgLS0+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InF1aWxsLXdyYXBwZXIiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBpZD0icXVpbGwtZWRpdG9yIj48L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmbGV4IGdhcC0zIHB0LTIiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBpZD0iYnRuLWFkZC11cGRhdGUiIG9uY2xpY2s9ImFkZEJ1bGxldGluSXRlbSgpIiBjbGFzcz0iZmxleC0xIHB5LTMgYmctb3JhbmdlLTUwMCB0ZXh0LXdoaXRlIGZvbnQtYm9sZCByb3VuZGVkLXhsIGhvdmVyOmJnLW9yYW5nZS02MDAgYWN0aXZlOnNjYWxlLTk1IHRyYW5zaXRpb24tYWxsIHNoYWRvdy1tZCBzaGFkb3ctb3JhbmdlLTIwMCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQWpvdXRlciBsJ2luZm8g8J+agAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGlkPSJidG4tY2FuY2VsLWVkaXQiIG9uY2xpY2s9ImNhbmNlbEVkaXQoKSIgY2xhc3M9ImhpZGRlbiBweC01IHB5LTMgYmctc2xhdGUtMTAwIHRleHQtc2xhdGUtNTAwIGZvbnQtYm9sZCByb3VuZGVkLXhsIGhvdmVyOmJnLXNsYXRlLTIwMCB0cmFuc2l0aW9uLWNvbG9ycyI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQW5udWxlcgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPCEtLSBHcm91cGVkIExpc3QgaW4gRWRpdG9yIC0tPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ic3BhY2UteS02IiBpZD0iZWRpdG9yLWl0ZW1zLWxpc3QiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwhLS0gRHluYW1pYyBMaXN0IC0tPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgICAgICAgICAgICAgICAgPCEtLSBSaWdodDogUHJldmlldyAtLT4KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZmxleCBvdmVyZmxvdy1oaWRkZW4gYmctc2xhdGUtMjAwIHJvdW5kZWQtMnhsIGJvcmRlci00IGJvcmRlci1zbGF0ZS0zMDAgc2hhZG93LWlubmVyIHAtNCBpdGVtcy1zdGFydCBqdXN0aWZ5LWNlbnRlciI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJvcmlnaW4tdG9wIHRyYW5zZm9ybS1ncHUgc2hhZG93LTJ4bCIgaWQ9InByZXZpZXctd3JhcHBlciIgc3R5bGU9InRyYW5zZm9ybTpzY2FsZSgwLjU1KSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBpZD0icGRmLWNvbnRlbnQiIGNsYXNzPSJhNC1wYWdlIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPCEtLSBSZW5kZXJlZCBDb250ZW50IC0tPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICA8L2Rpdj4KCiAgICAgICAgPCEtLSBIRUxQIC0tPgogICAgICAgIDxkaXYgaWQ9InZpZXctaGVscCIgY2xhc3M9ImhpZGRlbiBmbGV4LTEgb3ZlcmZsb3cteS1hdXRvIHAtOCBiZy1zbGF0ZS01MCI+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9Im1heC13LTR4bCBteC1hdXRvIHByb3NlIGJnLXdoaXRlIHAtMTAgcm91bmRlZC0zeGwgc2hhZG93LXhsIGJvcmRlciBib3JkZXItc2xhdGUtMTAwIj4KICAgICAgICAgICAgICAgIDxoMiBjbGFzcz0idGV4dC0zeGwgZm9udC1ibGFjayB0ZXh0LXNsYXRlLTgwMCBtYi02IGZsZXggaXRlbXMtY2VudGVyIGdhcC0zIj4KICAgICAgICAgICAgICAgICAgICDwn5OaIE1vZGUgZCdlbXBsb2kgJiBFbmpldXgKICAgICAgICAgICAgICAgIDwvaDI+CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIDwhLS0gU2VjdGlvbiBFbmpldSAtLT4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9Im1iLTEwIj4KICAgICAgICAgICAgICAgICAgICA8aDMgY2xhc3M9InRleHQteGwgZm9udC1ib2xkIHRleHQtYmx1ZS04MDAgbWItNCBmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMiI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJ0ZXh0LTJ4bCI+8J+Orzwvc3Bhbj4gTCdFbmpldSBkZSBQRVJESVJGT1JNQU5DRSBCaSBCYXNlCiAgICAgICAgICAgICAgICAgICAgPC9oMz4KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJiZy1ibHVlLTUwIGJvcmRlci1sLTQgYm9yZGVyLWJsdWUtNTAwIHAtNSByb3VuZGVkLXIteGwgdGV4dC1zbGF0ZS03MDAgc3BhY2UteS0zIHRleHQtc20gbGVhZGluZy1yZWxheGVkIj4KICAgICAgICAgICAgICAgICAgICAgICAgPHA+PHN0cm9uZz5Db21tdW5pcXVlciBlZmZpY2FjZW1lbnQgOjwvc3Ryb25nPiBEYW5zIHVuIMOpdGFibGlzc2VtZW50IHNjb2xhaXJlLCBsJ2luZm9ybWF0aW9uIGVzdCBkZW5zZSBldCBtdWx0aXNvdXJjZS4gQ2UgYnVsbGV0aW4gcGVybWV0IGRlIGNlbnRyYWxpc2VyIGxlcyBpbmZvcm1hdGlvbnMgZXNzZW50aWVsbGVzIGRlIGxhIHNlbWFpbmUgZW4gdW4gZG9jdW1lbnQgdW5pcXVlLCBjbGFpciBldCBzdHJ1Y3R1csOpLjwvcD4KICAgICAgICAgICAgICAgICAgICAgICAgPHA+PHN0cm9uZz5Qcm9mZXNzaW9ubmFsaXNlciBsJ2ltYWdlIDo8L3N0cm9uZz4gVW4gZG9jdW1lbnQgc3RhbmRhcmRpc8OpLCBhdXggY291bGV1cnMgZGUgbCfDqXRhYmxpc3NlbWVudCAobG9nbywgc2lnbmF0dXJlKSwgcmVuZm9yY2UgbCdpZGVudGl0w6kgdmlzdWVsbGUgZXQgbGEgY3LDqWRpYmlsaXTDqSBkZSBsYSBkaXJlY3Rpb24uPC9wPgogICAgICAgICAgICAgICAgICAgICAgICA8cD48c3Ryb25nPkdhZ25lciBkdSB0ZW1wcyA6PC9zdHJvbmc+IEZpbmkgbGEgbWlzZSBlbiBwYWdlIGZhc3RpZGlldXNlIHN1ciB0cmFpdGVtZW50IGRlIHRleHRlLiBTYWlzaXNzZXosIGNhdMOpZ29yaXNleiwgZXQgbGUgUERGIHNlIGfDqW7DqHJlIGF1dG9tYXRpcXVlbWVudC48L3A+CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICA8L2Rpdj4KCiAgICAgICAgICAgICAgICA8IS0tIFNlY3Rpb24gTW9kZSBkJ2VtcGxvaSAtLT4KICAgICAgICAgICAgICAgIDxkaXY+CiAgICAgICAgICAgICAgICAgICAgPGgzIGNsYXNzPSJ0ZXh0LXhsIGZvbnQtYm9sZCB0ZXh0LW9yYW5nZS03MDAgbWItNiBmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMiI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJ0ZXh0LTJ4bCI+8J+agDwvc3Bhbj4gR3VpZGUgZGUgZMOpbWFycmFnZSByYXBpZGUKICAgICAgICAgICAgICAgICAgICA8L2gzPgogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImdyaWQgZ3JpZC1jb2xzLTEgbWQ6Z3JpZC1jb2xzLTIgZ2FwLTYiPgogICAgICAgICAgICAgICAgICAgICAgICA8IS0tIMOJdGFwZSAxIC0tPgogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJiZy1zbGF0ZS01MCBwLTUgcm91bmRlZC0yeGwgYm9yZGVyIGJvcmRlci1zbGF0ZS0xMDAgc2hhZG93LXNtIGhvdmVyOnNoYWRvdy1tZCB0cmFuc2l0aW9uLXNoYWRvdyI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb250LWJsYWNrIHRleHQtc2xhdGUtODAwIHRleHQtbGcgbWItMiI+MS4gSWRlbnRpdMOpIPCfj6I8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzPSJ0ZXh0LXNtIHRleHQtc2xhdGUtNjAwIj5DbGlxdWV6IHN1ciA8c3BhbiBjbGFzcz0iZm9udC1ib2xkIj5QYXJhbcOodHJlcyAo4pqZ77iPKTwvc3Bhbj4gZW4gaGF1dCDDoCBkcm9pdGUgcG91ciBlbnRyZXIgbGUgbm9tIGRlIHZvdHJlIMOpdGFibGlzc2VtZW50IGV0IGFqb3V0ZXIgdm90cmUgbG9nby48L3A+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgICAgICAgICAgICAgICAgPCEtLSDDiXRhcGUgMiAtLT4KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iYmctc2xhdGUtNTAgcC01IHJvdW5kZWQtMnhsIGJvcmRlciBib3JkZXItc2xhdGUtMTAwIHNoYWRvdy1zbSBob3ZlcjpzaGFkb3ctbWQgdHJhbnNpdGlvbi1zaGFkb3ciPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9udC1ibGFjayB0ZXh0LXNsYXRlLTgwMCB0ZXh0LWxnIG1iLTIiPjIuIFBhcmFtw6l0cmV6IPCfk4U8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzPSJ0ZXh0LXNtIHRleHQtc2xhdGUtNjAwIj5Ew6lmaW5pc3NleiBsZSBudW3DqXJvIGR1IGJ1bGxldGluLCBsYSBww6lyaW9kZSAoc2VtYWluZSkgZXQgY2hvaXNpc3NleiBsZSBzaWduYXRhaXJlIG9mZmljaWVsIGRhbnMgbGUgYmxvYyAiUGFyYW3DqHRyZXMiLjwvcD4KICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CgogICAgICAgICAgICAgICAgICAgICAgICA8IS0tIMOJdGFwZSAzIC0tPgogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJiZy1zbGF0ZS01MCBwLTUgcm91bmRlZC0yeGwgYm9yZGVyIGJvcmRlci1zbGF0ZS0xMDAgc2hhZG93LXNtIGhvdmVyOnNoYWRvdy1tZCB0cmFuc2l0aW9uLXNoYWRvdyI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb250LWJsYWNrIHRleHQtc2xhdGUtODAwIHRleHQtbGcgbWItMiI+My4gU2Fpc2lzc2V6IOKcje+4jzwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3M9InRleHQtc20gdGV4dC1zbGF0ZS02MDAiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlbXBsaXNzZXogbGUgZm9ybXVsYWlyZS4gVXRpbGlzZXogbGVzIG91dGlscyBkZSBsJ8OpZGl0ZXVyIChHcmFzLCBMaXN0ZXMpIHBvdXIgbWV0dHJlIGVuIGZvcm1lIHZvdHJlIHRleHRlLgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9wPgogICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KCiAgICAgICAgICAgICAgICAgICAgICAgIDwhLS0gw4l0YXBlIDQgLS0+CiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImJnLXNsYXRlLTUwIHAtNSByb3VuZGVkLTJ4bCBib3JkZXIgYm9yZGVyLXNsYXRlLTEwMCBzaGFkb3ctc20gaG92ZXI6c2hhZG93LW1kIHRyYW5zaXRpb24tc2hhZG93Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvbnQtYmxhY2sgdGV4dC1zbGF0ZS04MDAgdGV4dC1sZyBtYi0yIj40LiBPcmdhbmlzZXog4oaV77iPPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzcz0idGV4dC1zbSB0ZXh0LXNsYXRlLTYwMCI+VXRpbGlzZXogbGVzIGZsw6hjaGVzIHN1ciBsZXMgdGl0cmVzIGRlIGNhdMOpZ29yaWVzIHBvdXIgY2hhbmdlciBsJ29yZHJlIGQnYXBwYXJpdGlvbiBkYW5zIGxlIFBERi48L3A+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgPC9kaXY+CgogICAgICAgICAgICAgICAgPCEtLSBTZWN0aW9uIE5vdXZlYXV0w6kgVjMuMCAtLT4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9Im10LTEwIHB0LTggYm9yZGVyLXQgYm9yZGVyLXNsYXRlLTEwMCI+CiAgICAgICAgICAgICAgICAgICAgPGgzIGNsYXNzPSJ0ZXh0LXhsIGZvbnQtYm9sZCB0ZXh0LWluZGlnby03MDAgbWItNCBmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMiI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJ0ZXh0LTJ4bCI+4pyoPC9zcGFuPiBOb3V2ZWF1dMOpcyBWMy4wIDogUHJvZHVjdGl2aXTDqSBNYXhpbWFsZQogICAgICAgICAgICAgICAgICAgIDwvaDM+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iYmctaW5kaWdvLTUwIGJvcmRlci1sLTQgYm9yZGVyLWluZGlnby01MDAgcC01IHJvdW5kZWQtci14bCB0ZXh0LXNsYXRlLTcwMCBzcGFjZS15LTQgdGV4dC1zbSBsZWFkaW5nLXJlbGF4ZWQiPgogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoNCBjbGFzcz0iZm9udC1ib2xkIHRleHQtaW5kaWdvLTkwMCBmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMiI+4pqhIER1cGxpY2F0aW9uIGRlIEJ1bGxldGluPC9oND4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cD5Wb3VzIHNvdWhhaXRleiByZXByZW5kcmUgbGEgYmFzZSBkZSBsYSBzZW1haW5lIGRlcm5pw6hyZSA/IERhbnMgbGEgbGlzdGUgZGUgZ2F1Y2hlLCBjbGlxdWV6IHN1ciBsZSBib3V0b24gIkNvcGllciIgKGRvdWJsZSBjYXJyw6kpLiBVbiBub3V2ZWF1IGJ1bGxldGluIHNlcmEgY3LDqcOpIGF2ZWMgdG91dCBsZSBjb250ZW51LCBldCBsZSBudW3DqXJvIHNlcmEgYXV0b21hdGlxdWVtZW50IGluY3LDqW1lbnTDqSAhPC9wPgogICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDQgY2xhc3M9ImZvbnQtYm9sZCB0ZXh0LWluZGlnby05MDAgZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTIiPvCflI0gUmVjaGVyY2hlIEluc3RhbnRhbsOpZTwvaDQ+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHA+UmV0cm91dmV6IGZhY2lsZW1lbnQgdW4gYW5jaWVuIG51bcOpcm8gZ3LDomNlIMOgIGxhIG5vdXZlbGxlIGJhcnJlIGRlIHJlY2hlcmNoZSBzaXR1w6llIGVuIGhhdXQgZGUgbGEgbGlzdGUgZGVzIGJ1bGxldGlucy48L3A+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoNCBjbGFzcz0iZm9udC1ib2xkIHRleHQtaW5kaWdvLTkwMCBmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMiI+8J+ThCBFeHBvcnQgV29yZCAoLmRvY3gpPC9oND4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cD5JbnRyb2R1aXQgZW4gVjIuNywgbCdleHBvcnQgV29yZCBwZXJtZXQgZGUgcmV0b3VjaGVyIGxlIGRvY3VtZW50IGZpbmFsIHNpIG7DqWNlc3NhaXJlIGF2YW50IGwnZW52b2kuPC9wPgogICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICA8L2Rpdj4KCiAgICA8L21haW4+CgogICAgPCEtLSBGT09URVIgLS0+CiAgICA8Zm9vdGVyIGNsYXNzPSJiZy13aGl0ZSBib3JkZXItdCBib3JkZXItc2xhdGUtMjAwIHB5LTIgdGV4dC1jZW50ZXIgdGV4dC1bMTBweF0gdGV4dC1zbGF0ZS00MDAgZmxleC1zaHJpbmstMCB6LTIwIj4KICAgICAgICBPdXRpbCBwcm9wb3PDqSBwYXIgWWFubmlzIENIUklTVE9OIHwgVXRpbGlzYXRpb24gbG9jYWxlLCBSR1BELgogICAgPC9mb290ZXI+CgogICAgPCEtLSBTRVRUSU5HUyBNT0RBTCAtLT4KICAgIAogICAgCiAgICA8IS0tIENBVEVHT1JZIE1BTkFHRVIgTU9EQUwgLS0+CiAgICA8ZGl2IGlkPSJtb2RhbC1jYXRlZ29yaWVzIiBjbGFzcz0iZml4ZWQgaW5zZXQtMCB6LTUwIGhpZGRlbiBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciI+CiAgICAgICAgPGRpdiBjbGFzcz0iYWJzb2x1dGUgaW5zZXQtMCBiZy1zbGF0ZS05MDAvNTAgYmFja2Ryb3AtYmx1ci1zbSIgb25jbGljaz0iY2xvc2VDYXRlZ29yeU1hbmFnZXIoKSI+PC9kaXY+CiAgICAgICAgPGRpdiBjbGFzcz0iYmctd2hpdGUgcm91bmRlZC0yeGwgc2hhZG93LTJ4bCB3LWZ1bGwgbWF4LXctbWQgbXgtNCByZWxhdGl2ZSB6LTEwIHAtMCB0cmFuc2Zvcm0gdHJhbnNpdGlvbi1hbGwgc2NhbGUtMTAwIG92ZXJmbG93LWhpZGRlbiBmbGV4IGZsZXgtY29sIG1heC1oLXNjcmVlbiI+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9InAtNiBib3JkZXItYiBib3JkZXItc2xhdGUtMTAwIGJnLXNsYXRlLTUwIj4KICAgICAgICAgICAgICAgIDxoMyBjbGFzcz0idGV4dC14bCBmb250LWJsYWNrIHRleHQtc2xhdGUtODAwIGZsZXggaXRlbXMtY2VudGVyIGdhcC0yIj4KICAgICAgICAgICAgICAgICAgICDwn5OLIE9yZHJlIGRlcyBjYXTDqWdvcmllcwogICAgICAgICAgICAgICAgPC9oMz4KICAgICAgICAgICAgICAgIDxwIGNsYXNzPSJ0ZXh0LXNtIHRleHQtc2xhdGUtNTAwIG10LTEiPk1vZGlmaWV6IGwnb3JkcmUgZCdhZmZpY2hhZ2UgZGFucyBsZSBQREYuPC9wPgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgCiAgICAgICAgICAgIDxkaXYgY2xhc3M9Im92ZXJmbG93LXktYXV0byBwLTQgc3BhY2UteS0yIGZsZXgtMSIgaWQ9ImNhdGVnb3J5LW1hbmFnZXItbGlzdCI+CiAgICAgICAgICAgICAgICA8IS0tIExpc3Qgd2lsbCBiZSBoZXJlIC0tPgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgCiAgICAgICAgICAgIDxkaXYgY2xhc3M9InAtNCBib3JkZXItdCBib3JkZXItc2xhdGUtMTAwIGJnLXNsYXRlLTUwIGZsZXgganVzdGlmeS1lbmQiPgogICAgICAgICAgICAgICAgPGJ1dHRvbiBvbmNsaWNrPSJjbG9zZUNhdGVnb3J5TWFuYWdlcigpIiBjbGFzcz0icHgtNiBweS0yIGJnLWJsdWUtNjAwIHRleHQtd2hpdGUgcm91bmRlZC14bCBmb250LWJvbGQgaG92ZXI6YmctYmx1ZS03MDAgdHJhbnNpdGlvbi1jb2xvcnMiPkZlcm1lcjwvYnV0dG9uPgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICA8L2Rpdj4KICAgIDwvZGl2PgoKICAgIDwhLS0gSkFWQVNDUklQVCAtLT4KICAgIDxzY3JpcHQ+CiAgICAgICAgLy8gLS0tIERBVEEgU1RBVEUgLS0tCiAgICAgICAgLy8gRW5oYW5jZWQgRXN0YWJsaXNobWVudCBPYmplY3Qgd2l0aCBMYXlvdXQsIEZvbnQgYW5kIEN1c3RvbSBUZXh0cwogICAgICAgIGxldCBlc3RhYmxpc2htZW50ID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnYmliYXNlX2VzdGFibGlzaG1lbnQnKSkgfHwgewogICAgICAgICAgICBuYW1lOiAiIiwKICAgICAgICAgICAgYWRkcmVzczogIiIsCiAgICAgICAgICAgIGxvZ286ICIiLAogICAgICAgICAgICBsYXlvdXQ6ICJjbGFzc2ljIiwgLy8gY2xhc3NpYywgbW9kZXJuLCBiYW5uZXIKICAgICAgICAgICAgZm9udDogImludGVyIiwgLy8gaW50ZXIsIHNlcmlmLCBtb25vCiAgICAgICAgICAgIGRlZmF1bHRTaWduYXRvcnk6ICJMJ8OpcXVpcGUgZGUgZGlyZWN0aW9uIiwKICAgICAgICAgICAgZG9jVGl0bGU6ICJCdWxsZXRpbiBkJ2luZm9ybWF0aW9uIiwKICAgICAgICAgICAgZG9jRm9vdGVyOiAiIiAvLyBDdXN0b20gZm9vdGVyIHRleHQKICAgICAgICB9OwoKICAgICAgICBsZXQgYnVsbGV0aW5zID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnYmliYXNlX2J1bGxldGlucycpKSB8fCBbXTsKICAgICAgICAKICAgICAgICAvLyBEZWZhdWx0IENhdGVnb3JpZXMKICAgICAgICBjb25zdCBERUZBVUxUX0NBVEVHT1JJRVMgPSBbCiAgICAgICAgICAgICLwn5OFIEFHRU5EQSIsIAogICAgICAgICAgICAi8J+PqyBWSUUgREUgTCfDiVRBQkxJU1NFTUVOVCIsIAogICAgICAgICAgICAi8J+knSBBTUlDQUxFIiwgCiAgICAgICAgICAgICLwn5GlIFBFUlNPTk5FTCIsIAogICAgICAgICAgICAi8J+TmiBQw4lEQUdPR0lFIiwgCiAgICAgICAgICAgICLwn46SIFZJRSBTQ09MQUlSRSIsIAogICAgICAgICAgICAi8J+nrSBPUklFTlRBVElPTiIsIAogICAgICAgICAgICAi4pm/IEVCRVAiLAogICAgICAgICAgICAi8J+OqCDDiURVQ0FUSUYiLAogICAgICAgICAgICAi8J+SuyBOVU3DiVJJUVVFIiwKICAgICAgICAgICAgIvCfkrwgSU5URU5EQU5DRSIsIAogICAgICAgICAgICAi8J+PpSBTQU5Uw4kgLyBTT0NJQUwiLCAKICAgICAgICAgICAgIvCfjpMgRVhBTUVOUyIsIAogICAgICAgICAgICAi8J+TnCBCVUxMRVRJTiBPRkZJQ0lFTCIsIAogICAgICAgICAgICAi4pqW77iPIEJPIiwKICAgICAgICAgICAgIvCfkqEgQVVUUkUiCiAgICAgICAgXTsKICAgICAgICAKICAgICAgICAvLyBNYXN0ZXIgY2F0ZWdvcnkgbGlzdAogICAgICAgIGxldCBtYXN0ZXJDYXRlZ29yaWVzID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnYmliYXNlX2NhdGVnb3JpZXNfbWFzdGVyJykpOwoKICAgICAgICBpZiAoIW1hc3RlckNhdGVnb3JpZXMpIHsKICAgICAgICAgICAgY29uc3Qgb2xkQ3VzdG9tID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnYmliYXNlX2NhdGVnb3JpZXMnKSkgfHwgW107CiAgICAgICAgICAgIG1hc3RlckNhdGVnb3JpZXMgPSBbLi4uREVGQVVMVF9DQVRFR09SSUVTLCAuLi5vbGRDdXN0b21dOwogICAgICAgICAgICBtYXN0ZXJDYXRlZ29yaWVzID0gWy4uLm5ldyBTZXQobWFzdGVyQ2F0ZWdvcmllcyldOwogICAgICAgIH0KCiAgICAgICAgbGV0IGN1cnJlbnRCdWxsZXRpbklkID0gbnVsbDsKICAgICAgICBsZXQgY3VycmVudEl0ZW1zID0gW107CiAgICAgICAgbGV0IGF1dG9TYXZlVGltZXIgPSBudWxsOwogICAgICAgIGxldCBlZGl0aW5nSXRlbUlkID0gbnVsbDsKICAgICAgICBsZXQgcXVpbGwgPSBudWxsOwogICAgICAgIGxldCBfYmlJbml0RG9uZSA9IGZhbHNlOwoKICAgICAgICAvLyAtLS0gSU5JVCAtLS0KICAgICAgICBmdW5jdGlvbiBpbml0QXBwKCkgewogICAgICAgICAgICBpZiAoX2JpSW5pdERvbmUpIHJldHVybjsKICAgICAgICAgICAgY29uc29sZS5sb2coJ1tCaUJhc2VdIGluaXQgYXR0ZW1wdCwgcmVhZHlTdGF0ZT0nICsgZG9jdW1lbnQucmVhZHlTdGF0ZSk7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBpZiAoIWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdxdWlsbC1lZGl0b3InKSkgeyBjb25zb2xlLndhcm4oJ1tCaUJhc2VdIERPTSBub3QgcmVhZHknKTsgc2V0VGltZW91dChpbml0QXBwLCAzMDApOyByZXR1cm47IH0KICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgUXVpbGwgPT09ICd1bmRlZmluZWQnKSB7CiAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCdbQmlCYXNlXSBRdWlsbCBDRE4gbm90IGxvYWRlZCwgcmV0cnkuLi4nKTsKICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGluaXRBcHAsIDUwMCk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKCFxdWlsbCkgewogICAgICAgICAgICAgICAgICAgIHF1aWxsID0gbmV3IFF1aWxsKCcjcXVpbGwtZWRpdG9yJywgewogICAgICAgICAgICAgICAgICAgICAgICB0aGVtZTogJ3Nub3cnLAogICAgICAgICAgICAgICAgICAgICAgICBtb2R1bGVzOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b29sYmFyOiBbCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgWydib2xkJywgJ2l0YWxpYycsICd1bmRlcmxpbmUnXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbeyAnY29sb3InOiBbXSB9LCB7ICdiYWNrZ3JvdW5kJzogW10gfV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgW3sgJ3NpemUnOiBbJ3NtYWxsJywgZmFsc2UsICdsYXJnZScsICdodWdlJ10gfV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgW3sgJ2xpc3QnOiAnb3JkZXJlZCd9LCB7ICdsaXN0JzogJ2J1bGxldCcgfV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgWydjbGVhbiddCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBdCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyOiAnU2Fpc2lzc2V6IGxlIGNvbnRlbnUgaWNpLi4uJwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgdHJ5IHsgcmVuZGVyQnVsbGV0aW5MaXN0KCk7IH0gY2F0Y2goZSkgeyBjb25zb2xlLndhcm4oJ1tCaUJhc2VdIHJlbmRlckJ1bGxldGluTGlzdCBlcnI6JywgZSk7IH0KICAgICAgICAgICAgICAgIHRyeSB7IHJlbmRlckNhdGVnb3J5T3B0aW9ucygpOyB9IGNhdGNoKGUpIHsgY29uc29sZS53YXJuKCdbQmlCYXNlXSByZW5kZXJDYXRlZ29yeU9wdGlvbnMgZXJyOicsIGUpOyB9CiAgICAgICAgICAgICAgICBpZihidWxsZXRpbnMubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgICAgICAgIHRyeSB7IGxvYWRCdWxsZXRpbihidWxsZXRpbnMuc29ydCgoYSxiKSA9PiBiLmlkIC0gYS5pZClbMF0uaWQpOyB9IGNhdGNoKGUpIHsgY29uc29sZS53YXJuKCdbQmlCYXNlXSBsb2FkQnVsbGV0aW4gZXJyOicsIGUpOyB9CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIHRyeSB7IGNyZWF0ZU5ld0J1bGxldGluKCk7IH0gY2F0Y2goZSkgeyBjb25zb2xlLndhcm4oJ1tCaUJhc2VdIGNyZWF0ZU5ld0J1bGxldGluIGVycjonLCBlKTsgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgdHJ5IHsgdXBkYXRlUHJldmlldygpOyB9IGNhdGNoKHBlKSB7IGNvbnNvbGUud2FybignW0JpQmFzZV0gdXBkYXRlUHJldmlldyBlcnI6JywgcGUpOyB9CiAgICAgICAgICAgICAgICBfYmlJbml0RG9uZSA9IHRydWU7CiAgICAgICAgICAgIH0gY2F0Y2goZXJyKSB7CiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdCaUJhc2UgaW5pdCBlcnJvcjonLCBlcnIpOwogICAgICAgICAgICAgICAgaWYgKCFfYmlJbml0RG9uZSkgc2V0VGltZW91dChpbml0QXBwLCAxMDAwKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgZnVuY3Rpb24oKSB7IHNldFRpbWVvdXQoaW5pdEFwcCwgMjAwKTsgfSk7CgogICAgICAgIC8vIC0tLSBOQVZJR0FUSU9OIC0tLQogICAgICAgIGZ1bmN0aW9uIHN3aXRjaFRhYih0YWIpIHsKICAgICAgICAgICAgWydidWxsZXRpbicsICdoZWxwJ10uZm9yRWFjaCh0ID0+IHsKICAgICAgICAgICAgICAgIGNvbnN0IGJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGBuYXYtJHt0fWApOwogICAgICAgICAgICAgICAgY29uc3QgdmlldyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGB2aWV3LSR7dH1gKTsKICAgICAgICAgICAgICAgIGlmICghYnRuIHx8ICF2aWV3KSByZXR1cm47CgogICAgICAgICAgICAgICAgaWYodCA9PT0gdGFiKSB7CiAgICAgICAgICAgICAgICAgICAgYnRuLmNsYXNzTGlzdC5yZW1vdmUoJ3RleHQtc2xhdGUtNTAwJywgJ2hvdmVyOnRleHQtc2xhdGUtNzAwJywgJ2hvdmVyOmJnLXNsYXRlLTUwJywgJ2JvcmRlci10cmFuc3BhcmVudCcpOwogICAgICAgICAgICAgICAgICAgIGJ0bi5jbGFzc0xpc3QuYWRkKCdiZy1ibHVlLTUwJywgJ3RleHQtYmx1ZS03MDAnLCAnYm9yZGVyLWJsdWUtMTAwJywgJ3NoYWRvdy1zbScpOwogICAgICAgICAgICAgICAgICAgIHZpZXcuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7CiAgICAgICAgICAgICAgICAgICAgaWYodCA9PT0gJ2J1bGxldGluJykgdmlldy5jbGFzc0xpc3QuYWRkKCdmbGV4Jyk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIGJ0bi5jbGFzc0xpc3QuYWRkKCd0ZXh0LXNsYXRlLTUwMCcsICdob3Zlcjp0ZXh0LXNsYXRlLTcwMCcsICdob3ZlcjpiZy1zbGF0ZS01MCcsICdib3JkZXItdHJhbnNwYXJlbnQnKTsKICAgICAgICAgICAgICAgICAgICBidG4uY2xhc3NMaXN0LnJlbW92ZSgnYmctYmx1ZS01MCcsICd0ZXh0LWJsdWUtNzAwJywgJ2JvcmRlci1ibHVlLTEwMCcsICdzaGFkb3ctc20nKTsKICAgICAgICAgICAgICAgICAgICB2aWV3LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpOwogICAgICAgICAgICAgICAgICAgIHZpZXcuY2xhc3NMaXN0LnJlbW92ZSgnZmxleCcpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgZnVuY3Rpb24gdG9nZ2xlU2lkZWJhck1vYmlsZSgpIHsKICAgICAgICAgICAgY29uc3Qgc2lkZWJhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN2aWV3LWJ1bGxldGluID4gZGl2OmZpcnN0LWNoaWxkJyk7CiAgICAgICAgICAgIHNpZGViYXIuY2xhc3NMaXN0LnRvZ2dsZSgnaGlkZGVuJyk7CiAgICAgICAgICAgIHNpZGViYXIuY2xhc3NMaXN0LnRvZ2dsZSgnYWJzb2x1dGUnKTsKICAgICAgICAgICAgc2lkZWJhci5jbGFzc0xpc3QudG9nZ2xlKCdoLWZ1bGwnKTsKICAgICAgICB9CgogICAgICAgIC8vIC0tLSBDQVRFR09SWSBMT0dJQyAtLS0KICAgICAgICBmdW5jdGlvbiByZW5kZXJDYXRlZ29yeU9wdGlvbnMoKSB7CiAgICAgICAgICAgIGNvbnN0IHNlbGVjdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpdGVtLWNhdGVnb3J5Jyk7CiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRWYWwgPSBzZWxlY3QudmFsdWU7CiAgICAgICAgICAgIHNlbGVjdC5pbm5lckhUTUwgPSBtYXN0ZXJDYXRlZ29yaWVzLm1hcChjYXQgPT4gYDxvcHRpb24gdmFsdWU9IiR7Y2F0fSI+JHtjYXR9PC9vcHRpb24+YCkuam9pbignJyk7CiAgICAgICAgICAgIGlmKG1hc3RlckNhdGVnb3JpZXMuaW5jbHVkZXMoY3VycmVudFZhbCkpIHsgc2VsZWN0LnZhbHVlID0gY3VycmVudFZhbDsgfQogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gYWRkQ3VzdG9tQ2F0ZWdvcnkoKSB7CiAgICAgICAgICAgIGNvbnN0IG5ld0NhdCA9IHByb21wdCgiTm9tIGRlIGxhIG5vdXZlbGxlIGNhdMOpZ29yaWUgKGF2ZWMgw6ltb2ppIHNpIHZvdXMgdm91bGV6ICEpIDoiKTsKICAgICAgICAgICAgaWYobmV3Q2F0ICYmIG5ld0NhdC50cmltKCkgIT09ICIiKSB7CiAgICAgICAgICAgICAgICBjb25zdCB1cHBlckNhdCA9IG5ld0NhdC50cmltKCkudG9VcHBlckNhc2UoKTsKICAgICAgICAgICAgICAgIGlmKCFtYXN0ZXJDYXRlZ29yaWVzLmluY2x1ZGVzKHVwcGVyQ2F0KSkgewogICAgICAgICAgICAgICAgICAgIG1hc3RlckNhdGVnb3JpZXMucHVzaCh1cHBlckNhdCk7CiAgICAgICAgICAgICAgICAgICAgc2F2ZUNhdGVnb3JpZXMoKTsKICAgICAgICAgICAgICAgICAgICByZW5kZXJDYXRlZ29yeU9wdGlvbnMoKTsKICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaXRlbS1jYXRlZ29yeScpLnZhbHVlID0gdXBwZXJDYXQ7CiAgICAgICAgICAgICAgICB9IGVsc2UgeyBhbGVydCgiQ2V0dGUgY2F0w6lnb3JpZSBleGlzdGUgZMOpasOgLiIpOyB9CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgCiAgICAgICAgZnVuY3Rpb24gc2F2ZUNhdGVnb3JpZXMoKSB7CiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdiaWJhc2VfY2F0ZWdvcmllc19tYXN0ZXInLCBKU09OLnN0cmluZ2lmeShtYXN0ZXJDYXRlZ29yaWVzKSk7CiAgICAgICAgfQoKICAgICAgICAvLyAtLS0gQ0FURUdPUlkgTUFOQUdFUiBVSSAtLS0KICAgICAgICBmdW5jdGlvbiBvcGVuQ2F0ZWdvcnlNYW5hZ2VyKCkgewogICAgICAgICAgICBjb25zdCBsaXN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NhdGVnb3J5LW1hbmFnZXItbGlzdCcpOwogICAgICAgICAgICBsaXN0LmlubmVySFRNTCA9ICcnOwogICAgICAgICAgICAKICAgICAgICAgICAgbWFzdGVyQ2F0ZWdvcmllcy5mb3JFYWNoKChjYXQsIGluZGV4KSA9PiB7CiAgICAgICAgICAgICAgICBjb25zdCBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgICAgICAgICAgICAgIGRpdi5jbGFzc05hbWUgPSAiZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1iZXR3ZWVuIHAtMyBiZy13aGl0ZSBib3JkZXIgYm9yZGVyLXNsYXRlLTIwMCByb3VuZGVkLXhsIGhvdmVyOmJvcmRlci1ibHVlLTMwMCB0cmFuc2l0aW9uLWNvbG9ycyBncm91cCI7CiAgICAgICAgICAgICAgICBkaXYuaW5uZXJIVE1MID0gYAogICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJmb250LWJvbGQgdGV4dC1zbGF0ZS03MDAgdGV4dC1zbSI+JHtjYXR9PC9zcGFuPgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZsZXggaXRlbXMtY2VudGVyIGdhcC0xIG9wYWNpdHktNTAgZ3JvdXAtaG92ZXI6b3BhY2l0eS0xMDAgdHJhbnNpdGlvbi1vcGFjaXR5Ij4KICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBvbmNsaWNrPSJtb3ZlQ2F0ZWdvcnkoJHtpbmRleH0sIC0xKSIgY2xhc3M9InAtMS41IGhvdmVyOmJnLXNsYXRlLTEwMCByb3VuZGVkLWxnIHRleHQtc2xhdGUtNTAwIGhvdmVyOnRleHQtYmx1ZS02MDAgZGlzYWJsZWQ6b3BhY2l0eS0zMCIgJHtpbmRleCA9PT0gMCA/ICdkaXNhYmxlZCcgOiAnJ30+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHN2ZyBjbGFzcz0idy00IGgtNCI+PHVzZSBocmVmPSIjaWNvbi1hcnJvdy11cCI+PC91c2U+PC9zdmc+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIG9uY2xpY2s9Im1vdmVDYXRlZ29yeSgke2luZGV4fSwgMSkiIGNsYXNzPSJwLTEuNSBob3ZlcjpiZy1zbGF0ZS0xMDAgcm91bmRlZC1sZyB0ZXh0LXNsYXRlLTUwMCBob3Zlcjp0ZXh0LWJsdWUtNjAwIGRpc2FibGVkOm9wYWNpdHktMzAiICR7aW5kZXggPT09IG1hc3RlckNhdGVnb3JpZXMubGVuZ3RoIC0gMSA/ICdkaXNhYmxlZCcgOiAnJ30+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHN2ZyBjbGFzcz0idy00IGgtNCI+PHVzZSBocmVmPSIjaWNvbi1hcnJvdy1kb3duIj48L3VzZT48L3N2Zz4KICAgICAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICBgOwogICAgICAgICAgICAgICAgbGlzdC5hcHBlbmRDaGlsZChkaXYpOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgCiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtb2RhbC1jYXRlZ29yaWVzJykuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBjbG9zZUNhdGVnb3J5TWFuYWdlcigpIHsKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21vZGFsLWNhdGVnb3JpZXMnKS5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTsKICAgICAgICAgICAgcmVuZGVyQ2F0ZWdvcnlPcHRpb25zKCk7CiAgICAgICAgICAgIHJlbmRlckVkaXRvckxpc3QoKTsKICAgICAgICAgICAgdXBkYXRlUHJldmlldygpOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gZ2V0VmlzaWJsZUNhdGVnb3JpZXMoKSB7CiAgICAgICAgICAgIGNvbnN0IGdyb3VwZWQgPSB7fTsKICAgICAgICAgICAgY3VycmVudEl0ZW1zLmZvckVhY2goaXRlbSA9PiB7CiAgICAgICAgICAgICAgICBpZighZ3JvdXBlZFtpdGVtLmNhdGVnb3J5XSkgZ3JvdXBlZFtpdGVtLmNhdGVnb3J5XSA9IFtdOwogICAgICAgICAgICAgICAgZ3JvdXBlZFtpdGVtLmNhdGVnb3J5XS5wdXNoKGl0ZW0pOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgcmV0dXJuIG1hc3RlckNhdGVnb3JpZXMuZmlsdGVyKGNhdCA9PiBncm91cGVkW2NhdF0gJiYgZ3JvdXBlZFtjYXRdLmxlbmd0aCA+IDApOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gbW92ZVZpc2libGVDYXRlZ29yeShjYXROYW1lLCBkaXJlY3Rpb24pIHsKICAgICAgICAgICAgIGNvbnN0IHZpc2libGVDYXRzID0gZ2V0VmlzaWJsZUNhdGVnb3JpZXMoKTsKICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRJbmRleEluVmlzaWJsZSA9IHZpc2libGVDYXRzLmluZGV4T2YoY2F0TmFtZSk7CiAgICAgICAgICAgICBpZiAoY3VycmVudEluZGV4SW5WaXNpYmxlID09PSAtMSkgcmV0dXJuOyAKICAgICAgICAgICAgIGNvbnN0IHRhcmdldEluZGV4SW5WaXNpYmxlID0gY3VycmVudEluZGV4SW5WaXNpYmxlICsgZGlyZWN0aW9uOwogICAgICAgICAgICAgaWYgKHRhcmdldEluZGV4SW5WaXNpYmxlIDwgMCB8fCB0YXJnZXRJbmRleEluVmlzaWJsZSA+PSB2aXNpYmxlQ2F0cy5sZW5ndGgpIHJldHVybjsKICAgICAgICAgICAgIGNvbnN0IHRhcmdldENhdE5hbWUgPSB2aXNpYmxlQ2F0c1t0YXJnZXRJbmRleEluVmlzaWJsZV07CiAgICAgICAgICAgICAKICAgICAgICAgICAgIGNvbnN0IGluZGV4MSA9IG1hc3RlckNhdGVnb3JpZXMuaW5kZXhPZihjYXROYW1lKTsKICAgICAgICAgICAgIGNvbnN0IGluZGV4MiA9IG1hc3RlckNhdGVnb3JpZXMuaW5kZXhPZih0YXJnZXRDYXROYW1lKTsKICAgICAgICAgICAgIAogICAgICAgICAgICAgaWYoaW5kZXgxID09PSAtMSB8fCBpbmRleDIgPT09IC0xKSByZXR1cm47CiAgICAgICAgICAgICAKICAgICAgICAgICAgIGNvbnN0IHRlbXAgPSBtYXN0ZXJDYXRlZ29yaWVzW2luZGV4MV07CiAgICAgICAgICAgICBtYXN0ZXJDYXRlZ29yaWVzW2luZGV4MV0gPSBtYXN0ZXJDYXRlZ29yaWVzW2luZGV4Ml07CiAgICAgICAgICAgICBtYXN0ZXJDYXRlZ29yaWVzW2luZGV4Ml0gPSB0ZW1wOwogICAgICAgICAgICAgCiAgICAgICAgICAgICBzYXZlQ2F0ZWdvcmllcygpOwogICAgICAgICAgICAgcmVuZGVyRWRpdG9yTGlzdCgpOwogICAgICAgICAgICAgdXBkYXRlUHJldmlldygpOwogICAgICAgICAgICAgcmVuZGVyQ2F0ZWdvcnlPcHRpb25zKCk7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBtb3ZlQ2F0ZWdvcnkoaW5kZXgsIGRpcmVjdGlvbiwgcmVsb2FkVUkgPSAnbW9kYWwnKSB7CiAgICAgICAgICAgIGNvbnN0IG5ld0luZGV4ID0gaW5kZXggKyBkaXJlY3Rpb247CiAgICAgICAgICAgIGlmIChuZXdJbmRleCA8IDAgfHwgbmV3SW5kZXggPj0gbWFzdGVyQ2F0ZWdvcmllcy5sZW5ndGgpIHJldHVybjsKICAgICAgICAgICAgW21hc3RlckNhdGVnb3JpZXNbaW5kZXhdLCBtYXN0ZXJDYXRlZ29yaWVzW25ld0luZGV4XV0gPSBbbWFzdGVyQ2F0ZWdvcmllc1tuZXdJbmRleF0sIG1hc3RlckNhdGVnb3JpZXNbaW5kZXhdXTsKICAgICAgICAgICAgc2F2ZUNhdGVnb3JpZXMoKTsKICAgICAgICAgICAgaWYocmVsb2FkVUkgPT09ICdtb2RhbCcpIHsgb3BlbkNhdGVnb3J5TWFuYWdlcigpOyB9IAogICAgICAgICAgICBlbHNlIHsgcmVuZGVyRWRpdG9yTGlzdCgpOyB1cGRhdGVQcmV2aWV3KCk7IHJlbmRlckNhdGVnb3J5T3B0aW9ucygpOyB9CiAgICAgICAgfQoKCiAgICAgICAgLy8gLS0tIEJVTExFVElOIExPR0lDIC0tLQogICAgICAgIGZ1bmN0aW9uIGNyZWF0ZU5ld0J1bGxldGluKCkgewogICAgICAgICAgICB0cnkgeyBjYW5jZWxFZGl0KCk7IH0gY2F0Y2goZSkge30KICAgICAgICAgICAgY3VycmVudEJ1bGxldGluSWQgPSBEYXRlLm5vdygpOwogICAgICAgICAgICBjdXJyZW50SXRlbXMgPSBbXTsKICAgICAgICAgICAgLy8gQXV0byBpbmNyZW1lbnQgbG9naWMgYmFzZWQgb24gbWF4IG51bWJlciBmb3VuZAogICAgICAgICAgICBsZXQgbWF4TnVtID0gMDsKICAgICAgICAgICAgYnVsbGV0aW5zLmZvckVhY2goYiA9PiB7CiAgICAgICAgICAgICAgICAgY29uc3QgbiA9IHBhcnNlSW50KGIubnVtYmVyKTsKICAgICAgICAgICAgICAgICBpZighaXNOYU4obikgJiYgbiA+IG1heE51bSkgbWF4TnVtID0gbjsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdiaS1udW1iZXInKS52YWx1ZSA9IG1heE51bSArIDE7CiAgICAgICAgICAgIAogICAgICAgICAgICBjb25zdCBjdXJyID0gbmV3IERhdGUoKTsKICAgICAgICAgICAgY29uc3QgZmlyc3QgPSBjdXJyLmdldERhdGUoKSAtIGN1cnIuZ2V0RGF5KCkgKyAxOyAKICAgICAgICAgICAgY29uc3QgbGFzdCA9IGZpcnN0ICsgNDsgCiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdiaS1kYXRlLXN0YXJ0JykudmFsdWUgPSBuZXcgRGF0ZShjdXJyLnNldERhdGUoZmlyc3QpKS50b0lTT1N0cmluZygpLnNsaWNlKDAsMTApOwogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYmktZGF0ZS1lbmQnKS52YWx1ZSA9IG5ldyBEYXRlKGN1cnIuc2V0RGF0ZShsYXN0KSkudG9JU09TdHJpbmcoKS5zbGljZSgwLDEwKTsKICAgICAgICAgICAgCiAgICAgICAgICAgIC8vIFVTRSBFU1RBQkxJU0hNRU5UIERFRkFVTFRTCiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdiaS1wdWItZGF0ZScpLnZhbHVlQXNEYXRlID0gbmV3IERhdGUoKTsKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2JpLXNpZ25hdG9yeScpLnZhbHVlID0gZXN0YWJsaXNobWVudC5kZWZhdWx0U2lnbmF0b3J5IHx8ICJMJ8OpcXVpcGUgZGUgZGlyZWN0aW9uIjsgCiAgICAgICAgICAgIAogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYmktdGhlbWUnKS52YWx1ZSA9ICdibHVlJzsKCiAgICAgICAgICAgIHJlbmRlckVkaXRvckxpc3QoKTsKICAgICAgICAgICAgdXBkYXRlUHJldmlldygpOwogICAgICAgICAgICBzYXZlQ3VycmVudEJ1bGxldGluKCk7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBsb2FkQnVsbGV0aW4oaWQpIHsKICAgICAgICAgICAgY2FuY2VsRWRpdCgpOwogICAgICAgICAgICBjb25zdCBiID0gYnVsbGV0aW5zLmZpbmQoeCA9PiB4LmlkID09PSBpZCk7CiAgICAgICAgICAgIGlmKCFiKSByZXR1cm47CiAgICAgICAgICAgIGN1cnJlbnRCdWxsZXRpbklkID0gYi5pZDsKICAgICAgICAgICAgY3VycmVudEl0ZW1zID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShiLml0ZW1zKSk7IAogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYmktbnVtYmVyJykudmFsdWUgPSBiLm51bWJlcjsKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2JpLWRhdGUtc3RhcnQnKS52YWx1ZSA9IGIuZGF0ZVN0YXJ0OwogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYmktZGF0ZS1lbmQnKS52YWx1ZSA9IGIuZGF0ZUVuZDsKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2JpLXB1Yi1kYXRlJykudmFsdWUgPSBiLnB1YkRhdGUgfHwgbmV3IERhdGUoKS50b0lTT1N0cmluZygpLnNsaWNlKDAsMTApOwogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYmktc2lnbmF0b3J5JykudmFsdWUgPSBiLnNpZ25hdG9yeSB8fCAiTCfDqXF1aXBlIGRlIGRpcmVjdGlvbiI7CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdiaS10aGVtZScpLnZhbHVlID0gYi50aGVtZSB8fCAnYmx1ZSc7CgogICAgICAgICAgICByZW5kZXJFZGl0b3JMaXN0KCk7CiAgICAgICAgICAgIHVwZGF0ZVByZXZpZXcoKTsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgLy8gVjM6IERVUExJQ0FUSU9OIEZVTkNUSU9OCiAgICAgICAgZnVuY3Rpb24gZHVwbGljYXRlQnVsbGV0aW4oZSwgaWQpIHsKICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgICAgICAgY29uc3Qgc291cmNlID0gYnVsbGV0aW5zLmZpbmQoYiA9PiBiLmlkID09PSBpZCk7CiAgICAgICAgICAgIGlmKCFzb3VyY2UpIHJldHVybjsKCiAgICAgICAgICAgIGlmKGNvbmZpcm0oYENvcGllciBsZSBidWxsZXRpbiBOwrAke3NvdXJjZS5udW1iZXJ9ID9gKSkgewogICAgICAgICAgICAgICAgLy8gMS4gQ2FsY3VsYXRlIG5ldyBudW1iZXIKICAgICAgICAgICAgICAgIGxldCBtYXhOdW0gPSAwOwogICAgICAgICAgICAgICAgYnVsbGV0aW5zLmZvckVhY2goYiA9PiB7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgbiA9IHBhcnNlSW50KGIubnVtYmVyKTsKICAgICAgICAgICAgICAgICAgICBpZighaXNOYU4obikgJiYgbiA+IG1heE51bSkgbWF4TnVtID0gbjsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgY29uc3QgbmV3TnVtID0gbWF4TnVtICsgMTsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgLy8gMi4gQ2xvbmUKICAgICAgICAgICAgICAgIGNvbnN0IG5ld0l0ZW0gPSB7CiAgICAgICAgICAgICAgICAgICAgLi4uSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShzb3VyY2UpKSwKICAgICAgICAgICAgICAgICAgICBpZDogRGF0ZS5ub3coKSwKICAgICAgICAgICAgICAgICAgICBudW1iZXI6IG5ld051bSwKICAgICAgICAgICAgICAgICAgICBsYXN0TW9kaWZpZWQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKQogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgLy8gMy4gU2F2ZSAmIExvYWQKICAgICAgICAgICAgICAgIGJ1bGxldGlucy5wdXNoKG5ld0l0ZW0pOwogICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2JpYmFzZV9idWxsZXRpbnMnLCBKU09OLnN0cmluZ2lmeShidWxsZXRpbnMpKTsKICAgICAgICAgICAgICAgIGxvYWRCdWxsZXRpbihuZXdJdGVtLmlkKTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gZm9ybWF0RGF0ZUZvckRpc3BsYXkoZGF0ZVN0cikgewogICAgICAgICAgICBpZiAoIWRhdGVTdHIpIHJldHVybiAnJzsKICAgICAgICAgICAgaWYgKCEvXlxkezR9LVxkezJ9LVxkezJ9JC8udGVzdChkYXRlU3RyKSkgcmV0dXJuIGRhdGVTdHI7CiAgICAgICAgICAgIGNvbnN0IFt5LCBtLCBkXSA9IGRhdGVTdHIuc3BsaXQoJy0nKS5tYXAoTnVtYmVyKTsKICAgICAgICAgICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKHksIG0gLSAxLCBkKTsKICAgICAgICAgICAgcmV0dXJuIGRhdGUudG9Mb2NhbGVEYXRlU3RyaW5nKCdmci1GUicsIHsgd2Vla2RheTogJ2xvbmcnLCBkYXk6ICdudW1lcmljJywgbW9udGg6ICdsb25nJyB9KTsKICAgICAgICB9CgogICAgICAgIC8vIC0tLSBJVEVNUyBMT0dJQyAtLS0KICAgICAgICBmdW5jdGlvbiBtb3ZlSXRlbVVwKGlkKSB7CiAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gY3VycmVudEl0ZW1zLmZpbmRJbmRleChpID0+IGkuaWQgPT09IGlkKTsKICAgICAgICAgICAgaWYgKGluZGV4ID09PSAtMSkgcmV0dXJuOwogICAgICAgICAgICBjb25zdCBjYXQgPSBjdXJyZW50SXRlbXNbaW5kZXhdLmNhdGVnb3J5OwogICAgICAgICAgICBsZXQgcHJldkluZGV4ID0gLTE7CiAgICAgICAgICAgIGZvciAobGV0IGkgPSBpbmRleCAtIDE7IGkgPj0gMDsgaS0tKSB7IGlmIChjdXJyZW50SXRlbXNbaV0uY2F0ZWdvcnkgPT09IGNhdCkgeyBwcmV2SW5kZXggPSBpOyBicmVhazsgfSB9CgogICAgICAgICAgICBpZiAocHJldkluZGV4ICE9PSAtMSkgewogICAgICAgICAgICAgICAgW2N1cnJlbnRJdGVtc1twcmV2SW5kZXhdLCBjdXJyZW50SXRlbXNbaW5kZXhdXSA9IFtjdXJyZW50SXRlbXNbaW5kZXhdLCBjdXJyZW50SXRlbXNbcHJldkluZGV4XV07CiAgICAgICAgICAgICAgICByZW5kZXJFZGl0b3JMaXN0KCk7CiAgICAgICAgICAgICAgICB1cGRhdGVQcmV2aWV3KCk7CiAgICAgICAgICAgICAgICBzYXZlQ3VycmVudEJ1bGxldGluKHRydWUpOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBtb3ZlSXRlbURvd24oaWQpIHsKICAgICAgICAgICAgY29uc3QgaW5kZXggPSBjdXJyZW50SXRlbXMuZmluZEluZGV4KGkgPT4gaS5pZCA9PT0gaWQpOwogICAgICAgICAgICBpZiAoaW5kZXggPT09IC0xKSByZXR1cm47CiAgICAgICAgICAgIGNvbnN0IGNhdCA9IGN1cnJlbnRJdGVtc1tpbmRleF0uY2F0ZWdvcnk7CiAgICAgICAgICAgIGxldCBuZXh0SW5kZXggPSAtMTsKICAgICAgICAgICAgZm9yIChsZXQgaSA9IGluZGV4ICsgMTsgaSA8IGN1cnJlbnRJdGVtcy5sZW5ndGg7IGkrKykgeyBpZiAoY3VycmVudEl0ZW1zW2ldLmNhdGVnb3J5ID09PSBjYXQpIHsgbmV4dEluZGV4ID0gaTsgYnJlYWs7IH0gfQoKICAgICAgICAgICAgaWYgKG5leHRJbmRleCAhPT0gLTEpIHsKICAgICAgICAgICAgICAgIFtjdXJyZW50SXRlbXNbbmV4dEluZGV4XSwgY3VycmVudEl0ZW1zW2luZGV4XV0gPSBbY3VycmVudEl0ZW1zW2luZGV4XSwgY3VycmVudEl0ZW1zW25leHRJbmRleF1dOwogICAgICAgICAgICAgICAgcmVuZGVyRWRpdG9yTGlzdCgpOwogICAgICAgICAgICAgICAgdXBkYXRlUHJldmlldygpOwogICAgICAgICAgICAgICAgc2F2ZUN1cnJlbnRCdWxsZXRpbih0cnVlKTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gdG9nZ2xlRGF0ZUlucHV0KCkgewogICAgICAgICAgICBjb25zdCB0eXBlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignaW5wdXRbbmFtZT0iZGF0ZS10eXBlIl06Y2hlY2tlZCcpLnZhbHVlOwogICAgICAgICAgICBjb25zdCBmaXhlZElucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2l0ZW0tZGF0ZS1maXhlZCcpOwogICAgICAgICAgICBjb25zdCB2YXJpYWJsZUlucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2l0ZW0tZGF0ZS12YXJpYWJsZScpOwogICAgICAgICAgICAKICAgICAgICAgICAgaWYodHlwZSA9PT0gJ2ZpeGVkJykgeyBmaXhlZElucHV0LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpOyB2YXJpYWJsZUlucHV0LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpOyB9IAogICAgICAgICAgICBlbHNlIHsgZml4ZWRJbnB1dC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTsgdmFyaWFibGVJbnB1dC5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTsgfQogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gc3RhcnRFZGl0SXRlbShpZCkgewogICAgICAgICAgICBjb25zdCBpdGVtID0gY3VycmVudEl0ZW1zLmZpbmQoaSA9PiBpLmlkID09PSBpZCk7CiAgICAgICAgICAgIGlmKCFpdGVtKSByZXR1cm47CgogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaXRlbS1jYXRlZ29yeScpLnZhbHVlID0gaXRlbS5jYXRlZ29yeTsKICAgICAgICAgICAgY29uc3QgaXNEYXRlID0gL15cZHs0fS1cZHsyfS1cZHsyfSQvLnRlc3QoaXRlbS5kYXRlKTsKICAgICAgICAgICAgaWYoaXNEYXRlIHx8IGl0ZW0uZGF0ZSA9PT0gJycpIHsKICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2lucHV0W25hbWU9ImRhdGUtdHlwZSJdW3ZhbHVlPSJmaXhlZCJdJykuY2hlY2tlZCA9IHRydWU7CiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaXRlbS1kYXRlLWZpeGVkJykudmFsdWUgPSBpdGVtLmRhdGU7CiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaXRlbS1kYXRlLXZhcmlhYmxlJykudmFsdWUgPSAnJzsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2lucHV0W25hbWU9ImRhdGUtdHlwZSJdW3ZhbHVlPSJ2YXJpYWJsZSJdJykuY2hlY2tlZCA9IHRydWU7CiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaXRlbS1kYXRlLWZpeGVkJykudmFsdWUgPSAnJzsKICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpdGVtLWRhdGUtdmFyaWFibGUnKS52YWx1ZSA9IGl0ZW0uZGF0ZTsKICAgICAgICAgICAgfQogICAgICAgICAgICB0b2dnbGVEYXRlSW5wdXQoKTsKCiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpdGVtLXRpdGxlJykudmFsdWUgPSBpdGVtLnRpdGxlOwogICAgICAgICAgICBxdWlsbC5yb290LmlubmVySFRNTCA9IGl0ZW0uY29udGVudDsKICAgICAgICAgICAgZWRpdGluZ0l0ZW1JZCA9IGlkOwoKICAgICAgICAgICAgY29uc3QgYnRuTWFpbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdidG4tYWRkLXVwZGF0ZScpOwogICAgICAgICAgICBjb25zdCBidG5DYW5jZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnRuLWNhbmNlbC1lZGl0Jyk7CiAgICAgICAgICAgIGNvbnN0IGZvcm1UaXRsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmb3JtLXRpdGxlJyk7CiAgICAgICAgICAgIAogICAgICAgICAgICBmb3JtVGl0bGUuaW5uZXJUZXh0ID0gIk1vZGlmaWVyIGwnaW5mbyI7CiAgICAgICAgICAgIGJ0bk1haW4uaW5uZXJUZXh0ID0gIlZhbGlkZXIgbGVzIG1vZGlmaWNhdGlvbnMg4pyFIjsKICAgICAgICAgICAgYnRuTWFpbi5jbGFzc0xpc3QucmVtb3ZlKCdiZy1vcmFuZ2UtNTAwJywgJ2hvdmVyOmJnLW9yYW5nZS02MDAnKTsKICAgICAgICAgICAgYnRuTWFpbi5jbGFzc0xpc3QuYWRkKCdiZy1ibHVlLTYwMCcsICdob3ZlcjpiZy1ibHVlLTcwMCcpOwogICAgICAgICAgICBidG5DYW5jZWwuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmb3JtLWNvbnRhaW5lcicpLnNjcm9sbEludG9WaWV3KHtiZWhhdmlvcjogJ3Ntb290aCd9KTsKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Zvcm0tY29udGFpbmVyJykuY2xhc3NMaXN0LmFkZCgncmluZy0yJywgJ3JpbmctYmx1ZS00MDAnKTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGNhbmNlbEVkaXQoKSB7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2lucHV0W25hbWU9ImRhdGUtdHlwZSJdW3ZhbHVlPSJmaXhlZCJdJykuY2hlY2tlZCA9IHRydWU7CiAgICAgICAgICAgIHRvZ2dsZURhdGVJbnB1dCgpOwogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaXRlbS1kYXRlLWZpeGVkJykudmFsdWUgPSAnJzsgCiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpdGVtLWRhdGUtdmFyaWFibGUnKS52YWx1ZSA9ICcnOyAKCiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpdGVtLXRpdGxlJykudmFsdWUgPSAnJzsKICAgICAgICAgICAgcXVpbGwuc2V0Q29udGVudHMoW10pOwogICAgICAgICAgICBlZGl0aW5nSXRlbUlkID0gbnVsbDsKCiAgICAgICAgICAgIGNvbnN0IGJ0bk1haW4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnRuLWFkZC11cGRhdGUnKTsKICAgICAgICAgICAgY29uc3QgYnRuQ2FuY2VsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2J0bi1jYW5jZWwtZWRpdCcpOwogICAgICAgICAgICBjb25zdCBmb3JtVGl0bGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZm9ybS10aXRsZScpOwogICAgICAgICAgICBmb3JtVGl0bGUuaW5uZXJUZXh0ID0gIlNhaXNpciB1bmUgaW5mbyI7CiAgICAgICAgICAgIGJ0bk1haW4uaW5uZXJUZXh0ID0gIkFqb3V0ZXIgbCdpbmZvIPCfmoAiOwogICAgICAgICAgICBidG5NYWluLmNsYXNzTGlzdC5hZGQoJ2JnLW9yYW5nZS01MDAnLCAnaG92ZXI6Ymctb3JhbmdlLTYwMCcpOwogICAgICAgICAgICBidG5NYWluLmNsYXNzTGlzdC5yZW1vdmUoJ2JnLWJsdWUtNjAwJywgJ2hvdmVyOmJnLWJsdWUtNzAwJyk7CiAgICAgICAgICAgIGJ0bkNhbmNlbC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTsKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Zvcm0tY29udGFpbmVyJykuY2xhc3NMaXN0LnJlbW92ZSgncmluZy0yJywgJ3JpbmctYmx1ZS00MDAnKTsKICAgICAgICAgICAgfSBjYXRjaChlcnIpIHsgY29uc29sZS53YXJuKCdjYW5jZWxFZGl0OicsIGVycik7IH0KICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGFkZEJ1bGxldGluSXRlbSgpIHsKICAgICAgICAgICAgaWYgKCFxdWlsbCkgeyBhbGVydCgnRWRpdGV1ciBub24gcHJldC4gUmVjaGFyZ2V6IGxhIHBhZ2UuJyk7IHJldHVybjsgfQogICAgICAgICAgICBjb25zdCBjYXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaXRlbS1jYXRlZ29yeScpLnZhbHVlOwogICAgICAgICAgICBjb25zdCBkYXRlVHlwZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2lucHV0W25hbWU9ImRhdGUtdHlwZSJdOmNoZWNrZWQnKS52YWx1ZTsKICAgICAgICAgICAgbGV0IGRhdGUgPSBkYXRlVHlwZSA9PT0gJ2ZpeGVkJyA/IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpdGVtLWRhdGUtZml4ZWQnKS52YWx1ZSA6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpdGVtLWRhdGUtdmFyaWFibGUnKS52YWx1ZTsKICAgICAgICAgICAgY29uc3QgdGl0bGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaXRlbS10aXRsZScpLnZhbHVlOwogICAgICAgICAgICBjb25zdCBjb250ZW50ID0gcXVpbGwucm9vdC5pbm5lckhUTUw7CiAgICAgICAgICAgIGNvbnN0IHRleHRDb250ZW50ID0gcXVpbGwuZ2V0VGV4dCgpLnRyaW0oKTsKCiAgICAgICAgICAgIGlmKHRleHRDb250ZW50Lmxlbmd0aCA9PT0gMCAmJiAhdGl0bGUpIHJldHVybjsKCiAgICAgICAgICAgIGlmIChlZGl0aW5nSXRlbUlkKSB7CiAgICAgICAgICAgICAgICBjb25zdCBpZHggPSBjdXJyZW50SXRlbXMuZmluZEluZGV4KGkgPT4gaS5pZCA9PT0gZWRpdGluZ0l0ZW1JZCk7CiAgICAgICAgICAgICAgICBpZihpZHggIT09IC0xKSB7IGN1cnJlbnRJdGVtc1tpZHhdID0geyAuLi5jdXJyZW50SXRlbXNbaWR4XSwgY2F0ZWdvcnk6IGNhdCwgZGF0ZTogZGF0ZSwgdGl0bGU6IHRpdGxlLCBjb250ZW50OiBjb250ZW50IH07IH0KICAgICAgICAgICAgICAgIGNhbmNlbEVkaXQoKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGN1cnJlbnRJdGVtcy5wdXNoKHsgaWQ6IERhdGUubm93KCksIGNhdGVnb3J5OiBjYXQsIGRhdGU6IGRhdGUsIHRpdGxlOiB0aXRsZSwgY29udGVudDogY29udGVudCB9KTsKICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpdGVtLXRpdGxlJykudmFsdWUgPSAnJzsKICAgICAgICAgICAgICAgIHF1aWxsLnNldENvbnRlbnRzKFtdKTsKICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpdGVtLWRhdGUtdmFyaWFibGUnKS52YWx1ZSA9ICcnOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJlbmRlckVkaXRvckxpc3QoKTsKICAgICAgICAgICAgdXBkYXRlUHJldmlldygpOwogICAgICAgICAgICBzYXZlQ3VycmVudEJ1bGxldGluKHRydWUpOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gcmVtb3ZlQnVsbGV0aW5JdGVtKGlkKSB7CiAgICAgICAgICAgIGlmKGlkID09PSBlZGl0aW5nSXRlbUlkKSBjYW5jZWxFZGl0KCk7CiAgICAgICAgICAgIGlmKGNvbmZpcm0oIvCfl5HvuI8gU3VwcHJpbWVyIGNldHRlIGluZm9ybWF0aW9uID8iKSkgewogICAgICAgICAgICAgICAgY3VycmVudEl0ZW1zID0gY3VycmVudEl0ZW1zLmZpbHRlcihpID0+IGkuaWQgIT09IGlkKTsKICAgICAgICAgICAgICAgIHJlbmRlckVkaXRvckxpc3QoKTsKICAgICAgICAgICAgICAgIHVwZGF0ZVByZXZpZXcoKTsKICAgICAgICAgICAgICAgIHNhdmVDdXJyZW50QnVsbGV0aW4odHJ1ZSk7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGRlbGV0ZUJ1bGxldGluKGUsIGlkKSB7CiAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgICAgICAgIGlmKGNvbmZpcm0oIuKaoO+4jyBBdHRlbnRpb24gOiBWb3VsZXotdm91cyB2cmFpbWVudCBzdXBwcmltZXIgZMOpZmluaXRpdmVtZW50IGNlIGJ1bGxldGluID8iKSkgewogICAgICAgICAgICAgICAgYnVsbGV0aW5zID0gYnVsbGV0aW5zLmZpbHRlcihiID0+IGIuaWQgIT09IGlkKTsKICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdiaWJhc2VfYnVsbGV0aW5zJywgSlNPTi5zdHJpbmdpZnkoYnVsbGV0aW5zKSk7CiAgICAgICAgICAgICAgICBpZihjdXJyZW50QnVsbGV0aW5JZCA9PT0gaWQpIHsgYnVsbGV0aW5zLmxlbmd0aCA+IDAgPyBsb2FkQnVsbGV0aW4oYnVsbGV0aW5zWzBdLmlkKSA6IGNyZWF0ZU5ld0J1bGxldGluKCk7IH0gZWxzZSB7IHJlbmRlckJ1bGxldGluTGlzdCgpOyB9CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIHJlbmRlckVkaXRvckxpc3QoKSB7CiAgICAgICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlZGl0b3ItaXRlbXMtbGlzdCcpOwogICAgICAgICAgICBjb250YWluZXIuaW5uZXJIVE1MID0gJyc7CiAgICAgICAgICAgIGNvbnN0IGdyb3VwZWQgPSB7fTsKICAgICAgICAgICAgY3VycmVudEl0ZW1zLmZvckVhY2goaXRlbSA9PiB7IGlmKCFncm91cGVkW2l0ZW0uY2F0ZWdvcnldKSBncm91cGVkW2l0ZW0uY2F0ZWdvcnldID0gW107IGdyb3VwZWRbaXRlbS5jYXRlZ29yeV0ucHVzaChpdGVtKTsgfSk7CiAgICAgICAgICAgIGNvbnN0IHZpc2libGVDYXRzID0gZ2V0VmlzaWJsZUNhdGVnb3JpZXMoKTsKCiAgICAgICAgICAgIG1hc3RlckNhdGVnb3JpZXMuZm9yRWFjaCgoY2F0LCBpbmRleCkgPT4gewogICAgICAgICAgICAgICAgaWYoZ3JvdXBlZFtjYXRdICYmIGdyb3VwZWRbY2F0XS5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgaGVhZGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgICAgICAgICAgICAgICAgaGVhZGVyLmNsYXNzTmFtZSA9ICJmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWJldHdlZW4gbXQtNiBtYi0yIGdyb3VwL2hlYWRlciI7IAogICAgICAgICAgICAgICAgICAgIGNvbnN0IGlzRmlyc3QgPSB2aXNpYmxlQ2F0c1swXSA9PT0gY2F0OwogICAgICAgICAgICAgICAgICAgIGNvbnN0IGlzTGFzdCA9IHZpc2libGVDYXRzW3Zpc2libGVDYXRzLmxlbmd0aCAtIDFdID09PSBjYXQ7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgY2F0U2FmZSA9IGNhdC5yZXBsYWNlKC8nL2csICJcXCciKTsKCiAgICAgICAgICAgICAgICAgICAgaGVhZGVyLmlubmVySFRNTCA9IGAKICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0idGV4dC14cyBmb250LWJvbGQgdGV4dC1zbGF0ZS00MDAgdXBwZXJjYXNlIHRyYWNraW5nLXdpZGVzdCBmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMiI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAke2NhdH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJiZy1zbGF0ZS0xMDAgdGV4dC1zbGF0ZS00MDAgcHgtMS41IHB5LTAuNSByb3VuZGVkLWZ1bGwiIHN0eWxlPSJmb250LXNpemU6MTBweCI+JHtncm91cGVkW2NhdF0ubGVuZ3RofTwvc3Bhbj4KICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZsZXggaXRlbXMtY2VudGVyIGdhcC0xIG9wYWNpdHktMCBncm91cC1ob3Zlci9oZWFkZXI6b3BhY2l0eS0xMDAgdHJhbnNpdGlvbi1vcGFjaXR5Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gb25jbGljaz0ibW92ZVZpc2libGVDYXRlZ29yeSgnJHtjYXRTYWZlfScsIC0xKSIgY2xhc3M9InAtMSBob3ZlcjpiZy1zbGF0ZS0xMDAgdGV4dC1zbGF0ZS00MDAgaG92ZXI6dGV4dC1ibHVlLTYwMCByb3VuZGVkIGRpc2FibGVkOm9wYWNpdHktMzAiICR7aXNGaXJzdCA/ICdkaXNhYmxlZCcgOiAnJ30gdGl0bGU9Ik1vbnRlciBsYSBjYXTDqWdvcmllIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3ZnIGNsYXNzPSJ3LTQgaC00Ij48dXNlIGhyZWY9IiNpY29uLWFycm93LXVwIj48L3VzZT48L3N2Zz4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBvbmNsaWNrPSJtb3ZlVmlzaWJsZUNhdGVnb3J5KCcke2NhdFNhZmV9JywgMSkiIGNsYXNzPSJwLTEgaG92ZXI6Ymctc2xhdGUtMTAwIHRleHQtc2xhdGUtNDAwIGhvdmVyOnRleHQtYmx1ZS02MDAgcm91bmRlZCBkaXNhYmxlZDpvcGFjaXR5LTMwIiAke2lzTGFzdCA/ICdkaXNhYmxlZCcgOiAnJ30gdGl0bGU9IkRlc2NlbmRyZSBsYSBjYXTDqWdvcmllIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3ZnIGNsYXNzPSJ3LTQgaC00Ij48dXNlIGhyZWY9IiNpY29uLWFycm93LWRvd24iPjwvdXNlPjwvc3ZnPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgIGA7CiAgICAgICAgICAgICAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGhlYWRlcik7CgogICAgICAgICAgICAgICAgICAgIGdyb3VwZWRbY2F0XS5mb3JFYWNoKGl0ZW0gPT4gewogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgICAgICAgICAgICAgICAgICAgICAgZGl2LmNsYXNzTmFtZSA9ICJiZy13aGl0ZSBwLTQgcm91bmRlZC14bCBib3JkZXIgYm9yZGVyLXNsYXRlLTEwMCBzaGFkb3ctc20gZmxleCBqdXN0aWZ5LWJldHdlZW4gaXRlbXMtc3RhcnQgZ3JvdXAgbWItMyB0cmFuc2l0aW9uLWFsbCBob3Zlcjpib3JkZXItYmx1ZS0yMDAgaG92ZXI6c2hhZG93LW1kIjsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoaXRlbS5pZCA9PT0gZWRpdGluZ0l0ZW1JZCkgeyBkaXYuY2xhc3NOYW1lID0gImJnLWJsdWUtNTAgcC00IHJvdW5kZWQteGwgYm9yZGVyLTIgYm9yZGVyLWJsdWUtNDAwIHNoYWRvdy1tZCBmbGV4IGp1c3RpZnktYmV0d2VlbiBpdGVtcy1zdGFydCBtYi0zIjsgfQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkaXNwbGF5RGF0ZSA9IGZvcm1hdERhdGVGb3JEaXNwbGF5KGl0ZW0uZGF0ZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGRpdi5pbm5lckhUTUwgPSBgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmbGV4LTEgcHItNCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9udC1ib2xkIHRleHQtc2xhdGUtODAwIGZsZXggZmxleC13cmFwIGl0ZW1zLWNlbnRlciBnYXAtMiI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR7ZGlzcGxheURhdGUgPyBgPHNwYW4gY2xhc3M9ImJnLXllbGxvdy0xMDAgdGV4dC15ZWxsb3ctODAwIHB4LTIgcHktMC41IHJvdW5kZWQtbGcgdGV4dC14cyBmb250LWJvbGQgY2FwaXRhbGl6ZSI+JHtkaXNwbGF5RGF0ZX08L3NwYW4+YCA6ICcnfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAke2l0ZW0udGl0bGUgfHwgJzxzcGFuIGNsYXNzPSJpdGFsaWMgdGV4dC1zbGF0ZS00MDAiPlNhbnMgdGl0cmU8L3NwYW4+J30KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJ0ZXh0LXNtIHRleHQtc2xhdGUtNjAwIG10LTIgbGVhZGluZy1yZWxheGVkIHJpY2gtdGV4dC1jb250ZW50Ij4ke2l0ZW0uY29udGVudH08L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTEgb3BhY2l0eS0wIGdyb3VwLWhvdmVyOm9wYWNpdHktMTAwIHRyYW5zaXRpb24tb3BhY2l0eSBmbGV4LXNocmluay0wIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIG9uY2xpY2s9Im1vdmVJdGVtVXAoJHtpdGVtLmlkfSkiIGNsYXNzPSJwLTIgdGV4dC1zbGF0ZS00MDAgaG92ZXI6dGV4dC1pbmRpZ28tNjAwIGhvdmVyOmJnLWluZGlnby01MCByb3VuZGVkLWxnIHRyYW5zaXRpb24tY29sb3JzIiB0aXRsZT0iTW9udGVyIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHN2ZyBjbGFzcz0idy00IGgtNCI+PHVzZSBocmVmPSIjaWNvbi1hcnJvdy11cCI+PC91c2U+PC9zdmc+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBvbmNsaWNrPSJtb3ZlSXRlbURvd24oJHtpdGVtLmlkfSkiIGNsYXNzPSJwLTIgdGV4dC1zbGF0ZS00MDAgaG92ZXI6dGV4dC1pbmRpZ28tNjAwIGhvdmVyOmJnLWluZGlnby01MCByb3VuZGVkLWxnIHRyYW5zaXRpb24tY29sb3JzIiB0aXRsZT0iRGVzY2VuZHJlIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHN2ZyBjbGFzcz0idy00IGgtNCI+PHVzZSBocmVmPSIjaWNvbi1hcnJvdy1kb3duIj48L3VzZT48L3N2Zz4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJ3LXB4IGgtNCBiZy1zbGF0ZS0yMDAgbXgtMSI+PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBvbmNsaWNrPSJzdGFydEVkaXRJdGVtKCR7aXRlbS5pZH0pIiBjbGFzcz0icC0yIHRleHQtc2xhdGUtNDAwIGhvdmVyOnRleHQtYmx1ZS02MDAgaG92ZXI6YmctYmx1ZS01MCByb3VuZGVkLWxnIHRyYW5zaXRpb24tY29sb3JzIiB0aXRsZT0iTW9kaWZpZXIiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3ZnIGNsYXNzPSJ3LTQgaC00Ij48dXNlIGhyZWY9IiNpY29uLWVkaXQiPjwvdXNlPjwvc3ZnPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gb25jbGljaz0icmVtb3ZlQnVsbGV0aW5JdGVtKCR7aXRlbS5pZH0pIiBjbGFzcz0icC0yIHRleHQtc2xhdGUtNDAwIGhvdmVyOnRleHQtcmVkLTUwMCBob3ZlcjpiZy1yZWQtNTAgcm91bmRlZC1sZyB0cmFuc2l0aW9uLWNvbG9ycyIgdGl0bGU9IlN1cHByaW1lciI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzdmcgY2xhc3M9InctNCBoLTQiPjx1c2UgaHJlZj0iI2ljb24tdHJhc2giPjwvdXNlPjwvc3ZnPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgIGA7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChkaXYpOwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIHRyaWdnZXJBdXRvU2F2ZSgpIHsKICAgICAgICAgICAgdXBkYXRlUHJldmlldygpOyAKICAgICAgICAgICAgaWYoYXV0b1NhdmVUaW1lcikgY2xlYXJUaW1lb3V0KGF1dG9TYXZlVGltZXIpOwogICAgICAgICAgICBhdXRvU2F2ZVRpbWVyID0gc2V0VGltZW91dCgoKSA9PiB7IHNhdmVDdXJyZW50QnVsbGV0aW4odHJ1ZSk7IH0sIDEwMDApOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gc2hvd1NhdmVTdGF0dXMoKSB7CiAgICAgICAgICAgIGNvbnN0IHN0YXR1c0VsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2F1dG8tc2F2ZS1zdGF0dXMnKTsKICAgICAgICAgICAgc3RhdHVzRWwuY2xhc3NMaXN0LnJlbW92ZSgnc2F2ZS1pbmRpY2F0b3InKTsgCiAgICAgICAgICAgIHZvaWQgc3RhdHVzRWwub2Zmc2V0V2lkdGg7IAogICAgICAgICAgICBzdGF0dXNFbC5jbGFzc0xpc3QuYWRkKCdzYXZlLWluZGljYXRvcicpOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gc2F2ZUN1cnJlbnRCdWxsZXRpbihpc0F1dG8gPSBmYWxzZSkgewogICAgICAgICAgICB0cnkgewogICAgICAgICAgICBjb25zdCBudW0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYmktbnVtYmVyJykudmFsdWU7CiAgICAgICAgICAgIGNvbnN0IHN0YXJ0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2JpLWRhdGUtc3RhcnQnKS52YWx1ZTsKICAgICAgICAgICAgY29uc3QgZW5kID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2JpLWRhdGUtZW5kJykudmFsdWU7CiAgICAgICAgICAgIGNvbnN0IHB1YkRhdGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYmktcHViLWRhdGUnKS52YWx1ZTsKICAgICAgICAgICAgY29uc3Qgc2lnbmF0b3J5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2JpLXNpZ25hdG9yeScpLnZhbHVlOwogICAgICAgICAgICBjb25zdCB0aGVtZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdiaS10aGVtZScpLnZhbHVlOwoKICAgICAgICAgICAgY29uc3QgYnVsbGV0aW4gPSB7CiAgICAgICAgICAgICAgICBpZDogY3VycmVudEJ1bGxldGluSWQsCiAgICAgICAgICAgICAgICBudW1iZXI6IG51bSwKICAgICAgICAgICAgICAgIGRhdGVTdGFydDogc3RhcnQsCiAgICAgICAgICAgICAgICBkYXRlRW5kOiBlbmQsCiAgICAgICAgICAgICAgICBwdWJEYXRlOiBwdWJEYXRlLAogICAgICAgICAgICAgICAgc2lnbmF0b3J5OiBzaWduYXRvcnksCiAgICAgICAgICAgICAgICB0aGVtZTogdGhlbWUsCiAgICAgICAgICAgICAgICBpdGVtczogY3VycmVudEl0ZW1zLAogICAgICAgICAgICAgICAgbGFzdE1vZGlmaWVkOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkKICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIGNvbnN0IGlkeCA9IGJ1bGxldGlucy5maW5kSW5kZXgoYiA9PiBiLmlkID09PSBjdXJyZW50QnVsbGV0aW5JZCk7CiAgICAgICAgICAgIGlmKGlkeCA+PSAwKSB7IGJ1bGxldGluc1tpZHhdID0gYnVsbGV0aW47IH0gZWxzZSB7IGJ1bGxldGlucy5wdXNoKGJ1bGxldGluKTsgfQogICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnYmliYXNlX2J1bGxldGlucycsIEpTT04uc3RyaW5naWZ5KGJ1bGxldGlucykpOwogICAgICAgICAgICByZW5kZXJCdWxsZXRpbkxpc3QoKTsgLy8gUmUtcmVuZGVyIHRvIHVwZGF0ZSB0aGUgbGlzdCB2aWV3CiAgICAgICAgICAgIGlmKGlzQXV0bykgc2hvd1NhdmVTdGF0dXMoKTsKICAgICAgICAgICAgfSBjYXRjaChlcnIpIHsgY29uc29sZS5lcnJvcignc2F2ZUN1cnJlbnRCdWxsZXRpbiBlcnJvcjonLCBlcnIpOyB9CiAgICAgICAgfQogICAgICAgIAogICAgICAgIC8vIFYzOiBVcGRhdGVkIFJlbmRlciBMaXN0IHdpdGggRmlsdGVyCiAgICAgICAgZnVuY3Rpb24gcmVuZGVyQnVsbGV0aW5MaXN0KCkgewogICAgICAgICAgICBjb25zdCBsaXN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2J1bGxldGluLWxpc3QnKTsKICAgICAgICAgICAgbGlzdC5pbm5lckhUTUwgPSAnJzsKICAgICAgICAgICAgCiAgICAgICAgICAgIC8vIEdldCBTZWFyY2ggUXVlcnkKICAgICAgICAgICAgY29uc3QgcXVlcnkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2VhcmNoLWJ1bGxldGluJyk/LnZhbHVlLnRvTG93ZXJDYXNlKCkgfHwgIiI7CgogICAgICAgICAgICBjb25zdCBzb3J0ZWQgPSBidWxsZXRpbnMuc29ydCgoYSxiKSA9PiBiLmlkIC0gYS5pZCk7CiAgICAgICAgICAgIGNvbnN0IGZpbHRlcmVkID0gc29ydGVkLmZpbHRlcihiID0+IHsKICAgICAgICAgICAgICAgICByZXR1cm4gYi5udW1iZXIudG9TdHJpbmcoKS5pbmNsdWRlcyhxdWVyeSkgfHwgYi5kYXRlU3RhcnQuaW5jbHVkZXMocXVlcnkpOwogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIGZpbHRlcmVkLmZvckVhY2goYiA9PiB7CiAgICAgICAgICAgICAgICBjb25zdCBpc0FjdGl2ZSA9IGIuaWQgPT09IGN1cnJlbnRCdWxsZXRpbklkOwogICAgICAgICAgICAgICAgY29uc3QgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgICAgICAgICAgICBkaXYuY2xhc3NOYW1lID0gYHctZnVsbCB0ZXh0LWxlZnQgcC00IHJvdW5kZWQteGwgYm9yZGVyIHRyYW5zaXRpb24tYWxsIGdyb3VwIGZsZXgganVzdGlmeS1iZXR3ZWVuIGl0ZW1zLXN0YXJ0IGN1cnNvci1wb2ludGVyIG1iLTIgJHtpc0FjdGl2ZSA/ICdiZy13aGl0ZS8xNSBib3JkZXItYmx1ZS00MDAvNTAgc2hhZG93LXNtJyA6ICdiZy10cmFuc3BhcmVudCBib3JkZXItdHJhbnNwYXJlbnQgaG92ZXI6Ymctd2hpdGUvMTAnfWA7CiAgICAgICAgICAgICAgICBkaXYub25jbGljayA9ICgpID0+IGxvYWRCdWxsZXRpbihiLmlkKTsKICAgICAgICAgICAgICAgIGNvbnN0IHN0YXJ0RGF0ZSA9IHBhcnNlTG9jYWxEYXRlKGIuZGF0ZVN0YXJ0KTsKICAgICAgICAgICAgICAgIGNvbnN0IGRhdGVEaXNwbGF5ID0gc3RhcnREYXRlID8gc3RhcnREYXRlLnRvTG9jYWxlRGF0ZVN0cmluZygnZnItRlInLCB7ZGF5OidudW1lcmljJywgbW9udGg6J251bWVyaWMnfSkgOiAnLi4uJzsKICAgICAgICAgICAgICAgIGRpdi5pbm5lckhUTUwgPSBgCiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZmxleC0xIj4KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZmxleCBqdXN0aWZ5LWJldHdlZW4gaXRlbXMtY2VudGVyIG1iLTEiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9ImZvbnQtYm9sZCAke2lzQWN0aXZlID8gJ3RleHQtd2hpdGUnIDogJ3RleHQtc2xhdGUtMjAwJ30iPkJ1bGxldGluIE5cdTAwYjAke2IubnVtYmVyfTwvc3Bhbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJ0ZXh0LXNsYXRlLTQwMCIgc3R5bGU9ImZvbnQtc2l6ZToxMHB4Ij4ke25ldyBEYXRlKGIubGFzdE1vZGlmaWVkKS50b0xvY2FsZURhdGVTdHJpbmcoKX08L3NwYW4+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJ0ZXh0LXhzICR7aXNBY3RpdmUgPyAndGV4dC1ibHVlLTMwMCcgOiAndGV4dC1zbGF0ZS00MDAnfSI+U2VtYWluZSBkdSAke2RhdGVEaXNwbGF5fTwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJkaXNwbGF5OmZsZXg7ZmxleC1kaXJlY3Rpb246cm93O2dhcDo0cHg7bWFyZ2luLXRvcDo2cHg7ZmxleC13cmFwOndyYXA7Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gb25jbGljaz0iZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7bG9hZEJ1bGxldGluKCR7Yi5pZH0pO29wZW5CaVBhcmFtcygpIiBzdHlsZT0iY29sb3I6IzkzYzVmZDtwYWRkaW5nOjNweDtib3JkZXItcmFkaXVzOjZweDtiYWNrZ3JvdW5kOm5vbmU7Ym9yZGVyOm5vbmU7Y3Vyc29yOnBvaW50ZXIiIHRpdGxlPSJQYXJhbVx1MDBlOHRyZXMiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3ZnIHdpZHRoPSIxMyIgaGVpZ2h0PSIxMyIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIj48cGF0aCBkPSJNMTcgM2EyLjg1IDIuODMgMCAxMTQgNEw3LjUgMjAuNSAyIDIybDEuNS01LjVaIi8+PC9zdmc+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gb25jbGljaz0iZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7bG9hZEJ1bGxldGluKCR7Yi5pZH0pO3NldFRpbWVvdXQoZ2VuZXJhdGVQREYsMzAwKSIgc3R5bGU9ImNvbG9yOiNmY2E1YTU7cGFkZGluZzozcHg7Ym9yZGVyLXJhZGl1czo2cHg7YmFja2dyb3VuZDpub25lO2JvcmRlcjpub25lO2N1cnNvcjpwb2ludGVyIiB0aXRsZT0iUERGIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHN2ZyB3aWR0aD0iMTMiIGhlaWdodD0iMTMiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJjdXJyZW50Q29sb3IiIHN0cm9rZS13aWR0aD0iMiI+PHBhdGggZD0iTTE0IDJINmEyIDIgMCAwIDAtMiAydjE2YTIgMiAwIDAgMCAyIDJoMTJhMiAyIDAgMCAwIDItMlY4eiIvPjxwb2x5bGluZSBwb2ludHM9IjE0IDIgMTQgOCAyMCA4Ii8+PGxpbmUgeDE9IjE2IiB5MT0iMTMiIHgyPSI4IiB5Mj0iMTMiLz48bGluZSB4MT0iMTYiIHkxPSIxNyIgeDI9IjgiIHkyPSIxNyIvPjwvc3ZnPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIG9uY2xpY2s9ImV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO2xvYWRCdWxsZXRpbigke2IuaWR9KTtzZXRUaW1lb3V0KGdlbmVyYXRlRE9DWCwzMDApIiBzdHlsZT0iY29sb3I6IzkzYzVmZDtwYWRkaW5nOjNweDtib3JkZXItcmFkaXVzOjZweDtiYWNrZ3JvdW5kOm5vbmU7Ym9yZGVyOm5vbmU7Y3Vyc29yOnBvaW50ZXIiIHRpdGxlPSJXb3JkIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHN2ZyB3aWR0aD0iMTMiIGhlaWdodD0iMTMiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJjdXJyZW50Q29sb3IiIHN0cm9rZS13aWR0aD0iMiI+PHBhdGggZD0iTTQgMnYyMGgxNlY4bC02LTZINHoiLz48cG9seWxpbmUgcG9pbnRzPSIxNCAyIDE0IDggMjAgOCIvPjxwYXRoIGQ9Ik04IDEzbDIgNCAyLTQgMiA0IDItNCIvPjwvc3ZnPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIG9uY2xpY2s9ImR1cGxpY2F0ZUJ1bGxldGluKGV2ZW50LCAke2IuaWR9KSIgc3R5bGU9ImNvbG9yOnJnYmEoMjU1LDI1NSwyNTUsLjU1KTtwYWRkaW5nOjNweDtib3JkZXItcmFkaXVzOjZweDtiYWNrZ3JvdW5kOm5vbmU7Ym9yZGVyOm5vbmU7Y3Vyc29yOnBvaW50ZXIiIHRpdGxlPSJEdXBsaXF1ZXIiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3ZnIHdpZHRoPSIxMyIgaGVpZ2h0PSIxMyI+PHVzZSBocmVmPSIjaWNvbi1jb3B5Ij48L3VzZT48L3N2Zz4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBvbmNsaWNrPSJkZWxldGVCdWxsZXRpbihldmVudCwgJHtiLmlkfSkiIHN0eWxlPSJjb2xvcjpyZ2JhKDI1NSwyNTUsMjU1LC40KTtwYWRkaW5nOjNweDtib3JkZXItcmFkaXVzOjZweDtiYWNrZ3JvdW5kOm5vbmU7Ym9yZGVyOm5vbmU7Y3Vyc29yOnBvaW50ZXIiIHRpdGxlPSJTdXBwcmltZXIiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3ZnIHdpZHRoPSIxMyIgaGVpZ2h0PSIxMyI+PHVzZSBocmVmPSIjaWNvbi10cmFzaCI+PC91c2U+PC9zdmc+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CmA7CiAgICAgICAgICAgICAgICBsaXN0LmFwcGVuZENoaWxkKGRpdik7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICAKICAgICAgICAgICAgaWYoZmlsdGVyZWQubGVuZ3RoID09PSAwICYmIGJ1bGxldGlucy5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgICAgbGlzdC5pbm5lckhUTUwgPSBgPGRpdiBjbGFzcz0idGV4dC1jZW50ZXIgcC00IHRleHQtc2xhdGUtNDAwIHRleHQtc20iPkF1Y3VuIGJ1bGxldGluIHRyb3V2w6kgcG91ciAiJHtxdWVyeX0iPC9kaXY+YDsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICAKICAgICAgICBmdW5jdGlvbiBwYXJzZUxvY2FsRGF0ZShkYXRlU3RyaW5nKSB7CiAgICAgICAgICAgICBpZiAoIWRhdGVTdHJpbmcpIHJldHVybiBudWxsOwogICAgICAgICAgICAgY29uc3QgW3llYXIsIG1vbnRoLCBkYXldID0gZGF0ZVN0cmluZy5zcGxpdCgnLScpLm1hcChOdW1iZXIpOwogICAgICAgICAgICAgcmV0dXJuIG5ldyBEYXRlKHllYXIsIG1vbnRoIC0gMSwgZGF5KTsKICAgICAgICB9CgogICAgICAgIC8vIC0tLSBQUkVWSUVXIC0tLQogICAgICAgIGZ1bmN0aW9uIHVwZGF0ZVByZXZpZXcoKSB7CiAgICAgICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwZGYtY29udGVudCcpOwogICAgICAgICAgICAKICAgICAgICAgICAgLy8gTGF5b3V0ICYgRm9udCBDbGFzc2VzIGZyb20gU2V0dGluZ3MKICAgICAgICAgICAgY29uc3QgbGF5b3V0ID0gZXN0YWJsaXNobWVudC5sYXlvdXQgfHwgJ2NsYXNzaWMnOwogICAgICAgICAgICBjb25zdCBmb250ID0gZXN0YWJsaXNobWVudC5mb250IHx8ICdpbnRlcic7CiAgICAgICAgICAgIGNvbnN0IGZvbnRDbGFzcyA9IGZvbnQgPT09ICdzZXJpZicgPyAnZm9udC1zZXJpZicgOiAoZm9udCA9PT0gJ21vbm8nID8gJ2ZvbnQtbW9ubycgOiAnZm9udC1pbnRlcicpOwogICAgICAgICAgICAKICAgICAgICAgICAgLy8gQ3VzdG9tIHRleHRzCiAgICAgICAgICAgIGNvbnN0IGRvY1RpdGxlID0gZXN0YWJsaXNobWVudC5kb2NUaXRsZSB8fCAiQnVsbGV0aW4gZCdpbmZvcm1hdGlvbiI7CiAgICAgICAgICAgIGNvbnN0IGRvY0Zvb3RlciA9IGVzdGFibGlzaG1lbnQuZG9jRm9vdGVyIHx8ICIiOwoKICAgICAgICAgICAgLy8gQXBwbHkgZm9udCB0byBjb250YWluZXIKICAgICAgICAgICAgY29udGFpbmVyLmNsYXNzTmFtZSA9IGBhNC1wYWdlICR7Zm9udENsYXNzfSBsYXlvdXQtJHtsYXlvdXR9YDsKCiAgICAgICAgICAgIGNvbnN0IG51bSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdiaS1udW1iZXInKS52YWx1ZTsKICAgICAgICAgICAgY29uc3Qgc3RhcnRWYWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYmktZGF0ZS1zdGFydCcpLnZhbHVlOwogICAgICAgICAgICBjb25zdCBlbmRWYWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYmktZGF0ZS1lbmQnKS52YWx1ZTsKICAgICAgICAgICAgY29uc3QgcHViRGF0ZVZhbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdiaS1wdWItZGF0ZScpLnZhbHVlOwogICAgICAgICAgICBjb25zdCBzaWduYXRvcnkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYmktc2lnbmF0b3J5JykudmFsdWU7CiAgICAgICAgICAgIGNvbnN0IHRoZW1lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2JpLXRoZW1lJykudmFsdWUgfHwgJ2JsdWUnOwogICAgICAgICAgICAKICAgICAgICAgICAgLy8gVEhFTUUgQ09ORklHCiAgICAgICAgICAgIGNvbnN0IHRoZW1lQ29uZmlnID0gewogICAgICAgICAgICAgICAgYmx1ZTogIHsgbWFpbjogJ3RleHQtYmx1ZS05MDAnLCBib3JkZXI6ICdib3JkZXItYmx1ZS04MDAnLCBiYWRnZTogJ2JnLWJsdWUtODAwJywgc3ViQm9yZGVyOiAnYm9yZGVyLWJsdWUtMTAwJywgYWNjZW50OiAndGV4dC1vcmFuZ2UtNjAwJywgdGl0bGU6ICd0ZXh0LWJsdWUtOTAwJyB9LAogICAgICAgICAgICAgICAgcmVkOiAgIHsgbWFpbjogJ3RleHQtcmVkLTkwMCcsICBib3JkZXI6ICdib3JkZXItcmVkLTgwMCcsICBiYWRnZTogJ2JnLXJlZC04MDAnLCAgc3ViQm9yZGVyOiAnYm9yZGVyLXJlZC0xMDAnLCAgYWNjZW50OiAndGV4dC1zbGF0ZS02MDAnLCAgdGl0bGU6ICd0ZXh0LXJlZC05MDAnIH0sCiAgICAgICAgICAgICAgICBncmVlbjogeyBtYWluOiAndGV4dC1lbWVyYWxkLTkwMCcsIGJvcmRlcjogJ2JvcmRlci1lbWVyYWxkLTgwMCcsIGJhZGdlOiAnYmctZW1lcmFsZC04MDAnLCBzdWJCb3JkZXI6ICdib3JkZXItZW1lcmFsZC0xMDAnLCBhY2NlbnQ6ICd0ZXh0LWVtZXJhbGQtNjAwJywgdGl0bGU6ICd0ZXh0LWdyZWVuLTkwMCcgfSwKICAgICAgICAgICAgICAgIGdyZXk6ICB7IG1haW46ICd0ZXh0LXNsYXRlLTkwMCcsIGJvcmRlcjogJ2JvcmRlci1zbGF0ZS04MDAnLCBiYWRnZTogJ2JnLXNsYXRlLTgwMCcsIHN1YkJvcmRlcjogJ2JvcmRlci1zbGF0ZS0yMDAnLCBhY2NlbnQ6ICd0ZXh0LXNsYXRlLTUwMCcsIHRpdGxlOiAndGV4dC1zbGF0ZS05MDAnIH0sCiAgICAgICAgICAgICAgICBwdXJwbGU6eyBtYWluOiAndGV4dC1wdXJwbGUtOTAwJywgYm9yZGVyOiAnYm9yZGVyLXB1cnBsZS04MDAnLCBiYWRnZTogJ2JnLXB1cnBsZS04MDAnLCBzdWJCb3JkZXI6ICdib3JkZXItcHVycGxlLTEwMCcsIGFjY2VudDogJ3RleHQtcGluay02MDAnLCB0aXRsZTogJ3RleHQtcHVycGxlLTkwMCcgfQogICAgICAgICAgICB9OwogICAgICAgICAgICBjb25zdCB0ID0gdGhlbWVDb25maWdbdGhlbWVdIHx8IHRoZW1lQ29uZmlnLmJsdWU7CgogICAgICAgICAgICBjb25zdCBzdGFydCA9IHBhcnNlTG9jYWxEYXRlKHN0YXJ0VmFsKTsKICAgICAgICAgICAgY29uc3QgZW5kID0gcGFyc2VMb2NhbERhdGUoZW5kVmFsKTsKICAgICAgICAgICAgY29uc3QgcHViRGF0ZU9iaiA9IHBhcnNlTG9jYWxEYXRlKHB1YkRhdGVWYWwpOwogICAgICAgICAgICBjb25zdCBvcHRpb25zTW9udGggPSB7IG1vbnRoOiAnbG9uZycgfTsKICAgICAgICAgICAgCiAgICAgICAgICAgIGxldCBwdWJEYXRlU3RyID0gIiI7CiAgICAgICAgICAgIGlmKHB1YkRhdGVPYmopIHsKICAgICAgICAgICAgICAgICBjb25zdCBkID0gcHViRGF0ZU9iai5nZXREYXRlKCk7CiAgICAgICAgICAgICAgICAgY29uc3QgbSA9IHB1YkRhdGVPYmoudG9Mb2NhbGVEYXRlU3RyaW5nKCdmci1GUicsIG9wdGlvbnNNb250aCk7CiAgICAgICAgICAgICAgICAgY29uc3QgeSA9IHB1YkRhdGVPYmouZ2V0RnVsbFllYXIoKTsKICAgICAgICAgICAgICAgICBwdWJEYXRlU3RyID0gYCR7ZH0mbmJzcDske219Jm5ic3A7JHt5fWA7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgY29uc3QgdCA9IG5ldyBEYXRlKCk7CiAgICAgICAgICAgICAgICAgcHViRGF0ZVN0ciA9IGAke3QuZ2V0RGF0ZSgpfSZuYnNwOyR7dC50b0xvY2FsZURhdGVTdHJpbmcoJ2ZyLUZSJywgb3B0aW9uc01vbnRoKX0mbmJzcDske3QuZ2V0RnVsbFllYXIoKX1gOwogICAgICAgICAgICB9CgogICAgICAgICAgICBsZXQgZGF0ZVN0ciA9ICJTZW1haW5lIGR1IC4uLiI7CiAgICAgICAgICAgIGlmIChzdGFydCAmJiBlbmQgJiYgIWlzTmFOKHN0YXJ0KSkgewogICAgICAgICAgICAgICAgIGNvbnN0IHN0YXJ0RGF5ID0gc3RhcnQuZ2V0RGF0ZSgpOwogICAgICAgICAgICAgICAgIGNvbnN0IHN0YXJ0TW9udGggPSBzdGFydC50b0xvY2FsZURhdGVTdHJpbmcoJ2ZyLUZSJywgb3B0aW9uc01vbnRoKTsKICAgICAgICAgICAgICAgICBjb25zdCBlbmREYXkgPSBlbmQuZ2V0RGF0ZSgpOwogICAgICAgICAgICAgICAgIGNvbnN0IGVuZE1vbnRoID0gZW5kLnRvTG9jYWxlRGF0ZVN0cmluZygnZnItRlInLCBvcHRpb25zTW9udGgpOwogICAgICAgICAgICAgICAgIGNvbnN0IGVuZFllYXIgPSBlbmQuZ2V0RnVsbFllYXIoKTsKICAgICAgICAgICAgICAgICBkYXRlU3RyID0gYER1Jm5ic3A7JHtzdGFydERheX0mbmJzcDske3N0YXJ0TW9udGh9Jm5ic3A7YXUmbmJzcDske2VuZERheX0mbmJzcDske2VuZE1vbnRofSZuYnNwOyR7ZW5kWWVhcn1gOwogICAgICAgICAgICB9CgogICAgICAgICAgICBjb25zdCBncm91cGVkID0ge307CiAgICAgICAgICAgIGN1cnJlbnRJdGVtcy5mb3JFYWNoKGl0ZW0gPT4geyBpZighZ3JvdXBlZFtpdGVtLmNhdGVnb3J5XSkgZ3JvdXBlZFtpdGVtLmNhdGVnb3J5XSA9IFtdOyBncm91cGVkW2l0ZW0uY2F0ZWdvcnldLnB1c2goaXRlbSk7IH0pOwoKICAgICAgICAgICAgLy8gLS0tIERZTkFNSUMgSEVBREVSIEdFTkVSQVRJT04gLS0tCiAgICAgICAgICAgIGxldCBoZWFkZXJIdG1sID0gJyc7CgogICAgICAgICAgICAvLyBIYW5kbGUgbGluZSBicmVhayByZXBsYWNlbWVudCBpbiB0aXRsZSBpZiBuZWVkZWQsIGJ1dCBmbGV4IHdyYXAgaGFuZGxlcyBzdGFuZGFyZCBzcGFjZXMuCiAgICAgICAgICAgIC8vIElmIHVzZXIgdHlwZXMgPGJyPiwgaXQgd2lsbCByZW5kZXIuCiAgICAgICAgICAgIAogICAgICAgICAgICBpZihsYXlvdXQgPT09ICdtb2Rlcm4nKSB7CiAgICAgICAgICAgICAgICAvLyBDRU5UUsOJCiAgICAgICAgICAgICAgICBoZWFkZXJIdG1sID0gYAogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZsZXggZmxleC1jb2wgaXRlbXMtY2VudGVyIHRleHQtY2VudGVyIGhlYWRlci1ibG9jayAke3QuYm9yZGVyfSI+CiAgICAgICAgICAgICAgICAgICAgICAgICR7ZXN0YWJsaXNobWVudC5sb2dvID8gYDxpbWcgc3JjPSIke2VzdGFibGlzaG1lbnQubG9nb30iIGNsYXNzPSJoLTI0IG9iamVjdC1jb250YWluIG1iLTQiIC8+YCA6ICcnfQogICAgICAgICAgICAgICAgICAgICAgICA8aDEgY2xhc3M9InRleHQtM3hsIGZvbnQtYmxhY2sgdXBwZXJjYXNlIHRyYWNraW5nLXdpZGVzdCAke3QudGl0bGV9IG1iLTIgbGVhZGluZy10aWdodCI+JHtkb2NUaXRsZX08L2gxPgogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJ0ZXh0LXhsIGZvbnQtYm9sZCB0ZXh0LXNsYXRlLTcwMCBtYi0yIj4ke2VzdGFibGlzaG1lbnQubmFtZX08L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTMgdGV4dC1zbSB0ZXh0LXNsYXRlLTUwMCBmb250LW1lZGl1bSBiZy1zbGF0ZS01MCBweC00IHB5LTEgcm91bmRlZC1mdWxsIGJvcmRlciBib3JkZXItc2xhdGUtMTAwIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuPk7CsCR7bnVtfTwvc3Bhbj4gPHNwYW4gY2xhc3M9InRleHQtc2xhdGUtMzAwIj7igKI8L3NwYW4+IDxzcGFuPiR7ZGF0ZVN0cn08L3NwYW4+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgYDsKICAgICAgICAgICAgfSBlbHNlIGlmIChsYXlvdXQgPT09ICdiYW5uZXInKSB7CiAgICAgICAgICAgICAgICAvLyBCQU5ERUFVCiAgICAgICAgICAgICAgICBoZWFkZXJIdG1sID0gYAogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImhlYWRlci1ibG9jayI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9IiR7dC5iYWRnZX0gcC02IHRleHQtd2hpdGUgZmxleCBqdXN0aWZ5LWJldHdlZW4gaXRlbXMtY2VudGVyIHJvdW5kZWQtdC14bCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDEgY2xhc3M9InRleHQtMnhsIGZvbnQtYmxhY2sgdXBwZXJjYXNlIHRyYWNraW5nLXdpZGVzdCBtYi0xIj4ke2RvY1RpdGxlfTwvaDE+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzPSJvcGFjaXR5LTkwIHRleHQtc20gZm9udC1tZWRpdW0iPk7CsCR7bnVtfSDigKIgJHtkYXRlU3RyfTwvcD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgJHtlc3RhYmxpc2htZW50LmxvZ28gPyBgPGltZyBzcmM9IiR7ZXN0YWJsaXNobWVudC5sb2dvfSIgY2xhc3M9ImgtMTYgdy0xNiBvYmplY3QtY29udGFpbiBiZy13aGl0ZSByb3VuZGVkLWxnIHAtMSBzaGFkb3ctc20iIC8+YCA6ICcnfQogICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iYmctc2xhdGUtNTAgcC0zIGJvcmRlci14IGJvcmRlci1iIGJvcmRlci1zbGF0ZS0yMDAgdGV4dC1jZW50ZXIgdGV4dC14cyBmb250LWJvbGQgdXBwZXJjYXNlIHRleHQtc2xhdGUtNTAwIHRyYWNraW5nLXdpZGUgcm91bmRlZC1iLXhsIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICR7ZXN0YWJsaXNobWVudC5uYW1lfSDigKIgJHtlc3RhYmxpc2htZW50LmFkZHJlc3N9CiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgYDsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIC8vIENMQVNTSUMgKERlZmF1bHQpCiAgICAgICAgICAgICAgICBoZWFkZXJIdG1sID0gYAogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZsZXgganVzdGlmeS1iZXR3ZWVuIGl0ZW1zLWVuZCBoZWFkZXItYmxvY2sgJHt0LmJvcmRlcn0iPgogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJ3LTEvMiBmbGV4IGZsZXgtY29sIGl0ZW1zLXN0YXJ0Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICR7ZXN0YWJsaXNobWVudC5sb2dvID8gYDxpbWcgc3JjPSIke2VzdGFibGlzaG1lbnQubG9nb30iIGNsYXNzPSJoLTI0IG9iamVjdC1jb250YWluIG1iLTMiIC8+YCA6ICcnfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3M9ImZvbnQtYm9sZCB0ZXh0LXNsYXRlLTkwMCB0ZXh0LWxnIGxlYWRpbmctdGlnaHQiPiR7ZXN0YWJsaXNobWVudC5uYW1lfTwvcD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzPSJ0ZXh0LXNtIHRleHQtc2xhdGUtNjAwIj4ke2VzdGFibGlzaG1lbnQuYWRkcmVzc308L3A+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJ3LTEvMiB0ZXh0LXJpZ2h0Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMSBjbGFzcz0idGV4dC0zeGwgZm9udC1ib2xkIHVwcGVyY2FzZSB0cmFja2luZy13aWRlc3QgJHt0LnRpdGxlfSBsZWFkaW5nLXRpZ2h0IG1iLTIiPiR7ZG9jVGl0bGV9PC9oMT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InRleHQtNHhsIGZvbnQtYmxhY2sgdGV4dC1zbGF0ZS04MDAiPk7CsCR7bnVtfTwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3M9Im10LTIgZm9udC1tZWRpdW0gJHt0LmFjY2VudH0iPiR7ZGF0ZVN0cn08L3A+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgYDsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgbGV0IGh0bWwgPSBoZWFkZXJIdG1sOwoKICAgICAgICAgICAgbGV0IGNvdW50ZXIgPSAxOwogICAgICAgICAgICBtYXN0ZXJDYXRlZ29yaWVzLmZvckVhY2goY2F0ID0+IHsKICAgICAgICAgICAgICAgIGNvbnN0IGl0ZW1zID0gZ3JvdXBlZFtjYXRdOwogICAgICAgICAgICAgICAgaWYoaXRlbXMgJiYgaXRlbXMubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgICAgICAgIGh0bWwgKz0gYAogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJtYi02IGJyZWFrLWluc2lkZS1hdm9pZCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDIgY2xhc3M9InRleHQtbGcgZm9udC1ib2xkICR7dC5tYWlufSBib3JkZXItYiAke3Quc3ViQm9yZGVyfSBwYi0xIG1iLTMgdXBwZXJjYXNlIGZsZXggaXRlbXMtY2VudGVyIGdhcC0yIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz0iJHt0LmJhZGdlfSB0ZXh0LXdoaXRlIHctNiBoLTYgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgcm91bmRlZC1mdWxsIHRleHQteHMgZm9udC1ib2xkIj4ke2NvdW50ZXJ9PC9zcGFuPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR7Y2F0fQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9oMj4KICAgICAgICAgICAgICAgICAgICBgOwogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIGlmKGNhdC5pbmNsdWRlcygnQUdFTkRBJykpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaHRtbCArPSBgPHRhYmxlIGNsYXNzPSJ3LWZ1bGwgdGV4dC1zbSBib3JkZXItY29sbGFwc2UiPmA7CiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1zLmZvckVhY2goaXRlbSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkaXNwbGF5RGF0ZSA9IGZvcm1hdERhdGVGb3JEaXNwbGF5KGl0ZW0uZGF0ZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBodG1sICs9IGAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dHIgY2xhc3M9ImJvcmRlci1iIGJvcmRlci1zbGF0ZS0xMDAiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQgY2xhc3M9InB5LTIgZm9udC1ib2xkICR7dC5hY2NlbnR9IHctMS80IGFsaWduLXRvcCB1cHBlcmNhc2UgdGV4dC14cyB0cmFja2luZy13aWRlIGNhcGl0YWxpemUiPiR7ZGlzcGxheURhdGUgfHwgJyd9PC90ZD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIGNsYXNzPSJweS0yIGFsaWduLXRvcCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb250LWJvbGQgdGV4dC1zbGF0ZS04MDAiPiR7aXRlbS50aXRsZX08L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InRleHQtc2xhdGUtNjAwIHRleHQteHMgbXQtMSByaWNoLXRleHQtY29udGVudCI+JHtpdGVtLmNvbnRlbnR9PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90cj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGA7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICBodG1sICs9IGA8L3RhYmxlPmA7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgaXRlbXMuZm9yRWFjaChpdGVtID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGRpc3BsYXlEYXRlID0gZm9ybWF0RGF0ZUZvckRpc3BsYXkoaXRlbS5kYXRlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGRhdGVIdG1sID0gZGlzcGxheURhdGUgPyBgPHNwYW4gY2xhc3M9IiR7dC5hY2NlbnR9IGZvbnQtYm9sZCBtci0xIHRleHQteHMgdXBwZXJjYXNlIHRyYWNraW5nLXdpZGUgY2FwaXRhbGl6ZSI+WyR7ZGlzcGxheURhdGV9XTwvc3Bhbj5gIDogJyc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBodG1sICs9IGAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJtYi0zIHBsLTQgYm9yZGVyLWwtNCBib3JkZXItc2xhdGUtMTAwIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHtpdGVtLnRpdGxlID8gYDxkaXYgY2xhc3M9ImZvbnQtYm9sZCB0ZXh0LXNsYXRlLTgwMCB0ZXh0LXNtIG1iLTEiPiR7ZGF0ZUh0bWx9JHtpdGVtLnRpdGxlfTwvZGl2PmAgOiAnJ30KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0idGV4dC1zbSB0ZXh0LXNsYXRlLTcwMCB0ZXh0LWp1c3RpZnkgbGVhZGluZy1yZWxheGVkIHJpY2gtdGV4dC1jb250ZW50Ij4keyFpdGVtLnRpdGxlID8gZGF0ZUh0bWwgOiAnJ30ke2l0ZW0uY29udGVudH08L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGA7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBodG1sICs9IGA8L2Rpdj5gOwogICAgICAgICAgICAgICAgICAgIGNvdW50ZXIrKzsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAvLyBTaWduYXRhaXJlCiAgICAgICAgICAgIGh0bWwgKz0gYAogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ibXQtMTIgcHQtNCBib3JkZXItdC0yIGJvcmRlci1zbGF0ZS0xMDAgYnJlYWstaW5zaWRlLWF2b2lkIGZsZXgganVzdGlmeS1lbmQiPgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InRleHQtcmlnaHQiPgogICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzcz0iZm9udC1ib2xkIHRleHQtc2xhdGUtODAwIG1iLTEiPkZhaXQgbGUgOiAke3B1YkRhdGVTdHJ9PC9wPgogICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzcz0idGV4dC1zbGF0ZS02MDAgdGV4dC1zbSBpdGFsaWMiPnBhciAke3NpZ25hdG9yeX0sPC9wPgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIGA7CiAgICAgICAgICAgIAogICAgICAgICAgICAvLyBGb290ZXIgRml4ZSAoQ3VzdG9tKQogICAgICAgICAgICBpZihkb2NGb290ZXIpIHsKICAgICAgICAgICAgICAgIGh0bWwgKz0gYDxkaXYgY2xhc3M9InBkZi1mb290ZXItZml4ZWQiPiR7ZG9jRm9vdGVyfTwvZGl2PmA7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGNvbnRhaW5lci5pbm5lckhUTUwgPSBodG1sOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gZ2VuZXJhdGVQREYoKSB7CiAgICAgICAgICAgIGlmICh0eXBlb2YgaHRtbDJwZGYgPT09ICd1bmRlZmluZWQnKSB7IGFsZXJ0KCdMZSBtb2R1bGUgUERGIGVzdCBlbiBjb3VycyBkZSBjaGFyZ2VtZW50LiBSw6llc3NheWV6IGRhbnMgcXVlbHF1ZXMgc2Vjb25kZXMuJyk7IHJldHVybjsgfQogICAgICAgICAgICBjb25zdCBlbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BkZi1jb250ZW50Jyk7CiAgICAgICAgICAgIGNvbnN0IG51bSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdiaS1udW1iZXInKS52YWx1ZTsKICAgICAgICAgICAgY29uc3Qgb3B0ID0gewogICAgICAgICAgICAgICAgbWFyZ2luOiAgICAgICAwLAogICAgICAgICAgICAgICAgZmlsZW5hbWU6ICAgICBgQklfTiR7bnVtfV8ke25ldyBEYXRlKCkudG9JU09TdHJpbmcoKS5zbGljZSgwLDEwKX0ucGRmYCwKICAgICAgICAgICAgICAgIGltYWdlOiAgICAgICAgeyB0eXBlOiAnanBlZycsIHF1YWxpdHk6IDAuOTggfSwKICAgICAgICAgICAgICAgIGh0bWwyY2FudmFzOiAgeyBzY2FsZTogMiB9LAogICAgICAgICAgICAgICAganNQREY6ICAgICAgICB7IHVuaXQ6ICdtbScsIGZvcm1hdDogJ2E0Jywgb3JpZW50YXRpb246ICdwb3J0cmFpdCcgfQogICAgICAgICAgICB9OwogICAgICAgICAgICBodG1sMnBkZigpLnNldChvcHQpLmZyb20oZWxlbWVudCkuc2F2ZSgpOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gZ2VuZXJhdGVET0NYKCkgewogICAgICAgICAgICBpZiAodHlwZW9mIGh0bWxEb2N4ID09PSAndW5kZWZpbmVkJykgeyBhbGVydCgnTGUgbW9kdWxlIFdvcmQgZXN0IGVuIGNvdXJzIGRlIGNoYXJnZW1lbnQuIFLDqWVzc2F5ZXogZGFucyBxdWVscXVlcyBzZWNvbmRlcy4nKTsgcmV0dXJuOyB9CiAgICAgICAgICAgIGNvbnN0IGNvbnRlbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGRmLWNvbnRlbnQnKS5jbG9uZU5vZGUodHJ1ZSk7CiAgICAgICAgICAgIGNvbnN0IGNzc1dvcmQgPSBgCiAgICAgICAgICAgICAgICA8c3R5bGU+CiAgICAgICAgICAgICAgICAgICAgYm9keSB7IGZvbnQtZmFtaWx5OiAnQXJpYWwnLCBzYW5zLXNlcmlmOyBmb250LXNpemU6IDExcHQ7IGxpbmUtaGVpZ2h0OiAxLjU7IGNvbG9yOiAjMWUyOTNiOyB9CiAgICAgICAgICAgICAgICAgICAgaDEgeyBjb2xvcjogIzFlNDBhZjsgZm9udC1zaXplOiAyMHB0OyB0ZXh0LXRyYW5zZm9ybTogdXBwZXJjYXNlOyBmb250LXdlaWdodDogYm9sZDsgbWFyZ2luLWJvdHRvbTogNXB4OyB9CiAgICAgICAgICAgICAgICAgICAgaDIgeyBjb2xvcjogIzFlNDBhZjsgZm9udC1zaXplOiAxNHB0OyBib3JkZXItYm90dG9tOiAycHggc29saWQgI2JmZGJmZTsgcGFkZGluZy1ib3R0b206IDVweDsgbWFyZ2luLXRvcDogMTVweDsgbWFyZ2luLWJvdHRvbTogMTBweDsgdGV4dC10cmFuc2Zvcm06IHVwcGVyY2FzZTsgfQogICAgICAgICAgICAgICAgICAgIC5oZWFkZXItYmxvY2sgeyBtYXJnaW4tYm90dG9tOiAyMHB4OyBib3JkZXItYm90dG9tOiAycHggc29saWQgIzFkNGVkODsgcGFkZGluZy1ib3R0b206IDEwcHg7IH0KICAgICAgICAgICAgICAgICAgICBwIHsgbWFyZ2luLWJvdHRvbTogOHB4OyB9CiAgICAgICAgICAgICAgICAgICAgdGFibGUgeyB3aWR0aDogMTAwJTsgYm9yZGVyLWNvbGxhcHNlOiBjb2xsYXBzZTsgbWFyZ2luLWJvdHRvbTogMTVweDsgfQogICAgICAgICAgICAgICAgICAgIHRkIHsgcGFkZGluZzogNnB4OyB2ZXJ0aWNhbC1hbGlnbjogdG9wOyBib3JkZXItYm90dG9tOiAxcHggc29saWQgI2UyZThmMDsgfQogICAgICAgICAgICAgICAgICAgIC5mb250LWJvbGQgeyBmb250LXdlaWdodDogYm9sZDsgfQogICAgICAgICAgICAgICAgICAgIC5pdGFsaWMgeyBmb250LXN0eWxlOiBpdGFsaWM7IH0KICAgICAgICAgICAgICAgICAgICAudGV4dC1yaWdodCB7IHRleHQtYWxpZ246IHJpZ2h0OyB9CiAgICAgICAgICAgICAgICAgICAgLnRleHQtY2VudGVyIHsgdGV4dC1hbGlnbjogY2VudGVyOyB9CiAgICAgICAgICAgICAgICAgICAgLnVwcGVyY2FzZSB7IHRleHQtdHJhbnNmb3JtOiB1cHBlcmNhc2U7IH0KICAgICAgICAgICAgICAgICAgICAudGV4dC1ibHVlLTkwMCB7IGNvbG9yOiAjMWUzYThhOyB9CiAgICAgICAgICAgICAgICAgICAgLnRleHQtb3JhbmdlLTYwMCB7IGNvbG9yOiAjZWE1ODBjOyB9CiAgICAgICAgICAgICAgICAgICAgLnRleHQtc2xhdGUtNTAwIHsgY29sb3I6ICM2NDc0OGI7IH0KICAgICAgICAgICAgICAgICAgICAudGV4dC14cyB7IGZvbnQtc2l6ZTogOXB0OyB9CiAgICAgICAgICAgICAgICAgICAgdWwgeyBtYXJnaW4tbGVmdDogMjBweDsgbGlzdC1zdHlsZS10eXBlOiBkaXNjOyB9CiAgICAgICAgICAgICAgICAgICAgb2wgeyBtYXJnaW4tbGVmdDogMjBweDsgbGlzdC1zdHlsZS10eXBlOiBkZWNpbWFsOyB9CiAgICAgICAgICAgICAgICA8L3N0eWxlPgogICAgICAgICAgICBgOwoKICAgICAgICAgICAgY29uc3QgaHRtbFN0cmluZyA9IGAKICAgICAgICAgICAgICAgIDwhRE9DVFlQRSBodG1sPgogICAgICAgICAgICAgICAgPGh0bWw+CiAgICAgICAgICAgICAgICA8aGVhZD4KICAgICAgICAgICAgICAgICAgICA8bWV0YSBjaGFyc2V0PSJ1dGYtOCI+CiAgICAgICAgICAgICAgICAgICAgJHtjc3NXb3JkfQogICAgICAgICAgICAgICAgPC9oZWFkPgogICAgICAgICAgICAgICAgPGJvZHk+CiAgICAgICAgICAgICAgICAgICAgJHtjb250ZW50LmlubmVySFRNTH0KICAgICAgICAgICAgICAgIDwvYm9keT4KICAgICAgICAgICAgICAgIDwvaHRtbD4KICAgICAgICAgICAgYDsKCiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBjb25zdCBjb252ZXJ0ZWQgPSBodG1sRG9jeC5hc0Jsb2IoaHRtbFN0cmluZywgewogICAgICAgICAgICAgICAgICAgIG9yaWVudGF0aW9uOiAncG9ydHJhaXQnLAogICAgICAgICAgICAgICAgICAgIG1hcmdpbnM6IHsgdG9wOiA3MjAsIHJpZ2h0OiA3MjAsIGJvdHRvbTogNzIwLCBsZWZ0OiA3MjAgfQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIGNvbnN0IG51bSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdiaS1udW1iZXInKS52YWx1ZTsKICAgICAgICAgICAgICAgIHNhdmVBcyhjb252ZXJ0ZWQsIGBCSV9OJHtudW19XyR7bmV3IERhdGUoKS50b0lTT1N0cmluZygpLnNsaWNlKDAsMTApfS5kb2N4YCk7CiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgIGFsZXJ0KCJFcnJldXIgbG9ycyBkZSBsYSBnw6luw6lyYXRpb24gV29yZCA6ICIgKyBlLm1lc3NhZ2UpOwogICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlKTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gZXhwb3J0RGF0YSgpIHsKICAgICAgICAgICAgY29uc3QgZGF0YSA9IHsKICAgICAgICAgICAgICAgIGVzdGFibGlzaG1lbnQsIGJ1bGxldGlucywgCiAgICAgICAgICAgICAgICBjYXRlZ29yaWVzOiBtYXN0ZXJDYXRlZ29yaWVzLAogICAgICAgICAgICAgICAgZXhwb3J0RGF0ZTogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLAogICAgICAgICAgICAgICAgdmVyc2lvbjogImJpYmFzZS12My4wIgogICAgICAgICAgICB9OwogICAgICAgICAgICBjb25zdCBkYXRhU3RyID0gImRhdGE6dGV4dC9qc29uO2NoYXJzZXQ9dXRmLTgsIiArIGVuY29kZVVSSUNvbXBvbmVudChKU09OLnN0cmluZ2lmeShkYXRhKSk7CiAgICAgICAgICAgIGNvbnN0IGRvd25sb2FkQW5jaG9yTm9kZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTsKICAgICAgICAgICAgZG93bmxvYWRBbmNob3JOb2RlLnNldEF0dHJpYnV0ZSgiaHJlZiIsIGRhdGFTdHIpOwogICAgICAgICAgICBkb3dubG9hZEFuY2hvck5vZGUuc2V0QXR0cmlidXRlKCJkb3dubG9hZCIsIGBiaWJhc2Vfc2F1dmVnYXJkZV8ke25ldyBEYXRlKCkudG9JU09TdHJpbmcoKS5zbGljZSgwLDEwKX0uanNvbmApOwogICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGRvd25sb2FkQW5jaG9yTm9kZSk7CiAgICAgICAgICAgIGRvd25sb2FkQW5jaG9yTm9kZS5jbGljaygpOwogICAgICAgICAgICBkb3dubG9hZEFuY2hvck5vZGUucmVtb3ZlKCk7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBpbXBvcnREYXRhKGlucHV0KSB7CiAgICAgICAgICAgIGNvbnN0IGZpbGUgPSBpbnB1dC5maWxlc1swXTsKICAgICAgICAgICAgaWYgKCFmaWxlKSByZXR1cm47CiAgICAgICAgICAgIGNvbnN0IHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7CiAgICAgICAgICAgIHJlYWRlci5vbmxvYWQgPSBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBKU09OLnBhcnNlKGUudGFyZ2V0LnJlc3VsdCk7CiAgICAgICAgICAgICAgICAgICAgaWYoY29uZmlybSgi4pqg77iPIEF0dGVudGlvbiA6IENlbGEgdmEgcmVtcGxhY2VyIHRvdXRlcyB2b3MgZG9ubsOpZXMgYWN0dWVsbGVzIHBhciBjZWxsZXMgZHUgZmljaGllci4gQ29udGludWVyID8iKSkgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YS5lc3RhYmxpc2htZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlc3RhYmxpc2htZW50ID0gZGF0YS5lc3RhYmxpc2htZW50OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2JpYmFzZV9lc3RhYmxpc2htZW50JywgSlNPTi5zdHJpbmdpZnkoZXN0YWJsaXNobWVudCkpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkYXRhLmJ1bGxldGlucykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnVsbGV0aW5zID0gZGF0YS5idWxsZXRpbnM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnYmliYXNlX2J1bGxldGlucycsIEpTT04uc3RyaW5naWZ5KGJ1bGxldGlucykpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkYXRhLmNhdGVnb3JpZXMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hc3RlckNhdGVnb3JpZXMgPSBkYXRhLmNhdGVnb3JpZXM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzYXZlQ2F0ZWdvcmllcygpOwogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGRhdGEuY3VzdG9tQ2F0ZWdvcmllcykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFzdGVyQ2F0ZWdvcmllcyA9IFsuLi5ERUZBVUxUX0NBVEVHT1JJRVMsIC4uLmRhdGEuY3VzdG9tQ2F0ZWdvcmllc107CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzYXZlQ2F0ZWdvcmllcygpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGFsZXJ0KCLinIUgRG9ubsOpZXMgcmVzdGF1csOpZXMgYXZlYyBzdWNjw6hzICEiKTsKICAgICAgICAgICAgICAgICAgICAgICAgbG9jYXRpb24ucmVsb2FkKCk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7IGFsZXJ0KCLinYwgRXJyZXVyIDogTGUgZmljaGllciBzZW1ibGUgaW52YWxpZGUuIik7IH0KICAgICAgICAgICAgfTsKICAgICAgICAgICAgcmVhZGVyLnJlYWRBc1RleHQoZmlsZSk7CiAgICAgICAgICAgIGlucHV0LnZhbHVlID0gJyc7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiByZXNldERhdGEoKSB7CiAgICAgICAgICAgIGlmKGNvbmZpcm0oIuKaoO+4jyBBVFRFTlRJT04gOiBUb3V0IGVmZmFjZXIgPyIpKSB7CiAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2UuY2xlYXIoKTsKICAgICAgICAgICAgICAgIGFsZXJ0KCLimbvvuI8gQXBwbGljYXRpb24gcsOpaW5pdGlhbGlzw6llLiIpOwogICAgICAgICAgICAgICAgbG9jYXRpb24ucmVsb2FkKCk7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIG9wZW5TZXR0aW5ncygpIHsgLyogbW92ZWQgdG8gd3JhcHBlciBBbHQrUCAqLyB9CiAgICAgICAgZnVuY3Rpb24gY2xvc2VTZXR0aW5ncygpIHt9CiAgICAgICAgZnVuY3Rpb24gaGFuZGxlTG9nb1VwbG9hZChpbnB1dCkgeyAvKiBsb2dvIGZyb20gd3JhcHBlciAqLyB9CiAgICAgICAgZnVuY3Rpb24gc2F2ZVNldHRpbmdzKCkgeyAvKiBtb3ZlZCB0byB3cmFwcGVyICovIH0KICAgIAogICAgICAgIC8vIExpc3RlbiBmb3Igc2V0dGluZ3MgZnJvbSBDQURJUiB3cmFwcGVyCiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgIGlmICghZS5kYXRhKSByZXR1cm47CiAgICAgICAgICAgIGlmIChlLmRhdGEudHlwZSA9PT0gJ3BpbG90ZS1zZXR0aW5ncycpIHsKICAgICAgICAgICAgICAgIHZhciBkID0gZS5kYXRhLmRhdGE7CiAgICAgICAgICAgICAgICBpZiAoZC5zY2hvb2wpIGVzdGFibGlzaG1lbnQubmFtZSA9IGQuc2Nob29sOwogICAgICAgICAgICAgICAgaWYgKGQuY2l0eSkgZXN0YWJsaXNobWVudC5hZGRyZXNzID0gZC5jaXR5OwogICAgICAgICAgICAgICAgaWYgKGQubG9nb1NyYykgZXN0YWJsaXNobWVudC5sb2dvID0gZC5sb2dvU3JjOwogICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2JpYmFzZV9lc3RhYmxpc2htZW50JywgSlNPTi5zdHJpbmdpZnkoZXN0YWJsaXNobWVudCkpOwogICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB1cGRhdGVQcmV2aWV3ID09PSAnZnVuY3Rpb24nKSB1cGRhdGVQcmV2aWV3KCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKGUuZGF0YS50eXBlID09PSAnYmliYXNlLXNldHRpbmdzJykgewogICAgICAgICAgICAgICAgdmFyIHMgPSBlLmRhdGEuZGF0YTsKICAgICAgICAgICAgICAgIGlmIChzLmxheW91dCkgZXN0YWJsaXNobWVudC5sYXlvdXQgPSBzLmxheW91dDsKICAgICAgICAgICAgICAgIGlmIChzLmZvbnQpIGVzdGFibGlzaG1lbnQuZm9udCA9IHMuZm9udDsKICAgICAgICAgICAgICAgIGlmIChzLmRlZmF1bHRTaWduYXRvcnkpIGVzdGFibGlzaG1lbnQuZGVmYXVsdFNpZ25hdG9yeSA9IHMuZGVmYXVsdFNpZ25hdG9yeTsKICAgICAgICAgICAgICAgIGlmIChzLmRvY1RpdGxlKSBlc3RhYmxpc2htZW50LmRvY1RpdGxlID0gcy5kb2NUaXRsZTsKICAgICAgICAgICAgICAgIGlmIChzLmRvY0Zvb3RlciAhPT0gdW5kZWZpbmVkKSBlc3RhYmxpc2htZW50LmRvY0Zvb3RlciA9IHMuZG9jRm9vdGVyOwogICAgICAgICAgICAgICAgaWYgKHMubmFtZSkgZXN0YWJsaXNobWVudC5uYW1lID0gcy5uYW1lOwogICAgICAgICAgICAgICAgaWYgKHMuYWRkcmVzcykgZXN0YWJsaXNobWVudC5hZGRyZXNzID0gcy5hZGRyZXNzOwogICAgICAgICAgICAgICAgaWYgKHMubG9nbykgZXN0YWJsaXNobWVudC5sb2dvID0gcy5sb2dvOwogICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2JpYmFzZV9lc3RhYmxpc2htZW50JywgSlNPTi5zdHJpbmdpZnkoZXN0YWJsaXNobWVudCkpOwogICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB1cGRhdGVQcmV2aWV3ID09PSAnZnVuY3Rpb24nKSB1cGRhdGVQcmV2aWV3KCk7CiAgICAgICAgICAgIH0KICAgICAgICB9KTsKICAgIAogICAgICAgIC8vIEZhbGxiYWNrOiBpZiBET01Db250ZW50TG9hZGVkIGFscmVhZHkgZmlyZWQsIHJ1biBpbml0CiAgICAgICAgaWYgKGRvY3VtZW50LnJlYWR5U3RhdGUgPT09ICdjb21wbGV0ZScgfHwgZG9jdW1lbnQucmVhZHlTdGF0ZSA9PT0gJ2ludGVyYWN0aXZlJykgewogICAgICAgICAgICBzZXRUaW1lb3V0KGluaXRBcHAsIDIwMCk7CiAgICAgICAgfQogICAgCiAgICBmdW5jdGlvbiBvcGVuQmlQYXJhbXMoKSB7IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdiaS1wYXJhbXMtbW9kYWwnKS5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnOyB9CiAgICBmdW5jdGlvbiBjbG9zZUJpUGFyYW1zKCkgeyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYmktcGFyYW1zLW1vZGFsJykuc3R5bGUuZGlzcGxheSA9ICdub25lJzsgc2F2ZUN1cnJlbnRCdWxsZXRpbigpOyByZW5kZXJCdWxsZXRpbkxpc3QoKTsgdXBkYXRlUHJldmlldygpOyB9CiAgICB3aW5kb3cub3BlbkJpUGFyYW1zID0gb3BlbkJpUGFyYW1zOwogICAgd2luZG93LmNsb3NlQmlQYXJhbXMgPSBjbG9zZUJpUGFyYW1zOwo8L3NjcmlwdD4KCjxkaXYgaWQ9ImJpLXBhcmFtcy1tb2RhbCIgc3R5bGU9ImRpc3BsYXk6bm9uZTtwb3NpdGlvbjpmaXhlZDtpbnNldDowO2JhY2tncm91bmQ6cmdiYSgwLDAsMCwuNDUpO3otaW5kZXg6OTk5OTthbGlnbi1pdGVtczpjZW50ZXI7anVzdGlmeS1jb250ZW50OmNlbnRlciIgb25jbGljaz0iaWYoZXZlbnQudGFyZ2V0PT09dGhpcyljbG9zZUJpUGFyYW1zKCkiPgo8ZGl2IHN0eWxlPSJiYWNrZ3JvdW5kOiNmZmY7Ym9yZGVyLXJhZGl1czoxNnB4O3BhZGRpbmc6MjRweCAyOHB4O3dpZHRoOjUyMHB4O21heC13aWR0aDo5MnZ3O21heC1oZWlnaHQ6OTB2aDtvdmVyZmxvdy15OmF1dG87Ym94LXNoYWRvdzowIDIwcHggNjBweCByZ2JhKDAsMCwwLC4yNSkiPgo8ZGl2IHN0eWxlPSJkaXNwbGF5OmZsZXg7anVzdGlmeS1jb250ZW50OnNwYWNlLWJldHdlZW47YWxpZ24taXRlbXM6Y2VudGVyO21hcmdpbi1ib3R0b206MThweCI+CjxoMyBzdHlsZT0ibWFyZ2luOjA7Zm9udC1zaXplOjEuMDVyZW07Zm9udC13ZWlnaHQ6NzAwO2NvbG9yOiMxZTI5M2IiPuKame+4jyBQYXJhbcOodHJlcyBkdSBidWxsZXRpbjwvaDM+CjxidXR0b24gb25jbGljaz0iY2xvc2VCaVBhcmFtcygpIiBzdHlsZT0iYmFja2dyb3VuZDpub25lO2JvcmRlcjpub25lO2ZvbnQtc2l6ZToxLjNyZW07Y3Vyc29yOnBvaW50ZXI7Y29sb3I6Izk0YTNiODtwYWRkaW5nOjRweCI+JnRpbWVzOzwvYnV0dG9uPgo8L2Rpdj4KPGRpdiBzdHlsZT0iZGlzcGxheTpncmlkO2dyaWQtdGVtcGxhdGUtY29sdW1uczoxMDBweCAxZnI7Z2FwOjEycHg7bWFyZ2luLWJvdHRvbToxNHB4Ij4KPGRpdj4KPGxhYmVsIHN0eWxlPSJkaXNwbGF5OmJsb2NrO2ZvbnQtc2l6ZTouN3JlbTtmb250LXdlaWdodDo3MDA7Y29sb3I6Izk0YTNiODt0ZXh0LXRyYW5zZm9ybTp1cHBlcmNhc2U7bGV0dGVyLXNwYWNpbmc6LjVweDttYXJnaW4tYm90dG9tOjRweCI+TnVtw6lybzwvbGFiZWw+CjxpbnB1dCB0eXBlPSJudW1iZXIiIGlkPSJiaS1udW1iZXIiIG9uaW5wdXQ9InRyaWdnZXJBdXRvU2F2ZSgpIiBzdHlsZT0id2lkdGg6MTAwJTtwYWRkaW5nOjhweCAxMnB4O2JvcmRlcjoycHggc29saWQgI2YxZjVmOTtib3JkZXItcmFkaXVzOjEwcHg7Zm9udC1zaXplOjFyZW07Zm9udC13ZWlnaHQ6NzAwO2NvbG9yOiMxZTNhNWY7b3V0bGluZTpub25lIiBwbGFjZWhvbGRlcj0iTsKwIj4KPC9kaXY+CjxkaXY+CjxsYWJlbCBzdHlsZT0iZGlzcGxheTpibG9jaztmb250LXNpemU6LjdyZW07Zm9udC13ZWlnaHQ6NzAwO2NvbG9yOiM5NGEzYjg7dGV4dC10cmFuc2Zvcm06dXBwZXJjYXNlO2xldHRlci1zcGFjaW5nOi41cHg7bWFyZ2luLWJvdHRvbTo0cHgiPlDDqXJpb2RlIChTZW1haW5lKTwvbGFiZWw+CjxkaXYgc3R5bGU9ImRpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXI7Z2FwOjZweCI+CjxpbnB1dCB0eXBlPSJkYXRlIiBpZD0iYmktZGF0ZS1zdGFydCIgb25pbnB1dD0idHJpZ2dlckF1dG9TYXZlKCkiIHN0eWxlPSJmbGV4OjE7cGFkZGluZzo4cHggMTBweDtib3JkZXI6MnB4IHNvbGlkICNmMWY1Zjk7Ym9yZGVyLXJhZGl1czoxMHB4O2ZvbnQtc2l6ZTouODVyZW07b3V0bGluZTpub25lIj4KPHNwYW4gc3R5bGU9ImNvbG9yOiNjYmQ1ZTEiPuKGkjwvc3Bhbj4KPGlucHV0IHR5cGU9ImRhdGUiIGlkPSJiaS1kYXRlLWVuZCIgb25pbnB1dD0idHJpZ2dlckF1dG9TYXZlKCkiIHN0eWxlPSJmbGV4OjE7cGFkZGluZzo4cHggMTBweDtib3JkZXI6MnB4IHNvbGlkICNmMWY1Zjk7Ym9yZGVyLXJhZGl1czoxMHB4O2ZvbnQtc2l6ZTouODVyZW07b3V0bGluZTpub25lIj4KPC9kaXY+PC9kaXY+CjwvZGl2Pgo8ZGl2IHN0eWxlPSJkaXNwbGF5OmdyaWQ7Z3JpZC10ZW1wbGF0ZS1jb2x1bW5zOjFmciAxZnI7Z2FwOjEycHg7bWFyZ2luLWJvdHRvbToxNHB4Ij4KPGRpdj4KPGxhYmVsIHN0eWxlPSJkaXNwbGF5OmJsb2NrO2ZvbnQtc2l6ZTouN3JlbTtmb250LXdlaWdodDo3MDA7Y29sb3I6Izk0YTNiODt0ZXh0LXRyYW5zZm9ybTp1cHBlcmNhc2U7bGV0dGVyLXNwYWNpbmc6LjVweDttYXJnaW4tYm90dG9tOjRweCI+RGF0ZSBkZSBwdWJsaWNhdGlvbjwvbGFiZWw+CjxpbnB1dCB0eXBlPSJkYXRlIiBpZD0iYmktcHViLWRhdGUiIG9uaW5wdXQ9InRyaWdnZXJBdXRvU2F2ZSgpIiBzdHlsZT0id2lkdGg6MTAwJTtwYWRkaW5nOjhweCAxMHB4O2JvcmRlcjoycHggc29saWQgI2YxZjVmOTtib3JkZXItcmFkaXVzOjEwcHg7Zm9udC1zaXplOi44NXJlbTtvdXRsaW5lOm5vbmUiPgo8L2Rpdj4KPGRpdj4KPGxhYmVsIHN0eWxlPSJkaXNwbGF5OmJsb2NrO2ZvbnQtc2l6ZTouN3JlbTtmb250LXdlaWdodDo3MDA7Y29sb3I6Izk0YTNiODt0ZXh0LXRyYW5zZm9ybTp1cHBlcmNhc2U7bGV0dGVyLXNwYWNpbmc6LjVweDttYXJnaW4tYm90dG9tOjRweCI+U2lnbmF0YWlyZTwvbGFiZWw+CjxzZWxlY3QgaWQ9ImJpLXNpZ25hdG9yeSIgb25jaGFuZ2U9InRyaWdnZXJBdXRvU2F2ZSgpIiBzdHlsZT0id2lkdGg6MTAwJTtwYWRkaW5nOjhweCAxMHB4O2JvcmRlcjoycHggc29saWQgI2YxZjVmOTtib3JkZXItcmFkaXVzOjEwcHg7Zm9udC1zaXplOi44NXJlbTtvdXRsaW5lOm5vbmU7YmFja2dyb3VuZDojZmZmIj4KPG9wdGlvbiB2YWx1ZT0iTCfDqXF1aXBlIGRlIGRpcmVjdGlvbiI+TCfDqXF1aXBlIGRlIGRpcmVjdGlvbjwvb3B0aW9uPgo8b3B0aW9uIHZhbHVlPSJMZSBwcm92aXNldXIiPkxlIHByb3Zpc2V1cjwvb3B0aW9uPgo8b3B0aW9uIHZhbHVlPSJMZSBwcm92aXNldXIgYWRqb2ludCI+TGUgcHJvdmlzZXVyIGFkam9pbnQ8L29wdGlvbj4KPG9wdGlvbiB2YWx1ZT0iTGEgZGlyZWN0aW9uIj5MYSBkaXJlY3Rpb248L29wdGlvbj4KPC9zZWxlY3Q+PC9kaXY+CjwvZGl2Pgo8ZGl2IHN0eWxlPSJtYXJnaW4tYm90dG9tOjE2cHgiPgo8bGFiZWwgc3R5bGU9ImRpc3BsYXk6YmxvY2s7Zm9udC1zaXplOi43cmVtO2ZvbnQtd2VpZ2h0OjcwMDtjb2xvcjojOTRhM2I4O3RleHQtdHJhbnNmb3JtOnVwcGVyY2FzZTtsZXR0ZXItc3BhY2luZzouNXB4O21hcmdpbi1ib3R0b206NHB4Ij5UaMOobWUgLyBDb3VsZXVycyBQREY8L2xhYmVsPgo8c2VsZWN0IGlkPSJiaS10aGVtZSIgb25jaGFuZ2U9InRyaWdnZXJBdXRvU2F2ZSgpIiBzdHlsZT0id2lkdGg6MTAwJTtwYWRkaW5nOjhweCAxMHB4O2JvcmRlcjoycHggc29saWQgI2YxZjVmOTtib3JkZXItcmFkaXVzOjEwcHg7Zm9udC1zaXplOi44NXJlbTtvdXRsaW5lOm5vbmU7YmFja2dyb3VuZDojZmZmIj4KPG9wdGlvbiB2YWx1ZT0iYmx1ZSI+8J+UtSBCbGV1IEluc3RpdHV0aW9ubmVsPC9vcHRpb24+CjxvcHRpb24gdmFsdWU9ImdyZWVuIj7wn5+iIFZlcnQgTmF0dXJlPC9vcHRpb24+CjxvcHRpb24gdmFsdWU9InB1cnBsZSI+8J+foyBWaW9sZXQgQ3LDqWF0aWY8L29wdGlvbj4KPG9wdGlvbiB2YWx1ZT0icmVkIj7wn5S0IFJvdWdlIMOJbmVyZ2llPC9vcHRpb24+CjxvcHRpb24gdmFsdWU9Im9yYW5nZSI+8J+foCBPcmFuZ2UgRHluYW1pcXVlPC9vcHRpb24+CjxvcHRpb24gdmFsdWU9InRlYWwiPvCfkqAgVHVycXVvaXNlIE1vZGVybmU8L29wdGlvbj4KPG9wdGlvbiB2YWx1ZT0iZ3JleSI+4pqrIFNvYnJpw6l0w6kgKE4mQik8L29wdGlvbj4KPC9zZWxlY3Q+PC9kaXY+CjxkaXYgc3R5bGU9InRleHQtYWxpZ246cmlnaHQiPgo8YnV0dG9uIG9uY2xpY2s9ImNsb3NlQmlQYXJhbXMoKSIgc3R5bGU9InBhZGRpbmc6OHB4IDIwcHg7YmFja2dyb3VuZDojM2I4MmY2O2NvbG9yOiNmZmY7Ym9yZGVyOm5vbmU7Ym9yZGVyLXJhZGl1czoxMHB4O2ZvbnQtd2VpZ2h0OjYwMDtjdXJzb3I6cG9pbnRlcjtmb250LXNpemU6Ljg1cmVtIj7inJMgRmVybWVyPC9idXR0b24+CjwvZGl2Pgo8L2Rpdj48L2Rpdj4KCjwvYm9keT4KPC9odG1sPg=="};

    const STORAGE_KEY = 'pilote_suite_settings';
    let currentModule = null;
    const loadedModules = new Set();
    const blobUrls = {};
    const moduleNames = ['perdir','exam','oral','aed','bibase','bibase'];

    const MODULE_META = {
        perdir: { label:'PERDIR', sublabel:'Direction', icon:'fas fa-building-columns', color:'var(--c-info)' },
        exam:   { label:'EXAM',   sublabel:'Épreuves', icon:'fas fa-file-pen', color:'var(--c-accent)' },
        oral:   { label:'ORAL',   sublabel:'Oraux', icon:'fas fa-comments', color:'var(--c-warning)' },
        aed:    { label:'AED',    sublabel:'Vie Scolaire', icon:'fas fa-user-shield', color:'var(--c-success)' },
        data:   { label:'DONNÉES', sublabel:'Import', icon:'fas fa-database', color:'var(--c-purple)' },
        bibase: { label:'BULLETIN', sublabel:'Information', icon:'fas fa-newspaper', color:'#e67e22' },
    };
    const ALL_ITEMS = ['perdir','exam','oral','aed','bibase','data'];
    const DEFAULT_ORDER = ['perdir','exam','oral','aed','bibase','data'];

    // ═══ EXCEL TEMPLATES ═══
    const TEMPLATES = {
        teachers: {
            filename: 'Modele_Enseignants.xlsx',
            columns: ['Nom','Prénom','Email'],
            widths: [20,18,30]
        },
        students: {
            filename: 'Modele_Eleves.xlsx',
            columns: ['Classe','Nom','Prénom','Email','Aménagement'],
            widths: [12,18,16,28,22]
        }
    };

    function downloadTemplate(type) {
        const tpl = TEMPLATES[type];
        const wb = XLSX.utils.book_new();
        const wsData = [tpl.columns];
        // Add 2 example rows
        if (type === 'teachers') {
            wsData.push(['Dupont','Jean','j.dupont@ac-rennes.fr']);
            wsData.push(['Martin','Sophie','s.martin@ac-rennes.fr']);
        } else {
            wsData.push(['2GT1','Durand','Marie','m.durand@eleve.fr','']);
            wsData.push(['1STMG2','Leroy','Thomas','t.leroy@eleve.fr','1/3 temps']);
        }
        const ws = XLSX.utils.aoa_to_sheet(wsData);
        // Set column widths
        ws['!cols'] = tpl.widths.map(w => ({ wch: w }));
        XLSX.utils.book_append_sheet(wb, ws, type === 'teachers' ? 'Enseignants' : 'Élèves');
        XLSX.writeFile(wb, tpl.filename);
    }

    // ═══ SETTINGS ═══
    function getSettings() { try { return JSON.parse(localStorage.getItem(STORAGE_KEY)) || {}; } catch(e) { return {}; } }
    function getNavOrder() {
        const s = getSettings();
        if (s.navOrder && s.navOrder.length) {
            // Add any missing modules
            var order = s.navOrder.slice();
            ALL_ITEMS.forEach(function(m) { if (order.indexOf(m) < 0) order.push(m); });
            // Remove deleted modules
            order = order.filter(function(m) { return ALL_ITEMS.indexOf(m) >= 0; });
            return order;
        }
        return [...DEFAULT_ORDER];
    }

    function loadSettingsUI() {
        // Restore cloud config
        var ms = JSON.parse(localStorage.getItem('pilote_master_settings') || '{}');
        if (ms.cloud) {
            if (ms.cloud.provider) { _cloudProvider = ms.cloud.provider; selectCloudProvider(ms.cloud.provider); }
            if (ms.cloud.key) document.getElementById('s-cloud-key').value = ms.cloud.key;
            if (ms.cloud.bin) document.getElementById('s-cloud-bin').value = ms.cloud.bin;
            if (ms.cloud.gistToken) document.getElementById('s-gist-token').value = ms.cloud.gistToken;
            if (ms.cloud.gistId) document.getElementById('s-gist-id').value = ms.cloud.gistId;
            if (ms.cloud.gdriveClientId) document.getElementById('s-gdrive-clientid').value = ms.cloud.gdriveClientId;
            if (ms.cloud.gdriveFileId) document.getElementById('s-gdrive-fileid').value = ms.cloud.gdriveFileId;
            if (ms.cloud.wdUrl) document.getElementById('s-webdav-url').value = ms.cloud.wdUrl;
            if (ms.cloud.wdUser) document.getElementById('s-webdav-user').value = ms.cloud.wdUser;
            if (ms.cloud.wdPass) document.getElementById('s-webdav-pass').value = ms.cloud.wdPass;
            if (ms.cloud.auto) document.getElementById('s-cloud-auto').checked = true;
            if (ms.cloud.enabled) { document.getElementById('s-cloud-enabled').checked = true; toggleCloudUI(); }
        }
        const s = getSettings();
        document.getElementById('s-school').value = s.school || '';
        document.getElementById('s-name').value = s.name || '';
        document.getElementById('s-role').value = s.role || '';
        document.getElementById('s-city').value = s.city || '';
        if(document.getElementById('s-zone')) document.getElementById('s-zone').value = s.zone || 'B';
        if(document.getElementById('s-pdf-layout')) document.getElementById('s-pdf-layout').value = s.pdfHeaderLayout || 'classique';
        if(document.getElementById('s-pdf-color'))  { document.getElementById('s-pdf-color').value = s.pdfHeaderColor || '#1b2433'; document.getElementById('s-pdf-color-hex').value = s.pdfHeaderColor || '#1b2433'; }
        if(document.getElementById('s-pdf-subtitle')) document.getElementById('s-pdf-subtitle').value = s.pdfHeaderSubtitle || '';
        updatePdfHeaderPreview();
        document.getElementById('s-gcal').checked = s.gcalEnabled || false;
        if(document.getElementById('s-gcal-clientid')) document.getElementById('s-gcal-clientid').value = s.gcalClientId || '';
        if(document.getElementById('s-gcal-key')) document.getElementById('s-gcal-key').value = s.gcalKey || '';
        toggleGcal();
        if(s.gcalCals && s.gcalCals.length) { _gcalCalsData = s.gcalCals; renderGcalList(s.gcalCals, s.gcalSel || []); renderManualList(s.gcalCals); }
        document.getElementById('s-zone').value = s.zone || 'B';
        if(document.getElementById('s-pdf-layout')) document.getElementById('s-pdf-layout').value = s.pdfHeaderLayout || 'classique';
        if(document.getElementById('s-pdf-color'))  { document.getElementById('s-pdf-color').value = s.pdfHeaderColor || '#1b2433'; document.getElementById('s-pdf-color-hex').value = s.pdfHeaderColor || '#1b2433'; }
        if(document.getElementById('s-pdf-subtitle')) document.getElementById('s-pdf-subtitle').value = s.pdfHeaderSubtitle || '';
        updatePdfHeaderPreview();
        if (s.logoSrc) {
                updateFavicon(s.logoSrc); document.getElementById('img-logo').src = s.logoSrc; document.getElementById('img-logo').style.display='block'; document.getElementById('ph-logo').style.display='none'; }
        if (s.signSrc) { document.getElementById('img-sign').src = s.signSrc; document.getElementById('img-sign').style.display='block'; document.getElementById('ph-sign').style.display='none'; }
        moduleNames.forEach(m => { const el = document.getElementById('tog-' + m); if (el) el.checked = s['show_' + m] !== false; });
        updateModuleVisibility();
        updateBrandLogo();
        renderOrderList();
        refreshDataUI();
    }

    
    function loadBibSettingsUI() {
        var bib = JSON.parse(localStorage.getItem('bibase_establishment') || '{}');
        if(bib.layout) document.getElementById('bib-layout').value = bib.layout;
        if(bib.font) document.getElementById('bib-font').value = bib.font;
        if(bib.defaultSignatory) {
            var sel = document.getElementById('bib-signatory');
            var found = false;
            for(var i=0;i<sel.options.length;i++) { if(sel.options[i].value===bib.defaultSignatory) { found=true; break; } }
            if(!found) { var o=document.createElement('option'); o.value=bib.defaultSignatory; o.text=bib.defaultSignatory; sel.appendChild(o); }
            sel.value = bib.defaultSignatory;
        }
        if(bib.docTitle) document.getElementById('bib-doc-title').value = bib.docTitle;
        if(bib.docFooter) document.getElementById('bib-doc-footer').value = bib.docFooter;
    }
    function saveBibSettings() {
        try {
            var bib = JSON.parse(localStorage.getItem('bibase_establishment') || '{}');
            var el;
            el = document.getElementById('bib-layout'); if (el) bib.layout = el.value;
            el = document.getElementById('bib-font'); if (el) bib.font = el.value;
            el = document.getElementById('bib-signatory'); if (el) bib.defaultSignatory = el.value;
            el = document.getElementById('bib-doc-title'); if (el) bib.docTitle = el.value;
            el = document.getElementById('bib-doc-footer'); if (el) bib.docFooter = el.value;
            var s = getSettings();
            if (s.school) bib.name = s.school;
            if (s.city) bib.address = s.city;
            if (s.logoSrc) bib.logo = s.logoSrc;
            localStorage.setItem('bibase_establishment', JSON.stringify(bib));
            var frame = document.getElementById('frame-bibase');
            if (frame && frame.contentWindow) {
                frame.contentWindow.postMessage({type: 'bibase-settings', data: bib}, '*');
                frame.contentWindow.postMessage({type: 'pilote-settings', data: {school: s.school||'', city: s.city||'', logoSrc: s.logoSrc||''}}, '*');
            }
        } catch(e) { console.warn('saveBibSettings:', e); }
    }
function saveSettings() {
        // 1. Save main settings first (critical)
        try {
            var s = getSettings();
            s.school = document.getElementById('s-school').value;
            s.name = document.getElementById('s-name').value;
            s.role = document.getElementById('s-role').value;
            s.city = document.getElementById('s-city').value;
            s.zone = document.getElementById('s-zone').value;
            if(document.getElementById('s-pdf-layout')) s.pdfHeaderLayout = document.getElementById('s-pdf-layout').value;
            if(document.getElementById('s-pdf-color'))  { var col = document.getElementById('s-pdf-color').value || document.getElementById('s-pdf-color-hex').value; s.pdfHeaderColor = col; document.getElementById('s-pdf-color-hex').value = col; }
            if(document.getElementById('s-pdf-subtitle')) s.pdfHeaderSubtitle = document.getElementById('s-pdf-subtitle').value;
            s.gcalEnabled = document.getElementById('s-gcal').checked;
            if(document.getElementById('s-gcal-clientid')) s.gcalClientId = document.getElementById('s-gcal-clientid').value;
            if(document.getElementById('s-gcal-key')) s.gcalKey = document.getElementById('s-gcal-key').value;
            s.gcalSel = getGcalSel();
            var logoImg = document.getElementById('img-logo');
            s.logoSrc = (logoImg && logoImg.style.display !== 'none') ? logoImg.src : '';
            var signImg = document.getElementById('img-sign');
            s.signSrc = (signImg && signImg.style.display !== 'none') ? signImg.src : '';
            moduleNames.forEach(function(m) { var tog = document.getElementById('tog-' + m); if(tog) s['show_' + m] = tog.checked; });
            s.navOrder = getCurrentOrderFromList();
            s._lastSync = new Date().toISOString();
            localStorage.setItem(STORAGE_KEY, JSON.stringify(s));
        } catch(e1) { console.error('saveSettings main:', e1); }
        // 2. Save cloud config (independent)
        try {
            var cs = getCloudConfig();
            var ms = JSON.parse(localStorage.getItem('pilote_master_settings') || '{}');
            ms.cloud = cs;
            localStorage.setItem('pilote_master_settings', JSON.stringify(ms));
            setTimeout(cloudAutoSync, 800);
        } catch(e2) { console.error('saveSettings cloud:', e2); }
        // 3. Save BiBase settings (independent)
        try { saveBibSettings(); } catch(e3) { console.error('saveSettings bib:', e3); }
        // 4. Save PERDIR submenu config
        try {
            var perdirCfg = [];
            document.querySelectorAll('#perdir-submenu-list .order-item').forEach(function(item) {
                var menuId = item.dataset.menuid;
                var chk = item.querySelector('input[type=checkbox]');
                perdirCfg.push({id: menuId, visible: chk ? chk.checked : true});
            });
            if (perdirCfg.length) {
                var ms2 = JSON.parse(localStorage.getItem('pilote_master_settings') || '{}');
                ms2.perdirMenus = perdirCfg;
                localStorage.setItem('pilote_master_settings', JSON.stringify(ms2));
            }
        } catch(e4) { console.error('saveSettings perdir:', e4); }
        // 5. Apply changes (each independent)
        try { updateModuleVisibility(); } catch(e) {}
        try { updateBrandLogo(); } catch(e) {}
        try { applyNavOrder(); } catch(e) {}
        try { pushSettingsToAllModules(); } catch(e) {}
        try {
            var bibFrame = document.getElementById('frame-bibase');
            if (bibFrame && bibFrame.contentWindow) {
                var bibData = JSON.parse(localStorage.getItem('bibase_establishment') || '{}');
                bibFrame.contentWindow.postMessage({type: 'bibase-settings', data: bibData}, '*');
            }
        } catch(e) {}
        closeSettings();
        if (_lfDirHandle) { lfMarkDirty(); setTimeout(function(){ lfWriteToFolder(); }, 500); }
    }


    function updateBrandLogo() {
        const s = getSettings();
        const brandLetter = document.getElementById('brandLetter');
        const brandLogo = document.getElementById('brandLogo');
        const welcomeLetter = document.getElementById('welcomeLetter');
        const welcomeLogoImg = document.getElementById('welcomeLogoImg');
        const welcomeSubtitle = document.getElementById('welcomeSubtitle');
        const bottomInfo = document.getElementById('bottomBarInfo');

        const brandIconEl = document.getElementById('brandIcon');
        const welcomeLogoEl = document.getElementById('welcomeLogo');
        if (s.logoSrc) {
                updateFavicon(s.logoSrc);
            brandLetter.style.display = 'none';
            brandLogo.src = s.logoSrc;
            brandLogo.style.display = 'block';
            brandIconEl.style.background = 'none';
            brandIconEl.style.boxShadow = 'none';
            welcomeLetter.style.display = 'none';
            welcomeLogoImg.src = s.logoSrc;
            welcomeLogoImg.style.display = 'block';
            welcomeLogoEl.style.background = 'none';
            welcomeLogoEl.style.boxShadow = 'none';
            welcomeLogoEl.style.borderRadius = '0';
            welcomeLogoEl.style.width = 'auto';
            welcomeLogoEl.style.height = 'auto';
        } else {
            brandLetter.style.display = '';
            brandLogo.style.display = 'none';
            brandIconEl.style.background = '';
            brandIconEl.style.boxShadow = '';
            welcomeLetter.style.display = '';
            welcomeLogoImg.style.display = 'none';
            welcomeLogoEl.style.background = '';
            welcomeLogoEl.style.boxShadow = '';
        }
        // Update school name in subtitle & bottom bar
        if (s.school) {
            welcomeSubtitle.textContent = s.school + ' — Suite de direction';
            bottomInfo.textContent = 'Pilote Suite — ' + s.school;
        } else {
            welcomeSubtitle.textContent = 'Suite d\'outils pour la direction d\'établissement';
            bottomInfo.textContent = 'CADIR Suite — Direction';
        }
    }

    function handleSettingsImage(input, type) {
        const file = input.files[0]; if (!file) return;
        const reader = new FileReader();
        reader.onload = function(e) {
            document.getElementById('img-' + type).src = e.target.result;
            document.getElementById('img-' + type).style.display = 'block';
            document.getElementById('ph-' + type).style.display = 'none';
        };
        reader.readAsDataURL(file);
    }

    function clearImage(type) {
        document.getElementById('img-' + type).style.display = 'none';
        document.getElementById('img-' + type).src = '';
        document.getElementById('ph-' + type).style.display = '';
    }

    function openSettings() {
        renderPerdirSubmenus(); loadSettingsUI(); loadBibSettingsUI();
        if (typeof lfInitMode === 'function') lfInitMode();
        document.getElementById('settingsOverlay').classList.add('open'); }
    
    var _gcalAccessToken = null;
    var _gcalCalsData = [];

    function toggleGcal() {
        var checked = document.getElementById('s-gcal').checked;
        document.getElementById('gcal-opts').style.display = checked ? 'block' : 'none';
        var s = getSettings();
        s.gcalEnabled = checked;
        localStorage.setItem(STORAGE_KEY, JSON.stringify(s));
        pushSettingsToAllModules();
    }

    function gcalAuth() {
        if (window.location.protocol === 'file:') {
            var iframe = document.querySelector('.module-frame.active');
            if (iframe && iframe.contentWindow && (function(){try{return iframe.contentWindow.location.protocol==='file:';}catch(e){return false;}})()) {}
            alert('\u26a0 Google Agenda nécessite un serveur web local.\n\nPour lancer :\n1. Ouvrez un terminal dans le dossier contenant PILOTE_Suite.html\n2. Tapez : python3 -m http.server 8080\n3. Ouvrez http://localhost:8080/PILOTE_Suite.html\n\nL\'authentification OAuth2 ne fonctionne pas depuis file://.');
            document.getElementById('gcal-auth-status').innerHTML = '<span style=\"color:#e74c3c\"><i class=\"fas fa-exclamation-triangle\"></i> Nécessite http://localhost</span>';
            return;
        }
        var clientId = document.getElementById('s-gcal-clientid').value.trim();
        if (!clientId) { alert('Veuillez saisir un Client ID OAuth2.'); return; }
        if (typeof google === 'undefined' || !google.accounts || !google.accounts.oauth2) {
            alert('Biblioth\u00e8que Google Identity Services non charg\u00e9e. V\u00e9rifiez votre connexion internet.');
            return;
        }
        document.getElementById('gcal-auth-status').innerHTML = '<i class="fas fa-spinner fa-spin"></i> Connexion...';
        var tokenClient = google.accounts.oauth2.initTokenClient({
            client_id: clientId,
            scope: 'https://www.googleapis.com/auth/calendar.readonly',
            callback: function(resp) {
                if (resp.error) {
                    document.getElementById('gcal-auth-status').innerHTML = '<span style="color:#e74c3c;"><i class="fas fa-times"></i> ' + (resp.error_description || resp.error) + '</span>';
                    return;
                }
                _gcalAccessToken = resp.access_token;
                document.getElementById('gcal-auth-status').innerHTML = '<span style="color:#34a853;"><i class="fas fa-check"></i> Connect\u00e9</span>';
                document.getElementById('btn-gcal-auth').innerHTML = '<i class="fas fa-check-circle"></i> Connect\u00e9';
                document.getElementById('btn-gcal-auth').style.background = '#34a853';
                fetchGcalList();
            }
        });
        tokenClient.requestAccessToken();
    }

    function fetchGcalList() {
        if (!_gcalAccessToken) return;
        var div = document.getElementById('gcal-list');
        div.innerHTML = '<span style="color:#888;font-size:.78rem;"><i class="fas fa-spinner fa-spin"></i> Chargement...</span>';
        fetch('https://www.googleapis.com/calendar/v3/users/me/calendarList', {
            headers: { 'Authorization': 'Bearer ' + _gcalAccessToken }
        })
        .then(function(r) { if (!r.ok) throw new Error('Erreur ' + r.status); return r.json(); })
        .then(function(data) {
            if (!data.items || !data.items.length) { div.innerHTML = '<span style="color:#e74c3c;">Aucun agenda.</span>'; return; }
            var s = getSettings();
            _gcalCalsData = data.items.map(function(c) { return {id: c.id, name: c.summary, bg: c.backgroundColor || '#4285f4', primary: c.primary || false}; });
            s.gcalCals = _gcalCalsData;
            localStorage.setItem(STORAGE_KEY, JSON.stringify(s));
            renderGcalList(_gcalCalsData, s.gcalSel || []);
            document.getElementById('gcal-list-wrap').style.display = 'block';
        })
        .catch(function(err) {
            div.innerHTML = '<span style="color:#e74c3c;font-size:.78rem;"><i class="fas fa-exclamation-triangle"></i> ' + err.message + '</span>';
        });
    }

    function renderGcalList(cals, sel) {
        var div = document.getElementById('gcal-list');
        if (!cals || !cals.length) { div.innerHTML = ''; return; }
        var h = '';
        cals.forEach(function(c) {
            var checked = sel.indexOf(c.id) >= 0 || (sel.length === 0 && c.primary);
            h += '<label style="display:flex;align-items:center;gap:8px;padding:5px 8px;font-size:.78rem;cursor:pointer;border-radius:6px;">';
            h += '<input type="checkbox" class="gcal-chk" value="' + c.id + '" ' + (checked ? 'checked' : '') + ' style="accent-color:' + c.bg + ';">';
            h += '<span style="width:12px;height:12px;border-radius:3px;background:' + c.bg + ';flex-shrink:0;"></span>';
            h += '<span>' + c.name + (c.primary ? ' <small style="color:#888;">(principal)</small>' : '') + '</span>';
            h += '</label>';
        });
        div.innerHTML = h;
        document.getElementById('gcal-list-wrap').style.display = 'block';
    }

    function getGcalSel() { return Array.from(document.querySelectorAll('.gcal-chk:checked')).map(function(c) { return c.value; }); }

    function gcalFetchEvents() {
        var sel = getGcalSel();
        if (!sel.length) { alert('S\u00e9lectionnez au moins un agenda.'); return; }
        var useOAuth = !!_gcalAccessToken;
        var apiKey = document.getElementById('s-gcal-key') ? document.getElementById('s-gcal-key').value.trim() : '';
        if (!useOAuth && !apiKey) { alert('Connectez-vous via OAuth2 ou saisissez une cl\u00e9 API.'); return; }

        var statusEl = document.getElementById('gcal-events-status');
        statusEl.innerHTML = '<i class="fas fa-spinner fa-spin"></i> R\u00e9cup\u00e9ration...';

        var now = new Date();
        var start = new Date(now.getFullYear(), now.getMonth() - 2, 1).toISOString();
        var end = new Date(now.getFullYear(), now.getMonth() + 4, 0).toISOString();

        var calMap = {};
        (_gcalCalsData.length ? _gcalCalsData : (getSettings().gcalCals || [])).forEach(function(c) { calMap[c.id] = c; });

        var promises = sel.map(function(calId) {
            var url = 'https://www.googleapis.com/calendar/v3/calendars/' + encodeURIComponent(calId) + '/events?timeMin=' + encodeURIComponent(start) + '&timeMax=' + encodeURIComponent(end) + '&singleEvents=true&orderBy=startTime&maxResults=500';
            var opts = {};
            if (useOAuth) { opts.headers = { 'Authorization': 'Bearer ' + _gcalAccessToken }; }
            else { url += '&key=' + apiKey; }
            return fetch(url, opts).then(function(r) { return r.ok ? r.json() : {items:[]}; }).catch(function() { return {items:[]}; });
        });

        Promise.all(promises).then(function(results) {
            var events = [];
            results.forEach(function(data, i) {
                var calId = sel[i];
                var calInfo = calMap[calId] || {name: calId, bg: '#4285f4'};
                (data.items || []).forEach(function(ev) {
                    if (!ev.start) return;
                    var startDate = ev.start.date || (ev.start.dateTime ? ev.start.dateTime.split('T')[0] : null);
                    if (!startDate) return;
                    var startTime = ev.start.dateTime ? ev.start.dateTime.split('T')[1].substring(0, 5) : '';
                    var endTime = ev.end && ev.end.dateTime ? ev.end.dateTime.split('T')[1].substring(0, 5) : '';
                    events.push({ id: ev.id, title: ev.summary || '(sans titre)', date: startDate, time: startTime, endTime: endTime, calName: calInfo.name, color: calInfo.bg, calId: calId });
                });
            });
            events.sort(function(a, b) { return (a.date + ' ' + (a.time || '00:00')).localeCompare(b.date + ' ' + (b.time || '00:00')); });

            var s = getSettings();
            s.gcalEvents = events;
            s.gcalSel = sel;
            localStorage.setItem(STORAGE_KEY, JSON.stringify(s));

            statusEl.innerHTML = '<span style="color:#34a853;"><i class="fas fa-check"></i> ' + events.length + ' \u00e9v\u00e9nement(s) synchronis\u00e9(s)</span>';
            pushGcalToModules();
        });
    }

    
    
    // ═══ OUTLOOK / OFFICE 365 CALENDAR ═══
    var _outlookToken = null;
    var _outlookCals = [];

    function outlookAuth() {
        var clientId = (document.getElementById('s-outlook-clientid').value || '').trim();
        if (!clientId) return alert('Saisissez l\'Application (client) ID');
        var redir = location.origin + location.pathname;
        var scope = 'Calendars.ReadWrite';
        var url = 'https://login.microsoftonline.com/common/oauth2/v2.0/authorize?client_id='+encodeURIComponent(clientId)+'&response_type=token&redirect_uri='+encodeURIComponent(redir)+'&scope='+encodeURIComponent(scope);
        var w = window.open(url, '_blank', 'width=500,height=600');
        var check = setInterval(function() {
            try {
                if (w.closed) { clearInterval(check); return; }
                if (w.location.hash) {
                    var params = new URLSearchParams(w.location.hash.substring(1));
                    var tk = params.get('access_token');
                    if (tk) {
                        _outlookToken = tk;
                        w.close(); clearInterval(check);
                        document.getElementById('outlook-auth-status').innerHTML = '<span style="color:#0078d4"><i class="fas fa-check-circle"></i> Connecté</span>';
                        document.getElementById('btn-outlook-auth').innerHTML = '<i class="fas fa-check-circle"></i> Connecté';
                        document.getElementById('btn-outlook-auth').style.background = '#0078d4';
                        outlookFetchCalendars();
                    }
                }
            } catch(e) {}
        }, 500);
    }

    function outlookFetchCalendars() {
        if (!_outlookToken) return;
        fetch('https://graph.microsoft.com/v1.0/me/calendars', {
            headers: { 'Authorization': 'Bearer ' + _outlookToken }
        }).then(function(r) { return r.json(); }).then(function(data) {
            _outlookCals = (data.value || []).map(function(c) { return {id:c.id, name:c.name, color:c.hexColor||'#0078d4'}; });
            var div = document.getElementById('outlook-cal-list');
            var s = getSettings();
            var sel = s.outlookSel || [];
            div.innerHTML = _outlookCals.map(function(c) {
                var chk = sel.indexOf(c.id) >= 0 || sel.length === 0 ? 'checked' : '';
                return '<label style="display:flex;align-items:center;gap:6px;margin:4px 0;font-size:.78rem;cursor:pointer;"><input type="checkbox" class="outlook-cal-chk" value="'+c.id+'" '+chk+'><span style="width:10px;height:10px;border-radius:50%;background:'+(c.color||'#0078d4')+'"></span>'+c.name+'</label>';
            }).join('');
            document.getElementById('outlook-cal-list-wrap').style.display = 'block';
        }).catch(function(err) {
            document.getElementById('outlook-auth-status').innerHTML = '<span style="color:#e74c3c">'+err.message+'</span>';
        });
    }

    function getOutlookSel() {
        var chks = document.querySelectorAll('.outlook-cal-chk:checked');
        return Array.from(chks).map(function(c) { return c.value; });
    }

    function outlookFetchEvents() {
        var sel = getOutlookSel();
        if (!sel.length) { alert('Sélectionnez au moins un agenda Outlook.'); return; }
        if (!_outlookToken) { alert('Connectez Outlook d\'abord.'); return; }

        var statusEl = document.getElementById('outlook-events-status');
        statusEl.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Récupération...';

        var now = new Date();
        var start = new Date(now.getFullYear(), now.getMonth() - 2, 1).toISOString();
        var end = new Date(now.getFullYear(), now.getMonth() + 4, 0).toISOString();

        var calMap = {};
        _outlookCals.forEach(function(c) { calMap[c.id] = c; });

        var promises = sel.map(function(calId) {
            var url = 'https://graph.microsoft.com/v1.0/me/calendars/' + encodeURIComponent(calId) + '/events?$select=subject,start,end,id&$filter=start/dateTime ge \''+start+'\' and start/dateTime le \''+end+'\'&$top=500&$orderby=start/dateTime';
            return fetch(url, {
                headers: { 'Authorization': 'Bearer ' + _outlookToken, 'Prefer': 'outlook.timezone="Europe/Paris"' }
            }).then(function(r) { return r.ok ? r.json() : {value:[]}; }).catch(function() { return {value:[]}; });
        });

        Promise.all(promises).then(function(results) {
            var events = [];
            results.forEach(function(data, i) {
                var calId = sel[i];
                var calInfo = calMap[calId] || {name:'Outlook', color:'#0078d4'};
                (data.value || []).forEach(function(ev) {
                    if (!ev.start) return;
                    var startDT = ev.start.dateTime || '';
                    var startDate = startDT.split('T')[0];
                    var startTime = startDT.indexOf('T') >= 0 ? startDT.split('T')[1].substring(0,5) : '';
                    var endDT = ev.end ? (ev.end.dateTime||'') : '';
                    var endTime = endDT.indexOf('T') >= 0 ? endDT.split('T')[1].substring(0,5) : '';
                    if (startTime === '00:00' && endTime === '00:00') { startTime = ''; endTime = ''; }
                    events.push({id:ev.id, title:ev.subject||'(sans titre)', date:startDate, time:startTime, endTime:endTime, calName:calInfo.name, color:calInfo.color, calId:calId});
                });
            });

            var s = getSettings();
            s.outlookEvents = events;
            s.outlookSel = sel;
            s.outlookEnabled = true;
            localStorage.setItem(STORAGE_KEY, JSON.stringify(s));

            statusEl.innerHTML = '<span style="color:#0078d4"><i class="fas fa-check"></i> '+events.length+' événement(s)</span>';
            pushOutlookToModules();
        });
    }

    function pushOutlookToModules() {
        var s = getSettings();
        var frame = document.getElementById('frame-perdir');
        if (frame && frame.contentWindow) {
            frame.contentWindow.postMessage({ type: 'pilote-outlook', data: {
                outlookEvents: s.outlookEvents || [],
                outlookCals: _outlookCals || [],
                outlookSel: s.outlookSel || [],
                outlookEnabled: s.outlookEnabled || false
            }}, '*');
        }
    }

    // Outlook CRUD
    function outlookAddEvent(data) {
        if (!_outlookToken) { alert('Outlook non connecté'); return; }
        var body = { subject: data.title };
        if (data.time) {
            body.start = { dateTime: data.date + 'T' + data.time + ':00', timeZone: 'Europe/Paris' };
            body.end = { dateTime: data.date + 'T' + (data.endTime || data.time) + ':00', timeZone: 'Europe/Paris' };
        } else {
            body.isAllDay = true;
            body.start = { dateTime: data.date + 'T00:00:00', timeZone: 'Europe/Paris' };
            body.end = { dateTime: data.date + 'T23:59:00', timeZone: 'Europe/Paris' };
        }
        fetch('https://graph.microsoft.com/v1.0/me/calendars/' + encodeURIComponent(data.calId) + '/events', {
            method: 'POST', headers: { 'Authorization': 'Bearer ' + _outlookToken, 'Content-Type': 'application/json' }, body: JSON.stringify(body)
        }).then(function(r) { if (!r.ok) throw new Error(r.status); notifyPerdirCrudOk(); outlookFetchEvents(); })
        .catch(function(err) { alert('Erreur Outlook: ' + err.message); });
    }
    function outlookUpdateEvent(data) {
        if (!_outlookToken) { alert('Outlook non connecté'); return; }
        var body = { subject: data.title };
        if (data.time) {
            body.start = { dateTime: data.date + 'T' + data.time + ':00', timeZone: 'Europe/Paris' };
            body.end = { dateTime: data.date + 'T' + (data.endTime || data.time) + ':00', timeZone: 'Europe/Paris' };
        } else {
            body.isAllDay = true;
            body.start = { dateTime: data.date + 'T00:00:00', timeZone: 'Europe/Paris' };
            body.end = { dateTime: data.date + 'T23:59:00', timeZone: 'Europe/Paris' };
        }
        fetch('https://graph.microsoft.com/v1.0/me/events/' + encodeURIComponent(data.eventId), {
            method: 'PATCH', headers: { 'Authorization': 'Bearer ' + _outlookToken, 'Content-Type': 'application/json' }, body: JSON.stringify(body)
        }).then(function(r) { if (!r.ok) throw new Error(r.status); notifyPerdirCrudOk(); outlookFetchEvents(); })
        .catch(function(err) { alert('Erreur Outlook: ' + err.message); });
    }
    function outlookDeleteEvent(data) {
        if (!_outlookToken) { alert('Outlook non connecté'); return; }
        fetch('https://graph.microsoft.com/v1.0/me/events/' + encodeURIComponent(data.eventId), {
            method: 'DELETE', headers: { 'Authorization': 'Bearer ' + _outlookToken }
        }).then(function(r) { if (r.status !== 204 && !r.ok) throw new Error(r.status); notifyPerdirCrudOk(); outlookFetchEvents(); })
        .catch(function(err) { alert('Erreur Outlook: ' + err.message); });
    }

    // ═══ GOOGLE CALENDAR CRUD ═══
    function gcalAddEvent(data) {
        if (!_gcalAccessToken) { alert('Google Agenda non connecté'); return; }
        var body = { summary: data.title };
        if (data.time) {
            body.start = { dateTime: data.date + 'T' + data.time + ':00', timeZone: 'Europe/Paris' };
            body.end = { dateTime: data.date + 'T' + (data.endTime || data.time) + ':00', timeZone: 'Europe/Paris' };
        } else {
            body.start = { date: data.date };
            body.end = { date: data.date };
        }
        fetch('https://www.googleapis.com/calendar/v3/calendars/' + encodeURIComponent(data.calId) + '/events', {
            method: 'POST',
            headers: { 'Authorization': 'Bearer ' + _gcalAccessToken, 'Content-Type': 'application/json' },
            body: JSON.stringify(body)
        }).then(function(r) {
            if (!r.ok) throw new Error('Erreur ' + r.status);
            return r.json();
        }).then(function() {
            notifyPerdirCrudOk();
            gcalFetchEvents();
        }).catch(function(err) { alert('Erreur ajout Google: ' + err.message); });
    }

    function gcalUpdateEvent(data) {
        if (!_gcalAccessToken) { alert('Google Agenda non connecté'); return; }
        var calId = data.calId;
        // If no calId, try to find from selected calendars
        if (!calId) {
            var sel = getGcalSel();
            calId = sel.length ? sel[0] : 'primary';
        }
        var body = { summary: data.title };
        if (data.time) {
            body.start = { dateTime: data.date + 'T' + data.time + ':00', timeZone: 'Europe/Paris' };
            body.end = { dateTime: data.date + 'T' + (data.endTime || data.time) + ':00', timeZone: 'Europe/Paris' };
        } else {
            body.start = { date: data.date };
            body.end = { date: data.date };
        }
        fetch('https://www.googleapis.com/calendar/v3/calendars/' + encodeURIComponent(calId) + '/events/' + encodeURIComponent(data.eventId), {
            method: 'PATCH',
            headers: { 'Authorization': 'Bearer ' + _gcalAccessToken, 'Content-Type': 'application/json' },
            body: JSON.stringify(body)
        }).then(function(r) {
            if (!r.ok) throw new Error('Erreur ' + r.status);
            notifyPerdirCrudOk();
            gcalFetchEvents();
        }).catch(function(err) { alert('Erreur modification Google: ' + err.message); });
    }

    function gcalDeleteEvent(data) {
        if (!_gcalAccessToken) { alert('Google Agenda non connecté'); return; }
        var calId = data.calId;
        if (!calId) {
            var sel = getGcalSel();
            calId = sel.length ? sel[0] : 'primary';
        }
        fetch('https://www.googleapis.com/calendar/v3/calendars/' + encodeURIComponent(calId) + '/events/' + encodeURIComponent(data.eventId), {
            method: 'DELETE',
            headers: { 'Authorization': 'Bearer ' + _gcalAccessToken }
        }).then(function(r) {
            if (r.status !== 204 && !r.ok) throw new Error('Erreur ' + r.status);
            notifyPerdirCrudOk();
            gcalFetchEvents();
        }).catch(function(err) { alert('Erreur suppression Google: ' + err.message); });
    }

    function notifyPerdirCrudOk() {
        var fr = document.getElementById('frame-perdir');
        if (fr && fr.contentWindow) {
            fr.contentWindow.postMessage({type:'pilote-gcal-crud-ok'}, '*');
        }
    }

    function pushGcalToModules() {
        var s = getSettings();
        var frame = document.getElementById('frame-perdir');
        if (frame && frame.contentWindow) {
            frame.contentWindow.postMessage({ type: 'pilote-settings', data: {
                school: s.school || '', name: s.name || '', role: s.role || '', city: s.city || '',
                zone: s.zone || 'B', logoSrc: s.logoSrc || '', signSrc: s.signSrc || '',
                teachers: s.teachers || [], students: s.students || [],
                gcalEnabled: s.gcalEnabled || false,
                gcalEvents: s.gcalEvents || [],
                gcalCalendars: s.gcalCals || [],
                gcalSel: s.gcalSel || []
            }}, '*');
        }
    }

    function addManualCal() {
        var id = document.getElementById('gcal-manual-id').value.trim();
        var name = document.getElementById('gcal-manual-name').value.trim() || id;
        if (!id) { alert('Saisissez l\'ID du calendrier.'); return; }
        var s = getSettings();
        if (!s.gcalCals) s.gcalCals = [];
        if (s.gcalCals.find(function(c) { return c.id === id; })) { alert('D\u00e9j\u00e0 ajout\u00e9.'); return; }
        var colors = ['#4285f4', '#0b8043', '#d50000', '#f09300', '#7986cb', '#8e24aa', '#039be5', '#616161'];
        var bg = colors[s.gcalCals.length % colors.length];
        s.gcalCals.push({ id: id, name: name, bg: bg, manual: true });
        if (!s.gcalSel) s.gcalSel = [];
        s.gcalSel.push(id);
        localStorage.setItem(STORAGE_KEY, JSON.stringify(s));
        _gcalCalsData = s.gcalCals;
        renderGcalList(s.gcalCals, s.gcalSel);
        renderManualList(s.gcalCals);
        document.getElementById('gcal-manual-id').value = '';
        document.getElementById('gcal-manual-name').value = '';
    }

    function renderManualList(cals) {
        var div = document.getElementById('gcal-manual-list');
        if (!div) return;
        var manuals = (cals || []).filter(function(c) { return c.manual; });
        if (!manuals.length) { div.innerHTML = ''; return; }
        var h = '';
        manuals.forEach(function(c) {
            h += '<div style="display:flex;align-items:center;gap:6px;font-size:.72rem;padding:2px 0;">';
            h += '<span style="width:8px;height:8px;border-radius:50%;background:' + c.bg + ';"></span>' + c.name;
            h += ' <button onclick="removeManualCal(this.dataset.cid)" data-cid="' + c.id + '" style="background:none;border:none;color:#e74c3c;cursor:pointer;font-size:.72rem;">&times;</button></div>';
        });
        div.innerHTML = h;
    }

    function removeManualCal(id) {
        var s = getSettings();
        s.gcalCals = (s.gcalCals || []).filter(function(c) { return c.id !== id; });
        s.gcalSel = (s.gcalSel || []).filter(function(x) { return x !== id; });
        localStorage.setItem(STORAGE_KEY, JSON.stringify(s));
        _gcalCalsData = s.gcalCals;
        renderGcalList(s.gcalCals, s.gcalSel);
        renderManualList(s.gcalCals);
    }

    function closeSettings() { document.getElementById('settingsOverlay').classList.remove('open'); }

    // ═══ EXPORT / IMPORT SETTINGS ═══
    function exportSettings() {
        const s = getSettings();
        const json = JSON.stringify(s, null, 2);
        const blob = new Blob([json], { type: 'application/json' });
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        const date = new Date().toISOString().split('T')[0];
        a.download = 'pilote_parametres_' + date + '.json';
        document.body.appendChild(a);
        a.click();
        document.body.removeChild(a);
        URL.revokeObjectURL(url);
    }

    function importSettings(input) {
        const file = input.files[0]; if (!file) return;
        const reader = new FileReader();
        reader.onload = function(e) {
            try {
                const imported = JSON.parse(e.target.result);
                // Validate it's an object
                if (typeof imported !== 'object' || Array.isArray(imported)) throw new Error('Format invalide');
                // Merge: imported settings overwrite current
                localStorage.setItem(STORAGE_KEY, JSON.stringify(imported));
                loadSettingsUI();
                applyNavOrder();
                updateBrandLogo();
                pushSettingsToAllModules();
                alert('✅ Paramètres importés avec succès !');
            } catch(err) {
                alert('❌ Erreur lors de l\'import : ' + err.message);
            }
        };
        reader.readAsText(file);
        input.value = ''; // reset for re-import
    }

    // ═══ DRAG & DROP ORDER ═══
    function renderOrderList() {
        const order = getNavOrder();
        const list = document.getElementById('orderList');
        list.innerHTML = '';
        order.forEach((id) => {
            const meta = MODULE_META[id];
            const li = document.createElement('li');
            li.className = 'order-item';
            li.setAttribute('draggable', 'true');
            li.dataset.module = id;
            li.innerHTML = `
                <span class="order-grip"><i class="fas fa-grip-vertical"></i></span>
                <span class="order-icon" style="background:${meta.color}"><i class="${meta.icon}"></i></span>
                <span class="order-label">${meta.label} <span style="color:#999;font-weight:400;font-size:0.72rem;">— ${meta.sublabel}</span></span>
            `;
            li.addEventListener('dragstart', () => { li.classList.add('dragging'); });
            li.addEventListener('dragend', () => { li.classList.remove('dragging'); document.querySelectorAll('.order-item').forEach(el => el.classList.remove('drag-over')); });
            li.addEventListener('dragover', (e) => { e.preventDefault(); li.classList.add('drag-over'); });
            li.addEventListener('dragleave', () => { li.classList.remove('drag-over'); });
            li.addEventListener('drop', (e) => {
                e.preventDefault();
                li.classList.remove('drag-over');
                const dragging = list.querySelector('.dragging');
                if (dragging && dragging !== li) {
                    const items = [...list.children];
                    const fromIdx = items.indexOf(dragging);
                    const toIdx = items.indexOf(li);
                    if (fromIdx < toIdx) li.after(dragging); else li.before(dragging);
                }
            });
            list.appendChild(li);
        });
    }

    function getCurrentOrderFromList() {
        return [...document.querySelectorAll('#orderList .order-item')].map(el => el.dataset.module);
    }

    function applyNavOrder() {
        const order = getNavOrder();
        const container = document.getElementById('navItems');
        const items = {};
        container.querySelectorAll('.nav-item').forEach(el => { items[el.dataset.module] = el; });
        // Also grab separators
        const seps = container.querySelectorAll('.nav-sep');
        while (container.firstChild) container.removeChild(container.firstChild);
        order.forEach((id) => { if (items[id]) container.appendChild(items[id]); });

        // Also reorder welcome cards
        const grid = document.getElementById('moduleGrid');
        const cards = {};
        grid.querySelectorAll('.module-card').forEach(c => { cards[c.dataset.m] = c; });
        while (grid.firstChild) grid.removeChild(grid.firstChild);
        order.forEach(id => { if (cards[id]) grid.appendChild(cards[id]); });
    }

    // ═══ EXCEL IMPORT (Data Panel) ═══
    function handleExcelImport(input, type) {
        const files = Array.from(input.files);
        if (!files.length) return;

        // Ask whether to merge or replace if data already exists
        const s = getSettings();
        const existing = s[type] || [];
        let mergeMode = false;
        if (existing.length > 0 && files.length >= 1) {
            mergeMode = confirm('Des données existent déjà (' + existing.length + ' entrées).\n\nOK = Ajouter aux données existantes\nAnnuler = Remplacer les données');
        }

        const label = document.getElementById('lbl-' + type);
        if (label) label.textContent = 'Lecture de ' + files.length + ' fichier(s)...';

        let allData = mergeMode ? existing.slice() : [];
        let processed = 0;
        let errors = [];

        files.forEach(function(file, idx) {
            const reader = new FileReader();
            reader.onload = function(e) {
                try {
                    const wb = XLSX.read(e.target.result, { type: 'array' });
                    const sheet = wb.Sheets[wb.SheetNames[0]];
                    const rows = XLSX.utils.sheet_to_json(sheet, { defval: '' });
                    allData = allData.concat(rows);
                } catch(err) {
                    errors.push(file.name + ': ' + err.message);
                }
                processed++;
                if (processed === files.length) {
                    // All files read — save
                    const s2 = getSettings();
                    s2[type] = allData;
                    localStorage.setItem(STORAGE_KEY, JSON.stringify(s2));
                    refreshDataUI();
                    pushSettingsToAllModules();
                    if (errors.length) alert('Erreurs sur certains fichiers :\n' + errors.join('\n'));
                    if (label) label.textContent = files.length + ' fichier(s) chargé(s) ✓';
                }
            };
            reader.readAsArrayBuffer(file);
        });
    }

    function clearExcelData(type) {
        if (!confirm('Supprimer les données importées ?')) return;
        const s = getSettings();
        delete s[type];
        localStorage.setItem(STORAGE_KEY, JSON.stringify(s));
        refreshDataUI();
        pushSettingsToAllModules();
    }

    function refreshDataUI() {
        const s = getSettings();
        ['teachers', 'students'].forEach(type => {
            const data = s[type];
            const hasData = data && data.length > 0;
            const label = type === 'teachers' ? 'enseignant' : 'élève';
            document.getElementById('drop-' + type).classList.toggle('loaded', hasData);
            document.getElementById('lbl-' + type).textContent = hasData ? (data.length + ' entrées chargées ✓') : 'Cliquez ou glissez un ou plusieurs fichiers Excel';
            document.getElementById('actions-' + type).style.display = hasData ? 'flex' : 'none';
            document.getElementById('badge-' + type).textContent = hasData ? (data.length + ' ' + label + 's') : 'Non chargé';
            document.getElementById('badge-' + type).classList.toggle('has-data', hasData);
            document.getElementById('count-' + type).innerHTML = hasData ? ('<i class="fas fa-check-circle"></i> <strong>' + data.length + '</strong> ' + label + '(s) importé(s)') : '';
            if (!hasData) { document.getElementById('preview-' + type).style.display = 'none'; document.getElementById('preview-' + type).innerHTML = ''; }
        });
    }

    function togglePreview(type) {
        const el = document.getElementById('preview-' + type);
        if (el.style.display === 'none') {
            const s = getSettings();
            const data = s[type];
            if (!data || !data.length) return;
            const cols = Object.keys(data[0]);
            let html = '<table><thead><tr>' + cols.map(c => '<th>' + c + '</th>').join('') + '</tr></thead><tbody>';
            data.slice(0, 50).forEach(row => {
                html += '<tr>' + cols.map(c => '<td>' + (row[c] || '') + '</td>').join('') + '</tr>';
            });
            if (data.length > 50) html += '<tr><td colspan="' + cols.length + '" style="text-align:center;color:#999;font-style:italic">… et ' + (data.length - 50) + ' autres lignes</td></tr>';
            html += '</tbody></table>';
            el.innerHTML = html;
            el.style.display = 'block';
        } else {
            el.style.display = 'none';
        }
    }

    // ═══ DATA PANEL ═══
    function openDataPanel() {
        closeDataPanel();
        document.querySelectorAll('.nav-item').forEach(el => el.classList.remove('active'));
        const navItem = document.querySelector('.nav-item[data-module="data"]');
        if (navItem) navItem.classList.add('active');
        document.getElementById('welcome').classList.add('hidden');
        document.querySelectorAll('.module-frame').forEach(f => f.classList.remove('active'));
        document.getElementById('dataPanel').classList.add('active');
        currentModule = 'data';
        document.title = 'PILOTE — Données';
        refreshDataUI();
    }

    function closeDataPanel() { document.getElementById('dataPanel').classList.remove('active'); }

    // ═══ PUSH TO MODULES ═══
    function pushSettingsToModule(name) {
        const frame = document.getElementById('frame-' + name);
        if (!frame || !frame.contentWindow) return;
        const s = getSettings();
        frame.contentWindow.postMessage({
            type: 'pilote-settings',
            data: { school: s.school||'', name: s.name||'', role: s.role||'', city: s.city||'', zone: s.zone||'B', logoSrc: s.logoSrc||'', signSrc: s.signSrc||'', teachers: s.teachers||[], students: s.students||[], gcalEnabled: s.gcalEnabled||false, gcalEvents: s.gcalEvents||[], pdfHeaderLayout: s.pdfHeaderLayout||'classique', pdfHeaderColor: s.pdfHeaderColor||'#1b2433', pdfHeaderSubtitle: s.pdfHeaderSubtitle||'' }
        }, '*');
    }

    function pushSettingsToAllModules() { loadedModules.forEach(name => pushSettingsToModule(name)); }

    window.addEventListener('message', function(e) {
        if (e.data && e.data.type === 'pilote-gcal-refresh') { gcalFetchEvents(); return; }
        if (e.data && e.data.type === 'pilote-gcal-add') { gcalAddEvent(e.data); return; }
        if (e.data && e.data.type === 'pilote-gcal-update') { gcalUpdateEvent(e.data); return; }
        if (e.data && e.data.type === 'pilote-gcal-delete') { gcalDeleteEvent(e.data); return; }
        if (e.data && e.data.type === 'pilote-outlook-add') { outlookAddEvent(e.data); return; }
        if (e.data && e.data.type === 'pilote-outlook-update') { outlookUpdateEvent(e.data); return; }
        if (e.data && e.data.type === 'pilote-outlook-delete') { outlookDeleteEvent(e.data); return; }
        if (e.data && e.data.type === 'pilote-outlook-refresh') { outlookFetchEvents(); return; }
        if (e.data && e.data.type === 'pilote-module-ready' && e.data.module) {
            setTimeout(() => { pushSettingsToModule(e.data.module); if(typeof pushOutlookToModules==='function') pushOutlookToModules(); }, 200);
        }
    });

    // ═══ MODULE VISIBILITY ═══
    function updateModuleVisibility() {
        moduleNames.forEach(m => {
            const visible = document.getElementById('tog-' + m).checked;
            const navItem = document.querySelector('.nav-item[data-module="' + m + '"]');
            if (navItem) navItem.classList.toggle('hidden-module', !visible);
            const card = document.querySelector('.module-card[data-m="' + m + '"]');
            if (card) card.classList.toggle('card-hidden', !visible);
            if (!visible && currentModule === m) goHome();
        });
    }

    // ═══ MODULE LOADING ═══
    function b64toBlob(b64) {
        const bin = atob(b64);
        const bytes = new Uint8Array(bin.length);
        for (let i = 0; i < bin.length; i++) bytes[i] = bin.charCodeAt(i);
        return URL.createObjectURL(new Blob([bytes], { type: 'text/html; charset=utf-8' }));
    }

    
    // ═══ KEYBOARD SHORTCUTS ═══
    document.addEventListener('keydown', function(e) {
        // Only trigger with Ctrl (not inside iframes)
        if (!e.ctrlKey || e.shiftKey || e.altKey || e.metaKey) return;
        var key = e.key.toLowerCase();
        var map = {
            'p': 'perdir',
            'e': 'exam',
            'o': 'oral',
            'a': 'aed',
            'b': 'bibase',
            'd': 'data'
        };
        if (map[key]) {
            e.preventDefault();
            e.stopPropagation();
            loadModule(map[key]);
        }
    });

    // Also listen for shortcuts from within iframes
    window.addEventListener('message', function(e) {
        if (e.data && e.data.type === 'pilote-shortcut') {
            var map = {'p':'perdir','e':'exam','o':'oral','a':'aed','d':'data'};
            if (map[e.data.key]) loadModule(map[e.data.key]);
        }
    });

    function loadModule(name) {
        if (name === 'data') { openDataPanel(); return; }
        const s = getSettings();
        if (s['show_' + name] === false) return;
        closeDataPanel();
        document.querySelectorAll('.nav-item').forEach(el => el.classList.remove('active'));
        const navItem = document.querySelector('.nav-item[data-module="' + name + '"]');
        if (navItem) navItem.classList.add('active');
        document.getElementById('welcome').classList.add('hidden');
        document.querySelectorAll('.module-frame').forEach(f => f.classList.remove('active'));
        const frame = document.getElementById('frame-' + name);
        if (!loadedModules.has(name)) {
            document.getElementById('loader').classList.add('show');
            if (!blobUrls[name]) blobUrls[name] = b64toBlob(MODULE_DATA[name]);
            frame.src = blobUrls[name];
            frame.onload = () => {
                loadedModules.add(name);
                document.getElementById('loader').classList.remove('show');
                frame.classList.add('active');
                setTimeout(() => pushSettingsToModule(name), 300);
            };
        } else { frame.classList.add('active'); }
        currentModule = name;
        document.title = 'PILOTE — ' + name.toUpperCase();
    }

    function goHome() {
        currentModule = null;
        closeDataPanel();
        document.querySelectorAll('.nav-item').forEach(el => el.classList.remove('active'));
        document.querySelectorAll('.module-frame').forEach(f => f.classList.remove('active'));
        document.getElementById('welcome').classList.remove('hidden');
        document.title = 'PILOTE — Suite de Direction';
    }

    function updateClock() {
        document.getElementById('clock').textContent = new Date().toLocaleDateString('fr-FR', { weekday:'short', day:'numeric', month:'short', hour:'2-digit', minute:'2-digit' });
    }
    updateClock(); setInterval(updateClock, 30000);

    function toggleFullscreen() {
        if (!document.fullscreenElement) document.documentElement.requestFullscreen();
        else document.exitFullscreen();
    }
    // Apply PERDIR submenus when frames load
    document.getElementById('frame-perdir').addEventListener('load', function(){ setTimeout(applyPerdirSubmenus, 500); });

    document.addEventListener('fullscreenchange', () => {
        document.getElementById('fs-icon').className = document.fullscreenElement ? 'fas fa-compress' : 'fas fa-expand';
    });

    document.addEventListener('keydown', (e) => {
        if (e.altKey) {
            const order = getNavOrder();
            switch(e.key) {
                case '1': case '2': case '3': case '4': case '5': case '6': {
                    const idx = parseInt(e.key) - 1;
                    if (order[idx]) { e.preventDefault(); loadModule(order[idx]); }
                    break;
                }
                case '0': e.preventDefault(); goHome(); break;
                case 'p': e.preventDefault(); openSettings(); break;
                case 'd': e.preventDefault(); openDataPanel(); break;
            }
        }
        if (e.key === 'Escape') {
            if (document.getElementById('settingsOverlay').classList.contains('open')) closeSettings();
            else if (currentModule) goHome();
        }
    });

    // ═══ INIT ═══
    loadSettingsUI();
    applyNavOrder();
    
    // ═══ ACCORDION TOGGLE ═══
    
    
    // ═══ PERDIR SUBMENUS MANAGEMENT ═══
    var PERDIR_MENUS = [
        {id:'menu2', icon:'fa-check-square', label:'To Do List', color:'#3498db'},
        {id:'menu3', icon:'fa-calendar-alt', label:'Calendrier', color:'#e67e22'},
        {id:'menu4', icon:'fa-clipboard-list', label:'Conseil de Direction', color:'#2c3e50'},
        {id:'menu5', icon:'fa-user-graduate', label:'Suivi Élève / Point CPE', color:'#27ae60'},
        {id:'menu6', icon:'fa-comments', label:'Entretiens', color:'#9b59b6'},
        {id:'menu7', icon:'fa-users', label:'Réunions', color:'#e74c3c'},
        {id:'menu8', icon:'fa-history', label:'Historique', color:'#95a5a6'},
        {id:'menu9', icon:'fa-chart-line', label:'Tableau de Bord', color:'#f39c12'},
        {id:'menu10', icon:'fa-calendar-check', label:'Activités pédagogiques', color:'#1abc9c'},
        {id:'menu11', icon:'fa-stream', label:'Échéances', color:'#8e44ad'},
        {id:'menu12', icon:'fa-book', label:'Procédures', color:'#16a085'}
    ];

    function renderPerdirSubmenus() {
        var ms = JSON.parse(localStorage.getItem('pilote_master_settings') || '{}');
        var cfg = ms.perdirMenus || PERDIR_MENUS.map(function(m){ return {id:m.id, visible:true}; });
        var cfgIds2 = cfg.map(function(c){return c.id;});
        PERDIR_MENUS.forEach(function(m){if(cfgIds2.indexOf(m.id)<0)cfg.push({id:m.id,visible:true});});
        var list = document.getElementById('perdir-submenu-list');
        if (!list) return;
        var html = '';
        cfg.forEach(function(item, i) {
            var def = PERDIR_MENUS.find(function(m){ return m.id === item.id; });
            if (!def) return;
            html += '<div class="order-item" draggable="true" data-idx="'+i+'" data-menuid="'+item.id+'" ondragstart="dragSubM(event,'+i+')" ondragover="overSubM(event,this)" ondrop="dropSubM(event,'+i+')">';
            html += '<i class="fas fa-grip-vertical order-grip"></i>';
            html += '<div class="order-icon" style="background:'+def.color+'"><i class="fas '+def.icon+'"></i></div>';
            html += '<span class="order-label">'+def.label+'</span>';
            html += '<label class="toggle-switch" onclick="event.stopPropagation()"><input type="checkbox" '+(item.visible!==false?'checked':'')+' onchange="toggleSubM(\''+item.id+'\',this.checked)"><span class="toggle-slider"></span></label>';
            html += '</div>';
        });
        list.innerHTML = html;
    }

    var _dragSubIdx = null;
    function dragSubM(e, idx) { _dragSubIdx = idx; e.dataTransfer.effectAllowed = 'move'; }
    function overSubM(e, el) { e.preventDefault(); }
    function dropSubM(e, toIdx) {
        e.preventDefault();
        if (_dragSubIdx === null || _dragSubIdx === toIdx) return;
        var ms = JSON.parse(localStorage.getItem('pilote_master_settings') || '{}');
        var cfg = ms.perdirMenus || PERDIR_MENUS.map(function(m){ return {id:m.id, visible:true}; });
        var item = cfg.splice(_dragSubIdx, 1)[0];
        cfg.splice(toIdx, 0, item);
        ms.perdirMenus = cfg;
        localStorage.setItem('pilote_master_settings', JSON.stringify(ms));
        renderPerdirSubmenus();
        applyPerdirSubmenus();
        _dragSubIdx = null;
    }

    function toggleSubM(menuId, visible) {
        var ms = JSON.parse(localStorage.getItem('pilote_master_settings') || '{}');
        var cfg = ms.perdirMenus || PERDIR_MENUS.map(function(m){ return {id:m.id, visible:true}; });
        var item = cfg.find(function(c){ return c.id === menuId; });
        if (item) item.visible = visible;
        ms.perdirMenus = cfg;
        localStorage.setItem('pilote_master_settings', JSON.stringify(ms));
        applyPerdirSubmenus();
    }

    function applyPerdirSubmenus() {
        var fr = document.getElementById('frame-perdir');
        try { if (!fr || !fr.contentWindow || !fr.contentWindow.document) return; } catch(e) { return; }
        var ms = JSON.parse(localStorage.getItem('pilote_master_settings') || '{}');
        var cfg = ms.perdirMenus || PERDIR_MENUS.map(function(m){ return {id:m.id, visible:true}; });
        // Merge new menus not yet in saved config
        var cfgIds = cfg.map(function(c){return c.id;});
        PERDIR_MENUS.forEach(function(m){if(cfgIds.indexOf(m.id)<0)cfg.push({id:m.id,visible:true});});
        var menuDiv; try { menuDiv = fr.contentWindow.document.querySelector('.menu'); } catch(e) { return; }
        if (!menuDiv) return;
        
        var visNum = 1;
        cfg.forEach(function(item, i) {
            var link = menuDiv.querySelector('[data-menu="'+item.id+'"]');
            if (link) {
                var isVisible = item.visible !== false;
                link.style.display = isVisible ? '' : 'none';
                link.style.order = i;
                if (isVisible) {
                    var numSpan = link.querySelector('.menu-num');
                    if (numSpan) numSpan.textContent = visNum + '.';
                    visNum++;
                }
            }
        });
        menuDiv.style.display = 'flex';
        menuDiv.style.flexDirection = 'column';
    }

    function triggerVacancesUpdate() {
        var fr = document.getElementById('frame-perdir');
        if (fr && fr.contentWindow && typeof fr.contentWindow.majVacances === 'function') {
            fr.contentWindow.majVacances();
        } else {
            alert('Module PERDIR non chargé. Ouvrez d\'abord le module PERDIR.');
        }
    }

    
    function updateFavicon(logoSrc){
        if(!logoSrc)return;
        var link=document.querySelector('link[rel="icon"]');
        if(!link){link=document.createElement('link');link.rel='icon';document.head.appendChild(link);}
        link.href=logoSrc;
    }

    function toggleAcc(header) {
        var section = header.parentElement;
        var wasOpen = section.classList.contains('open');
        // Fermer tous les autres
        document.querySelectorAll('.acc-section.open').forEach(function(s) { s.classList.remove('open'); });
        // Ouvrir celui-ci sauf s'il était déjà ouvert
        if (!wasOpen) section.classList.add('open');
    }

    // ═══ CLOUD SYNC (multi-fournisseur) ═══
    var _cloudProvider = 'jsonbin';

    function selectCloudProvider(prov) {
        _cloudProvider = prov;
        ['jsonbin','gist','webdav','gdrive','localfolder'].forEach(function(p) {
            var el = document.getElementById('cloud-cfg-' + p);
            if (el) el.style.display = p === prov ? 'block' : 'none';
            var btn = document.querySelector('.cloud-prov-btn[data-prov="'+p+'"]');
            if (btn) btn.classList.toggle('active', p === prov);
        });
        if (prov === 'localfolder' && typeof lfInitMode === 'function') lfInitMode();
    }

    function toggleCloudUI() {
        var on = document.getElementById('s-cloud-enabled').checked;
        document.getElementById('cloud-opts').style.display = on ? 'block' : 'none';
    }

    function getCloudConfig() {
        return {
            provider: _cloudProvider,
            // jsonbin
            key: (document.getElementById('s-cloud-key').value || '').trim(),
            bin: (document.getElementById('s-cloud-bin').value || '').trim(),
            // github gist
            gistToken: (document.getElementById('s-gist-token').value || '').trim(),
            gistId: (document.getElementById('s-gist-id').value || '').trim(),
            // gdrive
            gdriveClientId: (document.getElementById('s-gdrive-clientid').value || '').trim(),
            gdriveFileId: (document.getElementById('s-gdrive-fileid').value || '').trim(),
            // webdav
            wdUrl: (document.getElementById('s-webdav-url').value || '').trim(),
            wdUser: (document.getElementById('s-webdav-user').value || '').trim(),
            wdPass: (document.getElementById('s-webdav-pass').value || '').trim(),
            // common
            auto: document.getElementById('s-cloud-auto').checked,
            enabled: document.getElementById('s-cloud-enabled').checked
        };
    }

    function cloudSetStatus(msg, color) {
        var el = document.getElementById('cloud-status');
        if (el) { el.innerHTML = msg; el.style.color = color || '#888'; }
    }

    // ── jsonbin.io ──
    async function jsonbinPush(data, cfg) {
        var headers = { 'Content-Type': 'application/json', 'X-Master-Key': cfg.key };
        if (cfg.bin) {
            var r = await fetch('https://api.jsonbin.io/v3/b/' + cfg.bin, { method: 'PUT', headers: headers, body: JSON.stringify(data) });
            if (!r.ok) throw new Error('jsonbin PUT: ' + r.status);
            return cfg.bin;
        } else {
            headers['X-Bin-Name'] = 'PILOTE_Data';
            headers['X-Bin-Private'] = 'true';
            var r = await fetch('https://api.jsonbin.io/v3/b', { method: 'POST', headers: headers, body: JSON.stringify(data) });
            if (!r.ok) throw new Error('jsonbin POST: ' + r.status);
            var j = await r.json();
            document.getElementById('s-cloud-bin').value = j.metadata.id;
            return j.metadata.id;
        }
    }
    async function jsonbinPull(cfg) {
        var r = await fetch('https://api.jsonbin.io/v3/b/' + cfg.bin + '/latest', { headers: { 'X-Master-Key': cfg.key } });
        if (!r.ok) throw new Error('jsonbin GET: ' + r.status);
        var j = await r.json();
        return j.record;
    }

    // ── GitHub Gist ──
    async function gistPush(data, cfg) {
        var content = JSON.stringify(data);
        var headers = { 'Content-Type': 'application/json', 'Authorization': 'token ' + cfg.gistToken };
        if (cfg.gistId) {
            var r = await fetch('https://api.github.com/gists/' + cfg.gistId, { method: 'PATCH', headers: headers,
                body: JSON.stringify({ files: { 'pilote_data.json': { content: content } } })
            });
            if (!r.ok) throw new Error('Gist PATCH: ' + r.status);
            return cfg.gistId;
        } else {
            var r = await fetch('https://api.github.com/gists', { method: 'POST', headers: headers,
                body: JSON.stringify({ description: 'PILOTE Suite Data', public: false, files: { 'pilote_data.json': { content: content } } })
            });
            if (!r.ok) throw new Error('Gist POST: ' + r.status);
            var j = await r.json();
            document.getElementById('s-gist-id').value = j.id;
            return j.id;
        }
    }
    async function gistPull(cfg) {
        var r = await fetch('https://api.github.com/gists/' + cfg.gistId, { headers: { 'Authorization': 'token ' + cfg.gistToken } });
        if (!r.ok) throw new Error('Gist GET: ' + r.status);
        var j = await r.json();
        return JSON.parse(j.files['pilote_data.json'].content);
    }

    // ── WebDAV ──
    async function webdavPush(data, cfg) {
        var url = cfg.wdUrl.replace(/\/$/, '') + '/pilote_data.json';
        var headers = { 'Content-Type': 'application/json', 'Authorization': 'Basic ' + btoa(cfg.wdUser + ':' + cfg.wdPass) };
        var r = await fetch(url, { method: 'PUT', headers: headers, body: JSON.stringify(data) });
        if (!r.ok && r.status !== 201 && r.status !== 204) throw new Error('WebDAV PUT: ' + r.status);
        return url;
    }
    async function webdavPull(cfg) {
        var url = cfg.wdUrl.replace(/\/$/, '') + '/pilote_data.json';
        var headers = { 'Authorization': 'Basic ' + btoa(cfg.wdUser + ':' + cfg.wdPass) };
        var r = await fetch(url, { method: 'GET', headers: headers });
        if (!r.ok) throw new Error('WebDAV GET: ' + r.status);
        return await r.json();
    }

    
    // ── Google Drive ──
    var _gdriveToken = null;
    function gdriveAuth() {
        var clientId = (document.getElementById('s-gdrive-clientid').value || '').trim();
        if (!clientId) return alert('Saisissez le Client ID OAuth2');
        var scope = 'https://www.googleapis.com/auth/drive.file';
        var redir = location.origin + location.pathname;
        var url = 'https://accounts.google.com/o/oauth2/v2/auth?client_id='+encodeURIComponent(clientId)+'&response_type=token&redirect_uri='+encodeURIComponent(redir)+'&scope='+encodeURIComponent(scope);
        var w = window.open(url, '_blank', 'width=500,height=600');
        // Listen for redirect
        var check = setInterval(function() {
            try {
                if (w.closed) { clearInterval(check); return; }
                if (w.location.hash) {
                    var hash = w.location.hash.substring(1);
                    var params = new URLSearchParams(hash);
                    var tk = params.get('access_token');
                    if (tk) {
                        _gdriveToken = tk;
                        w.close();
                        clearInterval(check);
                        document.getElementById('gdrive-auth-status').innerHTML = '<span style="color:#27ae60"><i class="fas fa-check-circle"></i> Connecté</span>';
                    }
                }
            } catch(e) {}
        }, 500);
    }

    async function gdrivePush(data, cfg) {
        if (!_gdriveToken) throw new Error('Connectez-vous à Google Drive d\'abord');
        var content = JSON.stringify(data);
        var headers = { 'Authorization': 'Bearer ' + _gdriveToken };
        if (cfg.gdriveFileId) {
            var r = await fetch('https://www.googleapis.com/upload/drive/v3/files/' + cfg.gdriveFileId + '?uploadType=media', {
                method: 'PATCH', headers: Object.assign(headers, {'Content-Type':'application/json'}), body: content
            });
            if (!r.ok) throw new Error('GDrive PATCH: ' + r.status);
            return cfg.gdriveFileId;
        } else {
            var meta = { name: 'pilote_data.json', mimeType: 'application/json' };
            var form = new FormData();
            form.append('metadata', new Blob([JSON.stringify(meta)], {type:'application/json'}));
            form.append('file', new Blob([content], {type:'application/json'}));
            var r = await fetch('https://www.googleapis.com/upload/drive/v3/files?uploadType=multipart', {
                method: 'POST', headers: headers, body: form
            });
            if (!r.ok) throw new Error('GDrive POST: ' + r.status);
            var j = await r.json();
            document.getElementById('s-gdrive-fileid').value = j.id;
            return j.id;
        }
    }

    async function gdrivePull(cfg) {
        if (!_gdriveToken) throw new Error('Connectez-vous à Google Drive d\'abord');
        var r = await fetch('https://www.googleapis.com/drive/v3/files/' + cfg.gdriveFileId + '?alt=media', {
            headers: { 'Authorization': 'Bearer ' + _gdriveToken }
        });
        if (!r.ok) throw new Error('GDrive GET: ' + r.status);
        return await r.json();
    }

    // ── Dispatcher ──
    async // ── Dossier Local (auto-sync via File System Access + fallback manuel) ──
    var _lfDirHandle = null;
    var _lfAutoSaveTimer = null;
    var _lfDirty = false;
    var _lfSaving = false;
    var _lfHasAPI = (typeof window.showDirectoryPicker === 'function');

    // ── Détection du mode et initialisation ──
    function lfInitMode() {
        var autoDiv = document.getElementById('lf-mode-auto');
        var manDiv = document.getElementById('lf-mode-manual');
        // Re-check API availability (may not be set at parse time)
        _lfHasAPI = !!(window.showDirectoryPicker);
        console.log('[PILOTE] lfInitMode: File System Access API =', _lfHasAPI, 'protocol =', location.protocol);
        if (_lfHasAPI) {
            if (autoDiv) autoDiv.style.display = 'block';
            if (manDiv) manDiv.style.display = 'none';
            lfRestoreHandle();
        } else {
            if (autoDiv) autoDiv.style.display = 'none';
            if (manDiv) manDiv.style.display = 'block';
        }
    }

    // ── File System Access API (auto mode) ──
    async function lfPickFolder() {
        try {
            _lfDirHandle = await window.showDirectoryPicker({ mode: 'readwrite' });
            await lfSaveHandleToIDB(_lfDirHandle);
            lfSetAutoStatus('<i class="fas fa-check-circle"></i> ' + _lfDirHandle.name, '#27ae60');
            document.getElementById('lf-auto-actions').style.display = 'block';
            // Check if file already exists in folder (restore if newer)
            await lfAutoLoadOnStartup();
            lfStartAutoSync();
            // Initial save
            await lfWriteToFolder();
        } catch(e) {
            if (e.name !== 'AbortError') lfSetAutoStatus('<i class="fas fa-times"></i> ' + e.message, '#e74c3c');
        }
    }

    async function lfSaveHandleToIDB(handle) {
        return new Promise(function(res, rej) {
            var req = indexedDB.open('pilote_lf', 1);
            req.onupgradeneeded = function(e) { e.target.result.createObjectStore('h'); };
            req.onsuccess = function(e) {
                var tx = e.target.result.transaction('h', 'readwrite');
                tx.objectStore('h').put(handle, 'dir');
                tx.oncomplete = res; tx.onerror = function() { rej(tx.error); };
            };
            req.onerror = function() { rej(req.error); };
        });
    }

    async function lfLoadHandleFromIDB() {
        return new Promise(function(res) {
            var req = indexedDB.open('pilote_lf', 1);
            req.onupgradeneeded = function(e) { e.target.result.createObjectStore('h'); };
            req.onsuccess = function(e) {
                var tx = e.target.result.transaction('h', 'readonly');
                var g = tx.objectStore('h').get('dir');
                g.onsuccess = function() { res(g.result || null); };
                g.onerror = function() { res(null); };
            };
            req.onerror = function() { res(null); };
        });
    }

    async function lfRestoreHandle() {
        try {
            var h = await lfLoadHandleFromIDB();
            if (!h) return;
            var perm = await h.queryPermission({ mode: 'readwrite' });
            if (perm === 'granted') {
                _lfDirHandle = h;
                lfSetAutoStatus('<i class="fas fa-spinner fa-spin"></i> Chargement des données...', '#3498db');
                document.getElementById('lf-auto-actions').style.display = 'block';
                lfShowSyncIndicator();
                // AUTO-LOAD: restore data from file on startup
                await lfAutoLoadOnStartup();
                lfSetAutoStatus('<i class="fas fa-link"></i> ' + h.name + ' (synchronisé)', '#27ae60');
                lfStartAutoSync();
            } else {
                lfSetAutoStatus('<i class="fas fa-lock"></i> ' + h.name + ' — cliquez pour réautoriser', '#e67e22');
                var btn = document.getElementById('lf-pick-btn');
                if (btn) btn.innerHTML = '<i class="fas fa-lock-open"></i> Réautoriser ' + h.name;
            }
        } catch(e) { console.warn('lfRestoreHandle:', e); }
    }

    async function lfAutoLoadOnStartup() {
        try {
            var data = await lfReadFromFolder();
            if (!data) { console.log('[PILOTE] No pilote_data.json found, starting fresh'); return; }
            var fileMeta = data._cloudMeta || {};
            var fileTime = fileMeta.lastPush || '2000-01-01';
            // Compare with local settings timestamp
            var localSettings = JSON.parse(localStorage.getItem('pilote_suite_settings') || '{}');
            var localTime = localSettings._lastSync || '2000-01-01';
            console.log('[PILOTE] File time:', fileTime, '| Local time:', localTime);
            if (fileTime > localTime) {
                console.log('[PILOTE] File is newer → restoring all data');
                distributeToModules(data);
                lfUpdateSyncIndicator('Données restaurées', '#27ae60');
            } else {
                console.log('[PILOTE] Local is current, no restore needed');
            }
        } catch(e) { console.warn('lfAutoLoadOnStartup:', e); }
    }

    async function lfEnsurePermission() {
        if (!_lfDirHandle) return false;
        var perm = await _lfDirHandle.queryPermission({ mode: 'readwrite' });
        if (perm === 'granted') return true;
        perm = await _lfDirHandle.requestPermission({ mode: 'readwrite' });
        return perm === 'granted';
    }

    async function lfWriteToFolder() {
        if (!_lfDirHandle || _lfSaving) return;
        _lfSaving = true;
        try {
            if (!await lfEnsurePermission()) throw new Error('Permission refusée');
            var allData = collectAllModulesData();
            var now = new Date().toISOString();
            allData._cloudMeta = { lastPush: now, provider: 'localfolder' };
            // Update local timestamp so we know we're in sync
            try {
                var ls = JSON.parse(localStorage.getItem('pilote_suite_settings') || '{}');
                ls._lastSync = now;
                localStorage.setItem('pilote_suite_settings', JSON.stringify(ls));
            } catch(e) {}
            var json = JSON.stringify(allData, null, 2);
            var fh = await _lfDirHandle.getFileHandle('pilote_data.json', { create: true });
            var w = await fh.createWritable();
            await w.write(json);
            await w.close();
            _lfDirty = false;
            lfUpdateSyncIndicator('Synchronisé ' + new Date().toLocaleTimeString('fr-FR', {hour:'2-digit',minute:'2-digit'}), '#27ae60');
        } catch(err) {
            console.error('lfWriteToFolder:', err);
            lfUpdateSyncIndicator('Erreur sync', '#e74c3c');
        }
        _lfSaving = false;
    }

    async function lfReadFromFolder() {
        if (!_lfDirHandle) return null;
        try {
            if (!await lfEnsurePermission()) return null;
            var fh = await _lfDirHandle.getFileHandle('pilote_data.json');
            var file = await fh.getFile();
            var text = await file.text();
            return JSON.parse(text);
        } catch(e) {
            if (e.name === 'NotFoundError') return null;
            console.error('lfReadFromFolder:', e);
            return null;
        }
    }

    function lfStartAutoSync() {
        if (_lfAutoSaveTimer) clearInterval(_lfAutoSaveTimer);
        // Take initial snapshot
        _lfLastSnapshot = lfComputeSnapshot();
        // Poll every 3 seconds for changes + save if dirty
        _lfAutoSaveTimer = setInterval(function() {
            lfPollForChanges();
            if (_lfDirty && _lfDirHandle && !_lfSaving) {
                lfWriteToFolder();
            }
        }, 3000);
        lfShowSyncIndicator();
    }

    function lfMarkDirty() {
        _lfDirty = true;
        lfUpdateSyncIndicator('Modifications non sauvegardées…', '#f39c12');
    }

    async function lfForceSave() {
        if (_lfDirHandle) {
            lfUpdateSyncIndicator('<i class="fas fa-spinner fa-spin"></i> Sauvegarde...', '#3498db');
            lfSetAutoStatus('<i class="fas fa-spinner fa-spin"></i> Sauvegarde en cours...', '#3498db');
            await lfWriteToFolder();
            lfSetAutoStatus('<i class="fas fa-check-circle"></i> Sauvegardé ' + new Date().toLocaleTimeString('fr-FR'), '#27ae60');
        } else {
            localFolderExport();
        }
    }

    async function lfForceLoad() {
        if (!_lfDirHandle) { document.getElementById('localfolder-import').click(); return; }
        lfSetAutoStatus('<i class="fas fa-spinner fa-spin"></i> Chargement...', '#3498db');
        var data = await lfReadFromFolder();
        if (data) {
            distributeToModules(data);
            var meta = data._cloudMeta || {};
            lfSetAutoStatus('<i class="fas fa-check-circle"></i> Restauré (' + (meta.lastPush ? new Date(meta.lastPush).toLocaleString('fr-FR') : '?') + ')', '#27ae60');
            alert('✅ Données importées ! Rechargez la page pour appliquer.');
        } else {
            lfSetAutoStatus('<i class="fas fa-exclamation-triangle"></i> Aucun fichier trouvé', '#e67e22');
        }
    }

    // ── UI helpers ──
    function lfSetAutoStatus(html, color) {
        var el = document.getElementById('lf-auto-status');
        if (el) el.innerHTML = '<span style="color:' + (color||'#888') + ';">' + html + '</span>';
    }

    function lfShowSyncIndicator() {
        var el = document.getElementById('lf-sync-indicator');
        if (el) el.style.display = 'block';
    }

    function lfUpdateSyncIndicator(text, color) {
        var dot = document.querySelector('#lf-sync-indicator i');
        var span = document.getElementById('lf-sync-text');
        if (dot) dot.style.color = color || '#888';
        if (span) span.textContent = text;
        lfShowSyncIndicator();
    }

    // ── Manual mode (fallback file://) ──
    function localFolderExport() {
        try {
            localFolderSetStatus('<i class="fas fa-spinner fa-spin"></i> Préparation...', '#f39c12');
            var allData = collectAllModulesData();
            allData._cloudMeta = { lastPush: new Date().toISOString(), provider: 'localfolder' };
            var json = JSON.stringify(allData, null, 2);
            var blob = new Blob([json], { type: 'application/json' });
            var url = URL.createObjectURL(blob);
            var a = document.createElement('a');
            a.href = url; a.download = 'pilote_data.json';
            document.body.appendChild(a); a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            localFolderSetStatus('✅ Fichier téléchargé', '#27ae60');
        } catch(err) { localFolderSetStatus('❌ ' + err.message, '#e74c3c'); }
    }

    function localFolderImport(input) {
        var file = input.files[0]; if (!file) return;
        localFolderSetStatus('<i class="fas fa-spinner fa-spin"></i> Lecture...', '#3498db');
        var reader = new FileReader();
        reader.onload = function(e) {
            try {
                var data = JSON.parse(e.target.result);
                if (!data || typeof data !== 'object') throw new Error('Format invalide');
                distributeToModules(data);
                var meta = data._cloudMeta || {};
                localFolderSetStatus('✅ Importé (' + (meta.lastPush ? new Date(meta.lastPush).toLocaleString('fr-FR') : '?') + ')', '#27ae60');
                alert('✅ Données importées ! Rechargez la page pour appliquer.');
            } catch(err) { localFolderSetStatus('❌ ' + err.message, '#e74c3c'); }
        };
        reader.readAsText(file);
        input.value = '';
    }

    function localFolderSetStatus(html, color) {
        var el = document.getElementById('localfolder-status');
        if (el) el.innerHTML = '<span style="color:' + (color||'#888') + ';">' + html + '</span>';
    }

    // ── Sync Engine: poll ALL modules data for changes ──
    var _lfLastSnapshot = '';

    function _lfHash(str) {
        // DJB2 hash — fast, reliable for change detection
        var hash = 5381;
        for (var i = 0; i < str.length; i++) {
            hash = ((hash << 5) + hash) + str.charCodeAt(i);
            hash = hash & hash; // Convert to 32-bit integer
        }
        return hash.toString(36);
    }

    function lfComputeSnapshot() {
        // Build a fingerprint of ALL data using content hashes
        var parts = [];
        // 1. Wrapper localStorage (pilote_suite_settings, pilote_master_settings, bibase_*)
        try {
            for (var i = 0; i < localStorage.length; i++) {
                var k = localStorage.key(i);
                var v = localStorage.getItem(k) || '';
                parts.push(k + '=' + v.length + ':' + _lfHash(v));
            }
        } catch(e) {}
        // 2. All iframe modules localStorage
        var frames = ['frame-perdir', 'frame-exam', 'frame-oral', 'frame-aed', 'frame-bibase'];
        frames.forEach(function(fid) {
            var fr = document.getElementById(fid);
            if (fr && fr.contentWindow) {
                try {
                    var ls = fr.contentWindow.localStorage;
                    for (var j = 0; j < ls.length; j++) {
                        var k2 = ls.key(j);
                        var v2 = ls.getItem(k2) || '';
                        parts.push(fid + ':' + k2 + '=' + v2.length + ':' + _lfHash(v2));
                    }
                } catch(e2) {}
            }
        });
        return parts.sort().join('|');
    }

    function lfPollForChanges() {
        if (!_lfDirHandle || _lfSaving) return;
        var snap = lfComputeSnapshot();
        if (snap !== _lfLastSnapshot) {
            _lfLastSnapshot = snap;
            _lfDirty = true;
            lfUpdateSyncIndicator('Modifications détectées…', '#f39c12');
        }
    }

    // ── Init on page load ──
    // Fallback if DOMContentLoaded already fired
    if (document.readyState !== 'loading') { setTimeout(function() { lfInitMode(); }, 200); }
    window.addEventListener('DOMContentLoaded', function() {
        setTimeout(function() {
            lfInitMode();
        }, 500);
    });

    // ── Save before leaving ──
    window.addEventListener('beforeunload', function() {
        if (_lfDirHandle && _lfDirty) {
            // Synchronous attempt — may not complete but worth trying
            try { lfWriteToFolder(); } catch(e) {}
        }
    });

    // ── Save when tab becomes hidden (user switches tab/app) ──
    document.addEventListener('visibilitychange', function() {
        if (document.hidden && _lfDirHandle && _lfDirty) {
            lfWriteToFolder();
        }
    });

    async function cloudPush() {
        var cfg = getCloudConfig();
        if (cfg.provider === 'jsonbin' && !cfg.key) return alert('Saisissez votre clé API jsonbin.io');
        if (cfg.provider === 'gist' && !cfg.gistToken) return alert('Saisissez votre GitHub Personal Access Token');
        if (cfg.provider === 'webdav' && !cfg.wdUrl) return alert('Saisissez l\'URL de votre serveur WebDAV');
        if (cfg.provider === 'gdrive' && !_gdriveToken) return alert('Connectez-vous à Google Drive');
        if (cfg.provider === 'localfolder') { lfForceSave(); return; }

        cloudSetStatus('<i class="fas fa-spinner fa-spin"></i> Envoi en cours...', '#f39c12');
        try {
            var allData = collectAllModulesData();
            allData._cloudMeta = { lastPush: new Date().toISOString(), provider: cfg.provider };

            if (cfg.provider === 'jsonbin') await jsonbinPush(allData, cfg);
            else if (cfg.provider === 'gist') await gistPush(allData, cfg);
            else if (cfg.provider === 'webdav') await webdavPush(allData, cfg);
            else if (cfg.provider === 'gdrive') await gdrivePush(allData, cfg);
            

            cloudSetStatus('✅ Envoyé le ' + new Date().toLocaleString('fr-FR') + ' via ' + cfg.provider, '#27ae60');
        } catch (err) {
            cloudSetStatus('❌ ' + err.message, '#e74c3c');
        }
    }

    async function cloudPull() {
        var cfg = getCloudConfig();
        if (cfg.provider === 'jsonbin' && (!cfg.key || !cfg.bin)) return alert('Clé API et ID du Bin requis');
        if (cfg.provider === 'gist' && (!cfg.gistToken || !cfg.gistId)) return alert('Token et Gist ID requis');
        if (cfg.provider === 'webdav' && !cfg.wdUrl) return alert('URL WebDAV requise');
        if (cfg.provider === 'gdrive' && (!_gdriveToken || !cfg.gdriveFileId)) return alert('Connectez Google Drive et renseignez le File ID');
        if (cfg.provider === 'localfolder') { lfForceLoad(); return; }

        cloudSetStatus('<i class="fas fa-spinner fa-spin"></i> Récupération...', '#3498db');
        try {
            var record;
            if (cfg.provider === 'jsonbin') record = await jsonbinPull(cfg);
            else if (cfg.provider === 'gist') record = await gistPull(cfg);
            else if (cfg.provider === 'webdav') record = await webdavPull(cfg);
            else if (cfg.provider === 'gdrive') record = await gdrivePull(cfg);
            

            if (!record) throw new Error('Données vides');
            distributeToModules(record);

            var meta = record._cloudMeta || {};
            cloudSetStatus('✅ Récupéré (' + (meta.lastPush ? new Date(meta.lastPush).toLocaleString('fr-FR') : '?') + ')', '#27ae60');
            alert('✅ Données importées ! Rechargez la page pour appliquer.');
        } catch (err) {
            cloudSetStatus('❌ ' + err.message, '#e74c3c');
        }
    }

    function collectAllModulesData() {
        var allData = {};
        var frames = ['frame-perdir', 'frame-exam', 'frame-oral', 'frame-aed', 'frame-bibase'];
        frames.forEach(function(fid) {
            var fr = document.getElementById(fid);
            if (fr && fr.contentWindow) {
                try {
                    var keys = Object.keys(fr.contentWindow.localStorage);
                    keys.forEach(function(k) {
                        allData['__' + fid + '__' + k] = fr.contentWindow.localStorage.getItem(k);
                    });
                } catch(e) {}
            }
        });
        // Wrapper localStorage (settings, bibase_establishment, etc.)
        try {
            for (var wi = 0; wi < localStorage.length; wi++) {
                var wk = localStorage.key(wi);
                allData['__wrapper__' + wk] = localStorage.getItem(wk);
            }
        } catch(e) {}
        return allData;
    }

    function distributeToModules(record) {
        var frames = ['frame-perdir', 'frame-exam', 'frame-oral', 'frame-aed', 'frame-bibase'];
        frames.forEach(function(fid) {
            var fr = document.getElementById(fid);
            if (fr && fr.contentWindow) {
                try {
                    var prefix = '__' + fid + '__';
                    Object.keys(record).forEach(function(k) {
                        if (k.indexOf(prefix) === 0) {
                            try { fr.contentWindow.localStorage.setItem(k.substring(prefix.length), record[k]); } catch(e2) {}
                        }
                    });
                } catch(e) {}
            }
        });
        // Restore wrapper localStorage
        Object.keys(record).forEach(function(k) {
            if (k.indexOf('__wrapper__') === 0) {
                try { localStorage.setItem(k.substring(11), record[k]); } catch(e3) {}
            }
        });
    }

    // Auto-sync hook
    function cloudAutoSync() {
        var el = document.getElementById('s-cloud-auto');
        var ek = document.getElementById('s-cloud-enabled');
        if (el && el.checked && ek && ek.checked) { setTimeout(cloudPush, 500); }
    }

    
    

    
    function loadBibSettings() {
        var s = JSON.parse(localStorage.getItem('bibase_establishment') || '{}');
        var el;
        el = document.getElementById('bib-layout'); if (el && s.layout) el.value = s.layout;
        el = document.getElementById('bib-font'); if (el && s.font) el.value = s.font;
        el = document.getElementById('bib-signatory'); if (el && s.defaultSignatory) {
            var found = false;
            for (var i = 0; i < el.options.length; i++) { if (el.options[i].value === s.defaultSignatory) { found = true; break; } }
            if (!found) { var o = document.createElement('option'); o.value = s.defaultSignatory; o.text = s.defaultSignatory; el.appendChild(o); }
            el.value = s.defaultSignatory;
        }
        el = document.getElementById('bib-doc-title'); if (el && s.docTitle) el.value = s.docTitle;
        el = document.getElementById('bib-doc-footer'); if (el && s.docFooter) el.value = s.docFooter;
    }

    
    // === PDF HEADER PREVIEW ===
    function updatePdfHeaderPreview() {
        var layout   = (document.getElementById('s-pdf-layout')  || {}).value || 'classique';
        var color    = (document.getElementById('s-pdf-color-hex') || {}).value || '#1b2433';
        var subtitle = (document.getElementById('s-pdf-subtitle') || {}).value || 'Direction';
        var s = getSettings();
        var school = s.school || "Nom de l'\u00e9tablissement";
        var city   = s.city   || '';
        var logo   = s.logoSrc ? '<img src="'+s.logoSrc+'" style="max-height:48px;max-width:96px;object-fit:contain;display:block;">' : '';
        var sub    = subtitle || 'Direction';
        var inn    = document.getElementById('pdf-header-preview-inner');
        if (!inn) return;
        var html = '';
        if (layout === 'moderne') {
            html = '<div style="text-align:center;padding-bottom:8px;border-bottom:2px solid '+color+';">'+(s.logoSrc ? '<img src="'+s.logoSrc+'" style="max-height:40px;object-fit:contain;display:block;margin:0 auto 6px;">' : '')+'<div style="font-size:.95rem;font-weight:900;text-transform:uppercase;letter-spacing:2px;color:'+color+';">'+school+'</div><div style="font-size:.7rem;color:#666;margin-top:2px;">'+sub+(city ? ' — '+city : '')+'</div></div>';
        } else if (layout === 'bandeau') {
            html = '<div style="background:'+color+';color:white;padding:8px 14px;display:flex;justify-content:space-between;align-items:center;"><div><div style="font-size:.88rem;font-weight:900;text-transform:uppercase;letter-spacing:1px;">'+school+'</div><div style="font-size:.65rem;opacity:.85;margin-top:1px;">'+sub+(city ? ' — '+city : '')+'</div></div>'+(s.logoSrc ? '<img src="'+s.logoSrc+'" style="max-height:36px;max-width:70px;object-fit:contain;background:white;padding:2px;border-radius:3px;">' : '')+'</div>';
        } else {
            html = '<div style="display:flex;justify-content:space-between;align-items:flex-start;border-bottom:1.5px solid #000;padding-bottom:8px;"><div><div style="font-weight:bold;text-transform:uppercase;font-size:.9rem;">'+school+'</div><div style="font-size:.7rem;color:#555;margin-top:1px;">'+sub+(city ? ' — '+city : '')+'</div></div><div>'+(s.logoSrc ? '<img src="'+s.logoSrc+'" style="max-height:48px;max-width:96px;object-fit:contain;">' : '')+'</div></div>';
        }
        inn.innerHTML = html;
    }
    // Sync color input ↔ hex text
    document.addEventListener('change', function(e) {
        if (e.target && e.target.id === 's-pdf-color') {
            var hex = document.getElementById('s-pdf-color-hex');
            if (hex) hex.value = e.target.value;
            updatePdfHeaderPreview();
        }
        if (e.target && e.target.id === 's-pdf-layout') updatePdfHeaderPreview();
    });

    </script>


</body></html>