<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PILOTE — Suite de Direction</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=DM+Sans:opsz,wght@9..40,300;9..40,400;9..40,500;9..40,600;9..40,700&family=Playfair+Display:wght@600;700&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <style>
        :root {
            --nav-h: 52px;
            --c-bg: #f0f1f4;
            --c-nav: #1b2433;
            --c-nav-hover: #273347;
            --c-accent: #d4483b;
            --c-accent-glow: rgba(212,72,59,0.35);
            --c-text: #e8eaed;
            --c-text-dim: #8b92a0;
            --c-card: #ffffff;
            --c-border: #dfe2e8;
            --c-success: #2ecc71;
            --c-info: #3498db;
            --c-warning: #f39c12;
            --c-purple: #9b59b6;
            --radius: 10px;
            --shadow: 0 4px 24px rgba(0,0,0,0.08);
            --font: 'DM Sans', -apple-system, BlinkMacSystemFont, sans-serif;
            --font-display: 'Playfair Display', Georgia, serif;
        }
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body { font-family: var(--font); background: var(--c-bg); height: 100vh; display: flex; flex-direction: column; overflow: hidden; color: #2c3040; }

        /* ═══ TOP NAV ═══ */
        .topnav { height: var(--nav-h); background: var(--c-nav); display: flex; align-items: center; padding: 0 16px; box-shadow: 0 2px 12px rgba(0,0,0,0.25); z-index: 1000; flex-shrink: 0; position: relative; }
        .topnav::after { content:''; position:absolute; bottom:0; left:0; right:0; height:2px; background:linear-gradient(90deg,var(--c-accent),#f39c12,var(--c-accent)); opacity:0.7; }
        .brand { display:flex; align-items:center; gap:8px; margin-right:20px; cursor:pointer; text-decoration:none; }
        .brand-icon { width:32px; height:32px; background:var(--c-accent); border-radius:7px; display:flex; align-items:center; justify-content:center; font-size:15px; color:white; font-weight:700; box-shadow:0 2px 8px var(--c-accent-glow); overflow:hidden; }
        .brand-icon img { width:100%; height:100%; object-fit:contain; }
        .brand-text { font-family:var(--font-display); font-size:1.05rem; font-weight:700; color:#fff; }
        .brand-text span { color:var(--c-text-dim); font-family:var(--font); font-weight:400; font-size:0.6rem; display:block; margin-top:-2px; letter-spacing:1.5px; text-transform:uppercase; }
        .nav-sep { width:1px; height:24px; background:rgba(255,255,255,0.1); margin:0 6px; }
        .nav-items { display:flex; align-items:center; gap:3px; height:100%; }
        .nav-item { display:flex; align-items:center; gap:7px; padding:7px 14px; border-radius:7px; cursor:pointer; transition:all 0.2s; color:var(--c-text-dim); font-size:0.8rem; font-weight:500; position:relative; height:34px; user-select:none; white-space:nowrap; }
        .nav-item:hover { background:var(--c-nav-hover); color:var(--c-text); }
        
        .nav-shortcut { font-size:.5rem; background:rgba(255,255,255,.15); color:rgba(255,255,255,.5); padding:1px 4px; border-radius:3px; margin-left:4px; font-family:monospace; vertical-align:middle; display:none; }
        .nav-item:hover .nav-shortcut { display:inline; }
        .nav-item.active { background:rgba(212,72,59,0.12); color:#fff; }
        .nav-item.active::after { content:''; position:absolute; bottom:-9px; left:50%; transform:translateX(-50%); width:20px; height:3px; background:var(--c-accent); border-radius:3px 3px 0 0; }
        .nav-item.hidden-module { display: none !important; }
        .nav-item i { font-size:0.9rem; width:16px; text-align:center; }
        .nav-badge { font-size:0.55rem; padding:1px 5px; border-radius:10px; font-weight:600; }
        .nav-item[data-module="perdir"] .nav-badge { background:var(--c-info); color:#fff; }
        .nav-item[data-module="exam"] .nav-badge { background:var(--c-accent); color:#fff; }
        .nav-item[data-module="oral"] .nav-badge { background:var(--c-warning); color:#fff; }
        .nav-item[data-module="aed"] .nav-badge { background:var(--c-success); color:#fff; }
            [data-module="bibase"] .nav-badge { background:#e67e22; color:#fff; }
        .nav-item[data-module="data"] .nav-badge { background:var(--c-purple); color:#fff; }
        .nav-right { margin-left:auto; display:flex; align-items:center; gap:8px; }
        .nav-clock { color:var(--c-text-dim); font-size:0.75rem; font-variant-numeric:tabular-nums; }
        .nav-btn { width:32px; height:32px; border-radius:7px; border:none; background:var(--c-nav-hover); color:var(--c-text-dim); cursor:pointer; display:flex; align-items:center; justify-content:center; transition:all 0.2s; font-size:0.8rem; }
        .nav-btn:hover { background:rgba(255,255,255,0.12); color:white; }

        /* ═══ SETTINGS OVERLAY ═══ */
        .settings-overlay { position:fixed; inset:0; background:rgba(0,0,0,0.4); z-index:2000; display:none; align-items:center; justify-content:center; backdrop-filter:blur(4px); }
        .settings-overlay.open { display:flex; }
        .settings-panel { background:white; border-radius:14px; width:720px; max-width:95vw; max-height:92vh; overflow-y:auto; box-shadow:0 20px 60px rgba(0,0,0,0.25); animation:panelIn 0.25s ease; }
        @keyframes panelIn { from{opacity:0;transform:translateY(20px) scale(0.97)} to{opacity:1;transform:none} }
        .settings-header { padding:18px 24px; border-bottom:1px solid #eee; display:flex; justify-content:space-between; align-items:center; }
        .settings-header h2 { font-size:1.1rem; font-weight:600; color:var(--c-nav); display:flex; align-items:center; gap:10px; }
        .settings-header h2 i { color:var(--c-accent); }
        .settings-close { background:none; border:none; font-size:1.3rem; cursor:pointer; color:#999; padding:4px; }
        .settings-close:hover { color:#333; }
        .settings-body { padding:24px; }
        .settings-section { margin-bottom:24px; }
        .settings-section h3 { font-size:0.8rem; font-weight:600; color:#666; text-transform:uppercase; letter-spacing:1px; margin-bottom:12px; display:flex; align-items:center; gap:8px; }
        .settings-section h3 i { color:var(--c-info); }
        .settings-grid { display:grid; grid-template-columns:1fr 1fr; gap:14px; }
        .form-group { display:flex; flex-direction:column; gap:4px; }
        .form-group label { font-size:0.78rem; font-weight:500; color:#555; }
        .form-group input[type="text"] { padding:9px 12px; border:1px solid #ddd; border-radius:8px; font-size:0.85rem; font-family:var(--font); transition:border 0.2s; }
        .form-group input[type="text"]:focus { outline:none; border-color:var(--c-info); box-shadow:0 0 0 3px rgba(52,152,219,0.1); }
        .form-group input[type="file"] { font-size:0.75rem; }
        .img-preview { width:100%; height:72px; border:2px dashed #ddd; border-radius:8px; display:flex; align-items:center; justify-content:center; background:#fafafa; margin-top:4px; overflow:hidden; position:relative; }
        .img-preview img { max-height:64px; max-width:100%; object-fit:contain; }
        .img-preview .placeholder { color:#bbb; font-size:0.7rem; }
        .img-preview .btn-clear { position:absolute; top:3px; right:3px; width:18px; height:18px; background:rgba(0,0,0,0.5); color:white; border:none; border-radius:50%; cursor:pointer; font-size:0.55rem; display:none; align-items:center; justify-content:center; }
        .img-preview:hover .btn-clear { display:flex; }

        
        /* ═══ ACCORDION SETTINGS ═══ */
        .acc-section{border:1px solid #e8eaed;border-radius:10px;margin-bottom:10px;}
        .acc-header{display:flex;align-items:center;gap:10px;padding:14px 18px;cursor:pointer;background:#fafbfc;border-radius:10px;user-select:none;}
        .acc-header:hover{background:#eaf4fe;}
        .acc-header h3{font-size:0.82rem;font-weight:600;color:#444;text-transform:uppercase;letter-spacing:0.8px;margin:0;display:flex;align-items:center;gap:8px;flex:1;}
        .acc-header h3 i{color:var(--c-info);font-size:.85rem;}
        .acc-chevron{font-size:.7rem;color:#aaa;transition:transform 0.3s;}
        .acc-section.open .acc-header{background:#eaf4fe;border-bottom:1px solid #e0e0e0;border-radius:10px 10px 0 0;}
        .acc-section.open .acc-chevron{transform:rotate(90deg);color:var(--c-info);}
        .acc-body{display:none;padding:16px 18px;}
        .acc-section.open .acc-body{display:block;}

        
        .cloud-prov-btn{padding:10px 14px;border:2px solid #e0e0e0;border-radius:10px;background:#fff;cursor:pointer;text-align:center;font-family:var(--font);font-size:.78rem;font-weight:600;color:#555;transition:all .2s;flex:1;min-width:110px;}
        .cloud-prov-btn:hover{border-color:#3498db;background:#f0f7ff;}
        .cloud-prov-btn.active{border-color:#3498db;background:#eaf4fe;color:#2c3e50;box-shadow:0 2px 8px rgba(52,152,219,.15);}
        .cloud-prov-btn i{font-size:1.2rem;display:block;margin-bottom:4px;}
        .cloud-prov-btn small{font-weight:400;color:#888;font-size:.62rem;}

        /* Module toggles */
        .module-toggle { display:flex; align-items:center; gap:12px; padding:9px 0; border-bottom:1px solid #f0f0f0; }
        .module-toggle:last-child { border-bottom:none; }
        .module-toggle-icon { width:30px; height:30px; border-radius:7px; display:flex; align-items:center; justify-content:center; color:white; font-size:0.8rem; }
        .module-toggle-info { flex:1; }
        .module-toggle-info strong { font-size:0.82rem; color:#333; }
        .module-toggle-info span { font-size:0.68rem; color:#999; display:block; }
        .toggle-switch { position:relative; width:42px; height:23px; cursor:pointer; }
        .toggle-switch input { opacity:0; width:0; height:0; }
        .toggle-slider { position:absolute; inset:0; background:#ddd; border-radius:23px; transition:0.3s; }
        .toggle-slider::before { content:''; position:absolute; height:17px; width:17px; left:3px; bottom:3px; background:white; border-radius:50%; transition:0.3s; box-shadow:0 1px 3px rgba(0,0,0,0.2); }
        .toggle-switch input:checked + .toggle-slider { background:var(--c-success); }
        .toggle-switch input:checked + .toggle-slider::before { transform:translateX(19px); }

        /* Drag-and-drop order */
        .order-list { list-style:none; }
        .order-item { display:flex; align-items:center; gap:12px; padding:10px 14px; margin-bottom:6px; background:#f8f9fa; border:1px solid #e8eaed; border-radius:8px; cursor:grab; transition:all 0.2s; user-select:none; }
        .order-item:active { cursor:grabbing; }
        .order-item.dragging { opacity:0.4; background:#e8eaed; }
        .order-item.drag-over { border-color:var(--c-info); background:#eaf4fe; transform:scale(1.01); }
        .order-grip { color:#bbb; font-size:0.9rem; }
        .order-icon { width:26px; height:26px; border-radius:6px; display:flex; align-items:center; justify-content:center; color:white; font-size:0.7rem; flex-shrink:0; }
        .order-label { flex:1; font-size:0.82rem; font-weight:500; color:#333; }
        .order-hint { font-size:0.65rem; color:#aaa; margin-top:6px; }

        /* Export/Import buttons */
        .settings-backup { display:flex; gap:8px; flex-wrap:wrap; }
        .backup-btn { display:flex; align-items:center; gap:7px; padding:8px 16px; border:1px solid #ddd; border-radius:8px; background:#fafbfc; cursor:pointer; font-size:0.78rem; font-weight:500; font-family:var(--font); color:#555; transition:all 0.2s; }
        .backup-btn:hover { border-color:var(--c-info); background:#eaf4fe; color:var(--c-info); }
        .backup-btn i { font-size:0.85rem; }
        .backup-btn.import-btn { position:relative; }
        .backup-btn.import-btn input[type="file"] { position:absolute; inset:0; opacity:0; cursor:pointer; }

        .settings-footer { padding:14px 24px; border-top:1px solid #eee; display:flex; justify-content:flex-end; gap:10px; }
        .btn-settings { padding:9px 22px; border:none; border-radius:8px; font-size:0.82rem; font-weight:600; cursor:pointer; font-family:var(--font); transition:all 0.2s; }
        .btn-save { background:var(--c-accent); color:white; }
        .btn-save:hover { background:#c0392b; }
        .btn-cancel { background:#f0f0f0; color:#666; }
        .btn-cancel:hover { background:#e0e0e0; }

        /* ═══ DATA PANEL ═══ */
        .data-panel { position:absolute; inset:0; display:none; flex-direction:column; background:var(--c-bg); z-index:10; overflow-y:auto; }
        .data-panel.active { display:flex; }
        .data-header { padding:30px 40px 0; }
        .data-header h1 { font-family:var(--font-display); font-size:1.6rem; font-weight:700; color:var(--c-nav); display:flex; align-items:center; gap:12px; }
        .data-header h1 i { color:var(--c-purple); }
        .data-header p { color:#6b7280; font-size:0.85rem; margin-top:6px; }
        .data-body { padding:24px 40px 40px; display:grid; grid-template-columns:1fr 1fr; gap:24px; }
        .data-card { background:white; border-radius:var(--radius); box-shadow:var(--shadow); border:1px solid var(--c-border); overflow:hidden; }
        .data-card-header { padding:16px 20px; border-bottom:1px solid #eee; display:flex; align-items:center; gap:10px; }
        .data-card-header i { font-size:1.1rem; }
        .data-card-header.teachers i { color:var(--c-info); }
        .data-card-header.students i { color:var(--c-purple); }
        .data-card-header h3 { font-size:0.95rem; font-weight:600; color:var(--c-nav); }
        .data-card-header .data-badge { margin-left:auto; font-size:0.7rem; padding:3px 10px; border-radius:20px; font-weight:600; background:#f0f0f0; color:#888; }
        .data-card-header .data-badge.has-data { background:#e8f8f0; color:var(--c-success); }
        .data-card-body { padding:20px; }

        .excel-drop { border:2px dashed #ccc; border-radius:8px; padding:24px; text-align:center; transition:0.2s; cursor:pointer; position:relative; background:#fafbfc; }
        .excel-drop:hover { border-color:var(--c-info); background:#f0f7ff; }
        .excel-drop.loaded { border-color:var(--c-success); background:#f0fff4; }
        .excel-drop input[type="file"] { position:absolute; inset:0; opacity:0; cursor:pointer; }
        .excel-drop i.drop-icon { font-size:2rem; color:#ccc; margin-bottom:8px; display:block; }
        .excel-drop.loaded i.drop-icon { color:var(--c-success); }
        .excel-drop .drop-label { font-size:0.82rem; color:#888; }
        .excel-drop.loaded .drop-label { color:var(--c-success); font-weight:600; }
        .excel-drop .drop-hint { font-size:0.68rem; color:#bbb; margin-top:4px; }

        .data-actions { display:flex; gap:8px; margin-top:12px; flex-wrap:wrap; }
        .data-btn { padding:7px 14px; border:none; border-radius:7px; font-size:0.75rem; font-weight:600; cursor:pointer; font-family:var(--font); transition:0.2s; display:flex; align-items:center; gap:6px; }
        .data-btn-view { background:#eaf4fe; color:var(--c-info); }
        .data-btn-view:hover { background:#d0e8fc; }
        .data-btn-clear { background:#fff0f0; color:var(--c-accent); }
        .data-btn-clear:hover { background:#fde0e0; }
        .data-btn-tpl { background:#f0f7ff; color:var(--c-purple); }
        .data-btn-tpl:hover { background:#e4edfe; }

        .data-preview { margin-top:14px; max-height:260px; overflow-y:auto; border:1px solid #eee; border-radius:8px; }
        .data-preview table { width:100%; border-collapse:collapse; font-size:0.72rem; }
        .data-preview th { background:#f4f5f7; padding:7px 10px; text-align:left; font-weight:600; color:#555; position:sticky; top:0; border-bottom:1px solid #ddd; }
        .data-preview td { padding:6px 10px; border-bottom:1px solid #f0f0f0; color:#444; }
        .data-preview tr:hover td { background:#f8f9ff; }
        .data-count { font-size:0.72rem; color:#888; margin-top:8px; display:flex; align-items:center; gap:6px; }
        .data-count strong { color:var(--c-nav); }
        .data-count i { color:var(--c-success); }

        /* ═══ CONTENT ═══ */
        .content-area { flex:1; position:relative; overflow:hidden; }
        .welcome { position:absolute; inset:0; display:flex; flex-direction:column; align-items:center; justify-content:center; background:linear-gradient(160deg,#f0f1f4,#e4e7ee,#dfe2ea); z-index:10; transition:opacity 0.4s,transform 0.4s; padding:40px; }
        .welcome.hidden { opacity:0; transform:scale(0.98); pointer-events:none; }
        .welcome-header { text-align:center; margin-bottom:40px; }
        .welcome-logo { width:auto; height:auto; min-height:56px; background:var(--c-accent); border-radius:14px; display:flex; align-items:center; justify-content:center; font-size:24px; color:white; font-weight:700; margin:0 auto 16px; box-shadow:0 8px 32px var(--c-accent-glow); overflow:hidden; }
        .welcome-logo img { height:4cm; width:auto; object-fit:contain; }
        .welcome-title { font-family:var(--font-display); font-size:2rem; font-weight:700; color:var(--c-nav); margin-bottom:6px; }
        .welcome-subtitle { color:#6b7280; font-size:0.95rem; }
        .module-grid { display:flex; flex-wrap:wrap; justify-content:center; gap:16px; max-width:1000px; width:100%; }
        .module-card { background:var(--c-card); border-radius:var(--radius); padding:24px 20px; cursor:pointer; transition:all 0.25s; box-shadow:var(--shadow); border:1px solid var(--c-border); text-align:center; position:relative; overflow:hidden; width:170px; flex-shrink:0; }
        .module-card::before { content:''; position:absolute; top:0; left:0; right:0; height:3px; border-radius:var(--radius) var(--radius) 0 0; transition:height 0.3s; }
        .module-card:hover { transform:translateY(-4px); box-shadow:0 8px 32px rgba(0,0,0,0.12); }
        .module-card:hover::before { height:5px; }
        .module-card.card-hidden { display:none !important; }
        .module-card[data-m="perdir"]::before { background:var(--c-info); }
        .module-card[data-m="exam"]::before { background:var(--c-accent); }
        .module-card[data-m="oral"]::before { background:var(--c-warning); }
        .module-card[data-m="aed"]::before { background:var(--c-success); }
        .module-card[data-m="bibase"]::before { background:#e67e22; }
            .module-card[data-m="data"]::before { background:var(--c-purple); }
        .module-icon { width:44px; height:44px; border-radius:11px; display:flex; align-items:center; justify-content:center; font-size:1.1rem; color:white; margin:0 auto 12px; }
        .module-card[data-m="perdir"] .module-icon { background:var(--c-info); }
        .module-card[data-m="exam"] .module-icon { background:var(--c-accent); }
        .module-card[data-m="oral"] .module-icon { background:var(--c-warning); }
        .module-card[data-m="aed"] .module-icon { background:var(--c-success); }
        .module-card[data-m="bibase"] .module-icon { background:#e67e22; }
            .module-card[data-m="data"] .module-icon { background:var(--c-purple); }
        .module-card h3 { font-size:0.9rem; font-weight:600; color:var(--c-nav); margin-bottom:4px; }
        .module-card p { font-size:0.7rem; color:#9ca3af; line-height:1.3; }

        .module-frame { position:absolute; inset:0; border:none; width:100%; height:100%; display:none; background:white; }
        .module-frame.active { display:block; }
        .loader-overlay { position:absolute; inset:0; background:rgba(240,241,244,0.92); display:flex; flex-direction:column; align-items:center; justify-content:center; z-index:20; opacity:0; pointer-events:none; transition:opacity 0.3s; }
        .loader-overlay.show { opacity:1; pointer-events:auto; }
        .loader-spinner { width:32px; height:32px; border:3px solid var(--c-border); border-top-color:var(--c-accent); border-radius:50%; animation:spin 0.8s linear infinite; margin-bottom:10px; }
        .loader-text { font-size:0.8rem; color:#6b7280; }
        @keyframes spin { to{transform:rotate(360deg)} }

        .bottom-bar { height:26px; background:var(--c-nav); display:flex; align-items:center; justify-content:space-between; padding:0 16px; font-size:0.6rem; color:var(--c-text-dim); flex-shrink:0; }
        .status-dot { display:inline-block; width:5px; height:5px; border-radius:50%; background:var(--c-success); margin-right:5px; animation:pulse-dot 2s ease infinite; }
        @keyframes pulse-dot { 0%,100%{opacity:1} 50%{opacity:0.4} }

        @media (max-width:900px) { .module-grid{grid-template-columns:repeat(2,1fr);max-width:460px} .nav-item .nav-label{display:none} .nav-item{padding:7px 10px} .brand-text span{display:none} .nav-clock{display:none} .settings-grid{grid-template-columns:1fr} .data-body{grid-template-columns:1fr;padding:20px} }
        @media (max-width:500px) { .module-grid{grid-template-columns:1fr;max-width:300px} }
    </style>
    <script src="https://accounts.google.com/gsi/client" async defer></script>
</head>
<body>

    <nav class="topnav">
        <a class="brand" onclick="goHome()" title="Accueil">
            <div class="brand-icon" id="brandIcon"><span id="brandLetter">P</span><img id="brandLogo" style="display:none"></div>
            <div class="brand-text">CADIR<span>Suite Direction</span></div>
        </a>
        <div class="nav-sep"></div>
        <div class="nav-items" id="navItems">
            <div class="nav-item" data-module="perdir" onclick="loadModule('perdir')" title="Ctrl+P"><i class="fas fa-building-columns"></i><span class="nav-label">CADIR</span><span class="nav-badge">Direction</span><kbd class="nav-shortcut">Ctrl+P</kbd></div>
            <div class="nav-item" data-module="exam" onclick="loadModule('exam')" title="Ctrl+E"><i class="fas fa-file-pen"></i><span class="nav-label">EXAM</span><span class="nav-badge">Épreuves</span><kbd class="nav-shortcut">Ctrl+E</kbd></div>
            <div class="nav-item" data-module="oral" onclick="loadModule('oral')" title="Ctrl+O"><i class="fas fa-comments"></i><span class="nav-label">ORAL</span><span class="nav-badge">Oraux</span><kbd class="nav-shortcut">Ctrl+O</kbd></div>
            <div class="nav-item" data-module="aed" onclick="loadModule('aed')" title="Ctrl+A"><i class="fas fa-user-shield"></i><span class="nav-label">AED</span><span class="nav-badge">Vie Scolaire</span><kbd class="nav-shortcut">Ctrl+A</kbd></div>
            <div class="nav-item" data-module="bibase" onclick="loadModule('bibase')" title="Ctrl+B"><i class="fas fa-newspaper"></i><span class="nav-label">BULLETIN</span><span class="nav-badge">Information</span><kbd class="nav-shortcut">Ctrl+B</kbd></div>
            <div class="nav-sep"></div>
            <div class="nav-item" data-module="data" onclick="openDataPanel()" title="Ctrl+D"><i class="fas fa-database"></i><span class="nav-label">Données</span><span class="nav-badge">Import</span><kbd class="nav-shortcut">Ctrl+D</kbd></div>
        </div>
        <div class="nav-right">
            <div class="nav-clock" id="clock"></div>
            <button class="nav-btn" onclick="openSettings()" title="Paramètres (Alt+P)"><i class="fas fa-cog"></i></button>
            <button class="nav-btn" onclick="toggleFullscreen()" title="Plein écran"><i class="fas fa-expand" id="fs-icon"></i></button>
        </div>
    </nav>

    <!-- ═══ SETTINGS ═══ -->
    <div class="settings-overlay" id="settingsOverlay" onclick="if(event.target===this)closeSettings()">
        <div class="settings-panel">
            <div class="settings-header">
                <h2><i class="fas fa-cog"></i> Paramètres généraux</h2>
                <button class="settings-close" onclick="closeSettings()">&times;</button>
            </div>
            <div class="settings-body">

                <div class="acc-section open">
                    <div class="acc-header" onclick="toggleAcc(this)"><h3><i class="fas fa-id-card"></i> Identité & Établissement</h3><i class="fas fa-chevron-right acc-chevron"></i></div>
                    <div class="acc-body">
                    <div class="settings-grid">
                        <div class="form-group"><label>Nom de l'établissement</label><input type="text" id="s-school" placeholder="Lycée Jean-Antoine"></div>
                        <div class="form-group"><label>Nom & Prénom</label><input type="text" id="s-name" placeholder="M. Dupont"></div>
                        <div class="form-group"><label>Fonction</label><input type="text" id="s-role" placeholder="Proviseur adjoint"></div>
                        <div class="form-group"><label>Ville</label><input type="text" id="s-city" placeholder="Rennes"></div>
                        <div class="form-group"><label>Zone de vacances</label><select id="s-zone" style="padding:8px 12px;border:1px solid #ddd;border-radius:8px;font-size:.85rem;width:100%;"><option value="A">Zone A</option><option value="B" selected>Zone B</option><option value="C">Zone C</option></select></div>
                        <div class="form-group" style="display:flex;align-items:flex-end;">
                            <button onclick="triggerVacancesUpdate()" style="padding:9px 16px;border:none;border-radius:8px;background:#e67e22;color:#fff;font-weight:600;font-size:.78rem;cursor:pointer;white-space:nowrap;display:flex;align-items:center;gap:6px;height:40px;">
                                <i class="fas fa-calendar-day"></i> MAJ Vacances scolaires
                            </button>
                        </div>
                    </div>
                </div></div>
                <div class="acc-section">
                    <div class="acc-header" onclick="toggleAcc(this)"><h3><i class="fas fa-image"></i> Logo & Signature</h3><i class="fas fa-chevron-right acc-chevron"></i></div>
                    <div class="acc-body">
                    <div class="settings-grid">
                        <div class="form-group">
                            <label>Logo de l'établissement</label>
                            <input type="file" accept="image/*" onchange="handleSettingsImage(this,'logo')">
                            <div class="img-preview" id="prev-logo">
                                <span class="placeholder" id="ph-logo">Aucun logo</span>
                                <img id="img-logo" style="display:none">
                                <button class="btn-clear" onclick="clearImage('logo')" title="Supprimer">&times;</button>
                            </div>
                        </div>
                        <div class="form-group">
                            <label>Signature scannée</label>
                            <input type="file" accept="image/*" onchange="handleSettingsImage(this,'sign')">
                            <div class="img-preview" id="prev-sign">
                                <span class="placeholder" id="ph-sign">Aucune signature</span>
                                <img id="img-sign" style="display:none">
                                <button class="btn-clear" onclick="clearImage('sign')" title="Supprimer">&times;</button>
                            </div>
                        </div>
                    </div>
                </div></div>
                <div class="acc-section">
                    <div class="acc-header" onclick="toggleAcc(this)"><h3><i class="fas fa-sliders"></i> Modules &amp; Organisation</h3><i class="fas fa-chevron-right acc-chevron"></i></div>
                    <div class="acc-body">
                        <h4 style="font-size:.78rem;font-weight:600;color:#666;margin:0 0 10px;text-transform:uppercase;letter-spacing:.5px"><i class="fas fa-eye" style="color:var(--c-info)"></i> Modules affichés</h4>
                        <div class="module-toggle">
                        <div class="module-toggle-icon" style="background:var(--c-info)"><i class="fas fa-building-columns"></i></div>
                        <div class="module-toggle-info"><strong>CADIR</strong><span>Direction & pilotage</span></div>
                        <label class="toggle-switch"><input type="checkbox" id="tog-perdir" checked onchange="updateModuleVisibility()"><span class="toggle-slider"></span></label>
                    </div>
                    <div class="module-toggle">
                        <div class="module-toggle-icon" style="background:var(--c-accent)"><i class="fas fa-file-pen"></i></div>
                        <div class="module-toggle-info"><strong>EXAM</strong><span>Organisation des épreuves</span></div>
                        <label class="toggle-switch"><input type="checkbox" id="tog-exam" checked onchange="updateModuleVisibility()"><span class="toggle-slider"></span></label>
                    </div>
                    <div class="module-toggle">
                        <div class="module-toggle-icon" style="background:var(--c-warning)"><i class="fas fa-comments"></i></div>
                        <div class="module-toggle-info"><strong>ORAL</strong><span>Gestion des oraux</span></div>
                        <label class="toggle-switch"><input type="checkbox" id="tog-oral" checked onchange="updateModuleVisibility()"><span class="toggle-slider"></span></label>
                    </div>
                    <div class="module-toggle">
                        <div class="module-toggle-icon" style="background:var(--c-success)"><i class="fas fa-user-shield"></i></div>
                        <div class="module-toggle-info"><strong>AED</strong><span>Assistants d'éducation</span></div>
                        <label class="toggle-switch"><input type="checkbox" id="tog-aed" checked onchange="updateModuleVisibility()"><span class="toggle-slider"></span></label>
                    </div>
                    <div class="module-toggle">
                        <div class="module-toggle-icon" style="background:#e67e22"><i class="fas fa-newspaper"></i></div>
                        <div class="module-toggle-info"><strong>BULLETIN</strong><span>Bulletin d'information</span></div>
                        <label class="toggle-switch"><input type="checkbox" id="tog-bibase" checked onchange="updateModuleVisibility()"><span class="toggle-slider"></span></label>
                    </div>
                        <hr style="margin:18px 0;border:none;border-top:1px solid #eee">
                        <h4 style="font-size:.78rem;font-weight:600;color:#666;margin:0 0 10px;text-transform:uppercase;letter-spacing:.5px"><i class="fas fa-arrows-up-down" style="color:var(--c-info)"></i> Ordre des menus</h4>
                        <ul class="order-list" id="orderList"></ul>
                    <div class="order-hint"><i class="fas fa-hand-pointer"></i> Glissez-déposez pour réorganiser l'ordre</div>
                    
                    </div>
                </div>
                <div class="acc-section">
                    <div class="acc-header" onclick="toggleAcc(this)"><h3><i class="fas fa-bars"></i> Sous-menus CADIR</h3><i class="fas fa-chevron-right acc-chevron"></i></div>
                    <div class="acc-body"><div class="acc-body-inner">
                        <small style="color:#888;display:block;margin-bottom:10px;">Affichez/masquez et réorganisez les sous-menus du module CADIR par glisser-déposer.</small>
                        <div id="perdir-submenu-list" style="margin-bottom:8px;"></div>
                        <div class="order-hint" style="font-size:.68rem;color:#aaa;"><i class="fas fa-hand-pointer"></i> Glissez pour réordonner. Décochez pour masquer.</div>
                    </div></div>
                </div>
                <div class="acc-section">
                    <div class="acc-header" onclick="toggleAcc(this)"><h3><i class="fas fa-calendar-alt"></i> Agendas externes</h3><i class="fas fa-chevron-right acc-chevron"></i></div>
                    <div class="acc-body">
                    <div class="settings-grid">
                        <div class="form-group" style="grid-column:1/-1;">
                            <label style="display:flex;align-items:center;gap:8px;cursor:pointer;">
                                <input type="checkbox" id="s-gcal" onchange="toggleGcal()" style="width:18px;height:18px;cursor:pointer;accent-color:#4285f4;">
                                <span style="font-weight:600;">Utiliser Google Agenda dans CADIR</span>
                            </label>
                            <small style="color:#888;font-size:.65rem;margin-top:2px;display:block;margin-left:26px;">Si décoché, l'agenda CADIR fonctionne en mode local (déconnecté).</small>
                        </div>
                        <div id="gcal-opts" style="display:none;grid-column:1/-1;">
                            <div style="background:#f8f9fa;border:1px solid #e0e0e0;border-radius:10px;padding:14px;margin-bottom:12px;">
                                <div style="font-weight:600;font-size:.8rem;margin-bottom:8px;color:#333;"><i class="fab fa-google" style="color:#4285f4;margin-right:4px;"></i> Connexion OAuth2</div>
                                <div class="form-group" style="margin-bottom:8px">
                                    <label style="font-size:.75rem;">Client ID OAuth2</label>
                                    <input type="text" id="s-gcal-clientid" placeholder="xxxxx.apps.googleusercontent.com" style="padding:8px;border:1px solid #ddd;border-radius:8px;width:100%;font-size:.8rem;">
                                    <small style="color:#888;font-size:.62rem;">Console Google Cloud → API & Services → Identifiants → ID client OAuth 2.0 (<a href="https://console.cloud.google.com/apis/credentials" target="_blank">ouvrir</a>)</small>
                                </div>
                                <div style="display:flex;gap:8px;align-items:center;flex-wrap:wrap;">
                                    <button onclick="gcalAuth()" id="btn-gcal-auth" style="padding:7px 16px;border:none;border-radius:8px;background:#4285f4;color:#fff;font-weight:600;font-size:.78rem;cursor:pointer;display:flex;align-items:center;gap:6px;">
                                        <i class="fas fa-sign-in-alt"></i> Se connecter à Google
                                    </button>
                                    <span id="gcal-auth-status" style="font-size:.72rem;color:#999;"></span>
                                </div>
                            </div>

                            <div id="gcal-list-wrap" style="display:none;">
                                <div style="font-weight:600;font-size:.78rem;margin-bottom:6px;color:#333;"><i class="fas fa-list"></i> Vos agendas Google</div>
                                <div id="gcal-list" style="margin-bottom:8px;max-height:200px;overflow-y:auto;"></div>
                                <button onclick="gcalFetchEvents()" style="padding:7px 14px;border:none;border-radius:8px;background:#34a853;color:#fff;font-weight:600;font-size:.78rem;cursor:pointer;"><i class="fas fa-sync"></i> Synchroniser les événements</button>
                                <div id="gcal-events-status" style="margin-top:6px;font-size:.72rem;color:#888;"></div>
                            </div>

                            <div style="margin-top:12px;border-top:1px solid #eee;padding-top:10px;">
                                <details>
                                    <summary style="cursor:pointer;font-size:.72rem;color:#888;font-weight:600;"><i class="fas fa-keyboard"></i> Ajouter un agenda manuellement</summary>
                                    <div style="margin-top:8px;">
                                        <small style="color:#888;font-size:.62rem;display:block;margin-bottom:6px;">Pour les agendas publics : copiez l'ID depuis Google Agenda → Paramètres de l'agenda.</small>
                                        <div class="form-group" style="margin-bottom:6px">
                                            <label style="font-size:.72rem;">Clé API (pour agendas publics)</label>
                                            <input type="text" id="s-gcal-key" placeholder="AIzaSy..." style="padding:7px;border:1px solid #ddd;border-radius:8px;width:100%;font-size:.78rem;">
                                        </div>
                                        <div style="display:flex;gap:6px;align-items:flex-end;">
                                            <div class="form-group" style="flex:2;">
                                                <label style="font-size:.72rem;">ID du calendrier</label>
                                                <input type="text" id="gcal-manual-id" placeholder="email@gmail.com" style="padding:7px;border:1px solid #ddd;border-radius:8px;width:100%;font-size:.78rem;">
                                            </div>
                                            <div class="form-group" style="flex:1;">
                                                <label style="font-size:.72rem;">Nom</label>
                                                <input type="text" id="gcal-manual-name" placeholder="Mon agenda" style="padding:7px;border:1px solid #ddd;border-radius:8px;width:100%;font-size:.78rem;">
                                            </div>
                                            <button onclick="addManualCal()" style="padding:7px 12px;border:none;border-radius:8px;background:var(--c-info);color:#fff;font-weight:700;cursor:pointer;font-size:.85rem;height:36px;">+</button>
                                        </div>
                                        <div id="gcal-manual-list" style="margin-top:6px;"></div>
                                    </div>
                                </details>
                            </div>
                        </div>

                            <div style="margin-top:20px;border-top:2px solid #e0e0e0;padding-top:16px;">
                                <div style="font-weight:700;font-size:.88rem;margin-bottom:10px;color:#0078d4;display:flex;align-items:center;gap:8px;"><i class="fab fa-microsoft"></i> Outlook / Office 365</div>
                                <small style="color:#666;display:block;margin-bottom:10px;line-height:1.4;font-size:.7rem;">Connectez un calendrier Outlook / Microsoft 365 via Microsoft Graph API.</small>
                                <div class="form-group" style="margin-bottom:8px;"><label style="font-size:.72rem;">Application (client) ID</label><input type="text" id="s-outlook-clientid" placeholder="Azure AD App ID" style="padding:8px;border:1px solid #ddd;border-radius:8px;width:100%;font-size:.78rem;"></div>
                                <button onclick="outlookAuth()" id="btn-outlook-auth" style="padding:9px 18px;border:none;border-radius:8px;background:#0078d4;color:#fff;font-weight:600;cursor:pointer;display:flex;align-items:center;gap:8px;font-size:.8rem;"><i class="fab fa-microsoft"></i> Connecter Outlook</button>
                                <span id="outlook-auth-status" style="font-size:.72rem;color:#888;margin-left:8px;"></span>
                                <div id="outlook-cal-list-wrap" style="display:none;margin-top:12px;">
                                    <label style="font-size:.72rem;font-weight:600;">Agendas Outlook :</label>
                                    <div id="outlook-cal-list" style="margin-top:6px;"></div>
                                    <button onclick="outlookFetchEvents()" style="margin-top:8px;padding:8px 16px;border:none;border-radius:8px;background:#0078d4;color:#fff;font-weight:600;cursor:pointer;font-size:.78rem;"><i class="fas fa-sync"></i> Synchroniser</button>
                                    <span id="outlook-events-status" style="font-size:.72rem;margin-left:8px;"></span>
                                </div>
                            </div>
                    </div>
                </div></div>
                <div class="acc-section">
                    <div class="acc-header" onclick="toggleAcc(this)"><h3><i class="fas fa-hard-drive"></i> Sauvegarde & Synchronisation</h3><i class="fas fa-chevron-right acc-chevron"></i></div>
                    <div class="acc-body">
                    <div style="margin-bottom:18px;padding:16px;background:#f0f7ff;border:1px solid #c8ddf5;border-radius:10px;">
                        <div style="display:flex;align-items:center;gap:8px;margin-bottom:10px;">
                            <i class="fas fa-cloud" style="color:#3498db;font-size:1.1rem;"></i>
                            <strong style="font-size:.85rem;color:#2c3e50;">Synchronisation en ligne</strong>
                            <label class="toggle-switch" style="margin-left:auto;"><input type="checkbox" id="s-cloud-enabled" onchange="toggleCloudUI()"><span class="toggle-slider"></span></label>
                        </div>
                        <div id="cloud-opts" style="display:none;">
                            <div style="margin-bottom:12px;">
                                <label style="font-size:.78rem;font-weight:600;color:#333;display:block;margin-bottom:6px;">Fournisseur de stockage</label>
                                <div style="display:flex;gap:8px;flex-wrap:wrap;" id="cloud-provider-btns">
                                    <button class="cloud-prov-btn active" data-prov="jsonbin" onclick="selectCloudProvider('jsonbin')"><i class="fas fa-database" style="color:#3498db"></i> jsonbin.io<br><small>Gratuit &bull; Simple</small></button>
                                    <button class="cloud-prov-btn" data-prov="gist" onclick="selectCloudProvider('gist')"><i class="fab fa-github" style="color:#333"></i> GitHub Gist<br><small>Gratuit &bull; Illimité</small></button>
                                    <button class="cloud-prov-btn" data-prov="webdav" onclick="selectCloudProvider('webdav')"><i class="fas fa-server" style="color:#e67e22"></i> WebDAV / FTP<br><small>Serveur perso</small></button>
                                    <button class="cloud-prov-btn" data-prov="gdrive" onclick="selectCloudProvider('gdrive')"><i class="fab fa-google-drive" style="color:#0f9d58"></i> Google Drive<br><small>OAuth2</small></button>
                                    <button class="cloud-prov-btn" data-prov="localfolder" onclick="selectCloudProvider('localfolder')"><i class="fas fa-folder-open" style="color:#0078d4"></i> Dossier Local<br><small>OneDrive / GDrive / Dropbox</small></button>
                                </div>
                            </div>
                            <div id="cloud-cfg-jsonbin">
                                <small style="color:#666;display:block;margin-bottom:8px;line-height:1.4;"><a href="https://jsonbin.io" target="_blank" style="color:#3498db;">jsonbin.io</a> — Créez un compte gratuit, copiez votre <b>X-Master-Key</b> depuis le dashboard.</small>
                                <div class="settings-grid">
                                    <div class="form-group"><label style="font-size:.72rem;">Clé API (X-Master-Key)</label><input type="password" id="s-cloud-key" placeholder="$2a$10$xxxxxxx..." style="padding:8px;border:1px solid #ddd;border-radius:8px;width:100%;font-size:.78rem;"></div>
                                    <div class="form-group"><label style="font-size:.72rem;">ID du Bin <small style="color:#aaa;">(auto-créé)</small></label><input type="text" id="s-cloud-bin" placeholder="Automatique au 1er envoi" style="padding:8px;border:1px solid #ddd;border-radius:8px;width:100%;font-size:.78rem;"></div>
                                </div>
                            </div>
                            <div id="cloud-cfg-gist" style="display:none;">
                                <small style="color:#666;display:block;margin-bottom:8px;line-height:1.4;"><a href="https://github.com/settings/tokens" target="_blank" style="color:#333;">GitHub</a> — Créez un <b>Personal Access Token</b> (scope <code>gist</code>). Stockage illimité et privé.</small>
                                <div class="settings-grid">
                                    <div class="form-group"><label style="font-size:.72rem;">Personal Access Token</label><input type="password" id="s-gist-token" placeholder="ghp_xxxxxxxxxxxx" style="padding:8px;border:1px solid #ddd;border-radius:8px;width:100%;font-size:.78rem;"></div>
                                    <div class="form-group"><label style="font-size:.72rem;">Gist ID <small style="color:#aaa;">(auto-créé)</small></label><input type="text" id="s-gist-id" placeholder="Automatique au 1er envoi" style="padding:8px;border:1px solid #ddd;border-radius:8px;width:100%;font-size:.78rem;"></div>
                                </div>
                            </div>
                            <div id="cloud-cfg-gdrive" style="display:none;">
                                <small style="color:#666;display:block;margin-bottom:8px;line-height:1.4;">Utilisez <b>Google Drive</b> pour stocker vos données. Nécessite le même Client ID OAuth2 que Google Agenda (ajouter le scope <code>drive.file</code>).</small>
                                <div class="settings-grid">
                                    <div class="form-group"><label style="font-size:.72rem;">Client ID OAuth2</label><input type="text" id="s-gdrive-clientid" placeholder="Même que Google Agenda" style="padding:8px;border:1px solid #ddd;border-radius:8px;width:100%;font-size:.78rem;"></div>
                                    <div class="form-group"><label style="font-size:.72rem;">File ID <small style="color:#aaa;">(auto-créé)</small></label><input type="text" id="s-gdrive-fileid" placeholder="Automatique au 1er envoi" style="padding:8px;border:1px solid #ddd;border-radius:8px;width:100%;font-size:.78rem;"></div>
                                </div>
                                <button class="backup-btn" onclick="gdriveAuth()" style="margin-top:8px;background:#0f9d58;color:#fff;border-color:#0f9d58;"><i class="fab fa-google"></i> Connecter Google Drive</button>
                                <span id="gdrive-auth-status" style="font-size:.72rem;color:#888;margin-left:8px;"></span>
                            </div>
                            <div id="cloud-cfg-localfolder" style="display:none;">
                                <div id="lf-mode-auto" style="display:none;">
                                    <small style="color:#666;display:block;margin-bottom:10px;line-height:1.4;"><b>Mode automatique</b> — Toutes vos données sont synchronisées en temps réel dans le dossier local choisi (OneDrive, Google Drive, Dropbox…).</small>
                                    <div style="display:flex;align-items:center;gap:10px;flex-wrap:wrap;margin-bottom:8px;">
                                        <button class="backup-btn" onclick="lfPickFolder()" style="background:#0078d4;color:#fff;border-color:#0078d4;" id="lf-pick-btn"><i class="fas fa-folder-open"></i> Choisir le dossier</button>
                                        <span id="lf-auto-status" style="font-size:.72rem;color:#888;"></span>
                                    </div>
                                    <div id="lf-auto-actions" style="display:none;margin-top:6px;">
                                        <div style="display:flex;gap:8px;flex-wrap:wrap;">
                                            <button class="backup-btn" onclick="lfForceSave()" style="background:#27ae60;color:#fff;border-color:#27ae60;font-size:.72rem;padding:6px 12px;"><i class="fas fa-save"></i> Forcer la sauvegarde</button>
                                            <button class="backup-btn" onclick="lfForceLoad()" style="background:#3498db;color:#fff;border-color:#3498db;font-size:.72rem;padding:6px 12px;"><i class="fas fa-sync"></i> Recharger depuis le fichier</button>
                                        </div>
                                    </div>
                                    <small style="color:#aaa;display:block;margin-top:8px;"><i class="fas fa-info-circle"></i> Le fichier <code>pilote_data.json</code> est automatiquement mis à jour dans le dossier sélectionné à chaque modification.</small>
                                </div>
                                <div id="lf-mode-manual">
                                    <small style="color:#666;display:block;margin-bottom:10px;line-height:1.4;">Sauvegardez vos données dans un fichier <code>pilote_data.json</code> que vous placez dans votre <b>dossier synchronisé</b> (OneDrive, Google Drive, Dropbox…).</small>
                                    <div style="display:flex;gap:10px;flex-wrap:wrap;margin-bottom:8px;">
                                        <button class="backup-btn" onclick="localFolderExport()" style="background:#0078d4;color:#fff;border-color:#0078d4;"><i class="fas fa-download"></i> Exporter</button>
                                        <label class="backup-btn" style="background:#27ae60;color:#fff;border-color:#27ae60;cursor:pointer;margin:0;"><i class="fas fa-upload"></i> Importer
                                            <input type="file" id="localfolder-import" accept=".json" style="display:none;" onchange="localFolderImport(this)">
                                        </label>
                                    </div>
                                    <span id="localfolder-status" style="font-size:.72rem;color:#888;display:block;margin-top:4px;"></span>
                                    <div style="background:#fffbea;border:1px solid #f0d060;border-radius:8px;padding:10px 12px;margin-top:10px;">
                                        <small style="color:#8a6d00;line-height:1.5;display:block;"><i class="fas fa-lightbulb" style="color:#f0a030;"></i> <b>Astuce — Synchronisation automatique :</b><br>
                                        Lancez un mini-serveur local pour activer l'écriture directe dans votre dossier :<br>
                                        <code style="background:#fff;padding:3px 8px;border-radius:4px;display:inline-block;margin:4px 0;user-select:all;cursor:pointer;" onclick="navigator.clipboard.writeText(this.textContent)" title="Cliquer pour copier">python3 -m http.server 8080</code><br>
                                        puis ouvrez <code style="user-select:all;cursor:pointer;" onclick="navigator.clipboard.writeText('http://localhost:8080/PILOTE_Suite.html')">http://localhost:8080/PILOTE_Suite.html</code></small>
                                    </div>
                                </div>
                            </div>
                            <div id="cloud-cfg-webdav" style="display:none;">
                                <small style="color:#666;display:block;margin-bottom:8px;line-height:1.4;">Connectez un serveur <b>WebDAV</b> (Nextcloud, OwnCloud, Synology, NAS…). Le protocole FTP natif n'est pas supporté par les navigateurs — utilisez un proxy WebDAV.</small>
                                <div class="settings-grid">
                                    <div class="form-group" style="grid-column:1/-1;"><label style="font-size:.72rem;">URL du serveur WebDAV</label><input type="text" id="s-webdav-url" placeholder="https://cloud.monserveur.fr/remote.php/dav/files/user/" style="padding:8px;border:1px solid #ddd;border-radius:8px;width:100%;font-size:.78rem;"></div>
                                    <div class="form-group"><label style="font-size:.72rem;">Identifiant</label><input type="text" id="s-webdav-user" placeholder="utilisateur" style="padding:8px;border:1px solid #ddd;border-radius:8px;width:100%;font-size:.78rem;"></div>
                                    <div class="form-group"><label style="font-size:.72rem;">Mot de passe</label><input type="password" id="s-webdav-pass" placeholder="••••••••" style="padding:8px;border:1px solid #ddd;border-radius:8px;width:100%;font-size:.78rem;"></div>
                                </div>
                            </div>
                            <div style="display:flex;gap:8px;flex-wrap:wrap;margin-top:12px;">
                                <button class="backup-btn" onclick="cloudPush()" style="background:#27ae60;color:#fff;border-color:#27ae60;"><i class="fas fa-cloud-arrow-up"></i> Envoyer</button>
                                <button class="backup-btn" onclick="cloudPull()" style="background:#3498db;color:#fff;border-color:#3498db;"><i class="fas fa-cloud-arrow-down"></i> Récupérer</button>
                            </div>
                            <div id="cloud-status" style="margin-top:8px;font-size:.72rem;color:#888;"></div>
                            <label style="display:flex;align-items:center;gap:6px;margin-top:10px;cursor:pointer;font-size:.75rem;color:#555;">
                                <input type="checkbox" id="s-cloud-auto" style="accent-color:#27ae60;"> Sync automatique à chaque sauvegarde
                            </label>
                        </div>
                    </div>
                    <div class="settings-backup">
                        <button class="backup-btn" onclick="exportSettings()"><i class="fas fa-download"></i> Exporter les paramètres</button>
                        <label class="backup-btn import-btn"><i class="fas fa-upload"></i> Importer des paramètres<input type="file" accept=".json" onchange="importSettings(this)"></label>
                    </div>
                    <div class="order-hint" style="margin-top:8px"><i class="fas fa-info-circle"></i> Exportez vos paramètres pour les conserver entre les versions. Le fichier JSON contient identité, images, ordre et visibilité des modules.</div>
                </div></div>
            </div>
            <div class="acc-section">
                    <div class="acc-header" onclick="toggleAcc(this)"><h3><i class="fas fa-newspaper" style="color:#e67e22"></i> Bulletin d'information</h3><i class="fas fa-chevron-right acc-chevron"></i></div>
                    <div class="acc-body">
                    <small style="color:#888;display:block;margin-bottom:12px">Paramètres du module Bulletin d'information.</small>
                    <div class="settings-grid">
                        <div class="form-group">
                            <label>Mise en page du PDF</label>
                            <select id="bib-layout" style="padding:8px 12px;border:1px solid #ddd;border-radius:8px;font-size:.85rem;width:100%;">
                                <option value="classic">Classique</option>
                                <option value="modern">Centré</option>
                                <option value="banner">Bandeau</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Police d'écriture</label>
                            <select id="bib-font" style="padding:8px 12px;border:1px solid #ddd;border-radius:8px;font-size:.85rem;width:100%;">
                                <option value="inter">Inter (Moderne, Sans Serif)</option>
                                <option value="serif">Merriweather (Classique, Serif)</option>
                                <option value="mono">Roboto Mono (Monospace)</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Signataire par défaut</label>
                            <select id="bib-signatory" style="padding:8px 12px;border:1px solid #ddd;border-radius:8px;font-size:.85rem;width:100%;">
                                <option value="L'équipe de direction">L'équipe de direction</option>
                                <option value="Le Chef d'établissement">Le Chef d'établissement</option>
                                <option value="Le Directeur adjoint">Le Directeur adjoint</option>
                                <option value="Le Proviseur">Le Proviseur</option>
                                <option value="Le Principal">Le Principal</option>
                                <option value="Tous">Tous</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Titre du document</label>
                            <input type="text" id="bib-doc-title" value="Bulletin d'information" style="padding:8px 12px;border:1px solid #ddd;border-radius:8px;font-size:.85rem;width:100%;">
                        </div>
                    </div>
                    <div style="margin-top:10px">
                        <div class="form-group">
                            <label>Note de pied de page (PDF)</label>
                            <input type="text" id="bib-doc-footer" placeholder="Ex: Document Interne - Ne pas diffuser" style="padding:8px 12px;border:1px solid #ddd;border-radius:8px;font-size:.85rem;width:100%;">
                        </div>
                    </div>
                </div></div>
            <div class="settings-footer">
                <button class="btn-settings btn-cancel" onclick="closeSettings()">Annuler</button>
                <button class="btn-settings btn-save" onclick="saveSettings()"><i class="fas fa-check"></i> Enregistrer</button>
            </div>
        </div>
    </div>

    <!-- ═══ CONTENT ═══ -->
    <div class="content-area" id="contentArea">
        <div class="welcome" id="welcome">
            <div class="welcome-header">
                <div class="welcome-logo" id="welcomeLogo"><span id="welcomeLetter">P</span><img id="welcomeLogoImg" style="display:none"></div>
                <h1 class="welcome-title">Bienvenue sur CADIR</h1>
                <p class="welcome-subtitle" id="welcomeSubtitle">Suite d'outils pour la direction d'établissement</p>
            </div>
            <div class="module-grid" id="moduleGrid">
                <div class="module-card" data-m="perdir" onclick="loadModule('perdir')"><div class="module-icon"><i class="fas fa-building-columns"></i></div><h3>CADIR</h3><p>Direction & pilotage</p></div>
                <div class="module-card" data-m="exam" onclick="loadModule('exam')"><div class="module-icon"><i class="fas fa-file-pen"></i></div><h3>EXAM</h3><p>Organisation des épreuves</p></div>
                <div class="module-card" data-m="oral" onclick="loadModule('oral')"><div class="module-icon"><i class="fas fa-comments"></i></div><h3>ORAL</h3><p>Gestion des oraux & écrits</p></div>
                <div class="module-card" data-m="aed" onclick="loadModule('aed')"><div class="module-icon"><i class="fas fa-user-shield"></i></div><h3>AED</h3><p>Assistants d'éducation</p></div>
                <div class="module-card" data-m="bibase" onclick="loadModule('bibase')"><div class="module-icon"><i class="fas fa-newspaper"></i></div><h3>BULLETIN</h3><p>Bulletin d'information</p></div>
                <div class="module-card" data-m="data" onclick="openDataPanel()"><div class="module-icon"><i class="fas fa-database"></i></div><h3>DONNÉES</h3><p>Import élèves & enseignants</p></div>
            </div>
        </div>

        <!-- DATA PANEL -->
        <div class="data-panel" id="dataPanel">
            <div class="data-header">
                <h1><i class="fas fa-database"></i> Données</h1>
                <p>Importez vos listes d'enseignants et d'élèves. Les données seront partagées avec tous les modules.</p>
            </div>
            <div class="data-body">
                <div class="data-card">
                    <div class="data-card-header teachers">
                        <i class="fas fa-chalkboard-teacher"></i>
                        <h3>Enseignants</h3>
                        <span class="data-badge" id="badge-teachers">Non chargé</span>
                    </div>
                    <div class="data-card-body">
                        <div class="data-actions" style="margin-bottom:12px">
                            <button class="data-btn data-btn-tpl" onclick="downloadTemplate('teachers')"><i class="fas fa-file-download"></i> Télécharger le modèle vierge</button>
                        </div>
                        <div class="excel-drop" id="drop-teachers">
                            <input type="file" accept=".xlsx,.xls,.csv" multiple onchange="handleExcelImport(this,'teachers')">
                            <i class="fas fa-file-excel drop-icon"></i>
                            <div class="drop-label" id="lbl-teachers">Cliquez ou glissez un fichier Excel</div>
                            <div class="drop-hint">.xlsx, .xls ou .csv — plusieurs fichiers possibles</div>
                        </div>
                        <div class="data-actions" id="actions-teachers" style="display:none">
                            <button class="data-btn data-btn-view" onclick="togglePreview('teachers')"><i class="fas fa-table"></i> Voir / Masquer</button>
                            <button class="data-btn data-btn-clear" onclick="clearExcelData('teachers')"><i class="fas fa-trash"></i> Supprimer</button>
                        </div>
                        <div class="data-count" id="count-teachers"></div>
                        <div class="data-preview" id="preview-teachers" style="display:none"></div>
                    </div>
                </div>
                <div class="data-card">
                    <div class="data-card-header students">
                        <i class="fas fa-user-graduate"></i>
                        <h3>Élèves</h3>
                        <span class="data-badge" id="badge-students">Non chargé</span>
                    </div>
                    <div class="data-card-body">
                        <div class="data-actions" style="margin-bottom:12px">
                            <button class="data-btn data-btn-tpl" onclick="downloadTemplate('students')"><i class="fas fa-file-download"></i> Télécharger le modèle vierge</button>
                        </div>
                        <div class="excel-drop" id="drop-students">
                            <input type="file" accept=".xlsx,.xls,.csv" multiple onchange="handleExcelImport(this,'students')">
                            <i class="fas fa-file-excel drop-icon"></i>
                            <div class="drop-label" id="lbl-students">Cliquez ou glissez un fichier Excel</div>
                            <div class="drop-hint">.xlsx, .xls ou .csv — plusieurs fichiers possibles</div>
                        </div>
                        <div class="data-actions" id="actions-students" style="display:none">
                            <button class="data-btn data-btn-view" onclick="togglePreview('students')"><i class="fas fa-table"></i> Voir / Masquer</button>
                            <button class="data-btn data-btn-clear" onclick="clearExcelData('students')"><i class="fas fa-trash"></i> Supprimer</button>
                        </div>
                        <div class="data-count" id="count-students"></div>
                        <div class="data-preview" id="preview-students" style="display:none"></div>
                    </div>
                </div>
            </div>
        </div>

        <div class="loader-overlay" id="loader"><div class="loader-spinner"></div><div class="loader-text">Chargement du module…</div></div>
        <iframe class="module-frame" id="frame-perdir" sandbox="allow-scripts allow-same-origin allow-popups allow-modals"></iframe>
        <iframe class="module-frame" id="frame-exam" sandbox="allow-scripts allow-same-origin allow-popups allow-modals"></iframe>
        <iframe class="module-frame" id="frame-oral" sandbox="allow-scripts allow-same-origin allow-popups allow-modals"></iframe>
        <iframe class="module-frame" id="frame-aed" sandbox="allow-scripts allow-same-origin allow-popups allow-modals"></iframe>
        <iframe class="module-frame" id="frame-bibase" sandbox="allow-scripts allow-same-origin allow-popups allow-modals allow-downloads allow-forms"></iframe>
    </div>

    <div class="bottom-bar">
        <div><span class="status-dot"></span>Tous les modules opérationnels</div>
        <div id="lf-sync-indicator" style="display:none;font-size:.7rem;color:#888;cursor:pointer;" onclick="lfForceSave()" title="Cliquer pour forcer la sauvegarde"><i class="fas fa-circle" style="color:#27ae60;font-size:.5rem;vertical-align:middle;margin-right:4px;"></i><span id="lf-sync-text">Synchronisé</span></div>
        <div id="bottomBarInfo">CADIR Suite — Direction</div>
    </div>

    <script>
    const MODULE_DATA = {
  "perdir": "PCFET0NUWVBFIGh0bWw+CjxodG1sIGxhbmc9ImZyIj4KPGhlYWQ+CiAgICA8bWV0YSBjaGFyc2V0PSJVVEYtOCI+CiAgICA8bWV0YSBuYW1lPSJ2aWV3cG9ydCIgY29udGVudD0id2lkdGg9ZGV2aWNlLXdpZHRoLCBpbml0aWFsLXNjYWxlPTEuMCI+CiAgICA8dGl0bGU+Q0FESVI8L3RpdGxlPgogICAgPGxpbmsgaHJlZj0iaHR0cHM6Ly9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvZm9udC1hd2Vzb21lLzYuNC4wL2Nzcy9hbGwubWluLmNzcyIgcmVsPSJzdHlsZXNoZWV0Ij4KICAgIDxzY3JpcHQgc3JjPSJodHRwczovL2Nkbi5qc2RlbGl2ci5uZXQvbnBtL2NoYXJ0LmpzIj48L3NjcmlwdD4KICAgIDxzdHlsZT4KICAgICAgICA6cm9vdCB7CiAgICAgICAgICAgIC0tcHJpbWFyeTogIzJjM2U1MDsKICAgICAgICAgICAgLS1zZWNvbmRhcnk6ICMzNDQ5NWU7CiAgICAgICAgICAgIC0tYWNjZW50OiAjYzAzOTJiOwogICAgICAgICAgICAtLWhlYWRlcjogIzJjM2U1MDsKICAgICAgICAgICAgLS1tZW51LXRleHQ6ICMxYWJjOWM7CiAgICAgICAgICAgIC0taGlnaGxpZ2h0OiAjZTc0YzNjOwogICAgICAgICAgICAtLXdhcm5pbmc6ICNmMzljMTI7CiAgICAgICAgICAgIC0tc3VjY2VzczogIzI3YWU2MDsKICAgICAgICAgICAgLS1pbmZvOiAjMjk4MGI5OwogICAgICAgICAgICAtLWxpZ2h0OiAjZWNmMGYxOwogICAgICAgICAgICAtLWZvbnQtbWFpbjogJ1NlZ29lIFVJJywgVGFob21hLCBHZW5ldmEsIFZlcmRhbmEsIHNhbnMtc2VyaWY7CiAgICAgICAgfQoKICAgICAgICAqIHsgYm94LXNpemluZzogYm9yZGVyLWJveDsgbWFyZ2luOiAwOyBwYWRkaW5nOiAwOyB9CiAgICAgICAgYm9keSB7IGZvbnQtZmFtaWx5OiB2YXIoLS1mb250LW1haW4pOyBiYWNrZ3JvdW5kLWNvbG9yOiAjZWVmMmY1OyBjb2xvcjogIzMzMzsgZGlzcGxheTogZmxleDsgaGVpZ2h0OiAxMDB2aDsgb3ZlcmZsb3c6IGhpZGRlbjsgfQoKICAgICAgICAvKiBTSURFQkFSICovCiAgICAgICAgLnNpZGViYXIgeyB3aWR0aDogMjgwcHg7IGJhY2tncm91bmQtY29sb3I6IHZhcigtLXByaW1hcnkpOyBjb2xvcjogd2hpdGU7IGRpc3BsYXk6IGZsZXg7IGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47IGZsZXgtc2hyaW5rOiAwOyB9CiAgICAgICAgLmJyYW5kIHsgcGFkZGluZzogMjVweCAyMHB4OyBmb250LXNpemU6IDEuMnJlbTsgZm9udC13ZWlnaHQ6IGJvbGQ7IHRleHQtYWxpZ246IGNlbnRlcjsgYmFja2dyb3VuZDogIzFhMjUyZjsgYm9yZGVyLWJvdHRvbTogMnB4IHNvbGlkIHZhcigtLW1lbnUtdGV4dCk7IH0KICAgICAgICAuYnJhbmQgc3BhbiB7IGNvbG9yOiB2YXIoLS1tZW51LXRleHQpOyBkaXNwbGF5OiBibG9jazsgZm9udC1zaXplOiAwLjhyZW07IG1hcmdpbi10b3A6IDVweDsgZm9udC13ZWlnaHQ6IG5vcm1hbDsgfQogICAgICAgIC5tZW51IHsgZmxleDogMTsgcGFkZGluZy10b3A6IDEwcHg7IG92ZXJmbG93LXk6IGF1dG87IH0KICAgICAgICAubWVudS1pdGVtIHsgcGFkZGluZzogMTVweCAyMHB4OyBjdXJzb3I6IHBvaW50ZXI7IHRyYW5zaXRpb246IDAuM3M7IGRpc3BsYXk6IGZsZXg7IGFsaWduLWl0ZW1zOiBjZW50ZXI7IGNvbG9yOiAjYmRjM2M3OyB0ZXh0LWRlY29yYXRpb246IG5vbmU7IGJvcmRlci1sZWZ0OiA0cHggc29saWQgdHJhbnNwYXJlbnQ7IGZvbnQtc2l6ZTogMC45cmVtOyB9CiAgICAgICAgLm1lbnUtaXRlbTpob3ZlciwgLm1lbnUtaXRlbS5hY3RpdmUgeyBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1zZWNvbmRhcnkpOyBjb2xvcjogd2hpdGU7IGJvcmRlci1sZWZ0LWNvbG9yOiB2YXIoLS1tZW51LXRleHQpOyB9CiAgICAgICAgLm1lbnUtaXRlbSBpIHsgd2lkdGg6IDMwcHg7IGZvbnQtc2l6ZTogMS4xcmVtOyBtYXJnaW4tcmlnaHQ6IDEwcHg7IH0KICAgICAgICAubWVudS1udW0geyBkaXNwbGF5Om5vbmU7IH0KICAgICAgICAubWVudS1zZXBhcmF0b3J7aGVpZ2h0OjFweDtiYWNrZ3JvdW5kOnJnYmEoMjU1LDI1NSwyNTUsLjE1KTttYXJnaW46OHB4IDEycHh9CiAgICAgICAgLmZvb3Rlci1pbmZvIHsgcGFkZGluZzogMTVweDsgZm9udC1zaXplOiAwLjdyZW07IHRleHQtYWxpZ246IGNlbnRlcjsgYm9yZGVyLXRvcDogMXB4IHNvbGlkICMzNDQ5NWU7IGNvbG9yOiAjN2Y4YzhkOyB9CgogICAgICAgIC8qIE1BSU4gKi8KICAgICAgICAubWFpbi1jb250ZW50IHsgZmxleDogMTsgb3ZlcmZsb3cteTogYXV0bzsgcGFkZGluZzogMjBweCAzMHB4OyBkaXNwbGF5OiBmbGV4OyBmbGV4LWRpcmVjdGlvbjogY29sdW1uOyBtaW4td2lkdGg6MDsgfQogICAgICAgIC50b3AtYmFyIHsgZGlzcGxheTogZmxleDsganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOyBhbGlnbi1pdGVtczogY2VudGVyOyBtYXJnaW4tYm90dG9tOiAxNnB4OyBiYWNrZ3JvdW5kOiB3aGl0ZTsgcGFkZGluZzogMTJweCAyMHB4OyBib3JkZXItcmFkaXVzOiA4cHg7IGJveC1zaGFkb3c6IDAgMnB4IDEwcHggcmdiYSgwLDAsMCwwLjA1KTsgZmxleC1zaHJpbms6MDsgfQogICAgICAgIC5wYWdlLXRpdGxlIGgyIHsgY29sb3I6IHZhcigtLXNlY29uZGFyeSk7IG1hcmdpbjogMDsgfQogICAgICAgIC5zeXN0ZW0tc3RhdHVzIHsgZGlzcGxheTogZmxleDsgYWxpZ24taXRlbXM6IGNlbnRlcjsgZ2FwOiAyMHB4OyB9CiAgICAgICAgLnNhdmUtaW5kaWNhdG9yIHsgZm9udC1zaXplOiAwLjhyZW07IGNvbG9yOiB2YXIoLS1zdWNjZXNzKTsgZGlzcGxheTogbm9uZTsgYWxpZ24taXRlbXM6IGNlbnRlcjsgZ2FwOiA1cHg7IGZvbnQtd2VpZ2h0OiBib2xkOyB9CgogICAgICAgIC8qIFVJIEVMRU1FTlRTICovCiAgICAgICAgLmJ0biB7IHBhZGRpbmc6IDEwcHggMjBweDsgYm9yZGVyOiBub25lOyBib3JkZXItcmFkaXVzOiA1cHg7IGN1cnNvcjogcG9pbnRlcjsgZm9udC13ZWlnaHQ6IDYwMDsgdHJhbnNpdGlvbjogMC4yczsgZGlzcGxheTogaW5saW5lLWZsZXg7IGFsaWduLWl0ZW1zOiBjZW50ZXI7IGdhcDogOHB4OyBmb250LXNpemU6IDAuOXJlbTsgfQogICAgICAgIC5idG46aG92ZXIgeyBvcGFjaXR5OiAwLjk7IHRyYW5zZm9ybTogdHJhbnNsYXRlWSgtMXB4KTsgfQogICAgICAgIC5idG4tcHJpbWFyeSB7IGJhY2tncm91bmQtY29sb3I6IHZhcigtLXNlY29uZGFyeSk7IGNvbG9yOiB3aGl0ZTsgfQogICAgICAgIC5idG4tYWNjZW50IHsgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tYWNjZW50KTsgY29sb3I6IHdoaXRlOyB9CiAgICAgICAgLmJ0bi1zdWNjZXNzIHsgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tc3VjY2Vzcyk7IGNvbG9yOiB3aGl0ZTsgfQogICAgICAgIC5idG4taW5mbyB7IGJhY2tncm91bmQtY29sb3I6IHZhcigtLWluZm8pOyBjb2xvcjogd2hpdGU7IH0KICAgICAgICAuYnRuLWRhbmdlciB7IGJhY2tncm91bmQtY29sb3I6IHZhcigtLWhpZ2hsaWdodCk7IGNvbG9yOiB3aGl0ZTsgfQogICAgICAgIC5idG4td2FybmluZyB7IGJhY2tncm91bmQtY29sb3I6IHZhcigtLXdhcm5pbmcpOyBjb2xvcjogd2hpdGU7IH0KICAgICAgICAuYnRuLWRhcmsgeyBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1wcmltYXJ5KTsgY29sb3I6IHdoaXRlOyB9CiAgICAgICAgLmJ0bi13b3JkIHsgYmFja2dyb3VuZC1jb2xvcjogIzJiNTc5YTsgY29sb3I6IHdoaXRlOyB9IC8qIENvdWxldXIgV29yZCAqLwogICAgICAgIC5idG4tc20geyBwYWRkaW5nOiA1cHggMTBweDsgZm9udC1zaXplOiAwLjhyZW07IH0KICAgICAgICAuYnRuLWljb24geyBwYWRkaW5nOiA4cHg7IHdpZHRoOiAzNXB4OyBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsgfQoKICAgICAgICAuYnRuLXVwZGF0ZS1tb2RlIHsgYmFja2dyb3VuZC1jb2xvcjogI2YzOWMxMiAhaW1wb3J0YW50OyBjb2xvcjogd2hpdGUgIWltcG9ydGFudDsgYW5pbWF0aW9uOiBwdWxzZSAycyBpbmZpbml0ZTsgfQogICAgICAgIEBrZXlmcmFtZXMgcHVsc2UgeyAwJSB7IGJveC1zaGFkb3c6IDAgMCAwIDAgcmdiYSgyNDMsIDE1NiwgMTgsIDAuNCk7IH0gNzAlIHsgYm94LXNoYWRvdzogMCAwIDAgMTBweCByZ2JhKDI0MywgMTU2LCAxOCwgMCk7IH0gMTAwJSB7IGJveC1zaGFkb3c6IDAgMCAwIDAgcmdiYSgyNDMsIDE1NiwgMTgsIDApOyB9IH0KCiAgICAgICAgLnNlY3Rpb24geyBkaXNwbGF5OiBub25lOyBhbmltYXRpb246IGZhZGVJbiAwLjNzIGVhc2UtaW4tb3V0OyB9CiAgICAgICAgLnNlY3Rpb24uYWN0aXZlIHsgZGlzcGxheTogYmxvY2s7IH0KICAgICAgICAuZm9ybS1jYXJkIHsgYmFja2dyb3VuZDogd2hpdGU7IHBhZGRpbmc6IDMwcHg7IHBhZGRpbmctYm90dG9tOjEwcHg7IGJvcmRlci1yYWRpdXM6IDhweDsgYm94LXNoYWRvdzogMCA0cHggMTVweCByZ2JhKDAsMCwwLDAuMDUpOyB9CiAgICAgICAgLmZvcm0tY2FyZCAuc2F2ZS1iYXJ7cG9zaXRpb246c3RpY2t5O2JvdHRvbTowO2JhY2tncm91bmQ6bGluZWFyLWdyYWRpZW50KHRyYW5zcGFyZW50LCNmZmYgMTUlKTtwYWRkaW5nOjE1cHggMCA1cHg7ei1pbmRleDoxMDt0ZXh0LWFsaWduOnJpZ2h0O21hcmdpbi10b3A6MjBweDt9CiAgICAgICAgLmZvcm0tY2FyZCAuc2F2ZS1iYXIgLmJ0bntib3gtc2hhZG93OjAgMnB4IDhweCByZ2JhKDAsMCwwLDAuMTUpO2ZvbnQtc2l6ZTouOXJlbTtwYWRkaW5nOjEwcHggMjRweDt9CiAgICAgICAgLmZvcm0tZ3JpZCB7IGRpc3BsYXk6IGdyaWQ7IGdyaWQtdGVtcGxhdGUtY29sdW1uczogMWZyIDFmcjsgZ2FwOiAyMHB4OyBtYXJnaW4tYm90dG9tOiAyMHB4OyB9CiAgICAgICAgLmZvcm0tZnVsbCB7IG1hcmdpbi1ib3R0b206IDIwcHg7IH0KICAgICAgICAuZm9ybS1ncm91cCBsYWJlbCB7IGRpc3BsYXk6IGJsb2NrOyBtYXJnaW4tYm90dG9tOiA4cHg7IGZvbnQtd2VpZ2h0OiA2MDA7IGNvbG9yOiB2YXIoLS1zZWNvbmRhcnkpOyBmb250LXNpemU6IDAuOXJlbTsgfQogICAgICAgIC5mb3JtLWNvbnRyb2wgeyB3aWR0aDogMTAwJTsgcGFkZGluZzogMTJweDsgYm9yZGVyOiAycHggc29saWQgI2MwYzVjZTsgYm9yZGVyLXJhZGl1czogNnB4OyBmb250LWZhbWlseTogaW5oZXJpdDsgZm9udC1zaXplOiAwLjk1cmVtOyB0cmFuc2l0aW9uOiAwLjJzOyB9CiAgICAgICAgICAgIC5mb3JtLWNvbnRyb2w6Zm9jdXMgeyBib3JkZXItY29sb3I6IHZhcigtLWFjY2VudCk7IG91dGxpbmU6bm9uZTsgYm94LXNoYWRvdzowIDAgMCAzcHggcmdiYSg1MiwxNTIsMjE5LDAuMTUpOyB9CiAgICAgICAgLm11bHRpLXJvdyB7IGRpc3BsYXk6IGZsZXg7IGdhcDogMTBweDsgbWFyZ2luLWJvdHRvbTogMTBweDsgYWxpZ24taXRlbXM6IGNlbnRlcjsgfQogICAgICAgIC5tdWx0aS1yb3cgaW5wdXQgeyBmbGV4OiAxOyB9CiAgICAgICAgCiAgICAgICAgLyogQVRUQUNITUVOVFMgQVJFQSAqLwogICAgICAgIC5hdHRhY2htZW50cy1hcmVhIHsgYm9yZGVyOiAycHggZGFzaGVkICNiZGMzYzc7IGJhY2tncm91bmQ6ICNmOWY5Zjk7IHBhZGRpbmc6IDE1cHg7IGJvcmRlci1yYWRpdXM6IDZweDsgbWFyZ2luLXRvcDogMTBweDsgfQogICAgICAgIC5hdHRhY2htZW50LWxpc3QgeyBtYXJnaW4tdG9wOiAxMHB4OyBsaXN0LXN0eWxlOiBub25lOyB9CiAgICAgICAgLmF0dGFjaG1lbnQtaXRlbSB7IGRpc3BsYXk6IGZsZXg7IGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjsgYmFja2dyb3VuZDogd2hpdGU7IHBhZGRpbmc6IDhweDsgbWFyZ2luLWJvdHRvbTogNXB4OyBib3JkZXItcmFkaXVzOiA0cHg7IGJvcmRlci1sZWZ0OiAzcHggc29saWQgdmFyKC0taW5mbyk7IGZvbnQtc2l6ZTogMC44NXJlbTsgYWxpZ24taXRlbXM6IGNlbnRlcjsgfQogICAgICAgIC5maWxlLXdhcm5pbmcgeyBmb250LXNpemU6IDAuNzVyZW07IGNvbG9yOiAjZTc0YzNjOyBtYXJnaW4tdG9wOiA1cHg7IGZvbnQtc3R5bGU6IGl0YWxpYzsgfQoKICAgICAgICAvKiBEUkFHICYgRFJPUCAvIEtBTkJBTiAqLwogICAgICAgIC50b2RvLWdyaWQgeyBkaXNwbGF5OiBncmlkOyBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IDFmciAxZnI7IGdhcDogMjVweDsgfQogICAgICAgIC50b2RvLWJveCB7IGJhY2tncm91bmQ6IHdoaXRlOyBib3JkZXItcmFkaXVzOiA4cHg7IHBhZGRpbmc6IDIwcHg7IGJveC1zaGFkb3c6IDAgNHB4IDEwcHggcmdiYSgwLDAsMCwwLjA1KTsgYm9yZGVyLXRvcDogNXB4IHNvbGlkICNjY2M7IGRpc3BsYXk6IGZsZXg7IGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47IG1pbi1oZWlnaHQ6IDM1MHB4OyB9CiAgICAgICAgLnRvZG8tdXJnZW50IHsgYm9yZGVyLXRvcC1jb2xvcjogdmFyKC0taGlnaGxpZ2h0KTsgfSAudG9kby1wbGFuIHsgYm9yZGVyLXRvcC1jb2xvcjogdmFyKC0tcHJpbWFyeSk7IH0gLnRvZG8tcG9zc2libGUgeyBib3JkZXItdG9wLWNvbG9yOiB2YXIoLS1zdWNjZXNzKTsgfSAudG9kby1kZWxlZ2F0ZSB7IGJvcmRlci10b3AtY29sb3I6IHZhcigtLXdhcm5pbmcpOyB9CiAgICAgICAgLnRvZG8taGVhZGVyIHsgZGlzcGxheTogZmxleDsganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOyBhbGlnbi1pdGVtczogY2VudGVyOyBtYXJnaW4tYm90dG9tOiAxNXB4OyBib3JkZXItYm90dG9tOiAxcHggc29saWQgI2VlZTsgcGFkZGluZy1ib3R0b206IDEwcHg7IH0KICAgICAgICAudG9kby1pbnB1dC1ncm91cCB7IGRpc3BsYXk6IGZsZXg7IGdhcDogNXB4OyBtYXJnaW4tYm90dG9tOiAxNXB4OyB9CiAgICAgICAgLnRvZG8taW5wdXQtZ3JvdXAgaW5wdXQgeyBmbGV4OiAxOyBwYWRkaW5nOiA4cHg7IGJvcmRlcjogMXB4IHNvbGlkICNkZGQ7IGJvcmRlci1yYWRpdXM6IDRweDsgfQogICAgICAgIC50b2RvLWxpc3QgeyBsaXN0LXN0eWxlOiBub25lOyBmbGV4OiAxOyBvdmVyZmxvdy15OiBhdXRvOyBtYXgtaGVpZ2h0OiAzNTBweDsgcGFkZGluZzogNXB4OyBtaW4taGVpZ2h0OiAxMDBweDsgdHJhbnNpdGlvbjogMC4yczsgfQogICAgICAgIC50b2RvLWxpc3QuZHJhZy1vdmVyIHsgYmFja2dyb3VuZC1jb2xvcjogI2YwZjBmMDsgYm9yZGVyLXJhZGl1czogNHB4OyBvdXRsaW5lOiAycHggZGFzaGVkICNjY2M7IH0KICAgICAgICAvKiBTdHlsZSBhbcOpbGlvcsOpIHBvdXIgbGUgRHJhZyAmIERyb3AgKi8KICAgICAgICAudG9kby1pdGVtIHsgZGlzcGxheTogZmxleDsganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOyBhbGlnbi1pdGVtczogY2VudGVyOyBwYWRkaW5nOiAxMnB4OyBib3JkZXItYm90dG9tOiAxcHggc29saWQgI2Y0ZjRmNDsgYmFja2dyb3VuZDogd2hpdGU7IG1hcmdpbi1ib3R0b206IDhweDsgYm9yZGVyLXJhZGl1czogNHB4OyBjdXJzb3I6IGdyYWI7IGJvcmRlci1sZWZ0OiAzcHggc29saWQgI2VlZTsgYm94LXNoYWRvdzogMCAxcHggM3B4IHJnYmEoMCwwLDAsMC4wNSk7IH0KICAgICAgICAudG9kby1pdGVtOmFjdGl2ZSB7IGN1cnNvcjogZ3JhYmJpbmc7IH0KICAgICAgICAudG9kby1pdGVtLmRyYWctb3Zlci1pdGVtIHsgYm9yZGVyLXRvcDogMnB4IHNvbGlkIHZhcigtLW1lbnUtdGV4dCk7IG1hcmdpbi10b3A6IDE1cHg7IH0gLyogSW5kaWNhdGV1ciB2aXN1ZWwgZCdpbnNlcnRpb24gKi8KICAgICAgICAudG9kby1pdGVtIHNwYW5bY29udGVudGVkaXRhYmxlXSB7IGZsZXg6MTsgbWFyZ2luLXJpZ2h0OjEwcHg7IHBhZGRpbmc6MnB4OyBib3JkZXI6MXB4IHNvbGlkIHRyYW5zcGFyZW50OyB0cmFuc2l0aW9uOjAuMnM7IH0KICAgICAgICAudG9kby1pdGVtIHNwYW5bY29udGVudGVkaXRhYmxlXTpmb2N1cyB7IGJvcmRlci1ib3R0b20tY29sb3I6IHZhcigtLWFjY2VudCk7IG91dGxpbmU6bm9uZTsgYmFja2dyb3VuZDojZjlmYmZmOyB9CiAgICAgICAgLmZyb20tYWdlbmRhIHsgYmFja2dyb3VuZC1jb2xvcjogI2ZmZjhlMTsgYm9yZGVyLWxlZnQ6IDRweCBzb2xpZCAjZjFjNDBmOyB9CiAgICAgICAgLnRvZG8tYWN0aW9ucyBpIHsgY3Vyc29yOiBwb2ludGVyOyBjb2xvcjogI2JkYzNjNzsgdHJhbnNpdGlvbjogMC4yczsgbWFyZ2luLWxlZnQ6IDhweDsgfQogICAgICAgIC50b2RvLWFjdGlvbnMgaTpob3ZlciB7IGNvbG9yOiB2YXIoLS1hY2NlbnQpOyB9CiAgICAgICAgCiAgICAgICAgLnRvZG8tdG9kYXktem9uZSB7IG1hcmdpbi1ib3R0b206IDIwcHg7IHBhZGRpbmc6IDE1cHg7IGJhY2tncm91bmQ6ICNmZmYzZTA7IGJvcmRlcjogMnB4IHNvbGlkICNmMzljMTI7IGJvcmRlci1yYWRpdXM6IDhweDsgZGlzcGxheTogbm9uZTsgfQogICAgICAgIC50b2RvLXRvZGF5LXpvbmUuYWN0aXZlIHsgZGlzcGxheTogYmxvY2s7IGFuaW1hdGlvbjogZmFkZUluIDAuNXM7IH0KICAgICAgICAudG9kby10b2RheS1pdGVtIHsgYmFja2dyb3VuZDogd2hpdGU7IHBhZGRpbmc6IDEwcHg7IGJvcmRlci1yYWRpdXM6IDRweDsgYm9yZGVyLWxlZnQ6IDRweCBzb2xpZCAjZTc0YzNjOyBtYXJnaW4tYm90dG9tOiA1cHg7IGN1cnNvcjogZ3JhYjsgZGlzcGxheTogZmxleDsganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOyBhbGlnbi1pdGVtczogY2VudGVyOyBib3gtc2hhZG93OiAwIDJweCA0cHggcmdiYSgwLDAsMCwwLjA1KTsgfQoKICAgICAgICAvKiBDQUxFTkRBUiAqLwogICAgICAgIC5jYWxlbmRhci10YWJsZSB7IHdpZHRoOiAxMDAlOyBib3JkZXItY29sbGFwc2U6IGNvbGxhcHNlOyBiYWNrZ3JvdW5kOiB3aGl0ZTsgfQogICAgICAgIC5jYWxlbmRhci10YWJsZSB0aCB7IGJhY2tncm91bmQ6IHZhcigtLXNlY29uZGFyeSk7IGNvbG9yOiB3aGl0ZTsgcGFkZGluZzogMTJweDsgdGV4dC1hbGlnbjogbGVmdDsgfQogICAgICAgIC5jYWxlbmRhci10YWJsZSB0ZCB7IHBhZGRpbmc6IDEycHg7IGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjZWVlOyB9CiAgICAgICAgLnJvdy10b2RheSB7IGJhY2tncm91bmQtY29sb3I6ICNmZmY4ZTE7IGZvbnQtd2VpZ2h0OiBib2xkOyBib3JkZXItbGVmdDogNXB4IHNvbGlkICNlNzRjM2M7IH0gCgogICAgICAgIC8qIEVESVRPUiAqLwogICAgICAgIC5kb2MtZWRpdG9yIHsgYm9yZGVyOiAxcHggc29saWQgI2RkZDsgcGFkZGluZzogNDBweDsgYmFja2dyb3VuZDogd2hpdGU7IG1pbi1oZWlnaHQ6IDQwMHB4OyBib3JkZXItcmFkaXVzOiA0cHg7IGZvbnQtZmFtaWx5OiAnVGltZXMgTmV3IFJvbWFuJywgc2VyaWY7IGxpbmUtaGVpZ2h0OiAxLjY7IGNvbG9yOiMwMDA7IGJveC1zaGFkb3c6IGluc2V0IDAgMCAxMHB4IHJnYmEoMCwwLDAsMC4wNSk7IH0KICAgICAgICAuZG9jLWVkaXRvcjpmb2N1cyB7IG91dGxpbmU6IG5vbmU7IGJvcmRlci1jb2xvcjogdmFyKC0tYWNjZW50KTsgfQogICAgICAgIC5ub3Rlcy1lZGl0b3IgeyBtaW4taGVpZ2h0OiAyNTBweDsgYmFja2dyb3VuZDogI2ZmZmZmMDsgYm9yZGVyLWNvbG9yOiAjZTBlMGQwOyB9CiAgICAgICAgCiAgICAgICAgLyogREFTSEJPQVJEICovCiAgICAgICAgLmRhc2gta3BpLWdyaWQgeyBkaXNwbGF5OiBncmlkOyBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IHJlcGVhdCgzLCAxZnIpOyBnYXA6IDIwcHg7IG1hcmdpbi1ib3R0b206IDMwcHg7IH0KICAgICAgICAua3BpLWNhcmQgeyBiYWNrZ3JvdW5kOiB3aGl0ZTsgcGFkZGluZzogMjBweDsgYm9yZGVyLXJhZGl1czogMTBweDsgYm94LXNoYWRvdzogMCA0cHggNnB4IHJnYmEoMCwwLDAsMC4wNSk7IHRleHQtYWxpZ246IGNlbnRlcjsgYm9yZGVyLWJvdHRvbTogNHB4IHNvbGlkIHZhcigtLXNlY29uZGFyeSk7IGRpc3BsYXk6ZmxleDsgZmxleC1kaXJlY3Rpb246Y29sdW1uOyBqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyOyBhbGlnbi1pdGVtczpjZW50ZXI7IG1pbi1oZWlnaHQ6IDE0MHB4OyB9CiAgICAgICAgLmtwaS1udW0geyBmb250LXNpemU6IDNyZW07IGZvbnQtd2VpZ2h0OiBib2xkOyBjb2xvcjogdmFyKC0tc2Vjb25kYXJ5KTsgZGlzcGxheTogYmxvY2s7IG1hcmdpbjogMTBweCAwOyB9CiAgICAgICAgLmtwaS1sYWJlbCB7IGZvbnQtc2l6ZTogMC45cmVtOyB0ZXh0LXRyYW5zZm9ybTogdXBwZXJjYXNlOyBmb250LXdlaWdodDogYm9sZDsgY29sb3I6ICM3ZjhjOGQ7IH0KICAgICAgICAuY2hhcnRzLWdyaWQgeyBkaXNwbGF5OiBncmlkOyBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IDFmciAxZnI7IGdhcDogMjBweDsgbWFyZ2luLWJvdHRvbTogMzBweDsgfQogICAgICAgIC5jaGFydC1jb250YWluZXIgeyBiYWNrZ3JvdW5kOiB3aGl0ZTsgcGFkZGluZzogMjBweDsgYm9yZGVyLXJhZGl1czogMTBweDsgYm94LXNoYWRvdzogMCA0cHggNnB4IHJnYmEoMCwwLDAsMC4wNSk7IGhlaWdodDogMzUwcHg7IH0KICAgICAgICAudG9wLXN0dWRlbnRzLWxpc3QgeyBsaXN0LXN0eWxlOiBub25lOyBwYWRkaW5nOiAwOyB9CiAgICAgICAgLnRvcC1zdHVkZW50LWl0ZW0geyBkaXNwbGF5OiBmbGV4OyBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47IHBhZGRpbmc6IDhweCAwOyBib3JkZXItYm90dG9tOiAxcHggc29saWQgI2VlZTsgfQoKICAgICAgICAvKiBUQUJMRVMgKi8KICAgICAgICAuZGF0YS10YWJsZSB7IHdpZHRoOiAxMDAlOyBib3JkZXItY29sbGFwc2U6IGNvbGxhcHNlOyBiYWNrZ3JvdW5kOiB3aGl0ZTsgfQogICAgICAgIC5kYXRhLXRhYmxlIHRoIHsgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tc2Vjb25kYXJ5KTsgY29sb3I6IHdoaXRlOyBwYWRkaW5nOiAxNXB4OyB0ZXh0LWFsaWduOiBsZWZ0OyB9CiAgICAgICAgLmRhdGEtdGFibGUgdGQgeyBwYWRkaW5nOiAxNXB4OyBib3JkZXItYm90dG9tOiAxcHggc29saWQgI2VlZTsgfQogICAgICAgIC5iYWRnZSB7IHBhZGRpbmc6IDRweCA4cHg7IGJvcmRlci1yYWRpdXM6IDEycHg7IGZvbnQtc2l6ZTogMC43NXJlbTsgZm9udC13ZWlnaHQ6IGJvbGQ7IGNvbG9yOiB3aGl0ZTsgfQogICAgICAgIC5iZy1lbnQgeyBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1hY2NlbnQpOyB9IC5iZy1yZXUgeyBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1zdWNjZXNzKTsgfSAuYmctc3VpdmkgeyBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1pbmZvKTsgfSAuYmctZGlyIHsgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tcHJpbWFyeSk7IH0KCiAgICAgICAgLyogRklMVEVSUyAqLwogICAgICAgIC5maWx0ZXJzLWJhciB7IGRpc3BsYXk6IGZsZXg7IGdhcDogMTVweDsgYmFja2dyb3VuZDogd2hpdGU7IHBhZGRpbmc6IDE1cHg7IGJvcmRlci1yYWRpdXM6IDhweDsgbWFyZ2luLWJvdHRvbTogMjBweDsgYWxpZ24taXRlbXM6IGZsZXgtZW5kOyB9CgogICAgICAgIAogICAgICAgIC8qIOKVkOKVkOKVkCBQcm9jw6lkdXJlcyDilZDilZDilZAgKi8KICAgICAgICAucHJvYy1oZWFkZXJ7ZGlzcGxheTpmbGV4O2p1c3RpZnktY29udGVudDpzcGFjZS1iZXR3ZWVuO2FsaWduLWl0ZW1zOmNlbnRlcjttYXJnaW4tYm90dG9tOjE2cHh9CiAgICAgICAgLnByb2MtaGVhZGVyIGJ1dHRvbntiYWNrZ3JvdW5kOnZhcigtLWhlYWRlciwjMmMzZTUwKTtjb2xvcjojZmZmO2JvcmRlcjpub25lO3BhZGRpbmc6MTBweCAyMHB4O2JvcmRlci1yYWRpdXM6OHB4O2N1cnNvcjpwb2ludGVyO2ZvbnQtc2l6ZTouODVyZW07Zm9udC13ZWlnaHQ6NjAwO2JveC1zaGFkb3c6MCAycHggOHB4IHJnYmEoNDQsNjIsODAsLjMpfQogICAgICAgIC5wcm9jLWhlYWRlciBidXR0b246aG92ZXJ7b3BhY2l0eTouOTt0cmFuc2Zvcm06dHJhbnNsYXRlWSgtMXB4KX0KICAgICAgICAucHJvYy1saXN0e2Rpc3BsYXk6ZmxleDtmbGV4LWRpcmVjdGlvbjpjb2x1bW47Z2FwOjhweH0KICAgICAgICAucHJvYy1jYXJke2JhY2tncm91bmQ6I2ZmZjtib3JkZXItcmFkaXVzOjEwcHg7cGFkZGluZzoxMHB4IDE0cHg7ZGlzcGxheTpmbGV4O2FsaWduLWl0ZW1zOmNlbnRlcjtnYXA6MTBweDtjdXJzb3I6cG9pbnRlcjtib3gtc2hhZG93OjAgMXB4IDRweCByZ2JhKDAsMCwwLC4wNik7dHJhbnNpdGlvbjpib3gtc2hhZG93IC4xNXN9CiAgICAgICAgLnByb2MtY2FyZDpob3Zlcntib3gtc2hhZG93OjAgM3B4IDEycHggcmdiYSgwLDAsMCwuMTIpfQogICAgICAgIC5wcm9jLWNvZGV7ZGlzcGxheTppbmxpbmUtYmxvY2s7cGFkZGluZzo0cHggMTBweDtib3JkZXItcmFkaXVzOjZweDtmb250LXdlaWdodDo3MDA7Zm9udC1zaXplOi44cmVtO2NvbG9yOiNmZmY7bWluLXdpZHRoOjQ0cHg7dGV4dC1hbGlnbjpjZW50ZXJ9CiAgICAgICAgLnByb2MtY2FyZC1ib2R5e2ZsZXg6MTttaW4td2lkdGg6MH0KICAgICAgICAucHJvYy1jYXJkLXRpdGxle2ZvbnQtd2VpZ2h0OjYwMDtmb250LXNpemU6Ljg4cmVtO2NvbG9yOiMzMzN9CiAgICAgICAgLnByb2MtY2FyZC1tZXRhe2ZvbnQtc2l6ZTouNzJyZW07Y29sb3I6Izk5OTttYXJnaW4tdG9wOjJweH0KICAgICAgICAucHJvYy1jYXJkLWNhdHtkaXNwbGF5OmlubGluZS1ibG9jaztiYWNrZ3JvdW5kOiNmMGYwZjA7cGFkZGluZzoycHggOHB4O2JvcmRlci1yYWRpdXM6MTBweDtmb250LXNpemU6LjY4cmVtO2NvbG9yOiM2NjY7bWFyZ2luLWxlZnQ6NnB4fQogICAgICAgIC5wcm9jLWNhcmQtYWN0aW9uc3tkaXNwbGF5OmZsZXg7Z2FwOjZweH0KICAgICAgICAucHJvYy1jYXJkLWFjdGlvbnMgYnV0dG9ue2JhY2tncm91bmQ6bm9uZTtib3JkZXI6bm9uZTtjdXJzb3I6cG9pbnRlcjtwYWRkaW5nOjRweCA4cHg7Ym9yZGVyLXJhZGl1czo2cHg7Y29sb3I6Izg4ODtmb250LXNpemU6LjhyZW19CiAgICAgICAgLnByb2MtY2FyZC1hY3Rpb25zIGJ1dHRvbjpob3ZlcntiYWNrZ3JvdW5kOiNmMGYwZjA7Y29sb3I6IzMzM30KICAgICAgICAucHJvYy1maWx0ZXJze2Rpc3BsYXk6ZmxleDtmbGV4LXdyYXA6d3JhcDtnYXA6NnB4O21hcmdpbi1ib3R0b206MTRweH0KICAgICAgICAucHJvYy1maWx0ZXJzIGJ1dHRvbntib3JkZXI6MXB4IHNvbGlkICNkZGQ7YmFja2dyb3VuZDojZmZmO3BhZGRpbmc6NHB4IDEycHg7Ym9yZGVyLXJhZGl1czoxNnB4O2ZvbnQtc2l6ZTouNzJyZW07Y3Vyc29yOnBvaW50ZXI7Y29sb3I6IzY2Nn0KICAgICAgICAucHJvYy1maWx0ZXJzIGJ1dHRvbi5hY3RpdmV7YmFja2dyb3VuZDp2YXIoLS1oZWFkZXIsIzJjM2U1MCk7Y29sb3I6I2ZmZjtib3JkZXItY29sb3I6dHJhbnNwYXJlbnR9CiAgICAgICAgLnByb2Mtdmlld3tiYWNrZ3JvdW5kOiNmZmY7Ym9yZGVyLXJhZGl1czoxMnB4O292ZXJmbG93OmhpZGRlbjtib3gtc2hhZG93OjAgMnB4IDEwcHggcmdiYSgwLDAsMCwuMDgpO3dpZHRoOjEwMCU7Ym94LXNpemluZzpib3JkZXItYm94fQogICAgICAgIC5wcm9jLXZpZXctaGVhZGVye3BhZGRpbmc6MThweCAyMnB4O2NvbG9yOiNmZmZ9CiAgICAgICAgLnByb2Mtdmlldy1oZWFkZXIgaDJ7bWFyZ2luOjA7Zm9udC1zaXplOjEuMXJlbX0KICAgICAgICAucHJvYy12aWV3LWhlYWRlciAucHYtY29kZXtmb250LXNpemU6Ljg1cmVtO29wYWNpdHk6Ljg1O21hcmdpbi10b3A6MnB4fQogICAgICAgIC5wcm9jLXZpZXctYm9keXtwYWRkaW5nOjE2cHggMTJweH0KICAgICAgICAucHJvYy16b25le2JvcmRlci1sZWZ0OjNweCBzb2xpZCAjZGRkO3BhZGRpbmc6MTBweCAxNHB4O21hcmdpbjoxMHB4IDA7YmFja2dyb3VuZDojZmFmYWZhO2JvcmRlci1yYWRpdXM6MCA4cHggOHB4IDA7d2lkdGg6MTAwJTtib3gtc2l6aW5nOmJvcmRlci1ib3h9CiAgICAgICAgLnByb2Mtem9uZSBoNHtmb250LXNpemU6Ljc4cmVtO2ZvbnQtd2VpZ2h0OjYwMDtjb2xvcjojOTk5O21hcmdpbjowIDAgNnB4O3RleHQtdHJhbnNmb3JtOnVwcGVyY2FzZTtsZXR0ZXItc3BhY2luZzouNXB4fQogICAgICAgIC5wcm9jLXpvbmUtY29udGVudHtmb250LXNpemU6Ljg1cmVtO2xpbmUtaGVpZ2h0OjEuNTtjb2xvcjojNDQ0fQogICAgICAgIC5wcm9jLXpvbmUtY29udGVudCBwe21hcmdpbjo0cHggMH0KICAgICAgICAucHJvYy1pY29uLW1haWwsLnByb2MtaWNvbi1hbGVydCwucHJvYy1pY29uLWlkZWF7ZGlzcGxheTppbmxpbmUtYmxvY2s7d2lkdGg6MjBweDtoZWlnaHQ6MjBweDt0ZXh0LWFsaWduOmNlbnRlcjtsaW5lLWhlaWdodDoyMHB4O2JvcmRlci1yYWRpdXM6NTAlO2ZvbnQtc2l6ZTouNjVyZW07bWFyZ2luOjAgMnB4O3ZlcnRpY2FsLWFsaWduOm1pZGRsZX0KICAgICAgICAucHJvYy1pY29uLW1haWx7YmFja2dyb3VuZDojMzQ5OGRiO2NvbG9yOiNmZmZ9CiAgICAgICAgLnByb2MtaWNvbi1hbGVydHtiYWNrZ3JvdW5kOiNlNzRjM2M7Y29sb3I6I2ZmZn0KICAgICAgICAucHJvYy1pY29uLWlkZWF7YmFja2dyb3VuZDojZjM5YzEyO2NvbG9yOiNmZmZ9CgogICAgICAgIC8qIFBSSU5UIENPTkZJRyAqLwogICAgICAgIEBtZWRpYSBwcmludCB7CiAgICAgICAgICAgIC5zaWRlYmFyLCAubm8tcHJpbnQsIC50b3AtYmFyLCAuc2VjdGlvbiB7IGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDsgfQogICAgICAgICAgICBib2R5IHsgYmFja2dyb3VuZDogd2hpdGU7IGhlaWdodDogYXV0bzsgb3ZlcmZsb3c6IHZpc2libGU7IG1hcmdpbjogMDsgcGFkZGluZzogMDsgZm9udC1mYW1pbHk6ICdUaW1lcyBOZXcgUm9tYW4nLCBzZXJpZjsgY29sb3I6ICMwMDA7IC13ZWJraXQtcHJpbnQtY29sb3ItYWRqdXN0OiBleGFjdDsgfQogICAgICAgICAgICAubWFpbi1jb250ZW50IHsgcGFkZGluZzogMDsgbWFyZ2luOiAwOyB3aWR0aDogMTAwJTsgZGlzcGxheTogYmxvY2s7IH0KICAgICAgICAgICAgLnByaW50LWFyZWEgeyBkaXNwbGF5OiBibG9jayAhaW1wb3J0YW50OyB3aWR0aDogMTAwJTsgcG9zaXRpb246IHN0YXRpYzsgb3ZlcmZsb3c6IHZpc2libGUgIWltcG9ydGFudDsgfQogICAgICAgICAgICBAcGFnZSB7IHNpemU6IEE0OyBtYXJnaW46IDVtbSA1bW0gMTJtbSA1bW07IH0KICAgICAgICAgICAgLnByaW50LXBhZ2UgeyB3aWR0aDogMTAwJTsgbWFyZ2luOiAwOyBwYWRkaW5nOiAwOyBwYWdlLWJyZWFrLWFmdGVyOiBhbHdheXM7IG92ZXJmbG93OiBoaWRkZW47IH0KICAgICAgICAgICAgLnByaW50LXBhZ2U6bGFzdC1jaGlsZCB7IHBhZ2UtYnJlYWstYWZ0ZXI6IGF2b2lkOyB9CiAgICAgICAgICAgIC5vZmZpY2lhbC1oZWFkZXIgeyBkaXNwbGF5OiBmbGV4ICFpbXBvcnRhbnQ7IGZsZXgtZGlyZWN0aW9uOiByb3cgIWltcG9ydGFudDsganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuICFpbXBvcnRhbnQ7IGFsaWduLWl0ZW1zOiBmbGV4LXN0YXJ0OyBtYXJnaW4tYm90dG9tOiAyMHB4OyBib3JkZXItYm90dG9tOiAxLjVweCBzb2xpZCAjMDAwOyBwYWRkaW5nLWJvdHRvbTogMTVweDsgfQogICAgICAgICAgICAub2ZmaWNpYWwtcmlnaHQgeyB0ZXh0LWFsaWduOiByaWdodCAhaW1wb3J0YW50OyBmbGV4LXNocmluazogMDsgfQogICAgICAgICAgICAuc2Nob29sLW5hbWUgeyBmb250LXdlaWdodDogYm9sZDsgdGV4dC10cmFuc2Zvcm06IHVwcGVyY2FzZTsgZm9udC1zaXplOiAxLjJyZW07IH0KICAgICAgICAgICAgLm9mZmljaWFsLWxvZ28geyBtYXgtaGVpZ2h0OiA5MHB4OyBtYXgtd2lkdGg6IDE4MHB4OyBvYmplY3QtZml0OiBjb250YWluOyBkaXNwbGF5OiBibG9jayAhaW1wb3J0YW50OyAtd2Via2l0LXByaW50LWNvbG9yLWFkanVzdDogZXhhY3QgIWltcG9ydGFudDsgcHJpbnQtY29sb3ItYWRqdXN0OiBleGFjdCAhaW1wb3J0YW50OyB9CiAgICAgICAgICAgIC5vZmZpY2lhbC1wYXJ0aWNpcGFudHMgeyBiYWNrZ3JvdW5kOiAjZjRmNGY0ICFpbXBvcnRhbnQ7IHBhZGRpbmc6IDEycHg7IGJvcmRlcjogMXB4IHNvbGlkICNjY2M7IG1hcmdpbi1ib3R0b206IDIwcHg7IGZvbnQtc2l6ZTogMXJlbTsgfQogICAgICAgICAgICAub2ZmaWNpYWwtY29udGVudCB7IHRleHQtYWxpZ246IGp1c3RpZnk7IGxpbmUtaGVpZ2h0OiAxLjY7IGZvbnQtc2l6ZTogMS4xcmVtOyB9CiAgICAgICAgICAgIC5vZmZpY2lhbC1jb250ZW50IGltZywgLnByaW50LXBhZ2UgaW1nIHsgZGlzcGxheTogaW5saW5lLWJsb2NrICFpbXBvcnRhbnQ7IHZpc2liaWxpdHk6IHZpc2libGUgIWltcG9ydGFudDsgbWF4LWhlaWdodDogODBweDsgbWF4LXdpZHRoOiAxNjBweDsgLXdlYmtpdC1wcmludC1jb2xvci1hZGp1c3Q6IGV4YWN0ICFpbXBvcnRhbnQ7IHByaW50LWNvbG9yLWFkanVzdDogZXhhY3QgIWltcG9ydGFudDsgfQogICAgICAgICAgICAub2ZmaWNpYWwtZm9vdGVyIHsgbWFyZ2luLXRvcDogNDBweDsgdGV4dC1hbGlnbjogcmlnaHQ7IGZvbnQtc2l6ZTogMS4xcmVtOyB9CiAgICAgICAgICAgIC5zaWduYXR1cmUtaW1nIHsgbWF4LWhlaWdodDogNzBweDsgZGlzcGxheTogYmxvY2s7IG1hcmdpbi1sZWZ0OiBhdXRvOyB9CiAgICAgICAgICAgIC5hdHRhY2htZW50LXByaW50LWxpc3QgeyBtYXJnaW4tdG9wOiAyMHB4OyBib3JkZXItdG9wOiAxcHggZG90dGVkICNjY2M7IHBhZGRpbmctdG9wOiAxMHB4OyBmb250LXNpemU6IDAuOXJlbTsgfQogICAgICAgIH0KICAgICAgICAucHJpbnQtYXJlYSB7IGRpc3BsYXk6IG5vbmU7IH0KICAgICAgICBAa2V5ZnJhbWVzIGZhZGVJbiB7IGZyb20geyBvcGFjaXR5OiAwOyB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoMTBweCk7IH0gdG8geyBvcGFjaXR5OiAxOyB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoMCk7IH0gfQogICAgCiAgICAgICAgCiAgICAgICAgLyog4pWQ4pWQ4pWQIFVOSUZJRUQgQ0FMRU5EQVIgVjEyLjEzIOKVkOKVkOKVkCAqLwogICAgICAgIC51Y2FsLWhlYWRlcntkaXNwbGF5OmZsZXg7YWxpZ24taXRlbXM6Y2VudGVyO2dhcDo4cHg7bWFyZ2luLWJvdHRvbToxNnB4O2ZsZXgtd3JhcDp3cmFwO30KICAgICAgICAudWNhbC1uYXYtYnRue2JhY2tncm91bmQ6bm9uZTtib3JkZXI6MXB4IHNvbGlkICNkZGQ7Ym9yZGVyLXJhZGl1czo4cHg7cGFkZGluZzo4cHggMTJweDtjdXJzb3I6cG9pbnRlcjtmb250LXNpemU6LjlyZW07Y29sb3I6IzU1NTt0cmFuc2l0aW9uOmFsbCAuMTVzO30KICAgICAgICAudWNhbC1uYXYtYnRuOmhvdmVye2JhY2tncm91bmQ6I2Y1ZjVmNTtib3JkZXItY29sb3I6I2JiYjt9CiAgICAgICAgLnVjYWwtdGl0bGV7bWFyZ2luOjA7Zm9udC1zaXplOjEuMXJlbTtjb2xvcjojMmMzZTUwO21pbi13aWR0aDoxODBweDt0ZXh0LWFsaWduOmNlbnRlcjt9CiAgICAgICAgLnVjYWwtYnRuLXRvZGF5e2JhY2tncm91bmQ6I2ZmZjtib3JkZXI6MXB4IHNvbGlkICMzNDk4ZGI7Y29sb3I6IzM0OThkYjtib3JkZXItcmFkaXVzOjhweDtwYWRkaW5nOjdweCAxNHB4O2N1cnNvcjpwb2ludGVyO2ZvbnQtc2l6ZTouNzhyZW07Zm9udC13ZWlnaHQ6NjAwO3RyYW5zaXRpb246YWxsIC4xNXM7fQogICAgICAgIC51Y2FsLWJ0bi10b2RheTpob3ZlcntiYWNrZ3JvdW5kOiMzNDk4ZGI7Y29sb3I6I2ZmZjt9CiAgICAgICAgLnVjYWwtYnRuLWFkZHtiYWNrZ3JvdW5kOiMyN2FlNjA7Y29sb3I6I2ZmZjtib3JkZXI6bm9uZTtib3JkZXItcmFkaXVzOjhweDtwYWRkaW5nOjhweCAxNnB4O2N1cnNvcjpwb2ludGVyO2ZvbnQtc2l6ZTouNzhyZW07Zm9udC13ZWlnaHQ6NjAwO2Rpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXI7Z2FwOjZweDt9CiAgICAgICAgLnVjYWwtYnRuLWFkZDpob3ZlcntiYWNrZ3JvdW5kOiMyMTlhNTI7fQogICAgICAgIC51Y2FsLWJ0bi1yZWZyZXNoe2JhY2tncm91bmQ6bm9uZTtib3JkZXI6MXB4IHNvbGlkICM0Mjg1ZjQ7Y29sb3I6IzQyODVmNDtib3JkZXItcmFkaXVzOjhweDtwYWRkaW5nOjhweCAxMnB4O2N1cnNvcjpwb2ludGVyO2ZvbnQtc2l6ZTouNzhyZW07fQogICAgICAgIC51Y2FsLWJ0bi1yZWZyZXNoOmhvdmVye2JhY2tncm91bmQ6IzQyODVmNDtjb2xvcjojZmZmO30KICAgICAgICAudWNhbC1sZWdlbmR7ZGlzcGxheTpmbGV4O2dhcDoxMHB4O2ZvbnQtc2l6ZTouNjVyZW07Y29sb3I6Izg4ODthbGlnbi1pdGVtczpjZW50ZXI7ZmxleC13cmFwOndyYXA7fQogICAgICAgIC51Y2FsLWxlZ2VuZC1kb3R7d2lkdGg6MTBweDtoZWlnaHQ6MTBweDtib3JkZXItcmFkaXVzOjUwJTtkaXNwbGF5OmlubGluZS1ibG9jazttYXJnaW4tcmlnaHQ6M3B4O30KICAgICAgICAudWNhbC1kYXktZ3JvdXB7bWFyZ2luLWJvdHRvbTo0cHg7fQogICAgICAgIC51Y2FsLWRheS1oZHJ7Zm9udC1zaXplOi43OHJlbTtmb250LXdlaWdodDo3MDA7Y29sb3I6IzU1NTtwYWRkaW5nOjEwcHggMTRweCA0cHg7cG9zaXRpb246c3RpY2t5O3RvcDowO2JhY2tncm91bmQ6I2Y5ZmFmYjt6LWluZGV4OjI7dGV4dC10cmFuc2Zvcm06Y2FwaXRhbGl6ZTtib3JkZXItYm90dG9tOjFweCBzb2xpZCAjZWVlO30KICAgICAgICAudWNhbC1kYXktaGRyLmlzLXRvZGF5e2NvbG9yOiNlNjdlMjI7YmFja2dyb3VuZDojZmZmOGYwO30KICAgICAgICAudWNhbC1pdGVte2Rpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpmbGV4LXN0YXJ0O2dhcDoxMHB4O3BhZGRpbmc6MTBweCAxNHB4O2JvcmRlci1ib3R0b206MXB4IHNvbGlkICNmMGYwZjA7dHJhbnNpdGlvbjpiYWNrZ3JvdW5kIC4xcztjdXJzb3I6ZGVmYXVsdDt9CiAgICAgICAgLnVjYWwtaXRlbTpob3ZlcntiYWNrZ3JvdW5kOiNmOGY5ZmE7fQogICAgICAgIC51Y2FsLWRvdHt3aWR0aDoxMHB4O2hlaWdodDoxMHB4O2JvcmRlci1yYWRpdXM6NTAlO2ZsZXgtc2hyaW5rOjA7bWFyZ2luLXRvcDo1cHg7fQogICAgICAgIC51Y2FsLWxlZnR7ZGlzcGxheTpmbGV4O2ZsZXgtZGlyZWN0aW9uOmNvbHVtbjthbGlnbi1pdGVtczpmbGV4LXN0YXJ0O21pbi13aWR0aDo5MHB4O2ZsZXgtc2hyaW5rOjA7fQogICAgICAgIC51Y2FsLWluZm97ZmxleDoxO21pbi13aWR0aDowO30KICAgICAgICAudWNhbC1pdGVtLXRpdGxle2ZvbnQtc2l6ZTouODJyZW07Y29sb3I6IzJjM2U1MDtmb250LXdlaWdodDo1MDA7fQogICAgICAgIC51Y2FsLWl0ZW0tbWV0YXtmb250LXNpemU6LjY1cmVtO2NvbG9yOiNhYWE7bWFyZ2luLXRvcDoxcHg7fQogICAgICAgIC51Y2FsLWl0ZW0tdGltZXtmb250LXNpemU6LjcycmVtO2NvbG9yOiM4ODg7fQogICAgICAgIC51Y2FsLWl0ZW0tYWN0aW9uc3tkaXNwbGF5OmZsZXg7Z2FwOjFweDttYXJnaW4tdG9wOjRweDtvcGFjaXR5OjA7dHJhbnNpdGlvbjpvcGFjaXR5IC4xNXM7fQogICAgICAgIC51Y2FsLWl0ZW06aG92ZXIgLnVjYWwtaXRlbS1hY3Rpb25ze29wYWNpdHk6MTt9CiAgICAgICAgLnVjYWwtaXRlbS1hY3Rpb25zIGJ1dHRvbntiYWNrZ3JvdW5kOm5vbmU7Ym9yZGVyOm5vbmU7Y3Vyc29yOnBvaW50ZXI7cGFkZGluZzozcHggNnB4O2JvcmRlci1yYWRpdXM6NXB4O2ZvbnQtc2l6ZTouNjhyZW07Y29sb3I6I2JiYjt9CiAgICAgICAgLnVjYWwtaXRlbS1hY3Rpb25zIGJ1dHRvbjpob3ZlcntiYWNrZ3JvdW5kOiNlZWU7Y29sb3I6IzU1NTt9CiAgICAgICAgLnVjYWwtaXRlbS1hY3Rpb25zIGJ1dHRvbi5hY3QtZGVsOmhvdmVye2NvbG9yOiNlNzRjM2M7YmFja2dyb3VuZDojZmRmMGYwO30KICAgICAgICAudWNhbC1lbXB0eXt0ZXh0LWFsaWduOmNlbnRlcjtjb2xvcjojY2NjO3BhZGRpbmc6NTBweCAyMHB4O2ZvbnQtc2l6ZTouODVyZW07fQogICAgICAgIC51Y2FsLWVtcHR5IGl7Zm9udC1zaXplOjJyZW07ZGlzcGxheTpibG9jazttYXJnaW4tYm90dG9tOjEwcHg7fQogICAgICAgIC51Y2FsLWRlc3Qtb3B0e2Rpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXI7Z2FwOjZweDtwYWRkaW5nOjhweCAxNHB4O2JvcmRlcjoycHggc29saWQgI2UwZTBlMDtib3JkZXItcmFkaXVzOjhweDtjdXJzb3I6cG9pbnRlcjtmb250LXNpemU6Ljc4cmVtO2ZvbnQtd2VpZ2h0OjUwMDtjb2xvcjojNTU1O3RyYW5zaXRpb246YWxsIC4xNXM7fQogICAgICAgIC51Y2FsLWRlc3Qtb3B0OmhvdmVye2JvcmRlci1jb2xvcjojMzQ5OGRiO30KICAgICAgICAudWNhbC1kZXN0LW9wdC5hY3RpdmV7Ym9yZGVyLWNvbG9yOiMzNDk4ZGI7YmFja2dyb3VuZDojZWFmNGZlO2NvbG9yOiMyYzNlNTA7fQogICAgICAgIC51Y2FsLWRlc3Qtb3B0IGlucHV0e2Rpc3BsYXk6bm9uZTt9CiAgICAgICAgLnVjYWwtc3JjLWJhZGdle2ZvbnQtc2l6ZTouNTVyZW07cGFkZGluZzoxcHggNXB4O2JvcmRlci1yYWRpdXM6NHB4O2NvbG9yOiNmZmY7Zm9udC13ZWlnaHQ6NjAwO21hcmdpbi1sZWZ0OjZweDt9CgogICAgICAgIC8qIOKVkOKVkOKVkCBJTkxJTkUgTE9HTyDilZDilZDilZAgKi8KICAgICAgICAucnRlLWxvZ28taW1nIHsgbWF4LWhlaWdodDo2MHB4OyBtYXgtd2lkdGg6MTIwcHg7IHZlcnRpY2FsLWFsaWduOm1pZGRsZTsgZGlzcGxheTppbmxpbmUtYmxvY2sgIWltcG9ydGFudDsgLXdlYmtpdC1wcmludC1jb2xvci1hZGp1c3Q6ZXhhY3QgIWltcG9ydGFudDsgcHJpbnQtY29sb3ItYWRqdXN0OmV4YWN0ICFpbXBvcnRhbnQ7IH0KICAgICAgICAvKiDilZDilZDilZAgUklDSCBURVhUIEVESVRPUiDilZDilZDilZAgKi8KICAgICAgICAucnRlLXdyYXB7Ym9yZGVyOjFweCBzb2xpZCAjZGRkO2JvcmRlci1yYWRpdXM6OHB4O292ZXJmbG93OmhpZGRlbjtiYWNrZ3JvdW5kOiNmZmZ9CiAgICAgICAgLnJ0ZS1iYXJ7ZGlzcGxheTpmbGV4O2dhcDoycHg7cGFkZGluZzo0cHggNnB4O2JhY2tncm91bmQ6I2Y0ZjVmNztib3JkZXItYm90dG9tOjFweCBzb2xpZCAjZGRkfQogICAgICAgIC5ydGUtYmFyIGJ1dHRvbnt3aWR0aDoyOHB4O2hlaWdodDoyNnB4O2JvcmRlcjpub25lO2JvcmRlci1yYWRpdXM6NHB4O2JhY2tncm91bmQ6dHJhbnNwYXJlbnQ7Y3Vyc29yOnBvaW50ZXI7Zm9udC1zaXplOi43OHJlbTtjb2xvcjojNTU1O2Rpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXI7anVzdGlmeS1jb250ZW50OmNlbnRlcn0KICAgICAgICAucnRlLWJhciBidXR0b246aG92ZXJ7YmFja2dyb3VuZDojZTBlMGUwfQogICAgICAgIC5ydGUtc2Vwe2Rpc3BsYXk6aW5saW5lLWJsb2NrO3dpZHRoOjFweDtoZWlnaHQ6MTZweDtiYWNrZ3JvdW5kOiNkZGQ7bWFyZ2luOjAgM3B4O3ZlcnRpY2FsLWFsaWduOm1pZGRsZTt9CiAgICAgICAgLnJ0ZS1jb2xvci1wb3B7cG9zaXRpb246YWJzb2x1dGU7dG9wOjEwMCU7bGVmdDowO2JhY2tncm91bmQ6I2ZmZjtib3JkZXI6MXB4IHNvbGlkICNkZGQ7Ym9yZGVyLXJhZGl1czo4cHg7Ym94LXNoYWRvdzowIDRweCAxMnB4IHJnYmEoMCwwLDAsLjE1KTtwYWRkaW5nOjhweDtkaXNwbGF5OmZsZXg7Z2FwOjRweDtmbGV4LXdyYXA6d3JhcDt6LWluZGV4OjEwMDt3aWR0aDoxNjBweDt9CiAgICAgICAgLnJ0ZS1jb2xvci1zd3t3aWR0aDoyMHB4O2hlaWdodDoyMHB4O2JvcmRlci1yYWRpdXM6NHB4O2JvcmRlcjoxcHggc29saWQgI2RkZDtjdXJzb3I6cG9pbnRlcjt9CiAgICAgICAgLnJ0ZS1jb2xvci1zdzpob3Zlcnt0cmFuc2Zvcm06c2NhbGUoMS4yKTtib3gtc2hhZG93OjAgMCA0cHggcmdiYSgwLDAsMCwuMik7fQoKICAgICAgICAucnRlLWJvZHl7bWluLWhlaWdodDo3MHB4O21heC1oZWlnaHQ6MTgwcHg7b3ZlcmZsb3cteTphdXRvO3BhZGRpbmc6OHB4IDEwcHg7Zm9udC1zaXplOi44MnJlbTtsaW5lLWhlaWdodDoxLjU7b3V0bGluZTpub25lfQogICAgICAgIC5ydGUtYm9keSB1bCwucnRlLWJvZHkgb2x7bWFyZ2luOjRweCAwIDRweCAxOHB4O3BhZGRpbmc6MH0KCiAgICAgICAgCiAgICAgICAgLyog4pWQ4pWQ4pWQIEFVVE9DT01QTEVURSDDiUzDiFZFUyDilZDilZDilZAgKi8KICAgICAgICAuYWMtd3JhcHtwb3NpdGlvbjpyZWxhdGl2ZX0KICAgICAgICAuYWMtbGlzdHtwb3NpdGlvbjphYnNvbHV0ZTt0b3A6MTAwJTtsZWZ0OjA7cmlnaHQ6MDttYXgtaGVpZ2h0OjE4MHB4O292ZXJmbG93LXk6YXV0bztiYWNrZ3JvdW5kOiNmZmY7Ym9yZGVyOjFweCBzb2xpZCAjZGRkO2JvcmRlci10b3A6bm9uZTtib3JkZXItcmFkaXVzOjAgMCA4cHggOHB4O2JveC1zaGFkb3c6MCA0cHggMTJweCByZ2JhKDAsMCwwLC4xMik7ei1pbmRleDo5OTk7ZGlzcGxheTpub25lfQogICAgICAgIC5hYy1saXN0LnNob3d7ZGlzcGxheTpibG9ja30KICAgICAgICAuYWMtaXRlbXtwYWRkaW5nOjdweCAxMnB4O2ZvbnQtc2l6ZTouNzhyZW07Y3Vyc29yOnBvaW50ZXI7ZGlzcGxheTpmbGV4O2p1c3RpZnktY29udGVudDpzcGFjZS1iZXR3ZWVuO2FsaWduLWl0ZW1zOmNlbnRlcn0KICAgICAgICAuYWMtaXRlbTpob3ZlciwuYWMtaXRlbS5hY3RpdmV7YmFja2dyb3VuZDojZWFmNGZlfQogICAgICAgIC5hYy1pdGVtIC5hYy1jbGFzc2V7Zm9udC1zaXplOi42NXJlbTtjb2xvcjojODg4O2JhY2tncm91bmQ6I2YwZjBmMDtwYWRkaW5nOjFweCA2cHg7Ym9yZGVyLXJhZGl1czo0cHh9CgogICAgICAgIC8qIOKVkOKVkOKVkCBFVkVORU1FTlRTIChtZW51MTApIOKVkOKVkOKVkCAqLwogICAgICAgIC5ldi1oZWFkZXJ7ZGlzcGxheTpmbGV4O2FsaWduLWl0ZW1zOmNlbnRlcjtqdXN0aWZ5LWNvbnRlbnQ6c3BhY2UtYmV0d2VlbjttYXJnaW4tYm90dG9tOjE0cHg7ZmxleC13cmFwOndyYXA7Z2FwOjhweH0KICAgICAgICAuZXYtaGVhZGVyIGgye2NvbG9yOnZhcigtLWhlYWRlcik7Zm9udC1zaXplOjEuMDVyZW07ZGlzcGxheTpmbGV4O2FsaWduLWl0ZW1zOmNlbnRlcjtnYXA6OHB4O21hcmdpbjowfQogICAgICAgIC5ldi10b3B7ZGlzcGxheTpmbGV4O2dhcDoxMnB4O21hcmdpbi1ib3R0b206MTRweDtmbGV4LXdyYXA6d3JhcDthbGlnbi1pdGVtczpjZW50ZXJ9CiAgICAgICAgLmV2LWtwaXN7ZGlzcGxheTpmbGV4O2dhcDoxMHB4O2ZsZXg6MTtmbGV4LXdyYXA6d3JhcH0KICAgICAgICAuZXYta3Bpe2JhY2tncm91bmQ6I2ZmZjtib3JkZXI6MXB4IHNvbGlkICNlOGVhZWQ7Ym9yZGVyLXJhZGl1czoxMHB4O3BhZGRpbmc6MTBweCAxNnB4O3RleHQtYWxpZ246Y2VudGVyO21pbi13aWR0aDo5MHB4fQogICAgICAgIC5ldi1rcGkgLmt2e2ZvbnQtc2l6ZToxLjNyZW07Zm9udC13ZWlnaHQ6NzAwfS5ldi1rcGkgLmtse2ZvbnQtc2l6ZTouNjVyZW07Y29sb3I6Izg4ODttYXJnaW4tdG9wOjJweH0KICAgICAgICAuZXYtZmlsdGVyc3tkaXNwbGF5OmZsZXg7Z2FwOjhweDtmbGV4LXdyYXA6d3JhcDttYXJnaW4tYm90dG9tOjE0cHg7YWxpZ24taXRlbXM6Y2VudGVyfQogICAgICAgIC5ldi1maWx0ZXJzIHNlbGVjdCwuZXYtZmlsdGVycyBpbnB1dHtwYWRkaW5nOjZweCAxMHB4O2JvcmRlcjoxcHggc29saWQgI2RkZDtib3JkZXItcmFkaXVzOjhweDtmb250LXNpemU6Ljc4cmVtfQogICAgICAgIC5ldi1ncmlke2Rpc3BsYXk6Z3JpZDtncmlkLXRlbXBsYXRlLWNvbHVtbnM6cmVwZWF0KGF1dG8tZmlsbCxtaW5tYXgoMzIwcHgsMWZyKSk7Z2FwOjE0cHh9CiAgICAgICAgLmV2LWNhcmR7YmFja2dyb3VuZDojZmZmO2JvcmRlcjoxcHggc29saWQgI2U4ZWFlZDtib3JkZXItcmFkaXVzOjEwcHg7cGFkZGluZzoxNnB4O2JveC1zaGFkb3c6MCAxcHggNHB4IHJnYmEoMCwwLDAsLjA0KTt0cmFuc2l0aW9uOmFsbCAuMTVzO3Bvc2l0aW9uOnJlbGF0aXZlfQogICAgICAgIC5ldi1jYXJkOmhvdmVye2JveC1zaGFkb3c6MCA0cHggMTRweCByZ2JhKDAsMCwwLC4xKTt0cmFuc2Zvcm06dHJhbnNsYXRlWSgtMXB4KX0KICAgICAgICAuZXYtY2FyZC1oZHtkaXNwbGF5OmZsZXg7YWxpZ24taXRlbXM6ZmxleC1zdGFydDtnYXA6OHB4O21hcmdpbi1ib3R0b206OHB4fQogICAgICAgIC5ldi1jYXJkIGg0e2ZvbnQtc2l6ZTouODhyZW07Zm9udC13ZWlnaHQ6NzAwO2NvbG9yOiMyYzNlNTA7bWFyZ2luOjA7ZmxleDoxO2xpbmUtaGVpZ2h0OjEuM30KICAgICAgICAuZXYtY2FyZC1hY3Rze2Rpc3BsYXk6ZmxleDtnYXA6M3B4fQogICAgICAgIC5ldi1jYXJkLWFjdHMgYnV0dG9ue3dpZHRoOjI2cHg7aGVpZ2h0OjI2cHg7Ym9yZGVyOm5vbmU7Ym9yZGVyLXJhZGl1czo2cHg7Y3Vyc29yOnBvaW50ZXI7Zm9udC1zaXplOi43cmVtO2Rpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXI7anVzdGlmeS1jb250ZW50OmNlbnRlcjtiYWNrZ3JvdW5kOiNmMGYwZjA7Y29sb3I6Izg4OH0KICAgICAgICAuZXYtY2FyZC1hY3RzIGJ1dHRvbjpob3ZlcntiYWNrZ3JvdW5kOiNkZGQ7Y29sb3I6IzMzM30KICAgICAgICAuZXYtY2FyZC1tZXRhe2Rpc3BsYXk6ZmxleDtnYXA6MTBweDtmbGV4LXdyYXA6d3JhcDtmb250LXNpemU6LjdyZW07Y29sb3I6Izg4ODttYXJnaW4tYm90dG9tOjZweH0KICAgICAgICAuZXYtY2FyZC1tZXRhIHNwYW57ZGlzcGxheTpmbGV4O2FsaWduLWl0ZW1zOmNlbnRlcjtnYXA6M3B4fQogICAgICAgIC5ldi1jYXJkLWRlc2N7Zm9udC1zaXplOi43NnJlbTtjb2xvcjojNTU1O2xpbmUtaGVpZ2h0OjEuNDttYXgtaGVpZ2h0OjYwcHg7b3ZlcmZsb3c6aGlkZGVuO21hcmdpbi1ib3R0b206OHB4fQogICAgICAgIC5ldi1jYXJkLWZ0e2Rpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXI7Z2FwOjZweDtmbGV4LXdyYXA6d3JhcH0KICAgICAgICAuZXYtYmFkZ2V7cGFkZGluZzoycHggOHB4O2JvcmRlci1yYWRpdXM6MTBweDtmb250LXNpemU6LjZyZW07Zm9udC13ZWlnaHQ6NjAwO2NvbG9yOiNmZmZ9CiAgICAgICAgLmV2LWJhZGdlLnRvZG97YmFja2dyb3VuZDojZTc0YzNjfS5ldi1iYWRnZS5wcm9ncmVzc3tiYWNrZ3JvdW5kOiNmMzljMTJ9LmV2LWJhZGdlLmRvbmV7YmFja2dyb3VuZDojMjdhZTYwfS5ldi1iYWRnZS5ibG9ja2Vke2JhY2tncm91bmQ6Izk1YTVhNn0KICAgICAgICAuZXYtcGJhcntoZWlnaHQ6NHB4O2JhY2tncm91bmQ6I2VjZjBmMTtib3JkZXItcmFkaXVzOjRweDtvdmVyZmxvdzpoaWRkZW47ZmxleDoxO21pbi13aWR0aDo2MHB4fQogICAgICAgIC5ldi1wZmlsbHtoZWlnaHQ6MTAwJTtib3JkZXItcmFkaXVzOjRweH0KICAgICAgICAuZXYtdGFne3BhZGRpbmc6MXB4IDVweDtib3JkZXItcmFkaXVzOjZweDtmb250LXNpemU6LjU4cmVtO2JhY2tncm91bmQ6I2VlZjtjb2xvcjojNjY2fQogICAgICAgIC5ldi1hdHRhY2h7Zm9udC1zaXplOi42NnJlbTtjb2xvcjp2YXIoLS1oZWFkZXIpO2N1cnNvcjpwb2ludGVyO2Rpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXI7Z2FwOjNweH0KICAgICAgICAuZXYtYXR0YWNoOmhvdmVye3RleHQtZGVjb3JhdGlvbjp1bmRlcmxpbmV9CgogICAgICAgIC8qIOKVkOKVkOKVkCBHQU5UVCBUQUJMRSAobWVudTExKSDilZDilZDilZAgKi8KICAgICAgICAuZ3QtYmFye2Rpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXI7anVzdGlmeS1jb250ZW50OnNwYWNlLWJldHdlZW47bWFyZ2luLWJvdHRvbToxMnB4O2ZsZXgtd3JhcDp3cmFwO2dhcDo4cHg7cGFkZGluZzoxMnB4IDE2cHg7YmFja2dyb3VuZDojZmRmMmU5O2JvcmRlci1yYWRpdXM6MTBweDtib3JkZXI6MXB4IHNvbGlkICNmMGM0OWJ9CiAgICAgICAgLmd0LWJhciBoMntjb2xvcjojZDM1NDAwO2ZvbnQtc2l6ZToxLjA1cmVtO2Rpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXI7Z2FwOjhweDttYXJnaW46MH0KICAgICAgICAuZ3QtYmFyLWJ0bnN7ZGlzcGxheTpmbGV4O2dhcDo2cHh9CiAgICAgICAgLmd0LWJhci1idG5zIGJ1dHRvbntwYWRkaW5nOjZweCAxNHB4O2JvcmRlcjpub25lO2JvcmRlci1yYWRpdXM6NnB4O2ZvbnQtd2VpZ2h0OjYwMDtjdXJzb3I6cG9pbnRlcjtmb250LXNpemU6Ljc4cmVtO2Rpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXI7Z2FwOjVweH0KICAgICAgICAuZ3QtYnRuLWFkZHtiYWNrZ3JvdW5kOiNkMzU0MDA7Y29sb3I6I2ZmZn0uZ3QtYnRuLWFkZDpob3ZlcntiYWNrZ3JvdW5kOiNlNjdlMjJ9CiAgICAgICAgLmd0LWJ0bi1zZWN7YmFja2dyb3VuZDojZmZmO2NvbG9yOiM1NTU7Ym9yZGVyOjFweCBzb2xpZCAjY2NjfS5ndC1idG4tc2VjOmhvdmVye2JhY2tncm91bmQ6I2Y1ZjVmNX0KICAgICAgICAuZ3QtbmF2e2Rpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXI7Z2FwOjZweDttYXJnaW4tYm90dG9tOjEwcHg7ZmxleC13cmFwOndyYXB9CiAgICAgICAgLmd0LW5hdiBidXR0b257aGVpZ2h0OjI4cHg7Ym9yZGVyOjFweCBzb2xpZCAjZGRkO2JvcmRlci1yYWRpdXM6NXB4O2JhY2tncm91bmQ6I2ZmZjtjdXJzb3I6cG9pbnRlcjtmb250LXNpemU6LjcycmVtO3BhZGRpbmc6MCA4cHh9CiAgICAgICAgLmd0LW5hdiBidXR0b246aG92ZXJ7YmFja2dyb3VuZDojZjBmMGYwfQogICAgICAgIC5ndC1uYXYgc2VsZWN0e3BhZGRpbmc6NHB4IDhweDtib3JkZXI6MXB4IHNvbGlkICNkZGQ7Ym9yZGVyLXJhZGl1czo1cHg7Zm9udC1zaXplOi43NXJlbX0KICAgICAgICAuZ3Qtd3JhcHtvdmVyZmxvdy14OmF1dG87Ym9yZGVyOjFweCBzb2xpZCAjZGRkO2JvcmRlci1yYWRpdXM6OHB4O2JhY2tncm91bmQ6I2ZmZn0KICAgICAgICB0YWJsZS5ndHt3aWR0aDoxMDAlO2JvcmRlci1jb2xsYXBzZTpjb2xsYXBzZTt0YWJsZS1sYXlvdXQ6Zml4ZWR9CiAgICAgICAgLmd0IHRoe3BhZGRpbmc6NHB4IDJweDtmb250LXNpemU6LjYycmVtO2ZvbnQtd2VpZ2h0OjYwMDtjb2xvcjojNjY2O2JvcmRlci1ib3R0b206MXB4IHNvbGlkICNkZGQ7dGV4dC1hbGlnbjpjZW50ZXI7YmFja2dyb3VuZDojZjhmOGY4fQogICAgICAgIC5ndCB0aC5ndC1tb3tiYWNrZ3JvdW5kOiNlOGU4ZTg7Zm9udC1zaXplOi42OHJlbTtjb2xvcjojNDQ0O2JvcmRlci1yaWdodDoxcHggc29saWQgI2RkZH0KICAgICAgICAuZ3QgdGguZ3QtbGN7bWluLXdpZHRoOjI3MHB4O3dpZHRoOjI3MHB4O3RleHQtYWxpZ246bGVmdDtwYWRkaW5nLWxlZnQ6MTBweH0KICAgICAgICAuZ3QgdGguZ3QtY2N7d2lkdGg6NTBweDt0ZXh0LWFsaWduOmNlbnRlcn0uZ3QgdGguZ3QtZGN7d2lkdGg6NTVweDt0ZXh0LWFsaWduOmNlbnRlcn0KICAgICAgICAuZ3QgdGguZ3QtY3d7YmFja2dyb3VuZDojZDM1NDAwO2NvbG9yOiNmZmZ9CiAgICAgICAgLmd0IHRoLmd0LXZhe2JhY2tncm91bmQ6cmVwZWF0aW5nLWxpbmVhci1ncmFkaWVudCg0NWRlZywjZjBmMGYwLCNmMGYwZjAgM3B4LCNlOGU4ZTggM3B4LCNlOGU4ZTggNnB4KX0KICAgICAgICAuZ3QgdGR7cGFkZGluZzowO2hlaWdodDoyOHB4O2JvcmRlci1ib3R0b206MXB4IHNvbGlkICNmMGYwZjA7Ym9yZGVyLXJpZ2h0OjFweCBzb2xpZCAjZjhmOGY4O3Bvc2l0aW9uOnJlbGF0aXZlfQogICAgICAgIC5ndCB0ZC5ndC1sYXtmb250LXNpemU6Ljc0cmVtO2ZvbnQtd2VpZ2h0OjUwMDtjb2xvcjojMzMzO3BhZGRpbmctbGVmdDoxMHB4O3doaXRlLXNwYWNlOm5vd3JhcDtvdmVyZmxvdzpoaWRkZW47dGV4dC1vdmVyZmxvdzplbGxpcHNpcztjdXJzb3I6cG9pbnRlcjtib3JkZXItcmlnaHQ6MXB4IHNvbGlkICNlZWV9CiAgICAgICAgLmd0IHRkLmd0LWxhOmhvdmVye2NvbG9yOiNkMzU0MDA7dGV4dC1kZWNvcmF0aW9uOnVuZGVybGluZX0KICAgICAgICAuZ3QgdGQuZ3QtY297Zm9udC1zaXplOi43cmVtO2ZvbnQtd2VpZ2h0OjcwMDt0ZXh0LWFsaWduOmNlbnRlcjtjb2xvcjojZDM1NDAwO2JvcmRlci1yaWdodDoxcHggc29saWQgI2VlZX0KICAgICAgICAuZ3QgdGQuZ3QtY2t7dGV4dC1hbGlnbjpjZW50ZXI7Ym9yZGVyLXJpZ2h0OjFweCBzb2xpZCAjZWVlfQogICAgICAgIC5ndCB0ZC5ndC12YXtiYWNrZ3JvdW5kOnJlcGVhdGluZy1saW5lYXItZ3JhZGllbnQoNDVkZWcsI2YwZjBmMCwjZjBmMGYwIDNweCwjZThlOGU4IDNweCwjZThlOGU4IDZweCkhaW1wb3J0YW50fQogICAgICAgIC5ndC1jZntwb3NpdGlvbjphYnNvbHV0ZTtpbnNldDozcHggMXB4O2JvcmRlci1yYWRpdXM6M3B4fQogICAgICAgIC5ndC1jZi5kb25le29wYWNpdHk6LjR9CiAgICAgICAgLmd0LWNmLmMtcmVudHJlZXtiYWNrZ3JvdW5kOiM1ZGFkZTJ9Lmd0LWNmLmMtZXhhbWVuc3tiYWNrZ3JvdW5kOiMyZTg2YzF9CiAgICAgICAgLmd0LWNmLmMtb3JpZW50YXRpb257YmFja2dyb3VuZDojMWE1Mjc2fS5ndC1jZi5jLWNvbnNlaWxze2JhY2tncm91bmQ6IzI0NzFhM30KICAgICAgICAuZ3QtY2YuYy1hZG1pbntiYWNrZ3JvdW5kOiMxNDhmNzd9Lmd0LWNmLmMtYXV0cmV7YmFja2dyb3VuZDojNWI2ZDVifQogICAgICAgIC5ndC1jZi5jLXBlZGFnb2d7YmFja2dyb3VuZDojOGU0NGFkfS5ndC1jZi5jLXJoe2JhY2tncm91bmQ6I2MwMzkyYn0KICAgICAgICAuZ3QtbGVne2Rpc3BsYXk6ZmxleDtnYXA6MTJweDtmbGV4LXdyYXA6d3JhcDttYXJnaW4tdG9wOjhweDtwYWRkaW5nOjRweCAwfQogICAgICAgIC5ndC1sZWcgc3BhbntkaXNwbGF5OmZsZXg7YWxpZ24taXRlbXM6Y2VudGVyO2dhcDo0cHg7Zm9udC1zaXplOi42OHJlbTtjb2xvcjojNjY2fQogICAgICAgIC5ndC1sZWcgaXt3aWR0aDoxMnB4O2hlaWdodDo4cHg7Ym9yZGVyLXJhZGl1czoycHg7ZGlzcGxheTppbmxpbmUtYmxvY2t9CgogICAgICAgIC8qIOKVkOKVkOKVkCBNT0RBTFMg4pWQ4pWQ4pWQICovCiAgICAgICAgLm0tb3Z7ZGlzcGxheTpub25lO3Bvc2l0aW9uOmZpeGVkO2luc2V0OjA7YmFja2dyb3VuZDpyZ2JhKDAsMCwwLC40KTt6LWluZGV4Ojk5OTk7YWxpZ24taXRlbXM6Y2VudGVyO2p1c3RpZnktY29udGVudDpjZW50ZXJ9CiAgICAgICAgLm0tb3Yub3BlbntkaXNwbGF5OmZsZXh9CiAgICAgICAgLm0tYm94e2JhY2tncm91bmQ6I2ZmZjtib3JkZXItcmFkaXVzOjE0cHg7cGFkZGluZzoyNnB4O21heC13aWR0aDo5NXZ3O21heC1oZWlnaHQ6OTB2aDtvdmVyZmxvdy15OmF1dG87Ym94LXNoYWRvdzowIDIwcHggNjBweCByZ2JhKDAsMCwwLC4yNSl9CiAgICAgICAgLm0tYm94IGgze21hcmdpbjowIDAgMTZweDtkaXNwbGF5OmZsZXg7YWxpZ24taXRlbXM6Y2VudGVyO2dhcDo4cHh9Lm0tYm94IGgzIGl7Y29sb3I6dmFyKC0taGVhZGVyKX0KICAgICAgICAubS1yb3d7ZGlzcGxheTpncmlkO2dyaWQtdGVtcGxhdGUtY29sdW1uczoxZnIgMWZyO2dhcDoxMnB4O21hcmdpbi1ib3R0b206MTJweH0KICAgICAgICAubS1hY3Rze2Rpc3BsYXk6ZmxleDtnYXA6OHB4O2p1c3RpZnktY29udGVudDpmbGV4LWVuZDttYXJnaW4tdG9wOjEycHh9CiAgICAgICAgLm1ie3BhZGRpbmc6OHB4IDE4cHg7Ym9yZGVyOm5vbmU7Ym9yZGVyLXJhZGl1czo4cHg7Y3Vyc29yOnBvaW50ZXI7Zm9udC13ZWlnaHQ6NjAwO2ZvbnQtc2l6ZTouOHJlbTtkaXNwbGF5OmZsZXg7YWxpZ24taXRlbXM6Y2VudGVyO2dhcDo1cHh9CiAgICAgICAgLm1iLWN7YmFja2dyb3VuZDojZjBmMGYwO2NvbG9yOiM1NTU7cGFkZGluZzoxMHB4IDIwcHg7Zm9udC1zaXplOi44NXJlbTtib3JkZXItcmFkaXVzOjhweH0ubWItb2t7YmFja2dyb3VuZDp2YXIoLS1oZWFkZXIpO2NvbG9yOiNmZmY7Zm9udC1zaXplOi45cmVtO3BhZGRpbmc6MTBweCAyNHB4O2JveC1zaGFkb3c6MCAycHggOHB4IHJnYmEoNDQsNjIsODAsLjMpO3RyYW5zaXRpb246dHJhbnNmb3JtIC4xcyxib3gtc2hhZG93IC4xc30ubWItb2s6aG92ZXJ7dHJhbnNmb3JtOnRyYW5zbGF0ZVkoLTFweCk7Ym94LXNoYWRvdzowIDRweCAxMnB4IHJnYmEoNDQsNjIsODAsLjQpfQogICAgICAgIC5tYi1kZWx7YmFja2dyb3VuZDojZTc0YzNjO2NvbG9yOiNmZmY7bWFyZ2luLXJpZ2h0OmF1dG99CgogICAgICAgIEBtZWRpYSBwcmludHsKICAgICAgICAgICAgLnNpZGViYXIsLmd0LWJhci1idG5zLC5ndC1uYXYsLmd0LWxlZywuZ3QtY2ssLmV2LWhlYWRlciwuZXYtdG9wLC5ldi1maWx0ZXJzLC5ldi1jYXJkLWFjdHMsLm5vLXByaW50e2Rpc3BsYXk6bm9uZSFpbXBvcnRhbnR9CiAgICAgICAgICAgIC5jb250ZW50e21hcmdpbi1sZWZ0OjAhaW1wb3J0YW50O3BhZGRpbmc6OHB4IWltcG9ydGFudH0KICAgICAgICAgICAgLmd0LXdyYXB7Ym9yZGVyOjFweCBzb2xpZCAjOTk5O21heC1oZWlnaHQ6bm9uZSFpbXBvcnRhbnQ7b3ZlcmZsb3c6dmlzaWJsZSFpbXBvcnRhbnR9CiAgICAgICAgICAgIC5ndCB0ZCwuZ3QgdGh7Ym9yZGVyOjFweCBzb2xpZCAjY2NjIWltcG9ydGFudH0KICAgICAgICAgICAgLmd0LWNme3ByaW50LWNvbG9yLWFkanVzdDpleGFjdDstd2Via2l0LXByaW50LWNvbG9yLWFkanVzdDpleGFjdH0KICAgICAgICB9CgogICAgCi8qIOKUgOKUgCBHb29nbGUgQ2FsZW5kYXIgZHVhbCB2aWV3IOKUgOKUgCAqLwouZ2NhbC1iYW5uZXJ7YmFja2dyb3VuZDpsaW5lYXItZ3JhZGllbnQoMTM1ZGVnLCM0Mjg1ZjQsIzM0YTg1Myk7Y29sb3I6I2ZmZjtwYWRkaW5nOjE0cHggMThweDtib3JkZXItcmFkaXVzOjEycHg7ZGlzcGxheTpmbGV4O2FsaWduLWl0ZW1zOmNlbnRlcjtnYXA6MTJweDttYXJnaW4tYm90dG9tOjE2cHg7Zm9udC1zaXplOi44NXJlbTt9Ci5nY2FsLWJhbm5lciBpe2ZvbnQtc2l6ZToxLjNyZW07fQouZ2NhbC1iYW5uZXIgLmdjYWwtc3RhdHVze2ZvbnQtd2VpZ2h0OjYwMDt9Ci5nY2FsLWJhbm5lciAuZ2NhbC1zdWJ7b3BhY2l0eTouODU7Zm9udC1zaXplOi43MnJlbTt9Ci5nY2FsLW9mZmxpbmUtYmFubmVye2JhY2tncm91bmQ6I2YwZjBmMDtjb2xvcjojNTU1O3BhZGRpbmc6MTRweCAxOHB4O2JvcmRlci1yYWRpdXM6MTJweDtkaXNwbGF5OmZsZXg7YWxpZ24taXRlbXM6Y2VudGVyO2dhcDoxMnB4O21hcmdpbi1ib3R0b206MTZweDtmb250LXNpemU6Ljg1cmVtO30KLmdjYWwtb2ZmbGluZS1iYW5uZXIgaXtmb250LXNpemU6MS4zcmVtO2NvbG9yOiM5OTk7fQouZ2NhbC1ldnQtbGlzdHttYXgtaGVpZ2h0OjYwdmg7b3ZlcmZsb3cteTphdXRvO30KLmdjYWwtZGF5LWdyb3Vwe21hcmdpbi1ib3R0b206MTRweDt9Ci5nY2FsLWRheS1oZWFkZXJ7Zm9udC13ZWlnaHQ6NzAwO2ZvbnQtc2l6ZTouODJyZW07Y29sb3I6IzMzMztwYWRkaW5nOjZweCAwO2JvcmRlci1ib3R0b206MnB4IHNvbGlkICNlMGUwZTA7bWFyZ2luLWJvdHRvbTo2cHg7cG9zaXRpb246c3RpY2t5O3RvcDowO2JhY2tncm91bmQ6I2ZmZjt6LWluZGV4OjE7fQouZ2NhbC1kYXktaGVhZGVyLmlzLXRvZGF5e2NvbG9yOiNlNjdlMjI7Ym9yZGVyLWJvdHRvbS1jb2xvcjojZTY3ZTIyO30KLmdjYWwtaXRlbXtkaXNwbGF5OmZsZXg7YWxpZ24taXRlbXM6ZmxleC1zdGFydDtnYXA6MTBweDtwYWRkaW5nOjdweCAxMHB4O2JvcmRlci1yYWRpdXM6OHB4O2ZvbnQtc2l6ZTouOHJlbTt0cmFuc2l0aW9uOmJhY2tncm91bmQgLjE1czt9Ci5nY2FsLWl0ZW06aG92ZXJ7YmFja2dyb3VuZDojZjVmNWY1O30KLmdjYWwtaXRlbSAuZ2NhbC1kb3R7d2lkdGg6MTBweDtoZWlnaHQ6MTBweDtib3JkZXItcmFkaXVzOjUwJTtmbGV4LXNocmluazowO21hcmdpbi10b3A6M3B4O30KLmdjYWwtaXRlbSAuZ2NhbC10aW1le2ZvbnQtd2VpZ2h0OjYwMDtjb2xvcjojNTU1O21pbi13aWR0aDo0OHB4O2ZvbnQtc2l6ZTouNzVyZW07fQouZ2NhbC1pdGVtIC5nY2FsLXRpdGxle2ZsZXg6MTtjb2xvcjojMjIyO30KLmdjYWwtaXRlbSAuZ2NhbC1jYWwtbmFtZXtmb250LXNpemU6LjY1cmVtO2NvbG9yOiM5OTk7bWFyZ2luLXRvcDoxcHg7fQouZ2NhbC1uYXZ7ZGlzcGxheTpmbGV4O2FsaWduLWl0ZW1zOmNlbnRlcjtnYXA6OHB4O21hcmdpbi1ib3R0b206MTJweDtmbGV4LXdyYXA6d3JhcDt9Ci5nY2FsLW5hdiBidXR0b257cGFkZGluZzo2cHggMTJweDtib3JkZXI6MXB4IHNvbGlkICNkZGQ7Ym9yZGVyLXJhZGl1czo4cHg7YmFja2dyb3VuZDojZmZmO2N1cnNvcjpwb2ludGVyO2ZvbnQtc2l6ZTouNzhyZW07Zm9udC13ZWlnaHQ6NjAwO30KLmdjYWwtbmF2IGJ1dHRvbjpob3ZlcntiYWNrZ3JvdW5kOiNmMGYwZjA7fQouZ2NhbC1uYXYgLmdjYWwtcGVyaW9ke2ZvbnQtd2VpZ2h0OjcwMDtmb250LXNpemU6LjlyZW07Y29sb3I6IzMzMzttaW4td2lkdGg6MTYwcHg7dGV4dC1hbGlnbjpjZW50ZXI7fQouZ2NhbC1lbXB0eXt0ZXh0LWFsaWduOmNlbnRlcjtwYWRkaW5nOjMwcHg7Y29sb3I6I2FhYTtmb250LXNpemU6Ljg1cmVtO30KLmdjYWwtZW1wdHkgaXtmb250LXNpemU6MnJlbTtkaXNwbGF5OmJsb2NrO21hcmdpbi1ib3R0b206OHB4O30KCgogICAgICAgIC8qIFdoZW4gaW5zaWRlIFBJTE9URSB3cmFwcGVyIGlmcmFtZTogaGlkZSBDQURJUidzIG93biBzaWRlYmFyICYgdG9wLWJhciAqLwogICAgICAgIGJvZHkuaW4td3JhcHBlciAuc2lkZWJhciB7IGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDsgfQogICAgICAgIGJvZHkuaW4td3JhcHBlciAubWFpbi1jb250ZW50IHsgbWFyZ2luOiAwOyB3aWR0aDogMTAwJTsgfQogICAgICAgIGJvZHkuaW4td3JhcHBlciAudG9wLWJhciB7IGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDsgfQo8L3N0eWxlPgo8L2hlYWQ+Cjxib2R5PgoKPG5hdiBjbGFzcz0ic2lkZWJhciBuby1wcmludCI+CiAgICA8ZGl2IGNsYXNzPSJicmFuZCI+Q0FESVI8L2Rpdj4KICAgIDxkaXYgY2xhc3M9Im1lbnUiPgogICAgICAgIAogICAgICAgIDxhIGNsYXNzPSJtZW51LWl0ZW0gYWN0aXZlIiBkYXRhLW1lbnU9Im1lbnUyIiBvbmNsaWNrPSJzd2l0Y2hNZW51KCdtZW51MicpIj48aSBjbGFzcz0iZmFzIGZhLWNoZWNrLXNxdWFyZSI+PC9pPiBUbyBEbyBMaXN0PC9hPgogICAgICAgIDxhIGNsYXNzPSJtZW51LWl0ZW0iIGRhdGEtbWVudT0ibWVudTMiIG9uY2xpY2s9InN3aXRjaE1lbnUoJ21lbnUzJykiIGNsYXNzPSJhY3RpdmUiPjxpIGNsYXNzPSJmYXMgZmEtY2FsZW5kYXItYWx0Ij48L2k+IENhbGVuZHJpZXI8L2E+CiAgICAgICAgPGEgY2xhc3M9Im1lbnUtaXRlbSIgZGF0YS1tZW51PSJtZW51NCIgb25jbGljaz0ic3dpdGNoTWVudSgnbWVudTQnKSI+PGkgY2xhc3M9ImZhcyBmYS1jbGlwYm9hcmQtbGlzdCI+PC9pPiBDb25zZWlsIGRlIERpcmVjdGlvbjwvYT4KICAgICAgICA8YSBjbGFzcz0ibWVudS1pdGVtIiBkYXRhLW1lbnU9Im1lbnU1IiBvbmNsaWNrPSJzd2l0Y2hNZW51KCdtZW51NScpIj48aSBjbGFzcz0iZmFzIGZhLXVzZXItZ3JhZHVhdGUiPjwvaT4gU3Vpdmkgw4lsw6h2ZSAvIFBvaW50IENQRTwvYT4KICAgICAgICA8YSBjbGFzcz0ibWVudS1pdGVtIiBkYXRhLW1lbnU9Im1lbnU2IiBvbmNsaWNrPSJzd2l0Y2hNZW51KCdtZW51NicpIj48aSBjbGFzcz0iZmFzIGZhLWNvbW1lbnRzIj48L2k+IEVudHJldGllbnM8L2E+CiAgICAgICAgPGEgY2xhc3M9Im1lbnUtaXRlbSIgZGF0YS1tZW51PSJtZW51NyIgb25jbGljaz0ic3dpdGNoTWVudSgnbWVudTcnKSI+PGkgY2xhc3M9ImZhcyBmYS11c2VycyI+PC9pPiBSw6l1bmlvbnM8L2E+CiAgICAgICAgPGEgY2xhc3M9Im1lbnUtaXRlbSIgZGF0YS1tZW51PSJtZW51OCIgb25jbGljaz0ic3dpdGNoTWVudSgnbWVudTgnKSI+PGkgY2xhc3M9ImZhcyBmYS1oaXN0b3J5Ij48L2k+IEhpc3RvcmlxdWU8L2E+CiAgICAgICAgPGEgY2xhc3M9Im1lbnUtaXRlbSIgZGF0YS1tZW51PSJtZW51OSIgb25jbGljaz0ic3dpdGNoTWVudSgnbWVudTknKSI+PGkgY2xhc3M9ImZhcyBmYS1jaGFydC1saW5lIj48L2k+IFRhYmxlYXUgZGUgQm9yZDwvYT4KICAgICAgICA8YSBjbGFzcz0ibWVudS1pdGVtIiBkYXRhLW1lbnU9Im1lbnUxMCIgb25jbGljaz0ic3dpdGNoTWVudSgnbWVudTEwJykiPjxpIGNsYXNzPSJmYXMgZmEtY2FsZW5kYXItY2hlY2siPjwvaT4gQWN0aXZpdMOpcyBww6lkYWdvZ2lxdWVzPC9hPgogICAgICAgIDxhIGNsYXNzPSJtZW51LWl0ZW0iIGRhdGEtbWVudT0ibWVudTExIiBvbmNsaWNrPSJzd2l0Y2hNZW51KCdtZW51MTEnKSI+PGkgY2xhc3M9ImZhcyBmYS1zdHJlYW0iPjwvaT4gw4ljaMOpYW5jZXM8L2E+CiAgICAgICAgPGEgY2xhc3M9Im1lbnUtaXRlbSIgZGF0YS1tZW51PSJtZW51MTIiIG9uY2xpY2s9InN3aXRjaE1lbnUoJ21lbnUxMicpIj48aSBjbGFzcz0iZmFzIGZhLWJvb2siPjwvaT4gUHJvY8OpZHVyZXM8L2E+CiAgICA8L2Rpdj4KICAgIDxkaXYgY2xhc3M9ImZvb3Rlci1pbmZvIj5DQURJUiBieSBGUzwvZGl2Pgo8L25hdj4KCjxkaXYgY2xhc3M9Im1haW4tY29udGVudCI+CiAgICA8ZGl2IGNsYXNzPSJ0b3AtYmFyIG5vLXByaW50Ij4KICAgICAgICA8ZGl2IGNsYXNzPSJwYWdlLXRpdGxlIj48aDIgaWQ9ImN1cnJlbnQtdGl0bGUiPlBhcmFtw6h0cmVzPC9oMj48cCBpZD0iY3VycmVudC1kYXRlIj48L3A+PC9kaXY+CiAgICAgICAgPGRpdiBjbGFzcz0ic3lzdGVtLXN0YXR1cyI+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9InNhdmUtaW5kaWNhdG9yIiBpZD0iYXV0by1zYXZlLW1zZyI+PGkgY2xhc3M9ImZhcyBmYS1zeW5jLWFsdCBmYS1zcGluIj48L2k+IERvbm7DqWVzIMOgIGpvdXI8L2Rpdj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0iYWN0aW9uLWJ1dHRvbnMiPgogICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9ImZpbGUiIGlkPSJpbXBvcnRGaWxlIiBzdHlsZT0iZGlzcGxheTpub25lIiBvbmNoYW5nZT0iaW1wb3J0RGF0YSh0aGlzKSI+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgIDwvZGl2PgogICAgPC9kaXY+CgogICAgPGRpdiBpZD0ibWVudTEiIGNsYXNzPSJzZWN0aW9uIj4KICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWNhcmQiIHN0eWxlPSJtYXJnaW4tdG9wOjIwcHg7Ij4KICAgICAgICAgICAgPGgzPjxpIGNsYXNzPSJmYXMgZmEtZmlsZS1hbHQiPjwvaT4gTW9kw6hsZXMgcGFyIGTDqWZhdXQ8L2gzPgogICAgICAgICAgICA8c21hbGwgc3R5bGU9ImNvbG9yOiM4ODg7ZGlzcGxheTpibG9jazttYXJnaW4tYm90dG9tOjEycHg7Ij5QZXJzb25uYWxpc2V6IGxlIGNvbnRlbnUgcGFyIGTDqWZhdXQgZGVzIHpvbmVzIGRlIHByaXNlIGRlIG5vdGVzLjwvc21hbGw+CiAgICAgICAgICAgIDxkaXYgc3R5bGU9ImRpc3BsYXk6ZmxleDtmbGV4LWRpcmVjdGlvbjpjb2x1bW47Z2FwOjE0cHg7Ij4KICAgICAgICAgICAgICAgIDxkaXY+CiAgICAgICAgICAgICAgICAgICAgPGxhYmVsIHN0eWxlPSJmb250LXNpemU6Ljc4cmVtO2ZvbnQtd2VpZ2h0OjYwMDttYXJnaW4tYm90dG9tOjRweDtkaXNwbGF5OmJsb2NrOyI+PGkgY2xhc3M9ImZhcyBmYS1jb21tZW50cyIgc3R5bGU9ImNvbG9yOiM5YjU5YjYiPjwvaT4gRW50cmV0aWVuPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJydGUtd3JhcCI+PGRpdiBjbGFzcz0icnRlLWJhciI+CjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJkb2N1bWVudC5leGVjQ29tbWFuZCgnYm9sZCcpIiB0aXRsZT0iR3JhcyI+PGI+RzwvYj48L2J1dHRvbj4KPGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9ImRvY3VtZW50LmV4ZWNDb21tYW5kKCdpdGFsaWMnKSIgdGl0bGU9Ikl0YWxpcXVlIj48aT5JPC9pPjwvYnV0dG9uPgo8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0iZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2luc2VydFVub3JkZXJlZExpc3QnKSIgdGl0bGU9IlB1Y2VzIj48aSBjbGFzcz0iZmFzIGZhLWxpc3QtdWwiPjwvaT48L2J1dHRvbj4KPHNwYW4gY2xhc3M9InJ0ZS1zZXAiPjwvc3Bhbj48YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0iZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2p1c3RpZnlMZWZ0JykiIHRpdGxlPSJBbGlnbmVyIMOgIGdhdWNoZSI+PGkgY2xhc3M9ImZhcyBmYS1hbGlnbi1sZWZ0Ij48L2k+PC9idXR0b24+PGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9ImRvY3VtZW50LmV4ZWNDb21tYW5kKCdqdXN0aWZ5Q2VudGVyJykiIHRpdGxlPSJDZW50cmVyIj48aSBjbGFzcz0iZmFzIGZhLWFsaWduLWNlbnRlciI+PC9pPjwvYnV0dG9uPjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJkb2N1bWVudC5leGVjQ29tbWFuZCgnanVzdGlmeUZ1bGwnKSIgdGl0bGU9Ikp1c3RpZmllciI+PGkgY2xhc3M9ImZhcyBmYS1hbGlnbi1qdXN0aWZ5Ij48L2k+PC9idXR0b24+CjwvZGl2PjxkaXYgaWQ9InRwbC1lbnQiIGNsYXNzPSJkb2MtZWRpdG9yIiBjb250ZW50ZWRpdGFibGU9InRydWUiIHN0eWxlPSJtaW4taGVpZ2h0OjYwcHg7Zm9udC1zaXplOi44cmVtOyI+PC9kaXY+PC9kaXY+CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIDxkaXY+CiAgICAgICAgICAgICAgICAgICAgPGxhYmVsIHN0eWxlPSJmb250LXNpemU6Ljc4cmVtO2ZvbnQtd2VpZ2h0OjYwMDttYXJnaW4tYm90dG9tOjRweDtkaXNwbGF5OmJsb2NrOyI+PGkgY2xhc3M9ImZhcyBmYS11c2VycyIgc3R5bGU9ImNvbG9yOiNlNzRjM2MiPjwvaT4gUsOpdW5pb248L2xhYmVsPgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InJ0ZS13cmFwIj48ZGl2IGNsYXNzPSJydGUtYmFyIj4KPGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9ImRvY3VtZW50LmV4ZWNDb21tYW5kKCdib2xkJykiIHRpdGxlPSJHcmFzIj48Yj5HPC9iPjwvYnV0dG9uPgo8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0iZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2l0YWxpYycpIiB0aXRsZT0iSXRhbGlxdWUiPjxpPkk8L2k+PC9idXR0b24+CjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJkb2N1bWVudC5leGVjQ29tbWFuZCgnaW5zZXJ0VW5vcmRlcmVkTGlzdCcpIiB0aXRsZT0iUHVjZXMiPjxpIGNsYXNzPSJmYXMgZmEtbGlzdC11bCI+PC9pPjwvYnV0dG9uPgo8c3BhbiBjbGFzcz0icnRlLXNlcCI+PC9zcGFuPjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJkb2N1bWVudC5leGVjQ29tbWFuZCgnanVzdGlmeUxlZnQnKSIgdGl0bGU9IkFsaWduZXIgw6AgZ2F1Y2hlIj48aSBjbGFzcz0iZmFzIGZhLWFsaWduLWxlZnQiPjwvaT48L2J1dHRvbj48YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0iZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2p1c3RpZnlDZW50ZXInKSIgdGl0bGU9IkNlbnRyZXIiPjxpIGNsYXNzPSJmYXMgZmEtYWxpZ24tY2VudGVyIj48L2k+PC9idXR0b24+PGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9ImRvY3VtZW50LmV4ZWNDb21tYW5kKCdqdXN0aWZ5RnVsbCcpIiB0aXRsZT0iSnVzdGlmaWVyIj48aSBjbGFzcz0iZmFzIGZhLWFsaWduLWp1c3RpZnkiPjwvaT48L2J1dHRvbj4KPC9kaXY+PGRpdiBpZD0idHBsLXJldSIgY2xhc3M9ImRvYy1lZGl0b3IiIGNvbnRlbnRlZGl0YWJsZT0idHJ1ZSIgc3R5bGU9Im1pbi1oZWlnaHQ6NjBweDtmb250LXNpemU6LjhyZW07Ij48L2Rpdj48L2Rpdj4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgPGRpdj4KICAgICAgICAgICAgICAgICAgICA8bGFiZWwgc3R5bGU9ImZvbnQtc2l6ZTouNzhyZW07Zm9udC13ZWlnaHQ6NjAwO21hcmdpbi1ib3R0b206NHB4O2Rpc3BsYXk6YmxvY2s7Ij48aSBjbGFzcz0iZmFzIGZhLWNsaXBib2FyZC1saXN0IiBzdHlsZT0iY29sb3I6IzJjM2U1MCI+PC9pPiBDb25zZWlsIGRlIERpcmVjdGlvbiAoT0RKKTwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0icnRlLXdyYXAiPjxkaXYgY2xhc3M9InJ0ZS1iYXIiPgo8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0iZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2JvbGQnKSIgdGl0bGU9IkdyYXMiPjxiPkc8L2I+PC9idXR0b24+CjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJkb2N1bWVudC5leGVjQ29tbWFuZCgnaXRhbGljJykiIHRpdGxlPSJJdGFsaXF1ZSI+PGk+STwvaT48L2J1dHRvbj4KPGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9ImRvY3VtZW50LmV4ZWNDb21tYW5kKCdpbnNlcnRVbm9yZGVyZWRMaXN0JykiIHRpdGxlPSJQdWNlcyI+PGkgY2xhc3M9ImZhcyBmYS1saXN0LXVsIj48L2k+PC9idXR0b24+CjxzcGFuIGNsYXNzPSJydGUtc2VwIj48L3NwYW4+PGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9ImRvY3VtZW50LmV4ZWNDb21tYW5kKCdqdXN0aWZ5TGVmdCcpIiB0aXRsZT0iQWxpZ25lciDDoCBnYXVjaGUiPjxpIGNsYXNzPSJmYXMgZmEtYWxpZ24tbGVmdCI+PC9pPjwvYnV0dG9uPjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJkb2N1bWVudC5leGVjQ29tbWFuZCgnanVzdGlmeUNlbnRlcicpIiB0aXRsZT0iQ2VudHJlciI+PGkgY2xhc3M9ImZhcyBmYS1hbGlnbi1jZW50ZXIiPjwvaT48L2J1dHRvbj48YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0iZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2p1c3RpZnlGdWxsJykiIHRpdGxlPSJKdXN0aWZpZXIiPjxpIGNsYXNzPSJmYXMgZmEtYWxpZ24tanVzdGlmeSI+PC9pPjwvYnV0dG9uPgo8L2Rpdj48ZGl2IGlkPSJ0cGwtZGlyIiBjbGFzcz0iZG9jLWVkaXRvciIgY29udGVudGVkaXRhYmxlPSJ0cnVlIiBzdHlsZT0ibWluLWhlaWdodDo2MHB4O2ZvbnQtc2l6ZTouOHJlbTsiPjwvZGl2PjwvZGl2PgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICA8ZGl2PgogICAgICAgICAgICAgICAgICAgIDxsYWJlbCBzdHlsZT0iZm9udC1zaXplOi43OHJlbTtmb250LXdlaWdodDo2MDA7bWFyZ2luLWJvdHRvbTo0cHg7ZGlzcGxheTpibG9jazsiPjxpIGNsYXNzPSJmYXMgZmEtdXNlci1ncmFkdWF0ZSIgc3R5bGU9ImNvbG9yOiMyN2FlNjAiPjwvaT4gU3Vpdmkgw4lsw6h2ZTwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0icnRlLXdyYXAiPjxkaXYgY2xhc3M9InJ0ZS1iYXIiPgo8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0iZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2JvbGQnKSIgdGl0bGU9IkdyYXMiPjxiPkc8L2I+PC9idXR0b24+CjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJkb2N1bWVudC5leGVjQ29tbWFuZCgnaXRhbGljJykiIHRpdGxlPSJJdGFsaXF1ZSI+PGk+STwvaT48L2J1dHRvbj4KPGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9ImRvY3VtZW50LmV4ZWNDb21tYW5kKCdpbnNlcnRVbm9yZGVyZWRMaXN0JykiIHRpdGxlPSJQdWNlcyI+PGkgY2xhc3M9ImZhcyBmYS1saXN0LXVsIj48L2k+PC9idXR0b24+CjxzcGFuIGNsYXNzPSJydGUtc2VwIj48L3NwYW4+PGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9ImRvY3VtZW50LmV4ZWNDb21tYW5kKCdqdXN0aWZ5TGVmdCcpIiB0aXRsZT0iQWxpZ25lciDDoCBnYXVjaGUiPjxpIGNsYXNzPSJmYXMgZmEtYWxpZ24tbGVmdCI+PC9pPjwvYnV0dG9uPjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJkb2N1bWVudC5leGVjQ29tbWFuZCgnanVzdGlmeUNlbnRlcicpIiB0aXRsZT0iQ2VudHJlciI+PGkgY2xhc3M9ImZhcyBmYS1hbGlnbi1jZW50ZXIiPjwvaT48L2J1dHRvbj48YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0iZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2p1c3RpZnlGdWxsJykiIHRpdGxlPSJKdXN0aWZpZXIiPjxpIGNsYXNzPSJmYXMgZmEtYWxpZ24tanVzdGlmeSI+PC9pPjwvYnV0dG9uPgo8L2Rpdj48ZGl2IGlkPSJ0cGwtc3VpdmkiIGNsYXNzPSJkb2MtZWRpdG9yIiBjb250ZW50ZWRpdGFibGU9InRydWUiIHN0eWxlPSJtaW4taGVpZ2h0OjYwcHg7Zm9udC1zaXplOi44cmVtOyI+PC9kaXY+PC9kaXY+CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImJ0biBidG4tYWNjZW50IiBvbmNsaWNrPSJzYXZlVGVtcGxhdGVzKCkiIHN0eWxlPSJhbGlnbi1zZWxmOmZsZXgtc3RhcnQ7Ij48aSBjbGFzcz0iZmFzIGZhLXNhdmUiPjwvaT4gRW5yZWdpc3RyZXIgbGVzIG1vZMOobGVzPC9idXR0b24+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgIDwvZGl2PgoKICAgICAgICA8IS0tIEV4cG9ydCAvIEltcG9ydCAtLT4KICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWNhcmQiIHN0eWxlPSJtYXJnaW4tdG9wOjE2cHg7Ym9yZGVyOjJweCBzb2xpZCAjZTBlN2ZmO2JhY2tncm91bmQ6I2Y4ZmFmZiI+CiAgICAgICAgICAgIDxoMz48aSBjbGFzcz0iZmFzIGZhLWRhdGFiYXNlIiBzdHlsZT0iY29sb3I6IzNCODJGNiI+PC9pPiBTYXV2ZWdhcmRlICYgUmVzdGF1cmF0aW9uIGRlcyBkb25uw6llczwvaDM+CiAgICAgICAgICAgIDxkaXYgc3R5bGU9ImJhY2tncm91bmQ6I2YwZmRmNDtib3JkZXI6MnB4IHNvbGlkICMyMkM1NUU7Ym9yZGVyLXJhZGl1czoxMHB4O3BhZGRpbmc6MTRweCAxOHB4O21hcmdpbi1ib3R0b206MTZweCI+CiAgICAgICAgICAgICAgICA8aDQgc3R5bGU9Im1hcmdpbjowIDAgOHB4O2ZvbnQtc2l6ZTouOXJlbTtjb2xvcjojMTY2NTM0Ij48aSBjbGFzcz0iZmFzIGZhLWhkZCI+PC9pPiBTYXV2ZWdhcmRlIGZpY2hpZXIgbG9jYWw8L2g0PgogICAgICAgICAgICAgICAgPHAgc3R5bGU9ImZvbnQtc2l6ZTouNzhyZW07Y29sb3I6IzU1NTttYXJnaW46MCAwIDEwcHgiPkNob2lzaXNzZXogdW4gZG9zc2llciBzdXIgdm90cmUgZGlzcXVlLCByw6lzZWF1LCBvdSBjbG91ZCAoT25lRHJpdmUsIEdvb2dsZSBEcml2ZeKApikuIExlIGZpY2hpZXIgPHN0cm9uZz5jYWRpcl9kYXRhLmpzb248L3N0cm9uZz4geSBzZXJhIGNyw6nDqSBldCBtaXMgw6Agam91ciBhdXRvbWF0aXF1ZW1lbnQuPC9wPgogICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iZGlzcGxheTpmbGV4O2dhcDoxMHB4O2FsaWduLWl0ZW1zOmNlbnRlcjtmbGV4LXdyYXA6d3JhcCI+CiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYnRuIiBvbmNsaWNrPSJ3aW5kb3cucGlja1NhdmVGaWxlKCkiIHN0eWxlPSJiYWNrZ3JvdW5kOiMxNjY1MzQ7Y29sb3I6I2ZmZjtmb250LXNpemU6LjhyZW0iPjxpIGNsYXNzPSJmYXMgZmEtZm9sZGVyLW9wZW4iPjwvaT4gQ2hvaXNpciB1biBkb3NzaWVyPC9idXR0b24+CiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYnRuIiBvbmNsaWNrPSJ3aW5kb3cucGlja0V4aXN0aW5nRmlsZSgpIiBzdHlsZT0iYmFja2dyb3VuZDojMjU2M0VCO2NvbG9yOiNmZmY7Zm9udC1zaXplOi44cmVtIj48aSBjbGFzcz0iZmFzIGZhLWZpbGUtaW1wb3J0Ij48L2k+IE91dnJpciB1biBmaWNoaWVyIGV4aXN0YW50PC9idXR0b24+CiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYnRuIiBpZD0iZmlsZS11bmxpbmstYnRuIiBvbmNsaWNrPSJ3aW5kb3cudW5saW5rRmlsZSgpIiBzdHlsZT0iYmFja2dyb3VuZDojZGMyNjI2O2NvbG9yOiNmZmY7Zm9udC1zaXplOi43NXJlbTtkaXNwbGF5Om5vbmUiPjxpIGNsYXNzPSJmYXMgZmEtdW5saW5rIj48L2k+IETDqWxpZXI8L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICA8c3BhbiBpZD0iZmlsZS1saW5rLXN0YXR1cyIgc3R5bGU9ImZvbnQtc2l6ZTouOHJlbSI+PGkgY2xhc3M9ImZhcyBmYS11bmxpbmsiIHN0eWxlPSJjb2xvcjojYWFhIj48L2k+IDxzcGFuIHN0eWxlPSJjb2xvcjojOTk5Ij5BdWN1biBmaWNoaWVyIGxpw6k8L3NwYW4+PC9zcGFuPgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICA8cCBzdHlsZT0iZm9udC1zaXplOi42OHJlbTtjb2xvcjojODg4O21hcmdpbjo4cHggMCAwIj48aSBjbGFzcz0iZmFzIGZhLWluZm8tY2lyY2xlIj48L2k+IExlIGZpY2hpZXIgcGV1dCDDqnRyZSBzdXIgdm90cmUgZGlzcXVlLCB1biByw6lzZWF1IHBhcnRhZ8OpLCBHb29nbGUgRHJpdmUsIE9uZURyaXZlLCBldGMuIEZvbmN0aW9ubmUgYXZlYyBDaHJvbWUgZXQgRWRnZS48L3A+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8cCBzdHlsZT0iZm9udC1zaXplOi44cmVtO2NvbG9yOiM2NjY7bWFyZ2luOjAgMCAxMnB4Ij5Wb3VzIHBvdXZleiBhdXNzaSBleHBvcnRlci9pbXBvcnRlciBtYW51ZWxsZW1lbnQgOjwvcD4KICAgICAgICAgICAgPGRpdiBzdHlsZT0iZGlzcGxheTpmbGV4O2dhcDoxMHB4O2ZsZXgtd3JhcDp3cmFwO2FsaWduLWl0ZW1zOmNlbnRlciI+CiAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJidG4gYnRuLWFjY2VudCIgb25jbGljaz0id2luZG93LmV4cG9ydERhdGEoKSIgc3R5bGU9ImJhY2tncm91bmQ6IzNCODJGNiI+PGkgY2xhc3M9ImZhcyBmYS1kb3dubG9hZCI+PC9pPiBFeHBvcnRlciBKU09OPC9idXR0b24+CiAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJidG4iIG9uY2xpY2s9ImRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbXBvcnQtZmlsZScpLmNsaWNrKCkiIHN0eWxlPSJiYWNrZ3JvdW5kOiMyMkM1NUU7Y29sb3I6I2ZmZiI+PGkgY2xhc3M9ImZhcyBmYS11cGxvYWQiPjwvaT4gSW1wb3J0ZXIgSlNPTjwvYnV0dG9uPgogICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9ImZpbGUiIGlkPSJpbXBvcnQtZmlsZSIgYWNjZXB0PSIuanNvbiIgc3R5bGU9ImRpc3BsYXk6bm9uZSIgb25jaGFuZ2U9ImltcG9ydERhdGEodGhpcykiPgogICAgICAgICAgICAgICAgPHNwYW4gaWQ9Imxhc3QtZXhwb3J0IiBzdHlsZT0iZm9udC1zaXplOi43cmVtO2NvbG9yOiM5OTkiPjwvc3Bhbj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDxwIHN0eWxlPSJmb250LXNpemU6LjdyZW07Y29sb3I6Izk5OTttYXJnaW46OHB4IDAgMCI+PGkgY2xhc3M9ImZhcyBmYS1pbmZvLWNpcmNsZSI+PC9pPiBMZSBmaWNoaWVyIGV4cG9ydMOpIHBldXQgw6p0cmUgc3RvY2vDqSBzdXIgdW4gcsOpc2VhdSwgdW5lIGNsw6kgVVNCLCB1biBGVFAsIEdvb2dsZSBEcml2ZSwgZXRjLjwvcD4KICAgICAgICA8L2Rpdj4KCiAgICA8L2Rpdj4KICAgIDwvZGl2PgoKICAgIDxkaXYgaWQ9Im1lbnUyIiBjbGFzcz0ic2VjdGlvbiI+CiAgICAgICAgPGRpdiBpZD0idG9kby10b2RheS16b25lIiBjbGFzcz0idG9kby10b2RheS16b25lIj4KICAgICAgICAgICAgPGRpdiBzdHlsZT0iZm9udC13ZWlnaHQ6Ym9sZDsgY29sb3I6I2QzNTQwMDsgbWFyZ2luLWJvdHRvbToxMHB4OyBkaXNwbGF5OmZsZXg7IGFsaWduLWl0ZW1zOmNlbnRlcjsgZ2FwOjEwcHg7Ij48aSBjbGFzcz0iZmFzIGZhLWJlbGwgZmEtbGciPjwvaT4gQUdFTkRBIERVIEpPVVIgKEdsaXNzZXotbGVzIGRhbnMgdm9zIGNvbG9ubmVzKTwvZGl2PgogICAgICAgICAgICA8ZGl2IGlkPSJ0b2RvLXRvZGF5LWxpc3QiPjwvZGl2PgogICAgICAgIDwvZGl2PgogICAgICAgIDxkaXYgY2xhc3M9InRvZG8tZ3JpZCI+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9InRvZG8tYm94IHRvZG8tdXJnZW50Ij4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InRvZG8taGVhZGVyIj48aDMgc3R5bGU9ImNvbG9yOnZhcigtLWhpZ2hsaWdodCkiPlVSR0VOVDwvaDM+PC9kaXY+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJ0b2RvLWlucHV0LWdyb3VwIj48aW5wdXQgdHlwZT0idGV4dCIgaWQ9InRvZG8taW5wdXQtdXJnZW50IiBwbGFjZWhvbGRlcj0iQWpvdXRlci4uLiIgb25rZXlwcmVzcz0iaGFuZGxlRW50ZXIoZXZlbnQsICd1cmdlbnQnKSI+PGJ1dHRvbiBjbGFzcz0iYnRuIGJ0bi1kYW5nZXIgYnRuLXNtIiBvbmNsaWNrPSJhZGRUb2RvKCd1cmdlbnQnKSI+KzwvYnV0dG9uPjwvZGl2PgogICAgICAgICAgICAgICAgPHVsIGNsYXNzPSJ0b2RvLWxpc3QiIGlkPSJsaXN0LXVyZ2VudCIgb25kcm9wPSJkcm9wKGV2ZW50LCAndXJnZW50JykiIG9uZHJhZ292ZXI9ImFsbG93RHJvcChldmVudCkiPjwvdWw+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJ0b2RvLWJveCB0b2RvLXBsYW4iPgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0idG9kby1oZWFkZXIiPjxoMyBzdHlsZT0iY29sb3I6dmFyKC0tcHJpbWFyeSkiPkEgUExBTklGSUVSPC9oMz48L2Rpdj4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InRvZG8taW5wdXQtZ3JvdXAiPjxpbnB1dCB0eXBlPSJ0ZXh0IiBpZD0idG9kby1pbnB1dC1wbGFuIiBwbGFjZWhvbGRlcj0iQWpvdXRlci4uLiIgb25rZXlwcmVzcz0iaGFuZGxlRW50ZXIoZXZlbnQsICdwbGFuJykiPjxidXR0b24gY2xhc3M9ImJ0biBidG4tcHJpbWFyeSBidG4tc20iIG9uY2xpY2s9ImFkZFRvZG8oJ3BsYW4nKSI+KzwvYnV0dG9uPjwvZGl2PgogICAgICAgICAgICAgICAgPHVsIGNsYXNzPSJ0b2RvLWxpc3QiIGlkPSJsaXN0LXBsYW4iIG9uZHJvcD0iZHJvcChldmVudCwgJ3BsYW4nKSIgb25kcmFnb3Zlcj0iYWxsb3dEcm9wKGV2ZW50KSI+PC91bD4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9InRvZG8tYm94IHRvZG8tcG9zc2libGUiPgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0idG9kby1oZWFkZXIiPjxoMyBzdHlsZT0iY29sb3I6dmFyKC0tc3VjY2VzcykiPlNJIFBPU1NJQkxFPC9oMz48L2Rpdj4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InRvZG8taW5wdXQtZ3JvdXAiPjxpbnB1dCB0eXBlPSJ0ZXh0IiBpZD0idG9kby1pbnB1dC1wb3NzaWJsZSIgcGxhY2Vob2xkZXI9IkFqb3V0ZXIuLi4iIG9ua2V5cHJlc3M9ImhhbmRsZUVudGVyKGV2ZW50LCAncG9zc2libGUnKSI+PGJ1dHRvbiBjbGFzcz0iYnRuIGJ0bi1zdWNjZXNzIGJ0bi1zbSIgb25jbGljaz0iYWRkVG9kbygncG9zc2libGUnKSI+KzwvYnV0dG9uPjwvZGl2PgogICAgICAgICAgICAgICAgPHVsIGNsYXNzPSJ0b2RvLWxpc3QiIGlkPSJsaXN0LXBvc3NpYmxlIiBvbmRyb3A9ImRyb3AoZXZlbnQsICdwb3NzaWJsZScpIiBvbmRyYWdvdmVyPSJhbGxvd0Ryb3AoZXZlbnQpIj48L3VsPgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0idG9kby1ib3ggdG9kby1kZWxlZ2F0ZSI+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJ0b2RvLWhlYWRlciI+PGgzIHN0eWxlPSJjb2xvcjp2YXIoLS13YXJuaW5nKSI+QSBERUxFR1VFUjwvaDM+PC9kaXY+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJ0b2RvLWlucHV0LWdyb3VwIj48aW5wdXQgdHlwZT0idGV4dCIgaWQ9InRvZG8taW5wdXQtZGVsZWdhdGUiIHBsYWNlaG9sZGVyPSJBam91dGVyLi4uIiBvbmtleXByZXNzPSJoYW5kbGVFbnRlcihldmVudCwgJ2RlbGVnYXRlJykiPjxidXR0b24gY2xhc3M9ImJ0biBidG4tZGFyayBidG4tc20iIHN0eWxlPSJiYWNrZ3JvdW5kOnZhcigtLXdhcm5pbmcpO2JvcmRlcjpub25lIiBvbmNsaWNrPSJhZGRUb2RvKCdkZWxlZ2F0ZScpIj4rPC9idXR0b24+PC9kaXY+CiAgICAgICAgICAgICAgICA8dWwgY2xhc3M9InRvZG8tbGlzdCIgaWQ9Imxpc3QtZGVsZWdhdGUiIG9uZHJvcD0iZHJvcChldmVudCwgJ2RlbGVnYXRlJykiIG9uZHJhZ292ZXI9ImFsbG93RHJvcChldmVudCkiPjwvdWw+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgIDwvZGl2PgogICAgPC9kaXY+CgogICAgPGRpdiBpZD0ibWVudTMiIGNsYXNzPSJzZWN0aW9uIGFjdGl2ZSI+CiAgICAgICAgPCEtLSBDYWxlbmRyaWVyIFVuaWZpw6kgVjEyLjEzIC0tPgogICAgICAgIDxkaXYgY2xhc3M9InVjYWwtaGVhZGVyIj4KICAgICAgICAgICAgPGJ1dHRvbiBvbmNsaWNrPSJ1Y2FsUHJldigpIiBjbGFzcz0idWNhbC1uYXYtYnRuIj48aSBjbGFzcz0iZmFzIGZhLWNoZXZyb24tbGVmdCI+PC9pPjwvYnV0dG9uPgogICAgICAgICAgICA8aDMgY2xhc3M9InVjYWwtdGl0bGUiIGlkPSJ1Y2FsLXRpdGxlIj7igJQ8L2gzPgogICAgICAgICAgICA8YnV0dG9uIG9uY2xpY2s9InVjYWxOZXh0KCkiIGNsYXNzPSJ1Y2FsLW5hdi1idG4iPjxpIGNsYXNzPSJmYXMgZmEtY2hldnJvbi1yaWdodCI+PC9pPjwvYnV0dG9uPgogICAgICAgICAgICA8YnV0dG9uIG9uY2xpY2s9InVjYWxUb2RheSgpIiBjbGFzcz0idWNhbC1idG4tdG9kYXkiPkF1am91cmQnaHVpPC9idXR0b24+CiAgICAgICAgICAgIDxkaXYgc3R5bGU9ImZsZXg6MSI+PC9kaXY+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9InVjYWwtbGVnZW5kIiBpZD0idWNhbC1sZWdlbmQiPjwvZGl2PgogICAgICAgICAgICA8YnV0dG9uIG9uY2xpY2s9Im9wZW5VY2FsQWRkTW9kYWwoKSIgY2xhc3M9InVjYWwtYnRuLWFkZCI+PGkgY2xhc3M9ImZhcyBmYS1wbHVzIj48L2k+IEFqb3V0ZXI8L2J1dHRvbj4KICAgICAgICAgICAgPGJ1dHRvbiBvbmNsaWNrPSJ1Y2FsUmVmcmVzaCgpIiBjbGFzcz0idWNhbC1idG4tcmVmcmVzaCIgdGl0bGU9IlN5bmNocm9uaXNlciBHb29nbGUgQWdlbmRhIj48aSBjbGFzcz0iZmFzIGZhLXN5bmMiPjwvaT48L2J1dHRvbj4KICAgICAgICA8L2Rpdj4KICAgICAgICA8ZGl2IGlkPSJ1Y2FsLWJvZHkiPjwvZGl2PgoKICAgICAgICA8IS0tIE1vZGFsIEFqb3V0L0VkaXQgw6l2w6luZW1lbnQgLS0+CiAgICAgICAgPGRpdiBpZD0idWNhbE1vZGFsIiBjbGFzcz0ibS1vdiIgb25jbGljaz0iaWYoZXZlbnQudGFyZ2V0PT09dGhpcyljbG9zZVVjYWxNb2RhbCgpIiBzdHlsZT0iZGlzcGxheTpub25lIj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0ibS1ib3giIHN0eWxlPSJ3aWR0aDo0ODBweDsiPgogICAgICAgICAgICAgICAgPGgzPjxpIGNsYXNzPSJmYXMgZmEtY2FsZW5kYXItcGx1cyI+PC9pPiA8c3BhbiBpZD0idWNhbC1tb2RhbC10aXRsZSI+Tm91dmVsIMOpdsOpbmVtZW50PC9zcGFuPjwvaDM+CiAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0iaGlkZGVuIiBpZD0idWNhbC1laWQiPgogICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9ImhpZGRlbiIgaWQ9InVjYWwtZXNyYyI+CiAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0iaGlkZGVuIiBpZD0idWNhbC1lY2FsaWQiPgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ibS1yb3ciPgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAiPjxsYWJlbD5EYXRlICo8L2xhYmVsPjxpbnB1dCB0eXBlPSJkYXRlIiBpZD0idWNhbC1kYXRlIiBjbGFzcz0iZm9ybS1jb250cm9sIj48L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWdyb3VwIj48bGFiZWw+SGV1cmUgZMOpYnV0PC9sYWJlbD48aW5wdXQgdHlwZT0idGltZSIgaWQ9InVjYWwtdGltZSIgY2xhc3M9ImZvcm0tY29udHJvbCI+PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1ncm91cCI+PGxhYmVsPkhldXJlIGZpbjwvbGFiZWw+PGlucHV0IHR5cGU9InRpbWUiIGlkPSJ1Y2FsLWVuZHRpbWUiIGNsYXNzPSJmb3JtLWNvbnRyb2wiPjwvZGl2PgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWdyb3VwIiBzdHlsZT0ibWFyZ2luLWJvdHRvbToxMHB4Ij48bGFiZWw+SW50aXR1bMOpICo8L2xhYmVsPjxpbnB1dCB0eXBlPSJ0ZXh0IiBpZD0idWNhbC10YXNrIiBjbGFzcz0iZm9ybS1jb250cm9sIiBwbGFjZWhvbGRlcj0iRXg6IENvbnNlaWwgZGUgY2xhc3NlIFQzIj48L2Rpdj4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAiIHN0eWxlPSJtYXJnaW4tYm90dG9tOjE0cHgiIGlkPSJ1Y2FsLWRlc3Qtd3JhcCI+CiAgICAgICAgICAgICAgICAgICAgPGxhYmVsPkVucmVnaXN0cmVyIGRhbnM8L2xhYmVsPgogICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9ImRpc3BsYXk6ZmxleDtnYXA6OHB4O2ZsZXgtd3JhcDp3cmFwIiBpZD0idWNhbC1kZXN0LWJ0bnMiPgogICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9InVjYWwtZGVzdC1vcHQgYWN0aXZlIiBkYXRhLWRlc3Q9ImxvY2FsIj48aW5wdXQgdHlwZT0icmFkaW8iIG5hbWU9InVjYWwtZGVzdCIgdmFsdWU9ImxvY2FsIiBjaGVja2VkPjxpIGNsYXNzPSJmYXMgZmEtZGF0YWJhc2UiIHN0eWxlPSJjb2xvcjojMzQ5OGRiIj48L2k+IEFnZW5kYSBsb2NhbDwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz0idWNhbC1kZXN0LW9wdCIgZGF0YS1kZXN0PSJnY2FsIj48aW5wdXQgdHlwZT0icmFkaW8iIG5hbWU9InVjYWwtZGVzdCIgdmFsdWU9ImdjYWwiPjxpIGNsYXNzPSJmYWIgZmEtZ29vZ2xlIiBzdHlsZT0iY29sb3I6IzQyODVmNCI+PC9pPiBHb29nbGUgQWdlbmRhPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPSJ1Y2FsLWRlc3Qtb3B0IiBkYXRhLWRlc3Q9Im91dGxvb2siIHN0eWxlPSJkaXNwbGF5Om5vbmUiPjxpbnB1dCB0eXBlPSJyYWRpbyIgbmFtZT0idWNhbC1kZXN0IiB2YWx1ZT0ib3V0bG9vayI+PGkgY2xhc3M9ImZhYiBmYS1taWNyb3NvZnQiIHN0eWxlPSJjb2xvcjojMDA3OGQ0Ij48L2k+IE91dGxvb2s8L2xhYmVsPgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgIDxzZWxlY3QgaWQ9InVjYWwtZ2NhbC10YXJnZXQiIGNsYXNzPSJmb3JtLWNvbnRyb2wiIHN0eWxlPSJkaXNwbGF5Om5vbmU7bWFyZ2luLXRvcDo2cHg7Zm9udC1zaXplOi43OHJlbTsiPgogICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSIiPuKAlCBDaG9pc2lyIHVuIGFnZW5kYSDigJQ8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICA8L3NlbGVjdD4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ic2F2ZS1iYXIiPgogICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImJ0biIgb25jbGljaz0iY2xvc2VVY2FsTW9kYWwoKSIgc3R5bGU9ImJhY2tncm91bmQ6I2VlZTtjb2xvcjojNTU1O21hcmdpbi1yaWdodDo4cHg7Ij5Bbm51bGVyPC9idXR0b24+CiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYnRuIGJ0bi1hY2NlbnQiIG9uY2xpY2s9InNhdmVVY2FsRXZlbnQoKSI+PGkgY2xhc3M9ImZhcyBmYS1zYXZlIj48L2k+IEVucmVnaXN0cmVyPC9idXR0b24+CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgPC9kaXY+CiAgICA8L2Rpdj4KCiAgICA8ZGl2IGlkPSJtZW51NCIgY2xhc3M9InNlY3Rpb24iPgogICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tY2FyZCI+CiAgICAgICAgICAgIDxkaXYgc3R5bGU9ImRpc3BsYXk6ZmxleDsganVzdGlmeS1jb250ZW50OnNwYWNlLWJldHdlZW47IGFsaWduLWl0ZW1zOmNlbnRlcjsiPgogICAgICAgICAgICAgICAgPGgzIHN0eWxlPSJjb2xvcjp2YXIoLS1wcmltYXJ5KSI+UsOpdW5pb24gZGUgRGlyZWN0aW9uPC9oMz4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImFjdGlvbi1yb3ciPgogICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImJ0biBidG4td2FybmluZyBidG4tc20iIG9uY2xpY2s9InJhelBhZ2UoJ0RJUicpIj48aSBjbGFzcz0iZmFzIGZhLWVyYXNlciI+PC9pPiBSQVo8L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJidG4gYnRuLXdvcmQgYnRuLXNtIiBvbmNsaWNrPSJleHBvcnREb2NXb3JkKCdQUkVQX0RJUicpIj48aSBjbGFzcz0iZmFzIGZhLWZpbGUtd29yZCI+PC9pPiBXb3JkPC9idXR0b24+CiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYnRuIGJ0bi1kYXJrIGJ0bi1zbSIgb25jbGljaz0icHJpbnRDdXJyZW50Rm9ybSgnUFJFUF9ESVInKSI+PGkgY2xhc3M9ImZhcyBmYS1wcmludCI+PC9pPiBQREY8L2J1dHRvbj4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1ncmlkIiBzdHlsZT0ibWFyZ2luLXRvcDoxNXB4OyI+PGRpdiBjbGFzcz0iZm9ybS1ncm91cCI+PGxhYmVsPkRhdGU8L2xhYmVsPjxpbnB1dCB0eXBlPSJkYXRlIiBpZD0iZGlyLWRhdGUiIGNsYXNzPSJmb3JtLWNvbnRyb2wiPjwvZGl2PjxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAiPjxsYWJlbD5QYXJ0aWNpcGFudHM8L2xhYmVsPjxpbnB1dCB0eXBlPSJ0ZXh0IiBpZD0iZGlyLXBhcnRzIiBjbGFzcz0iZm9ybS1jb250cm9sIiBwbGFjZWhvbGRlcj0iQWRqLCBDUEUsIERERlBULi4uIj48L2Rpdj48L2Rpdj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1mdWxsIj48bGFiZWwgc3R5bGU9ImNvbG9yOnZhcigtLXByaW1hcnkpOyBmb250LXNpemU6MXJlbTsgYm9yZGVyLWJvdHRvbToycHggc29saWQgI2VlZTsgcGFkZGluZy1ib3R0b206NXB4OyBtYXJnaW4tYm90dG9tOjEwcHg7Ij48aSBjbGFzcz0iZmFzIGZhLWxpc3QtdWwiPjwvaT4gUHLDqXBhcmF0aW9uIDogVGjDqG1lcyAmIFN1amV0czwvbGFiZWw+PGRpdiBjbGFzcz0icnRlLXdyYXAiPjxkaXYgY2xhc3M9InJ0ZS1iYXIiPgo8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0iZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2JvbGQnKSIgdGl0bGU9IkdyYXMiPjxiPkc8L2I+PC9idXR0b24+CjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJkb2N1bWVudC5leGVjQ29tbWFuZCgnaXRhbGljJykiIHRpdGxlPSJJdGFsaXF1ZSI+PGk+STwvaT48L2J1dHRvbj4KPGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9ImRvY3VtZW50LmV4ZWNDb21tYW5kKCd1bmRlcmxpbmUnKSIgdGl0bGU9IlNvdWxpZ27DqSI+PHU+UzwvdT48L2J1dHRvbj4KPHNwYW4gY2xhc3M9InJ0ZS1zZXAiPjwvc3Bhbj4KPGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9ImRvY3VtZW50LmV4ZWNDb21tYW5kKCdpbnNlcnRVbm9yZGVyZWRMaXN0JykiIHRpdGxlPSJMaXN0ZSDDoCBwdWNlcyI+PGkgY2xhc3M9ImZhcyBmYS1saXN0LXVsIj48L2k+PC9idXR0b24+CjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJkb2N1bWVudC5leGVjQ29tbWFuZCgnaW5zZXJ0T3JkZXJlZExpc3QnKSIgdGl0bGU9Ikxpc3RlIG51bcOpcm90w6llIj48aSBjbGFzcz0iZmFzIGZhLWxpc3Qtb2wiPjwvaT48L2J1dHRvbj4KPHNwYW4gY2xhc3M9InJ0ZS1zZXAiPjwvc3Bhbj4KPGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9InJ0ZUNvbG9yKHRoaXMpIiB0aXRsZT0iQ291bGV1ciI+PGkgY2xhc3M9ImZhcyBmYS1wYWxldHRlIj48L2k+PC9idXR0b24+CjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJydGVMaW5rKHRoaXMpIiB0aXRsZT0iTGllbiI+PGkgY2xhc3M9ImZhcyBmYS1saW5rIj48L2k+PC9idXR0b24+CjxzcGFuIGNsYXNzPSJydGUtc2VwIj48L3NwYW4+CjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJkb2N1bWVudC5leGVjQ29tbWFuZCgndW5kbycpIiB0aXRsZT0iQW5udWxlciI+PGkgY2xhc3M9ImZhcyBmYS11bmRvIj48L2k+PC9idXR0b24+CjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJkb2N1bWVudC5leGVjQ29tbWFuZCgncmVkbycpIiB0aXRsZT0iUmVzdGF1cmVyIj48aSBjbGFzcz0iZmFzIGZhLXJlZG8iPjwvaT48L2J1dHRvbj48c3BhbiBjbGFzcz0icnRlLXNlcCI+PC9zcGFuPjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJydGVJbnNlcnRMb2dvKCkiIHRpdGxlPSJJbnPDqXJlciBsZSBsb2dvIj48aSBjbGFzcz0iZmFzIGZhLXN0YW1wIiBzdHlsZT0iY29sb3I6I2U2N2UyMiI+PC9pPjwvYnV0dG9uPgo8c3BhbiBjbGFzcz0icnRlLXNlcCI+PC9zcGFuPjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJkb2N1bWVudC5leGVjQ29tbWFuZCgnanVzdGlmeUxlZnQnKSIgdGl0bGU9IkFsaWduZXIgw6AgZ2F1Y2hlIj48aSBjbGFzcz0iZmFzIGZhLWFsaWduLWxlZnQiPjwvaT48L2J1dHRvbj48YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0iZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2p1c3RpZnlDZW50ZXInKSIgdGl0bGU9IkNlbnRyZXIiPjxpIGNsYXNzPSJmYXMgZmEtYWxpZ24tY2VudGVyIj48L2k+PC9idXR0b24+PGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9ImRvY3VtZW50LmV4ZWNDb21tYW5kKCdqdXN0aWZ5RnVsbCcpIiB0aXRsZT0iSnVzdGlmaWVyIj48aSBjbGFzcz0iZmFzIGZhLWFsaWduLWp1c3RpZnkiPjwvaT48L2J1dHRvbj4KPC9kaXY+PGRpdiBpZD0iZGlyLWNvbnRlbnUiIGNsYXNzPSJkb2MtZWRpdG9yIiBjb250ZW50ZWRpdGFibGU9InRydWUiPjwvZGl2PjwvZGl2PjwvZGl2PgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWZ1bGwiIHN0eWxlPSJtYXJnaW4tdG9wOiAzMHB4OyI+PGxhYmVsIHN0eWxlPSJjb2xvcjp2YXIoLS1hY2NlbnQpOyBmb250LXNpemU6MXJlbTsgYm9yZGVyLWJvdHRvbToycHggc29saWQgI2VlZTsgcGFkZGluZy1ib3R0b206NXB4OyBtYXJnaW4tYm90dG9tOjEwcHg7Ij48aSBjbGFzcz0iZmFzIGZhLXBlbi1hbHQiPjwvaT4gU8OpYW5jZSA6IE5vdGVzICYgRMOpY2lzaW9uczwvbGFiZWw+PGRpdiBjbGFzcz0icnRlLXdyYXAiPjxkaXYgY2xhc3M9InJ0ZS1iYXIiPgo8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0iZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2JvbGQnKSIgdGl0bGU9IkdyYXMiPjxiPkc8L2I+PC9idXR0b24+CjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJkb2N1bWVudC5leGVjQ29tbWFuZCgnaXRhbGljJykiIHRpdGxlPSJJdGFsaXF1ZSI+PGk+STwvaT48L2J1dHRvbj4KPGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9ImRvY3VtZW50LmV4ZWNDb21tYW5kKCd1bmRlcmxpbmUnKSIgdGl0bGU9IlNvdWxpZ27DqSI+PHU+UzwvdT48L2J1dHRvbj4KPHNwYW4gY2xhc3M9InJ0ZS1zZXAiPjwvc3Bhbj4KPGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9ImRvY3VtZW50LmV4ZWNDb21tYW5kKCdpbnNlcnRVbm9yZGVyZWRMaXN0JykiIHRpdGxlPSJMaXN0ZSDDoCBwdWNlcyI+PGkgY2xhc3M9ImZhcyBmYS1saXN0LXVsIj48L2k+PC9idXR0b24+CjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJkb2N1bWVudC5leGVjQ29tbWFuZCgnaW5zZXJ0T3JkZXJlZExpc3QnKSIgdGl0bGU9Ikxpc3RlIG51bcOpcm90w6llIj48aSBjbGFzcz0iZmFzIGZhLWxpc3Qtb2wiPjwvaT48L2J1dHRvbj4KPHNwYW4gY2xhc3M9InJ0ZS1zZXAiPjwvc3Bhbj4KPGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9InJ0ZUNvbG9yKHRoaXMpIiB0aXRsZT0iQ291bGV1ciI+PGkgY2xhc3M9ImZhcyBmYS1wYWxldHRlIj48L2k+PC9idXR0b24+CjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJydGVMaW5rKHRoaXMpIiB0aXRsZT0iTGllbiI+PGkgY2xhc3M9ImZhcyBmYS1saW5rIj48L2k+PC9idXR0b24+CjxzcGFuIGNsYXNzPSJydGUtc2VwIj48L3NwYW4+CjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJkb2N1bWVudC5leGVjQ29tbWFuZCgndW5kbycpIiB0aXRsZT0iQW5udWxlciI+PGkgY2xhc3M9ImZhcyBmYS11bmRvIj48L2k+PC9idXR0b24+CjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJkb2N1bWVudC5leGVjQ29tbWFuZCgncmVkbycpIiB0aXRsZT0iUmVzdGF1cmVyIj48aSBjbGFzcz0iZmFzIGZhLXJlZG8iPjwvaT48L2J1dHRvbj48c3BhbiBjbGFzcz0icnRlLXNlcCI+PC9zcGFuPjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJydGVJbnNlcnRMb2dvKCkiIHRpdGxlPSJJbnPDqXJlciBsZSBsb2dvIj48aSBjbGFzcz0iZmFzIGZhLXN0YW1wIiBzdHlsZT0iY29sb3I6I2U2N2UyMiI+PC9pPjwvYnV0dG9uPgo8c3BhbiBjbGFzcz0icnRlLXNlcCI+PC9zcGFuPjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJkb2N1bWVudC5leGVjQ29tbWFuZCgnanVzdGlmeUxlZnQnKSIgdGl0bGU9IkFsaWduZXIgw6AgZ2F1Y2hlIj48aSBjbGFzcz0iZmFzIGZhLWFsaWduLWxlZnQiPjwvaT48L2J1dHRvbj48YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0iZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2p1c3RpZnlDZW50ZXInKSIgdGl0bGU9IkNlbnRyZXIiPjxpIGNsYXNzPSJmYXMgZmEtYWxpZ24tY2VudGVyIj48L2k+PC9idXR0b24+PGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9ImRvY3VtZW50LmV4ZWNDb21tYW5kKCdqdXN0aWZ5RnVsbCcpIiB0aXRsZT0iSnVzdGlmaWVyIj48aSBjbGFzcz0iZmFzIGZhLWFsaWduLWp1c3RpZnkiPjwvaT48L2J1dHRvbj4KPC9kaXY+PGRpdiBpZD0iZGlyLW5vdGVzIiBjbGFzcz0iZG9jLWVkaXRvciBub3Rlcy1lZGl0b3IiIGNvbnRlbnRlZGl0YWJsZT0idHJ1ZSI+PC9kaXY+PC9kaXY+PC9kaXY+CiAgICAgICAgICAgIAogICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWZ1bGwgYXR0YWNobWVudHMtYXJlYSI+CiAgICAgICAgICAgICAgICA8bGFiZWw+PGkgY2xhc3M9ImZhcyBmYS1wYXBlcmNsaXAiPjwvaT4gUGnDqGNlcyBqb2ludGVzIC8gRG9jdW1lbnRzIGxpw6lzPC9sYWJlbD4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZpbGUtd2FybmluZyI+TGltaXRlIGNvbnNlaWxsw6llIDogZmljaGllcnMgbMOpZ2VycyBvdSBsaWVucy4gR3JvcyBmaWNoaWVycyA9IHJpc3F1ZSBkZSByYWxlbnRpc3NlbWVudC48L2Rpdj4KICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJmaWxlIiBpZD0iZGlyLWZpbGUtaW5wdXQiIGNsYXNzPSJmb3JtLWNvbnRyb2wiIG9uY2hhbmdlPSJhZGRBdHRhY2htZW50KCdkaXItYXR0YWNobWVudHMnLCB0aGlzKSI+CiAgICAgICAgICAgICAgICA8dWwgaWQ9ImRpci1hdHRhY2htZW50cyIgY2xhc3M9ImF0dGFjaG1lbnQtbGlzdCI+PC91bD4KICAgICAgICAgICAgPC9kaXY+CgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJzYXZlLWJhciI+PGJ1dHRvbiBpZD0iYnRuLXNhdmUtZGlyIiBjbGFzcz0iYnRuIGJ0bi1wcmltYXJ5IiBvbmNsaWNrPSJzYXZlUHJlcERpcmVjdGlvbigpIj48aSBjbGFzcz0iZmFzIGZhLXNhdmUiIHN0eWxlPSJtYXJnaW4tcmlnaHQ6NnB4Ij48L2k+RW5yZWdpc3RyZXIgKEhpc3RvcmlxdWUpPC9idXR0b24+PC9kaXY+CiAgICAgICAgPC9kaXY+CiAgICA8L2Rpdj4KCiAgICA8ZGl2IGlkPSJtZW51NSIgY2xhc3M9InNlY3Rpb24iPgogICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tY2FyZCI+CiAgICAgICAgICAgIDxkaXYgc3R5bGU9ImRpc3BsYXk6ZmxleDsganVzdGlmeS1jb250ZW50OnNwYWNlLWJldHdlZW47IGFsaWduLWl0ZW1zOmNlbnRlcjsiPgogICAgICAgICAgICAgICAgPGgzIHN0eWxlPSJjb2xvcjp2YXIoLS1pbmZvKSI+U3Vpdmkgw4lsw6h2ZSAvIFBvaW50IENQRTwvaDM+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJhY3Rpb24tcm93Ij4KICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJidG4gYnRuLXdhcm5pbmcgYnRuLXNtIiBvbmNsaWNrPSJyYXpQYWdlKCdTVUlWSScpIj48aSBjbGFzcz0iZmFzIGZhLWVyYXNlciI+PC9pPiBSQVo8L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJidG4gYnRuLXdvcmQgYnRuLXNtIiBvbmNsaWNrPSJleHBvcnREb2NXb3JkKCdTVUlWSScpIj48aSBjbGFzcz0iZmFzIGZhLWZpbGUtd29yZCI+PC9pPiBXb3JkPC9idXR0b24+CiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYnRuIGJ0bi1kYXJrIGJ0bi1zbSIgb25jbGljaz0icHJpbnRDdXJyZW50Rm9ybSgnU1VJVkknKSI+PGkgY2xhc3M9ImZhcyBmYS1wcmludCI+PC9pPiBQREY8L2J1dHRvbj4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1ncmlkIiBzdHlsZT0ibWFyZ2luLXRvcDoxNXB4OyI+PGRpdiBjbGFzcz0iZm9ybS1ncm91cCI+PGxhYmVsPkRhdGU8L2xhYmVsPjxpbnB1dCB0eXBlPSJkYXRlIiBpZD0ic3VpdmktZGF0ZSIgY2xhc3M9ImZvcm0tY29udHJvbCI+PC9kaXY+PGRpdiBjbGFzcz0iZm9ybS1ncm91cCI+PGxhYmVsPlBhcnRpY2lwYW50cyAoQ1BFLCBQcm9mcy4uLik8L2xhYmVsPjxpbnB1dCB0eXBlPSJ0ZXh0IiBpZD0ic3VpdmktcGFydHMiIGNsYXNzPSJmb3JtLWNvbnRyb2wiPjwvZGl2PjxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAiPjxsYWJlbD5DbGFzc2VzIENvbmNlcm7DqWVzPC9sYWJlbD48aW5wdXQgdHlwZT0idGV4dCIgaWQ9InN1aXZpLWNsYXNzZXMiIGNsYXNzPSJmb3JtLWNvbnRyb2wiPjwvZGl2PjwvZGl2PgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWZ1bGwiPjxsYWJlbD5TaXR1YXRpb25zIMOpbMOodmVzIGFib3Jkw6llcyAoTm90ZXMpPC9sYWJlbD48ZGl2IGNsYXNzPSJydGUtd3JhcCI+PGRpdiBjbGFzcz0icnRlLWJhciI+CjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJkb2N1bWVudC5leGVjQ29tbWFuZCgnYm9sZCcpIiB0aXRsZT0iR3JhcyI+PGI+RzwvYj48L2J1dHRvbj4KPGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9ImRvY3VtZW50LmV4ZWNDb21tYW5kKCdpdGFsaWMnKSIgdGl0bGU9Ikl0YWxpcXVlIj48aT5JPC9pPjwvYnV0dG9uPgo8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0iZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ3VuZGVybGluZScpIiB0aXRsZT0iU291bGlnbsOpIj48dT5TPC91PjwvYnV0dG9uPgo8c3BhbiBjbGFzcz0icnRlLXNlcCI+PC9zcGFuPgo8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0iZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2luc2VydFVub3JkZXJlZExpc3QnKSIgdGl0bGU9Ikxpc3RlIMOgIHB1Y2VzIj48aSBjbGFzcz0iZmFzIGZhLWxpc3QtdWwiPjwvaT48L2J1dHRvbj4KPGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9ImRvY3VtZW50LmV4ZWNDb21tYW5kKCdpbnNlcnRPcmRlcmVkTGlzdCcpIiB0aXRsZT0iTGlzdGUgbnVtw6lyb3TDqWUiPjxpIGNsYXNzPSJmYXMgZmEtbGlzdC1vbCI+PC9pPjwvYnV0dG9uPgo8c3BhbiBjbGFzcz0icnRlLXNlcCI+PC9zcGFuPgo8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0icnRlQ29sb3IodGhpcykiIHRpdGxlPSJDb3VsZXVyIj48aSBjbGFzcz0iZmFzIGZhLXBhbGV0dGUiPjwvaT48L2J1dHRvbj4KPGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9InJ0ZUxpbmsodGhpcykiIHRpdGxlPSJMaWVuIj48aSBjbGFzcz0iZmFzIGZhLWxpbmsiPjwvaT48L2J1dHRvbj4KPHNwYW4gY2xhc3M9InJ0ZS1zZXAiPjwvc3Bhbj4KPGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9ImRvY3VtZW50LmV4ZWNDb21tYW5kKCd1bmRvJykiIHRpdGxlPSJBbm51bGVyIj48aSBjbGFzcz0iZmFzIGZhLXVuZG8iPjwvaT48L2J1dHRvbj4KPGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9ImRvY3VtZW50LmV4ZWNDb21tYW5kKCdyZWRvJykiIHRpdGxlPSJSZXN0YXVyZXIiPjxpIGNsYXNzPSJmYXMgZmEtcmVkbyI+PC9pPjwvYnV0dG9uPjxzcGFuIGNsYXNzPSJydGUtc2VwIj48L3NwYW4+PGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9InJ0ZUluc2VydExvZ28oKSIgdGl0bGU9Ikluc8OpcmVyIGxlIGxvZ28iPjxpIGNsYXNzPSJmYXMgZmEtc3RhbXAiIHN0eWxlPSJjb2xvcjojZTY3ZTIyIj48L2k+PC9idXR0b24+CjxzcGFuIGNsYXNzPSJydGUtc2VwIj48L3NwYW4+PGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9ImRvY3VtZW50LmV4ZWNDb21tYW5kKCdqdXN0aWZ5TGVmdCcpIiB0aXRsZT0iQWxpZ25lciDDoCBnYXVjaGUiPjxpIGNsYXNzPSJmYXMgZmEtYWxpZ24tbGVmdCI+PC9pPjwvYnV0dG9uPjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJkb2N1bWVudC5leGVjQ29tbWFuZCgnanVzdGlmeUNlbnRlcicpIiB0aXRsZT0iQ2VudHJlciI+PGkgY2xhc3M9ImZhcyBmYS1hbGlnbi1jZW50ZXIiPjwvaT48L2J1dHRvbj48YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0iZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2p1c3RpZnlGdWxsJykiIHRpdGxlPSJKdXN0aWZpZXIiPjxpIGNsYXNzPSJmYXMgZmEtYWxpZ24tanVzdGlmeSI+PC9pPjwvYnV0dG9uPgo8L2Rpdj48ZGl2IGlkPSJzdWl2aS1jb250ZW51IiBjbGFzcz0iZG9jLWVkaXRvciIgY29udGVudGVkaXRhYmxlPSJ0cnVlIj48L2Rpdj48L2Rpdj48L2Rpdj4KICAgICAgICAgICAgCiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZnVsbCBhdHRhY2htZW50cy1hcmVhIj4KICAgICAgICAgICAgICAgIDxsYWJlbD48aSBjbGFzcz0iZmFzIGZhLXBhcGVyY2xpcCI+PC9pPiBQacOoY2VzIGpvaW50ZXM8L2xhYmVsPgogICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9ImZpbGUiIGlkPSJzdWl2aS1maWxlLWlucHV0IiBjbGFzcz0iZm9ybS1jb250cm9sIiBvbmNoYW5nZT0iYWRkQXR0YWNobWVudCgnc3VpdmktYXR0YWNobWVudHMnLCB0aGlzKSI+CiAgICAgICAgICAgICAgICA8dWwgaWQ9InN1aXZpLWF0dGFjaG1lbnRzIiBjbGFzcz0iYXR0YWNobWVudC1saXN0Ij48L3VsPgogICAgICAgICAgICA8L2Rpdj4KCiAgICAgICAgICAgIDxkaXYgY2xhc3M9InNhdmUtYmFyIj48YnV0dG9uIGlkPSJidG4tc2F2ZS1zdWl2aSIgY2xhc3M9ImJ0biBidG4taW5mbyIgb25jbGljaz0ic2F2ZVN1aXZpRWxldmUoKSI+PGkgY2xhc3M9ImZhcyBmYS1zYXZlIiBzdHlsZT0ibWFyZ2luLXJpZ2h0OjZweCI+PC9pPkVucmVnaXN0cmVyIChIaXN0b3JpcXVlKTwvYnV0dG9uPjwvZGl2PgogICAgICAgIDwvZGl2PgogICAgPC9kaXY+CgogICAgPGRpdiBpZD0ibWVudTYiIGNsYXNzPSJzZWN0aW9uIj4KICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWNhcmQiPgogICAgICAgICAgICA8ZGl2IHN0eWxlPSJkaXNwbGF5OmZsZXg7IGp1c3RpZnktY29udGVudDpzcGFjZS1iZXR3ZWVuOyBhbGlnbi1pdGVtczpjZW50ZXI7Ij4KICAgICAgICAgICAgICAgIDxoMyBzdHlsZT0iY29sb3I6dmFyKC0tYWNjZW50KSI+U2Fpc2lyIHVuIEVudHJldGllbjwvaDM+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJhY3Rpb24tcm93Ij4KICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJidG4gYnRuLXdhcm5pbmcgYnRuLXNtIiBvbmNsaWNrPSJyYXpQYWdlKCdFTlQnKSI+PGkgY2xhc3M9ImZhcyBmYS1lcmFzZXIiPjwvaT4gUkFaPC9idXR0b24+CiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYnRuIGJ0bi13b3JkIGJ0bi1zbSIgb25jbGljaz0iZXhwb3J0RG9jV29yZCgnRU5UJykiPjxpIGNsYXNzPSJmYXMgZmEtZmlsZS13b3JkIj48L2k+IFdvcmQ8L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJidG4gYnRuLWRhcmsgYnRuLXNtIiBvbmNsaWNrPSJwcmludEN1cnJlbnRGb3JtKCdFTlQnKSI+PGkgY2xhc3M9ImZhcyBmYS1wcmludCI+PC9pPiBQREY8L2J1dHRvbj4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1ncmlkIiBzdHlsZT0ibWFyZ2luLXRvcDoxNXB4OyI+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWdyb3VwIj48bGFiZWw+RGF0ZTwvbGFiZWw+PGlucHV0IHR5cGU9ImRhdGUiIGlkPSJlbnQtZGF0ZSIgY2xhc3M9ImZvcm0tY29udHJvbCI+PC9kaXY+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWdyb3VwIj4KICAgICAgICAgICAgICAgICAgICA8bGFiZWw+VHlwZTwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iZGlzcGxheTpmbGV4OyBnYXA6NXB4OyI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxzZWxlY3QgaWQ9ImVudC10eXBlIiBjbGFzcz0iZm9ybS1jb250cm9sIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24+RW50cmV0aWVuIFJIIC8gUGVyc29ubmVsPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uPlJlbmRlei12b3VzIEZhbWlsbGU8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24+U3Vpdmkgw4lsw6h2ZTwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbj5QYXJ0ZW5haXJlczwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbj5JbnNwZWN0aW9uPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uPkF1dHJlPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvc2VsZWN0PgogICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJidG4gYnRuLXByaW1hcnkgYnRuLWljb24iIG9uY2xpY2s9ImFkZEN1c3RvbVR5cGUoJ2VudC10eXBlJykiPjxpIGNsYXNzPSJmYXMgZmEtcGx1cyI+PC9pPjwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8ZGl2IHN0eWxlPSJkaXNwbGF5OmZsZXg7Z2FwOjE1cHg7ZmxleC13cmFwOndyYXA7Ij4KICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9ImZsZXg6MTttaW4td2lkdGg6MjUwcHg7YmFja2dyb3VuZDojZjlmOWY5O3BhZGRpbmc6MTVweDtib3JkZXItcmFkaXVzOjVweDtib3JkZXItbGVmdDozcHggc29saWQgI2U2N2UyMjsiPgogICAgICAgICAgICAgICAgICAgIDxsYWJlbD48aSBjbGFzcz0iZmFzIGZhLXVzZXItZ3JhZHVhdGUiIHN0eWxlPSJjb2xvcjojZTY3ZTIyO21hcmdpbi1yaWdodDo0cHgiPjwvaT4gw4lsw6h2ZXMgY29uY2VybsOpczwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBpZD0iZW50LXN0dWRlbnRzLWNvbnRhaW5lciI+PGRpdiBjbGFzcz0ibXVsdGktcm93IGVudC1zdHVkZW50Ij48aW5wdXQgdHlwZT0idGV4dCIgY2xhc3M9ImZvcm0tY29udHJvbCBuYW1lIiBwbGFjZWhvbGRlcj0iTm9tIFByw6lub20iPjxidXR0b24gY2xhc3M9ImJ0biBidG4tZGFuZ2VyIGJ0bi1pY29uIiBvbmNsaWNrPSJ0aGlzLnBhcmVudEVsZW1lbnQucmVtb3ZlKCkiPjxpIGNsYXNzPSJmYXMgZmEtdGltZXMiPjwvaT48L2J1dHRvbj48L2Rpdj48L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJidG4gYnRuLXNtIGJ0bi1zdWNjZXNzIiBvbmNsaWNrPSJhZGRNdWx0aVJvdygnZW50LXN0dWRlbnRzLWNvbnRhaW5lcicsICdlbnQtc3R1ZGVudCcsICdOb20gw4lsw6h2ZScpIj4rIMOJbMOodmU8L2J1dHRvbj4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iZmxleDoxO21pbi13aWR0aDoyNTBweDtiYWNrZ3JvdW5kOiNmOWY5Zjk7cGFkZGluZzoxNXB4O2JvcmRlci1yYWRpdXM6NXB4O2JvcmRlci1sZWZ0OjNweCBzb2xpZCAjMjk4MGI5OyI+CiAgICAgICAgICAgICAgICAgICAgPGxhYmVsPjxpIGNsYXNzPSJmYXMgZmEtY2hhbGtib2FyZC10ZWFjaGVyIiBzdHlsZT0iY29sb3I6IzI5ODBiOTttYXJnaW4tcmlnaHQ6NHB4Ij48L2k+IEVuc2VpZ25hbnRzIC8gUGVyc29ubmVsczwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBpZD0iZW50LXRlYWNoZXJzLWNvbnRhaW5lciI+PGRpdiBjbGFzcz0ibXVsdGktcm93IGVudC10ZWFjaGVyIj48aW5wdXQgdHlwZT0idGV4dCIgY2xhc3M9ImZvcm0tY29udHJvbCBuYW1lIiBwbGFjZWhvbGRlcj0iTm9tIFByw6lub20iPjxidXR0b24gY2xhc3M9ImJ0biBidG4tZGFuZ2VyIGJ0bi1pY29uIiBvbmNsaWNrPSJ0aGlzLnBhcmVudEVsZW1lbnQucmVtb3ZlKCkiPjxpIGNsYXNzPSJmYXMgZmEtdGltZXMiPjwvaT48L2J1dHRvbj48L2Rpdj48L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJidG4gYnRuLXNtIGJ0bi1zdWNjZXNzIiBvbmNsaWNrPSJhZGRNdWx0aVJvdygnZW50LXRlYWNoZXJzLWNvbnRhaW5lcicsICdlbnQtdGVhY2hlcicsICdOb20gUGVyc29ubmVsJykiPisgUGVyc29ubmVsPC9idXR0b24+CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZnVsbCI+PGxhYmVsPk9iamV0PC9sYWJlbD48aW5wdXQgdHlwZT0idGV4dCIgaWQ9ImVudC1vYmpldCIgY2xhc3M9ImZvcm0tY29udHJvbCI+PC9kaXY+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZnVsbCI+PGxhYmVsPkNvbXB0ZSBSZW5kdTwvbGFiZWw+PGRpdiBjbGFzcz0icnRlLXdyYXAiPjxkaXYgY2xhc3M9InJ0ZS1iYXIiPgo8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0iZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2JvbGQnKSIgdGl0bGU9IkdyYXMiPjxiPkc8L2I+PC9idXR0b24+CjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJkb2N1bWVudC5leGVjQ29tbWFuZCgnaXRhbGljJykiIHRpdGxlPSJJdGFsaXF1ZSI+PGk+STwvaT48L2J1dHRvbj4KPGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9ImRvY3VtZW50LmV4ZWNDb21tYW5kKCd1bmRlcmxpbmUnKSIgdGl0bGU9IlNvdWxpZ27DqSI+PHU+UzwvdT48L2J1dHRvbj4KPHNwYW4gY2xhc3M9InJ0ZS1zZXAiPjwvc3Bhbj4KPGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9ImRvY3VtZW50LmV4ZWNDb21tYW5kKCdpbnNlcnRVbm9yZGVyZWRMaXN0JykiIHRpdGxlPSJMaXN0ZSDDoCBwdWNlcyI+PGkgY2xhc3M9ImZhcyBmYS1saXN0LXVsIj48L2k+PC9idXR0b24+CjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJkb2N1bWVudC5leGVjQ29tbWFuZCgnaW5zZXJ0T3JkZXJlZExpc3QnKSIgdGl0bGU9Ikxpc3RlIG51bcOpcm90w6llIj48aSBjbGFzcz0iZmFzIGZhLWxpc3Qtb2wiPjwvaT48L2J1dHRvbj4KPHNwYW4gY2xhc3M9InJ0ZS1zZXAiPjwvc3Bhbj4KPGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9InJ0ZUNvbG9yKHRoaXMpIiB0aXRsZT0iQ291bGV1ciI+PGkgY2xhc3M9ImZhcyBmYS1wYWxldHRlIj48L2k+PC9idXR0b24+CjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJydGVMaW5rKHRoaXMpIiB0aXRsZT0iTGllbiI+PGkgY2xhc3M9ImZhcyBmYS1saW5rIj48L2k+PC9idXR0b24+CjxzcGFuIGNsYXNzPSJydGUtc2VwIj48L3NwYW4+CjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJkb2N1bWVudC5leGVjQ29tbWFuZCgndW5kbycpIiB0aXRsZT0iQW5udWxlciI+PGkgY2xhc3M9ImZhcyBmYS11bmRvIj48L2k+PC9idXR0b24+CjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJkb2N1bWVudC5leGVjQ29tbWFuZCgncmVkbycpIiB0aXRsZT0iUmVzdGF1cmVyIj48aSBjbGFzcz0iZmFzIGZhLXJlZG8iPjwvaT48L2J1dHRvbj48c3BhbiBjbGFzcz0icnRlLXNlcCI+PC9zcGFuPjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJydGVJbnNlcnRMb2dvKCkiIHRpdGxlPSJJbnPDqXJlciBsZSBsb2dvIj48aSBjbGFzcz0iZmFzIGZhLXN0YW1wIiBzdHlsZT0iY29sb3I6I2U2N2UyMiI+PC9pPjwvYnV0dG9uPgo8c3BhbiBjbGFzcz0icnRlLXNlcCI+PC9zcGFuPjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJkb2N1bWVudC5leGVjQ29tbWFuZCgnanVzdGlmeUxlZnQnKSIgdGl0bGU9IkFsaWduZXIgw6AgZ2F1Y2hlIj48aSBjbGFzcz0iZmFzIGZhLWFsaWduLWxlZnQiPjwvaT48L2J1dHRvbj48YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0iZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2p1c3RpZnlDZW50ZXInKSIgdGl0bGU9IkNlbnRyZXIiPjxpIGNsYXNzPSJmYXMgZmEtYWxpZ24tY2VudGVyIj48L2k+PC9idXR0b24+PGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9ImRvY3VtZW50LmV4ZWNDb21tYW5kKCdqdXN0aWZ5RnVsbCcpIiB0aXRsZT0iSnVzdGlmaWVyIj48aSBjbGFzcz0iZmFzIGZhLWFsaWduLWp1c3RpZnkiPjwvaT48L2J1dHRvbj4KPC9kaXY+PGRpdiBpZD0iZW50LWNvbnRlbnUiIGNsYXNzPSJkb2MtZWRpdG9yIiBjb250ZW50ZWRpdGFibGU9InRydWUiPjwvZGl2PjwvZGl2PjwvZGl2PgogICAgICAgICAgICAKICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1mdWxsIGF0dGFjaG1lbnRzLWFyZWEiPgogICAgICAgICAgICAgICAgPGxhYmVsPjxpIGNsYXNzPSJmYXMgZmEtcGFwZXJjbGlwIj48L2k+IFBpw6hjZXMgam9pbnRlczwvbGFiZWw+CiAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0iZmlsZSIgaWQ9ImVudC1maWxlLWlucHV0IiBjbGFzcz0iZm9ybS1jb250cm9sIiBvbmNoYW5nZT0iYWRkQXR0YWNobWVudCgnZW50LWF0dGFjaG1lbnRzJywgdGhpcykiPgogICAgICAgICAgICAgICAgPHVsIGlkPSJlbnQtYXR0YWNobWVudHMiIGNsYXNzPSJhdHRhY2htZW50LWxpc3QiPjwvdWw+CiAgICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgICAgPGRpdiBjbGFzcz0ic2F2ZS1iYXIiPjxidXR0b24gaWQ9ImJ0bi1zYXZlLWVudCIgY2xhc3M9ImJ0biBidG4tcHJpbWFyeSIgb25jbGljaz0ic2F2ZUVudHJldGllbigpIj48aSBjbGFzcz0iZmFzIGZhLXNhdmUiIHN0eWxlPSJtYXJnaW4tcmlnaHQ6NnB4Ij48L2k+RW5yZWdpc3RyZXI8L2J1dHRvbj48L2Rpdj4KICAgICAgICA8L2Rpdj4KICAgIDwvZGl2PgoKICAgIDxkaXYgaWQ9Im1lbnU3IiBjbGFzcz0ic2VjdGlvbiI+CiAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1jYXJkIj4KICAgICAgICAgICAgPGRpdiBzdHlsZT0iZGlzcGxheTpmbGV4OyBqdXN0aWZ5LWNvbnRlbnQ6c3BhY2UtYmV0d2VlbjsgYWxpZ24taXRlbXM6Y2VudGVyOyI+CiAgICAgICAgICAgICAgICA8aDMgc3R5bGU9ImNvbG9yOnZhcigtLXN1Y2Nlc3MpIj5TYWlzaXIgdW5lIFLDqXVuaW9uPC9oMz4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImFjdGlvbi1yb3ciPgogICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImJ0biBidG4td2FybmluZyBidG4tc20iIG9uY2xpY2s9InJhelBhZ2UoJ1JFVScpIj48aSBjbGFzcz0iZmFzIGZhLWVyYXNlciI+PC9pPiBSQVo8L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJidG4gYnRuLXdvcmQgYnRuLXNtIiBvbmNsaWNrPSJleHBvcnREb2NXb3JkKCdSRVUnKSI+PGkgY2xhc3M9ImZhcyBmYS1maWxlLXdvcmQiPjwvaT4gV29yZDwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImJ0biBidG4tZGFyayBidG4tc20iIG9uY2xpY2s9InByaW50Q3VycmVudEZvcm0oJ1JFVScpIj48aSBjbGFzcz0iZmFzIGZhLXByaW50Ij48L2k+IFBERjwvYnV0dG9uPgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWdyaWQiIHN0eWxlPSJtYXJnaW4tdG9wOjE1cHg7Ij4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAiPjxsYWJlbD5EYXRlPC9sYWJlbD48aW5wdXQgdHlwZT0iZGF0ZSIgaWQ9InJldS1kYXRlIiBjbGFzcz0iZm9ybS1jb250cm9sIj48L2Rpdj4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAiPgogICAgICAgICAgICAgICAgICAgIDxsYWJlbD5UeXBlIGRlIHLDqXVuaW9uPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJkaXNwbGF5OmZsZXg7IGdhcDo1cHg7Ij4KICAgICAgICAgICAgICAgICAgICAgICAgPHNlbGVjdCBpZD0icmV1LXR5cGUiIGNsYXNzPSJmb3JtLWNvbnRyb2wiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbj5Db25zZWlsIGQnQWRtaW5pc3RyYXRpb248L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24+Q29uc2VpbCBQw6lkYWdvZ2lxdWU8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24+Q29taXTDqSBkZSBQaWxvdGFnZSAoQ09QSUwpPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uPkNvbW1pc3Npb24gw4lkdWNhdGl2ZTwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbj7DiXF1aXBlIMOpZHVjYXRpdmU8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24+RVNTPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uPkdQRFM8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24+Q2VsbHVsZSBkZSB2ZWlsbGU8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24+Rm9uZCBzb2NpYWw8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24+QXV0cmU8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICAgICAgPC9zZWxlY3Q+CiAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImJ0biBidG4tc3VjY2VzcyBidG4taWNvbiIgb25jbGljaz0iYWRkQ3VzdG9tVHlwZSgncmV1LXR5cGUnKSI+PGkgY2xhc3M9ImZhcyBmYS1wbHVzIj48L2k+PC9idXR0b24+CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDxkaXYgc3R5bGU9ImRpc3BsYXk6ZmxleDtnYXA6MTVweDtmbGV4LXdyYXA6d3JhcDsiPgogICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iZmxleDoxO21pbi13aWR0aDoyNTBweDtiYWNrZ3JvdW5kOiNmOWY5Zjk7cGFkZGluZzoxNXB4O2JvcmRlci1yYWRpdXM6NXB4O2JvcmRlci1sZWZ0OjNweCBzb2xpZCAjZTY3ZTIyOyI+CiAgICAgICAgICAgICAgICAgICAgPGxhYmVsPjxpIGNsYXNzPSJmYXMgZmEtdXNlci1ncmFkdWF0ZSIgc3R5bGU9ImNvbG9yOiNlNjdlMjI7bWFyZ2luLXJpZ2h0OjRweCI+PC9pPiDDiWzDqHZlcyBjb25jZXJuw6lzPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICA8ZGl2IGlkPSJyZXUtc3R1ZGVudHMtY29udGFpbmVyIj48ZGl2IGNsYXNzPSJtdWx0aS1yb3cgcmV1LXN0dWRlbnQiPjxpbnB1dCB0eXBlPSJ0ZXh0IiBjbGFzcz0iZm9ybS1jb250cm9sIG5hbWUiIHBsYWNlaG9sZGVyPSJOb20gUHLDqW5vbSI+PGJ1dHRvbiBjbGFzcz0iYnRuIGJ0bi1kYW5nZXIgYnRuLWljb24iIG9uY2xpY2s9InRoaXMucGFyZW50RWxlbWVudC5yZW1vdmUoKSI+PGkgY2xhc3M9ImZhcyBmYS10aW1lcyI+PC9pPjwvYnV0dG9uPjwvZGl2PjwvZGl2PgogICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImJ0biBidG4tc20gYnRuLXN1Y2Nlc3MiIG9uY2xpY2s9ImFkZE11bHRpUm93KCdyZXUtc3R1ZGVudHMtY29udGFpbmVyJywgJ3JldS1zdHVkZW50JywgJ05vbSDDiWzDqHZlJykiPisgw4lsw6h2ZTwvYnV0dG9uPgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJmbGV4OjE7bWluLXdpZHRoOjI1MHB4O2JhY2tncm91bmQ6I2Y5ZjlmOTtwYWRkaW5nOjE1cHg7Ym9yZGVyLXJhZGl1czo1cHg7Ym9yZGVyLWxlZnQ6M3B4IHNvbGlkICMyOTgwYjk7Ij4KICAgICAgICAgICAgICAgICAgICA8bGFiZWw+PGkgY2xhc3M9ImZhcyBmYS1jaGFsa2JvYXJkLXRlYWNoZXIiIHN0eWxlPSJjb2xvcjojMjk4MGI5O21hcmdpbi1yaWdodDo0cHgiPjwvaT4gUGFydGljaXBhbnRzIC8gUGVyc29ubmVsczwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBpZD0icmV1LXRlYWNoZXJzLWNvbnRhaW5lciI+PGRpdiBjbGFzcz0ibXVsdGktcm93IHJldS10ZWFjaGVyIj48aW5wdXQgdHlwZT0idGV4dCIgY2xhc3M9ImZvcm0tY29udHJvbCBuYW1lIiBwbGFjZWhvbGRlcj0iTm9tIFByw6lub20iPjxidXR0b24gY2xhc3M9ImJ0biBidG4tZGFuZ2VyIGJ0bi1pY29uIiBvbmNsaWNrPSJ0aGlzLnBhcmVudEVsZW1lbnQucmVtb3ZlKCkiPjxpIGNsYXNzPSJmYXMgZmEtdGltZXMiPjwvaT48L2J1dHRvbj48L2Rpdj48L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJidG4gYnRuLXNtIGJ0bi1zdWNjZXNzIiBvbmNsaWNrPSJhZGRNdWx0aVJvdygncmV1LXRlYWNoZXJzLWNvbnRhaW5lcicsICdyZXUtdGVhY2hlcicsICdOb20gUGVyc29ubmVsJykiPisgUGVyc29ubmVsPC9idXR0b24+CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZnVsbCI+PGxhYmVsPk9yZHJlIGR1IGpvdXI8L2xhYmVsPjxpbnB1dCB0eXBlPSJ0ZXh0IiBpZD0icmV1LW9kaiIgY2xhc3M9ImZvcm0tY29udHJvbCI+PC9kaXY+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZnVsbCI+PGxhYmVsPkNvbXB0ZS1yZW5kdTwvbGFiZWw+PGRpdiBjbGFzcz0icnRlLXdyYXAiPjxkaXYgY2xhc3M9InJ0ZS1iYXIiPgo8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0iZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2JvbGQnKSIgdGl0bGU9IkdyYXMiPjxiPkc8L2I+PC9idXR0b24+CjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJkb2N1bWVudC5leGVjQ29tbWFuZCgnaXRhbGljJykiIHRpdGxlPSJJdGFsaXF1ZSI+PGk+STwvaT48L2J1dHRvbj4KPGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9ImRvY3VtZW50LmV4ZWNDb21tYW5kKCd1bmRlcmxpbmUnKSIgdGl0bGU9IlNvdWxpZ27DqSI+PHU+UzwvdT48L2J1dHRvbj4KPHNwYW4gY2xhc3M9InJ0ZS1zZXAiPjwvc3Bhbj4KPGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9ImRvY3VtZW50LmV4ZWNDb21tYW5kKCdpbnNlcnRVbm9yZGVyZWRMaXN0JykiIHRpdGxlPSJMaXN0ZSDDoCBwdWNlcyI+PGkgY2xhc3M9ImZhcyBmYS1saXN0LXVsIj48L2k+PC9idXR0b24+CjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJkb2N1bWVudC5leGVjQ29tbWFuZCgnaW5zZXJ0T3JkZXJlZExpc3QnKSIgdGl0bGU9Ikxpc3RlIG51bcOpcm90w6llIj48aSBjbGFzcz0iZmFzIGZhLWxpc3Qtb2wiPjwvaT48L2J1dHRvbj4KPHNwYW4gY2xhc3M9InJ0ZS1zZXAiPjwvc3Bhbj4KPGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9InJ0ZUNvbG9yKHRoaXMpIiB0aXRsZT0iQ291bGV1ciI+PGkgY2xhc3M9ImZhcyBmYS1wYWxldHRlIj48L2k+PC9idXR0b24+CjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJydGVMaW5rKHRoaXMpIiB0aXRsZT0iTGllbiI+PGkgY2xhc3M9ImZhcyBmYS1saW5rIj48L2k+PC9idXR0b24+CjxzcGFuIGNsYXNzPSJydGUtc2VwIj48L3NwYW4+CjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJkb2N1bWVudC5leGVjQ29tbWFuZCgndW5kbycpIiB0aXRsZT0iQW5udWxlciI+PGkgY2xhc3M9ImZhcyBmYS11bmRvIj48L2k+PC9idXR0b24+CjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJkb2N1bWVudC5leGVjQ29tbWFuZCgncmVkbycpIiB0aXRsZT0iUmVzdGF1cmVyIj48aSBjbGFzcz0iZmFzIGZhLXJlZG8iPjwvaT48L2J1dHRvbj48c3BhbiBjbGFzcz0icnRlLXNlcCI+PC9zcGFuPjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJydGVJbnNlcnRMb2dvKCkiIHRpdGxlPSJJbnPDqXJlciBsZSBsb2dvIj48aSBjbGFzcz0iZmFzIGZhLXN0YW1wIiBzdHlsZT0iY29sb3I6I2U2N2UyMiI+PC9pPjwvYnV0dG9uPgo8c3BhbiBjbGFzcz0icnRlLXNlcCI+PC9zcGFuPjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJkb2N1bWVudC5leGVjQ29tbWFuZCgnanVzdGlmeUxlZnQnKSIgdGl0bGU9IkFsaWduZXIgw6AgZ2F1Y2hlIj48aSBjbGFzcz0iZmFzIGZhLWFsaWduLWxlZnQiPjwvaT48L2J1dHRvbj48YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0iZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2p1c3RpZnlDZW50ZXInKSIgdGl0bGU9IkNlbnRyZXIiPjxpIGNsYXNzPSJmYXMgZmEtYWxpZ24tY2VudGVyIj48L2k+PC9idXR0b24+PGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9ImRvY3VtZW50LmV4ZWNDb21tYW5kKCdqdXN0aWZ5RnVsbCcpIiB0aXRsZT0iSnVzdGlmaWVyIj48aSBjbGFzcz0iZmFzIGZhLWFsaWduLWp1c3RpZnkiPjwvaT48L2J1dHRvbj4KPC9kaXY+PGRpdiBpZD0icmV1LWNvbnRlbnUiIGNsYXNzPSJkb2MtZWRpdG9yIiBjb250ZW50ZWRpdGFibGU9InRydWUiPjwvZGl2PjwvZGl2PjwvZGl2PgogICAgICAgICAgICAKICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1mdWxsIGF0dGFjaG1lbnRzLWFyZWEiPgogICAgICAgICAgICAgICAgPGxhYmVsPjxpIGNsYXNzPSJmYXMgZmEtcGFwZXJjbGlwIj48L2k+IFBpw6hjZXMgam9pbnRlczwvbGFiZWw+CiAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0iZmlsZSIgaWQ9InJldS1maWxlLWlucHV0IiBjbGFzcz0iZm9ybS1jb250cm9sIiBvbmNoYW5nZT0iYWRkQXR0YWNobWVudCgncmV1LWF0dGFjaG1lbnRzJywgdGhpcykiPgogICAgICAgICAgICAgICAgPHVsIGlkPSJyZXUtYXR0YWNobWVudHMiIGNsYXNzPSJhdHRhY2htZW50LWxpc3QiPjwvdWw+CiAgICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgICAgPGRpdiBjbGFzcz0ic2F2ZS1iYXIiPjxidXR0b24gaWQ9ImJ0bi1zYXZlLXJldSIgY2xhc3M9ImJ0biBidG4tc3VjY2VzcyIgb25jbGljaz0ic2F2ZVJldW5pb24oKSI+PGkgY2xhc3M9ImZhcyBmYS1zYXZlIiBzdHlsZT0ibWFyZ2luLXJpZ2h0OjZweCI+PC9pPkVucmVnaXN0cmVyPC9idXR0b24+PC9kaXY+CiAgICAgICAgPC9kaXY+CiAgICA8L2Rpdj4KCiAgICA8ZGl2IGlkPSJtZW51OCIgY2xhc3M9InNlY3Rpb24iPgogICAgICAgIDxkaXYgY2xhc3M9ImZpbHRlcnMtYmFyIj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1ncm91cCIgc3R5bGU9ImZsZXg6MTsiPjxsYWJlbD5SZWNoZXJjaGUgZ2xvYmFsZTwvbGFiZWw+PGlucHV0IHR5cGU9InRleHQiIGlkPSJzZWFyY2gtc3R1ZGVudCIgY2xhc3M9ImZvcm0tY29udHJvbCIgcGxhY2Vob2xkZXI9IlRhcGVyIHVuIG5vbS4uLiIgZGF0YS1zdHVkZW50LWFjPSIxIiBvbmtleXVwPSJyZW5kZXJIaXN0b3J5KCkiPjwvZGl2PgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWdyb3VwIiBzdHlsZT0iZmxleDoxOyI+PGxhYmVsPlR5cGU8L2xhYmVsPjxzZWxlY3QgaWQ9InNlYXJjaC10eXBlIiBjbGFzcz0iZm9ybS1jb250cm9sIiBvbmNoYW5nZT0icmVuZGVySGlzdG9yeSgpIj48b3B0aW9uIHZhbHVlPSJBTEwiPlRvdXQ8L29wdGlvbj48b3B0aW9uIHZhbHVlPSJFTlQiPkVudHJldGllbnM8L29wdGlvbj48b3B0aW9uIHZhbHVlPSJSRVUiPlLDqXVuaW9uczwvb3B0aW9uPjxvcHRpb24gdmFsdWU9IkRJUiI+RGlyZWN0aW9uPC9vcHRpb24+PG9wdGlvbiB2YWx1ZT0iU1VJVkkiPlN1aXZpPC9vcHRpb24+PC9zZWxlY3Q+PC9kaXY+CiAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImJ0biBidG4tZGFyayBidG4tc20iIG9uY2xpY2s9InByaW50QWxsSGlzdG9yeSgpIj5Ub3V0IEltcHJpbWVyPC9idXR0b24+CiAgICAgICAgPC9kaXY+CiAgICAgICAgPHRhYmxlIGNsYXNzPSJkYXRhLXRhYmxlIiBpZD0iaGlzdG9yeS10YWJsZSI+PHRoZWFkPjx0cj48dGg+RGF0ZTwvdGg+PHRoPlR5cGU8L3RoPjx0aD5TdWpldCAvIFBlcnNvbm5lczwvdGg+PHRoPkFjdGlvbnM8L3RoPjwvdHI+PC90aGVhZD48dGJvZHk+PC90Ym9keT48L3RhYmxlPgogICAgPC9kaXY+CgogICAgPGRpdiBpZD0ibWVudTkiIGNsYXNzPSJzZWN0aW9uIj4KICAgICAgICA8aDMgc3R5bGU9Im1hcmdpbi1ib3R0b206MjBweDsgY29sb3I6dmFyKC0tcHJpbWFyeSk7Ij48aSBjbGFzcz0iZmFzIGZhLWNoYXJ0LWxpbmUiPjwvaT4gUGlsb3RhZ2UgR2xvYmFsPC9oMz4KICAgICAgICA8ZGl2IGNsYXNzPSJkYXNoLWtwaS1ncmlkIj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0ia3BpLWNhcmQiIHN0eWxlPSJib3JkZXItYm90dG9tLWNvbG9yOnZhcigtLWhpZ2hsaWdodCkiPjxpIGNsYXNzPSJmYXMgZmEtZmlyZSBmYS0yeCBrcGktaWNvbiIgc3R5bGU9ImNvbG9yOnZhcigtLWhpZ2hsaWdodCkiPjwvaT48c3BhbiBjbGFzcz0ia3BpLW51bSIgaWQ9ImtwaS10b2RvIj4wPC9zcGFuPjxzcGFuIGNsYXNzPSJrcGktbGFiZWwiPlVyZ2VuY2VzPC9zcGFuPjwvZGl2PgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJrcGktY2FyZCIgc3R5bGU9ImJvcmRlci1ib3R0b20tY29sb3I6dmFyKC0tcHJpbWFyeSkiPjxpIGNsYXNzPSJmYXMgZmEtY2xpcGJvYXJkLWxpc3QgZmEtMngga3BpLWljb24iIHN0eWxlPSJjb2xvcjp2YXIoLS1wcmltYXJ5KSI+PC9pPjxzcGFuIGNsYXNzPSJrcGktbnVtIiBpZD0ia3BpLWRpciI+MDwvc3Bhbj48c3BhbiBjbGFzcz0ia3BpLWxhYmVsIj5EaXJlY3Rpb248L3NwYW4+PC9kaXY+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImtwaS1jYXJkIiBzdHlsZT0iYm9yZGVyLWJvdHRvbS1jb2xvcjp2YXIoLS1hY2NlbnQpIj48aSBjbGFzcz0iZmFzIGZhLWNvbW1lbnRzIGZhLTJ4IGtwaS1pY29uIiBzdHlsZT0iY29sb3I6dmFyKC0tYWNjZW50KSI+PC9pPjxzcGFuIGNsYXNzPSJrcGktbnVtIiBpZD0ia3BpLWVudCI+MDwvc3Bhbj48c3BhbiBjbGFzcz0ia3BpLWxhYmVsIj5FbnRyZXRpZW5zPC9zcGFuPjwvZGl2PgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJrcGktY2FyZCIgc3R5bGU9ImJvcmRlci1ib3R0b20tY29sb3I6dmFyKC0tc3VjY2VzcykiPjxpIGNsYXNzPSJmYXMgZmEtdXNlcnMgZmEtMngga3BpLWljb24iIHN0eWxlPSJjb2xvcjp2YXIoLS1zdWNjZXNzKSI+PC9pPjxzcGFuIGNsYXNzPSJrcGktbnVtIiBpZD0ia3BpLXJldSI+MDwvc3Bhbj48c3BhbiBjbGFzcz0ia3BpLWxhYmVsIj5Sw6l1bmlvbnM8L3NwYW4+PC9kaXY+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImtwaS1jYXJkIiBzdHlsZT0iYm9yZGVyLWJvdHRvbS1jb2xvcjp2YXIoLS13YXJuaW5nKSI+PGkgY2xhc3M9ImZhcyBmYS1jYWxlbmRhci1hbHQgZmEtMngga3BpLWljb24iIHN0eWxlPSJjb2xvcjp2YXIoLS13YXJuaW5nKSI+PC9pPjxzcGFuIGNsYXNzPSJrcGktbnVtIiBpZD0ia3BpLWNhbCI+MDwvc3Bhbj48c3BhbiBjbGFzcz0ia3BpLWxhYmVsIj5BZ2VuZGE8L3NwYW4+PC9kaXY+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImtwaS1jYXJkIiBzdHlsZT0iYm9yZGVyLWJvdHRvbS1jb2xvcjp2YXIoLS1pbmZvKSI+PGkgY2xhc3M9ImZhcyBmYS11c2VyLWdyYWR1YXRlIGZhLTJ4IGtwaS1pY29uIiBzdHlsZT0iY29sb3I6dmFyKC0taW5mbykiPjwvaT48c3BhbiBjbGFzcz0ia3BpLW51bSIgaWQ9ImtwaS1zdWl2aSI+MDwvc3Bhbj48c3BhbiBjbGFzcz0ia3BpLWxhYmVsIj5TdWl2aTwvc3Bhbj48L2Rpdj4KICAgICAgICA8L2Rpdj4KICAgICAgICA8ZGl2IGNsYXNzPSJjaGFydHMtZ3JpZCI+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImNoYXJ0LWNvbnRhaW5lciI+PGgzPlLDqXBhcnRpdGlvbiBBY3Rpdml0w6k8L2gzPjxjYW52YXMgaWQ9ImNoYXJ0VHlwZXMiPjwvY2FudmFzPjwvZGl2PgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJjaGFydC1jb250YWluZXIiPgogICAgICAgICAgICAgICAgPGgzPlRvcCA1IMOJbMOodmVzIChIaXN0b3JpcXVlKTwvaDM+CiAgICAgICAgICAgICAgICA8dWwgaWQ9InRvcC1zdHVkZW50cy1saXN0IiBjbGFzcz0idG9wLXN0dWRlbnRzLWxpc3QiIHN0eWxlPSJtYXJnaW4tdG9wOjIwcHg7Ij48L3VsPgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICA8L2Rpdj4KICAgICAgICA8ZGl2IGNsYXNzPSJjaGFydC1jb250YWluZXIiIHN0eWxlPSJ3aWR0aDoxMDAlOyBoZWlnaHQ6MzAwcHg7Ij48aDM+w4l2b2x1dGlvbiAoNiBtb2lzKTwvaDM+PGNhbnZhcyBpZD0iY2hhcnRNb250aGx5Ij48L2NhbnZhcz48L2Rpdj4KICAgIDwvZGl2PgoKCjwhLS0g4pWQ4pWQ4pWQIEVWRU5FTUVOVFMgKG1lbnUxMCkg4pWQ4pWQ4pWQIC0tPgo8ZGl2IGlkPSJtZW51MTAiIGNsYXNzPSJzZWN0aW9uIj4KICAgIDxkaXYgY2xhc3M9ImV2LWhlYWRlciI+CiAgICAgICAgPGgyPjxpIGNsYXNzPSJmYXMgZmEtY2FsZW5kYXItY2hlY2siPjwvaT4gQWN0aXZpdMOpcyBww6lkYWdvZ2lxdWVzPC9oMj4KICAgICAgICA8YnV0dG9uIGNsYXNzPSJhY3Rpb24tYnRuIiBzdHlsZT0iYmFja2dyb3VuZDp2YXIoLS1oZWFkZXIpO2NvbG9yOiNmZmY7cGFkZGluZzoxMHB4IDIwcHg7Zm9udC1zaXplOi45NXJlbTtmb250LXdlaWdodDo3MDA7Ym9yZGVyLXJhZGl1czoxMHB4O2JvcmRlcjpub25lO2N1cnNvcjpwb2ludGVyO2JveC1zaGFkb3c6MCAzcHggMTBweCByZ2JhKDQ0LDYyLDgwLC4zKTt0cmFuc2l0aW9uOnRyYW5zZm9ybSAuMTVzLGJveC1zaGFkb3cgLjE1czsiIG9ubW91c2VvdmVyPSJ0aGlzLnN0eWxlLnRyYW5zZm9ybT0ndHJhbnNsYXRlWSgtMnB4KSc7dGhpcy5zdHlsZS5ib3hTaGFkb3c9JzAgNXB4IDE1cHggcmdiYSg0NCw2Miw4MCwuNCknIiBvbm1vdXNlb3V0PSJ0aGlzLnN0eWxlLnRyYW5zZm9ybT0nbm9uZSc7dGhpcy5zdHlsZS5ib3hTaGFkb3c9JzAgM3B4IDEwcHggcmdiYSg0NCw2Miw4MCwuMyknIiBvbmNsaWNrPSJvcGVuRXZNb2RhbCgpIj48aSBjbGFzcz0iZmFzIGZhLXBsdXMiPjwvaT4gTm91dmVsIMOpdsOpbmVtZW50PC9idXR0b24+CiAgICA8L2Rpdj4KICAgIDxkaXYgY2xhc3M9ImV2LXRvcCI+CiAgICAgICAgPGRpdiBjbGFzcz0iZXYta3BpcyI+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImV2LWtwaSI+PGRpdiBjbGFzcz0ia3YiIGlkPSJrcGktZXYtdG90IiBzdHlsZT0iY29sb3I6dmFyKC0taGVhZGVyKSI+MDwvZGl2PjxkaXYgY2xhc3M9ImtsIj5Ub3RhbDwvZGl2PjwvZGl2PgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJldi1rcGkiPjxkaXYgY2xhc3M9Imt2IiBpZD0ia3BpLWV2LW1zZyIgc3R5bGU9ImNvbG9yOiMyN2FlNjAiPjA8L2Rpdj48ZGl2IGNsYXNzPSJrbCI+TXNnIFBhcmVudHM8L2Rpdj48L2Rpdj4KICAgICAgICA8L2Rpdj4KICAgIDwvZGl2PgogICAgPGRpdiBjbGFzcz0iZXYtZmlsdGVycyI+CiAgICAgICAgCiAgICAgICAgCiAgICAgICAgPGlucHV0IHR5cGU9InRleHQiIGlkPSJldi1zZWFyY2giIHBsYWNlaG9sZGVyPSJSZWNoZXJjaGVy4oCmIiBvbmlucHV0PSJyZW5kZXJFdmVudHMoKSIgc3R5bGU9ImZsZXg6MTttaW4td2lkdGg6MTIwcHg7bWF4LXdpZHRoOjI2MHB4Ij4KICAgIDwvZGl2PgogICAgPGRpdiBjbGFzcz0iZXYtZ3JpZCIgaWQ9ImV2LWdyaWQiPjwvZGl2Pgo8L2Rpdj4KCjwhLS0gTU9EQUwgRVZFTkVNRU5UIC0tPgo8ZGl2IGlkPSJldk1vZCIgY2xhc3M9Im0tb3YiIHN0eWxlPSJsZWZ0OjI4MHB4IiBvbmNsaWNrPSJpZihldmVudC50YXJnZXQ9PT10aGlzKWNsb3NlRXZNb2RhbCgpIj4KICAgIDxkaXYgY2xhc3M9Im0tYm94IiBzdHlsZT0id2lkdGg6Y2FsYygxMDB2dyAtIDI4MHB4KTttYXgtd2lkdGg6Y2FsYygxMDB2dyAtIDI4MHB4KTtoZWlnaHQ6MTAwdmg7bWF4LWhlaWdodDoxMDB2aDtib3JkZXItcmFkaXVzOjA7cGFkZGluZzoyMHB4IDI4cHg7Ym94LXNpemluZzpib3JkZXItYm94O21hcmdpbi1sZWZ0OmF1dG8iPgogICAgICAgIDxoMz48aSBjbGFzcz0iZmFzIGZhLWNhbGVuZGFyLWNoZWNrIj48L2k+IDxzcGFuIGlkPSJldi1tdCI+Tm91dmVsIMOpdsOpbmVtZW50PC9zcGFuPjwvaDM+CiAgICAgICAgPGlucHV0IHR5cGU9ImhpZGRlbiIgaWQ9ImV2LWVpZCI+CiAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1ncm91cCIgc3R5bGU9Im1hcmdpbi1ib3R0b206MTBweCI+PGxhYmVsPkludGl0dWzDqSAqPC9sYWJlbD48aW5wdXQgdHlwZT0idGV4dCIgaWQ9ImV2LW5hbWUiIGNsYXNzPSJmb3JtLWNvbnRyb2wiIHBsYWNlaG9sZGVyPSJFeDogSm91cm7DqWUgcG9ydGVzIG91dmVydGVzIj48L2Rpdj4KICAgICAgICA8ZGl2IGNsYXNzPSJtLXJvdyI+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAiPjxsYWJlbD5Ew6lidXQ8L2xhYmVsPjxpbnB1dCB0eXBlPSJkYXRlIiBpZD0iZXYtc3RhcnQiIGNsYXNzPSJmb3JtLWNvbnRyb2wiPjwvZGl2PgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWdyb3VwIj48bGFiZWw+w4ljaMOpYW5jZTwvbGFiZWw+PGlucHV0IHR5cGU9ImRhdGUiIGlkPSJldi1kZWFkIiBjbGFzcz0iZm9ybS1jb250cm9sIj48L2Rpdj4KICAgICAgICA8L2Rpdj4KICAgICAgICA8ZGl2IGNsYXNzPSJtLXJvdyI+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAiPjxsYWJlbD5QaWxvdGU8L2xhYmVsPjxzZWxlY3QgaWQ9ImV2LXJlc3AiIGNsYXNzPSJmb3JtLWNvbnRyb2wiPjxvcHRpb24gdmFsdWU9IiI+LS0gQ2hvaXNpciAtLTwvb3B0aW9uPjwvc2VsZWN0PjwvZGl2PgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWdyb3VwIiBzdHlsZT0iZGlzcGxheTpmbGV4O2FsaWduLWl0ZW1zOmNlbnRlcjtnYXA6OHB4O3BhZGRpbmctdG9wOjIycHgiPjxpbnB1dCB0eXBlPSJjaGVja2JveCIgaWQ9ImV2LW1zZ3BhcmVudHMiIHN0eWxlPSJ3aWR0aDoxOHB4O2hlaWdodDoxOHB4O2N1cnNvcjpwb2ludGVyIj48bGFiZWwgZm9yPSJldi1tc2dwYXJlbnRzIiBzdHlsZT0ibWFyZ2luOjA7Y3Vyc29yOnBvaW50ZXI7Zm9udC1zaXplOi44NXJlbSI+TWVzc2FnZSBlbnZvecOpIGF1eCBwYXJlbnRzPC9sYWJlbD48L2Rpdj4KICAgICAgICA8L2Rpdj4KICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWdyb3VwIiBzdHlsZT0ibWFyZ2luLWJvdHRvbToxMHB4Ij48bGFiZWw+Q2xhc3NlcyBjb25jZXJuw6llczwvbGFiZWw+CiAgICAgICAgICAgIDxkaXYgc3R5bGU9ImRpc3BsYXk6ZmxleDtnYXA6OHB4O2FsaWduLWl0ZW1zOmNlbnRlciI+CiAgICAgICAgICAgICAgICA8c2VsZWN0IGlkPSJldi1jbGFzc2UiIGNsYXNzPSJmb3JtLWNvbnRyb2wiIHN0eWxlPSJmbGV4OjEiPjxvcHRpb24gdmFsdWU9IiI+LS0gQ2hvaXNpciBvdSBzYWlzaXIgLS08L29wdGlvbj48L3NlbGVjdD4KICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT0iYnV0dG9uIiBjbGFzcz0ibWIiIHN0eWxlPSJiYWNrZ3JvdW5kOiM1NTU7Y29sb3I6I2ZmZjtwYWRkaW5nOjZweCAxMHB4O2ZvbnQtc2l6ZTouNzVyZW0iIG9uY2xpY2s9IndpbmRvdy5hZGRFdkNsYXNzZSgpIj48aSBjbGFzcz0iZmFzIGZhLXBsdXMiPjwvaT48L2J1dHRvbj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDxkaXYgaWQ9ImV2LWNsYXNzZXMtbGlzdCIgc3R5bGU9ImRpc3BsYXk6ZmxleDtmbGV4LXdyYXA6d3JhcDtnYXA6NHB4O21hcmdpbi10b3A6NnB4Ij48L2Rpdj4KICAgICAgICA8L2Rpdj4KICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWdyb3VwIiBzdHlsZT0ibWFyZ2luLWJvdHRvbToxMHB4Ij48bGFiZWw+TWVzc2FnZSDDoCBhZHJlc3NlciBhdXggcGFyZW50czwvbGFiZWw+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9InJ0ZS13cmFwIj48ZGl2IGNsYXNzPSJydGUtYmFyIj4KICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJkb2N1bWVudC5leGVjQ29tbWFuZCgnYm9sZCcpIiB0aXRsZT0iR3JhcyI+PGI+RzwvYj48L2J1dHRvbj4KICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJkb2N1bWVudC5leGVjQ29tbWFuZCgnaXRhbGljJykiIHRpdGxlPSJJdGFsaXF1ZSI+PGk+STwvaT48L2J1dHRvbj4KICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJkb2N1bWVudC5leGVjQ29tbWFuZCgndW5kZXJsaW5lJykiIHRpdGxlPSJTb3VsaWduw6kiPjx1PlM8L3U+PC9idXR0b24+CiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz0icnRlLXNlcCI+PC9zcGFuPgogICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9ImRvY3VtZW50LmV4ZWNDb21tYW5kKCdpbnNlcnRVbm9yZGVyZWRMaXN0JykiIHRpdGxlPSJQdWNlcyI+PGkgY2xhc3M9ImZhcyBmYS1saXN0LXVsIj48L2k+PC9idXR0b24+CiAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0iZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2luc2VydE9yZGVyZWRMaXN0JykiIHRpdGxlPSJMaXN0ZSBudW3DqXJvdMOpZSI+PGkgY2xhc3M9ImZhcyBmYS1saXN0LW9sIj48L2k+PC9idXR0b24+CiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz0icnRlLXNlcCI+PC9zcGFuPgogICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9InJ0ZUNvbG9yKHRoaXMpIiB0aXRsZT0iQ291bGV1ciI+PGkgY2xhc3M9ImZhcyBmYS1wYWxldHRlIj48L2k+PC9idXR0b24+CiAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0icnRlTGluayh0aGlzKSIgdGl0bGU9IkxpZW4iPjxpIGNsYXNzPSJmYXMgZmEtbGluayI+PC9pPjwvYnV0dG9uPgogICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9InJ0ZS1zZXAiPjwvc3Bhbj4KICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJkb2N1bWVudC5leGVjQ29tbWFuZCgndW5kbycpIiB0aXRsZT0iQW5udWxlciI+PGkgY2xhc3M9ImZhcyBmYS11bmRvIj48L2k+PC9idXR0b24+CiAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0iZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ3JlZG8nKSIgdGl0bGU9IlJlc3RhdXJlciI+PGkgY2xhc3M9ImZhcyBmYS1yZWRvIj48L2k+PC9idXR0b24+CiAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJydGUtc2VwIj48L3NwYW4+PGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9ImRvY3VtZW50LmV4ZWNDb21tYW5kKCdqdXN0aWZ5TGVmdCcpIiB0aXRsZT0iQWxpZ25lciDDoCBnYXVjaGUiPjxpIGNsYXNzPSJmYXMgZmEtYWxpZ24tbGVmdCI+PC9pPjwvYnV0dG9uPjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJkb2N1bWVudC5leGVjQ29tbWFuZCgnanVzdGlmeUNlbnRlcicpIiB0aXRsZT0iQ2VudHJlciI+PGkgY2xhc3M9ImZhcyBmYS1hbGlnbi1jZW50ZXIiPjwvaT48L2J1dHRvbj48YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0iZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2p1c3RpZnlGdWxsJykiIHRpdGxlPSJKdXN0aWZpZXIiPjxpIGNsYXNzPSJmYXMgZmEtYWxpZ24tanVzdGlmeSI+PC9pPjwvYnV0dG9uPgo8L2Rpdj48ZGl2IGNsYXNzPSJydGUtYm9keSIgaWQ9ImV2LWRlc2MiIGNvbnRlbnRlZGl0YWJsZT0idHJ1ZSIgc3R5bGU9Im1pbi1oZWlnaHQ6NDV2aDtib3JkZXI6MnB4IHNvbGlkICNlMGUwZTA7Ym9yZGVyLXJhZGl1czowIDAgOHB4IDhweDtwYWRkaW5nOjEwcHgiPjwvZGl2PjwvZGl2PgogICAgICAgIDwvZGl2PgogICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAiIHN0eWxlPSJtYXJnaW4tYm90dG9tOjEwcHgiPjxsYWJlbD7DiXRpcXVldHRlcyAodmlyZ3VsZXMpPC9sYWJlbD48aW5wdXQgdHlwZT0idGV4dCIgaWQ9ImV2LXRhZ3MiIGNsYXNzPSJmb3JtLWNvbnRyb2wiIHBsYWNlaG9sZGVyPSJKUE8sIGNvbW11bmljYXRpb24sIG9yaWVudGF0aW9uIj48L2Rpdj4KICAgICAgICAKICAgICAgICA8ZGl2IGNsYXNzPSJtLWFjdHMiPgogICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJtYiBtYi1kZWwiIGlkPSJldi1kZWwtYnRuIiBzdHlsZT0iZGlzcGxheTpub25lIiBvbmNsaWNrPSJ3aW5kb3cuZGVsRXZGcm9tTW9kYWwoKSI+PGkgY2xhc3M9ImZhcyBmYS10cmFzaCI+PC9pPiBTdXBwcmltZXI8L2J1dHRvbj4KICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0ibWIgbWItYyIgb25jbGljaz0id2luZG93LmNsb3NlRXZNb2RhbCgpIj5Bbm51bGVyPC9idXR0b24+CiAgICAgICAgICAgIDxidXR0b24gY2xhc3M9Im1iIG1iLW9rIiBvbmNsaWNrPSJ3aW5kb3cuc2F2ZUV2ZW50KCkiPjxpIGNsYXNzPSJmYXMgZmEtY2hlY2siPjwvaT4gRW5yZWdpc3RyZXI8L2J1dHRvbj4KICAgICAgICA8L2Rpdj4KICAgIDwvZGl2Pgo8L2Rpdj4KCjwhLS0g4pWQ4pWQ4pWQIEdBTlRUIC8gUFJPQ0VEVVJFUyAobWVudTExKSDilZDilZDilZAgLS0+CjxkaXYgaWQ9Im1lbnUxMSIgY2xhc3M9InNlY3Rpb24iPgogICAgPGRpdiBjbGFzcz0iZ3QtYmFyIj4KICAgICAgICA8aDI+PGkgY2xhc3M9ImZhcyBmYS1zdHJlYW0iPjwvaT4gw4ljaMOpYW5jZXM8L2gyPgogICAgICAgIDxkaXYgY2xhc3M9Imd0LWJhci1idG5zIj4KICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iZ3QtYnRuLWFkZCIgb25jbGljaz0id2luZG93Lm9wZW5HdE1vZGFsKCkiPjxpIGNsYXNzPSJmYXMgZmEtcGx1cyI+PC9pPiDDiWNow6lhbmNlPC9idXR0b24+CiAgICAgICAgICAgIDxidXR0b24gY2xhc3M9Imd0LWJ0bi1zZWMiIG9uY2xpY2s9IndpbmRvdy5wcmludEdhbnR0KCkiPjxpIGNsYXNzPSJmYXMgZmEtcHJpbnQiPjwvaT4gSW1wcmltZXI8L2J1dHRvbj4KICAgICAgICA8L2Rpdj4KICAgIDwvZGl2PgogICAgCiAgICA8ZGl2IGNsYXNzPSJndC1uYXYiPgogICAgICAgIDxidXR0b24gb25jbGljaz0id2luZG93Lmd0UHJldigpIiB0aXRsZT0iUHLDqWPDqWRlbnQiPjxpIGNsYXNzPSJmYXMgZmEtY2hldnJvbi1sZWZ0Ij48L2k+PC9idXR0b24+CiAgICAgICAgPHNwYW4gc3R5bGU9ImZvbnQtc2l6ZTouNzZyZW07Zm9udC13ZWlnaHQ6NjAwO21pbi13aWR0aDoxNTBweDt0ZXh0LWFsaWduOmNlbnRlciIgaWQ9Imd0LXBlciI+PC9zcGFuPgogICAgICAgIDxidXR0b24gb25jbGljaz0id2luZG93Lmd0TmV4dCgpIiB0aXRsZT0iU3VpdmFudCI+PGkgY2xhc3M9ImZhcyBmYS1jaGV2cm9uLXJpZ2h0Ij48L2k+PC9idXR0b24+CiAgICAgICAgPGJ1dHRvbiBvbmNsaWNrPSJ3aW5kb3cuZ3RZZWFyKCkiPkFubsOpZTwvYnV0dG9uPgogICAgICAgIDxidXR0b24gb25jbGljaz0id2luZG93Lmd0VG9kYXkoKSI+QXVqLjwvYnV0dG9uPgogICAgICAgIDxzZWxlY3QgaWQ9Imd0LWZjIiBvbmNoYW5nZT0id2luZG93LnJlbmRlckdhbnR0KCkiIHN0eWxlPSJtYXJnaW4tbGVmdDphdXRvIj48b3B0aW9uIHZhbHVlPSJBTEwiPlRvdXRlcyBjYXTDqWdvcmllczwvb3B0aW9uPjwvc2VsZWN0PgogICAgPC9kaXY+CiAgICA8ZGl2IGNsYXNzPSJndC13cmFwIiBzdHlsZT0ibWF4LWhlaWdodDpjYWxjKDEwMHZoIC0gMjYwcHgpO292ZXJmbG93LXk6YXV0byI+CiAgICAgICAgPHRhYmxlIGNsYXNzPSJndCIgaWQ9Imd0LXRibCI+PC90YWJsZT4KICAgIDwvZGl2PgogICAgPGRpdiBjbGFzcz0iZ3QtbGVnIj4KICAgICAgICA8c3Bhbj48aSBzdHlsZT0iYmFja2dyb3VuZDojNWRhZGUyIj48L2k+UmVudHLDqWU8L3NwYW4+CiAgICAgICAgPHNwYW4+PGkgc3R5bGU9ImJhY2tncm91bmQ6IzJlODZjMSI+PC9pPkV4YW1lbnM8L3NwYW4+CiAgICAgICAgPHNwYW4+PGkgc3R5bGU9ImJhY2tncm91bmQ6IzFhNTI3NiI+PC9pPk9yaWVudGF0aW9uPC9zcGFuPgogICAgICAgIDxzcGFuPjxpIHN0eWxlPSJiYWNrZ3JvdW5kOiMyNDcxYTMiPjwvaT5Db25zZWlsczwvc3Bhbj4KICAgICAgICA8c3Bhbj48aSBzdHlsZT0iYmFja2dyb3VuZDojOGU0NGFkIj48L2k+UMOpZGFnb2dpcXVlPC9zcGFuPgogICAgICAgIDxzcGFuPjxpIHN0eWxlPSJiYWNrZ3JvdW5kOiMxNDhmNzciPjwvaT5BZG1pbjwvc3Bhbj4KICAgICAgICA8c3Bhbj48aSBzdHlsZT0iYmFja2dyb3VuZDojYzAzOTJiIj48L2k+Ukg8L3NwYW4+CiAgICAgICAgPHNwYW4+PGkgc3R5bGU9ImJhY2tncm91bmQ6IzViNmQ1YiI+PC9pPkF1dHJlPC9zcGFuPgogICAgICAgIDxzcGFuPjxpIHN0eWxlPSJiYWNrZ3JvdW5kOnJlcGVhdGluZy1saW5lYXItZ3JhZGllbnQoNDVkZWcsI2YwZjBmMCwjZjBmMGYwIDJweCwjZThlOGU4IDJweCwjZThlOGU4IDRweCk7Ym9yZGVyOjFweCBzb2xpZCAjY2NjIj48L2k+VmFjYW5jZXM8L3NwYW4+CiAgICAgICAgPHNwYW4+PGkgc3R5bGU9ImJhY2tncm91bmQ6I2QzNTQwMCI+PC9pPlNlbS4gY291cmFudGU8L3NwYW4+CiAgICA8L2Rpdj4KPC9kaXY+Cgo8IS0tIE1PREFMIEdBTlRUIC0tPgo8ZGl2IGlkPSJndE1vZCIgY2xhc3M9Im0tb3YiIG9uY2xpY2s9ImlmKGV2ZW50LnRhcmdldD09PXRoaXMpY2xvc2VHdE1vZGFsKCkiPgogICAgPGRpdiBjbGFzcz0ibS1ib3giIHN0eWxlPSJ3aWR0aDo1MDBweDsiPgogICAgICAgIDxoMz48aSBjbGFzcz0iZmFzIGZhLXN0cmVhbSI+PC9pPiA8c3BhbiBpZD0iZ3QtbXQiPk5vdXZlbGxlIMOpY2jDqWFuY2U8L3NwYW4+PC9oMz4KICAgICAgICA8aW5wdXQgdHlwZT0iaGlkZGVuIiBpZD0iZ3QtZWlkIj4KICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWdyb3VwIiBzdHlsZT0ibWFyZ2luLWJvdHRvbToxMHB4Ij48bGFiZWw+SW50aXR1bMOpICo8L2xhYmVsPjxpbnB1dCB0eXBlPSJ0ZXh0IiBpZD0iZ3QtbmFtZSIgY2xhc3M9ImZvcm0tY29udHJvbCIgcGxhY2Vob2xkZXI9IkNvbnNlaWxzIGRlIGNsYXNzZSBUMiI+PC9kaXY+CiAgICAgICAgPGRpdiBjbGFzcz0ibS1yb3ciPgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWdyb3VwIj48bGFiZWw+Q29kZTwvbGFiZWw+PGlucHV0IHR5cGU9InRleHQiIGlkPSJndC1jb2RlIiBjbGFzcz0iZm9ybS1jb250cm9sIiBwbGFjZWhvbGRlcj0iQSA0IiBtYXhsZW5ndGg9IjYiPjwvZGl2PgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWdyb3VwIj48bGFiZWw+Q2F0w6lnb3JpZTwvbGFiZWw+CiAgICAgICAgICAgICAgICA8c2VsZWN0IGlkPSJndC1jYXQiIGNsYXNzPSJmb3JtLWNvbnRyb2wiPgogICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IkFkbWluaXN0cmF0aWYiPkFkbWluaXN0cmF0aWY8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSLDiWzDqHZlcyBCRVAiPsOJbMOodmVzIEJFUDwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IkNvbmNlcnRhdGlvbnMiPkNvbmNlcnRhdGlvbnM8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJEaXNwb3NpdGlmcyBQw6lkYWdvZ2lxdWVzIj5EaXNwb3NpdGlmcyBQw6lkYWdvZ2lxdWVzPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iU3VpdmkgZGVzIMOpbMOodmVzIj5TdWl2aSBkZXMgw6lsw6h2ZXM8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJJbnRlcnZlbmFudHMiPkludGVydmVuYW50czwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9Ik51bcOpcmlxdWUiPk51bcOpcmlxdWU8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJPcmllbnRhdGlvbiI+T3JpZW50YXRpb248L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJQcm9qZXRzIj5Qcm9qZXRzPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iUG9ydGVzIE91dmVydGVzIj5Qb3J0ZXMgT3V2ZXJ0ZXM8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJSZXNzb3VyY2VzIEh1bWFpbmVzIj5SZXNzb3VyY2VzIEh1bWFpbmVzPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iU8OpY3VyaXTDqSI+U8OpY3VyaXTDqTwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IkF1dHJlIj5BdXRyZTwvb3B0aW9uPgogICAgICAgICAgICAgICAgPC9zZWxlY3Q+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgIDwvZGl2PgogICAgICAgIDxkaXYgY2xhc3M9Im0tcm93Ij4KICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1ncm91cCI+PGxhYmVsPlNlbWFpbmUgZMOpYnV0IChuwrAgSVNPKTwvbGFiZWw+PGlucHV0IHR5cGU9Im51bWJlciIgaWQ9Imd0LXdzIiBjbGFzcz0iZm9ybS1jb250cm9sIiBtaW49IjEiIG1heD0iNTMiPjwvZGl2PgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWdyb3VwIj48bGFiZWw+U2VtYWluZSBmaW4gKG7CsCBJU08pPC9sYWJlbD48aW5wdXQgdHlwZT0ibnVtYmVyIiBpZD0iZ3Qtd2UiIGNsYXNzPSJmb3JtLWNvbnRyb2wiIG1pbj0iMSIgbWF4PSI1MyI+PC9kaXY+CiAgICAgICAgPC9kaXY+CiAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1ncm91cCIgc3R5bGU9Im1hcmdpbi1ib3R0b206MTBweCI+PGxhYmVsPlJlc3BvbnNhYmxlPC9sYWJlbD48c2VsZWN0IGlkPSJndC1yZXNwIiBjbGFzcz0iZm9ybS1jb250cm9sIj48b3B0aW9uIHZhbHVlPSIiPi0tIENob2lzaXIgLS08L29wdGlvbj48L3NlbGVjdD48L2Rpdj4KICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWdyb3VwIiBzdHlsZT0ibWFyZ2luLWJvdHRvbToxMHB4Ij48bGFiZWw+Tm90ZXM8L2xhYmVsPgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJydGUtd3JhcCI+PGRpdiBjbGFzcz0icnRlLWJhciI+CiAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0iZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2JvbGQnKSIgdGl0bGU9IkdyYXMiPjxiPkc8L2I+PC9idXR0b24+CiAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0iZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2l0YWxpYycpIiB0aXRsZT0iSXRhbGlxdWUiPjxpPkk8L2k+PC9idXR0b24+CiAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0iZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ3VuZGVybGluZScpIiB0aXRsZT0iU291bGlnbsOpIj48dT5TPC91PjwvYnV0dG9uPgogICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9InJ0ZS1zZXAiPjwvc3Bhbj4KICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJkb2N1bWVudC5leGVjQ29tbWFuZCgnaW5zZXJ0VW5vcmRlcmVkTGlzdCcpIiB0aXRsZT0iUHVjZXMiPjxpIGNsYXNzPSJmYXMgZmEtbGlzdC11bCI+PC9pPjwvYnV0dG9uPgogICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9ImRvY3VtZW50LmV4ZWNDb21tYW5kKCdpbnNlcnRPcmRlcmVkTGlzdCcpIiB0aXRsZT0iTnVtw6lyb3TDqWUiPjxpIGNsYXNzPSJmYXMgZmEtbGlzdC1vbCI+PC9pPjwvYnV0dG9uPgogICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9InJ0ZS1zZXAiPjwvc3Bhbj4KICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJydGVDb2xvcih0aGlzKSIgdGl0bGU9IkNvdWxldXIiPjxpIGNsYXNzPSJmYXMgZmEtcGFsZXR0ZSI+PC9pPjwvYnV0dG9uPgogICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9InJ0ZUxpbmsodGhpcykiIHRpdGxlPSJMaWVuIj48aSBjbGFzcz0iZmFzIGZhLWxpbmsiPjwvaT48L2J1dHRvbj4KICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJydGUtc2VwIj48L3NwYW4+CiAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0iZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ3VuZG8nKSIgdGl0bGU9IkFubnVsZXIiPjxpIGNsYXNzPSJmYXMgZmEtdW5kbyI+PC9pPjwvYnV0dG9uPgogICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9ImRvY3VtZW50LmV4ZWNDb21tYW5kKCdyZWRvJykiIHRpdGxlPSJSZXN0YXVyZXIiPjxpIGNsYXNzPSJmYXMgZmEtcmVkbyI+PC9pPjwvYnV0dG9uPgogICAgICAgICAgICA8c3BhbiBjbGFzcz0icnRlLXNlcCI+PC9zcGFuPjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJkb2N1bWVudC5leGVjQ29tbWFuZCgnanVzdGlmeUxlZnQnKSIgdGl0bGU9IkFsaWduZXIgw6AgZ2F1Y2hlIj48aSBjbGFzcz0iZmFzIGZhLWFsaWduLWxlZnQiPjwvaT48L2J1dHRvbj48YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0iZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2p1c3RpZnlDZW50ZXInKSIgdGl0bGU9IkNlbnRyZXIiPjxpIGNsYXNzPSJmYXMgZmEtYWxpZ24tY2VudGVyIj48L2k+PC9idXR0b24+PGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9ImRvY3VtZW50LmV4ZWNDb21tYW5kKCdqdXN0aWZ5RnVsbCcpIiB0aXRsZT0iSnVzdGlmaWVyIj48aSBjbGFzcz0iZmFzIGZhLWFsaWduLWp1c3RpZnkiPjwvaT48L2J1dHRvbj4KPC9kaXY+PGRpdiBjbGFzcz0icnRlLWJvZHkiIGlkPSJndC1ub3RlcyIgY29udGVudGVkaXRhYmxlPSJ0cnVlIiBzdHlsZT0iYm9yZGVyOjJweCBzb2xpZCAjZTBlMGUwO2JvcmRlci1yYWRpdXM6MCAwIDhweCA4cHg7cGFkZGluZzoxMHB4O21pbi1oZWlnaHQ6ODBweCI+PC9kaXY+PC9kaXY+CiAgICAgICAgPC9kaXY+CiAgICAgICAgPGRpdiBjbGFzcz0ibS1hY3RzIiBzdHlsZT0icGFkZGluZy10b3A6MTJweDtib3JkZXItdG9wOjFweCBzb2xpZCAjZWVlO2Rpc3BsYXk6ZmxleDtnYXA6OHB4O2p1c3RpZnktY29udGVudDpmbGV4LWVuZCI+CiAgICAgICAgICAgIDxidXR0b24gdHlwZT0iYnV0dG9uIiBjbGFzcz0ibWIgbWItZGVsIiBpZD0iZ3QtZGVsLWJ0biIgc3R5bGU9ImRpc3BsYXk6bm9uZSIgb25jbGljaz0id2luZG93LmRlbEd0RnJvbU1vZGFsKCkiPjxpIGNsYXNzPSJmYXMgZmEtdHJhc2giPjwvaT4gU3VwcHJpbWVyPC9idXR0b24+CiAgICAgICAgICAgIDxidXR0b24gdHlwZT0iYnV0dG9uIiBjbGFzcz0ibWIgbWItYyIgb25jbGljaz0id2luZG93LmNsb3NlR3RNb2RhbCgpIj5Bbm51bGVyPC9idXR0b24+CiAgICAgICAgICAgIDxidXR0b24gdHlwZT0iYnV0dG9uIiBjbGFzcz0ibWIgbWItb2siIG9uY2xpY2s9IndpbmRvdy5zYXZlR3QoKSI+PGkgY2xhc3M9ImZhcyBmYS1jaGVjayI+PC9pPiBFbnJlZ2lzdHJlcjwvYnV0dG9uPgogICAgICAgIDwvZGl2PgogICAgPC9kaXY+CjwvZGl2PgogICAgPCEtLSDilZDilZDilZAgUFJPQ8OJRFVSRVMg4pWQ4pWQ4pWQIC0tPgogICAgPGRpdiBpZD0ibWVudTEyIiBjbGFzcz0ic2VjdGlvbiI+CiAgICAgICAgPGRpdiBjbGFzcz0iZXYtaGVhZGVyIiBzdHlsZT0iZGlzcGxheTpmbGV4O2p1c3RpZnktY29udGVudDpzcGFjZS1iZXR3ZWVuO2FsaWduLWl0ZW1zOmNlbnRlcjttYXJnaW4tYm90dG9tOjE2cHgiPgogICAgICAgICAgICA8aDIgc3R5bGU9ImNvbG9yOnZhcigtLWhlYWRlcik7Zm9udC1zaXplOjEuMDVyZW07ZGlzcGxheTpmbGV4O2FsaWduLWl0ZW1zOmNlbnRlcjtnYXA6OHB4O21hcmdpbjowIj48aSBjbGFzcz0iZmFzIGZhLWJvb2siPjwvaT4gUHJvY8OpZHVyZXM8L2gyPgogICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJhY3Rpb24tYnRuIiBzdHlsZT0iYmFja2dyb3VuZDp2YXIoLS1oZWFkZXIpO2NvbG9yOiNmZmY7cGFkZGluZzoxMHB4IDIwcHg7Zm9udC1zaXplOi45NXJlbTtmb250LXdlaWdodDo3MDA7Ym9yZGVyLXJhZGl1czoxMHB4O2JvcmRlcjpub25lO2N1cnNvcjpwb2ludGVyO2JveC1zaGFkb3c6MCAzcHggMTBweCByZ2JhKDQ0LDYyLDgwLC4zKSIgb25jbGljaz0ib3BlblByb2NNb2RhbCgpIj48aSBjbGFzcz0iZmFzIGZhLXBsdXMiPjwvaT4gTm91dmVsbGUgcHJvY8OpZHVyZTwvYnV0dG9uPgogICAgICAgIDwvZGl2PgogICAgICAgIDxkaXYgY2xhc3M9InByb2MtZmlsdGVycyIgaWQ9InByb2MtZmlsdGVycyI+PC9kaXY+CiAgICAgICAgPGRpdiBpZD0icHJvYy12aWV3LWFyZWEiIHN0eWxlPSJkaXNwbGF5Om5vbmUiPjwvZGl2PgogICAgICAgIDxkaXYgY2xhc3M9InByb2MtbGlzdCIgaWQ9InByb2MtbGlzdCI+PC9kaXY+CiAgICA8L2Rpdj4KCjwvZGl2PjwhLS0gL21haW4tY29udGVudCAtLT4KCjxkaXYgaWQ9InByaW50LXpvbmUiIGNsYXNzPSJwcmludC1hcmVhIj48L2Rpdj4KCjxzY3JpcHQ+CiAgICAvLyBEZXRlY3QgaWYgcnVubmluZyBpbnNpZGUgUElMT1RFIHdyYXBwZXIKICAgIGlmICh3aW5kb3cucGFyZW50ICE9PSB3aW5kb3cpIHsKICAgICAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5hZGQoJ2luLXdyYXBwZXInKTsKICAgIH0KCiAgICBsZXQgYXBwRGF0YSA9IHsgCiAgICAgICAgc2V0dGluZ3M6IHsgc2Nob29sOiAiTHljw6llIiwgdXNlcjogIlByb3Zpc2V1ciIsIGxvZ286ICIiLCBzaWduYXR1cmU6ICIiLCBjdXN0b21FbnRUeXBlczogW10sIGN1c3RvbVJldVR5cGVzOiBbXSwgem9uZTogIkIiIH0sIAogICAgICAgIGVudHJldGllbnM6IFtdLCByZXVuaW9uczogW10sIHN1aXZpRWxldmVzOiBbXSwgCiAgICAgICAgdG9kbzogeyB1cmdlbnQ6W10sIHBsYW46W10sIHBvc3NpYmxlOltdLCBkZWxlZ2F0ZTpbXSB9LCAKICAgICAgICBjYWxlbmRhcjogW10sCiAgICAgICAgZXZlbnRzOiBbXSwKICAgICAgICAgICAgcHJvY2VkdXJlczogW10sCiAgICAgICAgZ2FudHQ6IFtdCiAgICB9OwogICAgbGV0IGNoYXJ0SW5zdGFuY2VzID0ge307CiAgICBsZXQgY3VycmVudEVkaXRJZCA9IG51bGw7CiAgICBsZXQgY3VycmVudEVkaXRUeXBlID0gbnVsbDsgCgogICAgd2luZG93Lm9ubG9hZCA9ICgpID0+IHsKICAgICAgICBsb2FkRGF0YSgpOwogICAgICAgIHJlc2V0QWxsRGF0ZXMoKTsKICAgICAgICBpbml0RG9jVGVtcGxhdGVzKCk7CiAgICAgICAgcmVuZGVyVG9kbygpOyBjaGVja0RhaWx5VGFza3MoKTsgdXBkYXRlUHJldmlld3MoKTsgc3dpdGNoTWVudSgnbWVudTInKTsgYXBwbHlTZXBhcmF0b3JzKCk7CiAgICAgICAgbG9hZEN1c3RvbVR5cGVzKCk7CiAgICB9OwoKICAgIGZ1bmN0aW9uIHJlc2V0QWxsRGF0ZXMoKSB7CiAgICAgICAgY29uc3QgdG9kYXkgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkuc3BsaXQoJ1QnKVswXTsKICAgICAgICBbJ2VudC1kYXRlJywncmV1LWRhdGUnLCdkaXItZGF0ZScsJ3N1aXZpLWRhdGUnLCdjYWwtZGF0ZSddLmZvckVhY2goaWQgPT4geyBjb25zdCBlbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKTsgaWYoZWwpIGVsLnZhbHVlID0gdG9kYXk7IH0pOwogICAgfQoKICAgIAogICAgLy8g4pWQ4pWQ4pWQIFNBVVZFR0FSREUgRklDSElFUiBMT0NBTCDilZDilZDilZAKICAgIHZhciBfZmlsZUhhbmRsZSA9IG51bGw7CiAgICB2YXIgX2RpckhhbmRsZSA9IG51bGw7CgogICAgZnVuY3Rpb24gc3RvcmVEaXJIYW5kbGUoaGFuZGxlKXsKICAgICAgICBvcGVuSGFuZGxlREIoKS50aGVuKGZ1bmN0aW9uKGRiKXsKICAgICAgICAgICAgdmFyIHR4PWRiLnRyYW5zYWN0aW9uKCdoYW5kbGVzJywncmVhZHdyaXRlJyk7CiAgICAgICAgICAgIHR4Lm9iamVjdFN0b3JlKCdoYW5kbGVzJykucHV0KGhhbmRsZSwnc2F2ZURpcicpOwogICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uKCl7fSk7CiAgICB9CiAgICBmdW5jdGlvbiBnZXRTdG9yZWREaXJIYW5kbGUoKXsKICAgICAgICByZXR1cm4gb3BlbkhhbmRsZURCKCkudGhlbihmdW5jdGlvbihkYil7CiAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlKXsKICAgICAgICAgICAgICAgIHZhciB0eD1kYi50cmFuc2FjdGlvbignaGFuZGxlcycsJ3JlYWRvbmx5Jyk7CiAgICAgICAgICAgICAgICB2YXIgcnE9dHgub2JqZWN0U3RvcmUoJ2hhbmRsZXMnKS5nZXQoJ3NhdmVEaXInKTsKICAgICAgICAgICAgICAgIHJxLm9uc3VjY2Vzcz1mdW5jdGlvbigpe3Jlc29sdmUocnEucmVzdWx0fHxudWxsKTt9OwogICAgICAgICAgICAgICAgcnEub25lcnJvcj1mdW5jdGlvbigpe3Jlc29sdmUobnVsbCk7fTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24oKXtyZXR1cm4gbnVsbDt9KTsKICAgIH0KCiAgICAvLyBJbmRleGVkREIgcG91ciBwZXJzaXN0ZXIgbGUgZmlsZUhhbmRsZSBlbnRyZSBzZXNzaW9ucwogICAgZnVuY3Rpb24gb3BlbkhhbmRsZURCKCl7CiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUscmVqZWN0KXsKICAgICAgICAgICAgdmFyIHJxPWluZGV4ZWREQi5vcGVuKCdjYWRpcl9oYW5kbGVzJywxKTsKICAgICAgICAgICAgcnEub251cGdyYWRlbmVlZGVkPWZ1bmN0aW9uKGUpe2UudGFyZ2V0LnJlc3VsdC5jcmVhdGVPYmplY3RTdG9yZSgnaGFuZGxlcycpO307CiAgICAgICAgICAgIHJxLm9uc3VjY2Vzcz1mdW5jdGlvbihlKXtyZXNvbHZlKGUudGFyZ2V0LnJlc3VsdCk7fTsKICAgICAgICAgICAgcnEub25lcnJvcj1mdW5jdGlvbigpe3JlamVjdCgpO307CiAgICAgICAgfSk7CiAgICB9CiAgICBmdW5jdGlvbiBzdG9yZUhhbmRsZShoYW5kbGUpewogICAgICAgIG9wZW5IYW5kbGVEQigpLnRoZW4oZnVuY3Rpb24oZGIpewogICAgICAgICAgICB2YXIgdHg9ZGIudHJhbnNhY3Rpb24oJ2hhbmRsZXMnLCdyZWFkd3JpdGUnKTsKICAgICAgICAgICAgdHgub2JqZWN0U3RvcmUoJ2hhbmRsZXMnKS5wdXQoaGFuZGxlLCdzYXZlRmlsZScpOwogICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uKCl7fSk7CiAgICB9CiAgICBmdW5jdGlvbiBnZXRTdG9yZWRIYW5kbGUoKXsKICAgICAgICByZXR1cm4gb3BlbkhhbmRsZURCKCkudGhlbihmdW5jdGlvbihkYil7CiAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlKXsKICAgICAgICAgICAgICAgIHZhciB0eD1kYi50cmFuc2FjdGlvbignaGFuZGxlcycsJ3JlYWRvbmx5Jyk7CiAgICAgICAgICAgICAgICB2YXIgcnE9dHgub2JqZWN0U3RvcmUoJ2hhbmRsZXMnKS5nZXQoJ3NhdmVGaWxlJyk7CiAgICAgICAgICAgICAgICBycS5vbnN1Y2Nlc3M9ZnVuY3Rpb24oKXtyZXNvbHZlKHJxLnJlc3VsdHx8bnVsbCk7fTsKICAgICAgICAgICAgICAgIHJxLm9uZXJyb3I9ZnVuY3Rpb24oKXtyZXNvbHZlKG51bGwpO307CiAgICAgICAgICAgIH0pOwogICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uKCl7cmV0dXJuIG51bGw7fSk7CiAgICB9CiAgICBmdW5jdGlvbiBjbGVhclN0b3JlZEhhbmRsZSgpewogICAgICAgIG9wZW5IYW5kbGVEQigpLnRoZW4oZnVuY3Rpb24oZGIpewogICAgICAgICAgICB2YXIgdHg9ZGIudHJhbnNhY3Rpb24oJ2hhbmRsZXMnLCdyZWFkd3JpdGUnKTsKICAgICAgICAgICAgdHgub2JqZWN0U3RvcmUoJ2hhbmRsZXMnKS5kZWxldGUoJ3NhdmVGaWxlJyk7CiAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24oKXt9KTsKICAgIH0KCiAgICAvLyBDaG9pc2lyIHVuIGZpY2hpZXIgZGUgc2F1dmVnYXJkZQogICAgYXN5bmMgZnVuY3Rpb24gcGlja1NhdmVGaWxlKCl7CiAgICAgICAgdHJ5ewogICAgICAgICAgICAvLyBDaG9pc2lyIHVuIGRvc3NpZXIKICAgICAgICAgICAgdmFyIGRpckhhbmRsZT1hd2FpdCB3aW5kb3cuc2hvd0RpcmVjdG9yeVBpY2tlcih7bW9kZToncmVhZHdyaXRlJ30pOwogICAgICAgICAgICAvLyBDcsOpZXIgb3Ugb3V2cmlyIGxlIGZpY2hpZXIgZGFucyBjZSBkb3NzaWVyCiAgICAgICAgICAgIHZhciBmaWxlSGFuZGxlPWF3YWl0IGRpckhhbmRsZS5nZXRGaWxlSGFuZGxlKCdjYWRpcl9kYXRhLmpzb24nLHtjcmVhdGU6dHJ1ZX0pOwogICAgICAgICAgICBfZmlsZUhhbmRsZT1maWxlSGFuZGxlOwogICAgICAgICAgICBfZGlySGFuZGxlPWRpckhhbmRsZTsKICAgICAgICAgICAgc3RvcmVIYW5kbGUoZmlsZUhhbmRsZSk7CiAgICAgICAgICAgIHN0b3JlRGlySGFuZGxlKGRpckhhbmRsZSk7CiAgICAgICAgICAgIGF3YWl0IHdyaXRlVG9GaWxlKCk7CiAgICAgICAgICAgIHVwZGF0ZUZpbGVVSSgpOwogICAgICAgIH1jYXRjaChlKXsKICAgICAgICAgICAgaWYoZS5uYW1lIT09J0Fib3J0RXJyb3InKSBhbGVydCgnRXJyZXVyIDogJytlLm1lc3NhZ2UpOwogICAgICAgIH0KICAgIH0KCiAgICAvLyBBdXNzaSBwZXJtZXR0cmUgZGUgY2hvaXNpciB1biBmaWNoaWVyIGV4aXN0YW50CiAgICBhc3luYyBmdW5jdGlvbiBwaWNrRXhpc3RpbmdGaWxlKCl7CiAgICAgICAgdHJ5ewogICAgICAgICAgICB2YXIgaGFuZGxlcz1hd2FpdCB3aW5kb3cuc2hvd09wZW5GaWxlUGlja2VyKHsKICAgICAgICAgICAgICAgIHR5cGVzOlt7ZGVzY3JpcHRpb246J0pTT04nLGFjY2VwdDp7J2FwcGxpY2F0aW9uL2pzb24nOlsnLmpzb24nXX19XQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgdmFyIGhhbmRsZT1oYW5kbGVzWzBdOwogICAgICAgICAgICBfZmlsZUhhbmRsZT1oYW5kbGU7CiAgICAgICAgICAgIHN0b3JlSGFuZGxlKGhhbmRsZSk7CiAgICAgICAgICAgIC8vIENoYXJnZXIgbGVzIGRvbm7DqWVzIGRlcHVpcyBsZSBmaWNoaWVyCiAgICAgICAgICAgIHZhciBsb2FkZWQ9YXdhaXQgbG9hZEZyb21GaWxlKCk7CiAgICAgICAgICAgIHVwZGF0ZUZpbGVVSSgpOwogICAgICAgICAgICBpZihsb2FkZWQpe2xvY2F0aW9uLnJlbG9hZCgpO30KICAgICAgICB9Y2F0Y2goZSl7CiAgICAgICAgICAgIGlmKGUubmFtZSE9PSdBYm9ydEVycm9yJykgYWxlcnQoJ0VycmV1ciA6ICcrZS5tZXNzYWdlKTsKICAgICAgICB9CiAgICB9CgogICAgLy8gw4ljcmlyZSBkYW5zIGxlIGZpY2hpZXIgY2hvaXNpCiAgICBhc3luYyBmdW5jdGlvbiB3cml0ZVRvRmlsZSgpewogICAgICAgIGlmKCFfZmlsZUhhbmRsZSlyZXR1cm47CiAgICAgICAgdHJ5ewogICAgICAgICAgICB2YXIgd3JpdGFibGU9YXdhaXQgX2ZpbGVIYW5kbGUuY3JlYXRlV3JpdGFibGUoKTsKICAgICAgICAgICAgYXdhaXQgd3JpdGFibGUud3JpdGUoSlNPTi5zdHJpbmdpZnkoYXBwRGF0YSxudWxsLDIpKTsKICAgICAgICAgICAgYXdhaXQgd3JpdGFibGUuY2xvc2UoKTsKICAgICAgICB9Y2F0Y2goZSl7CiAgICAgICAgICAgIGNvbnNvbGUud2Fybignw4ljcml0dXJlIGZpY2hpZXIgw6ljaG91w6llOicsZSk7CiAgICAgICAgICAgIC8vIFNpIHBlcm1pc3Npb24gcmVmdXPDqWUsIHRlbnRlciBkZSByZWRlbWFuZGVyCiAgICAgICAgICAgIGlmKGUubmFtZT09PSdOb3RBbGxvd2VkRXJyb3InKXsKICAgICAgICAgICAgICAgIHRyeXsKICAgICAgICAgICAgICAgICAgICB2YXIgcGVybT1hd2FpdCBfZmlsZUhhbmRsZS5yZXF1ZXN0UGVybWlzc2lvbih7bW9kZToncmVhZHdyaXRlJ30pOwogICAgICAgICAgICAgICAgICAgIGlmKHBlcm09PT0nZ3JhbnRlZCcpewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgdzI9YXdhaXQgX2ZpbGVIYW5kbGUuY3JlYXRlV3JpdGFibGUoKTsKICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdzIud3JpdGUoSlNPTi5zdHJpbmdpZnkoYXBwRGF0YSxudWxsLDIpKTsKICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdzIuY2xvc2UoKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9Y2F0Y2goZTIpe2NvbnNvbGUud2FybignUGVybWlzc2lvbiByZWZ1c8OpZTonLGUyKTt9CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9CgogICAgLy8gQ2hhcmdlciBkZXB1aXMgbGUgZmljaGllcgogICAgYXN5bmMgZnVuY3Rpb24gbG9hZEZyb21GaWxlKCl7CiAgICAgICAgaWYoIV9maWxlSGFuZGxlKXJldHVybiBmYWxzZTsKICAgICAgICB0cnl7CiAgICAgICAgICAgIHZhciBwZXJtPWF3YWl0IF9maWxlSGFuZGxlLnF1ZXJ5UGVybWlzc2lvbih7bW9kZToncmVhZHdyaXRlJ30pOwogICAgICAgICAgICBpZihwZXJtIT09J2dyYW50ZWQnKXsKICAgICAgICAgICAgICAgIHBlcm09YXdhaXQgX2ZpbGVIYW5kbGUucmVxdWVzdFBlcm1pc3Npb24oe21vZGU6J3JlYWR3cml0ZSd9KTsKICAgICAgICAgICAgICAgIGlmKHBlcm0hPT0nZ3JhbnRlZCcpcmV0dXJuIGZhbHNlOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHZhciBmaWxlPWF3YWl0IF9maWxlSGFuZGxlLmdldEZpbGUoKTsKICAgICAgICAgICAgdmFyIHRleHQ9YXdhaXQgZmlsZS50ZXh0KCk7CiAgICAgICAgICAgIHZhciBkYXRhPUpTT04ucGFyc2UodGV4dCk7CiAgICAgICAgICAgIGFwcERhdGE9ZGF0YTsKICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3BlcmRpcl9waWxvdGVfdjEwJyxKU09OLnN0cmluZ2lmeShhcHBEYXRhKSk7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH1jYXRjaChlKXsKICAgICAgICAgICAgY29uc29sZS53YXJuKCdMZWN0dXJlIGZpY2hpZXIgw6ljaG91w6llOicsZSk7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICB9CgogICAgLy8gRMOpbGllciBsZSBmaWNoaWVyCiAgICBmdW5jdGlvbiB1bmxpbmtGaWxlKCl7CiAgICAgICAgaWYoY29uZmlybSgnRMOpbGllciBsZSBkb3NzaWVyIGRlIHNhdXZlZ2FyZGUgP1xuTGVzIGRvbm7DqWVzIHJlc3Rlcm9udCBkYW5zIGxlIG5hdmlnYXRldXIuJykpewogICAgICAgICAgICBfZmlsZUhhbmRsZT1udWxsOwogICAgICAgICAgICBfZGlySGFuZGxlPW51bGw7CiAgICAgICAgICAgIGNsZWFyU3RvcmVkSGFuZGxlKCk7CiAgICAgICAgICAgIG9wZW5IYW5kbGVEQigpLnRoZW4oZnVuY3Rpb24oZGIpe3ZhciB0eD1kYi50cmFuc2FjdGlvbignaGFuZGxlcycsJ3JlYWR3cml0ZScpO3R4Lm9iamVjdFN0b3JlKCdoYW5kbGVzJykuZGVsZXRlKCdzYXZlRGlyJyk7fSkuY2F0Y2goZnVuY3Rpb24oKXt9KTsKICAgICAgICAgICAgdXBkYXRlRmlsZVVJKCk7CiAgICAgICAgfQogICAgfQoKICAgIC8vIE1pc2Ugw6Agam91ciBkZSBsJ2FmZmljaGFnZQogICAgZnVuY3Rpb24gdXBkYXRlRmlsZVVJKCl7CiAgICAgICAgdmFyIGVsPWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWxlLWxpbmstc3RhdHVzJyk7CiAgICAgICAgdmFyIGJ0bj1kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmlsZS11bmxpbmstYnRuJyk7CiAgICAgICAgaWYoIWVsKXJldHVybjsKICAgICAgICBpZihfZmlsZUhhbmRsZSl7CiAgICAgICAgICAgIHZhciBkaXJOYW1lPV9kaXJIYW5kbGU/X2RpckhhbmRsZS5uYW1lKycvJzonJzsKICAgICAgICAgICAgZWwuaW5uZXJIVE1MPSc8aSBjbGFzcz0iZmFzIGZhLWNoZWNrLWNpcmNsZSIgc3R5bGU9ImNvbG9yOiMyMkM1NUUiPjwvaT4gPHN0cm9uZz4nK2Rpck5hbWUrX2ZpbGVIYW5kbGUubmFtZSsnPC9zdHJvbmc+IDxzcGFuIHN0eWxlPSJjb2xvcjojMjJDNTVFO2ZvbnQtc2l6ZTouN3JlbSI+KHNhdXZlZ2FyZGUgYXV0b21hdGlxdWUpPC9zcGFuPic7CiAgICAgICAgICAgIGlmKGJ0bilidG4uc3R5bGUuZGlzcGxheT0naW5saW5lLWZsZXgnOwogICAgICAgIH1lbHNlewogICAgICAgICAgICBlbC5pbm5lckhUTUw9JzxpIGNsYXNzPSJmYXMgZmEtdW5saW5rIiBzdHlsZT0iY29sb3I6I2FhYSI+PC9pPiA8c3BhbiBzdHlsZT0iY29sb3I6Izk5OSI+QXVjdW4gZG9zc2llciBzw6lsZWN0aW9ubsOpPC9zcGFuPic7CiAgICAgICAgICAgIGlmKGJ0bilidG4uc3R5bGUuZGlzcGxheT0nbm9uZSc7CiAgICAgICAgfQogICAgfQoKICAgIC8vIFJlc3RhdXJlciBsZSBoYW5kbGUgYXUgZMOpbWFycmFnZQogICAgYXN5bmMgZnVuY3Rpb24gcmVzdG9yZUZpbGVIYW5kbGUoKXsKICAgICAgICBpZighd2luZG93LnNob3dEaXJlY3RvcnlQaWNrZXImJiF3aW5kb3cuc2hvd1NhdmVGaWxlUGlja2VyKXJldHVybjsKICAgICAgICB2YXIgZGg9YXdhaXQgZ2V0U3RvcmVkRGlySGFuZGxlKCk7CiAgICAgICAgaWYoZGgpX2RpckhhbmRsZT1kaDsKICAgICAgICB2YXIgaGFuZGxlPWF3YWl0IGdldFN0b3JlZEhhbmRsZSgpOwogICAgICAgIGlmKGhhbmRsZSl7CiAgICAgICAgICAgIF9maWxlSGFuZGxlPWhhbmRsZTsKICAgICAgICAgICAgdXBkYXRlRmlsZVVJKCk7CiAgICAgICAgICAgIC8vIFRlbnRlciBkZSBjaGFyZ2VyIGxlcyBkb25uw6llcyBkdSBmaWNoaWVyIChwbHVzIHLDqWNlbnRlcyA/KQogICAgICAgICAgICB0cnl7CiAgICAgICAgICAgICAgICB2YXIgcGVybT1hd2FpdCBoYW5kbGUucXVlcnlQZXJtaXNzaW9uKHttb2RlOidyZWFkd3JpdGUnfSk7CiAgICAgICAgICAgICAgICBpZihwZXJtPT09J2dyYW50ZWQnKXsKICAgICAgICAgICAgICAgICAgICB2YXIgZmlsZT1hd2FpdCBoYW5kbGUuZ2V0RmlsZSgpOwogICAgICAgICAgICAgICAgICAgIHZhciB0ZXh0PWF3YWl0IGZpbGUudGV4dCgpOwogICAgICAgICAgICAgICAgICAgIHZhciBmaWxlRGF0YT1KU09OLnBhcnNlKHRleHQpOwogICAgICAgICAgICAgICAgICAgIC8vIENvbXBhcmVyIGxlcyB0aW1lc3RhbXBzIHBvdXIgcHJlbmRyZSBsZSBwbHVzIHLDqWNlbnQKICAgICAgICAgICAgICAgICAgICB2YXIgZmlsZU1vZD1maWxlLmxhc3RNb2RpZmllZHx8MDsKICAgICAgICAgICAgICAgICAgICB2YXIgbG9jYWxTdHI9bG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3BlcmRpcl9waWxvdGVfdjEwJyk7CiAgICAgICAgICAgICAgICAgICAgaWYobG9jYWxTdHIpewogICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBsZSBmaWNoaWVyIGVzdCBwbHVzIHLDqWNlbnQsIGNoYXJnZXIgZGVwdWlzIGxlIGZpY2hpZXIKICAgICAgICAgICAgICAgICAgICAgICAgYXBwRGF0YT1maWxlRGF0YTsKICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3BlcmRpcl9waWxvdGVfdjEwJyxKU09OLnN0cmluZ2lmeShhcHBEYXRhKSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9Y2F0Y2goZSl7Y29uc29sZS5sb2coJ1Jlc3RhdXJhdGlvbiBhdXRvOiBlbiBhdHRlbnRlIGRlIHBlcm1pc3Npb24gdXRpbGlzYXRldXInKTt9CiAgICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIHNhdmVEYXRhKCl7CiAgICAgICAgdHJ5e2xvY2FsU3RvcmFnZS5zZXRJdGVtKCdwZXJkaXJfcGlsb3RlX3YxMCcsSlNPTi5zdHJpbmdpZnkoYXBwRGF0YSkpO2lmKF9maWxlSGFuZGxlKXdyaXRlVG9GaWxlKCk7fWNhdGNoKGUpe2NvbnNvbGUuZXJyb3IoJ3NhdmVEYXRhOicsZSk7fQogICAgICAgIHRyeXt2YXIgbXNnPWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhdXRvLXNhdmUtbXNnJyk7aWYobXNnKXttc2cuc3R5bGUuZGlzcGxheT0nZmxleCc7c2V0VGltZW91dChmdW5jdGlvbigpe21zZy5zdHlsZS5kaXNwbGF5PSdub25lJzt9LDEwMDApO319Y2F0Y2goZTIpe30KICAgIH0KICAgIAogICAgZnVuY3Rpb24gbG9hZERhdGEoKSB7IAogICAgICAgIGNvbnN0IGQgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgncGVyZGlyX3BpbG90ZV92MTAnKTsgCiAgICAgICAgLy8gTWlncmF0aW9uIGRlcHVpcyB2OS45IHNpIG7DqWNlc3NhaXJlCiAgICAgICAgY29uc3Qgb2xkID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3BlcmRpcl9waWxvdGVfdjknKTsKICAgICAgICBpZihkKSB7CiAgICAgICAgICAgIGFwcERhdGEgPSBKU09OLnBhcnNlKGQpOyAKICAgICAgICB9IGVsc2UgaWYgKG9sZCkgewogICAgICAgICAgICBhcHBEYXRhID0gSlNPTi5wYXJzZShvbGQpOwogICAgICAgICAgICBzYXZlRGF0YSgpOyAvLyBTYXZlIGFzIG5ldyB2ZXJzaW9uCiAgICAgICAgfQogICAgICAgIAogICAgICAgIC8vIEluaXQgc3RydWN0dXJlcyBpZiBtaXNzaW5nCiAgICAgICAgaWYoIWFwcERhdGEudG9kbykgYXBwRGF0YS50b2RvID0geyB1cmdlbnQ6W10sIHBsYW46W10sIHBvc3NpYmxlOltdLCBkZWxlZ2F0ZTpbXSB9OwogICAgICAgIGlmKCFhcHBEYXRhLnNldHRpbmdzLmN1c3RvbUVudFR5cGVzKSBhcHBEYXRhLnNldHRpbmdzLmN1c3RvbUVudFR5cGVzID0gW107CiAgICAgICAgaWYoIWFwcERhdGEuc2V0dGluZ3MuY3VzdG9tUmV1VHlwZXMpIGFwcERhdGEuc2V0dGluZ3MuY3VzdG9tUmV1VHlwZXMgPSBbXTsKICAgIH0KCiAgICBmdW5jdGlvbiBhZGRDdXN0b21UeXBlKHNlbGVjdElkKSB7CiAgICAgICAgY29uc3QgbmV3VHlwZSA9IHByb21wdCgiRW50cmV6IGxlIG5vdXZlYXUgdHlwZSA6Iik7CiAgICAgICAgaWYgKG5ld1R5cGUpIHsKICAgICAgICAgICAgY29uc3Qgc2VsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoc2VsZWN0SWQpOwogICAgICAgICAgICBjb25zdCBvcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdvcHRpb24nKTsKICAgICAgICAgICAgb3B0LnRleHQgPSBuZXdUeXBlOwogICAgICAgICAgICBzZWwuYWRkKG9wdCwgc2VsW3NlbC5sZW5ndGggLSAxXSk7CiAgICAgICAgICAgIHNlbC52YWx1ZSA9IG5ld1R5cGU7CiAgICAgICAgICAgIGlmKHNlbGVjdElkID09PSAnZW50LXR5cGUnKSBhcHBEYXRhLnNldHRpbmdzLmN1c3RvbUVudFR5cGVzLnB1c2gobmV3VHlwZSk7CiAgICAgICAgICAgIGVsc2UgYXBwRGF0YS5zZXR0aW5ncy5jdXN0b21SZXVUeXBlcy5wdXNoKG5ld1R5cGUpOwogICAgICAgICAgICBzYXZlRGF0YSgpOwogICAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBsb2FkQ3VzdG9tVHlwZXMoKSB7CiAgICAgICAgY29uc3QgZW50U2VsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VudC10eXBlJyk7CiAgICAgICAgYXBwRGF0YS5zZXR0aW5ncy5jdXN0b21FbnRUeXBlcy5mb3JFYWNoKHQgPT4geyBpZighQXJyYXkuZnJvbShlbnRTZWwub3B0aW9ucykuc29tZShvID0+IG8udGV4dCA9PT0gdCkpIHsgY29uc3Qgb3B0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnb3B0aW9uJyk7IG9wdC50ZXh0ID0gdDsgZW50U2VsLmFkZChvcHQsIGVudFNlbFtlbnRTZWwubGVuZ3RoLTFdKTsgfSB9KTsKICAgICAgICBjb25zdCByZXVTZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmV1LXR5cGUnKTsKICAgICAgICBhcHBEYXRhLnNldHRpbmdzLmN1c3RvbVJldVR5cGVzLmZvckVhY2godCA9PiB7IGlmKCFBcnJheS5mcm9tKHJldVNlbC5vcHRpb25zKS5zb21lKG8gPT4gby50ZXh0ID09PSB0KSkgeyBjb25zdCBvcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdvcHRpb24nKTsgb3B0LnRleHQgPSB0OyByZXVTZWwuYWRkKG9wdCwgcmV1U2VsW3JldVNlbC5sZW5ndGgtMV0pOyB9IH0pOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBzd2l0Y2hNZW51KGlkKSB7CiAgICAgICAgaWYoaWQgPT09ICdtZW51OCcpIHJlc2V0RWRpdE1vZGUoKTsKICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcubWVudS1pdGVtJykuZm9yRWFjaChlbD0+ZWwuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJykpOwogICAgICAgIHZhciBtaSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLW1lbnU9IicraWQrJyJdJyk7CiAgICAgICAgaWYobWkpIG1pLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpOwogICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5zZWN0aW9uJykuZm9yRWFjaChlbD0+ZWwuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJykpOwogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKS5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTsKICAgICAgICBjb25zdCB0ID0geydtZW51MSc6J1BhcmFtw6h0cmVzJywnbWVudTInOidUbyBEbyBMaXN0JywnbWVudTMnOidDYWxlbmRyaWVyJywnbWVudTQnOidDb25zZWlsIGRlIERpcmVjdGlvbicsJ21lbnU1JzonU3Vpdmkgw4lsw6h2ZScsJ21lbnU2JzonRW50cmV0aWVucycsJ21lbnU3JzonUsOpdW5pb25zJywnbWVudTgnOidIaXN0b3JpcXVlJywnbWVudTknOidUYWJsZWF1IGRlIEJvcmQnLCdtZW51MTAnOidBY3Rpdml0w6lzIHDDqWRhZ29naXF1ZXMnLCdtZW51MTEnOifDiWNow6lhbmNlcycsJ21lbnUxMic6J1Byb2PDqWR1cmVzJ307CiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2N1cnJlbnQtdGl0bGUnKS5pbm5lclRleHQgPSB0W2lkXSB8fCAnQ0FESVInOwogICAgICAgIHRyeSB7IGlmICh3aW5kb3cucGFyZW50ICE9PSB3aW5kb3cpIHdpbmRvdy5wYXJlbnQuZG9jdW1lbnQudGl0bGUgPSAodFtpZF0gfHwgJ0NBRElSJykgKyAnIOKAlCBQSUxPVEUgU3VpdGUnOyB9IGNhdGNoKGUpIHt9CiAgICAgICAgaWYoaWQ9PT0nbWVudTInKSB7IHJlbmRlclRvZG8oKTsgY2hlY2tEYWlseVRhc2tzKCk7IH0KICAgICAgICBpZihpZD09PSdtZW51MycpIHsgcmVuZGVyVW5pZmllZENhbCgpOyB9CiAgICAgICAgaWYoaWQ9PT0nbWVudTgnKSByZW5kZXJIaXN0b3J5KCk7CiAgICAgICAgaWYoaWQ9PT0nbWVudTknKSByZW5kZXJEYXNoYm9hcmQoKTsKICAgICAgICBpZihpZD09PSdtZW51MScpe2xvYWRTZXR0aW5nc1VJKCk7dXBkYXRlRmlsZVVJKCk7fQogICAgICAgIGlmKGlkPT09J21lbnUxMCcpIHJlbmRlckV2ZW50cygpOwogICAgICAgIGlmKGlkPT09J21lbnUxMicpe2F1dG9SZXNldERvbmUoKTtyZW5kZXJQcm9jZWR1cmVzKCk7fQogICAgICAgIGlmKGlkPT09J21lbnUxMScpIHsgYXV0b1Jlc2V0RG9uZSgpOyBpZighd2luZG93Ll9nYW50dFJlYWR5KSBpbml0R2FudHRWaWV3KCk7IGd0VG9kYXkoKTsgfQogICAgfQoKICAgIAogICAgLy8g4pWQ4pWQ4pWQIFRFTVBMQVRFUyBQQVIgRMOJRkFVVCDilZDilZDilZAKICAgIHZhciBERUZBVUxUX1RFTVBMQVRFUyA9IHsKICAgICAgICBlbnQ6ICc8cD48c3Ryb25nPk9iamV0IDo8L3N0cm9uZz4gLi4uPC9wPjxwPjxzdHJvbmc+w4ljaGFuZ2VzIDo8L3N0cm9uZz48L3A+PHVsPjxsaT4uLi48L2xpPjwvdWw+PHA+PHN0cm9uZz5Ew6ljaXNpb25zIDo8L3N0cm9uZz48L3A+PHA+Li4uPC9wPicsCiAgICAgICAgcmV1OiAnPHA+PHN0cm9uZz5PcmRyZSBkdSBqb3VyIDo8L3N0cm9uZz4gLi4uPC9wPjxwPjxzdHJvbmc+RMOpbGliw6lyYXRpb25zIDo8L3N0cm9uZz48L3A+PHVsPjxsaT4uLi48L2xpPjwvdWw+JywKICAgICAgICBkaXI6ICc8cD48c3Ryb25nPlRow6htZXMgYWJvcmTDqXMgOjwvc3Ryb25nPjwvcD48dWw+PGxpPlDDqWRhZ29naWUgOiAuLi48L2xpPjxsaT5WaWUgU2NvbGFpcmUgOiAuLi48L2xpPjxsaT5Tw6ljdXJpdMOpIDogLi4uPC9saT48bGk+RGl2ZXJzIDogLi4uPC9saT48L3VsPicsCiAgICAgICAgc3Vpdmk6ICc8cD48c3Ryb25nPlNpdHVhdGlvbnMgw6lsw6h2ZXMgOjwvc3Ryb25nPjwvcD48dWw+PGxpPltOT00gUHLDqW5vbV0gOiAuLi48L2xpPjwvdWw+JwogICAgfTsKCiAgICBmdW5jdGlvbiBsb2FkVGVtcGxhdGVzVUkoKSB7CiAgICAgICAgdmFyIHRwbHMgPSBhcHBEYXRhLnNldHRpbmdzLnRlbXBsYXRlcyB8fCBERUZBVUxUX1RFTVBMQVRFUzsKICAgICAgICB2YXIgZWw7CiAgICAgICAgZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndHBsLWVudCcpOyBpZiAoZWwpIGVsLmlubmVySFRNTCA9IHRwbHMuZW50IHx8IERFRkFVTFRfVEVNUExBVEVTLmVudDsKICAgICAgICBlbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0cGwtcmV1Jyk7IGlmIChlbCkgZWwuaW5uZXJIVE1MID0gdHBscy5yZXUgfHwgREVGQVVMVF9URU1QTEFURVMucmV1OwogICAgICAgIGVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RwbC1kaXInKTsgaWYgKGVsKSBlbC5pbm5lckhUTUwgPSB0cGxzLmRpciB8fCBERUZBVUxUX1RFTVBMQVRFUy5kaXI7CiAgICAgICAgZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndHBsLXN1aXZpJyk7IGlmIChlbCkgZWwuaW5uZXJIVE1MID0gdHBscy5zdWl2aSB8fCBERUZBVUxUX1RFTVBMQVRFUy5zdWl2aTsKICAgIH0KCiAgICBmdW5jdGlvbiBzYXZlVGVtcGxhdGVzKCkgewogICAgICAgIGlmICghYXBwRGF0YS5zZXR0aW5ncykgYXBwRGF0YS5zZXR0aW5ncyA9IHt9OwogICAgICAgIGFwcERhdGEuc2V0dGluZ3MudGVtcGxhdGVzID0gewogICAgICAgICAgICBlbnQ6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0cGwtZW50JykuaW5uZXJIVE1MLAogICAgICAgICAgICByZXU6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0cGwtcmV1JykuaW5uZXJIVE1MLAogICAgICAgICAgICBkaXI6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0cGwtZGlyJykuaW5uZXJIVE1MLAogICAgICAgICAgICBzdWl2aTogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RwbC1zdWl2aScpLmlubmVySFRNTAogICAgICAgIH07CiAgICAgICAgc2F2ZURhdGEoKTsKICAgICAgICBhbGVydCgnTW9kw6hsZXMgZW5yZWdpc3Ryw6lzICEnKTsKICAgIH0KCiAgICBmdW5jdGlvbiBnZXRUZW1wbGF0ZSh0eXBlKSB7CiAgICAgICAgdmFyIHRwbHMgPSAoYXBwRGF0YS5zZXR0aW5ncyAmJiBhcHBEYXRhLnNldHRpbmdzLnRlbXBsYXRlcykgPyBhcHBEYXRhLnNldHRpbmdzLnRlbXBsYXRlcyA6IERFRkFVTFRfVEVNUExBVEVTOwogICAgICAgIHJldHVybiB0cGxzW3R5cGVdIHx8IERFRkFVTFRfVEVNUExBVEVTW3R5cGVdIHx8ICcnOwogICAgfQoKICAgIGZ1bmN0aW9uIGluaXREb2NUZW1wbGF0ZXMoKSB7CiAgICAgICAgY29uc3QgaGVhZGVyID0gYDxkaXYgY2xhc3M9Im5vLXByaW50IiBzdHlsZT0ibWFyZ2luLWJvdHRvbToyMHB4OyBib3JkZXItYm90dG9tOjFweCBzb2xpZCAjZWVlOyBwYWRkaW5nLWJvdHRvbToxMHB4OyI+PHN0cm9uZz4ke2FwcERhdGEuc2V0dGluZ3Muc2Nob29sfTwvc3Ryb25nPiB8IERpcmVjdGlvbjwvZGl2PmA7CiAgICAgICAgY29uc3QgZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VudC1jb250ZW51Jyk7IGNvbnN0IHJldSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXUtY29udGVudScpOwogICAgICAgIGNvbnN0IGRpcmMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGlyLWNvbnRlbnUnKTsgY29uc3QgZGlybiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkaXItbm90ZXMnKTsKICAgICAgICBjb25zdCBzdWkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3VpdmktY29udGVudScpOwoKICAgICAgICBpZihlbnQgJiYgZW50LmlubmVyVGV4dC50cmltKCk9PT0iIikgZW50LmlubmVySFRNTCA9IGhlYWRlciArIGdldFRlbXBsYXRlKCdlbnQnKTsKICAgICAgICBpZihyZXUgJiYgcmV1LmlubmVyVGV4dC50cmltKCk9PT0iIikgcmV1LmlubmVySFRNTCA9IGhlYWRlciArIGdldFRlbXBsYXRlKCdyZXUnKTsKICAgICAgICBpZihkaXJjICYmIGRpcmMuaW5uZXJUZXh0LnRyaW0oKT09PSIiKSBkaXJjLmlubmVySFRNTCA9IGdldFRlbXBsYXRlKCdkaXInKTsKICAgICAgICBpZihkaXJuICYmIGRpcm4uaW5uZXJUZXh0LnRyaW0oKT09PSIiKSBkaXJuLmlubmVySFRNTCA9IGA8cD48ZW0+Tm90ZXMgZGUgc8OpYW5jZS4uLjwvZW0+PC9wPmA7CiAgICAgICAgaWYoc3VpICYmIHN1aS5pbm5lclRleHQudHJpbSgpPT09IiIpIHN1aS5pbm5lckhUTUwgPSBoZWFkZXIgKyBnZXRUZW1wbGF0ZSgnc3VpdmknKTsKICAgIH0KCiAgICBmdW5jdGlvbiByYXpQYWdlKG1vZGUpIHsKICAgICAgICBpZighY29uZmlybSgiRWZmYWNlciB0b3V0IGxlIGNvbnRlbnUgZGUgY2V0dGUgcGFnZSA/IikpIHJldHVybjsKICAgICAgICByZXNldEVkaXRNb2RlKCk7CiAgICAgICAgY29uc3QgdG9kYXkgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkuc3BsaXQoJ1QnKVswXTsKICAgICAgICBpZihtb2RlID09PSAnRElSJykgeyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGlyLWRhdGUnKS52YWx1ZSA9IHRvZGF5OyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGlyLXBhcnRzJykudmFsdWUgPSAiIjsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Rpci1jb250ZW51JykuaW5uZXJIVE1MID0gIiI7IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkaXItbm90ZXMnKS5pbm5lckhUTUwgPSAiIjsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Rpci1hdHRhY2htZW50cycpLmlubmVySFRNTCA9ICIiOyB9CiAgICAgICAgZWxzZSBpZiAobW9kZSA9PT0gJ1NVSVZJJykgeyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3VpdmktZGF0ZScpLnZhbHVlID0gdG9kYXk7IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzdWl2aS1wYXJ0cycpLnZhbHVlID0gIiI7IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzdWl2aS1jbGFzc2VzJykudmFsdWUgPSAiIjsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N1aXZpLWNvbnRlbnUnKS5pbm5lckhUTUwgPSAiIjsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N1aXZpLWF0dGFjaG1lbnRzJykuaW5uZXJIVE1MID0gIiI7IH0KICAgICAgICBlbHNlIGlmIChtb2RlID09PSAnRU5UJykgeyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZW50LWRhdGUnKS52YWx1ZSA9IHRvZGF5OyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZW50LW9iamV0JykudmFsdWUgPSAiIjsgcmVzZXRNdWx0aSgnZW50LXN0dWRlbnRzLWNvbnRhaW5lcicsICdlbnQtc3R1ZGVudCcsICdOb20gw4lsw6h2ZScpOyByZXNldE11bHRpKCdlbnQtdGVhY2hlcnMtY29udGFpbmVyJywgJ2VudC10ZWFjaGVyJywgJ05vbSBQZXJzb25uZWwnKTsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VudC1jb250ZW51JykuaW5uZXJIVE1MID0gIiI7IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlbnQtYXR0YWNobWVudHMnKS5pbm5lckhUTUwgPSAiIjsgfQogICAgICAgIGVsc2UgaWYgKG1vZGUgPT09ICdSRVUnKSB7IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXUtZGF0ZScpLnZhbHVlID0gdG9kYXk7IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXUtb2RqJykudmFsdWUgPSAiIjsgcmVzZXRNdWx0aSgncmV1LXN0dWRlbnRzLWNvbnRhaW5lcicsICdyZXUtc3R1ZGVudCcsICdOb20gw4lsw6h2ZScpOyByZXNldE11bHRpKCdyZXUtdGVhY2hlcnMtY29udGFpbmVyJywgJ3JldS10ZWFjaGVyJywgJ05vbSBQZXJzb25uZWwnKTsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JldS1jb250ZW51JykuaW5uZXJIVE1MID0gIiI7IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXUtYXR0YWNobWVudHMnKS5pbm5lckhUTUwgPSAiIjsgfQogICAgICAgIGluaXREb2NUZW1wbGF0ZXMoKTsKICAgIH0KCiAgICAvLyAtLS0gVE9ETyBMT0dJQyAoSU1QUk9WRUQgUkVPUkRFUklORykgLS0tCiAgICBsZXQgZHJhZ2dlZEl0ZW1JZCA9IG51bGw7CiAgICBsZXQgc291cmNlQ29sdW1uID0gbnVsbDsKICAgIAogICAgZnVuY3Rpb24gYWRkVG9kbyh0eXBlKSB7IGNvbnN0IHQ9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYHRvZG8taW5wdXQtJHt0eXBlfWApLnZhbHVlLnRyaW0oKTsgaWYodCl7IGFwcERhdGEudG9kb1t0eXBlXS5wdXNoKHtpZDpEYXRlLm5vdygpLnRvU3RyaW5nKCksIHRleHQ6dCwgaXNGcm9tQWdlbmRhOmZhbHNlfSk7IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGB0b2RvLWlucHV0LSR7dHlwZX1gKS52YWx1ZT0iIjsgc2F2ZURhdGEoKTsgcmVuZGVyVG9kbygpOyB9IH0KICAgIGZ1bmN0aW9uIHJlbW92ZVRvZG8odHlwZSwgaWQpIHsgYXBwRGF0YS50b2RvW3R5cGVdID0gYXBwRGF0YS50b2RvW3R5cGVdLmZpbHRlcih0ID0+IHQuaWQudG9TdHJpbmcoKSAhPT0gaWQudG9TdHJpbmcoKSk7IHNhdmVEYXRhKCk7IHJlbmRlclRvZG8oKTsgfQogICAgZnVuY3Rpb24gdXBkYXRlVG9kb1RleHQodHlwZSwgaWQsIG5ld1RleHQpIHsgY29uc3QgaXRlbSA9IGFwcERhdGEudG9kb1t0eXBlXS5maW5kKHQgPT4gdC5pZC50b1N0cmluZygpID09PSBpZC50b1N0cmluZygpKTsgaWYoaXRlbSkgeyBpdGVtLnRleHQgPSBuZXdUZXh0OyBzYXZlRGF0YSgpOyB9IH0KICAgIGZ1bmN0aW9uIGhhbmRsZUVudGVyKGUsdCl7IGlmKGUua2V5PT09J0VudGVyJykgYWRkVG9kbyh0KTsgfQogICAgCiAgICBmdW5jdGlvbiBkcmFnVG9kbyhlLCBpZCwgc291cmNlQ29sKSB7IAogICAgICAgIGRyYWdnZWRJdGVtSWQgPSBpZC50b1N0cmluZygpOyAKICAgICAgICBzb3VyY2VDb2x1bW4gPSBzb3VyY2VDb2w7IAogICAgICAgIGUuZGF0YVRyYW5zZmVyLnNldERhdGEoInRleHQvcGxhaW4iLCBpZCk7IAogICAgICAgIGUuZGF0YVRyYW5zZmVyLmVmZmVjdEFsbG93ZWQgPSAibW92ZSI7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIGFsbG93RHJvcChlKSB7IAogICAgICAgIGUucHJldmVudERlZmF1bHQoKTsgCiAgICAgICAgY29uc3QgdGFyZ2V0SXRlbSA9IGUudGFyZ2V0LmNsb3Nlc3QoJy50b2RvLWl0ZW0nKTsKICAgICAgICBpZiAodGFyZ2V0SXRlbSkgewogICAgICAgICAgICB0YXJnZXRJdGVtLmNsYXNzTGlzdC5hZGQoJ2RyYWctb3Zlci1pdGVtJyk7CiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy50b2RvLWl0ZW0nKS5mb3JFYWNoKGVsID0+IHsKICAgICAgICAgICAgICAgIGlmKGVsICE9PSB0YXJnZXRJdGVtKSBlbC5jbGFzc0xpc3QucmVtb3ZlKCdkcmFnLW92ZXItaXRlbScpOwogICAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBlLmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LmFkZCgiZHJhZy1vdmVyIik7IAogICAgICAgIH0KICAgIH0KICAgIAogICAgZnVuY3Rpb24gZHJhZ0xlYXZlKGUpIHsgCiAgICAgICAgZS5jdXJyZW50VGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoImRyYWctb3ZlciIpOwogICAgICAgIGlmKGUudGFyZ2V0LmNsb3Nlc3QoJy50b2RvLWl0ZW0nKSkgZS50YXJnZXQuY2xvc2VzdCgnLnRvZG8taXRlbScpLmNsYXNzTGlzdC5yZW1vdmUoJ2RyYWctb3Zlci1pdGVtJyk7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIGRyb3AoZSwgdGFyZ2V0Q29sKSB7CiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy50b2RvLWxpc3QnKS5mb3JFYWNoKGVsID0+IGVsLmNsYXNzTGlzdC5yZW1vdmUoJ2RyYWctb3ZlcicpKTsKICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcudG9kby1pdGVtJykuZm9yRWFjaChlbCA9PiBlbC5jbGFzc0xpc3QucmVtb3ZlKCdkcmFnLW92ZXItaXRlbScpKTsKCiAgICAgICAgaWYgKHNvdXJjZUNvbHVtbiA9PT0gJ0FHRU5EQV9TT1VSQ0UnKSB7CiAgICAgICAgICAgIGNvbnN0IGFnVGFzayA9IGFwcERhdGEuY2FsZW5kYXIuZmluZChjID0+IGMuaWQudG9TdHJpbmcoKSA9PT0gZHJhZ2dlZEl0ZW1JZCk7CiAgICAgICAgICAgIGlmKGFnVGFzaykgYXBwRGF0YS50b2RvW3RhcmdldENvbF0ucHVzaCh7aWQ6IERhdGUubm93KCkudG9TdHJpbmcoKSwgdGV4dDogYWdUYXNrLnRhc2ssIGlzRnJvbUFnZW5kYTogdHJ1ZX0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGNvbnN0IHNvdXJjZUxpc3QgPSBhcHBEYXRhLnRvZG9bc291cmNlQ29sdW1uXTsKICAgICAgICAgICAgY29uc3QgaXRlbUlkeCA9IHNvdXJjZUxpc3QuZmluZEluZGV4KHQgPT4gdC5pZC50b1N0cmluZygpID09PSBkcmFnZ2VkSXRlbUlkKTsKICAgICAgICAgICAgaWYoaXRlbUlkeCA9PT0gLTEpIHJldHVybjsKICAgICAgICAgICAgY29uc3QgW21vdmVkSXRlbV0gPSBzb3VyY2VMaXN0LnNwbGljZShpdGVtSWR4LCAxKTsKCiAgICAgICAgICAgIGNvbnN0IGRyb3BUYXJnZXQgPSBlLnRhcmdldC5jbG9zZXN0KCcudG9kby1pdGVtJyk7CiAgICAgICAgICAgIGlmKGRyb3BUYXJnZXQgJiYgc291cmNlQ29sdW1uID09PSB0YXJnZXRDb2wpIHsKICAgICAgICAgICAgICAgIGNvbnN0IHRhcmdldElkID0gZHJvcFRhcmdldC5nZXRBdHRyaWJ1dGUoJ2RhdGEtaWQnKTsKICAgICAgICAgICAgICAgIGNvbnN0IHRhcmdldElkeCA9IGFwcERhdGEudG9kb1t0YXJnZXRDb2xdLmZpbmRJbmRleCh0ID0+IHQuaWQudG9TdHJpbmcoKSA9PT0gdGFyZ2V0SWQpOwogICAgICAgICAgICAgICAgaWYodGFyZ2V0SWR4ID4gLTEpIHsKICAgICAgICAgICAgICAgICAgICBhcHBEYXRhLnRvZG9bdGFyZ2V0Q29sXS5zcGxpY2UodGFyZ2V0SWR4LCAwLCBtb3ZlZEl0ZW0pOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBhcHBEYXRhLnRvZG9bdGFyZ2V0Q29sXS5wdXNoKG1vdmVkSXRlbSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgYXBwRGF0YS50b2RvW3RhcmdldENvbF0ucHVzaChtb3ZlZEl0ZW0pOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHNhdmVEYXRhKCk7IHJlbmRlclRvZG8oKTsKICAgIH0KCiAgICBmdW5jdGlvbiByZW5kZXJUb2RvKCkgewogICAgICAgIFsndXJnZW50JywncGxhbicsJ3Bvc3NpYmxlJywnZGVsZWdhdGUnXS5mb3JFYWNoKGNvbCA9PiB7CiAgICAgICAgICAgIGNvbnN0IGxpc3RFbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGBsaXN0LSR7Y29sfWApOyBpZighbGlzdEVsKSByZXR1cm47IGxpc3RFbC5pbm5lckhUTUwgPSAiIjsKICAgICAgICAgICAgYXBwRGF0YS50b2RvW2NvbF0uZm9yRWFjaChpdGVtID0+IHsKICAgICAgICAgICAgICAgIGxpc3RFbC5pbm5lckhUTUwgKz0gYDxsaSBjbGFzcz0idG9kby1pdGVtICR7aXRlbS5pc0Zyb21BZ2VuZGE/J2Zyb20tYWdlbmRhJzonJ30iIGRhdGEtaWQ9IiR7aXRlbS5pZH0iIGRyYWdnYWJsZT0idHJ1ZSIgb25kcmFnc3RhcnQ9ImRyYWdUb2RvKGV2ZW50LCAnJHtpdGVtLmlkfScsICcke2NvbH0nKSIgb25kcmFnb3Zlcj0iYWxsb3dEcm9wKGV2ZW50KSIgb25kcmFnbGVhdmU9ImRyYWdMZWF2ZShldmVudCkiPiR7aXRlbS5pc0Zyb21BZ2VuZGE/JzxpIGNsYXNzPSJmYXMgZmEtYmVsbCIgc3R5bGU9ImNvbG9yOiNmMWM0MGY7bWFyZ2luLXJpZ2h0OjhweDsiPjwvaT4nOicnfTxzcGFuIGNvbnRlbnRlZGl0YWJsZT0idHJ1ZSIgb25ibHVyPSJ1cGRhdGVUb2RvVGV4dCgnJHtjb2x9JywnJHtpdGVtLmlkfScsdGhpcy5pbm5lclRleHQpIj4ke2l0ZW0udGV4dH08L3NwYW4+PGRpdiBjbGFzcz0idG9kby1hY3Rpb25zIj48aSBjbGFzcz0iZmFzIGZhLXRyYXNoIiBvbmNsaWNrPSJyZW1vdmVUb2RvKCcke2NvbH0nLCcke2l0ZW0uaWR9JykiPjwvaT48L2Rpdj48L2xpPmA7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0pOwogICAgfQoKICAgIC8vIC0tLSBDQUxFTkRBUiAtLS0KICAgIGZ1bmN0aW9uIGFkZENhbGVuZGFyRXZlbnQoKSB7CiAgICAgICAgY29uc3QgZGF0ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjYWwtZGF0ZScpLnZhbHVlOyBjb25zdCB0YXNrID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NhbC10YXNrJykudmFsdWUudHJpbSgpOwogICAgICAgIGlmKCFkYXRlIHx8ICF0YXNrKSByZXR1cm4gYWxlcnQoIlNhaXNpZSBpbmNvbXBsw6h0ZSIpOwogICAgICAgIGFwcERhdGEuY2FsZW5kYXIucHVzaCh7aWQ6RGF0ZS5ub3coKS50b1N0cmluZygpLCBkYXRlLCB0YXNrfSk7IGFwcERhdGEuY2FsZW5kYXIuc29ydCgoYSxiKT0+IG5ldyBEYXRlKGEuZGF0ZSkgLSBuZXcgRGF0ZShiLmRhdGUpKTsKICAgICAgICBzYXZlRGF0YSgpOyByZW5kZXJDYWxlbmRhcigpOyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2FsLXRhc2snKS52YWx1ZT0iIjsKICAgIH0KICAgIGZ1bmN0aW9uIHJlbmRlckNhbGVuZGFyKCkgewogICAgICAgIHZhciBsaXN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NhbGVuZGFyLWxpc3QnKTsKICAgICAgICBpZiAoIWxpc3QpIHJldHVybjsKICAgICAgICBsaXN0LmlubmVySFRNTCA9ICcnOwogICAgICAgIHZhciB0b2RheSA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKS5zcGxpdCgnVCcpWzBdOwogICAgICAgIHZhciB1cGNvbWluZyA9IGFwcERhdGEuY2FsZW5kYXIuZmlsdGVyKGZ1bmN0aW9uKGMpeyByZXR1cm4gYy50YXNrICYmIGMudGFzay50cmltKCkubGVuZ3RoID4gMyAmJiBjLmRhdGUgPj0gdG9kYXk7IH0pOwoKICAgICAgICAvLyBGdXNpb25uZXIgbGVzIMOpdsOpbmVtZW50cyBHb29nbGUgQ2FsZW5kYXIgc2kgYWN0aXbDqQogICAgICAgIGlmIChfZ2NhbEV2ZW50cyAmJiBfZ2NhbEV2ZW50cy5sZW5ndGgpIHsKICAgICAgICAgICAgX2djYWxFdmVudHMuZm9yRWFjaChmdW5jdGlvbihnZSkgewogICAgICAgICAgICAgICAgaWYgKGdlLmRhdGUgPj0gdG9kYXkgJiYgZ2UudGl0bGUgJiYgZ2UudGl0bGUudHJpbSgpLmxlbmd0aCA+IDMpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgZXhpc3RzID0gdXBjb21pbmcuc29tZShmdW5jdGlvbih1KXsgcmV0dXJuIHUudGFzayA9PT0gZ2UudGl0bGUgJiYgdS5kYXRlID09PSBnZS5kYXRlOyB9KTsKICAgICAgICAgICAgICAgICAgICBpZiAoIWV4aXN0cykgewogICAgICAgICAgICAgICAgICAgICAgICB1cGNvbWluZy5wdXNoKHtpZDonZ2NhbF8nK2dlLmlkLCBkYXRlOmdlLmRhdGUsIHRhc2s6IGdlLnRpdGxlLCBnY2FsOnRydWUsIGNvbG9yOmdlLmNvbG9yLCBjYWxOYW1lOmdlLmNhbE5hbWUsIHRpbWU6Z2UudGltZX0pOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgfQoKICAgICAgICB1cGNvbWluZy5zb3J0KGZ1bmN0aW9uKGEsYil7IHJldHVybiBhLmRhdGUubG9jYWxlQ29tcGFyZShiLmRhdGUpOyB9KTsKICAgICAgICBpZighdXBjb21pbmcubGVuZ3RoKSB7IGxpc3QuaW5uZXJIVE1MID0gJzx0cj48dGQgY29sc3Bhbj0iNCIgc3R5bGU9InRleHQtYWxpZ246Y2VudGVyO2NvbG9yOiNiYmI7cGFkZGluZzoyMHB4Ij5BdWN1biDDqXbDqW5lbWVudCDDoCB2ZW5pcjwvdGQ+PC90cj4nOyB9CiAgICAgICAgdXBjb21pbmcuZm9yRWFjaChmdW5jdGlvbihjKSB7CiAgICAgICAgICAgIHZhciBpc1RvZGF5ID0gYy5kYXRlID09PSB0b2RheTsKICAgICAgICAgICAgdmFyIGNscyA9IGlzVG9kYXkgPyAncm93LXRvZGF5JyA6ICcnOwogICAgICAgICAgICB2YXIgc3JjID0gYy5nY2FsID8gJzxzcGFuIHN0eWxlPSJjb2xvcjojNDI4NWY0O2ZvbnQtc2l6ZTouNjVyZW0iIHRpdGxlPSJHb29nbGUiPjxpIGNsYXNzPSJmYWIgZmEtZ29vZ2xlIj48L2k+PC9zcGFuPicgOiAnJzsKICAgICAgICAgICAgdmFyIHRpbWVTdHIgPSBjLnRpbWUgPyAnPHNtYWxsIHN0eWxlPSJjb2xvcjojODg4Ij4gJytjLnRpbWUrJzwvc21hbGw+JyA6ICcnOwogICAgICAgICAgICB2YXIgYWN0aW9ucyA9ICcnOwogICAgICAgICAgICBpZiAoIWMuZ2NhbCkgewogICAgICAgICAgICAgICAgYWN0aW9ucyA9ICc8YnV0dG9uIGNsYXNzPSJidG4gYnRuLXNtIiBzdHlsZT0iYmFja2dyb3VuZDpub25lO2NvbG9yOiMzNDk4ZGI7Ym9yZGVyOm5vbmU7cGFkZGluZzoycHggNHB4IiBvbmNsaWNrPSJlZGl0Q2FsRXZlbnQoXCcnK2MuaWQrJ1wnKSI+PGkgY2xhc3M9ImZhcyBmYS1wZW4iPjwvaT48L2J1dHRvbj4nOwogICAgICAgICAgICAgICAgYWN0aW9ucyArPSAnPGJ1dHRvbiBjbGFzcz0iYnRuIGJ0bi1kYW5nZXIgYnRuLXNtIiBvbmNsaWNrPSJkZWxldGVDYWxFdmVudChcJycrYy5pZCsnXCcpIj48aSBjbGFzcz0iZmFzIGZhLXRyYXNoIj48L2k+PC9idXR0b24+JzsKICAgICAgICAgICAgfQogICAgICAgICAgICBsaXN0LmlubmVySFRNTCArPSAnPHRyIGNsYXNzPSInK2NscysnIj48dGQgc3R5bGU9IndoaXRlLXNwYWNlOm5vd3JhcCI+JytuZXcgRGF0ZShjLmRhdGUpLnRvTG9jYWxlRGF0ZVN0cmluZygnZnItRlInKSsnPC90ZD48dGQ+JytzcmMrJyAnK2MudGFzayt0aW1lU3RyKyc8L3RkPjx0ZCBzdHlsZT0id2hpdGUtc3BhY2U6bm93cmFwO3RleHQtYWxpZ246cmlnaHQiPicrYWN0aW9ucysnPC90ZD48L3RyPic7CiAgICAgICAgfSk7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIGVkaXRDYWxFdmVudChpZCkgewogICAgICAgIHZhciBpdGVtID0gYXBwRGF0YS5jYWxlbmRhci5maW5kKGZ1bmN0aW9uKGMpeyByZXR1cm4gYy5pZC50b1N0cmluZygpID09PSBpZC50b1N0cmluZygpOyB9KTsKICAgICAgICBpZiAoIWl0ZW0pIHJldHVybjsKICAgICAgICB2YXIgbmV3VGFzayA9IHByb21wdCgnTW9kaWZpZXIgbFwnw6l2w6luZW1lbnQgOicsIGl0ZW0udGFzayk7CiAgICAgICAgaWYgKG5ld1Rhc2sgPT09IG51bGwpIHJldHVybjsKICAgICAgICB2YXIgbmV3RGF0ZSA9IHByb21wdCgnRGF0ZSAoQUFBQS1NTS1KSikgOicsIGl0ZW0uZGF0ZSk7CiAgICAgICAgaWYgKG5ld0RhdGUgPT09IG51bGwpIHJldHVybjsKICAgICAgICBpdGVtLnRhc2sgPSBuZXdUYXNrOwogICAgICAgIGl0ZW0uZGF0ZSA9IG5ld0RhdGU7CiAgICAgICAgc2F2ZURhdGEoKTsgcmVuZGVyQ2FsZW5kYXIoKTsgY2hlY2tEYWlseVRhc2tzKCk7CiAgICB9CgogICAgZnVuY3Rpb24gZGVsZXRlQ2FsRXZlbnQoaWQpIHsKICAgICAgICBhcHBEYXRhLmNhbGVuZGFyID0gYXBwRGF0YS5jYWxlbmRhci5maWx0ZXIoZnVuY3Rpb24oYykgeyByZXR1cm4gYy5pZC50b1N0cmluZygpICE9PSBpZC50b1N0cmluZygpOyB9KTsKICAgICAgICBzYXZlRGF0YSgpOyByZW5kZXJDYWxlbmRhcigpOyBjaGVja0RhaWx5VGFza3MoKTsKICAgIH0KICAgIGZ1bmN0aW9uIGNoZWNrRGFpbHlUYXNrcygpIHsKICAgICAgICB2YXIgdG9kYXkgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkuc3BsaXQoJ1QnKVswXTsKICAgICAgICB2YXIgbGlzdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0b2RvLXRvZGF5LWxpc3QnKTsKICAgICAgICBpZiAoIWxpc3QpIHJldHVybjsKICAgICAgICBsaXN0LmlubmVySFRNTCA9ICcnOwogICAgICAgIHZhciBjID0gMDsKICAgICAgICBhcHBEYXRhLmNhbGVuZGFyLmZpbHRlcihmdW5jdGlvbih0KXsgcmV0dXJuIHQudGFzayAmJiB0LnRhc2sudHJpbSgpLmxlbmd0aCA+IDM7IH0pLmZvckVhY2goZnVuY3Rpb24odCkgewogICAgICAgICAgICBpZiAodC5kYXRlID09PSB0b2RheSkgewogICAgICAgICAgICAgICAgYysrOwogICAgICAgICAgICAgICAgbGlzdC5pbm5lckhUTUwgKz0gJzxkaXYgY2xhc3M9InRvZG8tdG9kYXktaXRlbSIgZHJhZ2dhYmxlPSJ0cnVlIiBvbmRyYWdzdGFydD0iZHJhZ1RvZG8oZXZlbnQsIFwnJyArIHQuaWQgKyAnXCcsIFwnQUdFTkRBX1NPVVJDRVwnKSI+PHNwYW4+PGkgY2xhc3M9ImZhcyBmYS1iZWxsIiBzdHlsZT0iY29sb3I6cmVkOyBtYXJnaW4tcmlnaHQ6NXB4OyI+PC9pPicgKyB0LnRhc2sgKyAnPC9zcGFuPiA8c21hbGwgc3R5bGU9ImNvbG9yOiM5OTkiPjxpIGNsYXNzPSJmYXMgZmEtYXJyb3dzLWFsdCI+PC9pPiBHbGlzc2VyPC9zbWFsbD48L2Rpdj4nOwogICAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RvZG8tdG9kYXktem9uZScpLmNsYXNzTGlzdC50b2dnbGUoJ2FjdGl2ZScsIGMgPiAwKTsKICAgIH0KCiAgICAvLyAtLS0gQVRUQUNITUVOVFMgJiBIRUxQRVJTIC0tLQogICAgZnVuY3Rpb24gYWRkTXVsdGlSb3coY0lkLCBjbCwgcGgxKSB7CiAgICAgICAgdmFyIGNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGNJZCk7CiAgICAgICAgdmFyIHJvdyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgICAgIHJvdy5jbGFzc05hbWUgPSAnbXVsdGktcm93ICcgKyBjbDsKICAgICAgICB2YXIgaW5wID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTsKICAgICAgICBpbnAudHlwZSA9ICd0ZXh0JzsgaW5wLmNsYXNzTmFtZSA9ICdmb3JtLWNvbnRyb2wgbmFtZSc7IGlucC5wbGFjZWhvbGRlciA9IHBoMTsKICAgICAgICB2YXIgYnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7CiAgICAgICAgYnRuLmNsYXNzTmFtZSA9ICdidG4gYnRuLWRhbmdlciBidG4taWNvbic7CiAgICAgICAgYnRuLmlubmVySFRNTCA9ICc8aSBjbGFzcz0iZmFzIGZhLXRpbWVzIj48L2k+JzsKICAgICAgICBidG4ub25jbGljayA9IGZ1bmN0aW9uKCkgeyB0aGlzLnBhcmVudEVsZW1lbnQucmVtb3ZlKCk7IH07CiAgICAgICAgcm93LmFwcGVuZENoaWxkKGlucCk7CiAgICAgICAgcm93LmFwcGVuZENoaWxkKGJ0bik7CiAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKHJvdyk7CiAgICAgICAgaWYgKGNsLmluZGV4T2YoJ3N0dWRlbnQnKSA+PSAwIHx8IGNsLmluZGV4T2YoJ2VsZXZlJykgPj0gMCkgeyBhdHRhY2hTdHVkZW50QUMoaW5wKTsgfQogICAgICAgIGlmIChjbC5pbmRleE9mKCd0ZWFjaGVyJykgPj0gMCkgeyBhdHRhY2hUZWFjaGVyQUMoaW5wKTsgfQogICAgfQogICAgZnVuY3Rpb24gZ2V0TXVsdGlEYXRhKGNJZCwgY2wpIHsgbGV0IHJlcyA9IFtdOyBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGAjJHtjSWR9IC4ke2NsfWApLmZvckVhY2gocm93ID0+IHsgY29uc3QgbiA9IHJvdy5xdWVyeVNlbGVjdG9yKCcubmFtZScpLnZhbHVlLnRyaW0oKTsgaWYobikgcmVzLnB1c2goe25hbWU6bn0pOyB9KTsgcmV0dXJuIHJlczsgfQogICAgZnVuY3Rpb24gcmVzdG9yZU11bHRpUm93cyhjSWQsIGNsLCBkYXRhLCBwaDEpIHsgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoY0lkKTsgaWYoIWNvbnRhaW5lcikgcmV0dXJuOyBjb250YWluZXIuaW5uZXJIVE1MID0gIiI7IGlmKCFkYXRhIHx8IGRhdGEubGVuZ3RoID09PSAwKSB7IHJlc2V0TXVsdGkoY0lkLCBjbCwgcGgxKTsgcmV0dXJuOyB9IGRhdGEuZm9yRWFjaChkID0+IHsgY29udGFpbmVyLmlubmVySFRNTCArPSBgPGRpdiBjbGFzcz0ibXVsdGktcm93ICR7Y2x9Ij48aW5wdXQgdHlwZT0idGV4dCIgY2xhc3M9ImZvcm0tY29udHJvbCBuYW1lIiB2YWx1ZT0iJHtkLm5hbWV9IiBwbGFjZWhvbGRlcj0iJHtwaDF9Ij48YnV0dG9uIGNsYXNzPSJidG4gYnRuLWRhbmdlciBidG4taWNvbiIgb25jbGljaz0idGhpcy5wYXJlbnRFbGVtZW50LnJlbW92ZSgpIj48aSBjbGFzcz0iZmFzIGZhLXRpbWVzIj48L2k+PC9idXR0b24+PC9kaXY+YDsgfSk7IH0KICAgIGZ1bmN0aW9uIHJlc2V0TXVsdGkoY0lkLCBjbCwgcGgxKSB7IGNvbnN0IGMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChjSWQpOyBpZihjKSBjLmlubmVySFRNTCA9IGA8ZGl2IGNsYXNzPSJtdWx0aS1yb3cgJHtjbH0iPjxpbnB1dCB0eXBlPSJ0ZXh0IiBjbGFzcz0iZm9ybS1jb250cm9sIG5hbWUiIHBsYWNlaG9sZGVyPSIke3BoMX0iPjxidXR0b24gY2xhc3M9ImJ0biBidG4tZGFuZ2VyIGJ0bi1pY29uIiBvbmNsaWNrPSJ0aGlzLnBhcmVudEVsZW1lbnQucmVtb3ZlKCkiPjxpIGNsYXNzPSJmYXMgZmEtdGltZXMiPjwvaT48L2J1dHRvbj48L2Rpdj5gOyB9CiAgICAKICAgIGZ1bmN0aW9uIGFkZEF0dGFjaG1lbnQobGlzdElkLCBpbnB1dCkgewogICAgICAgIGNvbnN0IGZpbGUgPSBpbnB1dC5maWxlc1swXTsKICAgICAgICBpZighZmlsZSkgcmV0dXJuOwogICAgICAgIGlmIChmaWxlLnNpemUgPiAxNTAwMDApIHsKICAgICAgICAgICAgIGFsZXJ0KCJGaWNoaWVyIHRyb3Agdm9sdW1pbmV1eCBwb3VyIGxhIHNhdXZlZ2FyZGUgbG9jYWxlICg+MTUwa28pLiBTZXVsIGxlIG5vbSBkdSBmaWNoaWVyIHNlcmEgY29uc2VydsOpIGVuIHLDqWbDqXJlbmNlLiIpOwogICAgICAgICAgICAgYXBwZW5kQXR0YWNobWVudFVJKGxpc3RJZCwge25hbWU6IGZpbGUubmFtZSwgZGF0YTogbnVsbCwgaXNSZWY6IHRydWV9KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgY29uc3QgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTsKICAgICAgICAgICAgIHJlYWRlci5vbmxvYWQgPSBmdW5jdGlvbihlKSB7IGFwcGVuZEF0dGFjaG1lbnRVSShsaXN0SWQsIHtuYW1lOiBmaWxlLm5hbWUsIGRhdGE6IGUudGFyZ2V0LnJlc3VsdCwgaXNSZWY6IGZhbHNlfSk7IH07CiAgICAgICAgICAgICByZWFkZXIucmVhZEFzRGF0YVVSTChmaWxlKTsKICAgICAgICB9CiAgICAgICAgaW5wdXQudmFsdWUgPSAiIjsKICAgIH0KCiAgICBmdW5jdGlvbiBhcHBlbmRBdHRhY2htZW50VUkobGlzdElkLCBmaWxlT2JqKSB7CiAgICAgICAgY29uc3QgdWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChsaXN0SWQpOwogICAgICAgIGNvbnN0IGxpID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKTsKICAgICAgICBsaS5jbGFzc05hbWUgPSAnYXR0YWNobWVudC1pdGVtJzsKICAgICAgICBsaS5kYXRhc2V0Lm5hbWUgPSBmaWxlT2JqLm5hbWU7CiAgICAgICAgbGkuZGF0YXNldC5kYXRhID0gZmlsZU9iai5kYXRhIHx8ICIiOwogICAgICAgIGxpLmRhdGFzZXQuaXNSZWYgPSBmaWxlT2JqLmlzUmVmOwogICAgICAgIGNvbnN0IGxpbmsgPSBmaWxlT2JqLmRhdGEgPyBgPGEgaHJlZj0iIyIgb25jbGljaz0iZG93bmxvYWRCYXNlNjQoJyR7ZmlsZU9iai5kYXRhfScsICcke2ZpbGVPYmoubmFtZX0nKSI+JHtmaWxlT2JqLm5hbWV9PC9hPmAgOiBgPHNwYW4+JHtmaWxlT2JqLm5hbWV9IChSw6lmw6lyZW5jZSBzZXVsZSk8L3NwYW4+YDsKICAgICAgICBsaS5pbm5lckhUTUwgPSBgPGRpdj48aSBjbGFzcz0iZmFzIGZhLWZpbGUiPjwvaT4gJHtsaW5rfTwvZGl2PiA8aSBjbGFzcz0iZmFzIGZhLXRyYXNoIiBzdHlsZT0iY29sb3I6I2U3NGMzYzsgY3Vyc29yOnBvaW50ZXI7IiBvbmNsaWNrPSJ0aGlzLnBhcmVudEVsZW1lbnQucmVtb3ZlKCkiPjwvaT5gOwogICAgICAgIHVsLmFwcGVuZENoaWxkKGxpKTsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gZG93bmxvYWRCYXNlNjQoYmFzZTY0LCBuYW1lKSB7CiAgICAgICAgY29uc3QgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImEiKTsKICAgICAgICBhLmhyZWYgPSBiYXNlNjQ7CiAgICAgICAgYS5kb3dubG9hZCA9IG5hbWU7CiAgICAgICAgYS5jbGljaygpOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBnZXRBdHRhY2htZW50c0RhdGEobGlzdElkKSB7CiAgICAgICAgY29uc3QgcmVzID0gW107CiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChgIyR7bGlzdElkfSAuYXR0YWNobWVudC1pdGVtYCkuZm9yRWFjaChsaSA9PiB7CiAgICAgICAgICAgIHJlcy5wdXNoKHsKICAgICAgICAgICAgICAgIG5hbWU6IGxpLmRhdGFzZXQubmFtZSwKICAgICAgICAgICAgICAgIGRhdGE6IGxpLmRhdGFzZXQuZGF0YSA9PT0gIm51bGwiIHx8IGxpLmRhdGFzZXQuZGF0YSA9PT0gIiIgPyBudWxsIDogbGkuZGF0YXNldC5kYXRhLAogICAgICAgICAgICAgICAgaXNSZWY6IGxpLmRhdGFzZXQuaXNSZWYgPT09ICJ0cnVlIgogICAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgICAgICByZXR1cm4gcmVzOwogICAgfQogICAgCiAgICBmdW5jdGlvbiByZXN0b3JlQXR0YWNobWVudHMobGlzdElkLCBkYXRhKSB7CiAgICAgICAgY29uc3QgdWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChsaXN0SWQpOwogICAgICAgIHVsLmlubmVySFRNTCA9ICIiOwogICAgICAgIGlmKCFkYXRhKSByZXR1cm47CiAgICAgICAgZGF0YS5mb3JFYWNoKGQgPT4gYXBwZW5kQXR0YWNobWVudFVJKGxpc3RJZCwgZCkpOwogICAgfQoKICAgIGZ1bmN0aW9uIHJlc2V0RWRpdE1vZGUoKSB7IGN1cnJlbnRFZGl0SWQgPSBudWxsOyBjdXJyZW50RWRpdFR5cGUgPSBudWxsOyBbJ2J0bi1zYXZlLWVudCcsJ2J0bi1zYXZlLXJldScsJ2J0bi1zYXZlLWRpcicsJ2J0bi1zYXZlLXN1aXZpJ10uZm9yRWFjaChpZCA9PiB7IGNvbnN0IGIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCk7IGlmKGIpIHsgYi5pbm5lclRleHQgPSAoaWQuaW5jbHVkZXMoJ2RpcicpIHx8IGlkLmluY2x1ZGVzKCdzdWl2aScpKSA/ICJFbnJlZ2lzdHJlciAoSGlzdG9yaXF1ZSkiIDogIkVucmVnaXN0cmVyIjsgYi5jbGFzc05hbWUgPSBiLmlkLmluY2x1ZGVzKCdzdWl2aScpID8gImJ0biBidG4taW5mbyIgOiAoYi5pZC5pbmNsdWRlcygncmV1JykgPyAiYnRuIGJ0bi1zdWNjZXNzIiA6ICJidG4gYnRuLXByaW1hcnkiKTsgfSB9KTsgfQogICAgZnVuY3Rpb24gYWN0aXZhdGVFZGl0TW9kZSh0LCBpZCkgeyBjdXJyZW50RWRpdElkID0gaWQ7IGN1cnJlbnRFZGl0VHlwZSA9IHQ7IGNvbnN0IG0gPSB7J0VOVCc6J2J0bi1zYXZlLWVudCcsJ1JFVSc6J2J0bi1zYXZlLXJldScsJ0RJUic6J2J0bi1zYXZlLWRpcicsJ1NVSVZJJzonYnRuLXNhdmUtc3VpdmknfTsgY29uc3QgYiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKG1bdF0pOyBpZihiKSB7IGIuaW5uZXJUZXh0ID0gIk1ldHRyZSDDoCBqb3VyIGxlIGRvY3VtZW50IjsgYi5jbGFzc05hbWUgPSAiYnRuIGJ0bi11cGRhdGUtbW9kZSI7IH0gfQoKICAgIGZ1bmN0aW9uIGxvYWRJdGVtRm9yRWRpdCh0eXBlLCBpZCkgewogICAgICAgIGxldCBpdDsKICAgICAgICBpZih0eXBlID09PSAnRU5UJykgewogICAgICAgICAgICBpdCA9IGFwcERhdGEuZW50cmV0aWVucy5maW5kKHggPT4geC5pZC50b1N0cmluZygpID09PSBpZC50b1N0cmluZygpKTsgaWYoIWl0KSByZXR1cm47CiAgICAgICAgICAgIHN3aXRjaE1lbnUoJ21lbnU2Jyk7IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlbnQtZGF0ZScpLnZhbHVlID0gaXQuZGF0ZTsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VudC10eXBlJykudmFsdWUgPSBpdC50eXBlOyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZW50LW9iamV0JykudmFsdWUgPSBpdC5vYmpldDsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VudC1jb250ZW51JykuaW5uZXJIVE1MID0gaXQuYm9keTsKICAgICAgICAgICAgcmVzdG9yZU11bHRpUm93cygnZW50LXN0dWRlbnRzLWNvbnRhaW5lcicsICdlbnQtc3R1ZGVudCcsIGl0LnN0dWRlbnRzLCAnTm9tIMOJbMOodmUnKTsgcmVzdG9yZU11bHRpUm93cygnZW50LXRlYWNoZXJzLWNvbnRhaW5lcicsICdlbnQtdGVhY2hlcicsIGl0LnRlYWNoZXJzLCAnTm9tIFBlcnNvbm5lbCcpOwogICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcjZW50LXN0dWRlbnRzLWNvbnRhaW5lciAubmFtZScpLmZvckVhY2goYXR0YWNoU3R1ZGVudEFDKTsKICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnI2VudC10ZWFjaGVycy1jb250YWluZXIgLm5hbWUnKS5mb3JFYWNoKGF0dGFjaFRlYWNoZXJBQyk7CiAgICAgICAgICAgIHJlc3RvcmVBdHRhY2htZW50cygnZW50LWF0dGFjaG1lbnRzJywgaXQuYXR0YWNobWVudHMpOwogICAgICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gJ1JFVScpIHsKICAgICAgICAgICAgaXQgPSBhcHBEYXRhLnJldW5pb25zLmZpbmQoeCA9PiB4LmlkLnRvU3RyaW5nKCkgPT09IGlkLnRvU3RyaW5nKCkpOyBpZighaXQpIHJldHVybjsKICAgICAgICAgICAgaWYoaXQudHlwZSA9PT0gIlLDqXVuaW9uIGRlIERpcmVjdGlvbiIpIHsgCiAgICAgICAgICAgICAgICBzd2l0Y2hNZW51KCdtZW51NCcpOyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGlyLWRhdGUnKS52YWx1ZSA9IGl0LmRhdGU7IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkaXItcGFydHMnKS52YWx1ZSA9IGl0LnBhcnRzIHx8ICIiOyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGlyLWNvbnRlbnUnKS5pbm5lckhUTUwgPSBpdC5vZGo7IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkaXItbm90ZXMnKS5pbm5lckhUTUwgPSBpdC5jcjsgCiAgICAgICAgICAgICAgICByZXN0b3JlQXR0YWNobWVudHMoJ2Rpci1hdHRhY2htZW50cycsIGl0LmF0dGFjaG1lbnRzKTsKICAgICAgICAgICAgICAgIGFjdGl2YXRlRWRpdE1vZGUoJ0RJUicsIGlkKTsgcmV0dXJuOyAKICAgICAgICAgICAgfSAKICAgICAgICAgICAgZWxzZSB7IAogICAgICAgICAgICAgICAgc3dpdGNoTWVudSgnbWVudTcnKTsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JldS1kYXRlJykudmFsdWUgPSBpdC5kYXRlOyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmV1LXR5cGUnKS52YWx1ZSA9IGl0LnR5cGU7IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXUtb2RqJykudmFsdWUgPSBpdC5vZGo7IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXUtY29udGVudScpLmlubmVySFRNTCA9IGl0LmJvZHk7IAogICAgICAgICAgICAgICAgcmVzdG9yZU11bHRpUm93cygncmV1LXN0dWRlbnRzLWNvbnRhaW5lcicsICdyZXUtc3R1ZGVudCcsIGl0LnN0dWRlbnRzLCAnTm9tIMOJbMOodmUnKTsgcmVzdG9yZU11bHRpUm93cygncmV1LXRlYWNoZXJzLWNvbnRhaW5lcicsICdyZXUtdGVhY2hlcicsIGl0LnRlYWNoZXJzLCAnTm9tIFBlcnNvbm5lbCcpOwogICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcjcmV1LXN0dWRlbnRzLWNvbnRhaW5lciAubmFtZScpLmZvckVhY2goYXR0YWNoU3R1ZGVudEFDKTsKICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnI3JldS10ZWFjaGVycy1jb250YWluZXIgLm5hbWUnKS5mb3JFYWNoKGF0dGFjaFRlYWNoZXJBQyk7IAogICAgICAgICAgICAgICAgcmVzdG9yZUF0dGFjaG1lbnRzKCdyZXUtYXR0YWNobWVudHMnLCBpdC5hdHRhY2htZW50cyk7CiAgICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICdTVUlWSScpIHsKICAgICAgICAgICAgaXQgPSBhcHBEYXRhLnN1aXZpRWxldmVzLmZpbmQoeCA9PiB4LmlkLnRvU3RyaW5nKCkgPT09IGlkLnRvU3RyaW5nKCkpOyBpZighaXQpIHJldHVybjsKICAgICAgICAgICAgc3dpdGNoTWVudSgnbWVudTUnKTsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N1aXZpLWRhdGUnKS52YWx1ZSA9IGl0LmRhdGU7IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzdWl2aS1wYXJ0cycpLnZhbHVlID0gaXQucGFydGljaXBhbnRzOyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3VpdmktY2xhc3NlcycpLnZhbHVlID0gaXQuY2xhc3NlczsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N1aXZpLWNvbnRlbnUnKS5pbm5lckhUTUwgPSBpdC5ib2R5OwogICAgICAgICAgICByZXN0b3JlQXR0YWNobWVudHMoJ3N1aXZpLWF0dGFjaG1lbnRzJywgaXQuYXR0YWNobWVudHMpOwogICAgICAgIH0KICAgICAgICBhY3RpdmF0ZUVkaXRNb2RlKHR5cGUsIGlkKTsKICAgIH0KCiAgICAvLyAtLS0gU0FWSU5HIC0tLQogICAgZnVuY3Rpb24gc2F2ZVByZXBEaXJlY3Rpb24oKSB7CiAgICAgICAgY29uc3QgZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkaXItZGF0ZScpLnZhbHVlOyBpZighZCkgcmV0dXJuIGFsZXJ0KCJEYXRlIHJlcXVpc2UiKTsKICAgICAgICBjb25zdCBuID0geyBpZDogY3VycmVudEVkaXRJZCB8fCBEYXRlLm5vdygpLnRvU3RyaW5nKCksIGRhdGU6ZCwgdHlwZToiUsOpdW5pb24gZGUgRGlyZWN0aW9uIiwgb2RqOmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkaXItY29udGVudScpLmlubmVySFRNTCwgY3I6ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Rpci1ub3RlcycpLmlubmVySFRNTCwgcGFydHM6ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Rpci1wYXJ0cycpLnZhbHVlLCBhdHRhY2htZW50czogZ2V0QXR0YWNobWVudHNEYXRhKCdkaXItYXR0YWNobWVudHMnKSB9OwogICAgICAgIGlmKGN1cnJlbnRFZGl0SWQpIHsgY29uc3QgaWR4ID0gYXBwRGF0YS5yZXVuaW9ucy5maW5kSW5kZXgoeCA9PiB4LmlkLnRvU3RyaW5nKCkgPT09IGN1cnJlbnRFZGl0SWQudG9TdHJpbmcoKSk7IGlmKGlkeCA+IC0xKSBhcHBEYXRhLnJldW5pb25zW2lkeF0gPSBuOyB9IGVsc2UgeyBhcHBEYXRhLnJldW5pb25zLnVuc2hpZnQobik7IH0KICAgICAgICBzYXZlRGF0YSgpOyByZXNldEVkaXRNb2RlKCk7IGFsZXJ0KCJFbnJlZ2lzdHLDqSIpOyBzd2l0Y2hNZW51KCdtZW51OCcpOwogICAgfQogICAgZnVuY3Rpb24gc2F2ZVN1aXZpRWxldmUoKSB7CiAgICAgICAgY29uc3QgZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzdWl2aS1kYXRlJykudmFsdWU7IGlmKCFkKSByZXR1cm4gYWxlcnQoIkRhdGUgcmVxdWlzZSIpOwogICAgICAgIGNvbnN0IG4gPSB7IGlkOiBjdXJyZW50RWRpdElkIHx8IERhdGUubm93KCkudG9TdHJpbmcoKSwgZGF0ZTpkLCB0eXBlOiAiU3Vpdmkgw4lsw6h2ZSAvIFBvaW50IENQRSIsIHBhcnRpY2lwYW50czogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N1aXZpLXBhcnRzJykudmFsdWUsIGNsYXNzZXM6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzdWl2aS1jbGFzc2VzJykudmFsdWUsIGJvZHk6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzdWl2aS1jb250ZW51JykuaW5uZXJIVE1MLCBhdHRhY2htZW50czogZ2V0QXR0YWNobWVudHNEYXRhKCdzdWl2aS1hdHRhY2htZW50cycpIH07CiAgICAgICAgaWYoY3VycmVudEVkaXRJZCkgeyBjb25zdCBpZHggPSBhcHBEYXRhLnN1aXZpRWxldmVzLmZpbmRJbmRleCh4ID0+IHguaWQudG9TdHJpbmcoKSA9PT0gY3VycmVudEVkaXRJZC50b1N0cmluZygpKTsgaWYoaWR4ID4gLTEpIGFwcERhdGEuc3VpdmlFbGV2ZXNbaWR4XSA9IG47IH0gZWxzZSB7IGFwcERhdGEuc3VpdmlFbGV2ZXMudW5zaGlmdChuKTsgfQogICAgICAgIHNhdmVEYXRhKCk7IHJlc2V0RWRpdE1vZGUoKTsgYWxlcnQoIkVucmVnaXN0csOpIik7IHN3aXRjaE1lbnUoJ21lbnU4Jyk7CiAgICB9CiAgICBmdW5jdGlvbiBzYXZlRW50cmV0aWVuKCkgewogICAgICAgIGNvbnN0IGQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZW50LWRhdGUnKS52YWx1ZTsgaWYoIWQpIHJldHVybiBhbGVydCgiRGF0ZSByZXF1aXNlIik7CiAgICAgICAgY29uc3QgbiA9IHtpZDogY3VycmVudEVkaXRJZCB8fCBEYXRlLm5vdygpLnRvU3RyaW5nKCksIGRhdGU6ZCwgdHlwZTpkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZW50LXR5cGUnKS52YWx1ZSwgb2JqZXQ6ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VudC1vYmpldCcpLnZhbHVlLCBib2R5OmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlbnQtY29udGVudScpLmlubmVySFRNTCwgc3R1ZGVudHM6Z2V0TXVsdGlEYXRhKCdlbnQtc3R1ZGVudHMtY29udGFpbmVyJywnZW50LXN0dWRlbnQnKSwgdGVhY2hlcnM6Z2V0TXVsdGlEYXRhKCdlbnQtdGVhY2hlcnMtY29udGFpbmVyJywnZW50LXRlYWNoZXInKSwgYXR0YWNobWVudHM6IGdldEF0dGFjaG1lbnRzRGF0YSgnZW50LWF0dGFjaG1lbnRzJyl9OwogICAgICAgIGlmKGN1cnJlbnRFZGl0SWQpIHsgY29uc3QgaWR4ID0gYXBwRGF0YS5lbnRyZXRpZW5zLmZpbmRJbmRleCh4ID0+IHguaWQudG9TdHJpbmcoKSA9PT0gY3VycmVudEVkaXRJZC50b1N0cmluZygpKTsgaWYoaWR4ID4gLTEpIGFwcERhdGEuZW50cmV0aWVuc1tpZHhdID0gbjsgfSBlbHNlIHsgYXBwRGF0YS5lbnRyZXRpZW5zLnVuc2hpZnQobik7IH0KICAgICAgICBzYXZlRGF0YSgpOyByZXNldEVkaXRNb2RlKCk7IGFsZXJ0KCJFbnJlZ2lzdHLDqSIpOyBzd2l0Y2hNZW51KCdtZW51OCcpOwogICAgfQogICAgZnVuY3Rpb24gc2F2ZVJldW5pb24oKSB7CiAgICAgICAgY29uc3QgZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXUtZGF0ZScpLnZhbHVlOyBpZighZCkgcmV0dXJuIGFsZXJ0KCJEYXRlIHJlcXVpc2UiKTsKICAgICAgICBjb25zdCBuID0ge2lkOiBjdXJyZW50RWRpdElkIHx8IERhdGUubm93KCkudG9TdHJpbmcoKSwgZGF0ZTpkLCB0eXBlOmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXUtdHlwZScpLnZhbHVlLCBvZGo6ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JldS1vZGonKS52YWx1ZSwgYm9keTpkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmV1LWNvbnRlbnUnKS5pbm5lckhUTUwsIHN0dWRlbnRzOmdldE11bHRpRGF0YSgncmV1LXN0dWRlbnRzLWNvbnRhaW5lcicsJ3JldS1zdHVkZW50JyksIHRlYWNoZXJzOmdldE11bHRpRGF0YSgncmV1LXRlYWNoZXJzLWNvbnRhaW5lcicsJ3JldS10ZWFjaGVyJyksIGF0dGFjaG1lbnRzOiBnZXRBdHRhY2htZW50c0RhdGEoJ3JldS1hdHRhY2htZW50cycpfTsKICAgICAgICBpZihjdXJyZW50RWRpdElkKSB7IGNvbnN0IGlkeCA9IGFwcERhdGEucmV1bmlvbnMuZmluZEluZGV4KHggPT4geC5pZC50b1N0cmluZygpID09PSBjdXJyZW50RWRpdElkLnRvU3RyaW5nKCkpOyBpZihpZHggPiAtMSkgYXBwRGF0YS5yZXVuaW9uc1tpZHhdID0gbjsgfSBlbHNlIHsgYXBwRGF0YS5yZXVuaW9ucy51bnNoaWZ0KG4pOyB9CiAgICAgICAgc2F2ZURhdGEoKTsgcmVzZXRFZGl0TW9kZSgpOyBhbGVydCgiRW5yZWdpc3Ryw6kiKTsgc3dpdGNoTWVudSgnbWVudTgnKTsKICAgIH0KCiAgICAvLyAtLS0gV09SRCBFWFBPUlQgV0lUSCBIRUFERVJTIChUQUJMRSBCQVNFRCkgLS0tCiAgICBmdW5jdGlvbiBleHBvcnREb2NXb3JkKG1vZGUpIHsKICAgICAgICBsZXQgdGl0bGUsIGNvbnRlbnQsIG1ldGEgPSAiIjsKICAgICAgICAKICAgICAgICAvLyBQcmVwYXJlIGNvbnRlbnQgYmFzZWQgb24gbW9kZQogICAgICAgIGlmKG1vZGUgPT09ICdFTlQnKSB7CiAgICAgICAgICAgIHRpdGxlID0gIkNvbXB0ZS1SZW5kdSBkJ0VudHJldGllbiI7CiAgICAgICAgICAgIG1ldGEgPSBgPHA+PHN0cm9uZz5PYmpldCA6PC9zdHJvbmc+ICR7ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VudC10eXBlJykudmFsdWV9IC0gJHtkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZW50LW9iamV0JykudmFsdWV9PC9wPgogICAgICAgICAgICAgICAgICAgIDxwPjxzdHJvbmc+RGF0ZTo8L3N0cm9uZz4gJHtkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZW50LWRhdGUnKS52YWx1ZX08L3A+YDsKICAgICAgICAgICAgY29udGVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlbnQtY29udGVudScpLmlubmVySFRNTDsKICAgICAgICB9IGVsc2UgaWYgKG1vZGUgPT09ICdQUkVQX0RJUicpIHsKICAgICAgICAgICAgdGl0bGUgPSAiUsOpdW5pb24gZGUgRGlyZWN0aW9uIjsKICAgICAgICAgICAgbWV0YSA9IGA8cD48c3Ryb25nPkRhdGU6PC9zdHJvbmc+ICR7ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Rpci1kYXRlJykudmFsdWV9PC9wPgogICAgICAgICAgICAgICAgICAgIDxwPjxzdHJvbmc+UGFydGljaXBhbnRzOjwvc3Ryb25nPiAke2RvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkaXItcGFydHMnKS52YWx1ZX08L3A+YDsKICAgICAgICAgICAgY29udGVudCA9IGA8aDQ+T3JkcmUgZHUgam91cjwvaDQ+JHtkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGlyLWNvbnRlbnUnKS5pbm5lckhUTUx9PGhyPjxoND5Ob3RlczwvaDQ+JHtkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGlyLW5vdGVzJykuaW5uZXJIVE1MfWA7CiAgICAgICAgfSBlbHNlIGlmIChtb2RlID09PSAnUkVVJykgewogICAgICAgICAgICB0aXRsZSA9ICJDb21wdGUtUmVuZHUgOiAiICsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JldS10eXBlJykudmFsdWU7CiAgICAgICAgICAgIG1ldGEgPSBgPHA+PHN0cm9uZz5EYXRlOjwvc3Ryb25nPiAke2RvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXUtZGF0ZScpLnZhbHVlfTwvcD5gOwogICAgICAgICAgICBjb250ZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JldS1jb250ZW51JykuaW5uZXJIVE1MOwogICAgICAgIH0gZWxzZSBpZiAobW9kZSA9PT0gJ1NVSVZJJykgewogICAgICAgICAgICB0aXRsZSA9ICJTdWl2aSDDiWzDqHZlIC8gUG9pbnQgQ1BFIjsKICAgICAgICAgICAgbWV0YSA9IGA8cD48c3Ryb25nPkRhdGU6PC9zdHJvbmc+ICR7ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N1aXZpLWRhdGUnKS52YWx1ZX08L3A+CiAgICAgICAgICAgICAgICAgICAgPHA+PHN0cm9uZz5QYXJ0aWNpcGFudHM6PC9zdHJvbmc+ICR7ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N1aXZpLXBhcnRzJykudmFsdWV9PC9wPmA7CiAgICAgICAgICAgIGNvbnRlbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3VpdmktY29udGVudScpLmlubmVySFRNTDsKICAgICAgICB9CgogICAgICAgIC8vIEhlYWRlciBUYWJsZSBmb3IgV29yZCAoTGVmdDogU2Nob29sLCBSaWdodDogTG9nbykKICAgICAgICBjb25zdCBsb2dvSW1nID0gYXBwRGF0YS5zZXR0aW5ncy5sb2dvID8gYDxpbWcgc3JjPSIke2FwcERhdGEuc2V0dGluZ3MubG9nb30iIHdpZHRoPSIxNTAiIGhlaWdodD0iYXV0byIgYWx0PSJMb2dvIj5gIDogJyc7CiAgICAgICAgY29uc3Qgc2lnSW1nID0gYXBwRGF0YS5zZXR0aW5ncy5zaWduYXR1cmUgPyBgPGltZyBzcmM9IiR7YXBwRGF0YS5zZXR0aW5ncy5zaWduYXR1cmV9IiB3aWR0aD0iMTUwIiBoZWlnaHQ9ImF1dG8iIGFsdD0iU2lnbmF0dXJlIj5gIDogJyc7CgogICAgICAgIGNvbnN0IGhlYWRlclNlY3Rpb24gPSBgCiAgICAgICAgPHRhYmxlIHdpZHRoPSIxMDAlIiBib3JkZXI9IjAiIGNlbGxwYWRkaW5nPSIwIiBjZWxsc3BhY2luZz0iMCIgc3R5bGU9Im1hcmdpbi1ib3R0b206IDIwcHg7IGJvcmRlci1ib3R0b206IDJweCBzb2xpZCAjMzMzOyI+CiAgICAgICAgICAgIDx0cj4KICAgICAgICAgICAgICAgIDx0ZCB2YWxpZ249InRvcCIgc3R5bGU9InRleHQtYWxpZ246IGxlZnQ7Ij4KICAgICAgICAgICAgICAgICAgICA8aDEgc3R5bGU9ImZvbnQtc2l6ZTogMjRweDsgbWFyZ2luOiAwOyBwYWRkaW5nOiAwOyI+JHthcHBEYXRhLnNldHRpbmdzLnNjaG9vbH08L2gxPgogICAgICAgICAgICAgICAgICAgIDxwIHN0eWxlPSJtYXJnaW46IDVweCAwIDEwcHggMDsgZm9udC1zaXplOiAxNHB4OyBjb2xvcjogIzY2NjsiPkRpcmVjdGlvbjwvcD4KICAgICAgICAgICAgICAgIDwvdGQ+CiAgICAgICAgICAgICAgICA8dGQgdmFsaWduPSJ0b3AiIHN0eWxlPSJ0ZXh0LWFsaWduOiByaWdodDsiPgogICAgICAgICAgICAgICAgICAgICR7bG9nb0ltZ30KICAgICAgICAgICAgICAgIDwvdGQ+CiAgICAgICAgICAgIDwvdHI+CiAgICAgICAgPC90YWJsZT5gOwoKICAgICAgICBjb25zdCBmb290ZXJTZWN0aW9uID0gYAogICAgICAgIDxkaXYgc3R5bGU9Im1hcmdpbi10b3A6IDUwcHg7IHRleHQtYWxpZ246IHJpZ2h0OyI+CiAgICAgICAgICAgICR7c2lnSW1nfQogICAgICAgICAgICA8cD48c3Ryb25nPiR7YXBwRGF0YS5zZXR0aW5ncy51c2VyfTwvc3Ryb25nPjwvcD4KICAgICAgICA8L2Rpdj5gOwoKICAgICAgICBjb25zdCBoZWFkZXIgPSBgPGh0bWwgeG1sbnM6bz0ndXJuOnNjaGVtYXMtbWljcm9zb2Z0LWNvbTpvZmZpY2U6b2ZmaWNlJyB4bWxuczp3PSd1cm46c2NoZW1hcy1taWNyb3NvZnQtY29tOm9mZmljZTp3b3JkJyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvVFIvUkVDLWh0bWw0MCc+PGhlYWQ+PG1ldGEgY2hhcnNldD0ndXRmLTgnPjx0aXRsZT4ke3RpdGxlfTwvdGl0bGU+PC9oZWFkPjxib2R5PmA7CiAgICAgICAgY29uc3QgZm9vdGVyID0gIjwvYm9keT48L2h0bWw+IjsKICAgICAgICAKICAgICAgICBjb25zdCBmdWxsSHRtbCA9IGhlYWRlciArIGhlYWRlclNlY3Rpb24gKyBgPGgyIHN0eWxlPSJ0ZXh0LWFsaWduOmNlbnRlcjsgbWFyZ2luLWJvdHRvbToyMHB4OyI+JHt0aXRsZX08L2gyPmAgKyBtZXRhICsgYDxocj5gICsgY29udGVudCArIGZvb3RlclNlY3Rpb24gKyBmb290ZXI7CgogICAgICAgIGNvbnN0IGJsb2IgPSBuZXcgQmxvYihbJ1x1ZmVmZicsIGZ1bGxIdG1sXSwgeyB0eXBlOiAnYXBwbGljYXRpb24vbXN3b3JkJyB9KTsKICAgICAgICBjb25zdCB1cmwgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpOwogICAgICAgIGNvbnN0IGxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7CiAgICAgICAgbGluay5ocmVmID0gdXJsOwogICAgICAgIGxpbmsuZG93bmxvYWQgPSBgJHt0aXRsZS5yZXBsYWNlKC8gL2csJ18nKX1fJHtuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkuc3BsaXQoJ1QnKVswXX0uZG9jYDsKICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGxpbmspOwogICAgICAgIGxpbmsuY2xpY2soKTsKICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGxpbmspOwogICAgfQoKICAgIC8vIC0tLSBQUklOVElORyAtLS0KICAgIGZ1bmN0aW9uIGdlbmVyYXRlT2ZmaWNpYWxQcmludCh0aXRsZSwgZGF0ZSwgdHlwZSwgcFN0ciwgYm9keSwgYXR0YWNobWVudHMpIHsKICAgICAgICBjb25zdCBsb2dvID0gYXBwRGF0YS5zZXR0aW5ncy5sb2dvID8gYDxpbWcgc3JjPSIke2FwcERhdGEuc2V0dGluZ3MubG9nb30iIGNsYXNzPSJvZmZpY2lhbC1sb2dvIj5gIDogJyc7CiAgICAgICAgY29uc3Qgc2lnID0gYXBwRGF0YS5zZXR0aW5ncy5zaWduYXR1cmUgPyBgPGltZyBzcmM9IiR7YXBwRGF0YS5zZXR0aW5ncy5zaWduYXR1cmV9IiBjbGFzcz0ic2lnbmF0dXJlLWltZyI+YCA6ICcnOwogICAgICAgIGxldCBhdHRIdG1sID0gIiI7CiAgICAgICAgaWYoYXR0YWNobWVudHMgJiYgYXR0YWNobWVudHMubGVuZ3RoID4gMCkgewogICAgICAgICAgICBhdHRIdG1sID0gYDxkaXYgY2xhc3M9ImF0dGFjaG1lbnQtcHJpbnQtbGlzdCI+PHN0cm9uZz5QacOoY2VzIGpvaW50ZXMgLyBEb2N1bWVudHMgbGnDqXMgOjwvc3Ryb25nPjx1bD5gICsgYXR0YWNobWVudHMubWFwKGEgPT4gYDxsaT4ke2EubmFtZX08L2xpPmApLmpvaW4oJycpICsgYDwvdWw+PC9kaXY+YDsKICAgICAgICB9CgogICAgICAgIHJldHVybiBgPGRpdiBjbGFzcz0icHJpbnQtcGFnZSI+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9Im9mZmljaWFsLWhlYWRlciI+PGRpdiBjbGFzcz0ib2ZmaWNpYWwtbGVmdCI+PGRpdiBjbGFzcz0ic2Nob29sLW5hbWUiPiR7YXBwRGF0YS5zZXR0aW5ncy5zY2hvb2x9PC9kaXY+PGRpdiBjbGFzcz0ic2Nob29sLWRlcHQiPkRpcmVjdGlvbjwvZGl2PjwvZGl2PjxkaXYgY2xhc3M9Im9mZmljaWFsLXJpZ2h0Ij4ke2xvZ299PC9kaXY+PC9kaXY+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9Im9mZmljaWFsLW1ldGEiPkxlICR7bmV3IERhdGUoZGF0ZSkudG9Mb2NhbGVEYXRlU3RyaW5nKCdmci1GUicpfTwvZGl2PgogICAgICAgICAgICA8aDIgc3R5bGU9InRleHQtYWxpZ246Y2VudGVyOyI+JHt0aXRsZX08L2gyPgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJvZmZpY2lhbC1zdWJqZWN0Ij5PQkpFVCA6ICR7dHlwZX08L2Rpdj4KICAgICAgICAgICAgJHtwU3RyID8gYDxkaXYgY2xhc3M9Im9mZmljaWFsLXBhcnRpY2lwYW50cyI+JHtwU3RyfTwvZGl2PmAgOiAnJ30KICAgICAgICAgICAgPGRpdiBjbGFzcz0ib2ZmaWNpYWwtY29udGVudCI+JHtib2R5fTwvZGl2PgogICAgICAgICAgICAke2F0dEh0bWx9CiAgICAgICAgICAgIDxkaXYgY2xhc3M9Im9mZmljaWFsLWZvb3RlciI+JHtzaWd9PHN0cm9uZz4ke2FwcERhdGEuc2V0dGluZ3MudXNlcn08L3N0cm9uZz48L2Rpdj4KICAgICAgICA8L2Rpdj5gOwogICAgfQoKICAgIAogICAgCiAgICBmdW5jdGlvbiBydGVJbnNlcnRMb2dvKCkgewogICAgICAgIHZhciBsb2dvID0gYXBwRGF0YS5zZXR0aW5ncyAmJiBhcHBEYXRhLnNldHRpbmdzLmxvZ287CiAgICAgICAgaWYgKCFsb2dvKSB7IGFsZXJ0KCdBdWN1biBsb2dvIGTDqWZpbmkuIEFqb3V0ZXogdW4gbG9nbyBkYW5zIGxlcyBQYXJhbcOodHJlcy4nKTsgcmV0dXJuOyB9CiAgICAgICAgZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2luc2VydEhUTUwnLCBmYWxzZSwgJzxpbWcgc3JjPSInK2xvZ28rJyIgY2xhc3M9InJ0ZS1sb2dvLWltZyIgc3R5bGU9Im1heC1oZWlnaHQ6NjBweDttYXgtd2lkdGg6MTIwcHg7dmVydGljYWwtYWxpZ246bWlkZGxlOyIgYWx0PSJMb2dvIj4nKTsKICAgIH0KICAgIGZ1bmN0aW9uIHJ0ZUNvbG9yKGJ0bikgewogICAgICAgIHZhciBleGlzdGluZyA9IGJ0bi5wYXJlbnRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5ydGUtY29sb3ItcG9wJyk7CiAgICAgICAgaWYgKGV4aXN0aW5nKSB7IGV4aXN0aW5nLnJlbW92ZSgpOyByZXR1cm47IH0KICAgICAgICB2YXIgY29sb3JzID0gWycjMDAwMDAwJywnI2U3NGMzYycsJyNlNjdlMjInLCcjZjFjNDBmJywnIzI3YWU2MCcsJyMyOTgwYjknLCcjOGU0NGFkJywnIzJjM2U1MCcsJyM5NWE1YTYnLCcjMWFiYzljJywnI2QzNTQwMCcsJyNjMDM5MmInLCcjMTZhMDg1JywnIzJlY2M3MScsJyMzNDk4ZGInLCcjOWI1OWI2J107CiAgICAgICAgdmFyIHBvcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgICAgIHBvcC5jbGFzc05hbWUgPSAncnRlLWNvbG9yLXBvcCc7CiAgICAgICAgY29sb3JzLmZvckVhY2goZnVuY3Rpb24oYykgewogICAgICAgICAgICB2YXIgc3cgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgICAgICAgICAgc3cuY2xhc3NOYW1lID0gJ3J0ZS1jb2xvci1zdyc7CiAgICAgICAgICAgIHN3LnN0eWxlLmJhY2tncm91bmQgPSBjOwogICAgICAgICAgICBzdy5vbmNsaWNrID0gZnVuY3Rpb24oZSkgeyBlLnN0b3BQcm9wYWdhdGlvbigpOyBkb2N1bWVudC5leGVjQ29tbWFuZCgnZm9yZUNvbG9yJywgZmFsc2UsIGMpOyBwb3AucmVtb3ZlKCk7IH07CiAgICAgICAgICAgIHBvcC5hcHBlbmRDaGlsZChzdyk7CiAgICAgICAgfSk7CiAgICAgICAgYnRuLnN0eWxlLnBvc2l0aW9uID0gJ3JlbGF0aXZlJzsKICAgICAgICBidG4uYXBwZW5kQ2hpbGQocG9wKTsKICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7IGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gaGFuZGxlcihlKXsgaWYoIXBvcC5jb250YWlucyhlLnRhcmdldCkpe3BvcC5yZW1vdmUoKTtkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsaGFuZGxlcik7fSB9LCB7b25jZTpmYWxzZX0pOyB9LDEwKTsKICAgIH0KICAgIGZ1bmN0aW9uIHJ0ZUxpbmsoYnRuKSB7CiAgICAgICAgdmFyIHVybCA9IHByb21wdCgnVVJMIGR1IGxpZW4gOicsJ2h0dHBzOi8vJyk7CiAgICAgICAgaWYgKHVybCkgZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2NyZWF0ZUxpbmsnLCBmYWxzZSwgdXJsKTsKICAgIH0KCiAgICBmdW5jdGlvbiB3YWl0Rm9ySW1hZ2VzVGhlblByaW50KCkgewogICAgICAgIHZhciB6b25lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ByaW50LXpvbmUnKTsKICAgICAgICB2YXIgaW1ncyA9IHpvbmUucXVlcnlTZWxlY3RvckFsbCgnaW1nJyk7CiAgICAgICAgaWYgKGltZ3MubGVuZ3RoID09PSAwKSB7IHdpbmRvdy5wcmludCgpOyByZXR1cm47IH0KICAgICAgICB2YXIgbG9hZGVkID0gMDsKICAgICAgICB2YXIgdG90YWwgPSBpbWdzLmxlbmd0aDsKICAgICAgICB2YXIgZG9uZSA9IGZhbHNlOwogICAgICAgIHZhciB0aW1lb3V0ID0gc2V0VGltZW91dChmdW5jdGlvbigpIHsgaWYgKCFkb25lKSB7IGRvbmUgPSB0cnVlOyB3aW5kb3cucHJpbnQoKTsgfSB9LCAyMDAwKTsKICAgICAgICBpbWdzLmZvckVhY2goZnVuY3Rpb24oaW1nKSB7CiAgICAgICAgICAgIGlmIChpbWcuY29tcGxldGUgJiYgaW1nLm5hdHVyYWxIZWlnaHQgPiAwKSB7CiAgICAgICAgICAgICAgICBsb2FkZWQrKzsKICAgICAgICAgICAgICAgIGlmIChsb2FkZWQgPj0gdG90YWwgJiYgIWRvbmUpIHsgZG9uZSA9IHRydWU7IGNsZWFyVGltZW91dCh0aW1lb3V0KTsgd2luZG93LnByaW50KCk7IH0KICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGltZy5vbmxvYWQgPSBpbWcub25lcnJvciA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgIGxvYWRlZCsrOwogICAgICAgICAgICAgICAgICAgIGlmIChsb2FkZWQgPj0gdG90YWwgJiYgIWRvbmUpIHsgZG9uZSA9IHRydWU7IGNsZWFyVGltZW91dCh0aW1lb3V0KTsgd2luZG93LnByaW50KCk7IH0KICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAvLyBGb3JjZSByZWxvYWQgZm9yIGJhc2U2NCBpbWFnZXMKICAgICAgICAgICAgICAgIGlmIChpbWcuc3JjICYmIGltZy5zcmMuaW5kZXhPZignZGF0YTonKSA9PT0gMCkgewogICAgICAgICAgICAgICAgICAgIHZhciBzcmMgPSBpbWcuc3JjOwogICAgICAgICAgICAgICAgICAgIGltZy5zcmMgPSAnJzsKICAgICAgICAgICAgICAgICAgICBpbWcuc3JjID0gc3JjOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICB9CgogICAgZnVuY3Rpb24gcHJpbnRDdXJyZW50Rm9ybShtb2RlKSB7CiAgICAgICAgbGV0IHRpdGxlLCBkYXRlLCB0eXBlLCBib2R5LCBwU3RyPSIiLCBhdHRzPVtdOwogICAgICAgIGlmKG1vZGUgPT09ICdFTlQnKSB7CiAgICAgICAgICAgIHRpdGxlID0gIkNvbXB0ZS1SZW5kdSBkJ0VudHJldGllbiI7IGRhdGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZW50LWRhdGUnKS52YWx1ZTsgdHlwZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlbnQtdHlwZScpLnZhbHVlICsgIiAtICIgKyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZW50LW9iamV0JykudmFsdWU7IGJvZHkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZW50LWNvbnRlbnUnKS5pbm5lckhUTUw7CiAgICAgICAgICAgIGxldCBzID0gZ2V0TXVsdGlEYXRhKCdlbnQtc3R1ZGVudHMtY29udGFpbmVyJywgJ2VudC1zdHVkZW50Jyk7IGxldCB0ID0gZ2V0TXVsdGlEYXRhKCdlbnQtdGVhY2hlcnMtY29udGFpbmVyJywgJ2VudC10ZWFjaGVyJyk7CiAgICAgICAgICAgIGlmKHMubGVuZ3RoKSBwU3RyICs9ICI8c3Ryb25nPsOJbMOodmVzIGNvbmNlcm7DqXMgOjwvc3Ryb25nPiAiICsgcy5tYXAoeD0+eC5uYW1lKS5qb2luKCcsICcpICsgIjxicj4iOwogICAgICAgICAgICBpZih0Lmxlbmd0aCkgcFN0ciArPSAiPHN0cm9uZz5QcsOpc2VudHMgOjwvc3Ryb25nPiAiICsgdC5tYXAoeD0+eC5uYW1lKS5qb2luKCcsICcpOwogICAgICAgICAgICBhdHRzID0gZ2V0QXR0YWNobWVudHNEYXRhKCdlbnQtYXR0YWNobWVudHMnKTsKICAgICAgICB9IGVsc2UgaWYobW9kZSA9PT0gJ1JFVScpIHsKICAgICAgICAgICAgdGl0bGUgPSAiQ29tcHRlLVJlbmR1IGRlIFLDqXVuaW9uIjsgZGF0ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXUtZGF0ZScpLnZhbHVlOyB0eXBlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JldS10eXBlJykudmFsdWU7IGJvZHkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmV1LWNvbnRlbnUnKS5pbm5lckhUTUw7CiAgICAgICAgICAgIGxldCBzID0gZ2V0TXVsdGlEYXRhKCdyZXUtc3R1ZGVudHMtY29udGFpbmVyJywgJ3JldS1zdHVkZW50Jyk7IGxldCB0ID0gZ2V0TXVsdGlEYXRhKCdyZXUtdGVhY2hlcnMtY29udGFpbmVyJywgJ3JldS10ZWFjaGVyJyk7CiAgICAgICAgICAgIGlmKHMubGVuZ3RoKSBwU3RyICs9ICI8c3Ryb25nPsOJbMOodmVzIGNvbmNlcm7DqXMgOjwvc3Ryb25nPiAiICsgcy5tYXAoeD0+eC5uYW1lKS5qb2luKCcsICcpICsgIjxicj4iOwogICAgICAgICAgICBpZih0Lmxlbmd0aCkgcFN0ciArPSAiPHN0cm9uZz5QYXJ0aWNpcGFudHMgOjwvc3Ryb25nPiAiICsgdC5tYXAoeD0+eC5uYW1lKS5qb2luKCcsICcpOwogICAgICAgICAgICBhdHRzID0gZ2V0QXR0YWNobWVudHNEYXRhKCdyZXUtYXR0YWNobWVudHMnKTsKICAgICAgICB9IGVsc2UgaWYobW9kZSA9PT0gJ1BSRVBfRElSJykgewogICAgICAgICAgICB0aXRsZSA9ICJSw6l1bmlvbiBkZSBEaXJlY3Rpb24iOyBkYXRlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Rpci1kYXRlJykudmFsdWU7IHR5cGUgPSAiQ29tcHRlLXJlbmR1IjsgcFN0ciA9ICI8c3Ryb25nPlByw6lzZW50cyA6PC9zdHJvbmc+ICIgKyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGlyLXBhcnRzJykudmFsdWU7CiAgICAgICAgICAgIGJvZHkgPSBgPGgzPk9SRFJFIERVIEpPVVI8L2gzPiR7ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Rpci1jb250ZW51JykuaW5uZXJIVE1MfTxkaXYgY2xhc3M9InByaW50LXNlcGFyYXRvciIgc3R5bGU9Im1hcmdpbjoyMHB4IDA7IGJvcmRlci10b3A6MXB4IGRhc2hlZCAjY2NjIj48L2Rpdj48aDM+Tk9URVMgJiBEw4lDSVNJT05TPC9oMz4ke2RvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkaXItbm90ZXMnKS5pbm5lckhUTUx9YDsKICAgICAgICAgICAgYXR0cyA9IGdldEF0dGFjaG1lbnRzRGF0YSgnZGlyLWF0dGFjaG1lbnRzJyk7CiAgICAgICAgfSBlbHNlIGlmKG1vZGUgPT09ICdTVUlWSScpIHsKICAgICAgICAgICAgdGl0bGUgPSAiUG9pbnQgU3Vpdmkgw4lsw6h2ZSI7IGRhdGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3VpdmktZGF0ZScpLnZhbHVlOyB0eXBlID0gIkNvb3JkaW5hdGlvbiBDUEUgLyBEaXJlY3Rpb24iOyBwU3RyID0gIjxzdHJvbmc+UGFydGljaXBhbnRzIDo8L3N0cm9uZz4gIiArIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzdWl2aS1wYXJ0cycpLnZhbHVlICsgIiB8IDxzdHJvbmc+Tml2ZWF1eCA6PC9zdHJvbmc+ICIgKyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3VpdmktY2xhc3NlcycpLnZhbHVlOwogICAgICAgICAgICBib2R5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N1aXZpLWNvbnRlbnUnKS5pbm5lckhUTUw7CiAgICAgICAgICAgIGF0dHMgPSBnZXRBdHRhY2htZW50c0RhdGEoJ3N1aXZpLWF0dGFjaG1lbnRzJyk7CiAgICAgICAgfQogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcmludC16b25lJykuaW5uZXJIVE1MID0gZ2VuZXJhdGVPZmZpY2lhbFByaW50KHRpdGxlLCBkYXRlLCB0eXBlLCBwU3RyLCBib2R5LCBhdHRzKTsKICAgICAgICB3YWl0Rm9ySW1hZ2VzVGhlblByaW50KCk7CiAgICB9CgogICAgZnVuY3Rpb24gcHJpbnRTYXZlZERvYyh0eXBlLCBpZCkgewogICAgICAgIGxldCBpdCwgdGl0bGUsIHN1YiwgYm9keSwgcFN0cj0iIjsKICAgICAgICBpZih0eXBlPT09J0VOVCcpIHsgaXQgPSBhcHBEYXRhLmVudHJldGllbnMuZmluZCh4PT54LmlkLnRvU3RyaW5nKCk9PT1pZC50b1N0cmluZygpKTsgdGl0bGU9IkVudHJldGllbiI7IHN1Yj1pdC50eXBlKyIgLSAiK2l0Lm9iamV0OyBib2R5PWl0LmJvZHk7IGlmKGl0LnN0dWRlbnRzLmxlbmd0aCkgcFN0cis9IjxzdHJvbmc+w4lsw6h2ZXMgOjwvc3Ryb25nPiAiK2l0LnN0dWRlbnRzLm1hcCh4PT54Lm5hbWUpLmpvaW4oJywgJykrIjxicj4iOyBpZihpdC50ZWFjaGVycy5sZW5ndGgpIHBTdHIrPSI8c3Ryb25nPlByw6lzZW50cyA6PC9zdHJvbmc+ICIraXQudGVhY2hlcnMubWFwKHg9PngubmFtZSkuam9pbignLCAnKTsgfSAKICAgICAgICBlbHNlIGlmICh0eXBlPT09J1JFVScpIHsgaXQgPSBhcHBEYXRhLnJldW5pb25zLmZpbmQoeD0+eC5pZC50b1N0cmluZygpPT09aWQudG9TdHJpbmcoKSk7IGlmKGl0LnR5cGUgPT09ICJSw6l1bmlvbiBkZSBEaXJlY3Rpb24iKSB7IHRpdGxlPSJEaXJlY3Rpb24iOyBzdWI9IkNvbXB0ZS1yZW5kdSI7IHBTdHI9IjxzdHJvbmc+UHLDqXNlbnRzIDo8L3N0cm9uZz4gIisoaXQucGFydHMgfHwgIiIpOyBib2R5ID0gYDxoMz5PREo8L2gzPiR7aXQub2RqfTxkaXYgY2xhc3M9InByaW50LXNlcGFyYXRvciIgc3R5bGU9Im1hcmdpbjoyMHB4IDA7IGJvcmRlci10b3A6MXB4IGRhc2hlZCAjY2NjIj48L2Rpdj48aDM+Tk9URVM8L2gzPiR7aXQuY3J9YDsgfSBlbHNlIHsgdGl0bGU9IlLDqXVuaW9uIjsgc3ViPWl0LnR5cGU7IGJvZHk9aXQuYm9keTsgaWYoaXQuc3R1ZGVudHMubGVuZ3RoKSBwU3RyKz0iPHN0cm9uZz7DiWzDqHZlcyA6PC9zdHJvbmc+ICIraXQuc3R1ZGVudHMubWFwKHg9PngubmFtZSkuam9pbignLCAnKSsiPGJyPiI7IGlmKGl0LnRlYWNoZXJzLmxlbmd0aCkgcFN0cis9IjxzdHJvbmc+UGFydGljaXBhbnRzIDo8L3N0cm9uZz4gIitpdC50ZWFjaGVycy5tYXAoeD0+eC5uYW1lKS5qb2luKCcsICcpOyB9IH0gCiAgICAgICAgZWxzZSBpZiAodHlwZT09PSdTVUlWSScpIHsgaXQgPSBhcHBEYXRhLnN1aXZpRWxldmVzLmZpbmQoeD0+eC5pZC50b1N0cmluZygpPT09aWQudG9TdHJpbmcoKSk7IHRpdGxlPSJTdWl2aSI7IHN1Yj0iUG9pbnQgQ1BFIjsgYm9keT1pdC5ib2R5OyBwU3RyID0gIjxzdHJvbmc+UGFydGljaXBhbnRzIDo8L3N0cm9uZz4gIitpdC5wYXJ0aWNpcGFudHMrIiB8IDxzdHJvbmc+Tml2ZWF1eCA6PC9zdHJvbmc+ICIraXQuY2xhc3NlczsgfQogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcmludC16b25lJykuaW5uZXJIVE1MID0gZ2VuZXJhdGVPZmZpY2lhbFByaW50KHRpdGxlLCBpdC5kYXRlLCBzdWIsIHBTdHIsIGJvZHksIGl0LmF0dGFjaG1lbnRzKTsgd2FpdEZvckltYWdlc1RoZW5QcmludCgpOwogICAgfQoKICAgIGZ1bmN0aW9uIHByaW50QWxsSGlzdG9yeSgpIHsKICAgICAgICBjb25zdCBsaXN0ID0gZ2V0SGlzdG9yeUxpc3QoKTsgaWYoIWxpc3QubGVuZ3RoKSByZXR1cm47CiAgICAgICAgbGV0IGh0bWwgPSAiIjsKICAgICAgICBsaXN0LmZvckVhY2goaSA9PiB7CiAgICAgICAgICAgIGxldCB0aXRsZSwgc3ViLCBib2R5LCBwU3RyPSIiOwogICAgICAgICAgICBpZihpLnQ9PT0nRU5UJykgeyB0aXRsZT0iRW50cmV0aWVuIjsgc3ViPWkuZC50eXBlKyIgLSAiK2kuZC5vYmpldDsgYm9keT1pLmQuYm9keTsgaWYoaS5kLnN0dWRlbnRzLmxlbmd0aCkgcFN0cis9IsOJbMOodmVzIDogIitpLmQuc3R1ZGVudHMubWFwKHg9PngubmFtZSkuam9pbignLCAnKSsiPGJyPiI7IGlmKGkuZC50ZWFjaGVycy5sZW5ndGgpIHBTdHIrPSJQcsOpc2VudHMgOiAiK2kuZC50ZWFjaGVycy5tYXAoeD0+eC5uYW1lKS5qb2luKCcsICcpOyB9IAogICAgICAgICAgICBlbHNlIGlmIChpLnQ9PT0nUkVVJykgeyBpZihpLmQudHlwZSA9PT0gIlLDqXVuaW9uIGRlIERpcmVjdGlvbiIpIHsgdGl0bGU9IkRpcmVjdGlvbiI7IHN1Yj0iQ29tcHRlLXJlbmR1IjsgcFN0cj0iUHLDqXNlbnRzIDogIisoaS5kLnBhcnRzIHx8ICIiKTsgYm9keSA9IGA8aDM+T0RKPC9oMz4ke2kuZC5vZGp9PGRpdiBzdHlsZT0ibWFyZ2luOjIwcHggMDsgYm9yZGVyLXRvcDoxcHggZGFzaGVkICNjY2MiPjwvZGl2PjxoMz5DUjwvaDM+JHtpLmQuY3J9YDsgfSBlbHNlIHsgdGl0bGU9IlLDqXVuaW9uIjsgc3ViPWkuZC50eXBlOyBib2R5PWkuZC5ib2R5OyBpZihpLmQuc3R1ZGVudHMubGVuZ3RoKSBwU3RyKz0iw4lsw6h2ZXMgOiAiK2kuZC5zdHVkZW50cy5tYXAoeD0+eC5uYW1lKS5qb2luKCcsICcpKyI8YnI+IjsgaWYoaS5kLnRlYWNoZXJzLmxlbmd0aCkgcFN0cis9IlBhcnRpY2lwYW50cyA6ICIraS5kLnRlYWNoZXJzLm1hcCh4PT54Lm5hbWUpLmpvaW4oJywgJyk7IH0gfSAKICAgICAgICAgICAgZWxzZSBpZiAoaS50PT09J1NVSVZJJykgeyB0aXRsZT0iU3VpdmkiOyBzdWI9IlBvaW50IENQRSI7IGJvZHk9aS5kLmJvZHk7IHBTdHIgPSAiUGFydGljaXBhbnRzIDogIitpLmQucGFydGljaXBhbnRzKyIgfCBDbGFzc2VzIDogIitpLmQuY2xhc3NlczsgfQogICAgICAgICAgICBodG1sICs9IGdlbmVyYXRlT2ZmaWNpYWxQcmludCh0aXRsZSwgaS5kLmRhdGUsIHN1YiwgcFN0ciwgYm9keSwgaS5kLmF0dGFjaG1lbnRzKTsKICAgICAgICB9KTsKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJpbnQtem9uZScpLmlubmVySFRNTCA9IGh0bWw7IHdhaXRGb3JJbWFnZXNUaGVuUHJpbnQoKTsKICAgIH0KCiAgICAvLyAtLS0gSElTVE9SWSBSRU5ERVIgLS0tCiAgICBmdW5jdGlvbiBnZXRIaXN0b3J5TGlzdCgpIHsKICAgICAgICBjb25zdCBxID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NlYXJjaC1zdHVkZW50JykudmFsdWUudG9Mb3dlckNhc2UoKS50cmltKCk7CiAgICAgICAgY29uc3QgZiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZWFyY2gtdHlwZScpLnZhbHVlOwogICAgICAgIGxldCBsaXN0ID0gW107CiAgICAgICAgY29uc3QgaXNNID0gKGl0KSA9PiB7CiAgICAgICAgICAgIGlmICghcSkgcmV0dXJuIHRydWU7CiAgICAgICAgICAgIGlmIChpdC50eXBlPy50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHEpIHx8IGl0Lm9iamV0Py50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHEpIHx8IGl0Lm9kaj8udG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhxKSB8fCBpdC5ib2R5Py50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHEpIHx8IGl0LmNyPy50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHEpIHx8IGl0LnBhcnRpY2lwYW50cz8udG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhxKSB8fCBpdC5wYXJ0cz8udG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhxKSkgcmV0dXJuIHRydWU7CiAgICAgICAgICAgIGlmIChpdC5zdHVkZW50cz8uc29tZShzID0+IHMubmFtZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHEpKSB8fCBpdC50ZWFjaGVycz8uc29tZSh0ID0+IHQubmFtZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHEpKSkgcmV0dXJuIHRydWU7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9OwogICAgICAgIGlmKGY9PT0iQUxMInx8Zj09PSJFTlQiKSBhcHBEYXRhLmVudHJldGllbnMuZm9yRWFjaChlPT57IGlmKGlzTShlKSkgbGlzdC5wdXNoKHt0OidFTlQnLGQ6ZSx0aW1lOm5ldyBEYXRlKGUuZGF0ZSkuZ2V0VGltZSgpfSk7IH0pOwogICAgICAgIGlmKGY9PT0iQUxMInx8Zj09PSJSRVUifHxmPT09IkRJUiIpIGFwcERhdGEucmV1bmlvbnMuZm9yRWFjaChyPT57IGNvbnN0IGlzRCA9IHIudHlwZT09PSJSw6l1bmlvbiBkZSBEaXJlY3Rpb24iOyBpZihmPT09IkRJUiIgJiYgIWlzRCkgcmV0dXJuOyBpZihmPT09IlJFVSIgJiYgaXNEKSByZXR1cm47IGlmKGlzTShyKSkgbGlzdC5wdXNoKHt0OidSRVUnLGQ6cix0aW1lOm5ldyBEYXRlKHIuZGF0ZSkuZ2V0VGltZSgpfSk7IH0pOwogICAgICAgIGlmKGY9PT0iQUxMInx8Zj09PSJTVUlWSSIpIGFwcERhdGEuc3VpdmlFbGV2ZXMuZm9yRWFjaChzdT0+eyBpZihpc00oc3UpKSBsaXN0LnB1c2goe3Q6J1NVSVZJJyxkOnN1LHRpbWU6bmV3IERhdGUoc3UuZGF0ZSkuZ2V0VGltZSgpfSk7IH0pOwogICAgICAgIHJldHVybiBsaXN0LnNvcnQoKGEsYik9PmIudGltZS1hLnRpbWUpOwogICAgfQoKICAgIGZ1bmN0aW9uIHJlbmRlckhpc3RvcnkoKSB7CiAgICAgICAgY29uc3QgbGlzdCA9IGdldEhpc3RvcnlMaXN0KCk7IGNvbnN0IHRib2R5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2hpc3RvcnktdGFibGUgdGJvZHknKTsgdGJvZHkuaW5uZXJIVE1MPSIiOwogICAgICAgIGlmKCFsaXN0Lmxlbmd0aCkgeyB0Ym9keS5pbm5lckhUTUw9Ijx0cj48dGQgY29sc3Bhbj0nNCcgc3R5bGU9J3RleHQtYWxpZ246Y2VudGVyO2NvbG9yOiM5OTk7cGFkZGluZzoyMHB4Jz5BdWN1biBkb2N1bWVudDwvdGQ+PC90cj4iOyByZXR1cm47IH0KICAgICAgICBsaXN0LmZvckVhY2goaT0+ewogICAgICAgICAgICBsZXQgZHRsID0gIiI7CiAgICAgICAgICAgIGlmKGkudD09PSdFTlQnKSB7CiAgICAgICAgICAgICAgICB2YXIgX2VzID0gKGkuZC5zdHVkZW50c3x8W10pLm1hcChzPT5zLm5hbWUpLmZpbHRlcihCb29sZWFuKTsKICAgICAgICAgICAgICAgIHZhciBfZXQgPSAoaS5kLnRlYWNoZXJzfHxbXSkubWFwKHQ9PnQubmFtZSkuZmlsdGVyKEJvb2xlYW4pOwogICAgICAgICAgICAgICAgZHRsID0gJzxzdHJvbmc+JytpLmQub2JqZXQrJzwvc3Ryb25nPjxicj4nOwogICAgICAgICAgICAgICAgaWYoX2VzLmxlbmd0aCkgZHRsICs9ICc8c21hbGw+PGkgY2xhc3M9ImZhcyBmYS11c2VyLWdyYWR1YXRlIiBzdHlsZT0iY29sb3I6I2U2N2UyMjttYXJnaW4tcmlnaHQ6M3B4Ij48L2k+JytfZXMuam9pbignLCAnKSsnPC9zbWFsbD4nOwogICAgICAgICAgICAgICAgaWYoX2V0Lmxlbmd0aCkgZHRsICs9ICc8YnI+PHNtYWxsPjxpIGNsYXNzPSJmYXMgZmEtY2hhbGtib2FyZC10ZWFjaGVyIiBzdHlsZT0iY29sb3I6IzI5ODBiOTttYXJnaW4tcmlnaHQ6M3B4Ij48L2k+JytfZXQuam9pbignLCAnKSsnPC9zbWFsbD4nOwogICAgICAgICAgICB9IGVsc2UgaWYoaS50PT09J1JFVScpIHsKICAgICAgICAgICAgICAgIHZhciBfcnMgPSAoaS5kLnN0dWRlbnRzfHxbXSkubWFwKHM9PnMubmFtZSkuZmlsdGVyKEJvb2xlYW4pOwogICAgICAgICAgICAgICAgdmFyIF9ydCA9IChpLmQudGVhY2hlcnN8fFtdKS5tYXAodD0+dC5uYW1lKS5maWx0ZXIoQm9vbGVhbik7CiAgICAgICAgICAgICAgICB2YXIgX2hkciA9IGkuZC50eXBlPT09IlLDqXVuaW9uIGRlIERpcmVjdGlvbiI/IkRpcmVjdGlvbiI6KGkuZC5vZGp8fCcnKS5yZXBsYWNlKC88W14+XSo+L2csICcnKS5zdWJzdHJpbmcoMCw1MCk7CiAgICAgICAgICAgICAgICBkdGwgPSAnPHN0cm9uZz4nK19oZHIrJzwvc3Ryb25nPjxicj4nOwogICAgICAgICAgICAgICAgaWYoX3JzLmxlbmd0aCkgZHRsICs9ICc8c21hbGw+PGkgY2xhc3M9ImZhcyBmYS11c2VyLWdyYWR1YXRlIiBzdHlsZT0iY29sb3I6I2U2N2UyMjttYXJnaW4tcmlnaHQ6M3B4Ij48L2k+JytfcnMuam9pbignLCAnKSsnPC9zbWFsbD4nOwogICAgICAgICAgICAgICAgaWYoX3J0Lmxlbmd0aCkgZHRsICs9ICc8YnI+PHNtYWxsPjxpIGNsYXNzPSJmYXMgZmEtY2hhbGtib2FyZC10ZWFjaGVyIiBzdHlsZT0iY29sb3I6IzI5ODBiOTttYXJnaW4tcmlnaHQ6M3B4Ij48L2k+JytfcnQuam9pbignLCAnKSsnPC9zbWFsbD4nOwogICAgICAgICAgICAgICAgaWYoIV9ycy5sZW5ndGggJiYgIV9ydC5sZW5ndGggJiYgaS5kLnBhcnRzKSBkdGwgKz0gJzxzbWFsbD4nK2kuZC5wYXJ0cysnPC9zbWFsbD4nOwogICAgICAgICAgICB9IGVsc2UgaWYoaS50PT09J1NVSVZJJykgZHRsID0gJzxzdHJvbmc+Q2xhc3NlcyA6ICcraS5kLmNsYXNzZXMrJzwvc3Ryb25nPjxicj48c21hbGw+JytpLmQucGFydGljaXBhbnRzKyc8L3NtYWxsPic7CiAgICAgICAgICAgIAogICAgICAgICAgICBjb25zdCBoYXNBdHQgPSAoaS5kLmF0dGFjaG1lbnRzICYmIGkuZC5hdHRhY2htZW50cy5sZW5ndGggPiAwKSA/ICc8aSBjbGFzcz0iZmFzIGZhLXBhcGVyY2xpcCIgc3R5bGU9ImNvbG9yOiM3ZjhjOGQ7IG1hcmdpbi1sZWZ0OjVweDsiPjwvaT4nIDogJyc7CgogICAgICAgICAgICB0Ym9keS5pbm5lckhUTUwgKz0gYDx0cj48dGQ+JHtuZXcgRGF0ZShpLmQuZGF0ZSkudG9Mb2NhbGVEYXRlU3RyaW5nKCdmci1GUicpfTwvdGQ+PHRkPjxzcGFuIGNsYXNzPSJiYWRnZSAke2kudD09PSdFTlQnPydiZy1lbnQnOihpLnQ9PT0nU1VJVkknPydiZy1zdWl2aSc6KGkuZC50eXBlLmluY2x1ZGVzKCdEaXInKT8nYmctZGlyJzonYmctcmV1JykpfSI+JHtpLmQudHlwZX08L3NwYW4+JHtoYXNBdHR9PC90ZD48dGQ+JHtkdGx9PC90ZD48dGQ+PGJ1dHRvbiBjbGFzcz0iYnRuIGJ0bi13YXJuaW5nIGJ0bi1zbSIgb25jbGljaz0ibG9hZEl0ZW1Gb3JFZGl0KCcke2kudH0nLCAnJHtpLmQuaWR9JykiPjxpIGNsYXNzPSJmYXMgZmEtcGVuIj48L2k+PC9idXR0b24+IDxidXR0b24gY2xhc3M9ImJ0biBidG4tZGFyayBidG4tc20iIG9uY2xpY2s9InByaW50U2F2ZWREb2MoJyR7aS50fScsJyR7aS5kLmlkfScpIj48aSBjbGFzcz0iZmFzIGZhLXByaW50Ij48L2k+PC9idXR0b24+IDxidXR0b24gY2xhc3M9ImJ0biBidG4tZGFuZ2VyIGJ0bi1zbSIgb25jbGljaz0iZGVsZXRlSXRlbSgnJHtpLnQ9PT0nRU5UJz8nZW50cmV0aWVucyc6KGkudD09PSdSRVUnPydyZXVuaW9ucyc6J3N1aXZpRWxldmVzJyl9Jywke2kuZC5pZH0pIj48aSBjbGFzcz0iZmFzIGZhLXRyYXNoIj48L2k+PC9idXR0b24+PC90ZD48L3RyPmA7CiAgICAgICAgfSk7CiAgICB9CgogICAgLy8gLS0tIERBU0hCT0FSRCAmIFNUQVRTIC0tLQogICAgZnVuY3Rpb24gcmVuZGVyRGFzaGJvYXJkKCkgewogICAgICAgIGNvbnN0IHRzID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpLnNwbGl0KCdUJylbMF07CiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2twaS1lbnQnKS5pbm5lclRleHQgPSBhcHBEYXRhLmVudHJldGllbnMubGVuZ3RoOwogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdrcGktcmV1JykuaW5uZXJUZXh0ID0gYXBwRGF0YS5yZXVuaW9ucy5maWx0ZXIocj0+ci50eXBlIT09IlLDqXVuaW9uIGRlIERpcmVjdGlvbiIpLmxlbmd0aDsKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgna3BpLWRpcicpLmlubmVyVGV4dCA9IGFwcERhdGEucmV1bmlvbnMuZmlsdGVyKHI9PnIudHlwZT09PSJSw6l1bmlvbiBkZSBEaXJlY3Rpb24iKS5sZW5ndGg7CiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2twaS1zdWl2aScpLmlubmVyVGV4dCA9IGFwcERhdGEuc3VpdmlFbGV2ZXMubGVuZ3RoOwogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdrcGktdG9kbycpLmlubmVyVGV4dCA9IGFwcERhdGEudG9kby51cmdlbnQubGVuZ3RoOwogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdrcGktY2FsJykuaW5uZXJUZXh0ID0gYXBwRGF0YS5jYWxlbmRhci5maWx0ZXIoYz0+Yy5kYXRlPj10cykubGVuZ3RoOwogICAgICAgIAogICAgICAgIHJlbmRlckNoYXJ0KCdjaGFydFR5cGVzJywgJ2RvdWdobnV0JywgeyAKICAgICAgICAgICAgbGFiZWxzOiBbJ1VyZ2VuY2VzJywgJ0RpcmVjdGlvbicsICdFbnRyZXRpZW5zJywgJ1LDqXVuaW9ucycsICdBZ2VuZGEnLCAnU3VpdmknXSwgCiAgICAgICAgICAgIGRhdGFzZXRzOiBbeyAKICAgICAgICAgICAgICAgIGRhdGE6IFthcHBEYXRhLnRvZG8udXJnZW50Lmxlbmd0aCwgYXBwRGF0YS5yZXVuaW9ucy5maWx0ZXIocj0+ci50eXBlPT09IlLDqXVuaW9uIGRlIERpcmVjdGlvbiIpLmxlbmd0aCwgYXBwRGF0YS5lbnRyZXRpZW5zLmxlbmd0aCwgYXBwRGF0YS5yZXVuaW9ucy5maWx0ZXIocj0+ci50eXBlIT09IlLDqXVuaW9uIGRlIERpcmVjdGlvbiIpLmxlbmd0aCwgYXBwRGF0YS5jYWxlbmRhci5sZW5ndGgsIGFwcERhdGEuc3VpdmlFbGV2ZXMubGVuZ3RoXSwgCiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IFsnI2U3NGMzYycsJyMyYzNlNTAnLCcjYzAzOTJiJywnIzI3YWU2MCcsJyNmMzljMTInLCcjMjk4MGI5J10gCiAgICAgICAgICAgIH1dIAogICAgICAgIH0pOwogICAgICAgIAogICAgICAgIGNvbnN0IHN0ID0gZ2V0TW9udGhseVN0YXRzKCk7IAogICAgICAgIHJlbmRlckNoYXJ0KCdjaGFydE1vbnRobHknLCAnbGluZScsIHsgbGFiZWxzOiBzdC5sYWJlbHMsIGRhdGFzZXRzOiBbeyBsYWJlbDogJ0FjdGl2aXTDqXMnLCBkYXRhOiBzdC52YWx1ZXMsIGJvcmRlckNvbG9yOiAnIzI5ODBiOScsIGZpbGw6IHRydWUsIHRlbnNpb246IDAuMyB9XSB9KTsKICAgICAgICByZW5kZXJUb3BTdHVkZW50cygpOwogICAgfQoKICAgIGZ1bmN0aW9uIHJlbmRlclRvcFN0dWRlbnRzKCkgewogICAgICAgIGNvbnN0IGNvdW50cyA9IHt9OwogICAgICAgIFsuLi5hcHBEYXRhLmVudHJldGllbnMsIC4uLmFwcERhdGEucmV1bmlvbnNdLmZvckVhY2goaXQgPT4gewogICAgICAgICAgICBpZihpdC5zdHVkZW50cykgewogICAgICAgICAgICAgICAgaXQuc3R1ZGVudHMuZm9yRWFjaChzID0+IHsKICAgICAgICAgICAgICAgICAgICBjb25zdCBuYW1lID0gcy5uYW1lLnRyaW0oKTsKICAgICAgICAgICAgICAgICAgICBpZihuYW1lKSBjb3VudHNbbmFtZV0gPSAoY291bnRzW25hbWVdIHx8IDApICsgMTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgY29uc3Qgc29ydGVkID0gT2JqZWN0LmVudHJpZXMoY291bnRzKS5zb3J0KChhLGIpID0+IGJbMV0gLSBhWzFdKS5zbGljZSgwLCA1KTsKICAgICAgICBjb25zdCBsaXN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RvcC1zdHVkZW50cy1saXN0Jyk7CiAgICAgICAgbGlzdC5pbm5lckhUTUwgPSBzb3J0ZWQubGVuZ3RoID8gIiIgOiAiPGxpIHN0eWxlPSdjb2xvcjojOTk5Jz5BdWN1bmUgZG9ubsOpZSDDqWzDqHZlPC9saT4iOwogICAgICAgIHNvcnRlZC5mb3JFYWNoKChbbmFtZSwgY291bnRdKSA9PiB7CiAgICAgICAgICAgIGxpc3QuaW5uZXJIVE1MICs9IGA8bGkgY2xhc3M9InRvcC1zdHVkZW50LWl0ZW0iPjxzcGFuPiR7bmFtZX08L3NwYW4+IDxzdHJvbmc+JHtjb3VudH0gZm9pczwvc3Ryb25nPjwvbGk+YDsKICAgICAgICB9KTsKICAgIH0KCiAgICBmdW5jdGlvbiBnZXRNb250aGx5U3RhdHMoKSB7CiAgICAgICAgY29uc3QgbXRocyA9IFtdOyBjb25zdCBuID0gbmV3IERhdGUoKTsKICAgICAgICBmb3IgKGxldCBpPTU7IGk+PTA7IGktLSkgeyBjb25zdCBkPW5ldyBEYXRlKG4uZ2V0RnVsbFllYXIoKSwgbi5nZXRNb250aCgpLWksIDEpOyBtdGhzLnB1c2goeyBsYWJlbDogZC50b0xvY2FsZURhdGVTdHJpbmcoJ2ZyLUZSJywge21vbnRoOidzaG9ydCcsIHllYXI6JzItZGlnaXQnfSksIGtleTogYCR7ZC5nZXRGdWxsWWVhcigpfS0ke1N0cmluZyhkLmdldE1vbnRoKCkrMSkucGFkU3RhcnQoMiwnMCcpfWAsIGNvdW50OiAwIH0pOyB9CiAgICAgICAgWy4uLmFwcERhdGEuZW50cmV0aWVucywgLi4uYXBwRGF0YS5yZXVuaW9ucywgLi4uYXBwRGF0YS5zdWl2aUVsZXZlc10uZm9yRWFjaChpdCA9PiB7IGlmKGl0LmRhdGUpIHsgY29uc3QgayA9IGl0LmRhdGUuc3Vic3RyaW5nKDAsNyk7IGNvbnN0IG0gPSBtdGhzLmZpbmQoeD0+eC5rZXk9PT1rKTsgaWYobSkgbS5jb3VudCsrOyB9IH0pOwogICAgICAgIHJldHVybiB7IGxhYmVsczogbXRocy5tYXAobT0+bS5sYWJlbCksIHZhbHVlczogbXRocy5tYXAobT0+bS5jb3VudCkgfTsKICAgIH0KCiAgICBmdW5jdGlvbiByZW5kZXJDaGFydChpZCwgdHlwZSwgZGF0YSkgewogICAgICAgIGNvbnN0IGNhbnZhcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKTsgaWYoIWNhbnZhcykgcmV0dXJuOwogICAgICAgIGNvbnN0IGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpOyBpZihjaGFydEluc3RhbmNlc1tpZF0pIGNoYXJ0SW5zdGFuY2VzW2lkXS5kZXN0cm95KCk7CiAgICAgICAgY2hhcnRJbnN0YW5jZXNbaWRdID0gbmV3IENoYXJ0KGN0eCwgeyB0eXBlLCBkYXRhLCBvcHRpb25zOiB7IHJlc3BvbnNpdmU6IHRydWUsIG1haW50YWluQXNwZWN0UmF0aW86IGZhbHNlIH0gfSk7CiAgICB9CgogICAgZnVuY3Rpb24gbG9hZFNldHRpbmdzVUkoKSB7CiAgICAgICAgbG9hZFRlbXBsYXRlc1VJKCk7IGxvYWRTZXBDb25maWcoKTsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NmZy1zY2hvb2wnKS52YWx1ZT1hcHBEYXRhLnNldHRpbmdzLnNjaG9vbDsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NmZy11c2VyJykudmFsdWU9YXBwRGF0YS5zZXR0aW5ncy51c2VyOyB1cGRhdGVQcmV2aWV3cygpOyB9CiAgICBmdW5jdGlvbiBzYXZlU2V0dGluZ3MoKSB7IGFwcERhdGEuc2V0dGluZ3Muc2Nob29sPWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjZmctc2Nob29sJykudmFsdWU7IGFwcERhdGEuc2V0dGluZ3MudXNlcj1kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2ZnLXVzZXInKS52YWx1ZTsgc2F2ZURhdGEoKTsgYWxlcnQoIkVucmVnaXN0csOpIik7IH0KICAgIGZ1bmN0aW9uIHVwZGF0ZVByZXZpZXdzKCkgeyBpZihhcHBEYXRhLnNldHRpbmdzLmxvZ28pIHsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NmZy1sb2dvLXByZXZpZXcnKS5zcmM9YXBwRGF0YS5zZXR0aW5ncy5sb2dvOyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2ZnLWxvZ28tcHJldmlldycpLnN0eWxlLmRpc3BsYXk9J2Jsb2NrJzsgfSBpZihhcHBEYXRhLnNldHRpbmdzLnNpZ25hdHVyZSkgeyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2ZnLXNpZy1wcmV2aWV3Jykuc3JjPWFwcERhdGEuc2V0dGluZ3Muc2lnbmF0dXJlOyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2ZnLXNpZy1wcmV2aWV3Jykuc3R5bGUuZGlzcGxheT0nYmxvY2snOyB9IH0KICAgIGZ1bmN0aW9uIGVuY29kZUltYWdlKGksIGlkLCBrKSB7IGNvbnN0IGY9aS5maWxlc1swXTsgY29uc3Qgcj1uZXcgRmlsZVJlYWRlcigpOyByLm9ubG9hZGVuZD0oKT0+eyBhcHBEYXRhLnNldHRpbmdzW2tdPXIucmVzdWx0OyBzYXZlRGF0YSgpOyB1cGRhdGVQcmV2aWV3cygpOyB9OyBpZihmKSByLnJlYWRBc0RhdGFVUkwoZik7IH0KICAgIGZ1bmN0aW9uIGRlbGV0ZUl0ZW0oYywgaWQpIHsgaWYoY29uZmlybSgiU3VwcHJpbWVyID8iKSkgeyBhcHBEYXRhW2NdPWFwcERhdGFbY10uZmlsdGVyKGk9PmkuaWQudG9TdHJpbmcoKSE9PWlkLnRvU3RyaW5nKCkpOyBzYXZlRGF0YSgpOyByZW5kZXJIaXN0b3J5KCk7IH0gfQogICAgZnVuY3Rpb24gY2xlYXJBbGwoKSB7IGlmKGNvbmZpcm0oIlN1cHByaW1lciBUT1VURVMgbGVzIGRvbm7DqWVzID8iKSkgeyBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgncGVyZGlyX3BpbG90ZV92MTAnKTsgbG9jYXRpb24ucmVsb2FkKCk7IH0gfQogICAgZnVuY3Rpb24gZXhwb3J0RGF0YSgpIHsgY29uc3QgYT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7IGEuaHJlZj0iZGF0YTp0ZXh0L2pzb247Y2hhcnNldD11dGYtOCwiK2VuY29kZVVSSUNvbXBvbmVudChKU09OLnN0cmluZ2lmeShhcHBEYXRhKSk7IGEuZG93bmxvYWQ9InBlcmRpcl9iYWNrdXAuanNvbiI7IGEuY2xpY2soKTsgfQogICAgZnVuY3Rpb24gaW1wb3J0RGF0YShpKSB7IGNvbnN0IHI9bmV3IEZpbGVSZWFkZXIoKTsgci5vbmxvYWQ9ZT0+eyB0cnkgeyBhcHBEYXRhPUpTT04ucGFyc2UoZS50YXJnZXQucmVzdWx0KTsgc2F2ZURhdGEoKTsgbG9jYXRpb24ucmVsb2FkKCk7IH0gY2F0Y2goZXJyKSB7IGFsZXJ0KCJGb3JtYXQgaW52YWxpZGUiKTsgfSB9OyByLnJlYWRBc1RleHQoaS5maWxlc1swXSk7IH0KCiAgICAvLyDilZDilZDilZAgU0hBUkVEOiBUZWFjaGVyIGxpc3QgZnJvbSBQSUxPVEUgZG9ubsOpZXMg4pWQ4pWQ4pWQCiAgICB2YXIgX3RlYWNoZXJzID0gW107CiAgICB2YXIgX3N0dWRlbnRzID0gW107CiAgICBmdW5jdGlvbiBmaWxsVGVhY2hlclNlbChzZWxJZCwgdmFsKSB7CiAgICAgICAgdmFyIHNlbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHNlbElkKTsgaWYoIXNlbCkgcmV0dXJuOwogICAgICAgIHZhciBoID0gJzxvcHRpb24gdmFsdWU9IiI+LS0gQ2hvaXNpciAtLTwvb3B0aW9uPjxvcHRpb24gdmFsdWU9Il9fYyI+XHUyNzBGIFNhaXNpci4uLjwvb3B0aW9uPic7CiAgICAgICAgX3RlYWNoZXJzLmZvckVhY2goZnVuY3Rpb24odCl7CiAgICAgICAgICAgIHZhciBuID0gKCh0Lk5vbXx8dC5ub218fCcnKSArICcgJyArICh0WydQcsOpbm9tJ118fHQuUHJlbm9tfHx0WydwcsOpbm9tJ118fCcnKSkudHJpbSgpOwogICAgICAgICAgICBpZihuKSBoICs9ICc8b3B0aW9uIHZhbHVlPSInK24rJyInKyhuPT09dmFsPycgc2VsZWN0ZWQnOicnKSsnPicrbisnPC9vcHRpb24+JzsKICAgICAgICB9KTsKICAgICAgICBpZih2YWwgJiYgdmFsIT09J19fYycgJiYgaC5pbmRleE9mKCd2YWx1ZT0iJyt2YWwrJyInKTwwKSBoKz0nPG9wdGlvbiB2YWx1ZT0iJyt2YWwrJyIgc2VsZWN0ZWQ+Jyt2YWwrJzwvb3B0aW9uPic7CiAgICAgICAgc2VsLmlubmVySFRNTD1oOyBpZih2YWwpIHNlbC52YWx1ZT12YWw7CiAgICAgICAgc2VsLm9uY2hhbmdlPWZ1bmN0aW9uKCl7IGlmKHRoaXMudmFsdWU9PT0nX19jJyl7dmFyIHg9cHJvbXB0KCdOb20gOicpO2lmKHgmJngudHJpbSgpKXt0aGlzLmluc2VydEFkamFjZW50SFRNTCgnYmVmb3JlZW5kJywnPG9wdGlvbiB2YWx1ZT0iJyt4LnRyaW0oKSsnIj4nK3gudHJpbSgpKyc8L29wdGlvbj4nKTt0aGlzLnZhbHVlPXgudHJpbSgpO31lbHNlIHRoaXMudmFsdWU9Jyc7fSB9OwogICAgfQoKICAgIC8vIOKVkOKVkOKVkCBFVkVORU1FTlRTIOKVkOKVkOKVkAogICAgdmFyIEVWX1M9e3RvZG86J8OAIGZhaXJlJyxwcm9ncmVzczonRW4gY291cnMnLGRvbmU6J1Rlcm1pbsOpJyxibG9ja2VkOidCbG9xdcOpJ307CiAgICB2YXIgRVZfQz17dG9kbzonI2U3NGMzYycscHJvZ3Jlc3M6JyNmMzljMTInLGRvbmU6JyMyN2FlNjAnLGJsb2NrZWQ6JyM5NWE1YTYnfTsKICAgIHZhciBFVl9QPXtoYXV0ZTonXHV7MUY1MzR9Jyxtb3llbm5lOidcdXsxRjdFMX0nLGJhc3NlOidcdXsxRjdFMn0nfTsKICAgIHZhciBfZXZGaWxlPW51bGw7CgoKICAgIC8vIOKVkOKVkOKVkCBBVVRPQ09NUExFVEUgw4lMw4hWRVMg4pWQ4pWQ4pWQCiAgICBmdW5jdGlvbiBnZXRTdHVkZW50TmFtZXMoKSB7CiAgICAgICAgcmV0dXJuIF9zdHVkZW50cy5tYXAoZnVuY3Rpb24ocykgewogICAgICAgICAgICB2YXIgbm9tID0gKHMuTm9tfHxzLm5vbXx8JycpLnRyaW0oKTsKICAgICAgICAgICAgdmFyIHByZW5vbSA9IChzWydQcsOpbm9tJ118fHMuUHJlbm9tfHxzWydwcsOpbm9tJ118fHMucHJlbm9tfHwnJykudHJpbSgpOwogICAgICAgICAgICB2YXIgY2xhc3NlID0gKHMuQ2xhc3NlfHxzLmNsYXNzZXx8JycpLnRyaW0oKTsKICAgICAgICAgICAgcmV0dXJuIHsgZnVsbDogbm9tICsgJyAnICsgcHJlbm9tLCBjbGFzc2U6IGNsYXNzZSB9OwogICAgICAgIH0pLmZpbHRlcihmdW5jdGlvbihzKSB7IHJldHVybiBzLmZ1bGwudHJpbSgpOyB9KTsKICAgIH0KCiAgICBmdW5jdGlvbiBhdHRhY2hTdHVkZW50QUMoaW5wdXQpIHsKICAgICAgICBpZiAoaW5wdXQuX2FjQXR0YWNoZWQpIHJldHVybjsKICAgICAgICBpbnB1dC5fYWNBdHRhY2hlZCA9IHRydWU7CiAgICAgICAgdmFyIHdyYXAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgICAgICB3cmFwLmNsYXNzTmFtZSA9ICdhYy13cmFwJzsKICAgICAgICBpbnB1dC5wYXJlbnROb2RlLmluc2VydEJlZm9yZSh3cmFwLCBpbnB1dCk7CiAgICAgICAgd3JhcC5hcHBlbmRDaGlsZChpbnB1dCk7CiAgICAgICAgdmFyIGxpc3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgICAgICBsaXN0LmNsYXNzTmFtZSA9ICdhYy1saXN0JzsKICAgICAgICB3cmFwLmFwcGVuZENoaWxkKGxpc3QpOwogICAgICAgIHZhciBzZWxJZHggPSAtMTsKCiAgICAgICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCBmdW5jdGlvbigpIHsKICAgICAgICAgICAgdmFyIHEgPSB0aGlzLnZhbHVlLnRyaW0oKS50b0xvd2VyQ2FzZSgpOwogICAgICAgICAgICBpZiAocS5sZW5ndGggPCAxIHx8ICFfc3R1ZGVudHMubGVuZ3RoKSB7IGxpc3QuY2xhc3NMaXN0LnJlbW92ZSgnc2hvdycpOyByZXR1cm47IH0KICAgICAgICAgICAgdmFyIG5hbWVzID0gZ2V0U3R1ZGVudE5hbWVzKCk7CiAgICAgICAgICAgIHZhciBtYXRjaGVzID0gbmFtZXMuZmlsdGVyKGZ1bmN0aW9uKHMpIHsgcmV0dXJuIHMuZnVsbC50b0xvd2VyQ2FzZSgpLmluZGV4T2YocSkgPj0gMDsgfSkuc2xpY2UoMCwgMTIpOwogICAgICAgICAgICBpZiAoIW1hdGNoZXMubGVuZ3RoKSB7IGxpc3QuY2xhc3NMaXN0LnJlbW92ZSgnc2hvdycpOyByZXR1cm47IH0KICAgICAgICAgICAgc2VsSWR4ID0gLTE7CiAgICAgICAgICAgIGxpc3QuaW5uZXJIVE1MID0gbWF0Y2hlcy5tYXAoZnVuY3Rpb24ocywgaSkgewogICAgICAgICAgICAgICAgcmV0dXJuICc8ZGl2IGNsYXNzPSJhYy1pdGVtIiBkYXRhLXZhbD0iJyArIHMuZnVsbCArICciPjxzcGFuPicgKyBzLmZ1bGwgKyAnPC9zcGFuPicgKyAocy5jbGFzc2UgPyAnPHNwYW4gY2xhc3M9ImFjLWNsYXNzZSI+JyArIHMuY2xhc3NlICsgJzwvc3Bhbj4nIDogJycpICsgJzwvZGl2Pic7CiAgICAgICAgICAgIH0pLmpvaW4oJycpOwogICAgICAgICAgICBsaXN0LmNsYXNzTGlzdC5hZGQoJ3Nob3cnKTsKICAgICAgICAgICAgbGlzdC5xdWVyeVNlbGVjdG9yQWxsKCcuYWMtaXRlbScpLmZvckVhY2goZnVuY3Rpb24oZWwpIHsKICAgICAgICAgICAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgICAgICAgICAgICAgaW5wdXQudmFsdWUgPSB0aGlzLmRhdGFzZXQudmFsOwogICAgICAgICAgICAgICAgICAgIGxpc3QuY2xhc3NMaXN0LnJlbW92ZSgnc2hvdycpOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0pOwoKICAgICAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgZnVuY3Rpb24oZSkgewogICAgICAgICAgICB2YXIgaXRlbXMgPSBsaXN0LnF1ZXJ5U2VsZWN0b3JBbGwoJy5hYy1pdGVtJyk7CiAgICAgICAgICAgIGlmICghaXRlbXMubGVuZ3RoIHx8ICFsaXN0LmNsYXNzTGlzdC5jb250YWlucygnc2hvdycpKSByZXR1cm47CiAgICAgICAgICAgIGlmIChlLmtleSA9PT0gJ0Fycm93RG93bicpIHsgZS5wcmV2ZW50RGVmYXVsdCgpOyBzZWxJZHggPSBNYXRoLm1pbihzZWxJZHggKyAxLCBpdGVtcy5sZW5ndGggLSAxKTsgdXBkYXRlU2VsKGl0ZW1zKTsgfQogICAgICAgICAgICBlbHNlIGlmIChlLmtleSA9PT0gJ0Fycm93VXAnKSB7IGUucHJldmVudERlZmF1bHQoKTsgc2VsSWR4ID0gTWF0aC5tYXgoc2VsSWR4IC0gMSwgMCk7IHVwZGF0ZVNlbChpdGVtcyk7IH0KICAgICAgICAgICAgZWxzZSBpZiAoZS5rZXkgPT09ICdFbnRlcicgJiYgc2VsSWR4ID49IDApIHsgZS5wcmV2ZW50RGVmYXVsdCgpOyBpbnB1dC52YWx1ZSA9IGl0ZW1zW3NlbElkeF0uZGF0YXNldC52YWw7IGxpc3QuY2xhc3NMaXN0LnJlbW92ZSgnc2hvdycpOyB9CiAgICAgICAgICAgIGVsc2UgaWYgKGUua2V5ID09PSAnRXNjYXBlJykgeyBsaXN0LmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3cnKTsgfQogICAgICAgIH0pOwoKICAgICAgICBmdW5jdGlvbiB1cGRhdGVTZWwoaXRlbXMpIHsgaXRlbXMuZm9yRWFjaChmdW5jdGlvbihlbCwgaSkgeyBlbC5jbGFzc0xpc3QudG9nZ2xlKCdhY3RpdmUnLCBpID09PSBzZWxJZHgpOyB9KTsgfQoKICAgICAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKCdibHVyJywgZnVuY3Rpb24oKSB7IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7IGxpc3QuY2xhc3NMaXN0LnJlbW92ZSgnc2hvdycpOyB9LCAxNTApOyB9KTsKICAgIH0KCiAgICAvLyBBdXRvLWF0dGFjaCB0byBhbGwgZXhpc3Rpbmcgc3R1ZGVudCBuYW1lIGlucHV0cwogICAgZnVuY3Rpb24gaW5pdFN0dWRlbnRBQygpIHsKICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcjZW50LXN0dWRlbnRzLWNvbnRhaW5lciAubmFtZSwgI3JldS1zdHVkZW50cy1jb250YWluZXIgLm5hbWUsIFtkYXRhLXN0dWRlbnQtYWNdJykuZm9yRWFjaChhdHRhY2hTdHVkZW50QUMpOwogICAgfQoKICAgIC8vIOKVkOKVkOKVkCBBVVRPQ09NUExFVEUgRU5TRUlHTkFOVFMgLyBQRVJTT05ORUwg4pWQ4pWQ4pWQCiAgICBmdW5jdGlvbiBnZXRUZWFjaGVyTmFtZXMoKSB7CiAgICAgICAgcmV0dXJuIF90ZWFjaGVycy5tYXAoZnVuY3Rpb24odCkgewogICAgICAgICAgICB2YXIgbm9tID0gKHQuTm9tfHx0Lm5vbXx8JycpLnRyaW0oKTsKICAgICAgICAgICAgdmFyIHByZW5vbSA9ICh0WydQcsOpbm9tJ118fHQuUHJlbm9tfHx0WydwcsOpbm9tJ118fHQucHJlbm9tfHwnJykudHJpbSgpOwogICAgICAgICAgICByZXR1cm4geyBmdWxsOiBub20gKyAnICcgKyBwcmVub20gfTsKICAgICAgICB9KS5maWx0ZXIoZnVuY3Rpb24odCkgeyByZXR1cm4gdC5mdWxsLnRyaW0oKTsgfSk7CiAgICB9CgogICAgZnVuY3Rpb24gYXR0YWNoVGVhY2hlckFDKGlucHV0KSB7CiAgICAgICAgaWYgKGlucHV0Ll9hY0F0dGFjaGVkKSByZXR1cm47CiAgICAgICAgaW5wdXQuX2FjQXR0YWNoZWQgPSB0cnVlOwogICAgICAgIHZhciB3cmFwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgICAgd3JhcC5jbGFzc05hbWUgPSAnYWMtd3JhcCc7CiAgICAgICAgaW5wdXQucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUod3JhcCwgaW5wdXQpOwogICAgICAgIHdyYXAuYXBwZW5kQ2hpbGQoaW5wdXQpOwogICAgICAgIHZhciBsaXN0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgICAgbGlzdC5jbGFzc05hbWUgPSAnYWMtbGlzdCc7CiAgICAgICAgd3JhcC5hcHBlbmRDaGlsZChsaXN0KTsKICAgICAgICB2YXIgc2VsSWR4ID0gLTE7CgogICAgICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIHZhciBxID0gdGhpcy52YWx1ZS50cmltKCkudG9Mb3dlckNhc2UoKTsKICAgICAgICAgICAgaWYgKHEubGVuZ3RoIDwgMSB8fCAhX3RlYWNoZXJzLmxlbmd0aCkgeyBsaXN0LmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3cnKTsgcmV0dXJuOyB9CiAgICAgICAgICAgIHZhciBuYW1lcyA9IGdldFRlYWNoZXJOYW1lcygpOwogICAgICAgICAgICB2YXIgbWF0Y2hlcyA9IG5hbWVzLmZpbHRlcihmdW5jdGlvbih0KSB7IHJldHVybiB0LmZ1bGwudG9Mb3dlckNhc2UoKS5pbmRleE9mKHEpID49IDA7IH0pLnNsaWNlKDAsIDEyKTsKICAgICAgICAgICAgaWYgKCFtYXRjaGVzLmxlbmd0aCkgeyBsaXN0LmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3cnKTsgcmV0dXJuOyB9CiAgICAgICAgICAgIHNlbElkeCA9IC0xOwogICAgICAgICAgICBsaXN0LmlubmVySFRNTCA9IG1hdGNoZXMubWFwKGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgIHJldHVybiAnPGRpdiBjbGFzcz0iYWMtaXRlbSIgZGF0YS12YWw9IicgKyB0LmZ1bGwgKyAnIj48c3Bhbj4nICsgdC5mdWxsICsgJzwvc3Bhbj48c3BhbiBjbGFzcz0iYWMtY2xhc3NlIj5Qcm9mPC9zcGFuPjwvZGl2Pic7CiAgICAgICAgICAgIH0pLmpvaW4oJycpOwogICAgICAgICAgICBsaXN0LmNsYXNzTGlzdC5hZGQoJ3Nob3cnKTsKICAgICAgICAgICAgbGlzdC5xdWVyeVNlbGVjdG9yQWxsKCcuYWMtaXRlbScpLmZvckVhY2goZnVuY3Rpb24oZWwpIHsKICAgICAgICAgICAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgICAgICAgICAgICAgaW5wdXQudmFsdWUgPSB0aGlzLmRhdGFzZXQudmFsOwogICAgICAgICAgICAgICAgICAgIGxpc3QuY2xhc3NMaXN0LnJlbW92ZSgnc2hvdycpOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0pOwoKICAgICAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgZnVuY3Rpb24oZSkgewogICAgICAgICAgICB2YXIgaXRlbXMgPSBsaXN0LnF1ZXJ5U2VsZWN0b3JBbGwoJy5hYy1pdGVtJyk7CiAgICAgICAgICAgIGlmICghaXRlbXMubGVuZ3RoIHx8ICFsaXN0LmNsYXNzTGlzdC5jb250YWlucygnc2hvdycpKSByZXR1cm47CiAgICAgICAgICAgIGlmIChlLmtleSA9PT0gJ0Fycm93RG93bicpIHsgZS5wcmV2ZW50RGVmYXVsdCgpOyBzZWxJZHggPSBNYXRoLm1pbihzZWxJZHggKyAxLCBpdGVtcy5sZW5ndGggLSAxKTsgdXBkYXRlU2VsKGl0ZW1zKTsgfQogICAgICAgICAgICBlbHNlIGlmIChlLmtleSA9PT0gJ0Fycm93VXAnKSB7IGUucHJldmVudERlZmF1bHQoKTsgc2VsSWR4ID0gTWF0aC5tYXgoc2VsSWR4IC0gMSwgMCk7IHVwZGF0ZVNlbChpdGVtcyk7IH0KICAgICAgICAgICAgZWxzZSBpZiAoZS5rZXkgPT09ICdFbnRlcicgJiYgc2VsSWR4ID49IDApIHsgZS5wcmV2ZW50RGVmYXVsdCgpOyBpbnB1dC52YWx1ZSA9IGl0ZW1zW3NlbElkeF0uZGF0YXNldC52YWw7IGxpc3QuY2xhc3NMaXN0LnJlbW92ZSgnc2hvdycpOyB9CiAgICAgICAgICAgIGVsc2UgaWYgKGUua2V5ID09PSAnRXNjYXBlJykgeyBsaXN0LmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3cnKTsgfQogICAgICAgIH0pOwoKICAgICAgICBmdW5jdGlvbiB1cGRhdGVTZWwoaXRlbXMpIHsgaXRlbXMuZm9yRWFjaChmdW5jdGlvbihlbCwgaSkgeyBlbC5jbGFzc0xpc3QudG9nZ2xlKCdhY3RpdmUnLCBpID09PSBzZWxJZHgpOyB9KTsgfQogICAgICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2JsdXInLCBmdW5jdGlvbigpIHsgc2V0VGltZW91dChmdW5jdGlvbigpIHsgbGlzdC5jbGFzc0xpc3QucmVtb3ZlKCdzaG93Jyk7IH0sIDE1MCk7IH0pOwogICAgfQoKICAgIGZ1bmN0aW9uIGluaXRUZWFjaGVyQUMoKSB7CiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnI2VudC10ZWFjaGVycy1jb250YWluZXIgLm5hbWUsICNyZXUtdGVhY2hlcnMtY29udGFpbmVyIC5uYW1lJykuZm9yRWFjaChhdHRhY2hUZWFjaGVyQUMpOwogICAgfQoKCiAgICBmdW5jdGlvbiBldlByZXZpZXdGaWxlKGlucCl7CiAgICAgICAgdmFyIGY9aW5wLmZpbGVzWzBdOwogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdldi1mbmFtZScpLnRleHRDb250ZW50PWY/Zi5uYW1lKycgKCcrKGYuc2l6ZS8xMDI0KS50b0ZpeGVkKDApKycgS28pJzonJzsKICAgICAgICBpZihmJiZmLnNpemU+NSoxMDI0KjEwMjQpe2FsZXJ0KCdNYXggNSBNbycpO2lucC52YWx1ZT0nJztfZXZGaWxlPW51bGw7cmV0dXJuO30KICAgICAgICBfZXZGaWxlPWZ8fG51bGw7CiAgICB9CiAgICBmdW5jdGlvbiB0b0I2NChmaWxlLGNiKXt2YXIgcj1uZXcgRmlsZVJlYWRlcigpO3Iub25sb2FkPWZ1bmN0aW9uKGUpe2NiKHtuYW1lOmZpbGUubmFtZSx0eXBlOmZpbGUudHlwZSxzaXplOmZpbGUuc2l6ZSxkYXRhOmUudGFyZ2V0LnJlc3VsdH0pO307ci5yZWFkQXNEYXRhVVJMKGZpbGUpO30KCiAgICBmdW5jdGlvbiBvcGVuRXZNb2RhbChpZCl7CiAgICAgICAgdmFyIF9ldm09ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2V2TW9kJyk7X2V2bS5jbGFzc0xpc3QuYWRkKCdvcGVuJyk7X2V2bS5zdHlsZS5kaXNwbGF5PSdmbGV4JzsKICAgICAgICBmaWxsVGVhY2hlclNlbCgnZXYtcmVzcCcpO2J1aWxkQ2xhc3NTZWxlY3QoKTtkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZXYtbXNncGFyZW50cycpLmNoZWNrZWQ9ZmFsc2U7CiAgICAgICAgCiAgICAgICAgaWYoaWQpewogICAgICAgICAgICB2YXIgcD0oYXBwRGF0YS5ldmVudHN8fFtdKS5maW5kKGZ1bmN0aW9uKHgpe3JldHVybiB4LmlkLnRvU3RyaW5nKCk9PT1pZC50b1N0cmluZygpO30pO2lmKCFwKXJldHVybjsKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2V2LW10JykudGV4dENvbnRlbnQ9J01vZGlmaWVyIGxcdTIwMTnDqXbDqW5lbWVudCc7CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdldi1laWQnKS52YWx1ZT1pZDtkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZXYtbmFtZScpLnZhbHVlPXAubmFtZTsKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2V2LXN0YXJ0JykudmFsdWU9cC5zdGFydHx8Jyc7ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2V2LWRlYWQnKS52YWx1ZT1wLmRlYWRsaW5lfHwnJzsKICAgICAgICAgICAgX2V2Q2xhc3Nlcz0ocC5jbGFzc2VzfHxbXSkuc2xpY2UoKTtyZW5kZXJFdkNsYXNzZXMoKTsKICAgICAgICAgICAgZmlsbFRlYWNoZXJTZWwoJ2V2LXJlc3AnLHAucmVzcCk7CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdldi1tc2dwYXJlbnRzJykuY2hlY2tlZD0hIXAubXNnUGFyZW50cztkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZXYtZGVzYycpLmlubmVySFRNTD1wLmRlc2N8fCcnOwogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZXYtdGFncycpLnZhbHVlPShwLnRhZ3N8fFtdKS5qb2luKCcsICcpOwogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZXYtZGVsLWJ0bicpLnN0eWxlLmRpc3BsYXk9J2ZsZXgnOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdldi1tdCcpLnRleHRDb250ZW50PSdOb3V2ZWwgw6l2w6luZW1lbnQnO2RvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdldi1laWQnKS52YWx1ZT0nJzsKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2V2LW5hbWUnKS52YWx1ZT0nJztkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZXYtc3RhcnQnKS52YWx1ZT1uZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkuc3BsaXQoJ1QnKVswXTsKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2V2LWRlYWQnKS52YWx1ZT0nJzsKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2V2LWRlc2MnKS5pbm5lckhUTUw9Jyc7ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2V2LXRhZ3MnKS52YWx1ZT0nJzsKICAgICAgICAgICAgX2V2Q2xhc3Nlcz1bXTtyZW5kZXJFdkNsYXNzZXMoKTsKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2V2LWRlbC1idG4nKS5zdHlsZS5kaXNwbGF5PSdub25lJzsKICAgICAgICB9CiAgICB9CiAgICBmdW5jdGlvbiBjbG9zZUV2TW9kYWwoKXt2YXIgbT1kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZXZNb2QnKTttLmNsYXNzTGlzdC5yZW1vdmUoJ29wZW4nKTttLnN0eWxlLmRpc3BsYXk9J25vbmUnO30KICAgIGZ1bmN0aW9uIGRlbEV2RnJvbU1vZGFsKCl7dmFyIGlkPWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdldi1laWQnKS52YWx1ZTtpZihpZCYmY29uZmlybSgnU3VwcHJpbWVyID8nKSl7YXBwRGF0YS5ldmVudHM9KGFwcERhdGEuZXZlbnRzfHxbXSkuZmlsdGVyKGZ1bmN0aW9uKHApe3JldHVybiBwLmlkLnRvU3RyaW5nKCkhPT1pZC50b1N0cmluZygpO30pO3NhdmVEYXRhKCk7Y2xvc2VFdk1vZGFsKCk7cmVuZGVyRXZlbnRzKCk7fX0KCiAgICBmdW5jdGlvbiBzYXZlRXZlbnQoKXsKICAgICAgICB2YXIgbm09ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2V2LW5hbWUnKS52YWx1ZS50cmltKCk7aWYoIW5tKXthbGVydCgnSW50aXR1bMOpIHJlcXVpcycpO3JldHVybjt9CiAgICAgICAgdmFyIGVpZD1kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZXYtZWlkJykudmFsdWU7CiAgICAgICAgdmFyIG9iaj17aWQ6ZWlkfHxEYXRlLm5vdygpLnRvU3RyaW5nKCksbmFtZTpubSxzdGFydDpkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZXYtc3RhcnQnKS52YWx1ZSwKICAgICAgICAgICAgZGVhZGxpbmU6ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2V2LWRlYWQnKS52YWx1ZSxyZXNwOmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdldi1yZXNwJykudmFsdWUsY2xhc3NlczpfZXZDbGFzc2VzLnNsaWNlKCksCiAgICAgICAgICAgIG1zZ1BhcmVudHM6ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2V2LW1zZ3BhcmVudHMnKS5jaGVja2VkLAogICAgICAgICAgICBkZXNjOmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdldi1kZXNjJykuaW5uZXJIVE1MLAogICAgICAgICAgICB0YWdzOmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdldi10YWdzJykudmFsdWUuc3BsaXQoJywnKS5tYXAoZnVuY3Rpb24odCl7cmV0dXJuIHQudHJpbSgpO30pLmZpbHRlcihCb29sZWFuKSwKICAgICAgICAgICAgY3JlYXRlZDpuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCl9OwogICAgICAgIGlmKCFhcHBEYXRhLmV2ZW50cykgYXBwRGF0YS5ldmVudHM9W107CiAgICAgICAgaWYoZWlkKXsKICAgICAgICAgICAgdmFyIGlkeD0tMTtmb3IodmFyIGs9MDtrPGFwcERhdGEuZXZlbnRzLmxlbmd0aDtrKyspe2lmKFN0cmluZyhhcHBEYXRhLmV2ZW50c1trXS5pZCk9PT1TdHJpbmcoZWlkKSl7aWR4PWs7YnJlYWs7fX0KICAgICAgICAgICAgaWYoaWR4Pj0wKXtvYmouY3JlYXRlZD1hcHBEYXRhLmV2ZW50c1tpZHhdLmNyZWF0ZWQ7YXBwRGF0YS5ldmVudHNbaWR4XT1vYmo7fQogICAgICAgICAgICBlbHNle2FwcERhdGEuZXZlbnRzLnB1c2gob2JqKTt9CiAgICAgICAgfWVsc2V7YXBwRGF0YS5ldmVudHMucHVzaChvYmopO30KICAgICAgICBzYXZlRGF0YSgpO2Nsb3NlRXZNb2RhbCgpO3JlbmRlckV2ZW50cygpOwogICAgfQogICAgZnVuY3Rpb24gZGxFdkZpbGUoaWQpe3ZhciBwPShhcHBEYXRhLmV2ZW50c3x8W10pLmZpbmQoZnVuY3Rpb24oeCl7cmV0dXJuIHguaWQudG9TdHJpbmcoKT09PWlkLnRvU3RyaW5nKCk7fSk7aWYocCYmcC5maWxlKXt2YXIgYT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7YS5ocmVmPXAuZmlsZS5kYXRhO2EuZG93bmxvYWQ9cC5maWxlLm5hbWU7YS5jbGljaygpO319CgogICAgZnVuY3Rpb24gcmVuZGVyRXZlbnRzKCl7CiAgICAgICAgaWYoIWFwcERhdGEuZXZlbnRzKWFwcERhdGEuZXZlbnRzPVtdOwogICAgICAgIHZhciBxcz0oZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2V2LXNlYXJjaCcpLnZhbHVlfHwnJykudG9Mb3dlckNhc2UoKS50cmltKCk7CiAgICAgICAgdmFyIHRkPW5ldyBEYXRlKCkudG9JU09TdHJpbmcoKS5zcGxpdCgnVCcpWzBdOwogICAgICAgIHZhciBsaXN0PWFwcERhdGEuZXZlbnRzLmZpbHRlcihmdW5jdGlvbihwKXsKICAgICAgICAgICAgaWYocXMmJnAubmFtZS50b0xvd2VyQ2FzZSgpLmluZGV4T2YocXMpPDAmJihwLnJlc3B8fCcnKS50b0xvd2VyQ2FzZSgpLmluZGV4T2YocXMpPDApIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfSk7CiAgICAgICAgbGlzdC5zb3J0KGZ1bmN0aW9uKGEsYil7cmV0dXJuIG5ldyBEYXRlKGEuZGVhZGxpbmV8fGEuc3RhcnR8fCc5OTk5JyktbmV3IERhdGUoYi5kZWFkbGluZXx8Yi5zdGFydHx8Jzk5OTknKTt9KTsKICAgICAgICB2YXIgYWxsPWFwcERhdGEuZXZlbnRzOwogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdrcGktZXYtdG90JykudGV4dENvbnRlbnQ9YWxsLmxlbmd0aDsKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgna3BpLWV2LW1zZycpLnRleHRDb250ZW50PWFsbC5maWx0ZXIoZnVuY3Rpb24ocCl7cmV0dXJuIHAubXNnUGFyZW50czt9KS5sZW5ndGg7CiAgICAgICAgdmFyIGJveD1kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZXYtZ3JpZCcpOwogICAgICAgIGlmKCFsaXN0Lmxlbmd0aCl7Ym94LmlubmVySFRNTD0nPGRpdiBzdHlsZT0idGV4dC1hbGlnbjpjZW50ZXI7Y29sb3I6I2JiYjtwYWRkaW5nOjQwcHggMjBweDtncmlkLWNvbHVtbjoxLy0xIj48aSBjbGFzcz0iZmFzIGZhLWNhbGVuZGFyLWNoZWNrIiBzdHlsZT0iZm9udC1zaXplOjJyZW07bWFyZ2luLWJvdHRvbToxMHB4O2Rpc3BsYXk6YmxvY2siPjwvaT5BdWN1biDDqXbDqW5lbWVudDwvZGl2Pic7cmV0dXJuO30KICAgICAgICB2YXIgaD0nJztsaXN0LmZvckVhY2goZnVuY3Rpb24ocCl7CiAgICAgICAgICAgIHZhciBjPXAubXNnUGFyZW50cz8nIzI3YWU2MCc6J3ZhcigtLWhlYWRlciknLGxhdGU9cC5kZWFkbGluZSYmcC5kZWFkbGluZTx0ZDsKICAgICAgICAgICAgdmFyIGRzPXAuZGVhZGxpbmU/bmV3IERhdGUocC5kZWFkbGluZSkudG9Mb2NhbGVEYXRlU3RyaW5nKCdmci1GUicse2RheTonbnVtZXJpYycsbW9udGg6J3Nob3J0J30pOicnOwogICAgICAgICAgICBoKz0nPGRpdiBjbGFzcz0iZXYtY2FyZCIgc3R5bGU9ImJvcmRlci1sZWZ0OjRweCBzb2xpZCAnK2MrJyI+JzsKICAgICAgICAgICAgaCs9JzxkaXYgY2xhc3M9ImV2LWNhcmQtaGQiPjxoND4nKyhwLm1zZ1BhcmVudHM/J1x1MjcwOVx1RkUwRiAnOicnKSsgcC5uYW1lKyc8L2g0PjxkaXYgY2xhc3M9ImV2LWNhcmQtYWN0cyI+PGJ1dHRvbiBvbmNsaWNrPSJvcGVuRXZNb2RhbChcJycrcC5pZCsnXCcpIiB0aXRsZT0iTW9kaWZpZXIiPjxpIGNsYXNzPSJmYXMgZmEtcGVuIj48L2k+PC9idXR0b24+PGJ1dHRvbiBvbmNsaWNrPSJpZihjb25maXJtKFwnU3VwcHJpbWVyID9cJykpZGVsRXZEaXJlY3QoXCcnK3AuaWQrJ1wnKSIgdGl0bGU9IlN1cHByaW1lciI+PGkgY2xhc3M9ImZhcyBmYS10cmFzaCI+PC9pPjwvYnV0dG9uPjwvZGl2PjwvZGl2Pic7CiAgICAgICAgICAgIGgrPSc8ZGl2IGNsYXNzPSJldi1jYXJkLW1ldGEiPic7CiAgICAgICAgICAgIGlmKGRzKSBoKz0nPHNwYW4+PGkgY2xhc3M9ImZhcyBmYS1mbGFnIj48L2k+ICcrZHMrKGxhdGU/JyA8YiBzdHlsZT0iY29sb3I6I2U3NGMzYyI+XHUyNkEwIMOJY2jDqWFuY2UgZMOpcGFzc8OpZTwvYj4nOicnKSsnPC9zcGFuPic7CiAgICAgICAgICAgIGlmKHAucmVzcCkgaCs9JzxzcGFuPjxpIGNsYXNzPSJmYXMgZmEtdXNlciI+PC9pPiAnK3AucmVzcCsnPC9zcGFuPic7CiAgICAgICAgICAgIGlmKHAubXNnUGFyZW50cykgaCs9JzxzcGFuIHN0eWxlPSJjb2xvcjojMjdhZTYwO2ZvbnQtc2l6ZTouN3JlbTsiPjxpIGNsYXNzPSJmYXMgZmEtZW52ZWxvcGUiPjwvaT4gUGFyZW50cyBpbmZvcm3DqXM8L3NwYW4+JztoKz0nPC9kaXY+JzsKICAgICAgICAgICAgaWYocC5kZXNjKXtoKz0nPGRpdiBjbGFzcz0iZXYtY2FyZC1kZXNjIj4nK3AuZGVzYysnPC9kaXY+Jzt9CiAgICAgICAgICAgIGgrPSc8ZGl2IGNsYXNzPSJldi1jYXJkLWZ0Ij4nOwogICAgICAgICAgICBpZihwLnRhZ3MmJnAudGFncy5sZW5ndGgpIHAudGFncy5mb3JFYWNoKGZ1bmN0aW9uKHQpe2grPSc8c3BhbiBjbGFzcz0iZXYtdGFnIj4nK3QrJzwvc3Bhbj4nO30pOwogICAgICAgICAgICBpZihwLmZpbGUpIGgrPSc8c3BhbiBjbGFzcz0iZXYtYXR0YWNoIiBvbmNsaWNrPSJkbEV2RmlsZShcJycrcC5pZCsnXCcpIiB0aXRsZT0iVMOpbMOpY2hhcmdlciI+PGkgY2xhc3M9ImZhcyBmYS1wYXBlcmNsaXAiPjwvaT4gJytwLmZpbGUubmFtZSsnPC9zcGFuPic7CiAgICAgICAgICAgIAogICAgICAgICAgICBoKz0nPC9kaXY+PC9kaXY+JzsKICAgICAgICB9KTtib3guaW5uZXJIVE1MPWg7CiAgICB9CiAgICBmdW5jdGlvbiBkZWxFdkRpcmVjdChpZCl7YXBwRGF0YS5ldmVudHM9KGFwcERhdGEuZXZlbnRzfHxbXSkuZmlsdGVyKGZ1bmN0aW9uKHApe3JldHVybiBwLmlkLnRvU3RyaW5nKCkhPT1pZC50b1N0cmluZygpO30pO3NhdmVEYXRhKCk7cmVuZGVyRXZlbnRzKCk7fQoKICAgIC8vIOKVkOKVkOKVkCBHQU5UVCAvIFBST0NFRFVSRVMg4pWQ4pWQ4pWQCiAgICB2YXIgVkFDPXthbGw6WzQzLDQ0LDUyLDFdLEE6WzcsOCwxNSwxNl0sQjpbOCw5LDE2LDE3XSxDOls5LDEwLDE3LDE4XX07CiAgICB2YXIgX2d2cz1udWxsLF9ndmw9MTYsU1k9W107CiAgICBmdW5jdGlvbiBidWlsZFNZKCl7U1k9W107Zm9yKHZhciB3PTM2O3c8PTUzO3crKylTWS5wdXNoKHcpO2Zvcih2YXIgdz0xO3c8PTI2O3crKylTWS5wdXNoKHcpO30KICAgIGZ1bmN0aW9uIGdldFZXKCl7dmFyIHo9KGFwcERhdGEuc2V0dGluZ3MmJmFwcERhdGEuc2V0dGluZ3Muem9uZSl8fCdCJzt2YXIgdj1WQUMuYWxsLnNsaWNlKCk7aWYoVkFDW3pdKXY9di5jb25jYXQoVkFDW3pdKTtyZXR1cm4gdjt9CiAgICBmdW5jdGlvbiBpc29XKGQpe3ZhciBkdD1uZXcgRGF0ZShEYXRlLlVUQyhkLmdldEZ1bGxZZWFyKCksZC5nZXRNb250aCgpLGQuZ2V0RGF0ZSgpKSk7ZHQuc2V0VVRDRGF0ZShkdC5nZXRVVENEYXRlKCkrNC0oZHQuZ2V0VVRDRGF5KCl8fDcpKTt2YXIgeTA9bmV3IERhdGUoRGF0ZS5VVEMoZHQuZ2V0VVRDRnVsbFllYXIoKSwwLDEpKTtyZXR1cm4gTWF0aC5jZWlsKCgoKGR0LXkwKS84NjRlNSkrMSkvNyk7fQogICAgZnVuY3Rpb24gY3VyVygpe3JldHVybiBpc29XKG5ldyBEYXRlKCkpO30KICAgIGZ1bmN0aW9uIHdrTW8odyl7dmFyIHk9dz49MzY/MjAyNToyMDI2O3ZhciBqND1uZXcgRGF0ZSh5LDAsNCk7dmFyIGQ9bmV3IERhdGUoajQuZ2V0VGltZSgpKygody0xKSo3LSgoajQuZ2V0RGF5KCkrNiklNykpKjg2NGU1KTt2YXIgbW49ZC50b0xvY2FsZURhdGVTdHJpbmcoJ2ZyLUZSJyx7bW9udGg6J3Nob3J0J30pLnJlcGxhY2UoJy4nLCcnKTtyZXR1cm4gbW4uY2hhckF0KDApLnRvVXBwZXJDYXNlKCkrbW4uc2xpY2UoMSk7fQogICAgZnVuY3Rpb24gaW5pdEdhbnR0Vmlldygpe2J1aWxkU1koKTt2YXIgY3c9Y3VyVygpLGk9U1kuaW5kZXhPZihjdyk7aWYoaTwwKWk9MDtfZ3ZzPU1hdGgubWF4KDAsaSk7X2d2bD0xNjt3aW5kb3cuX2dhbnR0UmVhZHk9dHJ1ZTt9CiAgICBmdW5jdGlvbiBndFByZXYoKXtfZ3ZzPU1hdGgubWF4KDAsX2d2cy1fZ3ZsKTtyZW5kZXJHYW50dCgpO30KICAgIGZ1bmN0aW9uIGd0TmV4dCgpe19ndnM9TWF0aC5taW4oU1kubGVuZ3RoLV9ndmwsX2d2cytfZ3ZsKTtpZihfZ3ZzPDApX2d2cz0wO3JlbmRlckdhbnR0KCk7fQogICAgZnVuY3Rpb24gZ3RUb2RheSgpe3ZhciBjdz1jdXJXKCksaT1TWS5pbmRleE9mKGN3KTtpZihpPDApaT0wO19ndnM9TWF0aC5tYXgoMCxpKTtfZ3ZsPTE2O3JlbmRlckdhbnR0KCk7fQogICAgZnVuY3Rpb24gZ3RZZWFyKCl7X2d2cz0wO19ndmw9U1kubGVuZ3RoO3JlbmRlckdhbnR0KCk7X2d2bD0xNjt9CgogICAgZnVuY3Rpb24gb3Blbkd0TW9kYWwoaWQpewogICAgICAgIHZhciBfZ3RtPWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdndE1vZCcpO19ndG0uY2xhc3NMaXN0LmFkZCgnb3BlbicpO19ndG0uc3R5bGUuZGlzcGxheT0nZmxleCc7CiAgICAgICAgZmlsbFRlYWNoZXJTZWwoJ2d0LXJlc3AnKTt2YXIgY3c9Y3VyVygpOwogICAgICAgIGlmKGlkKXt2YXIgZz0oYXBwRGF0YS5nYW50dHx8W10pLmZpbmQoZnVuY3Rpb24oeCl7cmV0dXJuIHguaWQudG9TdHJpbmcoKT09PWlkLnRvU3RyaW5nKCk7fSk7aWYoIWcpcmV0dXJuOwogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ3QtbXQnKS50ZXh0Q29udGVudD0nTW9kaWZpZXIgbFx4MjfDqWNow6lhbmNlJztkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ3QtZWlkJykudmFsdWU9aWQ7CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdndC1uYW1lJykudmFsdWU9Zy5uYW1lO2RvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdndC1jb2RlJykudmFsdWU9Zy5jb2RlfHwnJzsKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2d0LWNhdCcpLnZhbHVlPWcuY2F0fHwnQXV0cmUnO2RvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdndC13cycpLnZhbHVlPWcud3N0YXJ0fHxjdzsKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2d0LXdlJykudmFsdWU9Zy53ZW5kfHxjdztmaWxsVGVhY2hlclNlbCgnZ3QtcmVzcCcsZy5yZXNwKTsKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2d0LW5vdGVzJykuaW5uZXJIVE1MPWcubm90ZXN8fCcnOwogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ3QtZGVsLWJ0bicpLnN0eWxlLmRpc3BsYXk9J2ZsZXgnOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdndC1tdCcpLnRleHRDb250ZW50PSdOb3V2ZWxsZSDDqWNow6lhbmNlJztkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ3QtZWlkJykudmFsdWU9Jyc7CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdndC1uYW1lJykudmFsdWU9Jyc7ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2d0LWNvZGUnKS52YWx1ZT0nJzsKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2d0LWNhdCcpLnZhbHVlPSdBdXRyZSc7ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2d0LXdzJykudmFsdWU9Y3c7CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdndC13ZScpLnZhbHVlPWN3O2RvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdndC1ub3RlcycpLmlubmVySFRNTD0nJzsKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2d0LWRlbC1idG4nKS5zdHlsZS5kaXNwbGF5PSdub25lJzsKICAgICAgICB9CiAgICB9CiAgICBmdW5jdGlvbiBjbG9zZUd0TW9kYWwoKXt2YXIgbT1kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ3RNb2QnKTttLmNsYXNzTGlzdC5yZW1vdmUoJ29wZW4nKTttLnN0eWxlLmRpc3BsYXk9J25vbmUnO30KICAgIGZ1bmN0aW9uIGRlbEd0RnJvbU1vZGFsKCl7dmFyIGlkPWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdndC1laWQnKS52YWx1ZTtpZihpZCYmY29uZmlybSgnU3VwcHJpbWVyIGNldHRlIHByb2PDqWR1cmUgPycpKXthcHBEYXRhLmdhbnR0PShhcHBEYXRhLmdhbnR0fHxbXSkuZmlsdGVyKGZ1bmN0aW9uKGcpe3JldHVybiBnLmlkLnRvU3RyaW5nKCkhPT1pZC50b1N0cmluZygpO30pO3NhdmVEYXRhKCk7Y2xvc2VHdE1vZGFsKCk7cmVuZGVyR2FudHQoKTt9fQogICAgZnVuY3Rpb24gdG9nZ2xlR3REb25lKGlkKXt2YXIgZz0oYXBwRGF0YS5nYW50dHx8W10pLmZpbmQoZnVuY3Rpb24oeCl7cmV0dXJuIHguaWQudG9TdHJpbmcoKT09PWlkLnRvU3RyaW5nKCk7fSk7aWYoZyl7Zy5kb25lPSFnLmRvbmU7c2F2ZURhdGEoKTtyZW5kZXJHYW50dCgpO319CiAgICBmdW5jdGlvbiBzYXZlR3QoKXsKICAgICAgICB2YXIgbm09ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2d0LW5hbWUnKS52YWx1ZS50cmltKCk7aWYoIW5tKXthbGVydCgnSW50aXR1bMOpIHJlcXVpcycpO3JldHVybjt9CiAgICAgICAgdmFyIGVpZD1kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ3QtZWlkJykudmFsdWU7CiAgICAgICAgdmFyIHdzPXBhcnNlSW50KGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdndC13cycpLnZhbHVlKXx8MSx3ZT1wYXJzZUludChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ3Qtd2UnKS52YWx1ZSl8fHdzOwogICAgICAgIHZhciBvYmo9e2lkOmVpZHx8RGF0ZS5ub3coKS50b1N0cmluZygpLG5hbWU6bm0sY29kZTpkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ3QtY29kZScpLnZhbHVlLnRyaW0oKSwKICAgICAgICAgICAgY2F0OmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdndC1jYXQnKS52YWx1ZSx3c3RhcnQ6d3Msd2VuZDp3ZSwKICAgICAgICAgICAgZG9uZTplaWQ/KChhcHBEYXRhLmdhbnR0fHxbXSkuZmluZChmdW5jdGlvbihnKXtyZXR1cm4gZy5pZC50b1N0cmluZygpPT09ZWlkLnRvU3RyaW5nKCl9KXx8e30pLmRvbmV8fGZhbHNlOmZhbHNlLAogICAgICAgICAgICByZXNwOmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdndC1yZXNwJykudmFsdWUsbm90ZXM6ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2d0LW5vdGVzJykuaW5uZXJIVE1MfTsKICAgICAgICBpZighYXBwRGF0YS5nYW50dClhcHBEYXRhLmdhbnR0PVtdOwogICAgICAgIGlmKGVpZCl7dmFyIGk9YXBwRGF0YS5nYW50dC5maW5kSW5kZXgoZnVuY3Rpb24oZyl7cmV0dXJuIGcuaWQudG9TdHJpbmcoKT09PWVpZC50b1N0cmluZygpO30pO2lmKGk+PTApYXBwRGF0YS5nYW50dFtpXT1vYmo7ZWxzZSBhcHBEYXRhLmdhbnR0LnB1c2gob2JqKTt9CiAgICAgICAgZWxzZSBhcHBEYXRhLmdhbnR0LnB1c2gob2JqKTsKICAgICAgICBzYXZlRGF0YSgpO2Nsb3NlR3RNb2RhbCgpO3JlbmRlckdhbnR0KCk7CiAgICB9CgogICAgZnVuY3Rpb24gd0luUih3LHdzLHdlKXtyZXR1cm4gd3M8PXdlPyh3Pj13cyYmdzw9d2UpOih3Pj13c3x8dzw9d2UpO30KCiAgICBmdW5jdGlvbiByZW5kZXJHYW50dCgpewogICAgICAgIGlmKCFTWS5sZW5ndGgpYnVpbGRTWSgpO2lmKF9ndnM9PT1udWxsKWluaXRHYW50dFZpZXcoKTsKICAgICAgICB2YXIgZmM9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2d0LWZjJykudmFsdWU7CiAgICAgICAgdmFyIHByb2NzPShhcHBEYXRhLnByb2NlZHVyZXN8fFtdKS5maWx0ZXIoZnVuY3Rpb24ocCl7cmV0dXJuIChwLndzdGFydHx8cC5hbm5lZSkmJiFwLmRvbmUmJihmYz09PSdBTEwnfHxwLmNhdD09PWZjKTt9KTsKICAgICAgICAvLyBBbHNvIGluY2x1ZGUgc3RhbmRhbG9uZSBnYW50dCBpdGVtcyAow6ljaMOpYW5jZXMgbm90IGxpbmtlZCB0byBwcm9jZWR1cmVzKQogICAgICAgIHZhciBnYW50dEl0ZW1zPShhcHBEYXRhLmdhbnR0fHxbXSkuZmlsdGVyKGZ1bmN0aW9uKGcpe3JldHVybiBnLndzdGFydCYmIWcuZG9uZSYmKGZjPT09J0FMTCd8fGcuY2F0PT09ZmMpO30pOwogICAgICAgIGdhbnR0SXRlbXMuZm9yRWFjaChmdW5jdGlvbihnKXtpZighZy50aXRsZSlnLnRpdGxlPWcubmFtZTt9KTsKICAgICAgICBwcm9jcz1wcm9jcy5jb25jYXQoZ2FudHRJdGVtcyk7CiAgICAgICAgLy8gU29ydCBieSB3c3RhcnQgdGhlbiBjb2RlIG51bWJlcgogICAgICAgIHByb2NzLnNvcnQoZnVuY3Rpb24oYSxiKXsKICAgICAgICAgICAgLy8gYW5uZWUgaXRlbXMgZ28gdG8gdGhlIGVuZAogICAgICAgICAgICBpZihhLmFubmVlJiYhYi5hbm5lZSlyZXR1cm4gMTtpZighYS5hbm5lZSYmYi5hbm5lZSlyZXR1cm4gLTE7CiAgICAgICAgICAgIGlmKGEuYW5uZWUmJmIuYW5uZWUpcmV0dXJuIG5hdENvZGVTb3J0KGEsYik7CiAgICAgICAgICAgIC8vIG90aGVycyBieSB3c3RhcnQgdGhlbiB3ZW5kCiAgICAgICAgICAgIHZhciBpYT1TWS5pbmRleE9mKGEud3N0YXJ0KSxpYj1TWS5pbmRleE9mKGIud3N0YXJ0KTsKICAgICAgICAgICAgaWYoaWE8MClpYT05OTk7aWYoaWI8MClpYj05OTk7CiAgICAgICAgICAgIGlmKGlhIT09aWIpcmV0dXJuIGlhLWliOwogICAgICAgICAgICB2YXIgZWE9U1kuaW5kZXhPZihhLndlbmQpLGViPVNZLmluZGV4T2YoYi53ZW5kKTsKICAgICAgICAgICAgaWYoZWE8MCllYT05OTk7aWYoZWI8MCllYj05OTk7CiAgICAgICAgICAgIGlmKGVhIT09ZWIpcmV0dXJuIGVhLWViOwogICAgICAgICAgICByZXR1cm4gbmF0Q29kZVNvcnQoYSxiKTsKICAgICAgICB9KTsKICAgICAgICB2YXIgdmw9TWF0aC5taW4oX2d2bCxTWS5sZW5ndGgtX2d2cyksdmlzPVNZLnNsaWNlKF9ndnMsX2d2cyt2bCksY3c9Y3VyVygpLHZ3PWdldFZXKCk7CiAgICAgICAgdmFyIGl0ZW1zPXByb2NzLmZpbHRlcihmdW5jdGlvbihnKXtpZihnLmFubmVlKXJldHVybiB0cnVlO2Zvcih2YXIgdmk9MDt2aTx2aXMubGVuZ3RoO3ZpKyspe2lmKHdJblIodmlzW3ZpXSxnLndzdGFydCxnLndlbmQpKXJldHVybiB0cnVlO31yZXR1cm4gZmFsc2U7fSk7CiAgICAgICAgaWYodmlzLmxlbmd0aCkgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2d0LXBlcicpLnRleHRDb250ZW50PSdTJyt2aXNbMF0rJyBcdTIxOTIgUycrdmlzW3Zpcy5sZW5ndGgtMV0rJyAoJyt2aXMubGVuZ3RoKycgc2VtLiknOwogICAgICAgIC8vIE1vbnRoIGhlYWRlcnMKICAgICAgICB2YXIgbW9zPVtdLGNtPScnO3Zpcy5mb3JFYWNoKGZ1bmN0aW9uKHcpe3ZhciBtbD13a01vKHcpO2lmKG1sIT09Y20pe21vcy5wdXNoKHtuOm1sLHM6MX0pO2NtPW1sO31lbHNlIG1vc1ttb3MubGVuZ3RoLTFdLnMrKzt9KTsKICAgICAgICB2YXIgaD0nPHRoZWFkPjx0cj48dGggY2xhc3M9Imd0LW1vIGd0LWxjIiByb3dzcGFuPSIyIj5Qcm9jw6lkdXJlPC90aD48dGggY2xhc3M9Imd0LW1vIGd0LWRjIiByb3dzcGFuPSIyIj5cdTI3MTQ8L3RoPic7CiAgICAgICAgbW9zLmZvckVhY2goZnVuY3Rpb24obSl7aCs9Jzx0aCBjbGFzcz0iZ3QtbW8iIGNvbHNwYW49IicrbS5zKyciPicrbS5uKyc8L3RoPic7fSk7CiAgICAgICAgaCs9JzwvdHI+PHRyPic7dmlzLmZvckVhY2goZnVuY3Rpb24odyl7CiAgICAgICAgICAgIHZhciBjbHM9Jyc7CiAgICAgICAgICAgIGlmKHc9PT1jdykgY2xzPSdndC1jdyc7CiAgICAgICAgICAgIGVsc2UgaWYodncuaW5kZXhPZih3KT49MCkgY2xzPSdndC12YSc7CiAgICAgICAgICAgIGgrPSc8dGgnKyhjbHM/JyBjbGFzcz0iJytjbHMrJyInOicnKSsnPlMnK3crJzwvdGg+JzsKICAgICAgICB9KTsKICAgICAgICBoKz0nPC90cj48L3RoZWFkPjx0Ym9keT4nOwogICAgICAgIGlmKCFpdGVtcy5sZW5ndGgpIGgrPSc8dHI+PHRkIGNvbHNwYW49IicrKDIrdmlzLmxlbmd0aCkrJyIgc3R5bGU9InRleHQtYWxpZ246Y2VudGVyO2NvbG9yOiNiYmI7cGFkZGluZzozMHB4Ij48aSBjbGFzcz0iZmFzIGZhLXN0cmVhbSIgc3R5bGU9ImZvbnQtc2l6ZToxLjNyZW07ZGlzcGxheTpibG9jazttYXJnaW4tYm90dG9tOjZweCI+PC9pPkF1Y3VuZSBwcm9jw6lkdXJlIOKAlCBjbGlxdWV6ICtHw6lyZXIgcG91ciBjb21tZW5jZXI8L3RkPjwvdHI+JzsKICAgICAgICBpdGVtcy5mb3JFYWNoKGZ1bmN0aW9uKGcpewogICAgICAgICAgICB2YXIgY29sPWdldFByb2NDb2xvcihnLmNvZGUpOwogICAgICAgICAgICBoKz0nPHRyJysoZy5kb25lPycgc3R5bGU9Im9wYWNpdHk6LjYiJzonJykrJz4nOwogICAgICAgICAgICB2YXIgaXNSZWFsUHJvYz0oYXBwRGF0YS5wcm9jZWR1cmVzfHxbXSkuaW5kZXhPZihnKT49MDsKICAgICAgICAgICAgdmFyIGhhc0xpbmtlZFByb2M9IWlzUmVhbFByb2MmJmcuY29kZSYmKGFwcERhdGEucHJvY2VkdXJlc3x8W10pLnNvbWUoZnVuY3Rpb24ocHApe3JldHVybiBwcC5jb2RlPT09Zy5jb2RlO30pOwogICAgICAgICAgICBpZihpc1JlYWxQcm9jJiZnLmNvZGUpewogICAgICAgICAgICAgICAgaCs9Jzx0ZCBjbGFzcz0iZ3QtbGEiIG9uY2xpY2s9IndpbmRvdy52aWV3UHJvY1JlYWRvbmx5KFwnJysoKGcuY29kZXx8JycpLnJlcGxhY2UoLycvZywiXFwnIikpKydcJykiIHN0eWxlPSJjdXJzb3I6cG9pbnRlciIgdGl0bGU9IlZvaXIgbGEgcHJvY8OpZHVyZSI+JysoZy50aXRsZXx8Zy5uYW1lfHwnJykrJzwvdGQ+JzsKICAgICAgICAgICAgfSBlbHNlIGlmKGhhc0xpbmtlZFByb2MpewogICAgICAgICAgICAgICAgaCs9Jzx0ZCBjbGFzcz0iZ3QtbGEiIHN0eWxlPSJjdXJzb3I6cG9pbnRlciI+JzsKICAgICAgICAgICAgICAgIGgrPSc8c3BhbiBvbmNsaWNrPSJ3aW5kb3cudmlld1Byb2NSZWFkb25seShcJycrKChnLmNvZGV8fCcnKS5yZXBsYWNlKC8nL2csIlxcJyIpKSsnXCcpIiB0aXRsZT0iVm9pciBsYSBwcm9jw6lkdXJlIj4nKyhnLnRpdGxlfHxnLm5hbWV8fCcnKSsnPC9zcGFuPic7CiAgICAgICAgICAgICAgICBoKz0nIDxpIGNsYXNzPSJmYXMgZmEtcGVuY2lsLWFsdCIgb25jbGljaz0iZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7d2luZG93Lm9wZW5HdE1vZGFsKFwnJytnLmlkKydcJykiIHN0eWxlPSJjb2xvcjojODg4O2ZvbnQtc2l6ZTouN3JlbTtjdXJzb3I6cG9pbnRlcjttYXJnaW4tbGVmdDo2cHgiIHRpdGxlPSJNb2RpZmllciBsXHgyN8OpY2jDqWFuY2UiPjwvaT4nOwogICAgICAgICAgICAgICAgaCs9JzwvdGQ+JzsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGgrPSc8dGQgY2xhc3M9Imd0LWxhIiBvbmNsaWNrPSJ3aW5kb3cub3Blbkd0TW9kYWwoXCcnK2cuaWQrJ1wnKSIgc3R5bGU9ImN1cnNvcjpwb2ludGVyIiB0aXRsZT0iTW9kaWZpZXIgbFx4MjfDqWNow6lhbmNlIj4nKyhnLnRpdGxlfHxnLm5hbWV8fCcnKSsnPC90ZD4nOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHZhciBpc0FubmVlPWcuYW5uZWV8fGZhbHNlOwogICAgICAgICAgICBoKz0nPHRkIGNsYXNzPSJndC1jayI+JysoaXNBbm5lZT8nPHNwYW4gdGl0bGU9IsOAIGxcJ2FubsOpZSIgc3R5bGU9ImNvbG9yOiNhYWE7Zm9udC1zaXplOi43cmVtIj5cdTIyMUU8L3NwYW4+JzonPGlucHV0IHR5cGU9ImNoZWNrYm94IiAnKyhnLmRvbmU/J2NoZWNrZWQnOicnKSsnIG9uY2hhbmdlPSJ3aW5kb3cudG9nZ2xlUHJvY0RvbmUoXCcnK2cuaWQrJ1wnKSIgdGl0bGU9IlRlcm1pbsOpZSI+JykrJzwvdGQ+JzsKICAgICAgICAgICAgdmlzLmZvckVhY2goZnVuY3Rpb24odyl7CiAgICAgICAgICAgICAgICB2YXIgdmFjPXZ3LmluZGV4T2Yodyk+PTAsIGlyPXdJblIodyxnLndzdGFydCxnLndlbmQpOwogICAgICAgICAgICAgICAgaCs9Jzx0ZCcrKHZhYz8nIGNsYXNzPSJndC12YSInOicnKSsnIHN0eWxlPSJwb3NpdGlvbjpyZWxhdGl2ZSI+JzsKICAgICAgICAgICAgICAgIGlmKGlyKSBoKz0nPGRpdiBjbGFzcz0iZ3QtY2YiIHN0eWxlPSJiYWNrZ3JvdW5kOicrY29sKyc7LXdlYmtpdC1wcmludC1jb2xvci1hZGp1c3Q6ZXhhY3Q7cHJpbnQtY29sb3ItYWRqdXN0OmV4YWN0JysoZy5kb25lPyc7b3BhY2l0eTouNCc6JycpKyciPicrJzwvZGl2Pic7CiAgICAgICAgICAgICAgICBoKz0nPC90ZD4nOwogICAgICAgICAgICB9KTtoKz0nPC90cj4nOwogICAgICAgIH0pOwogICAgICAgIGgrPSc8L3Rib2R5Pic7ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2d0LXRibCcpLmlubmVySFRNTD1oOwogICAgICAgIC8vIFVwZGF0ZSBmaWx0ZXIgb3B0aW9ucyBkeW5hbWljYWxseQogICAgICAgIHZhciBmc2VsPWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdndC1mYycpO3ZhciBjdXJWYWw9ZnNlbC52YWx1ZTsKICAgICAgICB2YXIgY2F0czI9e307KGFwcERhdGEucHJvY2VkdXJlc3x8W10pLmZvckVhY2goZnVuY3Rpb24ocHApe2lmKHBwLmNhdCYmKHBwLndzdGFydHx8cHAuYW5uZWUpKWNhdHMyW3BwLmNhdF09MTt9KTsKICAgICAgICAoYXBwRGF0YS5nYW50dHx8W10pLmZvckVhY2goZnVuY3Rpb24oZ2cpe2lmKGdnLmNhdCYmZ2cud3N0YXJ0KWNhdHMyW2dnLmNhdF09MTt9KTsKICAgICAgICB2YXIgZm9wdHM9JzxvcHRpb24gdmFsdWU9IkFMTCI+VG91dGVzIGNhdMOpZ29yaWVzPC9vcHRpb24+JzsKICAgICAgICBPYmplY3Qua2V5cyhjYXRzMikuc29ydCgpLmZvckVhY2goZnVuY3Rpb24oYyl7Zm9wdHMrPSc8b3B0aW9uIHZhbHVlPSInK2MrJyInKyhjdXJWYWw9PT1jPycgc2VsZWN0ZWQnOicnKSsnPicrYysnPC9vcHRpb24+Jzt9KTsKICAgICAgICBmc2VsLmlubmVySFRNTD1mb3B0czsKICAgIH0KCgogICAgICAgIC8vIFNob3cgbGFzdCBleHBvcnQKICAgICAgICBpZihhcHBEYXRhLnNldHRpbmdzJiZhcHBEYXRhLnNldHRpbmdzLmxhc3RFeHBvcnQpewogICAgICAgICAgICB2YXIgZWw9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xhc3QtZXhwb3J0Jyk7CiAgICAgICAgICAgIGlmKGVsKWVsLnRleHRDb250ZW50PSdEZXJuaWVyIGV4cG9ydCA6ICcrbmV3IERhdGUoYXBwRGF0YS5zZXR0aW5ncy5sYXN0RXhwb3J0KS50b0xvY2FsZVN0cmluZygnZnItRlInKTsKICAgICAgICB9CgogICAgd2luZG93LnNhdmVFdmVudCA9IHNhdmVFdmVudDsKICAgIHdpbmRvdy5vcGVuRXZNb2RhbCA9IG9wZW5Fdk1vZGFsOwogICAgd2luZG93LmNsb3NlRXZNb2RhbCA9IGNsb3NlRXZNb2RhbDsKICAgIHdpbmRvdy5kZWxFdkZyb21Nb2RhbCA9IGRlbEV2RnJvbU1vZGFsOwogICAgd2luZG93LmZpbGxUZWFjaGVyU2VsID0gZmlsbFRlYWNoZXJTZWw7CiAgICB3aW5kb3cucGlja1NhdmVGaWxlID0gcGlja1NhdmVGaWxlOwogICAgd2luZG93LnBpY2tFeGlzdGluZ0ZpbGUgPSBwaWNrRXhpc3RpbmdGaWxlOwogICAgd2luZG93LnVubGlua0ZpbGUgPSB1bmxpbmtGaWxlOwogICAgd2luZG93LndyaXRlVG9GaWxlID0gd3JpdGVUb0ZpbGU7CiAgICB3aW5kb3cubG9hZEZyb21GaWxlID0gbG9hZEZyb21GaWxlOwogICAgd2luZG93LnVwZGF0ZUZpbGVVSSA9IHVwZGF0ZUZpbGVVSTsKICAgIHdpbmRvdy5yZXN0b3JlRmlsZUhhbmRsZSA9IHJlc3RvcmVGaWxlSGFuZGxlOwogICAgd2luZG93LmV4cG9ydERhdGEgPSBleHBvcnREYXRhOwogICAgd2luZG93LmltcG9ydERhdGEgPSBpbXBvcnREYXRhOwo8L3NjcmlwdD4KCjxzY3JpcHQ+CihmdW5jdGlvbigpewogICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCBmdW5jdGlvbihlKSB7CiAgICAgICAgaWYgKCFlLmRhdGEgfHwgZS5kYXRhLnR5cGUgIT09ICdwaWxvdGUtc2V0dGluZ3MnKSByZXR1cm47CiAgICAgICAgdmFyIHMgPSBlLmRhdGEuZGF0YTsKICAgICAgICB0cnkgewogICAgICAgICAgICBpZiAodHlwZW9mIGFwcERhdGEgIT09ICd1bmRlZmluZWQnKSB7CiAgICAgICAgICAgICAgICBpZiAocy5zY2hvb2wpIGFwcERhdGEuc2V0dGluZ3Muc2Nob29sID0gcy5zY2hvb2w7CiAgICAgICAgICAgICAgICBpZiAocy5uYW1lKSBhcHBEYXRhLnNldHRpbmdzLnVzZXIgPSBzLm5hbWU7CiAgICAgICAgICAgICAgICBpZiAocy5sb2dvU3JjKSBhcHBEYXRhLnNldHRpbmdzLmxvZ28gPSBzLmxvZ29TcmM7CiAgICAgICAgICAgICAgICBpZiAocy5zaWduU3JjKSBhcHBEYXRhLnNldHRpbmdzLnNpZ25hdHVyZSA9IHMuc2lnblNyYzsKICAgICAgICAgICAgICAgIGlmIChzLnpvbmUpIGFwcERhdGEuc2V0dGluZ3Muem9uZSA9IHMuem9uZTsKICAgICAgICAgICAgICAgIGlmIChzLnRlYWNoZXJzICYmIHMudGVhY2hlcnMubGVuZ3RoKSB7IF90ZWFjaGVycyA9IHMudGVhY2hlcnM7IH0KICAgICAgICAgICAgICAgIGlmIChzLnN0dWRlbnRzICYmIHMuc3R1ZGVudHMubGVuZ3RoKSB7IF9zdHVkZW50cyA9IHMuc3R1ZGVudHM7IH0KICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygcy5nY2FsRW5hYmxlZCAhPT0gJ3VuZGVmaW5lZCcpIHsgc2V0Q2FsZW5kYXJNb2RlKHMuZ2NhbEVuYWJsZWQpOyB9CiAgICAgICAgICAgICAgICBpZiAocy5nY2FsRXZlbnRzKSB7IF9nY2FsRXZlbnRzID0gcy5nY2FsRXZlbnRzOyByZW5kZXJVbmlmaWVkQ2FsKCk7IH0KICAgICAgICAgICAgICAgIGlmIChzLmdjYWxDYWxlbmRhcnMpIHsgX2djYWxDYWxlbmRhcnMgPSBzLmdjYWxDYWxlbmRhcnM7IH0KICAgICAgICAgICAgICAgIGlmIChzLmdjYWxTZWwpIHsgX2djYWxTZWxlY3RlZElkcyA9IHMuZ2NhbFNlbDsgfQogICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBzYXZlRGF0YSA9PT0gJ2Z1bmN0aW9uJykgc2F2ZURhdGEoKTsKICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmFkZCgnaW4td3JhcHBlcicpOwogICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBpbml0U3R1ZGVudEFDID09PSAnZnVuY3Rpb24nKSBpbml0U3R1ZGVudEFDKCk7CiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGluaXRUZWFjaGVyQUMgPT09ICdmdW5jdGlvbicpIGluaXRUZWFjaGVyQUMoKTsKICAgICAgICAgICAgfQogICAgICAgIH0gY2F0Y2goZXJyKSB7IGNvbnNvbGUud2FybignQnJpZGdlIGVycm9yOicsIGVycik7IH0KICAgIH0pOwogICAgd2luZG93LnBhcmVudC5wb3N0TWVzc2FnZSh7IHR5cGU6ICdwaWxvdGUtbW9kdWxlLXJlYWR5JywgbW9kdWxlOiAncGVyZGlyJyB9LCAnKicpOwoKICAgIAogICAgLy8g4pWQ4pWQ4pWQIFRBQiBLRVkgSU4gUlRFIEVESVRPUlMg4pWQ4pWQ4pWQCiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgZnVuY3Rpb24oZSkgewogICAgICAgIHZhciBlbCA9IGUudGFyZ2V0OwogICAgICAgIGlmICghZWwgfHwgIWVsLmNsYXNzTGlzdCB8fCAhZWwuY2xhc3NMaXN0LmNvbnRhaW5zKCdkb2MtZWRpdG9yJykgfHwgIWVsLmlzQ29udGVudEVkaXRhYmxlKSByZXR1cm47CiAgICAgICAgaWYgKGUua2V5ID09PSAnVGFiJykgewogICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgICAgIGlmIChlLnNoaWZ0S2V5KSB7CiAgICAgICAgICAgICAgICBkb2N1bWVudC5leGVjQ29tbWFuZCgnb3V0ZGVudCcsIGZhbHNlLCBudWxsKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGRvY3VtZW50LmV4ZWNDb21tYW5kKCdpbmRlbnQnLCBmYWxzZSwgbnVsbCk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9KTsKCiAgICAvLyBGb3J3YXJkIGtleWJvYXJkIHNob3J0Y3V0cyB0byBwYXJlbnQKICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBmdW5jdGlvbihlKSB7CiAgICAgICAgaWYgKCFlLmN0cmxLZXkgfHwgZS5zaGlmdEtleSB8fCBlLmFsdEtleSB8fCBlLm1ldGFLZXkpIHJldHVybjsKICAgICAgICB2YXIga2V5ID0gZS5rZXkudG9Mb3dlckNhc2UoKTsKICAgICAgICBpZiAoWydwJywnZScsJ28nLCdhJywnZCddLmluZGV4T2Yoa2V5KSA+PSAwKSB7CiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgICAgICAgd2luZG93LnBhcmVudC5wb3N0TWVzc2FnZSh7dHlwZToncGlsb3RlLXNob3J0Y3V0Jywga2V5OmtleX0sICcqJyk7CiAgICAgICAgfQogICAgfSk7CgoKICAgIC8vIExpc3RlbiBmb3IgZ2NhbCBDUlVEIHJlc3BvbnNlcwogICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCBmdW5jdGlvbihlT0wpIHsKICAgICAgICBpZiAoIWVPTC5kYXRhIHx8IGVPTC5kYXRhLnR5cGUgIT09ICdwaWxvdGUtb3V0bG9vaycpIHJldHVybjsKICAgICAgICB2YXIgb2QgPSBlT0wuZGF0YS5kYXRhOwogICAgICAgIGlmIChvZCkgewogICAgICAgICAgICBpZiAob2Qub3V0bG9va0V2ZW50cykgeyBfb3V0bG9va0V2ZW50cyA9IG9kLm91dGxvb2tFdmVudHM7IHJlbmRlclVuaWZpZWRDYWwoKTsgfQogICAgICAgICAgICBpZiAob2Qub3V0bG9va0NhbHMpIF9vdXRsb29rQ2FsZW5kYXJzID0gb2Qub3V0bG9va0NhbHM7CiAgICAgICAgICAgIGlmICh0eXBlb2Ygb2Qub3V0bG9va0VuYWJsZWQgIT09ICd1bmRlZmluZWQnKSBfb3V0bG9va0VuYWJsZWQgPSBvZC5vdXRsb29rRW5hYmxlZDsKICAgICAgICB9CiAgICB9KTsKICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgZnVuY3Rpb24oZTIpIHsKICAgICAgICBpZiAoIWUyLmRhdGEpIHJldHVybjsKICAgICAgICBpZiAoZTIuZGF0YS50eXBlID09PSAncGlsb3RlLWdjYWwtY3J1ZC1vaycpIHsKICAgICAgICAgICAgLy8gUmVmcmVzaCBhZnRlciBDUlVECiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXsgd2luZG93LnBhcmVudC5wb3N0TWVzc2FnZSh7dHlwZToncGlsb3RlLWdjYWwtcmVmcmVzaCd9LCAnKicpOyB9LCA1MDApOwogICAgICAgIH0KICAgIH0pOwp9KSgpOwoKICAgIAogICAgZnVuY3Rpb24gZXNjSHRtbChzKSB7IHZhciBkPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOyBkLnRleHRDb250ZW50PXM7IHJldHVybiBkLmlubmVySFRNTDsgfQoKICAgIGZ1bmN0aW9uIHNldENhbGVuZGFyTW9kZShlbmFibGVkKSB7IF9nY2FsRW5hYmxlZCA9IGVuYWJsZWQ7IH0KCiAgICAvLyDilZDilZDilZAgQ0FMRU5EUklFUiBVTklGScOJIFYxMi4xMyDilZDilZDilZAKICAgIHZhciBfZ2NhbEVuYWJsZWQgPSBmYWxzZTsKICAgIHZhciBfZ2NhbEV2ZW50cyA9IFtdOwogICAgdmFyIF91Y2FsTW9udGggPSBuZXcgRGF0ZSgpLmdldE1vbnRoKCk7CiAgICB2YXIgX3VjYWxZZWFyID0gbmV3IERhdGUoKS5nZXRGdWxsWWVhcigpOwogICAgdmFyIF9nY2FsQ2FsZW5kYXJzID0gW107IC8vIGxpc3Qgb2Yge2lkLCBuYW1lLCBiZ30KICAgIHZhciBfZ2NhbFNlbGVjdGVkSWRzID0gW107IC8vIElEcyBzZWxlY3RlZCBpbiBtYXN0ZXIgc2V0dGluZ3MKICAgIHZhciBfb3V0bG9va0V2ZW50cyA9IFtdOwogICAgdmFyIF9vdXRsb29rQ2FsZW5kYXJzID0gW107CiAgICB2YXIgX291dGxvb2tFbmFibGVkID0gZmFsc2U7CgogICAgLy8gQ29sb3IgbWFwIGZvciBldmVudCB0eXBlcwogICAgdmFyIFVDQUxfQ09MT1JTID0gewogICAgICAgIGxvY2FsOiAnIzM0OThkYicsCiAgICAgICAgZmVyaWU6ICcjZTc0YzNjJywKICAgICAgICB2YWM6ICcjZTY3ZTIyJywKICAgICAgICBnY2FsRGVmYXVsdDogJyM0Mjg1ZjQnCiAgICB9OwoKICAgIGZ1bmN0aW9uIHVjYWxQcmV2KCkgeyBfdWNhbE1vbnRoLS07IGlmKF91Y2FsTW9udGg8MCl7X3VjYWxNb250aD0xMTtfdWNhbFllYXItLTt9IHJlbmRlclVuaWZpZWRDYWwoKTsgfQogICAgZnVuY3Rpb24gdWNhbE5leHQoKSB7IF91Y2FsTW9udGgrKzsgaWYoX3VjYWxNb250aD4xMSl7X3VjYWxNb250aD0wO191Y2FsWWVhcisrO30gcmVuZGVyVW5pZmllZENhbCgpOyB9CiAgICBmdW5jdGlvbiB1Y2FsVG9kYXkoKSB7IF91Y2FsTW9udGg9bmV3IERhdGUoKS5nZXRNb250aCgpOyBfdWNhbFllYXI9bmV3IERhdGUoKS5nZXRGdWxsWWVhcigpOyByZW5kZXJVbmlmaWVkQ2FsKCk7IH0KICAgIGZ1bmN0aW9uIHVjYWxSZWZyZXNoKCkgeyB3aW5kb3cucGFyZW50LnBvc3RNZXNzYWdlKHt0eXBlOidwaWxvdGUtZ2NhbC1yZWZyZXNoJ30sICcqJyk7IH0KCiAgICBmdW5jdGlvbiByZW5kZXJVbmlmaWVkQ2FsKCkgewogICAgICAgIHZhciBtTmFtZXMgPSBbJ0phbnZpZXInLCdGw6l2cmllcicsJ01hcnMnLCdBdnJpbCcsJ01haScsJ0p1aW4nLCdKdWlsbGV0JywnQW/Du3QnLCdTZXB0ZW1icmUnLCdPY3RvYnJlJywnTm92ZW1icmUnLCdEw6ljZW1icmUnXTsKICAgICAgICB2YXIgdGl0bGVFbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd1Y2FsLXRpdGxlJyk7CiAgICAgICAgaWYgKHRpdGxlRWwpIHRpdGxlRWwudGV4dENvbnRlbnQgPSBtTmFtZXNbX3VjYWxNb250aF0gKyAnICcgKyBfdWNhbFllYXI7CgogICAgICAgIHZhciBib2R5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3VjYWwtYm9keScpOwogICAgICAgIGlmICghYm9keSkgcmV0dXJuOwogICAgICAgIHZhciB0b2RheSA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKS5zcGxpdCgnVCcpWzBdOwogICAgICAgIHZhciBtU3RyID0gX3VjYWxZZWFyICsgJy0nICsgU3RyaW5nKF91Y2FsTW9udGgrMSkucGFkU3RhcnQoMiwnMCcpOwogICAgICAgIHZhciBpc0N1cnJlbnRNb250aCA9IChfdWNhbE1vbnRoID09PSBuZXcgRGF0ZSgpLmdldE1vbnRoKCkgJiYgX3VjYWxZZWFyID09PSBuZXcgRGF0ZSgpLmdldEZ1bGxZZWFyKCkpOwoKICAgICAgICAvLyBDb2xsZWN0IEFMTCBldmVudHMgZm9yIHRoaXMgbW9udGgKICAgICAgICB2YXIgYWxsID0gW107CgogICAgICAgIC8vIDEuIExvY2FsIGV2ZW50cwogICAgICAgIChhcHBEYXRhLmNhbGVuZGFyIHx8IFtdKS5mb3JFYWNoKGZ1bmN0aW9uKGMpIHsKICAgICAgICAgICAgaWYgKCFjLmRhdGUgfHwgIWMudGFzayB8fCBjLmRhdGUuc3Vic3RyaW5nKDAsNykgIT09IG1TdHIpIHJldHVybjsKICAgICAgICAgICAgdmFyIHR5cGUgPSAnbG9jYWwnOwogICAgICAgICAgICBpZiAoYy52YWNPZmZpY2llbCkgdHlwZSA9IGMudGFzay5pbmRleE9mKCfwn4er8J+HtycpID49IDAgPyAnZmVyaWUnIDogJ3ZhYyc7CiAgICAgICAgICAgIGFsbC5wdXNoKHsKICAgICAgICAgICAgICAgIGlkOiBjLmlkLCB0aXRsZTogYy50YXNrLCBkYXRlOiBjLmRhdGUsIHRpbWU6ICcnLCBlbmRUaW1lOiAnJywKICAgICAgICAgICAgICAgIHNyYzogJ2xvY2FsJywgdHlwZTogdHlwZSwKICAgICAgICAgICAgICAgIGNvbG9yOiB0eXBlID09PSAnZmVyaWUnID8gVUNBTF9DT0xPUlMuZmVyaWUgOiB0eXBlID09PSAndmFjJyA/IFVDQUxfQ09MT1JTLnZhYyA6IFVDQUxfQ09MT1JTLmxvY2FsLAogICAgICAgICAgICAgICAgY2FsTmFtZTogdHlwZSA9PT0gJ2ZlcmllJyA/ICdKb3VyIGbDqXJpw6knIDogdHlwZSA9PT0gJ3ZhYycgPyAnVmFjYW5jZXMnIDogJ0FnZW5kYSBsb2NhbCcsCiAgICAgICAgICAgICAgICBjYWxJZDogJycsIGVkaXRhYmxlOiB0eXBlID09PSAnbG9jYWwnCiAgICAgICAgICAgIH0pOwogICAgICAgIH0pOwoKICAgICAgICAvLyAyLiBHb29nbGUgQ2FsZW5kYXIgZXZlbnRzCiAgICAgICAgKF9nY2FsRXZlbnRzIHx8IFtdKS5mb3JFYWNoKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgaWYgKCFlLmRhdGUgfHwgZS5kYXRlLnN1YnN0cmluZygwLDcpICE9PSBtU3RyKSByZXR1cm47CiAgICAgICAgICAgIC8vIEF2b2lkIGR1cGxpY2F0ZXMgd2l0aCBsb2NhbAogICAgICAgICAgICB2YXIgaXNEdXAgPSBhbGwuc29tZShmdW5jdGlvbihhKXsgcmV0dXJuIGEudGl0bGUgPT09IGUudGl0bGUgJiYgYS5kYXRlID09PSBlLmRhdGUgJiYgYS5zcmMgPT09ICdsb2NhbCc7IH0pOwogICAgICAgICAgICBpZiAoaXNEdXApIHJldHVybjsKICAgICAgICAgICAgYWxsLnB1c2goewogICAgICAgICAgICAgICAgaWQ6IGUuaWQsIHRpdGxlOiBlLnRpdGxlLCBkYXRlOiBlLmRhdGUsIHRpbWU6IGUudGltZSB8fCAnJywgZW5kVGltZTogZS5lbmRUaW1lIHx8ICcnLAogICAgICAgICAgICAgICAgc3JjOiAnZ2NhbCcsIHR5cGU6ICdnY2FsJywKICAgICAgICAgICAgICAgIGNvbG9yOiBlLmNvbG9yIHx8IFVDQUxfQ09MT1JTLmdjYWxEZWZhdWx0LAogICAgICAgICAgICAgICAgY2FsTmFtZTogZS5jYWxOYW1lIHx8ICdHb29nbGUnLCBjYWxJZDogZS5jYWxJZCB8fCAnJywKICAgICAgICAgICAgICAgIGVkaXRhYmxlOiAhIV9nY2FsRW5hYmxlZAogICAgICAgICAgICB9KTsKICAgICAgICB9KTsKCiAgICAgICAgLy8gMy4gT3V0bG9vayBldmVudHMKICAgICAgICAoX291dGxvb2tFdmVudHMgfHwgW10pLmZvckVhY2goZnVuY3Rpb24oZSkgewogICAgICAgICAgICBpZiAoIWUuZGF0ZSB8fCBlLmRhdGUuc3Vic3RyaW5nKDAsNykgIT09IG1TdHIpIHJldHVybjsKICAgICAgICAgICAgdmFyIGlzRHVwID0gYWxsLnNvbWUoZnVuY3Rpb24oYSl7IHJldHVybiBhLnRpdGxlID09PSBlLnRpdGxlICYmIGEuZGF0ZSA9PT0gZS5kYXRlOyB9KTsKICAgICAgICAgICAgaWYgKGlzRHVwKSByZXR1cm47CiAgICAgICAgICAgIGFsbC5wdXNoKHsKICAgICAgICAgICAgICAgIGlkOiBlLmlkLCB0aXRsZTogZS50aXRsZSwgZGF0ZTogZS5kYXRlLCB0aW1lOiBlLnRpbWUgfHwgJycsIGVuZFRpbWU6IGUuZW5kVGltZSB8fCAnJywKICAgICAgICAgICAgICAgIHNyYzogJ291dGxvb2snLCB0eXBlOiAnb3V0bG9vaycsCiAgICAgICAgICAgICAgICBjb2xvcjogZS5jb2xvciB8fCAnIzAwNzhkNCcsCiAgICAgICAgICAgICAgICBjYWxOYW1lOiBlLmNhbE5hbWUgfHwgJ091dGxvb2snLCBjYWxJZDogZS5jYWxJZCB8fCAnJywKICAgICAgICAgICAgICAgIGVkaXRhYmxlOiAhIV9vdXRsb29rRW5hYmxlZAogICAgICAgICAgICB9KTsKICAgICAgICB9KTsKCiAgICAgICAgLy8gU29ydCBieSBkYXRlK3RpbWUKICAgICAgICBhbGwuc29ydChmdW5jdGlvbihhLGIpIHsgcmV0dXJuIChhLmRhdGUrJyAnKyhhLnRpbWV8fCcwMDowMCcpKS5sb2NhbGVDb21wYXJlKGIuZGF0ZSsnICcrKGIudGltZXx8JzAwOjAwJykpOyB9KTsKCiAgICAgICAgLy8gRmlsdGVyOiBmb3IgY3VycmVudCBtb250aCwgb25seSBmdXR1cmUgZXZlbnRzCiAgICAgICAgaWYgKGlzQ3VycmVudE1vbnRoKSB7CiAgICAgICAgICAgIGFsbCA9IGFsbC5maWx0ZXIoZnVuY3Rpb24oZSkgeyByZXR1cm4gZS5kYXRlID49IHRvZGF5OyB9KTsKICAgICAgICB9CgogICAgICAgIGlmICghYWxsLmxlbmd0aCkgewogICAgICAgICAgICBib2R5LmlubmVySFRNTCA9ICc8ZGl2IGNsYXNzPSJ1Y2FsLWVtcHR5Ij48aSBjbGFzcz0iZmFzIGZhLWNhbGVuZGFyLWNoZWNrIj48L2k+QXVjdW4gw6l2w6luZW1lbnQgY2UgbW9pczwvZGl2Pic7CiAgICAgICAgICAgIHJlbmRlclVjYWxMZWdlbmQoW10pOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICAvLyBHcm91cCBieSBkYXkKICAgICAgICB2YXIgZ3JvdXBzID0ge307CiAgICAgICAgYWxsLmZvckVhY2goZnVuY3Rpb24oZSkgeyBpZighZ3JvdXBzW2UuZGF0ZV0pIGdyb3Vwc1tlLmRhdGVdPVtdOyBncm91cHNbZS5kYXRlXS5wdXNoKGUpOyB9KTsKCiAgICAgICAgdmFyIGh0bWwgPSAnJzsKICAgICAgICB2YXIgc3JjU2V0ID0gbmV3IFNldCgpOwogICAgICAgIE9iamVjdC5rZXlzKGdyb3Vwcykuc29ydCgpLmZvckVhY2goZnVuY3Rpb24oZGF0ZSkgewogICAgICAgICAgICB2YXIgZCA9IG5ldyBEYXRlKGRhdGUgKyAnVDEyOjAwOjAwJyk7CiAgICAgICAgICAgIHZhciBkYXlOYW1lID0gZC50b0xvY2FsZURhdGVTdHJpbmcoJ2ZyLUZSJywge3dlZWtkYXk6J2xvbmcnLCBkYXk6J251bWVyaWMnLCBtb250aDonbG9uZyd9KTsKICAgICAgICAgICAgZGF5TmFtZSA9IGRheU5hbWUuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBkYXlOYW1lLnNsaWNlKDEpOwogICAgICAgICAgICB2YXIgaXNUb2RheSA9IGRhdGUgPT09IHRvZGF5OwoKICAgICAgICAgICAgaHRtbCArPSAnPGRpdiBjbGFzcz0idWNhbC1kYXktZ3JvdXAiPic7CiAgICAgICAgICAgIGh0bWwgKz0gJzxkaXYgY2xhc3M9InVjYWwtZGF5LWhkcicrKGlzVG9kYXk/JyBpcy10b2RheSc6JycpKyciPicrKGlzVG9kYXk/JzxpIGNsYXNzPSJmYXMgZmEtc3RhciIgc3R5bGU9ImNvbG9yOiNlNjdlMjI7bWFyZ2luLXJpZ2h0OjRweDtmb250LXNpemU6LjdyZW0iPjwvaT4nOicnKStkYXlOYW1lKyc8L2Rpdj4nOwoKICAgICAgICAgICAgZ3JvdXBzW2RhdGVdLmZvckVhY2goZnVuY3Rpb24oZXYpIHsKICAgICAgICAgICAgICAgIHNyY1NldC5hZGQoZXYudHlwZSA9PT0gJ2djYWwnID8gZXYuY2FsTmFtZSA6IGV2LnR5cGUpOwogICAgICAgICAgICAgICAgaHRtbCArPSAnPGRpdiBjbGFzcz0idWNhbC1pdGVtIj4nOwogICAgICAgICAgICAgICAgaHRtbCArPSAnPGRpdiBjbGFzcz0idWNhbC1kb3QiIHN0eWxlPSJiYWNrZ3JvdW5kOicrZXYuY29sb3IrJyI+PC9kaXY+JzsKICAgICAgICAgICAgICAgIGh0bWwgKz0gJzxkaXYgY2xhc3M9InVjYWwtbGVmdCI+JzsKICAgICAgICAgICAgICAgIGh0bWwgKz0gJzxkaXYgY2xhc3M9InVjYWwtaXRlbS10aW1lIj4nKyhldi50aW1lID8gZXYudGltZSsoZXYuZW5kVGltZT8nIOKAkyAnK2V2LmVuZFRpbWU6JycpIDogJzxzcGFuIHN0eWxlPSJjb2xvcjojY2NjIj5Kb3VybsOpZTwvc3Bhbj4nKSsnPC9kaXY+JzsKICAgICAgICAgICAgICAgIGlmIChldi5lZGl0YWJsZSB8fCBldi5zcmM9PT0nZ2NhbCcpIHsKICAgICAgICAgICAgICAgICAgICBodG1sICs9ICc8ZGl2IGNsYXNzPSJ1Y2FsLWl0ZW0tYWN0aW9ucyI+JzsKICAgICAgICAgICAgICAgICAgICBodG1sICs9ICc8YnV0dG9uIG9uY2xpY2s9ImVkaXRVY2FsRXZlbnQoXCcnK2V2LmlkKydcJyxcJycrZXYuc3JjKydcJyxcJycrZXYuY2FsSWQucmVwbGFjZSgvJy9nLCJcXCciKSsnXCcpIj48aSBjbGFzcz0iZmFzIGZhLXBlbiI+PC9pPjwvYnV0dG9uPic7CiAgICAgICAgICAgICAgICAgICAgaHRtbCArPSAnPGJ1dHRvbiBjbGFzcz0iYWN0LWRlbCIgb25jbGljaz0iZGVsZXRlVWNhbEV2ZW50KFwnJytldi5pZCsnXCcsXCcnK2V2LnNyYysnXCcsXCcnK2V2LmNhbElkLnJlcGxhY2UoLycvZywiXFwnIikrJ1wnKSI+PGkgY2xhc3M9ImZhcyBmYS10cmFzaCI+PC9pPjwvYnV0dG9uPic7CiAgICAgICAgICAgICAgICAgICAgaHRtbCArPSAnPC9kaXY+JzsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGh0bWwgKz0gJzwvZGl2Pic7CiAgICAgICAgICAgICAgICBodG1sICs9ICc8ZGl2IGNsYXNzPSJ1Y2FsLWluZm8iPic7CiAgICAgICAgICAgICAgICBodG1sICs9ICc8ZGl2IGNsYXNzPSJ1Y2FsLWl0ZW0tdGl0bGUiPicrZXNjSHRtbChldi50aXRsZSkrJzwvZGl2Pic7CiAgICAgICAgICAgICAgICBodG1sICs9ICc8ZGl2IGNsYXNzPSJ1Y2FsLWl0ZW0tbWV0YSI+Jytlc2NIdG1sKGV2LmNhbE5hbWUpOwogICAgICAgICAgICAgICAgaWYgKGV2LnNyYz09PSdnY2FsJykgaHRtbCArPSAnIDxzcGFuIGNsYXNzPSJ1Y2FsLXNyYy1iYWRnZSIgc3R5bGU9ImJhY2tncm91bmQ6IzQyODVmNCI+Rzwvc3Bhbj4nOwogICAgICAgICAgICAgICAgaHRtbCArPSAnPC9kaXY+PC9kaXY+JzsKICAgICAgICAgICAgICAgIGh0bWwgKz0gJzwvZGl2Pic7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBodG1sICs9ICc8L2Rpdj4nOwogICAgICAgIH0pOwogICAgICAgIGJvZHkuaW5uZXJIVE1MID0gaHRtbDsKICAgICAgICByZW5kZXJVY2FsTGVnZW5kKHNyY1NldCk7CiAgICB9CgogICAgZnVuY3Rpb24gcmVuZGVyVWNhbExlZ2VuZChzcmNTZXQpIHsKICAgICAgICB2YXIgbGVnID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3VjYWwtbGVnZW5kJyk7CiAgICAgICAgaWYgKCFsZWcpIHJldHVybjsKICAgICAgICB2YXIgaXRlbXMgPSBbCiAgICAgICAgICAgIHtsYWJlbDonTG9jYWwnLCBjb2xvcjpVQ0FMX0NPTE9SUy5sb2NhbCwga2V5Oidsb2NhbCd9LAogICAgICAgICAgICB7bGFiZWw6J0bDqXJpw6lzJywgY29sb3I6VUNBTF9DT0xPUlMuZmVyaWUsIGtleTonZmVyaWUnfSwKICAgICAgICAgICAge2xhYmVsOidWYWNhbmNlcycsIGNvbG9yOlVDQUxfQ09MT1JTLnZhYywga2V5Oid2YWMnfSwKICAgICAgICAgICAge2xhYmVsOidPdXRsb29rJywgY29sb3I6JyMwMDc4ZDQnLCBrZXk6J291dGxvb2snfQogICAgICAgIF07CiAgICAgICAgLy8gQWRkIGdjYWwgY2FsZW5kYXJzCiAgICAgICAgKF9nY2FsRXZlbnRzIHx8IFtdKS5mb3JFYWNoKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgaWYgKGUuY2FsTmFtZSAmJiAhaXRlbXMuc29tZShmdW5jdGlvbihpKXtyZXR1cm4gaS5sYWJlbD09PWUuY2FsTmFtZTt9KSkgewogICAgICAgICAgICAgICAgaXRlbXMucHVzaCh7bGFiZWw6ZS5jYWxOYW1lLCBjb2xvcjplLmNvbG9yfHxVQ0FMX0NPTE9SUy5nY2FsRGVmYXVsdCwga2V5OmUuY2FsTmFtZX0pOwogICAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgbGVnLmlubmVySFRNTCA9IGl0ZW1zLm1hcChmdW5jdGlvbihpKXsKICAgICAgICAgICAgcmV0dXJuICc8c3Bhbj48c3BhbiBjbGFzcz0idWNhbC1sZWdlbmQtZG90IiBzdHlsZT0iYmFja2dyb3VuZDonK2kuY29sb3IrJyI+PC9zcGFuPicraS5sYWJlbCsnPC9zcGFuPic7CiAgICAgICAgfSkuam9pbignJyk7CiAgICB9CgogICAgLy8g4pSA4pSAIENSVUQg4pSA4pSACiAgICBmdW5jdGlvbiBvcGVuVWNhbEFkZE1vZGFsKCkgewogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd1Y2FsLWVpZCcpLnZhbHVlID0gJyc7CiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3VjYWwtZXNyYycpLnZhbHVlID0gJ2xvY2FsJzsKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndWNhbC1lY2FsaWQnKS52YWx1ZSA9ICcnOwogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd1Y2FsLWRhdGUnKS52YWx1ZSA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKS5zcGxpdCgnVCcpWzBdOwogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd1Y2FsLXRpbWUnKS52YWx1ZSA9ICcnOwogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd1Y2FsLWVuZHRpbWUnKS52YWx1ZSA9ICcnOwogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd1Y2FsLXRhc2snKS52YWx1ZSA9ICcnOwogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd1Y2FsLW1vZGFsLXRpdGxlJykudGV4dENvbnRlbnQgPSAnTm91dmVsIMOpdsOpbmVtZW50JzsKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndWNhbC1kZXN0LXdyYXAnKS5zdHlsZS5kaXNwbGF5ID0gJyc7CiAgICAgICAgc2V0VWNhbERlc3QoJ2xvY2FsJyk7CiAgICAgICAgdXBkYXRlR2NhbFRhcmdldExpc3QoKTsKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndWNhbE1vZGFsJykuc3R5bGUuZGlzcGxheSA9ICdmbGV4JzsKICAgIH0KCiAgICBmdW5jdGlvbiBjbG9zZVVjYWxNb2RhbCgpIHsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3VjYWxNb2RhbCcpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7IH0KCiAgICBmdW5jdGlvbiBzZXRVY2FsRGVzdChkZXN0KSB7CiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnVjYWwtZGVzdC1vcHQnKS5mb3JFYWNoKGZ1bmN0aW9uKGVsKXsKICAgICAgICAgICAgZWwuY2xhc3NMaXN0LnRvZ2dsZSgnYWN0aXZlJywgZWwuZGF0YXNldC5kZXN0ID09PSBkZXN0KTsKICAgICAgICAgICAgZWwucXVlcnlTZWxlY3RvcignaW5wdXQnKS5jaGVja2VkID0gZWwuZGF0YXNldC5kZXN0ID09PSBkZXN0OwogICAgICAgIH0pOwogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd1Y2FsLWdjYWwtdGFyZ2V0Jykuc3R5bGUuZGlzcGxheSA9IChkZXN0ID09PSAnZ2NhbCcgfHwgZGVzdCA9PT0gJ291dGxvb2snKSA/ICdibG9jaycgOiAnbm9uZSc7CiAgICAgICAgaWYgKGRlc3QgPT09ICdvdXRsb29rJykgdXBkYXRlT3V0bG9va1RhcmdldExpc3QoKTsKICAgICAgICBlbHNlIGlmIChkZXN0ID09PSAnZ2NhbCcpIHVwZGF0ZUdjYWxUYXJnZXRMaXN0KCk7CiAgICB9CgogICAgLy8gV2lyZSB1cCBkZXN0IGJ1dHRvbnMKICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZSkgewogICAgICAgIHZhciBvcHQgPSBlLnRhcmdldC5jbG9zZXN0KCcudWNhbC1kZXN0LW9wdCcpOwogICAgICAgIGlmIChvcHQpIHNldFVjYWxEZXN0KG9wdC5kYXRhc2V0LmRlc3QpOwogICAgfSk7CgogICAgZnVuY3Rpb24gdXBkYXRlT3V0bG9va1RhcmdldExpc3QoKSB7CiAgICAgICAgdmFyIHNlbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd1Y2FsLWdjYWwtdGFyZ2V0Jyk7CiAgICAgICAgc2VsLmlubmVySFRNTCA9ICc8b3B0aW9uIHZhbHVlPSIiPuKAlCBDaG9pc2lyIHVuIGFnZW5kYSDigJQ8L29wdGlvbj4nOwogICAgICAgIChfb3V0bG9va0NhbGVuZGFycyB8fCBbXSkuZm9yRWFjaChmdW5jdGlvbihjKSB7CiAgICAgICAgICAgIHNlbC5pbm5lckhUTUwgKz0gJzxvcHRpb24gdmFsdWU9IicrZXNjSHRtbChjLmlkKSsnIj4nK2VzY0h0bWwoYy5uYW1lKSsnPC9vcHRpb24+JzsKICAgICAgICB9KTsKICAgICAgICB2YXIgb3V0bG9va09wdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy51Y2FsLWRlc3Qtb3B0W2RhdGEtZGVzdD0ib3V0bG9vayJdJyk7CiAgICAgICAgaWYgKG91dGxvb2tPcHQpIG91dGxvb2tPcHQuc3R5bGUuZGlzcGxheSA9IChfb3V0bG9va0NhbGVuZGFycyAmJiBfb3V0bG9va0NhbGVuZGFycy5sZW5ndGgpID8gJycgOiAnbm9uZSc7CiAgICB9CiAgICBmdW5jdGlvbiB1cGRhdGVHY2FsVGFyZ2V0TGlzdCgpIHsKICAgICAgICB2YXIgc2VsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3VjYWwtZ2NhbC10YXJnZXQnKTsKICAgICAgICBzZWwuaW5uZXJIVE1MID0gJzxvcHRpb24gdmFsdWU9IiI+4oCUIENob2lzaXIgdW4gYWdlbmRhIOKAlDwvb3B0aW9uPic7CiAgICAgICAgLy8gT25seSBzaG93IGNhbGVuZGFycyBzZWxlY3RlZCBpbiBtYXN0ZXIgc2V0dGluZ3MgKGdjYWxTZWwpCiAgICAgICAgdmFyIHNlbGVjdGVkSWRzID0gX2djYWxTZWxlY3RlZElkcyB8fCBbXTsKICAgICAgICAoX2djYWxDYWxlbmRhcnMgfHwgW10pLmZvckVhY2goZnVuY3Rpb24oYykgewogICAgICAgICAgICBpZiAoc2VsZWN0ZWRJZHMubGVuZ3RoID09PSAwIHx8IHNlbGVjdGVkSWRzLmluZGV4T2YoYy5pZCkgPj0gMCkgewogICAgICAgICAgICAgICAgc2VsLmlubmVySFRNTCArPSAnPG9wdGlvbiB2YWx1ZT0iJytlc2NIdG1sKGMuaWQpKyciPicrZXNjSHRtbChjLm5hbWUpKyc8L29wdGlvbj4nOwogICAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgLy8gSWYgbm8gR29vZ2xlIGNhbGVuZGFycyBhdmFpbGFibGUsIGhpZGUgR29vZ2xlIG9wdGlvbgogICAgICAgIHZhciBnY2FsT3B0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnVjYWwtZGVzdC1vcHRbZGF0YS1kZXN0PSJnY2FsIl0nKTsKICAgICAgICB2YXIgb3V0bG9va09wdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy51Y2FsLWRlc3Qtb3B0W2RhdGEtZGVzdD0ib3V0bG9vayJdJyk7CiAgICAgICAgaWYgKGdjYWxPcHQpIGdjYWxPcHQuc3R5bGUuZGlzcGxheSA9IChfZ2NhbENhbGVuZGFycyAmJiBfZ2NhbENhbGVuZGFycy5sZW5ndGgpID8gJycgOiAnbm9uZSc7CiAgICB9CgogICAgZnVuY3Rpb24gZWRpdFVjYWxFdmVudChpZCwgc3JjLCBjYWxJZCkgewogICAgICAgIGlmIChzcmMgPT09ICdsb2NhbCcpIHsKICAgICAgICAgICAgdmFyIGl0ZW0gPSAoYXBwRGF0YS5jYWxlbmRhcnx8W10pLmZpbmQoZnVuY3Rpb24oYyl7IHJldHVybiBjLmlkLnRvU3RyaW5nKCk9PT1pZC50b1N0cmluZygpOyB9KTsKICAgICAgICAgICAgaWYgKCFpdGVtKSByZXR1cm47CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd1Y2FsLWVpZCcpLnZhbHVlID0gaWQ7CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd1Y2FsLWVzcmMnKS52YWx1ZSA9ICdsb2NhbCc7CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd1Y2FsLWVjYWxpZCcpLnZhbHVlID0gJyc7CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd1Y2FsLWRhdGUnKS52YWx1ZSA9IGl0ZW0uZGF0ZSB8fCAnJzsKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3VjYWwtdGltZScpLnZhbHVlID0gaXRlbS50aW1lIHx8ICcnOwogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndWNhbC1lbmR0aW1lJykudmFsdWUgPSBpdGVtLmVuZFRpbWUgfHwgJyc7CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd1Y2FsLXRhc2snKS52YWx1ZSA9IGl0ZW0udGFzayB8fCAnJzsKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3VjYWwtbW9kYWwtdGl0bGUnKS50ZXh0Q29udGVudCA9ICdNb2RpZmllciBsXCfDqXbDqW5lbWVudCc7CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd1Y2FsLWRlc3Qtd3JhcCcpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd1Y2FsTW9kYWwnKS5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnOwogICAgICAgIH0gZWxzZSBpZiAoc3JjID09PSAnZ2NhbCcpIHsKICAgICAgICAgICAgdmFyIGV2ID0gKF9nY2FsRXZlbnRzfHxbXSkuZmluZChmdW5jdGlvbihlKXsgcmV0dXJuIGUuaWQ9PT1pZDsgfSk7CiAgICAgICAgICAgIGlmICghZXYpIHJldHVybjsKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3VjYWwtZWlkJykudmFsdWUgPSBpZDsKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3VjYWwtZXNyYycpLnZhbHVlID0gJ2djYWwnOwogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndWNhbC1lY2FsaWQnKS52YWx1ZSA9IGNhbElkIHx8IGV2LmNhbElkIHx8ICcnOwogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndWNhbC1kYXRlJykudmFsdWUgPSBldi5kYXRlIHx8ICcnOwogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndWNhbC10aW1lJykudmFsdWUgPSBldi50aW1lIHx8ICcnOwogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndWNhbC1lbmR0aW1lJykudmFsdWUgPSBldi5lbmRUaW1lIHx8ICcnOwogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndWNhbC10YXNrJykudmFsdWUgPSBldi50aXRsZSB8fCAnJzsKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3VjYWwtbW9kYWwtdGl0bGUnKS50ZXh0Q29udGVudCA9ICdNb2RpZmllciAoR29vZ2xlIEFnZW5kYSknOwogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndWNhbC1kZXN0LXdyYXAnKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOwogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndWNhbE1vZGFsJykuc3R5bGUuZGlzcGxheSA9ICdmbGV4JzsKICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gc2F2ZVVjYWxFdmVudCgpIHsKICAgICAgICB2YXIgaWQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndWNhbC1laWQnKS52YWx1ZTsKICAgICAgICB2YXIgc3JjID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3VjYWwtZXNyYycpLnZhbHVlOwogICAgICAgIHZhciBjYWxJZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd1Y2FsLWVjYWxpZCcpLnZhbHVlOwogICAgICAgIHZhciBkYXRlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3VjYWwtZGF0ZScpLnZhbHVlOwogICAgICAgIHZhciB0aW1lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3VjYWwtdGltZScpLnZhbHVlOwogICAgICAgIHZhciBlbmRUaW1lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3VjYWwtZW5kdGltZScpLnZhbHVlOwogICAgICAgIHZhciB0YXNrID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3VjYWwtdGFzaycpLnZhbHVlLnRyaW0oKTsKICAgICAgICBpZiAoIWRhdGUgfHwgIXRhc2spIHJldHVybiBhbGVydCgnRGF0ZSBldCBpbnRpdHVsw6kgcmVxdWlzJyk7CgogICAgICAgIGlmIChpZCAmJiBzcmMgPT09ICdsb2NhbCcpIHsKICAgICAgICAgICAgLy8gVXBkYXRlIGxvY2FsCiAgICAgICAgICAgIHZhciBpdGVtID0gKGFwcERhdGEuY2FsZW5kYXJ8fFtdKS5maW5kKGZ1bmN0aW9uKGMpeyByZXR1cm4gYy5pZC50b1N0cmluZygpPT09aWQudG9TdHJpbmcoKTsgfSk7CiAgICAgICAgICAgIGlmIChpdGVtKSB7IGl0ZW0uZGF0ZSA9IGRhdGU7IGl0ZW0udGFzayA9IHRhc2s7IGl0ZW0udGltZSA9IHRpbWU7IGl0ZW0uZW5kVGltZSA9IGVuZFRpbWU7IH0KICAgICAgICAgICAgc2F2ZURhdGEoKTsKICAgICAgICB9IGVsc2UgaWYgKGlkICYmIHNyYyA9PT0gJ2djYWwnKSB7CiAgICAgICAgICAgIHdpbmRvdy5wYXJlbnQucG9zdE1lc3NhZ2Uoe3R5cGU6J3BpbG90ZS1nY2FsLXVwZGF0ZScsIGV2ZW50SWQ6aWQsIGNhbElkOmNhbElkLCB0aXRsZTp0YXNrLCBkYXRlOmRhdGUsIHRpbWU6dGltZSwgZW5kVGltZTplbmRUaW1lfSwgJyonKTsKICAgICAgICB9IGVsc2UgaWYgKGlkICYmIHNyYyA9PT0gJ291dGxvb2snKSB7CiAgICAgICAgICAgIHdpbmRvdy5wYXJlbnQucG9zdE1lc3NhZ2Uoe3R5cGU6J3BpbG90ZS1vdXRsb29rLXVwZGF0ZScsIGV2ZW50SWQ6aWQsIGNhbElkOmNhbElkLCB0aXRsZTp0YXNrLCBkYXRlOmRhdGUsIHRpbWU6dGltZSwgZW5kVGltZTplbmRUaW1lfSwgJyonKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAvLyBOZXcgZXZlbnQKICAgICAgICAgICAgdmFyIGRlc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdpbnB1dFtuYW1lPSJ1Y2FsLWRlc3QiXTpjaGVja2VkJyk7CiAgICAgICAgICAgIHZhciBkZXN0VmFsID0gZGVzdCA/IGRlc3QudmFsdWUgOiAnbG9jYWwnOwogICAgICAgICAgICBpZiAoZGVzdFZhbCA9PT0gJ2xvY2FsJykgewogICAgICAgICAgICAgICAgYXBwRGF0YS5jYWxlbmRhci5wdXNoKHtpZDpEYXRlLm5vdygpLnRvU3RyaW5nKCksIGRhdGU6ZGF0ZSwgdGFzazp0YXNrLCB0aW1lOnRpbWUsIGVuZFRpbWU6ZW5kVGltZX0pOwogICAgICAgICAgICAgICAgc2F2ZURhdGEoKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHZhciB0YXJnZXRDYWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndWNhbC1nY2FsLXRhcmdldCcpLnZhbHVlOwogICAgICAgICAgICAgICAgaWYgKCF0YXJnZXRDYWwpIHJldHVybiBhbGVydCgnU8OpbGVjdGlvbm5leiB1biBhZ2VuZGEgR29vZ2xlJyk7CiAgICAgICAgICAgICAgICB2YXIgZGVzdFZhbDIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdpbnB1dFtuYW1lPSJ1Y2FsLWRlc3QiXTpjaGVja2VkJykudmFsdWU7CiAgICAgICAgICAgICAgICBpZiAoZGVzdFZhbDIgPT09ICdnY2FsJykgewogICAgICAgICAgICAgICAgICAgIHdpbmRvdy5wYXJlbnQucG9zdE1lc3NhZ2Uoe3R5cGU6J3BpbG90ZS1nY2FsLWFkZCcsIGNhbElkOnRhcmdldENhbCwgdGl0bGU6dGFzaywgZGF0ZTpkYXRlLCB0aW1lOnRpbWUsIGVuZFRpbWU6ZW5kVGltZX0sICcqJyk7CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGRlc3RWYWwyID09PSAnb3V0bG9vaycpIHsKICAgICAgICAgICAgICAgICAgICB3aW5kb3cucGFyZW50LnBvc3RNZXNzYWdlKHt0eXBlOidwaWxvdGUtb3V0bG9vay1hZGQnLCBjYWxJZDp0YXJnZXRDYWwsIHRpdGxlOnRhc2ssIGRhdGU6ZGF0ZSwgdGltZTp0aW1lLCBlbmRUaW1lOmVuZFRpbWV9LCAnKicpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGNsb3NlVWNhbE1vZGFsKCk7CiAgICAgICAgcmVuZGVyVW5pZmllZENhbCgpOwogICAgICAgIGlmKHR5cGVvZiBjaGVja0RhaWx5VGFza3MgPT09ICdmdW5jdGlvbicpIGNoZWNrRGFpbHlUYXNrcygpOwogICAgfQoKICAgIGZ1bmN0aW9uIGRlbGV0ZVVjYWxFdmVudChpZCwgc3JjLCBjYWxJZCkgewogICAgICAgIGlmICghY29uZmlybSgnU3VwcHJpbWVyIGNldCDDqXbDqW5lbWVudCA/JykpIHJldHVybjsKICAgICAgICBpZiAoc3JjID09PSAnbG9jYWwnKSB7CiAgICAgICAgICAgIGFwcERhdGEuY2FsZW5kYXIgPSAoYXBwRGF0YS5jYWxlbmRhcnx8W10pLmZpbHRlcihmdW5jdGlvbihjKXsgcmV0dXJuIGMuaWQudG9TdHJpbmcoKSE9PWlkLnRvU3RyaW5nKCk7IH0pOwogICAgICAgICAgICBzYXZlRGF0YSgpOwogICAgICAgICAgICByZW5kZXJVbmlmaWVkQ2FsKCk7CiAgICAgICAgICAgIGlmKHR5cGVvZiBjaGVja0RhaWx5VGFza3MgPT09ICdmdW5jdGlvbicpIGNoZWNrRGFpbHlUYXNrcygpOwogICAgICAgIH0gZWxzZSBpZiAoc3JjID09PSAnZ2NhbCcpIHsKICAgICAgICAgICAgd2luZG93LnBhcmVudC5wb3N0TWVzc2FnZSh7dHlwZToncGlsb3RlLWdjYWwtZGVsZXRlJywgZXZlbnRJZDppZCwgY2FsSWQ6Y2FsSWR9LCAnKicpOwogICAgICAgICAgICBfZ2NhbEV2ZW50cyA9IF9nY2FsRXZlbnRzLmZpbHRlcihmdW5jdGlvbihlKXsgcmV0dXJuIGUuaWQgIT09IGlkOyB9KTsKICAgICAgICAgICAgcmVuZGVyVW5pZmllZENhbCgpOwogICAgICAgIH0gZWxzZSBpZiAoc3JjID09PSAnb3V0bG9vaycpIHsKICAgICAgICAgICAgd2luZG93LnBhcmVudC5wb3N0TWVzc2FnZSh7dHlwZToncGlsb3RlLW91dGxvb2stZGVsZXRlJywgZXZlbnRJZDppZCwgY2FsSWQ6Y2FsSWR9LCAnKicpOwogICAgICAgICAgICBfb3V0bG9va0V2ZW50cyA9IF9vdXRsb29rRXZlbnRzLmZpbHRlcihmdW5jdGlvbihlKXsgcmV0dXJuIGUuaWQgIT09IGlkOyB9KTsKICAgICAgICAgICAgcmVuZGVyVW5pZmllZENhbCgpOwogICAgICAgIH0KICAgIH0KCiAgICAvLyBPdmVycmlkZSBvbGQgcmVuZGVyQ2FsZW5kYXIgdG8gdXNlIHVuaWZpZWQKICAgIGZ1bmN0aW9uIHJlbmRlckNhbGVuZGFyKCkgeyByZW5kZXJVbmlmaWVkQ2FsKCk7IH0KCiAgICBmdW5jdGlvbiBtYWpWYWNhbmNlcygpIHsKICAgICAgICB2YXIgem9uZSA9IChhcHBEYXRhLnNldHRpbmdzICYmIGFwcERhdGEuc2V0dGluZ3Muem9uZSkgfHwgJ0InOwogICAgICAgIHZhciB6b25lTmFtZSA9ICdab25lICcgKyB6b25lOwoKICAgICAgICAvLyBEw6l0ZXJtaW5lciBsJ2FubsOpZSBzY29sYWlyZSBjb3VyYW50ZSAoc2VwdCDDoCBhb8O7dCkKICAgICAgICB2YXIgbm93ID0gbmV3IERhdGUoKTsKICAgICAgICB2YXIgeWVhciA9IG5vdy5nZXRNb250aCgpID49IDggPyBub3cuZ2V0RnVsbFllYXIoKSA6IG5vdy5nZXRGdWxsWWVhcigpIC0gMTsKICAgICAgICB2YXIgYW5uZWVTY28gPSB5ZWFyICsgJy0nICsgKHllYXIgKyAxKTsKCiAgICAgICAgLy8gSm91cnMgZsOpcmnDqXMgZnJhbsOnYWlzIChjYWxjdWzDqXMgZHluYW1pcXVlbWVudCkKICAgICAgICBmdW5jdGlvbiBqb3Vyc0Zlcmllcyh5KSB7CiAgICAgICAgICAgIC8vIENhbGN1bCBkZSBQw6JxdWVzIChhbGdvcml0aG1lIGRlIE1lZXVzKQogICAgICAgICAgICB2YXIgYT15JTE5LCBiPU1hdGguZmxvb3IoeS8xMDApLCBjPXklMTAwLCBkPU1hdGguZmxvb3IoYi80KSwgZT1iJTQ7CiAgICAgICAgICAgIHZhciBmPU1hdGguZmxvb3IoKGIrOCkvMjUpLCBnPU1hdGguZmxvb3IoKGItZisxKS8zKSwgaD0oMTkqYStiLWQtZysxNSklMzA7CiAgICAgICAgICAgIHZhciBpPU1hdGguZmxvb3IoYy80KSwgaz1jJTQsIGw9KDMyKzIqZSsyKmktaC1rKSU3OwogICAgICAgICAgICB2YXIgbT1NYXRoLmZsb29yKChhKzExKmgrMjIqbCkvNDUxKSwgbW9udGg9TWF0aC5mbG9vcigoaCtsLTcqbSsxMTQpLzMxKS0xOwogICAgICAgICAgICB2YXIgZGF5PShoK2wtNyptKzExNCklMzErMTsKICAgICAgICAgICAgdmFyIHBhcXVlcyA9IG5ldyBEYXRlKHksIG1vbnRoLCBkYXkpOwogICAgICAgICAgICB2YXIgdG9JU08gPSBmdW5jdGlvbihkKXsgcmV0dXJuIGQudG9JU09TdHJpbmcoKS5zcGxpdCgnVCcpWzBdOyB9OwogICAgICAgICAgICB2YXIgYWRkRGF5cyA9IGZ1bmN0aW9uKGQsbil7IHZhciByPW5ldyBEYXRlKGQpOyByLnNldERhdGUoci5nZXREYXRlKCkrbik7IHJldHVybiByOyB9OwogICAgICAgICAgICByZXR1cm4gWwogICAgICAgICAgICAgICAge25hbWU6J0pvdXIgZGUgbFwnQW4nLCBkYXRlOnRvSVNPKG5ldyBEYXRlKHksMCwxKSl9LAogICAgICAgICAgICAgICAge25hbWU6J0x1bmRpIGRlIFDDonF1ZXMnLCBkYXRlOnRvSVNPKGFkZERheXMocGFxdWVzLDEpKX0sCiAgICAgICAgICAgICAgICB7bmFtZTonRsOqdGUgZHUgVHJhdmFpbCcsIGRhdGU6dG9JU08obmV3IERhdGUoeSw0LDEpKX0sCiAgICAgICAgICAgICAgICB7bmFtZTonVmljdG9pcmUgMTk0NScsIGRhdGU6dG9JU08obmV3IERhdGUoeSw0LDgpKX0sCiAgICAgICAgICAgICAgICB7bmFtZTonQXNjZW5zaW9uJywgZGF0ZTp0b0lTTyhhZGREYXlzKHBhcXVlcywzOSkpfSwKICAgICAgICAgICAgICAgIHtuYW1lOidMdW5kaSBkZSBQZW50ZWPDtHRlJywgZGF0ZTp0b0lTTyhhZGREYXlzKHBhcXVlcyw1MCkpfSwKICAgICAgICAgICAgICAgIHtuYW1lOidGw6p0ZSBOYXRpb25hbGUnLCBkYXRlOnRvSVNPKG5ldyBEYXRlKHksNiwxNCkpfSwKICAgICAgICAgICAgICAgIHtuYW1lOidBc3NvbXB0aW9uJywgZGF0ZTp0b0lTTyhuZXcgRGF0ZSh5LDcsMTUpKX0sCiAgICAgICAgICAgICAgICB7bmFtZTonVG91c3NhaW50JywgZGF0ZTp0b0lTTyhuZXcgRGF0ZSh5LDEwLDEpKX0sCiAgICAgICAgICAgICAgICB7bmFtZTonQXJtaXN0aWNlJywgZGF0ZTp0b0lTTyhuZXcgRGF0ZSh5LDEwLDExKSl9LAogICAgICAgICAgICAgICAge25hbWU6J05vw6tsJywgZGF0ZTp0b0lTTyhuZXcgRGF0ZSh5LDExLDI1KSl9CiAgICAgICAgICAgIF07CiAgICAgICAgfQoKICAgICAgICAvLyBUZW50ZXIgbGUgZmV0Y2ggQVBJIG9mZmljaWVsbGUKICAgICAgICB2YXIgYXBpVXJsID0gJ2h0dHBzOi8vZGF0YS5lZHVjYXRpb24uZ291di5mci9hcGkvZXhwbG9yZS92Mi4xL2NhdGFsb2cvZGF0YXNldHMvZnItZW4tY2FsZW5kcmllci1zY29sYWlyZS9yZWNvcmRzP3doZXJlPWFubmVlX3Njb2xhaXJlJTNEJTIyJyArIGFubmVlU2NvICsgJyUyMiUyMEFORCUyMCh6b25lcyUzRCUyMicgKyB6b25lTmFtZSArICclMjIlMjBPUiUyMHpvbmVzJTNEJTIyRnJhbmNlJTIwZW50acOocmUlMjIpJmxpbWl0PTUwJm9yZGVyX2J5PXN0YXJ0X2RhdGUnOwoKICAgICAgICB2YXIgYnRuID0gZXZlbnQgJiYgZXZlbnQudGFyZ2V0ID8gZXZlbnQudGFyZ2V0LmNsb3Nlc3QoJ2J1dHRvbicpIDogbnVsbDsKICAgICAgICBpZiAoYnRuKSB7IGJ0bi5kaXNhYmxlZCA9IHRydWU7IGJ0bi5pbm5lckhUTUwgPSAnPGkgY2xhc3M9ImZhcyBmYS1zcGlubmVyIGZhLXNwaW4iPjwvaT4gQ2hhcmdlbWVudC4uLic7IH0KCiAgICAgICAgZmV0Y2goYXBpVXJsKS50aGVuKGZ1bmN0aW9uKHIpIHsKICAgICAgICAgICAgaWYgKCFyLm9rKSB0aHJvdyBuZXcgRXJyb3IoJ0hUVFAgJyArIHIuc3RhdHVzKTsKICAgICAgICAgICAgcmV0dXJuIHIuanNvbigpOwogICAgICAgIH0pLnRoZW4oZnVuY3Rpb24oZGF0YSkgewogICAgICAgICAgICBpZiAoIWRhdGEucmVzdWx0cyB8fCAhZGF0YS5yZXN1bHRzLmxlbmd0aCkgdGhyb3cgbmV3IEVycm9yKCdBdWN1bmUgZG9ubsOpZScpOwoKICAgICAgICAgICAgLy8gU3VwcHJpbWVyIGFuY2llbm5lcyBlbnRyw6llcwogICAgICAgICAgICBhcHBEYXRhLmNhbGVuZGFyID0gYXBwRGF0YS5jYWxlbmRhci5maWx0ZXIoZnVuY3Rpb24oYykgeyByZXR1cm4gIWMudmFjT2ZmaWNpZWw7IH0pOwogICAgICAgICAgICB2YXIgYWRkZWQgPSAwOwoKICAgICAgICAgICAgZGF0YS5yZXN1bHRzLmZvckVhY2goZnVuY3Rpb24ocmVjKSB7CiAgICAgICAgICAgICAgICB2YXIgZGVzYyA9IHJlYy5kZXNjcmlwdGlvbiB8fCAnJzsKICAgICAgICAgICAgICAgIHZhciBzdGFydCA9IChyZWMuc3RhcnRfZGF0ZSB8fCAnJykuc3BsaXQoJ1QnKVswXTsKICAgICAgICAgICAgICAgIHZhciBlbmQgPSAocmVjLmVuZF9kYXRlIHx8ICcnKS5zcGxpdCgnVCcpWzBdOwogICAgICAgICAgICAgICAgaWYgKCFzdGFydCB8fCAhZW5kKSByZXR1cm47CgogICAgICAgICAgICAgICAgdmFyIGlkID0gJ3ZhY18nICsgZGVzYy5yZXBsYWNlKC9bXmEtekEtWjAtOV0vZywnXycpICsgJ18nICsgc3RhcnQ7CiAgICAgICAgICAgICAgICBpZiAoIWFwcERhdGEuY2FsZW5kYXIuc29tZShmdW5jdGlvbihjKXsgcmV0dXJuIGMuaWQgPT09IGlkOyB9KSkgewogICAgICAgICAgICAgICAgICAgIGFwcERhdGEuY2FsZW5kYXIucHVzaCh7aWQ6IGlkLCBkYXRlOiBzdGFydCwgdGFzazogJ1x1ezFGM0Q2fSBEw6lidXQgJyArIGRlc2MgKyAnICgnICsgem9uZU5hbWUgKyAnKScsIHZhY09mZmljaWVsOiB0cnVlfSk7CiAgICAgICAgICAgICAgICAgICAgYXBwRGF0YS5jYWxlbmRhci5wdXNoKHtpZDogaWQrJ19lbmQnLCBkYXRlOiBlbmQsIHRhc2s6ICdcdXsxRjREQX0gUmVwcmlzZSAnICsgZGVzYyArICcgKCcgKyB6b25lTmFtZSArICcpJywgdmFjT2ZmaWNpZWw6IHRydWV9KTsKICAgICAgICAgICAgICAgICAgICBhZGRlZCsrOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIC8vIEFqb3V0ZXIgam91cnMgZsOpcmnDqXMgcG91ciBsZXMgMiBhbm7DqWVzIGNpdmlsZXMKICAgICAgICAgICAgW3llYXIsIHllYXIrMV0uZm9yRWFjaChmdW5jdGlvbih5KSB7CiAgICAgICAgICAgICAgICBqb3Vyc0Zlcmllcyh5KS5mb3JFYWNoKGZ1bmN0aW9uKGpmKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKGpmLmRhdGUgPj0geWVhcisnLTA5LTAxJyAmJiBqZi5kYXRlIDw9ICh5ZWFyKzEpKyctMDgtMzEnKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBmaWQgPSAnZmVyaWVfJyArIGpmLmRhdGU7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghYXBwRGF0YS5jYWxlbmRhci5zb21lKGZ1bmN0aW9uKGMpeyByZXR1cm4gYy5pZCA9PT0gZmlkOyB9KSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgYXBwRGF0YS5jYWxlbmRhci5wdXNoKHtpZDogZmlkLCBkYXRlOiBqZi5kYXRlLCB0YXNrOiAnXHV7MUYxRUJ9XHV7MUYxRjd9ICcgKyBqZi5uYW1lLCB2YWNPZmZpY2llbDogdHJ1ZX0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYWRkZWQrKzsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIC8vIE1BSiBzZW1haW5lcyB2YWNhbmNlcyBwb3VyIEdhbnR0CiAgICAgICAgICAgIHVwZGF0ZVZhY1dlZWtzRnJvbUFQSShkYXRhLnJlc3VsdHMsIHpvbmUpOwoKICAgICAgICAgICAgc2F2ZURhdGEoKTsgcmVuZGVyQ2FsZW5kYXIoKTsKICAgICAgICAgICAgaWYodHlwZW9mIGNoZWNrRGFpbHlUYXNrcyA9PT0gJ2Z1bmN0aW9uJykgY2hlY2tEYWlseVRhc2tzKCk7CiAgICAgICAgICAgIGFsZXJ0KCdcdTI3MDUgQ2FsZW5kcmllciAnICsgYW5uZWVTY28gKyAnIG1pcyDDoCBqb3VyICFcblxuJyArIHpvbmVOYW1lICsgJyDigJQgJyArIGFkZGVkICsgJyBlbnRyw6llKHMpIGFqb3V0w6llKHMpXG5cblNvdXJjZSA6IGRhdGEuZWR1Y2F0aW9uLmdvdXYuZnIgKEFQSSBvZmZpY2llbGxlKScpOwogICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uKGVycikgewogICAgICAgICAgICBjb25zb2xlLndhcm4oJ0FQSSBpbmRpc3BvbmlibGUsIGZhbGxiYWNrIGRvbm7DqWVzIGxvY2FsZXM6JywgZXJyKTsKICAgICAgICAgICAgbWFqVmFjYW5jZXNGYWxsYmFjayh6b25lLCB6b25lTmFtZSk7CiAgICAgICAgfSkuZmluYWxseShmdW5jdGlvbigpIHsKICAgICAgICAgICAgaWYgKGJ0bikgeyBidG4uZGlzYWJsZWQgPSBmYWxzZTsgYnRuLmlubmVySFRNTCA9ICc8aSBjbGFzcz0iZmFzIGZhLXN5bmMiPjwvaT4gTUFKIFZhY2FuY2VzJzsgfQogICAgICAgIH0pOwogICAgfQoKICAgIGZ1bmN0aW9uIHVwZGF0ZVZhY1dlZWtzRnJvbUFQSShyZXN1bHRzLCB6b25lKSB7CiAgICAgICAgdmFyIG5ld1ZBQyA9IHthbGw6W10sIEE6W10sIEI6W10sIEM6W119OwogICAgICAgIHJlc3VsdHMuZm9yRWFjaChmdW5jdGlvbihyZWMpIHsKICAgICAgICAgICAgdmFyIHN0YXJ0ID0gcmVjLnN0YXJ0X2RhdGUgPyBuZXcgRGF0ZShyZWMuc3RhcnRfZGF0ZSkgOiBudWxsOwogICAgICAgICAgICB2YXIgZW5kID0gcmVjLmVuZF9kYXRlID8gbmV3IERhdGUocmVjLmVuZF9kYXRlKSA6IG51bGw7CiAgICAgICAgICAgIGlmICghc3RhcnQgfHwgIWVuZCkgcmV0dXJuOwogICAgICAgICAgICB2YXIgem9uZXMgPSByZWMuem9uZXMgfHwgJyc7CiAgICAgICAgICAgIGZvciAodmFyIGQgPSBuZXcgRGF0ZShzdGFydCk7IGQgPCBlbmQ7IGQuc2V0RGF0ZShkLmdldERhdGUoKSs3KSkgewogICAgICAgICAgICAgICAgdmFyIHcgPSBnZXRJU09XZWVrKGQpOwogICAgICAgICAgICAgICAgaWYgKHpvbmVzLmluZGV4T2YoJ0ZyYW5jZScpID49IDApIHsgaWYgKG5ld1ZBQy5hbGwuaW5kZXhPZih3KTwwKSBuZXdWQUMuYWxsLnB1c2godyk7IH0KICAgICAgICAgICAgICAgIGVsc2UgaWYgKHpvbmVzLmluZGV4T2YoJ0EnKSA+PSAwKSB7IGlmIChuZXdWQUMuQS5pbmRleE9mKHcpPDApIG5ld1ZBQy5BLnB1c2godyk7IH0KICAgICAgICAgICAgICAgIGVsc2UgaWYgKHpvbmVzLmluZGV4T2YoJ0InKSA+PSAwKSB7IGlmIChuZXdWQUMuQi5pbmRleE9mKHcpPDApIG5ld1ZBQy5CLnB1c2godyk7IH0KICAgICAgICAgICAgICAgIGVsc2UgaWYgKHpvbmVzLmluZGV4T2YoJ0MnKSA+PSAwKSB7IGlmIChuZXdWQUMuQy5pbmRleE9mKHcpPDApIG5ld1ZBQy5DLnB1c2godyk7IH0KICAgICAgICAgICAgfQogICAgICAgIH0pOwogICAgICAgIGlmIChuZXdWQUMuYWxsLmxlbmd0aCkgVkFDID0gbmV3VkFDOwogICAgfQoKICAgIGZ1bmN0aW9uIGdldElTT1dlZWsoZCkgewogICAgICAgIHZhciBkYXRlID0gbmV3IERhdGUoZC5nZXRUaW1lKCkpOwogICAgICAgIGRhdGUuc2V0SG91cnMoMCwwLDAsMCk7CiAgICAgICAgZGF0ZS5zZXREYXRlKGRhdGUuZ2V0RGF0ZSgpKzMtKGRhdGUuZ2V0RGF5KCkrNiklNyk7CiAgICAgICAgdmFyIHdlZWsxID0gbmV3IERhdGUoZGF0ZS5nZXRGdWxsWWVhcigpLDAsNCk7CiAgICAgICAgcmV0dXJuIDErTWF0aC5yb3VuZCgoKGRhdGUuZ2V0VGltZSgpLXdlZWsxLmdldFRpbWUoKSkvODY0MDAwMDAtMysod2VlazEuZ2V0RGF5KCkrNiklNykvNyk7CiAgICB9CgogICAgZnVuY3Rpb24gbWFqVmFjYW5jZXNGYWxsYmFjayh6b25lLCB6b25lTmFtZSkgewogICAgICAgIHZhciBWQUNBTkNFUyA9IHsKICAgICAgICAgICAgYWxsOlt7bmFtZTonVG91c3NhaW50JyxzdGFydDonMjAyNS0xMC0xOCcsZW5kOicyMDI1LTExLTAzJ30se25hbWU6J05vw6tsJyxzdGFydDonMjAyNS0xMi0yMCcsZW5kOicyMDI2LTAxLTA1J30se25hbWU6J0FzY2Vuc2lvbicsc3RhcnQ6JzIwMjYtMDUtMTMnLGVuZDonMjAyNi0wNS0xOCd9LHtuYW1lOifDiXTDqScsc3RhcnQ6JzIwMjYtMDctMDQnLGVuZDonMjAyNi0wOS0wMSd9XSwKICAgICAgICAgICAgQTpbe25hbWU6J0hpdmVyJyxzdGFydDonMjAyNi0wMi0wNycsZW5kOicyMDI2LTAyLTIzJ30se25hbWU6J1ByaW50ZW1wcycsc3RhcnQ6JzIwMjYtMDQtMDQnLGVuZDonMjAyNi0wNC0yMCd9XSwKICAgICAgICAgICAgQjpbe25hbWU6J0hpdmVyJyxzdGFydDonMjAyNi0wMi0xNCcsZW5kOicyMDI2LTAzLTAyJ30se25hbWU6J1ByaW50ZW1wcycsc3RhcnQ6JzIwMjYtMDQtMTEnLGVuZDonMjAyNi0wNC0yNyd9XSwKICAgICAgICAgICAgQzpbe25hbWU6J0hpdmVyJyxzdGFydDonMjAyNi0wMi0yMScsZW5kOicyMDI2LTAzLTA5J30se25hbWU6J1ByaW50ZW1wcycsc3RhcnQ6JzIwMjYtMDQtMTgnLGVuZDonMjAyNi0wNS0wNCd9XQogICAgICAgIH07CiAgICAgICAgYXBwRGF0YS5jYWxlbmRhciA9IGFwcERhdGEuY2FsZW5kYXIuZmlsdGVyKGZ1bmN0aW9uKGMpeyByZXR1cm4gIWMudmFjT2ZmaWNpZWw7IH0pOwogICAgICAgIHZhciBwZXJpb2RzID0gVkFDQU5DRVMuYWxsLmNvbmNhdChWQUNBTkNFU1t6b25lXXx8W10pOwogICAgICAgIHZhciBhZGRlZCA9IDA7CiAgICAgICAgcGVyaW9kcy5mb3JFYWNoKGZ1bmN0aW9uKHYpIHsKICAgICAgICAgICAgdmFyIGlkID0gJ3ZhY18nK3YubmFtZS5yZXBsYWNlKC9ccy9nLCdfJykrJ18nK3Yuc3RhcnQ7CiAgICAgICAgICAgIGFwcERhdGEuY2FsZW5kYXIucHVzaCh7aWQ6aWQsZGF0ZTp2LnN0YXJ0LHRhc2s6J1x1ezFGM0Q2fSBEw6lidXQgVmFjLiAnK3YubmFtZSsnICgnK3pvbmVOYW1lKycpJyx2YWNPZmZpY2llbDp0cnVlfSk7CiAgICAgICAgICAgIGFwcERhdGEuY2FsZW5kYXIucHVzaCh7aWQ6aWQrJ19lbmQnLGRhdGU6di5lbmQsdGFzazonXHV7MUY0REF9IFJlcHJpc2UgJyt2Lm5hbWUrJyAoJyt6b25lTmFtZSsnKScsdmFjT2ZmaWNpZWw6dHJ1ZX0pOwogICAgICAgICAgICBhZGRlZCsrOwogICAgICAgIH0pOwogICAgICAgIHZhciBuZXdWQUMgPSB7YWxsOls0Myw0NCw1MiwxXSxBOls3LDgsMTUsMTZdLEI6WzgsOSwxNiwxN10sQzpbOSwxMCwxNywxOF19OwogICAgICAgIFZBQyA9IG5ld1ZBQzsKICAgICAgICBzYXZlRGF0YSgpOyByZW5kZXJDYWxlbmRhcigpOwogICAgICAgIGlmKHR5cGVvZiBjaGVja0RhaWx5VGFza3MgPT09ICdmdW5jdGlvbicpIGNoZWNrRGFpbHlUYXNrcygpOwogICAgICAgIGFsZXJ0KCdcdTI3MDUgQ2FsZW5kcmllciBtaXMgw6Agam91ciAoZG9ubsOpZXMgaW50w6lncsOpZXMpXG5cbicgKyB6b25lTmFtZSArICcg4oCUICcgKyBhZGRlZCArICcgcMOpcmlvZGUocylcblxu4pqgIEFQSSBpbmRpc3BvbmlibGUsIGRvbm7DqWVzIDIwMjUtMjAyNiB1dGlsaXPDqWVzLicpOwogICAgfQoKCiAgICAKICAgIC8vIOKVkOKVkOKVkCBQUk9Dw4lEVVJFUyDilZDilZDilZAKICAgIHZhciBQUk9DX0NPTE9SUz17QTonIzNCODJGNicsQjonIzhCNUNGNicsQzonI0VDNDg5OScsRDonI0VGNDQ0NCcsRTonI0Y5NzMxNicsRjonIzZCNzI4MCcsRzonIzZCNzI4MCcsSDonIzZCNzI4MCcsSTonI0VBQjMwOCcsSjonIzZCNzI4MCcsSzonIzZCNzI4MCcsTDonIzZCNzI4MCcsTTonIzZCNzI4MCcsTjonIzIyQzU1RScsTzonIzEwQjk4MScsUDonIzYzNjZGMScsUTonIzZCNzI4MCcsUjonI0E4NTVGNycsUzonI0ZCNzE4NScsVDonIzZCNzI4MCcsVTonIzZCNzI4MCcsVjonIzZCNzI4MCcsVzonIzZCNzI4MCcsWDonIzZCNzI4MCcsWTonIzZCNzI4MCcsWjonIzZCNzI4MCd9OwogICAgZnVuY3Rpb24gZ2V0UHJvY0NvbG9yKGNvZGUpe2lmKCFjb2RlKXJldHVybicjODg4Jzt2YXIgYz1jb2RlLnRyaW0oKS50b1VwcGVyQ2FzZSgpO2lmKGMuaW5kZXhPZignUE8nKT09PTApcmV0dXJuJyMwNkI2RDQnO2lmKGMuaW5kZXhPZignUkgnKT09PTApcmV0dXJuJyNBODU1RjcnO3ZhciBsPWMuY2hhckF0KDApO3JldHVybiBQUk9DX0NPTE9SU1tsXXx8JyM4ODgnO30KICAgIHdpbmRvdy53aW5kb3cuX3Byb2NFZGl0SWQ9bnVsbDsKICAgIGZ1bmN0aW9uIG9wZW5Qcm9jTW9kYWwoaWQpewogICAgICAgIHdpbmRvdy5fcHJvY0VkaXRJZD1pZHx8bnVsbDsKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJvY01vZC10aXRsZScpLnRleHRDb250ZW50PWlkPydNb2RpZmllciBsYSBwcm9jw6lkdXJlJzonTm91dmVsbGUgcHJvY8OpZHVyZSc7CiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Byb2MtZGVsLWJ0bicpLnN0eWxlLmRpc3BsYXk9aWQ/Jyc6J25vbmUnOwogICAgICAgIGlmKGlkKXsKICAgICAgICAgICAgdmFyIHA9KGFwcERhdGEucHJvY2VkdXJlc3x8W10pLmZpbmQoZnVuY3Rpb24oeCl7cmV0dXJuIHguaWQ9PT1pZDt9KTsKICAgICAgICAgICAgaWYocCl7CiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJvYy1jb2RlJykudmFsdWU9cC5jb2RlfHwnJzsKICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcm9jLXRpdGxlJykudmFsdWU9cC50aXRsZXx8Jyc7CiAgICAgICAgICAgICAgICB2YXIgc2VsPWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcm9jLWNhdCcpOwogICAgICAgICAgICAgICAgdmFyIGZvdW5kPWZhbHNlOwogICAgICAgICAgICAgICAgZm9yKHZhciBpPTA7aTxzZWwub3B0aW9ucy5sZW5ndGg7aSsrKXtpZihzZWwub3B0aW9uc1tpXS52YWx1ZT09PXAuY2F0KXtmb3VuZD10cnVlO2JyZWFrO319CiAgICAgICAgICAgICAgICBpZighZm91bmQmJnAuY2F0KXt2YXIgb3B0PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ29wdGlvbicpO29wdC52YWx1ZT1wLmNhdDtvcHQudGV4dD1wLmNhdDtzZWwuaW5zZXJ0QmVmb3JlKG9wdCxzZWwucXVlcnlTZWxlY3Rvcignb3B0aW9uW3ZhbHVlPSJfX25ld19fIl0nKSk7fTsKICAgICAgICAgICAgICAgIHNlbC52YWx1ZT1wLmNhdHx8Jyc7CiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJvYy1hbm5lZScpLmNoZWNrZWQ9ISFwLmFubmVlOwogICAgICAgICAgICAgICAgaWYocC5hbm5lZSl7CiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Byb2Mtd3MnKS52YWx1ZT0nJzsKICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJvYy13ZScpLnZhbHVlPScnOwogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcm9jLXdzJykuZGlzYWJsZWQ9dHJ1ZTsKICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJvYy13ZScpLmRpc2FibGVkPXRydWU7CiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Byb2Mtd3MnKS5zdHlsZS5vcGFjaXR5PScuNCc7CiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Byb2Mtd2UnKS5zdHlsZS5vcGFjaXR5PScuNCc7CiAgICAgICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJvYy13cycpLnZhbHVlPXAud3N0YXJ0fHwnJzsKICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJvYy13ZScpLnZhbHVlPXAud2VuZHx8Jyc7CiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Byb2Mtd3MnKS5kaXNhYmxlZD1mYWxzZTsKICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJvYy13ZScpLmRpc2FibGVkPWZhbHNlOwogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcm9jLXdzJykuc3R5bGUub3BhY2l0eT0nMSc7CiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Byb2Mtd2UnKS5zdHlsZS5vcGFjaXR5PScxJzsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcm9jLXoyJykuaW5uZXJIVE1MPXAuem9uZTJ8fCcnOwogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Byb2MtejMnKS5pbm5lckhUTUw9cC56b25lM3x8Jyc7CiAgICAgICAgICAgIH0KICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Byb2MtY29kZScpLnZhbHVlPScnOwogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJvYy10aXRsZScpLnZhbHVlPScnOwogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJvYy1jYXQnKS52YWx1ZT0nJzsKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Byb2Mtd3MnKS52YWx1ZT0nJzsKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Byb2Mtd2UnKS52YWx1ZT0nJzsKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Byb2MtYW5uZWUnKS5jaGVja2VkPWZhbHNlOwogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJvYy13cycpLmRpc2FibGVkPWZhbHNlOwogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJvYy13ZScpLmRpc2FibGVkPWZhbHNlOwogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJvYy13cycpLnN0eWxlLm9wYWNpdHk9JzEnOwogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJvYy13ZScpLnN0eWxlLm9wYWNpdHk9JzEnOwogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJvYy16MicpLmlubmVySFRNTD0nJzsKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Byb2MtejMnKS5pbm5lckhUTUw9Jyc7CiAgICAgICAgfQogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcm9jTW9kJykuc3R5bGUuZGlzcGxheT0nZmxleCc7CiAgICB9CiAgICBmdW5jdGlvbiBjbG9zZVByb2NNb2RhbCgpe3ZhciBwbT1kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJvY01vZCcpO3BtLnN0eWxlLmRpc3BsYXk9J25vbmUnO3BtLmNsYXNzTGlzdC5yZW1vdmUoJ29wZW4nKTt3aW5kb3cuX3Byb2NFZGl0SWQ9bnVsbDt9CiAgICBmdW5jdGlvbiBwcm9jSW5zZXJ0SWNvbih0eXBlKXsKICAgICAgICB2YXIgaWNvbnM9e21haWw6JzxzcGFuIGNsYXNzPSJwcm9jLWljb24tbWFpbCI+PGkgY2xhc3M9ImZhcyBmYS1lbnZlbG9wZSI+PC9pPjwvc3Bhbj4nLGFsZXJ0Oic8c3BhbiBjbGFzcz0icHJvYy1pY29uLWFsZXJ0Ij48aSBjbGFzcz0iZmFzIGZhLWV4Y2xhbWF0aW9uIj48L2k+PC9zcGFuPicsaWRlYTonPHNwYW4gY2xhc3M9InByb2MtaWNvbi1pZGVhIj48aSBjbGFzcz0iZmFzIGZhLWxpZ2h0YnVsYiI+PC9pPjwvc3Bhbj4nfTsKICAgICAgICBkb2N1bWVudC5leGVjQ29tbWFuZCgnaW5zZXJ0SFRNTCcsZmFsc2UsaWNvbnNbdHlwZV0rJyZuYnNwOycpOwogICAgfQogICAgZnVuY3Rpb24gc2F2ZVByb2MoKXsKICAgICAgICB0cnl7CiAgICAgICAgdmFyIHJhd0NvZGU9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Byb2MtY29kZScpLnZhbHVlLnRyaW0oKS50b1VwcGVyQ2FzZSgpOwogICAgICAgIHZhciBjb2RlPXJhd0NvZGUucmVwbGFjZSgvXihbQS1aXSspKFxkKS8sJyQxICQyJyk7CiAgICAgICAgdmFyIHRpdGxlPWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcm9jLXRpdGxlJykudmFsdWUudHJpbSgpOwogICAgICAgIGlmKCFjb2RlfHwhdGl0bGUpe2FsZXJ0KCdDb2RlIGV0IHRpdHJlIHJlcXVpcy4nKTtyZXR1cm47fQogICAgICAgIGlmKCFhcHBEYXRhLnByb2NlZHVyZXMpYXBwRGF0YS5wcm9jZWR1cmVzPVtdOwogICAgICAgIHZhciBhbm5lZT1kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJvYy1hbm5lZScpLmNoZWNrZWQ7CiAgICAgICAgdmFyIHdzPWFubmVlPzA6KHBhcnNlSW50KGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcm9jLXdzJykudmFsdWUpfHwwKTsKICAgICAgICB2YXIgd2U9YW5uZWU/MDoocGFyc2VJbnQoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Byb2Mtd2UnKS52YWx1ZSl8fHdzKTsKICAgICAgICB2YXIgb2JqPXtpZDp3aW5kb3cuX3Byb2NFZGl0SWR8fERhdGUubm93KCkudG9TdHJpbmcoKSxjb2RlOmNvZGUsdGl0bGU6dGl0bGUsY2F0OmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcm9jLWNhdCcpLnZhbHVlLHdzdGFydDp3cyx3ZW5kOndlLGFubmVlOmFubmVlLHpvbmUyOmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcm9jLXoyJykuaW5uZXJIVE1MLHpvbmUzOmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcm9jLXozJykuaW5uZXJIVE1MLHVwZGF0ZWQ6bmV3IERhdGUoKS50b0lTT1N0cmluZygpLnNwbGl0KCdUJylbMF19OwogICAgICAgIGlmKHdpbmRvdy5fcHJvY0VkaXRJZCl7dmFyIGlkeD1hcHBEYXRhLnByb2NlZHVyZXMuZmluZEluZGV4KGZ1bmN0aW9uKHgpe3JldHVybiB4LmlkPT09d2luZG93Ll9wcm9jRWRpdElkO30pO2lmKGlkeD49MClhcHBEYXRhLnByb2NlZHVyZXNbaWR4XT1vYmo7fQogICAgICAgIGVsc2V7YXBwRGF0YS5wcm9jZWR1cmVzLnB1c2gob2JqKTt9CiAgICAgICAgc2F2ZURhdGEoKTtjbG9zZVByb2NNb2RhbCgpO3JlbmRlclByb2NlZHVyZXMoKTsKICAgICAgICB9Y2F0Y2goZXJyKXthbGVydCgnRXJyZXVyIHNhdXZlZ2FyZGU6ICcrZXJyLm1lc3NhZ2UpO2NvbnNvbGUuZXJyb3IoZXJyKTt9CiAgICB9CiAgICBmdW5jdGlvbiBkZWxQcm9jKCl7CiAgICAgICAgaWYoIV9wcm9jRWRpdElkKXJldHVybjtpZighY29uZmlybSgnU3VwcHJpbWVyIGNldHRlIHByb2PDqWR1cmUgPycpKXJldHVybjsKICAgICAgICBhcHBEYXRhLnByb2NlZHVyZXM9KGFwcERhdGEucHJvY2VkdXJlc3x8W10pLmZpbHRlcihmdW5jdGlvbih4KXtyZXR1cm4geC5pZCE9PXdpbmRvdy5fcHJvY0VkaXRJZDt9KTsKICAgICAgICBzYXZlRGF0YSgpO2Nsb3NlUHJvY01vZGFsKCk7cmVuZGVyUHJvY2VkdXJlcygpOwogICAgfQogICAgd2luZG93Ll9wcm9jRmlsdGVyQ2F0PScnOwogICAgCiAgICBmdW5jdGlvbiBmb3JtYXREYXRlRlIoZCkgewogICAgICAgIGlmKCFkKSByZXR1cm4gJyc7CiAgICAgICAgdmFyIGR0ID0gKGQgaW5zdGFuY2VvZiBEYXRlKSA/IGQgOiBuZXcgRGF0ZShkKTsKICAgICAgICBpZihpc05hTihkdC5nZXRUaW1lKCkpKSByZXR1cm4gZDsKICAgICAgICByZXR1cm4gZHQudG9Mb2NhbGVEYXRlU3RyaW5nKCdmci1GUicse2RheTonMi1kaWdpdCcsbW9udGg6J2xvbmcnLHllYXI6J251bWVyaWMnfSk7CiAgICB9CgogICAgCiAgICAvLyBBbm7DqWUgc2NvbGFpcmUgY291cmFudGUgKGV4OiAiMjAyNS0yMDI2IikKICAgIGZ1bmN0aW9uIGdldEN1cnJlbnRTY2hvb2xZZWFyKCl7CiAgICAgICAgdmFyIG5vdz1uZXcgRGF0ZSgpLG09bm93LmdldE1vbnRoKCkrMSx5PW5vdy5nZXRGdWxsWWVhcigpOwogICAgICAgIHJldHVybiBtPj04Pyh5KyctJysoeSsxKSk6KCh5LTEpKyctJyt5KTsKICAgIH0KICAgIC8vIEF1dG8tcmVzZXQ6IHLDqXRhYmxpdCBsZXMgcHJvY8OpZHVyZXMgdGVybWluw6llcyBkJ3VuZSBhbm7DqWUgcHLDqWPDqWRlbnRlCiAgICBmdW5jdGlvbiBhdXRvUmVzZXREb25lKCl7CiAgICAgICAgdmFyIHN5PWdldEN1cnJlbnRTY2hvb2xZZWFyKCk7dmFyIGNoYW5nZWQ9ZmFsc2U7CiAgICAgICAgKGFwcERhdGEucHJvY2VkdXJlc3x8W10pLmZvckVhY2goZnVuY3Rpb24ocCl7CiAgICAgICAgICAgIGlmKHAuZG9uZSYmcC5kb25lU1kmJnAuZG9uZVNZIT09c3kpe3AuZG9uZT1mYWxzZTtwLmRvbmVTWT0nJztjaGFuZ2VkPXRydWU7fQogICAgICAgIH0pOwogICAgICAgIChhcHBEYXRhLmdhbnR0fHxbXSkuZm9yRWFjaChmdW5jdGlvbihnKXsKICAgICAgICAgICAgaWYoZy5kb25lJiZnLmRvbmVTWSYmZy5kb25lU1khPT1zeSl7Zy5kb25lPWZhbHNlO2cuZG9uZVNZPScnO2NoYW5nZWQ9dHJ1ZTt9CiAgICAgICAgfSk7CiAgICAgICAgaWYoY2hhbmdlZClzYXZlRGF0YSgpOwogICAgfQoKICAgIGZ1bmN0aW9uIG5hdENvZGVTb3J0KGEsYil7CiAgICAgICAgdmFyIGNhPShhLmNvZGV8fCcnKSxjYj0oYi5jb2RlfHwnJyk7CiAgICAgICAgdmFyIHBhPWNhLm1hdGNoKC9eKFtBLVphLXpdKylccyooXGQqKSQvKXx8WycnLCcnLDBdOwogICAgICAgIHZhciBwYj1jYi5tYXRjaCgvXihbQS1aYS16XSspXHMqKFxkKikkLyl8fFsnJywnJywwXTsKICAgICAgICB2YXIgbGE9cGFbMV0udG9VcHBlckNhc2UoKSxsYj1wYlsxXS50b1VwcGVyQ2FzZSgpOwogICAgICAgIGlmKGxhPGxiKXJldHVybiAtMTtpZihsYT5sYilyZXR1cm4gMTsKICAgICAgICByZXR1cm4ocGFyc2VJbnQocGFbMl0pfHwwKS0ocGFyc2VJbnQocGJbMl0pfHwwKTsKICAgIH0KICAgIGZ1bmN0aW9uIHJlbmRlclByb2NlZHVyZXMoKXsKICAgICAgICB2YXIgcHJvY3M9KGFwcERhdGEucHJvY2VkdXJlc3x8W10pLnNsaWNlKCkuc29ydChuYXRDb2RlU29ydCk7CiAgICAgICAgdmFyIGNhdHM9e307cHJvY3MuZm9yRWFjaChmdW5jdGlvbihwKXtpZihwLmNhdCljYXRzW3AuY2F0XT0oY2F0c1twLmNhdF18fDApKzE7fSk7CiAgICAgICAgdmFyIGZoPSc8YnV0dG9uIGNsYXNzPSInKyghX3Byb2NGaWx0ZXJDYXQ/J2FjdGl2ZSc6JycpKyciIG9uY2xpY2s9Il9wcm9jRmlsdGVyQ2F0PVwnXCc7cmVuZGVyUHJvY2VkdXJlcygpIj5Ub3VzICgnK3Byb2NzLmxlbmd0aCsnKTwvYnV0dG9uPic7CiAgICAgICAgT2JqZWN0LmtleXMoY2F0cykuc29ydCgpLmZvckVhY2goZnVuY3Rpb24oYyl7ZmgrPSc8YnV0dG9uIGNsYXNzPSInKyhfcHJvY0ZpbHRlckNhdD09PWM/J2FjdGl2ZSc6JycpKyciIG9uY2xpY2s9Il9wcm9jRmlsdGVyQ2F0PVwnJytjLnJlcGxhY2UoLycvZywiXFwnIikrJ1wnO3JlbmRlclByb2NlZHVyZXMoKSI+JytjKycgKCcrY2F0c1tjXSsnKTwvYnV0dG9uPic7fSk7CiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Byb2MtZmlsdGVycycpLmlubmVySFRNTD1maDsKICAgICAgICB2YXIgZmlsdGVyZWQ9X3Byb2NGaWx0ZXJDYXQ/cHJvY3MuZmlsdGVyKGZ1bmN0aW9uKHApe3JldHVybiBwLmNhdD09PV9wcm9jRmlsdGVyQ2F0O30pOnByb2NzOwogICAgICAgIHZhciBoPScnOwogICAgICAgIGlmKCFmaWx0ZXJlZC5sZW5ndGgpe2g9JzxkaXYgc3R5bGU9InRleHQtYWxpZ246Y2VudGVyO3BhZGRpbmc6NDBweDtjb2xvcjojOTk5Ij48aSBjbGFzcz0iZmFzIGZhLWJvb2siIHN0eWxlPSJmb250LXNpemU6MnJlbTttYXJnaW4tYm90dG9tOjEwcHg7ZGlzcGxheTpibG9jayI+PC9pPkF1Y3VuZSBwcm9jw6lkdXJlPC9kaXY+Jzt9CiAgICAgICAgZmlsdGVyZWQuZm9yRWFjaChmdW5jdGlvbihwKXsKICAgICAgICAgICAgdmFyIGNvbD1nZXRQcm9jQ29sb3IocC5jb2RlKTsKICAgICAgICAgICAgaCs9JzxkaXYgY2xhc3M9InByb2MtY2FyZCIgb25jbGljaz0idmlld1Byb2MoXCcnK3AuaWQrJ1wnKSIgc3R5bGU9ImRpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXI7Z2FwOjEwcHg7cGFkZGluZzoxMHB4IDE0cHgiPic7CiAgICAgICAgICAgIGgrPSc8c3BhbiBjbGFzcz0icHJvYy1jb2RlIiBzdHlsZT0iYmFja2dyb3VuZDonK2NvbCsnO3BhZGRpbmc6NnB4IDEwcHg7Ym9yZGVyLXJhZGl1czo4cHg7Zm9udC13ZWlnaHQ6NzAwO2ZvbnQtc2l6ZTouOHJlbTtjb2xvcjojZmZmO21pbi13aWR0aDo0MHB4O3RleHQtYWxpZ246Y2VudGVyIj4nKyhwLmNvZGV8fCc/JykrJzwvc3Bhbj4nOwogICAgICAgICAgICBoKz0nPHNwYW4gc3R5bGU9ImZvbnQtd2VpZ2h0OjYwMDtmb250LXNpemU6Ljg4cmVtO2NvbG9yOiMzMzM7ZmxleDoxO3doaXRlLXNwYWNlOm5vd3JhcDtvdmVyZmxvdzpoaWRkZW47dGV4dC1vdmVyZmxvdzplbGxpcHNpcyI+JysocC50aXRsZXx8J1NhbnMgdGl0cmUnKSsnPC9zcGFuPic7CiAgICAgICAgICAgIGgrPSc8c3BhbiBzdHlsZT0iZm9udC1zaXplOi43MnJlbTtjb2xvcjojOTk5O3doaXRlLXNwYWNlOm5vd3JhcCI+Jytmb3JtYXREYXRlRlIocC51cGRhdGVkKSsnPC9zcGFuPic7CiAgICAgICAgICAgIGgrPShwLmNhdD8nPHNwYW4gY2xhc3M9InByb2MtY2FyZC1jYXQiIHN0eWxlPSJ3aGl0ZS1zcGFjZTpub3dyYXAiPicrcC5jYXQrJzwvc3Bhbj4nOicnKTsKICAgICAgICAgICAgaCs9JzxkaXYgY2xhc3M9InByb2MtY2FyZC1hY3Rpb25zIiBzdHlsZT0iZGlzcGxheTpmbGV4O2dhcDo0cHg7bWFyZ2luLWxlZnQ6NHB4Ij48YnV0dG9uIG9uY2xpY2s9ImV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO29wZW5Qcm9jTW9kYWwoXCcnK3AuaWQrJ1wnKSIgdGl0bGU9Ik1vZGlmaWVyIj48aSBjbGFzcz0iZmFzIGZhLXBlbiI+PC9pPjwvYnV0dG9uPic7CiAgICAgICAgICAgIGgrPSc8YnV0dG9uIG9uY2xpY2s9ImV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO3ByaW50UHJvYyhcJycrcC5pZCsnXCcpIiB0aXRsZT0iSW1wcmltZXIiPjxpIGNsYXNzPSJmYXMgZmEtcHJpbnQiPjwvaT48L2J1dHRvbj48L2Rpdj48L2Rpdj4nOwogICAgICAgIH0pOwogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcm9jLWxpc3QnKS5pbm5lckhUTUw9aDsKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJvYy12aWV3LWFyZWEnKS5zdHlsZS5kaXNwbGF5PSdub25lJzsKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJvYy1saXN0Jykuc3R5bGUuZGlzcGxheT0nJzsKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJvYy1maWx0ZXJzJykuc3R5bGUuZGlzcGxheT0nJzsKICAgIH0KICAgIGZ1bmN0aW9uIHZpZXdQcm9jKGlkKXsKICAgICAgICB2YXIgcD0oYXBwRGF0YS5wcm9jZWR1cmVzfHxbXSkuZmluZChmdW5jdGlvbih4KXtyZXR1cm4geC5pZD09PWlkO30pO2lmKCFwKXJldHVybjsKICAgICAgICB2YXIgY29sPWdldFByb2NDb2xvcihwLmNvZGUpOwogICAgICAgIHZhciBoPSc8ZGl2IGNsYXNzPSJwcm9jLXZpZXciPjxkaXYgY2xhc3M9InByb2Mtdmlldy1oZWFkZXIiIHN0eWxlPSJiYWNrZ3JvdW5kOicrY29sKyciPjxoMj4nKyhwLnRpdGxlfHwnJykrJzwvaDI+PGRpdiBjbGFzcz0icHYtY29kZSI+JysocC5jb2RlfHwnJykrKHAuY2F0Pycg4oCUICcrcC5jYXQ6JycpKyc8L2Rpdj48L2Rpdj48ZGl2IGNsYXNzPSJwcm9jLXZpZXctYm9keSI+JzsKICAgICAgICBoKz0nPGRpdiBzdHlsZT0ibWFyZ2luLWJvdHRvbToxNnB4O2Rpc3BsYXk6ZmxleDtnYXA6OHB4Ij48YnV0dG9uIGNsYXNzPSJtYiBtYi1vayIgb25jbGljaz0ib3BlblByb2NNb2RhbChcJycraWQrJ1wnKSI+PGkgY2xhc3M9ImZhcyBmYS1wZW4iPjwvaT4gTW9kaWZpZXI8L2J1dHRvbj48YnV0dG9uIGNsYXNzPSJtYiIgc3R5bGU9ImJhY2tncm91bmQ6IzU1NTtjb2xvcjojZmZmIiBvbmNsaWNrPSJwcmludFByb2MoXCcnK2lkKydcJykiPjxpIGNsYXNzPSJmYXMgZmEtcHJpbnQiPjwvaT4gSW1wcmltZXI8L2J1dHRvbj48YnV0dG9uIGNsYXNzPSJtYiBtYi1jIiBvbmNsaWNrPSJyZW5kZXJQcm9jZWR1cmVzKCkiPjxpIGNsYXNzPSJmYXMgZmEtYXJyb3ctbGVmdCI+PC9pPiBSZXRvdXI8L2J1dHRvbj48L2Rpdj4nOwogICAgICAgIGlmKHAuem9uZTIpaCs9JzxkaXYgY2xhc3M9InByb2Mtem9uZSIgc3R5bGU9ImJvcmRlci1sZWZ0LWNvbG9yOicrY29sKyciPjxoND5BY3Rpb25zIC8gw4l0YXBlczwvaDQ+PGRpdiBjbGFzcz0icHJvYy16b25lLWNvbnRlbnQiPicrcC56b25lMisnPC9kaXY+PC9kaXY+JzsKICAgICAgICBpZihwLnpvbmUzKWgrPSc8ZGl2IGNsYXNzPSJwcm9jLXpvbmUiIHN0eWxlPSJib3JkZXItbGVmdC1jb2xvcjonK2NvbCsnIj48aDQ+Tm90ZXM8L2g0PjxkaXYgY2xhc3M9InByb2Mtem9uZS1jb250ZW50Ij4nK3Auem9uZTMrJzwvZGl2PjwvZGl2Pic7CiAgICAgICAgaCs9JzwvZGl2PjwvZGl2Pic7CiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Byb2Mtdmlldy1hcmVhJykuaW5uZXJIVE1MPWg7CiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Byb2Mtdmlldy1hcmVhJykuc3R5bGUuZGlzcGxheT0nJzsKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJvYy1saXN0Jykuc3R5bGUuZGlzcGxheT0nbm9uZSc7CiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Byb2MtZmlsdGVycycpLnN0eWxlLmRpc3BsYXk9J25vbmUnOwogICAgfQogICAgZnVuY3Rpb24gcHJpbnRQcm9jKGlkKXsKICAgICAgICB2YXIgcD0oYXBwRGF0YS5wcm9jZWR1cmVzfHxbXSkuZmluZChmdW5jdGlvbih4KXtyZXR1cm4geC5pZD09PWlkO30pO2lmKCFwKXJldHVybjsKICAgICAgICB2YXIgY29sPWdldFByb2NDb2xvcihwLmNvZGUpOwogICAgICAgIC8vIExpZ2h0ZW4gY29sb3IgZm9yIHpvbmUgYmcKICAgICAgICBmdW5jdGlvbiBoZXhUb1JnYmEoaGV4LGEpewogICAgICAgICAgICB2YXIgcj1wYXJzZUludChoZXguc2xpY2UoMSwzKSwxNiksZz1wYXJzZUludChoZXguc2xpY2UoMyw1KSwxNiksYj1wYXJzZUludChoZXguc2xpY2UoNSw3KSwxNik7CiAgICAgICAgICAgIHJldHVybidyZ2JhKCcrcisnLCcrZysnLCcrYisnLCcrYSsnKSc7CiAgICAgICAgfQogICAgICAgIHZhciBsaWdodENvbD1oZXhUb1JnYmEoY29sLDAuMik7CiAgICAgICAgdmFyIGxvZ29TcmM9KGFwcERhdGEuc2V0dGluZ3MmJmFwcERhdGEuc2V0dGluZ3MubG9nbyl8fCcnOwogICAgICAgIHZhciB0b2RheT1uZXcgRGF0ZSgpLnRvTG9jYWxlRGF0ZVN0cmluZygnZnItRlInLHtkYXk6JzItZGlnaXQnLG1vbnRoOidsb25nJyx5ZWFyOidudW1lcmljJ30pOwogICAgICAgIHZhciB1c2VyTmFtZT0oYXBwRGF0YS5zZXR0aW5ncyYmYXBwRGF0YS5zZXR0aW5ncy51c2VyKXx8Jyc7CiAgICAgICAgdmFyIGh0bWw9Jyc7CiAgICAgICAgaHRtbCs9JzxzdHlsZT5AcGFnZXtzaXplOkE0O21hcmdpbjo1bW0gNW1tIDI1bW0gNW1tfWJvZHl7bWFyZ2luOjA7cGFkZGluZzowfTwvc3R5bGU+JzsKICAgICAgICBodG1sKz0nPGRpdiBzdHlsZT0iZm9udC1mYW1pbHk6QXJpYWwsc2Fucy1zZXJpZjtwYWRkaW5nLWJvdHRvbToyNW1tIj4nOwogICAgICAgIGh0bWwrPSc8ZGl2IHN0eWxlPSJiYWNrZ3JvdW5kOicrY29sKyc7Y29sb3I6I2ZmZjtwYWRkaW5nOjEwcHggMTRweDstd2Via2l0LXByaW50LWNvbG9yLWFkanVzdDpleGFjdDtwcmludC1jb2xvci1hZGp1c3Q6ZXhhY3Q7dGV4dC1hbGlnbjpyaWdodCI+JzsKICAgICAgICBodG1sKz0nPGgxIHN0eWxlPSJtYXJnaW46MDtmb250LXNpemU6MS4zcmVtO2ZvbnQtd2VpZ2h0OjcwMCI+JytwLmNvZGUrJyAtICcrcC50aXRsZSsnPC9oMT4nOwogICAgICAgIGh0bWwrPSc8L2Rpdj4nOwogICAgICAgIGh0bWwrPSc8ZGl2IHN0eWxlPSJwYWRkaW5nOjhweCAxMHB4O2NvbG9yOiMzMzMiPic7CiAgICAgICAgaWYocC56b25lMil7CiAgICAgICAgaHRtbCs9JzxkaXYgc3R5bGU9Im1hcmdpbjo4cHggMDtwYWRkaW5nOjAiPic7CiAgICAgICAgaHRtbCs9JzxkaXYgc3R5bGU9ImJhY2tncm91bmQ6JytsaWdodENvbCsnO3BhZGRpbmc6OHB4IDE0cHg7Zm9udC13ZWlnaHQ6NzAwO2ZvbnQtc2l6ZTouODVyZW07Y29sb3I6IzMzMzt0ZXh0LXRyYW5zZm9ybTp1cHBlcmNhc2U7bGV0dGVyLXNwYWNpbmc6LjVweDtib3JkZXItcmFkaXVzOjZweCA2cHggMCAwOy13ZWJraXQtcHJpbnQtY29sb3ItYWRqdXN0OmV4YWN0O3ByaW50LWNvbG9yLWFkanVzdDpleGFjdCI+QWN0aW9ucyAvIMOJdGFwZXM8L2Rpdj4nOwogICAgICAgIGh0bWwrPSc8ZGl2IHN0eWxlPSJwYWRkaW5nOjhweCAxNHB4O2ZvbnQtc2l6ZTouOXJlbTtsaW5lLWhlaWdodDoxLjY1O2NvbG9yOiM0NDQ7Ym9yZGVyLWxlZnQ6NHB4IHNvbGlkICcrY29sKyciPicrcC56b25lMisnPC9kaXY+PC9kaXY+Jzt9CiAgICAgICAgaWYocC56b25lMyl7CiAgICAgICAgaHRtbCs9JzxkaXYgc3R5bGU9Im1hcmdpbjo4cHggMDtwYWRkaW5nOjAiPic7CiAgICAgICAgaHRtbCs9JzxkaXYgc3R5bGU9ImJhY2tncm91bmQ6JytsaWdodENvbCsnO3BhZGRpbmc6OHB4IDE0cHg7Zm9udC13ZWlnaHQ6NzAwO2ZvbnQtc2l6ZTouODVyZW07Y29sb3I6IzMzMzt0ZXh0LXRyYW5zZm9ybTp1cHBlcmNhc2U7bGV0dGVyLXNwYWNpbmc6LjVweDtib3JkZXItcmFkaXVzOjZweCA2cHggMCAwOy13ZWJraXQtcHJpbnQtY29sb3ItYWRqdXN0OmV4YWN0O3ByaW50LWNvbG9yLWFkanVzdDpleGFjdCI+Tm90ZXMgLyBSZW1hcnF1ZXM8L2Rpdj4nOwogICAgICAgIGh0bWwrPSc8ZGl2IHN0eWxlPSJwYWRkaW5nOjhweCAxNHB4O2ZvbnQtc2l6ZTouOXJlbTtsaW5lLWhlaWdodDoxLjY1O2NvbG9yOiM0NDQ7Ym9yZGVyLWxlZnQ6NHB4IHNvbGlkICcrY29sKyciPicrcC56b25lMysnPC9kaXY+PC9kaXY+Jzt9CiAgICAgICAgaHRtbCs9JzwvZGl2PjwvZGl2Pic7CiAgICAgICAgaHRtbCs9JzxkaXYgc3R5bGU9InBvc2l0aW9uOmZpeGVkO2JvdHRvbTowO2xlZnQ6MDtyaWdodDowO2Rpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXI7anVzdGlmeS1jb250ZW50OnNwYWNlLWJldHdlZW47cGFkZGluZzo2cHggMTBweDtib3JkZXItdG9wOjJweCBzb2xpZCAjY2NjO2ZvbnQtZmFtaWx5OkFyaWFsLHNhbnMtc2VyaWY7LXdlYmtpdC1wcmludC1jb2xvci1hZGp1c3Q6ZXhhY3Q7cHJpbnQtY29sb3ItYWRqdXN0OmV4YWN0O2JhY2tncm91bmQ6I2ZmZiI+JzsKICAgICAgICBpZihsb2dvU3JjKWh0bWwrPSc8aW1nIHNyYz0iJytsb2dvU3JjKyciIHN0eWxlPSJoZWlnaHQ6MWNtIj4nOwogICAgICAgIGh0bWwrPSc8ZGl2IHN0eWxlPSJ0ZXh0LWFsaWduOnJpZ2h0Ij48ZGl2IHN0eWxlPSJmb250LXNpemU6LjhyZW07Zm9udC13ZWlnaHQ6NjAwO2NvbG9yOiM1NTUiPicrcC5jb2RlKycgLSAnK3AudGl0bGUrJzwvZGl2Pic7CiAgICAgICAgaHRtbCs9JzxkaXYgc3R5bGU9ImZvbnQtc2l6ZTouNjJyZW07Y29sb3I6Izk5OSI+JysodXNlck5hbWU/dXNlck5hbWUrJyAtICc6JycpK3RvZGF5Kyc8L2Rpdj48L2Rpdj4nOwogICAgICAgIGh0bWwrPSc8L2Rpdj4nOwogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcmludC16b25lJykuaW5uZXJIVE1MPWh0bWw7CiAgICAgICAgdmFyIG9sZFRpdGxlPWRvY3VtZW50LnRpdGxlO2RvY3VtZW50LnRpdGxlPXAuY29kZSsnIC0gJytwLnRpdGxlOwogICAgICAgIHRyeXt3aW5kb3cucGFyZW50LmRvY3VtZW50LnRpdGxlPXAuY29kZSsnIC0gJytwLnRpdGxlO31jYXRjaChlKXt9CiAgICAgICAgd2FpdEZvckltYWdlc1RoZW5QcmludCgpOwogICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtkb2N1bWVudC50aXRsZT1vbGRUaXRsZTt0cnl7d2luZG93LnBhcmVudC5kb2N1bWVudC50aXRsZT0nUElMT1RFIFx1MjAxNCBTdWl0ZSBkZSBEaXJlY3Rpb24nO31jYXRjaChlKXt9fSwzMDAwKTsKICAgIH0KICAgIC8vIOKVkOKVkOKVkCBTw4lQQVJBVEVVUlMg4pWQ4pWQ4pWQCiAgICBmdW5jdGlvbiBsb2FkU2VwQ29uZmlnKCl7CiAgICAgICAgdmFyIGJveD1kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2VwLWNvbmZpZycpO2lmKCFib3gpcmV0dXJuOwogICAgICAgIHZhciBpdGVtcz1kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcubWVudS1pdGVtW2RhdGEtbWVudV0nKTsKICAgICAgICB2YXIgc2Vwcz0oYXBwRGF0YS5zZXR0aW5ncyYmYXBwRGF0YS5zZXR0aW5ncy5zZXBhcmF0b3JzKXx8W107CiAgICAgICAgdmFyIGg9Jyc7CiAgICAgICAgaXRlbXMuZm9yRWFjaChmdW5jdGlvbihpdGVtKXt2YXIgbWVudUlkPWl0ZW0uZ2V0QXR0cmlidXRlKCdkYXRhLW1lbnUnKTtpZihtZW51SWQ9PT0nbWVudTEnKXJldHVybjt2YXIgbGFiZWw9aXRlbS50ZXh0Q29udGVudC50cmltKCk7dmFyIGNoZWNrZWQ9c2Vwcy5pbmRleE9mKG1lbnVJZCk+PTA/JyBjaGVja2VkJzonJztoKz0nPGxhYmVsIHN0eWxlPSJmb250LXNpemU6Ljc4cmVtO2Rpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXI7Z2FwOjZweDtjdXJzb3I6cG9pbnRlciI+PGlucHV0IHR5cGU9ImNoZWNrYm94IiB2YWx1ZT0iJyttZW51SWQrJyInK2NoZWNrZWQrJyBvbmNoYW5nZT0ic2F2ZVNlcENvbmZpZygpIj4gJytsYWJlbCsnPC9sYWJlbD4nO30pOwogICAgICAgIGJveC5pbm5lckhUTUw9aDsKICAgIH0KICAgIGZ1bmN0aW9uIHNhdmVTZXBDb25maWcoKXsKICAgICAgICB2YXIgY2hlY2tzPWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJyNzZXAtY29uZmlnIGlucHV0W3R5cGU9Y2hlY2tib3hdOmNoZWNrZWQnKTsKICAgICAgICB2YXIgc2Vwcz1bXTtjaGVja3MuZm9yRWFjaChmdW5jdGlvbihjKXtzZXBzLnB1c2goYy52YWx1ZSk7fSk7CiAgICAgICAgaWYoIWFwcERhdGEuc2V0dGluZ3MpYXBwRGF0YS5zZXR0aW5ncz17fTthcHBEYXRhLnNldHRpbmdzLnNlcGFyYXRvcnM9c2VwcztzYXZlRGF0YSgpO2FwcGx5U2VwYXJhdG9ycygpOwogICAgfQogICAgZnVuY3Rpb24gYXBwbHlTZXBhcmF0b3JzKCl7CiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLm1lbnUtc2VwYXJhdG9yJykuZm9yRWFjaChmdW5jdGlvbihzKXtzLnJlbW92ZSgpO30pOwogICAgICAgIHZhciBzZXBzPShhcHBEYXRhLnNldHRpbmdzJiZhcHBEYXRhLnNldHRpbmdzLnNlcGFyYXRvcnMpfHxbXTsKICAgICAgICBzZXBzLmZvckVhY2goZnVuY3Rpb24obWVudUlkKXt2YXIgaXRlbT1kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubWVudS1pdGVtW2RhdGEtbWVudT0iJyttZW51SWQrJyJdJyk7aWYoaXRlbSYmaXRlbS5uZXh0RWxlbWVudFNpYmxpbmcpe3ZhciBzZXA9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7c2VwLmNsYXNzTmFtZT0nbWVudS1zZXBhcmF0b3InO2l0ZW0ucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoc2VwLGl0ZW0ubmV4dEVsZW1lbnRTaWJsaW5nKTt9fSk7CiAgICB9CiAgICAvLyBFeHBvc2UgcHJvYyBmdW5jdGlvbnMgdG8gZ2xvYmFsIHNjb3BlIChJSUZFIGNsb3N1cmUpCiAgICAKICAgIC8vIFZpZXcgcHJvY2VkdXJlIGZyb20gR2FudHQgKHJlYWQtb25seSBwb3B1cCkKICAgIGZ1bmN0aW9uIHZpZXdQcm9jUmVhZG9ubHkoY29kZSkgewogICAgICAgIGlmKCFjb2RlKSByZXR1cm47CiAgICAgICAgLy8gUmVtb3ZlIGV4aXN0aW5nIHBvcHVwCiAgICAgICAgdmFyIG9sZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcm9jLXJvLXBvcHVwJyk7CiAgICAgICAgaWYob2xkKSBvbGQucmVtb3ZlKCk7CiAgICAgICAgLy8gU2VhcmNoIGluIHByb2NlZHVyZXMgZmlyc3QsIHRoZW4gZmFsbCBiYWNrIHRvIGdhbnR0IGl0ZW0KICAgICAgICB2YXIgcHJvY3MgPSBhcHBEYXRhLnByb2NlZHVyZXMgfHwgW107CiAgICAgICAgdmFyIHByb2MgPSBwcm9jcy5maW5kKGZ1bmN0aW9uKHgpeyByZXR1cm4geC5jb2RlICYmIHguY29kZS50cmltKCkudG9VcHBlckNhc2UoKSA9PT0gY29kZS50cmltKCkudG9VcHBlckNhc2UoKTsgfSk7CiAgICAgICAgdmFyIGdhbnR0SXRlbSA9IChhcHBEYXRhLmdhbnR0fHxbXSkuZmluZChmdW5jdGlvbih4KXsgcmV0dXJuIHguY29kZSAmJiB4LmNvZGUudHJpbSgpLnRvVXBwZXJDYXNlKCkgPT09IGNvZGUudHJpbSgpLnRvVXBwZXJDYXNlKCk7IH0pOwogICAgICAgIGlmKCFwcm9jICYmICFnYW50dEl0ZW0pIHsgYWxlcnQoJ0F1Y3VuZSBwcm9jw6lkdXJlIHRyb3V2w6llIGF2ZWMgbGUgY29kZSAiJyArIGNvZGUgKyAnIicpOyByZXR1cm47IH0KICAgICAgICAvLyBVc2UgcHJvY2VkdXJlIGRhdGEgaWYgYXZhaWxhYmxlLCBvdGhlcndpc2UgYnVpbGQgZnJvbSBnYW50dAogICAgICAgIHZhciB0aXRsZSA9IHByb2MgPyBwcm9jLnRpdGxlIDogKGdhbnR0SXRlbSA/IGdhbnR0SXRlbS5uYW1lIDogJycpOwogICAgICAgIHZhciBwQ29kZSA9IHByb2MgPyBwcm9jLmNvZGUgOiBjb2RlOwogICAgICAgIHZhciBjYXQgPSBwcm9jID8gcHJvYy5jYXQgOiAoZ2FudHRJdGVtID8gZ2FudHRJdGVtLmNhdCA6ICcnKTsKICAgICAgICAKICAgICAgICB2YXIgejIgPSBwcm9jID8gKHByb2Muem9uZTJ8fCcnKSA6ICcnOwogICAgICAgIHZhciB6MyA9IHByb2MgPyAocHJvYy56b25lM3x8JycpIDogKGdhbnR0SXRlbSAmJiBnYW50dEl0ZW0ubm90ZXMgPyBnYW50dEl0ZW0ubm90ZXMgOiAnJyk7CiAgICAgICAgdmFyIHBJZCA9IHByb2MgPyBwcm9jLmlkIDogbnVsbDsKICAgICAgICB2YXIgYmcgPSAodHlwZW9mIGdldFByb2NDb2xvcj09PSdmdW5jdGlvbicpID8gZ2V0UHJvY0NvbG9yKHBDb2RlKSA6ICcjMmMzZTUwJzsKICAgICAgICAvLyBCdWlsZCBwb3B1cAogICAgICAgIHZhciBoID0gJzxkaXYgc3R5bGU9InBvc2l0aW9uOmZpeGVkO3RvcDowO2xlZnQ6MDt3aWR0aDoxMDAlO2hlaWdodDoxMDAlO2JhY2tncm91bmQ6cmdiYSgwLDAsMCwuNSk7ei1pbmRleDo5OTk5O2Rpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXI7anVzdGlmeS1jb250ZW50OmNlbnRlciIgb25jbGljaz0iaWYoZXZlbnQudGFyZ2V0PT09dGhpcyl0aGlzLnJlbW92ZSgpIiBpZD0icHJvYy1yby1wb3B1cCI+JzsKICAgICAgICBoICs9ICc8ZGl2IHN0eWxlPSJiYWNrZ3JvdW5kOiNmZmY7Ym9yZGVyLXJhZGl1czoxNHB4O3dpZHRoOjgwdnc7bWF4LWhlaWdodDo4NXZoO292ZXJmbG93LXk6YXV0bztib3gtc2hhZG93OjAgMjBweCA2MHB4IHJnYmEoMCwwLDAsLjI1KSI+JzsKICAgICAgICBoICs9ICc8ZGl2IHN0eWxlPSJiYWNrZ3JvdW5kOicrYmcrJztjb2xvcjojZmZmO3BhZGRpbmc6MThweCAyMnB4O2JvcmRlci1yYWRpdXM6MTRweCAxNHB4IDAgMDtkaXNwbGF5OmZsZXg7YWxpZ24taXRlbXM6Y2VudGVyO2p1c3RpZnktY29udGVudDpzcGFjZS1iZXR3ZWVuIj4nOwogICAgICAgIGggKz0gJzxkaXY+PHNwYW4gc3R5bGU9ImZvbnQtc2l6ZToxLjFyZW07Zm9udC13ZWlnaHQ6NzAwO29wYWNpdHk6Ljk7YmFja2dyb3VuZDpyZ2JhKDI1NSwyNTUsMjU1LC4yKTtwYWRkaW5nOjRweCAxMnB4O2JvcmRlci1yYWRpdXM6NnB4O21hcmdpbi1yaWdodDoxMnB4Ij4nK3BDb2RlKyc8L3NwYW4+JzsKICAgICAgICBoICs9ICc8c3BhbiBzdHlsZT0iZm9udC1zaXplOjEuMXJlbTtmb250LXdlaWdodDo3MDAiPicrdGl0bGUrJzwvc3Bhbj48L2Rpdj4nOwogICAgICAgIGggKz0gJzxidXR0b24gb25jbGljaz0iZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXHgyN3Byb2Mtcm8tcG9wdXBceDI3KS5yZW1vdmUoKSIgc3R5bGU9ImJhY2tncm91bmQ6cmdiYSgyNTUsMjU1LDI1NSwuMik7Ym9yZGVyOm5vbmU7Y29sb3I6I2ZmZjt3aWR0aDozMnB4O2hlaWdodDozMnB4O2JvcmRlci1yYWRpdXM6NTAlO2N1cnNvcjpwb2ludGVyO2ZvbnQtc2l6ZToxLjFyZW0iPiZ0aW1lczs8L2J1dHRvbj4nOwogICAgICAgIGggKz0gJzwvZGl2Pic7CiAgICAgICAgaWYoY2F0KSBoICs9ICc8ZGl2IHN0eWxlPSJwYWRkaW5nOjEwcHggMjJweCAwO2ZvbnQtc2l6ZTouNzhyZW07Y29sb3I6Izg4OCI+Q2F0w6lnb3JpZSA6IDxzdHJvbmc+JytjYXQrJzwvc3Ryb25nPjwvZGl2Pic7CiAgICAgICAgaWYoIXByb2MpIGggKz0gJzxkaXYgc3R5bGU9InBhZGRpbmc6MTBweCAyMnB4IDA7Zm9udC1zaXplOi43OHJlbTtjb2xvcjojZTY3ZTIyIj48aSBjbGFzcz0iZmFzIGZhLWluZm8tY2lyY2xlIj48L2k+IEF1Y3VuZSBmaWNoZSBwcm9jw6lkdXJlIGFzc29jacOpZSDigJQgY3LDqWV6LWxhIGRhbnMgbGUgc291cy1tZW51IFByb2PDqWR1cmVzIGF2ZWMgbGUgY29kZSA8c3Ryb25nPicrcENvZGUrJzwvc3Ryb25nPjwvZGl2Pic7CiAgICAgICAgdmFyIHpvbmVzID0gWwogICAgICAgICAgICB7bGFiZWw6J0FjdGlvbnMgLyDDiXRhcGVzJywgaWNvbjoncHJvYy1pY29uLWFsZXJ0JywgY29udGVudDp6Mn0sCiAgICAgICAgICAgIHtsYWJlbDonTm90ZXMgLyBSZW1hcnF1ZXMnLCBpY29uOidwcm9jLWljb24taWRlYScsIGNvbnRlbnQ6ejN9CiAgICAgICAgXTsKICAgICAgICB2YXIgaGFzQ29udGVudCA9IHoyfHx6MzsKICAgICAgICBoICs9ICc8ZGl2IHN0eWxlPSJwYWRkaW5nOjE2cHggMjJweCI+JzsKICAgICAgICBpZihoYXNDb250ZW50KSB7CiAgICAgICAgICAgIHpvbmVzLmZvckVhY2goZnVuY3Rpb24oeil7CiAgICAgICAgICAgICAgICBpZih6LmNvbnRlbnQpIHsKICAgICAgICAgICAgICAgICAgICBoICs9ICc8ZGl2IHN0eWxlPSJib3JkZXItbGVmdDozcHggc29saWQgI2RkZDtwYWRkaW5nOjEwcHggMTRweDttYXJnaW46MTJweCAwO2JhY2tncm91bmQ6I2ZhZmFmYTtib3JkZXItcmFkaXVzOjAgOHB4IDhweCAwIj4nOwogICAgICAgICAgICAgICAgICAgIGggKz0gJzxoNCBzdHlsZT0iZm9udC1zaXplOi43OHJlbTtmb250LXdlaWdodDo2MDA7Y29sb3I6Izk5OTttYXJnaW46MCAwIDZweDt0ZXh0LXRyYW5zZm9ybTp1cHBlcmNhc2U7bGV0dGVyLXNwYWNpbmc6LjVweCI+PHNwYW4gY2xhc3M9Iicrei5pY29uKyciIHN0eWxlPSJtYXJnaW4tcmlnaHQ6NnB4Ij48L3NwYW4+Jyt6LmxhYmVsKyc8L2g0Pic7CiAgICAgICAgICAgICAgICAgICAgaCArPSAnPGRpdiBzdHlsZT0iZm9udC1zaXplOi44NXJlbTtsaW5lLWhlaWdodDoxLjU7Y29sb3I6IzQ0NCI+Jyt6LmNvbnRlbnQrJzwvZGl2Pic7CiAgICAgICAgICAgICAgICAgICAgaCArPSAnPC9kaXY+JzsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgaCArPSAnPGRpdiBzdHlsZT0idGV4dC1hbGlnbjpjZW50ZXI7cGFkZGluZzozMHB4O2NvbG9yOiNiYmIiPjxpIGNsYXNzPSJmYXMgZmEtZmlsZS1hbHQiIHN0eWxlPSJmb250LXNpemU6MnJlbTtkaXNwbGF5OmJsb2NrO21hcmdpbi1ib3R0b206OHB4Ij48L2k+QXVjdW4gY29udGVudSByZW5zZWlnbsOpPC9kaXY+JzsKICAgICAgICB9CiAgICAgICAgaCArPSAnPC9kaXY+JzsKICAgICAgICBoICs9ICc8ZGl2IHN0eWxlPSJwYWRkaW5nOjEycHggMjJweCAxOHB4O3RleHQtYWxpZ246cmlnaHQ7Ym9yZGVyLXRvcDoxcHggc29saWQgI2VlZSI+JzsKICAgICAgICBoICs9ICc8YnV0dG9uIG9uY2xpY2s9ImRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFx4Mjdwcm9jLXJvLXBvcHVwXHgyNykucmVtb3ZlKCkiIHN0eWxlPSJwYWRkaW5nOjhweCAyMHB4O2JvcmRlcjoxcHggc29saWQgI2RkZDtib3JkZXItcmFkaXVzOjhweDtiYWNrZ3JvdW5kOiNmZmY7Y3Vyc29yOnBvaW50ZXI7bWFyZ2luLXJpZ2h0OjhweDtmb250LXNpemU6Ljg1cmVtIj5GZXJtZXI8L2J1dHRvbj4nOwogICAgICAgIGlmKHBJZCkgaCArPSAnPGJ1dHRvbiBvbmNsaWNrPSJkb2N1bWVudC5nZXRFbGVtZW50QnlJZChceDI3cHJvYy1yby1wb3B1cFx4MjcpLnJlbW92ZSgpO3N3aXRjaE1lbnUoXHgyN21lbnUxMlx4MjcpO3NldFRpbWVvdXQoZnVuY3Rpb24oKXt2aWV3UHJvYyhceDI3JytwSWQrJ1x4MjcpfSwyMDApIiBzdHlsZT0icGFkZGluZzo4cHggMjBweDtib3JkZXI6bm9uZTtib3JkZXItcmFkaXVzOjhweDtiYWNrZ3JvdW5kOnZhcigtLWhlYWRlciwjMmMzZTUwKTtjb2xvcjojZmZmO2N1cnNvcjpwb2ludGVyO2ZvbnQtc2l6ZTouODVyZW0iPjxpIGNsYXNzPSJmYXMgZmEtZWRpdCI+PC9pPiBPdXZyaXIgZGFucyBQcm9jw6lkdXJlczwvYnV0dG9uPic7CiAgICAgICAgaCArPSAnPC9kaXY+PC9kaXY+PC9kaXY+JzsKICAgICAgICBkb2N1bWVudC5ib2R5Lmluc2VydEFkamFjZW50SFRNTCgnYmVmb3JlZW5kJywgaCk7CiAgICB9CgogICAgCiAgICB2YXIgX1BST0NfQ0FUX01BUCA9IFsKICAgICAgICB7cHJlZml4OidQTycsIGNhdDonUG9ydGVzIE91dmVydGVzJ30sCiAgICAgICAge3ByZWZpeDonUkgnLCBjYXQ6J1Jlc3NvdXJjZXMgSHVtYWluZXMnfSwKICAgICAgICB7cHJlZml4OidBJywgY2F0OidBZG1pbmlzdHJhdGlmJ30sCiAgICAgICAge3ByZWZpeDonQicsIGNhdDonw4lsw6h2ZXMgQkVQJ30sCiAgICAgICAge3ByZWZpeDonQycsIGNhdDonQ29uY2VydGF0aW9ucyd9LAogICAgICAgIHtwcmVmaXg6J0QnLCBjYXQ6J0Rpc3Bvc2l0aWZzIFDDqWRhZ29naXF1ZXMnfSwKICAgICAgICB7cHJlZml4OidFJywgY2F0OidTdWl2aSBkZXMgw6lsw6h2ZXMnfSwKICAgICAgICB7cHJlZml4OidJJywgY2F0OidJbnRlcnZlbmFudHMnfSwKICAgICAgICB7cHJlZml4OidOJywgY2F0OidOdW3DqXJpcXVlJ30sCiAgICAgICAge3ByZWZpeDonTycsIGNhdDonT3JpZW50YXRpb24nfSwKICAgICAgICB7cHJlZml4OidQJywgY2F0OidQcm9qZXRzJ30sCiAgICAgICAge3ByZWZpeDonUycsIGNhdDonU8OpY3VyaXTDqSd9CiAgICBdOwogICAgZnVuY3Rpb24gYXV0b1Byb2NDYXQoY29kZSkgewogICAgICAgIGlmKCFjb2RlKSByZXR1cm47CiAgICAgICAgdmFyIGMgPSBjb2RlLnRyaW0oKS50b1VwcGVyQ2FzZSgpOwogICAgICAgIHZhciBzZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJvYy1jYXQnKTsKICAgICAgICBmb3IodmFyIGk9MDtpPF9QUk9DX0NBVF9NQVAubGVuZ3RoO2krKyl7CiAgICAgICAgICAgIGlmKGMuaW5kZXhPZihfUFJPQ19DQVRfTUFQW2ldLnByZWZpeCk9PT0wKXsKICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIG9wdGlvbiBleGlzdHMKICAgICAgICAgICAgICAgIHZhciBmb3VuZD1mYWxzZTsKICAgICAgICAgICAgICAgIGZvcih2YXIgaj0wO2o8c2VsLm9wdGlvbnMubGVuZ3RoO2orKyl7aWYoc2VsLm9wdGlvbnNbal0udmFsdWU9PT1fUFJPQ19DQVRfTUFQW2ldLmNhdCl7Zm91bmQ9dHJ1ZTticmVhazt9fQogICAgICAgICAgICAgICAgaWYoZm91bmQpIHNlbC52YWx1ZT1fUFJPQ19DQVRfTUFQW2ldLmNhdDsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KCiAgICAKICAgIAogICAgZnVuY3Rpb24gcHJpbnRHYW50dCgpewogICAgICAgIHZhciBzdz1wcm9tcHQoJ1NlbWFpbmUgZGUgZMOpYnV0IChleDogMzYpOicsJzM2Jyk7aWYoIXN3KXJldHVybjtzdz1wYXJzZUludChzdyk7CiAgICAgICAgdmFyIGV3PXByb21wdCgnU2VtYWluZSBkZSBmaW4gKGV4OiAyNik6JywnMjYnKTtpZighZXcpcmV0dXJuO2V3PXBhcnNlSW50KGV3KTsKICAgICAgICBpZighc3d8fCFldylyZXR1cm47CiAgICAgICAgLy8gQnVpbGQgd2VlayBsaXN0CiAgICAgICAgdmFyIHdlZWtzPVtdOwogICAgICAgIGlmKHN3PmV3KXtmb3IodmFyIHc9c3c7dzw9NTM7dysrKXdlZWtzLnB1c2godyk7Zm9yKHZhciB3PTE7dzw9ZXc7dysrKXdlZWtzLnB1c2godyk7fQogICAgICAgIGVsc2V7Zm9yKHZhciB3PXN3O3c8PWV3O3crKyl3ZWVrcy5wdXNoKHcpO30KICAgICAgICB2YXIgcHJvY3M9KGFwcERhdGEucHJvY2VkdXJlc3x8W10pLmZpbHRlcihmdW5jdGlvbihwKXtyZXR1cm4gcC53c3RhcnQ7fSk7CiAgICAgICAgcHJvY3Muc29ydChmdW5jdGlvbihhLGIpewogICAgICAgICAgICB2YXIgaWE9d2Vla3MuaW5kZXhPZihhLndzdGFydCksaWI9d2Vla3MuaW5kZXhPZihiLndzdGFydCk7CiAgICAgICAgICAgIGlmKGlhPDApaWE9OTk5O2lmKGliPDApaWI9OTk5OwogICAgICAgICAgICBpZihpYSE9PWliKXJldHVybiBpYS1pYjsKICAgICAgICAgICAgdmFyIG5hPXBhcnNlSW50KChhLmNvZGV8fCcnKS5yZXBsYWNlKC9bXjAtOV0vZywnJykpfHwwOwogICAgICAgICAgICB2YXIgbmI9cGFyc2VJbnQoKGIuY29kZXx8JycpLnJlcGxhY2UoL1teMC05XS9nLCcnKSl8fDA7CiAgICAgICAgICAgIHJldHVybiBuYS1uYjsKICAgICAgICB9KTsKICAgICAgICB2YXIgdnc9Z2V0VlcoKTsKICAgICAgICB2YXIgbW9zPVtdLGNtPScnO3dlZWtzLmZvckVhY2goZnVuY3Rpb24odyl7dmFyIG1sPXdrTW8odyk7aWYobWwhPT1jbSl7bW9zLnB1c2goe246bWwsczoxfSk7Y209bWw7fWVsc2UgbW9zW21vcy5sZW5ndGgtMV0ucysrO30pOwogICAgICAgIHZhciBjdz1jdXJXKCk7CiAgICAgICAgdmFyIGg9JzxzdHlsZT5AcGFnZXtzaXplOkEzIGxhbmRzY2FwZTttYXJnaW46NW1tfWJvZHl7Zm9udC1mYW1pbHk6QXJpYWwsc2Fucy1zZXJpZjttYXJnaW46MH10YWJsZXtib3JkZXItY29sbGFwc2U6Y29sbGFwc2U7d2lkdGg6MTAwJTtmb250LXNpemU6LjU1cmVtfXRoLHRke2JvcmRlcjoxcHggc29saWQgI2NjYztwYWRkaW5nOjJweCAzcHg7dGV4dC1hbGlnbjpjZW50ZXJ9dGh7YmFja2dyb3VuZDojZjVmNWY1O2ZvbnQtd2VpZ2h0OjYwMH0uZ3QtY3d7YmFja2dyb3VuZDojZmZmM2NkIWltcG9ydGFudH0uZ3QtdmF7YmFja2dyb3VuZDojZjhmOGY4fS5iYXJ7cG9zaXRpb246YWJzb2x1dGU7aW5zZXQ6MnB4IDFweDtib3JkZXItcmFkaXVzOjJweDstd2Via2l0LXByaW50LWNvbG9yLWFkanVzdDpleGFjdDtwcmludC1jb2xvci1hZGp1c3Q6ZXhhY3R9Lmxhe3RleHQtYWxpZ246bGVmdDtmb250LXNpemU6LjZyZW07d2hpdGUtc3BhY2U6bm93cmFwO21heC13aWR0aDoyMDBweDtvdmVyZmxvdzpoaWRkZW47dGV4dC1vdmVyZmxvdzplbGxpcHNpc30uZnR7ZGlzcGxheTpmbGV4O2FsaWduLWl0ZW1zOmNlbnRlcjtqdXN0aWZ5LWNvbnRlbnQ6c3BhY2UtYmV0d2VlbjtwYWRkaW5nOjRweCAxMHB4O21hcmdpbi10b3A6OHB4O2ZvbnQtc2l6ZTouNnJlbTtjb2xvcjojOTk5fTwvc3R5bGU+JzsKICAgICAgICBoKz0nPHRhYmxlPjx0aGVhZD48dHI+PHRoIHJvd3NwYW49IjIiIHN0eWxlPSJtaW4td2lkdGg6MTYwcHg7dGV4dC1hbGlnbjpsZWZ0Ij5Qcm9jw6lkdXJlPC90aD4nOwogICAgICAgIG1vcy5mb3JFYWNoKGZ1bmN0aW9uKG0pe2grPSc8dGggY29sc3Bhbj0iJyttLnMrJyI+JyttLm4rJzwvdGg+Jzt9KTsKICAgICAgICBoKz0nPC90cj48dHI+JzsKICAgICAgICB3ZWVrcy5mb3JFYWNoKGZ1bmN0aW9uKHcpewogICAgICAgICAgICB2YXIgY2xzPScnO2lmKHc9PT1jdyljbHM9J2d0LWN3JztlbHNlIGlmKHZ3LmluZGV4T2Yodyk+PTApY2xzPSdndC12YSc7CiAgICAgICAgICAgIGgrPSc8dGgnKyhjbHM/JyBjbGFzcz0iJytjbHMrJyInOicnKSsnPicrdysnPC90aD4nOwogICAgICAgIH0pOwogICAgICAgIGgrPSc8L3RyPjwvdGhlYWQ+PHRib2R5Pic7CiAgICAgICAgcHJvY3MuZm9yRWFjaChmdW5jdGlvbihnKXsKICAgICAgICAgICAgdmFyIGNvbD1nZXRQcm9jQ29sb3IoZy5jb2RlKTsKICAgICAgICAgICAgaCs9Jzx0cj48dGQgY2xhc3M9ImxhIj4nK2cuY29kZSsnIC0gJysoZy50aXRsZXx8JycpKyc8L3RkPic7CiAgICAgICAgICAgIHdlZWtzLmZvckVhY2goZnVuY3Rpb24odyl7CiAgICAgICAgICAgICAgICB2YXIgdmFjPXZ3LmluZGV4T2Yodyk+PTAsaXI9d0luUih3LGcud3N0YXJ0LGcud2VuZCk7CiAgICAgICAgICAgICAgICBoKz0nPHRkJysodmFjPycgY2xhc3M9Imd0LXZhIic6JycpKycgc3R5bGU9InBvc2l0aW9uOnJlbGF0aXZlO2hlaWdodDoxNHB4Ij4nOwogICAgICAgICAgICAgICAgaWYoaXIpaCs9JzxkaXYgY2xhc3M9ImJhciIgc3R5bGU9ImJhY2tncm91bmQ6Jytjb2wrJyI+PC9kaXY+JzsKICAgICAgICAgICAgICAgIGgrPSc8L3RkPic7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBoKz0nPC90cj4nOwogICAgICAgIH0pOwogICAgICAgIGgrPSc8L3Rib2R5PjwvdGFibGU+JzsKICAgICAgICB2YXIgbG9nb1NyYz0oYXBwRGF0YS5zZXR0aW5ncyYmYXBwRGF0YS5zZXR0aW5ncy5sb2dvKXx8Jyc7CiAgICAgICAgdmFyIHRvZGF5PW5ldyBEYXRlKCkudG9Mb2NhbGVEYXRlU3RyaW5nKCdmci1GUicse2RheTonMi1kaWdpdCcsbW9udGg6J2xvbmcnLHllYXI6J251bWVyaWMnfSk7CiAgICAgICAgaCs9JzxkaXYgY2xhc3M9ImZ0Ij4nOwogICAgICAgIGlmKGxvZ29TcmMpaCs9JzxpbWcgc3JjPSInK2xvZ29TcmMrJyIgc3R5bGU9ImhlaWdodDoxY20iPic7CiAgICAgICAgaCs9JzxzcGFuPicrdG9kYXkrJzwvc3Bhbj48L2Rpdj4nOwogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcmludC16b25lJykuaW5uZXJIVE1MPWg7CiAgICAgICAgd2FpdEZvckltYWdlc1RoZW5QcmludCgpOwogICAgfQoKICAgIGZ1bmN0aW9uIHRvZ2dsZVByb2NEb25lKGlkKXsKICAgICAgICB2YXIgc3k9Z2V0Q3VycmVudFNjaG9vbFllYXIoKTsKICAgICAgICB2YXIgcDI9KGFwcERhdGEucHJvY2VkdXJlc3x8W10pLmZpbmQoZnVuY3Rpb24oeCl7cmV0dXJuIHguaWQ9PT1pZDt9KTsKICAgICAgICBpZihwMil7cDIuZG9uZT0hcDIuZG9uZTtwMi5kb25lU1k9cDIuZG9uZT9zeTonJztzYXZlRGF0YSgpO3JlbmRlckdhbnR0KCk7cmV0dXJuO30KICAgICAgICB2YXIgZz0oYXBwRGF0YS5nYW50dHx8W10pLmZpbmQoZnVuY3Rpb24oeCl7cmV0dXJuIHguaWQ9PT1pZDt9KTsKICAgICAgICBpZihnKXtnLmRvbmU9IWcuZG9uZTtnLmRvbmVTWT1nLmRvbmU/c3k6Jyc7c2F2ZURhdGEoKTtyZW5kZXJHYW50dCgpO30KICAgIH0KCiAgICB3aW5kb3cub3BlblByb2NNb2RhbCA9IG9wZW5Qcm9jTW9kYWw7CiAgICB3aW5kb3cuY2xvc2VQcm9jTW9kYWwgPSBjbG9zZVByb2NNb2RhbDsKICAgIHdpbmRvdy5zYXZlUHJvYyA9IHNhdmVQcm9jOwogICAgd2luZG93LmRlbFByb2MgPSBkZWxQcm9jOwogICAgd2luZG93LnJlbmRlclByb2NlZHVyZXMgPSByZW5kZXJQcm9jZWR1cmVzOwogICAgd2luZG93LnZpZXdQcm9jID0gdmlld1Byb2M7CiAgICB3aW5kb3cucHJpbnRQcm9jID0gcHJpbnRQcm9jOwogICAgd2luZG93LnByb2NJbnNlcnRJY29uID0gcHJvY0luc2VydEljb247CiAgICB3aW5kb3cubG9hZFNlcENvbmZpZyA9IGxvYWRTZXBDb25maWc7CiAgICB3aW5kb3cuc2F2ZVNlcENvbmZpZyA9IHNhdmVTZXBDb25maWc7CiAgICB3aW5kb3cuYXBwbHlTZXBhcmF0b3JzID0gYXBwbHlTZXBhcmF0b3JzOwogICAgd2luZG93LnZpZXdQcm9jUmVhZG9ubHkgPSB2aWV3UHJvY1JlYWRvbmx5OwogICAgd2luZG93LnRvZ2dsZVByb2NEb25lID0gdG9nZ2xlUHJvY0RvbmU7CiAgICB3aW5kb3cucHJpbnRHYW50dCA9IHByaW50R2FudHQ7CiAgICAKICAgIGZ1bmN0aW9uIHJ0ZUltZ1Jlc2l6ZShzaXplKXsKICAgICAgICB2YXIgc2VsPXdpbmRvdy5nZXRTZWxlY3Rpb24oKTtpZighc2VsLnJhbmdlQ291bnQpcmV0dXJuOwogICAgICAgIHZhciBub2RlPXNlbC5hbmNob3JOb2RlOwogICAgICAgIC8vIEZpbmQgbmVhcmVzdCBpbWcKICAgICAgICB2YXIgZWw9bm9kZTt3aGlsZShlbCYmZWwudGFnTmFtZSE9PSdJTUcnKXtpZihlbC5jaGlsZE5vZGVzKXtmb3IodmFyIGk9MDtpPGVsLmNoaWxkTm9kZXMubGVuZ3RoO2krKyl7aWYoZWwuY2hpbGROb2Rlc1tpXS50YWdOYW1lPT09J0lNRycpe2VsPWVsLmNoaWxkTm9kZXNbaV07YnJlYWs7fX19aWYoZWwudGFnTmFtZSE9PSdJTUcnKWVsPWVsLnBhcmVudE5vZGU7fQogICAgICAgIGlmKCFlbHx8ZWwudGFnTmFtZSE9PSdJTUcnKXsKICAgICAgICAgICAgLy8gVHJ5IHRvIGZpbmQgYW55IHNlbGVjdGVkIGltZwogICAgICAgICAgICB2YXIgaW1ncz1zZWwuYW5jaG9yTm9kZS5wYXJlbnROb2RlLnF1ZXJ5U2VsZWN0b3JBbGwoJ2ltZycpOwogICAgICAgICAgICBpZihpbWdzLmxlbmd0aD09PTEpZWw9aW1nc1swXTsKICAgICAgICAgICAgZWxzZXthbGVydCgnU8OpbGVjdGlvbm5leiB1bmUgaW1hZ2UgZFwnYWJvcmQnKTtyZXR1cm47fQogICAgICAgIH0KICAgICAgICB2YXIgc2l6ZXM9eydzbWFsbCc6JzI1JScsJ21lZGl1bSc6JzUwJScsJ2xhcmdlJzonNzUlJywnZnVsbCc6JzEwMCUnfTsKICAgICAgICBlbC5zdHlsZS53aWR0aD1zaXplc1tzaXplXXx8JzUwJSc7ZWwuc3R5bGUuaGVpZ2h0PSdhdXRvJzsKICAgIH0KICAgIHdpbmRvdy5ydGVJbWdSZXNpemUgPSBydGVJbWdSZXNpemU7CiAgICBmdW5jdGlvbiBleHBvcnREYXRhKCl7CiAgICAgICAgdmFyIGpzb249SlNPTi5zdHJpbmdpZnkoYXBwRGF0YSxudWxsLDIpOwogICAgICAgIHZhciBibG9iPW5ldyBCbG9iKFtqc29uXSx7dHlwZTonYXBwbGljYXRpb24vanNvbid9KTsKICAgICAgICB2YXIgdXJsPVVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7CiAgICAgICAgdmFyIGE9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpOwogICAgICAgIHZhciBkPW5ldyBEYXRlKCk7CiAgICAgICAgdmFyIGZuYW1lPSdDQURJUl9iYWNrdXBfJytkLmdldEZ1bGxZZWFyKCkrJy0nK1N0cmluZyhkLmdldE1vbnRoKCkrMSkucGFkU3RhcnQoMiwnMCcpKyctJytTdHJpbmcoZC5nZXREYXRlKCkpLnBhZFN0YXJ0KDIsJzAnKSsnXycrU3RyaW5nKGQuZ2V0SG91cnMoKSkucGFkU3RhcnQoMiwnMCcpKydoJytTdHJpbmcoZC5nZXRNaW51dGVzKCkpLnBhZFN0YXJ0KDIsJzAnKSsnLmpzb24nOwogICAgICAgIGEuaHJlZj11cmw7YS5kb3dubG9hZD1mbmFtZTthLmNsaWNrKCk7VVJMLnJldm9rZU9iamVjdFVSTCh1cmwpOwogICAgICAgIHZhciBlbD1kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbGFzdC1leHBvcnQnKTsKICAgICAgICBpZihlbCllbC50ZXh0Q29udGVudD0nRGVybmllciBleHBvcnQgOiAnK2QudG9Mb2NhbGVTdHJpbmcoJ2ZyLUZSJyk7CiAgICAgICAgYXBwRGF0YS5zZXR0aW5ncy5sYXN0RXhwb3J0PWQudG9JU09TdHJpbmcoKTtzYXZlRGF0YSgpOwogICAgfQogICAgZnVuY3Rpb24gaW1wb3J0RGF0YShpbnB1dCl7CiAgICAgICAgaWYoIWlucHV0LmZpbGVzfHwhaW5wdXQuZmlsZXNbMF0pcmV0dXJuOwogICAgICAgIGlmKCFjb25maXJtKCfimqDvuI8gSW1wb3J0ZXIgdmEgUkVNUExBQ0VSIHRvdXRlcyB2b3MgZG9ubsOpZXMgYWN0dWVsbGVzLlxuXG5Wb3VsZXotdm91cyBjb250aW51ZXIgPycpKXJldHVybjsKICAgICAgICB2YXIgcmVhZGVyPW5ldyBGaWxlUmVhZGVyKCk7CiAgICAgICAgcmVhZGVyLm9ubG9hZD1mdW5jdGlvbihlKXsKICAgICAgICAgICAgdHJ5ewogICAgICAgICAgICAgICAgdmFyIGRhdGE9SlNPTi5wYXJzZShlLnRhcmdldC5yZXN1bHQpOwogICAgICAgICAgICAgICAgaWYoIWRhdGEuc2V0dGluZ3Mpe2FsZXJ0KCdGaWNoaWVyIGludmFsaWRlIDogcGFzIGRlIHNlY3Rpb24gc2V0dGluZ3MnKTtyZXR1cm47fQogICAgICAgICAgICAgICAgLy8gTWVyZ2UgaW50byBhcHBEYXRhCiAgICAgICAgICAgICAgICBPYmplY3Qua2V5cyhkYXRhKS5mb3JFYWNoKGZ1bmN0aW9uKGspe2FwcERhdGFba109ZGF0YVtrXTt9KTsKICAgICAgICAgICAgICAgIHNhdmVEYXRhKCk7CiAgICAgICAgICAgICAgICBhbGVydCgn4pyFIEltcG9ydCByw6l1c3NpICEgTGEgcGFnZSB2YSBzZSByZWNoYXJnZXIuJyk7CiAgICAgICAgICAgICAgICBsb2NhdGlvbi5yZWxvYWQoKTsKICAgICAgICAgICAgfWNhdGNoKGVycil7CiAgICAgICAgICAgICAgICBhbGVydCgnRXJyZXVyIGRlIGxlY3R1cmUgOiAnK2Vyci5tZXNzYWdlKTsKICAgICAgICAgICAgfQogICAgICAgIH07CiAgICAgICAgcmVhZGVyLnJlYWRBc1RleHQoaW5wdXQuZmlsZXNbMF0pOwogICAgICAgIGlucHV0LnZhbHVlPScnOwogICAgfQogICAgd2luZG93LmV4cG9ydERhdGEgPSBleHBvcnREYXRhOwogICAgd2luZG93LmltcG9ydERhdGEgPSBpbXBvcnREYXRhOwoKICAgIHZhciBfZXZDbGFzc2VzPVtdOwogICAgZnVuY3Rpb24gYnVpbGRDbGFzc1NlbGVjdCgpewogICAgICAgIHZhciBzZWw9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2V2LWNsYXNzZScpO2lmKCFzZWwpcmV0dXJuOwogICAgICAgIHZhciBjbGFzc2VzPXt9OwogICAgICAgIChhcHBEYXRhLnN0dWRlbnRzfHxbXSkuZm9yRWFjaChmdW5jdGlvbihzKXt2YXIgYz1zLkNsYXNzZXx8cy5jbGFzc2U7aWYoYyljbGFzc2VzW2NdPTE7fSk7CiAgICAgICAgdmFyIGg9JzxvcHRpb24gdmFsdWU9IiI+LS0gQ2hvaXNpciBvdSBzYWlzaXIgLS08L29wdGlvbj4nOwogICAgICAgIE9iamVjdC5rZXlzKGNsYXNzZXMpLnNvcnQoKS5mb3JFYWNoKGZ1bmN0aW9uKGMpe2grPSc8b3B0aW9uIHZhbHVlPSInK2MrJyI+JytjKyc8L29wdGlvbj4nO30pOwogICAgICAgIGgrPSc8b3B0aW9uIHZhbHVlPSJfX2N1c3RvbSI+XHUyNzBGIFNhaXNpci4uLjwvb3B0aW9uPic7CiAgICAgICAgc2VsLmlubmVySFRNTD1oOwogICAgfQogICAgZnVuY3Rpb24gYWRkRXZDbGFzc2UoKXsKICAgICAgICB2YXIgc2VsPWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdldi1jbGFzc2UnKTsKICAgICAgICB2YXIgdj1zZWwudmFsdWU7CiAgICAgICAgaWYodj09PSdfX2N1c3RvbScpe3Y9cHJvbXB0KCdDbGFzc2UgOicpO2lmKCF2KXJldHVybjt9CiAgICAgICAgaWYoIXYpcmV0dXJuOwogICAgICAgIGlmKF9ldkNsYXNzZXMuaW5kZXhPZih2KTwwKV9ldkNsYXNzZXMucHVzaCh2KTsKICAgICAgICByZW5kZXJFdkNsYXNzZXMoKTsKICAgIH0KICAgIGZ1bmN0aW9uIHJlbW92ZUV2Q2xhc3NlKGMpe19ldkNsYXNzZXM9X2V2Q2xhc3Nlcy5maWx0ZXIoZnVuY3Rpb24oeCl7cmV0dXJuIHghPT1jO30pO3JlbmRlckV2Q2xhc3NlcygpO30KICAgIGZ1bmN0aW9uIHJlbmRlckV2Q2xhc3NlcygpewogICAgICAgIHZhciBoPScnO19ldkNsYXNzZXMuZm9yRWFjaChmdW5jdGlvbihjKXsKICAgICAgICAgICAgaCs9JzxzcGFuIHN0eWxlPSJiYWNrZ3JvdW5kOiNlMGU3ZmY7Y29sb3I6IzM3MzBhMztwYWRkaW5nOjNweCA4cHg7Ym9yZGVyLXJhZGl1czoxMnB4O2ZvbnQtc2l6ZTouNzVyZW07ZGlzcGxheTppbmxpbmUtZmxleDthbGlnbi1pdGVtczpjZW50ZXI7Z2FwOjRweCI+JytjKycgPHNwYW4gc3R5bGU9ImN1cnNvcjpwb2ludGVyO2ZvbnQtd2VpZ2h0OjcwMCIgb25jbGljaz0id2luZG93LnJlbW92ZUV2Q2xhc3NlKFwnJytjKydcJykiPlx1MDBENzwvc3Bhbj48L3NwYW4+JzsKICAgICAgICB9KTsKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZXYtY2xhc3Nlcy1saXN0JykuaW5uZXJIVE1MPWg7CiAgICB9CiAgICB3aW5kb3cuYWRkRXZDbGFzc2UgPSBhZGRFdkNsYXNzZTsKICAgIHdpbmRvdy5yZW1vdmVFdkNsYXNzZSA9IHJlbW92ZUV2Q2xhc3NlOwogICAgd2luZG93LmJ1aWxkQ2xhc3NTZWxlY3QgPSBidWlsZENsYXNzU2VsZWN0OwogICAgd2luZG93LnNhdmVFdmVudCA9IHR5cGVvZiBzYXZlRXZlbnQhPT0ndW5kZWZpbmVkJz9zYXZlRXZlbnQ6ZnVuY3Rpb24oKXt9OwogICAgd2luZG93LmNsb3NlRXZNb2RhbCA9IHR5cGVvZiBjbG9zZUV2TW9kYWwhPT0ndW5kZWZpbmVkJz9jbG9zZUV2TW9kYWw6ZnVuY3Rpb24oKXt9OwogICAgd2luZG93LmRlbEV2RnJvbU1vZGFsID0gdHlwZW9mIGRlbEV2RnJvbU1vZGFsIT09J3VuZGVmaW5lZCc/ZGVsRXZGcm9tTW9kYWw6ZnVuY3Rpb24oKXt9OwogICAgd2luZG93Lm9wZW5Fdk1vZGFsID0gdHlwZW9mIG9wZW5Fdk1vZGFsIT09J3VuZGVmaW5lZCc/b3BlbkV2TW9kYWw6ZnVuY3Rpb24oKXt9OwoKCiAgICB3aW5kb3cuYXV0b1Byb2NDYXQgPSBhdXRvUHJvY0NhdDsKICAgIHdpbmRvdy5hdXRvUmVzZXREb25lID0gYXV0b1Jlc2V0RG9uZTsKICAgIHdpbmRvdy5nZXRDdXJyZW50U2Nob29sWWVhciA9IGdldEN1cnJlbnRTY2hvb2xZZWFyOwogICAgd2luZG93LnNhdmVHdCA9IHNhdmVHdDsKICAgIHdpbmRvdy5vcGVuR3RNb2RhbCA9IG9wZW5HdE1vZGFsOwogICAgd2luZG93LmNsb3NlR3RNb2RhbCA9IGNsb3NlR3RNb2RhbDsKICAgIHdpbmRvdy5kZWxHdEZyb21Nb2RhbCA9IGRlbEd0RnJvbU1vZGFsOwogICAgd2luZG93LnRvZ2dsZUd0RG9uZSA9IHRvZ2dsZUd0RG9uZTsKICAgIHdpbmRvdy5yZW5kZXJHYW50dCA9IHJlbmRlckdhbnR0OwogICAgd2luZG93Lmd0UHJldiA9IGd0UHJldjsKICAgIHdpbmRvdy5ndE5leHQgPSBndE5leHQ7CiAgICB3aW5kb3cuZ3RUb2RheSA9IGd0VG9kYXk7CiAgICB3aW5kb3cuZ3RZZWFyID0gZ3RZZWFyOwogICAgd2luZG93LmZpbGxUZWFjaGVyU2VsID0gZmlsbFRlYWNoZXJTZWw7CgoKICAgIAovLyBBdXRvLXJlc2V0IGF1IGTDqW1hcnJhZ2UKZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZ1bmN0aW9uKCl7CiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7IGlmKHR5cGVvZiBhdXRvUmVzZXREb25lPT09J2Z1bmN0aW9uJykgYXV0b1Jlc2V0RG9uZSgpOyB9LCA1MDApOwogICAgc2V0VGltZW91dChmdW5jdGlvbigpeyBpZih0eXBlb2YgcmVzdG9yZUZpbGVIYW5kbGU9PT0nZnVuY3Rpb24nKSByZXN0b3JlRmlsZUhhbmRsZSgpOyB9LCAzMDApOwp9KTsKCgogICAgCiAgICAKICAgID4=",
  "exam": "PCFET0NUWVBFIGh0bWw+CjxodG1sIGxhbmc9ImZyIj4KPGhlYWQ+CiAgICA8bWV0YSBjaGFyc2V0PSJVVEYtOCI+CiAgICA8bWV0YSBuYW1lPSJ2aWV3cG9ydCIgY29udGVudD0id2lkdGg9ZGV2aWNlLXdpZHRoLCBpbml0aWFsLXNjYWxlPTEuMCI+CiAgICA8dGl0bGU+RVhBTSBQSUxPVEUgLSBPcmdhbmlzYXRpb24gZGVzIMOJcHJldXZlczwvdGl0bGU+CiAgICAKICAgIDxzY3JpcHQgc3JjPSJodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy94bHN4LzAuMTguNS94bHN4LmZ1bGwubWluLmpzIj48L3NjcmlwdD4KICAgIDxzY3JpcHQgc3JjPSJodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9mb250LWF3ZXNvbWUvNi40LjAvY3NzL2FsbC5taW4uY3NzIj48L3NjcmlwdD4KICAgIAogICAgPGxpbmsgaHJlZj0iaHR0cHM6Ly9mb250cy5nb29nbGVhcGlzLmNvbS9jc3MyP2ZhbWlseT1Sb2JvdG86d2dodEAzMDA7NDAwOzUwMDs3MDA7OTAwJmRpc3BsYXk9c3dhcCIgcmVsPSJzdHlsZXNoZWV0Ij4KCiAgICA8c3R5bGU+CiAgICAgICAgOnJvb3QgewogICAgICAgICAgICAtLXByaW1hcnktY29sb3I6ICNjMDM5MmI7IAogICAgICAgICAgICAtLXNlY29uZGFyeS1jb2xvcjogI2U3NGMzYzsKICAgICAgICAgICAgLS1hY2NlbnQtY29sb3I6ICNmMzljMTI7CiAgICAgICAgICAgIC0tYmctY29sb3I6ICNmNGY2Zjg7CiAgICAgICAgICAgIC0tdGV4dC1jb2xvcjogIzJjM2U1MDsKICAgICAgICAgICAgLS1zaWRlYmFyLXdpZHRoOiAyODBweDsKICAgICAgICAgICAgLS10b29sYmFyLWhlaWdodDogNjBweDsKICAgICAgICB9CgogICAgICAgIGJvZHkgeyBmb250LWZhbWlseTogJ1JvYm90bycsIHNhbnMtc2VyaWY7IGJhY2tncm91bmQtY29sb3I6IHZhcigtLWJnLWNvbG9yKTsgbWFyZ2luOiAwOyBwYWRkaW5nOiAwOyBkaXNwbGF5OiBmbGV4OyBoZWlnaHQ6IDEwMHZoOyBjb2xvcjogdmFyKC0tdGV4dC1jb2xvcik7IG92ZXJmbG93OiBoaWRkZW47IH0KCiAgICAgICAgLyogU0lERUJBUiAqLwogICAgICAgIC5zaWRlYmFyIHsgd2lkdGg6IHZhcigtLXNpZGViYXItd2lkdGgpOyBiYWNrZ3JvdW5kLWNvbG9yOiAjMmMzZTUwOyBjb2xvcjogd2hpdGU7IGRpc3BsYXk6IGZsZXg7IGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47IGJveC1zaGFkb3c6IDJweCAwIDVweCByZ2JhKDAsMCwwLDAuMSk7IGZsZXgtc2hyaW5rOiAwOyB6LWluZGV4OiAxMDA7IH0KICAgICAgICAuYnJhbmQgeyBwYWRkaW5nOiAxNXB4OyB0ZXh0LWFsaWduOiBjZW50ZXI7IGJhY2tncm91bmQtY29sb3I6ICMxYTI1MmY7IGJvcmRlci1ib3R0b206IDNweCBzb2xpZCB2YXIoLS1wcmltYXJ5LWNvbG9yKTsgfQogICAgICAgIC5icmFuZCBoMSB7IG1hcmdpbjogMDsgZm9udC1zaXplOiAxLjNyZW07IGZvbnQtd2VpZ2h0OiA5MDA7IGxldHRlci1zcGFjaW5nOiAxcHg7IH0KICAgICAgICAuc3RlcHMtbmF2IHsgZmxleDogMTsgcGFkZGluZzogNXB4IDA7IG92ZXJmbG93LXk6IGF1dG87IH0KICAgICAgICAuc3RlcC1idG4geyBkaXNwbGF5OiBmbGV4OyBhbGlnbi1pdGVtczogY2VudGVyOyBwYWRkaW5nOiAxMHB4IDE1cHg7IGNvbG9yOiAjZWNmMGYxOyB0ZXh0LWRlY29yYXRpb246IG5vbmU7IHRyYW5zaXRpb246IGFsbCAwLjJzOyBib3JkZXItbGVmdDogNHB4IHNvbGlkIHRyYW5zcGFyZW50OyBjdXJzb3I6IHBvaW50ZXI7IGZvbnQtc2l6ZTogMC44NXJlbTsgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkIHJnYmEoMjU1LDI1NSwyNTUsMC4wMyk7IH0KICAgICAgICAuc3RlcC1idG46aG92ZXIsIC5zdGVwLWJ0bi5hY3RpdmUgeyBiYWNrZ3JvdW5kLWNvbG9yOiAjMzQ0OTVlOyBib3JkZXItbGVmdC1jb2xvcjogdmFyKC0tcHJpbWFyeS1jb2xvcik7IHBhZGRpbmctbGVmdDogMjBweDsgfQogICAgICAgIC5zdGVwLWJ0biBpIHsgbWFyZ2luLXJpZ2h0OiAxMnB4OyB3aWR0aDogMThweDsgdGV4dC1hbGlnbjogY2VudGVyOyBjb2xvcjogI2JkYzNjNzsgfQogICAgICAgIC5zdGVwLWJ0bi5hY3RpdmUgaSB7IGNvbG9yOiB2YXIoLS1wcmltYXJ5LWNvbG9yKTsgfQogICAgICAgIC5mb290ZXItaW5mbyB7IHBhZGRpbmc6IDEwcHg7IGZvbnQtc2l6ZTogMC42NXJlbTsgdGV4dC1hbGlnbjogY2VudGVyOyBvcGFjaXR5OiAwLjU7IGJhY2tncm91bmQ6ICMxYTI1MmY7IGJvcmRlci10b3A6IDFweCBzb2xpZCAjMzQ0OTVlOyB9CgogICAgICAgIC8qIE1BSU4gKi8KICAgICAgICAubWFpbi13cmFwcGVyIHsgZmxleDogMTsgZGlzcGxheTogZmxleDsgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsgb3ZlcmZsb3c6IGhpZGRlbjsgfQogICAgICAgIC5nbG9iYWwtdG9vbGJhciB7IGhlaWdodDogdmFyKC0tdG9vbGJhci1oZWlnaHQpOyBiYWNrZ3JvdW5kOiB3aGl0ZTsgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICNkZGQ7IGRpc3BsYXk6IGZsZXg7IGFsaWduLWl0ZW1zOiBjZW50ZXI7IGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjsgcGFkZGluZzogMCAzMHB4OyBib3gtc2hhZG93OiAwIDJweCA1cHggcmdiYSgwLDAsMCwwLjA1KTsgei1pbmRleDogNTA7IH0KICAgICAgICAudG9vbGJhci10aXRsZSB7IGZvbnQtd2VpZ2h0OiBib2xkOyBmb250LXNpemU6IDEuMXJlbTsgY29sb3I6ICM3ZjhjOGQ7IGRpc3BsYXk6IGZsZXg7IGFsaWduLWl0ZW1zOiBjZW50ZXI7IGdhcDogMTBweDsgfQogICAgICAgIC50b29sYmFyLWFjdGlvbnMgeyBkaXNwbGF5OiBmbGV4OyBnYXA6IDEwcHg7IH0KICAgICAgICAuYnRuLXRvb2xiYXIgeyBwYWRkaW5nOiA4cHggMTVweDsgYm9yZGVyOiBub25lOyBib3JkZXItcmFkaXVzOiA0cHg7IGN1cnNvcjogcG9pbnRlcjsgZm9udC1zaXplOiAwLjlyZW07IGZvbnQtd2VpZ2h0OiA1MDA7IGRpc3BsYXk6IGZsZXg7IGFsaWduLWl0ZW1zOiBjZW50ZXI7IGdhcDogOHB4OyB0cmFuc2l0aW9uOiAwLjJzOyB9CiAgICAgICAgLmJ0bi1zYXZlLXByb2plY3QgeyBiYWNrZ3JvdW5kLWNvbG9yOiAjMjdhZTYwOyBjb2xvcjogd2hpdGU7IH0gCiAgICAgICAgLmJ0bi1sb2FkLXByb2plY3QgeyBiYWNrZ3JvdW5kLWNvbG9yOiAjMzQ0OTVlOyBjb2xvcjogd2hpdGU7IH0KICAgICAgICAubWFpbi1jb250ZW50IHsgZmxleDogMTsgb3ZlcmZsb3cteTogYXV0bzsgcGFkZGluZzogMjBweDsgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tYmctY29sb3IpOyB9CgogICAgICAgIC8qIFVJIEVMRU1FTlRTICovCiAgICAgICAgLmhlYWRlci1wYW5lbCB7IGRpc3BsYXk6IGZsZXg7IGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjsgYWxpZ24taXRlbXM6IGNlbnRlcjsgbWFyZ2luLWJvdHRvbTogMTVweDsgYm9yZGVyLWJvdHRvbTogMnB4IHNvbGlkICNlMGUwZTA7IHBhZGRpbmctYm90dG9tOiAxMHB4OyB9CiAgICAgICAgLmhlYWRlci1wYW5lbCBoMiB7IG1hcmdpbjogMDsgZm9udC1zaXplOiAxLjZyZW07IGNvbG9yOiB2YXIoLS1wcmltYXJ5LWNvbG9yKTsgfQogICAgICAgIC5zZWN0aW9uLXZpZXcgeyBkaXNwbGF5OiBub25lOyBhbmltYXRpb246IGZhZGVJbiAwLjNzIGVhc2U7IH0KICAgICAgICAuc2VjdGlvbi12aWV3LmFjdGl2ZSB7IGRpc3BsYXk6IGJsb2NrOyB9CiAgICAgICAgLmNhcmQgeyBiYWNrZ3JvdW5kOiB3aGl0ZTsgYm9yZGVyLXJhZGl1czogOHB4OyBwYWRkaW5nOiAyMHB4OyBib3gtc2hhZG93OiAwIDJweCAxMHB4IHJnYmEoMCwwLDAsMC4wNSk7IG1hcmdpbi1ib3R0b206IDIwcHg7IH0KCiAgICAgICAgLyogSU1QT1JUICovCiAgICAgICAgLmltcG9ydC1ncmlkIHsgZGlzcGxheTogZ3JpZDsgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiByZXBlYXQoMiwgMWZyKTsgZ2FwOiAyMHB4OyB9CiAgICAgICAgLmZpbGUtZHJvcC16b25lIHsgYm9yZGVyOiAycHggZGFzaGVkICNiZGMzYzc7IGJvcmRlci1yYWRpdXM6IDhweDsgcGFkZGluZzogMjBweDsgdGV4dC1hbGlnbjogY2VudGVyOyB0cmFuc2l0aW9uOiAwLjNzOyBwb3NpdGlvbjogcmVsYXRpdmU7IGJhY2tncm91bmQ6ICNmZmY7IG1pbi1oZWlnaHQ6IDEyMHB4OyBkaXNwbGF5OiBmbGV4OyBmbGV4LWRpcmVjdGlvbjogY29sdW1uOyBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsgYWxpZ24taXRlbXM6IGNlbnRlcjsgfQogICAgICAgIC5maWxlLWRyb3Atem9uZTpob3ZlciB7IGJvcmRlci1jb2xvcjogdmFyKC0tcHJpbWFyeS1jb2xvcik7IGJhY2tncm91bmQ6ICNmZGYyZjI7IH0KICAgICAgICAuZmlsZS1kcm9wLXpvbmUubG9hZGVkIHsgYm9yZGVyLWNvbG9yOiAjMjdhZTYwOyBiYWNrZ3JvdW5kOiAjZjBmZmY0OyB9CiAgICAgICAgLmZpbGUtZHJvcC16b25lIGlucHV0W3R5cGU9ZmlsZV0geyBwb3NpdGlvbjogYWJzb2x1dGU7IHRvcDogMDsgbGVmdDogMDsgd2lkdGg6IDEwMCU7IGhlaWdodDogMTAwJTsgb3BhY2l0eTogMDsgY3Vyc29yOiBwb2ludGVyOyB9CiAgICAgICAgLnN0YXR1cy1iYWRnZSB7IGRpc3BsYXk6IG5vbmU7IG1hcmdpbi10b3A6IDEwcHg7IGZvbnQtd2VpZ2h0OiBib2xkOyBmb250LXNpemU6IDAuOXJlbTsgcGFkZGluZzogNXB4IDEwcHg7IGJvcmRlci1yYWRpdXM6IDE1cHg7IH0KICAgICAgICAuc3RhdHVzLW9rIHsgYmFja2dyb3VuZDogIzI3YWU2MDsgY29sb3I6IHdoaXRlOyB9CgogICAgICAgIC8qIENPTkZJRyAqLwogICAgICAgIC5jb25maWctY29udGFpbmVyIHsgZGlzcGxheTogZmxleDsgZ2FwOiA0MHB4OyB9CiAgICAgICAgLmNvbmZpZy1jb2wgeyBmbGV4OiAxOyBiYWNrZ3JvdW5kOiB3aGl0ZTsgcGFkZGluZzogMzBweDsgYm9yZGVyLXJhZGl1czogOHB4OyBib3gtc2hhZG93OiAwIDJweCAxMHB4IHJnYmEoMCwwLDAsMC4wNSk7IH0KICAgICAgICAuZm9ybS1ncm91cCB7IG1hcmdpbi1ib3R0b206IDIwcHg7IH0KICAgICAgICAuZm9ybS1ncm91cCBsYWJlbCB7IGRpc3BsYXk6IGJsb2NrOyBtYXJnaW4tYm90dG9tOiA4cHg7IGZvbnQtd2VpZ2h0OiBib2xkOyBjb2xvcjogIzM0NDk1ZTsgZm9udC1zaXplOiAxLjFyZW07IH0KICAgICAgICAuZm9ybS1ncm91cCBpbnB1dCB7IHdpZHRoOiAxMDAlOyBwYWRkaW5nOiAxMnB4OyBib3JkZXI6IDFweCBzb2xpZCAjZGRkOyBib3JkZXItcmFkaXVzOiA1cHg7IGZvbnQtc2l6ZTogMXJlbTsgYm94LXNpemluZzogYm9yZGVyLWJveDsgfQogICAgICAgIC5wcmV2aWV3LWJveCB7IHdpZHRoOiAxMDAlOyBoZWlnaHQ6IDE1MHB4OyBib3JkZXI6IDJweCBzb2xpZCAjZWVlOyBkaXNwbGF5OiBmbGV4OyBhbGlnbi1pdGVtczogY2VudGVyOyBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsgbWFyZ2luLXRvcDogMTBweDsgYmFja2dyb3VuZDogI2ZhZmFmYTsgfQogICAgICAgIC5wcmV2aWV3LWJveCBpbWcgeyBtYXgtaGVpZ2h0OiAxMDAlOyBtYXgtd2lkdGg6IDEwMCU7IH0KCiAgICAgICAgLyogUkVQQVJUSVRJT04gKi8KICAgICAgICAuZXhhbS1uYXZpZ2F0aW9uLWJhciB7IGJhY2tncm91bmQ6ICNmZmY7IHBhZGRpbmc6IDE1cHg7IGJvcmRlci1yYWRpdXM6IDhweDsgYm94LXNoYWRvdzogMCAycHggNXB4IHJnYmEoMCwwLDAsMC4wNSk7IGRpc3BsYXk6IGZsZXg7IGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjsgYWxpZ24taXRlbXM6IGNlbnRlcjsgbWFyZ2luLWJvdHRvbTogMjBweDsgYm9yZGVyOiAxcHggc29saWQgI2RkZDsgfQogICAgICAgIC5uYXYtYnRuIHsgYmFja2dyb3VuZDogIzJjM2U1MDsgY29sb3I6IHdoaXRlOyBib3JkZXI6IG5vbmU7IHBhZGRpbmc6IDEwcHggMjBweDsgYm9yZGVyLXJhZGl1czogNXB4OyBjdXJzb3I6IHBvaW50ZXI7IGZvbnQtd2VpZ2h0OiBib2xkOyBkaXNwbGF5OiBmbGV4OyBhbGlnbi1pdGVtczogY2VudGVyOyBnYXA6IDEwcHg7IH0KICAgICAgICAuZXhhbS1zZWxlY3RvciB7IHBhZGRpbmc6IDEwcHg7IGZvbnQtc2l6ZTogMXJlbTsgYm9yZGVyOiAxcHggc29saWQgI2NjYzsgYm9yZGVyLXJhZGl1czogNXB4OyBtaW4td2lkdGg6IDMwMHB4OyB9CiAgICAgICAgCiAgICAgICAgLmV4YW0tc2VjdGlvbi1ibG9jayB7IGJvcmRlcjogMXB4IHNvbGlkICNjY2M7IGJhY2tncm91bmQ6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDhweDsgcGFkZGluZzogMTVweDsgYm94LXNoYWRvdzogMCA0cHggMTBweCByZ2JhKDAsMCwwLDAuMDUpOyB9CiAgICAgICAgLmV4YW0tc2VjdGlvbi1oZWFkZXIgeyBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1wcmltYXJ5LWNvbG9yKTsgY29sb3I6IHdoaXRlOyBwYWRkaW5nOiAxNXB4OyBib3JkZXItcmFkaXVzOiA2cHg7IG1hcmdpbi1ib3R0b206IDE1cHg7IGRpc3BsYXk6IGZsZXg7IGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjsgZm9udC1zaXplOiAxLjJyZW07IGZvbnQtd2VpZ2h0OiBib2xkOyB9CiAgICAgICAgLnN0b3JhZ2Utem9uZSB7IGJhY2tncm91bmQ6ICNlY2YwZjE7IGJvcmRlcjogM3B4IGRhc2hlZCAjYmRjM2M3OyBwYWRkaW5nOiAxMHB4OyBib3JkZXItcmFkaXVzOiA4cHg7IG1pbi1oZWlnaHQ6IDgwcHg7IG1heC1oZWlnaHQ6IDIwMHB4OyBvdmVyZmxvdy15OiBhdXRvOyBkaXNwbGF5OiBmbGV4OyBmbGV4LXdyYXA6IHdyYXA7IGdhcDogMTBweDsgYWxpZ24tY29udGVudDogZmxleC1zdGFydDsgbWFyZ2luLWJvdHRvbTogMjBweDsgfQogICAgICAgIC5yb29tcy1ncmlkIHsgZGlzcGxheTogZ3JpZDsgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiByZXBlYXQoYXV0by1maWxsLCBtaW5tYXgoMzIwcHgsIDFmcikpOyBnYXA6IDI1cHg7IH0KICAgICAgICAucm9vbS1jYXJkIHsgYmFja2dyb3VuZDogd2hpdGU7IGJvcmRlcjogMXB4IHNvbGlkICNkZGQ7IGJvcmRlci1yYWRpdXM6IDhweDsgZGlzcGxheTogZmxleDsgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsgaGVpZ2h0OiA0ODBweDsgYm94LXNoYWRvdzogMCA0cHggNnB4IHJnYmEoMCwwLDAsMC4wNSk7IH0KICAgICAgICAucm9vbS1jYXJkLnJvb20tdHQgeyBib3JkZXI6IDRweCBzb2xpZCB2YXIoLS1hY2NlbnQtY29sb3IpOyBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmY2Y1OyB9CiAgICAgICAgLnJvb20taGVhZGVyIHsgcGFkZGluZzogMTJweDsgYmFja2dyb3VuZDogIzJjM2U1MDsgY29sb3I6IHdoaXRlOyBib3JkZXItcmFkaXVzOiA2cHggNnB4IDAgMDsgZm9udC13ZWlnaHQ6IGJvbGQ7IGRpc3BsYXk6IGZsZXg7IGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjsgYWxpZ24taXRlbXM6IGNlbnRlcjsgZm9udC1zaXplOiAxcmVtOyB9CiAgICAgICAgLnJvb20tdHQgLnJvb20taGVhZGVyIHsgYmFja2dyb3VuZDogdmFyKC0tYWNjZW50LWNvbG9yKTsgY29sb3I6ICMyYzNlNTA7IH0KICAgICAgICAKICAgICAgICAvKiBTVVJWRUlMTEFOVFMgQUpVU1RFTUVOVFMgKi8KICAgICAgICAucm9vbS1zdXJ2ZWlsbGFudHMtYXJlYSB7IHBhZGRpbmc6IDEwcHg7IGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjZWVlOyBiYWNrZ3JvdW5kOiAjZjhmOWZhOyBtYXgtaGVpZ2h0OiAxMjBweDsgb3ZlcmZsb3cteTogYXV0bzsgfQogICAgICAgIC5zdXJ2ZWlsbGFudC1yb3cgeyBkaXNwbGF5OiBmbGV4OyBnYXA6IDVweDsgbWFyZ2luLWJvdHRvbTogNXB4OyBhbGlnbi1pdGVtczogY2VudGVyOyB9CiAgICAgICAgLnN1cnZlaWxsYW50LXJvdyBzZWxlY3QgeyBmbGV4OiAxOyBwYWRkaW5nOiA1cHg7IGJvcmRlcjogMXB4IHNvbGlkICNjY2M7IGJvcmRlci1yYWRpdXM6IDRweDsgZm9udC1zaXplOiAwLjg1cmVtOyBtYXgtd2lkdGg6IDU1JTsgfQogICAgICAgIC5zdXJ2ZWlsbGFudC1yb3cgaW5wdXQudGltZS1pbnB1dCB7IGZsZXg6IDE7IHBhZGRpbmc6IDVweDsgYm9yZGVyOiAxcHggc29saWQgI2NjYzsgYm9yZGVyLXJhZGl1czogNHB4OyBmb250LXNpemU6IDAuOHJlbTsgd2lkdGg6IDgwcHg7IHRleHQtYWxpZ246IGNlbnRlcjsgfQogICAgICAgIC5idG4tZGVsLXN1cnYgeyBiYWNrZ3JvdW5kOiAjZTc0YzNjOyBjb2xvcjogd2hpdGU7IGJvcmRlcjpub25lOyBib3JkZXItcmFkaXVzOjRweDsgY3Vyc29yOnBvaW50ZXI7IHBhZGRpbmc6IDVweCA4cHg7IGZvbnQtc2l6ZTowLjdyZW07fQoKICAgICAgICAuYnRuLWFkZC1zdXJ2IHsgYmFja2dyb3VuZDogIzI3YWU2MDsgY29sb3I6IHdoaXRlOyBib3JkZXI6IG5vbmU7IGJvcmRlci1yYWRpdXM6IDAgMCA0cHggNHB4OyBjdXJzb3I6IHBvaW50ZXI7IHdpZHRoOiAxMDAlOyBwYWRkaW5nOiA2cHg7IGZvbnQtc2l6ZTogMC44cmVtOyB9CiAgICAgICAgLnJvb20tYm9keSB7IGZsZXg6IDE7IHBhZGRpbmc6IDEwcHg7IG92ZXJmbG93LXk6IGF1dG87IGJhY2tncm91bmQtY29sb3I6ICNmZmY7IH0KICAgICAgICAuc3R1ZGVudC1pdGVtIHsgYmFja2dyb3VuZDogd2hpdGU7IGJvcmRlcjogMXB4IHNvbGlkICNlMGUwZTA7IHBhZGRpbmc6IDZweCAxMHB4OyBtYXJnaW4tYm90dG9tOiA1cHg7IGJvcmRlci1yYWRpdXM6IDRweDsgY3Vyc29yOiBncmFiOyBmb250LXNpemU6IDAuOHJlbTsgZGlzcGxheTogZmxleDsganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOyBhbGlnbi1pdGVtczogY2VudGVyOyBib3gtc2hhZG93OiAwIDFweCAycHggcmdiYSgwLDAsMCwwLjAzKTsgfQogICAgICAgIC5zdHVkZW50LWl0ZW0uaXMtdHQgeyBib3JkZXItbGVmdDogNXB4IHNvbGlkIHZhcigtLWFjY2VudC1jb2xvcik7IGJhY2tncm91bmQ6ICNmZmZjZjA7IGZvbnQtd2VpZ2h0OmJvbGQ7IH0KCiAgICAgICAgLyogQ09NTU9OICovCiAgICAgICAgLmNvbnRyb2xzLWJhciB7IGRpc3BsYXk6IGZsZXg7IGdhcDogMTVweDsgbWFyZ2luLWJvdHRvbTogMjBweDsgYWxpZ24taXRlbXM6IGNlbnRlcjsgYmFja2dyb3VuZDogd2hpdGU7IHBhZGRpbmc6IDE1cHg7IGJvcmRlci1yYWRpdXM6IDhweDsgYm94LXNoYWRvdzogMCAycHggNXB4IHJnYmEoMCwwLDAsMC4wNSk7IGZsZXgtd3JhcDogd3JhcDt9CiAgICAgICAgLmFjdGlvbi1idG4geyBwYWRkaW5nOiAxMHB4IDE1cHg7IGJvcmRlcjogbm9uZTsgYm9yZGVyLXJhZGl1czogNXB4OyBjdXJzb3I6IHBvaW50ZXI7IGZvbnQtd2VpZ2h0OiBib2xkOyBjb2xvcjogd2hpdGU7IGRpc3BsYXk6IGZsZXg7IGFsaWduLWl0ZW1zOiBjZW50ZXI7IGdhcDogOHB4OyB9CiAgICAgICAgLmJ0bi1jYWxjIHsgYmFja2dyb3VuZDogdmFyKC0tYWNjZW50LWNvbG9yKTsgY29sb3I6ICMzMzM7IH0KICAgICAgICAuYnRuLXByaW50IHsgYmFja2dyb3VuZDogIzJjM2U1MDsgfQogICAgICAgIC5sYXlvdXQtc2V0dGluZ3MgeyBiYWNrZ3JvdW5kOiAjZjFmMmY2OyBib3JkZXI6IDFweCBzb2xpZCAjY2NjOyBwYWRkaW5nOiAxMHB4OyBib3JkZXItcmFkaXVzOiA1cHg7IGRpc3BsYXk6IGZsZXg7IGdhcDogMTVweDsgYWxpZ24taXRlbXM6IGNlbnRlcjsgZm9udC1zaXplOiAwLjg1cmVtOyBtYXJnaW4tdG9wOiAxMHB4OyB3aWR0aDogMTAwJTsgfQogICAgICAgIC5sYXlvdXQtc2V0dGluZ3MgaW5wdXQgeyB3aWR0aDogNjBweDsgcGFkZGluZzogM3B4OyBib3JkZXI6IDFweCBzb2xpZCAjY2NjOyBib3JkZXItcmFkaXVzOiAzcHg7IH0KICAgICAgICAuZGF0YS10YWJsZSB7IHdpZHRoOiAxMDAlOyBib3JkZXItY29sbGFwc2U6IGNvbGxhcHNlOyBtYXJnaW4tdG9wOiAxNXB4OyBmb250LXNpemU6IDAuOXJlbTsgYmFja2dyb3VuZDogd2hpdGU7IH0KICAgICAgICAuZGF0YS10YWJsZSB0aCB7IGJhY2tncm91bmQ6ICMyYzNlNTA7IGNvbG9yOiB3aGl0ZTsgcGFkZGluZzogMTJweDsgdGV4dC1hbGlnbjogbGVmdDsgfQogICAgICAgIC5kYXRhLXRhYmxlIHRkIHsgcGFkZGluZzogMTBweDsgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICNlZWU7IH0KICAgICAgICAuYW5vbnltLWJhZGdlIHsgYmFja2dyb3VuZDogIzJjM2U1MDsgY29sb3I6IHdoaXRlOyBwYWRkaW5nOiAzcHggOHB4OyBib3JkZXItcmFkaXVzOiAxMHB4OyBmb250LWZhbWlseTogbW9ub3NwYWNlOyBmb250LXNpemU6IDFyZW07IH0KCiAgICAgICAgLyogUEFQRVIgLSBQcmV2aWV3IE9ubHkgKi8KICAgICAgICAucGFwZXItc2hlZXQgeyBiYWNrZ3JvdW5kOiB3aGl0ZTsgd2lkdGg6IDIxMG1tOyBtaW4taGVpZ2h0OiAyOTdtbTsgcGFkZGluZzogMjBtbTsgYm94LXNoYWRvdzogMCAwIDEwcHggcmdiYSgwLDAsMCwwLjMpOyBib3gtc2l6aW5nOiBib3JkZXItYm94OyBwb3NpdGlvbjogcmVsYXRpdmU7IGZvbnQtZmFtaWx5OiAnVGltZXMgTmV3IFJvbWFuJywgVGltZXMsIHNlcmlmOyBjb2xvcjogIzAwMDsgZGlzcGxheTpmbGV4OyBmbGV4LWRpcmVjdGlvbjpjb2x1bW47IGp1c3RpZnktY29udGVudDogY2VudGVyOyB9IAogICAgICAgIC5jb252b2MtaGVhZGVyLXJvdyB7IGRpc3BsYXk6IGZsZXg7IGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjsgbWFyZ2luLWJvdHRvbTogMzBweDsgfQogICAgICAgIC5jb252b2MtYWRkcmVzcyB7IHdpZHRoOiA1MCU7IGZvbnQtc2l6ZTogMXJlbTsgfQogICAgICAgIC5jb252b2MtYWRkcmVzcyB0ZXh0YXJlYSB7IHdpZHRoOiAxMDAlOyBoZWlnaHQ6IDgwcHg7IGJvcmRlcjogMXB4IGRhc2hlZCAjY2NjOyBmb250LWZhbWlseTogaW5oZXJpdDsgZm9udC1zaXplOiBpbmhlcml0OyByZXNpemU6IG5vbmU7IH0KICAgICAgICAuY29udm9jLWxvZ28geyBtYXgtd2lkdGg6IDE1MHB4OyBtYXgtaGVpZ2h0OiA4MHB4OyB9CiAgICAgICAgLmNvbnZvYy10aXRsZSB7IHRleHQtYWxpZ246IGNlbnRlcjsgZm9udC13ZWlnaHQ6IGJvbGQ7IGZvbnQtc2l6ZTogMS40cmVtOyB0ZXh0LWRlY29yYXRpb246IHVuZGVybGluZTsgbWFyZ2luOiAzMHB4IDA7IH0KICAgICAgICAuY29udm9jLXN0dWRlbnQtaW5mbyB7IG1hcmdpbi1ib3R0b206IDIwcHg7IGZvbnQtc2l6ZTogMS4xcmVtOyBsaW5lLWhlaWdodDogMS42OyB9CiAgICAgICAgLmNvbnZvYy1ib2R5IHsgbWFyZ2luLWJvdHRvbTogMjBweDsgfQogICAgICAgIC5lZGl0YWJsZS10ZXh0IHsgYm9yZGVyOiAxcHggZGFzaGVkICNjY2M7IHBhZGRpbmc6IDVweDsgbWluLWhlaWdodDogMjBweDsgd2hpdGUtc3BhY2U6IHByZS13cmFwOyB9CiAgICAgICAgLmNvbnZvYy10YWJsZSB7IHdpZHRoOiAxMDAlOyBib3JkZXItY29sbGFwc2U6IGNvbGxhcHNlOyBtYXJnaW4tYm90dG9tOiAzMHB4OyB9CiAgICAgICAgLmNvbnZvYy10YWJsZSB0aCwgLmNvbnZvYy10YWJsZSB0ZCB7IGJvcmRlcjogMXB4IHNvbGlkICMwMDA7IHBhZGRpbmc6IDhweDsgdGV4dC1hbGlnbjogY2VudGVyOyB9CiAgICAgICAgLmNvbnZvYy1mb290ZXIgeyBkaXNwbGF5OiBmbGV4OyBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47IGFsaWduLWl0ZW1zOiBmbGV4LWVuZDsgbWFyZ2luLXRvcDogMzBweDsgfQogICAgICAgIAogICAgICAgIEBrZXlmcmFtZXMgZmFkZUluIHsgZnJvbSB7IG9wYWNpdHk6IDA7IHRyYW5zZm9ybTogdHJhbnNsYXRlWSgxMHB4KTsgfSB0byB7IG9wYWNpdHk6IDE7IHRyYW5zZm9ybTogdHJhbnNsYXRlWSgwKTsgfSB9CgogICAgICAgIC8qIFBSSU5UICovCiAgICAgICAgQG1lZGlhIHByaW50IHsKICAgICAgICAgICAgLnNpZGViYXIsIC5nbG9iYWwtdG9vbGJhciwgLm5vLXByaW50LCAubWFpbi13cmFwcGVyLCAuc2VjdGlvbi12aWV3IHsgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50OyB9CiAgICAgICAgICAgIGJvZHkgPiAqOm5vdCgjcHJpbnQtYXJlYSkgeyBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7IH0KICAgICAgICAgICAgYm9keSwgaHRtbCB7IG1hcmdpbjogMDsgcGFkZGluZzogMDsgd2lkdGg6IDEwMCU7IGhlaWdodDogMTAwJTsgYmFja2dyb3VuZDogd2hpdGU7IGRpc3BsYXk6IGJsb2NrOyBvdmVyZmxvdzogdmlzaWJsZTsgfQogICAgICAgICAgICAjcHJpbnQtYXJlYSB7IGRpc3BsYXk6IGJsb2NrICFpbXBvcnRhbnQ7IHBvc2l0aW9uOiBhYnNvbHV0ZTsgdG9wOiAwOyBsZWZ0OiAwOyB3aWR0aDogMTAwJTsgei1pbmRleDogOTk5OTsgYmFja2dyb3VuZDogd2hpdGU7IH0KICAgICAgICAgICAgQHBhZ2UgeyBzaXplOiBBNCBwb3J0cmFpdDsgbWFyZ2luOiAwOyB9CiAgICAgICAgICAgIAogICAgICAgICAgICAucHJpbnQtcGFnZS1jb252b2MgeyAKICAgICAgICAgICAgICAgIHdpZHRoOiAyMTBtbTsgaGVpZ2h0OiAyOTdtbTsgcGFkZGluZzogMTVtbTsgYm94LXNpemluZzogYm9yZGVyLWJveDsgcGFnZS1icmVhay1hZnRlcjogYWx3YXlzOyAKICAgICAgICAgICAgICAgIGZvbnQtZmFtaWx5OiAnVGltZXMgTmV3IFJvbWFuJywgVGltZXMsIHNlcmlmOyBiYWNrZ3JvdW5kOiB3aGl0ZTsgCiAgICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4OyBmbGV4LWRpcmVjdGlvbjogY29sdW1uOyBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsKICAgICAgICAgICAgfQogICAgICAgICAgICAucHJpbnQtcGFnZS1jb252b2M6bGFzdC1jaGlsZCB7IHBhZ2UtYnJlYWstYWZ0ZXI6IGF1dG87IH0KCiAgICAgICAgICAgIC5wcmludC1wYWdlLWxpc3QgeyAKICAgICAgICAgICAgICAgIHdpZHRoOiAyMTBtbTsgbWluLWhlaWdodDogMjk3bW07IHBhZGRpbmc6IDE1bW07IGJveC1zaXppbmc6IGJvcmRlci1ib3g7IHBhZ2UtYnJlYWstYWZ0ZXI6IGFsd2F5czsgCiAgICAgICAgICAgICAgICBmb250LWZhbWlseTogJ1RpbWVzIE5ldyBSb21hbicsIFRpbWVzLCBzZXJpZjsgYmFja2dyb3VuZDogd2hpdGU7IAogICAgICAgICAgICAgICAgZGlzcGxheTogYmxvY2s7IAogICAgICAgICAgICB9CiAgICAgICAgICAgIAogICAgICAgICAgICAucHJpbnQtZmxvdyB7CiAgICAgICAgICAgICAgICB3aWR0aDogMjEwbW07IHBhZGRpbmc6IDE1bW07IGJveC1zaXppbmc6IGJvcmRlci1ib3g7CiAgICAgICAgICAgICAgICBmb250LWZhbWlseTogJ1RpbWVzIE5ldyBSb21hbicsIFRpbWVzLCBzZXJpZjsgYmFja2dyb3VuZDogd2hpdGU7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgCiAgICAgICAgICAgIC5wcmludC1oZWFkZXIgeyBkaXNwbGF5OiBmbGV4OyBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47IGFsaWduLWl0ZW1zOiBjZW50ZXI7IGJvcmRlci1ib3R0b206IDJweCBzb2xpZCAjMDAwOyBwYWRkaW5nLWJvdHRvbTogMTBweDsgbWFyZ2luLWJvdHRvbTogMjBweDsgfQogICAgICAgICAgICAucHJpbnQtbG9nbyB7IG1heC1oZWlnaHQ6IDgwcHg7IG1heC13aWR0aDogMTUwcHg7IH0KICAgICAgICAgICAgLnByaW50LWRvYy10aXRsZSB7IGZvbnQtc2l6ZTogMS41cmVtOyBmb250LXdlaWdodDogYm9sZDsgdGV4dC1hbGlnbjogY2VudGVyOyBtYXJnaW46IDIwcHggMDsgdGV4dC10cmFuc2Zvcm06IHVwcGVyY2FzZTsgYm9yZGVyOiAycHggc29saWQgIzAwMDsgcGFkZGluZzogMTBweDsgfQogICAgICAgICAgICAucHJpbnQtaW5mb3MtYm94IHsgYm9yZGVyOiAxcHggc29saWQgIzAwMDsgcGFkZGluZzogMTBweDsgbWFyZ2luLWJvdHRvbTogMTVweDsgYmFja2dyb3VuZDogI2Y5ZjlmOTsgcGFnZS1icmVhay1pbnNpZGU6IGF2b2lkOyB9CiAgICAgICAgICAgIC5wcmludC10YWJsZSB7IHdpZHRoOiAxMDAlOyBib3JkZXItY29sbGFwc2U6IGNvbGxhcHNlOyBtYXJnaW4tdG9wOiAxMHB4OyBmb250LXNpemU6IDAuOXJlbTsgcGFnZS1icmVhay1pbnNpZGU6IGF1dG87IH0KICAgICAgICAgICAgLnByaW50LXRhYmxlIHRoLCAucHJpbnQtdGFibGUgdGQgeyBib3JkZXI6IDFweCBzb2xpZCAjMDAwOyBwYWRkaW5nOiA2cHg7IHRleHQtYWxpZ246IGNlbnRlcjsgfQogICAgICAgICAgICAucHJpbnQtdGFibGUgdGggeyBiYWNrZ3JvdW5kLWNvbG9yOiAjZWVlOyB9CiAgICAgICAgICAgIC5wcmludC10YWJsZSB0ciB7IHBhZ2UtYnJlYWstaW5zaWRlOiBhdm9pZDsgcGFnZS1icmVhay1hZnRlcjogYXV0bzsgfQogICAgICAgICAgICAKICAgICAgICAgICAgLmxhYmVsLXNoZWV0IHsgCiAgICAgICAgICAgICAgICBkaXNwbGF5OiBncmlkOyAKICAgICAgICAgICAgICAgIGdyaWQtdGVtcGxhdGUtY29sdW1uczogMWZyIDFmcjsgCiAgICAgICAgICAgICAgICBncmlkLXRlbXBsYXRlLXJvd3M6IHJlcGVhdCg3LCAxZnIpOyAKICAgICAgICAgICAgICAgIHdpZHRoOiAyMTBtbTsgaGVpZ2h0OiAyOTdtbTsgCiAgICAgICAgICAgICAgICBwYWRkaW5nOiAxNW1tIDVtbTsKICAgICAgICAgICAgICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7IAogICAgICAgICAgICAgICAgcGFnZS1icmVhay1hZnRlcjogYWx3YXlzOyAKICAgICAgICAgICAgICAgIGdhcDogMDsgCiAgICAgICAgICAgIH0KICAgICAgICAgICAgLmxhYmVsLWNhcmQgeyAKICAgICAgICAgICAgICAgIHBhZGRpbmc6IDVweCAxNXB4OyAKICAgICAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7IAogICAgICAgICAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsgCiAgICAgICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsgCiAgICAgICAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyOyAKICAgICAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjsgCiAgICAgICAgICAgICAgICBib3gtc2l6aW5nOiBib3JkZXItYm94OyAKICAgICAgICAgICAgICAgIG92ZXJmbG93OiBoaWRkZW47CiAgICAgICAgICAgIH0KICAgICAgICAgICAgLmxhYmVsLWxvZ28geyBtYXgtaGVpZ2h0OiAzNXB4OyBtYXJnaW4tYm90dG9tOiA1cHg7IH0KICAgICAgICAgICAgLmxhYmVsLW5hbWUgeyBmb250LXdlaWdodDogYm9sZDsgZm9udC1zaXplOiAxLjFyZW07IG1hcmdpbi1ib3R0b206IDJweDsgfQogICAgICAgICAgICAubGFiZWwtY2xhc3MgeyBmb250LXN0eWxlOiBpdGFsaWM7IGZvbnQtc2l6ZTogMC45cmVtOyBtYXJnaW4tYm90dG9tOiA1cHg7IH0KICAgICAgICAgICAgLmxhYmVsLWFub255bSB7IGZvbnQtc2l6ZTogMS4zcmVtOyBmb250LXdlaWdodDogOTAwOyBib3JkZXI6IDJweCBzb2xpZCAjMDAwOyBwYWRkaW5nOiAzcHggOHB4OyBib3JkZXItcmFkaXVzOiA1cHg7IH0KCiAgICAgICAgICAgIC5wdi1zaWduYXR1cmVzIHsgZGlzcGxheTogZmxleDsganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOyBtYXJnaW4tdG9wOiAzMHB4OyBoZWlnaHQ6IDEwMHB4OyBwYWdlLWJyZWFrLWluc2lkZTogYXZvaWQ7IH0KICAgICAgICAgICAgLnB2LWJveCB7IGJvcmRlcjogMXB4IHNvbGlkICMwMDA7IHdpZHRoOiA0NSU7IHBhZGRpbmc6IDVweDsgZm9udC1zaXplOiAwLjhyZW07IH0KICAgICAgICAgICAgCiAgICAgICAgICAgIC5kaXNwbGF5LWxpc3Qtcm93IHRkIHsgcGFkZGluZzogOHB4OyBmb250LXNpemU6IDEuMXJlbTsgfQogICAgICAgIH0KICAgIDwvc3R5bGU+CjwvaGVhZD4KPGJvZHk+CiAgICA8ZGl2IGNsYXNzPSJzaWRlYmFyIj4KICAgICAgICA8ZGl2IGNsYXNzPSJicmFuZCI+PGgxPkVYQU0gUElMT1RFPC9oMT48c3Bhbj5ieSBTeWx2w6hyZSBNaWNoZWxldDwvc3Bhbj48L2Rpdj4KICAgICAgICA8bmF2IGNsYXNzPSJzdGVwcy1uYXYiPgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJzdGVwLWJ0biBhY3RpdmUiIG9uY2xpY2s9InN3aXRjaFRhYih0aGlzLCAndmlldzEnKSI+PGkgY2xhc3M9ImZhLXNvbGlkIGZhLXNsaWRlcnMiPjwvaT4gMS4gUGFyYW3DqXRyYWdlPC9kaXY+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9InN0ZXAtYnRuIiBvbmNsaWNrPSJzd2l0Y2hUYWIodGhpcywgJ3ZpZXcyJykiPjxpIGNsYXNzPSJmYS1zb2xpZCBmYS1maWxlLWltcG9ydCI+PC9pPiAyLiBJbXBvcnQgZG9ubsOpZXM8L2Rpdj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0ic3RlcC1idG4iIG9uY2xpY2s9InN3aXRjaFRhYih0aGlzLCAndmlldzMnKSI+PGkgY2xhc3M9ImZhLXNvbGlkIGZhLXVzZXJzLXZpZXdmaW5kZXIiPjwvaT4gMy4gUsOpcGFydGl0aW9uPC9kaXY+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9InN0ZXAtYnRuIiBvbmNsaWNrPSJzd2l0Y2hUYWIodGhpcywgJ3ZpZXc0JykiPjxpIGNsYXNzPSJmYS1zb2xpZCBmYS1lbnZlbG9wZS1vcGVuLXRleHQiPjwvaT4gNC4gQ29udm9jYXRpb25zIMOJbMOodmVzPC9kaXY+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9InN0ZXAtYnRuIiBvbmNsaWNrPSJzd2l0Y2hUYWIodGhpcywgJ3ZpZXc1JykiPjxpIGNsYXNzPSJmYS1zb2xpZCBmYS1pZC1iYWRnZSI+PC9pPiA1LiBDb252b2NhdGlvbnMgU3VydmVpbGxhbnRzPC9kaXY+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9InN0ZXAtYnRuIiBvbmNsaWNrPSJzd2l0Y2hUYWIodGhpcywgJ3ZpZXc2JykiPjxpIGNsYXNzPSJmYS1zb2xpZCBmYS1jbGlwYm9hcmQtbGlzdCI+PC9pPiA2LiDDiW1hcmdlbWVudHMgZXQgQWZmaWNoYWdlPC9kaXY+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9InN0ZXAtYnRuIiBvbmNsaWNrPSJzd2l0Y2hUYWIodGhpcywgJ3ZpZXc3JykiPjxpIGNsYXNzPSJmYS1zb2xpZCBmYS1maWxlLXNpZ25hdHVyZSI+PC9pPiA3LiBQcm9jw6hzIFZlcmJhbCBldCBQb2NoZXR0ZXM8L2Rpdj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0ic3RlcC1idG4iIG9uY2xpY2s9InN3aXRjaFRhYih0aGlzLCAndmlldzgnKSI+PGkgY2xhc3M9ImZhLXNvbGlkIGZhLWJhcmNvZGUiPjwvaT4gOC4gQW5vbnltYXQgZXQgw6l0aXF1ZXR0ZXM8L2Rpdj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0ic3RlcC1idG4iIG9uY2xpY2s9InN3aXRjaFRhYih0aGlzLCAndmlldzknKSI+PGkgY2xhc3M9ImZhLXNvbGlkIGZhLXRhYmxlLWxpc3QiPjwvaT4gOS4gVGFibGVhdSBSw6ljYXBpdHVsYXRpZjwvZGl2PgogICAgICAgIDwvbmF2PgogICAgICAgIDxkaXYgY2xhc3M9ImZvb3Rlci1pbmZvIj7CqSAyMDI0LTIwMjUgRURVIFBJTE9URSBTeXN0ZW0uPC9kaXY+CiAgICA8L2Rpdj4KIAogICAgPGRpdiBjbGFzcz0ibWFpbi13cmFwcGVyIj4KICAgICAgICA8ZGl2IGNsYXNzPSJnbG9iYWwtdG9vbGJhciBuby1wcmludCI+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9InRvb2xiYXItdGl0bGUiPjxpIGNsYXNzPSJmYS1zb2xpZCBmYS1mb2xkZXItdHJlZSI+PC9pPiBHZXN0aW9uIGR1IFByb2pldDwvZGl2PgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJ0b29sYmFyLWFjdGlvbnMiPgogICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0iZmlsZSIgaWQ9ImxvYWRQcm9qZWN0SW5wdXQiIHN0eWxlPSJkaXNwbGF5Om5vbmU7IiBhY2NlcHQ9Ii5qc29uIiBvbmNoYW5nZT0ibG9hZFByb2plY3QodGhpcykiPgogICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJidG4tdG9vbGJhciBidG4tbG9hZC1wcm9qZWN0IiBvbmNsaWNrPSJkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbG9hZFByb2plY3RJbnB1dCcpLmNsaWNrKCkiPjxpIGNsYXNzPSJmYS1zb2xpZCBmYS11cGxvYWQiPjwvaT4gT3V2cmlyPC9idXR0b24+CiAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImJ0bi10b29sYmFyIGJ0bi1zYXZlLXByb2plY3QiIG9uY2xpY2s9InNhdmVQcm9qZWN0KCkiPjxpIGNsYXNzPSJmYS1zb2xpZCBmYS1kb3dubG9hZCI+PC9pPiBTYXV2ZWdhcmRlcjwvYnV0dG9uPgogICAgICAgICAgIDwvZGl2PgogICAgICAgIDwvZGl2PgogCiAgICAgICAgPGRpdiBjbGFzcz0ibWFpbi1jb250ZW50Ij4KICAgICAgICAgICAgPGRpdiBpZD0idmlldzEiIGNsYXNzPSJzZWN0aW9uLXZpZXcgYWN0aXZlIj4KICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iaGVhZGVyLXBhbmVsIj48aDI+PGkgY2xhc3M9ImZhLXNvbGlkIGZhLXNsaWRlcnMiPjwvaT4gMS4gUGFyYW3DqXRyYWdlPC9oMj48L2Rpdj4KICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iY29uZmlnLWNvbnRhaW5lciI+CiAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJjb25maWctY29sIj4KICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWdyb3VwIj48bGFiZWw+Tm9tPC9sYWJlbD48aW5wdXQgdHlwZT0idGV4dCIgaWQ9ImNvbmZpZ05hbWUiIHBsYWNlaG9sZGVyPSJWb3RyZSBub20iIG9uY2hhbmdlPSJBcHBTdGF0ZS5jb25maWcubmFtZT10aGlzLnZhbHVlIj48L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWdyb3VwIj48bGFiZWw+Rm9uY3Rpb248L2xhYmVsPjxpbnB1dCB0eXBlPSJ0ZXh0IiBpZD0iY29uZmlnUm9sZSIgcGxhY2Vob2xkZXI9IlZvdHJlIGZvbmN0aW9uIiBvbmNoYW5nZT0iQXBwU3RhdGUuY29uZmlnLnJvbGU9dGhpcy52YWx1ZSI+PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1ncm91cCI+PGxhYmVsPkludGl0dWzDqSBkZSBsJ2V4YW1lbjwvbGFiZWw+PGlucHV0IHR5cGU9InRleHQiIGlkPSJjb25maWdFeGFtVGl0bGUiIHBsYWNlaG9sZGVyPSJFeDogQkFDIEJMQU5DIDIwMjUiIG9uY2hhbmdlPSJBcHBTdGF0ZS5jb25maWcuZXhhbVRpdGxlPXRoaXMudmFsdWUiPjwvZGl2PgogICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJjb25maWctY29sIj4KICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWdyb3VwIj48bGFiZWw+TG9nbyDDiXRhYmxpc3NlbWVudDwvbGFiZWw+PGlucHV0IHR5cGU9ImZpbGUiIGFjY2VwdD0iaW1hZ2UvKiIgb25jaGFuZ2U9ImhhbmRsZUltYWdlKHRoaXMsICdsb2dvUHJldmlldycpIj48ZGl2IGNsYXNzPSJwcmV2aWV3LWJveCI+PGltZyBpZD0ibG9nb1ByZXZpZXciIGFsdD0iQXBlcsOndSIgc3R5bGU9ImRpc3BsYXk6bm9uZTsiPjwvZGl2PjwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAiPjxsYWJlbD5TaWduYXR1cmU8L2xhYmVsPjxpbnB1dCB0eXBlPSJmaWxlIiBhY2NlcHQ9ImltYWdlLyoiIG9uY2hhbmdlPSJoYW5kbGVJbWFnZSh0aGlzLCAnc2lnblByZXZpZXcnKSI+PGRpdiBjbGFzcz0icHJldmlldy1ib3giPjxpbWcgaWQ9InNpZ25QcmV2aWV3IiBhbHQ9IkFwZXLDp3UiIHN0eWxlPSJkaXNwbGF5Om5vbmU7Ij48L2Rpdj48L2Rpdj4KICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIAogICAgICAgICAgICA8ZGl2IGlkPSJ2aWV3MiIgY2xhc3M9InNlY3Rpb24tdmlldyI+CiAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImhlYWRlci1wYW5lbCI+PGgyPjxpIGNsYXNzPSJmYS1zb2xpZCBmYS1maWxlLWltcG9ydCI+PC9pPiAyLiBJbXBvcnQgZGVzIGRvbm7DqWVzPC9oMj48L2Rpdj4KICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iaW1wb3J0LWdyaWQiPgogICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZmlsZS1kcm9wLXpvbmUiIGlkPSJ6b25lLWVsZXZlcyI+PGgzPkEuIEJhc2Ugw4lsw6h2ZXM8L2gzPjxwIHN0eWxlPSJmb250LXNpemU6MC44cmVtOyBjb2xvcjojNjY2OyI+Tm9tLCBQcsOpbm9tLCBDbGFzc2UsIFRUPC9wPjxzcGFuIHN0eWxlPSJmb250LXNpemU6MC43cmVtOyBjb2xvcjojOTk5OyI+KEVuIGF0dGVudGUpPC9zcGFuPjxpbnB1dCB0eXBlPSJmaWxlIiBhY2NlcHQ9Ii54bHN4LCAueGxzLCAuY3N2IiBvbmNoYW5nZT0iaGFuZGxlRmlsZSh0aGlzLCAnRUxFVkVTJykiPjxkaXYgaWQ9InN0YXR1cy1lbGV2ZXMiIGNsYXNzPSJzdGF0dXMtYmFkZ2UiPkZpY2hpZXIgbWFucXVhbnQ8L2Rpdj48L2Rpdj4KICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZpbGUtZHJvcC16b25lIiBpZD0iem9uZS1lcHJldXZlcyI+PGgzPkIuIFBsYW5uaW5nIMOJcHJldXZlczwvaDM+PHAgc3R5bGU9ImZvbnQtc2l6ZTowLjhyZW07IGNvbG9yOiM2NjY7Ij5NYXRpw6hyZSwgRGF0ZSwgSGV1cmUsIER1csOpZTwvcD48c3BhbiBzdHlsZT0iZm9udC1zaXplOjAuN3JlbTsgY29sb3I6Izk5OTsiPihFbiBhdHRlbnRlKTwvc3Bhbj48aW5wdXQgdHlwZT0iZmlsZSIgYWNjZXB0PSIueGxzeCwgLnhscywgLmNzdiIgb25jaGFuZ2U9ImhhbmRsZUZpbGUodGhpcywgJ0VQUkVVVkVTJykiPjxkaXYgaWQ9InN0YXR1cy1lcHJldXZlcyIgY2xhc3M9InN0YXR1cy1iYWRnZSI+RmljaGllciBtYW5xdWFudDwvZGl2PjwvZGl2PgogICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZmlsZS1kcm9wLXpvbmUiIGlkPSJ6b25lLXJlc3NvdXJjZXMiPjxoMz5DLiBTYWxsZXM8L2gzPjxwIHN0eWxlPSJmb250LXNpemU6MC44cmVtOyBjb2xvcjojNjY2OyI+U2FsbGUsIENhcGFjaXTDqSwgVHlwZSAoVFQpPC9wPjxzcGFuIHN0eWxlPSJmb250LXNpemU6MC43cmVtOyBjb2xvcjojOTk5OyI+KEVuIGF0dGVudGUpPC9zcGFuPjxpbnB1dCB0eXBlPSJmaWxlIiBhY2NlcHQ9Ii54bHN4LCAueGxzLCAuY3N2IiBvbmNoYW5nZT0iaGFuZGxlRmlsZSh0aGlzLCAnUkVTU09VUkNFUycpIj48ZGl2IGlkPSJzdGF0dXMtcmVzc291cmNlcyIgY2xhc3M9InN0YXR1cy1iYWRnZSI+RmljaGllciBtYW5xdWFudDwvZGl2PjwvZGl2PgogICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZmlsZS1kcm9wLXpvbmUiIGlkPSJ6b25lLXN1cnZlaWxsYW50cyI+PGgzPkQuIFN1cnZlaWxsYW50czwvaDM+PHAgc3R5bGU9ImZvbnQtc2l6ZTowLjhyZW07IGNvbG9yOiM2NjY7Ij5Ob20sIFByw6lub208L3A+PHNwYW4gc3R5bGU9ImZvbnQtc2l6ZTowLjdyZW07IGNvbG9yOiM5OTk7Ij4oRW4gYXR0ZW50ZSk8L3NwYW4+PGlucHV0IHR5cGU9ImZpbGUiIGFjY2VwdD0iLnhsc3gsIC54bHMsIC5jc3YiIG9uY2hhbmdlPSJoYW5kbGVGaWxlKHRoaXMsICdTVVJWRUlMTEFOVFMnKSI+PGRpdiBpZD0ic3RhdHVzLXN1cnZlaWxsYW50cyIgY2xhc3M9InN0YXR1cy1iYWRnZSI+RmljaGllciBtYW5xdWFudDwvZGl2PjwvZGl2PgogICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPC9kaXY+CiAKICAgICAgICAgICAgPGRpdiBpZD0idmlldzMiIGNsYXNzPSJzZWN0aW9uLXZpZXciPgogICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJoZWFkZXItcGFuZWwiPjxoMj48aSBjbGFzcz0iZmEtc29saWQgZmEtdXNlcnMtdmlld2ZpbmRlciI+PC9pPiAzLiBSw6lwYXJ0aXRpb24gw6lsw6h2ZXMgZXQgc3VydmVpbGxhbnRzPC9oMj48L2Rpdj4KICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iY29udHJvbHMtYmFyIj4KICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9ImZvbnQtc2l6ZTowLjlyZW07IGNvbG9yOiM1NTU7IG1hcmdpbi1yaWdodDphdXRvOyI+SW1wb3J0ZXogbGVzIGZpY2hpZXJzIMOgIGwnw6l0YXBlIDIsIHB1aXMgbGFuY2V6IGxlIGNhbGN1bC48L2Rpdj4KICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iZGlzcGxheTpmbGV4OyBmbGV4LWRpcmVjdGlvbjpjb2x1bW47IGdhcDo1cHg7IG1hcmdpbi1yaWdodDoxNXB4OyB0ZXh0LWFsaWduOnJpZ2h0OyI+CiAgICAgICAgICAgICAgICAgICAgICAgPGRpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIHN0eWxlPSJmb250LXNpemU6MC44NXJlbTsgZm9udC13ZWlnaHQ6Ym9sZDsiPlRyaSA6PC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNlbGVjdCBpZD0iZGlzdHJpYi1tZXRob2QiIHN0eWxlPSJwYWRkaW5nOjRweDsgYm9yZGVyLXJhZGl1czo0cHg7IGZvbnQtc2l6ZTowLjg1cmVtOyI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJBTFBIQSI+T3JkcmUgQWxwaGFiw6l0aXF1ZTwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iQ0xBU1MiPlBhciBDbGFzc2UgKFN0cmljdCk8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zZWxlY3Q+CiAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgPGRpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIHN0eWxlPSJmb250LXNpemU6MC44NXJlbTsgZm9udC13ZWlnaHQ6Ym9sZDsiPlBvcnTDqWUgOjwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzZWxlY3QgaWQ9ImRpc3RyaWItc2NvcGUiIHN0eWxlPSJwYWRkaW5nOjRweDsgYm9yZGVyLXJhZGl1czo0cHg7IGZvbnQtc2l6ZTowLjg1cmVtOyI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJBTEwiPlRvdXRlcyBsZXMgw6lwcmV1dmVzPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJDVVJSRU5UIj7DiXByZXV2ZSBhY3R1ZWxsZTwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgICAgICAgICA8L3NlbGVjdD4KICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgICAgICAgICAgIDxidXR0b24gb25jbGljaz0ibGF1bmNoRGlzdHJpYnV0aW9uKCkiIHN0eWxlPSJwYWRkaW5nOjEwcHggMjBweDsgYmFja2dyb3VuZDogdmFyKC0tcHJpbWFyeS1jb2xvcik7IGNvbG9yOndoaXRlOyBib3JkZXI6bm9uZTsgYm9yZGVyLXJhZGl1czo1cHg7IGN1cnNvcjpwb2ludGVyOyI+PGkgY2xhc3M9ImZhLXNvbGlkIGZhLXdhbmQtbWFnaWMtc3BhcmtsZXMiPjwvaT4gQ2FsY3VsZXI8L2J1dHRvbj4KICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgIDxkaXYgaWQ9ImV4YW0tbmF2aWdhdGlvbiIgY2xhc3M9ImV4YW0tbmF2aWdhdGlvbi1iYXIiIHN0eWxlPSJkaXNwbGF5Om5vbmU7Ij4KICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9Im5hdi1idG4iIG9uY2xpY2s9InByZXZFeGFtKCkiPjxpIGNsYXNzPSJmYS1zb2xpZCBmYS1jaGV2cm9uLWxlZnQiPjwvaT4gUHLDqWPDqWRlbnQ8L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgIDxkaXY+PHN0cm9uZz7DiXByZXV2ZSBhY3R1ZWxsZSA6IDwvc3Ryb25nPjxzZWxlY3QgaWQ9ImV4YW0tZHJvcGRvd24iIGNsYXNzPSJleGFtLXNlbGVjdG9yIiBvbmNoYW5nZT0ianVtcFRvRXhhbSh0aGlzLnZhbHVlKSI+PC9zZWxlY3Q+PC9kaXY+CiAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJuYXYtYnRuIiBvbmNsaWNrPSJuZXh0RXhhbSgpIj5TdWl2YW50IDxpIGNsYXNzPSJmYS1zb2xpZCBmYS1jaGV2cm9uLXJpZ2h0Ij48L2k+PC9idXR0b24+CiAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICA8ZGl2IGlkPSJjdXJyZW50LWV4YW0tY29udGFpbmVyIj48ZGl2IGNsYXNzPSJjYXJkIiBzdHlsZT0idGV4dC1hbGlnbjpjZW50ZXI7IGNvbG9yOiM3ZjhjOGQ7Ij5WZXVpbGxleiBpbXBvcnRlciBsZXMgZG9ubsOpZXMgcHVpcyBjbGlxdWVyIHN1ciBDYWxjdWxlci48L2Rpdj48L2Rpdj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIAogICAgICAgICAgICA8ZGl2IGlkPSJ2aWV3NCIgY2xhc3M9InNlY3Rpb24tdmlldyI+CiAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImhlYWRlci1wYW5lbCI+PGgyPjxpIGNsYXNzPSJmYS1zb2xpZCBmYS1lbnZlbG9wZS1vcGVuLXRleHQiPjwvaT4gNC4gQ29udm9jYXRpb25zIMOJbMOodmVzPC9oMj48L2Rpdj4KICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iY29udHJvbHMtYmFyIj4KICAgICAgICAgICAgICAgICAgIDxsYWJlbD5GaWx0cmVyIHBhciBjbGFzc2UgOjwvbGFiZWw+PHNlbGVjdCBpZD0iY29udm9jLWNsYXNzLWZpbHRlciIgc3R5bGU9InBhZGRpbmc6OHB4OyBib3JkZXItcmFkaXVzOjVweDsgbWFyZ2luLWxlZnQ6MTBweDsiPjxvcHRpb24gdmFsdWU9IkFMTCI+VG91dGVzIGxlcyBjbGFzc2VzPC9vcHRpb24+PC9zZWxlY3Q+CiAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJhY3Rpb24tYnRuIGJ0bi1wcmludCIgb25jbGljaz0icHJpbnRDb252b2NhdGlvbnMoKSIgc3R5bGU9Im1hcmdpbi1sZWZ0OmF1dG87Ij48aSBjbGFzcz0iZmEtc29saWQgZmEtcHJpbnQiPjwvaT4gSW1wcmltZXI8L2J1dHRvbj4KICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImxheW91dC1zZXR0aW5ncyI+CiAgICAgICAgICAgICAgICAgICA8c3Bhbj48aSBjbGFzcz0iZmEtc29saWQgZmEtcnVsZXItY29tYmluZWQiPjwvaT4gTWlzZSBlbiBwYWdlIDo8L3NwYW4+CiAgICAgICAgICAgICAgICAgICA8bGFiZWw+SGF1dCA8aW5wdXQgdHlwZT0ibnVtYmVyIiBpZD0ic2V0cy1zdGQtdG9wIiB2YWx1ZT0iMjAiIG9uY2hhbmdlPSJhcHBseUxheW91dCgnc3RkJykiPjwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICA8bGFiZWw+QmFzIDxpbnB1dCB0eXBlPSJudW1iZXIiIGlkPSJzZXRzLXN0ZC1ib3QiIHZhbHVlPSIyMCIgb25jaGFuZ2U9ImFwcGx5TGF5b3V0KCdzdGQnKSI+PC9sYWJlbD4KICAgICAgICAgICAgICAgICAgIDxsYWJlbD5Qb2xpY2UgPGlucHV0IHR5cGU9Im51bWJlciIgaWQ9InNldHMtc3RkLWZvbnQiIHZhbHVlPSIxNiIgb25jaGFuZ2U9ImFwcGx5TGF5b3V0KCdzdGQnKSI+PC9sYWJlbD4KICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9ImRpc3BsYXk6ZmxleDsganVzdGlmeS1jb250ZW50OmNlbnRlcjsgYmFja2dyb3VuZDojY2NjOyBwYWRkaW5nOjIwcHg7IG92ZXJmbG93LXk6YXV0bzsgaGVpZ2h0OmNhbGMoMTAwdmggLSAzMDBweCk7Ij4KICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InBhcGVyLXNoZWV0IiBpZD0iY29udm9jLXRlbXBsYXRlIj4KICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJjb252b2MtaGVhZGVyLXJvdyI+PGRpdiBjbGFzcz0iY29udm9jLWFkZHJlc3MiPjx0ZXh0YXJlYSBpZD0idHh0LWFkZHJlc3MiIHBsYWNlaG9sZGVyPSJOb20gZGUgbCfDqXRhYmxpc3NlbWVudC4uLiI+PC90ZXh0YXJlYT48L2Rpdj48ZGl2IGNsYXNzPSJjb252b2MtbG9nby16b25lIj48aW1nIGlkPSJjb252b2MtbG9nby1pbWciIGNsYXNzPSJjb252b2MtbG9nbyIgYWx0PSJMb2dvIj48L2Rpdj48L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJjb252b2MtdGl0bGUiPkNPTlZPQ0FUSU9OIDxzcGFuIGlkPSJ0eHQtdGl0bGUtZGlzcGxheSIgY29udGVudGVkaXRhYmxlPSJ0cnVlIiBzdHlsZT0iYm9yZGVyOiAxcHggZGFzaGVkICNjY2M7IHBhZGRpbmc6IDJweDsiPkFVWCDDiVBSRVVWRVMgQkxBTkNIRVM8L3NwYW4+PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iY29udm9jLXN0dWRlbnQtaW5mbyI+PHN0cm9uZz5Ob20gZXQgUHLDqW5vbSA6PC9zdHJvbmc+IFtOb20gUHLDqW5vbV08YnI+PHN0cm9uZz5DbGFzc2UgOjwvc3Ryb25nPiBbQ2xhc3NlXTwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImNvbnZvYy1ib2R5IGVkaXRhYmxlLXRleHQiIGlkPSJ0eHQtYm9keSIgY29udGVudGVkaXRhYmxlPSJ0cnVlIj5NYWRhbWUsIE1vbnNpZXVyLDxicj5EYW5zIGxlIGNhZHJlIGRlIGxhIHByw6lwYXJhdGlvbiBhdXggZXhhbWVucywgdm90cmUgZW5mYW50IGVzdCBjb252b3F1w6koZSkgYXV4IMOpcHJldXZlcyBibGFuY2hlcyBzZWxvbiBsZSBwbGFubmluZyBzdWl2YW50IDo8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICA8dGFibGUgY2xhc3M9ImNvbnZvYy10YWJsZSI+PHRoZWFkPjx0cj48dGg+w4lwcmV1dmU8L3RoPjx0aD5EYXRlPC90aD48dGg+SG9yYWlyZSBkw6lidXQ8L3RoPjx0aD5EdXLDqWU8L3RoPjx0aD5TYWxsZTwvdGg+PC90cj48L3RoZWFkPjx0Ym9keT48dHI+PHRkIGNvbHNwYW49IjUiPihUYWJsZWF1IGljaSk8L3RkPjwvdHI+PC90Ym9keT48L3RhYmxlPgogICAgICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9ImZvbnQtd2VpZ2h0OmJvbGQ7IG1hcmdpbi1ib3R0b206NXB4OyI+UsOoZ2xlbWVudCBldCBjb25zaWduZXMgOjwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImNvbnZvYy1ydWxlcyBlZGl0YWJsZS10ZXh0IiBpZD0idHh0LXJ1bGVzIiBjb250ZW50ZWRpdGFibGU9InRydWUiIHN0eWxlPSJmb250LXNpemU6MC45cmVtOyI+LSBMZXMgw6lsw6h2ZXMgZG9pdmVudCBzZSBwcsOpc2VudGVyIDMwIG1pbnV0ZXMgYXZhbnQgbGUgZMOpYnV0IGRlIGNoYXF1ZSDDqXByZXV2ZS48YnI+LSBMZXMgdMOpbMOpcGhvbmVzIHBvcnRhYmxlcyBzb250IHN0cmljdGVtZW50IGludGVyZGl0cy4gVG91dCBjb21tZSBsZXMgbW9udHJlcyBjb25uZWN0w6llcy48YnI+LSBQacOoY2UgZCdpZGVudGl0w6kgb2JsaWdhdG9pcmUuPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iY29udm9jLWZvb3RlciIgc3R5bGU9Imp1c3RpZnktY29udGVudDogZmxleC1lbmQ7Ij48ZGl2IGNsYXNzPSJjb252b2Mtc2lnbiIgc3R5bGU9InRleHQtYWxpZ246cmlnaHQ7Ij48ZGl2PkZhaXQgw6AgPHNwYW4gaWQ9InR4dC1jaXR5IiBjb250ZW50ZWRpdGFibGU9InRydWUiIHN0eWxlPSJib3JkZXItYm90dG9tOjFweCBkb3R0ZWQgIzAwMDsiPlZpbGxlPC9zcGFuPiwgbGUgPHNwYW4gaWQ9ImN1cnJlbnQtZGF0ZSI+PC9zcGFuPjwvZGl2PjxkaXYgc3R5bGU9Im1hcmdpbi10b3A6MTVweDsgZm9udC13ZWlnaHQ6Ym9sZDsiIGlkPSJjb252b2Mtc2lnbi1uYW1lIj48L2Rpdj48ZGl2IHN0eWxlPSJmb250LXN0eWxlOml0YWxpYzsiIGlkPSJjb252b2Mtc2lnbi1yb2xlIj48L2Rpdj48aW1nIGlkPSJjb252b2Mtc2lnbi1pbWciIHN0eWxlPSJtYXgtaGVpZ2h0OjYwcHg7IG1hcmdpbi10b3A6MTBweDsiPjwvZGl2PjwvZGl2PgogICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8L2Rpdj4KCiAgICAgICAgICAgIDxkaXYgaWQ9InZpZXc1IiBjbGFzcz0ic2VjdGlvbi12aWV3Ij4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImhlYWRlci1wYW5lbCI+PGgyPjxpIGNsYXNzPSJmYS1zb2xpZCBmYS1pZC1iYWRnZSI+PC9pPiA1LiBDb252b2NhdGlvbnMgU3VydmVpbGxhbnRzPC9oMj48L2Rpdj4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImNvbnRyb2xzLWJhciI+CiAgICAgICAgICAgICAgICAgICAgPGxhYmVsPkltcHJpbWVyIHBvdXIgOjwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgPHNlbGVjdCBpZD0iY29udm9jLXN1cnYtZmlsdGVyIiBzdHlsZT0icGFkZGluZzo4cHg7IGJvcmRlci1yYWRpdXM6NXB4OyBtYXJnaW4tbGVmdDoxMHB4OyI+PG9wdGlvbiB2YWx1ZT0iQUxMIj5Ub3VzIGxlcyBzdXJ2ZWlsbGFudHM8L29wdGlvbj48L3NlbGVjdD4KICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJhY3Rpb24tYnRuIGJ0bi1wcmludCIgb25jbGljaz0icHJpbnRTdXJ2ZWlsbGFudENvbnZvY2F0aW9ucygpIiBzdHlsZT0ibWFyZ2luLWxlZnQ6YXV0bzsiPjxpIGNsYXNzPSJmYS1zb2xpZCBmYS1wcmludCI+PC9pPiBJbXByaW1lcjwvYnV0dG9uPgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJsYXlvdXQtc2V0dGluZ3MiPgogICAgICAgICAgICAgICAgICAgIDxsYWJlbD5IYXV0IDxpbnB1dCB0eXBlPSJudW1iZXIiIGlkPSJzZXRzLXN1cnYtdG9wIiB2YWx1ZT0iMjAiIG9uY2hhbmdlPSJhcHBseUxheW91dCgnc3VydicpIj48L2xhYmVsPgogICAgICAgICAgICAgICAgICAgIDxsYWJlbD5CYXMgPGlucHV0IHR5cGU9Im51bWJlciIgaWQ9InNldHMtc3Vydi1ib3QiIHZhbHVlPSIyMCIgb25jaGFuZ2U9ImFwcGx5TGF5b3V0KCdzdXJ2JykiPjwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgPGxhYmVsPlBvbGljZSA8aW5wdXQgdHlwZT0ibnVtYmVyIiBpZD0ic2V0cy1zdXJ2LWZvbnQiIHZhbHVlPSIxNiIgb25jaGFuZ2U9ImFwcGx5TGF5b3V0KCdzdXJ2JykiPjwvbGFiZWw+CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9ImRpc3BsYXk6ZmxleDsganVzdGlmeS1jb250ZW50OmNlbnRlcjsgYmFja2dyb3VuZDojY2NjOyBwYWRkaW5nOjIwcHg7IG92ZXJmbG93LXk6YXV0bzsgaGVpZ2h0OmNhbGMoMTAwdmggLSAzMDBweCk7Ij4KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJwYXBlci1zaGVldCIgaWQ9ImNvbnZvYy1zdXJ2LXRlbXBsYXRlIj4KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iY29udm9jLWhlYWRlci1yb3ciPjxkaXYgY2xhc3M9ImNvbnZvYy1hZGRyZXNzIj48dGV4dGFyZWEgaWQ9InR4dC1zdXJ2LWFkZHJlc3MiIHBsYWNlaG9sZGVyPSJOb20gw6l0YWJsaXNzZW1lbnQuLi4iPjwvdGV4dGFyZWE+PC9kaXY+PGltZyBpZD0iY29udm9jLXN1cnYtbG9nby1pbWciIGNsYXNzPSJjb252b2MtbG9nbyI+PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImNvbnZvYy10aXRsZSI+Q09OVk9DQVRJT04gPHNwYW4gaWQ9InR4dC1zdXJ2LXRpdGxlLWRpc3BsYXkiIGNvbnRlbnRlZGl0YWJsZT0idHJ1ZSIgc3R5bGU9ImJvcmRlcjogMXB4IGRhc2hlZCAjY2NjOyBwYWRkaW5nOiAycHg7Ij5TVVJWRUlMTEFOQ0VTPC9zcGFuPjwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJjb252b2Mtc3R1ZGVudC1pbmZvIj48c3Ryb25nPlN1cnZlaWxsYW50IDo8L3N0cm9uZz4gW05vbV08L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iY29udm9jLWJvZHkgZWRpdGFibGUtdGV4dCIgaWQ9InR4dC1zdXJ2LWJvZHkiIGNvbnRlbnRlZGl0YWJsZT0idHJ1ZSI+Vm91cyDDqnRlcyBjb252b3F1w6koZSkgcG91ciBsZXMgc3VydmVpbGxhbmNlcyBzdWl2YW50ZXMgOjwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICA8dGFibGUgY2xhc3M9ImNvbnZvYy10YWJsZSI+PHRoZWFkPjx0cj48dGg+w4lwcmV1dmU8L3RoPjx0aD5EYXRlPC90aD48dGg+SG9yYWlyZTwvdGg+PHRoPkR1csOpZTwvdGg+PHRoPlNhbGxlPC90aD48L3RyPjwvdGhlYWQ+PHRib2R5Pjx0cj48dGQgY29sc3Bhbj0iNSI+Li4uPC90ZD48L3RyPjwvdGJvZHk+PC90YWJsZT4KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iY29udm9jLXJ1bGVzIGVkaXRhYmxlLXRleHQiIGlkPSJ0eHQtc3Vydi1ydWxlcyIgY29udGVudGVkaXRhYmxlPSJ0cnVlIj5NZXJjaSBkZSB2b3RyZSBwcsOpc2VuY2UgMzAgbWludXRlcyBhdmFudCBsZSBkw6lidXQgZGUgbCfDqXByZXV2ZS48L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iY29udm9jLWZvb3RlciIgc3R5bGU9Imp1c3RpZnktY29udGVudDogZmxleC1lbmQ7Ij48ZGl2IGNsYXNzPSJjb252b2Mtc2lnbiIgc3R5bGU9InRleHQtYWxpZ246cmlnaHQ7Ij48ZGl2PkZhaXQgw6AgPHNwYW4gaWQ9InR4dC1zdXJ2LWNpdHkiIGNvbnRlbnRlZGl0YWJsZT0idHJ1ZSI+VmlsbGU8L3NwYW4+LCBsZSA8c3BhbiBpZD0iY3VycmVudC1kYXRlLXN1cnYiPjwvc3Bhbj48L2Rpdj48ZGl2IGlkPSJjb252b2Mtc3Vydi1zaWduLW5hbWUiIHN0eWxlPSJmb250LXdlaWdodDpib2xkOyBtYXJnaW4tdG9wOjE1cHg7Ij48L2Rpdj48ZGl2IGlkPSJjb252b2Mtc3Vydi1zaWduLXJvbGUiIHN0eWxlPSJmb250LXN0eWxlOml0YWxpYzsiPjwvZGl2PjxpbWcgaWQ9ImNvbnZvYy1zdXJ2LXNpZ24taW1nIiBzdHlsZT0ibWF4LWhlaWdodDo2MHB4OyBtYXJnaW4tdG9wOjEwcHg7Ij48L2Rpdj48L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8L2Rpdj4KCiAgICAgICAgICAgIDxkaXYgaWQ9InZpZXc2IiBjbGFzcz0ic2VjdGlvbi12aWV3Ij4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImhlYWRlci1wYW5lbCI+PGgyPjxpIGNsYXNzPSJmYS1zb2xpZCBmYS1jbGlwYm9hcmQtbGlzdCI+PC9pPiA2LiDDiW1hcmdlbWVudHMgZXQgQWZmaWNoYWdlPC9oMj48L2Rpdj4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImNvbnRyb2xzLWJhciI+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iZm9udC1zaXplOjAuOXJlbTsgY29sb3I6IzU1NTsgbWFyZ2luLXJpZ2h0OjE1cHg7Ij5GaWx0cmUgc2FsbGUgKGxhaXNzZXIgc3VyIFRPVVQgcG91ciB0b3V0IGltcHJpbWVyKSA6PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPHNlbGVjdCBpZD0iZW1hcmdlbWVudC1yb29tLWZpbHRlciIgc3R5bGU9InBhZGRpbmc6OHB4OyBib3JkZXItcmFkaXVzOjVweDsgbWFyZ2luLWxlZnQ6MTBweDsiPjxvcHRpb24gdmFsdWU9IkFMTCI+VG91dGVzIGxlcyBzYWxsZXMgdXRpbGlzw6llczwvb3B0aW9uPjwvc2VsZWN0PgogICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9Im1hcmdpbi1sZWZ0OmF1dG87IGRpc3BsYXk6ZmxleDsgZ2FwOjEwcHg7Ij4KICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYWN0aW9uLWJ0biBidG4tcHJpbnQiIG9uY2xpY2s9InByaW50RGlzcGxheUxpc3QoKSI+SW1wcmltZXIgTGlzdGVzIGQnYWZmaWNoYWdlIChUb3V0ZXMgw4lwcmV1dmVzKTwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJhY3Rpb24tYnRuIGJ0bi1wcmludCIgb25jbGljaz0icHJpbnRFbWFyZ2VtZW50KCkiPkltcHJpbWVyIMOJbWFyZ2VtZW50cyAoVG91dGVzIMOJcHJldXZlcyk8L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iYmFja2dyb3VuZDojZWVlOyBwYWRkaW5nOjIwcHg7IHRleHQtYWxpZ246Y2VudGVyOyBjb2xvcjogIzU1NTsiPkxlcyBkb2N1bWVudHMgc2Vyb250IGfDqW7DqXLDqXMgcG91ciA8c3Ryb25nPnRvdXRlcyBsZXMgw6lwcmV1dmVzPC9zdHJvbmc+Ljxicj5DaGFxdWUgc2FsbGUgc2VyYSBzdXIgdW5lIG5vdXZlbGxlIHBhZ2UuPC9kaXY+CiAgICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgICAgPGRpdiBpZD0idmlldzciIGNsYXNzPSJzZWN0aW9uLXZpZXciPgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iaGVhZGVyLXBhbmVsIj48aDI+PGkgY2xhc3M9ImZhLXNvbGlkIGZhLWZpbGUtc2lnbmF0dXJlIj48L2k+IDcuIFByb2PDqHMgVmVyYmFsIGV0IFBvY2hldHRlczwvaDI+PC9kaXY+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJjb250cm9scy1iYXIiPgogICAgICAgICAgICAgICAgICAgIDxzZWxlY3QgaWQ9InB2LWV4YW0tc2VsZWN0IiBvbmNoYW5nZT0idXBkYXRlUFZSb29tU2VsZWN0KCkiPjwvc2VsZWN0PgogICAgICAgICAgICAgICAgICAgIDxzZWxlY3QgaWQ9InB2LXJvb20tc2VsZWN0Ij48L3NlbGVjdD4KICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJtYXJnaW4tbGVmdDphdXRvOyBkaXNwbGF5OmZsZXg7IGdhcDoxMHB4OyI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImFjdGlvbi1idG4gYnRuLXByaW50IiBvbmNsaWNrPSJwcmludFBWKCkiPkltcHJpbWVyIFBWPC9idXR0b24+CiAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImFjdGlvbi1idG4gYnRuLXByaW50IiBvbmNsaWNrPSJwcmludFBvY2hldHRlcygpIj5JbXByaW1lciBQb2NoZXR0ZXM8L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iY2FyZCI+CiAgICAgICAgICAgICAgICAgICAgPGgzPkNvbnNpZ25lcyAocG91ciBsYSBwb2NoZXR0ZSk8L2gzPgogICAgICAgICAgICAgICAgICAgIDx0ZXh0YXJlYSBpZD0idHh0LXBvY2hldHRlLXN1cnYiIHN0eWxlPSJ3aWR0aDoxMDAlOyBoZWlnaHQ6MjUwcHg7IHBhZGRpbmc6MTBweDsgYm9yZGVyOjFweCBzb2xpZCAjY2NjOyBib3JkZXItcmFkaXVzOjRweDsiIG9uaW5wdXQ9InNhdmVQb2NoZXR0ZVRleHQoJ3N1cnYnLCB0aGlzLnZhbHVlKSI+PC90ZXh0YXJlYT4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8L2Rpdj4KCiAgICAgICAgICAgIDxkaXYgaWQ9InZpZXc4IiBjbGFzcz0ic2VjdGlvbi12aWV3Ij4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImhlYWRlci1wYW5lbCI+PGgyPjxpIGNsYXNzPSJmYS1zb2xpZCBmYS1iYXJjb2RlIj48L2k+IDguIEFub255bWF0IGV0IMOpdGlxdWV0dGVzPC9oMj48L2Rpdj4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImNvbnRyb2xzLWJhciI+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iZGlzcGxheTpmbGV4OyBmbGV4LWRpcmVjdGlvbjpjb2x1bW47IGdhcDo1cHg7IG1hcmdpbi1yaWdodDoxMHB4OyI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxzZWxlY3QgaWQ9ImxhYmVsLWV4YW0tc2VsZWN0IiBvbmNoYW5nZT0idXBkYXRlTGFiZWxSb29tU2VsZWN0KCkiIHN0eWxlPSJwYWRkaW5nOjVweDsgYm9yZGVyLXJhZGl1czo0cHg7IGZvbnQtc2l6ZTowLjhyZW07IHdpZHRoOjIwMHB4OyI+PC9zZWxlY3Q+CiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9ImRpc3BsYXk6ZmxleDsgZ2FwOjVweDsiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNlbGVjdCBpZD0ibGFiZWwtcm9vbS1zZWxlY3QiIHN0eWxlPSJwYWRkaW5nOjVweDsgYm9yZGVyLXJhZGl1czo0cHg7IGZvbnQtc2l6ZTowLjhyZW07IHdpZHRoOjEyMHB4OyI+PC9zZWxlY3Q+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c2VsZWN0IGlkPSJsYWJlbC1jbGFzcy1zZWxlY3QiIHN0eWxlPSJwYWRkaW5nOjVweDsgYm9yZGVyLXJhZGl1czo0cHg7IGZvbnQtc2l6ZTowLjhyZW07IHdpZHRoOjEwMHB4OyI+PC9zZWxlY3Q+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0ibWFyZ2luLWxlZnQ6MTBweDsgYm9yZGVyLWxlZnQ6MXB4IHNvbGlkICNjY2M7IHBhZGRpbmctbGVmdDoxMHB4OyI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBzdHlsZT0iZm9udC1zaXplOjAuOHJlbTsiPlRyaSBMaXN0ZS/DiXRpcXVldHRlcyA6PC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgPHNlbGVjdCBpZD0ibGlzdGluZy1zb3J0LW1vZGUiIHN0eWxlPSJwYWRkaW5nOjVweDsgYm9yZGVyLXJhZGl1czo0cHg7IGZvbnQtc2l6ZTowLjhyZW07Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IkFMUEhBIj5BbHBoYWLDqXRpcXVlPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJDTEFTUyI+UGFyIENsYXNzZTwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iUk9PTSI+UGFyIFNhbGxlPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvc2VsZWN0PgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJhY3Rpb24tYnRuIGJ0bi1jYWxjIiBvbmNsaWNrPSJnZW5lcmF0ZUFub255bWl0eSgpIj5Hw6luw6lyZXIgQ29kZXM8L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJhY3Rpb24tYnRuIGJ0bi1wcmludCIgb25jbGljaz0icHJpbnRUYWJsZUxhYmVscygpIj7DiXRpcXVldHRlczwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImFjdGlvbi1idG4gYnRuLXByaW50IiBvbmNsaWNrPSJwcmludEFub255bWl0eUxpc3QoKSI+TGlzdGluZzwvYnV0dG9uPgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICA8ZGl2IGlkPSJhbm9ueW1pdHktdGFibGUtY29udGFpbmVyIj48L2Rpdj4KICAgICAgICAgICAgPC9kaXY+CgogICAgICAgICAgICA8ZGl2IGlkPSJ2aWV3OSIgY2xhc3M9InNlY3Rpb24tdmlldyI+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJoZWFkZXItcGFuZWwiPjxoMj48aSBjbGFzcz0iZmEtc29saWQgZmEtdGFibGUtbGlzdCI+PC9pPiA5LiBUYWJsZWF1IFLDqWNhcGl0dWxhdGlmPC9oMj48L2Rpdj4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImNvbnRyb2xzLWJhciI+CiAgICAgICAgICAgICAgICAgICAgPGxhYmVsPsOJcHJldXZlIDo8L2xhYmVsPiA8c2VsZWN0IGlkPSJyZWNhcC1leGFtLXNlbGVjdCIgb25jaGFuZ2U9InVwZGF0ZVJlY2FwUm9vbVNlbGVjdCgpIj48L3NlbGVjdD4KICAgICAgICAgICAgICAgICAgICA8bGFiZWwgc3R5bGU9Im1hcmdpbi1sZWZ0OjEwcHg7Ij5TYWxsZSA6PC9sYWJlbD4gPHNlbGVjdCBpZD0icmVjYXAtcm9vbS1zZWxlY3QiPjwvc2VsZWN0PgogICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImFjdGlvbi1idG4gYnRuLXByaW50IiBvbmNsaWNrPSJwcmludEdsb2JhbFJlY2FwKCkiIHN0eWxlPSJtYXJnaW4tbGVmdDphdXRvOyI+SW1wcmltZXIgVGFibGVhdXg8L2J1dHRvbj4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iYmFja2dyb3VuZDojZjlmOWY5OyBwYWRkaW5nOjIwcHg7IHRleHQtYWxpZ246Y2VudGVyOyI+R8OpbsOocmUgdW4gdGFibGVhdSBwYXIgw6lwcmV1dmUgZXQgcGFyIHNhbGxlIGluZGlxdWFudCBhdXggw6lsw6h2ZXMgb8O5IHNlIHJlbmRyZS48L2Rpdj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgPC9kaXY+CiAgICA8L2Rpdj4KICAgIDxkaXYgaWQ9InByaW50LWFyZWEiIHN0eWxlPSJkaXNwbGF5Om5vbmU7Ij48L2Rpdj4KCiAgICA8c2NyaXB0PgogICAgICAgIC8vIFZBUklBQkxFIEdMT0JBTEUKICAgICAgICBsZXQgQXBwU3RhdGUgPSB7IGNvbmZpZzoge30sIGNvbnZvY1RleHQ6IHt9LCBzdXJ2Q29udm9jVGV4dDoge30sIHBvY2hldHRlVGV4dDoge30sIGxheW91dDogeyBzdGQ6IHt0b3A6MjAsIGJvdDoyMCwgZm9udDoxNn0sIHN1cnY6IHt0b3A6MjAsIGJvdDoyMCwgZm9udDoxNn0gfSwgZWxldmVzOiBbXSwgZXByZXV2ZXM6IFtdLCBzYWxsZXM6IFtdLCBzdXJ2ZWlsbGFudHM6IFtdLCBkaXN0cmlidXRpb25EYXRhOiBbXSwgY3VycmVudEV4YW1JbmRleDogMCB9OwogICAgICAgIGNvbnN0IG5vcm1hbGl6ZSA9IHMgPT4gcyA/IHMudG9TdHJpbmcoKS50b0xvd2VyQ2FzZSgpLnRyaW0oKSA6ICcnOwogICAgICAgIGNvbnN0IG5vcm1DbGFzcyA9IChzKSA9PiBzID8gU3RyaW5nKHMpLnRvVXBwZXJDYXNlKCkucmVwbGFjZSgvXHMrL2csICcnKS50cmltKCkgOiAiTi9BIjsKCiAgICAgICAgLy8gRlVOQ1RJT04gRElTUExBWSBEVVJBVElPTiAKICAgICAgICBmdW5jdGlvbiBmb3JtYXREdXJhdGlvbkRpc3BsYXkodmFsKSB7CiAgICAgICAgICAgIGlmICghdmFsKSByZXR1cm4gIiI7CiAgICAgICAgICAgIGNvbnN0IHMgPSBTdHJpbmcodmFsKS50cmltKCk7CiAgICAgICAgICAgIGlmIChzLmluY2x1ZGVzKCdoJykgfHwgcy5pbmNsdWRlcygnOicpKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gcy5yZXBsYWNlKCc6JywgJ2gnKTsgCiAgICAgICAgICAgIH0KICAgICAgICAgICAgY29uc3QgbnVtID0gcGFyc2VGbG9hdChzKTsKICAgICAgICAgICAgaWYgKCFpc05hTihudW0pKSB7CiAgICAgICAgICAgICAgICBjb25zdCBoID0gTWF0aC5mbG9vcihudW0gLyA2MCk7CiAgICAgICAgICAgICAgICBjb25zdCBtID0gTWF0aC5yb3VuZChudW0gJSA2MCk7CiAgICAgICAgICAgICAgICBjb25zdCBtU3RyID0gbSA8IDEwID8gJzAnICsgbSA6IG07CiAgICAgICAgICAgICAgICBpZihoID4gMCkgcmV0dXJuIGAke2h9aCR7bVN0cn1gOwogICAgICAgICAgICAgICAgcmV0dXJuIGAke219IG1pbmA7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIHM7CiAgICAgICAgfQogICAgICAgIAogICAgICAgIC8vIC0tLSBOT1VWRUxMRSBGT05DVElPTiBERSBUUkkgUk9CVVNURSBEQVRFIEZSQU5DQUlTRSArIEhFVVJFIC0tLQogICAgICAgIGZ1bmN0aW9uIGdldERhdGVUaW1lVmFsdWUoZXhhbVJhdywgaXNUVCkgewogICAgICAgICAgICBsZXQgZFZhbCA9IGdldFZhbHVlKGV4YW1SYXcsIFsnRGF0ZScsICdKb3VyJywgJ0RhdGUgw6lwcmV1dmUnLCAnRGF0ZSBkZWJ1dCddKTsKICAgICAgICAgICAgbGV0IGRhdGVPYmogPSBudWxsOwogICAgICAgICAgICBjb25zdCBmcmVuY2hNb250aHMgPSB7CiAgICAgICAgICAgICAgICAnamFudmllcic6IDAsICdmw6l2cmllcic6IDEsICdmZXZyaWVyJzogMSwgJ21hcnMnOiAyLCAnYXZyaWwnOiAzLCAnbWFpJzogNCwgJ2p1aW4nOiA1LAogICAgICAgICAgICAgICAgJ2p1aWxsZXQnOiA2LCAnYW/Du3QnOiA3LCAnYW91dCc6IDcsICdzZXB0ZW1icmUnOiA4LCAnb2N0b2JyZSc6IDksICdub3ZlbWJyZSc6IDEwLCAnZMOpY2VtYnJlJzogMTEsICdkZWNlbWJyZSc6IDExCiAgICAgICAgICAgIH07CiAgICAgICAgICAgIGlmIChkVmFsKSB7CiAgICAgICAgICAgICAgICBpZiAoIWlzTmFOKGRWYWwpICYmIGRWYWwgPiAyMDAwMCkgewogICAgICAgICAgICAgICAgICAgICBkYXRlT2JqID0gbmV3IERhdGUoKGRWYWwgLSAyNTU2OSkgKiA4NjQwMCAqIDEwMDApOwogICAgICAgICAgICAgICAgfSAKICAgICAgICAgICAgICAgIGVsc2UgaWYgKHR5cGVvZiBkVmFsID09PSAnc3RyaW5nJykgewogICAgICAgICAgICAgICAgICAgIGNvbnN0IGNsZWFuVmFsID0gZFZhbC50b0xvd2VyQ2FzZSgpLnRyaW0oKTsKICAgICAgICAgICAgICAgICAgICBpZiAoY2xlYW5WYWwuaW5jbHVkZXMoJy8nKSkgewogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwYXJ0cyA9IGNsZWFuVmFsLnNwbGl0KCcvJyk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwYXJ0cy5sZW5ndGggPT09IDMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGVPYmogPSBuZXcgRGF0ZShwYXJzZUludChwYXJ0c1syXSksIHBhcnNlSW50KHBhcnRzWzFdKSAtIDEsIHBhcnNlSW50KHBhcnRzWzBdKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRleHRNYXRjaCA9IGNsZWFuVmFsLm1hdGNoKC8oXGR7MSwyfXwxZXIpXHMrKFthLXrDqcO7XSspLyk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0ZXh0TWF0Y2gpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBkYXkgPSAodGV4dE1hdGNoWzFdID09PSAnMWVyJykgPyAxIDogcGFyc2VJbnQodGV4dE1hdGNoWzFdKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBtb250aE5hbWUgPSB0ZXh0TWF0Y2hbMl07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZnJlbmNoTW9udGhzLmhhc093blByb3BlcnR5KG1vbnRoTmFtZSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50WWVhciA9IG5ldyBEYXRlKCkuZ2V0RnVsbFllYXIoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRlT2JqID0gbmV3IERhdGUoY3VycmVudFllYXIsIGZyZW5jaE1vbnRoc1ttb250aE5hbWVdLCBkYXkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmICghZGF0ZU9iaiB8fCBpc05hTihkYXRlT2JqLmdldFRpbWUoKSkpIHsKICAgICAgICAgICAgICAgIGRhdGVPYmogPSBuZXcgRGF0ZSgwKTsgCiAgICAgICAgICAgIH0KICAgICAgICAgICAgbGV0IHRWYWwgPSBpc1RUID8gZ2V0VmFsdWUoZXhhbVJhdywgWydIZXVyZSBkZSBkw6lidXQgdGllcnMgdGVtcHMnLCAnSGV1cmUgVFQnXSkgOiBnZXRWYWx1ZShleGFtUmF3LCBbJ0hldXJlIGRlIGTDqWJ1dCcsICdIZXVyZScsICdIb3JhaXJlJ10pOwogICAgICAgICAgICBpZighdFZhbCkgdFZhbCA9IGdldFZhbHVlKGV4YW1SYXcsIFsnSGV1cmUgZGUgZMOpYnV0JywgJ0hldXJlJywgJ0hvcmFpcmUnXSk7CiAgICAgICAgICAgIGxldCBob3VycyA9IDAsIG1pbnV0ZXMgPSAwOwogICAgICAgICAgICBpZih0VmFsKSB7CiAgICAgICAgICAgICAgICBsZXQgdFN0ciA9IFN0cmluZyh0VmFsKS50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoJ2gnLCAnOicpLnJlcGxhY2UoJy4nLCAnOicpLnRyaW0oKTsKICAgICAgICAgICAgICAgIGNvbnN0IHRQYXJ0cyA9IHRTdHIuc3BsaXQoJzonKTsKICAgICAgICAgICAgICAgIGlmKHRQYXJ0cy5sZW5ndGggPj0gMSkgaG91cnMgPSBwYXJzZUludCh0UGFydHNbMF0pIHx8IDA7CiAgICAgICAgICAgICAgICBpZih0UGFydHMubGVuZ3RoID49IDIpIG1pbnV0ZXMgPSBwYXJzZUludCh0UGFydHNbMV0pIHx8IDA7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZGF0ZU9iai5zZXRIb3Vycyhob3VycywgbWludXRlcywgMCwgMCk7CiAgICAgICAgICAgIHJldHVybiBkYXRlT2JqLmdldFRpbWUoKTsKICAgICAgICB9CgogICAgICAgIC8vIC0tLSAxLiBGT05DVElPTlMgU0FVVkVHQVJERSBFVCBDSEFSR0VNRU5UIC0tLQogICAgICAgIGZ1bmN0aW9uIHN5bmNTdGF0ZUZyb21ET00oKSB7CiAgICAgICAgICAgIEFwcFN0YXRlLmNvbmZpZy5uYW1lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbmZpZ05hbWUnKS52YWx1ZTsKICAgICAgICAgICAgQXBwU3RhdGUuY29uZmlnLnJvbGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29uZmlnUm9sZScpLnZhbHVlOwogICAgICAgICAgICBBcHBTdGF0ZS5jb25maWcuZXhhbVRpdGxlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbmZpZ0V4YW1UaXRsZScpLnZhbHVlOwogICAgICAgICAgICBpZighQXBwU3RhdGUuY29udm9jVGV4dCkgQXBwU3RhdGUuY29udm9jVGV4dCA9IHt9OwogICAgICAgICAgICBBcHBTdGF0ZS5jb252b2NUZXh0LmFkZHJlc3MgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndHh0LWFkZHJlc3MnKS52YWx1ZTsKICAgICAgICAgICAgQXBwU3RhdGUuY29udm9jVGV4dC5ib2R5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3R4dC1ib2R5JykuaW5uZXJIVE1MOwogICAgICAgICAgICBBcHBTdGF0ZS5jb252b2NUZXh0LnJ1bGVzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3R4dC1ydWxlcycpLmlubmVySFRNTDsKICAgICAgICAgICAgQXBwU3RhdGUuY29udm9jVGV4dC5jaXR5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3R4dC1jaXR5JykuaW5uZXJUZXh0OwogICAgICAgICAgICBpZighQXBwU3RhdGUubGF5b3V0LnN0ZCkgQXBwU3RhdGUubGF5b3V0LnN0ZCA9IHt9OwogICAgICAgICAgICBBcHBTdGF0ZS5sYXlvdXQuc3RkLnRvcCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZXRzLXN0ZC10b3AnKS52YWx1ZTsKICAgICAgICAgICAgQXBwU3RhdGUubGF5b3V0LnN0ZC5ib3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2V0cy1zdGQtYm90JykudmFsdWU7CiAgICAgICAgICAgIEFwcFN0YXRlLmxheW91dC5zdGQuZm9udCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZXRzLXN0ZC1mb250JykudmFsdWU7CiAgICAgICAgICAgIGlmKCFBcHBTdGF0ZS5sYXlvdXQuc3VydikgQXBwU3RhdGUubGF5b3V0LnN1cnYgPSB7fTsKICAgICAgICAgICAgQXBwU3RhdGUubGF5b3V0LnN1cnYudG9wID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NldHMtc3Vydi10b3AnKS52YWx1ZTsKICAgICAgICAgICAgQXBwU3RhdGUubGF5b3V0LnN1cnYuYm90ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NldHMtc3Vydi1ib3QnKS52YWx1ZTsKICAgICAgICAgICAgQXBwU3RhdGUubGF5b3V0LnN1cnYuZm9udCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZXRzLXN1cnYtZm9udCcpLnZhbHVlOwogICAgICAgICAgICBpZighQXBwU3RhdGUuc3VydkNvbnZvY1RleHQpIEFwcFN0YXRlLnN1cnZDb252b2NUZXh0ID0ge307CiAgICAgICAgICAgIEFwcFN0YXRlLnN1cnZDb252b2NUZXh0LmFkZHJlc3MgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndHh0LXN1cnYtYWRkcmVzcycpLnZhbHVlOwogICAgICAgICAgICBBcHBTdGF0ZS5zdXJ2Q29udm9jVGV4dC5ib2R5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3R4dC1zdXJ2LWJvZHknKS5pbm5lckhUTUw7CiAgICAgICAgICAgIEFwcFN0YXRlLnN1cnZDb252b2NUZXh0LnJ1bGVzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3R4dC1zdXJ2LXJ1bGVzJykuaW5uZXJIVE1MOwogICAgICAgICAgICBBcHBTdGF0ZS5zdXJ2Q29udm9jVGV4dC5jaXR5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3R4dC1zdXJ2LWNpdHknKS5pbm5lclRleHQ7CiAgICAgICAgICAgIGlmKCFBcHBTdGF0ZS5wb2NoZXR0ZVRleHQpIEFwcFN0YXRlLnBvY2hldHRlVGV4dCA9IHt9OwogICAgICAgICAgICBBcHBTdGF0ZS5wb2NoZXR0ZVRleHQuc3VydiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0eHQtcG9jaGV0dGUtc3VydicpLnZhbHVlOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gc2F2ZVByb2plY3QoKSB7CiAgICAgICAgICAgIGlmKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd2aWV3MycpLmNsYXNzTGlzdC5jb250YWlucygnYWN0aXZlJykpIHsKICAgICAgICAgICAgICAgIHVwZGF0ZUN1cnJlbnRFeGFtU3RhdGUoKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBzeW5jU3RhdGVGcm9tRE9NKCk7CiAgICAgICAgICAgIGNvbnN0IGRhdGFTdHIgPSBKU09OLnN0cmluZ2lmeShBcHBTdGF0ZSk7CiAgICAgICAgICAgIGNvbnN0IGJsb2IgPSBuZXcgQmxvYihbZGF0YVN0cl0sIHt0eXBlOiAiYXBwbGljYXRpb24vanNvbjtjaGFyc2V0PXV0Zi04In0pOwogICAgICAgICAgICBjb25zdCB1cmwgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpOwogICAgICAgICAgICBjb25zdCBhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpOwogICAgICAgICAgICBhLmhyZWYgPSB1cmw7CiAgICAgICAgICAgIGNvbnN0IGQgPSBuZXcgRGF0ZSgpOwogICAgICAgICAgICBjb25zdCBkYXRlU3RyID0gZC50b0lTT1N0cmluZygpLnNwbGl0KCdUJylbMF07CiAgICAgICAgICAgIGEuZG93bmxvYWQgPSBgUFJPSkVUX0VYQU1fJHtkYXRlU3RyfS5qc29uYDsKICAgICAgICAgICAgYS5jbGljaygpOwogICAgICAgICAgICBVUkwucmV2b2tlT2JqZWN0VVJMKHVybCk7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBsb2FkUHJvamVjdChpbnB1dCkgewogICAgICAgICAgICBjb25zdCBmaWxlID0gaW5wdXQuZmlsZXNbMF07CiAgICAgICAgICAgIGlmICghZmlsZSkgcmV0dXJuOwogICAgICAgICAgICBjb25zdCByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpOwogICAgICAgICAgICByZWFkZXIub25sb2FkID0gZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICBBcHBTdGF0ZSA9IEpTT04ucGFyc2UoZS50YXJnZXQucmVzdWx0KTsKICAgICAgICAgICAgICAgICAgICByZXN0b3JlUHJvamVjdFVJKCk7CiAgICAgICAgICAgICAgICAgICAgYWxlcnQoIlByb2pldCBjaGFyZ8OpIGF2ZWMgc3VjY8OocyAhIik7CiAgICAgICAgICAgICAgICB9IGNhdGNoKGVycikgeyBjb25zb2xlLmVycm9yKGVycik7IGFsZXJ0KCJFcnJldXIgbG9ycyBkZSBsYSBsZWN0dXJlLiIpOyB9CiAgICAgICAgICAgIH07CiAgICAgICAgICAgIHJlYWRlci5yZWFkQXNUZXh0KGZpbGUpOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gcmVzdG9yZVByb2plY3RVSSgpIHsKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbmZpZ05hbWUnKS52YWx1ZSA9IEFwcFN0YXRlLmNvbmZpZy5uYW1lIHx8ICIiOwogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29uZmlnUm9sZScpLnZhbHVlID0gQXBwU3RhdGUuY29uZmlnLnJvbGUgfHwgIiI7CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb25maWdFeGFtVGl0bGUnKS52YWx1ZSA9IEFwcFN0YXRlLmNvbmZpZy5leGFtVGl0bGUgfHwgIiI7CiAgICAgICAgICAgIGlmKEFwcFN0YXRlLmNvbmZpZy5sb2dvU3JjKSB7IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb2dvUHJldmlldycpLnNyYyA9IEFwcFN0YXRlLmNvbmZpZy5sb2dvU3JjOyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbG9nb1ByZXZpZXcnKS5zdHlsZS5kaXNwbGF5PSdibG9jayc7IH0KICAgICAgICAgICAgaWYoQXBwU3RhdGUuY29uZmlnLnNpZ25TcmMpIHsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NpZ25QcmV2aWV3Jykuc3JjID0gQXBwU3RhdGUuY29uZmlnLnNpZ25TcmM7IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzaWduUHJldmlldycpLnN0eWxlLmRpc3BsYXk9J2Jsb2NrJzsgfQogICAgICAgICAgICBpZihBcHBTdGF0ZS5lbGV2ZXMgJiYgQXBwU3RhdGUuZWxldmVzLmxlbmd0aCkgdXBkYXRlU3RhdHVzKCd6b25lLWVsZXZlcycsICdzdGF0dXMtZWxldmVzJywgYCR7QXBwU3RhdGUuZWxldmVzLmxlbmd0aH0gw6lsw6h2ZXNgKTsKICAgICAgICAgICAgaWYoQXBwU3RhdGUuZXByZXV2ZXMgJiYgQXBwU3RhdGUuZXByZXV2ZXMubGVuZ3RoKSB1cGRhdGVTdGF0dXMoJ3pvbmUtZXByZXV2ZXMnLCAnc3RhdHVzLWVwcmV1dmVzJywgYCR7QXBwU3RhdGUuZXByZXV2ZXMubGVuZ3RofSDDqXByZXV2ZXNgKTsKICAgICAgICAgICAgaWYoQXBwU3RhdGUuc2FsbGVzICYmIEFwcFN0YXRlLnNhbGxlcy5sZW5ndGgpIHVwZGF0ZVN0YXR1cygnem9uZS1yZXNzb3VyY2VzJywgJ3N0YXR1cy1yZXNzb3VyY2VzJywgYCR7QXBwU3RhdGUuc2FsbGVzLmxlbmd0aH0gc2FsbGVzYCk7CiAgICAgICAgICAgIGlmKEFwcFN0YXRlLnN1cnZlaWxsYW50cyAmJiBBcHBTdGF0ZS5zdXJ2ZWlsbGFudHMubGVuZ3RoKSB1cGRhdGVTdGF0dXMoJ3pvbmUtc3VydmVpbGxhbnRzJywgJ3N0YXR1cy1zdXJ2ZWlsbGFudHMnLCBgJHtBcHBTdGF0ZS5zdXJ2ZWlsbGFudHMubGVuZ3RofSBzdXJ2ZWlsbGFudHNgKTsKICAgICAgICAgICAgaWYoQXBwU3RhdGUuZGlzdHJpYnV0aW9uRGF0YSAmJiBBcHBTdGF0ZS5kaXN0cmlidXRpb25EYXRhLmxlbmd0aCkgeyByZW5kZXJFeGFtTmF2aWdhdGlvbigpOyByZW5kZXJDdXJyZW50RXhhbSgpOyB9CiAgICAgICAgICAgIGlmKEFwcFN0YXRlLmNvbnZvY1RleHQpIHsKICAgICAgICAgICAgICAgIGlmKEFwcFN0YXRlLmNvbnZvY1RleHQuYWRkcmVzcykgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3R4dC1hZGRyZXNzJykudmFsdWUgPSBBcHBTdGF0ZS5jb252b2NUZXh0LmFkZHJlc3M7CiAgICAgICAgICAgICAgICBpZihBcHBTdGF0ZS5jb252b2NUZXh0LmJvZHkpIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0eHQtYm9keScpLmlubmVySFRNTCA9IEFwcFN0YXRlLmNvbnZvY1RleHQuYm9keTsKICAgICAgICAgICAgICAgIGlmKEFwcFN0YXRlLmNvbnZvY1RleHQucnVsZXMpIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0eHQtcnVsZXMnKS5pbm5lckhUTUwgPSBBcHBTdGF0ZS5jb252b2NUZXh0LnJ1bGVzOwogICAgICAgICAgICAgICAgaWYoQXBwU3RhdGUuY29udm9jVGV4dC5jaXR5KSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndHh0LWNpdHknKS5pbm5lclRleHQgPSBBcHBTdGF0ZS5jb252b2NUZXh0LmNpdHk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgIGlmKEFwcFN0YXRlLnN1cnZDb252b2NUZXh0KSB7CiAgICAgICAgICAgICAgICBpZihBcHBTdGF0ZS5zdXJ2Q29udm9jVGV4dC5hZGRyZXNzKSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndHh0LXN1cnYtYWRkcmVzcycpLnZhbHVlID0gQXBwU3RhdGUuc3VydkNvbnZvY1RleHQuYWRkcmVzczsKICAgICAgICAgICAgICAgIGlmKEFwcFN0YXRlLnN1cnZDb252b2NUZXh0LmJvZHkpIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0eHQtc3Vydi1ib2R5JykuaW5uZXJIVE1MID0gQXBwU3RhdGUuc3VydkNvbnZvY1RleHQuYm9keTsKICAgICAgICAgICAgICAgIGlmKEFwcFN0YXRlLnN1cnZDb252b2NUZXh0LnJ1bGVzKSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndHh0LXN1cnYtcnVsZXMnKS5pbm5lckhUTUwgPSBBcHBTdGF0ZS5zdXJ2Q29udm9jVGV4dC5ydWxlczsKICAgICAgICAgICAgICAgIGlmKEFwcFN0YXRlLnN1cnZDb252b2NUZXh0LmNpdHkpIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0eHQtc3Vydi1jaXR5JykuaW5uZXJUZXh0ID0gQXBwU3RhdGUuc3VydkNvbnZvY1RleHQuY2l0eTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZihBcHBTdGF0ZS5wb2NoZXR0ZVRleHQgJiYgQXBwU3RhdGUucG9jaGV0dGVUZXh0LnN1cnYpIHsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3R4dC1wb2NoZXR0ZS1zdXJ2JykudmFsdWUgPSBBcHBTdGF0ZS5wb2NoZXR0ZVRleHQuc3VydjsgfSBlbHNlIHsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3R4dC1wb2NoZXR0ZS1zdXJ2JykudmFsdWUgPSBkZWZhdWx0Q29uc2lnbmVzOyB9CiAgICAgICAgICAgIHBvcHVsYXRlQ2xhc3NGaWx0ZXIoKTsKICAgICAgICAgICAgcG9wdWxhdGVTdXJ2ZWlsbGFudEZpbHRlcigpOwogICAgICAgICAgICBwb3B1bGF0ZUVtYXJnZW1lbnRGaWx0ZXJzKCk7CiAgICAgICAgICAgIHBvcHVsYXRlUFZFeGFtU2VsZWN0KCk7CiAgICAgICAgICAgIHBvcHVsYXRlUmVjYXBGaWx0ZXJzKCk7CiAgICAgICAgICAgIHBvcHVsYXRlTGFiZWxGaWx0ZXJzKCk7CiAgICAgICAgICAgIGlmKEFwcFN0YXRlLmVsZXZlcy5sZW5ndGggPiAwICYmIEFwcFN0YXRlLmVsZXZlc1swXS5OdW1Bbm9ueW1hdCkgcmVuZGVyQW5vbnltaXR5VGFibGUoKTsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgZnVuY3Rpb24gZ2V0VmFsdWUocm93LCBwb3NzaWJsZUtleXMpIHsKICAgICAgICAgICAgaWYgKCFyb3cpIHJldHVybiBudWxsOwogICAgICAgICAgICBjb25zdCByb3dLZXlzID0gT2JqZWN0LmtleXMocm93KTsKICAgICAgICAgICAgZm9yIChsZXQgcGsgb2YgcG9zc2libGVLZXlzKSB7CiAgICAgICAgICAgICAgICBjb25zdCB0YXJnZXQgPSBub3JtYWxpemUocGspOwogICAgICAgICAgICAgICAgY29uc3QgZm91bmRLZXkgPSByb3dLZXlzLmZpbmQoayA9PiBub3JtYWxpemUoaykgPT09IHRhcmdldCk7CiAgICAgICAgICAgICAgICBpZiAoZm91bmRLZXkpIHJldHVybiByb3dbZm91bmRLZXldOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gaXNUaWVyc1RlbXBzKHZhbCkgeyBpZiAoIXZhbCkgcmV0dXJuIGZhbHNlOyBjb25zdCBzID0gdmFsLnRvU3RyaW5nKCkudG9VcHBlckNhc2UoKTsgcmV0dXJuIHMuaW5jbHVkZXMoJ1RUJykgfHwgcy5pbmNsdWRlcygnT1VJJykgfHwgcy5pbmNsdWRlcygnVElFUlMnKSB8fCBzLmluY2x1ZGVzKCdZRVMnKTsgfQoKICAgICAgICBmdW5jdGlvbiBoYW5kbGVGaWxlKGlucHV0LCB0eXBlKSB7IAogICAgICAgICAgICBjb25zdCBmaWxlID0gaW5wdXQuZmlsZXNbMF07IGlmICghZmlsZSkgcmV0dXJuOwogICAgICAgICAgICBjb25zdCByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpOwogICAgICAgICAgICByZWFkZXIub25sb2FkID0gZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgY29uc3QgZGF0YSA9IG5ldyBVaW50OEFycmF5KGUudGFyZ2V0LnJlc3VsdCk7IAogICAgICAgICAgICAgICAgY29uc3Qgd29ya2Jvb2sgPSBYTFNYLnJlYWQoZGF0YSwge3R5cGU6ICdhcnJheSd9KTsKICAgICAgICAgICAgICAgIGNvbnN0IGpzb25EYXRhID0gWExTWC51dGlscy5zaGVldF90b19qc29uKHdvcmtib29rLlNoZWV0c1t3b3JrYm9vay5TaGVldE5hbWVzWzBdXSk7CiAgICAgICAgICAgICAgICBpZiAodHlwZSA9PT0gJ0VMRVZFUycpIHsgQXBwU3RhdGUuZWxldmVzID0ganNvbkRhdGE7IHVwZGF0ZVN0YXR1cygnem9uZS1lbGV2ZXMnLCAnc3RhdHVzLWVsZXZlcycsIGAke2pzb25EYXRhLmxlbmd0aH0gw6lsw6h2ZXNgKTsgfQogICAgICAgICAgICAgICAgZWxzZSBpZiAodHlwZSA9PT0gJ0VQUkVVVkVTJykgeyBBcHBTdGF0ZS5lcHJldXZlcyA9IGpzb25EYXRhOyB1cGRhdGVTdGF0dXMoJ3pvbmUtZXByZXV2ZXMnLCAnc3RhdHVzLWVwcmV1dmVzJywgYCR7anNvbkRhdGEubGVuZ3RofSDDqXByZXV2ZXNgKTsgfQogICAgICAgICAgICAgICAgZWxzZSBpZiAodHlwZSA9PT0gJ1JFU1NPVVJDRVMnKSB7IEFwcFN0YXRlLnNhbGxlcyA9IGpzb25EYXRhOyB1cGRhdGVTdGF0dXMoJ3pvbmUtcmVzc291cmNlcycsICdzdGF0dXMtcmVzc291cmNlcycsIGAke2pzb25EYXRhLmxlbmd0aH0gc2FsbGVzYCk7IH0KICAgICAgICAgICAgICAgIGVsc2UgaWYgKHR5cGUgPT09ICdTVVJWRUlMTEFOVFMnKSB7IEFwcFN0YXRlLnN1cnZlaWxsYW50cyA9IGpzb25EYXRhOyB1cGRhdGVTdGF0dXMoJ3pvbmUtc3VydmVpbGxhbnRzJywgJ3N0YXR1cy1zdXJ2ZWlsbGFudHMnLCBgJHtqc29uRGF0YS5sZW5ndGh9IHN1cnZlaWxsYW50c2ApOyB9CiAgICAgICAgICAgIH07IAogICAgICAgICAgICByZWFkZXIucmVhZEFzQXJyYXlCdWZmZXIoZmlsZSk7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiB1cGRhdGVTdGF0dXMoem9uZUlkLCBzdGF0dXNJZCwgbXNnKSB7IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHpvbmVJZCkuY2xhc3NMaXN0LmFkZCgnbG9hZGVkJyk7IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHN0YXR1c0lkKS5pbm5lckhUTUwgPSAnPGkgY2xhc3M9ImZhLXNvbGlkIGZhLWNoZWNrIj48L2k+ICcgKyBtc2c7IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHN0YXR1c0lkKS5jbGFzc05hbWUgPSAnc3RhdHVzLWJhZGdlIHN0YXR1cy1vayc7IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHN0YXR1c0lkKS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJzsgfQoKICAgICAgICBmdW5jdGlvbiBsYXVuY2hEaXN0cmlidXRpb24oKSB7CiAgICAgICAgICAgIGlmKCFBcHBTdGF0ZS5lcHJldXZlcy5sZW5ndGggfHwgIUFwcFN0YXRlLmVsZXZlcy5sZW5ndGggfHwgIUFwcFN0YXRlLnNhbGxlcy5sZW5ndGgpIHsgYWxlcnQoIkltcG9ydCBtYW5xdWFudC4iKTsgcmV0dXJuOyB9CiAgICAgICAgICAgIGlmKCFjb25maXJtKCJMYW5jZXIgbGUgY2FsY3VsID8gQXR0ZW50aW9uLCBjZWxhIMOpY3Jhc2VyYSBsYSByw6lwYXJ0aXRpb24gZXhpc3RhbnRlIHBvdXIgbGEgcG9ydMOpZSBzw6lsZWN0aW9ubsOpZS4iKSkgcmV0dXJuOwogICAgICAgICAgICBjb25zdCBtZXRob2QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGlzdHJpYi1tZXRob2QnKS52YWx1ZTsgCiAgICAgICAgICAgIGNvbnN0IHNjb3BlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Rpc3RyaWItc2NvcGUnKS52YWx1ZTsgICAKICAgICAgICAgICAgY2FsY3VsYXRlRGlzdHJpYnV0aW9uKG1ldGhvZCwgc2NvcGUpOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gY2FsY3VsYXRlRGlzdHJpYnV0aW9uKG1ldGhvZCwgc2NvcGUpIHsKICAgICAgICAgICAgY29uc3QgZmlyc3RTdHVkZW50ID0gQXBwU3RhdGUuZWxldmVzWzBdOwogICAgICAgICAgICBjb25zdCBoYXNTcGVjaWFsdHkgPSBnZXRWYWx1ZShmaXJzdFN0dWRlbnQsIFsnU3DDqWNpYWxpdMOpMScsICdTcGUxJywgJ1NwZSAxJ10pICE9PSBudWxsOwogICAgICAgICAgICBpZiAoc2NvcGUgPT09ICdBTEwnIHx8IEFwcFN0YXRlLmRpc3RyaWJ1dGlvbkRhdGEubGVuZ3RoID09PSAwKSB7CiAgICAgICAgICAgICAgICBBcHBTdGF0ZS5kaXN0cmlidXRpb25EYXRhID0gbmV3IEFycmF5KEFwcFN0YXRlLmVwcmV1dmVzLmxlbmd0aCkuZmlsbChudWxsKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBsZXQgaW5kaWNlc1RvUHJvY2VzcyA9IFtdOwogICAgICAgICAgICBpZiAoc2NvcGUgPT09ICdBTEwnKSB7CiAgICAgICAgICAgICAgICBmb3IobGV0IGk9MDsgaTxBcHBTdGF0ZS5lcHJldXZlcy5sZW5ndGg7IGkrKykgaW5kaWNlc1RvUHJvY2Vzcy5wdXNoKGkpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgaW5kaWNlc1RvUHJvY2Vzcy5wdXNoKEFwcFN0YXRlLmN1cnJlbnRFeGFtSW5kZXgpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGluZGljZXNUb1Byb2Nlc3MuZm9yRWFjaChleGFtSWR4ID0+IHsKICAgICAgICAgICAgICAgIGNvbnN0IGV4YW0gPSBBcHBTdGF0ZS5lcHJldXZlc1tleGFtSWR4XTsKICAgICAgICAgICAgICAgIGxldCBleGFtU3RhdGUgPSB7IGV4YW1JZHg6IGV4YW1JZHgsIHN0b3JhZ2U6IFtdLCByb29tczogW10gfTsKICAgICAgICAgICAgICAgIGNvbnN0IG1hdGllcmUgPSBnZXRWYWx1ZShleGFtLCBbJ01hdGnDqHJlJywgJ0VwcmV1dmUnLCAnTm9tJ10pIHx8ICgnw4lwcmV1dmUgJyArIChleGFtSWR4ICsgMSkpOwogICAgICAgICAgICAgICAgbGV0IGNhbmRpZGF0ZXMgPSBBcHBTdGF0ZS5lbGV2ZXMuZmlsdGVyKGUgPT4gewogICAgICAgICAgICAgICAgICAgIGlmICghaGFzU3BlY2lhbHR5KSByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICBjb25zdCBzcGUxID0gZ2V0VmFsdWUoZSwgWydTcMOpY2lhbGl0w6kxJywgJ1NwZTEnLCAnU3BlIDEnXSk7CiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3BlMiA9IGdldFZhbHVlKGUsIFsnU3DDqWNpYWxpdMOpMicsICdTcGUyJywgJ1NwZSAyJ10pOwogICAgICAgICAgICAgICAgICAgIGlmICghc3BlMSAmJiAhc3BlMikgcmV0dXJuIHRydWU7IAogICAgICAgICAgICAgICAgICAgIHJldHVybiAoc3BlMSA9PSBtYXRpZXJlIHx8IHNwZTIgPT0gbWF0aWVyZSB8fCBbIlBoaWxvc29waGllIiwgIkZyYW7Dp2FpcyIsICJIaXN0b2lyZS1Hw6lvIiwgIkVuc2VpZ25lbWVudCBTY2llbnRpZmlxdWUiXS5pbmNsdWRlcyhtYXRpZXJlKSk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIGlmIChtZXRob2QgPT09ICdDTEFTUycpIHsKICAgICAgICAgICAgICAgICAgICBjYW5kaWRhdGVzLnNvcnQoKGEsIGIpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY0EgPSBub3JtQ2xhc3MoZ2V0VmFsdWUoYSwgWydDbGFzc2UnLCAnRGl2J10pKTsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY0IgPSBub3JtQ2xhc3MoZ2V0VmFsdWUoYiwgWydDbGFzc2UnLCAnRGl2J10pKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNBICE9PSBjQikgcmV0dXJuIGNBLmxvY2FsZUNvbXBhcmUoY0IpOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKGdldFZhbHVlKGEsWydOb20nXSl8fCcnKS5sb2NhbGVDb21wYXJlKGdldFZhbHVlKGIsWydOb20nXSl8fCcnKTsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgY2FuZGlkYXRlcy5zb3J0KChhLCBiKSA9PiAoZ2V0VmFsdWUoYSxbJ05vbSddKXx8JycpLmxvY2FsZUNvbXBhcmUoZ2V0VmFsdWUoYixbJ05vbSddKXx8JycpKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGNvbnN0IHR0U3R1ZGVudHMgPSBjYW5kaWRhdGVzLmZpbHRlcihlID0+IGlzVGllcnNUZW1wcyhnZXRWYWx1ZShlLCBbJ1RpZXJzIHRlbXBzJywgJ1RUJ10pKSk7CiAgICAgICAgICAgICAgICBjb25zdCByZWdTdHVkZW50cyA9IGNhbmRpZGF0ZXMuZmlsdGVyKGUgPT4gIWlzVGllcnNUZW1wcyhnZXRWYWx1ZShlLCBbJ1RpZXJzIHRlbXBzJywgJ1RUJ10pKSk7CiAgICAgICAgICAgICAgICBsZXQgcmVtYWluaW5nVFQgPSBbLi4udHRTdHVkZW50c107CiAgICAgICAgICAgICAgICBsZXQgcmVtYWluaW5nUmVnID0gWy4uLnJlZ1N0dWRlbnRzXTsKICAgICAgICAgICAgICAgIEFwcFN0YXRlLnNhbGxlcy5mb3JFYWNoKChzYWxsZSwgcm9vbUlkeCkgPT4gewogICAgICAgICAgICAgICAgICAgIGxldCByYXdOYW1lID0gZ2V0VmFsdWUoc2FsbGUsIFsnU2FsbGUnLCAnTm9tJ10pIHx8ICgnU2FsbGUgJyArIChyb29tSWR4ICsgMSkpOwogICAgICAgICAgICAgICAgICAgIGxldCBjbGVhbk5hbWUgPSByYXdOYW1lLnRvU3RyaW5nKCkucmVwbGFjZSgvXHMqXCg/VFRcKT9ccyokL2ksICcnKTsgCiAgICAgICAgICAgICAgICAgICAgY29uc3Qgcm9vbVR5cGUgPSBnZXRWYWx1ZShzYWxsZSwgWydUeXBlJ10pIHx8ICIiOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IHJvb21DYXAgPSBwYXJzZUludChnZXRWYWx1ZShzYWxsZSwgWydDYXBhY2l0w6knXSkpIHx8IDk5OyAKICAgICAgICAgICAgICAgICAgICBjb25zdCBpc1Jvb21UVCA9IGlzVGllcnNUZW1wcyhyb29tVHlwZSk7CiAgICAgICAgICAgICAgICAgICAgbGV0IGxpc3RUb1VzZTsKICAgICAgICAgICAgICAgICAgICBpZihpc1Jvb21UVCkgeyBsaXN0VG9Vc2UgPSByZW1haW5pbmdUVDsgfSBlbHNlIHsgbGlzdFRvVXNlID0gcmVtYWluaW5nUmVnOyB9CiAgICAgICAgICAgICAgICAgICAgbGV0IHJvb21TdHVkZW50cyA9IFtdOwogICAgICAgICAgICAgICAgICAgIGlmIChtZXRob2QgPT09ICdDTEFTUycpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGxpc3RUb1VzZS5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBmaXJzdFN0dWRlbnRDbGFzcyA9IG5vcm1DbGFzcyhnZXRWYWx1ZShsaXN0VG9Vc2VbMF0sIFsnQ2xhc3NlJywgJ0RpdiddKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgc2FtZUNsYXNzQ291bnQgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yKGxldCBrPTA7IGsgPCBsaXN0VG9Vc2UubGVuZ3RoOyBrKyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobm9ybUNsYXNzKGdldFZhbHVlKGxpc3RUb1VzZVtrXSwgWydDbGFzc2UnLCAnRGl2J10pKSA9PT0gZmlyc3RTdHVkZW50Q2xhc3MpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2FtZUNsYXNzQ291bnQrKzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhbW91bnRUb1Rha2UgPSBNYXRoLm1pbihyb29tQ2FwLCBzYW1lQ2xhc3NDb3VudCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByb29tU3R1ZGVudHMgPSBsaXN0VG9Vc2Uuc3BsaWNlKDAsIGFtb3VudFRvVGFrZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhbW91bnRUb1Rha2UgPSBNYXRoLm1pbihyb29tQ2FwLCBsaXN0VG9Vc2UubGVuZ3RoKTsKICAgICAgICAgICAgICAgICAgICAgICAgcm9vbVN0dWRlbnRzID0gbGlzdFRvVXNlLnNwbGljZSgwLCBhbW91bnRUb1Rha2UpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICByb29tU3R1ZGVudHMuc29ydCgoYSxiKSA9PiAoZ2V0VmFsdWUoYSxbJ05vbSddKXx8JycpLmxvY2FsZUNvbXBhcmUoZ2V0VmFsdWUoYixbJ05vbSddKXx8JycpKTsKICAgICAgICAgICAgICAgICAgICBleGFtU3RhdGUucm9vbXMucHVzaCh7IG5hbWU6IGNsZWFuTmFtZSwgY2FwYWNpdHk6IHJvb21DYXAsIGlzVFQ6IGlzUm9vbVRULCBzdXJ2ZWlsbGFudHM6IFtdLCBzdHVkZW50czogcm9vbVN0dWRlbnRzIH0pOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBleGFtU3RhdGUuc3RvcmFnZSA9IFsuLi5yZW1haW5pbmdUVCwgLi4ucmVtYWluaW5nUmVnXS5zb3J0KChhLGIpID0+IChnZXRWYWx1ZShhLFsnTm9tJ10pfHwnJykubG9jYWxlQ29tcGFyZShnZXRWYWx1ZShiLFsnTm9tJ10pfHwnJykpOyAKICAgICAgICAgICAgICAgIEFwcFN0YXRlLmRpc3RyaWJ1dGlvbkRhdGFbZXhhbUlkeF0gPSBleGFtU3RhdGU7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBpZiAoc2NvcGUgPT09ICdBTEwnKSBBcHBTdGF0ZS5jdXJyZW50RXhhbUluZGV4ID0gMDsKICAgICAgICAgICAgcmVuZGVyRXhhbU5hdmlnYXRpb24oKTsgCiAgICAgICAgICAgIHJlbmRlckN1cnJlbnRFeGFtKCk7IAogICAgICAgICAgICBwb3B1bGF0ZVBWRXhhbVNlbGVjdCgpOyAKICAgICAgICAgICAgcG9wdWxhdGVFbWFyZ2VtZW50RmlsdGVycygpOyAKICAgICAgICAgICAgcG9wdWxhdGVSZWNhcEZpbHRlcnMoKTsKICAgICAgICAgICAgcG9wdWxhdGVMYWJlbEZpbHRlcnMoKTsgCiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiByZW5kZXJFeGFtTmF2aWdhdGlvbigpIHsKICAgICAgICAgICAgY29uc3QgbmF2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2V4YW0tbmF2aWdhdGlvbicpOyBuYXYuc3R5bGUuZGlzcGxheSA9ICdmbGV4JzsKICAgICAgICAgICAgY29uc3Qgc2VsZWN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2V4YW0tZHJvcGRvd24nKTsgc2VsZWN0LmlubmVySFRNTCA9ICIiOwogICAgICAgICAgICBBcHBTdGF0ZS5kaXN0cmlidXRpb25EYXRhLmZvckVhY2goKGVkLCBpZHgpID0+IHsKICAgICAgICAgICAgICAgIGlmKCFlZCAmJiBBcHBTdGF0ZS5lcHJldXZlc1tpZHhdKSB7CiAgICAgICAgICAgICAgICAgICAgICBjb25zdCBleGFtSW5mbyA9IEFwcFN0YXRlLmVwcmV1dmVzW2lkeF07CiAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtYXRpZXJlID0gZ2V0VmFsdWUoZXhhbUluZm8sIFsnTWF0acOocmUnLCAnRXByZXV2ZScsICdOb20nXSkgfHwgKCfDiXByZXV2ZSAnICsgKGlkeCsxKSk7CiAgICAgICAgICAgICAgICAgICAgICBjb25zdCBvcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdvcHRpb24nKTsgb3B0LnZhbHVlID0gaWR4OyBvcHQudGV4dCA9IGAke2lkeCsxfS4gJHttYXRpZXJlfSAoTm9uIGNhbGN1bMOpKWA7CiAgICAgICAgICAgICAgICAgICAgICBzZWxlY3QuYXBwZW5kQ2hpbGQob3B0KTsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZihlZCkgewogICAgICAgICAgICAgICAgICAgIGNvbnN0IGV4YW1JbmZvID0gQXBwU3RhdGUuZXByZXV2ZXNbZWQuZXhhbUlkeF07CiAgICAgICAgICAgICAgICAgICAgY29uc3QgbWF0aWVyZSA9IGdldFZhbHVlKGV4YW1JbmZvLCBbJ01hdGnDqHJlJywgJ0VwcmV1dmUnLCAnTm9tJ10pIHx8ICgnw4lwcmV1dmUgJyArIChpZHgrMSkpOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IG9wdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ29wdGlvbicpOyBvcHQudmFsdWUgPSBpZHg7IG9wdC50ZXh0ID0gYCR7aWR4KzF9LiAke21hdGllcmV9YDsKICAgICAgICAgICAgICAgICAgICBpZihpZHggPT09IEFwcFN0YXRlLmN1cnJlbnRFeGFtSW5kZXgpIG9wdC5zZWxlY3RlZCA9IHRydWU7IHNlbGVjdC5hcHBlbmRDaGlsZChvcHQpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIHJlbmRlckN1cnJlbnRFeGFtKCkgeyAKICAgICAgICAgICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2N1cnJlbnQtZXhhbS1jb250YWluZXInKTsgY29udGFpbmVyLmlubmVySFRNTCA9ICIiOwogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZXhhbS1kcm9wZG93bicpLnZhbHVlID0gQXBwU3RhdGUuY3VycmVudEV4YW1JbmRleDsKICAgICAgICAgICAgY29uc3QgZXhhbVN0YXRlID0gQXBwU3RhdGUuZGlzdHJpYnV0aW9uRGF0YVtBcHBTdGF0ZS5jdXJyZW50RXhhbUluZGV4XTsgCiAgICAgICAgICAgIGlmICghZXhhbVN0YXRlKSB7CiAgICAgICAgICAgICAgICAgY29udGFpbmVyLmlubmVySFRNTCA9ICc8ZGl2IGNsYXNzPSJjYXJkIiBzdHlsZT0idGV4dC1hbGlnbjpjZW50ZXI7IGNvbG9yOiNjMDM5MmI7Ij5Sw6lwYXJ0aXRpb24gbm9uIGNhbGN1bMOpZSBwb3VyIGNldHRlIMOpcHJldXZlLjwvZGl2Pic7CiAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGNvbnN0IGV4YW1JbmZvID0gQXBwU3RhdGUuZXByZXV2ZXNbZXhhbVN0YXRlLmV4YW1JZHhdOwogICAgICAgICAgICBjb25zdCBtYXRpZXJlID0gZ2V0VmFsdWUoZXhhbUluZm8sIFsnTWF0acOocmUnLCAnRXByZXV2ZScsICdOb20nXSk7CiAgICAgICAgICAgIGNvbnN0IGJsb2NrSHRtbCA9IGA8ZGl2IGNsYXNzPSJleGFtLXNlY3Rpb24tYmxvY2siPjxkaXYgY2xhc3M9ImV4YW0tc2VjdGlvbi1oZWFkZXIiPjxzcGFuPiR7bWF0aWVyZX08L3NwYW4+PC9kaXY+PGg0IHN0eWxlPSJtYXJnaW46MTBweCAwIDVweCAwOyBjb2xvcjojN2Y4YzhkOyBmb250LXNpemU6MC45cmVtOyI+Wm9uZSBkZSBzdG9ja2FnZSAoTm9uIHBsYWPDqXMpPC9oND48ZGl2IGNsYXNzPSJzdG9yYWdlLXpvbmUiIG9uZHJvcD0iZHJvcChldmVudCkiIG9uZHJhZ292ZXI9ImFsbG93RHJvcChldmVudCkiPjwvZGl2PjxkaXYgY2xhc3M9InJvb21zLWdyaWQiPjwvZGl2PjwvZGl2PmA7CiAgICAgICAgICAgIGNvbnRhaW5lci5pbnNlcnRBZGphY2VudEhUTUwoJ2JlZm9yZWVuZCcsIGJsb2NrSHRtbCk7CiAgICAgICAgICAgIGNvbnN0IGJsb2NrID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5leGFtLXNlY3Rpb24tYmxvY2snKTsKICAgICAgICAgICAgY29uc3Qgc3RvcmFnZURpdiA9IGJsb2NrLnF1ZXJ5U2VsZWN0b3IoJy5zdG9yYWdlLXpvbmUnKTsKICAgICAgICAgICAgZXhhbVN0YXRlLnN0b3JhZ2UuZm9yRWFjaChzID0+IGNyZWF0ZVN0dWRlbnRFbGVtZW50KHMsIHN0b3JhZ2VEaXYpKTsKICAgICAgICAgICAgY29uc3Qgcm9vbXNHcmlkID0gYmxvY2sucXVlcnlTZWxlY3RvcignLnJvb21zLWdyaWQnKTsKICAgICAgICAgICAgZXhhbVN0YXRlLnJvb21zLmZvckVhY2goKHJvb21TdGF0ZSwgcklkeCkgPT4gewogICAgICAgICAgICAgICAgY29uc3QgdW5pcXVlSWQgPSBgcm9vbS0ke3JJZHh9YCwgc3VydkNvbnRhaW5lcklkID0gYHN1cnYtJHtySWR4fWA7CiAgICAgICAgICAgICAgICBjb25zdCB0dENsYXNzID0gcm9vbVN0YXRlLmlzVFQgPyAicm9vbS10dCIgOiAiIjsKICAgICAgICAgICAgICAgIGxldCBzdXJ2SHRtbCA9ICIiOwogICAgICAgICAgICAgICAgaWYocm9vbVN0YXRlLnN1cnZlaWxsYW50cyAmJiByb29tU3RhdGUuc3VydmVpbGxhbnRzLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICAgICAgICByb29tU3RhdGUuc3VydmVpbGxhbnRzLmZvckVhY2goKHN1cnZPYmosIGlkeFMpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHNOYW1lID0gKHR5cGVvZiBzdXJ2T2JqID09PSAnc3RyaW5nJykgPyBzdXJ2T2JqIDogc3Vydk9iai5uYW1lOwogICAgICAgICAgICAgICAgICAgICAgICBsZXQgc1RpbWUgPSAodHlwZW9mIHN1cnZPYmogPT09ICdvYmplY3QnICYmIHN1cnZPYmoudGltZSkgPyBzdXJ2T2JqLnRpbWUgOiAiIjsKICAgICAgICAgICAgICAgICAgICAgICAgc3Vydkh0bWwgKz0gY3JlYXRlU3VydmVpbGxhbnRSb3coc05hbWUsIHNUaW1lKTsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgc3Vydkh0bWwgPSBjcmVhdGVTdXJ2ZWlsbGFudFJvdygiIiwgIiIpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY29uc3Qgcm9vbUh0bWwgPSBgCiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0icm9vbS1jYXJkICR7dHRDbGFzc30iPgogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJyb29tLWhlYWRlciI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3Bhbj4ke3Jvb21TdGF0ZS5uYW1lfSAke3Jvb21TdGF0ZS5pc1RUPycoVFQpJzonJ308L3NwYW4+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJkaXNwbGF5OmZsZXg7IGFsaWduLWl0ZW1zOmNlbnRlcjsgZ2FwOjEwcHg7Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3Bhbj4ke3Jvb21TdGF0ZS5zdHVkZW50cy5sZW5ndGh9LyR7cm9vbVN0YXRlLmNhcGFjaXR5fTwvc3Bhbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIG9uY2xpY2s9ImNsZWFyUm9vbSgke3JJZHh9KSIgc3R5bGU9ImJhY2tncm91bmQ6d2hpdGU7IGJvcmRlcjpub25lOyBjb2xvcjojYzAzOTJiOyBjdXJzb3I6cG9pbnRlcjsgcGFkZGluZzoycHggNnB4OyBib3JkZXItcmFkaXVzOjRweDsiIHRpdGxlPSJWaWRlciBsYSBzYWxsZSI+PGkgY2xhc3M9ImZhLXNvbGlkIGZhLXRyYXNoIj48L2k+PC9idXR0b24+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InJvb20tc3VydmVpbGxhbnRzLWFyZWEiIGlkPSIke3N1cnZDb250YWluZXJJZH0iPiR7c3Vydkh0bWx9PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImJ0bi1hZGQtc3VydiIgb25jbGljaz0iYWRkU3VydmVpbGxhbnRGaWVsZCgnJHtzdXJ2Q29udGFpbmVySWR9JykiPkFqb3V0ZXI8L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0icm9vbS1ib2R5IiBpZD0iJHt1bmlxdWVJZH0iIG9uZHJvcD0iZHJvcChldmVudCkiIG9uZHJhZ292ZXI9ImFsbG93RHJvcChldmVudCkiIGRhdGEtY2FwYWNpdHk9IiR7cm9vbVN0YXRlLmNhcGFjaXR5fSIgZGF0YS1pcy10dD0iJHtyb29tU3RhdGUuaXNUVH0iPjwvZGl2PgogICAgICAgICAgICAgICAgICAgIDwvZGl2PmA7CiAgICAgICAgICAgICAgICByb29tc0dyaWQuaW5zZXJ0QWRqYWNlbnRIVE1MKCdiZWZvcmVlbmQnLCByb29tSHRtbCk7CiAgICAgICAgICAgICAgICBjb25zdCBib2R5RGl2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodW5pcXVlSWQpOwogICAgICAgICAgICAgICAgcm9vbVN0YXRlLnN0dWRlbnRzLmZvckVhY2gocyA9PiBjcmVhdGVTdHVkZW50RWxlbWVudChzLCBib2R5RGl2KSk7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gY3JlYXRlU3R1ZGVudEVsZW1lbnQoZGF0YSwgcGFyZW50KSB7IGNvbnN0IGVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7IGVsLmNsYXNzTmFtZSA9ICdzdHVkZW50LWl0ZW0nOyBlbC5kYXRhc2V0LmluZm8gPSBKU09OLnN0cmluZ2lmeShkYXRhKTsgaWYoaXNUaWVyc1RlbXBzKGdldFZhbHVlKGRhdGEsWydUaWVycyB0ZW1wcycsJ1RUJ10pKSkgZWwuY2xhc3NMaXN0LmFkZCgnaXMtdHQnKTsgY29uc3QgZnVsbE5hbWUgPSBnZXRWYWx1ZShkYXRhLFsnTm9tJ10pICsgIiAiICsgZ2V0VmFsdWUoZGF0YSxbJ1Byw6lub20nXSk7IGVsLmlubmVySFRNTCA9IGA8c3Bhbj4ke2Z1bGxOYW1lfSAoJHtnZXRWYWx1ZShkYXRhLFsnQ2xhc3NlJ10pfSk8L3NwYW4+YDsgZWwuc2V0QXR0cmlidXRlKCdkYXRhLXNvcnQnLCBmdWxsTmFtZS50b1VwcGVyQ2FzZSgpKTsgZWwuZHJhZ2dhYmxlID0gdHJ1ZTsgZWwuaWQgPSAicy0iK01hdGgucmFuZG9tKCk7IGVsLm9uZHJhZ3N0YXJ0ID0gZHJhZzsgcGFyZW50LmFwcGVuZENoaWxkKGVsKTsgfQogICAgICAgIAogICAgICAgIGZ1bmN0aW9uIHN3aXRjaFRhYihlbGVtZW50LCB0YWJJZCkgeyAKICAgICAgICAgICAgaWYoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ZpZXczJykuY2xhc3NMaXN0LmNvbnRhaW5zKCdhY3RpdmUnKSAmJiBBcHBTdGF0ZS5kaXN0cmlidXRpb25EYXRhLmxlbmd0aD4wKSB7CiAgICAgICAgICAgICAgICB0cnkgeyB1cGRhdGVDdXJyZW50RXhhbVN0YXRlKCk7IH0gY2F0Y2goZSkgeyBjb25zb2xlLndhcm4oIlNhdmUgc3RhdGUgZmFpbGVkIiwgZSk7IH0KICAgICAgICAgICAgfQogICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuc3RlcC1idG4nKS5mb3JFYWNoKGJ0biA9PiBidG4uY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJykpOyAKICAgICAgICAgICAgZWxlbWVudC5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTsgCiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5zZWN0aW9uLXZpZXcnKS5mb3JFYWNoKHZpZXcgPT4gdmlldy5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKSk7IAogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0YWJJZCkuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7IAogICAgICAgICAgICBpZih0YWJJZD09PSd2aWV3NCcpIHBvcHVsYXRlQ2xhc3NGaWx0ZXIoKTsgCiAgICAgICAgICAgIGlmKHRhYklkPT09J3ZpZXc1JykgcG9wdWxhdGVTdXJ2ZWlsbGFudEZpbHRlcigpOyAKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGp1bXBUb0V4YW0oaWR4KSB7IHVwZGF0ZUN1cnJlbnRFeGFtU3RhdGUoKTsgQXBwU3RhdGUuY3VycmVudEV4YW1JbmRleCA9IHBhcnNlSW50KGlkeCk7IHJlbmRlckN1cnJlbnRFeGFtKCk7IH0KICAgICAgICBmdW5jdGlvbiBwcmV2RXhhbSgpIHsgaWYoQXBwU3RhdGUuY3VycmVudEV4YW1JbmRleD4wKSB7IHVwZGF0ZUN1cnJlbnRFeGFtU3RhdGUoKTsgQXBwU3RhdGUuY3VycmVudEV4YW1JbmRleC0tOyByZW5kZXJDdXJyZW50RXhhbSgpOyB9IH0KICAgICAgICBmdW5jdGlvbiBuZXh0RXhhbSgpIHsgaWYoQXBwU3RhdGUuY3VycmVudEV4YW1JbmRleDxBcHBTdGF0ZS5kaXN0cmlidXRpb25EYXRhLmxlbmd0aC0xKSB7IHVwZGF0ZUN1cnJlbnRFeGFtU3RhdGUoKTsgQXBwU3RhdGUuY3VycmVudEV4YW1JbmRleCsrOyByZW5kZXJDdXJyZW50RXhhbSgpOyB9IH0KICAgICAgICAKICAgICAgICBmdW5jdGlvbiB1cGRhdGVDdXJyZW50RXhhbVN0YXRlKCkgeyAKICAgICAgICAgICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2N1cnJlbnQtZXhhbS1jb250YWluZXInKTsgCiAgICAgICAgICAgIGNvbnN0IGJsb2NrID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5leGFtLXNlY3Rpb24tYmxvY2snKTsgCiAgICAgICAgICAgIGlmKCFibG9jaykgcmV0dXJuOyAKICAgICAgICAgICAgY29uc3QgZXhhbVN0YXRlID0gQXBwU3RhdGUuZGlzdHJpYnV0aW9uRGF0YVtBcHBTdGF0ZS5jdXJyZW50RXhhbUluZGV4XTsgCiAgICAgICAgICAgIGlmKCFleGFtU3RhdGUpIHJldHVybjsgCiAgICAgICAgICAgIGNvbnN0IHN0b3JhZ2VEaXYgPSBibG9jay5xdWVyeVNlbGVjdG9yKCcuc3RvcmFnZS16b25lJyk7IAogICAgICAgICAgICBleGFtU3RhdGUuc3RvcmFnZSA9IEFycmF5LmZyb20oc3RvcmFnZURpdi5jaGlsZHJlbikubWFwKGNoaWxkID0+IEpTT04ucGFyc2UoY2hpbGQuZGF0YXNldC5pbmZvKSk7IAogICAgICAgICAgICBjb25zdCByb29tQ2FyZHMgPSBibG9jay5xdWVyeVNlbGVjdG9yQWxsKCcucm9vbS1jYXJkJyk7IAogICAgICAgICAgICBleGFtU3RhdGUucm9vbXMgPSBbXTsgCiAgICAgICAgICAgIHJvb21DYXJkcy5mb3JFYWNoKGNhcmQgPT4geyAKICAgICAgICAgICAgICAgIGNvbnN0IGJvZHkgPSBjYXJkLnF1ZXJ5U2VsZWN0b3IoJy5yb29tLWJvZHknKTsgCiAgICAgICAgICAgICAgICBjb25zdCBjYXAgPSBib2R5LmdldEF0dHJpYnV0ZSgnZGF0YS1jYXBhY2l0eScpOyAKICAgICAgICAgICAgICAgIGNvbnN0IGlzVFQgPSBib2R5LmdldEF0dHJpYnV0ZSgnZGF0YS1pcy10dCcpID09PSAndHJ1ZSc7IAogICAgICAgICAgICAgICAgY29uc3Qgcm9vbU5hbWUgPSBjYXJkLnF1ZXJ5U2VsZWN0b3IoJy5yb29tLWhlYWRlciBzcGFuJykudGV4dENvbnRlbnQucmVwbGFjZSgnKFRUKScsJycpLnRyaW0oKTsgCiAgICAgICAgICAgICAgICBjb25zdCBzdXJ2Um93cyA9IEFycmF5LmZyb20oY2FyZC5xdWVyeVNlbGVjdG9yQWxsKCcuc3VydmVpbGxhbnQtcm93JykpOwogICAgICAgICAgICAgICAgY29uc3Qgc3VydkRhdGEgPSBzdXJ2Um93cy5tYXAocm93ID0+IHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiByb3cucXVlcnlTZWxlY3Rvcignc2VsZWN0JykudmFsdWUsCiAgICAgICAgICAgICAgICAgICAgICAgIHRpbWU6IHJvdy5xdWVyeVNlbGVjdG9yKCdpbnB1dC50aW1lLWlucHV0JykudmFsdWUKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBjb25zdCBzdHVkZW50cyA9IEFycmF5LmZyb20oYm9keS5jaGlsZHJlbikubWFwKHMgPT4gSlNPTi5wYXJzZShzLmRhdGFzZXQuaW5mbykpOyAKICAgICAgICAgICAgICAgIGV4YW1TdGF0ZS5yb29tcy5wdXNoKHsgbmFtZTogcm9vbU5hbWUsIGNhcGFjaXR5OiBjYXAsIGlzVFQ6IGlzVFQsIHN1cnZlaWxsYW50czogc3VydkRhdGEsIHN0dWRlbnRzOiBzdHVkZW50cyB9KTsgCiAgICAgICAgICAgIH0pOyAKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgZnVuY3Rpb24gZHJhZyhldikgeyBldi5kYXRhVHJhbnNmZXIuc2V0RGF0YSgidGV4dCIsIGV2LnRhcmdldC5pZCk7IH0KICAgICAgICAKICAgICAgICAvLyAtLS0gR0VTVElPTiBEVSBERUZJTEVNRU5UIEFVVE8gKE9QVElNSVPDiUUgVklURVNTRSkgLS0tCiAgICAgICAgbGV0IHNjcm9sbEludGVydmFsOwogICAgICAgIGNvbnN0IG1haW5Db250ZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1haW4tY29udGVudCcpOwogICAgICAgIGNvbnN0IHNjcm9sbFRocmVzaG9sZCA9IDEwMDsKCiAgICAgICAgZnVuY3Rpb24gc3RvcEF1dG9TY3JvbGwoKSB7CiAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwoc2Nyb2xsSW50ZXJ2YWwpOwogICAgICAgICAgICBzY3JvbGxJbnRlcnZhbCA9IG51bGw7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBoYW5kbGVBdXRvU2Nyb2xsKGUpIHsKICAgICAgICAgICAgY29uc3QgcmVjdCA9IG1haW5Db250ZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOwogICAgICAgICAgICBjb25zdCBtb3VzZVkgPSBlLmNsaWVudFk7CiAgICAgICAgICAgIGNvbnN0IGRpc3RUb3AgPSBtb3VzZVkgLSByZWN0LnRvcDsKICAgICAgICAgICAgY29uc3QgZGlzdEJvdHRvbSA9IHJlY3QuYm90dG9tIC0gbW91c2VZOwoKICAgICAgICAgICAgc3RvcEF1dG9TY3JvbGwoKTsKCiAgICAgICAgICAgIC8vIFNpIHN1cnZvbCBkJ3VuZSB6b25lIHNjcm9sbGFibGUgKHJvb21zLWdyaWQpIG91IHN0b3JhZ2UKICAgICAgICAgICAgaWYgKGUudGFyZ2V0LmNsb3Nlc3QoJy5yb29tcy1ncmlkJykgfHwgZS50YXJnZXQuY2xvc2VzdCgnLnN0b3JhZ2Utem9uZScpKSB7CiAgICAgICAgICAgICAgICBpZiAoZGlzdFRvcCA8IHNjcm9sbFRocmVzaG9sZCB8fCBkaXN0Qm90dG9tIDwgc2Nyb2xsVGhyZXNob2xkKSB7CiAgICAgICAgICAgICAgICAgICAgc2Nyb2xsSW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCgoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBzcGVlZCA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkaXN0VG9wIDwgc2Nyb2xsVGhyZXNob2xkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBQbHVzIHByb2NoZSBkdSBoYXV0ID0gUGx1cyByYXBpZGUgKHZpdGVzc2UgZXhwb25lbnRpZWxsZSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNwZWVkID0gLU1hdGgucG93KChzY3JvbGxUaHJlc2hvbGQgLSBkaXN0VG9wKSAvIDEwLCAyKSAtIDU7CiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZGlzdEJvdHRvbSA8IHNjcm9sbFRocmVzaG9sZCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gUGx1cyBwcm9jaGUgZHUgYmFzID0gUGx1cyByYXBpZGUKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNwZWVkID0gTWF0aC5wb3coKHNjcm9sbFRocmVzaG9sZCAtIGRpc3RCb3R0b20pIC8gMTAsIDIpICsgNTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBtYWluQ29udGVudC5zY3JvbGxUb3AgKz0gc3BlZWQ7CiAgICAgICAgICAgICAgICAgICAgfSwgMTYpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBkcm9wKGV2KSB7IAogICAgICAgICAgICBldi5wcmV2ZW50RGVmYXVsdCgpOyAKICAgICAgICAgICAgc3RvcEF1dG9TY3JvbGwoKTsKICAgICAgICAgICAgdmFyIGRhdGEgPSBldi5kYXRhVHJhbnNmZXIuZ2V0RGF0YSgidGV4dCIpOyAKICAgICAgICAgICAgdmFyIGRyYWdnZWRFbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGRhdGEpOyAKICAgICAgICAgICAgbGV0IHRhcmdldCA9IGV2LnRhcmdldDsgCiAgICAgICAgICAgIHdoaWxlKHRhcmdldCAmJiAhdGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygncm9vbS1ib2R5JykgJiYgIXRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3N0b3JhZ2Utem9uZScpKSB0YXJnZXQgPSB0YXJnZXQucGFyZW50RWxlbWVudDsgCiAgICAgICAgICAgIGlmKHRhcmdldCkgeyAKICAgICAgICAgICAgICAgIGlmKHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3Jvb20tYm9keScpKSB7IAogICAgICAgICAgICAgICAgICAgIGNvbnN0IGNhcCA9IHBhcnNlSW50KHRhcmdldC5nZXRBdHRyaWJ1dGUoJ2RhdGEtY2FwYWNpdHknKSk7IAogICAgICAgICAgICAgICAgICAgIGlmKHRhcmdldC5jaGlsZHJlbi5sZW5ndGggPj0gY2FwKSB7IGFsZXJ0KCJQbGVpbiAhIik7IHJldHVybjsgfSAKICAgICAgICAgICAgICAgIH0gCiAgICAgICAgICAgICAgICB0YXJnZXQuYXBwZW5kQ2hpbGQoZHJhZ2dlZEVsKTsgCiAgICAgICAgICAgICAgICBzb3J0Q29udGFpbmVyKHRhcmdldCk7CiAgICAgICAgICAgICAgICB1cGRhdGVDdXJyZW50RXhhbVN0YXRlKCk7CiAgICAgICAgICAgICAgICB1cGRhdGVSZWFsVGltZUNvdW50ZXJzKCk7CiAgICAgICAgICAgIH0gCiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBhbGxvd0Ryb3AoZXYpIHsgCiAgICAgICAgICAgIGV2LnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgICAgIGV2LnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpOyAvLyBQcsOpdmVudGlvbiBkZXMgY29uZmxpdHMgZGUgc8OpbGVjdGlvbgogICAgICAgICAgICBoYW5kbGVBdXRvU2Nyb2xsKGV2KTsKICAgICAgICB9CgogICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdlbmQnLCBzdG9wQXV0b1Njcm9sbCk7CiAgICAgICAgCiAgICAgICAgZnVuY3Rpb24gc29ydENvbnRhaW5lcihjb250YWluZXIpIHsgCiAgICAgICAgICAgIGNvbnN0IGl0ZW1zID0gQXJyYXkuZnJvbShjb250YWluZXIuY2hpbGRyZW4pOyAKICAgICAgICAgICAgaXRlbXMuc29ydCgoYSwgYikgPT4geyAKICAgICAgICAgICAgICAgIGNvbnN0IG5hbWVBID0gYS5nZXRBdHRyaWJ1dGUoJ2RhdGEtc29ydCcpIHx8ICIiOyAKICAgICAgICAgICAgICAgIGNvbnN0IG5hbWVCID0gYi5nZXRBdHRyaWJ1dGUoJ2RhdGEtc29ydCcpIHx8ICIiOyAKICAgICAgICAgICAgICAgIHJldHVybiBuYW1lQS5sb2NhbGVDb21wYXJlKG5hbWVCKTsgCiAgICAgICAgICAgIH0pOyAKICAgICAgICAgICAgaXRlbXMuZm9yRWFjaChpdGVtID0+IGNvbnRhaW5lci5hcHBlbmRDaGlsZChpdGVtKSk7IAogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gY2xlYXJSb29tKHJJZHgpIHsKICAgICAgICAgICAgaWYoIWNvbmZpcm0oIlZvdWxlei12b3VzIHZyYWltZW50IHZpZGVyIHRvdXRlIGNldHRlIHNhbGxlID8iKSkgcmV0dXJuOwogICAgICAgICAgICB1cGRhdGVDdXJyZW50RXhhbVN0YXRlKCk7CiAgICAgICAgICAgIGNvbnN0IGV4YW1EYXRhID0gQXBwU3RhdGUuZGlzdHJpYnV0aW9uRGF0YVtBcHBTdGF0ZS5jdXJyZW50RXhhbUluZGV4XTsKICAgICAgICAgICAgY29uc3Qgcm9vbSA9IGV4YW1EYXRhLnJvb21zW3JJZHhdOwogICAgICAgICAgICBpZihyb29tLnN0dWRlbnRzLmxlbmd0aCA9PT0gMCkgcmV0dXJuOwogICAgICAgICAgICBleGFtRGF0YS5zdG9yYWdlLnB1c2goLi4ucm9vbS5zdHVkZW50cyk7CiAgICAgICAgICAgIHJvb20uc3R1ZGVudHMgPSBbXTsKICAgICAgICAgICAgZXhhbURhdGEuc3RvcmFnZS5zb3J0KChhLGIpID0+IChnZXRWYWx1ZShhLFsnTm9tJ10pfHwnJykubG9jYWxlQ29tcGFyZShnZXRWYWx1ZShiLFsnTm9tJ10pfHwnJykpOwogICAgICAgICAgICByZW5kZXJDdXJyZW50RXhhbSgpOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gZ2V0U3VydmVpbGxhbnRPcHRpb25zKHNlbGVjdGVkPSIiKSB7IGlmKCFBcHBTdGF0ZS5zdXJ2ZWlsbGFudHMpIHJldHVybiAiIjsgbGV0IG9wdHMgPSAnPG9wdGlvbiB2YWx1ZT0iIj4tLSBTdXJ2IC0tPC9vcHRpb24+JzsgQXBwU3RhdGUuc3VydmVpbGxhbnRzLmZvckVhY2gocyA9PiB7IGNvbnN0IHZhbCA9IGdldFZhbHVlKHMsWydOb20nXSkgKyAnICcgKyBnZXRWYWx1ZShzLFsnUHLDqW5vbSddKTsgb3B0cyArPSBgPG9wdGlvbiB2YWx1ZT0iJHt2YWx9IiAkeyh2YWw9PT1zZWxlY3RlZCk/J3NlbGVjdGVkJzonJ30+JHt2YWx9PC9vcHRpb24+YDsgfSk7IHJldHVybiBvcHRzOyB9CiAgICAgICAgCiAgICAgICAgZnVuY3Rpb24gY3JlYXRlU3VydmVpbGxhbnRSb3coc2VsZWN0ZWROYW1lLCB0aW1lVmFsKSB7CiAgICAgICAgICAgIHJldHVybiBgPGRpdiBjbGFzcz0ic3VydmVpbGxhbnQtcm93Ij4KICAgICAgICAgICAgICAgICAgICAgICAgPHNlbGVjdCBvbmNoYW5nZT0idXBkYXRlQ3VycmVudEV4YW1TdGF0ZSgpIj4ke2dldFN1cnZlaWxsYW50T3B0aW9ucyhzZWxlY3RlZE5hbWUpfTwvc2VsZWN0PgogICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0idGV4dCIgY2xhc3M9InRpbWUtaW5wdXQiIHBsYWNlaG9sZGVyPSJIb3JhaXJlIChleDogMTBoMDAgw6AgMTFoMDApIiB2YWx1ZT0iJHt0aW1lVmFsIHx8ICcnfSIgb25jaGFuZ2U9InVwZGF0ZUN1cnJlbnRFeGFtU3RhdGUoKSI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImJ0bi1kZWwtc3VydiIgb25jbGljaz0idGhpcy5wYXJlbnRFbGVtZW50LnJlbW92ZSgpOyB1cGRhdGVDdXJyZW50RXhhbVN0YXRlKCk7Ij48aSBjbGFzcz0iZmEtc29saWQgZmEteG1hcmsiPjwvaT48L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICA8L2Rpdj5gOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gYWRkU3VydmVpbGxhbnRGaWVsZChpZCkgeyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCkuaW5zZXJ0QWRqYWNlbnRIVE1MKCdiZWZvcmVlbmQnLCBjcmVhdGVTdXJ2ZWlsbGFudFJvdygiIiwgIiIpKTsgfQogICAgICAgIAogICAgICAgIGZ1bmN0aW9uIGhhbmRsZUltYWdlKGlucHV0LCBwcmV2aWV3SWQpIHsgY29uc3QgZmlsZSA9IGlucHV0LmZpbGVzWzBdOyBpZiAoIWZpbGUpIHJldHVybjsgY29uc3QgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTsgcmVhZGVyLm9ubG9hZCA9IGZ1bmN0aW9uKGUpIHsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQocHJldmlld0lkKS5zcmMgPSBlLnRhcmdldC5yZXN1bHQ7IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHByZXZpZXdJZCkuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7IGlmKHByZXZpZXdJZCA9PT0gJ2xvZ29QcmV2aWV3JykgQXBwU3RhdGUuY29uZmlnLmxvZ29TcmMgPSBlLnRhcmdldC5yZXN1bHQ7IGlmKHByZXZpZXdJZCA9PT0gJ3NpZ25QcmV2aWV3JykgQXBwU3RhdGUuY29uZmlnLnNpZ25TcmMgPSBlLnRhcmdldC5yZXN1bHQ7IH07IHJlYWRlci5yZWFkQXNEYXRhVVJMKGZpbGUpOyB9CiAgICAgICAgZnVuY3Rpb24gcG9wdWxhdGVDbGFzc0ZpbHRlcigpeyBjb25zdCBzPWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb252b2MtY2xhc3MtZmlsdGVyJyk7IHMuaW5uZXJIVE1MPSc8b3B0aW9uIHZhbHVlPSJBTEwiPlRvdXRlczwvb3B0aW9uPic7IGNvbnN0IGNsPW5ldyBTZXQoKTsgQXBwU3RhdGUuZWxldmVzLmZvckVhY2goZT0+e2NvbnN0IGM9Z2V0VmFsdWUoZSxbJ0NsYXNzZScsJ0RpdiddKTsgaWYoYykgY2wuYWRkKGMpfSk7IEFycmF5LmZyb20oY2wpLnNvcnQoKS5mb3JFYWNoKGM9PnMuYWRkKG5ldyBPcHRpb24oYyxjKSkpOyBwb3B1bGF0ZVNlbGVjdEZyb21TZXQoJ3B2LWNsYXNzLWZpbHRlcicsIGNsKTsgfQogICAgICAgIGZ1bmN0aW9uIHBvcHVsYXRlU2VsZWN0RnJvbVNldChpZCwgc2V0KSB7IGNvbnN0IHM9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpOyBpZighcykgcmV0dXJuOyBzLmlubmVySFRNTD0nPG9wdGlvbiB2YWx1ZT0iQUxMIj5Ub3V0ZXM8L29wdGlvbj4nOyBBcnJheS5mcm9tKHNldCkuc29ydCgpLmZvckVhY2goYz0+cy5hZGQobmV3IE9wdGlvbihjLGMpKSk7IH0KICAgICAgICBmdW5jdGlvbiBwb3B1bGF0ZVN1cnZlaWxsYW50RmlsdGVyKCl7IGNvbnN0IHM9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbnZvYy1zdXJ2LWZpbHRlcicpOyBzLmlubmVySFRNTD0nPG9wdGlvbiB2YWx1ZT0iQUxMIj5Ub3VzPC9vcHRpb24+JzsgaWYoIUFwcFN0YXRlLnN1cnZlaWxsYW50cykgcmV0dXJuOyBBcHBTdGF0ZS5zdXJ2ZWlsbGFudHMuZm9yRWFjaChzdT0+e2NvbnN0IG49Z2V0VmFsdWUoc3UsWydOb20nXSkrJyAnK2dldFZhbHVlKHN1LFsnUHLDqW5vbSddKTsgcy5hZGQobmV3IE9wdGlvbihuLG4pKX0pOyB9CiAgICAgICAgZnVuY3Rpb24gc2F2ZVBvY2hldHRlVGV4dCh0eXBlLCB2YWwpIHsgaWYoIUFwcFN0YXRlLnBvY2hldHRlVGV4dCkgQXBwU3RhdGUucG9jaGV0dGVUZXh0ID0ge307IEFwcFN0YXRlLnBvY2hldHRlVGV4dFt0eXBlXSA9IHZhbDsgfQogICAgICAgIGZ1bmN0aW9uIHBvcHVsYXRlUFZFeGFtU2VsZWN0KCkgeyBjb25zdCBzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3B2LWV4YW0tc2VsZWN0Jyk7IHMuaW5uZXJIVE1MID0gJzxvcHRpb24gdmFsdWU9IkFMTCI+VE9VVCBJTVBSSU1FUjwvb3B0aW9uPic7IEFwcFN0YXRlLmRpc3RyaWJ1dGlvbkRhdGEuZm9yRWFjaCgoZCwgaSkgPT4geyBpZighZCkgcmV0dXJuOyBjb25zdCBleGFtID0gQXBwU3RhdGUuZXByZXV2ZXNbZC5leGFtSWR4XTsgcy5hZGQobmV3IE9wdGlvbihnZXRWYWx1ZShleGFtLCBbJ01hdGnDqHJlJywgJ0VwcmV1dmUnXSksIGkpKTsgfSk7IHMub25jaGFuZ2UoKTsgfQogICAgICAgIAogICAgICAgIGZ1bmN0aW9uIHVwZGF0ZVBWUm9vbVNlbGVjdCgpIHsgCiAgICAgICAgICAgIGNvbnN0IGV4YW1JZHggPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHYtZXhhbS1zZWxlY3QnKS52YWx1ZTsgCiAgICAgICAgICAgIGNvbnN0IHMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHYtcm9vbS1zZWxlY3QnKTsgCiAgICAgICAgICAgIHMuaW5uZXJIVE1MID0gJzxvcHRpb24gdmFsdWU9IkFMTCI+VE9VVEVTIExFUyBTQUxMRVMgVVRJTElTw4lFUzwvb3B0aW9uPic7IAogICAgICAgICAgICBpZihleGFtSWR4ID09PSAiQUxMIikgeyAKICAgICAgICAgICAgICAgIHMuZGlzYWJsZWQgPSB0cnVlOyByZXR1cm47IAogICAgICAgICAgICB9IGVsc2UgeyAKICAgICAgICAgICAgICAgIHMuZGlzYWJsZWQgPSBmYWxzZTsgCiAgICAgICAgICAgIH0gCiAgICAgICAgICAgIGNvbnN0IGRpc3QgPSBBcHBTdGF0ZS5kaXN0cmlidXRpb25EYXRhW2V4YW1JZHhdOyAKICAgICAgICAgICAgaWYoZGlzdCkgewogICAgICAgICAgICAgICAgZGlzdC5yb29tcy5mb3JFYWNoKChyLCBpKSA9PiB7IAogICAgICAgICAgICAgICAgICAgIGlmKHIuc3R1ZGVudHMubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgICAgICAgICAgICBzLmFkZChuZXcgT3B0aW9uKHIubmFtZSwgaSkpOyAKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsgCiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgCiAgICAgICAgZnVuY3Rpb24gcG9wdWxhdGVFbWFyZ2VtZW50RmlsdGVycygpIHsgCiAgICAgICAgICAgIGNvbnN0IHMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZW1hcmdlbWVudC1yb29tLWZpbHRlcicpOyAKICAgICAgICAgICAgcy5pbm5lckhUTUwgPSAnPG9wdGlvbiB2YWx1ZT0iQUxMIj5Ub3V0ZXMgbGVzIHNhbGxlcyB1dGlsaXPDqWVzPC9vcHRpb24+JzsgCiAgICAgICAgICAgIGxldCB1c2VkUm9vbXMgPSBuZXcgU2V0KCk7IAogICAgICAgICAgICBBcHBTdGF0ZS5kaXN0cmlidXRpb25EYXRhLmZvckVhY2goZCA9PiB7CiAgICAgICAgICAgICAgICBpZihkICYmIGQucm9vbXMpIHsKICAgICAgICAgICAgICAgICAgICBkLnJvb21zLmZvckVhY2gociA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHIuc3R1ZGVudHMubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlZFJvb21zLmFkZChyLm5hbWUpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBBcnJheS5mcm9tKHVzZWRSb29tcykuc29ydCgpLmZvckVhY2gociA9PiBzLmFkZChuZXcgT3B0aW9uKHIsIHIpKSk7IAogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gcHJpbnRFbWFyZ2VtZW50KCkgeyBnZW5lcmF0ZUxpc3REb2MoJ2VtYXJnZW1lbnQnKTsgfQogICAgICAgIGZ1bmN0aW9uIHByaW50RGlzcGxheUxpc3QoKSB7IGdlbmVyYXRlTGlzdERvYygnZGlzcGxheScpOyB9CiAgICAgICAgCiAgICAgICAgZnVuY3Rpb24gZ2VuZXJhdGVMaXN0RG9jKHR5cGUpIHsKICAgICAgICAgICAgaWYoIUFwcFN0YXRlLmRpc3RyaWJ1dGlvbkRhdGEubGVuZ3RoKSByZXR1cm4gYWxlcnQoIlLDqXBhcnRpdGlvbiBtYW5xdWFudGUiKTsKICAgICAgICAgICAgY29uc3Qgcm9vbUZpbHRlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlbWFyZ2VtZW50LXJvb20tZmlsdGVyJykudmFsdWU7CiAgICAgICAgICAgIGNvbnN0IGxvZ28gPSBBcHBTdGF0ZS5jb25maWcubG9nb1NyYyB8fCAiIjsKICAgICAgICAgICAgY29uc3QgdGl0bGUgPSB0eXBlID09PSAnZW1hcmdlbWVudCcgPyAiTElTVEUgRCfDiU1BUkdFTUVOVCIgOiAiTElTVEUgRCdBRkZJQ0hBR0UgLSBDQU5ESURBVFMiOwogICAgICAgICAgICBsZXQgZnVsbEh0bWwgPSAiIjsKICAgICAgICAgICAgQXBwU3RhdGUuZGlzdHJpYnV0aW9uRGF0YS5mb3JFYWNoKGV4YW1EYXRhID0+IHsKICAgICAgICAgICAgICAgIGlmKCFleGFtRGF0YSkgcmV0dXJuOwogICAgICAgICAgICAgICAgY29uc3QgZXhhbUluZm8gPSBBcHBTdGF0ZS5lcHJldXZlc1tleGFtRGF0YS5leGFtSWR4XTsKICAgICAgICAgICAgICAgIGNvbnN0IGRhdGVTdHIgPSBmb3JtYXREYXRlKGdldFZhbHVlKGV4YW1JbmZvLFsnRGF0ZSddKSk7CiAgICAgICAgICAgICAgICBleGFtRGF0YS5yb29tcy5mb3JFYWNoKHJvb21EYXRhID0+IHsKICAgICAgICAgICAgICAgICAgICBpZihyb29tRmlsdGVyICE9PSAiQUxMIiAmJiByb29tRGF0YS5uYW1lICE9PSByb29tRmlsdGVyKSByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgaWYocm9vbURhdGEuc3R1ZGVudHMubGVuZ3RoID09PSAwKSByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3R1ZGVudHMgPSBbLi4ucm9vbURhdGEuc3R1ZGVudHNdOwogICAgICAgICAgICAgICAgICAgIHN0dWRlbnRzLnNvcnQoKGEsYikgPT4gZ2V0VmFsdWUoYSxbJ05vbSddKS5sb2NhbGVDb21wYXJlKGdldFZhbHVlKGIsWydOb20nXSkpKTsKICAgICAgICAgICAgICAgICAgICBjb25zdCBpc1RUID0gcm9vbURhdGEuaXNUVDsKICAgICAgICAgICAgICAgICAgICBsZXQgdGltZSA9IGlzVFQgPyBnZXRWYWx1ZShleGFtSW5mbywgWydIZXVyZSBkZSBkw6lidXQgdGllcnMgdGVtcHMnLCAnSGV1cmUgVFQnXSkgOiBnZXRWYWx1ZShleGFtSW5mbywgWydIZXVyZSBkZSBkw6lidXQnLCAnSGV1cmUnXSk7CiAgICAgICAgICAgICAgICAgICAgaWYoIXRpbWUpIHRpbWUgPSBnZXRWYWx1ZShleGFtSW5mbywgWydIZXVyZSBkZSBkw6lidXQnLCAnSGV1cmUnXSk7CiAgICAgICAgICAgICAgICAgICAgbGV0IHN1cnZOYW1lcyA9IFtdOwogICAgICAgICAgICAgICAgICAgIGlmKHJvb21EYXRhLnN1cnZlaWxsYW50cykgewogICAgICAgICAgICAgICAgICAgICAgICByb29tRGF0YS5zdXJ2ZWlsbGFudHMuZm9yRWFjaChzID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBuID0gKHR5cGVvZiBzID09PSAnb2JqZWN0JykgPyBzLm5hbWUgOiBzOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYobikgc3Vydk5hbWVzLnB1c2gobik7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBsZXQgcm93cyA9ICIiOwogICAgICAgICAgICAgICAgICAgIHN0dWRlbnRzLmZvckVhY2gocyA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJvd3MgKz0gYDx0ciBjbGFzcz0iJHt0eXBlfS1yb3ciPjx0ZD4ke2dldFZhbHVlKHMsWydOb20nXSl9PC90ZD48dGQ+JHtnZXRWYWx1ZShzLFsnUHLDqW5vbSddKX08L3RkPjx0ZD4ke2dldFZhbHVlKHMsWydDbGFzc2UnXSl9PC90ZD4ke3R5cGU9PT0nZW1hcmdlbWVudCcgPyAnPHRkPjwvdGQ+JyA6ICcnfTwvdHI+YDsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICBmdWxsSHRtbCArPSBgPGRpdiBjbGFzcz0icHJpbnQtcGFnZS1saXN0IiBzdHlsZT0icGFnZS1icmVhay1hZnRlcjogYWx3YXlzOyI+PGRpdiBjbGFzcz0icHJpbnQtaGVhZGVyIj48ZGl2IHN0eWxlPSJmb250LXdlaWdodDpib2xkOyBmb250LXNpemU6MS4ycmVtOyI+JHtBcHBTdGF0ZS5jb25maWcuZXhhbVRpdGxlIHx8ICJFWEFNRU4ifTwvZGl2PiR7bG9nbyA/IGA8aW1nIHNyYz0iJHtsb2dvfSIgY2xhc3M9InByaW50LWxvZ28iPmAgOiAnJ308L2Rpdj48ZGl2IGNsYXNzPSJwcmludC1kb2MtdGl0bGUiPiR7dGl0bGV9PC9kaXY+PGRpdiBjbGFzcz0icHJpbnQtaW5mb3MtYm94Ij48c3Ryb25nPsOJcHJldXZlIDo8L3N0cm9uZz4gJHtnZXRWYWx1ZShleGFtSW5mbyxbJ01hdGnDqHJlJywnRXByZXV2ZSddKX08YnI+PHN0cm9uZz5EYXRlIDo8L3N0cm9uZz4gJHtkYXRlU3RyfSAtIDxzdHJvbmc+SGV1cmUgOjwvc3Ryb25nPiAke3RpbWV9PGJyPjxzdHJvbmc+U2FsbGUgOjwvc3Ryb25nPiAke3Jvb21EYXRhLm5hbWV9PGJyPjxzdHJvbmc+U3VydmVpbGxhbnRzIDo8L3N0cm9uZz4gJHtzdXJ2TmFtZXMuam9pbignLCAnKX08L2Rpdj48dGFibGUgY2xhc3M9InByaW50LXRhYmxlICR7dHlwZT09PSdkaXNwbGF5Jz8nZGlzcGxheS1saXN0LXJvdyc6Jyd9Ij48dGhlYWQ+PHRyPjx0aD5Ob208L3RoPjx0aD5QcsOpbm9tPC90aD48dGg+Q2xhc3NlPC90aD4ke3R5cGU9PT0nZW1hcmdlbWVudCc/Jzx0aCBzdHlsZT0id2lkdGg6MTUwcHg7Ij5TaWduYXR1cmU8L3RoPic6Jyd9PC90cj48L3RoZWFkPjx0Ym9keT4ke3Jvd3N9PC90Ym9keT48L3RhYmxlPjwvZGl2PmA7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGlmKGZ1bGxIdG1sID09PSAiIikgcmV0dXJuIGFsZXJ0KCJBdWN1biDDqWzDqHZlIHRyb3V2w6kgcG91ciBjZSBmaWx0cmUgKG91IHNhbGxlcyB2aWRlcykuIik7CiAgICAgICAgICAgIGNvbnN0IHBhID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ByaW50LWFyZWEnKTsgcGEuaW5uZXJIVE1MID0gZnVsbEh0bWw7IHdpbmRvdy5wcmludCgpOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gcHJpbnRDb252b2NhdGlvbnMoKSB7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBpZighQXBwU3RhdGUuZGlzdHJpYnV0aW9uRGF0YSB8fCBBcHBTdGF0ZS5kaXN0cmlidXRpb25EYXRhLmxlbmd0aCA9PT0gMCkgeyBhbGVydCgiVmV1aWxsZXogY2FsY3VsZXIgbGEgcsOpcGFydGl0aW9uIChNZW51IDMpLiIpOyByZXR1cm47IH0KICAgICAgICAgICAgICAgIGNvbnN0IHByaW50QXJlYSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcmludC1hcmVhJyk7IHByaW50QXJlYS5pbm5lckhUTUwgPSAiIjsKICAgICAgICAgICAgICAgIGNvbnN0IGZpbHRlckNsYXNzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbnZvYy1jbGFzcy1maWx0ZXInKS52YWx1ZTsKICAgICAgICAgICAgICAgIGNvbnN0IGxvZ29TcmMgPSBBcHBTdGF0ZS5jb25maWcubG9nb1NyYyB8fCAiIjsKICAgICAgICAgICAgICAgIGNvbnN0IHNpZ25TcmMgPSBBcHBTdGF0ZS5jb25maWcuc2lnblNyYyB8fCAiIjsKICAgICAgICAgICAgICAgIGNvbnN0IHR4dEFkZHJlc3MgPSAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3R4dC1hZGRyZXNzJykudmFsdWUgfHwgIiIpLnJlcGxhY2UoL1xuL2csICc8YnI+Jyk7CiAgICAgICAgICAgICAgICBjb25zdCB0eHRUaXRsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0eHQtdGl0bGUtZGlzcGxheScpLmlubmVyVGV4dDsKICAgICAgICAgICAgICAgIGNvbnN0IHR4dEJvZHkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndHh0LWJvZHknKS5pbm5lckhUTUw7CiAgICAgICAgICAgICAgICBjb25zdCB0eHRSdWxlcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0eHQtcnVsZXMnKS5pbm5lckhUTUw7CiAgICAgICAgICAgICAgICBjb25zdCB0eHRDaXR5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3R4dC1jaXR5JykuaW5uZXJUZXh0OwogICAgICAgICAgICAgICAgY29uc3QgdG9wTWFyZ2luID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NldHMtc3RkLXRvcCcpLnZhbHVlOwogICAgICAgICAgICAgICAgY29uc3QgYm90TWFyZ2luID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NldHMtc3RkLWJvdCcpLnZhbHVlOwogICAgICAgICAgICAgICAgY29uc3QgZm9udFNpemUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2V0cy1zdGQtZm9udCcpLnZhbHVlOwogICAgICAgICAgICAgICAgbGV0IGNvdW50ID0gMDsKICAgICAgICAgICAgICAgIEFwcFN0YXRlLmVsZXZlcy5mb3JFYWNoKHN0dWRlbnQgPT4gewogICAgICAgICAgICAgICAgICAgIGxldCBzQ2xhc3MgPSBnZXRWYWx1ZShzdHVkZW50LCBbJ0NsYXNzZScsICdEaXYnXSk7IHNDbGFzcyA9IHNDbGFzcyA/IHNDbGFzcy50b1N0cmluZygpLnRyaW0oKSA6ICJOL0EiOwogICAgICAgICAgICAgICAgICAgIGlmKGZpbHRlckNsYXNzICE9PSAiQUxMIiAmJiBzQ2xhc3MgIT09IGZpbHRlckNsYXNzKSByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgY29uc3Qgbm9tID0gbm9ybWFsaXplKGdldFZhbHVlKHN0dWRlbnQsIFsnTm9tJ10pKTsgCiAgICAgICAgICAgICAgICAgICAgY29uc3QgcHJlbm9tID0gbm9ybWFsaXplKGdldFZhbHVlKHN0dWRlbnQsIFsnUHLDqW5vbSddKSk7CiAgICAgICAgICAgICAgICAgICAgbGV0IHN0dWRlbnRFeGFtc0xpc3QgPSBbXTsKICAgICAgICAgICAgICAgICAgICBBcHBTdGF0ZS5kaXN0cmlidXRpb25EYXRhLmZvckVhY2goKGV4YW1EYXRhKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCFleGFtRGF0YSkgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgICAgICBsZXQgc3R1ZGVudFJvb20gPSBudWxsOwogICAgICAgICAgICAgICAgICAgICAgICBleGFtRGF0YS5yb29tcy5mb3JFYWNoKHIgPT4geyAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHIuc3R1ZGVudHMuZmluZChzID0+IG5vcm1hbGl6ZShnZXRWYWx1ZShzLFsnTm9tJ10pKSA9PT0gbm9tICYmIG5vcm1hbGl6ZShnZXRWYWx1ZShzLFsnUHLDqW5vbSddKSkgPT09IHByZW5vbSkpIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0dWRlbnRSb29tID0gcjsgCiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICBpZihzdHVkZW50Um9vbSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZXhhbVJhdyA9IEFwcFN0YXRlLmVwcmV1dmVzW2V4YW1EYXRhLmV4YW1JZHhdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R1ZGVudEV4YW1zTGlzdC5wdXNoKHsgZXhhbTogZXhhbVJhdywgcm9vbTogc3R1ZGVudFJvb20gfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICBzdHVkZW50RXhhbXNMaXN0LnNvcnQoKGEsIGIpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGltZUEgPSBnZXREYXRlVGltZVZhbHVlKGEuZXhhbSwgYS5yb29tLmlzVFQpOwogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0aW1lQiA9IGdldERhdGVUaW1lVmFsdWUoYi5leGFtLCBiLnJvb20uaXNUVCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aW1lQSAtIHRpbWVCOwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIGlmKHN0dWRlbnRFeGFtc0xpc3QubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgICAgICAgICAgICBjb3VudCsrOwogICAgICAgICAgICAgICAgICAgICAgICBsZXQgZXhhbXNSb3dzID0gIiI7CiAgICAgICAgICAgICAgICAgICAgICAgIHN0dWRlbnRFeGFtc0xpc3QuZm9yRWFjaChpdGVtID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGV4YW1SYXcgPSBpdGVtLmV4YW07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzdHVkZW50Um9vbSA9IGl0ZW0ucm9vbTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGlzVFQgPSBzdHVkZW50Um9vbS5pc1RUOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZXhhbU5hbWUgPSBnZXRWYWx1ZShleGFtUmF3LCBbJ01hdGnDqHJlJywgJ0VwcmV1dmUnXSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkYXRlU3RyID0gZm9ybWF0RGF0ZShnZXRWYWx1ZShleGFtUmF3LCBbJ0RhdGUnXSkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHRpbWUgPSBpc1RUID8gZ2V0VmFsdWUoZXhhbVJhdywgWydIZXVyZSBkZSBkw6lidXQgdGllcnMgdGVtcHMnLCAnSGV1cmUgVFQnLCAnSGV1cmUgZMOpYnV0IFRUJ10pIDogZ2V0VmFsdWUoZXhhbVJhdywgWydIZXVyZSBkZSBkw6lidXQnLCAnSGV1cmUnXSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZighdGltZSkgdGltZSA9IGdldFZhbHVlKGV4YW1SYXcsIFsnSGV1cmUgZGUgZMOpYnV0JywgJ0hldXJlJ10pOyAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBkdXJhdGlvbiA9IGlzVFQgPyBnZXRWYWx1ZShleGFtUmF3LCBbJ0R1csOpZSB0aWVycyB0ZW1wcycsICdEdXLDqWUgZW4gbWludXRlIHRpZXJzIHRlbXBzJywgJ0R1csOpZSBUVCddKSA6IGdldFZhbHVlKGV4YW1SYXcsIFsnRHVyw6llIGVuIG1pbnV0ZScsICdEdXLDqWUnXSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZighZHVyYXRpb24pIGR1cmF0aW9uID0gZ2V0VmFsdWUoZXhhbVJhdywgWydEdXLDqWUgZW4gbWludXRlJywgJ0R1csOpZSddKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4YW1zUm93cyArPSBgPHRyPjx0ZD4ke2V4YW1OYW1lfTwvdGQ+PHRkPiR7ZGF0ZVN0cn08L3RkPjx0ZD4ke3RpbWV9PC90ZD48dGQ+JHtmb3JtYXREdXJhdGlvbkRpc3BsYXkoZHVyYXRpb24pfTwvdGQ+PHRkPiR7c3R1ZGVudFJvb20ubmFtZX08L3RkPjwvdHI+YDsKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGFub255bVN0ciA9IHN0dWRlbnQuTnVtQW5vbnltYXQgPyBgPGJyPjxzdHJvbmc+TsKwIEFub255bWF0IDo8L3N0cm9uZz4gJHtzdHVkZW50Lk51bUFub255bWF0fWAgOiAiIjsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3R5bGVTdHIgPSBgcGFkZGluZy10b3A6JHt0b3BNYXJnaW59bW07IHBhZGRpbmctYm90dG9tOiR7Ym90TWFyZ2lufW1tOyBmb250LXNpemU6JHtmb250U2l6ZX1weDtgOwogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwYWdlSHRtbCA9IGA8ZGl2IGNsYXNzPSJwcmludC1wYWdlLWNvbnZvYyIgc3R5bGU9IiR7c3R5bGVTdHJ9Ij48ZGl2IGNsYXNzPSJjb252b2MtaGVhZGVyLXJvdyI+PGRpdiBjbGFzcz0iY29udm9jLWFkZHJlc3MiPiR7dHh0QWRkcmVzc308L2Rpdj48ZGl2IGNsYXNzPSJjb252b2MtbG9nby16b25lIj4ke2xvZ29TcmMgPyBgPGltZyBzcmM9IiR7bG9nb1NyY30iIGNsYXNzPSJjb252b2MtbG9nbyI+YCA6ICcnfTwvZGl2PjwvZGl2PjxkaXYgY2xhc3M9ImNvbnZvYy10aXRsZSI+Q09OVk9DQVRJT04gJHt0eHRUaXRsZX08L2Rpdj48ZGl2IGNsYXNzPSJjb252b2Mtc3R1ZGVudC1pbmZvIj48c3Ryb25nPk5vbSBldCBQcsOpbm9tIDo8L3N0cm9uZz4gJHtnZXRWYWx1ZShzdHVkZW50LCBbJ05vbSddKX0gJHtnZXRWYWx1ZShzdHVkZW50LCBbJ1Byw6lub20nXSl9PGJyPjxzdHJvbmc+Q2xhc3NlIDo8L3N0cm9uZz4gJHtzQ2xhc3N9JHthbm9ueW1TdHJ9PC9kaXY+PGRpdiBjbGFzcz0iY29udm9jLWJvZHkiPiR7dHh0Qm9keX08L2Rpdj48dGFibGUgY2xhc3M9ImNvbnZvYy10YWJsZSI+PHRoZWFkPjx0cj48dGg+w4lwcmV1dmU8L3RoPjx0aD5EYXRlPC90aD48dGg+SG9yYWlyZSBkw6lidXQ8L3RoPjx0aD5EdXLDqWU8L3RoPjx0aD5TYWxsZTwvdGg+PC90cj48L3RoZWFkPjx0Ym9keT4ke2V4YW1zUm93c308L3Rib2R5PjwvdGFibGU+PGRpdiBzdHlsZT0iZm9udC13ZWlnaHQ6Ym9sZDsgbWFyZ2luLWJvdHRvbTo1cHg7Ij5Sw6hnbGVtZW50IGV0IGNvbnNpZ25lcyA6PC9kaXY+PGRpdiBjbGFzcz0iY29udm9jLXJ1bGVzIiBzdHlsZT0iZm9udC1zaXplOjAuOXJlbTsiPiR7dHh0UnVsZXN9PC9kaXY+PGRpdiBjbGFzcz0iY29udm9jLWZvb3RlciIgc3R5bGU9Imp1c3RpZnktY29udGVudDogZmxleC1lbmQ7Ij48ZGl2IGNsYXNzPSJjb252b2Mtc2lnbiIgc3R5bGU9InRleHQtYWxpZ246cmlnaHQ7Ij48ZGl2PkZhaXQgw6AgJHt0eHRDaXR5fSwgbGUgJHtuZXcgRGF0ZSgpLnRvTG9jYWxlRGF0ZVN0cmluZygnZnItRlInKX08L2Rpdj4ke3NpZ25TcmMgPyBgPGltZyBzcmM9IiR7c2lnblNyY30iIHN0eWxlPSJtYXgtaGVpZ2h0OjYwcHg7IG1hcmdpbi10b3A6MTBweDsiPmAgOiAnJ308ZGl2IHN0eWxlPSJtYXJnaW4tdG9wOjEwcHg7IGZvbnQtd2VpZ2h0OmJvbGQ7Ij4ke0FwcFN0YXRlLmNvbmZpZy5uYW1lIHx8ICcnfTwvZGl2PjxkaXYgc3R5bGU9ImZvbnQtc3R5bGU6aXRhbGljOyI+JHtBcHBTdGF0ZS5jb25maWcucm9sZSB8fCAnJ308L2Rpdj48L2Rpdj48L2Rpdj48L2Rpdj5gOwogICAgICAgICAgICAgICAgICAgICAgICBwcmludEFyZWEuaW5zZXJ0QWRqYWNlbnRIVE1MKCdiZWZvcmVlbmQnLCBwYWdlSHRtbCk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBpZihjb3VudCA+IDApIHdpbmRvdy5wcmludCgpOyBlbHNlIGFsZXJ0KCJBdWN1bmUgY29udm9jYXRpb24gZ8OpbsOpcsOpZS4iKTsKICAgICAgICAgICAgfSBjYXRjaChlKSB7IGNvbnNvbGUuZXJyb3IoZSk7IGFsZXJ0KCJFcnJldXIgaW1wcmVzc2lvbjogIiArIGUubWVzc2FnZSk7IH0KICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIHByaW50U3VydmVpbGxhbnRDb252b2NhdGlvbnMoKSB7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBpZighQXBwU3RhdGUuZGlzdHJpYnV0aW9uRGF0YSB8fCBBcHBTdGF0ZS5kaXN0cmlidXRpb25EYXRhLmxlbmd0aCA9PT0gMCkgeyBhbGVydCgiVmV1aWxsZXogY2FsY3VsZXIgbGEgcsOpcGFydGl0aW9uLiIpOyByZXR1cm47IH0KICAgICAgICAgICAgICAgIGNvbnN0IHByaW50QXJlYSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcmludC1hcmVhJyk7IHByaW50QXJlYS5pbm5lckhUTUwgPSAiIjsKICAgICAgICAgICAgICAgIGNvbnN0IGZpbHRlclN1cnYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29udm9jLXN1cnYtZmlsdGVyJykudmFsdWU7CiAgICAgICAgICAgICAgICBjb25zdCBsb2dvU3JjID0gQXBwU3RhdGUuY29uZmlnLmxvZ29TcmMgfHwgIiI7IGNvbnN0IHNpZ25TcmMgPSBBcHBTdGF0ZS5jb25maWcuc2lnblNyYyB8fCAiIjsKICAgICAgICAgICAgICAgIGNvbnN0IHR4dEFkZHJlc3MgPSAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3R4dC1zdXJ2LWFkZHJlc3MnKS52YWx1ZSB8fCAiIikucmVwbGFjZSgvXG4vZywgJzxicj4nKTsKICAgICAgICAgICAgICAgIGNvbnN0IHR4dFRpdGxlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3R4dC1zdXJ2LXRpdGxlLWRpc3BsYXknKS5pbm5lclRleHQ7CiAgICAgICAgICAgICAgICBjb25zdCB0eHRCb2R5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3R4dC1zdXJ2LWJvZHknKS5pbm5lckhUTUw7CiAgICAgICAgICAgICAgICBjb25zdCB0eHRSdWxlcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0eHQtc3Vydi1ydWxlcycpLmlubmVySFRNTDsKICAgICAgICAgICAgICAgIGNvbnN0IHR4dENpdHkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndHh0LXN1cnYtY2l0eScpLmlubmVyVGV4dDsKICAgICAgICAgICAgICAgIGNvbnN0IHRvcE1hcmdpbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZXRzLXN1cnYtdG9wJykudmFsdWU7CiAgICAgICAgICAgICAgICBjb25zdCBib3RNYXJnaW4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2V0cy1zdXJ2LWJvdCcpLnZhbHVlOwogICAgICAgICAgICAgICAgY29uc3QgZm9udFNpemUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2V0cy1zdXJ2LWZvbnQnKS52YWx1ZTsKICAgICAgICAgICAgICAgIGxldCBzY2hlZHVsZU1hcCA9IHt9OwogICAgICAgICAgICAgICAgQXBwU3RhdGUuZGlzdHJpYnV0aW9uRGF0YS5mb3JFYWNoKGV4YW1EYXRhID0+IHsKICAgICAgICAgICAgICAgICAgICBpZighZXhhbURhdGEpIHJldHVybjsKICAgICAgICAgICAgICAgICAgICBjb25zdCBleGFtUmF3ID0gQXBwU3RhdGUuZXByZXV2ZXNbZXhhbURhdGEuZXhhbUlkeF07IAogICAgICAgICAgICAgICAgICAgIGNvbnN0IGV4YW1OYW1lID0gZ2V0VmFsdWUoZXhhbVJhdywgWydNYXRpw6hyZScsICdFcHJldXZlJ10pOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IGRhdGVTdHIgPSBmb3JtYXREYXRlKGdldFZhbHVlKGV4YW1SYXcsIFsnRGF0ZSddKSk7CiAgICAgICAgICAgICAgICAgICAgZXhhbURhdGEucm9vbXMuZm9yRWFjaChyb29tID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYocm9vbS5zdXJ2ZWlsbGFudHMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvb20uc3VydmVpbGxhbnRzLmZvckVhY2goc3Vydkl0ZW0gPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBzdXJ2TmFtZSA9ICh0eXBlb2Ygc3Vydkl0ZW0gPT09ICdvYmplY3QnKSA/IHN1cnZJdGVtLm5hbWUgOiBzdXJ2SXRlbTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgc3BlY2lmaWNUaW1lID0gKHR5cGVvZiBzdXJ2SXRlbSA9PT0gJ29iamVjdCcpID8gc3Vydkl0ZW0udGltZSA6ICIiOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCFzdXJ2TmFtZSkgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCFzY2hlZHVsZU1hcFtzdXJ2TmFtZV0pIHNjaGVkdWxlTWFwW3N1cnZOYW1lXSA9IFtdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGlzVFQgPSByb29tLmlzVFQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHRpbWUgPSBpc1RUID8gZ2V0VmFsdWUoZXhhbVJhdywgWydIZXVyZSBkZSBkw6lidXQgdGllcnMgdGVtcHMnLCAnSGV1cmUgVFQnLCAnSGV1cmUgZMOpYnV0IFRUJ10pIDogZ2V0VmFsdWUoZXhhbVJhdywgWydIZXVyZSBkZSBkw6lidXQnLCAnSGV1cmUnXSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoIXRpbWUpIHRpbWUgPSBnZXRWYWx1ZShleGFtUmF3LCBbJ0hldXJlIGRlIGTDqWJ1dCcsICdIZXVyZSddKTsgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGR1cmF0aW9uID0gaXNUVCA/IGdldFZhbHVlKGV4YW1SYXcsIFsnRHVyw6llIHRpZXJzIHRlbXBzJywgJ0R1csOpZSBlbiBtaW51dGUgdGllcnMgdGVtcHMnLCAnRHVyw6llIFRUJ10pIDogZ2V0VmFsdWUoZXhhbVJhdywgWydEdXLDqWUgZW4gbWludXRlJywgJ0R1csOpZSddKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZighZHVyYXRpb24pIGR1cmF0aW9uID0gZ2V0VmFsdWUoZXhhbVJhdywgWydEdXLDqWUgZW4gbWludXRlJywgJ0R1csOpZSddKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgZmluYWxUaW1lRGlzcGxheSA9IHNwZWNpZmljVGltZSA/IHNwZWNpZmljVGltZSA6IHRpbWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2NoZWR1bGVNYXBbc3Vydk5hbWVdLnB1c2goeyAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmF3RXhhbTogZXhhbVJhdywgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzVFQ6IGlzVFQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVwcmV1dmU6IGV4YW1OYW1lLCAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZTogZGF0ZVN0ciwgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhldXJlOiBmaW5hbFRpbWVEaXNwbGF5LCAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZHVyZWU6IGR1cmF0aW9uLCAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2FsbGU6IHJvb20ubmFtZSAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIGxldCBjb3VudCA9IDA7IAogICAgICAgICAgICAgICAgY29uc3Qgc29ydGVkU3VydnMgPSBPYmplY3Qua2V5cyhzY2hlZHVsZU1hcCkuc29ydCgpOwogICAgICAgICAgICAgICAgc29ydGVkU3VydnMuZm9yRWFjaChzdXJ2TmFtZSA9PiB7CiAgICAgICAgICAgICAgICAgICAgaWYoZmlsdGVyU3VydiAhPT0gIkFMTCIgJiYgc3Vydk5hbWUgIT09IGZpbHRlclN1cnYpIHJldHVybjsKICAgICAgICAgICAgICAgICAgICBjb25zdCBzbG90cyA9IHNjaGVkdWxlTWFwW3N1cnZOYW1lXTsKICAgICAgICAgICAgICAgICAgICBzbG90cy5zb3J0KChhLCBiKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRpbWVBID0gZ2V0RGF0ZVRpbWVWYWx1ZShhLnJhd0V4YW0sIGEuaXNUVCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRpbWVCID0gZ2V0RGF0ZVRpbWVWYWx1ZShiLnJhd0V4YW0sIGIuaXNUVCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aW1lQSAtIHRpbWVCOwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIGxldCByb3dzID0gIiI7CiAgICAgICAgICAgICAgICAgICAgc2xvdHMuZm9yRWFjaChzbG90ID0+IHsgcm93cyArPSBgPHRyPjx0ZD4ke3Nsb3QuZXByZXV2ZX08L3RkPjx0ZD4ke3Nsb3QuZGF0ZX08L3RkPjx0ZD4ke3Nsb3QuaGV1cmV9PC90ZD48dGQ+JHtmb3JtYXREdXJhdGlvbkRpc3BsYXkoc2xvdC5kdXJlZSl9PC90ZD48dGQ+JHtzbG90LnNhbGxlfTwvdGQ+PC90cj5gOyB9KTsKICAgICAgICAgICAgICAgICAgICBjb3VudCsrOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IHN0eWxlU3RyID0gYHBhZGRpbmctdG9wOiR7dG9wTWFyZ2lufW1tOyBwYWRkaW5nLWJvdHRvbToke2JvdE1hcmdpbn1tbTsgZm9udC1zaXplOiR7Zm9udFNpemV9cHg7YDsKICAgICAgICAgICAgICAgICAgICBjb25zdCBwYWdlSHRtbCA9IGA8ZGl2IGNsYXNzPSJwcmludC1wYWdlLWNvbnZvYyIgc3R5bGU9IiR7c3R5bGVTdHJ9Ij48ZGl2IGNsYXNzPSJjb252b2MtaGVhZGVyLXJvdyI+PGRpdiBjbGFzcz0iY29udm9jLWFkZHJlc3MiPiR7dHh0QWRkcmVzc308L2Rpdj48ZGl2IGNsYXNzPSJjb252b2MtbG9nby16b25lIj4ke2xvZ29TcmMgPyBgPGltZyBzcmM9IiR7bG9nb1NyY30iIGNsYXNzPSJjb252b2MtbG9nbyI+YCA6ICcnfTwvZGl2PjwvZGl2PjxkaXYgY2xhc3M9ImNvbnZvYy10aXRsZSI+Q09OVk9DQVRJT04gJHt0eHRUaXRsZX08L2Rpdj48ZGl2IGNsYXNzPSJjb252b2Mtc3R1ZGVudC1pbmZvIj48c3Ryb25nPlN1cnZlaWxsYW50IDo8L3N0cm9uZz4gJHtzdXJ2TmFtZX08L2Rpdj48ZGl2IGNsYXNzPSJjb252b2MtYm9keSI+JHt0eHRCb2R5fTwvZGl2Pjx0YWJsZSBjbGFzcz0iY29udm9jLXRhYmxlIj48dGhlYWQ+PHRyPjx0aD7DiXByZXV2ZTwvdGg+PHRoPkRhdGU8L3RoPjx0aD5Ib3JhaXJlPC90aD48dGg+RHVyw6llPC90aD48dGg+U2FsbGU8L3RoPjwvdHI+PC90aGVhZD48dGJvZHk+JHtyb3dzfTwvdGJvZHk+PC90YWJsZT48ZGl2IHN0eWxlPSJmb250LXdlaWdodDpib2xkOyBtYXJnaW4tYm90dG9tOjVweDsiPkNvbnNpZ25lcyA6PC9kaXY+PGRpdiBjbGFzcz0iY29udm9jLXJ1bGVzIiBzdHlsZT0iZm9udC1zaXplOjAuOXJlbTsiPiR7dHh0UnVsZXN9PC9kaXY+PGRpdiBjbGFzcz0iY29udm9jLWZvb3RlciIgc3R5bGU9Imp1c3RpZnktY29udGVudDogZmxleC1lbmQ7Ij48ZGl2IGNsYXNzPSJjb252b2Mtc2lnbiIgc3R5bGU9InRleHQtYWxpZ246cmlnaHQ7Ij48ZGl2PkZhaXQgw6AgJHt0eHRDaXR5fSwgbGUgJHtuZXcgRGF0ZSgpLnRvTG9jYWxlRGF0ZVN0cmluZygnZnItRlInKX08L2Rpdj4ke3NpZ25TcmMgPyBgPGltZyBzcmM9IiR7c2lnblNyY30iIHN0eWxlPSJtYXgtaGVpZ2h0OjYwcHg7IG1hcmdpbi10b3A6MTBweDsiPmAgOiAnJ308ZGl2IHN0eWxlPSJtYXJnaW4tdG9wOjEwcHg7IGZvbnQtd2VpZ2h0OmJvbGQ7Ij4ke0FwcFN0YXRlLmNvbmZpZy5uYW1lIHx8ICcnfTwvZGl2PjxkaXYgc3R5bGU9ImZvbnQtc3R5bGU6aXRhbGljOyI+JHtBcHBTdGF0ZS5jb25maWcucm9sZSB8fCAnJ308L2Rpdj48L2Rpdj48L2Rpdj48L2Rpdj5gOwogICAgICAgICAgICAgICAgICAgIHByaW50QXJlYS5pbnNlcnRBZGphY2VudEhUTUwoJ2JlZm9yZWVuZCcsIHBhZ2VIdG1sKTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgaWYoY291bnQgPiAwKSB3aW5kb3cucHJpbnQoKTsgZWxzZSBhbGVydCgiQXVjdW5lIHN1cnZlaWxsYW5jZSB0cm91dsOpZS4iKTsKICAgICAgICAgICAgfSBjYXRjaChlKSB7IGNvbnNvbGUuZXJyb3IoZSk7IGFsZXJ0KCJFcnJldXIgaW1wcmVzc2lvbjogIiArIGUubWVzc2FnZSk7IH0KICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGdlbmVyYXRlQW5vbnltaXR5KCkgeyBpZighQXBwU3RhdGUuZWxldmVzLmxlbmd0aCkgcmV0dXJuIGFsZXJ0KCJBdWN1biDDqWzDqHZlIik7IGNvbnN0IHVzZWQgPSBuZXcgU2V0KCk7IEFwcFN0YXRlLmVsZXZlcy5mb3JFYWNoKGUgPT4geyBpZighZS5OdW1Bbm9ueW1hdCkgeyBsZXQgaWQ7IGRvIHsgaWQgPSBNYXRoLmZsb29yKDEwMDAwMCArIE1hdGgucmFuZG9tKCkgKiA5MDAwMDApLnRvU3RyaW5nKCk7IH0gd2hpbGUodXNlZC5oYXMoaWQpKTsgdXNlZC5hZGQoaWQpOyBlLk51bUFub255bWF0ID0gaWQ7IH0gZWxzZSB7IHVzZWQuYWRkKGUuTnVtQW5vbnltYXQpOyB9IH0pOyByZW5kZXJBbm9ueW1pdHlUYWJsZSgpOyB9CiAgICAgICAgZnVuY3Rpb24gcmVuZGVyQW5vbnltaXR5VGFibGUoKSB7IGNvbnN0IGMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYW5vbnltaXR5LXRhYmxlLWNvbnRhaW5lcicpOyBsZXQgaCA9IGA8ZGl2IGNsYXNzPSJjYXJkIj48dGFibGUgY2xhc3M9ImRhdGEtdGFibGUiPjx0aGVhZD48dHI+PHRoPk5vbTwvdGg+PHRoPlByw6lub208L3RoPjx0aD5DbGFzc2U8L3RoPjx0aD5Bbm9ueW1hdDwvdGg+PC90cj48L3RoZWFkPjx0Ym9keT5gOyBBcHBTdGF0ZS5lbGV2ZXMuZm9yRWFjaChlID0+IHsgaCs9YDx0cj48dGQ+JHtnZXRWYWx1ZShlLFsnTm9tJ10pfTwvdGQ+PHRkPiR7Z2V0VmFsdWUoZSxbJ1Byw6lub20nXSl9PC90ZD48dGQ+JHtnZXRWYWx1ZShlLFsnQ2xhc3NlJ10pfTwvdGQ+PHRkPjxzdHJvbmc+JHtlLk51bUFub255bWF0fTwvc3Ryb25nPjwvdGQ+PC90cj5gOyB9KTsgaCs9JzwvdGJvZHk+PC90YWJsZT48L2Rpdj4nOyBjLmlubmVySFRNTCA9IGg7IH0KICAgICAgICAKICAgICAgICBmdW5jdGlvbiBwb3B1bGF0ZUxhYmVsRmlsdGVycygpIHsKICAgICAgICAgICAgY29uc3QgZXhTZWxlY3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbGFiZWwtZXhhbS1zZWxlY3QnKTsKICAgICAgICAgICAgZXhTZWxlY3QuaW5uZXJIVE1MID0gJzxvcHRpb24gdmFsdWU9IkFMTCI+VG91dGVzIGxlcyDDqXByZXV2ZXMgKEJhc2Ugw4lsw6h2ZXMpPC9vcHRpb24+JzsKICAgICAgICAgICAgQXBwU3RhdGUuZXByZXV2ZXMuZm9yRWFjaCgoZSwgaSkgPT4gewogICAgICAgICAgICAgICAgZXhTZWxlY3QuYWRkKG5ldyBPcHRpb24oZ2V0VmFsdWUoZSwgWydNYXRpw6hyZScsICdFcHJldXZlJ10pLCBpKSk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBjb25zdCBjbFNlbGVjdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsYWJlbC1jbGFzcy1zZWxlY3QnKTsKICAgICAgICAgICAgY2xTZWxlY3QuaW5uZXJIVE1MID0gJzxvcHRpb24gdmFsdWU9IkFMTCI+VG91dGVzIGNsYXNzZXM8L29wdGlvbj4nOwogICAgICAgICAgICBjb25zdCBjbGFzc2VzID0gbmV3IFNldCgpOwogICAgICAgICAgICBBcHBTdGF0ZS5lbGV2ZXMuZm9yRWFjaChlID0+IHsgY29uc3QgYyA9IGdldFZhbHVlKGUsWydDbGFzc2UnLCdEaXYnXSk7IGlmKGMpIGNsYXNzZXMuYWRkKGMpOyB9KTsKICAgICAgICAgICAgQXJyYXkuZnJvbShjbGFzc2VzKS5zb3J0KCkuZm9yRWFjaChjID0+IGNsU2VsZWN0LmFkZChuZXcgT3B0aW9uKGMsIGMpKSk7CiAgICAgICAgICAgIHVwZGF0ZUxhYmVsUm9vbVNlbGVjdCgpOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gdXBkYXRlTGFiZWxSb29tU2VsZWN0KCkgewogICAgICAgICAgICBjb25zdCBleGFtSWR4ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xhYmVsLWV4YW0tc2VsZWN0JykudmFsdWU7CiAgICAgICAgICAgIGNvbnN0IHJtU2VsZWN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xhYmVsLXJvb20tc2VsZWN0Jyk7CiAgICAgICAgICAgIHJtU2VsZWN0LmlubmVySFRNTCA9ICc8b3B0aW9uIHZhbHVlPSJBTEwiPlRvdXRlcyBzYWxsZXM8L29wdGlvbj4nOwogICAgICAgICAgICBpZiAoZXhhbUlkeCAhPT0gIkFMTCIpIHsKICAgICAgICAgICAgICAgIHJtU2VsZWN0LmRpc2FibGVkID0gZmFsc2U7CiAgICAgICAgICAgICAgICBjb25zdCBkaXN0ID0gQXBwU3RhdGUuZGlzdHJpYnV0aW9uRGF0YVtleGFtSWR4XTsKICAgICAgICAgICAgICAgIGlmIChkaXN0ICYmIGRpc3Qucm9vbXMpIHsKICAgICAgICAgICAgICAgICAgICBkaXN0LnJvb21zLmZvckVhY2gociA9PiBybVNlbGVjdC5hZGQobmV3IE9wdGlvbihyLm5hbWUsIHIubmFtZSkpKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHJtU2VsZWN0LmRpc2FibGVkID0gdHJ1ZTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gcHJpbnRUYWJsZUxhYmVscygpIHsKICAgICAgICAgICAgY29uc3QgZXhhbUlkeCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsYWJlbC1leGFtLXNlbGVjdCcpLnZhbHVlOwogICAgICAgICAgICBjb25zdCByb29tRmlsdGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xhYmVsLXJvb20tc2VsZWN0JykudmFsdWU7CiAgICAgICAgICAgIGNvbnN0IGNsYXNzRmlsdGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xhYmVsLWNsYXNzLXNlbGVjdCcpLnZhbHVlOwogICAgICAgICAgICBjb25zdCBzb3J0TW9kZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsaXN0aW5nLXNvcnQtbW9kZScpLnZhbHVlOyAKICAgICAgICAgICAgY29uc3QgbG9nbyA9IEFwcFN0YXRlLmNvbmZpZy5sb2dvU3JjIHx8ICIiOwogICAgICAgICAgICBsZXQgc3R1ZGVudHNUb1ByaW50ID0gW107CiAgICAgICAgICAgIGlmIChleGFtSWR4ICE9PSAiQUxMIikgewogICAgICAgICAgICAgICAgY29uc3QgZGlzdCA9IEFwcFN0YXRlLmRpc3RyaWJ1dGlvbkRhdGFbZXhhbUlkeF07CiAgICAgICAgICAgICAgICBpZiAoIWRpc3QpIHJldHVybiBhbGVydCgiUsOpcGFydGl0aW9uIG5vbiBjYWxjdWzDqWUgcG91ciBjZXR0ZSDDqXByZXV2ZS4iKTsKICAgICAgICAgICAgICAgIGlmIChyb29tRmlsdGVyICE9PSAiQUxMIikgewogICAgICAgICAgICAgICAgICAgIGNvbnN0IHJvb20gPSBkaXN0LnJvb21zLmZpbmQociA9PiByLm5hbWUgPT09IHJvb21GaWx0ZXIpOwogICAgICAgICAgICAgICAgICAgIGlmIChyb29tKSBzdHVkZW50c1RvUHJpbnQgPSBbLi4ucm9vbS5zdHVkZW50c107CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIGRpc3Qucm9vbXMuZm9yRWFjaChyID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgci5zdHVkZW50cy5mb3JFYWNoKHMgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R1ZGVudHNUb1ByaW50LnB1c2goey4uLnMsIF90ZW1wUm9vbTogci5uYW1lfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgc3R1ZGVudHNUb1ByaW50ID0gWy4uLkFwcFN0YXRlLmVsZXZlc107CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKGNsYXNzRmlsdGVyICE9PSAiQUxMIikgewogICAgICAgICAgICAgICAgc3R1ZGVudHNUb1ByaW50ID0gc3R1ZGVudHNUb1ByaW50LmZpbHRlcihzID0+IGdldFZhbHVlKHMsIFsnQ2xhc3NlJywnRGl2J10pID09IGNsYXNzRmlsdGVyKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoc29ydE1vZGUgPT09ICdST09NJyAmJiBleGFtSWR4ICE9PSAiQUxMIikgewogICAgICAgICAgICAgICAgIHN0dWRlbnRzVG9QcmludC5zb3J0KChhLCBiKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgckEgPSBhLl90ZW1wUm9vbSB8fCAiIjsKICAgICAgICAgICAgICAgICAgICBjb25zdCByQiA9IGIuX3RlbXBSb29tIHx8ICIiOwogICAgICAgICAgICAgICAgICAgIGlmKHJBICE9PSByQikgcmV0dXJuIHJBLmxvY2FsZUNvbXBhcmUockIsIHVuZGVmaW5lZCwge251bWVyaWM6IHRydWV9KTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gKGdldFZhbHVlKGEsWydOb20nXSl8fCcnKS5sb2NhbGVDb21wYXJlKGdldFZhbHVlKGIsWydOb20nXSl8fCcnKTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9IGVsc2UgaWYgKHNvcnRNb2RlID09PSAnQ0xBU1MnKSB7CiAgICAgICAgICAgICAgICBzdHVkZW50c1RvUHJpbnQuc29ydCgoYSwgYikgPT4gewogICAgICAgICAgICAgICAgICAgIGNvbnN0IGNBID0gbm9ybUNsYXNzKGdldFZhbHVlKGEsIFsnQ2xhc3NlJywgJ0RpdiddKSk7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgY0IgPSBub3JtQ2xhc3MoZ2V0VmFsdWUoYiwgWydDbGFzc2UnLCAnRGl2J10pKTsKICAgICAgICAgICAgICAgICAgICBpZiAoY0EgIT09IGNCKSByZXR1cm4gY0EubG9jYWxlQ29tcGFyZShjQik7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChnZXRWYWx1ZShhLFsnTm9tJ10pfHwnJykubG9jYWxlQ29tcGFyZShnZXRWYWx1ZShiLFsnTm9tJ10pfHwnJyk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHN0dWRlbnRzVG9QcmludC5zb3J0KChhLCBiKSA9PiAoZ2V0VmFsdWUoYSxbJ05vbSddKXx8JycpLmxvY2FsZUNvbXBhcmUoZ2V0VmFsdWUoYixbJ05vbSddKXx8JycpKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoc3R1ZGVudHNUb1ByaW50Lmxlbmd0aCA9PT0gMCkgcmV0dXJuIGFsZXJ0KCJBdWN1biDDqWzDqHZlIHRyb3V2w6kgcG91ciBjZXMgY3JpdMOocmVzLiIpOwogICAgICAgICAgICBsZXQgaHRtbCA9ICIiOwogICAgICAgICAgICBsZXQgY2h1bmsgPSAxNDsgCiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3R1ZGVudHNUb1ByaW50Lmxlbmd0aDsgaSArPSBjaHVuaykgewogICAgICAgICAgICAgICAgY29uc3QgYmF0Y2ggPSBzdHVkZW50c1RvUHJpbnQuc2xpY2UoaSwgaSArIGNodW5rKTsKICAgICAgICAgICAgICAgIGh0bWwgKz0gYDxkaXYgY2xhc3M9ImxhYmVsLXNoZWV0Ij5gOwogICAgICAgICAgICAgICAgYmF0Y2guZm9yRWFjaChlID0+IHsKICAgICAgICAgICAgICAgICAgICBodG1sICs9IGA8ZGl2IGNsYXNzPSJsYWJlbC1jYXJkIj4ke2xvZ28gPyBgPGltZyBzcmM9IiR7bG9nb30iIGNsYXNzPSJsYWJlbC1sb2dvIj5gIDogJyd9PGRpdiBjbGFzcz0ibGFiZWwtbmFtZSI+JHtnZXRWYWx1ZShlLFsnTm9tJ10pfSAke2dldFZhbHVlKGUsWydQcsOpbm9tJ10pfTwvZGl2PjxkaXYgY2xhc3M9ImxhYmVsLWNsYXNzIj4ke2dldFZhbHVlKGUsWydDbGFzc2UnXSl9PC9kaXY+PGRpdiBjbGFzcz0ibGFiZWwtYW5vbnltIj4ke2UuTnVtQW5vbnltYXQgfHwgIj8ifTwvZGl2PjwvZGl2PmA7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIGh0bWwgKz0gYDwvZGl2PmA7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ByaW50LWFyZWEnKS5pbm5lckhUTUwgPSBodG1sOwogICAgICAgICAgICB3aW5kb3cucHJpbnQoKTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIHByaW50QW5vbnltaXR5TGlzdCgpIHsgCiAgICAgICAgICAgIGNvbnN0IGxvZ28gPSBBcHBTdGF0ZS5jb25maWcubG9nb1NyYyB8fCAiIjsgCiAgICAgICAgICAgIGNvbnN0IHNvcnRNb2RlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xpc3Rpbmctc29ydC1tb2RlJykudmFsdWU7CiAgICAgICAgICAgIGNvbnN0IGV4YW1JZHggPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbGFiZWwtZXhhbS1zZWxlY3QnKS52YWx1ZTsKICAgICAgICAgICAgbGV0IGxpc3QgPSBbXTsKICAgICAgICAgICAgaWYgKGV4YW1JZHggIT09ICJBTEwiKSB7CiAgICAgICAgICAgICAgICBjb25zdCBkaXN0ID0gQXBwU3RhdGUuZGlzdHJpYnV0aW9uRGF0YVtleGFtSWR4XTsKICAgICAgICAgICAgICAgIGlmIChkaXN0KSB7CiAgICAgICAgICAgICAgICAgICAgZGlzdC5yb29tcy5mb3JFYWNoKHIgPT4gewogICAgICAgICAgICAgICAgICAgICAgICByLnN0dWRlbnRzLmZvckVhY2gocyA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaXN0LnB1c2goeyAuLi5zLCBfcm9vbU5hbWU6IHIubmFtZSB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBsaXN0ID0gWy4uLkFwcFN0YXRlLmVsZXZlc107CiAgICAgICAgICAgIH0KICAgICAgICAgICAgY29uc3QgY2xhc3NGaWx0ZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbGFiZWwtY2xhc3Mtc2VsZWN0JykudmFsdWU7CiAgICAgICAgICAgIGlmIChjbGFzc0ZpbHRlciAhPT0gIkFMTCIpIHsKICAgICAgICAgICAgICAgIGxpc3QgPSBsaXN0LmZpbHRlcihzID0+IGdldFZhbHVlKHMsIFsnQ2xhc3NlJywnRGl2J10pID09IGNsYXNzRmlsdGVyKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoc29ydE1vZGUgPT09ICdST09NJyAmJiBleGFtSWR4ICE9PSAiQUxMIikgewogICAgICAgICAgICAgICAgIGxpc3Quc29ydCgoYSwgYikgPT4gewogICAgICAgICAgICAgICAgICAgIGNvbnN0IHJBID0gYS5fcm9vbU5hbWUgfHwgIiI7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgckIgPSBiLl9yb29tTmFtZSB8fCAiIjsKICAgICAgICAgICAgICAgICAgICBpZihyQSAhPT0gckIpIHJldHVybiByQS5sb2NhbGVDb21wYXJlKHJCLCB1bmRlZmluZWQsIHtudW1lcmljOiB0cnVlfSk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChnZXRWYWx1ZShhLFsnTm9tJ10pfHwnJykubG9jYWxlQ29tcGFyZShnZXRWYWx1ZShiLFsnTm9tJ10pfHwnJyk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSBlbHNlIGlmIChzb3J0TW9kZSA9PT0gJ0NMQVNTJykgewogICAgICAgICAgICAgICAgbGlzdC5zb3J0KChhLCBiKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgY0EgPSBub3JtQ2xhc3MoZ2V0VmFsdWUoYSwgWydDbGFzc2UnLCAnRGl2J10pKTsKICAgICAgICAgICAgICAgICAgICBjb25zdCBjQiA9IG5vcm1DbGFzcyhnZXRWYWx1ZShiLCBbJ0NsYXNzZScsICdEaXYnXSkpOwogICAgICAgICAgICAgICAgICAgIGlmIChjQSAhPT0gY0IpIHJldHVybiBjQS5sb2NhbGVDb21wYXJlKGNCKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gKGdldFZhbHVlKGEsWydOb20nXSl8fCcnKS5sb2NhbGVDb21wYXJlKGdldFZhbHVlKGIsWydOb20nXSl8fCcnKTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgbGlzdC5zb3J0KChhLCBiKSA9PiAoZ2V0VmFsdWUoYSxbJ05vbSddKXx8JycpLmxvY2FsZUNvbXBhcmUoZ2V0VmFsdWUoYixbJ05vbSddKXx8JycpKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBsZXQgcm93cyA9ICIiOyAKICAgICAgICAgICAgbGV0IGN1cnJlbnRSb29tID0gIiI7CiAgICAgICAgICAgIGxpc3QuZm9yRWFjaChlID0+IHsKICAgICAgICAgICAgICAgIGlmKHNvcnRNb2RlID09PSAnUk9PTScgJiYgZXhhbUlkeCAhPT0gIkFMTCIgJiYgZS5fcm9vbU5hbWUgIT09IGN1cnJlbnRSb29tKSB7CiAgICAgICAgICAgICAgICAgICAgY3VycmVudFJvb20gPSBlLl9yb29tTmFtZTsKICAgICAgICAgICAgICAgICAgICByb3dzICs9IGA8dHIgc3R5bGU9ImJhY2tncm91bmQ6I2VlZTsgZm9udC13ZWlnaHQ6Ym9sZDsiPjx0ZCBjb2xzcGFuPSI0Ij5TYWxsZSA6ICR7Y3VycmVudFJvb219PC90ZD48L3RyPmA7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByb3dzKz1gPHRyPjx0ZD4ke2dldFZhbHVlKGUsWydOb20nXSl9PC90ZD48dGQ+JHtnZXRWYWx1ZShlLFsnUHLDqW5vbSddKX08L3RkPjx0ZD4ke2dldFZhbHVlKGUsWydDbGFzc2UnXSl9PC90ZD48dGQ+JHtlLk51bUFub255bWF0IHx8ICcnfTwvdGQ+PC90cj5gOwogICAgICAgICAgICB9KTsgCiAgICAgICAgICAgIGNvbnN0IGh0bWwgPSBgPGRpdiBjbGFzcz0icHJpbnQtcGFnZS1saXN0Ij48ZGl2IGNsYXNzPSJwcmludC1oZWFkZXIiPjxkaXY+TElTVElORyBBTk9OWU1BVDwvZGl2PiR7bG9nbyA/IGA8aW1nIHNyYz0iJHtsb2dvfSIgY2xhc3M9InByaW50LWxvZ28iPmAgOiAnJ308L2Rpdj48dGFibGUgY2xhc3M9InByaW50LXRhYmxlIj48dGhlYWQ+PHRyPjx0aD5Ob208L3RoPjx0aD5QcsOpbm9tPC90aD48dGg+Q2xhc3NlPC90aD48dGg+TsKwIEFub255bWF0PC90aD48L3RyPjwvdGhlYWQ+PHRib2R5PiR7cm93c308L3Rib2R5PjwvdGFibGU+PC9kaXY+YDsgCiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcmludC1hcmVhJykuaW5uZXJIVE1MID0gaHRtbDsgCiAgICAgICAgICAgIHdpbmRvdy5wcmludCgpOyAKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIHBvcHVsYXRlUmVjYXBGaWx0ZXJzKCkgeyAKICAgICAgICAgICAgY29uc3QgZXhhbVNlbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZWNhcC1leGFtLXNlbGVjdCcpOyAKICAgICAgICAgICAgZXhhbVNlbC5pbm5lckhUTUwgPSAnPG9wdGlvbiB2YWx1ZT0iQUxMIj5Ub3V0ZXMgbGVzIMOpcHJldXZlczwvb3B0aW9uPic7IAogICAgICAgICAgICBBcHBTdGF0ZS5kaXN0cmlidXRpb25EYXRhLmZvckVhY2goKGQsIGkpID0+IHsgCiAgICAgICAgICAgICAgICBpZighZCkgcmV0dXJuOyAKICAgICAgICAgICAgICAgIGNvbnN0IGV4YW0gPSBBcHBTdGF0ZS5lcHJldXZlc1tkLmV4YW1JZHhdOyAKICAgICAgICAgICAgICAgIGV4YW1TZWwuYWRkKG5ldyBPcHRpb24oZ2V0VmFsdWUoZXhhbSwgWydNYXRpw6hyZScsICdFcHJldXZlJ10pLCBpKSk7IAogICAgICAgICAgICB9KTsgCiAgICAgICAgICAgIHVwZGF0ZVJlY2FwUm9vbVNlbGVjdCgpOyAKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIHVwZGF0ZVJlY2FwUm9vbVNlbGVjdCgpIHsgCiAgICAgICAgICAgIGNvbnN0IHJvb21TZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVjYXAtcm9vbS1zZWxlY3QnKTsgCiAgICAgICAgICAgIHJvb21TZWwuaW5uZXJIVE1MID0gJzxvcHRpb24gdmFsdWU9IkFMTCI+VG91dGVzIGxlcyBzYWxsZXMgdXRpbGlzw6llczwvb3B0aW9uPic7IAogICAgICAgICAgICBjb25zdCBleGFtSWR4ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JlY2FwLWV4YW0tc2VsZWN0JykudmFsdWU7IAogICAgICAgICAgICBpZihleGFtSWR4ICE9PSAiQUxMIikgeyAKICAgICAgICAgICAgICAgIGNvbnN0IGRpc3QgPSBBcHBTdGF0ZS5kaXN0cmlidXRpb25EYXRhW2V4YW1JZHhdOyAKICAgICAgICAgICAgICAgIGlmKGRpc3QpIHsKICAgICAgICAgICAgICAgICAgICBkaXN0LnJvb21zLmZvckVhY2gociA9PiB7IAogICAgICAgICAgICAgICAgICAgICAgICBpZihyLnN0dWRlbnRzLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvb21TZWwuYWRkKG5ldyBPcHRpb24oci5uYW1lLCByLm5hbWUpKTsgCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9KSAKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBlbHNlIHsgCiAgICAgICAgICAgICAgICBsZXQgcm9vbXMgPSBuZXcgU2V0KCk7IAogICAgICAgICAgICAgICAgQXBwU3RhdGUuZGlzdHJpYnV0aW9uRGF0YS5mb3JFYWNoKGQgPT4geyAKICAgICAgICAgICAgICAgICAgICBpZihkKSBkLnJvb21zLmZvckVhY2gociA9PiB7IAogICAgICAgICAgICAgICAgICAgICAgICBpZihyLnN0dWRlbnRzLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvb21zLmFkZChyLm5hbWUpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSkgCiAgICAgICAgICAgICAgICB9KTsgCiAgICAgICAgICAgICAgICBBcnJheS5mcm9tKHJvb21zKS5zb3J0KCkuZm9yRWFjaChyID0+IHJvb21TZWwuYWRkKG5ldyBPcHRpb24ociwgcikpKTsgCiAgICAgICAgICAgIH0gCiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBwcmludEdsb2JhbFJlY2FwKCkgeyAKICAgICAgICAgICAgaWYoIUFwcFN0YXRlLmRpc3RyaWJ1dGlvbkRhdGEubGVuZ3RoKSByZXR1cm4gYWxlcnQoIlLDqXBhcnRpdGlvbiB2aWRlIik7IAogICAgICAgICAgICBjb25zdCBleGFtRmlsdGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JlY2FwLWV4YW0tc2VsZWN0JykudmFsdWU7IAogICAgICAgICAgICBjb25zdCByb29tRmlsdGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JlY2FwLXJvb20tc2VsZWN0JykudmFsdWU7IAogICAgICAgICAgICBjb25zdCBsb2dvID0gQXBwU3RhdGUuY29uZmlnLmxvZ29TcmMgfHwgIiI7IAogICAgICAgICAgICBsZXQgaHRtbCA9ICIiOyAKICAgICAgICAgICAgbGV0IGV4YW1zVG9QcmludCA9IChleGFtRmlsdGVyID09PSAiQUxMIikgPyBBcHBTdGF0ZS5kaXN0cmlidXRpb25EYXRhIDogW0FwcFN0YXRlLmRpc3RyaWJ1dGlvbkRhdGFbZXhhbUZpbHRlcl1dOyAKICAgICAgICAgICAgZXhhbXNUb1ByaW50LmZvckVhY2goZGlzdCA9PiB7IAogICAgICAgICAgICAgICAgaWYoIWRpc3QpIHJldHVybjsgCiAgICAgICAgICAgICAgICBjb25zdCBleGFtTmFtZSA9IGdldFZhbHVlKEFwcFN0YXRlLmVwcmV1dmVzW2Rpc3QuZXhhbUlkeF0sIFsnTWF0acOocmUnLCdFcHJldXZlJ10pOyAKICAgICAgICAgICAgICAgIGNvbnN0IGV4YW1JbmZvID0gQXBwU3RhdGUuZXByZXV2ZXNbZGlzdC5leGFtSWR4XTsgCiAgICAgICAgICAgICAgICBkaXN0LnJvb21zLmZvckVhY2gociA9PiB7IAogICAgICAgICAgICAgICAgICAgIGlmKHJvb21GaWx0ZXIgIT09ICJBTEwiICYmIHIubmFtZSAhPT0gcm9vbUZpbHRlcikgcmV0dXJuOyAKICAgICAgICAgICAgICAgICAgICBpZihyLnN0dWRlbnRzLmxlbmd0aCA9PT0gMCkgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgIGxldCBsaXN0ID0gci5zdHVkZW50czsgCiAgICAgICAgICAgICAgICAgICAgaWYobGlzdC5sZW5ndGggPT09IDApIHJldHVybjsgCiAgICAgICAgICAgICAgICAgICAgbGlzdC5zb3J0KChhLGIpID0+IGdldFZhbHVlKGEsWydOb20nXSkubG9jYWxlQ29tcGFyZShnZXRWYWx1ZShiLFsnTm9tJ10pKSk7IAogICAgICAgICAgICAgICAgICAgIGNvbnN0IGlzVFQgPSByLmlzVFQ7IAogICAgICAgICAgICAgICAgICAgIGxldCB0aW1lID0gaXNUVCA/IGdldFZhbHVlKGV4YW1JbmZvLCBbJ0hldXJlIGRlIGTDqWJ1dCB0aWVycyB0ZW1wcycsICdIZXVyZSBUVCddKSA6IGdldFZhbHVlKGV4YW1JbmZvLCBbJ0hldXJlIGRlIGTDqWJ1dCcsICdIZXVyZSddKTsgCiAgICAgICAgICAgICAgICAgICAgaWYoIXRpbWUpIHRpbWUgPSBnZXRWYWx1ZShleGFtSW5mbywgWydIZXVyZSBkZSBkw6lidXQnLCAnSGV1cmUnXSk7IAogICAgICAgICAgICAgICAgICAgIGxldCBkdXJhdGlvbiA9IGlzVFQgPyBnZXRWYWx1ZShleGFtSW5mbywgWydEdXLDqWUgZW4gbWludXRlIHRpZXJzIHRlbXBzJywgJ0R1csOpZSBUVCddKSA6IGdldFZhbHVlKGV4YW1JbmZvLCBbJ0R1csOpZSBlbiBtaW51dGUnLCAnRHVyw6llJ10pOyAKICAgICAgICAgICAgICAgICAgICBpZighZHVyYXRpb24pIGR1cmF0aW9uID0gZ2V0VmFsdWUoZXhhbUluZm8sIFsnRHVyw6llIGVuIG1pbnV0ZScsICdEdXLDqWUnXSk7IAogICAgICAgICAgICAgICAgICAgIGxldCByb3dzID0gIiI7IAogICAgICAgICAgICAgICAgICAgIGxpc3QuZm9yRWFjaChpdGVtID0+IHsgcm93cyArPSBgPHRyPjx0ZD4ke2dldFZhbHVlKGl0ZW0sWydOb20nXSl9PC90ZD48dGQ+JHtnZXRWYWx1ZShpdGVtLFsnUHLDqW5vbSddKX08L3RkPjx0ZD4ke2dldFZhbHVlKGl0ZW0sWydDbGFzc2UnXSl9PC90ZD48L3RyPmA7IH0pOyAKICAgICAgICAgICAgICAgICAgICBjb25zdCBkYXRlU3RyID0gZm9ybWF0RGF0ZShnZXRWYWx1ZShleGFtSW5mbyxbJ0RhdGUnXSkpOyAKICAgICAgICAgICAgICAgICAgICBodG1sICs9IGA8ZGl2IGNsYXNzPSJwcmludC1wYWdlLWxpc3QiIHN0eWxlPSJwYWdlLWJyZWFrLWFmdGVyOiBhbHdheXM7Ij48ZGl2IGNsYXNzPSJwcmludC1oZWFkZXIiPjxkaXY+VEFCTEVBVSBSw4lDQVBJVFVMQVRJRjwvZGl2PiR7bG9nbyA/IGA8aW1nIHNyYz0iJHtsb2dvfSIgY2xhc3M9InByaW50LWxvZ28iPmAgOiAnJ308L2Rpdj48ZGl2IGNsYXNzPSJwcmludC1kb2MtdGl0bGUiPiR7ZXhhbU5hbWV9IC0gU2FsbGUgJHtyLm5hbWV9PC9kaXY+PGRpdiBzdHlsZT0idGV4dC1hbGlnbjpjZW50ZXI7IGZvbnQtc2l6ZToxLjFyZW07IG1hcmdpbi1ib3R0b206MTBweDsiPjxzdHJvbmc+RGF0ZSA6PC9zdHJvbmc+ICR7ZGF0ZVN0cn0gLSA8c3Ryb25nPkTDqWJ1dCA6PC9zdHJvbmc+ICR7dGltZX0gLSA8c3Ryb25nPkR1csOpZSA6PC9zdHJvbmc+ICR7Zm9ybWF0RHVyYXRpb25EaXNwbGF5KGR1cmF0aW9uKX08L2Rpdj48dGFibGUgY2xhc3M9InByaW50LXRhYmxlIj48dGhlYWQ+PHRyPjx0aD5Ob208L3RoPjx0aD5QcsOpbm9tPC90aD48dGg+Q2xhc3NlPC90aD48L3RyPjwvdGhlYWQ+PHRib2R5PiR7cm93c308L3Rib2R5PjwvdGFibGU+PC9kaXY+YDsgCiAgICAgICAgICAgICAgICB9KTsgCiAgICAgICAgICAgIH0pOyAKICAgICAgICAgICAgaWYoaHRtbCA9PT0gIiIpIHJldHVybiBhbGVydCgiQXVjdW5lIGRvbm7DqWUgcG91ciBjZSBmaWx0cmUgKG91IHNhbGxlcyB2aWRlcykuIik7IAogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJpbnQtYXJlYScpLmlubmVySFRNTCA9IGh0bWw7IAogICAgICAgICAgICB3aW5kb3cucHJpbnQoKTsgCiAgICAgICAgfQogICAgICAgIAogICAgICAgIGZ1bmN0aW9uIHByaW50UFYoKSB7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBjb25zdCBleGFtSWR4ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3B2LWV4YW0tc2VsZWN0JykudmFsdWU7CiAgICAgICAgICAgICAgICBjb25zdCByb29tSWR4ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3B2LXJvb20tc2VsZWN0JykudmFsdWU7CiAgICAgICAgICAgICAgICBpZighQXBwU3RhdGUuZGlzdHJpYnV0aW9uRGF0YSB8fCBBcHBTdGF0ZS5kaXN0cmlidXRpb25EYXRhLmxlbmd0aCA9PT0gMCkgeyBhbGVydCgiUsOpcGFydGl0aW9uIG1hbnF1YW50ZS4iKTsgcmV0dXJuOyB9CiAgICAgICAgICAgICAgICBjb25zdCBsb2dvID0gQXBwU3RhdGUuY29uZmlnLmxvZ29TcmMgfHwgIiI7CiAgICAgICAgICAgICAgICBsZXQgaHRtbCA9ICIiOwogICAgICAgICAgICAgICAgbGV0IGV4YW1zVG9QcmludCA9IChleGFtSWR4ID09PSAiQUxMIikgPyBBcHBTdGF0ZS5kaXN0cmlidXRpb25EYXRhIDogW0FwcFN0YXRlLmRpc3RyaWJ1dGlvbkRhdGFbZXhhbUlkeF1dOwogICAgICAgICAgICAgICAgZXhhbXNUb1ByaW50LmZvckVhY2goZXhhbURhdGEgPT4gewogICAgICAgICAgICAgICAgICAgIGlmKCFleGFtRGF0YSkgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IGV4YW1JbmZvID0gQXBwU3RhdGUuZXByZXV2ZXNbZXhhbURhdGEuZXhhbUlkeF07CiAgICAgICAgICAgICAgICAgICAgbGV0IHJvb21zVG9QcmludCA9IChyb29tSWR4ID09PSAiQUxMIiB8fCBleGFtSWR4ID09PSAiQUxMIikgPyBleGFtRGF0YS5yb29tcyA6IFtleGFtRGF0YS5yb29tc1tyb29tSWR4XV07CiAgICAgICAgICAgICAgICAgICAgcm9vbXNUb1ByaW50LmZvckVhY2gocm9vbURhdGEgPT4gewogICAgICAgICAgICAgICAgICAgICAgICBpZihyb29tRGF0YS5zdHVkZW50cy5sZW5ndGggPT09IDApIHJldHVybjsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaXNUVCA9IHJvb21EYXRhLmlzVFQ7CiAgICAgICAgICAgICAgICAgICAgICAgIGxldCB0aW1lID0gaXNUVCA/IGdldFZhbHVlKGV4YW1JbmZvLCBbJ0hldXJlIGRlIGTDqWJ1dCB0aWVycyB0ZW1wcycsICdIZXVyZSBUVCddKSA6IGdldFZhbHVlKGV4YW1JbmZvLCBbJ0hldXJlIGRlIGTDqWJ1dCcsICdIZXVyZSddKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoIXRpbWUpIHRpbWUgPSBnZXRWYWx1ZShleGFtSW5mbywgWydIZXVyZSBkZSBkw6lidXQnLCAnSGV1cmUnXSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBkdXJhdGlvbiA9IGlzVFQgPyBnZXRWYWx1ZShleGFtSW5mbywgWydEdXLDqWUgZW4gbWludXRlIHRpZXJzIHRlbXBzJywgJ0R1csOpZSBUVCddKSA6IGdldFZhbHVlKGV4YW1JbmZvLCBbJ0R1csOpZSBlbiBtaW51dGUnLCAnRHVyw6llJ10pOwogICAgICAgICAgICAgICAgICAgICAgICBpZighZHVyYXRpb24pIGR1cmF0aW9uID0gZ2V0VmFsdWUoZXhhbUluZm8sIFsnRHVyw6llIGVuIG1pbnV0ZScsICdEdXLDqWUnXSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBzdXJ2TmFtZXMgPSBbXTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYocm9vbURhdGEuc3VydmVpbGxhbnRzKSByb29tRGF0YS5zdXJ2ZWlsbGFudHMuZm9yRWFjaChzID0+IHN1cnZOYW1lcy5wdXNoKCh0eXBlb2Ygcz09PSdvYmplY3QnKT9zLm5hbWU6cykpOwogICAgICAgICAgICAgICAgICAgICAgICBodG1sICs9IGA8ZGl2IGNsYXNzPSJwcmludC1wYWdlLWxpc3QiIHN0eWxlPSJwYWdlLWJyZWFrLWFmdGVyOiBhbHdheXM7Ij48ZGl2IGNsYXNzPSJwcmludC1oZWFkZXIiPjxkaXY+JHtBcHBTdGF0ZS5jb25maWcuZXhhbVRpdGxlIHx8ICJFWEFNRU4ifTwvZGl2PiR7bG9nbyA/IGA8aW1nIHNyYz0iJHtsb2dvfSIgY2xhc3M9InByaW50LWxvZ28iPmAgOiAnJ308L2Rpdj48ZGl2IGNsYXNzPSJwcmludC1kb2MtdGl0bGUiPlBST0PDiFMgVkVSQkFMIERFIFNBTExFPC9kaXY+PGRpdiBjbGFzcz0icHJpbnQtaW5mb3MtYm94Ij48c3Ryb25nPsOJcHJldXZlIDo8L3N0cm9uZz4gJHtnZXRWYWx1ZShleGFtSW5mbyxbJ01hdGnDqHJlJywnRXByZXV2ZSddKX08YnI+PHN0cm9uZz5EYXRlIDo8L3N0cm9uZz4gJHtmb3JtYXREYXRlKGdldFZhbHVlKGV4YW1JbmZvLFsnRGF0ZSddKSl9PGJyPjxzdHJvbmc+SGV1cmUgZMOpYnV0IDo8L3N0cm9uZz4gJHt0aW1lfSAtIDxzdHJvbmc+RHVyw6llIDo8L3N0cm9uZz4gJHtmb3JtYXREdXJhdGlvbkRpc3BsYXkoZHVyYXRpb24pfTxicj48c3Ryb25nPlNhbGxlIDo8L3N0cm9uZz4gJHtyb29tRGF0YS5uYW1lfTxicj48c3Ryb25nPk5vbWJyZSBkZSBjYW5kaWRhdHMgOjwvc3Ryb25nPiAke3Jvb21EYXRhLnN0dWRlbnRzLmxlbmd0aH08L2Rpdj48ZGl2IHN0eWxlPSJib3JkZXI6MXB4IHNvbGlkICMwMDA7IHBhZGRpbmc6MTBweDsgaGVpZ2h0OjMwMHB4OyBtYXJnaW4tYm90dG9tOjIwcHg7Ij48c3Ryb25nPk9ic2VydmF0aW9ucyAvIEluY2lkZW50cyA6PC9zdHJvbmc+PC9kaXY+PGRpdiBzdHlsZT0iYm9yZGVyOjFweCBzb2xpZCAjMDAwOyBwYWRkaW5nOjEwcHg7IGhlaWdodDoxNTBweDsgbWFyZ2luLWJvdHRvbToyMHB4OyI+PHN0cm9uZz5BYnNlbnRzIChOb21zIGV0IFByw6lub21zKSA6PC9zdHJvbmc+PC9kaXY+PGRpdiBjbGFzcz0icHYtc2lnbmF0dXJlcyI+PGRpdiBjbGFzcz0icHYtYm94Ij48c3Ryb25nPlNpZ25hdHVyZSBTdXJ2ZWlsbGFudCAxIDo8L3N0cm9uZz48L2Rpdj48ZGl2IGNsYXNzPSJwdi1ib3giPjxzdHJvbmc+U2lnbmF0dXJlIFN1cnZlaWxsYW50IDIgOjwvc3Ryb25nPjwvZGl2PjwvZGl2PjxkaXYgY2xhc3M9ImNvbnZvYy1mb290ZXIiIHN0eWxlPSJqdXN0aWZ5LWNvbnRlbnQ6IGZsZXgtZW5kOyBtYXJnaW4tdG9wOjUwcHg7Ij48ZGl2IGNsYXNzPSJjb252b2Mtc2lnbiIgc3R5bGU9InRleHQtYWxpZ246cmlnaHQ7Ij48ZGl2PkZhaXQgw6AgJHtBcHBTdGF0ZS5jb252b2NUZXh0LmNpdHkgfHwgJ1ZpbGxlJ30sIGxlICR7bmV3IERhdGUoKS50b0xvY2FsZURhdGVTdHJpbmcoJ2ZyLUZSJyl9PC9kaXY+PGRpdiBzdHlsZT0ibWFyZ2luLXRvcDoxMHB4OyBmb250LXdlaWdodDpib2xkOyI+JHtBcHBTdGF0ZS5jb25maWcubmFtZX08L2Rpdj48L2Rpdj48L2Rpdj48L2Rpdj5gOwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJpbnQtYXJlYScpLmlubmVySFRNTCA9IGh0bWw7IHdpbmRvdy5wcmludCgpOwogICAgICAgICAgICB9IGNhdGNoKGUpeyBjb25zb2xlLmVycm9yKGUpOyBhbGVydCgiRXJyZXVyIGltcHJlc3Npb24gUFYiKTsgfQogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gcHJpbnRQb2NoZXR0ZXMoKSB7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBjb25zdCBleGFtSWR4ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3B2LWV4YW0tc2VsZWN0JykudmFsdWU7CiAgICAgICAgICAgICAgICBjb25zdCByb29tSWR4ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3B2LXJvb20tc2VsZWN0JykudmFsdWU7CiAgICAgICAgICAgICAgICBpZighQXBwU3RhdGUuZGlzdHJpYnV0aW9uRGF0YSB8fCBBcHBTdGF0ZS5kaXN0cmlidXRpb25EYXRhLmxlbmd0aCA9PT0gMCkgeyBhbGVydCgiUsOpcGFydGl0aW9uIG1hbnF1YW50ZS4iKTsgcmV0dXJuOyB9CiAgICAgICAgICAgICAgICBjb25zdCBsb2dvID0gQXBwU3RhdGUuY29uZmlnLmxvZ29TcmMgfHwgIiI7CiAgICAgICAgICAgICAgICBjb25zdCBjb25zaWduZXMgPSBBcHBTdGF0ZS5wb2NoZXR0ZVRleHQuc3VydiB8fCAiIjsKICAgICAgICAgICAgICAgIGxldCBodG1sID0gIiI7CiAgICAgICAgICAgICAgICBsZXQgZXhhbXNUb1ByaW50ID0gKGV4YW1JZHggPT09ICJBTEwiKSA/IEFwcFN0YXRlLmRpc3RyaWJ1dGlvbkRhdGEgOiBbQXBwU3RhdGUuZGlzdHJpYnV0aW9uRGF0YVtleGFtSWR4XV07CiAgICAgICAgICAgICAgICBleGFtc1RvUHJpbnQuZm9yRWFjaChleGFtRGF0YSA9PiB7CiAgICAgICAgICAgICAgICAgICAgaWYoIWV4YW1EYXRhKSByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgY29uc3QgZXhhbUluZm8gPSBBcHBTdGF0ZS5lcHJldXZlc1tleGFtRGF0YS5leGFtSWR4XTsKICAgICAgICAgICAgICAgICAgICBsZXQgcm9vbXNUb1ByaW50ID0gKHJvb21JZHggPT09ICJBTEwiIHx8IGV4YW1JZHggPT09ICJBTEwiKSA/IGV4YW1EYXRhLnJvb21zIDogW2V4YW1EYXRhLnJvb21zW3Jvb21JZHhdXTsKICAgICAgICAgICAgICAgICAgICByb29tc1RvUHJpbnQuZm9yRWFjaChyb29tRGF0YSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHJvb21EYXRhLnN0dWRlbnRzLmxlbmd0aCA9PT0gMCkgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpc1RUID0gcm9vbURhdGEuaXNUVDsKICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHRpbWUgPSBpc1RUID8gZ2V0VmFsdWUoZXhhbUluZm8sIFsnSGV1cmUgZGUgZMOpYnV0IHRpZXJzIHRlbXBzJywgJ0hldXJlIFRUJ10pIDogZ2V0VmFsdWUoZXhhbUluZm8sIFsnSGV1cmUgZGUgZMOpYnV0JywgJ0hldXJlJ10pOwogICAgICAgICAgICAgICAgICAgICAgICBpZighdGltZSkgdGltZSA9IGdldFZhbHVlKGV4YW1JbmZvLCBbJ0hldXJlIGRlIGTDqWJ1dCcsICdIZXVyZSddKTsKICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGR1cmF0aW9uID0gaXNUVCA/IGdldFZhbHVlKGV4YW1JbmZvLCBbJ0R1csOpZSBlbiBtaW51dGUgdGllcnMgdGVtcHMnLCAnRHVyw6llIFRUJ10pIDogZ2V0VmFsdWUoZXhhbUluZm8sIFsnRHVyw6llIGVuIG1pbnV0ZScsICdEdXLDqWUnXSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCFkdXJhdGlvbikgZHVyYXRpb24gPSBnZXRWYWx1ZShleGFtSW5mbywgWydEdXLDqWUgZW4gbWludXRlJywgJ0R1csOpZSddKTsKICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHN1cnZOYW1lcyA9IFtdOwogICAgICAgICAgICAgICAgICAgICAgICBpZihyb29tRGF0YS5zdXJ2ZWlsbGFudHMpIHJvb21EYXRhLnN1cnZlaWxsYW50cy5mb3JFYWNoKHMgPT4gc3Vydk5hbWVzLnB1c2goKHR5cGVvZiBzPT09J29iamVjdCcpP3MubmFtZTpzKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGh0bWwgKz0gYDxkaXYgY2xhc3M9InByaW50LXBhZ2UtY29udm9jIj48ZGl2IGNsYXNzPSJwcmludC1oZWFkZXIiPjxkaXYgc3R5bGU9ImZvbnQtc2l6ZToxLjVyZW07IGZvbnQtd2VpZ2h0OmJvbGQ7Ij5QT0NIRVRURSBTVUpFVDwvZGl2PiR7bG9nbyA/IGA8aW1nIHNyYz0iJHtsb2dvfSIgY2xhc3M9InByaW50LWxvZ28iPmAgOiAnJ308L2Rpdj48ZGl2IHN0eWxlPSJib3JkZXI6NHB4IHNvbGlkICMwMDA7IHBhZGRpbmc6MjBweDsgdGV4dC1hbGlnbjpjZW50ZXI7IG1hcmdpbjozMHB4IDA7Ij48aDEgc3R5bGU9ImZvbnQtc2l6ZTozcmVtOyBtYXJnaW46MDsiPiR7cm9vbURhdGEubmFtZX08L2gxPjxoMiBzdHlsZT0iZm9udC1zaXplOjJyZW07IG1hcmdpbjoxMHB4IDA7Ij4ke2dldFZhbHVlKGV4YW1JbmZvLFsnTWF0acOocmUnLCdFcHJldXZlJ10pfTwvaDI+PGgzIHN0eWxlPSJtYXJnaW46MDsiPiR7cm9vbURhdGEuc3R1ZGVudHMubGVuZ3RofSBDb3BpZXM8L2gzPjwvZGl2PjxkaXYgY2xhc3M9InByaW50LWluZm9zLWJveCIgc3R5bGU9ImZvbnQtc2l6ZToxLjJyZW07Ij48c3Ryb25nPkRhdGUgOjwvc3Ryb25nPiAke2Zvcm1hdERhdGUoZ2V0VmFsdWUoZXhhbUluZm8sWydEYXRlJ10pKX08YnI+PHN0cm9uZz5Ib3JhaXJlIDo8L3N0cm9uZz4gJHt0aW1lfTxicj48c3Ryb25nPkR1csOpZSA6PC9zdHJvbmc+ICR7Zm9ybWF0RHVyYXRpb25EaXNwbGF5KGR1cmF0aW9uKX08YnI+PHN0cm9uZz5TdXJ2ZWlsbGFudHMgOjwvc3Ryb25nPiAke3N1cnZOYW1lcy5qb2luKCcgLyAnKX08L2Rpdj48ZGl2IHN0eWxlPSJtYXJnaW4tdG9wOjIwcHg7IGJvcmRlcjoxcHggc29saWQgIzAwMDsgcGFkZGluZzoxNXB4OyBmbGV4OjE7Ij48c3Ryb25nPkNPTlNJR05FUyBBVVggU1VSVkVJTExBTlRTIDo8L3N0cm9uZz48YnI+PGJyPjxkaXYgc3R5bGU9IndoaXRlLXNwYWNlOiBwcmUtd3JhcDsiPiR7Y29uc2lnbmVzfTwvZGl2PjwvZGl2PjxkaXYgY2xhc3M9ImNvbnZvYy1mb290ZXIiIHN0eWxlPSJqdXN0aWZ5LWNvbnRlbnQ6IGZsZXgtZW5kOyI+PGRpdiBjbGFzcz0iY29udm9jLXNpZ24iIHN0eWxlPSJ0ZXh0LWFsaWduOnJpZ2h0OyI+PGRpdj5GYWl0IMOgICR7QXBwU3RhdGUuY29udm9jVGV4dC5jaXR5IHx8ICdWaWxsZSd9LCBsZSAke25ldyBEYXRlKCkudG9Mb2NhbGVEYXRlU3RyaW5nKCdmci1GUicpfTwvZGl2PjxkaXYgc3R5bGU9Im1hcmdpbi10b3A6MTBweDsgZm9udC13ZWlnaHQ6Ym9sZDsiPiR7QXBwU3RhdGUuY29uZmlnLm5hbWV9PC9kaXY+PC9kaXY+PC9kaXY+PC9kaXY+YDsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ByaW50LWFyZWEnKS5pbm5lckhUTUwgPSBodG1sOyB3aW5kb3cucHJpbnQoKTsKICAgICAgICAgICAgfSBjYXRjaChlKXsgY29uc29sZS5lcnJvcihlKTsgYWxlcnQoIkVycmV1ciBpbXByZXNzaW9uIFBvY2hldHRlIik7IH0KICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGZvcm1hdERhdGUoZCkgeyBpZighZCkgcmV0dXJuICIiOyBpZighaXNOYU4oZCkgJiYgZCA+IDEwMDApIHsgY29uc3QgZGF0ZU9iaiA9IG5ldyBEYXRlKChkIC0gKDI1NTY3ICsgMikpKjg2NDAwKjEwMDApOyByZXR1cm4gZGF0ZU9iai50b0xvY2FsZURhdGVTdHJpbmcoJ2ZyLUZSJyk7IH0gcmV0dXJuIGQ7IH0KICAgICAgICBmdW5jdGlvbiBhcHBseUxheW91dCh0eXBlKXsgaWYodHlwZSA9PT0gJ3N0ZCcpIHsgY29uc3QgcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb252b2MtdGVtcGxhdGUnKTsgcy5zdHlsZS5wYWRkaW5nVG9wID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NldHMtc3RkLXRvcCcpLnZhbHVlICsgJ21tJzsgcy5zdHlsZS5wYWRkaW5nQm90dG9tID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NldHMtc3RkLWJvdCcpLnZhbHVlICsgJ21tJzsgcy5zdHlsZS5mb250U2l6ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZXRzLXN0ZC1mb250JykudmFsdWUgKyAncHgnOyB9IGlmKHR5cGUgPT09ICdzdXJ2JykgeyBjb25zdCBzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbnZvYy1zdXJ2LXRlbXBsYXRlJyk7IHMuc3R5bGUucGFkZGluZ1RvcCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZXRzLXN1cnYtdG9wJykudmFsdWUgKyAnbW0nOyBzLnN0eWxlLnBhZGRpbmdCb3R0b20gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2V0cy1zdXJ2LWJvdCcpLnZhbHVlICsgJ21tJzsgcy5zdHlsZS5mb250U2l6ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZXRzLXN1cnYtZm9udCcpLnZhbHVlICsgJ3B4JzsgfSB9CgogICAgICAgIGZ1bmN0aW9uIHVwZGF0ZVJlYWxUaW1lQ291bnRlcnMoKSB7CiAgICAgICAgICAgIGNvbnN0IGNhcmRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnJvb20tY2FyZCcpOwogICAgICAgICAgICBjYXJkcy5mb3JFYWNoKGNhcmQgPT4gewogICAgICAgICAgICAgICAgY29uc3QgYm9keSA9IGNhcmQucXVlcnlTZWxlY3RvcignLnJvb20tYm9keScpOwogICAgICAgICAgICAgICAgY29uc3QgaGVhZGVyQ291bnRTcGFuID0gY2FyZC5xdWVyeVNlbGVjdG9yKCcucm9vbS1oZWFkZXIgPiBkaXYgPiBzcGFuJyk7CiAgICAgICAgICAgICAgICBpZihib2R5ICYmIGhlYWRlckNvdW50U3BhbikgewogICAgICAgICAgICAgICAgICAgICBjb25zdCBjb3VudCA9IGJvZHkuY2hpbGRyZW4ubGVuZ3RoOwogICAgICAgICAgICAgICAgICAgICBjb25zdCBjYXAgPSBib2R5LmdldEF0dHJpYnV0ZSgnZGF0YS1jYXBhY2l0eScpOwogICAgICAgICAgICAgICAgICAgICBoZWFkZXJDb3VudFNwYW4uaW5uZXJUZXh0ID0gYCR7Y291bnR9LyR7Y2FwfWA7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgIH0KCiAgICAgICAgLy8gSU5JVAogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjdXJyZW50LWRhdGUnKS5pbm5lclRleHQgPSBuZXcgRGF0ZSgpLnRvTG9jYWxlRGF0ZVN0cmluZygnZnItRlInKTsKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY3VycmVudC1kYXRlLXN1cnYnKS5pbm5lclRleHQgPSBuZXcgRGF0ZSgpLnRvTG9jYWxlRGF0ZVN0cmluZygnZnItRlInKTsKICAgICAgICBjb25zdCBkZWZhdWx0Q29uc2lnbmVzID0gYC1JbnN0YWxsZXIgbGVzIMOpbMOodmVzIGRhbnMgbGUgc2lsZW5jZVxuLUZhaXJlIMOpdGVpbmRyZSBsZXMgdMOpbMOpcGhvbmVzIGV0IGxlcyBtb250cmVzIGNvbm5lY3TDqWVzIChsZXMgZmFpcmUgcmFuZ2VyIGRhbnMgbGVzIHNhY3MpXG4tRmFpcmUgcmFuZ2VyIGxlcyBzYWNzIHNvdXMgbGUgdGFibGVhdVxuLVbDqXJpZmllciBsZXMgcGnDqGNlcyBkJ2lkZW50aXTDqVxuLUFmZmljaGVyIGxlcyBob3JhaXJlcyBhdSB0YWJsZWF1XG4tRGlzdHJpYnVlciBsZXMgY29waWVzIHJldG91cm7DqWVzXG4tQSBsYSBmaW4gZGUgbCfDqXByZXV2ZSwgbGVzIMOpbMOodmVzIHJlc3RlbnQgw6AgbGV1ciBwbGFjZVxuLVNpZ25hdHVyZSDDqW1hcmdlbWVudCBldCByYW5nZW1lbnQgZGVzIGNvcGllcyBwYXIgb3JkcmUgYWxwaGFiw6l0aXF1ZVxuLUNvbXBsw6l0ZXIgbGUgcHJvY8OocyB2ZXJiYWxcbi1Ew6lwb3NlciB0b3VzIGxlcyDDqWzDqW1lbnRzIGF1IHNlY3LDqXRhcmlhdCBkJ2V4YW1lbmA7CiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3R4dC1wb2NoZXR0ZS1zdXJ2JykudmFsdWUgPSBkZWZhdWx0Q29uc2lnbmVzOwogICAgICAgIEFwcFN0YXRlLnBvY2hldHRlVGV4dC5zdXJ2ID0gZGVmYXVsdENvbnNpZ25lczsKICAgIDwvc2NyaXB0PgoKPHNjcmlwdD4KKGZ1bmN0aW9uKCl7CiAgICBmdW5jdGlvbiBwYXRjaFVJKCkgewogICAgICAgIC8vIEhpZGUgbmFtZSwgcm9sZSBmb3JtLWdyb3VwcwogICAgICAgIHZhciBuYW1lRWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29uZmlnTmFtZScpOwogICAgICAgIHZhciByb2xlRWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29uZmlnUm9sZScpOwogICAgICAgIGlmIChuYW1lRWwpIHsgdmFyIGZnID0gbmFtZUVsLmNsb3Nlc3QoJy5mb3JtLWdyb3VwJyk7IGlmKGZnKSBmZy5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOyB9CiAgICAgICAgaWYgKHJvbGVFbCkgeyB2YXIgZmcgPSByb2xlRWwuY2xvc2VzdCgnLmZvcm0tZ3JvdXAnKTsgaWYoZmcpIGZnLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7IH0KICAgICAgICAvLyBIaWRlIHNlY29uZCBjb25maWctY29sIChsb2dvICsgc2lnbmF0dXJlKQogICAgICAgIHZhciBjb2xzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnI3ZpZXcxIC5jb25maWctY29sJyk7CiAgICAgICAgaWYgKGNvbHMubGVuZ3RoID49IDIpIGNvbHNbMV0uc3R5bGUuZGlzcGxheSA9ICdub25lJzsKICAgICAgICAvLyBBZGQgaW5mbyBiYW5uZXIgYWZ0ZXIgaGVhZGVyCiAgICAgICAgdmFyIGhlYWRlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN2aWV3MSAuaGVhZGVyLXBhbmVsJyk7CiAgICAgICAgaWYgKGhlYWRlciAmJiAhZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BpbG90ZS1ub3RpY2UnKSkgewogICAgICAgICAgICB2YXIgZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgICAgICAgICBkLmlkID0gJ3BpbG90ZS1ub3RpY2UnOwogICAgICAgICAgICBkLnN0eWxlLmNzc1RleHQgPSAnYmFja2dyb3VuZDojZWFmNGZlO2JvcmRlcjoxcHggc29saWQgIzM0OThkYjtib3JkZXItcmFkaXVzOjhweDtwYWRkaW5nOjEwcHggMTZweDttYXJnaW4tYm90dG9tOjE1cHg7Zm9udC1zaXplOjAuODVyZW07Y29sb3I6IzJjM2U1MDtkaXNwbGF5OmZsZXg7YWxpZ24taXRlbXM6Y2VudGVyO2dhcDoxMHB4Oyc7CiAgICAgICAgICAgIGQuaW5uZXJIVE1MID0gJzxpIGNsYXNzPSJmYXMgZmEtaW5mby1jaXJjbGUiIHN0eWxlPSJjb2xvcjojMzQ5OGRiO2ZvbnQtc2l6ZToxLjFyZW07Ij48L2k+IE5vbSwgZm9uY3Rpb24sIGxvZ28gZXQgc2lnbmF0dXJlIHNvbnQgZGFucyBsZSBtZW51IDxzdHJvbmc+UGFyYW3DqHRyZXMg4pqZPC9zdHJvbmc+IGRlIGxhIGJhcnJlIHByaW5jaXBhbGUuJzsKICAgICAgICAgICAgaGVhZGVyLmFmdGVyKGQpOwogICAgICAgIH0KICAgIH0KICAgIHNldFRpbWVvdXQocGF0Y2hVSSwgMTUwKTsKICAgIHNldFRpbWVvdXQocGF0Y2hVSSwgNjAwKTsKCiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIGZ1bmN0aW9uKGUpIHsKICAgICAgICBpZiAoIWUuZGF0YSB8fCBlLmRhdGEudHlwZSAhPT0gJ3BpbG90ZS1zZXR0aW5ncycpIHJldHVybjsKICAgICAgICB2YXIgcyA9IGUuZGF0YS5kYXRhOwogICAgICAgIHRyeSB7CiAgICAgICAgICAgIGlmICh0eXBlb2YgQXBwU3RhdGUgIT09ICd1bmRlZmluZWQnKSB7CiAgICAgICAgICAgICAgICBpZiAocy5uYW1lKSB7IEFwcFN0YXRlLmNvbmZpZy5uYW1lID0gcy5uYW1lOyB2YXIgZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29uZmlnTmFtZScpOyBpZihlbCkgZWwudmFsdWUgPSBzLm5hbWU7IH0KICAgICAgICAgICAgICAgIGlmIChzLnJvbGUpIHsgQXBwU3RhdGUuY29uZmlnLnJvbGUgPSBzLnJvbGU7IHZhciBlbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb25maWdSb2xlJyk7IGlmKGVsKSBlbC52YWx1ZSA9IHMucm9sZTsgfQogICAgICAgICAgICAgICAgaWYgKHMubG9nb1NyYykgeyBBcHBTdGF0ZS5jb25maWcubG9nb1NyYyA9IHMubG9nb1NyYzsgdmFyIGVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvZ29QcmV2aWV3Jyk7IGlmKGVsKXtlbC5zcmM9cy5sb2dvU3JjO2VsLnN0eWxlLmRpc3BsYXk9J2Jsb2NrJzt9IH0KICAgICAgICAgICAgICAgIGlmIChzLnNpZ25TcmMpIHsgQXBwU3RhdGUuY29uZmlnLnNpZ25TcmMgPSBzLnNpZ25TcmM7IHZhciBlbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzaWduUHJldmlldycpOyBpZihlbCl7ZWwuc3JjPXMuc2lnblNyYztlbC5zdHlsZS5kaXNwbGF5PSdibG9jayc7fSB9CiAgICAgICAgICAgIH0KICAgICAgICAKICAgICAgICAgICAgICAgIGlmIChzLnRlYWNoZXJzICYmIHMudGVhY2hlcnMubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgICAgQXBwU3RhdGUuc3VydmVpbGxhbnRzID0gcy50ZWFjaGVyczsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBjYXRjaChlcnIpIHt9CiAgICB9KTsKICAgIHdpbmRvdy5wYXJlbnQucG9zdE1lc3NhZ2UoeyB0eXBlOiAncGlsb3RlLW1vZHVsZS1yZWFkeScsIG1vZHVsZTogJ2V4YW0nIH0sICcqJyk7Cn0pKCk7Cjwvc2NyaXB0PgoKCjxzY3JpcHQ+CmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBmdW5jdGlvbihlKSB7CiAgICBpZiAoIWUuY3RybEtleSB8fCBlLnNoaWZ0S2V5IHx8IGUuYWx0S2V5IHx8IGUubWV0YUtleSkgcmV0dXJuOwogICAgdmFyIGtleSA9IGUua2V5LnRvTG93ZXJDYXNlKCk7CiAgICBpZiAoWydwJywnZScsJ28nLCdhJywnZCddLmluZGV4T2Yoa2V5KSA+PSAwKSB7CiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgIHdpbmRvdy5wYXJlbnQucG9zdE1lc3NhZ2Uoe3R5cGU6J3BpbG90ZS1zaG9ydGN1dCcsIGtleTprZXl9LCAnKicpOwogICAgfQp9KTsKPC9zY3JpcHQ+CjwvYm9keT4KPC9odG1sPg==",
  "oral": "PCFET0NUWVBFIGh0bWw+CjxodG1sIGxhbmc9ImZyIj4KPGhlYWQ+CiAgICA8bWV0YSBjaGFyc2V0PSJVVEYtOCI+CiAgICA8bWV0YSBuYW1lPSJ2aWV3cG9ydCIgY29udGVudD0id2lkdGg9ZGV2aWNlLXdpZHRoLCBpbml0aWFsLXNjYWxlPTEuMCI+CiAgICA8dGl0bGU+T1JBTCBQSUxPVEUgLSBHZXN0aW9uIE9yYXV4ICYgw4ljcml0czwvdGl0bGU+CiAgICAKICAgIDxzY3JpcHQgc3JjPSJodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy94bHN4LzAuMTguNS94bHN4LmZ1bGwubWluLmpzIj48L3NjcmlwdD4KICAgIDxzY3JpcHQgc3JjPSJodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9mb250LWF3ZXNvbWUvNi40LjAvY3NzL2FsbC5taW4uY3NzIj48L3NjcmlwdD4KICAgIAogICAgPGxpbmsgaHJlZj0iaHR0cHM6Ly9mb250cy5nb29nbGVhcGlzLmNvbS9jc3MyP2ZhbWlseT1Sb2JvdG86d2dodEAzMDA7NDAwOzUwMDs3MDA7OTAwJmRpc3BsYXk9c3dhcCIgcmVsPSJzdHlsZXNoZWV0Ij4KCiAgICA8c3R5bGU+CiAgICAgICAgOnJvb3QgewogICAgICAgICAgICAtLXByaW1hcnktY29sb3I6ICMyOTgwYjk7IC8qIEJsZXUgcGx1cyBpbnN0aXR1dGlvbm5lbCBwb3VyIE9yYXV4ICovCiAgICAgICAgICAgIC0tc2Vjb25kYXJ5LWNvbG9yOiAjMzQ5OGRiOwogICAgICAgICAgICAtLWFjY2VudC1jb2xvcjogI2U2N2UyMjsKICAgICAgICAgICAgLS1iZy1jb2xvcjogI2Y0ZjZmODsKICAgICAgICAgICAgLS10ZXh0LWNvbG9yOiAjMmMzZTUwOwogICAgICAgICAgICAtLXNpZGViYXItd2lkdGg6IDI4MHB4OwogICAgICAgICAgICAtLXRvb2xiYXItaGVpZ2h0OiA2MHB4OwogICAgICAgIH0KCiAgICAgICAgYm9keSB7IGZvbnQtZmFtaWx5OiAnUm9ib3RvJywgc2Fucy1zZXJpZjsgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tYmctY29sb3IpOyBtYXJnaW46IDA7IHBhZGRpbmc6IDA7IGRpc3BsYXk6IGZsZXg7IGhlaWdodDogMTAwdmg7IGNvbG9yOiB2YXIoLS10ZXh0LWNvbG9yKTsgb3ZlcmZsb3c6IGhpZGRlbjsgfQoKICAgICAgICAvKiBTSURFQkFSICovCiAgICAgICAgLnNpZGViYXIgeyB3aWR0aDogdmFyKC0tc2lkZWJhci13aWR0aCk7IGJhY2tncm91bmQtY29sb3I6ICMyYzNlNTA7IGNvbG9yOiB3aGl0ZTsgZGlzcGxheTogZmxleDsgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsgYm94LXNoYWRvdzogMnB4IDAgNXB4IHJnYmEoMCwwLDAsMC4xKTsgZmxleC1zaHJpbms6IDA7IHotaW5kZXg6IDEwMDsgfQogICAgICAgIC5icmFuZCB7IHBhZGRpbmc6IDE1cHg7IHRleHQtYWxpZ246IGNlbnRlcjsgYmFja2dyb3VuZC1jb2xvcjogIzFhMjUyZjsgYm9yZGVyLWJvdHRvbTogM3B4IHNvbGlkIHZhcigtLXByaW1hcnktY29sb3IpOyB9CiAgICAgICAgLmJyYW5kIGgxIHsgbWFyZ2luOiAwOyBmb250LXNpemU6IDEuM3JlbTsgZm9udC13ZWlnaHQ6IDkwMDsgbGV0dGVyLXNwYWNpbmc6IDFweDsgfQogICAgICAgIC5zdGVwcy1uYXYgeyBmbGV4OiAxOyBwYWRkaW5nOiA1cHggMDsgb3ZlcmZsb3cteTogYXV0bzsgfQogICAgICAgIC5zdGVwLWJ0biB7IGRpc3BsYXk6IGZsZXg7IGFsaWduLWl0ZW1zOiBjZW50ZXI7IHBhZGRpbmc6IDEwcHggMTVweDsgY29sb3I6ICNlY2YwZjE7IHRleHQtZGVjb3JhdGlvbjogbm9uZTsgdHJhbnNpdGlvbjogYWxsIDAuMnM7IGJvcmRlci1sZWZ0OiA0cHggc29saWQgdHJhbnNwYXJlbnQ7IGN1cnNvcjogcG9pbnRlcjsgZm9udC1zaXplOiAwLjg1cmVtOyBib3JkZXItYm90dG9tOiAxcHggc29saWQgcmdiYSgyNTUsMjU1LDI1NSwwLjAzKTsgfQogICAgICAgIC5zdGVwLWJ0bjpob3ZlciwgLnN0ZXAtYnRuLmFjdGl2ZSB7IGJhY2tncm91bmQtY29sb3I6ICMzNDQ5NWU7IGJvcmRlci1sZWZ0LWNvbG9yOiB2YXIoLS1wcmltYXJ5LWNvbG9yKTsgcGFkZGluZy1sZWZ0OiAyMHB4OyB9CiAgICAgICAgLnN0ZXAtYnRuIGkgeyBtYXJnaW4tcmlnaHQ6IDEycHg7IHdpZHRoOiAxOHB4OyB0ZXh0LWFsaWduOiBjZW50ZXI7IGNvbG9yOiAjYmRjM2M3OyB9CiAgICAgICAgLnN0ZXAtYnRuLmFjdGl2ZSBpIHsgY29sb3I6IHZhcigtLXByaW1hcnktY29sb3IpOyB9CiAgICAgICAgLmZvb3Rlci1pbmZvIHsgcGFkZGluZzogMTBweDsgZm9udC1zaXplOiAwLjY1cmVtOyB0ZXh0LWFsaWduOiBjZW50ZXI7IG9wYWNpdHk6IDAuNTsgYmFja2dyb3VuZDogIzFhMjUyZjsgYm9yZGVyLXRvcDogMXB4IHNvbGlkICMzNDQ5NWU7IH0KCiAgICAgICAgLyogTUFJTiAqLwogICAgICAgIC5tYWluLXdyYXBwZXIgeyBmbGV4OiAxOyBkaXNwbGF5OiBmbGV4OyBmbGV4LWRpcmVjdGlvbjogY29sdW1uOyBvdmVyZmxvdzogaGlkZGVuOyB9CiAgICAgICAgLmdsb2JhbC10b29sYmFyIHsgaGVpZ2h0OiB2YXIoLS10b29sYmFyLWhlaWdodCk7IGJhY2tncm91bmQ6IHdoaXRlOyBib3JkZXItYm90dG9tOiAxcHggc29saWQgI2RkZDsgZGlzcGxheTogZmxleDsgYWxpZ24taXRlbXM6IGNlbnRlcjsganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOyBwYWRkaW5nOiAwIDMwcHg7IGJveC1zaGFkb3c6IDAgMnB4IDVweCByZ2JhKDAsMCwwLDAuMDUpOyB6LWluZGV4OiA1MDsgfQogICAgICAgIC50b29sYmFyLXRpdGxlIHsgZm9udC13ZWlnaHQ6IGJvbGQ7IGZvbnQtc2l6ZTogMS4xcmVtOyBjb2xvcjogIzdmOGM4ZDsgZGlzcGxheTogZmxleDsgYWxpZ24taXRlbXM6IGNlbnRlcjsgZ2FwOiAxMHB4OyB9CiAgICAgICAgLnRvb2xiYXItYWN0aW9ucyB7IGRpc3BsYXk6IGZsZXg7IGdhcDogMTBweDsgfQogICAgICAgIC5idG4tdG9vbGJhciB7IHBhZGRpbmc6IDhweCAxNXB4OyBib3JkZXI6IG5vbmU7IGJvcmRlci1yYWRpdXM6IDRweDsgY3Vyc29yOiBwb2ludGVyOyBmb250LXNpemU6IDAuOXJlbTsgZm9udC13ZWlnaHQ6IDUwMDsgZGlzcGxheTogZmxleDsgYWxpZ24taXRlbXM6IGNlbnRlcjsgZ2FwOiA4cHg7IHRyYW5zaXRpb246IDAuMnM7IH0KICAgICAgICAuYnRuLXNhdmUtcHJvamVjdCB7IGJhY2tncm91bmQtY29sb3I6ICMyN2FlNjA7IGNvbG9yOiB3aGl0ZTsgfSAKICAgICAgICAuYnRuLWxvYWQtcHJvamVjdCB7IGJhY2tncm91bmQtY29sb3I6ICMzNDQ5NWU7IGNvbG9yOiB3aGl0ZTsgfQogICAgICAgIC5tYWluLWNvbnRlbnQgeyBmbGV4OiAxOyBvdmVyZmxvdy15OiBhdXRvOyBwYWRkaW5nOiAyMHB4OyBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1iZy1jb2xvcik7IH0KCiAgICAgICAgLyogVUkgRUxFTUVOVFMgKi8KICAgICAgICAuaGVhZGVyLXBhbmVsIHsgZGlzcGxheTogZmxleDsganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOyBhbGlnbi1pdGVtczogY2VudGVyOyBtYXJnaW4tYm90dG9tOiAxNXB4OyBib3JkZXItYm90dG9tOiAycHggc29saWQgI2UwZTBlMDsgcGFkZGluZy1ib3R0b206IDEwcHg7IH0KICAgICAgICAuaGVhZGVyLXBhbmVsIGgyIHsgbWFyZ2luOiAwOyBmb250LXNpemU6IDEuNnJlbTsgY29sb3I6IHZhcigtLXByaW1hcnktY29sb3IpOyB9CiAgICAgICAgLnNlY3Rpb24tdmlldyB7IGRpc3BsYXk6IG5vbmU7IGFuaW1hdGlvbjogZmFkZUluIDAuM3MgZWFzZTsgfQogICAgICAgIC5zZWN0aW9uLXZpZXcuYWN0aXZlIHsgZGlzcGxheTogYmxvY2s7IH0KICAgICAgICAuY2FyZCB7IGJhY2tncm91bmQ6IHdoaXRlOyBib3JkZXItcmFkaXVzOiA4cHg7IHBhZGRpbmc6IDIwcHg7IGJveC1zaGFkb3c6IDAgMnB4IDEwcHggcmdiYSgwLDAsMCwwLjA1KTsgbWFyZ2luLWJvdHRvbTogMjBweDsgfQoKICAgICAgICAvKiBJTVBPUlQgKi8KICAgICAgICAuaW1wb3J0LWdyaWQgeyBkaXNwbGF5OiBncmlkOyBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IHJlcGVhdCgyLCAxZnIpOyBnYXA6IDIwcHg7IH0KICAgICAgICAuZmlsZS1kcm9wLXpvbmUgeyBib3JkZXI6IDJweCBkYXNoZWQgI2JkYzNjNzsgYm9yZGVyLXJhZGl1czogOHB4OyBwYWRkaW5nOiAyMHB4OyB0ZXh0LWFsaWduOiBjZW50ZXI7IHRyYW5zaXRpb246IDAuM3M7IHBvc2l0aW9uOiByZWxhdGl2ZTsgYmFja2dyb3VuZDogI2ZmZjsgbWluLWhlaWdodDogMTIwcHg7IGRpc3BsYXk6IGZsZXg7IGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47IGp1c3RpZnktY29udGVudDogY2VudGVyOyBhbGlnbi1pdGVtczogY2VudGVyOyB9CiAgICAgICAgLmZpbGUtZHJvcC16b25lOmhvdmVyIHsgYm9yZGVyLWNvbG9yOiB2YXIoLS1wcmltYXJ5LWNvbG9yKTsgYmFja2dyb3VuZDogI2ViZjVmYjsgfQogICAgICAgIC5maWxlLWRyb3Atem9uZS5sb2FkZWQgeyBib3JkZXItY29sb3I6ICMyN2FlNjA7IGJhY2tncm91bmQ6ICNmMGZmZjQ7IH0KICAgICAgICAuZmlsZS1kcm9wLXpvbmUgaW5wdXRbdHlwZT1maWxlXSB7IHBvc2l0aW9uOiBhYnNvbHV0ZTsgdG9wOiAwOyBsZWZ0OiAwOyB3aWR0aDogMTAwJTsgaGVpZ2h0OiAxMDAlOyBvcGFjaXR5OiAwOyBjdXJzb3I6IHBvaW50ZXI7IH0KICAgICAgICAuc3RhdHVzLWJhZGdlIHsgZGlzcGxheTogbm9uZTsgbWFyZ2luLXRvcDogMTBweDsgZm9udC13ZWlnaHQ6IGJvbGQ7IGZvbnQtc2l6ZTogMC45cmVtOyBwYWRkaW5nOiA1cHggMTBweDsgYm9yZGVyLXJhZGl1czogMTVweDsgfQogICAgICAgIC5zdGF0dXMtb2sgeyBiYWNrZ3JvdW5kOiAjMjdhZTYwOyBjb2xvcjogd2hpdGU7IH0KCiAgICAgICAgLyogQ09ORklHICovCiAgICAgICAgLmNvbmZpZy1jb250YWluZXIgeyBkaXNwbGF5OiBmbGV4OyBnYXA6IDQwcHg7IH0KICAgICAgICAuY29uZmlnLWNvbCB7IGZsZXg6IDE7IGJhY2tncm91bmQ6IHdoaXRlOyBwYWRkaW5nOiAzMHB4OyBib3JkZXItcmFkaXVzOiA4cHg7IGJveC1zaGFkb3c6IDAgMnB4IDEwcHggcmdiYSgwLDAsMCwwLjA1KTsgfQogICAgICAgIC5mb3JtLWdyb3VwIHsgbWFyZ2luLWJvdHRvbTogMjBweDsgfQogICAgICAgIC5mb3JtLWdyb3VwIGxhYmVsIHsgZGlzcGxheTogYmxvY2s7IG1hcmdpbi1ib3R0b206IDhweDsgZm9udC13ZWlnaHQ6IGJvbGQ7IGNvbG9yOiAjMzQ0OTVlOyBmb250LXNpemU6IDEuMXJlbTsgfQogICAgICAgIC5mb3JtLWdyb3VwIGlucHV0IHsgd2lkdGg6IDEwMCU7IHBhZGRpbmc6IDEycHg7IGJvcmRlcjogMXB4IHNvbGlkICNkZGQ7IGJvcmRlci1yYWRpdXM6IDVweDsgZm9udC1zaXplOiAxcmVtOyBib3gtc2l6aW5nOiBib3JkZXItYm94OyB9CiAgICAgICAgLnByZXZpZXctYm94IHsgd2lkdGg6IDEwMCU7IGhlaWdodDogMTUwcHg7IGJvcmRlcjogMnB4IHNvbGlkICNlZWU7IGRpc3BsYXk6IGZsZXg7IGFsaWduLWl0ZW1zOiBjZW50ZXI7IGp1c3RpZnktY29udGVudDogY2VudGVyOyBtYXJnaW4tdG9wOiAxMHB4OyBiYWNrZ3JvdW5kOiAjZmFmYWZhOyB9CiAgICAgICAgLnByZXZpZXctYm94IGltZyB7IG1heC1oZWlnaHQ6IDEwMCU7IG1heC13aWR0aDogMTAwJTsgfQoKICAgICAgICAvKiBSRVBBUlRJVElPTiAmIE9SQVVYICovCiAgICAgICAgLmV4YW0tbmF2aWdhdGlvbi1iYXIgeyBiYWNrZ3JvdW5kOiAjZmZmOyBwYWRkaW5nOiAxNXB4OyBib3JkZXItcmFkaXVzOiA4cHg7IGJveC1zaGFkb3c6IDAgMnB4IDVweCByZ2JhKDAsMCwwLDAuMDUpOyBkaXNwbGF5OiBmbGV4OyBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47IGFsaWduLWl0ZW1zOiBjZW50ZXI7IG1hcmdpbi1ib3R0b206IDIwcHg7IGJvcmRlcjogMXB4IHNvbGlkICNkZGQ7IH0KICAgICAgICAubmF2LWJ0biB7IGJhY2tncm91bmQ6ICMyYzNlNTA7IGNvbG9yOiB3aGl0ZTsgYm9yZGVyOiBub25lOyBwYWRkaW5nOiAxMHB4IDIwcHg7IGJvcmRlci1yYWRpdXM6IDVweDsgY3Vyc29yOiBwb2ludGVyOyBmb250LXdlaWdodDogYm9sZDsgZGlzcGxheTogZmxleDsgYWxpZ24taXRlbXM6IGNlbnRlcjsgZ2FwOiAxMHB4OyB9CiAgICAgICAgLmV4YW0tc2VsZWN0b3IgeyBwYWRkaW5nOiAxMHB4OyBmb250LXNpemU6IDFyZW07IGJvcmRlcjogMXB4IHNvbGlkICNjY2M7IGJvcmRlci1yYWRpdXM6IDVweDsgbWluLXdpZHRoOiAzMDBweDsgfQogICAgICAgIAogICAgICAgIC5leGFtLXNlY3Rpb24tYmxvY2sgeyBib3JkZXI6IDFweCBzb2xpZCAjY2NjOyBiYWNrZ3JvdW5kOiAjZmZmOyBib3JkZXItcmFkaXVzOiA4cHg7IHBhZGRpbmc6IDE1cHg7IGJveC1zaGFkb3c6IDAgNHB4IDEwcHggcmdiYSgwLDAsMCwwLjA1KTsgfQogICAgICAgIC5leGFtLXNlY3Rpb24taGVhZGVyIHsgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tcHJpbWFyeS1jb2xvcik7IGNvbG9yOiB3aGl0ZTsgcGFkZGluZzogMTVweDsgYm9yZGVyLXJhZGl1czogNnB4OyBtYXJnaW4tYm90dG9tOiAxNXB4OyBkaXNwbGF5OiBmbGV4OyBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47IGZvbnQtc2l6ZTogMS4ycmVtOyBmb250LXdlaWdodDogYm9sZDsgfQogICAgICAgIC5zdG9yYWdlLXpvbmUgeyBiYWNrZ3JvdW5kOiAjZWNmMGYxOyBib3JkZXI6IDNweCBkYXNoZWQgI2JkYzNjNzsgcGFkZGluZzogMTBweDsgYm9yZGVyLXJhZGl1czogOHB4OyBtaW4taGVpZ2h0OiA4MHB4OyBtYXgtaGVpZ2h0OiAyMDBweDsgb3ZlcmZsb3cteTogYXV0bzsgZGlzcGxheTogZmxleDsgZmxleC13cmFwOiB3cmFwOyBnYXA6IDEwcHg7IGFsaWduLWNvbnRlbnQ6IGZsZXgtc3RhcnQ7IG1hcmdpbi1ib3R0b206IDIwcHg7IH0KICAgICAgICAucm9vbXMtZ3JpZCB7IGRpc3BsYXk6IGdyaWQ7IGdyaWQtdGVtcGxhdGUtY29sdW1uczogcmVwZWF0KGF1dG8tZmlsbCwgbWlubWF4KDM0MHB4LCAxZnIpKTsgZ2FwOiAyNXB4OyB9IC8qIFNsaWdodGx5IHdpZGVyIGZvciBvcmFsIGNvbnRyb2xzICovCiAgICAgICAgLnJvb20tY2FyZCB7IGJhY2tncm91bmQ6IHdoaXRlOyBib3JkZXI6IDFweCBzb2xpZCAjZGRkOyBib3JkZXItcmFkaXVzOiA4cHg7IGRpc3BsYXk6IGZsZXg7IGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47IGhlaWdodDogNjAwcHg7IGJveC1zaGFkb3c6IDAgNHB4IDZweCByZ2JhKDAsMCwwLDAuMDUpOyB9CiAgICAgICAgLnJvb20tY2FyZC5yb29tLXR0IHsgYm9yZGVyOiA0cHggc29saWQgdmFyKC0tYWNjZW50LWNvbG9yKTsgYmFja2dyb3VuZC1jb2xvcjogI2ZmZmNmNTsgfQogICAgICAgIC5yb29tLWhlYWRlciB7IHBhZGRpbmc6IDEwcHg7IGJhY2tncm91bmQ6ICMyYzNlNTA7IGNvbG9yOiB3aGl0ZTsgYm9yZGVyLXJhZGl1czogNnB4IDZweCAwIDA7IGZvbnQtd2VpZ2h0OiBib2xkOyBmb250LXNpemU6IDAuOTVyZW07IH0KICAgICAgICAucm9vbS1oZWFkZXItdG9wIHsgZGlzcGxheTogZmxleDsganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOyBhbGlnbi1pdGVtczogY2VudGVyOyBtYXJnaW4tYm90dG9tOiA1cHg7fQogICAgICAgIC5yb29tLXR0IC5yb29tLWhlYWRlciB7IGJhY2tncm91bmQ6IHZhcigtLWFjY2VudC1jb2xvcik7IGNvbG9yOiAjMmMzZTUwOyB9CiAgICAgICAgLnJvb20tc3VydmVpbGxhbnRzLWFyZWEgeyBwYWRkaW5nOiAxMHB4OyBib3JkZXItYm90dG9tOiAxcHggc29saWQgI2VlZTsgYmFja2dyb3VuZDogI2Y4ZjlmYTsgbWF4LWhlaWdodDogMTIwcHg7IG92ZXJmbG93LXk6IGF1dG87IH0KICAgICAgICAuc3VydmVpbGxhbnQtcm93IHsgZGlzcGxheTogZmxleDsgZ2FwOiA1cHg7IG1hcmdpbi1ib3R0b206IDVweDsgfQogICAgICAgIC5zdXJ2ZWlsbGFudC1yb3cgc2VsZWN0IHsgd2lkdGg6IDEwMCU7IHBhZGRpbmc6IDVweDsgYm9yZGVyOiAxcHggc29saWQgI2NjYzsgYm9yZGVyLXJhZGl1czogNHB4OyBmb250LXNpemU6IDAuODVyZW07IH0KICAgICAgICAuYnRuLWFkZC1zdXJ2IHsgYmFja2dyb3VuZDogIzI3YWU2MDsgY29sb3I6IHdoaXRlOyBib3JkZXI6IG5vbmU7IGJvcmRlci1yYWRpdXM6IDAgMCA0cHggNHB4OyBjdXJzb3I6IHBvaW50ZXI7IHdpZHRoOiAxMDAlOyBwYWRkaW5nOiA2cHg7IGZvbnQtc2l6ZTogMC44cmVtOyB9CiAgICAgICAgLnJvb20tYm9keSB7IGZsZXg6IDE7IHBhZGRpbmc6IDEwcHg7IG92ZXJmbG93LXk6IGF1dG87IGJhY2tncm91bmQtY29sb3I6ICNmZmY7IH0KICAgICAgICAKICAgICAgICAuc3R1ZGVudC1pdGVtIHsgYmFja2dyb3VuZDogd2hpdGU7IGJvcmRlcjogMXB4IHNvbGlkICNlMGUwZTA7IHBhZGRpbmc6IDhweDsgbWFyZ2luLWJvdHRvbTogOHB4OyBib3JkZXItcmFkaXVzOiA0cHg7IGN1cnNvcjogZ3JhYjsgZm9udC1zaXplOiAwLjg1cmVtOyBkaXNwbGF5OiBmbGV4OyBmbGV4LWRpcmVjdGlvbjogY29sdW1uOyBnYXA6NXB4OyBib3gtc2hhZG93OiAwIDFweCAycHggcmdiYSgwLDAsMCwwLjAzKTsgfQogICAgICAgIC5zdHVkZW50LWl0ZW0uaXMtdHQgeyBib3JkZXItbGVmdDogNXB4IHNvbGlkIHZhcigtLWFjY2VudC1jb2xvcik7IGJhY2tncm91bmQ6ICNmZmZjZjA7IH0KICAgICAgICAuc3R1ZGVudC1tYWluLWluZm8geyBkaXNwbGF5OiBmbGV4OyBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47IGZvbnQtd2VpZ2h0OiA1MDA7IH0KICAgICAgICAuc3R1ZGVudC1vcmFsLWNvbnRyb2xzIHsgZGlzcGxheTogZmxleDsgZ2FwOiA1cHg7IGFsaWduLWl0ZW1zOiBjZW50ZXI7IGJhY2tncm91bmQ6ICNmMWYyZjY7IHBhZGRpbmc6IDRweDsgYm9yZGVyLXJhZGl1czogNHB4O30KICAgICAgICAuc3R1ZGVudC1vcmFsLWNvbnRyb2xzIGxhYmVsIHsgZm9udC1zaXplOiAwLjdyZW07IGNvbG9yOiAjN2Y4YzhkOyBmb250LXdlaWdodDogYm9sZDt9CiAgICAgICAgLnN0dWRlbnQtb3JhbC1jb250cm9scyBpbnB1dFt0eXBlPSJ0aW1lIl0geyBib3JkZXI6IDFweCBzb2xpZCAjY2NjOyBib3JkZXItcmFkaXVzOiAzcHg7IGZvbnQtc2l6ZTogMC44cmVtOyBwYWRkaW5nOiAycHg7IHdpZHRoOiA2NXB4OyB9CgogICAgICAgIC5zY2hlZHVsZS1idG4geyBiYWNrZ3JvdW5kOiAjOGU0NGFkOyBjb2xvcjogd2hpdGU7IGJvcmRlcjpub25lOyBib3JkZXItcmFkaXVzOjNweDsgZm9udC1zaXplOjAuN3JlbTsgcGFkZGluZzogM3B4IDhweDsgY3Vyc29yOiBwb2ludGVyOyBkaXNwbGF5OiBmbGV4OyBhbGlnbi1pdGVtczogY2VudGVyOyBnYXA6IDRweDt9CiAgICAgICAgLnNjaGVkdWxlLWJ0bjpob3ZlciB7IGJhY2tncm91bmQ6ICM5YjU5YjY7IH0KCiAgICAgICAgLyogQ09NTU9OICovCiAgICAgICAgLmNvbnRyb2xzLWJhciB7IGRpc3BsYXk6IGZsZXg7IGdhcDogMTVweDsgbWFyZ2luLWJvdHRvbTogMjBweDsgYWxpZ24taXRlbXM6IGNlbnRlcjsgYmFja2dyb3VuZDogd2hpdGU7IHBhZGRpbmc6IDE1cHg7IGJvcmRlci1yYWRpdXM6IDhweDsgYm94LXNoYWRvdzogMCAycHggNXB4IHJnYmEoMCwwLDAsMC4wNSk7IGZsZXgtd3JhcDogd3JhcDt9CiAgICAgICAgLmFjdGlvbi1idG4geyBwYWRkaW5nOiAxMHB4IDE1cHg7IGJvcmRlcjogbm9uZTsgYm9yZGVyLXJhZGl1czogNXB4OyBjdXJzb3I6IHBvaW50ZXI7IGZvbnQtd2VpZ2h0OiBib2xkOyBjb2xvcjogd2hpdGU7IGRpc3BsYXk6IGZsZXg7IGFsaWduLWl0ZW1zOiBjZW50ZXI7IGdhcDogOHB4OyB9CiAgICAgICAgLmJ0bi1jYWxjIHsgYmFja2dyb3VuZDogdmFyKC0tYWNjZW50LWNvbG9yKTsgY29sb3I6ICMzMzM7IH0KICAgICAgICAuYnRuLXByaW50IHsgYmFja2dyb3VuZDogIzJjM2U1MDsgfQogICAgICAgIC5sYXlvdXQtc2V0dGluZ3MgeyBiYWNrZ3JvdW5kOiAjZjFmMmY2OyBib3JkZXI6IDFweCBzb2xpZCAjY2NjOyBwYWRkaW5nOiAxMHB4OyBib3JkZXItcmFkaXVzOiA1cHg7IGRpc3BsYXk6IGZsZXg7IGdhcDogMTVweDsgYWxpZ24taXRlbXM6IGNlbnRlcjsgZm9udC1zaXplOiAwLjg1cmVtOyBtYXJnaW4tdG9wOiAxMHB4OyB3aWR0aDogMTAwJTsgfQogICAgICAgIC5sYXlvdXQtc2V0dGluZ3MgaW5wdXQgeyB3aWR0aDogNjBweDsgcGFkZGluZzogM3B4OyBib3JkZXI6IDFweCBzb2xpZCAjY2NjOyBib3JkZXItcmFkaXVzOiAzcHg7IH0KICAgICAgICAuZGF0YS10YWJsZSB7IHdpZHRoOiAxMDAlOyBib3JkZXItY29sbGFwc2U6IGNvbGxhcHNlOyBtYXJnaW4tdG9wOiAxNXB4OyBmb250LXNpemU6IDAuOXJlbTsgYmFja2dyb3VuZDogd2hpdGU7IH0KICAgICAgICAuZGF0YS10YWJsZSB0aCB7IGJhY2tncm91bmQ6ICMyYzNlNTA7IGNvbG9yOiB3aGl0ZTsgcGFkZGluZzogMTJweDsgdGV4dC1hbGlnbjogbGVmdDsgfQogICAgICAgIC5kYXRhLXRhYmxlIHRkIHsgcGFkZGluZzogMTBweDsgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICNlZWU7IH0KICAgICAgICAuYW5vbnltLWJhZGdlIHsgYmFja2dyb3VuZDogIzJjM2U1MDsgY29sb3I6IHdoaXRlOyBwYWRkaW5nOiAzcHggOHB4OyBib3JkZXItcmFkaXVzOiAxMHB4OyBmb250LWZhbWlseTogbW9ub3NwYWNlOyBmb250LXNpemU6IDFyZW07IH0KCiAgICAgICAgLyogUEFQRVIgLSBQcmV2aWV3IE9ubHkgKi8KICAgICAgICAucGFwZXItc2hlZXQgeyBiYWNrZ3JvdW5kOiB3aGl0ZTsgd2lkdGg6IDIxMG1tOyBtaW4taGVpZ2h0OiAyOTdtbTsgcGFkZGluZzogMjBtbTsgYm94LXNoYWRvdzogMCAwIDEwcHggcmdiYSgwLDAsMCwwLjMpOyBib3gtc2l6aW5nOiBib3JkZXItYm94OyBwb3NpdGlvbjogcmVsYXRpdmU7IGZvbnQtZmFtaWx5OiAnVGltZXMgTmV3IFJvbWFuJywgVGltZXMsIHNlcmlmOyBjb2xvcjogIzAwMDsgZGlzcGxheTpmbGV4OyBmbGV4LWRpcmVjdGlvbjpjb2x1bW47IGp1c3RpZnktY29udGVudDogY2VudGVyOyB9IAogICAgICAgIC5jb252b2MtaGVhZGVyLXJvdyB7IGRpc3BsYXk6IGZsZXg7IGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjsgbWFyZ2luLWJvdHRvbTogMzBweDsgfQogICAgICAgIC5jb252b2MtYWRkcmVzcyB7IHdpZHRoOiA1MCU7IGZvbnQtc2l6ZTogMXJlbTsgfQogICAgICAgIC5jb252b2MtYWRkcmVzcyB0ZXh0YXJlYSB7IHdpZHRoOiAxMDAlOyBoZWlnaHQ6IDgwcHg7IGJvcmRlcjogMXB4IGRhc2hlZCAjY2NjOyBmb250LWZhbWlseTogaW5oZXJpdDsgZm9udC1zaXplOiBpbmhlcml0OyByZXNpemU6IG5vbmU7IH0KICAgICAgICAuY29udm9jLWxvZ28geyBtYXgtd2lkdGg6IDE1MHB4OyBtYXgtaGVpZ2h0OiA4MHB4OyB9CiAgICAgICAgLmNvbnZvYy10aXRsZSB7IHRleHQtYWxpZ246IGNlbnRlcjsgZm9udC13ZWlnaHQ6IGJvbGQ7IGZvbnQtc2l6ZTogMS40cmVtOyB0ZXh0LWRlY29yYXRpb246IHVuZGVybGluZTsgbWFyZ2luOiAzMHB4IDA7IH0KICAgICAgICAuY29udm9jLXN0dWRlbnQtaW5mbyB7IG1hcmdpbi1ib3R0b206IDIwcHg7IGZvbnQtc2l6ZTogMS4xcmVtOyBsaW5lLWhlaWdodDogMS42OyB9CiAgICAgICAgLmNvbnZvYy1ib2R5IHsgbWFyZ2luLWJvdHRvbTogMjBweDsgfQogICAgICAgIC5lZGl0YWJsZS10ZXh0IHsgYm9yZGVyOiAxcHggZGFzaGVkICNjY2M7IHBhZGRpbmc6IDVweDsgbWluLWhlaWdodDogMjBweDsgd2hpdGUtc3BhY2U6IHByZS13cmFwOyB9CiAgICAgICAgLmNvbnZvYy10YWJsZSB7IHdpZHRoOiAxMDAlOyBib3JkZXItY29sbGFwc2U6IGNvbGxhcHNlOyBtYXJnaW4tYm90dG9tOiAzMHB4OyB9CiAgICAgICAgLmNvbnZvYy10YWJsZSB0aCwgLmNvbnZvYy10YWJsZSB0ZCB7IGJvcmRlcjogMXB4IHNvbGlkICMwMDA7IHBhZGRpbmc6IDhweDsgdGV4dC1hbGlnbjogY2VudGVyOyB9CiAgICAgICAgLmNvbnZvYy1mb290ZXIgeyBkaXNwbGF5OiBmbGV4OyBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47IGFsaWduLWl0ZW1zOiBmbGV4LWVuZDsgbWFyZ2luLXRvcDogMzBweDsgfQogICAgICAgIAogICAgICAgIEBrZXlmcmFtZXMgZmFkZUluIHsgZnJvbSB7IG9wYWNpdHk6IDA7IHRyYW5zZm9ybTogdHJhbnNsYXRlWSgxMHB4KTsgfSB0byB7IG9wYWNpdHk6IDE7IHRyYW5zZm9ybTogdHJhbnNsYXRlWSgwKTsgfSB9CgogICAgICAgIC8qIFBSSU5UICovCiAgICAgICAgQG1lZGlhIHByaW50IHsKICAgICAgICAgICAgLnNpZGViYXIsIC5nbG9iYWwtdG9vbGJhciwgLm5vLXByaW50LCAubWFpbi13cmFwcGVyLCAuc2VjdGlvbi12aWV3IHsgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50OyB9CiAgICAgICAgICAgIGJvZHkgPiAqOm5vdCgjcHJpbnQtYXJlYSkgeyBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7IH0KICAgICAgICAgICAgYm9keSwgaHRtbCB7IG1hcmdpbjogMDsgcGFkZGluZzogMDsgd2lkdGg6IDEwMCU7IGhlaWdodDogMTAwJTsgYmFja2dyb3VuZDogd2hpdGU7IGRpc3BsYXk6IGJsb2NrOyBvdmVyZmxvdzogdmlzaWJsZTsgfQogICAgICAgICAgICAjcHJpbnQtYXJlYSB7IGRpc3BsYXk6IGJsb2NrICFpbXBvcnRhbnQ7IHBvc2l0aW9uOiBhYnNvbHV0ZTsgdG9wOiAwOyBsZWZ0OiAwOyB3aWR0aDogMTAwJTsgei1pbmRleDogOTk5OTsgYmFja2dyb3VuZDogd2hpdGU7IH0KICAgICAgICAgICAgQHBhZ2UgeyBzaXplOiBBNCBwb3J0cmFpdDsgbWFyZ2luOiAwOyB9CiAgICAgICAgICAgIAogICAgICAgICAgICAucHJpbnQtcGFnZS1jb252b2MgeyAKICAgICAgICAgICAgICAgIHdpZHRoOiAyMTBtbTsgaGVpZ2h0OiAyOTdtbTsgcGFkZGluZzogMTVtbTsgYm94LXNpemluZzogYm9yZGVyLWJveDsgcGFnZS1icmVhay1hZnRlcjogYWx3YXlzOyAKICAgICAgICAgICAgICAgIGZvbnQtZmFtaWx5OiAnVGltZXMgTmV3IFJvbWFuJywgVGltZXMsIHNlcmlmOyBiYWNrZ3JvdW5kOiB3aGl0ZTsgCiAgICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4OyBmbGV4LWRpcmVjdGlvbjogY29sdW1uOyBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsKICAgICAgICAgICAgfQogICAgICAgICAgICAucHJpbnQtcGFnZS1jb252b2M6bGFzdC1jaGlsZCB7IHBhZ2UtYnJlYWstYWZ0ZXI6IGF1dG87IH0KCiAgICAgICAgICAgIC5wcmludC1wYWdlLWxpc3QgeyAKICAgICAgICAgICAgICAgIHdpZHRoOiAyMTBtbTsgbWluLWhlaWdodDogMjk3bW07IHBhZGRpbmc6IDE1bW07IGJveC1zaXppbmc6IGJvcmRlci1ib3g7IHBhZ2UtYnJlYWstYWZ0ZXI6IGFsd2F5czsgCiAgICAgICAgICAgICAgICBmb250LWZhbWlseTogJ1RpbWVzIE5ldyBSb21hbicsIFRpbWVzLCBzZXJpZjsgYmFja2dyb3VuZDogd2hpdGU7IAogICAgICAgICAgICAgICAgZGlzcGxheTogYmxvY2s7IAogICAgICAgICAgICB9CiAgICAgICAgICAgIAogICAgICAgICAgICAucHJpbnQtZmxvdyB7CiAgICAgICAgICAgICAgICB3aWR0aDogMjEwbW07IHBhZGRpbmc6IDE1bW07IGJveC1zaXppbmc6IGJvcmRlci1ib3g7CiAgICAgICAgICAgICAgICBmb250LWZhbWlseTogJ1RpbWVzIE5ldyBSb21hbicsIFRpbWVzLCBzZXJpZjsgYmFja2dyb3VuZDogd2hpdGU7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgCiAgICAgICAgICAgIC5wcmludC1oZWFkZXIgeyBkaXNwbGF5OiBmbGV4OyBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47IGFsaWduLWl0ZW1zOiBjZW50ZXI7IGJvcmRlci1ib3R0b206IDJweCBzb2xpZCAjMDAwOyBwYWRkaW5nLWJvdHRvbTogMTBweDsgbWFyZ2luLWJvdHRvbTogMjBweDsgfQogICAgICAgICAgICAucHJpbnQtbG9nbyB7IG1heC1oZWlnaHQ6IDgwcHg7IG1heC13aWR0aDogMTUwcHg7IH0KICAgICAgICAgICAgLnByaW50LWRvYy10aXRsZSB7IGZvbnQtc2l6ZTogMS41cmVtOyBmb250LXdlaWdodDogYm9sZDsgdGV4dC1hbGlnbjogY2VudGVyOyBtYXJnaW46IDIwcHggMDsgdGV4dC10cmFuc2Zvcm06IHVwcGVyY2FzZTsgYm9yZGVyOiAycHggc29saWQgIzAwMDsgcGFkZGluZzogMTBweDsgfQogICAgICAgICAgICAucHJpbnQtaW5mb3MtYm94IHsgYm9yZGVyOiAxcHggc29saWQgIzAwMDsgcGFkZGluZzogMTBweDsgbWFyZ2luLWJvdHRvbTogMTVweDsgYmFja2dyb3VuZDogI2Y5ZjlmOTsgcGFnZS1icmVhay1pbnNpZGU6IGF2b2lkOyB9CiAgICAgICAgICAgIC5wcmludC10YWJsZSB7IHdpZHRoOiAxMDAlOyBib3JkZXItY29sbGFwc2U6IGNvbGxhcHNlOyBtYXJnaW4tdG9wOiAxMHB4OyBmb250LXNpemU6IDAuOXJlbTsgcGFnZS1icmVhay1pbnNpZGU6IGF1dG87IH0KICAgICAgICAgICAgLnByaW50LXRhYmxlIHRoLCAucHJpbnQtdGFibGUgdGQgeyBib3JkZXI6IDFweCBzb2xpZCAjMDAwOyBwYWRkaW5nOiA2cHg7IHRleHQtYWxpZ246IGNlbnRlcjsgfQogICAgICAgICAgICAucHJpbnQtdGFibGUgdGggeyBiYWNrZ3JvdW5kLWNvbG9yOiAjZWVlOyB9CiAgICAgICAgICAgIC5wcmludC10YWJsZSB0ciB7IHBhZ2UtYnJlYWstaW5zaWRlOiBhdm9pZDsgcGFnZS1icmVhay1hZnRlcjogYXV0bzsgfQogICAgICAgICAgICAKICAgICAgICAgICAgLnB2LXNpZ25hdHVyZXMgeyBkaXNwbGF5OiBmbGV4OyBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47IG1hcmdpbi10b3A6IDMwcHg7IGhlaWdodDogMTAwcHg7IHBhZ2UtYnJlYWstaW5zaWRlOiBhdm9pZDsgfQogICAgICAgICAgICAucHYtYm94IHsgYm9yZGVyOiAxcHggc29saWQgIzAwMDsgd2lkdGg6IDQ1JTsgcGFkZGluZzogNXB4OyBmb250LXNpemU6IDAuOHJlbTsgfQogICAgICAgICAgICAKICAgICAgICAgICAgLmRpc3BsYXktbGlzdC1yb3cgdGQgeyBwYWRkaW5nOiA4cHg7IGZvbnQtc2l6ZTogMS4xcmVtOyB9CiAgICAgICAgfQogICAgPC9zdHlsZT4KPC9oZWFkPgo8Ym9keT4KICAgIDxkaXYgY2xhc3M9InNpZGViYXIiPgogICAgICAgIDxkaXYgY2xhc3M9ImJyYW5kIj48aDE+T1JBTCBQSUxPVEU8L2gxPjxzcGFuPmJ5IFN5bHbDqHJlIE1pY2hlbGV0PC9zcGFuPjwvZGl2PgogICAgICAgIDxuYXYgY2xhc3M9InN0ZXBzLW5hdiI+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9InN0ZXAtYnRuIGFjdGl2ZSIgb25jbGljaz0ic3dpdGNoVGFiKHRoaXMsICd2aWV3MScpIj48aSBjbGFzcz0iZmEtc29saWQgZmEtc2xpZGVycyI+PC9pPiAxLiBQYXJhbcOpdHJhZ2U8L2Rpdj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0ic3RlcC1idG4iIG9uY2xpY2s9InN3aXRjaFRhYih0aGlzLCAndmlldzInKSI+PGkgY2xhc3M9ImZhLXNvbGlkIGZhLWZpbGUtaW1wb3J0Ij48L2k+IDIuIEltcG9ydCBkb25uw6llczwvZGl2PgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJzdGVwLWJ0biIgb25jbGljaz0ic3dpdGNoVGFiKHRoaXMsICd2aWV3MycpIj48aSBjbGFzcz0iZmEtc29saWQgZmEtY2xvY2siPjwvaT4gMy4gT3JnYW5pc2F0aW9uICYgT3JhdXg8L2Rpdj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0ic3RlcC1idG4iIG9uY2xpY2s9InN3aXRjaFRhYih0aGlzLCAndmlldzQnKSI+PGkgY2xhc3M9ImZhLXNvbGlkIGZhLWVudmVsb3BlLW9wZW4tdGV4dCI+PC9pPiA0LiBDb252b2NhdGlvbnMgw4lsw6h2ZXM8L2Rpdj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0ic3RlcC1idG4iIG9uY2xpY2s9InN3aXRjaFRhYih0aGlzLCAndmlldzUnKSI+PGkgY2xhc3M9ImZhLXNvbGlkIGZhLWlkLWJhZGdlIj48L2k+IDUuIENvbnZvY2F0aW9ucyBTdXJ2ZWlsbGFudHM8L2Rpdj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0ic3RlcC1idG4iIG9uY2xpY2s9InN3aXRjaFRhYih0aGlzLCAndmlldzYnKSI+PGkgY2xhc3M9ImZhLXNvbGlkIGZhLWNsaXBib2FyZC1saXN0Ij48L2k+IDYuIMOJbWFyZ2VtZW50cyBldCBBZmZpY2hhZ2U8L2Rpdj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0ic3RlcC1idG4iIG9uY2xpY2s9InN3aXRjaFRhYih0aGlzLCAndmlldzcnKSI+PGkgY2xhc3M9ImZhLXNvbGlkIGZhLWZpbGUtc2lnbmF0dXJlIj48L2k+IDcuIFByb2PDqHMgVmVyYmFsIGV0IFBvY2hldHRlczwvZGl2PgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJzdGVwLWJ0biIgb25jbGljaz0ic3dpdGNoVGFiKHRoaXMsICd2aWV3OCcpIj48aSBjbGFzcz0iZmEtc29saWQgZmEtdGFibGUtbGlzdCI+PC9pPiA4LiBUYWJsZWF1IFLDqWNhcGl0dWxhdGlmPC9kaXY+CiAgICAgICAgPC9uYXY+CiAgICAgICAgPGRpdiBjbGFzcz0iZm9vdGVyLWluZm8iPsKpIDIwMjQtMjAyNSBFRFUgUElMT1RFIFN5c3RlbS48L2Rpdj4KICAgIDwvZGl2PgogCiAgICA8ZGl2IGNsYXNzPSJtYWluLXdyYXBwZXIiPgogICAgICAgIDxkaXYgY2xhc3M9Imdsb2JhbC10b29sYmFyIG5vLXByaW50Ij4KICAgICAgICAgICAgPGRpdiBjbGFzcz0idG9vbGJhci10aXRsZSI+PGkgY2xhc3M9ImZhLXNvbGlkIGZhLWZvbGRlci10cmVlIj48L2k+IEdlc3Rpb24gZHUgUHJvamV0PC9kaXY+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9InRvb2xiYXItYWN0aW9ucyI+CiAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJmaWxlIiBpZD0ibG9hZFByb2plY3RJbnB1dCIgc3R5bGU9ImRpc3BsYXk6bm9uZTsiIGFjY2VwdD0iLmpzb24iIG9uY2hhbmdlPSJsb2FkUHJvamVjdCh0aGlzKSI+CiAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImJ0bi10b29sYmFyIGJ0bi1sb2FkLXByb2plY3QiIG9uY2xpY2s9ImRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb2FkUHJvamVjdElucHV0JykuY2xpY2soKSI+PGkgY2xhc3M9ImZhLXNvbGlkIGZhLXVwbG9hZCI+PC9pPiBPdXZyaXI8L2J1dHRvbj4KICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYnRuLXRvb2xiYXIgYnRuLXNhdmUtcHJvamVjdCIgb25jbGljaz0ic2F2ZVByb2plY3QoKSI+PGkgY2xhc3M9ImZhLXNvbGlkIGZhLWRvd25sb2FkIj48L2k+IFNhdXZlZ2FyZGVyPC9idXR0b24+CiAgICAgICAgICAgPC9kaXY+CiAgICAgICAgPC9kaXY+CiAKICAgICAgICA8ZGl2IGNsYXNzPSJtYWluLWNvbnRlbnQiPgogICAgICAgICAgICA8ZGl2IGlkPSJ2aWV3MSIgY2xhc3M9InNlY3Rpb24tdmlldyBhY3RpdmUiPgogICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJoZWFkZXItcGFuZWwiPjxoMj48aSBjbGFzcz0iZmEtc29saWQgZmEtc2xpZGVycyI+PC9pPiAxLiBQYXJhbcOpdHJhZ2U8L2gyPjwvZGl2PgogICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJjb25maWctY29udGFpbmVyIj4KICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImNvbmZpZy1jb2wiPgogICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAiPjxsYWJlbD5Ob208L2xhYmVsPjxpbnB1dCB0eXBlPSJ0ZXh0IiBpZD0iY29uZmlnTmFtZSIgcGxhY2Vob2xkZXI9IlZvdHJlIG5vbSIgb25jaGFuZ2U9IkFwcFN0YXRlLmNvbmZpZy5uYW1lPXRoaXMudmFsdWUiPjwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAiPjxsYWJlbD5Gb25jdGlvbjwvbGFiZWw+PGlucHV0IHR5cGU9InRleHQiIGlkPSJjb25maWdSb2xlIiBwbGFjZWhvbGRlcj0iVm90cmUgZm9uY3Rpb24iIG9uY2hhbmdlPSJBcHBTdGF0ZS5jb25maWcucm9sZT10aGlzLnZhbHVlIj48L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWdyb3VwIj48bGFiZWw+SW50aXR1bMOpIGRlIGwnZXhhbWVuPC9sYWJlbD48aW5wdXQgdHlwZT0idGV4dCIgaWQ9ImNvbmZpZ0V4YW1UaXRsZSIgcGxhY2Vob2xkZXI9IkV4OiBCQUMgQkxBTkMgMjAyNSIgb25jaGFuZ2U9IkFwcFN0YXRlLmNvbmZpZy5leGFtVGl0bGU9dGhpcy52YWx1ZSI+PC9kaXY+CiAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImNvbmZpZy1jb2wiPgogICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAiPjxsYWJlbD5Mb2dvIMOJdGFibGlzc2VtZW50PC9sYWJlbD48aW5wdXQgdHlwZT0iZmlsZSIgYWNjZXB0PSJpbWFnZS8qIiBvbmNoYW5nZT0iaGFuZGxlSW1hZ2UodGhpcywgJ2xvZ29QcmV2aWV3JykiPjxkaXYgY2xhc3M9InByZXZpZXctYm94Ij48aW1nIGlkPSJsb2dvUHJldmlldyIgYWx0PSJBcGVyw6d1IiBzdHlsZT0iZGlzcGxheTpub25lOyI+PC9kaXY+PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1ncm91cCI+PGxhYmVsPlNpZ25hdHVyZTwvbGFiZWw+PGlucHV0IHR5cGU9ImZpbGUiIGFjY2VwdD0iaW1hZ2UvKiIgb25jaGFuZ2U9ImhhbmRsZUltYWdlKHRoaXMsICdzaWduUHJldmlldycpIj48ZGl2IGNsYXNzPSJwcmV2aWV3LWJveCI+PGltZyBpZD0ic2lnblByZXZpZXciIGFsdD0iQXBlcsOndSIgc3R5bGU9ImRpc3BsYXk6bm9uZTsiPjwvZGl2PjwvZGl2PgogICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgCiAgICAgICAgICAgIDxkaXYgaWQ9InZpZXcyIiBjbGFzcz0ic2VjdGlvbi12aWV3Ij4KICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iaGVhZGVyLXBhbmVsIj48aDI+PGkgY2xhc3M9ImZhLXNvbGlkIGZhLWZpbGUtaW1wb3J0Ij48L2k+IDIuIEltcG9ydCBkZXMgZG9ubsOpZXM8L2gyPjwvZGl2PgogICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJpbXBvcnQtZ3JpZCI+CiAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmaWxlLWRyb3Atem9uZSIgaWQ9InpvbmUtZWxldmVzIj48aDM+QS4gQmFzZSDDiWzDqHZlczwvaDM+PHAgc3R5bGU9ImZvbnQtc2l6ZTowLjhyZW07IGNvbG9yOiM2NjY7Ij5Ob20sIFByw6lub20sIENsYXNzZSwgVFQ8L3A+PHNwYW4gc3R5bGU9ImZvbnQtc2l6ZTowLjdyZW07IGNvbG9yOiM5OTk7Ij4oRW4gYXR0ZW50ZSk8L3NwYW4+PGlucHV0IHR5cGU9ImZpbGUiIGFjY2VwdD0iLnhsc3gsIC54bHMsIC5jc3YiIG9uY2hhbmdlPSJoYW5kbGVGaWxlKHRoaXMsICdFTEVWRVMnKSI+PGRpdiBpZD0ic3RhdHVzLWVsZXZlcyIgY2xhc3M9InN0YXR1cy1iYWRnZSI+RmljaGllciBtYW5xdWFudDwvZGl2PjwvZGl2PgogICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZmlsZS1kcm9wLXpvbmUiIGlkPSJ6b25lLWVwcmV1dmVzIj48aDM+Qi4gUGxhbm5pbmcgw4lwcmV1dmVzPC9oMz48cCBzdHlsZT0iZm9udC1zaXplOjAuOHJlbTsgY29sb3I6IzY2NjsiPk1hdGnDqHJlLCBEYXRlLCBIZXVyZSwgRHVyw6llPC9wPjxzcGFuIHN0eWxlPSJmb250LXNpemU6MC43cmVtOyBjb2xvcjojOTk5OyI+KEVuIGF0dGVudGUpPC9zcGFuPjxpbnB1dCB0eXBlPSJmaWxlIiBhY2NlcHQ9Ii54bHN4LCAueGxzLCAuY3N2IiBvbmNoYW5nZT0iaGFuZGxlRmlsZSh0aGlzLCAnRVBSRVVWRVMnKSI+PGRpdiBpZD0ic3RhdHVzLWVwcmV1dmVzIiBjbGFzcz0ic3RhdHVzLWJhZGdlIj5GaWNoaWVyIG1hbnF1YW50PC9kaXY+PC9kaXY+CiAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmaWxlLWRyb3Atem9uZSIgaWQ9InpvbmUtcmVzc291cmNlcyI+PGgzPkMuIFNhbGxlczwvaDM+PHAgc3R5bGU9ImZvbnQtc2l6ZTowLjhyZW07IGNvbG9yOiM2NjY7Ij5TYWxsZSwgQ2FwYWNpdMOpLCBUeXBlIChUVCk8L3A+PHNwYW4gc3R5bGU9ImZvbnQtc2l6ZTowLjdyZW07IGNvbG9yOiM5OTk7Ij4oRW4gYXR0ZW50ZSk8L3NwYW4+PGlucHV0IHR5cGU9ImZpbGUiIGFjY2VwdD0iLnhsc3gsIC54bHMsIC5jc3YiIG9uY2hhbmdlPSJoYW5kbGVGaWxlKHRoaXMsICdSRVNTT1VSQ0VTJykiPjxkaXYgaWQ9InN0YXR1cy1yZXNzb3VyY2VzIiBjbGFzcz0ic3RhdHVzLWJhZGdlIj5GaWNoaWVyIG1hbnF1YW50PC9kaXY+PC9kaXY+CiAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmaWxlLWRyb3Atem9uZSIgaWQ9InpvbmUtc3VydmVpbGxhbnRzIj48aDM+RC4gU3VydmVpbGxhbnRzPC9oMz48cCBzdHlsZT0iZm9udC1zaXplOjAuOHJlbTsgY29sb3I6IzY2NjsiPk5vbSwgUHLDqW5vbTwvcD48c3BhbiBzdHlsZT0iZm9udC1zaXplOjAuN3JlbTsgY29sb3I6Izk5OTsiPihFbiBhdHRlbnRlKTwvc3Bhbj48aW5wdXQgdHlwZT0iZmlsZSIgYWNjZXB0PSIueGxzeCwgLnhscywgLmNzdiIgb25jaGFuZ2U9ImhhbmRsZUZpbGUodGhpcywgJ1NVUlZFSUxMQU5UUycpIj48ZGl2IGlkPSJzdGF0dXMtc3VydmVpbGxhbnRzIiBjbGFzcz0ic3RhdHVzLWJhZGdlIj5GaWNoaWVyIG1hbnF1YW50PC9kaXY+PC9kaXY+CiAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8L2Rpdj4KIAogICAgICAgICAgICA8ZGl2IGlkPSJ2aWV3MyIgY2xhc3M9InNlY3Rpb24tdmlldyI+CiAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImhlYWRlci1wYW5lbCI+PGgyPjxpIGNsYXNzPSJmYS1zb2xpZCBmYS1jbG9jayI+PC9pPiAzLiBPcmdhbmlzYXRpb24gJiBPcmF1eDwvaDI+PC9kaXY+CiAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImNvbnRyb2xzLWJhciI+CiAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJmb250LXNpemU6MC45cmVtOyBjb2xvcjojNTU1OyBtYXJnaW4tcmlnaHQ6YXV0bzsiPkltcG9ydGV6IGxlcyBmaWNoaWVycywgY2FsY3VsZXosIHB1aXMgYWZmaW5leiBsZXMgaG9yYWlyZXMgcG91ciBsZXMgb3JhdXguPC9kaXY+CiAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9ImRpc3BsYXk6ZmxleDsgZmxleC1kaXJlY3Rpb246Y29sdW1uOyBnYXA6NXB4OyBtYXJnaW4tcmlnaHQ6MTVweDsgdGV4dC1hbGlnbjpyaWdodDsiPgogICAgICAgICAgICAgICAgICAgICAgIDxkaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBzdHlsZT0iZm9udC1zaXplOjAuODVyZW07IGZvbnQtd2VpZ2h0OmJvbGQ7Ij5UcmkgOjwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzZWxlY3QgaWQ9ImRpc3RyaWItbWV0aG9kIiBzdHlsZT0icGFkZGluZzo0cHg7IGJvcmRlci1yYWRpdXM6NHB4OyBmb250LXNpemU6MC44NXJlbTsiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iQUxQSEEiPk9yZHJlIEFscGhhYsOpdGlxdWU8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IkNMQVNTIj5QYXIgQ2xhc3NlIChTdHJpY3QpPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc2VsZWN0PgogICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgIDxkaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBzdHlsZT0iZm9udC1zaXplOjAuODVyZW07IGZvbnQtd2VpZ2h0OmJvbGQ7Ij5Qb3J0w6llIDo8L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICAgICA8c2VsZWN0IGlkPSJkaXN0cmliLXNjb3BlIiBzdHlsZT0icGFkZGluZzo0cHg7IGJvcmRlci1yYWRpdXM6NHB4OyBmb250LXNpemU6MC44NXJlbTsiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iQUxMIj5Ub3V0ZXMgbGVzIMOpcHJldXZlczwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iQ1VSUkVOVCI+w4lwcmV1dmUgYWN0dWVsbGU8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zZWxlY3Q+CiAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICA8L2Rpdj4KCiAgICAgICAgICAgICAgICAgICA8YnV0dG9uIG9uY2xpY2s9ImxhdW5jaERpc3RyaWJ1dGlvbigpIiBzdHlsZT0icGFkZGluZzoxMHB4IDIwcHg7IGJhY2tncm91bmQ6IHZhcigtLXByaW1hcnktY29sb3IpOyBjb2xvcjp3aGl0ZTsgYm9yZGVyOm5vbmU7IGJvcmRlci1yYWRpdXM6NXB4OyBjdXJzb3I6cG9pbnRlcjsiPjxpIGNsYXNzPSJmYS1zb2xpZCBmYS13YW5kLW1hZ2ljLXNwYXJrbGVzIj48L2k+IENhbGN1bGVyIC8gUsOpaW5pdGlhbGlzZXI8L2J1dHRvbj4KICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgIDxkaXYgaWQ9ImV4YW0tbmF2aWdhdGlvbiIgY2xhc3M9ImV4YW0tbmF2aWdhdGlvbi1iYXIiIHN0eWxlPSJkaXNwbGF5Om5vbmU7Ij4KICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9Im5hdi1idG4iIG9uY2xpY2s9InByZXZFeGFtKCkiPjxpIGNsYXNzPSJmYS1zb2xpZCBmYS1jaGV2cm9uLWxlZnQiPjwvaT4gUHLDqWPDqWRlbnQ8L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgIDxkaXY+PHN0cm9uZz7DiXByZXV2ZSBhY3R1ZWxsZSA6IDwvc3Ryb25nPjxzZWxlY3QgaWQ9ImV4YW0tZHJvcGRvd24iIGNsYXNzPSJleGFtLXNlbGVjdG9yIiBvbmNoYW5nZT0ianVtcFRvRXhhbSh0aGlzLnZhbHVlKSI+PC9zZWxlY3Q+PC9kaXY+CiAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJuYXYtYnRuIiBvbmNsaWNrPSJuZXh0RXhhbSgpIj5TdWl2YW50IDxpIGNsYXNzPSJmYS1zb2xpZCBmYS1jaGV2cm9uLXJpZ2h0Ij48L2k+PC9idXR0b24+CiAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICA8ZGl2IGlkPSJjdXJyZW50LWV4YW0tY29udGFpbmVyIj48ZGl2IGNsYXNzPSJjYXJkIiBzdHlsZT0idGV4dC1hbGlnbjpjZW50ZXI7IGNvbG9yOiM3ZjhjOGQ7Ij5WZXVpbGxleiBpbXBvcnRlciBsZXMgZG9ubsOpZXMgcHVpcyBjbGlxdWVyIHN1ciBDYWxjdWxlci48L2Rpdj48L2Rpdj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIAogICAgICAgICAgICA8ZGl2IGlkPSJ2aWV3NCIgY2xhc3M9InNlY3Rpb24tdmlldyI+CiAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImhlYWRlci1wYW5lbCI+PGgyPjxpIGNsYXNzPSJmYS1zb2xpZCBmYS1lbnZlbG9wZS1vcGVuLXRleHQiPjwvaT4gNC4gQ29udm9jYXRpb25zIMOJbMOodmVzPC9oMj48L2Rpdj4KICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iY29udHJvbHMtYmFyIj4KICAgICAgICAgICAgICAgICAgIDxsYWJlbD5GaWx0cmVyIHBhciBjbGFzc2UgOjwvbGFiZWw+PHNlbGVjdCBpZD0iY29udm9jLWNsYXNzLWZpbHRlciIgc3R5bGU9InBhZGRpbmc6OHB4OyBib3JkZXItcmFkaXVzOjVweDsgbWFyZ2luLWxlZnQ6MTBweDsiPjxvcHRpb24gdmFsdWU9IkFMTCI+VG91dGVzIGxlcyBjbGFzc2VzPC9vcHRpb24+PC9zZWxlY3Q+CiAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJhY3Rpb24tYnRuIGJ0bi1wcmludCIgb25jbGljaz0icHJpbnRDb252b2NhdGlvbnMoKSIgc3R5bGU9Im1hcmdpbi1sZWZ0OmF1dG87Ij48aSBjbGFzcz0iZmEtc29saWQgZmEtcHJpbnQiPjwvaT4gSW1wcmltZXI8L2J1dHRvbj4KICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImxheW91dC1zZXR0aW5ncyI+CiAgICAgICAgICAgICAgICAgICA8c3Bhbj48aSBjbGFzcz0iZmEtc29saWQgZmEtcnVsZXItY29tYmluZWQiPjwvaT4gTWlzZSBlbiBwYWdlIDo8L3NwYW4+CiAgICAgICAgICAgICAgICAgICA8bGFiZWw+SGF1dCA8aW5wdXQgdHlwZT0ibnVtYmVyIiBpZD0ic2V0cy1zdGQtdG9wIiB2YWx1ZT0iMjAiIG9uY2hhbmdlPSJhcHBseUxheW91dCgnc3RkJykiPjwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICA8bGFiZWw+QmFzIDxpbnB1dCB0eXBlPSJudW1iZXIiIGlkPSJzZXRzLXN0ZC1ib3QiIHZhbHVlPSIyMCIgb25jaGFuZ2U9ImFwcGx5TGF5b3V0KCdzdGQnKSI+PC9sYWJlbD4KICAgICAgICAgICAgICAgICAgIDxsYWJlbD5Qb2xpY2UgPGlucHV0IHR5cGU9Im51bWJlciIgaWQ9InNldHMtc3RkLWZvbnQiIHZhbHVlPSIxNiIgb25jaGFuZ2U9ImFwcGx5TGF5b3V0KCdzdGQnKSI+PC9sYWJlbD4KICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9ImRpc3BsYXk6ZmxleDsganVzdGlmeS1jb250ZW50OmNlbnRlcjsgYmFja2dyb3VuZDojY2NjOyBwYWRkaW5nOjIwcHg7IG92ZXJmbG93LXk6YXV0bzsgaGVpZ2h0OmNhbGMoMTAwdmggLSAzMDBweCk7Ij4KICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InBhcGVyLXNoZWV0IiBpZD0iY29udm9jLXRlbXBsYXRlIj4KICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJjb252b2MtaGVhZGVyLXJvdyI+PGRpdiBjbGFzcz0iY29udm9jLWFkZHJlc3MiPjx0ZXh0YXJlYSBpZD0idHh0LWFkZHJlc3MiIHBsYWNlaG9sZGVyPSJOb20gZGUgbCfDqXRhYmxpc3NlbWVudC4uLiI+PC90ZXh0YXJlYT48L2Rpdj48ZGl2IGNsYXNzPSJjb252b2MtbG9nby16b25lIj48aW1nIGlkPSJjb252b2MtbG9nby1pbWciIGNsYXNzPSJjb252b2MtbG9nbyIgYWx0PSJMb2dvIj48L2Rpdj48L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJjb252b2MtdGl0bGUiIGlkPSJ0eHQtdGl0bGUtZGlzcGxheSI+Q09OVk9DQVRJT04gPHNwYW4gaWQ9InR4dC10aXRsZS1leHRyYS1zdGQiIGNvbnRlbnRlZGl0YWJsZT0idHJ1ZSIgc3R5bGU9ImJvcmRlci1ib3R0b206IDFweCBkb3R0ZWQgIzAwMDsgbWluLXdpZHRoOiA1MHB4OyBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7Ij5BVVggw4lQUkVVVkVTIEJMQU5DSEVTPC9zcGFuPjwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImNvbnZvYy1zdHVkZW50LWluZm8iPjxzdHJvbmc+Tm9tIGV0IFByw6lub20gOjwvc3Ryb25nPiBbTm9tIFByw6lub21dPGJyPjxzdHJvbmc+Q2xhc3NlIDo8L3N0cm9uZz4gW0NsYXNzZV08L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJjb252b2MtYm9keSBlZGl0YWJsZS10ZXh0IiBpZD0idHh0LWJvZHkiIGNvbnRlbnRlZGl0YWJsZT0idHJ1ZSI+TWFkYW1lLCBNb25zaWV1ciw8YnI+RGFucyBsZSBjYWRyZSBkZSBsYSBwcsOpcGFyYXRpb24gYXV4IGV4YW1lbnMsIHZvdHJlIGVuZmFudCBlc3QgY29udm9xdcOpKGUpIGF1eCDDqXByZXV2ZXMgYmxhbmNoZXMgc2Vsb24gbGUgcGxhbm5pbmcgc3VpdmFudCA6PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgPHRhYmxlIGNsYXNzPSJjb252b2MtdGFibGUiPjx0aGVhZD48dHI+PHRoPsOJcHJldXZlPC90aD48dGg+RGF0ZTwvdGg+PHRoPkhldXJlIFBhc3NhZ2U8L3RoPjx0aD5IZXVyZSBMb2dlPC90aD48dGg+U2FsbGU8L3RoPjwvdHI+PC90aGVhZD48dGJvZHk+PHRyPjx0ZCBjb2xzcGFuPSI1Ij4oVGFibGVhdSBpY2kpPC90ZD48L3RyPjwvdGJvZHk+PC90YWJsZT4KICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJmb250LXdlaWdodDpib2xkOyBtYXJnaW4tYm90dG9tOjVweDsiPlLDqGdsZW1lbnQgZXQgY29uc2lnbmVzIDo8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJjb252b2MtcnVsZXMgZWRpdGFibGUtdGV4dCIgaWQ9InR4dC1ydWxlcyIgY29udGVudGVkaXRhYmxlPSJ0cnVlIiBzdHlsZT0iZm9udC1zaXplOjAuOXJlbTsiPi0gTGVzIMOpbMOodmVzIGRvaXZlbnQgc2UgcHLDqXNlbnRlciAzMCBtaW51dGVzIGF2YW50IGxlIGTDqWJ1dCBkZSBjaGFxdWUgw6lwcmV1dmUuPGJyPi0gTGVzIHTDqWzDqXBob25lcyBwb3J0YWJsZXMgc29udCBzdHJpY3RlbWVudCBpbnRlcmRpdHMuIFRvdXQgY29tbWUgbGVzIG1vbnRyZXMgY29ubmVjdMOpZXMuPGJyPi0gUGnDqGNlIGQnaWRlbnRpdMOpIG9ibGlnYXRvaXJlLjwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImNvbnZvYy1mb290ZXIiIHN0eWxlPSJqdXN0aWZ5LWNvbnRlbnQ6IGZsZXgtZW5kOyI+PGRpdiBjbGFzcz0iY29udm9jLXNpZ24iIHN0eWxlPSJ0ZXh0LWFsaWduOnJpZ2h0OyI+PGRpdj5GYWl0IMOgIDxzcGFuIGlkPSJ0eHQtY2l0eSIgY29udGVudGVkaXRhYmxlPSJ0cnVlIiBzdHlsZT0iYm9yZGVyLWJvdHRvbToxcHggZG90dGVkICMwMDA7Ij5WaWxsZTwvc3Bhbj4sIGxlIDxzcGFuIGlkPSJjdXJyZW50LWRhdGUiPjwvc3Bhbj48L2Rpdj48ZGl2IHN0eWxlPSJtYXJnaW4tdG9wOjE1cHg7IGZvbnQtd2VpZ2h0OmJvbGQ7IiBpZD0iY29udm9jLXNpZ24tbmFtZSI+PC9kaXY+PGRpdiBzdHlsZT0iZm9udC1zdHlsZTppdGFsaWM7IiBpZD0iY29udm9jLXNpZ24tcm9sZSI+PC9kaXY+PGltZyBpZD0iY29udm9jLXNpZ24taW1nIiBzdHlsZT0ibWF4LWhlaWdodDo2MHB4OyBtYXJnaW4tdG9wOjEwcHg7Ij48L2Rpdj48L2Rpdj4KICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPC9kaXY+CgogICAgICAgICAgICA8ZGl2IGlkPSJ2aWV3NSIgY2xhc3M9InNlY3Rpb24tdmlldyI+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJoZWFkZXItcGFuZWwiPjxoMj48aSBjbGFzcz0iZmEtc29saWQgZmEtaWQtYmFkZ2UiPjwvaT4gNS4gQ29udm9jYXRpb25zIFN1cnZlaWxsYW50czwvaDI+PC9kaXY+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJjb250cm9scy1iYXIiPgogICAgICAgICAgICAgICAgICAgIDxsYWJlbD5JbXByaW1lciBwb3VyIDo8L2xhYmVsPgogICAgICAgICAgICAgICAgICAgIDxzZWxlY3QgaWQ9ImNvbnZvYy1zdXJ2LWZpbHRlciIgc3R5bGU9InBhZGRpbmc6OHB4OyBib3JkZXItcmFkaXVzOjVweDsgbWFyZ2luLWxlZnQ6MTBweDsiPjxvcHRpb24gdmFsdWU9IkFMTCI+VG91cyBsZXMgc3VydmVpbGxhbnRzPC9vcHRpb24+PC9zZWxlY3Q+CiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYWN0aW9uLWJ0biBidG4tcHJpbnQiIG9uY2xpY2s9InByaW50U3VydmVpbGxhbnRDb252b2NhdGlvbnMoKSIgc3R5bGU9Im1hcmdpbi1sZWZ0OmF1dG87Ij48aSBjbGFzcz0iZmEtc29saWQgZmEtcHJpbnQiPjwvaT4gSW1wcmltZXI8L2J1dHRvbj4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ibGF5b3V0LXNldHRpbmdzIj4KICAgICAgICAgICAgICAgICAgICA8bGFiZWw+SGF1dCA8aW5wdXQgdHlwZT0ibnVtYmVyIiBpZD0ic2V0cy1zdXJ2LXRvcCIgdmFsdWU9IjIwIiBvbmNoYW5nZT0iYXBwbHlMYXlvdXQoJ3N1cnYnKSI+PC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICA8bGFiZWw+QmFzIDxpbnB1dCB0eXBlPSJudW1iZXIiIGlkPSJzZXRzLXN1cnYtYm90IiB2YWx1ZT0iMjAiIG9uY2hhbmdlPSJhcHBseUxheW91dCgnc3VydicpIj48L2xhYmVsPgogICAgICAgICAgICAgICAgICAgIDxsYWJlbD5Qb2xpY2UgPGlucHV0IHR5cGU9Im51bWJlciIgaWQ9InNldHMtc3Vydi1mb250IiB2YWx1ZT0iMTYiIG9uY2hhbmdlPSJhcHBseUxheW91dCgnc3VydicpIj48L2xhYmVsPgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJkaXNwbGF5OmZsZXg7IGp1c3RpZnktY29udGVudDpjZW50ZXI7IGJhY2tncm91bmQ6I2NjYzsgcGFkZGluZzoyMHB4OyBvdmVyZmxvdy15OmF1dG87IGhlaWdodDpjYWxjKDEwMHZoIC0gMzAwcHgpOyI+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0icGFwZXItc2hlZXQiIGlkPSJjb252b2Mtc3Vydi10ZW1wbGF0ZSI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImNvbnZvYy1oZWFkZXItcm93Ij48ZGl2IGNsYXNzPSJjb252b2MtYWRkcmVzcyI+PHRleHRhcmVhIGlkPSJ0eHQtc3Vydi1hZGRyZXNzIiBwbGFjZWhvbGRlcj0iTm9tIMOpdGFibGlzc2VtZW50Li4uIj48L3RleHRhcmVhPjwvZGl2PjxpbWcgaWQ9ImNvbnZvYy1zdXJ2LWxvZ28taW1nIiBjbGFzcz0iY29udm9jLWxvZ28iPjwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJjb252b2MtdGl0bGUiIGlkPSJ0eHQtc3Vydi10aXRsZS1kaXNwbGF5Ij5DT05WT0NBVElPTiA8c3BhbiBpZD0idHh0LXRpdGxlLWV4dHJhLXN1cnYiIGNvbnRlbnRlZGl0YWJsZT0idHJ1ZSIgc3R5bGU9ImJvcmRlci1ib3R0b206IDFweCBkb3R0ZWQgIzAwMDsgbWluLXdpZHRoOiA1MHB4OyBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7Ij5TVVJWRUlMTEFOQ0VTPC9zcGFuPjwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJjb252b2Mtc3R1ZGVudC1pbmZvIj48c3Ryb25nPlN1cnZlaWxsYW50IDo8L3N0cm9uZz4gW05vbV08L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iY29udm9jLWJvZHkgZWRpdGFibGUtdGV4dCIgaWQ9InR4dC1zdXJ2LWJvZHkiIGNvbnRlbnRlZGl0YWJsZT0idHJ1ZSI+Vm91cyDDqnRlcyBjb252b3F1w6koZSkgcG91ciBsZXMgc3VydmVpbGxhbmNlcyBzdWl2YW50ZXMgOjwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICA8dGFibGUgY2xhc3M9ImNvbnZvYy10YWJsZSI+PHRoZWFkPjx0cj48dGg+w4lwcmV1dmU8L3RoPjx0aD5EYXRlPC90aD48dGg+SG9yYWlyZTwvdGg+PHRoPkR1csOpZTwvdGg+PHRoPlNhbGxlPC90aD48L3RyPjwvdGhlYWQ+PHRib2R5Pjx0cj48dGQgY29sc3Bhbj0iNSI+Li4uPC90ZD48L3RyPjwvdGJvZHk+PC90YWJsZT4KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iY29udm9jLXJ1bGVzIGVkaXRhYmxlLXRleHQiIGlkPSJ0eHQtc3Vydi1ydWxlcyIgY29udGVudGVkaXRhYmxlPSJ0cnVlIj5NZXJjaSBkZSB2b3RyZSBwcsOpc2VuY2UgMzAgbWludXRlcyBhdmFudCBsZSBkw6lidXQgZGUgbCfDqXByZXV2ZS48L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iY29udm9jLWZvb3RlciIgc3R5bGU9Imp1c3RpZnktY29udGVudDogZmxleC1lbmQ7Ij48ZGl2IGNsYXNzPSJjb252b2Mtc2lnbiIgc3R5bGU9InRleHQtYWxpZ246cmlnaHQ7Ij48ZGl2PkZhaXQgw6AgPHNwYW4gaWQ9InR4dC1zdXJ2LWNpdHkiIGNvbnRlbnRlZGl0YWJsZT0idHJ1ZSI+VmlsbGU8L3NwYW4+LCBsZSA8c3BhbiBpZD0iY3VycmVudC1kYXRlLXN1cnYiPjwvc3Bhbj48L2Rpdj48ZGl2IGlkPSJjb252b2Mtc3Vydi1zaWduLW5hbWUiIHN0eWxlPSJmb250LXdlaWdodDpib2xkOyBtYXJnaW4tdG9wOjE1cHg7Ij48L2Rpdj48ZGl2IGlkPSJjb252b2Mtc3Vydi1zaWduLXJvbGUiIHN0eWxlPSJmb250LXN0eWxlOml0YWxpYzsiPjwvZGl2PjxpbWcgaWQ9ImNvbnZvYy1zdXJ2LXNpZ24taW1nIiBzdHlsZT0ibWF4LWhlaWdodDo2MHB4OyBtYXJnaW4tdG9wOjEwcHg7Ij48L2Rpdj48L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8L2Rpdj4KCiAgICAgICAgICAgIDxkaXYgaWQ9InZpZXc2IiBjbGFzcz0ic2VjdGlvbi12aWV3Ij4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImhlYWRlci1wYW5lbCI+PGgyPjxpIGNsYXNzPSJmYS1zb2xpZCBmYS1jbGlwYm9hcmQtbGlzdCI+PC9pPiA2LiDDiW1hcmdlbWVudHMgZXQgQWZmaWNoYWdlPC9oMj48L2Rpdj4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImNvbnRyb2xzLWJhciI+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iZm9udC1zaXplOjAuOXJlbTsgY29sb3I6IzU1NTsgbWFyZ2luLXJpZ2h0OjE1cHg7Ij5GaWx0cmUgc2FsbGUgKGxhaXNzZXIgc3VyIFRPVVQgcG91ciB0b3V0IGltcHJpbWVyKSA6PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPHNlbGVjdCBpZD0iZW1hcmdlbWVudC1yb29tLWZpbHRlciIgc3R5bGU9InBhZGRpbmc6OHB4OyBib3JkZXItcmFkaXVzOjVweDsgbWFyZ2luLWxlZnQ6MTBweDsiPjxvcHRpb24gdmFsdWU9IkFMTCI+VG91dGVzIGxlcyBzYWxsZXMgdXRpbGlzw6llczwvb3B0aW9uPjwvc2VsZWN0PgogICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9Im1hcmdpbi1sZWZ0OmF1dG87IGRpc3BsYXk6ZmxleDsgZ2FwOjEwcHg7Ij4KICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYWN0aW9uLWJ0biBidG4tcHJpbnQiIG9uY2xpY2s9InByaW50RGlzcGxheUxpc3QoKSI+SW1wcmltZXIgTGlzdGVzIGQnYWZmaWNoYWdlIChUb3V0ZXMgw4lwcmV1dmVzKTwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJhY3Rpb24tYnRuIGJ0bi1wcmludCIgb25jbGljaz0icHJpbnRFbWFyZ2VtZW50KCkiPkltcHJpbWVyIMOJbWFyZ2VtZW50cyAoVG91dGVzIMOJcHJldXZlcyk8L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iYmFja2dyb3VuZDojZWVlOyBwYWRkaW5nOjIwcHg7IHRleHQtYWxpZ246Y2VudGVyOyBjb2xvcjogIzU1NTsiPkxlcyBkb2N1bWVudHMgc2Vyb250IGfDqW7DqXLDqXMgcG91ciA8c3Ryb25nPnRvdXRlcyBsZXMgw6lwcmV1dmVzPC9zdHJvbmc+Ljxicj5DaGFxdWUgc2FsbGUgc2VyYSBzdXIgdW5lIG5vdXZlbGxlIHBhZ2UuPC9kaXY+CiAgICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgICAgPGRpdiBpZD0idmlldzciIGNsYXNzPSJzZWN0aW9uLXZpZXciPgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iaGVhZGVyLXBhbmVsIj48aDI+PGkgY2xhc3M9ImZhLXNvbGlkIGZhLWZpbGUtc2lnbmF0dXJlIj48L2k+IDcuIFByb2PDqHMgVmVyYmFsIGV0IFBvY2hldHRlczwvaDI+PC9kaXY+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJjb250cm9scy1iYXIiPgogICAgICAgICAgICAgICAgICAgIDxzZWxlY3QgaWQ9InB2LWV4YW0tc2VsZWN0IiBvbmNoYW5nZT0idXBkYXRlUFZSb29tU2VsZWN0KCkiPjwvc2VsZWN0PgogICAgICAgICAgICAgICAgICAgIDxzZWxlY3QgaWQ9InB2LXJvb20tc2VsZWN0Ij48L3NlbGVjdD4KICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJtYXJnaW4tbGVmdDphdXRvOyBkaXNwbGF5OmZsZXg7IGdhcDoxMHB4OyI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImFjdGlvbi1idG4gYnRuLXByaW50IiBvbmNsaWNrPSJwcmludFBWKCkiPkltcHJpbWVyIFBWPC9idXR0b24+CiAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImFjdGlvbi1idG4gYnRuLXByaW50IiBvbmNsaWNrPSJwcmludFBvY2hldHRlcygpIj5JbXByaW1lciBQb2NoZXR0ZXM8L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iY2FyZCI+CiAgICAgICAgICAgICAgICAgICAgPGgzPkNvbnNpZ25lcyAocG91ciBsYSBwb2NoZXR0ZSk8L2gzPgogICAgICAgICAgICAgICAgICAgIDx0ZXh0YXJlYSBpZD0idHh0LXBvY2hldHRlLXN1cnYiIHN0eWxlPSJ3aWR0aDoxMDAlOyBoZWlnaHQ6MjUwcHg7IHBhZGRpbmc6MTBweDsgYm9yZGVyOjFweCBzb2xpZCAjY2NjOyBib3JkZXItcmFkaXVzOjRweDsiIG9uaW5wdXQ9InNhdmVQb2NoZXR0ZVRleHQoJ3N1cnYnLCB0aGlzLnZhbHVlKSI+PC90ZXh0YXJlYT4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8L2Rpdj4KCiAgICAgICAgICAgIDxkaXYgaWQ9InZpZXc4IiBjbGFzcz0ic2VjdGlvbi12aWV3Ij4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImhlYWRlci1wYW5lbCI+PGgyPjxpIGNsYXNzPSJmYS1zb2xpZCBmYS10YWJsZS1saXN0Ij48L2k+IDguIFRhYmxlYXUgUsOpY2FwaXR1bGF0aWY8L2gyPjwvZGl2PgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iY29udHJvbHMtYmFyIj4KICAgICAgICAgICAgICAgICAgICA8bGFiZWw+w4lwcmV1dmUgOjwvbGFiZWw+IDxzZWxlY3QgaWQ9InJlY2FwLWV4YW0tc2VsZWN0IiBvbmNoYW5nZT0idXBkYXRlUmVjYXBSb29tU2VsZWN0KCkiPjwvc2VsZWN0PgogICAgICAgICAgICAgICAgICAgIDxsYWJlbCBzdHlsZT0ibWFyZ2luLWxlZnQ6MTBweDsiPlNhbGxlIDo8L2xhYmVsPiA8c2VsZWN0IGlkPSJyZWNhcC1yb29tLXNlbGVjdCI+PC9zZWxlY3Q+CiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYWN0aW9uLWJ0biBidG4tcHJpbnQiIG9uY2xpY2s9InByaW50R2xvYmFsUmVjYXAoKSIgc3R5bGU9Im1hcmdpbi1sZWZ0OmF1dG87Ij5JbXByaW1lciBUYWJsZWF1eDwvYnV0dG9uPgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJiYWNrZ3JvdW5kOiNmOWY5Zjk7IHBhZGRpbmc6MjBweDsgdGV4dC1hbGlnbjpjZW50ZXI7Ij5Hw6luw6hyZSB1biB0YWJsZWF1IHBhciDDqXByZXV2ZSBldCBwYXIgc2FsbGUgaW5kaXF1YW50IGF1eCDDqWzDqHZlcyBvw7kgc2UgcmVuZHJlLjwvZGl2PgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICA8L2Rpdj4KICAgIDwvZGl2PgogICAgPGRpdiBpZD0icHJpbnQtYXJlYSIgc3R5bGU9ImRpc3BsYXk6bm9uZTsiPjwvZGl2PgoKICAgIDxzY3JpcHQ+CiAgICAgICAgLy8gVkFSSUFCTEUgR0xPQkFMRQogICAgICAgIGxldCBBcHBTdGF0ZSA9IHsgY29uZmlnOiB7fSwgY29udm9jVGV4dDoge30sIHN1cnZDb252b2NUZXh0OiB7fSwgcG9jaGV0dGVUZXh0OiB7fSwgbGF5b3V0OiB7IHN0ZDoge3RvcDoyMCwgYm90OjIwLCBmb250OjE2fSwgc3Vydjoge3RvcDoyMCwgYm90OjIwLCBmb250OjE2fSB9LCBlbGV2ZXM6IFtdLCBlcHJldXZlczogW10sIHNhbGxlczogW10sIHN1cnZlaWxsYW50czogW10sIGRpc3RyaWJ1dGlvbkRhdGE6IFtdLCBjdXJyZW50RXhhbUluZGV4OiAwIH07CiAgICAgICAgY29uc3Qgbm9ybWFsaXplID0gcyA9PiBzID8gcy50b1N0cmluZygpLnRvTG93ZXJDYXNlKCkudHJpbSgpIDogJyc7CiAgICAgICAgY29uc3Qgbm9ybUNsYXNzID0gKHMpID0+IHMgPyBTdHJpbmcocykudG9VcHBlckNhc2UoKS5yZXBsYWNlKC9ccysvZywgJycpLnRyaW0oKSA6ICJOL0EiOwoKICAgICAgICAvLyBGVU5DVElPTiBESVNQTEFZIERVUkFUSU9OIAogICAgICAgIGZ1bmN0aW9uIGZvcm1hdER1cmF0aW9uRGlzcGxheSh2YWwpIHsKICAgICAgICAgICAgaWYgKCF2YWwpIHJldHVybiAiIjsKICAgICAgICAgICAgY29uc3QgcyA9IFN0cmluZyh2YWwpLnRyaW0oKTsKICAgICAgICAgICAgaWYgKHMuaW5jbHVkZXMoJ2gnKSB8fCBzLmluY2x1ZGVzKCc6JykpIHsKICAgICAgICAgICAgICAgIHJldHVybiBzLnJlcGxhY2UoJzonLCAnaCcpOyAKICAgICAgICAgICAgfQogICAgICAgICAgICBjb25zdCBudW0gPSBwYXJzZUZsb2F0KHMpOwogICAgICAgICAgICBpZiAoIWlzTmFOKG51bSkpIHsKICAgICAgICAgICAgICAgIGNvbnN0IGggPSBNYXRoLmZsb29yKG51bSAvIDYwKTsKICAgICAgICAgICAgICAgIGNvbnN0IG0gPSBNYXRoLnJvdW5kKG51bSAlIDYwKTsKICAgICAgICAgICAgICAgIGNvbnN0IG1TdHIgPSBtIDwgMTAgPyAnMCcgKyBtIDogbTsKICAgICAgICAgICAgICAgIGlmKGggPiAwKSByZXR1cm4gYCR7aH1oJHttU3RyfWA7CiAgICAgICAgICAgICAgICByZXR1cm4gYCR7bX0gbWluYDsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gczsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgLy8gLS0tIE5PVVZFTExFIEZPTkNUSU9OIERFIFRSSSBST0JVU1RFIERBVEUgRlJBTkNBSVNFICsgSEVVUkUgKFNww6ljaWZpcXVlIE9yYXV4KSAtLS0KICAgICAgICBmdW5jdGlvbiBnZXREYXRlVGltZVZhbHVlKGV4YW1SYXcsIHN0dWRlbnRSb29tRGF0YSwgaXNUVCkgewogICAgICAgICAgICBsZXQgZFZhbCA9IGdldFZhbHVlKGV4YW1SYXcsIFsnRGF0ZScsICdKb3VyJywgJ0RhdGUgw6lwcmV1dmUnLCAnRGF0ZSBkZWJ1dCddKTsKICAgICAgICAgICAgbGV0IGRhdGVPYmogPSBudWxsOwogICAgICAgICAgICBjb25zdCBmcmVuY2hNb250aHMgPSB7CiAgICAgICAgICAgICAgICAnamFudmllcic6IDAsICdmw6l2cmllcic6IDEsICdmZXZyaWVyJzogMSwgJ21hcnMnOiAyLCAnYXZyaWwnOiAzLCAnbWFpJzogNCwgJ2p1aW4nOiA1LAogICAgICAgICAgICAgICAgJ2p1aWxsZXQnOiA2LCAnYW/Du3QnOiA3LCAnYW91dCc6IDcsICdzZXB0ZW1icmUnOiA4LCAnb2N0b2JyZSc6IDksICdub3ZlbWJyZSc6IDEwLCAnZMOpY2VtYnJlJzogMTEsICdkZWNlbWJyZSc6IDExCiAgICAgICAgICAgIH07CiAgICAgICAgICAgIGlmIChkVmFsKSB7CiAgICAgICAgICAgICAgICBpZiAoIWlzTmFOKGRWYWwpICYmIGRWYWwgPiAyMDAwMCkgewogICAgICAgICAgICAgICAgICAgICBkYXRlT2JqID0gbmV3IERhdGUoKGRWYWwgLSAyNTU2OSkgKiA4NjQwMCAqIDEwMDApOwogICAgICAgICAgICAgICAgfSAKICAgICAgICAgICAgICAgIGVsc2UgaWYgKHR5cGVvZiBkVmFsID09PSAnc3RyaW5nJykgewogICAgICAgICAgICAgICAgICAgIGNvbnN0IGNsZWFuVmFsID0gZFZhbC50b0xvd2VyQ2FzZSgpLnRyaW0oKTsKICAgICAgICAgICAgICAgICAgICBpZiAoY2xlYW5WYWwuaW5jbHVkZXMoJy8nKSkgewogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwYXJ0cyA9IGNsZWFuVmFsLnNwbGl0KCcvJyk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwYXJ0cy5sZW5ndGggPT09IDMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGVPYmogPSBuZXcgRGF0ZShwYXJzZUludChwYXJ0c1syXSksIHBhcnNlSW50KHBhcnRzWzFdKSAtIDEsIHBhcnNlSW50KHBhcnRzWzBdKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRleHRNYXRjaCA9IGNsZWFuVmFsLm1hdGNoKC8oXGR7MSwyfXwxZXIpXHMrKFthLXrDqcO7XSspLyk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0ZXh0TWF0Y2gpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBkYXkgPSAodGV4dE1hdGNoWzFdID09PSAnMWVyJykgPyAxIDogcGFyc2VJbnQodGV4dE1hdGNoWzFdKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBtb250aE5hbWUgPSB0ZXh0TWF0Y2hbMl07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZnJlbmNoTW9udGhzLmhhc093blByb3BlcnR5KG1vbnRoTmFtZSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50WWVhciA9IG5ldyBEYXRlKCkuZ2V0RnVsbFllYXIoKTsgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZU9iaiA9IG5ldyBEYXRlKGN1cnJlbnRZZWFyLCBmcmVuY2hNb250aHNbbW9udGhOYW1lXSwgZGF5KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoIWRhdGVPYmogfHwgaXNOYU4oZGF0ZU9iai5nZXRUaW1lKCkpKSBkYXRlT2JqID0gbmV3IERhdGUoMCk7IAogICAgICAgICAgICBsZXQgdFZhbDsKICAgICAgICAgICAgaWYgKHN0dWRlbnRSb29tRGF0YSAmJiBzdHVkZW50Um9vbURhdGEucGFzc2FnZVRpbWUpIHsKICAgICAgICAgICAgICAgIHRWYWwgPSBzdHVkZW50Um9vbURhdGEucGFzc2FnZVRpbWU7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICB0VmFsID0gaXNUVCA/IGdldFZhbHVlKGV4YW1SYXcsIFsnSGV1cmUgZGUgZMOpYnV0IHRpZXJzIHRlbXBzJywgJ0hldXJlIFRUJywgJ0hldXJlIGTDqWJ1dCBUVCddKSA6IGdldFZhbHVlKGV4YW1SYXcsIFsnSGV1cmUgZGUgZMOpYnV0JywgJ0hldXJlJywgJ0hvcmFpcmUnXSk7CiAgICAgICAgICAgICAgICBpZiAoIXRWYWwpIHRWYWwgPSBnZXRWYWx1ZShleGFtUmF3LCBbJ0hldXJlIGRlIGTDqWJ1dCcsICdIZXVyZScsICdIb3JhaXJlJ10pOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGxldCBob3VycyA9IDAsIG1pbnV0ZXMgPSAwOwogICAgICAgICAgICBpZih0VmFsKSB7CiAgICAgICAgICAgICAgICBsZXQgdFN0ciA9IFN0cmluZyh0VmFsKS50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoJ2gnLCAnOicpLnJlcGxhY2UoJy4nLCAnOicpLnRyaW0oKTsKICAgICAgICAgICAgICAgIGNvbnN0IHRQYXJ0cyA9IHRTdHIuc3BsaXQoJzonKTsKICAgICAgICAgICAgICAgIGlmKHRQYXJ0cy5sZW5ndGggPj0gMSkgaG91cnMgPSBwYXJzZUludCh0UGFydHNbMF0pIHx8IDA7CiAgICAgICAgICAgICAgICBpZih0UGFydHMubGVuZ3RoID49IDIpIG1pbnV0ZXMgPSBwYXJzZUludCh0UGFydHNbMV0pIHx8IDA7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZGF0ZU9iai5zZXRIb3Vycyhob3VycywgbWludXRlcywgMCwgMCk7CiAgICAgICAgICAgIHJldHVybiBkYXRlT2JqLmdldFRpbWUoKTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIHN5bmNTdGF0ZUZyb21ET00oKSB7CiAgICAgICAgICAgIEFwcFN0YXRlLmNvbmZpZy5uYW1lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbmZpZ05hbWUnKS52YWx1ZTsKICAgICAgICAgICAgQXBwU3RhdGUuY29uZmlnLnJvbGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29uZmlnUm9sZScpLnZhbHVlOwogICAgICAgICAgICBBcHBTdGF0ZS5jb25maWcuZXhhbVRpdGxlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbmZpZ0V4YW1UaXRsZScpLnZhbHVlOwogICAgICAgICAgICBpZighQXBwU3RhdGUuY29udm9jVGV4dCkgQXBwU3RhdGUuY29udm9jVGV4dCA9IHt9OwogICAgICAgICAgICBBcHBTdGF0ZS5jb252b2NUZXh0LmFkZHJlc3MgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndHh0LWFkZHJlc3MnKS52YWx1ZTsKICAgICAgICAgICAgQXBwU3RhdGUuY29udm9jVGV4dC5ib2R5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3R4dC1ib2R5JykuaW5uZXJIVE1MOwogICAgICAgICAgICBBcHBTdGF0ZS5jb252b2NUZXh0LnJ1bGVzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3R4dC1ydWxlcycpLmlubmVySFRNTDsKICAgICAgICAgICAgQXBwU3RhdGUuY29udm9jVGV4dC5jaXR5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3R4dC1jaXR5JykuaW5uZXJUZXh0OwogICAgICAgICAgICBBcHBTdGF0ZS5jb252b2NUZXh0LnRpdGxlRXh0cmFTdGQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndHh0LXRpdGxlLWV4dHJhLXN0ZCcpLmlubmVyVGV4dDsKICAgICAgICAgICAgaWYoIUFwcFN0YXRlLmxheW91dC5zdGQpIEFwcFN0YXRlLmxheW91dC5zdGQgPSB7fTsKICAgICAgICAgICAgQXBwU3RhdGUubGF5b3V0LnN0ZC50b3AgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2V0cy1zdGQtdG9wJykudmFsdWU7CiAgICAgICAgICAgIEFwcFN0YXRlLmxheW91dC5zdGQuYm90ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NldHMtc3RkLWJvdCcpLnZhbHVlOwogICAgICAgICAgICBBcHBTdGF0ZS5sYXlvdXQuc3RkLmZvbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2V0cy1zdGQtZm9udCcpLnZhbHVlOwogICAgICAgICAgICBpZighQXBwU3RhdGUubGF5b3V0LnN1cnYpIEFwcFN0YXRlLmxheW91dC5zdXJ2ID0ge307CiAgICAgICAgICAgIEFwcFN0YXRlLmxheW91dC5zdXJ2LnRvcCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZXRzLXN1cnYtdG9wJykudmFsdWU7CiAgICAgICAgICAgIEFwcFN0YXRlLmxheW91dC5zdXJ2LmJvdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZXRzLXN1cnYtYm90JykudmFsdWU7CiAgICAgICAgICAgIEFwcFN0YXRlLmxheW91dC5zdXJ2LmZvbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2V0cy1zdXJ2LWZvbnQnKS52YWx1ZTsKICAgICAgICAgICAgaWYoIUFwcFN0YXRlLnN1cnZDb252b2NUZXh0KSBBcHBTdGF0ZS5zdXJ2Q29udm9jVGV4dCA9IHt9OwogICAgICAgICAgICBBcHBTdGF0ZS5zdXJ2Q29udm9jVGV4dC5hZGRyZXNzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3R4dC1zdXJ2LWFkZHJlc3MnKS52YWx1ZTsKICAgICAgICAgICAgQXBwU3RhdGUuc3VydkNvbnZvY1RleHQuYm9keSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0eHQtc3Vydi1ib2R5JykuaW5uZXJIVE1MOwogICAgICAgICAgICBBcHBTdGF0ZS5zdXJ2Q29udm9jVGV4dC5ydWxlcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0eHQtc3Vydi1ydWxlcycpLmlubmVySFRNTDsKICAgICAgICAgICAgQXBwU3RhdGUuc3VydkNvbnZvY1RleHQuY2l0eSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0eHQtc3Vydi1jaXR5JykuaW5uZXJUZXh0OwogICAgICAgICAgICBBcHBTdGF0ZS5zdXJ2Q29udm9jVGV4dC50aXRsZUV4dHJhU3VydiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0eHQtdGl0bGUtZXh0cmEtc3VydicpLmlubmVyVGV4dDsKICAgICAgICAgICAgaWYoIUFwcFN0YXRlLnBvY2hldHRlVGV4dCkgQXBwU3RhdGUucG9jaGV0dGVUZXh0ID0ge307CiAgICAgICAgICAgIEFwcFN0YXRlLnBvY2hldHRlVGV4dC5zdXJ2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3R4dC1wb2NoZXR0ZS1zdXJ2JykudmFsdWU7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBzYXZlUHJvamVjdCgpIHsKICAgICAgICAgICAgc3luY1N0YXRlRnJvbURPTSgpOwogICAgICAgICAgICBjb25zdCBkYXRhU3RyID0gSlNPTi5zdHJpbmdpZnkoQXBwU3RhdGUpOwogICAgICAgICAgICBjb25zdCBibG9iID0gbmV3IEJsb2IoW2RhdGFTdHJdLCB7dHlwZTogImFwcGxpY2F0aW9uL2pzb24ifSk7CiAgICAgICAgICAgIGNvbnN0IHVybCA9IFVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7CiAgICAgICAgICAgIGNvbnN0IGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7CiAgICAgICAgICAgIGEuaHJlZiA9IHVybDsKICAgICAgICAgICAgY29uc3QgZCA9IG5ldyBEYXRlKCk7CiAgICAgICAgICAgIGNvbnN0IGRhdGVTdHIgPSBkLnRvSVNPU3RyaW5nKCkuc3BsaXQoJ1QnKVswXTsKICAgICAgICAgICAgYS5kb3dubG9hZCA9IGBQUk9KRVRfRVhBTV8ke2RhdGVTdHJ9Lmpzb25gOwogICAgICAgICAgICBhLmNsaWNrKCk7CiAgICAgICAgICAgIFVSTC5yZXZva2VPYmplY3RVUkwodXJsKTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGxvYWRQcm9qZWN0KGlucHV0KSB7CiAgICAgICAgICAgIGNvbnN0IGZpbGUgPSBpbnB1dC5maWxlc1swXTsKICAgICAgICAgICAgaWYgKCFmaWxlKSByZXR1cm47CiAgICAgICAgICAgIGNvbnN0IHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7CiAgICAgICAgICAgIHJlYWRlci5vbmxvYWQgPSBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIEFwcFN0YXRlID0gSlNPTi5wYXJzZShlLnRhcmdldC5yZXN1bHQpOwogICAgICAgICAgICAgICAgICAgIHJlc3RvcmVQcm9qZWN0VUkoKTsKICAgICAgICAgICAgICAgICAgICBhbGVydCgiUHJvamV0IGNoYXJnw6kgYXZlYyBzdWNjw6hzICEiKTsKICAgICAgICAgICAgICAgIH0gY2F0Y2goZXJyKSB7IGNvbnNvbGUuZXJyb3IoZXJyKTsgYWxlcnQoIkVycmV1ciBsb3JzIGRlIGxhIGxlY3R1cmUuIik7IH0KICAgICAgICAgICAgfTsKICAgICAgICAgICAgcmVhZGVyLnJlYWRBc1RleHQoZmlsZSk7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiByZXN0b3JlUHJvamVjdFVJKCkgewogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29uZmlnTmFtZScpLnZhbHVlID0gQXBwU3RhdGUuY29uZmlnLm5hbWUgfHwgIiI7CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb25maWdSb2xlJykudmFsdWUgPSBBcHBTdGF0ZS5jb25maWcucm9sZSB8fCAiIjsKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbmZpZ0V4YW1UaXRsZScpLnZhbHVlID0gQXBwU3RhdGUuY29uZmlnLmV4YW1UaXRsZSB8fCAiIjsKICAgICAgICAgICAgaWYoQXBwU3RhdGUuY29uZmlnLmxvZ29TcmMpIHsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvZ29QcmV2aWV3Jykuc3JjID0gQXBwU3RhdGUuY29uZmlnLmxvZ29TcmM7IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb2dvUHJldmlldycpLnN0eWxlLmRpc3BsYXk9J2Jsb2NrJzsgfQogICAgICAgICAgICBpZihBcHBTdGF0ZS5jb25maWcuc2lnblNyYykgeyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2lnblByZXZpZXcnKS5zcmMgPSBBcHBTdGF0ZS5jb25maWcuc2lnblNyYzsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NpZ25QcmV2aWV3Jykuc3R5bGUuZGlzcGxheT0nYmxvY2snOyB9CiAgICAgICAgICAgIGlmKEFwcFN0YXRlLmVsZXZlcyAmJiBBcHBTdGF0ZS5lbGV2ZXMubGVuZ3RoKSB1cGRhdGVTdGF0dXMoJ3pvbmUtZWxldmVzJywgJ3N0YXR1cy1lbGV2ZXMnLCBgJHtBcHBTdGF0ZS5lbGV2ZXMubGVuZ3RofSDDqWzDqHZlc2ApOwogICAgICAgICAgICBpZihBcHBTdGF0ZS5lcHJldXZlcyAmJiBBcHBTdGF0ZS5lcHJldXZlcy5sZW5ndGgpIHVwZGF0ZVN0YXR1cygnem9uZS1lcHJldXZlcycsICdzdGF0dXMtZXByZXV2ZXMnLCBgJHtBcHBTdGF0ZS5lcHJldXZlcy5sZW5ndGh9IMOpcHJldXZlc2ApOwogICAgICAgICAgICBpZihBcHBTdGF0ZS5zYWxsZXMgJiYgQXBwU3RhdGUuc2FsbGVzLmxlbmd0aCkgdXBkYXRlU3RhdHVzKCd6b25lLXJlc3NvdXJjZXMnLCAnc3RhdHVzLXJlc3NvdXJjZXMnLCBgJHtBcHBTdGF0ZS5zYWxsZXMubGVuZ3RofSBzYWxsZXNgKTsKICAgICAgICAgICAgaWYoQXBwU3RhdGUuc3VydmVpbGxhbnRzICYmIEFwcFN0YXRlLnN1cnZlaWxsYW50cy5sZW5ndGgpIHVwZGF0ZVN0YXR1cygnem9uZS1zdXJ2ZWlsbGFudHMnLCAnc3RhdHVzLXN1cnZlaWxsYW50cycsIGAke0FwcFN0YXRlLnN1cnZlaWxsYW50cy5sZW5ndGh9IHN1cnZlaWxsYW50c2ApOwogICAgICAgICAgICBpZihBcHBTdGF0ZS5kaXN0cmlidXRpb25EYXRhICYmIEFwcFN0YXRlLmRpc3RyaWJ1dGlvbkRhdGEubGVuZ3RoKSB7IHJlbmRlckV4YW1OYXZpZ2F0aW9uKCk7IHJlbmRlckN1cnJlbnRFeGFtKCk7IH0KICAgICAgICAgICAgaWYoQXBwU3RhdGUuY29udm9jVGV4dCkgewogICAgICAgICAgICAgICAgaWYoQXBwU3RhdGUuY29udm9jVGV4dC5hZGRyZXNzKSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndHh0LWFkZHJlc3MnKS52YWx1ZSA9IEFwcFN0YXRlLmNvbnZvY1RleHQuYWRkcmVzczsKICAgICAgICAgICAgICAgIGlmKEFwcFN0YXRlLmNvbnZvY1RleHQuYm9keSkgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3R4dC1ib2R5JykuaW5uZXJIVE1MID0gQXBwU3RhdGUuY29udm9jVGV4dC5ib2R5OwogICAgICAgICAgICAgICAgaWYoQXBwU3RhdGUuY29udm9jVGV4dC5ydWxlcykgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3R4dC1ydWxlcycpLmlubmVySFRNTCA9IEFwcFN0YXRlLmNvbnZvY1RleHQucnVsZXM7CiAgICAgICAgICAgICAgICBpZihBcHBTdGF0ZS5jb252b2NUZXh0LmNpdHkpIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0eHQtY2l0eScpLmlubmVyVGV4dCA9IEFwcFN0YXRlLmNvbnZvY1RleHQuY2l0eTsKICAgICAgICAgICAgICAgIGlmKEFwcFN0YXRlLmNvbnZvY1RleHQudGl0bGVFeHRyYVN0ZCkgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3R4dC10aXRsZS1leHRyYS1zdGQnKS5pbm5lclRleHQgPSBBcHBTdGF0ZS5jb252b2NUZXh0LnRpdGxlRXh0cmFTdGQ7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgIGlmKEFwcFN0YXRlLnN1cnZDb252b2NUZXh0KSB7CiAgICAgICAgICAgICAgICBpZihBcHBTdGF0ZS5zdXJ2Q29udm9jVGV4dC5hZGRyZXNzKSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndHh0LXN1cnYtYWRkcmVzcycpLnZhbHVlID0gQXBwU3RhdGUuc3VydkNvbnZvY1RleHQuYWRkcmVzczsKICAgICAgICAgICAgICAgIGlmKEFwcFN0YXRlLnN1cnZDb252b2NUZXh0LmJvZHkpIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0eHQtc3Vydi1ib2R5JykuaW5uZXJIVE1MID0gQXBwU3RhdGUuc3VydkNvbnZvY1RleHQuYm9keTsKICAgICAgICAgICAgICAgIGlmKEFwcFN0YXRlLnN1cnZDb252b2NUZXh0LnJ1bGVzKSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndHh0LXN1cnYtcnVsZXMnKS5pbm5lckhUTUwgPSBBcHBTdGF0ZS5zdXJ2Q29udm9jVGV4dC5ydWxlczsKICAgICAgICAgICAgICAgIGlmKEFwcFN0YXRlLnN1cnZDb252b2NUZXh0LmNpdHkpIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0eHQtc3Vydi1jaXR5JykuaW5uZXJUZXh0ID0gQXBwU3RhdGUuc3VydkNvbnZvY1RleHQuY2l0eTsKICAgICAgICAgICAgICAgIGlmKEFwcFN0YXRlLnN1cnZDb252b2NUZXh0LnRpdGxlRXh0cmFTdXJ2KSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndHh0LXRpdGxlLWV4dHJhLXN1cnYnKS5pbm5lclRleHQgPSBBcHBTdGF0ZS5zdXJ2Q29udm9jVGV4dC50aXRsZUV4dHJhU3VydjsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZihBcHBTdGF0ZS5wb2NoZXR0ZVRleHQgJiYgQXBwU3RhdGUucG9jaGV0dGVUZXh0LnN1cnYpIHsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3R4dC1wb2NoZXR0ZS1zdXJ2JykudmFsdWUgPSBBcHBTdGF0ZS5wb2NoZXR0ZVRleHQuc3VydjsgfSBlbHNlIHsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3R4dC1wb2NoZXR0ZS1zdXJ2JykudmFsdWUgPSBkZWZhdWx0Q29uc2lnbmVzOyB9CiAgICAgICAgICAgIHBvcHVsYXRlQ2xhc3NGaWx0ZXIoKTsgcG9wdWxhdGVTdXJ2ZWlsbGFudEZpbHRlcigpOyBwb3B1bGF0ZUVtYXJnZW1lbnRGaWx0ZXJzKCk7IHBvcHVsYXRlUFZFeGFtU2VsZWN0KCk7IHBvcHVsYXRlUmVjYXBGaWx0ZXJzKCk7CiAgICAgICAgfQogICAgICAgIAogICAgICAgIGZ1bmN0aW9uIGdldFZhbHVlKHJvdywgcG9zc2libGVLZXlzKSB7CiAgICAgICAgICAgIGlmICghcm93KSByZXR1cm4gbnVsbDsKICAgICAgICAgICAgY29uc3Qgcm93S2V5cyA9IE9iamVjdC5rZXlzKHJvdyk7CiAgICAgICAgICAgIGZvciAobGV0IHBrIG9mIHBvc3NpYmxlS2V5cykgewogICAgICAgICAgICAgICAgY29uc3QgdGFyZ2V0ID0gbm9ybWFsaXplKHBrKTsKICAgICAgICAgICAgICAgIGNvbnN0IGZvdW5kS2V5ID0gcm93S2V5cy5maW5kKGsgPT4gbm9ybWFsaXplKGspID09PSB0YXJnZXQpOwogICAgICAgICAgICAgICAgaWYgKGZvdW5kS2V5KSByZXR1cm4gcm93W2ZvdW5kS2V5XTsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGlzVGllcnNUZW1wcyh2YWwpIHsgaWYgKCF2YWwpIHJldHVybiBmYWxzZTsgY29uc3QgcyA9IHZhbC50b1N0cmluZygpLnRvVXBwZXJDYXNlKCk7IHJldHVybiBzLmluY2x1ZGVzKCdUVCcpIHx8IHMuaW5jbHVkZXMoJ09VSScpIHx8IHMuaW5jbHVkZXMoJ1RJRVJTJykgfHwgcy5pbmNsdWRlcygnWUVTJyk7IH0KCiAgICAgICAgZnVuY3Rpb24gaGFuZGxlRmlsZShpbnB1dCwgdHlwZSkgeyAKICAgICAgICAgICAgY29uc3QgZmlsZSA9IGlucHV0LmZpbGVzWzBdOyBpZiAoIWZpbGUpIHJldHVybjsKICAgICAgICAgICAgY29uc3QgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTsKICAgICAgICAgICAgcmVhZGVyLm9ubG9hZCA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBuZXcgVWludDhBcnJheShlLnRhcmdldC5yZXN1bHQpOyAKICAgICAgICAgICAgICAgIGNvbnN0IHdvcmtib29rID0gWExTWC5yZWFkKGRhdGEsIHt0eXBlOiAnYXJyYXknfSk7CiAgICAgICAgICAgICAgICBjb25zdCBqc29uRGF0YSA9IFhMU1gudXRpbHMuc2hlZXRfdG9fanNvbih3b3JrYm9vay5TaGVldHNbd29ya2Jvb2suU2hlZXROYW1lc1swXV0pOwogICAgICAgICAgICAgICAgaWYgKHR5cGUgPT09ICdFTEVWRVMnKSB7IEFwcFN0YXRlLmVsZXZlcyA9IGpzb25EYXRhOyB1cGRhdGVTdGF0dXMoJ3pvbmUtZWxldmVzJywgJ3N0YXR1cy1lbGV2ZXMnLCBgJHtqc29uRGF0YS5sZW5ndGh9IMOpbMOodmVzYCk7IH0KICAgICAgICAgICAgICAgIGVsc2UgaWYgKHR5cGUgPT09ICdFUFJFVVZFUycpIHsgQXBwU3RhdGUuZXByZXV2ZXMgPSBqc29uRGF0YTsgdXBkYXRlU3RhdHVzKCd6b25lLWVwcmV1dmVzJywgJ3N0YXR1cy1lcHJldXZlcycsIGAke2pzb25EYXRhLmxlbmd0aH0gw6lwcmV1dmVzYCk7IH0KICAgICAgICAgICAgICAgIGVsc2UgaWYgKHR5cGUgPT09ICdSRVNTT1VSQ0VTJykgeyBBcHBTdGF0ZS5zYWxsZXMgPSBqc29uRGF0YTsgdXBkYXRlU3RhdHVzKCd6b25lLXJlc3NvdXJjZXMnLCAnc3RhdHVzLXJlc3NvdXJjZXMnLCBgJHtqc29uRGF0YS5sZW5ndGh9IHNhbGxlc2ApOyB9CiAgICAgICAgICAgICAgICBlbHNlIGlmICh0eXBlID09PSAnU1VSVkVJTExBTlRTJykgeyBBcHBTdGF0ZS5zdXJ2ZWlsbGFudHMgPSBqc29uRGF0YTsgdXBkYXRlU3RhdHVzKCd6b25lLXN1cnZlaWxsYW50cycsICdzdGF0dXMtc3VydmVpbGxhbnRzJywgYCR7anNvbkRhdGEubGVuZ3RofSBzdXJ2ZWlsbGFudHNgKTsgfQogICAgICAgICAgICB9OyAKICAgICAgICAgICAgcmVhZGVyLnJlYWRBc0FycmF5QnVmZmVyKGZpbGUpOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gdXBkYXRlU3RhdHVzKHpvbmVJZCwgc3RhdHVzSWQsIG1zZykgeyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh6b25lSWQpLmNsYXNzTGlzdC5hZGQoJ2xvYWRlZCcpOyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChzdGF0dXNJZCkuaW5uZXJIVE1MID0gJzxpIGNsYXNzPSJmYS1zb2xpZCBmYS1jaGVjayI+PC9pPiAnICsgbXNnOyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChzdGF0dXNJZCkuY2xhc3NOYW1lID0gJ3N0YXR1cy1iYWRnZSBzdGF0dXMtb2snOyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChzdGF0dXNJZCkuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7IH0KCiAgICAgICAgZnVuY3Rpb24gbGF1bmNoRGlzdHJpYnV0aW9uKCkgewogICAgICAgICAgICBpZighQXBwU3RhdGUuZXByZXV2ZXMubGVuZ3RoIHx8ICFBcHBTdGF0ZS5lbGV2ZXMubGVuZ3RoIHx8ICFBcHBTdGF0ZS5zYWxsZXMubGVuZ3RoKSB7IGFsZXJ0KCJJbXBvcnQgbWFucXVhbnQuIik7IHJldHVybjsgfQogICAgICAgICAgICBpZighY29uZmlybSgiTGFuY2VyIGxlIGNhbGN1bCA/IEF0dGVudGlvbiwgY2VsYSDDqWNyYXNlcmEgbGEgcsOpcGFydGl0aW9uIGV4aXN0YW50ZS4iKSkgcmV0dXJuOwogICAgICAgICAgICBjb25zdCBtZXRob2QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGlzdHJpYi1tZXRob2QnKS52YWx1ZTsgCiAgICAgICAgICAgIGNvbnN0IHNjb3BlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Rpc3RyaWItc2NvcGUnKS52YWx1ZTsgICAKICAgICAgICAgICAgY2FsY3VsYXRlRGlzdHJpYnV0aW9uKG1ldGhvZCwgc2NvcGUpOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gY2FsY3VsYXRlRGlzdHJpYnV0aW9uKG1ldGhvZCwgc2NvcGUpIHsKICAgICAgICAgICAgY29uc3QgZmlyc3RTdHVkZW50ID0gQXBwU3RhdGUuZWxldmVzWzBdOwogICAgICAgICAgICBjb25zdCBoYXNTcGVjaWFsdHkgPSBnZXRWYWx1ZShmaXJzdFN0dWRlbnQsIFsnU3DDqWNpYWxpdMOpMScsICdTcGUxJywgJ1NwZSAxJ10pICE9PSBudWxsOwogICAgICAgICAgICBpZiAoc2NvcGUgPT09ICdBTEwnIHx8IEFwcFN0YXRlLmRpc3RyaWJ1dGlvbkRhdGEubGVuZ3RoID09PSAwKSBBcHBTdGF0ZS5kaXN0cmlidXRpb25EYXRhID0gbmV3IEFycmF5KEFwcFN0YXRlLmVwcmV1dmVzLmxlbmd0aCkuZmlsbChudWxsKTsKICAgICAgICAgICAgbGV0IGluZGljZXNUb1Byb2Nlc3MgPSBbXTsKICAgICAgICAgICAgaWYgKHNjb3BlID09PSAnQUxMJykgewogICAgICAgICAgICAgICAgZm9yKGxldCBpPTA7IGk8QXBwU3RhdGUuZXByZXV2ZXMubGVuZ3RoOyBpKyspIGluZGljZXNUb1Byb2Nlc3MucHVzaChpKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGluZGljZXNUb1Byb2Nlc3MucHVzaChBcHBTdGF0ZS5jdXJyZW50RXhhbUluZGV4KTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpbmRpY2VzVG9Qcm9jZXNzLmZvckVhY2goZXhhbUlkeCA9PiB7CiAgICAgICAgICAgICAgICBjb25zdCBleGFtID0gQXBwU3RhdGUuZXByZXV2ZXNbZXhhbUlkeF07CiAgICAgICAgICAgICAgICBsZXQgZXhhbVN0YXRlID0geyBleGFtSWR4OiBleGFtSWR4LCBzdG9yYWdlOiBbXSwgcm9vbXM6IFtdIH07CiAgICAgICAgICAgICAgICBjb25zdCBtYXRpZXJlID0gZ2V0VmFsdWUoZXhhbSwgWydNYXRpw6hyZScsICdFcHJldXZlJywgJ05vbSddKSB8fCAoJ8OJcHJldXZlICcgKyAoZXhhbUlkeCArIDEpKTsKICAgICAgICAgICAgICAgIGxldCBjYW5kaWRhdGVzID0gQXBwU3RhdGUuZWxldmVzLmZpbHRlcihlID0+IHsKICAgICAgICAgICAgICAgICAgICBpZiAoIWhhc1NwZWNpYWx0eSkgcmV0dXJuIHRydWU7CiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3BlMSA9IGdldFZhbHVlKGUsIFsnU3DDqWNpYWxpdMOpMScsICdTcGUxJywgJ1NwZSAxJ10pOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IHNwZTIgPSBnZXRWYWx1ZShlLCBbJ1Nww6ljaWFsaXTDqTInLCAnU3BlMicsICdTcGUgMiddKTsKICAgICAgICAgICAgICAgICAgICBpZiAoIXNwZTEgJiYgIXNwZTIpIHJldHVybiB0cnVlOyAKICAgICAgICAgICAgICAgICAgICByZXR1cm4gKHNwZTEgPT0gbWF0aWVyZSB8fCBzcGUyID09IG1hdGllcmUgfHwgWyJQaGlsb3NvcGhpZSIsICJGcmFuw6dhaXMiLCAiSGlzdG9pcmUtR8OpbyIsICJFbnNlaWduZW1lbnQgU2NpZW50aWZpcXVlIl0uaW5jbHVkZXMobWF0aWVyZSkpOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBpZiAobWV0aG9kID09PSAnQ0xBU1MnKSB7CiAgICAgICAgICAgICAgICAgICAgY2FuZGlkYXRlcy5zb3J0KChhLCBiKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNBID0gbm9ybUNsYXNzKGdldFZhbHVlKGEsIFsnQ2xhc3NlJywgJ0RpdiddKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNCID0gbm9ybUNsYXNzKGdldFZhbHVlKGIsIFsnQ2xhc3NlJywgJ0RpdiddKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjQSAhPT0gY0IpIHJldHVybiBjQS5sb2NhbGVDb21wYXJlKGNCKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChnZXRWYWx1ZShhLFsnTm9tJ10pfHwnJykubG9jYWxlQ29tcGFyZShnZXRWYWx1ZShiLFsnTm9tJ10pfHwnJyk7CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIGNhbmRpZGF0ZXMuc29ydCgoYSwgYikgPT4gKGdldFZhbHVlKGEsWydOb20nXSl8fCcnKS5sb2NhbGVDb21wYXJlKGdldFZhbHVlKGIsWydOb20nXSl8fCcnKSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBjb25zdCB0dFN0dWRlbnRzID0gY2FuZGlkYXRlcy5maWx0ZXIoZSA9PiBpc1RpZXJzVGVtcHMoZ2V0VmFsdWUoZSwgWydUaWVycyB0ZW1wcycsICdUVCddKSkpOwogICAgICAgICAgICAgICAgY29uc3QgcmVnU3R1ZGVudHMgPSBjYW5kaWRhdGVzLmZpbHRlcihlID0+ICFpc1RpZXJzVGVtcHMoZ2V0VmFsdWUoZSwgWydUaWVycyB0ZW1wcycsICdUVCddKSkpOwogICAgICAgICAgICAgICAgbGV0IHJlbWFpbmluZ1RUID0gWy4uLnR0U3R1ZGVudHNdOwogICAgICAgICAgICAgICAgbGV0IHJlbWFpbmluZ1JlZyA9IFsuLi5yZWdTdHVkZW50c107CiAgICAgICAgICAgICAgICBBcHBTdGF0ZS5zYWxsZXMuZm9yRWFjaCgoc2FsbGUsIHJvb21JZHgpID0+IHsKICAgICAgICAgICAgICAgICAgICBsZXQgcmF3TmFtZSA9IGdldFZhbHVlKHNhbGxlLCBbJ1NhbGxlJywgJ05vbSddKSB8fCAoJ1NhbGxlICcgKyAocm9vbUlkeCArIDEpKTsKICAgICAgICAgICAgICAgICAgICBsZXQgY2xlYW5OYW1lID0gcmF3TmFtZS50b1N0cmluZygpLnJlcGxhY2UoL1xzKlwoP1RUXCk/XHMqJC9pLCAnJyk7IAogICAgICAgICAgICAgICAgICAgIGNvbnN0IHJvb21UeXBlID0gZ2V0VmFsdWUoc2FsbGUsIFsnVHlwZSddKSB8fCAiIjsKICAgICAgICAgICAgICAgICAgICBjb25zdCByb29tQ2FwID0gcGFyc2VJbnQoZ2V0VmFsdWUoc2FsbGUsIFsnQ2FwYWNpdMOpJ10pKSB8fCA5OTsgCiAgICAgICAgICAgICAgICAgICAgY29uc3QgaXNSb29tVFQgPSBpc1RpZXJzVGVtcHMocm9vbVR5cGUpOwogICAgICAgICAgICAgICAgICAgIGxldCBsaXN0VG9Vc2UgPSBpc1Jvb21UVCA/IHJlbWFpbmluZ1RUIDogcmVtYWluaW5nUmVnOwogICAgICAgICAgICAgICAgICAgIGxldCByb29tU3R1ZGVudHMgPSBbXTsKICAgICAgICAgICAgICAgICAgICBpZiAobWV0aG9kID09PSAnQ0xBU1MnKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsaXN0VG9Vc2UubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZmlyc3RTdHVkZW50Q2xhc3MgPSBub3JtQ2xhc3MoZ2V0VmFsdWUobGlzdFRvVXNlWzBdLCBbJ0NsYXNzZScsICdEaXYnXSkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHNhbWVDbGFzc0NvdW50ID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcihsZXQgaz0wOyBrIDwgbGlzdFRvVXNlLmxlbmd0aDsgaysrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5vcm1DbGFzcyhnZXRWYWx1ZShsaXN0VG9Vc2Vba10sIFsnQ2xhc3NlJywgJ0RpdiddKSkgPT09IGZpcnN0U3R1ZGVudENsYXNzKSBzYW1lQ2xhc3NDb3VudCsrOyBlbHNlIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYW1vdW50VG9UYWtlID0gTWF0aC5taW4ocm9vbUNhcCwgc2FtZUNsYXNzQ291bnQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcm9vbVN0dWRlbnRzID0gbGlzdFRvVXNlLnNwbGljZSgwLCBhbW91bnRUb1Rha2UpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYW1vdW50VG9UYWtlID0gTWF0aC5taW4ocm9vbUNhcCwgbGlzdFRvVXNlLmxlbmd0aCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJvb21TdHVkZW50cyA9IGxpc3RUb1VzZS5zcGxpY2UoMCwgYW1vdW50VG9UYWtlKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgcm9vbVN0dWRlbnRzID0gcm9vbVN0dWRlbnRzLm1hcChzID0+ICh7IC4uLnMsIHBhc3NhZ2VUaW1lOiAiIiwgbG9kZ2VUaW1lOiAiIiB9KSk7CiAgICAgICAgICAgICAgICAgICAgcm9vbVN0dWRlbnRzLnNvcnQoKGEsYikgPT4gKGdldFZhbHVlKGEsWydOb20nXSl8fCcnKS5sb2NhbGVDb21wYXJlKGdldFZhbHVlKGIsWydOb20nXSl8fCcnKSk7CiAgICAgICAgICAgICAgICAgICAgZXhhbVN0YXRlLnJvb21zLnB1c2goeyBuYW1lOiBjbGVhbk5hbWUsIGNhcGFjaXR5OiByb29tQ2FwLCBpc1RUOiBpc1Jvb21UVCwgc3VydmVpbGxhbnRzOiBbXSwgc3R1ZGVudHM6IHJvb21TdHVkZW50cyB9KTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgZXhhbVN0YXRlLnN0b3JhZ2UgPSBbLi4ucmVtYWluaW5nVFQsIC4uLnJlbWFpbmluZ1JlZ10uc29ydCgoYSxiKSA9PiAoZ2V0VmFsdWUoYSxbJ05vbSddKXx8JycpLmxvY2FsZUNvbXBhcmUoZ2V0VmFsdWUoYixbJ05vbSddKXx8JycpKTsgCiAgICAgICAgICAgICAgICBBcHBTdGF0ZS5kaXN0cmlidXRpb25EYXRhW2V4YW1JZHhdID0gZXhhbVN0YXRlOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgaWYgKHNjb3BlID09PSAnQUxMJykgQXBwU3RhdGUuY3VycmVudEV4YW1JbmRleCA9IDA7CiAgICAgICAgICAgIHJlbmRlckV4YW1OYXZpZ2F0aW9uKCk7IHJlbmRlckN1cnJlbnRFeGFtKCk7IHBvcHVsYXRlUFZFeGFtU2VsZWN0KCk7IHBvcHVsYXRlRW1hcmdlbWVudEZpbHRlcnMoKTsgcG9wdWxhdGVSZWNhcEZpbHRlcnMoKTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIHJlbmRlckV4YW1OYXZpZ2F0aW9uKCkgewogICAgICAgICAgICBjb25zdCBuYXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZXhhbS1uYXZpZ2F0aW9uJyk7IG5hdi5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnOwogICAgICAgICAgICBjb25zdCBzZWxlY3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZXhhbS1kcm9wZG93bicpOyBzZWxlY3QuaW5uZXJIVE1MID0gIiI7CiAgICAgICAgICAgIEFwcFN0YXRlLmRpc3RyaWJ1dGlvbkRhdGEuZm9yRWFjaCgoZWQsIGlkeCkgPT4gewogICAgICAgICAgICAgICAgaWYoIWVkICYmIEFwcFN0YXRlLmVwcmV1dmVzW2lkeF0pIHsKICAgICAgICAgICAgICAgICAgICBjb25zdCBleGFtSW5mbyA9IEFwcFN0YXRlLmVwcmV1dmVzW2lkeF07CiAgICAgICAgICAgICAgICAgICAgY29uc3QgbWF0aWVyZSA9IGdldFZhbHVlKGV4YW1JbmZvLCBbJ01hdGnDqHJlJywgJ0VwcmV1dmUnLCAnTm9tJ10pIHx8ICgnw4lwcmV1dmUgJyArIChpZHgrMSkpOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IG9wdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ29wdGlvbicpOyBvcHQudmFsdWUgPSBpZHg7IG9wdC50ZXh0ID0gYCR7aWR4KzF9LiAke21hdGllcmV9IChOb24gY2FsY3Vsw6kpYDsKICAgICAgICAgICAgICAgICAgICBzZWxlY3QuYXBwZW5kQ2hpbGQob3B0KTsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZihlZCkgewogICAgICAgICAgICAgICAgICAgIGNvbnN0IGV4YW1JbmZvID0gQXBwU3RhdGUuZXByZXV2ZXNbZWQuZXhhbUlkeF07CiAgICAgICAgICAgICAgICAgICAgY29uc3QgbWF0aWVyZSA9IGdldFZhbHVlKGV4YW1JbmZvLCBbJ01hdGnDqHJlJywgJ0VwcmV1dmUnLCAnTm9tJ10pIHx8ICgnw4lwcmV1dmUgJyArIChpZHgrMSkpOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IG9wdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ29wdGlvbicpOyBvcHQudmFsdWUgPSBpZHg7IG9wdC50ZXh0ID0gYCR7aWR4KzF9LiAke21hdGllcmV9YDsKICAgICAgICAgICAgICAgICAgICBpZihpZHggPT09IEFwcFN0YXRlLmN1cnJlbnRFeGFtSW5kZXgpIG9wdC5zZWxlY3RlZCA9IHRydWU7IHNlbGVjdC5hcHBlbmRDaGlsZChvcHQpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIHJlbmRlckN1cnJlbnRFeGFtKCkgeyAKICAgICAgICAgICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2N1cnJlbnQtZXhhbS1jb250YWluZXInKTsgY29udGFpbmVyLmlubmVySFRNTCA9ICIiOwogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZXhhbS1kcm9wZG93bicpLnZhbHVlID0gQXBwU3RhdGUuY3VycmVudEV4YW1JbmRleDsKICAgICAgICAgICAgY29uc3QgZXhhbVN0YXRlID0gQXBwU3RhdGUuZGlzdHJpYnV0aW9uRGF0YVtBcHBTdGF0ZS5jdXJyZW50RXhhbUluZGV4XTsgCiAgICAgICAgICAgIGlmICghZXhhbVN0YXRlKSB7CiAgICAgICAgICAgICAgICAgY29udGFpbmVyLmlubmVySFRNTCA9ICc8ZGl2IGNsYXNzPSJjYXJkIiBzdHlsZT0idGV4dC1hbGlnbjpjZW50ZXI7IGNvbG9yOiNjMDM5MmI7Ij5Sw6lwYXJ0aXRpb24gbm9uIGNhbGN1bMOpZSBwb3VyIGNldHRlIMOpcHJldXZlLjwvZGl2Pic7CiAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGNvbnN0IGV4YW1JbmZvID0gQXBwU3RhdGUuZXByZXV2ZXNbZXhhbVN0YXRlLmV4YW1JZHhdOwogICAgICAgICAgICBjb25zdCBtYXRpZXJlID0gZ2V0VmFsdWUoZXhhbUluZm8sIFsnTWF0acOocmUnLCAnRXByZXV2ZScsICdOb20nXSk7CiAgICAgICAgICAgIGNvbnN0IGJsb2NrSHRtbCA9IGA8ZGl2IGNsYXNzPSJleGFtLXNlY3Rpb24tYmxvY2siPjxkaXYgY2xhc3M9ImV4YW0tc2VjdGlvbi1oZWFkZXIiPjxzcGFuPiR7bWF0aWVyZX08L3NwYW4+PC9kaXY+PGg0IHN0eWxlPSJtYXJnaW46MTBweCAwIDVweCAwOyBjb2xvcjojN2Y4YzhkOyBmb250LXNpemU6MC45cmVtOyI+Wm9uZSBkZSBzdG9ja2FnZSAoTm9uIHBsYWPDqXMpPC9oND48ZGl2IGNsYXNzPSJzdG9yYWdlLXpvbmUiIG9uZHJvcD0iZHJvcChldmVudCkiIG9uZHJhZ292ZXI9ImFsbG93RHJvcChldmVudCkiPjwvZGl2PjxkaXYgY2xhc3M9InJvb21zLWdyaWQiPjwvZGl2PjwvZGl2PmA7CiAgICAgICAgICAgIGNvbnRhaW5lci5pbnNlcnRBZGphY2VudEhUTUwoJ2JlZm9yZWVuZCcsIGJsb2NrSHRtbCk7CiAgICAgICAgICAgIGNvbnN0IGJsb2NrID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5leGFtLXNlY3Rpb24tYmxvY2snKTsKICAgICAgICAgICAgY29uc3Qgc3RvcmFnZURpdiA9IGJsb2NrLnF1ZXJ5U2VsZWN0b3IoJy5zdG9yYWdlLXpvbmUnKTsKICAgICAgICAgICAgZXhhbVN0YXRlLnN0b3JhZ2UuZm9yRWFjaChzID0+IGNyZWF0ZVN0dWRlbnRFbGVtZW50KHMsIHN0b3JhZ2VEaXYsIGZhbHNlKSk7CiAgICAgICAgICAgIGNvbnN0IHJvb21zR3JpZCA9IGJsb2NrLnF1ZXJ5U2VsZWN0b3IoJy5yb29tcy1ncmlkJyk7CiAgICAgICAgICAgIGV4YW1TdGF0ZS5yb29tcy5mb3JFYWNoKChyb29tU3RhdGUsIHJJZHgpID0+IHsKICAgICAgICAgICAgICAgIGNvbnN0IHVuaXF1ZUlkID0gYHJvb20tJHtySWR4fWAsIHN1cnZDb250YWluZXJJZCA9IGBzdXJ2LSR7cklkeH1gOwogICAgICAgICAgICAgICAgY29uc3QgdHRDbGFzcyA9IHJvb21TdGF0ZS5pc1RUID8gInJvb20tdHQiIDogIiI7CiAgICAgICAgICAgICAgICBsZXQgc3Vydkh0bWwgPSAiIjsgaWYocm9vbVN0YXRlLnN1cnZlaWxsYW50cy5sZW5ndGggPiAwKSB7IHJvb21TdGF0ZS5zdXJ2ZWlsbGFudHMuZm9yRWFjaCh2YWwgPT4geyBzdXJ2SHRtbCArPSBgPGRpdiBjbGFzcz0ic3VydmVpbGxhbnQtcm93Ij48c2VsZWN0IG9uY2hhbmdlPSJ1cGRhdGVDdXJyZW50RXhhbVN0YXRlKCkiPiR7Z2V0U3VydmVpbGxhbnRPcHRpb25zKHZhbCl9PC9zZWxlY3Q+PC9kaXY+YDsgfSk7IH0gZWxzZSB7IHN1cnZIdG1sID0gYDxkaXYgY2xhc3M9InN1cnZlaWxsYW50LXJvdyI+PHNlbGVjdCBvbmNoYW5nZT0idXBkYXRlQ3VycmVudEV4YW1TdGF0ZSgpIj4ke2dldFN1cnZlaWxsYW50T3B0aW9ucygpfTwvc2VsZWN0PjwvZGl2PmA7IH0KICAgICAgICAgICAgICAgIGNvbnN0IHJvb21IdG1sID0gYAogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InJvb20tY2FyZCAke3R0Q2xhc3N9Ij4KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0icm9vbS1oZWFkZXIiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0icm9vbS1oZWFkZXItdG9wIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3Bhbj4ke3Jvb21TdGF0ZS5uYW1lfSAke3Jvb21TdGF0ZS5pc1RUPycoVFQpJzonJ308L3NwYW4+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iZGlzcGxheTpmbGV4OyBhbGlnbi1pdGVtczpjZW50ZXI7IGdhcDoxMHB4OyI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuPiR7cm9vbVN0YXRlLnN0dWRlbnRzLmxlbmd0aH0vJHtyb29tU3RhdGUuY2FwYWNpdHl9PC9zcGFuPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIG9uY2xpY2s9ImNsZWFyUm9vbSgke3JJZHh9KSIgc3R5bGU9ImJhY2tncm91bmQ6d2hpdGU7IGJvcmRlcjpub25lOyBjb2xvcjojYzAzOTJiOyBjdXJzb3I6cG9pbnRlcjsgcGFkZGluZzoycHggNnB4OyBib3JkZXItcmFkaXVzOjRweDsiIHRpdGxlPSJWaWRlciBsYSBzYWxsZSI+PGkgY2xhc3M9ImZhLXNvbGlkIGZhLXRyYXNoIj48L2k+PC9idXR0b24+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9InNjaGVkdWxlLWJ0biIgb25jbGljaz0ic2NoZWR1bGVSb29tKCR7cklkeH0pIj48aSBjbGFzcz0iZmEtc29saWQgZmEtd2FuZC1tYWdpYy1zcGFya2xlcyI+PC9pPiBQbGFuaWZpZXI8L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InJvb20tc3VydmVpbGxhbnRzLWFyZWEiIGlkPSIke3N1cnZDb250YWluZXJJZH0iPiR7c3Vydkh0bWx9PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImJ0bi1hZGQtc3VydiIgb25jbGljaz0iYWRkU3VydmVpbGxhbnRGaWVsZCgnJHtzdXJ2Q29udGFpbmVySWR9JykiPkFqb3V0ZXI8L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0icm9vbS1ib2R5IiBpZD0iJHt1bmlxdWVJZH0iIG9uZHJvcD0iZHJvcChldmVudCkiIG9uZHJhZ292ZXI9ImFsbG93RHJvcChldmVudCkiIGRhdGEtY2FwYWNpdHk9IiR7cm9vbVN0YXRlLmNhcGFjaXR5fSIgZGF0YS1pcy10dD0iJHtyb29tU3RhdGUuaXNUVH0iPjwvZGl2PgogICAgICAgICAgICAgICAgICAgIDwvZGl2PmA7CiAgICAgICAgICAgICAgICByb29tc0dyaWQuaW5zZXJ0QWRqYWNlbnRIVE1MKCdiZWZvcmVlbmQnLCByb29tSHRtbCk7CiAgICAgICAgICAgICAgICBjb25zdCBib2R5RGl2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodW5pcXVlSWQpOwogICAgICAgICAgICAgICAgcm9vbVN0YXRlLnN0dWRlbnRzLmZvckVhY2gocyA9PiBjcmVhdGVTdHVkZW50RWxlbWVudChzLCBib2R5RGl2LCB0cnVlKSk7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgICAKICAgICAgICBmdW5jdGlvbiBjcmVhdGVTdHVkZW50RWxlbWVudChkYXRhLCBwYXJlbnQsIGlzSW5zaWRlUm9vbSkgeyAKICAgICAgICAgICAgY29uc3QgZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsgZWwuY2xhc3NOYW1lID0gJ3N0dWRlbnQtaXRlbSc7IGVsLmRhdGFzZXQuaW5mbyA9IEpTT04uc3RyaW5naWZ5KGRhdGEpOyAKICAgICAgICAgICAgaWYoaXNUaWVyc1RlbXBzKGdldFZhbHVlKGRhdGEsWydUaWVycyB0ZW1wcycsJ1RUJ10pKSkgZWwuY2xhc3NMaXN0LmFkZCgnaXMtdHQnKTsgCiAgICAgICAgICAgIGNvbnN0IGZ1bGxOYW1lID0gZ2V0VmFsdWUoZGF0YSxbJ05vbSddKSArICIgIiArIGdldFZhbHVlKGRhdGEsWydQcsOpbm9tJ10pOyAKICAgICAgICAgICAgbGV0IGlubmVySFRNTCA9IGA8ZGl2IGNsYXNzPSJzdHVkZW50LW1haW4taW5mbyI+PHNwYW4+JHtmdWxsTmFtZX08L3NwYW4+PHNwYW4gc3R5bGU9ImZvbnQtc2l6ZTowLjc1cmVtOyBjb2xvcjojN2Y4YzhkOyI+JHtnZXRWYWx1ZShkYXRhLFsnQ2xhc3NlJ10pfTwvc3Bhbj48L2Rpdj5gOwogICAgICAgICAgICBpZihpc0luc2lkZVJvb20pIHsKICAgICAgICAgICAgICAgIGlubmVySFRNTCArPSBgCiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJzdHVkZW50LW9yYWwtY29udHJvbHMiPgogICAgICAgICAgICAgICAgICAgIDxsYWJlbD5QOjwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9InRpbWUiIHZhbHVlPSIke2RhdGEucGFzc2FnZVRpbWUgfHwgJyd9IiBvbmNoYW5nZT0idXBkYXRlU3R1ZGVudERhdGEodGhpcywgJ3Bhc3NhZ2VUaW1lJykiIHRpdGxlPSJIZXVyZSBkZSBQYXNzYWdlIj4KICAgICAgICAgICAgICAgICAgICA8bGFiZWw+TDo8L2xhYmVsPgogICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJ0aW1lIiB2YWx1ZT0iJHtkYXRhLmxvZGdlVGltZSB8fCAnJ30iIG9uY2hhbmdlPSJ1cGRhdGVTdHVkZW50RGF0YSh0aGlzLCAnbG9kZ2VUaW1lJykiIHRpdGxlPSJIZXVyZSBkZSBMb2dlIj4KICAgICAgICAgICAgICAgIDwvZGl2PmA7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWwuaW5uZXJIVE1MID0gaW5uZXJIVE1MOyBlbC5zZXRBdHRyaWJ1dGUoJ2RhdGEtc29ydCcsIGZ1bGxOYW1lLnRvVXBwZXJDYXNlKCkpOyBlbC5kcmFnZ2FibGUgPSB0cnVlOyBlbC5pZCA9ICJzLSIrTWF0aC5yYW5kb20oKTsgZWwub25kcmFnc3RhcnQgPSBkcmFnOyBwYXJlbnQuYXBwZW5kQ2hpbGQoZWwpOyAKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIHVwZGF0ZVN0dWRlbnREYXRhKGlucHV0LCBmaWVsZCkgewogICAgICAgICAgICBjb25zdCBzdHVkZW50RWwgPSBpbnB1dC5jbG9zZXN0KCcuc3R1ZGVudC1pdGVtJyk7CiAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBKU09OLnBhcnNlKHN0dWRlbnRFbC5kYXRhc2V0LmluZm8pOwogICAgICAgICAgICBkYXRhW2ZpZWxkXSA9IGlucHV0LnZhbHVlOwogICAgICAgICAgICBzdHVkZW50RWwuZGF0YXNldC5pbmZvID0gSlNPTi5zdHJpbmdpZnkoZGF0YSk7CiAgICAgICAgICAgIHVwZGF0ZUN1cnJlbnRFeGFtU3RhdGUoKTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIHNjaGVkdWxlUm9vbShySWR4KSB7CiAgICAgICAgICAgIGNvbnN0IHN0YXJ0VGltZSA9IHByb21wdCgiSGV1cmUgZGUgZMOpYnV0IGR1IHByZW1pZXIgcGFzc2FnZSAoSEg6TU0pIDoiLCAiMDg6MDAiKTsgaWYoIXN0YXJ0VGltZSkgcmV0dXJuOwogICAgICAgICAgICBjb25zdCBkdXJhdGlvbiA9IHByb21wdCgiRHVyw6llIHBhciBjYW5kaWRhdCAobWludXRlcykgOiIsICIyMCIpOyBpZighZHVyYXRpb24pIHJldHVybjsKICAgICAgICAgICAgY29uc3QgbG9kZ2VPZmZzZXQgPSBwcm9tcHQoIkTDqWxhaSBkZSBtaXNlIGVuIGxvZ2UgYXZhbnQgcGFzc2FnZSAobWludXRlcykgLSBNZXR0cmUgMCBzaSBhdWN1bmUgOiIsICIzMCIpOyBpZihsb2RnZU9mZnNldCA9PT0gbnVsbCkgcmV0dXJuOwogICAgICAgICAgICBjb25zdCB3YW50QnJlYWsgPSBjb25maXJtKCJWb3VsZXotdm91cyBpbnPDqXJlciB1bmUgcGF1c2UgcG91ciBsZXMgc3VydmVpbGxhbnRzID8iKTsKICAgICAgICAgICAgbGV0IGJyZWFrQWZ0ZXIgPSAwLCBicmVha0R1cmF0aW9uID0gMDsKICAgICAgICAgICAgaWYgKHdhbnRCcmVhaykgeyBicmVha0FmdGVyID0gcGFyc2VJbnQocHJvbXB0KCJJbnPDqXJlciB1bmUgcGF1c2UgYXByw6hzIGNvbWJpZW4gZGUgY2FuZGlkYXRzID8iLCAiNCIpKTsgYnJlYWtEdXJhdGlvbiA9IHBhcnNlSW50KHByb21wdCgiRHVyw6llIGRlIGxhIHBhdXNlIChtaW51dGVzKSA6IiwgIjE1IikpOyB9CiAgICAgICAgICAgIGNvbnN0IHN0YXJ0UGFydHMgPSBzdGFydFRpbWUuc3BsaXQoJzonKTsKICAgICAgICAgICAgbGV0IGN1cnJlbnRUaW1lID0gbmV3IERhdGUoKTsgY3VycmVudFRpbWUuc2V0SG91cnMocGFyc2VJbnQoc3RhcnRQYXJ0c1swXSksIHBhcnNlSW50KHN0YXJ0UGFydHNbMV0pLCAwLCAwKTsKICAgICAgICAgICAgY29uc3QgZHVyTWluID0gcGFyc2VJbnQoZHVyYXRpb24pLCBsb2RnZU1pbiA9IHBhcnNlSW50KGxvZGdlT2Zmc2V0KTsKICAgICAgICAgICAgY29uc3Qgcm9vbUJvZHkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChgcm9vbS0ke3JJZHh9YCk7CiAgICAgICAgICAgIGNvbnN0IGl0ZW1zID0gQXJyYXkuZnJvbShyb29tQm9keS5jaGlsZHJlbik7CiAgICAgICAgICAgIGxldCBzdHVkZW50c1Byb2Nlc3NlZCA9IDA7CiAgICAgICAgICAgIGl0ZW1zLmZvckVhY2goaXRlbSA9PiB7CiAgICAgICAgICAgICAgICBpZiAod2FudEJyZWFrICYmIHN0dWRlbnRzUHJvY2Vzc2VkID4gMCAmJiAoc3R1ZGVudHNQcm9jZXNzZWQgJSBicmVha0FmdGVyID09PSAwKSkgY3VycmVudFRpbWUgPSBuZXcgRGF0ZShjdXJyZW50VGltZS5nZXRUaW1lKCkgKyAoYnJlYWtEdXJhdGlvbiAqIDYwMDAwKSk7CiAgICAgICAgICAgICAgICBjb25zdCBoUCA9IGN1cnJlbnRUaW1lLmdldEhvdXJzKCkudG9TdHJpbmcoKS5wYWRTdGFydCgyLCAnMCcpOwogICAgICAgICAgICAgICAgY29uc3QgbVAgPSBjdXJyZW50VGltZS5nZXRNaW51dGVzKCkudG9TdHJpbmcoKS5wYWRTdGFydCgyLCAnMCcpOwogICAgICAgICAgICAgICAgY29uc3QgcGFzc2FnZVN0ciA9IGAke2hQfToke21QfWA7CiAgICAgICAgICAgICAgICBsZXQgbG9kZ2VUaW1lRGF0ZSA9IG5ldyBEYXRlKGN1cnJlbnRUaW1lLmdldFRpbWUoKSAtIChsb2RnZU1pbiAqIDYwMDAwKSk7CiAgICAgICAgICAgICAgICBjb25zdCBoTCA9IGxvZGdlVGltZURhdGUuZ2V0SG91cnMoKS50b1N0cmluZygpLnBhZFN0YXJ0KDIsICcwJyk7CiAgICAgICAgICAgICAgICBjb25zdCBtTCA9IGxvZGdlVGltZURhdGUuZ2V0TWludXRlcygpLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgJzAnKTsKICAgICAgICAgICAgICAgIGNvbnN0IGxvZGdlU3RyID0gYCR7aEx9OiR7bUx9YDsKICAgICAgICAgICAgICAgIGxldCBkYXRhID0gSlNPTi5wYXJzZShpdGVtLmRhdGFzZXQuaW5mbyk7IGRhdGEucGFzc2FnZVRpbWUgPSBwYXNzYWdlU3RyOyBkYXRhLmxvZGdlVGltZSA9IGxvZGdlTWluID4gMCA/IGxvZGdlU3RyIDogIiI7CiAgICAgICAgICAgICAgICBpdGVtLmRhdGFzZXQuaW5mbyA9IEpTT04uc3RyaW5naWZ5KGRhdGEpOwogICAgICAgICAgICAgICAgY29uc3QgaW5wdXRzID0gaXRlbS5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dFt0eXBlPSJ0aW1lIl0nKTsKICAgICAgICAgICAgICAgIGlmKGlucHV0cy5sZW5ndGggPj0gMikgeyBpbnB1dHNbMF0udmFsdWUgPSBwYXNzYWdlU3RyOyBpbnB1dHNbMV0udmFsdWUgPSBsb2RnZU1pbiA+IDAgPyBsb2RnZVN0ciA6ICIiOyB9CiAgICAgICAgICAgICAgICBjdXJyZW50VGltZSA9IG5ldyBEYXRlKGN1cnJlbnRUaW1lLmdldFRpbWUoKSArIChkdXJNaW4gKiA2MDAwMCkpOwogICAgICAgICAgICAgICAgc3R1ZGVudHNQcm9jZXNzZWQrKzsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHVwZGF0ZUN1cnJlbnRFeGFtU3RhdGUoKTsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgZnVuY3Rpb24gc3dpdGNoVGFiKGVsZW1lbnQsIHRhYklkKSB7IAogICAgICAgICAgICBpZihkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndmlldzMnKS5jbGFzc0xpc3QuY29udGFpbnMoJ2FjdGl2ZScpICYmIEFwcFN0YXRlLmRpc3RyaWJ1dGlvbkRhdGEubGVuZ3RoPjApIHsgdHJ5IHsgdXBkYXRlQ3VycmVudEV4YW1TdGF0ZSgpOyB9IGNhdGNoKGUpIHsgY29uc29sZS53YXJuKCJTYXZlIHN0YXRlIGZhaWxlZCIsIGUpOyB9IH0KICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnN0ZXAtYnRuJykuZm9yRWFjaChidG4gPT4gYnRuLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpKTsgZWxlbWVudC5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTsgCiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5zZWN0aW9uLXZpZXcnKS5mb3JFYWNoKHZpZXcgPT4gdmlldy5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKSk7IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRhYklkKS5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTsgCiAgICAgICAgICAgIGlmKHRhYklkPT09J3ZpZXc0JykgcG9wdWxhdGVDbGFzc0ZpbHRlcigpOyBpZih0YWJJZD09PSd2aWV3NScpIHBvcHVsYXRlU3VydmVpbGxhbnRGaWx0ZXIoKTsgCiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBqdW1wVG9FeGFtKGlkeCkgeyB1cGRhdGVDdXJyZW50RXhhbVN0YXRlKCk7IEFwcFN0YXRlLmN1cnJlbnRFeGFtSW5kZXggPSBwYXJzZUludChpZHgpOyByZW5kZXJDdXJyZW50RXhhbSgpOyB9CiAgICAgICAgZnVuY3Rpb24gcHJldkV4YW0oKSB7IGlmKEFwcFN0YXRlLmN1cnJlbnRFeGFtSW5kZXg+MCkgeyB1cGRhdGVDdXJyZW50RXhhbVN0YXRlKCk7IEFwcFN0YXRlLmN1cnJlbnRFeGFtSW5kZXgtLTsgcmVuZGVyQ3VycmVudEV4YW0oKTsgfSB9CiAgICAgICAgZnVuY3Rpb24gbmV4dEV4YW0oKSB7IGlmKEFwcFN0YXRlLmN1cnJlbnRFeGFtSW5kZXg8QXBwU3RhdGUuZGlzdHJpYnV0aW9uRGF0YS5sZW5ndGgtMSkgeyB1cGRhdGVDdXJyZW50RXhhbVN0YXRlKCk7IEFwcFN0YXRlLmN1cnJlbnRFeGFtSW5kZXgrKzsgcmVuZGVyQ3VycmVudEV4YW0oKTsgfSB9CiAgICAgICAgCiAgICAgICAgZnVuY3Rpb24gdXBkYXRlQ3VycmVudEV4YW1TdGF0ZSgpIHsgCiAgICAgICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjdXJyZW50LWV4YW0tY29udGFpbmVyJyk7IAogICAgICAgICAgICBjb25zdCBibG9jayA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcuZXhhbS1zZWN0aW9uLWJsb2NrJyk7IGlmKCFibG9jaykgcmV0dXJuOyAKICAgICAgICAgICAgY29uc3QgZXhhbVN0YXRlID0gQXBwU3RhdGUuZGlzdHJpYnV0aW9uRGF0YVtBcHBTdGF0ZS5jdXJyZW50RXhhbUluZGV4XTsgaWYoIWV4YW1TdGF0ZSkgcmV0dXJuOyAKICAgICAgICAgICAgY29uc3Qgc3RvcmFnZURpdiA9IGJsb2NrLnF1ZXJ5U2VsZWN0b3IoJy5zdG9yYWdlLXpvbmUnKTsgCiAgICAgICAgICAgIGV4YW1TdGF0ZS5zdG9yYWdlID0gQXJyYXkuZnJvbShzdG9yYWdlRGl2LmNoaWxkcmVuKS5tYXAoY2hpbGQgPT4gSlNPTi5wYXJzZShjaGlsZC5kYXRhc2V0LmluZm8pKTsgCiAgICAgICAgICAgIGNvbnN0IHJvb21DYXJkcyA9IGJsb2NrLnF1ZXJ5U2VsZWN0b3JBbGwoJy5yb29tLWNhcmQnKTsgCiAgICAgICAgICAgIGV4YW1TdGF0ZS5yb29tcyA9IFtdOyAKICAgICAgICAgICAgcm9vbUNhcmRzLmZvckVhY2goY2FyZCA9PiB7IAogICAgICAgICAgICAgICAgY29uc3QgYm9keSA9IGNhcmQucXVlcnlTZWxlY3RvcignLnJvb20tYm9keScpOyBjb25zdCBjYXAgPSBib2R5LmdldEF0dHJpYnV0ZSgnZGF0YS1jYXBhY2l0eScpOyBjb25zdCBpc1RUID0gYm9keS5nZXRBdHRyaWJ1dGUoJ2RhdGEtaXMtdHQnKSA9PT0gJ3RydWUnOyAKICAgICAgICAgICAgICAgIGNvbnN0IHJvb21OYW1lID0gY2FyZC5xdWVyeVNlbGVjdG9yKCcucm9vbS1oZWFkZXIgc3BhbicpLnRleHRDb250ZW50LnJlcGxhY2UoJyhUVCknLCcnKS50cmltKCk7IAogICAgICAgICAgICAgICAgY29uc3Qgc3VydnMgPSBBcnJheS5mcm9tKGNhcmQucXVlcnlTZWxlY3RvckFsbCgnc2VsZWN0JykpLm1hcChzID0+IHMudmFsdWUpOyAKICAgICAgICAgICAgICAgIGNvbnN0IHN0dWRlbnRzID0gQXJyYXkuZnJvbShib2R5LmNoaWxkcmVuKS5tYXAocyA9PiBKU09OLnBhcnNlKHMuZGF0YXNldC5pbmZvKSk7IAogICAgICAgICAgICAgICAgZXhhbVN0YXRlLnJvb21zLnB1c2goeyBuYW1lOiByb29tTmFtZSwgY2FwYWNpdHk6IGNhcCwgaXNUVDogaXNUVCwgc3VydmVpbGxhbnRzOiBzdXJ2cywgc3R1ZGVudHM6IHN0dWRlbnRzIH0pOyAKICAgICAgICAgICAgfSk7IAogICAgICAgIH0KICAgICAgICAKICAgICAgICBmdW5jdGlvbiBkcmFnKGV2KSB7IGV2LmRhdGFUcmFuc2Zlci5zZXREYXRhKCJ0ZXh0IiwgZXYudGFyZ2V0LmlkKTsgfQogICAgICAgIGZ1bmN0aW9uIGRyb3AoZXYpIHsgCiAgICAgICAgICAgIGV2LnByZXZlbnREZWZhdWx0KCk7IAogICAgICAgICAgICB2YXIgZGF0YSA9IGV2LmRhdGFUcmFuc2Zlci5nZXREYXRhKCJ0ZXh0Iik7IHZhciBkcmFnZ2VkRWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChkYXRhKTsgCiAgICAgICAgICAgIGxldCB0YXJnZXQgPSBldi50YXJnZXQ7IHdoaWxlKHRhcmdldCAmJiAhdGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygncm9vbS1ib2R5JykgJiYgIXRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3N0b3JhZ2Utem9uZScpKSB0YXJnZXQgPSB0YXJnZXQucGFyZW50RWxlbWVudDsgCiAgICAgICAgICAgIGlmKHRhcmdldCkgeyAKICAgICAgICAgICAgICAgIGlmKHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3Jvb20tYm9keScpKSB7IAogICAgICAgICAgICAgICAgICAgIGNvbnN0IGNhcCA9IHBhcnNlSW50KHRhcmdldC5nZXRBdHRyaWJ1dGUoJ2RhdGEtY2FwYWNpdHknKSk7IAogICAgICAgICAgICAgICAgICAgIGlmKHRhcmdldC5jaGlsZHJlbi5sZW5ndGggPj0gY2FwKSB7IGFsZXJ0KCJQbGVpbiAhIik7IHJldHVybjsgfSAKICAgICAgICAgICAgICAgIH0gCiAgICAgICAgICAgICAgICBjb25zdCBzdHVkZW50RGF0YSA9IEpTT04ucGFyc2UoZHJhZ2dlZEVsLmRhdGFzZXQuaW5mbyk7CiAgICAgICAgICAgICAgICBjb25zdCBpc1RhcmdldFJvb20gPSB0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdyb29tLWJvZHknKTsKICAgICAgICAgICAgICAgIHRhcmdldC5hcHBlbmRDaGlsZChkcmFnZ2VkRWwpOyBkcmFnZ2VkRWwucmVtb3ZlKCk7IGNyZWF0ZVN0dWRlbnRFbGVtZW50KHN0dWRlbnREYXRhLCB0YXJnZXQsIGlzVGFyZ2V0Um9vbSk7IAogICAgICAgICAgICAgICAgc29ydENvbnRhaW5lcih0YXJnZXQpOyB1cGRhdGVDdXJyZW50RXhhbVN0YXRlKCk7IHVwZGF0ZVJlYWxUaW1lQ291bnRlcnMoKTsKICAgICAgICAgICAgfSAKICAgICAgICB9CiAgICAgICAgZnVuY3Rpb24gYWxsb3dEcm9wKGV2KSB7IGV2LnByZXZlbnREZWZhdWx0KCk7IH0KICAgICAgICAKICAgICAgICBmdW5jdGlvbiBzb3J0Q29udGFpbmVyKGNvbnRhaW5lcikgeyAKICAgICAgICAgICAgY29uc3QgaXRlbXMgPSBBcnJheS5mcm9tKGNvbnRhaW5lci5jaGlsZHJlbik7IGl0ZW1zLnNvcnQoKGEsIGIpID0+IHsgCiAgICAgICAgICAgICAgICBjb25zdCBuYW1lQSA9IGEuZ2V0QXR0cmlidXRlKCdkYXRhLXNvcnQnKSB8fCAiIjsgY29uc3QgbmFtZUIgPSBiLmdldEF0dHJpYnV0ZSgnZGF0YS1zb3J0JykgfHwgIiI7IHJldHVybiBuYW1lQS5sb2NhbGVDb21wYXJlKG5hbWVCKTsgCiAgICAgICAgICAgIH0pOyAKICAgICAgICAgICAgaXRlbXMuZm9yRWFjaChpdGVtID0+IGNvbnRhaW5lci5hcHBlbmRDaGlsZChpdGVtKSk7IAogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gY2xlYXJSb29tKHJJZHgpIHsKICAgICAgICAgICAgaWYoIWNvbmZpcm0oIlZvdWxlei12b3VzIHZyYWltZW50IHZpZGVyIHRvdXRlIGNldHRlIHNhbGxlID8iKSkgcmV0dXJuOwogICAgICAgICAgICB1cGRhdGVDdXJyZW50RXhhbVN0YXRlKCk7IGNvbnN0IGV4YW1EYXRhID0gQXBwU3RhdGUuZGlzdHJpYnV0aW9uRGF0YVtBcHBTdGF0ZS5jdXJyZW50RXhhbUluZGV4XTsgY29uc3Qgcm9vbSA9IGV4YW1EYXRhLnJvb21zW3JJZHhdOwogICAgICAgICAgICBpZihyb29tLnN0dWRlbnRzLmxlbmd0aCA9PT0gMCkgcmV0dXJuOwogICAgICAgICAgICByb29tLnN0dWRlbnRzLmZvckVhY2gocyA9PiB7IHMucGFzc2FnZVRpbWUgPSAiIjsgcy5sb2RnZVRpbWUgPSAiIjsgfSk7CiAgICAgICAgICAgIGV4YW1EYXRhLnN0b3JhZ2UucHVzaCguLi5yb29tLnN0dWRlbnRzKTsgcm9vbS5zdHVkZW50cyA9IFtdOwogICAgICAgICAgICBleGFtRGF0YS5zdG9yYWdlLnNvcnQoKGEsYikgPT4gKGdldFZhbHVlKGEsWydOb20nXSl8fCcnKS5sb2NhbGVDb21wYXJlKGdldFZhbHVlKGIsWydOb20nXSl8fCcnKSk7CiAgICAgICAgICAgIHJlbmRlckN1cnJlbnRFeGFtKCk7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBnZXRTdXJ2ZWlsbGFudE9wdGlvbnMoc2VsZWN0ZWQ9IiIpIHsgaWYoIUFwcFN0YXRlLnN1cnZlaWxsYW50cykgcmV0dXJuICIiOyBsZXQgb3B0cyA9ICc8b3B0aW9uIHZhbHVlPSIiPi0tIFN1cnYgLS08L29wdGlvbj4nOyBBcHBTdGF0ZS5zdXJ2ZWlsbGFudHMuZm9yRWFjaChzID0+IHsgY29uc3QgdmFsID0gZ2V0VmFsdWUocyxbJ05vbSddKSArICcgJyArIGdldFZhbHVlKHMsWydQcsOpbm9tJ10pOyBvcHRzICs9IGA8b3B0aW9uIHZhbHVlPSIke3ZhbH0iICR7KHZhbD09PXNlbGVjdGVkKT8nc2VsZWN0ZWQnOicnfT4ke3ZhbH08L29wdGlvbj5gOyB9KTsgcmV0dXJuIG9wdHM7IH0KICAgICAgICBmdW5jdGlvbiBhZGRTdXJ2ZWlsbGFudEZpZWxkKGlkKSB7IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKS5pbnNlcnRBZGphY2VudEhUTUwoJ2JlZm9yZWVuZCcsIGA8ZGl2IGNsYXNzPSJzdXJ2ZWlsbGFudC1yb3ciPjxzZWxlY3Qgb25jaGFuZ2U9InVwZGF0ZUN1cnJlbnRFeGFtU3RhdGUoKSI+JHtnZXRTdXJ2ZWlsbGFudE9wdGlvbnMoKX08L3NlbGVjdD48L2Rpdj5gKTsgfQogICAgICAgIGZ1bmN0aW9uIGhhbmRsZUltYWdlKGlucHV0LCBwcmV2aWV3SWQpIHsgY29uc3QgZmlsZSA9IGlucHV0LmZpbGVzWzBdOyBpZiAoIWZpbGUpIHJldHVybjsgY29uc3QgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTsgcmVhZGVyLm9ubG9hZCA9IGZ1bmN0aW9uKGUpIHsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQocHJldmlld0lkKS5zcmMgPSBlLnRhcmdldC5yZXN1bHQ7IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHByZXZpZXdJZCkuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7IGlmKHByZXZpZXdJZCA9PT0gJ2xvZ29QcmV2aWV3JykgQXBwU3RhdGUuY29uZmlnLmxvZ29TcmMgPSBlLnRhcmdldC5yZXN1bHQ7IGlmKHByZXZpZXdJZCA9PT0gJ3NpZ25QcmV2aWV3JykgQXBwU3RhdGUuY29uZmlnLnNpZ25TcmMgPSBlLnRhcmdldC5yZXN1bHQ7IH07IHJlYWRlci5yZWFkQXNEYXRhVVJMKGZpbGUpOyB9CiAgICAgICAgZnVuY3Rpb24gcG9wdWxhdGVDbGFzc0ZpbHRlcigpeyBjb25zdCBzPWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb252b2MtY2xhc3MtZmlsdGVyJyk7IHMuaW5uZXJIVE1MPSc8b3B0aW9uIHZhbHVlPSJBTEwiPlRvdXRlczwvb3B0aW9uPic7IGNvbnN0IGNsPW5ldyBTZXQoKTsgQXBwU3RhdGUuZWxldmVzLmZvckVhY2goZT0+e2NvbnN0IGM9Z2V0VmFsdWUoZSxbJ0NsYXNzZScsJ0RpdiddKTsgaWYoYykgY2wuYWRkKGMpfSk7IEFycmF5LmZyb20oY2wpLnNvcnQoKS5mb3JFYWNoKGM9PnMuYWRkKG5ldyBPcHRpb24oYyxjKSkpOyBwb3B1bGF0ZVNlbGVjdEZyb21TZXQoJ3B2LWNsYXNzLWZpbHRlcicsIGNsKTsgfQogICAgICAgIGZ1bmN0aW9uIHBvcHVsYXRlU2VsZWN0RnJvbVNldChpZCwgc2V0KSB7IGNvbnN0IHM9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpOyBpZighcykgcmV0dXJuOyBzLmlubmVySFRNTD0nPG9wdGlvbiB2YWx1ZT0iQUxMIj5Ub3V0ZXM8L29wdGlvbj4nOyBBcnJheS5mcm9tKHNldCkuc29ydCgpLmZvckVhY2goYz0+cy5hZGQobmV3IE9wdGlvbihjLGMpKSk7IH0KICAgICAgICBmdW5jdGlvbiBwb3B1bGF0ZVN1cnZlaWxsYW50RmlsdGVyKCl7IGNvbnN0IHM9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbnZvYy1zdXJ2LWZpbHRlcicpOyBzLmlubmVySFRNTD0nPG9wdGlvbiB2YWx1ZT0iQUxMIj5Ub3VzPC9vcHRpb24+JzsgaWYoIUFwcFN0YXRlLnN1cnZlaWxsYW50cykgcmV0dXJuOyBBcHBTdGF0ZS5zdXJ2ZWlsbGFudHMuZm9yRWFjaChzdT0+e2NvbnN0IG49Z2V0VmFsdWUoc3UsWydOb20nXSkrJyAnK2dldFZhbHVlKHN1LFsnUHLDqW5vbSddKTsgcy5hZGQobmV3IE9wdGlvbihuLG4pKX0pOyB9CiAgICAgICAgZnVuY3Rpb24gc2F2ZVBvY2hldHRlVGV4dCh0eXBlLCB2YWwpIHsgaWYoIUFwcFN0YXRlLnBvY2hldHRlVGV4dCkgQXBwU3RhdGUucG9jaGV0dGVUZXh0ID0ge307IEFwcFN0YXRlLnBvY2hldHRlVGV4dFt0eXBlXSA9IHZhbDsgfQogICAgICAgIGZ1bmN0aW9uIHBvcHVsYXRlUFZFeGFtU2VsZWN0KCkgeyBjb25zdCBzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3B2LWV4YW0tc2VsZWN0Jyk7IHMuaW5uZXJIVE1MID0gJzxvcHRpb24gdmFsdWU9IkFMTCI+VE9VVCBJTVBSSU1FUjwvb3B0aW9uPic7IEFwcFN0YXRlLmRpc3RyaWJ1dGlvbkRhdGEuZm9yRWFjaCgoZCwgaSkgPT4geyBpZighZCkgcmV0dXJuOyBjb25zdCBleGFtID0gQXBwU3RhdGUuZXByZXV2ZXNbZC5leGFtSWR4XTsgcy5hZGQobmV3IE9wdGlvbihnZXRWYWx1ZShleGFtLCBbJ01hdGnDqHJlJywgJ0VwcmV1dmUnXSksIGkpKTsgfSk7IHMub25jaGFuZ2UoKTsgfQogICAgICAgIAogICAgICAgIGZ1bmN0aW9uIHVwZGF0ZVBWUm9vbVNlbGVjdCgpIHsgCiAgICAgICAgICAgIGNvbnN0IGV4YW1JZHggPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHYtZXhhbS1zZWxlY3QnKS52YWx1ZTsgCiAgICAgICAgICAgIGNvbnN0IHMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHYtcm9vbS1zZWxlY3QnKTsgcy5pbm5lckhUTUwgPSAnPG9wdGlvbiB2YWx1ZT0iQUxMIj5UT1VURVMgTEVTIFNBTExFUyBVVElMSVPDiUVTPC9vcHRpb24+JzsgCiAgICAgICAgICAgIGlmKGV4YW1JZHggPT09ICJBTEwiKSB7IHMuZGlzYWJsZWQgPSB0cnVlOyByZXR1cm47IH0gZWxzZSBzLmRpc2FibGVkID0gZmFsc2U7IAogICAgICAgICAgICBjb25zdCBkaXN0ID0gQXBwU3RhdGUuZGlzdHJpYnV0aW9uRGF0YVtleGFtSWR4XTsgCiAgICAgICAgICAgIGlmKGRpc3QpIGRpc3Qucm9vbXMuZm9yRWFjaCgociwgaSkgPT4geyBpZihyLnN0dWRlbnRzLmxlbmd0aCA+IDApIHMuYWRkKG5ldyBPcHRpb24oci5uYW1lLCBpKSk7IH0pOyAKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgZnVuY3Rpb24gcG9wdWxhdGVFbWFyZ2VtZW50RmlsdGVycygpIHsgCiAgICAgICAgICAgIGNvbnN0IHMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZW1hcmdlbWVudC1yb29tLWZpbHRlcicpOyBzLmlubmVySFRNTCA9ICc8b3B0aW9uIHZhbHVlPSJBTEwiPlRvdXRlcyBsZXMgc2FsbGVzIHV0aWxpc8OpZXM8L29wdGlvbj4nOyAKICAgICAgICAgICAgbGV0IHVzZWRSb29tcyA9IG5ldyBTZXQoKTsgQXBwU3RhdGUuZGlzdHJpYnV0aW9uRGF0YS5mb3JFYWNoKGQgPT4geyBpZihkICYmIGQucm9vbXMpIGQucm9vbXMuZm9yRWFjaChyID0+IHsgaWYoci5zdHVkZW50cy5sZW5ndGggPiAwKSB1c2VkUm9vbXMuYWRkKHIubmFtZSk7IH0pOyB9KTsKICAgICAgICAgICAgQXJyYXkuZnJvbSh1c2VkUm9vbXMpLnNvcnQoKS5mb3JFYWNoKHIgPT4gcy5hZGQobmV3IE9wdGlvbihyLCByKSkpOyAKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIHByaW50RW1hcmdlbWVudCgpIHsgZ2VuZXJhdGVMaXN0RG9jKCdlbWFyZ2VtZW50Jyk7IH0KICAgICAgICBmdW5jdGlvbiBwcmludERpc3BsYXlMaXN0KCkgeyBnZW5lcmF0ZUxpc3REb2MoJ2Rpc3BsYXknKTsgfQogICAgICAgIAogICAgICAgIGZ1bmN0aW9uIGdlbmVyYXRlTGlzdERvYyh0eXBlKSB7CiAgICAgICAgICAgIGlmKCFBcHBTdGF0ZS5kaXN0cmlidXRpb25EYXRhLmxlbmd0aCkgcmV0dXJuIGFsZXJ0KCJSw6lwYXJ0aXRpb24gbWFucXVhbnRlIik7CiAgICAgICAgICAgIGNvbnN0IHJvb21GaWx0ZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZW1hcmdlbWVudC1yb29tLWZpbHRlcicpLnZhbHVlOwogICAgICAgICAgICBjb25zdCBsb2dvID0gQXBwU3RhdGUuY29uZmlnLmxvZ29TcmMgfHwgIiI7CiAgICAgICAgICAgIGNvbnN0IHRpdGxlID0gdHlwZSA9PT0gJ2VtYXJnZW1lbnQnID8gIkxJU1RFIEQnw4lNQVJHRU1FTlQiIDogIkxJU1RFIEQnQUZGSUNIQUdFIC0gQ0FORElEQVRTIjsKICAgICAgICAgICAgbGV0IGZ1bGxIdG1sID0gIiI7CiAgICAgICAgICAgIEFwcFN0YXRlLmRpc3RyaWJ1dGlvbkRhdGEuZm9yRWFjaChleGFtRGF0YSA9PiB7CiAgICAgICAgICAgICAgICBpZighZXhhbURhdGEpIHJldHVybjsKICAgICAgICAgICAgICAgIGNvbnN0IGV4YW1JbmZvID0gQXBwU3RhdGUuZXByZXV2ZXNbZXhhbURhdGEuZXhhbUlkeF07CiAgICAgICAgICAgICAgICBjb25zdCBkYXRlU3RyID0gZm9ybWF0RGF0ZShnZXRWYWx1ZShleGFtSW5mbyxbJ0RhdGUnXSkpOwogICAgICAgICAgICAgICAgZXhhbURhdGEucm9vbXMuZm9yRWFjaChyb29tRGF0YSA9PiB7CiAgICAgICAgICAgICAgICAgICAgaWYocm9vbUZpbHRlciAhPT0gIkFMTCIgJiYgcm9vbURhdGEubmFtZSAhPT0gcm9vbUZpbHRlcikgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgIGlmKHJvb21EYXRhLnN0dWRlbnRzLmxlbmd0aCA9PT0gMCkgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IHN0dWRlbnRzID0gWy4uLnJvb21EYXRhLnN0dWRlbnRzXTsKICAgICAgICAgICAgICAgICAgICBzdHVkZW50cy5zb3J0KChhLGIpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoYS5wYXNzYWdlVGltZSAmJiBiLnBhc3NhZ2VUaW1lKSByZXR1cm4gYS5wYXNzYWdlVGltZS5sb2NhbGVDb21wYXJlKGIucGFzc2FnZVRpbWUpOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZ2V0VmFsdWUoYSxbJ05vbSddKS5sb2NhbGVDb21wYXJlKGdldFZhbHVlKGIsWydOb20nXSkpOwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IGlzVFQgPSByb29tRGF0YS5pc1RUOwogICAgICAgICAgICAgICAgICAgIGxldCB0aW1lID0gaXNUVCA/IGdldFZhbHVlKGV4YW1JbmZvLCBbJ0hldXJlIGRlIGTDqWJ1dCB0aWVycyB0ZW1wcycsICdIZXVyZSBUVCddKSA6IGdldFZhbHVlKGV4YW1JbmZvLCBbJ0hldXJlIGRlIGTDqWJ1dCcsICdIZXVyZSddKTsKICAgICAgICAgICAgICAgICAgICBpZighdGltZSkgdGltZSA9IGdldFZhbHVlKGV4YW1JbmZvLCBbJ0hldXJlIGRlIGTDqWJ1dCcsICdIZXVyZSddKTsKICAgICAgICAgICAgICAgICAgICBsZXQgcm93cyA9ICIiOwogICAgICAgICAgICAgICAgICAgIHN0dWRlbnRzLmZvckVhY2gocyA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBpbmZvU3VwID0gcy5wYXNzYWdlVGltZSA/IGAgPHNwYW4gc3R5bGU9ImZvbnQtc2l6ZTowLjhyZW0iPigke3MucGFzc2FnZVRpbWV9KTwvc3Bhbj5gIDogIiI7CiAgICAgICAgICAgICAgICAgICAgICAgIHJvd3MgKz0gYDx0ciBjbGFzcz0iJHt0eXBlfS1yb3ciPjx0ZD4ke2dldFZhbHVlKHMsWydOb20nXSl9PC90ZD48dGQ+JHtnZXRWYWx1ZShzLFsnUHLDqW5vbSddKX08L3RkPjx0ZD4ke2dldFZhbHVlKHMsWydDbGFzc2UnXSl9JHtpbmZvU3VwfTwvdGQ+JHt0eXBlPT09J2VtYXJnZW1lbnQnID8gJzx0ZD48L3RkPicgOiAnJ308L3RyPmA7CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgZnVsbEh0bWwgKz0gYDxkaXYgY2xhc3M9InByaW50LXBhZ2UtbGlzdCIgc3R5bGU9InBhZ2UtYnJlYWstYWZ0ZXI6IGFsd2F5czsiPjxkaXYgY2xhc3M9InByaW50LWhlYWRlciI+PGRpdiBzdHlsZT0iZm9udC13ZWlnaHQ6Ym9sZDsgZm9udC1zaXplOjEuMnJlbTsiPiR7QXBwU3RhdGUuY29uZmlnLmV4YW1UaXRsZSB8fCAiRVhBTUVOIn08L2Rpdj4ke2xvZ28gPyBgPGltZyBzcmM9IiR7bG9nb30iIGNsYXNzPSJwcmludC1sb2dvIj5gIDogJyd9PC9kaXY+PGRpdiBjbGFzcz0icHJpbnQtZG9jLXRpdGxlIj4ke3RpdGxlfTwvZGl2PjxkaXYgY2xhc3M9InByaW50LWluZm9zLWJveCI+PHN0cm9uZz7DiXByZXV2ZSA6PC9zdHJvbmc+ICR7Z2V0VmFsdWUoZXhhbUluZm8sWydNYXRpw6hyZScsJ0VwcmV1dmUnXSl9PGJyPjxzdHJvbmc+RGF0ZSA6PC9zdHJvbmc+ICR7ZGF0ZVN0cn0gLSA8c3Ryb25nPkhldXJlIEdsb2JhbCA6PC9zdHJvbmc+ICR7dGltZX08YnI+PHN0cm9uZz5TYWxsZSA6PC9zdHJvbmc+ICR7cm9vbURhdGEubmFtZX08YnI+PHN0cm9uZz5TdXJ2ZWlsbGFudHMgOjwvc3Ryb25nPiAke3Jvb21EYXRhLnN1cnZlaWxsYW50cy5qb2luKCcsICcpfTwvZGl2Pjx0YWJsZSBjbGFzcz0icHJpbnQtdGFibGUgJHt0eXBlPT09J2Rpc3BsYXknPydkaXNwbGF5LWxpc3Qtcm93JzonJ30iPjx0aGVhZD48dHI+PHRoPk5vbTwvdGg+PHRoPlByw6lub208L3RoPjx0aD5DbGFzc2UgKFBhc3NhZ2UpPC90aD4ke3R5cGU9PT0nZW1hcmdlbWVudCc/Jzx0aCBzdHlsZT0id2lkdGg6MTUwcHg7Ij5TaWduYXR1cmU8L3RoPic6Jyd9PC90cj48L3RoZWFkPjx0Ym9keT4ke3Jvd3N9PC90Ym9keT48L3RhYmxlPjwvZGl2PmA7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGlmKGZ1bGxIdG1sID09PSAiIikgcmV0dXJuIGFsZXJ0KCJBdWN1biDDqWzDqHZlIHRyb3V2w6kgcG91ciBjZSBmaWx0cmUgKG91IHNhbGxlcyB2aWRlcykuIik7CiAgICAgICAgICAgIGNvbnN0IHBhID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ByaW50LWFyZWEnKTsgcGEuaW5uZXJIVE1MID0gZnVsbEh0bWw7IHdpbmRvdy5wcmludCgpOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gcHJpbnRDb252b2NhdGlvbnMoKSB7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBpZighQXBwU3RhdGUuZGlzdHJpYnV0aW9uRGF0YSB8fCBBcHBTdGF0ZS5kaXN0cmlidXRpb25EYXRhLmxlbmd0aCA9PT0gMCkgeyBhbGVydCgiVmV1aWxsZXogY2FsY3VsZXIgbGEgcsOpcGFydGl0aW9uIChNZW51IDMpLiIpOyByZXR1cm47IH0KICAgICAgICAgICAgICAgIGNvbnN0IHByaW50QXJlYSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcmludC1hcmVhJyk7IHByaW50QXJlYS5pbm5lckhUTUwgPSAiIjsKICAgICAgICAgICAgICAgIGNvbnN0IGZpbHRlckNsYXNzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbnZvYy1jbGFzcy1maWx0ZXInKS52YWx1ZTsKICAgICAgICAgICAgICAgIGNvbnN0IGxvZ29TcmMgPSBBcHBTdGF0ZS5jb25maWcubG9nb1NyYyB8fCAiIjsgY29uc3Qgc2lnblNyYyA9IEFwcFN0YXRlLmNvbmZpZy5zaWduU3JjIHx8ICIiOwogICAgICAgICAgICAgICAgY29uc3QgdHh0QWRkcmVzcyA9IChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndHh0LWFkZHJlc3MnKS52YWx1ZSB8fCAiIikucmVwbGFjZSgvXG4vZywgJzxicj4nKTsKICAgICAgICAgICAgICAgIGNvbnN0IHR4dFRpdGxlID0gIkNPTlZPQ0FUSU9OICIgKyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndHh0LXRpdGxlLWV4dHJhLXN0ZCcpLmlubmVyVGV4dDsKICAgICAgICAgICAgICAgIGNvbnN0IHR4dEJvZHkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndHh0LWJvZHknKS5pbm5lckhUTUw7IGNvbnN0IHR4dFJ1bGVzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3R4dC1ydWxlcycpLmlubmVySFRNTDsKICAgICAgICAgICAgICAgIGNvbnN0IHR4dENpdHkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndHh0LWNpdHknKS5pbm5lclRleHQ7IGNvbnN0IHRvcE1hcmdpbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZXRzLXN0ZC10b3AnKS52YWx1ZTsKICAgICAgICAgICAgICAgIGNvbnN0IGJvdE1hcmdpbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZXRzLXN0ZC1ib3QnKS52YWx1ZTsgY29uc3QgZm9udFNpemUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2V0cy1zdGQtZm9udCcpLnZhbHVlOwogICAgICAgICAgICAgICAgbGV0IGNvdW50ID0gMDsKICAgICAgICAgICAgICAgIEFwcFN0YXRlLmVsZXZlcy5mb3JFYWNoKHN0dWRlbnQgPT4gewogICAgICAgICAgICAgICAgICAgIGxldCBzQ2xhc3MgPSBnZXRWYWx1ZShzdHVkZW50LCBbJ0NsYXNzZScsICdEaXYnXSk7IHNDbGFzcyA9IHNDbGFzcyA/IHNDbGFzcy50b1N0cmluZygpLnRyaW0oKSA6ICJOL0EiOwogICAgICAgICAgICAgICAgICAgIGlmKGZpbHRlckNsYXNzICE9PSAiQUxMIiAmJiBzQ2xhc3MgIT09IGZpbHRlckNsYXNzKSByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgY29uc3Qgbm9tID0gbm9ybWFsaXplKGdldFZhbHVlKHN0dWRlbnQsIFsnTm9tJ10pKTsgY29uc3QgcHJlbm9tID0gbm9ybWFsaXplKGdldFZhbHVlKHN0dWRlbnQsIFsnUHLDqW5vbSddKSk7CiAgICAgICAgICAgICAgICAgICAgbGV0IHN0dWRlbnRFeGFtc0xpc3QgPSBbXTsKICAgICAgICAgICAgICAgICAgICBBcHBTdGF0ZS5kaXN0cmlidXRpb25EYXRhLmZvckVhY2goKGV4YW1EYXRhKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCFleGFtRGF0YSkgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgICAgICBsZXQgc3R1ZGVudFJvb20gPSBudWxsLCBzdHVkZW50RGF0YUluUm9vbSA9IG51bGw7CiAgICAgICAgICAgICAgICAgICAgICAgIGV4YW1EYXRhLnJvb21zLmZvckVhY2gociA9PiB7IAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGZvdW5kID0gci5zdHVkZW50cy5maW5kKHMgPT4gbm9ybWFsaXplKGdldFZhbHVlKHMsWydOb20nXSkpID09PSBub20gJiYgbm9ybWFsaXplKGdldFZhbHVlKHMsWydQcsOpbm9tJ10pKSA9PT0gcHJlbm9tKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGZvdW5kKSB7IHN0dWRlbnRSb29tID0gcjsgc3R1ZGVudERhdGFJblJvb20gPSBmb3VuZDsgfQogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoc3R1ZGVudFJvb20pIHN0dWRlbnRFeGFtc0xpc3QucHVzaCh7IGV4YW06IEFwcFN0YXRlLmVwcmV1dmVzW2V4YW1EYXRhLmV4YW1JZHhdLCByb29tOiBzdHVkZW50Um9vbSwgZGF0YTogc3R1ZGVudERhdGFJblJvb20gfSk7CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgc3R1ZGVudEV4YW1zTGlzdC5zb3J0KChhLCBiKSA9PiBnZXREYXRlVGltZVZhbHVlKGEuZXhhbSwgYS5kYXRhLCBhLnJvb20uaXNUVCkgLSBnZXREYXRlVGltZVZhbHVlKGIuZXhhbSwgYi5kYXRhLCBiLnJvb20uaXNUVCkpOwogICAgICAgICAgICAgICAgICAgIGlmKHN0dWRlbnRFeGFtc0xpc3QubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgICAgICAgICAgICBjb3VudCsrOwogICAgICAgICAgICAgICAgICAgICAgICBsZXQgZXhhbXNSb3dzID0gIiI7CiAgICAgICAgICAgICAgICAgICAgICAgIHN0dWRlbnRFeGFtc0xpc3QuZm9yRWFjaChpdGVtID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4YW1zUm93cyArPSBgPHRyPjx0ZD4ke2dldFZhbHVlKGl0ZW0uZXhhbSwgWydNYXRpw6hyZScsICdFcHJldXZlJ10pfTwvdGQ+PHRkPiR7Zm9ybWF0RGF0ZShnZXRWYWx1ZShpdGVtLmV4YW0sIFsnRGF0ZSddKSl9PC90ZD48dGQ+PHN0cm9uZz4ke2l0ZW0uZGF0YS5wYXNzYWdlVGltZSB8fCAiTm9uIGTDqWZpbmkifTwvc3Ryb25nPjwvdGQ+PHRkPiR7aXRlbS5kYXRhLmxvZGdlVGltZSB8fCAiLSJ9PC90ZD48dGQ+JHtpdGVtLnJvb20ubmFtZX08L3RkPjwvdHI+YDsKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHN0eWxlU3RyID0gYHBhZGRpbmctdG9wOiR7dG9wTWFyZ2lufW1tOyBwYWRkaW5nLWJvdHRvbToke2JvdE1hcmdpbn1tbTsgZm9udC1zaXplOiR7Zm9udFNpemV9cHg7YDsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcGFnZUh0bWwgPSBgPGRpdiBjbGFzcz0icHJpbnQtcGFnZS1jb252b2MiIHN0eWxlPSIke3N0eWxlU3RyfSI+PGRpdiBjbGFzcz0iY29udm9jLWhlYWRlci1yb3ciPjxkaXYgY2xhc3M9ImNvbnZvYy1hZGRyZXNzIj4ke3R4dEFkZHJlc3N9PC9kaXY+PGRpdiBjbGFzcz0iY29udm9jLWxvZ28tem9uZSI+JHtsb2dvU3JjID8gYDxpbWcgc3JjPSIke2xvZ29TcmN9IiBjbGFzcz0iY29udm9jLWxvZ28iPmAgOiAnJ308L2Rpdj48L2Rpdj48ZGl2IGNsYXNzPSJjb252b2MtdGl0bGUiPiR7dHh0VGl0bGV9PC9kaXY+PGRpdiBjbGFzcz0iY29udm9jLXN0dWRlbnQtaW5mbyI+PHN0cm9uZz5Ob20gZXQgUHLDqW5vbSA6PC9zdHJvbmc+ICR7Z2V0VmFsdWUoc3R1ZGVudCwgWydOb20nXSl9ICR7Z2V0VmFsdWUoc3R1ZGVudCwgWydQcsOpbm9tJ10pfTxicj48c3Ryb25nPkNsYXNzZSA6PC9zdHJvbmc+ICR7c0NsYXNzfTwvZGl2PjxkaXYgY2xhc3M9ImNvbnZvYy1ib2R5Ij4ke3R4dEJvZHl9PC9kaXY+PHRhYmxlIGNsYXNzPSJjb252b2MtdGFibGUiPjx0aGVhZD48dHI+PHRoPsOJcHJldXZlPC90aD48dGg+RGF0ZTwvdGg+PHRoPkhldXJlIFBhc3NhZ2U8L3RoPjx0aD5IZXVyZSBMb2dlPC90aD48dGg+U2FsbGU8L3RoPjwvdHI+PC90aGVhZD48dGJvZHk+JHtleGFtc1Jvd3N9PC90Ym9keT48L3RhYmxlPjxkaXYgc3R5bGU9ImZvbnQtd2VpZ2h0OmJvbGQ7IG1hcmdpbi1ib3R0b206NXB4OyI+UsOoZ2xlbWVudCBldCBjb25zaWduZXMgOjwvZGl2PjxkaXYgY2xhc3M9ImNvbnZvYy1ydWxlcyIgc3R5bGU9ImZvbnQtc2l6ZTowLjlyZW07Ij4ke3R4dFJ1bGVzfTwvZGl2PjxkaXYgY2xhc3M9ImNvbnZvYy1mb290ZXIiIHN0eWxlPSJqdXN0aWZ5LWNvbnRlbnQ6IGZsZXgtZW5kOyI+PGRpdiBjbGFzcz0iY29udm9jLXNpZ24iIHN0eWxlPSJ0ZXh0LWFsaWduOnJpZ2h0OyI+PGRpdj5GYWl0IMOgICR7dHh0Q2l0eX0sIGxlICR7bmV3IERhdGUoKS50b0xvY2FsZURhdGVTdHJpbmcoJ2ZyLUZSJyl9PC9kaXY+JHtzaWduU3JjID8gYDxpbWcgc3JjPSIke3NpZ25TcmN9IiBzdHlsZT0ibWF4LWhlaWdodDo2MHB4OyBtYXJnaW4tdG9wOjEwcHg7Ij5gIDogJyd9PGRpdiBzdHlsZT0ibWFyZ2luLXRvcDoxMHB4OyBmb250LXdlaWdodDpib2xkOyI+JHtBcHBTdGF0ZS5jb25maWcubmFtZSB8fCAnJ308L2Rpdj48ZGl2IHN0eWxlPSJmb250LXN0eWxlOml0YWxpYzsiPiR7QXBwU3RhdGUuY29uZmlnLnJvbGUgfHwgJyd9PC9kaXY+PC9kaXY+PC9kaXY+PC9kaXY+YDsKICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnRBcmVhLmluc2VydEFkamFjZW50SFRNTCgnYmVmb3JlZW5kJywgcGFnZUh0bWwpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgaWYoY291bnQgPiAwKSB3aW5kb3cucHJpbnQoKTsgZWxzZSBhbGVydCgiQXVjdW5lIGNvbnZvY2F0aW9uIGfDqW7DqXLDqWUuIik7CiAgICAgICAgICAgIH0gY2F0Y2goZSkgeyBjb25zb2xlLmVycm9yKGUpOyBhbGVydCgiRXJyZXVyIGltcHJlc3Npb246ICIgKyBlLm1lc3NhZ2UpOyB9CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBwcmludFN1cnZlaWxsYW50Q29udm9jYXRpb25zKCkgewogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgaWYoIUFwcFN0YXRlLmRpc3RyaWJ1dGlvbkRhdGEgfHwgQXBwU3RhdGUuZGlzdHJpYnV0aW9uRGF0YS5sZW5ndGggPT09IDApIHsgYWxlcnQoIlZldWlsbGV6IGNhbGN1bGVyIGxhIHLDqXBhcnRpdGlvbi4iKTsgcmV0dXJuOyB9CiAgICAgICAgICAgICAgICBjb25zdCBwcmludEFyZWEgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJpbnQtYXJlYScpOyBwcmludEFyZWEuaW5uZXJIVE1MID0gIiI7CiAgICAgICAgICAgICAgICBjb25zdCBmaWx0ZXJTdXJ2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbnZvYy1zdXJ2LWZpbHRlcicpLnZhbHVlOwogICAgICAgICAgICAgICAgY29uc3QgbG9nb1NyYyA9IEFwcFN0YXRlLmNvbmZpZy5sb2dvU3JjIHx8ICIiOyBjb25zdCBzaWduU3JjID0gQXBwU3RhdGUuY29uZmlnLnNpZ25TcmMgfHwgIiI7CiAgICAgICAgICAgICAgICBjb25zdCB0eHRBZGRyZXNzID0gKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0eHQtc3Vydi1hZGRyZXNzJykudmFsdWUgfHwgIiIpLnJlcGxhY2UoL1xuL2csICc8YnI+Jyk7CiAgICAgICAgICAgICAgICBjb25zdCB0eHRUaXRsZSA9ICJDT05WT0NBVElPTiAiICsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3R4dC10aXRsZS1leHRyYS1zdXJ2JykuaW5uZXJUZXh0OwogICAgICAgICAgICAgICAgY29uc3QgdHh0Qm9keSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0eHQtc3Vydi1ib2R5JykuaW5uZXJIVE1MOyBjb25zdCB0eHRSdWxlcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0eHQtc3Vydi1ydWxlcycpLmlubmVySFRNTDsKICAgICAgICAgICAgICAgIGNvbnN0IHR4dENpdHkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndHh0LXN1cnYtY2l0eScpLmlubmVyVGV4dDsgY29uc3QgdG9wTWFyZ2luID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NldHMtc3Vydi10b3AnKS52YWx1ZTsKICAgICAgICAgICAgICAgIGNvbnN0IGJvdE1hcmdpbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZXRzLXN1cnYtYm90JykudmFsdWU7IGNvbnN0IGZvbnRTaXplID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NldHMtc3Vydi1mb250JykudmFsdWU7CiAgICAgICAgICAgICAgICBsZXQgc2NoZWR1bGVNYXAgPSB7fTsKICAgICAgICAgICAgICAgIEFwcFN0YXRlLmRpc3RyaWJ1dGlvbkRhdGEuZm9yRWFjaChleGFtRGF0YSA9PiB7CiAgICAgICAgICAgICAgICAgICAgaWYoIWV4YW1EYXRhKSByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgY29uc3QgZXhhbVJhdyA9IEFwcFN0YXRlLmVwcmV1dmVzW2V4YW1EYXRhLmV4YW1JZHhdOyAKICAgICAgICAgICAgICAgICAgICBleGFtRGF0YS5yb29tcy5mb3JFYWNoKHJvb20gPT4gewogICAgICAgICAgICAgICAgICAgICAgICByb29tLnN1cnZlaWxsYW50cy5mb3JFYWNoKHN1cnZOYW1lID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCFzdXJ2TmFtZSkgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoIXNjaGVkdWxlTWFwW3N1cnZOYW1lXSkgc2NoZWR1bGVNYXBbc3Vydk5hbWVdID0gW107CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpc1RUID0gcm9vbS5pc1RUOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHRpbWUgPSBpc1RUID8gZ2V0VmFsdWUoZXhhbVJhdywgWydIZXVyZSBkZSBkw6lidXQgdGllcnMgdGVtcHMnLCAnSGV1cmUgVFQnLCAnSGV1cmUgZMOpYnV0IFRUJ10pIDogZ2V0VmFsdWUoZXhhbVJhdywgWydIZXVyZSBkZSBkw6lidXQnLCAnSGV1cmUnXSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZighdGltZSkgdGltZSA9IGdldFZhbHVlKGV4YW1SYXcsIFsnSGV1cmUgZGUgZMOpYnV0JywgJ0hldXJlJ10pOyAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBkdXJhdGlvbiA9IGlzVFQgPyBnZXRWYWx1ZShleGFtUmF3LCBbJ0R1csOpZSB0aWVycyB0ZW1wcycsICdEdXLDqWUgZW4gbWludXRlIHRpZXJzIHRlbXBzJywgJ0R1csOpZSBUVCddKSA6IGdldFZhbHVlKGV4YW1SYXcsIFsnRHVyw6llIGVuIG1pbnV0ZScsICdEdXLDqWUnXSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZighZHVyYXRpb24pIGR1cmF0aW9uID0gZ2V0VmFsdWUoZXhhbVJhdywgWydEdXLDqWUgZW4gbWludXRlJywgJ0R1csOpZSddKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjaGVkdWxlTWFwW3N1cnZOYW1lXS5wdXNoKHsgcmF3RXhhbTogZXhhbVJhdywgaXNUVDogaXNUVCwgZXByZXV2ZTogZ2V0VmFsdWUoZXhhbVJhdywgWydNYXRpw6hyZScsICdFcHJldXZlJ10pLCBkYXRlOiBmb3JtYXREYXRlKGdldFZhbHVlKGV4YW1SYXcsIFsnRGF0ZSddKSksIGhldXJlOiB0aW1lLCBkdXJlZTogZHVyYXRpb24sIHNhbGxlOiByb29tLm5hbWUgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBsZXQgY291bnQgPSAwOyBjb25zdCBzb3J0ZWRTdXJ2cyA9IE9iamVjdC5rZXlzKHNjaGVkdWxlTWFwKS5zb3J0KCk7CiAgICAgICAgICAgICAgICBzb3J0ZWRTdXJ2cy5mb3JFYWNoKHN1cnZOYW1lID0+IHsKICAgICAgICAgICAgICAgICAgICBpZihmaWx0ZXJTdXJ2ICE9PSAiQUxMIiAmJiBzdXJ2TmFtZSAhPT0gZmlsdGVyU3VydikgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IHNsb3RzID0gc2NoZWR1bGVNYXBbc3Vydk5hbWVdOwogICAgICAgICAgICAgICAgICAgIHNsb3RzLnNvcnQoKGEsIGIpID0+IGdldERhdGVUaW1lVmFsdWUoYS5yYXdFeGFtLCBudWxsLCBhLmlzVFQpIC0gZ2V0RGF0ZVRpbWVWYWx1ZShiLnJhd0V4YW0sIG51bGwsIGIuaXNUVCkpOwogICAgICAgICAgICAgICAgICAgIGxldCByb3dzID0gIiI7CiAgICAgICAgICAgICAgICAgICAgc2xvdHMuZm9yRWFjaChzbG90ID0+IHsgcm93cyArPSBgPHRyPjx0ZD4ke3Nsb3QuZXByZXV2ZX08L3RkPjx0ZD4ke3Nsb3QuZGF0ZX08L3RkPjx0ZD4ke3Nsb3QuaGV1cmV9PC90ZD48dGQ+JHtmb3JtYXREdXJhdGlvbkRpc3BsYXkoc2xvdC5kdXJlZSl9PC90ZD48dGQ+JHtzbG90LnNhbGxlfTwvdGQ+PC90cj5gOyB9KTsKICAgICAgICAgICAgICAgICAgICBjb3VudCsrOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IHN0eWxlU3RyID0gYHBhZGRpbmctdG9wOiR7dG9wTWFyZ2lufW1tOyBwYWRkaW5nLWJvdHRvbToke2JvdE1hcmdpbn1tbTsgZm9udC1zaXplOiR7Zm9udFNpemV9cHg7YDsKICAgICAgICAgICAgICAgICAgICBjb25zdCBwYWdlSHRtbCA9IGA8ZGl2IGNsYXNzPSJwcmludC1wYWdlLWNvbnZvYyIgc3R5bGU9IiR7c3R5bGVTdHJ9Ij48ZGl2IGNsYXNzPSJjb252b2MtaGVhZGVyLXJvdyI+PGRpdiBjbGFzcz0iY29udm9jLWFkZHJlc3MiPiR7dHh0QWRkcmVzc308L2Rpdj48ZGl2IGNsYXNzPSJjb252b2MtbG9nby16b25lIj4ke2xvZ29TcmMgPyBgPGltZyBzcmM9IiR7bG9nb1NyY30iIGNsYXNzPSJjb252b2MtbG9nbyI+YCA6ICcnfTwvZGl2PjwvZGl2PjxkaXYgY2xhc3M9ImNvbnZvYy10aXRsZSI+JHt0eHRUaXRsZX08L2Rpdj48ZGl2IGNsYXNzPSJjb252b2Mtc3R1ZGVudC1pbmZvIj48c3Ryb25nPlN1cnZlaWxsYW50IDo8L3N0cm9uZz4gJHtzdXJ2TmFtZX08L2Rpdj48ZGl2IGNsYXNzPSJjb252b2MtYm9keSI+JHt0eHRCb2R5fTwvZGl2Pjx0YWJsZSBjbGFzcz0iY29udm9jLXRhYmxlIj48dGhlYWQ+PHRyPjx0aD7DiXByZXV2ZTwvdGg+PHRoPkRhdGU8L3RoPjx0aD5Ib3JhaXJlIEdsb2JhbDwvdGg+PHRoPkR1csOpZTwvdGg+PHRoPlNhbGxlPC90aD48L3RyPjwvdGhlYWQ+PHRib2R5PiR7cm93c308L3Rib2R5PjwvdGFibGU+PGRpdiBzdHlsZT0iZm9udC13ZWlnaHQ6Ym9sZDsgbWFyZ2luLWJvdHRvbTo1cHg7Ij5Db25zaWduZXMgOjwvZGl2PjxkaXYgY2xhc3M9ImNvbnZvYy1ydWxlcyIgc3R5bGU9ImZvbnQtc2l6ZTowLjlyZW07Ij4ke3R4dFJ1bGVzfTwvZGl2PjxkaXYgY2xhc3M9ImNvbnZvYy1mb290ZXIiIHN0eWxlPSJqdXN0aWZ5LWNvbnRlbnQ6IGZsZXgtZW5kOyI+PGRpdiBjbGFzcz0iY29udm9jLXNpZ24iIHN0eWxlPSJ0ZXh0LWFsaWduOnJpZ2h0OyI+PGRpdj5GYWl0IMOgICR7dHh0Q2l0eX0sIGxlICR7bmV3IERhdGUoKS50b0xvY2FsZURhdGVTdHJpbmcoJ2ZyLUZSJyl9PC9kaXY+JHtzaWduU3JjID8gYDxpbWcgc3JjPSIke3NpZ25TcmN9IiBzdHlsZT0ibWF4LWhlaWdodDo2MHB4OyBtYXJnaW4tdG9wOjEwcHg7Ij5gIDogJyd9PGRpdiBzdHlsZT0ibWFyZ2luLXRvcDoxMHB4OyBmb250LXdlaWdodDpib2xkOyI+JHtBcHBTdGF0ZS5jb25maWcubmFtZSB8fCAnJ308L2Rpdj48ZGl2IHN0eWxlPSJmb250LXN0eWxlOml0YWxpYzsiPiR7QXBwU3RhdGUuY29uZmlnLnJvbGUgfHwgJyd9PC9kaXY+PC9kaXY+PC9kaXY+PC9kaXY+YDsKICAgICAgICAgICAgICAgICAgICBwcmludEFyZWEuaW5zZXJ0QWRqYWNlbnRIVE1MKCdiZWZvcmVlbmQnLCBwYWdlSHRtbCk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIGlmKGNvdW50ID4gMCkgd2luZG93LnByaW50KCk7IGVsc2UgYWxlcnQoIkF1Y3VuZSBzdXJ2ZWlsbGFuY2UgdHJvdXbDqWUuIik7CiAgICAgICAgICAgIH0gY2F0Y2goZSkgeyBjb25zb2xlLmVycm9yKGUpOyBhbGVydCgiRXJyZXVyIGltcHJlc3Npb246ICIgKyBlLm1lc3NhZ2UpOyB9CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBwb3B1bGF0ZVJlY2FwRmlsdGVycygpIHsgCiAgICAgICAgICAgIGNvbnN0IGV4YW1TZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVjYXAtZXhhbS1zZWxlY3QnKTsgZXhhbVNlbC5pbm5lckhUTUwgPSAnPG9wdGlvbiB2YWx1ZT0iQUxMIj5Ub3V0ZXMgbGVzIMOpcHJldXZlczwvb3B0aW9uPic7IAogICAgICAgICAgICBBcHBTdGF0ZS5kaXN0cmlidXRpb25EYXRhLmZvckVhY2goKGQsIGkpID0+IHsgaWYoIWQpIHJldHVybjsgZXhhbVNlbC5hZGQobmV3IE9wdGlvbihnZXRWYWx1ZShBcHBTdGF0ZS5lcHJldXZlc1tkLmV4YW1JZHhdLCBbJ01hdGnDqHJlJywgJ0VwcmV1dmUnXSksIGkpKTsgfSk7IAogICAgICAgICAgICB1cGRhdGVSZWNhcFJvb21TZWxlY3QoKTsgCiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiB1cGRhdGVSZWNhcFJvb21TZWxlY3QoKSB7IAogICAgICAgICAgICBjb25zdCByb29tU2VsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JlY2FwLXJvb20tc2VsZWN0Jyk7IHJvb21TZWwuaW5uZXJIVE1MID0gJzxvcHRpb24gdmFsdWU9IkFMTCI+VG91dGVzIGxlcyBzYWxsZXMgdXRpbGlzw6llczwvb3B0aW9uPic7IAogICAgICAgICAgICBjb25zdCBleGFtSWR4ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JlY2FwLWV4YW0tc2VsZWN0JykudmFsdWU7IAogICAgICAgICAgICBpZihleGFtSWR4ICE9PSAiQUxMIikgeyAKICAgICAgICAgICAgICAgIGNvbnN0IGRpc3QgPSBBcHBTdGF0ZS5kaXN0cmlidXRpb25EYXRhW2V4YW1JZHhdOyBpZihkaXN0KSBkaXN0LnJvb21zLmZvckVhY2gociA9PiB7IGlmKHIuc3R1ZGVudHMubGVuZ3RoID4gMCkgcm9vbVNlbC5hZGQobmV3IE9wdGlvbihyLm5hbWUsIHIubmFtZSkpOyB9KTsgCiAgICAgICAgICAgIH0gZWxzZSB7IAogICAgICAgICAgICAgICAgbGV0IHJvb21zID0gbmV3IFNldCgpOyBBcHBTdGF0ZS5kaXN0cmlidXRpb25EYXRhLmZvckVhY2goZCA9PiB7IGlmKGQpIGQucm9vbXMuZm9yRWFjaChyID0+IHsgaWYoci5zdHVkZW50cy5sZW5ndGggPiAwKSByb29tcy5hZGQoci5uYW1lKTsgfSk7IH0pOyAKICAgICAgICAgICAgICAgIEFycmF5LmZyb20ocm9vbXMpLnNvcnQoKS5mb3JFYWNoKHIgPT4gcm9vbVNlbC5hZGQobmV3IE9wdGlvbihyLCByKSkpOyAKICAgICAgICAgICAgfSAKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIHByaW50R2xvYmFsUmVjYXAoKSB7IAogICAgICAgICAgICBpZighQXBwU3RhdGUuZGlzdHJpYnV0aW9uRGF0YS5sZW5ndGgpIHJldHVybiBhbGVydCgiUsOpcGFydGl0aW9uIHZpZGUiKTsgCiAgICAgICAgICAgIGNvbnN0IGV4YW1GaWx0ZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVjYXAtZXhhbS1zZWxlY3QnKS52YWx1ZTsgCiAgICAgICAgICAgIGNvbnN0IHJvb21GaWx0ZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVjYXAtcm9vbS1zZWxlY3QnKS52YWx1ZTsgCiAgICAgICAgICAgIGNvbnN0IGxvZ28gPSBBcHBTdGF0ZS5jb25maWcubG9nb1NyYyB8fCAiIjsgCiAgICAgICAgICAgIGxldCBodG1sID0gIiI7IAogICAgICAgICAgICBsZXQgZXhhbXNUb1ByaW50ID0gKGV4YW1GaWx0ZXIgPT09ICJBTEwiKSA/IEFwcFN0YXRlLmRpc3RyaWJ1dGlvbkRhdGEuZmlsdGVyKGQgPT4gZCAhPT0gbnVsbCkgOiBbQXBwU3RhdGUuZGlzdHJpYnV0aW9uRGF0YVtleGFtRmlsdGVyXV07IAogICAgICAgICAgICAKICAgICAgICAgICAgZXhhbXNUb1ByaW50LmZvckVhY2goZGlzdCA9PiB7IAogICAgICAgICAgICAgICAgaWYoIWRpc3QpIHJldHVybjsgCiAgICAgICAgICAgICAgICBjb25zdCBleGFtSW5mbyA9IEFwcFN0YXRlLmVwcmV1dmVzW2Rpc3QuZXhhbUlkeF07IAogICAgICAgICAgICAgICAgY29uc3QgZXhhbU5hbWUgPSBnZXRWYWx1ZShleGFtSW5mbywgWydNYXRpw6hyZScsJ0VwcmV1dmUnXSk7IAogICAgICAgICAgICAgICAgZGlzdC5yb29tcy5mb3JFYWNoKHIgPT4geyAKICAgICAgICAgICAgICAgICAgICBpZihyb29tRmlsdGVyICE9PSAiQUxMIiAmJiByLm5hbWUgIT09IHJvb21GaWx0ZXIpIHJldHVybjsgCiAgICAgICAgICAgICAgICAgICAgaWYoci5zdHVkZW50cy5sZW5ndGggPT09IDApIHJldHVybjsKICAgICAgICAgICAgICAgICAgICBsZXQgbGlzdCA9IFsuLi5yLnN0dWRlbnRzXTsgCiAgICAgICAgICAgICAgICAgICAgbGlzdC5zb3J0KChhLGIpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICBpZihhLnBhc3NhZ2VUaW1lICYmIGIucGFzc2FnZVRpbWUpIHJldHVybiBhLnBhc3NhZ2VUaW1lLmxvY2FsZUNvbXBhcmUoYi5wYXNzYWdlVGltZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChnZXRWYWx1ZShhLFsnTm9tJ10pIHx8ICIiKS5sb2NhbGVDb21wYXJlKGdldFZhbHVlKGIsWydOb20nXSkgfHwgIiIpOwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIGxldCByb3dzID0gIiI7IAogICAgICAgICAgICAgICAgICAgIGxpc3QuZm9yRWFjaChpdGVtID0+IHsgCiAgICAgICAgICAgICAgICAgICAgICAgIHJvd3MgKz0gYDx0cj48dGQ+JHtnZXRWYWx1ZShpdGVtLFsnTm9tJ10pfTwvdGQ+PHRkPiR7Z2V0VmFsdWUoaXRlbSxbJ1Byw6lub20nXSl9PC90ZD48dGQ+JHtnZXRWYWx1ZShpdGVtLFsnQ2xhc3NlJ10pfTwvdGQ+PHRkPjxzdHJvbmc+JHtpdGVtLnBhc3NhZ2VUaW1lIHx8ICItIn08L3N0cm9uZz48L3RkPjwvdHI+YDsgCiAgICAgICAgICAgICAgICAgICAgfSk7IAogICAgICAgICAgICAgICAgICAgIGh0bWwgKz0gYDxkaXYgY2xhc3M9InByaW50LXBhZ2UtbGlzdCIgc3R5bGU9InBhZ2UtYnJlYWstYWZ0ZXI6IGFsd2F5czsiPjxkaXYgY2xhc3M9InByaW50LWhlYWRlciI+PGRpdj5UQUJMRUFVIFLDiUNBUElUVUxBVElGPC9kaXY+JHtsb2dvID8gYDxpbWcgc3JjPSIke2xvZ299IiBjbGFzcz0icHJpbnQtbG9nbyI+YCA6ICcnfTwvZGl2PjxkaXYgY2xhc3M9InByaW50LWRvYy10aXRsZSI+JHtleGFtTmFtZX0gLSBTYWxsZSAke3IubmFtZX08L2Rpdj48ZGl2IHN0eWxlPSJ0ZXh0LWFsaWduOmNlbnRlcjsgZm9udC1zaXplOjEuMXJlbTsgbWFyZ2luLWJvdHRvbToxMHB4OyI+PHN0cm9uZz5EYXRlIDo8L3N0cm9uZz4gJHtmb3JtYXREYXRlKGdldFZhbHVlKGV4YW1JbmZvLFsnRGF0ZSddKSl9PC9kaXY+PHRhYmxlIGNsYXNzPSJwcmludC10YWJsZSI+PHRoZWFkPjx0cj48dGg+Tm9tPC90aD48dGg+UHLDqW5vbTwvdGg+PHRoPkNsYXNzZTwvdGg+PHRoPkhldXJlIETDqWJ1dDwvdGg+PC90cj48L3RoZWFkPjx0Ym9keT4ke3Jvd3N9PC90Ym9keT48L3RhYmxlPjwvZGl2PmA7IAogICAgICAgICAgICAgICAgfSk7IAogICAgICAgICAgICB9KTsgCiAgICAgICAgICAgIGlmKGh0bWwgPT09ICIiKSByZXR1cm4gYWxlcnQoIkF1Y3VuZSBkb25uw6llIHBvdXIgY2UgZmlsdHJlLiIpOyAKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ByaW50LWFyZWEnKS5pbm5lckhUTUwgPSBodG1sOyB3aW5kb3cucHJpbnQoKTsgCiAgICAgICAgfQogICAgICAgIAogICAgICAgIGZ1bmN0aW9uIHByaW50UFYoKSB7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBjb25zdCBleGFtSWR4ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3B2LWV4YW0tc2VsZWN0JykudmFsdWU7CiAgICAgICAgICAgICAgICBjb25zdCByb29tSWR4ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3B2LXJvb20tc2VsZWN0JykudmFsdWU7CiAgICAgICAgICAgICAgICBpZighQXBwU3RhdGUuZGlzdHJpYnV0aW9uRGF0YSB8fCBBcHBTdGF0ZS5kaXN0cmlidXRpb25EYXRhLmxlbmd0aCA9PT0gMCkgeyBhbGVydCgiUsOpcGFydGl0aW9uIG1hbnF1YW50ZS4iKTsgcmV0dXJuOyB9CiAgICAgICAgICAgICAgICBjb25zdCBsb2dvID0gQXBwU3RhdGUuY29uZmlnLmxvZ29TcmMgfHwgIiI7IGxldCBodG1sID0gIiI7CiAgICAgICAgICAgICAgICBsZXQgZXhhbXNUb1ByaW50ID0gKGV4YW1JZHggPT09ICJBTEwiKSA/IEFwcFN0YXRlLmRpc3RyaWJ1dGlvbkRhdGEgOiBbQXBwU3RhdGUuZGlzdHJpYnV0aW9uRGF0YVtleGFtSWR4XV07CiAgICAgICAgICAgICAgICBleGFtc1RvUHJpbnQuZm9yRWFjaChleGFtRGF0YSA9PiB7CiAgICAgICAgICAgICAgICAgICAgaWYoIWV4YW1EYXRhKSByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgY29uc3QgZXhhbUluZm8gPSBBcHBTdGF0ZS5lcHJldXZlc1tleGFtRGF0YS5leGFtSWR4XTsKICAgICAgICAgICAgICAgICAgICBsZXQgcm9vbXNUb1ByaW50ID0gKHJvb21JZHggPT09ICJBTEwiIHx8IGV4YW1JZHggPT09ICJBTEwiKSA/IGV4YW1EYXRhLnJvb21zIDogW2V4YW1EYXRhLnJvb21zW3Jvb21JZHhdXTsKICAgICAgICAgICAgICAgICAgICByb29tc1RvUHJpbnQuZm9yRWFjaChyb29tRGF0YSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHJvb21EYXRhLnN0dWRlbnRzLmxlbmd0aCA9PT0gMCkgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpc1RUID0gcm9vbURhdGEuaXNUVDsKICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHRpbWUgPSBpc1RUID8gZ2V0VmFsdWUoZXhhbUluZm8sIFsnSGV1cmUgZGUgZMOpYnV0IHRpZXJzIHRlbXBzJywgJ0hldXJlIFRUJ10pIDogZ2V0VmFsdWUoZXhhbUluZm8sIFsnSGV1cmUgZGUgZMOpYnV0JywgJ0hldXJlJ10pOwogICAgICAgICAgICAgICAgICAgICAgICBpZighdGltZSkgdGltZSA9IGdldFZhbHVlKGV4YW1JbmZvLCBbJ0hldXJlIGRlIGTDqWJ1dCcsICdIZXVyZSddKTsKICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGR1cmF0aW9uID0gaXNUVCA/IGdldFZhbHVlKGV4YW1JbmZvLCBbJ0R1csOpZSBlbiBtaW51dGUgdGllcnMgdGVtcHMnLCAnRHVyw6llIFRUJ10pIDogZ2V0VmFsdWUoZXhhbUluZm8sIFsnRHVyw6llIGVuIG1pbnV0ZScsICdEdXLDqWUnXSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCFkdXJhdGlvbikgZHVyYXRpb24gPSBnZXRWYWx1ZShleGFtSW5mbywgWydEdXLDqWUgZW4gbWludXRlJywgJ0R1csOpZSddKTsKICAgICAgICAgICAgICAgICAgICAgICAgaHRtbCArPSBgPGRpdiBjbGFzcz0icHJpbnQtcGFnZS1saXN0IiBzdHlsZT0icGFnZS1icmVhay1hZnRlcjogYWx3YXlzOyI+PGRpdiBjbGFzcz0icHJpbnQtaGVhZGVyIj48ZGl2PiR7QXBwU3RhdGUuY29uZmlnLmV4YW1UaXRsZSB8fCAiRVhBTUVOIn08L2Rpdj4ke2xvZ28gPyBgPGltZyBzcmM9IiR7bG9nb30iIGNsYXNzPSJwcmludC1sb2dvIj5gIDogJyd9PC9kaXY+PGRpdiBjbGFzcz0icHJpbnQtZG9jLXRpdGxlIj5QUk9Dw4hTIFZFUkJBTCBERSBTQUxMRTwvZGl2PjxkaXYgY2xhc3M9InByaW50LWluZm9zLWJveCI+PHN0cm9uZz7DiXByZXV2ZSA6PC9zdHJvbmc+ICR7Z2V0VmFsdWUoZXhhbUluZm8sWydNYXRpw6hyZScsJ0VwcmV1dmUnXSl9PGJyPjxzdHJvbmc+RGF0ZSA6PC9zdHJvbmc+ICR7Zm9ybWF0RGF0ZShnZXRWYWx1ZShleGFtSW5mbyxbJ0RhdGUnXSkpfTxicj48c3Ryb25nPkhldXJlIGTDqWJ1dCA6PC9zdHJvbmc+ICR7dGltZX0gLSA8c3Ryb25nPkR1csOpZSA6PC9zdHJvbmc+ICR7Zm9ybWF0RHVyYXRpb25EaXNwbGF5KGR1cmF0aW9uKX08YnI+PHN0cm9uZz5TYWxsZSA6PC9zdHJvbmc+ICR7cm9vbURhdGEubmFtZX08YnI+PHN0cm9uZz5Ob21icmUgZGUgY2FuZGlkYXRzIDo8L3N0cm9uZz4gJHtyb29tRGF0YS5zdHVkZW50cy5sZW5ndGh9PC9kaXY+PGRpdiBzdHlsZT0iYm9yZGVyOjFweCBzb2xpZCAjMDAwOyBwYWRkaW5nOjEwcHg7IGhlaWdodDozMDBweDsgbWFyZ2luLWJvdHRvbToyMHB4OyI+PHN0cm9uZz5PYnNlcnZhdGlvbnMgLyBJbmNpZGVudHMgOjwvc3Ryb25nPjwvZGl2PjxkaXYgc3R5bGU9ImJvcmRlcjoxcHggc29saWQgIzAwMDsgcGFkZGluZzoxMHB4OyBoZWlnaHQ6MTUwcHg7IG1hcmdpbi1ib3R0b206MjBweDsiPjxzdHJvbmc+QWJzZW50cyAoTm9tcyBldCBQcsOpbm9tcykgOjwvc3Ryb25nPjwvZGl2PjxkaXYgY2xhc3M9InB2LXNpZ25hdHVyZXMiPjxkaXYgY2xhc3M9InB2LWJveCI+PHN0cm9uZz5TaWduYXR1cmUgU3VydmVpbGxhbnQgMSA6PC9zdHJvbmc+PC9kaXY+PGRpdiBjbGFzcz0icHYtYm94Ij48c3Ryb25nPlNpZ25hdHVyZSBTdXJ2ZWlsbGFudCAyIDo8L3N0cm9uZz48L2Rpdj48L2Rpdj48ZGl2IGNsYXNzPSJjb252b2MtZm9vdGVyIiBzdHlsZT0ianVzdGlmeS1jb250ZW50OiBmbGV4LWVuZDsgbWFyZ2luLXRvcDo1MHB4OyI+PGRpdiBjbGFzcz0iY29udm9jLXNpZ24iIHN0eWxlPSJ0ZXh0LWFsaWduOnJpZ2h0OyI+PGRpdj5GYWl0IMOgICR7QXBwU3RhdGUuY29udm9jVGV4dC5jaXR5IHx8ICdWaWxsZSd9LCBsZSAke25ldyBEYXRlKCkudG9Mb2NhbGVEYXRlU3RyaW5nKCdmci1GUicpfTwvZGl2PjxkaXYgc3R5bGU9Im1hcmdpbi10b3A6MTBweDsgZm9udC13ZWlnaHQ6Ym9sZDsiPiR7QXBwU3RhdGUuY29uZmlnLm5hbWV9PC9kaXY+PC9kaXY+PC9kaXY+PC9kaXY+YDsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ByaW50LWFyZWEnKS5pbm5lckhUTUwgPSBodG1sOyB3aW5kb3cucHJpbnQoKTsKICAgICAgICAgICAgfSBjYXRjaChlKXsgY29uc29sZS5lcnJvcihlKTsgYWxlcnQoIkVycmV1ciBpbXByZXNzaW9uIFBWIik7IH0KICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIHByaW50UG9jaGV0dGVzKCkgewogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgY29uc3QgZXhhbUlkeCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwdi1leGFtLXNlbGVjdCcpLnZhbHVlOwogICAgICAgICAgICAgICAgY29uc3Qgcm9vbUlkeCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwdi1yb29tLXNlbGVjdCcpLnZhbHVlOwogICAgICAgICAgICAgICAgaWYoIUFwcFN0YXRlLmRpc3RyaWJ1dGlvbkRhdGEgfHwgQXBwU3RhdGUuZGlzdHJpYnV0aW9uRGF0YS5sZW5ndGggPT09IDApIHsgYWxlcnQoIlLDqXBhcnRpdGlvbiBtYW5xdWFudGUuIik7IHJldHVybjsgfQogICAgICAgICAgICAgICAgY29uc3QgbG9nbyA9IEFwcFN0YXRlLmNvbmZpZy5sb2dvU3JjIHx8ICIiOyBjb25zdCBjb25zaWduZXMgPSBBcHBTdGF0ZS5wb2NoZXR0ZVRleHQuc3VydiB8fCAiIjsgbGV0IGh0bWwgPSAiIjsKICAgICAgICAgICAgICAgIGxldCBleGFtc1RvUHJpbnQgPSAoZXhhbUlkeCA9PT0gIkFMTCIpID8gQXBwU3RhdGUuZGlzdHJpYnV0aW9uRGF0YSA6IFtBcHBTdGF0ZS5kaXN0cmlidXRpb25EYXRhW2V4YW1JZHhdXTsKICAgICAgICAgICAgICAgIGV4YW1zVG9QcmludC5mb3JFYWNoKGV4YW1EYXRhID0+IHsKICAgICAgICAgICAgICAgICAgICBpZighZXhhbURhdGEpIHJldHVybjsKICAgICAgICAgICAgICAgICAgICBjb25zdCBleGFtSW5mbyA9IEFwcFN0YXRlLmVwcmV1dmVzW2V4YW1EYXRhLmV4YW1JZHhdOwogICAgICAgICAgICAgICAgICAgIGxldCByb29tc1RvUHJpbnQgPSAocm9vbUlkeCA9PT0gIkFMTCIgfHwgZXhhbUlkeCA9PT0gIkFMTCIpID8gZXhhbURhdGEucm9vbXMgOiBbZXhhbURhdGEucm9vbXNbcm9vbUlkeF1dOwogICAgICAgICAgICAgICAgICAgIHJvb21zVG9QcmludC5mb3JFYWNoKHJvb21EYXRhID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYocm9vbURhdGEuc3R1ZGVudHMubGVuZ3RoID09PSAwKSByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGlzVFQgPSByb29tRGF0YS5pc1RUOwogICAgICAgICAgICAgICAgICAgICAgICBsZXQgdGltZSA9IGlzVFQgPyBnZXRWYWx1ZShleGFtSW5mbywgWydIZXVyZSBkZSBkw6lidXQgdGllcnMgdGVtcHMnLCAnSGV1cmUgVFQnXSkgOiBnZXRWYWx1ZShleGFtSW5mbywgWydIZXVyZSBkZSBkw6lidXQnLCAnSGV1cmUnXSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCF0aW1lKSB0aW1lID0gZ2V0VmFsdWUoZXhhbUluZm8sIFsnSGV1cmUgZGUgZMOpYnV0JywgJ0hldXJlJ10pOwogICAgICAgICAgICAgICAgICAgICAgICBsZXQgZHVyYXRpb24gPSBpc1RUID8gZ2V0VmFsdWUoZXhhbUluZm8sIFsnRHVyw6llIGVuIG1pbnV0ZSB0aWVycyB0ZW1wcycsICdEdXLDqWUgVFQnXSkgOiBnZXRWYWx1ZShleGFtSW5mbywgWydEdXLDqWUgZW4gbWludXRlJywgJ0R1csOpZSddKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoIWR1cmF0aW9uKSBkdXJhdGlvbiA9IGdldFZhbHVlKGV4YW1JbmZvLCBbJ0R1csOpZSBlbiBtaW51dGUnLCAnRHVyw6llJ10pOwogICAgICAgICAgICAgICAgICAgICAgICBodG1sICs9IGA8ZGl2IGNsYXNzPSJwcmludC1wYWdlLWNvbnZvYyI+PGRpdiBjbGFzcz0icHJpbnQtaGVhZGVyIj48ZGl2IHN0eWxlPSJmb250LXNpemU6MS41cmVtOyBmb250LXdlaWdodDpib2xkOyI+UE9DSEVUVEUgU1VKRVQ8L2Rpdj4ke2xvZ28gPyBgPGltZyBzcmM9IiR7bG9nb30iIGNsYXNzPSJwcmludC1sb2dvIj5gIDogJyd9PC9kaXY+PGRpdiBzdHlsZT0iYm9yZGVyOjRweCBzb2xpZCAjMDAwOyBwYWRkaW5nOjIwcHg7IHRleHQtYWxpZ246Y2VudGVyOyBtYXJnaW46MzBweCAwOyI+PGgxIHN0eWxlPSJmb250LXNpemU6M3JlbTsgbWFyZ2luOjA7Ij4ke3Jvb21EYXRhLm5hbWV9PC9oMT48aDIgc3R5bGU9ImZvbnQtc2l6ZToycmVtOyBtYXJnaW46MTBweCAwOyI+JHtnZXRWYWx1ZShleGFtSW5mbyxbJ01hdGnDqHJlJywnRXByZXV2ZSddKX08L2gyPjxoMyBzdHlsZT0ibWFyZ2luOjA7Ij4ke3Jvb21EYXRhLnN0dWRlbnRzLmxlbmd0aH0gQ29waWVzPC9oMz48L2Rpdj48ZGl2IGNsYXNzPSJwcmludC1pbmZvcy1ib3giIHN0eWxlPSJmb250LXNpemU6MS4ycmVtOyI+PHN0cm9uZz5EYXRlIDo8L3N0cm9uZz4gJHtmb3JtYXREYXRlKGdldFZhbHVlKGV4YW1JbmZvLFsnRGF0ZSddKSl9PGJyPjxzdHJvbmc+SG9yYWlyZSA6PC9zdHJvbmc+ICR7dGltZX08YnI+PHN0cm9uZz5EdXLDqWUgOjwvc3Ryb25nPiAke2Zvcm1hdER1cmF0aW9uRGlzcGxheShkdXJhdGlvbil9PGJyPjxzdHJvbmc+U3VydmVpbGxhbnRzIDo8L3N0cm9uZz4gJHtyb29tRGF0YS5zdXJ2ZWlsbGFudHMuam9pbignIC8gJyl9PC9kaXY+PGRpdiBzdHlsZT0ibWFyZ2luLXRvcDoyMHB4OyBib3JkZXI6MXB4IHNvbGlkICMwMDA7IHBhZGRpbmc6MTVweDsgZmxleDoxOyI+PHN0cm9uZz5DT05TSUdORVMgQVVYIFNVUlZFSUxMQU5UUyA6PC9zdHJvbmc+PGJyPjxicj48ZGl2IHN0eWxlPSJ3aGl0ZS1zcGFjZTogcHJlLXdyYXA7Ij4ke2NvbnNpZ25lc308L2Rpdj48L2Rpdj48ZGl2IGNsYXNzPSJjb252b2MtZm9vdGVyIiBzdHlsZT0ianVzdGlmeS1jb250ZW50OiBmbGV4LWVuZDsiPjxkaXYgY2xhc3M9ImNvbnZvYy1zaWduIiBzdHlsZT0idGV4dC1hbGlnbjpyaWdodDsiPjxkaXY+RmFpdCDDoCAke0FwcFN0YXRlLmNvbnZvY1RleHQuY2l0eSB8fCAnVmlsbGUnfSwgbGUgJHtuZXcgRGF0ZSgpLnRvTG9jYWxlRGF0ZVN0cmluZygnZnItRlInKX08L2Rpdj48ZGl2IHN0eWxlPSJtYXJnaW4tdG9wOjEwcHg7IGZvbnQtd2VpZ2h0OmJvbGQ7Ij4ke0FwcFN0YXRlLmNvbmZpZy5uYW1lfTwvZGl2PjwvZGl2PjwvZGl2PjwvZGl2PmA7CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcmludC1hcmVhJykuaW5uZXJIVE1MID0gaHRtbDsgd2luZG93LnByaW50KCk7CiAgICAgICAgICAgIH0gY2F0Y2goZSl7IGNvbnNvbGUuZXJyb3IoZSk7IGFsZXJ0KCJFcnJldXIgaW1wcmVzc2lvbiBQb2NoZXR0ZSIpOyB9CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBmb3JtYXREYXRlKGQpIHsgaWYoIWQpIHJldHVybiAiIjsgaWYoIWlzTmFOKGQpICYmIGQgPiAxMDAwKSB7IGNvbnN0IGRhdGVPYmogPSBuZXcgRGF0ZSgoZCAtICgyNTU2NyArIDIpKSo4NjQwMCoxMDAwKTsgcmV0dXJuIGRhdGVPYmoudG9Mb2NhbGVEYXRlU3RyaW5nKCdmci1GUicpOyB9IHJldHVybiBkOyB9CiAgICAgICAgZnVuY3Rpb24gYXBwbHlMYXlvdXQodHlwZSl7IAogICAgICAgICAgICBpZih0eXBlID09PSAnc3RkJykgeyBjb25zdCBzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbnZvYy10ZW1wbGF0ZScpOyBzLnN0eWxlLnBhZGRpbmdUb3AgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2V0cy1zdGQtdG9wJykudmFsdWUgKyAnbW0nOyBzLnN0eWxlLnBhZGRpbmdCb3R0b20gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2V0cy1zdGQtYm90JykudmFsdWUgKyAnbW0nOyBzLnN0eWxlLmZvbnRTaXplID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NldHMtc3RkLWZvbnQnKS52YWx1ZSArICdweCc7IH0gCiAgICAgICAgICAgIGlmKHR5cGUgPT09ICdzdXJ2JykgeyBjb25zdCBzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbnZvYy1zdXJ2LXRlbXBsYXRlJyk7IHMuc3R5bGUucGFkZGluZ1RvcCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZXRzLXN1cnYtdG9wJykudmFsdWUgKyAnbW0nOyBzLnN0eWxlLnBhZGRpbmdCb3R0b20gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2V0cy1zdXJ2LWJvdCcpLnZhbHVlICsgJ21tJzsgcy5zdHlsZS5mb250U2l6ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZXRzLXN1cnYtZm9udCcpLnZhbHVlICsgJ3B4JzsgfSAKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIHVwZGF0ZVJlYWxUaW1lQ291bnRlcnMoKSB7CiAgICAgICAgICAgIGNvbnN0IGNhcmRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnJvb20tY2FyZCcpOwogICAgICAgICAgICBjYXJkcy5mb3JFYWNoKGNhcmQgPT4gewogICAgICAgICAgICAgICAgY29uc3QgYm9keSA9IGNhcmQucXVlcnlTZWxlY3RvcignLnJvb20tYm9keScpOwogICAgICAgICAgICAgICAgaWYoYm9keSkgewogICAgICAgICAgICAgICAgICAgICBjb25zdCBjb3VudCA9IGJvZHkuY2hpbGRyZW4ubGVuZ3RoOyBjb25zdCBjYXAgPSBib2R5LmdldEF0dHJpYnV0ZSgnZGF0YS1jYXBhY2l0eScpOwogICAgICAgICAgICAgICAgICAgICBjb25zdCBjb250YWluZXIgPSBjYXJkLnF1ZXJ5U2VsZWN0b3IoJy5yb29tLWhlYWRlci10b3AgZGl2IHNwYW4nKTsgaWYoY29udGFpbmVyKSBjb250YWluZXIuaW5uZXJUZXh0ID0gYCR7Y291bnR9LyR7Y2FwfWA7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgIH0KCiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2N1cnJlbnQtZGF0ZScpLmlubmVyVGV4dCA9IG5ldyBEYXRlKCkudG9Mb2NhbGVEYXRlU3RyaW5nKCdmci1GUicpOwogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjdXJyZW50LWRhdGUtc3VydicpLmlubmVyVGV4dCA9IG5ldyBEYXRlKCkudG9Mb2NhbGVEYXRlU3RyaW5nKCdmci1GUicpOwogICAgICAgIGNvbnN0IGRlZmF1bHRDb25zaWduZXMgPSBgLUluc3RhbGxlciBsZXMgw6lsw6h2ZXMgZGFucyBsZSBzaWxlbmNlXG4tRmFpcmUgw6l0ZWluZHJlIGxlcyB0w6lsw6lwaG9uZXMgZXQgbGVzIG1vbnRyZXMgY29ubmVjdMOpZXNcbi1GYWlyZSByYW5nZXIgbGVzIHNhY3Ncbi1Ww6lyaWZpZXIgbGVzIHBpw6hjZXMgZCdpZGVudGl0w6lcbi1BZmZpY2hlciBsZXMgaG9yYWlyZXMgYXUgdGFibGVhdVxuLURpc3RyaWJ1ZXIgbGVzIGNvcGllcyByZXRvdXJuw6llc1xuLUEgbGEgZmluIGRlIGwnw6lwcmV1dmUsIGxlcyDDqWzDqHZlcyByZXN0ZW50IMOgIGxldXIgcGxhY2Vcbi1TaWduYXR1cmUgw6ltYXJnZW1lbnRcbi1Db21wbMOpdGVyIGxlIHByb2PDqHMgdmVyYmFsXG4tRMOpcG9zZXIgdG91cyBsZXMgw6lsw6ltZW50cyBhdSBzZWNyw6l0YXJpYXRgOwogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0eHQtcG9jaGV0dGUtc3VydicpLnZhbHVlID0gZGVmYXVsdENvbnNpZ25lczsgQXBwU3RhdGUucG9jaGV0dGVUZXh0LnN1cnYgPSBkZWZhdWx0Q29uc2lnbmVzOwogICAgPC9zY3JpcHQ+Cgo8c2NyaXB0PgooZnVuY3Rpb24oKXsKICAgIGZ1bmN0aW9uIHBhdGNoVUkoKSB7CiAgICAgICAgdmFyIG5hbWVFbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb25maWdOYW1lJyk7CiAgICAgICAgdmFyIHJvbGVFbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb25maWdSb2xlJyk7CiAgICAgICAgaWYgKG5hbWVFbCkgeyB2YXIgZmcgPSBuYW1lRWwuY2xvc2VzdCgnLmZvcm0tZ3JvdXAnKTsgaWYoZmcpIGZnLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7IH0KICAgICAgICBpZiAocm9sZUVsKSB7IHZhciBmZyA9IHJvbGVFbC5jbG9zZXN0KCcuZm9ybS1ncm91cCcpOyBpZihmZykgZmcuc3R5bGUuZGlzcGxheSA9ICdub25lJzsgfQogICAgICAgIHZhciBjb2xzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnI3ZpZXcxIC5jb25maWctY29sJyk7CiAgICAgICAgaWYgKGNvbHMubGVuZ3RoID49IDIpIGNvbHNbMV0uc3R5bGUuZGlzcGxheSA9ICdub25lJzsKICAgICAgICB2YXIgaGVhZGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3ZpZXcxIC5oZWFkZXItcGFuZWwnKTsKICAgICAgICBpZiAoaGVhZGVyICYmICFkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGlsb3RlLW5vdGljZScpKSB7CiAgICAgICAgICAgIHZhciBkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgICAgICAgIGQuaWQgPSAncGlsb3RlLW5vdGljZSc7CiAgICAgICAgICAgIGQuc3R5bGUuY3NzVGV4dCA9ICdiYWNrZ3JvdW5kOiNlYWY0ZmU7Ym9yZGVyOjFweCBzb2xpZCAjMzQ5OGRiO2JvcmRlci1yYWRpdXM6OHB4O3BhZGRpbmc6MTBweCAxNnB4O21hcmdpbi1ib3R0b206MTVweDtmb250LXNpemU6MC44NXJlbTtjb2xvcjojMmMzZTUwO2Rpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXI7Z2FwOjEwcHg7JzsKICAgICAgICAgICAgZC5pbm5lckhUTUwgPSAnPGkgY2xhc3M9ImZhcyBmYS1pbmZvLWNpcmNsZSIgc3R5bGU9ImNvbG9yOiMzNDk4ZGI7Zm9udC1zaXplOjEuMXJlbTsiPjwvaT4gTm9tLCBmb25jdGlvbiwgbG9nbyBldCBzaWduYXR1cmUgc29udCBkYW5zIGxlIG1lbnUgPHN0cm9uZz5QYXJhbcOodHJlcyDimpk8L3N0cm9uZz4gZGUgbGEgYmFycmUgcHJpbmNpcGFsZS4nOwogICAgICAgICAgICBoZWFkZXIuYWZ0ZXIoZCk7CiAgICAgICAgfQogICAgfQogICAgc2V0VGltZW91dChwYXRjaFVJLCAxNTApOwogICAgc2V0VGltZW91dChwYXRjaFVJLCA2MDApOwoKICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgZnVuY3Rpb24oZSkgewogICAgICAgIGlmICghZS5kYXRhIHx8IGUuZGF0YS50eXBlICE9PSAncGlsb3RlLXNldHRpbmdzJykgcmV0dXJuOwogICAgICAgIHZhciBzID0gZS5kYXRhLmRhdGE7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgaWYgKHR5cGVvZiBBcHBTdGF0ZSAhPT0gJ3VuZGVmaW5lZCcpIHsKICAgICAgICAgICAgICAgIGlmIChzLm5hbWUpIHsgQXBwU3RhdGUuY29uZmlnLm5hbWUgPSBzLm5hbWU7IHZhciBlbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb25maWdOYW1lJyk7IGlmKGVsKSBlbC52YWx1ZSA9IHMubmFtZTsgfQogICAgICAgICAgICAgICAgaWYgKHMucm9sZSkgeyBBcHBTdGF0ZS5jb25maWcucm9sZSA9IHMucm9sZTsgdmFyIGVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbmZpZ1JvbGUnKTsgaWYoZWwpIGVsLnZhbHVlID0gcy5yb2xlOyB9CiAgICAgICAgICAgICAgICBpZiAocy5sb2dvU3JjKSB7IEFwcFN0YXRlLmNvbmZpZy5sb2dvU3JjID0gcy5sb2dvU3JjOyB2YXIgZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbG9nb1ByZXZpZXcnKTsgaWYoZWwpe2VsLnNyYz1zLmxvZ29TcmM7ZWwuc3R5bGUuZGlzcGxheT0nYmxvY2snO30gfQogICAgICAgICAgICAgICAgaWYgKHMuc2lnblNyYykgeyBBcHBTdGF0ZS5jb25maWcuc2lnblNyYyA9IHMuc2lnblNyYzsgdmFyIGVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NpZ25QcmV2aWV3Jyk7IGlmKGVsKXtlbC5zcmM9cy5zaWduU3JjO2VsLnN0eWxlLmRpc3BsYXk9J2Jsb2NrJzt9IH0KICAgICAgICAgICAgfQogICAgICAgIH0gY2F0Y2goZXJyKSB7fQogICAgfSk7CiAgICB3aW5kb3cucGFyZW50LnBvc3RNZXNzYWdlKHsgdHlwZTogJ3BpbG90ZS1tb2R1bGUtcmVhZHknLCBtb2R1bGU6ICdvcmFsJyB9LCAnKicpOwp9KSgpOwo8L3NjcmlwdD4KCgo8c2NyaXB0Pgpkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgZnVuY3Rpb24oZSkgewogICAgaWYgKCFlLmN0cmxLZXkgfHwgZS5zaGlmdEtleSB8fCBlLmFsdEtleSB8fCBlLm1ldGFLZXkpIHJldHVybjsKICAgIHZhciBrZXkgPSBlLmtleS50b0xvd2VyQ2FzZSgpOwogICAgaWYgKFsncCcsJ2UnLCdvJywnYScsJ2QnXS5pbmRleE9mKGtleSkgPj0gMCkgewogICAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgICB3aW5kb3cucGFyZW50LnBvc3RNZXNzYWdlKHt0eXBlOidwaWxvdGUtc2hvcnRjdXQnLCBrZXk6a2V5fSwgJyonKTsKICAgIH0KfSk7Cjwvc2NyaXB0Pgo8L2JvZHk+CjwvaHRtbD4=",
  "aed": "PCFET0NUWVBFIGh0bWw+CjxodG1sIGxhbmc9ImZyIj4KPGhlYWQ+CiAgICA8bWV0YSBjaGFyc2V0PSJVVEYtOCI+CiAgICA8bWV0YSBuYW1lPSJ2aWV3cG9ydCIgY29udGVudD0id2lkdGg9ZGV2aWNlLXdpZHRoLCBpbml0aWFsLXNjYWxlPTEuMCI+CiAgICA8dGl0bGU+QUVEIFBJTE9URSBCeSBTeWx2w6hyZSBNaWNoZWxldDwvdGl0bGU+CiAgICA8c2NyaXB0IHNyYz0iaHR0cHM6Ly9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMveGxzeC8wLjE4LjUveGxzeC5mdWxsLm1pbi5qcyI+PC9zY3JpcHQ+CiAgICA8bGluayByZWw9InN0eWxlc2hlZXQiIGhyZWY9Imh0dHBzOi8vY2RuanMuY2xvdWRmbGFyZS5jb20vYWpheC9saWJzL2ZvbnQtYXdlc29tZS82LjAuMC9jc3MvYWxsLm1pbi5jc3MiPgogICAgCiAgICA8c3R5bGU+CiAgICAgICAgOnJvb3QgewogICAgICAgICAgICAtLXByaW1hcnk6ICMyYzNlNTA7CiAgICAgICAgICAgIC0tc2Vjb25kYXJ5OiAjMzQ5OGRiOwogICAgICAgICAgICAtLWFjY2VudDogI2U3NGMzYzsKICAgICAgICAgICAgLS1zdWNjZXNzOiAjMjdhZTYwOwogICAgICAgICAgICAtLWJnOiAjZjBmMmY1OwogICAgICAgICAgICAtLXRleHQ6ICMzMzM7CiAgICAgICAgfQoKICAgICAgICBib2R5IHsgZm9udC1mYW1pbHk6ICdTZWdvZSBVSScsIHNhbnMtc2VyaWY7IGJhY2tncm91bmQtY29sb3I6IHZhcigtLWJnKTsgY29sb3I6IHZhcigtLXRleHQpOyBtYXJnaW46IDA7IHBhZGRpbmc6IDA7IGRpc3BsYXk6IGZsZXg7IGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47IGhlaWdodDogMTAwdmg7IH0KCiAgICAgICAgLyogLS0tIE5BVklHQVRJT04gLS0tICovCiAgICAgICAgbmF2IHsKICAgICAgICAgICAgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KDkwZGVnLCAjMWEyYTNhLCAjMmMzZTUwKTsKICAgICAgICAgICAgY29sb3I6IHdoaXRlOyBwYWRkaW5nOiAwIDE1cHg7IGhlaWdodDogNjBweDsKICAgICAgICAgICAgZGlzcGxheTogZmxleDsgYWxpZ24taXRlbXM6IGNlbnRlcjsganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOwogICAgICAgICAgICBib3gtc2hhZG93OiAwIDJweCA1cHggcmdiYSgwLDAsMCwwLjIpOyB6LWluZGV4OiAxMDA7CiAgICAgICAgfQogICAgICAgIC5uYXYtbGVmdCB7IGRpc3BsYXk6IGZsZXg7IGFsaWduLWl0ZW1zOiBjZW50ZXI7IGdhcDogMTVweDsgfQogICAgICAgIC5uYXYtdGl0bGUgeyBmb250LXNpemU6IDEuMXJlbTsgZm9udC13ZWlnaHQ6IGJvbGQ7IGxldHRlci1zcGFjaW5nOiAwLjVweDsgZGlzcGxheTogZmxleDsgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsgfQogICAgICAgIC5uYXYtc3VidGl0bGUgeyBmb250LXNpemU6IDAuN3JlbTsgY29sb3I6ICNiZGMzYzc7IGZvbnQtd2VpZ2h0OiBub3JtYWw7IH0KICAgICAgICAubmF2LWFjdGlvbnMgeyBkaXNwbGF5OiBmbGV4OyBnYXA6IDEwcHg7IG1hcmdpbi1yaWdodDogMjBweDsgYm9yZGVyLXJpZ2h0OiAxcHggc29saWQgcmdiYSgyNTUsMjU1LDI1NSwwLjIpOyBwYWRkaW5nLXJpZ2h0OiAyMHB4OyB9CiAgICAgICAgLmJ0bi1uYXYtYWN0aW9uIHsgYmFja2dyb3VuZDogcmdiYSgyNTUsMjU1LDI1NSwwLjEpOyBib3JkZXI6IDFweCBzb2xpZCByZ2JhKDI1NSwyNTUsMjU1LDAuMyk7IGNvbG9yOiB3aGl0ZTsgcGFkZGluZzogNXB4IDEwcHg7IGJvcmRlci1yYWRpdXM6IDRweDsgY3Vyc29yOiBwb2ludGVyOyBmb250LXNpemU6IDAuOHJlbTsgdHJhbnNpdGlvbjogMC4yczsgfQogICAgICAgIC5idG4tbmF2LWFjdGlvbjpob3ZlciB7IGJhY2tncm91bmQ6IHZhcigtLXNlY29uZGFyeSk7IGJvcmRlci1jb2xvcjogdmFyKC0tc2Vjb25kYXJ5KTsgfQogICAgICAgIC5idG4tZGFuZ2VyLW5hdiB7IGJhY2tncm91bmQ6IHJnYmEoMjMxLCA3NiwgNjAsIDAuMik7IGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWFjY2VudCk7IGNvbG9yOiAjZmZjY2NjOyB9CiAgICAgICAgLmJ0bi1kYW5nZXItbmF2OmhvdmVyIHsgYmFja2dyb3VuZDogdmFyKC0tYWNjZW50KTsgY29sb3I6IHdoaXRlOyB9CgogICAgICAgIC5uYXYtdGFicyB7IGRpc3BsYXk6IGZsZXg7IGdhcDogNXB4OyB9CiAgICAgICAgLnRhYi1idG4gewogICAgICAgICAgICBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDsgYm9yZGVyOiBub25lOyBjb2xvcjogI2JkYzNjNzsKICAgICAgICAgICAgcGFkZGluZzogMCAxNXB4OyBoZWlnaHQ6IDYwcHg7IGN1cnNvcjogcG9pbnRlcjsgZm9udC13ZWlnaHQ6IDYwMDsgZm9udC1zaXplOiAwLjk1cmVtOwogICAgICAgICAgICB0cmFuc2l0aW9uOiBhbGwgMC4yczsgYm9yZGVyLWJvdHRvbTogNHB4IHNvbGlkIHRyYW5zcGFyZW50OwogICAgICAgIH0KICAgICAgICAudGFiLWJ0bi5hY3RpdmUgeyBjb2xvcjogd2hpdGU7IGJvcmRlci1ib3R0b20tY29sb3I6IHZhcigtLXNlY29uZGFyeSk7IGJhY2tncm91bmQ6IHJnYmEoMCwwLDAsMC4xKTsgfQoKICAgICAgICAvKiAtLS0gTEFZT1VUIC0tLSAqLwogICAgICAgIG1haW4geyBmbGV4OiAxOyBvdmVyZmxvdzogaGlkZGVuOyBwb3NpdGlvbjogcmVsYXRpdmU7IH0KICAgICAgICAudmlldy1zZWN0aW9uIHsKICAgICAgICAgICAgcG9zaXRpb246IGFic29sdXRlOyB0b3A6IDA7IGxlZnQ6IDA7IHJpZ2h0OiAwOyBib3R0b206IDA7CiAgICAgICAgICAgIHBhZGRpbmc6IDIwcHg7IG92ZXJmbG93LXk6IGF1dG87IGRpc3BsYXk6IG5vbmU7CiAgICAgICAgfQogICAgICAgIC52aWV3LXNlY3Rpb24uYWN0aXZlIHsgZGlzcGxheTogYmxvY2s7IH0KCiAgICAgICAgLyogLS0tIFVJIENPTVBPTkVOVFMgLS0tICovCiAgICAgICAgLmNhcmQgeyBiYWNrZ3JvdW5kOiB3aGl0ZTsgcGFkZGluZzogMjBweDsgYm9yZGVyLXJhZGl1czogOHB4OyBib3gtc2hhZG93OiAwIDJweCA1cHggcmdiYSgwLDAsMCwwLjA1KTsgbWFyZ2luLWJvdHRvbTogMjBweDsgfQogICAgICAgIHNlbGVjdCwgaW5wdXRbdHlwZT10ZXh0XSwgaW5wdXRbdHlwZT1udW1iZXJdLCBpbnB1dFt0eXBlPXRpbWVdIHsgcGFkZGluZzogOHB4OyBib3JkZXI6IDFweCBzb2xpZCAjZGRkOyBib3JkZXItcmFkaXVzOiA0cHg7IH0KICAgICAgICAuYnRuIHsgYm9yZGVyOiBub25lOyBwYWRkaW5nOiA4cHggMTZweDsgYm9yZGVyLXJhZGl1czogNHB4OyBjdXJzb3I6IHBvaW50ZXI7IGZvbnQtd2VpZ2h0OiBib2xkOyB9CiAgICAgICAgLmJ0bi1wcmltYXJ5IHsgYmFja2dyb3VuZDogdmFyKC0tc2Vjb25kYXJ5KTsgY29sb3I6IHdoaXRlOyB9CiAgICAgICAgLmJ0bi1kYW5nZXIgeyBiYWNrZ3JvdW5kOiB2YXIoLS1hY2NlbnQpOyBjb2xvcjogd2hpdGU7IH0KICAgICAgICAKICAgICAgICAvKiAtLS0gTUVOVSAxIDogREFTSEJPQVJEIC0tLSAqLwogICAgICAgIC5pbXBvcnQtaGVhZGVyIHsgYmFja2dyb3VuZDogd2hpdGU7IHBhZGRpbmc6IDIwcHg7IGJvcmRlci1yYWRpdXM6IDhweDsgbWFyZ2luLWJvdHRvbTogMjBweDsgZGlzcGxheTogZmxleDsganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOyBhbGlnbi1pdGVtczogY2VudGVyOyBib3gtc2hhZG93OiAwIDJweCA1cHggcmdiYSgwLDAsMCwwLjA1KTsgfQogICAgICAgIC5kYXNoYm9hcmQtZ3JpZCB7IGRpc3BsYXk6IGdyaWQ7IGdyaWQtdGVtcGxhdGUtY29sdW1uczogcmVwZWF0KGF1dG8tZmlsbCwgbWlubWF4KDM1MHB4LCAxZnIpKTsgZ2FwOiAyMHB4OyB9CiAgICAgICAgLmFlZC1zdW1tYXJ5LWNhcmQgeyBiYWNrZ3JvdW5kOiB3aGl0ZTsgYm9yZGVyLXJhZGl1czogMTBweDsgb3ZlcmZsb3c6IGhpZGRlbjsgYm94LXNoYWRvdzogMCAzcHggNnB4IHJnYmEoMCwwLDAsMC4xKTsgYm9yZGVyLXRvcDogNXB4IHNvbGlkIHZhcigtLXNlY29uZGFyeSk7IGJyZWFrLWluc2lkZTogYXZvaWQ7IH0KICAgICAgICAuY2FyZC1oZWFkZXIgeyBwYWRkaW5nOiAxNXB4OyBib3JkZXItYm90dG9tOiAxcHggc29saWQgI2VlZTsgZGlzcGxheTogZmxleDsganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOyBhbGlnbi1pdGVtczogY2VudGVyOyBiYWNrZ3JvdW5kOiAjZjlmOWY5OyB9CiAgICAgICAgLmNhcmQtYm9keSB7IHBhZGRpbmc6IDE1cHg7IGZvbnQtc2l6ZTogMC45cmVtOyB9CiAgICAgICAgLnN0YXQtcm93IHsgZGlzcGxheTogZmxleDsganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOyBtYXJnaW4tYm90dG9tOiA4cHg7IHBhZGRpbmctYm90dG9tOiA4cHg7IGJvcmRlci1ib3R0b206IDFweCBkYXNoZWQgI2VlZTsgfQogICAgICAgIC5jb25zdHJhaW50cy1ib3ggeyBtYXJnaW4tdG9wOiAxMHB4OyBiYWNrZ3JvdW5kOiAjZmZmNWY1OyBjb2xvcjogI2MwMzkyYjsgcGFkZGluZzogOHB4OyBib3JkZXItcmFkaXVzOiA0cHg7IGZvbnQtc2l6ZTogMC44NXJlbTsgfQoKICAgICAgICAvKiBCYWRnZSBwb3VyIHF1b3RpdMOpIG5vbi1zdGFuZGFyZCAqLwogICAgICAgIC5iYWRnZS1jdXN0b20geyBiYWNrZ3JvdW5kOiAjZTc0YzNjICFpbXBvcnRhbnQ7IH0KICAgICAgICAuYmFkZ2Utc3RhbmRhcmQgeyBiYWNrZ3JvdW5kOiB2YXIoLS1zZWNvbmRhcnkpOyB9CgogICAgICAgIC8qIC0tLSBNRU5VIDIgOiBQTEFOTklORyAtLS0gKi8KICAgICAgICAucGxhbm5lci10b29sYmFyIHsKICAgICAgICAgICAgYmFja2dyb3VuZDogd2hpdGU7IHBhZGRpbmc6IDEwcHggMTVweDsgYm9yZGVyLXJhZGl1czogOHB4OyBtYXJnaW4tYm90dG9tOiAxMHB4OwogICAgICAgICAgICBkaXNwbGF5OiBmbGV4OyBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47IGFsaWduLWl0ZW1zOiBjZW50ZXI7IGdhcDogMTBweDsKICAgICAgICAgICAgYm94LXNoYWRvdzogMCAxcHggM3B4IHJnYmEoMCwwLDAsMC4xKTsgZmxleC13cmFwOiB3cmFwOwogICAgICAgIH0KICAgICAgICAKICAgICAgICAucGFsZXR0ZSB7IGRpc3BsYXk6IGZsZXg7IGdhcDogOHB4OyBmbGV4LXdyYXA6IHdyYXA7IGFsaWduLWl0ZW1zOiBjZW50ZXI7IH0KICAgICAgICAucGFsZXR0ZS1idG4gewogICAgICAgICAgICBwYWRkaW5nOiA4cHggMTJweDsgYm9yZGVyLXJhZGl1czogNHB4OyBjdXJzb3I6IHBvaW50ZXI7IGNvbG9yOiB3aGl0ZTsgZm9udC1zaXplOiAwLjg1cmVtOyBmb250LXdlaWdodDogYm9sZDsKICAgICAgICAgICAgYm9yZGVyOiAycHggc29saWQgd2hpdGU7IGJveC1zaGFkb3c6IDAgMnB4IDRweCByZ2JhKDAsMCwwLDAuMSk7IHRleHQtc2hhZG93OiAwIDFweCAxcHggcmdiYSgwLDAsMCwwLjIpOwogICAgICAgIH0KICAgICAgICAucGFsZXR0ZS1idG46aG92ZXIgeyB0cmFuc2Zvcm06IHNjYWxlKDEuMDUpOyB9CiAgICAgICAgLnBhbGV0dGUtYnRuLnNlbGVjdGVkIHsgYm9yZGVyLWNvbG9yOiAjMzMzOyB0cmFuc2Zvcm06IHNjYWxlKDEuMSk7IGJveC1zaGFkb3c6IDAgNHB4IDhweCByZ2JhKDAsMCwwLDAuMik7IH0KCiAgICAgICAgLyogQ09VTEVVUlMgKi8KICAgICAgICAuYmctZ3JpbGxlIHsgYmFja2dyb3VuZC1jb2xvcjogI2ZmMDBmZjsgfSAKICAgICAgICAuYmctYWRtaW4geyBiYWNrZ3JvdW5kLWNvbG9yOiAjMDBiODk0OyB9IAogICAgICAgIC5iZy1ldHVkZSB7IGJhY2tncm91bmQtY29sb3I6ICM4ZTQ0YWQ7IH0gCiAgICAgICAgLmJnLXNlbGYgeyBiYWNrZ3JvdW5kLWNvbG9yOiAjZTY3ZTIyOyB9IAogICAgICAgIC5iZy1jb3Vsb2lycyB7IGJhY2tncm91bmQtY29sb3I6ICNmMWM0MGY7IGNvbG9yOiAjMzMzOyB0ZXh0LXNoYWRvdzogbm9uZTsgfQogICAgICAgIC5iZy1jb3VyIHsgYmFja2dyb3VuZC1jb2xvcjogI2Q2MzAzMTsgfSAKICAgICAgICAuYmctc3VpdmkgeyBiYWNrZ3JvdW5kLWNvbG9yOiAjMjdhZTYwOyB9IAogICAgICAgIC5iZy1lcmFzZXIgeyBiYWNrZ3JvdW5kLWNvbG9yOiAjZGZlNmU5OyBjb2xvcjogIzYzNmU3MjsgdGV4dC1zaGFkb3c6IG5vbmU7IGJvcmRlcjogMXB4IHNvbGlkICNiMmJlYzM7IH0KCiAgICAgICAgLyogU2VydmljZXMgZHluYW1pcXVlcyAqLwogICAgICAgIC5idG4tYWRkLXNlcnZpY2UgeyAKICAgICAgICAgICAgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KDEzNWRlZywgIzY2N2VlYSAwJSwgIzc2NGJhMiAxMDAlKTsgCiAgICAgICAgICAgIGJvcmRlcjogMnB4IGRhc2hlZCB3aGl0ZTsgCiAgICAgICAgICAgIGZvbnQtc2l6ZTogMS4ycmVtOyAKICAgICAgICAgICAgcGFkZGluZzogOHB4IDE0cHg7CiAgICAgICAgfQogICAgICAgIC5idG4tYWRkLXNlcnZpY2U6aG92ZXIgeyB0cmFuc2Zvcm06IHNjYWxlKDEuMSk7IH0KICAgICAgICAKICAgICAgICAuc2VydmljZS1kZWxldGUgeyAKICAgICAgICAgICAgcG9zaXRpb246IGFic29sdXRlOyB0b3A6IC02cHg7IHJpZ2h0OiAtNnB4OyAKICAgICAgICAgICAgYmFja2dyb3VuZDogI2U3NGMzYzsgY29sb3I6IHdoaXRlOyAKICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNTAlOyB3aWR0aDogMTZweDsgaGVpZ2h0OiAxNnB4OyAKICAgICAgICAgICAgZm9udC1zaXplOiAxMHB4OyBjdXJzb3I6IHBvaW50ZXI7IAogICAgICAgICAgICBkaXNwbGF5OiBub25lOyBhbGlnbi1pdGVtczogY2VudGVyOyBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsKICAgICAgICAgICAgYm9yZGVyOiBub25lOyBsaW5lLWhlaWdodDogMTsKICAgICAgICB9CiAgICAgICAgLnBhbGV0dGUtYnRuLXdyYXBwZXIgeyBwb3NpdGlvbjogcmVsYXRpdmU7IGRpc3BsYXk6IGlubGluZS1ibG9jazsgfQogICAgICAgIC5wYWxldHRlLWJ0bi13cmFwcGVyOmhvdmVyIC5zZXJ2aWNlLWRlbGV0ZSB7IGRpc3BsYXk6IGZsZXg7IH0KICAgICAgICAKICAgICAgICAvKiBNb2RhbCBwb3VyIGFqb3V0ZXIgdW4gc2VydmljZSBldCBjb25maWcgKi8KICAgICAgICAubW9kYWwtb3ZlcmxheSB7CiAgICAgICAgICAgIHBvc2l0aW9uOiBmaXhlZDsgdG9wOiAwOyBsZWZ0OiAwOyByaWdodDogMDsgYm90dG9tOiAwOwogICAgICAgICAgICBiYWNrZ3JvdW5kOiByZ2JhKDAsMCwwLDAuNSk7IGRpc3BsYXk6IG5vbmU7IAogICAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyOyBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsgei1pbmRleDogMTAwMDsKICAgICAgICB9CiAgICAgICAgLm1vZGFsLW92ZXJsYXkuYWN0aXZlIHsgZGlzcGxheTogZmxleDsgfQogICAgICAgIC5tb2RhbC1ib3ggewogICAgICAgICAgICBiYWNrZ3JvdW5kOiB3aGl0ZTsgcGFkZGluZzogMjVweDsgYm9yZGVyLXJhZGl1czogMTJweDsKICAgICAgICAgICAgYm94LXNoYWRvdzogMCAxMHB4IDQwcHggcmdiYSgwLDAsMCwwLjMpOyBtaW4td2lkdGg6IDM1MHB4OwogICAgICAgICAgICBtYXgtd2lkdGg6IDUwMHB4OwogICAgICAgIH0KICAgICAgICAubW9kYWwtYm94IGgzIHsgbWFyZ2luLXRvcDogMDsgY29sb3I6IHZhcigtLXByaW1hcnkpOyBib3JkZXItYm90dG9tOiAycHggc29saWQgdmFyKC0tc2Vjb25kYXJ5KTsgcGFkZGluZy1ib3R0b206IDEwcHg7IH0KICAgICAgICAubW9kYWwtYm94IGxhYmVsIHsgZGlzcGxheTogYmxvY2s7IG1hcmdpbi1ib3R0b206IDVweDsgZm9udC13ZWlnaHQ6IGJvbGQ7IGNvbG9yOiAjNTU1OyB9CiAgICAgICAgLm1vZGFsLWJveCBpbnB1dFt0eXBlPSJ0ZXh0Il0sIC5tb2RhbC1ib3ggaW5wdXRbdHlwZT0ibnVtYmVyIl0geyB3aWR0aDogMTAwJTsgcGFkZGluZzogMTBweDsgbWFyZ2luLWJvdHRvbTogMTVweDsgYm94LXNpemluZzogYm9yZGVyLWJveDsgfQogICAgICAgIC5tb2RhbC1ib3ggaW5wdXRbdHlwZT0iY29sb3IiXSB7IHdpZHRoOiAxMDAlOyBoZWlnaHQ6IDUwcHg7IHBhZGRpbmc6IDA7IGJvcmRlcjogbm9uZTsgY3Vyc29yOiBwb2ludGVyOyBtYXJnaW4tYm90dG9tOiAxNXB4OyB9CiAgICAgICAgLm1vZGFsLWFjdGlvbnMgeyBkaXNwbGF5OiBmbGV4OyBnYXA6IDEwcHg7IGp1c3RpZnktY29udGVudDogZmxleC1lbmQ7IG1hcmdpbi10b3A6IDIwcHg7IH0KICAgICAgICAubW9kYWwtYWN0aW9ucyBidXR0b24geyBwYWRkaW5nOiAxMHB4IDIwcHg7IGJvcmRlcjogbm9uZTsgYm9yZGVyLXJhZGl1czogNnB4OyBjdXJzb3I6IHBvaW50ZXI7IGZvbnQtd2VpZ2h0OiBib2xkOyB9CiAgICAgICAgLmJ0bi1jYW5jZWwgeyBiYWNrZ3JvdW5kOiAjYmRjM2M3OyBjb2xvcjogIzJjM2U1MDsgfQogICAgICAgIC5idG4tY29uZmlybSB7IGJhY2tncm91bmQ6IHZhcigtLXNlY29uZGFyeSk7IGNvbG9yOiB3aGl0ZTsgfQogICAgICAgIC5jb2xvci1wcmVzZXRzIHsgZGlzcGxheTogZmxleDsgZ2FwOiA4cHg7IGZsZXgtd3JhcDogd3JhcDsgbWFyZ2luLWJvdHRvbTogMTVweDsgfQogICAgICAgIC5jb2xvci1wcmVzZXQgeyAKICAgICAgICAgICAgd2lkdGg6IDMwcHg7IGhlaWdodDogMzBweDsgYm9yZGVyLXJhZGl1czogNnB4OyBjdXJzb3I6IHBvaW50ZXI7IAogICAgICAgICAgICBib3JkZXI6IDJweCBzb2xpZCB0cmFuc3BhcmVudDsgdHJhbnNpdGlvbjogMC4yczsKICAgICAgICB9CiAgICAgICAgLmNvbG9yLXByZXNldDpob3ZlciB7IHRyYW5zZm9ybTogc2NhbGUoMS4xKTsgYm9yZGVyLWNvbG9yOiAjMzMzOyB9CiAgICAgICAgLnByZXZpZXctYnRuIHsgCiAgICAgICAgICAgIHBhZGRpbmc6IDEwcHggMjBweDsgYm9yZGVyLXJhZGl1czogNnB4OyBjb2xvcjogd2hpdGU7IGZvbnQtd2VpZ2h0OiBib2xkOyAKICAgICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyOyBtYXJnaW46IDE1cHggMDsgdGV4dC10cmFuc2Zvcm06IHVwcGVyY2FzZTsKICAgICAgICB9CgogICAgICAgIC8qIExpc3RlIGRlIHNsb3RzIHBvdXIgbGEgY29uZmlnICovCiAgICAgICAgLnNsb3QtbGlzdCB7CiAgICAgICAgICAgIG1heC1oZWlnaHQ6IDMwMHB4OyBvdmVyZmxvdy15OiBhdXRvOyBib3JkZXI6IDFweCBzb2xpZCAjZWVlOyBib3JkZXItcmFkaXVzOiA0cHg7IHBhZGRpbmc6IDEwcHg7IG1hcmdpbi1ib3R0b206IDE1cHg7CiAgICAgICAgfQogICAgICAgIC5zbG90LWl0ZW0gewogICAgICAgICAgICBkaXNwbGF5OiBmbGV4OyBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47IGFsaWduLWl0ZW1zOiBjZW50ZXI7IAogICAgICAgICAgICBwYWRkaW5nOiA4cHg7IGJhY2tncm91bmQ6ICNmOWY5Zjk7IG1hcmdpbi1ib3R0b206IDVweDsgYm9yZGVyLXJhZGl1czogNHB4OyBib3JkZXItbGVmdDogM3B4IHNvbGlkIHZhcigtLXNlY29uZGFyeSk7CiAgICAgICAgfQogICAgICAgIC5zbG90LWlucHV0cyB7IGRpc3BsYXk6IGZsZXg7IGdhcDogMTBweDsgbWFyZ2luLWJvdHRvbTogMTBweDsgYWxpZ24taXRlbXM6IGZsZXgtZW5kOyB9CgogICAgICAgIC5lZHQtY29udGFpbmVyIHsgYmFja2dyb3VuZDogd2hpdGU7IHBhZGRpbmc6IDE1cHg7IGJvcmRlci1yYWRpdXM6IDhweDsgb3ZlcmZsb3cteDogYXV0bzsgbWluLWhlaWdodDogNTAwcHg7IH0KICAgICAgICAKICAgICAgICAvKiBUQUJMRUFVIFNUQUJJTElTw4kgKi8KICAgICAgICAuZWR0LXRhYmxlIHsgd2lkdGg6IDEwMCU7IGJvcmRlci1jb2xsYXBzZTogY29sbGFwc2U7IHRhYmxlLWxheW91dDogZml4ZWQ7IH0KICAgICAgICAuZWR0LXRhYmxlIHRoIHsgYmFja2dyb3VuZDogdmFyKC0tcHJpbWFyeSk7IGNvbG9yOiB3aGl0ZTsgcGFkZGluZzogMTBweDsgdGV4dC1hbGlnbjogY2VudGVyOyBib3JkZXI6IDFweCBzb2xpZCAjMzQ0OTVlOyB9CiAgICAgICAgLmVkdC10YWJsZSB0ZCB7IAogICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCAjY2NjOyBoZWlnaHQ6IDQwcHg7IHdpZHRoOiAxOCU7IHBhZGRpbmc6IDA7IHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7IG92ZXJmbG93OiBoaWRkZW47CiAgICAgICAgfQogICAgICAgIC5lZHQtdGFibGUgdGQudGltZS1jb2wgeyAKICAgICAgICAgICAgYmFja2dyb3VuZDogI2YxZjJmNjsgY29sb3I6ICMyYzNlNTA7IGZvbnQtd2VpZ2h0OiBib2xkOyB3aWR0aDogOTBweCAhaW1wb3J0YW50OyBib3JkZXItcmlnaHQ6IDJweCBzb2xpZCAjYmRjM2M3OyAKICAgICAgICAgICAgZm9udC1zaXplOiAwLjc1cmVtOyB0ZXh0LWFsaWduOiBjZW50ZXI7CiAgICAgICAgfQoKICAgICAgICAuY2VsbC1jb250ZW50IHsKICAgICAgICAgICAgd2lkdGg6IDEwMCU7IGhlaWdodDogMTAwJTsgZGlzcGxheTogZmxleDsgYWxpZ24taXRlbXM6IGNlbnRlcjsganVzdGlmeS1jb250ZW50OiBjZW50ZXI7CiAgICAgICAgICAgIGZvbnQtc2l6ZTogMC43NXJlbTsgZm9udC13ZWlnaHQ6IDgwMDsgdGV4dC10cmFuc2Zvcm06IHVwcGVyY2FzZTsgCiAgICAgICAgICAgIHdoaXRlLXNwYWNlOiBub3dyYXA7IG92ZXJmbG93OiBoaWRkZW47IHRleHQtb3ZlcmZsb3c6IGVsbGlwc2lzOyBjb2xvcjogd2hpdGU7CiAgICAgICAgfQogICAgICAgIC5jZWxsLWluYWN0aXZlIHsgYmFja2dyb3VuZDogI2Y5ZjlmOTsgY3Vyc29yOiBub3QtYWxsb3dlZDsgfQogICAgICAgIC5jZWxsLWJsb2NrZWQgeyBiYWNrZ3JvdW5kOiByZXBlYXRpbmctbGluZWFyLWdyYWRpZW50KDQ1ZGVnLCAjZTBlMGUwLCAjZTBlMGUwIDEwcHgsICNlY2YwZjEgMTBweCwgI2VjZjBmMSAyMHB4KTsgaGVpZ2h0OiAxMDAlOyB9CgogICAgICAgIC8qIC0tLSBNRU5VIDMgOiBHRVNUSU9OIC0tLSAqLwogICAgICAgIC5nZXN0aW9uLWdyaWQgeyBkaXNwbGF5OiBncmlkOyBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IDFmciAyZnI7IGdhcDogMjBweDsgfQogICAgICAgIC5zdGF0cy1yb3cgeyBkaXNwbGF5OiBmbGV4OyBnYXA6IDE1cHg7IG1hcmdpbi1ib3R0b206IDIwcHg7IH0KICAgICAgICAuYmFsYW5jZS1ib3ggeyAKICAgICAgICAgICAgZmxleDogMTsgdGV4dC1hbGlnbjogY2VudGVyOyBwYWRkaW5nOiAyMHB4OyBiYWNrZ3JvdW5kOiB2YXIoLS1wcmltYXJ5KTsgY29sb3I6IHdoaXRlOyBib3JkZXItcmFkaXVzOiA4cHg7IAogICAgICAgICAgICBkaXNwbGF5OiBmbGV4OyBmbGV4LWRpcmVjdGlvbjogY29sdW1uOyBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsKICAgICAgICB9CiAgICAgICAgLmJhbGFuY2UtYm94LnNlY29uZGFyeSB7IGJhY2tncm91bmQ6ICM4ZTQ0YWQ7IH0KICAgICAgICAuYmFsYW5jZS1hbW91bnQgeyBmb250LXNpemU6IDJyZW07IGZvbnQtd2VpZ2h0OiBib2xkOyBtYXJnaW46IDEwcHggMDsgfQogICAgICAgIC5oaXN0b3J5LXRhYmxlIHsgd2lkdGg6IDEwMCU7IGJvcmRlci1jb2xsYXBzZTogY29sbGFwc2U7IH0KICAgICAgICAuaGlzdG9yeS10YWJsZSB0aCB7IHRleHQtYWxpZ246IGxlZnQ7IHBhZGRpbmc6IDEwcHg7IGJvcmRlci1ib3R0b206IDJweCBzb2xpZCAjZWVlOyBiYWNrZ3JvdW5kOiAjZjlmOWY5OyB9CiAgICAgICAgLmhpc3RvcnktdGFibGUgdGQgeyBwYWRkaW5nOiAxMHB4OyBib3JkZXItYm90dG9tOiAxcHggc29saWQgI2VlZTsgfQoKICAgICAgICAvKiAtLS0gTUVOVSA0IDogUkVQQVJUSVRJT04gKFFVSSBGQUlUIFFVT0kpIC0tLSAqLwogICAgICAgIC5yZXBhcnRpdGlvbi10b29sYmFyIHsKICAgICAgICAgICAgYmFja2dyb3VuZDogd2hpdGU7IHBhZGRpbmc6IDE1cHg7IGJvcmRlci1yYWRpdXM6IDhweDsgbWFyZ2luLWJvdHRvbTogMTVweDsKICAgICAgICAgICAgZGlzcGxheTogZmxleDsganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOyBhbGlnbi1pdGVtczogY2VudGVyOyBib3gtc2hhZG93OiAwIDFweCAzcHggcmdiYSgwLDAsMCwwLjEpOwogICAgICAgIH0KICAgICAgICAucmVwYXJ0aXRpb24tdGFibGUgeyB3aWR0aDogMTAwJTsgYm9yZGVyLWNvbGxhcHNlOiBjb2xsYXBzZTsgdGFibGUtbGF5b3V0OiBhdXRvOyB9CiAgICAgICAgLnJlcGFydGl0aW9uLXRhYmxlIHRoIHsgYmFja2dyb3VuZDogdmFyKC0tcHJpbWFyeSk7IGNvbG9yOiB3aGl0ZTsgcGFkZGluZzogMTJweDsgYm9yZGVyOiAxcHggc29saWQgIzM0NDk1ZTsgZm9udC1zaXplOiAwLjlyZW07IHBvc2l0aW9uOiBzdGlja3k7IHRvcDogMDsgfQogICAgICAgIC5yZXBhcnRpdGlvbi10YWJsZSB0ZCB7IGJvcmRlcjogMXB4IHNvbGlkICNjY2M7IHBhZGRpbmc6IDhweDsgdmVydGljYWwtYWxpZ246IG1pZGRsZTsgYmFja2dyb3VuZDogd2hpdGU7IGZvbnQtc2l6ZTogMC44NXJlbTsgaGVpZ2h0OiBhdXRvOyB9CiAgICAgICAgLnJlcGFydGl0aW9uLXRhYmxlIHRyOm50aC1jaGlsZChldmVuKSB0ZCB7IGJhY2tncm91bmQtY29sb3I6ICNmOGY5ZmE7IH0KICAgICAgICAuYWdlbnQtdGFnIHsKICAgICAgICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrOyBwYWRkaW5nOiAzcHggOHB4OyBtYXJnaW46IDJweDsKICAgICAgICAgICAgYmFja2dyb3VuZDogI2VjZjBmMTsgYm9yZGVyLXJhZGl1czogMTJweDsgYm9yZGVyOiAxcHggc29saWQgI2JkYzNjNzsKICAgICAgICAgICAgZm9udC13ZWlnaHQ6IDYwMDsgY29sb3I6ICMyYzNlNTA7IGZvbnQtc2l6ZTogMC44cmVtOwogICAgICAgIH0KCiAgICAgICAgLyogLS0tIE1FTlUgNSA6IEVOIERJUkVDVCAoTk9VVkVBVSkgLS0tICovCiAgICAgICAgLmxpdmUtaGVhZGVyIHsKICAgICAgICAgICAgYmFja2dyb3VuZDogIzJjM2U1MDsgY29sb3I6IHdoaXRlOyBwYWRkaW5nOiAzMHB4OyBib3JkZXItcmFkaXVzOiAxMHB4OwogICAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7IG1hcmdpbi1ib3R0b206IDMwcHg7IGJveC1zaGFkb3c6IDAgNXB4IDE1cHggcmdiYSgwLDAsMCwwLjIpOwogICAgICAgIH0KICAgICAgICAuY2xvY2stdGltZSB7IGZvbnQtc2l6ZTogM3JlbTsgZm9udC13ZWlnaHQ6IDgwMDsgZm9udC1mYW1pbHk6ICdTZWdvZSBVSSBNb25vJywgbW9ub3NwYWNlOyB9CiAgICAgICAgLmNsb2NrLWRheSB7IGZvbnQtc2l6ZTogMS41cmVtOyBjb2xvcjogIzM0OThkYjsgbWFyZ2luLWJvdHRvbTogNXB4OyB0ZXh0LXRyYW5zZm9ybTogdXBwZXJjYXNlOyBsZXR0ZXItc3BhY2luZzogMnB4OyB9CiAgICAgICAgCiAgICAgICAgLmxpdmUtZ3JpZCB7IGRpc3BsYXk6IGdyaWQ7IGdyaWQtdGVtcGxhdGUtY29sdW1uczogcmVwZWF0KGF1dG8tZmlsbCwgbWlubWF4KDI4MHB4LCAxZnIpKTsgZ2FwOiAyMHB4OyB9CiAgICAgICAgLmxpdmUtY2FyZCB7CiAgICAgICAgICAgIGJhY2tncm91bmQ6IHdoaXRlOyBib3JkZXItcmFkaXVzOiAxMHB4OyBvdmVyZmxvdzogaGlkZGVuOwogICAgICAgICAgICBib3gtc2hhZG93OiAwIDNweCA2cHggcmdiYSgwLDAsMCwwLjEpOwogICAgICAgICAgICB0cmFuc2l0aW9uOiB0cmFuc2Zvcm0gMC4yczsKICAgICAgICAgICAgYm9yZGVyLWxlZnQ6IDVweCBzb2xpZCAjY2NjOwogICAgICAgIH0KICAgICAgICAubGl2ZS1jYXJkLmFjdGl2ZSB7IHRyYW5zZm9ybTogdHJhbnNsYXRlWSgtNXB4KTsgYm94LXNoYWRvdzogMCA4cHggMTVweCByZ2JhKDAsMCwwLDAuMTUpOyBib3JkZXItbGVmdC1jb2xvcjogdmFyKC0tc3VjY2Vzcyk7IH0KICAgICAgICAubGl2ZS1jYXJkLWJvZHkgeyBwYWRkaW5nOiAyMHB4OyB9CiAgICAgICAgLmxpdmUtYWdlbnQtbmFtZSB7IGZvbnQtc2l6ZTogMS4ycmVtOyBmb250LXdlaWdodDogYm9sZDsgbWFyZ2luLWJvdHRvbTogMTBweDsgY29sb3I6IHZhcigtLXByaW1hcnkpOyB9CiAgICAgICAgLmxpdmUtc3RhdHVzIHsgCiAgICAgICAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jazsgcGFkZGluZzogNXB4IDEwcHg7IGJvcmRlci1yYWRpdXM6IDRweDsgCiAgICAgICAgICAgIGZvbnQtc2l6ZTogMC45cmVtOyBmb250LXdlaWdodDogYm9sZDsgdGV4dC10cmFuc2Zvcm06IHVwcGVyY2FzZTsKICAgICAgICB9CiAgICAgICAgLnNlY3Rpb24tdGl0bGUgeyBtYXJnaW46IDMwcHggMCAxNXB4IDA7IGNvbG9yOiAjN2Y4YzhkOyBmb250LXNpemU6IDFyZW07IGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjY2NjOyBwYWRkaW5nLWJvdHRvbTogNXB4OyB9CgogICAgICAgIC8qIElNUE9SVCBJTkZPICovCiAgICAgICAgLmltcG9ydC1pbmZvIHsgCiAgICAgICAgICAgIGJhY2tncm91bmQ6ICNlOGY0ZmQ7IGJvcmRlcjogMXB4IHNvbGlkICMzNDk4ZGI7IGJvcmRlci1yYWRpdXM6IDhweDsgCiAgICAgICAgICAgIHBhZGRpbmc6IDE1cHg7IG1hcmdpbi1ib3R0b206IDIwcHg7IGZvbnQtc2l6ZTogMC45cmVtOyAKICAgICAgICB9CiAgICAgICAgLmltcG9ydC1pbmZvIHN0cm9uZyB7IGNvbG9yOiB2YXIoLS1wcmltYXJ5KTsgfQogICAgICAgIC5xdW90aXRlLWxpc3QgeyBkaXNwbGF5OiBmbGV4OyBnYXA6IDE1cHg7IGZsZXgtd3JhcDogd3JhcDsgbWFyZ2luLXRvcDogMTBweDsgfQogICAgICAgIC5xdW90aXRlLWl0ZW0geyBiYWNrZ3JvdW5kOiB3aGl0ZTsgcGFkZGluZzogNXB4IDEwcHg7IGJvcmRlci1yYWRpdXM6IDRweDsgZm9udC1zaXplOiAwLjg1cmVtOyB9CgogICAgICAgIC8qIFpPTkVTIEQnSU1QUkVTU0lPTiAoQ2FjaMOpZXMgcGFyIGTDqWZhdXQpICovCiAgICAgICAgI2JhdGNoLXByaW50LWFyZWEsICNkYXNoYm9hcmQtcHJpbnQtYXJlYSwgI2dlc3Rpb24tcHJpbnQtYXJlYSwgI3JlcGFydGl0aW9uLXByaW50LWFyZWEgeyBkaXNwbGF5OiBub25lOyB9CgogICAgICAgIC8qIC0tLSBQUklOVCBDU1MgT1BUSU1JU8OJIFBBWVNBR0UgKExBTkRTQ0FQRSkgLS0tICovCiAgICAgICAgQG1lZGlhIHByaW50IHsKICAgICAgICAgICAgQHBhZ2UgewogICAgICAgICAgICAgICAgc2l6ZTogQTQgbGFuZHNjYXBlOwogICAgICAgICAgICAgICAgbWFyZ2luOiA1bW07IC8qIE1hcmdlcyByw6lkdWl0ZXMgcG91ciBtYXhpbWlzZXIgbCdlc3BhY2UgKi8KICAgICAgICAgICAgfQoKICAgICAgICAgICAgYm9keSB7IAogICAgICAgICAgICAgICAgLXdlYmtpdC1wcmludC1jb2xvci1hZGp1c3Q6IGV4YWN0ICFpbXBvcnRhbnQ7IAogICAgICAgICAgICAgICAgcHJpbnQtY29sb3ItYWRqdXN0OiBleGFjdCAhaW1wb3J0YW50OyAKICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6IHdoaXRlOyBtYXJnaW46IDA7IHBhZGRpbmc6IDA7IAogICAgICAgICAgICAgICAgd2lkdGg6IDEwMCU7CiAgICAgICAgICAgICAgICBmb250LWZhbWlseTogJ1NlZ29lIFVJJywgc2Fucy1zZXJpZjsKICAgICAgICAgICAgfQogICAgICAgICAgICAKICAgICAgICAgICAgbmF2LCAucGxhbm5lci10b29sYmFyLCAuaW1wb3J0LWhlYWRlciwgLm5hdi1hY3Rpb25zLCAudGFiLWJ0biwgLmltcG9ydC1pbmZvLCAucmVwYXJ0aXRpb24tdG9vbGJhciB7IGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDsgfQogICAgICAgICAgICAKICAgICAgICAgICAgYm9keTpub3QoLnByaW50aW5nLW1vZGUpIC52aWV3LXNlY3Rpb24geyBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7IH0KCiAgICAgICAgICAgIC8qIEhlYWRlciBkJ2ltcHJlc3Npb24gY29tbXVuICovCiAgICAgICAgICAgIC5wcmludC1oZWFkZXItYmF0Y2ggeyAKICAgICAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjsgCiAgICAgICAgICAgICAgICBmb250LXNpemU6IDEuMnJlbTsgCiAgICAgICAgICAgICAgICBmb250LXdlaWdodDogYm9sZDsKICAgICAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDVweDsgCiAgICAgICAgICAgICAgICBib3JkZXItYm90dG9tOiAycHggc29saWQgIzMzMzsgCiAgICAgICAgICAgICAgICBwYWRkaW5nLWJvdHRvbTogMnB4OyAKICAgICAgICAgICAgICAgIHRleHQtdHJhbnNmb3JtOiB1cHBlcmNhc2U7CiAgICAgICAgICAgICAgICBwYWdlLWJyZWFrLWFmdGVyOiBhdm9pZDsKICAgICAgICAgICAgfQogICAgICAgICAgICAKICAgICAgICAgICAgLnBhZ2UtYnJlYWsgeyBwYWdlLWJyZWFrLWFmdGVyOiBhbHdheXM7IGRpc3BsYXk6IGJsb2NrOyBoZWlnaHQ6IDFweDsgfQoKICAgICAgICAgICAgLyogTU9ERTogRGFzaGJvYXJkICovCiAgICAgICAgICAgIGJvZHkucHJpbnRpbmctZGFzaGJvYXJkIG1haW4geyBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7IH0KICAgICAgICAgICAgYm9keS5wcmludGluZy1kYXNoYm9hcmQgI2Rhc2hib2FyZC1wcmludC1hcmVhIHsgZGlzcGxheTogYmxvY2sgIWltcG9ydGFudDsgfQogICAgICAgICAgICBib2R5LnByaW50aW5nLWRhc2hib2FyZCAuZGFzaGJvYXJkLWdyaWQgeyAKICAgICAgICAgICAgICAgIGRpc3BsYXk6IGdyaWQ7IAogICAgICAgICAgICAgICAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiAxZnIgMWZyIDFmcjsgLyogMyBjb2xvbm5lcyBlbiBwYXlzYWdlICovCiAgICAgICAgICAgICAgICBnYXA6IDEwcHg7IAogICAgICAgICAgICAgICAgZm9udC1zaXplOiAwLjhyZW07CiAgICAgICAgICAgIH0KICAgICAgICAgICAgYm9keS5wcmludGluZy1kYXNoYm9hcmQgLmFlZC1zdW1tYXJ5LWNhcmQgeyBib3gtc2hhZG93OiBub25lOyBib3JkZXI6IDFweCBzb2xpZCAjY2NjOyBicmVhay1pbnNpZGU6IGF2b2lkOyB9CgogICAgICAgICAgICAvKiBNT0RFOiBFRFQgQmF0Y2ggKEFnZW50IFNldWwgb3UgVG91dCkgLSBPUFRJTUlTw4kgUEFZU0FHRSAqLwogICAgICAgICAgICBib2R5LnByaW50aW5nLWJhdGNoIG1haW4geyBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7IH0KICAgICAgICAgICAgYm9keS5wcmludGluZy1iYXRjaCAjYmF0Y2gtcHJpbnQtYXJlYSB7IGRpc3BsYXk6IGJsb2NrICFpbXBvcnRhbnQ7IHdpZHRoOiAxMDAlOyB9CiAgICAgICAgICAgIAogICAgICAgICAgICBib2R5LnByaW50aW5nLWJhdGNoIC5lZHQtdGFibGUgeyAKICAgICAgICAgICAgICAgIHdpZHRoOiAxMDAlOyAKICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMC43cmVtOyAKICAgICAgICAgICAgICAgIGJvcmRlci1jb2xsYXBzZTogY29sbGFwc2U7CiAgICAgICAgICAgICAgICB0YWJsZS1sYXlvdXQ6IGZpeGVkOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGJvZHkucHJpbnRpbmctYmF0Y2ggLmVkdC10YWJsZSB0aCB7IAogICAgICAgICAgICAgICAgcGFkZGluZzogMnB4OyAKICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNjY2MgIWltcG9ydGFudDsgCiAgICAgICAgICAgICAgICBjb2xvcjogYmxhY2sgIWltcG9ydGFudDsgCiAgICAgICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCBibGFjazsKICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMC44cmVtOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGJvZHkucHJpbnRpbmctYmF0Y2ggLmVkdC10YWJsZSB0ZCB7IAogICAgICAgICAgICAgICAgaGVpZ2h0OiAxOHB4ICFpbXBvcnRhbnQ7IC8qIEhhdXRldXIgZm9yY8OpZSB0csOocyBwZXRpdGUgcG91ciB0ZW5pciBzdXIgMjFjbSBkZSBoYXV0ICovCiAgICAgICAgICAgICAgICBwYWRkaW5nOiAwOyAKICAgICAgICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIGJsYWNrOyAKICAgICAgICAgICAgICAgIHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgYm9keS5wcmludGluZy1iYXRjaCAuY2VsbC1jb250ZW50IHsgZm9udC1zaXplOiAwLjY1cmVtOyBmb250LXdlaWdodDogYm9sZDsgfQogICAgICAgICAgICAKICAgICAgICAgICAgLyogTU9ERTogR2VzdGlvbiBGaWNoZSAtIE9QVElNSVPDiSBQQVlTQUdFICovCiAgICAgICAgICAgIGJvZHkucHJpbnRpbmctZ2VzdGlvbiBtYWluIHsgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50OyB9CiAgICAgICAgICAgIGJvZHkucHJpbnRpbmctZ2VzdGlvbiAjZ2VzdGlvbi1wcmludC1hcmVhIHsgZGlzcGxheTogYmxvY2sgIWltcG9ydGFudDsgcGFkZGluZzogMDsgfQogICAgICAgICAgICAKICAgICAgICAgICAgLyogRGlzcG9zaXRpb24gaG9yaXpvbnRhbGUgcG91ciBsYSBnZXN0aW9uICovCiAgICAgICAgICAgIGJvZHkucHJpbnRpbmctZ2VzdGlvbiAuZ2VzdGlvbi1zdGF0cy1jb250YWluZXIgewogICAgICAgICAgICAgICAgZGlzcGxheTogZmxleDsKICAgICAgICAgICAgICAgIHdpZHRoOiAxMDAlOwogICAgICAgICAgICAgICAgZ2FwOiAyMHB4OwogICAgICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogMTBweDsKICAgICAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOwogICAgICAgICAgICB9CiAgICAgICAgICAgIAogICAgICAgICAgICBib2R5LnByaW50aW5nLWdlc3Rpb24gLmJhbGFuY2UtYm94IHsgCiAgICAgICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCAjMzMzOyAKICAgICAgICAgICAgICAgIGNvbG9yOiBibGFjayAhaW1wb3J0YW50OyAKICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6IHdoaXRlICFpbXBvcnRhbnQ7IAogICAgICAgICAgICAgICAgcGFkZGluZzogNXB4IDIwcHg7IAogICAgICAgICAgICAgICAgZmxleDogMCAwIDMwMHB4OwogICAgICAgICAgICB9CiAgICAgICAgICAgIGJvZHkucHJpbnRpbmctZ2VzdGlvbiAuYmFsYW5jZS1hbW91bnQgeyBmb250LXNpemU6IDEuNHJlbTsgY29sb3I6IGJsYWNrOyBtYXJnaW46IDVweCAwOyB9CiAgICAgICAgICAgIAogICAgICAgICAgICBib2R5LnByaW50aW5nLWdlc3Rpb24gLmhpc3RvcnktdGFibGUgeyBmb250LXNpemU6IDAuOHJlbTsgd2lkdGg6IDEwMCU7IH0KICAgICAgICAgICAgYm9keS5wcmludGluZy1nZXN0aW9uIC5oaXN0b3J5LXRhYmxlIHRoLCBib2R5LnByaW50aW5nLWdlc3Rpb24gLmhpc3RvcnktdGFibGUgdGQgeyBwYWRkaW5nOiA0cHg7IGJvcmRlcjogMXB4IHNvbGlkICNjY2M7IH0KCiAgICAgICAgICAgIC8qIE1PREU6IFLDqXBhcnRpdGlvbiAtIE9QVElNSVPDiSBQQVlTQUdFICovCiAgICAgICAgICAgIGJvZHkucHJpbnRpbmctcmVwYXJ0aXRpb24gbWFpbiB7IGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDsgfQogICAgICAgICAgICBib2R5LnByaW50aW5nLXJlcGFydGl0aW9uICNyZXBhcnRpdGlvbi1wcmludC1hcmVhIHsgZGlzcGxheTogYmxvY2sgIWltcG9ydGFudDsgd2lkdGg6IDEwMCU7IHBhZGRpbmc6IDA7IH0KICAgICAgICAgICAgYm9keS5wcmludGluZy1yZXBhcnRpdGlvbiAucmVwYXJ0aXRpb24tdGFibGUgeyAKICAgICAgICAgICAgICAgIHdpZHRoOiAxMDAlOyAKICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMC42NXJlbTsgLyogUGV0aXQgcG91ciB0b3V0IGZhaXJlIHRlbmlyICovCiAgICAgICAgICAgICAgICBib3JkZXItY29sbGFwc2U6IGNvbGxhcHNlOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGJvZHkucHJpbnRpbmctcmVwYXJ0aXRpb24gLnJlcGFydGl0aW9uLXRhYmxlIHRoLCAKICAgICAgICAgICAgYm9keS5wcmludGluZy1yZXBhcnRpdGlvbiAucmVwYXJ0aXRpb24tdGFibGUgdGQgeyAKICAgICAgICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkICMwMDA7IAogICAgICAgICAgICAgICAgcGFkZGluZzogMXB4IDJweDsgCiAgICAgICAgICAgICAgICBoZWlnaHQ6IDE4cHggIWltcG9ydGFudDsgLyogSGF1dGV1ciBjb250cmFpbnRlICovCiAgICAgICAgICAgICAgICBvdmVyZmxvdzogaGlkZGVuOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGJvZHkucHJpbnRpbmctcmVwYXJ0aXRpb24gLmFnZW50LXRhZyB7IAogICAgICAgICAgICAgICAgYm9yZGVyOiBub25lOyAKICAgICAgICAgICAgICAgIHBhZGRpbmc6IDAgMXB4OyAKICAgICAgICAgICAgICAgIG1hcmdpbjogMCAxcHg7IAogICAgICAgICAgICAgICAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7IAogICAgICAgICAgICAgICAgZm9udC1zaXplOiAwLjZyZW07IAogICAgICAgICAgICAgICAgZGlzcGxheTogaW5saW5lOwogICAgICAgICAgICAgICAgbGluZS1oZWlnaHQ6IDE7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgCiAgICAgICAgICAgIC8qIEZvcmNlciBsZXMgY291bGV1cnMgaW5saW5lIMOgIHMnaW1wcmltZXIgKi8KICAgICAgICAgICAgLmNlbGwtY29udGVudCB7IAogICAgICAgICAgICAgICAgLXdlYmtpdC1wcmludC1jb2xvci1hZGp1c3Q6IGV4YWN0ICFpbXBvcnRhbnQ7IAogICAgICAgICAgICAgICAgcHJpbnQtY29sb3ItYWRqdXN0OiBleGFjdCAhaW1wb3J0YW50OyAKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIDwvc3R5bGU+CjwvaGVhZD4KPGJvZHk+Cgo8bmF2PgogICAgPGRpdiBjbGFzcz0ibmF2LWxlZnQiPgogICAgICAgIDxkaXYgY2xhc3M9Im5hdi10aXRsZSI+CiAgICAgICAgICAgIEFFRCBQSUxPVEUKICAgICAgICAgICAgPHNwYW4gY2xhc3M9Im5hdi1zdWJ0aXRsZSI+QnkgU3lsdsOocmUgTWljaGVsZXQgLSB2Mi45IChBZGFwdMOpZSBDU1YpPC9zcGFuPgogICAgICAgIDwvZGl2PgogICAgICAgIDxkaXYgY2xhc3M9Im5hdi1hY3Rpb25zIj4KICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYnRuLW5hdi1hY3Rpb24iIG9uY2xpY2s9ImRvd25sb2FkSlNPTigpIiB0aXRsZT0iU2F1dmVnYXJkZXIiPjxpIGNsYXNzPSJmYXMgZmEtZG93bmxvYWQiPjwvaT4gU2F1dmVnYXJkZXI8L2J1dHRvbj4KICAgICAgICAgICAgPGxhYmVsIGNsYXNzPSJidG4tbmF2LWFjdGlvbiIgdGl0bGU9IlJlc3RhdXJlciI+CiAgICAgICAgICAgICAgICA8aSBjbGFzcz0iZmFzIGZhLXVwbG9hZCI+PC9pPiBSZXN0YXVyZXIKICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJmaWxlIiBpZD0ianNvbklucHV0IiBhY2NlcHQ9Ii5qc29uIiBzdHlsZT0iZGlzcGxheTpub25lIiBvbmNoYW5nZT0iaW1wb3J0SlNPTih0aGlzKSI+CiAgICAgICAgICAgIDwvbGFiZWw+CiAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImJ0bi1uYXYtYWN0aW9uIGJ0bi1kYW5nZXItbmF2IiBvbmNsaWNrPSJyZXNldEFsbERhdGEoKSIgdGl0bGU9IkVmZmFjZXIgdG91dCBldCByZWNvbW1lbmNlciI+CiAgICAgICAgICAgICAgICA8aSBjbGFzcz0iZmFzIGZhLXRyYXNoIj48L2k+IFRvdXQgRWZmYWNlcgogICAgICAgICAgICA8L2J1dHRvbj4KICAgICAgICA8L2Rpdj4KICAgIDwvZGl2PgogICAgPGRpdiBjbGFzcz0ibmF2LXRhYnMiPgogICAgICAgIDxidXR0b24gY2xhc3M9InRhYi1idG4gYWN0aXZlIiBvbmNsaWNrPSJzd2l0Y2hUYWIoJ2ltcG9ydCcpIj4xLiBWdWUgZCdlbnNlbWJsZTwvYnV0dG9uPgogICAgICAgIDxidXR0b24gY2xhc3M9InRhYi1idG4iIG9uY2xpY2s9InN3aXRjaFRhYignY29uY2VwdGlvbicpIj4yLiBDb25jZXB0aW9uIEVEVDwvYnV0dG9uPgogICAgICAgIDxidXR0b24gY2xhc3M9InRhYi1idG4iIG9uY2xpY2s9InN3aXRjaFRhYignZ2VzdGlvbicpIj4zLiBHZXN0aW9uIFF1b3RpZGllbm5lPC9idXR0b24+CiAgICAgICAgPGJ1dHRvbiBjbGFzcz0idGFiLWJ0biIgb25jbGljaz0ic3dpdGNoVGFiKCdyZXBhcnRpdGlvbicpIj40LiBRdWkgZmFpdCBxdW9pID88L2J1dHRvbj4KICAgICAgICA8YnV0dG9uIGNsYXNzPSJ0YWItYnRuIiBvbmNsaWNrPSJzd2l0Y2hUYWIoJ2xpdmUnKSI+NS4gRW4gRGlyZWN0PC9idXR0b24+CiAgICA8L2Rpdj4KPC9uYXY+Cgo8bWFpbj4KICAgIDxzZWN0aW9uIGlkPSJ2aWV3LWltcG9ydCIgY2xhc3M9InZpZXctc2VjdGlvbiBhY3RpdmUiPgogICAgICAgIDxkaXYgY2xhc3M9ImltcG9ydC1oZWFkZXIiPgogICAgICAgICAgICA8ZGl2PgogICAgICAgICAgICAgICAgPGgyIHN0eWxlPSJtYXJnaW46MDsgYm9yZGVyOm5vbmU7IGNvbG9yOnZhcigtLXByaW1hcnkpIj5UYWJsZWF1IGRlIEJvcmQ8L2gyPgogICAgICAgICAgICAgICAgPHAgc3R5bGU9Im1hcmdpbjo1cHggMCAwIDA7IGNvbG9yOiM3ZjhjOGQ7Ij5Hw6lyZXogdm9zIGVmZmVjdGlmcyBBRUQgc2ltcGxlbWVudC48L3A+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8ZGl2IHN0eWxlPSJkaXNwbGF5OmZsZXg7IGdhcDoxMHB4OyI+CiAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9ImJ0biBidG4tcHJpbWFyeSIgc3R5bGU9ImRpc3BsYXk6aW5saW5lLWZsZXg7IGFsaWduLWl0ZW1zOmNlbnRlcjsgZ2FwOjEwcHg7Ij4KICAgICAgICAgICAgICAgICAgICA8aSBjbGFzcz0iZmFzIGZhLWZpbGUtZXhjZWwiPjwvaT4gSW1wb3J0ZXIgRXhjZWwKICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0iZmlsZSIgaWQ9ImV4Y2VsSW5wdXQiIGFjY2VwdD0iLnhsc3gsIC54bHMsIC5jc3YiIHN0eWxlPSJkaXNwbGF5Om5vbmUiIG9uY2hhbmdlPSJoYW5kbGVFeGNlbCh0aGlzKSI+CiAgICAgICAgICAgICAgICA8L2xhYmVsPgogICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYnRuIGJ0bi1wcmltYXJ5IiBvbmNsaWNrPSJwcmludERhc2hib2FyZCgpIiBzdHlsZT0iYmFja2dyb3VuZDojMzQ0OTVlOyI+CiAgICAgICAgICAgICAgICAgICAgPGkgY2xhc3M9ImZhcyBmYS1wcmludCI+PC9pPiBJbXByaW1lciBSw6ljYXAKICAgICAgICAgICAgICAgIDwvYnV0dG9uPgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICA8L2Rpdj4KICAgICAgICAKICAgICAgICA8ZGl2IGlkPSJpbXBvcnQtaW5mby1hcmVhIj48L2Rpdj4KICAgICAgICAKICAgICAgICA8ZGl2IGlkPSJkYXNoYm9hcmQtYXJlYSIgY2xhc3M9ImRhc2hib2FyZC1ncmlkIj4KICAgICAgICAgICAgPGRpdiBzdHlsZT0iZ3JpZC1jb2x1bW46IDEvLTE7IHRleHQtYWxpZ246Y2VudGVyOyBwYWRkaW5nOjUwcHg7IGNvbG9yOiNhYWE7Ij4KICAgICAgICAgICAgICAgIDxpIGNsYXNzPSJmYXMgZmEtZm9sZGVyLW9wZW4iIHN0eWxlPSJmb250LXNpemU6M3JlbTsgbWFyZ2luLWJvdHRvbToxMHB4OyI+PC9pPjxicj4KICAgICAgICAgICAgICAgIEF1Y3VuZSBkb25uw6llLiBWZXVpbGxleiBpbXBvcnRlciB1biBmaWNoaWVyIEV4Y2VsIG91IHJlc3RhdXJlciB1bmUgc2F1dmVnYXJkZS4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgPC9kaXY+CiAgICA8L3NlY3Rpb24+CgogICAgPHNlY3Rpb24gaWQ9InZpZXctY29uY2VwdGlvbiIgY2xhc3M9InZpZXctc2VjdGlvbiI+CiAgICAgICAgPGRpdiBjbGFzcz0icGxhbm5lci10b29sYmFyIj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0idG9vbC1ncm91cCI+CiAgICAgICAgICAgICAgICA8bGFiZWw+PHN0cm9uZz5BZ2VudCA6PC9zdHJvbmc+PC9sYWJlbD4KICAgICAgICAgICAgICAgIDxzZWxlY3QgaWQ9ImFlZC1zZWxlY3QtY29uY2VwdGlvbiIgb25jaGFuZ2U9ImNoYW5nZUFFRCgnY29uY2VwdGlvbicpIj4KICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSIiPi0tIFPDqWxlY3Rpb25uZXIgLS08L29wdGlvbj4KICAgICAgICAgICAgICAgIDwvc2VsZWN0PgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgCiAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImJ0biBidG4tcHJpbWFyeSIgb25jbGljaz0ib3BlbkdyaWRDb25maWcoKSIgc3R5bGU9ImJhY2tncm91bmQ6IzJjM2U1MDsgZm9udC1zaXplOjAuOHJlbTsiPgogICAgICAgICAgICAgICAgPGkgY2xhc3M9ImZhcyBmYS1jb2ciPjwvaT4gQ29uZmlnIEdyaWxsZQogICAgICAgICAgICA8L2J1dHRvbj4KCiAgICAgICAgICAgIDxkaXYgY2xhc3M9InRvb2wtZ3JvdXAiIHN0eWxlPSJiYWNrZ3JvdW5kOiNmOGY5ZmE7IHBhZGRpbmc6NXB4OyBib3JkZXItcmFkaXVzOjRweDsgYm9yZGVyOjFweCBzb2xpZCAjZWVlOyI+CiAgICAgICAgICAgICAgICA8bGFiZWwgc3R5bGU9ImZvbnQtc2l6ZTowLjhyZW07IGZvbnQtd2VpZ2h0OmJvbGQ7IGNvbG9yOnZhcigtLXByaW1hcnkpIj7wn5uP77iPIEludGVybmF0IChIKTo8L2xhYmVsPgogICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9Im51bWJlciIgaWQ9ImludGVybmF0LWhvdXJzIiBzdHlsZT0id2lkdGg6NTBweDsgcGFkZGluZzo0cHg7IHRleHQtYWxpZ246Y2VudGVyIiBtaW49IjAiIHN0ZXA9IjAuNSIgdmFsdWU9IjAiIG9uY2hhbmdlPSJ1cGRhdGVJbnRlcm5hdCgpIj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIAogICAgICAgICAgICA8ZGl2IGNsYXNzPSJ0b29sLWdyb3VwIHBhbGV0dGUiIGlkPSJwYWxldHRlLWNvbnRhaW5lciI+CiAgICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgICAgPGRpdiBjbGFzcz0idG9vbC1ncm91cCI+CiAgICAgICAgICAgICAgICA8c3BhbiBpZD0iaGVhZGVyLXN0YXRzIiBzdHlsZT0iZm9udC1zaXplOjAuOXJlbTsgZm9udC13ZWlnaHQ6Ym9sZDsgY29sb3I6dmFyKC0tcHJpbWFyeSk7IGJhY2tncm91bmQ6I2VlZTsgcGFkZGluZzo1cHggMTBweDsgYm9yZGVyLXJhZGl1czo0cHg7Ij4waCAvIDBoPC9zcGFuPgogICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYnRuIGJ0bi1wcmltYXJ5IiBvbmNsaWNrPSJwcmludFNpbmdsZSgpIiBzdHlsZT0iZm9udC1zaXplOiAwLjhyZW07Ij48aSBjbGFzcz0iZmFzIGZhLXByaW50Ij48L2k+IEFnZW50PC9idXR0b24+CiAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJidG4gYnRuLXByaW1hcnkiIG9uY2xpY2s9InByaW50QWxsKCkiIHN0eWxlPSJmb250LXNpemU6IDAuOHJlbTsgYmFja2dyb3VuZC1jb2xvcjojMmMzZTUwOyI+PGkgY2xhc3M9ImZhcyBmYS1sYXllci1ncm91cCI+PC9pPiBUb3V0PC9idXR0b24+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgIDwvZGl2PgoKICAgICAgICA8ZGl2IGNsYXNzPSJlZHQtY29udGFpbmVyIj4KICAgICAgICAgICAgPHRhYmxlIGNsYXNzPSJlZHQtdGFibGUiIGlkPSJ0aW1ldGFibGUiPjwvdGFibGU+CiAgICAgICAgPC9kaXY+CiAgICA8L3NlY3Rpb24+CgogICAgPGRpdiBjbGFzcz0ibW9kYWwtb3ZlcmxheSIgaWQ9Im1vZGFsLXNlcnZpY2UiPgogICAgICAgIDxkaXYgY2xhc3M9Im1vZGFsLWJveCI+CiAgICAgICAgICAgIDxoMz48aSBjbGFzcz0iZmFzIGZhLXBsdXMtY2lyY2xlIj48L2k+IEFqb3V0ZXIgdW4gU2VydmljZTwvaDM+CiAgICAgICAgICAgIAogICAgICAgICAgICA8bGFiZWwgZm9yPSJzZXJ2aWNlLW5hbWUiPk5vbSBkdSBzZXJ2aWNlIDo8L2xhYmVsPgogICAgICAgICAgICA8aW5wdXQgdHlwZT0idGV4dCIgaWQ9InNlcnZpY2UtbmFtZSIgcGxhY2Vob2xkZXI9IkV4OiBDREksIEluZmlybWVyaWUsIEFjY3VlaWwuLi4iIG1heGxlbmd0aD0iMTUiPgogICAgICAgICAgICAKICAgICAgICAgICAgPGxhYmVsPkNvdWxldXIgKHByw6lzZXRzKSA6PC9sYWJlbD4KICAgICAgICAgICAgPGRpdiBjbGFzcz0iY29sb3ItcHJlc2V0cyI+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJjb2xvci1wcmVzZXQiIHN0eWxlPSJiYWNrZ3JvdW5kOiNlNzRjM2MiIG9uY2xpY2s9InNldFByZXNldENvbG9yKCcjZTc0YzNjJykiPjwvZGl2PgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iY29sb3ItcHJlc2V0IiBzdHlsZT0iYmFja2dyb3VuZDojZTkxZTYzIiBvbmNsaWNrPSJzZXRQcmVzZXRDb2xvcignI2U5MWU2MycpIj48L2Rpdj4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImNvbG9yLXByZXNldCIgc3R5bGU9ImJhY2tncm91bmQ6IzljMjdiMCIgb25jbGljaz0ic2V0UHJlc2V0Q29sb3IoJyM5YzI3YjAnKSI+PC9kaXY+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJjb2xvci1wcmVzZXQiIHN0eWxlPSJiYWNrZ3JvdW5kOiM2NzNhYjciIG9uY2xpY2s9InNldFByZXNldENvbG9yKCcjNjczYWI3JykiPjwvZGl2PgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iY29sb3ItcHJlc2V0IiBzdHlsZT0iYmFja2dyb3VuZDojM2Y1MWI1IiBvbmNsaWNrPSJzZXRQcmVzZXRDb2xvcignIzNmNTFiNScpIj48L2Rpdj4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImNvbG9yLXByZXNldCIgc3R5bGU9ImJhY2tncm91bmQ6IzIxOTZmMyIgb25jbGljaz0ic2V0UHJlc2V0Q29sb3IoJyMyMTk2ZjMnKSI+PC9kaXY+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJjb2xvci1wcmVzZXQiIHN0eWxlPSJiYWNrZ3JvdW5kOiMwMGJjZDQiIG9uY2xpY2s9InNldFByZXNldENvbG9yKCcjMDBiY2Q0JykiPjwvZGl2PgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iY29sb3ItcHJlc2V0IiBzdHlsZT0iYmFja2dyb3VuZDojMDA5Njg4IiBvbmNsaWNrPSJzZXRQcmVzZXRDb2xvcignIzAwOTY4OCcpIj48L2Rpdj4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImNvbG9yLXByZXNldCIgc3R5bGU9ImJhY2tncm91bmQ6IzRjYWY1MCIgb25jbGljaz0ic2V0UHJlc2V0Q29sb3IoJyM0Y2FmNTAnKSI+PC9kaXY+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJjb2xvci1wcmVzZXQiIHN0eWxlPSJiYWNrZ3JvdW5kOiM4YmMzNGEiIG9uY2xpY2s9InNldFByZXNldENvbG9yKCcjOGJjMzRhJykiPjwvZGl2PgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iY29sb3ItcHJlc2V0IiBzdHlsZT0iYmFja2dyb3VuZDojZmY5ODAwIiBvbmNsaWNrPSJzZXRQcmVzZXRDb2xvcignI2ZmOTgwMCcpIj48L2Rpdj4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImNvbG9yLXByZXNldCIgc3R5bGU9ImJhY2tncm91bmQ6I2ZmNTcyMiIgb25jbGljaz0ic2V0UHJlc2V0Q29sb3IoJyNmZjU3MjInKSI+PC9kaXY+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJjb2xvci1wcmVzZXQiIHN0eWxlPSJiYWNrZ3JvdW5kOiM3OTU1NDgiIG9uY2xpY2s9InNldFByZXNldENvbG9yKCcjNzk1NTQ4JykiPjwvZGl2PgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iY29sb3ItcHJlc2V0IiBzdHlsZT0iYmFja2dyb3VuZDojNjA3ZDhiIiBvbmNsaWNrPSJzZXRQcmVzZXRDb2xvcignIzYwN2Q4YicpIj48L2Rpdj4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImNvbG9yLXByZXNldCIgc3R5bGU9ImJhY2tncm91bmQ6IzAwMDAwMCIgb25jbGljaz0ic2V0UHJlc2V0Q29sb3IoJyMwMDAwMDAnKSI+PC9kaXY+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAKICAgICAgICAgICAgPGxhYmVsIGZvcj0ic2VydmljZS1jb2xvciI+T3UgY291bGV1ciBwZXJzb25uYWxpc8OpZSA6PC9sYWJlbD4KICAgICAgICAgICAgPGlucHV0IHR5cGU9ImNvbG9yIiBpZD0ic2VydmljZS1jb2xvciIgdmFsdWU9IiMzNDk4ZGIiIG9uY2hhbmdlPSJ1cGRhdGVQcmV2aWV3KCkiPgogICAgICAgICAgICAKICAgICAgICAgICAgPGxhYmVsPkFwZXLDp3UgOjwvbGFiZWw+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9InByZXZpZXctYnRuIiBpZD0ic2VydmljZS1wcmV2aWV3Ij5OT1VWRUFVIFNFUlZJQ0U8L2Rpdj4KICAgICAgICAgICAgCiAgICAgICAgICAgIDxkaXYgY2xhc3M9Im1vZGFsLWFjdGlvbnMiPgogICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYnRuLWNhbmNlbCIgb25jbGljaz0iY2xvc2VTZXJ2aWNlTW9kYWwoKSI+QW5udWxlcjwvYnV0dG9uPgogICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYnRuLWNvbmZpcm0iIG9uY2xpY2s9ImNvbmZpcm1BZGRTZXJ2aWNlKCkiPjxpIGNsYXNzPSJmYXMgZmEtY2hlY2siPjwvaT4gQWpvdXRlcjwvYnV0dG9uPgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICA8L2Rpdj4KICAgIDwvZGl2PgoKICAgIDxkaXYgY2xhc3M9Im1vZGFsLW92ZXJsYXkiIGlkPSJtb2RhbC1ncmlkLWNvbmZpZyI+CiAgICAgICAgPGRpdiBjbGFzcz0ibW9kYWwtYm94Ij4KICAgICAgICAgICAgPGgzPjxpIGNsYXNzPSJmYXMgZmEtY29nIj48L2k+IENvbmZpZ3VyYXRpb24gR3JpbGxlIEhvcmFpcmU8L2gzPgogICAgICAgICAgICA8cCBzdHlsZT0iZm9udC1zaXplOjAuOXJlbTsgY29sb3I6IzY2NjsiPkFqb3V0ZXosIHN1cHByaW1leiBldCBkw6lmaW5pc3NleiB2b3MgY3LDqW5lYXV4IHByw6ljaXMgKGV4OiA4aDI1LTloMjApLjwvcD4KICAgICAgICAgICAgCiAgICAgICAgICAgIDxkaXYgY2xhc3M9InNsb3QtaW5wdXRzIj4KICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9ImZsZXg6MSI+CiAgICAgICAgICAgICAgICAgICAgPGxhYmVsIHN0eWxlPSJmb250LXNpemU6MC44cmVtIj5Ew6lidXQ8L2xhYmVsPgogICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJ0aW1lIiBpZD0ibmV3LXNsb3Qtc3RhcnQiIHN0eWxlPSJ3aWR0aDoxMDAlIj4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iZmxleDoxIj4KICAgICAgICAgICAgICAgICAgICA8bGFiZWwgc3R5bGU9ImZvbnQtc2l6ZTowLjhyZW0iPkZpbjwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9InRpbWUiIGlkPSJuZXctc2xvdC1lbmQiIHN0eWxlPSJ3aWR0aDoxMDAlIj4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYnRuIGJ0bi1wcmltYXJ5IiBvbmNsaWNrPSJhZGRTbG90KCkiPjxpIGNsYXNzPSJmYXMgZmEtcGx1cyI+PC9pPjwvYnV0dG9uPgogICAgICAgICAgICA8L2Rpdj4KCiAgICAgICAgICAgIDxkaXYgY2xhc3M9InNsb3QtbGlzdCIgaWQ9InNsb3QtY29uZmlnLWxpc3QiPgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIAogICAgICAgICAgICA8ZGl2IGNsYXNzPSJtb2RhbC1hY3Rpb25zIj4KICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImJ0bi1jYW5jZWwiIG9uY2xpY2s9ImRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtb2RhbC1ncmlkLWNvbmZpZycpLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpIj5GZXJtZXI8L2J1dHRvbj4KICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImJ0bi1jb25maXJtIiBvbmNsaWNrPSJzYXZlR3JpZENvbmZpZygpIj48aSBjbGFzcz0iZmFzIGZhLWNoZWNrIj48L2k+IEVucmVnaXN0cmVyICYgQXBwbGlxdWVyPC9idXR0b24+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgIDwvZGl2PgogICAgPC9kaXY+CgogICAgPHNlY3Rpb24gaWQ9InZpZXctZ2VzdGlvbiIgY2xhc3M9InZpZXctc2VjdGlvbiI+CiAgICAgICAgPGRpdiBzdHlsZT0ibWFyZ2luLWJvdHRvbTogMjBweDsgZGlzcGxheTpmbGV4OyBqdXN0aWZ5LWNvbnRlbnQ6c3BhY2UtYmV0d2VlbjsgYWxpZ24taXRlbXM6Y2VudGVyOyI+CiAgICAgICAgICAgIDxkaXY+CiAgICAgICAgICAgICAgICA8bGFiZWw+PHN0cm9uZz5BZ2VudCA6PC9zdHJvbmc+PC9sYWJlbD4KICAgICAgICAgICAgICAgIDxzZWxlY3QgaWQ9ImFlZC1zZWxlY3QtZ2VzdGlvbiIgb25jaGFuZ2U9ImNoYW5nZUFFRCgnZ2VzdGlvbicpIj48L3NlbGVjdD4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImJ0biBidG4tcHJpbWFyeSIgb25jbGljaz0icHJpbnRHZXN0aW9uKCkiPjxpIGNsYXNzPSJmYXMgZmEtcHJpbnQiPjwvaT4gSW1wcmltZXIgRmljaGU8L2J1dHRvbj4KICAgICAgICA8L2Rpdj4KICAgICAgICA8ZGl2IGNsYXNzPSJnZXN0aW9uLWdyaWQiPgogICAgICAgICAgICA8ZGl2PgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ic3RhdHMtcm93Ij4KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJiYWxhbmNlLWJveCI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+VG90YWwgQW5udWVsIChOZXQpPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImJhbGFuY2UtYW1vdW50IiBpZD0iYW5udWFsLXRhcmdldC1kaXNwbGF5Ij4waDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJmb250LXNpemU6MC44cmVtOyBvcGFjaXR5OjAuODsiPk9iamVjdGlmPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iYmFsYW5jZS1ib3ggc2Vjb25kYXJ5Ij4KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj5Tb2xkZSBBanVzdGVtZW50czwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJiYWxhbmNlLWFtb3VudCIgaWQ9ImJhbGFuY2UtZGlzcGxheSI+MGg8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iZm9udC1zaXplOjAuOHJlbTsgb3BhY2l0eTowLjg7Ij5DdW11bCAoQWJzL1N1cCk8L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImNhcmQiPgogICAgICAgICAgICAgICAgICAgIDxoMyBzdHlsZT0ibWFyZ2luLXRvcDowIj5TYWlzaWUgUXVvdGlkaWVubmU8L2gzPgogICAgICAgICAgICAgICAgICAgIDxzZWxlY3QgaWQ9ImFkai10eXBlIiBzdHlsZT0id2lkdGg6MTAwJTsgbWFyZ2luLWJvdHRvbToxMHB4Ij48b3B0aW9uIHZhbHVlPSJwbHVzIj5IZXVyZXMgZW4gUExVUyAoKyk8L29wdGlvbj48b3B0aW9uIHZhbHVlPSJtaW51cyI+SGV1cmVzIGVuIE1PSU5TICgtKTwvb3B0aW9uPjwvc2VsZWN0PgogICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJudW1iZXIiIGlkPSJhZGotYW1vdW50IiBwbGFjZWhvbGRlcj0iRHVyw6llIiBzdGVwPSIwLjUiIHN0eWxlPSJ3aWR0aDoxMDAlOyBtYXJnaW4tYm90dG9tOjEwcHg7Ij4KICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0idGV4dCIgaWQ9ImFkai1yZWFzb24iIHBsYWNlaG9sZGVyPSJNb3RpZi4uLiIgc3R5bGU9IndpZHRoOjEwMCU7IG1hcmdpbi1ib3R0b206MTBweDsiPgogICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImJ0biBidG4tcHJpbWFyeSIgc3R5bGU9IndpZHRoOjEwMCUiIG9uY2xpY2s9ImFkZEFkanVzdG1lbnQoKSI+RW5yZWdpc3RyZXI8L2J1dHRvbj4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0iY2FyZCI+CiAgICAgICAgICAgICAgICA8aDMgc3R5bGU9Im1hcmdpbi10b3A6MCI+SGlzdG9yaXF1ZTwvaDM+CiAgICAgICAgICAgICAgICA8dGFibGUgY2xhc3M9Imhpc3RvcnktdGFibGUiPgogICAgICAgICAgICAgICAgICAgIDx0aGVhZD48dHI+PHRoPkRhdGU8L3RoPjx0aD5UeXBlPC90aD48dGg+TW90aWY8L3RoPjx0aD5IPC90aD48dGg+PC90aD48L3RyPjwvdGhlYWQ+CiAgICAgICAgICAgICAgICAgICAgPHRib2R5IGlkPSJoaXN0b3J5LWJvZHkiPjwvdGJvZHk+CiAgICAgICAgICAgICAgICA8L3RhYmxlPgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICA8L2Rpdj4KICAgIDwvc2VjdGlvbj4KCiAgICA8c2VjdGlvbiBpZD0idmlldy1yZXBhcnRpdGlvbiIgY2xhc3M9InZpZXctc2VjdGlvbiI+CiAgICAgICAgPGRpdiBjbGFzcz0icmVwYXJ0aXRpb24tdG9vbGJhciI+CiAgICAgICAgICAgIDxkaXYgc3R5bGU9ImRpc3BsYXk6ZmxleDsgYWxpZ24taXRlbXM6Y2VudGVyOyBnYXA6MTVweDsiPgogICAgICAgICAgICAgICAgPGgyIHN0eWxlPSJtYXJnaW46MDsgY29sb3I6dmFyKC0tcHJpbWFyeSk7IGZvbnQtc2l6ZToxLjJyZW07Ij5RdWkgZmFpdCBxdW9pID88L2gyPgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0idG9vbC1ncm91cCI+CiAgICAgICAgICAgICAgICAgICAgPGxhYmVsPjxzdHJvbmc+Sm91ciA6PC9zdHJvbmc+PC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICA8c2VsZWN0IGlkPSJyZXBhcnRpdGlvbi1kYXktc2VsZWN0IiBvbmNoYW5nZT0icmVuZGVyUmVwYXJ0aXRpb24oKSI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9Ikx1bmRpIj5MdW5kaTwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJNYXJkaSI+TWFyZGk8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iTWVyY3JlZGkiPk1lcmNyZWRpPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IkpldWRpIj5KZXVkaTwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJWZW5kcmVkaSI+VmVuZHJlZGk8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICA8L3NlbGVjdD4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYnRuIGJ0bi1wcmltYXJ5IiBvbmNsaWNrPSJwcmludFJlcGFydGl0aW9uKCkiPjxpIGNsYXNzPSJmYXMgZmEtcHJpbnQiPjwvaT4gSW1wcmltZXIgbGEgam91cm7DqWU8L2J1dHRvbj4KICAgICAgICA8L2Rpdj4KICAgICAgICAKICAgICAgICA8ZGl2IGNsYXNzPSJlZHQtY29udGFpbmVyIj4KICAgICAgICAgICAgPGRpdiBpZD0icmVwYXJ0aXRpb24tY29udGVudCI+PC9kaXY+CiAgICAgICAgPC9kaXY+CiAgICA8L3NlY3Rpb24+CgogICAgPHNlY3Rpb24gaWQ9InZpZXctbGl2ZSIgY2xhc3M9InZpZXctc2VjdGlvbiI+CiAgICAgICAgPGRpdiBjbGFzcz0ibGl2ZS1oZWFkZXIiPgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJjbG9jay1kYXkiIGlkPSJsaXZlLWRheSI+Q0hBUkdFTUVOVC4uLjwvZGl2PgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJjbG9jay10aW1lIiBpZD0ibGl2ZS1jbG9jayI+LS06LS06LS08L2Rpdj4KICAgICAgICA8L2Rpdj4KICAgICAgICAKICAgICAgICA8ZGl2IGNsYXNzPSJzZWN0aW9uLXRpdGxlIj48aSBjbGFzcz0iZmFzIGZhLXVzZXItY2xvY2siPjwvaT4gQUVEIEVOIFBPU1RFIEFDVFVFTExFTUVOVDwvZGl2PgogICAgICAgIDxkaXYgY2xhc3M9ImxpdmUtZ3JpZCIgaWQ9ImxpdmUtYWN0aXZlLWNvbnRhaW5lciI+CiAgICAgICAgICAgIDwvZGl2PgoKICAgICAgICA8ZGl2IGNsYXNzPSJzZWN0aW9uLXRpdGxlIj48aSBjbGFzcz0iZmFzIGZhLXVzZXItc2xhc2giPjwvaT4gQUJTRU5UUyAvIE5PTiBQTEFOSUZJw4lTPC9kaXY+CiAgICAgICAgPGRpdiBjbGFzcz0ibGl2ZS1ncmlkIiBpZD0ibGl2ZS1pbmFjdGl2ZS1jb250YWluZXIiIHN0eWxlPSJvcGFjaXR5OiAwLjY7Ij4KICAgICAgICAgICAgPC9kaXY+CiAgICA8L3NlY3Rpb24+Cgo8L21haW4+Cgo8ZGl2IGlkPSJiYXRjaC1wcmludC1hcmVhIj48L2Rpdj4KPGRpdiBpZD0iZGFzaGJvYXJkLXByaW50LWFyZWEiPjwvZGl2Pgo8ZGl2IGlkPSJnZXN0aW9uLXByaW50LWFyZWEiPjwvZGl2Pgo8ZGl2IGlkPSJyZXBhcnRpdGlvbi1wcmludC1hcmVhIj48L2Rpdj4KCjxzY3JpcHQ+CiAgICAvLyAtLS0gSU5JVElBTElTQVRJT04gRE9OTsOJRVMgVklERSAtLS0KICAgIC8vIEFqb3V0IGRlICJzbG90cyIgZGFucyBEQVRBLmNvbmZpZyBwb3VyIHN0b2NrZXIgbGVzIGNyw6luZWF1eCBwZXJzb25uYWxpc8OpcwogICAgbGV0IERBVEEgPSB7IGFnZW50czogW10sIHNjaGVkdWxlczoge30sIGFkanVzdG1lbnRzOiB7fSwgcXVvdGl0ZXM6IFtdLCBzZXJ2aWNlczogW10sIGNvbmZpZzogeyBzbG90czogW10gfSB9OwogICAgY29uc3QgREFZUyA9IFsnTHVuZGknLCAnTWFyZGknLCAnTWVyY3JlZGknLCAnSmV1ZGknLCAnVmVuZHJlZGknXTsKICAgIAogICAgLy8gQ3LDqW5lYXV4IHBhciBkw6lmYXV0IHNpIGF1Y3VuZSBjb25maWcgKHBvdXIgw6l2aXRlciBsZSB2aWRlIGF1IHByZW1pZXIgbGFuY2VtZW50KQogICAgY29uc3QgREVGQVVMVF9TTE9UUyA9IFsKICAgICAgICB7IHN0YXJ0OiAnMDg6MDAnLCBlbmQ6ICcwODo1NScgfSwKICAgICAgICB7IHN0YXJ0OiAnMDg6NTUnLCBlbmQ6ICcwOTo1MCcgfSwKICAgICAgICB7IHN0YXJ0OiAnMDk6NTAnLCBlbmQ6ICcxMDowNScgfSwKICAgICAgICB7IHN0YXJ0OiAnMTA6MDUnLCBlbmQ6ICcxMTowMCcgfSwKICAgICAgICB7IHN0YXJ0OiAnMTE6MDAnLCBlbmQ6ICcxMTo1NScgfSwKICAgICAgICB7IHN0YXJ0OiAnMTI6MDAnLCBlbmQ6ICcxMzowMCcgfSwKICAgICAgICB7IHN0YXJ0OiAnMTM6MDAnLCBlbmQ6ICcxMzo1NScgfSwKICAgICAgICB7IHN0YXJ0OiAnMTM6NTUnLCBlbmQ6ICcxNDo1MCcgfSwKICAgICAgICB7IHN0YXJ0OiAnMTQ6NTAnLCBlbmQ6ICcxNTowNScgfSwKICAgICAgICB7IHN0YXJ0OiAnMTU6MDUnLCBlbmQ6ICcxNjowMCcgfSwKICAgICAgICB7IHN0YXJ0OiAnMTY6MDAnLCBlbmQ6ICcxNjo1NScgfSwKICAgICAgICB7IHN0YXJ0OiAnMTY6NTUnLCBlbmQ6ICcxNzo1MCcgfQogICAgXTsKCiAgICBsZXQgQ1VSUkVOVF9UT09MID0geyBuYW1lOiAnR3JpbGxlJywgY29sb3I6ICcjZmYwMGZmJywgaXNFcmFzZXI6IGZhbHNlIH07CiAgICAKICAgIC8vIFNlcnZpY2VzIHBhciBkw6lmYXV0CiAgICBjb25zdCBERUZBVUxUX1NFUlZJQ0VTID0gWwogICAgICAgIHsgaWQ6ICdncmlsbGUnLCBuYW1lOiAnR3JpbGxlJywgY29sb3I6ICcjZmYwMGZmJywgaXNEZWZhdWx0OiB0cnVlIH0sCiAgICAgICAgeyBpZDogJ2FkbWluJywgbmFtZTogJ0FkbWluJywgY29sb3I6ICcjMDBiODk0JywgaXNEZWZhdWx0OiB0cnVlIH0sCiAgICAgICAgeyBpZDogJ2V0dWRlJywgbmFtZTogJ0V0dWRlJywgY29sb3I6ICcjOGU0NGFkJywgaXNEZWZhdWx0OiB0cnVlIH0sCiAgICAgICAgeyBpZDogJ3NlbGYnLCBuYW1lOiAnU2VsZicsIGNvbG9yOiAnI2U2N2UyMicsIGlzRGVmYXVsdDogdHJ1ZSB9LAogICAgICAgIHsgaWQ6ICdjb3Vsb2lycycsIG5hbWU6ICdDb3Vsb2lycycsIGNvbG9yOiAnI2YxYzQwZicsIGlzRGVmYXVsdDogdHJ1ZSB9LAogICAgICAgIHsgaWQ6ICdjb3VyJywgbmFtZTogJ0NvdXInLCBjb2xvcjogJyNkNjMwMzEnLCBpc0RlZmF1bHQ6IHRydWUgfSwKICAgICAgICB7IGlkOiAnc3VpdmknLCBuYW1lOiAnU3VpdmknLCBjb2xvcjogJyMyN2FlNjAnLCBpc0RlZmF1bHQ6IHRydWUgfQogICAgXTsKICAgIAogICAgY29uc3QgU1RPUkFHRV9LRVkgPSAnQUVEX1BJTE9URV9WMjhfU0xPVFMnOwoKICAgIHdpbmRvdy5vbmxvYWQgPSBmdW5jdGlvbigpIHsgCiAgICAgICAgbG9hZExvY2FsU3RvcmFnZSgpOyAKICAgICAgICByZW5kZXJQYWxldHRlKCk7IAogICAgICAgIC8vIExhbmNlciBsJ2hvcmxvZ2UgcG91ciBsZSBtZW51IDUKICAgICAgICBzZXRJbnRlcnZhbCh1cGRhdGVMaXZlVmlldywgMTAwMCk7CiAgICAgICAgdXBkYXRlTGl2ZVZpZXcoKTsKICAgIH07CgogICAgZnVuY3Rpb24gc3dpdGNoVGFiKHRhYklkKSB7CiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnZpZXctc2VjdGlvbicpLmZvckVhY2goZWwgPT4gZWwuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJykpOwogICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy50YWItYnRuJykuZm9yRWFjaChlbCA9PiBlbC5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKSk7CiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ZpZXctJyArIHRhYklkKS5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTsKICAgICAgICAKICAgICAgICBjb25zdCB0YWJzID0gWydpbXBvcnQnLCAnY29uY2VwdGlvbicsICdnZXN0aW9uJywgJ3JlcGFydGl0aW9uJywgJ2xpdmUnXTsKICAgICAgICBjb25zdCBidG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcudGFiLWJ0bicpW3RhYnMuaW5kZXhPZih0YWJJZCldOwogICAgICAgIGlmKGJ0bikgYnRuLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpOwogICAgICAgIAogICAgICAgIGlmKHRhYklkID09PSAnY29uY2VwdGlvbicpIHVwZGF0ZVN0YXRzSGVhZGVyKCk7CiAgICAgICAgaWYodGFiSWQgPT09ICdnZXN0aW9uJykgdXBkYXRlR2VzdGlvblVJKCk7CiAgICAgICAgaWYodGFiSWQgPT09ICdyZXBhcnRpdGlvbicpIHJlbmRlclJlcGFydGl0aW9uKCk7CiAgICAgICAgaWYodGFiSWQgPT09ICdsaXZlJykgdXBkYXRlTGl2ZVZpZXcoKTsKICAgIH0KICAgIAogICAgLy8gLS0tIEdFU1RJT04gREUgTEEgQ09ORklHVVJBVElPTiBIT1JBSVJFIEFWQU5DRUUgKE1lbnUgMikgLS0tCiAgICAvLyBWYXJpYWJsZSB0ZW1wb3JhaXJlIHBvdXIgbCfDqWRpdGlvbiBkYW5zIGxlIG1vZGFsCiAgICBsZXQgdGVtcFNsb3RzID0gW107CgogICAgZnVuY3Rpb24gb3BlbkdyaWRDb25maWcoKSB7CiAgICAgICAgLy8gQ2hhcmdlciBsZXMgc2xvdHMgYWN0dWVscyBvdSBsZXMgZMOpZmF1dHMKICAgICAgICB0ZW1wU2xvdHMgPSAoREFUQS5jb25maWcgJiYgREFUQS5jb25maWcuc2xvdHMgJiYgREFUQS5jb25maWcuc2xvdHMubGVuZ3RoID4gMCkgCiAgICAgICAgICAgICAgICAgICAgPyBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KERBVEEuY29uZmlnLnNsb3RzKSkgCiAgICAgICAgICAgICAgICAgICAgOiBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KERFRkFVTFRfU0xPVFMpKTsKICAgICAgICAKICAgICAgICByZW5kZXJTbG90Q29uZmlnTGlzdCgpOwogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtb2RhbC1ncmlkLWNvbmZpZycpLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpOwogICAgfQoKICAgIGZ1bmN0aW9uIHJlbmRlclNsb3RDb25maWdMaXN0KCkgewogICAgICAgIGNvbnN0IGxpc3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2xvdC1jb25maWctbGlzdCcpOwogICAgICAgIGxpc3QuaW5uZXJIVE1MID0gJyc7CiAgICAgICAgCiAgICAgICAgLy8gVHJpZXIgcGFyIGhldXJlIGRlIGTDqWJ1dAogICAgICAgIHRlbXBTbG90cy5zb3J0KChhLCBiKSA9PiBhLnN0YXJ0LmxvY2FsZUNvbXBhcmUoYi5zdGFydCkpOwoKICAgICAgICB0ZW1wU2xvdHMuZm9yRWFjaCgoc2xvdCwgaW5kZXgpID0+IHsKICAgICAgICAgICAgY29uc3QgaXRlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgICAgICAgICBpdGVtLmNsYXNzTmFtZSA9ICdzbG90LWl0ZW0nOwogICAgICAgICAgICBpdGVtLmlubmVySFRNTCA9IGAKICAgICAgICAgICAgICAgIDxzcGFuPjxzdHJvbmc+JHtzbG90LnN0YXJ0fTwvc3Ryb25nPiDDoCA8c3Ryb25nPiR7c2xvdC5lbmR9PC9zdHJvbmc+PC9zcGFuPgogICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYnRuIGJ0bi1kYW5nZXIiIHN0eWxlPSJwYWRkaW5nOjRweCA4cHg7IGZvbnQtc2l6ZTowLjdyZW07IiBvbmNsaWNrPSJyZW1vdmVTbG90KCR7aW5kZXh9KSI+PGkgY2xhc3M9ImZhcyBmYS10cmFzaCI+PC9pPjwvYnV0dG9uPgogICAgICAgICAgICBgOwogICAgICAgICAgICBsaXN0LmFwcGVuZENoaWxkKGl0ZW0pOwogICAgICAgIH0pOwogICAgfQoKICAgIGZ1bmN0aW9uIGFkZFNsb3QoKSB7CiAgICAgICAgY29uc3Qgc3RhcnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbmV3LXNsb3Qtc3RhcnQnKS52YWx1ZTsKICAgICAgICBjb25zdCBlbmQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbmV3LXNsb3QtZW5kJykudmFsdWU7CgogICAgICAgIGlmICghc3RhcnQgfHwgIWVuZCkgewogICAgICAgICAgICBhbGVydCgiVmV1aWxsZXogcmVtcGxpciBsJ2hldXJlIGRlIGTDqWJ1dCBldCBkZSBmaW4uIik7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgaWYgKHN0YXJ0ID49IGVuZCkgewogICAgICAgICAgICBhbGVydCgiTCdoZXVyZSBkZSBkw6lidXQgZG9pdCDDqnRyZSBhdmFudCBsJ2hldXJlIGRlIGZpbi4iKTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgdGVtcFNsb3RzLnB1c2goeyBzdGFydDogc3RhcnQsIGVuZDogZW5kIH0pOwogICAgICAgIHJlbmRlclNsb3RDb25maWdMaXN0KCk7CiAgICAgICAgCiAgICAgICAgLy8gUmVzZXQgaW5wdXRzCiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ25ldy1zbG90LXN0YXJ0JykudmFsdWUgPSAnJzsKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbmV3LXNsb3QtZW5kJykudmFsdWUgPSAnJzsKICAgIH0KCiAgICBmdW5jdGlvbiByZW1vdmVTbG90KGluZGV4KSB7CiAgICAgICAgdGVtcFNsb3RzLnNwbGljZShpbmRleCwgMSk7CiAgICAgICAgcmVuZGVyU2xvdENvbmZpZ0xpc3QoKTsKICAgIH0KCiAgICBmdW5jdGlvbiBzYXZlR3JpZENvbmZpZygpIHsKICAgICAgICBpZiAodGVtcFNsb3RzLmxlbmd0aCA9PT0gMCkgewogICAgICAgICAgICBpZighY29uZmlybSgiTGEgZ3JpbGxlIGVzdCB2aWRlLiBWb3VsZXotdm91cyB2cmFpbWVudCBjb250aW51ZXIgPyIpKSByZXR1cm47CiAgICAgICAgfQoKICAgICAgICBpZighREFUQS5jb25maWcpIERBVEEuY29uZmlnID0ge307CiAgICAgICAgCiAgICAgICAgLy8gT24gdHJpZSB1bmUgZGVybmnDqHJlIGZvaXMgcG91ciDDqnRyZSBzw7tyCiAgICAgICAgdGVtcFNsb3RzLnNvcnQoKGEsIGIpID0+IGEuc3RhcnQubG9jYWxlQ29tcGFyZShiLnN0YXJ0KSk7CiAgICAgICAgREFUQS5jb25maWcuc2xvdHMgPSB0ZW1wU2xvdHM7CiAgICAgICAgCiAgICAgICAgc2F2ZUxvY2FsU3RvcmFnZSgpOwogICAgICAgIAogICAgICAgIC8vIFJhZnJhw65jaGlyIGxlcyB2dWVzCiAgICAgICAgcmVuZGVyVGltZXRhYmxlKCk7CiAgICAgICAgcmVuZGVyUmVwYXJ0aXRpb24oKTsKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbW9kYWwtZ3JpZC1jb25maWcnKS5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTsKICAgIH0KCiAgICAvLyAtLS0gTE9HSVFVRSBNRU5VIDUgOiBFTiBESVJFQ1QgKEFkYXB0w6kgYXV4IGNyw6luZWF1eCBsaWJyZXMpIC0tLQogICAgZnVuY3Rpb24gdXBkYXRlTGl2ZVZpZXcoKSB7CiAgICAgICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTsKICAgICAgICBjb25zdCBkYXlOYW1lcyA9IFsnRGltYW5jaGUnLCAnTHVuZGknLCAnTWFyZGknLCAnTWVyY3JlZGknLCAnSmV1ZGknLCAnVmVuZHJlZGknLCAnU2FtZWRpJ107CiAgICAgICAgY29uc3QgY3VycmVudERheUluZGV4ID0gbm93LmdldERheSgpOwogICAgICAgIGNvbnN0IGN1cnJlbnREYXlOYW1lID0gZGF5TmFtZXNbY3VycmVudERheUluZGV4XTsKICAgICAgICAKICAgICAgICAvLyBGb3JtYXRhZ2UgIkhIOk1NIiBwb3VyIGNvbXBhcmFpc29uCiAgICAgICAgY29uc3QgaG91cnMgPSBTdHJpbmcobm93LmdldEhvdXJzKCkpLnBhZFN0YXJ0KDIsICcwJyk7CiAgICAgICAgY29uc3QgbWludXRlcyA9IFN0cmluZyhub3cuZ2V0TWludXRlcygpKS5wYWRTdGFydCgyLCAnMCcpOwogICAgICAgIGNvbnN0IGN1cnJlbnRUaW1lU3RyID0gYCR7aG91cnN9OiR7bWludXRlc31gOwoKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbGl2ZS1kYXknKS50ZXh0Q29udGVudCA9IGN1cnJlbnREYXlOYW1lICsgIiAiICsgbm93LnRvTG9jYWxlRGF0ZVN0cmluZygpOwogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsaXZlLWNsb2NrJykudGV4dENvbnRlbnQgPSBub3cudG9Mb2NhbGVUaW1lU3RyaW5nKCk7CgogICAgICAgIGNvbnN0IGNvbnRhaW5lckFjdGl2ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsaXZlLWFjdGl2ZS1jb250YWluZXInKTsKICAgICAgICBjb25zdCBjb250YWluZXJJbmFjdGl2ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsaXZlLWluYWN0aXZlLWNvbnRhaW5lcicpOwogICAgICAgIAogICAgICAgIGlmKCFkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndmlldy1saXZlJykuY2xhc3NMaXN0LmNvbnRhaW5zKCdhY3RpdmUnKSkgcmV0dXJuOwoKICAgICAgICBjb250YWluZXJBY3RpdmUuaW5uZXJIVE1MID0gJyc7CiAgICAgICAgY29udGFpbmVySW5hY3RpdmUuaW5uZXJIVE1MID0gJyc7CgogICAgICAgIC8vIFRyb3V2ZXIgbCdpbmRleCBkdSBzbG90IGFjdGlmCiAgICAgICAgY29uc3QgYWN0aXZlU2xvdEluZGV4ID0gKERBVEEuY29uZmlnLnNsb3RzIHx8IERFRkFVTFRfU0xPVFMpLmZpbmRJbmRleChzbG90ID0+IHsKICAgICAgICAgICAgcmV0dXJuIGN1cnJlbnRUaW1lU3RyID49IHNsb3Quc3RhcnQgJiYgY3VycmVudFRpbWVTdHIgPCBzbG90LmVuZDsKICAgICAgICB9KTsKICAgICAgICAKICAgICAgICBsZXQgYWN0aXZlU2xvdExhYmVsID0gIkhPUlMgQ1LDiU5FQVUiOwogICAgICAgIGxldCBhY3RpdmVTbG90RW5kID0gIiI7CgogICAgICAgIGlmKGFjdGl2ZVNsb3RJbmRleCAhPT0gLTEpIHsKICAgICAgICAgICAgY29uc3Qgc2xvdCA9IChEQVRBLmNvbmZpZy5zbG90cyB8fCBERUZBVUxUX1NMT1RTKVthY3RpdmVTbG90SW5kZXhdOwogICAgICAgICAgICBhY3RpdmVTbG90TGFiZWwgPSBgJHtzbG90LnN0YXJ0fSAtICR7c2xvdC5lbmR9YDsKICAgICAgICAgICAgYWN0aXZlU2xvdEVuZCA9IHNsb3QuZW5kOwogICAgICAgIH0KCiAgICAgICAgbGV0IGhhc0FjdGl2ZSA9IGZhbHNlOwoKICAgICAgICBEQVRBLmFnZW50cy5mb3JFYWNoKGFnZW50ID0+IHsKICAgICAgICAgICAgLy8gTGEgY2zDqSBlc3QgYmFzw6llIHN1ciBsJ2luZGV4IGR1IHNsb3QgOiAiTHVuZGktMCIsICJMdW5kaS0xIiwgZXRjLgogICAgICAgICAgICBjb25zdCBrZXkgPSBgJHtjdXJyZW50RGF5TmFtZX0tJHthY3RpdmVTbG90SW5kZXh9YDsKICAgICAgICAgICAgY29uc3Qgc2NoZWR1bGUgPSBEQVRBLnNjaGVkdWxlc1thZ2VudC5uYW1lXTsKICAgICAgICAgICAgCiAgICAgICAgICAgIGxldCBpc0FjdGl2ZSA9IGZhbHNlOwogICAgICAgICAgICBsZXQgc2VydmljZUluZm8gPSBudWxsOwoKICAgICAgICAgICAgaWYgKGFjdGl2ZVNsb3RJbmRleCAhPT0gLTEgJiYgc2NoZWR1bGUgJiYgc2NoZWR1bGVba2V5XSkgewogICAgICAgICAgICAgICAgaXNBY3RpdmUgPSB0cnVlOwogICAgICAgICAgICAgICAgc2VydmljZUluZm8gPSBzY2hlZHVsZVtrZXldOwogICAgICAgICAgICB9CgogICAgICAgICAgICAvLyBDcsOpYXRpb24gZGUgbGEgY2FydGUKICAgICAgICAgICAgY29uc3QgY2FyZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgICAgICAgICBjYXJkLmNsYXNzTmFtZSA9IGBsaXZlLWNhcmQgJHtpc0FjdGl2ZSA/ICdhY3RpdmUnIDogJyd9YDsKICAgICAgICAgICAgCiAgICAgICAgICAgIGlmKGlzQWN0aXZlICYmIHNlcnZpY2VJbmZvLmNvbG9yKSB7CiAgICAgICAgICAgICAgICBjYXJkLnN0eWxlLmJvcmRlckxlZnRDb2xvciA9IHNlcnZpY2VJbmZvLmNvbG9yOwogICAgICAgICAgICB9CgogICAgICAgICAgICBjb25zdCBpc0xpZ2h0ID0gaXNBY3RpdmUgPyBpc0xpZ2h0Q29sb3Ioc2VydmljZUluZm8uY29sb3IpIDogdHJ1ZTsKICAgICAgICAgICAgY29uc3QgdGV4dENvbG9yID0gaXNMaWdodCA/ICcjMzMzJyA6ICd3aGl0ZSc7CgogICAgICAgICAgICBjYXJkLmlubmVySFRNTCA9IGAKICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImxpdmUtY2FyZC1ib2R5Ij4KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJsaXZlLWFnZW50LW5hbWUiPiR7YWdlbnQubmFtZX08L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJsaXZlLXN0YXR1cyIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICR7aXNBY3RpdmUgPyBzZXJ2aWNlSW5mby5jb2xvciA6ICcjZWVlJ307IGNvbG9yOiAke3RleHRDb2xvcn0iPgogICAgICAgICAgICAgICAgICAgICAgICAke2lzQWN0aXZlID8gc2VydmljZUluZm8udG9vbCA6IChhY3RpdmVTbG90SW5kZXggIT09IC0xID8gJ0xJQlJFIC8gTk9OIFBMQU5JRknDiScgOiAnSE9SUyBIT1JBSVJFJyl9CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgJHtpc0FjdGl2ZSA/IGA8ZGl2IHN0eWxlPSJtYXJnaW4tdG9wOjVweDsgZm9udC1zaXplOjAuOHJlbTsgY29sb3I6Izc3NzsiPkFjdHVlbGxlbWVudCA6ICR7YWN0aXZlU2xvdExhYmVsfTwvZGl2PmAgOiAnJ30KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICBgOwoKICAgICAgICAgICAgaWYoaXNBY3RpdmUpIHsKICAgICAgICAgICAgICAgIGNvbnRhaW5lckFjdGl2ZS5hcHBlbmRDaGlsZChjYXJkKTsKICAgICAgICAgICAgICAgIGhhc0FjdGl2ZSA9IHRydWU7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBjb250YWluZXJJbmFjdGl2ZS5hcHBlbmRDaGlsZChjYXJkKTsKICAgICAgICAgICAgfQogICAgICAgIH0pOwoKICAgICAgICBpZighaGFzQWN0aXZlKSB7CiAgICAgICAgICAgIGNvbnRhaW5lckFjdGl2ZS5pbm5lckhUTUwgPSBgPGRpdiBzdHlsZT0iZ3JpZC1jb2x1bW46MS8tMTsgdGV4dC1hbGlnbjpjZW50ZXI7IHBhZGRpbmc6MjBweDsgY29sb3I6I2FhYTsiPkF1Y3VuIEFFRCBlbiBwb3N0ZSBzdXIgbGUgY3LDqW5lYXUgYWN0dWVsICgke2FjdGl2ZVNsb3RMYWJlbH0pLjwvZGl2PmA7CiAgICAgICAgfQogICAgfQoKCiAgICAvLyAtLS0gTE9HSVFVRSBJTlRFUk5BVCAtLS0KICAgIGZ1bmN0aW9uIHVwZGF0ZUludGVybmF0KCkgewogICAgICAgIGNvbnN0IG5hbWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWVkLXNlbGVjdC1jb25jZXB0aW9uJykudmFsdWU7CiAgICAgICAgaWYoIW5hbWUpIHJldHVybjsKICAgICAgICBjb25zdCB2YWwgPSBwYXJzZUZsb2F0KGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbnRlcm5hdC1ob3VycycpLnZhbHVlKSB8fCAwOwogICAgICAgIGNvbnN0IGFnZW50ID0gREFUQS5hZ2VudHMuZmluZChhID0+IGEubmFtZSA9PT0gbmFtZSk7CiAgICAgICAgaWYoYWdlbnQpIHsKICAgICAgICAgICAgYWdlbnQuaW50ZXJuYXRIb3VycyA9IHZhbDsKICAgICAgICAgICAgc2F2ZUxvY2FsU3RvcmFnZSgpOwogICAgICAgICAgICB1cGRhdGVTdGF0c0hlYWRlcigpOwogICAgICAgIH0KICAgIH0KCiAgICAvLyAtLS0gSU1QUkVTU0lPTlMgLS0tCiAgICBmdW5jdGlvbiBwcmludERhc2hib2FyZCgpIHsKICAgICAgICBpZihEQVRBLmFnZW50cy5sZW5ndGggPT09IDApIHsgYWxlcnQoIkF1Y3VuZSBkb25uw6llLiIpOyByZXR1cm47IH0KICAgICAgICBjb25zdCBhcmVhID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Rhc2hib2FyZC1wcmludC1hcmVhJyk7CiAgICAgICAgYXJlYS5pbm5lckhUTUwgPSBgCiAgICAgICAgICAgIDxkaXYgY2xhc3M9InByaW50LWhlYWRlci1iYXRjaCI+UsOpY2FwaXR1bGF0aWYgZGVzIEFnZW50cyAtIEFFRCBQSUxPVEU8L2Rpdj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0iZGFzaGJvYXJkLWdyaWQiPiR7ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Rhc2hib2FyZC1hcmVhJykuaW5uZXJIVE1MfTwvZGl2PgogICAgICAgIGA7CiAgICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuYWRkKCdwcmludGluZy1kYXNoYm9hcmQnLCAncHJpbnRpbmctbW9kZScpOwogICAgICAgIHdpbmRvdy5wcmludCgpOwogICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5yZW1vdmUoJ3ByaW50aW5nLWRhc2hib2FyZCcsICdwcmludGluZy1tb2RlJyk7CiAgICAgICAgICAgIGFyZWEuaW5uZXJIVE1MID0gJyc7CiAgICAgICAgfSwgMTAwMCk7CiAgICB9CgogICAgZnVuY3Rpb24gcHJpbnRHZXN0aW9uKCkgewogICAgICAgIGNvbnN0IG5hbWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWVkLXNlbGVjdC1nZXN0aW9uJykudmFsdWU7CiAgICAgICAgaWYoIW5hbWUpIHsgYWxlcnQoIlPDqWxlY3Rpb25uZXogdW4gYWdlbnQiKTsgcmV0dXJuOyB9CiAgICAgICAgY29uc3QgYW5udWFsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FubnVhbC10YXJnZXQtZGlzcGxheScpLmlubmVyVGV4dDsKICAgICAgICBjb25zdCBzb2xkZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdiYWxhbmNlLWRpc3BsYXknKS5pbm5lclRleHQ7CiAgICAgICAgY29uc3QgaGlzdG9yeSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdoaXN0b3J5LWJvZHknKS5pbm5lckhUTUw7CiAgICAgICAgY29uc3QgYXJlYSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdnZXN0aW9uLXByaW50LWFyZWEnKTsKICAgICAgICBhcmVhLmlubmVySFRNTCA9IGAKICAgICAgICAgICAgPGRpdiBjbGFzcz0icHJpbnQtaGVhZGVyLWJhdGNoIj5GaWNoZSBkZSBHZXN0aW9uIDogJHtuYW1lfTwvZGl2PgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJnZXN0aW9uLXN0YXRzLWNvbnRhaW5lciI+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJiYWxhbmNlLWJveCI+PGgzPk9iamVjdGlmIEFubnVlbDwvaDM+PGRpdiBjbGFzcz0iYmFsYW5jZS1hbW91bnQiPiR7YW5udWFsfTwvZGl2PjwvZGl2PgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iYmFsYW5jZS1ib3ggc2Vjb25kYXJ5Ij48aDM+U29sZGUgQWp1c3RlbWVudHM8L2gzPjxkaXYgY2xhc3M9ImJhbGFuY2UtYW1vdW50Ij4ke3NvbGRlfTwvZGl2PjwvZGl2PgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPGgzPkhpc3RvcmlxdWUgZGVzIG1vdXZlbWVudHM8L2gzPgogICAgICAgICAgICA8dGFibGUgY2xhc3M9Imhpc3RvcnktdGFibGUiPjx0aGVhZD48dHI+PHRoPkRhdGU8L3RoPjx0aD5UeXBlPC90aD48dGg+TW90aWY8L3RoPjx0aD5IPC90aD48dGg+PC90aD48L3RyPjwvdGhlYWQ+PHRib2R5PiR7aGlzdG9yeX08L3Rib2R5PjwvdGFibGU+CiAgICAgICAgYDsKICAgICAgICBjb25zdCB0cmFzaGVzID0gYXJlYS5xdWVyeVNlbGVjdG9yQWxsKCcuZmEtdHJhc2gnKTsKICAgICAgICB0cmFzaGVzLmZvckVhY2godCA9PiB0LnN0eWxlLmRpc3BsYXkgPSAnbm9uZScpOwogICAgICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmFkZCgncHJpbnRpbmctZ2VzdGlvbicsICdwcmludGluZy1tb2RlJyk7CiAgICAgICAgd2luZG93LnByaW50KCk7CiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LnJlbW92ZSgncHJpbnRpbmctZ2VzdGlvbicsICdwcmludGluZy1tb2RlJyk7CiAgICAgICAgICAgIGFyZWEuaW5uZXJIVE1MID0gJyc7CiAgICAgICAgfSwgMTAwMCk7CiAgICB9CgogICAgZnVuY3Rpb24gcHJpbnRSZXBhcnRpdGlvbigpIHsKICAgICAgICBjb25zdCBkYXkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVwYXJ0aXRpb24tZGF5LXNlbGVjdCcpLnZhbHVlOwogICAgICAgIGNvbnN0IGNvbnRlbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVwYXJ0aXRpb24tY29udGVudCcpLmlubmVySFRNTDsKICAgICAgICBjb25zdCBhcmVhID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JlcGFydGl0aW9uLXByaW50LWFyZWEnKTsKICAgICAgICAKICAgICAgICBhcmVhLmlubmVySFRNTCA9IGAKICAgICAgICAgICAgPGRpdiBjbGFzcz0icHJpbnQtaGVhZGVyLWJhdGNoIj5RdWkgZmFpdCBxdW9pID8gLSAke2RheX08L2Rpdj4KICAgICAgICAgICAgJHtjb250ZW50fQogICAgICAgIGA7CiAgICAgICAgCiAgICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuYWRkKCdwcmludGluZy1yZXBhcnRpdGlvbicsICdwcmludGluZy1tb2RlJyk7CiAgICAgICAgd2luZG93LnByaW50KCk7CiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LnJlbW92ZSgncHJpbnRpbmctcmVwYXJ0aXRpb24nLCAncHJpbnRpbmctbW9kZScpOwogICAgICAgICAgICBhcmVhLmlubmVySFRNTCA9ICcnOwogICAgICAgIH0sIDEwMDApOwogICAgfQoKICAgIC8vIC0tLSBJTVBSRVNTSU9OIFBBUiBBR0VOVCAtLS0KICAgIGZ1bmN0aW9uIHByaW50U2luZ2xlKCkgewogICAgICAgIGNvbnN0IG5hbWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWVkLXNlbGVjdC1jb25jZXB0aW9uJykudmFsdWU7CiAgICAgICAgaWYoIW5hbWUpIHsgYWxlcnQoIlPDqWxlY3Rpb25uZXogdW4gYWdlbnQgISIpOyByZXR1cm47IH0KICAgICAgICAKICAgICAgICBjb25zdCBhZ2VudCA9IERBVEEuYWdlbnRzLmZpbmQoYSA9PiBhLm5hbWUgPT09IG5hbWUpOwogICAgICAgIGlmKCFhZ2VudCkgcmV0dXJuOwoKICAgICAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYmF0Y2gtcHJpbnQtYXJlYScpOwogICAgICAgIGNvbnRhaW5lci5pbm5lckhUTUwgPSAnJzsgCiAgICAgICAgCiAgICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuYWRkKCdwcmludGluZy1iYXRjaCcsICdwcmludGluZy1tb2RlJyk7CgogICAgICAgIGNvbnN0IHBhZ2VEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgICAgICBwYWdlRGl2LmNsYXNzTmFtZSA9ICdwYWdlLWJyZWFrJzsKICAgICAgICBwYWdlRGl2LmlubmVySFRNTCA9IGA8ZGl2IGNsYXNzPSJwcmludC1oZWFkZXItYmF0Y2giPkVtcGxvaSBkdSB0ZW1wcyA6ICR7YWdlbnQubmFtZX0gKCR7YWdlbnQuZnRlTGFiZWx9KTwvZGl2PmA7CiAgICAgICAgCiAgICAgICAgY29uc3QgdGFibGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0YWJsZScpOwogICAgICAgIHRhYmxlLmNsYXNzTmFtZSA9ICdlZHQtdGFibGUnOwogICAgICAgIHRhYmxlLmlubmVySFRNTCA9IGdlbmVyYXRlVGFibGVIVE1MKGFnZW50Lm5hbWUpOwogICAgICAgIAogICAgICAgIHBhZ2VEaXYuYXBwZW5kQ2hpbGQodGFibGUpOwogICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChwYWdlRGl2KTsKCiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgIHdpbmRvdy5wcmludCgpOwogICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LnJlbW92ZSgncHJpbnRpbmctYmF0Y2gnLCAncHJpbnRpbmctbW9kZScpOwogICAgICAgICAgICAgICAgY29udGFpbmVyLmlubmVySFRNTCA9ICcnOwogICAgICAgICAgICB9LCAxMDAwKTsKICAgICAgICB9LCA1MDApOwogICAgfQoKICAgIGZ1bmN0aW9uIHByaW50QWxsKCkgewogICAgICAgIGlmKERBVEEuYWdlbnRzLmxlbmd0aCA9PT0gMCkgeyBhbGVydCgiQXVjdW4gYWdlbnQgw6AgaW1wcmltZXIuIik7IHJldHVybjsgfQogICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdiYXRjaC1wcmludC1hcmVhJyk7CiAgICAgICAgY29udGFpbmVyLmlubmVySFRNTCA9ICcnOyAKICAgICAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5hZGQoJ3ByaW50aW5nLWJhdGNoJywgJ3ByaW50aW5nLW1vZGUnKTsKICAgICAgICBEQVRBLmFnZW50cy5mb3JFYWNoKChhZ2VudCwgaW5kZXgpID0+IHsKICAgICAgICAgICAgY29uc3QgcGFnZURpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgICAgICAgICBwYWdlRGl2LmNsYXNzTmFtZSA9ICdwYWdlLWJyZWFrJzsKICAgICAgICAgICAgcGFnZURpdi5pbm5lckhUTUwgPSBgPGRpdiBjbGFzcz0icHJpbnQtaGVhZGVyLWJhdGNoIj5FbXBsb2kgZHUgdGVtcHMgOiAke2FnZW50Lm5hbWV9ICgke2FnZW50LmZ0ZUxhYmVsfSk8L2Rpdj5gOwogICAgICAgICAgICBjb25zdCB0YWJsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RhYmxlJyk7CiAgICAgICAgICAgIHRhYmxlLmNsYXNzTmFtZSA9ICdlZHQtdGFibGUnOwogICAgICAgICAgICB0YWJsZS5pbm5lckhUTUwgPSBnZW5lcmF0ZVRhYmxlSFRNTChhZ2VudC5uYW1lKTsKICAgICAgICAgICAgcGFnZURpdi5hcHBlbmRDaGlsZCh0YWJsZSk7CiAgICAgICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChwYWdlRGl2KTsKICAgICAgICB9KTsKICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgICAgd2luZG93LnByaW50KCk7CiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QucmVtb3ZlKCdwcmludGluZy1iYXRjaCcsICdwcmludGluZy1tb2RlJyk7CiAgICAgICAgICAgICAgICBjb250YWluZXIuaW5uZXJIVE1MID0gJyc7CiAgICAgICAgICAgIH0sIDEwMDApOwogICAgICAgIH0sIDUwMCk7CiAgICB9CgogICAgLy8gR0VTVElPTiBEVSBSRU5EVSBERSBMQSBUQUJMRSAoQWRhcHTDqSBhdXggc2xvdHMpCiAgICBmdW5jdGlvbiBnZW5lcmF0ZVRhYmxlSFRNTChhZ2VudE5hbWUpIHsKICAgICAgICBsZXQgaHRtbCA9IGA8dGhlYWQ+PHRyPjx0aCBzdHlsZT0id2lkdGg6OTBweCI+SDwvdGg+YDsKICAgICAgICBEQVlTLmZvckVhY2goZCA9PiBodG1sICs9IGA8dGg+JHtkfTwvdGg+YCk7CiAgICAgICAgaHRtbCArPSBgPC90cj48L3RoZWFkPjx0Ym9keT5gOwogICAgICAgIGNvbnN0IGFnZW50ID0gREFUQS5hZ2VudHMuZmluZChhID0+IGEubmFtZSA9PT0gYWdlbnROYW1lKTsKICAgICAgICBjb25zdCBzY2hlZCA9IERBVEEuc2NoZWR1bGVzW2FnZW50TmFtZV0gfHwge307CiAgICAgICAgCiAgICAgICAgY29uc3Qgc2xvdHMgPSAoREFUQS5jb25maWcuc2xvdHMgJiYgREFUQS5jb25maWcuc2xvdHMubGVuZ3RoID4gMCkgPyBEQVRBLmNvbmZpZy5zbG90cyA6IERFRkFVTFRfU0xPVFM7CgogICAgICAgIC8vIEJvdWNsZSBzdXIgbGVzIGNyw6luZWF1eCBkw6lmaW5pcwogICAgICAgIHNsb3RzLmZvckVhY2goKHNsb3QsIGluZGV4KSA9PiB7CiAgICAgICAgICAgIGh0bWwgKz0gYDx0cj48dGQgY2xhc3M9InRpbWUtY29sIj4ke3Nsb3Quc3RhcnR9PGJyPi08YnI+JHtzbG90LmVuZH08L3RkPmA7CiAgICAgICAgICAgIERBWVMuZm9yRWFjaChkYXkgPT4gewogICAgICAgICAgICAgICAgLy8gTGEgY2zDqSBzdG9ja8OpZSBlc3QgSm91ci1JbmRleCAoZXg6IEx1bmRpLTApIHBvdXIgw6p0cmUgaW5kw6lwZW5kYW50ZSBkdSB0ZXh0ZQogICAgICAgICAgICAgICAgY29uc3Qga2V5ID0gYCR7ZGF5fS0ke2luZGV4fWA7CiAgICAgICAgICAgICAgICBsZXQgY29udGVudCA9ICcnOwogICAgICAgICAgICAgICAgbGV0IGNlbGxDbGFzcyA9ICcnOwogICAgICAgICAgICAgICAgaWYoYWdlbnQgJiYgYWdlbnQuY29uc3RyYWludHMudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhkYXkudG9Mb3dlckNhc2UoKSkpIHsKICAgICAgICAgICAgICAgICAgICBjZWxsQ2xhc3MgPSAnY2VsbC1ibG9ja2VkJzsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZihzY2hlZFtrZXldKSB7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgYmdDb2xvciA9IHNjaGVkW2tleV0uY29sb3IgfHwgJyM5OTknOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IHRleHRDb2xvciA9IGlzTGlnaHRDb2xvcihiZ0NvbG9yKSA/ICcjMzMzJyA6ICd3aGl0ZSc7CiAgICAgICAgICAgICAgICAgICAgY29udGVudCA9IGA8ZGl2IGNsYXNzPSJjZWxsLWNvbnRlbnQiIHN0eWxlPSJiYWNrZ3JvdW5kLWNvbG9yOiR7YmdDb2xvcn07Y29sb3I6JHt0ZXh0Q29sb3J9Ij4ke3NjaGVkW2tleV0udG9vbH08L2Rpdj5gOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaHRtbCArPSBgPHRkIGNsYXNzPSIke2NlbGxDbGFzc30iPiR7Y29udGVudH08L3RkPmA7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBodG1sICs9IGA8L3RyPmA7CiAgICAgICAgfSk7CiAgICAgICAgaHRtbCArPSBgPC90Ym9keT5gOwogICAgICAgIHJldHVybiBodG1sOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBpc0xpZ2h0Q29sb3IoaGV4KSB7CiAgICAgICAgY29uc3QgYyA9IGhleC5zdWJzdHJpbmcoMSk7CiAgICAgICAgY29uc3QgcmdiID0gcGFyc2VJbnQoYywgMTYpOwogICAgICAgIGNvbnN0IHIgPSAocmdiID4+IDE2KSAmIDB4ZmY7CiAgICAgICAgY29uc3QgZyA9IChyZ2IgPj4gIDgpICYgMHhmZjsKICAgICAgICBjb25zdCBiID0gKHJnYiA+PiAgMCkgJiAweGZmOwogICAgICAgIGNvbnN0IGx1bWEgPSAwLjI5OSAqIHIgKyAwLjU4NyAqIGcgKyAwLjExNCAqIGI7CiAgICAgICAgcmV0dXJuIGx1bWEgPiAxNjA7CiAgICB9CgogICAgLy8gLS0tIFNZU1RFTUUgLS0tCiAgICBmdW5jdGlvbiByZXNldEFsbERhdGEoKSB7CiAgICAgICAgaWYoY29uZmlybSgiw4p0ZXMtdm91cyBzw7tyIGRlIHZvdWxvaXIgVE9VVCBlZmZhY2VyIGV0IHJlcGFydGlyIMOgIHrDqXJvID8gQ2V0dGUgYWN0aW9uIGVzdCBpcnLDqXZlcnNpYmxlLiIpKSB7CiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKFNUT1JBR0VfS0VZKTsKICAgICAgICAgICAgbG9jYXRpb24ucmVsb2FkKCk7CiAgICAgICAgfQogICAgfQogICAgZnVuY3Rpb24gZG93bmxvYWRKU09OKCkgewogICAgICAgIGNvbnN0IGRhdGFTdHIgPSAiZGF0YTp0ZXh0L2pzb247Y2hhcnNldD11dGYtOCwiICsgZW5jb2RlVVJJQ29tcG9uZW50KEpTT04uc3RyaW5naWZ5KERBVEEpKTsKICAgICAgICBjb25zdCBhbmNob3IgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7CiAgICAgICAgYW5jaG9yLnNldEF0dHJpYnV0ZSgiaHJlZiIsIGRhdGFTdHIpOyBhbmNob3Iuc2V0QXR0cmlidXRlKCJkb3dubG9hZCIsICJzYXV2ZWdhcmRlX2FlZF9waWxvdGUuanNvbiIpOwogICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoYW5jaG9yKTsgYW5jaG9yLmNsaWNrKCk7IGFuY2hvci5yZW1vdmUoKTsKICAgIH0KICAgIGZ1bmN0aW9uIGltcG9ydEpTT04oaW5wdXQpIHsKICAgICAgICBjb25zdCBmaWxlID0gaW5wdXQuZmlsZXNbMF07CiAgICAgICAgaWYoIWZpbGUpIHJldHVybjsKICAgICAgICBjb25zdCByID0gbmV3IEZpbGVSZWFkZXIoKTsKICAgICAgICByLm9ubG9hZCA9IGUgPT4geyB0cnl7IERBVEEgPSBKU09OLnBhcnNlKGUudGFyZ2V0LnJlc3VsdCk7IHNhdmVMb2NhbFN0b3JhZ2UoKTsgcmVmcmVzaEFsbFVJKCk7IH1jYXRjaChlKXthbGVydCgiRXJyZXVyIik7fSB9OwogICAgICAgIHIucmVhZEFzVGV4dChmaWxlKTsKICAgIH0KICAgIGZ1bmN0aW9uIHNhdmVMb2NhbFN0b3JhZ2UoKSB7IGxvY2FsU3RvcmFnZS5zZXRJdGVtKFNUT1JBR0VfS0VZLCBKU09OLnN0cmluZ2lmeShEQVRBKSk7IH0KICAgIAogICAgZnVuY3Rpb24gbG9hZExvY2FsU3RvcmFnZSgpIHsgCiAgICAgICAgbGV0IGogPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShTVE9SQUdFX0tFWSk7CiAgICAgICAgaWYoaikgeyAKICAgICAgICAgICAgREFUQSA9IEpTT04ucGFyc2Uoaik7IAogICAgICAgICAgICAvLyBSw6l0cm8tY29tcGF0aWJpbGl0w6kgOiBzaSBwYXMgZGUgc2xvdHMsIG9uIG1ldCBjZXV4IHBhciBkw6lmYXV0CiAgICAgICAgICAgIGlmKCFEQVRBLmNvbmZpZykgREFUQS5jb25maWcgPSB7IHNsb3RzOiBERUZBVUxUX1NMT1RTIH07CiAgICAgICAgICAgIGlmKCFEQVRBLmNvbmZpZy5zbG90cykgREFUQS5jb25maWcuc2xvdHMgPSBERUZBVUxUX1NMT1RTOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIC8vIFByZW1pZXIgbGFuY2VtZW50CiAgICAgICAgICAgIERBVEEuY29uZmlnLnNsb3RzID0gREVGQVVMVF9TTE9UUzsKICAgICAgICB9CiAgICAgICAgcmVmcmVzaEFsbFVJKCk7IAogICAgfQogICAgZnVuY3Rpb24gcmVmcmVzaEFsbFVJKCkgeyByZW5kZXJPdmVydmlldygpOyBwb3B1bGF0ZVNlbGVjdHMoKTsgcmVuZGVyVGltZXRhYmxlKCk7IHJlbmRlckltcG9ydEluZm8oKTsgcmVuZGVyUGFsZXR0ZSgpOyB9CgogICAgLy8gLS0tIEdFU1RJT04gREVTIFNFUlZJQ0VTIChQQUxFVFRFIERZTkFNSVFVRSkgLS0tCiAgICBmdW5jdGlvbiBnZXRBbGxTZXJ2aWNlcygpIHsKICAgICAgICBjb25zdCBjdXN0b21TZXJ2aWNlcyA9IERBVEEuc2VydmljZXMgfHwgW107CiAgICAgICAgcmV0dXJuIFsuLi5ERUZBVUxUX1NFUlZJQ0VTLCAuLi5jdXN0b21TZXJ2aWNlc107CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIHJlbmRlclBhbGV0dGUoKSB7CiAgICAgICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BhbGV0dGUtY29udGFpbmVyJyk7CiAgICAgICAgaWYoIWNvbnRhaW5lcikgcmV0dXJuOwogICAgICAgIAogICAgICAgIGNvbnRhaW5lci5pbm5lckhUTUwgPSAnJzsKICAgICAgICBjb25zdCBzZXJ2aWNlcyA9IGdldEFsbFNlcnZpY2VzKCk7CiAgICAgICAgCiAgICAgICAgc2VydmljZXMuZm9yRWFjaCgoc2VydmljZSwgaW5kZXgpID0+IHsKICAgICAgICAgICAgY29uc3QgaXNMaWdodCA9IGlzTGlnaHRDb2xvcihzZXJ2aWNlLmNvbG9yKTsKICAgICAgICAgICAgY29uc3QgdGV4dENvbG9yID0gaXNMaWdodCA/ICcjMzMzJyA6ICd3aGl0ZSc7CiAgICAgICAgICAgIGNvbnN0IHRleHRTaGFkb3cgPSBpc0xpZ2h0ID8gJ25vbmUnIDogJzAgMXB4IDFweCByZ2JhKDAsMCwwLDAuMiknOwogICAgICAgICAgICAKICAgICAgICAgICAgY29uc3Qgd3JhcHBlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgICAgICAgICB3cmFwcGVyLmNsYXNzTmFtZSA9ICdwYWxldHRlLWJ0bi13cmFwcGVyJzsKICAgICAgICAgICAgCiAgICAgICAgICAgIGNvbnN0IGJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgICAgICAgICBidG4uY2xhc3NOYW1lID0gJ3BhbGV0dGUtYnRuJyArIChpbmRleCA9PT0gMCA/ICcgc2VsZWN0ZWQnIDogJycpOwogICAgICAgICAgICBidG4uc3R5bGUuYmFja2dyb3VuZENvbG9yID0gc2VydmljZS5jb2xvcjsKICAgICAgICAgICAgYnRuLnN0eWxlLmNvbG9yID0gdGV4dENvbG9yOwogICAgICAgICAgICBidG4uc3R5bGUudGV4dFNoYWRvdyA9IHRleHRTaGFkb3c7CiAgICAgICAgICAgIGJ0bi50ZXh0Q29udGVudCA9IHNlcnZpY2UubmFtZTsKICAgICAgICAgICAgYnRuLm9uY2xpY2sgPSBmdW5jdGlvbihlKSB7IHNldFRvb2woc2VydmljZS5uYW1lLCBzZXJ2aWNlLmNvbG9yKTsgfTsKICAgICAgICAgICAgCiAgICAgICAgICAgIHdyYXBwZXIuYXBwZW5kQ2hpbGQoYnRuKTsKICAgICAgICAgICAgCiAgICAgICAgICAgIGlmKCFzZXJ2aWNlLmlzRGVmYXVsdCkgewogICAgICAgICAgICAgICAgY29uc3QgZGVsZXRlQnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7CiAgICAgICAgICAgICAgICBkZWxldGVCdG4uY2xhc3NOYW1lID0gJ3NlcnZpY2UtZGVsZXRlJzsKICAgICAgICAgICAgICAgIGRlbGV0ZUJ0bi5pbm5lckhUTUwgPSAnw5cnOwogICAgICAgICAgICAgICAgZGVsZXRlQnRuLnRpdGxlID0gJ1N1cHByaW1lciBjZSBzZXJ2aWNlJzsKICAgICAgICAgICAgICAgIGRlbGV0ZUJ0bi5vbmNsaWNrID0gZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgICAgICAgICAgICAgICAgZGVsZXRlU2VydmljZShzZXJ2aWNlLmlkKTsKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB3cmFwcGVyLmFwcGVuZENoaWxkKGRlbGV0ZUJ0bik7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgCiAgICAgICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZCh3cmFwcGVyKTsKICAgICAgICB9KTsKICAgICAgICAKICAgICAgICBjb25zdCBhZGRCdG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgICAgICBhZGRCdG4uY2xhc3NOYW1lID0gJ3BhbGV0dGUtYnRuIGJ0bi1hZGQtc2VydmljZSc7CiAgICAgICAgYWRkQnRuLmlubmVySFRNTCA9ICc8aSBjbGFzcz0iZmFzIGZhLXBsdXMiPjwvaT4nOwogICAgICAgIGFkZEJ0bi50aXRsZSA9ICdBam91dGVyIHVuIHNlcnZpY2UnOwogICAgICAgIGFkZEJ0bi5vbmNsaWNrID0gb3BlblNlcnZpY2VNb2RhbDsKICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoYWRkQnRuKTsKICAgICAgICAKICAgICAgICBjb25zdCBlcmFzZXJCdG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgICAgICBlcmFzZXJCdG4uY2xhc3NOYW1lID0gJ3BhbGV0dGUtYnRuIGJnLWVyYXNlcic7CiAgICAgICAgZXJhc2VyQnRuLmlubmVySFRNTCA9ICc8aSBjbGFzcz0iZmFzIGZhLWVyYXNlciI+PC9pPic7CiAgICAgICAgZXJhc2VyQnRuLm9uY2xpY2sgPSBmdW5jdGlvbigpIHsgc2V0VG9vbCgnZ29tbWUnLCAnJyk7IH07CiAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGVyYXNlckJ0bik7CiAgICAgICAgCiAgICAgICAgaWYoc2VydmljZXMubGVuZ3RoID4gMCkgewogICAgICAgICAgICBDVVJSRU5UX1RPT0wgPSB7IG5hbWU6IHNlcnZpY2VzWzBdLm5hbWUsIGNvbG9yOiBzZXJ2aWNlc1swXS5jb2xvciwgaXNFcmFzZXI6IGZhbHNlIH07CiAgICAgICAgfQogICAgfQogICAgCiAgICBmdW5jdGlvbiBvcGVuU2VydmljZU1vZGFsKCkgewogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtb2RhbC1zZXJ2aWNlJykuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7CiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NlcnZpY2UtbmFtZScpLnZhbHVlID0gJyc7CiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NlcnZpY2UtY29sb3InKS52YWx1ZSA9ICcjMzQ5OGRiJzsKICAgICAgICB1cGRhdGVQcmV2aWV3KCk7CiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NlcnZpY2UtbmFtZScpLmZvY3VzKCk7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIGNsb3NlU2VydmljZU1vZGFsKCkgewogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtb2RhbC1zZXJ2aWNlJykuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIHNldFByZXNldENvbG9yKGNvbG9yKSB7CiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NlcnZpY2UtY29sb3InKS52YWx1ZSA9IGNvbG9yOwogICAgICAgIHVwZGF0ZVByZXZpZXcoKTsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gdXBkYXRlUHJldmlldygpIHsKICAgICAgICBjb25zdCBuYW1lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NlcnZpY2UtbmFtZScpLnZhbHVlLnRyaW0oKSB8fCAnTk9VVkVBVSBTRVJWSUNFJzsKICAgICAgICBjb25zdCBjb2xvciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZXJ2aWNlLWNvbG9yJykudmFsdWU7CiAgICAgICAgY29uc3QgcHJldmlldyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZXJ2aWNlLXByZXZpZXcnKTsKICAgICAgICBwcmV2aWV3LnRleHRDb250ZW50ID0gbmFtZS50b1VwcGVyQ2FzZSgpOwogICAgICAgIHByZXZpZXcuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gY29sb3I7CiAgICAgICAgcHJldmlldy5zdHlsZS5jb2xvciA9IGlzTGlnaHRDb2xvcihjb2xvcikgPyAnIzMzMycgOiAnd2hpdGUnOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBjb25maXJtQWRkU2VydmljZSgpIHsKICAgICAgICBjb25zdCBuYW1lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NlcnZpY2UtbmFtZScpLnZhbHVlLnRyaW0oKTsKICAgICAgICBjb25zdCBjb2xvciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZXJ2aWNlLWNvbG9yJykudmFsdWU7CiAgICAgICAgCiAgICAgICAgaWYoIW5hbWUpIHsgYWxlcnQoJ1ZldWlsbGV6IGVudHJlciB1biBub20gcG91ciBsZSBzZXJ2aWNlJyk7IHJldHVybjsgfQogICAgICAgIGlmKG5hbWUubGVuZ3RoID4gMTUpIHsgYWxlcnQoJ0xlIG5vbSBkdSBzZXJ2aWNlIG5lIGRvaXQgcGFzIGTDqXBhc3NlciAxNSBjYXJhY3TDqHJlcycpOyByZXR1cm47IH0KICAgICAgICAKICAgICAgICBjb25zdCBhbGxTZXJ2aWNlcyA9IGdldEFsbFNlcnZpY2VzKCk7CiAgICAgICAgaWYoYWxsU2VydmljZXMuc29tZShzID0+IHMubmFtZS50b0xvd2VyQ2FzZSgpID09PSBuYW1lLnRvTG93ZXJDYXNlKCkpKSB7IGFsZXJ0KCdVbiBzZXJ2aWNlIGF2ZWMgY2Ugbm9tIGV4aXN0ZSBkw6lqw6AnKTsgcmV0dXJuOyB9CiAgICAgICAgCiAgICAgICAgY29uc3QgbmV3U2VydmljZSA9IHsgaWQ6ICdjdXN0b21fJyArIERhdGUubm93KCksIG5hbWU6IG5hbWUsIGNvbG9yOiBjb2xvciwgaXNEZWZhdWx0OiBmYWxzZSB9OwogICAgICAgIGlmKCFEQVRBLnNlcnZpY2VzKSBEQVRBLnNlcnZpY2VzID0gW107CiAgICAgICAgREFUQS5zZXJ2aWNlcy5wdXNoKG5ld1NlcnZpY2UpOwogICAgICAgIAogICAgICAgIHNhdmVMb2NhbFN0b3JhZ2UoKTsKICAgICAgICByZW5kZXJQYWxldHRlKCk7CiAgICAgICAgY2xvc2VTZXJ2aWNlTW9kYWwoKTsKICAgICAgICAKICAgICAgICBDVVJSRU5UX1RPT0wgPSB7IG5hbWU6IG5ld1NlcnZpY2UubmFtZSwgY29sb3I6IG5ld1NlcnZpY2UuY29sb3IsIGlzRXJhc2VyOiBmYWxzZSB9OwogICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5wYWxldHRlLWJ0bicpLmZvckVhY2goYiA9PiBiLmNsYXNzTGlzdC5yZW1vdmUoJ3NlbGVjdGVkJykpOwogICAgICAgIGNvbnN0IGJ0bnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcucGFsZXR0ZS1idG4nKTsKICAgICAgICBpZihidG5zLmxlbmd0aCA+IDIpIGJ0bnNbYnRucy5sZW5ndGggLSAzXS5jbGFzc0xpc3QuYWRkKCdzZWxlY3RlZCcpOyAKICAgIH0KICAgIAogICAgZnVuY3Rpb24gZGVsZXRlU2VydmljZShzZXJ2aWNlSWQpIHsKICAgICAgICBpZighY29uZmlybSgnU3VwcHJpbWVyIGNlIHNlcnZpY2UgPycpKSByZXR1cm47CiAgICAgICAgREFUQS5zZXJ2aWNlcyA9IChEQVRBLnNlcnZpY2VzIHx8IFtdKS5maWx0ZXIocyA9PiBzLmlkICE9PSBzZXJ2aWNlSWQpOwogICAgICAgIHNhdmVMb2NhbFN0b3JhZ2UoKTsKICAgICAgICByZW5kZXJQYWxldHRlKCk7CiAgICB9CiAgICAKICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZSkgewogICAgICAgIGNvbnN0IG1vZGFsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21vZGFsLXNlcnZpY2UnKTsKICAgICAgICBpZihlLnRhcmdldCA9PT0gbW9kYWwpIGNsb3NlU2VydmljZU1vZGFsKCk7CiAgICAgICAgY29uc3QgbW9kYWxHcmlkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21vZGFsLWdyaWQtY29uZmlnJyk7CiAgICAgICAgaWYoZS50YXJnZXQgPT09IG1vZGFsR3JpZCkgbW9kYWxHcmlkLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpOwogICAgfSk7CiAgICAKICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBmdW5jdGlvbigpIHsKICAgICAgICBjb25zdCBuYW1lSW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2VydmljZS1uYW1lJyk7CiAgICAgICAgaWYobmFtZUlucHV0KSBuYW1lSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCB1cGRhdGVQcmV2aWV3KTsKICAgIH0pOwoKICAgIC8vIC0tLSBMT0dJUVVFIE1FTlUgNCA6IFFVSSBGQUlUIFFVT0kgKFJFUEFSVElUSU9OKSAtLS0KICAgIGZ1bmN0aW9uIHJlbmRlclJlcGFydGl0aW9uKCkgewogICAgICAgIGNvbnN0IGRheSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXBhcnRpdGlvbi1kYXktc2VsZWN0JykudmFsdWU7CiAgICAgICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JlcGFydGl0aW9uLWNvbnRlbnQnKTsKICAgICAgICBjb25zdCBzZXJ2aWNlcyA9IGdldEFsbFNlcnZpY2VzKCk7CiAgICAgICAgCiAgICAgICAgaWYoIWNvbnRhaW5lcikgcmV0dXJuOwoKICAgICAgICBsZXQgaHRtbCA9IGA8dGFibGUgY2xhc3M9InJlcGFydGl0aW9uLXRhYmxlIj48dGhlYWQ+PHRyPmA7CiAgICAgICAgaHRtbCArPSBgPHRoIHN0eWxlPSJ3aWR0aDo5MHB4OyBiYWNrZ3JvdW5kOiMyYzNlNTA7IHotaW5kZXg6MjA7Ij5Ib3JhaXJlPC90aD5gOwogICAgICAgIAogICAgICAgIHNlcnZpY2VzLmZvckVhY2gocyA9PiB7CiAgICAgICAgICAgIGNvbnN0IGlzTGlnaHQgPSBpc0xpZ2h0Q29sb3Iocy5jb2xvcik7CiAgICAgICAgICAgIGNvbnN0IHRleHRDb2xvciA9IGlzTGlnaHQgPyAnIzMzMycgOiAnd2hpdGUnOwogICAgICAgICAgICBodG1sICs9IGA8dGggc3R5bGU9ImJhY2tncm91bmQ6JHtzLmNvbG9yfTsgY29sb3I6JHt0ZXh0Q29sb3J9OyBib3JkZXItY29sb3I6JHtpc0xpZ2h0PycjY2NjJzpzLmNvbG9yfSI+JHtzLm5hbWV9PC90aD5gOwogICAgICAgIH0pOwogICAgICAgIGh0bWwgKz0gYDwvdHI+PC90aGVhZD48dGJvZHk+YDsKCiAgICAgICAgY29uc3Qgc2xvdHMgPSAoREFUQS5jb25maWcuc2xvdHMgJiYgREFUQS5jb25maWcuc2xvdHMubGVuZ3RoID4gMCkgPyBEQVRBLmNvbmZpZy5zbG90cyA6IERFRkFVTFRfU0xPVFM7CgogICAgICAgIHNsb3RzLmZvckVhY2goKHNsb3QsIGluZGV4KSA9PiB7CiAgICAgICAgICAgIGh0bWwgKz0gYDx0cj48dGQgc3R5bGU9ImZvbnQtd2VpZ2h0OmJvbGQ7IGJhY2tncm91bmQ6I2YwZjJmNTsgdGV4dC1hbGlnbjpjZW50ZXI7IGJvcmRlci1yaWdodDoycHggc29saWQgI2NjYzsgZm9udC1zaXplOjAuNzVyZW07Ij4ke3Nsb3Quc3RhcnR9PGJyPi08YnI+JHtzbG90LmVuZH08L3RkPmA7CiAgICAgICAgICAgIAogICAgICAgICAgICBzZXJ2aWNlcy5mb3JFYWNoKHNlcnZpY2UgPT4gewogICAgICAgICAgICAgICAgbGV0IGFnZW50c09uUG9zdCA9IFtdOwogICAgICAgICAgICAgICAgREFUQS5hZ2VudHMuZm9yRWFjaChhZ2VudCA9PiB7CiAgICAgICAgICAgICAgICAgICAgY29uc3Qga2V5ID0gYCR7ZGF5fS0ke2luZGV4fWA7CiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2NoZWQgPSBEQVRBLnNjaGVkdWxlc1thZ2VudC5uYW1lXTsKICAgICAgICAgICAgICAgICAgICBpZihzY2hlZCAmJiBzY2hlZFtrZXldICYmIHNjaGVkW2tleV0udG9vbCA9PT0gc2VydmljZS5uYW1lKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGFnZW50c09uUG9zdC5wdXNoKGFnZW50Lm5hbWUpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBsZXQgY2VsbENvbnRlbnQgPSBhZ2VudHNPblBvc3QubWFwKG5hbWUgPT4gYDxzcGFuIGNsYXNzPSJhZ2VudC10YWciPiR7bmFtZX08L3NwYW4+YCkuam9pbignJyk7CiAgICAgICAgICAgICAgICBodG1sICs9IGA8dGQ+JHtjZWxsQ29udGVudH08L3RkPmA7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBodG1sICs9IGA8L3RyPmA7CiAgICAgICAgfSk7CgogICAgICAgIGh0bWwgKz0gYDwvdGJvZHk+PC90YWJsZT5gOwogICAgICAgIGNvbnRhaW5lci5pbm5lckhUTUwgPSBodG1sOwogICAgfQoKICAgIC8vIC0tLSBJTVBPUlQgRVhDRUwgLS0tCiAgICBmdW5jdGlvbiBoYW5kbGVFeGNlbChpbnB1dCkgewogICAgICAgIGNvbnN0IGYgPSBpbnB1dC5maWxlc1swXTsgCiAgICAgICAgaWYoIWYpIHJldHVybjsKICAgICAgICAKICAgICAgICBjb25zdCByID0gbmV3IEZpbGVSZWFkZXIoKTsKICAgICAgICByLm9ubG9hZCA9IGUgPT4gewogICAgICAgICAgICBjb25zdCB3YiA9IFhMU1gucmVhZChuZXcgVWludDhBcnJheShlLnRhcmdldC5yZXN1bHQpLCB7dHlwZTonYXJyYXknfSk7CiAgICAgICAgICAgIGNvbnN0IHJvd3MgPSBYTFNYLnV0aWxzLnNoZWV0X3RvX2pzb24od2IuU2hlZXRzW3diLlNoZWV0TmFtZXNbMF1dLCB7aGVhZGVyOjF9KTsKICAgICAgICAgICAgCiAgICAgICAgICAgIGNvbnN0IGhlYWRlciA9IHJvd3NbMF07CiAgICAgICAgICAgIGNvbnN0IHF1b3RpdGVzID0gW107CiAgICAgICAgICAgIC8vIE1PRElGSUNBVElPTiBJQ0kgOiBPbiBzY2FubmUganVzcXUnw6AgbGEgY29sb25uZSA4IChJbmRleCBJKSBwb3VyIGxlcyBxdW90aXTDqXMKICAgICAgICAgICAgZm9yKGxldCBjb2wgPSAxOyBjb2wgPD0gODsgY29sKyspIHsKICAgICAgICAgICAgICAgIGNvbnN0IHZhbCA9IHBhcnNlRmxvYXQoaGVhZGVyW2NvbF0pOwogICAgICAgICAgICAgICAgaWYoIWlzTmFOKHZhbCkgJiYgdmFsID4gMCkgewogICAgICAgICAgICAgICAgICAgIGNvbnN0IGZ0ZSA9IHZhbCA+IDEgPyB2YWwgLyAxMDAgOiB2YWw7CiAgICAgICAgICAgICAgICAgICAgcXVvdGl0ZXMucHVzaCh7IGNvbHVtbjogY29sLCBmdGU6IGZ0ZSwgbGFiZWw6IE1hdGgucm91bmQoZnRlICogMTAwKSArICclJyB9KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICAKICAgICAgICAgICAgREFUQS5xdW90aXRlcyA9IHF1b3RpdGVzOwogICAgICAgICAgICBEQVRBLmFnZW50cyA9IFtdOwogICAgICAgICAgICAKICAgICAgICAgICAgZm9yKGxldCBpID0gMTsgaSA8IHJvd3MubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAgIGNvbnN0IGMgPSByb3dzW2ldOyAKICAgICAgICAgICAgICAgIGlmKCFjIHx8ICFjWzBdKSBjb250aW51ZTsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgbGV0IGZ0ZSA9IDA7CiAgICAgICAgICAgICAgICBsZXQgZnRlTGFiZWwgPSAiSW5jb25udSI7CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIGZvcihjb25zdCBxIG9mIHF1b3RpdGVzKSB7CiAgICAgICAgICAgICAgICAgICAgaWYoY2hlY2tYKGNbcS5jb2x1bW5dKSkgewogICAgICAgICAgICAgICAgICAgICAgICBmdGUgPSBxLmZ0ZTsKICAgICAgICAgICAgICAgICAgICAgICAgZnRlTGFiZWwgPSBxLmxhYmVsOwogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIGlmKGZ0ZSA9PT0gMCkgY29udGludWU7CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIC8vIE1PRElGSUNBVElPTiBJQ0kgOiBSw6lhbGlnbmVtZW50IGRlcyBjb2xvbm5lcyBzZWxvbiBsZSBub3V2ZWF1IGZpY2hpZXIKICAgICAgICAgICAgICAgIC8vIENvbCAxMCAoSykgPSBUZW1wcyBkZSB0cmF2YWlsIGFubnVlbAogICAgICAgICAgICAgICAgLy8gQ29sIDExIChMKSA9IENyw6lkaXQgZm9ybWF0aW9uCiAgICAgICAgICAgICAgICAvLyBDb2wgOSAoSikgPSBDb250cmFpbnRlcwogICAgICAgICAgICAgICAgY29uc3QgYmFzZSA9IHBhcnNlRmxvYXQoY1sxMF0pIHx8IDE2MDc7CiAgICAgICAgICAgICAgICBjb25zdCBjcmVkaXQgPSBwYXJzZUZsb2F0KGNbMTFdKSB8fCAwOwogICAgICAgICAgICAgICAgY29uc3QgbmV0QW5udWFsID0gKGJhc2UgKiBmdGUpIC0gY3JlZGl0OwogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBEQVRBLmFnZW50cy5wdXNoKHsKICAgICAgICAgICAgICAgICAgICBuYW1lOiBjWzBdLCBmdGU6IGZ0ZSwgZnRlTGFiZWw6IGZ0ZUxhYmVsLCBiYXNlOiBiYXNlLAogICAgICAgICAgICAgICAgICAgIHJhd0FubnVhbDogYmFzZSAqIGZ0ZSwgY3JlZGl0OiBjcmVkaXQsIG5ldEFubnVhbDogbmV0QW5udWFsLCAKICAgICAgICAgICAgICAgICAgICB3ZWVrbHlUYXJnZXQ6IE1hdGgubWF4KDAsIG5ldEFubnVhbCAvIDM5KSwgaW50ZXJuYXRIb3VyczogMCwKICAgICAgICAgICAgICAgICAgICBjb25zdHJhaW50czogKGNbOV0gfHwgIiIpLnRyaW0oKQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgc2F2ZUxvY2FsU3RvcmFnZSgpOyAKICAgICAgICAgICAgcmVmcmVzaEFsbFVJKCk7CiAgICAgICAgfTsKICAgICAgICByLnJlYWRBc0FycmF5QnVmZmVyKGYpOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBjaGVja1godikgeyByZXR1cm4gdiAmJiBTdHJpbmcodikudG9VcHBlckNhc2UoKS50cmltKCkgPT09ICdYJzsgfQoKICAgIC8vIC0tLSBBRkZJQ0hBR0UgSU5GTyBJTVBPUlQgLS0tCiAgICBmdW5jdGlvbiByZW5kZXJJbXBvcnRJbmZvKCkgewogICAgICAgIGNvbnN0IGFyZWEgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW1wb3J0LWluZm8tYXJlYScpOwogICAgICAgIGlmKCFEQVRBLnF1b3RpdGVzIHx8IERBVEEucXVvdGl0ZXMubGVuZ3RoID09PSAwKSB7IGFyZWEuaW5uZXJIVE1MID0gJyc7IHJldHVybjsgfQogICAgICAgIAogICAgICAgIGNvbnN0IHF1b3RpdGVIdG1sID0gREFUQS5xdW90aXRlcy5tYXAocSA9PiBgPHNwYW4gY2xhc3M9InF1b3RpdGUtaXRlbSI+PHN0cm9uZz4ke3EubGFiZWx9PC9zdHJvbmc+IChjb2wuJHtxLmNvbHVtbiArIDF9KTwvc3Bhbj5gKS5qb2luKCcnKTsKICAgICAgICBhcmVhLmlubmVySFRNTCA9IGAKICAgICAgICAgICAgPGRpdiBjbGFzcz0iaW1wb3J0LWluZm8iPgogICAgICAgICAgICAgICAgPGkgY2xhc3M9ImZhcyBmYS1pbmZvLWNpcmNsZSIgc3R5bGU9ImNvbG9yOnZhcigtLXNlY29uZGFyeSkiPjwvaT4KICAgICAgICAgICAgICAgIDxzdHJvbmc+RmljaGllciBpbXBvcnTDqTwvc3Ryb25nPiAtICR7REFUQS5hZ2VudHMubGVuZ3RofSBhZ2VudChzKSBjaGFyZ8OpKHMpCiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJxdW90aXRlLWxpc3QiPjxzcGFuIHN0eWxlPSJmb250LXdlaWdodDpib2xkOyBtYXJnaW4tcmlnaHQ6MTBweDsiPlF1b3RpdMOpcyBkw6l0ZWN0w6llcyA6PC9zcGFuPiR7cXVvdGl0ZUh0bWx9PC9kaXY+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgIGA7CiAgICB9CgogICAgZnVuY3Rpb24gcmVuZGVyT3ZlcnZpZXcoKSB7CiAgICAgICAgY29uc3QgYyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkYXNoYm9hcmQtYXJlYScpOyAKICAgICAgICBjLmlubmVySFRNTCA9ICcnOwogICAgICAgIGlmKERBVEEuYWdlbnRzLmxlbmd0aCA9PT0gMCkgeyAKICAgICAgICAgICAgYy5pbm5lckhUTUwgPSAnPGRpdiBzdHlsZT0iZ3JpZC1jb2x1bW46MS8tMTt0ZXh0LWFsaWduOmNlbnRlcjtwYWRkaW5nOjUwcHg7Y29sb3I6I2FhYTsiPjxpIGNsYXNzPSJmYXMgZmEtZm9sZGVyLW9wZW4iIHN0eWxlPSJmb250LXNpemU6M3JlbTsgbWFyZ2luLWJvdHRvbToxMHB4OyI+PC9pPjxicj5BdWN1bmUgZG9ubsOpZS4gVmV1aWxsZXogaW1wb3J0ZXIgdW4gZmljaGllciBFeGNlbCBvdSByZXN0YXVyZXIgdW5lIHNhdXZlZ2FyZGUuPC9kaXY+JzsgCiAgICAgICAgICAgIHJldHVybjsgCiAgICAgICAgfQogICAgICAgIAogICAgICAgIERBVEEuYWdlbnRzLmZvckVhY2goYSA9PiB7CiAgICAgICAgICAgIGNvbnN0IHN0YW5kYXJkUXVvdGl0ZXMgPSBbMSwgMC44LCAwLjUsIDAuMjVdOwogICAgICAgICAgICBjb25zdCBpc1N0YW5kYXJkID0gc3RhbmRhcmRRdW90aXRlcy5zb21lKHNxID0+IE1hdGguYWJzKHNxIC0gYS5mdGUpIDwgMC4wMSk7CiAgICAgICAgICAgIGNvbnN0IGJhZGdlQ2xhc3MgPSBpc1N0YW5kYXJkID8gJ2JhZGdlLXN0YW5kYXJkJyA6ICdiYWRnZS1jdXN0b20nOwogICAgICAgICAgICAKICAgICAgICAgICAgYy5pbm5lckhUTUwgKz0gYDxkaXYgY2xhc3M9ImFlZC1zdW1tYXJ5LWNhcmQiPgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iY2FyZC1oZWFkZXIiPjxzcGFuIHN0eWxlPSJmb250LXdlaWdodDpib2xkO2NvbG9yOnZhcigtLXByaW1hcnkpIj4ke2EubmFtZX08L3NwYW4+PHNwYW4gY2xhc3M9IiR7YmFkZ2VDbGFzc30iIHN0eWxlPSJjb2xvcjp3aGl0ZTtwYWRkaW5nOjJweCA4cHg7Ym9yZGVyLXJhZGl1czoxMHB4O2ZvbnQtc2l6ZTowLjhyZW0iPiR7YS5mdGVMYWJlbH08L3NwYW4+PC9kaXY+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJjYXJkLWJvZHkiPgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InN0YXQtcm93Ij48c3Bhbj5RdW90aXTDqTwvc3Bhbj48c3Bhbj4keyhhLmZ0ZSAqIDEwMCkudG9GaXhlZCgwKX0lICgke2EuZnRlLnRvRml4ZWQoMil9KTwvc3Bhbj48L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJzdGF0LXJvdyI+PHNwYW4+QmFzZSBhbm51ZWxsZTwvc3Bhbj48c3Bhbj4ke2EuYmFzZX1oPC9zcGFuPjwvZGl2PgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InN0YXQtcm93Ij48c3Bhbj5UZW1wcyBwcm9yYXTDqTwvc3Bhbj48c3Bhbj4ke2EucmF3QW5udWFsLnRvRml4ZWQoMSl9aDwvc3Bhbj48L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJzdGF0LXJvdyI+PHNwYW4+Q3LDqWRpdCBmb3JtYXRpb248L3NwYW4+PHNwYW4+LSR7YS5jcmVkaXR9aDwvc3Bhbj48L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJzdGF0LXJvdyI+PHNwYW4+TmV0IEFubnVlbDwvc3Bhbj48c3Bhbj48c3Ryb25nPiR7YS5uZXRBbm51YWwudG9GaXhlZCgxKX1oPC9zdHJvbmc+PC9zcGFuPjwvZGl2PgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InN0YXQtcm93IiBzdHlsZT0iYmFja2dyb3VuZDojZjBmOWZmO2ZvbnQtd2VpZ2h0OmJvbGQ7Y29sb3I6IzI5ODBiOTttYXJnaW4tdG9wOjVweDtwYWRkaW5nOjVweDsiPjxzcGFuPkNpYmxlIEhlYmRvICjDtzM5KTwvc3Bhbj48c3Bhbj4ke2Eud2Vla2x5VGFyZ2V0LnRvRml4ZWQoMil9aDwvc3Bhbj48L2Rpdj4KICAgICAgICAgICAgICAgICAgICAke2EuY29uc3RyYWludHMgPyBgPGRpdiBjbGFzcz0iY29uc3RyYWludHMtYm94Ij7imqDvuI8gJHthLmNvbnN0cmFpbnRzfTwvZGl2PmAgOiAnJ30KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8L2Rpdj5gOwogICAgICAgIH0pOwogICAgfQoKICAgIC8vIC0tLSBDT05DRVBUSU9OIC0tLQogICAgZnVuY3Rpb24gcG9wdWxhdGVTZWxlY3RzKCkgewogICAgICAgIGNvbnN0IHMxID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FlZC1zZWxlY3QtY29uY2VwdGlvbicpOwogICAgICAgIGNvbnN0IHMyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FlZC1zZWxlY3QtZ2VzdGlvbicpOwogICAgICAgIGNvbnN0IHYxID0gczEudmFsdWUsIHYyID0gczIudmFsdWU7CiAgICAgICAgczEuaW5uZXJIVE1MID0gczIuaW5uZXJIVE1MID0gJzxvcHRpb24gdmFsdWU9IiI+LS0gU8OpbGVjdGlvbm5lciAtLTwvb3B0aW9uPic7CiAgICAgICAgREFUQS5hZ2VudHMuZm9yRWFjaChhID0+IHsKICAgICAgICAgICAgY29uc3Qgb3B0ID0gYDxvcHRpb24gdmFsdWU9IiR7YS5uYW1lfSI+JHthLm5hbWV9ICgke2EuZnRlTGFiZWx9KTwvb3B0aW9uPmA7CiAgICAgICAgICAgIHMxLmlubmVySFRNTCArPSBvcHQ7IHMyLmlubmVySFRNTCArPSBvcHQ7CiAgICAgICAgfSk7CiAgICAgICAgaWYodjEpIHMxLnZhbHVlID0gdjE7IGlmKHYyKSBzMi52YWx1ZSA9IHYyOwogICAgfQoKICAgIGZ1bmN0aW9uIGNoYW5nZUFFRCh2aWV3KSB7IAogICAgICAgIGlmKHZpZXcgPT09ICdjb25jZXB0aW9uJykgeyAKICAgICAgICAgICAgY29uc3QgbmFtZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhZWQtc2VsZWN0LWNvbmNlcHRpb24nKS52YWx1ZTsKICAgICAgICAgICAgY29uc3QgYWdlbnQgPSBEQVRBLmFnZW50cy5maW5kKGEgPT4gYS5uYW1lID09PSBuYW1lKTsKICAgICAgICAgICAgaWYoYWdlbnQpIHsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ludGVybmF0LWhvdXJzJykudmFsdWUgPSBhZ2VudC5pbnRlcm5hdEhvdXJzIHx8IDA7IH0KICAgICAgICAgICAgcmVuZGVyVGltZXRhYmxlKCk7IHVwZGF0ZVN0YXRzSGVhZGVyKCk7IAogICAgICAgIH0gZWxzZSB7IHVwZGF0ZUdlc3Rpb25VSSgpOyB9IAogICAgfQoKICAgIGZ1bmN0aW9uIHNldFRvb2wobmFtZSwgY29sb3IpIHsKICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcucGFsZXR0ZS1idG4nKS5mb3JFYWNoKGIgPT4gYi5jbGFzc0xpc3QucmVtb3ZlKCdzZWxlY3RlZCcpKTsKICAgICAgICBpZihuYW1lICE9PSAnZ29tbWUnKSBldmVudC50YXJnZXQuY2xhc3NMaXN0LmFkZCgnc2VsZWN0ZWQnKTsKICAgICAgICBDVVJSRU5UX1RPT0wgPSBuYW1lID09PSAnZ29tbWUnID8ge2lzRXJhc2VyOiB0cnVlfSA6IHtuYW1lOiBuYW1lLCBjb2xvcjogY29sb3IsIGlzRXJhc2VyOiBmYWxzZX07CiAgICB9CgogICAgZnVuY3Rpb24gcmVuZGVyVGltZXRhYmxlKCkgewogICAgICAgIGNvbnN0IG5hbWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWVkLXNlbGVjdC1jb25jZXB0aW9uJykudmFsdWU7CiAgICAgICAgY29uc3QgdGFibGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGltZXRhYmxlJyk7CiAgICAgICAgaWYoIW5hbWUpIHsgdGFibGUuaW5uZXJIVE1MID0gJyc7IHJldHVybjsgfQogICAgICAgIHRhYmxlLmlubmVySFRNTCA9IGdlbmVyYXRlVGFibGVIVE1MKG5hbWUpOwogICAgICAgIAogICAgICAgIHRhYmxlLnF1ZXJ5U2VsZWN0b3JBbGwoJ3RkOm5vdCgudGltZS1jb2wpJykuZm9yRWFjaCh0ZCA9PiB7CiAgICAgICAgICAgIHRkLm9uY2xpY2sgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgIGNvbnN0IHRyID0gdGhpcy5wYXJlbnROb2RlOwogICAgICAgICAgICAgICAgY29uc3Qgcm93SW5kZXggPSBBcnJheS5mcm9tKHRyLnBhcmVudE5vZGUuY2hpbGRyZW4pLmluZGV4T2YodHIpOwogICAgICAgICAgICAgICAgY29uc3QgY29sSW5kZXggPSBBcnJheS5mcm9tKHRyLmNoaWxkcmVuKS5pbmRleE9mKHRoaXMpIC0gMTsgCiAgICAgICAgICAgICAgICBpZihjb2xJbmRleCA8IDApIHJldHVybjsKICAgICAgICAgICAgICAgIC8vIHJvd0luZGV4IGNvcnJlc3BvbmQgw6AgbCdpbmRleCBkdSBzbG90CiAgICAgICAgICAgICAgICBjb25zdCBkYXkgPSBEQVlTW2NvbEluZGV4XTsKICAgICAgICAgICAgICAgIGNsaWNrQ2VsbChkYXksIHJvd0luZGV4KTsKICAgICAgICAgICAgfQogICAgICAgIH0pOwogICAgfQoKICAgIGZ1bmN0aW9uIGNsaWNrQ2VsbChkYXksIHNsb3RJbmRleCkgewogICAgICAgIGNvbnN0IG5hbWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWVkLXNlbGVjdC1jb25jZXB0aW9uJykudmFsdWU7CiAgICAgICAgaWYoIW5hbWUpIHJldHVybjsKICAgICAgICBjb25zdCBhZ2VudCA9IERBVEEuYWdlbnRzLmZpbmQoYSA9PiBhLm5hbWUgPT09IG5hbWUpOwogICAgICAgIGlmKGFnZW50ICYmIGFnZW50LmNvbnN0cmFpbnRzLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoZGF5LnRvTG93ZXJDYXNlKCkpKSByZXR1cm47CgogICAgICAgIGlmKCFEQVRBLnNjaGVkdWxlc1tuYW1lXSkgREFUQS5zY2hlZHVsZXNbbmFtZV0gPSB7fTsKICAgICAgICBjb25zdCBrZXkgPSBgJHtkYXl9LSR7c2xvdEluZGV4fWA7IC8vIENsw6kgYmFzw6llIHN1ciBsJ2luZGV4IGR1IGNyw6luZWF1CgogICAgICAgIGlmKENVUlJFTlRfVE9PTC5pc0VyYXNlcikgZGVsZXRlIERBVEEuc2NoZWR1bGVzW25hbWVdW2tleV07CiAgICAgICAgZWxzZSBEQVRBLnNjaGVkdWxlc1tuYW1lXVtrZXldID0geyB0b29sOiBDVVJSRU5UX1RPT0wubmFtZSwgY29sb3I6IENVUlJFTlRfVE9PTC5jb2xvciB9OwogICAgICAgIAogICAgICAgIHNhdmVMb2NhbFN0b3JhZ2UoKTsKICAgICAgICByZW5kZXJUaW1ldGFibGUoKTsKICAgICAgICB1cGRhdGVTdGF0c0hlYWRlcigpOwogICAgfQoKICAgIGZ1bmN0aW9uIHVwZGF0ZVN0YXRzSGVhZGVyKCkgewogICAgICAgIGNvbnN0IG5hbWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWVkLXNlbGVjdC1jb25jZXB0aW9uJykudmFsdWU7CiAgICAgICAgY29uc3QgZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaGVhZGVyLXN0YXRzJyk7CiAgICAgICAgaWYoIW5hbWUpIHsgZWwuaW5uZXJUZXh0ID0gIjBoIC8gMGgiOyByZXR1cm47IH0KICAgICAgICAKICAgICAgICBjb25zdCBhZ2VudCA9IERBVEEuYWdlbnRzLmZpbmQoYSA9PiBhLm5hbWUgPT09IG5hbWUpOwogICAgICAgIGNvbnN0IGludGVybmF0ID0gYWdlbnQuaW50ZXJuYXRIb3VycyB8fCAwOwogICAgICAgIAogICAgICAgIC8vIENhbGN1bCBkdSB0ZW1wcyBwbGFuaWZpw6kgYmFzw6kgc3VyIGxhIGR1csOpZSByw6llbGxlIGRlcyBzbG90cwogICAgICAgIGxldCB0b3RhbE1pbnV0ZXMgPSAwOwogICAgICAgIGNvbnN0IHNsb3RzID0gKERBVEEuY29uZmlnLnNsb3RzICYmIERBVEEuY29uZmlnLnNsb3RzLmxlbmd0aCA+IDApID8gREFUQS5jb25maWcuc2xvdHMgOiBERUZBVUxUX1NMT1RTOwogICAgICAgIGNvbnN0IHNjaGVkID0gREFUQS5zY2hlZHVsZXNbbmFtZV0gfHwge307CgogICAgICAgIERBWVMuZm9yRWFjaChkYXkgPT4gewogICAgICAgICAgICBzbG90cy5mb3JFYWNoKChzbG90LCBpbmRleCkgPT4gewogICAgICAgICAgICAgICAgY29uc3Qga2V5ID0gYCR7ZGF5fS0ke2luZGV4fWA7CiAgICAgICAgICAgICAgICBpZihzY2hlZFtrZXldKSB7CiAgICAgICAgICAgICAgICAgICAgLy8gQ2FsY3VsIGR1csOpZSBzbG90CiAgICAgICAgICAgICAgICAgICAgY29uc3QgW2gxLCBtMV0gPSBzbG90LnN0YXJ0LnNwbGl0KCc6JykubWFwKE51bWJlcik7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgW2gyLCBtMl0gPSBzbG90LmVuZC5zcGxpdCgnOicpLm1hcChOdW1iZXIpOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IGR1cmF0aW9uID0gKGgyICogNjAgKyBtMikgLSAoaDEgKiA2MCArIG0xKTsKICAgICAgICAgICAgICAgICAgICBpZihkdXJhdGlvbiA+IDApIHRvdGFsTWludXRlcyArPSBkdXJhdGlvbjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgfSk7CgogICAgICAgIGNvbnN0IGdyaWRIb3VycyA9IHRvdGFsTWludXRlcyAvIDYwOwogICAgICAgIGNvbnN0IHRvdGFsUGxhbm5lZCA9IGdyaWRIb3VycyArIGludGVybmF0OwogICAgICAgIGNvbnN0IHRhcmdldCA9IGFnZW50LndlZWtseVRhcmdldDsKICAgICAgICBjb25zdCBkaWZmID0gdG90YWxQbGFubmVkIC0gdGFyZ2V0OwogICAgICAgIAogICAgICAgIGVsLmlubmVySFRNTCA9IGBDaWJsZTogJHt0YXJnZXQudG9GaXhlZCgyKX1oIHwgUGxhbmlmacOpOiAke3RvdGFsUGxhbm5lZC50b0ZpeGVkKDIpfWggPHNtYWxsPihkb250ICR7aW50ZXJuYXR9aCBJbnQuKTwvc21hbGw+IHwgPHNwYW4gc3R5bGU9ImNvbG9yOiR7TWF0aC5hYnMoZGlmZikgPCAxID8gJ2dyZWVuJyA6ICdyZWQnfSI+RGlmZjogJHtkaWZmID4gMCA/ICcrJyA6ICcnfSR7ZGlmZi50b0ZpeGVkKDIpfWg8L3NwYW4+YDsKICAgIH0KCiAgICAvLyAtLS0gR0VTVElPTiAtLS0KICAgIGZ1bmN0aW9uIGFkZEFkanVzdG1lbnQoKSB7CiAgICAgICAgY29uc3QgbmFtZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhZWQtc2VsZWN0LWdlc3Rpb24nKS52YWx1ZTsKICAgICAgICBpZighbmFtZSkgcmV0dXJuIGFsZXJ0KCJTw6lsZWN0aW9ubmV6IHVuIGFnZW50Iik7CiAgICAgICAgY29uc3QgdHlwZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhZGotdHlwZScpLnZhbHVlOwogICAgICAgIGNvbnN0IGFtdCA9IHBhcnNlRmxvYXQoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Fkai1hbW91bnQnKS52YWx1ZSk7CiAgICAgICAgY29uc3QgciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhZGotcmVhc29uJykudmFsdWU7CiAgICAgICAgaWYoIWFtdCB8fCAhcikgcmV0dXJuIGFsZXJ0KCJJbmZvcyBtYW5xdWFudGVzIik7CiAgICAgICAgaWYoIURBVEEuYWRqdXN0bWVudHNbbmFtZV0pIERBVEEuYWRqdXN0bWVudHNbbmFtZV0gPSBbXTsKICAgICAgICBEQVRBLmFkanVzdG1lbnRzW25hbWVdLnB1c2goe2lkOiBEYXRlLm5vdygpLCBkYXRlOiBuZXcgRGF0ZSgpLnRvTG9jYWxlRGF0ZVN0cmluZygpLCB0eXBlLCBhbW91bnQ6IGFtdCwgcmVhc29uOiByfSk7CiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Fkai1hbW91bnQnKS52YWx1ZSA9ICcnOyAKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWRqLXJlYXNvbicpLnZhbHVlID0gJyc7CiAgICAgICAgc2F2ZUxvY2FsU3RvcmFnZSgpOyB1cGRhdGVHZXN0aW9uVUkoKTsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gdXBkYXRlR2VzdGlvblVJKCkgewogICAgICAgIGNvbnN0IG5hbWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWVkLXNlbGVjdC1nZXN0aW9uJykudmFsdWU7CiAgICAgICAgY29uc3QgdGIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaGlzdG9yeS1ib2R5Jyk7CiAgICAgICAgY29uc3QgYmFsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2JhbGFuY2UtZGlzcGxheScpOwogICAgICAgIGNvbnN0IHRhcmdldEJhbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhbm51YWwtdGFyZ2V0LWRpc3BsYXknKTsKICAgICAgICAKICAgICAgICB0Yi5pbm5lckhUTUwgPSAnJzsgYmFsLmlubmVyVGV4dCA9ICcwaCc7IHRhcmdldEJhbC5pbm5lclRleHQgPSAnMGgnOwogICAgICAgIGlmKCFuYW1lKSByZXR1cm47CiAgICAgICAgCiAgICAgICAgY29uc3QgYWdlbnQgPSBEQVRBLmFnZW50cy5maW5kKGEgPT4gYS5uYW1lID09PSBuYW1lKTsKICAgICAgICBpZihhZ2VudCAmJiBhZ2VudC5uZXRBbm51YWwpIHRhcmdldEJhbC5pbm5lclRleHQgPSBhZ2VudC5uZXRBbm51YWwudG9GaXhlZCgxKSArICdoJzsKCiAgICAgICAgbGV0IGIgPSAwOwogICAgICAgIChEQVRBLmFkanVzdG1lbnRzW25hbWVdIHx8IFtdKS5mb3JFYWNoKChhLCBpKSA9PiB7CiAgICAgICAgICAgIGNvbnN0IHAgPSBhLnR5cGUgPT09ICdwbHVzJzsgYiArPSBwID8gYS5hbW91bnQgOiAtYS5hbW91bnQ7CiAgICAgICAgICAgIHRiLmlubmVySFRNTCArPSBgPHRyPjx0ZD4ke2EuZGF0ZX08L3RkPjx0ZCBzdHlsZT0iY29sb3I6JHtwID8gJ2dyZWVuJyA6ICdyZWQnfSI+JHtwID8gJysnIDogJy0nfTwvdGQ+PHRkPiR7YS5yZWFzb259PC90ZD48dGQ+JHthLmFtb3VudH1oPC90ZD48dGQ+PGkgY2xhc3M9ImZhcyBmYS10cmFzaCIgb25jbGljaz0iZGVsQWRqKCcke25hbWV9Jywke2l9KSIgc3R5bGU9ImN1cnNvcjpwb2ludGVyIj48L2k+PC90ZD48L3RyPmA7CiAgICAgICAgfSk7CiAgICAgICAgYmFsLmlubmVyVGV4dCA9IChiID4gMCA/ICcrJyA6ICcnKSArIGIgKyAnaCc7IAogICAgICAgIGJhbC5zdHlsZS5jb2xvciA9IGIgPj0gMCA/ICd3aGl0ZScgOiAnI2ZhYjFhMCc7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIGRlbEFkaihuLCBpKSB7IERBVEEuYWRqdXN0bWVudHNbbl0uc3BsaWNlKGksIDEpOyBzYXZlTG9jYWxTdG9yYWdlKCk7IHVwZGF0ZUdlc3Rpb25VSSgpOyB9Cgo8L3NjcmlwdD4KCjxzY3JpcHQ+CndpbmRvdy5wYXJlbnQucG9zdE1lc3NhZ2UoeyB0eXBlOiAncGlsb3RlLW1vZHVsZS1yZWFkeScsIG1vZHVsZTogJ2FlZCcgfSwgJyonKTsKPC9zY3JpcHQ+CgoKPHNjcmlwdD4KZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGZ1bmN0aW9uKGUpIHsKICAgIGlmICghZS5jdHJsS2V5IHx8IGUuc2hpZnRLZXkgfHwgZS5hbHRLZXkgfHwgZS5tZXRhS2V5KSByZXR1cm47CiAgICB2YXIga2V5ID0gZS5rZXkudG9Mb3dlckNhc2UoKTsKICAgIGlmIChbJ3AnLCdlJywnbycsJ2EnLCdkJ10uaW5kZXhPZihrZXkpID49IDApIHsKICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgd2luZG93LnBhcmVudC5wb3N0TWVzc2FnZSh7dHlwZToncGlsb3RlLXNob3J0Y3V0Jywga2V5OmtleX0sICcqJyk7CiAgICB9Cn0pOwo8L3NjcmlwdD4KPC9ib2R5Pgo8L2h0bWw+"
,
  "bibase": "PCFET0NUWVBFIGh0bWw+CjxodG1sIGxhbmc9ImZyIj4KPGhlYWQ+CiAgICA8bWV0YSBjaGFyc2V0PSJVVEYtOCI+CiAgICA8bWV0YSBuYW1lPSJ2aWV3cG9ydCIgY29udGVudD0id2lkdGg9ZGV2aWNlLXdpZHRoLCBpbml0aWFsLXNjYWxlPTEuMCI+CiAgICA8dGl0bGU+QnVsbGV0aW4gZCdpbmZvcm1hdGlvbjwvdGl0bGU+CiAgICA8IS0tIFRhaWx3aW5kIENTUyAtLT4KICAgIDxzY3JpcHQgc3JjPSJodHRwczovL2Nkbi50YWlsd2luZGNzcy5jb20iPjwvc2NyaXB0PgogICAgPCEtLSBIVE1MMlBERiAtLT4KICAgIDxzY3JpcHQgc3JjPSJodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9odG1sMnBkZi5qcy8wLjEwLjEvaHRtbDJwZGYuYnVuZGxlLm1pbi5qcyI+PC9zY3JpcHQ+CiAgICA8IS0tIEV4cG9ydCBXb3JkIChodG1sLWRvY3gtanMpICYgRmlsZVNhdmVyIC0tPgogICAgPHNjcmlwdCBzcmM9Imh0dHBzOi8vdW5wa2cuY29tL2h0bWwtZG9jeC1qcy9kaXN0L2h0bWwtZG9jeC5qcyI+PC9zY3JpcHQ+CiAgICA8c2NyaXB0IHNyYz0iaHR0cHM6Ly9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvRmlsZVNhdmVyLmpzLzIuMC41L0ZpbGVTYXZlci5taW4uanMiPjwvc2NyaXB0PgoKICAgIDwhLS0gUXVpbGwgRWRpdG9yIChXWVNJV1lHKSAtLT4KICAgIDxsaW5rIGhyZWY9Imh0dHBzOi8vY2RuLnF1aWxsanMuY29tLzEuMy42L3F1aWxsLnNub3cuY3NzIiByZWw9InN0eWxlc2hlZXQiPgogICAgPHNjcmlwdCBzcmM9Imh0dHBzOi8vY2RuLnF1aWxsanMuY29tLzEuMy42L3F1aWxsLm1pbi5qcyI+PC9zY3JpcHQ+CiAgICAKICAgIDwhLS0gRm9udCAtLT4KICAgIDxzdHlsZT4KICAgICAgICBAaW1wb3J0IHVybCgnaHR0cHM6Ly9mb250cy5nb29nbGVhcGlzLmNvbS9jc3MyP2ZhbWlseT1JbnRlcjp3Z2h0QDMwMDs0MDA7NTAwOzYwMDs3MDAmZmFtaWx5PU1lcnJpd2VhdGhlcjp3Z2h0QDMwMDs0MDA7NzAwJmZhbWlseT1Sb2JvdG8rTW9ubzp3Z2h0QDQwMDs2MDAmZGlzcGxheT1zd2FwJyk7CiAgICAgICAgCiAgICAgICAgYm9keSB7IGZvbnQtZmFtaWx5OiAnSW50ZXInLCBzYW5zLXNlcmlmOyB9CiAgICAgICAgCiAgICAgICAgLyogRm9udCBDbGFzc2VzICovCiAgICAgICAgLmZvbnQtaW50ZXIgeyBmb250LWZhbWlseTogJ0ludGVyJywgc2Fucy1zZXJpZjsgfQogICAgICAgIC5mb250LXNlcmlmIHsgZm9udC1mYW1pbHk6ICdNZXJyaXdlYXRoZXInLCBzZXJpZjsgfQogICAgICAgIC5mb250LW1vbm8geyBmb250LWZhbWlseTogJ1JvYm90byBNb25vJywgbW9ub3NwYWNlOyB9CgogICAgICAgIC8qIFNjcm9sbGJhciBjdXN0b21pc2F0aW9uICovCiAgICAgICAgOjotd2Via2l0LXNjcm9sbGJhciB7IHdpZHRoOiA2cHg7IH0KICAgICAgICA6Oi13ZWJraXQtc2Nyb2xsYmFyLXRyYWNrIHsgYmFja2dyb3VuZDogI2YxZjVmOTsgfQogICAgICAgIDo6LXdlYmtpdC1zY3JvbGxiYXItdGh1bWIgeyBiYWNrZ3JvdW5kOiAjY2JkNWUxOyBib3JkZXItcmFkaXVzOiAzcHg7IH0KICAgICAgICA6Oi13ZWJraXQtc2Nyb2xsYmFyLXRodW1iOmhvdmVyIHsgYmFja2dyb3VuZDogIzk0YTNiODsgfQoKICAgICAgICAvKiBBNCBQYXBlciBTdHlsZSBmb3IgUHJldmlldyAqLwogICAgICAgIC5hNC1wYWdlIHsKICAgICAgICAgICAgd2lkdGg6IDIxMG1tOwogICAgICAgICAgICBtaW4taGVpZ2h0OiAyODBtbTsKICAgICAgICAgICAgcGFkZGluZzogMTVtbTsKICAgICAgICAgICAgbWFyZ2luOiAwIGF1dG87CiAgICAgICAgICAgIGJhY2tncm91bmQ6IHdoaXRlOwogICAgICAgICAgICBib3gtc2hhZG93OiAwIDAgMTVweCByZ2JhKDAsMCwwLDAuMSk7CiAgICAgICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTsKICAgICAgICAgICAgZm9udC1zaXplOiAxMXB0OwogICAgICAgICAgICBsaW5lLWhlaWdodDogMS40OwogICAgICAgICAgICBjb2xvcjogIzFmMjkzNzsKICAgICAgICAgICAgZGlzcGxheTogZmxleDsKICAgICAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsKICAgICAgICB9CgogICAgICAgIC5wZGYtZm9vdGVyLWZpeGVkIHsKICAgICAgICAgICAgbWFyZ2luLXRvcDogYXV0bzsKICAgICAgICAgICAgcGFkZGluZy10b3A6IDEwcHg7CiAgICAgICAgICAgIGJvcmRlci10b3A6IDFweCBzb2xpZCAjZTJlOGYwOwogICAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7CiAgICAgICAgICAgIGZvbnQtc2l6ZTogOXB4OwogICAgICAgICAgICBjb2xvcjogIzk0YTNiODsKICAgICAgICB9CgogICAgICAgIC8qIFN0eWxlcyBzcMOpY2lmaXF1ZXMgcG91ciBsZSBjb250ZW51IHJpY2hlIChRdWlsbC9IVE1MKSBkYW5zIGxlIFBERiBldCBsYSBTaWRlYmFyICovCiAgICAgICAgLnJpY2gtdGV4dC1jb250ZW50IHVsIHsgbGlzdC1zdHlsZS10eXBlOiBkaXNjOyBtYXJnaW4tbGVmdDogMS41ZW07IG1hcmdpbi1ib3R0b206IDAuNWVtOyB9CiAgICAgICAgLnJpY2gtdGV4dC1jb250ZW50IG9sIHsgbGlzdC1zdHlsZS10eXBlOiBkZWNpbWFsOyBtYXJnaW4tbGVmdDogMS41ZW07IG1hcmdpbi1ib3R0b206IDAuNWVtOyB9CiAgICAgICAgLnJpY2gtdGV4dC1jb250ZW50IHAgeyBtYXJnaW4tYm90dG9tOiAwLjVlbTsgfQogICAgICAgIC5yaWNoLXRleHQtY29udGVudCBzdHJvbmcgeyBmb250LXdlaWdodDogNzAwOyB9CiAgICAgICAgLnJpY2gtdGV4dC1jb250ZW50IGVtIHsgZm9udC1zdHlsZTogaXRhbGljOyB9CiAgICAgICAgLnJpY2gtdGV4dC1jb250ZW50IHUgeyB0ZXh0LWRlY29yYXRpb246IHVuZGVybGluZTsgfQogICAgICAgIAogICAgICAgIC8qIFN0eWxlcyBwb3VyIGxlcyB0YWlsbGVzIGRlIHBvbGljZSBRdWlsbCBkYW5zIGxlIFBERi9BcGVyw6d1ICovCiAgICAgICAgLnJpY2gtdGV4dC1jb250ZW50IC5xbC1zaXplLXNtYWxsIHsgZm9udC1zaXplOiAwLjc1ZW07IH0KICAgICAgICAucmljaC10ZXh0LWNvbnRlbnQgLnFsLXNpemUtbGFyZ2UgeyBmb250LXNpemU6IDEuNWVtOyB9CiAgICAgICAgLnJpY2gtdGV4dC1jb250ZW50IC5xbC1zaXplLWh1Z2UgeyBmb250LXNpemU6IDIuNWVtOyB9CiAgICAgICAgCiAgICAgICAgLyogTmV0dG95YWdlIGRlcyBtYXJnZXMgZHUgZGVybmllciDDqWzDqW1lbnQgcG91ciDDqXZpdGVyIGxlcyBlc3BhY2VzIHZpZGVzICovCiAgICAgICAgLnJpY2gtdGV4dC1jb250ZW50ID4gKjpsYXN0LWNoaWxkIHsgbWFyZ2luLWJvdHRvbTogMDsgfQoKICAgICAgICAvKiBQcmludCBzdHlsZXMgKi8KICAgICAgICBAbWVkaWEgcHJpbnQgewogICAgICAgICAgICBib2R5ICogeyB2aXNpYmlsaXR5OiBoaWRkZW47IH0KICAgICAgICAgICAgI3BkZi1wcmV2aWV3LWNvbnRhaW5lciwgI3BkZi1wcmV2aWV3LWNvbnRhaW5lciAqIHsgdmlzaWJpbGl0eTogdmlzaWJsZTsgfQogICAgICAgICAgICAjcGRmLXByZXZpZXctY29udGFpbmVyIHsgcG9zaXRpb246IGFic29sdXRlOyBsZWZ0OiAwOyB0b3A6IDA7IG1hcmdpbjogMDsgYm94LXNoYWRvdzogbm9uZTsgfQogICAgICAgICAgICAubm8tcHJpbnQgeyBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7IH0KICAgICAgICB9CgogICAgICAgIC5iaS1oZWFkZXIgewogICAgICAgICAgICBib3JkZXItYm90dG9tOiAycHggc29saWQgIzFkNGVkODsKICAgICAgICAgICAgcGFkZGluZy1ib3R0b206IDEwcHg7CiAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDIwcHg7CiAgICAgICAgfQogICAgICAgIAogICAgICAgIC8qIFF1aWxsIEN1c3RvbSBPdmVycmlkZXMgdG8gbWF0Y2ggdGhlbWUgKi8KICAgICAgICAucWwtdG9vbGJhci5xbC1zbm93IHsKICAgICAgICAgICAgYm9yZGVyOiBub25lOwogICAgICAgICAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgI2YxZjVmOTsKICAgICAgICAgICAgYmFja2dyb3VuZDogI2Y4ZmFmYzsKICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogMC43NXJlbSAwLjc1cmVtIDAgMDsKICAgICAgICAgICAgcGFkZGluZzogOHB4OwogICAgICAgIH0KICAgICAgICAucWwtY29udGFpbmVyLnFsLXNub3cgewogICAgICAgICAgICBib3JkZXI6IG5vbmU7CiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDAgMCAwLjc1cmVtIDAuNzVyZW07CiAgICAgICAgICAgIGZvbnQtZmFtaWx5OiAnSW50ZXInLCBzYW5zLXNlcmlmOwogICAgICAgICAgICBmb250LXNpemU6IDAuODc1cmVtOyAvKiB0ZXh0LXNtICovCiAgICAgICAgfQogICAgICAgIC5xbC1lZGl0b3IgewogICAgICAgICAgICBtaW4taGVpZ2h0OiAxMjBweDsKICAgICAgICAgICAgbWF4LWhlaWdodDogMjUwcHg7IC8qIFBhcyBkJ2FncmFuZGlzc2VtZW50IGludXRpbGUgKi8KICAgICAgICAgICAgcGFkZGluZzogMTJweCAxNnB4OwogICAgICAgIH0KICAgICAgICAucWwtZWRpdG9yLnFsLWJsYW5rOjpiZWZvcmUgewogICAgICAgICAgICBmb250LXN0eWxlOiBub3JtYWw7CiAgICAgICAgICAgIGNvbG9yOiAjOTRhM2I4OwogICAgICAgICAgICBmb250LXNpemU6IDAuODc1cmVtOwogICAgICAgIH0KICAgICAgICAKICAgICAgICAvKiBDb250YWluZXIgd3JhcHBlciBmb3IgUXVpbGwgYm9yZGVyICovCiAgICAgICAgLnF1aWxsLXdyYXBwZXIgewogICAgICAgICAgICBib3JkZXI6IDJweCBzb2xpZCAjZjFmNWY5OwogICAgICAgICAgICBib3JkZXItcmFkaXVzOiAwLjc1cmVtOwogICAgICAgICAgICB0cmFuc2l0aW9uOiBib3JkZXItY29sb3IgMC4yczsKICAgICAgICAgICAgYmFja2dyb3VuZDogd2hpdGU7CiAgICAgICAgfQogICAgICAgIC5xdWlsbC13cmFwcGVyOmZvY3VzLXdpdGhpbiB7CiAgICAgICAgICAgIGJvcmRlci1jb2xvcjogI2ZiOTIzYzsgLyogb3JhbmdlLTQwMCAqLwogICAgICAgIH0KCiAgICAgICAgLyogQXV0byBzYXZlIGluZGljYXRvciBhbmltYXRpb24gKi8KICAgICAgICBAa2V5ZnJhbWVzIGZhZGUtaW4tb3V0IHsKICAgICAgICAgICAgMCUgeyBvcGFjaXR5OiAwOyB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoNXB4KTsgfQogICAgICAgICAgICAyMCUgeyBvcGFjaXR5OiAxOyB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoMCk7IH0KICAgICAgICAgICAgODAlIHsgb3BhY2l0eTogMTsgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKDApOyB9CiAgICAgICAgICAgIDEwMCUgeyBvcGFjaXR5OiAwOyB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLTVweCk7IH0KICAgICAgICB9CiAgICAgICAgLnNhdmUtaW5kaWNhdG9yIHsKICAgICAgICAgICAgYW5pbWF0aW9uOiBmYWRlLWluLW91dCAycyBlYXNlLWluLW91dCBmb3J3YXJkczsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgLyogTGF5b3V0IHNwZWNpZmljIHN0eWxlcyAqLwogICAgICAgIC5sYXlvdXQtY2xhc3NpYyAuaGVhZGVyLWJsb2NrIHsgYm9yZGVyLWJvdHRvbS13aWR0aDogNHB4OyBwYWRkaW5nLWJvdHRvbTogMXJlbTsgbWFyZ2luLWJvdHRvbTogMnJlbTsgfQogICAgICAgIC5sYXlvdXQtbW9kZXJuIC5oZWFkZXItYmxvY2sgeyBib3JkZXItYm90dG9tLXdpZHRoOiAxcHg7IHBhZGRpbmctYm90dG9tOiAxLjVyZW07IG1hcmdpbi1ib3R0b206IDJyZW07IHRleHQtYWxpZ246IGNlbnRlcjsgfQogICAgICAgIC5sYXlvdXQtYmFubmVyIC5oZWFkZXItYmxvY2sgeyBtYXJnaW4tYm90dG9tOiAycmVtOyBib3JkZXItcmFkaXVzOiAwLjc1cmVtOyBvdmVyZmxvdzogaGlkZGVuOyBib3gtc2hhZG93OiAwIDRweCA2cHggLTFweCByZ2JhKDAsIDAsIDAsIDAuMSk7IH0KICAgIDwvc3R5bGU+CjwvaGVhZD4KPGJvZHkgY2xhc3M9ImJnLXNsYXRlLTEwMCB0ZXh0LXNsYXRlLTkwMCBoLXNjcmVlbiBvdmVyZmxvdy1oaWRkZW4gZmxleCBmbGV4LWNvbCI+CgogICAgPCEtLSBJQ09OUyAtLT4KICAgIDxzdmcgc3R5bGU9ImRpc3BsYXk6IG5vbmU7Ij4KICAgICAgICA8c3ltYm9sIGlkPSJpY29uLXNldHRpbmdzIiB2aWV3Qm94PSIwIDAgMjQgMjQiIGZpbGw9Im5vbmUiIHN0cm9rZT0iY3VycmVudENvbG9yIiBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCI+PHBhdGggZD0iTTEyLjIyIDJoLS40NGEyIDIgMCAwIDAtMiAydi4xOGEyIDIgMCAwIDEtMSAxLjczbC0uNDMuMjVhMiAyIDAgMCAxLTIgMGwtLjE1LS4wOGEyIDIgMCAwIDAtMi43My43M2wtLjIyLjM4YTIgMiAwIDAgMCAuNzMgMi43M2wuMTUuMWEyIDIgMCAwIDEgMSAxLjcydi41MWEyIDIgMCAwIDEtMSAxLjc0bC0uMTUuMDlhMiAyIDAgMCAwLS43MyAyLjczbC4yMi4zOGEyIDIgMCAwIDAgMi43My43M2wuMTUtLjA4YTIgMiAwIDAgMSAyIDBsLjQzLjI1YTIgMiAwIDAgMSAxIDEuNzNWMjBhMiAyIDAgMCAwIDIgMmguNDRhMiAyIDAgMCAwIDItMnYtLjE4YTIgMiAwIDAgMSAxLTEuNzNsLjQzLS4yNWEyIDIgMCAwIDEgMiAwbC4xNS4wOGEyIDIgMCAwIDAgMi43My0uNzNsLjIyLS4zOWEyIDIgMCAwIDAtLjczLTIuNzNsLS4xNS0uMDlhMiAyIDAgMCAxLTEtMS43NHYtLjQ3YTIgMiAwIDAgMSAxLTEuNzRsLjE1LS4wOWEyIDIgMCAwIDAgLjczLTIuNzNsLS4yMi0uMzlhMiAyIDAgMCAwLTIuNzMtLjczbC0uMTUuMDhhMiAyIDAgMCAxLTIgMGwtLjQzLS4yNWEyIDIgMCAwIDEtMS0xLjczVjRhMiAyIDAgMCAwLTItMnoiLz48Y2lyY2xlIGN4PSIxMiIgY3k9IjEyIiByPSIzIi8+PC9zeW1ib2w+CiAgICAgICAgPHN5bWJvbCBpZD0iaWNvbi10cmFzaCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiPjxwb2x5bGluZSBwb2ludHM9IjMgNiA1IDYgMjEgNiIvPjxwYXRoIGQ9Ik0xOSA2djE0YTIgMiAwIDAgMS0yIDJIN2EyIDIgMCAwIDEtMi0yVjZtMyAwVjRhMiAyIDAgMCAxIDItMmg0YTIgMiAwIDAgMSAyIDJ2MiIvPjxsaW5lIHgxPSIxMCIgeTE9IjExIiB4Mj0iMTAiIHkyPSIxNyIvPjxsaW5lIHgxPSIxNCIgeTE9IjExIiB4Mj0iMTQiIHkyPSIxNyIvPjwvc3ltYm9sPgogICAgICAgIDxzeW1ib2wgaWQ9Imljb24tZWRpdCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiPjxwYXRoIGQ9Ik0xMSA0SDRhMiAyIDAgMCAwLTIgMnYxNGEyIDIgMCAwIDAgMiAyaDE0YTIgMiAwIDAgMCAyLTJ2LTciLz48cGF0aCBkPSJNMTguNSAyLjVhMi4xMjEgMi4xMjEgMCAwIDEgMyAzTDEyIDE1bC00IDEgMS00IDkuNS05LjV6Ii8+PC9zeW1ib2w+CiAgICAgICAgPHN5bWJvbCBpZD0iaWNvbi1kb3dubG9hZCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiPjxwYXRoIGQ9Ik0yMSAxNXY0YTIgMiAwIDAgMS0yIDJINWEyIDIgMCAwIDEtMi0ydi00Ii8+PHBvbHlsaW5lIHBvaW50cz0iNyAxMCAxMiAxNSAxNyAxMCIvPjxsaW5lIHgxPSIxMiIgeTE9IjE1IiB4Mj0iMTIiIHkyPSIzIi8+PC9zeW1ib2w+CiAgICAgICAgPHN5bWJvbCBpZD0iaWNvbi1hcnJvdy11cCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiPjxsaW5lIHgxPSIxMiIgeTE9IjE5IiB4Mj0iMTIiIHkyPSI1Ij48L2xpbmU+PHBvbHlsaW5lIHBvaW50cz0iNSAxMiAxMiA1IDE5IDEyIj48L3BvbHlsaW5lPjwvc3ltYm9sPgogICAgICAgIDxzeW1ib2wgaWQ9Imljb24tYXJyb3ctZG93biIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiPjxsaW5lIHgxPSIxMiIgeTE9IjUiIHgyPSIxMiIgeTI9IjE5Ij48L2xpbmU+PHBvbHlsaW5lIHBvaW50cz0iMTkgMTIgMTIgMTkgNSAxMiI+PC9wb2x5bGluZT48L3N5bWJvbD4KICAgICAgICA8c3ltYm9sIGlkPSJpY29uLWxpc3QiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJjdXJyZW50Q29sb3IiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIj48bGluZSB4MT0iOCIgeTE9IjYiIHgyPSIyMSIgeTI9IjYiPjwvbGluZT48bGluZSB4MT0iOCIgeTE9IjEyIiB4Mj0iMjEiIHkyPSIxMiI+PC9saW5lPjxsaW5lIHgxPSI4IiB5MT0iMTgiIHgyPSIyMSIgeTI9IjE4Ij48L2xpbmU+PGxpbmUgeDE9IjMiIHkxPSI2IiB4Mj0iMy4wMSIgeTI9IjYiPjwvbGluZT48bGluZSB4MT0iMyIgeTE9IjEyIiB4Mj0iMy4wMSIgeTI9IjEyIj48L2xpbmU+PGxpbmUgeDE9IjMiIHkxPSIxOCIgeDI9IjMuMDEiIHkyPSIxOCI+PC9saW5lPjwvc3ltYm9sPgogICAgICAgIDxzeW1ib2wgaWQ9Imljb24td29yZCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiPjxwYXRoIGQ9Ik0xNCAySDZhMiAyIDAgMCAwLTIgMnYxNmEyIDIgMCAwIDAgMiAyaDEyYTIgMiAwIDAgMCAyLTJWOHoiPjwvcGF0aD48cG9seWxpbmUgcG9pbnRzPSIxNCAyIDE0IDggMjAgOCI+PC9wb2x5bGluZT48bGluZSB4MT0iMTYiIHkxPSIxMyIgeDI9IjgiIHkyPSIxMyI+PC9saW5lPjxsaW5lIHgxPSIxNiIgeTE9IjE3IiB4Mj0iOCIgeTI9IjE3Ij48L2xpbmU+PHBvbHlsaW5lIHBvaW50cz0iMTAgOSA5IDkgOCA5Ij48L3BvbHlsaW5lPjwvc3ltYm9sPgogICAgICAgIDxzeW1ib2wgaWQ9Imljb24tc2VhcmNoIiB2aWV3Qm94PSIwIDAgMjQgMjQiIGZpbGw9Im5vbmUiIHN0cm9rZT0iY3VycmVudENvbG9yIiBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCI+PGNpcmNsZSBjeD0iMTEiIGN5PSIxMSIgcj0iOCI+PC9jaXJjbGU+PGxpbmUgeDE9IjIxIiB5MT0iMjEiIHgyPSIxNi42NSIgeTI9IjE2LjY1Ij48L2xpbmU+PC9zeW1ib2w+CiAgICAgICAgPHN5bWJvbCBpZD0iaWNvbi1jb3B5IiB2aWV3Qm94PSIwIDAgMjQgMjQiIGZpbGw9Im5vbmUiIHN0cm9rZT0iY3VycmVudENvbG9yIiBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCI+PHJlY3QgeD0iOSIgeT0iOSIgd2lkdGg9IjEzIiBoZWlnaHQ9IjEzIiByeD0iMiIgcnk9IjIiPjwvcmVjdD48cGF0aCBkPSJNNSAxNUg0YTIgMiAwIDAgMS0yLTJWNGEyIDIgMCAwIDEgMi0yaDlhMiAyIDAgMCAxIDIgMnYxIj48L3BhdGg+PC9zeW1ib2w+CiAgICA8L3N2Zz4KCiAgICA8IS0tIEhFQURFUiAtLT4KICAgIAoKICAgIDwhLS0gQ09OVEVOVCAtLT4KICAgIDxtYWluIGlkPSJjb250ZW50LWFyZWEiIGNsYXNzPSJmbGV4LTEgb3ZlcmZsb3ctaGlkZGVuIHJlbGF0aXZlIHctZnVsbCBmbGV4IGZsZXgtY29sIj4KICAgICAgICAKICAgICAgICA8ZGl2IGlkPSJ2aWV3LWJ1bGxldGluIiBjbGFzcz0iZmxleC0xIGZsZXggb3ZlcmZsb3ctaGlkZGVuIj4KICAgICAgICAgICAgCiAgICAgICAgICAgIDwhLS0gU2lkZWJhcjogQXJjaGl2ZXMgLS0+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9InctNzIgYmctd2hpdGUgYm9yZGVyLXIgYm9yZGVyLXNsYXRlLTIwMCBmbGV4IGZsZXgtY29sIGZsZXgtc2hyaW5rLTAgei0xMCBzaGFkb3ctc20gaGlkZGVuIG1kOmZsZXgiPgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0icC00IGJvcmRlci1iIGJvcmRlci1zbGF0ZS0xMDAgc3BhY2UteS0zIj4KICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIG9uY2xpY2s9ImNyZWF0ZU5ld0J1bGxldGluKCkiIGNsYXNzPSJ3LWZ1bGwgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgZ2FwLTIgYmctZ3JhZGllbnQtdG8tciBmcm9tLW9yYW5nZS01MDAgdG8tb3JhbmdlLTYwMCBob3Zlcjpmcm9tLW9yYW5nZS02MDAgaG92ZXI6dG8tb3JhbmdlLTcwMCB0ZXh0LXdoaXRlIHB5LTMgcm91bmRlZC14bCBmb250LWJvbGQgdHJhbnNpdGlvbi1hbGwgc2hhZG93LW1kIHNoYWRvdy1vcmFuZ2UtMTAwIj4KICAgICAgICAgICAgICAgICAgICAgICAg4pyoIE5vdXZlYXUgQnVsbGV0aW4KICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICA8IS0tIFNlYXJjaCBCYXIgKFYzKSAtLT4KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJyZWxhdGl2ZSI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxzdmcgY2xhc3M9ImFic29sdXRlIGxlZnQtMyB0b3AtMi41IHctNCBoLTQgdGV4dC1zbGF0ZS00MDAiPjx1c2UgaHJlZj0iI2ljb24tc2VhcmNoIj48L3VzZT48L3N2Zz4KICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9InRleHQiIGlkPSJzZWFyY2gtYnVsbGV0aW4iIG9uaW5wdXQ9InJlbmRlckJ1bGxldGluTGlzdCgpIiBwbGFjZWhvbGRlcj0iUmVjaGVyY2hlciAoTsKwLi4uKSIgY2xhc3M9InctZnVsbCBwbC05IHByLTMgcHktMiBiZy1zbGF0ZS01MCBib3JkZXIgYm9yZGVyLXNsYXRlLTIwMCByb3VuZGVkLWxnIHRleHQtc20gZm9jdXM6b3V0bGluZS1ub25lIGZvY3VzOmJvcmRlci1ibHVlLTQwMCB0cmFuc2l0aW9uLWNvbG9ycyI+CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZsZXgtMSBvdmVyZmxvdy15LWF1dG8gcC0zIHNwYWNlLXktMiIgaWQ9ImJ1bGxldGluLWxpc3QiPgogICAgICAgICAgICAgICAgICAgIDwhLS0gTGlzdCBpdGVtcyBnZW5lcmF0ZWQgYnkgSlMgLS0+CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPC9kaXY+CgogICAgICAgICAgICA8IS0tIEVkaXRvciAtLT4KICAgICAgICAgICAgPGRpdiBjbGFzcz0iZmxleC0xIGZsZXggZmxleC1jb2wgYmctc2xhdGUtNTAgb3ZlcmZsb3ctaGlkZGVuIHJlbGF0aXZlIj4KICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iaC0xNiBiZy13aGl0ZSBib3JkZXItYiBib3JkZXItc2xhdGUtMjAwIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktYmV0d2VlbiBweC02IGZsZXgtc2hyaW5rLTAiPgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZsZXggaXRlbXMtY2VudGVyIGdhcC00Ij4KICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0ibWQ6aGlkZGVuIHRleHQtc2xhdGUtNTAwIiBvbmNsaWNrPSJ0b2dnbGVTaWRlYmFyTW9iaWxlKCkiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAg8J+XhO+4jwogICAgICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICAgICAgPGgyIGNsYXNzPSJ0ZXh0LWxnIGZvbnQtYm9sZCB0ZXh0LXNsYXRlLTgwMCBmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMiIgaWQ9ImVkaXRvci10aXRsZSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz0idGV4dC0yeGwiPuKcje+4jzwvc3Bhbj4gw4lkaXRpb24gZHUgQnVsbGV0aW4KICAgICAgICAgICAgICAgICAgICAgICAgPC9oMj4KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMyI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgaWQ9ImF1dG8tc2F2ZS1zdGF0dXMiIGNsYXNzPSJ0ZXh0LXhzIGZvbnQtYm9sZCB0ZXh0LWVtZXJhbGQtNjAwIGJnLWVtZXJhbGQtNTAgcHgtMiBweS0xIHJvdW5kZWQtbWQgb3BhY2l0eS0wIHRyYW5zaXRpb24tb3BhY2l0eSBmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICDinIUgRW5yZWdpc3Ryw6kKICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImgtNiB3LXB4IGJnLXNsYXRlLTIwMCBteC0xIj48L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIDwhLS0gQWN0aW9ucyBQREYgJiBXT1JEIC0tPgogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMiI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIG9uY2xpY2s9ImdlbmVyYXRlRE9DWCgpIiBjbGFzcz0iZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTIgYmctd2hpdGUgdGV4dC1ibHVlLTcwMCBib3JkZXIgYm9yZGVyLWJsdWUtMjAwIGhvdmVyOmJnLWJsdWUtNTAgcHgtNCBweS0yLjUgcm91bmRlZC14bCB0ZXh0LXNtIGZvbnQtYm9sZCB0cmFuc2l0aW9uLWFsbCBzaGFkb3ctc20gaG92ZXI6c2hhZG93LW1kIiB0aXRsZT0iRXhwb3J0ZXIgYXUgZm9ybWF0IFdvcmQiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJ0ZXh0LWxnIj7wn5OEPC9zcGFuPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJoaWRkZW4gc206aW5saW5lIj5Xb3JkPC9zcGFuPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIG9uY2xpY2s9ImdlbmVyYXRlUERGKCkiIGNsYXNzPSJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMiBiZy1ncmFkaWVudC10by1yIGZyb20taW5kaWdvLTYwMCB0by1ibHVlLTYwMCBob3Zlcjpmcm9tLWluZGlnby03MDAgaG92ZXI6dG8tYmx1ZS03MDAgdGV4dC13aGl0ZSBweC02IHB5LTIuNSByb3VuZGVkLXhsIHRleHQtc20gZm9udC1ib2xkIHRyYW5zaXRpb24tYWxsIHNoYWRvdy1sZyBzaGFkb3ctaW5kaWdvLTIwMCBob3ZlcjpzaGFkb3ctaW5kaWdvLTMwMCB0cmFuc2Zvcm0gaG92ZXI6LXRyYW5zbGF0ZS15LTAuNSBhY3RpdmU6dHJhbnNsYXRlLXktMCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHN2ZyBjbGFzcz0idy01IGgtNSI+PHVzZSBocmVmPSIjaWNvbi1kb3dubG9hZCI+PC91c2U+PC9zdmc+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9ImhpZGRlbiBzbTppbmxpbmUiPlTDqWzDqWNoYXJnZXIgUERGPC9zcGFuPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJzbTpoaWRkZW4iPlBERjwvc3Bhbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZsZXgtMSBvdmVyZmxvdy15LWF1dG8gcC02Ij4KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJtYXgtdy02eGwgbXgtYXV0byBncmlkIGdyaWQtY29scy0xIGxnOmdyaWQtY29scy0yIGdhcC04IGgtZnVsbCI+CiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICA8IS0tIExlZnQ6IEZvcm0gLS0+CiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InNwYWNlLXktNiBvdmVyZmxvdy15LWF1dG8gcGItMjAiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8IS0tIENhcmQgMSAtLT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImJnLXdoaXRlIHAtNiByb3VuZGVkLTJ4bCBib3JkZXIgYm9yZGVyLXNsYXRlLTIwMCBzaGFkb3ctc20gaG92ZXI6c2hhZG93LW1kIHRyYW5zaXRpb24tc2hhZG93Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDMgY2xhc3M9ImZvbnQtYm9sZCB0ZXh0LXNsYXRlLTgwMCBtYi00IGZsZXggaXRlbXMtY2VudGVyIGdhcC0zIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9InctOCBoLTggYmctYmx1ZS0xMDAgdGV4dC1ibHVlLTYwMCByb3VuZGVkLWxnIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIHRleHQtc20gZm9udC1ib2xkIj4xPC9zcGFuPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBQYXJhbcOodHJlcyBkdSBkb2N1bWVudAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvaDM+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZ3JpZCBncmlkLWNvbHMtMSBtZDpncmlkLWNvbHMtMiBnYXAtNCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9Im1kOmNvbC1zcGFuLTIgZmxleCBmbGV4LXdyYXAgZ2FwLTYiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9ImJsb2NrIHRleHQteHMgZm9udC1ib2xkIHRleHQtc2xhdGUtNDAwIHVwcGVyY2FzZSB0cmFja2luZy13aWRlciBtYi0xIj5OdW3DqXJvPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0ibnVtYmVyIiBpZD0iYmktbnVtYmVyIiBvbmlucHV0PSJ0cmlnZ2VyQXV0b1NhdmUoKSIgY2xhc3M9InctMjQgcHgtNCBweS0yIGJvcmRlci0yIGJvcmRlci1zbGF0ZS0xMDAgcm91bmRlZC14bCB0ZXh0LWxnIGZvbnQtYm9sZCB0ZXh0LWJsdWUtOTAwIGZvY3VzOmJvcmRlci1ibHVlLTUwMCBmb2N1czpyaW5nLTAgb3V0bGluZS1ub25lIHRyYW5zaXRpb24tY29sb3JzIiBwbGFjZWhvbGRlcj0iTsKwIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZmxleC0xIG1pbi13LVsyODBweF0gbWF4LXctbGciPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz0iYmxvY2sgdGV4dC14cyBmb250LWJvbGQgdGV4dC1zbGF0ZS00MDAgdXBwZXJjYXNlIHRyYWNraW5nLXdpZGVyIG1iLTEiPlDDqXJpb2RlIChTZW1haW5lKTwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTIiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0iZGF0ZSIgaWQ9ImJpLWRhdGUtc3RhcnQiIG9uaW5wdXQ9InRyaWdnZXJBdXRvU2F2ZSgpIiBjbGFzcz0idy1mdWxsIHB4LTMgcHktMiBib3JkZXItMiBib3JkZXItc2xhdGUtMTAwIHJvdW5kZWQteGwgdGV4dC1zbSBmb250LW1lZGl1bSBmb2N1czpib3JkZXItYmx1ZS01MDAgb3V0bGluZS1ub25lIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9InRleHQtc2xhdGUtMzAwIj7inpw8L3NwYW4+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJkYXRlIiBpZD0iYmktZGF0ZS1lbmQiIG9uaW5wdXQ9InRyaWdnZXJBdXRvU2F2ZSgpIiBjbGFzcz0idy1mdWxsIHB4LTMgcHktMiBib3JkZXItMiBib3JkZXItc2xhdGUtMTAwIHJvdW5kZWQteGwgdGV4dC1zbSBmb250LW1lZGl1bSBmb2N1czpib3JkZXItYmx1ZS01MDAgb3V0bGluZS1ub25lIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz0iYmxvY2sgdGV4dC14cyBmb250LWJvbGQgdGV4dC1zbGF0ZS00MDAgdXBwZXJjYXNlIHRyYWNraW5nLXdpZGVyIG1iLTEiPkRhdGUgZGUgcHVibGljYXRpb24gKFNpZ25hdHVyZSk8L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9ImRhdGUiIGlkPSJiaS1wdWItZGF0ZSIgb25pbnB1dD0idHJpZ2dlckF1dG9TYXZlKCkiIGNsYXNzPSJ3LWZ1bGwgcHgtNCBweS0yIGJvcmRlci0yIGJvcmRlci1zbGF0ZS0xMDAgcm91bmRlZC14bCB0ZXh0LXNtIGZvbnQtYm9sZCB0ZXh0LXNsYXRlLTcwMCBmb2N1czpib3JkZXItYmx1ZS01MDAgZm9jdXM6cmluZy0wIG91dGxpbmUtbm9uZSB0cmFuc2l0aW9uLWNvbG9ycyI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPSJibG9jayB0ZXh0LXhzIGZvbnQtYm9sZCB0ZXh0LXNsYXRlLTQwMCB1cHBlcmNhc2UgdHJhY2tpbmctd2lkZXIgbWItMSI+U2lnbmF0YWlyZSAoUGllZCBkZSBwYWdlKTwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c2VsZWN0IGlkPSJiaS1zaWduYXRvcnkiIG9uY2hhbmdlPSJ0cmlnZ2VyQXV0b1NhdmUoKSIgY2xhc3M9InctZnVsbCBweC00IHB5LTIgYm9yZGVyLTIgYm9yZGVyLXNsYXRlLTEwMCByb3VuZGVkLXhsIHRleHQtc20gZm9udC1ib2xkIHRleHQtc2xhdGUtNzAwIGJnLXdoaXRlIGZvY3VzOmJvcmRlci1ibHVlLTUwMCBmb2N1czpyaW5nLTAgb3V0bGluZS1ub25lIHRyYW5zaXRpb24tY29sb3JzIGN1cnNvci1wb2ludGVyIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJMJ8OpcXVpcGUgZGUgZGlyZWN0aW9uIj5MJ8OpcXVpcGUgZGUgZGlyZWN0aW9uPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iTGUgY2hlZiBkJ8OpdGFibGlzc2VtZW50Ij5MZSBjaGVmIGQnw6l0YWJsaXNzZW1lbnQ8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJMZSBjaGVmIGQnw6l0YWJsaXNzZW1lbnQgYWRqb2ludCI+TGUgY2hlZiBkJ8OpdGFibGlzc2VtZW50IGFkam9pbnQ8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJsZSBjaGVmIGQnw6l0YWJsaXNzZW1lbnQsIGxlIGNoZWYgZCfDqXRhYmxpc3NlbWVudCBhZGpvaW50IG91IGwnw6lxdWlwZSBkZSBkaXJlY3Rpb24iPlRvdXM8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc2VsZWN0PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ibWQ6Y29sLXNwYW4tMiI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9ImJsb2NrIHRleHQteHMgZm9udC1ib2xkIHRleHQtc2xhdGUtNDAwIHVwcGVyY2FzZSB0cmFja2luZy13aWRlciBtYi0xIj5UaMOobWUgLyBDb3VsZXVycyBQREY8L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNlbGVjdCBpZD0iYmktdGhlbWUiIG9uY2hhbmdlPSJ0cmlnZ2VyQXV0b1NhdmUoKSIgY2xhc3M9InctZnVsbCBweC00IHB5LTIgYm9yZGVyLTIgYm9yZGVyLXNsYXRlLTEwMCByb3VuZGVkLXhsIHRleHQtc20gZm9udC1ib2xkIHRleHQtc2xhdGUtNzAwIGJnLXdoaXRlIGZvY3VzOmJvcmRlci1ibHVlLTUwMCBmb2N1czpyaW5nLTAgb3V0bGluZS1ub25lIHRyYW5zaXRpb24tY29sb3JzIGN1cnNvci1wb2ludGVyIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJibHVlIj7wn5S1IEJsZXUgSW5zdGl0dXRpb25uZWwgKFBhciBkw6lmYXV0KTwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9InJlZCI+8J+UtCBSb3VnZSDDiW5lcmdpZTwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9ImdyZWVuIj7wn5+iIFZlcnQgTmF0dXJlPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0icHVycGxlIj7wn5+jIFZpb2xldCBDcsOpYXRpZjwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9ImdyZXkiPuKaqyBTb2JyacOpdMOpIChOb2lyICYgQmxhbmMpPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3NlbGVjdD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8IS0tIENhcmQgMiAtLT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImJnLXdoaXRlIHAtNiByb3VuZGVkLTJ4bCBib3JkZXIgYm9yZGVyLXNsYXRlLTIwMCBzaGFkb3ctc20gaG92ZXI6c2hhZG93LW1kIHRyYW5zaXRpb24tc2hhZG93IHJlbGF0aXZlIiBpZD0iZm9ybS1jb250YWluZXIiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMyBjbGFzcz0iZm9udC1ib2xkIHRleHQtc2xhdGUtODAwIG1iLTQgZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTMiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz0idy04IGgtOCBiZy1vcmFuZ2UtMTAwIHRleHQtb3JhbmdlLTYwMCByb3VuZGVkLWxnIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIHRleHQtc20gZm9udC1ib2xkIj4yPC9zcGFuPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBpZD0iZm9ybS10aXRsZSI+U2Fpc2lyIHVuZSBpbmZvPC9zcGFuPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvaDM+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ic3BhY2UteS00Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz0iYmxvY2sgdGV4dC14cyBmb250LWJvbGQgdGV4dC1zbGF0ZS00MDAgdXBwZXJjYXNlIHRyYWNraW5nLXdpZGVyIG1iLTEiPkNhdMOpZ29yaWU8L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZmxleCBnYXAtMiI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNlbGVjdCBpZD0iaXRlbS1jYXRlZ29yeSIgY2xhc3M9ImZsZXgtMSBweC00IHB5LTIuNSBib3JkZXItMiBib3JkZXItc2xhdGUtMTAwIHJvdW5kZWQteGwgdGV4dC1zbSBmb250LW1lZGl1bSBiZy1zbGF0ZS01MCBmb2N1czpiZy13aGl0ZSBmb2N1czpib3JkZXItb3JhbmdlLTQwMCBvdXRsaW5lLW5vbmUgdHJhbnNpdGlvbi1hbGwgY3Vyc29yLXBvaW50ZXIiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8IS0tIER5bmFtaWMgQ2F0ZWdvcmllcyAtLT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3NlbGVjdD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIG9uY2xpY2s9Im9wZW5DYXRlZ29yeU1hbmFnZXIoKSIgY2xhc3M9InB4LTMgYmctc2xhdGUtMTAwIHRleHQtc2xhdGUtNjAwIHJvdW5kZWQteGwgaG92ZXI6Ymctc2xhdGUtMjAwIHRyYW5zaXRpb24tY29sb3JzIGZvbnQtYm9sZCIgdGl0bGU9IkfDqXJlciB0b3V0ZXMgbGVzIGNhdMOpZ29yaWVzIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHN2ZyBjbGFzcz0idy01IGgtNSI+PHVzZSBocmVmPSIjaWNvbi1saXN0Ij48L3VzZT48L3N2Zz4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIG9uY2xpY2s9ImFkZEN1c3RvbUNhdGVnb3J5KCkiIGNsYXNzPSJweC00IGJnLXNsYXRlLTEwMCB0ZXh0LXNsYXRlLTYwMCByb3VuZGVkLXhsIGhvdmVyOmJnLXNsYXRlLTIwMCB0cmFuc2l0aW9uLWNvbG9ycyBmb250LWJvbGQgdGV4dC1sZyIgdGl0bGU9IkNyw6llciB1bmUgbm91dmVsbGUgY2F0w6lnb3JpZSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZsZXggZ2FwLTMiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InctMS8zIGZsZXggZmxleC1jb2wgZ2FwLTEiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZsZXggZ2FwLTIgdGV4dC1bMTBweF0gdXBwZXJjYXNlIGZvbnQtYm9sZCB0ZXh0LXNsYXRlLTQwMCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz0iZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTEgY3Vyc29yLXBvaW50ZXIiPjxpbnB1dCB0eXBlPSJyYWRpbyIgbmFtZT0iZGF0ZS10eXBlIiB2YWx1ZT0iZml4ZWQiIGNoZWNrZWQgb25jaGFuZ2U9InRvZ2dsZURhdGVJbnB1dCgpIj4gRml4ZTwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz0iZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTEgY3Vyc29yLXBvaW50ZXIiPjxpbnB1dCB0eXBlPSJyYWRpbyIgbmFtZT0iZGF0ZS10eXBlIiB2YWx1ZT0idmFyaWFibGUiIG9uY2hhbmdlPSJ0b2dnbGVEYXRlSW5wdXQoKSI+IExpYnJlPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0iZGF0ZSIgaWQ9Iml0ZW0tZGF0ZS1maXhlZCIgY2xhc3M9InctZnVsbCBweC00IHB5LTIuNSBib3JkZXItMiBib3JkZXIteWVsbG93LTEwMCBiZy15ZWxsb3ctNTAgcm91bmRlZC14bCB0ZXh0LXNtIGZvbnQtYm9sZCB0ZXh0LXllbGxvdy04MDAgZm9jdXM6Ym9yZGVyLXllbGxvdy00MDAgb3V0bGluZS1ub25lIHRyYW5zaXRpb24tY29sb3JzIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0idGV4dCIgaWQ9Iml0ZW0tZGF0ZS12YXJpYWJsZSIgY2xhc3M9InctZnVsbCBweC00IHB5LTIuNSBib3JkZXItMiBib3JkZXIteWVsbG93LTEwMCBiZy15ZWxsb3ctNTAgcm91bmRlZC14bCB0ZXh0LXNtIGZvbnQtYm9sZCB0ZXh0LXllbGxvdy04MDAgZm9jdXM6Ym9yZGVyLXllbGxvdy00MDAgb3V0bGluZS1ub25lIHRyYW5zaXRpb24tY29sb3JzIGhpZGRlbiIgcGxhY2Vob2xkZXI9IkV4OiBUb3V0ZSBsYSBzZW1haW5lIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJ3LTIvMyBmbGV4IGZsZXgtY29sIGp1c3RpZnktZW5kIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0idGV4dCIgaWQ9Iml0ZW0tdGl0bGUiIGxpc3Q9InRpdGxlLXN1Z2dlc3Rpb25zIiBjbGFzcz0idy1mdWxsIHB4LTQgcHktMi41IGJvcmRlci0yIGJvcmRlci1zbGF0ZS0xMDAgcm91bmRlZC14bCB0ZXh0LXNtIGZvbnQtYm9sZCBmb2N1czpib3JkZXItb3JhbmdlLTQwMCBvdXRsaW5lLW5vbmUgdHJhbnNpdGlvbi1jb2xvcnMiIHBsYWNlaG9sZGVyPSJUaXRyZSBvdSBjaG9pc2lyLi4uIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGF0YWxpc3QgaWQ9InRpdGxlLXN1Z2dlc3Rpb25zIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iQWNjdWVpbCDDqWxhcmdpIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iQWZmZWN0YXRpb24iPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJBU1NSIDEyIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iQVVUUkUiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJCYXNzaW4iPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJDQSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IkNFQyI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IkNFU0NFIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iQ2hvaXggZCdvcmllbnRhdGlvbiI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IkNpdMOpIMOpZHVjYXRpdmUiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJDb21taXNzaW9uIMOpZHVjYXRpdmUiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJDb21taXNzaW9uIHBlcm1hbmVudGUiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJDb25zZWlsIGRlIGRpc2NpcGxpbmUiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJDb25zZWlsIGQnZW5zZWlnbmVtZW50Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iQ29uc2VpbCBww6lkYWdvZ2lxdWUiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJDb25zZWlscyBkZSBjbGFzc2UiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJERiI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IkRHSCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IkVkdWNEcm9pdCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IkVkdWNGaSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IsOJcXVpcGUgw6lkdWNhdGl2ZSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IkVTUyI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IsOJdmFsdWF0aW9uIEVQTEUiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSLDiXZhbHVhdGlvbnMgbmF0aW9uYWxlcyI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IkV2YWxhbmciPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJFeGFtZW5zIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iRXhhbWVucyBibGFuY3MiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJMaWFpc29ucyI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9Ik5BSCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9Ik51bcOpcmlxdWUiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJQSVgiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJQUE1TIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iUFBPIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iUHJvamV0IGQnw6l0YWJsaXNzZW1lbnQiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJQcm9qZXRzIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iUmVudHLDqWUiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJSSSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IlNDM0MiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJTb3J0aWUgc2NvbGFpcmUiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJTdGFnZSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IlVOU1MiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJWUyI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kYXRhbGlzdD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8IS0tIFdZU0lXWUcgRURJVE9SIC0tPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJxdWlsbC13cmFwcGVyIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgaWQ9InF1aWxsLWVkaXRvciI+PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZmxleCBnYXAtMyBwdC0yIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gaWQ9ImJ0bi1hZGQtdXBkYXRlIiBvbmNsaWNrPSJhZGRCdWxsZXRpbkl0ZW0oKSIgY2xhc3M9ImZsZXgtMSBweS0zIGJnLW9yYW5nZS01MDAgdGV4dC13aGl0ZSBmb250LWJvbGQgcm91bmRlZC14bCBob3ZlcjpiZy1vcmFuZ2UtNjAwIGFjdGl2ZTpzY2FsZS05NSB0cmFuc2l0aW9uLWFsbCBzaGFkb3ctbWQgc2hhZG93LW9yYW5nZS0yMDAiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFqb3V0ZXIgbCdpbmZvIPCfmoAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBpZD0iYnRuLWNhbmNlbC1lZGl0IiBvbmNsaWNrPSJjYW5jZWxFZGl0KCkiIGNsYXNzPSJoaWRkZW4gcHgtNSBweS0zIGJnLXNsYXRlLTEwMCB0ZXh0LXNsYXRlLTUwMCBmb250LWJvbGQgcm91bmRlZC14bCBob3ZlcjpiZy1zbGF0ZS0yMDAgdHJhbnNpdGlvbi1jb2xvcnMiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFubnVsZXIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwhLS0gR3JvdXBlZCBMaXN0IGluIEVkaXRvciAtLT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InNwYWNlLXktNiIgaWQ9ImVkaXRvci1pdGVtcy1saXN0Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8IS0tIER5bmFtaWMgTGlzdCAtLT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KCiAgICAgICAgICAgICAgICAgICAgICAgIDwhLS0gUmlnaHQ6IFByZXZpZXcgLS0+CiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImhpZGRlbiBsZzpmbGV4IG92ZXJmbG93LWhpZGRlbiBiZy1zbGF0ZS0yMDAgcm91bmRlZC0yeGwgYm9yZGVyLTQgYm9yZGVyLXNsYXRlLTMwMCBzaGFkb3ctaW5uZXIgcC04IGl0ZW1zLXN0YXJ0IGp1c3RpZnktY2VudGVyIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InNjYWxlLVswLjY1XSBvcmlnaW4tdG9wIHRyYW5zZm9ybS1ncHUgc2hhZG93LTJ4bCIgaWQ9InByZXZpZXctd3JhcHBlciI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBpZD0icGRmLWNvbnRlbnQiIGNsYXNzPSJhNC1wYWdlIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPCEtLSBSZW5kZXJlZCBDb250ZW50IC0tPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICA8L2Rpdj4KCiAgICAgICAgPCEtLSBIRUxQIC0tPgogICAgICAgIDxkaXYgaWQ9InZpZXctaGVscCIgY2xhc3M9ImhpZGRlbiBmbGV4LTEgb3ZlcmZsb3cteS1hdXRvIHAtOCBiZy1zbGF0ZS01MCI+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9Im1heC13LTR4bCBteC1hdXRvIHByb3NlIGJnLXdoaXRlIHAtMTAgcm91bmRlZC0zeGwgc2hhZG93LXhsIGJvcmRlciBib3JkZXItc2xhdGUtMTAwIj4KICAgICAgICAgICAgICAgIDxoMiBjbGFzcz0idGV4dC0zeGwgZm9udC1ibGFjayB0ZXh0LXNsYXRlLTgwMCBtYi02IGZsZXggaXRlbXMtY2VudGVyIGdhcC0zIj4KICAgICAgICAgICAgICAgICAgICDwn5OaIE1vZGUgZCdlbXBsb2kgJiBFbmpldXgKICAgICAgICAgICAgICAgIDwvaDI+CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIDwhLS0gU2VjdGlvbiBFbmpldSAtLT4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9Im1iLTEwIj4KICAgICAgICAgICAgICAgICAgICA8aDMgY2xhc3M9InRleHQteGwgZm9udC1ib2xkIHRleHQtYmx1ZS04MDAgbWItNCBmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMiI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJ0ZXh0LTJ4bCI+8J+Orzwvc3Bhbj4gTCdFbmpldSBkZSBQRVJESVJGT1JNQU5DRSBCaSBCYXNlCiAgICAgICAgICAgICAgICAgICAgPC9oMz4KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJiZy1ibHVlLTUwIGJvcmRlci1sLTQgYm9yZGVyLWJsdWUtNTAwIHAtNSByb3VuZGVkLXIteGwgdGV4dC1zbGF0ZS03MDAgc3BhY2UteS0zIHRleHQtc20gbGVhZGluZy1yZWxheGVkIj4KICAgICAgICAgICAgICAgICAgICAgICAgPHA+PHN0cm9uZz5Db21tdW5pcXVlciBlZmZpY2FjZW1lbnQgOjwvc3Ryb25nPiBEYW5zIHVuIMOpdGFibGlzc2VtZW50IHNjb2xhaXJlLCBsJ2luZm9ybWF0aW9uIGVzdCBkZW5zZSBldCBtdWx0aXNvdXJjZS4gQ2UgYnVsbGV0aW4gcGVybWV0IGRlIGNlbnRyYWxpc2VyIGxlcyBpbmZvcm1hdGlvbnMgZXNzZW50aWVsbGVzIGRlIGxhIHNlbWFpbmUgZW4gdW4gZG9jdW1lbnQgdW5pcXVlLCBjbGFpciBldCBzdHJ1Y3R1csOpLjwvcD4KICAgICAgICAgICAgICAgICAgICAgICAgPHA+PHN0cm9uZz5Qcm9mZXNzaW9ubmFsaXNlciBsJ2ltYWdlIDo8L3N0cm9uZz4gVW4gZG9jdW1lbnQgc3RhbmRhcmRpc8OpLCBhdXggY291bGV1cnMgZGUgbCfDqXRhYmxpc3NlbWVudCAobG9nbywgc2lnbmF0dXJlKSwgcmVuZm9yY2UgbCdpZGVudGl0w6kgdmlzdWVsbGUgZXQgbGEgY3LDqWRpYmlsaXTDqSBkZSBsYSBkaXJlY3Rpb24uPC9wPgogICAgICAgICAgICAgICAgICAgICAgICA8cD48c3Ryb25nPkdhZ25lciBkdSB0ZW1wcyA6PC9zdHJvbmc+IEZpbmkgbGEgbWlzZSBlbiBwYWdlIGZhc3RpZGlldXNlIHN1ciB0cmFpdGVtZW50IGRlIHRleHRlLiBTYWlzaXNzZXosIGNhdMOpZ29yaXNleiwgZXQgbGUgUERGIHNlIGfDqW7DqHJlIGF1dG9tYXRpcXVlbWVudC48L3A+CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICA8L2Rpdj4KCiAgICAgICAgICAgICAgICA8IS0tIFNlY3Rpb24gTW9kZSBkJ2VtcGxvaSAtLT4KICAgICAgICAgICAgICAgIDxkaXY+CiAgICAgICAgICAgICAgICAgICAgPGgzIGNsYXNzPSJ0ZXh0LXhsIGZvbnQtYm9sZCB0ZXh0LW9yYW5nZS03MDAgbWItNiBmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMiI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJ0ZXh0LTJ4bCI+8J+agDwvc3Bhbj4gR3VpZGUgZGUgZMOpbWFycmFnZSByYXBpZGUKICAgICAgICAgICAgICAgICAgICA8L2gzPgogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImdyaWQgZ3JpZC1jb2xzLTEgbWQ6Z3JpZC1jb2xzLTIgZ2FwLTYiPgogICAgICAgICAgICAgICAgICAgICAgICA8IS0tIMOJdGFwZSAxIC0tPgogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJiZy1zbGF0ZS01MCBwLTUgcm91bmRlZC0yeGwgYm9yZGVyIGJvcmRlci1zbGF0ZS0xMDAgc2hhZG93LXNtIGhvdmVyOnNoYWRvdy1tZCB0cmFuc2l0aW9uLXNoYWRvdyI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb250LWJsYWNrIHRleHQtc2xhdGUtODAwIHRleHQtbGcgbWItMiI+MS4gSWRlbnRpdMOpIPCfj6I8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzPSJ0ZXh0LXNtIHRleHQtc2xhdGUtNjAwIj5DbGlxdWV6IHN1ciA8c3BhbiBjbGFzcz0iZm9udC1ib2xkIj5QYXJhbcOodHJlcyAo4pqZ77iPKTwvc3Bhbj4gZW4gaGF1dCDDoCBkcm9pdGUgcG91ciBlbnRyZXIgbGUgbm9tIGRlIHZvdHJlIMOpdGFibGlzc2VtZW50IGV0IGFqb3V0ZXIgdm90cmUgbG9nby48L3A+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgICAgICAgICAgICAgICAgPCEtLSDDiXRhcGUgMiAtLT4KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iYmctc2xhdGUtNTAgcC01IHJvdW5kZWQtMnhsIGJvcmRlciBib3JkZXItc2xhdGUtMTAwIHNoYWRvdy1zbSBob3ZlcjpzaGFkb3ctbWQgdHJhbnNpdGlvbi1zaGFkb3ciPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9udC1ibGFjayB0ZXh0LXNsYXRlLTgwMCB0ZXh0LWxnIG1iLTIiPjIuIFBhcmFtw6l0cmV6IPCfk4U8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzPSJ0ZXh0LXNtIHRleHQtc2xhdGUtNjAwIj5Ew6lmaW5pc3NleiBsZSBudW3DqXJvIGR1IGJ1bGxldGluLCBsYSBww6lyaW9kZSAoc2VtYWluZSkgZXQgY2hvaXNpc3NleiBsZSBzaWduYXRhaXJlIG9mZmljaWVsIGRhbnMgbGUgYmxvYyAiUGFyYW3DqHRyZXMiLjwvcD4KICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CgogICAgICAgICAgICAgICAgICAgICAgICA8IS0tIMOJdGFwZSAzIC0tPgogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJiZy1zbGF0ZS01MCBwLTUgcm91bmRlZC0yeGwgYm9yZGVyIGJvcmRlci1zbGF0ZS0xMDAgc2hhZG93LXNtIGhvdmVyOnNoYWRvdy1tZCB0cmFuc2l0aW9uLXNoYWRvdyI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb250LWJsYWNrIHRleHQtc2xhdGUtODAwIHRleHQtbGcgbWItMiI+My4gU2Fpc2lzc2V6IOKcje+4jzwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3M9InRleHQtc20gdGV4dC1zbGF0ZS02MDAiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlbXBsaXNzZXogbGUgZm9ybXVsYWlyZS4gVXRpbGlzZXogbGVzIG91dGlscyBkZSBsJ8OpZGl0ZXVyIChHcmFzLCBMaXN0ZXMpIHBvdXIgbWV0dHJlIGVuIGZvcm1lIHZvdHJlIHRleHRlLgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9wPgogICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KCiAgICAgICAgICAgICAgICAgICAgICAgIDwhLS0gw4l0YXBlIDQgLS0+CiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImJnLXNsYXRlLTUwIHAtNSByb3VuZGVkLTJ4bCBib3JkZXIgYm9yZGVyLXNsYXRlLTEwMCBzaGFkb3ctc20gaG92ZXI6c2hhZG93LW1kIHRyYW5zaXRpb24tc2hhZG93Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvbnQtYmxhY2sgdGV4dC1zbGF0ZS04MDAgdGV4dC1sZyBtYi0yIj40LiBPcmdhbmlzZXog4oaV77iPPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzcz0idGV4dC1zbSB0ZXh0LXNsYXRlLTYwMCI+VXRpbGlzZXogbGVzIGZsw6hjaGVzIHN1ciBsZXMgdGl0cmVzIGRlIGNhdMOpZ29yaWVzIHBvdXIgY2hhbmdlciBsJ29yZHJlIGQnYXBwYXJpdGlvbiBkYW5zIGxlIFBERi48L3A+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgPC9kaXY+CgogICAgICAgICAgICAgICAgPCEtLSBTZWN0aW9uIE5vdXZlYXV0w6kgVjMuMCAtLT4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9Im10LTEwIHB0LTggYm9yZGVyLXQgYm9yZGVyLXNsYXRlLTEwMCI+CiAgICAgICAgICAgICAgICAgICAgPGgzIGNsYXNzPSJ0ZXh0LXhsIGZvbnQtYm9sZCB0ZXh0LWluZGlnby03MDAgbWItNCBmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMiI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJ0ZXh0LTJ4bCI+4pyoPC9zcGFuPiBOb3V2ZWF1dMOpcyBWMy4wIDogUHJvZHVjdGl2aXTDqSBNYXhpbWFsZQogICAgICAgICAgICAgICAgICAgIDwvaDM+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iYmctaW5kaWdvLTUwIGJvcmRlci1sLTQgYm9yZGVyLWluZGlnby01MDAgcC01IHJvdW5kZWQtci14bCB0ZXh0LXNsYXRlLTcwMCBzcGFjZS15LTQgdGV4dC1zbSBsZWFkaW5nLXJlbGF4ZWQiPgogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoNCBjbGFzcz0iZm9udC1ib2xkIHRleHQtaW5kaWdvLTkwMCBmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMiI+4pqhIER1cGxpY2F0aW9uIGRlIEJ1bGxldGluPC9oND4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cD5Wb3VzIHNvdWhhaXRleiByZXByZW5kcmUgbGEgYmFzZSBkZSBsYSBzZW1haW5lIGRlcm5pw6hyZSA/IERhbnMgbGEgbGlzdGUgZGUgZ2F1Y2hlLCBjbGlxdWV6IHN1ciBsZSBib3V0b24gIkNvcGllciIgKGRvdWJsZSBjYXJyw6kpLiBVbiBub3V2ZWF1IGJ1bGxldGluIHNlcmEgY3LDqcOpIGF2ZWMgdG91dCBsZSBjb250ZW51LCBldCBsZSBudW3DqXJvIHNlcmEgYXV0b21hdGlxdWVtZW50IGluY3LDqW1lbnTDqSAhPC9wPgogICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDQgY2xhc3M9ImZvbnQtYm9sZCB0ZXh0LWluZGlnby05MDAgZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTIiPvCflI0gUmVjaGVyY2hlIEluc3RhbnRhbsOpZTwvaDQ+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHA+UmV0cm91dmV6IGZhY2lsZW1lbnQgdW4gYW5jaWVuIG51bcOpcm8gZ3LDomNlIMOgIGxhIG5vdXZlbGxlIGJhcnJlIGRlIHJlY2hlcmNoZSBzaXR1w6llIGVuIGhhdXQgZGUgbGEgbGlzdGUgZGVzIGJ1bGxldGlucy48L3A+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoNCBjbGFzcz0iZm9udC1ib2xkIHRleHQtaW5kaWdvLTkwMCBmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMiI+8J+ThCBFeHBvcnQgV29yZCAoLmRvY3gpPC9oND4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cD5JbnRyb2R1aXQgZW4gVjIuNywgbCdleHBvcnQgV29yZCBwZXJtZXQgZGUgcmV0b3VjaGVyIGxlIGRvY3VtZW50IGZpbmFsIHNpIG7DqWNlc3NhaXJlIGF2YW50IGwnZW52b2kuPC9wPgogICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICA8L2Rpdj4KCiAgICA8L21haW4+CgogICAgPCEtLSBGT09URVIgLS0+CiAgICA8Zm9vdGVyIGNsYXNzPSJiZy13aGl0ZSBib3JkZXItdCBib3JkZXItc2xhdGUtMjAwIHB5LTIgdGV4dC1jZW50ZXIgdGV4dC1bMTBweF0gdGV4dC1zbGF0ZS00MDAgZmxleC1zaHJpbmstMCB6LTIwIj4KICAgICAgICBPdXRpbCBwcm9wb3PDqSBwYXIgWWFubmlzIENIUklTVE9OIHwgVXRpbGlzYXRpb24gbG9jYWxlLCBSR1BELgogICAgPC9mb290ZXI+CgogICAgPCEtLSBTRVRUSU5HUyBNT0RBTCAtLT4KICAgIAogICAgCiAgICA8IS0tIENBVEVHT1JZIE1BTkFHRVIgTU9EQUwgLS0+CiAgICA8ZGl2IGlkPSJtb2RhbC1jYXRlZ29yaWVzIiBjbGFzcz0iZml4ZWQgaW5zZXQtMCB6LTUwIGhpZGRlbiBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciI+CiAgICAgICAgPGRpdiBjbGFzcz0iYWJzb2x1dGUgaW5zZXQtMCBiZy1zbGF0ZS05MDAvNTAgYmFja2Ryb3AtYmx1ci1zbSIgb25jbGljaz0iY2xvc2VDYXRlZ29yeU1hbmFnZXIoKSI+PC9kaXY+CiAgICAgICAgPGRpdiBjbGFzcz0iYmctd2hpdGUgcm91bmRlZC0yeGwgc2hhZG93LTJ4bCB3LWZ1bGwgbWF4LXctbWQgbXgtNCByZWxhdGl2ZSB6LTEwIHAtMCB0cmFuc2Zvcm0gdHJhbnNpdGlvbi1hbGwgc2NhbGUtMTAwIG92ZXJmbG93LWhpZGRlbiBmbGV4IGZsZXgtY29sIG1heC1oLVs4NXZoXSI+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9InAtNiBib3JkZXItYiBib3JkZXItc2xhdGUtMTAwIGJnLXNsYXRlLTUwIj4KICAgICAgICAgICAgICAgIDxoMyBjbGFzcz0idGV4dC14bCBmb250LWJsYWNrIHRleHQtc2xhdGUtODAwIGZsZXggaXRlbXMtY2VudGVyIGdhcC0yIj4KICAgICAgICAgICAgICAgICAgICDwn5OLIE9yZHJlIGRlcyBjYXTDqWdvcmllcwogICAgICAgICAgICAgICAgPC9oMz4KICAgICAgICAgICAgICAgIDxwIGNsYXNzPSJ0ZXh0LXNtIHRleHQtc2xhdGUtNTAwIG10LTEiPk1vZGlmaWV6IGwnb3JkcmUgZCdhZmZpY2hhZ2UgZGFucyBsZSBQREYuPC9wPgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgCiAgICAgICAgICAgIDxkaXYgY2xhc3M9Im92ZXJmbG93LXktYXV0byBwLTQgc3BhY2UteS0yIGZsZXgtMSIgaWQ9ImNhdGVnb3J5LW1hbmFnZXItbGlzdCI+CiAgICAgICAgICAgICAgICA8IS0tIExpc3Qgd2lsbCBiZSBoZXJlIC0tPgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgCiAgICAgICAgICAgIDxkaXYgY2xhc3M9InAtNCBib3JkZXItdCBib3JkZXItc2xhdGUtMTAwIGJnLXNsYXRlLTUwIGZsZXgganVzdGlmeS1lbmQiPgogICAgICAgICAgICAgICAgPGJ1dHRvbiBvbmNsaWNrPSJjbG9zZUNhdGVnb3J5TWFuYWdlcigpIiBjbGFzcz0icHgtNiBweS0yIGJnLWJsdWUtNjAwIHRleHQtd2hpdGUgcm91bmRlZC14bCBmb250LWJvbGQgaG92ZXI6YmctYmx1ZS03MDAgdHJhbnNpdGlvbi1jb2xvcnMiPkZlcm1lcjwvYnV0dG9uPgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICA8L2Rpdj4KICAgIDwvZGl2PgoKICAgIDwhLS0gSkFWQVNDUklQVCAtLT4KICAgIDxzY3JpcHQ+CiAgICAgICAgLy8gLS0tIERBVEEgU1RBVEUgLS0tCiAgICAgICAgLy8gRW5oYW5jZWQgRXN0YWJsaXNobWVudCBPYmplY3Qgd2l0aCBMYXlvdXQsIEZvbnQgYW5kIEN1c3RvbSBUZXh0cwogICAgICAgIGxldCBlc3RhYmxpc2htZW50ID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnYmliYXNlX2VzdGFibGlzaG1lbnQnKSkgfHwgewogICAgICAgICAgICBuYW1lOiAiIiwKICAgICAgICAgICAgYWRkcmVzczogIiIsCiAgICAgICAgICAgIGxvZ286ICIiLAogICAgICAgICAgICBsYXlvdXQ6ICJjbGFzc2ljIiwgLy8gY2xhc3NpYywgbW9kZXJuLCBiYW5uZXIKICAgICAgICAgICAgZm9udDogImludGVyIiwgLy8gaW50ZXIsIHNlcmlmLCBtb25vCiAgICAgICAgICAgIGRlZmF1bHRTaWduYXRvcnk6ICJMJ8OpcXVpcGUgZGUgZGlyZWN0aW9uIiwKICAgICAgICAgICAgZG9jVGl0bGU6ICJCdWxsZXRpbiBkJ2luZm9ybWF0aW9uIiwKICAgICAgICAgICAgZG9jRm9vdGVyOiAiIiAvLyBDdXN0b20gZm9vdGVyIHRleHQKICAgICAgICB9OwoKICAgICAgICBsZXQgYnVsbGV0aW5zID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnYmliYXNlX2J1bGxldGlucycpKSB8fCBbXTsKICAgICAgICAKICAgICAgICAvLyBEZWZhdWx0IENhdGVnb3JpZXMKICAgICAgICBjb25zdCBERUZBVUxUX0NBVEVHT1JJRVMgPSBbCiAgICAgICAgICAgICLwn5OFIEFHRU5EQSIsIAogICAgICAgICAgICAi8J+PqyBWSUUgREUgTCfDiVRBQkxJU1NFTUVOVCIsIAogICAgICAgICAgICAi8J+knSBBTUlDQUxFIiwgCiAgICAgICAgICAgICLwn5GlIFBFUlNPTk5FTCIsIAogICAgICAgICAgICAi8J+TmiBQw4lEQUdPR0lFIiwgCiAgICAgICAgICAgICLwn46SIFZJRSBTQ09MQUlSRSIsIAogICAgICAgICAgICAi8J+nrSBPUklFTlRBVElPTiIsIAogICAgICAgICAgICAi4pm/IEVCRVAiLAogICAgICAgICAgICAi8J+OqCDDiURVQ0FUSUYiLAogICAgICAgICAgICAi8J+SuyBOVU3DiVJJUVVFIiwKICAgICAgICAgICAgIvCfkrwgSU5URU5EQU5DRSIsIAogICAgICAgICAgICAi8J+PpSBTQU5Uw4kgLyBTT0NJQUwiLCAKICAgICAgICAgICAgIvCfjpMgRVhBTUVOUyIsIAogICAgICAgICAgICAi8J+TnCBCVUxMRVRJTiBPRkZJQ0lFTCIsIAogICAgICAgICAgICAi4pqW77iPIEJPIiwKICAgICAgICAgICAgIvCfkqEgQVVUUkUiCiAgICAgICAgXTsKICAgICAgICAKICAgICAgICAvLyBNYXN0ZXIgY2F0ZWdvcnkgbGlzdAogICAgICAgIGxldCBtYXN0ZXJDYXRlZ29yaWVzID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnYmliYXNlX2NhdGVnb3JpZXNfbWFzdGVyJykpOwoKICAgICAgICBpZiAoIW1hc3RlckNhdGVnb3JpZXMpIHsKICAgICAgICAgICAgY29uc3Qgb2xkQ3VzdG9tID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnYmliYXNlX2NhdGVnb3JpZXMnKSkgfHwgW107CiAgICAgICAgICAgIG1hc3RlckNhdGVnb3JpZXMgPSBbLi4uREVGQVVMVF9DQVRFR09SSUVTLCAuLi5vbGRDdXN0b21dOwogICAgICAgICAgICBtYXN0ZXJDYXRlZ29yaWVzID0gWy4uLm5ldyBTZXQobWFzdGVyQ2F0ZWdvcmllcyldOwogICAgICAgIH0KCiAgICAgICAgbGV0IGN1cnJlbnRCdWxsZXRpbklkID0gbnVsbDsKICAgICAgICBsZXQgY3VycmVudEl0ZW1zID0gW107CiAgICAgICAgbGV0IGF1dG9TYXZlVGltZXIgPSBudWxsOwogICAgICAgIGxldCBlZGl0aW5nSXRlbUlkID0gbnVsbDsKICAgICAgICBsZXQgcXVpbGwgPSBudWxsOwoKICAgICAgICAvLyAtLS0gSU5JVCAtLS0KICAgICAgICBmdW5jdGlvbiBpbml0QXBwKCkgewogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBRdWlsbCAhPT0gJ3VuZGVmaW5lZCcpIHsKICAgICAgICAgICAgICAgICAgICBxdWlsbCA9IG5ldyBRdWlsbCgnI3F1aWxsLWVkaXRvcicsIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhlbWU6ICdzbm93JywKICAgICAgICAgICAgICAgICAgICAgICAgbW9kdWxlczogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9vbGJhcjogWwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFsnYm9sZCcsICdpdGFsaWMnLCAndW5kZXJsaW5lJ10sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgW3sgJ2NvbG9yJzogW10gfSwgeyAnYmFja2dyb3VuZCc6IFtdIH1dLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFt7ICdzaXplJzogWydzbWFsbCcsIGZhbHNlLCAnbGFyZ2UnLCAnaHVnZSddIH1dLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFt7ICdsaXN0JzogJ29yZGVyZWQnfSwgeyAnbGlzdCc6ICdidWxsZXQnIH1dLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFsnY2xlYW4nXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgXQogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcjogJ8OJY3JpdmV6IHZvdHJlIG1lc3NhZ2UgaWNpLi4uJwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ1F1aWxsIG5vdCBsb2FkZWQgeWV0LCByZXRyeWluZyBpbiA1MDBtcy4uLicpOwogICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoaW5pdEFwcCwgNTAwKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZW5kZXJCdWxsZXRpbkxpc3QoKTsKICAgICAgICAgICAgICAgIHJlbmRlckNhdGVnb3J5T3B0aW9ucygpOwogICAgICAgICAgICAgICAgaWYoYnVsbGV0aW5zLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICAgICAgICBsb2FkQnVsbGV0aW4oYnVsbGV0aW5zLnNvcnQoKGEsYikgPT4gYi5pZCAtIGEuaWQpWzBdLmlkKTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgY3JlYXRlTmV3QnVsbGV0aW4oKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHVwZGF0ZVByZXZpZXcoKTsKICAgICAgICAgICAgfSBjYXRjaChlcnIpIHsgY29uc29sZS5lcnJvcignQmlCYXNlIGluaXQgZXJyb3I6JywgZXJyKTsgc2V0VGltZW91dChpbml0QXBwLCA4MDApOyB9CiAgICAgICAgfQogICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBmdW5jdGlvbigpIHsgc2V0VGltZW91dChpbml0QXBwLCAxMDApOyB9KTsKCiAgICAgICAgLy8gLS0tIE5BVklHQVRJT04gLS0tCiAgICAgICAgZnVuY3Rpb24gc3dpdGNoVGFiKHRhYikgewogICAgICAgICAgICBbJ2J1bGxldGluJywgJ2hlbHAnXS5mb3JFYWNoKHQgPT4gewogICAgICAgICAgICAgICAgY29uc3QgYnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYG5hdi0ke3R9YCk7CiAgICAgICAgICAgICAgICBjb25zdCB2aWV3ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYHZpZXctJHt0fWApOwogICAgICAgICAgICAgICAgaWYgKCFidG4gfHwgIXZpZXcpIHJldHVybjsKCiAgICAgICAgICAgICAgICBpZih0ID09PSB0YWIpIHsKICAgICAgICAgICAgICAgICAgICBidG4uY2xhc3NMaXN0LnJlbW92ZSgndGV4dC1zbGF0ZS01MDAnLCAnaG92ZXI6dGV4dC1zbGF0ZS03MDAnLCAnaG92ZXI6Ymctc2xhdGUtNTAnLCAnYm9yZGVyLXRyYW5zcGFyZW50Jyk7CiAgICAgICAgICAgICAgICAgICAgYnRuLmNsYXNzTGlzdC5hZGQoJ2JnLWJsdWUtNTAnLCAndGV4dC1ibHVlLTcwMCcsICdib3JkZXItYmx1ZS0xMDAnLCAnc2hhZG93LXNtJyk7CiAgICAgICAgICAgICAgICAgICAgdmlldy5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTsKICAgICAgICAgICAgICAgICAgICBpZih0ID09PSAnYnVsbGV0aW4nKSB2aWV3LmNsYXNzTGlzdC5hZGQoJ2ZsZXgnKTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgYnRuLmNsYXNzTGlzdC5hZGQoJ3RleHQtc2xhdGUtNTAwJywgJ2hvdmVyOnRleHQtc2xhdGUtNzAwJywgJ2hvdmVyOmJnLXNsYXRlLTUwJywgJ2JvcmRlci10cmFuc3BhcmVudCcpOwogICAgICAgICAgICAgICAgICAgIGJ0bi5jbGFzc0xpc3QucmVtb3ZlKCdiZy1ibHVlLTUwJywgJ3RleHQtYmx1ZS03MDAnLCAnYm9yZGVyLWJsdWUtMTAwJywgJ3NoYWRvdy1zbScpOwogICAgICAgICAgICAgICAgICAgIHZpZXcuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7CiAgICAgICAgICAgICAgICAgICAgdmlldy5jbGFzc0xpc3QucmVtb3ZlKCdmbGV4Jyk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgICBmdW5jdGlvbiB0b2dnbGVTaWRlYmFyTW9iaWxlKCkgewogICAgICAgICAgICBjb25zdCBzaWRlYmFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3ZpZXctYnVsbGV0aW4gPiBkaXY6Zmlyc3QtY2hpbGQnKTsKICAgICAgICAgICAgc2lkZWJhci5jbGFzc0xpc3QudG9nZ2xlKCdoaWRkZW4nKTsKICAgICAgICAgICAgc2lkZWJhci5jbGFzc0xpc3QudG9nZ2xlKCdhYnNvbHV0ZScpOwogICAgICAgICAgICBzaWRlYmFyLmNsYXNzTGlzdC50b2dnbGUoJ2gtZnVsbCcpOwogICAgICAgIH0KCiAgICAgICAgLy8gLS0tIENBVEVHT1JZIExPR0lDIC0tLQogICAgICAgIGZ1bmN0aW9uIHJlbmRlckNhdGVnb3J5T3B0aW9ucygpIHsKICAgICAgICAgICAgY29uc3Qgc2VsZWN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2l0ZW0tY2F0ZWdvcnknKTsKICAgICAgICAgICAgY29uc3QgY3VycmVudFZhbCA9IHNlbGVjdC52YWx1ZTsKICAgICAgICAgICAgc2VsZWN0LmlubmVySFRNTCA9IG1hc3RlckNhdGVnb3JpZXMubWFwKGNhdCA9PiBgPG9wdGlvbiB2YWx1ZT0iJHtjYXR9Ij4ke2NhdH08L29wdGlvbj5gKS5qb2luKCcnKTsKICAgICAgICAgICAgaWYobWFzdGVyQ2F0ZWdvcmllcy5pbmNsdWRlcyhjdXJyZW50VmFsKSkgeyBzZWxlY3QudmFsdWUgPSBjdXJyZW50VmFsOyB9CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBhZGRDdXN0b21DYXRlZ29yeSgpIHsKICAgICAgICAgICAgY29uc3QgbmV3Q2F0ID0gcHJvbXB0KCJOb20gZGUgbGEgbm91dmVsbGUgY2F0w6lnb3JpZSAoYXZlYyDDqW1vamkgc2kgdm91cyB2b3VsZXogISkgOiIpOwogICAgICAgICAgICBpZihuZXdDYXQgJiYgbmV3Q2F0LnRyaW0oKSAhPT0gIiIpIHsKICAgICAgICAgICAgICAgIGNvbnN0IHVwcGVyQ2F0ID0gbmV3Q2F0LnRyaW0oKS50b1VwcGVyQ2FzZSgpOwogICAgICAgICAgICAgICAgaWYoIW1hc3RlckNhdGVnb3JpZXMuaW5jbHVkZXModXBwZXJDYXQpKSB7CiAgICAgICAgICAgICAgICAgICAgbWFzdGVyQ2F0ZWdvcmllcy5wdXNoKHVwcGVyQ2F0KTsKICAgICAgICAgICAgICAgICAgICBzYXZlQ2F0ZWdvcmllcygpOwogICAgICAgICAgICAgICAgICAgIHJlbmRlckNhdGVnb3J5T3B0aW9ucygpOwogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpdGVtLWNhdGVnb3J5JykudmFsdWUgPSB1cHBlckNhdDsKICAgICAgICAgICAgICAgIH0gZWxzZSB7IGFsZXJ0KCJDZXR0ZSBjYXTDqWdvcmllIGV4aXN0ZSBkw6lqw6AuIik7IH0KICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICAKICAgICAgICBmdW5jdGlvbiBzYXZlQ2F0ZWdvcmllcygpIHsKICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2JpYmFzZV9jYXRlZ29yaWVzX21hc3RlcicsIEpTT04uc3RyaW5naWZ5KG1hc3RlckNhdGVnb3JpZXMpKTsKICAgICAgICB9CgogICAgICAgIC8vIC0tLSBDQVRFR09SWSBNQU5BR0VSIFVJIC0tLQogICAgICAgIGZ1bmN0aW9uIG9wZW5DYXRlZ29yeU1hbmFnZXIoKSB7CiAgICAgICAgICAgIGNvbnN0IGxpc3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2F0ZWdvcnktbWFuYWdlci1saXN0Jyk7CiAgICAgICAgICAgIGxpc3QuaW5uZXJIVE1MID0gJyc7CiAgICAgICAgICAgIAogICAgICAgICAgICBtYXN0ZXJDYXRlZ29yaWVzLmZvckVhY2goKGNhdCwgaW5kZXgpID0+IHsKICAgICAgICAgICAgICAgIGNvbnN0IGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgICAgICAgICAgICAgZGl2LmNsYXNzTmFtZSA9ICJmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWJldHdlZW4gcC0zIGJnLXdoaXRlIGJvcmRlciBib3JkZXItc2xhdGUtMjAwIHJvdW5kZWQteGwgaG92ZXI6Ym9yZGVyLWJsdWUtMzAwIHRyYW5zaXRpb24tY29sb3JzIGdyb3VwIjsKICAgICAgICAgICAgICAgIGRpdi5pbm5lckhUTUwgPSBgCiAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9ImZvbnQtYm9sZCB0ZXh0LXNsYXRlLTcwMCB0ZXh0LXNtIj4ke2NhdH08L3NwYW4+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTEgb3BhY2l0eS01MCBncm91cC1ob3ZlcjpvcGFjaXR5LTEwMCB0cmFuc2l0aW9uLW9wYWNpdHkiPgogICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIG9uY2xpY2s9Im1vdmVDYXRlZ29yeSgke2luZGV4fSwgLTEpIiBjbGFzcz0icC0xLjUgaG92ZXI6Ymctc2xhdGUtMTAwIHJvdW5kZWQtbGcgdGV4dC1zbGF0ZS01MDAgaG92ZXI6dGV4dC1ibHVlLTYwMCBkaXNhYmxlZDpvcGFjaXR5LTMwIiAke2luZGV4ID09PSAwID8gJ2Rpc2FibGVkJyA6ICcnfT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3ZnIGNsYXNzPSJ3LTQgaC00Ij48dXNlIGhyZWY9IiNpY29uLWFycm93LXVwIj48L3VzZT48L3N2Zz4KICAgICAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+CiAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gb25jbGljaz0ibW92ZUNhdGVnb3J5KCR7aW5kZXh9LCAxKSIgY2xhc3M9InAtMS41IGhvdmVyOmJnLXNsYXRlLTEwMCByb3VuZGVkLWxnIHRleHQtc2xhdGUtNTAwIGhvdmVyOnRleHQtYmx1ZS02MDAgZGlzYWJsZWQ6b3BhY2l0eS0zMCIgJHtpbmRleCA9PT0gbWFzdGVyQ2F0ZWdvcmllcy5sZW5ndGggLSAxID8gJ2Rpc2FibGVkJyA6ICcnfT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3ZnIGNsYXNzPSJ3LTQgaC00Ij48dXNlIGhyZWY9IiNpY29uLWFycm93LWRvd24iPjwvdXNlPjwvc3ZnPgogICAgICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIGA7CiAgICAgICAgICAgICAgICBsaXN0LmFwcGVuZENoaWxkKGRpdik7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICAKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21vZGFsLWNhdGVnb3JpZXMnKS5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGNsb3NlQ2F0ZWdvcnlNYW5hZ2VyKCkgewogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbW9kYWwtY2F0ZWdvcmllcycpLmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpOwogICAgICAgICAgICByZW5kZXJDYXRlZ29yeU9wdGlvbnMoKTsKICAgICAgICAgICAgcmVuZGVyRWRpdG9yTGlzdCgpOwogICAgICAgICAgICB1cGRhdGVQcmV2aWV3KCk7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBnZXRWaXNpYmxlQ2F0ZWdvcmllcygpIHsKICAgICAgICAgICAgY29uc3QgZ3JvdXBlZCA9IHt9OwogICAgICAgICAgICBjdXJyZW50SXRlbXMuZm9yRWFjaChpdGVtID0+IHsKICAgICAgICAgICAgICAgIGlmKCFncm91cGVkW2l0ZW0uY2F0ZWdvcnldKSBncm91cGVkW2l0ZW0uY2F0ZWdvcnldID0gW107CiAgICAgICAgICAgICAgICBncm91cGVkW2l0ZW0uY2F0ZWdvcnldLnB1c2goaXRlbSk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICByZXR1cm4gbWFzdGVyQ2F0ZWdvcmllcy5maWx0ZXIoY2F0ID0+IGdyb3VwZWRbY2F0XSAmJiBncm91cGVkW2NhdF0ubGVuZ3RoID4gMCk7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBtb3ZlVmlzaWJsZUNhdGVnb3J5KGNhdE5hbWUsIGRpcmVjdGlvbikgewogICAgICAgICAgICAgY29uc3QgdmlzaWJsZUNhdHMgPSBnZXRWaXNpYmxlQ2F0ZWdvcmllcygpOwogICAgICAgICAgICAgY29uc3QgY3VycmVudEluZGV4SW5WaXNpYmxlID0gdmlzaWJsZUNhdHMuaW5kZXhPZihjYXROYW1lKTsKICAgICAgICAgICAgIGlmIChjdXJyZW50SW5kZXhJblZpc2libGUgPT09IC0xKSByZXR1cm47IAogICAgICAgICAgICAgY29uc3QgdGFyZ2V0SW5kZXhJblZpc2libGUgPSBjdXJyZW50SW5kZXhJblZpc2libGUgKyBkaXJlY3Rpb247CiAgICAgICAgICAgICBpZiAodGFyZ2V0SW5kZXhJblZpc2libGUgPCAwIHx8IHRhcmdldEluZGV4SW5WaXNpYmxlID49IHZpc2libGVDYXRzLmxlbmd0aCkgcmV0dXJuOwogICAgICAgICAgICAgY29uc3QgdGFyZ2V0Q2F0TmFtZSA9IHZpc2libGVDYXRzW3RhcmdldEluZGV4SW5WaXNpYmxlXTsKICAgICAgICAgICAgIAogICAgICAgICAgICAgY29uc3QgaW5kZXgxID0gbWFzdGVyQ2F0ZWdvcmllcy5pbmRleE9mKGNhdE5hbWUpOwogICAgICAgICAgICAgY29uc3QgaW5kZXgyID0gbWFzdGVyQ2F0ZWdvcmllcy5pbmRleE9mKHRhcmdldENhdE5hbWUpOwogICAgICAgICAgICAgCiAgICAgICAgICAgICBpZihpbmRleDEgPT09IC0xIHx8IGluZGV4MiA9PT0gLTEpIHJldHVybjsKICAgICAgICAgICAgIAogICAgICAgICAgICAgY29uc3QgdGVtcCA9IG1hc3RlckNhdGVnb3JpZXNbaW5kZXgxXTsKICAgICAgICAgICAgIG1hc3RlckNhdGVnb3JpZXNbaW5kZXgxXSA9IG1hc3RlckNhdGVnb3JpZXNbaW5kZXgyXTsKICAgICAgICAgICAgIG1hc3RlckNhdGVnb3JpZXNbaW5kZXgyXSA9IHRlbXA7CiAgICAgICAgICAgICAKICAgICAgICAgICAgIHNhdmVDYXRlZ29yaWVzKCk7CiAgICAgICAgICAgICByZW5kZXJFZGl0b3JMaXN0KCk7CiAgICAgICAgICAgICB1cGRhdGVQcmV2aWV3KCk7CiAgICAgICAgICAgICByZW5kZXJDYXRlZ29yeU9wdGlvbnMoKTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIG1vdmVDYXRlZ29yeShpbmRleCwgZGlyZWN0aW9uLCByZWxvYWRVSSA9ICdtb2RhbCcpIHsKICAgICAgICAgICAgY29uc3QgbmV3SW5kZXggPSBpbmRleCArIGRpcmVjdGlvbjsKICAgICAgICAgICAgaWYgKG5ld0luZGV4IDwgMCB8fCBuZXdJbmRleCA+PSBtYXN0ZXJDYXRlZ29yaWVzLmxlbmd0aCkgcmV0dXJuOwogICAgICAgICAgICBbbWFzdGVyQ2F0ZWdvcmllc1tpbmRleF0sIG1hc3RlckNhdGVnb3JpZXNbbmV3SW5kZXhdXSA9IFttYXN0ZXJDYXRlZ29yaWVzW25ld0luZGV4XSwgbWFzdGVyQ2F0ZWdvcmllc1tpbmRleF1dOwogICAgICAgICAgICBzYXZlQ2F0ZWdvcmllcygpOwogICAgICAgICAgICBpZihyZWxvYWRVSSA9PT0gJ21vZGFsJykgeyBvcGVuQ2F0ZWdvcnlNYW5hZ2VyKCk7IH0gCiAgICAgICAgICAgIGVsc2UgeyByZW5kZXJFZGl0b3JMaXN0KCk7IHVwZGF0ZVByZXZpZXcoKTsgcmVuZGVyQ2F0ZWdvcnlPcHRpb25zKCk7IH0KICAgICAgICB9CgoKICAgICAgICAvLyAtLS0gQlVMTEVUSU4gTE9HSUMgLS0tCiAgICAgICAgZnVuY3Rpb24gY3JlYXRlTmV3QnVsbGV0aW4oKSB7CiAgICAgICAgICAgIHRyeSB7IGNhbmNlbEVkaXQoKTsgfSBjYXRjaChlKSB7fQogICAgICAgICAgICBjdXJyZW50QnVsbGV0aW5JZCA9IERhdGUubm93KCk7CiAgICAgICAgICAgIGN1cnJlbnRJdGVtcyA9IFtdOwogICAgICAgICAgICAvLyBBdXRvIGluY3JlbWVudCBsb2dpYyBiYXNlZCBvbiBtYXggbnVtYmVyIGZvdW5kCiAgICAgICAgICAgIGxldCBtYXhOdW0gPSAwOwogICAgICAgICAgICBidWxsZXRpbnMuZm9yRWFjaChiID0+IHsKICAgICAgICAgICAgICAgICBjb25zdCBuID0gcGFyc2VJbnQoYi5udW1iZXIpOwogICAgICAgICAgICAgICAgIGlmKCFpc05hTihuKSAmJiBuID4gbWF4TnVtKSBtYXhOdW0gPSBuOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2JpLW51bWJlcicpLnZhbHVlID0gbWF4TnVtICsgMTsKICAgICAgICAgICAgCiAgICAgICAgICAgIGNvbnN0IGN1cnIgPSBuZXcgRGF0ZSgpOwogICAgICAgICAgICBjb25zdCBmaXJzdCA9IGN1cnIuZ2V0RGF0ZSgpIC0gY3Vyci5nZXREYXkoKSArIDE7IAogICAgICAgICAgICBjb25zdCBsYXN0ID0gZmlyc3QgKyA0OyAKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2JpLWRhdGUtc3RhcnQnKS52YWx1ZSA9IG5ldyBEYXRlKGN1cnIuc2V0RGF0ZShmaXJzdCkpLnRvSVNPU3RyaW5nKCkuc2xpY2UoMCwxMCk7CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdiaS1kYXRlLWVuZCcpLnZhbHVlID0gbmV3IERhdGUoY3Vyci5zZXREYXRlKGxhc3QpKS50b0lTT1N0cmluZygpLnNsaWNlKDAsMTApOwogICAgICAgICAgICAKICAgICAgICAgICAgLy8gVVNFIEVTVEFCTElTSE1FTlQgREVGQVVMVFMKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2JpLXB1Yi1kYXRlJykudmFsdWVBc0RhdGUgPSBuZXcgRGF0ZSgpOwogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYmktc2lnbmF0b3J5JykudmFsdWUgPSBlc3RhYmxpc2htZW50LmRlZmF1bHRTaWduYXRvcnkgfHwgIkwnw6lxdWlwZSBkZSBkaXJlY3Rpb24iOyAKICAgICAgICAgICAgCiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdiaS10aGVtZScpLnZhbHVlID0gJ2JsdWUnOwoKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VkaXRvci10aXRsZScpLmlubmVySFRNTCA9IGA8c3BhbiBjbGFzcz0idGV4dC0yeGwiPuKcqDwvc3Bhbj4gTm91dmVhdSBCdWxsZXRpbmA7CiAgICAgICAgICAgIHJlbmRlckVkaXRvckxpc3QoKTsKICAgICAgICAgICAgdXBkYXRlUHJldmlldygpOwogICAgICAgICAgICBzYXZlQ3VycmVudEJ1bGxldGluKCk7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBsb2FkQnVsbGV0aW4oaWQpIHsKICAgICAgICAgICAgY2FuY2VsRWRpdCgpOwogICAgICAgICAgICBjb25zdCBiID0gYnVsbGV0aW5zLmZpbmQoeCA9PiB4LmlkID09PSBpZCk7CiAgICAgICAgICAgIGlmKCFiKSByZXR1cm47CiAgICAgICAgICAgIGN1cnJlbnRCdWxsZXRpbklkID0gYi5pZDsKICAgICAgICAgICAgY3VycmVudEl0ZW1zID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShiLml0ZW1zKSk7IAogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYmktbnVtYmVyJykudmFsdWUgPSBiLm51bWJlcjsKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2JpLWRhdGUtc3RhcnQnKS52YWx1ZSA9IGIuZGF0ZVN0YXJ0OwogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYmktZGF0ZS1lbmQnKS52YWx1ZSA9IGIuZGF0ZUVuZDsKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2JpLXB1Yi1kYXRlJykudmFsdWUgPSBiLnB1YkRhdGUgfHwgbmV3IERhdGUoKS50b0lTT1N0cmluZygpLnNsaWNlKDAsMTApOwogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYmktc2lnbmF0b3J5JykudmFsdWUgPSBiLnNpZ25hdG9yeSB8fCAiTCfDqXF1aXBlIGRlIGRpcmVjdGlvbiI7CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdiaS10aGVtZScpLnZhbHVlID0gYi50aGVtZSB8fCAnYmx1ZSc7CgogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZWRpdG9yLXRpdGxlJykuaW5uZXJIVE1MID0gYDxzcGFuIGNsYXNzPSJ0ZXh0LTJ4bCI+4pyN77iPPC9zcGFuPiDDiWRpdGlvbiBCdWxsZXRpbiBOwrAke2IubnVtYmVyfWA7CiAgICAgICAgICAgIHJlbmRlckVkaXRvckxpc3QoKTsKICAgICAgICAgICAgdXBkYXRlUHJldmlldygpOwogICAgICAgIH0KICAgICAgICAKICAgICAgICAvLyBWMzogRFVQTElDQVRJT04gRlVOQ1RJT04KICAgICAgICBmdW5jdGlvbiBkdXBsaWNhdGVCdWxsZXRpbihlLCBpZCkgewogICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpOwogICAgICAgICAgICBjb25zdCBzb3VyY2UgPSBidWxsZXRpbnMuZmluZChiID0+IGIuaWQgPT09IGlkKTsKICAgICAgICAgICAgaWYoIXNvdXJjZSkgcmV0dXJuOwoKICAgICAgICAgICAgaWYoY29uZmlybShgQ29waWVyIGxlIGJ1bGxldGluIE7CsCR7c291cmNlLm51bWJlcn0gP2ApKSB7CiAgICAgICAgICAgICAgICAvLyAxLiBDYWxjdWxhdGUgbmV3IG51bWJlcgogICAgICAgICAgICAgICAgbGV0IG1heE51bSA9IDA7CiAgICAgICAgICAgICAgICBidWxsZXRpbnMuZm9yRWFjaChiID0+IHsKICAgICAgICAgICAgICAgICAgICBjb25zdCBuID0gcGFyc2VJbnQoYi5udW1iZXIpOwogICAgICAgICAgICAgICAgICAgIGlmKCFpc05hTihuKSAmJiBuID4gbWF4TnVtKSBtYXhOdW0gPSBuOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBjb25zdCBuZXdOdW0gPSBtYXhOdW0gKyAxOwogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAvLyAyLiBDbG9uZQogICAgICAgICAgICAgICAgY29uc3QgbmV3SXRlbSA9IHsKICAgICAgICAgICAgICAgICAgICAuLi5KU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHNvdXJjZSkpLAogICAgICAgICAgICAgICAgICAgIGlkOiBEYXRlLm5vdygpLAogICAgICAgICAgICAgICAgICAgIG51bWJlcjogbmV3TnVtLAogICAgICAgICAgICAgICAgICAgIGxhc3RNb2RpZmllZDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAvLyAzLiBTYXZlICYgTG9hZAogICAgICAgICAgICAgICAgYnVsbGV0aW5zLnB1c2gobmV3SXRlbSk7CiAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnYmliYXNlX2J1bGxldGlucycsIEpTT04uc3RyaW5naWZ5KGJ1bGxldGlucykpOwogICAgICAgICAgICAgICAgbG9hZEJ1bGxldGluKG5ld0l0ZW0uaWQpOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBmb3JtYXREYXRlRm9yRGlzcGxheShkYXRlU3RyKSB7CiAgICAgICAgICAgIGlmICghZGF0ZVN0cikgcmV0dXJuICcnOwogICAgICAgICAgICBpZiAoIS9eXGR7NH0tXGR7Mn0tXGR7Mn0kLy50ZXN0KGRhdGVTdHIpKSByZXR1cm4gZGF0ZVN0cjsKICAgICAgICAgICAgY29uc3QgW3ksIG0sIGRdID0gZGF0ZVN0ci5zcGxpdCgnLScpLm1hcChOdW1iZXIpOwogICAgICAgICAgICBjb25zdCBkYXRlID0gbmV3IERhdGUoeSwgbSAtIDEsIGQpOwogICAgICAgICAgICByZXR1cm4gZGF0ZS50b0xvY2FsZURhdGVTdHJpbmcoJ2ZyLUZSJywgeyB3ZWVrZGF5OiAnbG9uZycsIGRheTogJ251bWVyaWMnLCBtb250aDogJ2xvbmcnIH0pOwogICAgICAgIH0KCiAgICAgICAgLy8gLS0tIElURU1TIExPR0lDIC0tLQogICAgICAgIGZ1bmN0aW9uIG1vdmVJdGVtVXAoaWQpIHsKICAgICAgICAgICAgY29uc3QgaW5kZXggPSBjdXJyZW50SXRlbXMuZmluZEluZGV4KGkgPT4gaS5pZCA9PT0gaWQpOwogICAgICAgICAgICBpZiAoaW5kZXggPT09IC0xKSByZXR1cm47CiAgICAgICAgICAgIGNvbnN0IGNhdCA9IGN1cnJlbnRJdGVtc1tpbmRleF0uY2F0ZWdvcnk7CiAgICAgICAgICAgIGxldCBwcmV2SW5kZXggPSAtMTsKICAgICAgICAgICAgZm9yIChsZXQgaSA9IGluZGV4IC0gMTsgaSA+PSAwOyBpLS0pIHsgaWYgKGN1cnJlbnRJdGVtc1tpXS5jYXRlZ29yeSA9PT0gY2F0KSB7IHByZXZJbmRleCA9IGk7IGJyZWFrOyB9IH0KCiAgICAgICAgICAgIGlmIChwcmV2SW5kZXggIT09IC0xKSB7CiAgICAgICAgICAgICAgICBbY3VycmVudEl0ZW1zW3ByZXZJbmRleF0sIGN1cnJlbnRJdGVtc1tpbmRleF1dID0gW2N1cnJlbnRJdGVtc1tpbmRleF0sIGN1cnJlbnRJdGVtc1twcmV2SW5kZXhdXTsKICAgICAgICAgICAgICAgIHJlbmRlckVkaXRvckxpc3QoKTsKICAgICAgICAgICAgICAgIHVwZGF0ZVByZXZpZXcoKTsKICAgICAgICAgICAgICAgIHNhdmVDdXJyZW50QnVsbGV0aW4odHJ1ZSk7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIG1vdmVJdGVtRG93bihpZCkgewogICAgICAgICAgICBjb25zdCBpbmRleCA9IGN1cnJlbnRJdGVtcy5maW5kSW5kZXgoaSA9PiBpLmlkID09PSBpZCk7CiAgICAgICAgICAgIGlmIChpbmRleCA9PT0gLTEpIHJldHVybjsKICAgICAgICAgICAgY29uc3QgY2F0ID0gY3VycmVudEl0ZW1zW2luZGV4XS5jYXRlZ29yeTsKICAgICAgICAgICAgbGV0IG5leHRJbmRleCA9IC0xOwogICAgICAgICAgICBmb3IgKGxldCBpID0gaW5kZXggKyAxOyBpIDwgY3VycmVudEl0ZW1zLmxlbmd0aDsgaSsrKSB7IGlmIChjdXJyZW50SXRlbXNbaV0uY2F0ZWdvcnkgPT09IGNhdCkgeyBuZXh0SW5kZXggPSBpOyBicmVhazsgfSB9CgogICAgICAgICAgICBpZiAobmV4dEluZGV4ICE9PSAtMSkgewogICAgICAgICAgICAgICAgW2N1cnJlbnRJdGVtc1tuZXh0SW5kZXhdLCBjdXJyZW50SXRlbXNbaW5kZXhdXSA9IFtjdXJyZW50SXRlbXNbaW5kZXhdLCBjdXJyZW50SXRlbXNbbmV4dEluZGV4XV07CiAgICAgICAgICAgICAgICByZW5kZXJFZGl0b3JMaXN0KCk7CiAgICAgICAgICAgICAgICB1cGRhdGVQcmV2aWV3KCk7CiAgICAgICAgICAgICAgICBzYXZlQ3VycmVudEJ1bGxldGluKHRydWUpOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiB0b2dnbGVEYXRlSW5wdXQoKSB7CiAgICAgICAgICAgIGNvbnN0IHR5cGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdpbnB1dFtuYW1lPSJkYXRlLXR5cGUiXTpjaGVja2VkJykudmFsdWU7CiAgICAgICAgICAgIGNvbnN0IGZpeGVkSW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaXRlbS1kYXRlLWZpeGVkJyk7CiAgICAgICAgICAgIGNvbnN0IHZhcmlhYmxlSW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaXRlbS1kYXRlLXZhcmlhYmxlJyk7CiAgICAgICAgICAgIAogICAgICAgICAgICBpZih0eXBlID09PSAnZml4ZWQnKSB7IGZpeGVkSW5wdXQuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7IHZhcmlhYmxlSW5wdXQuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7IH0gCiAgICAgICAgICAgIGVsc2UgeyBmaXhlZElucHV0LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpOyB2YXJpYWJsZUlucHV0LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpOyB9CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBzdGFydEVkaXRJdGVtKGlkKSB7CiAgICAgICAgICAgIGNvbnN0IGl0ZW0gPSBjdXJyZW50SXRlbXMuZmluZChpID0+IGkuaWQgPT09IGlkKTsKICAgICAgICAgICAgaWYoIWl0ZW0pIHJldHVybjsKCiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpdGVtLWNhdGVnb3J5JykudmFsdWUgPSBpdGVtLmNhdGVnb3J5OwogICAgICAgICAgICBjb25zdCBpc0RhdGUgPSAvXlxkezR9LVxkezJ9LVxkezJ9JC8udGVzdChpdGVtLmRhdGUpOwogICAgICAgICAgICBpZihpc0RhdGUgfHwgaXRlbS5kYXRlID09PSAnJykgewogICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignaW5wdXRbbmFtZT0iZGF0ZS10eXBlIl1bdmFsdWU9ImZpeGVkIl0nKS5jaGVja2VkID0gdHJ1ZTsKICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpdGVtLWRhdGUtZml4ZWQnKS52YWx1ZSA9IGl0ZW0uZGF0ZTsKICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpdGVtLWRhdGUtdmFyaWFibGUnKS52YWx1ZSA9ICcnOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignaW5wdXRbbmFtZT0iZGF0ZS10eXBlIl1bdmFsdWU9InZhcmlhYmxlIl0nKS5jaGVja2VkID0gdHJ1ZTsKICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpdGVtLWRhdGUtZml4ZWQnKS52YWx1ZSA9ICcnOwogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2l0ZW0tZGF0ZS12YXJpYWJsZScpLnZhbHVlID0gaXRlbS5kYXRlOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHRvZ2dsZURhdGVJbnB1dCgpOwoKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2l0ZW0tdGl0bGUnKS52YWx1ZSA9IGl0ZW0udGl0bGU7CiAgICAgICAgICAgIHF1aWxsLnJvb3QuaW5uZXJIVE1MID0gaXRlbS5jb250ZW50OwogICAgICAgICAgICBlZGl0aW5nSXRlbUlkID0gaWQ7CgogICAgICAgICAgICBjb25zdCBidG5NYWluID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2J0bi1hZGQtdXBkYXRlJyk7CiAgICAgICAgICAgIGNvbnN0IGJ0bkNhbmNlbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdidG4tY2FuY2VsLWVkaXQnKTsKICAgICAgICAgICAgY29uc3QgZm9ybVRpdGxlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Zvcm0tdGl0bGUnKTsKICAgICAgICAgICAgCiAgICAgICAgICAgIGZvcm1UaXRsZS5pbm5lclRleHQgPSAiTW9kaWZpZXIgbCdpbmZvIjsKICAgICAgICAgICAgYnRuTWFpbi5pbm5lclRleHQgPSAiVmFsaWRlciBsZXMgbW9kaWZpY2F0aW9ucyDinIUiOwogICAgICAgICAgICBidG5NYWluLmNsYXNzTGlzdC5yZW1vdmUoJ2JnLW9yYW5nZS01MDAnLCAnaG92ZXI6Ymctb3JhbmdlLTYwMCcpOwogICAgICAgICAgICBidG5NYWluLmNsYXNzTGlzdC5hZGQoJ2JnLWJsdWUtNjAwJywgJ2hvdmVyOmJnLWJsdWUtNzAwJyk7CiAgICAgICAgICAgIGJ0bkNhbmNlbC5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTsKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Zvcm0tY29udGFpbmVyJykuc2Nyb2xsSW50b1ZpZXcoe2JlaGF2aW9yOiAnc21vb3RoJ30pOwogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZm9ybS1jb250YWluZXInKS5jbGFzc0xpc3QuYWRkKCdyaW5nLTInLCAncmluZy1ibHVlLTQwMCcpOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gY2FuY2VsRWRpdCgpIHsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignaW5wdXRbbmFtZT0iZGF0ZS10eXBlIl1bdmFsdWU9ImZpeGVkIl0nKS5jaGVja2VkID0gdHJ1ZTsKICAgICAgICAgICAgdG9nZ2xlRGF0ZUlucHV0KCk7CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpdGVtLWRhdGUtZml4ZWQnKS52YWx1ZSA9ICcnOyAKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2l0ZW0tZGF0ZS12YXJpYWJsZScpLnZhbHVlID0gJyc7IAoKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2l0ZW0tdGl0bGUnKS52YWx1ZSA9ICcnOwogICAgICAgICAgICBxdWlsbC5zZXRDb250ZW50cyhbXSk7CiAgICAgICAgICAgIGVkaXRpbmdJdGVtSWQgPSBudWxsOwoKICAgICAgICAgICAgY29uc3QgYnRuTWFpbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdidG4tYWRkLXVwZGF0ZScpOwogICAgICAgICAgICBjb25zdCBidG5DYW5jZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnRuLWNhbmNlbC1lZGl0Jyk7CiAgICAgICAgICAgIGNvbnN0IGZvcm1UaXRsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmb3JtLXRpdGxlJyk7CiAgICAgICAgICAgIGZvcm1UaXRsZS5pbm5lclRleHQgPSAiU2Fpc2lyIHVuZSBpbmZvIjsKICAgICAgICAgICAgYnRuTWFpbi5pbm5lclRleHQgPSAiQWpvdXRlciBsJ2luZm8g8J+agCI7CiAgICAgICAgICAgIGJ0bk1haW4uY2xhc3NMaXN0LmFkZCgnYmctb3JhbmdlLTUwMCcsICdob3ZlcjpiZy1vcmFuZ2UtNjAwJyk7CiAgICAgICAgICAgIGJ0bk1haW4uY2xhc3NMaXN0LnJlbW92ZSgnYmctYmx1ZS02MDAnLCAnaG92ZXI6YmctYmx1ZS03MDAnKTsKICAgICAgICAgICAgYnRuQ2FuY2VsLmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpOwogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZm9ybS1jb250YWluZXInKS5jbGFzc0xpc3QucmVtb3ZlKCdyaW5nLTInLCAncmluZy1ibHVlLTQwMCcpOwogICAgICAgICAgICB9IGNhdGNoKGVycikgeyBjb25zb2xlLndhcm4oJ2NhbmNlbEVkaXQ6JywgZXJyKTsgfQogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gYWRkQnVsbGV0aW5JdGVtKCkgewogICAgICAgICAgICBjb25zdCBjYXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaXRlbS1jYXRlZ29yeScpLnZhbHVlOwogICAgICAgICAgICBjb25zdCBkYXRlVHlwZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2lucHV0W25hbWU9ImRhdGUtdHlwZSJdOmNoZWNrZWQnKS52YWx1ZTsKICAgICAgICAgICAgbGV0IGRhdGUgPSBkYXRlVHlwZSA9PT0gJ2ZpeGVkJyA/IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpdGVtLWRhdGUtZml4ZWQnKS52YWx1ZSA6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpdGVtLWRhdGUtdmFyaWFibGUnKS52YWx1ZTsKICAgICAgICAgICAgY29uc3QgdGl0bGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaXRlbS10aXRsZScpLnZhbHVlOwogICAgICAgICAgICBjb25zdCBjb250ZW50ID0gcXVpbGwucm9vdC5pbm5lckhUTUw7CiAgICAgICAgICAgIGNvbnN0IHRleHRDb250ZW50ID0gcXVpbGwuZ2V0VGV4dCgpLnRyaW0oKTsKCiAgICAgICAgICAgIGlmKHRleHRDb250ZW50Lmxlbmd0aCA9PT0gMCAmJiAhdGl0bGUpIHJldHVybjsKCiAgICAgICAgICAgIGlmIChlZGl0aW5nSXRlbUlkKSB7CiAgICAgICAgICAgICAgICBjb25zdCBpZHggPSBjdXJyZW50SXRlbXMuZmluZEluZGV4KGkgPT4gaS5pZCA9PT0gZWRpdGluZ0l0ZW1JZCk7CiAgICAgICAgICAgICAgICBpZihpZHggIT09IC0xKSB7IGN1cnJlbnRJdGVtc1tpZHhdID0geyAuLi5jdXJyZW50SXRlbXNbaWR4XSwgY2F0ZWdvcnk6IGNhdCwgZGF0ZTogZGF0ZSwgdGl0bGU6IHRpdGxlLCBjb250ZW50OiBjb250ZW50IH07IH0KICAgICAgICAgICAgICAgIGNhbmNlbEVkaXQoKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGN1cnJlbnRJdGVtcy5wdXNoKHsgaWQ6IERhdGUubm93KCksIGNhdGVnb3J5OiBjYXQsIGRhdGU6IGRhdGUsIHRpdGxlOiB0aXRsZSwgY29udGVudDogY29udGVudCB9KTsKICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpdGVtLXRpdGxlJykudmFsdWUgPSAnJzsKICAgICAgICAgICAgICAgIHF1aWxsLnNldENvbnRlbnRzKFtdKTsKICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpdGVtLWRhdGUtdmFyaWFibGUnKS52YWx1ZSA9ICcnOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJlbmRlckVkaXRvckxpc3QoKTsKICAgICAgICAgICAgdXBkYXRlUHJldmlldygpOwogICAgICAgICAgICBzYXZlQ3VycmVudEJ1bGxldGluKHRydWUpOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gcmVtb3ZlQnVsbGV0aW5JdGVtKGlkKSB7CiAgICAgICAgICAgIGlmKGlkID09PSBlZGl0aW5nSXRlbUlkKSBjYW5jZWxFZGl0KCk7CiAgICAgICAgICAgIGlmKGNvbmZpcm0oIvCfl5HvuI8gU3VwcHJpbWVyIGNldHRlIGluZm9ybWF0aW9uID8iKSkgewogICAgICAgICAgICAgICAgY3VycmVudEl0ZW1zID0gY3VycmVudEl0ZW1zLmZpbHRlcihpID0+IGkuaWQgIT09IGlkKTsKICAgICAgICAgICAgICAgIHJlbmRlckVkaXRvckxpc3QoKTsKICAgICAgICAgICAgICAgIHVwZGF0ZVByZXZpZXcoKTsKICAgICAgICAgICAgICAgIHNhdmVDdXJyZW50QnVsbGV0aW4odHJ1ZSk7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGRlbGV0ZUJ1bGxldGluKGUsIGlkKSB7CiAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgICAgICAgIGlmKGNvbmZpcm0oIuKaoO+4jyBBdHRlbnRpb24gOiBWb3VsZXotdm91cyB2cmFpbWVudCBzdXBwcmltZXIgZMOpZmluaXRpdmVtZW50IGNlIGJ1bGxldGluID8iKSkgewogICAgICAgICAgICAgICAgYnVsbGV0aW5zID0gYnVsbGV0aW5zLmZpbHRlcihiID0+IGIuaWQgIT09IGlkKTsKICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdiaWJhc2VfYnVsbGV0aW5zJywgSlNPTi5zdHJpbmdpZnkoYnVsbGV0aW5zKSk7CiAgICAgICAgICAgICAgICBpZihjdXJyZW50QnVsbGV0aW5JZCA9PT0gaWQpIHsgYnVsbGV0aW5zLmxlbmd0aCA+IDAgPyBsb2FkQnVsbGV0aW4oYnVsbGV0aW5zWzBdLmlkKSA6IGNyZWF0ZU5ld0J1bGxldGluKCk7IH0gZWxzZSB7IHJlbmRlckJ1bGxldGluTGlzdCgpOyB9CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIHJlbmRlckVkaXRvckxpc3QoKSB7CiAgICAgICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlZGl0b3ItaXRlbXMtbGlzdCcpOwogICAgICAgICAgICBjb250YWluZXIuaW5uZXJIVE1MID0gJyc7CiAgICAgICAgICAgIGNvbnN0IGdyb3VwZWQgPSB7fTsKICAgICAgICAgICAgY3VycmVudEl0ZW1zLmZvckVhY2goaXRlbSA9PiB7IGlmKCFncm91cGVkW2l0ZW0uY2F0ZWdvcnldKSBncm91cGVkW2l0ZW0uY2F0ZWdvcnldID0gW107IGdyb3VwZWRbaXRlbS5jYXRlZ29yeV0ucHVzaChpdGVtKTsgfSk7CiAgICAgICAgICAgIGNvbnN0IHZpc2libGVDYXRzID0gZ2V0VmlzaWJsZUNhdGVnb3JpZXMoKTsKCiAgICAgICAgICAgIG1hc3RlckNhdGVnb3JpZXMuZm9yRWFjaCgoY2F0LCBpbmRleCkgPT4gewogICAgICAgICAgICAgICAgaWYoZ3JvdXBlZFtjYXRdICYmIGdyb3VwZWRbY2F0XS5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgaGVhZGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgICAgICAgICAgICAgICAgaGVhZGVyLmNsYXNzTmFtZSA9ICJmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWJldHdlZW4gbXQtNiBtYi0yIGdyb3VwL2hlYWRlciI7IAogICAgICAgICAgICAgICAgICAgIGNvbnN0IGlzRmlyc3QgPSB2aXNpYmxlQ2F0c1swXSA9PT0gY2F0OwogICAgICAgICAgICAgICAgICAgIGNvbnN0IGlzTGFzdCA9IHZpc2libGVDYXRzW3Zpc2libGVDYXRzLmxlbmd0aCAtIDFdID09PSBjYXQ7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgY2F0U2FmZSA9IGNhdC5yZXBsYWNlKC8nL2csICJcXCciKTsKCiAgICAgICAgICAgICAgICAgICAgaGVhZGVyLmlubmVySFRNTCA9IGAKICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0idGV4dC14cyBmb250LWJvbGQgdGV4dC1zbGF0ZS00MDAgdXBwZXJjYXNlIHRyYWNraW5nLXdpZGVzdCBmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMiI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAke2NhdH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJiZy1zbGF0ZS0xMDAgdGV4dC1zbGF0ZS00MDAgdGV4dC1bMTBweF0gcHgtMS41IHB5LTAuNSByb3VuZGVkLWZ1bGwiPiR7Z3JvdXBlZFtjYXRdLmxlbmd0aH08L3NwYW4+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMSBvcGFjaXR5LTAgZ3JvdXAtaG92ZXIvaGVhZGVyOm9wYWNpdHktMTAwIHRyYW5zaXRpb24tb3BhY2l0eSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIG9uY2xpY2s9Im1vdmVWaXNpYmxlQ2F0ZWdvcnkoJyR7Y2F0U2FmZX0nLCAtMSkiIGNsYXNzPSJwLTEgaG92ZXI6Ymctc2xhdGUtMTAwIHRleHQtc2xhdGUtNDAwIGhvdmVyOnRleHQtYmx1ZS02MDAgcm91bmRlZCBkaXNhYmxlZDpvcGFjaXR5LTMwIiAke2lzRmlyc3QgPyAnZGlzYWJsZWQnIDogJyd9IHRpdGxlPSJNb250ZXIgbGEgY2F0w6lnb3JpZSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHN2ZyBjbGFzcz0idy00IGgtNCI+PHVzZSBocmVmPSIjaWNvbi1hcnJvdy11cCI+PC91c2U+PC9zdmc+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gb25jbGljaz0ibW92ZVZpc2libGVDYXRlZ29yeSgnJHtjYXRTYWZlfScsIDEpIiBjbGFzcz0icC0xIGhvdmVyOmJnLXNsYXRlLTEwMCB0ZXh0LXNsYXRlLTQwMCBob3Zlcjp0ZXh0LWJsdWUtNjAwIHJvdW5kZWQgZGlzYWJsZWQ6b3BhY2l0eS0zMCIgJHtpc0xhc3QgPyAnZGlzYWJsZWQnIDogJyd9IHRpdGxlPSJEZXNjZW5kcmUgbGEgY2F0w6lnb3JpZSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHN2ZyBjbGFzcz0idy00IGgtNCI+PHVzZSBocmVmPSIjaWNvbi1hcnJvdy1kb3duIj48L3VzZT48L3N2Zz4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICBgOwogICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChoZWFkZXIpOwoKICAgICAgICAgICAgICAgICAgICBncm91cGVkW2NhdF0uZm9yRWFjaChpdGVtID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgICAgICAgICAgICAgICAgICAgIGRpdi5jbGFzc05hbWUgPSAiYmctd2hpdGUgcC00IHJvdW5kZWQteGwgYm9yZGVyIGJvcmRlci1zbGF0ZS0xMDAgc2hhZG93LXNtIGZsZXgganVzdGlmeS1iZXR3ZWVuIGl0ZW1zLXN0YXJ0IGdyb3VwIG1iLTMgdHJhbnNpdGlvbi1hbGwgaG92ZXI6Ym9yZGVyLWJsdWUtMjAwIGhvdmVyOnNoYWRvdy1tZCI7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGl0ZW0uaWQgPT09IGVkaXRpbmdJdGVtSWQpIHsgZGl2LmNsYXNzTmFtZSA9ICJiZy1ibHVlLTUwIHAtNCByb3VuZGVkLXhsIGJvcmRlci0yIGJvcmRlci1ibHVlLTQwMCBzaGFkb3ctbWQgZmxleCBqdXN0aWZ5LWJldHdlZW4gaXRlbXMtc3RhcnQgbWItMyI7IH0KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZGlzcGxheURhdGUgPSBmb3JtYXREYXRlRm9yRGlzcGxheShpdGVtLmRhdGUpOwogICAgICAgICAgICAgICAgICAgICAgICBkaXYuaW5uZXJIVE1MID0gYAogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZmxleC0xIHByLTQiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvbnQtYm9sZCB0ZXh0LXNsYXRlLTgwMCBmbGV4IGZsZXgtd3JhcCBpdGVtcy1jZW50ZXIgZ2FwLTIiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAke2Rpc3BsYXlEYXRlID8gYDxzcGFuIGNsYXNzPSJiZy15ZWxsb3ctMTAwIHRleHQteWVsbG93LTgwMCBweC0yIHB5LTAuNSByb3VuZGVkLWxnIHRleHQteHMgZm9udC1ib2xkIGNhcGl0YWxpemUiPiR7ZGlzcGxheURhdGV9PC9zcGFuPmAgOiAnJ30KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHtpdGVtLnRpdGxlIHx8ICc8c3BhbiBjbGFzcz0iaXRhbGljIHRleHQtc2xhdGUtNDAwIj5TYW5zIHRpdHJlPC9zcGFuPid9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0idGV4dC1zbSB0ZXh0LXNsYXRlLTYwMCBtdC0yIGxlYWRpbmctcmVsYXhlZCByaWNoLXRleHQtY29udGVudCI+JHtpdGVtLmNvbnRlbnR9PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZsZXggaXRlbXMtY2VudGVyIGdhcC0xIG9wYWNpdHktMCBncm91cC1ob3ZlcjpvcGFjaXR5LTEwMCB0cmFuc2l0aW9uLW9wYWNpdHkgZmxleC1zaHJpbmstMCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBvbmNsaWNrPSJtb3ZlSXRlbVVwKCR7aXRlbS5pZH0pIiBjbGFzcz0icC0yIHRleHQtc2xhdGUtNDAwIGhvdmVyOnRleHQtaW5kaWdvLTYwMCBob3ZlcjpiZy1pbmRpZ28tNTAgcm91bmRlZC1sZyB0cmFuc2l0aW9uLWNvbG9ycyIgdGl0bGU9Ik1vbnRlciI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzdmcgY2xhc3M9InctNCBoLTQiPjx1c2UgaHJlZj0iI2ljb24tYXJyb3ctdXAiPjwvdXNlPjwvc3ZnPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gb25jbGljaz0ibW92ZUl0ZW1Eb3duKCR7aXRlbS5pZH0pIiBjbGFzcz0icC0yIHRleHQtc2xhdGUtNDAwIGhvdmVyOnRleHQtaW5kaWdvLTYwMCBob3ZlcjpiZy1pbmRpZ28tNTAgcm91bmRlZC1sZyB0cmFuc2l0aW9uLWNvbG9ycyIgdGl0bGU9IkRlc2NlbmRyZSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzdmcgY2xhc3M9InctNCBoLTQiPjx1c2UgaHJlZj0iI2ljb24tYXJyb3ctZG93biI+PC91c2U+PC9zdmc+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0idy1weCBoLTQgYmctc2xhdGUtMjAwIG14LTEiPjwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gb25jbGljaz0ic3RhcnRFZGl0SXRlbSgke2l0ZW0uaWR9KSIgY2xhc3M9InAtMiB0ZXh0LXNsYXRlLTQwMCBob3Zlcjp0ZXh0LWJsdWUtNjAwIGhvdmVyOmJnLWJsdWUtNTAgcm91bmRlZC1sZyB0cmFuc2l0aW9uLWNvbG9ycyIgdGl0bGU9Ik1vZGlmaWVyIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHN2ZyBjbGFzcz0idy00IGgtNCI+PHVzZSBocmVmPSIjaWNvbi1lZGl0Ij48L3VzZT48L3N2Zz4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIG9uY2xpY2s9InJlbW92ZUJ1bGxldGluSXRlbSgke2l0ZW0uaWR9KSIgY2xhc3M9InAtMiB0ZXh0LXNsYXRlLTQwMCBob3Zlcjp0ZXh0LXJlZC01MDAgaG92ZXI6YmctcmVkLTUwIHJvdW5kZWQtbGcgdHJhbnNpdGlvbi1jb2xvcnMiIHRpdGxlPSJTdXBwcmltZXIiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3ZnIGNsYXNzPSJ3LTQgaC00Ij48dXNlIGhyZWY9IiNpY29uLXRyYXNoIj48L3VzZT48L3N2Zz4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICBgOwogICAgICAgICAgICAgICAgICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoZGl2KTsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiB0cmlnZ2VyQXV0b1NhdmUoKSB7CiAgICAgICAgICAgIHVwZGF0ZVByZXZpZXcoKTsgCiAgICAgICAgICAgIGlmKGF1dG9TYXZlVGltZXIpIGNsZWFyVGltZW91dChhdXRvU2F2ZVRpbWVyKTsKICAgICAgICAgICAgYXV0b1NhdmVUaW1lciA9IHNldFRpbWVvdXQoKCkgPT4geyBzYXZlQ3VycmVudEJ1bGxldGluKHRydWUpOyB9LCAxMDAwKTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIHNob3dTYXZlU3RhdHVzKCkgewogICAgICAgICAgICBjb25zdCBzdGF0dXNFbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhdXRvLXNhdmUtc3RhdHVzJyk7CiAgICAgICAgICAgIHN0YXR1c0VsLmNsYXNzTGlzdC5yZW1vdmUoJ3NhdmUtaW5kaWNhdG9yJyk7IAogICAgICAgICAgICB2b2lkIHN0YXR1c0VsLm9mZnNldFdpZHRoOyAKICAgICAgICAgICAgc3RhdHVzRWwuY2xhc3NMaXN0LmFkZCgnc2F2ZS1pbmRpY2F0b3InKTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIHNhdmVDdXJyZW50QnVsbGV0aW4oaXNBdXRvID0gZmFsc2UpIHsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgY29uc3QgbnVtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2JpLW51bWJlcicpLnZhbHVlOwogICAgICAgICAgICBjb25zdCBzdGFydCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdiaS1kYXRlLXN0YXJ0JykudmFsdWU7CiAgICAgICAgICAgIGNvbnN0IGVuZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdiaS1kYXRlLWVuZCcpLnZhbHVlOwogICAgICAgICAgICBjb25zdCBwdWJEYXRlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2JpLXB1Yi1kYXRlJykudmFsdWU7CiAgICAgICAgICAgIGNvbnN0IHNpZ25hdG9yeSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdiaS1zaWduYXRvcnknKS52YWx1ZTsKICAgICAgICAgICAgY29uc3QgdGhlbWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYmktdGhlbWUnKS52YWx1ZTsKCiAgICAgICAgICAgIGNvbnN0IGJ1bGxldGluID0gewogICAgICAgICAgICAgICAgaWQ6IGN1cnJlbnRCdWxsZXRpbklkLAogICAgICAgICAgICAgICAgbnVtYmVyOiBudW0sCiAgICAgICAgICAgICAgICBkYXRlU3RhcnQ6IHN0YXJ0LAogICAgICAgICAgICAgICAgZGF0ZUVuZDogZW5kLAogICAgICAgICAgICAgICAgcHViRGF0ZTogcHViRGF0ZSwKICAgICAgICAgICAgICAgIHNpZ25hdG9yeTogc2lnbmF0b3J5LAogICAgICAgICAgICAgICAgdGhlbWU6IHRoZW1lLAogICAgICAgICAgICAgICAgaXRlbXM6IGN1cnJlbnRJdGVtcywKICAgICAgICAgICAgICAgIGxhc3RNb2RpZmllZDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpCiAgICAgICAgICAgIH07CgogICAgICAgICAgICBjb25zdCBpZHggPSBidWxsZXRpbnMuZmluZEluZGV4KGIgPT4gYi5pZCA9PT0gY3VycmVudEJ1bGxldGluSWQpOwogICAgICAgICAgICBpZihpZHggPj0gMCkgeyBidWxsZXRpbnNbaWR4XSA9IGJ1bGxldGluOyB9IGVsc2UgeyBidWxsZXRpbnMucHVzaChidWxsZXRpbik7IH0KICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2JpYmFzZV9idWxsZXRpbnMnLCBKU09OLnN0cmluZ2lmeShidWxsZXRpbnMpKTsKICAgICAgICAgICAgcmVuZGVyQnVsbGV0aW5MaXN0KCk7IC8vIFJlLXJlbmRlciB0byB1cGRhdGUgdGhlIGxpc3QgdmlldwogICAgICAgICAgICBpZihpc0F1dG8pIHNob3dTYXZlU3RhdHVzKCk7CiAgICAgICAgICAgIH0gY2F0Y2goZXJyKSB7IGNvbnNvbGUuZXJyb3IoJ3NhdmVDdXJyZW50QnVsbGV0aW4gZXJyb3I6JywgZXJyKTsgfQogICAgICAgIH0KICAgICAgICAKICAgICAgICAvLyBWMzogVXBkYXRlZCBSZW5kZXIgTGlzdCB3aXRoIEZpbHRlcgogICAgICAgIGZ1bmN0aW9uIHJlbmRlckJ1bGxldGluTGlzdCgpIHsKICAgICAgICAgICAgY29uc3QgbGlzdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdidWxsZXRpbi1saXN0Jyk7CiAgICAgICAgICAgIGxpc3QuaW5uZXJIVE1MID0gJyc7CiAgICAgICAgICAgIAogICAgICAgICAgICAvLyBHZXQgU2VhcmNoIFF1ZXJ5CiAgICAgICAgICAgIGNvbnN0IHF1ZXJ5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NlYXJjaC1idWxsZXRpbicpPy52YWx1ZS50b0xvd2VyQ2FzZSgpIHx8ICIiOwoKICAgICAgICAgICAgY29uc3Qgc29ydGVkID0gYnVsbGV0aW5zLnNvcnQoKGEsYikgPT4gYi5pZCAtIGEuaWQpOwogICAgICAgICAgICBjb25zdCBmaWx0ZXJlZCA9IHNvcnRlZC5maWx0ZXIoYiA9PiB7CiAgICAgICAgICAgICAgICAgcmV0dXJuIGIubnVtYmVyLnRvU3RyaW5nKCkuaW5jbHVkZXMocXVlcnkpIHx8IGIuZGF0ZVN0YXJ0LmluY2x1ZGVzKHF1ZXJ5KTsKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBmaWx0ZXJlZC5mb3JFYWNoKGIgPT4gewogICAgICAgICAgICAgICAgY29uc3QgaXNBY3RpdmUgPSBiLmlkID09PSBjdXJyZW50QnVsbGV0aW5JZDsKICAgICAgICAgICAgICAgIGNvbnN0IGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgICAgICAgICAgICAgZGl2LmNsYXNzTmFtZSA9IGB3LWZ1bGwgdGV4dC1sZWZ0IHAtNCByb3VuZGVkLXhsIGJvcmRlciB0cmFuc2l0aW9uLWFsbCBncm91cCBmbGV4IGp1c3RpZnktYmV0d2VlbiBpdGVtcy1zdGFydCBjdXJzb3ItcG9pbnRlciBtYi0yICR7aXNBY3RpdmUgPyAnYmctYmx1ZS01MCBib3JkZXItYmx1ZS0yMDAgc2hhZG93LXNtJyA6ICdiZy13aGl0ZSBib3JkZXItdHJhbnNwYXJlbnQgaG92ZXI6Ym9yZGVyLXNsYXRlLTIwMCBob3ZlcjpiZy1zbGF0ZS01MCd9YDsKICAgICAgICAgICAgICAgIGRpdi5vbmNsaWNrID0gKCkgPT4gbG9hZEJ1bGxldGluKGIuaWQpOwogICAgICAgICAgICAgICAgY29uc3Qgc3RhcnREYXRlID0gcGFyc2VMb2NhbERhdGUoYi5kYXRlU3RhcnQpOwogICAgICAgICAgICAgICAgY29uc3QgZGF0ZURpc3BsYXkgPSBzdGFydERhdGUgPyBzdGFydERhdGUudG9Mb2NhbGVEYXRlU3RyaW5nKCdmci1GUicsIHtkYXk6J251bWVyaWMnLCBtb250aDonbnVtZXJpYyd9KSA6ICcuLi4nOwogICAgICAgICAgICAgICAgZGl2LmlubmVySFRNTCA9IGAKICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmbGV4LTEiPgogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmbGV4IGp1c3RpZnktYmV0d2VlbiBpdGVtcy1jZW50ZXIgbWItMSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz0iZm9udC1ib2xkICR7aXNBY3RpdmUgPyAndGV4dC1ibHVlLTcwMCcgOiAndGV4dC1zbGF0ZS03MDAnfSI+QnVsbGV0aW4gTsKwJHtiLm51bWJlcn08L3NwYW4+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz0idGV4dC1bMTBweF0gdGV4dC1zbGF0ZS00MDAiPiR7bmV3IERhdGUoYi5sYXN0TW9kaWZpZWQpLnRvTG9jYWxlRGF0ZVN0cmluZygpfTwvc3Bhbj4KICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InRleHQteHMgJHtpc0FjdGl2ZSA/ICd0ZXh0LWJsdWUtNTAwJyA6ICd0ZXh0LXNsYXRlLTUwMCd9Ij5TZW1haW5lIGR1ICR7ZGF0ZURpc3BsYXl9PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZmxleCBmbGV4LWNvbCBnYXAtMSBtbC0yIj4KICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBvbmNsaWNrPSJkdXBsaWNhdGVCdWxsZXRpbihldmVudCwgJHtiLmlkfSkiIGNsYXNzPSJ0ZXh0LXNsYXRlLTMwMCBob3Zlcjp0ZXh0LWJsdWUtNTAwIHAtMS41IGhvdmVyOmJnLWJsdWUtNTAgcm91bmRlZC1sZyB0cmFuc2l0aW9uLWFsbCIgdGl0bGU9IkR1cGxpcXVlciI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHN2ZyBjbGFzcz0idy00IGgtNCI+PHVzZSBocmVmPSIjaWNvbi1jb3B5Ij48L3VzZT48L3N2Zz4KICAgICAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+CiAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gb25jbGljaz0iZGVsZXRlQnVsbGV0aW4oZXZlbnQsICR7Yi5pZH0pIiBjbGFzcz0idGV4dC1zbGF0ZS0zMDAgaG92ZXI6dGV4dC1yZWQtNTAwIHAtMS41IGhvdmVyOmJnLXJlZC01MCByb3VuZGVkLWxnIHRyYW5zaXRpb24tYWxsIiB0aXRsZT0iU3VwcHJpbWVyIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3ZnIGNsYXNzPSJ3LTQgaC00Ij48dXNlIGhyZWY9IiNpY29uLXRyYXNoIj48L3VzZT48L3N2Zz4KICAgICAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICBgOwogICAgICAgICAgICAgICAgbGlzdC5hcHBlbmRDaGlsZChkaXYpOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgCiAgICAgICAgICAgIGlmKGZpbHRlcmVkLmxlbmd0aCA9PT0gMCAmJiBidWxsZXRpbnMubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgICAgIGxpc3QuaW5uZXJIVE1MID0gYDxkaXYgY2xhc3M9InRleHQtY2VudGVyIHAtNCB0ZXh0LXNsYXRlLTQwMCB0ZXh0LXNtIj5BdWN1biBidWxsZXRpbiB0cm91dsOpIHBvdXIgIiR7cXVlcnl9IjwvZGl2PmA7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgCiAgICAgICAgZnVuY3Rpb24gcGFyc2VMb2NhbERhdGUoZGF0ZVN0cmluZykgewogICAgICAgICAgICAgaWYgKCFkYXRlU3RyaW5nKSByZXR1cm4gbnVsbDsKICAgICAgICAgICAgIGNvbnN0IFt5ZWFyLCBtb250aCwgZGF5XSA9IGRhdGVTdHJpbmcuc3BsaXQoJy0nKS5tYXAoTnVtYmVyKTsKICAgICAgICAgICAgIHJldHVybiBuZXcgRGF0ZSh5ZWFyLCBtb250aCAtIDEsIGRheSk7CiAgICAgICAgfQoKICAgICAgICAvLyAtLS0gUFJFVklFVyAtLS0KICAgICAgICBmdW5jdGlvbiB1cGRhdGVQcmV2aWV3KCkgewogICAgICAgICAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGRmLWNvbnRlbnQnKTsKICAgICAgICAgICAgCiAgICAgICAgICAgIC8vIExheW91dCAmIEZvbnQgQ2xhc3NlcyBmcm9tIFNldHRpbmdzCiAgICAgICAgICAgIGNvbnN0IGxheW91dCA9IGVzdGFibGlzaG1lbnQubGF5b3V0IHx8ICdjbGFzc2ljJzsKICAgICAgICAgICAgY29uc3QgZm9udCA9IGVzdGFibGlzaG1lbnQuZm9udCB8fCAnaW50ZXInOwogICAgICAgICAgICBjb25zdCBmb250Q2xhc3MgPSBmb250ID09PSAnc2VyaWYnID8gJ2ZvbnQtc2VyaWYnIDogKGZvbnQgPT09ICdtb25vJyA/ICdmb250LW1vbm8nIDogJ2ZvbnQtaW50ZXInKTsKICAgICAgICAgICAgCiAgICAgICAgICAgIC8vIEN1c3RvbSB0ZXh0cwogICAgICAgICAgICBjb25zdCBkb2NUaXRsZSA9IGVzdGFibGlzaG1lbnQuZG9jVGl0bGUgfHwgIkJ1bGxldGluIGQnaW5mb3JtYXRpb24iOwogICAgICAgICAgICBjb25zdCBkb2NGb290ZXIgPSBlc3RhYmxpc2htZW50LmRvY0Zvb3RlciB8fCAiIjsKCiAgICAgICAgICAgIC8vIEFwcGx5IGZvbnQgdG8gY29udGFpbmVyCiAgICAgICAgICAgIGNvbnRhaW5lci5jbGFzc05hbWUgPSBgYTQtcGFnZSAke2ZvbnRDbGFzc30gbGF5b3V0LSR7bGF5b3V0fWA7CgogICAgICAgICAgICBjb25zdCBudW0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYmktbnVtYmVyJykudmFsdWU7CiAgICAgICAgICAgIGNvbnN0IHN0YXJ0VmFsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2JpLWRhdGUtc3RhcnQnKS52YWx1ZTsKICAgICAgICAgICAgY29uc3QgZW5kVmFsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2JpLWRhdGUtZW5kJykudmFsdWU7CiAgICAgICAgICAgIGNvbnN0IHB1YkRhdGVWYWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYmktcHViLWRhdGUnKS52YWx1ZTsKICAgICAgICAgICAgY29uc3Qgc2lnbmF0b3J5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2JpLXNpZ25hdG9yeScpLnZhbHVlOwogICAgICAgICAgICBjb25zdCB0aGVtZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdiaS10aGVtZScpLnZhbHVlIHx8ICdibHVlJzsKICAgICAgICAgICAgCiAgICAgICAgICAgIC8vIFRIRU1FIENPTkZJRwogICAgICAgICAgICBjb25zdCB0aGVtZUNvbmZpZyA9IHsKICAgICAgICAgICAgICAgIGJsdWU6ICB7IG1haW46ICd0ZXh0LWJsdWUtOTAwJywgYm9yZGVyOiAnYm9yZGVyLWJsdWUtODAwJywgYmFkZ2U6ICdiZy1ibHVlLTgwMCcsIHN1YkJvcmRlcjogJ2JvcmRlci1ibHVlLTEwMCcsIGFjY2VudDogJ3RleHQtb3JhbmdlLTYwMCcsIHRpdGxlOiAndGV4dC1ibHVlLTkwMCcgfSwKICAgICAgICAgICAgICAgIHJlZDogICB7IG1haW46ICd0ZXh0LXJlZC05MDAnLCAgYm9yZGVyOiAnYm9yZGVyLXJlZC04MDAnLCAgYmFkZ2U6ICdiZy1yZWQtODAwJywgIHN1YkJvcmRlcjogJ2JvcmRlci1yZWQtMTAwJywgIGFjY2VudDogJ3RleHQtc2xhdGUtNjAwJywgIHRpdGxlOiAndGV4dC1yZWQtOTAwJyB9LAogICAgICAgICAgICAgICAgZ3JlZW46IHsgbWFpbjogJ3RleHQtZW1lcmFsZC05MDAnLCBib3JkZXI6ICdib3JkZXItZW1lcmFsZC04MDAnLCBiYWRnZTogJ2JnLWVtZXJhbGQtODAwJywgc3ViQm9yZGVyOiAnYm9yZGVyLWVtZXJhbGQtMTAwJywgYWNjZW50OiAndGV4dC1lbWVyYWxkLTYwMCcsIHRpdGxlOiAndGV4dC1ncmVlbi05MDAnIH0sCiAgICAgICAgICAgICAgICBncmV5OiAgeyBtYWluOiAndGV4dC1zbGF0ZS05MDAnLCBib3JkZXI6ICdib3JkZXItc2xhdGUtODAwJywgYmFkZ2U6ICdiZy1zbGF0ZS04MDAnLCBzdWJCb3JkZXI6ICdib3JkZXItc2xhdGUtMjAwJywgYWNjZW50OiAndGV4dC1zbGF0ZS01MDAnLCB0aXRsZTogJ3RleHQtc2xhdGUtOTAwJyB9LAogICAgICAgICAgICAgICAgcHVycGxlOnsgbWFpbjogJ3RleHQtcHVycGxlLTkwMCcsIGJvcmRlcjogJ2JvcmRlci1wdXJwbGUtODAwJywgYmFkZ2U6ICdiZy1wdXJwbGUtODAwJywgc3ViQm9yZGVyOiAnYm9yZGVyLXB1cnBsZS0xMDAnLCBhY2NlbnQ6ICd0ZXh0LXBpbmstNjAwJywgdGl0bGU6ICd0ZXh0LXB1cnBsZS05MDAnIH0KICAgICAgICAgICAgfTsKICAgICAgICAgICAgY29uc3QgdCA9IHRoZW1lQ29uZmlnW3RoZW1lXSB8fCB0aGVtZUNvbmZpZy5ibHVlOwoKICAgICAgICAgICAgY29uc3Qgc3RhcnQgPSBwYXJzZUxvY2FsRGF0ZShzdGFydFZhbCk7CiAgICAgICAgICAgIGNvbnN0IGVuZCA9IHBhcnNlTG9jYWxEYXRlKGVuZFZhbCk7CiAgICAgICAgICAgIGNvbnN0IHB1YkRhdGVPYmogPSBwYXJzZUxvY2FsRGF0ZShwdWJEYXRlVmFsKTsKICAgICAgICAgICAgY29uc3Qgb3B0aW9uc01vbnRoID0geyBtb250aDogJ2xvbmcnIH07CiAgICAgICAgICAgIAogICAgICAgICAgICBsZXQgcHViRGF0ZVN0ciA9ICIiOwogICAgICAgICAgICBpZihwdWJEYXRlT2JqKSB7CiAgICAgICAgICAgICAgICAgY29uc3QgZCA9IHB1YkRhdGVPYmouZ2V0RGF0ZSgpOwogICAgICAgICAgICAgICAgIGNvbnN0IG0gPSBwdWJEYXRlT2JqLnRvTG9jYWxlRGF0ZVN0cmluZygnZnItRlInLCBvcHRpb25zTW9udGgpOwogICAgICAgICAgICAgICAgIGNvbnN0IHkgPSBwdWJEYXRlT2JqLmdldEZ1bGxZZWFyKCk7CiAgICAgICAgICAgICAgICAgcHViRGF0ZVN0ciA9IGAke2R9Jm5ic3A7JHttfSZuYnNwOyR7eX1gOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBuZXcgRGF0ZSgpOwogICAgICAgICAgICAgICAgIHB1YkRhdGVTdHIgPSBgJHt0LmdldERhdGUoKX0mbmJzcDske3QudG9Mb2NhbGVEYXRlU3RyaW5nKCdmci1GUicsIG9wdGlvbnNNb250aCl9Jm5ic3A7JHt0LmdldEZ1bGxZZWFyKCl9YDsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgbGV0IGRhdGVTdHIgPSAiU2VtYWluZSBkdSAuLi4iOwogICAgICAgICAgICBpZiAoc3RhcnQgJiYgZW5kICYmICFpc05hTihzdGFydCkpIHsKICAgICAgICAgICAgICAgICBjb25zdCBzdGFydERheSA9IHN0YXJ0LmdldERhdGUoKTsKICAgICAgICAgICAgICAgICBjb25zdCBzdGFydE1vbnRoID0gc3RhcnQudG9Mb2NhbGVEYXRlU3RyaW5nKCdmci1GUicsIG9wdGlvbnNNb250aCk7CiAgICAgICAgICAgICAgICAgY29uc3QgZW5kRGF5ID0gZW5kLmdldERhdGUoKTsKICAgICAgICAgICAgICAgICBjb25zdCBlbmRNb250aCA9IGVuZC50b0xvY2FsZURhdGVTdHJpbmcoJ2ZyLUZSJywgb3B0aW9uc01vbnRoKTsKICAgICAgICAgICAgICAgICBjb25zdCBlbmRZZWFyID0gZW5kLmdldEZ1bGxZZWFyKCk7CiAgICAgICAgICAgICAgICAgZGF0ZVN0ciA9IGBEdSZuYnNwOyR7c3RhcnREYXl9Jm5ic3A7JHtzdGFydE1vbnRofSZuYnNwO2F1Jm5ic3A7JHtlbmREYXl9Jm5ic3A7JHtlbmRNb250aH0mbmJzcDske2VuZFllYXJ9YDsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgY29uc3QgZ3JvdXBlZCA9IHt9OwogICAgICAgICAgICBjdXJyZW50SXRlbXMuZm9yRWFjaChpdGVtID0+IHsgaWYoIWdyb3VwZWRbaXRlbS5jYXRlZ29yeV0pIGdyb3VwZWRbaXRlbS5jYXRlZ29yeV0gPSBbXTsgZ3JvdXBlZFtpdGVtLmNhdGVnb3J5XS5wdXNoKGl0ZW0pOyB9KTsKCiAgICAgICAgICAgIC8vIC0tLSBEWU5BTUlDIEhFQURFUiBHRU5FUkFUSU9OIC0tLQogICAgICAgICAgICBsZXQgaGVhZGVySHRtbCA9ICcnOwoKICAgICAgICAgICAgLy8gSGFuZGxlIGxpbmUgYnJlYWsgcmVwbGFjZW1lbnQgaW4gdGl0bGUgaWYgbmVlZGVkLCBidXQgZmxleCB3cmFwIGhhbmRsZXMgc3RhbmRhcmQgc3BhY2VzLgogICAgICAgICAgICAvLyBJZiB1c2VyIHR5cGVzIDxicj4sIGl0IHdpbGwgcmVuZGVyLgogICAgICAgICAgICAKICAgICAgICAgICAgaWYobGF5b3V0ID09PSAnbW9kZXJuJykgewogICAgICAgICAgICAgICAgLy8gQ0VOVFLDiQogICAgICAgICAgICAgICAgaGVhZGVySHRtbCA9IGAKICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmbGV4IGZsZXgtY29sIGl0ZW1zLWNlbnRlciB0ZXh0LWNlbnRlciBoZWFkZXItYmxvY2sgJHt0LmJvcmRlcn0iPgogICAgICAgICAgICAgICAgICAgICAgICAke2VzdGFibGlzaG1lbnQubG9nbyA/IGA8aW1nIHNyYz0iJHtlc3RhYmxpc2htZW50LmxvZ299IiBjbGFzcz0iaC0yNCBvYmplY3QtY29udGFpbiBtYi00IiAvPmAgOiAnJ30KICAgICAgICAgICAgICAgICAgICAgICAgPGgxIGNsYXNzPSJ0ZXh0LTN4bCBmb250LWJsYWNrIHVwcGVyY2FzZSB0cmFja2luZy13aWRlc3QgJHt0LnRpdGxlfSBtYi0yIGxlYWRpbmctdGlnaHQiPiR7ZG9jVGl0bGV9PC9oMT4KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0idGV4dC14bCBmb250LWJvbGQgdGV4dC1zbGF0ZS03MDAgbWItMiI+JHtlc3RhYmxpc2htZW50Lm5hbWV9PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZsZXggaXRlbXMtY2VudGVyIGdhcC0zIHRleHQtc20gdGV4dC1zbGF0ZS01MDAgZm9udC1tZWRpdW0gYmctc2xhdGUtNTAgcHgtNCBweS0xIHJvdW5kZWQtZnVsbCBib3JkZXIgYm9yZGVyLXNsYXRlLTEwMCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3Bhbj5OwrAke251bX08L3NwYW4+IDxzcGFuIGNsYXNzPSJ0ZXh0LXNsYXRlLTMwMCI+4oCiPC9zcGFuPiA8c3Bhbj4ke2RhdGVTdHJ9PC9zcGFuPgogICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIGA7CiAgICAgICAgICAgIH0gZWxzZSBpZiAobGF5b3V0ID09PSAnYmFubmVyJykgewogICAgICAgICAgICAgICAgLy8gQkFOREVBVQogICAgICAgICAgICAgICAgaGVhZGVySHRtbCA9IGAKICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJoZWFkZXItYmxvY2siPgogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSIke3QuYmFkZ2V9IHAtNiB0ZXh0LXdoaXRlIGZsZXgganVzdGlmeS1iZXR3ZWVuIGl0ZW1zLWNlbnRlciByb3VuZGVkLXQteGwiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGgxIGNsYXNzPSJ0ZXh0LTJ4bCBmb250LWJsYWNrIHVwcGVyY2FzZSB0cmFja2luZy13aWRlc3QgbWItMSI+JHtkb2NUaXRsZX08L2gxPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzcz0ib3BhY2l0eS05MCB0ZXh0LXNtIGZvbnQtbWVkaXVtIj5OwrAke251bX0g4oCiICR7ZGF0ZVN0cn08L3A+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICR7ZXN0YWJsaXNobWVudC5sb2dvID8gYDxpbWcgc3JjPSIke2VzdGFibGlzaG1lbnQubG9nb30iIGNsYXNzPSJoLTE2IHctMTYgb2JqZWN0LWNvbnRhaW4gYmctd2hpdGUgcm91bmRlZC1sZyBwLTEgc2hhZG93LXNtIiAvPmAgOiAnJ30KICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImJnLXNsYXRlLTUwIHAtMyBib3JkZXIteCBib3JkZXItYiBib3JkZXItc2xhdGUtMjAwIHRleHQtY2VudGVyIHRleHQteHMgZm9udC1ib2xkIHVwcGVyY2FzZSB0ZXh0LXNsYXRlLTUwMCB0cmFja2luZy13aWRlIHJvdW5kZWQtYi14bCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAke2VzdGFibGlzaG1lbnQubmFtZX0g4oCiICR7ZXN0YWJsaXNobWVudC5hZGRyZXNzfQogICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIGA7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAvLyBDTEFTU0lDIChEZWZhdWx0KQogICAgICAgICAgICAgICAgaGVhZGVySHRtbCA9IGAKICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmbGV4IGp1c3RpZnktYmV0d2VlbiBpdGVtcy1lbmQgaGVhZGVyLWJsb2NrICR7dC5ib3JkZXJ9Ij4KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0idy0xLzIgZmxleCBmbGV4LWNvbCBpdGVtcy1zdGFydCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAke2VzdGFibGlzaG1lbnQubG9nbyA/IGA8aW1nIHNyYz0iJHtlc3RhYmxpc2htZW50LmxvZ299IiBjbGFzcz0iaC0yNCBvYmplY3QtY29udGFpbiBtYi0zIiAvPmAgOiAnJ30KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzPSJmb250LWJvbGQgdGV4dC1zbGF0ZS05MDAgdGV4dC1sZyBsZWFkaW5nLXRpZ2h0Ij4ke2VzdGFibGlzaG1lbnQubmFtZX08L3A+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzcz0idGV4dC1zbSB0ZXh0LXNsYXRlLTYwMCI+JHtlc3RhYmxpc2htZW50LmFkZHJlc3N9PC9wPgogICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0idy0xLzIgdGV4dC1yaWdodCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDEgY2xhc3M9InRleHQtM3hsIGZvbnQtYm9sZCB1cHBlcmNhc2UgdHJhY2tpbmctd2lkZXN0ICR7dC50aXRsZX0gbGVhZGluZy10aWdodCBtYi0yIj4ke2RvY1RpdGxlfTwvaDE+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJ0ZXh0LTR4bCBmb250LWJsYWNrIHRleHQtc2xhdGUtODAwIj5OwrAke251bX08L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzPSJtdC0yIGZvbnQtbWVkaXVtICR7dC5hY2NlbnR9Ij4ke2RhdGVTdHJ9PC9wPgogICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIGA7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGxldCBodG1sID0gaGVhZGVySHRtbDsKCiAgICAgICAgICAgIGxldCBjb3VudGVyID0gMTsKICAgICAgICAgICAgbWFzdGVyQ2F0ZWdvcmllcy5mb3JFYWNoKGNhdCA9PiB7CiAgICAgICAgICAgICAgICBjb25zdCBpdGVtcyA9IGdyb3VwZWRbY2F0XTsKICAgICAgICAgICAgICAgIGlmKGl0ZW1zICYmIGl0ZW1zLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICAgICAgICBodG1sICs9IGAKICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ibWItNiBicmVhay1pbnNpZGUtYXZvaWQiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGgyIGNsYXNzPSJ0ZXh0LWxnIGZvbnQtYm9sZCAke3QubWFpbn0gYm9yZGVyLWIgJHt0LnN1YkJvcmRlcn0gcGItMSBtYi0zIHVwcGVyY2FzZSBmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMiI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9IiR7dC5iYWRnZX0gdGV4dC13aGl0ZSB3LTYgaC02IGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIHJvdW5kZWQtZnVsbCB0ZXh0LXhzIGZvbnQtYm9sZCI+JHtjb3VudGVyfTwvc3Bhbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAke2NhdH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvaDI+CiAgICAgICAgICAgICAgICAgICAgYDsKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICBpZihjYXQuaW5jbHVkZXMoJ0FHRU5EQScpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGh0bWwgKz0gYDx0YWJsZSBjbGFzcz0idy1mdWxsIHRleHQtc20gYm9yZGVyLWNvbGxhcHNlIj5gOwogICAgICAgICAgICAgICAgICAgICAgICBpdGVtcy5mb3JFYWNoKGl0ZW0gPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZGlzcGxheURhdGUgPSBmb3JtYXREYXRlRm9yRGlzcGxheShpdGVtLmRhdGUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaHRtbCArPSBgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRyIGNsYXNzPSJib3JkZXItYiBib3JkZXItc2xhdGUtMTAwIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIGNsYXNzPSJweS0yIGZvbnQtYm9sZCAke3QuYWNjZW50fSB3LTEvNCBhbGlnbi10b3AgdXBwZXJjYXNlIHRleHQteHMgdHJhY2tpbmctd2lkZSBjYXBpdGFsaXplIj4ke2Rpc3BsYXlEYXRlIHx8ICcnfTwvdGQ+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBjbGFzcz0icHktMiBhbGlnbi10b3AiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9udC1ib2xkIHRleHQtc2xhdGUtODAwIj4ke2l0ZW0udGl0bGV9PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJ0ZXh0LXNsYXRlLTYwMCB0ZXh0LXhzIG10LTEgcmljaC10ZXh0LWNvbnRlbnQiPiR7aXRlbS5jb250ZW50fTwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RkPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdHI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBgOwogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgaHRtbCArPSBgPC90YWJsZT5gOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1zLmZvckVhY2goaXRlbSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkaXNwbGF5RGF0ZSA9IGZvcm1hdERhdGVGb3JEaXNwbGF5KGl0ZW0uZGF0ZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkYXRlSHRtbCA9IGRpc3BsYXlEYXRlID8gYDxzcGFuIGNsYXNzPSIke3QuYWNjZW50fSBmb250LWJvbGQgbXItMSB0ZXh0LXhzIHVwcGVyY2FzZSB0cmFja2luZy13aWRlIGNhcGl0YWxpemUiPlske2Rpc3BsYXlEYXRlfV08L3NwYW4+YCA6ICcnOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaHRtbCArPSBgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ibWItMyBwbC00IGJvcmRlci1sLTQgYm9yZGVyLXNsYXRlLTEwMCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR7aXRlbS50aXRsZSA/IGA8ZGl2IGNsYXNzPSJmb250LWJvbGQgdGV4dC1zbGF0ZS04MDAgdGV4dC1zbSBtYi0xIj4ke2RhdGVIdG1sfSR7aXRlbS50aXRsZX08L2Rpdj5gIDogJyd9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InRleHQtc20gdGV4dC1zbGF0ZS03MDAgdGV4dC1qdXN0aWZ5IGxlYWRpbmctcmVsYXhlZCByaWNoLXRleHQtY29udGVudCI+JHshaXRlbS50aXRsZSA/IGRhdGVIdG1sIDogJyd9JHtpdGVtLmNvbnRlbnR9PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBgOwogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgaHRtbCArPSBgPC9kaXY+YDsKICAgICAgICAgICAgICAgICAgICBjb3VudGVyKys7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgLy8gU2lnbmF0YWlyZQogICAgICAgICAgICBodG1sICs9IGAKICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9Im10LTEyIHB0LTQgYm9yZGVyLXQtMiBib3JkZXItc2xhdGUtMTAwIGJyZWFrLWluc2lkZS1hdm9pZCBmbGV4IGp1c3RpZnktZW5kIj4KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJ0ZXh0LXJpZ2h0Ij4KICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3M9ImZvbnQtYm9sZCB0ZXh0LXNsYXRlLTgwMCBtYi0xIj5GYWl0IGxlIDogJHtwdWJEYXRlU3RyfTwvcD4KICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3M9InRleHQtc2xhdGUtNjAwIHRleHQtc20gaXRhbGljIj5wYXIgJHtzaWduYXRvcnl9LDwvcD4KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICBgOwogICAgICAgICAgICAKICAgICAgICAgICAgLy8gRm9vdGVyIEZpeGUgKEN1c3RvbSkKICAgICAgICAgICAgaWYoZG9jRm9vdGVyKSB7CiAgICAgICAgICAgICAgICBodG1sICs9IGA8ZGl2IGNsYXNzPSJwZGYtZm9vdGVyLWZpeGVkIj4ke2RvY0Zvb3Rlcn08L2Rpdj5gOwogICAgICAgICAgICB9CgogICAgICAgICAgICBjb250YWluZXIuaW5uZXJIVE1MID0gaHRtbDsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGdlbmVyYXRlUERGKCkgewogICAgICAgICAgICBpZiAodHlwZW9mIGh0bWwycGRmID09PSAndW5kZWZpbmVkJykgeyBhbGVydCgnTGUgbW9kdWxlIFBERiBlc3QgZW4gY291cnMgZGUgY2hhcmdlbWVudC4gUsOpZXNzYXlleiBkYW5zIHF1ZWxxdWVzIHNlY29uZGVzLicpOyByZXR1cm47IH0KICAgICAgICAgICAgY29uc3QgZWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwZGYtY29udGVudCcpOwogICAgICAgICAgICBjb25zdCBudW0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYmktbnVtYmVyJykudmFsdWU7CiAgICAgICAgICAgIGNvbnN0IG9wdCA9IHsKICAgICAgICAgICAgICAgIG1hcmdpbjogICAgICAgMCwKICAgICAgICAgICAgICAgIGZpbGVuYW1lOiAgICAgYEJJX04ke251bX1fJHtuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkuc2xpY2UoMCwxMCl9LnBkZmAsCiAgICAgICAgICAgICAgICBpbWFnZTogICAgICAgIHsgdHlwZTogJ2pwZWcnLCBxdWFsaXR5OiAwLjk4IH0sCiAgICAgICAgICAgICAgICBodG1sMmNhbnZhczogIHsgc2NhbGU6IDIgfSwKICAgICAgICAgICAgICAgIGpzUERGOiAgICAgICAgeyB1bml0OiAnbW0nLCBmb3JtYXQ6ICdhNCcsIG9yaWVudGF0aW9uOiAncG9ydHJhaXQnIH0KICAgICAgICAgICAgfTsKICAgICAgICAgICAgaHRtbDJwZGYoKS5zZXQob3B0KS5mcm9tKGVsZW1lbnQpLnNhdmUoKTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGdlbmVyYXRlRE9DWCgpIHsKICAgICAgICAgICAgaWYgKHR5cGVvZiBodG1sRG9jeCA9PT0gJ3VuZGVmaW5lZCcpIHsgYWxlcnQoJ0xlIG1vZHVsZSBXb3JkIGVzdCBlbiBjb3VycyBkZSBjaGFyZ2VtZW50LiBSw6llc3NheWV6IGRhbnMgcXVlbHF1ZXMgc2Vjb25kZXMuJyk7IHJldHVybjsgfQogICAgICAgICAgICBjb25zdCBjb250ZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BkZi1jb250ZW50JykuY2xvbmVOb2RlKHRydWUpOwogICAgICAgICAgICBjb25zdCBjc3NXb3JkID0gYAogICAgICAgICAgICAgICAgPHN0eWxlPgogICAgICAgICAgICAgICAgICAgIGJvZHkgeyBmb250LWZhbWlseTogJ0FyaWFsJywgc2Fucy1zZXJpZjsgZm9udC1zaXplOiAxMXB0OyBsaW5lLWhlaWdodDogMS41OyBjb2xvcjogIzFlMjkzYjsgfQogICAgICAgICAgICAgICAgICAgIGgxIHsgY29sb3I6ICMxZTQwYWY7IGZvbnQtc2l6ZTogMjBwdDsgdGV4dC10cmFuc2Zvcm06IHVwcGVyY2FzZTsgZm9udC13ZWlnaHQ6IGJvbGQ7IG1hcmdpbi1ib3R0b206IDVweDsgfQogICAgICAgICAgICAgICAgICAgIGgyIHsgY29sb3I6ICMxZTQwYWY7IGZvbnQtc2l6ZTogMTRwdDsgYm9yZGVyLWJvdHRvbTogMnB4IHNvbGlkICNiZmRiZmU7IHBhZGRpbmctYm90dG9tOiA1cHg7IG1hcmdpbi10b3A6IDE1cHg7IG1hcmdpbi1ib3R0b206IDEwcHg7IHRleHQtdHJhbnNmb3JtOiB1cHBlcmNhc2U7IH0KICAgICAgICAgICAgICAgICAgICAuaGVhZGVyLWJsb2NrIHsgbWFyZ2luLWJvdHRvbTogMjBweDsgYm9yZGVyLWJvdHRvbTogMnB4IHNvbGlkICMxZDRlZDg7IHBhZGRpbmctYm90dG9tOiAxMHB4OyB9CiAgICAgICAgICAgICAgICAgICAgcCB7IG1hcmdpbi1ib3R0b206IDhweDsgfQogICAgICAgICAgICAgICAgICAgIHRhYmxlIHsgd2lkdGg6IDEwMCU7IGJvcmRlci1jb2xsYXBzZTogY29sbGFwc2U7IG1hcmdpbi1ib3R0b206IDE1cHg7IH0KICAgICAgICAgICAgICAgICAgICB0ZCB7IHBhZGRpbmc6IDZweDsgdmVydGljYWwtYWxpZ246IHRvcDsgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICNlMmU4ZjA7IH0KICAgICAgICAgICAgICAgICAgICAuZm9udC1ib2xkIHsgZm9udC13ZWlnaHQ6IGJvbGQ7IH0KICAgICAgICAgICAgICAgICAgICAuaXRhbGljIHsgZm9udC1zdHlsZTogaXRhbGljOyB9CiAgICAgICAgICAgICAgICAgICAgLnRleHQtcmlnaHQgeyB0ZXh0LWFsaWduOiByaWdodDsgfQogICAgICAgICAgICAgICAgICAgIC50ZXh0LWNlbnRlciB7IHRleHQtYWxpZ246IGNlbnRlcjsgfQogICAgICAgICAgICAgICAgICAgIC51cHBlcmNhc2UgeyB0ZXh0LXRyYW5zZm9ybTogdXBwZXJjYXNlOyB9CiAgICAgICAgICAgICAgICAgICAgLnRleHQtYmx1ZS05MDAgeyBjb2xvcjogIzFlM2E4YTsgfQogICAgICAgICAgICAgICAgICAgIC50ZXh0LW9yYW5nZS02MDAgeyBjb2xvcjogI2VhNTgwYzsgfQogICAgICAgICAgICAgICAgICAgIC50ZXh0LXNsYXRlLTUwMCB7IGNvbG9yOiAjNjQ3NDhiOyB9CiAgICAgICAgICAgICAgICAgICAgLnRleHQteHMgeyBmb250LXNpemU6IDlwdDsgfQogICAgICAgICAgICAgICAgICAgIHVsIHsgbWFyZ2luLWxlZnQ6IDIwcHg7IGxpc3Qtc3R5bGUtdHlwZTogZGlzYzsgfQogICAgICAgICAgICAgICAgICAgIG9sIHsgbWFyZ2luLWxlZnQ6IDIwcHg7IGxpc3Qtc3R5bGUtdHlwZTogZGVjaW1hbDsgfQogICAgICAgICAgICAgICAgPC9zdHlsZT4KICAgICAgICAgICAgYDsKCiAgICAgICAgICAgIGNvbnN0IGh0bWxTdHJpbmcgPSBgCiAgICAgICAgICAgICAgICA8IURPQ1RZUEUgaHRtbD4KICAgICAgICAgICAgICAgIDxodG1sPgogICAgICAgICAgICAgICAgPGhlYWQ+CiAgICAgICAgICAgICAgICAgICAgPG1ldGEgY2hhcnNldD0idXRmLTgiPgogICAgICAgICAgICAgICAgICAgICR7Y3NzV29yZH0KICAgICAgICAgICAgICAgIDwvaGVhZD4KICAgICAgICAgICAgICAgIDxib2R5PgogICAgICAgICAgICAgICAgICAgICR7Y29udGVudC5pbm5lckhUTUx9CiAgICAgICAgICAgICAgICA8L2JvZHk+CiAgICAgICAgICAgICAgICA8L2h0bWw+CiAgICAgICAgICAgIGA7CgogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgY29uc3QgY29udmVydGVkID0gaHRtbERvY3guYXNCbG9iKGh0bWxTdHJpbmcsIHsKICAgICAgICAgICAgICAgICAgICBvcmllbnRhdGlvbjogJ3BvcnRyYWl0JywKICAgICAgICAgICAgICAgICAgICBtYXJnaW5zOiB7IHRvcDogNzIwLCByaWdodDogNzIwLCBib3R0b206IDcyMCwgbGVmdDogNzIwIH0KICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBjb25zdCBudW0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYmktbnVtYmVyJykudmFsdWU7CiAgICAgICAgICAgICAgICBzYXZlQXMoY29udmVydGVkLCBgQklfTiR7bnVtfV8ke25ldyBEYXRlKCkudG9JU09TdHJpbmcoKS5zbGljZSgwLDEwKX0uZG9jeGApOwogICAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICBhbGVydCgiRXJyZXVyIGxvcnMgZGUgbGEgZ8OpbsOpcmF0aW9uIFdvcmQgOiAiICsgZS5tZXNzYWdlKTsKICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZSk7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGV4cG9ydERhdGEoKSB7CiAgICAgICAgICAgIGNvbnN0IGRhdGEgPSB7CiAgICAgICAgICAgICAgICBlc3RhYmxpc2htZW50LCBidWxsZXRpbnMsIAogICAgICAgICAgICAgICAgY2F0ZWdvcmllczogbWFzdGVyQ2F0ZWdvcmllcywKICAgICAgICAgICAgICAgIGV4cG9ydERhdGU6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSwKICAgICAgICAgICAgICAgIHZlcnNpb246ICJiaWJhc2UtdjMuMCIKICAgICAgICAgICAgfTsKICAgICAgICAgICAgY29uc3QgZGF0YVN0ciA9ICJkYXRhOnRleHQvanNvbjtjaGFyc2V0PXV0Zi04LCIgKyBlbmNvZGVVUklDb21wb25lbnQoSlNPTi5zdHJpbmdpZnkoZGF0YSkpOwogICAgICAgICAgICBjb25zdCBkb3dubG9hZEFuY2hvck5vZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7CiAgICAgICAgICAgIGRvd25sb2FkQW5jaG9yTm9kZS5zZXRBdHRyaWJ1dGUoImhyZWYiLCBkYXRhU3RyKTsKICAgICAgICAgICAgZG93bmxvYWRBbmNob3JOb2RlLnNldEF0dHJpYnV0ZSgiZG93bmxvYWQiLCBgYmliYXNlX3NhdXZlZ2FyZGVfJHtuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkuc2xpY2UoMCwxMCl9Lmpzb25gKTsKICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChkb3dubG9hZEFuY2hvck5vZGUpOwogICAgICAgICAgICBkb3dubG9hZEFuY2hvck5vZGUuY2xpY2soKTsKICAgICAgICAgICAgZG93bmxvYWRBbmNob3JOb2RlLnJlbW92ZSgpOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gaW1wb3J0RGF0YShpbnB1dCkgewogICAgICAgICAgICBjb25zdCBmaWxlID0gaW5wdXQuZmlsZXNbMF07CiAgICAgICAgICAgIGlmICghZmlsZSkgcmV0dXJuOwogICAgICAgICAgICBjb25zdCByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpOwogICAgICAgICAgICByZWFkZXIub25sb2FkID0gZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICBjb25zdCBkYXRhID0gSlNPTi5wYXJzZShlLnRhcmdldC5yZXN1bHQpOwogICAgICAgICAgICAgICAgICAgIGlmKGNvbmZpcm0oIuKaoO+4jyBBdHRlbnRpb24gOiBDZWxhIHZhIHJlbXBsYWNlciB0b3V0ZXMgdm9zIGRvbm7DqWVzIGFjdHVlbGxlcyBwYXIgY2VsbGVzIGR1IGZpY2hpZXIuIENvbnRpbnVlciA/IikpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGEuZXN0YWJsaXNobWVudCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZXN0YWJsaXNobWVudCA9IGRhdGEuZXN0YWJsaXNobWVudDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdiaWJhc2VfZXN0YWJsaXNobWVudCcsIEpTT04uc3RyaW5naWZ5KGVzdGFibGlzaG1lbnQpKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YS5idWxsZXRpbnMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1bGxldGlucyA9IGRhdGEuYnVsbGV0aW5zOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2JpYmFzZV9idWxsZXRpbnMnLCBKU09OLnN0cmluZ2lmeShidWxsZXRpbnMpKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YS5jYXRlZ29yaWVzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXN0ZXJDYXRlZ29yaWVzID0gZGF0YS5jYXRlZ29yaWVzOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2F2ZUNhdGVnb3JpZXMoKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChkYXRhLmN1c3RvbUNhdGVnb3JpZXMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hc3RlckNhdGVnb3JpZXMgPSBbLi4uREVGQVVMVF9DQVRFR09SSUVTLCAuLi5kYXRhLmN1c3RvbUNhdGVnb3JpZXNdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2F2ZUNhdGVnb3JpZXMoKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBhbGVydCgi4pyFIERvbm7DqWVzIHJlc3RhdXLDqWVzIGF2ZWMgc3VjY8OocyAhIik7CiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uLnJlbG9hZCgpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycikgeyBhbGVydCgi4p2MIEVycmV1ciA6IExlIGZpY2hpZXIgc2VtYmxlIGludmFsaWRlLiIpOyB9CiAgICAgICAgICAgIH07CiAgICAgICAgICAgIHJlYWRlci5yZWFkQXNUZXh0KGZpbGUpOwogICAgICAgICAgICBpbnB1dC52YWx1ZSA9ICcnOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gcmVzZXREYXRhKCkgewogICAgICAgICAgICBpZihjb25maXJtKCLimqDvuI8gQVRURU5USU9OIDogVG91dCBlZmZhY2VyID8iKSkgewogICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLmNsZWFyKCk7CiAgICAgICAgICAgICAgICBhbGVydCgi4pm777iPIEFwcGxpY2F0aW9uIHLDqWluaXRpYWxpc8OpZS4iKTsKICAgICAgICAgICAgICAgIGxvY2F0aW9uLnJlbG9hZCgpOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBvcGVuU2V0dGluZ3MoKSB7IC8qIG1vdmVkIHRvIHdyYXBwZXIgQWx0K1AgKi8gfQogICAgICAgIGZ1bmN0aW9uIGNsb3NlU2V0dGluZ3MoKSB7fQogICAgICAgIGZ1bmN0aW9uIGhhbmRsZUxvZ29VcGxvYWQoaW5wdXQpIHsgLyogbG9nbyBmcm9tIHdyYXBwZXIgKi8gfQogICAgICAgIGZ1bmN0aW9uIHNhdmVTZXR0aW5ncygpIHsgLyogbW92ZWQgdG8gd3JhcHBlciAqLyB9CiAgICAKICAgICAgICAvLyBMaXN0ZW4gZm9yIHNldHRpbmdzIGZyb20gQ0FESVIgd3JhcHBlcgogICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgZnVuY3Rpb24oZSkgewogICAgICAgICAgICBpZiAoIWUuZGF0YSkgcmV0dXJuOwogICAgICAgICAgICBpZiAoZS5kYXRhLnR5cGUgPT09ICdwaWxvdGUtc2V0dGluZ3MnKSB7CiAgICAgICAgICAgICAgICB2YXIgZCA9IGUuZGF0YS5kYXRhOwogICAgICAgICAgICAgICAgaWYgKGQuc2Nob29sKSBlc3RhYmxpc2htZW50Lm5hbWUgPSBkLnNjaG9vbDsKICAgICAgICAgICAgICAgIGlmIChkLmNpdHkpIGVzdGFibGlzaG1lbnQuYWRkcmVzcyA9IGQuY2l0eTsKICAgICAgICAgICAgICAgIGlmIChkLmxvZ29TcmMpIGVzdGFibGlzaG1lbnQubG9nbyA9IGQubG9nb1NyYzsKICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdiaWJhc2VfZXN0YWJsaXNobWVudCcsIEpTT04uc3RyaW5naWZ5KGVzdGFibGlzaG1lbnQpKTsKICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdXBkYXRlUHJldmlldyA9PT0gJ2Z1bmN0aW9uJykgdXBkYXRlUHJldmlldygpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChlLmRhdGEudHlwZSA9PT0gJ2JpYmFzZS1zZXR0aW5ncycpIHsKICAgICAgICAgICAgICAgIHZhciBzID0gZS5kYXRhLmRhdGE7CiAgICAgICAgICAgICAgICBpZiAocy5sYXlvdXQpIGVzdGFibGlzaG1lbnQubGF5b3V0ID0gcy5sYXlvdXQ7CiAgICAgICAgICAgICAgICBpZiAocy5mb250KSBlc3RhYmxpc2htZW50LmZvbnQgPSBzLmZvbnQ7CiAgICAgICAgICAgICAgICBpZiAocy5kZWZhdWx0U2lnbmF0b3J5KSBlc3RhYmxpc2htZW50LmRlZmF1bHRTaWduYXRvcnkgPSBzLmRlZmF1bHRTaWduYXRvcnk7CiAgICAgICAgICAgICAgICBpZiAocy5kb2NUaXRsZSkgZXN0YWJsaXNobWVudC5kb2NUaXRsZSA9IHMuZG9jVGl0bGU7CiAgICAgICAgICAgICAgICBpZiAocy5kb2NGb290ZXIgIT09IHVuZGVmaW5lZCkgZXN0YWJsaXNobWVudC5kb2NGb290ZXIgPSBzLmRvY0Zvb3RlcjsKICAgICAgICAgICAgICAgIGlmIChzLm5hbWUpIGVzdGFibGlzaG1lbnQubmFtZSA9IHMubmFtZTsKICAgICAgICAgICAgICAgIGlmIChzLmFkZHJlc3MpIGVzdGFibGlzaG1lbnQuYWRkcmVzcyA9IHMuYWRkcmVzczsKICAgICAgICAgICAgICAgIGlmIChzLmxvZ28pIGVzdGFibGlzaG1lbnQubG9nbyA9IHMubG9nbzsKICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdiaWJhc2VfZXN0YWJsaXNobWVudCcsIEpTT04uc3RyaW5naWZ5KGVzdGFibGlzaG1lbnQpKTsKICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdXBkYXRlUHJldmlldyA9PT0gJ2Z1bmN0aW9uJykgdXBkYXRlUHJldmlldygpOwogICAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAKICAgICAgICAvLyBGYWxsYmFjazogaWYgRE9NQ29udGVudExvYWRlZCBhbHJlYWR5IGZpcmVkLCBydW4gaW5pdAogICAgICAgIGlmIChkb2N1bWVudC5yZWFkeVN0YXRlID09PSAnY29tcGxldGUnIHx8IGRvY3VtZW50LnJlYWR5U3RhdGUgPT09ICdpbnRlcmFjdGl2ZScpIHsKICAgICAgICAgICAgc2V0VGltZW91dChpbml0QXBwLCAyMDApOwogICAgICAgIH0KICAgIDwvc2NyaXB0Pgo8L2JvZHk+CjwvaHRtbD4="
};

    const STORAGE_KEY = 'pilote_suite_settings';
    let currentModule = null;
    const loadedModules = new Set();
    const blobUrls = {};
    const moduleNames = ['perdir','exam','oral','aed','bibase','bibase'];

    const MODULE_META = {
        perdir: { label:'PERDIR', sublabel:'Direction', icon:'fas fa-building-columns', color:'var(--c-info)' },
        exam:   { label:'EXAM',   sublabel:'Épreuves', icon:'fas fa-file-pen', color:'var(--c-accent)' },
        oral:   { label:'ORAL',   sublabel:'Oraux', icon:'fas fa-comments', color:'var(--c-warning)' },
        aed:    { label:'AED',    sublabel:'Vie Scolaire', icon:'fas fa-user-shield', color:'var(--c-success)' },
        data:   { label:'DONNÉES', sublabel:'Import', icon:'fas fa-database', color:'var(--c-purple)' },
        bibase: { label:'BULLETIN', sublabel:'Information', icon:'fas fa-newspaper', color:'#e67e22' },
    };
    const ALL_ITEMS = ['perdir','exam','oral','aed','bibase','data'];
    const DEFAULT_ORDER = ['perdir','exam','oral','aed','bibase','data'];

    // ═══ EXCEL TEMPLATES ═══
    const TEMPLATES = {
        teachers: {
            filename: 'Modele_Enseignants.xlsx',
            columns: ['Nom','Prénom','Email'],
            widths: [20,18,30]
        },
        students: {
            filename: 'Modele_Eleves.xlsx',
            columns: ['Classe','Nom','Prénom','Email','Aménagement'],
            widths: [12,18,16,28,22]
        }
    };

    function downloadTemplate(type) {
        const tpl = TEMPLATES[type];
        const wb = XLSX.utils.book_new();
        const wsData = [tpl.columns];
        // Add 2 example rows
        if (type === 'teachers') {
            wsData.push(['Dupont','Jean','j.dupont@ac-rennes.fr']);
            wsData.push(['Martin','Sophie','s.martin@ac-rennes.fr']);
        } else {
            wsData.push(['2GT1','Durand','Marie','m.durand@eleve.fr','']);
            wsData.push(['1STMG2','Leroy','Thomas','t.leroy@eleve.fr','1/3 temps']);
        }
        const ws = XLSX.utils.aoa_to_sheet(wsData);
        // Set column widths
        ws['!cols'] = tpl.widths.map(w => ({ wch: w }));
        XLSX.utils.book_append_sheet(wb, ws, type === 'teachers' ? 'Enseignants' : 'Élèves');
        XLSX.writeFile(wb, tpl.filename);
    }

    // ═══ SETTINGS ═══
    function getSettings() { try { return JSON.parse(localStorage.getItem(STORAGE_KEY)) || {}; } catch(e) { return {}; } }
    function getNavOrder() {
        const s = getSettings();
        if (s.navOrder && s.navOrder.length) {
            // Add any missing modules
            var order = s.navOrder.slice();
            ALL_ITEMS.forEach(function(m) { if (order.indexOf(m) < 0) order.push(m); });
            // Remove deleted modules
            order = order.filter(function(m) { return ALL_ITEMS.indexOf(m) >= 0; });
            return order;
        }
        return [...DEFAULT_ORDER];
    }

    function loadSettingsUI() {
        // Restore cloud config
        var ms = JSON.parse(localStorage.getItem('pilote_master_settings') || '{}');
        if (ms.cloud) {
            if (ms.cloud.provider) { _cloudProvider = ms.cloud.provider; selectCloudProvider(ms.cloud.provider); }
            if (ms.cloud.key) document.getElementById('s-cloud-key').value = ms.cloud.key;
            if (ms.cloud.bin) document.getElementById('s-cloud-bin').value = ms.cloud.bin;
            if (ms.cloud.gistToken) document.getElementById('s-gist-token').value = ms.cloud.gistToken;
            if (ms.cloud.gistId) document.getElementById('s-gist-id').value = ms.cloud.gistId;
            if (ms.cloud.gdriveClientId) document.getElementById('s-gdrive-clientid').value = ms.cloud.gdriveClientId;
            if (ms.cloud.gdriveFileId) document.getElementById('s-gdrive-fileid').value = ms.cloud.gdriveFileId;
            if (ms.cloud.wdUrl) document.getElementById('s-webdav-url').value = ms.cloud.wdUrl;
            if (ms.cloud.wdUser) document.getElementById('s-webdav-user').value = ms.cloud.wdUser;
            if (ms.cloud.wdPass) document.getElementById('s-webdav-pass').value = ms.cloud.wdPass;
            if (ms.cloud.auto) document.getElementById('s-cloud-auto').checked = true;
            if (ms.cloud.enabled) { document.getElementById('s-cloud-enabled').checked = true; toggleCloudUI(); }
        }
        const s = getSettings();
        document.getElementById('s-school').value = s.school || '';
        document.getElementById('s-name').value = s.name || '';
        document.getElementById('s-role').value = s.role || '';
        document.getElementById('s-city').value = s.city || '';
        if(document.getElementById('s-zone')) document.getElementById('s-zone').value = s.zone || 'B';
        document.getElementById('s-gcal').checked = s.gcalEnabled || false;
        if(document.getElementById('s-gcal-clientid')) document.getElementById('s-gcal-clientid').value = s.gcalClientId || '';
        if(document.getElementById('s-gcal-key')) document.getElementById('s-gcal-key').value = s.gcalKey || '';
        toggleGcal();
        if(s.gcalCals && s.gcalCals.length) { _gcalCalsData = s.gcalCals; renderGcalList(s.gcalCals, s.gcalSel || []); renderManualList(s.gcalCals); }
        document.getElementById('s-zone').value = s.zone || 'B';
        if (s.logoSrc) {
                updateFavicon(s.logoSrc); document.getElementById('img-logo').src = s.logoSrc; document.getElementById('img-logo').style.display='block'; document.getElementById('ph-logo').style.display='none'; }
        if (s.signSrc) { document.getElementById('img-sign').src = s.signSrc; document.getElementById('img-sign').style.display='block'; document.getElementById('ph-sign').style.display='none'; }
        moduleNames.forEach(m => { const el = document.getElementById('tog-' + m); if (el) el.checked = s['show_' + m] !== false; });
        updateModuleVisibility();
        updateBrandLogo();
        renderOrderList();
        refreshDataUI();
    }

    
    function loadBibSettingsUI() {
        var bib = JSON.parse(localStorage.getItem('bibase_establishment') || '{}');
        if(bib.layout) document.getElementById('bib-layout').value = bib.layout;
        if(bib.font) document.getElementById('bib-font').value = bib.font;
        if(bib.defaultSignatory) {
            var sel = document.getElementById('bib-signatory');
            var found = false;
            for(var i=0;i<sel.options.length;i++) { if(sel.options[i].value===bib.defaultSignatory) { found=true; break; } }
            if(!found) { var o=document.createElement('option'); o.value=bib.defaultSignatory; o.text=bib.defaultSignatory; sel.appendChild(o); }
            sel.value = bib.defaultSignatory;
        }
        if(bib.docTitle) document.getElementById('bib-doc-title').value = bib.docTitle;
        if(bib.docFooter) document.getElementById('bib-doc-footer').value = bib.docFooter;
    }
    function saveBibSettings() {
        try {
            var bib = JSON.parse(localStorage.getItem('bibase_establishment') || '{}');
            var el;
            el = document.getElementById('bib-layout'); if (el) bib.layout = el.value;
            el = document.getElementById('bib-font'); if (el) bib.font = el.value;
            el = document.getElementById('bib-signatory'); if (el) bib.defaultSignatory = el.value;
            el = document.getElementById('bib-doc-title'); if (el) bib.docTitle = el.value;
            el = document.getElementById('bib-doc-footer'); if (el) bib.docFooter = el.value;
            var s = getSettings();
            if (s.school) bib.name = s.school;
            if (s.city) bib.address = s.city;
            if (s.logoSrc) bib.logo = s.logoSrc;
            localStorage.setItem('bibase_establishment', JSON.stringify(bib));
            var frame = document.getElementById('frame-bibase');
            if (frame && frame.contentWindow) {
                frame.contentWindow.postMessage({type: 'bibase-settings', data: bib}, '*');
                frame.contentWindow.postMessage({type: 'pilote-settings', data: {school: s.school||'', city: s.city||'', logoSrc: s.logoSrc||''}}, '*');
            }
        } catch(e) { console.warn('saveBibSettings:', e); }
    }
function saveSettings() {
        // 1. Save main settings first (critical)
        try {
            var s = getSettings();
            s.school = document.getElementById('s-school').value;
            s.name = document.getElementById('s-name').value;
            s.role = document.getElementById('s-role').value;
            s.city = document.getElementById('s-city').value;
            s.zone = document.getElementById('s-zone').value;
            s.gcalEnabled = document.getElementById('s-gcal').checked;
            if(document.getElementById('s-gcal-clientid')) s.gcalClientId = document.getElementById('s-gcal-clientid').value;
            if(document.getElementById('s-gcal-key')) s.gcalKey = document.getElementById('s-gcal-key').value;
            s.gcalSel = getGcalSel();
            var logoImg = document.getElementById('img-logo');
            s.logoSrc = (logoImg && logoImg.style.display !== 'none') ? logoImg.src : '';
            var signImg = document.getElementById('img-sign');
            s.signSrc = (signImg && signImg.style.display !== 'none') ? signImg.src : '';
            moduleNames.forEach(function(m) { var tog = document.getElementById('tog-' + m); if(tog) s['show_' + m] = tog.checked; });
            s.navOrder = getCurrentOrderFromList();
            s._lastSync = new Date().toISOString();
            localStorage.setItem(STORAGE_KEY, JSON.stringify(s));
        } catch(e1) { console.error('saveSettings main:', e1); }
        // 2. Save cloud config (independent)
        try {
            var cs = getCloudConfig();
            var ms = JSON.parse(localStorage.getItem('pilote_master_settings') || '{}');
            ms.cloud = cs;
            localStorage.setItem('pilote_master_settings', JSON.stringify(ms));
            setTimeout(cloudAutoSync, 800);
        } catch(e2) { console.error('saveSettings cloud:', e2); }
        // 3. Save BiBase settings (independent)
        try { saveBibSettings(); } catch(e3) { console.error('saveSettings bib:', e3); }
        // 4. Save PERDIR submenu config
        try {
            var perdirCfg = [];
            document.querySelectorAll('#perdir-submenu-list .order-item').forEach(function(item) {
                var menuId = item.dataset.menuid;
                var chk = item.querySelector('input[type=checkbox]');
                perdirCfg.push({id: menuId, visible: chk ? chk.checked : true});
            });
            if (perdirCfg.length) {
                var ms2 = JSON.parse(localStorage.getItem('pilote_master_settings') || '{}');
                ms2.perdirMenus = perdirCfg;
                localStorage.setItem('pilote_master_settings', JSON.stringify(ms2));
            }
        } catch(e4) { console.error('saveSettings perdir:', e4); }
        // 5. Apply changes (each independent)
        try { updateModuleVisibility(); } catch(e) {}
        try { updateBrandLogo(); } catch(e) {}
        try { applyNavOrder(); } catch(e) {}
        try { pushSettingsToAllModules(); } catch(e) {}
        try {
            var bibFrame = document.getElementById('frame-bibase');
            if (bibFrame && bibFrame.contentWindow) {
                var bibData = JSON.parse(localStorage.getItem('bibase_establishment') || '{}');
                bibFrame.contentWindow.postMessage({type: 'bibase-settings', data: bibData}, '*');
            }
        } catch(e) {}
        closeSettings();
        if (_lfDirHandle) { lfMarkDirty(); setTimeout(function(){ lfWriteToFolder(); }, 500); }
    }


    function updateBrandLogo() {
        const s = getSettings();
        const brandLetter = document.getElementById('brandLetter');
        const brandLogo = document.getElementById('brandLogo');
        const welcomeLetter = document.getElementById('welcomeLetter');
        const welcomeLogoImg = document.getElementById('welcomeLogoImg');
        const welcomeSubtitle = document.getElementById('welcomeSubtitle');
        const bottomInfo = document.getElementById('bottomBarInfo');

        const brandIconEl = document.getElementById('brandIcon');
        const welcomeLogoEl = document.getElementById('welcomeLogo');
        if (s.logoSrc) {
                updateFavicon(s.logoSrc);
            brandLetter.style.display = 'none';
            brandLogo.src = s.logoSrc;
            brandLogo.style.display = 'block';
            brandIconEl.style.background = 'none';
            brandIconEl.style.boxShadow = 'none';
            welcomeLetter.style.display = 'none';
            welcomeLogoImg.src = s.logoSrc;
            welcomeLogoImg.style.display = 'block';
            welcomeLogoEl.style.background = 'none';
            welcomeLogoEl.style.boxShadow = 'none';
            welcomeLogoEl.style.borderRadius = '0';
            welcomeLogoEl.style.width = 'auto';
            welcomeLogoEl.style.height = 'auto';
        } else {
            brandLetter.style.display = '';
            brandLogo.style.display = 'none';
            brandIconEl.style.background = '';
            brandIconEl.style.boxShadow = '';
            welcomeLetter.style.display = '';
            welcomeLogoImg.style.display = 'none';
            welcomeLogoEl.style.background = '';
            welcomeLogoEl.style.boxShadow = '';
        }
        // Update school name in subtitle & bottom bar
        if (s.school) {
            welcomeSubtitle.textContent = s.school + ' — Suite de direction';
            bottomInfo.textContent = 'Pilote Suite — ' + s.school;
        } else {
            welcomeSubtitle.textContent = 'Suite d\'outils pour la direction d\'établissement';
            bottomInfo.textContent = 'CADIR Suite — Direction';
        }
    }

    function handleSettingsImage(input, type) {
        const file = input.files[0]; if (!file) return;
        const reader = new FileReader();
        reader.onload = function(e) {
            document.getElementById('img-' + type).src = e.target.result;
            document.getElementById('img-' + type).style.display = 'block';
            document.getElementById('ph-' + type).style.display = 'none';
        };
        reader.readAsDataURL(file);
    }

    function clearImage(type) {
        document.getElementById('img-' + type).style.display = 'none';
        document.getElementById('img-' + type).src = '';
        document.getElementById('ph-' + type).style.display = '';
    }

    function openSettings() {
        renderPerdirSubmenus(); loadSettingsUI(); loadBibSettingsUI();
        if (typeof lfInitMode === 'function') lfInitMode();
        document.getElementById('settingsOverlay').classList.add('open'); }
    
    var _gcalAccessToken = null;
    var _gcalCalsData = [];

    function toggleGcal() {
        var checked = document.getElementById('s-gcal').checked;
        document.getElementById('gcal-opts').style.display = checked ? 'block' : 'none';
        var s = getSettings();
        s.gcalEnabled = checked;
        localStorage.setItem(STORAGE_KEY, JSON.stringify(s));
        pushSettingsToAllModules();
    }

    function gcalAuth() {
        if (window.location.protocol === 'file:') {
            var iframe = document.querySelector('.module-frame.active');
            if (iframe && iframe.contentWindow && (function(){try{return iframe.contentWindow.location.protocol==='file:';}catch(e){return false;}})()) {}
            alert('\u26a0 Google Agenda nécessite un serveur web local.\n\nPour lancer :\n1. Ouvrez un terminal dans le dossier contenant PILOTE_Suite.html\n2. Tapez : python3 -m http.server 8080\n3. Ouvrez http://localhost:8080/PILOTE_Suite.html\n\nL\'authentification OAuth2 ne fonctionne pas depuis file://.');
            document.getElementById('gcal-auth-status').innerHTML = '<span style=\"color:#e74c3c\"><i class=\"fas fa-exclamation-triangle\"></i> Nécessite http://localhost</span>';
            return;
        }
        var clientId = document.getElementById('s-gcal-clientid').value.trim();
        if (!clientId) { alert('Veuillez saisir un Client ID OAuth2.'); return; }
        if (typeof google === 'undefined' || !google.accounts || !google.accounts.oauth2) {
            alert('Biblioth\u00e8que Google Identity Services non charg\u00e9e. V\u00e9rifiez votre connexion internet.');
            return;
        }
        document.getElementById('gcal-auth-status').innerHTML = '<i class="fas fa-spinner fa-spin"></i> Connexion...';
        var tokenClient = google.accounts.oauth2.initTokenClient({
            client_id: clientId,
            scope: 'https://www.googleapis.com/auth/calendar.readonly',
            callback: function(resp) {
                if (resp.error) {
                    document.getElementById('gcal-auth-status').innerHTML = '<span style="color:#e74c3c;"><i class="fas fa-times"></i> ' + (resp.error_description || resp.error) + '</span>';
                    return;
                }
                _gcalAccessToken = resp.access_token;
                document.getElementById('gcal-auth-status').innerHTML = '<span style="color:#34a853;"><i class="fas fa-check"></i> Connect\u00e9</span>';
                document.getElementById('btn-gcal-auth').innerHTML = '<i class="fas fa-check-circle"></i> Connect\u00e9';
                document.getElementById('btn-gcal-auth').style.background = '#34a853';
                fetchGcalList();
            }
        });
        tokenClient.requestAccessToken();
    }

    function fetchGcalList() {
        if (!_gcalAccessToken) return;
        var div = document.getElementById('gcal-list');
        div.innerHTML = '<span style="color:#888;font-size:.78rem;"><i class="fas fa-spinner fa-spin"></i> Chargement...</span>';
        fetch('https://www.googleapis.com/calendar/v3/users/me/calendarList', {
            headers: { 'Authorization': 'Bearer ' + _gcalAccessToken }
        })
        .then(function(r) { if (!r.ok) throw new Error('Erreur ' + r.status); return r.json(); })
        .then(function(data) {
            if (!data.items || !data.items.length) { div.innerHTML = '<span style="color:#e74c3c;">Aucun agenda.</span>'; return; }
            var s = getSettings();
            _gcalCalsData = data.items.map(function(c) { return {id: c.id, name: c.summary, bg: c.backgroundColor || '#4285f4', primary: c.primary || false}; });
            s.gcalCals = _gcalCalsData;
            localStorage.setItem(STORAGE_KEY, JSON.stringify(s));
            renderGcalList(_gcalCalsData, s.gcalSel || []);
            document.getElementById('gcal-list-wrap').style.display = 'block';
        })
        .catch(function(err) {
            div.innerHTML = '<span style="color:#e74c3c;font-size:.78rem;"><i class="fas fa-exclamation-triangle"></i> ' + err.message + '</span>';
        });
    }

    function renderGcalList(cals, sel) {
        var div = document.getElementById('gcal-list');
        if (!cals || !cals.length) { div.innerHTML = ''; return; }
        var h = '';
        cals.forEach(function(c) {
            var checked = sel.indexOf(c.id) >= 0 || (sel.length === 0 && c.primary);
            h += '<label style="display:flex;align-items:center;gap:8px;padding:5px 8px;font-size:.78rem;cursor:pointer;border-radius:6px;">';
            h += '<input type="checkbox" class="gcal-chk" value="' + c.id + '" ' + (checked ? 'checked' : '') + ' style="accent-color:' + c.bg + ';">';
            h += '<span style="width:12px;height:12px;border-radius:3px;background:' + c.bg + ';flex-shrink:0;"></span>';
            h += '<span>' + c.name + (c.primary ? ' <small style="color:#888;">(principal)</small>' : '') + '</span>';
            h += '</label>';
        });
        div.innerHTML = h;
        document.getElementById('gcal-list-wrap').style.display = 'block';
    }

    function getGcalSel() { return Array.from(document.querySelectorAll('.gcal-chk:checked')).map(function(c) { return c.value; }); }

    function gcalFetchEvents() {
        var sel = getGcalSel();
        if (!sel.length) { alert('S\u00e9lectionnez au moins un agenda.'); return; }
        var useOAuth = !!_gcalAccessToken;
        var apiKey = document.getElementById('s-gcal-key') ? document.getElementById('s-gcal-key').value.trim() : '';
        if (!useOAuth && !apiKey) { alert('Connectez-vous via OAuth2 ou saisissez une cl\u00e9 API.'); return; }

        var statusEl = document.getElementById('gcal-events-status');
        statusEl.innerHTML = '<i class="fas fa-spinner fa-spin"></i> R\u00e9cup\u00e9ration...';

        var now = new Date();
        var start = new Date(now.getFullYear(), now.getMonth() - 2, 1).toISOString();
        var end = new Date(now.getFullYear(), now.getMonth() + 4, 0).toISOString();

        var calMap = {};
        (_gcalCalsData.length ? _gcalCalsData : (getSettings().gcalCals || [])).forEach(function(c) { calMap[c.id] = c; });

        var promises = sel.map(function(calId) {
            var url = 'https://www.googleapis.com/calendar/v3/calendars/' + encodeURIComponent(calId) + '/events?timeMin=' + encodeURIComponent(start) + '&timeMax=' + encodeURIComponent(end) + '&singleEvents=true&orderBy=startTime&maxResults=500';
            var opts = {};
            if (useOAuth) { opts.headers = { 'Authorization': 'Bearer ' + _gcalAccessToken }; }
            else { url += '&key=' + apiKey; }
            return fetch(url, opts).then(function(r) { return r.ok ? r.json() : {items:[]}; }).catch(function() { return {items:[]}; });
        });

        Promise.all(promises).then(function(results) {
            var events = [];
            results.forEach(function(data, i) {
                var calId = sel[i];
                var calInfo = calMap[calId] || {name: calId, bg: '#4285f4'};
                (data.items || []).forEach(function(ev) {
                    if (!ev.start) return;
                    var startDate = ev.start.date || (ev.start.dateTime ? ev.start.dateTime.split('T')[0] : null);
                    if (!startDate) return;
                    var startTime = ev.start.dateTime ? ev.start.dateTime.split('T')[1].substring(0, 5) : '';
                    var endTime = ev.end && ev.end.dateTime ? ev.end.dateTime.split('T')[1].substring(0, 5) : '';
                    events.push({ id: ev.id, title: ev.summary || '(sans titre)', date: startDate, time: startTime, endTime: endTime, calName: calInfo.name, color: calInfo.bg, calId: calId });
                });
            });
            events.sort(function(a, b) { return (a.date + ' ' + (a.time || '00:00')).localeCompare(b.date + ' ' + (b.time || '00:00')); });

            var s = getSettings();
            s.gcalEvents = events;
            s.gcalSel = sel;
            localStorage.setItem(STORAGE_KEY, JSON.stringify(s));

            statusEl.innerHTML = '<span style="color:#34a853;"><i class="fas fa-check"></i> ' + events.length + ' \u00e9v\u00e9nement(s) synchronis\u00e9(s)</span>';
            pushGcalToModules();
        });
    }

    
    
    // ═══ OUTLOOK / OFFICE 365 CALENDAR ═══
    var _outlookToken = null;
    var _outlookCals = [];

    function outlookAuth() {
        var clientId = (document.getElementById('s-outlook-clientid').value || '').trim();
        if (!clientId) return alert('Saisissez l\'Application (client) ID');
        var redir = location.origin + location.pathname;
        var scope = 'Calendars.ReadWrite';
        var url = 'https://login.microsoftonline.com/common/oauth2/v2.0/authorize?client_id='+encodeURIComponent(clientId)+'&response_type=token&redirect_uri='+encodeURIComponent(redir)+'&scope='+encodeURIComponent(scope);
        var w = window.open(url, '_blank', 'width=500,height=600');
        var check = setInterval(function() {
            try {
                if (w.closed) { clearInterval(check); return; }
                if (w.location.hash) {
                    var params = new URLSearchParams(w.location.hash.substring(1));
                    var tk = params.get('access_token');
                    if (tk) {
                        _outlookToken = tk;
                        w.close(); clearInterval(check);
                        document.getElementById('outlook-auth-status').innerHTML = '<span style="color:#0078d4"><i class="fas fa-check-circle"></i> Connecté</span>';
                        document.getElementById('btn-outlook-auth').innerHTML = '<i class="fas fa-check-circle"></i> Connecté';
                        document.getElementById('btn-outlook-auth').style.background = '#0078d4';
                        outlookFetchCalendars();
                    }
                }
            } catch(e) {}
        }, 500);
    }

    function outlookFetchCalendars() {
        if (!_outlookToken) return;
        fetch('https://graph.microsoft.com/v1.0/me/calendars', {
            headers: { 'Authorization': 'Bearer ' + _outlookToken }
        }).then(function(r) { return r.json(); }).then(function(data) {
            _outlookCals = (data.value || []).map(function(c) { return {id:c.id, name:c.name, color:c.hexColor||'#0078d4'}; });
            var div = document.getElementById('outlook-cal-list');
            var s = getSettings();
            var sel = s.outlookSel || [];
            div.innerHTML = _outlookCals.map(function(c) {
                var chk = sel.indexOf(c.id) >= 0 || sel.length === 0 ? 'checked' : '';
                return '<label style="display:flex;align-items:center;gap:6px;margin:4px 0;font-size:.78rem;cursor:pointer;"><input type="checkbox" class="outlook-cal-chk" value="'+c.id+'" '+chk+'><span style="width:10px;height:10px;border-radius:50%;background:'+(c.color||'#0078d4')+'"></span>'+c.name+'</label>';
            }).join('');
            document.getElementById('outlook-cal-list-wrap').style.display = 'block';
        }).catch(function(err) {
            document.getElementById('outlook-auth-status').innerHTML = '<span style="color:#e74c3c">'+err.message+'</span>';
        });
    }

    function getOutlookSel() {
        var chks = document.querySelectorAll('.outlook-cal-chk:checked');
        return Array.from(chks).map(function(c) { return c.value; });
    }

    function outlookFetchEvents() {
        var sel = getOutlookSel();
        if (!sel.length) { alert('Sélectionnez au moins un agenda Outlook.'); return; }
        if (!_outlookToken) { alert('Connectez Outlook d\'abord.'); return; }

        var statusEl = document.getElementById('outlook-events-status');
        statusEl.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Récupération...';

        var now = new Date();
        var start = new Date(now.getFullYear(), now.getMonth() - 2, 1).toISOString();
        var end = new Date(now.getFullYear(), now.getMonth() + 4, 0).toISOString();

        var calMap = {};
        _outlookCals.forEach(function(c) { calMap[c.id] = c; });

        var promises = sel.map(function(calId) {
            var url = 'https://graph.microsoft.com/v1.0/me/calendars/' + encodeURIComponent(calId) + '/events?$select=subject,start,end,id&$filter=start/dateTime ge \''+start+'\' and start/dateTime le \''+end+'\'&$top=500&$orderby=start/dateTime';
            return fetch(url, {
                headers: { 'Authorization': 'Bearer ' + _outlookToken, 'Prefer': 'outlook.timezone="Europe/Paris"' }
            }).then(function(r) { return r.ok ? r.json() : {value:[]}; }).catch(function() { return {value:[]}; });
        });

        Promise.all(promises).then(function(results) {
            var events = [];
            results.forEach(function(data, i) {
                var calId = sel[i];
                var calInfo = calMap[calId] || {name:'Outlook', color:'#0078d4'};
                (data.value || []).forEach(function(ev) {
                    if (!ev.start) return;
                    var startDT = ev.start.dateTime || '';
                    var startDate = startDT.split('T')[0];
                    var startTime = startDT.indexOf('T') >= 0 ? startDT.split('T')[1].substring(0,5) : '';
                    var endDT = ev.end ? (ev.end.dateTime||'') : '';
                    var endTime = endDT.indexOf('T') >= 0 ? endDT.split('T')[1].substring(0,5) : '';
                    if (startTime === '00:00' && endTime === '00:00') { startTime = ''; endTime = ''; }
                    events.push({id:ev.id, title:ev.subject||'(sans titre)', date:startDate, time:startTime, endTime:endTime, calName:calInfo.name, color:calInfo.color, calId:calId});
                });
            });

            var s = getSettings();
            s.outlookEvents = events;
            s.outlookSel = sel;
            s.outlookEnabled = true;
            localStorage.setItem(STORAGE_KEY, JSON.stringify(s));

            statusEl.innerHTML = '<span style="color:#0078d4"><i class="fas fa-check"></i> '+events.length+' événement(s)</span>';
            pushOutlookToModules();
        });
    }

    function pushOutlookToModules() {
        var s = getSettings();
        var frame = document.getElementById('frame-perdir');
        if (frame && frame.contentWindow) {
            frame.contentWindow.postMessage({ type: 'pilote-outlook', data: {
                outlookEvents: s.outlookEvents || [],
                outlookCals: _outlookCals || [],
                outlookSel: s.outlookSel || [],
                outlookEnabled: s.outlookEnabled || false
            }}, '*');
        }
    }

    // Outlook CRUD
    function outlookAddEvent(data) {
        if (!_outlookToken) { alert('Outlook non connecté'); return; }
        var body = { subject: data.title };
        if (data.time) {
            body.start = { dateTime: data.date + 'T' + data.time + ':00', timeZone: 'Europe/Paris' };
            body.end = { dateTime: data.date + 'T' + (data.endTime || data.time) + ':00', timeZone: 'Europe/Paris' };
        } else {
            body.isAllDay = true;
            body.start = { dateTime: data.date + 'T00:00:00', timeZone: 'Europe/Paris' };
            body.end = { dateTime: data.date + 'T23:59:00', timeZone: 'Europe/Paris' };
        }
        fetch('https://graph.microsoft.com/v1.0/me/calendars/' + encodeURIComponent(data.calId) + '/events', {
            method: 'POST', headers: { 'Authorization': 'Bearer ' + _outlookToken, 'Content-Type': 'application/json' }, body: JSON.stringify(body)
        }).then(function(r) { if (!r.ok) throw new Error(r.status); notifyPerdirCrudOk(); outlookFetchEvents(); })
        .catch(function(err) { alert('Erreur Outlook: ' + err.message); });
    }
    function outlookUpdateEvent(data) {
        if (!_outlookToken) { alert('Outlook non connecté'); return; }
        var body = { subject: data.title };
        if (data.time) {
            body.start = { dateTime: data.date + 'T' + data.time + ':00', timeZone: 'Europe/Paris' };
            body.end = { dateTime: data.date + 'T' + (data.endTime || data.time) + ':00', timeZone: 'Europe/Paris' };
        } else {
            body.isAllDay = true;
            body.start = { dateTime: data.date + 'T00:00:00', timeZone: 'Europe/Paris' };
            body.end = { dateTime: data.date + 'T23:59:00', timeZone: 'Europe/Paris' };
        }
        fetch('https://graph.microsoft.com/v1.0/me/events/' + encodeURIComponent(data.eventId), {
            method: 'PATCH', headers: { 'Authorization': 'Bearer ' + _outlookToken, 'Content-Type': 'application/json' }, body: JSON.stringify(body)
        }).then(function(r) { if (!r.ok) throw new Error(r.status); notifyPerdirCrudOk(); outlookFetchEvents(); })
        .catch(function(err) { alert('Erreur Outlook: ' + err.message); });
    }
    function outlookDeleteEvent(data) {
        if (!_outlookToken) { alert('Outlook non connecté'); return; }
        fetch('https://graph.microsoft.com/v1.0/me/events/' + encodeURIComponent(data.eventId), {
            method: 'DELETE', headers: { 'Authorization': 'Bearer ' + _outlookToken }
        }).then(function(r) { if (r.status !== 204 && !r.ok) throw new Error(r.status); notifyPerdirCrudOk(); outlookFetchEvents(); })
        .catch(function(err) { alert('Erreur Outlook: ' + err.message); });
    }

    // ═══ GOOGLE CALENDAR CRUD ═══
    function gcalAddEvent(data) {
        if (!_gcalAccessToken) { alert('Google Agenda non connecté'); return; }
        var body = { summary: data.title };
        if (data.time) {
            body.start = { dateTime: data.date + 'T' + data.time + ':00', timeZone: 'Europe/Paris' };
            body.end = { dateTime: data.date + 'T' + (data.endTime || data.time) + ':00', timeZone: 'Europe/Paris' };
        } else {
            body.start = { date: data.date };
            body.end = { date: data.date };
        }
        fetch('https://www.googleapis.com/calendar/v3/calendars/' + encodeURIComponent(data.calId) + '/events', {
            method: 'POST',
            headers: { 'Authorization': 'Bearer ' + _gcalAccessToken, 'Content-Type': 'application/json' },
            body: JSON.stringify(body)
        }).then(function(r) {
            if (!r.ok) throw new Error('Erreur ' + r.status);
            return r.json();
        }).then(function() {
            notifyPerdirCrudOk();
            gcalFetchEvents();
        }).catch(function(err) { alert('Erreur ajout Google: ' + err.message); });
    }

    function gcalUpdateEvent(data) {
        if (!_gcalAccessToken) { alert('Google Agenda non connecté'); return; }
        var calId = data.calId;
        // If no calId, try to find from selected calendars
        if (!calId) {
            var sel = getGcalSel();
            calId = sel.length ? sel[0] : 'primary';
        }
        var body = { summary: data.title };
        if (data.time) {
            body.start = { dateTime: data.date + 'T' + data.time + ':00', timeZone: 'Europe/Paris' };
            body.end = { dateTime: data.date + 'T' + (data.endTime || data.time) + ':00', timeZone: 'Europe/Paris' };
        } else {
            body.start = { date: data.date };
            body.end = { date: data.date };
        }
        fetch('https://www.googleapis.com/calendar/v3/calendars/' + encodeURIComponent(calId) + '/events/' + encodeURIComponent(data.eventId), {
            method: 'PATCH',
            headers: { 'Authorization': 'Bearer ' + _gcalAccessToken, 'Content-Type': 'application/json' },
            body: JSON.stringify(body)
        }).then(function(r) {
            if (!r.ok) throw new Error('Erreur ' + r.status);
            notifyPerdirCrudOk();
            gcalFetchEvents();
        }).catch(function(err) { alert('Erreur modification Google: ' + err.message); });
    }

    function gcalDeleteEvent(data) {
        if (!_gcalAccessToken) { alert('Google Agenda non connecté'); return; }
        var calId = data.calId;
        if (!calId) {
            var sel = getGcalSel();
            calId = sel.length ? sel[0] : 'primary';
        }
        fetch('https://www.googleapis.com/calendar/v3/calendars/' + encodeURIComponent(calId) + '/events/' + encodeURIComponent(data.eventId), {
            method: 'DELETE',
            headers: { 'Authorization': 'Bearer ' + _gcalAccessToken }
        }).then(function(r) {
            if (r.status !== 204 && !r.ok) throw new Error('Erreur ' + r.status);
            notifyPerdirCrudOk();
            gcalFetchEvents();
        }).catch(function(err) { alert('Erreur suppression Google: ' + err.message); });
    }

    function notifyPerdirCrudOk() {
        var fr = document.getElementById('frame-perdir');
        if (fr && fr.contentWindow) {
            fr.contentWindow.postMessage({type:'pilote-gcal-crud-ok'}, '*');
        }
    }

    function pushGcalToModules() {
        var s = getSettings();
        var frame = document.getElementById('frame-perdir');
        if (frame && frame.contentWindow) {
            frame.contentWindow.postMessage({ type: 'pilote-settings', data: {
                school: s.school || '', name: s.name || '', role: s.role || '', city: s.city || '',
                zone: s.zone || 'B', logoSrc: s.logoSrc || '', signSrc: s.signSrc || '',
                teachers: s.teachers || [], students: s.students || [],
                gcalEnabled: s.gcalEnabled || false,
                gcalEvents: s.gcalEvents || [],
                gcalCalendars: s.gcalCals || [],
                gcalSel: s.gcalSel || []
            }}, '*');
        }
    }

    function addManualCal() {
        var id = document.getElementById('gcal-manual-id').value.trim();
        var name = document.getElementById('gcal-manual-name').value.trim() || id;
        if (!id) { alert('Saisissez l\'ID du calendrier.'); return; }
        var s = getSettings();
        if (!s.gcalCals) s.gcalCals = [];
        if (s.gcalCals.find(function(c) { return c.id === id; })) { alert('D\u00e9j\u00e0 ajout\u00e9.'); return; }
        var colors = ['#4285f4', '#0b8043', '#d50000', '#f09300', '#7986cb', '#8e24aa', '#039be5', '#616161'];
        var bg = colors[s.gcalCals.length % colors.length];
        s.gcalCals.push({ id: id, name: name, bg: bg, manual: true });
        if (!s.gcalSel) s.gcalSel = [];
        s.gcalSel.push(id);
        localStorage.setItem(STORAGE_KEY, JSON.stringify(s));
        _gcalCalsData = s.gcalCals;
        renderGcalList(s.gcalCals, s.gcalSel);
        renderManualList(s.gcalCals);
        document.getElementById('gcal-manual-id').value = '';
        document.getElementById('gcal-manual-name').value = '';
    }

    function renderManualList(cals) {
        var div = document.getElementById('gcal-manual-list');
        if (!div) return;
        var manuals = (cals || []).filter(function(c) { return c.manual; });
        if (!manuals.length) { div.innerHTML = ''; return; }
        var h = '';
        manuals.forEach(function(c) {
            h += '<div style="display:flex;align-items:center;gap:6px;font-size:.72rem;padding:2px 0;">';
            h += '<span style="width:8px;height:8px;border-radius:50%;background:' + c.bg + ';"></span>' + c.name;
            h += ' <button onclick="removeManualCal(this.dataset.cid)" data-cid="' + c.id + '" style="background:none;border:none;color:#e74c3c;cursor:pointer;font-size:.72rem;">&times;</button></div>';
        });
        div.innerHTML = h;
    }

    function removeManualCal(id) {
        var s = getSettings();
        s.gcalCals = (s.gcalCals || []).filter(function(c) { return c.id !== id; });
        s.gcalSel = (s.gcalSel || []).filter(function(x) { return x !== id; });
        localStorage.setItem(STORAGE_KEY, JSON.stringify(s));
        _gcalCalsData = s.gcalCals;
        renderGcalList(s.gcalCals, s.gcalSel);
        renderManualList(s.gcalCals);
    }

    function closeSettings() { document.getElementById('settingsOverlay').classList.remove('open'); }

    // ═══ EXPORT / IMPORT SETTINGS ═══
    function exportSettings() {
        const s = getSettings();
        const json = JSON.stringify(s, null, 2);
        const blob = new Blob([json], { type: 'application/json' });
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        const date = new Date().toISOString().split('T')[0];
        a.download = 'pilote_parametres_' + date + '.json';
        document.body.appendChild(a);
        a.click();
        document.body.removeChild(a);
        URL.revokeObjectURL(url);
    }

    function importSettings(input) {
        const file = input.files[0]; if (!file) return;
        const reader = new FileReader();
        reader.onload = function(e) {
            try {
                const imported = JSON.parse(e.target.result);
                // Validate it's an object
                if (typeof imported !== 'object' || Array.isArray(imported)) throw new Error('Format invalide');
                // Merge: imported settings overwrite current
                localStorage.setItem(STORAGE_KEY, JSON.stringify(imported));
                loadSettingsUI();
                applyNavOrder();
                updateBrandLogo();
                pushSettingsToAllModules();
                alert('✅ Paramètres importés avec succès !');
            } catch(err) {
                alert('❌ Erreur lors de l\'import : ' + err.message);
            }
        };
        reader.readAsText(file);
        input.value = ''; // reset for re-import
    }

    // ═══ DRAG & DROP ORDER ═══
    function renderOrderList() {
        const order = getNavOrder();
        const list = document.getElementById('orderList');
        list.innerHTML = '';
        order.forEach((id) => {
            const meta = MODULE_META[id];
            const li = document.createElement('li');
            li.className = 'order-item';
            li.setAttribute('draggable', 'true');
            li.dataset.module = id;
            li.innerHTML = `
                <span class="order-grip"><i class="fas fa-grip-vertical"></i></span>
                <span class="order-icon" style="background:${meta.color}"><i class="${meta.icon}"></i></span>
                <span class="order-label">${meta.label} <span style="color:#999;font-weight:400;font-size:0.72rem;">— ${meta.sublabel}</span></span>
            `;
            li.addEventListener('dragstart', () => { li.classList.add('dragging'); });
            li.addEventListener('dragend', () => { li.classList.remove('dragging'); document.querySelectorAll('.order-item').forEach(el => el.classList.remove('drag-over')); });
            li.addEventListener('dragover', (e) => { e.preventDefault(); li.classList.add('drag-over'); });
            li.addEventListener('dragleave', () => { li.classList.remove('drag-over'); });
            li.addEventListener('drop', (e) => {
                e.preventDefault();
                li.classList.remove('drag-over');
                const dragging = list.querySelector('.dragging');
                if (dragging && dragging !== li) {
                    const items = [...list.children];
                    const fromIdx = items.indexOf(dragging);
                    const toIdx = items.indexOf(li);
                    if (fromIdx < toIdx) li.after(dragging); else li.before(dragging);
                }
            });
            list.appendChild(li);
        });
    }

    function getCurrentOrderFromList() {
        return [...document.querySelectorAll('#orderList .order-item')].map(el => el.dataset.module);
    }

    function applyNavOrder() {
        const order = getNavOrder();
        const container = document.getElementById('navItems');
        const items = {};
        container.querySelectorAll('.nav-item').forEach(el => { items[el.dataset.module] = el; });
        // Also grab separators
        const seps = container.querySelectorAll('.nav-sep');
        while (container.firstChild) container.removeChild(container.firstChild);
        order.forEach((id) => { if (items[id]) container.appendChild(items[id]); });

        // Also reorder welcome cards
        const grid = document.getElementById('moduleGrid');
        const cards = {};
        grid.querySelectorAll('.module-card').forEach(c => { cards[c.dataset.m] = c; });
        while (grid.firstChild) grid.removeChild(grid.firstChild);
        order.forEach(id => { if (cards[id]) grid.appendChild(cards[id]); });
    }

    // ═══ EXCEL IMPORT (Data Panel) ═══
    function handleExcelImport(input, type) {
        const files = Array.from(input.files);
        if (!files.length) return;

        // Ask whether to merge or replace if data already exists
        const s = getSettings();
        const existing = s[type] || [];
        let mergeMode = false;
        if (existing.length > 0 && files.length >= 1) {
            mergeMode = confirm('Des données existent déjà (' + existing.length + ' entrées).\n\nOK = Ajouter aux données existantes\nAnnuler = Remplacer les données');
        }

        const label = document.getElementById('lbl-' + type);
        if (label) label.textContent = 'Lecture de ' + files.length + ' fichier(s)...';

        let allData = mergeMode ? existing.slice() : [];
        let processed = 0;
        let errors = [];

        files.forEach(function(file, idx) {
            const reader = new FileReader();
            reader.onload = function(e) {
                try {
                    const wb = XLSX.read(e.target.result, { type: 'array' });
                    const sheet = wb.Sheets[wb.SheetNames[0]];
                    const rows = XLSX.utils.sheet_to_json(sheet, { defval: '' });
                    allData = allData.concat(rows);
                } catch(err) {
                    errors.push(file.name + ': ' + err.message);
                }
                processed++;
                if (processed === files.length) {
                    // All files read — save
                    const s2 = getSettings();
                    s2[type] = allData;
                    localStorage.setItem(STORAGE_KEY, JSON.stringify(s2));
                    refreshDataUI();
                    pushSettingsToAllModules();
                    if (errors.length) alert('Erreurs sur certains fichiers :\n' + errors.join('\n'));
                    if (label) label.textContent = files.length + ' fichier(s) chargé(s) ✓';
                }
            };
            reader.readAsArrayBuffer(file);
        });
    }

    function clearExcelData(type) {
        if (!confirm('Supprimer les données importées ?')) return;
        const s = getSettings();
        delete s[type];
        localStorage.setItem(STORAGE_KEY, JSON.stringify(s));
        refreshDataUI();
        pushSettingsToAllModules();
    }

    function refreshDataUI() {
        const s = getSettings();
        ['teachers', 'students'].forEach(type => {
            const data = s[type];
            const hasData = data && data.length > 0;
            const label = type === 'teachers' ? 'enseignant' : 'élève';
            document.getElementById('drop-' + type).classList.toggle('loaded', hasData);
            document.getElementById('lbl-' + type).textContent = hasData ? (data.length + ' entrées chargées ✓') : 'Cliquez ou glissez un ou plusieurs fichiers Excel';
            document.getElementById('actions-' + type).style.display = hasData ? 'flex' : 'none';
            document.getElementById('badge-' + type).textContent = hasData ? (data.length + ' ' + label + 's') : 'Non chargé';
            document.getElementById('badge-' + type).classList.toggle('has-data', hasData);
            document.getElementById('count-' + type).innerHTML = hasData ? ('<i class="fas fa-check-circle"></i> <strong>' + data.length + '</strong> ' + label + '(s) importé(s)') : '';
            if (!hasData) { document.getElementById('preview-' + type).style.display = 'none'; document.getElementById('preview-' + type).innerHTML = ''; }
        });
    }

    function togglePreview(type) {
        const el = document.getElementById('preview-' + type);
        if (el.style.display === 'none') {
            const s = getSettings();
            const data = s[type];
            if (!data || !data.length) return;
            const cols = Object.keys(data[0]);
            let html = '<table><thead><tr>' + cols.map(c => '<th>' + c + '</th>').join('') + '</tr></thead><tbody>';
            data.slice(0, 50).forEach(row => {
                html += '<tr>' + cols.map(c => '<td>' + (row[c] || '') + '</td>').join('') + '</tr>';
            });
            if (data.length > 50) html += '<tr><td colspan="' + cols.length + '" style="text-align:center;color:#999;font-style:italic">… et ' + (data.length - 50) + ' autres lignes</td></tr>';
            html += '</tbody></table>';
            el.innerHTML = html;
            el.style.display = 'block';
        } else {
            el.style.display = 'none';
        }
    }

    // ═══ DATA PANEL ═══
    function openDataPanel() {
        closeDataPanel();
        document.querySelectorAll('.nav-item').forEach(el => el.classList.remove('active'));
        const navItem = document.querySelector('.nav-item[data-module="data"]');
        if (navItem) navItem.classList.add('active');
        document.getElementById('welcome').classList.add('hidden');
        document.querySelectorAll('.module-frame').forEach(f => f.classList.remove('active'));
        document.getElementById('dataPanel').classList.add('active');
        currentModule = 'data';
        document.title = 'PILOTE — Données';
        refreshDataUI();
    }

    function closeDataPanel() { document.getElementById('dataPanel').classList.remove('active'); }

    // ═══ PUSH TO MODULES ═══
    function pushSettingsToModule(name) {
        const frame = document.getElementById('frame-' + name);
        if (!frame || !frame.contentWindow) return;
        const s = getSettings();
        frame.contentWindow.postMessage({
            type: 'pilote-settings',
            data: { school: s.school||'', name: s.name||'', role: s.role||'', city: s.city||'', zone: s.zone||'B', logoSrc: s.logoSrc||'', signSrc: s.signSrc||'', teachers: s.teachers||[], students: s.students||[], gcalEnabled: s.gcalEnabled||false, gcalEvents: s.gcalEvents||[] }
        }, '*');
    }

    function pushSettingsToAllModules() { loadedModules.forEach(name => pushSettingsToModule(name)); }

    window.addEventListener('message', function(e) {
        if (e.data && e.data.type === 'pilote-gcal-refresh') { gcalFetchEvents(); return; }
        if (e.data && e.data.type === 'pilote-gcal-add') { gcalAddEvent(e.data); return; }
        if (e.data && e.data.type === 'pilote-gcal-update') { gcalUpdateEvent(e.data); return; }
        if (e.data && e.data.type === 'pilote-gcal-delete') { gcalDeleteEvent(e.data); return; }
        if (e.data && e.data.type === 'pilote-outlook-add') { outlookAddEvent(e.data); return; }
        if (e.data && e.data.type === 'pilote-outlook-update') { outlookUpdateEvent(e.data); return; }
        if (e.data && e.data.type === 'pilote-outlook-delete') { outlookDeleteEvent(e.data); return; }
        if (e.data && e.data.type === 'pilote-outlook-refresh') { outlookFetchEvents(); return; }
        if (e.data && e.data.type === 'pilote-module-ready' && e.data.module) {
            setTimeout(() => { pushSettingsToModule(e.data.module); if(typeof pushOutlookToModules==='function') pushOutlookToModules(); }, 200);
        }
    });

    // ═══ MODULE VISIBILITY ═══
    function updateModuleVisibility() {
        moduleNames.forEach(m => {
            const visible = document.getElementById('tog-' + m).checked;
            const navItem = document.querySelector('.nav-item[data-module="' + m + '"]');
            if (navItem) navItem.classList.toggle('hidden-module', !visible);
            const card = document.querySelector('.module-card[data-m="' + m + '"]');
            if (card) card.classList.toggle('card-hidden', !visible);
            if (!visible && currentModule === m) goHome();
        });
    }

    // ═══ MODULE LOADING ═══
    function b64toBlob(b64) {
        const bin = atob(b64);
        const bytes = new Uint8Array(bin.length);
        for (let i = 0; i < bin.length; i++) bytes[i] = bin.charCodeAt(i);
        return URL.createObjectURL(new Blob([bytes], { type: 'text/html; charset=utf-8' }));
    }

    
    // ═══ KEYBOARD SHORTCUTS ═══
    document.addEventListener('keydown', function(e) {
        // Only trigger with Ctrl (not inside iframes)
        if (!e.ctrlKey || e.shiftKey || e.altKey || e.metaKey) return;
        var key = e.key.toLowerCase();
        var map = {
            'p': 'perdir',
            'e': 'exam',
            'o': 'oral',
            'a': 'aed',
            'b': 'bibase',
            'd': 'data'
        };
        if (map[key]) {
            e.preventDefault();
            e.stopPropagation();
            loadModule(map[key]);
        }
    });

    // Also listen for shortcuts from within iframes
    window.addEventListener('message', function(e) {
        if (e.data && e.data.type === 'pilote-shortcut') {
            var map = {'p':'perdir','e':'exam','o':'oral','a':'aed','d':'data'};
            if (map[e.data.key]) loadModule(map[e.data.key]);
        }
    });

    function loadModule(name) {
        if (name === 'data') { openDataPanel(); return; }
        const s = getSettings();
        if (s['show_' + name] === false) return;
        closeDataPanel();
        document.querySelectorAll('.nav-item').forEach(el => el.classList.remove('active'));
        const navItem = document.querySelector('.nav-item[data-module="' + name + '"]');
        if (navItem) navItem.classList.add('active');
        document.getElementById('welcome').classList.add('hidden');
        document.querySelectorAll('.module-frame').forEach(f => f.classList.remove('active'));
        const frame = document.getElementById('frame-' + name);
        if (!loadedModules.has(name)) {
            document.getElementById('loader').classList.add('show');
            if (!blobUrls[name]) blobUrls[name] = b64toBlob(MODULE_DATA[name]);
            frame.src = blobUrls[name];
            frame.onload = () => {
                loadedModules.add(name);
                document.getElementById('loader').classList.remove('show');
                frame.classList.add('active');
                setTimeout(() => pushSettingsToModule(name), 300);
            };
        } else { frame.classList.add('active'); }
        currentModule = name;
        document.title = 'PILOTE — ' + name.toUpperCase();
    }

    function goHome() {
        currentModule = null;
        closeDataPanel();
        document.querySelectorAll('.nav-item').forEach(el => el.classList.remove('active'));
        document.querySelectorAll('.module-frame').forEach(f => f.classList.remove('active'));
        document.getElementById('welcome').classList.remove('hidden');
        document.title = 'PILOTE — Suite de Direction';
    }

    function updateClock() {
        document.getElementById('clock').textContent = new Date().toLocaleDateString('fr-FR', { weekday:'short', day:'numeric', month:'short', hour:'2-digit', minute:'2-digit' });
    }
    updateClock(); setInterval(updateClock, 30000);

    function toggleFullscreen() {
        if (!document.fullscreenElement) document.documentElement.requestFullscreen();
        else document.exitFullscreen();
    }
    // Apply PERDIR submenus when frames load
    document.getElementById('frame-perdir').addEventListener('load', function(){ setTimeout(applyPerdirSubmenus, 500); });

    document.addEventListener('fullscreenchange', () => {
        document.getElementById('fs-icon').className = document.fullscreenElement ? 'fas fa-compress' : 'fas fa-expand';
    });

    document.addEventListener('keydown', (e) => {
        if (e.altKey) {
            const order = getNavOrder();
            switch(e.key) {
                case '1': case '2': case '3': case '4': case '5': case '6': {
                    const idx = parseInt(e.key) - 1;
                    if (order[idx]) { e.preventDefault(); loadModule(order[idx]); }
                    break;
                }
                case '0': e.preventDefault(); goHome(); break;
                case 'p': e.preventDefault(); openSettings(); break;
                case 'd': e.preventDefault(); openDataPanel(); break;
            }
        }
        if (e.key === 'Escape') {
            if (document.getElementById('settingsOverlay').classList.contains('open')) closeSettings();
            else if (currentModule) goHome();
        }
    });

    // ═══ INIT ═══
    loadSettingsUI();
    applyNavOrder();
    
    // ═══ ACCORDION TOGGLE ═══
    
    
    // ═══ PERDIR SUBMENUS MANAGEMENT ═══
    var PERDIR_MENUS = [
        {id:'menu2', icon:'fa-check-square', label:'To Do List', color:'#3498db'},
        {id:'menu3', icon:'fa-calendar-alt', label:'Calendrier', color:'#e67e22'},
        {id:'menu4', icon:'fa-clipboard-list', label:'Conseil de Direction', color:'#2c3e50'},
        {id:'menu5', icon:'fa-user-graduate', label:'Suivi Élève / Point CPE', color:'#27ae60'},
        {id:'menu6', icon:'fa-comments', label:'Entretiens', color:'#9b59b6'},
        {id:'menu7', icon:'fa-users', label:'Réunions', color:'#e74c3c'},
        {id:'menu8', icon:'fa-history', label:'Historique', color:'#95a5a6'},
        {id:'menu9', icon:'fa-chart-line', label:'Tableau de Bord', color:'#f39c12'},
        {id:'menu10', icon:'fa-calendar-check', label:'Activités pédagogiques', color:'#1abc9c'},
        {id:'menu11', icon:'fa-stream', label:'Échéances', color:'#8e44ad'},
        {id:'menu12', icon:'fa-book', label:'Procédures', color:'#16a085'}
    ];

    function renderPerdirSubmenus() {
        var ms = JSON.parse(localStorage.getItem('pilote_master_settings') || '{}');
        var cfg = ms.perdirMenus || PERDIR_MENUS.map(function(m){ return {id:m.id, visible:true}; });
        var cfgIds2 = cfg.map(function(c){return c.id;});
        PERDIR_MENUS.forEach(function(m){if(cfgIds2.indexOf(m.id)<0)cfg.push({id:m.id,visible:true});});
        var list = document.getElementById('perdir-submenu-list');
        if (!list) return;
        var html = '';
        cfg.forEach(function(item, i) {
            var def = PERDIR_MENUS.find(function(m){ return m.id === item.id; });
            if (!def) return;
            html += '<div class="order-item" draggable="true" data-idx="'+i+'" data-menuid="'+item.id+'" ondragstart="dragSubM(event,'+i+')" ondragover="overSubM(event,this)" ondrop="dropSubM(event,'+i+')">';
            html += '<i class="fas fa-grip-vertical order-grip"></i>';
            html += '<div class="order-icon" style="background:'+def.color+'"><i class="fas '+def.icon+'"></i></div>';
            html += '<span class="order-label">'+def.label+'</span>';
            html += '<label class="toggle-switch" onclick="event.stopPropagation()"><input type="checkbox" '+(item.visible!==false?'checked':'')+' onchange="toggleSubM(\''+item.id+'\',this.checked)"><span class="toggle-slider"></span></label>';
            html += '</div>';
        });
        list.innerHTML = html;
    }

    var _dragSubIdx = null;
    function dragSubM(e, idx) { _dragSubIdx = idx; e.dataTransfer.effectAllowed = 'move'; }
    function overSubM(e, el) { e.preventDefault(); }
    function dropSubM(e, toIdx) {
        e.preventDefault();
        if (_dragSubIdx === null || _dragSubIdx === toIdx) return;
        var ms = JSON.parse(localStorage.getItem('pilote_master_settings') || '{}');
        var cfg = ms.perdirMenus || PERDIR_MENUS.map(function(m){ return {id:m.id, visible:true}; });
        var item = cfg.splice(_dragSubIdx, 1)[0];
        cfg.splice(toIdx, 0, item);
        ms.perdirMenus = cfg;
        localStorage.setItem('pilote_master_settings', JSON.stringify(ms));
        renderPerdirSubmenus();
        applyPerdirSubmenus();
        _dragSubIdx = null;
    }

    function toggleSubM(menuId, visible) {
        var ms = JSON.parse(localStorage.getItem('pilote_master_settings') || '{}');
        var cfg = ms.perdirMenus || PERDIR_MENUS.map(function(m){ return {id:m.id, visible:true}; });
        var item = cfg.find(function(c){ return c.id === menuId; });
        if (item) item.visible = visible;
        ms.perdirMenus = cfg;
        localStorage.setItem('pilote_master_settings', JSON.stringify(ms));
        applyPerdirSubmenus();
    }

    function applyPerdirSubmenus() {
        var fr = document.getElementById('frame-perdir');
        try { if (!fr || !fr.contentWindow || !fr.contentWindow.document) return; } catch(e) { return; }
        var ms = JSON.parse(localStorage.getItem('pilote_master_settings') || '{}');
        var cfg = ms.perdirMenus || PERDIR_MENUS.map(function(m){ return {id:m.id, visible:true}; });
        // Merge new menus not yet in saved config
        var cfgIds = cfg.map(function(c){return c.id;});
        PERDIR_MENUS.forEach(function(m){if(cfgIds.indexOf(m.id)<0)cfg.push({id:m.id,visible:true});});
        var menuDiv; try { menuDiv = fr.contentWindow.document.querySelector('.menu'); } catch(e) { return; }
        if (!menuDiv) return;
        
        var visNum = 1;
        cfg.forEach(function(item, i) {
            var link = menuDiv.querySelector('[data-menu="'+item.id+'"]');
            if (link) {
                var isVisible = item.visible !== false;
                link.style.display = isVisible ? '' : 'none';
                link.style.order = i;
                if (isVisible) {
                    var numSpan = link.querySelector('.menu-num');
                    if (numSpan) numSpan.textContent = visNum + '.';
                    visNum++;
                }
            }
        });
        menuDiv.style.display = 'flex';
        menuDiv.style.flexDirection = 'column';
    }

    function triggerVacancesUpdate() {
        var fr = document.getElementById('frame-perdir');
        if (fr && fr.contentWindow && typeof fr.contentWindow.majVacances === 'function') {
            fr.contentWindow.majVacances();
        } else {
            alert('Module PERDIR non chargé. Ouvrez d\'abord le module PERDIR.');
        }
    }

    
    function updateFavicon(logoSrc){
        if(!logoSrc)return;
        var link=document.querySelector('link[rel="icon"]');
        if(!link){link=document.createElement('link');link.rel='icon';document.head.appendChild(link);}
        link.href=logoSrc;
    }

    function toggleAcc(header) {
        var section = header.parentElement;
        var wasOpen = section.classList.contains('open');
        // Fermer tous les autres
        document.querySelectorAll('.acc-section.open').forEach(function(s) { s.classList.remove('open'); });
        // Ouvrir celui-ci sauf s'il était déjà ouvert
        if (!wasOpen) section.classList.add('open');
    }

    // ═══ CLOUD SYNC (multi-fournisseur) ═══
    var _cloudProvider = 'jsonbin';

    function selectCloudProvider(prov) {
        _cloudProvider = prov;
        ['jsonbin','gist','webdav','gdrive','localfolder'].forEach(function(p) {
            var el = document.getElementById('cloud-cfg-' + p);
            if (el) el.style.display = p === prov ? 'block' : 'none';
            var btn = document.querySelector('.cloud-prov-btn[data-prov="'+p+'"]');
            if (btn) btn.classList.toggle('active', p === prov);
        });
        if (prov === 'localfolder' && typeof lfInitMode === 'function') lfInitMode();
    }

    function toggleCloudUI() {
        var on = document.getElementById('s-cloud-enabled').checked;
        document.getElementById('cloud-opts').style.display = on ? 'block' : 'none';
    }

    function getCloudConfig() {
        return {
            provider: _cloudProvider,
            // jsonbin
            key: (document.getElementById('s-cloud-key').value || '').trim(),
            bin: (document.getElementById('s-cloud-bin').value || '').trim(),
            // github gist
            gistToken: (document.getElementById('s-gist-token').value || '').trim(),
            gistId: (document.getElementById('s-gist-id').value || '').trim(),
            // gdrive
            gdriveClientId: (document.getElementById('s-gdrive-clientid').value || '').trim(),
            gdriveFileId: (document.getElementById('s-gdrive-fileid').value || '').trim(),
            // webdav
            wdUrl: (document.getElementById('s-webdav-url').value || '').trim(),
            wdUser: (document.getElementById('s-webdav-user').value || '').trim(),
            wdPass: (document.getElementById('s-webdav-pass').value || '').trim(),
            // common
            auto: document.getElementById('s-cloud-auto').checked,
            enabled: document.getElementById('s-cloud-enabled').checked
        };
    }

    function cloudSetStatus(msg, color) {
        var el = document.getElementById('cloud-status');
        if (el) { el.innerHTML = msg; el.style.color = color || '#888'; }
    }

    // ── jsonbin.io ──
    async function jsonbinPush(data, cfg) {
        var headers = { 'Content-Type': 'application/json', 'X-Master-Key': cfg.key };
        if (cfg.bin) {
            var r = await fetch('https://api.jsonbin.io/v3/b/' + cfg.bin, { method: 'PUT', headers: headers, body: JSON.stringify(data) });
            if (!r.ok) throw new Error('jsonbin PUT: ' + r.status);
            return cfg.bin;
        } else {
            headers['X-Bin-Name'] = 'PILOTE_Data';
            headers['X-Bin-Private'] = 'true';
            var r = await fetch('https://api.jsonbin.io/v3/b', { method: 'POST', headers: headers, body: JSON.stringify(data) });
            if (!r.ok) throw new Error('jsonbin POST: ' + r.status);
            var j = await r.json();
            document.getElementById('s-cloud-bin').value = j.metadata.id;
            return j.metadata.id;
        }
    }
    async function jsonbinPull(cfg) {
        var r = await fetch('https://api.jsonbin.io/v3/b/' + cfg.bin + '/latest', { headers: { 'X-Master-Key': cfg.key } });
        if (!r.ok) throw new Error('jsonbin GET: ' + r.status);
        var j = await r.json();
        return j.record;
    }

    // ── GitHub Gist ──
    async function gistPush(data, cfg) {
        var content = JSON.stringify(data);
        var headers = { 'Content-Type': 'application/json', 'Authorization': 'token ' + cfg.gistToken };
        if (cfg.gistId) {
            var r = await fetch('https://api.github.com/gists/' + cfg.gistId, { method: 'PATCH', headers: headers,
                body: JSON.stringify({ files: { 'pilote_data.json': { content: content } } })
            });
            if (!r.ok) throw new Error('Gist PATCH: ' + r.status);
            return cfg.gistId;
        } else {
            var r = await fetch('https://api.github.com/gists', { method: 'POST', headers: headers,
                body: JSON.stringify({ description: 'PILOTE Suite Data', public: false, files: { 'pilote_data.json': { content: content } } })
            });
            if (!r.ok) throw new Error('Gist POST: ' + r.status);
            var j = await r.json();
            document.getElementById('s-gist-id').value = j.id;
            return j.id;
        }
    }
    async function gistPull(cfg) {
        var r = await fetch('https://api.github.com/gists/' + cfg.gistId, { headers: { 'Authorization': 'token ' + cfg.gistToken } });
        if (!r.ok) throw new Error('Gist GET: ' + r.status);
        var j = await r.json();
        return JSON.parse(j.files['pilote_data.json'].content);
    }

    // ── WebDAV ──
    async function webdavPush(data, cfg) {
        var url = cfg.wdUrl.replace(/\/$/, '') + '/pilote_data.json';
        var headers = { 'Content-Type': 'application/json', 'Authorization': 'Basic ' + btoa(cfg.wdUser + ':' + cfg.wdPass) };
        var r = await fetch(url, { method: 'PUT', headers: headers, body: JSON.stringify(data) });
        if (!r.ok && r.status !== 201 && r.status !== 204) throw new Error('WebDAV PUT: ' + r.status);
        return url;
    }
    async function webdavPull(cfg) {
        var url = cfg.wdUrl.replace(/\/$/, '') + '/pilote_data.json';
        var headers = { 'Authorization': 'Basic ' + btoa(cfg.wdUser + ':' + cfg.wdPass) };
        var r = await fetch(url, { method: 'GET', headers: headers });
        if (!r.ok) throw new Error('WebDAV GET: ' + r.status);
        return await r.json();
    }

    
    // ── Google Drive ──
    var _gdriveToken = null;
    function gdriveAuth() {
        var clientId = (document.getElementById('s-gdrive-clientid').value || '').trim();
        if (!clientId) return alert('Saisissez le Client ID OAuth2');
        var scope = 'https://www.googleapis.com/auth/drive.file';
        var redir = location.origin + location.pathname;
        var url = 'https://accounts.google.com/o/oauth2/v2/auth?client_id='+encodeURIComponent(clientId)+'&response_type=token&redirect_uri='+encodeURIComponent(redir)+'&scope='+encodeURIComponent(scope);
        var w = window.open(url, '_blank', 'width=500,height=600');
        // Listen for redirect
        var check = setInterval(function() {
            try {
                if (w.closed) { clearInterval(check); return; }
                if (w.location.hash) {
                    var hash = w.location.hash.substring(1);
                    var params = new URLSearchParams(hash);
                    var tk = params.get('access_token');
                    if (tk) {
                        _gdriveToken = tk;
                        w.close();
                        clearInterval(check);
                        document.getElementById('gdrive-auth-status').innerHTML = '<span style="color:#27ae60"><i class="fas fa-check-circle"></i> Connecté</span>';
                    }
                }
            } catch(e) {}
        }, 500);
    }

    async function gdrivePush(data, cfg) {
        if (!_gdriveToken) throw new Error('Connectez-vous à Google Drive d\'abord');
        var content = JSON.stringify(data);
        var headers = { 'Authorization': 'Bearer ' + _gdriveToken };
        if (cfg.gdriveFileId) {
            var r = await fetch('https://www.googleapis.com/upload/drive/v3/files/' + cfg.gdriveFileId + '?uploadType=media', {
                method: 'PATCH', headers: Object.assign(headers, {'Content-Type':'application/json'}), body: content
            });
            if (!r.ok) throw new Error('GDrive PATCH: ' + r.status);
            return cfg.gdriveFileId;
        } else {
            var meta = { name: 'pilote_data.json', mimeType: 'application/json' };
            var form = new FormData();
            form.append('metadata', new Blob([JSON.stringify(meta)], {type:'application/json'}));
            form.append('file', new Blob([content], {type:'application/json'}));
            var r = await fetch('https://www.googleapis.com/upload/drive/v3/files?uploadType=multipart', {
                method: 'POST', headers: headers, body: form
            });
            if (!r.ok) throw new Error('GDrive POST: ' + r.status);
            var j = await r.json();
            document.getElementById('s-gdrive-fileid').value = j.id;
            return j.id;
        }
    }

    async function gdrivePull(cfg) {
        if (!_gdriveToken) throw new Error('Connectez-vous à Google Drive d\'abord');
        var r = await fetch('https://www.googleapis.com/drive/v3/files/' + cfg.gdriveFileId + '?alt=media', {
            headers: { 'Authorization': 'Bearer ' + _gdriveToken }
        });
        if (!r.ok) throw new Error('GDrive GET: ' + r.status);
        return await r.json();
    }

    // ── Dispatcher ──
    async // ── Dossier Local (auto-sync via File System Access + fallback manuel) ──
    var _lfDirHandle = null;
    var _lfAutoSaveTimer = null;
    var _lfDirty = false;
    var _lfSaving = false;
    var _lfHasAPI = (typeof window.showDirectoryPicker === 'function');

    // ── Détection du mode et initialisation ──
    function lfInitMode() {
        var autoDiv = document.getElementById('lf-mode-auto');
        var manDiv = document.getElementById('lf-mode-manual');
        // Re-check API availability (may not be set at parse time)
        _lfHasAPI = !!(window.showDirectoryPicker);
        console.log('[PILOTE] lfInitMode: File System Access API =', _lfHasAPI, 'protocol =', location.protocol);
        if (_lfHasAPI) {
            if (autoDiv) autoDiv.style.display = 'block';
            if (manDiv) manDiv.style.display = 'none';
            lfRestoreHandle();
        } else {
            if (autoDiv) autoDiv.style.display = 'none';
            if (manDiv) manDiv.style.display = 'block';
        }
    }

    // ── File System Access API (auto mode) ──
    async function lfPickFolder() {
        try {
            _lfDirHandle = await window.showDirectoryPicker({ mode: 'readwrite' });
            await lfSaveHandleToIDB(_lfDirHandle);
            lfSetAutoStatus('<i class="fas fa-check-circle"></i> ' + _lfDirHandle.name, '#27ae60');
            document.getElementById('lf-auto-actions').style.display = 'block';
            // Check if file already exists in folder (restore if newer)
            await lfAutoLoadOnStartup();
            lfStartAutoSync();
            // Initial save
            await lfWriteToFolder();
        } catch(e) {
            if (e.name !== 'AbortError') lfSetAutoStatus('<i class="fas fa-times"></i> ' + e.message, '#e74c3c');
        }
    }

    async function lfSaveHandleToIDB(handle) {
        return new Promise(function(res, rej) {
            var req = indexedDB.open('pilote_lf', 1);
            req.onupgradeneeded = function(e) { e.target.result.createObjectStore('h'); };
            req.onsuccess = function(e) {
                var tx = e.target.result.transaction('h', 'readwrite');
                tx.objectStore('h').put(handle, 'dir');
                tx.oncomplete = res; tx.onerror = function() { rej(tx.error); };
            };
            req.onerror = function() { rej(req.error); };
        });
    }

    async function lfLoadHandleFromIDB() {
        return new Promise(function(res) {
            var req = indexedDB.open('pilote_lf', 1);
            req.onupgradeneeded = function(e) { e.target.result.createObjectStore('h'); };
            req.onsuccess = function(e) {
                var tx = e.target.result.transaction('h', 'readonly');
                var g = tx.objectStore('h').get('dir');
                g.onsuccess = function() { res(g.result || null); };
                g.onerror = function() { res(null); };
            };
            req.onerror = function() { res(null); };
        });
    }

    async function lfRestoreHandle() {
        try {
            var h = await lfLoadHandleFromIDB();
            if (!h) return;
            var perm = await h.queryPermission({ mode: 'readwrite' });
            if (perm === 'granted') {
                _lfDirHandle = h;
                lfSetAutoStatus('<i class="fas fa-spinner fa-spin"></i> Chargement des données...', '#3498db');
                document.getElementById('lf-auto-actions').style.display = 'block';
                lfShowSyncIndicator();
                // AUTO-LOAD: restore data from file on startup
                await lfAutoLoadOnStartup();
                lfSetAutoStatus('<i class="fas fa-link"></i> ' + h.name + ' (synchronisé)', '#27ae60');
                lfStartAutoSync();
            } else {
                lfSetAutoStatus('<i class="fas fa-lock"></i> ' + h.name + ' — cliquez pour réautoriser', '#e67e22');
                var btn = document.getElementById('lf-pick-btn');
                if (btn) btn.innerHTML = '<i class="fas fa-lock-open"></i> Réautoriser ' + h.name;
            }
        } catch(e) { console.warn('lfRestoreHandle:', e); }
    }

    async function lfAutoLoadOnStartup() {
        try {
            var data = await lfReadFromFolder();
            if (!data) { console.log('[PILOTE] No pilote_data.json found, starting fresh'); return; }
            var fileMeta = data._cloudMeta || {};
            var fileTime = fileMeta.lastPush || '2000-01-01';
            // Compare with local settings timestamp
            var localSettings = JSON.parse(localStorage.getItem('pilote_suite_settings') || '{}');
            var localTime = localSettings._lastSync || '2000-01-01';
            console.log('[PILOTE] File time:', fileTime, '| Local time:', localTime);
            if (fileTime > localTime) {
                console.log('[PILOTE] File is newer → restoring all data');
                distributeToModules(data);
                lfUpdateSyncIndicator('Données restaurées', '#27ae60');
            } else {
                console.log('[PILOTE] Local is current, no restore needed');
            }
        } catch(e) { console.warn('lfAutoLoadOnStartup:', e); }
    }

    async function lfEnsurePermission() {
        if (!_lfDirHandle) return false;
        var perm = await _lfDirHandle.queryPermission({ mode: 'readwrite' });
        if (perm === 'granted') return true;
        perm = await _lfDirHandle.requestPermission({ mode: 'readwrite' });
        return perm === 'granted';
    }

    async function lfWriteToFolder() {
        if (!_lfDirHandle || _lfSaving) return;
        _lfSaving = true;
        try {
            if (!await lfEnsurePermission()) throw new Error('Permission refusée');
            var allData = collectAllModulesData();
            var now = new Date().toISOString();
            allData._cloudMeta = { lastPush: now, provider: 'localfolder' };
            // Update local timestamp so we know we're in sync
            try {
                var ls = JSON.parse(localStorage.getItem('pilote_suite_settings') || '{}');
                ls._lastSync = now;
                localStorage.setItem('pilote_suite_settings', JSON.stringify(ls));
            } catch(e) {}
            var json = JSON.stringify(allData, null, 2);
            var fh = await _lfDirHandle.getFileHandle('pilote_data.json', { create: true });
            var w = await fh.createWritable();
            await w.write(json);
            await w.close();
            _lfDirty = false;
            lfUpdateSyncIndicator('Synchronisé ' + new Date().toLocaleTimeString('fr-FR', {hour:'2-digit',minute:'2-digit'}), '#27ae60');
        } catch(err) {
            console.error('lfWriteToFolder:', err);
            lfUpdateSyncIndicator('Erreur sync', '#e74c3c');
        }
        _lfSaving = false;
    }

    async function lfReadFromFolder() {
        if (!_lfDirHandle) return null;
        try {
            if (!await lfEnsurePermission()) return null;
            var fh = await _lfDirHandle.getFileHandle('pilote_data.json');
            var file = await fh.getFile();
            var text = await file.text();
            return JSON.parse(text);
        } catch(e) {
            if (e.name === 'NotFoundError') return null;
            console.error('lfReadFromFolder:', e);
            return null;
        }
    }

    function lfStartAutoSync() {
        if (_lfAutoSaveTimer) clearInterval(_lfAutoSaveTimer);
        // Take initial snapshot
        _lfLastSnapshot = lfComputeSnapshot();
        // Poll every 3 seconds for changes + save if dirty
        _lfAutoSaveTimer = setInterval(function() {
            lfPollForChanges();
            if (_lfDirty && _lfDirHandle && !_lfSaving) {
                lfWriteToFolder();
            }
        }, 3000);
        lfShowSyncIndicator();
    }

    function lfMarkDirty() {
        _lfDirty = true;
        lfUpdateSyncIndicator('Modifications non sauvegardées…', '#f39c12');
    }

    async function lfForceSave() {
        if (_lfDirHandle) {
            lfUpdateSyncIndicator('<i class="fas fa-spinner fa-spin"></i> Sauvegarde...', '#3498db');
            lfSetAutoStatus('<i class="fas fa-spinner fa-spin"></i> Sauvegarde en cours...', '#3498db');
            await lfWriteToFolder();
            lfSetAutoStatus('<i class="fas fa-check-circle"></i> Sauvegardé ' + new Date().toLocaleTimeString('fr-FR'), '#27ae60');
        } else {
            localFolderExport();
        }
    }

    async function lfForceLoad() {
        if (!_lfDirHandle) { document.getElementById('localfolder-import').click(); return; }
        lfSetAutoStatus('<i class="fas fa-spinner fa-spin"></i> Chargement...', '#3498db');
        var data = await lfReadFromFolder();
        if (data) {
            distributeToModules(data);
            var meta = data._cloudMeta || {};
            lfSetAutoStatus('<i class="fas fa-check-circle"></i> Restauré (' + (meta.lastPush ? new Date(meta.lastPush).toLocaleString('fr-FR') : '?') + ')', '#27ae60');
            alert('✅ Données importées ! Rechargez la page pour appliquer.');
        } else {
            lfSetAutoStatus('<i class="fas fa-exclamation-triangle"></i> Aucun fichier trouvé', '#e67e22');
        }
    }

    // ── UI helpers ──
    function lfSetAutoStatus(html, color) {
        var el = document.getElementById('lf-auto-status');
        if (el) el.innerHTML = '<span style="color:' + (color||'#888') + ';">' + html + '</span>';
    }

    function lfShowSyncIndicator() {
        var el = document.getElementById('lf-sync-indicator');
        if (el) el.style.display = 'block';
    }

    function lfUpdateSyncIndicator(text, color) {
        var dot = document.querySelector('#lf-sync-indicator i');
        var span = document.getElementById('lf-sync-text');
        if (dot) dot.style.color = color || '#888';
        if (span) span.textContent = text;
        lfShowSyncIndicator();
    }

    // ── Manual mode (fallback file://) ──
    function localFolderExport() {
        try {
            localFolderSetStatus('<i class="fas fa-spinner fa-spin"></i> Préparation...', '#f39c12');
            var allData = collectAllModulesData();
            allData._cloudMeta = { lastPush: new Date().toISOString(), provider: 'localfolder' };
            var json = JSON.stringify(allData, null, 2);
            var blob = new Blob([json], { type: 'application/json' });
            var url = URL.createObjectURL(blob);
            var a = document.createElement('a');
            a.href = url; a.download = 'pilote_data.json';
            document.body.appendChild(a); a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            localFolderSetStatus('✅ Fichier téléchargé', '#27ae60');
        } catch(err) { localFolderSetStatus('❌ ' + err.message, '#e74c3c'); }
    }

    function localFolderImport(input) {
        var file = input.files[0]; if (!file) return;
        localFolderSetStatus('<i class="fas fa-spinner fa-spin"></i> Lecture...', '#3498db');
        var reader = new FileReader();
        reader.onload = function(e) {
            try {
                var data = JSON.parse(e.target.result);
                if (!data || typeof data !== 'object') throw new Error('Format invalide');
                distributeToModules(data);
                var meta = data._cloudMeta || {};
                localFolderSetStatus('✅ Importé (' + (meta.lastPush ? new Date(meta.lastPush).toLocaleString('fr-FR') : '?') + ')', '#27ae60');
                alert('✅ Données importées ! Rechargez la page pour appliquer.');
            } catch(err) { localFolderSetStatus('❌ ' + err.message, '#e74c3c'); }
        };
        reader.readAsText(file);
        input.value = '';
    }

    function localFolderSetStatus(html, color) {
        var el = document.getElementById('localfolder-status');
        if (el) el.innerHTML = '<span style="color:' + (color||'#888') + ';">' + html + '</span>';
    }

    // ── Sync Engine: poll ALL modules data for changes ──
    var _lfLastSnapshot = '';

    function _lfHash(str) {
        // DJB2 hash — fast, reliable for change detection
        var hash = 5381;
        for (var i = 0; i < str.length; i++) {
            hash = ((hash << 5) + hash) + str.charCodeAt(i);
            hash = hash & hash; // Convert to 32-bit integer
        }
        return hash.toString(36);
    }

    function lfComputeSnapshot() {
        // Build a fingerprint of ALL data using content hashes
        var parts = [];
        // 1. Wrapper localStorage (pilote_suite_settings, pilote_master_settings, bibase_*)
        try {
            for (var i = 0; i < localStorage.length; i++) {
                var k = localStorage.key(i);
                var v = localStorage.getItem(k) || '';
                parts.push(k + '=' + v.length + ':' + _lfHash(v));
            }
        } catch(e) {}
        // 2. All iframe modules localStorage
        var frames = ['frame-perdir', 'frame-exam', 'frame-oral', 'frame-aed', 'frame-bibase'];
        frames.forEach(function(fid) {
            var fr = document.getElementById(fid);
            if (fr && fr.contentWindow) {
                try {
                    var ls = fr.contentWindow.localStorage;
                    for (var j = 0; j < ls.length; j++) {
                        var k2 = ls.key(j);
                        var v2 = ls.getItem(k2) || '';
                        parts.push(fid + ':' + k2 + '=' + v2.length + ':' + _lfHash(v2));
                    }
                } catch(e2) {}
            }
        });
        return parts.sort().join('|');
    }

    function lfPollForChanges() {
        if (!_lfDirHandle || _lfSaving) return;
        var snap = lfComputeSnapshot();
        if (snap !== _lfLastSnapshot) {
            _lfLastSnapshot = snap;
            _lfDirty = true;
            lfUpdateSyncIndicator('Modifications détectées…', '#f39c12');
        }
    }

    // ── Init on page load ──
    // Fallback if DOMContentLoaded already fired
    if (document.readyState !== 'loading') { setTimeout(function() { lfInitMode(); }, 200); }
    window.addEventListener('DOMContentLoaded', function() {
        setTimeout(function() {
            lfInitMode();
        }, 500);
    });

    // ── Save before leaving ──
    window.addEventListener('beforeunload', function() {
        if (_lfDirHandle && _lfDirty) {
            // Synchronous attempt — may not complete but worth trying
            try { lfWriteToFolder(); } catch(e) {}
        }
    });

    // ── Save when tab becomes hidden (user switches tab/app) ──
    document.addEventListener('visibilitychange', function() {
        if (document.hidden && _lfDirHandle && _lfDirty) {
            lfWriteToFolder();
        }
    });

    async function cloudPush() {
        var cfg = getCloudConfig();
        if (cfg.provider === 'jsonbin' && !cfg.key) return alert('Saisissez votre clé API jsonbin.io');
        if (cfg.provider === 'gist' && !cfg.gistToken) return alert('Saisissez votre GitHub Personal Access Token');
        if (cfg.provider === 'webdav' && !cfg.wdUrl) return alert('Saisissez l\'URL de votre serveur WebDAV');
        if (cfg.provider === 'gdrive' && !_gdriveToken) return alert('Connectez-vous à Google Drive');
        if (cfg.provider === 'localfolder') { lfForceSave(); return; }

        cloudSetStatus('<i class="fas fa-spinner fa-spin"></i> Envoi en cours...', '#f39c12');
        try {
            var allData = collectAllModulesData();
            allData._cloudMeta = { lastPush: new Date().toISOString(), provider: cfg.provider };

            if (cfg.provider === 'jsonbin') await jsonbinPush(allData, cfg);
            else if (cfg.provider === 'gist') await gistPush(allData, cfg);
            else if (cfg.provider === 'webdav') await webdavPush(allData, cfg);
            else if (cfg.provider === 'gdrive') await gdrivePush(allData, cfg);
            

            cloudSetStatus('✅ Envoyé le ' + new Date().toLocaleString('fr-FR') + ' via ' + cfg.provider, '#27ae60');
        } catch (err) {
            cloudSetStatus('❌ ' + err.message, '#e74c3c');
        }
    }

    async function cloudPull() {
        var cfg = getCloudConfig();
        if (cfg.provider === 'jsonbin' && (!cfg.key || !cfg.bin)) return alert('Clé API et ID du Bin requis');
        if (cfg.provider === 'gist' && (!cfg.gistToken || !cfg.gistId)) return alert('Token et Gist ID requis');
        if (cfg.provider === 'webdav' && !cfg.wdUrl) return alert('URL WebDAV requise');
        if (cfg.provider === 'gdrive' && (!_gdriveToken || !cfg.gdriveFileId)) return alert('Connectez Google Drive et renseignez le File ID');
        if (cfg.provider === 'localfolder') { lfForceLoad(); return; }

        cloudSetStatus('<i class="fas fa-spinner fa-spin"></i> Récupération...', '#3498db');
        try {
            var record;
            if (cfg.provider === 'jsonbin') record = await jsonbinPull(cfg);
            else if (cfg.provider === 'gist') record = await gistPull(cfg);
            else if (cfg.provider === 'webdav') record = await webdavPull(cfg);
            else if (cfg.provider === 'gdrive') record = await gdrivePull(cfg);
            

            if (!record) throw new Error('Données vides');
            distributeToModules(record);

            var meta = record._cloudMeta || {};
            cloudSetStatus('✅ Récupéré (' + (meta.lastPush ? new Date(meta.lastPush).toLocaleString('fr-FR') : '?') + ')', '#27ae60');
            alert('✅ Données importées ! Rechargez la page pour appliquer.');
        } catch (err) {
            cloudSetStatus('❌ ' + err.message, '#e74c3c');
        }
    }

    function collectAllModulesData() {
        var allData = {};
        var frames = ['frame-perdir', 'frame-exam', 'frame-oral', 'frame-aed', 'frame-bibase'];
        frames.forEach(function(fid) {
            var fr = document.getElementById(fid);
            if (fr && fr.contentWindow) {
                try {
                    var keys = Object.keys(fr.contentWindow.localStorage);
                    keys.forEach(function(k) {
                        allData['__' + fid + '__' + k] = fr.contentWindow.localStorage.getItem(k);
                    });
                } catch(e) {}
            }
        });
        // Wrapper localStorage (settings, bibase_establishment, etc.)
        try {
            for (var wi = 0; wi < localStorage.length; wi++) {
                var wk = localStorage.key(wi);
                allData['__wrapper__' + wk] = localStorage.getItem(wk);
            }
        } catch(e) {}
        return allData;
    }

    function distributeToModules(record) {
        var frames = ['frame-perdir', 'frame-exam', 'frame-oral', 'frame-aed', 'frame-bibase'];
        frames.forEach(function(fid) {
            var fr = document.getElementById(fid);
            if (fr && fr.contentWindow) {
                try {
                    var prefix = '__' + fid + '__';
                    Object.keys(record).forEach(function(k) {
                        if (k.indexOf(prefix) === 0) {
                            try { fr.contentWindow.localStorage.setItem(k.substring(prefix.length), record[k]); } catch(e2) {}
                        }
                    });
                } catch(e) {}
            }
        });
        // Restore wrapper localStorage
        Object.keys(record).forEach(function(k) {
            if (k.indexOf('__wrapper__') === 0) {
                try { localStorage.setItem(k.substring(11), record[k]); } catch(e3) {}
            }
        });
    }

    // Auto-sync hook
    function cloudAutoSync() {
        var el = document.getElementById('s-cloud-auto');
        var ek = document.getElementById('s-cloud-enabled');
        if (el && el.checked && ek && ek.checked) { setTimeout(cloudPush, 500); }
    }

    
    

    
    function loadBibSettings() {
        var s = JSON.parse(localStorage.getItem('bibase_establishment') || '{}');
        var el;
        el = document.getElementById('bib-layout'); if (el && s.layout) el.value = s.layout;
        el = document.getElementById('bib-font'); if (el && s.font) el.value = s.font;
        el = document.getElementById('bib-signatory'); if (el && s.defaultSignatory) {
            var found = false;
            for (var i = 0; i < el.options.length; i++) { if (el.options[i].value === s.defaultSignatory) { found = true; break; } }
            if (!found) { var o = document.createElement('option'); o.value = s.defaultSignatory; o.text = s.defaultSignatory; el.appendChild(o); }
            el.value = s.defaultSignatory;
        }
        el = document.getElementById('bib-doc-title'); if (el && s.docTitle) el.value = s.docTitle;
        el = document.getElementById('bib-doc-footer'); if (el && s.docFooter) el.value = s.docFooter;
    }

    </script>
</body>
</html>
