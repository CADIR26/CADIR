<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PILOTE — Suite de Direction</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=DM+Sans:opsz,wght@9..40,300;9..40,400;9..40,500;9..40,600;9..40,700&family=Playfair+Display:wght@600;700&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <style>
        :root {
            --nav-h: 52px;
            --c-bg: #f0f1f4;
            --c-nav: #1b2433;
            --c-nav-hover: #273347;
            --c-accent: #d4483b;
            --c-accent-glow: rgba(212,72,59,0.35);
            --c-text: #e8eaed;
            --c-text-dim: #8b92a0;
            --c-card: #ffffff;
            --c-border: #dfe2e8;
            --c-success: #2ecc71;
            --c-info: #3498db;
            --c-warning: #f39c12;
            --c-purple: #9b59b6;
            --radius: 10px;
            --shadow: 0 4px 24px rgba(0,0,0,0.08);
            --font: 'DM Sans', -apple-system, BlinkMacSystemFont, sans-serif;
            --font-display: 'Playfair Display', Georgia, serif;
        }
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body { font-family: var(--font); background: var(--c-bg); height: 100vh; display: flex; flex-direction: column; overflow: hidden; color: #2c3040; }

        /* ═══ TOP NAV ═══ */
        .topnav { height: var(--nav-h); background: var(--c-nav); display: flex; align-items: center; padding: 0 16px; box-shadow: 0 2px 12px rgba(0,0,0,0.25); z-index: 1000; flex-shrink: 0; position: relative; }
        .topnav::after { content:''; position:absolute; bottom:0; left:0; right:0; height:2px; background:linear-gradient(90deg,var(--c-accent),#f39c12,var(--c-accent)); opacity:0.7; }
        .brand { display:flex; align-items:center; gap:8px; margin-right:20px; cursor:pointer; text-decoration:none; }
        .brand-icon { width:32px; height:32px; background:var(--c-accent); border-radius:7px; display:flex; align-items:center; justify-content:center; font-size:15px; color:white; font-weight:700; box-shadow:0 2px 8px var(--c-accent-glow); overflow:hidden; }
        .brand-icon img { width:100%; height:100%; object-fit:contain; }
        .brand-text { font-family:var(--font-display); font-size:1.05rem; font-weight:700; color:#fff; }
        .brand-text span { color:var(--c-text-dim); font-family:var(--font); font-weight:400; font-size:0.6rem; display:block; margin-top:-2px; letter-spacing:1.5px; text-transform:uppercase; }
        .nav-sep { width:1px; height:24px; background:rgba(255,255,255,0.1); margin:0 6px; }
        .nav-items { display:flex; align-items:center; gap:3px; height:100%; }
        .nav-item { display:flex; align-items:center; gap:7px; padding:7px 14px; border-radius:7px; cursor:pointer; transition:all 0.2s; color:var(--c-text-dim); font-size:0.8rem; font-weight:500; position:relative; height:34px; user-select:none; white-space:nowrap; }
        .nav-item:hover { background:var(--c-nav-hover); color:var(--c-text); }
        
        .nav-shortcut { font-size:.5rem; background:rgba(255,255,255,.15); color:rgba(255,255,255,.5); padding:1px 4px; border-radius:3px; margin-left:4px; font-family:monospace; vertical-align:middle; display:none; }
        .nav-item:hover .nav-shortcut { display:inline; }
        .nav-item.active { background:rgba(212,72,59,0.12); color:#fff; }
        .nav-item.active::after { content:''; position:absolute; bottom:-9px; left:50%; transform:translateX(-50%); width:20px; height:3px; background:var(--c-accent); border-radius:3px 3px 0 0; }
        .nav-item.hidden-module { display: none !important; }
        .nav-item i { font-size:0.9rem; width:16px; text-align:center; }
        .nav-badge { font-size:0.55rem; padding:1px 5px; border-radius:10px; font-weight:600; }
        .nav-item[data-module="perdir"] .nav-badge { background:var(--c-info); color:#fff; }
        .nav-item[data-module="exam"] .nav-badge { background:var(--c-accent); color:#fff; }
        .nav-item[data-module="oral"] .nav-badge { background:var(--c-warning); color:#fff; }
        .nav-item[data-module="aed"] .nav-badge { background:var(--c-success); color:#fff; }
            [data-module="bibase"] .nav-badge { background:#e67e22; color:#fff; }
        .nav-item[data-module="data"] .nav-badge { background:var(--c-purple); color:#fff; }
        .nav-right { margin-left:auto; display:flex; align-items:center; gap:8px; }
        .nav-clock { color:var(--c-text-dim); font-size:0.75rem; font-variant-numeric:tabular-nums; }
        .nav-btn { width:32px; height:32px; border-radius:7px; border:none; background:var(--c-nav-hover); color:var(--c-text-dim); cursor:pointer; display:flex; align-items:center; justify-content:center; transition:all 0.2s; font-size:0.8rem; }
        .nav-btn:hover { background:rgba(255,255,255,0.12); color:white; }

        /* ═══ SETTINGS OVERLAY ═══ */
        .settings-overlay { position:fixed; inset:0; background:rgba(0,0,0,0.4); z-index:2000; display:none; align-items:center; justify-content:center; backdrop-filter:blur(4px); }
        .settings-overlay.open { display:flex; }
        .settings-panel { background:white; border-radius:14px; width:720px; max-width:95vw; max-height:92vh; overflow-y:auto; box-shadow:0 20px 60px rgba(0,0,0,0.25); animation:panelIn 0.25s ease; }
        @keyframes panelIn { from{opacity:0;transform:translateY(20px) scale(0.97)} to{opacity:1;transform:none} }
        .settings-header { padding:18px 24px; border-bottom:1px solid #eee; display:flex; justify-content:space-between; align-items:center; }
        .settings-header h2 { font-size:1.1rem; font-weight:600; color:var(--c-nav); display:flex; align-items:center; gap:10px; }
        .settings-header h2 i { color:var(--c-accent); }
        .settings-close { background:none; border:none; font-size:1.3rem; cursor:pointer; color:#999; padding:4px; }
        .settings-close:hover { color:#333; }
        .settings-body { padding:24px; }
        .settings-section { margin-bottom:24px; }
        .settings-section h3 { font-size:0.8rem; font-weight:600; color:#666; text-transform:uppercase; letter-spacing:1px; margin-bottom:12px; display:flex; align-items:center; gap:8px; }
        .settings-section h3 i { color:var(--c-info); }
        .settings-grid { display:grid; grid-template-columns:1fr 1fr; gap:14px; }
        .form-group { display:flex; flex-direction:column; gap:4px; }
        .form-group label { font-size:0.78rem; font-weight:500; color:#555; }
        .form-group input[type="text"] { padding:9px 12px; border:1px solid #ddd; border-radius:8px; font-size:0.85rem; font-family:var(--font); transition:border 0.2s; }
        .form-group input[type="text"]:focus { outline:none; border-color:var(--c-info); box-shadow:0 0 0 3px rgba(52,152,219,0.1); }
        .form-group input[type="file"] { font-size:0.75rem; }
        .img-preview { width:100%; height:72px; border:2px dashed #ddd; border-radius:8px; display:flex; align-items:center; justify-content:center; background:#fafafa; margin-top:4px; overflow:hidden; position:relative; }
        .img-preview img { max-height:64px; max-width:100%; object-fit:contain; }
        .img-preview .placeholder { color:#bbb; font-size:0.7rem; }
        .img-preview .btn-clear { position:absolute; top:3px; right:3px; width:18px; height:18px; background:rgba(0,0,0,0.5); color:white; border:none; border-radius:50%; cursor:pointer; font-size:0.55rem; display:none; align-items:center; justify-content:center; }
        .img-preview:hover .btn-clear { display:flex; }

        
        /* ═══ ACCORDION SETTINGS ═══ */
        .acc-section{border:1px solid #e8eaed;border-radius:10px;margin-bottom:10px;}
        .acc-header{display:flex;align-items:center;gap:10px;padding:14px 18px;cursor:pointer;background:#fafbfc;border-radius:10px;user-select:none;}
        .acc-header:hover{background:#eaf4fe;}
        .acc-header h3{font-size:0.82rem;font-weight:600;color:#444;text-transform:uppercase;letter-spacing:0.8px;margin:0;display:flex;align-items:center;gap:8px;flex:1;}
        .acc-header h3 i{color:var(--c-info);font-size:.85rem;}
        .acc-chevron{font-size:.7rem;color:#aaa;transition:transform 0.3s;}
        .acc-section.open .acc-header{background:#eaf4fe;border-bottom:1px solid #e0e0e0;border-radius:10px 10px 0 0;}
        .acc-section.open .acc-chevron{transform:rotate(90deg);color:var(--c-info);}
        .acc-body{display:none;padding:16px 18px;}
        .acc-section.open .acc-body{display:block;}

        
        .cloud-prov-btn{padding:10px 14px;border:2px solid #e0e0e0;border-radius:10px;background:#fff;cursor:pointer;text-align:center;font-family:var(--font);font-size:.78rem;font-weight:600;color:#555;transition:all .2s;flex:1;min-width:110px;}
        .cloud-prov-btn:hover{border-color:#3498db;background:#f0f7ff;}
        .cloud-prov-btn.active{border-color:#3498db;background:#eaf4fe;color:#2c3e50;box-shadow:0 2px 8px rgba(52,152,219,.15);}
        .cloud-prov-btn i{font-size:1.2rem;display:block;margin-bottom:4px;}
        .cloud-prov-btn small{font-weight:400;color:#888;font-size:.62rem;}

        /* Module toggles */
        .module-toggle { display:flex; align-items:center; gap:12px; padding:9px 0; border-bottom:1px solid #f0f0f0; }
        .module-toggle:last-child { border-bottom:none; }
        .module-toggle-icon { width:30px; height:30px; border-radius:7px; display:flex; align-items:center; justify-content:center; color:white; font-size:0.8rem; }
        .module-toggle-info { flex:1; }
        .module-toggle-info strong { font-size:0.82rem; color:#333; }
        .module-toggle-info span { font-size:0.68rem; color:#999; display:block; }
        .toggle-switch { position:relative; width:42px; height:23px; cursor:pointer; }
        .toggle-switch input { opacity:0; width:0; height:0; }
        .toggle-slider { position:absolute; inset:0; background:#ddd; border-radius:23px; transition:0.3s; }
        .toggle-slider::before { content:''; position:absolute; height:17px; width:17px; left:3px; bottom:3px; background:white; border-radius:50%; transition:0.3s; box-shadow:0 1px 3px rgba(0,0,0,0.2); }
        .toggle-switch input:checked + .toggle-slider { background:var(--c-success); }
        .toggle-switch input:checked + .toggle-slider::before { transform:translateX(19px); }

        /* Drag-and-drop order */
        .order-list { list-style:none; }
        .order-item { display:flex; align-items:center; gap:12px; padding:10px 14px; margin-bottom:6px; background:#f8f9fa; border:1px solid #e8eaed; border-radius:8px; cursor:grab; transition:all 0.2s; user-select:none; }
        .order-item:active { cursor:grabbing; }
        .order-item.dragging { opacity:0.4; background:#e8eaed; }
        .order-item.drag-over { border-color:var(--c-info); background:#eaf4fe; transform:scale(1.01); }
        .order-grip { color:#bbb; font-size:0.9rem; }
        .order-icon { width:26px; height:26px; border-radius:6px; display:flex; align-items:center; justify-content:center; color:white; font-size:0.7rem; flex-shrink:0; }
        .order-label { flex:1; font-size:0.82rem; font-weight:500; color:#333; }
        .order-hint { font-size:0.65rem; color:#aaa; margin-top:6px; }

        /* Export/Import buttons */
        .settings-backup { display:flex; gap:8px; flex-wrap:wrap; }
        .backup-btn { display:flex; align-items:center; gap:7px; padding:8px 16px; border:1px solid #ddd; border-radius:8px; background:#fafbfc; cursor:pointer; font-size:0.78rem; font-weight:500; font-family:var(--font); color:#555; transition:all 0.2s; }
        .backup-btn:hover { border-color:var(--c-info); background:#eaf4fe; color:var(--c-info); }
        .backup-btn i { font-size:0.85rem; }
        .backup-btn.import-btn { position:relative; }
        .backup-btn.import-btn input[type="file"] { position:absolute; inset:0; opacity:0; cursor:pointer; }

        .settings-footer { padding:14px 24px; border-top:1px solid #eee; display:flex; justify-content:flex-end; gap:10px; }
        .btn-settings { padding:9px 22px; border:none; border-radius:8px; font-size:0.82rem; font-weight:600; cursor:pointer; font-family:var(--font); transition:all 0.2s; }
        .btn-save { background:var(--c-accent); color:white; }
        .btn-save:hover { background:#c0392b; }
        .btn-cancel { background:#f0f0f0; color:#666; }
        .btn-cancel:hover { background:#e0e0e0; }

        /* ═══ DATA PANEL ═══ */
        .data-panel { position:absolute; inset:0; display:none; flex-direction:column; background:var(--c-bg); z-index:10; overflow-y:auto; }
        .data-panel.active { display:flex; }
        .data-header { padding:30px 40px 0; }
        .data-header h1 { font-family:var(--font-display); font-size:1.6rem; font-weight:700; color:var(--c-nav); display:flex; align-items:center; gap:12px; }
        .data-header h1 i { color:var(--c-purple); }
        .data-header p { color:#6b7280; font-size:0.85rem; margin-top:6px; }
        .data-body { padding:24px 40px 40px; display:grid; grid-template-columns:1fr 1fr; gap:24px; }
        .data-card { background:white; border-radius:var(--radius); box-shadow:var(--shadow); border:1px solid var(--c-border); overflow:hidden; }
        .data-card-header { padding:16px 20px; border-bottom:1px solid #eee; display:flex; align-items:center; gap:10px; }
        .data-card-header i { font-size:1.1rem; }
        .data-card-header.teachers i { color:var(--c-info); }
        .data-card-header.students i { color:var(--c-purple); }
        .data-card-header h3 { font-size:0.95rem; font-weight:600; color:var(--c-nav); }
        .data-card-header .data-badge { margin-left:auto; font-size:0.7rem; padding:3px 10px; border-radius:20px; font-weight:600; background:#f0f0f0; color:#888; }
        .data-card-header .data-badge.has-data { background:#e8f8f0; color:var(--c-success); }
        .data-card-body { padding:20px; }

        .excel-drop { border:2px dashed #ccc; border-radius:8px; padding:24px; text-align:center; transition:0.2s; cursor:pointer; position:relative; background:#fafbfc; }
        .excel-drop:hover { border-color:var(--c-info); background:#f0f7ff; }
        .excel-drop.loaded { border-color:var(--c-success); background:#f0fff4; }
        .excel-drop input[type="file"] { position:absolute; inset:0; opacity:0; cursor:pointer; }
        .excel-drop i.drop-icon { font-size:2rem; color:#ccc; margin-bottom:8px; display:block; }
        .excel-drop.loaded i.drop-icon { color:var(--c-success); }
        .excel-drop .drop-label { font-size:0.82rem; color:#888; }
        .excel-drop.loaded .drop-label { color:var(--c-success); font-weight:600; }
        .excel-drop .drop-hint { font-size:0.68rem; color:#bbb; margin-top:4px; }

        .data-actions { display:flex; gap:8px; margin-top:12px; flex-wrap:wrap; }
        .data-btn { padding:7px 14px; border:none; border-radius:7px; font-size:0.75rem; font-weight:600; cursor:pointer; font-family:var(--font); transition:0.2s; display:flex; align-items:center; gap:6px; }
        .data-btn-view { background:#eaf4fe; color:var(--c-info); }
        .data-btn-view:hover { background:#d0e8fc; }
        .data-btn-clear { background:#fff0f0; color:var(--c-accent); }
        .data-btn-clear:hover { background:#fde0e0; }
        .data-btn-tpl { background:#f0f7ff; color:var(--c-purple); }
        .data-btn-tpl:hover { background:#e4edfe; }

        .data-preview { margin-top:14px; max-height:260px; overflow-y:auto; border:1px solid #eee; border-radius:8px; }
        .data-preview table { width:100%; border-collapse:collapse; font-size:0.72rem; }
        .data-preview th { background:#f4f5f7; padding:7px 10px; text-align:left; font-weight:600; color:#555; position:sticky; top:0; border-bottom:1px solid #ddd; }
        .data-preview td { padding:6px 10px; border-bottom:1px solid #f0f0f0; color:#444; }
        .data-preview tr:hover td { background:#f8f9ff; }
        .data-count { font-size:0.72rem; color:#888; margin-top:8px; display:flex; align-items:center; gap:6px; }
        .data-count strong { color:var(--c-nav); }
        .data-count i { color:var(--c-success); }

        /* ═══ CONTENT ═══ */
        .content-area { flex:1; position:relative; overflow:hidden; }
        .welcome { position:absolute; inset:0; display:flex; flex-direction:column; align-items:center; justify-content:center; background:linear-gradient(160deg,#f0f1f4,#e4e7ee,#dfe2ea); z-index:10; transition:opacity 0.4s,transform 0.4s; padding:40px; }
        .welcome.hidden { opacity:0; transform:scale(0.98); pointer-events:none; }
        .welcome-header { text-align:center; margin-bottom:40px; }
        .welcome-logo { width:auto; height:auto; min-height:56px; background:var(--c-accent); border-radius:14px; display:flex; align-items:center; justify-content:center; font-size:24px; color:white; font-weight:700; margin:0 auto 16px; box-shadow:0 8px 32px var(--c-accent-glow); overflow:hidden; }
        .welcome-logo img { height:4cm; width:auto; object-fit:contain; }
        .welcome-title { font-family:var(--font-display); font-size:2rem; font-weight:700; color:var(--c-nav); margin-bottom:6px; }
        .welcome-subtitle { color:#6b7280; font-size:0.95rem; }
        .module-grid { display:flex; flex-wrap:wrap; justify-content:center; gap:16px; max-width:1000px; width:100%; }
        .module-card { background:var(--c-card); border-radius:var(--radius); padding:24px 20px; cursor:pointer; transition:all 0.25s; box-shadow:var(--shadow); border:1px solid var(--c-border); text-align:center; position:relative; overflow:hidden; width:170px; flex-shrink:0; }
        .module-card::before { content:''; position:absolute; top:0; left:0; right:0; height:3px; border-radius:var(--radius) var(--radius) 0 0; transition:height 0.3s; }
        .module-card:hover { transform:translateY(-4px); box-shadow:0 8px 32px rgba(0,0,0,0.12); }
        .module-card:hover::before { height:5px; }
        .module-card.card-hidden { display:none !important; }
        .module-card[data-m="perdir"]::before { background:var(--c-info); }
        .module-card[data-m="exam"]::before { background:var(--c-accent); }
        .module-card[data-m="oral"]::before { background:var(--c-warning); }
        .module-card[data-m="aed"]::before { background:var(--c-success); }
        .module-card[data-m="bibase"]::before { background:#e67e22; }
            .module-card[data-m="data"]::before { background:var(--c-purple); }
        .module-icon { width:44px; height:44px; border-radius:11px; display:flex; align-items:center; justify-content:center; font-size:1.1rem; color:white; margin:0 auto 12px; }
        .module-card[data-m="perdir"] .module-icon { background:var(--c-info); }
        .module-card[data-m="exam"] .module-icon { background:var(--c-accent); }
        .module-card[data-m="oral"] .module-icon { background:var(--c-warning); }
        .module-card[data-m="aed"] .module-icon { background:var(--c-success); }
        .module-card[data-m="bibase"] .module-icon { background:#e67e22; }
            .module-card[data-m="data"] .module-icon { background:var(--c-purple); }
        .module-card h3 { font-size:0.9rem; font-weight:600; color:var(--c-nav); margin-bottom:4px; }
        .module-card p { font-size:0.7rem; color:#9ca3af; line-height:1.3; }

        .module-frame { position:absolute; inset:0; border:none; width:100%; height:100%; display:none; background:white; }
        .module-frame.active { display:block; }
        .loader-overlay { position:absolute; inset:0; background:rgba(240,241,244,0.92); display:flex; flex-direction:column; align-items:center; justify-content:center; z-index:20; opacity:0; pointer-events:none; transition:opacity 0.3s; }
        .loader-overlay.show { opacity:1; pointer-events:auto; }
        .loader-spinner { width:32px; height:32px; border:3px solid var(--c-border); border-top-color:var(--c-accent); border-radius:50%; animation:spin 0.8s linear infinite; margin-bottom:10px; }
        .loader-text { font-size:0.8rem; color:#6b7280; }
        @keyframes spin { to{transform:rotate(360deg)} }

        .bottom-bar { height:26px; background:var(--c-nav); display:flex; align-items:center; justify-content:space-between; padding:0 16px; font-size:0.6rem; color:var(--c-text-dim); flex-shrink:0; }
        .status-dot { display:inline-block; width:5px; height:5px; border-radius:50%; background:var(--c-success); margin-right:5px; animation:pulse-dot 2s ease infinite; }
        @keyframes pulse-dot { 0%,100%{opacity:1} 50%{opacity:0.4} }

        @media (max-width:900px) { .module-grid{grid-template-columns:repeat(2,1fr);max-width:460px} .nav-item .nav-label{display:none} .nav-item{padding:7px 10px} .brand-text span{display:none} .nav-clock{display:none} .settings-grid{grid-template-columns:1fr} .data-body{grid-template-columns:1fr;padding:20px} }
        @media (max-width:500px) { .module-grid{grid-template-columns:1fr;max-width:300px} }
    </style>
    <script src="https://accounts.google.com/gsi/client" async defer></script>
</head>
<body>

    <nav class="topnav">
        <a class="brand" onclick="goHome()" title="Accueil">
            <div class="brand-icon" id="brandIcon"><span id="brandLetter">P</span><img id="brandLogo" style="display:none"></div>
            <div class="brand-text">CADIR<span>Suite Direction</span></div>
        </a>
        <div class="nav-sep"></div>
        <div class="nav-items" id="navItems">
            <div class="nav-item" data-module="perdir" onclick="loadModule('perdir')" title="Ctrl+P"><i class="fas fa-building-columns"></i><span class="nav-label">CADIR</span><span class="nav-badge">Direction</span><kbd class="nav-shortcut">Ctrl+P</kbd></div>
            <div class="nav-item" data-module="exam" onclick="loadModule('exam')" title="Ctrl+E"><i class="fas fa-file-pen"></i><span class="nav-label">EXAM</span><span class="nav-badge">Épreuves</span><kbd class="nav-shortcut">Ctrl+E</kbd></div>
            <div class="nav-item" data-module="oral" onclick="loadModule('oral')" title="Ctrl+O"><i class="fas fa-comments"></i><span class="nav-label">ORAL</span><span class="nav-badge">Oraux</span><kbd class="nav-shortcut">Ctrl+O</kbd></div>
            <div class="nav-item" data-module="aed" onclick="loadModule('aed')" title="Ctrl+A"><i class="fas fa-user-shield"></i><span class="nav-label">AED</span><span class="nav-badge">Vie Scolaire</span><kbd class="nav-shortcut">Ctrl+A</kbd></div>
            <div class="nav-item" data-module="bibase" onclick="loadModule('bibase')" title="Ctrl+B"><i class="fas fa-newspaper"></i><span class="nav-label">BULLETIN</span><span class="nav-badge">Information</span><kbd class="nav-shortcut">Ctrl+B</kbd></div>
            <div class="nav-sep"></div>
            <div class="nav-item" data-module="data" onclick="openDataPanel()" title="Ctrl+D"><i class="fas fa-database"></i><span class="nav-label">Données</span><span class="nav-badge">Import</span><kbd class="nav-shortcut">Ctrl+D</kbd></div>
        </div>
        <div class="nav-right">
            <div class="nav-clock" id="clock"></div>
            <button class="nav-btn" onclick="openSettings()" title="Paramètres (Alt+P)"><i class="fas fa-cog"></i></button>
            <button class="nav-btn" onclick="toggleFullscreen()" title="Plein écran"><i class="fas fa-expand" id="fs-icon"></i></button>
        </div>
    </nav>

    <!-- ═══ SETTINGS ═══ -->
    <div class="settings-overlay" id="settingsOverlay" onclick="if(event.target===this)closeSettings()">
        <div class="settings-panel">
            <div class="settings-header">
                <h2><i class="fas fa-cog"></i> Paramètres généraux</h2>
                <button class="settings-close" onclick="closeSettings()">&times;</button>
            </div>
            <div class="settings-body">

                <div class="acc-section open">
                    <div class="acc-header" onclick="toggleAcc(this)"><h3><i class="fas fa-id-card"></i> Identité & Établissement</h3><i class="fas fa-chevron-right acc-chevron"></i></div>
                    <div class="acc-body">
                    <div class="settings-grid">
                        <div class="form-group"><label>Nom de l'établissement</label><input type="text" id="s-school" placeholder="Lycée Jean-Antoine"></div>
                        <div class="form-group"><label>Nom & Prénom</label><input type="text" id="s-name" placeholder="M. Dupont"></div>
                        <div class="form-group"><label>Fonction</label><input type="text" id="s-role" placeholder="Proviseur adjoint"></div>
                        <div class="form-group"><label>Ville</label><input type="text" id="s-city" placeholder="Rennes"></div>
                        <div class="form-group"><label>Zone de vacances</label><select id="s-zone" style="padding:8px 12px;border:1px solid #ddd;border-radius:8px;font-size:.85rem;width:100%;"><option value="A">Zone A</option><option value="B" selected>Zone B</option><option value="C">Zone C</option></select></div>
                        <div class="form-group" style="display:flex;align-items:flex-end;">
                            <button onclick="triggerVacancesUpdate()" style="padding:9px 16px;border:none;border-radius:8px;background:#e67e22;color:#fff;font-weight:600;font-size:.78rem;cursor:pointer;white-space:nowrap;display:flex;align-items:center;gap:6px;height:40px;">
                                <i class="fas fa-calendar-day"></i> MAJ Vacances scolaires
                            </button>
                        </div>
                    </div>
                </div></div>
                <div class="acc-section">
                    <div class="acc-header" onclick="toggleAcc(this)"><h3><i class="fas fa-image"></i> Logo & Signature</h3><i class="fas fa-chevron-right acc-chevron"></i></div>
                    <div class="acc-body">
                    <div class="settings-grid">
                        <div class="form-group">
                            <label>Logo de l'établissement</label>
                            <input type="file" accept="image/*" onchange="handleSettingsImage(this,'logo')">
                            <div class="img-preview" id="prev-logo">
                                <span class="placeholder" id="ph-logo">Aucun logo</span>
                                <img id="img-logo" style="display:none">
                                <button class="btn-clear" onclick="clearImage('logo')" title="Supprimer">&times;</button>
                            </div>
                        </div>
                        <div class="form-group">
                            <label>Signature scannée</label>
                            <input type="file" accept="image/*" onchange="handleSettingsImage(this,'sign')">
                            <div class="img-preview" id="prev-sign">
                                <span class="placeholder" id="ph-sign">Aucune signature</span>
                                <img id="img-sign" style="display:none">
                                <button class="btn-clear" onclick="clearImage('sign')" title="Supprimer">&times;</button>
                            </div>
                        </div>
                    </div>
                </div></div>
                <div class="acc-section">
                    <div class="acc-header" onclick="toggleAcc(this)"><h3><i class="fas fa-sliders"></i> Modules &amp; Organisation</h3><i class="fas fa-chevron-right acc-chevron"></i></div>
                    <div class="acc-body">
                        <h4 style="font-size:.78rem;font-weight:600;color:#666;margin:0 0 10px;text-transform:uppercase;letter-spacing:.5px"><i class="fas fa-eye" style="color:var(--c-info)"></i> Modules affichés</h4>
                        <div class="module-toggle">
                        <div class="module-toggle-icon" style="background:var(--c-info)"><i class="fas fa-building-columns"></i></div>
                        <div class="module-toggle-info"><strong>CADIR</strong><span>Direction & pilotage</span></div>
                        <label class="toggle-switch"><input type="checkbox" id="tog-perdir" checked onchange="updateModuleVisibility()"><span class="toggle-slider"></span></label>
                    </div>
                    <div class="module-toggle">
                        <div class="module-toggle-icon" style="background:var(--c-accent)"><i class="fas fa-file-pen"></i></div>
                        <div class="module-toggle-info"><strong>EXAM</strong><span>Organisation des épreuves</span></div>
                        <label class="toggle-switch"><input type="checkbox" id="tog-exam" checked onchange="updateModuleVisibility()"><span class="toggle-slider"></span></label>
                    </div>
                    <div class="module-toggle">
                        <div class="module-toggle-icon" style="background:var(--c-warning)"><i class="fas fa-comments"></i></div>
                        <div class="module-toggle-info"><strong>ORAL</strong><span>Gestion des oraux</span></div>
                        <label class="toggle-switch"><input type="checkbox" id="tog-oral" checked onchange="updateModuleVisibility()"><span class="toggle-slider"></span></label>
                    </div>
                    <div class="module-toggle">
                        <div class="module-toggle-icon" style="background:var(--c-success)"><i class="fas fa-user-shield"></i></div>
                        <div class="module-toggle-info"><strong>AED</strong><span>Assistants d'éducation</span></div>
                        <label class="toggle-switch"><input type="checkbox" id="tog-aed" checked onchange="updateModuleVisibility()"><span class="toggle-slider"></span></label>
                    </div>
                    <div class="module-toggle">
                        <div class="module-toggle-icon" style="background:#e67e22"><i class="fas fa-newspaper"></i></div>
                        <div class="module-toggle-info"><strong>BULLETIN</strong><span>Bulletin d'information</span></div>
                        <label class="toggle-switch"><input type="checkbox" id="tog-bibase" checked onchange="updateModuleVisibility()"><span class="toggle-slider"></span></label>
                    </div>
                        <hr style="margin:18px 0;border:none;border-top:1px solid #eee">
                        <h4 style="font-size:.78rem;font-weight:600;color:#666;margin:0 0 10px;text-transform:uppercase;letter-spacing:.5px"><i class="fas fa-arrows-up-down" style="color:var(--c-info)"></i> Ordre des menus</h4>
                        <ul class="order-list" id="orderList"></ul>
                    <div class="order-hint"><i class="fas fa-hand-pointer"></i> Glissez-déposez pour réorganiser l'ordre</div>
                    
                    </div>
                </div>
                <div class="acc-section">
                    <div class="acc-header" onclick="toggleAcc(this)"><h3><i class="fas fa-bars"></i> Sous-menus CADIR</h3><i class="fas fa-chevron-right acc-chevron"></i></div>
                    <div class="acc-body"><div class="acc-body-inner">
                        <small style="color:#888;display:block;margin-bottom:10px;">Affichez/masquez et réorganisez les sous-menus du module CADIR par glisser-déposer.</small>
                        <div id="perdir-submenu-list" style="margin-bottom:8px;"></div>
                        <div class="order-hint" style="font-size:.68rem;color:#aaa;"><i class="fas fa-hand-pointer"></i> Glissez pour réordonner. Décochez pour masquer.</div>
                    </div></div>
                </div>
                <div class="acc-section">
                    <div class="acc-header" onclick="toggleAcc(this)"><h3><i class="fas fa-calendar-alt"></i> Agendas externes</h3><i class="fas fa-chevron-right acc-chevron"></i></div>
                    <div class="acc-body">
                    <div class="settings-grid">
                        <div class="form-group" style="grid-column:1/-1;">
                            <label style="display:flex;align-items:center;gap:8px;cursor:pointer;">
                                <input type="checkbox" id="s-gcal" onchange="toggleGcal()" style="width:18px;height:18px;cursor:pointer;accent-color:#4285f4;">
                                <span style="font-weight:600;">Utiliser Google Agenda dans CADIR</span>
                            </label>
                            <small style="color:#888;font-size:.65rem;margin-top:2px;display:block;margin-left:26px;">Si décoché, l'agenda CADIR fonctionne en mode local (déconnecté).</small>
                        </div>
                        <div id="gcal-opts" style="display:none;grid-column:1/-1;">
                            <div style="background:#f8f9fa;border:1px solid #e0e0e0;border-radius:10px;padding:14px;margin-bottom:12px;">
                                <div style="font-weight:600;font-size:.8rem;margin-bottom:8px;color:#333;"><i class="fab fa-google" style="color:#4285f4;margin-right:4px;"></i> Connexion OAuth2</div>
                                <div class="form-group" style="margin-bottom:8px">
                                    <label style="font-size:.75rem;">Client ID OAuth2</label>
                                    <input type="text" id="s-gcal-clientid" placeholder="xxxxx.apps.googleusercontent.com" style="padding:8px;border:1px solid #ddd;border-radius:8px;width:100%;font-size:.8rem;">
                                    <small style="color:#888;font-size:.62rem;">Console Google Cloud → API & Services → Identifiants → ID client OAuth 2.0 (<a href="https://console.cloud.google.com/apis/credentials" target="_blank">ouvrir</a>)</small>
                                </div>
                                <div style="display:flex;gap:8px;align-items:center;flex-wrap:wrap;">
                                    <button onclick="gcalAuth()" id="btn-gcal-auth" style="padding:7px 16px;border:none;border-radius:8px;background:#4285f4;color:#fff;font-weight:600;font-size:.78rem;cursor:pointer;display:flex;align-items:center;gap:6px;">
                                        <i class="fas fa-sign-in-alt"></i> Se connecter à Google
                                    </button>
                                    <span id="gcal-auth-status" style="font-size:.72rem;color:#999;"></span>
                                </div>
                            </div>

                            <div id="gcal-list-wrap" style="display:none;">
                                <div style="font-weight:600;font-size:.78rem;margin-bottom:6px;color:#333;"><i class="fas fa-list"></i> Vos agendas Google</div>
                                <div id="gcal-list" style="margin-bottom:8px;max-height:200px;overflow-y:auto;"></div>
                                <button onclick="gcalFetchEvents()" style="padding:7px 14px;border:none;border-radius:8px;background:#34a853;color:#fff;font-weight:600;font-size:.78rem;cursor:pointer;"><i class="fas fa-sync"></i> Synchroniser les événements</button>
                                <div id="gcal-events-status" style="margin-top:6px;font-size:.72rem;color:#888;"></div>
                            </div>

                            <div style="margin-top:12px;border-top:1px solid #eee;padding-top:10px;">
                                <details>
                                    <summary style="cursor:pointer;font-size:.72rem;color:#888;font-weight:600;"><i class="fas fa-keyboard"></i> Ajouter un agenda manuellement</summary>
                                    <div style="margin-top:8px;">
                                        <small style="color:#888;font-size:.62rem;display:block;margin-bottom:6px;">Pour les agendas publics : copiez l'ID depuis Google Agenda → Paramètres de l'agenda.</small>
                                        <div class="form-group" style="margin-bottom:6px">
                                            <label style="font-size:.72rem;">Clé API (pour agendas publics)</label>
                                            <input type="text" id="s-gcal-key" placeholder="AIzaSy..." style="padding:7px;border:1px solid #ddd;border-radius:8px;width:100%;font-size:.78rem;">
                                        </div>
                                        <div style="display:flex;gap:6px;align-items:flex-end;">
                                            <div class="form-group" style="flex:2;">
                                                <label style="font-size:.72rem;">ID du calendrier</label>
                                                <input type="text" id="gcal-manual-id" placeholder="email@gmail.com" style="padding:7px;border:1px solid #ddd;border-radius:8px;width:100%;font-size:.78rem;">
                                            </div>
                                            <div class="form-group" style="flex:1;">
                                                <label style="font-size:.72rem;">Nom</label>
                                                <input type="text" id="gcal-manual-name" placeholder="Mon agenda" style="padding:7px;border:1px solid #ddd;border-radius:8px;width:100%;font-size:.78rem;">
                                            </div>
                                            <button onclick="addManualCal()" style="padding:7px 12px;border:none;border-radius:8px;background:var(--c-info);color:#fff;font-weight:700;cursor:pointer;font-size:.85rem;height:36px;">+</button>
                                        </div>
                                        <div id="gcal-manual-list" style="margin-top:6px;"></div>
                                    </div>
                                </details>
                            </div>
                        </div>

                            <div style="margin-top:20px;border-top:2px solid #e0e0e0;padding-top:16px;">
                                <div style="font-weight:700;font-size:.88rem;margin-bottom:10px;color:#0078d4;display:flex;align-items:center;gap:8px;"><i class="fab fa-microsoft"></i> Outlook / Office 365</div>
                                <small style="color:#666;display:block;margin-bottom:10px;line-height:1.4;font-size:.7rem;">Connectez un calendrier Outlook / Microsoft 365 via Microsoft Graph API.</small>
                                <div class="form-group" style="margin-bottom:8px;"><label style="font-size:.72rem;">Application (client) ID</label><input type="text" id="s-outlook-clientid" placeholder="Azure AD App ID" style="padding:8px;border:1px solid #ddd;border-radius:8px;width:100%;font-size:.78rem;"></div>
                                <button onclick="outlookAuth()" id="btn-outlook-auth" style="padding:9px 18px;border:none;border-radius:8px;background:#0078d4;color:#fff;font-weight:600;cursor:pointer;display:flex;align-items:center;gap:8px;font-size:.8rem;"><i class="fab fa-microsoft"></i> Connecter Outlook</button>
                                <span id="outlook-auth-status" style="font-size:.72rem;color:#888;margin-left:8px;"></span>
                                <div id="outlook-cal-list-wrap" style="display:none;margin-top:12px;">
                                    <label style="font-size:.72rem;font-weight:600;">Agendas Outlook :</label>
                                    <div id="outlook-cal-list" style="margin-top:6px;"></div>
                                    <button onclick="outlookFetchEvents()" style="margin-top:8px;padding:8px 16px;border:none;border-radius:8px;background:#0078d4;color:#fff;font-weight:600;cursor:pointer;font-size:.78rem;"><i class="fas fa-sync"></i> Synchroniser</button>
                                    <span id="outlook-events-status" style="font-size:.72rem;margin-left:8px;"></span>
                                </div>
                            </div>
                    </div>
                </div></div>
                <div class="acc-section">
                    <div class="acc-header" onclick="toggleAcc(this)"><h3><i class="fas fa-hard-drive"></i> Sauvegarde & Synchronisation</h3><i class="fas fa-chevron-right acc-chevron"></i></div>
                    <div class="acc-body">
                    <div style="margin-bottom:18px;padding:16px;background:#f0f7ff;border:1px solid #c8ddf5;border-radius:10px;">
                        <div style="display:flex;align-items:center;gap:8px;margin-bottom:10px;">
                            <i class="fas fa-cloud" style="color:#3498db;font-size:1.1rem;"></i>
                            <strong style="font-size:.85rem;color:#2c3e50;">Synchronisation en ligne</strong>
                            <label class="toggle-switch" style="margin-left:auto;"><input type="checkbox" id="s-cloud-enabled" onchange="toggleCloudUI()"><span class="toggle-slider"></span></label>
                        </div>
                        <div id="cloud-opts" style="display:none;">
                            <div style="margin-bottom:12px;">
                                <label style="font-size:.78rem;font-weight:600;color:#333;display:block;margin-bottom:6px;">Fournisseur de stockage</label>
                                <div style="display:flex;gap:8px;flex-wrap:wrap;" id="cloud-provider-btns">
                                    <button class="cloud-prov-btn active" data-prov="jsonbin" onclick="selectCloudProvider('jsonbin')"><i class="fas fa-database" style="color:#3498db"></i> jsonbin.io<br><small>Gratuit &bull; Simple</small></button>
                                    <button class="cloud-prov-btn" data-prov="gist" onclick="selectCloudProvider('gist')"><i class="fab fa-github" style="color:#333"></i> GitHub Gist<br><small>Gratuit &bull; Illimité</small></button>
                                    <button class="cloud-prov-btn" data-prov="webdav" onclick="selectCloudProvider('webdav')"><i class="fas fa-server" style="color:#e67e22"></i> WebDAV / FTP<br><small>Serveur perso</small></button>
                                    <button class="cloud-prov-btn" data-prov="gdrive" onclick="selectCloudProvider('gdrive')"><i class="fab fa-google-drive" style="color:#0f9d58"></i> Google Drive<br><small>OAuth2</small></button>
                                    <button class="cloud-prov-btn" data-prov="localfolder" onclick="selectCloudProvider('localfolder')"><i class="fas fa-folder-open" style="color:#0078d4"></i> Dossier Local<br><small>OneDrive / GDrive / Dropbox</small></button>
                                </div>
                            </div>
                            <div id="cloud-cfg-jsonbin">
                                <small style="color:#666;display:block;margin-bottom:8px;line-height:1.4;"><a href="https://jsonbin.io" target="_blank" style="color:#3498db;">jsonbin.io</a> — Créez un compte gratuit, copiez votre <b>X-Master-Key</b> depuis le dashboard.</small>
                                <div class="settings-grid">
                                    <div class="form-group"><label style="font-size:.72rem;">Clé API (X-Master-Key)</label><input type="password" id="s-cloud-key" placeholder="$2a$10$xxxxxxx..." style="padding:8px;border:1px solid #ddd;border-radius:8px;width:100%;font-size:.78rem;"></div>
                                    <div class="form-group"><label style="font-size:.72rem;">ID du Bin <small style="color:#aaa;">(auto-créé)</small></label><input type="text" id="s-cloud-bin" placeholder="Automatique au 1er envoi" style="padding:8px;border:1px solid #ddd;border-radius:8px;width:100%;font-size:.78rem;"></div>
                                </div>
                            </div>
                            <div id="cloud-cfg-gist" style="display:none;">
                                <small style="color:#666;display:block;margin-bottom:8px;line-height:1.4;"><a href="https://github.com/settings/tokens" target="_blank" style="color:#333;">GitHub</a> — Créez un <b>Personal Access Token</b> (scope <code>gist</code>). Stockage illimité et privé.</small>
                                <div class="settings-grid">
                                    <div class="form-group"><label style="font-size:.72rem;">Personal Access Token</label><input type="password" id="s-gist-token" placeholder="ghp_xxxxxxxxxxxx" style="padding:8px;border:1px solid #ddd;border-radius:8px;width:100%;font-size:.78rem;"></div>
                                    <div class="form-group"><label style="font-size:.72rem;">Gist ID <small style="color:#aaa;">(auto-créé)</small></label><input type="text" id="s-gist-id" placeholder="Automatique au 1er envoi" style="padding:8px;border:1px solid #ddd;border-radius:8px;width:100%;font-size:.78rem;"></div>
                                </div>
                            </div>
                            <div id="cloud-cfg-gdrive" style="display:none;">
                                <small style="color:#666;display:block;margin-bottom:8px;line-height:1.4;">Utilisez <b>Google Drive</b> pour stocker vos données. Nécessite le même Client ID OAuth2 que Google Agenda (ajouter le scope <code>drive.file</code>).</small>
                                <div class="settings-grid">
                                    <div class="form-group"><label style="font-size:.72rem;">Client ID OAuth2</label><input type="text" id="s-gdrive-clientid" placeholder="Même que Google Agenda" style="padding:8px;border:1px solid #ddd;border-radius:8px;width:100%;font-size:.78rem;"></div>
                                    <div class="form-group"><label style="font-size:.72rem;">File ID <small style="color:#aaa;">(auto-créé)</small></label><input type="text" id="s-gdrive-fileid" placeholder="Automatique au 1er envoi" style="padding:8px;border:1px solid #ddd;border-radius:8px;width:100%;font-size:.78rem;"></div>
                                </div>
                                <button class="backup-btn" onclick="gdriveAuth()" style="margin-top:8px;background:#0f9d58;color:#fff;border-color:#0f9d58;"><i class="fab fa-google"></i> Connecter Google Drive</button>
                                <span id="gdrive-auth-status" style="font-size:.72rem;color:#888;margin-left:8px;"></span>
                            </div>
                            <div id="cloud-cfg-localfolder" style="display:none;">
                                <div id="lf-mode-auto" style="display:none;">
                                    <small style="color:#666;display:block;margin-bottom:10px;line-height:1.4;"><b>Mode automatique</b> — Toutes vos données sont synchronisées en temps réel dans le dossier local choisi (OneDrive, Google Drive, Dropbox…).</small>
                                    <div style="display:flex;align-items:center;gap:10px;flex-wrap:wrap;margin-bottom:8px;">
                                        <button class="backup-btn" onclick="lfPickFolder()" style="background:#0078d4;color:#fff;border-color:#0078d4;" id="lf-pick-btn"><i class="fas fa-folder-open"></i> Choisir le dossier</button>
                                        <span id="lf-auto-status" style="font-size:.72rem;color:#888;"></span>
                                    </div>
                                    <div id="lf-auto-actions" style="display:none;margin-top:6px;">
                                        <div style="display:flex;gap:8px;flex-wrap:wrap;">
                                            <button class="backup-btn" onclick="lfForceSave()" style="background:#27ae60;color:#fff;border-color:#27ae60;font-size:.72rem;padding:6px 12px;"><i class="fas fa-save"></i> Forcer la sauvegarde</button>
                                            <button class="backup-btn" onclick="lfForceLoad()" style="background:#3498db;color:#fff;border-color:#3498db;font-size:.72rem;padding:6px 12px;"><i class="fas fa-sync"></i> Recharger depuis le fichier</button>
                                        </div>
                                    </div>
                                    <small style="color:#aaa;display:block;margin-top:8px;"><i class="fas fa-info-circle"></i> Le fichier <code>pilote_data.json</code> est automatiquement mis à jour dans le dossier sélectionné à chaque modification.</small>
                                </div>
                                <div id="lf-mode-manual">
                                    <small style="color:#666;display:block;margin-bottom:10px;line-height:1.4;">Sauvegardez vos données dans un fichier <code>pilote_data.json</code> que vous placez dans votre <b>dossier synchronisé</b> (OneDrive, Google Drive, Dropbox…).</small>
                                    <div style="display:flex;gap:10px;flex-wrap:wrap;margin-bottom:8px;">
                                        <button class="backup-btn" onclick="localFolderExport()" style="background:#0078d4;color:#fff;border-color:#0078d4;"><i class="fas fa-download"></i> Exporter</button>
                                        <label class="backup-btn" style="background:#27ae60;color:#fff;border-color:#27ae60;cursor:pointer;margin:0;"><i class="fas fa-upload"></i> Importer
                                            <input type="file" id="localfolder-import" accept=".json" style="display:none;" onchange="localFolderImport(this)">
                                        </label>
                                    </div>
                                    <span id="localfolder-status" style="font-size:.72rem;color:#888;display:block;margin-top:4px;"></span>
                                    <div style="background:#fffbea;border:1px solid #f0d060;border-radius:8px;padding:10px 12px;margin-top:10px;">
                                        <small style="color:#8a6d00;line-height:1.5;display:block;"><i class="fas fa-lightbulb" style="color:#f0a030;"></i> <b>Astuce — Synchronisation automatique :</b><br>
                                        Lancez un mini-serveur local pour activer l'écriture directe dans votre dossier :<br>
                                        <code style="background:#fff;padding:3px 8px;border-radius:4px;display:inline-block;margin:4px 0;user-select:all;cursor:pointer;" onclick="navigator.clipboard.writeText(this.textContent)" title="Cliquer pour copier">python3 -m http.server 8080</code><br>
                                        puis ouvrez <code style="user-select:all;cursor:pointer;" onclick="navigator.clipboard.writeText('http://localhost:8080/PILOTE_Suite.html')">http://localhost:8080/PILOTE_Suite.html</code></small>
                                    </div>
                                </div>
                            </div>
                            <div id="cloud-cfg-webdav" style="display:none;">
                                <small style="color:#666;display:block;margin-bottom:8px;line-height:1.4;">Connectez un serveur <b>WebDAV</b> (Nextcloud, OwnCloud, Synology, NAS…). Le protocole FTP natif n'est pas supporté par les navigateurs — utilisez un proxy WebDAV.</small>
                                <div class="settings-grid">
                                    <div class="form-group" style="grid-column:1/-1;"><label style="font-size:.72rem;">URL du serveur WebDAV</label><input type="text" id="s-webdav-url" placeholder="https://cloud.monserveur.fr/remote.php/dav/files/user/" style="padding:8px;border:1px solid #ddd;border-radius:8px;width:100%;font-size:.78rem;"></div>
                                    <div class="form-group"><label style="font-size:.72rem;">Identifiant</label><input type="text" id="s-webdav-user" placeholder="utilisateur" style="padding:8px;border:1px solid #ddd;border-radius:8px;width:100%;font-size:.78rem;"></div>
                                    <div class="form-group"><label style="font-size:.72rem;">Mot de passe</label><input type="password" id="s-webdav-pass" placeholder="••••••••" style="padding:8px;border:1px solid #ddd;border-radius:8px;width:100%;font-size:.78rem;"></div>
                                </div>
                            </div>
                            <div style="display:flex;gap:8px;flex-wrap:wrap;margin-top:12px;">
                                <button class="backup-btn" onclick="cloudPush()" style="background:#27ae60;color:#fff;border-color:#27ae60;"><i class="fas fa-cloud-arrow-up"></i> Envoyer</button>
                                <button class="backup-btn" onclick="cloudPull()" style="background:#3498db;color:#fff;border-color:#3498db;"><i class="fas fa-cloud-arrow-down"></i> Récupérer</button>
                            </div>
                            <div id="cloud-status" style="margin-top:8px;font-size:.72rem;color:#888;"></div>
                            <label style="display:flex;align-items:center;gap:6px;margin-top:10px;cursor:pointer;font-size:.75rem;color:#555;">
                                <input type="checkbox" id="s-cloud-auto" style="accent-color:#27ae60;"> Sync automatique à chaque sauvegarde
                            </label>
                        </div>
                    </div>
                    <div class="settings-backup">
                        <button class="backup-btn" onclick="exportSettings()"><i class="fas fa-download"></i> Exporter les paramètres</button>
                        <label class="backup-btn import-btn"><i class="fas fa-upload"></i> Importer des paramètres<input type="file" accept=".json" onchange="importSettings(this)"></label>
                    </div>
                    <div class="order-hint" style="margin-top:8px"><i class="fas fa-info-circle"></i> Exportez vos paramètres pour les conserver entre les versions. Le fichier JSON contient identité, images, ordre et visibilité des modules.</div>
                </div></div>
            </div>
            <div class="acc-section">
                    <div class="acc-header" onclick="toggleAcc(this)"><h3><i class="fas fa-newspaper" style="color:#e67e22"></i> Bulletin d'information</h3><i class="fas fa-chevron-right acc-chevron"></i></div>
                    <div class="acc-body">
                    <small style="color:#888;display:block;margin-bottom:12px">Paramètres du module Bulletin d'information.</small>
                    <div class="settings-grid">
                        <div class="form-group">
                            <label>Mise en page du PDF</label>
                            <select id="bib-layout" style="padding:8px 12px;border:1px solid #ddd;border-radius:8px;font-size:.85rem;width:100%;">
                                <option value="classic">Classique</option>
                                <option value="modern">Centré</option>
                                <option value="banner">Bandeau</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Police d'écriture</label>
                            <select id="bib-font" style="padding:8px 12px;border:1px solid #ddd;border-radius:8px;font-size:.85rem;width:100%;">
                                <option value="inter">Inter (Moderne, Sans Serif)</option>
                                <option value="serif">Merriweather (Classique, Serif)</option>
                                <option value="mono">Roboto Mono (Monospace)</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Signataire par défaut</label>
                            <select id="bib-signatory" style="padding:8px 12px;border:1px solid #ddd;border-radius:8px;font-size:.85rem;width:100%;">
                                <option value="L'équipe de direction">L'équipe de direction</option>
                                <option value="Le Chef d'établissement">Le Chef d'établissement</option>
                                <option value="Le Directeur adjoint">Le Directeur adjoint</option>
                                <option value="Le Proviseur">Le Proviseur</option>
                                <option value="Le Principal">Le Principal</option>
                                <option value="Tous">Tous</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Titre du document</label>
                            <input type="text" id="bib-doc-title" value="Bulletin d'information" style="padding:8px 12px;border:1px solid #ddd;border-radius:8px;font-size:.85rem;width:100%;">
                        </div>
                    </div>
                    <div style="margin-top:10px">
                        <div class="form-group">
                            <label>Note de pied de page (PDF)</label>
                            <input type="text" id="bib-doc-footer" placeholder="Ex: Document Interne - Ne pas diffuser" style="padding:8px 12px;border:1px solid #ddd;border-radius:8px;font-size:.85rem;width:100%;">
                        </div>
                    </div>
                </div></div>
            <div class="settings-footer">
                <button class="btn-settings btn-cancel" onclick="closeSettings()">Annuler</button>
                <button class="btn-settings btn-save" onclick="saveSettings()"><i class="fas fa-check"></i> Enregistrer</button>
            </div>
        </div>
    </div>

    <!-- ═══ CONTENT ═══ -->
    <div class="content-area" id="contentArea">
        <div class="welcome" id="welcome">
            <div class="welcome-header">
                <div class="welcome-logo" id="welcomeLogo"><span id="welcomeLetter">P</span><img id="welcomeLogoImg" style="display:none"></div>
                <h1 class="welcome-title">Bienvenue sur CADIR</h1>
                <p class="welcome-subtitle" id="welcomeSubtitle">Suite d'outils pour la direction d'établissement</p>
            </div>
            <div class="module-grid" id="moduleGrid">
                <div class="module-card" data-m="perdir" onclick="loadModule('perdir')"><div class="module-icon"><i class="fas fa-building-columns"></i></div><h3>CADIR</h3><p>Direction & pilotage</p></div>
                <div class="module-card" data-m="exam" onclick="loadModule('exam')"><div class="module-icon"><i class="fas fa-file-pen"></i></div><h3>EXAM</h3><p>Organisation des épreuves</p></div>
                <div class="module-card" data-m="oral" onclick="loadModule('oral')"><div class="module-icon"><i class="fas fa-comments"></i></div><h3>ORAL</h3><p>Gestion des oraux & écrits</p></div>
                <div class="module-card" data-m="aed" onclick="loadModule('aed')"><div class="module-icon"><i class="fas fa-user-shield"></i></div><h3>AED</h3><p>Assistants d'éducation</p></div>
                <div class="module-card" data-m="bibase" onclick="loadModule('bibase')"><div class="module-icon"><i class="fas fa-newspaper"></i></div><h3>BULLETIN</h3><p>Bulletin d'information</p></div>
                <div class="module-card" data-m="data" onclick="openDataPanel()"><div class="module-icon"><i class="fas fa-database"></i></div><h3>DONNÉES</h3><p>Import élèves & enseignants</p></div>
            </div>
        </div>

        <!-- DATA PANEL -->
        <div class="data-panel" id="dataPanel">
            <div class="data-header">
                <h1><i class="fas fa-database"></i> Données</h1>
                <p>Importez vos listes d'enseignants et d'élèves. Les données seront partagées avec tous les modules.</p>
            </div>
            <div class="data-body">
                <div class="data-card">
                    <div class="data-card-header teachers">
                        <i class="fas fa-chalkboard-teacher"></i>
                        <h3>Enseignants</h3>
                        <span class="data-badge" id="badge-teachers">Non chargé</span>
                    </div>
                    <div class="data-card-body">
                        <div class="data-actions" style="margin-bottom:12px">
                            <button class="data-btn data-btn-tpl" onclick="downloadTemplate('teachers')"><i class="fas fa-file-download"></i> Télécharger le modèle vierge</button>
                        </div>
                        <div class="excel-drop" id="drop-teachers">
                            <input type="file" accept=".xlsx,.xls,.csv" multiple onchange="handleExcelImport(this,'teachers')">
                            <i class="fas fa-file-excel drop-icon"></i>
                            <div class="drop-label" id="lbl-teachers">Cliquez ou glissez un fichier Excel</div>
                            <div class="drop-hint">.xlsx, .xls ou .csv — plusieurs fichiers possibles</div>
                        </div>
                        <div class="data-actions" id="actions-teachers" style="display:none">
                            <button class="data-btn data-btn-view" onclick="togglePreview('teachers')"><i class="fas fa-table"></i> Voir / Masquer</button>
                            <button class="data-btn data-btn-clear" onclick="clearExcelData('teachers')"><i class="fas fa-trash"></i> Supprimer</button>
                        </div>
                        <div class="data-count" id="count-teachers"></div>
                        <div class="data-preview" id="preview-teachers" style="display:none"></div>
                    </div>
                </div>
                <div class="data-card">
                    <div class="data-card-header students">
                        <i class="fas fa-user-graduate"></i>
                        <h3>Élèves</h3>
                        <span class="data-badge" id="badge-students">Non chargé</span>
                    </div>
                    <div class="data-card-body">
                        <div class="data-actions" style="margin-bottom:12px">
                            <button class="data-btn data-btn-tpl" onclick="downloadTemplate('students')"><i class="fas fa-file-download"></i> Télécharger le modèle vierge</button>
                        </div>
                        <div class="excel-drop" id="drop-students">
                            <input type="file" accept=".xlsx,.xls,.csv" multiple onchange="handleExcelImport(this,'students')">
                            <i class="fas fa-file-excel drop-icon"></i>
                            <div class="drop-label" id="lbl-students">Cliquez ou glissez un fichier Excel</div>
                            <div class="drop-hint">.xlsx, .xls ou .csv — plusieurs fichiers possibles</div>
                        </div>
                        <div class="data-actions" id="actions-students" style="display:none">
                            <button class="data-btn data-btn-view" onclick="togglePreview('students')"><i class="fas fa-table"></i> Voir / Masquer</button>
                            <button class="data-btn data-btn-clear" onclick="clearExcelData('students')"><i class="fas fa-trash"></i> Supprimer</button>
                        </div>
                        <div class="data-count" id="count-students"></div>
                        <div class="data-preview" id="preview-students" style="display:none"></div>
                    </div>
                </div>
            </div>
        </div>

        <div class="loader-overlay" id="loader"><div class="loader-spinner"></div><div class="loader-text">Chargement du module…</div></div>
        <iframe class="module-frame" id="frame-perdir" sandbox="allow-scripts allow-same-origin allow-popups allow-modals allow-downloads allow-forms"></iframe>
        <iframe class="module-frame" id="frame-exam" sandbox="allow-scripts allow-same-origin allow-popups allow-modals allow-downloads allow-forms"></iframe>
        <iframe class="module-frame" id="frame-oral" sandbox="allow-scripts allow-same-origin allow-popups allow-modals allow-downloads allow-forms"></iframe>
        <iframe class="module-frame" id="frame-aed" sandbox="allow-scripts allow-same-origin allow-popups allow-modals allow-downloads allow-forms"></iframe>
        <iframe class="module-frame" id="frame-bibase" sandbox="allow-scripts allow-same-origin allow-popups allow-modals allow-downloads allow-forms"></iframe>
    </div>

    <div class="bottom-bar">
        <div><span class="status-dot"></span>Tous les modules opérationnels</div>
        <div id="lf-sync-indicator" style="display:none;font-size:.7rem;color:#888;cursor:pointer;" onclick="lfForceSave()" title="Cliquer pour forcer la sauvegarde"><i class="fas fa-circle" style="color:#27ae60;font-size:.5rem;vertical-align:middle;margin-right:4px;"></i><span id="lf-sync-text">Synchronisé</span></div>
        <div id="bottomBarInfo">CADIR Suite — Direction</div>
    </div>

    <script>
    const MODULE_DATA = {
  "perdir": "PCFET0NUWVBFIGh0bWw+CjxodG1sIGxhbmc9ImZyIj4KPGhlYWQ+CiAgICA8bWV0YSBjaGFyc2V0PSJVVEYtOCI+CiAgICA8bWV0YSBuYW1lPSJ2aWV3cG9ydCIgY29udGVudD0id2lkdGg9ZGV2aWNlLXdpZHRoLCBpbml0aWFsLXNjYWxlPTEuMCI+CiAgICA8dGl0bGU+Q0FESVI8L3RpdGxlPgogICAgPGxpbmsgaHJlZj0iaHR0cHM6Ly9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvZm9udC1hd2Vzb21lLzYuNC4wL2Nzcy9hbGwubWluLmNzcyIgcmVsPSJzdHlsZXNoZWV0Ij4KICAgIDxzY3JpcHQgc3JjPSJodHRwczovL2Nkbi5qc2RlbGl2ci5uZXQvbnBtL2NoYXJ0LmpzIj48L3NjcmlwdD4KICAgIDxzdHlsZT4KICAgICAgICA6cm9vdCB7CiAgICAgICAgICAgIC0tcHJpbWFyeTogIzJjM2U1MDsKICAgICAgICAgICAgLS1zZWNvbmRhcnk6ICMzNDQ5NWU7CiAgICAgICAgICAgIC0tYWNjZW50OiAjYzAzOTJiOwogICAgICAgICAgICAtLWhlYWRlcjogIzJjM2U1MDsKICAgICAgICAgICAgLS1tZW51LXRleHQ6ICMxYWJjOWM7CiAgICAgICAgICAgIC0taGlnaGxpZ2h0OiAjZTc0YzNjOwogICAgICAgICAgICAtLXdhcm5pbmc6ICNmMzljMTI7CiAgICAgICAgICAgIC0tc3VjY2VzczogIzI3YWU2MDsKICAgICAgICAgICAgLS1pbmZvOiAjMjk4MGI5OwogICAgICAgICAgICAtLWxpZ2h0OiAjZWNmMGYxOwogICAgICAgICAgICAtLWZvbnQtbWFpbjogJ1NlZ29lIFVJJywgVGFob21hLCBHZW5ldmEsIFZlcmRhbmEsIHNhbnMtc2VyaWY7CiAgICAgICAgfQoKICAgICAgICAqIHsgYm94LXNpemluZzogYm9yZGVyLWJveDsgbWFyZ2luOiAwOyBwYWRkaW5nOiAwOyB9CiAgICAgICAgYm9keSB7IGZvbnQtZmFtaWx5OiB2YXIoLS1mb250LW1haW4pOyBiYWNrZ3JvdW5kLWNvbG9yOiAjZWVmMmY1OyBjb2xvcjogIzMzMzsgZGlzcGxheTogZmxleDsgaGVpZ2h0OiAxMDB2aDsgb3ZlcmZsb3c6IGhpZGRlbjsgfQoKICAgICAgICAvKiBTSURFQkFSICovCiAgICAgICAgLnNpZGViYXIgeyAtLXNpZGViYXItdzogMjgwcHg7IHdpZHRoOiB2YXIoLS1zaWRlYmFyLXcpOyBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1wcmltYXJ5KTsgY29sb3I6IHdoaXRlOyBkaXNwbGF5OiBmbGV4OyBmbGV4LWRpcmVjdGlvbjogY29sdW1uOyBmbGV4LXNocmluazogMDsgfQogICAgICAgIC5icmFuZCB7IHBhZGRpbmc6IDI1cHggMjBweDsgZm9udC1zaXplOiAxLjJyZW07IGZvbnQtd2VpZ2h0OiBib2xkOyB0ZXh0LWFsaWduOiBjZW50ZXI7IGJhY2tncm91bmQ6ICMxYTI1MmY7IGJvcmRlci1ib3R0b206IDJweCBzb2xpZCB2YXIoLS1tZW51LXRleHQpOyB9CiAgICAgICAgLmJyYW5kIHNwYW4geyBjb2xvcjogdmFyKC0tbWVudS10ZXh0KTsgZGlzcGxheTogYmxvY2s7IGZvbnQtc2l6ZTogMC44cmVtOyBtYXJnaW4tdG9wOiA1cHg7IGZvbnQtd2VpZ2h0OiBub3JtYWw7IH0KICAgICAgICAubWVudSB7IGZsZXg6IDE7IHBhZGRpbmctdG9wOiAxMHB4OyBvdmVyZmxvdy15OiBhdXRvOyB9CiAgICAgICAgLm1lbnUtaXRlbSB7IHBhZGRpbmc6IDE1cHggMjBweDsgY3Vyc29yOiBwb2ludGVyOyB0cmFuc2l0aW9uOiAwLjNzOyBkaXNwbGF5OiBmbGV4OyBhbGlnbi1pdGVtczogY2VudGVyOyBjb2xvcjogI2JkYzNjNzsgdGV4dC1kZWNvcmF0aW9uOiBub25lOyBib3JkZXItbGVmdDogNHB4IHNvbGlkIHRyYW5zcGFyZW50OyBmb250LXNpemU6IDAuOXJlbTsgfQogICAgICAgIC5tZW51LWl0ZW06aG92ZXIsIC5tZW51LWl0ZW0uYWN0aXZlIHsgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tc2Vjb25kYXJ5KTsgY29sb3I6IHdoaXRlOyBib3JkZXItbGVmdC1jb2xvcjogdmFyKC0tbWVudS10ZXh0KTsgfQogICAgICAgIC5tZW51LWl0ZW0gaSB7IHdpZHRoOiAzMHB4OyBmb250LXNpemU6IDEuMXJlbTsgbWFyZ2luLXJpZ2h0OiAxMHB4OyB9CiAgICAgICAgLm1lbnUtbnVtIHsgZGlzcGxheTpub25lOyB9CiAgICAgICAgLm1lbnUtc2VwYXJhdG9ye2hlaWdodDoxcHg7YmFja2dyb3VuZDpyZ2JhKDI1NSwyNTUsMjU1LC4xNSk7bWFyZ2luOjhweCAxMnB4fQogICAgICAgIC5mb290ZXItaW5mbyB7IHBhZGRpbmc6IDE1cHg7IGZvbnQtc2l6ZTogMC43cmVtOyB0ZXh0LWFsaWduOiBjZW50ZXI7IGJvcmRlci10b3A6IDFweCBzb2xpZCAjMzQ0OTVlOyBjb2xvcjogIzdmOGM4ZDsgfQoKICAgICAgICAvKiBNQUlOICovCiAgICAgICAgLm1haW4tY29udGVudCB7IGZsZXg6IDE7IG92ZXJmbG93LXk6IGF1dG87IHBhZGRpbmc6IDIwcHggMzBweDsgZGlzcGxheTogZmxleDsgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsgbWluLXdpZHRoOjA7IH0KICAgICAgICAudG9wLWJhciB7IGRpc3BsYXk6IGZsZXg7IGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjsgYWxpZ24taXRlbXM6IGNlbnRlcjsgbWFyZ2luLWJvdHRvbTogMTZweDsgYmFja2dyb3VuZDogd2hpdGU7IHBhZGRpbmc6IDEycHggMjBweDsgYm9yZGVyLXJhZGl1czogOHB4OyBib3gtc2hhZG93OiAwIDJweCAxMHB4IHJnYmEoMCwwLDAsMC4wNSk7IGZsZXgtc2hyaW5rOjA7IH0KICAgICAgICAucGFnZS10aXRsZSBoMiB7IGNvbG9yOiB2YXIoLS1zZWNvbmRhcnkpOyBtYXJnaW46IDA7IH0KICAgICAgICAuc3lzdGVtLXN0YXR1cyB7IGRpc3BsYXk6IGZsZXg7IGFsaWduLWl0ZW1zOiBjZW50ZXI7IGdhcDogMjBweDsgfQogICAgICAgIC5zYXZlLWluZGljYXRvciB7IGZvbnQtc2l6ZTogMC44cmVtOyBjb2xvcjogdmFyKC0tc3VjY2Vzcyk7IGRpc3BsYXk6IG5vbmU7IGFsaWduLWl0ZW1zOiBjZW50ZXI7IGdhcDogNXB4OyBmb250LXdlaWdodDogYm9sZDsgfQoKICAgICAgICAvKiBVSSBFTEVNRU5UUyAqLwogICAgICAgIC5idG4geyBwYWRkaW5nOiAxMHB4IDIwcHg7IGJvcmRlcjogbm9uZTsgYm9yZGVyLXJhZGl1czogNXB4OyBjdXJzb3I6IHBvaW50ZXI7IGZvbnQtd2VpZ2h0OiA2MDA7IHRyYW5zaXRpb246IDAuMnM7IGRpc3BsYXk6IGlubGluZS1mbGV4OyBhbGlnbi1pdGVtczogY2VudGVyOyBnYXA6IDhweDsgZm9udC1zaXplOiAwLjlyZW07IH0KICAgICAgICAuYnRuOmhvdmVyIHsgb3BhY2l0eTogMC45OyB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLTFweCk7IH0KICAgICAgICAuYnRuLXByaW1hcnkgeyBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1zZWNvbmRhcnkpOyBjb2xvcjogd2hpdGU7IH0KICAgICAgICAuYnRuLWFjY2VudCB7IGJhY2tncm91bmQtY29sb3I6IHZhcigtLWFjY2VudCk7IGNvbG9yOiB3aGl0ZTsgfQogICAgICAgIC5idG4tc3VjY2VzcyB7IGJhY2tncm91bmQtY29sb3I6IHZhcigtLXN1Y2Nlc3MpOyBjb2xvcjogd2hpdGU7IH0KICAgICAgICAuYnRuLWluZm8geyBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1pbmZvKTsgY29sb3I6IHdoaXRlOyB9CiAgICAgICAgLmJ0bi1kYW5nZXIgeyBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1oaWdobGlnaHQpOyBjb2xvcjogd2hpdGU7IH0KICAgICAgICAuYnRuLXdhcm5pbmcgeyBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS13YXJuaW5nKTsgY29sb3I6IHdoaXRlOyB9CiAgICAgICAgLmJ0bi1kYXJrIHsgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tcHJpbWFyeSk7IGNvbG9yOiB3aGl0ZTsgfQogICAgICAgIC5idG4td29yZCB7IGJhY2tncm91bmQtY29sb3I6ICMyYjU3OWE7IGNvbG9yOiB3aGl0ZTsgfSAvKiBDb3VsZXVyIFdvcmQgKi8KICAgICAgICAuYnRuLXNtIHsgcGFkZGluZzogNXB4IDEwcHg7IGZvbnQtc2l6ZTogMC44cmVtOyB9CiAgICAgICAgLmJ0bi1pY29uIHsgcGFkZGluZzogOHB4OyB3aWR0aDogMzVweDsganVzdGlmeS1jb250ZW50OiBjZW50ZXI7IH0KCiAgICAgICAgLmJ0bi11cGRhdGUtbW9kZSB7IGJhY2tncm91bmQtY29sb3I6ICNmMzljMTIgIWltcG9ydGFudDsgY29sb3I6IHdoaXRlICFpbXBvcnRhbnQ7IGFuaW1hdGlvbjogcHVsc2UgMnMgaW5maW5pdGU7IH0KICAgICAgICBAa2V5ZnJhbWVzIHB1bHNlIHsgMCUgeyBib3gtc2hhZG93OiAwIDAgMCAwIHJnYmEoMjQzLCAxNTYsIDE4LCAwLjQpOyB9IDcwJSB7IGJveC1zaGFkb3c6IDAgMCAwIDEwcHggcmdiYSgyNDMsIDE1NiwgMTgsIDApOyB9IDEwMCUgeyBib3gtc2hhZG93OiAwIDAgMCAwIHJnYmEoMjQzLCAxNTYsIDE4LCAwKTsgfSB9CgogICAgICAgIC5zZWN0aW9uIHsgZGlzcGxheTogbm9uZTsgYW5pbWF0aW9uOiBmYWRlSW4gMC4zcyBlYXNlLWluLW91dDsgfQogICAgICAgIC5zZWN0aW9uLmFjdGl2ZSB7IGRpc3BsYXk6IGJsb2NrOyB9CiAgICAgICAgLmZvcm0tY2FyZCB7IGJhY2tncm91bmQ6IHdoaXRlOyBwYWRkaW5nOiAzMHB4OyBwYWRkaW5nLWJvdHRvbToxMHB4OyBib3JkZXItcmFkaXVzOiA4cHg7IGJveC1zaGFkb3c6IDAgNHB4IDE1cHggcmdiYSgwLDAsMCwwLjA1KTsgfQogICAgICAgIC5mb3JtLWNhcmQgLnNhdmUtYmFye3Bvc2l0aW9uOnN0aWNreTtib3R0b206MDtiYWNrZ3JvdW5kOmxpbmVhci1ncmFkaWVudCh0cmFuc3BhcmVudCwjZmZmIDE1JSk7cGFkZGluZzoxNXB4IDAgNXB4O3otaW5kZXg6MTA7dGV4dC1hbGlnbjpyaWdodDttYXJnaW4tdG9wOjIwcHg7fQogICAgICAgIC5mb3JtLWNhcmQgLnNhdmUtYmFyIC5idG57Ym94LXNoYWRvdzowIDJweCA4cHggcmdiYSgwLDAsMCwwLjE1KTtmb250LXNpemU6LjlyZW07cGFkZGluZzoxMHB4IDI0cHg7fQogICAgICAgIC5mb3JtLWdyaWQgeyBkaXNwbGF5OiBncmlkOyBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IDFmciAxZnI7IGdhcDogMjBweDsgbWFyZ2luLWJvdHRvbTogMjBweDsgfQogICAgICAgIC5mb3JtLWZ1bGwgeyBtYXJnaW4tYm90dG9tOiAyMHB4OyB9CiAgICAgICAgLmZvcm0tZ3JvdXAgbGFiZWwgeyBkaXNwbGF5OiBibG9jazsgbWFyZ2luLWJvdHRvbTogOHB4OyBmb250LXdlaWdodDogNjAwOyBjb2xvcjogdmFyKC0tc2Vjb25kYXJ5KTsgZm9udC1zaXplOiAwLjlyZW07IH0KICAgICAgICAuZm9ybS1jb250cm9sIHsgd2lkdGg6IDEwMCU7IHBhZGRpbmc6IDEycHg7IGJvcmRlcjogMnB4IHNvbGlkICNjMGM1Y2U7IGJvcmRlci1yYWRpdXM6IDZweDsgZm9udC1mYW1pbHk6IGluaGVyaXQ7IGZvbnQtc2l6ZTogMC45NXJlbTsgdHJhbnNpdGlvbjogMC4yczsgfQogICAgICAgICAgICAuZm9ybS1jb250cm9sOmZvY3VzIHsgYm9yZGVyLWNvbG9yOiB2YXIoLS1hY2NlbnQpOyBvdXRsaW5lOm5vbmU7IGJveC1zaGFkb3c6MCAwIDAgM3B4IHJnYmEoNTIsMTUyLDIxOSwwLjE1KTsgfQogICAgICAgIC5tdWx0aS1yb3cgeyBkaXNwbGF5OiBmbGV4OyBnYXA6IDEwcHg7IG1hcmdpbi1ib3R0b206IDEwcHg7IGFsaWduLWl0ZW1zOiBjZW50ZXI7IH0KICAgICAgICAubXVsdGktcm93IGlucHV0IHsgZmxleDogMTsgfQogICAgICAgIAogICAgICAgIC8qIEFUVEFDSE1FTlRTIEFSRUEgKi8KICAgICAgICAuYXR0YWNobWVudHMtYXJlYSB7IGJvcmRlcjogMnB4IGRhc2hlZCAjYmRjM2M3OyBiYWNrZ3JvdW5kOiAjZjlmOWY5OyBwYWRkaW5nOiAxNXB4OyBib3JkZXItcmFkaXVzOiA2cHg7IG1hcmdpbi10b3A6IDEwcHg7IH0KICAgICAgICAuYXR0YWNobWVudC1saXN0IHsgbWFyZ2luLXRvcDogMTBweDsgbGlzdC1zdHlsZTogbm9uZTsgfQogICAgICAgIC5hdHRhY2htZW50LWl0ZW0geyBkaXNwbGF5OiBmbGV4OyBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47IGJhY2tncm91bmQ6IHdoaXRlOyBwYWRkaW5nOiA4cHg7IG1hcmdpbi1ib3R0b206IDVweDsgYm9yZGVyLXJhZGl1czogNHB4OyBib3JkZXItbGVmdDogM3B4IHNvbGlkIHZhcigtLWluZm8pOyBmb250LXNpemU6IDAuODVyZW07IGFsaWduLWl0ZW1zOiBjZW50ZXI7IH0KICAgICAgICAuZmlsZS13YXJuaW5nIHsgZm9udC1zaXplOiAwLjc1cmVtOyBjb2xvcjogI2U3NGMzYzsgbWFyZ2luLXRvcDogNXB4OyBmb250LXN0eWxlOiBpdGFsaWM7IH0KCiAgICAgICAgLyogRFJBRyAmIERST1AgLyBLQU5CQU4gKi8KICAgICAgICAudG9kby1ncmlkIHsgZGlzcGxheTogZ3JpZDsgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiAxZnIgMWZyOyBnYXA6IDI1cHg7IH0KICAgICAgICAudG9kby1ib3ggeyBiYWNrZ3JvdW5kOiB3aGl0ZTsgYm9yZGVyLXJhZGl1czogOHB4OyBwYWRkaW5nOiAyMHB4OyBib3gtc2hhZG93OiAwIDRweCAxMHB4IHJnYmEoMCwwLDAsMC4wNSk7IGJvcmRlci10b3A6IDVweCBzb2xpZCAjY2NjOyBkaXNwbGF5OiBmbGV4OyBmbGV4LWRpcmVjdGlvbjogY29sdW1uOyBtaW4taGVpZ2h0OiAzNTBweDsgfQogICAgICAgIC50b2RvLXVyZ2VudCB7IGJvcmRlci10b3AtY29sb3I6IHZhcigtLWhpZ2hsaWdodCk7IH0gLnRvZG8tcGxhbiB7IGJvcmRlci10b3AtY29sb3I6IHZhcigtLXByaW1hcnkpOyB9IC50b2RvLXBvc3NpYmxlIHsgYm9yZGVyLXRvcC1jb2xvcjogdmFyKC0tc3VjY2Vzcyk7IH0gLnRvZG8tZGVsZWdhdGUgeyBib3JkZXItdG9wLWNvbG9yOiB2YXIoLS13YXJuaW5nKTsgfQogICAgICAgIC50b2RvLWhlYWRlciB7IGRpc3BsYXk6IGZsZXg7IGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjsgYWxpZ24taXRlbXM6IGNlbnRlcjsgbWFyZ2luLWJvdHRvbTogMTVweDsgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICNlZWU7IHBhZGRpbmctYm90dG9tOiAxMHB4OyB9CiAgICAgICAgLnRvZG8taW5wdXQtZ3JvdXAgeyBkaXNwbGF5OiBmbGV4OyBnYXA6IDVweDsgbWFyZ2luLWJvdHRvbTogMTVweDsgfQogICAgICAgIC50b2RvLWlucHV0LWdyb3VwIGlucHV0IHsgZmxleDogMTsgcGFkZGluZzogOHB4OyBib3JkZXI6IDFweCBzb2xpZCAjZGRkOyBib3JkZXItcmFkaXVzOiA0cHg7IH0KICAgICAgICAudG9kby1saXN0IHsgbGlzdC1zdHlsZTogbm9uZTsgZmxleDogMTsgb3ZlcmZsb3cteTogYXV0bzsgbWF4LWhlaWdodDogMzUwcHg7IHBhZGRpbmc6IDVweDsgbWluLWhlaWdodDogMTAwcHg7IHRyYW5zaXRpb246IDAuMnM7IH0KICAgICAgICAudG9kby1saXN0LmRyYWctb3ZlciB7IGJhY2tncm91bmQtY29sb3I6ICNmMGYwZjA7IGJvcmRlci1yYWRpdXM6IDRweDsgb3V0bGluZTogMnB4IGRhc2hlZCAjY2NjOyB9CiAgICAgICAgLyogU3R5bGUgYW3DqWxpb3LDqSBwb3VyIGxlIERyYWcgJiBEcm9wICovCiAgICAgICAgLnRvZG8taXRlbSB7IGRpc3BsYXk6IGZsZXg7IGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjsgYWxpZ24taXRlbXM6IGNlbnRlcjsgcGFkZGluZzogMTJweDsgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICNmNGY0ZjQ7IGJhY2tncm91bmQ6IHdoaXRlOyBtYXJnaW4tYm90dG9tOiA4cHg7IGJvcmRlci1yYWRpdXM6IDRweDsgY3Vyc29yOiBncmFiOyBib3JkZXItbGVmdDogM3B4IHNvbGlkICNlZWU7IGJveC1zaGFkb3c6IDAgMXB4IDNweCByZ2JhKDAsMCwwLDAuMDUpOyB9CiAgICAgICAgLnRvZG8taXRlbTphY3RpdmUgeyBjdXJzb3I6IGdyYWJiaW5nOyB9CiAgICAgICAgLnRvZG8taXRlbS5kcmFnLW92ZXItaXRlbSB7IGJvcmRlci10b3A6IDJweCBzb2xpZCB2YXIoLS1tZW51LXRleHQpOyBtYXJnaW4tdG9wOiAxNXB4OyB9IC8qIEluZGljYXRldXIgdmlzdWVsIGQnaW5zZXJ0aW9uICovCiAgICAgICAgLnRvZG8taXRlbSBzcGFuW2NvbnRlbnRlZGl0YWJsZV0geyBmbGV4OjE7IG1hcmdpbi1yaWdodDoxMHB4OyBwYWRkaW5nOjJweDsgYm9yZGVyOjFweCBzb2xpZCB0cmFuc3BhcmVudDsgdHJhbnNpdGlvbjowLjJzOyB9CiAgICAgICAgLnRvZG8taXRlbSBzcGFuW2NvbnRlbnRlZGl0YWJsZV06Zm9jdXMgeyBib3JkZXItYm90dG9tLWNvbG9yOiB2YXIoLS1hY2NlbnQpOyBvdXRsaW5lOm5vbmU7IGJhY2tncm91bmQ6I2Y5ZmJmZjsgfQogICAgICAgIC5mcm9tLWFnZW5kYSB7IGJhY2tncm91bmQtY29sb3I6ICNmZmY4ZTE7IGJvcmRlci1sZWZ0OiA0cHggc29saWQgI2YxYzQwZjsgfQogICAgICAgIC50b2RvLWFjdGlvbnMgaSB7IGN1cnNvcjogcG9pbnRlcjsgY29sb3I6ICNiZGMzYzc7IHRyYW5zaXRpb246IDAuMnM7IG1hcmdpbi1sZWZ0OiA4cHg7IH0KICAgICAgICAudG9kby1hY3Rpb25zIGk6aG92ZXIgeyBjb2xvcjogdmFyKC0tYWNjZW50KTsgfQogICAgICAgIAogICAgICAgIC50b2RvLXRvZGF5LXpvbmUgeyBtYXJnaW4tYm90dG9tOiAyMHB4OyBwYWRkaW5nOiAxNXB4OyBiYWNrZ3JvdW5kOiAjZmZmM2UwOyBib3JkZXI6IDJweCBzb2xpZCAjZjM5YzEyOyBib3JkZXItcmFkaXVzOiA4cHg7IGRpc3BsYXk6IG5vbmU7IH0KICAgICAgICAudG9kby10b2RheS16b25lLmFjdGl2ZSB7IGRpc3BsYXk6IGJsb2NrOyBhbmltYXRpb246IGZhZGVJbiAwLjVzOyB9CiAgICAgICAgLnRvZG8tdG9kYXktaXRlbSB7IGJhY2tncm91bmQ6IHdoaXRlOyBwYWRkaW5nOiAxMHB4OyBib3JkZXItcmFkaXVzOiA0cHg7IGJvcmRlci1sZWZ0OiA0cHggc29saWQgI2U3NGMzYzsgbWFyZ2luLWJvdHRvbTogNXB4OyBjdXJzb3I6IGdyYWI7IGRpc3BsYXk6IGZsZXg7IGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjsgYWxpZ24taXRlbXM6IGNlbnRlcjsgYm94LXNoYWRvdzogMCAycHggNHB4IHJnYmEoMCwwLDAsMC4wNSk7IH0KCiAgICAgICAgLyogQ0FMRU5EQVIgKi8KICAgICAgICAuY2FsZW5kYXItdGFibGUgeyB3aWR0aDogMTAwJTsgYm9yZGVyLWNvbGxhcHNlOiBjb2xsYXBzZTsgYmFja2dyb3VuZDogd2hpdGU7IH0KICAgICAgICAuY2FsZW5kYXItdGFibGUgdGggeyBiYWNrZ3JvdW5kOiB2YXIoLS1zZWNvbmRhcnkpOyBjb2xvcjogd2hpdGU7IHBhZGRpbmc6IDEycHg7IHRleHQtYWxpZ246IGxlZnQ7IH0KICAgICAgICAuY2FsZW5kYXItdGFibGUgdGQgeyBwYWRkaW5nOiAxMnB4OyBib3JkZXItYm90dG9tOiAxcHggc29saWQgI2VlZTsgfQogICAgICAgIC5yb3ctdG9kYXkgeyBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmOGUxOyBmb250LXdlaWdodDogYm9sZDsgYm9yZGVyLWxlZnQ6IDVweCBzb2xpZCAjZTc0YzNjOyB9IAoKICAgICAgICAvKiBFRElUT1IgKi8KICAgICAgICAuZG9jLWVkaXRvciB7IGJvcmRlcjogMXB4IHNvbGlkICNkZGQ7IHBhZGRpbmc6IDQwcHg7IGJhY2tncm91bmQ6IHdoaXRlOyBtaW4taGVpZ2h0OiAxNTBweDsgYm9yZGVyLXJhZGl1czogNHB4OyBvdmVyZmxvdy15OmF1dG87IGZvbnQtZmFtaWx5OiAnVGltZXMgTmV3IFJvbWFuJywgc2VyaWY7IGxpbmUtaGVpZ2h0OiAxLjY7IGNvbG9yOiMwMDA7IGJveC1zaGFkb3c6IGluc2V0IDAgMCAxMHB4IHJnYmEoMCwwLDAsMC4wNSk7IH0KICAgICAgICAuZG9jLWVkaXRvcjpmb2N1cyB7IG91dGxpbmU6IG5vbmU7IGJvcmRlci1jb2xvcjogdmFyKC0tYWNjZW50KTsgfQogICAgICAgIC5ub3Rlcy1lZGl0b3IgeyBtaW4taGVpZ2h0OiAyNTBweDsgYmFja2dyb3VuZDogI2ZmZmZmMDsgYm9yZGVyLWNvbG9yOiAjZTBlMGQwOyB9CiAgICAgICAgCiAgICAgICAgLyogREFTSEJPQVJEICovCiAgICAgICAgLmRhc2gta3BpLWdyaWQgeyBkaXNwbGF5OiBncmlkOyBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IHJlcGVhdCgzLCAxZnIpOyBnYXA6IDIwcHg7IG1hcmdpbi1ib3R0b206IDMwcHg7IH0KICAgICAgICAua3BpLWNhcmQgeyBiYWNrZ3JvdW5kOiB3aGl0ZTsgcGFkZGluZzogMjBweDsgYm9yZGVyLXJhZGl1czogMTBweDsgYm94LXNoYWRvdzogMCA0cHggNnB4IHJnYmEoMCwwLDAsMC4wNSk7IHRleHQtYWxpZ246IGNlbnRlcjsgYm9yZGVyLWJvdHRvbTogNHB4IHNvbGlkIHZhcigtLXNlY29uZGFyeSk7IGRpc3BsYXk6ZmxleDsgZmxleC1kaXJlY3Rpb246Y29sdW1uOyBqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyOyBhbGlnbi1pdGVtczpjZW50ZXI7IG1pbi1oZWlnaHQ6IDE0MHB4OyB9CiAgICAgICAgLmtwaS1udW0geyBmb250LXNpemU6IDNyZW07IGZvbnQtd2VpZ2h0OiBib2xkOyBjb2xvcjogdmFyKC0tc2Vjb25kYXJ5KTsgZGlzcGxheTogYmxvY2s7IG1hcmdpbjogMTBweCAwOyB9CiAgICAgICAgLmtwaS1sYWJlbCB7IGZvbnQtc2l6ZTogMC45cmVtOyB0ZXh0LXRyYW5zZm9ybTogdXBwZXJjYXNlOyBmb250LXdlaWdodDogYm9sZDsgY29sb3I6ICM3ZjhjOGQ7IH0KICAgICAgICAuY2hhcnRzLWdyaWQgeyBkaXNwbGF5OiBncmlkOyBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IDFmciAxZnI7IGdhcDogMjBweDsgbWFyZ2luLWJvdHRvbTogMzBweDsgfQogICAgICAgIC5jaGFydC1jb250YWluZXIgeyBiYWNrZ3JvdW5kOiB3aGl0ZTsgcGFkZGluZzogMjBweDsgYm9yZGVyLXJhZGl1czogMTBweDsgYm94LXNoYWRvdzogMCA0cHggNnB4IHJnYmEoMCwwLDAsMC4wNSk7IGhlaWdodDogMzUwcHg7IH0KICAgICAgICAudG9wLXN0dWRlbnRzLWxpc3QgeyBsaXN0LXN0eWxlOiBub25lOyBwYWRkaW5nOiAwOyB9CiAgICAgICAgLnRvcC1zdHVkZW50LWl0ZW0geyBkaXNwbGF5OiBmbGV4OyBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47IHBhZGRpbmc6IDhweCAwOyBib3JkZXItYm90dG9tOiAxcHggc29saWQgI2VlZTsgfQoKICAgICAgICAvKiBUQUJMRVMgKi8KICAgICAgICAuZGF0YS10YWJsZSB7IHdpZHRoOiAxMDAlOyBib3JkZXItY29sbGFwc2U6IGNvbGxhcHNlOyBiYWNrZ3JvdW5kOiB3aGl0ZTsgfQogICAgICAgIC5kYXRhLXRhYmxlIHRoIHsgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tc2Vjb25kYXJ5KTsgY29sb3I6IHdoaXRlOyBwYWRkaW5nOiAxNXB4OyB0ZXh0LWFsaWduOiBsZWZ0OyB9CiAgICAgICAgLmRhdGEtdGFibGUgdGQgeyBwYWRkaW5nOiAxNXB4OyBib3JkZXItYm90dG9tOiAxcHggc29saWQgI2VlZTsgfQogICAgICAgIC5iYWRnZSB7IHBhZGRpbmc6IDRweCA4cHg7IGJvcmRlci1yYWRpdXM6IDEycHg7IGZvbnQtc2l6ZTogMC43NXJlbTsgZm9udC13ZWlnaHQ6IGJvbGQ7IGNvbG9yOiB3aGl0ZTsgfQogICAgICAgIC5iZy1lbnQgeyBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1hY2NlbnQpOyB9IC5iZy1yZXUgeyBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1zdWNjZXNzKTsgfSAuYmctc3VpdmkgeyBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1pbmZvKTsgfSAuYmctZGlyIHsgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tcHJpbWFyeSk7IH0KCiAgICAgICAgLyogRklMVEVSUyAqLwogICAgICAgIC5maWx0ZXJzLWJhciB7IGRpc3BsYXk6IGZsZXg7IGdhcDogMTVweDsgYmFja2dyb3VuZDogd2hpdGU7IHBhZGRpbmc6IDE1cHg7IGJvcmRlci1yYWRpdXM6IDhweDsgbWFyZ2luLWJvdHRvbTogMjBweDsgYWxpZ24taXRlbXM6IGZsZXgtZW5kOyB9CgogICAgICAgIAogICAgICAgIC8qIOKVkOKVkOKVkCBQcm9jw6lkdXJlcyDilZDilZDilZAgKi8KICAgICAgICAucHJvYy1oZWFkZXJ7ZGlzcGxheTpmbGV4O2p1c3RpZnktY29udGVudDpzcGFjZS1iZXR3ZWVuO2FsaWduLWl0ZW1zOmNlbnRlcjttYXJnaW4tYm90dG9tOjE2cHh9CiAgICAgICAgLnByb2MtaGVhZGVyIGJ1dHRvbntiYWNrZ3JvdW5kOnZhcigtLWhlYWRlciwjMmMzZTUwKTtjb2xvcjojZmZmO2JvcmRlcjpub25lO3BhZGRpbmc6MTBweCAyMHB4O2JvcmRlci1yYWRpdXM6OHB4O2N1cnNvcjpwb2ludGVyO2ZvbnQtc2l6ZTouODVyZW07Zm9udC13ZWlnaHQ6NjAwO2JveC1zaGFkb3c6MCAycHggOHB4IHJnYmEoNDQsNjIsODAsLjMpfQogICAgICAgIC5wcm9jLWhlYWRlciBidXR0b246aG92ZXJ7b3BhY2l0eTouOTt0cmFuc2Zvcm06dHJhbnNsYXRlWSgtMXB4KX0KICAgICAgICAucHJvYy1saXN0e2Rpc3BsYXk6ZmxleDtmbGV4LWRpcmVjdGlvbjpjb2x1bW47Z2FwOjhweH0KICAgICAgICAucHJvYy1jYXJke2JhY2tncm91bmQ6I2ZmZjtib3JkZXItcmFkaXVzOjEwcHg7cGFkZGluZzoxMHB4IDE0cHg7ZGlzcGxheTpmbGV4O2FsaWduLWl0ZW1zOmNlbnRlcjtnYXA6MTBweDtjdXJzb3I6cG9pbnRlcjtib3gtc2hhZG93OjAgMXB4IDRweCByZ2JhKDAsMCwwLC4wNik7dHJhbnNpdGlvbjpib3gtc2hhZG93IC4xNXN9CiAgICAgICAgLnByb2MtY2FyZDpob3Zlcntib3gtc2hhZG93OjAgM3B4IDEycHggcmdiYSgwLDAsMCwuMTIpfQogICAgICAgIC5wcm9jLWNvZGV7ZGlzcGxheTppbmxpbmUtYmxvY2s7cGFkZGluZzo0cHggMTBweDtib3JkZXItcmFkaXVzOjZweDtmb250LXdlaWdodDo3MDA7Zm9udC1zaXplOi44cmVtO2NvbG9yOiNmZmY7bWluLXdpZHRoOjQ0cHg7dGV4dC1hbGlnbjpjZW50ZXJ9CiAgICAgICAgLnByb2MtY2FyZC1ib2R5e2ZsZXg6MTttaW4td2lkdGg6MH0KICAgICAgICAucHJvYy1jYXJkLXRpdGxle2ZvbnQtd2VpZ2h0OjYwMDtmb250LXNpemU6Ljg4cmVtO2NvbG9yOiMzMzN9CiAgICAgICAgLnByb2MtY2FyZC1tZXRhe2ZvbnQtc2l6ZTouNzJyZW07Y29sb3I6Izk5OTttYXJnaW4tdG9wOjJweH0KICAgICAgICAucHJvYy1jYXJkLWNhdHtkaXNwbGF5OmlubGluZS1ibG9jaztiYWNrZ3JvdW5kOiNmMGYwZjA7cGFkZGluZzoycHggOHB4O2JvcmRlci1yYWRpdXM6MTBweDtmb250LXNpemU6LjY4cmVtO2NvbG9yOiM2NjY7bWFyZ2luLWxlZnQ6NnB4fQogICAgICAgIC5wcm9jLWNhcmQtYWN0aW9uc3tkaXNwbGF5OmZsZXg7Z2FwOjZweH0KICAgICAgICAucHJvYy1jYXJkLWFjdGlvbnMgYnV0dG9ue2JhY2tncm91bmQ6bm9uZTtib3JkZXI6bm9uZTtjdXJzb3I6cG9pbnRlcjtwYWRkaW5nOjRweCA4cHg7Ym9yZGVyLXJhZGl1czo2cHg7Y29sb3I6Izg4ODtmb250LXNpemU6LjhyZW19CiAgICAgICAgLnByb2MtY2FyZC1hY3Rpb25zIGJ1dHRvbjpob3ZlcntiYWNrZ3JvdW5kOiNmMGYwZjA7Y29sb3I6IzMzM30KICAgICAgICAucHJvYy1maWx0ZXJze2Rpc3BsYXk6ZmxleDtmbGV4LXdyYXA6d3JhcDtnYXA6NnB4O21hcmdpbi1ib3R0b206MTRweH0KICAgICAgICAucHJvYy1maWx0ZXJzIGJ1dHRvbntib3JkZXI6MXB4IHNvbGlkICNkZGQ7YmFja2dyb3VuZDojZmZmO3BhZGRpbmc6NHB4IDEycHg7Ym9yZGVyLXJhZGl1czoxNnB4O2ZvbnQtc2l6ZTouNzJyZW07Y3Vyc29yOnBvaW50ZXI7Y29sb3I6IzY2Nn0KICAgICAgICAucHJvYy1maWx0ZXJzIGJ1dHRvbi5hY3RpdmV7YmFja2dyb3VuZDp2YXIoLS1oZWFkZXIsIzJjM2U1MCk7Y29sb3I6I2ZmZjtib3JkZXItY29sb3I6dHJhbnNwYXJlbnR9CiAgICAgICAgLnByb2Mtdmlld3tiYWNrZ3JvdW5kOiNmZmY7Ym9yZGVyLXJhZGl1czoxMnB4O292ZXJmbG93OmhpZGRlbjtib3gtc2hhZG93OjAgMnB4IDEwcHggcmdiYSgwLDAsMCwuMDgpO3dpZHRoOjEwMCU7Ym94LXNpemluZzpib3JkZXItYm94fQogICAgICAgIC5wcm9jLXZpZXctaGVhZGVye3BhZGRpbmc6MThweCAyMnB4O2NvbG9yOiNmZmZ9CiAgICAgICAgLnByb2Mtdmlldy1oZWFkZXIgaDJ7bWFyZ2luOjA7Zm9udC1zaXplOjEuMXJlbX0KICAgICAgICAucHJvYy12aWV3LWhlYWRlciAucHYtY29kZXtmb250LXNpemU6Ljg1cmVtO29wYWNpdHk6Ljg1O21hcmdpbi10b3A6MnB4fQogICAgICAgIC5wcm9jLXZpZXctYm9keXtwYWRkaW5nOjE2cHggMTJweH0KICAgICAgICAucHJvYy16b25le2JvcmRlci1sZWZ0OjNweCBzb2xpZCAjZGRkO3BhZGRpbmc6MTBweCAxNHB4O21hcmdpbjoxMHB4IDA7YmFja2dyb3VuZDojZmFmYWZhO2JvcmRlci1yYWRpdXM6MCA4cHggOHB4IDA7d2lkdGg6MTAwJTtib3gtc2l6aW5nOmJvcmRlci1ib3h9CiAgICAgICAgLnByb2Mtem9uZSBoNHtmb250LXNpemU6Ljc4cmVtO2ZvbnQtd2VpZ2h0OjYwMDtjb2xvcjojOTk5O21hcmdpbjowIDAgNnB4O3RleHQtdHJhbnNmb3JtOnVwcGVyY2FzZTtsZXR0ZXItc3BhY2luZzouNXB4fQogICAgICAgIC5wcm9jLXpvbmUtY29udGVudHtmb250LXNpemU6Ljg1cmVtO2xpbmUtaGVpZ2h0OjEuNTtjb2xvcjojNDQ0fQogICAgICAgIC5wcm9jLXpvbmUtY29udGVudCBwe21hcmdpbjo0cHggMH0KICAgICAgICAucHJvYy1pY29uLW1haWwsLnByb2MtaWNvbi1hbGVydCwucHJvYy1pY29uLWlkZWF7ZGlzcGxheTppbmxpbmUtYmxvY2s7d2lkdGg6MjBweDtoZWlnaHQ6MjBweDt0ZXh0LWFsaWduOmNlbnRlcjtsaW5lLWhlaWdodDoyMHB4O2JvcmRlci1yYWRpdXM6NTAlO2ZvbnQtc2l6ZTouNjVyZW07bWFyZ2luOjAgMnB4O3ZlcnRpY2FsLWFsaWduOm1pZGRsZX0KICAgICAgICAucHJvYy1pY29uLW1haWx7YmFja2dyb3VuZDojMzQ5OGRiO2NvbG9yOiNmZmZ9CiAgICAgICAgLnByb2MtaWNvbi1hbGVydHtiYWNrZ3JvdW5kOiNlNzRjM2M7Y29sb3I6I2ZmZn0KICAgICAgICAucHJvYy1pY29uLWlkZWF7YmFja2dyb3VuZDojZjM5YzEyO2NvbG9yOiNmZmZ9CgogICAgICAgIC8qIFBSSU5UIENPTkZJRyAqLwogICAgICAgIEBtZWRpYSBwcmludCB7CiAgICAgICAgICAgIC5zaWRlYmFyLCAubm8tcHJpbnQsIC50b3AtYmFyLCAuc2VjdGlvbiB7IGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDsgfQogICAgICAgICAgICBib2R5IHsgYmFja2dyb3VuZDogd2hpdGU7IGhlaWdodDogYXV0bzsgb3ZlcmZsb3c6IHZpc2libGU7IG1hcmdpbjogMDsgcGFkZGluZzogMDsgZm9udC1mYW1pbHk6ICdUaW1lcyBOZXcgUm9tYW4nLCBzZXJpZjsgY29sb3I6ICMwMDA7IC13ZWJraXQtcHJpbnQtY29sb3ItYWRqdXN0OiBleGFjdDsgfQogICAgICAgICAgICAubWFpbi1jb250ZW50IHsgcGFkZGluZzogMDsgbWFyZ2luOiAwOyB3aWR0aDogMTAwJTsgZGlzcGxheTogYmxvY2s7IH0KICAgICAgICAgICAgLnByaW50LWFyZWEgeyBkaXNwbGF5OiBibG9jayAhaW1wb3J0YW50OyB3aWR0aDogMTAwJTsgcG9zaXRpb246IHN0YXRpYzsgb3ZlcmZsb3c6IHZpc2libGUgIWltcG9ydGFudDsgfQogICAgICAgICAgICBAcGFnZSB7IHNpemU6IEE0OyBtYXJnaW46IDVtbSA1bW0gMTJtbSA1bW07IH0KICAgICAgICAgICAgLnByaW50LXBhZ2UgeyB3aWR0aDogMTAwJTsgbWFyZ2luOiAwOyBwYWRkaW5nOiAwOyBwYWdlLWJyZWFrLWFmdGVyOiBhbHdheXM7IG92ZXJmbG93OiBoaWRkZW47IH0KICAgICAgICAgICAgLnByaW50LXBhZ2U6bGFzdC1jaGlsZCB7IHBhZ2UtYnJlYWstYWZ0ZXI6IGF2b2lkOyB9CiAgICAgICAgICAgIC5vZmZpY2lhbC1oZWFkZXIgeyBkaXNwbGF5OiBmbGV4ICFpbXBvcnRhbnQ7IGZsZXgtZGlyZWN0aW9uOiByb3cgIWltcG9ydGFudDsganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuICFpbXBvcnRhbnQ7IGFsaWduLWl0ZW1zOiBmbGV4LXN0YXJ0OyBtYXJnaW4tYm90dG9tOiAyMHB4OyBib3JkZXItYm90dG9tOiAxLjVweCBzb2xpZCAjMDAwOyBwYWRkaW5nLWJvdHRvbTogMTVweDsgfQogICAgICAgICAgICAub2ZmaWNpYWwtcmlnaHQgeyB0ZXh0LWFsaWduOiByaWdodCAhaW1wb3J0YW50OyBmbGV4LXNocmluazogMDsgfQogICAgICAgICAgICAuc2Nob29sLW5hbWUgeyBmb250LXdlaWdodDogYm9sZDsgdGV4dC10cmFuc2Zvcm06IHVwcGVyY2FzZTsgZm9udC1zaXplOiAxLjJyZW07IH0KICAgICAgICAgICAgLm9mZmljaWFsLWxvZ28geyBtYXgtaGVpZ2h0OiA5MHB4OyBtYXgtd2lkdGg6IDE4MHB4OyBvYmplY3QtZml0OiBjb250YWluOyBkaXNwbGF5OiBibG9jayAhaW1wb3J0YW50OyAtd2Via2l0LXByaW50LWNvbG9yLWFkanVzdDogZXhhY3QgIWltcG9ydGFudDsgcHJpbnQtY29sb3ItYWRqdXN0OiBleGFjdCAhaW1wb3J0YW50OyB9CiAgICAgICAgICAgIC5vZmZpY2lhbC1wYXJ0aWNpcGFudHMgeyBiYWNrZ3JvdW5kOiAjZjRmNGY0ICFpbXBvcnRhbnQ7IHBhZGRpbmc6IDEycHg7IGJvcmRlcjogMXB4IHNvbGlkICNjY2M7IG1hcmdpbi1ib3R0b206IDIwcHg7IGZvbnQtc2l6ZTogMXJlbTsgfQogICAgICAgICAgICAub2ZmaWNpYWwtY29udGVudCB7IHRleHQtYWxpZ246IGp1c3RpZnk7IGxpbmUtaGVpZ2h0OiAxLjY7IGZvbnQtc2l6ZTogMS4xcmVtOyB9CiAgICAgICAgICAgIC5vZmZpY2lhbC1jb250ZW50IGltZywgLnByaW50LXBhZ2UgaW1nIHsgZGlzcGxheTogaW5saW5lLWJsb2NrICFpbXBvcnRhbnQ7IHZpc2liaWxpdHk6IHZpc2libGUgIWltcG9ydGFudDsgbWF4LWhlaWdodDogODBweDsgbWF4LXdpZHRoOiAxNjBweDsgLXdlYmtpdC1wcmludC1jb2xvci1hZGp1c3Q6IGV4YWN0ICFpbXBvcnRhbnQ7IHByaW50LWNvbG9yLWFkanVzdDogZXhhY3QgIWltcG9ydGFudDsgfQogICAgICAgICAgICAub2ZmaWNpYWwtZm9vdGVyIHsgbWFyZ2luLXRvcDogNDBweDsgdGV4dC1hbGlnbjogcmlnaHQ7IGZvbnQtc2l6ZTogMS4xcmVtOyB9CiAgICAgICAgICAgIC5zaWduYXR1cmUtaW1nIHsgbWF4LWhlaWdodDogNzBweDsgZGlzcGxheTogYmxvY2s7IG1hcmdpbi1sZWZ0OiBhdXRvOyB9CiAgICAgICAgICAgIC5hdHRhY2htZW50LXByaW50LWxpc3QgeyBtYXJnaW4tdG9wOiAyMHB4OyBib3JkZXItdG9wOiAxcHggZG90dGVkICNjY2M7IHBhZGRpbmctdG9wOiAxMHB4OyBmb250LXNpemU6IDAuOXJlbTsgfQogICAgICAgIH0KICAgICAgICAucHJpbnQtYXJlYSB7IGRpc3BsYXk6IG5vbmU7IH0KICAgICAgICBAa2V5ZnJhbWVzIGZhZGVJbiB7IGZyb20geyBvcGFjaXR5OiAwOyB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoMTBweCk7IH0gdG8geyBvcGFjaXR5OiAxOyB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoMCk7IH0gfQogICAgCiAgICAgICAgCiAgICAgICAgLyog4pWQ4pWQ4pWQIFVOSUZJRUQgQ0FMRU5EQVIgVjEyLjEzIOKVkOKVkOKVkCAqLwogICAgICAgIC51Y2FsLWhlYWRlcntkaXNwbGF5OmZsZXg7YWxpZ24taXRlbXM6Y2VudGVyO2dhcDo4cHg7bWFyZ2luLWJvdHRvbToxNnB4O2ZsZXgtd3JhcDp3cmFwO30KICAgICAgICAudWNhbC1uYXYtYnRue2JhY2tncm91bmQ6bm9uZTtib3JkZXI6MXB4IHNvbGlkICNkZGQ7Ym9yZGVyLXJhZGl1czo4cHg7cGFkZGluZzo4cHggMTJweDtjdXJzb3I6cG9pbnRlcjtmb250LXNpemU6LjlyZW07Y29sb3I6IzU1NTt0cmFuc2l0aW9uOmFsbCAuMTVzO30KICAgICAgICAudWNhbC1uYXYtYnRuOmhvdmVye2JhY2tncm91bmQ6I2Y1ZjVmNTtib3JkZXItY29sb3I6I2JiYjt9CiAgICAgICAgLnVjYWwtdGl0bGV7bWFyZ2luOjA7Zm9udC1zaXplOjEuMXJlbTtjb2xvcjojMmMzZTUwO21pbi13aWR0aDoxODBweDt0ZXh0LWFsaWduOmNlbnRlcjt9CiAgICAgICAgLnVjYWwtYnRuLXRvZGF5e2JhY2tncm91bmQ6I2ZmZjtib3JkZXI6MXB4IHNvbGlkICMzNDk4ZGI7Y29sb3I6IzM0OThkYjtib3JkZXItcmFkaXVzOjhweDtwYWRkaW5nOjdweCAxNHB4O2N1cnNvcjpwb2ludGVyO2ZvbnQtc2l6ZTouNzhyZW07Zm9udC13ZWlnaHQ6NjAwO3RyYW5zaXRpb246YWxsIC4xNXM7fQogICAgICAgIC51Y2FsLWJ0bi10b2RheTpob3ZlcntiYWNrZ3JvdW5kOiMzNDk4ZGI7Y29sb3I6I2ZmZjt9CiAgICAgICAgLnVjYWwtYnRuLWFkZHtiYWNrZ3JvdW5kOiMyN2FlNjA7Y29sb3I6I2ZmZjtib3JkZXI6bm9uZTtib3JkZXItcmFkaXVzOjhweDtwYWRkaW5nOjhweCAxNnB4O2N1cnNvcjpwb2ludGVyO2ZvbnQtc2l6ZTouNzhyZW07Zm9udC13ZWlnaHQ6NjAwO2Rpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXI7Z2FwOjZweDt9CiAgICAgICAgLnVjYWwtYnRuLWFkZDpob3ZlcntiYWNrZ3JvdW5kOiMyMTlhNTI7fQogICAgICAgIC51Y2FsLWJ0bi1yZWZyZXNoe2JhY2tncm91bmQ6bm9uZTtib3JkZXI6MXB4IHNvbGlkICM0Mjg1ZjQ7Y29sb3I6IzQyODVmNDtib3JkZXItcmFkaXVzOjhweDtwYWRkaW5nOjhweCAxMnB4O2N1cnNvcjpwb2ludGVyO2ZvbnQtc2l6ZTouNzhyZW07fQogICAgICAgIC51Y2FsLWJ0bi1yZWZyZXNoOmhvdmVye2JhY2tncm91bmQ6IzQyODVmNDtjb2xvcjojZmZmO30KICAgICAgICAudWNhbC1sZWdlbmR7ZGlzcGxheTpmbGV4O2dhcDoxMHB4O2ZvbnQtc2l6ZTouNjVyZW07Y29sb3I6Izg4ODthbGlnbi1pdGVtczpjZW50ZXI7ZmxleC13cmFwOndyYXA7fQogICAgICAgIC51Y2FsLWxlZ2VuZC1kb3R7d2lkdGg6MTBweDtoZWlnaHQ6MTBweDtib3JkZXItcmFkaXVzOjUwJTtkaXNwbGF5OmlubGluZS1ibG9jazttYXJnaW4tcmlnaHQ6M3B4O30KICAgICAgICAudWNhbC1kYXktZ3JvdXB7bWFyZ2luLWJvdHRvbTo0cHg7fQogICAgICAgIC51Y2FsLWRheS1oZHJ7Zm9udC1zaXplOi43OHJlbTtmb250LXdlaWdodDo3MDA7Y29sb3I6IzU1NTtwYWRkaW5nOjEwcHggMTRweCA0cHg7cG9zaXRpb246c3RpY2t5O3RvcDowO2JhY2tncm91bmQ6I2Y5ZmFmYjt6LWluZGV4OjI7dGV4dC10cmFuc2Zvcm06Y2FwaXRhbGl6ZTtib3JkZXItYm90dG9tOjFweCBzb2xpZCAjZWVlO30KICAgICAgICAudWNhbC1kYXktaGRyLmlzLXRvZGF5e2NvbG9yOiNlNjdlMjI7YmFja2dyb3VuZDojZmZmOGYwO30KICAgICAgICAudWNhbC1pdGVte2Rpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpmbGV4LXN0YXJ0O2dhcDoxMHB4O3BhZGRpbmc6MTBweCAxNHB4O2JvcmRlci1ib3R0b206MXB4IHNvbGlkICNmMGYwZjA7dHJhbnNpdGlvbjpiYWNrZ3JvdW5kIC4xcztjdXJzb3I6ZGVmYXVsdDt9CiAgICAgICAgLnVjYWwtaXRlbTpob3ZlcntiYWNrZ3JvdW5kOiNmOGY5ZmE7fQogICAgICAgIC51Y2FsLWRvdHt3aWR0aDoxMHB4O2hlaWdodDoxMHB4O2JvcmRlci1yYWRpdXM6NTAlO2ZsZXgtc2hyaW5rOjA7bWFyZ2luLXRvcDo1cHg7fQogICAgICAgIC51Y2FsLWxlZnR7ZGlzcGxheTpmbGV4O2ZsZXgtZGlyZWN0aW9uOmNvbHVtbjthbGlnbi1pdGVtczpmbGV4LXN0YXJ0O21pbi13aWR0aDo5MHB4O2ZsZXgtc2hyaW5rOjA7fQogICAgICAgIC51Y2FsLWluZm97ZmxleDoxO21pbi13aWR0aDowO30KICAgICAgICAudWNhbC1pdGVtLXRpdGxle2ZvbnQtc2l6ZTouODJyZW07Y29sb3I6IzJjM2U1MDtmb250LXdlaWdodDo1MDA7fQogICAgICAgIC51Y2FsLWl0ZW0tbWV0YXtmb250LXNpemU6LjY1cmVtO2NvbG9yOiNhYWE7bWFyZ2luLXRvcDoxcHg7fQogICAgICAgIC51Y2FsLWl0ZW0tdGltZXtmb250LXNpemU6LjcycmVtO2NvbG9yOiM4ODg7fQogICAgICAgIC51Y2FsLWl0ZW0tYWN0aW9uc3tkaXNwbGF5OmZsZXg7Z2FwOjFweDttYXJnaW4tdG9wOjRweDtvcGFjaXR5OjA7dHJhbnNpdGlvbjpvcGFjaXR5IC4xNXM7fQogICAgICAgIC51Y2FsLWl0ZW06aG92ZXIgLnVjYWwtaXRlbS1hY3Rpb25ze29wYWNpdHk6MTt9CiAgICAgICAgLnVjYWwtaXRlbS1hY3Rpb25zIGJ1dHRvbntiYWNrZ3JvdW5kOm5vbmU7Ym9yZGVyOm5vbmU7Y3Vyc29yOnBvaW50ZXI7cGFkZGluZzozcHggNnB4O2JvcmRlci1yYWRpdXM6NXB4O2ZvbnQtc2l6ZTouNjhyZW07Y29sb3I6I2JiYjt9CiAgICAgICAgLnVjYWwtaXRlbS1hY3Rpb25zIGJ1dHRvbjpob3ZlcntiYWNrZ3JvdW5kOiNlZWU7Y29sb3I6IzU1NTt9CiAgICAgICAgLnVjYWwtaXRlbS1hY3Rpb25zIGJ1dHRvbi5hY3QtZGVsOmhvdmVye2NvbG9yOiNlNzRjM2M7YmFja2dyb3VuZDojZmRmMGYwO30KICAgICAgICAudWNhbC1lbXB0eXt0ZXh0LWFsaWduOmNlbnRlcjtjb2xvcjojY2NjO3BhZGRpbmc6NTBweCAyMHB4O2ZvbnQtc2l6ZTouODVyZW07fQogICAgICAgIC51Y2FsLWVtcHR5IGl7Zm9udC1zaXplOjJyZW07ZGlzcGxheTpibG9jazttYXJnaW4tYm90dG9tOjEwcHg7fQogICAgICAgIC51Y2FsLWRlc3Qtb3B0e2Rpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXI7Z2FwOjZweDtwYWRkaW5nOjhweCAxNHB4O2JvcmRlcjoycHggc29saWQgI2UwZTBlMDtib3JkZXItcmFkaXVzOjhweDtjdXJzb3I6cG9pbnRlcjtmb250LXNpemU6Ljc4cmVtO2ZvbnQtd2VpZ2h0OjUwMDtjb2xvcjojNTU1O3RyYW5zaXRpb246YWxsIC4xNXM7fQogICAgICAgIC51Y2FsLWRlc3Qtb3B0OmhvdmVye2JvcmRlci1jb2xvcjojMzQ5OGRiO30KICAgICAgICAudWNhbC1kZXN0LW9wdC5hY3RpdmV7Ym9yZGVyLWNvbG9yOiMzNDk4ZGI7YmFja2dyb3VuZDojZWFmNGZlO2NvbG9yOiMyYzNlNTA7fQogICAgICAgIC51Y2FsLWRlc3Qtb3B0IGlucHV0e2Rpc3BsYXk6bm9uZTt9CiAgICAgICAgLnVjYWwtc3JjLWJhZGdle2ZvbnQtc2l6ZTouNTVyZW07cGFkZGluZzoxcHggNXB4O2JvcmRlci1yYWRpdXM6NHB4O2NvbG9yOiNmZmY7Zm9udC13ZWlnaHQ6NjAwO21hcmdpbi1sZWZ0OjZweDt9CgogICAgICAgIC8qIOKVkOKVkOKVkCBJTkxJTkUgTE9HTyDilZDilZDilZAgKi8KICAgICAgICAucnRlLWxvZ28taW1nIHsgbWF4LWhlaWdodDo2MHB4OyBtYXgtd2lkdGg6MTIwcHg7IHZlcnRpY2FsLWFsaWduOm1pZGRsZTsgZGlzcGxheTppbmxpbmUtYmxvY2sgIWltcG9ydGFudDsgLXdlYmtpdC1wcmludC1jb2xvci1hZGp1c3Q6ZXhhY3QgIWltcG9ydGFudDsgcHJpbnQtY29sb3ItYWRqdXN0OmV4YWN0ICFpbXBvcnRhbnQ7IH0KICAgICAgICAvKiDilZDilZDilZAgUklDSCBURVhUIEVESVRPUiDilZDilZDilZAgKi8KICAgICAgICAucnRlLXdyYXB7Ym9yZGVyOjFweCBzb2xpZCAjZGRkO2JvcmRlci1yYWRpdXM6OHB4O292ZXJmbG93OmhpZGRlbjtiYWNrZ3JvdW5kOiNmZmZ9CiAgICAgICAgLnJ0ZS1iYXJ7ZGlzcGxheTpmbGV4O2dhcDoycHg7cGFkZGluZzo0cHggNnB4O2JhY2tncm91bmQ6I2Y0ZjVmNztib3JkZXItYm90dG9tOjFweCBzb2xpZCAjZGRkfQogICAgICAgIC5ydGUtYmFyIGJ1dHRvbnt3aWR0aDoyOHB4O2hlaWdodDoyNnB4O2JvcmRlcjpub25lO2JvcmRlci1yYWRpdXM6NHB4O2JhY2tncm91bmQ6dHJhbnNwYXJlbnQ7Y3Vyc29yOnBvaW50ZXI7Zm9udC1zaXplOi43OHJlbTtjb2xvcjojNTU1O2Rpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXI7anVzdGlmeS1jb250ZW50OmNlbnRlcn0KICAgICAgICAucnRlLWJhciBidXR0b246aG92ZXJ7YmFja2dyb3VuZDojZTBlMGUwfQogICAgICAgIC5ydGUtc2Vwe2Rpc3BsYXk6aW5saW5lLWJsb2NrO3dpZHRoOjFweDtoZWlnaHQ6MTZweDtiYWNrZ3JvdW5kOiNkZGQ7bWFyZ2luOjAgM3B4O3ZlcnRpY2FsLWFsaWduOm1pZGRsZTt9CiAgICAgICAgLnJ0ZS1jb2xvci1wb3B7cG9zaXRpb246YWJzb2x1dGU7dG9wOjEwMCU7bGVmdDowO2JhY2tncm91bmQ6I2ZmZjtib3JkZXI6MXB4IHNvbGlkICNkZGQ7Ym9yZGVyLXJhZGl1czo4cHg7Ym94LXNoYWRvdzowIDRweCAxMnB4IHJnYmEoMCwwLDAsLjE1KTtwYWRkaW5nOjhweDtkaXNwbGF5OmZsZXg7Z2FwOjRweDtmbGV4LXdyYXA6d3JhcDt6LWluZGV4OjEwMDt3aWR0aDoxNjBweDt9CiAgICAgICAgLnJ0ZS1jb2xvci1zd3t3aWR0aDoyMHB4O2hlaWdodDoyMHB4O2JvcmRlci1yYWRpdXM6NHB4O2JvcmRlcjoxcHggc29saWQgI2RkZDtjdXJzb3I6cG9pbnRlcjt9CiAgICAgICAgLnJ0ZS1jb2xvci1zdzpob3Zlcnt0cmFuc2Zvcm06c2NhbGUoMS4yKTtib3gtc2hhZG93OjAgMCA0cHggcmdiYSgwLDAsMCwuMik7fQoKICAgICAgICAucnRlLWJvZHl7bWluLWhlaWdodDo3MHB4O21heC1oZWlnaHQ6MTgwcHg7b3ZlcmZsb3cteTphdXRvO3BhZGRpbmc6OHB4IDEwcHg7Zm9udC1zaXplOi44MnJlbTtsaW5lLWhlaWdodDoxLjU7b3V0bGluZTpub25lfQogICAgICAgIC5ydGUtYm9keSB1bCwucnRlLWJvZHkgb2x7bWFyZ2luOjRweCAwIDRweCAxOHB4O3BhZGRpbmc6MH0KCiAgICAgICAgCiAgICAgICAgLyog4pWQ4pWQ4pWQIEFVVE9DT01QTEVURSDDiUzDiFZFUyDilZDilZDilZAgKi8KICAgICAgICAuYWMtd3JhcHtwb3NpdGlvbjpyZWxhdGl2ZX0KICAgICAgICAuYWMtbGlzdHtwb3NpdGlvbjphYnNvbHV0ZTt0b3A6MTAwJTtsZWZ0OjA7cmlnaHQ6MDttYXgtaGVpZ2h0OjE4MHB4O292ZXJmbG93LXk6YXV0bztiYWNrZ3JvdW5kOiNmZmY7Ym9yZGVyOjFweCBzb2xpZCAjZGRkO2JvcmRlci10b3A6bm9uZTtib3JkZXItcmFkaXVzOjAgMCA4cHggOHB4O2JveC1zaGFkb3c6MCA0cHggMTJweCByZ2JhKDAsMCwwLC4xMik7ei1pbmRleDo5OTk7ZGlzcGxheTpub25lfQogICAgICAgIC5hYy1saXN0LnNob3d7ZGlzcGxheTpibG9ja30KICAgICAgICAuYWMtaXRlbXtwYWRkaW5nOjdweCAxMnB4O2ZvbnQtc2l6ZTouNzhyZW07Y3Vyc29yOnBvaW50ZXI7ZGlzcGxheTpmbGV4O2p1c3RpZnktY29udGVudDpzcGFjZS1iZXR3ZWVuO2FsaWduLWl0ZW1zOmNlbnRlcn0KICAgICAgICAuYWMtaXRlbTpob3ZlciwuYWMtaXRlbS5hY3RpdmV7YmFja2dyb3VuZDojZWFmNGZlfQogICAgICAgIC5hYy1pdGVtIC5hYy1jbGFzc2V7Zm9udC1zaXplOi42NXJlbTtjb2xvcjojODg4O2JhY2tncm91bmQ6I2YwZjBmMDtwYWRkaW5nOjFweCA2cHg7Ym9yZGVyLXJhZGl1czo0cHh9CgogICAgICAgIC8qIOKVkOKVkOKVkCBFVkVORU1FTlRTIChtZW51MTApIOKVkOKVkOKVkCAqLwogICAgICAgIC5ldi1oZWFkZXJ7ZGlzcGxheTpmbGV4O2FsaWduLWl0ZW1zOmNlbnRlcjtqdXN0aWZ5LWNvbnRlbnQ6c3BhY2UtYmV0d2VlbjttYXJnaW4tYm90dG9tOjE0cHg7ZmxleC13cmFwOndyYXA7Z2FwOjhweH0KICAgICAgICAuZXYtaGVhZGVyIGgye2NvbG9yOnZhcigtLWhlYWRlcik7Zm9udC1zaXplOjEuMDVyZW07ZGlzcGxheTpmbGV4O2FsaWduLWl0ZW1zOmNlbnRlcjtnYXA6OHB4O21hcmdpbjowfQogICAgICAgIC5ldi10b3B7ZGlzcGxheTpmbGV4O2dhcDoxMnB4O21hcmdpbi1ib3R0b206MTRweDtmbGV4LXdyYXA6d3JhcDthbGlnbi1pdGVtczpjZW50ZXJ9CiAgICAgICAgLmV2LWtwaXN7ZGlzcGxheTpmbGV4O2dhcDoxMHB4O2ZsZXg6MTtmbGV4LXdyYXA6d3JhcH0KICAgICAgICAuZXYta3Bpe2JhY2tncm91bmQ6I2ZmZjtib3JkZXI6MXB4IHNvbGlkICNlOGVhZWQ7Ym9yZGVyLXJhZGl1czoxMHB4O3BhZGRpbmc6MTBweCAxNnB4O3RleHQtYWxpZ246Y2VudGVyO21pbi13aWR0aDo5MHB4fQogICAgICAgIC5ldi1rcGkgLmt2e2ZvbnQtc2l6ZToxLjNyZW07Zm9udC13ZWlnaHQ6NzAwfS5ldi1rcGkgLmtse2ZvbnQtc2l6ZTouNjVyZW07Y29sb3I6Izg4ODttYXJnaW4tdG9wOjJweH0KICAgICAgICAuZXYtZmlsdGVyc3tkaXNwbGF5OmZsZXg7Z2FwOjhweDtmbGV4LXdyYXA6d3JhcDttYXJnaW4tYm90dG9tOjE0cHg7YWxpZ24taXRlbXM6Y2VudGVyfQogICAgICAgIC5ldi1maWx0ZXJzIHNlbGVjdCwuZXYtZmlsdGVycyBpbnB1dHtwYWRkaW5nOjZweCAxMHB4O2JvcmRlcjoxcHggc29saWQgI2RkZDtib3JkZXItcmFkaXVzOjhweDtmb250LXNpemU6Ljc4cmVtfQogICAgICAgIC5ldi1ncmlke2Rpc3BsYXk6Z3JpZDtncmlkLXRlbXBsYXRlLWNvbHVtbnM6cmVwZWF0KGF1dG8tZmlsbCxtaW5tYXgoMzIwcHgsMWZyKSk7Z2FwOjE0cHh9CiAgICAgICAgLmV2LWNhcmR7YmFja2dyb3VuZDojZmZmO2JvcmRlcjoxcHggc29saWQgI2U4ZWFlZDtib3JkZXItcmFkaXVzOjEwcHg7cGFkZGluZzoxNnB4O2JveC1zaGFkb3c6MCAxcHggNHB4IHJnYmEoMCwwLDAsLjA0KTt0cmFuc2l0aW9uOmFsbCAuMTVzO3Bvc2l0aW9uOnJlbGF0aXZlfQogICAgICAgIC5ldi1jYXJkOmhvdmVye2JveC1zaGFkb3c6MCA0cHggMTRweCByZ2JhKDAsMCwwLC4xKTt0cmFuc2Zvcm06dHJhbnNsYXRlWSgtMXB4KX0KICAgICAgICAuZXYtY2FyZC1oZHtkaXNwbGF5OmZsZXg7YWxpZ24taXRlbXM6ZmxleC1zdGFydDtnYXA6OHB4O21hcmdpbi1ib3R0b206OHB4fQogICAgICAgIC5ldi1jYXJkIGg0e2ZvbnQtc2l6ZTouODhyZW07Zm9udC13ZWlnaHQ6NzAwO2NvbG9yOiMyYzNlNTA7bWFyZ2luOjA7ZmxleDoxO2xpbmUtaGVpZ2h0OjEuM30KICAgICAgICAuZXYtY2FyZC1hY3Rze2Rpc3BsYXk6ZmxleDtnYXA6M3B4fQogICAgICAgIC5ldi1jYXJkLWFjdHMgYnV0dG9ue3dpZHRoOjI2cHg7aGVpZ2h0OjI2cHg7Ym9yZGVyOm5vbmU7Ym9yZGVyLXJhZGl1czo2cHg7Y3Vyc29yOnBvaW50ZXI7Zm9udC1zaXplOi43cmVtO2Rpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXI7anVzdGlmeS1jb250ZW50OmNlbnRlcjtiYWNrZ3JvdW5kOiNmMGYwZjA7Y29sb3I6Izg4OH0KICAgICAgICAuZXYtY2FyZC1hY3RzIGJ1dHRvbjpob3ZlcntiYWNrZ3JvdW5kOiNkZGQ7Y29sb3I6IzMzM30KICAgICAgICAuZXYtY2FyZC1tZXRhe2Rpc3BsYXk6ZmxleDtnYXA6MTBweDtmbGV4LXdyYXA6d3JhcDtmb250LXNpemU6LjdyZW07Y29sb3I6Izg4ODttYXJnaW4tYm90dG9tOjZweH0KICAgICAgICAuZXYtY2FyZC1tZXRhIHNwYW57ZGlzcGxheTpmbGV4O2FsaWduLWl0ZW1zOmNlbnRlcjtnYXA6M3B4fQogICAgICAgIC5ldi1jYXJkLWRlc2N7Zm9udC1zaXplOi43NnJlbTtjb2xvcjojNTU1O2xpbmUtaGVpZ2h0OjEuNDttYXgtaGVpZ2h0OjYwcHg7b3ZlcmZsb3c6aGlkZGVuO21hcmdpbi1ib3R0b206OHB4fQogICAgICAgIC5ldi1jYXJkLWZ0e2Rpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXI7Z2FwOjZweDtmbGV4LXdyYXA6d3JhcH0KICAgICAgICAuZXYtYmFkZ2V7cGFkZGluZzoycHggOHB4O2JvcmRlci1yYWRpdXM6MTBweDtmb250LXNpemU6LjZyZW07Zm9udC13ZWlnaHQ6NjAwO2NvbG9yOiNmZmZ9CiAgICAgICAgLmV2LWJhZGdlLnRvZG97YmFja2dyb3VuZDojZTc0YzNjfS5ldi1iYWRnZS5wcm9ncmVzc3tiYWNrZ3JvdW5kOiNmMzljMTJ9LmV2LWJhZGdlLmRvbmV7YmFja2dyb3VuZDojMjdhZTYwfS5ldi1iYWRnZS5ibG9ja2Vke2JhY2tncm91bmQ6Izk1YTVhNn0KICAgICAgICAuZXYtcGJhcntoZWlnaHQ6NHB4O2JhY2tncm91bmQ6I2VjZjBmMTtib3JkZXItcmFkaXVzOjRweDtvdmVyZmxvdzpoaWRkZW47ZmxleDoxO21pbi13aWR0aDo2MHB4fQogICAgICAgIC5ldi1wZmlsbHtoZWlnaHQ6MTAwJTtib3JkZXItcmFkaXVzOjRweH0KICAgICAgICAuZXYtdGFne3BhZGRpbmc6MXB4IDVweDtib3JkZXItcmFkaXVzOjZweDtmb250LXNpemU6LjU4cmVtO2JhY2tncm91bmQ6I2VlZjtjb2xvcjojNjY2fQogICAgICAgIC5ldi1hdHRhY2h7Zm9udC1zaXplOi42NnJlbTtjb2xvcjp2YXIoLS1oZWFkZXIpO2N1cnNvcjpwb2ludGVyO2Rpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXI7Z2FwOjNweH0KICAgICAgICAuZXYtYXR0YWNoOmhvdmVye3RleHQtZGVjb3JhdGlvbjp1bmRlcmxpbmV9CgogICAgICAgIC8qIOKVkOKVkOKVkCBHQU5UVCBUQUJMRSAobWVudTExKSDilZDilZDilZAgKi8KICAgICAgICAuZ3QtYmFye2Rpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXI7anVzdGlmeS1jb250ZW50OnNwYWNlLWJldHdlZW47bWFyZ2luLWJvdHRvbToxMnB4O2ZsZXgtd3JhcDp3cmFwO2dhcDo4cHg7cGFkZGluZzoxMnB4IDE2cHg7YmFja2dyb3VuZDojZmRmMmU5O2JvcmRlci1yYWRpdXM6MTBweDtib3JkZXI6MXB4IHNvbGlkICNmMGM0OWJ9CiAgICAgICAgLmd0LWJhciBoMntjb2xvcjojZDM1NDAwO2ZvbnQtc2l6ZToxLjA1cmVtO2Rpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXI7Z2FwOjhweDttYXJnaW46MH0KICAgICAgICAuZ3QtYmFyLWJ0bnN7ZGlzcGxheTpmbGV4O2dhcDo2cHh9CiAgICAgICAgLmd0LWJhci1idG5zIGJ1dHRvbntwYWRkaW5nOjZweCAxNHB4O2JvcmRlcjpub25lO2JvcmRlci1yYWRpdXM6NnB4O2ZvbnQtd2VpZ2h0OjYwMDtjdXJzb3I6cG9pbnRlcjtmb250LXNpemU6Ljc4cmVtO2Rpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXI7Z2FwOjVweH0KICAgICAgICAuZ3QtYnRuLWFkZHtiYWNrZ3JvdW5kOiNkMzU0MDA7Y29sb3I6I2ZmZn0uZ3QtYnRuLWFkZDpob3ZlcntiYWNrZ3JvdW5kOiNlNjdlMjJ9CiAgICAgICAgLmd0LWJ0bi1zZWN7YmFja2dyb3VuZDojZmZmO2NvbG9yOiM1NTU7Ym9yZGVyOjFweCBzb2xpZCAjY2NjfS5ndC1idG4tc2VjOmhvdmVye2JhY2tncm91bmQ6I2Y1ZjVmNX0KICAgICAgICAuZ3QtbmF2e2Rpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXI7Z2FwOjZweDttYXJnaW4tYm90dG9tOjEwcHg7ZmxleC13cmFwOndyYXB9CiAgICAgICAgLmd0LW5hdiBidXR0b257aGVpZ2h0OjI4cHg7Ym9yZGVyOjFweCBzb2xpZCAjZGRkO2JvcmRlci1yYWRpdXM6NXB4O2JhY2tncm91bmQ6I2ZmZjtjdXJzb3I6cG9pbnRlcjtmb250LXNpemU6LjcycmVtO3BhZGRpbmc6MCA4cHh9CiAgICAgICAgLmd0LW5hdiBidXR0b246aG92ZXJ7YmFja2dyb3VuZDojZjBmMGYwfQogICAgICAgIC5ndC1uYXYgc2VsZWN0e3BhZGRpbmc6NHB4IDhweDtib3JkZXI6MXB4IHNvbGlkICNkZGQ7Ym9yZGVyLXJhZGl1czo1cHg7Zm9udC1zaXplOi43NXJlbX0KICAgICAgICAuZ3Qtd3JhcHtvdmVyZmxvdy14OmF1dG87Ym9yZGVyOjFweCBzb2xpZCAjZGRkO2JvcmRlci1yYWRpdXM6OHB4O2JhY2tncm91bmQ6I2ZmZn0KICAgICAgICB0YWJsZS5ndHt3aWR0aDoxMDAlO2JvcmRlci1jb2xsYXBzZTpjb2xsYXBzZTt0YWJsZS1sYXlvdXQ6Zml4ZWR9CiAgICAgICAgLmd0IHRoe3BhZGRpbmc6NHB4IDJweDtmb250LXNpemU6LjYycmVtO2ZvbnQtd2VpZ2h0OjYwMDtjb2xvcjojNjY2O2JvcmRlci1ib3R0b206MXB4IHNvbGlkICNkZGQ7dGV4dC1hbGlnbjpjZW50ZXI7YmFja2dyb3VuZDojZjhmOGY4fQogICAgICAgIC5ndCB0aC5ndC1tb3tiYWNrZ3JvdW5kOiNlOGU4ZTg7Zm9udC1zaXplOi42OHJlbTtjb2xvcjojNDQ0O2JvcmRlci1yaWdodDoxcHggc29saWQgI2RkZH0KICAgICAgICAuZ3QgdGguZ3QtbGN7bWluLXdpZHRoOjI3MHB4O3dpZHRoOjI3MHB4O3RleHQtYWxpZ246bGVmdDtwYWRkaW5nLWxlZnQ6MTBweH0KICAgICAgICAuZ3QgdGguZ3QtY2N7d2lkdGg6NTBweDt0ZXh0LWFsaWduOmNlbnRlcn0uZ3QgdGguZ3QtZGN7d2lkdGg6NTVweDt0ZXh0LWFsaWduOmNlbnRlcn0KICAgICAgICAuZ3QgdGguZ3QtY3d7YmFja2dyb3VuZDojZDM1NDAwO2NvbG9yOiNmZmZ9CiAgICAgICAgLmd0IHRoLmd0LXZhe2JhY2tncm91bmQ6cmVwZWF0aW5nLWxpbmVhci1ncmFkaWVudCg0NWRlZywjZjBmMGYwLCNmMGYwZjAgM3B4LCNlOGU4ZTggM3B4LCNlOGU4ZTggNnB4KX0KICAgICAgICAuZ3QgdGR7cGFkZGluZzowO2hlaWdodDoyOHB4O2JvcmRlci1ib3R0b206MXB4IHNvbGlkICNmMGYwZjA7Ym9yZGVyLXJpZ2h0OjFweCBzb2xpZCAjZjhmOGY4O3Bvc2l0aW9uOnJlbGF0aXZlfQogICAgICAgIC5ndCB0ZC5ndC1sYXtmb250LXNpemU6Ljc0cmVtO2ZvbnQtd2VpZ2h0OjUwMDtjb2xvcjojMzMzO3BhZGRpbmctbGVmdDoxMHB4O3doaXRlLXNwYWNlOm5vd3JhcDtvdmVyZmxvdzpoaWRkZW47dGV4dC1vdmVyZmxvdzplbGxpcHNpcztjdXJzb3I6cG9pbnRlcjtib3JkZXItcmlnaHQ6MXB4IHNvbGlkICNlZWV9CiAgICAgICAgLmd0IHRkLmd0LWxhOmhvdmVye2NvbG9yOiNkMzU0MDA7dGV4dC1kZWNvcmF0aW9uOnVuZGVybGluZX0KICAgICAgICAuZ3QgdGQuZ3QtY297Zm9udC1zaXplOi43cmVtO2ZvbnQtd2VpZ2h0OjcwMDt0ZXh0LWFsaWduOmNlbnRlcjtjb2xvcjojZDM1NDAwO2JvcmRlci1yaWdodDoxcHggc29saWQgI2VlZX0KICAgICAgICAuZ3QgdGQuZ3QtY2t7dGV4dC1hbGlnbjpjZW50ZXI7Ym9yZGVyLXJpZ2h0OjFweCBzb2xpZCAjZWVlfQogICAgICAgIC5ndCB0ZC5ndC12YXtiYWNrZ3JvdW5kOnJlcGVhdGluZy1saW5lYXItZ3JhZGllbnQoNDVkZWcsI2YwZjBmMCwjZjBmMGYwIDNweCwjZThlOGU4IDNweCwjZThlOGU4IDZweCkhaW1wb3J0YW50fQogICAgICAgIC5ndC1jZntwb3NpdGlvbjphYnNvbHV0ZTtpbnNldDozcHggMXB4O2JvcmRlci1yYWRpdXM6M3B4fQogICAgICAgIC5ndC1jZi5kb25le29wYWNpdHk6LjR9CiAgICAgICAgLmd0LWNmLmMtcmVudHJlZXtiYWNrZ3JvdW5kOiM1ZGFkZTJ9Lmd0LWNmLmMtZXhhbWVuc3tiYWNrZ3JvdW5kOiMyZTg2YzF9CiAgICAgICAgLmd0LWNmLmMtb3JpZW50YXRpb257YmFja2dyb3VuZDojMWE1Mjc2fS5ndC1jZi5jLWNvbnNlaWxze2JhY2tncm91bmQ6IzI0NzFhM30KICAgICAgICAuZ3QtY2YuYy1hZG1pbntiYWNrZ3JvdW5kOiMxNDhmNzd9Lmd0LWNmLmMtYXV0cmV7YmFja2dyb3VuZDojNWI2ZDVifQogICAgICAgIC5ndC1jZi5jLXBlZGFnb2d7YmFja2dyb3VuZDojOGU0NGFkfS5ndC1jZi5jLXJoe2JhY2tncm91bmQ6I2MwMzkyYn0KICAgICAgICAuZ3QtbGVne2Rpc3BsYXk6ZmxleDtnYXA6MTJweDtmbGV4LXdyYXA6d3JhcDttYXJnaW4tdG9wOjhweDtwYWRkaW5nOjRweCAwfQogICAgICAgIC5ndC1sZWcgc3BhbntkaXNwbGF5OmZsZXg7YWxpZ24taXRlbXM6Y2VudGVyO2dhcDo0cHg7Zm9udC1zaXplOi42OHJlbTtjb2xvcjojNjY2fQogICAgICAgIC5ndC1sZWcgaXt3aWR0aDoxMnB4O2hlaWdodDo4cHg7Ym9yZGVyLXJhZGl1czoycHg7ZGlzcGxheTppbmxpbmUtYmxvY2t9CgogICAgICAgIC8qIOKVkOKVkOKVkCBNT0RBTFMg4pWQ4pWQ4pWQICovCiAgICAgICAgLm0tb3Z7ZGlzcGxheTpub25lO3Bvc2l0aW9uOmZpeGVkO2luc2V0OjA7YmFja2dyb3VuZDpyZ2JhKDAsMCwwLC40KTt6LWluZGV4Ojk5OTk7YWxpZ24taXRlbXM6Y2VudGVyO2p1c3RpZnktY29udGVudDpjZW50ZXJ9CiAgICAgICAgLm0tb3Yub3BlbntkaXNwbGF5OmZsZXh9CiAgICAgICAgLm0tYm94e2JhY2tncm91bmQ6I2ZmZjtib3JkZXItcmFkaXVzOjE0cHg7cGFkZGluZzoyNnB4O21heC13aWR0aDo5NXZ3O21heC1oZWlnaHQ6OTB2aDtvdmVyZmxvdy15OmF1dG87Ym94LXNoYWRvdzowIDIwcHggNjBweCByZ2JhKDAsMCwwLC4yNSl9CiAgICAgICAgLm0tYm94IGgze21hcmdpbjowIDAgMTZweDtkaXNwbGF5OmZsZXg7YWxpZ24taXRlbXM6Y2VudGVyO2dhcDo4cHh9Lm0tYm94IGgzIGl7Y29sb3I6dmFyKC0taGVhZGVyKX0KICAgICAgICAubS1yb3d7ZGlzcGxheTpncmlkO2dyaWQtdGVtcGxhdGUtY29sdW1uczoxZnIgMWZyO2dhcDoxMnB4O21hcmdpbi1ib3R0b206MTJweH0KICAgICAgICAubS1hY3Rze2Rpc3BsYXk6ZmxleDtnYXA6OHB4O2p1c3RpZnktY29udGVudDpmbGV4LWVuZDttYXJnaW4tdG9wOjEycHh9CiAgICAgICAgLm1ie3BhZGRpbmc6OHB4IDE4cHg7Ym9yZGVyOm5vbmU7Ym9yZGVyLXJhZGl1czo4cHg7Y3Vyc29yOnBvaW50ZXI7Zm9udC13ZWlnaHQ6NjAwO2ZvbnQtc2l6ZTouOHJlbTtkaXNwbGF5OmZsZXg7YWxpZ24taXRlbXM6Y2VudGVyO2dhcDo1cHh9CiAgICAgICAgLm1iLWN7YmFja2dyb3VuZDojZjBmMGYwO2NvbG9yOiM1NTU7cGFkZGluZzoxMHB4IDIwcHg7Zm9udC1zaXplOi44NXJlbTtib3JkZXItcmFkaXVzOjhweH0ubWItb2t7YmFja2dyb3VuZDp2YXIoLS1oZWFkZXIpO2NvbG9yOiNmZmY7Zm9udC1zaXplOi45cmVtO3BhZGRpbmc6MTBweCAyNHB4O2JveC1zaGFkb3c6MCAycHggOHB4IHJnYmEoNDQsNjIsODAsLjMpO3RyYW5zaXRpb246dHJhbnNmb3JtIC4xcyxib3gtc2hhZG93IC4xc30ubWItb2s6aG92ZXJ7dHJhbnNmb3JtOnRyYW5zbGF0ZVkoLTFweCk7Ym94LXNoYWRvdzowIDRweCAxMnB4IHJnYmEoNDQsNjIsODAsLjQpfQogICAgICAgIC5tYi1kZWx7YmFja2dyb3VuZDojZTc0YzNjO2NvbG9yOiNmZmY7bWFyZ2luLXJpZ2h0OmF1dG99CgogICAgICAgIEBtZWRpYSBwcmludHsKICAgICAgICAgICAgLnNpZGViYXIsLmd0LWJhci1idG5zLC5ndC1uYXYsLmd0LWxlZywuZ3QtY2ssLmV2LWhlYWRlciwuZXYtdG9wLC5ldi1maWx0ZXJzLC5ldi1jYXJkLWFjdHMsLm5vLXByaW50e2Rpc3BsYXk6bm9uZSFpbXBvcnRhbnR9CiAgICAgICAgICAgIC5jb250ZW50e21hcmdpbi1sZWZ0OjAhaW1wb3J0YW50O3BhZGRpbmc6OHB4IWltcG9ydGFudH0KICAgICAgICAgICAgLmd0LXdyYXB7Ym9yZGVyOjFweCBzb2xpZCAjOTk5O21heC1oZWlnaHQ6bm9uZSFpbXBvcnRhbnQ7b3ZlcmZsb3c6dmlzaWJsZSFpbXBvcnRhbnR9CiAgICAgICAgICAgIC5ndCB0ZCwuZ3QgdGh7Ym9yZGVyOjFweCBzb2xpZCAjY2NjIWltcG9ydGFudH0KICAgICAgICAgICAgLmd0LWNme3ByaW50LWNvbG9yLWFkanVzdDpleGFjdDstd2Via2l0LXByaW50LWNvbG9yLWFkanVzdDpleGFjdH0KICAgICAgICB9CgogICAgCi8qIOKUgOKUgCBHb29nbGUgQ2FsZW5kYXIgZHVhbCB2aWV3IOKUgOKUgCAqLwouZ2NhbC1iYW5uZXJ7YmFja2dyb3VuZDpsaW5lYXItZ3JhZGllbnQoMTM1ZGVnLCM0Mjg1ZjQsIzM0YTg1Myk7Y29sb3I6I2ZmZjtwYWRkaW5nOjE0cHggMThweDtib3JkZXItcmFkaXVzOjEycHg7ZGlzcGxheTpmbGV4O2FsaWduLWl0ZW1zOmNlbnRlcjtnYXA6MTJweDttYXJnaW4tYm90dG9tOjE2cHg7Zm9udC1zaXplOi44NXJlbTt9Ci5nY2FsLWJhbm5lciBpe2ZvbnQtc2l6ZToxLjNyZW07fQouZ2NhbC1iYW5uZXIgLmdjYWwtc3RhdHVze2ZvbnQtd2VpZ2h0OjYwMDt9Ci5nY2FsLWJhbm5lciAuZ2NhbC1zdWJ7b3BhY2l0eTouODU7Zm9udC1zaXplOi43MnJlbTt9Ci5nY2FsLW9mZmxpbmUtYmFubmVye2JhY2tncm91bmQ6I2YwZjBmMDtjb2xvcjojNTU1O3BhZGRpbmc6MTRweCAxOHB4O2JvcmRlci1yYWRpdXM6MTJweDtkaXNwbGF5OmZsZXg7YWxpZ24taXRlbXM6Y2VudGVyO2dhcDoxMnB4O21hcmdpbi1ib3R0b206MTZweDtmb250LXNpemU6Ljg1cmVtO30KLmdjYWwtb2ZmbGluZS1iYW5uZXIgaXtmb250LXNpemU6MS4zcmVtO2NvbG9yOiM5OTk7fQouZ2NhbC1ldnQtbGlzdHttYXgtaGVpZ2h0OjYwdmg7b3ZlcmZsb3cteTphdXRvO30KLmdjYWwtZGF5LWdyb3Vwe21hcmdpbi1ib3R0b206MTRweDt9Ci5nY2FsLWRheS1oZWFkZXJ7Zm9udC13ZWlnaHQ6NzAwO2ZvbnQtc2l6ZTouODJyZW07Y29sb3I6IzMzMztwYWRkaW5nOjZweCAwO2JvcmRlci1ib3R0b206MnB4IHNvbGlkICNlMGUwZTA7bWFyZ2luLWJvdHRvbTo2cHg7cG9zaXRpb246c3RpY2t5O3RvcDowO2JhY2tncm91bmQ6I2ZmZjt6LWluZGV4OjE7fQouZ2NhbC1kYXktaGVhZGVyLmlzLXRvZGF5e2NvbG9yOiNlNjdlMjI7Ym9yZGVyLWJvdHRvbS1jb2xvcjojZTY3ZTIyO30KLmdjYWwtaXRlbXtkaXNwbGF5OmZsZXg7YWxpZ24taXRlbXM6ZmxleC1zdGFydDtnYXA6MTBweDtwYWRkaW5nOjdweCAxMHB4O2JvcmRlci1yYWRpdXM6OHB4O2ZvbnQtc2l6ZTouOHJlbTt0cmFuc2l0aW9uOmJhY2tncm91bmQgLjE1czt9Ci5nY2FsLWl0ZW06aG92ZXJ7YmFja2dyb3VuZDojZjVmNWY1O30KLmdjYWwtaXRlbSAuZ2NhbC1kb3R7d2lkdGg6MTBweDtoZWlnaHQ6MTBweDtib3JkZXItcmFkaXVzOjUwJTtmbGV4LXNocmluazowO21hcmdpbi10b3A6M3B4O30KLmdjYWwtaXRlbSAuZ2NhbC10aW1le2ZvbnQtd2VpZ2h0OjYwMDtjb2xvcjojNTU1O21pbi13aWR0aDo0OHB4O2ZvbnQtc2l6ZTouNzVyZW07fQouZ2NhbC1pdGVtIC5nY2FsLXRpdGxle2ZsZXg6MTtjb2xvcjojMjIyO30KLmdjYWwtaXRlbSAuZ2NhbC1jYWwtbmFtZXtmb250LXNpemU6LjY1cmVtO2NvbG9yOiM5OTk7bWFyZ2luLXRvcDoxcHg7fQouZ2NhbC1uYXZ7ZGlzcGxheTpmbGV4O2FsaWduLWl0ZW1zOmNlbnRlcjtnYXA6OHB4O21hcmdpbi1ib3R0b206MTJweDtmbGV4LXdyYXA6d3JhcDt9Ci5nY2FsLW5hdiBidXR0b257cGFkZGluZzo2cHggMTJweDtib3JkZXI6MXB4IHNvbGlkICNkZGQ7Ym9yZGVyLXJhZGl1czo4cHg7YmFja2dyb3VuZDojZmZmO2N1cnNvcjpwb2ludGVyO2ZvbnQtc2l6ZTouNzhyZW07Zm9udC13ZWlnaHQ6NjAwO30KLmdjYWwtbmF2IGJ1dHRvbjpob3ZlcntiYWNrZ3JvdW5kOiNmMGYwZjA7fQouZ2NhbC1uYXYgLmdjYWwtcGVyaW9ke2ZvbnQtd2VpZ2h0OjcwMDtmb250LXNpemU6LjlyZW07Y29sb3I6IzMzMzttaW4td2lkdGg6MTYwcHg7dGV4dC1hbGlnbjpjZW50ZXI7fQouZ2NhbC1lbXB0eXt0ZXh0LWFsaWduOmNlbnRlcjtwYWRkaW5nOjMwcHg7Y29sb3I6I2FhYTtmb250LXNpemU6Ljg1cmVtO30KLmdjYWwtZW1wdHkgaXtmb250LXNpemU6MnJlbTtkaXNwbGF5OmJsb2NrO21hcmdpbi1ib3R0b206OHB4O30KCgogICAgICAgIC8qIFdoZW4gaW5zaWRlIFBJTE9URSB3cmFwcGVyIGlmcmFtZSAqLwogICAgICAgIGJvZHkuaW4td3JhcHBlciAuc2lkZWJhciB7IC0tc2lkZWJhci13OiAxODBweDsgd2lkdGg6IHZhcigtLXNpZGViYXItdyk7IGZsZXgtc2hyaW5rOjA7IH0KICAgICAgICBib2R5LmluLXdyYXBwZXIgLnNpZGViYXIgLmJyYW5kIHsgZGlzcGxheTogbm9uZTsgfQogICAgICAgIGJvZHkuaW4td3JhcHBlciAudG9wLWJhciB7IGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDsgfQogICAgICAgIGJvZHkuaW4td3JhcHBlciAuc2VjdGlvbi5hY3RpdmUgeyBkaXNwbGF5OiBibG9jazsgZmxleDogMTsgbWluLXdpZHRoOiAwOyB9CiAgICAgICAgLm0tb3Zbc3R5bGUqPSJsZWZ0OjI4MHB4Il0geyBsZWZ0OiB2YXIoLS1zaWRlYmFyLXcsIDI4MHB4KSAhaW1wb3J0YW50OyB9CiAgICAgICAgLm0tb3Zbc3R5bGUqPSJsZWZ0OjI4MHB4Il0gPiAubS1ib3ggeyB3aWR0aDogY2FsYygxMDB2dyAtIHZhcigtLXNpZGViYXItdywgMjgwcHgpKSAhaW1wb3J0YW50OyBtYXgtd2lkdGg6IGNhbGMoMTAwdncgLSB2YXIoLS1zaWRlYmFyLXcsIDI4MHB4KSkgIWltcG9ydGFudDsgfQo8L3N0eWxlPgo8L2hlYWQ+Cjxib2R5PgoKPG5hdiBjbGFzcz0ic2lkZWJhciBuby1wcmludCI+CiAgICA8ZGl2IGNsYXNzPSJicmFuZCI+Q0FESVI8L2Rpdj4KICAgIDxkaXYgY2xhc3M9Im1lbnUiPgogICAgICAgIAogICAgICAgIDxhIGNsYXNzPSJtZW51LWl0ZW0gYWN0aXZlIiBkYXRhLW1lbnU9Im1lbnUyIiBvbmNsaWNrPSJzd2l0Y2hNZW51KCdtZW51MicpIj48aSBjbGFzcz0iZmFzIGZhLWNoZWNrLXNxdWFyZSI+PC9pPiBUbyBEbyBMaXN0PC9hPgogICAgICAgIDxhIGNsYXNzPSJtZW51LWl0ZW0iIGRhdGEtbWVudT0ibWVudTMiIG9uY2xpY2s9InN3aXRjaE1lbnUoJ21lbnUzJykiIGNsYXNzPSJhY3RpdmUiPjxpIGNsYXNzPSJmYXMgZmEtY2FsZW5kYXItYWx0Ij48L2k+IENhbGVuZHJpZXI8L2E+CiAgICAgICAgPGEgY2xhc3M9Im1lbnUtaXRlbSIgZGF0YS1tZW51PSJtZW51NCIgb25jbGljaz0ic3dpdGNoTWVudSgnbWVudTQnKSI+PGkgY2xhc3M9ImZhcyBmYS1jbGlwYm9hcmQtbGlzdCI+PC9pPiBDb25zZWlsIGRlIERpcmVjdGlvbjwvYT4KICAgICAgICA8YSBjbGFzcz0ibWVudS1pdGVtIiBkYXRhLW1lbnU9Im1lbnU1IiBvbmNsaWNrPSJzd2l0Y2hNZW51KCdtZW51NScpIj48aSBjbGFzcz0iZmFzIGZhLXVzZXItZ3JhZHVhdGUiPjwvaT4gU3Vpdmkgw4lsw6h2ZSAvIFBvaW50IENQRTwvYT4KICAgICAgICA8YSBjbGFzcz0ibWVudS1pdGVtIiBkYXRhLW1lbnU9Im1lbnU2IiBvbmNsaWNrPSJzd2l0Y2hNZW51KCdtZW51NicpIj48aSBjbGFzcz0iZmFzIGZhLWNvbW1lbnRzIj48L2k+IEVudHJldGllbnM8L2E+CiAgICAgICAgPGEgY2xhc3M9Im1lbnUtaXRlbSIgZGF0YS1tZW51PSJtZW51NyIgb25jbGljaz0ic3dpdGNoTWVudSgnbWVudTcnKSI+PGkgY2xhc3M9ImZhcyBmYS11c2VycyI+PC9pPiBSw6l1bmlvbnM8L2E+CiAgICAgICAgPGEgY2xhc3M9Im1lbnUtaXRlbSIgZGF0YS1tZW51PSJtZW51OCIgb25jbGljaz0ic3dpdGNoTWVudSgnbWVudTgnKSI+PGkgY2xhc3M9ImZhcyBmYS1oaXN0b3J5Ij48L2k+IEhpc3RvcmlxdWU8L2E+CiAgICAgICAgPGEgY2xhc3M9Im1lbnUtaXRlbSIgZGF0YS1tZW51PSJtZW51OSIgb25jbGljaz0ic3dpdGNoTWVudSgnbWVudTknKSI+PGkgY2xhc3M9ImZhcyBmYS1jaGFydC1saW5lIj48L2k+IFRhYmxlYXUgZGUgQm9yZDwvYT4KICAgICAgICA8YSBjbGFzcz0ibWVudS1pdGVtIiBkYXRhLW1lbnU9Im1lbnUxMCIgb25jbGljaz0ic3dpdGNoTWVudSgnbWVudTEwJykiPjxpIGNsYXNzPSJmYXMgZmEtY2FsZW5kYXItY2hlY2siPjwvaT4gQWN0aXZpdMOpcyBww6lkYWdvZ2lxdWVzPC9hPgogICAgICAgIDxhIGNsYXNzPSJtZW51LWl0ZW0iIGRhdGEtbWVudT0ibWVudTExIiBvbmNsaWNrPSJzd2l0Y2hNZW51KCdtZW51MTEnKSI+PGkgY2xhc3M9ImZhcyBmYS1zdHJlYW0iPjwvaT4gw4ljaMOpYW5jZXM8L2E+CiAgICAgICAgPGEgY2xhc3M9Im1lbnUtaXRlbSIgZGF0YS1tZW51PSJtZW51MTIiIG9uY2xpY2s9InN3aXRjaE1lbnUoJ21lbnUxMicpIj48aSBjbGFzcz0iZmFzIGZhLWJvb2siPjwvaT4gUHJvY8OpZHVyZXM8L2E+CiAgICA8L2Rpdj4KICAgIDxkaXYgY2xhc3M9ImZvb3Rlci1pbmZvIj5DQURJUiBieSBGUzwvZGl2Pgo8L25hdj4KCjxkaXYgY2xhc3M9Im1haW4tY29udGVudCI+CiAgICA8ZGl2IGNsYXNzPSJ0b3AtYmFyIG5vLXByaW50Ij4KICAgICAgICA8ZGl2IGNsYXNzPSJwYWdlLXRpdGxlIj48aDIgaWQ9ImN1cnJlbnQtdGl0bGUiPlBhcmFtw6h0cmVzPC9oMj48cCBpZD0iY3VycmVudC1kYXRlIj48L3A+PC9kaXY+CiAgICAgICAgPGRpdiBjbGFzcz0ic3lzdGVtLXN0YXR1cyI+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9InNhdmUtaW5kaWNhdG9yIiBpZD0iYXV0by1zYXZlLW1zZyI+PGkgY2xhc3M9ImZhcyBmYS1zeW5jLWFsdCBmYS1zcGluIj48L2k+IERvbm7DqWVzIMOgIGpvdXI8L2Rpdj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0iYWN0aW9uLWJ1dHRvbnMiPgogICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9ImZpbGUiIGlkPSJpbXBvcnRGaWxlIiBzdHlsZT0iZGlzcGxheTpub25lIiBvbmNoYW5nZT0iaW1wb3J0RGF0YSh0aGlzKSI+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgIDwvZGl2PgogICAgPC9kaXY+CgogICAgPGRpdiBpZD0ibWVudTEiIGNsYXNzPSJzZWN0aW9uIj4KICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWNhcmQiIHN0eWxlPSJtYXJnaW4tdG9wOjIwcHg7Ij4KICAgICAgICAgICAgPGgzPjxpIGNsYXNzPSJmYXMgZmEtZmlsZS1hbHQiPjwvaT4gTW9kw6hsZXMgcGFyIGTDqWZhdXQ8L2gzPgogICAgICAgICAgICA8c21hbGwgc3R5bGU9ImNvbG9yOiM4ODg7ZGlzcGxheTpibG9jazttYXJnaW4tYm90dG9tOjEycHg7Ij5QZXJzb25uYWxpc2V6IGxlIGNvbnRlbnUgcGFyIGTDqWZhdXQgZGVzIHpvbmVzIGRlIHByaXNlIGRlIG5vdGVzLjwvc21hbGw+CiAgICAgICAgICAgIDxkaXYgc3R5bGU9ImRpc3BsYXk6ZmxleDtmbGV4LWRpcmVjdGlvbjpjb2x1bW47Z2FwOjE0cHg7Ij4KICAgICAgICAgICAgICAgIDxkaXY+CiAgICAgICAgICAgICAgICAgICAgPGxhYmVsIHN0eWxlPSJmb250LXNpemU6Ljc4cmVtO2ZvbnQtd2VpZ2h0OjYwMDttYXJnaW4tYm90dG9tOjRweDtkaXNwbGF5OmJsb2NrOyI+PGkgY2xhc3M9ImZhcyBmYS1jb21tZW50cyIgc3R5bGU9ImNvbG9yOiM5YjU5YjYiPjwvaT4gRW50cmV0aWVuPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJydGUtd3JhcCI+PGRpdiBjbGFzcz0icnRlLWJhciI+CjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJkb2N1bWVudC5leGVjQ29tbWFuZCgnYm9sZCcpIiB0aXRsZT0iR3JhcyI+PGI+RzwvYj48L2J1dHRvbj4KPGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9ImRvY3VtZW50LmV4ZWNDb21tYW5kKCdpdGFsaWMnKSIgdGl0bGU9Ikl0YWxpcXVlIj48aT5JPC9pPjwvYnV0dG9uPgo8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0iZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2luc2VydFVub3JkZXJlZExpc3QnKSIgdGl0bGU9IlB1Y2VzIj48aSBjbGFzcz0iZmFzIGZhLWxpc3QtdWwiPjwvaT48L2J1dHRvbj4KPHNwYW4gY2xhc3M9InJ0ZS1zZXAiPjwvc3Bhbj48YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0iZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2p1c3RpZnlMZWZ0JykiIHRpdGxlPSJBbGlnbmVyIMOgIGdhdWNoZSI+PGkgY2xhc3M9ImZhcyBmYS1hbGlnbi1sZWZ0Ij48L2k+PC9idXR0b24+PGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9ImRvY3VtZW50LmV4ZWNDb21tYW5kKCdqdXN0aWZ5Q2VudGVyJykiIHRpdGxlPSJDZW50cmVyIj48aSBjbGFzcz0iZmFzIGZhLWFsaWduLWNlbnRlciI+PC9pPjwvYnV0dG9uPjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJkb2N1bWVudC5leGVjQ29tbWFuZCgnanVzdGlmeUZ1bGwnKSIgdGl0bGU9Ikp1c3RpZmllciI+PGkgY2xhc3M9ImZhcyBmYS1hbGlnbi1qdXN0aWZ5Ij48L2k+PC9idXR0b24+CjwvZGl2PjxkaXYgaWQ9InRwbC1lbnQiIGNsYXNzPSJkb2MtZWRpdG9yIiBjb250ZW50ZWRpdGFibGU9InRydWUiIHN0eWxlPSJtaW4taGVpZ2h0OjYwcHg7Zm9udC1zaXplOi44cmVtOyI+PC9kaXY+PC9kaXY+CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIDxkaXY+CiAgICAgICAgICAgICAgICAgICAgPGxhYmVsIHN0eWxlPSJmb250LXNpemU6Ljc4cmVtO2ZvbnQtd2VpZ2h0OjYwMDttYXJnaW4tYm90dG9tOjRweDtkaXNwbGF5OmJsb2NrOyI+PGkgY2xhc3M9ImZhcyBmYS11c2VycyIgc3R5bGU9ImNvbG9yOiNlNzRjM2MiPjwvaT4gUsOpdW5pb248L2xhYmVsPgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InJ0ZS13cmFwIj48ZGl2IGNsYXNzPSJydGUtYmFyIj4KPGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9ImRvY3VtZW50LmV4ZWNDb21tYW5kKCdib2xkJykiIHRpdGxlPSJHcmFzIj48Yj5HPC9iPjwvYnV0dG9uPgo8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0iZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2l0YWxpYycpIiB0aXRsZT0iSXRhbGlxdWUiPjxpPkk8L2k+PC9idXR0b24+CjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJkb2N1bWVudC5leGVjQ29tbWFuZCgnaW5zZXJ0VW5vcmRlcmVkTGlzdCcpIiB0aXRsZT0iUHVjZXMiPjxpIGNsYXNzPSJmYXMgZmEtbGlzdC11bCI+PC9pPjwvYnV0dG9uPgo8c3BhbiBjbGFzcz0icnRlLXNlcCI+PC9zcGFuPjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJkb2N1bWVudC5leGVjQ29tbWFuZCgnanVzdGlmeUxlZnQnKSIgdGl0bGU9IkFsaWduZXIgw6AgZ2F1Y2hlIj48aSBjbGFzcz0iZmFzIGZhLWFsaWduLWxlZnQiPjwvaT48L2J1dHRvbj48YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0iZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2p1c3RpZnlDZW50ZXInKSIgdGl0bGU9IkNlbnRyZXIiPjxpIGNsYXNzPSJmYXMgZmEtYWxpZ24tY2VudGVyIj48L2k+PC9idXR0b24+PGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9ImRvY3VtZW50LmV4ZWNDb21tYW5kKCdqdXN0aWZ5RnVsbCcpIiB0aXRsZT0iSnVzdGlmaWVyIj48aSBjbGFzcz0iZmFzIGZhLWFsaWduLWp1c3RpZnkiPjwvaT48L2J1dHRvbj4KPC9kaXY+PGRpdiBpZD0idHBsLXJldSIgY2xhc3M9ImRvYy1lZGl0b3IiIGNvbnRlbnRlZGl0YWJsZT0idHJ1ZSIgc3R5bGU9Im1pbi1oZWlnaHQ6NjBweDtmb250LXNpemU6LjhyZW07Ij48L2Rpdj48L2Rpdj4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgPGRpdj4KICAgICAgICAgICAgICAgICAgICA8bGFiZWwgc3R5bGU9ImZvbnQtc2l6ZTouNzhyZW07Zm9udC13ZWlnaHQ6NjAwO21hcmdpbi1ib3R0b206NHB4O2Rpc3BsYXk6YmxvY2s7Ij48aSBjbGFzcz0iZmFzIGZhLWNsaXBib2FyZC1saXN0IiBzdHlsZT0iY29sb3I6IzJjM2U1MCI+PC9pPiBDb25zZWlsIGRlIERpcmVjdGlvbiAoT0RKKTwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0icnRlLXdyYXAiPjxkaXYgY2xhc3M9InJ0ZS1iYXIiPgo8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0iZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2JvbGQnKSIgdGl0bGU9IkdyYXMiPjxiPkc8L2I+PC9idXR0b24+CjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJkb2N1bWVudC5leGVjQ29tbWFuZCgnaXRhbGljJykiIHRpdGxlPSJJdGFsaXF1ZSI+PGk+STwvaT48L2J1dHRvbj4KPGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9ImRvY3VtZW50LmV4ZWNDb21tYW5kKCdpbnNlcnRVbm9yZGVyZWRMaXN0JykiIHRpdGxlPSJQdWNlcyI+PGkgY2xhc3M9ImZhcyBmYS1saXN0LXVsIj48L2k+PC9idXR0b24+CjxzcGFuIGNsYXNzPSJydGUtc2VwIj48L3NwYW4+PGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9ImRvY3VtZW50LmV4ZWNDb21tYW5kKCdqdXN0aWZ5TGVmdCcpIiB0aXRsZT0iQWxpZ25lciDDoCBnYXVjaGUiPjxpIGNsYXNzPSJmYXMgZmEtYWxpZ24tbGVmdCI+PC9pPjwvYnV0dG9uPjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJkb2N1bWVudC5leGVjQ29tbWFuZCgnanVzdGlmeUNlbnRlcicpIiB0aXRsZT0iQ2VudHJlciI+PGkgY2xhc3M9ImZhcyBmYS1hbGlnbi1jZW50ZXIiPjwvaT48L2J1dHRvbj48YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0iZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2p1c3RpZnlGdWxsJykiIHRpdGxlPSJKdXN0aWZpZXIiPjxpIGNsYXNzPSJmYXMgZmEtYWxpZ24tanVzdGlmeSI+PC9pPjwvYnV0dG9uPgo8L2Rpdj48ZGl2IGlkPSJ0cGwtZGlyIiBjbGFzcz0iZG9jLWVkaXRvciIgY29udGVudGVkaXRhYmxlPSJ0cnVlIiBzdHlsZT0ibWluLWhlaWdodDo2MHB4O2ZvbnQtc2l6ZTouOHJlbTsiPjwvZGl2PjwvZGl2PgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICA8ZGl2PgogICAgICAgICAgICAgICAgICAgIDxsYWJlbCBzdHlsZT0iZm9udC1zaXplOi43OHJlbTtmb250LXdlaWdodDo2MDA7bWFyZ2luLWJvdHRvbTo0cHg7ZGlzcGxheTpibG9jazsiPjxpIGNsYXNzPSJmYXMgZmEtdXNlci1ncmFkdWF0ZSIgc3R5bGU9ImNvbG9yOiMyN2FlNjAiPjwvaT4gU3Vpdmkgw4lsw6h2ZTwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0icnRlLXdyYXAiPjxkaXYgY2xhc3M9InJ0ZS1iYXIiPgo8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0iZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2JvbGQnKSIgdGl0bGU9IkdyYXMiPjxiPkc8L2I+PC9idXR0b24+CjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJkb2N1bWVudC5leGVjQ29tbWFuZCgnaXRhbGljJykiIHRpdGxlPSJJdGFsaXF1ZSI+PGk+STwvaT48L2J1dHRvbj4KPGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9ImRvY3VtZW50LmV4ZWNDb21tYW5kKCdpbnNlcnRVbm9yZGVyZWRMaXN0JykiIHRpdGxlPSJQdWNlcyI+PGkgY2xhc3M9ImZhcyBmYS1saXN0LXVsIj48L2k+PC9idXR0b24+CjxzcGFuIGNsYXNzPSJydGUtc2VwIj48L3NwYW4+PGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9ImRvY3VtZW50LmV4ZWNDb21tYW5kKCdqdXN0aWZ5TGVmdCcpIiB0aXRsZT0iQWxpZ25lciDDoCBnYXVjaGUiPjxpIGNsYXNzPSJmYXMgZmEtYWxpZ24tbGVmdCI+PC9pPjwvYnV0dG9uPjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJkb2N1bWVudC5leGVjQ29tbWFuZCgnanVzdGlmeUNlbnRlcicpIiB0aXRsZT0iQ2VudHJlciI+PGkgY2xhc3M9ImZhcyBmYS1hbGlnbi1jZW50ZXIiPjwvaT48L2J1dHRvbj48YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0iZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2p1c3RpZnlGdWxsJykiIHRpdGxlPSJKdXN0aWZpZXIiPjxpIGNsYXNzPSJmYXMgZmEtYWxpZ24tanVzdGlmeSI+PC9pPjwvYnV0dG9uPgo8L2Rpdj48ZGl2IGlkPSJ0cGwtc3VpdmkiIGNsYXNzPSJkb2MtZWRpdG9yIiBjb250ZW50ZWRpdGFibGU9InRydWUiIHN0eWxlPSJtaW4taGVpZ2h0OjYwcHg7Zm9udC1zaXplOi44cmVtOyI+PC9kaXY+PC9kaXY+CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImJ0biBidG4tYWNjZW50IiBvbmNsaWNrPSJzYXZlVGVtcGxhdGVzKCkiIHN0eWxlPSJhbGlnbi1zZWxmOmZsZXgtc3RhcnQ7Ij48aSBjbGFzcz0iZmFzIGZhLXNhdmUiPjwvaT4gRW5yZWdpc3RyZXIgbGVzIG1vZMOobGVzPC9idXR0b24+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgIDwvZGl2PgoKICAgICAgICA8IS0tIEV4cG9ydCAvIEltcG9ydCAtLT4KICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWNhcmQiIHN0eWxlPSJtYXJnaW4tdG9wOjE2cHg7Ym9yZGVyOjJweCBzb2xpZCAjZTBlN2ZmO2JhY2tncm91bmQ6I2Y4ZmFmZiI+CiAgICAgICAgICAgIDxoMz48aSBjbGFzcz0iZmFzIGZhLWRhdGFiYXNlIiBzdHlsZT0iY29sb3I6IzNCODJGNiI+PC9pPiBTYXV2ZWdhcmRlICYgUmVzdGF1cmF0aW9uIGRlcyBkb25uw6llczwvaDM+CiAgICAgICAgICAgIDxkaXYgc3R5bGU9ImJhY2tncm91bmQ6I2YwZmRmNDtib3JkZXI6MnB4IHNvbGlkICMyMkM1NUU7Ym9yZGVyLXJhZGl1czoxMHB4O3BhZGRpbmc6MTRweCAxOHB4O21hcmdpbi1ib3R0b206MTZweCI+CiAgICAgICAgICAgICAgICA8aDQgc3R5bGU9Im1hcmdpbjowIDAgOHB4O2ZvbnQtc2l6ZTouOXJlbTtjb2xvcjojMTY2NTM0Ij48aSBjbGFzcz0iZmFzIGZhLWhkZCI+PC9pPiBTYXV2ZWdhcmRlIGZpY2hpZXIgbG9jYWw8L2g0PgogICAgICAgICAgICAgICAgPHAgc3R5bGU9ImZvbnQtc2l6ZTouNzhyZW07Y29sb3I6IzU1NTttYXJnaW46MCAwIDEwcHgiPkNob2lzaXNzZXogdW4gZG9zc2llciBzdXIgdm90cmUgZGlzcXVlLCByw6lzZWF1LCBvdSBjbG91ZCAoT25lRHJpdmUsIEdvb2dsZSBEcml2ZeKApikuIExlIGZpY2hpZXIgPHN0cm9uZz5jYWRpcl9kYXRhLmpzb248L3N0cm9uZz4geSBzZXJhIGNyw6nDqSBldCBtaXMgw6Agam91ciBhdXRvbWF0aXF1ZW1lbnQuPC9wPgogICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iZGlzcGxheTpmbGV4O2dhcDoxMHB4O2FsaWduLWl0ZW1zOmNlbnRlcjtmbGV4LXdyYXA6d3JhcCI+CiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYnRuIiBvbmNsaWNrPSJ3aW5kb3cucGlja1NhdmVGaWxlKCkiIHN0eWxlPSJiYWNrZ3JvdW5kOiMxNjY1MzQ7Y29sb3I6I2ZmZjtmb250LXNpemU6LjhyZW0iPjxpIGNsYXNzPSJmYXMgZmEtZm9sZGVyLW9wZW4iPjwvaT4gQ2hvaXNpciB1biBkb3NzaWVyPC9idXR0b24+CiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYnRuIiBvbmNsaWNrPSJ3aW5kb3cucGlja0V4aXN0aW5nRmlsZSgpIiBzdHlsZT0iYmFja2dyb3VuZDojMjU2M0VCO2NvbG9yOiNmZmY7Zm9udC1zaXplOi44cmVtIj48aSBjbGFzcz0iZmFzIGZhLWZpbGUtaW1wb3J0Ij48L2k+IE91dnJpciB1biBmaWNoaWVyIGV4aXN0YW50PC9idXR0b24+CiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYnRuIiBpZD0iZmlsZS11bmxpbmstYnRuIiBvbmNsaWNrPSJ3aW5kb3cudW5saW5rRmlsZSgpIiBzdHlsZT0iYmFja2dyb3VuZDojZGMyNjI2O2NvbG9yOiNmZmY7Zm9udC1zaXplOi43NXJlbTtkaXNwbGF5Om5vbmUiPjxpIGNsYXNzPSJmYXMgZmEtdW5saW5rIj48L2k+IETDqWxpZXI8L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICA8c3BhbiBpZD0iZmlsZS1saW5rLXN0YXR1cyIgc3R5bGU9ImZvbnQtc2l6ZTouOHJlbSI+PGkgY2xhc3M9ImZhcyBmYS11bmxpbmsiIHN0eWxlPSJjb2xvcjojYWFhIj48L2k+IDxzcGFuIHN0eWxlPSJjb2xvcjojOTk5Ij5BdWN1biBmaWNoaWVyIGxpw6k8L3NwYW4+PC9zcGFuPgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICA8cCBzdHlsZT0iZm9udC1zaXplOi42OHJlbTtjb2xvcjojODg4O21hcmdpbjo4cHggMCAwIj48aSBjbGFzcz0iZmFzIGZhLWluZm8tY2lyY2xlIj48L2k+IExlIGZpY2hpZXIgcGV1dCDDqnRyZSBzdXIgdm90cmUgZGlzcXVlLCB1biByw6lzZWF1IHBhcnRhZ8OpLCBHb29nbGUgRHJpdmUsIE9uZURyaXZlLCBldGMuIEZvbmN0aW9ubmUgYXZlYyBDaHJvbWUgZXQgRWRnZS48L3A+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8cCBzdHlsZT0iZm9udC1zaXplOi44cmVtO2NvbG9yOiM2NjY7bWFyZ2luOjAgMCAxMnB4Ij5Wb3VzIHBvdXZleiBhdXNzaSBleHBvcnRlci9pbXBvcnRlciBtYW51ZWxsZW1lbnQgOjwvcD4KICAgICAgICAgICAgPGRpdiBzdHlsZT0iZGlzcGxheTpmbGV4O2dhcDoxMHB4O2ZsZXgtd3JhcDp3cmFwO2FsaWduLWl0ZW1zOmNlbnRlciI+CiAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJidG4gYnRuLWFjY2VudCIgb25jbGljaz0id2luZG93LmV4cG9ydERhdGEoKSIgc3R5bGU9ImJhY2tncm91bmQ6IzNCODJGNiI+PGkgY2xhc3M9ImZhcyBmYS1kb3dubG9hZCI+PC9pPiBFeHBvcnRlciBKU09OPC9idXR0b24+CiAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJidG4iIG9uY2xpY2s9ImRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbXBvcnQtZmlsZScpLmNsaWNrKCkiIHN0eWxlPSJiYWNrZ3JvdW5kOiMyMkM1NUU7Y29sb3I6I2ZmZiI+PGkgY2xhc3M9ImZhcyBmYS11cGxvYWQiPjwvaT4gSW1wb3J0ZXIgSlNPTjwvYnV0dG9uPgogICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9ImZpbGUiIGlkPSJpbXBvcnQtZmlsZSIgYWNjZXB0PSIuanNvbiIgc3R5bGU9ImRpc3BsYXk6bm9uZSIgb25jaGFuZ2U9ImltcG9ydERhdGEodGhpcykiPgogICAgICAgICAgICAgICAgPHNwYW4gaWQ9Imxhc3QtZXhwb3J0IiBzdHlsZT0iZm9udC1zaXplOi43cmVtO2NvbG9yOiM5OTkiPjwvc3Bhbj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDxwIHN0eWxlPSJmb250LXNpemU6LjdyZW07Y29sb3I6Izk5OTttYXJnaW46OHB4IDAgMCI+PGkgY2xhc3M9ImZhcyBmYS1pbmZvLWNpcmNsZSI+PC9pPiBMZSBmaWNoaWVyIGV4cG9ydMOpIHBldXQgw6p0cmUgc3RvY2vDqSBzdXIgdW4gcsOpc2VhdSwgdW5lIGNsw6kgVVNCLCB1biBGVFAsIEdvb2dsZSBEcml2ZSwgZXRjLjwvcD4KICAgICAgICA8L2Rpdj4KCiAgICA8L2Rpdj4KCiAgICA8ZGl2IGlkPSJtZW51MiIgY2xhc3M9InNlY3Rpb24iPgogICAgICAgIDxkaXYgaWQ9InRvZG8tdG9kYXktem9uZSIgY2xhc3M9InRvZG8tdG9kYXktem9uZSI+CiAgICAgICAgICAgIDxkaXYgc3R5bGU9ImZvbnQtd2VpZ2h0OmJvbGQ7IGNvbG9yOiNkMzU0MDA7IG1hcmdpbi1ib3R0b206MTBweDsgZGlzcGxheTpmbGV4OyBhbGlnbi1pdGVtczpjZW50ZXI7IGdhcDoxMHB4OyI+PGkgY2xhc3M9ImZhcyBmYS1iZWxsIGZhLWxnIj48L2k+IEFHRU5EQSBEVSBKT1VSIChHbGlzc2V6LWxlcyBkYW5zIHZvcyBjb2xvbm5lcyk8L2Rpdj4KICAgICAgICAgICAgPGRpdiBpZD0idG9kby10b2RheS1saXN0Ij48L2Rpdj4KICAgICAgICA8L2Rpdj4KICAgICAgICA8ZGl2IGNsYXNzPSJ0b2RvLWdyaWQiPgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJ0b2RvLWJveCB0b2RvLXVyZ2VudCI+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJ0b2RvLWhlYWRlciI+PGgzIHN0eWxlPSJjb2xvcjp2YXIoLS1oaWdobGlnaHQpIj5VUkdFTlQ8L2gzPjwvZGl2PgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0idG9kby1pbnB1dC1ncm91cCI+PGlucHV0IHR5cGU9InRleHQiIGlkPSJ0b2RvLWlucHV0LXVyZ2VudCIgcGxhY2Vob2xkZXI9IkFqb3V0ZXIuLi4iIG9ua2V5cHJlc3M9ImhhbmRsZUVudGVyKGV2ZW50LCAndXJnZW50JykiPjxidXR0b24gY2xhc3M9ImJ0biBidG4tZGFuZ2VyIGJ0bi1zbSIgb25jbGljaz0iYWRkVG9kbygndXJnZW50JykiPis8L2J1dHRvbj48L2Rpdj4KICAgICAgICAgICAgICAgIDx1bCBjbGFzcz0idG9kby1saXN0IiBpZD0ibGlzdC11cmdlbnQiIG9uZHJvcD0iZHJvcChldmVudCwgJ3VyZ2VudCcpIiBvbmRyYWdvdmVyPSJhbGxvd0Ryb3AoZXZlbnQpIj48L3VsPgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0idG9kby1ib3ggdG9kby1wbGFuIj4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InRvZG8taGVhZGVyIj48aDMgc3R5bGU9ImNvbG9yOnZhcigtLXByaW1hcnkpIj5BIFBMQU5JRklFUjwvaDM+PC9kaXY+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJ0b2RvLWlucHV0LWdyb3VwIj48aW5wdXQgdHlwZT0idGV4dCIgaWQ9InRvZG8taW5wdXQtcGxhbiIgcGxhY2Vob2xkZXI9IkFqb3V0ZXIuLi4iIG9ua2V5cHJlc3M9ImhhbmRsZUVudGVyKGV2ZW50LCAncGxhbicpIj48YnV0dG9uIGNsYXNzPSJidG4gYnRuLXByaW1hcnkgYnRuLXNtIiBvbmNsaWNrPSJhZGRUb2RvKCdwbGFuJykiPis8L2J1dHRvbj48L2Rpdj4KICAgICAgICAgICAgICAgIDx1bCBjbGFzcz0idG9kby1saXN0IiBpZD0ibGlzdC1wbGFuIiBvbmRyb3A9ImRyb3AoZXZlbnQsICdwbGFuJykiIG9uZHJhZ292ZXI9ImFsbG93RHJvcChldmVudCkiPjwvdWw+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJ0b2RvLWJveCB0b2RvLXBvc3NpYmxlIj4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InRvZG8taGVhZGVyIj48aDMgc3R5bGU9ImNvbG9yOnZhcigtLXN1Y2Nlc3MpIj5TSSBQT1NTSUJMRTwvaDM+PC9kaXY+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJ0b2RvLWlucHV0LWdyb3VwIj48aW5wdXQgdHlwZT0idGV4dCIgaWQ9InRvZG8taW5wdXQtcG9zc2libGUiIHBsYWNlaG9sZGVyPSJBam91dGVyLi4uIiBvbmtleXByZXNzPSJoYW5kbGVFbnRlcihldmVudCwgJ3Bvc3NpYmxlJykiPjxidXR0b24gY2xhc3M9ImJ0biBidG4tc3VjY2VzcyBidG4tc20iIG9uY2xpY2s9ImFkZFRvZG8oJ3Bvc3NpYmxlJykiPis8L2J1dHRvbj48L2Rpdj4KICAgICAgICAgICAgICAgIDx1bCBjbGFzcz0idG9kby1saXN0IiBpZD0ibGlzdC1wb3NzaWJsZSIgb25kcm9wPSJkcm9wKGV2ZW50LCAncG9zc2libGUnKSIgb25kcmFnb3Zlcj0iYWxsb3dEcm9wKGV2ZW50KSI+PC91bD4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9InRvZG8tYm94IHRvZG8tZGVsZWdhdGUiPgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0idG9kby1oZWFkZXIiPjxoMyBzdHlsZT0iY29sb3I6dmFyKC0td2FybmluZykiPkEgREVMRUdVRVI8L2gzPjwvZGl2PgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0idG9kby1pbnB1dC1ncm91cCI+PGlucHV0IHR5cGU9InRleHQiIGlkPSJ0b2RvLWlucHV0LWRlbGVnYXRlIiBwbGFjZWhvbGRlcj0iQWpvdXRlci4uLiIgb25rZXlwcmVzcz0iaGFuZGxlRW50ZXIoZXZlbnQsICdkZWxlZ2F0ZScpIj48YnV0dG9uIGNsYXNzPSJidG4gYnRuLWRhcmsgYnRuLXNtIiBzdHlsZT0iYmFja2dyb3VuZDp2YXIoLS13YXJuaW5nKTtib3JkZXI6bm9uZSIgb25jbGljaz0iYWRkVG9kbygnZGVsZWdhdGUnKSI+KzwvYnV0dG9uPjwvZGl2PgogICAgICAgICAgICAgICAgPHVsIGNsYXNzPSJ0b2RvLWxpc3QiIGlkPSJsaXN0LWRlbGVnYXRlIiBvbmRyb3A9ImRyb3AoZXZlbnQsICdkZWxlZ2F0ZScpIiBvbmRyYWdvdmVyPSJhbGxvd0Ryb3AoZXZlbnQpIj48L3VsPgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICA8L2Rpdj4KICAgIDwvZGl2PgoKICAgIDxkaXYgaWQ9Im1lbnUzIiBjbGFzcz0ic2VjdGlvbiBhY3RpdmUiPgogICAgICAgIDwhLS0gQ2FsZW5kcmllciBVbmlmacOpIFYxMi4xMyAtLT4KICAgICAgICA8ZGl2IGNsYXNzPSJ1Y2FsLWhlYWRlciI+CiAgICAgICAgICAgIDxidXR0b24gb25jbGljaz0idWNhbFByZXYoKSIgY2xhc3M9InVjYWwtbmF2LWJ0biI+PGkgY2xhc3M9ImZhcyBmYS1jaGV2cm9uLWxlZnQiPjwvaT48L2J1dHRvbj4KICAgICAgICAgICAgPGgzIGNsYXNzPSJ1Y2FsLXRpdGxlIiBpZD0idWNhbC10aXRsZSI+4oCUPC9oMz4KICAgICAgICAgICAgPGJ1dHRvbiBvbmNsaWNrPSJ1Y2FsTmV4dCgpIiBjbGFzcz0idWNhbC1uYXYtYnRuIj48aSBjbGFzcz0iZmFzIGZhLWNoZXZyb24tcmlnaHQiPjwvaT48L2J1dHRvbj4KICAgICAgICAgICAgPGJ1dHRvbiBvbmNsaWNrPSJ1Y2FsVG9kYXkoKSIgY2xhc3M9InVjYWwtYnRuLXRvZGF5Ij5BdWpvdXJkJ2h1aTwvYnV0dG9uPgogICAgICAgICAgICA8ZGl2IHN0eWxlPSJmbGV4OjEiPjwvZGl2PgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJ1Y2FsLWxlZ2VuZCIgaWQ9InVjYWwtbGVnZW5kIj48L2Rpdj4KICAgICAgICAgICAgPGJ1dHRvbiBvbmNsaWNrPSJvcGVuVWNhbEFkZE1vZGFsKCkiIGNsYXNzPSJ1Y2FsLWJ0bi1hZGQiPjxpIGNsYXNzPSJmYXMgZmEtcGx1cyI+PC9pPiBBam91dGVyPC9idXR0b24+CiAgICAgICAgICAgIDxidXR0b24gb25jbGljaz0idWNhbFJlZnJlc2goKSIgY2xhc3M9InVjYWwtYnRuLXJlZnJlc2giIHRpdGxlPSJTeW5jaHJvbmlzZXIgR29vZ2xlIEFnZW5kYSI+PGkgY2xhc3M9ImZhcyBmYS1zeW5jIj48L2k+PC9idXR0b24+CiAgICAgICAgPC9kaXY+CiAgICAgICAgPGRpdiBpZD0idWNhbC1ib2R5Ij48L2Rpdj4KCiAgICAgICAgPCEtLSBNb2RhbCBBam91dC9FZGl0IMOpdsOpbmVtZW50IC0tPgogICAgICAgIDxkaXYgaWQ9InVjYWxNb2RhbCIgY2xhc3M9Im0tb3YiIG9uY2xpY2s9ImlmKGV2ZW50LnRhcmdldD09PXRoaXMpY2xvc2VVY2FsTW9kYWwoKSIgc3R5bGU9ImRpc3BsYXk6bm9uZSI+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9Im0tYm94IiBzdHlsZT0id2lkdGg6NDgwcHg7Ij4KICAgICAgICAgICAgICAgIDxoMz48aSBjbGFzcz0iZmFzIGZhLWNhbGVuZGFyLXBsdXMiPjwvaT4gPHNwYW4gaWQ9InVjYWwtbW9kYWwtdGl0bGUiPk5vdXZlbCDDqXbDqW5lbWVudDwvc3Bhbj48L2gzPgogICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9ImhpZGRlbiIgaWQ9InVjYWwtZWlkIj4KICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJoaWRkZW4iIGlkPSJ1Y2FsLWVzcmMiPgogICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9ImhpZGRlbiIgaWQ9InVjYWwtZWNhbGlkIj4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9Im0tcm93Ij4KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWdyb3VwIj48bGFiZWw+RGF0ZSAqPC9sYWJlbD48aW5wdXQgdHlwZT0iZGF0ZSIgaWQ9InVjYWwtZGF0ZSIgY2xhc3M9ImZvcm0tY29udHJvbCI+PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1ncm91cCI+PGxhYmVsPkhldXJlIGTDqWJ1dDwvbGFiZWw+PGlucHV0IHR5cGU9InRpbWUiIGlkPSJ1Y2FsLXRpbWUiIGNsYXNzPSJmb3JtLWNvbnRyb2wiPjwvZGl2PgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAiPjxsYWJlbD5IZXVyZSBmaW48L2xhYmVsPjxpbnB1dCB0eXBlPSJ0aW1lIiBpZD0idWNhbC1lbmR0aW1lIiBjbGFzcz0iZm9ybS1jb250cm9sIj48L2Rpdj4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1ncm91cCIgc3R5bGU9Im1hcmdpbi1ib3R0b206MTBweCI+PGxhYmVsPkludGl0dWzDqSAqPC9sYWJlbD48aW5wdXQgdHlwZT0idGV4dCIgaWQ9InVjYWwtdGFzayIgY2xhc3M9ImZvcm0tY29udHJvbCIgcGxhY2Vob2xkZXI9IkV4OiBDb25zZWlsIGRlIGNsYXNzZSBUMyI+PC9kaXY+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWdyb3VwIiBzdHlsZT0ibWFyZ2luLWJvdHRvbToxNHB4IiBpZD0idWNhbC1kZXN0LXdyYXAiPgogICAgICAgICAgICAgICAgICAgIDxsYWJlbD5FbnJlZ2lzdHJlciBkYW5zPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJkaXNwbGF5OmZsZXg7Z2FwOjhweDtmbGV4LXdyYXA6d3JhcCIgaWQ9InVjYWwtZGVzdC1idG5zIj4KICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPSJ1Y2FsLWRlc3Qtb3B0IGFjdGl2ZSIgZGF0YS1kZXN0PSJsb2NhbCI+PGlucHV0IHR5cGU9InJhZGlvIiBuYW1lPSJ1Y2FsLWRlc3QiIHZhbHVlPSJsb2NhbCIgY2hlY2tlZD48aSBjbGFzcz0iZmFzIGZhLWRhdGFiYXNlIiBzdHlsZT0iY29sb3I6IzM0OThkYiI+PC9pPiBBZ2VuZGEgbG9jYWw8L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9InVjYWwtZGVzdC1vcHQiIGRhdGEtZGVzdD0iZ2NhbCI+PGlucHV0IHR5cGU9InJhZGlvIiBuYW1lPSJ1Y2FsLWRlc3QiIHZhbHVlPSJnY2FsIj48aSBjbGFzcz0iZmFiIGZhLWdvb2dsZSIgc3R5bGU9ImNvbG9yOiM0Mjg1ZjQiPjwvaT4gR29vZ2xlIEFnZW5kYTwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz0idWNhbC1kZXN0LW9wdCIgZGF0YS1kZXN0PSJvdXRsb29rIiBzdHlsZT0iZGlzcGxheTpub25lIj48aW5wdXQgdHlwZT0icmFkaW8iIG5hbWU9InVjYWwtZGVzdCIgdmFsdWU9Im91dGxvb2siPjxpIGNsYXNzPSJmYWIgZmEtbWljcm9zb2Z0IiBzdHlsZT0iY29sb3I6IzAwNzhkNCI+PC9pPiBPdXRsb29rPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8c2VsZWN0IGlkPSJ1Y2FsLWdjYWwtdGFyZ2V0IiBjbGFzcz0iZm9ybS1jb250cm9sIiBzdHlsZT0iZGlzcGxheTpub25lO21hcmdpbi10b3A6NnB4O2ZvbnQtc2l6ZTouNzhyZW07Ij4KICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iIj7igJQgQ2hvaXNpciB1biBhZ2VuZGEg4oCUPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgPC9zZWxlY3Q+CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InNhdmUtYmFyIj4KICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJidG4iIG9uY2xpY2s9ImNsb3NlVWNhbE1vZGFsKCkiIHN0eWxlPSJiYWNrZ3JvdW5kOiNlZWU7Y29sb3I6IzU1NTttYXJnaW4tcmlnaHQ6OHB4OyI+QW5udWxlcjwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImJ0biBidG4tYWNjZW50IiBvbmNsaWNrPSJzYXZlVWNhbEV2ZW50KCkiPjxpIGNsYXNzPSJmYXMgZmEtc2F2ZSI+PC9pPiBFbnJlZ2lzdHJlcjwvYnV0dG9uPgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgIDwvZGl2PgogICAgPC9kaXY+CgogICAgPGRpdiBpZD0ibWVudTQiIGNsYXNzPSJzZWN0aW9uIj4KICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWNhcmQiPgogICAgICAgICAgICA8ZGl2IHN0eWxlPSJkaXNwbGF5OmZsZXg7IGp1c3RpZnktY29udGVudDpzcGFjZS1iZXR3ZWVuOyBhbGlnbi1pdGVtczpjZW50ZXI7Ij4KICAgICAgICAgICAgICAgIDxoMyBzdHlsZT0iY29sb3I6dmFyKC0tcHJpbWFyeSkiPlLDqXVuaW9uIGRlIERpcmVjdGlvbjwvaDM+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJhY3Rpb24tcm93Ij4KICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJidG4gYnRuLXdhcm5pbmcgYnRuLXNtIiBvbmNsaWNrPSJyYXpQYWdlKCdESVInKSI+PGkgY2xhc3M9ImZhcyBmYS1lcmFzZXIiPjwvaT4gUkFaPC9idXR0b24+CiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYnRuIGJ0bi13b3JkIGJ0bi1zbSIgb25jbGljaz0iZXhwb3J0RG9jV29yZCgnUFJFUF9ESVInKSI+PGkgY2xhc3M9ImZhcyBmYS1maWxlLXdvcmQiPjwvaT4gV29yZDwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImJ0biBidG4tZGFyayBidG4tc20iIG9uY2xpY2s9InByaW50Q3VycmVudEZvcm0oJ1BSRVBfRElSJykiPjxpIGNsYXNzPSJmYXMgZmEtcHJpbnQiPjwvaT4gUERGPC9idXR0b24+CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZ3JpZCIgc3R5bGU9Im1hcmdpbi10b3A6MTVweDsiPjxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAiPjxsYWJlbD5EYXRlPC9sYWJlbD48aW5wdXQgdHlwZT0iZGF0ZSIgaWQ9ImRpci1kYXRlIiBjbGFzcz0iZm9ybS1jb250cm9sIj48L2Rpdj48ZGl2IGNsYXNzPSJmb3JtLWdyb3VwIj48bGFiZWw+UGFydGljaXBhbnRzPC9sYWJlbD48aW5wdXQgdHlwZT0idGV4dCIgaWQ9ImRpci1wYXJ0cyIgY2xhc3M9ImZvcm0tY29udHJvbCIgcGxhY2Vob2xkZXI9IkFkaiwgQ1BFLCBEREZQVC4uLiI+PC9kaXY+PC9kaXY+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZnVsbCI+PGxhYmVsIHN0eWxlPSJjb2xvcjp2YXIoLS1wcmltYXJ5KTsgZm9udC1zaXplOjFyZW07IGJvcmRlci1ib3R0b206MnB4IHNvbGlkICNlZWU7IHBhZGRpbmctYm90dG9tOjVweDsgbWFyZ2luLWJvdHRvbToxMHB4OyI+PGkgY2xhc3M9ImZhcyBmYS1saXN0LXVsIj48L2k+IFByw6lwYXJhdGlvbiA6IFRow6htZXMgJiBTdWpldHM8L2xhYmVsPjxkaXYgY2xhc3M9InJ0ZS13cmFwIj48ZGl2IGNsYXNzPSJydGUtYmFyIj4KPGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9ImRvY3VtZW50LmV4ZWNDb21tYW5kKCdib2xkJykiIHRpdGxlPSJHcmFzIj48Yj5HPC9iPjwvYnV0dG9uPgo8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0iZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2l0YWxpYycpIiB0aXRsZT0iSXRhbGlxdWUiPjxpPkk8L2k+PC9idXR0b24+CjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJkb2N1bWVudC5leGVjQ29tbWFuZCgndW5kZXJsaW5lJykiIHRpdGxlPSJTb3VsaWduw6kiPjx1PlM8L3U+PC9idXR0b24+CjxzcGFuIGNsYXNzPSJydGUtc2VwIj48L3NwYW4+CjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJkb2N1bWVudC5leGVjQ29tbWFuZCgnaW5zZXJ0VW5vcmRlcmVkTGlzdCcpIiB0aXRsZT0iTGlzdGUgw6AgcHVjZXMiPjxpIGNsYXNzPSJmYXMgZmEtbGlzdC11bCI+PC9pPjwvYnV0dG9uPgo8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0iZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2luc2VydE9yZGVyZWRMaXN0JykiIHRpdGxlPSJMaXN0ZSBudW3DqXJvdMOpZSI+PGkgY2xhc3M9ImZhcyBmYS1saXN0LW9sIj48L2k+PC9idXR0b24+CjxzcGFuIGNsYXNzPSJydGUtc2VwIj48L3NwYW4+CjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJydGVDb2xvcih0aGlzKSIgdGl0bGU9IkNvdWxldXIiPjxpIGNsYXNzPSJmYXMgZmEtcGFsZXR0ZSI+PC9pPjwvYnV0dG9uPgo8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0icnRlTGluayh0aGlzKSIgdGl0bGU9IkxpZW4iPjxpIGNsYXNzPSJmYXMgZmEtbGluayI+PC9pPjwvYnV0dG9uPgo8c3BhbiBjbGFzcz0icnRlLXNlcCI+PC9zcGFuPgo8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0iZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ3VuZG8nKSIgdGl0bGU9IkFubnVsZXIiPjxpIGNsYXNzPSJmYXMgZmEtdW5kbyI+PC9pPjwvYnV0dG9uPgo8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0iZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ3JlZG8nKSIgdGl0bGU9IlJlc3RhdXJlciI+PGkgY2xhc3M9ImZhcyBmYS1yZWRvIj48L2k+PC9idXR0b24+PHNwYW4gY2xhc3M9InJ0ZS1zZXAiPjwvc3Bhbj48YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0icnRlSW5zZXJ0TG9nbygpIiB0aXRsZT0iSW5zw6lyZXIgbGUgbG9nbyI+PGkgY2xhc3M9ImZhcyBmYS1zdGFtcCIgc3R5bGU9ImNvbG9yOiNlNjdlMjIiPjwvaT48L2J1dHRvbj4KPHNwYW4gY2xhc3M9InJ0ZS1zZXAiPjwvc3Bhbj48YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0iZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2p1c3RpZnlMZWZ0JykiIHRpdGxlPSJBbGlnbmVyIMOgIGdhdWNoZSI+PGkgY2xhc3M9ImZhcyBmYS1hbGlnbi1sZWZ0Ij48L2k+PC9idXR0b24+PGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9ImRvY3VtZW50LmV4ZWNDb21tYW5kKCdqdXN0aWZ5Q2VudGVyJykiIHRpdGxlPSJDZW50cmVyIj48aSBjbGFzcz0iZmFzIGZhLWFsaWduLWNlbnRlciI+PC9pPjwvYnV0dG9uPjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJkb2N1bWVudC5leGVjQ29tbWFuZCgnanVzdGlmeUZ1bGwnKSIgdGl0bGU9Ikp1c3RpZmllciI+PGkgY2xhc3M9ImZhcyBmYS1hbGlnbi1qdXN0aWZ5Ij48L2k+PC9idXR0b24+CjwvZGl2PjxkaXYgaWQ9ImRpci1jb250ZW51IiBjbGFzcz0iZG9jLWVkaXRvciIgY29udGVudGVkaXRhYmxlPSJ0cnVlIj48L2Rpdj48L2Rpdj48L2Rpdj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1mdWxsIiBzdHlsZT0ibWFyZ2luLXRvcDogMzBweDsiPjxsYWJlbCBzdHlsZT0iY29sb3I6dmFyKC0tYWNjZW50KTsgZm9udC1zaXplOjFyZW07IGJvcmRlci1ib3R0b206MnB4IHNvbGlkICNlZWU7IHBhZGRpbmctYm90dG9tOjVweDsgbWFyZ2luLWJvdHRvbToxMHB4OyI+PGkgY2xhc3M9ImZhcyBmYS1wZW4tYWx0Ij48L2k+IFPDqWFuY2UgOiBOb3RlcyAmIETDqWNpc2lvbnM8L2xhYmVsPjxkaXYgY2xhc3M9InJ0ZS13cmFwIj48ZGl2IGNsYXNzPSJydGUtYmFyIj4KPGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9ImRvY3VtZW50LmV4ZWNDb21tYW5kKCdib2xkJykiIHRpdGxlPSJHcmFzIj48Yj5HPC9iPjwvYnV0dG9uPgo8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0iZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2l0YWxpYycpIiB0aXRsZT0iSXRhbGlxdWUiPjxpPkk8L2k+PC9idXR0b24+CjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJkb2N1bWVudC5leGVjQ29tbWFuZCgndW5kZXJsaW5lJykiIHRpdGxlPSJTb3VsaWduw6kiPjx1PlM8L3U+PC9idXR0b24+CjxzcGFuIGNsYXNzPSJydGUtc2VwIj48L3NwYW4+CjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJkb2N1bWVudC5leGVjQ29tbWFuZCgnaW5zZXJ0VW5vcmRlcmVkTGlzdCcpIiB0aXRsZT0iTGlzdGUgw6AgcHVjZXMiPjxpIGNsYXNzPSJmYXMgZmEtbGlzdC11bCI+PC9pPjwvYnV0dG9uPgo8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0iZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2luc2VydE9yZGVyZWRMaXN0JykiIHRpdGxlPSJMaXN0ZSBudW3DqXJvdMOpZSI+PGkgY2xhc3M9ImZhcyBmYS1saXN0LW9sIj48L2k+PC9idXR0b24+CjxzcGFuIGNsYXNzPSJydGUtc2VwIj48L3NwYW4+CjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJydGVDb2xvcih0aGlzKSIgdGl0bGU9IkNvdWxldXIiPjxpIGNsYXNzPSJmYXMgZmEtcGFsZXR0ZSI+PC9pPjwvYnV0dG9uPgo8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0icnRlTGluayh0aGlzKSIgdGl0bGU9IkxpZW4iPjxpIGNsYXNzPSJmYXMgZmEtbGluayI+PC9pPjwvYnV0dG9uPgo8c3BhbiBjbGFzcz0icnRlLXNlcCI+PC9zcGFuPgo8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0iZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ3VuZG8nKSIgdGl0bGU9IkFubnVsZXIiPjxpIGNsYXNzPSJmYXMgZmEtdW5kbyI+PC9pPjwvYnV0dG9uPgo8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0iZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ3JlZG8nKSIgdGl0bGU9IlJlc3RhdXJlciI+PGkgY2xhc3M9ImZhcyBmYS1yZWRvIj48L2k+PC9idXR0b24+PHNwYW4gY2xhc3M9InJ0ZS1zZXAiPjwvc3Bhbj48YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0icnRlSW5zZXJ0TG9nbygpIiB0aXRsZT0iSW5zw6lyZXIgbGUgbG9nbyI+PGkgY2xhc3M9ImZhcyBmYS1zdGFtcCIgc3R5bGU9ImNvbG9yOiNlNjdlMjIiPjwvaT48L2J1dHRvbj4KPHNwYW4gY2xhc3M9InJ0ZS1zZXAiPjwvc3Bhbj48YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0iZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2p1c3RpZnlMZWZ0JykiIHRpdGxlPSJBbGlnbmVyIMOgIGdhdWNoZSI+PGkgY2xhc3M9ImZhcyBmYS1hbGlnbi1sZWZ0Ij48L2k+PC9idXR0b24+PGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9ImRvY3VtZW50LmV4ZWNDb21tYW5kKCdqdXN0aWZ5Q2VudGVyJykiIHRpdGxlPSJDZW50cmVyIj48aSBjbGFzcz0iZmFzIGZhLWFsaWduLWNlbnRlciI+PC9pPjwvYnV0dG9uPjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJkb2N1bWVudC5leGVjQ29tbWFuZCgnanVzdGlmeUZ1bGwnKSIgdGl0bGU9Ikp1c3RpZmllciI+PGkgY2xhc3M9ImZhcyBmYS1hbGlnbi1qdXN0aWZ5Ij48L2k+PC9idXR0b24+CjwvZGl2PjxkaXYgaWQ9ImRpci1ub3RlcyIgY2xhc3M9ImRvYy1lZGl0b3Igbm90ZXMtZWRpdG9yIiBjb250ZW50ZWRpdGFibGU9InRydWUiPjwvZGl2PjwvZGl2PjwvZGl2PgogICAgICAgICAgICAKICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1mdWxsIGF0dGFjaG1lbnRzLWFyZWEiPgogICAgICAgICAgICAgICAgPGxhYmVsPjxpIGNsYXNzPSJmYXMgZmEtcGFwZXJjbGlwIj48L2k+IFBpw6hjZXMgam9pbnRlcyAvIERvY3VtZW50cyBsacOpczwvbGFiZWw+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmaWxlLXdhcm5pbmciPkxpbWl0ZSBjb25zZWlsbMOpZSA6IGZpY2hpZXJzIGzDqWdlcnMgb3UgbGllbnMuIEdyb3MgZmljaGllcnMgPSByaXNxdWUgZGUgcmFsZW50aXNzZW1lbnQuPC9kaXY+CiAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0iZmlsZSIgaWQ9ImRpci1maWxlLWlucHV0IiBjbGFzcz0iZm9ybS1jb250cm9sIiBvbmNoYW5nZT0iYWRkQXR0YWNobWVudCgnZGlyLWF0dGFjaG1lbnRzJywgdGhpcykiPgogICAgICAgICAgICAgICAgPHVsIGlkPSJkaXItYXR0YWNobWVudHMiIGNsYXNzPSJhdHRhY2htZW50LWxpc3QiPjwvdWw+CiAgICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgICAgPGRpdiBjbGFzcz0ic2F2ZS1iYXIiPjxidXR0b24gaWQ9ImJ0bi1zYXZlLWRpciIgY2xhc3M9ImJ0biBidG4tcHJpbWFyeSIgb25jbGljaz0ic2F2ZVByZXBEaXJlY3Rpb24oKSI+PGkgY2xhc3M9ImZhcyBmYS1zYXZlIiBzdHlsZT0ibWFyZ2luLXJpZ2h0OjZweCI+PC9pPkVucmVnaXN0cmVyIChIaXN0b3JpcXVlKTwvYnV0dG9uPjwvZGl2PgogICAgICAgIDwvZGl2PgogICAgPC9kaXY+CgogICAgPGRpdiBpZD0ibWVudTUiIGNsYXNzPSJzZWN0aW9uIj4KICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWNhcmQiPgogICAgICAgICAgICA8ZGl2IHN0eWxlPSJkaXNwbGF5OmZsZXg7IGp1c3RpZnktY29udGVudDpzcGFjZS1iZXR3ZWVuOyBhbGlnbi1pdGVtczpjZW50ZXI7Ij4KICAgICAgICAgICAgICAgIDxoMyBzdHlsZT0iY29sb3I6dmFyKC0taW5mbykiPlN1aXZpIMOJbMOodmUgLyBQb2ludCBDUEU8L2gzPgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iYWN0aW9uLXJvdyI+CiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYnRuIGJ0bi13YXJuaW5nIGJ0bi1zbSIgb25jbGljaz0icmF6UGFnZSgnU1VJVkknKSI+PGkgY2xhc3M9ImZhcyBmYS1lcmFzZXIiPjwvaT4gUkFaPC9idXR0b24+CiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYnRuIGJ0bi13b3JkIGJ0bi1zbSIgb25jbGljaz0iZXhwb3J0RG9jV29yZCgnU1VJVkknKSI+PGkgY2xhc3M9ImZhcyBmYS1maWxlLXdvcmQiPjwvaT4gV29yZDwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImJ0biBidG4tZGFyayBidG4tc20iIG9uY2xpY2s9InByaW50Q3VycmVudEZvcm0oJ1NVSVZJJykiPjxpIGNsYXNzPSJmYXMgZmEtcHJpbnQiPjwvaT4gUERGPC9idXR0b24+CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZ3JpZCIgc3R5bGU9Im1hcmdpbi10b3A6MTVweDsiPjxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAiPjxsYWJlbD5EYXRlPC9sYWJlbD48aW5wdXQgdHlwZT0iZGF0ZSIgaWQ9InN1aXZpLWRhdGUiIGNsYXNzPSJmb3JtLWNvbnRyb2wiPjwvZGl2PjxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAiPjxsYWJlbD5QYXJ0aWNpcGFudHMgKENQRSwgUHJvZnMuLi4pPC9sYWJlbD48aW5wdXQgdHlwZT0idGV4dCIgaWQ9InN1aXZpLXBhcnRzIiBjbGFzcz0iZm9ybS1jb250cm9sIj48L2Rpdj48ZGl2IGNsYXNzPSJmb3JtLWdyb3VwIj48bGFiZWw+Q2xhc3NlcyBDb25jZXJuw6llczwvbGFiZWw+PGlucHV0IHR5cGU9InRleHQiIGlkPSJzdWl2aS1jbGFzc2VzIiBjbGFzcz0iZm9ybS1jb250cm9sIj48L2Rpdj48L2Rpdj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1mdWxsIj48bGFiZWw+U2l0dWF0aW9ucyDDqWzDqHZlcyBhYm9yZMOpZXMgKE5vdGVzKTwvbGFiZWw+PGRpdiBjbGFzcz0icnRlLXdyYXAiPjxkaXYgY2xhc3M9InJ0ZS1iYXIiPgo8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0iZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2JvbGQnKSIgdGl0bGU9IkdyYXMiPjxiPkc8L2I+PC9idXR0b24+CjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJkb2N1bWVudC5leGVjQ29tbWFuZCgnaXRhbGljJykiIHRpdGxlPSJJdGFsaXF1ZSI+PGk+STwvaT48L2J1dHRvbj4KPGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9ImRvY3VtZW50LmV4ZWNDb21tYW5kKCd1bmRlcmxpbmUnKSIgdGl0bGU9IlNvdWxpZ27DqSI+PHU+UzwvdT48L2J1dHRvbj4KPHNwYW4gY2xhc3M9InJ0ZS1zZXAiPjwvc3Bhbj4KPGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9ImRvY3VtZW50LmV4ZWNDb21tYW5kKCdpbnNlcnRVbm9yZGVyZWRMaXN0JykiIHRpdGxlPSJMaXN0ZSDDoCBwdWNlcyI+PGkgY2xhc3M9ImZhcyBmYS1saXN0LXVsIj48L2k+PC9idXR0b24+CjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJkb2N1bWVudC5leGVjQ29tbWFuZCgnaW5zZXJ0T3JkZXJlZExpc3QnKSIgdGl0bGU9Ikxpc3RlIG51bcOpcm90w6llIj48aSBjbGFzcz0iZmFzIGZhLWxpc3Qtb2wiPjwvaT48L2J1dHRvbj4KPHNwYW4gY2xhc3M9InJ0ZS1zZXAiPjwvc3Bhbj4KPGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9InJ0ZUNvbG9yKHRoaXMpIiB0aXRsZT0iQ291bGV1ciI+PGkgY2xhc3M9ImZhcyBmYS1wYWxldHRlIj48L2k+PC9idXR0b24+CjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJydGVMaW5rKHRoaXMpIiB0aXRsZT0iTGllbiI+PGkgY2xhc3M9ImZhcyBmYS1saW5rIj48L2k+PC9idXR0b24+CjxzcGFuIGNsYXNzPSJydGUtc2VwIj48L3NwYW4+CjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJkb2N1bWVudC5leGVjQ29tbWFuZCgndW5kbycpIiB0aXRsZT0iQW5udWxlciI+PGkgY2xhc3M9ImZhcyBmYS11bmRvIj48L2k+PC9idXR0b24+CjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJkb2N1bWVudC5leGVjQ29tbWFuZCgncmVkbycpIiB0aXRsZT0iUmVzdGF1cmVyIj48aSBjbGFzcz0iZmFzIGZhLXJlZG8iPjwvaT48L2J1dHRvbj48c3BhbiBjbGFzcz0icnRlLXNlcCI+PC9zcGFuPjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJydGVJbnNlcnRMb2dvKCkiIHRpdGxlPSJJbnPDqXJlciBsZSBsb2dvIj48aSBjbGFzcz0iZmFzIGZhLXN0YW1wIiBzdHlsZT0iY29sb3I6I2U2N2UyMiI+PC9pPjwvYnV0dG9uPgo8c3BhbiBjbGFzcz0icnRlLXNlcCI+PC9zcGFuPjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJkb2N1bWVudC5leGVjQ29tbWFuZCgnanVzdGlmeUxlZnQnKSIgdGl0bGU9IkFsaWduZXIgw6AgZ2F1Y2hlIj48aSBjbGFzcz0iZmFzIGZhLWFsaWduLWxlZnQiPjwvaT48L2J1dHRvbj48YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0iZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2p1c3RpZnlDZW50ZXInKSIgdGl0bGU9IkNlbnRyZXIiPjxpIGNsYXNzPSJmYXMgZmEtYWxpZ24tY2VudGVyIj48L2k+PC9idXR0b24+PGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9ImRvY3VtZW50LmV4ZWNDb21tYW5kKCdqdXN0aWZ5RnVsbCcpIiB0aXRsZT0iSnVzdGlmaWVyIj48aSBjbGFzcz0iZmFzIGZhLWFsaWduLWp1c3RpZnkiPjwvaT48L2J1dHRvbj4KPC9kaXY+PGRpdiBpZD0ic3VpdmktY29udGVudSIgY2xhc3M9ImRvYy1lZGl0b3IiIGNvbnRlbnRlZGl0YWJsZT0idHJ1ZSI+PC9kaXY+PC9kaXY+PC9kaXY+CiAgICAgICAgICAgIAogICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWZ1bGwgYXR0YWNobWVudHMtYXJlYSI+CiAgICAgICAgICAgICAgICA8bGFiZWw+PGkgY2xhc3M9ImZhcyBmYS1wYXBlcmNsaXAiPjwvaT4gUGnDqGNlcyBqb2ludGVzPC9sYWJlbD4KICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJmaWxlIiBpZD0ic3VpdmktZmlsZS1pbnB1dCIgY2xhc3M9ImZvcm0tY29udHJvbCIgb25jaGFuZ2U9ImFkZEF0dGFjaG1lbnQoJ3N1aXZpLWF0dGFjaG1lbnRzJywgdGhpcykiPgogICAgICAgICAgICAgICAgPHVsIGlkPSJzdWl2aS1hdHRhY2htZW50cyIgY2xhc3M9ImF0dGFjaG1lbnQtbGlzdCI+PC91bD4KICAgICAgICAgICAgPC9kaXY+CgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJzYXZlLWJhciI+PGJ1dHRvbiBpZD0iYnRuLXNhdmUtc3VpdmkiIGNsYXNzPSJidG4gYnRuLWluZm8iIG9uY2xpY2s9InNhdmVTdWl2aUVsZXZlKCkiPjxpIGNsYXNzPSJmYXMgZmEtc2F2ZSIgc3R5bGU9Im1hcmdpbi1yaWdodDo2cHgiPjwvaT5FbnJlZ2lzdHJlciAoSGlzdG9yaXF1ZSk8L2J1dHRvbj48L2Rpdj4KICAgICAgICA8L2Rpdj4KICAgIDwvZGl2PgoKICAgIDxkaXYgaWQ9Im1lbnU2IiBjbGFzcz0ic2VjdGlvbiI+CiAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1jYXJkIj4KICAgICAgICAgICAgPGRpdiBzdHlsZT0iZGlzcGxheTpmbGV4OyBqdXN0aWZ5LWNvbnRlbnQ6c3BhY2UtYmV0d2VlbjsgYWxpZ24taXRlbXM6Y2VudGVyOyI+CiAgICAgICAgICAgICAgICA8aDMgc3R5bGU9ImNvbG9yOnZhcigtLWFjY2VudCkiPlNhaXNpciB1biBFbnRyZXRpZW48L2gzPgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iYWN0aW9uLXJvdyI+CiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYnRuIGJ0bi13YXJuaW5nIGJ0bi1zbSIgb25jbGljaz0icmF6UGFnZSgnRU5UJykiPjxpIGNsYXNzPSJmYXMgZmEtZXJhc2VyIj48L2k+IFJBWjwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImJ0biBidG4td29yZCBidG4tc20iIG9uY2xpY2s9ImV4cG9ydERvY1dvcmQoJ0VOVCcpIj48aSBjbGFzcz0iZmFzIGZhLWZpbGUtd29yZCI+PC9pPiBXb3JkPC9idXR0b24+CiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYnRuIGJ0bi1kYXJrIGJ0bi1zbSIgb25jbGljaz0icHJpbnRDdXJyZW50Rm9ybSgnRU5UJykiPjxpIGNsYXNzPSJmYXMgZmEtcHJpbnQiPjwvaT4gUERGPC9idXR0b24+CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZ3JpZCIgc3R5bGU9Im1hcmdpbi10b3A6MTVweDsiPgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1ncm91cCI+PGxhYmVsPkRhdGU8L2xhYmVsPjxpbnB1dCB0eXBlPSJkYXRlIiBpZD0iZW50LWRhdGUiIGNsYXNzPSJmb3JtLWNvbnRyb2wiPjwvZGl2PgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1ncm91cCI+CiAgICAgICAgICAgICAgICAgICAgPGxhYmVsPlR5cGU8L2xhYmVsPgogICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9ImRpc3BsYXk6ZmxleDsgZ2FwOjVweDsiPgogICAgICAgICAgICAgICAgICAgICAgICA8c2VsZWN0IGlkPSJlbnQtdHlwZSIgY2xhc3M9ImZvcm0tY29udHJvbCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uPkVudHJldGllbiBSSCAvIFBlcnNvbm5lbDwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbj5SZW5kZXotdm91cyBGYW1pbGxlPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uPlN1aXZpIMOJbMOodmU8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24+UGFydGVuYWlyZXM8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24+SW5zcGVjdGlvbjwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbj5BdXRyZTwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgICAgICA8L3NlbGVjdD4KICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYnRuIGJ0bi1wcmltYXJ5IGJ0bi1pY29uIiBvbmNsaWNrPSJhZGRDdXN0b21UeXBlKCdlbnQtdHlwZScpIj48aSBjbGFzcz0iZmFzIGZhLXBsdXMiPjwvaT48L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPGRpdiBzdHlsZT0iZGlzcGxheTpmbGV4O2dhcDoxNXB4O2ZsZXgtd3JhcDp3cmFwOyI+CiAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJmbGV4OjE7bWluLXdpZHRoOjI1MHB4O2JhY2tncm91bmQ6I2Y5ZjlmOTtwYWRkaW5nOjE1cHg7Ym9yZGVyLXJhZGl1czo1cHg7Ym9yZGVyLWxlZnQ6M3B4IHNvbGlkICNlNjdlMjI7Ij4KICAgICAgICAgICAgICAgICAgICA8bGFiZWw+PGkgY2xhc3M9ImZhcyBmYS11c2VyLWdyYWR1YXRlIiBzdHlsZT0iY29sb3I6I2U2N2UyMjttYXJnaW4tcmlnaHQ6NHB4Ij48L2k+IMOJbMOodmVzIGNvbmNlcm7DqXM8L2xhYmVsPgogICAgICAgICAgICAgICAgICAgIDxkaXYgaWQ9ImVudC1zdHVkZW50cy1jb250YWluZXIiPjxkaXYgY2xhc3M9Im11bHRpLXJvdyBlbnQtc3R1ZGVudCI+PGlucHV0IHR5cGU9InRleHQiIGNsYXNzPSJmb3JtLWNvbnRyb2wgbmFtZSIgcGxhY2Vob2xkZXI9Ik5vbSBQcsOpbm9tIj48YnV0dG9uIGNsYXNzPSJidG4gYnRuLWRhbmdlciBidG4taWNvbiIgb25jbGljaz0idGhpcy5wYXJlbnRFbGVtZW50LnJlbW92ZSgpIj48aSBjbGFzcz0iZmFzIGZhLXRpbWVzIj48L2k+PC9idXR0b24+PC9kaXY+PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYnRuIGJ0bi1zbSBidG4tc3VjY2VzcyIgb25jbGljaz0iYWRkTXVsdGlSb3coJ2VudC1zdHVkZW50cy1jb250YWluZXInLCAnZW50LXN0dWRlbnQnLCAnTm9tIMOJbMOodmUnKSI+KyDDiWzDqHZlPC9idXR0b24+CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9ImZsZXg6MTttaW4td2lkdGg6MjUwcHg7YmFja2dyb3VuZDojZjlmOWY5O3BhZGRpbmc6MTVweDtib3JkZXItcmFkaXVzOjVweDtib3JkZXItbGVmdDozcHggc29saWQgIzI5ODBiOTsiPgogICAgICAgICAgICAgICAgICAgIDxsYWJlbD48aSBjbGFzcz0iZmFzIGZhLWNoYWxrYm9hcmQtdGVhY2hlciIgc3R5bGU9ImNvbG9yOiMyOTgwYjk7bWFyZ2luLXJpZ2h0OjRweCI+PC9pPiBFbnNlaWduYW50cyAvIFBlcnNvbm5lbHM8L2xhYmVsPgogICAgICAgICAgICAgICAgICAgIDxkaXYgaWQ9ImVudC10ZWFjaGVycy1jb250YWluZXIiPjxkaXYgY2xhc3M9Im11bHRpLXJvdyBlbnQtdGVhY2hlciI+PGlucHV0IHR5cGU9InRleHQiIGNsYXNzPSJmb3JtLWNvbnRyb2wgbmFtZSIgcGxhY2Vob2xkZXI9Ik5vbSBQcsOpbm9tIj48YnV0dG9uIGNsYXNzPSJidG4gYnRuLWRhbmdlciBidG4taWNvbiIgb25jbGljaz0idGhpcy5wYXJlbnRFbGVtZW50LnJlbW92ZSgpIj48aSBjbGFzcz0iZmFzIGZhLXRpbWVzIj48L2k+PC9idXR0b24+PC9kaXY+PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYnRuIGJ0bi1zbSBidG4tc3VjY2VzcyIgb25jbGljaz0iYWRkTXVsdGlSb3coJ2VudC10ZWFjaGVycy1jb250YWluZXInLCAnZW50LXRlYWNoZXInLCAnTm9tIFBlcnNvbm5lbCcpIj4rIFBlcnNvbm5lbDwvYnV0dG9uPgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWZ1bGwiPjxsYWJlbD5PYmpldDwvbGFiZWw+PGlucHV0IHR5cGU9InRleHQiIGlkPSJlbnQtb2JqZXQiIGNsYXNzPSJmb3JtLWNvbnRyb2wiPjwvZGl2PgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWZ1bGwiPjxsYWJlbD5Db21wdGUgUmVuZHU8L2xhYmVsPjxkaXYgY2xhc3M9InJ0ZS13cmFwIj48ZGl2IGNsYXNzPSJydGUtYmFyIj4KPGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9ImRvY3VtZW50LmV4ZWNDb21tYW5kKCdib2xkJykiIHRpdGxlPSJHcmFzIj48Yj5HPC9iPjwvYnV0dG9uPgo8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0iZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2l0YWxpYycpIiB0aXRsZT0iSXRhbGlxdWUiPjxpPkk8L2k+PC9idXR0b24+CjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJkb2N1bWVudC5leGVjQ29tbWFuZCgndW5kZXJsaW5lJykiIHRpdGxlPSJTb3VsaWduw6kiPjx1PlM8L3U+PC9idXR0b24+CjxzcGFuIGNsYXNzPSJydGUtc2VwIj48L3NwYW4+CjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJkb2N1bWVudC5leGVjQ29tbWFuZCgnaW5zZXJ0VW5vcmRlcmVkTGlzdCcpIiB0aXRsZT0iTGlzdGUgw6AgcHVjZXMiPjxpIGNsYXNzPSJmYXMgZmEtbGlzdC11bCI+PC9pPjwvYnV0dG9uPgo8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0iZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2luc2VydE9yZGVyZWRMaXN0JykiIHRpdGxlPSJMaXN0ZSBudW3DqXJvdMOpZSI+PGkgY2xhc3M9ImZhcyBmYS1saXN0LW9sIj48L2k+PC9idXR0b24+CjxzcGFuIGNsYXNzPSJydGUtc2VwIj48L3NwYW4+CjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJydGVDb2xvcih0aGlzKSIgdGl0bGU9IkNvdWxldXIiPjxpIGNsYXNzPSJmYXMgZmEtcGFsZXR0ZSI+PC9pPjwvYnV0dG9uPgo8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0icnRlTGluayh0aGlzKSIgdGl0bGU9IkxpZW4iPjxpIGNsYXNzPSJmYXMgZmEtbGluayI+PC9pPjwvYnV0dG9uPgo8c3BhbiBjbGFzcz0icnRlLXNlcCI+PC9zcGFuPgo8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0iZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ3VuZG8nKSIgdGl0bGU9IkFubnVsZXIiPjxpIGNsYXNzPSJmYXMgZmEtdW5kbyI+PC9pPjwvYnV0dG9uPgo8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0iZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ3JlZG8nKSIgdGl0bGU9IlJlc3RhdXJlciI+PGkgY2xhc3M9ImZhcyBmYS1yZWRvIj48L2k+PC9idXR0b24+PHNwYW4gY2xhc3M9InJ0ZS1zZXAiPjwvc3Bhbj48YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0icnRlSW5zZXJ0TG9nbygpIiB0aXRsZT0iSW5zw6lyZXIgbGUgbG9nbyI+PGkgY2xhc3M9ImZhcyBmYS1zdGFtcCIgc3R5bGU9ImNvbG9yOiNlNjdlMjIiPjwvaT48L2J1dHRvbj4KPHNwYW4gY2xhc3M9InJ0ZS1zZXAiPjwvc3Bhbj48YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0iZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2p1c3RpZnlMZWZ0JykiIHRpdGxlPSJBbGlnbmVyIMOgIGdhdWNoZSI+PGkgY2xhc3M9ImZhcyBmYS1hbGlnbi1sZWZ0Ij48L2k+PC9idXR0b24+PGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9ImRvY3VtZW50LmV4ZWNDb21tYW5kKCdqdXN0aWZ5Q2VudGVyJykiIHRpdGxlPSJDZW50cmVyIj48aSBjbGFzcz0iZmFzIGZhLWFsaWduLWNlbnRlciI+PC9pPjwvYnV0dG9uPjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJkb2N1bWVudC5leGVjQ29tbWFuZCgnanVzdGlmeUZ1bGwnKSIgdGl0bGU9Ikp1c3RpZmllciI+PGkgY2xhc3M9ImZhcyBmYS1hbGlnbi1qdXN0aWZ5Ij48L2k+PC9idXR0b24+CjwvZGl2PjxkaXYgaWQ9ImVudC1jb250ZW51IiBjbGFzcz0iZG9jLWVkaXRvciIgY29udGVudGVkaXRhYmxlPSJ0cnVlIj48L2Rpdj48L2Rpdj48L2Rpdj4KICAgICAgICAgICAgCiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZnVsbCBhdHRhY2htZW50cy1hcmVhIj4KICAgICAgICAgICAgICAgIDxsYWJlbD48aSBjbGFzcz0iZmFzIGZhLXBhcGVyY2xpcCI+PC9pPiBQacOoY2VzIGpvaW50ZXM8L2xhYmVsPgogICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9ImZpbGUiIGlkPSJlbnQtZmlsZS1pbnB1dCIgY2xhc3M9ImZvcm0tY29udHJvbCIgb25jaGFuZ2U9ImFkZEF0dGFjaG1lbnQoJ2VudC1hdHRhY2htZW50cycsIHRoaXMpIj4KICAgICAgICAgICAgICAgIDx1bCBpZD0iZW50LWF0dGFjaG1lbnRzIiBjbGFzcz0iYXR0YWNobWVudC1saXN0Ij48L3VsPgogICAgICAgICAgICA8L2Rpdj4KCiAgICAgICAgICAgIDxkaXYgY2xhc3M9InNhdmUtYmFyIj48YnV0dG9uIGlkPSJidG4tc2F2ZS1lbnQiIGNsYXNzPSJidG4gYnRuLXByaW1hcnkiIG9uY2xpY2s9InNhdmVFbnRyZXRpZW4oKSI+PGkgY2xhc3M9ImZhcyBmYS1zYXZlIiBzdHlsZT0ibWFyZ2luLXJpZ2h0OjZweCI+PC9pPkVucmVnaXN0cmVyPC9idXR0b24+PC9kaXY+CiAgICAgICAgPC9kaXY+CiAgICA8L2Rpdj4KCiAgICA8ZGl2IGlkPSJtZW51NyIgY2xhc3M9InNlY3Rpb24iPgogICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tY2FyZCI+CiAgICAgICAgICAgIDxkaXYgc3R5bGU9ImRpc3BsYXk6ZmxleDsganVzdGlmeS1jb250ZW50OnNwYWNlLWJldHdlZW47IGFsaWduLWl0ZW1zOmNlbnRlcjsiPgogICAgICAgICAgICAgICAgPGgzIHN0eWxlPSJjb2xvcjp2YXIoLS1zdWNjZXNzKSI+U2Fpc2lyIHVuZSBSw6l1bmlvbjwvaDM+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJhY3Rpb24tcm93Ij4KICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJidG4gYnRuLXdhcm5pbmcgYnRuLXNtIiBvbmNsaWNrPSJyYXpQYWdlKCdSRVUnKSI+PGkgY2xhc3M9ImZhcyBmYS1lcmFzZXIiPjwvaT4gUkFaPC9idXR0b24+CiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYnRuIGJ0bi13b3JkIGJ0bi1zbSIgb25jbGljaz0iZXhwb3J0RG9jV29yZCgnUkVVJykiPjxpIGNsYXNzPSJmYXMgZmEtZmlsZS13b3JkIj48L2k+IFdvcmQ8L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJidG4gYnRuLWRhcmsgYnRuLXNtIiBvbmNsaWNrPSJwcmludEN1cnJlbnRGb3JtKCdSRVUnKSI+PGkgY2xhc3M9ImZhcyBmYS1wcmludCI+PC9pPiBQREY8L2J1dHRvbj4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1ncmlkIiBzdHlsZT0ibWFyZ2luLXRvcDoxNXB4OyI+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWdyb3VwIj48bGFiZWw+RGF0ZTwvbGFiZWw+PGlucHV0IHR5cGU9ImRhdGUiIGlkPSJyZXUtZGF0ZSIgY2xhc3M9ImZvcm0tY29udHJvbCI+PC9kaXY+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWdyb3VwIj4KICAgICAgICAgICAgICAgICAgICA8bGFiZWw+VHlwZSBkZSByw6l1bmlvbjwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iZGlzcGxheTpmbGV4OyBnYXA6NXB4OyI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxzZWxlY3QgaWQ9InJldS10eXBlIiBjbGFzcz0iZm9ybS1jb250cm9sIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24+Q29uc2VpbCBkJ0FkbWluaXN0cmF0aW9uPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uPkNvbnNlaWwgUMOpZGFnb2dpcXVlPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uPkNvbWl0w6kgZGUgUGlsb3RhZ2UgKENPUElMKTwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbj5Db21taXNzaW9uIMOJZHVjYXRpdmU8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24+w4lxdWlwZSDDqWR1Y2F0aXZlPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uPkVTUzwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbj5HUERTPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uPkNlbGx1bGUgZGUgdmVpbGxlPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uPkZvbmQgc29jaWFsPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uPkF1dHJlPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvc2VsZWN0PgogICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJidG4gYnRuLXN1Y2Nlc3MgYnRuLWljb24iIG9uY2xpY2s9ImFkZEN1c3RvbVR5cGUoJ3JldS10eXBlJykiPjxpIGNsYXNzPSJmYXMgZmEtcGx1cyI+PC9pPjwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8ZGl2IHN0eWxlPSJkaXNwbGF5OmZsZXg7Z2FwOjE1cHg7ZmxleC13cmFwOndyYXA7Ij4KICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9ImZsZXg6MTttaW4td2lkdGg6MjUwcHg7YmFja2dyb3VuZDojZjlmOWY5O3BhZGRpbmc6MTVweDtib3JkZXItcmFkaXVzOjVweDtib3JkZXItbGVmdDozcHggc29saWQgI2U2N2UyMjsiPgogICAgICAgICAgICAgICAgICAgIDxsYWJlbD48aSBjbGFzcz0iZmFzIGZhLXVzZXItZ3JhZHVhdGUiIHN0eWxlPSJjb2xvcjojZTY3ZTIyO21hcmdpbi1yaWdodDo0cHgiPjwvaT4gw4lsw6h2ZXMgY29uY2VybsOpczwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBpZD0icmV1LXN0dWRlbnRzLWNvbnRhaW5lciI+PGRpdiBjbGFzcz0ibXVsdGktcm93IHJldS1zdHVkZW50Ij48aW5wdXQgdHlwZT0idGV4dCIgY2xhc3M9ImZvcm0tY29udHJvbCBuYW1lIiBwbGFjZWhvbGRlcj0iTm9tIFByw6lub20iPjxidXR0b24gY2xhc3M9ImJ0biBidG4tZGFuZ2VyIGJ0bi1pY29uIiBvbmNsaWNrPSJ0aGlzLnBhcmVudEVsZW1lbnQucmVtb3ZlKCkiPjxpIGNsYXNzPSJmYXMgZmEtdGltZXMiPjwvaT48L2J1dHRvbj48L2Rpdj48L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJidG4gYnRuLXNtIGJ0bi1zdWNjZXNzIiBvbmNsaWNrPSJhZGRNdWx0aVJvdygncmV1LXN0dWRlbnRzLWNvbnRhaW5lcicsICdyZXUtc3R1ZGVudCcsICdOb20gw4lsw6h2ZScpIj4rIMOJbMOodmU8L2J1dHRvbj4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iZmxleDoxO21pbi13aWR0aDoyNTBweDtiYWNrZ3JvdW5kOiNmOWY5Zjk7cGFkZGluZzoxNXB4O2JvcmRlci1yYWRpdXM6NXB4O2JvcmRlci1sZWZ0OjNweCBzb2xpZCAjMjk4MGI5OyI+CiAgICAgICAgICAgICAgICAgICAgPGxhYmVsPjxpIGNsYXNzPSJmYXMgZmEtY2hhbGtib2FyZC10ZWFjaGVyIiBzdHlsZT0iY29sb3I6IzI5ODBiOTttYXJnaW4tcmlnaHQ6NHB4Ij48L2k+IFBhcnRpY2lwYW50cyAvIFBlcnNvbm5lbHM8L2xhYmVsPgogICAgICAgICAgICAgICAgICAgIDxkaXYgaWQ9InJldS10ZWFjaGVycy1jb250YWluZXIiPjxkaXYgY2xhc3M9Im11bHRpLXJvdyByZXUtdGVhY2hlciI+PGlucHV0IHR5cGU9InRleHQiIGNsYXNzPSJmb3JtLWNvbnRyb2wgbmFtZSIgcGxhY2Vob2xkZXI9Ik5vbSBQcsOpbm9tIj48YnV0dG9uIGNsYXNzPSJidG4gYnRuLWRhbmdlciBidG4taWNvbiIgb25jbGljaz0idGhpcy5wYXJlbnRFbGVtZW50LnJlbW92ZSgpIj48aSBjbGFzcz0iZmFzIGZhLXRpbWVzIj48L2k+PC9idXR0b24+PC9kaXY+PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYnRuIGJ0bi1zbSBidG4tc3VjY2VzcyIgb25jbGljaz0iYWRkTXVsdGlSb3coJ3JldS10ZWFjaGVycy1jb250YWluZXInLCAncmV1LXRlYWNoZXInLCAnTm9tIFBlcnNvbm5lbCcpIj4rIFBlcnNvbm5lbDwvYnV0dG9uPgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWZ1bGwiPjxsYWJlbD5PcmRyZSBkdSBqb3VyPC9sYWJlbD48aW5wdXQgdHlwZT0idGV4dCIgaWQ9InJldS1vZGoiIGNsYXNzPSJmb3JtLWNvbnRyb2wiPjwvZGl2PgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWZ1bGwiPjxsYWJlbD5Db21wdGUtcmVuZHU8L2xhYmVsPjxkaXYgY2xhc3M9InJ0ZS13cmFwIj48ZGl2IGNsYXNzPSJydGUtYmFyIj4KPGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9ImRvY3VtZW50LmV4ZWNDb21tYW5kKCdib2xkJykiIHRpdGxlPSJHcmFzIj48Yj5HPC9iPjwvYnV0dG9uPgo8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0iZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2l0YWxpYycpIiB0aXRsZT0iSXRhbGlxdWUiPjxpPkk8L2k+PC9idXR0b24+CjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJkb2N1bWVudC5leGVjQ29tbWFuZCgndW5kZXJsaW5lJykiIHRpdGxlPSJTb3VsaWduw6kiPjx1PlM8L3U+PC9idXR0b24+CjxzcGFuIGNsYXNzPSJydGUtc2VwIj48L3NwYW4+CjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJkb2N1bWVudC5leGVjQ29tbWFuZCgnaW5zZXJ0VW5vcmRlcmVkTGlzdCcpIiB0aXRsZT0iTGlzdGUgw6AgcHVjZXMiPjxpIGNsYXNzPSJmYXMgZmEtbGlzdC11bCI+PC9pPjwvYnV0dG9uPgo8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0iZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2luc2VydE9yZGVyZWRMaXN0JykiIHRpdGxlPSJMaXN0ZSBudW3DqXJvdMOpZSI+PGkgY2xhc3M9ImZhcyBmYS1saXN0LW9sIj48L2k+PC9idXR0b24+CjxzcGFuIGNsYXNzPSJydGUtc2VwIj48L3NwYW4+CjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJydGVDb2xvcih0aGlzKSIgdGl0bGU9IkNvdWxldXIiPjxpIGNsYXNzPSJmYXMgZmEtcGFsZXR0ZSI+PC9pPjwvYnV0dG9uPgo8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0icnRlTGluayh0aGlzKSIgdGl0bGU9IkxpZW4iPjxpIGNsYXNzPSJmYXMgZmEtbGluayI+PC9pPjwvYnV0dG9uPgo8c3BhbiBjbGFzcz0icnRlLXNlcCI+PC9zcGFuPgo8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0iZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ3VuZG8nKSIgdGl0bGU9IkFubnVsZXIiPjxpIGNsYXNzPSJmYXMgZmEtdW5kbyI+PC9pPjwvYnV0dG9uPgo8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0iZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ3JlZG8nKSIgdGl0bGU9IlJlc3RhdXJlciI+PGkgY2xhc3M9ImZhcyBmYS1yZWRvIj48L2k+PC9idXR0b24+PHNwYW4gY2xhc3M9InJ0ZS1zZXAiPjwvc3Bhbj48YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0icnRlSW5zZXJ0TG9nbygpIiB0aXRsZT0iSW5zw6lyZXIgbGUgbG9nbyI+PGkgY2xhc3M9ImZhcyBmYS1zdGFtcCIgc3R5bGU9ImNvbG9yOiNlNjdlMjIiPjwvaT48L2J1dHRvbj4KPHNwYW4gY2xhc3M9InJ0ZS1zZXAiPjwvc3Bhbj48YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0iZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2p1c3RpZnlMZWZ0JykiIHRpdGxlPSJBbGlnbmVyIMOgIGdhdWNoZSI+PGkgY2xhc3M9ImZhcyBmYS1hbGlnbi1sZWZ0Ij48L2k+PC9idXR0b24+PGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9ImRvY3VtZW50LmV4ZWNDb21tYW5kKCdqdXN0aWZ5Q2VudGVyJykiIHRpdGxlPSJDZW50cmVyIj48aSBjbGFzcz0iZmFzIGZhLWFsaWduLWNlbnRlciI+PC9pPjwvYnV0dG9uPjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJkb2N1bWVudC5leGVjQ29tbWFuZCgnanVzdGlmeUZ1bGwnKSIgdGl0bGU9Ikp1c3RpZmllciI+PGkgY2xhc3M9ImZhcyBmYS1hbGlnbi1qdXN0aWZ5Ij48L2k+PC9idXR0b24+CjwvZGl2PjxkaXYgaWQ9InJldS1jb250ZW51IiBjbGFzcz0iZG9jLWVkaXRvciIgY29udGVudGVkaXRhYmxlPSJ0cnVlIj48L2Rpdj48L2Rpdj48L2Rpdj4KICAgICAgICAgICAgCiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZnVsbCBhdHRhY2htZW50cy1hcmVhIj4KICAgICAgICAgICAgICAgIDxsYWJlbD48aSBjbGFzcz0iZmFzIGZhLXBhcGVyY2xpcCI+PC9pPiBQacOoY2VzIGpvaW50ZXM8L2xhYmVsPgogICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9ImZpbGUiIGlkPSJyZXUtZmlsZS1pbnB1dCIgY2xhc3M9ImZvcm0tY29udHJvbCIgb25jaGFuZ2U9ImFkZEF0dGFjaG1lbnQoJ3JldS1hdHRhY2htZW50cycsIHRoaXMpIj4KICAgICAgICAgICAgICAgIDx1bCBpZD0icmV1LWF0dGFjaG1lbnRzIiBjbGFzcz0iYXR0YWNobWVudC1saXN0Ij48L3VsPgogICAgICAgICAgICA8L2Rpdj4KCiAgICAgICAgICAgIDxkaXYgY2xhc3M9InNhdmUtYmFyIj48YnV0dG9uIGlkPSJidG4tc2F2ZS1yZXUiIGNsYXNzPSJidG4gYnRuLXN1Y2Nlc3MiIG9uY2xpY2s9InNhdmVSZXVuaW9uKCkiPjxpIGNsYXNzPSJmYXMgZmEtc2F2ZSIgc3R5bGU9Im1hcmdpbi1yaWdodDo2cHgiPjwvaT5FbnJlZ2lzdHJlcjwvYnV0dG9uPjwvZGl2PgogICAgICAgIDwvZGl2PgogICAgPC9kaXY+CgogICAgPGRpdiBpZD0ibWVudTgiIGNsYXNzPSJzZWN0aW9uIj4KICAgICAgICA8ZGl2IGNsYXNzPSJmaWx0ZXJzLWJhciI+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAiIHN0eWxlPSJmbGV4OjE7Ij48bGFiZWw+UmVjaGVyY2hlIGdsb2JhbGU8L2xhYmVsPjxpbnB1dCB0eXBlPSJ0ZXh0IiBpZD0ic2VhcmNoLXN0dWRlbnQiIGNsYXNzPSJmb3JtLWNvbnRyb2wiIHBsYWNlaG9sZGVyPSJUYXBlciB1biBub20uLi4iIGRhdGEtc3R1ZGVudC1hYz0iMSIgb25rZXl1cD0icmVuZGVySGlzdG9yeSgpIj48L2Rpdj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1ncm91cCIgc3R5bGU9ImZsZXg6MTsiPjxsYWJlbD5UeXBlPC9sYWJlbD48c2VsZWN0IGlkPSJzZWFyY2gtdHlwZSIgY2xhc3M9ImZvcm0tY29udHJvbCIgb25jaGFuZ2U9InJlbmRlckhpc3RvcnkoKSI+PG9wdGlvbiB2YWx1ZT0iQUxMIj5Ub3V0PC9vcHRpb24+PG9wdGlvbiB2YWx1ZT0iRU5UIj5FbnRyZXRpZW5zPC9vcHRpb24+PG9wdGlvbiB2YWx1ZT0iUkVVIj5Sw6l1bmlvbnM8L29wdGlvbj48b3B0aW9uIHZhbHVlPSJESVIiPkRpcmVjdGlvbjwvb3B0aW9uPjxvcHRpb24gdmFsdWU9IlNVSVZJIj5TdWl2aTwvb3B0aW9uPjwvc2VsZWN0PjwvZGl2PgogICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJidG4gYnRuLWRhcmsgYnRuLXNtIiBvbmNsaWNrPSJwcmludEFsbEhpc3RvcnkoKSI+VG91dCBJbXByaW1lcjwvYnV0dG9uPgogICAgICAgIDwvZGl2PgogICAgICAgIDx0YWJsZSBjbGFzcz0iZGF0YS10YWJsZSIgaWQ9Imhpc3RvcnktdGFibGUiPjx0aGVhZD48dHI+PHRoPkRhdGU8L3RoPjx0aD5UeXBlPC90aD48dGg+U3VqZXQgLyBQZXJzb25uZXM8L3RoPjx0aD5BY3Rpb25zPC90aD48L3RyPjwvdGhlYWQ+PHRib2R5PjwvdGJvZHk+PC90YWJsZT4KICAgIDwvZGl2PgoKICAgIDxkaXYgaWQ9Im1lbnU5IiBjbGFzcz0ic2VjdGlvbiI+CiAgICAgICAgPGgzIHN0eWxlPSJtYXJnaW4tYm90dG9tOjIwcHg7IGNvbG9yOnZhcigtLXByaW1hcnkpOyI+PGkgY2xhc3M9ImZhcyBmYS1jaGFydC1saW5lIj48L2k+IFBpbG90YWdlIEdsb2JhbDwvaDM+CiAgICAgICAgPGRpdiBjbGFzcz0iZGFzaC1rcGktZ3JpZCI+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImtwaS1jYXJkIiBzdHlsZT0iYm9yZGVyLWJvdHRvbS1jb2xvcjp2YXIoLS1oaWdobGlnaHQpIj48aSBjbGFzcz0iZmFzIGZhLWZpcmUgZmEtMngga3BpLWljb24iIHN0eWxlPSJjb2xvcjp2YXIoLS1oaWdobGlnaHQpIj48L2k+PHNwYW4gY2xhc3M9ImtwaS1udW0iIGlkPSJrcGktdG9kbyI+MDwvc3Bhbj48c3BhbiBjbGFzcz0ia3BpLWxhYmVsIj5VcmdlbmNlczwvc3Bhbj48L2Rpdj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0ia3BpLWNhcmQiIHN0eWxlPSJib3JkZXItYm90dG9tLWNvbG9yOnZhcigtLXByaW1hcnkpIj48aSBjbGFzcz0iZmFzIGZhLWNsaXBib2FyZC1saXN0IGZhLTJ4IGtwaS1pY29uIiBzdHlsZT0iY29sb3I6dmFyKC0tcHJpbWFyeSkiPjwvaT48c3BhbiBjbGFzcz0ia3BpLW51bSIgaWQ9ImtwaS1kaXIiPjA8L3NwYW4+PHNwYW4gY2xhc3M9ImtwaS1sYWJlbCI+RGlyZWN0aW9uPC9zcGFuPjwvZGl2PgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJrcGktY2FyZCIgc3R5bGU9ImJvcmRlci1ib3R0b20tY29sb3I6dmFyKC0tYWNjZW50KSI+PGkgY2xhc3M9ImZhcyBmYS1jb21tZW50cyBmYS0yeCBrcGktaWNvbiIgc3R5bGU9ImNvbG9yOnZhcigtLWFjY2VudCkiPjwvaT48c3BhbiBjbGFzcz0ia3BpLW51bSIgaWQ9ImtwaS1lbnQiPjA8L3NwYW4+PHNwYW4gY2xhc3M9ImtwaS1sYWJlbCI+RW50cmV0aWVuczwvc3Bhbj48L2Rpdj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0ia3BpLWNhcmQiIHN0eWxlPSJib3JkZXItYm90dG9tLWNvbG9yOnZhcigtLXN1Y2Nlc3MpIj48aSBjbGFzcz0iZmFzIGZhLXVzZXJzIGZhLTJ4IGtwaS1pY29uIiBzdHlsZT0iY29sb3I6dmFyKC0tc3VjY2VzcykiPjwvaT48c3BhbiBjbGFzcz0ia3BpLW51bSIgaWQ9ImtwaS1yZXUiPjA8L3NwYW4+PHNwYW4gY2xhc3M9ImtwaS1sYWJlbCI+UsOpdW5pb25zPC9zcGFuPjwvZGl2PgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJrcGktY2FyZCIgc3R5bGU9ImJvcmRlci1ib3R0b20tY29sb3I6dmFyKC0td2FybmluZykiPjxpIGNsYXNzPSJmYXMgZmEtY2FsZW5kYXItYWx0IGZhLTJ4IGtwaS1pY29uIiBzdHlsZT0iY29sb3I6dmFyKC0td2FybmluZykiPjwvaT48c3BhbiBjbGFzcz0ia3BpLW51bSIgaWQ9ImtwaS1jYWwiPjA8L3NwYW4+PHNwYW4gY2xhc3M9ImtwaS1sYWJlbCI+QWdlbmRhPC9zcGFuPjwvZGl2PgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJrcGktY2FyZCIgc3R5bGU9ImJvcmRlci1ib3R0b20tY29sb3I6dmFyKC0taW5mbykiPjxpIGNsYXNzPSJmYXMgZmEtdXNlci1ncmFkdWF0ZSBmYS0yeCBrcGktaWNvbiIgc3R5bGU9ImNvbG9yOnZhcigtLWluZm8pIj48L2k+PHNwYW4gY2xhc3M9ImtwaS1udW0iIGlkPSJrcGktc3VpdmkiPjA8L3NwYW4+PHNwYW4gY2xhc3M9ImtwaS1sYWJlbCI+U3Vpdmk8L3NwYW4+PC9kaXY+CiAgICAgICAgPC9kaXY+CiAgICAgICAgPGRpdiBjbGFzcz0iY2hhcnRzLWdyaWQiPgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJjaGFydC1jb250YWluZXIiPjxoMz5Sw6lwYXJ0aXRpb24gQWN0aXZpdMOpPC9oMz48Y2FudmFzIGlkPSJjaGFydFR5cGVzIj48L2NhbnZhcz48L2Rpdj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0iY2hhcnQtY29udGFpbmVyIj4KICAgICAgICAgICAgICAgIDxoMz5Ub3AgNSDDiWzDqHZlcyAoSGlzdG9yaXF1ZSk8L2gzPgogICAgICAgICAgICAgICAgPHVsIGlkPSJ0b3Atc3R1ZGVudHMtbGlzdCIgY2xhc3M9InRvcC1zdHVkZW50cy1saXN0IiBzdHlsZT0ibWFyZ2luLXRvcDoyMHB4OyI+PC91bD4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgPC9kaXY+CiAgICAgICAgPGRpdiBjbGFzcz0iY2hhcnQtY29udGFpbmVyIiBzdHlsZT0id2lkdGg6MTAwJTsgaGVpZ2h0OjMwMHB4OyI+PGgzPsOJdm9sdXRpb24gKDYgbW9pcyk8L2gzPjxjYW52YXMgaWQ9ImNoYXJ0TW9udGhseSI+PC9jYW52YXM+PC9kaXY+CiAgICA8L2Rpdj4KCgo8IS0tIOKVkOKVkOKVkCBFVkVORU1FTlRTIChtZW51MTApIOKVkOKVkOKVkCAtLT4KPGRpdiBpZD0ibWVudTEwIiBjbGFzcz0ic2VjdGlvbiI+CiAgICA8ZGl2IGNsYXNzPSJldi1oZWFkZXIiPgogICAgICAgIDxoMj48aSBjbGFzcz0iZmFzIGZhLWNhbGVuZGFyLWNoZWNrIj48L2k+IEFjdGl2aXTDqXMgcMOpZGFnb2dpcXVlczwvaDI+CiAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYWN0aW9uLWJ0biIgc3R5bGU9ImJhY2tncm91bmQ6dmFyKC0taGVhZGVyKTtjb2xvcjojZmZmO3BhZGRpbmc6MTBweCAyMHB4O2ZvbnQtc2l6ZTouOTVyZW07Zm9udC13ZWlnaHQ6NzAwO2JvcmRlci1yYWRpdXM6MTBweDtib3JkZXI6bm9uZTtjdXJzb3I6cG9pbnRlcjtib3gtc2hhZG93OjAgM3B4IDEwcHggcmdiYSg0NCw2Miw4MCwuMyk7dHJhbnNpdGlvbjp0cmFuc2Zvcm0gLjE1cyxib3gtc2hhZG93IC4xNXM7IiBvbm1vdXNlb3Zlcj0idGhpcy5zdHlsZS50cmFuc2Zvcm09J3RyYW5zbGF0ZVkoLTJweCknO3RoaXMuc3R5bGUuYm94U2hhZG93PScwIDVweCAxNXB4IHJnYmEoNDQsNjIsODAsLjQpJyIgb25tb3VzZW91dD0idGhpcy5zdHlsZS50cmFuc2Zvcm09J25vbmUnO3RoaXMuc3R5bGUuYm94U2hhZG93PScwIDNweCAxMHB4IHJnYmEoNDQsNjIsODAsLjMpJyIgb25jbGljaz0ib3BlbkV2TW9kYWwoKSI+PGkgY2xhc3M9ImZhcyBmYS1wbHVzIj48L2k+IE5vdXZlbCDDqXbDqW5lbWVudDwvYnV0dG9uPgogICAgPC9kaXY+CiAgICA8ZGl2IGNsYXNzPSJldi10b3AiPgogICAgICAgIDxkaXYgY2xhc3M9ImV2LWtwaXMiPgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJldi1rcGkiPjxkaXYgY2xhc3M9Imt2IiBpZD0ia3BpLWV2LXRvdCIgc3R5bGU9ImNvbG9yOnZhcigtLWhlYWRlcikiPjA8L2Rpdj48ZGl2IGNsYXNzPSJrbCI+VG90YWw8L2Rpdj48L2Rpdj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0iZXYta3BpIj48ZGl2IGNsYXNzPSJrdiIgaWQ9ImtwaS1ldi1tc2ciIHN0eWxlPSJjb2xvcjojMjdhZTYwIj4wPC9kaXY+PGRpdiBjbGFzcz0ia2wiPk1zZyBQYXJlbnRzPC9kaXY+PC9kaXY+CiAgICAgICAgPC9kaXY+CiAgICA8L2Rpdj4KICAgIDxkaXYgY2xhc3M9ImV2LWZpbHRlcnMiPgogICAgICAgIAogICAgICAgIAogICAgICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiBpZD0iZXYtc2VhcmNoIiBwbGFjZWhvbGRlcj0iUmVjaGVyY2hlcuKApiIgb25pbnB1dD0icmVuZGVyRXZlbnRzKCkiIHN0eWxlPSJmbGV4OjE7bWluLXdpZHRoOjEyMHB4O21heC13aWR0aDoyNjBweCI+CiAgICA8L2Rpdj4KICAgIDxkaXYgY2xhc3M9ImV2LWdyaWQiIGlkPSJldi1ncmlkIj48L2Rpdj4KPC9kaXY+Cgo8IS0tIE1PREFMIEVWRU5FTUVOVCAtLT4KPGRpdiBpZD0iZXZNb2QiIGNsYXNzPSJtLW92IiBzdHlsZT0ibGVmdDoyODBweCIgb25jbGljaz0iaWYoZXZlbnQudGFyZ2V0PT09dGhpcyljbG9zZUV2TW9kYWwoKSI+CiAgICA8ZGl2IGNsYXNzPSJtLWJveCIgc3R5bGU9IndpZHRoOmNhbGMoMTAwdncgLSAyODBweCk7bWF4LXdpZHRoOmNhbGMoMTAwdncgLSAyODBweCk7aGVpZ2h0OjEwMHZoO21heC1oZWlnaHQ6MTAwdmg7Ym9yZGVyLXJhZGl1czowO3BhZGRpbmc6MjBweCAyOHB4O2JveC1zaXppbmc6Ym9yZGVyLWJveDttYXJnaW4tbGVmdDphdXRvIj4KICAgICAgICA8aDM+PGkgY2xhc3M9ImZhcyBmYS1jYWxlbmRhci1jaGVjayI+PC9pPiA8c3BhbiBpZD0iZXYtbXQiPk5vdXZlbCDDqXbDqW5lbWVudDwvc3Bhbj48L2gzPgogICAgICAgIDxpbnB1dCB0eXBlPSJoaWRkZW4iIGlkPSJldi1laWQiPgogICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAiIHN0eWxlPSJtYXJnaW4tYm90dG9tOjEwcHgiPjxsYWJlbD5JbnRpdHVsw6kgKjwvbGFiZWw+PGlucHV0IHR5cGU9InRleHQiIGlkPSJldi1uYW1lIiBjbGFzcz0iZm9ybS1jb250cm9sIiBwbGFjZWhvbGRlcj0iRXg6IEpvdXJuw6llIHBvcnRlcyBvdXZlcnRlcyI+PC9kaXY+CiAgICAgICAgPGRpdiBjbGFzcz0ibS1yb3ciPgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWdyb3VwIj48bGFiZWw+RMOpYnV0PC9sYWJlbD48aW5wdXQgdHlwZT0iZGF0ZSIgaWQ9ImV2LXN0YXJ0IiBjbGFzcz0iZm9ybS1jb250cm9sIj48L2Rpdj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1ncm91cCI+PGxhYmVsPsOJY2jDqWFuY2U8L2xhYmVsPjxpbnB1dCB0eXBlPSJkYXRlIiBpZD0iZXYtZGVhZCIgY2xhc3M9ImZvcm0tY29udHJvbCI+PC9kaXY+CiAgICAgICAgPC9kaXY+CiAgICAgICAgPGRpdiBjbGFzcz0ibS1yb3ciPgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWdyb3VwIj48bGFiZWw+UGlsb3RlPC9sYWJlbD48c2VsZWN0IGlkPSJldi1yZXNwIiBjbGFzcz0iZm9ybS1jb250cm9sIj48b3B0aW9uIHZhbHVlPSIiPi0tIENob2lzaXIgLS08L29wdGlvbj48L3NlbGVjdD48L2Rpdj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1ncm91cCIgc3R5bGU9ImRpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXI7Z2FwOjhweDtwYWRkaW5nLXRvcDoyMnB4Ij48aW5wdXQgdHlwZT0iY2hlY2tib3giIGlkPSJldi1tc2dwYXJlbnRzIiBzdHlsZT0id2lkdGg6MThweDtoZWlnaHQ6MThweDtjdXJzb3I6cG9pbnRlciI+PGxhYmVsIGZvcj0iZXYtbXNncGFyZW50cyIgc3R5bGU9Im1hcmdpbjowO2N1cnNvcjpwb2ludGVyO2ZvbnQtc2l6ZTouODVyZW0iPk1lc3NhZ2UgZW52b3nDqSBhdXggcGFyZW50czwvbGFiZWw+PC9kaXY+CiAgICAgICAgPC9kaXY+CiAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1ncm91cCIgc3R5bGU9Im1hcmdpbi1ib3R0b206MTBweCI+PGxhYmVsPkNsYXNzZXMgY29uY2VybsOpZXM8L2xhYmVsPgogICAgICAgICAgICA8ZGl2IHN0eWxlPSJkaXNwbGF5OmZsZXg7Z2FwOjhweDthbGlnbi1pdGVtczpjZW50ZXIiPgogICAgICAgICAgICAgICAgPHNlbGVjdCBpZD0iZXYtY2xhc3NlIiBjbGFzcz0iZm9ybS1jb250cm9sIiBzdHlsZT0iZmxleDoxIj48b3B0aW9uIHZhbHVlPSIiPi0tIENob2lzaXIgb3Ugc2Fpc2lyIC0tPC9vcHRpb24+PC9zZWxlY3Q+CiAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgY2xhc3M9Im1iIiBzdHlsZT0iYmFja2dyb3VuZDojNTU1O2NvbG9yOiNmZmY7cGFkZGluZzo2cHggMTBweDtmb250LXNpemU6Ljc1cmVtIiBvbmNsaWNrPSJ3aW5kb3cuYWRkRXZDbGFzc2UoKSI+PGkgY2xhc3M9ImZhcyBmYS1wbHVzIj48L2k+PC9idXR0b24+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8ZGl2IGlkPSJldi1jbGFzc2VzLWxpc3QiIHN0eWxlPSJkaXNwbGF5OmZsZXg7ZmxleC13cmFwOndyYXA7Z2FwOjRweDttYXJnaW4tdG9wOjZweCI+PC9kaXY+CiAgICAgICAgPC9kaXY+CiAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1ncm91cCIgc3R5bGU9Im1hcmdpbi1ib3R0b206MTBweCI+PGxhYmVsPk1lc3NhZ2Ugw6AgYWRyZXNzZXIgYXV4IHBhcmVudHM8L2xhYmVsPgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJydGUtd3JhcCI+PGRpdiBjbGFzcz0icnRlLWJhciI+CiAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0iZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2JvbGQnKSIgdGl0bGU9IkdyYXMiPjxiPkc8L2I+PC9idXR0b24+CiAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0iZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2l0YWxpYycpIiB0aXRsZT0iSXRhbGlxdWUiPjxpPkk8L2k+PC9idXR0b24+CiAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0iZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ3VuZGVybGluZScpIiB0aXRsZT0iU291bGlnbsOpIj48dT5TPC91PjwvYnV0dG9uPgogICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9InJ0ZS1zZXAiPjwvc3Bhbj4KICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJkb2N1bWVudC5leGVjQ29tbWFuZCgnaW5zZXJ0VW5vcmRlcmVkTGlzdCcpIiB0aXRsZT0iUHVjZXMiPjxpIGNsYXNzPSJmYXMgZmEtbGlzdC11bCI+PC9pPjwvYnV0dG9uPgogICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9ImRvY3VtZW50LmV4ZWNDb21tYW5kKCdpbnNlcnRPcmRlcmVkTGlzdCcpIiB0aXRsZT0iTGlzdGUgbnVtw6lyb3TDqWUiPjxpIGNsYXNzPSJmYXMgZmEtbGlzdC1vbCI+PC9pPjwvYnV0dG9uPgogICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9InJ0ZS1zZXAiPjwvc3Bhbj4KICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJydGVDb2xvcih0aGlzKSIgdGl0bGU9IkNvdWxldXIiPjxpIGNsYXNzPSJmYXMgZmEtcGFsZXR0ZSI+PC9pPjwvYnV0dG9uPgogICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9InJ0ZUxpbmsodGhpcykiIHRpdGxlPSJMaWVuIj48aSBjbGFzcz0iZmFzIGZhLWxpbmsiPjwvaT48L2J1dHRvbj4KICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJydGUtc2VwIj48L3NwYW4+CiAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0iZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ3VuZG8nKSIgdGl0bGU9IkFubnVsZXIiPjxpIGNsYXNzPSJmYXMgZmEtdW5kbyI+PC9pPjwvYnV0dG9uPgogICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9ImRvY3VtZW50LmV4ZWNDb21tYW5kKCdyZWRvJykiIHRpdGxlPSJSZXN0YXVyZXIiPjxpIGNsYXNzPSJmYXMgZmEtcmVkbyI+PC9pPjwvYnV0dG9uPgogICAgICAgICAgICA8c3BhbiBjbGFzcz0icnRlLXNlcCI+PC9zcGFuPjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJkb2N1bWVudC5leGVjQ29tbWFuZCgnanVzdGlmeUxlZnQnKSIgdGl0bGU9IkFsaWduZXIgw6AgZ2F1Y2hlIj48aSBjbGFzcz0iZmFzIGZhLWFsaWduLWxlZnQiPjwvaT48L2J1dHRvbj48YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0iZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2p1c3RpZnlDZW50ZXInKSIgdGl0bGU9IkNlbnRyZXIiPjxpIGNsYXNzPSJmYXMgZmEtYWxpZ24tY2VudGVyIj48L2k+PC9idXR0b24+PGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9ImRvY3VtZW50LmV4ZWNDb21tYW5kKCdqdXN0aWZ5RnVsbCcpIiB0aXRsZT0iSnVzdGlmaWVyIj48aSBjbGFzcz0iZmFzIGZhLWFsaWduLWp1c3RpZnkiPjwvaT48L2J1dHRvbj4KPC9kaXY+PGRpdiBjbGFzcz0icnRlLWJvZHkiIGlkPSJldi1kZXNjIiBjb250ZW50ZWRpdGFibGU9InRydWUiIHN0eWxlPSJtaW4taGVpZ2h0OjQ1dmg7Ym9yZGVyOjJweCBzb2xpZCAjZTBlMGUwO2JvcmRlci1yYWRpdXM6MCAwIDhweCA4cHg7cGFkZGluZzoxMHB4Ij48L2Rpdj48L2Rpdj4KICAgICAgICA8L2Rpdj4KICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWdyb3VwIiBzdHlsZT0ibWFyZ2luLWJvdHRvbToxMHB4Ij48bGFiZWw+w4l0aXF1ZXR0ZXMgKHZpcmd1bGVzKTwvbGFiZWw+PGlucHV0IHR5cGU9InRleHQiIGlkPSJldi10YWdzIiBjbGFzcz0iZm9ybS1jb250cm9sIiBwbGFjZWhvbGRlcj0iSlBPLCBjb21tdW5pY2F0aW9uLCBvcmllbnRhdGlvbiI+PC9kaXY+CiAgICAgICAgCiAgICAgICAgPGRpdiBjbGFzcz0ibS1hY3RzIj4KICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0ibWIgbWItZGVsIiBpZD0iZXYtZGVsLWJ0biIgc3R5bGU9ImRpc3BsYXk6bm9uZSIgb25jbGljaz0id2luZG93LmRlbEV2RnJvbU1vZGFsKCkiPjxpIGNsYXNzPSJmYXMgZmEtdHJhc2giPjwvaT4gU3VwcHJpbWVyPC9idXR0b24+CiAgICAgICAgICAgIDxidXR0b24gY2xhc3M9Im1iIG1iLWMiIG9uY2xpY2s9IndpbmRvdy5jbG9zZUV2TW9kYWwoKSI+QW5udWxlcjwvYnV0dG9uPgogICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJtYiBtYi1vayIgb25jbGljaz0id2luZG93LnNhdmVFdmVudCgpIj48aSBjbGFzcz0iZmFzIGZhLWNoZWNrIj48L2k+IEVucmVnaXN0cmVyPC9idXR0b24+CiAgICAgICAgPC9kaXY+CiAgICA8L2Rpdj4KPC9kaXY+Cgo8IS0tIOKVkOKVkOKVkCBHQU5UVCAvIFBST0NFRFVSRVMgKG1lbnUxMSkg4pWQ4pWQ4pWQIC0tPgo8ZGl2IGlkPSJtZW51MTEiIGNsYXNzPSJzZWN0aW9uIj4KICAgIDxkaXYgY2xhc3M9Imd0LWJhciI+CiAgICAgICAgPGgyPjxpIGNsYXNzPSJmYXMgZmEtc3RyZWFtIj48L2k+IMOJY2jDqWFuY2VzPC9oMj4KICAgICAgICA8ZGl2IGNsYXNzPSJndC1iYXItYnRucyI+CiAgICAgICAgICAgIDxidXR0b24gY2xhc3M9Imd0LWJ0bi1hZGQiIG9uY2xpY2s9IndpbmRvdy5vcGVuR3RNb2RhbCgpIj48aSBjbGFzcz0iZmFzIGZhLXBsdXMiPjwvaT4gw4ljaMOpYW5jZTwvYnV0dG9uPgogICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJndC1idG4tc2VjIiBvbmNsaWNrPSJ3aW5kb3cucHJpbnRHYW50dCgpIj48aSBjbGFzcz0iZmFzIGZhLXByaW50Ij48L2k+IEltcHJpbWVyPC9idXR0b24+CiAgICAgICAgPC9kaXY+CiAgICA8L2Rpdj4KICAgIAogICAgPGRpdiBjbGFzcz0iZ3QtbmF2Ij4KICAgICAgICA8YnV0dG9uIG9uY2xpY2s9IndpbmRvdy5ndFByZXYoKSIgdGl0bGU9IlByw6ljw6lkZW50Ij48aSBjbGFzcz0iZmFzIGZhLWNoZXZyb24tbGVmdCI+PC9pPjwvYnV0dG9uPgogICAgICAgIDxzcGFuIHN0eWxlPSJmb250LXNpemU6Ljc2cmVtO2ZvbnQtd2VpZ2h0OjYwMDttaW4td2lkdGg6MTUwcHg7dGV4dC1hbGlnbjpjZW50ZXIiIGlkPSJndC1wZXIiPjwvc3Bhbj4KICAgICAgICA8YnV0dG9uIG9uY2xpY2s9IndpbmRvdy5ndE5leHQoKSIgdGl0bGU9IlN1aXZhbnQiPjxpIGNsYXNzPSJmYXMgZmEtY2hldnJvbi1yaWdodCI+PC9pPjwvYnV0dG9uPgogICAgICAgIDxidXR0b24gb25jbGljaz0id2luZG93Lmd0WWVhcigpIj5Bbm7DqWU8L2J1dHRvbj4KICAgICAgICA8YnV0dG9uIG9uY2xpY2s9IndpbmRvdy5ndFRvZGF5KCkiPkF1ai48L2J1dHRvbj4KICAgICAgICA8c2VsZWN0IGlkPSJndC1mYyIgb25jaGFuZ2U9IndpbmRvdy5yZW5kZXJHYW50dCgpIiBzdHlsZT0ibWFyZ2luLWxlZnQ6YXV0byI+PG9wdGlvbiB2YWx1ZT0iQUxMIj5Ub3V0ZXMgY2F0w6lnb3JpZXM8L29wdGlvbj48L3NlbGVjdD4KICAgIDwvZGl2PgogICAgPGRpdiBjbGFzcz0iZ3Qtd3JhcCIgc3R5bGU9Im1heC1oZWlnaHQ6Y2FsYygxMDB2aCAtIDI2MHB4KTtvdmVyZmxvdy15OmF1dG8iPgogICAgICAgIDx0YWJsZSBjbGFzcz0iZ3QiIGlkPSJndC10YmwiPjwvdGFibGU+CiAgICA8L2Rpdj4KICAgIDxkaXYgY2xhc3M9Imd0LWxlZyI+CiAgICAgICAgPHNwYW4+PGkgc3R5bGU9ImJhY2tncm91bmQ6IzVkYWRlMiI+PC9pPlJlbnRyw6llPC9zcGFuPgogICAgICAgIDxzcGFuPjxpIHN0eWxlPSJiYWNrZ3JvdW5kOiMyZTg2YzEiPjwvaT5FeGFtZW5zPC9zcGFuPgogICAgICAgIDxzcGFuPjxpIHN0eWxlPSJiYWNrZ3JvdW5kOiMxYTUyNzYiPjwvaT5PcmllbnRhdGlvbjwvc3Bhbj4KICAgICAgICA8c3Bhbj48aSBzdHlsZT0iYmFja2dyb3VuZDojMjQ3MWEzIj48L2k+Q29uc2VpbHM8L3NwYW4+CiAgICAgICAgPHNwYW4+PGkgc3R5bGU9ImJhY2tncm91bmQ6IzhlNDRhZCI+PC9pPlDDqWRhZ29naXF1ZTwvc3Bhbj4KICAgICAgICA8c3Bhbj48aSBzdHlsZT0iYmFja2dyb3VuZDojMTQ4Zjc3Ij48L2k+QWRtaW48L3NwYW4+CiAgICAgICAgPHNwYW4+PGkgc3R5bGU9ImJhY2tncm91bmQ6I2MwMzkyYiI+PC9pPlJIPC9zcGFuPgogICAgICAgIDxzcGFuPjxpIHN0eWxlPSJiYWNrZ3JvdW5kOiM1YjZkNWIiPjwvaT5BdXRyZTwvc3Bhbj4KICAgICAgICA8c3Bhbj48aSBzdHlsZT0iYmFja2dyb3VuZDpyZXBlYXRpbmctbGluZWFyLWdyYWRpZW50KDQ1ZGVnLCNmMGYwZjAsI2YwZjBmMCAycHgsI2U4ZThlOCAycHgsI2U4ZThlOCA0cHgpO2JvcmRlcjoxcHggc29saWQgI2NjYyI+PC9pPlZhY2FuY2VzPC9zcGFuPgogICAgICAgIDxzcGFuPjxpIHN0eWxlPSJiYWNrZ3JvdW5kOiNkMzU0MDAiPjwvaT5TZW0uIGNvdXJhbnRlPC9zcGFuPgogICAgPC9kaXY+CjwvZGl2PgoKPCEtLSBNT0RBTCBHQU5UVCAtLT4KPGRpdiBpZD0iZ3RNb2QiIGNsYXNzPSJtLW92IiBvbmNsaWNrPSJpZihldmVudC50YXJnZXQ9PT10aGlzKWNsb3NlR3RNb2RhbCgpIj4KICAgIDxkaXYgY2xhc3M9Im0tYm94IiBzdHlsZT0id2lkdGg6NTAwcHg7Ij4KICAgICAgICA8aDM+PGkgY2xhc3M9ImZhcyBmYS1zdHJlYW0iPjwvaT4gPHNwYW4gaWQ9Imd0LW10Ij5Ob3V2ZWxsZSDDqWNow6lhbmNlPC9zcGFuPjwvaDM+CiAgICAgICAgPGlucHV0IHR5cGU9ImhpZGRlbiIgaWQ9Imd0LWVpZCI+CiAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1ncm91cCIgc3R5bGU9Im1hcmdpbi1ib3R0b206MTBweCI+PGxhYmVsPkludGl0dWzDqSAqPC9sYWJlbD48aW5wdXQgdHlwZT0idGV4dCIgaWQ9Imd0LW5hbWUiIGNsYXNzPSJmb3JtLWNvbnRyb2wiIHBsYWNlaG9sZGVyPSJDb25zZWlscyBkZSBjbGFzc2UgVDIiPjwvZGl2PgogICAgICAgIDxkaXYgY2xhc3M9Im0tcm93Ij4KICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1ncm91cCI+PGxhYmVsPkNvZGU8L2xhYmVsPjxpbnB1dCB0eXBlPSJ0ZXh0IiBpZD0iZ3QtY29kZSIgY2xhc3M9ImZvcm0tY29udHJvbCIgcGxhY2Vob2xkZXI9IkEgNCIgbWF4bGVuZ3RoPSI2Ij48L2Rpdj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1ncm91cCI+PGxhYmVsPkNhdMOpZ29yaWU8L2xhYmVsPgogICAgICAgICAgICAgICAgPHNlbGVjdCBpZD0iZ3QtY2F0IiBjbGFzcz0iZm9ybS1jb250cm9sIj4KICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJBZG1pbmlzdHJhdGlmIj5BZG1pbmlzdHJhdGlmPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iw4lsw6h2ZXMgQkVQIj7DiWzDqHZlcyBCRVA8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJDb25jZXJ0YXRpb25zIj5Db25jZXJ0YXRpb25zPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iRGlzcG9zaXRpZnMgUMOpZGFnb2dpcXVlcyI+RGlzcG9zaXRpZnMgUMOpZGFnb2dpcXVlczwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IlN1aXZpIGRlcyDDqWzDqHZlcyI+U3VpdmkgZGVzIMOpbMOodmVzPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iSW50ZXJ2ZW5hbnRzIj5JbnRlcnZlbmFudHM8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJOdW3DqXJpcXVlIj5OdW3DqXJpcXVlPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iT3JpZW50YXRpb24iPk9yaWVudGF0aW9uPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iUHJvamV0cyI+UHJvamV0czwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IlBvcnRlcyBPdXZlcnRlcyI+UG9ydGVzIE91dmVydGVzPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iUmVzc291cmNlcyBIdW1haW5lcyI+UmVzc291cmNlcyBIdW1haW5lczwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IlPDqWN1cml0w6kiPlPDqWN1cml0w6k8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJBdXRyZSI+QXV0cmU8L29wdGlvbj4KICAgICAgICAgICAgICAgIDwvc2VsZWN0PgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICA8L2Rpdj4KICAgICAgICA8ZGl2IGNsYXNzPSJtLXJvdyI+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAiPjxsYWJlbD5TZW1haW5lIGTDqWJ1dCAobsKwIElTTyk8L2xhYmVsPjxpbnB1dCB0eXBlPSJudW1iZXIiIGlkPSJndC13cyIgY2xhc3M9ImZvcm0tY29udHJvbCIgbWluPSIxIiBtYXg9IjUzIj48L2Rpdj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1ncm91cCI+PGxhYmVsPlNlbWFpbmUgZmluIChuwrAgSVNPKTwvbGFiZWw+PGlucHV0IHR5cGU9Im51bWJlciIgaWQ9Imd0LXdlIiBjbGFzcz0iZm9ybS1jb250cm9sIiBtaW49IjEiIG1heD0iNTMiPjwvZGl2PgogICAgICAgIDwvZGl2PgogICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAiIHN0eWxlPSJtYXJnaW4tYm90dG9tOjEwcHgiPjxsYWJlbD5SZXNwb25zYWJsZTwvbGFiZWw+PHNlbGVjdCBpZD0iZ3QtcmVzcCIgY2xhc3M9ImZvcm0tY29udHJvbCI+PG9wdGlvbiB2YWx1ZT0iIj4tLSBDaG9pc2lyIC0tPC9vcHRpb24+PC9zZWxlY3Q+PC9kaXY+CiAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1ncm91cCIgc3R5bGU9Im1hcmdpbi1ib3R0b206MTBweCI+PGxhYmVsPk5vdGVzPC9sYWJlbD4KICAgICAgICAgICAgPGRpdiBjbGFzcz0icnRlLXdyYXAiPjxkaXYgY2xhc3M9InJ0ZS1iYXIiPgogICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9ImRvY3VtZW50LmV4ZWNDb21tYW5kKCdib2xkJykiIHRpdGxlPSJHcmFzIj48Yj5HPC9iPjwvYnV0dG9uPgogICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9ImRvY3VtZW50LmV4ZWNDb21tYW5kKCdpdGFsaWMnKSIgdGl0bGU9Ikl0YWxpcXVlIj48aT5JPC9pPjwvYnV0dG9uPgogICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9ImRvY3VtZW50LmV4ZWNDb21tYW5kKCd1bmRlcmxpbmUnKSIgdGl0bGU9IlNvdWxpZ27DqSI+PHU+UzwvdT48L2J1dHRvbj4KICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJydGUtc2VwIj48L3NwYW4+CiAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0iZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2luc2VydFVub3JkZXJlZExpc3QnKSIgdGl0bGU9IlB1Y2VzIj48aSBjbGFzcz0iZmFzIGZhLWxpc3QtdWwiPjwvaT48L2J1dHRvbj4KICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJkb2N1bWVudC5leGVjQ29tbWFuZCgnaW5zZXJ0T3JkZXJlZExpc3QnKSIgdGl0bGU9Ik51bcOpcm90w6llIj48aSBjbGFzcz0iZmFzIGZhLWxpc3Qtb2wiPjwvaT48L2J1dHRvbj4KICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJydGUtc2VwIj48L3NwYW4+CiAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0icnRlQ29sb3IodGhpcykiIHRpdGxlPSJDb3VsZXVyIj48aSBjbGFzcz0iZmFzIGZhLXBhbGV0dGUiPjwvaT48L2J1dHRvbj4KICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJydGVMaW5rKHRoaXMpIiB0aXRsZT0iTGllbiI+PGkgY2xhc3M9ImZhcyBmYS1saW5rIj48L2k+PC9idXR0b24+CiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz0icnRlLXNlcCI+PC9zcGFuPgogICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9ImRvY3VtZW50LmV4ZWNDb21tYW5kKCd1bmRvJykiIHRpdGxlPSJBbm51bGVyIj48aSBjbGFzcz0iZmFzIGZhLXVuZG8iPjwvaT48L2J1dHRvbj4KICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJkb2N1bWVudC5leGVjQ29tbWFuZCgncmVkbycpIiB0aXRsZT0iUmVzdGF1cmVyIj48aSBjbGFzcz0iZmFzIGZhLXJlZG8iPjwvaT48L2J1dHRvbj4KICAgICAgICAgICAgPHNwYW4gY2xhc3M9InJ0ZS1zZXAiPjwvc3Bhbj48YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0iZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2p1c3RpZnlMZWZ0JykiIHRpdGxlPSJBbGlnbmVyIMOgIGdhdWNoZSI+PGkgY2xhc3M9ImZhcyBmYS1hbGlnbi1sZWZ0Ij48L2k+PC9idXR0b24+PGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9ImRvY3VtZW50LmV4ZWNDb21tYW5kKCdqdXN0aWZ5Q2VudGVyJykiIHRpdGxlPSJDZW50cmVyIj48aSBjbGFzcz0iZmFzIGZhLWFsaWduLWNlbnRlciI+PC9pPjwvYnV0dG9uPjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJkb2N1bWVudC5leGVjQ29tbWFuZCgnanVzdGlmeUZ1bGwnKSIgdGl0bGU9Ikp1c3RpZmllciI+PGkgY2xhc3M9ImZhcyBmYS1hbGlnbi1qdXN0aWZ5Ij48L2k+PC9idXR0b24+CjwvZGl2PjxkaXYgY2xhc3M9InJ0ZS1ib2R5IiBpZD0iZ3Qtbm90ZXMiIGNvbnRlbnRlZGl0YWJsZT0idHJ1ZSIgc3R5bGU9ImJvcmRlcjoycHggc29saWQgI2UwZTBlMDtib3JkZXItcmFkaXVzOjAgMCA4cHggOHB4O3BhZGRpbmc6MTBweDttaW4taGVpZ2h0OjgwcHgiPjwvZGl2PjwvZGl2PgogICAgICAgIDwvZGl2PgogICAgICAgIDxkaXYgY2xhc3M9Im0tYWN0cyIgc3R5bGU9InBhZGRpbmctdG9wOjEycHg7Ym9yZGVyLXRvcDoxcHggc29saWQgI2VlZTtkaXNwbGF5OmZsZXg7Z2FwOjhweDtqdXN0aWZ5LWNvbnRlbnQ6ZmxleC1lbmQiPgogICAgICAgICAgICA8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgY2xhc3M9Im1iIG1iLWRlbCIgaWQ9Imd0LWRlbC1idG4iIHN0eWxlPSJkaXNwbGF5Om5vbmUiIG9uY2xpY2s9IndpbmRvdy5kZWxHdEZyb21Nb2RhbCgpIj48aSBjbGFzcz0iZmFzIGZhLXRyYXNoIj48L2k+IFN1cHByaW1lcjwvYnV0dG9uPgogICAgICAgICAgICA8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgY2xhc3M9Im1iIG1iLWMiIG9uY2xpY2s9IndpbmRvdy5jbG9zZUd0TW9kYWwoKSI+QW5udWxlcjwvYnV0dG9uPgogICAgICAgICAgICA8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgY2xhc3M9Im1iIG1iLW9rIiBvbmNsaWNrPSJ3aW5kb3cuc2F2ZUd0KCkiPjxpIGNsYXNzPSJmYXMgZmEtY2hlY2siPjwvaT4gRW5yZWdpc3RyZXI8L2J1dHRvbj4KICAgICAgICA8L2Rpdj4KICAgIDwvZGl2Pgo8L2Rpdj4KICAgIDwhLS0g4pWQ4pWQ4pWQIFBST0PDiURVUkVTIOKVkOKVkOKVkCAtLT4KICAgIDxkaXYgaWQ9Im1lbnUxMiIgY2xhc3M9InNlY3Rpb24iPgogICAgICAgIDxkaXYgY2xhc3M9ImV2LWhlYWRlciIgc3R5bGU9ImRpc3BsYXk6ZmxleDtqdXN0aWZ5LWNvbnRlbnQ6c3BhY2UtYmV0d2VlbjthbGlnbi1pdGVtczpjZW50ZXI7bWFyZ2luLWJvdHRvbToxNnB4Ij4KICAgICAgICAgICAgPGgyIHN0eWxlPSJjb2xvcjp2YXIoLS1oZWFkZXIpO2ZvbnQtc2l6ZToxLjA1cmVtO2Rpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXI7Z2FwOjhweDttYXJnaW46MCI+PGkgY2xhc3M9ImZhcyBmYS1ib29rIj48L2k+IFByb2PDqWR1cmVzPC9oMj4KICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYWN0aW9uLWJ0biIgc3R5bGU9ImJhY2tncm91bmQ6dmFyKC0taGVhZGVyKTtjb2xvcjojZmZmO3BhZGRpbmc6MTBweCAyMHB4O2ZvbnQtc2l6ZTouOTVyZW07Zm9udC13ZWlnaHQ6NzAwO2JvcmRlci1yYWRpdXM6MTBweDtib3JkZXI6bm9uZTtjdXJzb3I6cG9pbnRlcjtib3gtc2hhZG93OjAgM3B4IDEwcHggcmdiYSg0NCw2Miw4MCwuMykiIG9uY2xpY2s9Im9wZW5Qcm9jTW9kYWwoKSI+PGkgY2xhc3M9ImZhcyBmYS1wbHVzIj48L2k+IE5vdXZlbGxlIHByb2PDqWR1cmU8L2J1dHRvbj4KICAgICAgICA8L2Rpdj4KICAgICAgICA8ZGl2IGNsYXNzPSJwcm9jLWZpbHRlcnMiIGlkPSJwcm9jLWZpbHRlcnMiPjwvZGl2PgogICAgICAgIDxkaXYgaWQ9InByb2Mtdmlldy1hcmVhIiBzdHlsZT0iZGlzcGxheTpub25lIj48L2Rpdj4KICAgICAgICA8ZGl2IGNsYXNzPSJwcm9jLWxpc3QiIGlkPSJwcm9jLWxpc3QiPjwvZGl2PgogICAgPC9kaXY+Cgo8L2Rpdj48IS0tIC9tYWluLWNvbnRlbnQgLS0+Cgo8ZGl2IGlkPSJwcmludC16b25lIiBjbGFzcz0icHJpbnQtYXJlYSI+PC9kaXY+Cgo8IS0tIE1PREFMIFBST0NFRFVSRSAtLT4KPGRpdiBpZD0icHJvY01vZCIgY2xhc3M9Im0tb3YiIG9uY2xpY2s9ImlmKGV2ZW50LnRhcmdldD09PXRoaXMpY2xvc2VQcm9jTW9kYWwoKSI+CiAgICA8ZGl2IGNsYXNzPSJtLWJveCIgc3R5bGU9IndpZHRoOjYwMHB4O21heC13aWR0aDo5NXZ3O21heC1oZWlnaHQ6OTB2aDtvdmVyZmxvdy15OmF1dG8iPgogICAgICAgIDxoMz48aSBjbGFzcz0iZmFzIGZhLWJvb2siPjwvaT4gPHNwYW4gaWQ9InByb2NNb2QtdGl0bGUiPk5vdXZlbGxlIHByb2PDqWR1cmU8L3NwYW4+PC9oMz4KICAgICAgICA8ZGl2IHN0eWxlPSJkaXNwbGF5OmdyaWQ7Z3JpZC10ZW1wbGF0ZS1jb2x1bW5zOjEyMHB4IDFmcjtnYXA6MTBweDttYXJnaW4tYm90dG9tOjEycHgiPgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWdyb3VwIj48bGFiZWw+Q29kZSAqPC9sYWJlbD48aW5wdXQgdHlwZT0idGV4dCIgaWQ9InByb2MtY29kZSIgY2xhc3M9ImZvcm0tY29udHJvbCIgcGxhY2Vob2xkZXI9IkVYOiBBMSIgc3R5bGU9InRleHQtdHJhbnNmb3JtOnVwcGVyY2FzZTtmb250LXdlaWdodDo3MDAiPjwvZGl2PgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWdyb3VwIj48bGFiZWw+VGl0cmUgKjwvbGFiZWw+PGlucHV0IHR5cGU9InRleHQiIGlkPSJwcm9jLXRpdGxlIiBjbGFzcz0iZm9ybS1jb250cm9sIiBwbGFjZWhvbGRlcj0iSW50aXR1bMOpIGRlIGxhIHByb2PDqWR1cmUiPjwvZGl2PgogICAgICAgIDwvZGl2PgogICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAiIHN0eWxlPSJtYXJnaW4tYm90dG9tOjEycHgiPgogICAgICAgICAgICA8bGFiZWw+Q2F0w6lnb3JpZTwvbGFiZWw+CiAgICAgICAgICAgIDxzZWxlY3QgaWQ9InByb2MtY2F0IiBjbGFzcz0iZm9ybS1jb250cm9sIiBvbmNoYW5nZT0iaWYodGhpcy52YWx1ZT09PSdfX25ld19fJyl7dmFyIG49cHJvbXB0KCdOb3V2ZWxsZSBjYXTDqWdvcmllIDonKTtpZihuKXt2YXIgbz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCdvcHRpb24nKTtvLnZhbHVlPW47by50ZXh0PW47dGhpcy5pbnNlcnRCZWZvcmUobyx0aGlzLnF1ZXJ5U2VsZWN0b3IoJ29wdGlvblt2YWx1ZT0mcXVvdDtfX25ld19fJnF1b3Q7XScpKTt0aGlzLnZhbHVlPW47fWVsc2V7dGhpcy52YWx1ZT0nJzt9fSI+CiAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSIiPuKAlCBBdWN1bmUg4oCUPC9vcHRpb24+CiAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJfX25ld19fIj4rIE5vdXZlbGxlIGNhdMOpZ29yaWXigKY8L29wdGlvbj4KICAgICAgICAgICAgPC9zZWxlY3Q+CiAgICAgICAgPC9kaXY+CiAgICAgICAgPGRpdiBzdHlsZT0iZGlzcGxheTpmbGV4O2FsaWduLWl0ZW1zOmNlbnRlcjtnYXA6MTZweDttYXJnaW4tYm90dG9tOjEycHg7cGFkZGluZzoxMHB4O2JhY2tncm91bmQ6I2Y4ZjlmYTtib3JkZXItcmFkaXVzOjhweCI+CiAgICAgICAgICAgIDxsYWJlbCBzdHlsZT0iZGlzcGxheTpmbGV4O2FsaWduLWl0ZW1zOmNlbnRlcjtnYXA6NnB4O2N1cnNvcjpwb2ludGVyO21hcmdpbjowIj48aW5wdXQgdHlwZT0iY2hlY2tib3giIGlkPSJwcm9jLWFubmVlIiBvbmNoYW5nZT0idmFyIGQ9dGhpcy5jaGVja2VkO2RvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcm9jLXdzJykuZGlzYWJsZWQ9ZDtkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJvYy13ZScpLmRpc2FibGVkPWQ7ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Byb2Mtd3MnKS5zdHlsZS5vcGFjaXR5PWQ/Jy40JzonMSc7ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Byb2Mtd2UnKS5zdHlsZS5vcGFjaXR5PWQ/Jy40JzonMSc7Ij4gPHNwYW4gc3R5bGU9ImZvbnQtc2l6ZTouODVyZW07Zm9udC13ZWlnaHQ6NjAwIj5Ub3V0ZSBsJ2FubsOpZTwvc3Bhbj48L2xhYmVsPgogICAgICAgICAgICA8ZGl2IHN0eWxlPSJkaXNwbGF5OmZsZXg7YWxpZ24taXRlbXM6Y2VudGVyO2dhcDo2cHgiPgogICAgICAgICAgICAgICAgPGxhYmVsIHN0eWxlPSJmb250LXNpemU6LjhyZW07Y29sb3I6IzY2NjttYXJnaW46MCI+U2VtYWluZXMgOjwvbGFiZWw+CiAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0ibnVtYmVyIiBpZD0icHJvYy13cyIgY2xhc3M9ImZvcm0tY29udHJvbCIgcGxhY2Vob2xkZXI9IkTDqWJ1dCIgc3R5bGU9IndpZHRoOjgwcHgiIG1pbj0iMSIgbWF4PSI1MyI+CiAgICAgICAgICAgICAgICA8c3BhbiBzdHlsZT0iY29sb3I6I2NjYyI+4oaSPC9zcGFuPgogICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9Im51bWJlciIgaWQ9InByb2Mtd2UiIGNsYXNzPSJmb3JtLWNvbnRyb2wiIHBsYWNlaG9sZGVyPSJGaW4iIHN0eWxlPSJ3aWR0aDo4MHB4IiBtaW49IjEiIG1heD0iNTMiPgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICA8L2Rpdj4KICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWZ1bGwiIHN0eWxlPSJtYXJnaW4tYm90dG9tOjEycHgiPgogICAgICAgICAgICA8bGFiZWwgc3R5bGU9ImZvbnQtc2l6ZTouODVyZW07Zm9udC13ZWlnaHQ6NjAwO2NvbG9yOnZhcigtLXByaW1hcnkpIj48aSBjbGFzcz0iZmFzIGZhLWZpbGUtYWx0Ij48L2k+IENvbnRlbnUgLyBEZXNjcmlwdGlvbjwvbGFiZWw+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9InJ0ZS13cmFwIj48ZGl2IGNsYXNzPSJydGUtYmFyIj4KPGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9ImRvY3VtZW50LmV4ZWNDb21tYW5kKCdib2xkJykiIHRpdGxlPSJHcmFzIj48Yj5HPC9iPjwvYnV0dG9uPgo8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0iZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2l0YWxpYycpIiB0aXRsZT0iSXRhbGlxdWUiPjxpPkk8L2k+PC9idXR0b24+CjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJkb2N1bWVudC5leGVjQ29tbWFuZCgndW5kZXJsaW5lJykiIHRpdGxlPSJTb3VsaWduw6kiPjx1PlM8L3U+PC9idXR0b24+CjxzcGFuIGNsYXNzPSJydGUtc2VwIj48L3NwYW4+CjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJkb2N1bWVudC5leGVjQ29tbWFuZCgnaW5zZXJ0VW5vcmRlcmVkTGlzdCcpIiB0aXRsZT0iTGlzdGUgw6AgcHVjZXMiPjxpIGNsYXNzPSJmYXMgZmEtbGlzdC11bCI+PC9pPjwvYnV0dG9uPgo8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0iZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2luc2VydE9yZGVyZWRMaXN0JykiIHRpdGxlPSJMaXN0ZSBudW3DqXJvdMOpZSI+PGkgY2xhc3M9ImZhcyBmYS1saXN0LW9sIj48L2k+PC9idXR0b24+CjwvZGl2PjxkaXYgaWQ9InByb2MtejIiIGNsYXNzPSJkb2MtZWRpdG9yIiBjb250ZW50ZWRpdGFibGU9InRydWUiIHN0eWxlPSJtaW4taGVpZ2h0OjEyMHB4O2ZvbnQtc2l6ZTouODVyZW07cGFkZGluZzoxNXB4Ij48L2Rpdj48L2Rpdj4KICAgICAgICA8L2Rpdj4KICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWZ1bGwiIHN0eWxlPSJtYXJnaW4tYm90dG9tOjEycHgiPgogICAgICAgICAgICA8bGFiZWwgc3R5bGU9ImZvbnQtc2l6ZTouODVyZW07Zm9udC13ZWlnaHQ6NjAwO2NvbG9yOnZhcigtLWFjY2VudCkiPjxpIGNsYXNzPSJmYXMgZmEtc3RpY2t5LW5vdGUiPjwvaT4gTm90ZXMgY29tcGzDqW1lbnRhaXJlczwvbGFiZWw+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9InJ0ZS13cmFwIj48ZGl2IGNsYXNzPSJydGUtYmFyIj4KPGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9ImRvY3VtZW50LmV4ZWNDb21tYW5kKCdib2xkJykiIHRpdGxlPSJHcmFzIj48Yj5HPC9iPjwvYnV0dG9uPgo8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0iZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2l0YWxpYycpIiB0aXRsZT0iSXRhbGlxdWUiPjxpPkk8L2k+PC9idXR0b24+CjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJkb2N1bWVudC5leGVjQ29tbWFuZCgnaW5zZXJ0VW5vcmRlcmVkTGlzdCcpIiB0aXRsZT0iTGlzdGUgw6AgcHVjZXMiPjxpIGNsYXNzPSJmYXMgZmEtbGlzdC11bCI+PC9pPjwvYnV0dG9uPgo8L2Rpdj48ZGl2IGlkPSJwcm9jLXozIiBjbGFzcz0iZG9jLWVkaXRvciIgY29udGVudGVkaXRhYmxlPSJ0cnVlIiBzdHlsZT0ibWluLWhlaWdodDo4MHB4O2ZvbnQtc2l6ZTouODVyZW07cGFkZGluZzoxNXB4Ij48L2Rpdj48L2Rpdj4KICAgICAgICA8L2Rpdj4KICAgICAgICA8ZGl2IHN0eWxlPSJkaXNwbGF5OmZsZXg7anVzdGlmeS1jb250ZW50OnNwYWNlLWJldHdlZW47YWxpZ24taXRlbXM6Y2VudGVyO21hcmdpbi10b3A6MTZweDtwYWRkaW5nLXRvcDoxNHB4O2JvcmRlci10b3A6MXB4IHNvbGlkICNlZWUiPgogICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJtYiBtYi1kZWwiIGlkPSJwcm9jLWRlbC1idG4iIHN0eWxlPSJkaXNwbGF5Om5vbmUiIG9uY2xpY2s9ImRlbFByb2MoKSI+PGkgY2xhc3M9ImZhcyBmYS10cmFzaCI+PC9pPiBTdXBwcmltZXI8L2J1dHRvbj4KICAgICAgICAgICAgPGRpdiBzdHlsZT0iZGlzcGxheTpmbGV4O2dhcDo4cHg7bWFyZ2luLWxlZnQ6YXV0byI+CiAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJtYiBtYi1jIiBvbmNsaWNrPSJjbG9zZVByb2NNb2RhbCgpIj48aSBjbGFzcz0iZmFzIGZhLXRpbWVzIj48L2k+IEFubnVsZXI8L2J1dHRvbj4KICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9Im1iIG1iLW9rIiBvbmNsaWNrPSJzYXZlUHJvYygpIj48aSBjbGFzcz0iZmFzIGZhLXNhdmUiPjwvaT4gRW5yZWdpc3RyZXI8L2J1dHRvbj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgPC9kaXY+CiAgICA8L2Rpdj4KPC9kaXY+Cgo8c2NyaXB0PgogICAgLy8gRGV0ZWN0IGlmIHJ1bm5pbmcgaW5zaWRlIFBJTE9URSB3cmFwcGVyCiAgICBpZiAod2luZG93LnBhcmVudCAhPT0gd2luZG93KSB7CiAgICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuYWRkKCdpbi13cmFwcGVyJyk7CiAgICB9CgogICAgbGV0IGFwcERhdGEgPSB7IAogICAgICAgIHNldHRpbmdzOiB7IHNjaG9vbDogIkx5Y8OpZSIsIHVzZXI6ICJQcm92aXNldXIiLCBsb2dvOiAiIiwgc2lnbmF0dXJlOiAiIiwgY3VzdG9tRW50VHlwZXM6IFtdLCBjdXN0b21SZXVUeXBlczogW10sIHpvbmU6ICJCIiB9LCAKICAgICAgICBlbnRyZXRpZW5zOiBbXSwgcmV1bmlvbnM6IFtdLCBzdWl2aUVsZXZlczogW10sIAogICAgICAgIHRvZG86IHsgdXJnZW50OltdLCBwbGFuOltdLCBwb3NzaWJsZTpbXSwgZGVsZWdhdGU6W10gfSwgCiAgICAgICAgY2FsZW5kYXI6IFtdLAogICAgICAgIGV2ZW50czogW10sCiAgICAgICAgICAgIHByb2NlZHVyZXM6IFtdLAogICAgICAgIGdhbnR0OiBbXQogICAgfTsKICAgIGxldCBjaGFydEluc3RhbmNlcyA9IHt9OwogICAgbGV0IGN1cnJlbnRFZGl0SWQgPSBudWxsOwogICAgbGV0IGN1cnJlbnRFZGl0VHlwZSA9IG51bGw7IAoKICAgIHdpbmRvdy5vbmxvYWQgPSAoKSA9PiB7CiAgICAgICAgbG9hZERhdGEoKTsKICAgICAgICByZXNldEFsbERhdGVzKCk7CiAgICAgICAgaW5pdERvY1RlbXBsYXRlcygpOwogICAgICAgIHJlbmRlclRvZG8oKTsgY2hlY2tEYWlseVRhc2tzKCk7IHVwZGF0ZVByZXZpZXdzKCk7IHN3aXRjaE1lbnUoJ21lbnUyJyk7IGFwcGx5U2VwYXJhdG9ycygpOwogICAgICAgIGxvYWRDdXN0b21UeXBlcygpOwogICAgfTsKCiAgICBmdW5jdGlvbiByZXNldEFsbERhdGVzKCkgewogICAgICAgIGNvbnN0IHRvZGF5ID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpLnNwbGl0KCdUJylbMF07CiAgICAgICAgWydlbnQtZGF0ZScsJ3JldS1kYXRlJywnZGlyLWRhdGUnLCdzdWl2aS1kYXRlJywnY2FsLWRhdGUnXS5mb3JFYWNoKGlkID0+IHsgY29uc3QgZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCk7IGlmKGVsKSBlbC52YWx1ZSA9IHRvZGF5OyB9KTsKICAgIH0KCiAgICAKICAgIC8vIOKVkOKVkOKVkCBTQVVWRUdBUkRFIEZJQ0hJRVIgTE9DQUwg4pWQ4pWQ4pWQCiAgICB2YXIgX2ZpbGVIYW5kbGUgPSBudWxsOwogICAgdmFyIF9kaXJIYW5kbGUgPSBudWxsOwoKICAgIGZ1bmN0aW9uIHN0b3JlRGlySGFuZGxlKGhhbmRsZSl7CiAgICAgICAgb3BlbkhhbmRsZURCKCkudGhlbihmdW5jdGlvbihkYil7CiAgICAgICAgICAgIHZhciB0eD1kYi50cmFuc2FjdGlvbignaGFuZGxlcycsJ3JlYWR3cml0ZScpOwogICAgICAgICAgICB0eC5vYmplY3RTdG9yZSgnaGFuZGxlcycpLnB1dChoYW5kbGUsJ3NhdmVEaXInKTsKICAgICAgICB9KS5jYXRjaChmdW5jdGlvbigpe30pOwogICAgfQogICAgZnVuY3Rpb24gZ2V0U3RvcmVkRGlySGFuZGxlKCl7CiAgICAgICAgcmV0dXJuIG9wZW5IYW5kbGVEQigpLnRoZW4oZnVuY3Rpb24oZGIpewogICAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSl7CiAgICAgICAgICAgICAgICB2YXIgdHg9ZGIudHJhbnNhY3Rpb24oJ2hhbmRsZXMnLCdyZWFkb25seScpOwogICAgICAgICAgICAgICAgdmFyIHJxPXR4Lm9iamVjdFN0b3JlKCdoYW5kbGVzJykuZ2V0KCdzYXZlRGlyJyk7CiAgICAgICAgICAgICAgICBycS5vbnN1Y2Nlc3M9ZnVuY3Rpb24oKXtyZXNvbHZlKHJxLnJlc3VsdHx8bnVsbCk7fTsKICAgICAgICAgICAgICAgIHJxLm9uZXJyb3I9ZnVuY3Rpb24oKXtyZXNvbHZlKG51bGwpO307CiAgICAgICAgICAgIH0pOwogICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uKCl7cmV0dXJuIG51bGw7fSk7CiAgICB9CgogICAgLy8gSW5kZXhlZERCIHBvdXIgcGVyc2lzdGVyIGxlIGZpbGVIYW5kbGUgZW50cmUgc2Vzc2lvbnMKICAgIGZ1bmN0aW9uIG9wZW5IYW5kbGVEQigpewogICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLHJlamVjdCl7CiAgICAgICAgICAgIHZhciBycT1pbmRleGVkREIub3BlbignY2FkaXJfaGFuZGxlcycsMSk7CiAgICAgICAgICAgIHJxLm9udXBncmFkZW5lZWRlZD1mdW5jdGlvbihlKXtlLnRhcmdldC5yZXN1bHQuY3JlYXRlT2JqZWN0U3RvcmUoJ2hhbmRsZXMnKTt9OwogICAgICAgICAgICBycS5vbnN1Y2Nlc3M9ZnVuY3Rpb24oZSl7cmVzb2x2ZShlLnRhcmdldC5yZXN1bHQpO307CiAgICAgICAgICAgIHJxLm9uZXJyb3I9ZnVuY3Rpb24oKXtyZWplY3QoKTt9OwogICAgICAgIH0pOwogICAgfQogICAgZnVuY3Rpb24gc3RvcmVIYW5kbGUoaGFuZGxlKXsKICAgICAgICBvcGVuSGFuZGxlREIoKS50aGVuKGZ1bmN0aW9uKGRiKXsKICAgICAgICAgICAgdmFyIHR4PWRiLnRyYW5zYWN0aW9uKCdoYW5kbGVzJywncmVhZHdyaXRlJyk7CiAgICAgICAgICAgIHR4Lm9iamVjdFN0b3JlKCdoYW5kbGVzJykucHV0KGhhbmRsZSwnc2F2ZUZpbGUnKTsKICAgICAgICB9KS5jYXRjaChmdW5jdGlvbigpe30pOwogICAgfQogICAgZnVuY3Rpb24gZ2V0U3RvcmVkSGFuZGxlKCl7CiAgICAgICAgcmV0dXJuIG9wZW5IYW5kbGVEQigpLnRoZW4oZnVuY3Rpb24oZGIpewogICAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSl7CiAgICAgICAgICAgICAgICB2YXIgdHg9ZGIudHJhbnNhY3Rpb24oJ2hhbmRsZXMnLCdyZWFkb25seScpOwogICAgICAgICAgICAgICAgdmFyIHJxPXR4Lm9iamVjdFN0b3JlKCdoYW5kbGVzJykuZ2V0KCdzYXZlRmlsZScpOwogICAgICAgICAgICAgICAgcnEub25zdWNjZXNzPWZ1bmN0aW9uKCl7cmVzb2x2ZShycS5yZXN1bHR8fG51bGwpO307CiAgICAgICAgICAgICAgICBycS5vbmVycm9yPWZ1bmN0aW9uKCl7cmVzb2x2ZShudWxsKTt9OwogICAgICAgICAgICB9KTsKICAgICAgICB9KS5jYXRjaChmdW5jdGlvbigpe3JldHVybiBudWxsO30pOwogICAgfQogICAgZnVuY3Rpb24gY2xlYXJTdG9yZWRIYW5kbGUoKXsKICAgICAgICBvcGVuSGFuZGxlREIoKS50aGVuKGZ1bmN0aW9uKGRiKXsKICAgICAgICAgICAgdmFyIHR4PWRiLnRyYW5zYWN0aW9uKCdoYW5kbGVzJywncmVhZHdyaXRlJyk7CiAgICAgICAgICAgIHR4Lm9iamVjdFN0b3JlKCdoYW5kbGVzJykuZGVsZXRlKCdzYXZlRmlsZScpOwogICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uKCl7fSk7CiAgICB9CgogICAgLy8gQ2hvaXNpciB1biBmaWNoaWVyIGRlIHNhdXZlZ2FyZGUKICAgIGFzeW5jIGZ1bmN0aW9uIHBpY2tTYXZlRmlsZSgpewogICAgICAgIHRyeXsKICAgICAgICAgICAgLy8gQ2hvaXNpciB1biBkb3NzaWVyCiAgICAgICAgICAgIHZhciBkaXJIYW5kbGU9YXdhaXQgd2luZG93LnNob3dEaXJlY3RvcnlQaWNrZXIoe21vZGU6J3JlYWR3cml0ZSd9KTsKICAgICAgICAgICAgLy8gQ3LDqWVyIG91IG91dnJpciBsZSBmaWNoaWVyIGRhbnMgY2UgZG9zc2llcgogICAgICAgICAgICB2YXIgZmlsZUhhbmRsZT1hd2FpdCBkaXJIYW5kbGUuZ2V0RmlsZUhhbmRsZSgnY2FkaXJfZGF0YS5qc29uJyx7Y3JlYXRlOnRydWV9KTsKICAgICAgICAgICAgX2ZpbGVIYW5kbGU9ZmlsZUhhbmRsZTsKICAgICAgICAgICAgX2RpckhhbmRsZT1kaXJIYW5kbGU7CiAgICAgICAgICAgIHN0b3JlSGFuZGxlKGZpbGVIYW5kbGUpOwogICAgICAgICAgICBzdG9yZURpckhhbmRsZShkaXJIYW5kbGUpOwogICAgICAgICAgICBhd2FpdCB3cml0ZVRvRmlsZSgpOwogICAgICAgICAgICB1cGRhdGVGaWxlVUkoKTsKICAgICAgICB9Y2F0Y2goZSl7CiAgICAgICAgICAgIGlmKGUubmFtZSE9PSdBYm9ydEVycm9yJykgYWxlcnQoJ0VycmV1ciA6ICcrZS5tZXNzYWdlKTsKICAgICAgICB9CiAgICB9CgogICAgLy8gQXVzc2kgcGVybWV0dHJlIGRlIGNob2lzaXIgdW4gZmljaGllciBleGlzdGFudAogICAgYXN5bmMgZnVuY3Rpb24gcGlja0V4aXN0aW5nRmlsZSgpewogICAgICAgIHRyeXsKICAgICAgICAgICAgdmFyIGhhbmRsZXM9YXdhaXQgd2luZG93LnNob3dPcGVuRmlsZVBpY2tlcih7CiAgICAgICAgICAgICAgICB0eXBlczpbe2Rlc2NyaXB0aW9uOidKU09OJyxhY2NlcHQ6eydhcHBsaWNhdGlvbi9qc29uJzpbJy5qc29uJ119fV0KICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHZhciBoYW5kbGU9aGFuZGxlc1swXTsKICAgICAgICAgICAgX2ZpbGVIYW5kbGU9aGFuZGxlOwogICAgICAgICAgICBzdG9yZUhhbmRsZShoYW5kbGUpOwogICAgICAgICAgICAvLyBDaGFyZ2VyIGxlcyBkb25uw6llcyBkZXB1aXMgbGUgZmljaGllcgogICAgICAgICAgICB2YXIgbG9hZGVkPWF3YWl0IGxvYWRGcm9tRmlsZSgpOwogICAgICAgICAgICB1cGRhdGVGaWxlVUkoKTsKICAgICAgICAgICAgaWYobG9hZGVkKXtsb2NhdGlvbi5yZWxvYWQoKTt9CiAgICAgICAgfWNhdGNoKGUpewogICAgICAgICAgICBpZihlLm5hbWUhPT0nQWJvcnRFcnJvcicpIGFsZXJ0KCdFcnJldXIgOiAnK2UubWVzc2FnZSk7CiAgICAgICAgfQogICAgfQoKICAgIC8vIMOJY3JpcmUgZGFucyBsZSBmaWNoaWVyIGNob2lzaQogICAgYXN5bmMgZnVuY3Rpb24gd3JpdGVUb0ZpbGUoKXsKICAgICAgICBpZighX2ZpbGVIYW5kbGUpcmV0dXJuOwogICAgICAgIHRyeXsKICAgICAgICAgICAgdmFyIHdyaXRhYmxlPWF3YWl0IF9maWxlSGFuZGxlLmNyZWF0ZVdyaXRhYmxlKCk7CiAgICAgICAgICAgIGF3YWl0IHdyaXRhYmxlLndyaXRlKEpTT04uc3RyaW5naWZ5KGFwcERhdGEsbnVsbCwyKSk7CiAgICAgICAgICAgIGF3YWl0IHdyaXRhYmxlLmNsb3NlKCk7CiAgICAgICAgfWNhdGNoKGUpewogICAgICAgICAgICBjb25zb2xlLndhcm4oJ8OJY3JpdHVyZSBmaWNoaWVyIMOpY2hvdcOpZTonLGUpOwogICAgICAgICAgICAvLyBTaSBwZXJtaXNzaW9uIHJlZnVzw6llLCB0ZW50ZXIgZGUgcmVkZW1hbmRlcgogICAgICAgICAgICBpZihlLm5hbWU9PT0nTm90QWxsb3dlZEVycm9yJyl7CiAgICAgICAgICAgICAgICB0cnl7CiAgICAgICAgICAgICAgICAgICAgdmFyIHBlcm09YXdhaXQgX2ZpbGVIYW5kbGUucmVxdWVzdFBlcm1pc3Npb24oe21vZGU6J3JlYWR3cml0ZSd9KTsKICAgICAgICAgICAgICAgICAgICBpZihwZXJtPT09J2dyYW50ZWQnKXsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHcyPWF3YWl0IF9maWxlSGFuZGxlLmNyZWF0ZVdyaXRhYmxlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHcyLndyaXRlKEpTT04uc3RyaW5naWZ5KGFwcERhdGEsbnVsbCwyKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHcyLmNsb3NlKCk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfWNhdGNoKGUyKXtjb25zb2xlLndhcm4oJ1Blcm1pc3Npb24gcmVmdXPDqWU6JyxlMik7fQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQoKICAgIC8vIENoYXJnZXIgZGVwdWlzIGxlIGZpY2hpZXIKICAgIGFzeW5jIGZ1bmN0aW9uIGxvYWRGcm9tRmlsZSgpewogICAgICAgIGlmKCFfZmlsZUhhbmRsZSlyZXR1cm4gZmFsc2U7CiAgICAgICAgdHJ5ewogICAgICAgICAgICB2YXIgcGVybT1hd2FpdCBfZmlsZUhhbmRsZS5xdWVyeVBlcm1pc3Npb24oe21vZGU6J3JlYWR3cml0ZSd9KTsKICAgICAgICAgICAgaWYocGVybSE9PSdncmFudGVkJyl7CiAgICAgICAgICAgICAgICBwZXJtPWF3YWl0IF9maWxlSGFuZGxlLnJlcXVlc3RQZXJtaXNzaW9uKHttb2RlOidyZWFkd3JpdGUnfSk7CiAgICAgICAgICAgICAgICBpZihwZXJtIT09J2dyYW50ZWQnKXJldHVybiBmYWxzZTsKICAgICAgICAgICAgfQogICAgICAgICAgICB2YXIgZmlsZT1hd2FpdCBfZmlsZUhhbmRsZS5nZXRGaWxlKCk7CiAgICAgICAgICAgIHZhciB0ZXh0PWF3YWl0IGZpbGUudGV4dCgpOwogICAgICAgICAgICB2YXIgZGF0YT1KU09OLnBhcnNlKHRleHQpOwogICAgICAgICAgICBhcHBEYXRhPWRhdGE7CiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdwZXJkaXJfcGlsb3RlX3YxMCcsSlNPTi5zdHJpbmdpZnkoYXBwRGF0YSkpOwogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9Y2F0Y2goZSl7CiAgICAgICAgICAgIGNvbnNvbGUud2FybignTGVjdHVyZSBmaWNoaWVyIMOpY2hvdcOpZTonLGUpOwogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQogICAgfQoKICAgIC8vIETDqWxpZXIgbGUgZmljaGllcgogICAgZnVuY3Rpb24gdW5saW5rRmlsZSgpewogICAgICAgIGlmKGNvbmZpcm0oJ0TDqWxpZXIgbGUgZG9zc2llciBkZSBzYXV2ZWdhcmRlID9cbkxlcyBkb25uw6llcyByZXN0ZXJvbnQgZGFucyBsZSBuYXZpZ2F0ZXVyLicpKXsKICAgICAgICAgICAgX2ZpbGVIYW5kbGU9bnVsbDsKICAgICAgICAgICAgX2RpckhhbmRsZT1udWxsOwogICAgICAgICAgICBjbGVhclN0b3JlZEhhbmRsZSgpOwogICAgICAgICAgICBvcGVuSGFuZGxlREIoKS50aGVuKGZ1bmN0aW9uKGRiKXt2YXIgdHg9ZGIudHJhbnNhY3Rpb24oJ2hhbmRsZXMnLCdyZWFkd3JpdGUnKTt0eC5vYmplY3RTdG9yZSgnaGFuZGxlcycpLmRlbGV0ZSgnc2F2ZURpcicpO30pLmNhdGNoKGZ1bmN0aW9uKCl7fSk7CiAgICAgICAgICAgIHVwZGF0ZUZpbGVVSSgpOwogICAgICAgIH0KICAgIH0KCiAgICAvLyBNaXNlIMOgIGpvdXIgZGUgbCdhZmZpY2hhZ2UKICAgIGZ1bmN0aW9uIHVwZGF0ZUZpbGVVSSgpewogICAgICAgIHZhciBlbD1kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmlsZS1saW5rLXN0YXR1cycpOwogICAgICAgIHZhciBidG49ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpbGUtdW5saW5rLWJ0bicpOwogICAgICAgIGlmKCFlbClyZXR1cm47CiAgICAgICAgaWYoX2ZpbGVIYW5kbGUpewogICAgICAgICAgICB2YXIgZGlyTmFtZT1fZGlySGFuZGxlP19kaXJIYW5kbGUubmFtZSsnLyc6Jyc7CiAgICAgICAgICAgIGVsLmlubmVySFRNTD0nPGkgY2xhc3M9ImZhcyBmYS1jaGVjay1jaXJjbGUiIHN0eWxlPSJjb2xvcjojMjJDNTVFIj48L2k+IDxzdHJvbmc+JytkaXJOYW1lK19maWxlSGFuZGxlLm5hbWUrJzwvc3Ryb25nPiA8c3BhbiBzdHlsZT0iY29sb3I6IzIyQzU1RTtmb250LXNpemU6LjdyZW0iPihzYXV2ZWdhcmRlIGF1dG9tYXRpcXVlKTwvc3Bhbj4nOwogICAgICAgICAgICBpZihidG4pYnRuLnN0eWxlLmRpc3BsYXk9J2lubGluZS1mbGV4JzsKICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgZWwuaW5uZXJIVE1MPSc8aSBjbGFzcz0iZmFzIGZhLXVubGluayIgc3R5bGU9ImNvbG9yOiNhYWEiPjwvaT4gPHNwYW4gc3R5bGU9ImNvbG9yOiM5OTkiPkF1Y3VuIGRvc3NpZXIgc8OpbGVjdGlvbm7DqTwvc3Bhbj4nOwogICAgICAgICAgICBpZihidG4pYnRuLnN0eWxlLmRpc3BsYXk9J25vbmUnOwogICAgICAgIH0KICAgIH0KCiAgICAvLyBSZXN0YXVyZXIgbGUgaGFuZGxlIGF1IGTDqW1hcnJhZ2UKICAgIGFzeW5jIGZ1bmN0aW9uIHJlc3RvcmVGaWxlSGFuZGxlKCl7CiAgICAgICAgaWYoIXdpbmRvdy5zaG93RGlyZWN0b3J5UGlja2VyJiYhd2luZG93LnNob3dTYXZlRmlsZVBpY2tlcilyZXR1cm47CiAgICAgICAgdmFyIGRoPWF3YWl0IGdldFN0b3JlZERpckhhbmRsZSgpOwogICAgICAgIGlmKGRoKV9kaXJIYW5kbGU9ZGg7CiAgICAgICAgdmFyIGhhbmRsZT1hd2FpdCBnZXRTdG9yZWRIYW5kbGUoKTsKICAgICAgICBpZihoYW5kbGUpewogICAgICAgICAgICBfZmlsZUhhbmRsZT1oYW5kbGU7CiAgICAgICAgICAgIHVwZGF0ZUZpbGVVSSgpOwogICAgICAgICAgICAvLyBUZW50ZXIgZGUgY2hhcmdlciBsZXMgZG9ubsOpZXMgZHUgZmljaGllciAocGx1cyByw6ljZW50ZXMgPykKICAgICAgICAgICAgdHJ5ewogICAgICAgICAgICAgICAgdmFyIHBlcm09YXdhaXQgaGFuZGxlLnF1ZXJ5UGVybWlzc2lvbih7bW9kZToncmVhZHdyaXRlJ30pOwogICAgICAgICAgICAgICAgaWYocGVybT09PSdncmFudGVkJyl7CiAgICAgICAgICAgICAgICAgICAgdmFyIGZpbGU9YXdhaXQgaGFuZGxlLmdldEZpbGUoKTsKICAgICAgICAgICAgICAgICAgICB2YXIgdGV4dD1hd2FpdCBmaWxlLnRleHQoKTsKICAgICAgICAgICAgICAgICAgICB2YXIgZmlsZURhdGE9SlNPTi5wYXJzZSh0ZXh0KTsKICAgICAgICAgICAgICAgICAgICAvLyBDb21wYXJlciBsZXMgdGltZXN0YW1wcyBwb3VyIHByZW5kcmUgbGUgcGx1cyByw6ljZW50CiAgICAgICAgICAgICAgICAgICAgdmFyIGZpbGVNb2Q9ZmlsZS5sYXN0TW9kaWZpZWR8fDA7CiAgICAgICAgICAgICAgICAgICAgdmFyIGxvY2FsU3RyPWxvY2FsU3RvcmFnZS5nZXRJdGVtKCdwZXJkaXJfcGlsb3RlX3YxMCcpOwogICAgICAgICAgICAgICAgICAgIGlmKGxvY2FsU3RyKXsKICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgbGUgZmljaGllciBlc3QgcGx1cyByw6ljZW50LCBjaGFyZ2VyIGRlcHVpcyBsZSBmaWNoaWVyCiAgICAgICAgICAgICAgICAgICAgICAgIGFwcERhdGE9ZmlsZURhdGE7CiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdwZXJkaXJfcGlsb3RlX3YxMCcsSlNPTi5zdHJpbmdpZnkoYXBwRGF0YSkpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfWNhdGNoKGUpe2NvbnNvbGUubG9nKCdSZXN0YXVyYXRpb24gYXV0bzogZW4gYXR0ZW50ZSBkZSBwZXJtaXNzaW9uIHV0aWxpc2F0ZXVyJyk7fQogICAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBzYXZlRGF0YSgpewogICAgICAgIHRyeXtsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgncGVyZGlyX3BpbG90ZV92MTAnLEpTT04uc3RyaW5naWZ5KGFwcERhdGEpKTtpZihfZmlsZUhhbmRsZSl3cml0ZVRvRmlsZSgpO31jYXRjaChlKXtjb25zb2xlLmVycm9yKCdzYXZlRGF0YTonLGUpO30KICAgICAgICB0cnl7dmFyIG1zZz1kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYXV0by1zYXZlLW1zZycpO2lmKG1zZyl7bXNnLnN0eWxlLmRpc3BsYXk9J2ZsZXgnO3NldFRpbWVvdXQoZnVuY3Rpb24oKXttc2cuc3R5bGUuZGlzcGxheT0nbm9uZSc7fSwxMDAwKTt9fWNhdGNoKGUyKXt9CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIGxvYWREYXRhKCkgeyAKICAgICAgICBjb25zdCBkID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3BlcmRpcl9waWxvdGVfdjEwJyk7IAogICAgICAgIC8vIE1pZ3JhdGlvbiBkZXB1aXMgdjkuOSBzaSBuw6ljZXNzYWlyZQogICAgICAgIGNvbnN0IG9sZCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdwZXJkaXJfcGlsb3RlX3Y5Jyk7CiAgICAgICAgaWYoZCkgewogICAgICAgICAgICBhcHBEYXRhID0gSlNPTi5wYXJzZShkKTsgCiAgICAgICAgfSBlbHNlIGlmIChvbGQpIHsKICAgICAgICAgICAgYXBwRGF0YSA9IEpTT04ucGFyc2Uob2xkKTsKICAgICAgICAgICAgc2F2ZURhdGEoKTsgLy8gU2F2ZSBhcyBuZXcgdmVyc2lvbgogICAgICAgIH0KICAgICAgICAKICAgICAgICAvLyBJbml0IHN0cnVjdHVyZXMgaWYgbWlzc2luZwogICAgICAgIGlmKCFhcHBEYXRhLnRvZG8pIGFwcERhdGEudG9kbyA9IHsgdXJnZW50OltdLCBwbGFuOltdLCBwb3NzaWJsZTpbXSwgZGVsZWdhdGU6W10gfTsKICAgICAgICBpZighYXBwRGF0YS5zZXR0aW5ncy5jdXN0b21FbnRUeXBlcykgYXBwRGF0YS5zZXR0aW5ncy5jdXN0b21FbnRUeXBlcyA9IFtdOwogICAgICAgIGlmKCFhcHBEYXRhLnNldHRpbmdzLmN1c3RvbVJldVR5cGVzKSBhcHBEYXRhLnNldHRpbmdzLmN1c3RvbVJldVR5cGVzID0gW107CiAgICB9CgogICAgZnVuY3Rpb24gYWRkQ3VzdG9tVHlwZShzZWxlY3RJZCkgewogICAgICAgIGNvbnN0IG5ld1R5cGUgPSBwcm9tcHQoIkVudHJleiBsZSBub3V2ZWF1IHR5cGUgOiIpOwogICAgICAgIGlmIChuZXdUeXBlKSB7CiAgICAgICAgICAgIGNvbnN0IHNlbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHNlbGVjdElkKTsKICAgICAgICAgICAgY29uc3Qgb3B0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnb3B0aW9uJyk7CiAgICAgICAgICAgIG9wdC50ZXh0ID0gbmV3VHlwZTsKICAgICAgICAgICAgc2VsLmFkZChvcHQsIHNlbFtzZWwubGVuZ3RoIC0gMV0pOwogICAgICAgICAgICBzZWwudmFsdWUgPSBuZXdUeXBlOwogICAgICAgICAgICBpZihzZWxlY3RJZCA9PT0gJ2VudC10eXBlJykgYXBwRGF0YS5zZXR0aW5ncy5jdXN0b21FbnRUeXBlcy5wdXNoKG5ld1R5cGUpOwogICAgICAgICAgICBlbHNlIGFwcERhdGEuc2V0dGluZ3MuY3VzdG9tUmV1VHlwZXMucHVzaChuZXdUeXBlKTsKICAgICAgICAgICAgc2F2ZURhdGEoKTsKICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gbG9hZEN1c3RvbVR5cGVzKCkgewogICAgICAgIGNvbnN0IGVudFNlbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlbnQtdHlwZScpOwogICAgICAgIGFwcERhdGEuc2V0dGluZ3MuY3VzdG9tRW50VHlwZXMuZm9yRWFjaCh0ID0+IHsgaWYoIUFycmF5LmZyb20oZW50U2VsLm9wdGlvbnMpLnNvbWUobyA9PiBvLnRleHQgPT09IHQpKSB7IGNvbnN0IG9wdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ29wdGlvbicpOyBvcHQudGV4dCA9IHQ7IGVudFNlbC5hZGQob3B0LCBlbnRTZWxbZW50U2VsLmxlbmd0aC0xXSk7IH0gfSk7CiAgICAgICAgY29uc3QgcmV1U2VsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JldS10eXBlJyk7CiAgICAgICAgYXBwRGF0YS5zZXR0aW5ncy5jdXN0b21SZXVUeXBlcy5mb3JFYWNoKHQgPT4geyBpZighQXJyYXkuZnJvbShyZXVTZWwub3B0aW9ucykuc29tZShvID0+IG8udGV4dCA9PT0gdCkpIHsgY29uc3Qgb3B0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnb3B0aW9uJyk7IG9wdC50ZXh0ID0gdDsgcmV1U2VsLmFkZChvcHQsIHJldVNlbFtyZXVTZWwubGVuZ3RoLTFdKTsgfSB9KTsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gc3dpdGNoTWVudShpZCkgewogICAgICAgIGlmKGlkID09PSAnbWVudTgnKSByZXNldEVkaXRNb2RlKCk7CiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLm1lbnUtaXRlbScpLmZvckVhY2goZWw9PmVsLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpKTsKICAgICAgICB2YXIgbWkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1tZW51PSInK2lkKyciXScpOwogICAgICAgIGlmKG1pKSBtaS5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTsKICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuc2VjdGlvbicpLmZvckVhY2goZWw9PmVsLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpKTsKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCkuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7CiAgICAgICAgY29uc3QgdCA9IHsnbWVudTEnOidQYXJhbcOodHJlcycsJ21lbnUyJzonVG8gRG8gTGlzdCcsJ21lbnUzJzonQ2FsZW5kcmllcicsJ21lbnU0JzonQ29uc2VpbCBkZSBEaXJlY3Rpb24nLCdtZW51NSc6J1N1aXZpIMOJbMOodmUnLCdtZW51Nic6J0VudHJldGllbnMnLCdtZW51Nyc6J1LDqXVuaW9ucycsJ21lbnU4JzonSGlzdG9yaXF1ZScsJ21lbnU5JzonVGFibGVhdSBkZSBCb3JkJywnbWVudTEwJzonQWN0aXZpdMOpcyBww6lkYWdvZ2lxdWVzJywnbWVudTExJzonw4ljaMOpYW5jZXMnLCdtZW51MTInOidQcm9jw6lkdXJlcyd9OwogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjdXJyZW50LXRpdGxlJykuaW5uZXJUZXh0ID0gdFtpZF0gfHwgJ0NBRElSJzsKICAgICAgICB0cnkgeyBpZiAod2luZG93LnBhcmVudCAhPT0gd2luZG93KSB3aW5kb3cucGFyZW50LmRvY3VtZW50LnRpdGxlID0gKHRbaWRdIHx8ICdDQURJUicpICsgJyDigJQgUElMT1RFIFN1aXRlJzsgfSBjYXRjaChlKSB7fQogICAgICAgIGlmKGlkPT09J21lbnUyJykgeyByZW5kZXJUb2RvKCk7IGNoZWNrRGFpbHlUYXNrcygpOyB9CiAgICAgICAgaWYoaWQ9PT0nbWVudTMnKSB7IHJlbmRlclVuaWZpZWRDYWwoKTsgfQogICAgICAgIGlmKGlkPT09J21lbnU4JykgcmVuZGVySGlzdG9yeSgpOwogICAgICAgIGlmKGlkPT09J21lbnU5JykgcmVuZGVyRGFzaGJvYXJkKCk7CiAgICAgICAgaWYoaWQ9PT0nbWVudTEnKXtsb2FkU2V0dGluZ3NVSSgpO3VwZGF0ZUZpbGVVSSgpO30KICAgICAgICBpZihpZD09PSdtZW51MTAnKSByZW5kZXJFdmVudHMoKTsKICAgICAgICBpZihpZD09PSdtZW51MTInKXthdXRvUmVzZXREb25lKCk7cmVuZGVyUHJvY2VkdXJlcygpO30KICAgICAgICBpZihpZD09PSdtZW51MTEnKSB7IGF1dG9SZXNldERvbmUoKTsgaWYoIXdpbmRvdy5fZ2FudHRSZWFkeSkgaW5pdEdhbnR0VmlldygpOyBndFRvZGF5KCk7IH0KICAgIH0KCiAgICAKICAgIC8vIOKVkOKVkOKVkCBURU1QTEFURVMgUEFSIETDiUZBVVQg4pWQ4pWQ4pWQCiAgICB2YXIgREVGQVVMVF9URU1QTEFURVMgPSB7CiAgICAgICAgZW50OiAnPHA+PHN0cm9uZz5PYmpldCA6PC9zdHJvbmc+IC4uLjwvcD48cD48c3Ryb25nPsOJY2hhbmdlcyA6PC9zdHJvbmc+PC9wPjx1bD48bGk+Li4uPC9saT48L3VsPjxwPjxzdHJvbmc+RMOpY2lzaW9ucyA6PC9zdHJvbmc+PC9wPjxwPi4uLjwvcD4nLAogICAgICAgIHJldTogJzxwPjxzdHJvbmc+T3JkcmUgZHUgam91ciA6PC9zdHJvbmc+IC4uLjwvcD48cD48c3Ryb25nPkTDqWxpYsOpcmF0aW9ucyA6PC9zdHJvbmc+PC9wPjx1bD48bGk+Li4uPC9saT48L3VsPicsCiAgICAgICAgZGlyOiAnPHA+PHN0cm9uZz5UaMOobWVzIGFib3Jkw6lzIDo8L3N0cm9uZz48L3A+PHVsPjxsaT5Qw6lkYWdvZ2llIDogLi4uPC9saT48bGk+VmllIFNjb2xhaXJlIDogLi4uPC9saT48bGk+U8OpY3VyaXTDqSA6IC4uLjwvbGk+PGxpPkRpdmVycyA6IC4uLjwvbGk+PC91bD4nLAogICAgICAgIHN1aXZpOiAnPHA+PHN0cm9uZz5TaXR1YXRpb25zIMOpbMOodmVzIDo8L3N0cm9uZz48L3A+PHVsPjxsaT5bTk9NIFByw6lub21dIDogLi4uPC9saT48L3VsPicKICAgIH07CgogICAgZnVuY3Rpb24gbG9hZFRlbXBsYXRlc1VJKCkgewogICAgICAgIHZhciB0cGxzID0gYXBwRGF0YS5zZXR0aW5ncy50ZW1wbGF0ZXMgfHwgREVGQVVMVF9URU1QTEFURVM7CiAgICAgICAgdmFyIGVsOwogICAgICAgIGVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RwbC1lbnQnKTsgaWYgKGVsKSBlbC5pbm5lckhUTUwgPSB0cGxzLmVudCB8fCBERUZBVUxUX1RFTVBMQVRFUy5lbnQ7CiAgICAgICAgZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndHBsLXJldScpOyBpZiAoZWwpIGVsLmlubmVySFRNTCA9IHRwbHMucmV1IHx8IERFRkFVTFRfVEVNUExBVEVTLnJldTsKICAgICAgICBlbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0cGwtZGlyJyk7IGlmIChlbCkgZWwuaW5uZXJIVE1MID0gdHBscy5kaXIgfHwgREVGQVVMVF9URU1QTEFURVMuZGlyOwogICAgICAgIGVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RwbC1zdWl2aScpOyBpZiAoZWwpIGVsLmlubmVySFRNTCA9IHRwbHMuc3VpdmkgfHwgREVGQVVMVF9URU1QTEFURVMuc3Vpdmk7CiAgICB9CgogICAgZnVuY3Rpb24gc2F2ZVRlbXBsYXRlcygpIHsKICAgICAgICBpZiAoIWFwcERhdGEuc2V0dGluZ3MpIGFwcERhdGEuc2V0dGluZ3MgPSB7fTsKICAgICAgICBhcHBEYXRhLnNldHRpbmdzLnRlbXBsYXRlcyA9IHsKICAgICAgICAgICAgZW50OiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndHBsLWVudCcpLmlubmVySFRNTCwKICAgICAgICAgICAgcmV1OiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndHBsLXJldScpLmlubmVySFRNTCwKICAgICAgICAgICAgZGlyOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndHBsLWRpcicpLmlubmVySFRNTCwKICAgICAgICAgICAgc3Vpdmk6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0cGwtc3VpdmknKS5pbm5lckhUTUwKICAgICAgICB9OwogICAgICAgIHNhdmVEYXRhKCk7CiAgICAgICAgYWxlcnQoJ01vZMOobGVzIGVucmVnaXN0csOpcyAhJyk7CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0VGVtcGxhdGUodHlwZSkgewogICAgICAgIHZhciB0cGxzID0gKGFwcERhdGEuc2V0dGluZ3MgJiYgYXBwRGF0YS5zZXR0aW5ncy50ZW1wbGF0ZXMpID8gYXBwRGF0YS5zZXR0aW5ncy50ZW1wbGF0ZXMgOiBERUZBVUxUX1RFTVBMQVRFUzsKICAgICAgICByZXR1cm4gdHBsc1t0eXBlXSB8fCBERUZBVUxUX1RFTVBMQVRFU1t0eXBlXSB8fCAnJzsKICAgIH0KCiAgICBmdW5jdGlvbiBpbml0RG9jVGVtcGxhdGVzKCkgewogICAgICAgIGNvbnN0IGhlYWRlciA9IGA8ZGl2IGNsYXNzPSJuby1wcmludCIgc3R5bGU9Im1hcmdpbi1ib3R0b206MjBweDsgYm9yZGVyLWJvdHRvbToxcHggc29saWQgI2VlZTsgcGFkZGluZy1ib3R0b206MTBweDsiPjxzdHJvbmc+JHthcHBEYXRhLnNldHRpbmdzLnNjaG9vbH08L3N0cm9uZz4gfCBEaXJlY3Rpb248L2Rpdj5gOwogICAgICAgIGNvbnN0IGVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlbnQtY29udGVudScpOyBjb25zdCByZXUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmV1LWNvbnRlbnUnKTsKICAgICAgICBjb25zdCBkaXJjID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Rpci1jb250ZW51Jyk7IGNvbnN0IGRpcm4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGlyLW5vdGVzJyk7CiAgICAgICAgY29uc3Qgc3VpID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N1aXZpLWNvbnRlbnUnKTsKCiAgICAgICAgaWYoZW50ICYmIGVudC5pbm5lclRleHQudHJpbSgpPT09IiIpIGVudC5pbm5lckhUTUwgPSBoZWFkZXIgKyBnZXRUZW1wbGF0ZSgnZW50Jyk7CiAgICAgICAgaWYocmV1ICYmIHJldS5pbm5lclRleHQudHJpbSgpPT09IiIpIHJldS5pbm5lckhUTUwgPSBoZWFkZXIgKyBnZXRUZW1wbGF0ZSgncmV1Jyk7CiAgICAgICAgaWYoZGlyYyAmJiBkaXJjLmlubmVyVGV4dC50cmltKCk9PT0iIikgZGlyYy5pbm5lckhUTUwgPSBnZXRUZW1wbGF0ZSgnZGlyJyk7CiAgICAgICAgaWYoZGlybiAmJiBkaXJuLmlubmVyVGV4dC50cmltKCk9PT0iIikgZGlybi5pbm5lckhUTUwgPSBgPHA+PGVtPk5vdGVzIGRlIHPDqWFuY2UuLi48L2VtPjwvcD5gOwogICAgICAgIGlmKHN1aSAmJiBzdWkuaW5uZXJUZXh0LnRyaW0oKT09PSIiKSBzdWkuaW5uZXJIVE1MID0gaGVhZGVyICsgZ2V0VGVtcGxhdGUoJ3N1aXZpJyk7CiAgICB9CgogICAgZnVuY3Rpb24gcmF6UGFnZShtb2RlKSB7CiAgICAgICAgaWYoIWNvbmZpcm0oIkVmZmFjZXIgdG91dCBsZSBjb250ZW51IGRlIGNldHRlIHBhZ2UgPyIpKSByZXR1cm47CiAgICAgICAgcmVzZXRFZGl0TW9kZSgpOwogICAgICAgIGNvbnN0IHRvZGF5ID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpLnNwbGl0KCdUJylbMF07CiAgICAgICAgaWYobW9kZSA9PT0gJ0RJUicpIHsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Rpci1kYXRlJykudmFsdWUgPSB0b2RheTsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Rpci1wYXJ0cycpLnZhbHVlID0gIiI7IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkaXItY29udGVudScpLmlubmVySFRNTCA9ICIiOyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGlyLW5vdGVzJykuaW5uZXJIVE1MID0gIiI7IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkaXItYXR0YWNobWVudHMnKS5pbm5lckhUTUwgPSAiIjsgfQogICAgICAgIGVsc2UgaWYgKG1vZGUgPT09ICdTVUlWSScpIHsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N1aXZpLWRhdGUnKS52YWx1ZSA9IHRvZGF5OyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3VpdmktcGFydHMnKS52YWx1ZSA9ICIiOyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3VpdmktY2xhc3NlcycpLnZhbHVlID0gIiI7IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzdWl2aS1jb250ZW51JykuaW5uZXJIVE1MID0gIiI7IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzdWl2aS1hdHRhY2htZW50cycpLmlubmVySFRNTCA9ICIiOyB9CiAgICAgICAgZWxzZSBpZiAobW9kZSA9PT0gJ0VOVCcpIHsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VudC1kYXRlJykudmFsdWUgPSB0b2RheTsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VudC1vYmpldCcpLnZhbHVlID0gIiI7IHJlc2V0TXVsdGkoJ2VudC1zdHVkZW50cy1jb250YWluZXInLCAnZW50LXN0dWRlbnQnLCAnTm9tIMOJbMOodmUnKTsgcmVzZXRNdWx0aSgnZW50LXRlYWNoZXJzLWNvbnRhaW5lcicsICdlbnQtdGVhY2hlcicsICdOb20gUGVyc29ubmVsJyk7IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlbnQtY29udGVudScpLmlubmVySFRNTCA9ICIiOyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZW50LWF0dGFjaG1lbnRzJykuaW5uZXJIVE1MID0gIiI7IH0KICAgICAgICBlbHNlIGlmIChtb2RlID09PSAnUkVVJykgeyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmV1LWRhdGUnKS52YWx1ZSA9IHRvZGF5OyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmV1LW9kaicpLnZhbHVlID0gIiI7IHJlc2V0TXVsdGkoJ3JldS1zdHVkZW50cy1jb250YWluZXInLCAncmV1LXN0dWRlbnQnLCAnTm9tIMOJbMOodmUnKTsgcmVzZXRNdWx0aSgncmV1LXRlYWNoZXJzLWNvbnRhaW5lcicsICdyZXUtdGVhY2hlcicsICdOb20gUGVyc29ubmVsJyk7IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXUtY29udGVudScpLmlubmVySFRNTCA9ICIiOyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmV1LWF0dGFjaG1lbnRzJykuaW5uZXJIVE1MID0gIiI7IH0KICAgICAgICBpbml0RG9jVGVtcGxhdGVzKCk7CiAgICB9CgogICAgLy8gLS0tIFRPRE8gTE9HSUMgKElNUFJPVkVEIFJFT1JERVJJTkcpIC0tLQogICAgbGV0IGRyYWdnZWRJdGVtSWQgPSBudWxsOwogICAgbGV0IHNvdXJjZUNvbHVtbiA9IG51bGw7CiAgICAKICAgIGZ1bmN0aW9uIGFkZFRvZG8odHlwZSkgeyBjb25zdCB0PWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGB0b2RvLWlucHV0LSR7dHlwZX1gKS52YWx1ZS50cmltKCk7IGlmKHQpeyBhcHBEYXRhLnRvZG9bdHlwZV0ucHVzaCh7aWQ6RGF0ZS5ub3coKS50b1N0cmluZygpLCB0ZXh0OnQsIGlzRnJvbUFnZW5kYTpmYWxzZX0pOyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChgdG9kby1pbnB1dC0ke3R5cGV9YCkudmFsdWU9IiI7IHNhdmVEYXRhKCk7IHJlbmRlclRvZG8oKTsgfSB9CiAgICBmdW5jdGlvbiByZW1vdmVUb2RvKHR5cGUsIGlkKSB7IGFwcERhdGEudG9kb1t0eXBlXSA9IGFwcERhdGEudG9kb1t0eXBlXS5maWx0ZXIodCA9PiB0LmlkLnRvU3RyaW5nKCkgIT09IGlkLnRvU3RyaW5nKCkpOyBzYXZlRGF0YSgpOyByZW5kZXJUb2RvKCk7IH0KICAgIGZ1bmN0aW9uIHVwZGF0ZVRvZG9UZXh0KHR5cGUsIGlkLCBuZXdUZXh0KSB7IGNvbnN0IGl0ZW0gPSBhcHBEYXRhLnRvZG9bdHlwZV0uZmluZCh0ID0+IHQuaWQudG9TdHJpbmcoKSA9PT0gaWQudG9TdHJpbmcoKSk7IGlmKGl0ZW0pIHsgaXRlbS50ZXh0ID0gbmV3VGV4dDsgc2F2ZURhdGEoKTsgfSB9CiAgICBmdW5jdGlvbiBoYW5kbGVFbnRlcihlLHQpeyBpZihlLmtleT09PSdFbnRlcicpIGFkZFRvZG8odCk7IH0KICAgIAogICAgZnVuY3Rpb24gZHJhZ1RvZG8oZSwgaWQsIHNvdXJjZUNvbCkgeyAKICAgICAgICBkcmFnZ2VkSXRlbUlkID0gaWQudG9TdHJpbmcoKTsgCiAgICAgICAgc291cmNlQ29sdW1uID0gc291cmNlQ29sOyAKICAgICAgICBlLmRhdGFUcmFuc2Zlci5zZXREYXRhKCJ0ZXh0L3BsYWluIiwgaWQpOyAKICAgICAgICBlLmRhdGFUcmFuc2Zlci5lZmZlY3RBbGxvd2VkID0gIm1vdmUiOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBhbGxvd0Ryb3AoZSkgeyAKICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7IAogICAgICAgIGNvbnN0IHRhcmdldEl0ZW0gPSBlLnRhcmdldC5jbG9zZXN0KCcudG9kby1pdGVtJyk7CiAgICAgICAgaWYgKHRhcmdldEl0ZW0pIHsKICAgICAgICAgICAgdGFyZ2V0SXRlbS5jbGFzc0xpc3QuYWRkKCdkcmFnLW92ZXItaXRlbScpOwogICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcudG9kby1pdGVtJykuZm9yRWFjaChlbCA9PiB7CiAgICAgICAgICAgICAgICBpZihlbCAhPT0gdGFyZ2V0SXRlbSkgZWwuY2xhc3NMaXN0LnJlbW92ZSgnZHJhZy1vdmVyLWl0ZW0nKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgZS5jdXJyZW50VGFyZ2V0LmNsYXNzTGlzdC5hZGQoImRyYWctb3ZlciIpOyAKICAgICAgICB9CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIGRyYWdMZWF2ZShlKSB7IAogICAgICAgIGUuY3VycmVudFRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKCJkcmFnLW92ZXIiKTsKICAgICAgICBpZihlLnRhcmdldC5jbG9zZXN0KCcudG9kby1pdGVtJykpIGUudGFyZ2V0LmNsb3Nlc3QoJy50b2RvLWl0ZW0nKS5jbGFzc0xpc3QucmVtb3ZlKCdkcmFnLW92ZXItaXRlbScpOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBkcm9wKGUsIHRhcmdldENvbCkgewogICAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcudG9kby1saXN0JykuZm9yRWFjaChlbCA9PiBlbC5jbGFzc0xpc3QucmVtb3ZlKCdkcmFnLW92ZXInKSk7CiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnRvZG8taXRlbScpLmZvckVhY2goZWwgPT4gZWwuY2xhc3NMaXN0LnJlbW92ZSgnZHJhZy1vdmVyLWl0ZW0nKSk7CgogICAgICAgIGlmIChzb3VyY2VDb2x1bW4gPT09ICdBR0VOREFfU09VUkNFJykgewogICAgICAgICAgICBjb25zdCBhZ1Rhc2sgPSBhcHBEYXRhLmNhbGVuZGFyLmZpbmQoYyA9PiBjLmlkLnRvU3RyaW5nKCkgPT09IGRyYWdnZWRJdGVtSWQpOwogICAgICAgICAgICBpZihhZ1Rhc2spIGFwcERhdGEudG9kb1t0YXJnZXRDb2xdLnB1c2goe2lkOiBEYXRlLm5vdygpLnRvU3RyaW5nKCksIHRleHQ6IGFnVGFzay50YXNrLCBpc0Zyb21BZ2VuZGE6IHRydWV9KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBjb25zdCBzb3VyY2VMaXN0ID0gYXBwRGF0YS50b2RvW3NvdXJjZUNvbHVtbl07CiAgICAgICAgICAgIGNvbnN0IGl0ZW1JZHggPSBzb3VyY2VMaXN0LmZpbmRJbmRleCh0ID0+IHQuaWQudG9TdHJpbmcoKSA9PT0gZHJhZ2dlZEl0ZW1JZCk7CiAgICAgICAgICAgIGlmKGl0ZW1JZHggPT09IC0xKSByZXR1cm47CiAgICAgICAgICAgIGNvbnN0IFttb3ZlZEl0ZW1dID0gc291cmNlTGlzdC5zcGxpY2UoaXRlbUlkeCwgMSk7CgogICAgICAgICAgICBjb25zdCBkcm9wVGFyZ2V0ID0gZS50YXJnZXQuY2xvc2VzdCgnLnRvZG8taXRlbScpOwogICAgICAgICAgICBpZihkcm9wVGFyZ2V0ICYmIHNvdXJjZUNvbHVtbiA9PT0gdGFyZ2V0Q29sKSB7CiAgICAgICAgICAgICAgICBjb25zdCB0YXJnZXRJZCA9IGRyb3BUYXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLWlkJyk7CiAgICAgICAgICAgICAgICBjb25zdCB0YXJnZXRJZHggPSBhcHBEYXRhLnRvZG9bdGFyZ2V0Q29sXS5maW5kSW5kZXgodCA9PiB0LmlkLnRvU3RyaW5nKCkgPT09IHRhcmdldElkKTsKICAgICAgICAgICAgICAgIGlmKHRhcmdldElkeCA+IC0xKSB7CiAgICAgICAgICAgICAgICAgICAgYXBwRGF0YS50b2RvW3RhcmdldENvbF0uc3BsaWNlKHRhcmdldElkeCwgMCwgbW92ZWRJdGVtKTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgYXBwRGF0YS50b2RvW3RhcmdldENvbF0ucHVzaChtb3ZlZEl0ZW0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgIGFwcERhdGEudG9kb1t0YXJnZXRDb2xdLnB1c2gobW92ZWRJdGVtKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBzYXZlRGF0YSgpOyByZW5kZXJUb2RvKCk7CiAgICB9CgogICAgZnVuY3Rpb24gcmVuZGVyVG9kbygpIHsKICAgICAgICBbJ3VyZ2VudCcsJ3BsYW4nLCdwb3NzaWJsZScsJ2RlbGVnYXRlJ10uZm9yRWFjaChjb2wgPT4gewogICAgICAgICAgICBjb25zdCBsaXN0RWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChgbGlzdC0ke2NvbH1gKTsgaWYoIWxpc3RFbCkgcmV0dXJuOyBsaXN0RWwuaW5uZXJIVE1MID0gIiI7CiAgICAgICAgICAgIGFwcERhdGEudG9kb1tjb2xdLmZvckVhY2goaXRlbSA9PiB7CiAgICAgICAgICAgICAgICBsaXN0RWwuaW5uZXJIVE1MICs9IGA8bGkgY2xhc3M9InRvZG8taXRlbSAke2l0ZW0uaXNGcm9tQWdlbmRhPydmcm9tLWFnZW5kYSc6Jyd9IiBkYXRhLWlkPSIke2l0ZW0uaWR9IiBkcmFnZ2FibGU9InRydWUiIG9uZHJhZ3N0YXJ0PSJkcmFnVG9kbyhldmVudCwgJyR7aXRlbS5pZH0nLCAnJHtjb2x9JykiIG9uZHJhZ292ZXI9ImFsbG93RHJvcChldmVudCkiIG9uZHJhZ2xlYXZlPSJkcmFnTGVhdmUoZXZlbnQpIj4ke2l0ZW0uaXNGcm9tQWdlbmRhPyc8aSBjbGFzcz0iZmFzIGZhLWJlbGwiIHN0eWxlPSJjb2xvcjojZjFjNDBmO21hcmdpbi1yaWdodDo4cHg7Ij48L2k+JzonJ308c3BhbiBjb250ZW50ZWRpdGFibGU9InRydWUiIG9uYmx1cj0idXBkYXRlVG9kb1RleHQoJyR7Y29sfScsJyR7aXRlbS5pZH0nLHRoaXMuaW5uZXJUZXh0KSI+JHtpdGVtLnRleHR9PC9zcGFuPjxkaXYgY2xhc3M9InRvZG8tYWN0aW9ucyI+PGkgY2xhc3M9ImZhcyBmYS10cmFzaCIgb25jbGljaz0icmVtb3ZlVG9kbygnJHtjb2x9JywnJHtpdGVtLmlkfScpIj48L2k+PC9kaXY+PC9saT5gOwogICAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgIH0KCiAgICAvLyAtLS0gQ0FMRU5EQVIgLS0tCiAgICBmdW5jdGlvbiBhZGRDYWxlbmRhckV2ZW50KCkgewogICAgICAgIGNvbnN0IGRhdGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2FsLWRhdGUnKS52YWx1ZTsgY29uc3QgdGFzayA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjYWwtdGFzaycpLnZhbHVlLnRyaW0oKTsKICAgICAgICBpZighZGF0ZSB8fCAhdGFzaykgcmV0dXJuIGFsZXJ0KCJTYWlzaWUgaW5jb21wbMOodGUiKTsKICAgICAgICBhcHBEYXRhLmNhbGVuZGFyLnB1c2goe2lkOkRhdGUubm93KCkudG9TdHJpbmcoKSwgZGF0ZSwgdGFza30pOyBhcHBEYXRhLmNhbGVuZGFyLnNvcnQoKGEsYik9PiBuZXcgRGF0ZShhLmRhdGUpIC0gbmV3IERhdGUoYi5kYXRlKSk7CiAgICAgICAgc2F2ZURhdGEoKTsgcmVuZGVyQ2FsZW5kYXIoKTsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NhbC10YXNrJykudmFsdWU9IiI7CiAgICB9CiAgICBmdW5jdGlvbiByZW5kZXJDYWxlbmRhcigpIHsKICAgICAgICB2YXIgbGlzdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjYWxlbmRhci1saXN0Jyk7CiAgICAgICAgaWYgKCFsaXN0KSByZXR1cm47CiAgICAgICAgbGlzdC5pbm5lckhUTUwgPSAnJzsKICAgICAgICB2YXIgdG9kYXkgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkuc3BsaXQoJ1QnKVswXTsKICAgICAgICB2YXIgdXBjb21pbmcgPSBhcHBEYXRhLmNhbGVuZGFyLmZpbHRlcihmdW5jdGlvbihjKXsgcmV0dXJuIGMudGFzayAmJiBjLnRhc2sudHJpbSgpLmxlbmd0aCA+IDMgJiYgYy5kYXRlID49IHRvZGF5OyB9KTsKCiAgICAgICAgLy8gRnVzaW9ubmVyIGxlcyDDqXbDqW5lbWVudHMgR29vZ2xlIENhbGVuZGFyIHNpIGFjdGl2w6kKICAgICAgICBpZiAoX2djYWxFdmVudHMgJiYgX2djYWxFdmVudHMubGVuZ3RoKSB7CiAgICAgICAgICAgIF9nY2FsRXZlbnRzLmZvckVhY2goZnVuY3Rpb24oZ2UpIHsKICAgICAgICAgICAgICAgIGlmIChnZS5kYXRlID49IHRvZGF5ICYmIGdlLnRpdGxlICYmIGdlLnRpdGxlLnRyaW0oKS5sZW5ndGggPiAzKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGV4aXN0cyA9IHVwY29taW5nLnNvbWUoZnVuY3Rpb24odSl7IHJldHVybiB1LnRhc2sgPT09IGdlLnRpdGxlICYmIHUuZGF0ZSA9PT0gZ2UuZGF0ZTsgfSk7CiAgICAgICAgICAgICAgICAgICAgaWYgKCFleGlzdHMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdXBjb21pbmcucHVzaCh7aWQ6J2djYWxfJytnZS5pZCwgZGF0ZTpnZS5kYXRlLCB0YXNrOiBnZS50aXRsZSwgZ2NhbDp0cnVlLCBjb2xvcjpnZS5jb2xvciwgY2FsTmFtZTpnZS5jYWxOYW1lLCB0aW1lOmdlLnRpbWV9KTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgIH0KCiAgICAgICAgdXBjb21pbmcuc29ydChmdW5jdGlvbihhLGIpeyByZXR1cm4gYS5kYXRlLmxvY2FsZUNvbXBhcmUoYi5kYXRlKTsgfSk7CiAgICAgICAgaWYoIXVwY29taW5nLmxlbmd0aCkgeyBsaXN0LmlubmVySFRNTCA9ICc8dHI+PHRkIGNvbHNwYW49IjQiIHN0eWxlPSJ0ZXh0LWFsaWduOmNlbnRlcjtjb2xvcjojYmJiO3BhZGRpbmc6MjBweCI+QXVjdW4gw6l2w6luZW1lbnQgw6AgdmVuaXI8L3RkPjwvdHI+JzsgfQogICAgICAgIHVwY29taW5nLmZvckVhY2goZnVuY3Rpb24oYykgewogICAgICAgICAgICB2YXIgaXNUb2RheSA9IGMuZGF0ZSA9PT0gdG9kYXk7CiAgICAgICAgICAgIHZhciBjbHMgPSBpc1RvZGF5ID8gJ3Jvdy10b2RheScgOiAnJzsKICAgICAgICAgICAgdmFyIHNyYyA9IGMuZ2NhbCA/ICc8c3BhbiBzdHlsZT0iY29sb3I6IzQyODVmNDtmb250LXNpemU6LjY1cmVtIiB0aXRsZT0iR29vZ2xlIj48aSBjbGFzcz0iZmFiIGZhLWdvb2dsZSI+PC9pPjwvc3Bhbj4nIDogJyc7CiAgICAgICAgICAgIHZhciB0aW1lU3RyID0gYy50aW1lID8gJzxzbWFsbCBzdHlsZT0iY29sb3I6Izg4OCI+ICcrYy50aW1lKyc8L3NtYWxsPicgOiAnJzsKICAgICAgICAgICAgdmFyIGFjdGlvbnMgPSAnJzsKICAgICAgICAgICAgaWYgKCFjLmdjYWwpIHsKICAgICAgICAgICAgICAgIGFjdGlvbnMgPSAnPGJ1dHRvbiBjbGFzcz0iYnRuIGJ0bi1zbSIgc3R5bGU9ImJhY2tncm91bmQ6bm9uZTtjb2xvcjojMzQ5OGRiO2JvcmRlcjpub25lO3BhZGRpbmc6MnB4IDRweCIgb25jbGljaz0iZWRpdENhbEV2ZW50KFwnJytjLmlkKydcJykiPjxpIGNsYXNzPSJmYXMgZmEtcGVuIj48L2k+PC9idXR0b24+JzsKICAgICAgICAgICAgICAgIGFjdGlvbnMgKz0gJzxidXR0b24gY2xhc3M9ImJ0biBidG4tZGFuZ2VyIGJ0bi1zbSIgb25jbGljaz0iZGVsZXRlQ2FsRXZlbnQoXCcnK2MuaWQrJ1wnKSI+PGkgY2xhc3M9ImZhcyBmYS10cmFzaCI+PC9pPjwvYnV0dG9uPic7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgbGlzdC5pbm5lckhUTUwgKz0gJzx0ciBjbGFzcz0iJytjbHMrJyI+PHRkIHN0eWxlPSJ3aGl0ZS1zcGFjZTpub3dyYXAiPicrbmV3IERhdGUoYy5kYXRlKS50b0xvY2FsZURhdGVTdHJpbmcoJ2ZyLUZSJykrJzwvdGQ+PHRkPicrc3JjKycgJytjLnRhc2srdGltZVN0cisnPC90ZD48dGQgc3R5bGU9IndoaXRlLXNwYWNlOm5vd3JhcDt0ZXh0LWFsaWduOnJpZ2h0Ij4nK2FjdGlvbnMrJzwvdGQ+PC90cj4nOwogICAgICAgIH0pOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBlZGl0Q2FsRXZlbnQoaWQpIHsKICAgICAgICB2YXIgaXRlbSA9IGFwcERhdGEuY2FsZW5kYXIuZmluZChmdW5jdGlvbihjKXsgcmV0dXJuIGMuaWQudG9TdHJpbmcoKSA9PT0gaWQudG9TdHJpbmcoKTsgfSk7CiAgICAgICAgaWYgKCFpdGVtKSByZXR1cm47CiAgICAgICAgdmFyIG5ld1Rhc2sgPSBwcm9tcHQoJ01vZGlmaWVyIGxcJ8OpdsOpbmVtZW50IDonLCBpdGVtLnRhc2spOwogICAgICAgIGlmIChuZXdUYXNrID09PSBudWxsKSByZXR1cm47CiAgICAgICAgdmFyIG5ld0RhdGUgPSBwcm9tcHQoJ0RhdGUgKEFBQUEtTU0tSkopIDonLCBpdGVtLmRhdGUpOwogICAgICAgIGlmIChuZXdEYXRlID09PSBudWxsKSByZXR1cm47CiAgICAgICAgaXRlbS50YXNrID0gbmV3VGFzazsKICAgICAgICBpdGVtLmRhdGUgPSBuZXdEYXRlOwogICAgICAgIHNhdmVEYXRhKCk7IHJlbmRlckNhbGVuZGFyKCk7IGNoZWNrRGFpbHlUYXNrcygpOwogICAgfQoKICAgIGZ1bmN0aW9uIGRlbGV0ZUNhbEV2ZW50KGlkKSB7CiAgICAgICAgYXBwRGF0YS5jYWxlbmRhciA9IGFwcERhdGEuY2FsZW5kYXIuZmlsdGVyKGZ1bmN0aW9uKGMpIHsgcmV0dXJuIGMuaWQudG9TdHJpbmcoKSAhPT0gaWQudG9TdHJpbmcoKTsgfSk7CiAgICAgICAgc2F2ZURhdGEoKTsgcmVuZGVyQ2FsZW5kYXIoKTsgY2hlY2tEYWlseVRhc2tzKCk7CiAgICB9CiAgICBmdW5jdGlvbiBjaGVja0RhaWx5VGFza3MoKSB7CiAgICAgICAgdmFyIHRvZGF5ID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpLnNwbGl0KCdUJylbMF07CiAgICAgICAgdmFyIGxpc3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndG9kby10b2RheS1saXN0Jyk7CiAgICAgICAgaWYgKCFsaXN0KSByZXR1cm47CiAgICAgICAgbGlzdC5pbm5lckhUTUwgPSAnJzsKICAgICAgICB2YXIgYyA9IDA7CiAgICAgICAgYXBwRGF0YS5jYWxlbmRhci5maWx0ZXIoZnVuY3Rpb24odCl7IHJldHVybiB0LnRhc2sgJiYgdC50YXNrLnRyaW0oKS5sZW5ndGggPiAzOyB9KS5mb3JFYWNoKGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgaWYgKHQuZGF0ZSA9PT0gdG9kYXkpIHsKICAgICAgICAgICAgICAgIGMrKzsKICAgICAgICAgICAgICAgIGxpc3QuaW5uZXJIVE1MICs9ICc8ZGl2IGNsYXNzPSJ0b2RvLXRvZGF5LWl0ZW0iIGRyYWdnYWJsZT0idHJ1ZSIgb25kcmFnc3RhcnQ9ImRyYWdUb2RvKGV2ZW50LCBcJycgKyB0LmlkICsgJ1wnLCBcJ0FHRU5EQV9TT1VSQ0VcJykiPjxzcGFuPjxpIGNsYXNzPSJmYXMgZmEtYmVsbCIgc3R5bGU9ImNvbG9yOnJlZDsgbWFyZ2luLXJpZ2h0OjVweDsiPjwvaT4nICsgdC50YXNrICsgJzwvc3Bhbj4gPHNtYWxsIHN0eWxlPSJjb2xvcjojOTk5Ij48aSBjbGFzcz0iZmFzIGZhLWFycm93cy1hbHQiPjwvaT4gR2xpc3Nlcjwvc21hbGw+PC9kaXY+JzsKICAgICAgICAgICAgfQogICAgICAgIH0pOwogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0b2RvLXRvZGF5LXpvbmUnKS5jbGFzc0xpc3QudG9nZ2xlKCdhY3RpdmUnLCBjID4gMCk7CiAgICB9CgogICAgLy8gLS0tIEFUVEFDSE1FTlRTICYgSEVMUEVSUyAtLS0KICAgIGZ1bmN0aW9uIGFkZE11bHRpUm93KGNJZCwgY2wsIHBoMSkgewogICAgICAgIHZhciBjb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChjSWQpOwogICAgICAgIHZhciByb3cgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgICAgICByb3cuY2xhc3NOYW1lID0gJ211bHRpLXJvdyAnICsgY2w7CiAgICAgICAgdmFyIGlucCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7CiAgICAgICAgaW5wLnR5cGUgPSAndGV4dCc7IGlucC5jbGFzc05hbWUgPSAnZm9ybS1jb250cm9sIG5hbWUnOyBpbnAucGxhY2Vob2xkZXIgPSBwaDE7CiAgICAgICAgdmFyIGJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpOwogICAgICAgIGJ0bi5jbGFzc05hbWUgPSAnYnRuIGJ0bi1kYW5nZXIgYnRuLWljb24nOwogICAgICAgIGJ0bi5pbm5lckhUTUwgPSAnPGkgY2xhc3M9ImZhcyBmYS10aW1lcyI+PC9pPic7CiAgICAgICAgYnRuLm9uY2xpY2sgPSBmdW5jdGlvbigpIHsgdGhpcy5wYXJlbnRFbGVtZW50LnJlbW92ZSgpOyB9OwogICAgICAgIHJvdy5hcHBlbmRDaGlsZChpbnApOwogICAgICAgIHJvdy5hcHBlbmRDaGlsZChidG4pOwogICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChyb3cpOwogICAgICAgIGlmIChjbC5pbmRleE9mKCdzdHVkZW50JykgPj0gMCB8fCBjbC5pbmRleE9mKCdlbGV2ZScpID49IDApIHsgYXR0YWNoU3R1ZGVudEFDKGlucCk7IH0KICAgICAgICBpZiAoY2wuaW5kZXhPZigndGVhY2hlcicpID49IDApIHsgYXR0YWNoVGVhY2hlckFDKGlucCk7IH0KICAgIH0KICAgIGZ1bmN0aW9uIGdldE11bHRpRGF0YShjSWQsIGNsKSB7IGxldCByZXMgPSBbXTsgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChgIyR7Y0lkfSAuJHtjbH1gKS5mb3JFYWNoKHJvdyA9PiB7IGNvbnN0IG4gPSByb3cucXVlcnlTZWxlY3RvcignLm5hbWUnKS52YWx1ZS50cmltKCk7IGlmKG4pIHJlcy5wdXNoKHtuYW1lOm59KTsgfSk7IHJldHVybiByZXM7IH0KICAgIGZ1bmN0aW9uIHJlc3RvcmVNdWx0aVJvd3MoY0lkLCBjbCwgZGF0YSwgcGgxKSB7IGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGNJZCk7IGlmKCFjb250YWluZXIpIHJldHVybjsgY29udGFpbmVyLmlubmVySFRNTCA9ICIiOyBpZighZGF0YSB8fCBkYXRhLmxlbmd0aCA9PT0gMCkgeyByZXNldE11bHRpKGNJZCwgY2wsIHBoMSk7IHJldHVybjsgfSBkYXRhLmZvckVhY2goZCA9PiB7IGNvbnRhaW5lci5pbm5lckhUTUwgKz0gYDxkaXYgY2xhc3M9Im11bHRpLXJvdyAke2NsfSI+PGlucHV0IHR5cGU9InRleHQiIGNsYXNzPSJmb3JtLWNvbnRyb2wgbmFtZSIgdmFsdWU9IiR7ZC5uYW1lfSIgcGxhY2Vob2xkZXI9IiR7cGgxfSI+PGJ1dHRvbiBjbGFzcz0iYnRuIGJ0bi1kYW5nZXIgYnRuLWljb24iIG9uY2xpY2s9InRoaXMucGFyZW50RWxlbWVudC5yZW1vdmUoKSI+PGkgY2xhc3M9ImZhcyBmYS10aW1lcyI+PC9pPjwvYnV0dG9uPjwvZGl2PmA7IH0pOyB9CiAgICBmdW5jdGlvbiByZXNldE11bHRpKGNJZCwgY2wsIHBoMSkgeyBjb25zdCBjID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoY0lkKTsgaWYoYykgYy5pbm5lckhUTUwgPSBgPGRpdiBjbGFzcz0ibXVsdGktcm93ICR7Y2x9Ij48aW5wdXQgdHlwZT0idGV4dCIgY2xhc3M9ImZvcm0tY29udHJvbCBuYW1lIiBwbGFjZWhvbGRlcj0iJHtwaDF9Ij48YnV0dG9uIGNsYXNzPSJidG4gYnRuLWRhbmdlciBidG4taWNvbiIgb25jbGljaz0idGhpcy5wYXJlbnRFbGVtZW50LnJlbW92ZSgpIj48aSBjbGFzcz0iZmFzIGZhLXRpbWVzIj48L2k+PC9idXR0b24+PC9kaXY+YDsgfQogICAgCiAgICBmdW5jdGlvbiBhZGRBdHRhY2htZW50KGxpc3RJZCwgaW5wdXQpIHsKICAgICAgICBjb25zdCBmaWxlID0gaW5wdXQuZmlsZXNbMF07CiAgICAgICAgaWYoIWZpbGUpIHJldHVybjsKICAgICAgICBpZiAoZmlsZS5zaXplID4gMTUwMDAwKSB7CiAgICAgICAgICAgICBhbGVydCgiRmljaGllciB0cm9wIHZvbHVtaW5ldXggcG91ciBsYSBzYXV2ZWdhcmRlIGxvY2FsZSAoPjE1MGtvKS4gU2V1bCBsZSBub20gZHUgZmljaGllciBzZXJhIGNvbnNlcnbDqSBlbiByw6lmw6lyZW5jZS4iKTsKICAgICAgICAgICAgIGFwcGVuZEF0dGFjaG1lbnRVSShsaXN0SWQsIHtuYW1lOiBmaWxlLm5hbWUsIGRhdGE6IG51bGwsIGlzUmVmOiB0cnVlfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgIGNvbnN0IHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7CiAgICAgICAgICAgICByZWFkZXIub25sb2FkID0gZnVuY3Rpb24oZSkgeyBhcHBlbmRBdHRhY2htZW50VUkobGlzdElkLCB7bmFtZTogZmlsZS5uYW1lLCBkYXRhOiBlLnRhcmdldC5yZXN1bHQsIGlzUmVmOiBmYWxzZX0pOyB9OwogICAgICAgICAgICAgcmVhZGVyLnJlYWRBc0RhdGFVUkwoZmlsZSk7CiAgICAgICAgfQogICAgICAgIGlucHV0LnZhbHVlID0gIiI7CiAgICB9CgogICAgZnVuY3Rpb24gYXBwZW5kQXR0YWNobWVudFVJKGxpc3RJZCwgZmlsZU9iaikgewogICAgICAgIGNvbnN0IHVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQobGlzdElkKTsKICAgICAgICBjb25zdCBsaSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJyk7CiAgICAgICAgbGkuY2xhc3NOYW1lID0gJ2F0dGFjaG1lbnQtaXRlbSc7CiAgICAgICAgbGkuZGF0YXNldC5uYW1lID0gZmlsZU9iai5uYW1lOwogICAgICAgIGxpLmRhdGFzZXQuZGF0YSA9IGZpbGVPYmouZGF0YSB8fCAiIjsKICAgICAgICBsaS5kYXRhc2V0LmlzUmVmID0gZmlsZU9iai5pc1JlZjsKICAgICAgICBjb25zdCBsaW5rID0gZmlsZU9iai5kYXRhID8gYDxhIGhyZWY9IiMiIG9uY2xpY2s9ImRvd25sb2FkQmFzZTY0KCcke2ZpbGVPYmouZGF0YX0nLCAnJHtmaWxlT2JqLm5hbWV9JykiPiR7ZmlsZU9iai5uYW1lfTwvYT5gIDogYDxzcGFuPiR7ZmlsZU9iai5uYW1lfSAoUsOpZsOpcmVuY2Ugc2V1bGUpPC9zcGFuPmA7CiAgICAgICAgbGkuaW5uZXJIVE1MID0gYDxkaXY+PGkgY2xhc3M9ImZhcyBmYS1maWxlIj48L2k+ICR7bGlua308L2Rpdj4gPGkgY2xhc3M9ImZhcyBmYS10cmFzaCIgc3R5bGU9ImNvbG9yOiNlNzRjM2M7IGN1cnNvcjpwb2ludGVyOyIgb25jbGljaz0idGhpcy5wYXJlbnRFbGVtZW50LnJlbW92ZSgpIj48L2k+YDsKICAgICAgICB1bC5hcHBlbmRDaGlsZChsaSk7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIGRvd25sb2FkQmFzZTY0KGJhc2U2NCwgbmFtZSkgewogICAgICAgIGNvbnN0IGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJhIik7CiAgICAgICAgYS5ocmVmID0gYmFzZTY0OwogICAgICAgIGEuZG93bmxvYWQgPSBuYW1lOwogICAgICAgIGEuY2xpY2soKTsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gZ2V0QXR0YWNobWVudHNEYXRhKGxpc3RJZCkgewogICAgICAgIGNvbnN0IHJlcyA9IFtdOwogICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoYCMke2xpc3RJZH0gLmF0dGFjaG1lbnQtaXRlbWApLmZvckVhY2gobGkgPT4gewogICAgICAgICAgICByZXMucHVzaCh7CiAgICAgICAgICAgICAgICBuYW1lOiBsaS5kYXRhc2V0Lm5hbWUsCiAgICAgICAgICAgICAgICBkYXRhOiBsaS5kYXRhc2V0LmRhdGEgPT09ICJudWxsIiB8fCBsaS5kYXRhc2V0LmRhdGEgPT09ICIiID8gbnVsbCA6IGxpLmRhdGFzZXQuZGF0YSwKICAgICAgICAgICAgICAgIGlzUmVmOiBsaS5kYXRhc2V0LmlzUmVmID09PSAidHJ1ZSIKICAgICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICAgICAgcmV0dXJuIHJlczsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gcmVzdG9yZUF0dGFjaG1lbnRzKGxpc3RJZCwgZGF0YSkgewogICAgICAgIGNvbnN0IHVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQobGlzdElkKTsKICAgICAgICB1bC5pbm5lckhUTUwgPSAiIjsKICAgICAgICBpZighZGF0YSkgcmV0dXJuOwogICAgICAgIGRhdGEuZm9yRWFjaChkID0+IGFwcGVuZEF0dGFjaG1lbnRVSShsaXN0SWQsIGQpKTsKICAgIH0KCiAgICBmdW5jdGlvbiByZXNldEVkaXRNb2RlKCkgeyBjdXJyZW50RWRpdElkID0gbnVsbDsgY3VycmVudEVkaXRUeXBlID0gbnVsbDsgWydidG4tc2F2ZS1lbnQnLCdidG4tc2F2ZS1yZXUnLCdidG4tc2F2ZS1kaXInLCdidG4tc2F2ZS1zdWl2aSddLmZvckVhY2goaWQgPT4geyBjb25zdCBiID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpOyBpZihiKSB7IGIuaW5uZXJUZXh0ID0gKGlkLmluY2x1ZGVzKCdkaXInKSB8fCBpZC5pbmNsdWRlcygnc3VpdmknKSkgPyAiRW5yZWdpc3RyZXIgKEhpc3RvcmlxdWUpIiA6ICJFbnJlZ2lzdHJlciI7IGIuY2xhc3NOYW1lID0gYi5pZC5pbmNsdWRlcygnc3VpdmknKSA/ICJidG4gYnRuLWluZm8iIDogKGIuaWQuaW5jbHVkZXMoJ3JldScpID8gImJ0biBidG4tc3VjY2VzcyIgOiAiYnRuIGJ0bi1wcmltYXJ5Iik7IH0gfSk7IH0KICAgIGZ1bmN0aW9uIGFjdGl2YXRlRWRpdE1vZGUodCwgaWQpIHsgY3VycmVudEVkaXRJZCA9IGlkOyBjdXJyZW50RWRpdFR5cGUgPSB0OyBjb25zdCBtID0geydFTlQnOididG4tc2F2ZS1lbnQnLCdSRVUnOididG4tc2F2ZS1yZXUnLCdESVInOididG4tc2F2ZS1kaXInLCdTVUlWSSc6J2J0bi1zYXZlLXN1aXZpJ307IGNvbnN0IGIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChtW3RdKTsgaWYoYikgeyBiLmlubmVyVGV4dCA9ICJNZXR0cmUgw6Agam91ciBsZSBkb2N1bWVudCI7IGIuY2xhc3NOYW1lID0gImJ0biBidG4tdXBkYXRlLW1vZGUiOyB9IH0KCiAgICBmdW5jdGlvbiBsb2FkSXRlbUZvckVkaXQodHlwZSwgaWQpIHsKICAgICAgICBsZXQgaXQ7CiAgICAgICAgaWYodHlwZSA9PT0gJ0VOVCcpIHsKICAgICAgICAgICAgaXQgPSBhcHBEYXRhLmVudHJldGllbnMuZmluZCh4ID0+IHguaWQudG9TdHJpbmcoKSA9PT0gaWQudG9TdHJpbmcoKSk7IGlmKCFpdCkgcmV0dXJuOwogICAgICAgICAgICBzd2l0Y2hNZW51KCdtZW51NicpOyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZW50LWRhdGUnKS52YWx1ZSA9IGl0LmRhdGU7IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlbnQtdHlwZScpLnZhbHVlID0gaXQudHlwZTsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VudC1vYmpldCcpLnZhbHVlID0gaXQub2JqZXQ7IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlbnQtY29udGVudScpLmlubmVySFRNTCA9IGl0LmJvZHk7CiAgICAgICAgICAgIHJlc3RvcmVNdWx0aVJvd3MoJ2VudC1zdHVkZW50cy1jb250YWluZXInLCAnZW50LXN0dWRlbnQnLCBpdC5zdHVkZW50cywgJ05vbSDDiWzDqHZlJyk7IHJlc3RvcmVNdWx0aVJvd3MoJ2VudC10ZWFjaGVycy1jb250YWluZXInLCAnZW50LXRlYWNoZXInLCBpdC50ZWFjaGVycywgJ05vbSBQZXJzb25uZWwnKTsKICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnI2VudC1zdHVkZW50cy1jb250YWluZXIgLm5hbWUnKS5mb3JFYWNoKGF0dGFjaFN0dWRlbnRBQyk7CiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJyNlbnQtdGVhY2hlcnMtY29udGFpbmVyIC5uYW1lJykuZm9yRWFjaChhdHRhY2hUZWFjaGVyQUMpOwogICAgICAgICAgICByZXN0b3JlQXR0YWNobWVudHMoJ2VudC1hdHRhY2htZW50cycsIGl0LmF0dGFjaG1lbnRzKTsKICAgICAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICdSRVUnKSB7CiAgICAgICAgICAgIGl0ID0gYXBwRGF0YS5yZXVuaW9ucy5maW5kKHggPT4geC5pZC50b1N0cmluZygpID09PSBpZC50b1N0cmluZygpKTsgaWYoIWl0KSByZXR1cm47CiAgICAgICAgICAgIGlmKGl0LnR5cGUgPT09ICJSw6l1bmlvbiBkZSBEaXJlY3Rpb24iKSB7IAogICAgICAgICAgICAgICAgc3dpdGNoTWVudSgnbWVudTQnKTsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Rpci1kYXRlJykudmFsdWUgPSBpdC5kYXRlOyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGlyLXBhcnRzJykudmFsdWUgPSBpdC5wYXJ0cyB8fCAiIjsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Rpci1jb250ZW51JykuaW5uZXJIVE1MID0gaXQub2RqOyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGlyLW5vdGVzJykuaW5uZXJIVE1MID0gaXQuY3I7IAogICAgICAgICAgICAgICAgcmVzdG9yZUF0dGFjaG1lbnRzKCdkaXItYXR0YWNobWVudHMnLCBpdC5hdHRhY2htZW50cyk7CiAgICAgICAgICAgICAgICBhY3RpdmF0ZUVkaXRNb2RlKCdESVInLCBpZCk7IHJldHVybjsgCiAgICAgICAgICAgIH0gCiAgICAgICAgICAgIGVsc2UgeyAKICAgICAgICAgICAgICAgIHN3aXRjaE1lbnUoJ21lbnU3Jyk7IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXUtZGF0ZScpLnZhbHVlID0gaXQuZGF0ZTsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JldS10eXBlJykudmFsdWUgPSBpdC50eXBlOyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmV1LW9kaicpLnZhbHVlID0gaXQub2RqOyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmV1LWNvbnRlbnUnKS5pbm5lckhUTUwgPSBpdC5ib2R5OyAKICAgICAgICAgICAgICAgIHJlc3RvcmVNdWx0aVJvd3MoJ3JldS1zdHVkZW50cy1jb250YWluZXInLCAncmV1LXN0dWRlbnQnLCBpdC5zdHVkZW50cywgJ05vbSDDiWzDqHZlJyk7IHJlc3RvcmVNdWx0aVJvd3MoJ3JldS10ZWFjaGVycy1jb250YWluZXInLCAncmV1LXRlYWNoZXInLCBpdC50ZWFjaGVycywgJ05vbSBQZXJzb25uZWwnKTsKICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnI3JldS1zdHVkZW50cy1jb250YWluZXIgLm5hbWUnKS5mb3JFYWNoKGF0dGFjaFN0dWRlbnRBQyk7CiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJyNyZXUtdGVhY2hlcnMtY29udGFpbmVyIC5uYW1lJykuZm9yRWFjaChhdHRhY2hUZWFjaGVyQUMpOyAKICAgICAgICAgICAgICAgIHJlc3RvcmVBdHRhY2htZW50cygncmV1LWF0dGFjaG1lbnRzJywgaXQuYXR0YWNobWVudHMpOwogICAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIGlmICh0eXBlID09PSAnU1VJVkknKSB7CiAgICAgICAgICAgIGl0ID0gYXBwRGF0YS5zdWl2aUVsZXZlcy5maW5kKHggPT4geC5pZC50b1N0cmluZygpID09PSBpZC50b1N0cmluZygpKTsgaWYoIWl0KSByZXR1cm47CiAgICAgICAgICAgIHN3aXRjaE1lbnUoJ21lbnU1Jyk7IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzdWl2aS1kYXRlJykudmFsdWUgPSBpdC5kYXRlOyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3VpdmktcGFydHMnKS52YWx1ZSA9IGl0LnBhcnRpY2lwYW50czsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N1aXZpLWNsYXNzZXMnKS52YWx1ZSA9IGl0LmNsYXNzZXM7IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzdWl2aS1jb250ZW51JykuaW5uZXJIVE1MID0gaXQuYm9keTsKICAgICAgICAgICAgcmVzdG9yZUF0dGFjaG1lbnRzKCdzdWl2aS1hdHRhY2htZW50cycsIGl0LmF0dGFjaG1lbnRzKTsKICAgICAgICB9CiAgICAgICAgYWN0aXZhdGVFZGl0TW9kZSh0eXBlLCBpZCk7CiAgICB9CgogICAgLy8gLS0tIFNBVklORyAtLS0KICAgIGZ1bmN0aW9uIHNhdmVQcmVwRGlyZWN0aW9uKCkgewogICAgICAgIGNvbnN0IGQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGlyLWRhdGUnKS52YWx1ZTsgaWYoIWQpIHJldHVybiBhbGVydCgiRGF0ZSByZXF1aXNlIik7CiAgICAgICAgY29uc3QgbiA9IHsgaWQ6IGN1cnJlbnRFZGl0SWQgfHwgRGF0ZS5ub3coKS50b1N0cmluZygpLCBkYXRlOmQsIHR5cGU6IlLDqXVuaW9uIGRlIERpcmVjdGlvbiIsIG9kajpkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGlyLWNvbnRlbnUnKS5pbm5lckhUTUwsIGNyOmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkaXItbm90ZXMnKS5pbm5lckhUTUwsIHBhcnRzOmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkaXItcGFydHMnKS52YWx1ZSwgYXR0YWNobWVudHM6IGdldEF0dGFjaG1lbnRzRGF0YSgnZGlyLWF0dGFjaG1lbnRzJykgfTsKICAgICAgICBpZihjdXJyZW50RWRpdElkKSB7IGNvbnN0IGlkeCA9IGFwcERhdGEucmV1bmlvbnMuZmluZEluZGV4KHggPT4geC5pZC50b1N0cmluZygpID09PSBjdXJyZW50RWRpdElkLnRvU3RyaW5nKCkpOyBpZihpZHggPiAtMSkgYXBwRGF0YS5yZXVuaW9uc1tpZHhdID0gbjsgfSBlbHNlIHsgYXBwRGF0YS5yZXVuaW9ucy51bnNoaWZ0KG4pOyB9CiAgICAgICAgc2F2ZURhdGEoKTsgcmVzZXRFZGl0TW9kZSgpOyBhbGVydCgiRW5yZWdpc3Ryw6kiKTsgc3dpdGNoTWVudSgnbWVudTgnKTsKICAgIH0KICAgIGZ1bmN0aW9uIHNhdmVTdWl2aUVsZXZlKCkgewogICAgICAgIGNvbnN0IGQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3VpdmktZGF0ZScpLnZhbHVlOyBpZighZCkgcmV0dXJuIGFsZXJ0KCJEYXRlIHJlcXVpc2UiKTsKICAgICAgICBjb25zdCBuID0geyBpZDogY3VycmVudEVkaXRJZCB8fCBEYXRlLm5vdygpLnRvU3RyaW5nKCksIGRhdGU6ZCwgdHlwZTogIlN1aXZpIMOJbMOodmUgLyBQb2ludCBDUEUiLCBwYXJ0aWNpcGFudHM6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzdWl2aS1wYXJ0cycpLnZhbHVlLCBjbGFzc2VzOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3VpdmktY2xhc3NlcycpLnZhbHVlLCBib2R5OiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3VpdmktY29udGVudScpLmlubmVySFRNTCwgYXR0YWNobWVudHM6IGdldEF0dGFjaG1lbnRzRGF0YSgnc3VpdmktYXR0YWNobWVudHMnKSB9OwogICAgICAgIGlmKGN1cnJlbnRFZGl0SWQpIHsgY29uc3QgaWR4ID0gYXBwRGF0YS5zdWl2aUVsZXZlcy5maW5kSW5kZXgoeCA9PiB4LmlkLnRvU3RyaW5nKCkgPT09IGN1cnJlbnRFZGl0SWQudG9TdHJpbmcoKSk7IGlmKGlkeCA+IC0xKSBhcHBEYXRhLnN1aXZpRWxldmVzW2lkeF0gPSBuOyB9IGVsc2UgeyBhcHBEYXRhLnN1aXZpRWxldmVzLnVuc2hpZnQobik7IH0KICAgICAgICBzYXZlRGF0YSgpOyByZXNldEVkaXRNb2RlKCk7IGFsZXJ0KCJFbnJlZ2lzdHLDqSIpOyBzd2l0Y2hNZW51KCdtZW51OCcpOwogICAgfQogICAgZnVuY3Rpb24gc2F2ZUVudHJldGllbigpIHsKICAgICAgICBjb25zdCBkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VudC1kYXRlJykudmFsdWU7IGlmKCFkKSByZXR1cm4gYWxlcnQoIkRhdGUgcmVxdWlzZSIpOwogICAgICAgIGNvbnN0IG4gPSB7aWQ6IGN1cnJlbnRFZGl0SWQgfHwgRGF0ZS5ub3coKS50b1N0cmluZygpLCBkYXRlOmQsIHR5cGU6ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VudC10eXBlJykudmFsdWUsIG9iamV0OmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlbnQtb2JqZXQnKS52YWx1ZSwgYm9keTpkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZW50LWNvbnRlbnUnKS5pbm5lckhUTUwsIHN0dWRlbnRzOmdldE11bHRpRGF0YSgnZW50LXN0dWRlbnRzLWNvbnRhaW5lcicsJ2VudC1zdHVkZW50JyksIHRlYWNoZXJzOmdldE11bHRpRGF0YSgnZW50LXRlYWNoZXJzLWNvbnRhaW5lcicsJ2VudC10ZWFjaGVyJyksIGF0dGFjaG1lbnRzOiBnZXRBdHRhY2htZW50c0RhdGEoJ2VudC1hdHRhY2htZW50cycpfTsKICAgICAgICBpZihjdXJyZW50RWRpdElkKSB7IGNvbnN0IGlkeCA9IGFwcERhdGEuZW50cmV0aWVucy5maW5kSW5kZXgoeCA9PiB4LmlkLnRvU3RyaW5nKCkgPT09IGN1cnJlbnRFZGl0SWQudG9TdHJpbmcoKSk7IGlmKGlkeCA+IC0xKSBhcHBEYXRhLmVudHJldGllbnNbaWR4XSA9IG47IH0gZWxzZSB7IGFwcERhdGEuZW50cmV0aWVucy51bnNoaWZ0KG4pOyB9CiAgICAgICAgc2F2ZURhdGEoKTsgcmVzZXRFZGl0TW9kZSgpOyBhbGVydCgiRW5yZWdpc3Ryw6kiKTsgc3dpdGNoTWVudSgnbWVudTgnKTsKICAgIH0KICAgIGZ1bmN0aW9uIHNhdmVSZXVuaW9uKCkgewogICAgICAgIGNvbnN0IGQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmV1LWRhdGUnKS52YWx1ZTsgaWYoIWQpIHJldHVybiBhbGVydCgiRGF0ZSByZXF1aXNlIik7CiAgICAgICAgY29uc3QgbiA9IHtpZDogY3VycmVudEVkaXRJZCB8fCBEYXRlLm5vdygpLnRvU3RyaW5nKCksIGRhdGU6ZCwgdHlwZTpkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmV1LXR5cGUnKS52YWx1ZSwgb2RqOmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXUtb2RqJykudmFsdWUsIGJvZHk6ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JldS1jb250ZW51JykuaW5uZXJIVE1MLCBzdHVkZW50czpnZXRNdWx0aURhdGEoJ3JldS1zdHVkZW50cy1jb250YWluZXInLCdyZXUtc3R1ZGVudCcpLCB0ZWFjaGVyczpnZXRNdWx0aURhdGEoJ3JldS10ZWFjaGVycy1jb250YWluZXInLCdyZXUtdGVhY2hlcicpLCBhdHRhY2htZW50czogZ2V0QXR0YWNobWVudHNEYXRhKCdyZXUtYXR0YWNobWVudHMnKX07CiAgICAgICAgaWYoY3VycmVudEVkaXRJZCkgeyBjb25zdCBpZHggPSBhcHBEYXRhLnJldW5pb25zLmZpbmRJbmRleCh4ID0+IHguaWQudG9TdHJpbmcoKSA9PT0gY3VycmVudEVkaXRJZC50b1N0cmluZygpKTsgaWYoaWR4ID4gLTEpIGFwcERhdGEucmV1bmlvbnNbaWR4XSA9IG47IH0gZWxzZSB7IGFwcERhdGEucmV1bmlvbnMudW5zaGlmdChuKTsgfQogICAgICAgIHNhdmVEYXRhKCk7IHJlc2V0RWRpdE1vZGUoKTsgYWxlcnQoIkVucmVnaXN0csOpIik7IHN3aXRjaE1lbnUoJ21lbnU4Jyk7CiAgICB9CgogICAgLy8gLS0tIFdPUkQgRVhQT1JUIFdJVEggSEVBREVSUyAoVEFCTEUgQkFTRUQpIC0tLQogICAgZnVuY3Rpb24gZXhwb3J0RG9jV29yZChtb2RlKSB7CiAgICAgICAgbGV0IHRpdGxlLCBjb250ZW50LCBtZXRhID0gIiI7CiAgICAgICAgCiAgICAgICAgLy8gUHJlcGFyZSBjb250ZW50IGJhc2VkIG9uIG1vZGUKICAgICAgICBpZihtb2RlID09PSAnRU5UJykgewogICAgICAgICAgICB0aXRsZSA9ICJDb21wdGUtUmVuZHUgZCdFbnRyZXRpZW4iOwogICAgICAgICAgICBtZXRhID0gYDxwPjxzdHJvbmc+T2JqZXQgOjwvc3Ryb25nPiAke2RvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlbnQtdHlwZScpLnZhbHVlfSAtICR7ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VudC1vYmpldCcpLnZhbHVlfTwvcD4KICAgICAgICAgICAgICAgICAgICA8cD48c3Ryb25nPkRhdGU6PC9zdHJvbmc+ICR7ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VudC1kYXRlJykudmFsdWV9PC9wPmA7CiAgICAgICAgICAgIGNvbnRlbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZW50LWNvbnRlbnUnKS5pbm5lckhUTUw7CiAgICAgICAgfSBlbHNlIGlmIChtb2RlID09PSAnUFJFUF9ESVInKSB7CiAgICAgICAgICAgIHRpdGxlID0gIlLDqXVuaW9uIGRlIERpcmVjdGlvbiI7CiAgICAgICAgICAgIG1ldGEgPSBgPHA+PHN0cm9uZz5EYXRlOjwvc3Ryb25nPiAke2RvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkaXItZGF0ZScpLnZhbHVlfTwvcD4KICAgICAgICAgICAgICAgICAgICA8cD48c3Ryb25nPlBhcnRpY2lwYW50czo8L3N0cm9uZz4gJHtkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGlyLXBhcnRzJykudmFsdWV9PC9wPmA7CiAgICAgICAgICAgIGNvbnRlbnQgPSBgPGg0Pk9yZHJlIGR1IGpvdXI8L2g0PiR7ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Rpci1jb250ZW51JykuaW5uZXJIVE1MfTxocj48aDQ+Tm90ZXM8L2g0PiR7ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Rpci1ub3RlcycpLmlubmVySFRNTH1gOwogICAgICAgIH0gZWxzZSBpZiAobW9kZSA9PT0gJ1JFVScpIHsKICAgICAgICAgICAgdGl0bGUgPSAiQ29tcHRlLVJlbmR1IDogIiArIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXUtdHlwZScpLnZhbHVlOwogICAgICAgICAgICBtZXRhID0gYDxwPjxzdHJvbmc+RGF0ZTo8L3N0cm9uZz4gJHtkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmV1LWRhdGUnKS52YWx1ZX08L3A+YDsKICAgICAgICAgICAgY29udGVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXUtY29udGVudScpLmlubmVySFRNTDsKICAgICAgICB9IGVsc2UgaWYgKG1vZGUgPT09ICdTVUlWSScpIHsKICAgICAgICAgICAgdGl0bGUgPSAiU3Vpdmkgw4lsw6h2ZSAvIFBvaW50IENQRSI7CiAgICAgICAgICAgIG1ldGEgPSBgPHA+PHN0cm9uZz5EYXRlOjwvc3Ryb25nPiAke2RvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzdWl2aS1kYXRlJykudmFsdWV9PC9wPgogICAgICAgICAgICAgICAgICAgIDxwPjxzdHJvbmc+UGFydGljaXBhbnRzOjwvc3Ryb25nPiAke2RvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzdWl2aS1wYXJ0cycpLnZhbHVlfTwvcD5gOwogICAgICAgICAgICBjb250ZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N1aXZpLWNvbnRlbnUnKS5pbm5lckhUTUw7CiAgICAgICAgfQoKICAgICAgICAvLyBIZWFkZXIgVGFibGUgZm9yIFdvcmQgKExlZnQ6IFNjaG9vbCwgUmlnaHQ6IExvZ28pCiAgICAgICAgY29uc3QgbG9nb0ltZyA9IGFwcERhdGEuc2V0dGluZ3MubG9nbyA/IGA8aW1nIHNyYz0iJHthcHBEYXRhLnNldHRpbmdzLmxvZ299IiB3aWR0aD0iMTUwIiBoZWlnaHQ9ImF1dG8iIGFsdD0iTG9nbyI+YCA6ICcnOwogICAgICAgIGNvbnN0IHNpZ0ltZyA9IGFwcERhdGEuc2V0dGluZ3Muc2lnbmF0dXJlID8gYDxpbWcgc3JjPSIke2FwcERhdGEuc2V0dGluZ3Muc2lnbmF0dXJlfSIgd2lkdGg9IjE1MCIgaGVpZ2h0PSJhdXRvIiBhbHQ9IlNpZ25hdHVyZSI+YCA6ICcnOwoKICAgICAgICBjb25zdCBoZWFkZXJTZWN0aW9uID0gYAogICAgICAgIDx0YWJsZSB3aWR0aD0iMTAwJSIgYm9yZGVyPSIwIiBjZWxscGFkZGluZz0iMCIgY2VsbHNwYWNpbmc9IjAiIHN0eWxlPSJtYXJnaW4tYm90dG9tOiAyMHB4OyBib3JkZXItYm90dG9tOiAycHggc29saWQgIzMzMzsiPgogICAgICAgICAgICA8dHI+CiAgICAgICAgICAgICAgICA8dGQgdmFsaWduPSJ0b3AiIHN0eWxlPSJ0ZXh0LWFsaWduOiBsZWZ0OyI+CiAgICAgICAgICAgICAgICAgICAgPGgxIHN0eWxlPSJmb250LXNpemU6IDI0cHg7IG1hcmdpbjogMDsgcGFkZGluZzogMDsiPiR7YXBwRGF0YS5zZXR0aW5ncy5zY2hvb2x9PC9oMT4KICAgICAgICAgICAgICAgICAgICA8cCBzdHlsZT0ibWFyZ2luOiA1cHggMCAxMHB4IDA7IGZvbnQtc2l6ZTogMTRweDsgY29sb3I6ICM2NjY7Ij5EaXJlY3Rpb248L3A+CiAgICAgICAgICAgICAgICA8L3RkPgogICAgICAgICAgICAgICAgPHRkIHZhbGlnbj0idG9wIiBzdHlsZT0idGV4dC1hbGlnbjogcmlnaHQ7Ij4KICAgICAgICAgICAgICAgICAgICAke2xvZ29JbWd9CiAgICAgICAgICAgICAgICA8L3RkPgogICAgICAgICAgICA8L3RyPgogICAgICAgIDwvdGFibGU+YDsKCiAgICAgICAgY29uc3QgZm9vdGVyU2VjdGlvbiA9IGAKICAgICAgICA8ZGl2IHN0eWxlPSJtYXJnaW4tdG9wOiA1MHB4OyB0ZXh0LWFsaWduOiByaWdodDsiPgogICAgICAgICAgICAke3NpZ0ltZ30KICAgICAgICAgICAgPHA+PHN0cm9uZz4ke2FwcERhdGEuc2V0dGluZ3MudXNlcn08L3N0cm9uZz48L3A+CiAgICAgICAgPC9kaXY+YDsKCiAgICAgICAgY29uc3QgaGVhZGVyID0gYDxodG1sIHhtbG5zOm89J3VybjpzY2hlbWFzLW1pY3Jvc29mdC1jb206b2ZmaWNlOm9mZmljZScgeG1sbnM6dz0ndXJuOnNjaGVtYXMtbWljcm9zb2Z0LWNvbTpvZmZpY2U6d29yZCcgeG1sbnM9J2h0dHA6Ly93d3cudzMub3JnL1RSL1JFQy1odG1sNDAnPjxoZWFkPjxtZXRhIGNoYXJzZXQ9J3V0Zi04Jz48dGl0bGU+JHt0aXRsZX08L3RpdGxlPjwvaGVhZD48Ym9keT5gOwogICAgICAgIGNvbnN0IGZvb3RlciA9ICI8L2JvZHk+PC9odG1sPiI7CiAgICAgICAgCiAgICAgICAgY29uc3QgZnVsbEh0bWwgPSBoZWFkZXIgKyBoZWFkZXJTZWN0aW9uICsgYDxoMiBzdHlsZT0idGV4dC1hbGlnbjpjZW50ZXI7IG1hcmdpbi1ib3R0b206MjBweDsiPiR7dGl0bGV9PC9oMj5gICsgbWV0YSArIGA8aHI+YCArIGNvbnRlbnQgKyBmb290ZXJTZWN0aW9uICsgZm9vdGVyOwoKICAgICAgICBjb25zdCBibG9iID0gbmV3IEJsb2IoWydcdWZlZmYnLCBmdWxsSHRtbF0sIHsgdHlwZTogJ2FwcGxpY2F0aW9uL21zd29yZCcgfSk7CiAgICAgICAgY29uc3QgdXJsID0gVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTsKICAgICAgICBjb25zdCBsaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpOwogICAgICAgIGxpbmsuaHJlZiA9IHVybDsKICAgICAgICBsaW5rLmRvd25sb2FkID0gYCR7dGl0bGUucmVwbGFjZSgvIC9nLCdfJyl9XyR7bmV3IERhdGUoKS50b0lTT1N0cmluZygpLnNwbGl0KCdUJylbMF19LmRvY2A7CiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChsaW5rKTsKICAgICAgICBsaW5rLmNsaWNrKCk7CiAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChsaW5rKTsKICAgIH0KCiAgICAvLyAtLS0gUFJJTlRJTkcgLS0tCiAgICBmdW5jdGlvbiBnZW5lcmF0ZU9mZmljaWFsUHJpbnQodGl0bGUsIGRhdGUsIHR5cGUsIHBTdHIsIGJvZHksIGF0dGFjaG1lbnRzKSB7CiAgICAgICAgY29uc3QgbG9nbyA9IGFwcERhdGEuc2V0dGluZ3MubG9nbyA/IGA8aW1nIHNyYz0iJHthcHBEYXRhLnNldHRpbmdzLmxvZ299IiBjbGFzcz0ib2ZmaWNpYWwtbG9nbyI+YCA6ICcnOwogICAgICAgIGNvbnN0IHNpZyA9IGFwcERhdGEuc2V0dGluZ3Muc2lnbmF0dXJlID8gYDxpbWcgc3JjPSIke2FwcERhdGEuc2V0dGluZ3Muc2lnbmF0dXJlfSIgY2xhc3M9InNpZ25hdHVyZS1pbWciPmAgOiAnJzsKICAgICAgICBsZXQgYXR0SHRtbCA9ICIiOwogICAgICAgIGlmKGF0dGFjaG1lbnRzICYmIGF0dGFjaG1lbnRzLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgYXR0SHRtbCA9IGA8ZGl2IGNsYXNzPSJhdHRhY2htZW50LXByaW50LWxpc3QiPjxzdHJvbmc+UGnDqGNlcyBqb2ludGVzIC8gRG9jdW1lbnRzIGxpw6lzIDo8L3N0cm9uZz48dWw+YCArIGF0dGFjaG1lbnRzLm1hcChhID0+IGA8bGk+JHthLm5hbWV9PC9saT5gKS5qb2luKCcnKSArIGA8L3VsPjwvZGl2PmA7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gYDxkaXYgY2xhc3M9InByaW50LXBhZ2UiPgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJvZmZpY2lhbC1oZWFkZXIiPjxkaXYgY2xhc3M9Im9mZmljaWFsLWxlZnQiPjxkaXYgY2xhc3M9InNjaG9vbC1uYW1lIj4ke2FwcERhdGEuc2V0dGluZ3Muc2Nob29sfTwvZGl2PjxkaXYgY2xhc3M9InNjaG9vbC1kZXB0Ij5EaXJlY3Rpb248L2Rpdj48L2Rpdj48ZGl2IGNsYXNzPSJvZmZpY2lhbC1yaWdodCI+JHtsb2dvfTwvZGl2PjwvZGl2PgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJvZmZpY2lhbC1tZXRhIj5MZSAke25ldyBEYXRlKGRhdGUpLnRvTG9jYWxlRGF0ZVN0cmluZygnZnItRlInKX08L2Rpdj4KICAgICAgICAgICAgPGgyIHN0eWxlPSJ0ZXh0LWFsaWduOmNlbnRlcjsiPiR7dGl0bGV9PC9oMj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0ib2ZmaWNpYWwtc3ViamVjdCI+T0JKRVQgOiAke3R5cGV9PC9kaXY+CiAgICAgICAgICAgICR7cFN0ciA/IGA8ZGl2IGNsYXNzPSJvZmZpY2lhbC1wYXJ0aWNpcGFudHMiPiR7cFN0cn08L2Rpdj5gIDogJyd9CiAgICAgICAgICAgIDxkaXYgY2xhc3M9Im9mZmljaWFsLWNvbnRlbnQiPiR7Ym9keX08L2Rpdj4KICAgICAgICAgICAgJHthdHRIdG1sfQogICAgICAgICAgICA8ZGl2IGNsYXNzPSJvZmZpY2lhbC1mb290ZXIiPiR7c2lnfTxzdHJvbmc+JHthcHBEYXRhLnNldHRpbmdzLnVzZXJ9PC9zdHJvbmc+PC9kaXY+CiAgICAgICAgPC9kaXY+YDsKICAgIH0KCiAgICAKICAgIAogICAgZnVuY3Rpb24gcnRlSW5zZXJ0TG9nbygpIHsKICAgICAgICB2YXIgbG9nbyA9IGFwcERhdGEuc2V0dGluZ3MgJiYgYXBwRGF0YS5zZXR0aW5ncy5sb2dvOwogICAgICAgIGlmICghbG9nbykgeyBhbGVydCgnQXVjdW4gbG9nbyBkw6lmaW5pLiBBam91dGV6IHVuIGxvZ28gZGFucyBsZXMgUGFyYW3DqHRyZXMuJyk7IHJldHVybjsgfQogICAgICAgIGRvY3VtZW50LmV4ZWNDb21tYW5kKCdpbnNlcnRIVE1MJywgZmFsc2UsICc8aW1nIHNyYz0iJytsb2dvKyciIGNsYXNzPSJydGUtbG9nby1pbWciIHN0eWxlPSJtYXgtaGVpZ2h0OjYwcHg7bWF4LXdpZHRoOjEyMHB4O3ZlcnRpY2FsLWFsaWduOm1pZGRsZTsiIGFsdD0iTG9nbyI+Jyk7CiAgICB9CiAgICBmdW5jdGlvbiBydGVDb2xvcihidG4pIHsKICAgICAgICB2YXIgZXhpc3RpbmcgPSBidG4ucGFyZW50RWxlbWVudC5xdWVyeVNlbGVjdG9yKCcucnRlLWNvbG9yLXBvcCcpOwogICAgICAgIGlmIChleGlzdGluZykgeyBleGlzdGluZy5yZW1vdmUoKTsgcmV0dXJuOyB9CiAgICAgICAgdmFyIGNvbG9ycyA9IFsnIzAwMDAwMCcsJyNlNzRjM2MnLCcjZTY3ZTIyJywnI2YxYzQwZicsJyMyN2FlNjAnLCcjMjk4MGI5JywnIzhlNDRhZCcsJyMyYzNlNTAnLCcjOTVhNWE2JywnIzFhYmM5YycsJyNkMzU0MDAnLCcjYzAzOTJiJywnIzE2YTA4NScsJyMyZWNjNzEnLCcjMzQ5OGRiJywnIzliNTliNiddOwogICAgICAgIHZhciBwb3AgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgICAgICBwb3AuY2xhc3NOYW1lID0gJ3J0ZS1jb2xvci1wb3AnOwogICAgICAgIGNvbG9ycy5mb3JFYWNoKGZ1bmN0aW9uKGMpIHsKICAgICAgICAgICAgdmFyIHN3ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgICAgICAgIHN3LmNsYXNzTmFtZSA9ICdydGUtY29sb3Itc3cnOwogICAgICAgICAgICBzdy5zdHlsZS5iYWNrZ3JvdW5kID0gYzsKICAgICAgICAgICAgc3cub25jbGljayA9IGZ1bmN0aW9uKGUpIHsgZS5zdG9wUHJvcGFnYXRpb24oKTsgZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2ZvcmVDb2xvcicsIGZhbHNlLCBjKTsgcG9wLnJlbW92ZSgpOyB9OwogICAgICAgICAgICBwb3AuYXBwZW5kQ2hpbGQoc3cpOwogICAgICAgIH0pOwogICAgICAgIGJ0bi5zdHlsZS5wb3NpdGlvbiA9ICdyZWxhdGl2ZSc7CiAgICAgICAgYnRuLmFwcGVuZENoaWxkKHBvcCk7CiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpeyBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIGhhbmRsZXIoZSl7IGlmKCFwb3AuY29udGFpbnMoZS50YXJnZXQpKXtwb3AucmVtb3ZlKCk7ZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLGhhbmRsZXIpO30gfSwge29uY2U6ZmFsc2V9KTsgfSwxMCk7CiAgICB9CiAgICBmdW5jdGlvbiBydGVMaW5rKGJ0bikgewogICAgICAgIHZhciB1cmwgPSBwcm9tcHQoJ1VSTCBkdSBsaWVuIDonLCdodHRwczovLycpOwogICAgICAgIGlmICh1cmwpIGRvY3VtZW50LmV4ZWNDb21tYW5kKCdjcmVhdGVMaW5rJywgZmFsc2UsIHVybCk7CiAgICB9CgogICAgZnVuY3Rpb24gd2FpdEZvckltYWdlc1RoZW5QcmludCgpIHsKICAgICAgICB2YXIgem9uZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcmludC16b25lJyk7CiAgICAgICAgdmFyIGltZ3MgPSB6b25lLnF1ZXJ5U2VsZWN0b3JBbGwoJ2ltZycpOwogICAgICAgIGlmIChpbWdzLmxlbmd0aCA9PT0gMCkgeyB3aW5kb3cucHJpbnQoKTsgcmV0dXJuOyB9CiAgICAgICAgdmFyIGxvYWRlZCA9IDA7CiAgICAgICAgdmFyIHRvdGFsID0gaW1ncy5sZW5ndGg7CiAgICAgICAgdmFyIGRvbmUgPSBmYWxzZTsKICAgICAgICB2YXIgdGltZW91dCA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7IGlmICghZG9uZSkgeyBkb25lID0gdHJ1ZTsgd2luZG93LnByaW50KCk7IH0gfSwgMjAwMCk7CiAgICAgICAgaW1ncy5mb3JFYWNoKGZ1bmN0aW9uKGltZykgewogICAgICAgICAgICBpZiAoaW1nLmNvbXBsZXRlICYmIGltZy5uYXR1cmFsSGVpZ2h0ID4gMCkgewogICAgICAgICAgICAgICAgbG9hZGVkKys7CiAgICAgICAgICAgICAgICBpZiAobG9hZGVkID49IHRvdGFsICYmICFkb25lKSB7IGRvbmUgPSB0cnVlOyBjbGVhclRpbWVvdXQodGltZW91dCk7IHdpbmRvdy5wcmludCgpOyB9CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBpbWcub25sb2FkID0gaW1nLm9uZXJyb3IgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICBsb2FkZWQrKzsKICAgICAgICAgICAgICAgICAgICBpZiAobG9hZGVkID49IHRvdGFsICYmICFkb25lKSB7IGRvbmUgPSB0cnVlOyBjbGVhclRpbWVvdXQodGltZW91dCk7IHdpbmRvdy5wcmludCgpOyB9CiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgLy8gRm9yY2UgcmVsb2FkIGZvciBiYXNlNjQgaW1hZ2VzCiAgICAgICAgICAgICAgICBpZiAoaW1nLnNyYyAmJiBpbWcuc3JjLmluZGV4T2YoJ2RhdGE6JykgPT09IDApIHsKICAgICAgICAgICAgICAgICAgICB2YXIgc3JjID0gaW1nLnNyYzsKICAgICAgICAgICAgICAgICAgICBpbWcuc3JjID0gJyc7CiAgICAgICAgICAgICAgICAgICAgaW1nLnNyYyA9IHNyYzsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0pOwogICAgfQoKICAgIGZ1bmN0aW9uIHByaW50Q3VycmVudEZvcm0obW9kZSkgewogICAgICAgIGxldCB0aXRsZSwgZGF0ZSwgdHlwZSwgYm9keSwgcFN0cj0iIiwgYXR0cz1bXTsKICAgICAgICBpZihtb2RlID09PSAnRU5UJykgewogICAgICAgICAgICB0aXRsZSA9ICJDb21wdGUtUmVuZHUgZCdFbnRyZXRpZW4iOyBkYXRlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VudC1kYXRlJykudmFsdWU7IHR5cGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZW50LXR5cGUnKS52YWx1ZSArICIgLSAiICsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VudC1vYmpldCcpLnZhbHVlOyBib2R5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VudC1jb250ZW51JykuaW5uZXJIVE1MOwogICAgICAgICAgICBsZXQgcyA9IGdldE11bHRpRGF0YSgnZW50LXN0dWRlbnRzLWNvbnRhaW5lcicsICdlbnQtc3R1ZGVudCcpOyBsZXQgdCA9IGdldE11bHRpRGF0YSgnZW50LXRlYWNoZXJzLWNvbnRhaW5lcicsICdlbnQtdGVhY2hlcicpOwogICAgICAgICAgICBpZihzLmxlbmd0aCkgcFN0ciArPSAiPHN0cm9uZz7DiWzDqHZlcyBjb25jZXJuw6lzIDo8L3N0cm9uZz4gIiArIHMubWFwKHg9PngubmFtZSkuam9pbignLCAnKSArICI8YnI+IjsKICAgICAgICAgICAgaWYodC5sZW5ndGgpIHBTdHIgKz0gIjxzdHJvbmc+UHLDqXNlbnRzIDo8L3N0cm9uZz4gIiArIHQubWFwKHg9PngubmFtZSkuam9pbignLCAnKTsKICAgICAgICAgICAgYXR0cyA9IGdldEF0dGFjaG1lbnRzRGF0YSgnZW50LWF0dGFjaG1lbnRzJyk7CiAgICAgICAgfSBlbHNlIGlmKG1vZGUgPT09ICdSRVUnKSB7CiAgICAgICAgICAgIHRpdGxlID0gIkNvbXB0ZS1SZW5kdSBkZSBSw6l1bmlvbiI7IGRhdGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmV1LWRhdGUnKS52YWx1ZTsgdHlwZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXUtdHlwZScpLnZhbHVlOyBib2R5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JldS1jb250ZW51JykuaW5uZXJIVE1MOwogICAgICAgICAgICBsZXQgcyA9IGdldE11bHRpRGF0YSgncmV1LXN0dWRlbnRzLWNvbnRhaW5lcicsICdyZXUtc3R1ZGVudCcpOyBsZXQgdCA9IGdldE11bHRpRGF0YSgncmV1LXRlYWNoZXJzLWNvbnRhaW5lcicsICdyZXUtdGVhY2hlcicpOwogICAgICAgICAgICBpZihzLmxlbmd0aCkgcFN0ciArPSAiPHN0cm9uZz7DiWzDqHZlcyBjb25jZXJuw6lzIDo8L3N0cm9uZz4gIiArIHMubWFwKHg9PngubmFtZSkuam9pbignLCAnKSArICI8YnI+IjsKICAgICAgICAgICAgaWYodC5sZW5ndGgpIHBTdHIgKz0gIjxzdHJvbmc+UGFydGljaXBhbnRzIDo8L3N0cm9uZz4gIiArIHQubWFwKHg9PngubmFtZSkuam9pbignLCAnKTsKICAgICAgICAgICAgYXR0cyA9IGdldEF0dGFjaG1lbnRzRGF0YSgncmV1LWF0dGFjaG1lbnRzJyk7CiAgICAgICAgfSBlbHNlIGlmKG1vZGUgPT09ICdQUkVQX0RJUicpIHsKICAgICAgICAgICAgdGl0bGUgPSAiUsOpdW5pb24gZGUgRGlyZWN0aW9uIjsgZGF0ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkaXItZGF0ZScpLnZhbHVlOyB0eXBlID0gIkNvbXB0ZS1yZW5kdSI7IHBTdHIgPSAiPHN0cm9uZz5QcsOpc2VudHMgOjwvc3Ryb25nPiAiICsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Rpci1wYXJ0cycpLnZhbHVlOwogICAgICAgICAgICBib2R5ID0gYDxoMz5PUkRSRSBEVSBKT1VSPC9oMz4ke2RvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkaXItY29udGVudScpLmlubmVySFRNTH08ZGl2IGNsYXNzPSJwcmludC1zZXBhcmF0b3IiIHN0eWxlPSJtYXJnaW46MjBweCAwOyBib3JkZXItdG9wOjFweCBkYXNoZWQgI2NjYyI+PC9kaXY+PGgzPk5PVEVTICYgRMOJQ0lTSU9OUzwvaDM+JHtkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGlyLW5vdGVzJykuaW5uZXJIVE1MfWA7CiAgICAgICAgICAgIGF0dHMgPSBnZXRBdHRhY2htZW50c0RhdGEoJ2Rpci1hdHRhY2htZW50cycpOwogICAgICAgIH0gZWxzZSBpZihtb2RlID09PSAnU1VJVkknKSB7CiAgICAgICAgICAgIHRpdGxlID0gIlBvaW50IFN1aXZpIMOJbMOodmUiOyBkYXRlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N1aXZpLWRhdGUnKS52YWx1ZTsgdHlwZSA9ICJDb29yZGluYXRpb24gQ1BFIC8gRGlyZWN0aW9uIjsgcFN0ciA9ICI8c3Ryb25nPlBhcnRpY2lwYW50cyA6PC9zdHJvbmc+ICIgKyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3VpdmktcGFydHMnKS52YWx1ZSArICIgfCA8c3Ryb25nPk5pdmVhdXggOjwvc3Ryb25nPiAiICsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N1aXZpLWNsYXNzZXMnKS52YWx1ZTsKICAgICAgICAgICAgYm9keSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzdWl2aS1jb250ZW51JykuaW5uZXJIVE1MOwogICAgICAgICAgICBhdHRzID0gZ2V0QXR0YWNobWVudHNEYXRhKCdzdWl2aS1hdHRhY2htZW50cycpOwogICAgICAgIH0KICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJpbnQtem9uZScpLmlubmVySFRNTCA9IGdlbmVyYXRlT2ZmaWNpYWxQcmludCh0aXRsZSwgZGF0ZSwgdHlwZSwgcFN0ciwgYm9keSwgYXR0cyk7CiAgICAgICAgd2FpdEZvckltYWdlc1RoZW5QcmludCgpOwogICAgfQoKICAgIGZ1bmN0aW9uIHByaW50U2F2ZWREb2ModHlwZSwgaWQpIHsKICAgICAgICBsZXQgaXQsIHRpdGxlLCBzdWIsIGJvZHksIHBTdHI9IiI7CiAgICAgICAgaWYodHlwZT09PSdFTlQnKSB7IGl0ID0gYXBwRGF0YS5lbnRyZXRpZW5zLmZpbmQoeD0+eC5pZC50b1N0cmluZygpPT09aWQudG9TdHJpbmcoKSk7IHRpdGxlPSJFbnRyZXRpZW4iOyBzdWI9aXQudHlwZSsiIC0gIitpdC5vYmpldDsgYm9keT1pdC5ib2R5OyBpZihpdC5zdHVkZW50cy5sZW5ndGgpIHBTdHIrPSI8c3Ryb25nPsOJbMOodmVzIDo8L3N0cm9uZz4gIitpdC5zdHVkZW50cy5tYXAoeD0+eC5uYW1lKS5qb2luKCcsICcpKyI8YnI+IjsgaWYoaXQudGVhY2hlcnMubGVuZ3RoKSBwU3RyKz0iPHN0cm9uZz5QcsOpc2VudHMgOjwvc3Ryb25nPiAiK2l0LnRlYWNoZXJzLm1hcCh4PT54Lm5hbWUpLmpvaW4oJywgJyk7IH0gCiAgICAgICAgZWxzZSBpZiAodHlwZT09PSdSRVUnKSB7IGl0ID0gYXBwRGF0YS5yZXVuaW9ucy5maW5kKHg9PnguaWQudG9TdHJpbmcoKT09PWlkLnRvU3RyaW5nKCkpOyBpZihpdC50eXBlID09PSAiUsOpdW5pb24gZGUgRGlyZWN0aW9uIikgeyB0aXRsZT0iRGlyZWN0aW9uIjsgc3ViPSJDb21wdGUtcmVuZHUiOyBwU3RyPSI8c3Ryb25nPlByw6lzZW50cyA6PC9zdHJvbmc+ICIrKGl0LnBhcnRzIHx8ICIiKTsgYm9keSA9IGA8aDM+T0RKPC9oMz4ke2l0Lm9kan08ZGl2IGNsYXNzPSJwcmludC1zZXBhcmF0b3IiIHN0eWxlPSJtYXJnaW46MjBweCAwOyBib3JkZXItdG9wOjFweCBkYXNoZWQgI2NjYyI+PC9kaXY+PGgzPk5PVEVTPC9oMz4ke2l0LmNyfWA7IH0gZWxzZSB7IHRpdGxlPSJSw6l1bmlvbiI7IHN1Yj1pdC50eXBlOyBib2R5PWl0LmJvZHk7IGlmKGl0LnN0dWRlbnRzLmxlbmd0aCkgcFN0cis9IjxzdHJvbmc+w4lsw6h2ZXMgOjwvc3Ryb25nPiAiK2l0LnN0dWRlbnRzLm1hcCh4PT54Lm5hbWUpLmpvaW4oJywgJykrIjxicj4iOyBpZihpdC50ZWFjaGVycy5sZW5ndGgpIHBTdHIrPSI8c3Ryb25nPlBhcnRpY2lwYW50cyA6PC9zdHJvbmc+ICIraXQudGVhY2hlcnMubWFwKHg9PngubmFtZSkuam9pbignLCAnKTsgfSB9IAogICAgICAgIGVsc2UgaWYgKHR5cGU9PT0nU1VJVkknKSB7IGl0ID0gYXBwRGF0YS5zdWl2aUVsZXZlcy5maW5kKHg9PnguaWQudG9TdHJpbmcoKT09PWlkLnRvU3RyaW5nKCkpOyB0aXRsZT0iU3VpdmkiOyBzdWI9IlBvaW50IENQRSI7IGJvZHk9aXQuYm9keTsgcFN0ciA9ICI8c3Ryb25nPlBhcnRpY2lwYW50cyA6PC9zdHJvbmc+ICIraXQucGFydGljaXBhbnRzKyIgfCA8c3Ryb25nPk5pdmVhdXggOjwvc3Ryb25nPiAiK2l0LmNsYXNzZXM7IH0KICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJpbnQtem9uZScpLmlubmVySFRNTCA9IGdlbmVyYXRlT2ZmaWNpYWxQcmludCh0aXRsZSwgaXQuZGF0ZSwgc3ViLCBwU3RyLCBib2R5LCBpdC5hdHRhY2htZW50cyk7IHdhaXRGb3JJbWFnZXNUaGVuUHJpbnQoKTsKICAgIH0KCiAgICBmdW5jdGlvbiBwcmludEFsbEhpc3RvcnkoKSB7CiAgICAgICAgY29uc3QgbGlzdCA9IGdldEhpc3RvcnlMaXN0KCk7IGlmKCFsaXN0Lmxlbmd0aCkgcmV0dXJuOwogICAgICAgIGxldCBodG1sID0gIiI7CiAgICAgICAgbGlzdC5mb3JFYWNoKGkgPT4gewogICAgICAgICAgICBsZXQgdGl0bGUsIHN1YiwgYm9keSwgcFN0cj0iIjsKICAgICAgICAgICAgaWYoaS50PT09J0VOVCcpIHsgdGl0bGU9IkVudHJldGllbiI7IHN1Yj1pLmQudHlwZSsiIC0gIitpLmQub2JqZXQ7IGJvZHk9aS5kLmJvZHk7IGlmKGkuZC5zdHVkZW50cy5sZW5ndGgpIHBTdHIrPSLDiWzDqHZlcyA6ICIraS5kLnN0dWRlbnRzLm1hcCh4PT54Lm5hbWUpLmpvaW4oJywgJykrIjxicj4iOyBpZihpLmQudGVhY2hlcnMubGVuZ3RoKSBwU3RyKz0iUHLDqXNlbnRzIDogIitpLmQudGVhY2hlcnMubWFwKHg9PngubmFtZSkuam9pbignLCAnKTsgfSAKICAgICAgICAgICAgZWxzZSBpZiAoaS50PT09J1JFVScpIHsgaWYoaS5kLnR5cGUgPT09ICJSw6l1bmlvbiBkZSBEaXJlY3Rpb24iKSB7IHRpdGxlPSJEaXJlY3Rpb24iOyBzdWI9IkNvbXB0ZS1yZW5kdSI7IHBTdHI9IlByw6lzZW50cyA6ICIrKGkuZC5wYXJ0cyB8fCAiIik7IGJvZHkgPSBgPGgzPk9ESjwvaDM+JHtpLmQub2RqfTxkaXYgc3R5bGU9Im1hcmdpbjoyMHB4IDA7IGJvcmRlci10b3A6MXB4IGRhc2hlZCAjY2NjIj48L2Rpdj48aDM+Q1I8L2gzPiR7aS5kLmNyfWA7IH0gZWxzZSB7IHRpdGxlPSJSw6l1bmlvbiI7IHN1Yj1pLmQudHlwZTsgYm9keT1pLmQuYm9keTsgaWYoaS5kLnN0dWRlbnRzLmxlbmd0aCkgcFN0cis9IsOJbMOodmVzIDogIitpLmQuc3R1ZGVudHMubWFwKHg9PngubmFtZSkuam9pbignLCAnKSsiPGJyPiI7IGlmKGkuZC50ZWFjaGVycy5sZW5ndGgpIHBTdHIrPSJQYXJ0aWNpcGFudHMgOiAiK2kuZC50ZWFjaGVycy5tYXAoeD0+eC5uYW1lKS5qb2luKCcsICcpOyB9IH0gCiAgICAgICAgICAgIGVsc2UgaWYgKGkudD09PSdTVUlWSScpIHsgdGl0bGU9IlN1aXZpIjsgc3ViPSJQb2ludCBDUEUiOyBib2R5PWkuZC5ib2R5OyBwU3RyID0gIlBhcnRpY2lwYW50cyA6ICIraS5kLnBhcnRpY2lwYW50cysiIHwgQ2xhc3NlcyA6ICIraS5kLmNsYXNzZXM7IH0KICAgICAgICAgICAgaHRtbCArPSBnZW5lcmF0ZU9mZmljaWFsUHJpbnQodGl0bGUsIGkuZC5kYXRlLCBzdWIsIHBTdHIsIGJvZHksIGkuZC5hdHRhY2htZW50cyk7CiAgICAgICAgfSk7CiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ByaW50LXpvbmUnKS5pbm5lckhUTUwgPSBodG1sOyB3YWl0Rm9ySW1hZ2VzVGhlblByaW50KCk7CiAgICB9CgogICAgLy8gLS0tIEhJU1RPUlkgUkVOREVSIC0tLQogICAgZnVuY3Rpb24gZ2V0SGlzdG9yeUxpc3QoKSB7CiAgICAgICAgY29uc3QgcSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZWFyY2gtc3R1ZGVudCcpLnZhbHVlLnRvTG93ZXJDYXNlKCkudHJpbSgpOwogICAgICAgIGNvbnN0IGYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2VhcmNoLXR5cGUnKS52YWx1ZTsKICAgICAgICBsZXQgbGlzdCA9IFtdOwogICAgICAgIGNvbnN0IGlzTSA9IChpdCkgPT4gewogICAgICAgICAgICBpZiAoIXEpIHJldHVybiB0cnVlOwogICAgICAgICAgICBpZiAoaXQudHlwZT8udG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhxKSB8fCBpdC5vYmpldD8udG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhxKSB8fCBpdC5vZGo/LnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMocSkgfHwgaXQuYm9keT8udG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhxKSB8fCBpdC5jcj8udG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhxKSB8fCBpdC5wYXJ0aWNpcGFudHM/LnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMocSkgfHwgaXQucGFydHM/LnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMocSkpIHJldHVybiB0cnVlOwogICAgICAgICAgICBpZiAoaXQuc3R1ZGVudHM/LnNvbWUocyA9PiBzLm5hbWUudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhxKSkgfHwgaXQudGVhY2hlcnM/LnNvbWUodCA9PiB0Lm5hbWUudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhxKSkpIHJldHVybiB0cnVlOwogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfTsKICAgICAgICBpZihmPT09IkFMTCJ8fGY9PT0iRU5UIikgYXBwRGF0YS5lbnRyZXRpZW5zLmZvckVhY2goZT0+eyBpZihpc00oZSkpIGxpc3QucHVzaCh7dDonRU5UJyxkOmUsdGltZTpuZXcgRGF0ZShlLmRhdGUpLmdldFRpbWUoKX0pOyB9KTsKICAgICAgICBpZihmPT09IkFMTCJ8fGY9PT0iUkVVInx8Zj09PSJESVIiKSBhcHBEYXRhLnJldW5pb25zLmZvckVhY2gocj0+eyBjb25zdCBpc0QgPSByLnR5cGU9PT0iUsOpdW5pb24gZGUgRGlyZWN0aW9uIjsgaWYoZj09PSJESVIiICYmICFpc0QpIHJldHVybjsgaWYoZj09PSJSRVUiICYmIGlzRCkgcmV0dXJuOyBpZihpc00ocikpIGxpc3QucHVzaCh7dDonUkVVJyxkOnIsdGltZTpuZXcgRGF0ZShyLmRhdGUpLmdldFRpbWUoKX0pOyB9KTsKICAgICAgICBpZihmPT09IkFMTCJ8fGY9PT0iU1VJVkkiKSBhcHBEYXRhLnN1aXZpRWxldmVzLmZvckVhY2goc3U9PnsgaWYoaXNNKHN1KSkgbGlzdC5wdXNoKHt0OidTVUlWSScsZDpzdSx0aW1lOm5ldyBEYXRlKHN1LmRhdGUpLmdldFRpbWUoKX0pOyB9KTsKICAgICAgICByZXR1cm4gbGlzdC5zb3J0KChhLGIpPT5iLnRpbWUtYS50aW1lKTsKICAgIH0KCiAgICBmdW5jdGlvbiByZW5kZXJIaXN0b3J5KCkgewogICAgICAgIGNvbnN0IGxpc3QgPSBnZXRIaXN0b3J5TGlzdCgpOyBjb25zdCB0Ym9keSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNoaXN0b3J5LXRhYmxlIHRib2R5Jyk7IHRib2R5LmlubmVySFRNTD0iIjsKICAgICAgICBpZighbGlzdC5sZW5ndGgpIHsgdGJvZHkuaW5uZXJIVE1MPSI8dHI+PHRkIGNvbHNwYW49JzQnIHN0eWxlPSd0ZXh0LWFsaWduOmNlbnRlcjtjb2xvcjojOTk5O3BhZGRpbmc6MjBweCc+QXVjdW4gZG9jdW1lbnQ8L3RkPjwvdHI+IjsgcmV0dXJuOyB9CiAgICAgICAgbGlzdC5mb3JFYWNoKGk9PnsKICAgICAgICAgICAgbGV0IGR0bCA9ICIiOwogICAgICAgICAgICBpZihpLnQ9PT0nRU5UJykgewogICAgICAgICAgICAgICAgdmFyIF9lcyA9IChpLmQuc3R1ZGVudHN8fFtdKS5tYXAocz0+cy5uYW1lKS5maWx0ZXIoQm9vbGVhbik7CiAgICAgICAgICAgICAgICB2YXIgX2V0ID0gKGkuZC50ZWFjaGVyc3x8W10pLm1hcCh0PT50Lm5hbWUpLmZpbHRlcihCb29sZWFuKTsKICAgICAgICAgICAgICAgIGR0bCA9ICc8c3Ryb25nPicraS5kLm9iamV0Kyc8L3N0cm9uZz48YnI+JzsKICAgICAgICAgICAgICAgIGlmKF9lcy5sZW5ndGgpIGR0bCArPSAnPHNtYWxsPjxpIGNsYXNzPSJmYXMgZmEtdXNlci1ncmFkdWF0ZSIgc3R5bGU9ImNvbG9yOiNlNjdlMjI7bWFyZ2luLXJpZ2h0OjNweCI+PC9pPicrX2VzLmpvaW4oJywgJykrJzwvc21hbGw+JzsKICAgICAgICAgICAgICAgIGlmKF9ldC5sZW5ndGgpIGR0bCArPSAnPGJyPjxzbWFsbD48aSBjbGFzcz0iZmFzIGZhLWNoYWxrYm9hcmQtdGVhY2hlciIgc3R5bGU9ImNvbG9yOiMyOTgwYjk7bWFyZ2luLXJpZ2h0OjNweCI+PC9pPicrX2V0LmpvaW4oJywgJykrJzwvc21hbGw+JzsKICAgICAgICAgICAgfSBlbHNlIGlmKGkudD09PSdSRVUnKSB7CiAgICAgICAgICAgICAgICB2YXIgX3JzID0gKGkuZC5zdHVkZW50c3x8W10pLm1hcChzPT5zLm5hbWUpLmZpbHRlcihCb29sZWFuKTsKICAgICAgICAgICAgICAgIHZhciBfcnQgPSAoaS5kLnRlYWNoZXJzfHxbXSkubWFwKHQ9PnQubmFtZSkuZmlsdGVyKEJvb2xlYW4pOwogICAgICAgICAgICAgICAgdmFyIF9oZHIgPSBpLmQudHlwZT09PSJSw6l1bmlvbiBkZSBEaXJlY3Rpb24iPyJEaXJlY3Rpb24iOihpLmQub2RqfHwnJykucmVwbGFjZSgvPFtePl0qPi9nLCAnJykuc3Vic3RyaW5nKDAsNTApOwogICAgICAgICAgICAgICAgZHRsID0gJzxzdHJvbmc+JytfaGRyKyc8L3N0cm9uZz48YnI+JzsKICAgICAgICAgICAgICAgIGlmKF9ycy5sZW5ndGgpIGR0bCArPSAnPHNtYWxsPjxpIGNsYXNzPSJmYXMgZmEtdXNlci1ncmFkdWF0ZSIgc3R5bGU9ImNvbG9yOiNlNjdlMjI7bWFyZ2luLXJpZ2h0OjNweCI+PC9pPicrX3JzLmpvaW4oJywgJykrJzwvc21hbGw+JzsKICAgICAgICAgICAgICAgIGlmKF9ydC5sZW5ndGgpIGR0bCArPSAnPGJyPjxzbWFsbD48aSBjbGFzcz0iZmFzIGZhLWNoYWxrYm9hcmQtdGVhY2hlciIgc3R5bGU9ImNvbG9yOiMyOTgwYjk7bWFyZ2luLXJpZ2h0OjNweCI+PC9pPicrX3J0LmpvaW4oJywgJykrJzwvc21hbGw+JzsKICAgICAgICAgICAgICAgIGlmKCFfcnMubGVuZ3RoICYmICFfcnQubGVuZ3RoICYmIGkuZC5wYXJ0cykgZHRsICs9ICc8c21hbGw+JytpLmQucGFydHMrJzwvc21hbGw+JzsKICAgICAgICAgICAgfSBlbHNlIGlmKGkudD09PSdTVUlWSScpIGR0bCA9ICc8c3Ryb25nPkNsYXNzZXMgOiAnK2kuZC5jbGFzc2VzKyc8L3N0cm9uZz48YnI+PHNtYWxsPicraS5kLnBhcnRpY2lwYW50cysnPC9zbWFsbD4nOwogICAgICAgICAgICAKICAgICAgICAgICAgY29uc3QgaGFzQXR0ID0gKGkuZC5hdHRhY2htZW50cyAmJiBpLmQuYXR0YWNobWVudHMubGVuZ3RoID4gMCkgPyAnPGkgY2xhc3M9ImZhcyBmYS1wYXBlcmNsaXAiIHN0eWxlPSJjb2xvcjojN2Y4YzhkOyBtYXJnaW4tbGVmdDo1cHg7Ij48L2k+JyA6ICcnOwoKICAgICAgICAgICAgdGJvZHkuaW5uZXJIVE1MICs9IGA8dHI+PHRkPiR7bmV3IERhdGUoaS5kLmRhdGUpLnRvTG9jYWxlRGF0ZVN0cmluZygnZnItRlInKX08L3RkPjx0ZD48c3BhbiBjbGFzcz0iYmFkZ2UgJHtpLnQ9PT0nRU5UJz8nYmctZW50JzooaS50PT09J1NVSVZJJz8nYmctc3VpdmknOihpLmQudHlwZS5pbmNsdWRlcygnRGlyJyk/J2JnLWRpcic6J2JnLXJldScpKX0iPiR7aS5kLnR5cGV9PC9zcGFuPiR7aGFzQXR0fTwvdGQ+PHRkPiR7ZHRsfTwvdGQ+PHRkPjxidXR0b24gY2xhc3M9ImJ0biBidG4td2FybmluZyBidG4tc20iIG9uY2xpY2s9ImxvYWRJdGVtRm9yRWRpdCgnJHtpLnR9JywgJyR7aS5kLmlkfScpIj48aSBjbGFzcz0iZmFzIGZhLXBlbiI+PC9pPjwvYnV0dG9uPiA8YnV0dG9uIGNsYXNzPSJidG4gYnRuLWRhcmsgYnRuLXNtIiBvbmNsaWNrPSJwcmludFNhdmVkRG9jKCcke2kudH0nLCcke2kuZC5pZH0nKSI+PGkgY2xhc3M9ImZhcyBmYS1wcmludCI+PC9pPjwvYnV0dG9uPiA8YnV0dG9uIGNsYXNzPSJidG4gYnRuLWRhbmdlciBidG4tc20iIG9uY2xpY2s9ImRlbGV0ZUl0ZW0oJyR7aS50PT09J0VOVCc/J2VudHJldGllbnMnOihpLnQ9PT0nUkVVJz8ncmV1bmlvbnMnOidzdWl2aUVsZXZlcycpfScsJHtpLmQuaWR9KSI+PGkgY2xhc3M9ImZhcyBmYS10cmFzaCI+PC9pPjwvYnV0dG9uPjwvdGQ+PC90cj5gOwogICAgICAgIH0pOwogICAgfQoKICAgIC8vIC0tLSBEQVNIQk9BUkQgJiBTVEFUUyAtLS0KICAgIGZ1bmN0aW9uIHJlbmRlckRhc2hib2FyZCgpIHsKICAgICAgICBjb25zdCB0cyA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKS5zcGxpdCgnVCcpWzBdOwogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdrcGktZW50JykuaW5uZXJUZXh0ID0gYXBwRGF0YS5lbnRyZXRpZW5zLmxlbmd0aDsKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgna3BpLXJldScpLmlubmVyVGV4dCA9IGFwcERhdGEucmV1bmlvbnMuZmlsdGVyKHI9PnIudHlwZSE9PSJSw6l1bmlvbiBkZSBEaXJlY3Rpb24iKS5sZW5ndGg7CiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2twaS1kaXInKS5pbm5lclRleHQgPSBhcHBEYXRhLnJldW5pb25zLmZpbHRlcihyPT5yLnR5cGU9PT0iUsOpdW5pb24gZGUgRGlyZWN0aW9uIikubGVuZ3RoOwogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdrcGktc3VpdmknKS5pbm5lclRleHQgPSBhcHBEYXRhLnN1aXZpRWxldmVzLmxlbmd0aDsKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgna3BpLXRvZG8nKS5pbm5lclRleHQgPSBhcHBEYXRhLnRvZG8udXJnZW50Lmxlbmd0aDsKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgna3BpLWNhbCcpLmlubmVyVGV4dCA9IGFwcERhdGEuY2FsZW5kYXIuZmlsdGVyKGM9PmMuZGF0ZT49dHMpLmxlbmd0aDsKICAgICAgICAKICAgICAgICByZW5kZXJDaGFydCgnY2hhcnRUeXBlcycsICdkb3VnaG51dCcsIHsgCiAgICAgICAgICAgIGxhYmVsczogWydVcmdlbmNlcycsICdEaXJlY3Rpb24nLCAnRW50cmV0aWVucycsICdSw6l1bmlvbnMnLCAnQWdlbmRhJywgJ1N1aXZpJ10sIAogICAgICAgICAgICBkYXRhc2V0czogW3sgCiAgICAgICAgICAgICAgICBkYXRhOiBbYXBwRGF0YS50b2RvLnVyZ2VudC5sZW5ndGgsIGFwcERhdGEucmV1bmlvbnMuZmlsdGVyKHI9PnIudHlwZT09PSJSw6l1bmlvbiBkZSBEaXJlY3Rpb24iKS5sZW5ndGgsIGFwcERhdGEuZW50cmV0aWVucy5sZW5ndGgsIGFwcERhdGEucmV1bmlvbnMuZmlsdGVyKHI9PnIudHlwZSE9PSJSw6l1bmlvbiBkZSBEaXJlY3Rpb24iKS5sZW5ndGgsIGFwcERhdGEuY2FsZW5kYXIubGVuZ3RoLCBhcHBEYXRhLnN1aXZpRWxldmVzLmxlbmd0aF0sIAogICAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiBbJyNlNzRjM2MnLCcjMmMzZTUwJywnI2MwMzkyYicsJyMyN2FlNjAnLCcjZjM5YzEyJywnIzI5ODBiOSddIAogICAgICAgICAgICB9XSAKICAgICAgICB9KTsKICAgICAgICAKICAgICAgICBjb25zdCBzdCA9IGdldE1vbnRobHlTdGF0cygpOyAKICAgICAgICByZW5kZXJDaGFydCgnY2hhcnRNb250aGx5JywgJ2xpbmUnLCB7IGxhYmVsczogc3QubGFiZWxzLCBkYXRhc2V0czogW3sgbGFiZWw6ICdBY3Rpdml0w6lzJywgZGF0YTogc3QudmFsdWVzLCBib3JkZXJDb2xvcjogJyMyOTgwYjknLCBmaWxsOiB0cnVlLCB0ZW5zaW9uOiAwLjMgfV0gfSk7CiAgICAgICAgcmVuZGVyVG9wU3R1ZGVudHMoKTsKICAgIH0KCiAgICBmdW5jdGlvbiByZW5kZXJUb3BTdHVkZW50cygpIHsKICAgICAgICBjb25zdCBjb3VudHMgPSB7fTsKICAgICAgICBbLi4uYXBwRGF0YS5lbnRyZXRpZW5zLCAuLi5hcHBEYXRhLnJldW5pb25zXS5mb3JFYWNoKGl0ID0+IHsKICAgICAgICAgICAgaWYoaXQuc3R1ZGVudHMpIHsKICAgICAgICAgICAgICAgIGl0LnN0dWRlbnRzLmZvckVhY2gocyA9PiB7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgbmFtZSA9IHMubmFtZS50cmltKCk7CiAgICAgICAgICAgICAgICAgICAgaWYobmFtZSkgY291bnRzW25hbWVdID0gKGNvdW50c1tuYW1lXSB8fCAwKSArIDE7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgIH0pOwogICAgICAgIGNvbnN0IHNvcnRlZCA9IE9iamVjdC5lbnRyaWVzKGNvdW50cykuc29ydCgoYSxiKSA9PiBiWzFdIC0gYVsxXSkuc2xpY2UoMCwgNSk7CiAgICAgICAgY29uc3QgbGlzdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0b3Atc3R1ZGVudHMtbGlzdCcpOwogICAgICAgIGxpc3QuaW5uZXJIVE1MID0gc29ydGVkLmxlbmd0aCA/ICIiIDogIjxsaSBzdHlsZT0nY29sb3I6Izk5OSc+QXVjdW5lIGRvbm7DqWUgw6lsw6h2ZTwvbGk+IjsKICAgICAgICBzb3J0ZWQuZm9yRWFjaCgoW25hbWUsIGNvdW50XSkgPT4gewogICAgICAgICAgICBsaXN0LmlubmVySFRNTCArPSBgPGxpIGNsYXNzPSJ0b3Atc3R1ZGVudC1pdGVtIj48c3Bhbj4ke25hbWV9PC9zcGFuPiA8c3Ryb25nPiR7Y291bnR9IGZvaXM8L3N0cm9uZz48L2xpPmA7CiAgICAgICAgfSk7CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0TW9udGhseVN0YXRzKCkgewogICAgICAgIGNvbnN0IG10aHMgPSBbXTsgY29uc3QgbiA9IG5ldyBEYXRlKCk7CiAgICAgICAgZm9yIChsZXQgaT01OyBpPj0wOyBpLS0pIHsgY29uc3QgZD1uZXcgRGF0ZShuLmdldEZ1bGxZZWFyKCksIG4uZ2V0TW9udGgoKS1pLCAxKTsgbXRocy5wdXNoKHsgbGFiZWw6IGQudG9Mb2NhbGVEYXRlU3RyaW5nKCdmci1GUicsIHttb250aDonc2hvcnQnLCB5ZWFyOicyLWRpZ2l0J30pLCBrZXk6IGAke2QuZ2V0RnVsbFllYXIoKX0tJHtTdHJpbmcoZC5nZXRNb250aCgpKzEpLnBhZFN0YXJ0KDIsJzAnKX1gLCBjb3VudDogMCB9KTsgfQogICAgICAgIFsuLi5hcHBEYXRhLmVudHJldGllbnMsIC4uLmFwcERhdGEucmV1bmlvbnMsIC4uLmFwcERhdGEuc3VpdmlFbGV2ZXNdLmZvckVhY2goaXQgPT4geyBpZihpdC5kYXRlKSB7IGNvbnN0IGsgPSBpdC5kYXRlLnN1YnN0cmluZygwLDcpOyBjb25zdCBtID0gbXRocy5maW5kKHg9Pngua2V5PT09ayk7IGlmKG0pIG0uY291bnQrKzsgfSB9KTsKICAgICAgICByZXR1cm4geyBsYWJlbHM6IG10aHMubWFwKG09Pm0ubGFiZWwpLCB2YWx1ZXM6IG10aHMubWFwKG09Pm0uY291bnQpIH07CiAgICB9CgogICAgZnVuY3Rpb24gcmVuZGVyQ2hhcnQoaWQsIHR5cGUsIGRhdGEpIHsKICAgICAgICBjb25zdCBjYW52YXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCk7IGlmKCFjYW52YXMpIHJldHVybjsKICAgICAgICBjb25zdCBjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTsgaWYoY2hhcnRJbnN0YW5jZXNbaWRdKSBjaGFydEluc3RhbmNlc1tpZF0uZGVzdHJveSgpOwogICAgICAgIGNoYXJ0SW5zdGFuY2VzW2lkXSA9IG5ldyBDaGFydChjdHgsIHsgdHlwZSwgZGF0YSwgb3B0aW9uczogeyByZXNwb25zaXZlOiB0cnVlLCBtYWludGFpbkFzcGVjdFJhdGlvOiBmYWxzZSB9IH0pOwogICAgfQoKICAgIGZ1bmN0aW9uIGxvYWRTZXR0aW5nc1VJKCkgewogICAgICAgIGxvYWRUZW1wbGF0ZXNVSSgpOyBsb2FkU2VwQ29uZmlnKCk7IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjZmctc2Nob29sJykudmFsdWU9YXBwRGF0YS5zZXR0aW5ncy5zY2hvb2w7IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjZmctdXNlcicpLnZhbHVlPWFwcERhdGEuc2V0dGluZ3MudXNlcjsgdXBkYXRlUHJldmlld3MoKTsgfQogICAgZnVuY3Rpb24gc2F2ZVNldHRpbmdzKCkgeyBhcHBEYXRhLnNldHRpbmdzLnNjaG9vbD1kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2ZnLXNjaG9vbCcpLnZhbHVlOyBhcHBEYXRhLnNldHRpbmdzLnVzZXI9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NmZy11c2VyJykudmFsdWU7IHNhdmVEYXRhKCk7IGFsZXJ0KCJFbnJlZ2lzdHLDqSIpOyB9CiAgICBmdW5jdGlvbiB1cGRhdGVQcmV2aWV3cygpIHsgaWYoYXBwRGF0YS5zZXR0aW5ncy5sb2dvKSB7IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjZmctbG9nby1wcmV2aWV3Jykuc3JjPWFwcERhdGEuc2V0dGluZ3MubG9nbzsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NmZy1sb2dvLXByZXZpZXcnKS5zdHlsZS5kaXNwbGF5PSdibG9jayc7IH0gaWYoYXBwRGF0YS5zZXR0aW5ncy5zaWduYXR1cmUpIHsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NmZy1zaWctcHJldmlldycpLnNyYz1hcHBEYXRhLnNldHRpbmdzLnNpZ25hdHVyZTsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NmZy1zaWctcHJldmlldycpLnN0eWxlLmRpc3BsYXk9J2Jsb2NrJzsgfSB9CiAgICBmdW5jdGlvbiBlbmNvZGVJbWFnZShpLCBpZCwgaykgeyBjb25zdCBmPWkuZmlsZXNbMF07IGNvbnN0IHI9bmV3IEZpbGVSZWFkZXIoKTsgci5vbmxvYWRlbmQ9KCk9PnsgYXBwRGF0YS5zZXR0aW5nc1trXT1yLnJlc3VsdDsgc2F2ZURhdGEoKTsgdXBkYXRlUHJldmlld3MoKTsgfTsgaWYoZikgci5yZWFkQXNEYXRhVVJMKGYpOyB9CiAgICBmdW5jdGlvbiBkZWxldGVJdGVtKGMsIGlkKSB7IGlmKGNvbmZpcm0oIlN1cHByaW1lciA/IikpIHsgYXBwRGF0YVtjXT1hcHBEYXRhW2NdLmZpbHRlcihpPT5pLmlkLnRvU3RyaW5nKCkhPT1pZC50b1N0cmluZygpKTsgc2F2ZURhdGEoKTsgcmVuZGVySGlzdG9yeSgpOyB9IH0KICAgIGZ1bmN0aW9uIGNsZWFyQWxsKCkgeyBpZihjb25maXJtKCJTdXBwcmltZXIgVE9VVEVTIGxlcyBkb25uw6llcyA/IikpIHsgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ3BlcmRpcl9waWxvdGVfdjEwJyk7IGxvY2F0aW9uLnJlbG9hZCgpOyB9IH0KICAgIGZ1bmN0aW9uIGV4cG9ydERhdGEoKSB7IGNvbnN0IGE9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpOyBhLmhyZWY9ImRhdGE6dGV4dC9qc29uO2NoYXJzZXQ9dXRmLTgsIitlbmNvZGVVUklDb21wb25lbnQoSlNPTi5zdHJpbmdpZnkoYXBwRGF0YSkpOyBhLmRvd25sb2FkPSJwZXJkaXJfYmFja3VwLmpzb24iOyBhLmNsaWNrKCk7IH0KICAgIGZ1bmN0aW9uIGltcG9ydERhdGEoaSkgeyBjb25zdCByPW5ldyBGaWxlUmVhZGVyKCk7IHIub25sb2FkPWU9PnsgdHJ5IHsgYXBwRGF0YT1KU09OLnBhcnNlKGUudGFyZ2V0LnJlc3VsdCk7IHNhdmVEYXRhKCk7IGxvY2F0aW9uLnJlbG9hZCgpOyB9IGNhdGNoKGVycikgeyBhbGVydCgiRm9ybWF0IGludmFsaWRlIik7IH0gfTsgci5yZWFkQXNUZXh0KGkuZmlsZXNbMF0pOyB9CgogICAgLy8g4pWQ4pWQ4pWQIFNIQVJFRDogVGVhY2hlciBsaXN0IGZyb20gUElMT1RFIGRvbm7DqWVzIOKVkOKVkOKVkAogICAgdmFyIF90ZWFjaGVycyA9IFtdOwogICAgdmFyIF9zdHVkZW50cyA9IFtdOwogICAgZnVuY3Rpb24gZmlsbFRlYWNoZXJTZWwoc2VsSWQsIHZhbCkgewogICAgICAgIHZhciBzZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChzZWxJZCk7IGlmKCFzZWwpIHJldHVybjsKICAgICAgICB2YXIgaCA9ICc8b3B0aW9uIHZhbHVlPSIiPi0tIENob2lzaXIgLS08L29wdGlvbj48b3B0aW9uIHZhbHVlPSJfX2MiPlx1MjcwRiBTYWlzaXIuLi48L29wdGlvbj4nOwogICAgICAgIF90ZWFjaGVycy5mb3JFYWNoKGZ1bmN0aW9uKHQpewogICAgICAgICAgICB2YXIgbiA9ICgodC5Ob218fHQubm9tfHwnJykgKyAnICcgKyAodFsnUHLDqW5vbSddfHx0LlByZW5vbXx8dFsncHLDqW5vbSddfHwnJykpLnRyaW0oKTsKICAgICAgICAgICAgaWYobikgaCArPSAnPG9wdGlvbiB2YWx1ZT0iJytuKyciJysobj09PXZhbD8nIHNlbGVjdGVkJzonJykrJz4nK24rJzwvb3B0aW9uPic7CiAgICAgICAgfSk7CiAgICAgICAgaWYodmFsICYmIHZhbCE9PSdfX2MnICYmIGguaW5kZXhPZigndmFsdWU9IicrdmFsKyciJyk8MCkgaCs9JzxvcHRpb24gdmFsdWU9IicrdmFsKyciIHNlbGVjdGVkPicrdmFsKyc8L29wdGlvbj4nOwogICAgICAgIHNlbC5pbm5lckhUTUw9aDsgaWYodmFsKSBzZWwudmFsdWU9dmFsOwogICAgICAgIHNlbC5vbmNoYW5nZT1mdW5jdGlvbigpeyBpZih0aGlzLnZhbHVlPT09J19fYycpe3ZhciB4PXByb21wdCgnTm9tIDonKTtpZih4JiZ4LnRyaW0oKSl7dGhpcy5pbnNlcnRBZGphY2VudEhUTUwoJ2JlZm9yZWVuZCcsJzxvcHRpb24gdmFsdWU9IicreC50cmltKCkrJyI+Jyt4LnRyaW0oKSsnPC9vcHRpb24+Jyk7dGhpcy52YWx1ZT14LnRyaW0oKTt9ZWxzZSB0aGlzLnZhbHVlPScnO30gfTsKICAgIH0KCiAgICAvLyDilZDilZDilZAgRVZFTkVNRU5UUyDilZDilZDilZAKICAgIHZhciBFVl9TPXt0b2RvOifDgCBmYWlyZScscHJvZ3Jlc3M6J0VuIGNvdXJzJyxkb25lOidUZXJtaW7DqScsYmxvY2tlZDonQmxvcXXDqSd9OwogICAgdmFyIEVWX0M9e3RvZG86JyNlNzRjM2MnLHByb2dyZXNzOicjZjM5YzEyJyxkb25lOicjMjdhZTYwJyxibG9ja2VkOicjOTVhNWE2J307CiAgICB2YXIgRVZfUD17aGF1dGU6J1x1ezFGNTM0fScsbW95ZW5uZTonXHV7MUY3RTF9JyxiYXNzZTonXHV7MUY3RTJ9J307CiAgICB2YXIgX2V2RmlsZT1udWxsOwoKCiAgICAvLyDilZDilZDilZAgQVVUT0NPTVBMRVRFIMOJTMOIVkVTIOKVkOKVkOKVkAogICAgZnVuY3Rpb24gZ2V0U3R1ZGVudE5hbWVzKCkgewogICAgICAgIHJldHVybiBfc3R1ZGVudHMubWFwKGZ1bmN0aW9uKHMpIHsKICAgICAgICAgICAgdmFyIG5vbSA9IChzLk5vbXx8cy5ub218fCcnKS50cmltKCk7CiAgICAgICAgICAgIHZhciBwcmVub20gPSAoc1snUHLDqW5vbSddfHxzLlByZW5vbXx8c1sncHLDqW5vbSddfHxzLnByZW5vbXx8JycpLnRyaW0oKTsKICAgICAgICAgICAgdmFyIGNsYXNzZSA9IChzLkNsYXNzZXx8cy5jbGFzc2V8fCcnKS50cmltKCk7CiAgICAgICAgICAgIHJldHVybiB7IGZ1bGw6IG5vbSArICcgJyArIHByZW5vbSwgY2xhc3NlOiBjbGFzc2UgfTsKICAgICAgICB9KS5maWx0ZXIoZnVuY3Rpb24ocykgeyByZXR1cm4gcy5mdWxsLnRyaW0oKTsgfSk7CiAgICB9CgogICAgZnVuY3Rpb24gYXR0YWNoU3R1ZGVudEFDKGlucHV0KSB7CiAgICAgICAgaWYgKGlucHV0Ll9hY0F0dGFjaGVkKSByZXR1cm47CiAgICAgICAgaW5wdXQuX2FjQXR0YWNoZWQgPSB0cnVlOwogICAgICAgIHZhciB3cmFwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgICAgd3JhcC5jbGFzc05hbWUgPSAnYWMtd3JhcCc7CiAgICAgICAgaW5wdXQucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUod3JhcCwgaW5wdXQpOwogICAgICAgIHdyYXAuYXBwZW5kQ2hpbGQoaW5wdXQpOwogICAgICAgIHZhciBsaXN0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgICAgbGlzdC5jbGFzc05hbWUgPSAnYWMtbGlzdCc7CiAgICAgICAgd3JhcC5hcHBlbmRDaGlsZChsaXN0KTsKICAgICAgICB2YXIgc2VsSWR4ID0gLTE7CgogICAgICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIHZhciBxID0gdGhpcy52YWx1ZS50cmltKCkudG9Mb3dlckNhc2UoKTsKICAgICAgICAgICAgaWYgKHEubGVuZ3RoIDwgMSB8fCAhX3N0dWRlbnRzLmxlbmd0aCkgeyBsaXN0LmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3cnKTsgcmV0dXJuOyB9CiAgICAgICAgICAgIHZhciBuYW1lcyA9IGdldFN0dWRlbnROYW1lcygpOwogICAgICAgICAgICB2YXIgbWF0Y2hlcyA9IG5hbWVzLmZpbHRlcihmdW5jdGlvbihzKSB7IHJldHVybiBzLmZ1bGwudG9Mb3dlckNhc2UoKS5pbmRleE9mKHEpID49IDA7IH0pLnNsaWNlKDAsIDEyKTsKICAgICAgICAgICAgaWYgKCFtYXRjaGVzLmxlbmd0aCkgeyBsaXN0LmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3cnKTsgcmV0dXJuOyB9CiAgICAgICAgICAgIHNlbElkeCA9IC0xOwogICAgICAgICAgICBsaXN0LmlubmVySFRNTCA9IG1hdGNoZXMubWFwKGZ1bmN0aW9uKHMsIGkpIHsKICAgICAgICAgICAgICAgIHJldHVybiAnPGRpdiBjbGFzcz0iYWMtaXRlbSIgZGF0YS12YWw9IicgKyBzLmZ1bGwgKyAnIj48c3Bhbj4nICsgcy5mdWxsICsgJzwvc3Bhbj4nICsgKHMuY2xhc3NlID8gJzxzcGFuIGNsYXNzPSJhYy1jbGFzc2UiPicgKyBzLmNsYXNzZSArICc8L3NwYW4+JyA6ICcnKSArICc8L2Rpdj4nOwogICAgICAgICAgICB9KS5qb2luKCcnKTsKICAgICAgICAgICAgbGlzdC5jbGFzc0xpc3QuYWRkKCdzaG93Jyk7CiAgICAgICAgICAgIGxpc3QucXVlcnlTZWxlY3RvckFsbCgnLmFjLWl0ZW0nKS5mb3JFYWNoKGZ1bmN0aW9uKGVsKSB7CiAgICAgICAgICAgICAgICBlbC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgICAgICAgICAgICAgIGlucHV0LnZhbHVlID0gdGhpcy5kYXRhc2V0LnZhbDsKICAgICAgICAgICAgICAgICAgICBsaXN0LmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3cnKTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9KTsKICAgICAgICB9KTsKCiAgICAgICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgdmFyIGl0ZW1zID0gbGlzdC5xdWVyeVNlbGVjdG9yQWxsKCcuYWMtaXRlbScpOwogICAgICAgICAgICBpZiAoIWl0ZW1zLmxlbmd0aCB8fCAhbGlzdC5jbGFzc0xpc3QuY29udGFpbnMoJ3Nob3cnKSkgcmV0dXJuOwogICAgICAgICAgICBpZiAoZS5rZXkgPT09ICdBcnJvd0Rvd24nKSB7IGUucHJldmVudERlZmF1bHQoKTsgc2VsSWR4ID0gTWF0aC5taW4oc2VsSWR4ICsgMSwgaXRlbXMubGVuZ3RoIC0gMSk7IHVwZGF0ZVNlbChpdGVtcyk7IH0KICAgICAgICAgICAgZWxzZSBpZiAoZS5rZXkgPT09ICdBcnJvd1VwJykgeyBlLnByZXZlbnREZWZhdWx0KCk7IHNlbElkeCA9IE1hdGgubWF4KHNlbElkeCAtIDEsIDApOyB1cGRhdGVTZWwoaXRlbXMpOyB9CiAgICAgICAgICAgIGVsc2UgaWYgKGUua2V5ID09PSAnRW50ZXInICYmIHNlbElkeCA+PSAwKSB7IGUucHJldmVudERlZmF1bHQoKTsgaW5wdXQudmFsdWUgPSBpdGVtc1tzZWxJZHhdLmRhdGFzZXQudmFsOyBsaXN0LmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3cnKTsgfQogICAgICAgICAgICBlbHNlIGlmIChlLmtleSA9PT0gJ0VzY2FwZScpIHsgbGlzdC5jbGFzc0xpc3QucmVtb3ZlKCdzaG93Jyk7IH0KICAgICAgICB9KTsKCiAgICAgICAgZnVuY3Rpb24gdXBkYXRlU2VsKGl0ZW1zKSB7IGl0ZW1zLmZvckVhY2goZnVuY3Rpb24oZWwsIGkpIHsgZWwuY2xhc3NMaXN0LnRvZ2dsZSgnYWN0aXZlJywgaSA9PT0gc2VsSWR4KTsgfSk7IH0KCiAgICAgICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignYmx1cicsIGZ1bmN0aW9uKCkgeyBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgeyBsaXN0LmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3cnKTsgfSwgMTUwKTsgfSk7CiAgICB9CgogICAgLy8gQXV0by1hdHRhY2ggdG8gYWxsIGV4aXN0aW5nIHN0dWRlbnQgbmFtZSBpbnB1dHMKICAgIGZ1bmN0aW9uIGluaXRTdHVkZW50QUMoKSB7CiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnI2VudC1zdHVkZW50cy1jb250YWluZXIgLm5hbWUsICNyZXUtc3R1ZGVudHMtY29udGFpbmVyIC5uYW1lLCBbZGF0YS1zdHVkZW50LWFjXScpLmZvckVhY2goYXR0YWNoU3R1ZGVudEFDKTsKICAgIH0KCiAgICAvLyDilZDilZDilZAgQVVUT0NPTVBMRVRFIEVOU0VJR05BTlRTIC8gUEVSU09OTkVMIOKVkOKVkOKVkAogICAgZnVuY3Rpb24gZ2V0VGVhY2hlck5hbWVzKCkgewogICAgICAgIHJldHVybiBfdGVhY2hlcnMubWFwKGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgdmFyIG5vbSA9ICh0Lk5vbXx8dC5ub218fCcnKS50cmltKCk7CiAgICAgICAgICAgIHZhciBwcmVub20gPSAodFsnUHLDqW5vbSddfHx0LlByZW5vbXx8dFsncHLDqW5vbSddfHx0LnByZW5vbXx8JycpLnRyaW0oKTsKICAgICAgICAgICAgcmV0dXJuIHsgZnVsbDogbm9tICsgJyAnICsgcHJlbm9tIH07CiAgICAgICAgfSkuZmlsdGVyKGZ1bmN0aW9uKHQpIHsgcmV0dXJuIHQuZnVsbC50cmltKCk7IH0pOwogICAgfQoKICAgIGZ1bmN0aW9uIGF0dGFjaFRlYWNoZXJBQyhpbnB1dCkgewogICAgICAgIGlmIChpbnB1dC5fYWNBdHRhY2hlZCkgcmV0dXJuOwogICAgICAgIGlucHV0Ll9hY0F0dGFjaGVkID0gdHJ1ZTsKICAgICAgICB2YXIgd3JhcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgICAgIHdyYXAuY2xhc3NOYW1lID0gJ2FjLXdyYXAnOwogICAgICAgIGlucHV0LnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKHdyYXAsIGlucHV0KTsKICAgICAgICB3cmFwLmFwcGVuZENoaWxkKGlucHV0KTsKICAgICAgICB2YXIgbGlzdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgICAgIGxpc3QuY2xhc3NOYW1lID0gJ2FjLWxpc3QnOwogICAgICAgIHdyYXAuYXBwZW5kQ2hpbGQobGlzdCk7CiAgICAgICAgdmFyIHNlbElkeCA9IC0xOwoKICAgICAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIGZ1bmN0aW9uKCkgewogICAgICAgICAgICB2YXIgcSA9IHRoaXMudmFsdWUudHJpbSgpLnRvTG93ZXJDYXNlKCk7CiAgICAgICAgICAgIGlmIChxLmxlbmd0aCA8IDEgfHwgIV90ZWFjaGVycy5sZW5ndGgpIHsgbGlzdC5jbGFzc0xpc3QucmVtb3ZlKCdzaG93Jyk7IHJldHVybjsgfQogICAgICAgICAgICB2YXIgbmFtZXMgPSBnZXRUZWFjaGVyTmFtZXMoKTsKICAgICAgICAgICAgdmFyIG1hdGNoZXMgPSBuYW1lcy5maWx0ZXIoZnVuY3Rpb24odCkgeyByZXR1cm4gdC5mdWxsLnRvTG93ZXJDYXNlKCkuaW5kZXhPZihxKSA+PSAwOyB9KS5zbGljZSgwLCAxMik7CiAgICAgICAgICAgIGlmICghbWF0Y2hlcy5sZW5ndGgpIHsgbGlzdC5jbGFzc0xpc3QucmVtb3ZlKCdzaG93Jyk7IHJldHVybjsgfQogICAgICAgICAgICBzZWxJZHggPSAtMTsKICAgICAgICAgICAgbGlzdC5pbm5lckhUTUwgPSBtYXRjaGVzLm1hcChmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICByZXR1cm4gJzxkaXYgY2xhc3M9ImFjLWl0ZW0iIGRhdGEtdmFsPSInICsgdC5mdWxsICsgJyI+PHNwYW4+JyArIHQuZnVsbCArICc8L3NwYW4+PHNwYW4gY2xhc3M9ImFjLWNsYXNzZSI+UHJvZjwvc3Bhbj48L2Rpdj4nOwogICAgICAgICAgICB9KS5qb2luKCcnKTsKICAgICAgICAgICAgbGlzdC5jbGFzc0xpc3QuYWRkKCdzaG93Jyk7CiAgICAgICAgICAgIGxpc3QucXVlcnlTZWxlY3RvckFsbCgnLmFjLWl0ZW0nKS5mb3JFYWNoKGZ1bmN0aW9uKGVsKSB7CiAgICAgICAgICAgICAgICBlbC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgICAgICAgICAgICAgIGlucHV0LnZhbHVlID0gdGhpcy5kYXRhc2V0LnZhbDsKICAgICAgICAgICAgICAgICAgICBsaXN0LmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3cnKTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9KTsKICAgICAgICB9KTsKCiAgICAgICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgdmFyIGl0ZW1zID0gbGlzdC5xdWVyeVNlbGVjdG9yQWxsKCcuYWMtaXRlbScpOwogICAgICAgICAgICBpZiAoIWl0ZW1zLmxlbmd0aCB8fCAhbGlzdC5jbGFzc0xpc3QuY29udGFpbnMoJ3Nob3cnKSkgcmV0dXJuOwogICAgICAgICAgICBpZiAoZS5rZXkgPT09ICdBcnJvd0Rvd24nKSB7IGUucHJldmVudERlZmF1bHQoKTsgc2VsSWR4ID0gTWF0aC5taW4oc2VsSWR4ICsgMSwgaXRlbXMubGVuZ3RoIC0gMSk7IHVwZGF0ZVNlbChpdGVtcyk7IH0KICAgICAgICAgICAgZWxzZSBpZiAoZS5rZXkgPT09ICdBcnJvd1VwJykgeyBlLnByZXZlbnREZWZhdWx0KCk7IHNlbElkeCA9IE1hdGgubWF4KHNlbElkeCAtIDEsIDApOyB1cGRhdGVTZWwoaXRlbXMpOyB9CiAgICAgICAgICAgIGVsc2UgaWYgKGUua2V5ID09PSAnRW50ZXInICYmIHNlbElkeCA+PSAwKSB7IGUucHJldmVudERlZmF1bHQoKTsgaW5wdXQudmFsdWUgPSBpdGVtc1tzZWxJZHhdLmRhdGFzZXQudmFsOyBsaXN0LmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3cnKTsgfQogICAgICAgICAgICBlbHNlIGlmIChlLmtleSA9PT0gJ0VzY2FwZScpIHsgbGlzdC5jbGFzc0xpc3QucmVtb3ZlKCdzaG93Jyk7IH0KICAgICAgICB9KTsKCiAgICAgICAgZnVuY3Rpb24gdXBkYXRlU2VsKGl0ZW1zKSB7IGl0ZW1zLmZvckVhY2goZnVuY3Rpb24oZWwsIGkpIHsgZWwuY2xhc3NMaXN0LnRvZ2dsZSgnYWN0aXZlJywgaSA9PT0gc2VsSWR4KTsgfSk7IH0KICAgICAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKCdibHVyJywgZnVuY3Rpb24oKSB7IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7IGxpc3QuY2xhc3NMaXN0LnJlbW92ZSgnc2hvdycpOyB9LCAxNTApOyB9KTsKICAgIH0KCiAgICBmdW5jdGlvbiBpbml0VGVhY2hlckFDKCkgewogICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJyNlbnQtdGVhY2hlcnMtY29udGFpbmVyIC5uYW1lLCAjcmV1LXRlYWNoZXJzLWNvbnRhaW5lciAubmFtZScpLmZvckVhY2goYXR0YWNoVGVhY2hlckFDKTsKICAgIH0KCgogICAgZnVuY3Rpb24gZXZQcmV2aWV3RmlsZShpbnApewogICAgICAgIHZhciBmPWlucC5maWxlc1swXTsKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZXYtZm5hbWUnKS50ZXh0Q29udGVudD1mP2YubmFtZSsnICgnKyhmLnNpemUvMTAyNCkudG9GaXhlZCgwKSsnIEtvKSc6Jyc7CiAgICAgICAgaWYoZiYmZi5zaXplPjUqMTAyNCoxMDI0KXthbGVydCgnTWF4IDUgTW8nKTtpbnAudmFsdWU9Jyc7X2V2RmlsZT1udWxsO3JldHVybjt9CiAgICAgICAgX2V2RmlsZT1mfHxudWxsOwogICAgfQogICAgZnVuY3Rpb24gdG9CNjQoZmlsZSxjYil7dmFyIHI9bmV3IEZpbGVSZWFkZXIoKTtyLm9ubG9hZD1mdW5jdGlvbihlKXtjYih7bmFtZTpmaWxlLm5hbWUsdHlwZTpmaWxlLnR5cGUsc2l6ZTpmaWxlLnNpemUsZGF0YTplLnRhcmdldC5yZXN1bHR9KTt9O3IucmVhZEFzRGF0YVVSTChmaWxlKTt9CgogICAgZnVuY3Rpb24gb3BlbkV2TW9kYWwoaWQpewogICAgICAgIHZhciBfZXZtPWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdldk1vZCcpO19ldm0uY2xhc3NMaXN0LmFkZCgnb3BlbicpO19ldm0uc3R5bGUuZGlzcGxheT0nZmxleCc7CiAgICAgICAgZmlsbFRlYWNoZXJTZWwoJ2V2LXJlc3AnKTtidWlsZENsYXNzU2VsZWN0KCk7ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2V2LW1zZ3BhcmVudHMnKS5jaGVja2VkPWZhbHNlOwogICAgICAgIAogICAgICAgIGlmKGlkKXsKICAgICAgICAgICAgdmFyIHA9KGFwcERhdGEuZXZlbnRzfHxbXSkuZmluZChmdW5jdGlvbih4KXtyZXR1cm4geC5pZC50b1N0cmluZygpPT09aWQudG9TdHJpbmcoKTt9KTtpZighcClyZXR1cm47CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdldi1tdCcpLnRleHRDb250ZW50PSdNb2RpZmllciBsXHUyMDE5w6l2w6luZW1lbnQnOwogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZXYtZWlkJykudmFsdWU9aWQ7ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2V2LW5hbWUnKS52YWx1ZT1wLm5hbWU7CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdldi1zdGFydCcpLnZhbHVlPXAuc3RhcnR8fCcnO2RvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdldi1kZWFkJykudmFsdWU9cC5kZWFkbGluZXx8Jyc7CiAgICAgICAgICAgIF9ldkNsYXNzZXM9KHAuY2xhc3Nlc3x8W10pLnNsaWNlKCk7cmVuZGVyRXZDbGFzc2VzKCk7CiAgICAgICAgICAgIGZpbGxUZWFjaGVyU2VsKCdldi1yZXNwJyxwLnJlc3ApOwogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZXYtbXNncGFyZW50cycpLmNoZWNrZWQ9ISFwLm1zZ1BhcmVudHM7ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2V2LWRlc2MnKS5pbm5lckhUTUw9cC5kZXNjfHwnJzsKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2V2LXRhZ3MnKS52YWx1ZT0ocC50YWdzfHxbXSkuam9pbignLCAnKTsKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2V2LWRlbC1idG4nKS5zdHlsZS5kaXNwbGF5PSdmbGV4JzsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZXYtbXQnKS50ZXh0Q29udGVudD0nTm91dmVsIMOpdsOpbmVtZW50Jztkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZXYtZWlkJykudmFsdWU9Jyc7CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdldi1uYW1lJykudmFsdWU9Jyc7ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2V2LXN0YXJ0JykudmFsdWU9bmV3IERhdGUoKS50b0lTT1N0cmluZygpLnNwbGl0KCdUJylbMF07CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdldi1kZWFkJykudmFsdWU9Jyc7CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdldi1kZXNjJykuaW5uZXJIVE1MPScnO2RvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdldi10YWdzJykudmFsdWU9Jyc7CiAgICAgICAgICAgIF9ldkNsYXNzZXM9W107cmVuZGVyRXZDbGFzc2VzKCk7CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdldi1kZWwtYnRuJykuc3R5bGUuZGlzcGxheT0nbm9uZSc7CiAgICAgICAgfQogICAgfQogICAgZnVuY3Rpb24gY2xvc2VFdk1vZGFsKCl7dmFyIG09ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2V2TW9kJyk7bS5jbGFzc0xpc3QucmVtb3ZlKCdvcGVuJyk7bS5zdHlsZS5kaXNwbGF5PSdub25lJzt9CiAgICBmdW5jdGlvbiBkZWxFdkZyb21Nb2RhbCgpe3ZhciBpZD1kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZXYtZWlkJykudmFsdWU7aWYoaWQmJmNvbmZpcm0oJ1N1cHByaW1lciA/Jykpe2FwcERhdGEuZXZlbnRzPShhcHBEYXRhLmV2ZW50c3x8W10pLmZpbHRlcihmdW5jdGlvbihwKXtyZXR1cm4gcC5pZC50b1N0cmluZygpIT09aWQudG9TdHJpbmcoKTt9KTtzYXZlRGF0YSgpO2Nsb3NlRXZNb2RhbCgpO3JlbmRlckV2ZW50cygpO319CgogICAgZnVuY3Rpb24gc2F2ZUV2ZW50KCl7CiAgICAgICAgdmFyIG5tPWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdldi1uYW1lJykudmFsdWUudHJpbSgpO2lmKCFubSl7YWxlcnQoJ0ludGl0dWzDqSByZXF1aXMnKTtyZXR1cm47fQogICAgICAgIHZhciBlaWQ9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2V2LWVpZCcpLnZhbHVlOwogICAgICAgIHZhciBvYmo9e2lkOmVpZHx8RGF0ZS5ub3coKS50b1N0cmluZygpLG5hbWU6bm0sc3RhcnQ6ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2V2LXN0YXJ0JykudmFsdWUsCiAgICAgICAgICAgIGRlYWRsaW5lOmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdldi1kZWFkJykudmFsdWUscmVzcDpkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZXYtcmVzcCcpLnZhbHVlLGNsYXNzZXM6X2V2Q2xhc3Nlcy5zbGljZSgpLAogICAgICAgICAgICBtc2dQYXJlbnRzOmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdldi1tc2dwYXJlbnRzJykuY2hlY2tlZCwKICAgICAgICAgICAgZGVzYzpkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZXYtZGVzYycpLmlubmVySFRNTCwKICAgICAgICAgICAgdGFnczpkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZXYtdGFncycpLnZhbHVlLnNwbGl0KCcsJykubWFwKGZ1bmN0aW9uKHQpe3JldHVybiB0LnRyaW0oKTt9KS5maWx0ZXIoQm9vbGVhbiksCiAgICAgICAgICAgIGNyZWF0ZWQ6bmV3IERhdGUoKS50b0lTT1N0cmluZygpfTsKICAgICAgICBpZighYXBwRGF0YS5ldmVudHMpIGFwcERhdGEuZXZlbnRzPVtdOwogICAgICAgIGlmKGVpZCl7CiAgICAgICAgICAgIHZhciBpZHg9LTE7Zm9yKHZhciBrPTA7azxhcHBEYXRhLmV2ZW50cy5sZW5ndGg7aysrKXtpZihTdHJpbmcoYXBwRGF0YS5ldmVudHNba10uaWQpPT09U3RyaW5nKGVpZCkpe2lkeD1rO2JyZWFrO319CiAgICAgICAgICAgIGlmKGlkeD49MCl7b2JqLmNyZWF0ZWQ9YXBwRGF0YS5ldmVudHNbaWR4XS5jcmVhdGVkO2FwcERhdGEuZXZlbnRzW2lkeF09b2JqO30KICAgICAgICAgICAgZWxzZXthcHBEYXRhLmV2ZW50cy5wdXNoKG9iaik7fQogICAgICAgIH1lbHNle2FwcERhdGEuZXZlbnRzLnB1c2gob2JqKTt9CiAgICAgICAgc2F2ZURhdGEoKTtjbG9zZUV2TW9kYWwoKTtyZW5kZXJFdmVudHMoKTsKICAgIH0KICAgIGZ1bmN0aW9uIGRsRXZGaWxlKGlkKXt2YXIgcD0oYXBwRGF0YS5ldmVudHN8fFtdKS5maW5kKGZ1bmN0aW9uKHgpe3JldHVybiB4LmlkLnRvU3RyaW5nKCk9PT1pZC50b1N0cmluZygpO30pO2lmKHAmJnAuZmlsZSl7dmFyIGE9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpO2EuaHJlZj1wLmZpbGUuZGF0YTthLmRvd25sb2FkPXAuZmlsZS5uYW1lO2EuY2xpY2soKTt9fQoKICAgIGZ1bmN0aW9uIHJlbmRlckV2ZW50cygpewogICAgICAgIGlmKCFhcHBEYXRhLmV2ZW50cylhcHBEYXRhLmV2ZW50cz1bXTsKICAgICAgICB2YXIgcXM9KGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdldi1zZWFyY2gnKS52YWx1ZXx8JycpLnRvTG93ZXJDYXNlKCkudHJpbSgpOwogICAgICAgIHZhciB0ZD1uZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkuc3BsaXQoJ1QnKVswXTsKICAgICAgICB2YXIgbGlzdD1hcHBEYXRhLmV2ZW50cy5maWx0ZXIoZnVuY3Rpb24ocCl7CiAgICAgICAgICAgIGlmKHFzJiZwLm5hbWUudG9Mb3dlckNhc2UoKS5pbmRleE9mKHFzKTwwJiYocC5yZXNwfHwnJykudG9Mb3dlckNhc2UoKS5pbmRleE9mKHFzKTwwKSByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0pOwogICAgICAgIGxpc3Quc29ydChmdW5jdGlvbihhLGIpe3JldHVybiBuZXcgRGF0ZShhLmRlYWRsaW5lfHxhLnN0YXJ0fHwnOTk5OScpLW5ldyBEYXRlKGIuZGVhZGxpbmV8fGIuc3RhcnR8fCc5OTk5Jyk7fSk7CiAgICAgICAgdmFyIGFsbD1hcHBEYXRhLmV2ZW50czsKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgna3BpLWV2LXRvdCcpLnRleHRDb250ZW50PWFsbC5sZW5ndGg7CiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2twaS1ldi1tc2cnKS50ZXh0Q29udGVudD1hbGwuZmlsdGVyKGZ1bmN0aW9uKHApe3JldHVybiBwLm1zZ1BhcmVudHM7fSkubGVuZ3RoOwogICAgICAgIHZhciBib3g9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2V2LWdyaWQnKTsKICAgICAgICBpZighbGlzdC5sZW5ndGgpe2JveC5pbm5lckhUTUw9JzxkaXYgc3R5bGU9InRleHQtYWxpZ246Y2VudGVyO2NvbG9yOiNiYmI7cGFkZGluZzo0MHB4IDIwcHg7Z3JpZC1jb2x1bW46MS8tMSI+PGkgY2xhc3M9ImZhcyBmYS1jYWxlbmRhci1jaGVjayIgc3R5bGU9ImZvbnQtc2l6ZToycmVtO21hcmdpbi1ib3R0b206MTBweDtkaXNwbGF5OmJsb2NrIj48L2k+QXVjdW4gw6l2w6luZW1lbnQ8L2Rpdj4nO3JldHVybjt9CiAgICAgICAgdmFyIGg9Jyc7bGlzdC5mb3JFYWNoKGZ1bmN0aW9uKHApewogICAgICAgICAgICB2YXIgYz1wLm1zZ1BhcmVudHM/JyMyN2FlNjAnOid2YXIoLS1oZWFkZXIpJyxsYXRlPXAuZGVhZGxpbmUmJnAuZGVhZGxpbmU8dGQ7CiAgICAgICAgICAgIHZhciBkcz1wLmRlYWRsaW5lP25ldyBEYXRlKHAuZGVhZGxpbmUpLnRvTG9jYWxlRGF0ZVN0cmluZygnZnItRlInLHtkYXk6J251bWVyaWMnLG1vbnRoOidzaG9ydCd9KTonJzsKICAgICAgICAgICAgaCs9JzxkaXYgY2xhc3M9ImV2LWNhcmQiIHN0eWxlPSJib3JkZXItbGVmdDo0cHggc29saWQgJytjKyciPic7CiAgICAgICAgICAgIGgrPSc8ZGl2IGNsYXNzPSJldi1jYXJkLWhkIj48aDQ+JysocC5tc2dQYXJlbnRzPydcdTI3MDlcdUZFMEYgJzonJykrIHAubmFtZSsnPC9oND48ZGl2IGNsYXNzPSJldi1jYXJkLWFjdHMiPjxidXR0b24gb25jbGljaz0ib3BlbkV2TW9kYWwoXCcnK3AuaWQrJ1wnKSIgdGl0bGU9Ik1vZGlmaWVyIj48aSBjbGFzcz0iZmFzIGZhLXBlbiI+PC9pPjwvYnV0dG9uPjxidXR0b24gb25jbGljaz0iaWYoY29uZmlybShcJ1N1cHByaW1lciA/XCcpKWRlbEV2RGlyZWN0KFwnJytwLmlkKydcJykiIHRpdGxlPSJTdXBwcmltZXIiPjxpIGNsYXNzPSJmYXMgZmEtdHJhc2giPjwvaT48L2J1dHRvbj48L2Rpdj48L2Rpdj4nOwogICAgICAgICAgICBoKz0nPGRpdiBjbGFzcz0iZXYtY2FyZC1tZXRhIj4nOwogICAgICAgICAgICBpZihkcykgaCs9JzxzcGFuPjxpIGNsYXNzPSJmYXMgZmEtZmxhZyI+PC9pPiAnK2RzKyhsYXRlPycgPGIgc3R5bGU9ImNvbG9yOiNlNzRjM2MiPlx1MjZBMCDDiWNow6lhbmNlIGTDqXBhc3PDqWU8L2I+JzonJykrJzwvc3Bhbj4nOwogICAgICAgICAgICBpZihwLnJlc3ApIGgrPSc8c3Bhbj48aSBjbGFzcz0iZmFzIGZhLXVzZXIiPjwvaT4gJytwLnJlc3ArJzwvc3Bhbj4nOwogICAgICAgICAgICBpZihwLm1zZ1BhcmVudHMpIGgrPSc8c3BhbiBzdHlsZT0iY29sb3I6IzI3YWU2MDtmb250LXNpemU6LjdyZW07Ij48aSBjbGFzcz0iZmFzIGZhLWVudmVsb3BlIj48L2k+IFBhcmVudHMgaW5mb3Jtw6lzPC9zcGFuPic7aCs9JzwvZGl2Pic7CiAgICAgICAgICAgIGlmKHAuZGVzYyl7aCs9JzxkaXYgY2xhc3M9ImV2LWNhcmQtZGVzYyI+JytwLmRlc2MrJzwvZGl2Pic7fQogICAgICAgICAgICBoKz0nPGRpdiBjbGFzcz0iZXYtY2FyZC1mdCI+JzsKICAgICAgICAgICAgaWYocC50YWdzJiZwLnRhZ3MubGVuZ3RoKSBwLnRhZ3MuZm9yRWFjaChmdW5jdGlvbih0KXtoKz0nPHNwYW4gY2xhc3M9ImV2LXRhZyI+Jyt0Kyc8L3NwYW4+Jzt9KTsKICAgICAgICAgICAgaWYocC5maWxlKSBoKz0nPHNwYW4gY2xhc3M9ImV2LWF0dGFjaCIgb25jbGljaz0iZGxFdkZpbGUoXCcnK3AuaWQrJ1wnKSIgdGl0bGU9IlTDqWzDqWNoYXJnZXIiPjxpIGNsYXNzPSJmYXMgZmEtcGFwZXJjbGlwIj48L2k+ICcrcC5maWxlLm5hbWUrJzwvc3Bhbj4nOwogICAgICAgICAgICAKICAgICAgICAgICAgaCs9JzwvZGl2PjwvZGl2Pic7CiAgICAgICAgfSk7Ym94LmlubmVySFRNTD1oOwogICAgfQogICAgZnVuY3Rpb24gZGVsRXZEaXJlY3QoaWQpe2FwcERhdGEuZXZlbnRzPShhcHBEYXRhLmV2ZW50c3x8W10pLmZpbHRlcihmdW5jdGlvbihwKXtyZXR1cm4gcC5pZC50b1N0cmluZygpIT09aWQudG9TdHJpbmcoKTt9KTtzYXZlRGF0YSgpO3JlbmRlckV2ZW50cygpO30KCiAgICAvLyDilZDilZDilZAgR0FOVFQgLyBQUk9DRURVUkVTIOKVkOKVkOKVkAogICAgdmFyIFZBQz17YWxsOls0Myw0NCw1MiwxXSxBOls3LDgsMTUsMTZdLEI6WzgsOSwxNiwxN10sQzpbOSwxMCwxNywxOF19OwogICAgdmFyIF9ndnM9bnVsbCxfZ3ZsPTE2LFNZPVtdOwogICAgZnVuY3Rpb24gYnVpbGRTWSgpe1NZPVtdO2Zvcih2YXIgdz0zNjt3PD01Mzt3KyspU1kucHVzaCh3KTtmb3IodmFyIHc9MTt3PD0yNjt3KyspU1kucHVzaCh3KTt9CiAgICBmdW5jdGlvbiBnZXRWVygpe3ZhciB6PShhcHBEYXRhLnNldHRpbmdzJiZhcHBEYXRhLnNldHRpbmdzLnpvbmUpfHwnQic7dmFyIHY9VkFDLmFsbC5zbGljZSgpO2lmKFZBQ1t6XSl2PXYuY29uY2F0KFZBQ1t6XSk7cmV0dXJuIHY7fQogICAgZnVuY3Rpb24gaXNvVyhkKXt2YXIgZHQ9bmV3IERhdGUoRGF0ZS5VVEMoZC5nZXRGdWxsWWVhcigpLGQuZ2V0TW9udGgoKSxkLmdldERhdGUoKSkpO2R0LnNldFVUQ0RhdGUoZHQuZ2V0VVRDRGF0ZSgpKzQtKGR0LmdldFVUQ0RheSgpfHw3KSk7dmFyIHkwPW5ldyBEYXRlKERhdGUuVVRDKGR0LmdldFVUQ0Z1bGxZZWFyKCksMCwxKSk7cmV0dXJuIE1hdGguY2VpbCgoKChkdC15MCkvODY0ZTUpKzEpLzcpO30KICAgIGZ1bmN0aW9uIGN1clcoKXtyZXR1cm4gaXNvVyhuZXcgRGF0ZSgpKTt9CiAgICBmdW5jdGlvbiB3a01vKHcpe3ZhciB5PXc+PTM2PzIwMjU6MjAyNjt2YXIgajQ9bmV3IERhdGUoeSwwLDQpO3ZhciBkPW5ldyBEYXRlKGo0LmdldFRpbWUoKSsoKHctMSkqNy0oKGo0LmdldERheSgpKzYpJTcpKSo4NjRlNSk7dmFyIG1uPWQudG9Mb2NhbGVEYXRlU3RyaW5nKCdmci1GUicse21vbnRoOidzaG9ydCd9KS5yZXBsYWNlKCcuJywnJyk7cmV0dXJuIG1uLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpK21uLnNsaWNlKDEpO30KICAgIGZ1bmN0aW9uIGluaXRHYW50dFZpZXcoKXtidWlsZFNZKCk7dmFyIGN3PWN1clcoKSxpPVNZLmluZGV4T2YoY3cpO2lmKGk8MClpPTA7X2d2cz1NYXRoLm1heCgwLGkpO19ndmw9MTY7d2luZG93Ll9nYW50dFJlYWR5PXRydWU7fQogICAgZnVuY3Rpb24gZ3RQcmV2KCl7X2d2cz1NYXRoLm1heCgwLF9ndnMtX2d2bCk7cmVuZGVyR2FudHQoKTt9CiAgICBmdW5jdGlvbiBndE5leHQoKXtfZ3ZzPU1hdGgubWluKFNZLmxlbmd0aC1fZ3ZsLF9ndnMrX2d2bCk7aWYoX2d2czwwKV9ndnM9MDtyZW5kZXJHYW50dCgpO30KICAgIGZ1bmN0aW9uIGd0VG9kYXkoKXt2YXIgY3c9Y3VyVygpLGk9U1kuaW5kZXhPZihjdyk7aWYoaTwwKWk9MDtfZ3ZzPU1hdGgubWF4KDAsaSk7X2d2bD0xNjtyZW5kZXJHYW50dCgpO30KICAgIGZ1bmN0aW9uIGd0WWVhcigpe19ndnM9MDtfZ3ZsPVNZLmxlbmd0aDtyZW5kZXJHYW50dCgpO19ndmw9MTY7fQoKICAgIGZ1bmN0aW9uIG9wZW5HdE1vZGFsKGlkKXsKICAgICAgICB2YXIgX2d0bT1kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ3RNb2QnKTtfZ3RtLmNsYXNzTGlzdC5hZGQoJ29wZW4nKTtfZ3RtLnN0eWxlLmRpc3BsYXk9J2ZsZXgnOwogICAgICAgIGZpbGxUZWFjaGVyU2VsKCdndC1yZXNwJyk7dmFyIGN3PWN1clcoKTsKICAgICAgICBpZihpZCl7dmFyIGc9KGFwcERhdGEuZ2FudHR8fFtdKS5maW5kKGZ1bmN0aW9uKHgpe3JldHVybiB4LmlkLnRvU3RyaW5nKCk9PT1pZC50b1N0cmluZygpO30pO2lmKCFnKXJldHVybjsKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2d0LW10JykudGV4dENvbnRlbnQ9J01vZGlmaWVyIGxceDI3w6ljaMOpYW5jZSc7ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2d0LWVpZCcpLnZhbHVlPWlkOwogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ3QtbmFtZScpLnZhbHVlPWcubmFtZTtkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ3QtY29kZScpLnZhbHVlPWcuY29kZXx8Jyc7CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdndC1jYXQnKS52YWx1ZT1nLmNhdHx8J0F1dHJlJztkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ3Qtd3MnKS52YWx1ZT1nLndzdGFydHx8Y3c7CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdndC13ZScpLnZhbHVlPWcud2VuZHx8Y3c7ZmlsbFRlYWNoZXJTZWwoJ2d0LXJlc3AnLGcucmVzcCk7CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdndC1ub3RlcycpLmlubmVySFRNTD1nLm5vdGVzfHwnJzsKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2d0LWRlbC1idG4nKS5zdHlsZS5kaXNwbGF5PSdmbGV4JzsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ3QtbXQnKS50ZXh0Q29udGVudD0nTm91dmVsbGUgw6ljaMOpYW5jZSc7ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2d0LWVpZCcpLnZhbHVlPScnOwogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ3QtbmFtZScpLnZhbHVlPScnO2RvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdndC1jb2RlJykudmFsdWU9Jyc7CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdndC1jYXQnKS52YWx1ZT0nQXV0cmUnO2RvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdndC13cycpLnZhbHVlPWN3OwogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ3Qtd2UnKS52YWx1ZT1jdztkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ3Qtbm90ZXMnKS5pbm5lckhUTUw9Jyc7CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdndC1kZWwtYnRuJykuc3R5bGUuZGlzcGxheT0nbm9uZSc7CiAgICAgICAgfQogICAgfQogICAgZnVuY3Rpb24gY2xvc2VHdE1vZGFsKCl7dmFyIG09ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2d0TW9kJyk7bS5jbGFzc0xpc3QucmVtb3ZlKCdvcGVuJyk7bS5zdHlsZS5kaXNwbGF5PSdub25lJzt9CiAgICBmdW5jdGlvbiBkZWxHdEZyb21Nb2RhbCgpe3ZhciBpZD1kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ3QtZWlkJykudmFsdWU7aWYoaWQmJmNvbmZpcm0oJ1N1cHByaW1lciBjZXR0ZSBwcm9jw6lkdXJlID8nKSl7YXBwRGF0YS5nYW50dD0oYXBwRGF0YS5nYW50dHx8W10pLmZpbHRlcihmdW5jdGlvbihnKXtyZXR1cm4gZy5pZC50b1N0cmluZygpIT09aWQudG9TdHJpbmcoKTt9KTtzYXZlRGF0YSgpO2Nsb3NlR3RNb2RhbCgpO3JlbmRlckdhbnR0KCk7fX0KICAgIGZ1bmN0aW9uIHRvZ2dsZUd0RG9uZShpZCl7dmFyIGc9KGFwcERhdGEuZ2FudHR8fFtdKS5maW5kKGZ1bmN0aW9uKHgpe3JldHVybiB4LmlkLnRvU3RyaW5nKCk9PT1pZC50b1N0cmluZygpO30pO2lmKGcpe2cuZG9uZT0hZy5kb25lO3NhdmVEYXRhKCk7cmVuZGVyR2FudHQoKTt9fQogICAgZnVuY3Rpb24gc2F2ZUd0KCl7CiAgICAgICAgdmFyIG5tPWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdndC1uYW1lJykudmFsdWUudHJpbSgpO2lmKCFubSl7YWxlcnQoJ0ludGl0dWzDqSByZXF1aXMnKTtyZXR1cm47fQogICAgICAgIHZhciBlaWQ9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2d0LWVpZCcpLnZhbHVlOwogICAgICAgIHZhciB3cz1wYXJzZUludChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ3Qtd3MnKS52YWx1ZSl8fDEsd2U9cGFyc2VJbnQoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2d0LXdlJykudmFsdWUpfHx3czsKICAgICAgICB2YXIgb2JqPXtpZDplaWR8fERhdGUubm93KCkudG9TdHJpbmcoKSxuYW1lOm5tLGNvZGU6ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2d0LWNvZGUnKS52YWx1ZS50cmltKCksCiAgICAgICAgICAgIGNhdDpkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ3QtY2F0JykudmFsdWUsd3N0YXJ0OndzLHdlbmQ6d2UsCiAgICAgICAgICAgIGRvbmU6ZWlkPygoYXBwRGF0YS5nYW50dHx8W10pLmZpbmQoZnVuY3Rpb24oZyl7cmV0dXJuIGcuaWQudG9TdHJpbmcoKT09PWVpZC50b1N0cmluZygpfSl8fHt9KS5kb25lfHxmYWxzZTpmYWxzZSwKICAgICAgICAgICAgcmVzcDpkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ3QtcmVzcCcpLnZhbHVlLG5vdGVzOmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdndC1ub3RlcycpLmlubmVySFRNTH07CiAgICAgICAgaWYoIWFwcERhdGEuZ2FudHQpYXBwRGF0YS5nYW50dD1bXTsKICAgICAgICBpZihlaWQpe3ZhciBpPWFwcERhdGEuZ2FudHQuZmluZEluZGV4KGZ1bmN0aW9uKGcpe3JldHVybiBnLmlkLnRvU3RyaW5nKCk9PT1laWQudG9TdHJpbmcoKTt9KTtpZihpPj0wKWFwcERhdGEuZ2FudHRbaV09b2JqO2Vsc2UgYXBwRGF0YS5nYW50dC5wdXNoKG9iaik7fQogICAgICAgIGVsc2UgYXBwRGF0YS5nYW50dC5wdXNoKG9iaik7CiAgICAgICAgc2F2ZURhdGEoKTtjbG9zZUd0TW9kYWwoKTtyZW5kZXJHYW50dCgpOwogICAgfQoKICAgIGZ1bmN0aW9uIHdJblIodyx3cyx3ZSl7cmV0dXJuIHdzPD13ZT8odz49d3MmJnc8PXdlKToodz49d3N8fHc8PXdlKTt9CgogICAgZnVuY3Rpb24gcmVuZGVyR2FudHQoKXsKICAgICAgICBpZighU1kubGVuZ3RoKWJ1aWxkU1koKTtpZihfZ3ZzPT09bnVsbClpbml0R2FudHRWaWV3KCk7CiAgICAgICAgdmFyIGZjPWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdndC1mYycpLnZhbHVlOwogICAgICAgIHZhciBwcm9jcz0oYXBwRGF0YS5wcm9jZWR1cmVzfHxbXSkuZmlsdGVyKGZ1bmN0aW9uKHApe3JldHVybiAocC53c3RhcnR8fHAuYW5uZWUpJiYhcC5kb25lJiYoZmM9PT0nQUxMJ3x8cC5jYXQ9PT1mYyk7fSk7CiAgICAgICAgLy8gQWxzbyBpbmNsdWRlIHN0YW5kYWxvbmUgZ2FudHQgaXRlbXMgKMOpY2jDqWFuY2VzIG5vdCBsaW5rZWQgdG8gcHJvY2VkdXJlcykKICAgICAgICB2YXIgZ2FudHRJdGVtcz0oYXBwRGF0YS5nYW50dHx8W10pLmZpbHRlcihmdW5jdGlvbihnKXtyZXR1cm4gZy53c3RhcnQmJiFnLmRvbmUmJihmYz09PSdBTEwnfHxnLmNhdD09PWZjKTt9KTsKICAgICAgICBnYW50dEl0ZW1zLmZvckVhY2goZnVuY3Rpb24oZyl7aWYoIWcudGl0bGUpZy50aXRsZT1nLm5hbWU7fSk7CiAgICAgICAgcHJvY3M9cHJvY3MuY29uY2F0KGdhbnR0SXRlbXMpOwogICAgICAgIC8vIFNvcnQgYnkgd3N0YXJ0IHRoZW4gY29kZSBudW1iZXIKICAgICAgICBwcm9jcy5zb3J0KGZ1bmN0aW9uKGEsYil7CiAgICAgICAgICAgIC8vIGFubmVlIGl0ZW1zIGdvIHRvIHRoZSBlbmQKICAgICAgICAgICAgaWYoYS5hbm5lZSYmIWIuYW5uZWUpcmV0dXJuIDE7aWYoIWEuYW5uZWUmJmIuYW5uZWUpcmV0dXJuIC0xOwogICAgICAgICAgICBpZihhLmFubmVlJiZiLmFubmVlKXJldHVybiBuYXRDb2RlU29ydChhLGIpOwogICAgICAgICAgICAvLyBvdGhlcnMgYnkgd3N0YXJ0IHRoZW4gd2VuZAogICAgICAgICAgICB2YXIgaWE9U1kuaW5kZXhPZihhLndzdGFydCksaWI9U1kuaW5kZXhPZihiLndzdGFydCk7CiAgICAgICAgICAgIGlmKGlhPDApaWE9OTk5O2lmKGliPDApaWI9OTk5OwogICAgICAgICAgICBpZihpYSE9PWliKXJldHVybiBpYS1pYjsKICAgICAgICAgICAgdmFyIGVhPVNZLmluZGV4T2YoYS53ZW5kKSxlYj1TWS5pbmRleE9mKGIud2VuZCk7CiAgICAgICAgICAgIGlmKGVhPDApZWE9OTk5O2lmKGViPDApZWI9OTk5OwogICAgICAgICAgICBpZihlYSE9PWViKXJldHVybiBlYS1lYjsKICAgICAgICAgICAgcmV0dXJuIG5hdENvZGVTb3J0KGEsYik7CiAgICAgICAgfSk7CiAgICAgICAgdmFyIHZsPU1hdGgubWluKF9ndmwsU1kubGVuZ3RoLV9ndnMpLHZpcz1TWS5zbGljZShfZ3ZzLF9ndnMrdmwpLGN3PWN1clcoKSx2dz1nZXRWVygpOwogICAgICAgIHZhciBpdGVtcz1wcm9jcy5maWx0ZXIoZnVuY3Rpb24oZyl7aWYoZy5hbm5lZSlyZXR1cm4gdHJ1ZTtmb3IodmFyIHZpPTA7dmk8dmlzLmxlbmd0aDt2aSsrKXtpZih3SW5SKHZpc1t2aV0sZy53c3RhcnQsZy53ZW5kKSlyZXR1cm4gdHJ1ZTt9cmV0dXJuIGZhbHNlO30pOwogICAgICAgIGlmKHZpcy5sZW5ndGgpIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdndC1wZXInKS50ZXh0Q29udGVudD0nUycrdmlzWzBdKycgXHUyMTkyIFMnK3Zpc1t2aXMubGVuZ3RoLTFdKycgKCcrdmlzLmxlbmd0aCsnIHNlbS4pJzsKICAgICAgICAvLyBNb250aCBoZWFkZXJzCiAgICAgICAgdmFyIG1vcz1bXSxjbT0nJzt2aXMuZm9yRWFjaChmdW5jdGlvbih3KXt2YXIgbWw9d2tNbyh3KTtpZihtbCE9PWNtKXttb3MucHVzaCh7bjptbCxzOjF9KTtjbT1tbDt9ZWxzZSBtb3NbbW9zLmxlbmd0aC0xXS5zKys7fSk7CiAgICAgICAgdmFyIGg9Jzx0aGVhZD48dHI+PHRoIGNsYXNzPSJndC1tbyBndC1sYyIgcm93c3Bhbj0iMiI+UHJvY8OpZHVyZTwvdGg+PHRoIGNsYXNzPSJndC1tbyBndC1kYyIgcm93c3Bhbj0iMiI+XHUyNzE0PC90aD4nOwogICAgICAgIG1vcy5mb3JFYWNoKGZ1bmN0aW9uKG0pe2grPSc8dGggY2xhc3M9Imd0LW1vIiBjb2xzcGFuPSInK20ucysnIj4nK20ubisnPC90aD4nO30pOwogICAgICAgIGgrPSc8L3RyPjx0cj4nO3Zpcy5mb3JFYWNoKGZ1bmN0aW9uKHcpewogICAgICAgICAgICB2YXIgY2xzPScnOwogICAgICAgICAgICBpZih3PT09Y3cpIGNscz0nZ3QtY3cnOwogICAgICAgICAgICBlbHNlIGlmKHZ3LmluZGV4T2Yodyk+PTApIGNscz0nZ3QtdmEnOwogICAgICAgICAgICBoKz0nPHRoJysoY2xzPycgY2xhc3M9IicrY2xzKyciJzonJykrJz5TJyt3Kyc8L3RoPic7CiAgICAgICAgfSk7CiAgICAgICAgaCs9JzwvdHI+PC90aGVhZD48dGJvZHk+JzsKICAgICAgICBpZighaXRlbXMubGVuZ3RoKSBoKz0nPHRyPjx0ZCBjb2xzcGFuPSInKygyK3Zpcy5sZW5ndGgpKyciIHN0eWxlPSJ0ZXh0LWFsaWduOmNlbnRlcjtjb2xvcjojYmJiO3BhZGRpbmc6MzBweCI+PGkgY2xhc3M9ImZhcyBmYS1zdHJlYW0iIHN0eWxlPSJmb250LXNpemU6MS4zcmVtO2Rpc3BsYXk6YmxvY2s7bWFyZ2luLWJvdHRvbTo2cHgiPjwvaT5BdWN1bmUgcHJvY8OpZHVyZSDigJQgY2xpcXVleiArR8OpcmVyIHBvdXIgY29tbWVuY2VyPC90ZD48L3RyPic7CiAgICAgICAgaXRlbXMuZm9yRWFjaChmdW5jdGlvbihnKXsKICAgICAgICAgICAgdmFyIGNvbD1nZXRQcm9jQ29sb3IoZy5jb2RlKTsKICAgICAgICAgICAgaCs9Jzx0cicrKGcuZG9uZT8nIHN0eWxlPSJvcGFjaXR5Oi42Iic6JycpKyc+JzsKICAgICAgICAgICAgdmFyIGlzUmVhbFByb2M9KGFwcERhdGEucHJvY2VkdXJlc3x8W10pLmluZGV4T2YoZyk+PTA7CiAgICAgICAgICAgIHZhciBoYXNMaW5rZWRQcm9jPSFpc1JlYWxQcm9jJiZnLmNvZGUmJihhcHBEYXRhLnByb2NlZHVyZXN8fFtdKS5zb21lKGZ1bmN0aW9uKHBwKXtyZXR1cm4gcHAuY29kZT09PWcuY29kZTt9KTsKICAgICAgICAgICAgaWYoaXNSZWFsUHJvYyYmZy5jb2RlKXsKICAgICAgICAgICAgICAgIGgrPSc8dGQgY2xhc3M9Imd0LWxhIiBvbmNsaWNrPSJ3aW5kb3cudmlld1Byb2NSZWFkb25seShcJycrKChnLmNvZGV8fCcnKS5yZXBsYWNlKC8nL2csIlxcJyIpKSsnXCcpIiBzdHlsZT0iY3Vyc29yOnBvaW50ZXIiIHRpdGxlPSJWb2lyIGxhIHByb2PDqWR1cmUiPicrKGcudGl0bGV8fGcubmFtZXx8JycpKyc8L3RkPic7CiAgICAgICAgICAgIH0gZWxzZSBpZihoYXNMaW5rZWRQcm9jKXsKICAgICAgICAgICAgICAgIGgrPSc8dGQgY2xhc3M9Imd0LWxhIiBzdHlsZT0iY3Vyc29yOnBvaW50ZXIiPic7CiAgICAgICAgICAgICAgICBoKz0nPHNwYW4gb25jbGljaz0id2luZG93LnZpZXdQcm9jUmVhZG9ubHkoXCcnKygoZy5jb2RlfHwnJykucmVwbGFjZSgvJy9nLCJcXCciKSkrJ1wnKSIgdGl0bGU9IlZvaXIgbGEgcHJvY8OpZHVyZSI+JysoZy50aXRsZXx8Zy5uYW1lfHwnJykrJzwvc3Bhbj4nOwogICAgICAgICAgICAgICAgaCs9JyA8aSBjbGFzcz0iZmFzIGZhLXBlbmNpbC1hbHQiIG9uY2xpY2s9ImV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO3dpbmRvdy5vcGVuR3RNb2RhbChcJycrZy5pZCsnXCcpIiBzdHlsZT0iY29sb3I6Izg4ODtmb250LXNpemU6LjdyZW07Y3Vyc29yOnBvaW50ZXI7bWFyZ2luLWxlZnQ6NnB4IiB0aXRsZT0iTW9kaWZpZXIgbFx4MjfDqWNow6lhbmNlIj48L2k+JzsKICAgICAgICAgICAgICAgIGgrPSc8L3RkPic7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBoKz0nPHRkIGNsYXNzPSJndC1sYSIgb25jbGljaz0id2luZG93Lm9wZW5HdE1vZGFsKFwnJytnLmlkKydcJykiIHN0eWxlPSJjdXJzb3I6cG9pbnRlciIgdGl0bGU9Ik1vZGlmaWVyIGxceDI3w6ljaMOpYW5jZSI+JysoZy50aXRsZXx8Zy5uYW1lfHwnJykrJzwvdGQ+JzsKICAgICAgICAgICAgfQogICAgICAgICAgICB2YXIgaXNBbm5lZT1nLmFubmVlfHxmYWxzZTsKICAgICAgICAgICAgaCs9Jzx0ZCBjbGFzcz0iZ3QtY2siPicrKGlzQW5uZWU/JzxzcGFuIHRpdGxlPSLDgCBsXCdhbm7DqWUiIHN0eWxlPSJjb2xvcjojYWFhO2ZvbnQtc2l6ZTouN3JlbSI+XHUyMjFFPC9zcGFuPic6JzxpbnB1dCB0eXBlPSJjaGVja2JveCIgJysoZy5kb25lPydjaGVja2VkJzonJykrJyBvbmNoYW5nZT0id2luZG93LnRvZ2dsZVByb2NEb25lKFwnJytnLmlkKydcJykiIHRpdGxlPSJUZXJtaW7DqWUiPicpKyc8L3RkPic7CiAgICAgICAgICAgIHZpcy5mb3JFYWNoKGZ1bmN0aW9uKHcpewogICAgICAgICAgICAgICAgdmFyIHZhYz12dy5pbmRleE9mKHcpPj0wLCBpcj13SW5SKHcsZy53c3RhcnQsZy53ZW5kKTsKICAgICAgICAgICAgICAgIGgrPSc8dGQnKyh2YWM/JyBjbGFzcz0iZ3QtdmEiJzonJykrJyBzdHlsZT0icG9zaXRpb246cmVsYXRpdmUiPic7CiAgICAgICAgICAgICAgICBpZihpcikgaCs9JzxkaXYgY2xhc3M9Imd0LWNmIiBzdHlsZT0iYmFja2dyb3VuZDonK2NvbCsnOy13ZWJraXQtcHJpbnQtY29sb3ItYWRqdXN0OmV4YWN0O3ByaW50LWNvbG9yLWFkanVzdDpleGFjdCcrKGcuZG9uZT8nO29wYWNpdHk6LjQnOicnKSsnIj4nKyc8L2Rpdj4nOwogICAgICAgICAgICAgICAgaCs9JzwvdGQ+JzsKICAgICAgICAgICAgfSk7aCs9JzwvdHI+JzsKICAgICAgICB9KTsKICAgICAgICBoKz0nPC90Ym9keT4nO2RvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdndC10YmwnKS5pbm5lckhUTUw9aDsKICAgICAgICAvLyBVcGRhdGUgZmlsdGVyIG9wdGlvbnMgZHluYW1pY2FsbHkKICAgICAgICB2YXIgZnNlbD1kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ3QtZmMnKTt2YXIgY3VyVmFsPWZzZWwudmFsdWU7CiAgICAgICAgdmFyIGNhdHMyPXt9OyhhcHBEYXRhLnByb2NlZHVyZXN8fFtdKS5mb3JFYWNoKGZ1bmN0aW9uKHBwKXtpZihwcC5jYXQmJihwcC53c3RhcnR8fHBwLmFubmVlKSljYXRzMltwcC5jYXRdPTE7fSk7CiAgICAgICAgKGFwcERhdGEuZ2FudHR8fFtdKS5mb3JFYWNoKGZ1bmN0aW9uKGdnKXtpZihnZy5jYXQmJmdnLndzdGFydCljYXRzMltnZy5jYXRdPTE7fSk7CiAgICAgICAgdmFyIGZvcHRzPSc8b3B0aW9uIHZhbHVlPSJBTEwiPlRvdXRlcyBjYXTDqWdvcmllczwvb3B0aW9uPic7CiAgICAgICAgT2JqZWN0LmtleXMoY2F0czIpLnNvcnQoKS5mb3JFYWNoKGZ1bmN0aW9uKGMpe2ZvcHRzKz0nPG9wdGlvbiB2YWx1ZT0iJytjKyciJysoY3VyVmFsPT09Yz8nIHNlbGVjdGVkJzonJykrJz4nK2MrJzwvb3B0aW9uPic7fSk7CiAgICAgICAgZnNlbC5pbm5lckhUTUw9Zm9wdHM7CiAgICB9CgoKICAgICAgICAvLyBTaG93IGxhc3QgZXhwb3J0CiAgICAgICAgaWYoYXBwRGF0YS5zZXR0aW5ncyYmYXBwRGF0YS5zZXR0aW5ncy5sYXN0RXhwb3J0KXsKICAgICAgICAgICAgdmFyIGVsPWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsYXN0LWV4cG9ydCcpOwogICAgICAgICAgICBpZihlbCllbC50ZXh0Q29udGVudD0nRGVybmllciBleHBvcnQgOiAnK25ldyBEYXRlKGFwcERhdGEuc2V0dGluZ3MubGFzdEV4cG9ydCkudG9Mb2NhbGVTdHJpbmcoJ2ZyLUZSJyk7CiAgICAgICAgfQoKICAgIHdpbmRvdy5zYXZlRXZlbnQgPSBzYXZlRXZlbnQ7CiAgICB3aW5kb3cub3BlbkV2TW9kYWwgPSBvcGVuRXZNb2RhbDsKICAgIHdpbmRvdy5jbG9zZUV2TW9kYWwgPSBjbG9zZUV2TW9kYWw7CiAgICB3aW5kb3cuZGVsRXZGcm9tTW9kYWwgPSBkZWxFdkZyb21Nb2RhbDsKICAgIHdpbmRvdy5maWxsVGVhY2hlclNlbCA9IGZpbGxUZWFjaGVyU2VsOwogICAgd2luZG93LnBpY2tTYXZlRmlsZSA9IHBpY2tTYXZlRmlsZTsKICAgIHdpbmRvdy5waWNrRXhpc3RpbmdGaWxlID0gcGlja0V4aXN0aW5nRmlsZTsKICAgIHdpbmRvdy51bmxpbmtGaWxlID0gdW5saW5rRmlsZTsKICAgIHdpbmRvdy53cml0ZVRvRmlsZSA9IHdyaXRlVG9GaWxlOwogICAgd2luZG93LmxvYWRGcm9tRmlsZSA9IGxvYWRGcm9tRmlsZTsKICAgIHdpbmRvdy51cGRhdGVGaWxlVUkgPSB1cGRhdGVGaWxlVUk7CiAgICB3aW5kb3cucmVzdG9yZUZpbGVIYW5kbGUgPSByZXN0b3JlRmlsZUhhbmRsZTsKICAgIHdpbmRvdy5leHBvcnREYXRhID0gZXhwb3J0RGF0YTsKICAgIHdpbmRvdy5pbXBvcnREYXRhID0gaW1wb3J0RGF0YTsKPC9zY3JpcHQ+Cgo8c2NyaXB0PgooZnVuY3Rpb24oKXsKICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgZnVuY3Rpb24oZSkgewogICAgICAgIGlmICghZS5kYXRhIHx8IGUuZGF0YS50eXBlICE9PSAncGlsb3RlLXNldHRpbmdzJykgcmV0dXJuOwogICAgICAgIHZhciBzID0gZS5kYXRhLmRhdGE7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgaWYgKHR5cGVvZiBhcHBEYXRhICE9PSAndW5kZWZpbmVkJykgewogICAgICAgICAgICAgICAgaWYgKHMuc2Nob29sKSBhcHBEYXRhLnNldHRpbmdzLnNjaG9vbCA9IHMuc2Nob29sOwogICAgICAgICAgICAgICAgaWYgKHMubmFtZSkgYXBwRGF0YS5zZXR0aW5ncy51c2VyID0gcy5uYW1lOwogICAgICAgICAgICAgICAgaWYgKHMubG9nb1NyYykgYXBwRGF0YS5zZXR0aW5ncy5sb2dvID0gcy5sb2dvU3JjOwogICAgICAgICAgICAgICAgaWYgKHMuc2lnblNyYykgYXBwRGF0YS5zZXR0aW5ncy5zaWduYXR1cmUgPSBzLnNpZ25TcmM7CiAgICAgICAgICAgICAgICBpZiAocy56b25lKSBhcHBEYXRhLnNldHRpbmdzLnpvbmUgPSBzLnpvbmU7CiAgICAgICAgICAgICAgICBpZiAocy50ZWFjaGVycyAmJiBzLnRlYWNoZXJzLmxlbmd0aCkgeyBfdGVhY2hlcnMgPSBzLnRlYWNoZXJzOyB9CiAgICAgICAgICAgICAgICBpZiAocy5zdHVkZW50cyAmJiBzLnN0dWRlbnRzLmxlbmd0aCkgeyBfc3R1ZGVudHMgPSBzLnN0dWRlbnRzOyB9CiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHMuZ2NhbEVuYWJsZWQgIT09ICd1bmRlZmluZWQnKSB7IHNldENhbGVuZGFyTW9kZShzLmdjYWxFbmFibGVkKTsgfQogICAgICAgICAgICAgICAgaWYgKHMuZ2NhbEV2ZW50cykgeyBfZ2NhbEV2ZW50cyA9IHMuZ2NhbEV2ZW50czsgcmVuZGVyVW5pZmllZENhbCgpOyB9CiAgICAgICAgICAgICAgICBpZiAocy5nY2FsQ2FsZW5kYXJzKSB7IF9nY2FsQ2FsZW5kYXJzID0gcy5nY2FsQ2FsZW5kYXJzOyB9CiAgICAgICAgICAgICAgICBpZiAocy5nY2FsU2VsKSB7IF9nY2FsU2VsZWN0ZWRJZHMgPSBzLmdjYWxTZWw7IH0KICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygc2F2ZURhdGEgPT09ICdmdW5jdGlvbicpIHNhdmVEYXRhKCk7CiAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5hZGQoJ2luLXdyYXBwZXInKTsKICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgaW5pdFN0dWRlbnRBQyA9PT0gJ2Z1bmN0aW9uJykgaW5pdFN0dWRlbnRBQygpOwogICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBpbml0VGVhY2hlckFDID09PSAnZnVuY3Rpb24nKSBpbml0VGVhY2hlckFDKCk7CiAgICAgICAgICAgIH0KICAgICAgICB9IGNhdGNoKGVycikgeyBjb25zb2xlLndhcm4oJ0JyaWRnZSBlcnJvcjonLCBlcnIpOyB9CiAgICB9KTsKICAgIHdpbmRvdy5wYXJlbnQucG9zdE1lc3NhZ2UoeyB0eXBlOiAncGlsb3RlLW1vZHVsZS1yZWFkeScsIG1vZHVsZTogJ3BlcmRpcicgfSwgJyonKTsKCiAgICAKICAgIC8vIOKVkOKVkOKVkCBUQUIgS0VZIElOIFJURSBFRElUT1JTIOKVkOKVkOKVkAogICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGZ1bmN0aW9uKGUpIHsKICAgICAgICB2YXIgZWwgPSBlLnRhcmdldDsKICAgICAgICBpZiAoIWVsIHx8ICFlbC5jbGFzc0xpc3QgfHwgIWVsLmNsYXNzTGlzdC5jb250YWlucygnZG9jLWVkaXRvcicpIHx8ICFlbC5pc0NvbnRlbnRFZGl0YWJsZSkgcmV0dXJuOwogICAgICAgIGlmIChlLmtleSA9PT0gJ1RhYicpIHsKICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgICAgICBpZiAoZS5zaGlmdEtleSkgewogICAgICAgICAgICAgICAgZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ291dGRlbnQnLCBmYWxzZSwgbnVsbCk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBkb2N1bWVudC5leGVjQ29tbWFuZCgnaW5kZW50JywgZmFsc2UsIG51bGwpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfSk7CgogICAgLy8gRm9yd2FyZCBrZXlib2FyZCBzaG9ydGN1dHMgdG8gcGFyZW50CiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgZnVuY3Rpb24oZSkgewogICAgICAgIGlmICghZS5jdHJsS2V5IHx8IGUuc2hpZnRLZXkgfHwgZS5hbHRLZXkgfHwgZS5tZXRhS2V5KSByZXR1cm47CiAgICAgICAgdmFyIGtleSA9IGUua2V5LnRvTG93ZXJDYXNlKCk7CiAgICAgICAgaWYgKFsncCcsJ2UnLCdvJywnYScsJ2QnXS5pbmRleE9mKGtleSkgPj0gMCkgewogICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgICAgIHdpbmRvdy5wYXJlbnQucG9zdE1lc3NhZ2Uoe3R5cGU6J3BpbG90ZS1zaG9ydGN1dCcsIGtleTprZXl9LCAnKicpOwogICAgICAgIH0KICAgIH0pOwoKCiAgICAvLyBMaXN0ZW4gZm9yIGdjYWwgQ1JVRCByZXNwb25zZXMKICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgZnVuY3Rpb24oZU9MKSB7CiAgICAgICAgaWYgKCFlT0wuZGF0YSB8fCBlT0wuZGF0YS50eXBlICE9PSAncGlsb3RlLW91dGxvb2snKSByZXR1cm47CiAgICAgICAgdmFyIG9kID0gZU9MLmRhdGEuZGF0YTsKICAgICAgICBpZiAob2QpIHsKICAgICAgICAgICAgaWYgKG9kLm91dGxvb2tFdmVudHMpIHsgX291dGxvb2tFdmVudHMgPSBvZC5vdXRsb29rRXZlbnRzOyByZW5kZXJVbmlmaWVkQ2FsKCk7IH0KICAgICAgICAgICAgaWYgKG9kLm91dGxvb2tDYWxzKSBfb3V0bG9va0NhbGVuZGFycyA9IG9kLm91dGxvb2tDYWxzOwogICAgICAgICAgICBpZiAodHlwZW9mIG9kLm91dGxvb2tFbmFibGVkICE9PSAndW5kZWZpbmVkJykgX291dGxvb2tFbmFibGVkID0gb2Qub3V0bG9va0VuYWJsZWQ7CiAgICAgICAgfQogICAgfSk7CiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIGZ1bmN0aW9uKGUyKSB7CiAgICAgICAgaWYgKCFlMi5kYXRhKSByZXR1cm47CiAgICAgICAgaWYgKGUyLmRhdGEudHlwZSA9PT0gJ3BpbG90ZS1nY2FsLWNydWQtb2snKSB7CiAgICAgICAgICAgIC8vIFJlZnJlc2ggYWZ0ZXIgQ1JVRAogICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7IHdpbmRvdy5wYXJlbnQucG9zdE1lc3NhZ2Uoe3R5cGU6J3BpbG90ZS1nY2FsLXJlZnJlc2gnfSwgJyonKTsgfSwgNTAwKTsKICAgICAgICB9CiAgICB9KTsKfSkoKTsKCiAgICAKICAgIGZ1bmN0aW9uIGVzY0h0bWwocykgeyB2YXIgZD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsgZC50ZXh0Q29udGVudD1zOyByZXR1cm4gZC5pbm5lckhUTUw7IH0KCiAgICBmdW5jdGlvbiBzZXRDYWxlbmRhck1vZGUoZW5hYmxlZCkgeyBfZ2NhbEVuYWJsZWQgPSBlbmFibGVkOyB9CgogICAgLy8g4pWQ4pWQ4pWQIENBTEVORFJJRVIgVU5JRknDiSBWMTIuMTMg4pWQ4pWQ4pWQCiAgICB2YXIgX2djYWxFbmFibGVkID0gZmFsc2U7CiAgICB2YXIgX2djYWxFdmVudHMgPSBbXTsKICAgIHZhciBfdWNhbE1vbnRoID0gbmV3IERhdGUoKS5nZXRNb250aCgpOwogICAgdmFyIF91Y2FsWWVhciA9IG5ldyBEYXRlKCkuZ2V0RnVsbFllYXIoKTsKICAgIHZhciBfZ2NhbENhbGVuZGFycyA9IFtdOyAvLyBsaXN0IG9mIHtpZCwgbmFtZSwgYmd9CiAgICB2YXIgX2djYWxTZWxlY3RlZElkcyA9IFtdOyAvLyBJRHMgc2VsZWN0ZWQgaW4gbWFzdGVyIHNldHRpbmdzCiAgICB2YXIgX291dGxvb2tFdmVudHMgPSBbXTsKICAgIHZhciBfb3V0bG9va0NhbGVuZGFycyA9IFtdOwogICAgdmFyIF9vdXRsb29rRW5hYmxlZCA9IGZhbHNlOwoKICAgIC8vIENvbG9yIG1hcCBmb3IgZXZlbnQgdHlwZXMKICAgIHZhciBVQ0FMX0NPTE9SUyA9IHsKICAgICAgICBsb2NhbDogJyMzNDk4ZGInLAogICAgICAgIGZlcmllOiAnI2U3NGMzYycsCiAgICAgICAgdmFjOiAnI2U2N2UyMicsCiAgICAgICAgZ2NhbERlZmF1bHQ6ICcjNDI4NWY0JwogICAgfTsKCiAgICBmdW5jdGlvbiB1Y2FsUHJldigpIHsgX3VjYWxNb250aC0tOyBpZihfdWNhbE1vbnRoPDApe191Y2FsTW9udGg9MTE7X3VjYWxZZWFyLS07fSByZW5kZXJVbmlmaWVkQ2FsKCk7IH0KICAgIGZ1bmN0aW9uIHVjYWxOZXh0KCkgeyBfdWNhbE1vbnRoKys7IGlmKF91Y2FsTW9udGg+MTEpe191Y2FsTW9udGg9MDtfdWNhbFllYXIrKzt9IHJlbmRlclVuaWZpZWRDYWwoKTsgfQogICAgZnVuY3Rpb24gdWNhbFRvZGF5KCkgeyBfdWNhbE1vbnRoPW5ldyBEYXRlKCkuZ2V0TW9udGgoKTsgX3VjYWxZZWFyPW5ldyBEYXRlKCkuZ2V0RnVsbFllYXIoKTsgcmVuZGVyVW5pZmllZENhbCgpOyB9CiAgICBmdW5jdGlvbiB1Y2FsUmVmcmVzaCgpIHsgd2luZG93LnBhcmVudC5wb3N0TWVzc2FnZSh7dHlwZToncGlsb3RlLWdjYWwtcmVmcmVzaCd9LCAnKicpOyB9CgogICAgZnVuY3Rpb24gcmVuZGVyVW5pZmllZENhbCgpIHsKICAgICAgICB2YXIgbU5hbWVzID0gWydKYW52aWVyJywnRsOpdnJpZXInLCdNYXJzJywnQXZyaWwnLCdNYWknLCdKdWluJywnSnVpbGxldCcsJ0Fvw7t0JywnU2VwdGVtYnJlJywnT2N0b2JyZScsJ05vdmVtYnJlJywnRMOpY2VtYnJlJ107CiAgICAgICAgdmFyIHRpdGxlRWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndWNhbC10aXRsZScpOwogICAgICAgIGlmICh0aXRsZUVsKSB0aXRsZUVsLnRleHRDb250ZW50ID0gbU5hbWVzW191Y2FsTW9udGhdICsgJyAnICsgX3VjYWxZZWFyOwoKICAgICAgICB2YXIgYm9keSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd1Y2FsLWJvZHknKTsKICAgICAgICBpZiAoIWJvZHkpIHJldHVybjsKICAgICAgICB2YXIgdG9kYXkgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkuc3BsaXQoJ1QnKVswXTsKICAgICAgICB2YXIgbVN0ciA9IF91Y2FsWWVhciArICctJyArIFN0cmluZyhfdWNhbE1vbnRoKzEpLnBhZFN0YXJ0KDIsJzAnKTsKICAgICAgICB2YXIgaXNDdXJyZW50TW9udGggPSAoX3VjYWxNb250aCA9PT0gbmV3IERhdGUoKS5nZXRNb250aCgpICYmIF91Y2FsWWVhciA9PT0gbmV3IERhdGUoKS5nZXRGdWxsWWVhcigpKTsKCiAgICAgICAgLy8gQ29sbGVjdCBBTEwgZXZlbnRzIGZvciB0aGlzIG1vbnRoCiAgICAgICAgdmFyIGFsbCA9IFtdOwoKICAgICAgICAvLyAxLiBMb2NhbCBldmVudHMKICAgICAgICAoYXBwRGF0YS5jYWxlbmRhciB8fCBbXSkuZm9yRWFjaChmdW5jdGlvbihjKSB7CiAgICAgICAgICAgIGlmICghYy5kYXRlIHx8ICFjLnRhc2sgfHwgYy5kYXRlLnN1YnN0cmluZygwLDcpICE9PSBtU3RyKSByZXR1cm47CiAgICAgICAgICAgIHZhciB0eXBlID0gJ2xvY2FsJzsKICAgICAgICAgICAgaWYgKGMudmFjT2ZmaWNpZWwpIHR5cGUgPSBjLnRhc2suaW5kZXhPZign8J+Hq/Cfh7cnKSA+PSAwID8gJ2ZlcmllJyA6ICd2YWMnOwogICAgICAgICAgICBhbGwucHVzaCh7CiAgICAgICAgICAgICAgICBpZDogYy5pZCwgdGl0bGU6IGMudGFzaywgZGF0ZTogYy5kYXRlLCB0aW1lOiAnJywgZW5kVGltZTogJycsCiAgICAgICAgICAgICAgICBzcmM6ICdsb2NhbCcsIHR5cGU6IHR5cGUsCiAgICAgICAgICAgICAgICBjb2xvcjogdHlwZSA9PT0gJ2ZlcmllJyA/IFVDQUxfQ09MT1JTLmZlcmllIDogdHlwZSA9PT0gJ3ZhYycgPyBVQ0FMX0NPTE9SUy52YWMgOiBVQ0FMX0NPTE9SUy5sb2NhbCwKICAgICAgICAgICAgICAgIGNhbE5hbWU6IHR5cGUgPT09ICdmZXJpZScgPyAnSm91ciBmw6lyacOpJyA6IHR5cGUgPT09ICd2YWMnID8gJ1ZhY2FuY2VzJyA6ICdBZ2VuZGEgbG9jYWwnLAogICAgICAgICAgICAgICAgY2FsSWQ6ICcnLCBlZGl0YWJsZTogdHlwZSA9PT0gJ2xvY2FsJwogICAgICAgICAgICB9KTsKICAgICAgICB9KTsKCiAgICAgICAgLy8gMi4gR29vZ2xlIENhbGVuZGFyIGV2ZW50cwogICAgICAgIChfZ2NhbEV2ZW50cyB8fCBbXSkuZm9yRWFjaChmdW5jdGlvbihlKSB7CiAgICAgICAgICAgIGlmICghZS5kYXRlIHx8IGUuZGF0ZS5zdWJzdHJpbmcoMCw3KSAhPT0gbVN0cikgcmV0dXJuOwogICAgICAgICAgICAvLyBBdm9pZCBkdXBsaWNhdGVzIHdpdGggbG9jYWwKICAgICAgICAgICAgdmFyIGlzRHVwID0gYWxsLnNvbWUoZnVuY3Rpb24oYSl7IHJldHVybiBhLnRpdGxlID09PSBlLnRpdGxlICYmIGEuZGF0ZSA9PT0gZS5kYXRlICYmIGEuc3JjID09PSAnbG9jYWwnOyB9KTsKICAgICAgICAgICAgaWYgKGlzRHVwKSByZXR1cm47CiAgICAgICAgICAgIGFsbC5wdXNoKHsKICAgICAgICAgICAgICAgIGlkOiBlLmlkLCB0aXRsZTogZS50aXRsZSwgZGF0ZTogZS5kYXRlLCB0aW1lOiBlLnRpbWUgfHwgJycsIGVuZFRpbWU6IGUuZW5kVGltZSB8fCAnJywKICAgICAgICAgICAgICAgIHNyYzogJ2djYWwnLCB0eXBlOiAnZ2NhbCcsCiAgICAgICAgICAgICAgICBjb2xvcjogZS5jb2xvciB8fCBVQ0FMX0NPTE9SUy5nY2FsRGVmYXVsdCwKICAgICAgICAgICAgICAgIGNhbE5hbWU6IGUuY2FsTmFtZSB8fCAnR29vZ2xlJywgY2FsSWQ6IGUuY2FsSWQgfHwgJycsCiAgICAgICAgICAgICAgICBlZGl0YWJsZTogISFfZ2NhbEVuYWJsZWQKICAgICAgICAgICAgfSk7CiAgICAgICAgfSk7CgogICAgICAgIC8vIDMuIE91dGxvb2sgZXZlbnRzCiAgICAgICAgKF9vdXRsb29rRXZlbnRzIHx8IFtdKS5mb3JFYWNoKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgaWYgKCFlLmRhdGUgfHwgZS5kYXRlLnN1YnN0cmluZygwLDcpICE9PSBtU3RyKSByZXR1cm47CiAgICAgICAgICAgIHZhciBpc0R1cCA9IGFsbC5zb21lKGZ1bmN0aW9uKGEpeyByZXR1cm4gYS50aXRsZSA9PT0gZS50aXRsZSAmJiBhLmRhdGUgPT09IGUuZGF0ZTsgfSk7CiAgICAgICAgICAgIGlmIChpc0R1cCkgcmV0dXJuOwogICAgICAgICAgICBhbGwucHVzaCh7CiAgICAgICAgICAgICAgICBpZDogZS5pZCwgdGl0bGU6IGUudGl0bGUsIGRhdGU6IGUuZGF0ZSwgdGltZTogZS50aW1lIHx8ICcnLCBlbmRUaW1lOiBlLmVuZFRpbWUgfHwgJycsCiAgICAgICAgICAgICAgICBzcmM6ICdvdXRsb29rJywgdHlwZTogJ291dGxvb2snLAogICAgICAgICAgICAgICAgY29sb3I6IGUuY29sb3IgfHwgJyMwMDc4ZDQnLAogICAgICAgICAgICAgICAgY2FsTmFtZTogZS5jYWxOYW1lIHx8ICdPdXRsb29rJywgY2FsSWQ6IGUuY2FsSWQgfHwgJycsCiAgICAgICAgICAgICAgICBlZGl0YWJsZTogISFfb3V0bG9va0VuYWJsZWQKICAgICAgICAgICAgfSk7CiAgICAgICAgfSk7CgogICAgICAgIC8vIFNvcnQgYnkgZGF0ZSt0aW1lCiAgICAgICAgYWxsLnNvcnQoZnVuY3Rpb24oYSxiKSB7IHJldHVybiAoYS5kYXRlKycgJysoYS50aW1lfHwnMDA6MDAnKSkubG9jYWxlQ29tcGFyZShiLmRhdGUrJyAnKyhiLnRpbWV8fCcwMDowMCcpKTsgfSk7CgogICAgICAgIC8vIEZpbHRlcjogZm9yIGN1cnJlbnQgbW9udGgsIG9ubHkgZnV0dXJlIGV2ZW50cwogICAgICAgIGlmIChpc0N1cnJlbnRNb250aCkgewogICAgICAgICAgICBhbGwgPSBhbGwuZmlsdGVyKGZ1bmN0aW9uKGUpIHsgcmV0dXJuIGUuZGF0ZSA+PSB0b2RheTsgfSk7CiAgICAgICAgfQoKICAgICAgICBpZiAoIWFsbC5sZW5ndGgpIHsKICAgICAgICAgICAgYm9keS5pbm5lckhUTUwgPSAnPGRpdiBjbGFzcz0idWNhbC1lbXB0eSI+PGkgY2xhc3M9ImZhcyBmYS1jYWxlbmRhci1jaGVjayI+PC9pPkF1Y3VuIMOpdsOpbmVtZW50IGNlIG1vaXM8L2Rpdj4nOwogICAgICAgICAgICByZW5kZXJVY2FsTGVnZW5kKFtdKTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgLy8gR3JvdXAgYnkgZGF5CiAgICAgICAgdmFyIGdyb3VwcyA9IHt9OwogICAgICAgIGFsbC5mb3JFYWNoKGZ1bmN0aW9uKGUpIHsgaWYoIWdyb3Vwc1tlLmRhdGVdKSBncm91cHNbZS5kYXRlXT1bXTsgZ3JvdXBzW2UuZGF0ZV0ucHVzaChlKTsgfSk7CgogICAgICAgIHZhciBodG1sID0gJyc7CiAgICAgICAgdmFyIHNyY1NldCA9IG5ldyBTZXQoKTsKICAgICAgICBPYmplY3Qua2V5cyhncm91cHMpLnNvcnQoKS5mb3JFYWNoKGZ1bmN0aW9uKGRhdGUpIHsKICAgICAgICAgICAgdmFyIGQgPSBuZXcgRGF0ZShkYXRlICsgJ1QxMjowMDowMCcpOwogICAgICAgICAgICB2YXIgZGF5TmFtZSA9IGQudG9Mb2NhbGVEYXRlU3RyaW5nKCdmci1GUicsIHt3ZWVrZGF5Oidsb25nJywgZGF5OidudW1lcmljJywgbW9udGg6J2xvbmcnfSk7CiAgICAgICAgICAgIGRheU5hbWUgPSBkYXlOYW1lLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgZGF5TmFtZS5zbGljZSgxKTsKICAgICAgICAgICAgdmFyIGlzVG9kYXkgPSBkYXRlID09PSB0b2RheTsKCiAgICAgICAgICAgIGh0bWwgKz0gJzxkaXYgY2xhc3M9InVjYWwtZGF5LWdyb3VwIj4nOwogICAgICAgICAgICBodG1sICs9ICc8ZGl2IGNsYXNzPSJ1Y2FsLWRheS1oZHInKyhpc1RvZGF5PycgaXMtdG9kYXknOicnKSsnIj4nKyhpc1RvZGF5Pyc8aSBjbGFzcz0iZmFzIGZhLXN0YXIiIHN0eWxlPSJjb2xvcjojZTY3ZTIyO21hcmdpbi1yaWdodDo0cHg7Zm9udC1zaXplOi43cmVtIj48L2k+JzonJykrZGF5TmFtZSsnPC9kaXY+JzsKCiAgICAgICAgICAgIGdyb3Vwc1tkYXRlXS5mb3JFYWNoKGZ1bmN0aW9uKGV2KSB7CiAgICAgICAgICAgICAgICBzcmNTZXQuYWRkKGV2LnR5cGUgPT09ICdnY2FsJyA/IGV2LmNhbE5hbWUgOiBldi50eXBlKTsKICAgICAgICAgICAgICAgIGh0bWwgKz0gJzxkaXYgY2xhc3M9InVjYWwtaXRlbSI+JzsKICAgICAgICAgICAgICAgIGh0bWwgKz0gJzxkaXYgY2xhc3M9InVjYWwtZG90IiBzdHlsZT0iYmFja2dyb3VuZDonK2V2LmNvbG9yKyciPjwvZGl2Pic7CiAgICAgICAgICAgICAgICBodG1sICs9ICc8ZGl2IGNsYXNzPSJ1Y2FsLWxlZnQiPic7CiAgICAgICAgICAgICAgICBodG1sICs9ICc8ZGl2IGNsYXNzPSJ1Y2FsLWl0ZW0tdGltZSI+JysoZXYudGltZSA/IGV2LnRpbWUrKGV2LmVuZFRpbWU/JyDigJMgJytldi5lbmRUaW1lOicnKSA6ICc8c3BhbiBzdHlsZT0iY29sb3I6I2NjYyI+Sm91cm7DqWU8L3NwYW4+JykrJzwvZGl2Pic7CiAgICAgICAgICAgICAgICBpZiAoZXYuZWRpdGFibGUgfHwgZXYuc3JjPT09J2djYWwnKSB7CiAgICAgICAgICAgICAgICAgICAgaHRtbCArPSAnPGRpdiBjbGFzcz0idWNhbC1pdGVtLWFjdGlvbnMiPic7CiAgICAgICAgICAgICAgICAgICAgaHRtbCArPSAnPGJ1dHRvbiBvbmNsaWNrPSJlZGl0VWNhbEV2ZW50KFwnJytldi5pZCsnXCcsXCcnK2V2LnNyYysnXCcsXCcnK2V2LmNhbElkLnJlcGxhY2UoLycvZywiXFwnIikrJ1wnKSI+PGkgY2xhc3M9ImZhcyBmYS1wZW4iPjwvaT48L2J1dHRvbj4nOwogICAgICAgICAgICAgICAgICAgIGh0bWwgKz0gJzxidXR0b24gY2xhc3M9ImFjdC1kZWwiIG9uY2xpY2s9ImRlbGV0ZVVjYWxFdmVudChcJycrZXYuaWQrJ1wnLFwnJytldi5zcmMrJ1wnLFwnJytldi5jYWxJZC5yZXBsYWNlKC8nL2csIlxcJyIpKydcJykiPjxpIGNsYXNzPSJmYXMgZmEtdHJhc2giPjwvaT48L2J1dHRvbj4nOwogICAgICAgICAgICAgICAgICAgIGh0bWwgKz0gJzwvZGl2Pic7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBodG1sICs9ICc8L2Rpdj4nOwogICAgICAgICAgICAgICAgaHRtbCArPSAnPGRpdiBjbGFzcz0idWNhbC1pbmZvIj4nOwogICAgICAgICAgICAgICAgaHRtbCArPSAnPGRpdiBjbGFzcz0idWNhbC1pdGVtLXRpdGxlIj4nK2VzY0h0bWwoZXYudGl0bGUpKyc8L2Rpdj4nOwogICAgICAgICAgICAgICAgaHRtbCArPSAnPGRpdiBjbGFzcz0idWNhbC1pdGVtLW1ldGEiPicrZXNjSHRtbChldi5jYWxOYW1lKTsKICAgICAgICAgICAgICAgIGlmIChldi5zcmM9PT0nZ2NhbCcpIGh0bWwgKz0gJyA8c3BhbiBjbGFzcz0idWNhbC1zcmMtYmFkZ2UiIHN0eWxlPSJiYWNrZ3JvdW5kOiM0Mjg1ZjQiPkc8L3NwYW4+JzsKICAgICAgICAgICAgICAgIGh0bWwgKz0gJzwvZGl2PjwvZGl2Pic7CiAgICAgICAgICAgICAgICBodG1sICs9ICc8L2Rpdj4nOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgaHRtbCArPSAnPC9kaXY+JzsKICAgICAgICB9KTsKICAgICAgICBib2R5LmlubmVySFRNTCA9IGh0bWw7CiAgICAgICAgcmVuZGVyVWNhbExlZ2VuZChzcmNTZXQpOwogICAgfQoKICAgIGZ1bmN0aW9uIHJlbmRlclVjYWxMZWdlbmQoc3JjU2V0KSB7CiAgICAgICAgdmFyIGxlZyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd1Y2FsLWxlZ2VuZCcpOwogICAgICAgIGlmICghbGVnKSByZXR1cm47CiAgICAgICAgdmFyIGl0ZW1zID0gWwogICAgICAgICAgICB7bGFiZWw6J0xvY2FsJywgY29sb3I6VUNBTF9DT0xPUlMubG9jYWwsIGtleTonbG9jYWwnfSwKICAgICAgICAgICAge2xhYmVsOidGw6lyacOpcycsIGNvbG9yOlVDQUxfQ09MT1JTLmZlcmllLCBrZXk6J2ZlcmllJ30sCiAgICAgICAgICAgIHtsYWJlbDonVmFjYW5jZXMnLCBjb2xvcjpVQ0FMX0NPTE9SUy52YWMsIGtleTondmFjJ30sCiAgICAgICAgICAgIHtsYWJlbDonT3V0bG9vaycsIGNvbG9yOicjMDA3OGQ0Jywga2V5OidvdXRsb29rJ30KICAgICAgICBdOwogICAgICAgIC8vIEFkZCBnY2FsIGNhbGVuZGFycwogICAgICAgIChfZ2NhbEV2ZW50cyB8fCBbXSkuZm9yRWFjaChmdW5jdGlvbihlKSB7CiAgICAgICAgICAgIGlmIChlLmNhbE5hbWUgJiYgIWl0ZW1zLnNvbWUoZnVuY3Rpb24oaSl7cmV0dXJuIGkubGFiZWw9PT1lLmNhbE5hbWU7fSkpIHsKICAgICAgICAgICAgICAgIGl0ZW1zLnB1c2goe2xhYmVsOmUuY2FsTmFtZSwgY29sb3I6ZS5jb2xvcnx8VUNBTF9DT0xPUlMuZ2NhbERlZmF1bHQsIGtleTplLmNhbE5hbWV9KTsKICAgICAgICAgICAgfQogICAgICAgIH0pOwogICAgICAgIGxlZy5pbm5lckhUTUwgPSBpdGVtcy5tYXAoZnVuY3Rpb24oaSl7CiAgICAgICAgICAgIHJldHVybiAnPHNwYW4+PHNwYW4gY2xhc3M9InVjYWwtbGVnZW5kLWRvdCIgc3R5bGU9ImJhY2tncm91bmQ6JytpLmNvbG9yKyciPjwvc3Bhbj4nK2kubGFiZWwrJzwvc3Bhbj4nOwogICAgICAgIH0pLmpvaW4oJycpOwogICAgfQoKICAgIC8vIOKUgOKUgCBDUlVEIOKUgOKUgAogICAgZnVuY3Rpb24gb3BlblVjYWxBZGRNb2RhbCgpIHsKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndWNhbC1laWQnKS52YWx1ZSA9ICcnOwogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd1Y2FsLWVzcmMnKS52YWx1ZSA9ICdsb2NhbCc7CiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3VjYWwtZWNhbGlkJykudmFsdWUgPSAnJzsKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndWNhbC1kYXRlJykudmFsdWUgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkuc3BsaXQoJ1QnKVswXTsKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndWNhbC10aW1lJykudmFsdWUgPSAnJzsKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndWNhbC1lbmR0aW1lJykudmFsdWUgPSAnJzsKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndWNhbC10YXNrJykudmFsdWUgPSAnJzsKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndWNhbC1tb2RhbC10aXRsZScpLnRleHRDb250ZW50ID0gJ05vdXZlbCDDqXbDqW5lbWVudCc7CiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3VjYWwtZGVzdC13cmFwJykuc3R5bGUuZGlzcGxheSA9ICcnOwogICAgICAgIHNldFVjYWxEZXN0KCdsb2NhbCcpOwogICAgICAgIHVwZGF0ZUdjYWxUYXJnZXRMaXN0KCk7CiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3VjYWxNb2RhbCcpLnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7CiAgICB9CgogICAgZnVuY3Rpb24gY2xvc2VVY2FsTW9kYWwoKSB7IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd1Y2FsTW9kYWwnKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOyB9CgogICAgZnVuY3Rpb24gc2V0VWNhbERlc3QoZGVzdCkgewogICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy51Y2FsLWRlc3Qtb3B0JykuZm9yRWFjaChmdW5jdGlvbihlbCl7CiAgICAgICAgICAgIGVsLmNsYXNzTGlzdC50b2dnbGUoJ2FjdGl2ZScsIGVsLmRhdGFzZXQuZGVzdCA9PT0gZGVzdCk7CiAgICAgICAgICAgIGVsLnF1ZXJ5U2VsZWN0b3IoJ2lucHV0JykuY2hlY2tlZCA9IGVsLmRhdGFzZXQuZGVzdCA9PT0gZGVzdDsKICAgICAgICB9KTsKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndWNhbC1nY2FsLXRhcmdldCcpLnN0eWxlLmRpc3BsYXkgPSAoZGVzdCA9PT0gJ2djYWwnIHx8IGRlc3QgPT09ICdvdXRsb29rJykgPyAnYmxvY2snIDogJ25vbmUnOwogICAgICAgIGlmIChkZXN0ID09PSAnb3V0bG9vaycpIHVwZGF0ZU91dGxvb2tUYXJnZXRMaXN0KCk7CiAgICAgICAgZWxzZSBpZiAoZGVzdCA9PT0gJ2djYWwnKSB1cGRhdGVHY2FsVGFyZ2V0TGlzdCgpOwogICAgfQoKICAgIC8vIFdpcmUgdXAgZGVzdCBidXR0b25zCiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGUpIHsKICAgICAgICB2YXIgb3B0ID0gZS50YXJnZXQuY2xvc2VzdCgnLnVjYWwtZGVzdC1vcHQnKTsKICAgICAgICBpZiAob3B0KSBzZXRVY2FsRGVzdChvcHQuZGF0YXNldC5kZXN0KTsKICAgIH0pOwoKICAgIGZ1bmN0aW9uIHVwZGF0ZU91dGxvb2tUYXJnZXRMaXN0KCkgewogICAgICAgIHZhciBzZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndWNhbC1nY2FsLXRhcmdldCcpOwogICAgICAgIHNlbC5pbm5lckhUTUwgPSAnPG9wdGlvbiB2YWx1ZT0iIj7igJQgQ2hvaXNpciB1biBhZ2VuZGEg4oCUPC9vcHRpb24+JzsKICAgICAgICAoX291dGxvb2tDYWxlbmRhcnMgfHwgW10pLmZvckVhY2goZnVuY3Rpb24oYykgewogICAgICAgICAgICBzZWwuaW5uZXJIVE1MICs9ICc8b3B0aW9uIHZhbHVlPSInK2VzY0h0bWwoYy5pZCkrJyI+Jytlc2NIdG1sKGMubmFtZSkrJzwvb3B0aW9uPic7CiAgICAgICAgfSk7CiAgICAgICAgdmFyIG91dGxvb2tPcHQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudWNhbC1kZXN0LW9wdFtkYXRhLWRlc3Q9Im91dGxvb2siXScpOwogICAgICAgIGlmIChvdXRsb29rT3B0KSBvdXRsb29rT3B0LnN0eWxlLmRpc3BsYXkgPSAoX291dGxvb2tDYWxlbmRhcnMgJiYgX291dGxvb2tDYWxlbmRhcnMubGVuZ3RoKSA/ICcnIDogJ25vbmUnOwogICAgfQogICAgZnVuY3Rpb24gdXBkYXRlR2NhbFRhcmdldExpc3QoKSB7CiAgICAgICAgdmFyIHNlbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd1Y2FsLWdjYWwtdGFyZ2V0Jyk7CiAgICAgICAgc2VsLmlubmVySFRNTCA9ICc8b3B0aW9uIHZhbHVlPSIiPuKAlCBDaG9pc2lyIHVuIGFnZW5kYSDigJQ8L29wdGlvbj4nOwogICAgICAgIC8vIE9ubHkgc2hvdyBjYWxlbmRhcnMgc2VsZWN0ZWQgaW4gbWFzdGVyIHNldHRpbmdzIChnY2FsU2VsKQogICAgICAgIHZhciBzZWxlY3RlZElkcyA9IF9nY2FsU2VsZWN0ZWRJZHMgfHwgW107CiAgICAgICAgKF9nY2FsQ2FsZW5kYXJzIHx8IFtdKS5mb3JFYWNoKGZ1bmN0aW9uKGMpIHsKICAgICAgICAgICAgaWYgKHNlbGVjdGVkSWRzLmxlbmd0aCA9PT0gMCB8fCBzZWxlY3RlZElkcy5pbmRleE9mKGMuaWQpID49IDApIHsKICAgICAgICAgICAgICAgIHNlbC5pbm5lckhUTUwgKz0gJzxvcHRpb24gdmFsdWU9IicrZXNjSHRtbChjLmlkKSsnIj4nK2VzY0h0bWwoYy5uYW1lKSsnPC9vcHRpb24+JzsKICAgICAgICAgICAgfQogICAgICAgIH0pOwogICAgICAgIC8vIElmIG5vIEdvb2dsZSBjYWxlbmRhcnMgYXZhaWxhYmxlLCBoaWRlIEdvb2dsZSBvcHRpb24KICAgICAgICB2YXIgZ2NhbE9wdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy51Y2FsLWRlc3Qtb3B0W2RhdGEtZGVzdD0iZ2NhbCJdJyk7CiAgICAgICAgdmFyIG91dGxvb2tPcHQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudWNhbC1kZXN0LW9wdFtkYXRhLWRlc3Q9Im91dGxvb2siXScpOwogICAgICAgIGlmIChnY2FsT3B0KSBnY2FsT3B0LnN0eWxlLmRpc3BsYXkgPSAoX2djYWxDYWxlbmRhcnMgJiYgX2djYWxDYWxlbmRhcnMubGVuZ3RoKSA/ICcnIDogJ25vbmUnOwogICAgfQoKICAgIGZ1bmN0aW9uIGVkaXRVY2FsRXZlbnQoaWQsIHNyYywgY2FsSWQpIHsKICAgICAgICBpZiAoc3JjID09PSAnbG9jYWwnKSB7CiAgICAgICAgICAgIHZhciBpdGVtID0gKGFwcERhdGEuY2FsZW5kYXJ8fFtdKS5maW5kKGZ1bmN0aW9uKGMpeyByZXR1cm4gYy5pZC50b1N0cmluZygpPT09aWQudG9TdHJpbmcoKTsgfSk7CiAgICAgICAgICAgIGlmICghaXRlbSkgcmV0dXJuOwogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndWNhbC1laWQnKS52YWx1ZSA9IGlkOwogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndWNhbC1lc3JjJykudmFsdWUgPSAnbG9jYWwnOwogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndWNhbC1lY2FsaWQnKS52YWx1ZSA9ICcnOwogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndWNhbC1kYXRlJykudmFsdWUgPSBpdGVtLmRhdGUgfHwgJyc7CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd1Y2FsLXRpbWUnKS52YWx1ZSA9IGl0ZW0udGltZSB8fCAnJzsKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3VjYWwtZW5kdGltZScpLnZhbHVlID0gaXRlbS5lbmRUaW1lIHx8ICcnOwogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndWNhbC10YXNrJykudmFsdWUgPSBpdGVtLnRhc2sgfHwgJyc7CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd1Y2FsLW1vZGFsLXRpdGxlJykudGV4dENvbnRlbnQgPSAnTW9kaWZpZXIgbFwnw6l2w6luZW1lbnQnOwogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndWNhbC1kZXN0LXdyYXAnKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOwogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndWNhbE1vZGFsJykuc3R5bGUuZGlzcGxheSA9ICdmbGV4JzsKICAgICAgICB9IGVsc2UgaWYgKHNyYyA9PT0gJ2djYWwnKSB7CiAgICAgICAgICAgIHZhciBldiA9IChfZ2NhbEV2ZW50c3x8W10pLmZpbmQoZnVuY3Rpb24oZSl7IHJldHVybiBlLmlkPT09aWQ7IH0pOwogICAgICAgICAgICBpZiAoIWV2KSByZXR1cm47CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd1Y2FsLWVpZCcpLnZhbHVlID0gaWQ7CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd1Y2FsLWVzcmMnKS52YWx1ZSA9ICdnY2FsJzsKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3VjYWwtZWNhbGlkJykudmFsdWUgPSBjYWxJZCB8fCBldi5jYWxJZCB8fCAnJzsKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3VjYWwtZGF0ZScpLnZhbHVlID0gZXYuZGF0ZSB8fCAnJzsKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3VjYWwtdGltZScpLnZhbHVlID0gZXYudGltZSB8fCAnJzsKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3VjYWwtZW5kdGltZScpLnZhbHVlID0gZXYuZW5kVGltZSB8fCAnJzsKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3VjYWwtdGFzaycpLnZhbHVlID0gZXYudGl0bGUgfHwgJyc7CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd1Y2FsLW1vZGFsLXRpdGxlJykudGV4dENvbnRlbnQgPSAnTW9kaWZpZXIgKEdvb2dsZSBBZ2VuZGEpJzsKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3VjYWwtZGVzdC13cmFwJykuc3R5bGUuZGlzcGxheSA9ICdub25lJzsKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3VjYWxNb2RhbCcpLnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7CiAgICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIHNhdmVVY2FsRXZlbnQoKSB7CiAgICAgICAgdmFyIGlkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3VjYWwtZWlkJykudmFsdWU7CiAgICAgICAgdmFyIHNyYyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd1Y2FsLWVzcmMnKS52YWx1ZTsKICAgICAgICB2YXIgY2FsSWQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndWNhbC1lY2FsaWQnKS52YWx1ZTsKICAgICAgICB2YXIgZGF0ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd1Y2FsLWRhdGUnKS52YWx1ZTsKICAgICAgICB2YXIgdGltZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd1Y2FsLXRpbWUnKS52YWx1ZTsKICAgICAgICB2YXIgZW5kVGltZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd1Y2FsLWVuZHRpbWUnKS52YWx1ZTsKICAgICAgICB2YXIgdGFzayA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd1Y2FsLXRhc2snKS52YWx1ZS50cmltKCk7CiAgICAgICAgaWYgKCFkYXRlIHx8ICF0YXNrKSByZXR1cm4gYWxlcnQoJ0RhdGUgZXQgaW50aXR1bMOpIHJlcXVpcycpOwoKICAgICAgICBpZiAoaWQgJiYgc3JjID09PSAnbG9jYWwnKSB7CiAgICAgICAgICAgIC8vIFVwZGF0ZSBsb2NhbAogICAgICAgICAgICB2YXIgaXRlbSA9IChhcHBEYXRhLmNhbGVuZGFyfHxbXSkuZmluZChmdW5jdGlvbihjKXsgcmV0dXJuIGMuaWQudG9TdHJpbmcoKT09PWlkLnRvU3RyaW5nKCk7IH0pOwogICAgICAgICAgICBpZiAoaXRlbSkgeyBpdGVtLmRhdGUgPSBkYXRlOyBpdGVtLnRhc2sgPSB0YXNrOyBpdGVtLnRpbWUgPSB0aW1lOyBpdGVtLmVuZFRpbWUgPSBlbmRUaW1lOyB9CiAgICAgICAgICAgIHNhdmVEYXRhKCk7CiAgICAgICAgfSBlbHNlIGlmIChpZCAmJiBzcmMgPT09ICdnY2FsJykgewogICAgICAgICAgICB3aW5kb3cucGFyZW50LnBvc3RNZXNzYWdlKHt0eXBlOidwaWxvdGUtZ2NhbC11cGRhdGUnLCBldmVudElkOmlkLCBjYWxJZDpjYWxJZCwgdGl0bGU6dGFzaywgZGF0ZTpkYXRlLCB0aW1lOnRpbWUsIGVuZFRpbWU6ZW5kVGltZX0sICcqJyk7CiAgICAgICAgfSBlbHNlIGlmIChpZCAmJiBzcmMgPT09ICdvdXRsb29rJykgewogICAgICAgICAgICB3aW5kb3cucGFyZW50LnBvc3RNZXNzYWdlKHt0eXBlOidwaWxvdGUtb3V0bG9vay11cGRhdGUnLCBldmVudElkOmlkLCBjYWxJZDpjYWxJZCwgdGl0bGU6dGFzaywgZGF0ZTpkYXRlLCB0aW1lOnRpbWUsIGVuZFRpbWU6ZW5kVGltZX0sICcqJyk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgLy8gTmV3IGV2ZW50CiAgICAgICAgICAgIHZhciBkZXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignaW5wdXRbbmFtZT0idWNhbC1kZXN0Il06Y2hlY2tlZCcpOwogICAgICAgICAgICB2YXIgZGVzdFZhbCA9IGRlc3QgPyBkZXN0LnZhbHVlIDogJ2xvY2FsJzsKICAgICAgICAgICAgaWYgKGRlc3RWYWwgPT09ICdsb2NhbCcpIHsKICAgICAgICAgICAgICAgIGFwcERhdGEuY2FsZW5kYXIucHVzaCh7aWQ6RGF0ZS5ub3coKS50b1N0cmluZygpLCBkYXRlOmRhdGUsIHRhc2s6dGFzaywgdGltZTp0aW1lLCBlbmRUaW1lOmVuZFRpbWV9KTsKICAgICAgICAgICAgICAgIHNhdmVEYXRhKCk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0Q2FsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3VjYWwtZ2NhbC10YXJnZXQnKS52YWx1ZTsKICAgICAgICAgICAgICAgIGlmICghdGFyZ2V0Q2FsKSByZXR1cm4gYWxlcnQoJ1PDqWxlY3Rpb25uZXogdW4gYWdlbmRhIEdvb2dsZScpOwogICAgICAgICAgICAgICAgdmFyIGRlc3RWYWwyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignaW5wdXRbbmFtZT0idWNhbC1kZXN0Il06Y2hlY2tlZCcpLnZhbHVlOwogICAgICAgICAgICAgICAgaWYgKGRlc3RWYWwyID09PSAnZ2NhbCcpIHsKICAgICAgICAgICAgICAgICAgICB3aW5kb3cucGFyZW50LnBvc3RNZXNzYWdlKHt0eXBlOidwaWxvdGUtZ2NhbC1hZGQnLCBjYWxJZDp0YXJnZXRDYWwsIHRpdGxlOnRhc2ssIGRhdGU6ZGF0ZSwgdGltZTp0aW1lLCBlbmRUaW1lOmVuZFRpbWV9LCAnKicpOwogICAgICAgICAgICAgICAgfSBlbHNlIGlmIChkZXN0VmFsMiA9PT0gJ291dGxvb2snKSB7CiAgICAgICAgICAgICAgICAgICAgd2luZG93LnBhcmVudC5wb3N0TWVzc2FnZSh7dHlwZToncGlsb3RlLW91dGxvb2stYWRkJywgY2FsSWQ6dGFyZ2V0Q2FsLCB0aXRsZTp0YXNrLCBkYXRlOmRhdGUsIHRpbWU6dGltZSwgZW5kVGltZTplbmRUaW1lfSwgJyonKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBjbG9zZVVjYWxNb2RhbCgpOwogICAgICAgIHJlbmRlclVuaWZpZWRDYWwoKTsKICAgICAgICBpZih0eXBlb2YgY2hlY2tEYWlseVRhc2tzID09PSAnZnVuY3Rpb24nKSBjaGVja0RhaWx5VGFza3MoKTsKICAgIH0KCiAgICBmdW5jdGlvbiBkZWxldGVVY2FsRXZlbnQoaWQsIHNyYywgY2FsSWQpIHsKICAgICAgICBpZiAoIWNvbmZpcm0oJ1N1cHByaW1lciBjZXQgw6l2w6luZW1lbnQgPycpKSByZXR1cm47CiAgICAgICAgaWYgKHNyYyA9PT0gJ2xvY2FsJykgewogICAgICAgICAgICBhcHBEYXRhLmNhbGVuZGFyID0gKGFwcERhdGEuY2FsZW5kYXJ8fFtdKS5maWx0ZXIoZnVuY3Rpb24oYyl7IHJldHVybiBjLmlkLnRvU3RyaW5nKCkhPT1pZC50b1N0cmluZygpOyB9KTsKICAgICAgICAgICAgc2F2ZURhdGEoKTsKICAgICAgICAgICAgcmVuZGVyVW5pZmllZENhbCgpOwogICAgICAgICAgICBpZih0eXBlb2YgY2hlY2tEYWlseVRhc2tzID09PSAnZnVuY3Rpb24nKSBjaGVja0RhaWx5VGFza3MoKTsKICAgICAgICB9IGVsc2UgaWYgKHNyYyA9PT0gJ2djYWwnKSB7CiAgICAgICAgICAgIHdpbmRvdy5wYXJlbnQucG9zdE1lc3NhZ2Uoe3R5cGU6J3BpbG90ZS1nY2FsLWRlbGV0ZScsIGV2ZW50SWQ6aWQsIGNhbElkOmNhbElkfSwgJyonKTsKICAgICAgICAgICAgX2djYWxFdmVudHMgPSBfZ2NhbEV2ZW50cy5maWx0ZXIoZnVuY3Rpb24oZSl7IHJldHVybiBlLmlkICE9PSBpZDsgfSk7CiAgICAgICAgICAgIHJlbmRlclVuaWZpZWRDYWwoKTsKICAgICAgICB9IGVsc2UgaWYgKHNyYyA9PT0gJ291dGxvb2snKSB7CiAgICAgICAgICAgIHdpbmRvdy5wYXJlbnQucG9zdE1lc3NhZ2Uoe3R5cGU6J3BpbG90ZS1vdXRsb29rLWRlbGV0ZScsIGV2ZW50SWQ6aWQsIGNhbElkOmNhbElkfSwgJyonKTsKICAgICAgICAgICAgX291dGxvb2tFdmVudHMgPSBfb3V0bG9va0V2ZW50cy5maWx0ZXIoZnVuY3Rpb24oZSl7IHJldHVybiBlLmlkICE9PSBpZDsgfSk7CiAgICAgICAgICAgIHJlbmRlclVuaWZpZWRDYWwoKTsKICAgICAgICB9CiAgICB9CgogICAgLy8gT3ZlcnJpZGUgb2xkIHJlbmRlckNhbGVuZGFyIHRvIHVzZSB1bmlmaWVkCiAgICBmdW5jdGlvbiByZW5kZXJDYWxlbmRhcigpIHsgcmVuZGVyVW5pZmllZENhbCgpOyB9CgogICAgZnVuY3Rpb24gbWFqVmFjYW5jZXMoKSB7CiAgICAgICAgdmFyIHpvbmUgPSAoYXBwRGF0YS5zZXR0aW5ncyAmJiBhcHBEYXRhLnNldHRpbmdzLnpvbmUpIHx8ICdCJzsKICAgICAgICB2YXIgem9uZU5hbWUgPSAnWm9uZSAnICsgem9uZTsKCiAgICAgICAgLy8gRMOpdGVybWluZXIgbCdhbm7DqWUgc2NvbGFpcmUgY291cmFudGUgKHNlcHQgw6AgYW/Du3QpCiAgICAgICAgdmFyIG5vdyA9IG5ldyBEYXRlKCk7CiAgICAgICAgdmFyIHllYXIgPSBub3cuZ2V0TW9udGgoKSA+PSA4ID8gbm93LmdldEZ1bGxZZWFyKCkgOiBub3cuZ2V0RnVsbFllYXIoKSAtIDE7CiAgICAgICAgdmFyIGFubmVlU2NvID0geWVhciArICctJyArICh5ZWFyICsgMSk7CgogICAgICAgIC8vIEpvdXJzIGbDqXJpw6lzIGZyYW7Dp2FpcyAoY2FsY3Vsw6lzIGR5bmFtaXF1ZW1lbnQpCiAgICAgICAgZnVuY3Rpb24gam91cnNGZXJpZXMoeSkgewogICAgICAgICAgICAvLyBDYWxjdWwgZGUgUMOicXVlcyAoYWxnb3JpdGhtZSBkZSBNZWV1cykKICAgICAgICAgICAgdmFyIGE9eSUxOSwgYj1NYXRoLmZsb29yKHkvMTAwKSwgYz15JTEwMCwgZD1NYXRoLmZsb29yKGIvNCksIGU9YiU0OwogICAgICAgICAgICB2YXIgZj1NYXRoLmZsb29yKChiKzgpLzI1KSwgZz1NYXRoLmZsb29yKChiLWYrMSkvMyksIGg9KDE5KmErYi1kLWcrMTUpJTMwOwogICAgICAgICAgICB2YXIgaT1NYXRoLmZsb29yKGMvNCksIGs9YyU0LCBsPSgzMisyKmUrMippLWgtayklNzsKICAgICAgICAgICAgdmFyIG09TWF0aC5mbG9vcigoYSsxMSpoKzIyKmwpLzQ1MSksIG1vbnRoPU1hdGguZmxvb3IoKGgrbC03Km0rMTE0KS8zMSktMTsKICAgICAgICAgICAgdmFyIGRheT0oaCtsLTcqbSsxMTQpJTMxKzE7CiAgICAgICAgICAgIHZhciBwYXF1ZXMgPSBuZXcgRGF0ZSh5LCBtb250aCwgZGF5KTsKICAgICAgICAgICAgdmFyIHRvSVNPID0gZnVuY3Rpb24oZCl7IHJldHVybiBkLnRvSVNPU3RyaW5nKCkuc3BsaXQoJ1QnKVswXTsgfTsKICAgICAgICAgICAgdmFyIGFkZERheXMgPSBmdW5jdGlvbihkLG4peyB2YXIgcj1uZXcgRGF0ZShkKTsgci5zZXREYXRlKHIuZ2V0RGF0ZSgpK24pOyByZXR1cm4gcjsgfTsKICAgICAgICAgICAgcmV0dXJuIFsKICAgICAgICAgICAgICAgIHtuYW1lOidKb3VyIGRlIGxcJ0FuJywgZGF0ZTp0b0lTTyhuZXcgRGF0ZSh5LDAsMSkpfSwKICAgICAgICAgICAgICAgIHtuYW1lOidMdW5kaSBkZSBQw6JxdWVzJywgZGF0ZTp0b0lTTyhhZGREYXlzKHBhcXVlcywxKSl9LAogICAgICAgICAgICAgICAge25hbWU6J0bDqnRlIGR1IFRyYXZhaWwnLCBkYXRlOnRvSVNPKG5ldyBEYXRlKHksNCwxKSl9LAogICAgICAgICAgICAgICAge25hbWU6J1ZpY3RvaXJlIDE5NDUnLCBkYXRlOnRvSVNPKG5ldyBEYXRlKHksNCw4KSl9LAogICAgICAgICAgICAgICAge25hbWU6J0FzY2Vuc2lvbicsIGRhdGU6dG9JU08oYWRkRGF5cyhwYXF1ZXMsMzkpKX0sCiAgICAgICAgICAgICAgICB7bmFtZTonTHVuZGkgZGUgUGVudGVjw7R0ZScsIGRhdGU6dG9JU08oYWRkRGF5cyhwYXF1ZXMsNTApKX0sCiAgICAgICAgICAgICAgICB7bmFtZTonRsOqdGUgTmF0aW9uYWxlJywgZGF0ZTp0b0lTTyhuZXcgRGF0ZSh5LDYsMTQpKX0sCiAgICAgICAgICAgICAgICB7bmFtZTonQXNzb21wdGlvbicsIGRhdGU6dG9JU08obmV3IERhdGUoeSw3LDE1KSl9LAogICAgICAgICAgICAgICAge25hbWU6J1RvdXNzYWludCcsIGRhdGU6dG9JU08obmV3IERhdGUoeSwxMCwxKSl9LAogICAgICAgICAgICAgICAge25hbWU6J0FybWlzdGljZScsIGRhdGU6dG9JU08obmV3IERhdGUoeSwxMCwxMSkpfSwKICAgICAgICAgICAgICAgIHtuYW1lOidOb8OrbCcsIGRhdGU6dG9JU08obmV3IERhdGUoeSwxMSwyNSkpfQogICAgICAgICAgICBdOwogICAgICAgIH0KCiAgICAgICAgLy8gVGVudGVyIGxlIGZldGNoIEFQSSBvZmZpY2llbGxlCiAgICAgICAgdmFyIGFwaVVybCA9ICdodHRwczovL2RhdGEuZWR1Y2F0aW9uLmdvdXYuZnIvYXBpL2V4cGxvcmUvdjIuMS9jYXRhbG9nL2RhdGFzZXRzL2ZyLWVuLWNhbGVuZHJpZXItc2NvbGFpcmUvcmVjb3Jkcz93aGVyZT1hbm5lZV9zY29sYWlyZSUzRCUyMicgKyBhbm5lZVNjbyArICclMjIlMjBBTkQlMjAoem9uZXMlM0QlMjInICsgem9uZU5hbWUgKyAnJTIyJTIwT1IlMjB6b25lcyUzRCUyMkZyYW5jZSUyMGVudGnDqHJlJTIyKSZsaW1pdD01MCZvcmRlcl9ieT1zdGFydF9kYXRlJzsKCiAgICAgICAgdmFyIGJ0biA9IGV2ZW50ICYmIGV2ZW50LnRhcmdldCA/IGV2ZW50LnRhcmdldC5jbG9zZXN0KCdidXR0b24nKSA6IG51bGw7CiAgICAgICAgaWYgKGJ0bikgeyBidG4uZGlzYWJsZWQgPSB0cnVlOyBidG4uaW5uZXJIVE1MID0gJzxpIGNsYXNzPSJmYXMgZmEtc3Bpbm5lciBmYS1zcGluIj48L2k+IENoYXJnZW1lbnQuLi4nOyB9CgogICAgICAgIGZldGNoKGFwaVVybCkudGhlbihmdW5jdGlvbihyKSB7CiAgICAgICAgICAgIGlmICghci5vaykgdGhyb3cgbmV3IEVycm9yKCdIVFRQICcgKyByLnN0YXR1cyk7CiAgICAgICAgICAgIHJldHVybiByLmpzb24oKTsKICAgICAgICB9KS50aGVuKGZ1bmN0aW9uKGRhdGEpIHsKICAgICAgICAgICAgaWYgKCFkYXRhLnJlc3VsdHMgfHwgIWRhdGEucmVzdWx0cy5sZW5ndGgpIHRocm93IG5ldyBFcnJvcignQXVjdW5lIGRvbm7DqWUnKTsKCiAgICAgICAgICAgIC8vIFN1cHByaW1lciBhbmNpZW5uZXMgZW50csOpZXMKICAgICAgICAgICAgYXBwRGF0YS5jYWxlbmRhciA9IGFwcERhdGEuY2FsZW5kYXIuZmlsdGVyKGZ1bmN0aW9uKGMpIHsgcmV0dXJuICFjLnZhY09mZmljaWVsOyB9KTsKICAgICAgICAgICAgdmFyIGFkZGVkID0gMDsKCiAgICAgICAgICAgIGRhdGEucmVzdWx0cy5mb3JFYWNoKGZ1bmN0aW9uKHJlYykgewogICAgICAgICAgICAgICAgdmFyIGRlc2MgPSByZWMuZGVzY3JpcHRpb24gfHwgJyc7CiAgICAgICAgICAgICAgICB2YXIgc3RhcnQgPSAocmVjLnN0YXJ0X2RhdGUgfHwgJycpLnNwbGl0KCdUJylbMF07CiAgICAgICAgICAgICAgICB2YXIgZW5kID0gKHJlYy5lbmRfZGF0ZSB8fCAnJykuc3BsaXQoJ1QnKVswXTsKICAgICAgICAgICAgICAgIGlmICghc3RhcnQgfHwgIWVuZCkgcmV0dXJuOwoKICAgICAgICAgICAgICAgIHZhciBpZCA9ICd2YWNfJyArIGRlc2MucmVwbGFjZSgvW15hLXpBLVowLTldL2csJ18nKSArICdfJyArIHN0YXJ0OwogICAgICAgICAgICAgICAgaWYgKCFhcHBEYXRhLmNhbGVuZGFyLnNvbWUoZnVuY3Rpb24oYyl7IHJldHVybiBjLmlkID09PSBpZDsgfSkpIHsKICAgICAgICAgICAgICAgICAgICBhcHBEYXRhLmNhbGVuZGFyLnB1c2goe2lkOiBpZCwgZGF0ZTogc3RhcnQsIHRhc2s6ICdcdXsxRjNENn0gRMOpYnV0ICcgKyBkZXNjICsgJyAoJyArIHpvbmVOYW1lICsgJyknLCB2YWNPZmZpY2llbDogdHJ1ZX0pOwogICAgICAgICAgICAgICAgICAgIGFwcERhdGEuY2FsZW5kYXIucHVzaCh7aWQ6IGlkKydfZW5kJywgZGF0ZTogZW5kLCB0YXNrOiAnXHV7MUY0REF9IFJlcHJpc2UgJyArIGRlc2MgKyAnICgnICsgem9uZU5hbWUgKyAnKScsIHZhY09mZmljaWVsOiB0cnVlfSk7CiAgICAgICAgICAgICAgICAgICAgYWRkZWQrKzsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAvLyBBam91dGVyIGpvdXJzIGbDqXJpw6lzIHBvdXIgbGVzIDIgYW5uw6llcyBjaXZpbGVzCiAgICAgICAgICAgIFt5ZWFyLCB5ZWFyKzFdLmZvckVhY2goZnVuY3Rpb24oeSkgewogICAgICAgICAgICAgICAgam91cnNGZXJpZXMoeSkuZm9yRWFjaChmdW5jdGlvbihqZikgewogICAgICAgICAgICAgICAgICAgIGlmIChqZi5kYXRlID49IHllYXIrJy0wOS0wMScgJiYgamYuZGF0ZSA8PSAoeWVhcisxKSsnLTA4LTMxJykgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgZmlkID0gJ2ZlcmllXycgKyBqZi5kYXRlOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWFwcERhdGEuY2FsZW5kYXIuc29tZShmdW5jdGlvbihjKXsgcmV0dXJuIGMuaWQgPT09IGZpZDsgfSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFwcERhdGEuY2FsZW5kYXIucHVzaCh7aWQ6IGZpZCwgZGF0ZTogamYuZGF0ZSwgdGFzazogJ1x1ezFGMUVCfVx1ezFGMUY3fSAnICsgamYubmFtZSwgdmFjT2ZmaWNpZWw6IHRydWV9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkZGVkKys7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAvLyBNQUogc2VtYWluZXMgdmFjYW5jZXMgcG91ciBHYW50dAogICAgICAgICAgICB1cGRhdGVWYWNXZWVrc0Zyb21BUEkoZGF0YS5yZXN1bHRzLCB6b25lKTsKCiAgICAgICAgICAgIHNhdmVEYXRhKCk7IHJlbmRlckNhbGVuZGFyKCk7CiAgICAgICAgICAgIGlmKHR5cGVvZiBjaGVja0RhaWx5VGFza3MgPT09ICdmdW5jdGlvbicpIGNoZWNrRGFpbHlUYXNrcygpOwogICAgICAgICAgICBhbGVydCgnXHUyNzA1IENhbGVuZHJpZXIgJyArIGFubmVlU2NvICsgJyBtaXMgw6Agam91ciAhXG5cbicgKyB6b25lTmFtZSArICcg4oCUICcgKyBhZGRlZCArICcgZW50csOpZShzKSBham91dMOpZShzKVxuXG5Tb3VyY2UgOiBkYXRhLmVkdWNhdGlvbi5nb3V2LmZyIChBUEkgb2ZmaWNpZWxsZSknKTsKICAgICAgICB9KS5jYXRjaChmdW5jdGlvbihlcnIpIHsKICAgICAgICAgICAgY29uc29sZS53YXJuKCdBUEkgaW5kaXNwb25pYmxlLCBmYWxsYmFjayBkb25uw6llcyBsb2NhbGVzOicsIGVycik7CiAgICAgICAgICAgIG1halZhY2FuY2VzRmFsbGJhY2soem9uZSwgem9uZU5hbWUpOwogICAgICAgIH0pLmZpbmFsbHkoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIGlmIChidG4pIHsgYnRuLmRpc2FibGVkID0gZmFsc2U7IGJ0bi5pbm5lckhUTUwgPSAnPGkgY2xhc3M9ImZhcyBmYS1zeW5jIj48L2k+IE1BSiBWYWNhbmNlcyc7IH0KICAgICAgICB9KTsKICAgIH0KCiAgICBmdW5jdGlvbiB1cGRhdGVWYWNXZWVrc0Zyb21BUEkocmVzdWx0cywgem9uZSkgewogICAgICAgIHZhciBuZXdWQUMgPSB7YWxsOltdLCBBOltdLCBCOltdLCBDOltdfTsKICAgICAgICByZXN1bHRzLmZvckVhY2goZnVuY3Rpb24ocmVjKSB7CiAgICAgICAgICAgIHZhciBzdGFydCA9IHJlYy5zdGFydF9kYXRlID8gbmV3IERhdGUocmVjLnN0YXJ0X2RhdGUpIDogbnVsbDsKICAgICAgICAgICAgdmFyIGVuZCA9IHJlYy5lbmRfZGF0ZSA/IG5ldyBEYXRlKHJlYy5lbmRfZGF0ZSkgOiBudWxsOwogICAgICAgICAgICBpZiAoIXN0YXJ0IHx8ICFlbmQpIHJldHVybjsKICAgICAgICAgICAgdmFyIHpvbmVzID0gcmVjLnpvbmVzIHx8ICcnOwogICAgICAgICAgICBmb3IgKHZhciBkID0gbmV3IERhdGUoc3RhcnQpOyBkIDwgZW5kOyBkLnNldERhdGUoZC5nZXREYXRlKCkrNykpIHsKICAgICAgICAgICAgICAgIHZhciB3ID0gZ2V0SVNPV2VlayhkKTsKICAgICAgICAgICAgICAgIGlmICh6b25lcy5pbmRleE9mKCdGcmFuY2UnKSA+PSAwKSB7IGlmIChuZXdWQUMuYWxsLmluZGV4T2Yodyk8MCkgbmV3VkFDLmFsbC5wdXNoKHcpOyB9CiAgICAgICAgICAgICAgICBlbHNlIGlmICh6b25lcy5pbmRleE9mKCdBJykgPj0gMCkgeyBpZiAobmV3VkFDLkEuaW5kZXhPZih3KTwwKSBuZXdWQUMuQS5wdXNoKHcpOyB9CiAgICAgICAgICAgICAgICBlbHNlIGlmICh6b25lcy5pbmRleE9mKCdCJykgPj0gMCkgeyBpZiAobmV3VkFDLkIuaW5kZXhPZih3KTwwKSBuZXdWQUMuQi5wdXNoKHcpOyB9CiAgICAgICAgICAgICAgICBlbHNlIGlmICh6b25lcy5pbmRleE9mKCdDJykgPj0gMCkgeyBpZiAobmV3VkFDLkMuaW5kZXhPZih3KTwwKSBuZXdWQUMuQy5wdXNoKHcpOyB9CiAgICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgICBpZiAobmV3VkFDLmFsbC5sZW5ndGgpIFZBQyA9IG5ld1ZBQzsKICAgIH0KCiAgICBmdW5jdGlvbiBnZXRJU09XZWVrKGQpIHsKICAgICAgICB2YXIgZGF0ZSA9IG5ldyBEYXRlKGQuZ2V0VGltZSgpKTsKICAgICAgICBkYXRlLnNldEhvdXJzKDAsMCwwLDApOwogICAgICAgIGRhdGUuc2V0RGF0ZShkYXRlLmdldERhdGUoKSszLShkYXRlLmdldERheSgpKzYpJTcpOwogICAgICAgIHZhciB3ZWVrMSA9IG5ldyBEYXRlKGRhdGUuZ2V0RnVsbFllYXIoKSwwLDQpOwogICAgICAgIHJldHVybiAxK01hdGgucm91bmQoKChkYXRlLmdldFRpbWUoKS13ZWVrMS5nZXRUaW1lKCkpLzg2NDAwMDAwLTMrKHdlZWsxLmdldERheSgpKzYpJTcpLzcpOwogICAgfQoKICAgIGZ1bmN0aW9uIG1halZhY2FuY2VzRmFsbGJhY2soem9uZSwgem9uZU5hbWUpIHsKICAgICAgICB2YXIgVkFDQU5DRVMgPSB7CiAgICAgICAgICAgIGFsbDpbe25hbWU6J1RvdXNzYWludCcsc3RhcnQ6JzIwMjUtMTAtMTgnLGVuZDonMjAyNS0xMS0wMyd9LHtuYW1lOidOb8OrbCcsc3RhcnQ6JzIwMjUtMTItMjAnLGVuZDonMjAyNi0wMS0wNSd9LHtuYW1lOidBc2NlbnNpb24nLHN0YXJ0OicyMDI2LTA1LTEzJyxlbmQ6JzIwMjYtMDUtMTgnfSx7bmFtZTonw4l0w6knLHN0YXJ0OicyMDI2LTA3LTA0JyxlbmQ6JzIwMjYtMDktMDEnfV0sCiAgICAgICAgICAgIEE6W3tuYW1lOidIaXZlcicsc3RhcnQ6JzIwMjYtMDItMDcnLGVuZDonMjAyNi0wMi0yMyd9LHtuYW1lOidQcmludGVtcHMnLHN0YXJ0OicyMDI2LTA0LTA0JyxlbmQ6JzIwMjYtMDQtMjAnfV0sCiAgICAgICAgICAgIEI6W3tuYW1lOidIaXZlcicsc3RhcnQ6JzIwMjYtMDItMTQnLGVuZDonMjAyNi0wMy0wMid9LHtuYW1lOidQcmludGVtcHMnLHN0YXJ0OicyMDI2LTA0LTExJyxlbmQ6JzIwMjYtMDQtMjcnfV0sCiAgICAgICAgICAgIEM6W3tuYW1lOidIaXZlcicsc3RhcnQ6JzIwMjYtMDItMjEnLGVuZDonMjAyNi0wMy0wOSd9LHtuYW1lOidQcmludGVtcHMnLHN0YXJ0OicyMDI2LTA0LTE4JyxlbmQ6JzIwMjYtMDUtMDQnfV0KICAgICAgICB9OwogICAgICAgIGFwcERhdGEuY2FsZW5kYXIgPSBhcHBEYXRhLmNhbGVuZGFyLmZpbHRlcihmdW5jdGlvbihjKXsgcmV0dXJuICFjLnZhY09mZmljaWVsOyB9KTsKICAgICAgICB2YXIgcGVyaW9kcyA9IFZBQ0FOQ0VTLmFsbC5jb25jYXQoVkFDQU5DRVNbem9uZV18fFtdKTsKICAgICAgICB2YXIgYWRkZWQgPSAwOwogICAgICAgIHBlcmlvZHMuZm9yRWFjaChmdW5jdGlvbih2KSB7CiAgICAgICAgICAgIHZhciBpZCA9ICd2YWNfJyt2Lm5hbWUucmVwbGFjZSgvXHMvZywnXycpKydfJyt2LnN0YXJ0OwogICAgICAgICAgICBhcHBEYXRhLmNhbGVuZGFyLnB1c2goe2lkOmlkLGRhdGU6di5zdGFydCx0YXNrOidcdXsxRjNENn0gRMOpYnV0IFZhYy4gJyt2Lm5hbWUrJyAoJyt6b25lTmFtZSsnKScsdmFjT2ZmaWNpZWw6dHJ1ZX0pOwogICAgICAgICAgICBhcHBEYXRhLmNhbGVuZGFyLnB1c2goe2lkOmlkKydfZW5kJyxkYXRlOnYuZW5kLHRhc2s6J1x1ezFGNERBfSBSZXByaXNlICcrdi5uYW1lKycgKCcrem9uZU5hbWUrJyknLHZhY09mZmljaWVsOnRydWV9KTsKICAgICAgICAgICAgYWRkZWQrKzsKICAgICAgICB9KTsKICAgICAgICB2YXIgbmV3VkFDID0ge2FsbDpbNDMsNDQsNTIsMV0sQTpbNyw4LDE1LDE2XSxCOls4LDksMTYsMTddLEM6WzksMTAsMTcsMThdfTsKICAgICAgICBWQUMgPSBuZXdWQUM7CiAgICAgICAgc2F2ZURhdGEoKTsgcmVuZGVyQ2FsZW5kYXIoKTsKICAgICAgICBpZih0eXBlb2YgY2hlY2tEYWlseVRhc2tzID09PSAnZnVuY3Rpb24nKSBjaGVja0RhaWx5VGFza3MoKTsKICAgICAgICBhbGVydCgnXHUyNzA1IENhbGVuZHJpZXIgbWlzIMOgIGpvdXIgKGRvbm7DqWVzIGludMOpZ3LDqWVzKVxuXG4nICsgem9uZU5hbWUgKyAnIOKAlCAnICsgYWRkZWQgKyAnIHDDqXJpb2RlKHMpXG5cbuKaoCBBUEkgaW5kaXNwb25pYmxlLCBkb25uw6llcyAyMDI1LTIwMjYgdXRpbGlzw6llcy4nKTsKICAgIH0KCgogICAgCiAgICAvLyDilZDilZDilZAgUFJPQ8OJRFVSRVMg4pWQ4pWQ4pWQCiAgICB2YXIgUFJPQ19DT0xPUlM9e0E6JyMzQjgyRjYnLEI6JyM4QjVDRjYnLEM6JyNFQzQ4OTknLEQ6JyNFRjQ0NDQnLEU6JyNGOTczMTYnLEY6JyM2QjcyODAnLEc6JyM2QjcyODAnLEg6JyM2QjcyODAnLEk6JyNFQUIzMDgnLEo6JyM2QjcyODAnLEs6JyM2QjcyODAnLEw6JyM2QjcyODAnLE06JyM2QjcyODAnLE46JyMyMkM1NUUnLE86JyMxMEI5ODEnLFA6JyM2MzY2RjEnLFE6JyM2QjcyODAnLFI6JyNBODU1RjcnLFM6JyNGQjcxODUnLFQ6JyM2QjcyODAnLFU6JyM2QjcyODAnLFY6JyM2QjcyODAnLFc6JyM2QjcyODAnLFg6JyM2QjcyODAnLFk6JyM2QjcyODAnLFo6JyM2QjcyODAnfTsKICAgIGZ1bmN0aW9uIGdldFByb2NDb2xvcihjb2RlKXtpZighY29kZSlyZXR1cm4nIzg4OCc7dmFyIGM9Y29kZS50cmltKCkudG9VcHBlckNhc2UoKTtpZihjLmluZGV4T2YoJ1BPJyk9PT0wKXJldHVybicjMDZCNkQ0JztpZihjLmluZGV4T2YoJ1JIJyk9PT0wKXJldHVybicjQTg1NUY3Jzt2YXIgbD1jLmNoYXJBdCgwKTtyZXR1cm4gUFJPQ19DT0xPUlNbbF18fCcjODg4Jzt9CiAgICB3aW5kb3cud2luZG93Ll9wcm9jRWRpdElkPW51bGw7CiAgICBmdW5jdGlvbiBvcGVuUHJvY01vZGFsKGlkKXsKICAgICAgICB3aW5kb3cuX3Byb2NFZGl0SWQ9aWR8fG51bGw7CiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Byb2NNb2QtdGl0bGUnKS50ZXh0Q29udGVudD1pZD8nTW9kaWZpZXIgbGEgcHJvY8OpZHVyZSc6J05vdXZlbGxlIHByb2PDqWR1cmUnOwogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcm9jLWRlbC1idG4nKS5zdHlsZS5kaXNwbGF5PWlkPycnOidub25lJzsKICAgICAgICBpZihpZCl7CiAgICAgICAgICAgIHZhciBwPShhcHBEYXRhLnByb2NlZHVyZXN8fFtdKS5maW5kKGZ1bmN0aW9uKHgpe3JldHVybiB4LmlkPT09aWQ7fSk7CiAgICAgICAgICAgIGlmKHApewogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Byb2MtY29kZScpLnZhbHVlPXAuY29kZXx8Jyc7CiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJvYy10aXRsZScpLnZhbHVlPXAudGl0bGV8fCcnOwogICAgICAgICAgICAgICAgdmFyIHNlbD1kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJvYy1jYXQnKTsKICAgICAgICAgICAgICAgIHZhciBmb3VuZD1mYWxzZTsKICAgICAgICAgICAgICAgIGZvcih2YXIgaT0wO2k8c2VsLm9wdGlvbnMubGVuZ3RoO2krKyl7aWYoc2VsLm9wdGlvbnNbaV0udmFsdWU9PT1wLmNhdCl7Zm91bmQ9dHJ1ZTticmVhazt9fQogICAgICAgICAgICAgICAgaWYoIWZvdW5kJiZwLmNhdCl7dmFyIG9wdD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCdvcHRpb24nKTtvcHQudmFsdWU9cC5jYXQ7b3B0LnRleHQ9cC5jYXQ7c2VsLmluc2VydEJlZm9yZShvcHQsc2VsLnF1ZXJ5U2VsZWN0b3IoJ29wdGlvblt2YWx1ZT0iX19uZXdfXyJdJykpO307CiAgICAgICAgICAgICAgICBzZWwudmFsdWU9cC5jYXR8fCcnOwogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Byb2MtYW5uZWUnKS5jaGVja2VkPSEhcC5hbm5lZTsKICAgICAgICAgICAgICAgIGlmKHAuYW5uZWUpewogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcm9jLXdzJykudmFsdWU9Jyc7CiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Byb2Mtd2UnKS52YWx1ZT0nJzsKICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJvYy13cycpLmRpc2FibGVkPXRydWU7CiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Byb2Mtd2UnKS5kaXNhYmxlZD10cnVlOwogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcm9jLXdzJykuc3R5bGUub3BhY2l0eT0nLjQnOwogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcm9jLXdlJykuc3R5bGUub3BhY2l0eT0nLjQnOwogICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Byb2Mtd3MnKS52YWx1ZT1wLndzdGFydHx8Jyc7CiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Byb2Mtd2UnKS52YWx1ZT1wLndlbmR8fCcnOwogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcm9jLXdzJykuZGlzYWJsZWQ9ZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Byb2Mtd2UnKS5kaXNhYmxlZD1mYWxzZTsKICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJvYy13cycpLnN0eWxlLm9wYWNpdHk9JzEnOwogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcm9jLXdlJykuc3R5bGUub3BhY2l0eT0nMSc7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJvYy16MicpLmlubmVySFRNTD1wLnpvbmUyfHwnJzsKICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcm9jLXozJykuaW5uZXJIVE1MPXAuem9uZTN8fCcnOwogICAgICAgICAgICB9CiAgICAgICAgfWVsc2V7CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcm9jLWNvZGUnKS52YWx1ZT0nJzsKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Byb2MtdGl0bGUnKS52YWx1ZT0nJzsKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Byb2MtY2F0JykudmFsdWU9Jyc7CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcm9jLXdzJykudmFsdWU9Jyc7CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcm9jLXdlJykudmFsdWU9Jyc7CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcm9jLWFubmVlJykuY2hlY2tlZD1mYWxzZTsKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Byb2Mtd3MnKS5kaXNhYmxlZD1mYWxzZTsKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Byb2Mtd2UnKS5kaXNhYmxlZD1mYWxzZTsKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Byb2Mtd3MnKS5zdHlsZS5vcGFjaXR5PScxJzsKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Byb2Mtd2UnKS5zdHlsZS5vcGFjaXR5PScxJzsKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Byb2MtejInKS5pbm5lckhUTUw9Jyc7CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcm9jLXozJykuaW5uZXJIVE1MPScnOwogICAgICAgIH0KICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJvY01vZCcpLnN0eWxlLmRpc3BsYXk9J2ZsZXgnOwogICAgfQogICAgZnVuY3Rpb24gY2xvc2VQcm9jTW9kYWwoKXt2YXIgcG09ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Byb2NNb2QnKTtwbS5zdHlsZS5kaXNwbGF5PSdub25lJztwbS5jbGFzc0xpc3QucmVtb3ZlKCdvcGVuJyk7d2luZG93Ll9wcm9jRWRpdElkPW51bGw7fQogICAgZnVuY3Rpb24gcHJvY0luc2VydEljb24odHlwZSl7CiAgICAgICAgdmFyIGljb25zPXttYWlsOic8c3BhbiBjbGFzcz0icHJvYy1pY29uLW1haWwiPjxpIGNsYXNzPSJmYXMgZmEtZW52ZWxvcGUiPjwvaT48L3NwYW4+JyxhbGVydDonPHNwYW4gY2xhc3M9InByb2MtaWNvbi1hbGVydCI+PGkgY2xhc3M9ImZhcyBmYS1leGNsYW1hdGlvbiI+PC9pPjwvc3Bhbj4nLGlkZWE6JzxzcGFuIGNsYXNzPSJwcm9jLWljb24taWRlYSI+PGkgY2xhc3M9ImZhcyBmYS1saWdodGJ1bGIiPjwvaT48L3NwYW4+J307CiAgICAgICAgZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2luc2VydEhUTUwnLGZhbHNlLGljb25zW3R5cGVdKycmbmJzcDsnKTsKICAgIH0KICAgIGZ1bmN0aW9uIHNhdmVQcm9jKCl7CiAgICAgICAgdHJ5ewogICAgICAgIHZhciByYXdDb2RlPWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcm9jLWNvZGUnKS52YWx1ZS50cmltKCkudG9VcHBlckNhc2UoKTsKICAgICAgICB2YXIgY29kZT1yYXdDb2RlLnJlcGxhY2UoL14oW0EtWl0rKShcZCkvLCckMSAkMicpOwogICAgICAgIHZhciB0aXRsZT1kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJvYy10aXRsZScpLnZhbHVlLnRyaW0oKTsKICAgICAgICBpZighY29kZXx8IXRpdGxlKXthbGVydCgnQ29kZSBldCB0aXRyZSByZXF1aXMuJyk7cmV0dXJuO30KICAgICAgICBpZighYXBwRGF0YS5wcm9jZWR1cmVzKWFwcERhdGEucHJvY2VkdXJlcz1bXTsKICAgICAgICB2YXIgYW5uZWU9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Byb2MtYW5uZWUnKS5jaGVja2VkOwogICAgICAgIHZhciB3cz1hbm5lZT8wOihwYXJzZUludChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJvYy13cycpLnZhbHVlKXx8MCk7CiAgICAgICAgdmFyIHdlPWFubmVlPzA6KHBhcnNlSW50KGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcm9jLXdlJykudmFsdWUpfHx3cyk7CiAgICAgICAgdmFyIG9iaj17aWQ6d2luZG93Ll9wcm9jRWRpdElkfHxEYXRlLm5vdygpLnRvU3RyaW5nKCksY29kZTpjb2RlLHRpdGxlOnRpdGxlLGNhdDpkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJvYy1jYXQnKS52YWx1ZSx3c3RhcnQ6d3Msd2VuZDp3ZSxhbm5lZTphbm5lZSx6b25lMjpkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJvYy16MicpLmlubmVySFRNTCx6b25lMzpkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJvYy16MycpLmlubmVySFRNTCx1cGRhdGVkOm5ldyBEYXRlKCkudG9JU09TdHJpbmcoKS5zcGxpdCgnVCcpWzBdfTsKICAgICAgICBpZih3aW5kb3cuX3Byb2NFZGl0SWQpe3ZhciBpZHg9YXBwRGF0YS5wcm9jZWR1cmVzLmZpbmRJbmRleChmdW5jdGlvbih4KXtyZXR1cm4geC5pZD09PXdpbmRvdy5fcHJvY0VkaXRJZDt9KTtpZihpZHg+PTApYXBwRGF0YS5wcm9jZWR1cmVzW2lkeF09b2JqO30KICAgICAgICBlbHNle2FwcERhdGEucHJvY2VkdXJlcy5wdXNoKG9iaik7fQogICAgICAgIHNhdmVEYXRhKCk7Y2xvc2VQcm9jTW9kYWwoKTtyZW5kZXJQcm9jZWR1cmVzKCk7CiAgICAgICAgfWNhdGNoKGVycil7YWxlcnQoJ0VycmV1ciBzYXV2ZWdhcmRlOiAnK2Vyci5tZXNzYWdlKTtjb25zb2xlLmVycm9yKGVycik7fQogICAgfQogICAgZnVuY3Rpb24gZGVsUHJvYygpewogICAgICAgIGlmKCFfcHJvY0VkaXRJZClyZXR1cm47aWYoIWNvbmZpcm0oJ1N1cHByaW1lciBjZXR0ZSBwcm9jw6lkdXJlID8nKSlyZXR1cm47CiAgICAgICAgYXBwRGF0YS5wcm9jZWR1cmVzPShhcHBEYXRhLnByb2NlZHVyZXN8fFtdKS5maWx0ZXIoZnVuY3Rpb24oeCl7cmV0dXJuIHguaWQhPT13aW5kb3cuX3Byb2NFZGl0SWQ7fSk7CiAgICAgICAgc2F2ZURhdGEoKTtjbG9zZVByb2NNb2RhbCgpO3JlbmRlclByb2NlZHVyZXMoKTsKICAgIH0KICAgIHdpbmRvdy5fcHJvY0ZpbHRlckNhdD0nJzsKICAgIAogICAgZnVuY3Rpb24gZm9ybWF0RGF0ZUZSKGQpIHsKICAgICAgICBpZighZCkgcmV0dXJuICcnOwogICAgICAgIHZhciBkdCA9IChkIGluc3RhbmNlb2YgRGF0ZSkgPyBkIDogbmV3IERhdGUoZCk7CiAgICAgICAgaWYoaXNOYU4oZHQuZ2V0VGltZSgpKSkgcmV0dXJuIGQ7CiAgICAgICAgcmV0dXJuIGR0LnRvTG9jYWxlRGF0ZVN0cmluZygnZnItRlInLHtkYXk6JzItZGlnaXQnLG1vbnRoOidsb25nJyx5ZWFyOidudW1lcmljJ30pOwogICAgfQoKICAgIAogICAgLy8gQW5uw6llIHNjb2xhaXJlIGNvdXJhbnRlIChleDogIjIwMjUtMjAyNiIpCiAgICBmdW5jdGlvbiBnZXRDdXJyZW50U2Nob29sWWVhcigpewogICAgICAgIHZhciBub3c9bmV3IERhdGUoKSxtPW5vdy5nZXRNb250aCgpKzEseT1ub3cuZ2V0RnVsbFllYXIoKTsKICAgICAgICByZXR1cm4gbT49OD8oeSsnLScrKHkrMSkpOigoeS0xKSsnLScreSk7CiAgICB9CiAgICAvLyBBdXRvLXJlc2V0OiByw6l0YWJsaXQgbGVzIHByb2PDqWR1cmVzIHRlcm1pbsOpZXMgZCd1bmUgYW5uw6llIHByw6ljw6lkZW50ZQogICAgZnVuY3Rpb24gYXV0b1Jlc2V0RG9uZSgpewogICAgICAgIHZhciBzeT1nZXRDdXJyZW50U2Nob29sWWVhcigpO3ZhciBjaGFuZ2VkPWZhbHNlOwogICAgICAgIChhcHBEYXRhLnByb2NlZHVyZXN8fFtdKS5mb3JFYWNoKGZ1bmN0aW9uKHApewogICAgICAgICAgICBpZihwLmRvbmUmJnAuZG9uZVNZJiZwLmRvbmVTWSE9PXN5KXtwLmRvbmU9ZmFsc2U7cC5kb25lU1k9Jyc7Y2hhbmdlZD10cnVlO30KICAgICAgICB9KTsKICAgICAgICAoYXBwRGF0YS5nYW50dHx8W10pLmZvckVhY2goZnVuY3Rpb24oZyl7CiAgICAgICAgICAgIGlmKGcuZG9uZSYmZy5kb25lU1kmJmcuZG9uZVNZIT09c3kpe2cuZG9uZT1mYWxzZTtnLmRvbmVTWT0nJztjaGFuZ2VkPXRydWU7fQogICAgICAgIH0pOwogICAgICAgIGlmKGNoYW5nZWQpc2F2ZURhdGEoKTsKICAgIH0KCiAgICBmdW5jdGlvbiBuYXRDb2RlU29ydChhLGIpewogICAgICAgIHZhciBjYT0oYS5jb2RlfHwnJyksY2I9KGIuY29kZXx8JycpOwogICAgICAgIHZhciBwYT1jYS5tYXRjaCgvXihbQS1aYS16XSspXHMqKFxkKikkLyl8fFsnJywnJywwXTsKICAgICAgICB2YXIgcGI9Y2IubWF0Y2goL14oW0EtWmEtel0rKVxzKihcZCopJC8pfHxbJycsJycsMF07CiAgICAgICAgdmFyIGxhPXBhWzFdLnRvVXBwZXJDYXNlKCksbGI9cGJbMV0udG9VcHBlckNhc2UoKTsKICAgICAgICBpZihsYTxsYilyZXR1cm4gLTE7aWYobGE+bGIpcmV0dXJuIDE7CiAgICAgICAgcmV0dXJuKHBhcnNlSW50KHBhWzJdKXx8MCktKHBhcnNlSW50KHBiWzJdKXx8MCk7CiAgICB9CiAgICBmdW5jdGlvbiByZW5kZXJQcm9jZWR1cmVzKCl7CiAgICAgICAgdmFyIHByb2NzPShhcHBEYXRhLnByb2NlZHVyZXN8fFtdKS5zbGljZSgpLnNvcnQobmF0Q29kZVNvcnQpOwogICAgICAgIHZhciBjYXRzPXt9O3Byb2NzLmZvckVhY2goZnVuY3Rpb24ocCl7aWYocC5jYXQpY2F0c1twLmNhdF09KGNhdHNbcC5jYXRdfHwwKSsxO30pOwogICAgICAgIHZhciBmaD0nPGJ1dHRvbiBjbGFzcz0iJysoIV9wcm9jRmlsdGVyQ2F0PydhY3RpdmUnOicnKSsnIiBvbmNsaWNrPSJfcHJvY0ZpbHRlckNhdD1cJ1wnO3JlbmRlclByb2NlZHVyZXMoKSI+VG91cyAoJytwcm9jcy5sZW5ndGgrJyk8L2J1dHRvbj4nOwogICAgICAgIE9iamVjdC5rZXlzKGNhdHMpLnNvcnQoKS5mb3JFYWNoKGZ1bmN0aW9uKGMpe2ZoKz0nPGJ1dHRvbiBjbGFzcz0iJysoX3Byb2NGaWx0ZXJDYXQ9PT1jPydhY3RpdmUnOicnKSsnIiBvbmNsaWNrPSJfcHJvY0ZpbHRlckNhdD1cJycrYy5yZXBsYWNlKC8nL2csIlxcJyIpKydcJztyZW5kZXJQcm9jZWR1cmVzKCkiPicrYysnICgnK2NhdHNbY10rJyk8L2J1dHRvbj4nO30pOwogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcm9jLWZpbHRlcnMnKS5pbm5lckhUTUw9Zmg7CiAgICAgICAgdmFyIGZpbHRlcmVkPV9wcm9jRmlsdGVyQ2F0P3Byb2NzLmZpbHRlcihmdW5jdGlvbihwKXtyZXR1cm4gcC5jYXQ9PT1fcHJvY0ZpbHRlckNhdDt9KTpwcm9jczsKICAgICAgICB2YXIgaD0nJzsKICAgICAgICBpZighZmlsdGVyZWQubGVuZ3RoKXtoPSc8ZGl2IHN0eWxlPSJ0ZXh0LWFsaWduOmNlbnRlcjtwYWRkaW5nOjQwcHg7Y29sb3I6Izk5OSI+PGkgY2xhc3M9ImZhcyBmYS1ib29rIiBzdHlsZT0iZm9udC1zaXplOjJyZW07bWFyZ2luLWJvdHRvbToxMHB4O2Rpc3BsYXk6YmxvY2siPjwvaT5BdWN1bmUgcHJvY8OpZHVyZTwvZGl2Pic7fQogICAgICAgIGZpbHRlcmVkLmZvckVhY2goZnVuY3Rpb24ocCl7CiAgICAgICAgICAgIHZhciBjb2w9Z2V0UHJvY0NvbG9yKHAuY29kZSk7CiAgICAgICAgICAgIGgrPSc8ZGl2IGNsYXNzPSJwcm9jLWNhcmQiIG9uY2xpY2s9InZpZXdQcm9jKFwnJytwLmlkKydcJykiIHN0eWxlPSJkaXNwbGF5OmZsZXg7YWxpZ24taXRlbXM6Y2VudGVyO2dhcDoxMHB4O3BhZGRpbmc6MTBweCAxNHB4Ij4nOwogICAgICAgICAgICBoKz0nPHNwYW4gY2xhc3M9InByb2MtY29kZSIgc3R5bGU9ImJhY2tncm91bmQ6Jytjb2wrJztwYWRkaW5nOjZweCAxMHB4O2JvcmRlci1yYWRpdXM6OHB4O2ZvbnQtd2VpZ2h0OjcwMDtmb250LXNpemU6LjhyZW07Y29sb3I6I2ZmZjttaW4td2lkdGg6NDBweDt0ZXh0LWFsaWduOmNlbnRlciI+JysocC5jb2RlfHwnPycpKyc8L3NwYW4+JzsKICAgICAgICAgICAgaCs9JzxzcGFuIHN0eWxlPSJmb250LXdlaWdodDo2MDA7Zm9udC1zaXplOi44OHJlbTtjb2xvcjojMzMzO2ZsZXg6MTt3aGl0ZS1zcGFjZTpub3dyYXA7b3ZlcmZsb3c6aGlkZGVuO3RleHQtb3ZlcmZsb3c6ZWxsaXBzaXMiPicrKHAudGl0bGV8fCdTYW5zIHRpdHJlJykrJzwvc3Bhbj4nOwogICAgICAgICAgICBoKz0nPHNwYW4gc3R5bGU9ImZvbnQtc2l6ZTouNzJyZW07Y29sb3I6Izk5OTt3aGl0ZS1zcGFjZTpub3dyYXAiPicrZm9ybWF0RGF0ZUZSKHAudXBkYXRlZCkrJzwvc3Bhbj4nOwogICAgICAgICAgICBoKz0ocC5jYXQ/JzxzcGFuIGNsYXNzPSJwcm9jLWNhcmQtY2F0IiBzdHlsZT0id2hpdGUtc3BhY2U6bm93cmFwIj4nK3AuY2F0Kyc8L3NwYW4+JzonJyk7CiAgICAgICAgICAgIGgrPSc8ZGl2IGNsYXNzPSJwcm9jLWNhcmQtYWN0aW9ucyIgc3R5bGU9ImRpc3BsYXk6ZmxleDtnYXA6NHB4O21hcmdpbi1sZWZ0OjRweCI+PGJ1dHRvbiBvbmNsaWNrPSJldmVudC5zdG9wUHJvcGFnYXRpb24oKTtvcGVuUHJvY01vZGFsKFwnJytwLmlkKydcJykiIHRpdGxlPSJNb2RpZmllciI+PGkgY2xhc3M9ImZhcyBmYS1wZW4iPjwvaT48L2J1dHRvbj4nOwogICAgICAgICAgICBoKz0nPGJ1dHRvbiBvbmNsaWNrPSJldmVudC5zdG9wUHJvcGFnYXRpb24oKTtwcmludFByb2MoXCcnK3AuaWQrJ1wnKSIgdGl0bGU9IkltcHJpbWVyIj48aSBjbGFzcz0iZmFzIGZhLXByaW50Ij48L2k+PC9idXR0b24+PC9kaXY+PC9kaXY+JzsKICAgICAgICB9KTsKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJvYy1saXN0JykuaW5uZXJIVE1MPWg7CiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Byb2Mtdmlldy1hcmVhJykuc3R5bGUuZGlzcGxheT0nbm9uZSc7CiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Byb2MtbGlzdCcpLnN0eWxlLmRpc3BsYXk9Jyc7CiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Byb2MtZmlsdGVycycpLnN0eWxlLmRpc3BsYXk9Jyc7CiAgICB9CiAgICBmdW5jdGlvbiB2aWV3UHJvYyhpZCl7CiAgICAgICAgdmFyIHA9KGFwcERhdGEucHJvY2VkdXJlc3x8W10pLmZpbmQoZnVuY3Rpb24oeCl7cmV0dXJuIHguaWQ9PT1pZDt9KTtpZighcClyZXR1cm47CiAgICAgICAgdmFyIGNvbD1nZXRQcm9jQ29sb3IocC5jb2RlKTsKICAgICAgICB2YXIgaD0nPGRpdiBjbGFzcz0icHJvYy12aWV3Ij48ZGl2IGNsYXNzPSJwcm9jLXZpZXctaGVhZGVyIiBzdHlsZT0iYmFja2dyb3VuZDonK2NvbCsnIj48aDI+JysocC50aXRsZXx8JycpKyc8L2gyPjxkaXYgY2xhc3M9InB2LWNvZGUiPicrKHAuY29kZXx8JycpKyhwLmNhdD8nIOKAlCAnK3AuY2F0OicnKSsnPC9kaXY+PC9kaXY+PGRpdiBjbGFzcz0icHJvYy12aWV3LWJvZHkiPic7CiAgICAgICAgaCs9JzxkaXYgc3R5bGU9Im1hcmdpbi1ib3R0b206MTZweDtkaXNwbGF5OmZsZXg7Z2FwOjhweCI+PGJ1dHRvbiBjbGFzcz0ibWIgbWItb2siIG9uY2xpY2s9Im9wZW5Qcm9jTW9kYWwoXCcnK2lkKydcJykiPjxpIGNsYXNzPSJmYXMgZmEtcGVuIj48L2k+IE1vZGlmaWVyPC9idXR0b24+PGJ1dHRvbiBjbGFzcz0ibWIiIHN0eWxlPSJiYWNrZ3JvdW5kOiM1NTU7Y29sb3I6I2ZmZiIgb25jbGljaz0icHJpbnRQcm9jKFwnJytpZCsnXCcpIj48aSBjbGFzcz0iZmFzIGZhLXByaW50Ij48L2k+IEltcHJpbWVyPC9idXR0b24+PGJ1dHRvbiBjbGFzcz0ibWIgbWItYyIgb25jbGljaz0icmVuZGVyUHJvY2VkdXJlcygpIj48aSBjbGFzcz0iZmFzIGZhLWFycm93LWxlZnQiPjwvaT4gUmV0b3VyPC9idXR0b24+PC9kaXY+JzsKICAgICAgICBpZihwLnpvbmUyKWgrPSc8ZGl2IGNsYXNzPSJwcm9jLXpvbmUiIHN0eWxlPSJib3JkZXItbGVmdC1jb2xvcjonK2NvbCsnIj48aDQ+QWN0aW9ucyAvIMOJdGFwZXM8L2g0PjxkaXYgY2xhc3M9InByb2Mtem9uZS1jb250ZW50Ij4nK3Auem9uZTIrJzwvZGl2PjwvZGl2Pic7CiAgICAgICAgaWYocC56b25lMyloKz0nPGRpdiBjbGFzcz0icHJvYy16b25lIiBzdHlsZT0iYm9yZGVyLWxlZnQtY29sb3I6Jytjb2wrJyI+PGg0Pk5vdGVzPC9oND48ZGl2IGNsYXNzPSJwcm9jLXpvbmUtY29udGVudCI+JytwLnpvbmUzKyc8L2Rpdj48L2Rpdj4nOwogICAgICAgIGgrPSc8L2Rpdj48L2Rpdj4nOwogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcm9jLXZpZXctYXJlYScpLmlubmVySFRNTD1oOwogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcm9jLXZpZXctYXJlYScpLnN0eWxlLmRpc3BsYXk9Jyc7CiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Byb2MtbGlzdCcpLnN0eWxlLmRpc3BsYXk9J25vbmUnOwogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcm9jLWZpbHRlcnMnKS5zdHlsZS5kaXNwbGF5PSdub25lJzsKICAgIH0KICAgIGZ1bmN0aW9uIHByaW50UHJvYyhpZCl7CiAgICAgICAgdmFyIHA9KGFwcERhdGEucHJvY2VkdXJlc3x8W10pLmZpbmQoZnVuY3Rpb24oeCl7cmV0dXJuIHguaWQ9PT1pZDt9KTtpZighcClyZXR1cm47CiAgICAgICAgdmFyIGNvbD1nZXRQcm9jQ29sb3IocC5jb2RlKTsKICAgICAgICAvLyBMaWdodGVuIGNvbG9yIGZvciB6b25lIGJnCiAgICAgICAgZnVuY3Rpb24gaGV4VG9SZ2JhKGhleCxhKXsKICAgICAgICAgICAgdmFyIHI9cGFyc2VJbnQoaGV4LnNsaWNlKDEsMyksMTYpLGc9cGFyc2VJbnQoaGV4LnNsaWNlKDMsNSksMTYpLGI9cGFyc2VJbnQoaGV4LnNsaWNlKDUsNyksMTYpOwogICAgICAgICAgICByZXR1cm4ncmdiYSgnK3IrJywnK2crJywnK2IrJywnK2ErJyknOwogICAgICAgIH0KICAgICAgICB2YXIgbGlnaHRDb2w9aGV4VG9SZ2JhKGNvbCwwLjIpOwogICAgICAgIHZhciBsb2dvU3JjPShhcHBEYXRhLnNldHRpbmdzJiZhcHBEYXRhLnNldHRpbmdzLmxvZ28pfHwnJzsKICAgICAgICB2YXIgdG9kYXk9bmV3IERhdGUoKS50b0xvY2FsZURhdGVTdHJpbmcoJ2ZyLUZSJyx7ZGF5OicyLWRpZ2l0Jyxtb250aDonbG9uZycseWVhcjonbnVtZXJpYyd9KTsKICAgICAgICB2YXIgdXNlck5hbWU9KGFwcERhdGEuc2V0dGluZ3MmJmFwcERhdGEuc2V0dGluZ3MudXNlcil8fCcnOwogICAgICAgIHZhciBodG1sPScnOwogICAgICAgIGh0bWwrPSc8c3R5bGU+QHBhZ2V7c2l6ZTpBNDttYXJnaW46NW1tIDVtbSAyNW1tIDVtbX1ib2R5e21hcmdpbjowO3BhZGRpbmc6MH08L3N0eWxlPic7CiAgICAgICAgaHRtbCs9JzxkaXYgc3R5bGU9ImZvbnQtZmFtaWx5OkFyaWFsLHNhbnMtc2VyaWY7cGFkZGluZy1ib3R0b206MjVtbSI+JzsKICAgICAgICBodG1sKz0nPGRpdiBzdHlsZT0iYmFja2dyb3VuZDonK2NvbCsnO2NvbG9yOiNmZmY7cGFkZGluZzoxMHB4IDE0cHg7LXdlYmtpdC1wcmludC1jb2xvci1hZGp1c3Q6ZXhhY3Q7cHJpbnQtY29sb3ItYWRqdXN0OmV4YWN0O3RleHQtYWxpZ246cmlnaHQiPic7CiAgICAgICAgaHRtbCs9JzxoMSBzdHlsZT0ibWFyZ2luOjA7Zm9udC1zaXplOjEuM3JlbTtmb250LXdlaWdodDo3MDAiPicrcC5jb2RlKycgLSAnK3AudGl0bGUrJzwvaDE+JzsKICAgICAgICBodG1sKz0nPC9kaXY+JzsKICAgICAgICBodG1sKz0nPGRpdiBzdHlsZT0icGFkZGluZzo4cHggMTBweDtjb2xvcjojMzMzIj4nOwogICAgICAgIGlmKHAuem9uZTIpewogICAgICAgIGh0bWwrPSc8ZGl2IHN0eWxlPSJtYXJnaW46OHB4IDA7cGFkZGluZzowIj4nOwogICAgICAgIGh0bWwrPSc8ZGl2IHN0eWxlPSJiYWNrZ3JvdW5kOicrbGlnaHRDb2wrJztwYWRkaW5nOjhweCAxNHB4O2ZvbnQtd2VpZ2h0OjcwMDtmb250LXNpemU6Ljg1cmVtO2NvbG9yOiMzMzM7dGV4dC10cmFuc2Zvcm06dXBwZXJjYXNlO2xldHRlci1zcGFjaW5nOi41cHg7Ym9yZGVyLXJhZGl1czo2cHggNnB4IDAgMDstd2Via2l0LXByaW50LWNvbG9yLWFkanVzdDpleGFjdDtwcmludC1jb2xvci1hZGp1c3Q6ZXhhY3QiPkFjdGlvbnMgLyDDiXRhcGVzPC9kaXY+JzsKICAgICAgICBodG1sKz0nPGRpdiBzdHlsZT0icGFkZGluZzo4cHggMTRweDtmb250LXNpemU6LjlyZW07bGluZS1oZWlnaHQ6MS42NTtjb2xvcjojNDQ0O2JvcmRlci1sZWZ0OjRweCBzb2xpZCAnK2NvbCsnIj4nK3Auem9uZTIrJzwvZGl2PjwvZGl2Pic7fQogICAgICAgIGlmKHAuem9uZTMpewogICAgICAgIGh0bWwrPSc8ZGl2IHN0eWxlPSJtYXJnaW46OHB4IDA7cGFkZGluZzowIj4nOwogICAgICAgIGh0bWwrPSc8ZGl2IHN0eWxlPSJiYWNrZ3JvdW5kOicrbGlnaHRDb2wrJztwYWRkaW5nOjhweCAxNHB4O2ZvbnQtd2VpZ2h0OjcwMDtmb250LXNpemU6Ljg1cmVtO2NvbG9yOiMzMzM7dGV4dC10cmFuc2Zvcm06dXBwZXJjYXNlO2xldHRlci1zcGFjaW5nOi41cHg7Ym9yZGVyLXJhZGl1czo2cHggNnB4IDAgMDstd2Via2l0LXByaW50LWNvbG9yLWFkanVzdDpleGFjdDtwcmludC1jb2xvci1hZGp1c3Q6ZXhhY3QiPk5vdGVzIC8gUmVtYXJxdWVzPC9kaXY+JzsKICAgICAgICBodG1sKz0nPGRpdiBzdHlsZT0icGFkZGluZzo4cHggMTRweDtmb250LXNpemU6LjlyZW07bGluZS1oZWlnaHQ6MS42NTtjb2xvcjojNDQ0O2JvcmRlci1sZWZ0OjRweCBzb2xpZCAnK2NvbCsnIj4nK3Auem9uZTMrJzwvZGl2PjwvZGl2Pic7fQogICAgICAgIGh0bWwrPSc8L2Rpdj48L2Rpdj4nOwogICAgICAgIGh0bWwrPSc8ZGl2IHN0eWxlPSJwb3NpdGlvbjpmaXhlZDtib3R0b206MDtsZWZ0OjA7cmlnaHQ6MDtkaXNwbGF5OmZsZXg7YWxpZ24taXRlbXM6Y2VudGVyO2p1c3RpZnktY29udGVudDpzcGFjZS1iZXR3ZWVuO3BhZGRpbmc6NnB4IDEwcHg7Ym9yZGVyLXRvcDoycHggc29saWQgI2NjYztmb250LWZhbWlseTpBcmlhbCxzYW5zLXNlcmlmOy13ZWJraXQtcHJpbnQtY29sb3ItYWRqdXN0OmV4YWN0O3ByaW50LWNvbG9yLWFkanVzdDpleGFjdDtiYWNrZ3JvdW5kOiNmZmYiPic7CiAgICAgICAgaWYobG9nb1NyYylodG1sKz0nPGltZyBzcmM9IicrbG9nb1NyYysnIiBzdHlsZT0iaGVpZ2h0OjFjbSI+JzsKICAgICAgICBodG1sKz0nPGRpdiBzdHlsZT0idGV4dC1hbGlnbjpyaWdodCI+PGRpdiBzdHlsZT0iZm9udC1zaXplOi44cmVtO2ZvbnQtd2VpZ2h0OjYwMDtjb2xvcjojNTU1Ij4nK3AuY29kZSsnIC0gJytwLnRpdGxlKyc8L2Rpdj4nOwogICAgICAgIGh0bWwrPSc8ZGl2IHN0eWxlPSJmb250LXNpemU6LjYycmVtO2NvbG9yOiM5OTkiPicrKHVzZXJOYW1lP3VzZXJOYW1lKycgLSAnOicnKSt0b2RheSsnPC9kaXY+PC9kaXY+JzsKICAgICAgICBodG1sKz0nPC9kaXY+JzsKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJpbnQtem9uZScpLmlubmVySFRNTD1odG1sOwogICAgICAgIHZhciBvbGRUaXRsZT1kb2N1bWVudC50aXRsZTtkb2N1bWVudC50aXRsZT1wLmNvZGUrJyAtICcrcC50aXRsZTsKICAgICAgICB0cnl7d2luZG93LnBhcmVudC5kb2N1bWVudC50aXRsZT1wLmNvZGUrJyAtICcrcC50aXRsZTt9Y2F0Y2goZSl7fQogICAgICAgIHdhaXRGb3JJbWFnZXNUaGVuUHJpbnQoKTsKICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7ZG9jdW1lbnQudGl0bGU9b2xkVGl0bGU7dHJ5e3dpbmRvdy5wYXJlbnQuZG9jdW1lbnQudGl0bGU9J1BJTE9URSBcdTIwMTQgU3VpdGUgZGUgRGlyZWN0aW9uJzt9Y2F0Y2goZSl7fX0sMzAwMCk7CiAgICB9CiAgICAvLyDilZDilZDilZAgU8OJUEFSQVRFVVJTIOKVkOKVkOKVkAogICAgZnVuY3Rpb24gbG9hZFNlcENvbmZpZygpewogICAgICAgIHZhciBib3g9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NlcC1jb25maWcnKTtpZighYm94KXJldHVybjsKICAgICAgICB2YXIgaXRlbXM9ZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLm1lbnUtaXRlbVtkYXRhLW1lbnVdJyk7CiAgICAgICAgdmFyIHNlcHM9KGFwcERhdGEuc2V0dGluZ3MmJmFwcERhdGEuc2V0dGluZ3Muc2VwYXJhdG9ycyl8fFtdOwogICAgICAgIHZhciBoPScnOwogICAgICAgIGl0ZW1zLmZvckVhY2goZnVuY3Rpb24oaXRlbSl7dmFyIG1lbnVJZD1pdGVtLmdldEF0dHJpYnV0ZSgnZGF0YS1tZW51Jyk7aWYobWVudUlkPT09J21lbnUxJylyZXR1cm47dmFyIGxhYmVsPWl0ZW0udGV4dENvbnRlbnQudHJpbSgpO3ZhciBjaGVja2VkPXNlcHMuaW5kZXhPZihtZW51SWQpPj0wPycgY2hlY2tlZCc6Jyc7aCs9JzxsYWJlbCBzdHlsZT0iZm9udC1zaXplOi43OHJlbTtkaXNwbGF5OmZsZXg7YWxpZ24taXRlbXM6Y2VudGVyO2dhcDo2cHg7Y3Vyc29yOnBvaW50ZXIiPjxpbnB1dCB0eXBlPSJjaGVja2JveCIgdmFsdWU9IicrbWVudUlkKyciJytjaGVja2VkKycgb25jaGFuZ2U9InNhdmVTZXBDb25maWcoKSI+ICcrbGFiZWwrJzwvbGFiZWw+Jzt9KTsKICAgICAgICBib3guaW5uZXJIVE1MPWg7CiAgICB9CiAgICBmdW5jdGlvbiBzYXZlU2VwQ29uZmlnKCl7CiAgICAgICAgdmFyIGNoZWNrcz1kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcjc2VwLWNvbmZpZyBpbnB1dFt0eXBlPWNoZWNrYm94XTpjaGVja2VkJyk7CiAgICAgICAgdmFyIHNlcHM9W107Y2hlY2tzLmZvckVhY2goZnVuY3Rpb24oYyl7c2Vwcy5wdXNoKGMudmFsdWUpO30pOwogICAgICAgIGlmKCFhcHBEYXRhLnNldHRpbmdzKWFwcERhdGEuc2V0dGluZ3M9e307YXBwRGF0YS5zZXR0aW5ncy5zZXBhcmF0b3JzPXNlcHM7c2F2ZURhdGEoKTthcHBseVNlcGFyYXRvcnMoKTsKICAgIH0KICAgIGZ1bmN0aW9uIGFwcGx5U2VwYXJhdG9ycygpewogICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5tZW51LXNlcGFyYXRvcicpLmZvckVhY2goZnVuY3Rpb24ocyl7cy5yZW1vdmUoKTt9KTsKICAgICAgICB2YXIgc2Vwcz0oYXBwRGF0YS5zZXR0aW5ncyYmYXBwRGF0YS5zZXR0aW5ncy5zZXBhcmF0b3JzKXx8W107CiAgICAgICAgc2Vwcy5mb3JFYWNoKGZ1bmN0aW9uKG1lbnVJZCl7dmFyIGl0ZW09ZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1lbnUtaXRlbVtkYXRhLW1lbnU9IicrbWVudUlkKyciXScpO2lmKGl0ZW0mJml0ZW0ubmV4dEVsZW1lbnRTaWJsaW5nKXt2YXIgc2VwPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO3NlcC5jbGFzc05hbWU9J21lbnUtc2VwYXJhdG9yJztpdGVtLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKHNlcCxpdGVtLm5leHRFbGVtZW50U2libGluZyk7fX0pOwogICAgfQogICAgLy8gRXhwb3NlIHByb2MgZnVuY3Rpb25zIHRvIGdsb2JhbCBzY29wZSAoSUlGRSBjbG9zdXJlKQogICAgCiAgICAvLyBWaWV3IHByb2NlZHVyZSBmcm9tIEdhbnR0IChyZWFkLW9ubHkgcG9wdXApCiAgICBmdW5jdGlvbiB2aWV3UHJvY1JlYWRvbmx5KGNvZGUpIHsKICAgICAgICBpZighY29kZSkgcmV0dXJuOwogICAgICAgIC8vIFJlbW92ZSBleGlzdGluZyBwb3B1cAogICAgICAgIHZhciBvbGQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJvYy1yby1wb3B1cCcpOwogICAgICAgIGlmKG9sZCkgb2xkLnJlbW92ZSgpOwogICAgICAgIC8vIFNlYXJjaCBpbiBwcm9jZWR1cmVzIGZpcnN0LCB0aGVuIGZhbGwgYmFjayB0byBnYW50dCBpdGVtCiAgICAgICAgdmFyIHByb2NzID0gYXBwRGF0YS5wcm9jZWR1cmVzIHx8IFtdOwogICAgICAgIHZhciBwcm9jID0gcHJvY3MuZmluZChmdW5jdGlvbih4KXsgcmV0dXJuIHguY29kZSAmJiB4LmNvZGUudHJpbSgpLnRvVXBwZXJDYXNlKCkgPT09IGNvZGUudHJpbSgpLnRvVXBwZXJDYXNlKCk7IH0pOwogICAgICAgIHZhciBnYW50dEl0ZW0gPSAoYXBwRGF0YS5nYW50dHx8W10pLmZpbmQoZnVuY3Rpb24oeCl7IHJldHVybiB4LmNvZGUgJiYgeC5jb2RlLnRyaW0oKS50b1VwcGVyQ2FzZSgpID09PSBjb2RlLnRyaW0oKS50b1VwcGVyQ2FzZSgpOyB9KTsKICAgICAgICBpZighcHJvYyAmJiAhZ2FudHRJdGVtKSB7IGFsZXJ0KCdBdWN1bmUgcHJvY8OpZHVyZSB0cm91dsOpZSBhdmVjIGxlIGNvZGUgIicgKyBjb2RlICsgJyInKTsgcmV0dXJuOyB9CiAgICAgICAgLy8gVXNlIHByb2NlZHVyZSBkYXRhIGlmIGF2YWlsYWJsZSwgb3RoZXJ3aXNlIGJ1aWxkIGZyb20gZ2FudHQKICAgICAgICB2YXIgdGl0bGUgPSBwcm9jID8gcHJvYy50aXRsZSA6IChnYW50dEl0ZW0gPyBnYW50dEl0ZW0ubmFtZSA6ICcnKTsKICAgICAgICB2YXIgcENvZGUgPSBwcm9jID8gcHJvYy5jb2RlIDogY29kZTsKICAgICAgICB2YXIgY2F0ID0gcHJvYyA/IHByb2MuY2F0IDogKGdhbnR0SXRlbSA/IGdhbnR0SXRlbS5jYXQgOiAnJyk7CiAgICAgICAgCiAgICAgICAgdmFyIHoyID0gcHJvYyA/IChwcm9jLnpvbmUyfHwnJykgOiAnJzsKICAgICAgICB2YXIgejMgPSBwcm9jID8gKHByb2Muem9uZTN8fCcnKSA6IChnYW50dEl0ZW0gJiYgZ2FudHRJdGVtLm5vdGVzID8gZ2FudHRJdGVtLm5vdGVzIDogJycpOwogICAgICAgIHZhciBwSWQgPSBwcm9jID8gcHJvYy5pZCA6IG51bGw7CiAgICAgICAgdmFyIGJnID0gKHR5cGVvZiBnZXRQcm9jQ29sb3I9PT0nZnVuY3Rpb24nKSA/IGdldFByb2NDb2xvcihwQ29kZSkgOiAnIzJjM2U1MCc7CiAgICAgICAgLy8gQnVpbGQgcG9wdXAKICAgICAgICB2YXIgaCA9ICc8ZGl2IHN0eWxlPSJwb3NpdGlvbjpmaXhlZDt0b3A6MDtsZWZ0OjA7d2lkdGg6MTAwJTtoZWlnaHQ6MTAwJTtiYWNrZ3JvdW5kOnJnYmEoMCwwLDAsLjUpO3otaW5kZXg6OTk5OTtkaXNwbGF5OmZsZXg7YWxpZ24taXRlbXM6Y2VudGVyO2p1c3RpZnktY29udGVudDpjZW50ZXIiIG9uY2xpY2s9ImlmKGV2ZW50LnRhcmdldD09PXRoaXMpdGhpcy5yZW1vdmUoKSIgaWQ9InByb2Mtcm8tcG9wdXAiPic7CiAgICAgICAgaCArPSAnPGRpdiBzdHlsZT0iYmFja2dyb3VuZDojZmZmO2JvcmRlci1yYWRpdXM6MTRweDt3aWR0aDo4MHZ3O21heC1oZWlnaHQ6ODV2aDtvdmVyZmxvdy15OmF1dG87Ym94LXNoYWRvdzowIDIwcHggNjBweCByZ2JhKDAsMCwwLC4yNSkiPic7CiAgICAgICAgaCArPSAnPGRpdiBzdHlsZT0iYmFja2dyb3VuZDonK2JnKyc7Y29sb3I6I2ZmZjtwYWRkaW5nOjE4cHggMjJweDtib3JkZXItcmFkaXVzOjE0cHggMTRweCAwIDA7ZGlzcGxheTpmbGV4O2FsaWduLWl0ZW1zOmNlbnRlcjtqdXN0aWZ5LWNvbnRlbnQ6c3BhY2UtYmV0d2VlbiI+JzsKICAgICAgICBoICs9ICc8ZGl2PjxzcGFuIHN0eWxlPSJmb250LXNpemU6MS4xcmVtO2ZvbnQtd2VpZ2h0OjcwMDtvcGFjaXR5Oi45O2JhY2tncm91bmQ6cmdiYSgyNTUsMjU1LDI1NSwuMik7cGFkZGluZzo0cHggMTJweDtib3JkZXItcmFkaXVzOjZweDttYXJnaW4tcmlnaHQ6MTJweCI+JytwQ29kZSsnPC9zcGFuPic7CiAgICAgICAgaCArPSAnPHNwYW4gc3R5bGU9ImZvbnQtc2l6ZToxLjFyZW07Zm9udC13ZWlnaHQ6NzAwIj4nK3RpdGxlKyc8L3NwYW4+PC9kaXY+JzsKICAgICAgICBoICs9ICc8YnV0dG9uIG9uY2xpY2s9ImRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFx4Mjdwcm9jLXJvLXBvcHVwXHgyNykucmVtb3ZlKCkiIHN0eWxlPSJiYWNrZ3JvdW5kOnJnYmEoMjU1LDI1NSwyNTUsLjIpO2JvcmRlcjpub25lO2NvbG9yOiNmZmY7d2lkdGg6MzJweDtoZWlnaHQ6MzJweDtib3JkZXItcmFkaXVzOjUwJTtjdXJzb3I6cG9pbnRlcjtmb250LXNpemU6MS4xcmVtIj4mdGltZXM7PC9idXR0b24+JzsKICAgICAgICBoICs9ICc8L2Rpdj4nOwogICAgICAgIGlmKGNhdCkgaCArPSAnPGRpdiBzdHlsZT0icGFkZGluZzoxMHB4IDIycHggMDtmb250LXNpemU6Ljc4cmVtO2NvbG9yOiM4ODgiPkNhdMOpZ29yaWUgOiA8c3Ryb25nPicrY2F0Kyc8L3N0cm9uZz48L2Rpdj4nOwogICAgICAgIGlmKCFwcm9jKSBoICs9ICc8ZGl2IHN0eWxlPSJwYWRkaW5nOjEwcHggMjJweCAwO2ZvbnQtc2l6ZTouNzhyZW07Y29sb3I6I2U2N2UyMiI+PGkgY2xhc3M9ImZhcyBmYS1pbmZvLWNpcmNsZSI+PC9pPiBBdWN1bmUgZmljaGUgcHJvY8OpZHVyZSBhc3NvY2nDqWUg4oCUIGNyw6llei1sYSBkYW5zIGxlIHNvdXMtbWVudSBQcm9jw6lkdXJlcyBhdmVjIGxlIGNvZGUgPHN0cm9uZz4nK3BDb2RlKyc8L3N0cm9uZz48L2Rpdj4nOwogICAgICAgIHZhciB6b25lcyA9IFsKICAgICAgICAgICAge2xhYmVsOidBY3Rpb25zIC8gw4l0YXBlcycsIGljb246J3Byb2MtaWNvbi1hbGVydCcsIGNvbnRlbnQ6ejJ9LAogICAgICAgICAgICB7bGFiZWw6J05vdGVzIC8gUmVtYXJxdWVzJywgaWNvbjoncHJvYy1pY29uLWlkZWEnLCBjb250ZW50OnozfQogICAgICAgIF07CiAgICAgICAgdmFyIGhhc0NvbnRlbnQgPSB6Mnx8ejM7CiAgICAgICAgaCArPSAnPGRpdiBzdHlsZT0icGFkZGluZzoxNnB4IDIycHgiPic7CiAgICAgICAgaWYoaGFzQ29udGVudCkgewogICAgICAgICAgICB6b25lcy5mb3JFYWNoKGZ1bmN0aW9uKHopewogICAgICAgICAgICAgICAgaWYoei5jb250ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgaCArPSAnPGRpdiBzdHlsZT0iYm9yZGVyLWxlZnQ6M3B4IHNvbGlkICNkZGQ7cGFkZGluZzoxMHB4IDE0cHg7bWFyZ2luOjEycHggMDtiYWNrZ3JvdW5kOiNmYWZhZmE7Ym9yZGVyLXJhZGl1czowIDhweCA4cHggMCI+JzsKICAgICAgICAgICAgICAgICAgICBoICs9ICc8aDQgc3R5bGU9ImZvbnQtc2l6ZTouNzhyZW07Zm9udC13ZWlnaHQ6NjAwO2NvbG9yOiM5OTk7bWFyZ2luOjAgMCA2cHg7dGV4dC10cmFuc2Zvcm06dXBwZXJjYXNlO2xldHRlci1zcGFjaW5nOi41cHgiPjxzcGFuIGNsYXNzPSInK3ouaWNvbisnIiBzdHlsZT0ibWFyZ2luLXJpZ2h0OjZweCI+PC9zcGFuPicrei5sYWJlbCsnPC9oND4nOwogICAgICAgICAgICAgICAgICAgIGggKz0gJzxkaXYgc3R5bGU9ImZvbnQtc2l6ZTouODVyZW07bGluZS1oZWlnaHQ6MS41O2NvbG9yOiM0NDQiPicrei5jb250ZW50Kyc8L2Rpdj4nOwogICAgICAgICAgICAgICAgICAgIGggKz0gJzwvZGl2Pic7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGggKz0gJzxkaXYgc3R5bGU9InRleHQtYWxpZ246Y2VudGVyO3BhZGRpbmc6MzBweDtjb2xvcjojYmJiIj48aSBjbGFzcz0iZmFzIGZhLWZpbGUtYWx0IiBzdHlsZT0iZm9udC1zaXplOjJyZW07ZGlzcGxheTpibG9jazttYXJnaW4tYm90dG9tOjhweCI+PC9pPkF1Y3VuIGNvbnRlbnUgcmVuc2VpZ27DqTwvZGl2Pic7CiAgICAgICAgfQogICAgICAgIGggKz0gJzwvZGl2Pic7CiAgICAgICAgaCArPSAnPGRpdiBzdHlsZT0icGFkZGluZzoxMnB4IDIycHggMThweDt0ZXh0LWFsaWduOnJpZ2h0O2JvcmRlci10b3A6MXB4IHNvbGlkICNlZWUiPic7CiAgICAgICAgaCArPSAnPGJ1dHRvbiBvbmNsaWNrPSJkb2N1bWVudC5nZXRFbGVtZW50QnlJZChceDI3cHJvYy1yby1wb3B1cFx4MjcpLnJlbW92ZSgpIiBzdHlsZT0icGFkZGluZzo4cHggMjBweDtib3JkZXI6MXB4IHNvbGlkICNkZGQ7Ym9yZGVyLXJhZGl1czo4cHg7YmFja2dyb3VuZDojZmZmO2N1cnNvcjpwb2ludGVyO21hcmdpbi1yaWdodDo4cHg7Zm9udC1zaXplOi44NXJlbSI+RmVybWVyPC9idXR0b24+JzsKICAgICAgICBpZihwSWQpIGggKz0gJzxidXR0b24gb25jbGljaz0iZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXHgyN3Byb2Mtcm8tcG9wdXBceDI3KS5yZW1vdmUoKTtzd2l0Y2hNZW51KFx4MjdtZW51MTJceDI3KTtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dmlld1Byb2MoXHgyNycrcElkKydceDI3KX0sMjAwKSIgc3R5bGU9InBhZGRpbmc6OHB4IDIwcHg7Ym9yZGVyOm5vbmU7Ym9yZGVyLXJhZGl1czo4cHg7YmFja2dyb3VuZDp2YXIoLS1oZWFkZXIsIzJjM2U1MCk7Y29sb3I6I2ZmZjtjdXJzb3I6cG9pbnRlcjtmb250LXNpemU6Ljg1cmVtIj48aSBjbGFzcz0iZmFzIGZhLWVkaXQiPjwvaT4gT3V2cmlyIGRhbnMgUHJvY8OpZHVyZXM8L2J1dHRvbj4nOwogICAgICAgIGggKz0gJzwvZGl2PjwvZGl2PjwvZGl2Pic7CiAgICAgICAgZG9jdW1lbnQuYm9keS5pbnNlcnRBZGphY2VudEhUTUwoJ2JlZm9yZWVuZCcsIGgpOwogICAgfQoKICAgIAogICAgdmFyIF9QUk9DX0NBVF9NQVAgPSBbCiAgICAgICAge3ByZWZpeDonUE8nLCBjYXQ6J1BvcnRlcyBPdXZlcnRlcyd9LAogICAgICAgIHtwcmVmaXg6J1JIJywgY2F0OidSZXNzb3VyY2VzIEh1bWFpbmVzJ30sCiAgICAgICAge3ByZWZpeDonQScsIGNhdDonQWRtaW5pc3RyYXRpZid9LAogICAgICAgIHtwcmVmaXg6J0InLCBjYXQ6J8OJbMOodmVzIEJFUCd9LAogICAgICAgIHtwcmVmaXg6J0MnLCBjYXQ6J0NvbmNlcnRhdGlvbnMnfSwKICAgICAgICB7cHJlZml4OidEJywgY2F0OidEaXNwb3NpdGlmcyBQw6lkYWdvZ2lxdWVzJ30sCiAgICAgICAge3ByZWZpeDonRScsIGNhdDonU3VpdmkgZGVzIMOpbMOodmVzJ30sCiAgICAgICAge3ByZWZpeDonSScsIGNhdDonSW50ZXJ2ZW5hbnRzJ30sCiAgICAgICAge3ByZWZpeDonTicsIGNhdDonTnVtw6lyaXF1ZSd9LAogICAgICAgIHtwcmVmaXg6J08nLCBjYXQ6J09yaWVudGF0aW9uJ30sCiAgICAgICAge3ByZWZpeDonUCcsIGNhdDonUHJvamV0cyd9LAogICAgICAgIHtwcmVmaXg6J1MnLCBjYXQ6J1PDqWN1cml0w6knfQogICAgXTsKICAgIGZ1bmN0aW9uIGF1dG9Qcm9jQ2F0KGNvZGUpIHsKICAgICAgICBpZighY29kZSkgcmV0dXJuOwogICAgICAgIHZhciBjID0gY29kZS50cmltKCkudG9VcHBlckNhc2UoKTsKICAgICAgICB2YXIgc2VsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Byb2MtY2F0Jyk7CiAgICAgICAgZm9yKHZhciBpPTA7aTxfUFJPQ19DQVRfTUFQLmxlbmd0aDtpKyspewogICAgICAgICAgICBpZihjLmluZGV4T2YoX1BST0NfQ0FUX01BUFtpXS5wcmVmaXgpPT09MCl7CiAgICAgICAgICAgICAgICAvLyBDaGVjayBpZiBvcHRpb24gZXhpc3RzCiAgICAgICAgICAgICAgICB2YXIgZm91bmQ9ZmFsc2U7CiAgICAgICAgICAgICAgICBmb3IodmFyIGo9MDtqPHNlbC5vcHRpb25zLmxlbmd0aDtqKyspe2lmKHNlbC5vcHRpb25zW2pdLnZhbHVlPT09X1BST0NfQ0FUX01BUFtpXS5jYXQpe2ZvdW5kPXRydWU7YnJlYWs7fX0KICAgICAgICAgICAgICAgIGlmKGZvdW5kKSBzZWwudmFsdWU9X1BST0NfQ0FUX01BUFtpXS5jYXQ7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9CgogICAgCiAgICAKICAgIGZ1bmN0aW9uIHByaW50R2FudHQoKXsKICAgICAgICB2YXIgc3c9cHJvbXB0KCdTZW1haW5lIGRlIGTDqWJ1dCAoZXg6IDM2KTonLCczNicpO2lmKCFzdylyZXR1cm47c3c9cGFyc2VJbnQoc3cpOwogICAgICAgIHZhciBldz1wcm9tcHQoJ1NlbWFpbmUgZGUgZmluIChleDogMjYpOicsJzI2Jyk7aWYoIWV3KXJldHVybjtldz1wYXJzZUludChldyk7CiAgICAgICAgaWYoIXN3fHwhZXcpcmV0dXJuOwogICAgICAgIC8vIEJ1aWxkIHdlZWsgbGlzdAogICAgICAgIHZhciB3ZWVrcz1bXTsKICAgICAgICBpZihzdz5ldyl7Zm9yKHZhciB3PXN3O3c8PTUzO3crKyl3ZWVrcy5wdXNoKHcpO2Zvcih2YXIgdz0xO3c8PWV3O3crKyl3ZWVrcy5wdXNoKHcpO30KICAgICAgICBlbHNle2Zvcih2YXIgdz1zdzt3PD1ldzt3Kyspd2Vla3MucHVzaCh3KTt9CiAgICAgICAgdmFyIHByb2NzPShhcHBEYXRhLnByb2NlZHVyZXN8fFtdKS5maWx0ZXIoZnVuY3Rpb24ocCl7cmV0dXJuIHAud3N0YXJ0O30pOwogICAgICAgIHByb2NzLnNvcnQoZnVuY3Rpb24oYSxiKXsKICAgICAgICAgICAgdmFyIGlhPXdlZWtzLmluZGV4T2YoYS53c3RhcnQpLGliPXdlZWtzLmluZGV4T2YoYi53c3RhcnQpOwogICAgICAgICAgICBpZihpYTwwKWlhPTk5OTtpZihpYjwwKWliPTk5OTsKICAgICAgICAgICAgaWYoaWEhPT1pYilyZXR1cm4gaWEtaWI7CiAgICAgICAgICAgIHZhciBuYT1wYXJzZUludCgoYS5jb2RlfHwnJykucmVwbGFjZSgvW14wLTldL2csJycpKXx8MDsKICAgICAgICAgICAgdmFyIG5iPXBhcnNlSW50KChiLmNvZGV8fCcnKS5yZXBsYWNlKC9bXjAtOV0vZywnJykpfHwwOwogICAgICAgICAgICByZXR1cm4gbmEtbmI7CiAgICAgICAgfSk7CiAgICAgICAgdmFyIHZ3PWdldFZXKCk7CiAgICAgICAgdmFyIG1vcz1bXSxjbT0nJzt3ZWVrcy5mb3JFYWNoKGZ1bmN0aW9uKHcpe3ZhciBtbD13a01vKHcpO2lmKG1sIT09Y20pe21vcy5wdXNoKHtuOm1sLHM6MX0pO2NtPW1sO31lbHNlIG1vc1ttb3MubGVuZ3RoLTFdLnMrKzt9KTsKICAgICAgICB2YXIgY3c9Y3VyVygpOwogICAgICAgIHZhciBoPSc8c3R5bGU+QHBhZ2V7c2l6ZTpBMyBsYW5kc2NhcGU7bWFyZ2luOjVtbX1ib2R5e2ZvbnQtZmFtaWx5OkFyaWFsLHNhbnMtc2VyaWY7bWFyZ2luOjB9dGFibGV7Ym9yZGVyLWNvbGxhcHNlOmNvbGxhcHNlO3dpZHRoOjEwMCU7Zm9udC1zaXplOi41NXJlbX10aCx0ZHtib3JkZXI6MXB4IHNvbGlkICNjY2M7cGFkZGluZzoycHggM3B4O3RleHQtYWxpZ246Y2VudGVyfXRoe2JhY2tncm91bmQ6I2Y1ZjVmNTtmb250LXdlaWdodDo2MDB9Lmd0LWN3e2JhY2tncm91bmQ6I2ZmZjNjZCFpbXBvcnRhbnR9Lmd0LXZhe2JhY2tncm91bmQ6I2Y4ZjhmOH0uYmFye3Bvc2l0aW9uOmFic29sdXRlO2luc2V0OjJweCAxcHg7Ym9yZGVyLXJhZGl1czoycHg7LXdlYmtpdC1wcmludC1jb2xvci1hZGp1c3Q6ZXhhY3Q7cHJpbnQtY29sb3ItYWRqdXN0OmV4YWN0fS5sYXt0ZXh0LWFsaWduOmxlZnQ7Zm9udC1zaXplOi42cmVtO3doaXRlLXNwYWNlOm5vd3JhcDttYXgtd2lkdGg6MjAwcHg7b3ZlcmZsb3c6aGlkZGVuO3RleHQtb3ZlcmZsb3c6ZWxsaXBzaXN9LmZ0e2Rpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXI7anVzdGlmeS1jb250ZW50OnNwYWNlLWJldHdlZW47cGFkZGluZzo0cHggMTBweDttYXJnaW4tdG9wOjhweDtmb250LXNpemU6LjZyZW07Y29sb3I6Izk5OX08L3N0eWxlPic7CiAgICAgICAgaCs9Jzx0YWJsZT48dGhlYWQ+PHRyPjx0aCByb3dzcGFuPSIyIiBzdHlsZT0ibWluLXdpZHRoOjE2MHB4O3RleHQtYWxpZ246bGVmdCI+UHJvY8OpZHVyZTwvdGg+JzsKICAgICAgICBtb3MuZm9yRWFjaChmdW5jdGlvbihtKXtoKz0nPHRoIGNvbHNwYW49IicrbS5zKyciPicrbS5uKyc8L3RoPic7fSk7CiAgICAgICAgaCs9JzwvdHI+PHRyPic7CiAgICAgICAgd2Vla3MuZm9yRWFjaChmdW5jdGlvbih3KXsKICAgICAgICAgICAgdmFyIGNscz0nJztpZih3PT09Y3cpY2xzPSdndC1jdyc7ZWxzZSBpZih2dy5pbmRleE9mKHcpPj0wKWNscz0nZ3QtdmEnOwogICAgICAgICAgICBoKz0nPHRoJysoY2xzPycgY2xhc3M9IicrY2xzKyciJzonJykrJz4nK3crJzwvdGg+JzsKICAgICAgICB9KTsKICAgICAgICBoKz0nPC90cj48L3RoZWFkPjx0Ym9keT4nOwogICAgICAgIHByb2NzLmZvckVhY2goZnVuY3Rpb24oZyl7CiAgICAgICAgICAgIHZhciBjb2w9Z2V0UHJvY0NvbG9yKGcuY29kZSk7CiAgICAgICAgICAgIGgrPSc8dHI+PHRkIGNsYXNzPSJsYSI+JytnLmNvZGUrJyAtICcrKGcudGl0bGV8fCcnKSsnPC90ZD4nOwogICAgICAgICAgICB3ZWVrcy5mb3JFYWNoKGZ1bmN0aW9uKHcpewogICAgICAgICAgICAgICAgdmFyIHZhYz12dy5pbmRleE9mKHcpPj0wLGlyPXdJblIodyxnLndzdGFydCxnLndlbmQpOwogICAgICAgICAgICAgICAgaCs9Jzx0ZCcrKHZhYz8nIGNsYXNzPSJndC12YSInOicnKSsnIHN0eWxlPSJwb3NpdGlvbjpyZWxhdGl2ZTtoZWlnaHQ6MTRweCI+JzsKICAgICAgICAgICAgICAgIGlmKGlyKWgrPSc8ZGl2IGNsYXNzPSJiYXIiIHN0eWxlPSJiYWNrZ3JvdW5kOicrY29sKyciPjwvZGl2Pic7CiAgICAgICAgICAgICAgICBoKz0nPC90ZD4nOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgaCs9JzwvdHI+JzsKICAgICAgICB9KTsKICAgICAgICBoKz0nPC90Ym9keT48L3RhYmxlPic7CiAgICAgICAgdmFyIGxvZ29TcmM9KGFwcERhdGEuc2V0dGluZ3MmJmFwcERhdGEuc2V0dGluZ3MubG9nbyl8fCcnOwogICAgICAgIHZhciB0b2RheT1uZXcgRGF0ZSgpLnRvTG9jYWxlRGF0ZVN0cmluZygnZnItRlInLHtkYXk6JzItZGlnaXQnLG1vbnRoOidsb25nJyx5ZWFyOidudW1lcmljJ30pOwogICAgICAgIGgrPSc8ZGl2IGNsYXNzPSJmdCI+JzsKICAgICAgICBpZihsb2dvU3JjKWgrPSc8aW1nIHNyYz0iJytsb2dvU3JjKyciIHN0eWxlPSJoZWlnaHQ6MWNtIj4nOwogICAgICAgIGgrPSc8c3Bhbj4nK3RvZGF5Kyc8L3NwYW4+PC9kaXY+JzsKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJpbnQtem9uZScpLmlubmVySFRNTD1oOwogICAgICAgIHdhaXRGb3JJbWFnZXNUaGVuUHJpbnQoKTsKICAgIH0KCiAgICBmdW5jdGlvbiB0b2dnbGVQcm9jRG9uZShpZCl7CiAgICAgICAgdmFyIHN5PWdldEN1cnJlbnRTY2hvb2xZZWFyKCk7CiAgICAgICAgdmFyIHAyPShhcHBEYXRhLnByb2NlZHVyZXN8fFtdKS5maW5kKGZ1bmN0aW9uKHgpe3JldHVybiB4LmlkPT09aWQ7fSk7CiAgICAgICAgaWYocDIpe3AyLmRvbmU9IXAyLmRvbmU7cDIuZG9uZVNZPXAyLmRvbmU/c3k6Jyc7c2F2ZURhdGEoKTtyZW5kZXJHYW50dCgpO3JldHVybjt9CiAgICAgICAgdmFyIGc9KGFwcERhdGEuZ2FudHR8fFtdKS5maW5kKGZ1bmN0aW9uKHgpe3JldHVybiB4LmlkPT09aWQ7fSk7CiAgICAgICAgaWYoZyl7Zy5kb25lPSFnLmRvbmU7Zy5kb25lU1k9Zy5kb25lP3N5OicnO3NhdmVEYXRhKCk7cmVuZGVyR2FudHQoKTt9CiAgICB9CgogICAgd2luZG93Lm9wZW5Qcm9jTW9kYWwgPSBvcGVuUHJvY01vZGFsOwogICAgd2luZG93LmNsb3NlUHJvY01vZGFsID0gY2xvc2VQcm9jTW9kYWw7CiAgICB3aW5kb3cuc2F2ZVByb2MgPSBzYXZlUHJvYzsKICAgIHdpbmRvdy5kZWxQcm9jID0gZGVsUHJvYzsKICAgIHdpbmRvdy5yZW5kZXJQcm9jZWR1cmVzID0gcmVuZGVyUHJvY2VkdXJlczsKICAgIHdpbmRvdy52aWV3UHJvYyA9IHZpZXdQcm9jOwogICAgd2luZG93LnByaW50UHJvYyA9IHByaW50UHJvYzsKICAgIHdpbmRvdy5wcm9jSW5zZXJ0SWNvbiA9IHByb2NJbnNlcnRJY29uOwogICAgd2luZG93LmxvYWRTZXBDb25maWcgPSBsb2FkU2VwQ29uZmlnOwogICAgd2luZG93LnNhdmVTZXBDb25maWcgPSBzYXZlU2VwQ29uZmlnOwogICAgd2luZG93LmFwcGx5U2VwYXJhdG9ycyA9IGFwcGx5U2VwYXJhdG9yczsKICAgIHdpbmRvdy52aWV3UHJvY1JlYWRvbmx5ID0gdmlld1Byb2NSZWFkb25seTsKICAgIHdpbmRvdy50b2dnbGVQcm9jRG9uZSA9IHRvZ2dsZVByb2NEb25lOwogICAgd2luZG93LnByaW50R2FudHQgPSBwcmludEdhbnR0OwogICAgCiAgICBmdW5jdGlvbiBydGVJbWdSZXNpemUoc2l6ZSl7CiAgICAgICAgdmFyIHNlbD13aW5kb3cuZ2V0U2VsZWN0aW9uKCk7aWYoIXNlbC5yYW5nZUNvdW50KXJldHVybjsKICAgICAgICB2YXIgbm9kZT1zZWwuYW5jaG9yTm9kZTsKICAgICAgICAvLyBGaW5kIG5lYXJlc3QgaW1nCiAgICAgICAgdmFyIGVsPW5vZGU7d2hpbGUoZWwmJmVsLnRhZ05hbWUhPT0nSU1HJyl7aWYoZWwuY2hpbGROb2Rlcyl7Zm9yKHZhciBpPTA7aTxlbC5jaGlsZE5vZGVzLmxlbmd0aDtpKyspe2lmKGVsLmNoaWxkTm9kZXNbaV0udGFnTmFtZT09PSdJTUcnKXtlbD1lbC5jaGlsZE5vZGVzW2ldO2JyZWFrO319fWlmKGVsLnRhZ05hbWUhPT0nSU1HJyllbD1lbC5wYXJlbnROb2RlO30KICAgICAgICBpZighZWx8fGVsLnRhZ05hbWUhPT0nSU1HJyl7CiAgICAgICAgICAgIC8vIFRyeSB0byBmaW5kIGFueSBzZWxlY3RlZCBpbWcKICAgICAgICAgICAgdmFyIGltZ3M9c2VsLmFuY2hvck5vZGUucGFyZW50Tm9kZS5xdWVyeVNlbGVjdG9yQWxsKCdpbWcnKTsKICAgICAgICAgICAgaWYoaW1ncy5sZW5ndGg9PT0xKWVsPWltZ3NbMF07CiAgICAgICAgICAgIGVsc2V7YWxlcnQoJ1PDqWxlY3Rpb25uZXogdW5lIGltYWdlIGRcJ2Fib3JkJyk7cmV0dXJuO30KICAgICAgICB9CiAgICAgICAgdmFyIHNpemVzPXsnc21hbGwnOicyNSUnLCdtZWRpdW0nOic1MCUnLCdsYXJnZSc6Jzc1JScsJ2Z1bGwnOicxMDAlJ307CiAgICAgICAgZWwuc3R5bGUud2lkdGg9c2l6ZXNbc2l6ZV18fCc1MCUnO2VsLnN0eWxlLmhlaWdodD0nYXV0byc7CiAgICB9CiAgICB3aW5kb3cucnRlSW1nUmVzaXplID0gcnRlSW1nUmVzaXplOwogICAgZnVuY3Rpb24gZXhwb3J0RGF0YSgpewogICAgICAgIHZhciBqc29uPUpTT04uc3RyaW5naWZ5KGFwcERhdGEsbnVsbCwyKTsKICAgICAgICB2YXIgYmxvYj1uZXcgQmxvYihbanNvbl0se3R5cGU6J2FwcGxpY2F0aW9uL2pzb24nfSk7CiAgICAgICAgdmFyIHVybD1VUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpOwogICAgICAgIHZhciBhPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTsKICAgICAgICB2YXIgZD1uZXcgRGF0ZSgpOwogICAgICAgIHZhciBmbmFtZT0nQ0FESVJfYmFja3VwXycrZC5nZXRGdWxsWWVhcigpKyctJytTdHJpbmcoZC5nZXRNb250aCgpKzEpLnBhZFN0YXJ0KDIsJzAnKSsnLScrU3RyaW5nKGQuZ2V0RGF0ZSgpKS5wYWRTdGFydCgyLCcwJykrJ18nK1N0cmluZyhkLmdldEhvdXJzKCkpLnBhZFN0YXJ0KDIsJzAnKSsnaCcrU3RyaW5nKGQuZ2V0TWludXRlcygpKS5wYWRTdGFydCgyLCcwJykrJy5qc29uJzsKICAgICAgICBhLmhyZWY9dXJsO2EuZG93bmxvYWQ9Zm5hbWU7YS5jbGljaygpO1VSTC5yZXZva2VPYmplY3RVUkwodXJsKTsKICAgICAgICB2YXIgZWw9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xhc3QtZXhwb3J0Jyk7CiAgICAgICAgaWYoZWwpZWwudGV4dENvbnRlbnQ9J0Rlcm5pZXIgZXhwb3J0IDogJytkLnRvTG9jYWxlU3RyaW5nKCdmci1GUicpOwogICAgICAgIGFwcERhdGEuc2V0dGluZ3MubGFzdEV4cG9ydD1kLnRvSVNPU3RyaW5nKCk7c2F2ZURhdGEoKTsKICAgIH0KICAgIGZ1bmN0aW9uIGltcG9ydERhdGEoaW5wdXQpewogICAgICAgIGlmKCFpbnB1dC5maWxlc3x8IWlucHV0LmZpbGVzWzBdKXJldHVybjsKICAgICAgICBpZighY29uZmlybSgn4pqg77iPIEltcG9ydGVyIHZhIFJFTVBMQUNFUiB0b3V0ZXMgdm9zIGRvbm7DqWVzIGFjdHVlbGxlcy5cblxuVm91bGV6LXZvdXMgY29udGludWVyID8nKSlyZXR1cm47CiAgICAgICAgdmFyIHJlYWRlcj1uZXcgRmlsZVJlYWRlcigpOwogICAgICAgIHJlYWRlci5vbmxvYWQ9ZnVuY3Rpb24oZSl7CiAgICAgICAgICAgIHRyeXsKICAgICAgICAgICAgICAgIHZhciBkYXRhPUpTT04ucGFyc2UoZS50YXJnZXQucmVzdWx0KTsKICAgICAgICAgICAgICAgIGlmKCFkYXRhLnNldHRpbmdzKXthbGVydCgnRmljaGllciBpbnZhbGlkZSA6IHBhcyBkZSBzZWN0aW9uIHNldHRpbmdzJyk7cmV0dXJuO30KICAgICAgICAgICAgICAgIC8vIE1lcmdlIGludG8gYXBwRGF0YQogICAgICAgICAgICAgICAgT2JqZWN0LmtleXMoZGF0YSkuZm9yRWFjaChmdW5jdGlvbihrKXthcHBEYXRhW2tdPWRhdGFba107fSk7CiAgICAgICAgICAgICAgICBzYXZlRGF0YSgpOwogICAgICAgICAgICAgICAgYWxlcnQoJ+KchSBJbXBvcnQgcsOpdXNzaSAhIExhIHBhZ2UgdmEgc2UgcmVjaGFyZ2VyLicpOwogICAgICAgICAgICAgICAgbG9jYXRpb24ucmVsb2FkKCk7CiAgICAgICAgICAgIH1jYXRjaChlcnIpewogICAgICAgICAgICAgICAgYWxlcnQoJ0VycmV1ciBkZSBsZWN0dXJlIDogJytlcnIubWVzc2FnZSk7CiAgICAgICAgICAgIH0KICAgICAgICB9OwogICAgICAgIHJlYWRlci5yZWFkQXNUZXh0KGlucHV0LmZpbGVzWzBdKTsKICAgICAgICBpbnB1dC52YWx1ZT0nJzsKICAgIH0KICAgIHdpbmRvdy5leHBvcnREYXRhID0gZXhwb3J0RGF0YTsKICAgIHdpbmRvdy5pbXBvcnREYXRhID0gaW1wb3J0RGF0YTsKCiAgICB2YXIgX2V2Q2xhc3Nlcz1bXTsKICAgIGZ1bmN0aW9uIGJ1aWxkQ2xhc3NTZWxlY3QoKXsKICAgICAgICB2YXIgc2VsPWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdldi1jbGFzc2UnKTtpZighc2VsKXJldHVybjsKICAgICAgICB2YXIgY2xhc3Nlcz17fTsKICAgICAgICAoYXBwRGF0YS5zdHVkZW50c3x8W10pLmZvckVhY2goZnVuY3Rpb24ocyl7dmFyIGM9cy5DbGFzc2V8fHMuY2xhc3NlO2lmKGMpY2xhc3Nlc1tjXT0xO30pOwogICAgICAgIHZhciBoPSc8b3B0aW9uIHZhbHVlPSIiPi0tIENob2lzaXIgb3Ugc2Fpc2lyIC0tPC9vcHRpb24+JzsKICAgICAgICBPYmplY3Qua2V5cyhjbGFzc2VzKS5zb3J0KCkuZm9yRWFjaChmdW5jdGlvbihjKXtoKz0nPG9wdGlvbiB2YWx1ZT0iJytjKyciPicrYysnPC9vcHRpb24+Jzt9KTsKICAgICAgICBoKz0nPG9wdGlvbiB2YWx1ZT0iX19jdXN0b20iPlx1MjcwRiBTYWlzaXIuLi48L29wdGlvbj4nOwogICAgICAgIHNlbC5pbm5lckhUTUw9aDsKICAgIH0KICAgIGZ1bmN0aW9uIGFkZEV2Q2xhc3NlKCl7CiAgICAgICAgdmFyIHNlbD1kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZXYtY2xhc3NlJyk7CiAgICAgICAgdmFyIHY9c2VsLnZhbHVlOwogICAgICAgIGlmKHY9PT0nX19jdXN0b20nKXt2PXByb21wdCgnQ2xhc3NlIDonKTtpZighdilyZXR1cm47fQogICAgICAgIGlmKCF2KXJldHVybjsKICAgICAgICBpZihfZXZDbGFzc2VzLmluZGV4T2Yodik8MClfZXZDbGFzc2VzLnB1c2godik7CiAgICAgICAgcmVuZGVyRXZDbGFzc2VzKCk7CiAgICB9CiAgICBmdW5jdGlvbiByZW1vdmVFdkNsYXNzZShjKXtfZXZDbGFzc2VzPV9ldkNsYXNzZXMuZmlsdGVyKGZ1bmN0aW9uKHgpe3JldHVybiB4IT09Yzt9KTtyZW5kZXJFdkNsYXNzZXMoKTt9CiAgICBmdW5jdGlvbiByZW5kZXJFdkNsYXNzZXMoKXsKICAgICAgICB2YXIgaD0nJztfZXZDbGFzc2VzLmZvckVhY2goZnVuY3Rpb24oYyl7CiAgICAgICAgICAgIGgrPSc8c3BhbiBzdHlsZT0iYmFja2dyb3VuZDojZTBlN2ZmO2NvbG9yOiMzNzMwYTM7cGFkZGluZzozcHggOHB4O2JvcmRlci1yYWRpdXM6MTJweDtmb250LXNpemU6Ljc1cmVtO2Rpc3BsYXk6aW5saW5lLWZsZXg7YWxpZ24taXRlbXM6Y2VudGVyO2dhcDo0cHgiPicrYysnIDxzcGFuIHN0eWxlPSJjdXJzb3I6cG9pbnRlcjtmb250LXdlaWdodDo3MDAiIG9uY2xpY2s9IndpbmRvdy5yZW1vdmVFdkNsYXNzZShcJycrYysnXCcpIj5cdTAwRDc8L3NwYW4+PC9zcGFuPic7CiAgICAgICAgfSk7CiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2V2LWNsYXNzZXMtbGlzdCcpLmlubmVySFRNTD1oOwogICAgfQogICAgd2luZG93LmFkZEV2Q2xhc3NlID0gYWRkRXZDbGFzc2U7CiAgICB3aW5kb3cucmVtb3ZlRXZDbGFzc2UgPSByZW1vdmVFdkNsYXNzZTsKICAgIHdpbmRvdy5idWlsZENsYXNzU2VsZWN0ID0gYnVpbGRDbGFzc1NlbGVjdDsKICAgIHdpbmRvdy5zYXZlRXZlbnQgPSB0eXBlb2Ygc2F2ZUV2ZW50IT09J3VuZGVmaW5lZCc/c2F2ZUV2ZW50OmZ1bmN0aW9uKCl7fTsKICAgIHdpbmRvdy5jbG9zZUV2TW9kYWwgPSB0eXBlb2YgY2xvc2VFdk1vZGFsIT09J3VuZGVmaW5lZCc/Y2xvc2VFdk1vZGFsOmZ1bmN0aW9uKCl7fTsKICAgIHdpbmRvdy5kZWxFdkZyb21Nb2RhbCA9IHR5cGVvZiBkZWxFdkZyb21Nb2RhbCE9PSd1bmRlZmluZWQnP2RlbEV2RnJvbU1vZGFsOmZ1bmN0aW9uKCl7fTsKICAgIHdpbmRvdy5vcGVuRXZNb2RhbCA9IHR5cGVvZiBvcGVuRXZNb2RhbCE9PSd1bmRlZmluZWQnP29wZW5Fdk1vZGFsOmZ1bmN0aW9uKCl7fTsKCgogICAgd2luZG93LmF1dG9Qcm9jQ2F0ID0gYXV0b1Byb2NDYXQ7CiAgICB3aW5kb3cuYXV0b1Jlc2V0RG9uZSA9IGF1dG9SZXNldERvbmU7CiAgICB3aW5kb3cuZ2V0Q3VycmVudFNjaG9vbFllYXIgPSBnZXRDdXJyZW50U2Nob29sWWVhcjsKICAgIHdpbmRvdy5zYXZlR3QgPSBzYXZlR3Q7CiAgICB3aW5kb3cub3Blbkd0TW9kYWwgPSBvcGVuR3RNb2RhbDsKICAgIHdpbmRvdy5jbG9zZUd0TW9kYWwgPSBjbG9zZUd0TW9kYWw7CiAgICB3aW5kb3cuZGVsR3RGcm9tTW9kYWwgPSBkZWxHdEZyb21Nb2RhbDsKICAgIHdpbmRvdy50b2dnbGVHdERvbmUgPSB0b2dnbGVHdERvbmU7CiAgICB3aW5kb3cucmVuZGVyR2FudHQgPSByZW5kZXJHYW50dDsKICAgIHdpbmRvdy5ndFByZXYgPSBndFByZXY7CiAgICB3aW5kb3cuZ3ROZXh0ID0gZ3ROZXh0OwogICAgd2luZG93Lmd0VG9kYXkgPSBndFRvZGF5OwogICAgd2luZG93Lmd0WWVhciA9IGd0WWVhcjsKICAgIHdpbmRvdy5maWxsVGVhY2hlclNlbCA9IGZpbGxUZWFjaGVyU2VsOwoKCiAgICAKLy8gQXV0by1yZXNldCBhdSBkw6ltYXJyYWdlCmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBmdW5jdGlvbigpewogICAgc2V0VGltZW91dChmdW5jdGlvbigpeyBpZih0eXBlb2YgYXV0b1Jlc2V0RG9uZT09PSdmdW5jdGlvbicpIGF1dG9SZXNldERvbmUoKTsgfSwgNTAwKTsKICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXsgaWYodHlwZW9mIHJlc3RvcmVGaWxlSGFuZGxlPT09J2Z1bmN0aW9uJykgcmVzdG9yZUZpbGVIYW5kbGUoKTsgfSwgMzAwKTsKfSk7CgoKICAgIAogICAgCiAgICA+",
  "exam": "PCFET0NUWVBFIGh0bWw+CjxodG1sIGxhbmc9ImZyIj4KPGhlYWQ+CiAgICA8bWV0YSBjaGFyc2V0PSJVVEYtOCI+CiAgICA8bWV0YSBuYW1lPSJ2aWV3cG9ydCIgY29udGVudD0id2lkdGg9ZGV2aWNlLXdpZHRoLCBpbml0aWFsLXNjYWxlPTEuMCI+CiAgICA8dGl0bGU+RVhBTSBQSUxPVEUgLSBPcmdhbmlzYXRpb24gZGVzIMOJcHJldXZlczwvdGl0bGU+CiAgICAKICAgIDxzY3JpcHQgc3JjPSJodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy94bHN4LzAuMTguNS94bHN4LmZ1bGwubWluLmpzIj48L3NjcmlwdD4KICAgIDxzY3JpcHQgc3JjPSJodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9mb250LWF3ZXNvbWUvNi40LjAvY3NzL2FsbC5taW4uY3NzIj48L3NjcmlwdD4KICAgIAogICAgPGxpbmsgaHJlZj0iaHR0cHM6Ly9mb250cy5nb29nbGVhcGlzLmNvbS9jc3MyP2ZhbWlseT1Sb2JvdG86d2dodEAzMDA7NDAwOzUwMDs3MDA7OTAwJmRpc3BsYXk9c3dhcCIgcmVsPSJzdHlsZXNoZWV0Ij4KCiAgICA8c3R5bGU+CiAgICAgICAgOnJvb3QgewogICAgICAgICAgICAtLXByaW1hcnktY29sb3I6ICNjMDM5MmI7IAogICAgICAgICAgICAtLXNlY29uZGFyeS1jb2xvcjogI2U3NGMzYzsKICAgICAgICAgICAgLS1hY2NlbnQtY29sb3I6ICNmMzljMTI7CiAgICAgICAgICAgIC0tYmctY29sb3I6ICNmNGY2Zjg7CiAgICAgICAgICAgIC0tdGV4dC1jb2xvcjogIzJjM2U1MDsKICAgICAgICAgICAgLS1zaWRlYmFyLXdpZHRoOiAyODBweDsKICAgICAgICAgICAgLS10b29sYmFyLWhlaWdodDogNjBweDsKICAgICAgICB9CgogICAgICAgIGJvZHkgeyBmb250LWZhbWlseTogJ1JvYm90bycsIHNhbnMtc2VyaWY7IGJhY2tncm91bmQtY29sb3I6IHZhcigtLWJnLWNvbG9yKTsgbWFyZ2luOiAwOyBwYWRkaW5nOiAwOyBkaXNwbGF5OiBmbGV4OyBoZWlnaHQ6IDEwMHZoOyBjb2xvcjogdmFyKC0tdGV4dC1jb2xvcik7IG92ZXJmbG93OiBoaWRkZW47IH0KCiAgICAgICAgLyogU0lERUJBUiAqLwogICAgICAgIC5zaWRlYmFyIHsgd2lkdGg6IHZhcigtLXNpZGViYXItd2lkdGgpOyBiYWNrZ3JvdW5kLWNvbG9yOiAjMmMzZTUwOyBjb2xvcjogd2hpdGU7IGRpc3BsYXk6IGZsZXg7IGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47IGJveC1zaGFkb3c6IDJweCAwIDVweCByZ2JhKDAsMCwwLDAuMSk7IGZsZXgtc2hyaW5rOiAwOyB6LWluZGV4OiAxMDA7IH0KICAgICAgICAuYnJhbmQgeyBwYWRkaW5nOiAxNXB4OyB0ZXh0LWFsaWduOiBjZW50ZXI7IGJhY2tncm91bmQtY29sb3I6ICMxYTI1MmY7IGJvcmRlci1ib3R0b206IDNweCBzb2xpZCB2YXIoLS1wcmltYXJ5LWNvbG9yKTsgfQogICAgICAgIC5icmFuZCBoMSB7IG1hcmdpbjogMDsgZm9udC1zaXplOiAxLjNyZW07IGZvbnQtd2VpZ2h0OiA5MDA7IGxldHRlci1zcGFjaW5nOiAxcHg7IH0KICAgICAgICAuc3RlcHMtbmF2IHsgZmxleDogMTsgcGFkZGluZzogNXB4IDA7IG92ZXJmbG93LXk6IGF1dG87IH0KICAgICAgICAuc3RlcC1idG4geyBkaXNwbGF5OiBmbGV4OyBhbGlnbi1pdGVtczogY2VudGVyOyBwYWRkaW5nOiAxMHB4IDE1cHg7IGNvbG9yOiAjZWNmMGYxOyB0ZXh0LWRlY29yYXRpb246IG5vbmU7IHRyYW5zaXRpb246IGFsbCAwLjJzOyBib3JkZXItbGVmdDogNHB4IHNvbGlkIHRyYW5zcGFyZW50OyBjdXJzb3I6IHBvaW50ZXI7IGZvbnQtc2l6ZTogMC44NXJlbTsgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkIHJnYmEoMjU1LDI1NSwyNTUsMC4wMyk7IH0KICAgICAgICAuc3RlcC1idG46aG92ZXIsIC5zdGVwLWJ0bi5hY3RpdmUgeyBiYWNrZ3JvdW5kLWNvbG9yOiAjMzQ0OTVlOyBib3JkZXItbGVmdC1jb2xvcjogdmFyKC0tcHJpbWFyeS1jb2xvcik7IHBhZGRpbmctbGVmdDogMjBweDsgfQogICAgICAgIC5zdGVwLWJ0biBpIHsgbWFyZ2luLXJpZ2h0OiAxMnB4OyB3aWR0aDogMThweDsgdGV4dC1hbGlnbjogY2VudGVyOyBjb2xvcjogI2JkYzNjNzsgfQogICAgICAgIC5zdGVwLWJ0bi5hY3RpdmUgaSB7IGNvbG9yOiB2YXIoLS1wcmltYXJ5LWNvbG9yKTsgfQogICAgICAgIC5mb290ZXItaW5mbyB7IHBhZGRpbmc6IDEwcHg7IGZvbnQtc2l6ZTogMC42NXJlbTsgdGV4dC1hbGlnbjogY2VudGVyOyBvcGFjaXR5OiAwLjU7IGJhY2tncm91bmQ6ICMxYTI1MmY7IGJvcmRlci10b3A6IDFweCBzb2xpZCAjMzQ0OTVlOyB9CgogICAgICAgIC8qIE1BSU4gKi8KICAgICAgICAubWFpbi13cmFwcGVyIHsgZmxleDogMTsgZGlzcGxheTogZmxleDsgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsgb3ZlcmZsb3c6IGhpZGRlbjsgfQogICAgICAgIC5nbG9iYWwtdG9vbGJhciB7IGhlaWdodDogdmFyKC0tdG9vbGJhci1oZWlnaHQpOyBiYWNrZ3JvdW5kOiB3aGl0ZTsgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICNkZGQ7IGRpc3BsYXk6IGZsZXg7IGFsaWduLWl0ZW1zOiBjZW50ZXI7IGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjsgcGFkZGluZzogMCAzMHB4OyBib3gtc2hhZG93OiAwIDJweCA1cHggcmdiYSgwLDAsMCwwLjA1KTsgei1pbmRleDogNTA7IH0KICAgICAgICAudG9vbGJhci10aXRsZSB7IGZvbnQtd2VpZ2h0OiBib2xkOyBmb250LXNpemU6IDEuMXJlbTsgY29sb3I6ICM3ZjhjOGQ7IGRpc3BsYXk6IGZsZXg7IGFsaWduLWl0ZW1zOiBjZW50ZXI7IGdhcDogMTBweDsgfQogICAgICAgIC50b29sYmFyLWFjdGlvbnMgeyBkaXNwbGF5OiBmbGV4OyBnYXA6IDEwcHg7IH0KICAgICAgICAuYnRuLXRvb2xiYXIgeyBwYWRkaW5nOiA4cHggMTVweDsgYm9yZGVyOiBub25lOyBib3JkZXItcmFkaXVzOiA0cHg7IGN1cnNvcjogcG9pbnRlcjsgZm9udC1zaXplOiAwLjlyZW07IGZvbnQtd2VpZ2h0OiA1MDA7IGRpc3BsYXk6IGZsZXg7IGFsaWduLWl0ZW1zOiBjZW50ZXI7IGdhcDogOHB4OyB0cmFuc2l0aW9uOiAwLjJzOyB9CiAgICAgICAgLmJ0bi1zYXZlLXByb2plY3QgeyBiYWNrZ3JvdW5kLWNvbG9yOiAjMjdhZTYwOyBjb2xvcjogd2hpdGU7IH0gCiAgICAgICAgLmJ0bi1sb2FkLXByb2plY3QgeyBiYWNrZ3JvdW5kLWNvbG9yOiAjMzQ0OTVlOyBjb2xvcjogd2hpdGU7IH0KICAgICAgICAubWFpbi1jb250ZW50IHsgZmxleDogMTsgb3ZlcmZsb3cteTogYXV0bzsgcGFkZGluZzogMjBweDsgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tYmctY29sb3IpOyB9CgogICAgICAgIC8qIFVJIEVMRU1FTlRTICovCiAgICAgICAgLmhlYWRlci1wYW5lbCB7IGRpc3BsYXk6IGZsZXg7IGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjsgYWxpZ24taXRlbXM6IGNlbnRlcjsgbWFyZ2luLWJvdHRvbTogMTVweDsgYm9yZGVyLWJvdHRvbTogMnB4IHNvbGlkICNlMGUwZTA7IHBhZGRpbmctYm90dG9tOiAxMHB4OyB9CiAgICAgICAgLmhlYWRlci1wYW5lbCBoMiB7IG1hcmdpbjogMDsgZm9udC1zaXplOiAxLjZyZW07IGNvbG9yOiB2YXIoLS1wcmltYXJ5LWNvbG9yKTsgfQogICAgICAgIC5zZWN0aW9uLXZpZXcgeyBkaXNwbGF5OiBub25lOyBhbmltYXRpb246IGZhZGVJbiAwLjNzIGVhc2U7IH0KICAgICAgICAuc2VjdGlvbi12aWV3LmFjdGl2ZSB7IGRpc3BsYXk6IGJsb2NrOyB9CiAgICAgICAgLmNhcmQgeyBiYWNrZ3JvdW5kOiB3aGl0ZTsgYm9yZGVyLXJhZGl1czogOHB4OyBwYWRkaW5nOiAyMHB4OyBib3gtc2hhZG93OiAwIDJweCAxMHB4IHJnYmEoMCwwLDAsMC4wNSk7IG1hcmdpbi1ib3R0b206IDIwcHg7IH0KCiAgICAgICAgLyogSU1QT1JUICovCiAgICAgICAgLmltcG9ydC1ncmlkIHsgZGlzcGxheTogZ3JpZDsgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiByZXBlYXQoMiwgMWZyKTsgZ2FwOiAyMHB4OyB9CiAgICAgICAgLmZpbGUtZHJvcC16b25lIHsgYm9yZGVyOiAycHggZGFzaGVkICNiZGMzYzc7IGJvcmRlci1yYWRpdXM6IDhweDsgcGFkZGluZzogMjBweDsgdGV4dC1hbGlnbjogY2VudGVyOyB0cmFuc2l0aW9uOiAwLjNzOyBwb3NpdGlvbjogcmVsYXRpdmU7IGJhY2tncm91bmQ6ICNmZmY7IG1pbi1oZWlnaHQ6IDEyMHB4OyBkaXNwbGF5OiBmbGV4OyBmbGV4LWRpcmVjdGlvbjogY29sdW1uOyBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsgYWxpZ24taXRlbXM6IGNlbnRlcjsgfQogICAgICAgIC5maWxlLWRyb3Atem9uZTpob3ZlciB7IGJvcmRlci1jb2xvcjogdmFyKC0tcHJpbWFyeS1jb2xvcik7IGJhY2tncm91bmQ6ICNmZGYyZjI7IH0KICAgICAgICAuZmlsZS1kcm9wLXpvbmUubG9hZGVkIHsgYm9yZGVyLWNvbG9yOiAjMjdhZTYwOyBiYWNrZ3JvdW5kOiAjZjBmZmY0OyB9CiAgICAgICAgLmZpbGUtZHJvcC16b25lIGlucHV0W3R5cGU9ZmlsZV0geyBwb3NpdGlvbjogYWJzb2x1dGU7IHRvcDogMDsgbGVmdDogMDsgd2lkdGg6IDEwMCU7IGhlaWdodDogMTAwJTsgb3BhY2l0eTogMDsgY3Vyc29yOiBwb2ludGVyOyB9CiAgICAgICAgLnN0YXR1cy1iYWRnZSB7IGRpc3BsYXk6IG5vbmU7IG1hcmdpbi10b3A6IDEwcHg7IGZvbnQtd2VpZ2h0OiBib2xkOyBmb250LXNpemU6IDAuOXJlbTsgcGFkZGluZzogNXB4IDEwcHg7IGJvcmRlci1yYWRpdXM6IDE1cHg7IH0KICAgICAgICAuc3RhdHVzLW9rIHsgYmFja2dyb3VuZDogIzI3YWU2MDsgY29sb3I6IHdoaXRlOyB9CgogICAgICAgIC8qIENPTkZJRyAqLwogICAgICAgIC5jb25maWctY29udGFpbmVyIHsgZGlzcGxheTogZmxleDsgZ2FwOiA0MHB4OyB9CiAgICAgICAgLmNvbmZpZy1jb2wgeyBmbGV4OiAxOyBiYWNrZ3JvdW5kOiB3aGl0ZTsgcGFkZGluZzogMzBweDsgYm9yZGVyLXJhZGl1czogOHB4OyBib3gtc2hhZG93OiAwIDJweCAxMHB4IHJnYmEoMCwwLDAsMC4wNSk7IH0KICAgICAgICAuZm9ybS1ncm91cCB7IG1hcmdpbi1ib3R0b206IDIwcHg7IH0KICAgICAgICAuZm9ybS1ncm91cCBsYWJlbCB7IGRpc3BsYXk6IGJsb2NrOyBtYXJnaW4tYm90dG9tOiA4cHg7IGZvbnQtd2VpZ2h0OiBib2xkOyBjb2xvcjogIzM0NDk1ZTsgZm9udC1zaXplOiAxLjFyZW07IH0KICAgICAgICAuZm9ybS1ncm91cCBpbnB1dCB7IHdpZHRoOiAxMDAlOyBwYWRkaW5nOiAxMnB4OyBib3JkZXI6IDFweCBzb2xpZCAjZGRkOyBib3JkZXItcmFkaXVzOiA1cHg7IGZvbnQtc2l6ZTogMXJlbTsgYm94LXNpemluZzogYm9yZGVyLWJveDsgfQogICAgICAgIC5wcmV2aWV3LWJveCB7IHdpZHRoOiAxMDAlOyBoZWlnaHQ6IDE1MHB4OyBib3JkZXI6IDJweCBzb2xpZCAjZWVlOyBkaXNwbGF5OiBmbGV4OyBhbGlnbi1pdGVtczogY2VudGVyOyBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsgbWFyZ2luLXRvcDogMTBweDsgYmFja2dyb3VuZDogI2ZhZmFmYTsgfQogICAgICAgIC5wcmV2aWV3LWJveCBpbWcgeyBtYXgtaGVpZ2h0OiAxMDAlOyBtYXgtd2lkdGg6IDEwMCU7IH0KCiAgICAgICAgLyogUkVQQVJUSVRJT04gKi8KICAgICAgICAuZXhhbS1uYXZpZ2F0aW9uLWJhciB7IGJhY2tncm91bmQ6ICNmZmY7IHBhZGRpbmc6IDE1cHg7IGJvcmRlci1yYWRpdXM6IDhweDsgYm94LXNoYWRvdzogMCAycHggNXB4IHJnYmEoMCwwLDAsMC4wNSk7IGRpc3BsYXk6IGZsZXg7IGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjsgYWxpZ24taXRlbXM6IGNlbnRlcjsgbWFyZ2luLWJvdHRvbTogMjBweDsgYm9yZGVyOiAxcHggc29saWQgI2RkZDsgfQogICAgICAgIC5uYXYtYnRuIHsgYmFja2dyb3VuZDogIzJjM2U1MDsgY29sb3I6IHdoaXRlOyBib3JkZXI6IG5vbmU7IHBhZGRpbmc6IDEwcHggMjBweDsgYm9yZGVyLXJhZGl1czogNXB4OyBjdXJzb3I6IHBvaW50ZXI7IGZvbnQtd2VpZ2h0OiBib2xkOyBkaXNwbGF5OiBmbGV4OyBhbGlnbi1pdGVtczogY2VudGVyOyBnYXA6IDEwcHg7IH0KICAgICAgICAuZXhhbS1zZWxlY3RvciB7IHBhZGRpbmc6IDEwcHg7IGZvbnQtc2l6ZTogMXJlbTsgYm9yZGVyOiAxcHggc29saWQgI2NjYzsgYm9yZGVyLXJhZGl1czogNXB4OyBtaW4td2lkdGg6IDMwMHB4OyB9CiAgICAgICAgCiAgICAgICAgLmV4YW0tc2VjdGlvbi1ibG9jayB7IGJvcmRlcjogMXB4IHNvbGlkICNjY2M7IGJhY2tncm91bmQ6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDhweDsgcGFkZGluZzogMTVweDsgYm94LXNoYWRvdzogMCA0cHggMTBweCByZ2JhKDAsMCwwLDAuMDUpOyB9CiAgICAgICAgLmV4YW0tc2VjdGlvbi1oZWFkZXIgeyBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1wcmltYXJ5LWNvbG9yKTsgY29sb3I6IHdoaXRlOyBwYWRkaW5nOiAxNXB4OyBib3JkZXItcmFkaXVzOiA2cHg7IG1hcmdpbi1ib3R0b206IDE1cHg7IGRpc3BsYXk6IGZsZXg7IGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjsgZm9udC1zaXplOiAxLjJyZW07IGZvbnQtd2VpZ2h0OiBib2xkOyB9CiAgICAgICAgLnN0b3JhZ2Utem9uZSB7IGJhY2tncm91bmQ6ICNlY2YwZjE7IGJvcmRlcjogM3B4IGRhc2hlZCAjYmRjM2M3OyBwYWRkaW5nOiAxMHB4OyBib3JkZXItcmFkaXVzOiA4cHg7IG1pbi1oZWlnaHQ6IDgwcHg7IG1heC1oZWlnaHQ6IDIwMHB4OyBvdmVyZmxvdy15OiBhdXRvOyBkaXNwbGF5OiBmbGV4OyBmbGV4LXdyYXA6IHdyYXA7IGdhcDogMTBweDsgYWxpZ24tY29udGVudDogZmxleC1zdGFydDsgbWFyZ2luLWJvdHRvbTogMjBweDsgfQogICAgICAgIC5yb29tcy1ncmlkIHsgZGlzcGxheTogZ3JpZDsgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiByZXBlYXQoYXV0by1maWxsLCBtaW5tYXgoMzIwcHgsIDFmcikpOyBnYXA6IDI1cHg7IH0KICAgICAgICAucm9vbS1jYXJkIHsgYmFja2dyb3VuZDogd2hpdGU7IGJvcmRlcjogMXB4IHNvbGlkICNkZGQ7IGJvcmRlci1yYWRpdXM6IDhweDsgZGlzcGxheTogZmxleDsgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsgaGVpZ2h0OiA0ODBweDsgYm94LXNoYWRvdzogMCA0cHggNnB4IHJnYmEoMCwwLDAsMC4wNSk7IH0KICAgICAgICAucm9vbS1jYXJkLnJvb20tdHQgeyBib3JkZXI6IDRweCBzb2xpZCB2YXIoLS1hY2NlbnQtY29sb3IpOyBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmY2Y1OyB9CiAgICAgICAgLnJvb20taGVhZGVyIHsgcGFkZGluZzogMTJweDsgYmFja2dyb3VuZDogIzJjM2U1MDsgY29sb3I6IHdoaXRlOyBib3JkZXItcmFkaXVzOiA2cHggNnB4IDAgMDsgZm9udC13ZWlnaHQ6IGJvbGQ7IGRpc3BsYXk6IGZsZXg7IGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjsgYWxpZ24taXRlbXM6IGNlbnRlcjsgZm9udC1zaXplOiAxcmVtOyB9CiAgICAgICAgLnJvb20tdHQgLnJvb20taGVhZGVyIHsgYmFja2dyb3VuZDogdmFyKC0tYWNjZW50LWNvbG9yKTsgY29sb3I6ICMyYzNlNTA7IH0KICAgICAgICAKICAgICAgICAvKiBTVVJWRUlMTEFOVFMgQUpVU1RFTUVOVFMgKi8KICAgICAgICAucm9vbS1zdXJ2ZWlsbGFudHMtYXJlYSB7IHBhZGRpbmc6IDEwcHg7IGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjZWVlOyBiYWNrZ3JvdW5kOiAjZjhmOWZhOyBtYXgtaGVpZ2h0OiAxMjBweDsgb3ZlcmZsb3cteTogYXV0bzsgfQogICAgICAgIC5zdXJ2ZWlsbGFudC1yb3cgeyBkaXNwbGF5OiBmbGV4OyBnYXA6IDVweDsgbWFyZ2luLWJvdHRvbTogNXB4OyBhbGlnbi1pdGVtczogY2VudGVyOyB9CiAgICAgICAgLnN1cnZlaWxsYW50LXJvdyBzZWxlY3QgeyBmbGV4OiAxOyBwYWRkaW5nOiA1cHg7IGJvcmRlcjogMXB4IHNvbGlkICNjY2M7IGJvcmRlci1yYWRpdXM6IDRweDsgZm9udC1zaXplOiAwLjg1cmVtOyBtYXgtd2lkdGg6IDU1JTsgfQogICAgICAgIC5zdXJ2ZWlsbGFudC1yb3cgaW5wdXQudGltZS1pbnB1dCB7IGZsZXg6IDE7IHBhZGRpbmc6IDVweDsgYm9yZGVyOiAxcHggc29saWQgI2NjYzsgYm9yZGVyLXJhZGl1czogNHB4OyBmb250LXNpemU6IDAuOHJlbTsgd2lkdGg6IDgwcHg7IHRleHQtYWxpZ246IGNlbnRlcjsgfQogICAgICAgIC5idG4tZGVsLXN1cnYgeyBiYWNrZ3JvdW5kOiAjZTc0YzNjOyBjb2xvcjogd2hpdGU7IGJvcmRlcjpub25lOyBib3JkZXItcmFkaXVzOjRweDsgY3Vyc29yOnBvaW50ZXI7IHBhZGRpbmc6IDVweCA4cHg7IGZvbnQtc2l6ZTowLjdyZW07fQoKICAgICAgICAuYnRuLWFkZC1zdXJ2IHsgYmFja2dyb3VuZDogIzI3YWU2MDsgY29sb3I6IHdoaXRlOyBib3JkZXI6IG5vbmU7IGJvcmRlci1yYWRpdXM6IDAgMCA0cHggNHB4OyBjdXJzb3I6IHBvaW50ZXI7IHdpZHRoOiAxMDAlOyBwYWRkaW5nOiA2cHg7IGZvbnQtc2l6ZTogMC44cmVtOyB9CiAgICAgICAgLnJvb20tYm9keSB7IGZsZXg6IDE7IHBhZGRpbmc6IDEwcHg7IG92ZXJmbG93LXk6IGF1dG87IGJhY2tncm91bmQtY29sb3I6ICNmZmY7IH0KICAgICAgICAuc3R1ZGVudC1pdGVtIHsgYmFja2dyb3VuZDogd2hpdGU7IGJvcmRlcjogMXB4IHNvbGlkICNlMGUwZTA7IHBhZGRpbmc6IDZweCAxMHB4OyBtYXJnaW4tYm90dG9tOiA1cHg7IGJvcmRlci1yYWRpdXM6IDRweDsgY3Vyc29yOiBncmFiOyBmb250LXNpemU6IDAuOHJlbTsgZGlzcGxheTogZmxleDsganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOyBhbGlnbi1pdGVtczogY2VudGVyOyBib3gtc2hhZG93OiAwIDFweCAycHggcmdiYSgwLDAsMCwwLjAzKTsgfQogICAgICAgIC5zdHVkZW50LWl0ZW0uaXMtdHQgeyBib3JkZXItbGVmdDogNXB4IHNvbGlkIHZhcigtLWFjY2VudC1jb2xvcik7IGJhY2tncm91bmQ6ICNmZmZjZjA7IGZvbnQtd2VpZ2h0OmJvbGQ7IH0KCiAgICAgICAgLyogQ09NTU9OICovCiAgICAgICAgLmNvbnRyb2xzLWJhciB7IGRpc3BsYXk6IGZsZXg7IGdhcDogMTVweDsgbWFyZ2luLWJvdHRvbTogMjBweDsgYWxpZ24taXRlbXM6IGNlbnRlcjsgYmFja2dyb3VuZDogd2hpdGU7IHBhZGRpbmc6IDE1cHg7IGJvcmRlci1yYWRpdXM6IDhweDsgYm94LXNoYWRvdzogMCAycHggNXB4IHJnYmEoMCwwLDAsMC4wNSk7IGZsZXgtd3JhcDogd3JhcDt9CiAgICAgICAgLmFjdGlvbi1idG4geyBwYWRkaW5nOiAxMHB4IDE1cHg7IGJvcmRlcjogbm9uZTsgYm9yZGVyLXJhZGl1czogNXB4OyBjdXJzb3I6IHBvaW50ZXI7IGZvbnQtd2VpZ2h0OiBib2xkOyBjb2xvcjogd2hpdGU7IGRpc3BsYXk6IGZsZXg7IGFsaWduLWl0ZW1zOiBjZW50ZXI7IGdhcDogOHB4OyB9CiAgICAgICAgLmJ0bi1jYWxjIHsgYmFja2dyb3VuZDogdmFyKC0tYWNjZW50LWNvbG9yKTsgY29sb3I6ICMzMzM7IH0KICAgICAgICAuYnRuLXByaW50IHsgYmFja2dyb3VuZDogIzJjM2U1MDsgfQogICAgICAgIC5sYXlvdXQtc2V0dGluZ3MgeyBiYWNrZ3JvdW5kOiAjZjFmMmY2OyBib3JkZXI6IDFweCBzb2xpZCAjY2NjOyBwYWRkaW5nOiAxMHB4OyBib3JkZXItcmFkaXVzOiA1cHg7IGRpc3BsYXk6IGZsZXg7IGdhcDogMTVweDsgYWxpZ24taXRlbXM6IGNlbnRlcjsgZm9udC1zaXplOiAwLjg1cmVtOyBtYXJnaW4tdG9wOiAxMHB4OyB3aWR0aDogMTAwJTsgfQogICAgICAgIC5sYXlvdXQtc2V0dGluZ3MgaW5wdXQgeyB3aWR0aDogNjBweDsgcGFkZGluZzogM3B4OyBib3JkZXI6IDFweCBzb2xpZCAjY2NjOyBib3JkZXItcmFkaXVzOiAzcHg7IH0KICAgICAgICAuZGF0YS10YWJsZSB7IHdpZHRoOiAxMDAlOyBib3JkZXItY29sbGFwc2U6IGNvbGxhcHNlOyBtYXJnaW4tdG9wOiAxNXB4OyBmb250LXNpemU6IDAuOXJlbTsgYmFja2dyb3VuZDogd2hpdGU7IH0KICAgICAgICAuZGF0YS10YWJsZSB0aCB7IGJhY2tncm91bmQ6ICMyYzNlNTA7IGNvbG9yOiB3aGl0ZTsgcGFkZGluZzogMTJweDsgdGV4dC1hbGlnbjogbGVmdDsgfQogICAgICAgIC5kYXRhLXRhYmxlIHRkIHsgcGFkZGluZzogMTBweDsgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICNlZWU7IH0KICAgICAgICAuYW5vbnltLWJhZGdlIHsgYmFja2dyb3VuZDogIzJjM2U1MDsgY29sb3I6IHdoaXRlOyBwYWRkaW5nOiAzcHggOHB4OyBib3JkZXItcmFkaXVzOiAxMHB4OyBmb250LWZhbWlseTogbW9ub3NwYWNlOyBmb250LXNpemU6IDFyZW07IH0KCiAgICAgICAgLyogUEFQRVIgLSBQcmV2aWV3IE9ubHkgKi8KICAgICAgICAucGFwZXItc2hlZXQgeyBiYWNrZ3JvdW5kOiB3aGl0ZTsgd2lkdGg6IDIxMG1tOyBtaW4taGVpZ2h0OiAyOTdtbTsgcGFkZGluZzogMjBtbTsgYm94LXNoYWRvdzogMCAwIDEwcHggcmdiYSgwLDAsMCwwLjMpOyBib3gtc2l6aW5nOiBib3JkZXItYm94OyBwb3NpdGlvbjogcmVsYXRpdmU7IGZvbnQtZmFtaWx5OiAnVGltZXMgTmV3IFJvbWFuJywgVGltZXMsIHNlcmlmOyBjb2xvcjogIzAwMDsgZGlzcGxheTpmbGV4OyBmbGV4LWRpcmVjdGlvbjpjb2x1bW47IGp1c3RpZnktY29udGVudDogY2VudGVyOyB9IAogICAgICAgIC5jb252b2MtaGVhZGVyLXJvdyB7IGRpc3BsYXk6IGZsZXg7IGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjsgbWFyZ2luLWJvdHRvbTogMzBweDsgfQogICAgICAgIC5jb252b2MtYWRkcmVzcyB7IHdpZHRoOiA1MCU7IGZvbnQtc2l6ZTogMXJlbTsgfQogICAgICAgIC5jb252b2MtYWRkcmVzcyB0ZXh0YXJlYSB7IHdpZHRoOiAxMDAlOyBoZWlnaHQ6IDgwcHg7IGJvcmRlcjogMXB4IGRhc2hlZCAjY2NjOyBmb250LWZhbWlseTogaW5oZXJpdDsgZm9udC1zaXplOiBpbmhlcml0OyByZXNpemU6IG5vbmU7IH0KICAgICAgICAuY29udm9jLWxvZ28geyBtYXgtd2lkdGg6IDE1MHB4OyBtYXgtaGVpZ2h0OiA4MHB4OyB9CiAgICAgICAgLmNvbnZvYy10aXRsZSB7IHRleHQtYWxpZ246IGNlbnRlcjsgZm9udC13ZWlnaHQ6IGJvbGQ7IGZvbnQtc2l6ZTogMS40cmVtOyB0ZXh0LWRlY29yYXRpb246IHVuZGVybGluZTsgbWFyZ2luOiAzMHB4IDA7IH0KICAgICAgICAuY29udm9jLXN0dWRlbnQtaW5mbyB7IG1hcmdpbi1ib3R0b206IDIwcHg7IGZvbnQtc2l6ZTogMS4xcmVtOyBsaW5lLWhlaWdodDogMS42OyB9CiAgICAgICAgLmNvbnZvYy1ib2R5IHsgbWFyZ2luLWJvdHRvbTogMjBweDsgfQogICAgICAgIC5lZGl0YWJsZS10ZXh0IHsgYm9yZGVyOiAxcHggZGFzaGVkICNjY2M7IHBhZGRpbmc6IDVweDsgbWluLWhlaWdodDogMjBweDsgd2hpdGUtc3BhY2U6IHByZS13cmFwOyB9CiAgICAgICAgLmNvbnZvYy10YWJsZSB7IHdpZHRoOiAxMDAlOyBib3JkZXItY29sbGFwc2U6IGNvbGxhcHNlOyBtYXJnaW4tYm90dG9tOiAzMHB4OyB9CiAgICAgICAgLmNvbnZvYy10YWJsZSB0aCwgLmNvbnZvYy10YWJsZSB0ZCB7IGJvcmRlcjogMXB4IHNvbGlkICMwMDA7IHBhZGRpbmc6IDhweDsgdGV4dC1hbGlnbjogY2VudGVyOyB9CiAgICAgICAgLmNvbnZvYy1mb290ZXIgeyBkaXNwbGF5OiBmbGV4OyBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47IGFsaWduLWl0ZW1zOiBmbGV4LWVuZDsgbWFyZ2luLXRvcDogMzBweDsgfQogICAgICAgIAogICAgICAgIEBrZXlmcmFtZXMgZmFkZUluIHsgZnJvbSB7IG9wYWNpdHk6IDA7IHRyYW5zZm9ybTogdHJhbnNsYXRlWSgxMHB4KTsgfSB0byB7IG9wYWNpdHk6IDE7IHRyYW5zZm9ybTogdHJhbnNsYXRlWSgwKTsgfSB9CgogICAgICAgIC8qIFBSSU5UICovCiAgICAgICAgQG1lZGlhIHByaW50IHsKICAgICAgICAgICAgLnNpZGViYXIsIC5nbG9iYWwtdG9vbGJhciwgLm5vLXByaW50LCAubWFpbi13cmFwcGVyLCAuc2VjdGlvbi12aWV3IHsgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50OyB9CiAgICAgICAgICAgIGJvZHkgPiAqOm5vdCgjcHJpbnQtYXJlYSkgeyBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7IH0KICAgICAgICAgICAgYm9keSwgaHRtbCB7IG1hcmdpbjogMDsgcGFkZGluZzogMDsgd2lkdGg6IDEwMCU7IGhlaWdodDogMTAwJTsgYmFja2dyb3VuZDogd2hpdGU7IGRpc3BsYXk6IGJsb2NrOyBvdmVyZmxvdzogdmlzaWJsZTsgfQogICAgICAgICAgICAjcHJpbnQtYXJlYSB7IGRpc3BsYXk6IGJsb2NrICFpbXBvcnRhbnQ7IHBvc2l0aW9uOiBhYnNvbHV0ZTsgdG9wOiAwOyBsZWZ0OiAwOyB3aWR0aDogMTAwJTsgei1pbmRleDogOTk5OTsgYmFja2dyb3VuZDogd2hpdGU7IH0KICAgICAgICAgICAgQHBhZ2UgeyBzaXplOiBBNCBwb3J0cmFpdDsgbWFyZ2luOiAwOyB9CiAgICAgICAgICAgIAogICAgICAgICAgICAucHJpbnQtcGFnZS1jb252b2MgeyAKICAgICAgICAgICAgICAgIHdpZHRoOiAyMTBtbTsgaGVpZ2h0OiAyOTdtbTsgcGFkZGluZzogMTVtbTsgYm94LXNpemluZzogYm9yZGVyLWJveDsgcGFnZS1icmVhay1hZnRlcjogYWx3YXlzOyAKICAgICAgICAgICAgICAgIGZvbnQtZmFtaWx5OiAnVGltZXMgTmV3IFJvbWFuJywgVGltZXMsIHNlcmlmOyBiYWNrZ3JvdW5kOiB3aGl0ZTsgCiAgICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4OyBmbGV4LWRpcmVjdGlvbjogY29sdW1uOyBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsKICAgICAgICAgICAgfQogICAgICAgICAgICAucHJpbnQtcGFnZS1jb252b2M6bGFzdC1jaGlsZCB7IHBhZ2UtYnJlYWstYWZ0ZXI6IGF1dG87IH0KCiAgICAgICAgICAgIC5wcmludC1wYWdlLWxpc3QgeyAKICAgICAgICAgICAgICAgIHdpZHRoOiAyMTBtbTsgbWluLWhlaWdodDogMjk3bW07IHBhZGRpbmc6IDE1bW07IGJveC1zaXppbmc6IGJvcmRlci1ib3g7IHBhZ2UtYnJlYWstYWZ0ZXI6IGFsd2F5czsgCiAgICAgICAgICAgICAgICBmb250LWZhbWlseTogJ1RpbWVzIE5ldyBSb21hbicsIFRpbWVzLCBzZXJpZjsgYmFja2dyb3VuZDogd2hpdGU7IAogICAgICAgICAgICAgICAgZGlzcGxheTogYmxvY2s7IAogICAgICAgICAgICB9CiAgICAgICAgICAgIAogICAgICAgICAgICAucHJpbnQtZmxvdyB7CiAgICAgICAgICAgICAgICB3aWR0aDogMjEwbW07IHBhZGRpbmc6IDE1bW07IGJveC1zaXppbmc6IGJvcmRlci1ib3g7CiAgICAgICAgICAgICAgICBmb250LWZhbWlseTogJ1RpbWVzIE5ldyBSb21hbicsIFRpbWVzLCBzZXJpZjsgYmFja2dyb3VuZDogd2hpdGU7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgCiAgICAgICAgICAgIC5wcmludC1oZWFkZXIgeyBkaXNwbGF5OiBmbGV4OyBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47IGFsaWduLWl0ZW1zOiBjZW50ZXI7IGJvcmRlci1ib3R0b206IDJweCBzb2xpZCAjMDAwOyBwYWRkaW5nLWJvdHRvbTogMTBweDsgbWFyZ2luLWJvdHRvbTogMjBweDsgfQogICAgICAgICAgICAucHJpbnQtbG9nbyB7IG1heC1oZWlnaHQ6IDgwcHg7IG1heC13aWR0aDogMTUwcHg7IH0KICAgICAgICAgICAgLnByaW50LWRvYy10aXRsZSB7IGZvbnQtc2l6ZTogMS41cmVtOyBmb250LXdlaWdodDogYm9sZDsgdGV4dC1hbGlnbjogY2VudGVyOyBtYXJnaW46IDIwcHggMDsgdGV4dC10cmFuc2Zvcm06IHVwcGVyY2FzZTsgYm9yZGVyOiAycHggc29saWQgIzAwMDsgcGFkZGluZzogMTBweDsgfQogICAgICAgICAgICAucHJpbnQtaW5mb3MtYm94IHsgYm9yZGVyOiAxcHggc29saWQgIzAwMDsgcGFkZGluZzogMTBweDsgbWFyZ2luLWJvdHRvbTogMTVweDsgYmFja2dyb3VuZDogI2Y5ZjlmOTsgcGFnZS1icmVhay1pbnNpZGU6IGF2b2lkOyB9CiAgICAgICAgICAgIC5wcmludC10YWJsZSB7IHdpZHRoOiAxMDAlOyBib3JkZXItY29sbGFwc2U6IGNvbGxhcHNlOyBtYXJnaW4tdG9wOiAxMHB4OyBmb250LXNpemU6IDAuOXJlbTsgcGFnZS1icmVhay1pbnNpZGU6IGF1dG87IH0KICAgICAgICAgICAgLnByaW50LXRhYmxlIHRoLCAucHJpbnQtdGFibGUgdGQgeyBib3JkZXI6IDFweCBzb2xpZCAjMDAwOyBwYWRkaW5nOiA2cHg7IHRleHQtYWxpZ246IGNlbnRlcjsgfQogICAgICAgICAgICAucHJpbnQtdGFibGUgdGggeyBiYWNrZ3JvdW5kLWNvbG9yOiAjZWVlOyB9CiAgICAgICAgICAgIC5wcmludC10YWJsZSB0ciB7IHBhZ2UtYnJlYWstaW5zaWRlOiBhdm9pZDsgcGFnZS1icmVhay1hZnRlcjogYXV0bzsgfQogICAgICAgICAgICAKICAgICAgICAgICAgLmxhYmVsLXNoZWV0IHsgCiAgICAgICAgICAgICAgICBkaXNwbGF5OiBncmlkOyAKICAgICAgICAgICAgICAgIGdyaWQtdGVtcGxhdGUtY29sdW1uczogMWZyIDFmcjsgCiAgICAgICAgICAgICAgICBncmlkLXRlbXBsYXRlLXJvd3M6IHJlcGVhdCg3LCAxZnIpOyAKICAgICAgICAgICAgICAgIHdpZHRoOiAyMTBtbTsgaGVpZ2h0OiAyOTdtbTsgCiAgICAgICAgICAgICAgICBwYWRkaW5nOiAxNW1tIDVtbTsKICAgICAgICAgICAgICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7IAogICAgICAgICAgICAgICAgcGFnZS1icmVhay1hZnRlcjogYWx3YXlzOyAKICAgICAgICAgICAgICAgIGdhcDogMDsgCiAgICAgICAgICAgIH0KICAgICAgICAgICAgLmxhYmVsLWNhcmQgeyAKICAgICAgICAgICAgICAgIHBhZGRpbmc6IDVweCAxNXB4OyAKICAgICAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7IAogICAgICAgICAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsgCiAgICAgICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsgCiAgICAgICAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyOyAKICAgICAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjsgCiAgICAgICAgICAgICAgICBib3gtc2l6aW5nOiBib3JkZXItYm94OyAKICAgICAgICAgICAgICAgIG92ZXJmbG93OiBoaWRkZW47CiAgICAgICAgICAgIH0KICAgICAgICAgICAgLmxhYmVsLWxvZ28geyBtYXgtaGVpZ2h0OiAzNXB4OyBtYXJnaW4tYm90dG9tOiA1cHg7IH0KICAgICAgICAgICAgLmxhYmVsLW5hbWUgeyBmb250LXdlaWdodDogYm9sZDsgZm9udC1zaXplOiAxLjFyZW07IG1hcmdpbi1ib3R0b206IDJweDsgfQogICAgICAgICAgICAubGFiZWwtY2xhc3MgeyBmb250LXN0eWxlOiBpdGFsaWM7IGZvbnQtc2l6ZTogMC45cmVtOyBtYXJnaW4tYm90dG9tOiA1cHg7IH0KICAgICAgICAgICAgLmxhYmVsLWFub255bSB7IGZvbnQtc2l6ZTogMS4zcmVtOyBmb250LXdlaWdodDogOTAwOyBib3JkZXI6IDJweCBzb2xpZCAjMDAwOyBwYWRkaW5nOiAzcHggOHB4OyBib3JkZXItcmFkaXVzOiA1cHg7IH0KCiAgICAgICAgICAgIC5wdi1zaWduYXR1cmVzIHsgZGlzcGxheTogZmxleDsganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOyBtYXJnaW4tdG9wOiAzMHB4OyBoZWlnaHQ6IDEwMHB4OyBwYWdlLWJyZWFrLWluc2lkZTogYXZvaWQ7IH0KICAgICAgICAgICAgLnB2LWJveCB7IGJvcmRlcjogMXB4IHNvbGlkICMwMDA7IHdpZHRoOiA0NSU7IHBhZGRpbmc6IDVweDsgZm9udC1zaXplOiAwLjhyZW07IH0KICAgICAgICAgICAgCiAgICAgICAgICAgIC5kaXNwbGF5LWxpc3Qtcm93IHRkIHsgcGFkZGluZzogOHB4OyBmb250LXNpemU6IDEuMXJlbTsgfQogICAgICAgIH0KICAgIDwvc3R5bGU+CjwvaGVhZD4KPGJvZHk+CiAgICA8ZGl2IGNsYXNzPSJzaWRlYmFyIj4KICAgICAgICA8ZGl2IGNsYXNzPSJicmFuZCI+PGgxPkVYQU0gUElMT1RFPC9oMT48c3Bhbj5ieSBTeWx2w6hyZSBNaWNoZWxldDwvc3Bhbj48L2Rpdj4KICAgICAgICA8bmF2IGNsYXNzPSJzdGVwcy1uYXYiPgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJzdGVwLWJ0biBhY3RpdmUiIG9uY2xpY2s9InN3aXRjaFRhYih0aGlzLCAndmlldzEnKSI+PGkgY2xhc3M9ImZhLXNvbGlkIGZhLXNsaWRlcnMiPjwvaT4gMS4gUGFyYW3DqXRyYWdlPC9kaXY+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9InN0ZXAtYnRuIiBvbmNsaWNrPSJzd2l0Y2hUYWIodGhpcywgJ3ZpZXcyJykiPjxpIGNsYXNzPSJmYS1zb2xpZCBmYS1maWxlLWltcG9ydCI+PC9pPiAyLiBJbXBvcnQgZG9ubsOpZXM8L2Rpdj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0ic3RlcC1idG4iIG9uY2xpY2s9InN3aXRjaFRhYih0aGlzLCAndmlldzMnKSI+PGkgY2xhc3M9ImZhLXNvbGlkIGZhLXVzZXJzLXZpZXdmaW5kZXIiPjwvaT4gMy4gUsOpcGFydGl0aW9uPC9kaXY+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9InN0ZXAtYnRuIiBvbmNsaWNrPSJzd2l0Y2hUYWIodGhpcywgJ3ZpZXc0JykiPjxpIGNsYXNzPSJmYS1zb2xpZCBmYS1lbnZlbG9wZS1vcGVuLXRleHQiPjwvaT4gNC4gQ29udm9jYXRpb25zIMOJbMOodmVzPC9kaXY+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9InN0ZXAtYnRuIiBvbmNsaWNrPSJzd2l0Y2hUYWIodGhpcywgJ3ZpZXc1JykiPjxpIGNsYXNzPSJmYS1zb2xpZCBmYS1pZC1iYWRnZSI+PC9pPiA1LiBDb252b2NhdGlvbnMgU3VydmVpbGxhbnRzPC9kaXY+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9InN0ZXAtYnRuIiBvbmNsaWNrPSJzd2l0Y2hUYWIodGhpcywgJ3ZpZXc2JykiPjxpIGNsYXNzPSJmYS1zb2xpZCBmYS1jbGlwYm9hcmQtbGlzdCI+PC9pPiA2LiDDiW1hcmdlbWVudHMgZXQgQWZmaWNoYWdlPC9kaXY+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9InN0ZXAtYnRuIiBvbmNsaWNrPSJzd2l0Y2hUYWIodGhpcywgJ3ZpZXc3JykiPjxpIGNsYXNzPSJmYS1zb2xpZCBmYS1maWxlLXNpZ25hdHVyZSI+PC9pPiA3LiBQcm9jw6hzIFZlcmJhbCBldCBQb2NoZXR0ZXM8L2Rpdj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0ic3RlcC1idG4iIG9uY2xpY2s9InN3aXRjaFRhYih0aGlzLCAndmlldzgnKSI+PGkgY2xhc3M9ImZhLXNvbGlkIGZhLWJhcmNvZGUiPjwvaT4gOC4gQW5vbnltYXQgZXQgw6l0aXF1ZXR0ZXM8L2Rpdj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0ic3RlcC1idG4iIG9uY2xpY2s9InN3aXRjaFRhYih0aGlzLCAndmlldzknKSI+PGkgY2xhc3M9ImZhLXNvbGlkIGZhLXRhYmxlLWxpc3QiPjwvaT4gOS4gVGFibGVhdSBSw6ljYXBpdHVsYXRpZjwvZGl2PgogICAgICAgIDwvbmF2PgogICAgICAgIDxkaXYgY2xhc3M9ImZvb3Rlci1pbmZvIj7CqSAyMDI0LTIwMjUgRURVIFBJTE9URSBTeXN0ZW0uPC9kaXY+CiAgICA8L2Rpdj4KIAogICAgPGRpdiBjbGFzcz0ibWFpbi13cmFwcGVyIj4KICAgICAgICA8ZGl2IGNsYXNzPSJnbG9iYWwtdG9vbGJhciBuby1wcmludCI+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9InRvb2xiYXItdGl0bGUiPjxpIGNsYXNzPSJmYS1zb2xpZCBmYS1mb2xkZXItdHJlZSI+PC9pPiBHZXN0aW9uIGR1IFByb2pldDwvZGl2PgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJ0b29sYmFyLWFjdGlvbnMiPgogICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0iZmlsZSIgaWQ9ImxvYWRQcm9qZWN0SW5wdXQiIHN0eWxlPSJkaXNwbGF5Om5vbmU7IiBhY2NlcHQ9Ii5qc29uIiBvbmNoYW5nZT0ibG9hZFByb2plY3QodGhpcykiPgogICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJidG4tdG9vbGJhciBidG4tbG9hZC1wcm9qZWN0IiBvbmNsaWNrPSJkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbG9hZFByb2plY3RJbnB1dCcpLmNsaWNrKCkiPjxpIGNsYXNzPSJmYS1zb2xpZCBmYS11cGxvYWQiPjwvaT4gT3V2cmlyPC9idXR0b24+CiAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImJ0bi10b29sYmFyIGJ0bi1zYXZlLXByb2plY3QiIG9uY2xpY2s9InNhdmVQcm9qZWN0KCkiPjxpIGNsYXNzPSJmYS1zb2xpZCBmYS1kb3dubG9hZCI+PC9pPiBTYXV2ZWdhcmRlcjwvYnV0dG9uPgogICAgICAgICAgIDwvZGl2PgogICAgICAgIDwvZGl2PgogCiAgICAgICAgPGRpdiBjbGFzcz0ibWFpbi1jb250ZW50Ij4KICAgICAgICAgICAgPGRpdiBpZD0idmlldzEiIGNsYXNzPSJzZWN0aW9uLXZpZXcgYWN0aXZlIj4KICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iaGVhZGVyLXBhbmVsIj48aDI+PGkgY2xhc3M9ImZhLXNvbGlkIGZhLXNsaWRlcnMiPjwvaT4gMS4gUGFyYW3DqXRyYWdlPC9oMj48L2Rpdj4KICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iY29uZmlnLWNvbnRhaW5lciI+CiAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJjb25maWctY29sIj4KICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWdyb3VwIj48bGFiZWw+Tm9tPC9sYWJlbD48aW5wdXQgdHlwZT0idGV4dCIgaWQ9ImNvbmZpZ05hbWUiIHBsYWNlaG9sZGVyPSJWb3RyZSBub20iIG9uY2hhbmdlPSJBcHBTdGF0ZS5jb25maWcubmFtZT10aGlzLnZhbHVlIj48L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWdyb3VwIj48bGFiZWw+Rm9uY3Rpb248L2xhYmVsPjxpbnB1dCB0eXBlPSJ0ZXh0IiBpZD0iY29uZmlnUm9sZSIgcGxhY2Vob2xkZXI9IlZvdHJlIGZvbmN0aW9uIiBvbmNoYW5nZT0iQXBwU3RhdGUuY29uZmlnLnJvbGU9dGhpcy52YWx1ZSI+PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1ncm91cCI+PGxhYmVsPkludGl0dWzDqSBkZSBsJ2V4YW1lbjwvbGFiZWw+PGlucHV0IHR5cGU9InRleHQiIGlkPSJjb25maWdFeGFtVGl0bGUiIHBsYWNlaG9sZGVyPSJFeDogQkFDIEJMQU5DIDIwMjUiIG9uY2hhbmdlPSJBcHBTdGF0ZS5jb25maWcuZXhhbVRpdGxlPXRoaXMudmFsdWUiPjwvZGl2PgogICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJjb25maWctY29sIj4KICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWdyb3VwIj48bGFiZWw+TG9nbyDDiXRhYmxpc3NlbWVudDwvbGFiZWw+PGlucHV0IHR5cGU9ImZpbGUiIGFjY2VwdD0iaW1hZ2UvKiIgb25jaGFuZ2U9ImhhbmRsZUltYWdlKHRoaXMsICdsb2dvUHJldmlldycpIj48ZGl2IGNsYXNzPSJwcmV2aWV3LWJveCI+PGltZyBpZD0ibG9nb1ByZXZpZXciIGFsdD0iQXBlcsOndSIgc3R5bGU9ImRpc3BsYXk6bm9uZTsiPjwvZGl2PjwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAiPjxsYWJlbD5TaWduYXR1cmU8L2xhYmVsPjxpbnB1dCB0eXBlPSJmaWxlIiBhY2NlcHQ9ImltYWdlLyoiIG9uY2hhbmdlPSJoYW5kbGVJbWFnZSh0aGlzLCAnc2lnblByZXZpZXcnKSI+PGRpdiBjbGFzcz0icHJldmlldy1ib3giPjxpbWcgaWQ9InNpZ25QcmV2aWV3IiBhbHQ9IkFwZXLDp3UiIHN0eWxlPSJkaXNwbGF5Om5vbmU7Ij48L2Rpdj48L2Rpdj4KICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIAogICAgICAgICAgICA8ZGl2IGlkPSJ2aWV3MiIgY2xhc3M9InNlY3Rpb24tdmlldyI+CiAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImhlYWRlci1wYW5lbCI+PGgyPjxpIGNsYXNzPSJmYS1zb2xpZCBmYS1maWxlLWltcG9ydCI+PC9pPiAyLiBJbXBvcnQgZGVzIGRvbm7DqWVzPC9oMj48L2Rpdj4KICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iaW1wb3J0LWdyaWQiPgogICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZmlsZS1kcm9wLXpvbmUiIGlkPSJ6b25lLWVsZXZlcyI+PGgzPkEuIEJhc2Ugw4lsw6h2ZXM8L2gzPjxwIHN0eWxlPSJmb250LXNpemU6MC44cmVtOyBjb2xvcjojNjY2OyI+Tm9tLCBQcsOpbm9tLCBDbGFzc2UsIFRUPC9wPjxzcGFuIHN0eWxlPSJmb250LXNpemU6MC43cmVtOyBjb2xvcjojOTk5OyI+KEVuIGF0dGVudGUpPC9zcGFuPjxpbnB1dCB0eXBlPSJmaWxlIiBhY2NlcHQ9Ii54bHN4LCAueGxzLCAuY3N2IiBvbmNoYW5nZT0iaGFuZGxlRmlsZSh0aGlzLCAnRUxFVkVTJykiPjxkaXYgaWQ9InN0YXR1cy1lbGV2ZXMiIGNsYXNzPSJzdGF0dXMtYmFkZ2UiPkZpY2hpZXIgbWFucXVhbnQ8L2Rpdj48L2Rpdj4KICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZpbGUtZHJvcC16b25lIiBpZD0iem9uZS1lcHJldXZlcyI+PGgzPkIuIFBsYW5uaW5nIMOJcHJldXZlczwvaDM+PHAgc3R5bGU9ImZvbnQtc2l6ZTowLjhyZW07IGNvbG9yOiM2NjY7Ij5NYXRpw6hyZSwgRGF0ZSwgSGV1cmUsIER1csOpZTwvcD48c3BhbiBzdHlsZT0iZm9udC1zaXplOjAuN3JlbTsgY29sb3I6Izk5OTsiPihFbiBhdHRlbnRlKTwvc3Bhbj48aW5wdXQgdHlwZT0iZmlsZSIgYWNjZXB0PSIueGxzeCwgLnhscywgLmNzdiIgb25jaGFuZ2U9ImhhbmRsZUZpbGUodGhpcywgJ0VQUkVVVkVTJykiPjxkaXYgaWQ9InN0YXR1cy1lcHJldXZlcyIgY2xhc3M9InN0YXR1cy1iYWRnZSI+RmljaGllciBtYW5xdWFudDwvZGl2PjwvZGl2PgogICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZmlsZS1kcm9wLXpvbmUiIGlkPSJ6b25lLXJlc3NvdXJjZXMiPjxoMz5DLiBTYWxsZXM8L2gzPjxwIHN0eWxlPSJmb250LXNpemU6MC44cmVtOyBjb2xvcjojNjY2OyI+U2FsbGUsIENhcGFjaXTDqSwgVHlwZSAoVFQpPC9wPjxzcGFuIHN0eWxlPSJmb250LXNpemU6MC43cmVtOyBjb2xvcjojOTk5OyI+KEVuIGF0dGVudGUpPC9zcGFuPjxpbnB1dCB0eXBlPSJmaWxlIiBhY2NlcHQ9Ii54bHN4LCAueGxzLCAuY3N2IiBvbmNoYW5nZT0iaGFuZGxlRmlsZSh0aGlzLCAnUkVTU09VUkNFUycpIj48ZGl2IGlkPSJzdGF0dXMtcmVzc291cmNlcyIgY2xhc3M9InN0YXR1cy1iYWRnZSI+RmljaGllciBtYW5xdWFudDwvZGl2PjwvZGl2PgogICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZmlsZS1kcm9wLXpvbmUiIGlkPSJ6b25lLXN1cnZlaWxsYW50cyI+PGgzPkQuIFN1cnZlaWxsYW50czwvaDM+PHAgc3R5bGU9ImZvbnQtc2l6ZTowLjhyZW07IGNvbG9yOiM2NjY7Ij5Ob20sIFByw6lub208L3A+PHNwYW4gc3R5bGU9ImZvbnQtc2l6ZTowLjdyZW07IGNvbG9yOiM5OTk7Ij4oRW4gYXR0ZW50ZSk8L3NwYW4+PGlucHV0IHR5cGU9ImZpbGUiIGFjY2VwdD0iLnhsc3gsIC54bHMsIC5jc3YiIG9uY2hhbmdlPSJoYW5kbGVGaWxlKHRoaXMsICdTVVJWRUlMTEFOVFMnKSI+PGRpdiBpZD0ic3RhdHVzLXN1cnZlaWxsYW50cyIgY2xhc3M9InN0YXR1cy1iYWRnZSI+RmljaGllciBtYW5xdWFudDwvZGl2PjwvZGl2PgogICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPC9kaXY+CiAKICAgICAgICAgICAgPGRpdiBpZD0idmlldzMiIGNsYXNzPSJzZWN0aW9uLXZpZXciPgogICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJoZWFkZXItcGFuZWwiPjxoMj48aSBjbGFzcz0iZmEtc29saWQgZmEtdXNlcnMtdmlld2ZpbmRlciI+PC9pPiAzLiBSw6lwYXJ0aXRpb24gw6lsw6h2ZXMgZXQgc3VydmVpbGxhbnRzPC9oMj48L2Rpdj4KICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iY29udHJvbHMtYmFyIj4KICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9ImZvbnQtc2l6ZTowLjlyZW07IGNvbG9yOiM1NTU7IG1hcmdpbi1yaWdodDphdXRvOyI+SW1wb3J0ZXogbGVzIGZpY2hpZXJzIMOgIGwnw6l0YXBlIDIsIHB1aXMgbGFuY2V6IGxlIGNhbGN1bC48L2Rpdj4KICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iZGlzcGxheTpmbGV4OyBmbGV4LWRpcmVjdGlvbjpjb2x1bW47IGdhcDo1cHg7IG1hcmdpbi1yaWdodDoxNXB4OyB0ZXh0LWFsaWduOnJpZ2h0OyI+CiAgICAgICAgICAgICAgICAgICAgICAgPGRpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIHN0eWxlPSJmb250LXNpemU6MC44NXJlbTsgZm9udC13ZWlnaHQ6Ym9sZDsiPlRyaSA6PC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNlbGVjdCBpZD0iZGlzdHJpYi1tZXRob2QiIHN0eWxlPSJwYWRkaW5nOjRweDsgYm9yZGVyLXJhZGl1czo0cHg7IGZvbnQtc2l6ZTowLjg1cmVtOyI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJBTFBIQSI+T3JkcmUgQWxwaGFiw6l0aXF1ZTwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iQ0xBU1MiPlBhciBDbGFzc2UgKFN0cmljdCk8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zZWxlY3Q+CiAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgPGRpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIHN0eWxlPSJmb250LXNpemU6MC44NXJlbTsgZm9udC13ZWlnaHQ6Ym9sZDsiPlBvcnTDqWUgOjwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzZWxlY3QgaWQ9ImRpc3RyaWItc2NvcGUiIHN0eWxlPSJwYWRkaW5nOjRweDsgYm9yZGVyLXJhZGl1czo0cHg7IGZvbnQtc2l6ZTowLjg1cmVtOyI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJBTEwiPlRvdXRlcyBsZXMgw6lwcmV1dmVzPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJDVVJSRU5UIj7DiXByZXV2ZSBhY3R1ZWxsZTwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgICAgICAgICA8L3NlbGVjdD4KICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgICAgICAgICAgIDxidXR0b24gb25jbGljaz0ibGF1bmNoRGlzdHJpYnV0aW9uKCkiIHN0eWxlPSJwYWRkaW5nOjEwcHggMjBweDsgYmFja2dyb3VuZDogdmFyKC0tcHJpbWFyeS1jb2xvcik7IGNvbG9yOndoaXRlOyBib3JkZXI6bm9uZTsgYm9yZGVyLXJhZGl1czo1cHg7IGN1cnNvcjpwb2ludGVyOyI+PGkgY2xhc3M9ImZhLXNvbGlkIGZhLXdhbmQtbWFnaWMtc3BhcmtsZXMiPjwvaT4gQ2FsY3VsZXI8L2J1dHRvbj4KICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgIDxkaXYgaWQ9ImV4YW0tbmF2aWdhdGlvbiIgY2xhc3M9ImV4YW0tbmF2aWdhdGlvbi1iYXIiIHN0eWxlPSJkaXNwbGF5Om5vbmU7Ij4KICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9Im5hdi1idG4iIG9uY2xpY2s9InByZXZFeGFtKCkiPjxpIGNsYXNzPSJmYS1zb2xpZCBmYS1jaGV2cm9uLWxlZnQiPjwvaT4gUHLDqWPDqWRlbnQ8L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgIDxkaXY+PHN0cm9uZz7DiXByZXV2ZSBhY3R1ZWxsZSA6IDwvc3Ryb25nPjxzZWxlY3QgaWQ9ImV4YW0tZHJvcGRvd24iIGNsYXNzPSJleGFtLXNlbGVjdG9yIiBvbmNoYW5nZT0ianVtcFRvRXhhbSh0aGlzLnZhbHVlKSI+PC9zZWxlY3Q+PC9kaXY+CiAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJuYXYtYnRuIiBvbmNsaWNrPSJuZXh0RXhhbSgpIj5TdWl2YW50IDxpIGNsYXNzPSJmYS1zb2xpZCBmYS1jaGV2cm9uLXJpZ2h0Ij48L2k+PC9idXR0b24+CiAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICA8ZGl2IGlkPSJjdXJyZW50LWV4YW0tY29udGFpbmVyIj48ZGl2IGNsYXNzPSJjYXJkIiBzdHlsZT0idGV4dC1hbGlnbjpjZW50ZXI7IGNvbG9yOiM3ZjhjOGQ7Ij5WZXVpbGxleiBpbXBvcnRlciBsZXMgZG9ubsOpZXMgcHVpcyBjbGlxdWVyIHN1ciBDYWxjdWxlci48L2Rpdj48L2Rpdj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIAogICAgICAgICAgICA8ZGl2IGlkPSJ2aWV3NCIgY2xhc3M9InNlY3Rpb24tdmlldyI+CiAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImhlYWRlci1wYW5lbCI+PGgyPjxpIGNsYXNzPSJmYS1zb2xpZCBmYS1lbnZlbG9wZS1vcGVuLXRleHQiPjwvaT4gNC4gQ29udm9jYXRpb25zIMOJbMOodmVzPC9oMj48L2Rpdj4KICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iY29udHJvbHMtYmFyIj4KICAgICAgICAgICAgICAgICAgIDxsYWJlbD5GaWx0cmVyIHBhciBjbGFzc2UgOjwvbGFiZWw+PHNlbGVjdCBpZD0iY29udm9jLWNsYXNzLWZpbHRlciIgc3R5bGU9InBhZGRpbmc6OHB4OyBib3JkZXItcmFkaXVzOjVweDsgbWFyZ2luLWxlZnQ6MTBweDsiPjxvcHRpb24gdmFsdWU9IkFMTCI+VG91dGVzIGxlcyBjbGFzc2VzPC9vcHRpb24+PC9zZWxlY3Q+CiAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJhY3Rpb24tYnRuIGJ0bi1wcmludCIgb25jbGljaz0icHJpbnRDb252b2NhdGlvbnMoKSIgc3R5bGU9Im1hcmdpbi1sZWZ0OmF1dG87Ij48aSBjbGFzcz0iZmEtc29saWQgZmEtcHJpbnQiPjwvaT4gSW1wcmltZXI8L2J1dHRvbj4KICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImxheW91dC1zZXR0aW5ncyI+CiAgICAgICAgICAgICAgICAgICA8c3Bhbj48aSBjbGFzcz0iZmEtc29saWQgZmEtcnVsZXItY29tYmluZWQiPjwvaT4gTWlzZSBlbiBwYWdlIDo8L3NwYW4+CiAgICAgICAgICAgICAgICAgICA8bGFiZWw+SGF1dCA8aW5wdXQgdHlwZT0ibnVtYmVyIiBpZD0ic2V0cy1zdGQtdG9wIiB2YWx1ZT0iMjAiIG9uY2hhbmdlPSJhcHBseUxheW91dCgnc3RkJykiPjwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICA8bGFiZWw+QmFzIDxpbnB1dCB0eXBlPSJudW1iZXIiIGlkPSJzZXRzLXN0ZC1ib3QiIHZhbHVlPSIyMCIgb25jaGFuZ2U9ImFwcGx5TGF5b3V0KCdzdGQnKSI+PC9sYWJlbD4KICAgICAgICAgICAgICAgICAgIDxsYWJlbD5Qb2xpY2UgPGlucHV0IHR5cGU9Im51bWJlciIgaWQ9InNldHMtc3RkLWZvbnQiIHZhbHVlPSIxNiIgb25jaGFuZ2U9ImFwcGx5TGF5b3V0KCdzdGQnKSI+PC9sYWJlbD4KICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9ImRpc3BsYXk6ZmxleDsganVzdGlmeS1jb250ZW50OmNlbnRlcjsgYmFja2dyb3VuZDojY2NjOyBwYWRkaW5nOjIwcHg7IG92ZXJmbG93LXk6YXV0bzsgaGVpZ2h0OmNhbGMoMTAwdmggLSAzMDBweCk7Ij4KICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InBhcGVyLXNoZWV0IiBpZD0iY29udm9jLXRlbXBsYXRlIj4KICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJjb252b2MtaGVhZGVyLXJvdyI+PGRpdiBjbGFzcz0iY29udm9jLWFkZHJlc3MiPjx0ZXh0YXJlYSBpZD0idHh0LWFkZHJlc3MiIHBsYWNlaG9sZGVyPSJOb20gZGUgbCfDqXRhYmxpc3NlbWVudC4uLiI+PC90ZXh0YXJlYT48L2Rpdj48ZGl2IGNsYXNzPSJjb252b2MtbG9nby16b25lIj48aW1nIGlkPSJjb252b2MtbG9nby1pbWciIGNsYXNzPSJjb252b2MtbG9nbyIgYWx0PSJMb2dvIj48L2Rpdj48L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJjb252b2MtdGl0bGUiPkNPTlZPQ0FUSU9OIDxzcGFuIGlkPSJ0eHQtdGl0bGUtZGlzcGxheSIgY29udGVudGVkaXRhYmxlPSJ0cnVlIiBzdHlsZT0iYm9yZGVyOiAxcHggZGFzaGVkICNjY2M7IHBhZGRpbmc6IDJweDsiPkFVWCDDiVBSRVVWRVMgQkxBTkNIRVM8L3NwYW4+PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iY29udm9jLXN0dWRlbnQtaW5mbyI+PHN0cm9uZz5Ob20gZXQgUHLDqW5vbSA6PC9zdHJvbmc+IFtOb20gUHLDqW5vbV08YnI+PHN0cm9uZz5DbGFzc2UgOjwvc3Ryb25nPiBbQ2xhc3NlXTwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImNvbnZvYy1ib2R5IGVkaXRhYmxlLXRleHQiIGlkPSJ0eHQtYm9keSIgY29udGVudGVkaXRhYmxlPSJ0cnVlIj5NYWRhbWUsIE1vbnNpZXVyLDxicj5EYW5zIGxlIGNhZHJlIGRlIGxhIHByw6lwYXJhdGlvbiBhdXggZXhhbWVucywgdm90cmUgZW5mYW50IGVzdCBjb252b3F1w6koZSkgYXV4IMOpcHJldXZlcyBibGFuY2hlcyBzZWxvbiBsZSBwbGFubmluZyBzdWl2YW50IDo8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICA8dGFibGUgY2xhc3M9ImNvbnZvYy10YWJsZSI+PHRoZWFkPjx0cj48dGg+w4lwcmV1dmU8L3RoPjx0aD5EYXRlPC90aD48dGg+SG9yYWlyZSBkw6lidXQ8L3RoPjx0aD5EdXLDqWU8L3RoPjx0aD5TYWxsZTwvdGg+PC90cj48L3RoZWFkPjx0Ym9keT48dHI+PHRkIGNvbHNwYW49IjUiPihUYWJsZWF1IGljaSk8L3RkPjwvdHI+PC90Ym9keT48L3RhYmxlPgogICAgICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9ImZvbnQtd2VpZ2h0OmJvbGQ7IG1hcmdpbi1ib3R0b206NXB4OyI+UsOoZ2xlbWVudCBldCBjb25zaWduZXMgOjwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImNvbnZvYy1ydWxlcyBlZGl0YWJsZS10ZXh0IiBpZD0idHh0LXJ1bGVzIiBjb250ZW50ZWRpdGFibGU9InRydWUiIHN0eWxlPSJmb250LXNpemU6MC45cmVtOyI+LSBMZXMgw6lsw6h2ZXMgZG9pdmVudCBzZSBwcsOpc2VudGVyIDMwIG1pbnV0ZXMgYXZhbnQgbGUgZMOpYnV0IGRlIGNoYXF1ZSDDqXByZXV2ZS48YnI+LSBMZXMgdMOpbMOpcGhvbmVzIHBvcnRhYmxlcyBzb250IHN0cmljdGVtZW50IGludGVyZGl0cy4gVG91dCBjb21tZSBsZXMgbW9udHJlcyBjb25uZWN0w6llcy48YnI+LSBQacOoY2UgZCdpZGVudGl0w6kgb2JsaWdhdG9pcmUuPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iY29udm9jLWZvb3RlciIgc3R5bGU9Imp1c3RpZnktY29udGVudDogZmxleC1lbmQ7Ij48ZGl2IGNsYXNzPSJjb252b2Mtc2lnbiIgc3R5bGU9InRleHQtYWxpZ246cmlnaHQ7Ij48ZGl2PkZhaXQgw6AgPHNwYW4gaWQ9InR4dC1jaXR5IiBjb250ZW50ZWRpdGFibGU9InRydWUiIHN0eWxlPSJib3JkZXItYm90dG9tOjFweCBkb3R0ZWQgIzAwMDsiPlZpbGxlPC9zcGFuPiwgbGUgPHNwYW4gaWQ9ImN1cnJlbnQtZGF0ZSI+PC9zcGFuPjwvZGl2PjxkaXYgc3R5bGU9Im1hcmdpbi10b3A6MTVweDsgZm9udC13ZWlnaHQ6Ym9sZDsiIGlkPSJjb252b2Mtc2lnbi1uYW1lIj48L2Rpdj48ZGl2IHN0eWxlPSJmb250LXN0eWxlOml0YWxpYzsiIGlkPSJjb252b2Mtc2lnbi1yb2xlIj48L2Rpdj48aW1nIGlkPSJjb252b2Mtc2lnbi1pbWciIHN0eWxlPSJtYXgtaGVpZ2h0OjYwcHg7IG1hcmdpbi10b3A6MTBweDsiPjwvZGl2PjwvZGl2PgogICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8L2Rpdj4KCiAgICAgICAgICAgIDxkaXYgaWQ9InZpZXc1IiBjbGFzcz0ic2VjdGlvbi12aWV3Ij4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImhlYWRlci1wYW5lbCI+PGgyPjxpIGNsYXNzPSJmYS1zb2xpZCBmYS1pZC1iYWRnZSI+PC9pPiA1LiBDb252b2NhdGlvbnMgU3VydmVpbGxhbnRzPC9oMj48L2Rpdj4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImNvbnRyb2xzLWJhciI+CiAgICAgICAgICAgICAgICAgICAgPGxhYmVsPkltcHJpbWVyIHBvdXIgOjwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgPHNlbGVjdCBpZD0iY29udm9jLXN1cnYtZmlsdGVyIiBzdHlsZT0icGFkZGluZzo4cHg7IGJvcmRlci1yYWRpdXM6NXB4OyBtYXJnaW4tbGVmdDoxMHB4OyI+PG9wdGlvbiB2YWx1ZT0iQUxMIj5Ub3VzIGxlcyBzdXJ2ZWlsbGFudHM8L29wdGlvbj48L3NlbGVjdD4KICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJhY3Rpb24tYnRuIGJ0bi1wcmludCIgb25jbGljaz0icHJpbnRTdXJ2ZWlsbGFudENvbnZvY2F0aW9ucygpIiBzdHlsZT0ibWFyZ2luLWxlZnQ6YXV0bzsiPjxpIGNsYXNzPSJmYS1zb2xpZCBmYS1wcmludCI+PC9pPiBJbXByaW1lcjwvYnV0dG9uPgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJsYXlvdXQtc2V0dGluZ3MiPgogICAgICAgICAgICAgICAgICAgIDxsYWJlbD5IYXV0IDxpbnB1dCB0eXBlPSJudW1iZXIiIGlkPSJzZXRzLXN1cnYtdG9wIiB2YWx1ZT0iMjAiIG9uY2hhbmdlPSJhcHBseUxheW91dCgnc3VydicpIj48L2xhYmVsPgogICAgICAgICAgICAgICAgICAgIDxsYWJlbD5CYXMgPGlucHV0IHR5cGU9Im51bWJlciIgaWQ9InNldHMtc3Vydi1ib3QiIHZhbHVlPSIyMCIgb25jaGFuZ2U9ImFwcGx5TGF5b3V0KCdzdXJ2JykiPjwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgPGxhYmVsPlBvbGljZSA8aW5wdXQgdHlwZT0ibnVtYmVyIiBpZD0ic2V0cy1zdXJ2LWZvbnQiIHZhbHVlPSIxNiIgb25jaGFuZ2U9ImFwcGx5TGF5b3V0KCdzdXJ2JykiPjwvbGFiZWw+CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9ImRpc3BsYXk6ZmxleDsganVzdGlmeS1jb250ZW50OmNlbnRlcjsgYmFja2dyb3VuZDojY2NjOyBwYWRkaW5nOjIwcHg7IG92ZXJmbG93LXk6YXV0bzsgaGVpZ2h0OmNhbGMoMTAwdmggLSAzMDBweCk7Ij4KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJwYXBlci1zaGVldCIgaWQ9ImNvbnZvYy1zdXJ2LXRlbXBsYXRlIj4KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iY29udm9jLWhlYWRlci1yb3ciPjxkaXYgY2xhc3M9ImNvbnZvYy1hZGRyZXNzIj48dGV4dGFyZWEgaWQ9InR4dC1zdXJ2LWFkZHJlc3MiIHBsYWNlaG9sZGVyPSJOb20gw6l0YWJsaXNzZW1lbnQuLi4iPjwvdGV4dGFyZWE+PC9kaXY+PGltZyBpZD0iY29udm9jLXN1cnYtbG9nby1pbWciIGNsYXNzPSJjb252b2MtbG9nbyI+PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImNvbnZvYy10aXRsZSI+Q09OVk9DQVRJT04gPHNwYW4gaWQ9InR4dC1zdXJ2LXRpdGxlLWRpc3BsYXkiIGNvbnRlbnRlZGl0YWJsZT0idHJ1ZSIgc3R5bGU9ImJvcmRlcjogMXB4IGRhc2hlZCAjY2NjOyBwYWRkaW5nOiAycHg7Ij5TVVJWRUlMTEFOQ0VTPC9zcGFuPjwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJjb252b2Mtc3R1ZGVudC1pbmZvIj48c3Ryb25nPlN1cnZlaWxsYW50IDo8L3N0cm9uZz4gW05vbV08L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iY29udm9jLWJvZHkgZWRpdGFibGUtdGV4dCIgaWQ9InR4dC1zdXJ2LWJvZHkiIGNvbnRlbnRlZGl0YWJsZT0idHJ1ZSI+Vm91cyDDqnRlcyBjb252b3F1w6koZSkgcG91ciBsZXMgc3VydmVpbGxhbmNlcyBzdWl2YW50ZXMgOjwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICA8dGFibGUgY2xhc3M9ImNvbnZvYy10YWJsZSI+PHRoZWFkPjx0cj48dGg+w4lwcmV1dmU8L3RoPjx0aD5EYXRlPC90aD48dGg+SG9yYWlyZTwvdGg+PHRoPkR1csOpZTwvdGg+PHRoPlNhbGxlPC90aD48L3RyPjwvdGhlYWQ+PHRib2R5Pjx0cj48dGQgY29sc3Bhbj0iNSI+Li4uPC90ZD48L3RyPjwvdGJvZHk+PC90YWJsZT4KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iY29udm9jLXJ1bGVzIGVkaXRhYmxlLXRleHQiIGlkPSJ0eHQtc3Vydi1ydWxlcyIgY29udGVudGVkaXRhYmxlPSJ0cnVlIj5NZXJjaSBkZSB2b3RyZSBwcsOpc2VuY2UgMzAgbWludXRlcyBhdmFudCBsZSBkw6lidXQgZGUgbCfDqXByZXV2ZS48L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iY29udm9jLWZvb3RlciIgc3R5bGU9Imp1c3RpZnktY29udGVudDogZmxleC1lbmQ7Ij48ZGl2IGNsYXNzPSJjb252b2Mtc2lnbiIgc3R5bGU9InRleHQtYWxpZ246cmlnaHQ7Ij48ZGl2PkZhaXQgw6AgPHNwYW4gaWQ9InR4dC1zdXJ2LWNpdHkiIGNvbnRlbnRlZGl0YWJsZT0idHJ1ZSI+VmlsbGU8L3NwYW4+LCBsZSA8c3BhbiBpZD0iY3VycmVudC1kYXRlLXN1cnYiPjwvc3Bhbj48L2Rpdj48ZGl2IGlkPSJjb252b2Mtc3Vydi1zaWduLW5hbWUiIHN0eWxlPSJmb250LXdlaWdodDpib2xkOyBtYXJnaW4tdG9wOjE1cHg7Ij48L2Rpdj48ZGl2IGlkPSJjb252b2Mtc3Vydi1zaWduLXJvbGUiIHN0eWxlPSJmb250LXN0eWxlOml0YWxpYzsiPjwvZGl2PjxpbWcgaWQ9ImNvbnZvYy1zdXJ2LXNpZ24taW1nIiBzdHlsZT0ibWF4LWhlaWdodDo2MHB4OyBtYXJnaW4tdG9wOjEwcHg7Ij48L2Rpdj48L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8L2Rpdj4KCiAgICAgICAgICAgIDxkaXYgaWQ9InZpZXc2IiBjbGFzcz0ic2VjdGlvbi12aWV3Ij4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImhlYWRlci1wYW5lbCI+PGgyPjxpIGNsYXNzPSJmYS1zb2xpZCBmYS1jbGlwYm9hcmQtbGlzdCI+PC9pPiA2LiDDiW1hcmdlbWVudHMgZXQgQWZmaWNoYWdlPC9oMj48L2Rpdj4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImNvbnRyb2xzLWJhciI+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iZm9udC1zaXplOjAuOXJlbTsgY29sb3I6IzU1NTsgbWFyZ2luLXJpZ2h0OjE1cHg7Ij5GaWx0cmUgc2FsbGUgKGxhaXNzZXIgc3VyIFRPVVQgcG91ciB0b3V0IGltcHJpbWVyKSA6PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPHNlbGVjdCBpZD0iZW1hcmdlbWVudC1yb29tLWZpbHRlciIgc3R5bGU9InBhZGRpbmc6OHB4OyBib3JkZXItcmFkaXVzOjVweDsgbWFyZ2luLWxlZnQ6MTBweDsiPjxvcHRpb24gdmFsdWU9IkFMTCI+VG91dGVzIGxlcyBzYWxsZXMgdXRpbGlzw6llczwvb3B0aW9uPjwvc2VsZWN0PgogICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9Im1hcmdpbi1sZWZ0OmF1dG87IGRpc3BsYXk6ZmxleDsgZ2FwOjEwcHg7Ij4KICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYWN0aW9uLWJ0biBidG4tcHJpbnQiIG9uY2xpY2s9InByaW50RGlzcGxheUxpc3QoKSI+SW1wcmltZXIgTGlzdGVzIGQnYWZmaWNoYWdlIChUb3V0ZXMgw4lwcmV1dmVzKTwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJhY3Rpb24tYnRuIGJ0bi1wcmludCIgb25jbGljaz0icHJpbnRFbWFyZ2VtZW50KCkiPkltcHJpbWVyIMOJbWFyZ2VtZW50cyAoVG91dGVzIMOJcHJldXZlcyk8L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iYmFja2dyb3VuZDojZWVlOyBwYWRkaW5nOjIwcHg7IHRleHQtYWxpZ246Y2VudGVyOyBjb2xvcjogIzU1NTsiPkxlcyBkb2N1bWVudHMgc2Vyb250IGfDqW7DqXLDqXMgcG91ciA8c3Ryb25nPnRvdXRlcyBsZXMgw6lwcmV1dmVzPC9zdHJvbmc+Ljxicj5DaGFxdWUgc2FsbGUgc2VyYSBzdXIgdW5lIG5vdXZlbGxlIHBhZ2UuPC9kaXY+CiAgICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgICAgPGRpdiBpZD0idmlldzciIGNsYXNzPSJzZWN0aW9uLXZpZXciPgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iaGVhZGVyLXBhbmVsIj48aDI+PGkgY2xhc3M9ImZhLXNvbGlkIGZhLWZpbGUtc2lnbmF0dXJlIj48L2k+IDcuIFByb2PDqHMgVmVyYmFsIGV0IFBvY2hldHRlczwvaDI+PC9kaXY+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJjb250cm9scy1iYXIiPgogICAgICAgICAgICAgICAgICAgIDxzZWxlY3QgaWQ9InB2LWV4YW0tc2VsZWN0IiBvbmNoYW5nZT0idXBkYXRlUFZSb29tU2VsZWN0KCkiPjwvc2VsZWN0PgogICAgICAgICAgICAgICAgICAgIDxzZWxlY3QgaWQ9InB2LXJvb20tc2VsZWN0Ij48L3NlbGVjdD4KICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJtYXJnaW4tbGVmdDphdXRvOyBkaXNwbGF5OmZsZXg7IGdhcDoxMHB4OyI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImFjdGlvbi1idG4gYnRuLXByaW50IiBvbmNsaWNrPSJwcmludFBWKCkiPkltcHJpbWVyIFBWPC9idXR0b24+CiAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImFjdGlvbi1idG4gYnRuLXByaW50IiBvbmNsaWNrPSJwcmludFBvY2hldHRlcygpIj5JbXByaW1lciBQb2NoZXR0ZXM8L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iY2FyZCI+CiAgICAgICAgICAgICAgICAgICAgPGgzPkNvbnNpZ25lcyAocG91ciBsYSBwb2NoZXR0ZSk8L2gzPgogICAgICAgICAgICAgICAgICAgIDx0ZXh0YXJlYSBpZD0idHh0LXBvY2hldHRlLXN1cnYiIHN0eWxlPSJ3aWR0aDoxMDAlOyBoZWlnaHQ6MjUwcHg7IHBhZGRpbmc6MTBweDsgYm9yZGVyOjFweCBzb2xpZCAjY2NjOyBib3JkZXItcmFkaXVzOjRweDsiIG9uaW5wdXQ9InNhdmVQb2NoZXR0ZVRleHQoJ3N1cnYnLCB0aGlzLnZhbHVlKSI+PC90ZXh0YXJlYT4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8L2Rpdj4KCiAgICAgICAgICAgIDxkaXYgaWQ9InZpZXc4IiBjbGFzcz0ic2VjdGlvbi12aWV3Ij4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImhlYWRlci1wYW5lbCI+PGgyPjxpIGNsYXNzPSJmYS1zb2xpZCBmYS1iYXJjb2RlIj48L2k+IDguIEFub255bWF0IGV0IMOpdGlxdWV0dGVzPC9oMj48L2Rpdj4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImNvbnRyb2xzLWJhciI+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iZGlzcGxheTpmbGV4OyBmbGV4LWRpcmVjdGlvbjpjb2x1bW47IGdhcDo1cHg7IG1hcmdpbi1yaWdodDoxMHB4OyI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxzZWxlY3QgaWQ9ImxhYmVsLWV4YW0tc2VsZWN0IiBvbmNoYW5nZT0idXBkYXRlTGFiZWxSb29tU2VsZWN0KCkiIHN0eWxlPSJwYWRkaW5nOjVweDsgYm9yZGVyLXJhZGl1czo0cHg7IGZvbnQtc2l6ZTowLjhyZW07IHdpZHRoOjIwMHB4OyI+PC9zZWxlY3Q+CiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9ImRpc3BsYXk6ZmxleDsgZ2FwOjVweDsiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNlbGVjdCBpZD0ibGFiZWwtcm9vbS1zZWxlY3QiIHN0eWxlPSJwYWRkaW5nOjVweDsgYm9yZGVyLXJhZGl1czo0cHg7IGZvbnQtc2l6ZTowLjhyZW07IHdpZHRoOjEyMHB4OyI+PC9zZWxlY3Q+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c2VsZWN0IGlkPSJsYWJlbC1jbGFzcy1zZWxlY3QiIHN0eWxlPSJwYWRkaW5nOjVweDsgYm9yZGVyLXJhZGl1czo0cHg7IGZvbnQtc2l6ZTowLjhyZW07IHdpZHRoOjEwMHB4OyI+PC9zZWxlY3Q+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0ibWFyZ2luLWxlZnQ6MTBweDsgYm9yZGVyLWxlZnQ6MXB4IHNvbGlkICNjY2M7IHBhZGRpbmctbGVmdDoxMHB4OyI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBzdHlsZT0iZm9udC1zaXplOjAuOHJlbTsiPlRyaSBMaXN0ZS/DiXRpcXVldHRlcyA6PC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgPHNlbGVjdCBpZD0ibGlzdGluZy1zb3J0LW1vZGUiIHN0eWxlPSJwYWRkaW5nOjVweDsgYm9yZGVyLXJhZGl1czo0cHg7IGZvbnQtc2l6ZTowLjhyZW07Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IkFMUEhBIj5BbHBoYWLDqXRpcXVlPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJDTEFTUyI+UGFyIENsYXNzZTwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iUk9PTSI+UGFyIFNhbGxlPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvc2VsZWN0PgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJhY3Rpb24tYnRuIGJ0bi1jYWxjIiBvbmNsaWNrPSJnZW5lcmF0ZUFub255bWl0eSgpIj5Hw6luw6lyZXIgQ29kZXM8L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJhY3Rpb24tYnRuIGJ0bi1wcmludCIgb25jbGljaz0icHJpbnRUYWJsZUxhYmVscygpIj7DiXRpcXVldHRlczwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImFjdGlvbi1idG4gYnRuLXByaW50IiBvbmNsaWNrPSJwcmludEFub255bWl0eUxpc3QoKSI+TGlzdGluZzwvYnV0dG9uPgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICA8ZGl2IGlkPSJhbm9ueW1pdHktdGFibGUtY29udGFpbmVyIj48L2Rpdj4KICAgICAgICAgICAgPC9kaXY+CgogICAgICAgICAgICA8ZGl2IGlkPSJ2aWV3OSIgY2xhc3M9InNlY3Rpb24tdmlldyI+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJoZWFkZXItcGFuZWwiPjxoMj48aSBjbGFzcz0iZmEtc29saWQgZmEtdGFibGUtbGlzdCI+PC9pPiA5LiBUYWJsZWF1IFLDqWNhcGl0dWxhdGlmPC9oMj48L2Rpdj4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImNvbnRyb2xzLWJhciI+CiAgICAgICAgICAgICAgICAgICAgPGxhYmVsPsOJcHJldXZlIDo8L2xhYmVsPiA8c2VsZWN0IGlkPSJyZWNhcC1leGFtLXNlbGVjdCIgb25jaGFuZ2U9InVwZGF0ZVJlY2FwUm9vbVNlbGVjdCgpIj48L3NlbGVjdD4KICAgICAgICAgICAgICAgICAgICA8bGFiZWwgc3R5bGU9Im1hcmdpbi1sZWZ0OjEwcHg7Ij5TYWxsZSA6PC9sYWJlbD4gPHNlbGVjdCBpZD0icmVjYXAtcm9vbS1zZWxlY3QiPjwvc2VsZWN0PgogICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImFjdGlvbi1idG4gYnRuLXByaW50IiBvbmNsaWNrPSJwcmludEdsb2JhbFJlY2FwKCkiIHN0eWxlPSJtYXJnaW4tbGVmdDphdXRvOyI+SW1wcmltZXIgVGFibGVhdXg8L2J1dHRvbj4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iYmFja2dyb3VuZDojZjlmOWY5OyBwYWRkaW5nOjIwcHg7IHRleHQtYWxpZ246Y2VudGVyOyI+R8OpbsOocmUgdW4gdGFibGVhdSBwYXIgw6lwcmV1dmUgZXQgcGFyIHNhbGxlIGluZGlxdWFudCBhdXggw6lsw6h2ZXMgb8O5IHNlIHJlbmRyZS48L2Rpdj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgPC9kaXY+CiAgICA8L2Rpdj4KICAgIDxkaXYgaWQ9InByaW50LWFyZWEiIHN0eWxlPSJkaXNwbGF5Om5vbmU7Ij48L2Rpdj4KCiAgICA8c2NyaXB0PgogICAgICAgIC8vIFZBUklBQkxFIEdMT0JBTEUKICAgICAgICBsZXQgQXBwU3RhdGUgPSB7IGNvbmZpZzoge30sIGNvbnZvY1RleHQ6IHt9LCBzdXJ2Q29udm9jVGV4dDoge30sIHBvY2hldHRlVGV4dDoge30sIGxheW91dDogeyBzdGQ6IHt0b3A6MjAsIGJvdDoyMCwgZm9udDoxNn0sIHN1cnY6IHt0b3A6MjAsIGJvdDoyMCwgZm9udDoxNn0gfSwgZWxldmVzOiBbXSwgZXByZXV2ZXM6IFtdLCBzYWxsZXM6IFtdLCBzdXJ2ZWlsbGFudHM6IFtdLCBkaXN0cmlidXRpb25EYXRhOiBbXSwgY3VycmVudEV4YW1JbmRleDogMCB9OwogICAgICAgIGNvbnN0IG5vcm1hbGl6ZSA9IHMgPT4gcyA/IHMudG9TdHJpbmcoKS50b0xvd2VyQ2FzZSgpLnRyaW0oKSA6ICcnOwogICAgICAgIGNvbnN0IG5vcm1DbGFzcyA9IChzKSA9PiBzID8gU3RyaW5nKHMpLnRvVXBwZXJDYXNlKCkucmVwbGFjZSgvXHMrL2csICcnKS50cmltKCkgOiAiTi9BIjsKCiAgICAgICAgLy8gRlVOQ1RJT04gRElTUExBWSBEVVJBVElPTiAKICAgICAgICBmdW5jdGlvbiBmb3JtYXREdXJhdGlvbkRpc3BsYXkodmFsKSB7CiAgICAgICAgICAgIGlmICghdmFsKSByZXR1cm4gIiI7CiAgICAgICAgICAgIGNvbnN0IHMgPSBTdHJpbmcodmFsKS50cmltKCk7CiAgICAgICAgICAgIGlmIChzLmluY2x1ZGVzKCdoJykgfHwgcy5pbmNsdWRlcygnOicpKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gcy5yZXBsYWNlKCc6JywgJ2gnKTsgCiAgICAgICAgICAgIH0KICAgICAgICAgICAgY29uc3QgbnVtID0gcGFyc2VGbG9hdChzKTsKICAgICAgICAgICAgaWYgKCFpc05hTihudW0pKSB7CiAgICAgICAgICAgICAgICBjb25zdCBoID0gTWF0aC5mbG9vcihudW0gLyA2MCk7CiAgICAgICAgICAgICAgICBjb25zdCBtID0gTWF0aC5yb3VuZChudW0gJSA2MCk7CiAgICAgICAgICAgICAgICBjb25zdCBtU3RyID0gbSA8IDEwID8gJzAnICsgbSA6IG07CiAgICAgICAgICAgICAgICBpZihoID4gMCkgcmV0dXJuIGAke2h9aCR7bVN0cn1gOwogICAgICAgICAgICAgICAgcmV0dXJuIGAke219IG1pbmA7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIHM7CiAgICAgICAgfQogICAgICAgIAogICAgICAgIC8vIC0tLSBOT1VWRUxMRSBGT05DVElPTiBERSBUUkkgUk9CVVNURSBEQVRFIEZSQU5DQUlTRSArIEhFVVJFIC0tLQogICAgICAgIGZ1bmN0aW9uIGdldERhdGVUaW1lVmFsdWUoZXhhbVJhdywgaXNUVCkgewogICAgICAgICAgICBsZXQgZFZhbCA9IGdldFZhbHVlKGV4YW1SYXcsIFsnRGF0ZScsICdKb3VyJywgJ0RhdGUgw6lwcmV1dmUnLCAnRGF0ZSBkZWJ1dCddKTsKICAgICAgICAgICAgbGV0IGRhdGVPYmogPSBudWxsOwogICAgICAgICAgICBjb25zdCBmcmVuY2hNb250aHMgPSB7CiAgICAgICAgICAgICAgICAnamFudmllcic6IDAsICdmw6l2cmllcic6IDEsICdmZXZyaWVyJzogMSwgJ21hcnMnOiAyLCAnYXZyaWwnOiAzLCAnbWFpJzogNCwgJ2p1aW4nOiA1LAogICAgICAgICAgICAgICAgJ2p1aWxsZXQnOiA2LCAnYW/Du3QnOiA3LCAnYW91dCc6IDcsICdzZXB0ZW1icmUnOiA4LCAnb2N0b2JyZSc6IDksICdub3ZlbWJyZSc6IDEwLCAnZMOpY2VtYnJlJzogMTEsICdkZWNlbWJyZSc6IDExCiAgICAgICAgICAgIH07CiAgICAgICAgICAgIGlmIChkVmFsKSB7CiAgICAgICAgICAgICAgICBpZiAoIWlzTmFOKGRWYWwpICYmIGRWYWwgPiAyMDAwMCkgewogICAgICAgICAgICAgICAgICAgICBkYXRlT2JqID0gbmV3IERhdGUoKGRWYWwgLSAyNTU2OSkgKiA4NjQwMCAqIDEwMDApOwogICAgICAgICAgICAgICAgfSAKICAgICAgICAgICAgICAgIGVsc2UgaWYgKHR5cGVvZiBkVmFsID09PSAnc3RyaW5nJykgewogICAgICAgICAgICAgICAgICAgIGNvbnN0IGNsZWFuVmFsID0gZFZhbC50b0xvd2VyQ2FzZSgpLnRyaW0oKTsKICAgICAgICAgICAgICAgICAgICBpZiAoY2xlYW5WYWwuaW5jbHVkZXMoJy8nKSkgewogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwYXJ0cyA9IGNsZWFuVmFsLnNwbGl0KCcvJyk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwYXJ0cy5sZW5ndGggPT09IDMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGVPYmogPSBuZXcgRGF0ZShwYXJzZUludChwYXJ0c1syXSksIHBhcnNlSW50KHBhcnRzWzFdKSAtIDEsIHBhcnNlSW50KHBhcnRzWzBdKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRleHRNYXRjaCA9IGNsZWFuVmFsLm1hdGNoKC8oXGR7MSwyfXwxZXIpXHMrKFthLXrDqcO7XSspLyk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0ZXh0TWF0Y2gpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBkYXkgPSAodGV4dE1hdGNoWzFdID09PSAnMWVyJykgPyAxIDogcGFyc2VJbnQodGV4dE1hdGNoWzFdKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBtb250aE5hbWUgPSB0ZXh0TWF0Y2hbMl07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZnJlbmNoTW9udGhzLmhhc093blByb3BlcnR5KG1vbnRoTmFtZSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50WWVhciA9IG5ldyBEYXRlKCkuZ2V0RnVsbFllYXIoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRlT2JqID0gbmV3IERhdGUoY3VycmVudFllYXIsIGZyZW5jaE1vbnRoc1ttb250aE5hbWVdLCBkYXkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmICghZGF0ZU9iaiB8fCBpc05hTihkYXRlT2JqLmdldFRpbWUoKSkpIHsKICAgICAgICAgICAgICAgIGRhdGVPYmogPSBuZXcgRGF0ZSgwKTsgCiAgICAgICAgICAgIH0KICAgICAgICAgICAgbGV0IHRWYWwgPSBpc1RUID8gZ2V0VmFsdWUoZXhhbVJhdywgWydIZXVyZSBkZSBkw6lidXQgdGllcnMgdGVtcHMnLCAnSGV1cmUgVFQnXSkgOiBnZXRWYWx1ZShleGFtUmF3LCBbJ0hldXJlIGRlIGTDqWJ1dCcsICdIZXVyZScsICdIb3JhaXJlJ10pOwogICAgICAgICAgICBpZighdFZhbCkgdFZhbCA9IGdldFZhbHVlKGV4YW1SYXcsIFsnSGV1cmUgZGUgZMOpYnV0JywgJ0hldXJlJywgJ0hvcmFpcmUnXSk7CiAgICAgICAgICAgIGxldCBob3VycyA9IDAsIG1pbnV0ZXMgPSAwOwogICAgICAgICAgICBpZih0VmFsKSB7CiAgICAgICAgICAgICAgICBsZXQgdFN0ciA9IFN0cmluZyh0VmFsKS50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoJ2gnLCAnOicpLnJlcGxhY2UoJy4nLCAnOicpLnRyaW0oKTsKICAgICAgICAgICAgICAgIGNvbnN0IHRQYXJ0cyA9IHRTdHIuc3BsaXQoJzonKTsKICAgICAgICAgICAgICAgIGlmKHRQYXJ0cy5sZW5ndGggPj0gMSkgaG91cnMgPSBwYXJzZUludCh0UGFydHNbMF0pIHx8IDA7CiAgICAgICAgICAgICAgICBpZih0UGFydHMubGVuZ3RoID49IDIpIG1pbnV0ZXMgPSBwYXJzZUludCh0UGFydHNbMV0pIHx8IDA7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZGF0ZU9iai5zZXRIb3Vycyhob3VycywgbWludXRlcywgMCwgMCk7CiAgICAgICAgICAgIHJldHVybiBkYXRlT2JqLmdldFRpbWUoKTsKICAgICAgICB9CgogICAgICAgIC8vIC0tLSAxLiBGT05DVElPTlMgU0FVVkVHQVJERSBFVCBDSEFSR0VNRU5UIC0tLQogICAgICAgIGZ1bmN0aW9uIHN5bmNTdGF0ZUZyb21ET00oKSB7CiAgICAgICAgICAgIEFwcFN0YXRlLmNvbmZpZy5uYW1lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbmZpZ05hbWUnKS52YWx1ZTsKICAgICAgICAgICAgQXBwU3RhdGUuY29uZmlnLnJvbGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29uZmlnUm9sZScpLnZhbHVlOwogICAgICAgICAgICBBcHBTdGF0ZS5jb25maWcuZXhhbVRpdGxlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbmZpZ0V4YW1UaXRsZScpLnZhbHVlOwogICAgICAgICAgICBpZighQXBwU3RhdGUuY29udm9jVGV4dCkgQXBwU3RhdGUuY29udm9jVGV4dCA9IHt9OwogICAgICAgICAgICBBcHBTdGF0ZS5jb252b2NUZXh0LmFkZHJlc3MgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndHh0LWFkZHJlc3MnKS52YWx1ZTsKICAgICAgICAgICAgQXBwU3RhdGUuY29udm9jVGV4dC5ib2R5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3R4dC1ib2R5JykuaW5uZXJIVE1MOwogICAgICAgICAgICBBcHBTdGF0ZS5jb252b2NUZXh0LnJ1bGVzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3R4dC1ydWxlcycpLmlubmVySFRNTDsKICAgICAgICAgICAgQXBwU3RhdGUuY29udm9jVGV4dC5jaXR5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3R4dC1jaXR5JykuaW5uZXJUZXh0OwogICAgICAgICAgICBpZighQXBwU3RhdGUubGF5b3V0LnN0ZCkgQXBwU3RhdGUubGF5b3V0LnN0ZCA9IHt9OwogICAgICAgICAgICBBcHBTdGF0ZS5sYXlvdXQuc3RkLnRvcCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZXRzLXN0ZC10b3AnKS52YWx1ZTsKICAgICAgICAgICAgQXBwU3RhdGUubGF5b3V0LnN0ZC5ib3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2V0cy1zdGQtYm90JykudmFsdWU7CiAgICAgICAgICAgIEFwcFN0YXRlLmxheW91dC5zdGQuZm9udCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZXRzLXN0ZC1mb250JykudmFsdWU7CiAgICAgICAgICAgIGlmKCFBcHBTdGF0ZS5sYXlvdXQuc3VydikgQXBwU3RhdGUubGF5b3V0LnN1cnYgPSB7fTsKICAgICAgICAgICAgQXBwU3RhdGUubGF5b3V0LnN1cnYudG9wID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NldHMtc3Vydi10b3AnKS52YWx1ZTsKICAgICAgICAgICAgQXBwU3RhdGUubGF5b3V0LnN1cnYuYm90ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NldHMtc3Vydi1ib3QnKS52YWx1ZTsKICAgICAgICAgICAgQXBwU3RhdGUubGF5b3V0LnN1cnYuZm9udCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZXRzLXN1cnYtZm9udCcpLnZhbHVlOwogICAgICAgICAgICBpZighQXBwU3RhdGUuc3VydkNvbnZvY1RleHQpIEFwcFN0YXRlLnN1cnZDb252b2NUZXh0ID0ge307CiAgICAgICAgICAgIEFwcFN0YXRlLnN1cnZDb252b2NUZXh0LmFkZHJlc3MgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndHh0LXN1cnYtYWRkcmVzcycpLnZhbHVlOwogICAgICAgICAgICBBcHBTdGF0ZS5zdXJ2Q29udm9jVGV4dC5ib2R5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3R4dC1zdXJ2LWJvZHknKS5pbm5lckhUTUw7CiAgICAgICAgICAgIEFwcFN0YXRlLnN1cnZDb252b2NUZXh0LnJ1bGVzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3R4dC1zdXJ2LXJ1bGVzJykuaW5uZXJIVE1MOwogICAgICAgICAgICBBcHBTdGF0ZS5zdXJ2Q29udm9jVGV4dC5jaXR5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3R4dC1zdXJ2LWNpdHknKS5pbm5lclRleHQ7CiAgICAgICAgICAgIGlmKCFBcHBTdGF0ZS5wb2NoZXR0ZVRleHQpIEFwcFN0YXRlLnBvY2hldHRlVGV4dCA9IHt9OwogICAgICAgICAgICBBcHBTdGF0ZS5wb2NoZXR0ZVRleHQuc3VydiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0eHQtcG9jaGV0dGUtc3VydicpLnZhbHVlOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gc2F2ZVByb2plY3QoKSB7CiAgICAgICAgICAgIGlmKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd2aWV3MycpLmNsYXNzTGlzdC5jb250YWlucygnYWN0aXZlJykpIHsKICAgICAgICAgICAgICAgIHVwZGF0ZUN1cnJlbnRFeGFtU3RhdGUoKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBzeW5jU3RhdGVGcm9tRE9NKCk7CiAgICAgICAgICAgIGNvbnN0IGRhdGFTdHIgPSBKU09OLnN0cmluZ2lmeShBcHBTdGF0ZSk7CiAgICAgICAgICAgIGNvbnN0IGJsb2IgPSBuZXcgQmxvYihbZGF0YVN0cl0sIHt0eXBlOiAiYXBwbGljYXRpb24vanNvbjtjaGFyc2V0PXV0Zi04In0pOwogICAgICAgICAgICBjb25zdCB1cmwgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpOwogICAgICAgICAgICBjb25zdCBhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpOwogICAgICAgICAgICBhLmhyZWYgPSB1cmw7CiAgICAgICAgICAgIGNvbnN0IGQgPSBuZXcgRGF0ZSgpOwogICAgICAgICAgICBjb25zdCBkYXRlU3RyID0gZC50b0lTT1N0cmluZygpLnNwbGl0KCdUJylbMF07CiAgICAgICAgICAgIGEuZG93bmxvYWQgPSBgUFJPSkVUX0VYQU1fJHtkYXRlU3RyfS5qc29uYDsKICAgICAgICAgICAgYS5jbGljaygpOwogICAgICAgICAgICBVUkwucmV2b2tlT2JqZWN0VVJMKHVybCk7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBsb2FkUHJvamVjdChpbnB1dCkgewogICAgICAgICAgICBjb25zdCBmaWxlID0gaW5wdXQuZmlsZXNbMF07CiAgICAgICAgICAgIGlmICghZmlsZSkgcmV0dXJuOwogICAgICAgICAgICBjb25zdCByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpOwogICAgICAgICAgICByZWFkZXIub25sb2FkID0gZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICBBcHBTdGF0ZSA9IEpTT04ucGFyc2UoZS50YXJnZXQucmVzdWx0KTsKICAgICAgICAgICAgICAgICAgICByZXN0b3JlUHJvamVjdFVJKCk7CiAgICAgICAgICAgICAgICAgICAgYWxlcnQoIlByb2pldCBjaGFyZ8OpIGF2ZWMgc3VjY8OocyAhIik7CiAgICAgICAgICAgICAgICB9IGNhdGNoKGVycikgeyBjb25zb2xlLmVycm9yKGVycik7IGFsZXJ0KCJFcnJldXIgbG9ycyBkZSBsYSBsZWN0dXJlLiIpOyB9CiAgICAgICAgICAgIH07CiAgICAgICAgICAgIHJlYWRlci5yZWFkQXNUZXh0KGZpbGUpOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gcmVzdG9yZVByb2plY3RVSSgpIHsKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbmZpZ05hbWUnKS52YWx1ZSA9IEFwcFN0YXRlLmNvbmZpZy5uYW1lIHx8ICIiOwogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29uZmlnUm9sZScpLnZhbHVlID0gQXBwU3RhdGUuY29uZmlnLnJvbGUgfHwgIiI7CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb25maWdFeGFtVGl0bGUnKS52YWx1ZSA9IEFwcFN0YXRlLmNvbmZpZy5leGFtVGl0bGUgfHwgIiI7CiAgICAgICAgICAgIGlmKEFwcFN0YXRlLmNvbmZpZy5sb2dvU3JjKSB7IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb2dvUHJldmlldycpLnNyYyA9IEFwcFN0YXRlLmNvbmZpZy5sb2dvU3JjOyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbG9nb1ByZXZpZXcnKS5zdHlsZS5kaXNwbGF5PSdibG9jayc7IH0KICAgICAgICAgICAgaWYoQXBwU3RhdGUuY29uZmlnLnNpZ25TcmMpIHsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NpZ25QcmV2aWV3Jykuc3JjID0gQXBwU3RhdGUuY29uZmlnLnNpZ25TcmM7IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzaWduUHJldmlldycpLnN0eWxlLmRpc3BsYXk9J2Jsb2NrJzsgfQogICAgICAgICAgICBpZihBcHBTdGF0ZS5lbGV2ZXMgJiYgQXBwU3RhdGUuZWxldmVzLmxlbmd0aCkgdXBkYXRlU3RhdHVzKCd6b25lLWVsZXZlcycsICdzdGF0dXMtZWxldmVzJywgYCR7QXBwU3RhdGUuZWxldmVzLmxlbmd0aH0gw6lsw6h2ZXNgKTsKICAgICAgICAgICAgaWYoQXBwU3RhdGUuZXByZXV2ZXMgJiYgQXBwU3RhdGUuZXByZXV2ZXMubGVuZ3RoKSB1cGRhdGVTdGF0dXMoJ3pvbmUtZXByZXV2ZXMnLCAnc3RhdHVzLWVwcmV1dmVzJywgYCR7QXBwU3RhdGUuZXByZXV2ZXMubGVuZ3RofSDDqXByZXV2ZXNgKTsKICAgICAgICAgICAgaWYoQXBwU3RhdGUuc2FsbGVzICYmIEFwcFN0YXRlLnNhbGxlcy5sZW5ndGgpIHVwZGF0ZVN0YXR1cygnem9uZS1yZXNzb3VyY2VzJywgJ3N0YXR1cy1yZXNzb3VyY2VzJywgYCR7QXBwU3RhdGUuc2FsbGVzLmxlbmd0aH0gc2FsbGVzYCk7CiAgICAgICAgICAgIGlmKEFwcFN0YXRlLnN1cnZlaWxsYW50cyAmJiBBcHBTdGF0ZS5zdXJ2ZWlsbGFudHMubGVuZ3RoKSB1cGRhdGVTdGF0dXMoJ3pvbmUtc3VydmVpbGxhbnRzJywgJ3N0YXR1cy1zdXJ2ZWlsbGFudHMnLCBgJHtBcHBTdGF0ZS5zdXJ2ZWlsbGFudHMubGVuZ3RofSBzdXJ2ZWlsbGFudHNgKTsKICAgICAgICAgICAgaWYoQXBwU3RhdGUuZGlzdHJpYnV0aW9uRGF0YSAmJiBBcHBTdGF0ZS5kaXN0cmlidXRpb25EYXRhLmxlbmd0aCkgeyByZW5kZXJFeGFtTmF2aWdhdGlvbigpOyByZW5kZXJDdXJyZW50RXhhbSgpOyB9CiAgICAgICAgICAgIGlmKEFwcFN0YXRlLmNvbnZvY1RleHQpIHsKICAgICAgICAgICAgICAgIGlmKEFwcFN0YXRlLmNvbnZvY1RleHQuYWRkcmVzcykgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3R4dC1hZGRyZXNzJykudmFsdWUgPSBBcHBTdGF0ZS5jb252b2NUZXh0LmFkZHJlc3M7CiAgICAgICAgICAgICAgICBpZihBcHBTdGF0ZS5jb252b2NUZXh0LmJvZHkpIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0eHQtYm9keScpLmlubmVySFRNTCA9IEFwcFN0YXRlLmNvbnZvY1RleHQuYm9keTsKICAgICAgICAgICAgICAgIGlmKEFwcFN0YXRlLmNvbnZvY1RleHQucnVsZXMpIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0eHQtcnVsZXMnKS5pbm5lckhUTUwgPSBBcHBTdGF0ZS5jb252b2NUZXh0LnJ1bGVzOwogICAgICAgICAgICAgICAgaWYoQXBwU3RhdGUuY29udm9jVGV4dC5jaXR5KSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndHh0LWNpdHknKS5pbm5lclRleHQgPSBBcHBTdGF0ZS5jb252b2NUZXh0LmNpdHk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgIGlmKEFwcFN0YXRlLnN1cnZDb252b2NUZXh0KSB7CiAgICAgICAgICAgICAgICBpZihBcHBTdGF0ZS5zdXJ2Q29udm9jVGV4dC5hZGRyZXNzKSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndHh0LXN1cnYtYWRkcmVzcycpLnZhbHVlID0gQXBwU3RhdGUuc3VydkNvbnZvY1RleHQuYWRkcmVzczsKICAgICAgICAgICAgICAgIGlmKEFwcFN0YXRlLnN1cnZDb252b2NUZXh0LmJvZHkpIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0eHQtc3Vydi1ib2R5JykuaW5uZXJIVE1MID0gQXBwU3RhdGUuc3VydkNvbnZvY1RleHQuYm9keTsKICAgICAgICAgICAgICAgIGlmKEFwcFN0YXRlLnN1cnZDb252b2NUZXh0LnJ1bGVzKSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndHh0LXN1cnYtcnVsZXMnKS5pbm5lckhUTUwgPSBBcHBTdGF0ZS5zdXJ2Q29udm9jVGV4dC5ydWxlczsKICAgICAgICAgICAgICAgIGlmKEFwcFN0YXRlLnN1cnZDb252b2NUZXh0LmNpdHkpIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0eHQtc3Vydi1jaXR5JykuaW5uZXJUZXh0ID0gQXBwU3RhdGUuc3VydkNvbnZvY1RleHQuY2l0eTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZihBcHBTdGF0ZS5wb2NoZXR0ZVRleHQgJiYgQXBwU3RhdGUucG9jaGV0dGVUZXh0LnN1cnYpIHsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3R4dC1wb2NoZXR0ZS1zdXJ2JykudmFsdWUgPSBBcHBTdGF0ZS5wb2NoZXR0ZVRleHQuc3VydjsgfSBlbHNlIHsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3R4dC1wb2NoZXR0ZS1zdXJ2JykudmFsdWUgPSBkZWZhdWx0Q29uc2lnbmVzOyB9CiAgICAgICAgICAgIHBvcHVsYXRlQ2xhc3NGaWx0ZXIoKTsKICAgICAgICAgICAgcG9wdWxhdGVTdXJ2ZWlsbGFudEZpbHRlcigpOwogICAgICAgICAgICBwb3B1bGF0ZUVtYXJnZW1lbnRGaWx0ZXJzKCk7CiAgICAgICAgICAgIHBvcHVsYXRlUFZFeGFtU2VsZWN0KCk7CiAgICAgICAgICAgIHBvcHVsYXRlUmVjYXBGaWx0ZXJzKCk7CiAgICAgICAgICAgIHBvcHVsYXRlTGFiZWxGaWx0ZXJzKCk7CiAgICAgICAgICAgIGlmKEFwcFN0YXRlLmVsZXZlcy5sZW5ndGggPiAwICYmIEFwcFN0YXRlLmVsZXZlc1swXS5OdW1Bbm9ueW1hdCkgcmVuZGVyQW5vbnltaXR5VGFibGUoKTsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgZnVuY3Rpb24gZ2V0VmFsdWUocm93LCBwb3NzaWJsZUtleXMpIHsKICAgICAgICAgICAgaWYgKCFyb3cpIHJldHVybiBudWxsOwogICAgICAgICAgICBjb25zdCByb3dLZXlzID0gT2JqZWN0LmtleXMocm93KTsKICAgICAgICAgICAgZm9yIChsZXQgcGsgb2YgcG9zc2libGVLZXlzKSB7CiAgICAgICAgICAgICAgICBjb25zdCB0YXJnZXQgPSBub3JtYWxpemUocGspOwogICAgICAgICAgICAgICAgY29uc3QgZm91bmRLZXkgPSByb3dLZXlzLmZpbmQoayA9PiBub3JtYWxpemUoaykgPT09IHRhcmdldCk7CiAgICAgICAgICAgICAgICBpZiAoZm91bmRLZXkpIHJldHVybiByb3dbZm91bmRLZXldOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gaXNUaWVyc1RlbXBzKHZhbCkgeyBpZiAoIXZhbCkgcmV0dXJuIGZhbHNlOyBjb25zdCBzID0gdmFsLnRvU3RyaW5nKCkudG9VcHBlckNhc2UoKTsgcmV0dXJuIHMuaW5jbHVkZXMoJ1RUJykgfHwgcy5pbmNsdWRlcygnT1VJJykgfHwgcy5pbmNsdWRlcygnVElFUlMnKSB8fCBzLmluY2x1ZGVzKCdZRVMnKTsgfQoKICAgICAgICBmdW5jdGlvbiBoYW5kbGVGaWxlKGlucHV0LCB0eXBlKSB7IAogICAgICAgICAgICBjb25zdCBmaWxlID0gaW5wdXQuZmlsZXNbMF07IGlmICghZmlsZSkgcmV0dXJuOwogICAgICAgICAgICBjb25zdCByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpOwogICAgICAgICAgICByZWFkZXIub25sb2FkID0gZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgY29uc3QgZGF0YSA9IG5ldyBVaW50OEFycmF5KGUudGFyZ2V0LnJlc3VsdCk7IAogICAgICAgICAgICAgICAgY29uc3Qgd29ya2Jvb2sgPSBYTFNYLnJlYWQoZGF0YSwge3R5cGU6ICdhcnJheSd9KTsKICAgICAgICAgICAgICAgIGNvbnN0IGpzb25EYXRhID0gWExTWC51dGlscy5zaGVldF90b19qc29uKHdvcmtib29rLlNoZWV0c1t3b3JrYm9vay5TaGVldE5hbWVzWzBdXSk7CiAgICAgICAgICAgICAgICBpZiAodHlwZSA9PT0gJ0VMRVZFUycpIHsgQXBwU3RhdGUuZWxldmVzID0ganNvbkRhdGE7IHVwZGF0ZVN0YXR1cygnem9uZS1lbGV2ZXMnLCAnc3RhdHVzLWVsZXZlcycsIGAke2pzb25EYXRhLmxlbmd0aH0gw6lsw6h2ZXNgKTsgfQogICAgICAgICAgICAgICAgZWxzZSBpZiAodHlwZSA9PT0gJ0VQUkVVVkVTJykgeyBBcHBTdGF0ZS5lcHJldXZlcyA9IGpzb25EYXRhOyB1cGRhdGVTdGF0dXMoJ3pvbmUtZXByZXV2ZXMnLCAnc3RhdHVzLWVwcmV1dmVzJywgYCR7anNvbkRhdGEubGVuZ3RofSDDqXByZXV2ZXNgKTsgfQogICAgICAgICAgICAgICAgZWxzZSBpZiAodHlwZSA9PT0gJ1JFU1NPVVJDRVMnKSB7IEFwcFN0YXRlLnNhbGxlcyA9IGpzb25EYXRhOyB1cGRhdGVTdGF0dXMoJ3pvbmUtcmVzc291cmNlcycsICdzdGF0dXMtcmVzc291cmNlcycsIGAke2pzb25EYXRhLmxlbmd0aH0gc2FsbGVzYCk7IH0KICAgICAgICAgICAgICAgIGVsc2UgaWYgKHR5cGUgPT09ICdTVVJWRUlMTEFOVFMnKSB7IEFwcFN0YXRlLnN1cnZlaWxsYW50cyA9IGpzb25EYXRhOyB1cGRhdGVTdGF0dXMoJ3pvbmUtc3VydmVpbGxhbnRzJywgJ3N0YXR1cy1zdXJ2ZWlsbGFudHMnLCBgJHtqc29uRGF0YS5sZW5ndGh9IHN1cnZlaWxsYW50c2ApOyB9CiAgICAgICAgICAgIH07IAogICAgICAgICAgICByZWFkZXIucmVhZEFzQXJyYXlCdWZmZXIoZmlsZSk7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiB1cGRhdGVTdGF0dXMoem9uZUlkLCBzdGF0dXNJZCwgbXNnKSB7IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHpvbmVJZCkuY2xhc3NMaXN0LmFkZCgnbG9hZGVkJyk7IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHN0YXR1c0lkKS5pbm5lckhUTUwgPSAnPGkgY2xhc3M9ImZhLXNvbGlkIGZhLWNoZWNrIj48L2k+ICcgKyBtc2c7IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHN0YXR1c0lkKS5jbGFzc05hbWUgPSAnc3RhdHVzLWJhZGdlIHN0YXR1cy1vayc7IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHN0YXR1c0lkKS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJzsgfQoKICAgICAgICBmdW5jdGlvbiBsYXVuY2hEaXN0cmlidXRpb24oKSB7CiAgICAgICAgICAgIGlmKCFBcHBTdGF0ZS5lcHJldXZlcy5sZW5ndGggfHwgIUFwcFN0YXRlLmVsZXZlcy5sZW5ndGggfHwgIUFwcFN0YXRlLnNhbGxlcy5sZW5ndGgpIHsgYWxlcnQoIkltcG9ydCBtYW5xdWFudC4iKTsgcmV0dXJuOyB9CiAgICAgICAgICAgIGlmKCFjb25maXJtKCJMYW5jZXIgbGUgY2FsY3VsID8gQXR0ZW50aW9uLCBjZWxhIMOpY3Jhc2VyYSBsYSByw6lwYXJ0aXRpb24gZXhpc3RhbnRlIHBvdXIgbGEgcG9ydMOpZSBzw6lsZWN0aW9ubsOpZS4iKSkgcmV0dXJuOwogICAgICAgICAgICBjb25zdCBtZXRob2QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGlzdHJpYi1tZXRob2QnKS52YWx1ZTsgCiAgICAgICAgICAgIGNvbnN0IHNjb3BlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Rpc3RyaWItc2NvcGUnKS52YWx1ZTsgICAKICAgICAgICAgICAgY2FsY3VsYXRlRGlzdHJpYnV0aW9uKG1ldGhvZCwgc2NvcGUpOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gY2FsY3VsYXRlRGlzdHJpYnV0aW9uKG1ldGhvZCwgc2NvcGUpIHsKICAgICAgICAgICAgY29uc3QgZmlyc3RTdHVkZW50ID0gQXBwU3RhdGUuZWxldmVzWzBdOwogICAgICAgICAgICBjb25zdCBoYXNTcGVjaWFsdHkgPSBnZXRWYWx1ZShmaXJzdFN0dWRlbnQsIFsnU3DDqWNpYWxpdMOpMScsICdTcGUxJywgJ1NwZSAxJ10pICE9PSBudWxsOwogICAgICAgICAgICBpZiAoc2NvcGUgPT09ICdBTEwnIHx8IEFwcFN0YXRlLmRpc3RyaWJ1dGlvbkRhdGEubGVuZ3RoID09PSAwKSB7CiAgICAgICAgICAgICAgICBBcHBTdGF0ZS5kaXN0cmlidXRpb25EYXRhID0gbmV3IEFycmF5KEFwcFN0YXRlLmVwcmV1dmVzLmxlbmd0aCkuZmlsbChudWxsKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBsZXQgaW5kaWNlc1RvUHJvY2VzcyA9IFtdOwogICAgICAgICAgICBpZiAoc2NvcGUgPT09ICdBTEwnKSB7CiAgICAgICAgICAgICAgICBmb3IobGV0IGk9MDsgaTxBcHBTdGF0ZS5lcHJldXZlcy5sZW5ndGg7IGkrKykgaW5kaWNlc1RvUHJvY2Vzcy5wdXNoKGkpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgaW5kaWNlc1RvUHJvY2Vzcy5wdXNoKEFwcFN0YXRlLmN1cnJlbnRFeGFtSW5kZXgpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGluZGljZXNUb1Byb2Nlc3MuZm9yRWFjaChleGFtSWR4ID0+IHsKICAgICAgICAgICAgICAgIGNvbnN0IGV4YW0gPSBBcHBTdGF0ZS5lcHJldXZlc1tleGFtSWR4XTsKICAgICAgICAgICAgICAgIGxldCBleGFtU3RhdGUgPSB7IGV4YW1JZHg6IGV4YW1JZHgsIHN0b3JhZ2U6IFtdLCByb29tczogW10gfTsKICAgICAgICAgICAgICAgIGNvbnN0IG1hdGllcmUgPSBnZXRWYWx1ZShleGFtLCBbJ01hdGnDqHJlJywgJ0VwcmV1dmUnLCAnTm9tJ10pIHx8ICgnw4lwcmV1dmUgJyArIChleGFtSWR4ICsgMSkpOwogICAgICAgICAgICAgICAgbGV0IGNhbmRpZGF0ZXMgPSBBcHBTdGF0ZS5lbGV2ZXMuZmlsdGVyKGUgPT4gewogICAgICAgICAgICAgICAgICAgIGlmICghaGFzU3BlY2lhbHR5KSByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICBjb25zdCBzcGUxID0gZ2V0VmFsdWUoZSwgWydTcMOpY2lhbGl0w6kxJywgJ1NwZTEnLCAnU3BlIDEnXSk7CiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3BlMiA9IGdldFZhbHVlKGUsIFsnU3DDqWNpYWxpdMOpMicsICdTcGUyJywgJ1NwZSAyJ10pOwogICAgICAgICAgICAgICAgICAgIGlmICghc3BlMSAmJiAhc3BlMikgcmV0dXJuIHRydWU7IAogICAgICAgICAgICAgICAgICAgIHJldHVybiAoc3BlMSA9PSBtYXRpZXJlIHx8IHNwZTIgPT0gbWF0aWVyZSB8fCBbIlBoaWxvc29waGllIiwgIkZyYW7Dp2FpcyIsICJIaXN0b2lyZS1Hw6lvIiwgIkVuc2VpZ25lbWVudCBTY2llbnRpZmlxdWUiXS5pbmNsdWRlcyhtYXRpZXJlKSk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIGlmIChtZXRob2QgPT09ICdDTEFTUycpIHsKICAgICAgICAgICAgICAgICAgICBjYW5kaWRhdGVzLnNvcnQoKGEsIGIpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY0EgPSBub3JtQ2xhc3MoZ2V0VmFsdWUoYSwgWydDbGFzc2UnLCAnRGl2J10pKTsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY0IgPSBub3JtQ2xhc3MoZ2V0VmFsdWUoYiwgWydDbGFzc2UnLCAnRGl2J10pKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNBICE9PSBjQikgcmV0dXJuIGNBLmxvY2FsZUNvbXBhcmUoY0IpOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKGdldFZhbHVlKGEsWydOb20nXSl8fCcnKS5sb2NhbGVDb21wYXJlKGdldFZhbHVlKGIsWydOb20nXSl8fCcnKTsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgY2FuZGlkYXRlcy5zb3J0KChhLCBiKSA9PiAoZ2V0VmFsdWUoYSxbJ05vbSddKXx8JycpLmxvY2FsZUNvbXBhcmUoZ2V0VmFsdWUoYixbJ05vbSddKXx8JycpKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGNvbnN0IHR0U3R1ZGVudHMgPSBjYW5kaWRhdGVzLmZpbHRlcihlID0+IGlzVGllcnNUZW1wcyhnZXRWYWx1ZShlLCBbJ1RpZXJzIHRlbXBzJywgJ1RUJ10pKSk7CiAgICAgICAgICAgICAgICBjb25zdCByZWdTdHVkZW50cyA9IGNhbmRpZGF0ZXMuZmlsdGVyKGUgPT4gIWlzVGllcnNUZW1wcyhnZXRWYWx1ZShlLCBbJ1RpZXJzIHRlbXBzJywgJ1RUJ10pKSk7CiAgICAgICAgICAgICAgICBsZXQgcmVtYWluaW5nVFQgPSBbLi4udHRTdHVkZW50c107CiAgICAgICAgICAgICAgICBsZXQgcmVtYWluaW5nUmVnID0gWy4uLnJlZ1N0dWRlbnRzXTsKICAgICAgICAgICAgICAgIEFwcFN0YXRlLnNhbGxlcy5mb3JFYWNoKChzYWxsZSwgcm9vbUlkeCkgPT4gewogICAgICAgICAgICAgICAgICAgIGxldCByYXdOYW1lID0gZ2V0VmFsdWUoc2FsbGUsIFsnU2FsbGUnLCAnTm9tJ10pIHx8ICgnU2FsbGUgJyArIChyb29tSWR4ICsgMSkpOwogICAgICAgICAgICAgICAgICAgIGxldCBjbGVhbk5hbWUgPSByYXdOYW1lLnRvU3RyaW5nKCkucmVwbGFjZSgvXHMqXCg/VFRcKT9ccyokL2ksICcnKTsgCiAgICAgICAgICAgICAgICAgICAgY29uc3Qgcm9vbVR5cGUgPSBnZXRWYWx1ZShzYWxsZSwgWydUeXBlJ10pIHx8ICIiOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IHJvb21DYXAgPSBwYXJzZUludChnZXRWYWx1ZShzYWxsZSwgWydDYXBhY2l0w6knXSkpIHx8IDk5OyAKICAgICAgICAgICAgICAgICAgICBjb25zdCBpc1Jvb21UVCA9IGlzVGllcnNUZW1wcyhyb29tVHlwZSk7CiAgICAgICAgICAgICAgICAgICAgbGV0IGxpc3RUb1VzZTsKICAgICAgICAgICAgICAgICAgICBpZihpc1Jvb21UVCkgeyBsaXN0VG9Vc2UgPSByZW1haW5pbmdUVDsgfSBlbHNlIHsgbGlzdFRvVXNlID0gcmVtYWluaW5nUmVnOyB9CiAgICAgICAgICAgICAgICAgICAgbGV0IHJvb21TdHVkZW50cyA9IFtdOwogICAgICAgICAgICAgICAgICAgIGlmIChtZXRob2QgPT09ICdDTEFTUycpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGxpc3RUb1VzZS5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBmaXJzdFN0dWRlbnRDbGFzcyA9IG5vcm1DbGFzcyhnZXRWYWx1ZShsaXN0VG9Vc2VbMF0sIFsnQ2xhc3NlJywgJ0RpdiddKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgc2FtZUNsYXNzQ291bnQgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yKGxldCBrPTA7IGsgPCBsaXN0VG9Vc2UubGVuZ3RoOyBrKyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobm9ybUNsYXNzKGdldFZhbHVlKGxpc3RUb1VzZVtrXSwgWydDbGFzc2UnLCAnRGl2J10pKSA9PT0gZmlyc3RTdHVkZW50Q2xhc3MpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2FtZUNsYXNzQ291bnQrKzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhbW91bnRUb1Rha2UgPSBNYXRoLm1pbihyb29tQ2FwLCBzYW1lQ2xhc3NDb3VudCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByb29tU3R1ZGVudHMgPSBsaXN0VG9Vc2Uuc3BsaWNlKDAsIGFtb3VudFRvVGFrZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhbW91bnRUb1Rha2UgPSBNYXRoLm1pbihyb29tQ2FwLCBsaXN0VG9Vc2UubGVuZ3RoKTsKICAgICAgICAgICAgICAgICAgICAgICAgcm9vbVN0dWRlbnRzID0gbGlzdFRvVXNlLnNwbGljZSgwLCBhbW91bnRUb1Rha2UpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICByb29tU3R1ZGVudHMuc29ydCgoYSxiKSA9PiAoZ2V0VmFsdWUoYSxbJ05vbSddKXx8JycpLmxvY2FsZUNvbXBhcmUoZ2V0VmFsdWUoYixbJ05vbSddKXx8JycpKTsKICAgICAgICAgICAgICAgICAgICBleGFtU3RhdGUucm9vbXMucHVzaCh7IG5hbWU6IGNsZWFuTmFtZSwgY2FwYWNpdHk6IHJvb21DYXAsIGlzVFQ6IGlzUm9vbVRULCBzdXJ2ZWlsbGFudHM6IFtdLCBzdHVkZW50czogcm9vbVN0dWRlbnRzIH0pOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBleGFtU3RhdGUuc3RvcmFnZSA9IFsuLi5yZW1haW5pbmdUVCwgLi4ucmVtYWluaW5nUmVnXS5zb3J0KChhLGIpID0+IChnZXRWYWx1ZShhLFsnTm9tJ10pfHwnJykubG9jYWxlQ29tcGFyZShnZXRWYWx1ZShiLFsnTm9tJ10pfHwnJykpOyAKICAgICAgICAgICAgICAgIEFwcFN0YXRlLmRpc3RyaWJ1dGlvbkRhdGFbZXhhbUlkeF0gPSBleGFtU3RhdGU7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBpZiAoc2NvcGUgPT09ICdBTEwnKSBBcHBTdGF0ZS5jdXJyZW50RXhhbUluZGV4ID0gMDsKICAgICAgICAgICAgcmVuZGVyRXhhbU5hdmlnYXRpb24oKTsgCiAgICAgICAgICAgIHJlbmRlckN1cnJlbnRFeGFtKCk7IAogICAgICAgICAgICBwb3B1bGF0ZVBWRXhhbVNlbGVjdCgpOyAKICAgICAgICAgICAgcG9wdWxhdGVFbWFyZ2VtZW50RmlsdGVycygpOyAKICAgICAgICAgICAgcG9wdWxhdGVSZWNhcEZpbHRlcnMoKTsKICAgICAgICAgICAgcG9wdWxhdGVMYWJlbEZpbHRlcnMoKTsgCiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiByZW5kZXJFeGFtTmF2aWdhdGlvbigpIHsKICAgICAgICAgICAgY29uc3QgbmF2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2V4YW0tbmF2aWdhdGlvbicpOyBuYXYuc3R5bGUuZGlzcGxheSA9ICdmbGV4JzsKICAgICAgICAgICAgY29uc3Qgc2VsZWN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2V4YW0tZHJvcGRvd24nKTsgc2VsZWN0LmlubmVySFRNTCA9ICIiOwogICAgICAgICAgICBBcHBTdGF0ZS5kaXN0cmlidXRpb25EYXRhLmZvckVhY2goKGVkLCBpZHgpID0+IHsKICAgICAgICAgICAgICAgIGlmKCFlZCAmJiBBcHBTdGF0ZS5lcHJldXZlc1tpZHhdKSB7CiAgICAgICAgICAgICAgICAgICAgICBjb25zdCBleGFtSW5mbyA9IEFwcFN0YXRlLmVwcmV1dmVzW2lkeF07CiAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtYXRpZXJlID0gZ2V0VmFsdWUoZXhhbUluZm8sIFsnTWF0acOocmUnLCAnRXByZXV2ZScsICdOb20nXSkgfHwgKCfDiXByZXV2ZSAnICsgKGlkeCsxKSk7CiAgICAgICAgICAgICAgICAgICAgICBjb25zdCBvcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdvcHRpb24nKTsgb3B0LnZhbHVlID0gaWR4OyBvcHQudGV4dCA9IGAke2lkeCsxfS4gJHttYXRpZXJlfSAoTm9uIGNhbGN1bMOpKWA7CiAgICAgICAgICAgICAgICAgICAgICBzZWxlY3QuYXBwZW5kQ2hpbGQob3B0KTsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZihlZCkgewogICAgICAgICAgICAgICAgICAgIGNvbnN0IGV4YW1JbmZvID0gQXBwU3RhdGUuZXByZXV2ZXNbZWQuZXhhbUlkeF07CiAgICAgICAgICAgICAgICAgICAgY29uc3QgbWF0aWVyZSA9IGdldFZhbHVlKGV4YW1JbmZvLCBbJ01hdGnDqHJlJywgJ0VwcmV1dmUnLCAnTm9tJ10pIHx8ICgnw4lwcmV1dmUgJyArIChpZHgrMSkpOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IG9wdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ29wdGlvbicpOyBvcHQudmFsdWUgPSBpZHg7IG9wdC50ZXh0ID0gYCR7aWR4KzF9LiAke21hdGllcmV9YDsKICAgICAgICAgICAgICAgICAgICBpZihpZHggPT09IEFwcFN0YXRlLmN1cnJlbnRFeGFtSW5kZXgpIG9wdC5zZWxlY3RlZCA9IHRydWU7IHNlbGVjdC5hcHBlbmRDaGlsZChvcHQpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIHJlbmRlckN1cnJlbnRFeGFtKCkgeyAKICAgICAgICAgICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2N1cnJlbnQtZXhhbS1jb250YWluZXInKTsgY29udGFpbmVyLmlubmVySFRNTCA9ICIiOwogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZXhhbS1kcm9wZG93bicpLnZhbHVlID0gQXBwU3RhdGUuY3VycmVudEV4YW1JbmRleDsKICAgICAgICAgICAgY29uc3QgZXhhbVN0YXRlID0gQXBwU3RhdGUuZGlzdHJpYnV0aW9uRGF0YVtBcHBTdGF0ZS5jdXJyZW50RXhhbUluZGV4XTsgCiAgICAgICAgICAgIGlmICghZXhhbVN0YXRlKSB7CiAgICAgICAgICAgICAgICAgY29udGFpbmVyLmlubmVySFRNTCA9ICc8ZGl2IGNsYXNzPSJjYXJkIiBzdHlsZT0idGV4dC1hbGlnbjpjZW50ZXI7IGNvbG9yOiNjMDM5MmI7Ij5Sw6lwYXJ0aXRpb24gbm9uIGNhbGN1bMOpZSBwb3VyIGNldHRlIMOpcHJldXZlLjwvZGl2Pic7CiAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGNvbnN0IGV4YW1JbmZvID0gQXBwU3RhdGUuZXByZXV2ZXNbZXhhbVN0YXRlLmV4YW1JZHhdOwogICAgICAgICAgICBjb25zdCBtYXRpZXJlID0gZ2V0VmFsdWUoZXhhbUluZm8sIFsnTWF0acOocmUnLCAnRXByZXV2ZScsICdOb20nXSk7CiAgICAgICAgICAgIGNvbnN0IGJsb2NrSHRtbCA9IGA8ZGl2IGNsYXNzPSJleGFtLXNlY3Rpb24tYmxvY2siPjxkaXYgY2xhc3M9ImV4YW0tc2VjdGlvbi1oZWFkZXIiPjxzcGFuPiR7bWF0aWVyZX08L3NwYW4+PC9kaXY+PGg0IHN0eWxlPSJtYXJnaW46MTBweCAwIDVweCAwOyBjb2xvcjojN2Y4YzhkOyBmb250LXNpemU6MC45cmVtOyI+Wm9uZSBkZSBzdG9ja2FnZSAoTm9uIHBsYWPDqXMpPC9oND48ZGl2IGNsYXNzPSJzdG9yYWdlLXpvbmUiIG9uZHJvcD0iZHJvcChldmVudCkiIG9uZHJhZ292ZXI9ImFsbG93RHJvcChldmVudCkiPjwvZGl2PjxkaXYgY2xhc3M9InJvb21zLWdyaWQiPjwvZGl2PjwvZGl2PmA7CiAgICAgICAgICAgIGNvbnRhaW5lci5pbnNlcnRBZGphY2VudEhUTUwoJ2JlZm9yZWVuZCcsIGJsb2NrSHRtbCk7CiAgICAgICAgICAgIGNvbnN0IGJsb2NrID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5leGFtLXNlY3Rpb24tYmxvY2snKTsKICAgICAgICAgICAgY29uc3Qgc3RvcmFnZURpdiA9IGJsb2NrLnF1ZXJ5U2VsZWN0b3IoJy5zdG9yYWdlLXpvbmUnKTsKICAgICAgICAgICAgZXhhbVN0YXRlLnN0b3JhZ2UuZm9yRWFjaChzID0+IGNyZWF0ZVN0dWRlbnRFbGVtZW50KHMsIHN0b3JhZ2VEaXYpKTsKICAgICAgICAgICAgY29uc3Qgcm9vbXNHcmlkID0gYmxvY2sucXVlcnlTZWxlY3RvcignLnJvb21zLWdyaWQnKTsKICAgICAgICAgICAgZXhhbVN0YXRlLnJvb21zLmZvckVhY2goKHJvb21TdGF0ZSwgcklkeCkgPT4gewogICAgICAgICAgICAgICAgY29uc3QgdW5pcXVlSWQgPSBgcm9vbS0ke3JJZHh9YCwgc3VydkNvbnRhaW5lcklkID0gYHN1cnYtJHtySWR4fWA7CiAgICAgICAgICAgICAgICBjb25zdCB0dENsYXNzID0gcm9vbVN0YXRlLmlzVFQgPyAicm9vbS10dCIgOiAiIjsKICAgICAgICAgICAgICAgIGxldCBzdXJ2SHRtbCA9ICIiOwogICAgICAgICAgICAgICAgaWYocm9vbVN0YXRlLnN1cnZlaWxsYW50cyAmJiByb29tU3RhdGUuc3VydmVpbGxhbnRzLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICAgICAgICByb29tU3RhdGUuc3VydmVpbGxhbnRzLmZvckVhY2goKHN1cnZPYmosIGlkeFMpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHNOYW1lID0gKHR5cGVvZiBzdXJ2T2JqID09PSAnc3RyaW5nJykgPyBzdXJ2T2JqIDogc3Vydk9iai5uYW1lOwogICAgICAgICAgICAgICAgICAgICAgICBsZXQgc1RpbWUgPSAodHlwZW9mIHN1cnZPYmogPT09ICdvYmplY3QnICYmIHN1cnZPYmoudGltZSkgPyBzdXJ2T2JqLnRpbWUgOiAiIjsKICAgICAgICAgICAgICAgICAgICAgICAgc3Vydkh0bWwgKz0gY3JlYXRlU3VydmVpbGxhbnRSb3coc05hbWUsIHNUaW1lKTsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgc3Vydkh0bWwgPSBjcmVhdGVTdXJ2ZWlsbGFudFJvdygiIiwgIiIpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY29uc3Qgcm9vbUh0bWwgPSBgCiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0icm9vbS1jYXJkICR7dHRDbGFzc30iPgogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJyb29tLWhlYWRlciI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3Bhbj4ke3Jvb21TdGF0ZS5uYW1lfSAke3Jvb21TdGF0ZS5pc1RUPycoVFQpJzonJ308L3NwYW4+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJkaXNwbGF5OmZsZXg7IGFsaWduLWl0ZW1zOmNlbnRlcjsgZ2FwOjEwcHg7Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3Bhbj4ke3Jvb21TdGF0ZS5zdHVkZW50cy5sZW5ndGh9LyR7cm9vbVN0YXRlLmNhcGFjaXR5fTwvc3Bhbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIG9uY2xpY2s9ImNsZWFyUm9vbSgke3JJZHh9KSIgc3R5bGU9ImJhY2tncm91bmQ6d2hpdGU7IGJvcmRlcjpub25lOyBjb2xvcjojYzAzOTJiOyBjdXJzb3I6cG9pbnRlcjsgcGFkZGluZzoycHggNnB4OyBib3JkZXItcmFkaXVzOjRweDsiIHRpdGxlPSJWaWRlciBsYSBzYWxsZSI+PGkgY2xhc3M9ImZhLXNvbGlkIGZhLXRyYXNoIj48L2k+PC9idXR0b24+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InJvb20tc3VydmVpbGxhbnRzLWFyZWEiIGlkPSIke3N1cnZDb250YWluZXJJZH0iPiR7c3Vydkh0bWx9PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImJ0bi1hZGQtc3VydiIgb25jbGljaz0iYWRkU3VydmVpbGxhbnRGaWVsZCgnJHtzdXJ2Q29udGFpbmVySWR9JykiPkFqb3V0ZXI8L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0icm9vbS1ib2R5IiBpZD0iJHt1bmlxdWVJZH0iIG9uZHJvcD0iZHJvcChldmVudCkiIG9uZHJhZ292ZXI9ImFsbG93RHJvcChldmVudCkiIGRhdGEtY2FwYWNpdHk9IiR7cm9vbVN0YXRlLmNhcGFjaXR5fSIgZGF0YS1pcy10dD0iJHtyb29tU3RhdGUuaXNUVH0iPjwvZGl2PgogICAgICAgICAgICAgICAgICAgIDwvZGl2PmA7CiAgICAgICAgICAgICAgICByb29tc0dyaWQuaW5zZXJ0QWRqYWNlbnRIVE1MKCdiZWZvcmVlbmQnLCByb29tSHRtbCk7CiAgICAgICAgICAgICAgICBjb25zdCBib2R5RGl2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodW5pcXVlSWQpOwogICAgICAgICAgICAgICAgcm9vbVN0YXRlLnN0dWRlbnRzLmZvckVhY2gocyA9PiBjcmVhdGVTdHVkZW50RWxlbWVudChzLCBib2R5RGl2KSk7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gY3JlYXRlU3R1ZGVudEVsZW1lbnQoZGF0YSwgcGFyZW50KSB7IGNvbnN0IGVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7IGVsLmNsYXNzTmFtZSA9ICdzdHVkZW50LWl0ZW0nOyBlbC5kYXRhc2V0LmluZm8gPSBKU09OLnN0cmluZ2lmeShkYXRhKTsgaWYoaXNUaWVyc1RlbXBzKGdldFZhbHVlKGRhdGEsWydUaWVycyB0ZW1wcycsJ1RUJ10pKSkgZWwuY2xhc3NMaXN0LmFkZCgnaXMtdHQnKTsgY29uc3QgZnVsbE5hbWUgPSBnZXRWYWx1ZShkYXRhLFsnTm9tJ10pICsgIiAiICsgZ2V0VmFsdWUoZGF0YSxbJ1Byw6lub20nXSk7IGVsLmlubmVySFRNTCA9IGA8c3Bhbj4ke2Z1bGxOYW1lfSAoJHtnZXRWYWx1ZShkYXRhLFsnQ2xhc3NlJ10pfSk8L3NwYW4+YDsgZWwuc2V0QXR0cmlidXRlKCdkYXRhLXNvcnQnLCBmdWxsTmFtZS50b1VwcGVyQ2FzZSgpKTsgZWwuZHJhZ2dhYmxlID0gdHJ1ZTsgZWwuaWQgPSAicy0iK01hdGgucmFuZG9tKCk7IGVsLm9uZHJhZ3N0YXJ0ID0gZHJhZzsgcGFyZW50LmFwcGVuZENoaWxkKGVsKTsgfQogICAgICAgIAogICAgICAgIGZ1bmN0aW9uIHN3aXRjaFRhYihlbGVtZW50LCB0YWJJZCkgeyAKICAgICAgICAgICAgaWYoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ZpZXczJykuY2xhc3NMaXN0LmNvbnRhaW5zKCdhY3RpdmUnKSAmJiBBcHBTdGF0ZS5kaXN0cmlidXRpb25EYXRhLmxlbmd0aD4wKSB7CiAgICAgICAgICAgICAgICB0cnkgeyB1cGRhdGVDdXJyZW50RXhhbVN0YXRlKCk7IH0gY2F0Y2goZSkgeyBjb25zb2xlLndhcm4oIlNhdmUgc3RhdGUgZmFpbGVkIiwgZSk7IH0KICAgICAgICAgICAgfQogICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuc3RlcC1idG4nKS5mb3JFYWNoKGJ0biA9PiBidG4uY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJykpOyAKICAgICAgICAgICAgZWxlbWVudC5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTsgCiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5zZWN0aW9uLXZpZXcnKS5mb3JFYWNoKHZpZXcgPT4gdmlldy5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKSk7IAogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0YWJJZCkuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7IAogICAgICAgICAgICBpZih0YWJJZD09PSd2aWV3NCcpIHBvcHVsYXRlQ2xhc3NGaWx0ZXIoKTsgCiAgICAgICAgICAgIGlmKHRhYklkPT09J3ZpZXc1JykgcG9wdWxhdGVTdXJ2ZWlsbGFudEZpbHRlcigpOyAKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGp1bXBUb0V4YW0oaWR4KSB7IHVwZGF0ZUN1cnJlbnRFeGFtU3RhdGUoKTsgQXBwU3RhdGUuY3VycmVudEV4YW1JbmRleCA9IHBhcnNlSW50KGlkeCk7IHJlbmRlckN1cnJlbnRFeGFtKCk7IH0KICAgICAgICBmdW5jdGlvbiBwcmV2RXhhbSgpIHsgaWYoQXBwU3RhdGUuY3VycmVudEV4YW1JbmRleD4wKSB7IHVwZGF0ZUN1cnJlbnRFeGFtU3RhdGUoKTsgQXBwU3RhdGUuY3VycmVudEV4YW1JbmRleC0tOyByZW5kZXJDdXJyZW50RXhhbSgpOyB9IH0KICAgICAgICBmdW5jdGlvbiBuZXh0RXhhbSgpIHsgaWYoQXBwU3RhdGUuY3VycmVudEV4YW1JbmRleDxBcHBTdGF0ZS5kaXN0cmlidXRpb25EYXRhLmxlbmd0aC0xKSB7IHVwZGF0ZUN1cnJlbnRFeGFtU3RhdGUoKTsgQXBwU3RhdGUuY3VycmVudEV4YW1JbmRleCsrOyByZW5kZXJDdXJyZW50RXhhbSgpOyB9IH0KICAgICAgICAKICAgICAgICBmdW5jdGlvbiB1cGRhdGVDdXJyZW50RXhhbVN0YXRlKCkgeyAKICAgICAgICAgICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2N1cnJlbnQtZXhhbS1jb250YWluZXInKTsgCiAgICAgICAgICAgIGNvbnN0IGJsb2NrID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5leGFtLXNlY3Rpb24tYmxvY2snKTsgCiAgICAgICAgICAgIGlmKCFibG9jaykgcmV0dXJuOyAKICAgICAgICAgICAgY29uc3QgZXhhbVN0YXRlID0gQXBwU3RhdGUuZGlzdHJpYnV0aW9uRGF0YVtBcHBTdGF0ZS5jdXJyZW50RXhhbUluZGV4XTsgCiAgICAgICAgICAgIGlmKCFleGFtU3RhdGUpIHJldHVybjsgCiAgICAgICAgICAgIGNvbnN0IHN0b3JhZ2VEaXYgPSBibG9jay5xdWVyeVNlbGVjdG9yKCcuc3RvcmFnZS16b25lJyk7IAogICAgICAgICAgICBleGFtU3RhdGUuc3RvcmFnZSA9IEFycmF5LmZyb20oc3RvcmFnZURpdi5jaGlsZHJlbikubWFwKGNoaWxkID0+IEpTT04ucGFyc2UoY2hpbGQuZGF0YXNldC5pbmZvKSk7IAogICAgICAgICAgICBjb25zdCByb29tQ2FyZHMgPSBibG9jay5xdWVyeVNlbGVjdG9yQWxsKCcucm9vbS1jYXJkJyk7IAogICAgICAgICAgICBleGFtU3RhdGUucm9vbXMgPSBbXTsgCiAgICAgICAgICAgIHJvb21DYXJkcy5mb3JFYWNoKGNhcmQgPT4geyAKICAgICAgICAgICAgICAgIGNvbnN0IGJvZHkgPSBjYXJkLnF1ZXJ5U2VsZWN0b3IoJy5yb29tLWJvZHknKTsgCiAgICAgICAgICAgICAgICBjb25zdCBjYXAgPSBib2R5LmdldEF0dHJpYnV0ZSgnZGF0YS1jYXBhY2l0eScpOyAKICAgICAgICAgICAgICAgIGNvbnN0IGlzVFQgPSBib2R5LmdldEF0dHJpYnV0ZSgnZGF0YS1pcy10dCcpID09PSAndHJ1ZSc7IAogICAgICAgICAgICAgICAgY29uc3Qgcm9vbU5hbWUgPSBjYXJkLnF1ZXJ5U2VsZWN0b3IoJy5yb29tLWhlYWRlciBzcGFuJykudGV4dENvbnRlbnQucmVwbGFjZSgnKFRUKScsJycpLnRyaW0oKTsgCiAgICAgICAgICAgICAgICBjb25zdCBzdXJ2Um93cyA9IEFycmF5LmZyb20oY2FyZC5xdWVyeVNlbGVjdG9yQWxsKCcuc3VydmVpbGxhbnQtcm93JykpOwogICAgICAgICAgICAgICAgY29uc3Qgc3VydkRhdGEgPSBzdXJ2Um93cy5tYXAocm93ID0+IHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiByb3cucXVlcnlTZWxlY3Rvcignc2VsZWN0JykudmFsdWUsCiAgICAgICAgICAgICAgICAgICAgICAgIHRpbWU6IHJvdy5xdWVyeVNlbGVjdG9yKCdpbnB1dC50aW1lLWlucHV0JykudmFsdWUKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBjb25zdCBzdHVkZW50cyA9IEFycmF5LmZyb20oYm9keS5jaGlsZHJlbikubWFwKHMgPT4gSlNPTi5wYXJzZShzLmRhdGFzZXQuaW5mbykpOyAKICAgICAgICAgICAgICAgIGV4YW1TdGF0ZS5yb29tcy5wdXNoKHsgbmFtZTogcm9vbU5hbWUsIGNhcGFjaXR5OiBjYXAsIGlzVFQ6IGlzVFQsIHN1cnZlaWxsYW50czogc3VydkRhdGEsIHN0dWRlbnRzOiBzdHVkZW50cyB9KTsgCiAgICAgICAgICAgIH0pOyAKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgZnVuY3Rpb24gZHJhZyhldikgeyBldi5kYXRhVHJhbnNmZXIuc2V0RGF0YSgidGV4dCIsIGV2LnRhcmdldC5pZCk7IH0KICAgICAgICAKICAgICAgICAvLyAtLS0gR0VTVElPTiBEVSBERUZJTEVNRU5UIEFVVE8gKE9QVElNSVPDiUUgVklURVNTRSkgLS0tCiAgICAgICAgbGV0IHNjcm9sbEludGVydmFsOwogICAgICAgIGNvbnN0IG1haW5Db250ZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1haW4tY29udGVudCcpOwogICAgICAgIGNvbnN0IHNjcm9sbFRocmVzaG9sZCA9IDEwMDsKCiAgICAgICAgZnVuY3Rpb24gc3RvcEF1dG9TY3JvbGwoKSB7CiAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwoc2Nyb2xsSW50ZXJ2YWwpOwogICAgICAgICAgICBzY3JvbGxJbnRlcnZhbCA9IG51bGw7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBoYW5kbGVBdXRvU2Nyb2xsKGUpIHsKICAgICAgICAgICAgY29uc3QgcmVjdCA9IG1haW5Db250ZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOwogICAgICAgICAgICBjb25zdCBtb3VzZVkgPSBlLmNsaWVudFk7CiAgICAgICAgICAgIGNvbnN0IGRpc3RUb3AgPSBtb3VzZVkgLSByZWN0LnRvcDsKICAgICAgICAgICAgY29uc3QgZGlzdEJvdHRvbSA9IHJlY3QuYm90dG9tIC0gbW91c2VZOwoKICAgICAgICAgICAgc3RvcEF1dG9TY3JvbGwoKTsKCiAgICAgICAgICAgIC8vIFNpIHN1cnZvbCBkJ3VuZSB6b25lIHNjcm9sbGFibGUgKHJvb21zLWdyaWQpIG91IHN0b3JhZ2UKICAgICAgICAgICAgaWYgKGUudGFyZ2V0LmNsb3Nlc3QoJy5yb29tcy1ncmlkJykgfHwgZS50YXJnZXQuY2xvc2VzdCgnLnN0b3JhZ2Utem9uZScpKSB7CiAgICAgICAgICAgICAgICBpZiAoZGlzdFRvcCA8IHNjcm9sbFRocmVzaG9sZCB8fCBkaXN0Qm90dG9tIDwgc2Nyb2xsVGhyZXNob2xkKSB7CiAgICAgICAgICAgICAgICAgICAgc2Nyb2xsSW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCgoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBzcGVlZCA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkaXN0VG9wIDwgc2Nyb2xsVGhyZXNob2xkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBQbHVzIHByb2NoZSBkdSBoYXV0ID0gUGx1cyByYXBpZGUgKHZpdGVzc2UgZXhwb25lbnRpZWxsZSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNwZWVkID0gLU1hdGgucG93KChzY3JvbGxUaHJlc2hvbGQgLSBkaXN0VG9wKSAvIDEwLCAyKSAtIDU7CiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZGlzdEJvdHRvbSA8IHNjcm9sbFRocmVzaG9sZCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gUGx1cyBwcm9jaGUgZHUgYmFzID0gUGx1cyByYXBpZGUKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNwZWVkID0gTWF0aC5wb3coKHNjcm9sbFRocmVzaG9sZCAtIGRpc3RCb3R0b20pIC8gMTAsIDIpICsgNTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBtYWluQ29udGVudC5zY3JvbGxUb3AgKz0gc3BlZWQ7CiAgICAgICAgICAgICAgICAgICAgfSwgMTYpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBkcm9wKGV2KSB7IAogICAgICAgICAgICBldi5wcmV2ZW50RGVmYXVsdCgpOyAKICAgICAgICAgICAgc3RvcEF1dG9TY3JvbGwoKTsKICAgICAgICAgICAgdmFyIGRhdGEgPSBldi5kYXRhVHJhbnNmZXIuZ2V0RGF0YSgidGV4dCIpOyAKICAgICAgICAgICAgdmFyIGRyYWdnZWRFbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGRhdGEpOyAKICAgICAgICAgICAgbGV0IHRhcmdldCA9IGV2LnRhcmdldDsgCiAgICAgICAgICAgIHdoaWxlKHRhcmdldCAmJiAhdGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygncm9vbS1ib2R5JykgJiYgIXRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3N0b3JhZ2Utem9uZScpKSB0YXJnZXQgPSB0YXJnZXQucGFyZW50RWxlbWVudDsgCiAgICAgICAgICAgIGlmKHRhcmdldCkgeyAKICAgICAgICAgICAgICAgIGlmKHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3Jvb20tYm9keScpKSB7IAogICAgICAgICAgICAgICAgICAgIGNvbnN0IGNhcCA9IHBhcnNlSW50KHRhcmdldC5nZXRBdHRyaWJ1dGUoJ2RhdGEtY2FwYWNpdHknKSk7IAogICAgICAgICAgICAgICAgICAgIGlmKHRhcmdldC5jaGlsZHJlbi5sZW5ndGggPj0gY2FwKSB7IGFsZXJ0KCJQbGVpbiAhIik7IHJldHVybjsgfSAKICAgICAgICAgICAgICAgIH0gCiAgICAgICAgICAgICAgICB0YXJnZXQuYXBwZW5kQ2hpbGQoZHJhZ2dlZEVsKTsgCiAgICAgICAgICAgICAgICBzb3J0Q29udGFpbmVyKHRhcmdldCk7CiAgICAgICAgICAgICAgICB1cGRhdGVDdXJyZW50RXhhbVN0YXRlKCk7CiAgICAgICAgICAgICAgICB1cGRhdGVSZWFsVGltZUNvdW50ZXJzKCk7CiAgICAgICAgICAgIH0gCiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBhbGxvd0Ryb3AoZXYpIHsgCiAgICAgICAgICAgIGV2LnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgICAgIGV2LnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpOyAvLyBQcsOpdmVudGlvbiBkZXMgY29uZmxpdHMgZGUgc8OpbGVjdGlvbgogICAgICAgICAgICBoYW5kbGVBdXRvU2Nyb2xsKGV2KTsKICAgICAgICB9CgogICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdlbmQnLCBzdG9wQXV0b1Njcm9sbCk7CiAgICAgICAgCiAgICAgICAgZnVuY3Rpb24gc29ydENvbnRhaW5lcihjb250YWluZXIpIHsgCiAgICAgICAgICAgIGNvbnN0IGl0ZW1zID0gQXJyYXkuZnJvbShjb250YWluZXIuY2hpbGRyZW4pOyAKICAgICAgICAgICAgaXRlbXMuc29ydCgoYSwgYikgPT4geyAKICAgICAgICAgICAgICAgIGNvbnN0IG5hbWVBID0gYS5nZXRBdHRyaWJ1dGUoJ2RhdGEtc29ydCcpIHx8ICIiOyAKICAgICAgICAgICAgICAgIGNvbnN0IG5hbWVCID0gYi5nZXRBdHRyaWJ1dGUoJ2RhdGEtc29ydCcpIHx8ICIiOyAKICAgICAgICAgICAgICAgIHJldHVybiBuYW1lQS5sb2NhbGVDb21wYXJlKG5hbWVCKTsgCiAgICAgICAgICAgIH0pOyAKICAgICAgICAgICAgaXRlbXMuZm9yRWFjaChpdGVtID0+IGNvbnRhaW5lci5hcHBlbmRDaGlsZChpdGVtKSk7IAogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gY2xlYXJSb29tKHJJZHgpIHsKICAgICAgICAgICAgaWYoIWNvbmZpcm0oIlZvdWxlei12b3VzIHZyYWltZW50IHZpZGVyIHRvdXRlIGNldHRlIHNhbGxlID8iKSkgcmV0dXJuOwogICAgICAgICAgICB1cGRhdGVDdXJyZW50RXhhbVN0YXRlKCk7CiAgICAgICAgICAgIGNvbnN0IGV4YW1EYXRhID0gQXBwU3RhdGUuZGlzdHJpYnV0aW9uRGF0YVtBcHBTdGF0ZS5jdXJyZW50RXhhbUluZGV4XTsKICAgICAgICAgICAgY29uc3Qgcm9vbSA9IGV4YW1EYXRhLnJvb21zW3JJZHhdOwogICAgICAgICAgICBpZihyb29tLnN0dWRlbnRzLmxlbmd0aCA9PT0gMCkgcmV0dXJuOwogICAgICAgICAgICBleGFtRGF0YS5zdG9yYWdlLnB1c2goLi4ucm9vbS5zdHVkZW50cyk7CiAgICAgICAgICAgIHJvb20uc3R1ZGVudHMgPSBbXTsKICAgICAgICAgICAgZXhhbURhdGEuc3RvcmFnZS5zb3J0KChhLGIpID0+IChnZXRWYWx1ZShhLFsnTm9tJ10pfHwnJykubG9jYWxlQ29tcGFyZShnZXRWYWx1ZShiLFsnTm9tJ10pfHwnJykpOwogICAgICAgICAgICByZW5kZXJDdXJyZW50RXhhbSgpOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gZ2V0U3VydmVpbGxhbnRPcHRpb25zKHNlbGVjdGVkPSIiKSB7IGlmKCFBcHBTdGF0ZS5zdXJ2ZWlsbGFudHMpIHJldHVybiAiIjsgbGV0IG9wdHMgPSAnPG9wdGlvbiB2YWx1ZT0iIj4tLSBTdXJ2IC0tPC9vcHRpb24+JzsgQXBwU3RhdGUuc3VydmVpbGxhbnRzLmZvckVhY2gocyA9PiB7IGNvbnN0IHZhbCA9IGdldFZhbHVlKHMsWydOb20nXSkgKyAnICcgKyBnZXRWYWx1ZShzLFsnUHLDqW5vbSddKTsgb3B0cyArPSBgPG9wdGlvbiB2YWx1ZT0iJHt2YWx9IiAkeyh2YWw9PT1zZWxlY3RlZCk/J3NlbGVjdGVkJzonJ30+JHt2YWx9PC9vcHRpb24+YDsgfSk7IHJldHVybiBvcHRzOyB9CiAgICAgICAgCiAgICAgICAgZnVuY3Rpb24gY3JlYXRlU3VydmVpbGxhbnRSb3coc2VsZWN0ZWROYW1lLCB0aW1lVmFsKSB7CiAgICAgICAgICAgIHJldHVybiBgPGRpdiBjbGFzcz0ic3VydmVpbGxhbnQtcm93Ij4KICAgICAgICAgICAgICAgICAgICAgICAgPHNlbGVjdCBvbmNoYW5nZT0idXBkYXRlQ3VycmVudEV4YW1TdGF0ZSgpIj4ke2dldFN1cnZlaWxsYW50T3B0aW9ucyhzZWxlY3RlZE5hbWUpfTwvc2VsZWN0PgogICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0idGV4dCIgY2xhc3M9InRpbWUtaW5wdXQiIHBsYWNlaG9sZGVyPSJIb3JhaXJlIChleDogMTBoMDAgw6AgMTFoMDApIiB2YWx1ZT0iJHt0aW1lVmFsIHx8ICcnfSIgb25jaGFuZ2U9InVwZGF0ZUN1cnJlbnRFeGFtU3RhdGUoKSI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImJ0bi1kZWwtc3VydiIgb25jbGljaz0idGhpcy5wYXJlbnRFbGVtZW50LnJlbW92ZSgpOyB1cGRhdGVDdXJyZW50RXhhbVN0YXRlKCk7Ij48aSBjbGFzcz0iZmEtc29saWQgZmEteG1hcmsiPjwvaT48L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICA8L2Rpdj5gOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gYWRkU3VydmVpbGxhbnRGaWVsZChpZCkgeyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCkuaW5zZXJ0QWRqYWNlbnRIVE1MKCdiZWZvcmVlbmQnLCBjcmVhdGVTdXJ2ZWlsbGFudFJvdygiIiwgIiIpKTsgfQogICAgICAgIAogICAgICAgIGZ1bmN0aW9uIGhhbmRsZUltYWdlKGlucHV0LCBwcmV2aWV3SWQpIHsgY29uc3QgZmlsZSA9IGlucHV0LmZpbGVzWzBdOyBpZiAoIWZpbGUpIHJldHVybjsgY29uc3QgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTsgcmVhZGVyLm9ubG9hZCA9IGZ1bmN0aW9uKGUpIHsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQocHJldmlld0lkKS5zcmMgPSBlLnRhcmdldC5yZXN1bHQ7IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHByZXZpZXdJZCkuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7IGlmKHByZXZpZXdJZCA9PT0gJ2xvZ29QcmV2aWV3JykgQXBwU3RhdGUuY29uZmlnLmxvZ29TcmMgPSBlLnRhcmdldC5yZXN1bHQ7IGlmKHByZXZpZXdJZCA9PT0gJ3NpZ25QcmV2aWV3JykgQXBwU3RhdGUuY29uZmlnLnNpZ25TcmMgPSBlLnRhcmdldC5yZXN1bHQ7IH07IHJlYWRlci5yZWFkQXNEYXRhVVJMKGZpbGUpOyB9CiAgICAgICAgZnVuY3Rpb24gcG9wdWxhdGVDbGFzc0ZpbHRlcigpeyBjb25zdCBzPWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb252b2MtY2xhc3MtZmlsdGVyJyk7IHMuaW5uZXJIVE1MPSc8b3B0aW9uIHZhbHVlPSJBTEwiPlRvdXRlczwvb3B0aW9uPic7IGNvbnN0IGNsPW5ldyBTZXQoKTsgQXBwU3RhdGUuZWxldmVzLmZvckVhY2goZT0+e2NvbnN0IGM9Z2V0VmFsdWUoZSxbJ0NsYXNzZScsJ0RpdiddKTsgaWYoYykgY2wuYWRkKGMpfSk7IEFycmF5LmZyb20oY2wpLnNvcnQoKS5mb3JFYWNoKGM9PnMuYWRkKG5ldyBPcHRpb24oYyxjKSkpOyBwb3B1bGF0ZVNlbGVjdEZyb21TZXQoJ3B2LWNsYXNzLWZpbHRlcicsIGNsKTsgfQogICAgICAgIGZ1bmN0aW9uIHBvcHVsYXRlU2VsZWN0RnJvbVNldChpZCwgc2V0KSB7IGNvbnN0IHM9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpOyBpZighcykgcmV0dXJuOyBzLmlubmVySFRNTD0nPG9wdGlvbiB2YWx1ZT0iQUxMIj5Ub3V0ZXM8L29wdGlvbj4nOyBBcnJheS5mcm9tKHNldCkuc29ydCgpLmZvckVhY2goYz0+cy5hZGQobmV3IE9wdGlvbihjLGMpKSk7IH0KICAgICAgICBmdW5jdGlvbiBwb3B1bGF0ZVN1cnZlaWxsYW50RmlsdGVyKCl7IGNvbnN0IHM9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbnZvYy1zdXJ2LWZpbHRlcicpOyBzLmlubmVySFRNTD0nPG9wdGlvbiB2YWx1ZT0iQUxMIj5Ub3VzPC9vcHRpb24+JzsgaWYoIUFwcFN0YXRlLnN1cnZlaWxsYW50cykgcmV0dXJuOyBBcHBTdGF0ZS5zdXJ2ZWlsbGFudHMuZm9yRWFjaChzdT0+e2NvbnN0IG49Z2V0VmFsdWUoc3UsWydOb20nXSkrJyAnK2dldFZhbHVlKHN1LFsnUHLDqW5vbSddKTsgcy5hZGQobmV3IE9wdGlvbihuLG4pKX0pOyB9CiAgICAgICAgZnVuY3Rpb24gc2F2ZVBvY2hldHRlVGV4dCh0eXBlLCB2YWwpIHsgaWYoIUFwcFN0YXRlLnBvY2hldHRlVGV4dCkgQXBwU3RhdGUucG9jaGV0dGVUZXh0ID0ge307IEFwcFN0YXRlLnBvY2hldHRlVGV4dFt0eXBlXSA9IHZhbDsgfQogICAgICAgIGZ1bmN0aW9uIHBvcHVsYXRlUFZFeGFtU2VsZWN0KCkgeyBjb25zdCBzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3B2LWV4YW0tc2VsZWN0Jyk7IHMuaW5uZXJIVE1MID0gJzxvcHRpb24gdmFsdWU9IkFMTCI+VE9VVCBJTVBSSU1FUjwvb3B0aW9uPic7IEFwcFN0YXRlLmRpc3RyaWJ1dGlvbkRhdGEuZm9yRWFjaCgoZCwgaSkgPT4geyBpZighZCkgcmV0dXJuOyBjb25zdCBleGFtID0gQXBwU3RhdGUuZXByZXV2ZXNbZC5leGFtSWR4XTsgcy5hZGQobmV3IE9wdGlvbihnZXRWYWx1ZShleGFtLCBbJ01hdGnDqHJlJywgJ0VwcmV1dmUnXSksIGkpKTsgfSk7IHMub25jaGFuZ2UoKTsgfQogICAgICAgIAogICAgICAgIGZ1bmN0aW9uIHVwZGF0ZVBWUm9vbVNlbGVjdCgpIHsgCiAgICAgICAgICAgIGNvbnN0IGV4YW1JZHggPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHYtZXhhbS1zZWxlY3QnKS52YWx1ZTsgCiAgICAgICAgICAgIGNvbnN0IHMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHYtcm9vbS1zZWxlY3QnKTsgCiAgICAgICAgICAgIHMuaW5uZXJIVE1MID0gJzxvcHRpb24gdmFsdWU9IkFMTCI+VE9VVEVTIExFUyBTQUxMRVMgVVRJTElTw4lFUzwvb3B0aW9uPic7IAogICAgICAgICAgICBpZihleGFtSWR4ID09PSAiQUxMIikgeyAKICAgICAgICAgICAgICAgIHMuZGlzYWJsZWQgPSB0cnVlOyByZXR1cm47IAogICAgICAgICAgICB9IGVsc2UgeyAKICAgICAgICAgICAgICAgIHMuZGlzYWJsZWQgPSBmYWxzZTsgCiAgICAgICAgICAgIH0gCiAgICAgICAgICAgIGNvbnN0IGRpc3QgPSBBcHBTdGF0ZS5kaXN0cmlidXRpb25EYXRhW2V4YW1JZHhdOyAKICAgICAgICAgICAgaWYoZGlzdCkgewogICAgICAgICAgICAgICAgZGlzdC5yb29tcy5mb3JFYWNoKChyLCBpKSA9PiB7IAogICAgICAgICAgICAgICAgICAgIGlmKHIuc3R1ZGVudHMubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgICAgICAgICAgICBzLmFkZChuZXcgT3B0aW9uKHIubmFtZSwgaSkpOyAKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsgCiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgCiAgICAgICAgZnVuY3Rpb24gcG9wdWxhdGVFbWFyZ2VtZW50RmlsdGVycygpIHsgCiAgICAgICAgICAgIGNvbnN0IHMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZW1hcmdlbWVudC1yb29tLWZpbHRlcicpOyAKICAgICAgICAgICAgcy5pbm5lckhUTUwgPSAnPG9wdGlvbiB2YWx1ZT0iQUxMIj5Ub3V0ZXMgbGVzIHNhbGxlcyB1dGlsaXPDqWVzPC9vcHRpb24+JzsgCiAgICAgICAgICAgIGxldCB1c2VkUm9vbXMgPSBuZXcgU2V0KCk7IAogICAgICAgICAgICBBcHBTdGF0ZS5kaXN0cmlidXRpb25EYXRhLmZvckVhY2goZCA9PiB7CiAgICAgICAgICAgICAgICBpZihkICYmIGQucm9vbXMpIHsKICAgICAgICAgICAgICAgICAgICBkLnJvb21zLmZvckVhY2gociA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHIuc3R1ZGVudHMubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlZFJvb21zLmFkZChyLm5hbWUpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBBcnJheS5mcm9tKHVzZWRSb29tcykuc29ydCgpLmZvckVhY2gociA9PiBzLmFkZChuZXcgT3B0aW9uKHIsIHIpKSk7IAogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gcHJpbnRFbWFyZ2VtZW50KCkgeyBnZW5lcmF0ZUxpc3REb2MoJ2VtYXJnZW1lbnQnKTsgfQogICAgICAgIGZ1bmN0aW9uIHByaW50RGlzcGxheUxpc3QoKSB7IGdlbmVyYXRlTGlzdERvYygnZGlzcGxheScpOyB9CiAgICAgICAgCiAgICAgICAgZnVuY3Rpb24gZ2VuZXJhdGVMaXN0RG9jKHR5cGUpIHsKICAgICAgICAgICAgaWYoIUFwcFN0YXRlLmRpc3RyaWJ1dGlvbkRhdGEubGVuZ3RoKSByZXR1cm4gYWxlcnQoIlLDqXBhcnRpdGlvbiBtYW5xdWFudGUiKTsKICAgICAgICAgICAgY29uc3Qgcm9vbUZpbHRlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlbWFyZ2VtZW50LXJvb20tZmlsdGVyJykudmFsdWU7CiAgICAgICAgICAgIGNvbnN0IGxvZ28gPSBBcHBTdGF0ZS5jb25maWcubG9nb1NyYyB8fCAiIjsKICAgICAgICAgICAgY29uc3QgdGl0bGUgPSB0eXBlID09PSAnZW1hcmdlbWVudCcgPyAiTElTVEUgRCfDiU1BUkdFTUVOVCIgOiAiTElTVEUgRCdBRkZJQ0hBR0UgLSBDQU5ESURBVFMiOwogICAgICAgICAgICBsZXQgZnVsbEh0bWwgPSAiIjsKICAgICAgICAgICAgQXBwU3RhdGUuZGlzdHJpYnV0aW9uRGF0YS5mb3JFYWNoKGV4YW1EYXRhID0+IHsKICAgICAgICAgICAgICAgIGlmKCFleGFtRGF0YSkgcmV0dXJuOwogICAgICAgICAgICAgICAgY29uc3QgZXhhbUluZm8gPSBBcHBTdGF0ZS5lcHJldXZlc1tleGFtRGF0YS5leGFtSWR4XTsKICAgICAgICAgICAgICAgIGNvbnN0IGRhdGVTdHIgPSBmb3JtYXREYXRlKGdldFZhbHVlKGV4YW1JbmZvLFsnRGF0ZSddKSk7CiAgICAgICAgICAgICAgICBleGFtRGF0YS5yb29tcy5mb3JFYWNoKHJvb21EYXRhID0+IHsKICAgICAgICAgICAgICAgICAgICBpZihyb29tRmlsdGVyICE9PSAiQUxMIiAmJiByb29tRGF0YS5uYW1lICE9PSByb29tRmlsdGVyKSByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgaWYocm9vbURhdGEuc3R1ZGVudHMubGVuZ3RoID09PSAwKSByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3R1ZGVudHMgPSBbLi4ucm9vbURhdGEuc3R1ZGVudHNdOwogICAgICAgICAgICAgICAgICAgIHN0dWRlbnRzLnNvcnQoKGEsYikgPT4gZ2V0VmFsdWUoYSxbJ05vbSddKS5sb2NhbGVDb21wYXJlKGdldFZhbHVlKGIsWydOb20nXSkpKTsKICAgICAgICAgICAgICAgICAgICBjb25zdCBpc1RUID0gcm9vbURhdGEuaXNUVDsKICAgICAgICAgICAgICAgICAgICBsZXQgdGltZSA9IGlzVFQgPyBnZXRWYWx1ZShleGFtSW5mbywgWydIZXVyZSBkZSBkw6lidXQgdGllcnMgdGVtcHMnLCAnSGV1cmUgVFQnXSkgOiBnZXRWYWx1ZShleGFtSW5mbywgWydIZXVyZSBkZSBkw6lidXQnLCAnSGV1cmUnXSk7CiAgICAgICAgICAgICAgICAgICAgaWYoIXRpbWUpIHRpbWUgPSBnZXRWYWx1ZShleGFtSW5mbywgWydIZXVyZSBkZSBkw6lidXQnLCAnSGV1cmUnXSk7CiAgICAgICAgICAgICAgICAgICAgbGV0IHN1cnZOYW1lcyA9IFtdOwogICAgICAgICAgICAgICAgICAgIGlmKHJvb21EYXRhLnN1cnZlaWxsYW50cykgewogICAgICAgICAgICAgICAgICAgICAgICByb29tRGF0YS5zdXJ2ZWlsbGFudHMuZm9yRWFjaChzID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBuID0gKHR5cGVvZiBzID09PSAnb2JqZWN0JykgPyBzLm5hbWUgOiBzOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYobikgc3Vydk5hbWVzLnB1c2gobik7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBsZXQgcm93cyA9ICIiOwogICAgICAgICAgICAgICAgICAgIHN0dWRlbnRzLmZvckVhY2gocyA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJvd3MgKz0gYDx0ciBjbGFzcz0iJHt0eXBlfS1yb3ciPjx0ZD4ke2dldFZhbHVlKHMsWydOb20nXSl9PC90ZD48dGQ+JHtnZXRWYWx1ZShzLFsnUHLDqW5vbSddKX08L3RkPjx0ZD4ke2dldFZhbHVlKHMsWydDbGFzc2UnXSl9PC90ZD4ke3R5cGU9PT0nZW1hcmdlbWVudCcgPyAnPHRkPjwvdGQ+JyA6ICcnfTwvdHI+YDsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICBmdWxsSHRtbCArPSBgPGRpdiBjbGFzcz0icHJpbnQtcGFnZS1saXN0IiBzdHlsZT0icGFnZS1icmVhay1hZnRlcjogYWx3YXlzOyI+PGRpdiBjbGFzcz0icHJpbnQtaGVhZGVyIj48ZGl2IHN0eWxlPSJmb250LXdlaWdodDpib2xkOyBmb250LXNpemU6MS4ycmVtOyI+JHtBcHBTdGF0ZS5jb25maWcuZXhhbVRpdGxlIHx8ICJFWEFNRU4ifTwvZGl2PiR7bG9nbyA/IGA8aW1nIHNyYz0iJHtsb2dvfSIgY2xhc3M9InByaW50LWxvZ28iPmAgOiAnJ308L2Rpdj48ZGl2IGNsYXNzPSJwcmludC1kb2MtdGl0bGUiPiR7dGl0bGV9PC9kaXY+PGRpdiBjbGFzcz0icHJpbnQtaW5mb3MtYm94Ij48c3Ryb25nPsOJcHJldXZlIDo8L3N0cm9uZz4gJHtnZXRWYWx1ZShleGFtSW5mbyxbJ01hdGnDqHJlJywnRXByZXV2ZSddKX08YnI+PHN0cm9uZz5EYXRlIDo8L3N0cm9uZz4gJHtkYXRlU3RyfSAtIDxzdHJvbmc+SGV1cmUgOjwvc3Ryb25nPiAke3RpbWV9PGJyPjxzdHJvbmc+U2FsbGUgOjwvc3Ryb25nPiAke3Jvb21EYXRhLm5hbWV9PGJyPjxzdHJvbmc+U3VydmVpbGxhbnRzIDo8L3N0cm9uZz4gJHtzdXJ2TmFtZXMuam9pbignLCAnKX08L2Rpdj48dGFibGUgY2xhc3M9InByaW50LXRhYmxlICR7dHlwZT09PSdkaXNwbGF5Jz8nZGlzcGxheS1saXN0LXJvdyc6Jyd9Ij48dGhlYWQ+PHRyPjx0aD5Ob208L3RoPjx0aD5QcsOpbm9tPC90aD48dGg+Q2xhc3NlPC90aD4ke3R5cGU9PT0nZW1hcmdlbWVudCc/Jzx0aCBzdHlsZT0id2lkdGg6MTUwcHg7Ij5TaWduYXR1cmU8L3RoPic6Jyd9PC90cj48L3RoZWFkPjx0Ym9keT4ke3Jvd3N9PC90Ym9keT48L3RhYmxlPjwvZGl2PmA7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGlmKGZ1bGxIdG1sID09PSAiIikgcmV0dXJuIGFsZXJ0KCJBdWN1biDDqWzDqHZlIHRyb3V2w6kgcG91ciBjZSBmaWx0cmUgKG91IHNhbGxlcyB2aWRlcykuIik7CiAgICAgICAgICAgIGNvbnN0IHBhID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ByaW50LWFyZWEnKTsgcGEuaW5uZXJIVE1MID0gZnVsbEh0bWw7IHdpbmRvdy5wcmludCgpOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gcHJpbnRDb252b2NhdGlvbnMoKSB7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBpZighQXBwU3RhdGUuZGlzdHJpYnV0aW9uRGF0YSB8fCBBcHBTdGF0ZS5kaXN0cmlidXRpb25EYXRhLmxlbmd0aCA9PT0gMCkgeyBhbGVydCgiVmV1aWxsZXogY2FsY3VsZXIgbGEgcsOpcGFydGl0aW9uIChNZW51IDMpLiIpOyByZXR1cm47IH0KICAgICAgICAgICAgICAgIGNvbnN0IHByaW50QXJlYSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcmludC1hcmVhJyk7IHByaW50QXJlYS5pbm5lckhUTUwgPSAiIjsKICAgICAgICAgICAgICAgIGNvbnN0IGZpbHRlckNsYXNzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbnZvYy1jbGFzcy1maWx0ZXInKS52YWx1ZTsKICAgICAgICAgICAgICAgIGNvbnN0IGxvZ29TcmMgPSBBcHBTdGF0ZS5jb25maWcubG9nb1NyYyB8fCAiIjsKICAgICAgICAgICAgICAgIGNvbnN0IHNpZ25TcmMgPSBBcHBTdGF0ZS5jb25maWcuc2lnblNyYyB8fCAiIjsKICAgICAgICAgICAgICAgIGNvbnN0IHR4dEFkZHJlc3MgPSAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3R4dC1hZGRyZXNzJykudmFsdWUgfHwgIiIpLnJlcGxhY2UoL1xuL2csICc8YnI+Jyk7CiAgICAgICAgICAgICAgICBjb25zdCB0eHRUaXRsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0eHQtdGl0bGUtZGlzcGxheScpLmlubmVyVGV4dDsKICAgICAgICAgICAgICAgIGNvbnN0IHR4dEJvZHkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndHh0LWJvZHknKS5pbm5lckhUTUw7CiAgICAgICAgICAgICAgICBjb25zdCB0eHRSdWxlcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0eHQtcnVsZXMnKS5pbm5lckhUTUw7CiAgICAgICAgICAgICAgICBjb25zdCB0eHRDaXR5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3R4dC1jaXR5JykuaW5uZXJUZXh0OwogICAgICAgICAgICAgICAgY29uc3QgdG9wTWFyZ2luID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NldHMtc3RkLXRvcCcpLnZhbHVlOwogICAgICAgICAgICAgICAgY29uc3QgYm90TWFyZ2luID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NldHMtc3RkLWJvdCcpLnZhbHVlOwogICAgICAgICAgICAgICAgY29uc3QgZm9udFNpemUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2V0cy1zdGQtZm9udCcpLnZhbHVlOwogICAgICAgICAgICAgICAgbGV0IGNvdW50ID0gMDsKICAgICAgICAgICAgICAgIEFwcFN0YXRlLmVsZXZlcy5mb3JFYWNoKHN0dWRlbnQgPT4gewogICAgICAgICAgICAgICAgICAgIGxldCBzQ2xhc3MgPSBnZXRWYWx1ZShzdHVkZW50LCBbJ0NsYXNzZScsICdEaXYnXSk7IHNDbGFzcyA9IHNDbGFzcyA/IHNDbGFzcy50b1N0cmluZygpLnRyaW0oKSA6ICJOL0EiOwogICAgICAgICAgICAgICAgICAgIGlmKGZpbHRlckNsYXNzICE9PSAiQUxMIiAmJiBzQ2xhc3MgIT09IGZpbHRlckNsYXNzKSByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgY29uc3Qgbm9tID0gbm9ybWFsaXplKGdldFZhbHVlKHN0dWRlbnQsIFsnTm9tJ10pKTsgCiAgICAgICAgICAgICAgICAgICAgY29uc3QgcHJlbm9tID0gbm9ybWFsaXplKGdldFZhbHVlKHN0dWRlbnQsIFsnUHLDqW5vbSddKSk7CiAgICAgICAgICAgICAgICAgICAgbGV0IHN0dWRlbnRFeGFtc0xpc3QgPSBbXTsKICAgICAgICAgICAgICAgICAgICBBcHBTdGF0ZS5kaXN0cmlidXRpb25EYXRhLmZvckVhY2goKGV4YW1EYXRhKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCFleGFtRGF0YSkgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgICAgICBsZXQgc3R1ZGVudFJvb20gPSBudWxsOwogICAgICAgICAgICAgICAgICAgICAgICBleGFtRGF0YS5yb29tcy5mb3JFYWNoKHIgPT4geyAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHIuc3R1ZGVudHMuZmluZChzID0+IG5vcm1hbGl6ZShnZXRWYWx1ZShzLFsnTm9tJ10pKSA9PT0gbm9tICYmIG5vcm1hbGl6ZShnZXRWYWx1ZShzLFsnUHLDqW5vbSddKSkgPT09IHByZW5vbSkpIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0dWRlbnRSb29tID0gcjsgCiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICBpZihzdHVkZW50Um9vbSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZXhhbVJhdyA9IEFwcFN0YXRlLmVwcmV1dmVzW2V4YW1EYXRhLmV4YW1JZHhdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R1ZGVudEV4YW1zTGlzdC5wdXNoKHsgZXhhbTogZXhhbVJhdywgcm9vbTogc3R1ZGVudFJvb20gfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICBzdHVkZW50RXhhbXNMaXN0LnNvcnQoKGEsIGIpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGltZUEgPSBnZXREYXRlVGltZVZhbHVlKGEuZXhhbSwgYS5yb29tLmlzVFQpOwogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0aW1lQiA9IGdldERhdGVUaW1lVmFsdWUoYi5leGFtLCBiLnJvb20uaXNUVCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aW1lQSAtIHRpbWVCOwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIGlmKHN0dWRlbnRFeGFtc0xpc3QubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgICAgICAgICAgICBjb3VudCsrOwogICAgICAgICAgICAgICAgICAgICAgICBsZXQgZXhhbXNSb3dzID0gIiI7CiAgICAgICAgICAgICAgICAgICAgICAgIHN0dWRlbnRFeGFtc0xpc3QuZm9yRWFjaChpdGVtID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGV4YW1SYXcgPSBpdGVtLmV4YW07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzdHVkZW50Um9vbSA9IGl0ZW0ucm9vbTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGlzVFQgPSBzdHVkZW50Um9vbS5pc1RUOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZXhhbU5hbWUgPSBnZXRWYWx1ZShleGFtUmF3LCBbJ01hdGnDqHJlJywgJ0VwcmV1dmUnXSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkYXRlU3RyID0gZm9ybWF0RGF0ZShnZXRWYWx1ZShleGFtUmF3LCBbJ0RhdGUnXSkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHRpbWUgPSBpc1RUID8gZ2V0VmFsdWUoZXhhbVJhdywgWydIZXVyZSBkZSBkw6lidXQgdGllcnMgdGVtcHMnLCAnSGV1cmUgVFQnLCAnSGV1cmUgZMOpYnV0IFRUJ10pIDogZ2V0VmFsdWUoZXhhbVJhdywgWydIZXVyZSBkZSBkw6lidXQnLCAnSGV1cmUnXSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZighdGltZSkgdGltZSA9IGdldFZhbHVlKGV4YW1SYXcsIFsnSGV1cmUgZGUgZMOpYnV0JywgJ0hldXJlJ10pOyAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBkdXJhdGlvbiA9IGlzVFQgPyBnZXRWYWx1ZShleGFtUmF3LCBbJ0R1csOpZSB0aWVycyB0ZW1wcycsICdEdXLDqWUgZW4gbWludXRlIHRpZXJzIHRlbXBzJywgJ0R1csOpZSBUVCddKSA6IGdldFZhbHVlKGV4YW1SYXcsIFsnRHVyw6llIGVuIG1pbnV0ZScsICdEdXLDqWUnXSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZighZHVyYXRpb24pIGR1cmF0aW9uID0gZ2V0VmFsdWUoZXhhbVJhdywgWydEdXLDqWUgZW4gbWludXRlJywgJ0R1csOpZSddKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4YW1zUm93cyArPSBgPHRyPjx0ZD4ke2V4YW1OYW1lfTwvdGQ+PHRkPiR7ZGF0ZVN0cn08L3RkPjx0ZD4ke3RpbWV9PC90ZD48dGQ+JHtmb3JtYXREdXJhdGlvbkRpc3BsYXkoZHVyYXRpb24pfTwvdGQ+PHRkPiR7c3R1ZGVudFJvb20ubmFtZX08L3RkPjwvdHI+YDsKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGFub255bVN0ciA9IHN0dWRlbnQuTnVtQW5vbnltYXQgPyBgPGJyPjxzdHJvbmc+TsKwIEFub255bWF0IDo8L3N0cm9uZz4gJHtzdHVkZW50Lk51bUFub255bWF0fWAgOiAiIjsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3R5bGVTdHIgPSBgcGFkZGluZy10b3A6JHt0b3BNYXJnaW59bW07IHBhZGRpbmctYm90dG9tOiR7Ym90TWFyZ2lufW1tOyBmb250LXNpemU6JHtmb250U2l6ZX1weDtgOwogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwYWdlSHRtbCA9IGA8ZGl2IGNsYXNzPSJwcmludC1wYWdlLWNvbnZvYyIgc3R5bGU9IiR7c3R5bGVTdHJ9Ij48ZGl2IGNsYXNzPSJjb252b2MtaGVhZGVyLXJvdyI+PGRpdiBjbGFzcz0iY29udm9jLWFkZHJlc3MiPiR7dHh0QWRkcmVzc308L2Rpdj48ZGl2IGNsYXNzPSJjb252b2MtbG9nby16b25lIj4ke2xvZ29TcmMgPyBgPGltZyBzcmM9IiR7bG9nb1NyY30iIGNsYXNzPSJjb252b2MtbG9nbyI+YCA6ICcnfTwvZGl2PjwvZGl2PjxkaXYgY2xhc3M9ImNvbnZvYy10aXRsZSI+Q09OVk9DQVRJT04gJHt0eHRUaXRsZX08L2Rpdj48ZGl2IGNsYXNzPSJjb252b2Mtc3R1ZGVudC1pbmZvIj48c3Ryb25nPk5vbSBldCBQcsOpbm9tIDo8L3N0cm9uZz4gJHtnZXRWYWx1ZShzdHVkZW50LCBbJ05vbSddKX0gJHtnZXRWYWx1ZShzdHVkZW50LCBbJ1Byw6lub20nXSl9PGJyPjxzdHJvbmc+Q2xhc3NlIDo8L3N0cm9uZz4gJHtzQ2xhc3N9JHthbm9ueW1TdHJ9PC9kaXY+PGRpdiBjbGFzcz0iY29udm9jLWJvZHkiPiR7dHh0Qm9keX08L2Rpdj48dGFibGUgY2xhc3M9ImNvbnZvYy10YWJsZSI+PHRoZWFkPjx0cj48dGg+w4lwcmV1dmU8L3RoPjx0aD5EYXRlPC90aD48dGg+SG9yYWlyZSBkw6lidXQ8L3RoPjx0aD5EdXLDqWU8L3RoPjx0aD5TYWxsZTwvdGg+PC90cj48L3RoZWFkPjx0Ym9keT4ke2V4YW1zUm93c308L3Rib2R5PjwvdGFibGU+PGRpdiBzdHlsZT0iZm9udC13ZWlnaHQ6Ym9sZDsgbWFyZ2luLWJvdHRvbTo1cHg7Ij5Sw6hnbGVtZW50IGV0IGNvbnNpZ25lcyA6PC9kaXY+PGRpdiBjbGFzcz0iY29udm9jLXJ1bGVzIiBzdHlsZT0iZm9udC1zaXplOjAuOXJlbTsiPiR7dHh0UnVsZXN9PC9kaXY+PGRpdiBjbGFzcz0iY29udm9jLWZvb3RlciIgc3R5bGU9Imp1c3RpZnktY29udGVudDogZmxleC1lbmQ7Ij48ZGl2IGNsYXNzPSJjb252b2Mtc2lnbiIgc3R5bGU9InRleHQtYWxpZ246cmlnaHQ7Ij48ZGl2PkZhaXQgw6AgJHt0eHRDaXR5fSwgbGUgJHtuZXcgRGF0ZSgpLnRvTG9jYWxlRGF0ZVN0cmluZygnZnItRlInKX08L2Rpdj4ke3NpZ25TcmMgPyBgPGltZyBzcmM9IiR7c2lnblNyY30iIHN0eWxlPSJtYXgtaGVpZ2h0OjYwcHg7IG1hcmdpbi10b3A6MTBweDsiPmAgOiAnJ308ZGl2IHN0eWxlPSJtYXJnaW4tdG9wOjEwcHg7IGZvbnQtd2VpZ2h0OmJvbGQ7Ij4ke0FwcFN0YXRlLmNvbmZpZy5uYW1lIHx8ICcnfTwvZGl2PjxkaXYgc3R5bGU9ImZvbnQtc3R5bGU6aXRhbGljOyI+JHtBcHBTdGF0ZS5jb25maWcucm9sZSB8fCAnJ308L2Rpdj48L2Rpdj48L2Rpdj48L2Rpdj5gOwogICAgICAgICAgICAgICAgICAgICAgICBwcmludEFyZWEuaW5zZXJ0QWRqYWNlbnRIVE1MKCdiZWZvcmVlbmQnLCBwYWdlSHRtbCk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBpZihjb3VudCA+IDApIHdpbmRvdy5wcmludCgpOyBlbHNlIGFsZXJ0KCJBdWN1bmUgY29udm9jYXRpb24gZ8OpbsOpcsOpZS4iKTsKICAgICAgICAgICAgfSBjYXRjaChlKSB7IGNvbnNvbGUuZXJyb3IoZSk7IGFsZXJ0KCJFcnJldXIgaW1wcmVzc2lvbjogIiArIGUubWVzc2FnZSk7IH0KICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIHByaW50U3VydmVpbGxhbnRDb252b2NhdGlvbnMoKSB7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBpZighQXBwU3RhdGUuZGlzdHJpYnV0aW9uRGF0YSB8fCBBcHBTdGF0ZS5kaXN0cmlidXRpb25EYXRhLmxlbmd0aCA9PT0gMCkgeyBhbGVydCgiVmV1aWxsZXogY2FsY3VsZXIgbGEgcsOpcGFydGl0aW9uLiIpOyByZXR1cm47IH0KICAgICAgICAgICAgICAgIGNvbnN0IHByaW50QXJlYSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcmludC1hcmVhJyk7IHByaW50QXJlYS5pbm5lckhUTUwgPSAiIjsKICAgICAgICAgICAgICAgIGNvbnN0IGZpbHRlclN1cnYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29udm9jLXN1cnYtZmlsdGVyJykudmFsdWU7CiAgICAgICAgICAgICAgICBjb25zdCBsb2dvU3JjID0gQXBwU3RhdGUuY29uZmlnLmxvZ29TcmMgfHwgIiI7IGNvbnN0IHNpZ25TcmMgPSBBcHBTdGF0ZS5jb25maWcuc2lnblNyYyB8fCAiIjsKICAgICAgICAgICAgICAgIGNvbnN0IHR4dEFkZHJlc3MgPSAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3R4dC1zdXJ2LWFkZHJlc3MnKS52YWx1ZSB8fCAiIikucmVwbGFjZSgvXG4vZywgJzxicj4nKTsKICAgICAgICAgICAgICAgIGNvbnN0IHR4dFRpdGxlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3R4dC1zdXJ2LXRpdGxlLWRpc3BsYXknKS5pbm5lclRleHQ7CiAgICAgICAgICAgICAgICBjb25zdCB0eHRCb2R5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3R4dC1zdXJ2LWJvZHknKS5pbm5lckhUTUw7CiAgICAgICAgICAgICAgICBjb25zdCB0eHRSdWxlcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0eHQtc3Vydi1ydWxlcycpLmlubmVySFRNTDsKICAgICAgICAgICAgICAgIGNvbnN0IHR4dENpdHkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndHh0LXN1cnYtY2l0eScpLmlubmVyVGV4dDsKICAgICAgICAgICAgICAgIGNvbnN0IHRvcE1hcmdpbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZXRzLXN1cnYtdG9wJykudmFsdWU7CiAgICAgICAgICAgICAgICBjb25zdCBib3RNYXJnaW4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2V0cy1zdXJ2LWJvdCcpLnZhbHVlOwogICAgICAgICAgICAgICAgY29uc3QgZm9udFNpemUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2V0cy1zdXJ2LWZvbnQnKS52YWx1ZTsKICAgICAgICAgICAgICAgIGxldCBzY2hlZHVsZU1hcCA9IHt9OwogICAgICAgICAgICAgICAgQXBwU3RhdGUuZGlzdHJpYnV0aW9uRGF0YS5mb3JFYWNoKGV4YW1EYXRhID0+IHsKICAgICAgICAgICAgICAgICAgICBpZighZXhhbURhdGEpIHJldHVybjsKICAgICAgICAgICAgICAgICAgICBjb25zdCBleGFtUmF3ID0gQXBwU3RhdGUuZXByZXV2ZXNbZXhhbURhdGEuZXhhbUlkeF07IAogICAgICAgICAgICAgICAgICAgIGNvbnN0IGV4YW1OYW1lID0gZ2V0VmFsdWUoZXhhbVJhdywgWydNYXRpw6hyZScsICdFcHJldXZlJ10pOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IGRhdGVTdHIgPSBmb3JtYXREYXRlKGdldFZhbHVlKGV4YW1SYXcsIFsnRGF0ZSddKSk7CiAgICAgICAgICAgICAgICAgICAgZXhhbURhdGEucm9vbXMuZm9yRWFjaChyb29tID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYocm9vbS5zdXJ2ZWlsbGFudHMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvb20uc3VydmVpbGxhbnRzLmZvckVhY2goc3Vydkl0ZW0gPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBzdXJ2TmFtZSA9ICh0eXBlb2Ygc3Vydkl0ZW0gPT09ICdvYmplY3QnKSA/IHN1cnZJdGVtLm5hbWUgOiBzdXJ2SXRlbTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgc3BlY2lmaWNUaW1lID0gKHR5cGVvZiBzdXJ2SXRlbSA9PT0gJ29iamVjdCcpID8gc3Vydkl0ZW0udGltZSA6ICIiOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCFzdXJ2TmFtZSkgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCFzY2hlZHVsZU1hcFtzdXJ2TmFtZV0pIHNjaGVkdWxlTWFwW3N1cnZOYW1lXSA9IFtdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGlzVFQgPSByb29tLmlzVFQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHRpbWUgPSBpc1RUID8gZ2V0VmFsdWUoZXhhbVJhdywgWydIZXVyZSBkZSBkw6lidXQgdGllcnMgdGVtcHMnLCAnSGV1cmUgVFQnLCAnSGV1cmUgZMOpYnV0IFRUJ10pIDogZ2V0VmFsdWUoZXhhbVJhdywgWydIZXVyZSBkZSBkw6lidXQnLCAnSGV1cmUnXSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoIXRpbWUpIHRpbWUgPSBnZXRWYWx1ZShleGFtUmF3LCBbJ0hldXJlIGRlIGTDqWJ1dCcsICdIZXVyZSddKTsgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGR1cmF0aW9uID0gaXNUVCA/IGdldFZhbHVlKGV4YW1SYXcsIFsnRHVyw6llIHRpZXJzIHRlbXBzJywgJ0R1csOpZSBlbiBtaW51dGUgdGllcnMgdGVtcHMnLCAnRHVyw6llIFRUJ10pIDogZ2V0VmFsdWUoZXhhbVJhdywgWydEdXLDqWUgZW4gbWludXRlJywgJ0R1csOpZSddKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZighZHVyYXRpb24pIGR1cmF0aW9uID0gZ2V0VmFsdWUoZXhhbVJhdywgWydEdXLDqWUgZW4gbWludXRlJywgJ0R1csOpZSddKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgZmluYWxUaW1lRGlzcGxheSA9IHNwZWNpZmljVGltZSA/IHNwZWNpZmljVGltZSA6IHRpbWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2NoZWR1bGVNYXBbc3Vydk5hbWVdLnB1c2goeyAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmF3RXhhbTogZXhhbVJhdywgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzVFQ6IGlzVFQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVwcmV1dmU6IGV4YW1OYW1lLCAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZTogZGF0ZVN0ciwgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhldXJlOiBmaW5hbFRpbWVEaXNwbGF5LCAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZHVyZWU6IGR1cmF0aW9uLCAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2FsbGU6IHJvb20ubmFtZSAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIGxldCBjb3VudCA9IDA7IAogICAgICAgICAgICAgICAgY29uc3Qgc29ydGVkU3VydnMgPSBPYmplY3Qua2V5cyhzY2hlZHVsZU1hcCkuc29ydCgpOwogICAgICAgICAgICAgICAgc29ydGVkU3VydnMuZm9yRWFjaChzdXJ2TmFtZSA9PiB7CiAgICAgICAgICAgICAgICAgICAgaWYoZmlsdGVyU3VydiAhPT0gIkFMTCIgJiYgc3Vydk5hbWUgIT09IGZpbHRlclN1cnYpIHJldHVybjsKICAgICAgICAgICAgICAgICAgICBjb25zdCBzbG90cyA9IHNjaGVkdWxlTWFwW3N1cnZOYW1lXTsKICAgICAgICAgICAgICAgICAgICBzbG90cy5zb3J0KChhLCBiKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRpbWVBID0gZ2V0RGF0ZVRpbWVWYWx1ZShhLnJhd0V4YW0sIGEuaXNUVCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRpbWVCID0gZ2V0RGF0ZVRpbWVWYWx1ZShiLnJhd0V4YW0sIGIuaXNUVCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aW1lQSAtIHRpbWVCOwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIGxldCByb3dzID0gIiI7CiAgICAgICAgICAgICAgICAgICAgc2xvdHMuZm9yRWFjaChzbG90ID0+IHsgcm93cyArPSBgPHRyPjx0ZD4ke3Nsb3QuZXByZXV2ZX08L3RkPjx0ZD4ke3Nsb3QuZGF0ZX08L3RkPjx0ZD4ke3Nsb3QuaGV1cmV9PC90ZD48dGQ+JHtmb3JtYXREdXJhdGlvbkRpc3BsYXkoc2xvdC5kdXJlZSl9PC90ZD48dGQ+JHtzbG90LnNhbGxlfTwvdGQ+PC90cj5gOyB9KTsKICAgICAgICAgICAgICAgICAgICBjb3VudCsrOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IHN0eWxlU3RyID0gYHBhZGRpbmctdG9wOiR7dG9wTWFyZ2lufW1tOyBwYWRkaW5nLWJvdHRvbToke2JvdE1hcmdpbn1tbTsgZm9udC1zaXplOiR7Zm9udFNpemV9cHg7YDsKICAgICAgICAgICAgICAgICAgICBjb25zdCBwYWdlSHRtbCA9IGA8ZGl2IGNsYXNzPSJwcmludC1wYWdlLWNvbnZvYyIgc3R5bGU9IiR7c3R5bGVTdHJ9Ij48ZGl2IGNsYXNzPSJjb252b2MtaGVhZGVyLXJvdyI+PGRpdiBjbGFzcz0iY29udm9jLWFkZHJlc3MiPiR7dHh0QWRkcmVzc308L2Rpdj48ZGl2IGNsYXNzPSJjb252b2MtbG9nby16b25lIj4ke2xvZ29TcmMgPyBgPGltZyBzcmM9IiR7bG9nb1NyY30iIGNsYXNzPSJjb252b2MtbG9nbyI+YCA6ICcnfTwvZGl2PjwvZGl2PjxkaXYgY2xhc3M9ImNvbnZvYy10aXRsZSI+Q09OVk9DQVRJT04gJHt0eHRUaXRsZX08L2Rpdj48ZGl2IGNsYXNzPSJjb252b2Mtc3R1ZGVudC1pbmZvIj48c3Ryb25nPlN1cnZlaWxsYW50IDo8L3N0cm9uZz4gJHtzdXJ2TmFtZX08L2Rpdj48ZGl2IGNsYXNzPSJjb252b2MtYm9keSI+JHt0eHRCb2R5fTwvZGl2Pjx0YWJsZSBjbGFzcz0iY29udm9jLXRhYmxlIj48dGhlYWQ+PHRyPjx0aD7DiXByZXV2ZTwvdGg+PHRoPkRhdGU8L3RoPjx0aD5Ib3JhaXJlPC90aD48dGg+RHVyw6llPC90aD48dGg+U2FsbGU8L3RoPjwvdHI+PC90aGVhZD48dGJvZHk+JHtyb3dzfTwvdGJvZHk+PC90YWJsZT48ZGl2IHN0eWxlPSJmb250LXdlaWdodDpib2xkOyBtYXJnaW4tYm90dG9tOjVweDsiPkNvbnNpZ25lcyA6PC9kaXY+PGRpdiBjbGFzcz0iY29udm9jLXJ1bGVzIiBzdHlsZT0iZm9udC1zaXplOjAuOXJlbTsiPiR7dHh0UnVsZXN9PC9kaXY+PGRpdiBjbGFzcz0iY29udm9jLWZvb3RlciIgc3R5bGU9Imp1c3RpZnktY29udGVudDogZmxleC1lbmQ7Ij48ZGl2IGNsYXNzPSJjb252b2Mtc2lnbiIgc3R5bGU9InRleHQtYWxpZ246cmlnaHQ7Ij48ZGl2PkZhaXQgw6AgJHt0eHRDaXR5fSwgbGUgJHtuZXcgRGF0ZSgpLnRvTG9jYWxlRGF0ZVN0cmluZygnZnItRlInKX08L2Rpdj4ke3NpZ25TcmMgPyBgPGltZyBzcmM9IiR7c2lnblNyY30iIHN0eWxlPSJtYXgtaGVpZ2h0OjYwcHg7IG1hcmdpbi10b3A6MTBweDsiPmAgOiAnJ308ZGl2IHN0eWxlPSJtYXJnaW4tdG9wOjEwcHg7IGZvbnQtd2VpZ2h0OmJvbGQ7Ij4ke0FwcFN0YXRlLmNvbmZpZy5uYW1lIHx8ICcnfTwvZGl2PjxkaXYgc3R5bGU9ImZvbnQtc3R5bGU6aXRhbGljOyI+JHtBcHBTdGF0ZS5jb25maWcucm9sZSB8fCAnJ308L2Rpdj48L2Rpdj48L2Rpdj48L2Rpdj5gOwogICAgICAgICAgICAgICAgICAgIHByaW50QXJlYS5pbnNlcnRBZGphY2VudEhUTUwoJ2JlZm9yZWVuZCcsIHBhZ2VIdG1sKTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgaWYoY291bnQgPiAwKSB3aW5kb3cucHJpbnQoKTsgZWxzZSBhbGVydCgiQXVjdW5lIHN1cnZlaWxsYW5jZSB0cm91dsOpZS4iKTsKICAgICAgICAgICAgfSBjYXRjaChlKSB7IGNvbnNvbGUuZXJyb3IoZSk7IGFsZXJ0KCJFcnJldXIgaW1wcmVzc2lvbjogIiArIGUubWVzc2FnZSk7IH0KICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGdlbmVyYXRlQW5vbnltaXR5KCkgeyBpZighQXBwU3RhdGUuZWxldmVzLmxlbmd0aCkgcmV0dXJuIGFsZXJ0KCJBdWN1biDDqWzDqHZlIik7IGNvbnN0IHVzZWQgPSBuZXcgU2V0KCk7IEFwcFN0YXRlLmVsZXZlcy5mb3JFYWNoKGUgPT4geyBpZighZS5OdW1Bbm9ueW1hdCkgeyBsZXQgaWQ7IGRvIHsgaWQgPSBNYXRoLmZsb29yKDEwMDAwMCArIE1hdGgucmFuZG9tKCkgKiA5MDAwMDApLnRvU3RyaW5nKCk7IH0gd2hpbGUodXNlZC5oYXMoaWQpKTsgdXNlZC5hZGQoaWQpOyBlLk51bUFub255bWF0ID0gaWQ7IH0gZWxzZSB7IHVzZWQuYWRkKGUuTnVtQW5vbnltYXQpOyB9IH0pOyByZW5kZXJBbm9ueW1pdHlUYWJsZSgpOyB9CiAgICAgICAgZnVuY3Rpb24gcmVuZGVyQW5vbnltaXR5VGFibGUoKSB7IGNvbnN0IGMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYW5vbnltaXR5LXRhYmxlLWNvbnRhaW5lcicpOyBsZXQgaCA9IGA8ZGl2IGNsYXNzPSJjYXJkIj48dGFibGUgY2xhc3M9ImRhdGEtdGFibGUiPjx0aGVhZD48dHI+PHRoPk5vbTwvdGg+PHRoPlByw6lub208L3RoPjx0aD5DbGFzc2U8L3RoPjx0aD5Bbm9ueW1hdDwvdGg+PC90cj48L3RoZWFkPjx0Ym9keT5gOyBBcHBTdGF0ZS5lbGV2ZXMuZm9yRWFjaChlID0+IHsgaCs9YDx0cj48dGQ+JHtnZXRWYWx1ZShlLFsnTm9tJ10pfTwvdGQ+PHRkPiR7Z2V0VmFsdWUoZSxbJ1Byw6lub20nXSl9PC90ZD48dGQ+JHtnZXRWYWx1ZShlLFsnQ2xhc3NlJ10pfTwvdGQ+PHRkPjxzdHJvbmc+JHtlLk51bUFub255bWF0fTwvc3Ryb25nPjwvdGQ+PC90cj5gOyB9KTsgaCs9JzwvdGJvZHk+PC90YWJsZT48L2Rpdj4nOyBjLmlubmVySFRNTCA9IGg7IH0KICAgICAgICAKICAgICAgICBmdW5jdGlvbiBwb3B1bGF0ZUxhYmVsRmlsdGVycygpIHsKICAgICAgICAgICAgY29uc3QgZXhTZWxlY3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbGFiZWwtZXhhbS1zZWxlY3QnKTsKICAgICAgICAgICAgZXhTZWxlY3QuaW5uZXJIVE1MID0gJzxvcHRpb24gdmFsdWU9IkFMTCI+VG91dGVzIGxlcyDDqXByZXV2ZXMgKEJhc2Ugw4lsw6h2ZXMpPC9vcHRpb24+JzsKICAgICAgICAgICAgQXBwU3RhdGUuZXByZXV2ZXMuZm9yRWFjaCgoZSwgaSkgPT4gewogICAgICAgICAgICAgICAgZXhTZWxlY3QuYWRkKG5ldyBPcHRpb24oZ2V0VmFsdWUoZSwgWydNYXRpw6hyZScsICdFcHJldXZlJ10pLCBpKSk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBjb25zdCBjbFNlbGVjdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsYWJlbC1jbGFzcy1zZWxlY3QnKTsKICAgICAgICAgICAgY2xTZWxlY3QuaW5uZXJIVE1MID0gJzxvcHRpb24gdmFsdWU9IkFMTCI+VG91dGVzIGNsYXNzZXM8L29wdGlvbj4nOwogICAgICAgICAgICBjb25zdCBjbGFzc2VzID0gbmV3IFNldCgpOwogICAgICAgICAgICBBcHBTdGF0ZS5lbGV2ZXMuZm9yRWFjaChlID0+IHsgY29uc3QgYyA9IGdldFZhbHVlKGUsWydDbGFzc2UnLCdEaXYnXSk7IGlmKGMpIGNsYXNzZXMuYWRkKGMpOyB9KTsKICAgICAgICAgICAgQXJyYXkuZnJvbShjbGFzc2VzKS5zb3J0KCkuZm9yRWFjaChjID0+IGNsU2VsZWN0LmFkZChuZXcgT3B0aW9uKGMsIGMpKSk7CiAgICAgICAgICAgIHVwZGF0ZUxhYmVsUm9vbVNlbGVjdCgpOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gdXBkYXRlTGFiZWxSb29tU2VsZWN0KCkgewogICAgICAgICAgICBjb25zdCBleGFtSWR4ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xhYmVsLWV4YW0tc2VsZWN0JykudmFsdWU7CiAgICAgICAgICAgIGNvbnN0IHJtU2VsZWN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xhYmVsLXJvb20tc2VsZWN0Jyk7CiAgICAgICAgICAgIHJtU2VsZWN0LmlubmVySFRNTCA9ICc8b3B0aW9uIHZhbHVlPSJBTEwiPlRvdXRlcyBzYWxsZXM8L29wdGlvbj4nOwogICAgICAgICAgICBpZiAoZXhhbUlkeCAhPT0gIkFMTCIpIHsKICAgICAgICAgICAgICAgIHJtU2VsZWN0LmRpc2FibGVkID0gZmFsc2U7CiAgICAgICAgICAgICAgICBjb25zdCBkaXN0ID0gQXBwU3RhdGUuZGlzdHJpYnV0aW9uRGF0YVtleGFtSWR4XTsKICAgICAgICAgICAgICAgIGlmIChkaXN0ICYmIGRpc3Qucm9vbXMpIHsKICAgICAgICAgICAgICAgICAgICBkaXN0LnJvb21zLmZvckVhY2gociA9PiBybVNlbGVjdC5hZGQobmV3IE9wdGlvbihyLm5hbWUsIHIubmFtZSkpKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHJtU2VsZWN0LmRpc2FibGVkID0gdHJ1ZTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gcHJpbnRUYWJsZUxhYmVscygpIHsKICAgICAgICAgICAgY29uc3QgZXhhbUlkeCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsYWJlbC1leGFtLXNlbGVjdCcpLnZhbHVlOwogICAgICAgICAgICBjb25zdCByb29tRmlsdGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xhYmVsLXJvb20tc2VsZWN0JykudmFsdWU7CiAgICAgICAgICAgIGNvbnN0IGNsYXNzRmlsdGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xhYmVsLWNsYXNzLXNlbGVjdCcpLnZhbHVlOwogICAgICAgICAgICBjb25zdCBzb3J0TW9kZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsaXN0aW5nLXNvcnQtbW9kZScpLnZhbHVlOyAKICAgICAgICAgICAgY29uc3QgbG9nbyA9IEFwcFN0YXRlLmNvbmZpZy5sb2dvU3JjIHx8ICIiOwogICAgICAgICAgICBsZXQgc3R1ZGVudHNUb1ByaW50ID0gW107CiAgICAgICAgICAgIGlmIChleGFtSWR4ICE9PSAiQUxMIikgewogICAgICAgICAgICAgICAgY29uc3QgZGlzdCA9IEFwcFN0YXRlLmRpc3RyaWJ1dGlvbkRhdGFbZXhhbUlkeF07CiAgICAgICAgICAgICAgICBpZiAoIWRpc3QpIHJldHVybiBhbGVydCgiUsOpcGFydGl0aW9uIG5vbiBjYWxjdWzDqWUgcG91ciBjZXR0ZSDDqXByZXV2ZS4iKTsKICAgICAgICAgICAgICAgIGlmIChyb29tRmlsdGVyICE9PSAiQUxMIikgewogICAgICAgICAgICAgICAgICAgIGNvbnN0IHJvb20gPSBkaXN0LnJvb21zLmZpbmQociA9PiByLm5hbWUgPT09IHJvb21GaWx0ZXIpOwogICAgICAgICAgICAgICAgICAgIGlmIChyb29tKSBzdHVkZW50c1RvUHJpbnQgPSBbLi4ucm9vbS5zdHVkZW50c107CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIGRpc3Qucm9vbXMuZm9yRWFjaChyID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgci5zdHVkZW50cy5mb3JFYWNoKHMgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R1ZGVudHNUb1ByaW50LnB1c2goey4uLnMsIF90ZW1wUm9vbTogci5uYW1lfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgc3R1ZGVudHNUb1ByaW50ID0gWy4uLkFwcFN0YXRlLmVsZXZlc107CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKGNsYXNzRmlsdGVyICE9PSAiQUxMIikgewogICAgICAgICAgICAgICAgc3R1ZGVudHNUb1ByaW50ID0gc3R1ZGVudHNUb1ByaW50LmZpbHRlcihzID0+IGdldFZhbHVlKHMsIFsnQ2xhc3NlJywnRGl2J10pID09IGNsYXNzRmlsdGVyKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoc29ydE1vZGUgPT09ICdST09NJyAmJiBleGFtSWR4ICE9PSAiQUxMIikgewogICAgICAgICAgICAgICAgIHN0dWRlbnRzVG9QcmludC5zb3J0KChhLCBiKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgckEgPSBhLl90ZW1wUm9vbSB8fCAiIjsKICAgICAgICAgICAgICAgICAgICBjb25zdCByQiA9IGIuX3RlbXBSb29tIHx8ICIiOwogICAgICAgICAgICAgICAgICAgIGlmKHJBICE9PSByQikgcmV0dXJuIHJBLmxvY2FsZUNvbXBhcmUockIsIHVuZGVmaW5lZCwge251bWVyaWM6IHRydWV9KTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gKGdldFZhbHVlKGEsWydOb20nXSl8fCcnKS5sb2NhbGVDb21wYXJlKGdldFZhbHVlKGIsWydOb20nXSl8fCcnKTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9IGVsc2UgaWYgKHNvcnRNb2RlID09PSAnQ0xBU1MnKSB7CiAgICAgICAgICAgICAgICBzdHVkZW50c1RvUHJpbnQuc29ydCgoYSwgYikgPT4gewogICAgICAgICAgICAgICAgICAgIGNvbnN0IGNBID0gbm9ybUNsYXNzKGdldFZhbHVlKGEsIFsnQ2xhc3NlJywgJ0RpdiddKSk7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgY0IgPSBub3JtQ2xhc3MoZ2V0VmFsdWUoYiwgWydDbGFzc2UnLCAnRGl2J10pKTsKICAgICAgICAgICAgICAgICAgICBpZiAoY0EgIT09IGNCKSByZXR1cm4gY0EubG9jYWxlQ29tcGFyZShjQik7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChnZXRWYWx1ZShhLFsnTm9tJ10pfHwnJykubG9jYWxlQ29tcGFyZShnZXRWYWx1ZShiLFsnTm9tJ10pfHwnJyk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHN0dWRlbnRzVG9QcmludC5zb3J0KChhLCBiKSA9PiAoZ2V0VmFsdWUoYSxbJ05vbSddKXx8JycpLmxvY2FsZUNvbXBhcmUoZ2V0VmFsdWUoYixbJ05vbSddKXx8JycpKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoc3R1ZGVudHNUb1ByaW50Lmxlbmd0aCA9PT0gMCkgcmV0dXJuIGFsZXJ0KCJBdWN1biDDqWzDqHZlIHRyb3V2w6kgcG91ciBjZXMgY3JpdMOocmVzLiIpOwogICAgICAgICAgICBsZXQgaHRtbCA9ICIiOwogICAgICAgICAgICBsZXQgY2h1bmsgPSAxNDsgCiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3R1ZGVudHNUb1ByaW50Lmxlbmd0aDsgaSArPSBjaHVuaykgewogICAgICAgICAgICAgICAgY29uc3QgYmF0Y2ggPSBzdHVkZW50c1RvUHJpbnQuc2xpY2UoaSwgaSArIGNodW5rKTsKICAgICAgICAgICAgICAgIGh0bWwgKz0gYDxkaXYgY2xhc3M9ImxhYmVsLXNoZWV0Ij5gOwogICAgICAgICAgICAgICAgYmF0Y2guZm9yRWFjaChlID0+IHsKICAgICAgICAgICAgICAgICAgICBodG1sICs9IGA8ZGl2IGNsYXNzPSJsYWJlbC1jYXJkIj4ke2xvZ28gPyBgPGltZyBzcmM9IiR7bG9nb30iIGNsYXNzPSJsYWJlbC1sb2dvIj5gIDogJyd9PGRpdiBjbGFzcz0ibGFiZWwtbmFtZSI+JHtnZXRWYWx1ZShlLFsnTm9tJ10pfSAke2dldFZhbHVlKGUsWydQcsOpbm9tJ10pfTwvZGl2PjxkaXYgY2xhc3M9ImxhYmVsLWNsYXNzIj4ke2dldFZhbHVlKGUsWydDbGFzc2UnXSl9PC9kaXY+PGRpdiBjbGFzcz0ibGFiZWwtYW5vbnltIj4ke2UuTnVtQW5vbnltYXQgfHwgIj8ifTwvZGl2PjwvZGl2PmA7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIGh0bWwgKz0gYDwvZGl2PmA7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ByaW50LWFyZWEnKS5pbm5lckhUTUwgPSBodG1sOwogICAgICAgICAgICB3aW5kb3cucHJpbnQoKTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIHByaW50QW5vbnltaXR5TGlzdCgpIHsgCiAgICAgICAgICAgIGNvbnN0IGxvZ28gPSBBcHBTdGF0ZS5jb25maWcubG9nb1NyYyB8fCAiIjsgCiAgICAgICAgICAgIGNvbnN0IHNvcnRNb2RlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xpc3Rpbmctc29ydC1tb2RlJykudmFsdWU7CiAgICAgICAgICAgIGNvbnN0IGV4YW1JZHggPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbGFiZWwtZXhhbS1zZWxlY3QnKS52YWx1ZTsKICAgICAgICAgICAgbGV0IGxpc3QgPSBbXTsKICAgICAgICAgICAgaWYgKGV4YW1JZHggIT09ICJBTEwiKSB7CiAgICAgICAgICAgICAgICBjb25zdCBkaXN0ID0gQXBwU3RhdGUuZGlzdHJpYnV0aW9uRGF0YVtleGFtSWR4XTsKICAgICAgICAgICAgICAgIGlmIChkaXN0KSB7CiAgICAgICAgICAgICAgICAgICAgZGlzdC5yb29tcy5mb3JFYWNoKHIgPT4gewogICAgICAgICAgICAgICAgICAgICAgICByLnN0dWRlbnRzLmZvckVhY2gocyA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaXN0LnB1c2goeyAuLi5zLCBfcm9vbU5hbWU6IHIubmFtZSB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBsaXN0ID0gWy4uLkFwcFN0YXRlLmVsZXZlc107CiAgICAgICAgICAgIH0KICAgICAgICAgICAgY29uc3QgY2xhc3NGaWx0ZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbGFiZWwtY2xhc3Mtc2VsZWN0JykudmFsdWU7CiAgICAgICAgICAgIGlmIChjbGFzc0ZpbHRlciAhPT0gIkFMTCIpIHsKICAgICAgICAgICAgICAgIGxpc3QgPSBsaXN0LmZpbHRlcihzID0+IGdldFZhbHVlKHMsIFsnQ2xhc3NlJywnRGl2J10pID09IGNsYXNzRmlsdGVyKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoc29ydE1vZGUgPT09ICdST09NJyAmJiBleGFtSWR4ICE9PSAiQUxMIikgewogICAgICAgICAgICAgICAgIGxpc3Quc29ydCgoYSwgYikgPT4gewogICAgICAgICAgICAgICAgICAgIGNvbnN0IHJBID0gYS5fcm9vbU5hbWUgfHwgIiI7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgckIgPSBiLl9yb29tTmFtZSB8fCAiIjsKICAgICAgICAgICAgICAgICAgICBpZihyQSAhPT0gckIpIHJldHVybiByQS5sb2NhbGVDb21wYXJlKHJCLCB1bmRlZmluZWQsIHtudW1lcmljOiB0cnVlfSk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChnZXRWYWx1ZShhLFsnTm9tJ10pfHwnJykubG9jYWxlQ29tcGFyZShnZXRWYWx1ZShiLFsnTm9tJ10pfHwnJyk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSBlbHNlIGlmIChzb3J0TW9kZSA9PT0gJ0NMQVNTJykgewogICAgICAgICAgICAgICAgbGlzdC5zb3J0KChhLCBiKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgY0EgPSBub3JtQ2xhc3MoZ2V0VmFsdWUoYSwgWydDbGFzc2UnLCAnRGl2J10pKTsKICAgICAgICAgICAgICAgICAgICBjb25zdCBjQiA9IG5vcm1DbGFzcyhnZXRWYWx1ZShiLCBbJ0NsYXNzZScsICdEaXYnXSkpOwogICAgICAgICAgICAgICAgICAgIGlmIChjQSAhPT0gY0IpIHJldHVybiBjQS5sb2NhbGVDb21wYXJlKGNCKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gKGdldFZhbHVlKGEsWydOb20nXSl8fCcnKS5sb2NhbGVDb21wYXJlKGdldFZhbHVlKGIsWydOb20nXSl8fCcnKTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgbGlzdC5zb3J0KChhLCBiKSA9PiAoZ2V0VmFsdWUoYSxbJ05vbSddKXx8JycpLmxvY2FsZUNvbXBhcmUoZ2V0VmFsdWUoYixbJ05vbSddKXx8JycpKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBsZXQgcm93cyA9ICIiOyAKICAgICAgICAgICAgbGV0IGN1cnJlbnRSb29tID0gIiI7CiAgICAgICAgICAgIGxpc3QuZm9yRWFjaChlID0+IHsKICAgICAgICAgICAgICAgIGlmKHNvcnRNb2RlID09PSAnUk9PTScgJiYgZXhhbUlkeCAhPT0gIkFMTCIgJiYgZS5fcm9vbU5hbWUgIT09IGN1cnJlbnRSb29tKSB7CiAgICAgICAgICAgICAgICAgICAgY3VycmVudFJvb20gPSBlLl9yb29tTmFtZTsKICAgICAgICAgICAgICAgICAgICByb3dzICs9IGA8dHIgc3R5bGU9ImJhY2tncm91bmQ6I2VlZTsgZm9udC13ZWlnaHQ6Ym9sZDsiPjx0ZCBjb2xzcGFuPSI0Ij5TYWxsZSA6ICR7Y3VycmVudFJvb219PC90ZD48L3RyPmA7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByb3dzKz1gPHRyPjx0ZD4ke2dldFZhbHVlKGUsWydOb20nXSl9PC90ZD48dGQ+JHtnZXRWYWx1ZShlLFsnUHLDqW5vbSddKX08L3RkPjx0ZD4ke2dldFZhbHVlKGUsWydDbGFzc2UnXSl9PC90ZD48dGQ+JHtlLk51bUFub255bWF0IHx8ICcnfTwvdGQ+PC90cj5gOwogICAgICAgICAgICB9KTsgCiAgICAgICAgICAgIGNvbnN0IGh0bWwgPSBgPGRpdiBjbGFzcz0icHJpbnQtcGFnZS1saXN0Ij48ZGl2IGNsYXNzPSJwcmludC1oZWFkZXIiPjxkaXY+TElTVElORyBBTk9OWU1BVDwvZGl2PiR7bG9nbyA/IGA8aW1nIHNyYz0iJHtsb2dvfSIgY2xhc3M9InByaW50LWxvZ28iPmAgOiAnJ308L2Rpdj48dGFibGUgY2xhc3M9InByaW50LXRhYmxlIj48dGhlYWQ+PHRyPjx0aD5Ob208L3RoPjx0aD5QcsOpbm9tPC90aD48dGg+Q2xhc3NlPC90aD48dGg+TsKwIEFub255bWF0PC90aD48L3RyPjwvdGhlYWQ+PHRib2R5PiR7cm93c308L3Rib2R5PjwvdGFibGU+PC9kaXY+YDsgCiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcmludC1hcmVhJykuaW5uZXJIVE1MID0gaHRtbDsgCiAgICAgICAgICAgIHdpbmRvdy5wcmludCgpOyAKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIHBvcHVsYXRlUmVjYXBGaWx0ZXJzKCkgeyAKICAgICAgICAgICAgY29uc3QgZXhhbVNlbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZWNhcC1leGFtLXNlbGVjdCcpOyAKICAgICAgICAgICAgZXhhbVNlbC5pbm5lckhUTUwgPSAnPG9wdGlvbiB2YWx1ZT0iQUxMIj5Ub3V0ZXMgbGVzIMOpcHJldXZlczwvb3B0aW9uPic7IAogICAgICAgICAgICBBcHBTdGF0ZS5kaXN0cmlidXRpb25EYXRhLmZvckVhY2goKGQsIGkpID0+IHsgCiAgICAgICAgICAgICAgICBpZighZCkgcmV0dXJuOyAKICAgICAgICAgICAgICAgIGNvbnN0IGV4YW0gPSBBcHBTdGF0ZS5lcHJldXZlc1tkLmV4YW1JZHhdOyAKICAgICAgICAgICAgICAgIGV4YW1TZWwuYWRkKG5ldyBPcHRpb24oZ2V0VmFsdWUoZXhhbSwgWydNYXRpw6hyZScsICdFcHJldXZlJ10pLCBpKSk7IAogICAgICAgICAgICB9KTsgCiAgICAgICAgICAgIHVwZGF0ZVJlY2FwUm9vbVNlbGVjdCgpOyAKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIHVwZGF0ZVJlY2FwUm9vbVNlbGVjdCgpIHsgCiAgICAgICAgICAgIGNvbnN0IHJvb21TZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVjYXAtcm9vbS1zZWxlY3QnKTsgCiAgICAgICAgICAgIHJvb21TZWwuaW5uZXJIVE1MID0gJzxvcHRpb24gdmFsdWU9IkFMTCI+VG91dGVzIGxlcyBzYWxsZXMgdXRpbGlzw6llczwvb3B0aW9uPic7IAogICAgICAgICAgICBjb25zdCBleGFtSWR4ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JlY2FwLWV4YW0tc2VsZWN0JykudmFsdWU7IAogICAgICAgICAgICBpZihleGFtSWR4ICE9PSAiQUxMIikgeyAKICAgICAgICAgICAgICAgIGNvbnN0IGRpc3QgPSBBcHBTdGF0ZS5kaXN0cmlidXRpb25EYXRhW2V4YW1JZHhdOyAKICAgICAgICAgICAgICAgIGlmKGRpc3QpIHsKICAgICAgICAgICAgICAgICAgICBkaXN0LnJvb21zLmZvckVhY2gociA9PiB7IAogICAgICAgICAgICAgICAgICAgICAgICBpZihyLnN0dWRlbnRzLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvb21TZWwuYWRkKG5ldyBPcHRpb24oci5uYW1lLCByLm5hbWUpKTsgCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9KSAKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBlbHNlIHsgCiAgICAgICAgICAgICAgICBsZXQgcm9vbXMgPSBuZXcgU2V0KCk7IAogICAgICAgICAgICAgICAgQXBwU3RhdGUuZGlzdHJpYnV0aW9uRGF0YS5mb3JFYWNoKGQgPT4geyAKICAgICAgICAgICAgICAgICAgICBpZihkKSBkLnJvb21zLmZvckVhY2gociA9PiB7IAogICAgICAgICAgICAgICAgICAgICAgICBpZihyLnN0dWRlbnRzLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvb21zLmFkZChyLm5hbWUpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSkgCiAgICAgICAgICAgICAgICB9KTsgCiAgICAgICAgICAgICAgICBBcnJheS5mcm9tKHJvb21zKS5zb3J0KCkuZm9yRWFjaChyID0+IHJvb21TZWwuYWRkKG5ldyBPcHRpb24ociwgcikpKTsgCiAgICAgICAgICAgIH0gCiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBwcmludEdsb2JhbFJlY2FwKCkgeyAKICAgICAgICAgICAgaWYoIUFwcFN0YXRlLmRpc3RyaWJ1dGlvbkRhdGEubGVuZ3RoKSByZXR1cm4gYWxlcnQoIlLDqXBhcnRpdGlvbiB2aWRlIik7IAogICAgICAgICAgICBjb25zdCBleGFtRmlsdGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JlY2FwLWV4YW0tc2VsZWN0JykudmFsdWU7IAogICAgICAgICAgICBjb25zdCByb29tRmlsdGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JlY2FwLXJvb20tc2VsZWN0JykudmFsdWU7IAogICAgICAgICAgICBjb25zdCBsb2dvID0gQXBwU3RhdGUuY29uZmlnLmxvZ29TcmMgfHwgIiI7IAogICAgICAgICAgICBsZXQgaHRtbCA9ICIiOyAKICAgICAgICAgICAgbGV0IGV4YW1zVG9QcmludCA9IChleGFtRmlsdGVyID09PSAiQUxMIikgPyBBcHBTdGF0ZS5kaXN0cmlidXRpb25EYXRhIDogW0FwcFN0YXRlLmRpc3RyaWJ1dGlvbkRhdGFbZXhhbUZpbHRlcl1dOyAKICAgICAgICAgICAgZXhhbXNUb1ByaW50LmZvckVhY2goZGlzdCA9PiB7IAogICAgICAgICAgICAgICAgaWYoIWRpc3QpIHJldHVybjsgCiAgICAgICAgICAgICAgICBjb25zdCBleGFtTmFtZSA9IGdldFZhbHVlKEFwcFN0YXRlLmVwcmV1dmVzW2Rpc3QuZXhhbUlkeF0sIFsnTWF0acOocmUnLCdFcHJldXZlJ10pOyAKICAgICAgICAgICAgICAgIGNvbnN0IGV4YW1JbmZvID0gQXBwU3RhdGUuZXByZXV2ZXNbZGlzdC5leGFtSWR4XTsgCiAgICAgICAgICAgICAgICBkaXN0LnJvb21zLmZvckVhY2gociA9PiB7IAogICAgICAgICAgICAgICAgICAgIGlmKHJvb21GaWx0ZXIgIT09ICJBTEwiICYmIHIubmFtZSAhPT0gcm9vbUZpbHRlcikgcmV0dXJuOyAKICAgICAgICAgICAgICAgICAgICBpZihyLnN0dWRlbnRzLmxlbmd0aCA9PT0gMCkgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgIGxldCBsaXN0ID0gci5zdHVkZW50czsgCiAgICAgICAgICAgICAgICAgICAgaWYobGlzdC5sZW5ndGggPT09IDApIHJldHVybjsgCiAgICAgICAgICAgICAgICAgICAgbGlzdC5zb3J0KChhLGIpID0+IGdldFZhbHVlKGEsWydOb20nXSkubG9jYWxlQ29tcGFyZShnZXRWYWx1ZShiLFsnTm9tJ10pKSk7IAogICAgICAgICAgICAgICAgICAgIGNvbnN0IGlzVFQgPSByLmlzVFQ7IAogICAgICAgICAgICAgICAgICAgIGxldCB0aW1lID0gaXNUVCA/IGdldFZhbHVlKGV4YW1JbmZvLCBbJ0hldXJlIGRlIGTDqWJ1dCB0aWVycyB0ZW1wcycsICdIZXVyZSBUVCddKSA6IGdldFZhbHVlKGV4YW1JbmZvLCBbJ0hldXJlIGRlIGTDqWJ1dCcsICdIZXVyZSddKTsgCiAgICAgICAgICAgICAgICAgICAgaWYoIXRpbWUpIHRpbWUgPSBnZXRWYWx1ZShleGFtSW5mbywgWydIZXVyZSBkZSBkw6lidXQnLCAnSGV1cmUnXSk7IAogICAgICAgICAgICAgICAgICAgIGxldCBkdXJhdGlvbiA9IGlzVFQgPyBnZXRWYWx1ZShleGFtSW5mbywgWydEdXLDqWUgZW4gbWludXRlIHRpZXJzIHRlbXBzJywgJ0R1csOpZSBUVCddKSA6IGdldFZhbHVlKGV4YW1JbmZvLCBbJ0R1csOpZSBlbiBtaW51dGUnLCAnRHVyw6llJ10pOyAKICAgICAgICAgICAgICAgICAgICBpZighZHVyYXRpb24pIGR1cmF0aW9uID0gZ2V0VmFsdWUoZXhhbUluZm8sIFsnRHVyw6llIGVuIG1pbnV0ZScsICdEdXLDqWUnXSk7IAogICAgICAgICAgICAgICAgICAgIGxldCByb3dzID0gIiI7IAogICAgICAgICAgICAgICAgICAgIGxpc3QuZm9yRWFjaChpdGVtID0+IHsgcm93cyArPSBgPHRyPjx0ZD4ke2dldFZhbHVlKGl0ZW0sWydOb20nXSl9PC90ZD48dGQ+JHtnZXRWYWx1ZShpdGVtLFsnUHLDqW5vbSddKX08L3RkPjx0ZD4ke2dldFZhbHVlKGl0ZW0sWydDbGFzc2UnXSl9PC90ZD48L3RyPmA7IH0pOyAKICAgICAgICAgICAgICAgICAgICBjb25zdCBkYXRlU3RyID0gZm9ybWF0RGF0ZShnZXRWYWx1ZShleGFtSW5mbyxbJ0RhdGUnXSkpOyAKICAgICAgICAgICAgICAgICAgICBodG1sICs9IGA8ZGl2IGNsYXNzPSJwcmludC1wYWdlLWxpc3QiIHN0eWxlPSJwYWdlLWJyZWFrLWFmdGVyOiBhbHdheXM7Ij48ZGl2IGNsYXNzPSJwcmludC1oZWFkZXIiPjxkaXY+VEFCTEVBVSBSw4lDQVBJVFVMQVRJRjwvZGl2PiR7bG9nbyA/IGA8aW1nIHNyYz0iJHtsb2dvfSIgY2xhc3M9InByaW50LWxvZ28iPmAgOiAnJ308L2Rpdj48ZGl2IGNsYXNzPSJwcmludC1kb2MtdGl0bGUiPiR7ZXhhbU5hbWV9IC0gU2FsbGUgJHtyLm5hbWV9PC9kaXY+PGRpdiBzdHlsZT0idGV4dC1hbGlnbjpjZW50ZXI7IGZvbnQtc2l6ZToxLjFyZW07IG1hcmdpbi1ib3R0b206MTBweDsiPjxzdHJvbmc+RGF0ZSA6PC9zdHJvbmc+ICR7ZGF0ZVN0cn0gLSA8c3Ryb25nPkTDqWJ1dCA6PC9zdHJvbmc+ICR7dGltZX0gLSA8c3Ryb25nPkR1csOpZSA6PC9zdHJvbmc+ICR7Zm9ybWF0RHVyYXRpb25EaXNwbGF5KGR1cmF0aW9uKX08L2Rpdj48dGFibGUgY2xhc3M9InByaW50LXRhYmxlIj48dGhlYWQ+PHRyPjx0aD5Ob208L3RoPjx0aD5QcsOpbm9tPC90aD48dGg+Q2xhc3NlPC90aD48L3RyPjwvdGhlYWQ+PHRib2R5PiR7cm93c308L3Rib2R5PjwvdGFibGU+PC9kaXY+YDsgCiAgICAgICAgICAgICAgICB9KTsgCiAgICAgICAgICAgIH0pOyAKICAgICAgICAgICAgaWYoaHRtbCA9PT0gIiIpIHJldHVybiBhbGVydCgiQXVjdW5lIGRvbm7DqWUgcG91ciBjZSBmaWx0cmUgKG91IHNhbGxlcyB2aWRlcykuIik7IAogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJpbnQtYXJlYScpLmlubmVySFRNTCA9IGh0bWw7IAogICAgICAgICAgICB3aW5kb3cucHJpbnQoKTsgCiAgICAgICAgfQogICAgICAgIAogICAgICAgIGZ1bmN0aW9uIHByaW50UFYoKSB7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBjb25zdCBleGFtSWR4ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3B2LWV4YW0tc2VsZWN0JykudmFsdWU7CiAgICAgICAgICAgICAgICBjb25zdCByb29tSWR4ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3B2LXJvb20tc2VsZWN0JykudmFsdWU7CiAgICAgICAgICAgICAgICBpZighQXBwU3RhdGUuZGlzdHJpYnV0aW9uRGF0YSB8fCBBcHBTdGF0ZS5kaXN0cmlidXRpb25EYXRhLmxlbmd0aCA9PT0gMCkgeyBhbGVydCgiUsOpcGFydGl0aW9uIG1hbnF1YW50ZS4iKTsgcmV0dXJuOyB9CiAgICAgICAgICAgICAgICBjb25zdCBsb2dvID0gQXBwU3RhdGUuY29uZmlnLmxvZ29TcmMgfHwgIiI7CiAgICAgICAgICAgICAgICBsZXQgaHRtbCA9ICIiOwogICAgICAgICAgICAgICAgbGV0IGV4YW1zVG9QcmludCA9IChleGFtSWR4ID09PSAiQUxMIikgPyBBcHBTdGF0ZS5kaXN0cmlidXRpb25EYXRhIDogW0FwcFN0YXRlLmRpc3RyaWJ1dGlvbkRhdGFbZXhhbUlkeF1dOwogICAgICAgICAgICAgICAgZXhhbXNUb1ByaW50LmZvckVhY2goZXhhbURhdGEgPT4gewogICAgICAgICAgICAgICAgICAgIGlmKCFleGFtRGF0YSkgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IGV4YW1JbmZvID0gQXBwU3RhdGUuZXByZXV2ZXNbZXhhbURhdGEuZXhhbUlkeF07CiAgICAgICAgICAgICAgICAgICAgbGV0IHJvb21zVG9QcmludCA9IChyb29tSWR4ID09PSAiQUxMIiB8fCBleGFtSWR4ID09PSAiQUxMIikgPyBleGFtRGF0YS5yb29tcyA6IFtleGFtRGF0YS5yb29tc1tyb29tSWR4XV07CiAgICAgICAgICAgICAgICAgICAgcm9vbXNUb1ByaW50LmZvckVhY2gocm9vbURhdGEgPT4gewogICAgICAgICAgICAgICAgICAgICAgICBpZihyb29tRGF0YS5zdHVkZW50cy5sZW5ndGggPT09IDApIHJldHVybjsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaXNUVCA9IHJvb21EYXRhLmlzVFQ7CiAgICAgICAgICAgICAgICAgICAgICAgIGxldCB0aW1lID0gaXNUVCA/IGdldFZhbHVlKGV4YW1JbmZvLCBbJ0hldXJlIGRlIGTDqWJ1dCB0aWVycyB0ZW1wcycsICdIZXVyZSBUVCddKSA6IGdldFZhbHVlKGV4YW1JbmZvLCBbJ0hldXJlIGRlIGTDqWJ1dCcsICdIZXVyZSddKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoIXRpbWUpIHRpbWUgPSBnZXRWYWx1ZShleGFtSW5mbywgWydIZXVyZSBkZSBkw6lidXQnLCAnSGV1cmUnXSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBkdXJhdGlvbiA9IGlzVFQgPyBnZXRWYWx1ZShleGFtSW5mbywgWydEdXLDqWUgZW4gbWludXRlIHRpZXJzIHRlbXBzJywgJ0R1csOpZSBUVCddKSA6IGdldFZhbHVlKGV4YW1JbmZvLCBbJ0R1csOpZSBlbiBtaW51dGUnLCAnRHVyw6llJ10pOwogICAgICAgICAgICAgICAgICAgICAgICBpZighZHVyYXRpb24pIGR1cmF0aW9uID0gZ2V0VmFsdWUoZXhhbUluZm8sIFsnRHVyw6llIGVuIG1pbnV0ZScsICdEdXLDqWUnXSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBzdXJ2TmFtZXMgPSBbXTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYocm9vbURhdGEuc3VydmVpbGxhbnRzKSByb29tRGF0YS5zdXJ2ZWlsbGFudHMuZm9yRWFjaChzID0+IHN1cnZOYW1lcy5wdXNoKCh0eXBlb2Ygcz09PSdvYmplY3QnKT9zLm5hbWU6cykpOwogICAgICAgICAgICAgICAgICAgICAgICBodG1sICs9IGA8ZGl2IGNsYXNzPSJwcmludC1wYWdlLWxpc3QiIHN0eWxlPSJwYWdlLWJyZWFrLWFmdGVyOiBhbHdheXM7Ij48ZGl2IGNsYXNzPSJwcmludC1oZWFkZXIiPjxkaXY+JHtBcHBTdGF0ZS5jb25maWcuZXhhbVRpdGxlIHx8ICJFWEFNRU4ifTwvZGl2PiR7bG9nbyA/IGA8aW1nIHNyYz0iJHtsb2dvfSIgY2xhc3M9InByaW50LWxvZ28iPmAgOiAnJ308L2Rpdj48ZGl2IGNsYXNzPSJwcmludC1kb2MtdGl0bGUiPlBST0PDiFMgVkVSQkFMIERFIFNBTExFPC9kaXY+PGRpdiBjbGFzcz0icHJpbnQtaW5mb3MtYm94Ij48c3Ryb25nPsOJcHJldXZlIDo8L3N0cm9uZz4gJHtnZXRWYWx1ZShleGFtSW5mbyxbJ01hdGnDqHJlJywnRXByZXV2ZSddKX08YnI+PHN0cm9uZz5EYXRlIDo8L3N0cm9uZz4gJHtmb3JtYXREYXRlKGdldFZhbHVlKGV4YW1JbmZvLFsnRGF0ZSddKSl9PGJyPjxzdHJvbmc+SGV1cmUgZMOpYnV0IDo8L3N0cm9uZz4gJHt0aW1lfSAtIDxzdHJvbmc+RHVyw6llIDo8L3N0cm9uZz4gJHtmb3JtYXREdXJhdGlvbkRpc3BsYXkoZHVyYXRpb24pfTxicj48c3Ryb25nPlNhbGxlIDo8L3N0cm9uZz4gJHtyb29tRGF0YS5uYW1lfTxicj48c3Ryb25nPk5vbWJyZSBkZSBjYW5kaWRhdHMgOjwvc3Ryb25nPiAke3Jvb21EYXRhLnN0dWRlbnRzLmxlbmd0aH08L2Rpdj48ZGl2IHN0eWxlPSJib3JkZXI6MXB4IHNvbGlkICMwMDA7IHBhZGRpbmc6MTBweDsgaGVpZ2h0OjMwMHB4OyBtYXJnaW4tYm90dG9tOjIwcHg7Ij48c3Ryb25nPk9ic2VydmF0aW9ucyAvIEluY2lkZW50cyA6PC9zdHJvbmc+PC9kaXY+PGRpdiBzdHlsZT0iYm9yZGVyOjFweCBzb2xpZCAjMDAwOyBwYWRkaW5nOjEwcHg7IGhlaWdodDoxNTBweDsgbWFyZ2luLWJvdHRvbToyMHB4OyI+PHN0cm9uZz5BYnNlbnRzIChOb21zIGV0IFByw6lub21zKSA6PC9zdHJvbmc+PC9kaXY+PGRpdiBjbGFzcz0icHYtc2lnbmF0dXJlcyI+PGRpdiBjbGFzcz0icHYtYm94Ij48c3Ryb25nPlNpZ25hdHVyZSBTdXJ2ZWlsbGFudCAxIDo8L3N0cm9uZz48L2Rpdj48ZGl2IGNsYXNzPSJwdi1ib3giPjxzdHJvbmc+U2lnbmF0dXJlIFN1cnZlaWxsYW50IDIgOjwvc3Ryb25nPjwvZGl2PjwvZGl2PjxkaXYgY2xhc3M9ImNvbnZvYy1mb290ZXIiIHN0eWxlPSJqdXN0aWZ5LWNvbnRlbnQ6IGZsZXgtZW5kOyBtYXJnaW4tdG9wOjUwcHg7Ij48ZGl2IGNsYXNzPSJjb252b2Mtc2lnbiIgc3R5bGU9InRleHQtYWxpZ246cmlnaHQ7Ij48ZGl2PkZhaXQgw6AgJHtBcHBTdGF0ZS5jb252b2NUZXh0LmNpdHkgfHwgJ1ZpbGxlJ30sIGxlICR7bmV3IERhdGUoKS50b0xvY2FsZURhdGVTdHJpbmcoJ2ZyLUZSJyl9PC9kaXY+PGRpdiBzdHlsZT0ibWFyZ2luLXRvcDoxMHB4OyBmb250LXdlaWdodDpib2xkOyI+JHtBcHBTdGF0ZS5jb25maWcubmFtZX08L2Rpdj48L2Rpdj48L2Rpdj48L2Rpdj5gOwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJpbnQtYXJlYScpLmlubmVySFRNTCA9IGh0bWw7IHdpbmRvdy5wcmludCgpOwogICAgICAgICAgICB9IGNhdGNoKGUpeyBjb25zb2xlLmVycm9yKGUpOyBhbGVydCgiRXJyZXVyIGltcHJlc3Npb24gUFYiKTsgfQogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gcHJpbnRQb2NoZXR0ZXMoKSB7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBjb25zdCBleGFtSWR4ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3B2LWV4YW0tc2VsZWN0JykudmFsdWU7CiAgICAgICAgICAgICAgICBjb25zdCByb29tSWR4ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3B2LXJvb20tc2VsZWN0JykudmFsdWU7CiAgICAgICAgICAgICAgICBpZighQXBwU3RhdGUuZGlzdHJpYnV0aW9uRGF0YSB8fCBBcHBTdGF0ZS5kaXN0cmlidXRpb25EYXRhLmxlbmd0aCA9PT0gMCkgeyBhbGVydCgiUsOpcGFydGl0aW9uIG1hbnF1YW50ZS4iKTsgcmV0dXJuOyB9CiAgICAgICAgICAgICAgICBjb25zdCBsb2dvID0gQXBwU3RhdGUuY29uZmlnLmxvZ29TcmMgfHwgIiI7CiAgICAgICAgICAgICAgICBjb25zdCBjb25zaWduZXMgPSBBcHBTdGF0ZS5wb2NoZXR0ZVRleHQuc3VydiB8fCAiIjsKICAgICAgICAgICAgICAgIGxldCBodG1sID0gIiI7CiAgICAgICAgICAgICAgICBsZXQgZXhhbXNUb1ByaW50ID0gKGV4YW1JZHggPT09ICJBTEwiKSA/IEFwcFN0YXRlLmRpc3RyaWJ1dGlvbkRhdGEgOiBbQXBwU3RhdGUuZGlzdHJpYnV0aW9uRGF0YVtleGFtSWR4XV07CiAgICAgICAgICAgICAgICBleGFtc1RvUHJpbnQuZm9yRWFjaChleGFtRGF0YSA9PiB7CiAgICAgICAgICAgICAgICAgICAgaWYoIWV4YW1EYXRhKSByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgY29uc3QgZXhhbUluZm8gPSBBcHBTdGF0ZS5lcHJldXZlc1tleGFtRGF0YS5leGFtSWR4XTsKICAgICAgICAgICAgICAgICAgICBsZXQgcm9vbXNUb1ByaW50ID0gKHJvb21JZHggPT09ICJBTEwiIHx8IGV4YW1JZHggPT09ICJBTEwiKSA/IGV4YW1EYXRhLnJvb21zIDogW2V4YW1EYXRhLnJvb21zW3Jvb21JZHhdXTsKICAgICAgICAgICAgICAgICAgICByb29tc1RvUHJpbnQuZm9yRWFjaChyb29tRGF0YSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHJvb21EYXRhLnN0dWRlbnRzLmxlbmd0aCA9PT0gMCkgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpc1RUID0gcm9vbURhdGEuaXNUVDsKICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHRpbWUgPSBpc1RUID8gZ2V0VmFsdWUoZXhhbUluZm8sIFsnSGV1cmUgZGUgZMOpYnV0IHRpZXJzIHRlbXBzJywgJ0hldXJlIFRUJ10pIDogZ2V0VmFsdWUoZXhhbUluZm8sIFsnSGV1cmUgZGUgZMOpYnV0JywgJ0hldXJlJ10pOwogICAgICAgICAgICAgICAgICAgICAgICBpZighdGltZSkgdGltZSA9IGdldFZhbHVlKGV4YW1JbmZvLCBbJ0hldXJlIGRlIGTDqWJ1dCcsICdIZXVyZSddKTsKICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGR1cmF0aW9uID0gaXNUVCA/IGdldFZhbHVlKGV4YW1JbmZvLCBbJ0R1csOpZSBlbiBtaW51dGUgdGllcnMgdGVtcHMnLCAnRHVyw6llIFRUJ10pIDogZ2V0VmFsdWUoZXhhbUluZm8sIFsnRHVyw6llIGVuIG1pbnV0ZScsICdEdXLDqWUnXSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCFkdXJhdGlvbikgZHVyYXRpb24gPSBnZXRWYWx1ZShleGFtSW5mbywgWydEdXLDqWUgZW4gbWludXRlJywgJ0R1csOpZSddKTsKICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHN1cnZOYW1lcyA9IFtdOwogICAgICAgICAgICAgICAgICAgICAgICBpZihyb29tRGF0YS5zdXJ2ZWlsbGFudHMpIHJvb21EYXRhLnN1cnZlaWxsYW50cy5mb3JFYWNoKHMgPT4gc3Vydk5hbWVzLnB1c2goKHR5cGVvZiBzPT09J29iamVjdCcpP3MubmFtZTpzKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGh0bWwgKz0gYDxkaXYgY2xhc3M9InByaW50LXBhZ2UtY29udm9jIj48ZGl2IGNsYXNzPSJwcmludC1oZWFkZXIiPjxkaXYgc3R5bGU9ImZvbnQtc2l6ZToxLjVyZW07IGZvbnQtd2VpZ2h0OmJvbGQ7Ij5QT0NIRVRURSBTVUpFVDwvZGl2PiR7bG9nbyA/IGA8aW1nIHNyYz0iJHtsb2dvfSIgY2xhc3M9InByaW50LWxvZ28iPmAgOiAnJ308L2Rpdj48ZGl2IHN0eWxlPSJib3JkZXI6NHB4IHNvbGlkICMwMDA7IHBhZGRpbmc6MjBweDsgdGV4dC1hbGlnbjpjZW50ZXI7IG1hcmdpbjozMHB4IDA7Ij48aDEgc3R5bGU9ImZvbnQtc2l6ZTozcmVtOyBtYXJnaW46MDsiPiR7cm9vbURhdGEubmFtZX08L2gxPjxoMiBzdHlsZT0iZm9udC1zaXplOjJyZW07IG1hcmdpbjoxMHB4IDA7Ij4ke2dldFZhbHVlKGV4YW1JbmZvLFsnTWF0acOocmUnLCdFcHJldXZlJ10pfTwvaDI+PGgzIHN0eWxlPSJtYXJnaW46MDsiPiR7cm9vbURhdGEuc3R1ZGVudHMubGVuZ3RofSBDb3BpZXM8L2gzPjwvZGl2PjxkaXYgY2xhc3M9InByaW50LWluZm9zLWJveCIgc3R5bGU9ImZvbnQtc2l6ZToxLjJyZW07Ij48c3Ryb25nPkRhdGUgOjwvc3Ryb25nPiAke2Zvcm1hdERhdGUoZ2V0VmFsdWUoZXhhbUluZm8sWydEYXRlJ10pKX08YnI+PHN0cm9uZz5Ib3JhaXJlIDo8L3N0cm9uZz4gJHt0aW1lfTxicj48c3Ryb25nPkR1csOpZSA6PC9zdHJvbmc+ICR7Zm9ybWF0RHVyYXRpb25EaXNwbGF5KGR1cmF0aW9uKX08YnI+PHN0cm9uZz5TdXJ2ZWlsbGFudHMgOjwvc3Ryb25nPiAke3N1cnZOYW1lcy5qb2luKCcgLyAnKX08L2Rpdj48ZGl2IHN0eWxlPSJtYXJnaW4tdG9wOjIwcHg7IGJvcmRlcjoxcHggc29saWQgIzAwMDsgcGFkZGluZzoxNXB4OyBmbGV4OjE7Ij48c3Ryb25nPkNPTlNJR05FUyBBVVggU1VSVkVJTExBTlRTIDo8L3N0cm9uZz48YnI+PGJyPjxkaXYgc3R5bGU9IndoaXRlLXNwYWNlOiBwcmUtd3JhcDsiPiR7Y29uc2lnbmVzfTwvZGl2PjwvZGl2PjxkaXYgY2xhc3M9ImNvbnZvYy1mb290ZXIiIHN0eWxlPSJqdXN0aWZ5LWNvbnRlbnQ6IGZsZXgtZW5kOyI+PGRpdiBjbGFzcz0iY29udm9jLXNpZ24iIHN0eWxlPSJ0ZXh0LWFsaWduOnJpZ2h0OyI+PGRpdj5GYWl0IMOgICR7QXBwU3RhdGUuY29udm9jVGV4dC5jaXR5IHx8ICdWaWxsZSd9LCBsZSAke25ldyBEYXRlKCkudG9Mb2NhbGVEYXRlU3RyaW5nKCdmci1GUicpfTwvZGl2PjxkaXYgc3R5bGU9Im1hcmdpbi10b3A6MTBweDsgZm9udC13ZWlnaHQ6Ym9sZDsiPiR7QXBwU3RhdGUuY29uZmlnLm5hbWV9PC9kaXY+PC9kaXY+PC9kaXY+PC9kaXY+YDsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ByaW50LWFyZWEnKS5pbm5lckhUTUwgPSBodG1sOyB3aW5kb3cucHJpbnQoKTsKICAgICAgICAgICAgfSBjYXRjaChlKXsgY29uc29sZS5lcnJvcihlKTsgYWxlcnQoIkVycmV1ciBpbXByZXNzaW9uIFBvY2hldHRlIik7IH0KICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGZvcm1hdERhdGUoZCkgeyBpZighZCkgcmV0dXJuICIiOyBpZighaXNOYU4oZCkgJiYgZCA+IDEwMDApIHsgY29uc3QgZGF0ZU9iaiA9IG5ldyBEYXRlKChkIC0gKDI1NTY3ICsgMikpKjg2NDAwKjEwMDApOyByZXR1cm4gZGF0ZU9iai50b0xvY2FsZURhdGVTdHJpbmcoJ2ZyLUZSJyk7IH0gcmV0dXJuIGQ7IH0KICAgICAgICBmdW5jdGlvbiBhcHBseUxheW91dCh0eXBlKXsgaWYodHlwZSA9PT0gJ3N0ZCcpIHsgY29uc3QgcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb252b2MtdGVtcGxhdGUnKTsgcy5zdHlsZS5wYWRkaW5nVG9wID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NldHMtc3RkLXRvcCcpLnZhbHVlICsgJ21tJzsgcy5zdHlsZS5wYWRkaW5nQm90dG9tID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NldHMtc3RkLWJvdCcpLnZhbHVlICsgJ21tJzsgcy5zdHlsZS5mb250U2l6ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZXRzLXN0ZC1mb250JykudmFsdWUgKyAncHgnOyB9IGlmKHR5cGUgPT09ICdzdXJ2JykgeyBjb25zdCBzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbnZvYy1zdXJ2LXRlbXBsYXRlJyk7IHMuc3R5bGUucGFkZGluZ1RvcCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZXRzLXN1cnYtdG9wJykudmFsdWUgKyAnbW0nOyBzLnN0eWxlLnBhZGRpbmdCb3R0b20gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2V0cy1zdXJ2LWJvdCcpLnZhbHVlICsgJ21tJzsgcy5zdHlsZS5mb250U2l6ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZXRzLXN1cnYtZm9udCcpLnZhbHVlICsgJ3B4JzsgfSB9CgogICAgICAgIGZ1bmN0aW9uIHVwZGF0ZVJlYWxUaW1lQ291bnRlcnMoKSB7CiAgICAgICAgICAgIGNvbnN0IGNhcmRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnJvb20tY2FyZCcpOwogICAgICAgICAgICBjYXJkcy5mb3JFYWNoKGNhcmQgPT4gewogICAgICAgICAgICAgICAgY29uc3QgYm9keSA9IGNhcmQucXVlcnlTZWxlY3RvcignLnJvb20tYm9keScpOwogICAgICAgICAgICAgICAgY29uc3QgaGVhZGVyQ291bnRTcGFuID0gY2FyZC5xdWVyeVNlbGVjdG9yKCcucm9vbS1oZWFkZXIgPiBkaXYgPiBzcGFuJyk7CiAgICAgICAgICAgICAgICBpZihib2R5ICYmIGhlYWRlckNvdW50U3BhbikgewogICAgICAgICAgICAgICAgICAgICBjb25zdCBjb3VudCA9IGJvZHkuY2hpbGRyZW4ubGVuZ3RoOwogICAgICAgICAgICAgICAgICAgICBjb25zdCBjYXAgPSBib2R5LmdldEF0dHJpYnV0ZSgnZGF0YS1jYXBhY2l0eScpOwogICAgICAgICAgICAgICAgICAgICBoZWFkZXJDb3VudFNwYW4uaW5uZXJUZXh0ID0gYCR7Y291bnR9LyR7Y2FwfWA7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgIH0KCiAgICAgICAgLy8gSU5JVAogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjdXJyZW50LWRhdGUnKS5pbm5lclRleHQgPSBuZXcgRGF0ZSgpLnRvTG9jYWxlRGF0ZVN0cmluZygnZnItRlInKTsKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY3VycmVudC1kYXRlLXN1cnYnKS5pbm5lclRleHQgPSBuZXcgRGF0ZSgpLnRvTG9jYWxlRGF0ZVN0cmluZygnZnItRlInKTsKICAgICAgICBjb25zdCBkZWZhdWx0Q29uc2lnbmVzID0gYC1JbnN0YWxsZXIgbGVzIMOpbMOodmVzIGRhbnMgbGUgc2lsZW5jZVxuLUZhaXJlIMOpdGVpbmRyZSBsZXMgdMOpbMOpcGhvbmVzIGV0IGxlcyBtb250cmVzIGNvbm5lY3TDqWVzIChsZXMgZmFpcmUgcmFuZ2VyIGRhbnMgbGVzIHNhY3MpXG4tRmFpcmUgcmFuZ2VyIGxlcyBzYWNzIHNvdXMgbGUgdGFibGVhdVxuLVbDqXJpZmllciBsZXMgcGnDqGNlcyBkJ2lkZW50aXTDqVxuLUFmZmljaGVyIGxlcyBob3JhaXJlcyBhdSB0YWJsZWF1XG4tRGlzdHJpYnVlciBsZXMgY29waWVzIHJldG91cm7DqWVzXG4tQSBsYSBmaW4gZGUgbCfDqXByZXV2ZSwgbGVzIMOpbMOodmVzIHJlc3RlbnQgw6AgbGV1ciBwbGFjZVxuLVNpZ25hdHVyZSDDqW1hcmdlbWVudCBldCByYW5nZW1lbnQgZGVzIGNvcGllcyBwYXIgb3JkcmUgYWxwaGFiw6l0aXF1ZVxuLUNvbXBsw6l0ZXIgbGUgcHJvY8OocyB2ZXJiYWxcbi1Ew6lwb3NlciB0b3VzIGxlcyDDqWzDqW1lbnRzIGF1IHNlY3LDqXRhcmlhdCBkJ2V4YW1lbmA7CiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3R4dC1wb2NoZXR0ZS1zdXJ2JykudmFsdWUgPSBkZWZhdWx0Q29uc2lnbmVzOwogICAgICAgIEFwcFN0YXRlLnBvY2hldHRlVGV4dC5zdXJ2ID0gZGVmYXVsdENvbnNpZ25lczsKICAgIDwvc2NyaXB0PgoKPHNjcmlwdD4KKGZ1bmN0aW9uKCl7CiAgICBmdW5jdGlvbiBwYXRjaFVJKCkgewogICAgICAgIC8vIEhpZGUgbmFtZSwgcm9sZSBmb3JtLWdyb3VwcwogICAgICAgIHZhciBuYW1lRWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29uZmlnTmFtZScpOwogICAgICAgIHZhciByb2xlRWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29uZmlnUm9sZScpOwogICAgICAgIGlmIChuYW1lRWwpIHsgdmFyIGZnID0gbmFtZUVsLmNsb3Nlc3QoJy5mb3JtLWdyb3VwJyk7IGlmKGZnKSBmZy5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOyB9CiAgICAgICAgaWYgKHJvbGVFbCkgeyB2YXIgZmcgPSByb2xlRWwuY2xvc2VzdCgnLmZvcm0tZ3JvdXAnKTsgaWYoZmcpIGZnLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7IH0KICAgICAgICAvLyBIaWRlIHNlY29uZCBjb25maWctY29sIChsb2dvICsgc2lnbmF0dXJlKQogICAgICAgIHZhciBjb2xzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnI3ZpZXcxIC5jb25maWctY29sJyk7CiAgICAgICAgaWYgKGNvbHMubGVuZ3RoID49IDIpIGNvbHNbMV0uc3R5bGUuZGlzcGxheSA9ICdub25lJzsKICAgICAgICAvLyBBZGQgaW5mbyBiYW5uZXIgYWZ0ZXIgaGVhZGVyCiAgICAgICAgdmFyIGhlYWRlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN2aWV3MSAuaGVhZGVyLXBhbmVsJyk7CiAgICAgICAgaWYgKGhlYWRlciAmJiAhZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BpbG90ZS1ub3RpY2UnKSkgewogICAgICAgICAgICB2YXIgZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgICAgICAgICBkLmlkID0gJ3BpbG90ZS1ub3RpY2UnOwogICAgICAgICAgICBkLnN0eWxlLmNzc1RleHQgPSAnYmFja2dyb3VuZDojZWFmNGZlO2JvcmRlcjoxcHggc29saWQgIzM0OThkYjtib3JkZXItcmFkaXVzOjhweDtwYWRkaW5nOjEwcHggMTZweDttYXJnaW4tYm90dG9tOjE1cHg7Zm9udC1zaXplOjAuODVyZW07Y29sb3I6IzJjM2U1MDtkaXNwbGF5OmZsZXg7YWxpZ24taXRlbXM6Y2VudGVyO2dhcDoxMHB4Oyc7CiAgICAgICAgICAgIGQuaW5uZXJIVE1MID0gJzxpIGNsYXNzPSJmYXMgZmEtaW5mby1jaXJjbGUiIHN0eWxlPSJjb2xvcjojMzQ5OGRiO2ZvbnQtc2l6ZToxLjFyZW07Ij48L2k+IE5vbSwgZm9uY3Rpb24sIGxvZ28gZXQgc2lnbmF0dXJlIHNvbnQgZGFucyBsZSBtZW51IDxzdHJvbmc+UGFyYW3DqHRyZXMg4pqZPC9zdHJvbmc+IGRlIGxhIGJhcnJlIHByaW5jaXBhbGUuJzsKICAgICAgICAgICAgaGVhZGVyLmFmdGVyKGQpOwogICAgICAgIH0KICAgIH0KICAgIHNldFRpbWVvdXQocGF0Y2hVSSwgMTUwKTsKICAgIHNldFRpbWVvdXQocGF0Y2hVSSwgNjAwKTsKCiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIGZ1bmN0aW9uKGUpIHsKICAgICAgICBpZiAoIWUuZGF0YSB8fCBlLmRhdGEudHlwZSAhPT0gJ3BpbG90ZS1zZXR0aW5ncycpIHJldHVybjsKICAgICAgICB2YXIgcyA9IGUuZGF0YS5kYXRhOwogICAgICAgIHRyeSB7CiAgICAgICAgICAgIGlmICh0eXBlb2YgQXBwU3RhdGUgIT09ICd1bmRlZmluZWQnKSB7CiAgICAgICAgICAgICAgICBpZiAocy5uYW1lKSB7IEFwcFN0YXRlLmNvbmZpZy5uYW1lID0gcy5uYW1lOyB2YXIgZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29uZmlnTmFtZScpOyBpZihlbCkgZWwudmFsdWUgPSBzLm5hbWU7IH0KICAgICAgICAgICAgICAgIGlmIChzLnJvbGUpIHsgQXBwU3RhdGUuY29uZmlnLnJvbGUgPSBzLnJvbGU7IHZhciBlbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb25maWdSb2xlJyk7IGlmKGVsKSBlbC52YWx1ZSA9IHMucm9sZTsgfQogICAgICAgICAgICAgICAgaWYgKHMubG9nb1NyYykgeyBBcHBTdGF0ZS5jb25maWcubG9nb1NyYyA9IHMubG9nb1NyYzsgdmFyIGVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvZ29QcmV2aWV3Jyk7IGlmKGVsKXtlbC5zcmM9cy5sb2dvU3JjO2VsLnN0eWxlLmRpc3BsYXk9J2Jsb2NrJzt9IH0KICAgICAgICAgICAgICAgIGlmIChzLnNpZ25TcmMpIHsgQXBwU3RhdGUuY29uZmlnLnNpZ25TcmMgPSBzLnNpZ25TcmM7IHZhciBlbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzaWduUHJldmlldycpOyBpZihlbCl7ZWwuc3JjPXMuc2lnblNyYztlbC5zdHlsZS5kaXNwbGF5PSdibG9jayc7fSB9CiAgICAgICAgICAgIH0KICAgICAgICAKICAgICAgICAgICAgICAgIGlmIChzLnRlYWNoZXJzICYmIHMudGVhY2hlcnMubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgICAgQXBwU3RhdGUuc3VydmVpbGxhbnRzID0gcy50ZWFjaGVyczsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBjYXRjaChlcnIpIHt9CiAgICB9KTsKICAgIHdpbmRvdy5wYXJlbnQucG9zdE1lc3NhZ2UoeyB0eXBlOiAncGlsb3RlLW1vZHVsZS1yZWFkeScsIG1vZHVsZTogJ2V4YW0nIH0sICcqJyk7Cn0pKCk7Cjwvc2NyaXB0PgoKCjxzY3JpcHQ+CmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBmdW5jdGlvbihlKSB7CiAgICBpZiAoIWUuY3RybEtleSB8fCBlLnNoaWZ0S2V5IHx8IGUuYWx0S2V5IHx8IGUubWV0YUtleSkgcmV0dXJuOwogICAgdmFyIGtleSA9IGUua2V5LnRvTG93ZXJDYXNlKCk7CiAgICBpZiAoWydwJywnZScsJ28nLCdhJywnZCddLmluZGV4T2Yoa2V5KSA+PSAwKSB7CiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgIHdpbmRvdy5wYXJlbnQucG9zdE1lc3NhZ2Uoe3R5cGU6J3BpbG90ZS1zaG9ydGN1dCcsIGtleTprZXl9LCAnKicpOwogICAgfQp9KTsKPC9zY3JpcHQ+CjwvYm9keT4KPC9odG1sPg==",
  "oral": "PCFET0NUWVBFIGh0bWw+CjxodG1sIGxhbmc9ImZyIj4KPGhlYWQ+CiAgICA8bWV0YSBjaGFyc2V0PSJVVEYtOCI+CiAgICA8bWV0YSBuYW1lPSJ2aWV3cG9ydCIgY29udGVudD0id2lkdGg9ZGV2aWNlLXdpZHRoLCBpbml0aWFsLXNjYWxlPTEuMCI+CiAgICA8dGl0bGU+T1JBTCBQSUxPVEUgLSBHZXN0aW9uIE9yYXV4ICYgw4ljcml0czwvdGl0bGU+CiAgICAKICAgIDxzY3JpcHQgc3JjPSJodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy94bHN4LzAuMTguNS94bHN4LmZ1bGwubWluLmpzIj48L3NjcmlwdD4KICAgIDxzY3JpcHQgc3JjPSJodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9mb250LWF3ZXNvbWUvNi40LjAvY3NzL2FsbC5taW4uY3NzIj48L3NjcmlwdD4KICAgIAogICAgPGxpbmsgaHJlZj0iaHR0cHM6Ly9mb250cy5nb29nbGVhcGlzLmNvbS9jc3MyP2ZhbWlseT1Sb2JvdG86d2dodEAzMDA7NDAwOzUwMDs3MDA7OTAwJmRpc3BsYXk9c3dhcCIgcmVsPSJzdHlsZXNoZWV0Ij4KCiAgICA8c3R5bGU+CiAgICAgICAgOnJvb3QgewogICAgICAgICAgICAtLXByaW1hcnktY29sb3I6ICMyOTgwYjk7IC8qIEJsZXUgcGx1cyBpbnN0aXR1dGlvbm5lbCBwb3VyIE9yYXV4ICovCiAgICAgICAgICAgIC0tc2Vjb25kYXJ5LWNvbG9yOiAjMzQ5OGRiOwogICAgICAgICAgICAtLWFjY2VudC1jb2xvcjogI2U2N2UyMjsKICAgICAgICAgICAgLS1iZy1jb2xvcjogI2Y0ZjZmODsKICAgICAgICAgICAgLS10ZXh0LWNvbG9yOiAjMmMzZTUwOwogICAgICAgICAgICAtLXNpZGViYXItd2lkdGg6IDI4MHB4OwogICAgICAgICAgICAtLXRvb2xiYXItaGVpZ2h0OiA2MHB4OwogICAgICAgIH0KCiAgICAgICAgYm9keSB7IGZvbnQtZmFtaWx5OiAnUm9ib3RvJywgc2Fucy1zZXJpZjsgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tYmctY29sb3IpOyBtYXJnaW46IDA7IHBhZGRpbmc6IDA7IGRpc3BsYXk6IGZsZXg7IGhlaWdodDogMTAwdmg7IGNvbG9yOiB2YXIoLS10ZXh0LWNvbG9yKTsgb3ZlcmZsb3c6IGhpZGRlbjsgfQoKICAgICAgICAvKiBTSURFQkFSICovCiAgICAgICAgLnNpZGViYXIgeyB3aWR0aDogdmFyKC0tc2lkZWJhci13aWR0aCk7IGJhY2tncm91bmQtY29sb3I6ICMyYzNlNTA7IGNvbG9yOiB3aGl0ZTsgZGlzcGxheTogZmxleDsgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsgYm94LXNoYWRvdzogMnB4IDAgNXB4IHJnYmEoMCwwLDAsMC4xKTsgZmxleC1zaHJpbms6IDA7IHotaW5kZXg6IDEwMDsgfQogICAgICAgIC5icmFuZCB7IHBhZGRpbmc6IDE1cHg7IHRleHQtYWxpZ246IGNlbnRlcjsgYmFja2dyb3VuZC1jb2xvcjogIzFhMjUyZjsgYm9yZGVyLWJvdHRvbTogM3B4IHNvbGlkIHZhcigtLXByaW1hcnktY29sb3IpOyB9CiAgICAgICAgLmJyYW5kIGgxIHsgbWFyZ2luOiAwOyBmb250LXNpemU6IDEuM3JlbTsgZm9udC13ZWlnaHQ6IDkwMDsgbGV0dGVyLXNwYWNpbmc6IDFweDsgfQogICAgICAgIC5zdGVwcy1uYXYgeyBmbGV4OiAxOyBwYWRkaW5nOiA1cHggMDsgb3ZlcmZsb3cteTogYXV0bzsgfQogICAgICAgIC5zdGVwLWJ0biB7IGRpc3BsYXk6IGZsZXg7IGFsaWduLWl0ZW1zOiBjZW50ZXI7IHBhZGRpbmc6IDEwcHggMTVweDsgY29sb3I6ICNlY2YwZjE7IHRleHQtZGVjb3JhdGlvbjogbm9uZTsgdHJhbnNpdGlvbjogYWxsIDAuMnM7IGJvcmRlci1sZWZ0OiA0cHggc29saWQgdHJhbnNwYXJlbnQ7IGN1cnNvcjogcG9pbnRlcjsgZm9udC1zaXplOiAwLjg1cmVtOyBib3JkZXItYm90dG9tOiAxcHggc29saWQgcmdiYSgyNTUsMjU1LDI1NSwwLjAzKTsgfQogICAgICAgIC5zdGVwLWJ0bjpob3ZlciwgLnN0ZXAtYnRuLmFjdGl2ZSB7IGJhY2tncm91bmQtY29sb3I6ICMzNDQ5NWU7IGJvcmRlci1sZWZ0LWNvbG9yOiB2YXIoLS1wcmltYXJ5LWNvbG9yKTsgcGFkZGluZy1sZWZ0OiAyMHB4OyB9CiAgICAgICAgLnN0ZXAtYnRuIGkgeyBtYXJnaW4tcmlnaHQ6IDEycHg7IHdpZHRoOiAxOHB4OyB0ZXh0LWFsaWduOiBjZW50ZXI7IGNvbG9yOiAjYmRjM2M3OyB9CiAgICAgICAgLnN0ZXAtYnRuLmFjdGl2ZSBpIHsgY29sb3I6IHZhcigtLXByaW1hcnktY29sb3IpOyB9CiAgICAgICAgLmZvb3Rlci1pbmZvIHsgcGFkZGluZzogMTBweDsgZm9udC1zaXplOiAwLjY1cmVtOyB0ZXh0LWFsaWduOiBjZW50ZXI7IG9wYWNpdHk6IDAuNTsgYmFja2dyb3VuZDogIzFhMjUyZjsgYm9yZGVyLXRvcDogMXB4IHNvbGlkICMzNDQ5NWU7IH0KCiAgICAgICAgLyogTUFJTiAqLwogICAgICAgIC5tYWluLXdyYXBwZXIgeyBmbGV4OiAxOyBkaXNwbGF5OiBmbGV4OyBmbGV4LWRpcmVjdGlvbjogY29sdW1uOyBvdmVyZmxvdzogaGlkZGVuOyB9CiAgICAgICAgLmdsb2JhbC10b29sYmFyIHsgaGVpZ2h0OiB2YXIoLS10b29sYmFyLWhlaWdodCk7IGJhY2tncm91bmQ6IHdoaXRlOyBib3JkZXItYm90dG9tOiAxcHggc29saWQgI2RkZDsgZGlzcGxheTogZmxleDsgYWxpZ24taXRlbXM6IGNlbnRlcjsganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOyBwYWRkaW5nOiAwIDMwcHg7IGJveC1zaGFkb3c6IDAgMnB4IDVweCByZ2JhKDAsMCwwLDAuMDUpOyB6LWluZGV4OiA1MDsgfQogICAgICAgIC50b29sYmFyLXRpdGxlIHsgZm9udC13ZWlnaHQ6IGJvbGQ7IGZvbnQtc2l6ZTogMS4xcmVtOyBjb2xvcjogIzdmOGM4ZDsgZGlzcGxheTogZmxleDsgYWxpZ24taXRlbXM6IGNlbnRlcjsgZ2FwOiAxMHB4OyB9CiAgICAgICAgLnRvb2xiYXItYWN0aW9ucyB7IGRpc3BsYXk6IGZsZXg7IGdhcDogMTBweDsgfQogICAgICAgIC5idG4tdG9vbGJhciB7IHBhZGRpbmc6IDhweCAxNXB4OyBib3JkZXI6IG5vbmU7IGJvcmRlci1yYWRpdXM6IDRweDsgY3Vyc29yOiBwb2ludGVyOyBmb250LXNpemU6IDAuOXJlbTsgZm9udC13ZWlnaHQ6IDUwMDsgZGlzcGxheTogZmxleDsgYWxpZ24taXRlbXM6IGNlbnRlcjsgZ2FwOiA4cHg7IHRyYW5zaXRpb246IDAuMnM7IH0KICAgICAgICAuYnRuLXNhdmUtcHJvamVjdCB7IGJhY2tncm91bmQtY29sb3I6ICMyN2FlNjA7IGNvbG9yOiB3aGl0ZTsgfSAKICAgICAgICAuYnRuLWxvYWQtcHJvamVjdCB7IGJhY2tncm91bmQtY29sb3I6ICMzNDQ5NWU7IGNvbG9yOiB3aGl0ZTsgfQogICAgICAgIC5tYWluLWNvbnRlbnQgeyBmbGV4OiAxOyBvdmVyZmxvdy15OiBhdXRvOyBwYWRkaW5nOiAyMHB4OyBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1iZy1jb2xvcik7IH0KCiAgICAgICAgLyogVUkgRUxFTUVOVFMgKi8KICAgICAgICAuaGVhZGVyLXBhbmVsIHsgZGlzcGxheTogZmxleDsganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOyBhbGlnbi1pdGVtczogY2VudGVyOyBtYXJnaW4tYm90dG9tOiAxNXB4OyBib3JkZXItYm90dG9tOiAycHggc29saWQgI2UwZTBlMDsgcGFkZGluZy1ib3R0b206IDEwcHg7IH0KICAgICAgICAuaGVhZGVyLXBhbmVsIGgyIHsgbWFyZ2luOiAwOyBmb250LXNpemU6IDEuNnJlbTsgY29sb3I6IHZhcigtLXByaW1hcnktY29sb3IpOyB9CiAgICAgICAgLnNlY3Rpb24tdmlldyB7IGRpc3BsYXk6IG5vbmU7IGFuaW1hdGlvbjogZmFkZUluIDAuM3MgZWFzZTsgfQogICAgICAgIC5zZWN0aW9uLXZpZXcuYWN0aXZlIHsgZGlzcGxheTogYmxvY2s7IH0KICAgICAgICAuY2FyZCB7IGJhY2tncm91bmQ6IHdoaXRlOyBib3JkZXItcmFkaXVzOiA4cHg7IHBhZGRpbmc6IDIwcHg7IGJveC1zaGFkb3c6IDAgMnB4IDEwcHggcmdiYSgwLDAsMCwwLjA1KTsgbWFyZ2luLWJvdHRvbTogMjBweDsgfQoKICAgICAgICAvKiBJTVBPUlQgKi8KICAgICAgICAuaW1wb3J0LWdyaWQgeyBkaXNwbGF5OiBncmlkOyBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IHJlcGVhdCgyLCAxZnIpOyBnYXA6IDIwcHg7IH0KICAgICAgICAuZmlsZS1kcm9wLXpvbmUgeyBib3JkZXI6IDJweCBkYXNoZWQgI2JkYzNjNzsgYm9yZGVyLXJhZGl1czogOHB4OyBwYWRkaW5nOiAyMHB4OyB0ZXh0LWFsaWduOiBjZW50ZXI7IHRyYW5zaXRpb246IDAuM3M7IHBvc2l0aW9uOiByZWxhdGl2ZTsgYmFja2dyb3VuZDogI2ZmZjsgbWluLWhlaWdodDogMTIwcHg7IGRpc3BsYXk6IGZsZXg7IGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47IGp1c3RpZnktY29udGVudDogY2VudGVyOyBhbGlnbi1pdGVtczogY2VudGVyOyB9CiAgICAgICAgLmZpbGUtZHJvcC16b25lOmhvdmVyIHsgYm9yZGVyLWNvbG9yOiB2YXIoLS1wcmltYXJ5LWNvbG9yKTsgYmFja2dyb3VuZDogI2ViZjVmYjsgfQogICAgICAgIC5maWxlLWRyb3Atem9uZS5sb2FkZWQgeyBib3JkZXItY29sb3I6ICMyN2FlNjA7IGJhY2tncm91bmQ6ICNmMGZmZjQ7IH0KICAgICAgICAuZmlsZS1kcm9wLXpvbmUgaW5wdXRbdHlwZT1maWxlXSB7IHBvc2l0aW9uOiBhYnNvbHV0ZTsgdG9wOiAwOyBsZWZ0OiAwOyB3aWR0aDogMTAwJTsgaGVpZ2h0OiAxMDAlOyBvcGFjaXR5OiAwOyBjdXJzb3I6IHBvaW50ZXI7IH0KICAgICAgICAuc3RhdHVzLWJhZGdlIHsgZGlzcGxheTogbm9uZTsgbWFyZ2luLXRvcDogMTBweDsgZm9udC13ZWlnaHQ6IGJvbGQ7IGZvbnQtc2l6ZTogMC45cmVtOyBwYWRkaW5nOiA1cHggMTBweDsgYm9yZGVyLXJhZGl1czogMTVweDsgfQogICAgICAgIC5zdGF0dXMtb2sgeyBiYWNrZ3JvdW5kOiAjMjdhZTYwOyBjb2xvcjogd2hpdGU7IH0KCiAgICAgICAgLyogQ09ORklHICovCiAgICAgICAgLmNvbmZpZy1jb250YWluZXIgeyBkaXNwbGF5OiBmbGV4OyBnYXA6IDQwcHg7IH0KICAgICAgICAuY29uZmlnLWNvbCB7IGZsZXg6IDE7IGJhY2tncm91bmQ6IHdoaXRlOyBwYWRkaW5nOiAzMHB4OyBib3JkZXItcmFkaXVzOiA4cHg7IGJveC1zaGFkb3c6IDAgMnB4IDEwcHggcmdiYSgwLDAsMCwwLjA1KTsgfQogICAgICAgIC5mb3JtLWdyb3VwIHsgbWFyZ2luLWJvdHRvbTogMjBweDsgfQogICAgICAgIC5mb3JtLWdyb3VwIGxhYmVsIHsgZGlzcGxheTogYmxvY2s7IG1hcmdpbi1ib3R0b206IDhweDsgZm9udC13ZWlnaHQ6IGJvbGQ7IGNvbG9yOiAjMzQ0OTVlOyBmb250LXNpemU6IDEuMXJlbTsgfQogICAgICAgIC5mb3JtLWdyb3VwIGlucHV0IHsgd2lkdGg6IDEwMCU7IHBhZGRpbmc6IDEycHg7IGJvcmRlcjogMXB4IHNvbGlkICNkZGQ7IGJvcmRlci1yYWRpdXM6IDVweDsgZm9udC1zaXplOiAxcmVtOyBib3gtc2l6aW5nOiBib3JkZXItYm94OyB9CiAgICAgICAgLnByZXZpZXctYm94IHsgd2lkdGg6IDEwMCU7IGhlaWdodDogMTUwcHg7IGJvcmRlcjogMnB4IHNvbGlkICNlZWU7IGRpc3BsYXk6IGZsZXg7IGFsaWduLWl0ZW1zOiBjZW50ZXI7IGp1c3RpZnktY29udGVudDogY2VudGVyOyBtYXJnaW4tdG9wOiAxMHB4OyBiYWNrZ3JvdW5kOiAjZmFmYWZhOyB9CiAgICAgICAgLnByZXZpZXctYm94IGltZyB7IG1heC1oZWlnaHQ6IDEwMCU7IG1heC13aWR0aDogMTAwJTsgfQoKICAgICAgICAvKiBSRVBBUlRJVElPTiAmIE9SQVVYICovCiAgICAgICAgLmV4YW0tbmF2aWdhdGlvbi1iYXIgeyBiYWNrZ3JvdW5kOiAjZmZmOyBwYWRkaW5nOiAxNXB4OyBib3JkZXItcmFkaXVzOiA4cHg7IGJveC1zaGFkb3c6IDAgMnB4IDVweCByZ2JhKDAsMCwwLDAuMDUpOyBkaXNwbGF5OiBmbGV4OyBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47IGFsaWduLWl0ZW1zOiBjZW50ZXI7IG1hcmdpbi1ib3R0b206IDIwcHg7IGJvcmRlcjogMXB4IHNvbGlkICNkZGQ7IH0KICAgICAgICAubmF2LWJ0biB7IGJhY2tncm91bmQ6ICMyYzNlNTA7IGNvbG9yOiB3aGl0ZTsgYm9yZGVyOiBub25lOyBwYWRkaW5nOiAxMHB4IDIwcHg7IGJvcmRlci1yYWRpdXM6IDVweDsgY3Vyc29yOiBwb2ludGVyOyBmb250LXdlaWdodDogYm9sZDsgZGlzcGxheTogZmxleDsgYWxpZ24taXRlbXM6IGNlbnRlcjsgZ2FwOiAxMHB4OyB9CiAgICAgICAgLmV4YW0tc2VsZWN0b3IgeyBwYWRkaW5nOiAxMHB4OyBmb250LXNpemU6IDFyZW07IGJvcmRlcjogMXB4IHNvbGlkICNjY2M7IGJvcmRlci1yYWRpdXM6IDVweDsgbWluLXdpZHRoOiAzMDBweDsgfQogICAgICAgIAogICAgICAgIC5leGFtLXNlY3Rpb24tYmxvY2sgeyBib3JkZXI6IDFweCBzb2xpZCAjY2NjOyBiYWNrZ3JvdW5kOiAjZmZmOyBib3JkZXItcmFkaXVzOiA4cHg7IHBhZGRpbmc6IDE1cHg7IGJveC1zaGFkb3c6IDAgNHB4IDEwcHggcmdiYSgwLDAsMCwwLjA1KTsgfQogICAgICAgIC5leGFtLXNlY3Rpb24taGVhZGVyIHsgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tcHJpbWFyeS1jb2xvcik7IGNvbG9yOiB3aGl0ZTsgcGFkZGluZzogMTVweDsgYm9yZGVyLXJhZGl1czogNnB4OyBtYXJnaW4tYm90dG9tOiAxNXB4OyBkaXNwbGF5OiBmbGV4OyBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47IGZvbnQtc2l6ZTogMS4ycmVtOyBmb250LXdlaWdodDogYm9sZDsgfQogICAgICAgIC5zdG9yYWdlLXpvbmUgeyBiYWNrZ3JvdW5kOiAjZWNmMGYxOyBib3JkZXI6IDNweCBkYXNoZWQgI2JkYzNjNzsgcGFkZGluZzogMTBweDsgYm9yZGVyLXJhZGl1czogOHB4OyBtaW4taGVpZ2h0OiA4MHB4OyBtYXgtaGVpZ2h0OiAyMDBweDsgb3ZlcmZsb3cteTogYXV0bzsgZGlzcGxheTogZmxleDsgZmxleC13cmFwOiB3cmFwOyBnYXA6IDEwcHg7IGFsaWduLWNvbnRlbnQ6IGZsZXgtc3RhcnQ7IG1hcmdpbi1ib3R0b206IDIwcHg7IH0KICAgICAgICAucm9vbXMtZ3JpZCB7IGRpc3BsYXk6IGdyaWQ7IGdyaWQtdGVtcGxhdGUtY29sdW1uczogcmVwZWF0KGF1dG8tZmlsbCwgbWlubWF4KDM0MHB4LCAxZnIpKTsgZ2FwOiAyNXB4OyB9IC8qIFNsaWdodGx5IHdpZGVyIGZvciBvcmFsIGNvbnRyb2xzICovCiAgICAgICAgLnJvb20tY2FyZCB7IGJhY2tncm91bmQ6IHdoaXRlOyBib3JkZXI6IDFweCBzb2xpZCAjZGRkOyBib3JkZXItcmFkaXVzOiA4cHg7IGRpc3BsYXk6IGZsZXg7IGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47IGhlaWdodDogNjAwcHg7IGJveC1zaGFkb3c6IDAgNHB4IDZweCByZ2JhKDAsMCwwLDAuMDUpOyB9CiAgICAgICAgLnJvb20tY2FyZC5yb29tLXR0IHsgYm9yZGVyOiA0cHggc29saWQgdmFyKC0tYWNjZW50LWNvbG9yKTsgYmFja2dyb3VuZC1jb2xvcjogI2ZmZmNmNTsgfQogICAgICAgIC5yb29tLWhlYWRlciB7IHBhZGRpbmc6IDEwcHg7IGJhY2tncm91bmQ6ICMyYzNlNTA7IGNvbG9yOiB3aGl0ZTsgYm9yZGVyLXJhZGl1czogNnB4IDZweCAwIDA7IGZvbnQtd2VpZ2h0OiBib2xkOyBmb250LXNpemU6IDAuOTVyZW07IH0KICAgICAgICAucm9vbS1oZWFkZXItdG9wIHsgZGlzcGxheTogZmxleDsganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOyBhbGlnbi1pdGVtczogY2VudGVyOyBtYXJnaW4tYm90dG9tOiA1cHg7fQogICAgICAgIC5yb29tLXR0IC5yb29tLWhlYWRlciB7IGJhY2tncm91bmQ6IHZhcigtLWFjY2VudC1jb2xvcik7IGNvbG9yOiAjMmMzZTUwOyB9CiAgICAgICAgLnJvb20tc3VydmVpbGxhbnRzLWFyZWEgeyBwYWRkaW5nOiAxMHB4OyBib3JkZXItYm90dG9tOiAxcHggc29saWQgI2VlZTsgYmFja2dyb3VuZDogI2Y4ZjlmYTsgbWF4LWhlaWdodDogMTIwcHg7IG92ZXJmbG93LXk6IGF1dG87IH0KICAgICAgICAuc3VydmVpbGxhbnQtcm93IHsgZGlzcGxheTogZmxleDsgZ2FwOiA1cHg7IG1hcmdpbi1ib3R0b206IDVweDsgfQogICAgICAgIC5zdXJ2ZWlsbGFudC1yb3cgc2VsZWN0IHsgd2lkdGg6IDEwMCU7IHBhZGRpbmc6IDVweDsgYm9yZGVyOiAxcHggc29saWQgI2NjYzsgYm9yZGVyLXJhZGl1czogNHB4OyBmb250LXNpemU6IDAuODVyZW07IH0KICAgICAgICAuYnRuLWFkZC1zdXJ2IHsgYmFja2dyb3VuZDogIzI3YWU2MDsgY29sb3I6IHdoaXRlOyBib3JkZXI6IG5vbmU7IGJvcmRlci1yYWRpdXM6IDAgMCA0cHggNHB4OyBjdXJzb3I6IHBvaW50ZXI7IHdpZHRoOiAxMDAlOyBwYWRkaW5nOiA2cHg7IGZvbnQtc2l6ZTogMC44cmVtOyB9CiAgICAgICAgLnJvb20tYm9keSB7IGZsZXg6IDE7IHBhZGRpbmc6IDEwcHg7IG92ZXJmbG93LXk6IGF1dG87IGJhY2tncm91bmQtY29sb3I6ICNmZmY7IH0KICAgICAgICAKICAgICAgICAuc3R1ZGVudC1pdGVtIHsgYmFja2dyb3VuZDogd2hpdGU7IGJvcmRlcjogMXB4IHNvbGlkICNlMGUwZTA7IHBhZGRpbmc6IDhweDsgbWFyZ2luLWJvdHRvbTogOHB4OyBib3JkZXItcmFkaXVzOiA0cHg7IGN1cnNvcjogZ3JhYjsgZm9udC1zaXplOiAwLjg1cmVtOyBkaXNwbGF5OiBmbGV4OyBmbGV4LWRpcmVjdGlvbjogY29sdW1uOyBnYXA6NXB4OyBib3gtc2hhZG93OiAwIDFweCAycHggcmdiYSgwLDAsMCwwLjAzKTsgfQogICAgICAgIC5zdHVkZW50LWl0ZW0uaXMtdHQgeyBib3JkZXItbGVmdDogNXB4IHNvbGlkIHZhcigtLWFjY2VudC1jb2xvcik7IGJhY2tncm91bmQ6ICNmZmZjZjA7IH0KICAgICAgICAuc3R1ZGVudC1tYWluLWluZm8geyBkaXNwbGF5OiBmbGV4OyBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47IGZvbnQtd2VpZ2h0OiA1MDA7IH0KICAgICAgICAuc3R1ZGVudC1vcmFsLWNvbnRyb2xzIHsgZGlzcGxheTogZmxleDsgZ2FwOiA1cHg7IGFsaWduLWl0ZW1zOiBjZW50ZXI7IGJhY2tncm91bmQ6ICNmMWYyZjY7IHBhZGRpbmc6IDRweDsgYm9yZGVyLXJhZGl1czogNHB4O30KICAgICAgICAuc3R1ZGVudC1vcmFsLWNvbnRyb2xzIGxhYmVsIHsgZm9udC1zaXplOiAwLjdyZW07IGNvbG9yOiAjN2Y4YzhkOyBmb250LXdlaWdodDogYm9sZDt9CiAgICAgICAgLnN0dWRlbnQtb3JhbC1jb250cm9scyBpbnB1dFt0eXBlPSJ0aW1lIl0geyBib3JkZXI6IDFweCBzb2xpZCAjY2NjOyBib3JkZXItcmFkaXVzOiAzcHg7IGZvbnQtc2l6ZTogMC44cmVtOyBwYWRkaW5nOiAycHg7IHdpZHRoOiA2NXB4OyB9CgogICAgICAgIC5zY2hlZHVsZS1idG4geyBiYWNrZ3JvdW5kOiAjOGU0NGFkOyBjb2xvcjogd2hpdGU7IGJvcmRlcjpub25lOyBib3JkZXItcmFkaXVzOjNweDsgZm9udC1zaXplOjAuN3JlbTsgcGFkZGluZzogM3B4IDhweDsgY3Vyc29yOiBwb2ludGVyOyBkaXNwbGF5OiBmbGV4OyBhbGlnbi1pdGVtczogY2VudGVyOyBnYXA6IDRweDt9CiAgICAgICAgLnNjaGVkdWxlLWJ0bjpob3ZlciB7IGJhY2tncm91bmQ6ICM5YjU5YjY7IH0KCiAgICAgICAgLyogQ09NTU9OICovCiAgICAgICAgLmNvbnRyb2xzLWJhciB7IGRpc3BsYXk6IGZsZXg7IGdhcDogMTVweDsgbWFyZ2luLWJvdHRvbTogMjBweDsgYWxpZ24taXRlbXM6IGNlbnRlcjsgYmFja2dyb3VuZDogd2hpdGU7IHBhZGRpbmc6IDE1cHg7IGJvcmRlci1yYWRpdXM6IDhweDsgYm94LXNoYWRvdzogMCAycHggNXB4IHJnYmEoMCwwLDAsMC4wNSk7IGZsZXgtd3JhcDogd3JhcDt9CiAgICAgICAgLmFjdGlvbi1idG4geyBwYWRkaW5nOiAxMHB4IDE1cHg7IGJvcmRlcjogbm9uZTsgYm9yZGVyLXJhZGl1czogNXB4OyBjdXJzb3I6IHBvaW50ZXI7IGZvbnQtd2VpZ2h0OiBib2xkOyBjb2xvcjogd2hpdGU7IGRpc3BsYXk6IGZsZXg7IGFsaWduLWl0ZW1zOiBjZW50ZXI7IGdhcDogOHB4OyB9CiAgICAgICAgLmJ0bi1jYWxjIHsgYmFja2dyb3VuZDogdmFyKC0tYWNjZW50LWNvbG9yKTsgY29sb3I6ICMzMzM7IH0KICAgICAgICAuYnRuLXByaW50IHsgYmFja2dyb3VuZDogIzJjM2U1MDsgfQogICAgICAgIC5sYXlvdXQtc2V0dGluZ3MgeyBiYWNrZ3JvdW5kOiAjZjFmMmY2OyBib3JkZXI6IDFweCBzb2xpZCAjY2NjOyBwYWRkaW5nOiAxMHB4OyBib3JkZXItcmFkaXVzOiA1cHg7IGRpc3BsYXk6IGZsZXg7IGdhcDogMTVweDsgYWxpZ24taXRlbXM6IGNlbnRlcjsgZm9udC1zaXplOiAwLjg1cmVtOyBtYXJnaW4tdG9wOiAxMHB4OyB3aWR0aDogMTAwJTsgfQogICAgICAgIC5sYXlvdXQtc2V0dGluZ3MgaW5wdXQgeyB3aWR0aDogNjBweDsgcGFkZGluZzogM3B4OyBib3JkZXI6IDFweCBzb2xpZCAjY2NjOyBib3JkZXItcmFkaXVzOiAzcHg7IH0KICAgICAgICAuZGF0YS10YWJsZSB7IHdpZHRoOiAxMDAlOyBib3JkZXItY29sbGFwc2U6IGNvbGxhcHNlOyBtYXJnaW4tdG9wOiAxNXB4OyBmb250LXNpemU6IDAuOXJlbTsgYmFja2dyb3VuZDogd2hpdGU7IH0KICAgICAgICAuZGF0YS10YWJsZSB0aCB7IGJhY2tncm91bmQ6ICMyYzNlNTA7IGNvbG9yOiB3aGl0ZTsgcGFkZGluZzogMTJweDsgdGV4dC1hbGlnbjogbGVmdDsgfQogICAgICAgIC5kYXRhLXRhYmxlIHRkIHsgcGFkZGluZzogMTBweDsgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICNlZWU7IH0KICAgICAgICAuYW5vbnltLWJhZGdlIHsgYmFja2dyb3VuZDogIzJjM2U1MDsgY29sb3I6IHdoaXRlOyBwYWRkaW5nOiAzcHggOHB4OyBib3JkZXItcmFkaXVzOiAxMHB4OyBmb250LWZhbWlseTogbW9ub3NwYWNlOyBmb250LXNpemU6IDFyZW07IH0KCiAgICAgICAgLyogUEFQRVIgLSBQcmV2aWV3IE9ubHkgKi8KICAgICAgICAucGFwZXItc2hlZXQgeyBiYWNrZ3JvdW5kOiB3aGl0ZTsgd2lkdGg6IDIxMG1tOyBtaW4taGVpZ2h0OiAyOTdtbTsgcGFkZGluZzogMjBtbTsgYm94LXNoYWRvdzogMCAwIDEwcHggcmdiYSgwLDAsMCwwLjMpOyBib3gtc2l6aW5nOiBib3JkZXItYm94OyBwb3NpdGlvbjogcmVsYXRpdmU7IGZvbnQtZmFtaWx5OiAnVGltZXMgTmV3IFJvbWFuJywgVGltZXMsIHNlcmlmOyBjb2xvcjogIzAwMDsgZGlzcGxheTpmbGV4OyBmbGV4LWRpcmVjdGlvbjpjb2x1bW47IGp1c3RpZnktY29udGVudDogY2VudGVyOyB9IAogICAgICAgIC5jb252b2MtaGVhZGVyLXJvdyB7IGRpc3BsYXk6IGZsZXg7IGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjsgbWFyZ2luLWJvdHRvbTogMzBweDsgfQogICAgICAgIC5jb252b2MtYWRkcmVzcyB7IHdpZHRoOiA1MCU7IGZvbnQtc2l6ZTogMXJlbTsgfQogICAgICAgIC5jb252b2MtYWRkcmVzcyB0ZXh0YXJlYSB7IHdpZHRoOiAxMDAlOyBoZWlnaHQ6IDgwcHg7IGJvcmRlcjogMXB4IGRhc2hlZCAjY2NjOyBmb250LWZhbWlseTogaW5oZXJpdDsgZm9udC1zaXplOiBpbmhlcml0OyByZXNpemU6IG5vbmU7IH0KICAgICAgICAuY29udm9jLWxvZ28geyBtYXgtd2lkdGg6IDE1MHB4OyBtYXgtaGVpZ2h0OiA4MHB4OyB9CiAgICAgICAgLmNvbnZvYy10aXRsZSB7IHRleHQtYWxpZ246IGNlbnRlcjsgZm9udC13ZWlnaHQ6IGJvbGQ7IGZvbnQtc2l6ZTogMS40cmVtOyB0ZXh0LWRlY29yYXRpb246IHVuZGVybGluZTsgbWFyZ2luOiAzMHB4IDA7IH0KICAgICAgICAuY29udm9jLXN0dWRlbnQtaW5mbyB7IG1hcmdpbi1ib3R0b206IDIwcHg7IGZvbnQtc2l6ZTogMS4xcmVtOyBsaW5lLWhlaWdodDogMS42OyB9CiAgICAgICAgLmNvbnZvYy1ib2R5IHsgbWFyZ2luLWJvdHRvbTogMjBweDsgfQogICAgICAgIC5lZGl0YWJsZS10ZXh0IHsgYm9yZGVyOiAxcHggZGFzaGVkICNjY2M7IHBhZGRpbmc6IDVweDsgbWluLWhlaWdodDogMjBweDsgd2hpdGUtc3BhY2U6IHByZS13cmFwOyB9CiAgICAgICAgLmNvbnZvYy10YWJsZSB7IHdpZHRoOiAxMDAlOyBib3JkZXItY29sbGFwc2U6IGNvbGxhcHNlOyBtYXJnaW4tYm90dG9tOiAzMHB4OyB9CiAgICAgICAgLmNvbnZvYy10YWJsZSB0aCwgLmNvbnZvYy10YWJsZSB0ZCB7IGJvcmRlcjogMXB4IHNvbGlkICMwMDA7IHBhZGRpbmc6IDhweDsgdGV4dC1hbGlnbjogY2VudGVyOyB9CiAgICAgICAgLmNvbnZvYy1mb290ZXIgeyBkaXNwbGF5OiBmbGV4OyBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47IGFsaWduLWl0ZW1zOiBmbGV4LWVuZDsgbWFyZ2luLXRvcDogMzBweDsgfQogICAgICAgIAogICAgICAgIEBrZXlmcmFtZXMgZmFkZUluIHsgZnJvbSB7IG9wYWNpdHk6IDA7IHRyYW5zZm9ybTogdHJhbnNsYXRlWSgxMHB4KTsgfSB0byB7IG9wYWNpdHk6IDE7IHRyYW5zZm9ybTogdHJhbnNsYXRlWSgwKTsgfSB9CgogICAgICAgIC8qIFBSSU5UICovCiAgICAgICAgQG1lZGlhIHByaW50IHsKICAgICAgICAgICAgLnNpZGViYXIsIC5nbG9iYWwtdG9vbGJhciwgLm5vLXByaW50LCAubWFpbi13cmFwcGVyLCAuc2VjdGlvbi12aWV3IHsgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50OyB9CiAgICAgICAgICAgIGJvZHkgPiAqOm5vdCgjcHJpbnQtYXJlYSkgeyBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7IH0KICAgICAgICAgICAgYm9keSwgaHRtbCB7IG1hcmdpbjogMDsgcGFkZGluZzogMDsgd2lkdGg6IDEwMCU7IGhlaWdodDogMTAwJTsgYmFja2dyb3VuZDogd2hpdGU7IGRpc3BsYXk6IGJsb2NrOyBvdmVyZmxvdzogdmlzaWJsZTsgfQogICAgICAgICAgICAjcHJpbnQtYXJlYSB7IGRpc3BsYXk6IGJsb2NrICFpbXBvcnRhbnQ7IHBvc2l0aW9uOiBhYnNvbHV0ZTsgdG9wOiAwOyBsZWZ0OiAwOyB3aWR0aDogMTAwJTsgei1pbmRleDogOTk5OTsgYmFja2dyb3VuZDogd2hpdGU7IH0KICAgICAgICAgICAgQHBhZ2UgeyBzaXplOiBBNCBwb3J0cmFpdDsgbWFyZ2luOiAwOyB9CiAgICAgICAgICAgIAogICAgICAgICAgICAucHJpbnQtcGFnZS1jb252b2MgeyAKICAgICAgICAgICAgICAgIHdpZHRoOiAyMTBtbTsgaGVpZ2h0OiAyOTdtbTsgcGFkZGluZzogMTVtbTsgYm94LXNpemluZzogYm9yZGVyLWJveDsgcGFnZS1icmVhay1hZnRlcjogYWx3YXlzOyAKICAgICAgICAgICAgICAgIGZvbnQtZmFtaWx5OiAnVGltZXMgTmV3IFJvbWFuJywgVGltZXMsIHNlcmlmOyBiYWNrZ3JvdW5kOiB3aGl0ZTsgCiAgICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4OyBmbGV4LWRpcmVjdGlvbjogY29sdW1uOyBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsKICAgICAgICAgICAgfQogICAgICAgICAgICAucHJpbnQtcGFnZS1jb252b2M6bGFzdC1jaGlsZCB7IHBhZ2UtYnJlYWstYWZ0ZXI6IGF1dG87IH0KCiAgICAgICAgICAgIC5wcmludC1wYWdlLWxpc3QgeyAKICAgICAgICAgICAgICAgIHdpZHRoOiAyMTBtbTsgbWluLWhlaWdodDogMjk3bW07IHBhZGRpbmc6IDE1bW07IGJveC1zaXppbmc6IGJvcmRlci1ib3g7IHBhZ2UtYnJlYWstYWZ0ZXI6IGFsd2F5czsgCiAgICAgICAgICAgICAgICBmb250LWZhbWlseTogJ1RpbWVzIE5ldyBSb21hbicsIFRpbWVzLCBzZXJpZjsgYmFja2dyb3VuZDogd2hpdGU7IAogICAgICAgICAgICAgICAgZGlzcGxheTogYmxvY2s7IAogICAgICAgICAgICB9CiAgICAgICAgICAgIAogICAgICAgICAgICAucHJpbnQtZmxvdyB7CiAgICAgICAgICAgICAgICB3aWR0aDogMjEwbW07IHBhZGRpbmc6IDE1bW07IGJveC1zaXppbmc6IGJvcmRlci1ib3g7CiAgICAgICAgICAgICAgICBmb250LWZhbWlseTogJ1RpbWVzIE5ldyBSb21hbicsIFRpbWVzLCBzZXJpZjsgYmFja2dyb3VuZDogd2hpdGU7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgCiAgICAgICAgICAgIC5wcmludC1oZWFkZXIgeyBkaXNwbGF5OiBmbGV4OyBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47IGFsaWduLWl0ZW1zOiBjZW50ZXI7IGJvcmRlci1ib3R0b206IDJweCBzb2xpZCAjMDAwOyBwYWRkaW5nLWJvdHRvbTogMTBweDsgbWFyZ2luLWJvdHRvbTogMjBweDsgfQogICAgICAgICAgICAucHJpbnQtbG9nbyB7IG1heC1oZWlnaHQ6IDgwcHg7IG1heC13aWR0aDogMTUwcHg7IH0KICAgICAgICAgICAgLnByaW50LWRvYy10aXRsZSB7IGZvbnQtc2l6ZTogMS41cmVtOyBmb250LXdlaWdodDogYm9sZDsgdGV4dC1hbGlnbjogY2VudGVyOyBtYXJnaW46IDIwcHggMDsgdGV4dC10cmFuc2Zvcm06IHVwcGVyY2FzZTsgYm9yZGVyOiAycHggc29saWQgIzAwMDsgcGFkZGluZzogMTBweDsgfQogICAgICAgICAgICAucHJpbnQtaW5mb3MtYm94IHsgYm9yZGVyOiAxcHggc29saWQgIzAwMDsgcGFkZGluZzogMTBweDsgbWFyZ2luLWJvdHRvbTogMTVweDsgYmFja2dyb3VuZDogI2Y5ZjlmOTsgcGFnZS1icmVhay1pbnNpZGU6IGF2b2lkOyB9CiAgICAgICAgICAgIC5wcmludC10YWJsZSB7IHdpZHRoOiAxMDAlOyBib3JkZXItY29sbGFwc2U6IGNvbGxhcHNlOyBtYXJnaW4tdG9wOiAxMHB4OyBmb250LXNpemU6IDAuOXJlbTsgcGFnZS1icmVhay1pbnNpZGU6IGF1dG87IH0KICAgICAgICAgICAgLnByaW50LXRhYmxlIHRoLCAucHJpbnQtdGFibGUgdGQgeyBib3JkZXI6IDFweCBzb2xpZCAjMDAwOyBwYWRkaW5nOiA2cHg7IHRleHQtYWxpZ246IGNlbnRlcjsgfQogICAgICAgICAgICAucHJpbnQtdGFibGUgdGggeyBiYWNrZ3JvdW5kLWNvbG9yOiAjZWVlOyB9CiAgICAgICAgICAgIC5wcmludC10YWJsZSB0ciB7IHBhZ2UtYnJlYWstaW5zaWRlOiBhdm9pZDsgcGFnZS1icmVhay1hZnRlcjogYXV0bzsgfQogICAgICAgICAgICAKICAgICAgICAgICAgLnB2LXNpZ25hdHVyZXMgeyBkaXNwbGF5OiBmbGV4OyBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47IG1hcmdpbi10b3A6IDMwcHg7IGhlaWdodDogMTAwcHg7IHBhZ2UtYnJlYWstaW5zaWRlOiBhdm9pZDsgfQogICAgICAgICAgICAucHYtYm94IHsgYm9yZGVyOiAxcHggc29saWQgIzAwMDsgd2lkdGg6IDQ1JTsgcGFkZGluZzogNXB4OyBmb250LXNpemU6IDAuOHJlbTsgfQogICAgICAgICAgICAKICAgICAgICAgICAgLmRpc3BsYXktbGlzdC1yb3cgdGQgeyBwYWRkaW5nOiA4cHg7IGZvbnQtc2l6ZTogMS4xcmVtOyB9CiAgICAgICAgfQogICAgPC9zdHlsZT4KPC9oZWFkPgo8Ym9keT4KICAgIDxkaXYgY2xhc3M9InNpZGViYXIiPgogICAgICAgIDxkaXYgY2xhc3M9ImJyYW5kIj48aDE+T1JBTCBQSUxPVEU8L2gxPjxzcGFuPmJ5IFN5bHbDqHJlIE1pY2hlbGV0PC9zcGFuPjwvZGl2PgogICAgICAgIDxuYXYgY2xhc3M9InN0ZXBzLW5hdiI+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9InN0ZXAtYnRuIGFjdGl2ZSIgb25jbGljaz0ic3dpdGNoVGFiKHRoaXMsICd2aWV3MScpIj48aSBjbGFzcz0iZmEtc29saWQgZmEtc2xpZGVycyI+PC9pPiAxLiBQYXJhbcOpdHJhZ2U8L2Rpdj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0ic3RlcC1idG4iIG9uY2xpY2s9InN3aXRjaFRhYih0aGlzLCAndmlldzInKSI+PGkgY2xhc3M9ImZhLXNvbGlkIGZhLWZpbGUtaW1wb3J0Ij48L2k+IDIuIEltcG9ydCBkb25uw6llczwvZGl2PgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJzdGVwLWJ0biIgb25jbGljaz0ic3dpdGNoVGFiKHRoaXMsICd2aWV3MycpIj48aSBjbGFzcz0iZmEtc29saWQgZmEtY2xvY2siPjwvaT4gMy4gT3JnYW5pc2F0aW9uICYgT3JhdXg8L2Rpdj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0ic3RlcC1idG4iIG9uY2xpY2s9InN3aXRjaFRhYih0aGlzLCAndmlldzQnKSI+PGkgY2xhc3M9ImZhLXNvbGlkIGZhLWVudmVsb3BlLW9wZW4tdGV4dCI+PC9pPiA0LiBDb252b2NhdGlvbnMgw4lsw6h2ZXM8L2Rpdj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0ic3RlcC1idG4iIG9uY2xpY2s9InN3aXRjaFRhYih0aGlzLCAndmlldzUnKSI+PGkgY2xhc3M9ImZhLXNvbGlkIGZhLWlkLWJhZGdlIj48L2k+IDUuIENvbnZvY2F0aW9ucyBTdXJ2ZWlsbGFudHM8L2Rpdj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0ic3RlcC1idG4iIG9uY2xpY2s9InN3aXRjaFRhYih0aGlzLCAndmlldzYnKSI+PGkgY2xhc3M9ImZhLXNvbGlkIGZhLWNsaXBib2FyZC1saXN0Ij48L2k+IDYuIMOJbWFyZ2VtZW50cyBldCBBZmZpY2hhZ2U8L2Rpdj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0ic3RlcC1idG4iIG9uY2xpY2s9InN3aXRjaFRhYih0aGlzLCAndmlldzcnKSI+PGkgY2xhc3M9ImZhLXNvbGlkIGZhLWZpbGUtc2lnbmF0dXJlIj48L2k+IDcuIFByb2PDqHMgVmVyYmFsIGV0IFBvY2hldHRlczwvZGl2PgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJzdGVwLWJ0biIgb25jbGljaz0ic3dpdGNoVGFiKHRoaXMsICd2aWV3OCcpIj48aSBjbGFzcz0iZmEtc29saWQgZmEtdGFibGUtbGlzdCI+PC9pPiA4LiBUYWJsZWF1IFLDqWNhcGl0dWxhdGlmPC9kaXY+CiAgICAgICAgPC9uYXY+CiAgICAgICAgPGRpdiBjbGFzcz0iZm9vdGVyLWluZm8iPsKpIDIwMjQtMjAyNSBFRFUgUElMT1RFIFN5c3RlbS48L2Rpdj4KICAgIDwvZGl2PgogCiAgICA8ZGl2IGNsYXNzPSJtYWluLXdyYXBwZXIiPgogICAgICAgIDxkaXYgY2xhc3M9Imdsb2JhbC10b29sYmFyIG5vLXByaW50Ij4KICAgICAgICAgICAgPGRpdiBjbGFzcz0idG9vbGJhci10aXRsZSI+PGkgY2xhc3M9ImZhLXNvbGlkIGZhLWZvbGRlci10cmVlIj48L2k+IEdlc3Rpb24gZHUgUHJvamV0PC9kaXY+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9InRvb2xiYXItYWN0aW9ucyI+CiAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJmaWxlIiBpZD0ibG9hZFByb2plY3RJbnB1dCIgc3R5bGU9ImRpc3BsYXk6bm9uZTsiIGFjY2VwdD0iLmpzb24iIG9uY2hhbmdlPSJsb2FkUHJvamVjdCh0aGlzKSI+CiAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImJ0bi10b29sYmFyIGJ0bi1sb2FkLXByb2plY3QiIG9uY2xpY2s9ImRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb2FkUHJvamVjdElucHV0JykuY2xpY2soKSI+PGkgY2xhc3M9ImZhLXNvbGlkIGZhLXVwbG9hZCI+PC9pPiBPdXZyaXI8L2J1dHRvbj4KICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYnRuLXRvb2xiYXIgYnRuLXNhdmUtcHJvamVjdCIgb25jbGljaz0ic2F2ZVByb2plY3QoKSI+PGkgY2xhc3M9ImZhLXNvbGlkIGZhLWRvd25sb2FkIj48L2k+IFNhdXZlZ2FyZGVyPC9idXR0b24+CiAgICAgICAgICAgPC9kaXY+CiAgICAgICAgPC9kaXY+CiAKICAgICAgICA8ZGl2IGNsYXNzPSJtYWluLWNvbnRlbnQiPgogICAgICAgICAgICA8ZGl2IGlkPSJ2aWV3MSIgY2xhc3M9InNlY3Rpb24tdmlldyBhY3RpdmUiPgogICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJoZWFkZXItcGFuZWwiPjxoMj48aSBjbGFzcz0iZmEtc29saWQgZmEtc2xpZGVycyI+PC9pPiAxLiBQYXJhbcOpdHJhZ2U8L2gyPjwvZGl2PgogICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJjb25maWctY29udGFpbmVyIj4KICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImNvbmZpZy1jb2wiPgogICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAiPjxsYWJlbD5Ob208L2xhYmVsPjxpbnB1dCB0eXBlPSJ0ZXh0IiBpZD0iY29uZmlnTmFtZSIgcGxhY2Vob2xkZXI9IlZvdHJlIG5vbSIgb25jaGFuZ2U9IkFwcFN0YXRlLmNvbmZpZy5uYW1lPXRoaXMudmFsdWUiPjwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAiPjxsYWJlbD5Gb25jdGlvbjwvbGFiZWw+PGlucHV0IHR5cGU9InRleHQiIGlkPSJjb25maWdSb2xlIiBwbGFjZWhvbGRlcj0iVm90cmUgZm9uY3Rpb24iIG9uY2hhbmdlPSJBcHBTdGF0ZS5jb25maWcucm9sZT10aGlzLnZhbHVlIj48L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWdyb3VwIj48bGFiZWw+SW50aXR1bMOpIGRlIGwnZXhhbWVuPC9sYWJlbD48aW5wdXQgdHlwZT0idGV4dCIgaWQ9ImNvbmZpZ0V4YW1UaXRsZSIgcGxhY2Vob2xkZXI9IkV4OiBCQUMgQkxBTkMgMjAyNSIgb25jaGFuZ2U9IkFwcFN0YXRlLmNvbmZpZy5leGFtVGl0bGU9dGhpcy52YWx1ZSI+PC9kaXY+CiAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImNvbmZpZy1jb2wiPgogICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAiPjxsYWJlbD5Mb2dvIMOJdGFibGlzc2VtZW50PC9sYWJlbD48aW5wdXQgdHlwZT0iZmlsZSIgYWNjZXB0PSJpbWFnZS8qIiBvbmNoYW5nZT0iaGFuZGxlSW1hZ2UodGhpcywgJ2xvZ29QcmV2aWV3JykiPjxkaXYgY2xhc3M9InByZXZpZXctYm94Ij48aW1nIGlkPSJsb2dvUHJldmlldyIgYWx0PSJBcGVyw6d1IiBzdHlsZT0iZGlzcGxheTpub25lOyI+PC9kaXY+PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1ncm91cCI+PGxhYmVsPlNpZ25hdHVyZTwvbGFiZWw+PGlucHV0IHR5cGU9ImZpbGUiIGFjY2VwdD0iaW1hZ2UvKiIgb25jaGFuZ2U9ImhhbmRsZUltYWdlKHRoaXMsICdzaWduUHJldmlldycpIj48ZGl2IGNsYXNzPSJwcmV2aWV3LWJveCI+PGltZyBpZD0ic2lnblByZXZpZXciIGFsdD0iQXBlcsOndSIgc3R5bGU9ImRpc3BsYXk6bm9uZTsiPjwvZGl2PjwvZGl2PgogICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgCiAgICAgICAgICAgIDxkaXYgaWQ9InZpZXcyIiBjbGFzcz0ic2VjdGlvbi12aWV3Ij4KICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iaGVhZGVyLXBhbmVsIj48aDI+PGkgY2xhc3M9ImZhLXNvbGlkIGZhLWZpbGUtaW1wb3J0Ij48L2k+IDIuIEltcG9ydCBkZXMgZG9ubsOpZXM8L2gyPjwvZGl2PgogICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJpbXBvcnQtZ3JpZCI+CiAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmaWxlLWRyb3Atem9uZSIgaWQ9InpvbmUtZWxldmVzIj48aDM+QS4gQmFzZSDDiWzDqHZlczwvaDM+PHAgc3R5bGU9ImZvbnQtc2l6ZTowLjhyZW07IGNvbG9yOiM2NjY7Ij5Ob20sIFByw6lub20sIENsYXNzZSwgVFQ8L3A+PHNwYW4gc3R5bGU9ImZvbnQtc2l6ZTowLjdyZW07IGNvbG9yOiM5OTk7Ij4oRW4gYXR0ZW50ZSk8L3NwYW4+PGlucHV0IHR5cGU9ImZpbGUiIGFjY2VwdD0iLnhsc3gsIC54bHMsIC5jc3YiIG9uY2hhbmdlPSJoYW5kbGVGaWxlKHRoaXMsICdFTEVWRVMnKSI+PGRpdiBpZD0ic3RhdHVzLWVsZXZlcyIgY2xhc3M9InN0YXR1cy1iYWRnZSI+RmljaGllciBtYW5xdWFudDwvZGl2PjwvZGl2PgogICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZmlsZS1kcm9wLXpvbmUiIGlkPSJ6b25lLWVwcmV1dmVzIj48aDM+Qi4gUGxhbm5pbmcgw4lwcmV1dmVzPC9oMz48cCBzdHlsZT0iZm9udC1zaXplOjAuOHJlbTsgY29sb3I6IzY2NjsiPk1hdGnDqHJlLCBEYXRlLCBIZXVyZSwgRHVyw6llPC9wPjxzcGFuIHN0eWxlPSJmb250LXNpemU6MC43cmVtOyBjb2xvcjojOTk5OyI+KEVuIGF0dGVudGUpPC9zcGFuPjxpbnB1dCB0eXBlPSJmaWxlIiBhY2NlcHQ9Ii54bHN4LCAueGxzLCAuY3N2IiBvbmNoYW5nZT0iaGFuZGxlRmlsZSh0aGlzLCAnRVBSRVVWRVMnKSI+PGRpdiBpZD0ic3RhdHVzLWVwcmV1dmVzIiBjbGFzcz0ic3RhdHVzLWJhZGdlIj5GaWNoaWVyIG1hbnF1YW50PC9kaXY+PC9kaXY+CiAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmaWxlLWRyb3Atem9uZSIgaWQ9InpvbmUtcmVzc291cmNlcyI+PGgzPkMuIFNhbGxlczwvaDM+PHAgc3R5bGU9ImZvbnQtc2l6ZTowLjhyZW07IGNvbG9yOiM2NjY7Ij5TYWxsZSwgQ2FwYWNpdMOpLCBUeXBlIChUVCk8L3A+PHNwYW4gc3R5bGU9ImZvbnQtc2l6ZTowLjdyZW07IGNvbG9yOiM5OTk7Ij4oRW4gYXR0ZW50ZSk8L3NwYW4+PGlucHV0IHR5cGU9ImZpbGUiIGFjY2VwdD0iLnhsc3gsIC54bHMsIC5jc3YiIG9uY2hhbmdlPSJoYW5kbGVGaWxlKHRoaXMsICdSRVNTT1VSQ0VTJykiPjxkaXYgaWQ9InN0YXR1cy1yZXNzb3VyY2VzIiBjbGFzcz0ic3RhdHVzLWJhZGdlIj5GaWNoaWVyIG1hbnF1YW50PC9kaXY+PC9kaXY+CiAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmaWxlLWRyb3Atem9uZSIgaWQ9InpvbmUtc3VydmVpbGxhbnRzIj48aDM+RC4gU3VydmVpbGxhbnRzPC9oMz48cCBzdHlsZT0iZm9udC1zaXplOjAuOHJlbTsgY29sb3I6IzY2NjsiPk5vbSwgUHLDqW5vbTwvcD48c3BhbiBzdHlsZT0iZm9udC1zaXplOjAuN3JlbTsgY29sb3I6Izk5OTsiPihFbiBhdHRlbnRlKTwvc3Bhbj48aW5wdXQgdHlwZT0iZmlsZSIgYWNjZXB0PSIueGxzeCwgLnhscywgLmNzdiIgb25jaGFuZ2U9ImhhbmRsZUZpbGUodGhpcywgJ1NVUlZFSUxMQU5UUycpIj48ZGl2IGlkPSJzdGF0dXMtc3VydmVpbGxhbnRzIiBjbGFzcz0ic3RhdHVzLWJhZGdlIj5GaWNoaWVyIG1hbnF1YW50PC9kaXY+PC9kaXY+CiAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8L2Rpdj4KIAogICAgICAgICAgICA8ZGl2IGlkPSJ2aWV3MyIgY2xhc3M9InNlY3Rpb24tdmlldyI+CiAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImhlYWRlci1wYW5lbCI+PGgyPjxpIGNsYXNzPSJmYS1zb2xpZCBmYS1jbG9jayI+PC9pPiAzLiBPcmdhbmlzYXRpb24gJiBPcmF1eDwvaDI+PC9kaXY+CiAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImNvbnRyb2xzLWJhciI+CiAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJmb250LXNpemU6MC45cmVtOyBjb2xvcjojNTU1OyBtYXJnaW4tcmlnaHQ6YXV0bzsiPkltcG9ydGV6IGxlcyBmaWNoaWVycywgY2FsY3VsZXosIHB1aXMgYWZmaW5leiBsZXMgaG9yYWlyZXMgcG91ciBsZXMgb3JhdXguPC9kaXY+CiAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9ImRpc3BsYXk6ZmxleDsgZmxleC1kaXJlY3Rpb246Y29sdW1uOyBnYXA6NXB4OyBtYXJnaW4tcmlnaHQ6MTVweDsgdGV4dC1hbGlnbjpyaWdodDsiPgogICAgICAgICAgICAgICAgICAgICAgIDxkaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBzdHlsZT0iZm9udC1zaXplOjAuODVyZW07IGZvbnQtd2VpZ2h0OmJvbGQ7Ij5UcmkgOjwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzZWxlY3QgaWQ9ImRpc3RyaWItbWV0aG9kIiBzdHlsZT0icGFkZGluZzo0cHg7IGJvcmRlci1yYWRpdXM6NHB4OyBmb250LXNpemU6MC44NXJlbTsiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iQUxQSEEiPk9yZHJlIEFscGhhYsOpdGlxdWU8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IkNMQVNTIj5QYXIgQ2xhc3NlIChTdHJpY3QpPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc2VsZWN0PgogICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgIDxkaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBzdHlsZT0iZm9udC1zaXplOjAuODVyZW07IGZvbnQtd2VpZ2h0OmJvbGQ7Ij5Qb3J0w6llIDo8L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICAgICA8c2VsZWN0IGlkPSJkaXN0cmliLXNjb3BlIiBzdHlsZT0icGFkZGluZzo0cHg7IGJvcmRlci1yYWRpdXM6NHB4OyBmb250LXNpemU6MC44NXJlbTsiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iQUxMIj5Ub3V0ZXMgbGVzIMOpcHJldXZlczwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iQ1VSUkVOVCI+w4lwcmV1dmUgYWN0dWVsbGU8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zZWxlY3Q+CiAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICA8L2Rpdj4KCiAgICAgICAgICAgICAgICAgICA8YnV0dG9uIG9uY2xpY2s9ImxhdW5jaERpc3RyaWJ1dGlvbigpIiBzdHlsZT0icGFkZGluZzoxMHB4IDIwcHg7IGJhY2tncm91bmQ6IHZhcigtLXByaW1hcnktY29sb3IpOyBjb2xvcjp3aGl0ZTsgYm9yZGVyOm5vbmU7IGJvcmRlci1yYWRpdXM6NXB4OyBjdXJzb3I6cG9pbnRlcjsiPjxpIGNsYXNzPSJmYS1zb2xpZCBmYS13YW5kLW1hZ2ljLXNwYXJrbGVzIj48L2k+IENhbGN1bGVyIC8gUsOpaW5pdGlhbGlzZXI8L2J1dHRvbj4KICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgIDxkaXYgaWQ9ImV4YW0tbmF2aWdhdGlvbiIgY2xhc3M9ImV4YW0tbmF2aWdhdGlvbi1iYXIiIHN0eWxlPSJkaXNwbGF5Om5vbmU7Ij4KICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9Im5hdi1idG4iIG9uY2xpY2s9InByZXZFeGFtKCkiPjxpIGNsYXNzPSJmYS1zb2xpZCBmYS1jaGV2cm9uLWxlZnQiPjwvaT4gUHLDqWPDqWRlbnQ8L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgIDxkaXY+PHN0cm9uZz7DiXByZXV2ZSBhY3R1ZWxsZSA6IDwvc3Ryb25nPjxzZWxlY3QgaWQ9ImV4YW0tZHJvcGRvd24iIGNsYXNzPSJleGFtLXNlbGVjdG9yIiBvbmNoYW5nZT0ianVtcFRvRXhhbSh0aGlzLnZhbHVlKSI+PC9zZWxlY3Q+PC9kaXY+CiAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJuYXYtYnRuIiBvbmNsaWNrPSJuZXh0RXhhbSgpIj5TdWl2YW50IDxpIGNsYXNzPSJmYS1zb2xpZCBmYS1jaGV2cm9uLXJpZ2h0Ij48L2k+PC9idXR0b24+CiAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICA8ZGl2IGlkPSJjdXJyZW50LWV4YW0tY29udGFpbmVyIj48ZGl2IGNsYXNzPSJjYXJkIiBzdHlsZT0idGV4dC1hbGlnbjpjZW50ZXI7IGNvbG9yOiM3ZjhjOGQ7Ij5WZXVpbGxleiBpbXBvcnRlciBsZXMgZG9ubsOpZXMgcHVpcyBjbGlxdWVyIHN1ciBDYWxjdWxlci48L2Rpdj48L2Rpdj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIAogICAgICAgICAgICA8ZGl2IGlkPSJ2aWV3NCIgY2xhc3M9InNlY3Rpb24tdmlldyI+CiAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImhlYWRlci1wYW5lbCI+PGgyPjxpIGNsYXNzPSJmYS1zb2xpZCBmYS1lbnZlbG9wZS1vcGVuLXRleHQiPjwvaT4gNC4gQ29udm9jYXRpb25zIMOJbMOodmVzPC9oMj48L2Rpdj4KICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iY29udHJvbHMtYmFyIj4KICAgICAgICAgICAgICAgICAgIDxsYWJlbD5GaWx0cmVyIHBhciBjbGFzc2UgOjwvbGFiZWw+PHNlbGVjdCBpZD0iY29udm9jLWNsYXNzLWZpbHRlciIgc3R5bGU9InBhZGRpbmc6OHB4OyBib3JkZXItcmFkaXVzOjVweDsgbWFyZ2luLWxlZnQ6MTBweDsiPjxvcHRpb24gdmFsdWU9IkFMTCI+VG91dGVzIGxlcyBjbGFzc2VzPC9vcHRpb24+PC9zZWxlY3Q+CiAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJhY3Rpb24tYnRuIGJ0bi1wcmludCIgb25jbGljaz0icHJpbnRDb252b2NhdGlvbnMoKSIgc3R5bGU9Im1hcmdpbi1sZWZ0OmF1dG87Ij48aSBjbGFzcz0iZmEtc29saWQgZmEtcHJpbnQiPjwvaT4gSW1wcmltZXI8L2J1dHRvbj4KICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImxheW91dC1zZXR0aW5ncyI+CiAgICAgICAgICAgICAgICAgICA8c3Bhbj48aSBjbGFzcz0iZmEtc29saWQgZmEtcnVsZXItY29tYmluZWQiPjwvaT4gTWlzZSBlbiBwYWdlIDo8L3NwYW4+CiAgICAgICAgICAgICAgICAgICA8bGFiZWw+SGF1dCA8aW5wdXQgdHlwZT0ibnVtYmVyIiBpZD0ic2V0cy1zdGQtdG9wIiB2YWx1ZT0iMjAiIG9uY2hhbmdlPSJhcHBseUxheW91dCgnc3RkJykiPjwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICA8bGFiZWw+QmFzIDxpbnB1dCB0eXBlPSJudW1iZXIiIGlkPSJzZXRzLXN0ZC1ib3QiIHZhbHVlPSIyMCIgb25jaGFuZ2U9ImFwcGx5TGF5b3V0KCdzdGQnKSI+PC9sYWJlbD4KICAgICAgICAgICAgICAgICAgIDxsYWJlbD5Qb2xpY2UgPGlucHV0IHR5cGU9Im51bWJlciIgaWQ9InNldHMtc3RkLWZvbnQiIHZhbHVlPSIxNiIgb25jaGFuZ2U9ImFwcGx5TGF5b3V0KCdzdGQnKSI+PC9sYWJlbD4KICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9ImRpc3BsYXk6ZmxleDsganVzdGlmeS1jb250ZW50OmNlbnRlcjsgYmFja2dyb3VuZDojY2NjOyBwYWRkaW5nOjIwcHg7IG92ZXJmbG93LXk6YXV0bzsgaGVpZ2h0OmNhbGMoMTAwdmggLSAzMDBweCk7Ij4KICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InBhcGVyLXNoZWV0IiBpZD0iY29udm9jLXRlbXBsYXRlIj4KICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJjb252b2MtaGVhZGVyLXJvdyI+PGRpdiBjbGFzcz0iY29udm9jLWFkZHJlc3MiPjx0ZXh0YXJlYSBpZD0idHh0LWFkZHJlc3MiIHBsYWNlaG9sZGVyPSJOb20gZGUgbCfDqXRhYmxpc3NlbWVudC4uLiI+PC90ZXh0YXJlYT48L2Rpdj48ZGl2IGNsYXNzPSJjb252b2MtbG9nby16b25lIj48aW1nIGlkPSJjb252b2MtbG9nby1pbWciIGNsYXNzPSJjb252b2MtbG9nbyIgYWx0PSJMb2dvIj48L2Rpdj48L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJjb252b2MtdGl0bGUiIGlkPSJ0eHQtdGl0bGUtZGlzcGxheSI+Q09OVk9DQVRJT04gPHNwYW4gaWQ9InR4dC10aXRsZS1leHRyYS1zdGQiIGNvbnRlbnRlZGl0YWJsZT0idHJ1ZSIgc3R5bGU9ImJvcmRlci1ib3R0b206IDFweCBkb3R0ZWQgIzAwMDsgbWluLXdpZHRoOiA1MHB4OyBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7Ij5BVVggw4lQUkVVVkVTIEJMQU5DSEVTPC9zcGFuPjwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImNvbnZvYy1zdHVkZW50LWluZm8iPjxzdHJvbmc+Tm9tIGV0IFByw6lub20gOjwvc3Ryb25nPiBbTm9tIFByw6lub21dPGJyPjxzdHJvbmc+Q2xhc3NlIDo8L3N0cm9uZz4gW0NsYXNzZV08L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJjb252b2MtYm9keSBlZGl0YWJsZS10ZXh0IiBpZD0idHh0LWJvZHkiIGNvbnRlbnRlZGl0YWJsZT0idHJ1ZSI+TWFkYW1lLCBNb25zaWV1ciw8YnI+RGFucyBsZSBjYWRyZSBkZSBsYSBwcsOpcGFyYXRpb24gYXV4IGV4YW1lbnMsIHZvdHJlIGVuZmFudCBlc3QgY29udm9xdcOpKGUpIGF1eCDDqXByZXV2ZXMgYmxhbmNoZXMgc2Vsb24gbGUgcGxhbm5pbmcgc3VpdmFudCA6PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgPHRhYmxlIGNsYXNzPSJjb252b2MtdGFibGUiPjx0aGVhZD48dHI+PHRoPsOJcHJldXZlPC90aD48dGg+RGF0ZTwvdGg+PHRoPkhldXJlIFBhc3NhZ2U8L3RoPjx0aD5IZXVyZSBMb2dlPC90aD48dGg+U2FsbGU8L3RoPjwvdHI+PC90aGVhZD48dGJvZHk+PHRyPjx0ZCBjb2xzcGFuPSI1Ij4oVGFibGVhdSBpY2kpPC90ZD48L3RyPjwvdGJvZHk+PC90YWJsZT4KICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJmb250LXdlaWdodDpib2xkOyBtYXJnaW4tYm90dG9tOjVweDsiPlLDqGdsZW1lbnQgZXQgY29uc2lnbmVzIDo8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJjb252b2MtcnVsZXMgZWRpdGFibGUtdGV4dCIgaWQ9InR4dC1ydWxlcyIgY29udGVudGVkaXRhYmxlPSJ0cnVlIiBzdHlsZT0iZm9udC1zaXplOjAuOXJlbTsiPi0gTGVzIMOpbMOodmVzIGRvaXZlbnQgc2UgcHLDqXNlbnRlciAzMCBtaW51dGVzIGF2YW50IGxlIGTDqWJ1dCBkZSBjaGFxdWUgw6lwcmV1dmUuPGJyPi0gTGVzIHTDqWzDqXBob25lcyBwb3J0YWJsZXMgc29udCBzdHJpY3RlbWVudCBpbnRlcmRpdHMuIFRvdXQgY29tbWUgbGVzIG1vbnRyZXMgY29ubmVjdMOpZXMuPGJyPi0gUGnDqGNlIGQnaWRlbnRpdMOpIG9ibGlnYXRvaXJlLjwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImNvbnZvYy1mb290ZXIiIHN0eWxlPSJqdXN0aWZ5LWNvbnRlbnQ6IGZsZXgtZW5kOyI+PGRpdiBjbGFzcz0iY29udm9jLXNpZ24iIHN0eWxlPSJ0ZXh0LWFsaWduOnJpZ2h0OyI+PGRpdj5GYWl0IMOgIDxzcGFuIGlkPSJ0eHQtY2l0eSIgY29udGVudGVkaXRhYmxlPSJ0cnVlIiBzdHlsZT0iYm9yZGVyLWJvdHRvbToxcHggZG90dGVkICMwMDA7Ij5WaWxsZTwvc3Bhbj4sIGxlIDxzcGFuIGlkPSJjdXJyZW50LWRhdGUiPjwvc3Bhbj48L2Rpdj48ZGl2IHN0eWxlPSJtYXJnaW4tdG9wOjE1cHg7IGZvbnQtd2VpZ2h0OmJvbGQ7IiBpZD0iY29udm9jLXNpZ24tbmFtZSI+PC9kaXY+PGRpdiBzdHlsZT0iZm9udC1zdHlsZTppdGFsaWM7IiBpZD0iY29udm9jLXNpZ24tcm9sZSI+PC9kaXY+PGltZyBpZD0iY29udm9jLXNpZ24taW1nIiBzdHlsZT0ibWF4LWhlaWdodDo2MHB4OyBtYXJnaW4tdG9wOjEwcHg7Ij48L2Rpdj48L2Rpdj4KICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPC9kaXY+CgogICAgICAgICAgICA8ZGl2IGlkPSJ2aWV3NSIgY2xhc3M9InNlY3Rpb24tdmlldyI+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJoZWFkZXItcGFuZWwiPjxoMj48aSBjbGFzcz0iZmEtc29saWQgZmEtaWQtYmFkZ2UiPjwvaT4gNS4gQ29udm9jYXRpb25zIFN1cnZlaWxsYW50czwvaDI+PC9kaXY+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJjb250cm9scy1iYXIiPgogICAgICAgICAgICAgICAgICAgIDxsYWJlbD5JbXByaW1lciBwb3VyIDo8L2xhYmVsPgogICAgICAgICAgICAgICAgICAgIDxzZWxlY3QgaWQ9ImNvbnZvYy1zdXJ2LWZpbHRlciIgc3R5bGU9InBhZGRpbmc6OHB4OyBib3JkZXItcmFkaXVzOjVweDsgbWFyZ2luLWxlZnQ6MTBweDsiPjxvcHRpb24gdmFsdWU9IkFMTCI+VG91cyBsZXMgc3VydmVpbGxhbnRzPC9vcHRpb24+PC9zZWxlY3Q+CiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYWN0aW9uLWJ0biBidG4tcHJpbnQiIG9uY2xpY2s9InByaW50U3VydmVpbGxhbnRDb252b2NhdGlvbnMoKSIgc3R5bGU9Im1hcmdpbi1sZWZ0OmF1dG87Ij48aSBjbGFzcz0iZmEtc29saWQgZmEtcHJpbnQiPjwvaT4gSW1wcmltZXI8L2J1dHRvbj4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ibGF5b3V0LXNldHRpbmdzIj4KICAgICAgICAgICAgICAgICAgICA8bGFiZWw+SGF1dCA8aW5wdXQgdHlwZT0ibnVtYmVyIiBpZD0ic2V0cy1zdXJ2LXRvcCIgdmFsdWU9IjIwIiBvbmNoYW5nZT0iYXBwbHlMYXlvdXQoJ3N1cnYnKSI+PC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICA8bGFiZWw+QmFzIDxpbnB1dCB0eXBlPSJudW1iZXIiIGlkPSJzZXRzLXN1cnYtYm90IiB2YWx1ZT0iMjAiIG9uY2hhbmdlPSJhcHBseUxheW91dCgnc3VydicpIj48L2xhYmVsPgogICAgICAgICAgICAgICAgICAgIDxsYWJlbD5Qb2xpY2UgPGlucHV0IHR5cGU9Im51bWJlciIgaWQ9InNldHMtc3Vydi1mb250IiB2YWx1ZT0iMTYiIG9uY2hhbmdlPSJhcHBseUxheW91dCgnc3VydicpIj48L2xhYmVsPgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJkaXNwbGF5OmZsZXg7IGp1c3RpZnktY29udGVudDpjZW50ZXI7IGJhY2tncm91bmQ6I2NjYzsgcGFkZGluZzoyMHB4OyBvdmVyZmxvdy15OmF1dG87IGhlaWdodDpjYWxjKDEwMHZoIC0gMzAwcHgpOyI+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0icGFwZXItc2hlZXQiIGlkPSJjb252b2Mtc3Vydi10ZW1wbGF0ZSI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImNvbnZvYy1oZWFkZXItcm93Ij48ZGl2IGNsYXNzPSJjb252b2MtYWRkcmVzcyI+PHRleHRhcmVhIGlkPSJ0eHQtc3Vydi1hZGRyZXNzIiBwbGFjZWhvbGRlcj0iTm9tIMOpdGFibGlzc2VtZW50Li4uIj48L3RleHRhcmVhPjwvZGl2PjxpbWcgaWQ9ImNvbnZvYy1zdXJ2LWxvZ28taW1nIiBjbGFzcz0iY29udm9jLWxvZ28iPjwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJjb252b2MtdGl0bGUiIGlkPSJ0eHQtc3Vydi10aXRsZS1kaXNwbGF5Ij5DT05WT0NBVElPTiA8c3BhbiBpZD0idHh0LXRpdGxlLWV4dHJhLXN1cnYiIGNvbnRlbnRlZGl0YWJsZT0idHJ1ZSIgc3R5bGU9ImJvcmRlci1ib3R0b206IDFweCBkb3R0ZWQgIzAwMDsgbWluLXdpZHRoOiA1MHB4OyBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7Ij5TVVJWRUlMTEFOQ0VTPC9zcGFuPjwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJjb252b2Mtc3R1ZGVudC1pbmZvIj48c3Ryb25nPlN1cnZlaWxsYW50IDo8L3N0cm9uZz4gW05vbV08L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iY29udm9jLWJvZHkgZWRpdGFibGUtdGV4dCIgaWQ9InR4dC1zdXJ2LWJvZHkiIGNvbnRlbnRlZGl0YWJsZT0idHJ1ZSI+Vm91cyDDqnRlcyBjb252b3F1w6koZSkgcG91ciBsZXMgc3VydmVpbGxhbmNlcyBzdWl2YW50ZXMgOjwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICA8dGFibGUgY2xhc3M9ImNvbnZvYy10YWJsZSI+PHRoZWFkPjx0cj48dGg+w4lwcmV1dmU8L3RoPjx0aD5EYXRlPC90aD48dGg+SG9yYWlyZTwvdGg+PHRoPkR1csOpZTwvdGg+PHRoPlNhbGxlPC90aD48L3RyPjwvdGhlYWQ+PHRib2R5Pjx0cj48dGQgY29sc3Bhbj0iNSI+Li4uPC90ZD48L3RyPjwvdGJvZHk+PC90YWJsZT4KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iY29udm9jLXJ1bGVzIGVkaXRhYmxlLXRleHQiIGlkPSJ0eHQtc3Vydi1ydWxlcyIgY29udGVudGVkaXRhYmxlPSJ0cnVlIj5NZXJjaSBkZSB2b3RyZSBwcsOpc2VuY2UgMzAgbWludXRlcyBhdmFudCBsZSBkw6lidXQgZGUgbCfDqXByZXV2ZS48L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iY29udm9jLWZvb3RlciIgc3R5bGU9Imp1c3RpZnktY29udGVudDogZmxleC1lbmQ7Ij48ZGl2IGNsYXNzPSJjb252b2Mtc2lnbiIgc3R5bGU9InRleHQtYWxpZ246cmlnaHQ7Ij48ZGl2PkZhaXQgw6AgPHNwYW4gaWQ9InR4dC1zdXJ2LWNpdHkiIGNvbnRlbnRlZGl0YWJsZT0idHJ1ZSI+VmlsbGU8L3NwYW4+LCBsZSA8c3BhbiBpZD0iY3VycmVudC1kYXRlLXN1cnYiPjwvc3Bhbj48L2Rpdj48ZGl2IGlkPSJjb252b2Mtc3Vydi1zaWduLW5hbWUiIHN0eWxlPSJmb250LXdlaWdodDpib2xkOyBtYXJnaW4tdG9wOjE1cHg7Ij48L2Rpdj48ZGl2IGlkPSJjb252b2Mtc3Vydi1zaWduLXJvbGUiIHN0eWxlPSJmb250LXN0eWxlOml0YWxpYzsiPjwvZGl2PjxpbWcgaWQ9ImNvbnZvYy1zdXJ2LXNpZ24taW1nIiBzdHlsZT0ibWF4LWhlaWdodDo2MHB4OyBtYXJnaW4tdG9wOjEwcHg7Ij48L2Rpdj48L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8L2Rpdj4KCiAgICAgICAgICAgIDxkaXYgaWQ9InZpZXc2IiBjbGFzcz0ic2VjdGlvbi12aWV3Ij4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImhlYWRlci1wYW5lbCI+PGgyPjxpIGNsYXNzPSJmYS1zb2xpZCBmYS1jbGlwYm9hcmQtbGlzdCI+PC9pPiA2LiDDiW1hcmdlbWVudHMgZXQgQWZmaWNoYWdlPC9oMj48L2Rpdj4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImNvbnRyb2xzLWJhciI+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iZm9udC1zaXplOjAuOXJlbTsgY29sb3I6IzU1NTsgbWFyZ2luLXJpZ2h0OjE1cHg7Ij5GaWx0cmUgc2FsbGUgKGxhaXNzZXIgc3VyIFRPVVQgcG91ciB0b3V0IGltcHJpbWVyKSA6PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPHNlbGVjdCBpZD0iZW1hcmdlbWVudC1yb29tLWZpbHRlciIgc3R5bGU9InBhZGRpbmc6OHB4OyBib3JkZXItcmFkaXVzOjVweDsgbWFyZ2luLWxlZnQ6MTBweDsiPjxvcHRpb24gdmFsdWU9IkFMTCI+VG91dGVzIGxlcyBzYWxsZXMgdXRpbGlzw6llczwvb3B0aW9uPjwvc2VsZWN0PgogICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9Im1hcmdpbi1sZWZ0OmF1dG87IGRpc3BsYXk6ZmxleDsgZ2FwOjEwcHg7Ij4KICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYWN0aW9uLWJ0biBidG4tcHJpbnQiIG9uY2xpY2s9InByaW50RGlzcGxheUxpc3QoKSI+SW1wcmltZXIgTGlzdGVzIGQnYWZmaWNoYWdlIChUb3V0ZXMgw4lwcmV1dmVzKTwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJhY3Rpb24tYnRuIGJ0bi1wcmludCIgb25jbGljaz0icHJpbnRFbWFyZ2VtZW50KCkiPkltcHJpbWVyIMOJbWFyZ2VtZW50cyAoVG91dGVzIMOJcHJldXZlcyk8L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iYmFja2dyb3VuZDojZWVlOyBwYWRkaW5nOjIwcHg7IHRleHQtYWxpZ246Y2VudGVyOyBjb2xvcjogIzU1NTsiPkxlcyBkb2N1bWVudHMgc2Vyb250IGfDqW7DqXLDqXMgcG91ciA8c3Ryb25nPnRvdXRlcyBsZXMgw6lwcmV1dmVzPC9zdHJvbmc+Ljxicj5DaGFxdWUgc2FsbGUgc2VyYSBzdXIgdW5lIG5vdXZlbGxlIHBhZ2UuPC9kaXY+CiAgICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgICAgPGRpdiBpZD0idmlldzciIGNsYXNzPSJzZWN0aW9uLXZpZXciPgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iaGVhZGVyLXBhbmVsIj48aDI+PGkgY2xhc3M9ImZhLXNvbGlkIGZhLWZpbGUtc2lnbmF0dXJlIj48L2k+IDcuIFByb2PDqHMgVmVyYmFsIGV0IFBvY2hldHRlczwvaDI+PC9kaXY+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJjb250cm9scy1iYXIiPgogICAgICAgICAgICAgICAgICAgIDxzZWxlY3QgaWQ9InB2LWV4YW0tc2VsZWN0IiBvbmNoYW5nZT0idXBkYXRlUFZSb29tU2VsZWN0KCkiPjwvc2VsZWN0PgogICAgICAgICAgICAgICAgICAgIDxzZWxlY3QgaWQ9InB2LXJvb20tc2VsZWN0Ij48L3NlbGVjdD4KICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJtYXJnaW4tbGVmdDphdXRvOyBkaXNwbGF5OmZsZXg7IGdhcDoxMHB4OyI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImFjdGlvbi1idG4gYnRuLXByaW50IiBvbmNsaWNrPSJwcmludFBWKCkiPkltcHJpbWVyIFBWPC9idXR0b24+CiAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImFjdGlvbi1idG4gYnRuLXByaW50IiBvbmNsaWNrPSJwcmludFBvY2hldHRlcygpIj5JbXByaW1lciBQb2NoZXR0ZXM8L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iY2FyZCI+CiAgICAgICAgICAgICAgICAgICAgPGgzPkNvbnNpZ25lcyAocG91ciBsYSBwb2NoZXR0ZSk8L2gzPgogICAgICAgICAgICAgICAgICAgIDx0ZXh0YXJlYSBpZD0idHh0LXBvY2hldHRlLXN1cnYiIHN0eWxlPSJ3aWR0aDoxMDAlOyBoZWlnaHQ6MjUwcHg7IHBhZGRpbmc6MTBweDsgYm9yZGVyOjFweCBzb2xpZCAjY2NjOyBib3JkZXItcmFkaXVzOjRweDsiIG9uaW5wdXQ9InNhdmVQb2NoZXR0ZVRleHQoJ3N1cnYnLCB0aGlzLnZhbHVlKSI+PC90ZXh0YXJlYT4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8L2Rpdj4KCiAgICAgICAgICAgIDxkaXYgaWQ9InZpZXc4IiBjbGFzcz0ic2VjdGlvbi12aWV3Ij4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImhlYWRlci1wYW5lbCI+PGgyPjxpIGNsYXNzPSJmYS1zb2xpZCBmYS10YWJsZS1saXN0Ij48L2k+IDguIFRhYmxlYXUgUsOpY2FwaXR1bGF0aWY8L2gyPjwvZGl2PgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iY29udHJvbHMtYmFyIj4KICAgICAgICAgICAgICAgICAgICA8bGFiZWw+w4lwcmV1dmUgOjwvbGFiZWw+IDxzZWxlY3QgaWQ9InJlY2FwLWV4YW0tc2VsZWN0IiBvbmNoYW5nZT0idXBkYXRlUmVjYXBSb29tU2VsZWN0KCkiPjwvc2VsZWN0PgogICAgICAgICAgICAgICAgICAgIDxsYWJlbCBzdHlsZT0ibWFyZ2luLWxlZnQ6MTBweDsiPlNhbGxlIDo8L2xhYmVsPiA8c2VsZWN0IGlkPSJyZWNhcC1yb29tLXNlbGVjdCI+PC9zZWxlY3Q+CiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYWN0aW9uLWJ0biBidG4tcHJpbnQiIG9uY2xpY2s9InByaW50R2xvYmFsUmVjYXAoKSIgc3R5bGU9Im1hcmdpbi1sZWZ0OmF1dG87Ij5JbXByaW1lciBUYWJsZWF1eDwvYnV0dG9uPgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJiYWNrZ3JvdW5kOiNmOWY5Zjk7IHBhZGRpbmc6MjBweDsgdGV4dC1hbGlnbjpjZW50ZXI7Ij5Hw6luw6hyZSB1biB0YWJsZWF1IHBhciDDqXByZXV2ZSBldCBwYXIgc2FsbGUgaW5kaXF1YW50IGF1eCDDqWzDqHZlcyBvw7kgc2UgcmVuZHJlLjwvZGl2PgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICA8L2Rpdj4KICAgIDwvZGl2PgogICAgPGRpdiBpZD0icHJpbnQtYXJlYSIgc3R5bGU9ImRpc3BsYXk6bm9uZTsiPjwvZGl2PgoKICAgIDxzY3JpcHQ+CiAgICAgICAgLy8gVkFSSUFCTEUgR0xPQkFMRQogICAgICAgIGxldCBBcHBTdGF0ZSA9IHsgY29uZmlnOiB7fSwgY29udm9jVGV4dDoge30sIHN1cnZDb252b2NUZXh0OiB7fSwgcG9jaGV0dGVUZXh0OiB7fSwgbGF5b3V0OiB7IHN0ZDoge3RvcDoyMCwgYm90OjIwLCBmb250OjE2fSwgc3Vydjoge3RvcDoyMCwgYm90OjIwLCBmb250OjE2fSB9LCBlbGV2ZXM6IFtdLCBlcHJldXZlczogW10sIHNhbGxlczogW10sIHN1cnZlaWxsYW50czogW10sIGRpc3RyaWJ1dGlvbkRhdGE6IFtdLCBjdXJyZW50RXhhbUluZGV4OiAwIH07CiAgICAgICAgY29uc3Qgbm9ybWFsaXplID0gcyA9PiBzID8gcy50b1N0cmluZygpLnRvTG93ZXJDYXNlKCkudHJpbSgpIDogJyc7CiAgICAgICAgY29uc3Qgbm9ybUNsYXNzID0gKHMpID0+IHMgPyBTdHJpbmcocykudG9VcHBlckNhc2UoKS5yZXBsYWNlKC9ccysvZywgJycpLnRyaW0oKSA6ICJOL0EiOwoKICAgICAgICAvLyBGVU5DVElPTiBESVNQTEFZIERVUkFUSU9OIAogICAgICAgIGZ1bmN0aW9uIGZvcm1hdER1cmF0aW9uRGlzcGxheSh2YWwpIHsKICAgICAgICAgICAgaWYgKCF2YWwpIHJldHVybiAiIjsKICAgICAgICAgICAgY29uc3QgcyA9IFN0cmluZyh2YWwpLnRyaW0oKTsKICAgICAgICAgICAgaWYgKHMuaW5jbHVkZXMoJ2gnKSB8fCBzLmluY2x1ZGVzKCc6JykpIHsKICAgICAgICAgICAgICAgIHJldHVybiBzLnJlcGxhY2UoJzonLCAnaCcpOyAKICAgICAgICAgICAgfQogICAgICAgICAgICBjb25zdCBudW0gPSBwYXJzZUZsb2F0KHMpOwogICAgICAgICAgICBpZiAoIWlzTmFOKG51bSkpIHsKICAgICAgICAgICAgICAgIGNvbnN0IGggPSBNYXRoLmZsb29yKG51bSAvIDYwKTsKICAgICAgICAgICAgICAgIGNvbnN0IG0gPSBNYXRoLnJvdW5kKG51bSAlIDYwKTsKICAgICAgICAgICAgICAgIGNvbnN0IG1TdHIgPSBtIDwgMTAgPyAnMCcgKyBtIDogbTsKICAgICAgICAgICAgICAgIGlmKGggPiAwKSByZXR1cm4gYCR7aH1oJHttU3RyfWA7CiAgICAgICAgICAgICAgICByZXR1cm4gYCR7bX0gbWluYDsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gczsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgLy8gLS0tIE5PVVZFTExFIEZPTkNUSU9OIERFIFRSSSBST0JVU1RFIERBVEUgRlJBTkNBSVNFICsgSEVVUkUgKFNww6ljaWZpcXVlIE9yYXV4KSAtLS0KICAgICAgICBmdW5jdGlvbiBnZXREYXRlVGltZVZhbHVlKGV4YW1SYXcsIHN0dWRlbnRSb29tRGF0YSwgaXNUVCkgewogICAgICAgICAgICBsZXQgZFZhbCA9IGdldFZhbHVlKGV4YW1SYXcsIFsnRGF0ZScsICdKb3VyJywgJ0RhdGUgw6lwcmV1dmUnLCAnRGF0ZSBkZWJ1dCddKTsKICAgICAgICAgICAgbGV0IGRhdGVPYmogPSBudWxsOwogICAgICAgICAgICBjb25zdCBmcmVuY2hNb250aHMgPSB7CiAgICAgICAgICAgICAgICAnamFudmllcic6IDAsICdmw6l2cmllcic6IDEsICdmZXZyaWVyJzogMSwgJ21hcnMnOiAyLCAnYXZyaWwnOiAzLCAnbWFpJzogNCwgJ2p1aW4nOiA1LAogICAgICAgICAgICAgICAgJ2p1aWxsZXQnOiA2LCAnYW/Du3QnOiA3LCAnYW91dCc6IDcsICdzZXB0ZW1icmUnOiA4LCAnb2N0b2JyZSc6IDksICdub3ZlbWJyZSc6IDEwLCAnZMOpY2VtYnJlJzogMTEsICdkZWNlbWJyZSc6IDExCiAgICAgICAgICAgIH07CiAgICAgICAgICAgIGlmIChkVmFsKSB7CiAgICAgICAgICAgICAgICBpZiAoIWlzTmFOKGRWYWwpICYmIGRWYWwgPiAyMDAwMCkgewogICAgICAgICAgICAgICAgICAgICBkYXRlT2JqID0gbmV3IERhdGUoKGRWYWwgLSAyNTU2OSkgKiA4NjQwMCAqIDEwMDApOwogICAgICAgICAgICAgICAgfSAKICAgICAgICAgICAgICAgIGVsc2UgaWYgKHR5cGVvZiBkVmFsID09PSAnc3RyaW5nJykgewogICAgICAgICAgICAgICAgICAgIGNvbnN0IGNsZWFuVmFsID0gZFZhbC50b0xvd2VyQ2FzZSgpLnRyaW0oKTsKICAgICAgICAgICAgICAgICAgICBpZiAoY2xlYW5WYWwuaW5jbHVkZXMoJy8nKSkgewogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwYXJ0cyA9IGNsZWFuVmFsLnNwbGl0KCcvJyk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwYXJ0cy5sZW5ndGggPT09IDMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGVPYmogPSBuZXcgRGF0ZShwYXJzZUludChwYXJ0c1syXSksIHBhcnNlSW50KHBhcnRzWzFdKSAtIDEsIHBhcnNlSW50KHBhcnRzWzBdKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRleHRNYXRjaCA9IGNsZWFuVmFsLm1hdGNoKC8oXGR7MSwyfXwxZXIpXHMrKFthLXrDqcO7XSspLyk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0ZXh0TWF0Y2gpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBkYXkgPSAodGV4dE1hdGNoWzFdID09PSAnMWVyJykgPyAxIDogcGFyc2VJbnQodGV4dE1hdGNoWzFdKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBtb250aE5hbWUgPSB0ZXh0TWF0Y2hbMl07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZnJlbmNoTW9udGhzLmhhc093blByb3BlcnR5KG1vbnRoTmFtZSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50WWVhciA9IG5ldyBEYXRlKCkuZ2V0RnVsbFllYXIoKTsgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZU9iaiA9IG5ldyBEYXRlKGN1cnJlbnRZZWFyLCBmcmVuY2hNb250aHNbbW9udGhOYW1lXSwgZGF5KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoIWRhdGVPYmogfHwgaXNOYU4oZGF0ZU9iai5nZXRUaW1lKCkpKSBkYXRlT2JqID0gbmV3IERhdGUoMCk7IAogICAgICAgICAgICBsZXQgdFZhbDsKICAgICAgICAgICAgaWYgKHN0dWRlbnRSb29tRGF0YSAmJiBzdHVkZW50Um9vbURhdGEucGFzc2FnZVRpbWUpIHsKICAgICAgICAgICAgICAgIHRWYWwgPSBzdHVkZW50Um9vbURhdGEucGFzc2FnZVRpbWU7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICB0VmFsID0gaXNUVCA/IGdldFZhbHVlKGV4YW1SYXcsIFsnSGV1cmUgZGUgZMOpYnV0IHRpZXJzIHRlbXBzJywgJ0hldXJlIFRUJywgJ0hldXJlIGTDqWJ1dCBUVCddKSA6IGdldFZhbHVlKGV4YW1SYXcsIFsnSGV1cmUgZGUgZMOpYnV0JywgJ0hldXJlJywgJ0hvcmFpcmUnXSk7CiAgICAgICAgICAgICAgICBpZiAoIXRWYWwpIHRWYWwgPSBnZXRWYWx1ZShleGFtUmF3LCBbJ0hldXJlIGRlIGTDqWJ1dCcsICdIZXVyZScsICdIb3JhaXJlJ10pOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGxldCBob3VycyA9IDAsIG1pbnV0ZXMgPSAwOwogICAgICAgICAgICBpZih0VmFsKSB7CiAgICAgICAgICAgICAgICBsZXQgdFN0ciA9IFN0cmluZyh0VmFsKS50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoJ2gnLCAnOicpLnJlcGxhY2UoJy4nLCAnOicpLnRyaW0oKTsKICAgICAgICAgICAgICAgIGNvbnN0IHRQYXJ0cyA9IHRTdHIuc3BsaXQoJzonKTsKICAgICAgICAgICAgICAgIGlmKHRQYXJ0cy5sZW5ndGggPj0gMSkgaG91cnMgPSBwYXJzZUludCh0UGFydHNbMF0pIHx8IDA7CiAgICAgICAgICAgICAgICBpZih0UGFydHMubGVuZ3RoID49IDIpIG1pbnV0ZXMgPSBwYXJzZUludCh0UGFydHNbMV0pIHx8IDA7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZGF0ZU9iai5zZXRIb3Vycyhob3VycywgbWludXRlcywgMCwgMCk7CiAgICAgICAgICAgIHJldHVybiBkYXRlT2JqLmdldFRpbWUoKTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIHN5bmNTdGF0ZUZyb21ET00oKSB7CiAgICAgICAgICAgIEFwcFN0YXRlLmNvbmZpZy5uYW1lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbmZpZ05hbWUnKS52YWx1ZTsKICAgICAgICAgICAgQXBwU3RhdGUuY29uZmlnLnJvbGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29uZmlnUm9sZScpLnZhbHVlOwogICAgICAgICAgICBBcHBTdGF0ZS5jb25maWcuZXhhbVRpdGxlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbmZpZ0V4YW1UaXRsZScpLnZhbHVlOwogICAgICAgICAgICBpZighQXBwU3RhdGUuY29udm9jVGV4dCkgQXBwU3RhdGUuY29udm9jVGV4dCA9IHt9OwogICAgICAgICAgICBBcHBTdGF0ZS5jb252b2NUZXh0LmFkZHJlc3MgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndHh0LWFkZHJlc3MnKS52YWx1ZTsKICAgICAgICAgICAgQXBwU3RhdGUuY29udm9jVGV4dC5ib2R5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3R4dC1ib2R5JykuaW5uZXJIVE1MOwogICAgICAgICAgICBBcHBTdGF0ZS5jb252b2NUZXh0LnJ1bGVzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3R4dC1ydWxlcycpLmlubmVySFRNTDsKICAgICAgICAgICAgQXBwU3RhdGUuY29udm9jVGV4dC5jaXR5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3R4dC1jaXR5JykuaW5uZXJUZXh0OwogICAgICAgICAgICBBcHBTdGF0ZS5jb252b2NUZXh0LnRpdGxlRXh0cmFTdGQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndHh0LXRpdGxlLWV4dHJhLXN0ZCcpLmlubmVyVGV4dDsKICAgICAgICAgICAgaWYoIUFwcFN0YXRlLmxheW91dC5zdGQpIEFwcFN0YXRlLmxheW91dC5zdGQgPSB7fTsKICAgICAgICAgICAgQXBwU3RhdGUubGF5b3V0LnN0ZC50b3AgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2V0cy1zdGQtdG9wJykudmFsdWU7CiAgICAgICAgICAgIEFwcFN0YXRlLmxheW91dC5zdGQuYm90ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NldHMtc3RkLWJvdCcpLnZhbHVlOwogICAgICAgICAgICBBcHBTdGF0ZS5sYXlvdXQuc3RkLmZvbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2V0cy1zdGQtZm9udCcpLnZhbHVlOwogICAgICAgICAgICBpZighQXBwU3RhdGUubGF5b3V0LnN1cnYpIEFwcFN0YXRlLmxheW91dC5zdXJ2ID0ge307CiAgICAgICAgICAgIEFwcFN0YXRlLmxheW91dC5zdXJ2LnRvcCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZXRzLXN1cnYtdG9wJykudmFsdWU7CiAgICAgICAgICAgIEFwcFN0YXRlLmxheW91dC5zdXJ2LmJvdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZXRzLXN1cnYtYm90JykudmFsdWU7CiAgICAgICAgICAgIEFwcFN0YXRlLmxheW91dC5zdXJ2LmZvbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2V0cy1zdXJ2LWZvbnQnKS52YWx1ZTsKICAgICAgICAgICAgaWYoIUFwcFN0YXRlLnN1cnZDb252b2NUZXh0KSBBcHBTdGF0ZS5zdXJ2Q29udm9jVGV4dCA9IHt9OwogICAgICAgICAgICBBcHBTdGF0ZS5zdXJ2Q29udm9jVGV4dC5hZGRyZXNzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3R4dC1zdXJ2LWFkZHJlc3MnKS52YWx1ZTsKICAgICAgICAgICAgQXBwU3RhdGUuc3VydkNvbnZvY1RleHQuYm9keSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0eHQtc3Vydi1ib2R5JykuaW5uZXJIVE1MOwogICAgICAgICAgICBBcHBTdGF0ZS5zdXJ2Q29udm9jVGV4dC5ydWxlcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0eHQtc3Vydi1ydWxlcycpLmlubmVySFRNTDsKICAgICAgICAgICAgQXBwU3RhdGUuc3VydkNvbnZvY1RleHQuY2l0eSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0eHQtc3Vydi1jaXR5JykuaW5uZXJUZXh0OwogICAgICAgICAgICBBcHBTdGF0ZS5zdXJ2Q29udm9jVGV4dC50aXRsZUV4dHJhU3VydiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0eHQtdGl0bGUtZXh0cmEtc3VydicpLmlubmVyVGV4dDsKICAgICAgICAgICAgaWYoIUFwcFN0YXRlLnBvY2hldHRlVGV4dCkgQXBwU3RhdGUucG9jaGV0dGVUZXh0ID0ge307CiAgICAgICAgICAgIEFwcFN0YXRlLnBvY2hldHRlVGV4dC5zdXJ2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3R4dC1wb2NoZXR0ZS1zdXJ2JykudmFsdWU7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBzYXZlUHJvamVjdCgpIHsKICAgICAgICAgICAgc3luY1N0YXRlRnJvbURPTSgpOwogICAgICAgICAgICBjb25zdCBkYXRhU3RyID0gSlNPTi5zdHJpbmdpZnkoQXBwU3RhdGUpOwogICAgICAgICAgICBjb25zdCBibG9iID0gbmV3IEJsb2IoW2RhdGFTdHJdLCB7dHlwZTogImFwcGxpY2F0aW9uL2pzb24ifSk7CiAgICAgICAgICAgIGNvbnN0IHVybCA9IFVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7CiAgICAgICAgICAgIGNvbnN0IGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7CiAgICAgICAgICAgIGEuaHJlZiA9IHVybDsKICAgICAgICAgICAgY29uc3QgZCA9IG5ldyBEYXRlKCk7CiAgICAgICAgICAgIGNvbnN0IGRhdGVTdHIgPSBkLnRvSVNPU3RyaW5nKCkuc3BsaXQoJ1QnKVswXTsKICAgICAgICAgICAgYS5kb3dubG9hZCA9IGBQUk9KRVRfRVhBTV8ke2RhdGVTdHJ9Lmpzb25gOwogICAgICAgICAgICBhLmNsaWNrKCk7CiAgICAgICAgICAgIFVSTC5yZXZva2VPYmplY3RVUkwodXJsKTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGxvYWRQcm9qZWN0KGlucHV0KSB7CiAgICAgICAgICAgIGNvbnN0IGZpbGUgPSBpbnB1dC5maWxlc1swXTsKICAgICAgICAgICAgaWYgKCFmaWxlKSByZXR1cm47CiAgICAgICAgICAgIGNvbnN0IHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7CiAgICAgICAgICAgIHJlYWRlci5vbmxvYWQgPSBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIEFwcFN0YXRlID0gSlNPTi5wYXJzZShlLnRhcmdldC5yZXN1bHQpOwogICAgICAgICAgICAgICAgICAgIHJlc3RvcmVQcm9qZWN0VUkoKTsKICAgICAgICAgICAgICAgICAgICBhbGVydCgiUHJvamV0IGNoYXJnw6kgYXZlYyBzdWNjw6hzICEiKTsKICAgICAgICAgICAgICAgIH0gY2F0Y2goZXJyKSB7IGNvbnNvbGUuZXJyb3IoZXJyKTsgYWxlcnQoIkVycmV1ciBsb3JzIGRlIGxhIGxlY3R1cmUuIik7IH0KICAgICAgICAgICAgfTsKICAgICAgICAgICAgcmVhZGVyLnJlYWRBc1RleHQoZmlsZSk7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiByZXN0b3JlUHJvamVjdFVJKCkgewogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29uZmlnTmFtZScpLnZhbHVlID0gQXBwU3RhdGUuY29uZmlnLm5hbWUgfHwgIiI7CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb25maWdSb2xlJykudmFsdWUgPSBBcHBTdGF0ZS5jb25maWcucm9sZSB8fCAiIjsKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbmZpZ0V4YW1UaXRsZScpLnZhbHVlID0gQXBwU3RhdGUuY29uZmlnLmV4YW1UaXRsZSB8fCAiIjsKICAgICAgICAgICAgaWYoQXBwU3RhdGUuY29uZmlnLmxvZ29TcmMpIHsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvZ29QcmV2aWV3Jykuc3JjID0gQXBwU3RhdGUuY29uZmlnLmxvZ29TcmM7IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb2dvUHJldmlldycpLnN0eWxlLmRpc3BsYXk9J2Jsb2NrJzsgfQogICAgICAgICAgICBpZihBcHBTdGF0ZS5jb25maWcuc2lnblNyYykgeyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2lnblByZXZpZXcnKS5zcmMgPSBBcHBTdGF0ZS5jb25maWcuc2lnblNyYzsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NpZ25QcmV2aWV3Jykuc3R5bGUuZGlzcGxheT0nYmxvY2snOyB9CiAgICAgICAgICAgIGlmKEFwcFN0YXRlLmVsZXZlcyAmJiBBcHBTdGF0ZS5lbGV2ZXMubGVuZ3RoKSB1cGRhdGVTdGF0dXMoJ3pvbmUtZWxldmVzJywgJ3N0YXR1cy1lbGV2ZXMnLCBgJHtBcHBTdGF0ZS5lbGV2ZXMubGVuZ3RofSDDqWzDqHZlc2ApOwogICAgICAgICAgICBpZihBcHBTdGF0ZS5lcHJldXZlcyAmJiBBcHBTdGF0ZS5lcHJldXZlcy5sZW5ndGgpIHVwZGF0ZVN0YXR1cygnem9uZS1lcHJldXZlcycsICdzdGF0dXMtZXByZXV2ZXMnLCBgJHtBcHBTdGF0ZS5lcHJldXZlcy5sZW5ndGh9IMOpcHJldXZlc2ApOwogICAgICAgICAgICBpZihBcHBTdGF0ZS5zYWxsZXMgJiYgQXBwU3RhdGUuc2FsbGVzLmxlbmd0aCkgdXBkYXRlU3RhdHVzKCd6b25lLXJlc3NvdXJjZXMnLCAnc3RhdHVzLXJlc3NvdXJjZXMnLCBgJHtBcHBTdGF0ZS5zYWxsZXMubGVuZ3RofSBzYWxsZXNgKTsKICAgICAgICAgICAgaWYoQXBwU3RhdGUuc3VydmVpbGxhbnRzICYmIEFwcFN0YXRlLnN1cnZlaWxsYW50cy5sZW5ndGgpIHVwZGF0ZVN0YXR1cygnem9uZS1zdXJ2ZWlsbGFudHMnLCAnc3RhdHVzLXN1cnZlaWxsYW50cycsIGAke0FwcFN0YXRlLnN1cnZlaWxsYW50cy5sZW5ndGh9IHN1cnZlaWxsYW50c2ApOwogICAgICAgICAgICBpZihBcHBTdGF0ZS5kaXN0cmlidXRpb25EYXRhICYmIEFwcFN0YXRlLmRpc3RyaWJ1dGlvbkRhdGEubGVuZ3RoKSB7IHJlbmRlckV4YW1OYXZpZ2F0aW9uKCk7IHJlbmRlckN1cnJlbnRFeGFtKCk7IH0KICAgICAgICAgICAgaWYoQXBwU3RhdGUuY29udm9jVGV4dCkgewogICAgICAgICAgICAgICAgaWYoQXBwU3RhdGUuY29udm9jVGV4dC5hZGRyZXNzKSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndHh0LWFkZHJlc3MnKS52YWx1ZSA9IEFwcFN0YXRlLmNvbnZvY1RleHQuYWRkcmVzczsKICAgICAgICAgICAgICAgIGlmKEFwcFN0YXRlLmNvbnZvY1RleHQuYm9keSkgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3R4dC1ib2R5JykuaW5uZXJIVE1MID0gQXBwU3RhdGUuY29udm9jVGV4dC5ib2R5OwogICAgICAgICAgICAgICAgaWYoQXBwU3RhdGUuY29udm9jVGV4dC5ydWxlcykgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3R4dC1ydWxlcycpLmlubmVySFRNTCA9IEFwcFN0YXRlLmNvbnZvY1RleHQucnVsZXM7CiAgICAgICAgICAgICAgICBpZihBcHBTdGF0ZS5jb252b2NUZXh0LmNpdHkpIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0eHQtY2l0eScpLmlubmVyVGV4dCA9IEFwcFN0YXRlLmNvbnZvY1RleHQuY2l0eTsKICAgICAgICAgICAgICAgIGlmKEFwcFN0YXRlLmNvbnZvY1RleHQudGl0bGVFeHRyYVN0ZCkgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3R4dC10aXRsZS1leHRyYS1zdGQnKS5pbm5lclRleHQgPSBBcHBTdGF0ZS5jb252b2NUZXh0LnRpdGxlRXh0cmFTdGQ7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgIGlmKEFwcFN0YXRlLnN1cnZDb252b2NUZXh0KSB7CiAgICAgICAgICAgICAgICBpZihBcHBTdGF0ZS5zdXJ2Q29udm9jVGV4dC5hZGRyZXNzKSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndHh0LXN1cnYtYWRkcmVzcycpLnZhbHVlID0gQXBwU3RhdGUuc3VydkNvbnZvY1RleHQuYWRkcmVzczsKICAgICAgICAgICAgICAgIGlmKEFwcFN0YXRlLnN1cnZDb252b2NUZXh0LmJvZHkpIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0eHQtc3Vydi1ib2R5JykuaW5uZXJIVE1MID0gQXBwU3RhdGUuc3VydkNvbnZvY1RleHQuYm9keTsKICAgICAgICAgICAgICAgIGlmKEFwcFN0YXRlLnN1cnZDb252b2NUZXh0LnJ1bGVzKSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndHh0LXN1cnYtcnVsZXMnKS5pbm5lckhUTUwgPSBBcHBTdGF0ZS5zdXJ2Q29udm9jVGV4dC5ydWxlczsKICAgICAgICAgICAgICAgIGlmKEFwcFN0YXRlLnN1cnZDb252b2NUZXh0LmNpdHkpIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0eHQtc3Vydi1jaXR5JykuaW5uZXJUZXh0ID0gQXBwU3RhdGUuc3VydkNvbnZvY1RleHQuY2l0eTsKICAgICAgICAgICAgICAgIGlmKEFwcFN0YXRlLnN1cnZDb252b2NUZXh0LnRpdGxlRXh0cmFTdXJ2KSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndHh0LXRpdGxlLWV4dHJhLXN1cnYnKS5pbm5lclRleHQgPSBBcHBTdGF0ZS5zdXJ2Q29udm9jVGV4dC50aXRsZUV4dHJhU3VydjsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZihBcHBTdGF0ZS5wb2NoZXR0ZVRleHQgJiYgQXBwU3RhdGUucG9jaGV0dGVUZXh0LnN1cnYpIHsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3R4dC1wb2NoZXR0ZS1zdXJ2JykudmFsdWUgPSBBcHBTdGF0ZS5wb2NoZXR0ZVRleHQuc3VydjsgfSBlbHNlIHsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3R4dC1wb2NoZXR0ZS1zdXJ2JykudmFsdWUgPSBkZWZhdWx0Q29uc2lnbmVzOyB9CiAgICAgICAgICAgIHBvcHVsYXRlQ2xhc3NGaWx0ZXIoKTsgcG9wdWxhdGVTdXJ2ZWlsbGFudEZpbHRlcigpOyBwb3B1bGF0ZUVtYXJnZW1lbnRGaWx0ZXJzKCk7IHBvcHVsYXRlUFZFeGFtU2VsZWN0KCk7IHBvcHVsYXRlUmVjYXBGaWx0ZXJzKCk7CiAgICAgICAgfQogICAgICAgIAogICAgICAgIGZ1bmN0aW9uIGdldFZhbHVlKHJvdywgcG9zc2libGVLZXlzKSB7CiAgICAgICAgICAgIGlmICghcm93KSByZXR1cm4gbnVsbDsKICAgICAgICAgICAgY29uc3Qgcm93S2V5cyA9IE9iamVjdC5rZXlzKHJvdyk7CiAgICAgICAgICAgIGZvciAobGV0IHBrIG9mIHBvc3NpYmxlS2V5cykgewogICAgICAgICAgICAgICAgY29uc3QgdGFyZ2V0ID0gbm9ybWFsaXplKHBrKTsKICAgICAgICAgICAgICAgIGNvbnN0IGZvdW5kS2V5ID0gcm93S2V5cy5maW5kKGsgPT4gbm9ybWFsaXplKGspID09PSB0YXJnZXQpOwogICAgICAgICAgICAgICAgaWYgKGZvdW5kS2V5KSByZXR1cm4gcm93W2ZvdW5kS2V5XTsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGlzVGllcnNUZW1wcyh2YWwpIHsgaWYgKCF2YWwpIHJldHVybiBmYWxzZTsgY29uc3QgcyA9IHZhbC50b1N0cmluZygpLnRvVXBwZXJDYXNlKCk7IHJldHVybiBzLmluY2x1ZGVzKCdUVCcpIHx8IHMuaW5jbHVkZXMoJ09VSScpIHx8IHMuaW5jbHVkZXMoJ1RJRVJTJykgfHwgcy5pbmNsdWRlcygnWUVTJyk7IH0KCiAgICAgICAgZnVuY3Rpb24gaGFuZGxlRmlsZShpbnB1dCwgdHlwZSkgeyAKICAgICAgICAgICAgY29uc3QgZmlsZSA9IGlucHV0LmZpbGVzWzBdOyBpZiAoIWZpbGUpIHJldHVybjsKICAgICAgICAgICAgY29uc3QgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTsKICAgICAgICAgICAgcmVhZGVyLm9ubG9hZCA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBuZXcgVWludDhBcnJheShlLnRhcmdldC5yZXN1bHQpOyAKICAgICAgICAgICAgICAgIGNvbnN0IHdvcmtib29rID0gWExTWC5yZWFkKGRhdGEsIHt0eXBlOiAnYXJyYXknfSk7CiAgICAgICAgICAgICAgICBjb25zdCBqc29uRGF0YSA9IFhMU1gudXRpbHMuc2hlZXRfdG9fanNvbih3b3JrYm9vay5TaGVldHNbd29ya2Jvb2suU2hlZXROYW1lc1swXV0pOwogICAgICAgICAgICAgICAgaWYgKHR5cGUgPT09ICdFTEVWRVMnKSB7IEFwcFN0YXRlLmVsZXZlcyA9IGpzb25EYXRhOyB1cGRhdGVTdGF0dXMoJ3pvbmUtZWxldmVzJywgJ3N0YXR1cy1lbGV2ZXMnLCBgJHtqc29uRGF0YS5sZW5ndGh9IMOpbMOodmVzYCk7IH0KICAgICAgICAgICAgICAgIGVsc2UgaWYgKHR5cGUgPT09ICdFUFJFVVZFUycpIHsgQXBwU3RhdGUuZXByZXV2ZXMgPSBqc29uRGF0YTsgdXBkYXRlU3RhdHVzKCd6b25lLWVwcmV1dmVzJywgJ3N0YXR1cy1lcHJldXZlcycsIGAke2pzb25EYXRhLmxlbmd0aH0gw6lwcmV1dmVzYCk7IH0KICAgICAgICAgICAgICAgIGVsc2UgaWYgKHR5cGUgPT09ICdSRVNTT1VSQ0VTJykgeyBBcHBTdGF0ZS5zYWxsZXMgPSBqc29uRGF0YTsgdXBkYXRlU3RhdHVzKCd6b25lLXJlc3NvdXJjZXMnLCAnc3RhdHVzLXJlc3NvdXJjZXMnLCBgJHtqc29uRGF0YS5sZW5ndGh9IHNhbGxlc2ApOyB9CiAgICAgICAgICAgICAgICBlbHNlIGlmICh0eXBlID09PSAnU1VSVkVJTExBTlRTJykgeyBBcHBTdGF0ZS5zdXJ2ZWlsbGFudHMgPSBqc29uRGF0YTsgdXBkYXRlU3RhdHVzKCd6b25lLXN1cnZlaWxsYW50cycsICdzdGF0dXMtc3VydmVpbGxhbnRzJywgYCR7anNvbkRhdGEubGVuZ3RofSBzdXJ2ZWlsbGFudHNgKTsgfQogICAgICAgICAgICB9OyAKICAgICAgICAgICAgcmVhZGVyLnJlYWRBc0FycmF5QnVmZmVyKGZpbGUpOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gdXBkYXRlU3RhdHVzKHpvbmVJZCwgc3RhdHVzSWQsIG1zZykgeyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh6b25lSWQpLmNsYXNzTGlzdC5hZGQoJ2xvYWRlZCcpOyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChzdGF0dXNJZCkuaW5uZXJIVE1MID0gJzxpIGNsYXNzPSJmYS1zb2xpZCBmYS1jaGVjayI+PC9pPiAnICsgbXNnOyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChzdGF0dXNJZCkuY2xhc3NOYW1lID0gJ3N0YXR1cy1iYWRnZSBzdGF0dXMtb2snOyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChzdGF0dXNJZCkuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7IH0KCiAgICAgICAgZnVuY3Rpb24gbGF1bmNoRGlzdHJpYnV0aW9uKCkgewogICAgICAgICAgICBpZighQXBwU3RhdGUuZXByZXV2ZXMubGVuZ3RoIHx8ICFBcHBTdGF0ZS5lbGV2ZXMubGVuZ3RoIHx8ICFBcHBTdGF0ZS5zYWxsZXMubGVuZ3RoKSB7IGFsZXJ0KCJJbXBvcnQgbWFucXVhbnQuIik7IHJldHVybjsgfQogICAgICAgICAgICBpZighY29uZmlybSgiTGFuY2VyIGxlIGNhbGN1bCA/IEF0dGVudGlvbiwgY2VsYSDDqWNyYXNlcmEgbGEgcsOpcGFydGl0aW9uIGV4aXN0YW50ZS4iKSkgcmV0dXJuOwogICAgICAgICAgICBjb25zdCBtZXRob2QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGlzdHJpYi1tZXRob2QnKS52YWx1ZTsgCiAgICAgICAgICAgIGNvbnN0IHNjb3BlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Rpc3RyaWItc2NvcGUnKS52YWx1ZTsgICAKICAgICAgICAgICAgY2FsY3VsYXRlRGlzdHJpYnV0aW9uKG1ldGhvZCwgc2NvcGUpOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gY2FsY3VsYXRlRGlzdHJpYnV0aW9uKG1ldGhvZCwgc2NvcGUpIHsKICAgICAgICAgICAgY29uc3QgZmlyc3RTdHVkZW50ID0gQXBwU3RhdGUuZWxldmVzWzBdOwogICAgICAgICAgICBjb25zdCBoYXNTcGVjaWFsdHkgPSBnZXRWYWx1ZShmaXJzdFN0dWRlbnQsIFsnU3DDqWNpYWxpdMOpMScsICdTcGUxJywgJ1NwZSAxJ10pICE9PSBudWxsOwogICAgICAgICAgICBpZiAoc2NvcGUgPT09ICdBTEwnIHx8IEFwcFN0YXRlLmRpc3RyaWJ1dGlvbkRhdGEubGVuZ3RoID09PSAwKSBBcHBTdGF0ZS5kaXN0cmlidXRpb25EYXRhID0gbmV3IEFycmF5KEFwcFN0YXRlLmVwcmV1dmVzLmxlbmd0aCkuZmlsbChudWxsKTsKICAgICAgICAgICAgbGV0IGluZGljZXNUb1Byb2Nlc3MgPSBbXTsKICAgICAgICAgICAgaWYgKHNjb3BlID09PSAnQUxMJykgewogICAgICAgICAgICAgICAgZm9yKGxldCBpPTA7IGk8QXBwU3RhdGUuZXByZXV2ZXMubGVuZ3RoOyBpKyspIGluZGljZXNUb1Byb2Nlc3MucHVzaChpKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGluZGljZXNUb1Byb2Nlc3MucHVzaChBcHBTdGF0ZS5jdXJyZW50RXhhbUluZGV4KTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpbmRpY2VzVG9Qcm9jZXNzLmZvckVhY2goZXhhbUlkeCA9PiB7CiAgICAgICAgICAgICAgICBjb25zdCBleGFtID0gQXBwU3RhdGUuZXByZXV2ZXNbZXhhbUlkeF07CiAgICAgICAgICAgICAgICBsZXQgZXhhbVN0YXRlID0geyBleGFtSWR4OiBleGFtSWR4LCBzdG9yYWdlOiBbXSwgcm9vbXM6IFtdIH07CiAgICAgICAgICAgICAgICBjb25zdCBtYXRpZXJlID0gZ2V0VmFsdWUoZXhhbSwgWydNYXRpw6hyZScsICdFcHJldXZlJywgJ05vbSddKSB8fCAoJ8OJcHJldXZlICcgKyAoZXhhbUlkeCArIDEpKTsKICAgICAgICAgICAgICAgIGxldCBjYW5kaWRhdGVzID0gQXBwU3RhdGUuZWxldmVzLmZpbHRlcihlID0+IHsKICAgICAgICAgICAgICAgICAgICBpZiAoIWhhc1NwZWNpYWx0eSkgcmV0dXJuIHRydWU7CiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3BlMSA9IGdldFZhbHVlKGUsIFsnU3DDqWNpYWxpdMOpMScsICdTcGUxJywgJ1NwZSAxJ10pOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IHNwZTIgPSBnZXRWYWx1ZShlLCBbJ1Nww6ljaWFsaXTDqTInLCAnU3BlMicsICdTcGUgMiddKTsKICAgICAgICAgICAgICAgICAgICBpZiAoIXNwZTEgJiYgIXNwZTIpIHJldHVybiB0cnVlOyAKICAgICAgICAgICAgICAgICAgICByZXR1cm4gKHNwZTEgPT0gbWF0aWVyZSB8fCBzcGUyID09IG1hdGllcmUgfHwgWyJQaGlsb3NvcGhpZSIsICJGcmFuw6dhaXMiLCAiSGlzdG9pcmUtR8OpbyIsICJFbnNlaWduZW1lbnQgU2NpZW50aWZpcXVlIl0uaW5jbHVkZXMobWF0aWVyZSkpOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBpZiAobWV0aG9kID09PSAnQ0xBU1MnKSB7CiAgICAgICAgICAgICAgICAgICAgY2FuZGlkYXRlcy5zb3J0KChhLCBiKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNBID0gbm9ybUNsYXNzKGdldFZhbHVlKGEsIFsnQ2xhc3NlJywgJ0RpdiddKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNCID0gbm9ybUNsYXNzKGdldFZhbHVlKGIsIFsnQ2xhc3NlJywgJ0RpdiddKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjQSAhPT0gY0IpIHJldHVybiBjQS5sb2NhbGVDb21wYXJlKGNCKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChnZXRWYWx1ZShhLFsnTm9tJ10pfHwnJykubG9jYWxlQ29tcGFyZShnZXRWYWx1ZShiLFsnTm9tJ10pfHwnJyk7CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIGNhbmRpZGF0ZXMuc29ydCgoYSwgYikgPT4gKGdldFZhbHVlKGEsWydOb20nXSl8fCcnKS5sb2NhbGVDb21wYXJlKGdldFZhbHVlKGIsWydOb20nXSl8fCcnKSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBjb25zdCB0dFN0dWRlbnRzID0gY2FuZGlkYXRlcy5maWx0ZXIoZSA9PiBpc1RpZXJzVGVtcHMoZ2V0VmFsdWUoZSwgWydUaWVycyB0ZW1wcycsICdUVCddKSkpOwogICAgICAgICAgICAgICAgY29uc3QgcmVnU3R1ZGVudHMgPSBjYW5kaWRhdGVzLmZpbHRlcihlID0+ICFpc1RpZXJzVGVtcHMoZ2V0VmFsdWUoZSwgWydUaWVycyB0ZW1wcycsICdUVCddKSkpOwogICAgICAgICAgICAgICAgbGV0IHJlbWFpbmluZ1RUID0gWy4uLnR0U3R1ZGVudHNdOwogICAgICAgICAgICAgICAgbGV0IHJlbWFpbmluZ1JlZyA9IFsuLi5yZWdTdHVkZW50c107CiAgICAgICAgICAgICAgICBBcHBTdGF0ZS5zYWxsZXMuZm9yRWFjaCgoc2FsbGUsIHJvb21JZHgpID0+IHsKICAgICAgICAgICAgICAgICAgICBsZXQgcmF3TmFtZSA9IGdldFZhbHVlKHNhbGxlLCBbJ1NhbGxlJywgJ05vbSddKSB8fCAoJ1NhbGxlICcgKyAocm9vbUlkeCArIDEpKTsKICAgICAgICAgICAgICAgICAgICBsZXQgY2xlYW5OYW1lID0gcmF3TmFtZS50b1N0cmluZygpLnJlcGxhY2UoL1xzKlwoP1RUXCk/XHMqJC9pLCAnJyk7IAogICAgICAgICAgICAgICAgICAgIGNvbnN0IHJvb21UeXBlID0gZ2V0VmFsdWUoc2FsbGUsIFsnVHlwZSddKSB8fCAiIjsKICAgICAgICAgICAgICAgICAgICBjb25zdCByb29tQ2FwID0gcGFyc2VJbnQoZ2V0VmFsdWUoc2FsbGUsIFsnQ2FwYWNpdMOpJ10pKSB8fCA5OTsgCiAgICAgICAgICAgICAgICAgICAgY29uc3QgaXNSb29tVFQgPSBpc1RpZXJzVGVtcHMocm9vbVR5cGUpOwogICAgICAgICAgICAgICAgICAgIGxldCBsaXN0VG9Vc2UgPSBpc1Jvb21UVCA/IHJlbWFpbmluZ1RUIDogcmVtYWluaW5nUmVnOwogICAgICAgICAgICAgICAgICAgIGxldCByb29tU3R1ZGVudHMgPSBbXTsKICAgICAgICAgICAgICAgICAgICBpZiAobWV0aG9kID09PSAnQ0xBU1MnKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsaXN0VG9Vc2UubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZmlyc3RTdHVkZW50Q2xhc3MgPSBub3JtQ2xhc3MoZ2V0VmFsdWUobGlzdFRvVXNlWzBdLCBbJ0NsYXNzZScsICdEaXYnXSkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHNhbWVDbGFzc0NvdW50ID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcihsZXQgaz0wOyBrIDwgbGlzdFRvVXNlLmxlbmd0aDsgaysrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5vcm1DbGFzcyhnZXRWYWx1ZShsaXN0VG9Vc2Vba10sIFsnQ2xhc3NlJywgJ0RpdiddKSkgPT09IGZpcnN0U3R1ZGVudENsYXNzKSBzYW1lQ2xhc3NDb3VudCsrOyBlbHNlIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYW1vdW50VG9UYWtlID0gTWF0aC5taW4ocm9vbUNhcCwgc2FtZUNsYXNzQ291bnQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcm9vbVN0dWRlbnRzID0gbGlzdFRvVXNlLnNwbGljZSgwLCBhbW91bnRUb1Rha2UpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYW1vdW50VG9UYWtlID0gTWF0aC5taW4ocm9vbUNhcCwgbGlzdFRvVXNlLmxlbmd0aCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJvb21TdHVkZW50cyA9IGxpc3RUb1VzZS5zcGxpY2UoMCwgYW1vdW50VG9UYWtlKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgcm9vbVN0dWRlbnRzID0gcm9vbVN0dWRlbnRzLm1hcChzID0+ICh7IC4uLnMsIHBhc3NhZ2VUaW1lOiAiIiwgbG9kZ2VUaW1lOiAiIiB9KSk7CiAgICAgICAgICAgICAgICAgICAgcm9vbVN0dWRlbnRzLnNvcnQoKGEsYikgPT4gKGdldFZhbHVlKGEsWydOb20nXSl8fCcnKS5sb2NhbGVDb21wYXJlKGdldFZhbHVlKGIsWydOb20nXSl8fCcnKSk7CiAgICAgICAgICAgICAgICAgICAgZXhhbVN0YXRlLnJvb21zLnB1c2goeyBuYW1lOiBjbGVhbk5hbWUsIGNhcGFjaXR5OiByb29tQ2FwLCBpc1RUOiBpc1Jvb21UVCwgc3VydmVpbGxhbnRzOiBbXSwgc3R1ZGVudHM6IHJvb21TdHVkZW50cyB9KTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgZXhhbVN0YXRlLnN0b3JhZ2UgPSBbLi4ucmVtYWluaW5nVFQsIC4uLnJlbWFpbmluZ1JlZ10uc29ydCgoYSxiKSA9PiAoZ2V0VmFsdWUoYSxbJ05vbSddKXx8JycpLmxvY2FsZUNvbXBhcmUoZ2V0VmFsdWUoYixbJ05vbSddKXx8JycpKTsgCiAgICAgICAgICAgICAgICBBcHBTdGF0ZS5kaXN0cmlidXRpb25EYXRhW2V4YW1JZHhdID0gZXhhbVN0YXRlOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgaWYgKHNjb3BlID09PSAnQUxMJykgQXBwU3RhdGUuY3VycmVudEV4YW1JbmRleCA9IDA7CiAgICAgICAgICAgIHJlbmRlckV4YW1OYXZpZ2F0aW9uKCk7IHJlbmRlckN1cnJlbnRFeGFtKCk7IHBvcHVsYXRlUFZFeGFtU2VsZWN0KCk7IHBvcHVsYXRlRW1hcmdlbWVudEZpbHRlcnMoKTsgcG9wdWxhdGVSZWNhcEZpbHRlcnMoKTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIHJlbmRlckV4YW1OYXZpZ2F0aW9uKCkgewogICAgICAgICAgICBjb25zdCBuYXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZXhhbS1uYXZpZ2F0aW9uJyk7IG5hdi5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnOwogICAgICAgICAgICBjb25zdCBzZWxlY3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZXhhbS1kcm9wZG93bicpOyBzZWxlY3QuaW5uZXJIVE1MID0gIiI7CiAgICAgICAgICAgIEFwcFN0YXRlLmRpc3RyaWJ1dGlvbkRhdGEuZm9yRWFjaCgoZWQsIGlkeCkgPT4gewogICAgICAgICAgICAgICAgaWYoIWVkICYmIEFwcFN0YXRlLmVwcmV1dmVzW2lkeF0pIHsKICAgICAgICAgICAgICAgICAgICBjb25zdCBleGFtSW5mbyA9IEFwcFN0YXRlLmVwcmV1dmVzW2lkeF07CiAgICAgICAgICAgICAgICAgICAgY29uc3QgbWF0aWVyZSA9IGdldFZhbHVlKGV4YW1JbmZvLCBbJ01hdGnDqHJlJywgJ0VwcmV1dmUnLCAnTm9tJ10pIHx8ICgnw4lwcmV1dmUgJyArIChpZHgrMSkpOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IG9wdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ29wdGlvbicpOyBvcHQudmFsdWUgPSBpZHg7IG9wdC50ZXh0ID0gYCR7aWR4KzF9LiAke21hdGllcmV9IChOb24gY2FsY3Vsw6kpYDsKICAgICAgICAgICAgICAgICAgICBzZWxlY3QuYXBwZW5kQ2hpbGQob3B0KTsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZihlZCkgewogICAgICAgICAgICAgICAgICAgIGNvbnN0IGV4YW1JbmZvID0gQXBwU3RhdGUuZXByZXV2ZXNbZWQuZXhhbUlkeF07CiAgICAgICAgICAgICAgICAgICAgY29uc3QgbWF0aWVyZSA9IGdldFZhbHVlKGV4YW1JbmZvLCBbJ01hdGnDqHJlJywgJ0VwcmV1dmUnLCAnTm9tJ10pIHx8ICgnw4lwcmV1dmUgJyArIChpZHgrMSkpOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IG9wdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ29wdGlvbicpOyBvcHQudmFsdWUgPSBpZHg7IG9wdC50ZXh0ID0gYCR7aWR4KzF9LiAke21hdGllcmV9YDsKICAgICAgICAgICAgICAgICAgICBpZihpZHggPT09IEFwcFN0YXRlLmN1cnJlbnRFeGFtSW5kZXgpIG9wdC5zZWxlY3RlZCA9IHRydWU7IHNlbGVjdC5hcHBlbmRDaGlsZChvcHQpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIHJlbmRlckN1cnJlbnRFeGFtKCkgeyAKICAgICAgICAgICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2N1cnJlbnQtZXhhbS1jb250YWluZXInKTsgY29udGFpbmVyLmlubmVySFRNTCA9ICIiOwogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZXhhbS1kcm9wZG93bicpLnZhbHVlID0gQXBwU3RhdGUuY3VycmVudEV4YW1JbmRleDsKICAgICAgICAgICAgY29uc3QgZXhhbVN0YXRlID0gQXBwU3RhdGUuZGlzdHJpYnV0aW9uRGF0YVtBcHBTdGF0ZS5jdXJyZW50RXhhbUluZGV4XTsgCiAgICAgICAgICAgIGlmICghZXhhbVN0YXRlKSB7CiAgICAgICAgICAgICAgICAgY29udGFpbmVyLmlubmVySFRNTCA9ICc8ZGl2IGNsYXNzPSJjYXJkIiBzdHlsZT0idGV4dC1hbGlnbjpjZW50ZXI7IGNvbG9yOiNjMDM5MmI7Ij5Sw6lwYXJ0aXRpb24gbm9uIGNhbGN1bMOpZSBwb3VyIGNldHRlIMOpcHJldXZlLjwvZGl2Pic7CiAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGNvbnN0IGV4YW1JbmZvID0gQXBwU3RhdGUuZXByZXV2ZXNbZXhhbVN0YXRlLmV4YW1JZHhdOwogICAgICAgICAgICBjb25zdCBtYXRpZXJlID0gZ2V0VmFsdWUoZXhhbUluZm8sIFsnTWF0acOocmUnLCAnRXByZXV2ZScsICdOb20nXSk7CiAgICAgICAgICAgIGNvbnN0IGJsb2NrSHRtbCA9IGA8ZGl2IGNsYXNzPSJleGFtLXNlY3Rpb24tYmxvY2siPjxkaXYgY2xhc3M9ImV4YW0tc2VjdGlvbi1oZWFkZXIiPjxzcGFuPiR7bWF0aWVyZX08L3NwYW4+PC9kaXY+PGg0IHN0eWxlPSJtYXJnaW46MTBweCAwIDVweCAwOyBjb2xvcjojN2Y4YzhkOyBmb250LXNpemU6MC45cmVtOyI+Wm9uZSBkZSBzdG9ja2FnZSAoTm9uIHBsYWPDqXMpPC9oND48ZGl2IGNsYXNzPSJzdG9yYWdlLXpvbmUiIG9uZHJvcD0iZHJvcChldmVudCkiIG9uZHJhZ292ZXI9ImFsbG93RHJvcChldmVudCkiPjwvZGl2PjxkaXYgY2xhc3M9InJvb21zLWdyaWQiPjwvZGl2PjwvZGl2PmA7CiAgICAgICAgICAgIGNvbnRhaW5lci5pbnNlcnRBZGphY2VudEhUTUwoJ2JlZm9yZWVuZCcsIGJsb2NrSHRtbCk7CiAgICAgICAgICAgIGNvbnN0IGJsb2NrID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5leGFtLXNlY3Rpb24tYmxvY2snKTsKICAgICAgICAgICAgY29uc3Qgc3RvcmFnZURpdiA9IGJsb2NrLnF1ZXJ5U2VsZWN0b3IoJy5zdG9yYWdlLXpvbmUnKTsKICAgICAgICAgICAgZXhhbVN0YXRlLnN0b3JhZ2UuZm9yRWFjaChzID0+IGNyZWF0ZVN0dWRlbnRFbGVtZW50KHMsIHN0b3JhZ2VEaXYsIGZhbHNlKSk7CiAgICAgICAgICAgIGNvbnN0IHJvb21zR3JpZCA9IGJsb2NrLnF1ZXJ5U2VsZWN0b3IoJy5yb29tcy1ncmlkJyk7CiAgICAgICAgICAgIGV4YW1TdGF0ZS5yb29tcy5mb3JFYWNoKChyb29tU3RhdGUsIHJJZHgpID0+IHsKICAgICAgICAgICAgICAgIGNvbnN0IHVuaXF1ZUlkID0gYHJvb20tJHtySWR4fWAsIHN1cnZDb250YWluZXJJZCA9IGBzdXJ2LSR7cklkeH1gOwogICAgICAgICAgICAgICAgY29uc3QgdHRDbGFzcyA9IHJvb21TdGF0ZS5pc1RUID8gInJvb20tdHQiIDogIiI7CiAgICAgICAgICAgICAgICBsZXQgc3Vydkh0bWwgPSAiIjsgaWYocm9vbVN0YXRlLnN1cnZlaWxsYW50cy5sZW5ndGggPiAwKSB7IHJvb21TdGF0ZS5zdXJ2ZWlsbGFudHMuZm9yRWFjaCh2YWwgPT4geyBzdXJ2SHRtbCArPSBgPGRpdiBjbGFzcz0ic3VydmVpbGxhbnQtcm93Ij48c2VsZWN0IG9uY2hhbmdlPSJ1cGRhdGVDdXJyZW50RXhhbVN0YXRlKCkiPiR7Z2V0U3VydmVpbGxhbnRPcHRpb25zKHZhbCl9PC9zZWxlY3Q+PC9kaXY+YDsgfSk7IH0gZWxzZSB7IHN1cnZIdG1sID0gYDxkaXYgY2xhc3M9InN1cnZlaWxsYW50LXJvdyI+PHNlbGVjdCBvbmNoYW5nZT0idXBkYXRlQ3VycmVudEV4YW1TdGF0ZSgpIj4ke2dldFN1cnZlaWxsYW50T3B0aW9ucygpfTwvc2VsZWN0PjwvZGl2PmA7IH0KICAgICAgICAgICAgICAgIGNvbnN0IHJvb21IdG1sID0gYAogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InJvb20tY2FyZCAke3R0Q2xhc3N9Ij4KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0icm9vbS1oZWFkZXIiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0icm9vbS1oZWFkZXItdG9wIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3Bhbj4ke3Jvb21TdGF0ZS5uYW1lfSAke3Jvb21TdGF0ZS5pc1RUPycoVFQpJzonJ308L3NwYW4+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iZGlzcGxheTpmbGV4OyBhbGlnbi1pdGVtczpjZW50ZXI7IGdhcDoxMHB4OyI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuPiR7cm9vbVN0YXRlLnN0dWRlbnRzLmxlbmd0aH0vJHtyb29tU3RhdGUuY2FwYWNpdHl9PC9zcGFuPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIG9uY2xpY2s9ImNsZWFyUm9vbSgke3JJZHh9KSIgc3R5bGU9ImJhY2tncm91bmQ6d2hpdGU7IGJvcmRlcjpub25lOyBjb2xvcjojYzAzOTJiOyBjdXJzb3I6cG9pbnRlcjsgcGFkZGluZzoycHggNnB4OyBib3JkZXItcmFkaXVzOjRweDsiIHRpdGxlPSJWaWRlciBsYSBzYWxsZSI+PGkgY2xhc3M9ImZhLXNvbGlkIGZhLXRyYXNoIj48L2k+PC9idXR0b24+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9InNjaGVkdWxlLWJ0biIgb25jbGljaz0ic2NoZWR1bGVSb29tKCR7cklkeH0pIj48aSBjbGFzcz0iZmEtc29saWQgZmEtd2FuZC1tYWdpYy1zcGFya2xlcyI+PC9pPiBQbGFuaWZpZXI8L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InJvb20tc3VydmVpbGxhbnRzLWFyZWEiIGlkPSIke3N1cnZDb250YWluZXJJZH0iPiR7c3Vydkh0bWx9PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImJ0bi1hZGQtc3VydiIgb25jbGljaz0iYWRkU3VydmVpbGxhbnRGaWVsZCgnJHtzdXJ2Q29udGFpbmVySWR9JykiPkFqb3V0ZXI8L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0icm9vbS1ib2R5IiBpZD0iJHt1bmlxdWVJZH0iIG9uZHJvcD0iZHJvcChldmVudCkiIG9uZHJhZ292ZXI9ImFsbG93RHJvcChldmVudCkiIGRhdGEtY2FwYWNpdHk9IiR7cm9vbVN0YXRlLmNhcGFjaXR5fSIgZGF0YS1pcy10dD0iJHtyb29tU3RhdGUuaXNUVH0iPjwvZGl2PgogICAgICAgICAgICAgICAgICAgIDwvZGl2PmA7CiAgICAgICAgICAgICAgICByb29tc0dyaWQuaW5zZXJ0QWRqYWNlbnRIVE1MKCdiZWZvcmVlbmQnLCByb29tSHRtbCk7CiAgICAgICAgICAgICAgICBjb25zdCBib2R5RGl2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodW5pcXVlSWQpOwogICAgICAgICAgICAgICAgcm9vbVN0YXRlLnN0dWRlbnRzLmZvckVhY2gocyA9PiBjcmVhdGVTdHVkZW50RWxlbWVudChzLCBib2R5RGl2LCB0cnVlKSk7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgICAKICAgICAgICBmdW5jdGlvbiBjcmVhdGVTdHVkZW50RWxlbWVudChkYXRhLCBwYXJlbnQsIGlzSW5zaWRlUm9vbSkgeyAKICAgICAgICAgICAgY29uc3QgZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsgZWwuY2xhc3NOYW1lID0gJ3N0dWRlbnQtaXRlbSc7IGVsLmRhdGFzZXQuaW5mbyA9IEpTT04uc3RyaW5naWZ5KGRhdGEpOyAKICAgICAgICAgICAgaWYoaXNUaWVyc1RlbXBzKGdldFZhbHVlKGRhdGEsWydUaWVycyB0ZW1wcycsJ1RUJ10pKSkgZWwuY2xhc3NMaXN0LmFkZCgnaXMtdHQnKTsgCiAgICAgICAgICAgIGNvbnN0IGZ1bGxOYW1lID0gZ2V0VmFsdWUoZGF0YSxbJ05vbSddKSArICIgIiArIGdldFZhbHVlKGRhdGEsWydQcsOpbm9tJ10pOyAKICAgICAgICAgICAgbGV0IGlubmVySFRNTCA9IGA8ZGl2IGNsYXNzPSJzdHVkZW50LW1haW4taW5mbyI+PHNwYW4+JHtmdWxsTmFtZX08L3NwYW4+PHNwYW4gc3R5bGU9ImZvbnQtc2l6ZTowLjc1cmVtOyBjb2xvcjojN2Y4YzhkOyI+JHtnZXRWYWx1ZShkYXRhLFsnQ2xhc3NlJ10pfTwvc3Bhbj48L2Rpdj5gOwogICAgICAgICAgICBpZihpc0luc2lkZVJvb20pIHsKICAgICAgICAgICAgICAgIGlubmVySFRNTCArPSBgCiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJzdHVkZW50LW9yYWwtY29udHJvbHMiPgogICAgICAgICAgICAgICAgICAgIDxsYWJlbD5QOjwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9InRpbWUiIHZhbHVlPSIke2RhdGEucGFzc2FnZVRpbWUgfHwgJyd9IiBvbmNoYW5nZT0idXBkYXRlU3R1ZGVudERhdGEodGhpcywgJ3Bhc3NhZ2VUaW1lJykiIHRpdGxlPSJIZXVyZSBkZSBQYXNzYWdlIj4KICAgICAgICAgICAgICAgICAgICA8bGFiZWw+TDo8L2xhYmVsPgogICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJ0aW1lIiB2YWx1ZT0iJHtkYXRhLmxvZGdlVGltZSB8fCAnJ30iIG9uY2hhbmdlPSJ1cGRhdGVTdHVkZW50RGF0YSh0aGlzLCAnbG9kZ2VUaW1lJykiIHRpdGxlPSJIZXVyZSBkZSBMb2dlIj4KICAgICAgICAgICAgICAgIDwvZGl2PmA7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWwuaW5uZXJIVE1MID0gaW5uZXJIVE1MOyBlbC5zZXRBdHRyaWJ1dGUoJ2RhdGEtc29ydCcsIGZ1bGxOYW1lLnRvVXBwZXJDYXNlKCkpOyBlbC5kcmFnZ2FibGUgPSB0cnVlOyBlbC5pZCA9ICJzLSIrTWF0aC5yYW5kb20oKTsgZWwub25kcmFnc3RhcnQgPSBkcmFnOyBwYXJlbnQuYXBwZW5kQ2hpbGQoZWwpOyAKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIHVwZGF0ZVN0dWRlbnREYXRhKGlucHV0LCBmaWVsZCkgewogICAgICAgICAgICBjb25zdCBzdHVkZW50RWwgPSBpbnB1dC5jbG9zZXN0KCcuc3R1ZGVudC1pdGVtJyk7CiAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBKU09OLnBhcnNlKHN0dWRlbnRFbC5kYXRhc2V0LmluZm8pOwogICAgICAgICAgICBkYXRhW2ZpZWxkXSA9IGlucHV0LnZhbHVlOwogICAgICAgICAgICBzdHVkZW50RWwuZGF0YXNldC5pbmZvID0gSlNPTi5zdHJpbmdpZnkoZGF0YSk7CiAgICAgICAgICAgIHVwZGF0ZUN1cnJlbnRFeGFtU3RhdGUoKTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIHNjaGVkdWxlUm9vbShySWR4KSB7CiAgICAgICAgICAgIGNvbnN0IHN0YXJ0VGltZSA9IHByb21wdCgiSGV1cmUgZGUgZMOpYnV0IGR1IHByZW1pZXIgcGFzc2FnZSAoSEg6TU0pIDoiLCAiMDg6MDAiKTsgaWYoIXN0YXJ0VGltZSkgcmV0dXJuOwogICAgICAgICAgICBjb25zdCBkdXJhdGlvbiA9IHByb21wdCgiRHVyw6llIHBhciBjYW5kaWRhdCAobWludXRlcykgOiIsICIyMCIpOyBpZighZHVyYXRpb24pIHJldHVybjsKICAgICAgICAgICAgY29uc3QgbG9kZ2VPZmZzZXQgPSBwcm9tcHQoIkTDqWxhaSBkZSBtaXNlIGVuIGxvZ2UgYXZhbnQgcGFzc2FnZSAobWludXRlcykgLSBNZXR0cmUgMCBzaSBhdWN1bmUgOiIsICIzMCIpOyBpZihsb2RnZU9mZnNldCA9PT0gbnVsbCkgcmV0dXJuOwogICAgICAgICAgICBjb25zdCB3YW50QnJlYWsgPSBjb25maXJtKCJWb3VsZXotdm91cyBpbnPDqXJlciB1bmUgcGF1c2UgcG91ciBsZXMgc3VydmVpbGxhbnRzID8iKTsKICAgICAgICAgICAgbGV0IGJyZWFrQWZ0ZXIgPSAwLCBicmVha0R1cmF0aW9uID0gMDsKICAgICAgICAgICAgaWYgKHdhbnRCcmVhaykgeyBicmVha0FmdGVyID0gcGFyc2VJbnQocHJvbXB0KCJJbnPDqXJlciB1bmUgcGF1c2UgYXByw6hzIGNvbWJpZW4gZGUgY2FuZGlkYXRzID8iLCAiNCIpKTsgYnJlYWtEdXJhdGlvbiA9IHBhcnNlSW50KHByb21wdCgiRHVyw6llIGRlIGxhIHBhdXNlIChtaW51dGVzKSA6IiwgIjE1IikpOyB9CiAgICAgICAgICAgIGNvbnN0IHN0YXJ0UGFydHMgPSBzdGFydFRpbWUuc3BsaXQoJzonKTsKICAgICAgICAgICAgbGV0IGN1cnJlbnRUaW1lID0gbmV3IERhdGUoKTsgY3VycmVudFRpbWUuc2V0SG91cnMocGFyc2VJbnQoc3RhcnRQYXJ0c1swXSksIHBhcnNlSW50KHN0YXJ0UGFydHNbMV0pLCAwLCAwKTsKICAgICAgICAgICAgY29uc3QgZHVyTWluID0gcGFyc2VJbnQoZHVyYXRpb24pLCBsb2RnZU1pbiA9IHBhcnNlSW50KGxvZGdlT2Zmc2V0KTsKICAgICAgICAgICAgY29uc3Qgcm9vbUJvZHkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChgcm9vbS0ke3JJZHh9YCk7CiAgICAgICAgICAgIGNvbnN0IGl0ZW1zID0gQXJyYXkuZnJvbShyb29tQm9keS5jaGlsZHJlbik7CiAgICAgICAgICAgIGxldCBzdHVkZW50c1Byb2Nlc3NlZCA9IDA7CiAgICAgICAgICAgIGl0ZW1zLmZvckVhY2goaXRlbSA9PiB7CiAgICAgICAgICAgICAgICBpZiAod2FudEJyZWFrICYmIHN0dWRlbnRzUHJvY2Vzc2VkID4gMCAmJiAoc3R1ZGVudHNQcm9jZXNzZWQgJSBicmVha0FmdGVyID09PSAwKSkgY3VycmVudFRpbWUgPSBuZXcgRGF0ZShjdXJyZW50VGltZS5nZXRUaW1lKCkgKyAoYnJlYWtEdXJhdGlvbiAqIDYwMDAwKSk7CiAgICAgICAgICAgICAgICBjb25zdCBoUCA9IGN1cnJlbnRUaW1lLmdldEhvdXJzKCkudG9TdHJpbmcoKS5wYWRTdGFydCgyLCAnMCcpOwogICAgICAgICAgICAgICAgY29uc3QgbVAgPSBjdXJyZW50VGltZS5nZXRNaW51dGVzKCkudG9TdHJpbmcoKS5wYWRTdGFydCgyLCAnMCcpOwogICAgICAgICAgICAgICAgY29uc3QgcGFzc2FnZVN0ciA9IGAke2hQfToke21QfWA7CiAgICAgICAgICAgICAgICBsZXQgbG9kZ2VUaW1lRGF0ZSA9IG5ldyBEYXRlKGN1cnJlbnRUaW1lLmdldFRpbWUoKSAtIChsb2RnZU1pbiAqIDYwMDAwKSk7CiAgICAgICAgICAgICAgICBjb25zdCBoTCA9IGxvZGdlVGltZURhdGUuZ2V0SG91cnMoKS50b1N0cmluZygpLnBhZFN0YXJ0KDIsICcwJyk7CiAgICAgICAgICAgICAgICBjb25zdCBtTCA9IGxvZGdlVGltZURhdGUuZ2V0TWludXRlcygpLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgJzAnKTsKICAgICAgICAgICAgICAgIGNvbnN0IGxvZGdlU3RyID0gYCR7aEx9OiR7bUx9YDsKICAgICAgICAgICAgICAgIGxldCBkYXRhID0gSlNPTi5wYXJzZShpdGVtLmRhdGFzZXQuaW5mbyk7IGRhdGEucGFzc2FnZVRpbWUgPSBwYXNzYWdlU3RyOyBkYXRhLmxvZGdlVGltZSA9IGxvZGdlTWluID4gMCA/IGxvZGdlU3RyIDogIiI7CiAgICAgICAgICAgICAgICBpdGVtLmRhdGFzZXQuaW5mbyA9IEpTT04uc3RyaW5naWZ5KGRhdGEpOwogICAgICAgICAgICAgICAgY29uc3QgaW5wdXRzID0gaXRlbS5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dFt0eXBlPSJ0aW1lIl0nKTsKICAgICAgICAgICAgICAgIGlmKGlucHV0cy5sZW5ndGggPj0gMikgeyBpbnB1dHNbMF0udmFsdWUgPSBwYXNzYWdlU3RyOyBpbnB1dHNbMV0udmFsdWUgPSBsb2RnZU1pbiA+IDAgPyBsb2RnZVN0ciA6ICIiOyB9CiAgICAgICAgICAgICAgICBjdXJyZW50VGltZSA9IG5ldyBEYXRlKGN1cnJlbnRUaW1lLmdldFRpbWUoKSArIChkdXJNaW4gKiA2MDAwMCkpOwogICAgICAgICAgICAgICAgc3R1ZGVudHNQcm9jZXNzZWQrKzsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHVwZGF0ZUN1cnJlbnRFeGFtU3RhdGUoKTsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgZnVuY3Rpb24gc3dpdGNoVGFiKGVsZW1lbnQsIHRhYklkKSB7IAogICAgICAgICAgICBpZihkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndmlldzMnKS5jbGFzc0xpc3QuY29udGFpbnMoJ2FjdGl2ZScpICYmIEFwcFN0YXRlLmRpc3RyaWJ1dGlvbkRhdGEubGVuZ3RoPjApIHsgdHJ5IHsgdXBkYXRlQ3VycmVudEV4YW1TdGF0ZSgpOyB9IGNhdGNoKGUpIHsgY29uc29sZS53YXJuKCJTYXZlIHN0YXRlIGZhaWxlZCIsIGUpOyB9IH0KICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnN0ZXAtYnRuJykuZm9yRWFjaChidG4gPT4gYnRuLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpKTsgZWxlbWVudC5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTsgCiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5zZWN0aW9uLXZpZXcnKS5mb3JFYWNoKHZpZXcgPT4gdmlldy5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKSk7IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRhYklkKS5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTsgCiAgICAgICAgICAgIGlmKHRhYklkPT09J3ZpZXc0JykgcG9wdWxhdGVDbGFzc0ZpbHRlcigpOyBpZih0YWJJZD09PSd2aWV3NScpIHBvcHVsYXRlU3VydmVpbGxhbnRGaWx0ZXIoKTsgCiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBqdW1wVG9FeGFtKGlkeCkgeyB1cGRhdGVDdXJyZW50RXhhbVN0YXRlKCk7IEFwcFN0YXRlLmN1cnJlbnRFeGFtSW5kZXggPSBwYXJzZUludChpZHgpOyByZW5kZXJDdXJyZW50RXhhbSgpOyB9CiAgICAgICAgZnVuY3Rpb24gcHJldkV4YW0oKSB7IGlmKEFwcFN0YXRlLmN1cnJlbnRFeGFtSW5kZXg+MCkgeyB1cGRhdGVDdXJyZW50RXhhbVN0YXRlKCk7IEFwcFN0YXRlLmN1cnJlbnRFeGFtSW5kZXgtLTsgcmVuZGVyQ3VycmVudEV4YW0oKTsgfSB9CiAgICAgICAgZnVuY3Rpb24gbmV4dEV4YW0oKSB7IGlmKEFwcFN0YXRlLmN1cnJlbnRFeGFtSW5kZXg8QXBwU3RhdGUuZGlzdHJpYnV0aW9uRGF0YS5sZW5ndGgtMSkgeyB1cGRhdGVDdXJyZW50RXhhbVN0YXRlKCk7IEFwcFN0YXRlLmN1cnJlbnRFeGFtSW5kZXgrKzsgcmVuZGVyQ3VycmVudEV4YW0oKTsgfSB9CiAgICAgICAgCiAgICAgICAgZnVuY3Rpb24gdXBkYXRlQ3VycmVudEV4YW1TdGF0ZSgpIHsgCiAgICAgICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjdXJyZW50LWV4YW0tY29udGFpbmVyJyk7IAogICAgICAgICAgICBjb25zdCBibG9jayA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcuZXhhbS1zZWN0aW9uLWJsb2NrJyk7IGlmKCFibG9jaykgcmV0dXJuOyAKICAgICAgICAgICAgY29uc3QgZXhhbVN0YXRlID0gQXBwU3RhdGUuZGlzdHJpYnV0aW9uRGF0YVtBcHBTdGF0ZS5jdXJyZW50RXhhbUluZGV4XTsgaWYoIWV4YW1TdGF0ZSkgcmV0dXJuOyAKICAgICAgICAgICAgY29uc3Qgc3RvcmFnZURpdiA9IGJsb2NrLnF1ZXJ5U2VsZWN0b3IoJy5zdG9yYWdlLXpvbmUnKTsgCiAgICAgICAgICAgIGV4YW1TdGF0ZS5zdG9yYWdlID0gQXJyYXkuZnJvbShzdG9yYWdlRGl2LmNoaWxkcmVuKS5tYXAoY2hpbGQgPT4gSlNPTi5wYXJzZShjaGlsZC5kYXRhc2V0LmluZm8pKTsgCiAgICAgICAgICAgIGNvbnN0IHJvb21DYXJkcyA9IGJsb2NrLnF1ZXJ5U2VsZWN0b3JBbGwoJy5yb29tLWNhcmQnKTsgCiAgICAgICAgICAgIGV4YW1TdGF0ZS5yb29tcyA9IFtdOyAKICAgICAgICAgICAgcm9vbUNhcmRzLmZvckVhY2goY2FyZCA9PiB7IAogICAgICAgICAgICAgICAgY29uc3QgYm9keSA9IGNhcmQucXVlcnlTZWxlY3RvcignLnJvb20tYm9keScpOyBjb25zdCBjYXAgPSBib2R5LmdldEF0dHJpYnV0ZSgnZGF0YS1jYXBhY2l0eScpOyBjb25zdCBpc1RUID0gYm9keS5nZXRBdHRyaWJ1dGUoJ2RhdGEtaXMtdHQnKSA9PT0gJ3RydWUnOyAKICAgICAgICAgICAgICAgIGNvbnN0IHJvb21OYW1lID0gY2FyZC5xdWVyeVNlbGVjdG9yKCcucm9vbS1oZWFkZXIgc3BhbicpLnRleHRDb250ZW50LnJlcGxhY2UoJyhUVCknLCcnKS50cmltKCk7IAogICAgICAgICAgICAgICAgY29uc3Qgc3VydnMgPSBBcnJheS5mcm9tKGNhcmQucXVlcnlTZWxlY3RvckFsbCgnc2VsZWN0JykpLm1hcChzID0+IHMudmFsdWUpOyAKICAgICAgICAgICAgICAgIGNvbnN0IHN0dWRlbnRzID0gQXJyYXkuZnJvbShib2R5LmNoaWxkcmVuKS5tYXAocyA9PiBKU09OLnBhcnNlKHMuZGF0YXNldC5pbmZvKSk7IAogICAgICAgICAgICAgICAgZXhhbVN0YXRlLnJvb21zLnB1c2goeyBuYW1lOiByb29tTmFtZSwgY2FwYWNpdHk6IGNhcCwgaXNUVDogaXNUVCwgc3VydmVpbGxhbnRzOiBzdXJ2cywgc3R1ZGVudHM6IHN0dWRlbnRzIH0pOyAKICAgICAgICAgICAgfSk7IAogICAgICAgIH0KICAgICAgICAKICAgICAgICBmdW5jdGlvbiBkcmFnKGV2KSB7IGV2LmRhdGFUcmFuc2Zlci5zZXREYXRhKCJ0ZXh0IiwgZXYudGFyZ2V0LmlkKTsgfQogICAgICAgIGZ1bmN0aW9uIGRyb3AoZXYpIHsgCiAgICAgICAgICAgIGV2LnByZXZlbnREZWZhdWx0KCk7IAogICAgICAgICAgICB2YXIgZGF0YSA9IGV2LmRhdGFUcmFuc2Zlci5nZXREYXRhKCJ0ZXh0Iik7IHZhciBkcmFnZ2VkRWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChkYXRhKTsgCiAgICAgICAgICAgIGxldCB0YXJnZXQgPSBldi50YXJnZXQ7IHdoaWxlKHRhcmdldCAmJiAhdGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygncm9vbS1ib2R5JykgJiYgIXRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3N0b3JhZ2Utem9uZScpKSB0YXJnZXQgPSB0YXJnZXQucGFyZW50RWxlbWVudDsgCiAgICAgICAgICAgIGlmKHRhcmdldCkgeyAKICAgICAgICAgICAgICAgIGlmKHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3Jvb20tYm9keScpKSB7IAogICAgICAgICAgICAgICAgICAgIGNvbnN0IGNhcCA9IHBhcnNlSW50KHRhcmdldC5nZXRBdHRyaWJ1dGUoJ2RhdGEtY2FwYWNpdHknKSk7IAogICAgICAgICAgICAgICAgICAgIGlmKHRhcmdldC5jaGlsZHJlbi5sZW5ndGggPj0gY2FwKSB7IGFsZXJ0KCJQbGVpbiAhIik7IHJldHVybjsgfSAKICAgICAgICAgICAgICAgIH0gCiAgICAgICAgICAgICAgICBjb25zdCBzdHVkZW50RGF0YSA9IEpTT04ucGFyc2UoZHJhZ2dlZEVsLmRhdGFzZXQuaW5mbyk7CiAgICAgICAgICAgICAgICBjb25zdCBpc1RhcmdldFJvb20gPSB0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdyb29tLWJvZHknKTsKICAgICAgICAgICAgICAgIHRhcmdldC5hcHBlbmRDaGlsZChkcmFnZ2VkRWwpOyBkcmFnZ2VkRWwucmVtb3ZlKCk7IGNyZWF0ZVN0dWRlbnRFbGVtZW50KHN0dWRlbnREYXRhLCB0YXJnZXQsIGlzVGFyZ2V0Um9vbSk7IAogICAgICAgICAgICAgICAgc29ydENvbnRhaW5lcih0YXJnZXQpOyB1cGRhdGVDdXJyZW50RXhhbVN0YXRlKCk7IHVwZGF0ZVJlYWxUaW1lQ291bnRlcnMoKTsKICAgICAgICAgICAgfSAKICAgICAgICB9CiAgICAgICAgZnVuY3Rpb24gYWxsb3dEcm9wKGV2KSB7IGV2LnByZXZlbnREZWZhdWx0KCk7IH0KICAgICAgICAKICAgICAgICBmdW5jdGlvbiBzb3J0Q29udGFpbmVyKGNvbnRhaW5lcikgeyAKICAgICAgICAgICAgY29uc3QgaXRlbXMgPSBBcnJheS5mcm9tKGNvbnRhaW5lci5jaGlsZHJlbik7IGl0ZW1zLnNvcnQoKGEsIGIpID0+IHsgCiAgICAgICAgICAgICAgICBjb25zdCBuYW1lQSA9IGEuZ2V0QXR0cmlidXRlKCdkYXRhLXNvcnQnKSB8fCAiIjsgY29uc3QgbmFtZUIgPSBiLmdldEF0dHJpYnV0ZSgnZGF0YS1zb3J0JykgfHwgIiI7IHJldHVybiBuYW1lQS5sb2NhbGVDb21wYXJlKG5hbWVCKTsgCiAgICAgICAgICAgIH0pOyAKICAgICAgICAgICAgaXRlbXMuZm9yRWFjaChpdGVtID0+IGNvbnRhaW5lci5hcHBlbmRDaGlsZChpdGVtKSk7IAogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gY2xlYXJSb29tKHJJZHgpIHsKICAgICAgICAgICAgaWYoIWNvbmZpcm0oIlZvdWxlei12b3VzIHZyYWltZW50IHZpZGVyIHRvdXRlIGNldHRlIHNhbGxlID8iKSkgcmV0dXJuOwogICAgICAgICAgICB1cGRhdGVDdXJyZW50RXhhbVN0YXRlKCk7IGNvbnN0IGV4YW1EYXRhID0gQXBwU3RhdGUuZGlzdHJpYnV0aW9uRGF0YVtBcHBTdGF0ZS5jdXJyZW50RXhhbUluZGV4XTsgY29uc3Qgcm9vbSA9IGV4YW1EYXRhLnJvb21zW3JJZHhdOwogICAgICAgICAgICBpZihyb29tLnN0dWRlbnRzLmxlbmd0aCA9PT0gMCkgcmV0dXJuOwogICAgICAgICAgICByb29tLnN0dWRlbnRzLmZvckVhY2gocyA9PiB7IHMucGFzc2FnZVRpbWUgPSAiIjsgcy5sb2RnZVRpbWUgPSAiIjsgfSk7CiAgICAgICAgICAgIGV4YW1EYXRhLnN0b3JhZ2UucHVzaCguLi5yb29tLnN0dWRlbnRzKTsgcm9vbS5zdHVkZW50cyA9IFtdOwogICAgICAgICAgICBleGFtRGF0YS5zdG9yYWdlLnNvcnQoKGEsYikgPT4gKGdldFZhbHVlKGEsWydOb20nXSl8fCcnKS5sb2NhbGVDb21wYXJlKGdldFZhbHVlKGIsWydOb20nXSl8fCcnKSk7CiAgICAgICAgICAgIHJlbmRlckN1cnJlbnRFeGFtKCk7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBnZXRTdXJ2ZWlsbGFudE9wdGlvbnMoc2VsZWN0ZWQ9IiIpIHsgaWYoIUFwcFN0YXRlLnN1cnZlaWxsYW50cykgcmV0dXJuICIiOyBsZXQgb3B0cyA9ICc8b3B0aW9uIHZhbHVlPSIiPi0tIFN1cnYgLS08L29wdGlvbj4nOyBBcHBTdGF0ZS5zdXJ2ZWlsbGFudHMuZm9yRWFjaChzID0+IHsgY29uc3QgdmFsID0gZ2V0VmFsdWUocyxbJ05vbSddKSArICcgJyArIGdldFZhbHVlKHMsWydQcsOpbm9tJ10pOyBvcHRzICs9IGA8b3B0aW9uIHZhbHVlPSIke3ZhbH0iICR7KHZhbD09PXNlbGVjdGVkKT8nc2VsZWN0ZWQnOicnfT4ke3ZhbH08L29wdGlvbj5gOyB9KTsgcmV0dXJuIG9wdHM7IH0KICAgICAgICBmdW5jdGlvbiBhZGRTdXJ2ZWlsbGFudEZpZWxkKGlkKSB7IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKS5pbnNlcnRBZGphY2VudEhUTUwoJ2JlZm9yZWVuZCcsIGA8ZGl2IGNsYXNzPSJzdXJ2ZWlsbGFudC1yb3ciPjxzZWxlY3Qgb25jaGFuZ2U9InVwZGF0ZUN1cnJlbnRFeGFtU3RhdGUoKSI+JHtnZXRTdXJ2ZWlsbGFudE9wdGlvbnMoKX08L3NlbGVjdD48L2Rpdj5gKTsgfQogICAgICAgIGZ1bmN0aW9uIGhhbmRsZUltYWdlKGlucHV0LCBwcmV2aWV3SWQpIHsgY29uc3QgZmlsZSA9IGlucHV0LmZpbGVzWzBdOyBpZiAoIWZpbGUpIHJldHVybjsgY29uc3QgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTsgcmVhZGVyLm9ubG9hZCA9IGZ1bmN0aW9uKGUpIHsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQocHJldmlld0lkKS5zcmMgPSBlLnRhcmdldC5yZXN1bHQ7IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHByZXZpZXdJZCkuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7IGlmKHByZXZpZXdJZCA9PT0gJ2xvZ29QcmV2aWV3JykgQXBwU3RhdGUuY29uZmlnLmxvZ29TcmMgPSBlLnRhcmdldC5yZXN1bHQ7IGlmKHByZXZpZXdJZCA9PT0gJ3NpZ25QcmV2aWV3JykgQXBwU3RhdGUuY29uZmlnLnNpZ25TcmMgPSBlLnRhcmdldC5yZXN1bHQ7IH07IHJlYWRlci5yZWFkQXNEYXRhVVJMKGZpbGUpOyB9CiAgICAgICAgZnVuY3Rpb24gcG9wdWxhdGVDbGFzc0ZpbHRlcigpeyBjb25zdCBzPWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb252b2MtY2xhc3MtZmlsdGVyJyk7IHMuaW5uZXJIVE1MPSc8b3B0aW9uIHZhbHVlPSJBTEwiPlRvdXRlczwvb3B0aW9uPic7IGNvbnN0IGNsPW5ldyBTZXQoKTsgQXBwU3RhdGUuZWxldmVzLmZvckVhY2goZT0+e2NvbnN0IGM9Z2V0VmFsdWUoZSxbJ0NsYXNzZScsJ0RpdiddKTsgaWYoYykgY2wuYWRkKGMpfSk7IEFycmF5LmZyb20oY2wpLnNvcnQoKS5mb3JFYWNoKGM9PnMuYWRkKG5ldyBPcHRpb24oYyxjKSkpOyBwb3B1bGF0ZVNlbGVjdEZyb21TZXQoJ3B2LWNsYXNzLWZpbHRlcicsIGNsKTsgfQogICAgICAgIGZ1bmN0aW9uIHBvcHVsYXRlU2VsZWN0RnJvbVNldChpZCwgc2V0KSB7IGNvbnN0IHM9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpOyBpZighcykgcmV0dXJuOyBzLmlubmVySFRNTD0nPG9wdGlvbiB2YWx1ZT0iQUxMIj5Ub3V0ZXM8L29wdGlvbj4nOyBBcnJheS5mcm9tKHNldCkuc29ydCgpLmZvckVhY2goYz0+cy5hZGQobmV3IE9wdGlvbihjLGMpKSk7IH0KICAgICAgICBmdW5jdGlvbiBwb3B1bGF0ZVN1cnZlaWxsYW50RmlsdGVyKCl7IGNvbnN0IHM9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbnZvYy1zdXJ2LWZpbHRlcicpOyBzLmlubmVySFRNTD0nPG9wdGlvbiB2YWx1ZT0iQUxMIj5Ub3VzPC9vcHRpb24+JzsgaWYoIUFwcFN0YXRlLnN1cnZlaWxsYW50cykgcmV0dXJuOyBBcHBTdGF0ZS5zdXJ2ZWlsbGFudHMuZm9yRWFjaChzdT0+e2NvbnN0IG49Z2V0VmFsdWUoc3UsWydOb20nXSkrJyAnK2dldFZhbHVlKHN1LFsnUHLDqW5vbSddKTsgcy5hZGQobmV3IE9wdGlvbihuLG4pKX0pOyB9CiAgICAgICAgZnVuY3Rpb24gc2F2ZVBvY2hldHRlVGV4dCh0eXBlLCB2YWwpIHsgaWYoIUFwcFN0YXRlLnBvY2hldHRlVGV4dCkgQXBwU3RhdGUucG9jaGV0dGVUZXh0ID0ge307IEFwcFN0YXRlLnBvY2hldHRlVGV4dFt0eXBlXSA9IHZhbDsgfQogICAgICAgIGZ1bmN0aW9uIHBvcHVsYXRlUFZFeGFtU2VsZWN0KCkgeyBjb25zdCBzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3B2LWV4YW0tc2VsZWN0Jyk7IHMuaW5uZXJIVE1MID0gJzxvcHRpb24gdmFsdWU9IkFMTCI+VE9VVCBJTVBSSU1FUjwvb3B0aW9uPic7IEFwcFN0YXRlLmRpc3RyaWJ1dGlvbkRhdGEuZm9yRWFjaCgoZCwgaSkgPT4geyBpZighZCkgcmV0dXJuOyBjb25zdCBleGFtID0gQXBwU3RhdGUuZXByZXV2ZXNbZC5leGFtSWR4XTsgcy5hZGQobmV3IE9wdGlvbihnZXRWYWx1ZShleGFtLCBbJ01hdGnDqHJlJywgJ0VwcmV1dmUnXSksIGkpKTsgfSk7IHMub25jaGFuZ2UoKTsgfQogICAgICAgIAogICAgICAgIGZ1bmN0aW9uIHVwZGF0ZVBWUm9vbVNlbGVjdCgpIHsgCiAgICAgICAgICAgIGNvbnN0IGV4YW1JZHggPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHYtZXhhbS1zZWxlY3QnKS52YWx1ZTsgCiAgICAgICAgICAgIGNvbnN0IHMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHYtcm9vbS1zZWxlY3QnKTsgcy5pbm5lckhUTUwgPSAnPG9wdGlvbiB2YWx1ZT0iQUxMIj5UT1VURVMgTEVTIFNBTExFUyBVVElMSVPDiUVTPC9vcHRpb24+JzsgCiAgICAgICAgICAgIGlmKGV4YW1JZHggPT09ICJBTEwiKSB7IHMuZGlzYWJsZWQgPSB0cnVlOyByZXR1cm47IH0gZWxzZSBzLmRpc2FibGVkID0gZmFsc2U7IAogICAgICAgICAgICBjb25zdCBkaXN0ID0gQXBwU3RhdGUuZGlzdHJpYnV0aW9uRGF0YVtleGFtSWR4XTsgCiAgICAgICAgICAgIGlmKGRpc3QpIGRpc3Qucm9vbXMuZm9yRWFjaCgociwgaSkgPT4geyBpZihyLnN0dWRlbnRzLmxlbmd0aCA+IDApIHMuYWRkKG5ldyBPcHRpb24oci5uYW1lLCBpKSk7IH0pOyAKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgZnVuY3Rpb24gcG9wdWxhdGVFbWFyZ2VtZW50RmlsdGVycygpIHsgCiAgICAgICAgICAgIGNvbnN0IHMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZW1hcmdlbWVudC1yb29tLWZpbHRlcicpOyBzLmlubmVySFRNTCA9ICc8b3B0aW9uIHZhbHVlPSJBTEwiPlRvdXRlcyBsZXMgc2FsbGVzIHV0aWxpc8OpZXM8L29wdGlvbj4nOyAKICAgICAgICAgICAgbGV0IHVzZWRSb29tcyA9IG5ldyBTZXQoKTsgQXBwU3RhdGUuZGlzdHJpYnV0aW9uRGF0YS5mb3JFYWNoKGQgPT4geyBpZihkICYmIGQucm9vbXMpIGQucm9vbXMuZm9yRWFjaChyID0+IHsgaWYoci5zdHVkZW50cy5sZW5ndGggPiAwKSB1c2VkUm9vbXMuYWRkKHIubmFtZSk7IH0pOyB9KTsKICAgICAgICAgICAgQXJyYXkuZnJvbSh1c2VkUm9vbXMpLnNvcnQoKS5mb3JFYWNoKHIgPT4gcy5hZGQobmV3IE9wdGlvbihyLCByKSkpOyAKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIHByaW50RW1hcmdlbWVudCgpIHsgZ2VuZXJhdGVMaXN0RG9jKCdlbWFyZ2VtZW50Jyk7IH0KICAgICAgICBmdW5jdGlvbiBwcmludERpc3BsYXlMaXN0KCkgeyBnZW5lcmF0ZUxpc3REb2MoJ2Rpc3BsYXknKTsgfQogICAgICAgIAogICAgICAgIGZ1bmN0aW9uIGdlbmVyYXRlTGlzdERvYyh0eXBlKSB7CiAgICAgICAgICAgIGlmKCFBcHBTdGF0ZS5kaXN0cmlidXRpb25EYXRhLmxlbmd0aCkgcmV0dXJuIGFsZXJ0KCJSw6lwYXJ0aXRpb24gbWFucXVhbnRlIik7CiAgICAgICAgICAgIGNvbnN0IHJvb21GaWx0ZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZW1hcmdlbWVudC1yb29tLWZpbHRlcicpLnZhbHVlOwogICAgICAgICAgICBjb25zdCBsb2dvID0gQXBwU3RhdGUuY29uZmlnLmxvZ29TcmMgfHwgIiI7CiAgICAgICAgICAgIGNvbnN0IHRpdGxlID0gdHlwZSA9PT0gJ2VtYXJnZW1lbnQnID8gIkxJU1RFIEQnw4lNQVJHRU1FTlQiIDogIkxJU1RFIEQnQUZGSUNIQUdFIC0gQ0FORElEQVRTIjsKICAgICAgICAgICAgbGV0IGZ1bGxIdG1sID0gIiI7CiAgICAgICAgICAgIEFwcFN0YXRlLmRpc3RyaWJ1dGlvbkRhdGEuZm9yRWFjaChleGFtRGF0YSA9PiB7CiAgICAgICAgICAgICAgICBpZighZXhhbURhdGEpIHJldHVybjsKICAgICAgICAgICAgICAgIGNvbnN0IGV4YW1JbmZvID0gQXBwU3RhdGUuZXByZXV2ZXNbZXhhbURhdGEuZXhhbUlkeF07CiAgICAgICAgICAgICAgICBjb25zdCBkYXRlU3RyID0gZm9ybWF0RGF0ZShnZXRWYWx1ZShleGFtSW5mbyxbJ0RhdGUnXSkpOwogICAgICAgICAgICAgICAgZXhhbURhdGEucm9vbXMuZm9yRWFjaChyb29tRGF0YSA9PiB7CiAgICAgICAgICAgICAgICAgICAgaWYocm9vbUZpbHRlciAhPT0gIkFMTCIgJiYgcm9vbURhdGEubmFtZSAhPT0gcm9vbUZpbHRlcikgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgIGlmKHJvb21EYXRhLnN0dWRlbnRzLmxlbmd0aCA9PT0gMCkgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IHN0dWRlbnRzID0gWy4uLnJvb21EYXRhLnN0dWRlbnRzXTsKICAgICAgICAgICAgICAgICAgICBzdHVkZW50cy5zb3J0KChhLGIpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoYS5wYXNzYWdlVGltZSAmJiBiLnBhc3NhZ2VUaW1lKSByZXR1cm4gYS5wYXNzYWdlVGltZS5sb2NhbGVDb21wYXJlKGIucGFzc2FnZVRpbWUpOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZ2V0VmFsdWUoYSxbJ05vbSddKS5sb2NhbGVDb21wYXJlKGdldFZhbHVlKGIsWydOb20nXSkpOwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IGlzVFQgPSByb29tRGF0YS5pc1RUOwogICAgICAgICAgICAgICAgICAgIGxldCB0aW1lID0gaXNUVCA/IGdldFZhbHVlKGV4YW1JbmZvLCBbJ0hldXJlIGRlIGTDqWJ1dCB0aWVycyB0ZW1wcycsICdIZXVyZSBUVCddKSA6IGdldFZhbHVlKGV4YW1JbmZvLCBbJ0hldXJlIGRlIGTDqWJ1dCcsICdIZXVyZSddKTsKICAgICAgICAgICAgICAgICAgICBpZighdGltZSkgdGltZSA9IGdldFZhbHVlKGV4YW1JbmZvLCBbJ0hldXJlIGRlIGTDqWJ1dCcsICdIZXVyZSddKTsKICAgICAgICAgICAgICAgICAgICBsZXQgcm93cyA9ICIiOwogICAgICAgICAgICAgICAgICAgIHN0dWRlbnRzLmZvckVhY2gocyA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBpbmZvU3VwID0gcy5wYXNzYWdlVGltZSA/IGAgPHNwYW4gc3R5bGU9ImZvbnQtc2l6ZTowLjhyZW0iPigke3MucGFzc2FnZVRpbWV9KTwvc3Bhbj5gIDogIiI7CiAgICAgICAgICAgICAgICAgICAgICAgIHJvd3MgKz0gYDx0ciBjbGFzcz0iJHt0eXBlfS1yb3ciPjx0ZD4ke2dldFZhbHVlKHMsWydOb20nXSl9PC90ZD48dGQ+JHtnZXRWYWx1ZShzLFsnUHLDqW5vbSddKX08L3RkPjx0ZD4ke2dldFZhbHVlKHMsWydDbGFzc2UnXSl9JHtpbmZvU3VwfTwvdGQ+JHt0eXBlPT09J2VtYXJnZW1lbnQnID8gJzx0ZD48L3RkPicgOiAnJ308L3RyPmA7CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgZnVsbEh0bWwgKz0gYDxkaXYgY2xhc3M9InByaW50LXBhZ2UtbGlzdCIgc3R5bGU9InBhZ2UtYnJlYWstYWZ0ZXI6IGFsd2F5czsiPjxkaXYgY2xhc3M9InByaW50LWhlYWRlciI+PGRpdiBzdHlsZT0iZm9udC13ZWlnaHQ6Ym9sZDsgZm9udC1zaXplOjEuMnJlbTsiPiR7QXBwU3RhdGUuY29uZmlnLmV4YW1UaXRsZSB8fCAiRVhBTUVOIn08L2Rpdj4ke2xvZ28gPyBgPGltZyBzcmM9IiR7bG9nb30iIGNsYXNzPSJwcmludC1sb2dvIj5gIDogJyd9PC9kaXY+PGRpdiBjbGFzcz0icHJpbnQtZG9jLXRpdGxlIj4ke3RpdGxlfTwvZGl2PjxkaXYgY2xhc3M9InByaW50LWluZm9zLWJveCI+PHN0cm9uZz7DiXByZXV2ZSA6PC9zdHJvbmc+ICR7Z2V0VmFsdWUoZXhhbUluZm8sWydNYXRpw6hyZScsJ0VwcmV1dmUnXSl9PGJyPjxzdHJvbmc+RGF0ZSA6PC9zdHJvbmc+ICR7ZGF0ZVN0cn0gLSA8c3Ryb25nPkhldXJlIEdsb2JhbCA6PC9zdHJvbmc+ICR7dGltZX08YnI+PHN0cm9uZz5TYWxsZSA6PC9zdHJvbmc+ICR7cm9vbURhdGEubmFtZX08YnI+PHN0cm9uZz5TdXJ2ZWlsbGFudHMgOjwvc3Ryb25nPiAke3Jvb21EYXRhLnN1cnZlaWxsYW50cy5qb2luKCcsICcpfTwvZGl2Pjx0YWJsZSBjbGFzcz0icHJpbnQtdGFibGUgJHt0eXBlPT09J2Rpc3BsYXknPydkaXNwbGF5LWxpc3Qtcm93JzonJ30iPjx0aGVhZD48dHI+PHRoPk5vbTwvdGg+PHRoPlByw6lub208L3RoPjx0aD5DbGFzc2UgKFBhc3NhZ2UpPC90aD4ke3R5cGU9PT0nZW1hcmdlbWVudCc/Jzx0aCBzdHlsZT0id2lkdGg6MTUwcHg7Ij5TaWduYXR1cmU8L3RoPic6Jyd9PC90cj48L3RoZWFkPjx0Ym9keT4ke3Jvd3N9PC90Ym9keT48L3RhYmxlPjwvZGl2PmA7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGlmKGZ1bGxIdG1sID09PSAiIikgcmV0dXJuIGFsZXJ0KCJBdWN1biDDqWzDqHZlIHRyb3V2w6kgcG91ciBjZSBmaWx0cmUgKG91IHNhbGxlcyB2aWRlcykuIik7CiAgICAgICAgICAgIGNvbnN0IHBhID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ByaW50LWFyZWEnKTsgcGEuaW5uZXJIVE1MID0gZnVsbEh0bWw7IHdpbmRvdy5wcmludCgpOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gcHJpbnRDb252b2NhdGlvbnMoKSB7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBpZighQXBwU3RhdGUuZGlzdHJpYnV0aW9uRGF0YSB8fCBBcHBTdGF0ZS5kaXN0cmlidXRpb25EYXRhLmxlbmd0aCA9PT0gMCkgeyBhbGVydCgiVmV1aWxsZXogY2FsY3VsZXIgbGEgcsOpcGFydGl0aW9uIChNZW51IDMpLiIpOyByZXR1cm47IH0KICAgICAgICAgICAgICAgIGNvbnN0IHByaW50QXJlYSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcmludC1hcmVhJyk7IHByaW50QXJlYS5pbm5lckhUTUwgPSAiIjsKICAgICAgICAgICAgICAgIGNvbnN0IGZpbHRlckNsYXNzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbnZvYy1jbGFzcy1maWx0ZXInKS52YWx1ZTsKICAgICAgICAgICAgICAgIGNvbnN0IGxvZ29TcmMgPSBBcHBTdGF0ZS5jb25maWcubG9nb1NyYyB8fCAiIjsgY29uc3Qgc2lnblNyYyA9IEFwcFN0YXRlLmNvbmZpZy5zaWduU3JjIHx8ICIiOwogICAgICAgICAgICAgICAgY29uc3QgdHh0QWRkcmVzcyA9IChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndHh0LWFkZHJlc3MnKS52YWx1ZSB8fCAiIikucmVwbGFjZSgvXG4vZywgJzxicj4nKTsKICAgICAgICAgICAgICAgIGNvbnN0IHR4dFRpdGxlID0gIkNPTlZPQ0FUSU9OICIgKyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndHh0LXRpdGxlLWV4dHJhLXN0ZCcpLmlubmVyVGV4dDsKICAgICAgICAgICAgICAgIGNvbnN0IHR4dEJvZHkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndHh0LWJvZHknKS5pbm5lckhUTUw7IGNvbnN0IHR4dFJ1bGVzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3R4dC1ydWxlcycpLmlubmVySFRNTDsKICAgICAgICAgICAgICAgIGNvbnN0IHR4dENpdHkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndHh0LWNpdHknKS5pbm5lclRleHQ7IGNvbnN0IHRvcE1hcmdpbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZXRzLXN0ZC10b3AnKS52YWx1ZTsKICAgICAgICAgICAgICAgIGNvbnN0IGJvdE1hcmdpbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZXRzLXN0ZC1ib3QnKS52YWx1ZTsgY29uc3QgZm9udFNpemUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2V0cy1zdGQtZm9udCcpLnZhbHVlOwogICAgICAgICAgICAgICAgbGV0IGNvdW50ID0gMDsKICAgICAgICAgICAgICAgIEFwcFN0YXRlLmVsZXZlcy5mb3JFYWNoKHN0dWRlbnQgPT4gewogICAgICAgICAgICAgICAgICAgIGxldCBzQ2xhc3MgPSBnZXRWYWx1ZShzdHVkZW50LCBbJ0NsYXNzZScsICdEaXYnXSk7IHNDbGFzcyA9IHNDbGFzcyA/IHNDbGFzcy50b1N0cmluZygpLnRyaW0oKSA6ICJOL0EiOwogICAgICAgICAgICAgICAgICAgIGlmKGZpbHRlckNsYXNzICE9PSAiQUxMIiAmJiBzQ2xhc3MgIT09IGZpbHRlckNsYXNzKSByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgY29uc3Qgbm9tID0gbm9ybWFsaXplKGdldFZhbHVlKHN0dWRlbnQsIFsnTm9tJ10pKTsgY29uc3QgcHJlbm9tID0gbm9ybWFsaXplKGdldFZhbHVlKHN0dWRlbnQsIFsnUHLDqW5vbSddKSk7CiAgICAgICAgICAgICAgICAgICAgbGV0IHN0dWRlbnRFeGFtc0xpc3QgPSBbXTsKICAgICAgICAgICAgICAgICAgICBBcHBTdGF0ZS5kaXN0cmlidXRpb25EYXRhLmZvckVhY2goKGV4YW1EYXRhKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCFleGFtRGF0YSkgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgICAgICBsZXQgc3R1ZGVudFJvb20gPSBudWxsLCBzdHVkZW50RGF0YUluUm9vbSA9IG51bGw7CiAgICAgICAgICAgICAgICAgICAgICAgIGV4YW1EYXRhLnJvb21zLmZvckVhY2gociA9PiB7IAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGZvdW5kID0gci5zdHVkZW50cy5maW5kKHMgPT4gbm9ybWFsaXplKGdldFZhbHVlKHMsWydOb20nXSkpID09PSBub20gJiYgbm9ybWFsaXplKGdldFZhbHVlKHMsWydQcsOpbm9tJ10pKSA9PT0gcHJlbm9tKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGZvdW5kKSB7IHN0dWRlbnRSb29tID0gcjsgc3R1ZGVudERhdGFJblJvb20gPSBmb3VuZDsgfQogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoc3R1ZGVudFJvb20pIHN0dWRlbnRFeGFtc0xpc3QucHVzaCh7IGV4YW06IEFwcFN0YXRlLmVwcmV1dmVzW2V4YW1EYXRhLmV4YW1JZHhdLCByb29tOiBzdHVkZW50Um9vbSwgZGF0YTogc3R1ZGVudERhdGFJblJvb20gfSk7CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgc3R1ZGVudEV4YW1zTGlzdC5zb3J0KChhLCBiKSA9PiBnZXREYXRlVGltZVZhbHVlKGEuZXhhbSwgYS5kYXRhLCBhLnJvb20uaXNUVCkgLSBnZXREYXRlVGltZVZhbHVlKGIuZXhhbSwgYi5kYXRhLCBiLnJvb20uaXNUVCkpOwogICAgICAgICAgICAgICAgICAgIGlmKHN0dWRlbnRFeGFtc0xpc3QubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgICAgICAgICAgICBjb3VudCsrOwogICAgICAgICAgICAgICAgICAgICAgICBsZXQgZXhhbXNSb3dzID0gIiI7CiAgICAgICAgICAgICAgICAgICAgICAgIHN0dWRlbnRFeGFtc0xpc3QuZm9yRWFjaChpdGVtID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4YW1zUm93cyArPSBgPHRyPjx0ZD4ke2dldFZhbHVlKGl0ZW0uZXhhbSwgWydNYXRpw6hyZScsICdFcHJldXZlJ10pfTwvdGQ+PHRkPiR7Zm9ybWF0RGF0ZShnZXRWYWx1ZShpdGVtLmV4YW0sIFsnRGF0ZSddKSl9PC90ZD48dGQ+PHN0cm9uZz4ke2l0ZW0uZGF0YS5wYXNzYWdlVGltZSB8fCAiTm9uIGTDqWZpbmkifTwvc3Ryb25nPjwvdGQ+PHRkPiR7aXRlbS5kYXRhLmxvZGdlVGltZSB8fCAiLSJ9PC90ZD48dGQ+JHtpdGVtLnJvb20ubmFtZX08L3RkPjwvdHI+YDsKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHN0eWxlU3RyID0gYHBhZGRpbmctdG9wOiR7dG9wTWFyZ2lufW1tOyBwYWRkaW5nLWJvdHRvbToke2JvdE1hcmdpbn1tbTsgZm9udC1zaXplOiR7Zm9udFNpemV9cHg7YDsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcGFnZUh0bWwgPSBgPGRpdiBjbGFzcz0icHJpbnQtcGFnZS1jb252b2MiIHN0eWxlPSIke3N0eWxlU3RyfSI+PGRpdiBjbGFzcz0iY29udm9jLWhlYWRlci1yb3ciPjxkaXYgY2xhc3M9ImNvbnZvYy1hZGRyZXNzIj4ke3R4dEFkZHJlc3N9PC9kaXY+PGRpdiBjbGFzcz0iY29udm9jLWxvZ28tem9uZSI+JHtsb2dvU3JjID8gYDxpbWcgc3JjPSIke2xvZ29TcmN9IiBjbGFzcz0iY29udm9jLWxvZ28iPmAgOiAnJ308L2Rpdj48L2Rpdj48ZGl2IGNsYXNzPSJjb252b2MtdGl0bGUiPiR7dHh0VGl0bGV9PC9kaXY+PGRpdiBjbGFzcz0iY29udm9jLXN0dWRlbnQtaW5mbyI+PHN0cm9uZz5Ob20gZXQgUHLDqW5vbSA6PC9zdHJvbmc+ICR7Z2V0VmFsdWUoc3R1ZGVudCwgWydOb20nXSl9ICR7Z2V0VmFsdWUoc3R1ZGVudCwgWydQcsOpbm9tJ10pfTxicj48c3Ryb25nPkNsYXNzZSA6PC9zdHJvbmc+ICR7c0NsYXNzfTwvZGl2PjxkaXYgY2xhc3M9ImNvbnZvYy1ib2R5Ij4ke3R4dEJvZHl9PC9kaXY+PHRhYmxlIGNsYXNzPSJjb252b2MtdGFibGUiPjx0aGVhZD48dHI+PHRoPsOJcHJldXZlPC90aD48dGg+RGF0ZTwvdGg+PHRoPkhldXJlIFBhc3NhZ2U8L3RoPjx0aD5IZXVyZSBMb2dlPC90aD48dGg+U2FsbGU8L3RoPjwvdHI+PC90aGVhZD48dGJvZHk+JHtleGFtc1Jvd3N9PC90Ym9keT48L3RhYmxlPjxkaXYgc3R5bGU9ImZvbnQtd2VpZ2h0OmJvbGQ7IG1hcmdpbi1ib3R0b206NXB4OyI+UsOoZ2xlbWVudCBldCBjb25zaWduZXMgOjwvZGl2PjxkaXYgY2xhc3M9ImNvbnZvYy1ydWxlcyIgc3R5bGU9ImZvbnQtc2l6ZTowLjlyZW07Ij4ke3R4dFJ1bGVzfTwvZGl2PjxkaXYgY2xhc3M9ImNvbnZvYy1mb290ZXIiIHN0eWxlPSJqdXN0aWZ5LWNvbnRlbnQ6IGZsZXgtZW5kOyI+PGRpdiBjbGFzcz0iY29udm9jLXNpZ24iIHN0eWxlPSJ0ZXh0LWFsaWduOnJpZ2h0OyI+PGRpdj5GYWl0IMOgICR7dHh0Q2l0eX0sIGxlICR7bmV3IERhdGUoKS50b0xvY2FsZURhdGVTdHJpbmcoJ2ZyLUZSJyl9PC9kaXY+JHtzaWduU3JjID8gYDxpbWcgc3JjPSIke3NpZ25TcmN9IiBzdHlsZT0ibWF4LWhlaWdodDo2MHB4OyBtYXJnaW4tdG9wOjEwcHg7Ij5gIDogJyd9PGRpdiBzdHlsZT0ibWFyZ2luLXRvcDoxMHB4OyBmb250LXdlaWdodDpib2xkOyI+JHtBcHBTdGF0ZS5jb25maWcubmFtZSB8fCAnJ308L2Rpdj48ZGl2IHN0eWxlPSJmb250LXN0eWxlOml0YWxpYzsiPiR7QXBwU3RhdGUuY29uZmlnLnJvbGUgfHwgJyd9PC9kaXY+PC9kaXY+PC9kaXY+PC9kaXY+YDsKICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnRBcmVhLmluc2VydEFkamFjZW50SFRNTCgnYmVmb3JlZW5kJywgcGFnZUh0bWwpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgaWYoY291bnQgPiAwKSB3aW5kb3cucHJpbnQoKTsgZWxzZSBhbGVydCgiQXVjdW5lIGNvbnZvY2F0aW9uIGfDqW7DqXLDqWUuIik7CiAgICAgICAgICAgIH0gY2F0Y2goZSkgeyBjb25zb2xlLmVycm9yKGUpOyBhbGVydCgiRXJyZXVyIGltcHJlc3Npb246ICIgKyBlLm1lc3NhZ2UpOyB9CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBwcmludFN1cnZlaWxsYW50Q29udm9jYXRpb25zKCkgewogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgaWYoIUFwcFN0YXRlLmRpc3RyaWJ1dGlvbkRhdGEgfHwgQXBwU3RhdGUuZGlzdHJpYnV0aW9uRGF0YS5sZW5ndGggPT09IDApIHsgYWxlcnQoIlZldWlsbGV6IGNhbGN1bGVyIGxhIHLDqXBhcnRpdGlvbi4iKTsgcmV0dXJuOyB9CiAgICAgICAgICAgICAgICBjb25zdCBwcmludEFyZWEgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJpbnQtYXJlYScpOyBwcmludEFyZWEuaW5uZXJIVE1MID0gIiI7CiAgICAgICAgICAgICAgICBjb25zdCBmaWx0ZXJTdXJ2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbnZvYy1zdXJ2LWZpbHRlcicpLnZhbHVlOwogICAgICAgICAgICAgICAgY29uc3QgbG9nb1NyYyA9IEFwcFN0YXRlLmNvbmZpZy5sb2dvU3JjIHx8ICIiOyBjb25zdCBzaWduU3JjID0gQXBwU3RhdGUuY29uZmlnLnNpZ25TcmMgfHwgIiI7CiAgICAgICAgICAgICAgICBjb25zdCB0eHRBZGRyZXNzID0gKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0eHQtc3Vydi1hZGRyZXNzJykudmFsdWUgfHwgIiIpLnJlcGxhY2UoL1xuL2csICc8YnI+Jyk7CiAgICAgICAgICAgICAgICBjb25zdCB0eHRUaXRsZSA9ICJDT05WT0NBVElPTiAiICsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3R4dC10aXRsZS1leHRyYS1zdXJ2JykuaW5uZXJUZXh0OwogICAgICAgICAgICAgICAgY29uc3QgdHh0Qm9keSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0eHQtc3Vydi1ib2R5JykuaW5uZXJIVE1MOyBjb25zdCB0eHRSdWxlcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0eHQtc3Vydi1ydWxlcycpLmlubmVySFRNTDsKICAgICAgICAgICAgICAgIGNvbnN0IHR4dENpdHkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndHh0LXN1cnYtY2l0eScpLmlubmVyVGV4dDsgY29uc3QgdG9wTWFyZ2luID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NldHMtc3Vydi10b3AnKS52YWx1ZTsKICAgICAgICAgICAgICAgIGNvbnN0IGJvdE1hcmdpbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZXRzLXN1cnYtYm90JykudmFsdWU7IGNvbnN0IGZvbnRTaXplID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NldHMtc3Vydi1mb250JykudmFsdWU7CiAgICAgICAgICAgICAgICBsZXQgc2NoZWR1bGVNYXAgPSB7fTsKICAgICAgICAgICAgICAgIEFwcFN0YXRlLmRpc3RyaWJ1dGlvbkRhdGEuZm9yRWFjaChleGFtRGF0YSA9PiB7CiAgICAgICAgICAgICAgICAgICAgaWYoIWV4YW1EYXRhKSByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgY29uc3QgZXhhbVJhdyA9IEFwcFN0YXRlLmVwcmV1dmVzW2V4YW1EYXRhLmV4YW1JZHhdOyAKICAgICAgICAgICAgICAgICAgICBleGFtRGF0YS5yb29tcy5mb3JFYWNoKHJvb20gPT4gewogICAgICAgICAgICAgICAgICAgICAgICByb29tLnN1cnZlaWxsYW50cy5mb3JFYWNoKHN1cnZOYW1lID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCFzdXJ2TmFtZSkgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoIXNjaGVkdWxlTWFwW3N1cnZOYW1lXSkgc2NoZWR1bGVNYXBbc3Vydk5hbWVdID0gW107CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpc1RUID0gcm9vbS5pc1RUOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHRpbWUgPSBpc1RUID8gZ2V0VmFsdWUoZXhhbVJhdywgWydIZXVyZSBkZSBkw6lidXQgdGllcnMgdGVtcHMnLCAnSGV1cmUgVFQnLCAnSGV1cmUgZMOpYnV0IFRUJ10pIDogZ2V0VmFsdWUoZXhhbVJhdywgWydIZXVyZSBkZSBkw6lidXQnLCAnSGV1cmUnXSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZighdGltZSkgdGltZSA9IGdldFZhbHVlKGV4YW1SYXcsIFsnSGV1cmUgZGUgZMOpYnV0JywgJ0hldXJlJ10pOyAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBkdXJhdGlvbiA9IGlzVFQgPyBnZXRWYWx1ZShleGFtUmF3LCBbJ0R1csOpZSB0aWVycyB0ZW1wcycsICdEdXLDqWUgZW4gbWludXRlIHRpZXJzIHRlbXBzJywgJ0R1csOpZSBUVCddKSA6IGdldFZhbHVlKGV4YW1SYXcsIFsnRHVyw6llIGVuIG1pbnV0ZScsICdEdXLDqWUnXSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZighZHVyYXRpb24pIGR1cmF0aW9uID0gZ2V0VmFsdWUoZXhhbVJhdywgWydEdXLDqWUgZW4gbWludXRlJywgJ0R1csOpZSddKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjaGVkdWxlTWFwW3N1cnZOYW1lXS5wdXNoKHsgcmF3RXhhbTogZXhhbVJhdywgaXNUVDogaXNUVCwgZXByZXV2ZTogZ2V0VmFsdWUoZXhhbVJhdywgWydNYXRpw6hyZScsICdFcHJldXZlJ10pLCBkYXRlOiBmb3JtYXREYXRlKGdldFZhbHVlKGV4YW1SYXcsIFsnRGF0ZSddKSksIGhldXJlOiB0aW1lLCBkdXJlZTogZHVyYXRpb24sIHNhbGxlOiByb29tLm5hbWUgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBsZXQgY291bnQgPSAwOyBjb25zdCBzb3J0ZWRTdXJ2cyA9IE9iamVjdC5rZXlzKHNjaGVkdWxlTWFwKS5zb3J0KCk7CiAgICAgICAgICAgICAgICBzb3J0ZWRTdXJ2cy5mb3JFYWNoKHN1cnZOYW1lID0+IHsKICAgICAgICAgICAgICAgICAgICBpZihmaWx0ZXJTdXJ2ICE9PSAiQUxMIiAmJiBzdXJ2TmFtZSAhPT0gZmlsdGVyU3VydikgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IHNsb3RzID0gc2NoZWR1bGVNYXBbc3Vydk5hbWVdOwogICAgICAgICAgICAgICAgICAgIHNsb3RzLnNvcnQoKGEsIGIpID0+IGdldERhdGVUaW1lVmFsdWUoYS5yYXdFeGFtLCBudWxsLCBhLmlzVFQpIC0gZ2V0RGF0ZVRpbWVWYWx1ZShiLnJhd0V4YW0sIG51bGwsIGIuaXNUVCkpOwogICAgICAgICAgICAgICAgICAgIGxldCByb3dzID0gIiI7CiAgICAgICAgICAgICAgICAgICAgc2xvdHMuZm9yRWFjaChzbG90ID0+IHsgcm93cyArPSBgPHRyPjx0ZD4ke3Nsb3QuZXByZXV2ZX08L3RkPjx0ZD4ke3Nsb3QuZGF0ZX08L3RkPjx0ZD4ke3Nsb3QuaGV1cmV9PC90ZD48dGQ+JHtmb3JtYXREdXJhdGlvbkRpc3BsYXkoc2xvdC5kdXJlZSl9PC90ZD48dGQ+JHtzbG90LnNhbGxlfTwvdGQ+PC90cj5gOyB9KTsKICAgICAgICAgICAgICAgICAgICBjb3VudCsrOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IHN0eWxlU3RyID0gYHBhZGRpbmctdG9wOiR7dG9wTWFyZ2lufW1tOyBwYWRkaW5nLWJvdHRvbToke2JvdE1hcmdpbn1tbTsgZm9udC1zaXplOiR7Zm9udFNpemV9cHg7YDsKICAgICAgICAgICAgICAgICAgICBjb25zdCBwYWdlSHRtbCA9IGA8ZGl2IGNsYXNzPSJwcmludC1wYWdlLWNvbnZvYyIgc3R5bGU9IiR7c3R5bGVTdHJ9Ij48ZGl2IGNsYXNzPSJjb252b2MtaGVhZGVyLXJvdyI+PGRpdiBjbGFzcz0iY29udm9jLWFkZHJlc3MiPiR7dHh0QWRkcmVzc308L2Rpdj48ZGl2IGNsYXNzPSJjb252b2MtbG9nby16b25lIj4ke2xvZ29TcmMgPyBgPGltZyBzcmM9IiR7bG9nb1NyY30iIGNsYXNzPSJjb252b2MtbG9nbyI+YCA6ICcnfTwvZGl2PjwvZGl2PjxkaXYgY2xhc3M9ImNvbnZvYy10aXRsZSI+JHt0eHRUaXRsZX08L2Rpdj48ZGl2IGNsYXNzPSJjb252b2Mtc3R1ZGVudC1pbmZvIj48c3Ryb25nPlN1cnZlaWxsYW50IDo8L3N0cm9uZz4gJHtzdXJ2TmFtZX08L2Rpdj48ZGl2IGNsYXNzPSJjb252b2MtYm9keSI+JHt0eHRCb2R5fTwvZGl2Pjx0YWJsZSBjbGFzcz0iY29udm9jLXRhYmxlIj48dGhlYWQ+PHRyPjx0aD7DiXByZXV2ZTwvdGg+PHRoPkRhdGU8L3RoPjx0aD5Ib3JhaXJlIEdsb2JhbDwvdGg+PHRoPkR1csOpZTwvdGg+PHRoPlNhbGxlPC90aD48L3RyPjwvdGhlYWQ+PHRib2R5PiR7cm93c308L3Rib2R5PjwvdGFibGU+PGRpdiBzdHlsZT0iZm9udC13ZWlnaHQ6Ym9sZDsgbWFyZ2luLWJvdHRvbTo1cHg7Ij5Db25zaWduZXMgOjwvZGl2PjxkaXYgY2xhc3M9ImNvbnZvYy1ydWxlcyIgc3R5bGU9ImZvbnQtc2l6ZTowLjlyZW07Ij4ke3R4dFJ1bGVzfTwvZGl2PjxkaXYgY2xhc3M9ImNvbnZvYy1mb290ZXIiIHN0eWxlPSJqdXN0aWZ5LWNvbnRlbnQ6IGZsZXgtZW5kOyI+PGRpdiBjbGFzcz0iY29udm9jLXNpZ24iIHN0eWxlPSJ0ZXh0LWFsaWduOnJpZ2h0OyI+PGRpdj5GYWl0IMOgICR7dHh0Q2l0eX0sIGxlICR7bmV3IERhdGUoKS50b0xvY2FsZURhdGVTdHJpbmcoJ2ZyLUZSJyl9PC9kaXY+JHtzaWduU3JjID8gYDxpbWcgc3JjPSIke3NpZ25TcmN9IiBzdHlsZT0ibWF4LWhlaWdodDo2MHB4OyBtYXJnaW4tdG9wOjEwcHg7Ij5gIDogJyd9PGRpdiBzdHlsZT0ibWFyZ2luLXRvcDoxMHB4OyBmb250LXdlaWdodDpib2xkOyI+JHtBcHBTdGF0ZS5jb25maWcubmFtZSB8fCAnJ308L2Rpdj48ZGl2IHN0eWxlPSJmb250LXN0eWxlOml0YWxpYzsiPiR7QXBwU3RhdGUuY29uZmlnLnJvbGUgfHwgJyd9PC9kaXY+PC9kaXY+PC9kaXY+PC9kaXY+YDsKICAgICAgICAgICAgICAgICAgICBwcmludEFyZWEuaW5zZXJ0QWRqYWNlbnRIVE1MKCdiZWZvcmVlbmQnLCBwYWdlSHRtbCk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIGlmKGNvdW50ID4gMCkgd2luZG93LnByaW50KCk7IGVsc2UgYWxlcnQoIkF1Y3VuZSBzdXJ2ZWlsbGFuY2UgdHJvdXbDqWUuIik7CiAgICAgICAgICAgIH0gY2F0Y2goZSkgeyBjb25zb2xlLmVycm9yKGUpOyBhbGVydCgiRXJyZXVyIGltcHJlc3Npb246ICIgKyBlLm1lc3NhZ2UpOyB9CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBwb3B1bGF0ZVJlY2FwRmlsdGVycygpIHsgCiAgICAgICAgICAgIGNvbnN0IGV4YW1TZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVjYXAtZXhhbS1zZWxlY3QnKTsgZXhhbVNlbC5pbm5lckhUTUwgPSAnPG9wdGlvbiB2YWx1ZT0iQUxMIj5Ub3V0ZXMgbGVzIMOpcHJldXZlczwvb3B0aW9uPic7IAogICAgICAgICAgICBBcHBTdGF0ZS5kaXN0cmlidXRpb25EYXRhLmZvckVhY2goKGQsIGkpID0+IHsgaWYoIWQpIHJldHVybjsgZXhhbVNlbC5hZGQobmV3IE9wdGlvbihnZXRWYWx1ZShBcHBTdGF0ZS5lcHJldXZlc1tkLmV4YW1JZHhdLCBbJ01hdGnDqHJlJywgJ0VwcmV1dmUnXSksIGkpKTsgfSk7IAogICAgICAgICAgICB1cGRhdGVSZWNhcFJvb21TZWxlY3QoKTsgCiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiB1cGRhdGVSZWNhcFJvb21TZWxlY3QoKSB7IAogICAgICAgICAgICBjb25zdCByb29tU2VsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JlY2FwLXJvb20tc2VsZWN0Jyk7IHJvb21TZWwuaW5uZXJIVE1MID0gJzxvcHRpb24gdmFsdWU9IkFMTCI+VG91dGVzIGxlcyBzYWxsZXMgdXRpbGlzw6llczwvb3B0aW9uPic7IAogICAgICAgICAgICBjb25zdCBleGFtSWR4ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JlY2FwLWV4YW0tc2VsZWN0JykudmFsdWU7IAogICAgICAgICAgICBpZihleGFtSWR4ICE9PSAiQUxMIikgeyAKICAgICAgICAgICAgICAgIGNvbnN0IGRpc3QgPSBBcHBTdGF0ZS5kaXN0cmlidXRpb25EYXRhW2V4YW1JZHhdOyBpZihkaXN0KSBkaXN0LnJvb21zLmZvckVhY2gociA9PiB7IGlmKHIuc3R1ZGVudHMubGVuZ3RoID4gMCkgcm9vbVNlbC5hZGQobmV3IE9wdGlvbihyLm5hbWUsIHIubmFtZSkpOyB9KTsgCiAgICAgICAgICAgIH0gZWxzZSB7IAogICAgICAgICAgICAgICAgbGV0IHJvb21zID0gbmV3IFNldCgpOyBBcHBTdGF0ZS5kaXN0cmlidXRpb25EYXRhLmZvckVhY2goZCA9PiB7IGlmKGQpIGQucm9vbXMuZm9yRWFjaChyID0+IHsgaWYoci5zdHVkZW50cy5sZW5ndGggPiAwKSByb29tcy5hZGQoci5uYW1lKTsgfSk7IH0pOyAKICAgICAgICAgICAgICAgIEFycmF5LmZyb20ocm9vbXMpLnNvcnQoKS5mb3JFYWNoKHIgPT4gcm9vbVNlbC5hZGQobmV3IE9wdGlvbihyLCByKSkpOyAKICAgICAgICAgICAgfSAKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIHByaW50R2xvYmFsUmVjYXAoKSB7IAogICAgICAgICAgICBpZighQXBwU3RhdGUuZGlzdHJpYnV0aW9uRGF0YS5sZW5ndGgpIHJldHVybiBhbGVydCgiUsOpcGFydGl0aW9uIHZpZGUiKTsgCiAgICAgICAgICAgIGNvbnN0IGV4YW1GaWx0ZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVjYXAtZXhhbS1zZWxlY3QnKS52YWx1ZTsgCiAgICAgICAgICAgIGNvbnN0IHJvb21GaWx0ZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVjYXAtcm9vbS1zZWxlY3QnKS52YWx1ZTsgCiAgICAgICAgICAgIGNvbnN0IGxvZ28gPSBBcHBTdGF0ZS5jb25maWcubG9nb1NyYyB8fCAiIjsgCiAgICAgICAgICAgIGxldCBodG1sID0gIiI7IAogICAgICAgICAgICBsZXQgZXhhbXNUb1ByaW50ID0gKGV4YW1GaWx0ZXIgPT09ICJBTEwiKSA/IEFwcFN0YXRlLmRpc3RyaWJ1dGlvbkRhdGEuZmlsdGVyKGQgPT4gZCAhPT0gbnVsbCkgOiBbQXBwU3RhdGUuZGlzdHJpYnV0aW9uRGF0YVtleGFtRmlsdGVyXV07IAogICAgICAgICAgICAKICAgICAgICAgICAgZXhhbXNUb1ByaW50LmZvckVhY2goZGlzdCA9PiB7IAogICAgICAgICAgICAgICAgaWYoIWRpc3QpIHJldHVybjsgCiAgICAgICAgICAgICAgICBjb25zdCBleGFtSW5mbyA9IEFwcFN0YXRlLmVwcmV1dmVzW2Rpc3QuZXhhbUlkeF07IAogICAgICAgICAgICAgICAgY29uc3QgZXhhbU5hbWUgPSBnZXRWYWx1ZShleGFtSW5mbywgWydNYXRpw6hyZScsJ0VwcmV1dmUnXSk7IAogICAgICAgICAgICAgICAgZGlzdC5yb29tcy5mb3JFYWNoKHIgPT4geyAKICAgICAgICAgICAgICAgICAgICBpZihyb29tRmlsdGVyICE9PSAiQUxMIiAmJiByLm5hbWUgIT09IHJvb21GaWx0ZXIpIHJldHVybjsgCiAgICAgICAgICAgICAgICAgICAgaWYoci5zdHVkZW50cy5sZW5ndGggPT09IDApIHJldHVybjsKICAgICAgICAgICAgICAgICAgICBsZXQgbGlzdCA9IFsuLi5yLnN0dWRlbnRzXTsgCiAgICAgICAgICAgICAgICAgICAgbGlzdC5zb3J0KChhLGIpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICBpZihhLnBhc3NhZ2VUaW1lICYmIGIucGFzc2FnZVRpbWUpIHJldHVybiBhLnBhc3NhZ2VUaW1lLmxvY2FsZUNvbXBhcmUoYi5wYXNzYWdlVGltZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChnZXRWYWx1ZShhLFsnTm9tJ10pIHx8ICIiKS5sb2NhbGVDb21wYXJlKGdldFZhbHVlKGIsWydOb20nXSkgfHwgIiIpOwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIGxldCByb3dzID0gIiI7IAogICAgICAgICAgICAgICAgICAgIGxpc3QuZm9yRWFjaChpdGVtID0+IHsgCiAgICAgICAgICAgICAgICAgICAgICAgIHJvd3MgKz0gYDx0cj48dGQ+JHtnZXRWYWx1ZShpdGVtLFsnTm9tJ10pfTwvdGQ+PHRkPiR7Z2V0VmFsdWUoaXRlbSxbJ1Byw6lub20nXSl9PC90ZD48dGQ+JHtnZXRWYWx1ZShpdGVtLFsnQ2xhc3NlJ10pfTwvdGQ+PHRkPjxzdHJvbmc+JHtpdGVtLnBhc3NhZ2VUaW1lIHx8ICItIn08L3N0cm9uZz48L3RkPjwvdHI+YDsgCiAgICAgICAgICAgICAgICAgICAgfSk7IAogICAgICAgICAgICAgICAgICAgIGh0bWwgKz0gYDxkaXYgY2xhc3M9InByaW50LXBhZ2UtbGlzdCIgc3R5bGU9InBhZ2UtYnJlYWstYWZ0ZXI6IGFsd2F5czsiPjxkaXYgY2xhc3M9InByaW50LWhlYWRlciI+PGRpdj5UQUJMRUFVIFLDiUNBUElUVUxBVElGPC9kaXY+JHtsb2dvID8gYDxpbWcgc3JjPSIke2xvZ299IiBjbGFzcz0icHJpbnQtbG9nbyI+YCA6ICcnfTwvZGl2PjxkaXYgY2xhc3M9InByaW50LWRvYy10aXRsZSI+JHtleGFtTmFtZX0gLSBTYWxsZSAke3IubmFtZX08L2Rpdj48ZGl2IHN0eWxlPSJ0ZXh0LWFsaWduOmNlbnRlcjsgZm9udC1zaXplOjEuMXJlbTsgbWFyZ2luLWJvdHRvbToxMHB4OyI+PHN0cm9uZz5EYXRlIDo8L3N0cm9uZz4gJHtmb3JtYXREYXRlKGdldFZhbHVlKGV4YW1JbmZvLFsnRGF0ZSddKSl9PC9kaXY+PHRhYmxlIGNsYXNzPSJwcmludC10YWJsZSI+PHRoZWFkPjx0cj48dGg+Tm9tPC90aD48dGg+UHLDqW5vbTwvdGg+PHRoPkNsYXNzZTwvdGg+PHRoPkhldXJlIETDqWJ1dDwvdGg+PC90cj48L3RoZWFkPjx0Ym9keT4ke3Jvd3N9PC90Ym9keT48L3RhYmxlPjwvZGl2PmA7IAogICAgICAgICAgICAgICAgfSk7IAogICAgICAgICAgICB9KTsgCiAgICAgICAgICAgIGlmKGh0bWwgPT09ICIiKSByZXR1cm4gYWxlcnQoIkF1Y3VuZSBkb25uw6llIHBvdXIgY2UgZmlsdHJlLiIpOyAKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ByaW50LWFyZWEnKS5pbm5lckhUTUwgPSBodG1sOyB3aW5kb3cucHJpbnQoKTsgCiAgICAgICAgfQogICAgICAgIAogICAgICAgIGZ1bmN0aW9uIHByaW50UFYoKSB7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBjb25zdCBleGFtSWR4ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3B2LWV4YW0tc2VsZWN0JykudmFsdWU7CiAgICAgICAgICAgICAgICBjb25zdCByb29tSWR4ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3B2LXJvb20tc2VsZWN0JykudmFsdWU7CiAgICAgICAgICAgICAgICBpZighQXBwU3RhdGUuZGlzdHJpYnV0aW9uRGF0YSB8fCBBcHBTdGF0ZS5kaXN0cmlidXRpb25EYXRhLmxlbmd0aCA9PT0gMCkgeyBhbGVydCgiUsOpcGFydGl0aW9uIG1hbnF1YW50ZS4iKTsgcmV0dXJuOyB9CiAgICAgICAgICAgICAgICBjb25zdCBsb2dvID0gQXBwU3RhdGUuY29uZmlnLmxvZ29TcmMgfHwgIiI7IGxldCBodG1sID0gIiI7CiAgICAgICAgICAgICAgICBsZXQgZXhhbXNUb1ByaW50ID0gKGV4YW1JZHggPT09ICJBTEwiKSA/IEFwcFN0YXRlLmRpc3RyaWJ1dGlvbkRhdGEgOiBbQXBwU3RhdGUuZGlzdHJpYnV0aW9uRGF0YVtleGFtSWR4XV07CiAgICAgICAgICAgICAgICBleGFtc1RvUHJpbnQuZm9yRWFjaChleGFtRGF0YSA9PiB7CiAgICAgICAgICAgICAgICAgICAgaWYoIWV4YW1EYXRhKSByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgY29uc3QgZXhhbUluZm8gPSBBcHBTdGF0ZS5lcHJldXZlc1tleGFtRGF0YS5leGFtSWR4XTsKICAgICAgICAgICAgICAgICAgICBsZXQgcm9vbXNUb1ByaW50ID0gKHJvb21JZHggPT09ICJBTEwiIHx8IGV4YW1JZHggPT09ICJBTEwiKSA/IGV4YW1EYXRhLnJvb21zIDogW2V4YW1EYXRhLnJvb21zW3Jvb21JZHhdXTsKICAgICAgICAgICAgICAgICAgICByb29tc1RvUHJpbnQuZm9yRWFjaChyb29tRGF0YSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHJvb21EYXRhLnN0dWRlbnRzLmxlbmd0aCA9PT0gMCkgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpc1RUID0gcm9vbURhdGEuaXNUVDsKICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHRpbWUgPSBpc1RUID8gZ2V0VmFsdWUoZXhhbUluZm8sIFsnSGV1cmUgZGUgZMOpYnV0IHRpZXJzIHRlbXBzJywgJ0hldXJlIFRUJ10pIDogZ2V0VmFsdWUoZXhhbUluZm8sIFsnSGV1cmUgZGUgZMOpYnV0JywgJ0hldXJlJ10pOwogICAgICAgICAgICAgICAgICAgICAgICBpZighdGltZSkgdGltZSA9IGdldFZhbHVlKGV4YW1JbmZvLCBbJ0hldXJlIGRlIGTDqWJ1dCcsICdIZXVyZSddKTsKICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGR1cmF0aW9uID0gaXNUVCA/IGdldFZhbHVlKGV4YW1JbmZvLCBbJ0R1csOpZSBlbiBtaW51dGUgdGllcnMgdGVtcHMnLCAnRHVyw6llIFRUJ10pIDogZ2V0VmFsdWUoZXhhbUluZm8sIFsnRHVyw6llIGVuIG1pbnV0ZScsICdEdXLDqWUnXSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCFkdXJhdGlvbikgZHVyYXRpb24gPSBnZXRWYWx1ZShleGFtSW5mbywgWydEdXLDqWUgZW4gbWludXRlJywgJ0R1csOpZSddKTsKICAgICAgICAgICAgICAgICAgICAgICAgaHRtbCArPSBgPGRpdiBjbGFzcz0icHJpbnQtcGFnZS1saXN0IiBzdHlsZT0icGFnZS1icmVhay1hZnRlcjogYWx3YXlzOyI+PGRpdiBjbGFzcz0icHJpbnQtaGVhZGVyIj48ZGl2PiR7QXBwU3RhdGUuY29uZmlnLmV4YW1UaXRsZSB8fCAiRVhBTUVOIn08L2Rpdj4ke2xvZ28gPyBgPGltZyBzcmM9IiR7bG9nb30iIGNsYXNzPSJwcmludC1sb2dvIj5gIDogJyd9PC9kaXY+PGRpdiBjbGFzcz0icHJpbnQtZG9jLXRpdGxlIj5QUk9Dw4hTIFZFUkJBTCBERSBTQUxMRTwvZGl2PjxkaXYgY2xhc3M9InByaW50LWluZm9zLWJveCI+PHN0cm9uZz7DiXByZXV2ZSA6PC9zdHJvbmc+ICR7Z2V0VmFsdWUoZXhhbUluZm8sWydNYXRpw6hyZScsJ0VwcmV1dmUnXSl9PGJyPjxzdHJvbmc+RGF0ZSA6PC9zdHJvbmc+ICR7Zm9ybWF0RGF0ZShnZXRWYWx1ZShleGFtSW5mbyxbJ0RhdGUnXSkpfTxicj48c3Ryb25nPkhldXJlIGTDqWJ1dCA6PC9zdHJvbmc+ICR7dGltZX0gLSA8c3Ryb25nPkR1csOpZSA6PC9zdHJvbmc+ICR7Zm9ybWF0RHVyYXRpb25EaXNwbGF5KGR1cmF0aW9uKX08YnI+PHN0cm9uZz5TYWxsZSA6PC9zdHJvbmc+ICR7cm9vbURhdGEubmFtZX08YnI+PHN0cm9uZz5Ob21icmUgZGUgY2FuZGlkYXRzIDo8L3N0cm9uZz4gJHtyb29tRGF0YS5zdHVkZW50cy5sZW5ndGh9PC9kaXY+PGRpdiBzdHlsZT0iYm9yZGVyOjFweCBzb2xpZCAjMDAwOyBwYWRkaW5nOjEwcHg7IGhlaWdodDozMDBweDsgbWFyZ2luLWJvdHRvbToyMHB4OyI+PHN0cm9uZz5PYnNlcnZhdGlvbnMgLyBJbmNpZGVudHMgOjwvc3Ryb25nPjwvZGl2PjxkaXYgc3R5bGU9ImJvcmRlcjoxcHggc29saWQgIzAwMDsgcGFkZGluZzoxMHB4OyBoZWlnaHQ6MTUwcHg7IG1hcmdpbi1ib3R0b206MjBweDsiPjxzdHJvbmc+QWJzZW50cyAoTm9tcyBldCBQcsOpbm9tcykgOjwvc3Ryb25nPjwvZGl2PjxkaXYgY2xhc3M9InB2LXNpZ25hdHVyZXMiPjxkaXYgY2xhc3M9InB2LWJveCI+PHN0cm9uZz5TaWduYXR1cmUgU3VydmVpbGxhbnQgMSA6PC9zdHJvbmc+PC9kaXY+PGRpdiBjbGFzcz0icHYtYm94Ij48c3Ryb25nPlNpZ25hdHVyZSBTdXJ2ZWlsbGFudCAyIDo8L3N0cm9uZz48L2Rpdj48L2Rpdj48ZGl2IGNsYXNzPSJjb252b2MtZm9vdGVyIiBzdHlsZT0ianVzdGlmeS1jb250ZW50OiBmbGV4LWVuZDsgbWFyZ2luLXRvcDo1MHB4OyI+PGRpdiBjbGFzcz0iY29udm9jLXNpZ24iIHN0eWxlPSJ0ZXh0LWFsaWduOnJpZ2h0OyI+PGRpdj5GYWl0IMOgICR7QXBwU3RhdGUuY29udm9jVGV4dC5jaXR5IHx8ICdWaWxsZSd9LCBsZSAke25ldyBEYXRlKCkudG9Mb2NhbGVEYXRlU3RyaW5nKCdmci1GUicpfTwvZGl2PjxkaXYgc3R5bGU9Im1hcmdpbi10b3A6MTBweDsgZm9udC13ZWlnaHQ6Ym9sZDsiPiR7QXBwU3RhdGUuY29uZmlnLm5hbWV9PC9kaXY+PC9kaXY+PC9kaXY+PC9kaXY+YDsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ByaW50LWFyZWEnKS5pbm5lckhUTUwgPSBodG1sOyB3aW5kb3cucHJpbnQoKTsKICAgICAgICAgICAgfSBjYXRjaChlKXsgY29uc29sZS5lcnJvcihlKTsgYWxlcnQoIkVycmV1ciBpbXByZXNzaW9uIFBWIik7IH0KICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIHByaW50UG9jaGV0dGVzKCkgewogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgY29uc3QgZXhhbUlkeCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwdi1leGFtLXNlbGVjdCcpLnZhbHVlOwogICAgICAgICAgICAgICAgY29uc3Qgcm9vbUlkeCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwdi1yb29tLXNlbGVjdCcpLnZhbHVlOwogICAgICAgICAgICAgICAgaWYoIUFwcFN0YXRlLmRpc3RyaWJ1dGlvbkRhdGEgfHwgQXBwU3RhdGUuZGlzdHJpYnV0aW9uRGF0YS5sZW5ndGggPT09IDApIHsgYWxlcnQoIlLDqXBhcnRpdGlvbiBtYW5xdWFudGUuIik7IHJldHVybjsgfQogICAgICAgICAgICAgICAgY29uc3QgbG9nbyA9IEFwcFN0YXRlLmNvbmZpZy5sb2dvU3JjIHx8ICIiOyBjb25zdCBjb25zaWduZXMgPSBBcHBTdGF0ZS5wb2NoZXR0ZVRleHQuc3VydiB8fCAiIjsgbGV0IGh0bWwgPSAiIjsKICAgICAgICAgICAgICAgIGxldCBleGFtc1RvUHJpbnQgPSAoZXhhbUlkeCA9PT0gIkFMTCIpID8gQXBwU3RhdGUuZGlzdHJpYnV0aW9uRGF0YSA6IFtBcHBTdGF0ZS5kaXN0cmlidXRpb25EYXRhW2V4YW1JZHhdXTsKICAgICAgICAgICAgICAgIGV4YW1zVG9QcmludC5mb3JFYWNoKGV4YW1EYXRhID0+IHsKICAgICAgICAgICAgICAgICAgICBpZighZXhhbURhdGEpIHJldHVybjsKICAgICAgICAgICAgICAgICAgICBjb25zdCBleGFtSW5mbyA9IEFwcFN0YXRlLmVwcmV1dmVzW2V4YW1EYXRhLmV4YW1JZHhdOwogICAgICAgICAgICAgICAgICAgIGxldCByb29tc1RvUHJpbnQgPSAocm9vbUlkeCA9PT0gIkFMTCIgfHwgZXhhbUlkeCA9PT0gIkFMTCIpID8gZXhhbURhdGEucm9vbXMgOiBbZXhhbURhdGEucm9vbXNbcm9vbUlkeF1dOwogICAgICAgICAgICAgICAgICAgIHJvb21zVG9QcmludC5mb3JFYWNoKHJvb21EYXRhID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYocm9vbURhdGEuc3R1ZGVudHMubGVuZ3RoID09PSAwKSByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGlzVFQgPSByb29tRGF0YS5pc1RUOwogICAgICAgICAgICAgICAgICAgICAgICBsZXQgdGltZSA9IGlzVFQgPyBnZXRWYWx1ZShleGFtSW5mbywgWydIZXVyZSBkZSBkw6lidXQgdGllcnMgdGVtcHMnLCAnSGV1cmUgVFQnXSkgOiBnZXRWYWx1ZShleGFtSW5mbywgWydIZXVyZSBkZSBkw6lidXQnLCAnSGV1cmUnXSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCF0aW1lKSB0aW1lID0gZ2V0VmFsdWUoZXhhbUluZm8sIFsnSGV1cmUgZGUgZMOpYnV0JywgJ0hldXJlJ10pOwogICAgICAgICAgICAgICAgICAgICAgICBsZXQgZHVyYXRpb24gPSBpc1RUID8gZ2V0VmFsdWUoZXhhbUluZm8sIFsnRHVyw6llIGVuIG1pbnV0ZSB0aWVycyB0ZW1wcycsICdEdXLDqWUgVFQnXSkgOiBnZXRWYWx1ZShleGFtSW5mbywgWydEdXLDqWUgZW4gbWludXRlJywgJ0R1csOpZSddKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoIWR1cmF0aW9uKSBkdXJhdGlvbiA9IGdldFZhbHVlKGV4YW1JbmZvLCBbJ0R1csOpZSBlbiBtaW51dGUnLCAnRHVyw6llJ10pOwogICAgICAgICAgICAgICAgICAgICAgICBodG1sICs9IGA8ZGl2IGNsYXNzPSJwcmludC1wYWdlLWNvbnZvYyI+PGRpdiBjbGFzcz0icHJpbnQtaGVhZGVyIj48ZGl2IHN0eWxlPSJmb250LXNpemU6MS41cmVtOyBmb250LXdlaWdodDpib2xkOyI+UE9DSEVUVEUgU1VKRVQ8L2Rpdj4ke2xvZ28gPyBgPGltZyBzcmM9IiR7bG9nb30iIGNsYXNzPSJwcmludC1sb2dvIj5gIDogJyd9PC9kaXY+PGRpdiBzdHlsZT0iYm9yZGVyOjRweCBzb2xpZCAjMDAwOyBwYWRkaW5nOjIwcHg7IHRleHQtYWxpZ246Y2VudGVyOyBtYXJnaW46MzBweCAwOyI+PGgxIHN0eWxlPSJmb250LXNpemU6M3JlbTsgbWFyZ2luOjA7Ij4ke3Jvb21EYXRhLm5hbWV9PC9oMT48aDIgc3R5bGU9ImZvbnQtc2l6ZToycmVtOyBtYXJnaW46MTBweCAwOyI+JHtnZXRWYWx1ZShleGFtSW5mbyxbJ01hdGnDqHJlJywnRXByZXV2ZSddKX08L2gyPjxoMyBzdHlsZT0ibWFyZ2luOjA7Ij4ke3Jvb21EYXRhLnN0dWRlbnRzLmxlbmd0aH0gQ29waWVzPC9oMz48L2Rpdj48ZGl2IGNsYXNzPSJwcmludC1pbmZvcy1ib3giIHN0eWxlPSJmb250LXNpemU6MS4ycmVtOyI+PHN0cm9uZz5EYXRlIDo8L3N0cm9uZz4gJHtmb3JtYXREYXRlKGdldFZhbHVlKGV4YW1JbmZvLFsnRGF0ZSddKSl9PGJyPjxzdHJvbmc+SG9yYWlyZSA6PC9zdHJvbmc+ICR7dGltZX08YnI+PHN0cm9uZz5EdXLDqWUgOjwvc3Ryb25nPiAke2Zvcm1hdER1cmF0aW9uRGlzcGxheShkdXJhdGlvbil9PGJyPjxzdHJvbmc+U3VydmVpbGxhbnRzIDo8L3N0cm9uZz4gJHtyb29tRGF0YS5zdXJ2ZWlsbGFudHMuam9pbignIC8gJyl9PC9kaXY+PGRpdiBzdHlsZT0ibWFyZ2luLXRvcDoyMHB4OyBib3JkZXI6MXB4IHNvbGlkICMwMDA7IHBhZGRpbmc6MTVweDsgZmxleDoxOyI+PHN0cm9uZz5DT05TSUdORVMgQVVYIFNVUlZFSUxMQU5UUyA6PC9zdHJvbmc+PGJyPjxicj48ZGl2IHN0eWxlPSJ3aGl0ZS1zcGFjZTogcHJlLXdyYXA7Ij4ke2NvbnNpZ25lc308L2Rpdj48L2Rpdj48ZGl2IGNsYXNzPSJjb252b2MtZm9vdGVyIiBzdHlsZT0ianVzdGlmeS1jb250ZW50OiBmbGV4LWVuZDsiPjxkaXYgY2xhc3M9ImNvbnZvYy1zaWduIiBzdHlsZT0idGV4dC1hbGlnbjpyaWdodDsiPjxkaXY+RmFpdCDDoCAke0FwcFN0YXRlLmNvbnZvY1RleHQuY2l0eSB8fCAnVmlsbGUnfSwgbGUgJHtuZXcgRGF0ZSgpLnRvTG9jYWxlRGF0ZVN0cmluZygnZnItRlInKX08L2Rpdj48ZGl2IHN0eWxlPSJtYXJnaW4tdG9wOjEwcHg7IGZvbnQtd2VpZ2h0OmJvbGQ7Ij4ke0FwcFN0YXRlLmNvbmZpZy5uYW1lfTwvZGl2PjwvZGl2PjwvZGl2PjwvZGl2PmA7CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcmludC1hcmVhJykuaW5uZXJIVE1MID0gaHRtbDsgd2luZG93LnByaW50KCk7CiAgICAgICAgICAgIH0gY2F0Y2goZSl7IGNvbnNvbGUuZXJyb3IoZSk7IGFsZXJ0KCJFcnJldXIgaW1wcmVzc2lvbiBQb2NoZXR0ZSIpOyB9CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBmb3JtYXREYXRlKGQpIHsgaWYoIWQpIHJldHVybiAiIjsgaWYoIWlzTmFOKGQpICYmIGQgPiAxMDAwKSB7IGNvbnN0IGRhdGVPYmogPSBuZXcgRGF0ZSgoZCAtICgyNTU2NyArIDIpKSo4NjQwMCoxMDAwKTsgcmV0dXJuIGRhdGVPYmoudG9Mb2NhbGVEYXRlU3RyaW5nKCdmci1GUicpOyB9IHJldHVybiBkOyB9CiAgICAgICAgZnVuY3Rpb24gYXBwbHlMYXlvdXQodHlwZSl7IAogICAgICAgICAgICBpZih0eXBlID09PSAnc3RkJykgeyBjb25zdCBzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbnZvYy10ZW1wbGF0ZScpOyBzLnN0eWxlLnBhZGRpbmdUb3AgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2V0cy1zdGQtdG9wJykudmFsdWUgKyAnbW0nOyBzLnN0eWxlLnBhZGRpbmdCb3R0b20gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2V0cy1zdGQtYm90JykudmFsdWUgKyAnbW0nOyBzLnN0eWxlLmZvbnRTaXplID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NldHMtc3RkLWZvbnQnKS52YWx1ZSArICdweCc7IH0gCiAgICAgICAgICAgIGlmKHR5cGUgPT09ICdzdXJ2JykgeyBjb25zdCBzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbnZvYy1zdXJ2LXRlbXBsYXRlJyk7IHMuc3R5bGUucGFkZGluZ1RvcCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZXRzLXN1cnYtdG9wJykudmFsdWUgKyAnbW0nOyBzLnN0eWxlLnBhZGRpbmdCb3R0b20gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2V0cy1zdXJ2LWJvdCcpLnZhbHVlICsgJ21tJzsgcy5zdHlsZS5mb250U2l6ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZXRzLXN1cnYtZm9udCcpLnZhbHVlICsgJ3B4JzsgfSAKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIHVwZGF0ZVJlYWxUaW1lQ291bnRlcnMoKSB7CiAgICAgICAgICAgIGNvbnN0IGNhcmRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnJvb20tY2FyZCcpOwogICAgICAgICAgICBjYXJkcy5mb3JFYWNoKGNhcmQgPT4gewogICAgICAgICAgICAgICAgY29uc3QgYm9keSA9IGNhcmQucXVlcnlTZWxlY3RvcignLnJvb20tYm9keScpOwogICAgICAgICAgICAgICAgaWYoYm9keSkgewogICAgICAgICAgICAgICAgICAgICBjb25zdCBjb3VudCA9IGJvZHkuY2hpbGRyZW4ubGVuZ3RoOyBjb25zdCBjYXAgPSBib2R5LmdldEF0dHJpYnV0ZSgnZGF0YS1jYXBhY2l0eScpOwogICAgICAgICAgICAgICAgICAgICBjb25zdCBjb250YWluZXIgPSBjYXJkLnF1ZXJ5U2VsZWN0b3IoJy5yb29tLWhlYWRlci10b3AgZGl2IHNwYW4nKTsgaWYoY29udGFpbmVyKSBjb250YWluZXIuaW5uZXJUZXh0ID0gYCR7Y291bnR9LyR7Y2FwfWA7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgIH0KCiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2N1cnJlbnQtZGF0ZScpLmlubmVyVGV4dCA9IG5ldyBEYXRlKCkudG9Mb2NhbGVEYXRlU3RyaW5nKCdmci1GUicpOwogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjdXJyZW50LWRhdGUtc3VydicpLmlubmVyVGV4dCA9IG5ldyBEYXRlKCkudG9Mb2NhbGVEYXRlU3RyaW5nKCdmci1GUicpOwogICAgICAgIGNvbnN0IGRlZmF1bHRDb25zaWduZXMgPSBgLUluc3RhbGxlciBsZXMgw6lsw6h2ZXMgZGFucyBsZSBzaWxlbmNlXG4tRmFpcmUgw6l0ZWluZHJlIGxlcyB0w6lsw6lwaG9uZXMgZXQgbGVzIG1vbnRyZXMgY29ubmVjdMOpZXNcbi1GYWlyZSByYW5nZXIgbGVzIHNhY3Ncbi1Ww6lyaWZpZXIgbGVzIHBpw6hjZXMgZCdpZGVudGl0w6lcbi1BZmZpY2hlciBsZXMgaG9yYWlyZXMgYXUgdGFibGVhdVxuLURpc3RyaWJ1ZXIgbGVzIGNvcGllcyByZXRvdXJuw6llc1xuLUEgbGEgZmluIGRlIGwnw6lwcmV1dmUsIGxlcyDDqWzDqHZlcyByZXN0ZW50IMOgIGxldXIgcGxhY2Vcbi1TaWduYXR1cmUgw6ltYXJnZW1lbnRcbi1Db21wbMOpdGVyIGxlIHByb2PDqHMgdmVyYmFsXG4tRMOpcG9zZXIgdG91cyBsZXMgw6lsw6ltZW50cyBhdSBzZWNyw6l0YXJpYXRgOwogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0eHQtcG9jaGV0dGUtc3VydicpLnZhbHVlID0gZGVmYXVsdENvbnNpZ25lczsgQXBwU3RhdGUucG9jaGV0dGVUZXh0LnN1cnYgPSBkZWZhdWx0Q29uc2lnbmVzOwogICAgPC9zY3JpcHQ+Cgo8c2NyaXB0PgooZnVuY3Rpb24oKXsKICAgIGZ1bmN0aW9uIHBhdGNoVUkoKSB7CiAgICAgICAgdmFyIG5hbWVFbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb25maWdOYW1lJyk7CiAgICAgICAgdmFyIHJvbGVFbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb25maWdSb2xlJyk7CiAgICAgICAgaWYgKG5hbWVFbCkgeyB2YXIgZmcgPSBuYW1lRWwuY2xvc2VzdCgnLmZvcm0tZ3JvdXAnKTsgaWYoZmcpIGZnLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7IH0KICAgICAgICBpZiAocm9sZUVsKSB7IHZhciBmZyA9IHJvbGVFbC5jbG9zZXN0KCcuZm9ybS1ncm91cCcpOyBpZihmZykgZmcuc3R5bGUuZGlzcGxheSA9ICdub25lJzsgfQogICAgICAgIHZhciBjb2xzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnI3ZpZXcxIC5jb25maWctY29sJyk7CiAgICAgICAgaWYgKGNvbHMubGVuZ3RoID49IDIpIGNvbHNbMV0uc3R5bGUuZGlzcGxheSA9ICdub25lJzsKICAgICAgICB2YXIgaGVhZGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3ZpZXcxIC5oZWFkZXItcGFuZWwnKTsKICAgICAgICBpZiAoaGVhZGVyICYmICFkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGlsb3RlLW5vdGljZScpKSB7CiAgICAgICAgICAgIHZhciBkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgICAgICAgIGQuaWQgPSAncGlsb3RlLW5vdGljZSc7CiAgICAgICAgICAgIGQuc3R5bGUuY3NzVGV4dCA9ICdiYWNrZ3JvdW5kOiNlYWY0ZmU7Ym9yZGVyOjFweCBzb2xpZCAjMzQ5OGRiO2JvcmRlci1yYWRpdXM6OHB4O3BhZGRpbmc6MTBweCAxNnB4O21hcmdpbi1ib3R0b206MTVweDtmb250LXNpemU6MC44NXJlbTtjb2xvcjojMmMzZTUwO2Rpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXI7Z2FwOjEwcHg7JzsKICAgICAgICAgICAgZC5pbm5lckhUTUwgPSAnPGkgY2xhc3M9ImZhcyBmYS1pbmZvLWNpcmNsZSIgc3R5bGU9ImNvbG9yOiMzNDk4ZGI7Zm9udC1zaXplOjEuMXJlbTsiPjwvaT4gTm9tLCBmb25jdGlvbiwgbG9nbyBldCBzaWduYXR1cmUgc29udCBkYW5zIGxlIG1lbnUgPHN0cm9uZz5QYXJhbcOodHJlcyDimpk8L3N0cm9uZz4gZGUgbGEgYmFycmUgcHJpbmNpcGFsZS4nOwogICAgICAgICAgICBoZWFkZXIuYWZ0ZXIoZCk7CiAgICAgICAgfQogICAgfQogICAgc2V0VGltZW91dChwYXRjaFVJLCAxNTApOwogICAgc2V0VGltZW91dChwYXRjaFVJLCA2MDApOwoKICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgZnVuY3Rpb24oZSkgewogICAgICAgIGlmICghZS5kYXRhIHx8IGUuZGF0YS50eXBlICE9PSAncGlsb3RlLXNldHRpbmdzJykgcmV0dXJuOwogICAgICAgIHZhciBzID0gZS5kYXRhLmRhdGE7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgaWYgKHR5cGVvZiBBcHBTdGF0ZSAhPT0gJ3VuZGVmaW5lZCcpIHsKICAgICAgICAgICAgICAgIGlmIChzLm5hbWUpIHsgQXBwU3RhdGUuY29uZmlnLm5hbWUgPSBzLm5hbWU7IHZhciBlbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb25maWdOYW1lJyk7IGlmKGVsKSBlbC52YWx1ZSA9IHMubmFtZTsgfQogICAgICAgICAgICAgICAgaWYgKHMucm9sZSkgeyBBcHBTdGF0ZS5jb25maWcucm9sZSA9IHMucm9sZTsgdmFyIGVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbmZpZ1JvbGUnKTsgaWYoZWwpIGVsLnZhbHVlID0gcy5yb2xlOyB9CiAgICAgICAgICAgICAgICBpZiAocy5sb2dvU3JjKSB7IEFwcFN0YXRlLmNvbmZpZy5sb2dvU3JjID0gcy5sb2dvU3JjOyB2YXIgZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbG9nb1ByZXZpZXcnKTsgaWYoZWwpe2VsLnNyYz1zLmxvZ29TcmM7ZWwuc3R5bGUuZGlzcGxheT0nYmxvY2snO30gfQogICAgICAgICAgICAgICAgaWYgKHMuc2lnblNyYykgeyBBcHBTdGF0ZS5jb25maWcuc2lnblNyYyA9IHMuc2lnblNyYzsgdmFyIGVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NpZ25QcmV2aWV3Jyk7IGlmKGVsKXtlbC5zcmM9cy5zaWduU3JjO2VsLnN0eWxlLmRpc3BsYXk9J2Jsb2NrJzt9IH0KICAgICAgICAgICAgfQogICAgICAgIH0gY2F0Y2goZXJyKSB7fQogICAgfSk7CiAgICB3aW5kb3cucGFyZW50LnBvc3RNZXNzYWdlKHsgdHlwZTogJ3BpbG90ZS1tb2R1bGUtcmVhZHknLCBtb2R1bGU6ICdvcmFsJyB9LCAnKicpOwp9KSgpOwo8L3NjcmlwdD4KCgo8c2NyaXB0Pgpkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgZnVuY3Rpb24oZSkgewogICAgaWYgKCFlLmN0cmxLZXkgfHwgZS5zaGlmdEtleSB8fCBlLmFsdEtleSB8fCBlLm1ldGFLZXkpIHJldHVybjsKICAgIHZhciBrZXkgPSBlLmtleS50b0xvd2VyQ2FzZSgpOwogICAgaWYgKFsncCcsJ2UnLCdvJywnYScsJ2QnXS5pbmRleE9mKGtleSkgPj0gMCkgewogICAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgICB3aW5kb3cucGFyZW50LnBvc3RNZXNzYWdlKHt0eXBlOidwaWxvdGUtc2hvcnRjdXQnLCBrZXk6a2V5fSwgJyonKTsKICAgIH0KfSk7Cjwvc2NyaXB0Pgo8L2JvZHk+CjwvaHRtbD4=",
  "aed": "PCFET0NUWVBFIGh0bWw+CjxodG1sIGxhbmc9ImZyIj4KPGhlYWQ+CiAgICA8bWV0YSBjaGFyc2V0PSJVVEYtOCI+CiAgICA8bWV0YSBuYW1lPSJ2aWV3cG9ydCIgY29udGVudD0id2lkdGg9ZGV2aWNlLXdpZHRoLCBpbml0aWFsLXNjYWxlPTEuMCI+CiAgICA8dGl0bGU+QUVEIFBJTE9URSBCeSBTeWx2w6hyZSBNaWNoZWxldDwvdGl0bGU+CiAgICA8c2NyaXB0IHNyYz0iaHR0cHM6Ly9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMveGxzeC8wLjE4LjUveGxzeC5mdWxsLm1pbi5qcyI+PC9zY3JpcHQ+CiAgICA8bGluayByZWw9InN0eWxlc2hlZXQiIGhyZWY9Imh0dHBzOi8vY2RuanMuY2xvdWRmbGFyZS5jb20vYWpheC9saWJzL2ZvbnQtYXdlc29tZS82LjAuMC9jc3MvYWxsLm1pbi5jc3MiPgogICAgCiAgICA8c3R5bGU+CiAgICAgICAgOnJvb3QgewogICAgICAgICAgICAtLXByaW1hcnk6ICMyYzNlNTA7CiAgICAgICAgICAgIC0tc2Vjb25kYXJ5OiAjMzQ5OGRiOwogICAgICAgICAgICAtLWFjY2VudDogI2U3NGMzYzsKICAgICAgICAgICAgLS1zdWNjZXNzOiAjMjdhZTYwOwogICAgICAgICAgICAtLWJnOiAjZjBmMmY1OwogICAgICAgICAgICAtLXRleHQ6ICMzMzM7CiAgICAgICAgfQoKICAgICAgICBib2R5IHsgZm9udC1mYW1pbHk6ICdTZWdvZSBVSScsIHNhbnMtc2VyaWY7IGJhY2tncm91bmQtY29sb3I6IHZhcigtLWJnKTsgY29sb3I6IHZhcigtLXRleHQpOyBtYXJnaW46IDA7IHBhZGRpbmc6IDA7IGRpc3BsYXk6IGZsZXg7IGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47IGhlaWdodDogMTAwdmg7IH0KCiAgICAgICAgLyogLS0tIE5BVklHQVRJT04gLS0tICovCiAgICAgICAgbmF2IHsKICAgICAgICAgICAgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KDkwZGVnLCAjMWEyYTNhLCAjMmMzZTUwKTsKICAgICAgICAgICAgY29sb3I6IHdoaXRlOyBwYWRkaW5nOiAwIDE1cHg7IGhlaWdodDogNjBweDsKICAgICAgICAgICAgZGlzcGxheTogZmxleDsgYWxpZ24taXRlbXM6IGNlbnRlcjsganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOwogICAgICAgICAgICBib3gtc2hhZG93OiAwIDJweCA1cHggcmdiYSgwLDAsMCwwLjIpOyB6LWluZGV4OiAxMDA7CiAgICAgICAgfQogICAgICAgIC5uYXYtbGVmdCB7IGRpc3BsYXk6IGZsZXg7IGFsaWduLWl0ZW1zOiBjZW50ZXI7IGdhcDogMTVweDsgfQogICAgICAgIC5uYXYtdGl0bGUgeyBmb250LXNpemU6IDEuMXJlbTsgZm9udC13ZWlnaHQ6IGJvbGQ7IGxldHRlci1zcGFjaW5nOiAwLjVweDsgZGlzcGxheTogZmxleDsgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsgfQogICAgICAgIC5uYXYtc3VidGl0bGUgeyBmb250LXNpemU6IDAuN3JlbTsgY29sb3I6ICNiZGMzYzc7IGZvbnQtd2VpZ2h0OiBub3JtYWw7IH0KICAgICAgICAubmF2LWFjdGlvbnMgeyBkaXNwbGF5OiBmbGV4OyBnYXA6IDEwcHg7IG1hcmdpbi1yaWdodDogMjBweDsgYm9yZGVyLXJpZ2h0OiAxcHggc29saWQgcmdiYSgyNTUsMjU1LDI1NSwwLjIpOyBwYWRkaW5nLXJpZ2h0OiAyMHB4OyB9CiAgICAgICAgLmJ0bi1uYXYtYWN0aW9uIHsgYmFja2dyb3VuZDogcmdiYSgyNTUsMjU1LDI1NSwwLjEpOyBib3JkZXI6IDFweCBzb2xpZCByZ2JhKDI1NSwyNTUsMjU1LDAuMyk7IGNvbG9yOiB3aGl0ZTsgcGFkZGluZzogNXB4IDEwcHg7IGJvcmRlci1yYWRpdXM6IDRweDsgY3Vyc29yOiBwb2ludGVyOyBmb250LXNpemU6IDAuOHJlbTsgdHJhbnNpdGlvbjogMC4yczsgfQogICAgICAgIC5idG4tbmF2LWFjdGlvbjpob3ZlciB7IGJhY2tncm91bmQ6IHZhcigtLXNlY29uZGFyeSk7IGJvcmRlci1jb2xvcjogdmFyKC0tc2Vjb25kYXJ5KTsgfQogICAgICAgIC5idG4tZGFuZ2VyLW5hdiB7IGJhY2tncm91bmQ6IHJnYmEoMjMxLCA3NiwgNjAsIDAuMik7IGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWFjY2VudCk7IGNvbG9yOiAjZmZjY2NjOyB9CiAgICAgICAgLmJ0bi1kYW5nZXItbmF2OmhvdmVyIHsgYmFja2dyb3VuZDogdmFyKC0tYWNjZW50KTsgY29sb3I6IHdoaXRlOyB9CgogICAgICAgIC5uYXYtdGFicyB7IGRpc3BsYXk6IGZsZXg7IGdhcDogNXB4OyB9CiAgICAgICAgLnRhYi1idG4gewogICAgICAgICAgICBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDsgYm9yZGVyOiBub25lOyBjb2xvcjogI2JkYzNjNzsKICAgICAgICAgICAgcGFkZGluZzogMCAxNXB4OyBoZWlnaHQ6IDYwcHg7IGN1cnNvcjogcG9pbnRlcjsgZm9udC13ZWlnaHQ6IDYwMDsgZm9udC1zaXplOiAwLjk1cmVtOwogICAgICAgICAgICB0cmFuc2l0aW9uOiBhbGwgMC4yczsgYm9yZGVyLWJvdHRvbTogNHB4IHNvbGlkIHRyYW5zcGFyZW50OwogICAgICAgIH0KICAgICAgICAudGFiLWJ0bi5hY3RpdmUgeyBjb2xvcjogd2hpdGU7IGJvcmRlci1ib3R0b20tY29sb3I6IHZhcigtLXNlY29uZGFyeSk7IGJhY2tncm91bmQ6IHJnYmEoMCwwLDAsMC4xKTsgfQoKICAgICAgICAvKiAtLS0gTEFZT1VUIC0tLSAqLwogICAgICAgIG1haW4geyBmbGV4OiAxOyBvdmVyZmxvdzogaGlkZGVuOyBwb3NpdGlvbjogcmVsYXRpdmU7IH0KICAgICAgICAudmlldy1zZWN0aW9uIHsKICAgICAgICAgICAgcG9zaXRpb246IGFic29sdXRlOyB0b3A6IDA7IGxlZnQ6IDA7IHJpZ2h0OiAwOyBib3R0b206IDA7CiAgICAgICAgICAgIHBhZGRpbmc6IDIwcHg7IG92ZXJmbG93LXk6IGF1dG87IGRpc3BsYXk6IG5vbmU7CiAgICAgICAgfQogICAgICAgIC52aWV3LXNlY3Rpb24uYWN0aXZlIHsgZGlzcGxheTogYmxvY2s7IH0KCiAgICAgICAgLyogLS0tIFVJIENPTVBPTkVOVFMgLS0tICovCiAgICAgICAgLmNhcmQgeyBiYWNrZ3JvdW5kOiB3aGl0ZTsgcGFkZGluZzogMjBweDsgYm9yZGVyLXJhZGl1czogOHB4OyBib3gtc2hhZG93OiAwIDJweCA1cHggcmdiYSgwLDAsMCwwLjA1KTsgbWFyZ2luLWJvdHRvbTogMjBweDsgfQogICAgICAgIHNlbGVjdCwgaW5wdXRbdHlwZT10ZXh0XSwgaW5wdXRbdHlwZT1udW1iZXJdLCBpbnB1dFt0eXBlPXRpbWVdIHsgcGFkZGluZzogOHB4OyBib3JkZXI6IDFweCBzb2xpZCAjZGRkOyBib3JkZXItcmFkaXVzOiA0cHg7IH0KICAgICAgICAuYnRuIHsgYm9yZGVyOiBub25lOyBwYWRkaW5nOiA4cHggMTZweDsgYm9yZGVyLXJhZGl1czogNHB4OyBjdXJzb3I6IHBvaW50ZXI7IGZvbnQtd2VpZ2h0OiBib2xkOyB9CiAgICAgICAgLmJ0bi1wcmltYXJ5IHsgYmFja2dyb3VuZDogdmFyKC0tc2Vjb25kYXJ5KTsgY29sb3I6IHdoaXRlOyB9CiAgICAgICAgLmJ0bi1kYW5nZXIgeyBiYWNrZ3JvdW5kOiB2YXIoLS1hY2NlbnQpOyBjb2xvcjogd2hpdGU7IH0KICAgICAgICAKICAgICAgICAvKiAtLS0gTUVOVSAxIDogREFTSEJPQVJEIC0tLSAqLwogICAgICAgIC5pbXBvcnQtaGVhZGVyIHsgYmFja2dyb3VuZDogd2hpdGU7IHBhZGRpbmc6IDIwcHg7IGJvcmRlci1yYWRpdXM6IDhweDsgbWFyZ2luLWJvdHRvbTogMjBweDsgZGlzcGxheTogZmxleDsganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOyBhbGlnbi1pdGVtczogY2VudGVyOyBib3gtc2hhZG93OiAwIDJweCA1cHggcmdiYSgwLDAsMCwwLjA1KTsgfQogICAgICAgIC5kYXNoYm9hcmQtZ3JpZCB7IGRpc3BsYXk6IGdyaWQ7IGdyaWQtdGVtcGxhdGUtY29sdW1uczogcmVwZWF0KGF1dG8tZmlsbCwgbWlubWF4KDM1MHB4LCAxZnIpKTsgZ2FwOiAyMHB4OyB9CiAgICAgICAgLmFlZC1zdW1tYXJ5LWNhcmQgeyBiYWNrZ3JvdW5kOiB3aGl0ZTsgYm9yZGVyLXJhZGl1czogMTBweDsgb3ZlcmZsb3c6IGhpZGRlbjsgYm94LXNoYWRvdzogMCAzcHggNnB4IHJnYmEoMCwwLDAsMC4xKTsgYm9yZGVyLXRvcDogNXB4IHNvbGlkIHZhcigtLXNlY29uZGFyeSk7IGJyZWFrLWluc2lkZTogYXZvaWQ7IH0KICAgICAgICAuY2FyZC1oZWFkZXIgeyBwYWRkaW5nOiAxNXB4OyBib3JkZXItYm90dG9tOiAxcHggc29saWQgI2VlZTsgZGlzcGxheTogZmxleDsganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOyBhbGlnbi1pdGVtczogY2VudGVyOyBiYWNrZ3JvdW5kOiAjZjlmOWY5OyB9CiAgICAgICAgLmNhcmQtYm9keSB7IHBhZGRpbmc6IDE1cHg7IGZvbnQtc2l6ZTogMC45cmVtOyB9CiAgICAgICAgLnN0YXQtcm93IHsgZGlzcGxheTogZmxleDsganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOyBtYXJnaW4tYm90dG9tOiA4cHg7IHBhZGRpbmctYm90dG9tOiA4cHg7IGJvcmRlci1ib3R0b206IDFweCBkYXNoZWQgI2VlZTsgfQogICAgICAgIC5jb25zdHJhaW50cy1ib3ggeyBtYXJnaW4tdG9wOiAxMHB4OyBiYWNrZ3JvdW5kOiAjZmZmNWY1OyBjb2xvcjogI2MwMzkyYjsgcGFkZGluZzogOHB4OyBib3JkZXItcmFkaXVzOiA0cHg7IGZvbnQtc2l6ZTogMC44NXJlbTsgfQoKICAgICAgICAvKiBCYWRnZSBwb3VyIHF1b3RpdMOpIG5vbi1zdGFuZGFyZCAqLwogICAgICAgIC5iYWRnZS1jdXN0b20geyBiYWNrZ3JvdW5kOiAjZTc0YzNjICFpbXBvcnRhbnQ7IH0KICAgICAgICAuYmFkZ2Utc3RhbmRhcmQgeyBiYWNrZ3JvdW5kOiB2YXIoLS1zZWNvbmRhcnkpOyB9CgogICAgICAgIC8qIC0tLSBNRU5VIDIgOiBQTEFOTklORyAtLS0gKi8KICAgICAgICAucGxhbm5lci10b29sYmFyIHsKICAgICAgICAgICAgYmFja2dyb3VuZDogd2hpdGU7IHBhZGRpbmc6IDEwcHggMTVweDsgYm9yZGVyLXJhZGl1czogOHB4OyBtYXJnaW4tYm90dG9tOiAxMHB4OwogICAgICAgICAgICBkaXNwbGF5OiBmbGV4OyBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47IGFsaWduLWl0ZW1zOiBjZW50ZXI7IGdhcDogMTBweDsKICAgICAgICAgICAgYm94LXNoYWRvdzogMCAxcHggM3B4IHJnYmEoMCwwLDAsMC4xKTsgZmxleC13cmFwOiB3cmFwOwogICAgICAgIH0KICAgICAgICAKICAgICAgICAucGFsZXR0ZSB7IGRpc3BsYXk6IGZsZXg7IGdhcDogOHB4OyBmbGV4LXdyYXA6IHdyYXA7IGFsaWduLWl0ZW1zOiBjZW50ZXI7IH0KICAgICAgICAucGFsZXR0ZS1idG4gewogICAgICAgICAgICBwYWRkaW5nOiA4cHggMTJweDsgYm9yZGVyLXJhZGl1czogNHB4OyBjdXJzb3I6IHBvaW50ZXI7IGNvbG9yOiB3aGl0ZTsgZm9udC1zaXplOiAwLjg1cmVtOyBmb250LXdlaWdodDogYm9sZDsKICAgICAgICAgICAgYm9yZGVyOiAycHggc29saWQgd2hpdGU7IGJveC1zaGFkb3c6IDAgMnB4IDRweCByZ2JhKDAsMCwwLDAuMSk7IHRleHQtc2hhZG93OiAwIDFweCAxcHggcmdiYSgwLDAsMCwwLjIpOwogICAgICAgIH0KICAgICAgICAucGFsZXR0ZS1idG46aG92ZXIgeyB0cmFuc2Zvcm06IHNjYWxlKDEuMDUpOyB9CiAgICAgICAgLnBhbGV0dGUtYnRuLnNlbGVjdGVkIHsgYm9yZGVyLWNvbG9yOiAjMzMzOyB0cmFuc2Zvcm06IHNjYWxlKDEuMSk7IGJveC1zaGFkb3c6IDAgNHB4IDhweCByZ2JhKDAsMCwwLDAuMik7IH0KCiAgICAgICAgLyogQ09VTEVVUlMgKi8KICAgICAgICAuYmctZ3JpbGxlIHsgYmFja2dyb3VuZC1jb2xvcjogI2ZmMDBmZjsgfSAKICAgICAgICAuYmctYWRtaW4geyBiYWNrZ3JvdW5kLWNvbG9yOiAjMDBiODk0OyB9IAogICAgICAgIC5iZy1ldHVkZSB7IGJhY2tncm91bmQtY29sb3I6ICM4ZTQ0YWQ7IH0gCiAgICAgICAgLmJnLXNlbGYgeyBiYWNrZ3JvdW5kLWNvbG9yOiAjZTY3ZTIyOyB9IAogICAgICAgIC5iZy1jb3Vsb2lycyB7IGJhY2tncm91bmQtY29sb3I6ICNmMWM0MGY7IGNvbG9yOiAjMzMzOyB0ZXh0LXNoYWRvdzogbm9uZTsgfQogICAgICAgIC5iZy1jb3VyIHsgYmFja2dyb3VuZC1jb2xvcjogI2Q2MzAzMTsgfSAKICAgICAgICAuYmctc3VpdmkgeyBiYWNrZ3JvdW5kLWNvbG9yOiAjMjdhZTYwOyB9IAogICAgICAgIC5iZy1lcmFzZXIgeyBiYWNrZ3JvdW5kLWNvbG9yOiAjZGZlNmU5OyBjb2xvcjogIzYzNmU3MjsgdGV4dC1zaGFkb3c6IG5vbmU7IGJvcmRlcjogMXB4IHNvbGlkICNiMmJlYzM7IH0KCiAgICAgICAgLyogU2VydmljZXMgZHluYW1pcXVlcyAqLwogICAgICAgIC5idG4tYWRkLXNlcnZpY2UgeyAKICAgICAgICAgICAgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KDEzNWRlZywgIzY2N2VlYSAwJSwgIzc2NGJhMiAxMDAlKTsgCiAgICAgICAgICAgIGJvcmRlcjogMnB4IGRhc2hlZCB3aGl0ZTsgCiAgICAgICAgICAgIGZvbnQtc2l6ZTogMS4ycmVtOyAKICAgICAgICAgICAgcGFkZGluZzogOHB4IDE0cHg7CiAgICAgICAgfQogICAgICAgIC5idG4tYWRkLXNlcnZpY2U6aG92ZXIgeyB0cmFuc2Zvcm06IHNjYWxlKDEuMSk7IH0KICAgICAgICAKICAgICAgICAuc2VydmljZS1kZWxldGUgeyAKICAgICAgICAgICAgcG9zaXRpb246IGFic29sdXRlOyB0b3A6IC02cHg7IHJpZ2h0OiAtNnB4OyAKICAgICAgICAgICAgYmFja2dyb3VuZDogI2U3NGMzYzsgY29sb3I6IHdoaXRlOyAKICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNTAlOyB3aWR0aDogMTZweDsgaGVpZ2h0OiAxNnB4OyAKICAgICAgICAgICAgZm9udC1zaXplOiAxMHB4OyBjdXJzb3I6IHBvaW50ZXI7IAogICAgICAgICAgICBkaXNwbGF5OiBub25lOyBhbGlnbi1pdGVtczogY2VudGVyOyBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsKICAgICAgICAgICAgYm9yZGVyOiBub25lOyBsaW5lLWhlaWdodDogMTsKICAgICAgICB9CiAgICAgICAgLnBhbGV0dGUtYnRuLXdyYXBwZXIgeyBwb3NpdGlvbjogcmVsYXRpdmU7IGRpc3BsYXk6IGlubGluZS1ibG9jazsgfQogICAgICAgIC5wYWxldHRlLWJ0bi13cmFwcGVyOmhvdmVyIC5zZXJ2aWNlLWRlbGV0ZSB7IGRpc3BsYXk6IGZsZXg7IH0KICAgICAgICAKICAgICAgICAvKiBNb2RhbCBwb3VyIGFqb3V0ZXIgdW4gc2VydmljZSBldCBjb25maWcgKi8KICAgICAgICAubW9kYWwtb3ZlcmxheSB7CiAgICAgICAgICAgIHBvc2l0aW9uOiBmaXhlZDsgdG9wOiAwOyBsZWZ0OiAwOyByaWdodDogMDsgYm90dG9tOiAwOwogICAgICAgICAgICBiYWNrZ3JvdW5kOiByZ2JhKDAsMCwwLDAuNSk7IGRpc3BsYXk6IG5vbmU7IAogICAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyOyBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsgei1pbmRleDogMTAwMDsKICAgICAgICB9CiAgICAgICAgLm1vZGFsLW92ZXJsYXkuYWN0aXZlIHsgZGlzcGxheTogZmxleDsgfQogICAgICAgIC5tb2RhbC1ib3ggewogICAgICAgICAgICBiYWNrZ3JvdW5kOiB3aGl0ZTsgcGFkZGluZzogMjVweDsgYm9yZGVyLXJhZGl1czogMTJweDsKICAgICAgICAgICAgYm94LXNoYWRvdzogMCAxMHB4IDQwcHggcmdiYSgwLDAsMCwwLjMpOyBtaW4td2lkdGg6IDM1MHB4OwogICAgICAgICAgICBtYXgtd2lkdGg6IDUwMHB4OwogICAgICAgIH0KICAgICAgICAubW9kYWwtYm94IGgzIHsgbWFyZ2luLXRvcDogMDsgY29sb3I6IHZhcigtLXByaW1hcnkpOyBib3JkZXItYm90dG9tOiAycHggc29saWQgdmFyKC0tc2Vjb25kYXJ5KTsgcGFkZGluZy1ib3R0b206IDEwcHg7IH0KICAgICAgICAubW9kYWwtYm94IGxhYmVsIHsgZGlzcGxheTogYmxvY2s7IG1hcmdpbi1ib3R0b206IDVweDsgZm9udC13ZWlnaHQ6IGJvbGQ7IGNvbG9yOiAjNTU1OyB9CiAgICAgICAgLm1vZGFsLWJveCBpbnB1dFt0eXBlPSJ0ZXh0Il0sIC5tb2RhbC1ib3ggaW5wdXRbdHlwZT0ibnVtYmVyIl0geyB3aWR0aDogMTAwJTsgcGFkZGluZzogMTBweDsgbWFyZ2luLWJvdHRvbTogMTVweDsgYm94LXNpemluZzogYm9yZGVyLWJveDsgfQogICAgICAgIC5tb2RhbC1ib3ggaW5wdXRbdHlwZT0iY29sb3IiXSB7IHdpZHRoOiAxMDAlOyBoZWlnaHQ6IDUwcHg7IHBhZGRpbmc6IDA7IGJvcmRlcjogbm9uZTsgY3Vyc29yOiBwb2ludGVyOyBtYXJnaW4tYm90dG9tOiAxNXB4OyB9CiAgICAgICAgLm1vZGFsLWFjdGlvbnMgeyBkaXNwbGF5OiBmbGV4OyBnYXA6IDEwcHg7IGp1c3RpZnktY29udGVudDogZmxleC1lbmQ7IG1hcmdpbi10b3A6IDIwcHg7IH0KICAgICAgICAubW9kYWwtYWN0aW9ucyBidXR0b24geyBwYWRkaW5nOiAxMHB4IDIwcHg7IGJvcmRlcjogbm9uZTsgYm9yZGVyLXJhZGl1czogNnB4OyBjdXJzb3I6IHBvaW50ZXI7IGZvbnQtd2VpZ2h0OiBib2xkOyB9CiAgICAgICAgLmJ0bi1jYW5jZWwgeyBiYWNrZ3JvdW5kOiAjYmRjM2M3OyBjb2xvcjogIzJjM2U1MDsgfQogICAgICAgIC5idG4tY29uZmlybSB7IGJhY2tncm91bmQ6IHZhcigtLXNlY29uZGFyeSk7IGNvbG9yOiB3aGl0ZTsgfQogICAgICAgIC5jb2xvci1wcmVzZXRzIHsgZGlzcGxheTogZmxleDsgZ2FwOiA4cHg7IGZsZXgtd3JhcDogd3JhcDsgbWFyZ2luLWJvdHRvbTogMTVweDsgfQogICAgICAgIC5jb2xvci1wcmVzZXQgeyAKICAgICAgICAgICAgd2lkdGg6IDMwcHg7IGhlaWdodDogMzBweDsgYm9yZGVyLXJhZGl1czogNnB4OyBjdXJzb3I6IHBvaW50ZXI7IAogICAgICAgICAgICBib3JkZXI6IDJweCBzb2xpZCB0cmFuc3BhcmVudDsgdHJhbnNpdGlvbjogMC4yczsKICAgICAgICB9CiAgICAgICAgLmNvbG9yLXByZXNldDpob3ZlciB7IHRyYW5zZm9ybTogc2NhbGUoMS4xKTsgYm9yZGVyLWNvbG9yOiAjMzMzOyB9CiAgICAgICAgLnByZXZpZXctYnRuIHsgCiAgICAgICAgICAgIHBhZGRpbmc6IDEwcHggMjBweDsgYm9yZGVyLXJhZGl1czogNnB4OyBjb2xvcjogd2hpdGU7IGZvbnQtd2VpZ2h0OiBib2xkOyAKICAgICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyOyBtYXJnaW46IDE1cHggMDsgdGV4dC10cmFuc2Zvcm06IHVwcGVyY2FzZTsKICAgICAgICB9CgogICAgICAgIC8qIExpc3RlIGRlIHNsb3RzIHBvdXIgbGEgY29uZmlnICovCiAgICAgICAgLnNsb3QtbGlzdCB7CiAgICAgICAgICAgIG1heC1oZWlnaHQ6IDMwMHB4OyBvdmVyZmxvdy15OiBhdXRvOyBib3JkZXI6IDFweCBzb2xpZCAjZWVlOyBib3JkZXItcmFkaXVzOiA0cHg7IHBhZGRpbmc6IDEwcHg7IG1hcmdpbi1ib3R0b206IDE1cHg7CiAgICAgICAgfQogICAgICAgIC5zbG90LWl0ZW0gewogICAgICAgICAgICBkaXNwbGF5OiBmbGV4OyBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47IGFsaWduLWl0ZW1zOiBjZW50ZXI7IAogICAgICAgICAgICBwYWRkaW5nOiA4cHg7IGJhY2tncm91bmQ6ICNmOWY5Zjk7IG1hcmdpbi1ib3R0b206IDVweDsgYm9yZGVyLXJhZGl1czogNHB4OyBib3JkZXItbGVmdDogM3B4IHNvbGlkIHZhcigtLXNlY29uZGFyeSk7CiAgICAgICAgfQogICAgICAgIC5zbG90LWlucHV0cyB7IGRpc3BsYXk6IGZsZXg7IGdhcDogMTBweDsgbWFyZ2luLWJvdHRvbTogMTBweDsgYWxpZ24taXRlbXM6IGZsZXgtZW5kOyB9CgogICAgICAgIC5lZHQtY29udGFpbmVyIHsgYmFja2dyb3VuZDogd2hpdGU7IHBhZGRpbmc6IDE1cHg7IGJvcmRlci1yYWRpdXM6IDhweDsgb3ZlcmZsb3cteDogYXV0bzsgbWluLWhlaWdodDogNTAwcHg7IH0KICAgICAgICAKICAgICAgICAvKiBUQUJMRUFVIFNUQUJJTElTw4kgKi8KICAgICAgICAuZWR0LXRhYmxlIHsgd2lkdGg6IDEwMCU7IGJvcmRlci1jb2xsYXBzZTogY29sbGFwc2U7IHRhYmxlLWxheW91dDogZml4ZWQ7IH0KICAgICAgICAuZWR0LXRhYmxlIHRoIHsgYmFja2dyb3VuZDogdmFyKC0tcHJpbWFyeSk7IGNvbG9yOiB3aGl0ZTsgcGFkZGluZzogMTBweDsgdGV4dC1hbGlnbjogY2VudGVyOyBib3JkZXI6IDFweCBzb2xpZCAjMzQ0OTVlOyB9CiAgICAgICAgLmVkdC10YWJsZSB0ZCB7IAogICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCAjY2NjOyBoZWlnaHQ6IDQwcHg7IHdpZHRoOiAxOCU7IHBhZGRpbmc6IDA7IHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7IG92ZXJmbG93OiBoaWRkZW47CiAgICAgICAgfQogICAgICAgIC5lZHQtdGFibGUgdGQudGltZS1jb2wgeyAKICAgICAgICAgICAgYmFja2dyb3VuZDogI2YxZjJmNjsgY29sb3I6ICMyYzNlNTA7IGZvbnQtd2VpZ2h0OiBib2xkOyB3aWR0aDogOTBweCAhaW1wb3J0YW50OyBib3JkZXItcmlnaHQ6IDJweCBzb2xpZCAjYmRjM2M3OyAKICAgICAgICAgICAgZm9udC1zaXplOiAwLjc1cmVtOyB0ZXh0LWFsaWduOiBjZW50ZXI7CiAgICAgICAgfQoKICAgICAgICAuY2VsbC1jb250ZW50IHsKICAgICAgICAgICAgd2lkdGg6IDEwMCU7IGhlaWdodDogMTAwJTsgZGlzcGxheTogZmxleDsgYWxpZ24taXRlbXM6IGNlbnRlcjsganVzdGlmeS1jb250ZW50OiBjZW50ZXI7CiAgICAgICAgICAgIGZvbnQtc2l6ZTogMC43NXJlbTsgZm9udC13ZWlnaHQ6IDgwMDsgdGV4dC10cmFuc2Zvcm06IHVwcGVyY2FzZTsgCiAgICAgICAgICAgIHdoaXRlLXNwYWNlOiBub3dyYXA7IG92ZXJmbG93OiBoaWRkZW47IHRleHQtb3ZlcmZsb3c6IGVsbGlwc2lzOyBjb2xvcjogd2hpdGU7CiAgICAgICAgfQogICAgICAgIC5jZWxsLWluYWN0aXZlIHsgYmFja2dyb3VuZDogI2Y5ZjlmOTsgY3Vyc29yOiBub3QtYWxsb3dlZDsgfQogICAgICAgIC5jZWxsLWJsb2NrZWQgeyBiYWNrZ3JvdW5kOiByZXBlYXRpbmctbGluZWFyLWdyYWRpZW50KDQ1ZGVnLCAjZTBlMGUwLCAjZTBlMGUwIDEwcHgsICNlY2YwZjEgMTBweCwgI2VjZjBmMSAyMHB4KTsgaGVpZ2h0OiAxMDAlOyB9CgogICAgICAgIC8qIC0tLSBNRU5VIDMgOiBHRVNUSU9OIC0tLSAqLwogICAgICAgIC5nZXN0aW9uLWdyaWQgeyBkaXNwbGF5OiBncmlkOyBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IDFmciAyZnI7IGdhcDogMjBweDsgfQogICAgICAgIC5zdGF0cy1yb3cgeyBkaXNwbGF5OiBmbGV4OyBnYXA6IDE1cHg7IG1hcmdpbi1ib3R0b206IDIwcHg7IH0KICAgICAgICAuYmFsYW5jZS1ib3ggeyAKICAgICAgICAgICAgZmxleDogMTsgdGV4dC1hbGlnbjogY2VudGVyOyBwYWRkaW5nOiAyMHB4OyBiYWNrZ3JvdW5kOiB2YXIoLS1wcmltYXJ5KTsgY29sb3I6IHdoaXRlOyBib3JkZXItcmFkaXVzOiA4cHg7IAogICAgICAgICAgICBkaXNwbGF5OiBmbGV4OyBmbGV4LWRpcmVjdGlvbjogY29sdW1uOyBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsKICAgICAgICB9CiAgICAgICAgLmJhbGFuY2UtYm94LnNlY29uZGFyeSB7IGJhY2tncm91bmQ6ICM4ZTQ0YWQ7IH0KICAgICAgICAuYmFsYW5jZS1hbW91bnQgeyBmb250LXNpemU6IDJyZW07IGZvbnQtd2VpZ2h0OiBib2xkOyBtYXJnaW46IDEwcHggMDsgfQogICAgICAgIC5oaXN0b3J5LXRhYmxlIHsgd2lkdGg6IDEwMCU7IGJvcmRlci1jb2xsYXBzZTogY29sbGFwc2U7IH0KICAgICAgICAuaGlzdG9yeS10YWJsZSB0aCB7IHRleHQtYWxpZ246IGxlZnQ7IHBhZGRpbmc6IDEwcHg7IGJvcmRlci1ib3R0b206IDJweCBzb2xpZCAjZWVlOyBiYWNrZ3JvdW5kOiAjZjlmOWY5OyB9CiAgICAgICAgLmhpc3RvcnktdGFibGUgdGQgeyBwYWRkaW5nOiAxMHB4OyBib3JkZXItYm90dG9tOiAxcHggc29saWQgI2VlZTsgfQoKICAgICAgICAvKiAtLS0gTUVOVSA0IDogUkVQQVJUSVRJT04gKFFVSSBGQUlUIFFVT0kpIC0tLSAqLwogICAgICAgIC5yZXBhcnRpdGlvbi10b29sYmFyIHsKICAgICAgICAgICAgYmFja2dyb3VuZDogd2hpdGU7IHBhZGRpbmc6IDE1cHg7IGJvcmRlci1yYWRpdXM6IDhweDsgbWFyZ2luLWJvdHRvbTogMTVweDsKICAgICAgICAgICAgZGlzcGxheTogZmxleDsganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOyBhbGlnbi1pdGVtczogY2VudGVyOyBib3gtc2hhZG93OiAwIDFweCAzcHggcmdiYSgwLDAsMCwwLjEpOwogICAgICAgIH0KICAgICAgICAucmVwYXJ0aXRpb24tdGFibGUgeyB3aWR0aDogMTAwJTsgYm9yZGVyLWNvbGxhcHNlOiBjb2xsYXBzZTsgdGFibGUtbGF5b3V0OiBhdXRvOyB9CiAgICAgICAgLnJlcGFydGl0aW9uLXRhYmxlIHRoIHsgYmFja2dyb3VuZDogdmFyKC0tcHJpbWFyeSk7IGNvbG9yOiB3aGl0ZTsgcGFkZGluZzogMTJweDsgYm9yZGVyOiAxcHggc29saWQgIzM0NDk1ZTsgZm9udC1zaXplOiAwLjlyZW07IHBvc2l0aW9uOiBzdGlja3k7IHRvcDogMDsgfQogICAgICAgIC5yZXBhcnRpdGlvbi10YWJsZSB0ZCB7IGJvcmRlcjogMXB4IHNvbGlkICNjY2M7IHBhZGRpbmc6IDhweDsgdmVydGljYWwtYWxpZ246IG1pZGRsZTsgYmFja2dyb3VuZDogd2hpdGU7IGZvbnQtc2l6ZTogMC44NXJlbTsgaGVpZ2h0OiBhdXRvOyB9CiAgICAgICAgLnJlcGFydGl0aW9uLXRhYmxlIHRyOm50aC1jaGlsZChldmVuKSB0ZCB7IGJhY2tncm91bmQtY29sb3I6ICNmOGY5ZmE7IH0KICAgICAgICAuYWdlbnQtdGFnIHsKICAgICAgICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrOyBwYWRkaW5nOiAzcHggOHB4OyBtYXJnaW46IDJweDsKICAgICAgICAgICAgYmFja2dyb3VuZDogI2VjZjBmMTsgYm9yZGVyLXJhZGl1czogMTJweDsgYm9yZGVyOiAxcHggc29saWQgI2JkYzNjNzsKICAgICAgICAgICAgZm9udC13ZWlnaHQ6IDYwMDsgY29sb3I6ICMyYzNlNTA7IGZvbnQtc2l6ZTogMC44cmVtOwogICAgICAgIH0KCiAgICAgICAgLyogLS0tIE1FTlUgNSA6IEVOIERJUkVDVCAoTk9VVkVBVSkgLS0tICovCiAgICAgICAgLmxpdmUtaGVhZGVyIHsKICAgICAgICAgICAgYmFja2dyb3VuZDogIzJjM2U1MDsgY29sb3I6IHdoaXRlOyBwYWRkaW5nOiAzMHB4OyBib3JkZXItcmFkaXVzOiAxMHB4OwogICAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7IG1hcmdpbi1ib3R0b206IDMwcHg7IGJveC1zaGFkb3c6IDAgNXB4IDE1cHggcmdiYSgwLDAsMCwwLjIpOwogICAgICAgIH0KICAgICAgICAuY2xvY2stdGltZSB7IGZvbnQtc2l6ZTogM3JlbTsgZm9udC13ZWlnaHQ6IDgwMDsgZm9udC1mYW1pbHk6ICdTZWdvZSBVSSBNb25vJywgbW9ub3NwYWNlOyB9CiAgICAgICAgLmNsb2NrLWRheSB7IGZvbnQtc2l6ZTogMS41cmVtOyBjb2xvcjogIzM0OThkYjsgbWFyZ2luLWJvdHRvbTogNXB4OyB0ZXh0LXRyYW5zZm9ybTogdXBwZXJjYXNlOyBsZXR0ZXItc3BhY2luZzogMnB4OyB9CiAgICAgICAgCiAgICAgICAgLmxpdmUtZ3JpZCB7IGRpc3BsYXk6IGdyaWQ7IGdyaWQtdGVtcGxhdGUtY29sdW1uczogcmVwZWF0KGF1dG8tZmlsbCwgbWlubWF4KDI4MHB4LCAxZnIpKTsgZ2FwOiAyMHB4OyB9CiAgICAgICAgLmxpdmUtY2FyZCB7CiAgICAgICAgICAgIGJhY2tncm91bmQ6IHdoaXRlOyBib3JkZXItcmFkaXVzOiAxMHB4OyBvdmVyZmxvdzogaGlkZGVuOwogICAgICAgICAgICBib3gtc2hhZG93OiAwIDNweCA2cHggcmdiYSgwLDAsMCwwLjEpOwogICAgICAgICAgICB0cmFuc2l0aW9uOiB0cmFuc2Zvcm0gMC4yczsKICAgICAgICAgICAgYm9yZGVyLWxlZnQ6IDVweCBzb2xpZCAjY2NjOwogICAgICAgIH0KICAgICAgICAubGl2ZS1jYXJkLmFjdGl2ZSB7IHRyYW5zZm9ybTogdHJhbnNsYXRlWSgtNXB4KTsgYm94LXNoYWRvdzogMCA4cHggMTVweCByZ2JhKDAsMCwwLDAuMTUpOyBib3JkZXItbGVmdC1jb2xvcjogdmFyKC0tc3VjY2Vzcyk7IH0KICAgICAgICAubGl2ZS1jYXJkLWJvZHkgeyBwYWRkaW5nOiAyMHB4OyB9CiAgICAgICAgLmxpdmUtYWdlbnQtbmFtZSB7IGZvbnQtc2l6ZTogMS4ycmVtOyBmb250LXdlaWdodDogYm9sZDsgbWFyZ2luLWJvdHRvbTogMTBweDsgY29sb3I6IHZhcigtLXByaW1hcnkpOyB9CiAgICAgICAgLmxpdmUtc3RhdHVzIHsgCiAgICAgICAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jazsgcGFkZGluZzogNXB4IDEwcHg7IGJvcmRlci1yYWRpdXM6IDRweDsgCiAgICAgICAgICAgIGZvbnQtc2l6ZTogMC45cmVtOyBmb250LXdlaWdodDogYm9sZDsgdGV4dC10cmFuc2Zvcm06IHVwcGVyY2FzZTsKICAgICAgICB9CiAgICAgICAgLnNlY3Rpb24tdGl0bGUgeyBtYXJnaW46IDMwcHggMCAxNXB4IDA7IGNvbG9yOiAjN2Y4YzhkOyBmb250LXNpemU6IDFyZW07IGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjY2NjOyBwYWRkaW5nLWJvdHRvbTogNXB4OyB9CgogICAgICAgIC8qIElNUE9SVCBJTkZPICovCiAgICAgICAgLmltcG9ydC1pbmZvIHsgCiAgICAgICAgICAgIGJhY2tncm91bmQ6ICNlOGY0ZmQ7IGJvcmRlcjogMXB4IHNvbGlkICMzNDk4ZGI7IGJvcmRlci1yYWRpdXM6IDhweDsgCiAgICAgICAgICAgIHBhZGRpbmc6IDE1cHg7IG1hcmdpbi1ib3R0b206IDIwcHg7IGZvbnQtc2l6ZTogMC45cmVtOyAKICAgICAgICB9CiAgICAgICAgLmltcG9ydC1pbmZvIHN0cm9uZyB7IGNvbG9yOiB2YXIoLS1wcmltYXJ5KTsgfQogICAgICAgIC5xdW90aXRlLWxpc3QgeyBkaXNwbGF5OiBmbGV4OyBnYXA6IDE1cHg7IGZsZXgtd3JhcDogd3JhcDsgbWFyZ2luLXRvcDogMTBweDsgfQogICAgICAgIC5xdW90aXRlLWl0ZW0geyBiYWNrZ3JvdW5kOiB3aGl0ZTsgcGFkZGluZzogNXB4IDEwcHg7IGJvcmRlci1yYWRpdXM6IDRweDsgZm9udC1zaXplOiAwLjg1cmVtOyB9CgogICAgICAgIC8qIFpPTkVTIEQnSU1QUkVTU0lPTiAoQ2FjaMOpZXMgcGFyIGTDqWZhdXQpICovCiAgICAgICAgI2JhdGNoLXByaW50LWFyZWEsICNkYXNoYm9hcmQtcHJpbnQtYXJlYSwgI2dlc3Rpb24tcHJpbnQtYXJlYSwgI3JlcGFydGl0aW9uLXByaW50LWFyZWEgeyBkaXNwbGF5OiBub25lOyB9CgogICAgICAgIC8qIC0tLSBQUklOVCBDU1MgT1BUSU1JU8OJIFBBWVNBR0UgKExBTkRTQ0FQRSkgLS0tICovCiAgICAgICAgQG1lZGlhIHByaW50IHsKICAgICAgICAgICAgQHBhZ2UgewogICAgICAgICAgICAgICAgc2l6ZTogQTQgbGFuZHNjYXBlOwogICAgICAgICAgICAgICAgbWFyZ2luOiA1bW07IC8qIE1hcmdlcyByw6lkdWl0ZXMgcG91ciBtYXhpbWlzZXIgbCdlc3BhY2UgKi8KICAgICAgICAgICAgfQoKICAgICAgICAgICAgYm9keSB7IAogICAgICAgICAgICAgICAgLXdlYmtpdC1wcmludC1jb2xvci1hZGp1c3Q6IGV4YWN0ICFpbXBvcnRhbnQ7IAogICAgICAgICAgICAgICAgcHJpbnQtY29sb3ItYWRqdXN0OiBleGFjdCAhaW1wb3J0YW50OyAKICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6IHdoaXRlOyBtYXJnaW46IDA7IHBhZGRpbmc6IDA7IAogICAgICAgICAgICAgICAgd2lkdGg6IDEwMCU7CiAgICAgICAgICAgICAgICBmb250LWZhbWlseTogJ1NlZ29lIFVJJywgc2Fucy1zZXJpZjsKICAgICAgICAgICAgfQogICAgICAgICAgICAKICAgICAgICAgICAgbmF2LCAucGxhbm5lci10b29sYmFyLCAuaW1wb3J0LWhlYWRlciwgLm5hdi1hY3Rpb25zLCAudGFiLWJ0biwgLmltcG9ydC1pbmZvLCAucmVwYXJ0aXRpb24tdG9vbGJhciB7IGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDsgfQogICAgICAgICAgICAKICAgICAgICAgICAgYm9keTpub3QoLnByaW50aW5nLW1vZGUpIC52aWV3LXNlY3Rpb24geyBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7IH0KCiAgICAgICAgICAgIC8qIEhlYWRlciBkJ2ltcHJlc3Npb24gY29tbXVuICovCiAgICAgICAgICAgIC5wcmludC1oZWFkZXItYmF0Y2ggeyAKICAgICAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjsgCiAgICAgICAgICAgICAgICBmb250LXNpemU6IDEuMnJlbTsgCiAgICAgICAgICAgICAgICBmb250LXdlaWdodDogYm9sZDsKICAgICAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDVweDsgCiAgICAgICAgICAgICAgICBib3JkZXItYm90dG9tOiAycHggc29saWQgIzMzMzsgCiAgICAgICAgICAgICAgICBwYWRkaW5nLWJvdHRvbTogMnB4OyAKICAgICAgICAgICAgICAgIHRleHQtdHJhbnNmb3JtOiB1cHBlcmNhc2U7CiAgICAgICAgICAgICAgICBwYWdlLWJyZWFrLWFmdGVyOiBhdm9pZDsKICAgICAgICAgICAgfQogICAgICAgICAgICAKICAgICAgICAgICAgLnBhZ2UtYnJlYWsgeyBwYWdlLWJyZWFrLWFmdGVyOiBhbHdheXM7IGRpc3BsYXk6IGJsb2NrOyBoZWlnaHQ6IDFweDsgfQoKICAgICAgICAgICAgLyogTU9ERTogRGFzaGJvYXJkICovCiAgICAgICAgICAgIGJvZHkucHJpbnRpbmctZGFzaGJvYXJkIG1haW4geyBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7IH0KICAgICAgICAgICAgYm9keS5wcmludGluZy1kYXNoYm9hcmQgI2Rhc2hib2FyZC1wcmludC1hcmVhIHsgZGlzcGxheTogYmxvY2sgIWltcG9ydGFudDsgfQogICAgICAgICAgICBib2R5LnByaW50aW5nLWRhc2hib2FyZCAuZGFzaGJvYXJkLWdyaWQgeyAKICAgICAgICAgICAgICAgIGRpc3BsYXk6IGdyaWQ7IAogICAgICAgICAgICAgICAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiAxZnIgMWZyIDFmcjsgLyogMyBjb2xvbm5lcyBlbiBwYXlzYWdlICovCiAgICAgICAgICAgICAgICBnYXA6IDEwcHg7IAogICAgICAgICAgICAgICAgZm9udC1zaXplOiAwLjhyZW07CiAgICAgICAgICAgIH0KICAgICAgICAgICAgYm9keS5wcmludGluZy1kYXNoYm9hcmQgLmFlZC1zdW1tYXJ5LWNhcmQgeyBib3gtc2hhZG93OiBub25lOyBib3JkZXI6IDFweCBzb2xpZCAjY2NjOyBicmVhay1pbnNpZGU6IGF2b2lkOyB9CgogICAgICAgICAgICAvKiBNT0RFOiBFRFQgQmF0Y2ggKEFnZW50IFNldWwgb3UgVG91dCkgLSBPUFRJTUlTw4kgUEFZU0FHRSAqLwogICAgICAgICAgICBib2R5LnByaW50aW5nLWJhdGNoIG1haW4geyBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7IH0KICAgICAgICAgICAgYm9keS5wcmludGluZy1iYXRjaCAjYmF0Y2gtcHJpbnQtYXJlYSB7IGRpc3BsYXk6IGJsb2NrICFpbXBvcnRhbnQ7IHdpZHRoOiAxMDAlOyB9CiAgICAgICAgICAgIAogICAgICAgICAgICBib2R5LnByaW50aW5nLWJhdGNoIC5lZHQtdGFibGUgeyAKICAgICAgICAgICAgICAgIHdpZHRoOiAxMDAlOyAKICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMC43cmVtOyAKICAgICAgICAgICAgICAgIGJvcmRlci1jb2xsYXBzZTogY29sbGFwc2U7CiAgICAgICAgICAgICAgICB0YWJsZS1sYXlvdXQ6IGZpeGVkOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGJvZHkucHJpbnRpbmctYmF0Y2ggLmVkdC10YWJsZSB0aCB7IAogICAgICAgICAgICAgICAgcGFkZGluZzogMnB4OyAKICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNjY2MgIWltcG9ydGFudDsgCiAgICAgICAgICAgICAgICBjb2xvcjogYmxhY2sgIWltcG9ydGFudDsgCiAgICAgICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCBibGFjazsKICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMC44cmVtOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGJvZHkucHJpbnRpbmctYmF0Y2ggLmVkdC10YWJsZSB0ZCB7IAogICAgICAgICAgICAgICAgaGVpZ2h0OiAxOHB4ICFpbXBvcnRhbnQ7IC8qIEhhdXRldXIgZm9yY8OpZSB0csOocyBwZXRpdGUgcG91ciB0ZW5pciBzdXIgMjFjbSBkZSBoYXV0ICovCiAgICAgICAgICAgICAgICBwYWRkaW5nOiAwOyAKICAgICAgICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIGJsYWNrOyAKICAgICAgICAgICAgICAgIHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgYm9keS5wcmludGluZy1iYXRjaCAuY2VsbC1jb250ZW50IHsgZm9udC1zaXplOiAwLjY1cmVtOyBmb250LXdlaWdodDogYm9sZDsgfQogICAgICAgICAgICAKICAgICAgICAgICAgLyogTU9ERTogR2VzdGlvbiBGaWNoZSAtIE9QVElNSVPDiSBQQVlTQUdFICovCiAgICAgICAgICAgIGJvZHkucHJpbnRpbmctZ2VzdGlvbiBtYWluIHsgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50OyB9CiAgICAgICAgICAgIGJvZHkucHJpbnRpbmctZ2VzdGlvbiAjZ2VzdGlvbi1wcmludC1hcmVhIHsgZGlzcGxheTogYmxvY2sgIWltcG9ydGFudDsgcGFkZGluZzogMDsgfQogICAgICAgICAgICAKICAgICAgICAgICAgLyogRGlzcG9zaXRpb24gaG9yaXpvbnRhbGUgcG91ciBsYSBnZXN0aW9uICovCiAgICAgICAgICAgIGJvZHkucHJpbnRpbmctZ2VzdGlvbiAuZ2VzdGlvbi1zdGF0cy1jb250YWluZXIgewogICAgICAgICAgICAgICAgZGlzcGxheTogZmxleDsKICAgICAgICAgICAgICAgIHdpZHRoOiAxMDAlOwogICAgICAgICAgICAgICAgZ2FwOiAyMHB4OwogICAgICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogMTBweDsKICAgICAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOwogICAgICAgICAgICB9CiAgICAgICAgICAgIAogICAgICAgICAgICBib2R5LnByaW50aW5nLWdlc3Rpb24gLmJhbGFuY2UtYm94IHsgCiAgICAgICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCAjMzMzOyAKICAgICAgICAgICAgICAgIGNvbG9yOiBibGFjayAhaW1wb3J0YW50OyAKICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6IHdoaXRlICFpbXBvcnRhbnQ7IAogICAgICAgICAgICAgICAgcGFkZGluZzogNXB4IDIwcHg7IAogICAgICAgICAgICAgICAgZmxleDogMCAwIDMwMHB4OwogICAgICAgICAgICB9CiAgICAgICAgICAgIGJvZHkucHJpbnRpbmctZ2VzdGlvbiAuYmFsYW5jZS1hbW91bnQgeyBmb250LXNpemU6IDEuNHJlbTsgY29sb3I6IGJsYWNrOyBtYXJnaW46IDVweCAwOyB9CiAgICAgICAgICAgIAogICAgICAgICAgICBib2R5LnByaW50aW5nLWdlc3Rpb24gLmhpc3RvcnktdGFibGUgeyBmb250LXNpemU6IDAuOHJlbTsgd2lkdGg6IDEwMCU7IH0KICAgICAgICAgICAgYm9keS5wcmludGluZy1nZXN0aW9uIC5oaXN0b3J5LXRhYmxlIHRoLCBib2R5LnByaW50aW5nLWdlc3Rpb24gLmhpc3RvcnktdGFibGUgdGQgeyBwYWRkaW5nOiA0cHg7IGJvcmRlcjogMXB4IHNvbGlkICNjY2M7IH0KCiAgICAgICAgICAgIC8qIE1PREU6IFLDqXBhcnRpdGlvbiAtIE9QVElNSVPDiSBQQVlTQUdFICovCiAgICAgICAgICAgIGJvZHkucHJpbnRpbmctcmVwYXJ0aXRpb24gbWFpbiB7IGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDsgfQogICAgICAgICAgICBib2R5LnByaW50aW5nLXJlcGFydGl0aW9uICNyZXBhcnRpdGlvbi1wcmludC1hcmVhIHsgZGlzcGxheTogYmxvY2sgIWltcG9ydGFudDsgd2lkdGg6IDEwMCU7IHBhZGRpbmc6IDA7IH0KICAgICAgICAgICAgYm9keS5wcmludGluZy1yZXBhcnRpdGlvbiAucmVwYXJ0aXRpb24tdGFibGUgeyAKICAgICAgICAgICAgICAgIHdpZHRoOiAxMDAlOyAKICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMC42NXJlbTsgLyogUGV0aXQgcG91ciB0b3V0IGZhaXJlIHRlbmlyICovCiAgICAgICAgICAgICAgICBib3JkZXItY29sbGFwc2U6IGNvbGxhcHNlOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGJvZHkucHJpbnRpbmctcmVwYXJ0aXRpb24gLnJlcGFydGl0aW9uLXRhYmxlIHRoLCAKICAgICAgICAgICAgYm9keS5wcmludGluZy1yZXBhcnRpdGlvbiAucmVwYXJ0aXRpb24tdGFibGUgdGQgeyAKICAgICAgICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkICMwMDA7IAogICAgICAgICAgICAgICAgcGFkZGluZzogMXB4IDJweDsgCiAgICAgICAgICAgICAgICBoZWlnaHQ6IDE4cHggIWltcG9ydGFudDsgLyogSGF1dGV1ciBjb250cmFpbnRlICovCiAgICAgICAgICAgICAgICBvdmVyZmxvdzogaGlkZGVuOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGJvZHkucHJpbnRpbmctcmVwYXJ0aXRpb24gLmFnZW50LXRhZyB7IAogICAgICAgICAgICAgICAgYm9yZGVyOiBub25lOyAKICAgICAgICAgICAgICAgIHBhZGRpbmc6IDAgMXB4OyAKICAgICAgICAgICAgICAgIG1hcmdpbjogMCAxcHg7IAogICAgICAgICAgICAgICAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7IAogICAgICAgICAgICAgICAgZm9udC1zaXplOiAwLjZyZW07IAogICAgICAgICAgICAgICAgZGlzcGxheTogaW5saW5lOwogICAgICAgICAgICAgICAgbGluZS1oZWlnaHQ6IDE7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgCiAgICAgICAgICAgIC8qIEZvcmNlciBsZXMgY291bGV1cnMgaW5saW5lIMOgIHMnaW1wcmltZXIgKi8KICAgICAgICAgICAgLmNlbGwtY29udGVudCB7IAogICAgICAgICAgICAgICAgLXdlYmtpdC1wcmludC1jb2xvci1hZGp1c3Q6IGV4YWN0ICFpbXBvcnRhbnQ7IAogICAgICAgICAgICAgICAgcHJpbnQtY29sb3ItYWRqdXN0OiBleGFjdCAhaW1wb3J0YW50OyAKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIDwvc3R5bGU+CjwvaGVhZD4KPGJvZHk+Cgo8bmF2PgogICAgPGRpdiBjbGFzcz0ibmF2LWxlZnQiPgogICAgICAgIDxkaXYgY2xhc3M9Im5hdi10aXRsZSI+CiAgICAgICAgICAgIEFFRCBQSUxPVEUKICAgICAgICAgICAgPHNwYW4gY2xhc3M9Im5hdi1zdWJ0aXRsZSI+QnkgU3lsdsOocmUgTWljaGVsZXQgLSB2Mi45IChBZGFwdMOpZSBDU1YpPC9zcGFuPgogICAgICAgIDwvZGl2PgogICAgICAgIDxkaXYgY2xhc3M9Im5hdi1hY3Rpb25zIj4KICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYnRuLW5hdi1hY3Rpb24iIG9uY2xpY2s9ImRvd25sb2FkSlNPTigpIiB0aXRsZT0iU2F1dmVnYXJkZXIiPjxpIGNsYXNzPSJmYXMgZmEtZG93bmxvYWQiPjwvaT4gU2F1dmVnYXJkZXI8L2J1dHRvbj4KICAgICAgICAgICAgPGxhYmVsIGNsYXNzPSJidG4tbmF2LWFjdGlvbiIgdGl0bGU9IlJlc3RhdXJlciI+CiAgICAgICAgICAgICAgICA8aSBjbGFzcz0iZmFzIGZhLXVwbG9hZCI+PC9pPiBSZXN0YXVyZXIKICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJmaWxlIiBpZD0ianNvbklucHV0IiBhY2NlcHQ9Ii5qc29uIiBzdHlsZT0iZGlzcGxheTpub25lIiBvbmNoYW5nZT0iaW1wb3J0SlNPTih0aGlzKSI+CiAgICAgICAgICAgIDwvbGFiZWw+CiAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImJ0bi1uYXYtYWN0aW9uIGJ0bi1kYW5nZXItbmF2IiBvbmNsaWNrPSJyZXNldEFsbERhdGEoKSIgdGl0bGU9IkVmZmFjZXIgdG91dCBldCByZWNvbW1lbmNlciI+CiAgICAgICAgICAgICAgICA8aSBjbGFzcz0iZmFzIGZhLXRyYXNoIj48L2k+IFRvdXQgRWZmYWNlcgogICAgICAgICAgICA8L2J1dHRvbj4KICAgICAgICA8L2Rpdj4KICAgIDwvZGl2PgogICAgPGRpdiBjbGFzcz0ibmF2LXRhYnMiPgogICAgICAgIDxidXR0b24gY2xhc3M9InRhYi1idG4gYWN0aXZlIiBvbmNsaWNrPSJzd2l0Y2hUYWIoJ2ltcG9ydCcpIj4xLiBWdWUgZCdlbnNlbWJsZTwvYnV0dG9uPgogICAgICAgIDxidXR0b24gY2xhc3M9InRhYi1idG4iIG9uY2xpY2s9InN3aXRjaFRhYignY29uY2VwdGlvbicpIj4yLiBDb25jZXB0aW9uIEVEVDwvYnV0dG9uPgogICAgICAgIDxidXR0b24gY2xhc3M9InRhYi1idG4iIG9uY2xpY2s9InN3aXRjaFRhYignZ2VzdGlvbicpIj4zLiBHZXN0aW9uIFF1b3RpZGllbm5lPC9idXR0b24+CiAgICAgICAgPGJ1dHRvbiBjbGFzcz0idGFiLWJ0biIgb25jbGljaz0ic3dpdGNoVGFiKCdyZXBhcnRpdGlvbicpIj40LiBRdWkgZmFpdCBxdW9pID88L2J1dHRvbj4KICAgICAgICA8YnV0dG9uIGNsYXNzPSJ0YWItYnRuIiBvbmNsaWNrPSJzd2l0Y2hUYWIoJ2xpdmUnKSI+NS4gRW4gRGlyZWN0PC9idXR0b24+CiAgICA8L2Rpdj4KPC9uYXY+Cgo8bWFpbj4KICAgIDxzZWN0aW9uIGlkPSJ2aWV3LWltcG9ydCIgY2xhc3M9InZpZXctc2VjdGlvbiBhY3RpdmUiPgogICAgICAgIDxkaXYgY2xhc3M9ImltcG9ydC1oZWFkZXIiPgogICAgICAgICAgICA8ZGl2PgogICAgICAgICAgICAgICAgPGgyIHN0eWxlPSJtYXJnaW46MDsgYm9yZGVyOm5vbmU7IGNvbG9yOnZhcigtLXByaW1hcnkpIj5UYWJsZWF1IGRlIEJvcmQ8L2gyPgogICAgICAgICAgICAgICAgPHAgc3R5bGU9Im1hcmdpbjo1cHggMCAwIDA7IGNvbG9yOiM3ZjhjOGQ7Ij5Hw6lyZXogdm9zIGVmZmVjdGlmcyBBRUQgc2ltcGxlbWVudC48L3A+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8ZGl2IHN0eWxlPSJkaXNwbGF5OmZsZXg7IGdhcDoxMHB4OyI+CiAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9ImJ0biBidG4tcHJpbWFyeSIgc3R5bGU9ImRpc3BsYXk6aW5saW5lLWZsZXg7IGFsaWduLWl0ZW1zOmNlbnRlcjsgZ2FwOjEwcHg7Ij4KICAgICAgICAgICAgICAgICAgICA8aSBjbGFzcz0iZmFzIGZhLWZpbGUtZXhjZWwiPjwvaT4gSW1wb3J0ZXIgRXhjZWwKICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0iZmlsZSIgaWQ9ImV4Y2VsSW5wdXQiIGFjY2VwdD0iLnhsc3gsIC54bHMsIC5jc3YiIHN0eWxlPSJkaXNwbGF5Om5vbmUiIG9uY2hhbmdlPSJoYW5kbGVFeGNlbCh0aGlzKSI+CiAgICAgICAgICAgICAgICA8L2xhYmVsPgogICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYnRuIGJ0bi1wcmltYXJ5IiBvbmNsaWNrPSJwcmludERhc2hib2FyZCgpIiBzdHlsZT0iYmFja2dyb3VuZDojMzQ0OTVlOyI+CiAgICAgICAgICAgICAgICAgICAgPGkgY2xhc3M9ImZhcyBmYS1wcmludCI+PC9pPiBJbXByaW1lciBSw6ljYXAKICAgICAgICAgICAgICAgIDwvYnV0dG9uPgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICA8L2Rpdj4KICAgICAgICAKICAgICAgICA8ZGl2IGlkPSJpbXBvcnQtaW5mby1hcmVhIj48L2Rpdj4KICAgICAgICAKICAgICAgICA8ZGl2IGlkPSJkYXNoYm9hcmQtYXJlYSIgY2xhc3M9ImRhc2hib2FyZC1ncmlkIj4KICAgICAgICAgICAgPGRpdiBzdHlsZT0iZ3JpZC1jb2x1bW46IDEvLTE7IHRleHQtYWxpZ246Y2VudGVyOyBwYWRkaW5nOjUwcHg7IGNvbG9yOiNhYWE7Ij4KICAgICAgICAgICAgICAgIDxpIGNsYXNzPSJmYXMgZmEtZm9sZGVyLW9wZW4iIHN0eWxlPSJmb250LXNpemU6M3JlbTsgbWFyZ2luLWJvdHRvbToxMHB4OyI+PC9pPjxicj4KICAgICAgICAgICAgICAgIEF1Y3VuZSBkb25uw6llLiBWZXVpbGxleiBpbXBvcnRlciB1biBmaWNoaWVyIEV4Y2VsIG91IHJlc3RhdXJlciB1bmUgc2F1dmVnYXJkZS4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgPC9kaXY+CiAgICA8L3NlY3Rpb24+CgogICAgPHNlY3Rpb24gaWQ9InZpZXctY29uY2VwdGlvbiIgY2xhc3M9InZpZXctc2VjdGlvbiI+CiAgICAgICAgPGRpdiBjbGFzcz0icGxhbm5lci10b29sYmFyIj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0idG9vbC1ncm91cCI+CiAgICAgICAgICAgICAgICA8bGFiZWw+PHN0cm9uZz5BZ2VudCA6PC9zdHJvbmc+PC9sYWJlbD4KICAgICAgICAgICAgICAgIDxzZWxlY3QgaWQ9ImFlZC1zZWxlY3QtY29uY2VwdGlvbiIgb25jaGFuZ2U9ImNoYW5nZUFFRCgnY29uY2VwdGlvbicpIj4KICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSIiPi0tIFPDqWxlY3Rpb25uZXIgLS08L29wdGlvbj4KICAgICAgICAgICAgICAgIDwvc2VsZWN0PgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgCiAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImJ0biBidG4tcHJpbWFyeSIgb25jbGljaz0ib3BlbkdyaWRDb25maWcoKSIgc3R5bGU9ImJhY2tncm91bmQ6IzJjM2U1MDsgZm9udC1zaXplOjAuOHJlbTsiPgogICAgICAgICAgICAgICAgPGkgY2xhc3M9ImZhcyBmYS1jb2ciPjwvaT4gQ29uZmlnIEdyaWxsZQogICAgICAgICAgICA8L2J1dHRvbj4KCiAgICAgICAgICAgIDxkaXYgY2xhc3M9InRvb2wtZ3JvdXAiIHN0eWxlPSJiYWNrZ3JvdW5kOiNmOGY5ZmE7IHBhZGRpbmc6NXB4OyBib3JkZXItcmFkaXVzOjRweDsgYm9yZGVyOjFweCBzb2xpZCAjZWVlOyI+CiAgICAgICAgICAgICAgICA8bGFiZWwgc3R5bGU9ImZvbnQtc2l6ZTowLjhyZW07IGZvbnQtd2VpZ2h0OmJvbGQ7IGNvbG9yOnZhcigtLXByaW1hcnkpIj7wn5uP77iPIEludGVybmF0IChIKTo8L2xhYmVsPgogICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9Im51bWJlciIgaWQ9ImludGVybmF0LWhvdXJzIiBzdHlsZT0id2lkdGg6NTBweDsgcGFkZGluZzo0cHg7IHRleHQtYWxpZ246Y2VudGVyIiBtaW49IjAiIHN0ZXA9IjAuNSIgdmFsdWU9IjAiIG9uY2hhbmdlPSJ1cGRhdGVJbnRlcm5hdCgpIj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIAogICAgICAgICAgICA8ZGl2IGNsYXNzPSJ0b29sLWdyb3VwIHBhbGV0dGUiIGlkPSJwYWxldHRlLWNvbnRhaW5lciI+CiAgICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgICAgPGRpdiBjbGFzcz0idG9vbC1ncm91cCI+CiAgICAgICAgICAgICAgICA8c3BhbiBpZD0iaGVhZGVyLXN0YXRzIiBzdHlsZT0iZm9udC1zaXplOjAuOXJlbTsgZm9udC13ZWlnaHQ6Ym9sZDsgY29sb3I6dmFyKC0tcHJpbWFyeSk7IGJhY2tncm91bmQ6I2VlZTsgcGFkZGluZzo1cHggMTBweDsgYm9yZGVyLXJhZGl1czo0cHg7Ij4waCAvIDBoPC9zcGFuPgogICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYnRuIGJ0bi1wcmltYXJ5IiBvbmNsaWNrPSJwcmludFNpbmdsZSgpIiBzdHlsZT0iZm9udC1zaXplOiAwLjhyZW07Ij48aSBjbGFzcz0iZmFzIGZhLXByaW50Ij48L2k+IEFnZW50PC9idXR0b24+CiAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJidG4gYnRuLXByaW1hcnkiIG9uY2xpY2s9InByaW50QWxsKCkiIHN0eWxlPSJmb250LXNpemU6IDAuOHJlbTsgYmFja2dyb3VuZC1jb2xvcjojMmMzZTUwOyI+PGkgY2xhc3M9ImZhcyBmYS1sYXllci1ncm91cCI+PC9pPiBUb3V0PC9idXR0b24+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgIDwvZGl2PgoKICAgICAgICA8ZGl2IGNsYXNzPSJlZHQtY29udGFpbmVyIj4KICAgICAgICAgICAgPHRhYmxlIGNsYXNzPSJlZHQtdGFibGUiIGlkPSJ0aW1ldGFibGUiPjwvdGFibGU+CiAgICAgICAgPC9kaXY+CiAgICA8L3NlY3Rpb24+CgogICAgPGRpdiBjbGFzcz0ibW9kYWwtb3ZlcmxheSIgaWQ9Im1vZGFsLXNlcnZpY2UiPgogICAgICAgIDxkaXYgY2xhc3M9Im1vZGFsLWJveCI+CiAgICAgICAgICAgIDxoMz48aSBjbGFzcz0iZmFzIGZhLXBsdXMtY2lyY2xlIj48L2k+IEFqb3V0ZXIgdW4gU2VydmljZTwvaDM+CiAgICAgICAgICAgIAogICAgICAgICAgICA8bGFiZWwgZm9yPSJzZXJ2aWNlLW5hbWUiPk5vbSBkdSBzZXJ2aWNlIDo8L2xhYmVsPgogICAgICAgICAgICA8aW5wdXQgdHlwZT0idGV4dCIgaWQ9InNlcnZpY2UtbmFtZSIgcGxhY2Vob2xkZXI9IkV4OiBDREksIEluZmlybWVyaWUsIEFjY3VlaWwuLi4iIG1heGxlbmd0aD0iMTUiPgogICAgICAgICAgICAKICAgICAgICAgICAgPGxhYmVsPkNvdWxldXIgKHByw6lzZXRzKSA6PC9sYWJlbD4KICAgICAgICAgICAgPGRpdiBjbGFzcz0iY29sb3ItcHJlc2V0cyI+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJjb2xvci1wcmVzZXQiIHN0eWxlPSJiYWNrZ3JvdW5kOiNlNzRjM2MiIG9uY2xpY2s9InNldFByZXNldENvbG9yKCcjZTc0YzNjJykiPjwvZGl2PgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iY29sb3ItcHJlc2V0IiBzdHlsZT0iYmFja2dyb3VuZDojZTkxZTYzIiBvbmNsaWNrPSJzZXRQcmVzZXRDb2xvcignI2U5MWU2MycpIj48L2Rpdj4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImNvbG9yLXByZXNldCIgc3R5bGU9ImJhY2tncm91bmQ6IzljMjdiMCIgb25jbGljaz0ic2V0UHJlc2V0Q29sb3IoJyM5YzI3YjAnKSI+PC9kaXY+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJjb2xvci1wcmVzZXQiIHN0eWxlPSJiYWNrZ3JvdW5kOiM2NzNhYjciIG9uY2xpY2s9InNldFByZXNldENvbG9yKCcjNjczYWI3JykiPjwvZGl2PgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iY29sb3ItcHJlc2V0IiBzdHlsZT0iYmFja2dyb3VuZDojM2Y1MWI1IiBvbmNsaWNrPSJzZXRQcmVzZXRDb2xvcignIzNmNTFiNScpIj48L2Rpdj4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImNvbG9yLXByZXNldCIgc3R5bGU9ImJhY2tncm91bmQ6IzIxOTZmMyIgb25jbGljaz0ic2V0UHJlc2V0Q29sb3IoJyMyMTk2ZjMnKSI+PC9kaXY+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJjb2xvci1wcmVzZXQiIHN0eWxlPSJiYWNrZ3JvdW5kOiMwMGJjZDQiIG9uY2xpY2s9InNldFByZXNldENvbG9yKCcjMDBiY2Q0JykiPjwvZGl2PgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iY29sb3ItcHJlc2V0IiBzdHlsZT0iYmFja2dyb3VuZDojMDA5Njg4IiBvbmNsaWNrPSJzZXRQcmVzZXRDb2xvcignIzAwOTY4OCcpIj48L2Rpdj4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImNvbG9yLXByZXNldCIgc3R5bGU9ImJhY2tncm91bmQ6IzRjYWY1MCIgb25jbGljaz0ic2V0UHJlc2V0Q29sb3IoJyM0Y2FmNTAnKSI+PC9kaXY+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJjb2xvci1wcmVzZXQiIHN0eWxlPSJiYWNrZ3JvdW5kOiM4YmMzNGEiIG9uY2xpY2s9InNldFByZXNldENvbG9yKCcjOGJjMzRhJykiPjwvZGl2PgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iY29sb3ItcHJlc2V0IiBzdHlsZT0iYmFja2dyb3VuZDojZmY5ODAwIiBvbmNsaWNrPSJzZXRQcmVzZXRDb2xvcignI2ZmOTgwMCcpIj48L2Rpdj4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImNvbG9yLXByZXNldCIgc3R5bGU9ImJhY2tncm91bmQ6I2ZmNTcyMiIgb25jbGljaz0ic2V0UHJlc2V0Q29sb3IoJyNmZjU3MjInKSI+PC9kaXY+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJjb2xvci1wcmVzZXQiIHN0eWxlPSJiYWNrZ3JvdW5kOiM3OTU1NDgiIG9uY2xpY2s9InNldFByZXNldENvbG9yKCcjNzk1NTQ4JykiPjwvZGl2PgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iY29sb3ItcHJlc2V0IiBzdHlsZT0iYmFja2dyb3VuZDojNjA3ZDhiIiBvbmNsaWNrPSJzZXRQcmVzZXRDb2xvcignIzYwN2Q4YicpIj48L2Rpdj4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImNvbG9yLXByZXNldCIgc3R5bGU9ImJhY2tncm91bmQ6IzAwMDAwMCIgb25jbGljaz0ic2V0UHJlc2V0Q29sb3IoJyMwMDAwMDAnKSI+PC9kaXY+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAKICAgICAgICAgICAgPGxhYmVsIGZvcj0ic2VydmljZS1jb2xvciI+T3UgY291bGV1ciBwZXJzb25uYWxpc8OpZSA6PC9sYWJlbD4KICAgICAgICAgICAgPGlucHV0IHR5cGU9ImNvbG9yIiBpZD0ic2VydmljZS1jb2xvciIgdmFsdWU9IiMzNDk4ZGIiIG9uY2hhbmdlPSJ1cGRhdGVQcmV2aWV3KCkiPgogICAgICAgICAgICAKICAgICAgICAgICAgPGxhYmVsPkFwZXLDp3UgOjwvbGFiZWw+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9InByZXZpZXctYnRuIiBpZD0ic2VydmljZS1wcmV2aWV3Ij5OT1VWRUFVIFNFUlZJQ0U8L2Rpdj4KICAgICAgICAgICAgCiAgICAgICAgICAgIDxkaXYgY2xhc3M9Im1vZGFsLWFjdGlvbnMiPgogICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYnRuLWNhbmNlbCIgb25jbGljaz0iY2xvc2VTZXJ2aWNlTW9kYWwoKSI+QW5udWxlcjwvYnV0dG9uPgogICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYnRuLWNvbmZpcm0iIG9uY2xpY2s9ImNvbmZpcm1BZGRTZXJ2aWNlKCkiPjxpIGNsYXNzPSJmYXMgZmEtY2hlY2siPjwvaT4gQWpvdXRlcjwvYnV0dG9uPgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICA8L2Rpdj4KICAgIDwvZGl2PgoKICAgIDxkaXYgY2xhc3M9Im1vZGFsLW92ZXJsYXkiIGlkPSJtb2RhbC1ncmlkLWNvbmZpZyI+CiAgICAgICAgPGRpdiBjbGFzcz0ibW9kYWwtYm94Ij4KICAgICAgICAgICAgPGgzPjxpIGNsYXNzPSJmYXMgZmEtY29nIj48L2k+IENvbmZpZ3VyYXRpb24gR3JpbGxlIEhvcmFpcmU8L2gzPgogICAgICAgICAgICA8cCBzdHlsZT0iZm9udC1zaXplOjAuOXJlbTsgY29sb3I6IzY2NjsiPkFqb3V0ZXosIHN1cHByaW1leiBldCBkw6lmaW5pc3NleiB2b3MgY3LDqW5lYXV4IHByw6ljaXMgKGV4OiA4aDI1LTloMjApLjwvcD4KICAgICAgICAgICAgCiAgICAgICAgICAgIDxkaXYgY2xhc3M9InNsb3QtaW5wdXRzIj4KICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9ImZsZXg6MSI+CiAgICAgICAgICAgICAgICAgICAgPGxhYmVsIHN0eWxlPSJmb250LXNpemU6MC44cmVtIj5Ew6lidXQ8L2xhYmVsPgogICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJ0aW1lIiBpZD0ibmV3LXNsb3Qtc3RhcnQiIHN0eWxlPSJ3aWR0aDoxMDAlIj4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iZmxleDoxIj4KICAgICAgICAgICAgICAgICAgICA8bGFiZWwgc3R5bGU9ImZvbnQtc2l6ZTowLjhyZW0iPkZpbjwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9InRpbWUiIGlkPSJuZXctc2xvdC1lbmQiIHN0eWxlPSJ3aWR0aDoxMDAlIj4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYnRuIGJ0bi1wcmltYXJ5IiBvbmNsaWNrPSJhZGRTbG90KCkiPjxpIGNsYXNzPSJmYXMgZmEtcGx1cyI+PC9pPjwvYnV0dG9uPgogICAgICAgICAgICA8L2Rpdj4KCiAgICAgICAgICAgIDxkaXYgY2xhc3M9InNsb3QtbGlzdCIgaWQ9InNsb3QtY29uZmlnLWxpc3QiPgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIAogICAgICAgICAgICA8ZGl2IGNsYXNzPSJtb2RhbC1hY3Rpb25zIj4KICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImJ0bi1jYW5jZWwiIG9uY2xpY2s9ImRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtb2RhbC1ncmlkLWNvbmZpZycpLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpIj5GZXJtZXI8L2J1dHRvbj4KICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImJ0bi1jb25maXJtIiBvbmNsaWNrPSJzYXZlR3JpZENvbmZpZygpIj48aSBjbGFzcz0iZmFzIGZhLWNoZWNrIj48L2k+IEVucmVnaXN0cmVyICYgQXBwbGlxdWVyPC9idXR0b24+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgIDwvZGl2PgogICAgPC9kaXY+CgogICAgPHNlY3Rpb24gaWQ9InZpZXctZ2VzdGlvbiIgY2xhc3M9InZpZXctc2VjdGlvbiI+CiAgICAgICAgPGRpdiBzdHlsZT0ibWFyZ2luLWJvdHRvbTogMjBweDsgZGlzcGxheTpmbGV4OyBqdXN0aWZ5LWNvbnRlbnQ6c3BhY2UtYmV0d2VlbjsgYWxpZ24taXRlbXM6Y2VudGVyOyI+CiAgICAgICAgICAgIDxkaXY+CiAgICAgICAgICAgICAgICA8bGFiZWw+PHN0cm9uZz5BZ2VudCA6PC9zdHJvbmc+PC9sYWJlbD4KICAgICAgICAgICAgICAgIDxzZWxlY3QgaWQ9ImFlZC1zZWxlY3QtZ2VzdGlvbiIgb25jaGFuZ2U9ImNoYW5nZUFFRCgnZ2VzdGlvbicpIj48L3NlbGVjdD4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImJ0biBidG4tcHJpbWFyeSIgb25jbGljaz0icHJpbnRHZXN0aW9uKCkiPjxpIGNsYXNzPSJmYXMgZmEtcHJpbnQiPjwvaT4gSW1wcmltZXIgRmljaGU8L2J1dHRvbj4KICAgICAgICA8L2Rpdj4KICAgICAgICA8ZGl2IGNsYXNzPSJnZXN0aW9uLWdyaWQiPgogICAgICAgICAgICA8ZGl2PgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ic3RhdHMtcm93Ij4KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJiYWxhbmNlLWJveCI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+VG90YWwgQW5udWVsIChOZXQpPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImJhbGFuY2UtYW1vdW50IiBpZD0iYW5udWFsLXRhcmdldC1kaXNwbGF5Ij4waDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJmb250LXNpemU6MC44cmVtOyBvcGFjaXR5OjAuODsiPk9iamVjdGlmPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iYmFsYW5jZS1ib3ggc2Vjb25kYXJ5Ij4KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj5Tb2xkZSBBanVzdGVtZW50czwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJiYWxhbmNlLWFtb3VudCIgaWQ9ImJhbGFuY2UtZGlzcGxheSI+MGg8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iZm9udC1zaXplOjAuOHJlbTsgb3BhY2l0eTowLjg7Ij5DdW11bCAoQWJzL1N1cCk8L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImNhcmQiPgogICAgICAgICAgICAgICAgICAgIDxoMyBzdHlsZT0ibWFyZ2luLXRvcDowIj5TYWlzaWUgUXVvdGlkaWVubmU8L2gzPgogICAgICAgICAgICAgICAgICAgIDxzZWxlY3QgaWQ9ImFkai10eXBlIiBzdHlsZT0id2lkdGg6MTAwJTsgbWFyZ2luLWJvdHRvbToxMHB4Ij48b3B0aW9uIHZhbHVlPSJwbHVzIj5IZXVyZXMgZW4gUExVUyAoKyk8L29wdGlvbj48b3B0aW9uIHZhbHVlPSJtaW51cyI+SGV1cmVzIGVuIE1PSU5TICgtKTwvb3B0aW9uPjwvc2VsZWN0PgogICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJudW1iZXIiIGlkPSJhZGotYW1vdW50IiBwbGFjZWhvbGRlcj0iRHVyw6llIiBzdGVwPSIwLjUiIHN0eWxlPSJ3aWR0aDoxMDAlOyBtYXJnaW4tYm90dG9tOjEwcHg7Ij4KICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0idGV4dCIgaWQ9ImFkai1yZWFzb24iIHBsYWNlaG9sZGVyPSJNb3RpZi4uLiIgc3R5bGU9IndpZHRoOjEwMCU7IG1hcmdpbi1ib3R0b206MTBweDsiPgogICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImJ0biBidG4tcHJpbWFyeSIgc3R5bGU9IndpZHRoOjEwMCUiIG9uY2xpY2s9ImFkZEFkanVzdG1lbnQoKSI+RW5yZWdpc3RyZXI8L2J1dHRvbj4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0iY2FyZCI+CiAgICAgICAgICAgICAgICA8aDMgc3R5bGU9Im1hcmdpbi10b3A6MCI+SGlzdG9yaXF1ZTwvaDM+CiAgICAgICAgICAgICAgICA8dGFibGUgY2xhc3M9Imhpc3RvcnktdGFibGUiPgogICAgICAgICAgICAgICAgICAgIDx0aGVhZD48dHI+PHRoPkRhdGU8L3RoPjx0aD5UeXBlPC90aD48dGg+TW90aWY8L3RoPjx0aD5IPC90aD48dGg+PC90aD48L3RyPjwvdGhlYWQ+CiAgICAgICAgICAgICAgICAgICAgPHRib2R5IGlkPSJoaXN0b3J5LWJvZHkiPjwvdGJvZHk+CiAgICAgICAgICAgICAgICA8L3RhYmxlPgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICA8L2Rpdj4KICAgIDwvc2VjdGlvbj4KCiAgICA8c2VjdGlvbiBpZD0idmlldy1yZXBhcnRpdGlvbiIgY2xhc3M9InZpZXctc2VjdGlvbiI+CiAgICAgICAgPGRpdiBjbGFzcz0icmVwYXJ0aXRpb24tdG9vbGJhciI+CiAgICAgICAgICAgIDxkaXYgc3R5bGU9ImRpc3BsYXk6ZmxleDsgYWxpZ24taXRlbXM6Y2VudGVyOyBnYXA6MTVweDsiPgogICAgICAgICAgICAgICAgPGgyIHN0eWxlPSJtYXJnaW46MDsgY29sb3I6dmFyKC0tcHJpbWFyeSk7IGZvbnQtc2l6ZToxLjJyZW07Ij5RdWkgZmFpdCBxdW9pID88L2gyPgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0idG9vbC1ncm91cCI+CiAgICAgICAgICAgICAgICAgICAgPGxhYmVsPjxzdHJvbmc+Sm91ciA6PC9zdHJvbmc+PC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICA8c2VsZWN0IGlkPSJyZXBhcnRpdGlvbi1kYXktc2VsZWN0IiBvbmNoYW5nZT0icmVuZGVyUmVwYXJ0aXRpb24oKSI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9Ikx1bmRpIj5MdW5kaTwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJNYXJkaSI+TWFyZGk8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iTWVyY3JlZGkiPk1lcmNyZWRpPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IkpldWRpIj5KZXVkaTwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJWZW5kcmVkaSI+VmVuZHJlZGk8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICA8L3NlbGVjdD4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYnRuIGJ0bi1wcmltYXJ5IiBvbmNsaWNrPSJwcmludFJlcGFydGl0aW9uKCkiPjxpIGNsYXNzPSJmYXMgZmEtcHJpbnQiPjwvaT4gSW1wcmltZXIgbGEgam91cm7DqWU8L2J1dHRvbj4KICAgICAgICA8L2Rpdj4KICAgICAgICAKICAgICAgICA8ZGl2IGNsYXNzPSJlZHQtY29udGFpbmVyIj4KICAgICAgICAgICAgPGRpdiBpZD0icmVwYXJ0aXRpb24tY29udGVudCI+PC9kaXY+CiAgICAgICAgPC9kaXY+CiAgICA8L3NlY3Rpb24+CgogICAgPHNlY3Rpb24gaWQ9InZpZXctbGl2ZSIgY2xhc3M9InZpZXctc2VjdGlvbiI+CiAgICAgICAgPGRpdiBjbGFzcz0ibGl2ZS1oZWFkZXIiPgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJjbG9jay1kYXkiIGlkPSJsaXZlLWRheSI+Q0hBUkdFTUVOVC4uLjwvZGl2PgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJjbG9jay10aW1lIiBpZD0ibGl2ZS1jbG9jayI+LS06LS06LS08L2Rpdj4KICAgICAgICA8L2Rpdj4KICAgICAgICAKICAgICAgICA8ZGl2IGNsYXNzPSJzZWN0aW9uLXRpdGxlIj48aSBjbGFzcz0iZmFzIGZhLXVzZXItY2xvY2siPjwvaT4gQUVEIEVOIFBPU1RFIEFDVFVFTExFTUVOVDwvZGl2PgogICAgICAgIDxkaXYgY2xhc3M9ImxpdmUtZ3JpZCIgaWQ9ImxpdmUtYWN0aXZlLWNvbnRhaW5lciI+CiAgICAgICAgICAgIDwvZGl2PgoKICAgICAgICA8ZGl2IGNsYXNzPSJzZWN0aW9uLXRpdGxlIj48aSBjbGFzcz0iZmFzIGZhLXVzZXItc2xhc2giPjwvaT4gQUJTRU5UUyAvIE5PTiBQTEFOSUZJw4lTPC9kaXY+CiAgICAgICAgPGRpdiBjbGFzcz0ibGl2ZS1ncmlkIiBpZD0ibGl2ZS1pbmFjdGl2ZS1jb250YWluZXIiIHN0eWxlPSJvcGFjaXR5OiAwLjY7Ij4KICAgICAgICAgICAgPC9kaXY+CiAgICA8L3NlY3Rpb24+Cgo8L21haW4+Cgo8ZGl2IGlkPSJiYXRjaC1wcmludC1hcmVhIj48L2Rpdj4KPGRpdiBpZD0iZGFzaGJvYXJkLXByaW50LWFyZWEiPjwvZGl2Pgo8ZGl2IGlkPSJnZXN0aW9uLXByaW50LWFyZWEiPjwvZGl2Pgo8ZGl2IGlkPSJyZXBhcnRpdGlvbi1wcmludC1hcmVhIj48L2Rpdj4KCjxzY3JpcHQ+CiAgICAvLyAtLS0gSU5JVElBTElTQVRJT04gRE9OTsOJRVMgVklERSAtLS0KICAgIC8vIEFqb3V0IGRlICJzbG90cyIgZGFucyBEQVRBLmNvbmZpZyBwb3VyIHN0b2NrZXIgbGVzIGNyw6luZWF1eCBwZXJzb25uYWxpc8OpcwogICAgbGV0IERBVEEgPSB7IGFnZW50czogW10sIHNjaGVkdWxlczoge30sIGFkanVzdG1lbnRzOiB7fSwgcXVvdGl0ZXM6IFtdLCBzZXJ2aWNlczogW10sIGNvbmZpZzogeyBzbG90czogW10gfSB9OwogICAgY29uc3QgREFZUyA9IFsnTHVuZGknLCAnTWFyZGknLCAnTWVyY3JlZGknLCAnSmV1ZGknLCAnVmVuZHJlZGknXTsKICAgIAogICAgLy8gQ3LDqW5lYXV4IHBhciBkw6lmYXV0IHNpIGF1Y3VuZSBjb25maWcgKHBvdXIgw6l2aXRlciBsZSB2aWRlIGF1IHByZW1pZXIgbGFuY2VtZW50KQogICAgY29uc3QgREVGQVVMVF9TTE9UUyA9IFsKICAgICAgICB7IHN0YXJ0OiAnMDg6MDAnLCBlbmQ6ICcwODo1NScgfSwKICAgICAgICB7IHN0YXJ0OiAnMDg6NTUnLCBlbmQ6ICcwOTo1MCcgfSwKICAgICAgICB7IHN0YXJ0OiAnMDk6NTAnLCBlbmQ6ICcxMDowNScgfSwKICAgICAgICB7IHN0YXJ0OiAnMTA6MDUnLCBlbmQ6ICcxMTowMCcgfSwKICAgICAgICB7IHN0YXJ0OiAnMTE6MDAnLCBlbmQ6ICcxMTo1NScgfSwKICAgICAgICB7IHN0YXJ0OiAnMTI6MDAnLCBlbmQ6ICcxMzowMCcgfSwKICAgICAgICB7IHN0YXJ0OiAnMTM6MDAnLCBlbmQ6ICcxMzo1NScgfSwKICAgICAgICB7IHN0YXJ0OiAnMTM6NTUnLCBlbmQ6ICcxNDo1MCcgfSwKICAgICAgICB7IHN0YXJ0OiAnMTQ6NTAnLCBlbmQ6ICcxNTowNScgfSwKICAgICAgICB7IHN0YXJ0OiAnMTU6MDUnLCBlbmQ6ICcxNjowMCcgfSwKICAgICAgICB7IHN0YXJ0OiAnMTY6MDAnLCBlbmQ6ICcxNjo1NScgfSwKICAgICAgICB7IHN0YXJ0OiAnMTY6NTUnLCBlbmQ6ICcxNzo1MCcgfQogICAgXTsKCiAgICBsZXQgQ1VSUkVOVF9UT09MID0geyBuYW1lOiAnR3JpbGxlJywgY29sb3I6ICcjZmYwMGZmJywgaXNFcmFzZXI6IGZhbHNlIH07CiAgICAKICAgIC8vIFNlcnZpY2VzIHBhciBkw6lmYXV0CiAgICBjb25zdCBERUZBVUxUX1NFUlZJQ0VTID0gWwogICAgICAgIHsgaWQ6ICdncmlsbGUnLCBuYW1lOiAnR3JpbGxlJywgY29sb3I6ICcjZmYwMGZmJywgaXNEZWZhdWx0OiB0cnVlIH0sCiAgICAgICAgeyBpZDogJ2FkbWluJywgbmFtZTogJ0FkbWluJywgY29sb3I6ICcjMDBiODk0JywgaXNEZWZhdWx0OiB0cnVlIH0sCiAgICAgICAgeyBpZDogJ2V0dWRlJywgbmFtZTogJ0V0dWRlJywgY29sb3I6ICcjOGU0NGFkJywgaXNEZWZhdWx0OiB0cnVlIH0sCiAgICAgICAgeyBpZDogJ3NlbGYnLCBuYW1lOiAnU2VsZicsIGNvbG9yOiAnI2U2N2UyMicsIGlzRGVmYXVsdDogdHJ1ZSB9LAogICAgICAgIHsgaWQ6ICdjb3Vsb2lycycsIG5hbWU6ICdDb3Vsb2lycycsIGNvbG9yOiAnI2YxYzQwZicsIGlzRGVmYXVsdDogdHJ1ZSB9LAogICAgICAgIHsgaWQ6ICdjb3VyJywgbmFtZTogJ0NvdXInLCBjb2xvcjogJyNkNjMwMzEnLCBpc0RlZmF1bHQ6IHRydWUgfSwKICAgICAgICB7IGlkOiAnc3VpdmknLCBuYW1lOiAnU3VpdmknLCBjb2xvcjogJyMyN2FlNjAnLCBpc0RlZmF1bHQ6IHRydWUgfQogICAgXTsKICAgIAogICAgY29uc3QgU1RPUkFHRV9LRVkgPSAnQUVEX1BJTE9URV9WMjhfU0xPVFMnOwoKICAgIHdpbmRvdy5vbmxvYWQgPSBmdW5jdGlvbigpIHsgCiAgICAgICAgbG9hZExvY2FsU3RvcmFnZSgpOyAKICAgICAgICByZW5kZXJQYWxldHRlKCk7IAogICAgICAgIC8vIExhbmNlciBsJ2hvcmxvZ2UgcG91ciBsZSBtZW51IDUKICAgICAgICBzZXRJbnRlcnZhbCh1cGRhdGVMaXZlVmlldywgMTAwMCk7CiAgICAgICAgdXBkYXRlTGl2ZVZpZXcoKTsKICAgIH07CgogICAgZnVuY3Rpb24gc3dpdGNoVGFiKHRhYklkKSB7CiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnZpZXctc2VjdGlvbicpLmZvckVhY2goZWwgPT4gZWwuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJykpOwogICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy50YWItYnRuJykuZm9yRWFjaChlbCA9PiBlbC5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKSk7CiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ZpZXctJyArIHRhYklkKS5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTsKICAgICAgICAKICAgICAgICBjb25zdCB0YWJzID0gWydpbXBvcnQnLCAnY29uY2VwdGlvbicsICdnZXN0aW9uJywgJ3JlcGFydGl0aW9uJywgJ2xpdmUnXTsKICAgICAgICBjb25zdCBidG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcudGFiLWJ0bicpW3RhYnMuaW5kZXhPZih0YWJJZCldOwogICAgICAgIGlmKGJ0bikgYnRuLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpOwogICAgICAgIAogICAgICAgIGlmKHRhYklkID09PSAnY29uY2VwdGlvbicpIHVwZGF0ZVN0YXRzSGVhZGVyKCk7CiAgICAgICAgaWYodGFiSWQgPT09ICdnZXN0aW9uJykgdXBkYXRlR2VzdGlvblVJKCk7CiAgICAgICAgaWYodGFiSWQgPT09ICdyZXBhcnRpdGlvbicpIHJlbmRlclJlcGFydGl0aW9uKCk7CiAgICAgICAgaWYodGFiSWQgPT09ICdsaXZlJykgdXBkYXRlTGl2ZVZpZXcoKTsKICAgIH0KICAgIAogICAgLy8gLS0tIEdFU1RJT04gREUgTEEgQ09ORklHVVJBVElPTiBIT1JBSVJFIEFWQU5DRUUgKE1lbnUgMikgLS0tCiAgICAvLyBWYXJpYWJsZSB0ZW1wb3JhaXJlIHBvdXIgbCfDqWRpdGlvbiBkYW5zIGxlIG1vZGFsCiAgICBsZXQgdGVtcFNsb3RzID0gW107CgogICAgZnVuY3Rpb24gb3BlbkdyaWRDb25maWcoKSB7CiAgICAgICAgLy8gQ2hhcmdlciBsZXMgc2xvdHMgYWN0dWVscyBvdSBsZXMgZMOpZmF1dHMKICAgICAgICB0ZW1wU2xvdHMgPSAoREFUQS5jb25maWcgJiYgREFUQS5jb25maWcuc2xvdHMgJiYgREFUQS5jb25maWcuc2xvdHMubGVuZ3RoID4gMCkgCiAgICAgICAgICAgICAgICAgICAgPyBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KERBVEEuY29uZmlnLnNsb3RzKSkgCiAgICAgICAgICAgICAgICAgICAgOiBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KERFRkFVTFRfU0xPVFMpKTsKICAgICAgICAKICAgICAgICByZW5kZXJTbG90Q29uZmlnTGlzdCgpOwogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtb2RhbC1ncmlkLWNvbmZpZycpLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpOwogICAgfQoKICAgIGZ1bmN0aW9uIHJlbmRlclNsb3RDb25maWdMaXN0KCkgewogICAgICAgIGNvbnN0IGxpc3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2xvdC1jb25maWctbGlzdCcpOwogICAgICAgIGxpc3QuaW5uZXJIVE1MID0gJyc7CiAgICAgICAgCiAgICAgICAgLy8gVHJpZXIgcGFyIGhldXJlIGRlIGTDqWJ1dAogICAgICAgIHRlbXBTbG90cy5zb3J0KChhLCBiKSA9PiBhLnN0YXJ0LmxvY2FsZUNvbXBhcmUoYi5zdGFydCkpOwoKICAgICAgICB0ZW1wU2xvdHMuZm9yRWFjaCgoc2xvdCwgaW5kZXgpID0+IHsKICAgICAgICAgICAgY29uc3QgaXRlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgICAgICAgICBpdGVtLmNsYXNzTmFtZSA9ICdzbG90LWl0ZW0nOwogICAgICAgICAgICBpdGVtLmlubmVySFRNTCA9IGAKICAgICAgICAgICAgICAgIDxzcGFuPjxzdHJvbmc+JHtzbG90LnN0YXJ0fTwvc3Ryb25nPiDDoCA8c3Ryb25nPiR7c2xvdC5lbmR9PC9zdHJvbmc+PC9zcGFuPgogICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYnRuIGJ0bi1kYW5nZXIiIHN0eWxlPSJwYWRkaW5nOjRweCA4cHg7IGZvbnQtc2l6ZTowLjdyZW07IiBvbmNsaWNrPSJyZW1vdmVTbG90KCR7aW5kZXh9KSI+PGkgY2xhc3M9ImZhcyBmYS10cmFzaCI+PC9pPjwvYnV0dG9uPgogICAgICAgICAgICBgOwogICAgICAgICAgICBsaXN0LmFwcGVuZENoaWxkKGl0ZW0pOwogICAgICAgIH0pOwogICAgfQoKICAgIGZ1bmN0aW9uIGFkZFNsb3QoKSB7CiAgICAgICAgY29uc3Qgc3RhcnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbmV3LXNsb3Qtc3RhcnQnKS52YWx1ZTsKICAgICAgICBjb25zdCBlbmQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbmV3LXNsb3QtZW5kJykudmFsdWU7CgogICAgICAgIGlmICghc3RhcnQgfHwgIWVuZCkgewogICAgICAgICAgICBhbGVydCgiVmV1aWxsZXogcmVtcGxpciBsJ2hldXJlIGRlIGTDqWJ1dCBldCBkZSBmaW4uIik7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgaWYgKHN0YXJ0ID49IGVuZCkgewogICAgICAgICAgICBhbGVydCgiTCdoZXVyZSBkZSBkw6lidXQgZG9pdCDDqnRyZSBhdmFudCBsJ2hldXJlIGRlIGZpbi4iKTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgdGVtcFNsb3RzLnB1c2goeyBzdGFydDogc3RhcnQsIGVuZDogZW5kIH0pOwogICAgICAgIHJlbmRlclNsb3RDb25maWdMaXN0KCk7CiAgICAgICAgCiAgICAgICAgLy8gUmVzZXQgaW5wdXRzCiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ25ldy1zbG90LXN0YXJ0JykudmFsdWUgPSAnJzsKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbmV3LXNsb3QtZW5kJykudmFsdWUgPSAnJzsKICAgIH0KCiAgICBmdW5jdGlvbiByZW1vdmVTbG90KGluZGV4KSB7CiAgICAgICAgdGVtcFNsb3RzLnNwbGljZShpbmRleCwgMSk7CiAgICAgICAgcmVuZGVyU2xvdENvbmZpZ0xpc3QoKTsKICAgIH0KCiAgICBmdW5jdGlvbiBzYXZlR3JpZENvbmZpZygpIHsKICAgICAgICBpZiAodGVtcFNsb3RzLmxlbmd0aCA9PT0gMCkgewogICAgICAgICAgICBpZighY29uZmlybSgiTGEgZ3JpbGxlIGVzdCB2aWRlLiBWb3VsZXotdm91cyB2cmFpbWVudCBjb250aW51ZXIgPyIpKSByZXR1cm47CiAgICAgICAgfQoKICAgICAgICBpZighREFUQS5jb25maWcpIERBVEEuY29uZmlnID0ge307CiAgICAgICAgCiAgICAgICAgLy8gT24gdHJpZSB1bmUgZGVybmnDqHJlIGZvaXMgcG91ciDDqnRyZSBzw7tyCiAgICAgICAgdGVtcFNsb3RzLnNvcnQoKGEsIGIpID0+IGEuc3RhcnQubG9jYWxlQ29tcGFyZShiLnN0YXJ0KSk7CiAgICAgICAgREFUQS5jb25maWcuc2xvdHMgPSB0ZW1wU2xvdHM7CiAgICAgICAgCiAgICAgICAgc2F2ZUxvY2FsU3RvcmFnZSgpOwogICAgICAgIAogICAgICAgIC8vIFJhZnJhw65jaGlyIGxlcyB2dWVzCiAgICAgICAgcmVuZGVyVGltZXRhYmxlKCk7CiAgICAgICAgcmVuZGVyUmVwYXJ0aXRpb24oKTsKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbW9kYWwtZ3JpZC1jb25maWcnKS5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTsKICAgIH0KCiAgICAvLyAtLS0gTE9HSVFVRSBNRU5VIDUgOiBFTiBESVJFQ1QgKEFkYXB0w6kgYXV4IGNyw6luZWF1eCBsaWJyZXMpIC0tLQogICAgZnVuY3Rpb24gdXBkYXRlTGl2ZVZpZXcoKSB7CiAgICAgICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTsKICAgICAgICBjb25zdCBkYXlOYW1lcyA9IFsnRGltYW5jaGUnLCAnTHVuZGknLCAnTWFyZGknLCAnTWVyY3JlZGknLCAnSmV1ZGknLCAnVmVuZHJlZGknLCAnU2FtZWRpJ107CiAgICAgICAgY29uc3QgY3VycmVudERheUluZGV4ID0gbm93LmdldERheSgpOwogICAgICAgIGNvbnN0IGN1cnJlbnREYXlOYW1lID0gZGF5TmFtZXNbY3VycmVudERheUluZGV4XTsKICAgICAgICAKICAgICAgICAvLyBGb3JtYXRhZ2UgIkhIOk1NIiBwb3VyIGNvbXBhcmFpc29uCiAgICAgICAgY29uc3QgaG91cnMgPSBTdHJpbmcobm93LmdldEhvdXJzKCkpLnBhZFN0YXJ0KDIsICcwJyk7CiAgICAgICAgY29uc3QgbWludXRlcyA9IFN0cmluZyhub3cuZ2V0TWludXRlcygpKS5wYWRTdGFydCgyLCAnMCcpOwogICAgICAgIGNvbnN0IGN1cnJlbnRUaW1lU3RyID0gYCR7aG91cnN9OiR7bWludXRlc31gOwoKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbGl2ZS1kYXknKS50ZXh0Q29udGVudCA9IGN1cnJlbnREYXlOYW1lICsgIiAiICsgbm93LnRvTG9jYWxlRGF0ZVN0cmluZygpOwogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsaXZlLWNsb2NrJykudGV4dENvbnRlbnQgPSBub3cudG9Mb2NhbGVUaW1lU3RyaW5nKCk7CgogICAgICAgIGNvbnN0IGNvbnRhaW5lckFjdGl2ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsaXZlLWFjdGl2ZS1jb250YWluZXInKTsKICAgICAgICBjb25zdCBjb250YWluZXJJbmFjdGl2ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsaXZlLWluYWN0aXZlLWNvbnRhaW5lcicpOwogICAgICAgIAogICAgICAgIGlmKCFkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndmlldy1saXZlJykuY2xhc3NMaXN0LmNvbnRhaW5zKCdhY3RpdmUnKSkgcmV0dXJuOwoKICAgICAgICBjb250YWluZXJBY3RpdmUuaW5uZXJIVE1MID0gJyc7CiAgICAgICAgY29udGFpbmVySW5hY3RpdmUuaW5uZXJIVE1MID0gJyc7CgogICAgICAgIC8vIFRyb3V2ZXIgbCdpbmRleCBkdSBzbG90IGFjdGlmCiAgICAgICAgY29uc3QgYWN0aXZlU2xvdEluZGV4ID0gKERBVEEuY29uZmlnLnNsb3RzIHx8IERFRkFVTFRfU0xPVFMpLmZpbmRJbmRleChzbG90ID0+IHsKICAgICAgICAgICAgcmV0dXJuIGN1cnJlbnRUaW1lU3RyID49IHNsb3Quc3RhcnQgJiYgY3VycmVudFRpbWVTdHIgPCBzbG90LmVuZDsKICAgICAgICB9KTsKICAgICAgICAKICAgICAgICBsZXQgYWN0aXZlU2xvdExhYmVsID0gIkhPUlMgQ1LDiU5FQVUiOwogICAgICAgIGxldCBhY3RpdmVTbG90RW5kID0gIiI7CgogICAgICAgIGlmKGFjdGl2ZVNsb3RJbmRleCAhPT0gLTEpIHsKICAgICAgICAgICAgY29uc3Qgc2xvdCA9IChEQVRBLmNvbmZpZy5zbG90cyB8fCBERUZBVUxUX1NMT1RTKVthY3RpdmVTbG90SW5kZXhdOwogICAgICAgICAgICBhY3RpdmVTbG90TGFiZWwgPSBgJHtzbG90LnN0YXJ0fSAtICR7c2xvdC5lbmR9YDsKICAgICAgICAgICAgYWN0aXZlU2xvdEVuZCA9IHNsb3QuZW5kOwogICAgICAgIH0KCiAgICAgICAgbGV0IGhhc0FjdGl2ZSA9IGZhbHNlOwoKICAgICAgICBEQVRBLmFnZW50cy5mb3JFYWNoKGFnZW50ID0+IHsKICAgICAgICAgICAgLy8gTGEgY2zDqSBlc3QgYmFzw6llIHN1ciBsJ2luZGV4IGR1IHNsb3QgOiAiTHVuZGktMCIsICJMdW5kaS0xIiwgZXRjLgogICAgICAgICAgICBjb25zdCBrZXkgPSBgJHtjdXJyZW50RGF5TmFtZX0tJHthY3RpdmVTbG90SW5kZXh9YDsKICAgICAgICAgICAgY29uc3Qgc2NoZWR1bGUgPSBEQVRBLnNjaGVkdWxlc1thZ2VudC5uYW1lXTsKICAgICAgICAgICAgCiAgICAgICAgICAgIGxldCBpc0FjdGl2ZSA9IGZhbHNlOwogICAgICAgICAgICBsZXQgc2VydmljZUluZm8gPSBudWxsOwoKICAgICAgICAgICAgaWYgKGFjdGl2ZVNsb3RJbmRleCAhPT0gLTEgJiYgc2NoZWR1bGUgJiYgc2NoZWR1bGVba2V5XSkgewogICAgICAgICAgICAgICAgaXNBY3RpdmUgPSB0cnVlOwogICAgICAgICAgICAgICAgc2VydmljZUluZm8gPSBzY2hlZHVsZVtrZXldOwogICAgICAgICAgICB9CgogICAgICAgICAgICAvLyBDcsOpYXRpb24gZGUgbGEgY2FydGUKICAgICAgICAgICAgY29uc3QgY2FyZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgICAgICAgICBjYXJkLmNsYXNzTmFtZSA9IGBsaXZlLWNhcmQgJHtpc0FjdGl2ZSA/ICdhY3RpdmUnIDogJyd9YDsKICAgICAgICAgICAgCiAgICAgICAgICAgIGlmKGlzQWN0aXZlICYmIHNlcnZpY2VJbmZvLmNvbG9yKSB7CiAgICAgICAgICAgICAgICBjYXJkLnN0eWxlLmJvcmRlckxlZnRDb2xvciA9IHNlcnZpY2VJbmZvLmNvbG9yOwogICAgICAgICAgICB9CgogICAgICAgICAgICBjb25zdCBpc0xpZ2h0ID0gaXNBY3RpdmUgPyBpc0xpZ2h0Q29sb3Ioc2VydmljZUluZm8uY29sb3IpIDogdHJ1ZTsKICAgICAgICAgICAgY29uc3QgdGV4dENvbG9yID0gaXNMaWdodCA/ICcjMzMzJyA6ICd3aGl0ZSc7CgogICAgICAgICAgICBjYXJkLmlubmVySFRNTCA9IGAKICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImxpdmUtY2FyZC1ib2R5Ij4KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJsaXZlLWFnZW50LW5hbWUiPiR7YWdlbnQubmFtZX08L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJsaXZlLXN0YXR1cyIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICR7aXNBY3RpdmUgPyBzZXJ2aWNlSW5mby5jb2xvciA6ICcjZWVlJ307IGNvbG9yOiAke3RleHRDb2xvcn0iPgogICAgICAgICAgICAgICAgICAgICAgICAke2lzQWN0aXZlID8gc2VydmljZUluZm8udG9vbCA6IChhY3RpdmVTbG90SW5kZXggIT09IC0xID8gJ0xJQlJFIC8gTk9OIFBMQU5JRknDiScgOiAnSE9SUyBIT1JBSVJFJyl9CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgJHtpc0FjdGl2ZSA/IGA8ZGl2IHN0eWxlPSJtYXJnaW4tdG9wOjVweDsgZm9udC1zaXplOjAuOHJlbTsgY29sb3I6Izc3NzsiPkFjdHVlbGxlbWVudCA6ICR7YWN0aXZlU2xvdExhYmVsfTwvZGl2PmAgOiAnJ30KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICBgOwoKICAgICAgICAgICAgaWYoaXNBY3RpdmUpIHsKICAgICAgICAgICAgICAgIGNvbnRhaW5lckFjdGl2ZS5hcHBlbmRDaGlsZChjYXJkKTsKICAgICAgICAgICAgICAgIGhhc0FjdGl2ZSA9IHRydWU7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBjb250YWluZXJJbmFjdGl2ZS5hcHBlbmRDaGlsZChjYXJkKTsKICAgICAgICAgICAgfQogICAgICAgIH0pOwoKICAgICAgICBpZighaGFzQWN0aXZlKSB7CiAgICAgICAgICAgIGNvbnRhaW5lckFjdGl2ZS5pbm5lckhUTUwgPSBgPGRpdiBzdHlsZT0iZ3JpZC1jb2x1bW46MS8tMTsgdGV4dC1hbGlnbjpjZW50ZXI7IHBhZGRpbmc6MjBweDsgY29sb3I6I2FhYTsiPkF1Y3VuIEFFRCBlbiBwb3N0ZSBzdXIgbGUgY3LDqW5lYXUgYWN0dWVsICgke2FjdGl2ZVNsb3RMYWJlbH0pLjwvZGl2PmA7CiAgICAgICAgfQogICAgfQoKCiAgICAvLyAtLS0gTE9HSVFVRSBJTlRFUk5BVCAtLS0KICAgIGZ1bmN0aW9uIHVwZGF0ZUludGVybmF0KCkgewogICAgICAgIGNvbnN0IG5hbWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWVkLXNlbGVjdC1jb25jZXB0aW9uJykudmFsdWU7CiAgICAgICAgaWYoIW5hbWUpIHJldHVybjsKICAgICAgICBjb25zdCB2YWwgPSBwYXJzZUZsb2F0KGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbnRlcm5hdC1ob3VycycpLnZhbHVlKSB8fCAwOwogICAgICAgIGNvbnN0IGFnZW50ID0gREFUQS5hZ2VudHMuZmluZChhID0+IGEubmFtZSA9PT0gbmFtZSk7CiAgICAgICAgaWYoYWdlbnQpIHsKICAgICAgICAgICAgYWdlbnQuaW50ZXJuYXRIb3VycyA9IHZhbDsKICAgICAgICAgICAgc2F2ZUxvY2FsU3RvcmFnZSgpOwogICAgICAgICAgICB1cGRhdGVTdGF0c0hlYWRlcigpOwogICAgICAgIH0KICAgIH0KCiAgICAvLyAtLS0gSU1QUkVTU0lPTlMgLS0tCiAgICBmdW5jdGlvbiBwcmludERhc2hib2FyZCgpIHsKICAgICAgICBpZihEQVRBLmFnZW50cy5sZW5ndGggPT09IDApIHsgYWxlcnQoIkF1Y3VuZSBkb25uw6llLiIpOyByZXR1cm47IH0KICAgICAgICBjb25zdCBhcmVhID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Rhc2hib2FyZC1wcmludC1hcmVhJyk7CiAgICAgICAgYXJlYS5pbm5lckhUTUwgPSBgCiAgICAgICAgICAgIDxkaXYgY2xhc3M9InByaW50LWhlYWRlci1iYXRjaCI+UsOpY2FwaXR1bGF0aWYgZGVzIEFnZW50cyAtIEFFRCBQSUxPVEU8L2Rpdj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0iZGFzaGJvYXJkLWdyaWQiPiR7ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Rhc2hib2FyZC1hcmVhJykuaW5uZXJIVE1MfTwvZGl2PgogICAgICAgIGA7CiAgICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuYWRkKCdwcmludGluZy1kYXNoYm9hcmQnLCAncHJpbnRpbmctbW9kZScpOwogICAgICAgIHdpbmRvdy5wcmludCgpOwogICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5yZW1vdmUoJ3ByaW50aW5nLWRhc2hib2FyZCcsICdwcmludGluZy1tb2RlJyk7CiAgICAgICAgICAgIGFyZWEuaW5uZXJIVE1MID0gJyc7CiAgICAgICAgfSwgMTAwMCk7CiAgICB9CgogICAgZnVuY3Rpb24gcHJpbnRHZXN0aW9uKCkgewogICAgICAgIGNvbnN0IG5hbWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWVkLXNlbGVjdC1nZXN0aW9uJykudmFsdWU7CiAgICAgICAgaWYoIW5hbWUpIHsgYWxlcnQoIlPDqWxlY3Rpb25uZXogdW4gYWdlbnQiKTsgcmV0dXJuOyB9CiAgICAgICAgY29uc3QgYW5udWFsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FubnVhbC10YXJnZXQtZGlzcGxheScpLmlubmVyVGV4dDsKICAgICAgICBjb25zdCBzb2xkZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdiYWxhbmNlLWRpc3BsYXknKS5pbm5lclRleHQ7CiAgICAgICAgY29uc3QgaGlzdG9yeSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdoaXN0b3J5LWJvZHknKS5pbm5lckhUTUw7CiAgICAgICAgY29uc3QgYXJlYSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdnZXN0aW9uLXByaW50LWFyZWEnKTsKICAgICAgICBhcmVhLmlubmVySFRNTCA9IGAKICAgICAgICAgICAgPGRpdiBjbGFzcz0icHJpbnQtaGVhZGVyLWJhdGNoIj5GaWNoZSBkZSBHZXN0aW9uIDogJHtuYW1lfTwvZGl2PgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJnZXN0aW9uLXN0YXRzLWNvbnRhaW5lciI+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJiYWxhbmNlLWJveCI+PGgzPk9iamVjdGlmIEFubnVlbDwvaDM+PGRpdiBjbGFzcz0iYmFsYW5jZS1hbW91bnQiPiR7YW5udWFsfTwvZGl2PjwvZGl2PgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iYmFsYW5jZS1ib3ggc2Vjb25kYXJ5Ij48aDM+U29sZGUgQWp1c3RlbWVudHM8L2gzPjxkaXYgY2xhc3M9ImJhbGFuY2UtYW1vdW50Ij4ke3NvbGRlfTwvZGl2PjwvZGl2PgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPGgzPkhpc3RvcmlxdWUgZGVzIG1vdXZlbWVudHM8L2gzPgogICAgICAgICAgICA8dGFibGUgY2xhc3M9Imhpc3RvcnktdGFibGUiPjx0aGVhZD48dHI+PHRoPkRhdGU8L3RoPjx0aD5UeXBlPC90aD48dGg+TW90aWY8L3RoPjx0aD5IPC90aD48dGg+PC90aD48L3RyPjwvdGhlYWQ+PHRib2R5PiR7aGlzdG9yeX08L3Rib2R5PjwvdGFibGU+CiAgICAgICAgYDsKICAgICAgICBjb25zdCB0cmFzaGVzID0gYXJlYS5xdWVyeVNlbGVjdG9yQWxsKCcuZmEtdHJhc2gnKTsKICAgICAgICB0cmFzaGVzLmZvckVhY2godCA9PiB0LnN0eWxlLmRpc3BsYXkgPSAnbm9uZScpOwogICAgICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmFkZCgncHJpbnRpbmctZ2VzdGlvbicsICdwcmludGluZy1tb2RlJyk7CiAgICAgICAgd2luZG93LnByaW50KCk7CiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LnJlbW92ZSgncHJpbnRpbmctZ2VzdGlvbicsICdwcmludGluZy1tb2RlJyk7CiAgICAgICAgICAgIGFyZWEuaW5uZXJIVE1MID0gJyc7CiAgICAgICAgfSwgMTAwMCk7CiAgICB9CgogICAgZnVuY3Rpb24gcHJpbnRSZXBhcnRpdGlvbigpIHsKICAgICAgICBjb25zdCBkYXkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVwYXJ0aXRpb24tZGF5LXNlbGVjdCcpLnZhbHVlOwogICAgICAgIGNvbnN0IGNvbnRlbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVwYXJ0aXRpb24tY29udGVudCcpLmlubmVySFRNTDsKICAgICAgICBjb25zdCBhcmVhID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JlcGFydGl0aW9uLXByaW50LWFyZWEnKTsKICAgICAgICAKICAgICAgICBhcmVhLmlubmVySFRNTCA9IGAKICAgICAgICAgICAgPGRpdiBjbGFzcz0icHJpbnQtaGVhZGVyLWJhdGNoIj5RdWkgZmFpdCBxdW9pID8gLSAke2RheX08L2Rpdj4KICAgICAgICAgICAgJHtjb250ZW50fQogICAgICAgIGA7CiAgICAgICAgCiAgICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuYWRkKCdwcmludGluZy1yZXBhcnRpdGlvbicsICdwcmludGluZy1tb2RlJyk7CiAgICAgICAgd2luZG93LnByaW50KCk7CiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LnJlbW92ZSgncHJpbnRpbmctcmVwYXJ0aXRpb24nLCAncHJpbnRpbmctbW9kZScpOwogICAgICAgICAgICBhcmVhLmlubmVySFRNTCA9ICcnOwogICAgICAgIH0sIDEwMDApOwogICAgfQoKICAgIC8vIC0tLSBJTVBSRVNTSU9OIFBBUiBBR0VOVCAtLS0KICAgIGZ1bmN0aW9uIHByaW50U2luZ2xlKCkgewogICAgICAgIGNvbnN0IG5hbWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWVkLXNlbGVjdC1jb25jZXB0aW9uJykudmFsdWU7CiAgICAgICAgaWYoIW5hbWUpIHsgYWxlcnQoIlPDqWxlY3Rpb25uZXogdW4gYWdlbnQgISIpOyByZXR1cm47IH0KICAgICAgICAKICAgICAgICBjb25zdCBhZ2VudCA9IERBVEEuYWdlbnRzLmZpbmQoYSA9PiBhLm5hbWUgPT09IG5hbWUpOwogICAgICAgIGlmKCFhZ2VudCkgcmV0dXJuOwoKICAgICAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYmF0Y2gtcHJpbnQtYXJlYScpOwogICAgICAgIGNvbnRhaW5lci5pbm5lckhUTUwgPSAnJzsgCiAgICAgICAgCiAgICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuYWRkKCdwcmludGluZy1iYXRjaCcsICdwcmludGluZy1tb2RlJyk7CgogICAgICAgIGNvbnN0IHBhZ2VEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgICAgICBwYWdlRGl2LmNsYXNzTmFtZSA9ICdwYWdlLWJyZWFrJzsKICAgICAgICBwYWdlRGl2LmlubmVySFRNTCA9IGA8ZGl2IGNsYXNzPSJwcmludC1oZWFkZXItYmF0Y2giPkVtcGxvaSBkdSB0ZW1wcyA6ICR7YWdlbnQubmFtZX0gKCR7YWdlbnQuZnRlTGFiZWx9KTwvZGl2PmA7CiAgICAgICAgCiAgICAgICAgY29uc3QgdGFibGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0YWJsZScpOwogICAgICAgIHRhYmxlLmNsYXNzTmFtZSA9ICdlZHQtdGFibGUnOwogICAgICAgIHRhYmxlLmlubmVySFRNTCA9IGdlbmVyYXRlVGFibGVIVE1MKGFnZW50Lm5hbWUpOwogICAgICAgIAogICAgICAgIHBhZ2VEaXYuYXBwZW5kQ2hpbGQodGFibGUpOwogICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChwYWdlRGl2KTsKCiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgIHdpbmRvdy5wcmludCgpOwogICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LnJlbW92ZSgncHJpbnRpbmctYmF0Y2gnLCAncHJpbnRpbmctbW9kZScpOwogICAgICAgICAgICAgICAgY29udGFpbmVyLmlubmVySFRNTCA9ICcnOwogICAgICAgICAgICB9LCAxMDAwKTsKICAgICAgICB9LCA1MDApOwogICAgfQoKICAgIGZ1bmN0aW9uIHByaW50QWxsKCkgewogICAgICAgIGlmKERBVEEuYWdlbnRzLmxlbmd0aCA9PT0gMCkgeyBhbGVydCgiQXVjdW4gYWdlbnQgw6AgaW1wcmltZXIuIik7IHJldHVybjsgfQogICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdiYXRjaC1wcmludC1hcmVhJyk7CiAgICAgICAgY29udGFpbmVyLmlubmVySFRNTCA9ICcnOyAKICAgICAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5hZGQoJ3ByaW50aW5nLWJhdGNoJywgJ3ByaW50aW5nLW1vZGUnKTsKICAgICAgICBEQVRBLmFnZW50cy5mb3JFYWNoKChhZ2VudCwgaW5kZXgpID0+IHsKICAgICAgICAgICAgY29uc3QgcGFnZURpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgICAgICAgICBwYWdlRGl2LmNsYXNzTmFtZSA9ICdwYWdlLWJyZWFrJzsKICAgICAgICAgICAgcGFnZURpdi5pbm5lckhUTUwgPSBgPGRpdiBjbGFzcz0icHJpbnQtaGVhZGVyLWJhdGNoIj5FbXBsb2kgZHUgdGVtcHMgOiAke2FnZW50Lm5hbWV9ICgke2FnZW50LmZ0ZUxhYmVsfSk8L2Rpdj5gOwogICAgICAgICAgICBjb25zdCB0YWJsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RhYmxlJyk7CiAgICAgICAgICAgIHRhYmxlLmNsYXNzTmFtZSA9ICdlZHQtdGFibGUnOwogICAgICAgICAgICB0YWJsZS5pbm5lckhUTUwgPSBnZW5lcmF0ZVRhYmxlSFRNTChhZ2VudC5uYW1lKTsKICAgICAgICAgICAgcGFnZURpdi5hcHBlbmRDaGlsZCh0YWJsZSk7CiAgICAgICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChwYWdlRGl2KTsKICAgICAgICB9KTsKICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgICAgd2luZG93LnByaW50KCk7CiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QucmVtb3ZlKCdwcmludGluZy1iYXRjaCcsICdwcmludGluZy1tb2RlJyk7CiAgICAgICAgICAgICAgICBjb250YWluZXIuaW5uZXJIVE1MID0gJyc7CiAgICAgICAgICAgIH0sIDEwMDApOwogICAgICAgIH0sIDUwMCk7CiAgICB9CgogICAgLy8gR0VTVElPTiBEVSBSRU5EVSBERSBMQSBUQUJMRSAoQWRhcHTDqSBhdXggc2xvdHMpCiAgICBmdW5jdGlvbiBnZW5lcmF0ZVRhYmxlSFRNTChhZ2VudE5hbWUpIHsKICAgICAgICBsZXQgaHRtbCA9IGA8dGhlYWQ+PHRyPjx0aCBzdHlsZT0id2lkdGg6OTBweCI+SDwvdGg+YDsKICAgICAgICBEQVlTLmZvckVhY2goZCA9PiBodG1sICs9IGA8dGg+JHtkfTwvdGg+YCk7CiAgICAgICAgaHRtbCArPSBgPC90cj48L3RoZWFkPjx0Ym9keT5gOwogICAgICAgIGNvbnN0IGFnZW50ID0gREFUQS5hZ2VudHMuZmluZChhID0+IGEubmFtZSA9PT0gYWdlbnROYW1lKTsKICAgICAgICBjb25zdCBzY2hlZCA9IERBVEEuc2NoZWR1bGVzW2FnZW50TmFtZV0gfHwge307CiAgICAgICAgCiAgICAgICAgY29uc3Qgc2xvdHMgPSAoREFUQS5jb25maWcuc2xvdHMgJiYgREFUQS5jb25maWcuc2xvdHMubGVuZ3RoID4gMCkgPyBEQVRBLmNvbmZpZy5zbG90cyA6IERFRkFVTFRfU0xPVFM7CgogICAgICAgIC8vIEJvdWNsZSBzdXIgbGVzIGNyw6luZWF1eCBkw6lmaW5pcwogICAgICAgIHNsb3RzLmZvckVhY2goKHNsb3QsIGluZGV4KSA9PiB7CiAgICAgICAgICAgIGh0bWwgKz0gYDx0cj48dGQgY2xhc3M9InRpbWUtY29sIj4ke3Nsb3Quc3RhcnR9PGJyPi08YnI+JHtzbG90LmVuZH08L3RkPmA7CiAgICAgICAgICAgIERBWVMuZm9yRWFjaChkYXkgPT4gewogICAgICAgICAgICAgICAgLy8gTGEgY2zDqSBzdG9ja8OpZSBlc3QgSm91ci1JbmRleCAoZXg6IEx1bmRpLTApIHBvdXIgw6p0cmUgaW5kw6lwZW5kYW50ZSBkdSB0ZXh0ZQogICAgICAgICAgICAgICAgY29uc3Qga2V5ID0gYCR7ZGF5fS0ke2luZGV4fWA7CiAgICAgICAgICAgICAgICBsZXQgY29udGVudCA9ICcnOwogICAgICAgICAgICAgICAgbGV0IGNlbGxDbGFzcyA9ICcnOwogICAgICAgICAgICAgICAgaWYoYWdlbnQgJiYgYWdlbnQuY29uc3RyYWludHMudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhkYXkudG9Mb3dlckNhc2UoKSkpIHsKICAgICAgICAgICAgICAgICAgICBjZWxsQ2xhc3MgPSAnY2VsbC1ibG9ja2VkJzsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZihzY2hlZFtrZXldKSB7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgYmdDb2xvciA9IHNjaGVkW2tleV0uY29sb3IgfHwgJyM5OTknOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IHRleHRDb2xvciA9IGlzTGlnaHRDb2xvcihiZ0NvbG9yKSA/ICcjMzMzJyA6ICd3aGl0ZSc7CiAgICAgICAgICAgICAgICAgICAgY29udGVudCA9IGA8ZGl2IGNsYXNzPSJjZWxsLWNvbnRlbnQiIHN0eWxlPSJiYWNrZ3JvdW5kLWNvbG9yOiR7YmdDb2xvcn07Y29sb3I6JHt0ZXh0Q29sb3J9Ij4ke3NjaGVkW2tleV0udG9vbH08L2Rpdj5gOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaHRtbCArPSBgPHRkIGNsYXNzPSIke2NlbGxDbGFzc30iPiR7Y29udGVudH08L3RkPmA7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBodG1sICs9IGA8L3RyPmA7CiAgICAgICAgfSk7CiAgICAgICAgaHRtbCArPSBgPC90Ym9keT5gOwogICAgICAgIHJldHVybiBodG1sOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBpc0xpZ2h0Q29sb3IoaGV4KSB7CiAgICAgICAgY29uc3QgYyA9IGhleC5zdWJzdHJpbmcoMSk7CiAgICAgICAgY29uc3QgcmdiID0gcGFyc2VJbnQoYywgMTYpOwogICAgICAgIGNvbnN0IHIgPSAocmdiID4+IDE2KSAmIDB4ZmY7CiAgICAgICAgY29uc3QgZyA9IChyZ2IgPj4gIDgpICYgMHhmZjsKICAgICAgICBjb25zdCBiID0gKHJnYiA+PiAgMCkgJiAweGZmOwogICAgICAgIGNvbnN0IGx1bWEgPSAwLjI5OSAqIHIgKyAwLjU4NyAqIGcgKyAwLjExNCAqIGI7CiAgICAgICAgcmV0dXJuIGx1bWEgPiAxNjA7CiAgICB9CgogICAgLy8gLS0tIFNZU1RFTUUgLS0tCiAgICBmdW5jdGlvbiByZXNldEFsbERhdGEoKSB7CiAgICAgICAgaWYoY29uZmlybSgiw4p0ZXMtdm91cyBzw7tyIGRlIHZvdWxvaXIgVE9VVCBlZmZhY2VyIGV0IHJlcGFydGlyIMOgIHrDqXJvID8gQ2V0dGUgYWN0aW9uIGVzdCBpcnLDqXZlcnNpYmxlLiIpKSB7CiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKFNUT1JBR0VfS0VZKTsKICAgICAgICAgICAgbG9jYXRpb24ucmVsb2FkKCk7CiAgICAgICAgfQogICAgfQogICAgZnVuY3Rpb24gZG93bmxvYWRKU09OKCkgewogICAgICAgIGNvbnN0IGRhdGFTdHIgPSAiZGF0YTp0ZXh0L2pzb247Y2hhcnNldD11dGYtOCwiICsgZW5jb2RlVVJJQ29tcG9uZW50KEpTT04uc3RyaW5naWZ5KERBVEEpKTsKICAgICAgICBjb25zdCBhbmNob3IgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7CiAgICAgICAgYW5jaG9yLnNldEF0dHJpYnV0ZSgiaHJlZiIsIGRhdGFTdHIpOyBhbmNob3Iuc2V0QXR0cmlidXRlKCJkb3dubG9hZCIsICJzYXV2ZWdhcmRlX2FlZF9waWxvdGUuanNvbiIpOwogICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoYW5jaG9yKTsgYW5jaG9yLmNsaWNrKCk7IGFuY2hvci5yZW1vdmUoKTsKICAgIH0KICAgIGZ1bmN0aW9uIGltcG9ydEpTT04oaW5wdXQpIHsKICAgICAgICBjb25zdCBmaWxlID0gaW5wdXQuZmlsZXNbMF07CiAgICAgICAgaWYoIWZpbGUpIHJldHVybjsKICAgICAgICBjb25zdCByID0gbmV3IEZpbGVSZWFkZXIoKTsKICAgICAgICByLm9ubG9hZCA9IGUgPT4geyB0cnl7IERBVEEgPSBKU09OLnBhcnNlKGUudGFyZ2V0LnJlc3VsdCk7IHNhdmVMb2NhbFN0b3JhZ2UoKTsgcmVmcmVzaEFsbFVJKCk7IH1jYXRjaChlKXthbGVydCgiRXJyZXVyIik7fSB9OwogICAgICAgIHIucmVhZEFzVGV4dChmaWxlKTsKICAgIH0KICAgIGZ1bmN0aW9uIHNhdmVMb2NhbFN0b3JhZ2UoKSB7IGxvY2FsU3RvcmFnZS5zZXRJdGVtKFNUT1JBR0VfS0VZLCBKU09OLnN0cmluZ2lmeShEQVRBKSk7IH0KICAgIAogICAgZnVuY3Rpb24gbG9hZExvY2FsU3RvcmFnZSgpIHsgCiAgICAgICAgbGV0IGogPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShTVE9SQUdFX0tFWSk7CiAgICAgICAgaWYoaikgeyAKICAgICAgICAgICAgREFUQSA9IEpTT04ucGFyc2Uoaik7IAogICAgICAgICAgICAvLyBSw6l0cm8tY29tcGF0aWJpbGl0w6kgOiBzaSBwYXMgZGUgc2xvdHMsIG9uIG1ldCBjZXV4IHBhciBkw6lmYXV0CiAgICAgICAgICAgIGlmKCFEQVRBLmNvbmZpZykgREFUQS5jb25maWcgPSB7IHNsb3RzOiBERUZBVUxUX1NMT1RTIH07CiAgICAgICAgICAgIGlmKCFEQVRBLmNvbmZpZy5zbG90cykgREFUQS5jb25maWcuc2xvdHMgPSBERUZBVUxUX1NMT1RTOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIC8vIFByZW1pZXIgbGFuY2VtZW50CiAgICAgICAgICAgIERBVEEuY29uZmlnLnNsb3RzID0gREVGQVVMVF9TTE9UUzsKICAgICAgICB9CiAgICAgICAgcmVmcmVzaEFsbFVJKCk7IAogICAgfQogICAgZnVuY3Rpb24gcmVmcmVzaEFsbFVJKCkgeyByZW5kZXJPdmVydmlldygpOyBwb3B1bGF0ZVNlbGVjdHMoKTsgcmVuZGVyVGltZXRhYmxlKCk7IHJlbmRlckltcG9ydEluZm8oKTsgcmVuZGVyUGFsZXR0ZSgpOyB9CgogICAgLy8gLS0tIEdFU1RJT04gREVTIFNFUlZJQ0VTIChQQUxFVFRFIERZTkFNSVFVRSkgLS0tCiAgICBmdW5jdGlvbiBnZXRBbGxTZXJ2aWNlcygpIHsKICAgICAgICBjb25zdCBjdXN0b21TZXJ2aWNlcyA9IERBVEEuc2VydmljZXMgfHwgW107CiAgICAgICAgcmV0dXJuIFsuLi5ERUZBVUxUX1NFUlZJQ0VTLCAuLi5jdXN0b21TZXJ2aWNlc107CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIHJlbmRlclBhbGV0dGUoKSB7CiAgICAgICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BhbGV0dGUtY29udGFpbmVyJyk7CiAgICAgICAgaWYoIWNvbnRhaW5lcikgcmV0dXJuOwogICAgICAgIAogICAgICAgIGNvbnRhaW5lci5pbm5lckhUTUwgPSAnJzsKICAgICAgICBjb25zdCBzZXJ2aWNlcyA9IGdldEFsbFNlcnZpY2VzKCk7CiAgICAgICAgCiAgICAgICAgc2VydmljZXMuZm9yRWFjaCgoc2VydmljZSwgaW5kZXgpID0+IHsKICAgICAgICAgICAgY29uc3QgaXNMaWdodCA9IGlzTGlnaHRDb2xvcihzZXJ2aWNlLmNvbG9yKTsKICAgICAgICAgICAgY29uc3QgdGV4dENvbG9yID0gaXNMaWdodCA/ICcjMzMzJyA6ICd3aGl0ZSc7CiAgICAgICAgICAgIGNvbnN0IHRleHRTaGFkb3cgPSBpc0xpZ2h0ID8gJ25vbmUnIDogJzAgMXB4IDFweCByZ2JhKDAsMCwwLDAuMiknOwogICAgICAgICAgICAKICAgICAgICAgICAgY29uc3Qgd3JhcHBlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgICAgICAgICB3cmFwcGVyLmNsYXNzTmFtZSA9ICdwYWxldHRlLWJ0bi13cmFwcGVyJzsKICAgICAgICAgICAgCiAgICAgICAgICAgIGNvbnN0IGJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgICAgICAgICBidG4uY2xhc3NOYW1lID0gJ3BhbGV0dGUtYnRuJyArIChpbmRleCA9PT0gMCA/ICcgc2VsZWN0ZWQnIDogJycpOwogICAgICAgICAgICBidG4uc3R5bGUuYmFja2dyb3VuZENvbG9yID0gc2VydmljZS5jb2xvcjsKICAgICAgICAgICAgYnRuLnN0eWxlLmNvbG9yID0gdGV4dENvbG9yOwogICAgICAgICAgICBidG4uc3R5bGUudGV4dFNoYWRvdyA9IHRleHRTaGFkb3c7CiAgICAgICAgICAgIGJ0bi50ZXh0Q29udGVudCA9IHNlcnZpY2UubmFtZTsKICAgICAgICAgICAgYnRuLm9uY2xpY2sgPSBmdW5jdGlvbihlKSB7IHNldFRvb2woc2VydmljZS5uYW1lLCBzZXJ2aWNlLmNvbG9yKTsgfTsKICAgICAgICAgICAgCiAgICAgICAgICAgIHdyYXBwZXIuYXBwZW5kQ2hpbGQoYnRuKTsKICAgICAgICAgICAgCiAgICAgICAgICAgIGlmKCFzZXJ2aWNlLmlzRGVmYXVsdCkgewogICAgICAgICAgICAgICAgY29uc3QgZGVsZXRlQnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7CiAgICAgICAgICAgICAgICBkZWxldGVCdG4uY2xhc3NOYW1lID0gJ3NlcnZpY2UtZGVsZXRlJzsKICAgICAgICAgICAgICAgIGRlbGV0ZUJ0bi5pbm5lckhUTUwgPSAnw5cnOwogICAgICAgICAgICAgICAgZGVsZXRlQnRuLnRpdGxlID0gJ1N1cHByaW1lciBjZSBzZXJ2aWNlJzsKICAgICAgICAgICAgICAgIGRlbGV0ZUJ0bi5vbmNsaWNrID0gZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgICAgICAgICAgICAgICAgZGVsZXRlU2VydmljZShzZXJ2aWNlLmlkKTsKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB3cmFwcGVyLmFwcGVuZENoaWxkKGRlbGV0ZUJ0bik7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgCiAgICAgICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZCh3cmFwcGVyKTsKICAgICAgICB9KTsKICAgICAgICAKICAgICAgICBjb25zdCBhZGRCdG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgICAgICBhZGRCdG4uY2xhc3NOYW1lID0gJ3BhbGV0dGUtYnRuIGJ0bi1hZGQtc2VydmljZSc7CiAgICAgICAgYWRkQnRuLmlubmVySFRNTCA9ICc8aSBjbGFzcz0iZmFzIGZhLXBsdXMiPjwvaT4nOwogICAgICAgIGFkZEJ0bi50aXRsZSA9ICdBam91dGVyIHVuIHNlcnZpY2UnOwogICAgICAgIGFkZEJ0bi5vbmNsaWNrID0gb3BlblNlcnZpY2VNb2RhbDsKICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoYWRkQnRuKTsKICAgICAgICAKICAgICAgICBjb25zdCBlcmFzZXJCdG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgICAgICBlcmFzZXJCdG4uY2xhc3NOYW1lID0gJ3BhbGV0dGUtYnRuIGJnLWVyYXNlcic7CiAgICAgICAgZXJhc2VyQnRuLmlubmVySFRNTCA9ICc8aSBjbGFzcz0iZmFzIGZhLWVyYXNlciI+PC9pPic7CiAgICAgICAgZXJhc2VyQnRuLm9uY2xpY2sgPSBmdW5jdGlvbigpIHsgc2V0VG9vbCgnZ29tbWUnLCAnJyk7IH07CiAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGVyYXNlckJ0bik7CiAgICAgICAgCiAgICAgICAgaWYoc2VydmljZXMubGVuZ3RoID4gMCkgewogICAgICAgICAgICBDVVJSRU5UX1RPT0wgPSB7IG5hbWU6IHNlcnZpY2VzWzBdLm5hbWUsIGNvbG9yOiBzZXJ2aWNlc1swXS5jb2xvciwgaXNFcmFzZXI6IGZhbHNlIH07CiAgICAgICAgfQogICAgfQogICAgCiAgICBmdW5jdGlvbiBvcGVuU2VydmljZU1vZGFsKCkgewogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtb2RhbC1zZXJ2aWNlJykuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7CiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NlcnZpY2UtbmFtZScpLnZhbHVlID0gJyc7CiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NlcnZpY2UtY29sb3InKS52YWx1ZSA9ICcjMzQ5OGRiJzsKICAgICAgICB1cGRhdGVQcmV2aWV3KCk7CiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NlcnZpY2UtbmFtZScpLmZvY3VzKCk7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIGNsb3NlU2VydmljZU1vZGFsKCkgewogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtb2RhbC1zZXJ2aWNlJykuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIHNldFByZXNldENvbG9yKGNvbG9yKSB7CiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NlcnZpY2UtY29sb3InKS52YWx1ZSA9IGNvbG9yOwogICAgICAgIHVwZGF0ZVByZXZpZXcoKTsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gdXBkYXRlUHJldmlldygpIHsKICAgICAgICBjb25zdCBuYW1lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NlcnZpY2UtbmFtZScpLnZhbHVlLnRyaW0oKSB8fCAnTk9VVkVBVSBTRVJWSUNFJzsKICAgICAgICBjb25zdCBjb2xvciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZXJ2aWNlLWNvbG9yJykudmFsdWU7CiAgICAgICAgY29uc3QgcHJldmlldyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZXJ2aWNlLXByZXZpZXcnKTsKICAgICAgICBwcmV2aWV3LnRleHRDb250ZW50ID0gbmFtZS50b1VwcGVyQ2FzZSgpOwogICAgICAgIHByZXZpZXcuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gY29sb3I7CiAgICAgICAgcHJldmlldy5zdHlsZS5jb2xvciA9IGlzTGlnaHRDb2xvcihjb2xvcikgPyAnIzMzMycgOiAnd2hpdGUnOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBjb25maXJtQWRkU2VydmljZSgpIHsKICAgICAgICBjb25zdCBuYW1lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NlcnZpY2UtbmFtZScpLnZhbHVlLnRyaW0oKTsKICAgICAgICBjb25zdCBjb2xvciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZXJ2aWNlLWNvbG9yJykudmFsdWU7CiAgICAgICAgCiAgICAgICAgaWYoIW5hbWUpIHsgYWxlcnQoJ1ZldWlsbGV6IGVudHJlciB1biBub20gcG91ciBsZSBzZXJ2aWNlJyk7IHJldHVybjsgfQogICAgICAgIGlmKG5hbWUubGVuZ3RoID4gMTUpIHsgYWxlcnQoJ0xlIG5vbSBkdSBzZXJ2aWNlIG5lIGRvaXQgcGFzIGTDqXBhc3NlciAxNSBjYXJhY3TDqHJlcycpOyByZXR1cm47IH0KICAgICAgICAKICAgICAgICBjb25zdCBhbGxTZXJ2aWNlcyA9IGdldEFsbFNlcnZpY2VzKCk7CiAgICAgICAgaWYoYWxsU2VydmljZXMuc29tZShzID0+IHMubmFtZS50b0xvd2VyQ2FzZSgpID09PSBuYW1lLnRvTG93ZXJDYXNlKCkpKSB7IGFsZXJ0KCdVbiBzZXJ2aWNlIGF2ZWMgY2Ugbm9tIGV4aXN0ZSBkw6lqw6AnKTsgcmV0dXJuOyB9CiAgICAgICAgCiAgICAgICAgY29uc3QgbmV3U2VydmljZSA9IHsgaWQ6ICdjdXN0b21fJyArIERhdGUubm93KCksIG5hbWU6IG5hbWUsIGNvbG9yOiBjb2xvciwgaXNEZWZhdWx0OiBmYWxzZSB9OwogICAgICAgIGlmKCFEQVRBLnNlcnZpY2VzKSBEQVRBLnNlcnZpY2VzID0gW107CiAgICAgICAgREFUQS5zZXJ2aWNlcy5wdXNoKG5ld1NlcnZpY2UpOwogICAgICAgIAogICAgICAgIHNhdmVMb2NhbFN0b3JhZ2UoKTsKICAgICAgICByZW5kZXJQYWxldHRlKCk7CiAgICAgICAgY2xvc2VTZXJ2aWNlTW9kYWwoKTsKICAgICAgICAKICAgICAgICBDVVJSRU5UX1RPT0wgPSB7IG5hbWU6IG5ld1NlcnZpY2UubmFtZSwgY29sb3I6IG5ld1NlcnZpY2UuY29sb3IsIGlzRXJhc2VyOiBmYWxzZSB9OwogICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5wYWxldHRlLWJ0bicpLmZvckVhY2goYiA9PiBiLmNsYXNzTGlzdC5yZW1vdmUoJ3NlbGVjdGVkJykpOwogICAgICAgIGNvbnN0IGJ0bnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcucGFsZXR0ZS1idG4nKTsKICAgICAgICBpZihidG5zLmxlbmd0aCA+IDIpIGJ0bnNbYnRucy5sZW5ndGggLSAzXS5jbGFzc0xpc3QuYWRkKCdzZWxlY3RlZCcpOyAKICAgIH0KICAgIAogICAgZnVuY3Rpb24gZGVsZXRlU2VydmljZShzZXJ2aWNlSWQpIHsKICAgICAgICBpZighY29uZmlybSgnU3VwcHJpbWVyIGNlIHNlcnZpY2UgPycpKSByZXR1cm47CiAgICAgICAgREFUQS5zZXJ2aWNlcyA9IChEQVRBLnNlcnZpY2VzIHx8IFtdKS5maWx0ZXIocyA9PiBzLmlkICE9PSBzZXJ2aWNlSWQpOwogICAgICAgIHNhdmVMb2NhbFN0b3JhZ2UoKTsKICAgICAgICByZW5kZXJQYWxldHRlKCk7CiAgICB9CiAgICAKICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZSkgewogICAgICAgIGNvbnN0IG1vZGFsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21vZGFsLXNlcnZpY2UnKTsKICAgICAgICBpZihlLnRhcmdldCA9PT0gbW9kYWwpIGNsb3NlU2VydmljZU1vZGFsKCk7CiAgICAgICAgY29uc3QgbW9kYWxHcmlkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21vZGFsLWdyaWQtY29uZmlnJyk7CiAgICAgICAgaWYoZS50YXJnZXQgPT09IG1vZGFsR3JpZCkgbW9kYWxHcmlkLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpOwogICAgfSk7CiAgICAKICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBmdW5jdGlvbigpIHsKICAgICAgICBjb25zdCBuYW1lSW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2VydmljZS1uYW1lJyk7CiAgICAgICAgaWYobmFtZUlucHV0KSBuYW1lSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCB1cGRhdGVQcmV2aWV3KTsKICAgIH0pOwoKICAgIC8vIC0tLSBMT0dJUVVFIE1FTlUgNCA6IFFVSSBGQUlUIFFVT0kgKFJFUEFSVElUSU9OKSAtLS0KICAgIGZ1bmN0aW9uIHJlbmRlclJlcGFydGl0aW9uKCkgewogICAgICAgIGNvbnN0IGRheSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXBhcnRpdGlvbi1kYXktc2VsZWN0JykudmFsdWU7CiAgICAgICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JlcGFydGl0aW9uLWNvbnRlbnQnKTsKICAgICAgICBjb25zdCBzZXJ2aWNlcyA9IGdldEFsbFNlcnZpY2VzKCk7CiAgICAgICAgCiAgICAgICAgaWYoIWNvbnRhaW5lcikgcmV0dXJuOwoKICAgICAgICBsZXQgaHRtbCA9IGA8dGFibGUgY2xhc3M9InJlcGFydGl0aW9uLXRhYmxlIj48dGhlYWQ+PHRyPmA7CiAgICAgICAgaHRtbCArPSBgPHRoIHN0eWxlPSJ3aWR0aDo5MHB4OyBiYWNrZ3JvdW5kOiMyYzNlNTA7IHotaW5kZXg6MjA7Ij5Ib3JhaXJlPC90aD5gOwogICAgICAgIAogICAgICAgIHNlcnZpY2VzLmZvckVhY2gocyA9PiB7CiAgICAgICAgICAgIGNvbnN0IGlzTGlnaHQgPSBpc0xpZ2h0Q29sb3Iocy5jb2xvcik7CiAgICAgICAgICAgIGNvbnN0IHRleHRDb2xvciA9IGlzTGlnaHQgPyAnIzMzMycgOiAnd2hpdGUnOwogICAgICAgICAgICBodG1sICs9IGA8dGggc3R5bGU9ImJhY2tncm91bmQ6JHtzLmNvbG9yfTsgY29sb3I6JHt0ZXh0Q29sb3J9OyBib3JkZXItY29sb3I6JHtpc0xpZ2h0PycjY2NjJzpzLmNvbG9yfSI+JHtzLm5hbWV9PC90aD5gOwogICAgICAgIH0pOwogICAgICAgIGh0bWwgKz0gYDwvdHI+PC90aGVhZD48dGJvZHk+YDsKCiAgICAgICAgY29uc3Qgc2xvdHMgPSAoREFUQS5jb25maWcuc2xvdHMgJiYgREFUQS5jb25maWcuc2xvdHMubGVuZ3RoID4gMCkgPyBEQVRBLmNvbmZpZy5zbG90cyA6IERFRkFVTFRfU0xPVFM7CgogICAgICAgIHNsb3RzLmZvckVhY2goKHNsb3QsIGluZGV4KSA9PiB7CiAgICAgICAgICAgIGh0bWwgKz0gYDx0cj48dGQgc3R5bGU9ImZvbnQtd2VpZ2h0OmJvbGQ7IGJhY2tncm91bmQ6I2YwZjJmNTsgdGV4dC1hbGlnbjpjZW50ZXI7IGJvcmRlci1yaWdodDoycHggc29saWQgI2NjYzsgZm9udC1zaXplOjAuNzVyZW07Ij4ke3Nsb3Quc3RhcnR9PGJyPi08YnI+JHtzbG90LmVuZH08L3RkPmA7CiAgICAgICAgICAgIAogICAgICAgICAgICBzZXJ2aWNlcy5mb3JFYWNoKHNlcnZpY2UgPT4gewogICAgICAgICAgICAgICAgbGV0IGFnZW50c09uUG9zdCA9IFtdOwogICAgICAgICAgICAgICAgREFUQS5hZ2VudHMuZm9yRWFjaChhZ2VudCA9PiB7CiAgICAgICAgICAgICAgICAgICAgY29uc3Qga2V5ID0gYCR7ZGF5fS0ke2luZGV4fWA7CiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2NoZWQgPSBEQVRBLnNjaGVkdWxlc1thZ2VudC5uYW1lXTsKICAgICAgICAgICAgICAgICAgICBpZihzY2hlZCAmJiBzY2hlZFtrZXldICYmIHNjaGVkW2tleV0udG9vbCA9PT0gc2VydmljZS5uYW1lKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGFnZW50c09uUG9zdC5wdXNoKGFnZW50Lm5hbWUpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBsZXQgY2VsbENvbnRlbnQgPSBhZ2VudHNPblBvc3QubWFwKG5hbWUgPT4gYDxzcGFuIGNsYXNzPSJhZ2VudC10YWciPiR7bmFtZX08L3NwYW4+YCkuam9pbignJyk7CiAgICAgICAgICAgICAgICBodG1sICs9IGA8dGQ+JHtjZWxsQ29udGVudH08L3RkPmA7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBodG1sICs9IGA8L3RyPmA7CiAgICAgICAgfSk7CgogICAgICAgIGh0bWwgKz0gYDwvdGJvZHk+PC90YWJsZT5gOwogICAgICAgIGNvbnRhaW5lci5pbm5lckhUTUwgPSBodG1sOwogICAgfQoKICAgIC8vIC0tLSBJTVBPUlQgRVhDRUwgLS0tCiAgICBmdW5jdGlvbiBoYW5kbGVFeGNlbChpbnB1dCkgewogICAgICAgIGNvbnN0IGYgPSBpbnB1dC5maWxlc1swXTsgCiAgICAgICAgaWYoIWYpIHJldHVybjsKICAgICAgICAKICAgICAgICBjb25zdCByID0gbmV3IEZpbGVSZWFkZXIoKTsKICAgICAgICByLm9ubG9hZCA9IGUgPT4gewogICAgICAgICAgICBjb25zdCB3YiA9IFhMU1gucmVhZChuZXcgVWludDhBcnJheShlLnRhcmdldC5yZXN1bHQpLCB7dHlwZTonYXJyYXknfSk7CiAgICAgICAgICAgIGNvbnN0IHJvd3MgPSBYTFNYLnV0aWxzLnNoZWV0X3RvX2pzb24od2IuU2hlZXRzW3diLlNoZWV0TmFtZXNbMF1dLCB7aGVhZGVyOjF9KTsKICAgICAgICAgICAgCiAgICAgICAgICAgIGNvbnN0IGhlYWRlciA9IHJvd3NbMF07CiAgICAgICAgICAgIGNvbnN0IHF1b3RpdGVzID0gW107CiAgICAgICAgICAgIC8vIE1PRElGSUNBVElPTiBJQ0kgOiBPbiBzY2FubmUganVzcXUnw6AgbGEgY29sb25uZSA4IChJbmRleCBJKSBwb3VyIGxlcyBxdW90aXTDqXMKICAgICAgICAgICAgZm9yKGxldCBjb2wgPSAxOyBjb2wgPD0gODsgY29sKyspIHsKICAgICAgICAgICAgICAgIGNvbnN0IHZhbCA9IHBhcnNlRmxvYXQoaGVhZGVyW2NvbF0pOwogICAgICAgICAgICAgICAgaWYoIWlzTmFOKHZhbCkgJiYgdmFsID4gMCkgewogICAgICAgICAgICAgICAgICAgIGNvbnN0IGZ0ZSA9IHZhbCA+IDEgPyB2YWwgLyAxMDAgOiB2YWw7CiAgICAgICAgICAgICAgICAgICAgcXVvdGl0ZXMucHVzaCh7IGNvbHVtbjogY29sLCBmdGU6IGZ0ZSwgbGFiZWw6IE1hdGgucm91bmQoZnRlICogMTAwKSArICclJyB9KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICAKICAgICAgICAgICAgREFUQS5xdW90aXRlcyA9IHF1b3RpdGVzOwogICAgICAgICAgICBEQVRBLmFnZW50cyA9IFtdOwogICAgICAgICAgICAKICAgICAgICAgICAgZm9yKGxldCBpID0gMTsgaSA8IHJvd3MubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAgIGNvbnN0IGMgPSByb3dzW2ldOyAKICAgICAgICAgICAgICAgIGlmKCFjIHx8ICFjWzBdKSBjb250aW51ZTsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgbGV0IGZ0ZSA9IDA7CiAgICAgICAgICAgICAgICBsZXQgZnRlTGFiZWwgPSAiSW5jb25udSI7CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIGZvcihjb25zdCBxIG9mIHF1b3RpdGVzKSB7CiAgICAgICAgICAgICAgICAgICAgaWYoY2hlY2tYKGNbcS5jb2x1bW5dKSkgewogICAgICAgICAgICAgICAgICAgICAgICBmdGUgPSBxLmZ0ZTsKICAgICAgICAgICAgICAgICAgICAgICAgZnRlTGFiZWwgPSBxLmxhYmVsOwogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIGlmKGZ0ZSA9PT0gMCkgY29udGludWU7CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIC8vIE1PRElGSUNBVElPTiBJQ0kgOiBSw6lhbGlnbmVtZW50IGRlcyBjb2xvbm5lcyBzZWxvbiBsZSBub3V2ZWF1IGZpY2hpZXIKICAgICAgICAgICAgICAgIC8vIENvbCAxMCAoSykgPSBUZW1wcyBkZSB0cmF2YWlsIGFubnVlbAogICAgICAgICAgICAgICAgLy8gQ29sIDExIChMKSA9IENyw6lkaXQgZm9ybWF0aW9uCiAgICAgICAgICAgICAgICAvLyBDb2wgOSAoSikgPSBDb250cmFpbnRlcwogICAgICAgICAgICAgICAgY29uc3QgYmFzZSA9IHBhcnNlRmxvYXQoY1sxMF0pIHx8IDE2MDc7CiAgICAgICAgICAgICAgICBjb25zdCBjcmVkaXQgPSBwYXJzZUZsb2F0KGNbMTFdKSB8fCAwOwogICAgICAgICAgICAgICAgY29uc3QgbmV0QW5udWFsID0gKGJhc2UgKiBmdGUpIC0gY3JlZGl0OwogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBEQVRBLmFnZW50cy5wdXNoKHsKICAgICAgICAgICAgICAgICAgICBuYW1lOiBjWzBdLCBmdGU6IGZ0ZSwgZnRlTGFiZWw6IGZ0ZUxhYmVsLCBiYXNlOiBiYXNlLAogICAgICAgICAgICAgICAgICAgIHJhd0FubnVhbDogYmFzZSAqIGZ0ZSwgY3JlZGl0OiBjcmVkaXQsIG5ldEFubnVhbDogbmV0QW5udWFsLCAKICAgICAgICAgICAgICAgICAgICB3ZWVrbHlUYXJnZXQ6IE1hdGgubWF4KDAsIG5ldEFubnVhbCAvIDM5KSwgaW50ZXJuYXRIb3VyczogMCwKICAgICAgICAgICAgICAgICAgICBjb25zdHJhaW50czogKGNbOV0gfHwgIiIpLnRyaW0oKQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgc2F2ZUxvY2FsU3RvcmFnZSgpOyAKICAgICAgICAgICAgcmVmcmVzaEFsbFVJKCk7CiAgICAgICAgfTsKICAgICAgICByLnJlYWRBc0FycmF5QnVmZmVyKGYpOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBjaGVja1godikgeyByZXR1cm4gdiAmJiBTdHJpbmcodikudG9VcHBlckNhc2UoKS50cmltKCkgPT09ICdYJzsgfQoKICAgIC8vIC0tLSBBRkZJQ0hBR0UgSU5GTyBJTVBPUlQgLS0tCiAgICBmdW5jdGlvbiByZW5kZXJJbXBvcnRJbmZvKCkgewogICAgICAgIGNvbnN0IGFyZWEgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW1wb3J0LWluZm8tYXJlYScpOwogICAgICAgIGlmKCFEQVRBLnF1b3RpdGVzIHx8IERBVEEucXVvdGl0ZXMubGVuZ3RoID09PSAwKSB7IGFyZWEuaW5uZXJIVE1MID0gJyc7IHJldHVybjsgfQogICAgICAgIAogICAgICAgIGNvbnN0IHF1b3RpdGVIdG1sID0gREFUQS5xdW90aXRlcy5tYXAocSA9PiBgPHNwYW4gY2xhc3M9InF1b3RpdGUtaXRlbSI+PHN0cm9uZz4ke3EubGFiZWx9PC9zdHJvbmc+IChjb2wuJHtxLmNvbHVtbiArIDF9KTwvc3Bhbj5gKS5qb2luKCcnKTsKICAgICAgICBhcmVhLmlubmVySFRNTCA9IGAKICAgICAgICAgICAgPGRpdiBjbGFzcz0iaW1wb3J0LWluZm8iPgogICAgICAgICAgICAgICAgPGkgY2xhc3M9ImZhcyBmYS1pbmZvLWNpcmNsZSIgc3R5bGU9ImNvbG9yOnZhcigtLXNlY29uZGFyeSkiPjwvaT4KICAgICAgICAgICAgICAgIDxzdHJvbmc+RmljaGllciBpbXBvcnTDqTwvc3Ryb25nPiAtICR7REFUQS5hZ2VudHMubGVuZ3RofSBhZ2VudChzKSBjaGFyZ8OpKHMpCiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJxdW90aXRlLWxpc3QiPjxzcGFuIHN0eWxlPSJmb250LXdlaWdodDpib2xkOyBtYXJnaW4tcmlnaHQ6MTBweDsiPlF1b3RpdMOpcyBkw6l0ZWN0w6llcyA6PC9zcGFuPiR7cXVvdGl0ZUh0bWx9PC9kaXY+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgIGA7CiAgICB9CgogICAgZnVuY3Rpb24gcmVuZGVyT3ZlcnZpZXcoKSB7CiAgICAgICAgY29uc3QgYyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkYXNoYm9hcmQtYXJlYScpOyAKICAgICAgICBjLmlubmVySFRNTCA9ICcnOwogICAgICAgIGlmKERBVEEuYWdlbnRzLmxlbmd0aCA9PT0gMCkgeyAKICAgICAgICAgICAgYy5pbm5lckhUTUwgPSAnPGRpdiBzdHlsZT0iZ3JpZC1jb2x1bW46MS8tMTt0ZXh0LWFsaWduOmNlbnRlcjtwYWRkaW5nOjUwcHg7Y29sb3I6I2FhYTsiPjxpIGNsYXNzPSJmYXMgZmEtZm9sZGVyLW9wZW4iIHN0eWxlPSJmb250LXNpemU6M3JlbTsgbWFyZ2luLWJvdHRvbToxMHB4OyI+PC9pPjxicj5BdWN1bmUgZG9ubsOpZS4gVmV1aWxsZXogaW1wb3J0ZXIgdW4gZmljaGllciBFeGNlbCBvdSByZXN0YXVyZXIgdW5lIHNhdXZlZ2FyZGUuPC9kaXY+JzsgCiAgICAgICAgICAgIHJldHVybjsgCiAgICAgICAgfQogICAgICAgIAogICAgICAgIERBVEEuYWdlbnRzLmZvckVhY2goYSA9PiB7CiAgICAgICAgICAgIGNvbnN0IHN0YW5kYXJkUXVvdGl0ZXMgPSBbMSwgMC44LCAwLjUsIDAuMjVdOwogICAgICAgICAgICBjb25zdCBpc1N0YW5kYXJkID0gc3RhbmRhcmRRdW90aXRlcy5zb21lKHNxID0+IE1hdGguYWJzKHNxIC0gYS5mdGUpIDwgMC4wMSk7CiAgICAgICAgICAgIGNvbnN0IGJhZGdlQ2xhc3MgPSBpc1N0YW5kYXJkID8gJ2JhZGdlLXN0YW5kYXJkJyA6ICdiYWRnZS1jdXN0b20nOwogICAgICAgICAgICAKICAgICAgICAgICAgYy5pbm5lckhUTUwgKz0gYDxkaXYgY2xhc3M9ImFlZC1zdW1tYXJ5LWNhcmQiPgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iY2FyZC1oZWFkZXIiPjxzcGFuIHN0eWxlPSJmb250LXdlaWdodDpib2xkO2NvbG9yOnZhcigtLXByaW1hcnkpIj4ke2EubmFtZX08L3NwYW4+PHNwYW4gY2xhc3M9IiR7YmFkZ2VDbGFzc30iIHN0eWxlPSJjb2xvcjp3aGl0ZTtwYWRkaW5nOjJweCA4cHg7Ym9yZGVyLXJhZGl1czoxMHB4O2ZvbnQtc2l6ZTowLjhyZW0iPiR7YS5mdGVMYWJlbH08L3NwYW4+PC9kaXY+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJjYXJkLWJvZHkiPgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InN0YXQtcm93Ij48c3Bhbj5RdW90aXTDqTwvc3Bhbj48c3Bhbj4keyhhLmZ0ZSAqIDEwMCkudG9GaXhlZCgwKX0lICgke2EuZnRlLnRvRml4ZWQoMil9KTwvc3Bhbj48L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJzdGF0LXJvdyI+PHNwYW4+QmFzZSBhbm51ZWxsZTwvc3Bhbj48c3Bhbj4ke2EuYmFzZX1oPC9zcGFuPjwvZGl2PgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InN0YXQtcm93Ij48c3Bhbj5UZW1wcyBwcm9yYXTDqTwvc3Bhbj48c3Bhbj4ke2EucmF3QW5udWFsLnRvRml4ZWQoMSl9aDwvc3Bhbj48L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJzdGF0LXJvdyI+PHNwYW4+Q3LDqWRpdCBmb3JtYXRpb248L3NwYW4+PHNwYW4+LSR7YS5jcmVkaXR9aDwvc3Bhbj48L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJzdGF0LXJvdyI+PHNwYW4+TmV0IEFubnVlbDwvc3Bhbj48c3Bhbj48c3Ryb25nPiR7YS5uZXRBbm51YWwudG9GaXhlZCgxKX1oPC9zdHJvbmc+PC9zcGFuPjwvZGl2PgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InN0YXQtcm93IiBzdHlsZT0iYmFja2dyb3VuZDojZjBmOWZmO2ZvbnQtd2VpZ2h0OmJvbGQ7Y29sb3I6IzI5ODBiOTttYXJnaW4tdG9wOjVweDtwYWRkaW5nOjVweDsiPjxzcGFuPkNpYmxlIEhlYmRvICjDtzM5KTwvc3Bhbj48c3Bhbj4ke2Eud2Vla2x5VGFyZ2V0LnRvRml4ZWQoMil9aDwvc3Bhbj48L2Rpdj4KICAgICAgICAgICAgICAgICAgICAke2EuY29uc3RyYWludHMgPyBgPGRpdiBjbGFzcz0iY29uc3RyYWludHMtYm94Ij7imqDvuI8gJHthLmNvbnN0cmFpbnRzfTwvZGl2PmAgOiAnJ30KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8L2Rpdj5gOwogICAgICAgIH0pOwogICAgfQoKICAgIC8vIC0tLSBDT05DRVBUSU9OIC0tLQogICAgZnVuY3Rpb24gcG9wdWxhdGVTZWxlY3RzKCkgewogICAgICAgIGNvbnN0IHMxID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FlZC1zZWxlY3QtY29uY2VwdGlvbicpOwogICAgICAgIGNvbnN0IHMyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FlZC1zZWxlY3QtZ2VzdGlvbicpOwogICAgICAgIGNvbnN0IHYxID0gczEudmFsdWUsIHYyID0gczIudmFsdWU7CiAgICAgICAgczEuaW5uZXJIVE1MID0gczIuaW5uZXJIVE1MID0gJzxvcHRpb24gdmFsdWU9IiI+LS0gU8OpbGVjdGlvbm5lciAtLTwvb3B0aW9uPic7CiAgICAgICAgREFUQS5hZ2VudHMuZm9yRWFjaChhID0+IHsKICAgICAgICAgICAgY29uc3Qgb3B0ID0gYDxvcHRpb24gdmFsdWU9IiR7YS5uYW1lfSI+JHthLm5hbWV9ICgke2EuZnRlTGFiZWx9KTwvb3B0aW9uPmA7CiAgICAgICAgICAgIHMxLmlubmVySFRNTCArPSBvcHQ7IHMyLmlubmVySFRNTCArPSBvcHQ7CiAgICAgICAgfSk7CiAgICAgICAgaWYodjEpIHMxLnZhbHVlID0gdjE7IGlmKHYyKSBzMi52YWx1ZSA9IHYyOwogICAgfQoKICAgIGZ1bmN0aW9uIGNoYW5nZUFFRCh2aWV3KSB7IAogICAgICAgIGlmKHZpZXcgPT09ICdjb25jZXB0aW9uJykgeyAKICAgICAgICAgICAgY29uc3QgbmFtZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhZWQtc2VsZWN0LWNvbmNlcHRpb24nKS52YWx1ZTsKICAgICAgICAgICAgY29uc3QgYWdlbnQgPSBEQVRBLmFnZW50cy5maW5kKGEgPT4gYS5uYW1lID09PSBuYW1lKTsKICAgICAgICAgICAgaWYoYWdlbnQpIHsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ludGVybmF0LWhvdXJzJykudmFsdWUgPSBhZ2VudC5pbnRlcm5hdEhvdXJzIHx8IDA7IH0KICAgICAgICAgICAgcmVuZGVyVGltZXRhYmxlKCk7IHVwZGF0ZVN0YXRzSGVhZGVyKCk7IAogICAgICAgIH0gZWxzZSB7IHVwZGF0ZUdlc3Rpb25VSSgpOyB9IAogICAgfQoKICAgIGZ1bmN0aW9uIHNldFRvb2wobmFtZSwgY29sb3IpIHsKICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcucGFsZXR0ZS1idG4nKS5mb3JFYWNoKGIgPT4gYi5jbGFzc0xpc3QucmVtb3ZlKCdzZWxlY3RlZCcpKTsKICAgICAgICBpZihuYW1lICE9PSAnZ29tbWUnKSBldmVudC50YXJnZXQuY2xhc3NMaXN0LmFkZCgnc2VsZWN0ZWQnKTsKICAgICAgICBDVVJSRU5UX1RPT0wgPSBuYW1lID09PSAnZ29tbWUnID8ge2lzRXJhc2VyOiB0cnVlfSA6IHtuYW1lOiBuYW1lLCBjb2xvcjogY29sb3IsIGlzRXJhc2VyOiBmYWxzZX07CiAgICB9CgogICAgZnVuY3Rpb24gcmVuZGVyVGltZXRhYmxlKCkgewogICAgICAgIGNvbnN0IG5hbWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWVkLXNlbGVjdC1jb25jZXB0aW9uJykudmFsdWU7CiAgICAgICAgY29uc3QgdGFibGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGltZXRhYmxlJyk7CiAgICAgICAgaWYoIW5hbWUpIHsgdGFibGUuaW5uZXJIVE1MID0gJyc7IHJldHVybjsgfQogICAgICAgIHRhYmxlLmlubmVySFRNTCA9IGdlbmVyYXRlVGFibGVIVE1MKG5hbWUpOwogICAgICAgIAogICAgICAgIHRhYmxlLnF1ZXJ5U2VsZWN0b3JBbGwoJ3RkOm5vdCgudGltZS1jb2wpJykuZm9yRWFjaCh0ZCA9PiB7CiAgICAgICAgICAgIHRkLm9uY2xpY2sgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgIGNvbnN0IHRyID0gdGhpcy5wYXJlbnROb2RlOwogICAgICAgICAgICAgICAgY29uc3Qgcm93SW5kZXggPSBBcnJheS5mcm9tKHRyLnBhcmVudE5vZGUuY2hpbGRyZW4pLmluZGV4T2YodHIpOwogICAgICAgICAgICAgICAgY29uc3QgY29sSW5kZXggPSBBcnJheS5mcm9tKHRyLmNoaWxkcmVuKS5pbmRleE9mKHRoaXMpIC0gMTsgCiAgICAgICAgICAgICAgICBpZihjb2xJbmRleCA8IDApIHJldHVybjsKICAgICAgICAgICAgICAgIC8vIHJvd0luZGV4IGNvcnJlc3BvbmQgw6AgbCdpbmRleCBkdSBzbG90CiAgICAgICAgICAgICAgICBjb25zdCBkYXkgPSBEQVlTW2NvbEluZGV4XTsKICAgICAgICAgICAgICAgIGNsaWNrQ2VsbChkYXksIHJvd0luZGV4KTsKICAgICAgICAgICAgfQogICAgICAgIH0pOwogICAgfQoKICAgIGZ1bmN0aW9uIGNsaWNrQ2VsbChkYXksIHNsb3RJbmRleCkgewogICAgICAgIGNvbnN0IG5hbWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWVkLXNlbGVjdC1jb25jZXB0aW9uJykudmFsdWU7CiAgICAgICAgaWYoIW5hbWUpIHJldHVybjsKICAgICAgICBjb25zdCBhZ2VudCA9IERBVEEuYWdlbnRzLmZpbmQoYSA9PiBhLm5hbWUgPT09IG5hbWUpOwogICAgICAgIGlmKGFnZW50ICYmIGFnZW50LmNvbnN0cmFpbnRzLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoZGF5LnRvTG93ZXJDYXNlKCkpKSByZXR1cm47CgogICAgICAgIGlmKCFEQVRBLnNjaGVkdWxlc1tuYW1lXSkgREFUQS5zY2hlZHVsZXNbbmFtZV0gPSB7fTsKICAgICAgICBjb25zdCBrZXkgPSBgJHtkYXl9LSR7c2xvdEluZGV4fWA7IC8vIENsw6kgYmFzw6llIHN1ciBsJ2luZGV4IGR1IGNyw6luZWF1CgogICAgICAgIGlmKENVUlJFTlRfVE9PTC5pc0VyYXNlcikgZGVsZXRlIERBVEEuc2NoZWR1bGVzW25hbWVdW2tleV07CiAgICAgICAgZWxzZSBEQVRBLnNjaGVkdWxlc1tuYW1lXVtrZXldID0geyB0b29sOiBDVVJSRU5UX1RPT0wubmFtZSwgY29sb3I6IENVUlJFTlRfVE9PTC5jb2xvciB9OwogICAgICAgIAogICAgICAgIHNhdmVMb2NhbFN0b3JhZ2UoKTsKICAgICAgICByZW5kZXJUaW1ldGFibGUoKTsKICAgICAgICB1cGRhdGVTdGF0c0hlYWRlcigpOwogICAgfQoKICAgIGZ1bmN0aW9uIHVwZGF0ZVN0YXRzSGVhZGVyKCkgewogICAgICAgIGNvbnN0IG5hbWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWVkLXNlbGVjdC1jb25jZXB0aW9uJykudmFsdWU7CiAgICAgICAgY29uc3QgZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaGVhZGVyLXN0YXRzJyk7CiAgICAgICAgaWYoIW5hbWUpIHsgZWwuaW5uZXJUZXh0ID0gIjBoIC8gMGgiOyByZXR1cm47IH0KICAgICAgICAKICAgICAgICBjb25zdCBhZ2VudCA9IERBVEEuYWdlbnRzLmZpbmQoYSA9PiBhLm5hbWUgPT09IG5hbWUpOwogICAgICAgIGNvbnN0IGludGVybmF0ID0gYWdlbnQuaW50ZXJuYXRIb3VycyB8fCAwOwogICAgICAgIAogICAgICAgIC8vIENhbGN1bCBkdSB0ZW1wcyBwbGFuaWZpw6kgYmFzw6kgc3VyIGxhIGR1csOpZSByw6llbGxlIGRlcyBzbG90cwogICAgICAgIGxldCB0b3RhbE1pbnV0ZXMgPSAwOwogICAgICAgIGNvbnN0IHNsb3RzID0gKERBVEEuY29uZmlnLnNsb3RzICYmIERBVEEuY29uZmlnLnNsb3RzLmxlbmd0aCA+IDApID8gREFUQS5jb25maWcuc2xvdHMgOiBERUZBVUxUX1NMT1RTOwogICAgICAgIGNvbnN0IHNjaGVkID0gREFUQS5zY2hlZHVsZXNbbmFtZV0gfHwge307CgogICAgICAgIERBWVMuZm9yRWFjaChkYXkgPT4gewogICAgICAgICAgICBzbG90cy5mb3JFYWNoKChzbG90LCBpbmRleCkgPT4gewogICAgICAgICAgICAgICAgY29uc3Qga2V5ID0gYCR7ZGF5fS0ke2luZGV4fWA7CiAgICAgICAgICAgICAgICBpZihzY2hlZFtrZXldKSB7CiAgICAgICAgICAgICAgICAgICAgLy8gQ2FsY3VsIGR1csOpZSBzbG90CiAgICAgICAgICAgICAgICAgICAgY29uc3QgW2gxLCBtMV0gPSBzbG90LnN0YXJ0LnNwbGl0KCc6JykubWFwKE51bWJlcik7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgW2gyLCBtMl0gPSBzbG90LmVuZC5zcGxpdCgnOicpLm1hcChOdW1iZXIpOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IGR1cmF0aW9uID0gKGgyICogNjAgKyBtMikgLSAoaDEgKiA2MCArIG0xKTsKICAgICAgICAgICAgICAgICAgICBpZihkdXJhdGlvbiA+IDApIHRvdGFsTWludXRlcyArPSBkdXJhdGlvbjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgfSk7CgogICAgICAgIGNvbnN0IGdyaWRIb3VycyA9IHRvdGFsTWludXRlcyAvIDYwOwogICAgICAgIGNvbnN0IHRvdGFsUGxhbm5lZCA9IGdyaWRIb3VycyArIGludGVybmF0OwogICAgICAgIGNvbnN0IHRhcmdldCA9IGFnZW50LndlZWtseVRhcmdldDsKICAgICAgICBjb25zdCBkaWZmID0gdG90YWxQbGFubmVkIC0gdGFyZ2V0OwogICAgICAgIAogICAgICAgIGVsLmlubmVySFRNTCA9IGBDaWJsZTogJHt0YXJnZXQudG9GaXhlZCgyKX1oIHwgUGxhbmlmacOpOiAke3RvdGFsUGxhbm5lZC50b0ZpeGVkKDIpfWggPHNtYWxsPihkb250ICR7aW50ZXJuYXR9aCBJbnQuKTwvc21hbGw+IHwgPHNwYW4gc3R5bGU9ImNvbG9yOiR7TWF0aC5hYnMoZGlmZikgPCAxID8gJ2dyZWVuJyA6ICdyZWQnfSI+RGlmZjogJHtkaWZmID4gMCA/ICcrJyA6ICcnfSR7ZGlmZi50b0ZpeGVkKDIpfWg8L3NwYW4+YDsKICAgIH0KCiAgICAvLyAtLS0gR0VTVElPTiAtLS0KICAgIGZ1bmN0aW9uIGFkZEFkanVzdG1lbnQoKSB7CiAgICAgICAgY29uc3QgbmFtZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhZWQtc2VsZWN0LWdlc3Rpb24nKS52YWx1ZTsKICAgICAgICBpZighbmFtZSkgcmV0dXJuIGFsZXJ0KCJTw6lsZWN0aW9ubmV6IHVuIGFnZW50Iik7CiAgICAgICAgY29uc3QgdHlwZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhZGotdHlwZScpLnZhbHVlOwogICAgICAgIGNvbnN0IGFtdCA9IHBhcnNlRmxvYXQoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Fkai1hbW91bnQnKS52YWx1ZSk7CiAgICAgICAgY29uc3QgciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhZGotcmVhc29uJykudmFsdWU7CiAgICAgICAgaWYoIWFtdCB8fCAhcikgcmV0dXJuIGFsZXJ0KCJJbmZvcyBtYW5xdWFudGVzIik7CiAgICAgICAgaWYoIURBVEEuYWRqdXN0bWVudHNbbmFtZV0pIERBVEEuYWRqdXN0bWVudHNbbmFtZV0gPSBbXTsKICAgICAgICBEQVRBLmFkanVzdG1lbnRzW25hbWVdLnB1c2goe2lkOiBEYXRlLm5vdygpLCBkYXRlOiBuZXcgRGF0ZSgpLnRvTG9jYWxlRGF0ZVN0cmluZygpLCB0eXBlLCBhbW91bnQ6IGFtdCwgcmVhc29uOiByfSk7CiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Fkai1hbW91bnQnKS52YWx1ZSA9ICcnOyAKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWRqLXJlYXNvbicpLnZhbHVlID0gJyc7CiAgICAgICAgc2F2ZUxvY2FsU3RvcmFnZSgpOyB1cGRhdGVHZXN0aW9uVUkoKTsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gdXBkYXRlR2VzdGlvblVJKCkgewogICAgICAgIGNvbnN0IG5hbWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWVkLXNlbGVjdC1nZXN0aW9uJykudmFsdWU7CiAgICAgICAgY29uc3QgdGIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaGlzdG9yeS1ib2R5Jyk7CiAgICAgICAgY29uc3QgYmFsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2JhbGFuY2UtZGlzcGxheScpOwogICAgICAgIGNvbnN0IHRhcmdldEJhbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhbm51YWwtdGFyZ2V0LWRpc3BsYXknKTsKICAgICAgICAKICAgICAgICB0Yi5pbm5lckhUTUwgPSAnJzsgYmFsLmlubmVyVGV4dCA9ICcwaCc7IHRhcmdldEJhbC5pbm5lclRleHQgPSAnMGgnOwogICAgICAgIGlmKCFuYW1lKSByZXR1cm47CiAgICAgICAgCiAgICAgICAgY29uc3QgYWdlbnQgPSBEQVRBLmFnZW50cy5maW5kKGEgPT4gYS5uYW1lID09PSBuYW1lKTsKICAgICAgICBpZihhZ2VudCAmJiBhZ2VudC5uZXRBbm51YWwpIHRhcmdldEJhbC5pbm5lclRleHQgPSBhZ2VudC5uZXRBbm51YWwudG9GaXhlZCgxKSArICdoJzsKCiAgICAgICAgbGV0IGIgPSAwOwogICAgICAgIChEQVRBLmFkanVzdG1lbnRzW25hbWVdIHx8IFtdKS5mb3JFYWNoKChhLCBpKSA9PiB7CiAgICAgICAgICAgIGNvbnN0IHAgPSBhLnR5cGUgPT09ICdwbHVzJzsgYiArPSBwID8gYS5hbW91bnQgOiAtYS5hbW91bnQ7CiAgICAgICAgICAgIHRiLmlubmVySFRNTCArPSBgPHRyPjx0ZD4ke2EuZGF0ZX08L3RkPjx0ZCBzdHlsZT0iY29sb3I6JHtwID8gJ2dyZWVuJyA6ICdyZWQnfSI+JHtwID8gJysnIDogJy0nfTwvdGQ+PHRkPiR7YS5yZWFzb259PC90ZD48dGQ+JHthLmFtb3VudH1oPC90ZD48dGQ+PGkgY2xhc3M9ImZhcyBmYS10cmFzaCIgb25jbGljaz0iZGVsQWRqKCcke25hbWV9Jywke2l9KSIgc3R5bGU9ImN1cnNvcjpwb2ludGVyIj48L2k+PC90ZD48L3RyPmA7CiAgICAgICAgfSk7CiAgICAgICAgYmFsLmlubmVyVGV4dCA9IChiID4gMCA/ICcrJyA6ICcnKSArIGIgKyAnaCc7IAogICAgICAgIGJhbC5zdHlsZS5jb2xvciA9IGIgPj0gMCA/ICd3aGl0ZScgOiAnI2ZhYjFhMCc7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIGRlbEFkaihuLCBpKSB7IERBVEEuYWRqdXN0bWVudHNbbl0uc3BsaWNlKGksIDEpOyBzYXZlTG9jYWxTdG9yYWdlKCk7IHVwZGF0ZUdlc3Rpb25VSSgpOyB9Cgo8L3NjcmlwdD4KCjxzY3JpcHQ+CndpbmRvdy5wYXJlbnQucG9zdE1lc3NhZ2UoeyB0eXBlOiAncGlsb3RlLW1vZHVsZS1yZWFkeScsIG1vZHVsZTogJ2FlZCcgfSwgJyonKTsKPC9zY3JpcHQ+CgoKPHNjcmlwdD4KZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGZ1bmN0aW9uKGUpIHsKICAgIGlmICghZS5jdHJsS2V5IHx8IGUuc2hpZnRLZXkgfHwgZS5hbHRLZXkgfHwgZS5tZXRhS2V5KSByZXR1cm47CiAgICB2YXIga2V5ID0gZS5rZXkudG9Mb3dlckNhc2UoKTsKICAgIGlmIChbJ3AnLCdlJywnbycsJ2EnLCdkJ10uaW5kZXhPZihrZXkpID49IDApIHsKICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgd2luZG93LnBhcmVudC5wb3N0TWVzc2FnZSh7dHlwZToncGlsb3RlLXNob3J0Y3V0Jywga2V5OmtleX0sICcqJyk7CiAgICB9Cn0pOwo8L3NjcmlwdD4KPC9ib2R5Pgo8L2h0bWw+"
,
  "bibase": "PCFET0NUWVBFIGh0bWw+CjxodG1sIGxhbmc9ImZyIj4KPGhlYWQ+CiAgICA8bWV0YSBjaGFyc2V0PSJVVEYtOCI+CiAgICA8bWV0YSBuYW1lPSJ2aWV3cG9ydCIgY29udGVudD0id2lkdGg9ZGV2aWNlLXdpZHRoLCBpbml0aWFsLXNjYWxlPTEuMCI+CiAgICA8dGl0bGU+QnVsbGV0aW4gZCdpbmZvcm1hdGlvbjwvdGl0bGU+CiAgICA8IS0tIFRhaWx3aW5kIENTUyAtLT4KICAgIDxzY3JpcHQgc3JjPSJodHRwczovL2Nkbi50YWlsd2luZGNzcy5jb20iPjwvc2NyaXB0PgogICAgPCEtLSBIVE1MMlBERiAtLT4KICAgIDxzY3JpcHQgc3JjPSJodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9odG1sMnBkZi5qcy8wLjEwLjEvaHRtbDJwZGYuYnVuZGxlLm1pbi5qcyI+PC9zY3JpcHQ+CiAgICA8IS0tIEV4cG9ydCBXb3JkIChodG1sLWRvY3gtanMpICYgRmlsZVNhdmVyIC0tPgogICAgPHNjcmlwdCBzcmM9Imh0dHBzOi8vdW5wa2cuY29tL2h0bWwtZG9jeC1qcy9kaXN0L2h0bWwtZG9jeC5qcyI+PC9zY3JpcHQ+CiAgICA8c2NyaXB0IHNyYz0iaHR0cHM6Ly9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvRmlsZVNhdmVyLmpzLzIuMC41L0ZpbGVTYXZlci5taW4uanMiPjwvc2NyaXB0PgoKICAgIDwhLS0gUXVpbGwgRWRpdG9yIChXWVNJV1lHKSAtLT4KICAgIDxsaW5rIGhyZWY9Imh0dHBzOi8vY2RuLnF1aWxsanMuY29tLzEuMy42L3F1aWxsLnNub3cuY3NzIiByZWw9InN0eWxlc2hlZXQiPgogICAgPHNjcmlwdCBzcmM9Imh0dHBzOi8vY2RuLnF1aWxsanMuY29tLzEuMy42L3F1aWxsLm1pbi5qcyI+PC9zY3JpcHQ+CiAgICAKICAgIDwhLS0gRm9udCAtLT4KICAgIDxzdHlsZT4KICAgICAgICBAaW1wb3J0IHVybCgnaHR0cHM6Ly9mb250cy5nb29nbGVhcGlzLmNvbS9jc3MyP2ZhbWlseT1JbnRlcjp3Z2h0QDMwMDs0MDA7NTAwOzYwMDs3MDAmZmFtaWx5PU1lcnJpd2VhdGhlcjp3Z2h0QDMwMDs0MDA7NzAwJmZhbWlseT1Sb2JvdG8rTW9ubzp3Z2h0QDQwMDs2MDAmZGlzcGxheT1zd2FwJyk7CiAgICAgICAgCiAgICAgICAgYm9keSB7IGZvbnQtZmFtaWx5OiAnSW50ZXInLCBzYW5zLXNlcmlmOyB9CiAgICAgICAgCiAgICAgICAgLyogRm9udCBDbGFzc2VzICovCiAgICAgICAgLmZvbnQtaW50ZXIgeyBmb250LWZhbWlseTogJ0ludGVyJywgc2Fucy1zZXJpZjsgfQogICAgICAgIC5mb250LXNlcmlmIHsgZm9udC1mYW1pbHk6ICdNZXJyaXdlYXRoZXInLCBzZXJpZjsgfQogICAgICAgIC5mb250LW1vbm8geyBmb250LWZhbWlseTogJ1JvYm90byBNb25vJywgbW9ub3NwYWNlOyB9CgogICAgICAgIC8qIFNjcm9sbGJhciBjdXN0b21pc2F0aW9uICovCiAgICAgICAgOjotd2Via2l0LXNjcm9sbGJhciB7IHdpZHRoOiA2cHg7IH0KICAgICAgICA6Oi13ZWJraXQtc2Nyb2xsYmFyLXRyYWNrIHsgYmFja2dyb3VuZDogI2YxZjVmOTsgfQogICAgICAgIDo6LXdlYmtpdC1zY3JvbGxiYXItdGh1bWIgeyBiYWNrZ3JvdW5kOiAjY2JkNWUxOyBib3JkZXItcmFkaXVzOiAzcHg7IH0KICAgICAgICA6Oi13ZWJraXQtc2Nyb2xsYmFyLXRodW1iOmhvdmVyIHsgYmFja2dyb3VuZDogIzk0YTNiODsgfQoKICAgICAgICAvKiBBNCBQYXBlciBTdHlsZSBmb3IgUHJldmlldyAqLwogICAgICAgIC5hNC1wYWdlIHsKICAgICAgICAgICAgd2lkdGg6IDIxMG1tOwogICAgICAgICAgICBtaW4taGVpZ2h0OiAyODBtbTsKICAgICAgICAgICAgcGFkZGluZzogMTVtbTsKICAgICAgICAgICAgbWFyZ2luOiAwIGF1dG87CiAgICAgICAgICAgIGJhY2tncm91bmQ6IHdoaXRlOwogICAgICAgICAgICBib3gtc2hhZG93OiAwIDAgMTVweCByZ2JhKDAsMCwwLDAuMSk7CiAgICAgICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTsKICAgICAgICAgICAgZm9udC1zaXplOiAxMXB0OwogICAgICAgICAgICBsaW5lLWhlaWdodDogMS40OwogICAgICAgICAgICBjb2xvcjogIzFmMjkzNzsKICAgICAgICAgICAgZGlzcGxheTogZmxleDsKICAgICAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsKICAgICAgICB9CgogICAgICAgIC5wZGYtZm9vdGVyLWZpeGVkIHsKICAgICAgICAgICAgbWFyZ2luLXRvcDogYXV0bzsKICAgICAgICAgICAgcGFkZGluZy10b3A6IDEwcHg7CiAgICAgICAgICAgIGJvcmRlci10b3A6IDFweCBzb2xpZCAjZTJlOGYwOwogICAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7CiAgICAgICAgICAgIGZvbnQtc2l6ZTogOXB4OwogICAgICAgICAgICBjb2xvcjogIzk0YTNiODsKICAgICAgICB9CgogICAgICAgIC8qIFN0eWxlcyBzcMOpY2lmaXF1ZXMgcG91ciBsZSBjb250ZW51IHJpY2hlIChRdWlsbC9IVE1MKSBkYW5zIGxlIFBERiBldCBsYSBTaWRlYmFyICovCiAgICAgICAgLnJpY2gtdGV4dC1jb250ZW50IHVsIHsgbGlzdC1zdHlsZS10eXBlOiBkaXNjOyBtYXJnaW4tbGVmdDogMS41ZW07IG1hcmdpbi1ib3R0b206IDAuNWVtOyB9CiAgICAgICAgLnJpY2gtdGV4dC1jb250ZW50IG9sIHsgbGlzdC1zdHlsZS10eXBlOiBkZWNpbWFsOyBtYXJnaW4tbGVmdDogMS41ZW07IG1hcmdpbi1ib3R0b206IDAuNWVtOyB9CiAgICAgICAgLnJpY2gtdGV4dC1jb250ZW50IHAgeyBtYXJnaW4tYm90dG9tOiAwLjVlbTsgfQogICAgICAgIC5yaWNoLXRleHQtY29udGVudCBzdHJvbmcgeyBmb250LXdlaWdodDogNzAwOyB9CiAgICAgICAgLnJpY2gtdGV4dC1jb250ZW50IGVtIHsgZm9udC1zdHlsZTogaXRhbGljOyB9CiAgICAgICAgLnJpY2gtdGV4dC1jb250ZW50IHUgeyB0ZXh0LWRlY29yYXRpb246IHVuZGVybGluZTsgfQogICAgICAgIAogICAgICAgIC8qIFN0eWxlcyBwb3VyIGxlcyB0YWlsbGVzIGRlIHBvbGljZSBRdWlsbCBkYW5zIGxlIFBERi9BcGVyw6d1ICovCiAgICAgICAgLnJpY2gtdGV4dC1jb250ZW50IC5xbC1zaXplLXNtYWxsIHsgZm9udC1zaXplOiAwLjc1ZW07IH0KICAgICAgICAucmljaC10ZXh0LWNvbnRlbnQgLnFsLXNpemUtbGFyZ2UgeyBmb250LXNpemU6IDEuNWVtOyB9CiAgICAgICAgLnJpY2gtdGV4dC1jb250ZW50IC5xbC1zaXplLWh1Z2UgeyBmb250LXNpemU6IDIuNWVtOyB9CiAgICAgICAgCiAgICAgICAgLyogTmV0dG95YWdlIGRlcyBtYXJnZXMgZHUgZGVybmllciDDqWzDqW1lbnQgcG91ciDDqXZpdGVyIGxlcyBlc3BhY2VzIHZpZGVzICovCiAgICAgICAgLnJpY2gtdGV4dC1jb250ZW50ID4gKjpsYXN0LWNoaWxkIHsgbWFyZ2luLWJvdHRvbTogMDsgfQoKICAgICAgICAvKiBQcmludCBzdHlsZXMgKi8KICAgICAgICBAbWVkaWEgcHJpbnQgewogICAgICAgICAgICBib2R5ICogeyB2aXNpYmlsaXR5OiBoaWRkZW47IH0KICAgICAgICAgICAgI3BkZi1wcmV2aWV3LWNvbnRhaW5lciwgI3BkZi1wcmV2aWV3LWNvbnRhaW5lciAqIHsgdmlzaWJpbGl0eTogdmlzaWJsZTsgfQogICAgICAgICAgICAjcGRmLXByZXZpZXctY29udGFpbmVyIHsgcG9zaXRpb246IGFic29sdXRlOyBsZWZ0OiAwOyB0b3A6IDA7IG1hcmdpbjogMDsgYm94LXNoYWRvdzogbm9uZTsgfQogICAgICAgICAgICAubm8tcHJpbnQgeyBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7IH0KICAgICAgICB9CgogICAgICAgIC5iaS1oZWFkZXIgewogICAgICAgICAgICBib3JkZXItYm90dG9tOiAycHggc29saWQgIzFkNGVkODsKICAgICAgICAgICAgcGFkZGluZy1ib3R0b206IDEwcHg7CiAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDIwcHg7CiAgICAgICAgfQogICAgICAgIAogICAgICAgIC8qIFF1aWxsIEN1c3RvbSBPdmVycmlkZXMgdG8gbWF0Y2ggdGhlbWUgKi8KICAgICAgICAucWwtdG9vbGJhci5xbC1zbm93IHsKICAgICAgICAgICAgYm9yZGVyOiBub25lOwogICAgICAgICAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgI2YxZjVmOTsKICAgICAgICAgICAgYmFja2dyb3VuZDogI2Y4ZmFmYzsKICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogMC43NXJlbSAwLjc1cmVtIDAgMDsKICAgICAgICAgICAgcGFkZGluZzogOHB4OwogICAgICAgIH0KICAgICAgICAucWwtY29udGFpbmVyLnFsLXNub3cgewogICAgICAgICAgICBib3JkZXI6IG5vbmU7CiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDAgMCAwLjc1cmVtIDAuNzVyZW07CiAgICAgICAgICAgIGZvbnQtZmFtaWx5OiAnSW50ZXInLCBzYW5zLXNlcmlmOwogICAgICAgICAgICBmb250LXNpemU6IDAuODc1cmVtOyAvKiB0ZXh0LXNtICovCiAgICAgICAgfQogICAgICAgIC5xbC1lZGl0b3IgewogICAgICAgICAgICBtaW4taGVpZ2h0OiAxMjBweDsKICAgICAgICAgICAgbWF4LWhlaWdodDogMjUwcHg7IC8qIFBhcyBkJ2FncmFuZGlzc2VtZW50IGludXRpbGUgKi8KICAgICAgICAgICAgcGFkZGluZzogMTJweCAxNnB4OwogICAgICAgIH0KICAgICAgICAucWwtZWRpdG9yLnFsLWJsYW5rOjpiZWZvcmUgewogICAgICAgICAgICBmb250LXN0eWxlOiBub3JtYWw7CiAgICAgICAgICAgIGNvbG9yOiAjOTRhM2I4OwogICAgICAgICAgICBmb250LXNpemU6IDAuODc1cmVtOwogICAgICAgIH0KICAgICAgICAKICAgICAgICAvKiBDb250YWluZXIgd3JhcHBlciBmb3IgUXVpbGwgYm9yZGVyICovCiAgICAgICAgLnF1aWxsLXdyYXBwZXIgewogICAgICAgICAgICBib3JkZXI6IDJweCBzb2xpZCAjZjFmNWY5OwogICAgICAgICAgICBib3JkZXItcmFkaXVzOiAwLjc1cmVtOwogICAgICAgICAgICB0cmFuc2l0aW9uOiBib3JkZXItY29sb3IgMC4yczsKICAgICAgICAgICAgYmFja2dyb3VuZDogd2hpdGU7CiAgICAgICAgfQogICAgICAgIC5xdWlsbC13cmFwcGVyOmZvY3VzLXdpdGhpbiB7CiAgICAgICAgICAgIGJvcmRlci1jb2xvcjogI2ZiOTIzYzsgLyogb3JhbmdlLTQwMCAqLwogICAgICAgIH0KCiAgICAgICAgLyogQXV0byBzYXZlIGluZGljYXRvciBhbmltYXRpb24gKi8KICAgICAgICBAa2V5ZnJhbWVzIGZhZGUtaW4tb3V0IHsKICAgICAgICAgICAgMCUgeyBvcGFjaXR5OiAwOyB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoNXB4KTsgfQogICAgICAgICAgICAyMCUgeyBvcGFjaXR5OiAxOyB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoMCk7IH0KICAgICAgICAgICAgODAlIHsgb3BhY2l0eTogMTsgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKDApOyB9CiAgICAgICAgICAgIDEwMCUgeyBvcGFjaXR5OiAwOyB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLTVweCk7IH0KICAgICAgICB9CiAgICAgICAgLnNhdmUtaW5kaWNhdG9yIHsKICAgICAgICAgICAgYW5pbWF0aW9uOiBmYWRlLWluLW91dCAycyBlYXNlLWluLW91dCBmb3J3YXJkczsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgLyogTGF5b3V0IHNwZWNpZmljIHN0eWxlcyAqLwogICAgICAgIC5sYXlvdXQtY2xhc3NpYyAuaGVhZGVyLWJsb2NrIHsgYm9yZGVyLWJvdHRvbS13aWR0aDogNHB4OyBwYWRkaW5nLWJvdHRvbTogMXJlbTsgbWFyZ2luLWJvdHRvbTogMnJlbTsgfQogICAgICAgIC5sYXlvdXQtbW9kZXJuIC5oZWFkZXItYmxvY2sgeyBib3JkZXItYm90dG9tLXdpZHRoOiAxcHg7IHBhZGRpbmctYm90dG9tOiAxLjVyZW07IG1hcmdpbi1ib3R0b206IDJyZW07IHRleHQtYWxpZ246IGNlbnRlcjsgfQogICAgICAgIC5sYXlvdXQtYmFubmVyIC5oZWFkZXItYmxvY2sgeyBtYXJnaW4tYm90dG9tOiAycmVtOyBib3JkZXItcmFkaXVzOiAwLjc1cmVtOyBvdmVyZmxvdzogaGlkZGVuOyBib3gtc2hhZG93OiAwIDRweCA2cHggLTFweCByZ2JhKDAsIDAsIDAsIDAuMSk7IH0KICAgIDwvc3R5bGU+CjwvaGVhZD4KPGJvZHkgY2xhc3M9ImJnLXNsYXRlLTEwMCB0ZXh0LXNsYXRlLTkwMCBoLXNjcmVlbiBvdmVyZmxvdy1oaWRkZW4gZmxleCBmbGV4LWNvbCI+CgogICAgPCEtLSBJQ09OUyAtLT4KICAgIDxzdmcgc3R5bGU9ImRpc3BsYXk6IG5vbmU7Ij4KICAgICAgICA8c3ltYm9sIGlkPSJpY29uLXNldHRpbmdzIiB2aWV3Qm94PSIwIDAgMjQgMjQiIGZpbGw9Im5vbmUiIHN0cm9rZT0iY3VycmVudENvbG9yIiBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCI+PHBhdGggZD0iTTEyLjIyIDJoLS40NGEyIDIgMCAwIDAtMiAydi4xOGEyIDIgMCAwIDEtMSAxLjczbC0uNDMuMjVhMiAyIDAgMCAxLTIgMGwtLjE1LS4wOGEyIDIgMCAwIDAtMi43My43M2wtLjIyLjM4YTIgMiAwIDAgMCAuNzMgMi43M2wuMTUuMWEyIDIgMCAwIDEgMSAxLjcydi41MWEyIDIgMCAwIDEtMSAxLjc0bC0uMTUuMDlhMiAyIDAgMCAwLS43MyAyLjczbC4yMi4zOGEyIDIgMCAwIDAgMi43My43M2wuMTUtLjA4YTIgMiAwIDAgMSAyIDBsLjQzLjI1YTIgMiAwIDAgMSAxIDEuNzNWMjBhMiAyIDAgMCAwIDIgMmguNDRhMiAyIDAgMCAwIDItMnYtLjE4YTIgMiAwIDAgMSAxLTEuNzNsLjQzLS4yNWEyIDIgMCAwIDEgMiAwbC4xNS4wOGEyIDIgMCAwIDAgMi43My0uNzNsLjIyLS4zOWEyIDIgMCAwIDAtLjczLTIuNzNsLS4xNS0uMDlhMiAyIDAgMCAxLTEtMS43NHYtLjQ3YTIgMiAwIDAgMSAxLTEuNzRsLjE1LS4wOWEyIDIgMCAwIDAgLjczLTIuNzNsLS4yMi0uMzlhMiAyIDAgMCAwLTIuNzMtLjczbC0uMTUuMDhhMiAyIDAgMCAxLTIgMGwtLjQzLS4yNWEyIDIgMCAwIDEtMS0xLjczVjRhMiAyIDAgMCAwLTItMnoiLz48Y2lyY2xlIGN4PSIxMiIgY3k9IjEyIiByPSIzIi8+PC9zeW1ib2w+CiAgICAgICAgPHN5bWJvbCBpZD0iaWNvbi10cmFzaCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiPjxwb2x5bGluZSBwb2ludHM9IjMgNiA1IDYgMjEgNiIvPjxwYXRoIGQ9Ik0xOSA2djE0YTIgMiAwIDAgMS0yIDJIN2EyIDIgMCAwIDEtMi0yVjZtMyAwVjRhMiAyIDAgMCAxIDItMmg0YTIgMiAwIDAgMSAyIDJ2MiIvPjxsaW5lIHgxPSIxMCIgeTE9IjExIiB4Mj0iMTAiIHkyPSIxNyIvPjxsaW5lIHgxPSIxNCIgeTE9IjExIiB4Mj0iMTQiIHkyPSIxNyIvPjwvc3ltYm9sPgogICAgICAgIDxzeW1ib2wgaWQ9Imljb24tZWRpdCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiPjxwYXRoIGQ9Ik0xMSA0SDRhMiAyIDAgMCAwLTIgMnYxNGEyIDIgMCAwIDAgMiAyaDE0YTIgMiAwIDAgMCAyLTJ2LTciLz48cGF0aCBkPSJNMTguNSAyLjVhMi4xMjEgMi4xMjEgMCAwIDEgMyAzTDEyIDE1bC00IDEgMS00IDkuNS05LjV6Ii8+PC9zeW1ib2w+CiAgICAgICAgPHN5bWJvbCBpZD0iaWNvbi1kb3dubG9hZCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiPjxwYXRoIGQ9Ik0yMSAxNXY0YTIgMiAwIDAgMS0yIDJINWEyIDIgMCAwIDEtMi0ydi00Ii8+PHBvbHlsaW5lIHBvaW50cz0iNyAxMCAxMiAxNSAxNyAxMCIvPjxsaW5lIHgxPSIxMiIgeTE9IjE1IiB4Mj0iMTIiIHkyPSIzIi8+PC9zeW1ib2w+CiAgICAgICAgPHN5bWJvbCBpZD0iaWNvbi1hcnJvdy11cCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiPjxsaW5lIHgxPSIxMiIgeTE9IjE5IiB4Mj0iMTIiIHkyPSI1Ij48L2xpbmU+PHBvbHlsaW5lIHBvaW50cz0iNSAxMiAxMiA1IDE5IDEyIj48L3BvbHlsaW5lPjwvc3ltYm9sPgogICAgICAgIDxzeW1ib2wgaWQ9Imljb24tYXJyb3ctZG93biIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiPjxsaW5lIHgxPSIxMiIgeTE9IjUiIHgyPSIxMiIgeTI9IjE5Ij48L2xpbmU+PHBvbHlsaW5lIHBvaW50cz0iMTkgMTIgMTIgMTkgNSAxMiI+PC9wb2x5bGluZT48L3N5bWJvbD4KICAgICAgICA8c3ltYm9sIGlkPSJpY29uLWxpc3QiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJjdXJyZW50Q29sb3IiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIj48bGluZSB4MT0iOCIgeTE9IjYiIHgyPSIyMSIgeTI9IjYiPjwvbGluZT48bGluZSB4MT0iOCIgeTE9IjEyIiB4Mj0iMjEiIHkyPSIxMiI+PC9saW5lPjxsaW5lIHgxPSI4IiB5MT0iMTgiIHgyPSIyMSIgeTI9IjE4Ij48L2xpbmU+PGxpbmUgeDE9IjMiIHkxPSI2IiB4Mj0iMy4wMSIgeTI9IjYiPjwvbGluZT48bGluZSB4MT0iMyIgeTE9IjEyIiB4Mj0iMy4wMSIgeTI9IjEyIj48L2xpbmU+PGxpbmUgeDE9IjMiIHkxPSIxOCIgeDI9IjMuMDEiIHkyPSIxOCI+PC9saW5lPjwvc3ltYm9sPgogICAgICAgIDxzeW1ib2wgaWQ9Imljb24td29yZCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiPjxwYXRoIGQ9Ik0xNCAySDZhMiAyIDAgMCAwLTIgMnYxNmEyIDIgMCAwIDAgMiAyaDEyYTIgMiAwIDAgMCAyLTJWOHoiPjwvcGF0aD48cG9seWxpbmUgcG9pbnRzPSIxNCAyIDE0IDggMjAgOCI+PC9wb2x5bGluZT48bGluZSB4MT0iMTYiIHkxPSIxMyIgeDI9IjgiIHkyPSIxMyI+PC9saW5lPjxsaW5lIHgxPSIxNiIgeTE9IjE3IiB4Mj0iOCIgeTI9IjE3Ij48L2xpbmU+PHBvbHlsaW5lIHBvaW50cz0iMTAgOSA5IDkgOCA5Ij48L3BvbHlsaW5lPjwvc3ltYm9sPgogICAgICAgIDxzeW1ib2wgaWQ9Imljb24tc2VhcmNoIiB2aWV3Qm94PSIwIDAgMjQgMjQiIGZpbGw9Im5vbmUiIHN0cm9rZT0iY3VycmVudENvbG9yIiBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCI+PGNpcmNsZSBjeD0iMTEiIGN5PSIxMSIgcj0iOCI+PC9jaXJjbGU+PGxpbmUgeDE9IjIxIiB5MT0iMjEiIHgyPSIxNi42NSIgeTI9IjE2LjY1Ij48L2xpbmU+PC9zeW1ib2w+CiAgICAgICAgPHN5bWJvbCBpZD0iaWNvbi1jb3B5IiB2aWV3Qm94PSIwIDAgMjQgMjQiIGZpbGw9Im5vbmUiIHN0cm9rZT0iY3VycmVudENvbG9yIiBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCI+PHJlY3QgeD0iOSIgeT0iOSIgd2lkdGg9IjEzIiBoZWlnaHQ9IjEzIiByeD0iMiIgcnk9IjIiPjwvcmVjdD48cGF0aCBkPSJNNSAxNUg0YTIgMiAwIDAgMS0yLTJWNGEyIDIgMCAwIDEgMi0yaDlhMiAyIDAgMCAxIDIgMnYxIj48L3BhdGg+PC9zeW1ib2w+CiAgICA8L3N2Zz4KCiAgICA8IS0tIEhFQURFUiAtLT4KICAgIAoKICAgIDwhLS0gQ09OVEVOVCAtLT4KICAgIDxtYWluIGlkPSJjb250ZW50LWFyZWEiIGNsYXNzPSJmbGV4LTEgb3ZlcmZsb3ctaGlkZGVuIHJlbGF0aXZlIHctZnVsbCBmbGV4IGZsZXgtY29sIj4KICAgICAgICAKICAgICAgICA8ZGl2IGlkPSJ2aWV3LWJ1bGxldGluIiBjbGFzcz0iZmxleC0xIGZsZXggb3ZlcmZsb3ctaGlkZGVuIj4KICAgICAgICAgICAgCiAgICAgICAgICAgIDwhLS0gU2lkZWJhcjogQXJjaGl2ZXMgLS0+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9InctNzIgZmxleCBmbGV4LWNvbCBmbGV4LXNocmluay0wIHotMTAgc2hhZG93LXNtIGhpZGRlbiBtZDpmbGV4IiBzdHlsZT0iYmFja2dyb3VuZDojMmMzZTUwO2NvbG9yOiNlY2YwZjEiPgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0icC00IHNwYWNlLXktMyIgc3R5bGU9ImJvcmRlci1ib3R0b206MXB4IHNvbGlkIHJnYmEoMjU1LDI1NSwyNTUsLjEpIj4KICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIG9uY2xpY2s9ImNyZWF0ZU5ld0J1bGxldGluKCkiIGNsYXNzPSJ3LWZ1bGwgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgZ2FwLTIgdGV4dC13aGl0ZSBweS0zIHJvdW5kZWQteGwgZm9udC1ib2xkIHRyYW5zaXRpb24tYWxsIiBzdHlsZT0iYmFja2dyb3VuZDpyZ2JhKDI1NSwyNTUsMjU1LC4xNSk7Ym9yZGVyOjFweCBkYXNoZWQgcmdiYSgyNTUsMjU1LDI1NSwuNCkiPgogICAgICAgICAgICAgICAgICAgICAgICDinKggTm91dmVhdSBCdWxsZXRpbgogICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgIDwhLS0gU2VhcmNoIEJhciAoVjMpIC0tPgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InJlbGF0aXZlIj4KICAgICAgICAgICAgICAgICAgICAgICAgPHN2ZyBjbGFzcz0iYWJzb2x1dGUgbGVmdC0zIHRvcC0yLjUgdy00IGgtNCIgc3R5bGU9ImNvbG9yOnJnYmEoMjU1LDI1NSwyNTUsLjUpIj48dXNlIGhyZWY9IiNpY29uLXNlYXJjaCI+PC91c2U+PC9zdmc+CiAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiBpZD0ic2VhcmNoLWJ1bGxldGluIiBvbmlucHV0PSJyZW5kZXJCdWxsZXRpbkxpc3QoKSIgcGxhY2Vob2xkZXI9IlJlY2hlcmNoZXIgKE7CsC4uLikiIGNsYXNzPSJ3LWZ1bGwgcGwtOSBwci0zIHB5LTIgcm91bmRlZC1sZyB0ZXh0LXNtIGZvY3VzOm91dGxpbmUtbm9uZSB0cmFuc2l0aW9uLWNvbG9ycyIgc3R5bGU9ImJhY2tncm91bmQ6cmdiYSgyNTUsMjU1LDI1NSwuMTIpO2JvcmRlcjoxcHggc29saWQgcmdiYSgyNTUsMjU1LDI1NSwuMTUpO2NvbG9yOiNmZmYiPgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmbGV4LTEgb3ZlcmZsb3cteS1hdXRvIHAtMyBzcGFjZS15LTIiIGlkPSJidWxsZXRpbi1saXN0Ij4KICAgICAgICAgICAgICAgICAgICA8IS0tIExpc3QgaXRlbXMgZ2VuZXJhdGVkIGJ5IEpTIC0tPgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgICAgPCEtLSBFZGl0b3IgLS0+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZsZXgtMSBmbGV4IGZsZXgtY29sIGJnLXNsYXRlLTUwIG92ZXJmbG93LWhpZGRlbiByZWxhdGl2ZSI+CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmbGV4LTEgb3ZlcmZsb3cteS1hdXRvIHAtNiI+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ibWF4LXctNnhsIG14LWF1dG8gZ3JpZCBncmlkLWNvbHMtMSBtZDpncmlkLWNvbHMtMiBnYXAtNiBoLWZ1bGwiPgogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgPCEtLSBMZWZ0OiBGb3JtIC0tPgogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJzcGFjZS15LTYgb3ZlcmZsb3cteS1hdXRvIHBiLTIwIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iYmctd2hpdGUgcC02IHJvdW5kZWQtMnhsIGJvcmRlciBib3JkZXItc2xhdGUtMjAwIHNoYWRvdy1zbSBob3ZlcjpzaGFkb3ctbWQgdHJhbnNpdGlvbi1zaGFkb3cgcmVsYXRpdmUiIGlkPSJmb3JtLWNvbnRhaW5lciI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGgzIGNsYXNzPSJmb250LWJvbGQgdGV4dC1zbGF0ZS04MDAgbWItNCBmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMyI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGlkPSJmb3JtLXRpdGxlIj5TYWlzaXIgdW5lIGluZm88L3NwYW4+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9oMz4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJzcGFjZS15LTQiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPSJibG9jayB0ZXh0LXhzIGZvbnQtYm9sZCB0ZXh0LXNsYXRlLTQwMCB1cHBlcmNhc2UgdHJhY2tpbmctd2lkZXIgbWItMSI+Q2F0w6lnb3JpZTwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmbGV4IGdhcC0yIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c2VsZWN0IGlkPSJpdGVtLWNhdGVnb3J5IiBjbGFzcz0iZmxleC0xIHB4LTQgcHktMi41IGJvcmRlci0yIGJvcmRlci1zbGF0ZS0xMDAgcm91bmRlZC14bCB0ZXh0LXNtIGZvbnQtbWVkaXVtIGJnLXNsYXRlLTUwIGZvY3VzOmJnLXdoaXRlIGZvY3VzOmJvcmRlci1vcmFuZ2UtNDAwIG91dGxpbmUtbm9uZSB0cmFuc2l0aW9uLWFsbCBjdXJzb3ItcG9pbnRlciI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwhLS0gRHluYW1pYyBDYXRlZ29yaWVzIC0tPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc2VsZWN0PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gb25jbGljaz0ib3BlbkNhdGVnb3J5TWFuYWdlcigpIiBjbGFzcz0icHgtMyBiZy1zbGF0ZS0xMDAgdGV4dC1zbGF0ZS02MDAgcm91bmRlZC14bCBob3ZlcjpiZy1zbGF0ZS0yMDAgdHJhbnNpdGlvbi1jb2xvcnMgZm9udC1ib2xkIiB0aXRsZT0iR8OpcmVyIHRvdXRlcyBsZXMgY2F0w6lnb3JpZXMiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3ZnIGNsYXNzPSJ3LTUgaC01Ij48dXNlIGhyZWY9IiNpY29uLWxpc3QiPjwvdXNlPjwvc3ZnPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gb25jbGljaz0iYWRkQ3VzdG9tQ2F0ZWdvcnkoKSIgY2xhc3M9InB4LTQgYmctc2xhdGUtMTAwIHRleHQtc2xhdGUtNjAwIHJvdW5kZWQteGwgaG92ZXI6Ymctc2xhdGUtMjAwIHRyYW5zaXRpb24tY29sb3JzIGZvbnQtYm9sZCB0ZXh0LWxnIiB0aXRsZT0iQ3LDqWVyIHVuZSBub3V2ZWxsZSBjYXTDqWdvcmllIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZmxleCBnYXAtMyI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0idy0xLzMgZmxleCBmbGV4LWNvbCBnYXAtMSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZmxleCBnYXAtMiB0ZXh0LVsxMHB4XSB1cHBlcmNhc2UgZm9udC1ib2xkIHRleHQtc2xhdGUtNDAwIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPSJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMSBjdXJzb3ItcG9pbnRlciI+PGlucHV0IHR5cGU9InJhZGlvIiBuYW1lPSJkYXRlLXR5cGUiIHZhbHVlPSJmaXhlZCIgY2hlY2tlZCBvbmNoYW5nZT0idG9nZ2xlRGF0ZUlucHV0KCkiPiBGaXhlPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPSJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMSBjdXJzb3ItcG9pbnRlciI+PGlucHV0IHR5cGU9InJhZGlvIiBuYW1lPSJkYXRlLXR5cGUiIHZhbHVlPSJ2YXJpYWJsZSIgb25jaGFuZ2U9InRvZ2dsZURhdGVJbnB1dCgpIj4gTGlicmU8L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJkYXRlIiBpZD0iaXRlbS1kYXRlLWZpeGVkIiBjbGFzcz0idy1mdWxsIHB4LTQgcHktMi41IGJvcmRlci0yIGJvcmRlci15ZWxsb3ctMTAwIGJnLXllbGxvdy01MCByb3VuZGVkLXhsIHRleHQtc20gZm9udC1ib2xkIHRleHQteWVsbG93LTgwMCBmb2N1czpib3JkZXIteWVsbG93LTQwMCBvdXRsaW5lLW5vbmUgdHJhbnNpdGlvbi1jb2xvcnMiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiBpZD0iaXRlbS1kYXRlLXZhcmlhYmxlIiBjbGFzcz0idy1mdWxsIHB4LTQgcHktMi41IGJvcmRlci0yIGJvcmRlci15ZWxsb3ctMTAwIGJnLXllbGxvdy01MCByb3VuZGVkLXhsIHRleHQtc20gZm9udC1ib2xkIHRleHQteWVsbG93LTgwMCBmb2N1czpib3JkZXIteWVsbG93LTQwMCBvdXRsaW5lLW5vbmUgdHJhbnNpdGlvbi1jb2xvcnMgaGlkZGVuIiBwbGFjZWhvbGRlcj0iRXg6IFRvdXRlIGxhIHNlbWFpbmUiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InctMi8zIGZsZXggZmxleC1jb2wganVzdGlmeS1lbmQiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiBpZD0iaXRlbS10aXRsZSIgbGlzdD0idGl0bGUtc3VnZ2VzdGlvbnMiIGNsYXNzPSJ3LWZ1bGwgcHgtNCBweS0yLjUgYm9yZGVyLTIgYm9yZGVyLXNsYXRlLTEwMCByb3VuZGVkLXhsIHRleHQtc20gZm9udC1ib2xkIGZvY3VzOmJvcmRlci1vcmFuZ2UtNDAwIG91dGxpbmUtbm9uZSB0cmFuc2l0aW9uLWNvbG9ycyIgcGxhY2Vob2xkZXI9IlRpdHJlIG91IGNob2lzaXIuLi4iPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkYXRhbGlzdCBpZD0idGl0bGUtc3VnZ2VzdGlvbnMiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJBY2N1ZWlsIMOpbGFyZ2kiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJBZmZlY3RhdGlvbiI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IkFTU1IgMTIiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJBVVRSRSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IkJhc3NpbiI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IkNBIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iQ0VDIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iQ0VTQ0UiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJDaG9peCBkJ29yaWVudGF0aW9uIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iQ2l0w6kgw6lkdWNhdGl2ZSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IkNvbW1pc3Npb24gw6lkdWNhdGl2ZSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IkNvbW1pc3Npb24gcGVybWFuZW50ZSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IkNvbnNlaWwgZGUgZGlzY2lwbGluZSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IkNvbnNlaWwgZCdlbnNlaWduZW1lbnQiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJDb25zZWlsIHDDqWRhZ29naXF1ZSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IkNvbnNlaWxzIGRlIGNsYXNzZSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IkRGIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iREdIIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iRWR1Y0Ryb2l0Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iRWR1Y0ZpIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iw4lxdWlwZSDDqWR1Y2F0aXZlIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iRVNTIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iw4l2YWx1YXRpb24gRVBMRSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IsOJdmFsdWF0aW9ucyBuYXRpb25hbGVzIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iRXZhbGFuZyI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IkV4YW1lbnMiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJFeGFtZW5zIGJsYW5jcyI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IkxpYWlzb25zIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iTkFIIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iTnVtw6lyaXF1ZSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IlBJWCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IlBQTVMiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJQUE8iPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJQcm9qZXQgZCfDqXRhYmxpc3NlbWVudCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IlByb2pldHMiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJSZW50csOpZSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IlJJIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iU0MzQyI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IlNvcnRpZSBzY29sYWlyZSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IlN0YWdlIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iVU5TUyI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IlZTIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2RhdGFsaXN0PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwhLS0gV1lTSVdZRyBFRElUT1IgLS0+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InF1aWxsLXdyYXBwZXIiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBpZD0icXVpbGwtZWRpdG9yIj48L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmbGV4IGdhcC0zIHB0LTIiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBpZD0iYnRuLWFkZC11cGRhdGUiIG9uY2xpY2s9ImFkZEJ1bGxldGluSXRlbSgpIiBjbGFzcz0iZmxleC0xIHB5LTMgYmctb3JhbmdlLTUwMCB0ZXh0LXdoaXRlIGZvbnQtYm9sZCByb3VuZGVkLXhsIGhvdmVyOmJnLW9yYW5nZS02MDAgYWN0aXZlOnNjYWxlLTk1IHRyYW5zaXRpb24tYWxsIHNoYWRvdy1tZCBzaGFkb3ctb3JhbmdlLTIwMCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQWpvdXRlciBsJ2luZm8g8J+agAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGlkPSJidG4tY2FuY2VsLWVkaXQiIG9uY2xpY2s9ImNhbmNlbEVkaXQoKSIgY2xhc3M9ImhpZGRlbiBweC01IHB5LTMgYmctc2xhdGUtMTAwIHRleHQtc2xhdGUtNTAwIGZvbnQtYm9sZCByb3VuZGVkLXhsIGhvdmVyOmJnLXNsYXRlLTIwMCB0cmFuc2l0aW9uLWNvbG9ycyI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQW5udWxlcgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPCEtLSBHcm91cGVkIExpc3QgaW4gRWRpdG9yIC0tPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ic3BhY2UteS02IiBpZD0iZWRpdG9yLWl0ZW1zLWxpc3QiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwhLS0gRHluYW1pYyBMaXN0IC0tPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgICAgICAgICAgICAgICAgPCEtLSBSaWdodDogUHJldmlldyAtLT4KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZmxleCBvdmVyZmxvdy1oaWRkZW4gYmctc2xhdGUtMjAwIHJvdW5kZWQtMnhsIGJvcmRlci00IGJvcmRlci1zbGF0ZS0zMDAgc2hhZG93LWlubmVyIHAtNCBpdGVtcy1zdGFydCBqdXN0aWZ5LWNlbnRlciI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJvcmlnaW4tdG9wIHRyYW5zZm9ybS1ncHUgc2hhZG93LTJ4bCIgaWQ9InByZXZpZXctd3JhcHBlciIgc3R5bGU9InRyYW5zZm9ybTpzY2FsZSgwLjU1KSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBpZD0icGRmLWNvbnRlbnQiIGNsYXNzPSJhNC1wYWdlIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPCEtLSBSZW5kZXJlZCBDb250ZW50IC0tPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICA8L2Rpdj4KCiAgICAgICAgPCEtLSBIRUxQIC0tPgogICAgICAgIDxkaXYgaWQ9InZpZXctaGVscCIgY2xhc3M9ImhpZGRlbiBmbGV4LTEgb3ZlcmZsb3cteS1hdXRvIHAtOCBiZy1zbGF0ZS01MCI+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9Im1heC13LTR4bCBteC1hdXRvIHByb3NlIGJnLXdoaXRlIHAtMTAgcm91bmRlZC0zeGwgc2hhZG93LXhsIGJvcmRlciBib3JkZXItc2xhdGUtMTAwIj4KICAgICAgICAgICAgICAgIDxoMiBjbGFzcz0idGV4dC0zeGwgZm9udC1ibGFjayB0ZXh0LXNsYXRlLTgwMCBtYi02IGZsZXggaXRlbXMtY2VudGVyIGdhcC0zIj4KICAgICAgICAgICAgICAgICAgICDwn5OaIE1vZGUgZCdlbXBsb2kgJiBFbmpldXgKICAgICAgICAgICAgICAgIDwvaDI+CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIDwhLS0gU2VjdGlvbiBFbmpldSAtLT4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9Im1iLTEwIj4KICAgICAgICAgICAgICAgICAgICA8aDMgY2xhc3M9InRleHQteGwgZm9udC1ib2xkIHRleHQtYmx1ZS04MDAgbWItNCBmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMiI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJ0ZXh0LTJ4bCI+8J+Orzwvc3Bhbj4gTCdFbmpldSBkZSBQRVJESVJGT1JNQU5DRSBCaSBCYXNlCiAgICAgICAgICAgICAgICAgICAgPC9oMz4KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJiZy1ibHVlLTUwIGJvcmRlci1sLTQgYm9yZGVyLWJsdWUtNTAwIHAtNSByb3VuZGVkLXIteGwgdGV4dC1zbGF0ZS03MDAgc3BhY2UteS0zIHRleHQtc20gbGVhZGluZy1yZWxheGVkIj4KICAgICAgICAgICAgICAgICAgICAgICAgPHA+PHN0cm9uZz5Db21tdW5pcXVlciBlZmZpY2FjZW1lbnQgOjwvc3Ryb25nPiBEYW5zIHVuIMOpdGFibGlzc2VtZW50IHNjb2xhaXJlLCBsJ2luZm9ybWF0aW9uIGVzdCBkZW5zZSBldCBtdWx0aXNvdXJjZS4gQ2UgYnVsbGV0aW4gcGVybWV0IGRlIGNlbnRyYWxpc2VyIGxlcyBpbmZvcm1hdGlvbnMgZXNzZW50aWVsbGVzIGRlIGxhIHNlbWFpbmUgZW4gdW4gZG9jdW1lbnQgdW5pcXVlLCBjbGFpciBldCBzdHJ1Y3R1csOpLjwvcD4KICAgICAgICAgICAgICAgICAgICAgICAgPHA+PHN0cm9uZz5Qcm9mZXNzaW9ubmFsaXNlciBsJ2ltYWdlIDo8L3N0cm9uZz4gVW4gZG9jdW1lbnQgc3RhbmRhcmRpc8OpLCBhdXggY291bGV1cnMgZGUgbCfDqXRhYmxpc3NlbWVudCAobG9nbywgc2lnbmF0dXJlKSwgcmVuZm9yY2UgbCdpZGVudGl0w6kgdmlzdWVsbGUgZXQgbGEgY3LDqWRpYmlsaXTDqSBkZSBsYSBkaXJlY3Rpb24uPC9wPgogICAgICAgICAgICAgICAgICAgICAgICA8cD48c3Ryb25nPkdhZ25lciBkdSB0ZW1wcyA6PC9zdHJvbmc+IEZpbmkgbGEgbWlzZSBlbiBwYWdlIGZhc3RpZGlldXNlIHN1ciB0cmFpdGVtZW50IGRlIHRleHRlLiBTYWlzaXNzZXosIGNhdMOpZ29yaXNleiwgZXQgbGUgUERGIHNlIGfDqW7DqHJlIGF1dG9tYXRpcXVlbWVudC48L3A+CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICA8L2Rpdj4KCiAgICAgICAgICAgICAgICA8IS0tIFNlY3Rpb24gTW9kZSBkJ2VtcGxvaSAtLT4KICAgICAgICAgICAgICAgIDxkaXY+CiAgICAgICAgICAgICAgICAgICAgPGgzIGNsYXNzPSJ0ZXh0LXhsIGZvbnQtYm9sZCB0ZXh0LW9yYW5nZS03MDAgbWItNiBmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMiI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJ0ZXh0LTJ4bCI+8J+agDwvc3Bhbj4gR3VpZGUgZGUgZMOpbWFycmFnZSByYXBpZGUKICAgICAgICAgICAgICAgICAgICA8L2gzPgogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImdyaWQgZ3JpZC1jb2xzLTEgbWQ6Z3JpZC1jb2xzLTIgZ2FwLTYiPgogICAgICAgICAgICAgICAgICAgICAgICA8IS0tIMOJdGFwZSAxIC0tPgogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJiZy1zbGF0ZS01MCBwLTUgcm91bmRlZC0yeGwgYm9yZGVyIGJvcmRlci1zbGF0ZS0xMDAgc2hhZG93LXNtIGhvdmVyOnNoYWRvdy1tZCB0cmFuc2l0aW9uLXNoYWRvdyI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb250LWJsYWNrIHRleHQtc2xhdGUtODAwIHRleHQtbGcgbWItMiI+MS4gSWRlbnRpdMOpIPCfj6I8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzPSJ0ZXh0LXNtIHRleHQtc2xhdGUtNjAwIj5DbGlxdWV6IHN1ciA8c3BhbiBjbGFzcz0iZm9udC1ib2xkIj5QYXJhbcOodHJlcyAo4pqZ77iPKTwvc3Bhbj4gZW4gaGF1dCDDoCBkcm9pdGUgcG91ciBlbnRyZXIgbGUgbm9tIGRlIHZvdHJlIMOpdGFibGlzc2VtZW50IGV0IGFqb3V0ZXIgdm90cmUgbG9nby48L3A+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgICAgICAgICAgICAgICAgPCEtLSDDiXRhcGUgMiAtLT4KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iYmctc2xhdGUtNTAgcC01IHJvdW5kZWQtMnhsIGJvcmRlciBib3JkZXItc2xhdGUtMTAwIHNoYWRvdy1zbSBob3ZlcjpzaGFkb3ctbWQgdHJhbnNpdGlvbi1zaGFkb3ciPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9udC1ibGFjayB0ZXh0LXNsYXRlLTgwMCB0ZXh0LWxnIG1iLTIiPjIuIFBhcmFtw6l0cmV6IPCfk4U8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzPSJ0ZXh0LXNtIHRleHQtc2xhdGUtNjAwIj5Ew6lmaW5pc3NleiBsZSBudW3DqXJvIGR1IGJ1bGxldGluLCBsYSBww6lyaW9kZSAoc2VtYWluZSkgZXQgY2hvaXNpc3NleiBsZSBzaWduYXRhaXJlIG9mZmljaWVsIGRhbnMgbGUgYmxvYyAiUGFyYW3DqHRyZXMiLjwvcD4KICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CgogICAgICAgICAgICAgICAgICAgICAgICA8IS0tIMOJdGFwZSAzIC0tPgogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJiZy1zbGF0ZS01MCBwLTUgcm91bmRlZC0yeGwgYm9yZGVyIGJvcmRlci1zbGF0ZS0xMDAgc2hhZG93LXNtIGhvdmVyOnNoYWRvdy1tZCB0cmFuc2l0aW9uLXNoYWRvdyI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb250LWJsYWNrIHRleHQtc2xhdGUtODAwIHRleHQtbGcgbWItMiI+My4gU2Fpc2lzc2V6IOKcje+4jzwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3M9InRleHQtc20gdGV4dC1zbGF0ZS02MDAiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlbXBsaXNzZXogbGUgZm9ybXVsYWlyZS4gVXRpbGlzZXogbGVzIG91dGlscyBkZSBsJ8OpZGl0ZXVyIChHcmFzLCBMaXN0ZXMpIHBvdXIgbWV0dHJlIGVuIGZvcm1lIHZvdHJlIHRleHRlLgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9wPgogICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KCiAgICAgICAgICAgICAgICAgICAgICAgIDwhLS0gw4l0YXBlIDQgLS0+CiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImJnLXNsYXRlLTUwIHAtNSByb3VuZGVkLTJ4bCBib3JkZXIgYm9yZGVyLXNsYXRlLTEwMCBzaGFkb3ctc20gaG92ZXI6c2hhZG93LW1kIHRyYW5zaXRpb24tc2hhZG93Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvbnQtYmxhY2sgdGV4dC1zbGF0ZS04MDAgdGV4dC1sZyBtYi0yIj40LiBPcmdhbmlzZXog4oaV77iPPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzcz0idGV4dC1zbSB0ZXh0LXNsYXRlLTYwMCI+VXRpbGlzZXogbGVzIGZsw6hjaGVzIHN1ciBsZXMgdGl0cmVzIGRlIGNhdMOpZ29yaWVzIHBvdXIgY2hhbmdlciBsJ29yZHJlIGQnYXBwYXJpdGlvbiBkYW5zIGxlIFBERi48L3A+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgPC9kaXY+CgogICAgICAgICAgICAgICAgPCEtLSBTZWN0aW9uIE5vdXZlYXV0w6kgVjMuMCAtLT4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9Im10LTEwIHB0LTggYm9yZGVyLXQgYm9yZGVyLXNsYXRlLTEwMCI+CiAgICAgICAgICAgICAgICAgICAgPGgzIGNsYXNzPSJ0ZXh0LXhsIGZvbnQtYm9sZCB0ZXh0LWluZGlnby03MDAgbWItNCBmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMiI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJ0ZXh0LTJ4bCI+4pyoPC9zcGFuPiBOb3V2ZWF1dMOpcyBWMy4wIDogUHJvZHVjdGl2aXTDqSBNYXhpbWFsZQogICAgICAgICAgICAgICAgICAgIDwvaDM+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iYmctaW5kaWdvLTUwIGJvcmRlci1sLTQgYm9yZGVyLWluZGlnby01MDAgcC01IHJvdW5kZWQtci14bCB0ZXh0LXNsYXRlLTcwMCBzcGFjZS15LTQgdGV4dC1zbSBsZWFkaW5nLXJlbGF4ZWQiPgogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoNCBjbGFzcz0iZm9udC1ib2xkIHRleHQtaW5kaWdvLTkwMCBmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMiI+4pqhIER1cGxpY2F0aW9uIGRlIEJ1bGxldGluPC9oND4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cD5Wb3VzIHNvdWhhaXRleiByZXByZW5kcmUgbGEgYmFzZSBkZSBsYSBzZW1haW5lIGRlcm5pw6hyZSA/IERhbnMgbGEgbGlzdGUgZGUgZ2F1Y2hlLCBjbGlxdWV6IHN1ciBsZSBib3V0b24gIkNvcGllciIgKGRvdWJsZSBjYXJyw6kpLiBVbiBub3V2ZWF1IGJ1bGxldGluIHNlcmEgY3LDqcOpIGF2ZWMgdG91dCBsZSBjb250ZW51LCBldCBsZSBudW3DqXJvIHNlcmEgYXV0b21hdGlxdWVtZW50IGluY3LDqW1lbnTDqSAhPC9wPgogICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDQgY2xhc3M9ImZvbnQtYm9sZCB0ZXh0LWluZGlnby05MDAgZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTIiPvCflI0gUmVjaGVyY2hlIEluc3RhbnRhbsOpZTwvaDQ+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHA+UmV0cm91dmV6IGZhY2lsZW1lbnQgdW4gYW5jaWVuIG51bcOpcm8gZ3LDomNlIMOgIGxhIG5vdXZlbGxlIGJhcnJlIGRlIHJlY2hlcmNoZSBzaXR1w6llIGVuIGhhdXQgZGUgbGEgbGlzdGUgZGVzIGJ1bGxldGlucy48L3A+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoNCBjbGFzcz0iZm9udC1ib2xkIHRleHQtaW5kaWdvLTkwMCBmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMiI+8J+ThCBFeHBvcnQgV29yZCAoLmRvY3gpPC9oND4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cD5JbnRyb2R1aXQgZW4gVjIuNywgbCdleHBvcnQgV29yZCBwZXJtZXQgZGUgcmV0b3VjaGVyIGxlIGRvY3VtZW50IGZpbmFsIHNpIG7DqWNlc3NhaXJlIGF2YW50IGwnZW52b2kuPC9wPgogICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICA8L2Rpdj4KCiAgICA8L21haW4+CgogICAgPCEtLSBGT09URVIgLS0+CiAgICA8Zm9vdGVyIGNsYXNzPSJiZy13aGl0ZSBib3JkZXItdCBib3JkZXItc2xhdGUtMjAwIHB5LTIgdGV4dC1jZW50ZXIgdGV4dC1bMTBweF0gdGV4dC1zbGF0ZS00MDAgZmxleC1zaHJpbmstMCB6LTIwIj4KICAgICAgICBPdXRpbCBwcm9wb3PDqSBwYXIgWWFubmlzIENIUklTVE9OIHwgVXRpbGlzYXRpb24gbG9jYWxlLCBSR1BELgogICAgPC9mb290ZXI+CgogICAgPCEtLSBTRVRUSU5HUyBNT0RBTCAtLT4KICAgIAogICAgCiAgICA8IS0tIENBVEVHT1JZIE1BTkFHRVIgTU9EQUwgLS0+CiAgICA8ZGl2IGlkPSJtb2RhbC1jYXRlZ29yaWVzIiBjbGFzcz0iZml4ZWQgaW5zZXQtMCB6LTUwIGhpZGRlbiBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciI+CiAgICAgICAgPGRpdiBjbGFzcz0iYWJzb2x1dGUgaW5zZXQtMCBiZy1zbGF0ZS05MDAvNTAgYmFja2Ryb3AtYmx1ci1zbSIgb25jbGljaz0iY2xvc2VDYXRlZ29yeU1hbmFnZXIoKSI+PC9kaXY+CiAgICAgICAgPGRpdiBjbGFzcz0iYmctd2hpdGUgcm91bmRlZC0yeGwgc2hhZG93LTJ4bCB3LWZ1bGwgbWF4LXctbWQgbXgtNCByZWxhdGl2ZSB6LTEwIHAtMCB0cmFuc2Zvcm0gdHJhbnNpdGlvbi1hbGwgc2NhbGUtMTAwIG92ZXJmbG93LWhpZGRlbiBmbGV4IGZsZXgtY29sIG1heC1oLXNjcmVlbiI+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9InAtNiBib3JkZXItYiBib3JkZXItc2xhdGUtMTAwIGJnLXNsYXRlLTUwIj4KICAgICAgICAgICAgICAgIDxoMyBjbGFzcz0idGV4dC14bCBmb250LWJsYWNrIHRleHQtc2xhdGUtODAwIGZsZXggaXRlbXMtY2VudGVyIGdhcC0yIj4KICAgICAgICAgICAgICAgICAgICDwn5OLIE9yZHJlIGRlcyBjYXTDqWdvcmllcwogICAgICAgICAgICAgICAgPC9oMz4KICAgICAgICAgICAgICAgIDxwIGNsYXNzPSJ0ZXh0LXNtIHRleHQtc2xhdGUtNTAwIG10LTEiPk1vZGlmaWV6IGwnb3JkcmUgZCdhZmZpY2hhZ2UgZGFucyBsZSBQREYuPC9wPgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgCiAgICAgICAgICAgIDxkaXYgY2xhc3M9Im92ZXJmbG93LXktYXV0byBwLTQgc3BhY2UteS0yIGZsZXgtMSIgaWQ9ImNhdGVnb3J5LW1hbmFnZXItbGlzdCI+CiAgICAgICAgICAgICAgICA8IS0tIExpc3Qgd2lsbCBiZSBoZXJlIC0tPgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgCiAgICAgICAgICAgIDxkaXYgY2xhc3M9InAtNCBib3JkZXItdCBib3JkZXItc2xhdGUtMTAwIGJnLXNsYXRlLTUwIGZsZXgganVzdGlmeS1lbmQiPgogICAgICAgICAgICAgICAgPGJ1dHRvbiBvbmNsaWNrPSJjbG9zZUNhdGVnb3J5TWFuYWdlcigpIiBjbGFzcz0icHgtNiBweS0yIGJnLWJsdWUtNjAwIHRleHQtd2hpdGUgcm91bmRlZC14bCBmb250LWJvbGQgaG92ZXI6YmctYmx1ZS03MDAgdHJhbnNpdGlvbi1jb2xvcnMiPkZlcm1lcjwvYnV0dG9uPgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICA8L2Rpdj4KICAgIDwvZGl2PgoKICAgIDwhLS0gSkFWQVNDUklQVCAtLT4KICAgIDxzY3JpcHQ+CiAgICAgICAgLy8gLS0tIERBVEEgU1RBVEUgLS0tCiAgICAgICAgLy8gRW5oYW5jZWQgRXN0YWJsaXNobWVudCBPYmplY3Qgd2l0aCBMYXlvdXQsIEZvbnQgYW5kIEN1c3RvbSBUZXh0cwogICAgICAgIGxldCBlc3RhYmxpc2htZW50ID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnYmliYXNlX2VzdGFibGlzaG1lbnQnKSkgfHwgewogICAgICAgICAgICBuYW1lOiAiIiwKICAgICAgICAgICAgYWRkcmVzczogIiIsCiAgICAgICAgICAgIGxvZ286ICIiLAogICAgICAgICAgICBsYXlvdXQ6ICJjbGFzc2ljIiwgLy8gY2xhc3NpYywgbW9kZXJuLCBiYW5uZXIKICAgICAgICAgICAgZm9udDogImludGVyIiwgLy8gaW50ZXIsIHNlcmlmLCBtb25vCiAgICAgICAgICAgIGRlZmF1bHRTaWduYXRvcnk6ICJMJ8OpcXVpcGUgZGUgZGlyZWN0aW9uIiwKICAgICAgICAgICAgZG9jVGl0bGU6ICJCdWxsZXRpbiBkJ2luZm9ybWF0aW9uIiwKICAgICAgICAgICAgZG9jRm9vdGVyOiAiIiAvLyBDdXN0b20gZm9vdGVyIHRleHQKICAgICAgICB9OwoKICAgICAgICBsZXQgYnVsbGV0aW5zID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnYmliYXNlX2J1bGxldGlucycpKSB8fCBbXTsKICAgICAgICAKICAgICAgICAvLyBEZWZhdWx0IENhdGVnb3JpZXMKICAgICAgICBjb25zdCBERUZBVUxUX0NBVEVHT1JJRVMgPSBbCiAgICAgICAgICAgICLwn5OFIEFHRU5EQSIsIAogICAgICAgICAgICAi8J+PqyBWSUUgREUgTCfDiVRBQkxJU1NFTUVOVCIsIAogICAgICAgICAgICAi8J+knSBBTUlDQUxFIiwgCiAgICAgICAgICAgICLwn5GlIFBFUlNPTk5FTCIsIAogICAgICAgICAgICAi8J+TmiBQw4lEQUdPR0lFIiwgCiAgICAgICAgICAgICLwn46SIFZJRSBTQ09MQUlSRSIsIAogICAgICAgICAgICAi8J+nrSBPUklFTlRBVElPTiIsIAogICAgICAgICAgICAi4pm/IEVCRVAiLAogICAgICAgICAgICAi8J+OqCDDiURVQ0FUSUYiLAogICAgICAgICAgICAi8J+SuyBOVU3DiVJJUVVFIiwKICAgICAgICAgICAgIvCfkrwgSU5URU5EQU5DRSIsIAogICAgICAgICAgICAi8J+PpSBTQU5Uw4kgLyBTT0NJQUwiLCAKICAgICAgICAgICAgIvCfjpMgRVhBTUVOUyIsIAogICAgICAgICAgICAi8J+TnCBCVUxMRVRJTiBPRkZJQ0lFTCIsIAogICAgICAgICAgICAi4pqW77iPIEJPIiwKICAgICAgICAgICAgIvCfkqEgQVVUUkUiCiAgICAgICAgXTsKICAgICAgICAKICAgICAgICAvLyBNYXN0ZXIgY2F0ZWdvcnkgbGlzdAogICAgICAgIGxldCBtYXN0ZXJDYXRlZ29yaWVzID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnYmliYXNlX2NhdGVnb3JpZXNfbWFzdGVyJykpOwoKICAgICAgICBpZiAoIW1hc3RlckNhdGVnb3JpZXMpIHsKICAgICAgICAgICAgY29uc3Qgb2xkQ3VzdG9tID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnYmliYXNlX2NhdGVnb3JpZXMnKSkgfHwgW107CiAgICAgICAgICAgIG1hc3RlckNhdGVnb3JpZXMgPSBbLi4uREVGQVVMVF9DQVRFR09SSUVTLCAuLi5vbGRDdXN0b21dOwogICAgICAgICAgICBtYXN0ZXJDYXRlZ29yaWVzID0gWy4uLm5ldyBTZXQobWFzdGVyQ2F0ZWdvcmllcyldOwogICAgICAgIH0KCiAgICAgICAgbGV0IGN1cnJlbnRCdWxsZXRpbklkID0gbnVsbDsKICAgICAgICBsZXQgY3VycmVudEl0ZW1zID0gW107CiAgICAgICAgbGV0IGF1dG9TYXZlVGltZXIgPSBudWxsOwogICAgICAgIGxldCBlZGl0aW5nSXRlbUlkID0gbnVsbDsKICAgICAgICBsZXQgcXVpbGwgPSBudWxsOwogICAgICAgIGxldCBfYmlJbml0RG9uZSA9IGZhbHNlOwoKICAgICAgICAvLyAtLS0gSU5JVCAtLS0KICAgICAgICBmdW5jdGlvbiBpbml0QXBwKCkgewogICAgICAgICAgICBpZiAoX2JpSW5pdERvbmUpIHJldHVybjsKICAgICAgICAgICAgY29uc29sZS5sb2coJ1tCaUJhc2VdIGluaXQgYXR0ZW1wdCwgcmVhZHlTdGF0ZT0nICsgZG9jdW1lbnQucmVhZHlTdGF0ZSk7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBpZiAoIWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdxdWlsbC1lZGl0b3InKSkgeyBjb25zb2xlLndhcm4oJ1tCaUJhc2VdIERPTSBub3QgcmVhZHknKTsgc2V0VGltZW91dChpbml0QXBwLCAzMDApOyByZXR1cm47IH0KICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgUXVpbGwgPT09ICd1bmRlZmluZWQnKSB7CiAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCdbQmlCYXNlXSBRdWlsbCBDRE4gbm90IGxvYWRlZCwgcmV0cnkuLi4nKTsKICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGluaXRBcHAsIDUwMCk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKCFxdWlsbCkgewogICAgICAgICAgICAgICAgICAgIHF1aWxsID0gbmV3IFF1aWxsKCcjcXVpbGwtZWRpdG9yJywgewogICAgICAgICAgICAgICAgICAgICAgICB0aGVtZTogJ3Nub3cnLAogICAgICAgICAgICAgICAgICAgICAgICBtb2R1bGVzOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b29sYmFyOiBbCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgWydib2xkJywgJ2l0YWxpYycsICd1bmRlcmxpbmUnXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbeyAnY29sb3InOiBbXSB9LCB7ICdiYWNrZ3JvdW5kJzogW10gfV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgW3sgJ3NpemUnOiBbJ3NtYWxsJywgZmFsc2UsICdsYXJnZScsICdodWdlJ10gfV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgW3sgJ2xpc3QnOiAnb3JkZXJlZCd9LCB7ICdsaXN0JzogJ2J1bGxldCcgfV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgWydjbGVhbiddCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBdCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyOiAnU2Fpc2lzc2V6IGxlIGNvbnRlbnUgaWNpLi4uJwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgdHJ5IHsgcmVuZGVyQnVsbGV0aW5MaXN0KCk7IH0gY2F0Y2goZSkgeyBjb25zb2xlLndhcm4oJ1tCaUJhc2VdIHJlbmRlckJ1bGxldGluTGlzdCBlcnI6JywgZSk7IH0KICAgICAgICAgICAgICAgIHRyeSB7IHJlbmRlckNhdGVnb3J5T3B0aW9ucygpOyB9IGNhdGNoKGUpIHsgY29uc29sZS53YXJuKCdbQmlCYXNlXSByZW5kZXJDYXRlZ29yeU9wdGlvbnMgZXJyOicsIGUpOyB9CiAgICAgICAgICAgICAgICBpZihidWxsZXRpbnMubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgICAgICAgIHRyeSB7IGxvYWRCdWxsZXRpbihidWxsZXRpbnMuc29ydCgoYSxiKSA9PiBiLmlkIC0gYS5pZClbMF0uaWQpOyB9IGNhdGNoKGUpIHsgY29uc29sZS53YXJuKCdbQmlCYXNlXSBsb2FkQnVsbGV0aW4gZXJyOicsIGUpOyB9CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIHRyeSB7IGNyZWF0ZU5ld0J1bGxldGluKCk7IH0gY2F0Y2goZSkgeyBjb25zb2xlLndhcm4oJ1tCaUJhc2VdIGNyZWF0ZU5ld0J1bGxldGluIGVycjonLCBlKTsgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgdHJ5IHsgdXBkYXRlUHJldmlldygpOyB9IGNhdGNoKHBlKSB7IGNvbnNvbGUud2FybignW0JpQmFzZV0gdXBkYXRlUHJldmlldyBlcnI6JywgcGUpOyB9CiAgICAgICAgICAgICAgICBfYmlJbml0RG9uZSA9IHRydWU7CiAgICAgICAgICAgIH0gY2F0Y2goZXJyKSB7CiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdCaUJhc2UgaW5pdCBlcnJvcjonLCBlcnIpOwogICAgICAgICAgICAgICAgaWYgKCFfYmlJbml0RG9uZSkgc2V0VGltZW91dChpbml0QXBwLCAxMDAwKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgZnVuY3Rpb24oKSB7IHNldFRpbWVvdXQoaW5pdEFwcCwgMjAwKTsgfSk7CgogICAgICAgIC8vIC0tLSBOQVZJR0FUSU9OIC0tLQogICAgICAgIGZ1bmN0aW9uIHN3aXRjaFRhYih0YWIpIHsKICAgICAgICAgICAgWydidWxsZXRpbicsICdoZWxwJ10uZm9yRWFjaCh0ID0+IHsKICAgICAgICAgICAgICAgIGNvbnN0IGJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGBuYXYtJHt0fWApOwogICAgICAgICAgICAgICAgY29uc3QgdmlldyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGB2aWV3LSR7dH1gKTsKICAgICAgICAgICAgICAgIGlmICghYnRuIHx8ICF2aWV3KSByZXR1cm47CgogICAgICAgICAgICAgICAgaWYodCA9PT0gdGFiKSB7CiAgICAgICAgICAgICAgICAgICAgYnRuLmNsYXNzTGlzdC5yZW1vdmUoJ3RleHQtc2xhdGUtNTAwJywgJ2hvdmVyOnRleHQtc2xhdGUtNzAwJywgJ2hvdmVyOmJnLXNsYXRlLTUwJywgJ2JvcmRlci10cmFuc3BhcmVudCcpOwogICAgICAgICAgICAgICAgICAgIGJ0bi5jbGFzc0xpc3QuYWRkKCdiZy1ibHVlLTUwJywgJ3RleHQtYmx1ZS03MDAnLCAnYm9yZGVyLWJsdWUtMTAwJywgJ3NoYWRvdy1zbScpOwogICAgICAgICAgICAgICAgICAgIHZpZXcuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7CiAgICAgICAgICAgICAgICAgICAgaWYodCA9PT0gJ2J1bGxldGluJykgdmlldy5jbGFzc0xpc3QuYWRkKCdmbGV4Jyk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIGJ0bi5jbGFzc0xpc3QuYWRkKCd0ZXh0LXNsYXRlLTUwMCcsICdob3Zlcjp0ZXh0LXNsYXRlLTcwMCcsICdob3ZlcjpiZy1zbGF0ZS01MCcsICdib3JkZXItdHJhbnNwYXJlbnQnKTsKICAgICAgICAgICAgICAgICAgICBidG4uY2xhc3NMaXN0LnJlbW92ZSgnYmctYmx1ZS01MCcsICd0ZXh0LWJsdWUtNzAwJywgJ2JvcmRlci1ibHVlLTEwMCcsICdzaGFkb3ctc20nKTsKICAgICAgICAgICAgICAgICAgICB2aWV3LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpOwogICAgICAgICAgICAgICAgICAgIHZpZXcuY2xhc3NMaXN0LnJlbW92ZSgnZmxleCcpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgZnVuY3Rpb24gdG9nZ2xlU2lkZWJhck1vYmlsZSgpIHsKICAgICAgICAgICAgY29uc3Qgc2lkZWJhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN2aWV3LWJ1bGxldGluID4gZGl2OmZpcnN0LWNoaWxkJyk7CiAgICAgICAgICAgIHNpZGViYXIuY2xhc3NMaXN0LnRvZ2dsZSgnaGlkZGVuJyk7CiAgICAgICAgICAgIHNpZGViYXIuY2xhc3NMaXN0LnRvZ2dsZSgnYWJzb2x1dGUnKTsKICAgICAgICAgICAgc2lkZWJhci5jbGFzc0xpc3QudG9nZ2xlKCdoLWZ1bGwnKTsKICAgICAgICB9CgogICAgICAgIC8vIC0tLSBDQVRFR09SWSBMT0dJQyAtLS0KICAgICAgICBmdW5jdGlvbiByZW5kZXJDYXRlZ29yeU9wdGlvbnMoKSB7CiAgICAgICAgICAgIGNvbnN0IHNlbGVjdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpdGVtLWNhdGVnb3J5Jyk7CiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRWYWwgPSBzZWxlY3QudmFsdWU7CiAgICAgICAgICAgIHNlbGVjdC5pbm5lckhUTUwgPSBtYXN0ZXJDYXRlZ29yaWVzLm1hcChjYXQgPT4gYDxvcHRpb24gdmFsdWU9IiR7Y2F0fSI+JHtjYXR9PC9vcHRpb24+YCkuam9pbignJyk7CiAgICAgICAgICAgIGlmKG1hc3RlckNhdGVnb3JpZXMuaW5jbHVkZXMoY3VycmVudFZhbCkpIHsgc2VsZWN0LnZhbHVlID0gY3VycmVudFZhbDsgfQogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gYWRkQ3VzdG9tQ2F0ZWdvcnkoKSB7CiAgICAgICAgICAgIGNvbnN0IG5ld0NhdCA9IHByb21wdCgiTm9tIGRlIGxhIG5vdXZlbGxlIGNhdMOpZ29yaWUgKGF2ZWMgw6ltb2ppIHNpIHZvdXMgdm91bGV6ICEpIDoiKTsKICAgICAgICAgICAgaWYobmV3Q2F0ICYmIG5ld0NhdC50cmltKCkgIT09ICIiKSB7CiAgICAgICAgICAgICAgICBjb25zdCB1cHBlckNhdCA9IG5ld0NhdC50cmltKCkudG9VcHBlckNhc2UoKTsKICAgICAgICAgICAgICAgIGlmKCFtYXN0ZXJDYXRlZ29yaWVzLmluY2x1ZGVzKHVwcGVyQ2F0KSkgewogICAgICAgICAgICAgICAgICAgIG1hc3RlckNhdGVnb3JpZXMucHVzaCh1cHBlckNhdCk7CiAgICAgICAgICAgICAgICAgICAgc2F2ZUNhdGVnb3JpZXMoKTsKICAgICAgICAgICAgICAgICAgICByZW5kZXJDYXRlZ29yeU9wdGlvbnMoKTsKICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaXRlbS1jYXRlZ29yeScpLnZhbHVlID0gdXBwZXJDYXQ7CiAgICAgICAgICAgICAgICB9IGVsc2UgeyBhbGVydCgiQ2V0dGUgY2F0w6lnb3JpZSBleGlzdGUgZMOpasOgLiIpOyB9CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgCiAgICAgICAgZnVuY3Rpb24gc2F2ZUNhdGVnb3JpZXMoKSB7CiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdiaWJhc2VfY2F0ZWdvcmllc19tYXN0ZXInLCBKU09OLnN0cmluZ2lmeShtYXN0ZXJDYXRlZ29yaWVzKSk7CiAgICAgICAgfQoKICAgICAgICAvLyAtLS0gQ0FURUdPUlkgTUFOQUdFUiBVSSAtLS0KICAgICAgICBmdW5jdGlvbiBvcGVuQ2F0ZWdvcnlNYW5hZ2VyKCkgewogICAgICAgICAgICBjb25zdCBsaXN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NhdGVnb3J5LW1hbmFnZXItbGlzdCcpOwogICAgICAgICAgICBsaXN0LmlubmVySFRNTCA9ICcnOwogICAgICAgICAgICAKICAgICAgICAgICAgbWFzdGVyQ2F0ZWdvcmllcy5mb3JFYWNoKChjYXQsIGluZGV4KSA9PiB7CiAgICAgICAgICAgICAgICBjb25zdCBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgICAgICAgICAgICAgIGRpdi5jbGFzc05hbWUgPSAiZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1iZXR3ZWVuIHAtMyBiZy13aGl0ZSBib3JkZXIgYm9yZGVyLXNsYXRlLTIwMCByb3VuZGVkLXhsIGhvdmVyOmJvcmRlci1ibHVlLTMwMCB0cmFuc2l0aW9uLWNvbG9ycyBncm91cCI7CiAgICAgICAgICAgICAgICBkaXYuaW5uZXJIVE1MID0gYAogICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJmb250LWJvbGQgdGV4dC1zbGF0ZS03MDAgdGV4dC1zbSI+JHtjYXR9PC9zcGFuPgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZsZXggaXRlbXMtY2VudGVyIGdhcC0xIG9wYWNpdHktNTAgZ3JvdXAtaG92ZXI6b3BhY2l0eS0xMDAgdHJhbnNpdGlvbi1vcGFjaXR5Ij4KICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBvbmNsaWNrPSJtb3ZlQ2F0ZWdvcnkoJHtpbmRleH0sIC0xKSIgY2xhc3M9InAtMS41IGhvdmVyOmJnLXNsYXRlLTEwMCByb3VuZGVkLWxnIHRleHQtc2xhdGUtNTAwIGhvdmVyOnRleHQtYmx1ZS02MDAgZGlzYWJsZWQ6b3BhY2l0eS0zMCIgJHtpbmRleCA9PT0gMCA/ICdkaXNhYmxlZCcgOiAnJ30+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHN2ZyBjbGFzcz0idy00IGgtNCI+PHVzZSBocmVmPSIjaWNvbi1hcnJvdy11cCI+PC91c2U+PC9zdmc+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIG9uY2xpY2s9Im1vdmVDYXRlZ29yeSgke2luZGV4fSwgMSkiIGNsYXNzPSJwLTEuNSBob3ZlcjpiZy1zbGF0ZS0xMDAgcm91bmRlZC1sZyB0ZXh0LXNsYXRlLTUwMCBob3Zlcjp0ZXh0LWJsdWUtNjAwIGRpc2FibGVkOm9wYWNpdHktMzAiICR7aW5kZXggPT09IG1hc3RlckNhdGVnb3JpZXMubGVuZ3RoIC0gMSA/ICdkaXNhYmxlZCcgOiAnJ30+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHN2ZyBjbGFzcz0idy00IGgtNCI+PHVzZSBocmVmPSIjaWNvbi1hcnJvdy1kb3duIj48L3VzZT48L3N2Zz4KICAgICAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICBgOwogICAgICAgICAgICAgICAgbGlzdC5hcHBlbmRDaGlsZChkaXYpOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgCiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtb2RhbC1jYXRlZ29yaWVzJykuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBjbG9zZUNhdGVnb3J5TWFuYWdlcigpIHsKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21vZGFsLWNhdGVnb3JpZXMnKS5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTsKICAgICAgICAgICAgcmVuZGVyQ2F0ZWdvcnlPcHRpb25zKCk7CiAgICAgICAgICAgIHJlbmRlckVkaXRvckxpc3QoKTsKICAgICAgICAgICAgdXBkYXRlUHJldmlldygpOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gZ2V0VmlzaWJsZUNhdGVnb3JpZXMoKSB7CiAgICAgICAgICAgIGNvbnN0IGdyb3VwZWQgPSB7fTsKICAgICAgICAgICAgY3VycmVudEl0ZW1zLmZvckVhY2goaXRlbSA9PiB7CiAgICAgICAgICAgICAgICBpZighZ3JvdXBlZFtpdGVtLmNhdGVnb3J5XSkgZ3JvdXBlZFtpdGVtLmNhdGVnb3J5XSA9IFtdOwogICAgICAgICAgICAgICAgZ3JvdXBlZFtpdGVtLmNhdGVnb3J5XS5wdXNoKGl0ZW0pOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgcmV0dXJuIG1hc3RlckNhdGVnb3JpZXMuZmlsdGVyKGNhdCA9PiBncm91cGVkW2NhdF0gJiYgZ3JvdXBlZFtjYXRdLmxlbmd0aCA+IDApOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gbW92ZVZpc2libGVDYXRlZ29yeShjYXROYW1lLCBkaXJlY3Rpb24pIHsKICAgICAgICAgICAgIGNvbnN0IHZpc2libGVDYXRzID0gZ2V0VmlzaWJsZUNhdGVnb3JpZXMoKTsKICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRJbmRleEluVmlzaWJsZSA9IHZpc2libGVDYXRzLmluZGV4T2YoY2F0TmFtZSk7CiAgICAgICAgICAgICBpZiAoY3VycmVudEluZGV4SW5WaXNpYmxlID09PSAtMSkgcmV0dXJuOyAKICAgICAgICAgICAgIGNvbnN0IHRhcmdldEluZGV4SW5WaXNpYmxlID0gY3VycmVudEluZGV4SW5WaXNpYmxlICsgZGlyZWN0aW9uOwogICAgICAgICAgICAgaWYgKHRhcmdldEluZGV4SW5WaXNpYmxlIDwgMCB8fCB0YXJnZXRJbmRleEluVmlzaWJsZSA+PSB2aXNpYmxlQ2F0cy5sZW5ndGgpIHJldHVybjsKICAgICAgICAgICAgIGNvbnN0IHRhcmdldENhdE5hbWUgPSB2aXNpYmxlQ2F0c1t0YXJnZXRJbmRleEluVmlzaWJsZV07CiAgICAgICAgICAgICAKICAgICAgICAgICAgIGNvbnN0IGluZGV4MSA9IG1hc3RlckNhdGVnb3JpZXMuaW5kZXhPZihjYXROYW1lKTsKICAgICAgICAgICAgIGNvbnN0IGluZGV4MiA9IG1hc3RlckNhdGVnb3JpZXMuaW5kZXhPZih0YXJnZXRDYXROYW1lKTsKICAgICAgICAgICAgIAogICAgICAgICAgICAgaWYoaW5kZXgxID09PSAtMSB8fCBpbmRleDIgPT09IC0xKSByZXR1cm47CiAgICAgICAgICAgICAKICAgICAgICAgICAgIGNvbnN0IHRlbXAgPSBtYXN0ZXJDYXRlZ29yaWVzW2luZGV4MV07CiAgICAgICAgICAgICBtYXN0ZXJDYXRlZ29yaWVzW2luZGV4MV0gPSBtYXN0ZXJDYXRlZ29yaWVzW2luZGV4Ml07CiAgICAgICAgICAgICBtYXN0ZXJDYXRlZ29yaWVzW2luZGV4Ml0gPSB0ZW1wOwogICAgICAgICAgICAgCiAgICAgICAgICAgICBzYXZlQ2F0ZWdvcmllcygpOwogICAgICAgICAgICAgcmVuZGVyRWRpdG9yTGlzdCgpOwogICAgICAgICAgICAgdXBkYXRlUHJldmlldygpOwogICAgICAgICAgICAgcmVuZGVyQ2F0ZWdvcnlPcHRpb25zKCk7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBtb3ZlQ2F0ZWdvcnkoaW5kZXgsIGRpcmVjdGlvbiwgcmVsb2FkVUkgPSAnbW9kYWwnKSB7CiAgICAgICAgICAgIGNvbnN0IG5ld0luZGV4ID0gaW5kZXggKyBkaXJlY3Rpb247CiAgICAgICAgICAgIGlmIChuZXdJbmRleCA8IDAgfHwgbmV3SW5kZXggPj0gbWFzdGVyQ2F0ZWdvcmllcy5sZW5ndGgpIHJldHVybjsKICAgICAgICAgICAgW21hc3RlckNhdGVnb3JpZXNbaW5kZXhdLCBtYXN0ZXJDYXRlZ29yaWVzW25ld0luZGV4XV0gPSBbbWFzdGVyQ2F0ZWdvcmllc1tuZXdJbmRleF0sIG1hc3RlckNhdGVnb3JpZXNbaW5kZXhdXTsKICAgICAgICAgICAgc2F2ZUNhdGVnb3JpZXMoKTsKICAgICAgICAgICAgaWYocmVsb2FkVUkgPT09ICdtb2RhbCcpIHsgb3BlbkNhdGVnb3J5TWFuYWdlcigpOyB9IAogICAgICAgICAgICBlbHNlIHsgcmVuZGVyRWRpdG9yTGlzdCgpOyB1cGRhdGVQcmV2aWV3KCk7IHJlbmRlckNhdGVnb3J5T3B0aW9ucygpOyB9CiAgICAgICAgfQoKCiAgICAgICAgLy8gLS0tIEJVTExFVElOIExPR0lDIC0tLQogICAgICAgIGZ1bmN0aW9uIGNyZWF0ZU5ld0J1bGxldGluKCkgewogICAgICAgICAgICB0cnkgeyBjYW5jZWxFZGl0KCk7IH0gY2F0Y2goZSkge30KICAgICAgICAgICAgY3VycmVudEJ1bGxldGluSWQgPSBEYXRlLm5vdygpOwogICAgICAgICAgICBjdXJyZW50SXRlbXMgPSBbXTsKICAgICAgICAgICAgLy8gQXV0byBpbmNyZW1lbnQgbG9naWMgYmFzZWQgb24gbWF4IG51bWJlciBmb3VuZAogICAgICAgICAgICBsZXQgbWF4TnVtID0gMDsKICAgICAgICAgICAgYnVsbGV0aW5zLmZvckVhY2goYiA9PiB7CiAgICAgICAgICAgICAgICAgY29uc3QgbiA9IHBhcnNlSW50KGIubnVtYmVyKTsKICAgICAgICAgICAgICAgICBpZighaXNOYU4obikgJiYgbiA+IG1heE51bSkgbWF4TnVtID0gbjsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdiaS1udW1iZXInKS52YWx1ZSA9IG1heE51bSArIDE7CiAgICAgICAgICAgIAogICAgICAgICAgICBjb25zdCBjdXJyID0gbmV3IERhdGUoKTsKICAgICAgICAgICAgY29uc3QgZmlyc3QgPSBjdXJyLmdldERhdGUoKSAtIGN1cnIuZ2V0RGF5KCkgKyAxOyAKICAgICAgICAgICAgY29uc3QgbGFzdCA9IGZpcnN0ICsgNDsgCiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdiaS1kYXRlLXN0YXJ0JykudmFsdWUgPSBuZXcgRGF0ZShjdXJyLnNldERhdGUoZmlyc3QpKS50b0lTT1N0cmluZygpLnNsaWNlKDAsMTApOwogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYmktZGF0ZS1lbmQnKS52YWx1ZSA9IG5ldyBEYXRlKGN1cnIuc2V0RGF0ZShsYXN0KSkudG9JU09TdHJpbmcoKS5zbGljZSgwLDEwKTsKICAgICAgICAgICAgCiAgICAgICAgICAgIC8vIFVTRSBFU1RBQkxJU0hNRU5UIERFRkFVTFRTCiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdiaS1wdWItZGF0ZScpLnZhbHVlQXNEYXRlID0gbmV3IERhdGUoKTsKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2JpLXNpZ25hdG9yeScpLnZhbHVlID0gZXN0YWJsaXNobWVudC5kZWZhdWx0U2lnbmF0b3J5IHx8ICJMJ8OpcXVpcGUgZGUgZGlyZWN0aW9uIjsgCiAgICAgICAgICAgIAogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYmktdGhlbWUnKS52YWx1ZSA9ICdibHVlJzsKCiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlZGl0b3ItdGl0bGUnKS5pbm5lckhUTUwgPSBgPHNwYW4gY2xhc3M9InRleHQtMnhsIj7inKg8L3NwYW4+IE5vdXZlYXUgQnVsbGV0aW5gOwogICAgICAgICAgICByZW5kZXJFZGl0b3JMaXN0KCk7CiAgICAgICAgICAgIHVwZGF0ZVByZXZpZXcoKTsKICAgICAgICAgICAgc2F2ZUN1cnJlbnRCdWxsZXRpbigpOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gbG9hZEJ1bGxldGluKGlkKSB7CiAgICAgICAgICAgIGNhbmNlbEVkaXQoKTsKICAgICAgICAgICAgY29uc3QgYiA9IGJ1bGxldGlucy5maW5kKHggPT4geC5pZCA9PT0gaWQpOwogICAgICAgICAgICBpZighYikgcmV0dXJuOwogICAgICAgICAgICBjdXJyZW50QnVsbGV0aW5JZCA9IGIuaWQ7CiAgICAgICAgICAgIGN1cnJlbnRJdGVtcyA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoYi5pdGVtcykpOyAKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2JpLW51bWJlcicpLnZhbHVlID0gYi5udW1iZXI7CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdiaS1kYXRlLXN0YXJ0JykudmFsdWUgPSBiLmRhdGVTdGFydDsKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2JpLWRhdGUtZW5kJykudmFsdWUgPSBiLmRhdGVFbmQ7CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdiaS1wdWItZGF0ZScpLnZhbHVlID0gYi5wdWJEYXRlIHx8IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKS5zbGljZSgwLDEwKTsKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2JpLXNpZ25hdG9yeScpLnZhbHVlID0gYi5zaWduYXRvcnkgfHwgIkwnw6lxdWlwZSBkZSBkaXJlY3Rpb24iOwogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYmktdGhlbWUnKS52YWx1ZSA9IGIudGhlbWUgfHwgJ2JsdWUnOwoKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VkaXRvci10aXRsZScpLmlubmVySFRNTCA9IGA8c3BhbiBjbGFzcz0idGV4dC0yeGwiPuKcje+4jzwvc3Bhbj4gw4lkaXRpb24gQnVsbGV0aW4gTsKwJHtiLm51bWJlcn1gOwogICAgICAgICAgICByZW5kZXJFZGl0b3JMaXN0KCk7CiAgICAgICAgICAgIHVwZGF0ZVByZXZpZXcoKTsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgLy8gVjM6IERVUExJQ0FUSU9OIEZVTkNUSU9OCiAgICAgICAgZnVuY3Rpb24gZHVwbGljYXRlQnVsbGV0aW4oZSwgaWQpIHsKICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgICAgICAgY29uc3Qgc291cmNlID0gYnVsbGV0aW5zLmZpbmQoYiA9PiBiLmlkID09PSBpZCk7CiAgICAgICAgICAgIGlmKCFzb3VyY2UpIHJldHVybjsKCiAgICAgICAgICAgIGlmKGNvbmZpcm0oYENvcGllciBsZSBidWxsZXRpbiBOwrAke3NvdXJjZS5udW1iZXJ9ID9gKSkgewogICAgICAgICAgICAgICAgLy8gMS4gQ2FsY3VsYXRlIG5ldyBudW1iZXIKICAgICAgICAgICAgICAgIGxldCBtYXhOdW0gPSAwOwogICAgICAgICAgICAgICAgYnVsbGV0aW5zLmZvckVhY2goYiA9PiB7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgbiA9IHBhcnNlSW50KGIubnVtYmVyKTsKICAgICAgICAgICAgICAgICAgICBpZighaXNOYU4obikgJiYgbiA+IG1heE51bSkgbWF4TnVtID0gbjsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgY29uc3QgbmV3TnVtID0gbWF4TnVtICsgMTsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgLy8gMi4gQ2xvbmUKICAgICAgICAgICAgICAgIGNvbnN0IG5ld0l0ZW0gPSB7CiAgICAgICAgICAgICAgICAgICAgLi4uSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShzb3VyY2UpKSwKICAgICAgICAgICAgICAgICAgICBpZDogRGF0ZS5ub3coKSwKICAgICAgICAgICAgICAgICAgICBudW1iZXI6IG5ld051bSwKICAgICAgICAgICAgICAgICAgICBsYXN0TW9kaWZpZWQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKQogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgLy8gMy4gU2F2ZSAmIExvYWQKICAgICAgICAgICAgICAgIGJ1bGxldGlucy5wdXNoKG5ld0l0ZW0pOwogICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2JpYmFzZV9idWxsZXRpbnMnLCBKU09OLnN0cmluZ2lmeShidWxsZXRpbnMpKTsKICAgICAgICAgICAgICAgIGxvYWRCdWxsZXRpbihuZXdJdGVtLmlkKTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gZm9ybWF0RGF0ZUZvckRpc3BsYXkoZGF0ZVN0cikgewogICAgICAgICAgICBpZiAoIWRhdGVTdHIpIHJldHVybiAnJzsKICAgICAgICAgICAgaWYgKCEvXlxkezR9LVxkezJ9LVxkezJ9JC8udGVzdChkYXRlU3RyKSkgcmV0dXJuIGRhdGVTdHI7CiAgICAgICAgICAgIGNvbnN0IFt5LCBtLCBkXSA9IGRhdGVTdHIuc3BsaXQoJy0nKS5tYXAoTnVtYmVyKTsKICAgICAgICAgICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKHksIG0gLSAxLCBkKTsKICAgICAgICAgICAgcmV0dXJuIGRhdGUudG9Mb2NhbGVEYXRlU3RyaW5nKCdmci1GUicsIHsgd2Vla2RheTogJ2xvbmcnLCBkYXk6ICdudW1lcmljJywgbW9udGg6ICdsb25nJyB9KTsKICAgICAgICB9CgogICAgICAgIC8vIC0tLSBJVEVNUyBMT0dJQyAtLS0KICAgICAgICBmdW5jdGlvbiBtb3ZlSXRlbVVwKGlkKSB7CiAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gY3VycmVudEl0ZW1zLmZpbmRJbmRleChpID0+IGkuaWQgPT09IGlkKTsKICAgICAgICAgICAgaWYgKGluZGV4ID09PSAtMSkgcmV0dXJuOwogICAgICAgICAgICBjb25zdCBjYXQgPSBjdXJyZW50SXRlbXNbaW5kZXhdLmNhdGVnb3J5OwogICAgICAgICAgICBsZXQgcHJldkluZGV4ID0gLTE7CiAgICAgICAgICAgIGZvciAobGV0IGkgPSBpbmRleCAtIDE7IGkgPj0gMDsgaS0tKSB7IGlmIChjdXJyZW50SXRlbXNbaV0uY2F0ZWdvcnkgPT09IGNhdCkgeyBwcmV2SW5kZXggPSBpOyBicmVhazsgfSB9CgogICAgICAgICAgICBpZiAocHJldkluZGV4ICE9PSAtMSkgewogICAgICAgICAgICAgICAgW2N1cnJlbnRJdGVtc1twcmV2SW5kZXhdLCBjdXJyZW50SXRlbXNbaW5kZXhdXSA9IFtjdXJyZW50SXRlbXNbaW5kZXhdLCBjdXJyZW50SXRlbXNbcHJldkluZGV4XV07CiAgICAgICAgICAgICAgICByZW5kZXJFZGl0b3JMaXN0KCk7CiAgICAgICAgICAgICAgICB1cGRhdGVQcmV2aWV3KCk7CiAgICAgICAgICAgICAgICBzYXZlQ3VycmVudEJ1bGxldGluKHRydWUpOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBtb3ZlSXRlbURvd24oaWQpIHsKICAgICAgICAgICAgY29uc3QgaW5kZXggPSBjdXJyZW50SXRlbXMuZmluZEluZGV4KGkgPT4gaS5pZCA9PT0gaWQpOwogICAgICAgICAgICBpZiAoaW5kZXggPT09IC0xKSByZXR1cm47CiAgICAgICAgICAgIGNvbnN0IGNhdCA9IGN1cnJlbnRJdGVtc1tpbmRleF0uY2F0ZWdvcnk7CiAgICAgICAgICAgIGxldCBuZXh0SW5kZXggPSAtMTsKICAgICAgICAgICAgZm9yIChsZXQgaSA9IGluZGV4ICsgMTsgaSA8IGN1cnJlbnRJdGVtcy5sZW5ndGg7IGkrKykgeyBpZiAoY3VycmVudEl0ZW1zW2ldLmNhdGVnb3J5ID09PSBjYXQpIHsgbmV4dEluZGV4ID0gaTsgYnJlYWs7IH0gfQoKICAgICAgICAgICAgaWYgKG5leHRJbmRleCAhPT0gLTEpIHsKICAgICAgICAgICAgICAgIFtjdXJyZW50SXRlbXNbbmV4dEluZGV4XSwgY3VycmVudEl0ZW1zW2luZGV4XV0gPSBbY3VycmVudEl0ZW1zW2luZGV4XSwgY3VycmVudEl0ZW1zW25leHRJbmRleF1dOwogICAgICAgICAgICAgICAgcmVuZGVyRWRpdG9yTGlzdCgpOwogICAgICAgICAgICAgICAgdXBkYXRlUHJldmlldygpOwogICAgICAgICAgICAgICAgc2F2ZUN1cnJlbnRCdWxsZXRpbih0cnVlKTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gdG9nZ2xlRGF0ZUlucHV0KCkgewogICAgICAgICAgICBjb25zdCB0eXBlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignaW5wdXRbbmFtZT0iZGF0ZS10eXBlIl06Y2hlY2tlZCcpLnZhbHVlOwogICAgICAgICAgICBjb25zdCBmaXhlZElucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2l0ZW0tZGF0ZS1maXhlZCcpOwogICAgICAgICAgICBjb25zdCB2YXJpYWJsZUlucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2l0ZW0tZGF0ZS12YXJpYWJsZScpOwogICAgICAgICAgICAKICAgICAgICAgICAgaWYodHlwZSA9PT0gJ2ZpeGVkJykgeyBmaXhlZElucHV0LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpOyB2YXJpYWJsZUlucHV0LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpOyB9IAogICAgICAgICAgICBlbHNlIHsgZml4ZWRJbnB1dC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTsgdmFyaWFibGVJbnB1dC5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTsgfQogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gc3RhcnRFZGl0SXRlbShpZCkgewogICAgICAgICAgICBjb25zdCBpdGVtID0gY3VycmVudEl0ZW1zLmZpbmQoaSA9PiBpLmlkID09PSBpZCk7CiAgICAgICAgICAgIGlmKCFpdGVtKSByZXR1cm47CgogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaXRlbS1jYXRlZ29yeScpLnZhbHVlID0gaXRlbS5jYXRlZ29yeTsKICAgICAgICAgICAgY29uc3QgaXNEYXRlID0gL15cZHs0fS1cZHsyfS1cZHsyfSQvLnRlc3QoaXRlbS5kYXRlKTsKICAgICAgICAgICAgaWYoaXNEYXRlIHx8IGl0ZW0uZGF0ZSA9PT0gJycpIHsKICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2lucHV0W25hbWU9ImRhdGUtdHlwZSJdW3ZhbHVlPSJmaXhlZCJdJykuY2hlY2tlZCA9IHRydWU7CiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaXRlbS1kYXRlLWZpeGVkJykudmFsdWUgPSBpdGVtLmRhdGU7CiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaXRlbS1kYXRlLXZhcmlhYmxlJykudmFsdWUgPSAnJzsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2lucHV0W25hbWU9ImRhdGUtdHlwZSJdW3ZhbHVlPSJ2YXJpYWJsZSJdJykuY2hlY2tlZCA9IHRydWU7CiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaXRlbS1kYXRlLWZpeGVkJykudmFsdWUgPSAnJzsKICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpdGVtLWRhdGUtdmFyaWFibGUnKS52YWx1ZSA9IGl0ZW0uZGF0ZTsKICAgICAgICAgICAgfQogICAgICAgICAgICB0b2dnbGVEYXRlSW5wdXQoKTsKCiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpdGVtLXRpdGxlJykudmFsdWUgPSBpdGVtLnRpdGxlOwogICAgICAgICAgICBxdWlsbC5yb290LmlubmVySFRNTCA9IGl0ZW0uY29udGVudDsKICAgICAgICAgICAgZWRpdGluZ0l0ZW1JZCA9IGlkOwoKICAgICAgICAgICAgY29uc3QgYnRuTWFpbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdidG4tYWRkLXVwZGF0ZScpOwogICAgICAgICAgICBjb25zdCBidG5DYW5jZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnRuLWNhbmNlbC1lZGl0Jyk7CiAgICAgICAgICAgIGNvbnN0IGZvcm1UaXRsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmb3JtLXRpdGxlJyk7CiAgICAgICAgICAgIAogICAgICAgICAgICBmb3JtVGl0bGUuaW5uZXJUZXh0ID0gIk1vZGlmaWVyIGwnaW5mbyI7CiAgICAgICAgICAgIGJ0bk1haW4uaW5uZXJUZXh0ID0gIlZhbGlkZXIgbGVzIG1vZGlmaWNhdGlvbnMg4pyFIjsKICAgICAgICAgICAgYnRuTWFpbi5jbGFzc0xpc3QucmVtb3ZlKCdiZy1vcmFuZ2UtNTAwJywgJ2hvdmVyOmJnLW9yYW5nZS02MDAnKTsKICAgICAgICAgICAgYnRuTWFpbi5jbGFzc0xpc3QuYWRkKCdiZy1ibHVlLTYwMCcsICdob3ZlcjpiZy1ibHVlLTcwMCcpOwogICAgICAgICAgICBidG5DYW5jZWwuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmb3JtLWNvbnRhaW5lcicpLnNjcm9sbEludG9WaWV3KHtiZWhhdmlvcjogJ3Ntb290aCd9KTsKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Zvcm0tY29udGFpbmVyJykuY2xhc3NMaXN0LmFkZCgncmluZy0yJywgJ3JpbmctYmx1ZS00MDAnKTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGNhbmNlbEVkaXQoKSB7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2lucHV0W25hbWU9ImRhdGUtdHlwZSJdW3ZhbHVlPSJmaXhlZCJdJykuY2hlY2tlZCA9IHRydWU7CiAgICAgICAgICAgIHRvZ2dsZURhdGVJbnB1dCgpOwogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaXRlbS1kYXRlLWZpeGVkJykudmFsdWUgPSAnJzsgCiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpdGVtLWRhdGUtdmFyaWFibGUnKS52YWx1ZSA9ICcnOyAKCiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpdGVtLXRpdGxlJykudmFsdWUgPSAnJzsKICAgICAgICAgICAgcXVpbGwuc2V0Q29udGVudHMoW10pOwogICAgICAgICAgICBlZGl0aW5nSXRlbUlkID0gbnVsbDsKCiAgICAgICAgICAgIGNvbnN0IGJ0bk1haW4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnRuLWFkZC11cGRhdGUnKTsKICAgICAgICAgICAgY29uc3QgYnRuQ2FuY2VsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2J0bi1jYW5jZWwtZWRpdCcpOwogICAgICAgICAgICBjb25zdCBmb3JtVGl0bGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZm9ybS10aXRsZScpOwogICAgICAgICAgICBmb3JtVGl0bGUuaW5uZXJUZXh0ID0gIlNhaXNpciB1bmUgaW5mbyI7CiAgICAgICAgICAgIGJ0bk1haW4uaW5uZXJUZXh0ID0gIkFqb3V0ZXIgbCdpbmZvIPCfmoAiOwogICAgICAgICAgICBidG5NYWluLmNsYXNzTGlzdC5hZGQoJ2JnLW9yYW5nZS01MDAnLCAnaG92ZXI6Ymctb3JhbmdlLTYwMCcpOwogICAgICAgICAgICBidG5NYWluLmNsYXNzTGlzdC5yZW1vdmUoJ2JnLWJsdWUtNjAwJywgJ2hvdmVyOmJnLWJsdWUtNzAwJyk7CiAgICAgICAgICAgIGJ0bkNhbmNlbC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTsKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Zvcm0tY29udGFpbmVyJykuY2xhc3NMaXN0LnJlbW92ZSgncmluZy0yJywgJ3JpbmctYmx1ZS00MDAnKTsKICAgICAgICAgICAgfSBjYXRjaChlcnIpIHsgY29uc29sZS53YXJuKCdjYW5jZWxFZGl0OicsIGVycik7IH0KICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGFkZEJ1bGxldGluSXRlbSgpIHsKICAgICAgICAgICAgaWYgKCFxdWlsbCkgeyBhbGVydCgnRWRpdGV1ciBub24gcHJldC4gUmVjaGFyZ2V6IGxhIHBhZ2UuJyk7IHJldHVybjsgfQogICAgICAgICAgICBjb25zdCBjYXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaXRlbS1jYXRlZ29yeScpLnZhbHVlOwogICAgICAgICAgICBjb25zdCBkYXRlVHlwZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2lucHV0W25hbWU9ImRhdGUtdHlwZSJdOmNoZWNrZWQnKS52YWx1ZTsKICAgICAgICAgICAgbGV0IGRhdGUgPSBkYXRlVHlwZSA9PT0gJ2ZpeGVkJyA/IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpdGVtLWRhdGUtZml4ZWQnKS52YWx1ZSA6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpdGVtLWRhdGUtdmFyaWFibGUnKS52YWx1ZTsKICAgICAgICAgICAgY29uc3QgdGl0bGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaXRlbS10aXRsZScpLnZhbHVlOwogICAgICAgICAgICBjb25zdCBjb250ZW50ID0gcXVpbGwucm9vdC5pbm5lckhUTUw7CiAgICAgICAgICAgIGNvbnN0IHRleHRDb250ZW50ID0gcXVpbGwuZ2V0VGV4dCgpLnRyaW0oKTsKCiAgICAgICAgICAgIGlmKHRleHRDb250ZW50Lmxlbmd0aCA9PT0gMCAmJiAhdGl0bGUpIHJldHVybjsKCiAgICAgICAgICAgIGlmIChlZGl0aW5nSXRlbUlkKSB7CiAgICAgICAgICAgICAgICBjb25zdCBpZHggPSBjdXJyZW50SXRlbXMuZmluZEluZGV4KGkgPT4gaS5pZCA9PT0gZWRpdGluZ0l0ZW1JZCk7CiAgICAgICAgICAgICAgICBpZihpZHggIT09IC0xKSB7IGN1cnJlbnRJdGVtc1tpZHhdID0geyAuLi5jdXJyZW50SXRlbXNbaWR4XSwgY2F0ZWdvcnk6IGNhdCwgZGF0ZTogZGF0ZSwgdGl0bGU6IHRpdGxlLCBjb250ZW50OiBjb250ZW50IH07IH0KICAgICAgICAgICAgICAgIGNhbmNlbEVkaXQoKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGN1cnJlbnRJdGVtcy5wdXNoKHsgaWQ6IERhdGUubm93KCksIGNhdGVnb3J5OiBjYXQsIGRhdGU6IGRhdGUsIHRpdGxlOiB0aXRsZSwgY29udGVudDogY29udGVudCB9KTsKICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpdGVtLXRpdGxlJykudmFsdWUgPSAnJzsKICAgICAgICAgICAgICAgIHF1aWxsLnNldENvbnRlbnRzKFtdKTsKICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpdGVtLWRhdGUtdmFyaWFibGUnKS52YWx1ZSA9ICcnOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJlbmRlckVkaXRvckxpc3QoKTsKICAgICAgICAgICAgdXBkYXRlUHJldmlldygpOwogICAgICAgICAgICBzYXZlQ3VycmVudEJ1bGxldGluKHRydWUpOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gcmVtb3ZlQnVsbGV0aW5JdGVtKGlkKSB7CiAgICAgICAgICAgIGlmKGlkID09PSBlZGl0aW5nSXRlbUlkKSBjYW5jZWxFZGl0KCk7CiAgICAgICAgICAgIGlmKGNvbmZpcm0oIvCfl5HvuI8gU3VwcHJpbWVyIGNldHRlIGluZm9ybWF0aW9uID8iKSkgewogICAgICAgICAgICAgICAgY3VycmVudEl0ZW1zID0gY3VycmVudEl0ZW1zLmZpbHRlcihpID0+IGkuaWQgIT09IGlkKTsKICAgICAgICAgICAgICAgIHJlbmRlckVkaXRvckxpc3QoKTsKICAgICAgICAgICAgICAgIHVwZGF0ZVByZXZpZXcoKTsKICAgICAgICAgICAgICAgIHNhdmVDdXJyZW50QnVsbGV0aW4odHJ1ZSk7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGRlbGV0ZUJ1bGxldGluKGUsIGlkKSB7CiAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgICAgICAgIGlmKGNvbmZpcm0oIuKaoO+4jyBBdHRlbnRpb24gOiBWb3VsZXotdm91cyB2cmFpbWVudCBzdXBwcmltZXIgZMOpZmluaXRpdmVtZW50IGNlIGJ1bGxldGluID8iKSkgewogICAgICAgICAgICAgICAgYnVsbGV0aW5zID0gYnVsbGV0aW5zLmZpbHRlcihiID0+IGIuaWQgIT09IGlkKTsKICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdiaWJhc2VfYnVsbGV0aW5zJywgSlNPTi5zdHJpbmdpZnkoYnVsbGV0aW5zKSk7CiAgICAgICAgICAgICAgICBpZihjdXJyZW50QnVsbGV0aW5JZCA9PT0gaWQpIHsgYnVsbGV0aW5zLmxlbmd0aCA+IDAgPyBsb2FkQnVsbGV0aW4oYnVsbGV0aW5zWzBdLmlkKSA6IGNyZWF0ZU5ld0J1bGxldGluKCk7IH0gZWxzZSB7IHJlbmRlckJ1bGxldGluTGlzdCgpOyB9CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIHJlbmRlckVkaXRvckxpc3QoKSB7CiAgICAgICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlZGl0b3ItaXRlbXMtbGlzdCcpOwogICAgICAgICAgICBjb250YWluZXIuaW5uZXJIVE1MID0gJyc7CiAgICAgICAgICAgIGNvbnN0IGdyb3VwZWQgPSB7fTsKICAgICAgICAgICAgY3VycmVudEl0ZW1zLmZvckVhY2goaXRlbSA9PiB7IGlmKCFncm91cGVkW2l0ZW0uY2F0ZWdvcnldKSBncm91cGVkW2l0ZW0uY2F0ZWdvcnldID0gW107IGdyb3VwZWRbaXRlbS5jYXRlZ29yeV0ucHVzaChpdGVtKTsgfSk7CiAgICAgICAgICAgIGNvbnN0IHZpc2libGVDYXRzID0gZ2V0VmlzaWJsZUNhdGVnb3JpZXMoKTsKCiAgICAgICAgICAgIG1hc3RlckNhdGVnb3JpZXMuZm9yRWFjaCgoY2F0LCBpbmRleCkgPT4gewogICAgICAgICAgICAgICAgaWYoZ3JvdXBlZFtjYXRdICYmIGdyb3VwZWRbY2F0XS5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgaGVhZGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgICAgICAgICAgICAgICAgaGVhZGVyLmNsYXNzTmFtZSA9ICJmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWJldHdlZW4gbXQtNiBtYi0yIGdyb3VwL2hlYWRlciI7IAogICAgICAgICAgICAgICAgICAgIGNvbnN0IGlzRmlyc3QgPSB2aXNpYmxlQ2F0c1swXSA9PT0gY2F0OwogICAgICAgICAgICAgICAgICAgIGNvbnN0IGlzTGFzdCA9IHZpc2libGVDYXRzW3Zpc2libGVDYXRzLmxlbmd0aCAtIDFdID09PSBjYXQ7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgY2F0U2FmZSA9IGNhdC5yZXBsYWNlKC8nL2csICJcXCciKTsKCiAgICAgICAgICAgICAgICAgICAgaGVhZGVyLmlubmVySFRNTCA9IGAKICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0idGV4dC14cyBmb250LWJvbGQgdGV4dC1zbGF0ZS00MDAgdXBwZXJjYXNlIHRyYWNraW5nLXdpZGVzdCBmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMiI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAke2NhdH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJiZy1zbGF0ZS0xMDAgdGV4dC1zbGF0ZS00MDAgcHgtMS41IHB5LTAuNSByb3VuZGVkLWZ1bGwiIHN0eWxlPSJmb250LXNpemU6MTBweCI+JHtncm91cGVkW2NhdF0ubGVuZ3RofTwvc3Bhbj4KICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZsZXggaXRlbXMtY2VudGVyIGdhcC0xIG9wYWNpdHktMCBncm91cC1ob3Zlci9oZWFkZXI6b3BhY2l0eS0xMDAgdHJhbnNpdGlvbi1vcGFjaXR5Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gb25jbGljaz0ibW92ZVZpc2libGVDYXRlZ29yeSgnJHtjYXRTYWZlfScsIC0xKSIgY2xhc3M9InAtMSBob3ZlcjpiZy1zbGF0ZS0xMDAgdGV4dC1zbGF0ZS00MDAgaG92ZXI6dGV4dC1ibHVlLTYwMCByb3VuZGVkIGRpc2FibGVkOm9wYWNpdHktMzAiICR7aXNGaXJzdCA/ICdkaXNhYmxlZCcgOiAnJ30gdGl0bGU9Ik1vbnRlciBsYSBjYXTDqWdvcmllIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3ZnIGNsYXNzPSJ3LTQgaC00Ij48dXNlIGhyZWY9IiNpY29uLWFycm93LXVwIj48L3VzZT48L3N2Zz4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBvbmNsaWNrPSJtb3ZlVmlzaWJsZUNhdGVnb3J5KCcke2NhdFNhZmV9JywgMSkiIGNsYXNzPSJwLTEgaG92ZXI6Ymctc2xhdGUtMTAwIHRleHQtc2xhdGUtNDAwIGhvdmVyOnRleHQtYmx1ZS02MDAgcm91bmRlZCBkaXNhYmxlZDpvcGFjaXR5LTMwIiAke2lzTGFzdCA/ICdkaXNhYmxlZCcgOiAnJ30gdGl0bGU9IkRlc2NlbmRyZSBsYSBjYXTDqWdvcmllIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3ZnIGNsYXNzPSJ3LTQgaC00Ij48dXNlIGhyZWY9IiNpY29uLWFycm93LWRvd24iPjwvdXNlPjwvc3ZnPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgIGA7CiAgICAgICAgICAgICAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGhlYWRlcik7CgogICAgICAgICAgICAgICAgICAgIGdyb3VwZWRbY2F0XS5mb3JFYWNoKGl0ZW0gPT4gewogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgICAgICAgICAgICAgICAgICAgICAgZGl2LmNsYXNzTmFtZSA9ICJiZy13aGl0ZSBwLTQgcm91bmRlZC14bCBib3JkZXIgYm9yZGVyLXNsYXRlLTEwMCBzaGFkb3ctc20gZmxleCBqdXN0aWZ5LWJldHdlZW4gaXRlbXMtc3RhcnQgZ3JvdXAgbWItMyB0cmFuc2l0aW9uLWFsbCBob3Zlcjpib3JkZXItYmx1ZS0yMDAgaG92ZXI6c2hhZG93LW1kIjsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoaXRlbS5pZCA9PT0gZWRpdGluZ0l0ZW1JZCkgeyBkaXYuY2xhc3NOYW1lID0gImJnLWJsdWUtNTAgcC00IHJvdW5kZWQteGwgYm9yZGVyLTIgYm9yZGVyLWJsdWUtNDAwIHNoYWRvdy1tZCBmbGV4IGp1c3RpZnktYmV0d2VlbiBpdGVtcy1zdGFydCBtYi0zIjsgfQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkaXNwbGF5RGF0ZSA9IGZvcm1hdERhdGVGb3JEaXNwbGF5KGl0ZW0uZGF0ZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGRpdi5pbm5lckhUTUwgPSBgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmbGV4LTEgcHItNCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9udC1ib2xkIHRleHQtc2xhdGUtODAwIGZsZXggZmxleC13cmFwIGl0ZW1zLWNlbnRlciBnYXAtMiI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR7ZGlzcGxheURhdGUgPyBgPHNwYW4gY2xhc3M9ImJnLXllbGxvdy0xMDAgdGV4dC15ZWxsb3ctODAwIHB4LTIgcHktMC41IHJvdW5kZWQtbGcgdGV4dC14cyBmb250LWJvbGQgY2FwaXRhbGl6ZSI+JHtkaXNwbGF5RGF0ZX08L3NwYW4+YCA6ICcnfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAke2l0ZW0udGl0bGUgfHwgJzxzcGFuIGNsYXNzPSJpdGFsaWMgdGV4dC1zbGF0ZS00MDAiPlNhbnMgdGl0cmU8L3NwYW4+J30KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJ0ZXh0LXNtIHRleHQtc2xhdGUtNjAwIG10LTIgbGVhZGluZy1yZWxheGVkIHJpY2gtdGV4dC1jb250ZW50Ij4ke2l0ZW0uY29udGVudH08L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTEgb3BhY2l0eS0wIGdyb3VwLWhvdmVyOm9wYWNpdHktMTAwIHRyYW5zaXRpb24tb3BhY2l0eSBmbGV4LXNocmluay0wIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIG9uY2xpY2s9Im1vdmVJdGVtVXAoJHtpdGVtLmlkfSkiIGNsYXNzPSJwLTIgdGV4dC1zbGF0ZS00MDAgaG92ZXI6dGV4dC1pbmRpZ28tNjAwIGhvdmVyOmJnLWluZGlnby01MCByb3VuZGVkLWxnIHRyYW5zaXRpb24tY29sb3JzIiB0aXRsZT0iTW9udGVyIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHN2ZyBjbGFzcz0idy00IGgtNCI+PHVzZSBocmVmPSIjaWNvbi1hcnJvdy11cCI+PC91c2U+PC9zdmc+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBvbmNsaWNrPSJtb3ZlSXRlbURvd24oJHtpdGVtLmlkfSkiIGNsYXNzPSJwLTIgdGV4dC1zbGF0ZS00MDAgaG92ZXI6dGV4dC1pbmRpZ28tNjAwIGhvdmVyOmJnLWluZGlnby01MCByb3VuZGVkLWxnIHRyYW5zaXRpb24tY29sb3JzIiB0aXRsZT0iRGVzY2VuZHJlIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHN2ZyBjbGFzcz0idy00IGgtNCI+PHVzZSBocmVmPSIjaWNvbi1hcnJvdy1kb3duIj48L3VzZT48L3N2Zz4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJ3LXB4IGgtNCBiZy1zbGF0ZS0yMDAgbXgtMSI+PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBvbmNsaWNrPSJzdGFydEVkaXRJdGVtKCR7aXRlbS5pZH0pIiBjbGFzcz0icC0yIHRleHQtc2xhdGUtNDAwIGhvdmVyOnRleHQtYmx1ZS02MDAgaG92ZXI6YmctYmx1ZS01MCByb3VuZGVkLWxnIHRyYW5zaXRpb24tY29sb3JzIiB0aXRsZT0iTW9kaWZpZXIiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3ZnIGNsYXNzPSJ3LTQgaC00Ij48dXNlIGhyZWY9IiNpY29uLWVkaXQiPjwvdXNlPjwvc3ZnPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gb25jbGljaz0icmVtb3ZlQnVsbGV0aW5JdGVtKCR7aXRlbS5pZH0pIiBjbGFzcz0icC0yIHRleHQtc2xhdGUtNDAwIGhvdmVyOnRleHQtcmVkLTUwMCBob3ZlcjpiZy1yZWQtNTAgcm91bmRlZC1sZyB0cmFuc2l0aW9uLWNvbG9ycyIgdGl0bGU9IlN1cHByaW1lciI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzdmcgY2xhc3M9InctNCBoLTQiPjx1c2UgaHJlZj0iI2ljb24tdHJhc2giPjwvdXNlPjwvc3ZnPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgIGA7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChkaXYpOwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIHRyaWdnZXJBdXRvU2F2ZSgpIHsKICAgICAgICAgICAgdXBkYXRlUHJldmlldygpOyAKICAgICAgICAgICAgaWYoYXV0b1NhdmVUaW1lcikgY2xlYXJUaW1lb3V0KGF1dG9TYXZlVGltZXIpOwogICAgICAgICAgICBhdXRvU2F2ZVRpbWVyID0gc2V0VGltZW91dCgoKSA9PiB7IHNhdmVDdXJyZW50QnVsbGV0aW4odHJ1ZSk7IH0sIDEwMDApOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gc2hvd1NhdmVTdGF0dXMoKSB7CiAgICAgICAgICAgIGNvbnN0IHN0YXR1c0VsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2F1dG8tc2F2ZS1zdGF0dXMnKTsKICAgICAgICAgICAgc3RhdHVzRWwuY2xhc3NMaXN0LnJlbW92ZSgnc2F2ZS1pbmRpY2F0b3InKTsgCiAgICAgICAgICAgIHZvaWQgc3RhdHVzRWwub2Zmc2V0V2lkdGg7IAogICAgICAgICAgICBzdGF0dXNFbC5jbGFzc0xpc3QuYWRkKCdzYXZlLWluZGljYXRvcicpOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gc2F2ZUN1cnJlbnRCdWxsZXRpbihpc0F1dG8gPSBmYWxzZSkgewogICAgICAgICAgICB0cnkgewogICAgICAgICAgICBjb25zdCBudW0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYmktbnVtYmVyJykudmFsdWU7CiAgICAgICAgICAgIGNvbnN0IHN0YXJ0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2JpLWRhdGUtc3RhcnQnKS52YWx1ZTsKICAgICAgICAgICAgY29uc3QgZW5kID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2JpLWRhdGUtZW5kJykudmFsdWU7CiAgICAgICAgICAgIGNvbnN0IHB1YkRhdGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYmktcHViLWRhdGUnKS52YWx1ZTsKICAgICAgICAgICAgY29uc3Qgc2lnbmF0b3J5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2JpLXNpZ25hdG9yeScpLnZhbHVlOwogICAgICAgICAgICBjb25zdCB0aGVtZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdiaS10aGVtZScpLnZhbHVlOwoKICAgICAgICAgICAgY29uc3QgYnVsbGV0aW4gPSB7CiAgICAgICAgICAgICAgICBpZDogY3VycmVudEJ1bGxldGluSWQsCiAgICAgICAgICAgICAgICBudW1iZXI6IG51bSwKICAgICAgICAgICAgICAgIGRhdGVTdGFydDogc3RhcnQsCiAgICAgICAgICAgICAgICBkYXRlRW5kOiBlbmQsCiAgICAgICAgICAgICAgICBwdWJEYXRlOiBwdWJEYXRlLAogICAgICAgICAgICAgICAgc2lnbmF0b3J5OiBzaWduYXRvcnksCiAgICAgICAgICAgICAgICB0aGVtZTogdGhlbWUsCiAgICAgICAgICAgICAgICBpdGVtczogY3VycmVudEl0ZW1zLAogICAgICAgICAgICAgICAgbGFzdE1vZGlmaWVkOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkKICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIGNvbnN0IGlkeCA9IGJ1bGxldGlucy5maW5kSW5kZXgoYiA9PiBiLmlkID09PSBjdXJyZW50QnVsbGV0aW5JZCk7CiAgICAgICAgICAgIGlmKGlkeCA+PSAwKSB7IGJ1bGxldGluc1tpZHhdID0gYnVsbGV0aW47IH0gZWxzZSB7IGJ1bGxldGlucy5wdXNoKGJ1bGxldGluKTsgfQogICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnYmliYXNlX2J1bGxldGlucycsIEpTT04uc3RyaW5naWZ5KGJ1bGxldGlucykpOwogICAgICAgICAgICByZW5kZXJCdWxsZXRpbkxpc3QoKTsgLy8gUmUtcmVuZGVyIHRvIHVwZGF0ZSB0aGUgbGlzdCB2aWV3CiAgICAgICAgICAgIGlmKGlzQXV0bykgc2hvd1NhdmVTdGF0dXMoKTsKICAgICAgICAgICAgfSBjYXRjaChlcnIpIHsgY29uc29sZS5lcnJvcignc2F2ZUN1cnJlbnRCdWxsZXRpbiBlcnJvcjonLCBlcnIpOyB9CiAgICAgICAgfQogICAgICAgIAogICAgICAgIC8vIFYzOiBVcGRhdGVkIFJlbmRlciBMaXN0IHdpdGggRmlsdGVyCiAgICAgICAgZnVuY3Rpb24gcmVuZGVyQnVsbGV0aW5MaXN0KCkgewogICAgICAgICAgICBjb25zdCBsaXN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2J1bGxldGluLWxpc3QnKTsKICAgICAgICAgICAgbGlzdC5pbm5lckhUTUwgPSAnJzsKICAgICAgICAgICAgCiAgICAgICAgICAgIC8vIEdldCBTZWFyY2ggUXVlcnkKICAgICAgICAgICAgY29uc3QgcXVlcnkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2VhcmNoLWJ1bGxldGluJyk/LnZhbHVlLnRvTG93ZXJDYXNlKCkgfHwgIiI7CgogICAgICAgICAgICBjb25zdCBzb3J0ZWQgPSBidWxsZXRpbnMuc29ydCgoYSxiKSA9PiBiLmlkIC0gYS5pZCk7CiAgICAgICAgICAgIGNvbnN0IGZpbHRlcmVkID0gc29ydGVkLmZpbHRlcihiID0+IHsKICAgICAgICAgICAgICAgICByZXR1cm4gYi5udW1iZXIudG9TdHJpbmcoKS5pbmNsdWRlcyhxdWVyeSkgfHwgYi5kYXRlU3RhcnQuaW5jbHVkZXMocXVlcnkpOwogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIGZpbHRlcmVkLmZvckVhY2goYiA9PiB7CiAgICAgICAgICAgICAgICBjb25zdCBpc0FjdGl2ZSA9IGIuaWQgPT09IGN1cnJlbnRCdWxsZXRpbklkOwogICAgICAgICAgICAgICAgY29uc3QgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgICAgICAgICAgICBkaXYuY2xhc3NOYW1lID0gYHctZnVsbCB0ZXh0LWxlZnQgcC00IHJvdW5kZWQteGwgYm9yZGVyIHRyYW5zaXRpb24tYWxsIGdyb3VwIGZsZXgganVzdGlmeS1iZXR3ZWVuIGl0ZW1zLXN0YXJ0IGN1cnNvci1wb2ludGVyIG1iLTIgJHtpc0FjdGl2ZSA/ICdiZy13aGl0ZS8xNSBib3JkZXItYmx1ZS00MDAvNTAgc2hhZG93LXNtJyA6ICdiZy10cmFuc3BhcmVudCBib3JkZXItdHJhbnNwYXJlbnQgaG92ZXI6Ymctd2hpdGUvMTAnfWA7CiAgICAgICAgICAgICAgICBkaXYub25jbGljayA9ICgpID0+IGxvYWRCdWxsZXRpbihiLmlkKTsKICAgICAgICAgICAgICAgIGNvbnN0IHN0YXJ0RGF0ZSA9IHBhcnNlTG9jYWxEYXRlKGIuZGF0ZVN0YXJ0KTsKICAgICAgICAgICAgICAgIGNvbnN0IGRhdGVEaXNwbGF5ID0gc3RhcnREYXRlID8gc3RhcnREYXRlLnRvTG9jYWxlRGF0ZVN0cmluZygnZnItRlInLCB7ZGF5OidudW1lcmljJywgbW9udGg6J251bWVyaWMnfSkgOiAnLi4uJzsKICAgICAgICAgICAgICAgIGRpdi5pbm5lckhUTUwgPSBgCiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZmxleC0xIj4KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZmxleCBqdXN0aWZ5LWJldHdlZW4gaXRlbXMtY2VudGVyIG1iLTEiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9ImZvbnQtYm9sZCAke2lzQWN0aXZlID8gJ3RleHQtd2hpdGUnIDogJ3RleHQtc2xhdGUtMjAwJ30iPkJ1bGxldGluIE5cdTAwYjAke2IubnVtYmVyfTwvc3Bhbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJ0ZXh0LXNsYXRlLTQwMCIgc3R5bGU9ImZvbnQtc2l6ZToxMHB4Ij4ke25ldyBEYXRlKGIubGFzdE1vZGlmaWVkKS50b0xvY2FsZURhdGVTdHJpbmcoKX08L3NwYW4+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJ0ZXh0LXhzICR7aXNBY3RpdmUgPyAndGV4dC1ibHVlLTMwMCcgOiAndGV4dC1zbGF0ZS00MDAnfSI+U2VtYWluZSBkdSAke2RhdGVEaXNwbGF5fTwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJkaXNwbGF5OmZsZXg7ZmxleC1kaXJlY3Rpb246cm93O2dhcDo0cHg7bWFyZ2luLXRvcDo2cHg7ZmxleC13cmFwOndyYXA7Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gb25jbGljaz0iZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7bG9hZEJ1bGxldGluKCR7Yi5pZH0pO29wZW5CaVBhcmFtcygpIiBzdHlsZT0iY29sb3I6IzkzYzVmZDtwYWRkaW5nOjNweDtib3JkZXItcmFkaXVzOjZweDtiYWNrZ3JvdW5kOm5vbmU7Ym9yZGVyOm5vbmU7Y3Vyc29yOnBvaW50ZXIiIHRpdGxlPSJQYXJhbVx1MDBlOHRyZXMiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3ZnIHdpZHRoPSIxMyIgaGVpZ2h0PSIxMyIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIj48cGF0aCBkPSJNMTcgM2EyLjg1IDIuODMgMCAxMTQgNEw3LjUgMjAuNSAyIDIybDEuNS01LjVaIi8+PC9zdmc+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gb25jbGljaz0iZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7bG9hZEJ1bGxldGluKCR7Yi5pZH0pO3NldFRpbWVvdXQoZ2VuZXJhdGVQREYsMzAwKSIgc3R5bGU9ImNvbG9yOiNmY2E1YTU7cGFkZGluZzozcHg7Ym9yZGVyLXJhZGl1czo2cHg7YmFja2dyb3VuZDpub25lO2JvcmRlcjpub25lO2N1cnNvcjpwb2ludGVyIiB0aXRsZT0iUERGIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHN2ZyB3aWR0aD0iMTMiIGhlaWdodD0iMTMiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJjdXJyZW50Q29sb3IiIHN0cm9rZS13aWR0aD0iMiI+PHBhdGggZD0iTTE0IDJINmEyIDIgMCAwIDAtMiAydjE2YTIgMiAwIDAgMCAyIDJoMTJhMiAyIDAgMCAwIDItMlY4eiIvPjxwb2x5bGluZSBwb2ludHM9IjE0IDIgMTQgOCAyMCA4Ii8+PGxpbmUgeDE9IjE2IiB5MT0iMTMiIHgyPSI4IiB5Mj0iMTMiLz48bGluZSB4MT0iMTYiIHkxPSIxNyIgeDI9IjgiIHkyPSIxNyIvPjwvc3ZnPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIG9uY2xpY2s9ImV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO2xvYWRCdWxsZXRpbigke2IuaWR9KTtzZXRUaW1lb3V0KGdlbmVyYXRlRE9DWCwzMDApIiBzdHlsZT0iY29sb3I6IzkzYzVmZDtwYWRkaW5nOjNweDtib3JkZXItcmFkaXVzOjZweDtiYWNrZ3JvdW5kOm5vbmU7Ym9yZGVyOm5vbmU7Y3Vyc29yOnBvaW50ZXIiIHRpdGxlPSJXb3JkIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHN2ZyB3aWR0aD0iMTMiIGhlaWdodD0iMTMiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJjdXJyZW50Q29sb3IiIHN0cm9rZS13aWR0aD0iMiI+PHBhdGggZD0iTTQgMnYyMGgxNlY4bC02LTZINHoiLz48cG9seWxpbmUgcG9pbnRzPSIxNCAyIDE0IDggMjAgOCIvPjxwYXRoIGQ9Ik04IDEzbDIgNCAyLTQgMiA0IDItNCIvPjwvc3ZnPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIG9uY2xpY2s9ImR1cGxpY2F0ZUJ1bGxldGluKGV2ZW50LCAke2IuaWR9KSIgc3R5bGU9ImNvbG9yOnJnYmEoMjU1LDI1NSwyNTUsLjU1KTtwYWRkaW5nOjNweDtib3JkZXItcmFkaXVzOjZweDtiYWNrZ3JvdW5kOm5vbmU7Ym9yZGVyOm5vbmU7Y3Vyc29yOnBvaW50ZXIiIHRpdGxlPSJEdXBsaXF1ZXIiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3ZnIHdpZHRoPSIxMyIgaGVpZ2h0PSIxMyI+PHVzZSBocmVmPSIjaWNvbi1jb3B5Ij48L3VzZT48L3N2Zz4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBvbmNsaWNrPSJkZWxldGVCdWxsZXRpbihldmVudCwgJHtiLmlkfSkiIHN0eWxlPSJjb2xvcjpyZ2JhKDI1NSwyNTUsMjU1LC40KTtwYWRkaW5nOjNweDtib3JkZXItcmFkaXVzOjZweDtiYWNrZ3JvdW5kOm5vbmU7Ym9yZGVyOm5vbmU7Y3Vyc29yOnBvaW50ZXIiIHRpdGxlPSJTdXBwcmltZXIiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3ZnIHdpZHRoPSIxMyIgaGVpZ2h0PSIxMyI+PHVzZSBocmVmPSIjaWNvbi10cmFzaCI+PC91c2U+PC9zdmc+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+ClxgOwogICAgICAgICAgICAgICAgbGlzdC5hcHBlbmRDaGlsZChkaXYpOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgCiAgICAgICAgICAgIGlmKGZpbHRlcmVkLmxlbmd0aCA9PT0gMCAmJiBidWxsZXRpbnMubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgICAgIGxpc3QuaW5uZXJIVE1MID0gYDxkaXYgY2xhc3M9InRleHQtY2VudGVyIHAtNCB0ZXh0LXNsYXRlLTQwMCB0ZXh0LXNtIj5BdWN1biBidWxsZXRpbiB0cm91dsOpIHBvdXIgIiR7cXVlcnl9IjwvZGl2PmA7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgCiAgICAgICAgZnVuY3Rpb24gcGFyc2VMb2NhbERhdGUoZGF0ZVN0cmluZykgewogICAgICAgICAgICAgaWYgKCFkYXRlU3RyaW5nKSByZXR1cm4gbnVsbDsKICAgICAgICAgICAgIGNvbnN0IFt5ZWFyLCBtb250aCwgZGF5XSA9IGRhdGVTdHJpbmcuc3BsaXQoJy0nKS5tYXAoTnVtYmVyKTsKICAgICAgICAgICAgIHJldHVybiBuZXcgRGF0ZSh5ZWFyLCBtb250aCAtIDEsIGRheSk7CiAgICAgICAgfQoKICAgICAgICAvLyAtLS0gUFJFVklFVyAtLS0KICAgICAgICBmdW5jdGlvbiB1cGRhdGVQcmV2aWV3KCkgewogICAgICAgICAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGRmLWNvbnRlbnQnKTsKICAgICAgICAgICAgCiAgICAgICAgICAgIC8vIExheW91dCAmIEZvbnQgQ2xhc3NlcyBmcm9tIFNldHRpbmdzCiAgICAgICAgICAgIGNvbnN0IGxheW91dCA9IGVzdGFibGlzaG1lbnQubGF5b3V0IHx8ICdjbGFzc2ljJzsKICAgICAgICAgICAgY29uc3QgZm9udCA9IGVzdGFibGlzaG1lbnQuZm9udCB8fCAnaW50ZXInOwogICAgICAgICAgICBjb25zdCBmb250Q2xhc3MgPSBmb250ID09PSAnc2VyaWYnID8gJ2ZvbnQtc2VyaWYnIDogKGZvbnQgPT09ICdtb25vJyA/ICdmb250LW1vbm8nIDogJ2ZvbnQtaW50ZXInKTsKICAgICAgICAgICAgCiAgICAgICAgICAgIC8vIEN1c3RvbSB0ZXh0cwogICAgICAgICAgICBjb25zdCBkb2NUaXRsZSA9IGVzdGFibGlzaG1lbnQuZG9jVGl0bGUgfHwgIkJ1bGxldGluIGQnaW5mb3JtYXRpb24iOwogICAgICAgICAgICBjb25zdCBkb2NGb290ZXIgPSBlc3RhYmxpc2htZW50LmRvY0Zvb3RlciB8fCAiIjsKCiAgICAgICAgICAgIC8vIEFwcGx5IGZvbnQgdG8gY29udGFpbmVyCiAgICAgICAgICAgIGNvbnRhaW5lci5jbGFzc05hbWUgPSBgYTQtcGFnZSAke2ZvbnRDbGFzc30gbGF5b3V0LSR7bGF5b3V0fWA7CgogICAgICAgICAgICBjb25zdCBudW0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYmktbnVtYmVyJykudmFsdWU7CiAgICAgICAgICAgIGNvbnN0IHN0YXJ0VmFsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2JpLWRhdGUtc3RhcnQnKS52YWx1ZTsKICAgICAgICAgICAgY29uc3QgZW5kVmFsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2JpLWRhdGUtZW5kJykudmFsdWU7CiAgICAgICAgICAgIGNvbnN0IHB1YkRhdGVWYWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYmktcHViLWRhdGUnKS52YWx1ZTsKICAgICAgICAgICAgY29uc3Qgc2lnbmF0b3J5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2JpLXNpZ25hdG9yeScpLnZhbHVlOwogICAgICAgICAgICBjb25zdCB0aGVtZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdiaS10aGVtZScpLnZhbHVlIHx8ICdibHVlJzsKICAgICAgICAgICAgCiAgICAgICAgICAgIC8vIFRIRU1FIENPTkZJRwogICAgICAgICAgICBjb25zdCB0aGVtZUNvbmZpZyA9IHsKICAgICAgICAgICAgICAgIGJsdWU6ICB7IG1haW46ICd0ZXh0LWJsdWUtOTAwJywgYm9yZGVyOiAnYm9yZGVyLWJsdWUtODAwJywgYmFkZ2U6ICdiZy1ibHVlLTgwMCcsIHN1YkJvcmRlcjogJ2JvcmRlci1ibHVlLTEwMCcsIGFjY2VudDogJ3RleHQtb3JhbmdlLTYwMCcsIHRpdGxlOiAndGV4dC1ibHVlLTkwMCcgfSwKICAgICAgICAgICAgICAgIHJlZDogICB7IG1haW46ICd0ZXh0LXJlZC05MDAnLCAgYm9yZGVyOiAnYm9yZGVyLXJlZC04MDAnLCAgYmFkZ2U6ICdiZy1yZWQtODAwJywgIHN1YkJvcmRlcjogJ2JvcmRlci1yZWQtMTAwJywgIGFjY2VudDogJ3RleHQtc2xhdGUtNjAwJywgIHRpdGxlOiAndGV4dC1yZWQtOTAwJyB9LAogICAgICAgICAgICAgICAgZ3JlZW46IHsgbWFpbjogJ3RleHQtZW1lcmFsZC05MDAnLCBib3JkZXI6ICdib3JkZXItZW1lcmFsZC04MDAnLCBiYWRnZTogJ2JnLWVtZXJhbGQtODAwJywgc3ViQm9yZGVyOiAnYm9yZGVyLWVtZXJhbGQtMTAwJywgYWNjZW50OiAndGV4dC1lbWVyYWxkLTYwMCcsIHRpdGxlOiAndGV4dC1ncmVlbi05MDAnIH0sCiAgICAgICAgICAgICAgICBncmV5OiAgeyBtYWluOiAndGV4dC1zbGF0ZS05MDAnLCBib3JkZXI6ICdib3JkZXItc2xhdGUtODAwJywgYmFkZ2U6ICdiZy1zbGF0ZS04MDAnLCBzdWJCb3JkZXI6ICdib3JkZXItc2xhdGUtMjAwJywgYWNjZW50OiAndGV4dC1zbGF0ZS01MDAnLCB0aXRsZTogJ3RleHQtc2xhdGUtOTAwJyB9LAogICAgICAgICAgICAgICAgcHVycGxlOnsgbWFpbjogJ3RleHQtcHVycGxlLTkwMCcsIGJvcmRlcjogJ2JvcmRlci1wdXJwbGUtODAwJywgYmFkZ2U6ICdiZy1wdXJwbGUtODAwJywgc3ViQm9yZGVyOiAnYm9yZGVyLXB1cnBsZS0xMDAnLCBhY2NlbnQ6ICd0ZXh0LXBpbmstNjAwJywgdGl0bGU6ICd0ZXh0LXB1cnBsZS05MDAnIH0KICAgICAgICAgICAgfTsKICAgICAgICAgICAgY29uc3QgdCA9IHRoZW1lQ29uZmlnW3RoZW1lXSB8fCB0aGVtZUNvbmZpZy5ibHVlOwoKICAgICAgICAgICAgY29uc3Qgc3RhcnQgPSBwYXJzZUxvY2FsRGF0ZShzdGFydFZhbCk7CiAgICAgICAgICAgIGNvbnN0IGVuZCA9IHBhcnNlTG9jYWxEYXRlKGVuZFZhbCk7CiAgICAgICAgICAgIGNvbnN0IHB1YkRhdGVPYmogPSBwYXJzZUxvY2FsRGF0ZShwdWJEYXRlVmFsKTsKICAgICAgICAgICAgY29uc3Qgb3B0aW9uc01vbnRoID0geyBtb250aDogJ2xvbmcnIH07CiAgICAgICAgICAgIAogICAgICAgICAgICBsZXQgcHViRGF0ZVN0ciA9ICIiOwogICAgICAgICAgICBpZihwdWJEYXRlT2JqKSB7CiAgICAgICAgICAgICAgICAgY29uc3QgZCA9IHB1YkRhdGVPYmouZ2V0RGF0ZSgpOwogICAgICAgICAgICAgICAgIGNvbnN0IG0gPSBwdWJEYXRlT2JqLnRvTG9jYWxlRGF0ZVN0cmluZygnZnItRlInLCBvcHRpb25zTW9udGgpOwogICAgICAgICAgICAgICAgIGNvbnN0IHkgPSBwdWJEYXRlT2JqLmdldEZ1bGxZZWFyKCk7CiAgICAgICAgICAgICAgICAgcHViRGF0ZVN0ciA9IGAke2R9Jm5ic3A7JHttfSZuYnNwOyR7eX1gOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBuZXcgRGF0ZSgpOwogICAgICAgICAgICAgICAgIHB1YkRhdGVTdHIgPSBgJHt0LmdldERhdGUoKX0mbmJzcDske3QudG9Mb2NhbGVEYXRlU3RyaW5nKCdmci1GUicsIG9wdGlvbnNNb250aCl9Jm5ic3A7JHt0LmdldEZ1bGxZZWFyKCl9YDsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgbGV0IGRhdGVTdHIgPSAiU2VtYWluZSBkdSAuLi4iOwogICAgICAgICAgICBpZiAoc3RhcnQgJiYgZW5kICYmICFpc05hTihzdGFydCkpIHsKICAgICAgICAgICAgICAgICBjb25zdCBzdGFydERheSA9IHN0YXJ0LmdldERhdGUoKTsKICAgICAgICAgICAgICAgICBjb25zdCBzdGFydE1vbnRoID0gc3RhcnQudG9Mb2NhbGVEYXRlU3RyaW5nKCdmci1GUicsIG9wdGlvbnNNb250aCk7CiAgICAgICAgICAgICAgICAgY29uc3QgZW5kRGF5ID0gZW5kLmdldERhdGUoKTsKICAgICAgICAgICAgICAgICBjb25zdCBlbmRNb250aCA9IGVuZC50b0xvY2FsZURhdGVTdHJpbmcoJ2ZyLUZSJywgb3B0aW9uc01vbnRoKTsKICAgICAgICAgICAgICAgICBjb25zdCBlbmRZZWFyID0gZW5kLmdldEZ1bGxZZWFyKCk7CiAgICAgICAgICAgICAgICAgZGF0ZVN0ciA9IGBEdSZuYnNwOyR7c3RhcnREYXl9Jm5ic3A7JHtzdGFydE1vbnRofSZuYnNwO2F1Jm5ic3A7JHtlbmREYXl9Jm5ic3A7JHtlbmRNb250aH0mbmJzcDske2VuZFllYXJ9YDsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgY29uc3QgZ3JvdXBlZCA9IHt9OwogICAgICAgICAgICBjdXJyZW50SXRlbXMuZm9yRWFjaChpdGVtID0+IHsgaWYoIWdyb3VwZWRbaXRlbS5jYXRlZ29yeV0pIGdyb3VwZWRbaXRlbS5jYXRlZ29yeV0gPSBbXTsgZ3JvdXBlZFtpdGVtLmNhdGVnb3J5XS5wdXNoKGl0ZW0pOyB9KTsKCiAgICAgICAgICAgIC8vIC0tLSBEWU5BTUlDIEhFQURFUiBHRU5FUkFUSU9OIC0tLQogICAgICAgICAgICBsZXQgaGVhZGVySHRtbCA9ICcnOwoKICAgICAgICAgICAgLy8gSGFuZGxlIGxpbmUgYnJlYWsgcmVwbGFjZW1lbnQgaW4gdGl0bGUgaWYgbmVlZGVkLCBidXQgZmxleCB3cmFwIGhhbmRsZXMgc3RhbmRhcmQgc3BhY2VzLgogICAgICAgICAgICAvLyBJZiB1c2VyIHR5cGVzIDxicj4sIGl0IHdpbGwgcmVuZGVyLgogICAgICAgICAgICAKICAgICAgICAgICAgaWYobGF5b3V0ID09PSAnbW9kZXJuJykgewogICAgICAgICAgICAgICAgLy8gQ0VOVFLDiQogICAgICAgICAgICAgICAgaGVhZGVySHRtbCA9IGAKICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmbGV4IGZsZXgtY29sIGl0ZW1zLWNlbnRlciB0ZXh0LWNlbnRlciBoZWFkZXItYmxvY2sgJHt0LmJvcmRlcn0iPgogICAgICAgICAgICAgICAgICAgICAgICAke2VzdGFibGlzaG1lbnQubG9nbyA/IGA8aW1nIHNyYz0iJHtlc3RhYmxpc2htZW50LmxvZ299IiBjbGFzcz0iaC0yNCBvYmplY3QtY29udGFpbiBtYi00IiAvPmAgOiAnJ30KICAgICAgICAgICAgICAgICAgICAgICAgPGgxIGNsYXNzPSJ0ZXh0LTN4bCBmb250LWJsYWNrIHVwcGVyY2FzZSB0cmFja2luZy13aWRlc3QgJHt0LnRpdGxlfSBtYi0yIGxlYWRpbmctdGlnaHQiPiR7ZG9jVGl0bGV9PC9oMT4KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0idGV4dC14bCBmb250LWJvbGQgdGV4dC1zbGF0ZS03MDAgbWItMiI+JHtlc3RhYmxpc2htZW50Lm5hbWV9PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZsZXggaXRlbXMtY2VudGVyIGdhcC0zIHRleHQtc20gdGV4dC1zbGF0ZS01MDAgZm9udC1tZWRpdW0gYmctc2xhdGUtNTAgcHgtNCBweS0xIHJvdW5kZWQtZnVsbCBib3JkZXIgYm9yZGVyLXNsYXRlLTEwMCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3Bhbj5OwrAke251bX08L3NwYW4+IDxzcGFuIGNsYXNzPSJ0ZXh0LXNsYXRlLTMwMCI+4oCiPC9zcGFuPiA8c3Bhbj4ke2RhdGVTdHJ9PC9zcGFuPgogICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIGA7CiAgICAgICAgICAgIH0gZWxzZSBpZiAobGF5b3V0ID09PSAnYmFubmVyJykgewogICAgICAgICAgICAgICAgLy8gQkFOREVBVQogICAgICAgICAgICAgICAgaGVhZGVySHRtbCA9IGAKICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJoZWFkZXItYmxvY2siPgogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSIke3QuYmFkZ2V9IHAtNiB0ZXh0LXdoaXRlIGZsZXgganVzdGlmeS1iZXR3ZWVuIGl0ZW1zLWNlbnRlciByb3VuZGVkLXQteGwiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGgxIGNsYXNzPSJ0ZXh0LTJ4bCBmb250LWJsYWNrIHVwcGVyY2FzZSB0cmFja2luZy13aWRlc3QgbWItMSI+JHtkb2NUaXRsZX08L2gxPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzcz0ib3BhY2l0eS05MCB0ZXh0LXNtIGZvbnQtbWVkaXVtIj5OwrAke251bX0g4oCiICR7ZGF0ZVN0cn08L3A+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICR7ZXN0YWJsaXNobWVudC5sb2dvID8gYDxpbWcgc3JjPSIke2VzdGFibGlzaG1lbnQubG9nb30iIGNsYXNzPSJoLTE2IHctMTYgb2JqZWN0LWNvbnRhaW4gYmctd2hpdGUgcm91bmRlZC1sZyBwLTEgc2hhZG93LXNtIiAvPmAgOiAnJ30KICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImJnLXNsYXRlLTUwIHAtMyBib3JkZXIteCBib3JkZXItYiBib3JkZXItc2xhdGUtMjAwIHRleHQtY2VudGVyIHRleHQteHMgZm9udC1ib2xkIHVwcGVyY2FzZSB0ZXh0LXNsYXRlLTUwMCB0cmFja2luZy13aWRlIHJvdW5kZWQtYi14bCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAke2VzdGFibGlzaG1lbnQubmFtZX0g4oCiICR7ZXN0YWJsaXNobWVudC5hZGRyZXNzfQogICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIGA7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAvLyBDTEFTU0lDIChEZWZhdWx0KQogICAgICAgICAgICAgICAgaGVhZGVySHRtbCA9IGAKICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmbGV4IGp1c3RpZnktYmV0d2VlbiBpdGVtcy1lbmQgaGVhZGVyLWJsb2NrICR7dC5ib3JkZXJ9Ij4KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0idy0xLzIgZmxleCBmbGV4LWNvbCBpdGVtcy1zdGFydCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAke2VzdGFibGlzaG1lbnQubG9nbyA/IGA8aW1nIHNyYz0iJHtlc3RhYmxpc2htZW50LmxvZ299IiBjbGFzcz0iaC0yNCBvYmplY3QtY29udGFpbiBtYi0zIiAvPmAgOiAnJ30KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzPSJmb250LWJvbGQgdGV4dC1zbGF0ZS05MDAgdGV4dC1sZyBsZWFkaW5nLXRpZ2h0Ij4ke2VzdGFibGlzaG1lbnQubmFtZX08L3A+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzcz0idGV4dC1zbSB0ZXh0LXNsYXRlLTYwMCI+JHtlc3RhYmxpc2htZW50LmFkZHJlc3N9PC9wPgogICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0idy0xLzIgdGV4dC1yaWdodCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDEgY2xhc3M9InRleHQtM3hsIGZvbnQtYm9sZCB1cHBlcmNhc2UgdHJhY2tpbmctd2lkZXN0ICR7dC50aXRsZX0gbGVhZGluZy10aWdodCBtYi0yIj4ke2RvY1RpdGxlfTwvaDE+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJ0ZXh0LTR4bCBmb250LWJsYWNrIHRleHQtc2xhdGUtODAwIj5OwrAke251bX08L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzPSJtdC0yIGZvbnQtbWVkaXVtICR7dC5hY2NlbnR9Ij4ke2RhdGVTdHJ9PC9wPgogICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIGA7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGxldCBodG1sID0gaGVhZGVySHRtbDsKCiAgICAgICAgICAgIGxldCBjb3VudGVyID0gMTsKICAgICAgICAgICAgbWFzdGVyQ2F0ZWdvcmllcy5mb3JFYWNoKGNhdCA9PiB7CiAgICAgICAgICAgICAgICBjb25zdCBpdGVtcyA9IGdyb3VwZWRbY2F0XTsKICAgICAgICAgICAgICAgIGlmKGl0ZW1zICYmIGl0ZW1zLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICAgICAgICBodG1sICs9IGAKICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ibWItNiBicmVhay1pbnNpZGUtYXZvaWQiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGgyIGNsYXNzPSJ0ZXh0LWxnIGZvbnQtYm9sZCAke3QubWFpbn0gYm9yZGVyLWIgJHt0LnN1YkJvcmRlcn0gcGItMSBtYi0zIHVwcGVyY2FzZSBmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMiI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9IiR7dC5iYWRnZX0gdGV4dC13aGl0ZSB3LTYgaC02IGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIHJvdW5kZWQtZnVsbCB0ZXh0LXhzIGZvbnQtYm9sZCI+JHtjb3VudGVyfTwvc3Bhbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAke2NhdH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvaDI+CiAgICAgICAgICAgICAgICAgICAgYDsKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICBpZihjYXQuaW5jbHVkZXMoJ0FHRU5EQScpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGh0bWwgKz0gYDx0YWJsZSBjbGFzcz0idy1mdWxsIHRleHQtc20gYm9yZGVyLWNvbGxhcHNlIj5gOwogICAgICAgICAgICAgICAgICAgICAgICBpdGVtcy5mb3JFYWNoKGl0ZW0gPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZGlzcGxheURhdGUgPSBmb3JtYXREYXRlRm9yRGlzcGxheShpdGVtLmRhdGUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaHRtbCArPSBgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRyIGNsYXNzPSJib3JkZXItYiBib3JkZXItc2xhdGUtMTAwIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIGNsYXNzPSJweS0yIGZvbnQtYm9sZCAke3QuYWNjZW50fSB3LTEvNCBhbGlnbi10b3AgdXBwZXJjYXNlIHRleHQteHMgdHJhY2tpbmctd2lkZSBjYXBpdGFsaXplIj4ke2Rpc3BsYXlEYXRlIHx8ICcnfTwvdGQ+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBjbGFzcz0icHktMiBhbGlnbi10b3AiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9udC1ib2xkIHRleHQtc2xhdGUtODAwIj4ke2l0ZW0udGl0bGV9PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJ0ZXh0LXNsYXRlLTYwMCB0ZXh0LXhzIG10LTEgcmljaC10ZXh0LWNvbnRlbnQiPiR7aXRlbS5jb250ZW50fTwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RkPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdHI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBgOwogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgaHRtbCArPSBgPC90YWJsZT5gOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1zLmZvckVhY2goaXRlbSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkaXNwbGF5RGF0ZSA9IGZvcm1hdERhdGVGb3JEaXNwbGF5KGl0ZW0uZGF0ZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkYXRlSHRtbCA9IGRpc3BsYXlEYXRlID8gYDxzcGFuIGNsYXNzPSIke3QuYWNjZW50fSBmb250LWJvbGQgbXItMSB0ZXh0LXhzIHVwcGVyY2FzZSB0cmFja2luZy13aWRlIGNhcGl0YWxpemUiPlske2Rpc3BsYXlEYXRlfV08L3NwYW4+YCA6ICcnOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaHRtbCArPSBgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ibWItMyBwbC00IGJvcmRlci1sLTQgYm9yZGVyLXNsYXRlLTEwMCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR7aXRlbS50aXRsZSA/IGA8ZGl2IGNsYXNzPSJmb250LWJvbGQgdGV4dC1zbGF0ZS04MDAgdGV4dC1zbSBtYi0xIj4ke2RhdGVIdG1sfSR7aXRlbS50aXRsZX08L2Rpdj5gIDogJyd9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InRleHQtc20gdGV4dC1zbGF0ZS03MDAgdGV4dC1qdXN0aWZ5IGxlYWRpbmctcmVsYXhlZCByaWNoLXRleHQtY29udGVudCI+JHshaXRlbS50aXRsZSA/IGRhdGVIdG1sIDogJyd9JHtpdGVtLmNvbnRlbnR9PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBgOwogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgaHRtbCArPSBgPC9kaXY+YDsKICAgICAgICAgICAgICAgICAgICBjb3VudGVyKys7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgLy8gU2lnbmF0YWlyZQogICAgICAgICAgICBodG1sICs9IGAKICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9Im10LTEyIHB0LTQgYm9yZGVyLXQtMiBib3JkZXItc2xhdGUtMTAwIGJyZWFrLWluc2lkZS1hdm9pZCBmbGV4IGp1c3RpZnktZW5kIj4KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJ0ZXh0LXJpZ2h0Ij4KICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3M9ImZvbnQtYm9sZCB0ZXh0LXNsYXRlLTgwMCBtYi0xIj5GYWl0IGxlIDogJHtwdWJEYXRlU3RyfTwvcD4KICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3M9InRleHQtc2xhdGUtNjAwIHRleHQtc20gaXRhbGljIj5wYXIgJHtzaWduYXRvcnl9LDwvcD4KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICBgOwogICAgICAgICAgICAKICAgICAgICAgICAgLy8gRm9vdGVyIEZpeGUgKEN1c3RvbSkKICAgICAgICAgICAgaWYoZG9jRm9vdGVyKSB7CiAgICAgICAgICAgICAgICBodG1sICs9IGA8ZGl2IGNsYXNzPSJwZGYtZm9vdGVyLWZpeGVkIj4ke2RvY0Zvb3Rlcn08L2Rpdj5gOwogICAgICAgICAgICB9CgogICAgICAgICAgICBjb250YWluZXIuaW5uZXJIVE1MID0gaHRtbDsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGdlbmVyYXRlUERGKCkgewogICAgICAgICAgICBpZiAodHlwZW9mIGh0bWwycGRmID09PSAndW5kZWZpbmVkJykgeyBhbGVydCgnTGUgbW9kdWxlIFBERiBlc3QgZW4gY291cnMgZGUgY2hhcmdlbWVudC4gUsOpZXNzYXlleiBkYW5zIHF1ZWxxdWVzIHNlY29uZGVzLicpOyByZXR1cm47IH0KICAgICAgICAgICAgY29uc3QgZWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwZGYtY29udGVudCcpOwogICAgICAgICAgICBjb25zdCBudW0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYmktbnVtYmVyJykudmFsdWU7CiAgICAgICAgICAgIGNvbnN0IG9wdCA9IHsKICAgICAgICAgICAgICAgIG1hcmdpbjogICAgICAgMCwKICAgICAgICAgICAgICAgIGZpbGVuYW1lOiAgICAgYEJJX04ke251bX1fJHtuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkuc2xpY2UoMCwxMCl9LnBkZmAsCiAgICAgICAgICAgICAgICBpbWFnZTogICAgICAgIHsgdHlwZTogJ2pwZWcnLCBxdWFsaXR5OiAwLjk4IH0sCiAgICAgICAgICAgICAgICBodG1sMmNhbnZhczogIHsgc2NhbGU6IDIgfSwKICAgICAgICAgICAgICAgIGpzUERGOiAgICAgICAgeyB1bml0OiAnbW0nLCBmb3JtYXQ6ICdhNCcsIG9yaWVudGF0aW9uOiAncG9ydHJhaXQnIH0KICAgICAgICAgICAgfTsKICAgICAgICAgICAgaHRtbDJwZGYoKS5zZXQob3B0KS5mcm9tKGVsZW1lbnQpLnNhdmUoKTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGdlbmVyYXRlRE9DWCgpIHsKICAgICAgICAgICAgaWYgKHR5cGVvZiBodG1sRG9jeCA9PT0gJ3VuZGVmaW5lZCcpIHsgYWxlcnQoJ0xlIG1vZHVsZSBXb3JkIGVzdCBlbiBjb3VycyBkZSBjaGFyZ2VtZW50LiBSw6llc3NheWV6IGRhbnMgcXVlbHF1ZXMgc2Vjb25kZXMuJyk7IHJldHVybjsgfQogICAgICAgICAgICBjb25zdCBjb250ZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BkZi1jb250ZW50JykuY2xvbmVOb2RlKHRydWUpOwogICAgICAgICAgICBjb25zdCBjc3NXb3JkID0gYAogICAgICAgICAgICAgICAgPHN0eWxlPgogICAgICAgICAgICAgICAgICAgIGJvZHkgeyBmb250LWZhbWlseTogJ0FyaWFsJywgc2Fucy1zZXJpZjsgZm9udC1zaXplOiAxMXB0OyBsaW5lLWhlaWdodDogMS41OyBjb2xvcjogIzFlMjkzYjsgfQogICAgICAgICAgICAgICAgICAgIGgxIHsgY29sb3I6ICMxZTQwYWY7IGZvbnQtc2l6ZTogMjBwdDsgdGV4dC10cmFuc2Zvcm06IHVwcGVyY2FzZTsgZm9udC13ZWlnaHQ6IGJvbGQ7IG1hcmdpbi1ib3R0b206IDVweDsgfQogICAgICAgICAgICAgICAgICAgIGgyIHsgY29sb3I6ICMxZTQwYWY7IGZvbnQtc2l6ZTogMTRwdDsgYm9yZGVyLWJvdHRvbTogMnB4IHNvbGlkICNiZmRiZmU7IHBhZGRpbmctYm90dG9tOiA1cHg7IG1hcmdpbi10b3A6IDE1cHg7IG1hcmdpbi1ib3R0b206IDEwcHg7IHRleHQtdHJhbnNmb3JtOiB1cHBlcmNhc2U7IH0KICAgICAgICAgICAgICAgICAgICAuaGVhZGVyLWJsb2NrIHsgbWFyZ2luLWJvdHRvbTogMjBweDsgYm9yZGVyLWJvdHRvbTogMnB4IHNvbGlkICMxZDRlZDg7IHBhZGRpbmctYm90dG9tOiAxMHB4OyB9CiAgICAgICAgICAgICAgICAgICAgcCB7IG1hcmdpbi1ib3R0b206IDhweDsgfQogICAgICAgICAgICAgICAgICAgIHRhYmxlIHsgd2lkdGg6IDEwMCU7IGJvcmRlci1jb2xsYXBzZTogY29sbGFwc2U7IG1hcmdpbi1ib3R0b206IDE1cHg7IH0KICAgICAgICAgICAgICAgICAgICB0ZCB7IHBhZGRpbmc6IDZweDsgdmVydGljYWwtYWxpZ246IHRvcDsgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICNlMmU4ZjA7IH0KICAgICAgICAgICAgICAgICAgICAuZm9udC1ib2xkIHsgZm9udC13ZWlnaHQ6IGJvbGQ7IH0KICAgICAgICAgICAgICAgICAgICAuaXRhbGljIHsgZm9udC1zdHlsZTogaXRhbGljOyB9CiAgICAgICAgICAgICAgICAgICAgLnRleHQtcmlnaHQgeyB0ZXh0LWFsaWduOiByaWdodDsgfQogICAgICAgICAgICAgICAgICAgIC50ZXh0LWNlbnRlciB7IHRleHQtYWxpZ246IGNlbnRlcjsgfQogICAgICAgICAgICAgICAgICAgIC51cHBlcmNhc2UgeyB0ZXh0LXRyYW5zZm9ybTogdXBwZXJjYXNlOyB9CiAgICAgICAgICAgICAgICAgICAgLnRleHQtYmx1ZS05MDAgeyBjb2xvcjogIzFlM2E4YTsgfQogICAgICAgICAgICAgICAgICAgIC50ZXh0LW9yYW5nZS02MDAgeyBjb2xvcjogI2VhNTgwYzsgfQogICAgICAgICAgICAgICAgICAgIC50ZXh0LXNsYXRlLTUwMCB7IGNvbG9yOiAjNjQ3NDhiOyB9CiAgICAgICAgICAgICAgICAgICAgLnRleHQteHMgeyBmb250LXNpemU6IDlwdDsgfQogICAgICAgICAgICAgICAgICAgIHVsIHsgbWFyZ2luLWxlZnQ6IDIwcHg7IGxpc3Qtc3R5bGUtdHlwZTogZGlzYzsgfQogICAgICAgICAgICAgICAgICAgIG9sIHsgbWFyZ2luLWxlZnQ6IDIwcHg7IGxpc3Qtc3R5bGUtdHlwZTogZGVjaW1hbDsgfQogICAgICAgICAgICAgICAgPC9zdHlsZT4KICAgICAgICAgICAgYDsKCiAgICAgICAgICAgIGNvbnN0IGh0bWxTdHJpbmcgPSBgCiAgICAgICAgICAgICAgICA8IURPQ1RZUEUgaHRtbD4KICAgICAgICAgICAgICAgIDxodG1sPgogICAgICAgICAgICAgICAgPGhlYWQ+CiAgICAgICAgICAgICAgICAgICAgPG1ldGEgY2hhcnNldD0idXRmLTgiPgogICAgICAgICAgICAgICAgICAgICR7Y3NzV29yZH0KICAgICAgICAgICAgICAgIDwvaGVhZD4KICAgICAgICAgICAgICAgIDxib2R5PgogICAgICAgICAgICAgICAgICAgICR7Y29udGVudC5pbm5lckhUTUx9CiAgICAgICAgICAgICAgICA8L2JvZHk+CiAgICAgICAgICAgICAgICA8L2h0bWw+CiAgICAgICAgICAgIGA7CgogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgY29uc3QgY29udmVydGVkID0gaHRtbERvY3guYXNCbG9iKGh0bWxTdHJpbmcsIHsKICAgICAgICAgICAgICAgICAgICBvcmllbnRhdGlvbjogJ3BvcnRyYWl0JywKICAgICAgICAgICAgICAgICAgICBtYXJnaW5zOiB7IHRvcDogNzIwLCByaWdodDogNzIwLCBib3R0b206IDcyMCwgbGVmdDogNzIwIH0KICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBjb25zdCBudW0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYmktbnVtYmVyJykudmFsdWU7CiAgICAgICAgICAgICAgICBzYXZlQXMoY29udmVydGVkLCBgQklfTiR7bnVtfV8ke25ldyBEYXRlKCkudG9JU09TdHJpbmcoKS5zbGljZSgwLDEwKX0uZG9jeGApOwogICAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICBhbGVydCgiRXJyZXVyIGxvcnMgZGUgbGEgZ8OpbsOpcmF0aW9uIFdvcmQgOiAiICsgZS5tZXNzYWdlKTsKICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZSk7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGV4cG9ydERhdGEoKSB7CiAgICAgICAgICAgIGNvbnN0IGRhdGEgPSB7CiAgICAgICAgICAgICAgICBlc3RhYmxpc2htZW50LCBidWxsZXRpbnMsIAogICAgICAgICAgICAgICAgY2F0ZWdvcmllczogbWFzdGVyQ2F0ZWdvcmllcywKICAgICAgICAgICAgICAgIGV4cG9ydERhdGU6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSwKICAgICAgICAgICAgICAgIHZlcnNpb246ICJiaWJhc2UtdjMuMCIKICAgICAgICAgICAgfTsKICAgICAgICAgICAgY29uc3QgZGF0YVN0ciA9ICJkYXRhOnRleHQvanNvbjtjaGFyc2V0PXV0Zi04LCIgKyBlbmNvZGVVUklDb21wb25lbnQoSlNPTi5zdHJpbmdpZnkoZGF0YSkpOwogICAgICAgICAgICBjb25zdCBkb3dubG9hZEFuY2hvck5vZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7CiAgICAgICAgICAgIGRvd25sb2FkQW5jaG9yTm9kZS5zZXRBdHRyaWJ1dGUoImhyZWYiLCBkYXRhU3RyKTsKICAgICAgICAgICAgZG93bmxvYWRBbmNob3JOb2RlLnNldEF0dHJpYnV0ZSgiZG93bmxvYWQiLCBgYmliYXNlX3NhdXZlZ2FyZGVfJHtuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkuc2xpY2UoMCwxMCl9Lmpzb25gKTsKICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChkb3dubG9hZEFuY2hvck5vZGUpOwogICAgICAgICAgICBkb3dubG9hZEFuY2hvck5vZGUuY2xpY2soKTsKICAgICAgICAgICAgZG93bmxvYWRBbmNob3JOb2RlLnJlbW92ZSgpOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gaW1wb3J0RGF0YShpbnB1dCkgewogICAgICAgICAgICBjb25zdCBmaWxlID0gaW5wdXQuZmlsZXNbMF07CiAgICAgICAgICAgIGlmICghZmlsZSkgcmV0dXJuOwogICAgICAgICAgICBjb25zdCByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpOwogICAgICAgICAgICByZWFkZXIub25sb2FkID0gZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICBjb25zdCBkYXRhID0gSlNPTi5wYXJzZShlLnRhcmdldC5yZXN1bHQpOwogICAgICAgICAgICAgICAgICAgIGlmKGNvbmZpcm0oIuKaoO+4jyBBdHRlbnRpb24gOiBDZWxhIHZhIHJlbXBsYWNlciB0b3V0ZXMgdm9zIGRvbm7DqWVzIGFjdHVlbGxlcyBwYXIgY2VsbGVzIGR1IGZpY2hpZXIuIENvbnRpbnVlciA/IikpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGEuZXN0YWJsaXNobWVudCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZXN0YWJsaXNobWVudCA9IGRhdGEuZXN0YWJsaXNobWVudDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdiaWJhc2VfZXN0YWJsaXNobWVudCcsIEpTT04uc3RyaW5naWZ5KGVzdGFibGlzaG1lbnQpKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YS5idWxsZXRpbnMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1bGxldGlucyA9IGRhdGEuYnVsbGV0aW5zOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2JpYmFzZV9idWxsZXRpbnMnLCBKU09OLnN0cmluZ2lmeShidWxsZXRpbnMpKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YS5jYXRlZ29yaWVzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXN0ZXJDYXRlZ29yaWVzID0gZGF0YS5jYXRlZ29yaWVzOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2F2ZUNhdGVnb3JpZXMoKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChkYXRhLmN1c3RvbUNhdGVnb3JpZXMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hc3RlckNhdGVnb3JpZXMgPSBbLi4uREVGQVVMVF9DQVRFR09SSUVTLCAuLi5kYXRhLmN1c3RvbUNhdGVnb3JpZXNdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2F2ZUNhdGVnb3JpZXMoKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBhbGVydCgi4pyFIERvbm7DqWVzIHJlc3RhdXLDqWVzIGF2ZWMgc3VjY8OocyAhIik7CiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uLnJlbG9hZCgpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycikgeyBhbGVydCgi4p2MIEVycmV1ciA6IExlIGZpY2hpZXIgc2VtYmxlIGludmFsaWRlLiIpOyB9CiAgICAgICAgICAgIH07CiAgICAgICAgICAgIHJlYWRlci5yZWFkQXNUZXh0KGZpbGUpOwogICAgICAgICAgICBpbnB1dC52YWx1ZSA9ICcnOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gcmVzZXREYXRhKCkgewogICAgICAgICAgICBpZihjb25maXJtKCLimqDvuI8gQVRURU5USU9OIDogVG91dCBlZmZhY2VyID8iKSkgewogICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLmNsZWFyKCk7CiAgICAgICAgICAgICAgICBhbGVydCgi4pm777iPIEFwcGxpY2F0aW9uIHLDqWluaXRpYWxpc8OpZS4iKTsKICAgICAgICAgICAgICAgIGxvY2F0aW9uLnJlbG9hZCgpOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBvcGVuU2V0dGluZ3MoKSB7IC8qIG1vdmVkIHRvIHdyYXBwZXIgQWx0K1AgKi8gfQogICAgICAgIGZ1bmN0aW9uIGNsb3NlU2V0dGluZ3MoKSB7fQogICAgICAgIGZ1bmN0aW9uIGhhbmRsZUxvZ29VcGxvYWQoaW5wdXQpIHsgLyogbG9nbyBmcm9tIHdyYXBwZXIgKi8gfQogICAgICAgIGZ1bmN0aW9uIHNhdmVTZXR0aW5ncygpIHsgLyogbW92ZWQgdG8gd3JhcHBlciAqLyB9CiAgICAKICAgICAgICAvLyBMaXN0ZW4gZm9yIHNldHRpbmdzIGZyb20gQ0FESVIgd3JhcHBlcgogICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgZnVuY3Rpb24oZSkgewogICAgICAgICAgICBpZiAoIWUuZGF0YSkgcmV0dXJuOwogICAgICAgICAgICBpZiAoZS5kYXRhLnR5cGUgPT09ICdwaWxvdGUtc2V0dGluZ3MnKSB7CiAgICAgICAgICAgICAgICB2YXIgZCA9IGUuZGF0YS5kYXRhOwogICAgICAgICAgICAgICAgaWYgKGQuc2Nob29sKSBlc3RhYmxpc2htZW50Lm5hbWUgPSBkLnNjaG9vbDsKICAgICAgICAgICAgICAgIGlmIChkLmNpdHkpIGVzdGFibGlzaG1lbnQuYWRkcmVzcyA9IGQuY2l0eTsKICAgICAgICAgICAgICAgIGlmIChkLmxvZ29TcmMpIGVzdGFibGlzaG1lbnQubG9nbyA9IGQubG9nb1NyYzsKICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdiaWJhc2VfZXN0YWJsaXNobWVudCcsIEpTT04uc3RyaW5naWZ5KGVzdGFibGlzaG1lbnQpKTsKICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdXBkYXRlUHJldmlldyA9PT0gJ2Z1bmN0aW9uJykgdXBkYXRlUHJldmlldygpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChlLmRhdGEudHlwZSA9PT0gJ2JpYmFzZS1zZXR0aW5ncycpIHsKICAgICAgICAgICAgICAgIHZhciBzID0gZS5kYXRhLmRhdGE7CiAgICAgICAgICAgICAgICBpZiAocy5sYXlvdXQpIGVzdGFibGlzaG1lbnQubGF5b3V0ID0gcy5sYXlvdXQ7CiAgICAgICAgICAgICAgICBpZiAocy5mb250KSBlc3RhYmxpc2htZW50LmZvbnQgPSBzLmZvbnQ7CiAgICAgICAgICAgICAgICBpZiAocy5kZWZhdWx0U2lnbmF0b3J5KSBlc3RhYmxpc2htZW50LmRlZmF1bHRTaWduYXRvcnkgPSBzLmRlZmF1bHRTaWduYXRvcnk7CiAgICAgICAgICAgICAgICBpZiAocy5kb2NUaXRsZSkgZXN0YWJsaXNobWVudC5kb2NUaXRsZSA9IHMuZG9jVGl0bGU7CiAgICAgICAgICAgICAgICBpZiAocy5kb2NGb290ZXIgIT09IHVuZGVmaW5lZCkgZXN0YWJsaXNobWVudC5kb2NGb290ZXIgPSBzLmRvY0Zvb3RlcjsKICAgICAgICAgICAgICAgIGlmIChzLm5hbWUpIGVzdGFibGlzaG1lbnQubmFtZSA9IHMubmFtZTsKICAgICAgICAgICAgICAgIGlmIChzLmFkZHJlc3MpIGVzdGFibGlzaG1lbnQuYWRkcmVzcyA9IHMuYWRkcmVzczsKICAgICAgICAgICAgICAgIGlmIChzLmxvZ28pIGVzdGFibGlzaG1lbnQubG9nbyA9IHMubG9nbzsKICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdiaWJhc2VfZXN0YWJsaXNobWVudCcsIEpTT04uc3RyaW5naWZ5KGVzdGFibGlzaG1lbnQpKTsKICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdXBkYXRlUHJldmlldyA9PT0gJ2Z1bmN0aW9uJykgdXBkYXRlUHJldmlldygpOwogICAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAKICAgICAgICAvLyBGYWxsYmFjazogaWYgRE9NQ29udGVudExvYWRlZCBhbHJlYWR5IGZpcmVkLCBydW4gaW5pdAogICAgICAgIGlmIChkb2N1bWVudC5yZWFkeVN0YXRlID09PSAnY29tcGxldGUnIHx8IGRvY3VtZW50LnJlYWR5U3RhdGUgPT09ICdpbnRlcmFjdGl2ZScpIHsKICAgICAgICAgICAgc2V0VGltZW91dChpbml0QXBwLCAyMDApOwogICAgICAgIH0KICAgIAogICAgZnVuY3Rpb24gb3BlbkJpUGFyYW1zKCkgeyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYmktcGFyYW1zLW1vZGFsJykuc3R5bGUuZGlzcGxheSA9ICdmbGV4JzsgfQogICAgZnVuY3Rpb24gY2xvc2VCaVBhcmFtcygpIHsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2JpLXBhcmFtcy1tb2RhbCcpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7IHNhdmVDdXJyZW50QnVsbGV0aW4oKTsgcmVuZGVyQnVsbGV0aW5MaXN0KCk7IHVwZGF0ZVByZXZpZXcoKTsgfQogICAgd2luZG93Lm9wZW5CaVBhcmFtcyA9IG9wZW5CaVBhcmFtczsKICAgIHdpbmRvdy5jbG9zZUJpUGFyYW1zID0gY2xvc2VCaVBhcmFtczsKPC9zY3JpcHQ+Cgo8ZGl2IGlkPSJiaS1wYXJhbXMtbW9kYWwiIHN0eWxlPSJkaXNwbGF5Om5vbmU7cG9zaXRpb246Zml4ZWQ7aW5zZXQ6MDtiYWNrZ3JvdW5kOnJnYmEoMCwwLDAsLjQ1KTt6LWluZGV4Ojk5OTk7YWxpZ24taXRlbXM6Y2VudGVyO2p1c3RpZnktY29udGVudDpjZW50ZXIiIG9uY2xpY2s9ImlmKGV2ZW50LnRhcmdldD09PXRoaXMpY2xvc2VCaVBhcmFtcygpIj4KPGRpdiBzdHlsZT0iYmFja2dyb3VuZDojZmZmO2JvcmRlci1yYWRpdXM6MTZweDtwYWRkaW5nOjI0cHggMjhweDt3aWR0aDo1MjBweDttYXgtd2lkdGg6OTJ2dzttYXgtaGVpZ2h0Ojkwdmg7b3ZlcmZsb3cteTphdXRvO2JveC1zaGFkb3c6MCAyMHB4IDYwcHggcmdiYSgwLDAsMCwuMjUpIj4KPGRpdiBzdHlsZT0iZGlzcGxheTpmbGV4O2p1c3RpZnktY29udGVudDpzcGFjZS1iZXR3ZWVuO2FsaWduLWl0ZW1zOmNlbnRlcjttYXJnaW4tYm90dG9tOjE4cHgiPgo8aDMgc3R5bGU9Im1hcmdpbjowO2ZvbnQtc2l6ZToxLjA1cmVtO2ZvbnQtd2VpZ2h0OjcwMDtjb2xvcjojMWUyOTNiIj7impnvuI8gUGFyYW3DqHRyZXMgZHUgYnVsbGV0aW48L2gzPgo8YnV0dG9uIG9uY2xpY2s9ImNsb3NlQmlQYXJhbXMoKSIgc3R5bGU9ImJhY2tncm91bmQ6bm9uZTtib3JkZXI6bm9uZTtmb250LXNpemU6MS4zcmVtO2N1cnNvcjpwb2ludGVyO2NvbG9yOiM5NGEzYjg7cGFkZGluZzo0cHgiPiZ0aW1lczs8L2J1dHRvbj4KPC9kaXY+CjxkaXYgc3R5bGU9ImRpc3BsYXk6Z3JpZDtncmlkLXRlbXBsYXRlLWNvbHVtbnM6MTAwcHggMWZyO2dhcDoxMnB4O21hcmdpbi1ib3R0b206MTRweCI+CjxkaXY+CjxsYWJlbCBzdHlsZT0iZGlzcGxheTpibG9jaztmb250LXNpemU6LjdyZW07Zm9udC13ZWlnaHQ6NzAwO2NvbG9yOiM5NGEzYjg7dGV4dC10cmFuc2Zvcm06dXBwZXJjYXNlO2xldHRlci1zcGFjaW5nOi41cHg7bWFyZ2luLWJvdHRvbTo0cHgiPk51bcOpcm88L2xhYmVsPgo8aW5wdXQgdHlwZT0ibnVtYmVyIiBpZD0iYmktbnVtYmVyIiBvbmlucHV0PSJ0cmlnZ2VyQXV0b1NhdmUoKSIgc3R5bGU9IndpZHRoOjEwMCU7cGFkZGluZzo4cHggMTJweDtib3JkZXI6MnB4IHNvbGlkICNmMWY1Zjk7Ym9yZGVyLXJhZGl1czoxMHB4O2ZvbnQtc2l6ZToxcmVtO2ZvbnQtd2VpZ2h0OjcwMDtjb2xvcjojMWUzYTVmO291dGxpbmU6bm9uZSIgcGxhY2Vob2xkZXI9Ik7CsCI+CjwvZGl2Pgo8ZGl2Pgo8bGFiZWwgc3R5bGU9ImRpc3BsYXk6YmxvY2s7Zm9udC1zaXplOi43cmVtO2ZvbnQtd2VpZ2h0OjcwMDtjb2xvcjojOTRhM2I4O3RleHQtdHJhbnNmb3JtOnVwcGVyY2FzZTtsZXR0ZXItc3BhY2luZzouNXB4O21hcmdpbi1ib3R0b206NHB4Ij5Qw6lyaW9kZSAoU2VtYWluZSk8L2xhYmVsPgo8ZGl2IHN0eWxlPSJkaXNwbGF5OmZsZXg7YWxpZ24taXRlbXM6Y2VudGVyO2dhcDo2cHgiPgo8aW5wdXQgdHlwZT0iZGF0ZSIgaWQ9ImJpLWRhdGUtc3RhcnQiIG9uaW5wdXQ9InRyaWdnZXJBdXRvU2F2ZSgpIiBzdHlsZT0iZmxleDoxO3BhZGRpbmc6OHB4IDEwcHg7Ym9yZGVyOjJweCBzb2xpZCAjZjFmNWY5O2JvcmRlci1yYWRpdXM6MTBweDtmb250LXNpemU6Ljg1cmVtO291dGxpbmU6bm9uZSI+CjxzcGFuIHN0eWxlPSJjb2xvcjojY2JkNWUxIj7ihpI8L3NwYW4+CjxpbnB1dCB0eXBlPSJkYXRlIiBpZD0iYmktZGF0ZS1lbmQiIG9uaW5wdXQ9InRyaWdnZXJBdXRvU2F2ZSgpIiBzdHlsZT0iZmxleDoxO3BhZGRpbmc6OHB4IDEwcHg7Ym9yZGVyOjJweCBzb2xpZCAjZjFmNWY5O2JvcmRlci1yYWRpdXM6MTBweDtmb250LXNpemU6Ljg1cmVtO291dGxpbmU6bm9uZSI+CjwvZGl2PjwvZGl2Pgo8L2Rpdj4KPGRpdiBzdHlsZT0iZGlzcGxheTpncmlkO2dyaWQtdGVtcGxhdGUtY29sdW1uczoxZnIgMWZyO2dhcDoxMnB4O21hcmdpbi1ib3R0b206MTRweCI+CjxkaXY+CjxsYWJlbCBzdHlsZT0iZGlzcGxheTpibG9jaztmb250LXNpemU6LjdyZW07Zm9udC13ZWlnaHQ6NzAwO2NvbG9yOiM5NGEzYjg7dGV4dC10cmFuc2Zvcm06dXBwZXJjYXNlO2xldHRlci1zcGFjaW5nOi41cHg7bWFyZ2luLWJvdHRvbTo0cHgiPkRhdGUgZGUgcHVibGljYXRpb248L2xhYmVsPgo8aW5wdXQgdHlwZT0iZGF0ZSIgaWQ9ImJpLXB1Yi1kYXRlIiBvbmlucHV0PSJ0cmlnZ2VyQXV0b1NhdmUoKSIgc3R5bGU9IndpZHRoOjEwMCU7cGFkZGluZzo4cHggMTBweDtib3JkZXI6MnB4IHNvbGlkICNmMWY1Zjk7Ym9yZGVyLXJhZGl1czoxMHB4O2ZvbnQtc2l6ZTouODVyZW07b3V0bGluZTpub25lIj4KPC9kaXY+CjxkaXY+CjxsYWJlbCBzdHlsZT0iZGlzcGxheTpibG9jaztmb250LXNpemU6LjdyZW07Zm9udC13ZWlnaHQ6NzAwO2NvbG9yOiM5NGEzYjg7dGV4dC10cmFuc2Zvcm06dXBwZXJjYXNlO2xldHRlci1zcGFjaW5nOi41cHg7bWFyZ2luLWJvdHRvbTo0cHgiPlNpZ25hdGFpcmU8L2xhYmVsPgo8c2VsZWN0IGlkPSJiaS1zaWduYXRvcnkiIG9uY2hhbmdlPSJ0cmlnZ2VyQXV0b1NhdmUoKSIgc3R5bGU9IndpZHRoOjEwMCU7cGFkZGluZzo4cHggMTBweDtib3JkZXI6MnB4IHNvbGlkICNmMWY1Zjk7Ym9yZGVyLXJhZGl1czoxMHB4O2ZvbnQtc2l6ZTouODVyZW07b3V0bGluZTpub25lO2JhY2tncm91bmQ6I2ZmZiI+CjxvcHRpb24gdmFsdWU9Ikwnw6lxdWlwZSBkZSBkaXJlY3Rpb24iPkwnw6lxdWlwZSBkZSBkaXJlY3Rpb248L29wdGlvbj4KPG9wdGlvbiB2YWx1ZT0iTGUgcHJvdmlzZXVyIj5MZSBwcm92aXNldXI8L29wdGlvbj4KPG9wdGlvbiB2YWx1ZT0iTGUgcHJvdmlzZXVyIGFkam9pbnQiPkxlIHByb3Zpc2V1ciBhZGpvaW50PC9vcHRpb24+CjxvcHRpb24gdmFsdWU9IkxhIGRpcmVjdGlvbiI+TGEgZGlyZWN0aW9uPC9vcHRpb24+Cjwvc2VsZWN0PjwvZGl2Pgo8L2Rpdj4KPGRpdiBzdHlsZT0ibWFyZ2luLWJvdHRvbToxNnB4Ij4KPGxhYmVsIHN0eWxlPSJkaXNwbGF5OmJsb2NrO2ZvbnQtc2l6ZTouN3JlbTtmb250LXdlaWdodDo3MDA7Y29sb3I6Izk0YTNiODt0ZXh0LXRyYW5zZm9ybTp1cHBlcmNhc2U7bGV0dGVyLXNwYWNpbmc6LjVweDttYXJnaW4tYm90dG9tOjRweCI+VGjDqG1lIC8gQ291bGV1cnMgUERGPC9sYWJlbD4KPHNlbGVjdCBpZD0iYmktdGhlbWUiIG9uY2hhbmdlPSJ0cmlnZ2VyQXV0b1NhdmUoKSIgc3R5bGU9IndpZHRoOjEwMCU7cGFkZGluZzo4cHggMTBweDtib3JkZXI6MnB4IHNvbGlkICNmMWY1Zjk7Ym9yZGVyLXJhZGl1czoxMHB4O2ZvbnQtc2l6ZTouODVyZW07b3V0bGluZTpub25lO2JhY2tncm91bmQ6I2ZmZiI+CjxvcHRpb24gdmFsdWU9ImJsdWUiPvCflLUgQmxldSBJbnN0aXR1dGlvbm5lbDwvb3B0aW9uPgo8b3B0aW9uIHZhbHVlPSJncmVlbiI+8J+foiBWZXJ0IE5hdHVyZTwvb3B0aW9uPgo8b3B0aW9uIHZhbHVlPSJwdXJwbGUiPvCfn6MgVmlvbGV0IENyw6lhdGlmPC9vcHRpb24+CjxvcHRpb24gdmFsdWU9InJlZCI+8J+UtCBSb3VnZSDDiW5lcmdpZTwvb3B0aW9uPgo8b3B0aW9uIHZhbHVlPSJvcmFuZ2UiPvCfn6AgT3JhbmdlIER5bmFtaXF1ZTwvb3B0aW9uPgo8b3B0aW9uIHZhbHVlPSJ0ZWFsIj7wn5KgIFR1cnF1b2lzZSBNb2Rlcm5lPC9vcHRpb24+CjxvcHRpb24gdmFsdWU9ImdyZXkiPuKaqyBTb2JyacOpdMOpIChOJkIpPC9vcHRpb24+Cjwvc2VsZWN0PjwvZGl2Pgo8ZGl2IHN0eWxlPSJ0ZXh0LWFsaWduOnJpZ2h0Ij4KPGJ1dHRvbiBvbmNsaWNrPSJjbG9zZUJpUGFyYW1zKCkiIHN0eWxlPSJwYWRkaW5nOjhweCAyMHB4O2JhY2tncm91bmQ6IzNiODJmNjtjb2xvcjojZmZmO2JvcmRlcjpub25lO2JvcmRlci1yYWRpdXM6MTBweDtmb250LXdlaWdodDo2MDA7Y3Vyc29yOnBvaW50ZXI7Zm9udC1zaXplOi44NXJlbSI+4pyTIEZlcm1lcjwvYnV0dG9uPgo8L2Rpdj4KPC9kaXY+PC9kaXY+Cgo8L2JvZHk+CjwvaHRtbD4="
};

    const STORAGE_KEY = 'pilote_suite_settings';
    let currentModule = null;
    const loadedModules = new Set();
    const blobUrls = {};
    const moduleNames = ['perdir','exam','oral','aed','bibase','bibase'];

    const MODULE_META = {
        perdir: { label:'PERDIR', sublabel:'Direction', icon:'fas fa-building-columns', color:'var(--c-info)' },
        exam:   { label:'EXAM',   sublabel:'Épreuves', icon:'fas fa-file-pen', color:'var(--c-accent)' },
        oral:   { label:'ORAL',   sublabel:'Oraux', icon:'fas fa-comments', color:'var(--c-warning)' },
        aed:    { label:'AED',    sublabel:'Vie Scolaire', icon:'fas fa-user-shield', color:'var(--c-success)' },
        data:   { label:'DONNÉES', sublabel:'Import', icon:'fas fa-database', color:'var(--c-purple)' },
        bibase: { label:'BULLETIN', sublabel:'Information', icon:'fas fa-newspaper', color:'#e67e22' },
    };
    const ALL_ITEMS = ['perdir','exam','oral','aed','bibase','data'];
    const DEFAULT_ORDER = ['perdir','exam','oral','aed','bibase','data'];

    // ═══ EXCEL TEMPLATES ═══
    const TEMPLATES = {
        teachers: {
            filename: 'Modele_Enseignants.xlsx',
            columns: ['Nom','Prénom','Email'],
            widths: [20,18,30]
        },
        students: {
            filename: 'Modele_Eleves.xlsx',
            columns: ['Classe','Nom','Prénom','Email','Aménagement'],
            widths: [12,18,16,28,22]
        }
    };

    function downloadTemplate(type) {
        const tpl = TEMPLATES[type];
        const wb = XLSX.utils.book_new();
        const wsData = [tpl.columns];
        // Add 2 example rows
        if (type === 'teachers') {
            wsData.push(['Dupont','Jean','j.dupont@ac-rennes.fr']);
            wsData.push(['Martin','Sophie','s.martin@ac-rennes.fr']);
        } else {
            wsData.push(['2GT1','Durand','Marie','m.durand@eleve.fr','']);
            wsData.push(['1STMG2','Leroy','Thomas','t.leroy@eleve.fr','1/3 temps']);
        }
        const ws = XLSX.utils.aoa_to_sheet(wsData);
        // Set column widths
        ws['!cols'] = tpl.widths.map(w => ({ wch: w }));
        XLSX.utils.book_append_sheet(wb, ws, type === 'teachers' ? 'Enseignants' : 'Élèves');
        XLSX.writeFile(wb, tpl.filename);
    }

    // ═══ SETTINGS ═══
    function getSettings() { try { return JSON.parse(localStorage.getItem(STORAGE_KEY)) || {}; } catch(e) { return {}; } }
    function getNavOrder() {
        const s = getSettings();
        if (s.navOrder && s.navOrder.length) {
            // Add any missing modules
            var order = s.navOrder.slice();
            ALL_ITEMS.forEach(function(m) { if (order.indexOf(m) < 0) order.push(m); });
            // Remove deleted modules
            order = order.filter(function(m) { return ALL_ITEMS.indexOf(m) >= 0; });
            return order;
        }
        return [...DEFAULT_ORDER];
    }

    function loadSettingsUI() {
        // Restore cloud config
        var ms = JSON.parse(localStorage.getItem('pilote_master_settings') || '{}');
        if (ms.cloud) {
            if (ms.cloud.provider) { _cloudProvider = ms.cloud.provider; selectCloudProvider(ms.cloud.provider); }
            if (ms.cloud.key) document.getElementById('s-cloud-key').value = ms.cloud.key;
            if (ms.cloud.bin) document.getElementById('s-cloud-bin').value = ms.cloud.bin;
            if (ms.cloud.gistToken) document.getElementById('s-gist-token').value = ms.cloud.gistToken;
            if (ms.cloud.gistId) document.getElementById('s-gist-id').value = ms.cloud.gistId;
            if (ms.cloud.gdriveClientId) document.getElementById('s-gdrive-clientid').value = ms.cloud.gdriveClientId;
            if (ms.cloud.gdriveFileId) document.getElementById('s-gdrive-fileid').value = ms.cloud.gdriveFileId;
            if (ms.cloud.wdUrl) document.getElementById('s-webdav-url').value = ms.cloud.wdUrl;
            if (ms.cloud.wdUser) document.getElementById('s-webdav-user').value = ms.cloud.wdUser;
            if (ms.cloud.wdPass) document.getElementById('s-webdav-pass').value = ms.cloud.wdPass;
            if (ms.cloud.auto) document.getElementById('s-cloud-auto').checked = true;
            if (ms.cloud.enabled) { document.getElementById('s-cloud-enabled').checked = true; toggleCloudUI(); }
        }
        const s = getSettings();
        document.getElementById('s-school').value = s.school || '';
        document.getElementById('s-name').value = s.name || '';
        document.getElementById('s-role').value = s.role || '';
        document.getElementById('s-city').value = s.city || '';
        if(document.getElementById('s-zone')) document.getElementById('s-zone').value = s.zone || 'B';
        document.getElementById('s-gcal').checked = s.gcalEnabled || false;
        if(document.getElementById('s-gcal-clientid')) document.getElementById('s-gcal-clientid').value = s.gcalClientId || '';
        if(document.getElementById('s-gcal-key')) document.getElementById('s-gcal-key').value = s.gcalKey || '';
        toggleGcal();
        if(s.gcalCals && s.gcalCals.length) { _gcalCalsData = s.gcalCals; renderGcalList(s.gcalCals, s.gcalSel || []); renderManualList(s.gcalCals); }
        document.getElementById('s-zone').value = s.zone || 'B';
        if (s.logoSrc) {
                updateFavicon(s.logoSrc); document.getElementById('img-logo').src = s.logoSrc; document.getElementById('img-logo').style.display='block'; document.getElementById('ph-logo').style.display='none'; }
        if (s.signSrc) { document.getElementById('img-sign').src = s.signSrc; document.getElementById('img-sign').style.display='block'; document.getElementById('ph-sign').style.display='none'; }
        moduleNames.forEach(m => { const el = document.getElementById('tog-' + m); if (el) el.checked = s['show_' + m] !== false; });
        updateModuleVisibility();
        updateBrandLogo();
        renderOrderList();
        refreshDataUI();
    }

    
    function loadBibSettingsUI() {
        var bib = JSON.parse(localStorage.getItem('bibase_establishment') || '{}');
        if(bib.layout) document.getElementById('bib-layout').value = bib.layout;
        if(bib.font) document.getElementById('bib-font').value = bib.font;
        if(bib.defaultSignatory) {
            var sel = document.getElementById('bib-signatory');
            var found = false;
            for(var i=0;i<sel.options.length;i++) { if(sel.options[i].value===bib.defaultSignatory) { found=true; break; } }
            if(!found) { var o=document.createElement('option'); o.value=bib.defaultSignatory; o.text=bib.defaultSignatory; sel.appendChild(o); }
            sel.value = bib.defaultSignatory;
        }
        if(bib.docTitle) document.getElementById('bib-doc-title').value = bib.docTitle;
        if(bib.docFooter) document.getElementById('bib-doc-footer').value = bib.docFooter;
    }
    function saveBibSettings() {
        try {
            var bib = JSON.parse(localStorage.getItem('bibase_establishment') || '{}');
            var el;
            el = document.getElementById('bib-layout'); if (el) bib.layout = el.value;
            el = document.getElementById('bib-font'); if (el) bib.font = el.value;
            el = document.getElementById('bib-signatory'); if (el) bib.defaultSignatory = el.value;
            el = document.getElementById('bib-doc-title'); if (el) bib.docTitle = el.value;
            el = document.getElementById('bib-doc-footer'); if (el) bib.docFooter = el.value;
            var s = getSettings();
            if (s.school) bib.name = s.school;
            if (s.city) bib.address = s.city;
            if (s.logoSrc) bib.logo = s.logoSrc;
            localStorage.setItem('bibase_establishment', JSON.stringify(bib));
            var frame = document.getElementById('frame-bibase');
            if (frame && frame.contentWindow) {
                frame.contentWindow.postMessage({type: 'bibase-settings', data: bib}, '*');
                frame.contentWindow.postMessage({type: 'pilote-settings', data: {school: s.school||'', city: s.city||'', logoSrc: s.logoSrc||''}}, '*');
            }
        } catch(e) { console.warn('saveBibSettings:', e); }
    }
function saveSettings() {
        // 1. Save main settings first (critical)
        try {
            var s = getSettings();
            s.school = document.getElementById('s-school').value;
            s.name = document.getElementById('s-name').value;
            s.role = document.getElementById('s-role').value;
            s.city = document.getElementById('s-city').value;
            s.zone = document.getElementById('s-zone').value;
            s.gcalEnabled = document.getElementById('s-gcal').checked;
            if(document.getElementById('s-gcal-clientid')) s.gcalClientId = document.getElementById('s-gcal-clientid').value;
            if(document.getElementById('s-gcal-key')) s.gcalKey = document.getElementById('s-gcal-key').value;
            s.gcalSel = getGcalSel();
            var logoImg = document.getElementById('img-logo');
            s.logoSrc = (logoImg && logoImg.style.display !== 'none') ? logoImg.src : '';
            var signImg = document.getElementById('img-sign');
            s.signSrc = (signImg && signImg.style.display !== 'none') ? signImg.src : '';
            moduleNames.forEach(function(m) { var tog = document.getElementById('tog-' + m); if(tog) s['show_' + m] = tog.checked; });
            s.navOrder = getCurrentOrderFromList();
            s._lastSync = new Date().toISOString();
            localStorage.setItem(STORAGE_KEY, JSON.stringify(s));
        } catch(e1) { console.error('saveSettings main:', e1); }
        // 2. Save cloud config (independent)
        try {
            var cs = getCloudConfig();
            var ms = JSON.parse(localStorage.getItem('pilote_master_settings') || '{}');
            ms.cloud = cs;
            localStorage.setItem('pilote_master_settings', JSON.stringify(ms));
            setTimeout(cloudAutoSync, 800);
        } catch(e2) { console.error('saveSettings cloud:', e2); }
        // 3. Save BiBase settings (independent)
        try { saveBibSettings(); } catch(e3) { console.error('saveSettings bib:', e3); }
        // 4. Save PERDIR submenu config
        try {
            var perdirCfg = [];
            document.querySelectorAll('#perdir-submenu-list .order-item').forEach(function(item) {
                var menuId = item.dataset.menuid;
                var chk = item.querySelector('input[type=checkbox]');
                perdirCfg.push({id: menuId, visible: chk ? chk.checked : true});
            });
            if (perdirCfg.length) {
                var ms2 = JSON.parse(localStorage.getItem('pilote_master_settings') || '{}');
                ms2.perdirMenus = perdirCfg;
                localStorage.setItem('pilote_master_settings', JSON.stringify(ms2));
            }
        } catch(e4) { console.error('saveSettings perdir:', e4); }
        // 5. Apply changes (each independent)
        try { updateModuleVisibility(); } catch(e) {}
        try { updateBrandLogo(); } catch(e) {}
        try { applyNavOrder(); } catch(e) {}
        try { pushSettingsToAllModules(); } catch(e) {}
        try {
            var bibFrame = document.getElementById('frame-bibase');
            if (bibFrame && bibFrame.contentWindow) {
                var bibData = JSON.parse(localStorage.getItem('bibase_establishment') || '{}');
                bibFrame.contentWindow.postMessage({type: 'bibase-settings', data: bibData}, '*');
            }
        } catch(e) {}
        closeSettings();
        if (_lfDirHandle) { lfMarkDirty(); setTimeout(function(){ lfWriteToFolder(); }, 500); }
    }


    function updateBrandLogo() {
        const s = getSettings();
        const brandLetter = document.getElementById('brandLetter');
        const brandLogo = document.getElementById('brandLogo');
        const welcomeLetter = document.getElementById('welcomeLetter');
        const welcomeLogoImg = document.getElementById('welcomeLogoImg');
        const welcomeSubtitle = document.getElementById('welcomeSubtitle');
        const bottomInfo = document.getElementById('bottomBarInfo');

        const brandIconEl = document.getElementById('brandIcon');
        const welcomeLogoEl = document.getElementById('welcomeLogo');
        if (s.logoSrc) {
                updateFavicon(s.logoSrc);
            brandLetter.style.display = 'none';
            brandLogo.src = s.logoSrc;
            brandLogo.style.display = 'block';
            brandIconEl.style.background = 'none';
            brandIconEl.style.boxShadow = 'none';
            welcomeLetter.style.display = 'none';
            welcomeLogoImg.src = s.logoSrc;
            welcomeLogoImg.style.display = 'block';
            welcomeLogoEl.style.background = 'none';
            welcomeLogoEl.style.boxShadow = 'none';
            welcomeLogoEl.style.borderRadius = '0';
            welcomeLogoEl.style.width = 'auto';
            welcomeLogoEl.style.height = 'auto';
        } else {
            brandLetter.style.display = '';
            brandLogo.style.display = 'none';
            brandIconEl.style.background = '';
            brandIconEl.style.boxShadow = '';
            welcomeLetter.style.display = '';
            welcomeLogoImg.style.display = 'none';
            welcomeLogoEl.style.background = '';
            welcomeLogoEl.style.boxShadow = '';
        }
        // Update school name in subtitle & bottom bar
        if (s.school) {
            welcomeSubtitle.textContent = s.school + ' — Suite de direction';
            bottomInfo.textContent = 'Pilote Suite — ' + s.school;
        } else {
            welcomeSubtitle.textContent = 'Suite d\'outils pour la direction d\'établissement';
            bottomInfo.textContent = 'CADIR Suite — Direction';
        }
    }

    function handleSettingsImage(input, type) {
        const file = input.files[0]; if (!file) return;
        const reader = new FileReader();
        reader.onload = function(e) {
            document.getElementById('img-' + type).src = e.target.result;
            document.getElementById('img-' + type).style.display = 'block';
            document.getElementById('ph-' + type).style.display = 'none';
        };
        reader.readAsDataURL(file);
    }

    function clearImage(type) {
        document.getElementById('img-' + type).style.display = 'none';
        document.getElementById('img-' + type).src = '';
        document.getElementById('ph-' + type).style.display = '';
    }

    function openSettings() {
        renderPerdirSubmenus(); loadSettingsUI(); loadBibSettingsUI();
        if (typeof lfInitMode === 'function') lfInitMode();
        document.getElementById('settingsOverlay').classList.add('open'); }
    
    var _gcalAccessToken = null;
    var _gcalCalsData = [];

    function toggleGcal() {
        var checked = document.getElementById('s-gcal').checked;
        document.getElementById('gcal-opts').style.display = checked ? 'block' : 'none';
        var s = getSettings();
        s.gcalEnabled = checked;
        localStorage.setItem(STORAGE_KEY, JSON.stringify(s));
        pushSettingsToAllModules();
    }

    function gcalAuth() {
        if (window.location.protocol === 'file:') {
            var iframe = document.querySelector('.module-frame.active');
            if (iframe && iframe.contentWindow && (function(){try{return iframe.contentWindow.location.protocol==='file:';}catch(e){return false;}})()) {}
            alert('\u26a0 Google Agenda nécessite un serveur web local.\n\nPour lancer :\n1. Ouvrez un terminal dans le dossier contenant PILOTE_Suite.html\n2. Tapez : python3 -m http.server 8080\n3. Ouvrez http://localhost:8080/PILOTE_Suite.html\n\nL\'authentification OAuth2 ne fonctionne pas depuis file://.');
            document.getElementById('gcal-auth-status').innerHTML = '<span style=\"color:#e74c3c\"><i class=\"fas fa-exclamation-triangle\"></i> Nécessite http://localhost</span>';
            return;
        }
        var clientId = document.getElementById('s-gcal-clientid').value.trim();
        if (!clientId) { alert('Veuillez saisir un Client ID OAuth2.'); return; }
        if (typeof google === 'undefined' || !google.accounts || !google.accounts.oauth2) {
            alert('Biblioth\u00e8que Google Identity Services non charg\u00e9e. V\u00e9rifiez votre connexion internet.');
            return;
        }
        document.getElementById('gcal-auth-status').innerHTML = '<i class="fas fa-spinner fa-spin"></i> Connexion...';
        var tokenClient = google.accounts.oauth2.initTokenClient({
            client_id: clientId,
            scope: 'https://www.googleapis.com/auth/calendar.readonly',
            callback: function(resp) {
                if (resp.error) {
                    document.getElementById('gcal-auth-status').innerHTML = '<span style="color:#e74c3c;"><i class="fas fa-times"></i> ' + (resp.error_description || resp.error) + '</span>';
                    return;
                }
                _gcalAccessToken = resp.access_token;
                document.getElementById('gcal-auth-status').innerHTML = '<span style="color:#34a853;"><i class="fas fa-check"></i> Connect\u00e9</span>';
                document.getElementById('btn-gcal-auth').innerHTML = '<i class="fas fa-check-circle"></i> Connect\u00e9';
                document.getElementById('btn-gcal-auth').style.background = '#34a853';
                fetchGcalList();
            }
        });
        tokenClient.requestAccessToken();
    }

    function fetchGcalList() {
        if (!_gcalAccessToken) return;
        var div = document.getElementById('gcal-list');
        div.innerHTML = '<span style="color:#888;font-size:.78rem;"><i class="fas fa-spinner fa-spin"></i> Chargement...</span>';
        fetch('https://www.googleapis.com/calendar/v3/users/me/calendarList', {
            headers: { 'Authorization': 'Bearer ' + _gcalAccessToken }
        })
        .then(function(r) { if (!r.ok) throw new Error('Erreur ' + r.status); return r.json(); })
        .then(function(data) {
            if (!data.items || !data.items.length) { div.innerHTML = '<span style="color:#e74c3c;">Aucun agenda.</span>'; return; }
            var s = getSettings();
            _gcalCalsData = data.items.map(function(c) { return {id: c.id, name: c.summary, bg: c.backgroundColor || '#4285f4', primary: c.primary || false}; });
            s.gcalCals = _gcalCalsData;
            localStorage.setItem(STORAGE_KEY, JSON.stringify(s));
            renderGcalList(_gcalCalsData, s.gcalSel || []);
            document.getElementById('gcal-list-wrap').style.display = 'block';
        })
        .catch(function(err) {
            div.innerHTML = '<span style="color:#e74c3c;font-size:.78rem;"><i class="fas fa-exclamation-triangle"></i> ' + err.message + '</span>';
        });
    }

    function renderGcalList(cals, sel) {
        var div = document.getElementById('gcal-list');
        if (!cals || !cals.length) { div.innerHTML = ''; return; }
        var h = '';
        cals.forEach(function(c) {
            var checked = sel.indexOf(c.id) >= 0 || (sel.length === 0 && c.primary);
            h += '<label style="display:flex;align-items:center;gap:8px;padding:5px 8px;font-size:.78rem;cursor:pointer;border-radius:6px;">';
            h += '<input type="checkbox" class="gcal-chk" value="' + c.id + '" ' + (checked ? 'checked' : '') + ' style="accent-color:' + c.bg + ';">';
            h += '<span style="width:12px;height:12px;border-radius:3px;background:' + c.bg + ';flex-shrink:0;"></span>';
            h += '<span>' + c.name + (c.primary ? ' <small style="color:#888;">(principal)</small>' : '') + '</span>';
            h += '</label>';
        });
        div.innerHTML = h;
        document.getElementById('gcal-list-wrap').style.display = 'block';
    }

    function getGcalSel() { return Array.from(document.querySelectorAll('.gcal-chk:checked')).map(function(c) { return c.value; }); }

    function gcalFetchEvents() {
        var sel = getGcalSel();
        if (!sel.length) { alert('S\u00e9lectionnez au moins un agenda.'); return; }
        var useOAuth = !!_gcalAccessToken;
        var apiKey = document.getElementById('s-gcal-key') ? document.getElementById('s-gcal-key').value.trim() : '';
        if (!useOAuth && !apiKey) { alert('Connectez-vous via OAuth2 ou saisissez une cl\u00e9 API.'); return; }

        var statusEl = document.getElementById('gcal-events-status');
        statusEl.innerHTML = '<i class="fas fa-spinner fa-spin"></i> R\u00e9cup\u00e9ration...';

        var now = new Date();
        var start = new Date(now.getFullYear(), now.getMonth() - 2, 1).toISOString();
        var end = new Date(now.getFullYear(), now.getMonth() + 4, 0).toISOString();

        var calMap = {};
        (_gcalCalsData.length ? _gcalCalsData : (getSettings().gcalCals || [])).forEach(function(c) { calMap[c.id] = c; });

        var promises = sel.map(function(calId) {
            var url = 'https://www.googleapis.com/calendar/v3/calendars/' + encodeURIComponent(calId) + '/events?timeMin=' + encodeURIComponent(start) + '&timeMax=' + encodeURIComponent(end) + '&singleEvents=true&orderBy=startTime&maxResults=500';
            var opts = {};
            if (useOAuth) { opts.headers = { 'Authorization': 'Bearer ' + _gcalAccessToken }; }
            else { url += '&key=' + apiKey; }
            return fetch(url, opts).then(function(r) { return r.ok ? r.json() : {items:[]}; }).catch(function() { return {items:[]}; });
        });

        Promise.all(promises).then(function(results) {
            var events = [];
            results.forEach(function(data, i) {
                var calId = sel[i];
                var calInfo = calMap[calId] || {name: calId, bg: '#4285f4'};
                (data.items || []).forEach(function(ev) {
                    if (!ev.start) return;
                    var startDate = ev.start.date || (ev.start.dateTime ? ev.start.dateTime.split('T')[0] : null);
                    if (!startDate) return;
                    var startTime = ev.start.dateTime ? ev.start.dateTime.split('T')[1].substring(0, 5) : '';
                    var endTime = ev.end && ev.end.dateTime ? ev.end.dateTime.split('T')[1].substring(0, 5) : '';
                    events.push({ id: ev.id, title: ev.summary || '(sans titre)', date: startDate, time: startTime, endTime: endTime, calName: calInfo.name, color: calInfo.bg, calId: calId });
                });
            });
            events.sort(function(a, b) { return (a.date + ' ' + (a.time || '00:00')).localeCompare(b.date + ' ' + (b.time || '00:00')); });

            var s = getSettings();
            s.gcalEvents = events;
            s.gcalSel = sel;
            localStorage.setItem(STORAGE_KEY, JSON.stringify(s));

            statusEl.innerHTML = '<span style="color:#34a853;"><i class="fas fa-check"></i> ' + events.length + ' \u00e9v\u00e9nement(s) synchronis\u00e9(s)</span>';
            pushGcalToModules();
        });
    }

    
    
    // ═══ OUTLOOK / OFFICE 365 CALENDAR ═══
    var _outlookToken = null;
    var _outlookCals = [];

    function outlookAuth() {
        var clientId = (document.getElementById('s-outlook-clientid').value || '').trim();
        if (!clientId) return alert('Saisissez l\'Application (client) ID');
        var redir = location.origin + location.pathname;
        var scope = 'Calendars.ReadWrite';
        var url = 'https://login.microsoftonline.com/common/oauth2/v2.0/authorize?client_id='+encodeURIComponent(clientId)+'&response_type=token&redirect_uri='+encodeURIComponent(redir)+'&scope='+encodeURIComponent(scope);
        var w = window.open(url, '_blank', 'width=500,height=600');
        var check = setInterval(function() {
            try {
                if (w.closed) { clearInterval(check); return; }
                if (w.location.hash) {
                    var params = new URLSearchParams(w.location.hash.substring(1));
                    var tk = params.get('access_token');
                    if (tk) {
                        _outlookToken = tk;
                        w.close(); clearInterval(check);
                        document.getElementById('outlook-auth-status').innerHTML = '<span style="color:#0078d4"><i class="fas fa-check-circle"></i> Connecté</span>';
                        document.getElementById('btn-outlook-auth').innerHTML = '<i class="fas fa-check-circle"></i> Connecté';
                        document.getElementById('btn-outlook-auth').style.background = '#0078d4';
                        outlookFetchCalendars();
                    }
                }
            } catch(e) {}
        }, 500);
    }

    function outlookFetchCalendars() {
        if (!_outlookToken) return;
        fetch('https://graph.microsoft.com/v1.0/me/calendars', {
            headers: { 'Authorization': 'Bearer ' + _outlookToken }
        }).then(function(r) { return r.json(); }).then(function(data) {
            _outlookCals = (data.value || []).map(function(c) { return {id:c.id, name:c.name, color:c.hexColor||'#0078d4'}; });
            var div = document.getElementById('outlook-cal-list');
            var s = getSettings();
            var sel = s.outlookSel || [];
            div.innerHTML = _outlookCals.map(function(c) {
                var chk = sel.indexOf(c.id) >= 0 || sel.length === 0 ? 'checked' : '';
                return '<label style="display:flex;align-items:center;gap:6px;margin:4px 0;font-size:.78rem;cursor:pointer;"><input type="checkbox" class="outlook-cal-chk" value="'+c.id+'" '+chk+'><span style="width:10px;height:10px;border-radius:50%;background:'+(c.color||'#0078d4')+'"></span>'+c.name+'</label>';
            }).join('');
            document.getElementById('outlook-cal-list-wrap').style.display = 'block';
        }).catch(function(err) {
            document.getElementById('outlook-auth-status').innerHTML = '<span style="color:#e74c3c">'+err.message+'</span>';
        });
    }

    function getOutlookSel() {
        var chks = document.querySelectorAll('.outlook-cal-chk:checked');
        return Array.from(chks).map(function(c) { return c.value; });
    }

    function outlookFetchEvents() {
        var sel = getOutlookSel();
        if (!sel.length) { alert('Sélectionnez au moins un agenda Outlook.'); return; }
        if (!_outlookToken) { alert('Connectez Outlook d\'abord.'); return; }

        var statusEl = document.getElementById('outlook-events-status');
        statusEl.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Récupération...';

        var now = new Date();
        var start = new Date(now.getFullYear(), now.getMonth() - 2, 1).toISOString();
        var end = new Date(now.getFullYear(), now.getMonth() + 4, 0).toISOString();

        var calMap = {};
        _outlookCals.forEach(function(c) { calMap[c.id] = c; });

        var promises = sel.map(function(calId) {
            var url = 'https://graph.microsoft.com/v1.0/me/calendars/' + encodeURIComponent(calId) + '/events?$select=subject,start,end,id&$filter=start/dateTime ge \''+start+'\' and start/dateTime le \''+end+'\'&$top=500&$orderby=start/dateTime';
            return fetch(url, {
                headers: { 'Authorization': 'Bearer ' + _outlookToken, 'Prefer': 'outlook.timezone="Europe/Paris"' }
            }).then(function(r) { return r.ok ? r.json() : {value:[]}; }).catch(function() { return {value:[]}; });
        });

        Promise.all(promises).then(function(results) {
            var events = [];
            results.forEach(function(data, i) {
                var calId = sel[i];
                var calInfo = calMap[calId] || {name:'Outlook', color:'#0078d4'};
                (data.value || []).forEach(function(ev) {
                    if (!ev.start) return;
                    var startDT = ev.start.dateTime || '';
                    var startDate = startDT.split('T')[0];
                    var startTime = startDT.indexOf('T') >= 0 ? startDT.split('T')[1].substring(0,5) : '';
                    var endDT = ev.end ? (ev.end.dateTime||'') : '';
                    var endTime = endDT.indexOf('T') >= 0 ? endDT.split('T')[1].substring(0,5) : '';
                    if (startTime === '00:00' && endTime === '00:00') { startTime = ''; endTime = ''; }
                    events.push({id:ev.id, title:ev.subject||'(sans titre)', date:startDate, time:startTime, endTime:endTime, calName:calInfo.name, color:calInfo.color, calId:calId});
                });
            });

            var s = getSettings();
            s.outlookEvents = events;
            s.outlookSel = sel;
            s.outlookEnabled = true;
            localStorage.setItem(STORAGE_KEY, JSON.stringify(s));

            statusEl.innerHTML = '<span style="color:#0078d4"><i class="fas fa-check"></i> '+events.length+' événement(s)</span>';
            pushOutlookToModules();
        });
    }

    function pushOutlookToModules() {
        var s = getSettings();
        var frame = document.getElementById('frame-perdir');
        if (frame && frame.contentWindow) {
            frame.contentWindow.postMessage({ type: 'pilote-outlook', data: {
                outlookEvents: s.outlookEvents || [],
                outlookCals: _outlookCals || [],
                outlookSel: s.outlookSel || [],
                outlookEnabled: s.outlookEnabled || false
            }}, '*');
        }
    }

    // Outlook CRUD
    function outlookAddEvent(data) {
        if (!_outlookToken) { alert('Outlook non connecté'); return; }
        var body = { subject: data.title };
        if (data.time) {
            body.start = { dateTime: data.date + 'T' + data.time + ':00', timeZone: 'Europe/Paris' };
            body.end = { dateTime: data.date + 'T' + (data.endTime || data.time) + ':00', timeZone: 'Europe/Paris' };
        } else {
            body.isAllDay = true;
            body.start = { dateTime: data.date + 'T00:00:00', timeZone: 'Europe/Paris' };
            body.end = { dateTime: data.date + 'T23:59:00', timeZone: 'Europe/Paris' };
        }
        fetch('https://graph.microsoft.com/v1.0/me/calendars/' + encodeURIComponent(data.calId) + '/events', {
            method: 'POST', headers: { 'Authorization': 'Bearer ' + _outlookToken, 'Content-Type': 'application/json' }, body: JSON.stringify(body)
        }).then(function(r) { if (!r.ok) throw new Error(r.status); notifyPerdirCrudOk(); outlookFetchEvents(); })
        .catch(function(err) { alert('Erreur Outlook: ' + err.message); });
    }
    function outlookUpdateEvent(data) {
        if (!_outlookToken) { alert('Outlook non connecté'); return; }
        var body = { subject: data.title };
        if (data.time) {
            body.start = { dateTime: data.date + 'T' + data.time + ':00', timeZone: 'Europe/Paris' };
            body.end = { dateTime: data.date + 'T' + (data.endTime || data.time) + ':00', timeZone: 'Europe/Paris' };
        } else {
            body.isAllDay = true;
            body.start = { dateTime: data.date + 'T00:00:00', timeZone: 'Europe/Paris' };
            body.end = { dateTime: data.date + 'T23:59:00', timeZone: 'Europe/Paris' };
        }
        fetch('https://graph.microsoft.com/v1.0/me/events/' + encodeURIComponent(data.eventId), {
            method: 'PATCH', headers: { 'Authorization': 'Bearer ' + _outlookToken, 'Content-Type': 'application/json' }, body: JSON.stringify(body)
        }).then(function(r) { if (!r.ok) throw new Error(r.status); notifyPerdirCrudOk(); outlookFetchEvents(); })
        .catch(function(err) { alert('Erreur Outlook: ' + err.message); });
    }
    function outlookDeleteEvent(data) {
        if (!_outlookToken) { alert('Outlook non connecté'); return; }
        fetch('https://graph.microsoft.com/v1.0/me/events/' + encodeURIComponent(data.eventId), {
            method: 'DELETE', headers: { 'Authorization': 'Bearer ' + _outlookToken }
        }).then(function(r) { if (r.status !== 204 && !r.ok) throw new Error(r.status); notifyPerdirCrudOk(); outlookFetchEvents(); })
        .catch(function(err) { alert('Erreur Outlook: ' + err.message); });
    }

    // ═══ GOOGLE CALENDAR CRUD ═══
    function gcalAddEvent(data) {
        if (!_gcalAccessToken) { alert('Google Agenda non connecté'); return; }
        var body = { summary: data.title };
        if (data.time) {
            body.start = { dateTime: data.date + 'T' + data.time + ':00', timeZone: 'Europe/Paris' };
            body.end = { dateTime: data.date + 'T' + (data.endTime || data.time) + ':00', timeZone: 'Europe/Paris' };
        } else {
            body.start = { date: data.date };
            body.end = { date: data.date };
        }
        fetch('https://www.googleapis.com/calendar/v3/calendars/' + encodeURIComponent(data.calId) + '/events', {
            method: 'POST',
            headers: { 'Authorization': 'Bearer ' + _gcalAccessToken, 'Content-Type': 'application/json' },
            body: JSON.stringify(body)
        }).then(function(r) {
            if (!r.ok) throw new Error('Erreur ' + r.status);
            return r.json();
        }).then(function() {
            notifyPerdirCrudOk();
            gcalFetchEvents();
        }).catch(function(err) { alert('Erreur ajout Google: ' + err.message); });
    }

    function gcalUpdateEvent(data) {
        if (!_gcalAccessToken) { alert('Google Agenda non connecté'); return; }
        var calId = data.calId;
        // If no calId, try to find from selected calendars
        if (!calId) {
            var sel = getGcalSel();
            calId = sel.length ? sel[0] : 'primary';
        }
        var body = { summary: data.title };
        if (data.time) {
            body.start = { dateTime: data.date + 'T' + data.time + ':00', timeZone: 'Europe/Paris' };
            body.end = { dateTime: data.date + 'T' + (data.endTime || data.time) + ':00', timeZone: 'Europe/Paris' };
        } else {
            body.start = { date: data.date };
            body.end = { date: data.date };
        }
        fetch('https://www.googleapis.com/calendar/v3/calendars/' + encodeURIComponent(calId) + '/events/' + encodeURIComponent(data.eventId), {
            method: 'PATCH',
            headers: { 'Authorization': 'Bearer ' + _gcalAccessToken, 'Content-Type': 'application/json' },
            body: JSON.stringify(body)
        }).then(function(r) {
            if (!r.ok) throw new Error('Erreur ' + r.status);
            notifyPerdirCrudOk();
            gcalFetchEvents();
        }).catch(function(err) { alert('Erreur modification Google: ' + err.message); });
    }

    function gcalDeleteEvent(data) {
        if (!_gcalAccessToken) { alert('Google Agenda non connecté'); return; }
        var calId = data.calId;
        if (!calId) {
            var sel = getGcalSel();
            calId = sel.length ? sel[0] : 'primary';
        }
        fetch('https://www.googleapis.com/calendar/v3/calendars/' + encodeURIComponent(calId) + '/events/' + encodeURIComponent(data.eventId), {
            method: 'DELETE',
            headers: { 'Authorization': 'Bearer ' + _gcalAccessToken }
        }).then(function(r) {
            if (r.status !== 204 && !r.ok) throw new Error('Erreur ' + r.status);
            notifyPerdirCrudOk();
            gcalFetchEvents();
        }).catch(function(err) { alert('Erreur suppression Google: ' + err.message); });
    }

    function notifyPerdirCrudOk() {
        var fr = document.getElementById('frame-perdir');
        if (fr && fr.contentWindow) {
            fr.contentWindow.postMessage({type:'pilote-gcal-crud-ok'}, '*');
        }
    }

    function pushGcalToModules() {
        var s = getSettings();
        var frame = document.getElementById('frame-perdir');
        if (frame && frame.contentWindow) {
            frame.contentWindow.postMessage({ type: 'pilote-settings', data: {
                school: s.school || '', name: s.name || '', role: s.role || '', city: s.city || '',
                zone: s.zone || 'B', logoSrc: s.logoSrc || '', signSrc: s.signSrc || '',
                teachers: s.teachers || [], students: s.students || [],
                gcalEnabled: s.gcalEnabled || false,
                gcalEvents: s.gcalEvents || [],
                gcalCalendars: s.gcalCals || [],
                gcalSel: s.gcalSel || []
            }}, '*');
        }
    }

    function addManualCal() {
        var id = document.getElementById('gcal-manual-id').value.trim();
        var name = document.getElementById('gcal-manual-name').value.trim() || id;
        if (!id) { alert('Saisissez l\'ID du calendrier.'); return; }
        var s = getSettings();
        if (!s.gcalCals) s.gcalCals = [];
        if (s.gcalCals.find(function(c) { return c.id === id; })) { alert('D\u00e9j\u00e0 ajout\u00e9.'); return; }
        var colors = ['#4285f4', '#0b8043', '#d50000', '#f09300', '#7986cb', '#8e24aa', '#039be5', '#616161'];
        var bg = colors[s.gcalCals.length % colors.length];
        s.gcalCals.push({ id: id, name: name, bg: bg, manual: true });
        if (!s.gcalSel) s.gcalSel = [];
        s.gcalSel.push(id);
        localStorage.setItem(STORAGE_KEY, JSON.stringify(s));
        _gcalCalsData = s.gcalCals;
        renderGcalList(s.gcalCals, s.gcalSel);
        renderManualList(s.gcalCals);
        document.getElementById('gcal-manual-id').value = '';
        document.getElementById('gcal-manual-name').value = '';
    }

    function renderManualList(cals) {
        var div = document.getElementById('gcal-manual-list');
        if (!div) return;
        var manuals = (cals || []).filter(function(c) { return c.manual; });
        if (!manuals.length) { div.innerHTML = ''; return; }
        var h = '';
        manuals.forEach(function(c) {
            h += '<div style="display:flex;align-items:center;gap:6px;font-size:.72rem;padding:2px 0;">';
            h += '<span style="width:8px;height:8px;border-radius:50%;background:' + c.bg + ';"></span>' + c.name;
            h += ' <button onclick="removeManualCal(this.dataset.cid)" data-cid="' + c.id + '" style="background:none;border:none;color:#e74c3c;cursor:pointer;font-size:.72rem;">&times;</button></div>';
        });
        div.innerHTML = h;
    }

    function removeManualCal(id) {
        var s = getSettings();
        s.gcalCals = (s.gcalCals || []).filter(function(c) { return c.id !== id; });
        s.gcalSel = (s.gcalSel || []).filter(function(x) { return x !== id; });
        localStorage.setItem(STORAGE_KEY, JSON.stringify(s));
        _gcalCalsData = s.gcalCals;
        renderGcalList(s.gcalCals, s.gcalSel);
        renderManualList(s.gcalCals);
    }

    function closeSettings() { document.getElementById('settingsOverlay').classList.remove('open'); }

    // ═══ EXPORT / IMPORT SETTINGS ═══
    function exportSettings() {
        const s = getSettings();
        const json = JSON.stringify(s, null, 2);
        const blob = new Blob([json], { type: 'application/json' });
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        const date = new Date().toISOString().split('T')[0];
        a.download = 'pilote_parametres_' + date + '.json';
        document.body.appendChild(a);
        a.click();
        document.body.removeChild(a);
        URL.revokeObjectURL(url);
    }

    function importSettings(input) {
        const file = input.files[0]; if (!file) return;
        const reader = new FileReader();
        reader.onload = function(e) {
            try {
                const imported = JSON.parse(e.target.result);
                // Validate it's an object
                if (typeof imported !== 'object' || Array.isArray(imported)) throw new Error('Format invalide');
                // Merge: imported settings overwrite current
                localStorage.setItem(STORAGE_KEY, JSON.stringify(imported));
                loadSettingsUI();
                applyNavOrder();
                updateBrandLogo();
                pushSettingsToAllModules();
                alert('✅ Paramètres importés avec succès !');
            } catch(err) {
                alert('❌ Erreur lors de l\'import : ' + err.message);
            }
        };
        reader.readAsText(file);
        input.value = ''; // reset for re-import
    }

    // ═══ DRAG & DROP ORDER ═══
    function renderOrderList() {
        const order = getNavOrder();
        const list = document.getElementById('orderList');
        list.innerHTML = '';
        order.forEach((id) => {
            const meta = MODULE_META[id];
            const li = document.createElement('li');
            li.className = 'order-item';
            li.setAttribute('draggable', 'true');
            li.dataset.module = id;
            li.innerHTML = `
                <span class="order-grip"><i class="fas fa-grip-vertical"></i></span>
                <span class="order-icon" style="background:${meta.color}"><i class="${meta.icon}"></i></span>
                <span class="order-label">${meta.label} <span style="color:#999;font-weight:400;font-size:0.72rem;">— ${meta.sublabel}</span></span>
            `;
            li.addEventListener('dragstart', () => { li.classList.add('dragging'); });
            li.addEventListener('dragend', () => { li.classList.remove('dragging'); document.querySelectorAll('.order-item').forEach(el => el.classList.remove('drag-over')); });
            li.addEventListener('dragover', (e) => { e.preventDefault(); li.classList.add('drag-over'); });
            li.addEventListener('dragleave', () => { li.classList.remove('drag-over'); });
            li.addEventListener('drop', (e) => {
                e.preventDefault();
                li.classList.remove('drag-over');
                const dragging = list.querySelector('.dragging');
                if (dragging && dragging !== li) {
                    const items = [...list.children];
                    const fromIdx = items.indexOf(dragging);
                    const toIdx = items.indexOf(li);
                    if (fromIdx < toIdx) li.after(dragging); else li.before(dragging);
                }
            });
            list.appendChild(li);
        });
    }

    function getCurrentOrderFromList() {
        return [...document.querySelectorAll('#orderList .order-item')].map(el => el.dataset.module);
    }

    function applyNavOrder() {
        const order = getNavOrder();
        const container = document.getElementById('navItems');
        const items = {};
        container.querySelectorAll('.nav-item').forEach(el => { items[el.dataset.module] = el; });
        // Also grab separators
        const seps = container.querySelectorAll('.nav-sep');
        while (container.firstChild) container.removeChild(container.firstChild);
        order.forEach((id) => { if (items[id]) container.appendChild(items[id]); });

        // Also reorder welcome cards
        const grid = document.getElementById('moduleGrid');
        const cards = {};
        grid.querySelectorAll('.module-card').forEach(c => { cards[c.dataset.m] = c; });
        while (grid.firstChild) grid.removeChild(grid.firstChild);
        order.forEach(id => { if (cards[id]) grid.appendChild(cards[id]); });
    }

    // ═══ EXCEL IMPORT (Data Panel) ═══
    function handleExcelImport(input, type) {
        const files = Array.from(input.files);
        if (!files.length) return;

        // Ask whether to merge or replace if data already exists
        const s = getSettings();
        const existing = s[type] || [];
        let mergeMode = false;
        if (existing.length > 0 && files.length >= 1) {
            mergeMode = confirm('Des données existent déjà (' + existing.length + ' entrées).\n\nOK = Ajouter aux données existantes\nAnnuler = Remplacer les données');
        }

        const label = document.getElementById('lbl-' + type);
        if (label) label.textContent = 'Lecture de ' + files.length + ' fichier(s)...';

        let allData = mergeMode ? existing.slice() : [];
        let processed = 0;
        let errors = [];

        files.forEach(function(file, idx) {
            const reader = new FileReader();
            reader.onload = function(e) {
                try {
                    const wb = XLSX.read(e.target.result, { type: 'array' });
                    const sheet = wb.Sheets[wb.SheetNames[0]];
                    const rows = XLSX.utils.sheet_to_json(sheet, { defval: '' });
                    allData = allData.concat(rows);
                } catch(err) {
                    errors.push(file.name + ': ' + err.message);
                }
                processed++;
                if (processed === files.length) {
                    // All files read — save
                    const s2 = getSettings();
                    s2[type] = allData;
                    localStorage.setItem(STORAGE_KEY, JSON.stringify(s2));
                    refreshDataUI();
                    pushSettingsToAllModules();
                    if (errors.length) alert('Erreurs sur certains fichiers :\n' + errors.join('\n'));
                    if (label) label.textContent = files.length + ' fichier(s) chargé(s) ✓';
                }
            };
            reader.readAsArrayBuffer(file);
        });
    }

    function clearExcelData(type) {
        if (!confirm('Supprimer les données importées ?')) return;
        const s = getSettings();
        delete s[type];
        localStorage.setItem(STORAGE_KEY, JSON.stringify(s));
        refreshDataUI();
        pushSettingsToAllModules();
    }

    function refreshDataUI() {
        const s = getSettings();
        ['teachers', 'students'].forEach(type => {
            const data = s[type];
            const hasData = data && data.length > 0;
            const label = type === 'teachers' ? 'enseignant' : 'élève';
            document.getElementById('drop-' + type).classList.toggle('loaded', hasData);
            document.getElementById('lbl-' + type).textContent = hasData ? (data.length + ' entrées chargées ✓') : 'Cliquez ou glissez un ou plusieurs fichiers Excel';
            document.getElementById('actions-' + type).style.display = hasData ? 'flex' : 'none';
            document.getElementById('badge-' + type).textContent = hasData ? (data.length + ' ' + label + 's') : 'Non chargé';
            document.getElementById('badge-' + type).classList.toggle('has-data', hasData);
            document.getElementById('count-' + type).innerHTML = hasData ? ('<i class="fas fa-check-circle"></i> <strong>' + data.length + '</strong> ' + label + '(s) importé(s)') : '';
            if (!hasData) { document.getElementById('preview-' + type).style.display = 'none'; document.getElementById('preview-' + type).innerHTML = ''; }
        });
    }

    function togglePreview(type) {
        const el = document.getElementById('preview-' + type);
        if (el.style.display === 'none') {
            const s = getSettings();
            const data = s[type];
            if (!data || !data.length) return;
            const cols = Object.keys(data[0]);
            let html = '<table><thead><tr>' + cols.map(c => '<th>' + c + '</th>').join('') + '</tr></thead><tbody>';
            data.slice(0, 50).forEach(row => {
                html += '<tr>' + cols.map(c => '<td>' + (row[c] || '') + '</td>').join('') + '</tr>';
            });
            if (data.length > 50) html += '<tr><td colspan="' + cols.length + '" style="text-align:center;color:#999;font-style:italic">… et ' + (data.length - 50) + ' autres lignes</td></tr>';
            html += '</tbody></table>';
            el.innerHTML = html;
            el.style.display = 'block';
        } else {
            el.style.display = 'none';
        }
    }

    // ═══ DATA PANEL ═══
    function openDataPanel() {
        closeDataPanel();
        document.querySelectorAll('.nav-item').forEach(el => el.classList.remove('active'));
        const navItem = document.querySelector('.nav-item[data-module="data"]');
        if (navItem) navItem.classList.add('active');
        document.getElementById('welcome').classList.add('hidden');
        document.querySelectorAll('.module-frame').forEach(f => f.classList.remove('active'));
        document.getElementById('dataPanel').classList.add('active');
        currentModule = 'data';
        document.title = 'PILOTE — Données';
        refreshDataUI();
    }

    function closeDataPanel() { document.getElementById('dataPanel').classList.remove('active'); }

    // ═══ PUSH TO MODULES ═══
    function pushSettingsToModule(name) {
        const frame = document.getElementById('frame-' + name);
        if (!frame || !frame.contentWindow) return;
        const s = getSettings();
        frame.contentWindow.postMessage({
            type: 'pilote-settings',
            data: { school: s.school||'', name: s.name||'', role: s.role||'', city: s.city||'', zone: s.zone||'B', logoSrc: s.logoSrc||'', signSrc: s.signSrc||'', teachers: s.teachers||[], students: s.students||[], gcalEnabled: s.gcalEnabled||false, gcalEvents: s.gcalEvents||[] }
        }, '*');
    }

    function pushSettingsToAllModules() { loadedModules.forEach(name => pushSettingsToModule(name)); }

    window.addEventListener('message', function(e) {
        if (e.data && e.data.type === 'pilote-gcal-refresh') { gcalFetchEvents(); return; }
        if (e.data && e.data.type === 'pilote-gcal-add') { gcalAddEvent(e.data); return; }
        if (e.data && e.data.type === 'pilote-gcal-update') { gcalUpdateEvent(e.data); return; }
        if (e.data && e.data.type === 'pilote-gcal-delete') { gcalDeleteEvent(e.data); return; }
        if (e.data && e.data.type === 'pilote-outlook-add') { outlookAddEvent(e.data); return; }
        if (e.data && e.data.type === 'pilote-outlook-update') { outlookUpdateEvent(e.data); return; }
        if (e.data && e.data.type === 'pilote-outlook-delete') { outlookDeleteEvent(e.data); return; }
        if (e.data && e.data.type === 'pilote-outlook-refresh') { outlookFetchEvents(); return; }
        if (e.data && e.data.type === 'pilote-module-ready' && e.data.module) {
            setTimeout(() => { pushSettingsToModule(e.data.module); if(typeof pushOutlookToModules==='function') pushOutlookToModules(); }, 200);
        }
    });

    // ═══ MODULE VISIBILITY ═══
    function updateModuleVisibility() {
        moduleNames.forEach(m => {
            const visible = document.getElementById('tog-' + m).checked;
            const navItem = document.querySelector('.nav-item[data-module="' + m + '"]');
            if (navItem) navItem.classList.toggle('hidden-module', !visible);
            const card = document.querySelector('.module-card[data-m="' + m + '"]');
            if (card) card.classList.toggle('card-hidden', !visible);
            if (!visible && currentModule === m) goHome();
        });
    }

    // ═══ MODULE LOADING ═══
    function b64toBlob(b64) {
        const bin = atob(b64);
        const bytes = new Uint8Array(bin.length);
        for (let i = 0; i < bin.length; i++) bytes[i] = bin.charCodeAt(i);
        return URL.createObjectURL(new Blob([bytes], { type: 'text/html; charset=utf-8' }));
    }

    
    // ═══ KEYBOARD SHORTCUTS ═══
    document.addEventListener('keydown', function(e) {
        // Only trigger with Ctrl (not inside iframes)
        if (!e.ctrlKey || e.shiftKey || e.altKey || e.metaKey) return;
        var key = e.key.toLowerCase();
        var map = {
            'p': 'perdir',
            'e': 'exam',
            'o': 'oral',
            'a': 'aed',
            'b': 'bibase',
            'd': 'data'
        };
        if (map[key]) {
            e.preventDefault();
            e.stopPropagation();
            loadModule(map[key]);
        }
    });

    // Also listen for shortcuts from within iframes
    window.addEventListener('message', function(e) {
        if (e.data && e.data.type === 'pilote-shortcut') {
            var map = {'p':'perdir','e':'exam','o':'oral','a':'aed','d':'data'};
            if (map[e.data.key]) loadModule(map[e.data.key]);
        }
    });

    function loadModule(name) {
        if (name === 'data') { openDataPanel(); return; }
        const s = getSettings();
        if (s['show_' + name] === false) return;
        closeDataPanel();
        document.querySelectorAll('.nav-item').forEach(el => el.classList.remove('active'));
        const navItem = document.querySelector('.nav-item[data-module="' + name + '"]');
        if (navItem) navItem.classList.add('active');
        document.getElementById('welcome').classList.add('hidden');
        document.querySelectorAll('.module-frame').forEach(f => f.classList.remove('active'));
        const frame = document.getElementById('frame-' + name);
        if (!loadedModules.has(name)) {
            document.getElementById('loader').classList.add('show');
            if (!blobUrls[name]) blobUrls[name] = b64toBlob(MODULE_DATA[name]);
            frame.src = blobUrls[name];
            frame.onload = () => {
                loadedModules.add(name);
                document.getElementById('loader').classList.remove('show');
                frame.classList.add('active');
                setTimeout(() => pushSettingsToModule(name), 300);
            };
        } else { frame.classList.add('active'); }
        currentModule = name;
        document.title = 'PILOTE — ' + name.toUpperCase();
    }

    function goHome() {
        currentModule = null;
        closeDataPanel();
        document.querySelectorAll('.nav-item').forEach(el => el.classList.remove('active'));
        document.querySelectorAll('.module-frame').forEach(f => f.classList.remove('active'));
        document.getElementById('welcome').classList.remove('hidden');
        document.title = 'PILOTE — Suite de Direction';
    }

    function updateClock() {
        document.getElementById('clock').textContent = new Date().toLocaleDateString('fr-FR', { weekday:'short', day:'numeric', month:'short', hour:'2-digit', minute:'2-digit' });
    }
    updateClock(); setInterval(updateClock, 30000);

    function toggleFullscreen() {
        if (!document.fullscreenElement) document.documentElement.requestFullscreen();
        else document.exitFullscreen();
    }
    // Apply PERDIR submenus when frames load
    document.getElementById('frame-perdir').addEventListener('load', function(){ setTimeout(applyPerdirSubmenus, 500); });

    document.addEventListener('fullscreenchange', () => {
        document.getElementById('fs-icon').className = document.fullscreenElement ? 'fas fa-compress' : 'fas fa-expand';
    });

    document.addEventListener('keydown', (e) => {
        if (e.altKey) {
            const order = getNavOrder();
            switch(e.key) {
                case '1': case '2': case '3': case '4': case '5': case '6': {
                    const idx = parseInt(e.key) - 1;
                    if (order[idx]) { e.preventDefault(); loadModule(order[idx]); }
                    break;
                }
                case '0': e.preventDefault(); goHome(); break;
                case 'p': e.preventDefault(); openSettings(); break;
                case 'd': e.preventDefault(); openDataPanel(); break;
            }
        }
        if (e.key === 'Escape') {
            if (document.getElementById('settingsOverlay').classList.contains('open')) closeSettings();
            else if (currentModule) goHome();
        }
    });

    // ═══ INIT ═══
    loadSettingsUI();
    applyNavOrder();
    
    // ═══ ACCORDION TOGGLE ═══
    
    
    // ═══ PERDIR SUBMENUS MANAGEMENT ═══
    var PERDIR_MENUS = [
        {id:'menu2', icon:'fa-check-square', label:'To Do List', color:'#3498db'},
        {id:'menu3', icon:'fa-calendar-alt', label:'Calendrier', color:'#e67e22'},
        {id:'menu4', icon:'fa-clipboard-list', label:'Conseil de Direction', color:'#2c3e50'},
        {id:'menu5', icon:'fa-user-graduate', label:'Suivi Élève / Point CPE', color:'#27ae60'},
        {id:'menu6', icon:'fa-comments', label:'Entretiens', color:'#9b59b6'},
        {id:'menu7', icon:'fa-users', label:'Réunions', color:'#e74c3c'},
        {id:'menu8', icon:'fa-history', label:'Historique', color:'#95a5a6'},
        {id:'menu9', icon:'fa-chart-line', label:'Tableau de Bord', color:'#f39c12'},
        {id:'menu10', icon:'fa-calendar-check', label:'Activités pédagogiques', color:'#1abc9c'},
        {id:'menu11', icon:'fa-stream', label:'Échéances', color:'#8e44ad'},
        {id:'menu12', icon:'fa-book', label:'Procédures', color:'#16a085'}
    ];

    function renderPerdirSubmenus() {
        var ms = JSON.parse(localStorage.getItem('pilote_master_settings') || '{}');
        var cfg = ms.perdirMenus || PERDIR_MENUS.map(function(m){ return {id:m.id, visible:true}; });
        var cfgIds2 = cfg.map(function(c){return c.id;});
        PERDIR_MENUS.forEach(function(m){if(cfgIds2.indexOf(m.id)<0)cfg.push({id:m.id,visible:true});});
        var list = document.getElementById('perdir-submenu-list');
        if (!list) return;
        var html = '';
        cfg.forEach(function(item, i) {
            var def = PERDIR_MENUS.find(function(m){ return m.id === item.id; });
            if (!def) return;
            html += '<div class="order-item" draggable="true" data-idx="'+i+'" data-menuid="'+item.id+'" ondragstart="dragSubM(event,'+i+')" ondragover="overSubM(event,this)" ondrop="dropSubM(event,'+i+')">';
            html += '<i class="fas fa-grip-vertical order-grip"></i>';
            html += '<div class="order-icon" style="background:'+def.color+'"><i class="fas '+def.icon+'"></i></div>';
            html += '<span class="order-label">'+def.label+'</span>';
            html += '<label class="toggle-switch" onclick="event.stopPropagation()"><input type="checkbox" '+(item.visible!==false?'checked':'')+' onchange="toggleSubM(\''+item.id+'\',this.checked)"><span class="toggle-slider"></span></label>';
            html += '</div>';
        });
        list.innerHTML = html;
    }

    var _dragSubIdx = null;
    function dragSubM(e, idx) { _dragSubIdx = idx; e.dataTransfer.effectAllowed = 'move'; }
    function overSubM(e, el) { e.preventDefault(); }
    function dropSubM(e, toIdx) {
        e.preventDefault();
        if (_dragSubIdx === null || _dragSubIdx === toIdx) return;
        var ms = JSON.parse(localStorage.getItem('pilote_master_settings') || '{}');
        var cfg = ms.perdirMenus || PERDIR_MENUS.map(function(m){ return {id:m.id, visible:true}; });
        var item = cfg.splice(_dragSubIdx, 1)[0];
        cfg.splice(toIdx, 0, item);
        ms.perdirMenus = cfg;
        localStorage.setItem('pilote_master_settings', JSON.stringify(ms));
        renderPerdirSubmenus();
        applyPerdirSubmenus();
        _dragSubIdx = null;
    }

    function toggleSubM(menuId, visible) {
        var ms = JSON.parse(localStorage.getItem('pilote_master_settings') || '{}');
        var cfg = ms.perdirMenus || PERDIR_MENUS.map(function(m){ return {id:m.id, visible:true}; });
        var item = cfg.find(function(c){ return c.id === menuId; });
        if (item) item.visible = visible;
        ms.perdirMenus = cfg;
        localStorage.setItem('pilote_master_settings', JSON.stringify(ms));
        applyPerdirSubmenus();
    }

    function applyPerdirSubmenus() {
        var fr = document.getElementById('frame-perdir');
        try { if (!fr || !fr.contentWindow || !fr.contentWindow.document) return; } catch(e) { return; }
        var ms = JSON.parse(localStorage.getItem('pilote_master_settings') || '{}');
        var cfg = ms.perdirMenus || PERDIR_MENUS.map(function(m){ return {id:m.id, visible:true}; });
        // Merge new menus not yet in saved config
        var cfgIds = cfg.map(function(c){return c.id;});
        PERDIR_MENUS.forEach(function(m){if(cfgIds.indexOf(m.id)<0)cfg.push({id:m.id,visible:true});});
        var menuDiv; try { menuDiv = fr.contentWindow.document.querySelector('.menu'); } catch(e) { return; }
        if (!menuDiv) return;
        
        var visNum = 1;
        cfg.forEach(function(item, i) {
            var link = menuDiv.querySelector('[data-menu="'+item.id+'"]');
            if (link) {
                var isVisible = item.visible !== false;
                link.style.display = isVisible ? '' : 'none';
                link.style.order = i;
                if (isVisible) {
                    var numSpan = link.querySelector('.menu-num');
                    if (numSpan) numSpan.textContent = visNum + '.';
                    visNum++;
                }
            }
        });
        menuDiv.style.display = 'flex';
        menuDiv.style.flexDirection = 'column';
    }

    function triggerVacancesUpdate() {
        var fr = document.getElementById('frame-perdir');
        if (fr && fr.contentWindow && typeof fr.contentWindow.majVacances === 'function') {
            fr.contentWindow.majVacances();
        } else {
            alert('Module PERDIR non chargé. Ouvrez d\'abord le module PERDIR.');
        }
    }

    
    function updateFavicon(logoSrc){
        if(!logoSrc)return;
        var link=document.querySelector('link[rel="icon"]');
        if(!link){link=document.createElement('link');link.rel='icon';document.head.appendChild(link);}
        link.href=logoSrc;
    }

    function toggleAcc(header) {
        var section = header.parentElement;
        var wasOpen = section.classList.contains('open');
        // Fermer tous les autres
        document.querySelectorAll('.acc-section.open').forEach(function(s) { s.classList.remove('open'); });
        // Ouvrir celui-ci sauf s'il était déjà ouvert
        if (!wasOpen) section.classList.add('open');
    }

    // ═══ CLOUD SYNC (multi-fournisseur) ═══
    var _cloudProvider = 'jsonbin';

    function selectCloudProvider(prov) {
        _cloudProvider = prov;
        ['jsonbin','gist','webdav','gdrive','localfolder'].forEach(function(p) {
            var el = document.getElementById('cloud-cfg-' + p);
            if (el) el.style.display = p === prov ? 'block' : 'none';
            var btn = document.querySelector('.cloud-prov-btn[data-prov="'+p+'"]');
            if (btn) btn.classList.toggle('active', p === prov);
        });
        if (prov === 'localfolder' && typeof lfInitMode === 'function') lfInitMode();
    }

    function toggleCloudUI() {
        var on = document.getElementById('s-cloud-enabled').checked;
        document.getElementById('cloud-opts').style.display = on ? 'block' : 'none';
    }

    function getCloudConfig() {
        return {
            provider: _cloudProvider,
            // jsonbin
            key: (document.getElementById('s-cloud-key').value || '').trim(),
            bin: (document.getElementById('s-cloud-bin').value || '').trim(),
            // github gist
            gistToken: (document.getElementById('s-gist-token').value || '').trim(),
            gistId: (document.getElementById('s-gist-id').value || '').trim(),
            // gdrive
            gdriveClientId: (document.getElementById('s-gdrive-clientid').value || '').trim(),
            gdriveFileId: (document.getElementById('s-gdrive-fileid').value || '').trim(),
            // webdav
            wdUrl: (document.getElementById('s-webdav-url').value || '').trim(),
            wdUser: (document.getElementById('s-webdav-user').value || '').trim(),
            wdPass: (document.getElementById('s-webdav-pass').value || '').trim(),
            // common
            auto: document.getElementById('s-cloud-auto').checked,
            enabled: document.getElementById('s-cloud-enabled').checked
        };
    }

    function cloudSetStatus(msg, color) {
        var el = document.getElementById('cloud-status');
        if (el) { el.innerHTML = msg; el.style.color = color || '#888'; }
    }

    // ── jsonbin.io ──
    async function jsonbinPush(data, cfg) {
        var headers = { 'Content-Type': 'application/json', 'X-Master-Key': cfg.key };
        if (cfg.bin) {
            var r = await fetch('https://api.jsonbin.io/v3/b/' + cfg.bin, { method: 'PUT', headers: headers, body: JSON.stringify(data) });
            if (!r.ok) throw new Error('jsonbin PUT: ' + r.status);
            return cfg.bin;
        } else {
            headers['X-Bin-Name'] = 'PILOTE_Data';
            headers['X-Bin-Private'] = 'true';
            var r = await fetch('https://api.jsonbin.io/v3/b', { method: 'POST', headers: headers, body: JSON.stringify(data) });
            if (!r.ok) throw new Error('jsonbin POST: ' + r.status);
            var j = await r.json();
            document.getElementById('s-cloud-bin').value = j.metadata.id;
            return j.metadata.id;
        }
    }
    async function jsonbinPull(cfg) {
        var r = await fetch('https://api.jsonbin.io/v3/b/' + cfg.bin + '/latest', { headers: { 'X-Master-Key': cfg.key } });
        if (!r.ok) throw new Error('jsonbin GET: ' + r.status);
        var j = await r.json();
        return j.record;
    }

    // ── GitHub Gist ──
    async function gistPush(data, cfg) {
        var content = JSON.stringify(data);
        var headers = { 'Content-Type': 'application/json', 'Authorization': 'token ' + cfg.gistToken };
        if (cfg.gistId) {
            var r = await fetch('https://api.github.com/gists/' + cfg.gistId, { method: 'PATCH', headers: headers,
                body: JSON.stringify({ files: { 'pilote_data.json': { content: content } } })
            });
            if (!r.ok) throw new Error('Gist PATCH: ' + r.status);
            return cfg.gistId;
        } else {
            var r = await fetch('https://api.github.com/gists', { method: 'POST', headers: headers,
                body: JSON.stringify({ description: 'PILOTE Suite Data', public: false, files: { 'pilote_data.json': { content: content } } })
            });
            if (!r.ok) throw new Error('Gist POST: ' + r.status);
            var j = await r.json();
            document.getElementById('s-gist-id').value = j.id;
            return j.id;
        }
    }
    async function gistPull(cfg) {
        var r = await fetch('https://api.github.com/gists/' + cfg.gistId, { headers: { 'Authorization': 'token ' + cfg.gistToken } });
        if (!r.ok) throw new Error('Gist GET: ' + r.status);
        var j = await r.json();
        return JSON.parse(j.files['pilote_data.json'].content);
    }

    // ── WebDAV ──
    async function webdavPush(data, cfg) {
        var url = cfg.wdUrl.replace(/\/$/, '') + '/pilote_data.json';
        var headers = { 'Content-Type': 'application/json', 'Authorization': 'Basic ' + btoa(cfg.wdUser + ':' + cfg.wdPass) };
        var r = await fetch(url, { method: 'PUT', headers: headers, body: JSON.stringify(data) });
        if (!r.ok && r.status !== 201 && r.status !== 204) throw new Error('WebDAV PUT: ' + r.status);
        return url;
    }
    async function webdavPull(cfg) {
        var url = cfg.wdUrl.replace(/\/$/, '') + '/pilote_data.json';
        var headers = { 'Authorization': 'Basic ' + btoa(cfg.wdUser + ':' + cfg.wdPass) };
        var r = await fetch(url, { method: 'GET', headers: headers });
        if (!r.ok) throw new Error('WebDAV GET: ' + r.status);
        return await r.json();
    }

    
    // ── Google Drive ──
    var _gdriveToken = null;
    function gdriveAuth() {
        var clientId = (document.getElementById('s-gdrive-clientid').value || '').trim();
        if (!clientId) return alert('Saisissez le Client ID OAuth2');
        var scope = 'https://www.googleapis.com/auth/drive.file';
        var redir = location.origin + location.pathname;
        var url = 'https://accounts.google.com/o/oauth2/v2/auth?client_id='+encodeURIComponent(clientId)+'&response_type=token&redirect_uri='+encodeURIComponent(redir)+'&scope='+encodeURIComponent(scope);
        var w = window.open(url, '_blank', 'width=500,height=600');
        // Listen for redirect
        var check = setInterval(function() {
            try {
                if (w.closed) { clearInterval(check); return; }
                if (w.location.hash) {
                    var hash = w.location.hash.substring(1);
                    var params = new URLSearchParams(hash);
                    var tk = params.get('access_token');
                    if (tk) {
                        _gdriveToken = tk;
                        w.close();
                        clearInterval(check);
                        document.getElementById('gdrive-auth-status').innerHTML = '<span style="color:#27ae60"><i class="fas fa-check-circle"></i> Connecté</span>';
                    }
                }
            } catch(e) {}
        }, 500);
    }

    async function gdrivePush(data, cfg) {
        if (!_gdriveToken) throw new Error('Connectez-vous à Google Drive d\'abord');
        var content = JSON.stringify(data);
        var headers = { 'Authorization': 'Bearer ' + _gdriveToken };
        if (cfg.gdriveFileId) {
            var r = await fetch('https://www.googleapis.com/upload/drive/v3/files/' + cfg.gdriveFileId + '?uploadType=media', {
                method: 'PATCH', headers: Object.assign(headers, {'Content-Type':'application/json'}), body: content
            });
            if (!r.ok) throw new Error('GDrive PATCH: ' + r.status);
            return cfg.gdriveFileId;
        } else {
            var meta = { name: 'pilote_data.json', mimeType: 'application/json' };
            var form = new FormData();
            form.append('metadata', new Blob([JSON.stringify(meta)], {type:'application/json'}));
            form.append('file', new Blob([content], {type:'application/json'}));
            var r = await fetch('https://www.googleapis.com/upload/drive/v3/files?uploadType=multipart', {
                method: 'POST', headers: headers, body: form
            });
            if (!r.ok) throw new Error('GDrive POST: ' + r.status);
            var j = await r.json();
            document.getElementById('s-gdrive-fileid').value = j.id;
            return j.id;
        }
    }

    async function gdrivePull(cfg) {
        if (!_gdriveToken) throw new Error('Connectez-vous à Google Drive d\'abord');
        var r = await fetch('https://www.googleapis.com/drive/v3/files/' + cfg.gdriveFileId + '?alt=media', {
            headers: { 'Authorization': 'Bearer ' + _gdriveToken }
        });
        if (!r.ok) throw new Error('GDrive GET: ' + r.status);
        return await r.json();
    }

    // ── Dispatcher ──
    async // ── Dossier Local (auto-sync via File System Access + fallback manuel) ──
    var _lfDirHandle = null;
    var _lfAutoSaveTimer = null;
    var _lfDirty = false;
    var _lfSaving = false;
    var _lfHasAPI = (typeof window.showDirectoryPicker === 'function');

    // ── Détection du mode et initialisation ──
    function lfInitMode() {
        var autoDiv = document.getElementById('lf-mode-auto');
        var manDiv = document.getElementById('lf-mode-manual');
        // Re-check API availability (may not be set at parse time)
        _lfHasAPI = !!(window.showDirectoryPicker);
        console.log('[PILOTE] lfInitMode: File System Access API =', _lfHasAPI, 'protocol =', location.protocol);
        if (_lfHasAPI) {
            if (autoDiv) autoDiv.style.display = 'block';
            if (manDiv) manDiv.style.display = 'none';
            lfRestoreHandle();
        } else {
            if (autoDiv) autoDiv.style.display = 'none';
            if (manDiv) manDiv.style.display = 'block';
        }
    }

    // ── File System Access API (auto mode) ──
    async function lfPickFolder() {
        try {
            _lfDirHandle = await window.showDirectoryPicker({ mode: 'readwrite' });
            await lfSaveHandleToIDB(_lfDirHandle);
            lfSetAutoStatus('<i class="fas fa-check-circle"></i> ' + _lfDirHandle.name, '#27ae60');
            document.getElementById('lf-auto-actions').style.display = 'block';
            // Check if file already exists in folder (restore if newer)
            await lfAutoLoadOnStartup();
            lfStartAutoSync();
            // Initial save
            await lfWriteToFolder();
        } catch(e) {
            if (e.name !== 'AbortError') lfSetAutoStatus('<i class="fas fa-times"></i> ' + e.message, '#e74c3c');
        }
    }

    async function lfSaveHandleToIDB(handle) {
        return new Promise(function(res, rej) {
            var req = indexedDB.open('pilote_lf', 1);
            req.onupgradeneeded = function(e) { e.target.result.createObjectStore('h'); };
            req.onsuccess = function(e) {
                var tx = e.target.result.transaction('h', 'readwrite');
                tx.objectStore('h').put(handle, 'dir');
                tx.oncomplete = res; tx.onerror = function() { rej(tx.error); };
            };
            req.onerror = function() { rej(req.error); };
        });
    }

    async function lfLoadHandleFromIDB() {
        return new Promise(function(res) {
            var req = indexedDB.open('pilote_lf', 1);
            req.onupgradeneeded = function(e) { e.target.result.createObjectStore('h'); };
            req.onsuccess = function(e) {
                var tx = e.target.result.transaction('h', 'readonly');
                var g = tx.objectStore('h').get('dir');
                g.onsuccess = function() { res(g.result || null); };
                g.onerror = function() { res(null); };
            };
            req.onerror = function() { res(null); };
        });
    }

    async function lfRestoreHandle() {
        try {
            var h = await lfLoadHandleFromIDB();
            if (!h) return;
            var perm = await h.queryPermission({ mode: 'readwrite' });
            if (perm === 'granted') {
                _lfDirHandle = h;
                lfSetAutoStatus('<i class="fas fa-spinner fa-spin"></i> Chargement des données...', '#3498db');
                document.getElementById('lf-auto-actions').style.display = 'block';
                lfShowSyncIndicator();
                // AUTO-LOAD: restore data from file on startup
                await lfAutoLoadOnStartup();
                lfSetAutoStatus('<i class="fas fa-link"></i> ' + h.name + ' (synchronisé)', '#27ae60');
                lfStartAutoSync();
            } else {
                lfSetAutoStatus('<i class="fas fa-lock"></i> ' + h.name + ' — cliquez pour réautoriser', '#e67e22');
                var btn = document.getElementById('lf-pick-btn');
                if (btn) btn.innerHTML = '<i class="fas fa-lock-open"></i> Réautoriser ' + h.name;
            }
        } catch(e) { console.warn('lfRestoreHandle:', e); }
    }

    async function lfAutoLoadOnStartup() {
        try {
            var data = await lfReadFromFolder();
            if (!data) { console.log('[PILOTE] No pilote_data.json found, starting fresh'); return; }
            var fileMeta = data._cloudMeta || {};
            var fileTime = fileMeta.lastPush || '2000-01-01';
            // Compare with local settings timestamp
            var localSettings = JSON.parse(localStorage.getItem('pilote_suite_settings') || '{}');
            var localTime = localSettings._lastSync || '2000-01-01';
            console.log('[PILOTE] File time:', fileTime, '| Local time:', localTime);
            if (fileTime > localTime) {
                console.log('[PILOTE] File is newer → restoring all data');
                distributeToModules(data);
                lfUpdateSyncIndicator('Données restaurées', '#27ae60');
            } else {
                console.log('[PILOTE] Local is current, no restore needed');
            }
        } catch(e) { console.warn('lfAutoLoadOnStartup:', e); }
    }

    async function lfEnsurePermission() {
        if (!_lfDirHandle) return false;
        var perm = await _lfDirHandle.queryPermission({ mode: 'readwrite' });
        if (perm === 'granted') return true;
        perm = await _lfDirHandle.requestPermission({ mode: 'readwrite' });
        return perm === 'granted';
    }

    async function lfWriteToFolder() {
        if (!_lfDirHandle || _lfSaving) return;
        _lfSaving = true;
        try {
            if (!await lfEnsurePermission()) throw new Error('Permission refusée');
            var allData = collectAllModulesData();
            var now = new Date().toISOString();
            allData._cloudMeta = { lastPush: now, provider: 'localfolder' };
            // Update local timestamp so we know we're in sync
            try {
                var ls = JSON.parse(localStorage.getItem('pilote_suite_settings') || '{}');
                ls._lastSync = now;
                localStorage.setItem('pilote_suite_settings', JSON.stringify(ls));
            } catch(e) {}
            var json = JSON.stringify(allData, null, 2);
            var fh = await _lfDirHandle.getFileHandle('pilote_data.json', { create: true });
            var w = await fh.createWritable();
            await w.write(json);
            await w.close();
            _lfDirty = false;
            lfUpdateSyncIndicator('Synchronisé ' + new Date().toLocaleTimeString('fr-FR', {hour:'2-digit',minute:'2-digit'}), '#27ae60');
        } catch(err) {
            console.error('lfWriteToFolder:', err);
            lfUpdateSyncIndicator('Erreur sync', '#e74c3c');
        }
        _lfSaving = false;
    }

    async function lfReadFromFolder() {
        if (!_lfDirHandle) return null;
        try {
            if (!await lfEnsurePermission()) return null;
            var fh = await _lfDirHandle.getFileHandle('pilote_data.json');
            var file = await fh.getFile();
            var text = await file.text();
            return JSON.parse(text);
        } catch(e) {
            if (e.name === 'NotFoundError') return null;
            console.error('lfReadFromFolder:', e);
            return null;
        }
    }

    function lfStartAutoSync() {
        if (_lfAutoSaveTimer) clearInterval(_lfAutoSaveTimer);
        // Take initial snapshot
        _lfLastSnapshot = lfComputeSnapshot();
        // Poll every 3 seconds for changes + save if dirty
        _lfAutoSaveTimer = setInterval(function() {
            lfPollForChanges();
            if (_lfDirty && _lfDirHandle && !_lfSaving) {
                lfWriteToFolder();
            }
        }, 3000);
        lfShowSyncIndicator();
    }

    function lfMarkDirty() {
        _lfDirty = true;
        lfUpdateSyncIndicator('Modifications non sauvegardées…', '#f39c12');
    }

    async function lfForceSave() {
        if (_lfDirHandle) {
            lfUpdateSyncIndicator('<i class="fas fa-spinner fa-spin"></i> Sauvegarde...', '#3498db');
            lfSetAutoStatus('<i class="fas fa-spinner fa-spin"></i> Sauvegarde en cours...', '#3498db');
            await lfWriteToFolder();
            lfSetAutoStatus('<i class="fas fa-check-circle"></i> Sauvegardé ' + new Date().toLocaleTimeString('fr-FR'), '#27ae60');
        } else {
            localFolderExport();
        }
    }

    async function lfForceLoad() {
        if (!_lfDirHandle) { document.getElementById('localfolder-import').click(); return; }
        lfSetAutoStatus('<i class="fas fa-spinner fa-spin"></i> Chargement...', '#3498db');
        var data = await lfReadFromFolder();
        if (data) {
            distributeToModules(data);
            var meta = data._cloudMeta || {};
            lfSetAutoStatus('<i class="fas fa-check-circle"></i> Restauré (' + (meta.lastPush ? new Date(meta.lastPush).toLocaleString('fr-FR') : '?') + ')', '#27ae60');
            alert('✅ Données importées ! Rechargez la page pour appliquer.');
        } else {
            lfSetAutoStatus('<i class="fas fa-exclamation-triangle"></i> Aucun fichier trouvé', '#e67e22');
        }
    }

    // ── UI helpers ──
    function lfSetAutoStatus(html, color) {
        var el = document.getElementById('lf-auto-status');
        if (el) el.innerHTML = '<span style="color:' + (color||'#888') + ';">' + html + '</span>';
    }

    function lfShowSyncIndicator() {
        var el = document.getElementById('lf-sync-indicator');
        if (el) el.style.display = 'block';
    }

    function lfUpdateSyncIndicator(text, color) {
        var dot = document.querySelector('#lf-sync-indicator i');
        var span = document.getElementById('lf-sync-text');
        if (dot) dot.style.color = color || '#888';
        if (span) span.textContent = text;
        lfShowSyncIndicator();
    }

    // ── Manual mode (fallback file://) ──
    function localFolderExport() {
        try {
            localFolderSetStatus('<i class="fas fa-spinner fa-spin"></i> Préparation...', '#f39c12');
            var allData = collectAllModulesData();
            allData._cloudMeta = { lastPush: new Date().toISOString(), provider: 'localfolder' };
            var json = JSON.stringify(allData, null, 2);
            var blob = new Blob([json], { type: 'application/json' });
            var url = URL.createObjectURL(blob);
            var a = document.createElement('a');
            a.href = url; a.download = 'pilote_data.json';
            document.body.appendChild(a); a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            localFolderSetStatus('✅ Fichier téléchargé', '#27ae60');
        } catch(err) { localFolderSetStatus('❌ ' + err.message, '#e74c3c'); }
    }

    function localFolderImport(input) {
        var file = input.files[0]; if (!file) return;
        localFolderSetStatus('<i class="fas fa-spinner fa-spin"></i> Lecture...', '#3498db');
        var reader = new FileReader();
        reader.onload = function(e) {
            try {
                var data = JSON.parse(e.target.result);
                if (!data || typeof data !== 'object') throw new Error('Format invalide');
                distributeToModules(data);
                var meta = data._cloudMeta || {};
                localFolderSetStatus('✅ Importé (' + (meta.lastPush ? new Date(meta.lastPush).toLocaleString('fr-FR') : '?') + ')', '#27ae60');
                alert('✅ Données importées ! Rechargez la page pour appliquer.');
            } catch(err) { localFolderSetStatus('❌ ' + err.message, '#e74c3c'); }
        };
        reader.readAsText(file);
        input.value = '';
    }

    function localFolderSetStatus(html, color) {
        var el = document.getElementById('localfolder-status');
        if (el) el.innerHTML = '<span style="color:' + (color||'#888') + ';">' + html + '</span>';
    }

    // ── Sync Engine: poll ALL modules data for changes ──
    var _lfLastSnapshot = '';

    function _lfHash(str) {
        // DJB2 hash — fast, reliable for change detection
        var hash = 5381;
        for (var i = 0; i < str.length; i++) {
            hash = ((hash << 5) + hash) + str.charCodeAt(i);
            hash = hash & hash; // Convert to 32-bit integer
        }
        return hash.toString(36);
    }

    function lfComputeSnapshot() {
        // Build a fingerprint of ALL data using content hashes
        var parts = [];
        // 1. Wrapper localStorage (pilote_suite_settings, pilote_master_settings, bibase_*)
        try {
            for (var i = 0; i < localStorage.length; i++) {
                var k = localStorage.key(i);
                var v = localStorage.getItem(k) || '';
                parts.push(k + '=' + v.length + ':' + _lfHash(v));
            }
        } catch(e) {}
        // 2. All iframe modules localStorage
        var frames = ['frame-perdir', 'frame-exam', 'frame-oral', 'frame-aed', 'frame-bibase'];
        frames.forEach(function(fid) {
            var fr = document.getElementById(fid);
            if (fr && fr.contentWindow) {
                try {
                    var ls = fr.contentWindow.localStorage;
                    for (var j = 0; j < ls.length; j++) {
                        var k2 = ls.key(j);
                        var v2 = ls.getItem(k2) || '';
                        parts.push(fid + ':' + k2 + '=' + v2.length + ':' + _lfHash(v2));
                    }
                } catch(e2) {}
            }
        });
        return parts.sort().join('|');
    }

    function lfPollForChanges() {
        if (!_lfDirHandle || _lfSaving) return;
        var snap = lfComputeSnapshot();
        if (snap !== _lfLastSnapshot) {
            _lfLastSnapshot = snap;
            _lfDirty = true;
            lfUpdateSyncIndicator('Modifications détectées…', '#f39c12');
        }
    }

    // ── Init on page load ──
    // Fallback if DOMContentLoaded already fired
    if (document.readyState !== 'loading') { setTimeout(function() { lfInitMode(); }, 200); }
    window.addEventListener('DOMContentLoaded', function() {
        setTimeout(function() {
            lfInitMode();
        }, 500);
    });

    // ── Save before leaving ──
    window.addEventListener('beforeunload', function() {
        if (_lfDirHandle && _lfDirty) {
            // Synchronous attempt — may not complete but worth trying
            try { lfWriteToFolder(); } catch(e) {}
        }
    });

    // ── Save when tab becomes hidden (user switches tab/app) ──
    document.addEventListener('visibilitychange', function() {
        if (document.hidden && _lfDirHandle && _lfDirty) {
            lfWriteToFolder();
        }
    });

    async function cloudPush() {
        var cfg = getCloudConfig();
        if (cfg.provider === 'jsonbin' && !cfg.key) return alert('Saisissez votre clé API jsonbin.io');
        if (cfg.provider === 'gist' && !cfg.gistToken) return alert('Saisissez votre GitHub Personal Access Token');
        if (cfg.provider === 'webdav' && !cfg.wdUrl) return alert('Saisissez l\'URL de votre serveur WebDAV');
        if (cfg.provider === 'gdrive' && !_gdriveToken) return alert('Connectez-vous à Google Drive');
        if (cfg.provider === 'localfolder') { lfForceSave(); return; }

        cloudSetStatus('<i class="fas fa-spinner fa-spin"></i> Envoi en cours...', '#f39c12');
        try {
            var allData = collectAllModulesData();
            allData._cloudMeta = { lastPush: new Date().toISOString(), provider: cfg.provider };

            if (cfg.provider === 'jsonbin') await jsonbinPush(allData, cfg);
            else if (cfg.provider === 'gist') await gistPush(allData, cfg);
            else if (cfg.provider === 'webdav') await webdavPush(allData, cfg);
            else if (cfg.provider === 'gdrive') await gdrivePush(allData, cfg);
            

            cloudSetStatus('✅ Envoyé le ' + new Date().toLocaleString('fr-FR') + ' via ' + cfg.provider, '#27ae60');
        } catch (err) {
            cloudSetStatus('❌ ' + err.message, '#e74c3c');
        }
    }

    async function cloudPull() {
        var cfg = getCloudConfig();
        if (cfg.provider === 'jsonbin' && (!cfg.key || !cfg.bin)) return alert('Clé API et ID du Bin requis');
        if (cfg.provider === 'gist' && (!cfg.gistToken || !cfg.gistId)) return alert('Token et Gist ID requis');
        if (cfg.provider === 'webdav' && !cfg.wdUrl) return alert('URL WebDAV requise');
        if (cfg.provider === 'gdrive' && (!_gdriveToken || !cfg.gdriveFileId)) return alert('Connectez Google Drive et renseignez le File ID');
        if (cfg.provider === 'localfolder') { lfForceLoad(); return; }

        cloudSetStatus('<i class="fas fa-spinner fa-spin"></i> Récupération...', '#3498db');
        try {
            var record;
            if (cfg.provider === 'jsonbin') record = await jsonbinPull(cfg);
            else if (cfg.provider === 'gist') record = await gistPull(cfg);
            else if (cfg.provider === 'webdav') record = await webdavPull(cfg);
            else if (cfg.provider === 'gdrive') record = await gdrivePull(cfg);
            

            if (!record) throw new Error('Données vides');
            distributeToModules(record);

            var meta = record._cloudMeta || {};
            cloudSetStatus('✅ Récupéré (' + (meta.lastPush ? new Date(meta.lastPush).toLocaleString('fr-FR') : '?') + ')', '#27ae60');
            alert('✅ Données importées ! Rechargez la page pour appliquer.');
        } catch (err) {
            cloudSetStatus('❌ ' + err.message, '#e74c3c');
        }
    }

    function collectAllModulesData() {
        var allData = {};
        var frames = ['frame-perdir', 'frame-exam', 'frame-oral', 'frame-aed', 'frame-bibase'];
        frames.forEach(function(fid) {
            var fr = document.getElementById(fid);
            if (fr && fr.contentWindow) {
                try {
                    var keys = Object.keys(fr.contentWindow.localStorage);
                    keys.forEach(function(k) {
                        allData['__' + fid + '__' + k] = fr.contentWindow.localStorage.getItem(k);
                    });
                } catch(e) {}
            }
        });
        // Wrapper localStorage (settings, bibase_establishment, etc.)
        try {
            for (var wi = 0; wi < localStorage.length; wi++) {
                var wk = localStorage.key(wi);
                allData['__wrapper__' + wk] = localStorage.getItem(wk);
            }
        } catch(e) {}
        return allData;
    }

    function distributeToModules(record) {
        var frames = ['frame-perdir', 'frame-exam', 'frame-oral', 'frame-aed', 'frame-bibase'];
        frames.forEach(function(fid) {
            var fr = document.getElementById(fid);
            if (fr && fr.contentWindow) {
                try {
                    var prefix = '__' + fid + '__';
                    Object.keys(record).forEach(function(k) {
                        if (k.indexOf(prefix) === 0) {
                            try { fr.contentWindow.localStorage.setItem(k.substring(prefix.length), record[k]); } catch(e2) {}
                        }
                    });
                } catch(e) {}
            }
        });
        // Restore wrapper localStorage
        Object.keys(record).forEach(function(k) {
            if (k.indexOf('__wrapper__') === 0) {
                try { localStorage.setItem(k.substring(11), record[k]); } catch(e3) {}
            }
        });
    }

    // Auto-sync hook
    function cloudAutoSync() {
        var el = document.getElementById('s-cloud-auto');
        var ek = document.getElementById('s-cloud-enabled');
        if (el && el.checked && ek && ek.checked) { setTimeout(cloudPush, 500); }
    }

    
    

    
    function loadBibSettings() {
        var s = JSON.parse(localStorage.getItem('bibase_establishment') || '{}');
        var el;
        el = document.getElementById('bib-layout'); if (el && s.layout) el.value = s.layout;
        el = document.getElementById('bib-font'); if (el && s.font) el.value = s.font;
        el = document.getElementById('bib-signatory'); if (el && s.defaultSignatory) {
            var found = false;
            for (var i = 0; i < el.options.length; i++) { if (el.options[i].value === s.defaultSignatory) { found = true; break; } }
            if (!found) { var o = document.createElement('option'); o.value = s.defaultSignatory; o.text = s.defaultSignatory; el.appendChild(o); }
            el.value = s.defaultSignatory;
        }
        el = document.getElementById('bib-doc-title'); if (el && s.docTitle) el.value = s.docTitle;
        el = document.getElementById('bib-doc-footer'); if (el && s.docFooter) el.value = s.docFooter;
    }

    </script>
</body>
</html>
