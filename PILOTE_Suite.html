<!DOCTYPE html>
<html lang="fr"><head>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PILOTE — PERDIR</title>
    <!-- MAJ_UI_2026_02_26: harmonisation accordéons paramètres + correction décalage "Bulletin d\'information" -->
    <link rel="stylesheet" href="CADIR_fichiers/all.min.css">
    <!-- Aptos: police native Windows 11/Office. Pas de Google Fonts nécessaire -->
    <script src="CADIR_fichiers/xlsx.full.min.js"></script>
    <style>
        :root {
            --nav-h: 52px;
            --c-bg: #f0f1f4;
            --c-nav: #1b2433;
            --c-nav-hover: #273347;
            --c-accent: #d4483b;
            --c-accent-glow: rgba(212,72,59,0.35);
            --c-text: #e8eaed;
            --c-text-dim: #8b92a0;
            --c-card: #ffffff;
            --c-border: #dfe2e8;
            --c-success: #2ecc71;
            --c-info: #3498db;
            --c-warning: #f39c12;
            --c-purple: #9b59b6;
            --radius: 10px;
            --shadow: 0 4px 24px rgba(0,0,0,0.08);
            --font: 'Aptos', 'Calibri', 'Trebuchet MS', Arial, sans-serif;
            --font-display: 'Aptos', 'Calibri', 'Trebuchet MS', Arial, sans-serif;
        }
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body { font-family: var(--font); background: var(--c-bg); height: 100vh; display: flex; flex-direction: column; overflow: hidden; color: #2c3040; }

        /* ═══ TOP NAV ═══ */
        .topnav { height: var(--nav-h); background: var(--c-nav); display: flex; align-items: center; padding: 0 16px; box-shadow: 0 2px 12px rgba(0,0,0,0.25); z-index: 1000; flex-shrink: 0; position: relative; }
        .topnav::after { content:''; position:absolute; bottom:0; left:0; right:0; height:2px; background:linear-gradient(90deg,var(--c-accent),#f39c12,var(--c-accent)); opacity:0.7; }
        .brand { display:flex; align-items:center; gap:8px; margin-right:20px; cursor:pointer; text-decoration:none; }
        .brand-icon { width:32px; height:32px; background:var(--c-accent); border-radius:7px; display:flex; align-items:center; justify-content:center; font-size:15px; color:white; font-weight:700; box-shadow:0 2px 8px var(--c-accent-glow); overflow:hidden; }
        .brand-icon img { width:100%; height:100%; object-fit:contain; }
        .brand-text { font-family:var(--font-display); font-size:1.05rem; font-weight:700; color:#fff; }
        .brand-text span { color:var(--c-text-dim); font-family:var(--font); font-weight:400; font-size:0.6rem; display:block; margin-top:-2px; letter-spacing:1.5px; text-transform:uppercase; }
        .nav-sep { width:3px; height:28px; background:#ffffff; margin:0 8px; border-radius:2px; }
        .nav-items { display:flex; align-items:center; gap:3px; height:100%; }
        .nav-item { display:flex; align-items:center; gap:7px; padding:7px 14px; border-radius:7px; cursor:pointer; transition:all 0.2s; color:var(--c-text-dim); font-size:0.8rem; font-weight:500; position:relative; height:34px; user-select:none; white-space:nowrap; }
        .nav-item:hover { background:var(--c-nav-hover); color:var(--c-text); }

        .nav-shortcut { font-size:.5rem; background:rgba(255,255,255,.15); color:rgba(255,255,255,.5); padding:1px 4px; border-radius:3px; margin-left:4px; font-family:monospace; vertical-align:middle; display:none; }
        .nav-item:hover .nav-shortcut { display:inline; }
        .nav-item.active { background:rgba(212,72,59,0.12); color:#fff; }
        .nav-item.active::after { content:''; position:absolute; bottom:-9px; left:50%; transform:translateX(-50%); width:20px; height:3px; background:var(--c-accent); border-radius:3px 3px 0 0; }
        .nav-item.hidden-module { display: none !important; }
        .nav-item i { font-size:0.9rem; width:16px; text-align:center; }
        .nav-badge { font-size:0.55rem; padding:1px 5px; border-radius:10px; font-weight:600; }
        .nav-item[data-module="perdir"] .nav-badge { background:var(--c-info); color:#fff; }
        .nav-item[data-module="exam"] .nav-badge { background:var(--c-accent); color:#fff; }
        .nav-item[data-module="oral"] .nav-badge { background:var(--c-warning); color:#fff; }
        .nav-item[data-module="dhg"] .nav-badge { background:var(--c-purple); color:#fff; }
        .nav-item[data-module="aed"] .nav-badge { background:var(--c-success); color:#fff; }
            [data-module="bibase"] .nav-badge { background:#e67e22; color:#fff; }
        .nav-item[data-module="data"] .nav-badge { background:var(--c-purple); color:#fff; }
        .nav-right { margin-left:auto; display:flex; align-items:center; gap:8px; }
        .nav-clock { color:var(--c-text-dim); font-size:0.75rem; font-variant-numeric:tabular-nums; }
        .nav-btn { width:32px; height:32px; border-radius:7px; border:none; background:var(--c-nav-hover); color:var(--c-text-dim); cursor:pointer; display:flex; align-items:center; justify-content:center; transition:all 0.2s; font-size:0.8rem; }
        .nav-btn:hover { background:rgba(255,255,255,0.12); color:white; }

        /* ═══ SETTINGS OVERLAY ═══ */
        .settings-overlay { position:fixed; inset:0; background:rgba(0,0,0,0.4); z-index:2000; display:none; align-items:center; justify-content:center; backdrop-filter:blur(4px); }
        .settings-overlay.open { display:flex; }
        .settings-panel { background:white; border-radius:14px; width:720px; max-width:95vw; max-height:92vh; overflow-y:auto; box-shadow:0 20px 60px rgba(0,0,0,0.25); animation:panelIn 0.25s ease; }
        @keyframes panelIn { from{opacity:0;transform:translateY(20px) scale(0.97)} to{opacity:1;transform:none} }
        .settings-header { padding:18px 24px; border-bottom:1px solid #eee; display:flex; justify-content:space-between; align-items:center; }
        .settings-header h2 { font-size:1.1rem; font-weight:600; color:var(--c-nav); display:flex; align-items:center; gap:10px; }
        .settings-header h2 i { color:var(--c-accent); }
        .settings-close { background:none; border:none; font-size:1.3rem; cursor:pointer; color:#999; padding:4px; }
        .settings-close:hover { color:#333; }
        .settings-body { padding:24px; }
        .settings-section { margin-bottom:24px; }
        .settings-section h3 { font-size:0.8rem; font-weight:600; color:#666; text-transform:uppercase; letter-spacing:1px; margin-bottom:12px; display:flex; align-items:center; gap:8px; }
        .settings-section h3 i { color:var(--c-info); }
        .settings-grid { display:grid; grid-template-columns:1fr 1fr; gap:14px; }
        .form-group { display:flex; flex-direction:column; gap:4px; }
        .form-group label { font-size:0.78rem; font-weight:500; color:#555; }
        .form-group input[type="text"] { padding:9px 12px; border:1px solid #ddd; border-radius:8px; font-size:0.85rem; font-family:var(--font); transition:border 0.2s; }
        .form-group input[type="text"]:focus { outline:none; border-color:var(--c-info); box-shadow:0 0 0 3px rgba(52,152,219,0.1); }
        .form-group input[type="file"] { font-size:0.75rem; }
        .img-preview { width:100%; height:72px; border:2px dashed #ddd; border-radius:8px; display:flex; align-items:center; justify-content:center; background:#fafafa; margin-top:4px; overflow:hidden; position:relative; }
        .img-preview img { max-height:64px; max-width:100%; object-fit:contain; }
        .img-preview .placeholder { color:#bbb; font-size:0.7rem; }
        .img-preview .btn-clear { position:absolute; top:3px; right:3px; width:18px; height:18px; background:rgba(0,0,0,0.5); color:white; border:none; border-radius:50%; cursor:pointer; font-size:0.55rem; display:none; align-items:center; justify-content:center; }
        .img-preview:hover .btn-clear { display:flex; }


        /* ═══ ACCORDION SETTINGS ═══ */
        .acc-section{border:1px solid #e8eaed;border-radius:10px;margin-bottom:10px;}
        .acc-header{display:flex;align-items:center;gap:10px;padding:14px 18px;cursor:pointer;background:#fafbfc;border-radius:10px;user-select:none;}
        .acc-header:hover{background:#eaf4fe;}
        .acc-header h3{font-size:0.82rem;font-weight:600;color:#444;text-transform:uppercase;letter-spacing:0.8px;margin:0;display:flex;align-items:center;gap:8px;flex:1;}
        .acc-header h3 i{color:var(--c-info);font-size:.85rem;}
        .acc-chevron{font-size:.7rem;color:#aaa;transition:transform 0.3s;}
        .acc-section.open .acc-header{background:#eaf4fe;border-bottom:1px solid #e0e0e0;border-radius:10px 10px 0 0;}
        .acc-section.open .acc-chevron{transform:rotate(90deg);color:var(--c-info);}
        .acc-body{display:none;padding:16px 18px;}
        .acc-section.open .acc-body{display:block;}


        .cloud-prov-btn{padding:10px 14px;border:2px solid #e0e0e0;border-radius:10px;background:#fff;cursor:pointer;text-align:center;font-family:var(--font);font-size:.78rem;font-weight:600;color:#555;transition:all .2s;flex:1;min-width:110px;}
        .cloud-prov-btn:hover{border-color:#3498db;background:#f0f7ff;}
        .cloud-prov-btn.active{border-color:#3498db;background:#eaf4fe;color:#2c3e50;box-shadow:0 2px 8px rgba(52,152,219,.15);}
        .cloud-prov-btn i{font-size:1.2rem;display:block;margin-bottom:4px;}
        .cloud-prov-btn small{font-weight:400;color:#888;font-size:.62rem;}

        /* Module toggles */
        .module-toggle { display:flex; align-items:center; gap:12px; padding:9px 0; border-bottom:1px solid #f0f0f0; }
        .module-toggle:last-child { border-bottom:none; }
        .module-toggle-icon { width:30px; height:30px; border-radius:7px; display:flex; align-items:center; justify-content:center; color:white; font-size:0.8rem; }
        .module-toggle-info { flex:1; }
        .module-toggle-info strong { font-size:0.82rem; color:#333; }
        .module-toggle-info span { font-size:0.68rem; color:#999; display:block; }
        .toggle-switch { position:relative; width:42px; height:23px; cursor:pointer; }
        .toggle-switch input { opacity:0; width:0; height:0; }
        .toggle-slider { position:absolute; inset:0; background:#ddd; border-radius:23px; transition:0.3s; }
        .toggle-slider::before { content:''; position:absolute; height:17px; width:17px; left:3px; bottom:3px; background:white; border-radius:50%; transition:0.3s; box-shadow:0 1px 3px rgba(0,0,0,0.2); }
        .toggle-switch input:checked + .toggle-slider { background:var(--c-success); }
        .toggle-switch input:checked + .toggle-slider::before { transform:translateX(19px); }

        /* Drag-and-drop order */
        .order-list { list-style:none; }
        .order-item { display:flex; align-items:center; gap:12px; padding:10px 14px; margin-bottom:6px; background:#f8f9fa; border:1px solid #e8eaed; border-radius:8px; cursor:grab; transition:all 0.2s; user-select:none; }
        .order-item:active { cursor:grabbing; }
        .order-item.dragging { opacity:0.4; background:#e8eaed; }
        .order-item.drag-over { border-color:var(--c-info); background:#eaf4fe; transform:scale(1.01); }
        .order-grip { color:#bbb; font-size:0.9rem; }
        .order-icon { width:26px; height:26px; border-radius:6px; display:flex; align-items:center; justify-content:center; color:white; font-size:0.7rem; flex-shrink:0; }
        .order-label { flex:1; font-size:0.82rem; font-weight:500; color:#333; }
        .order-hint { font-size:0.65rem; color:#aaa; margin-top:6px; }
        .order-item.sep-item { background:#f0f0f0; border:1px dashed #ccc; padding:6px 14px; cursor:grab; }
        .order-item.sep-item:active { cursor:grabbing; }
        .order-item.sep-item .sep-line { flex:1; height:2px; background:rgba(0,0,0,0.12); border-radius:2px; }
        .order-item.sep-item .sep-label { font-size:0.68rem; color:#aaa; font-style:italic; white-space:nowrap; }
        .order-item.sep-item .sep-del { width:20px; height:20px; border:none; background:rgba(0,0,0,0.07); border-radius:50%; cursor:pointer; display:flex; align-items:center; justify-content:center; font-size:0.6rem; color:#999; flex-shrink:0; }
        .order-item.sep-item .sep-del:hover { background:#fde0e0; color:var(--c-accent); }
        .add-sep-btn { display:inline-flex; align-items:center; gap:6px; padding:6px 14px; border:1px dashed #bbb; border-radius:7px; background:#fafbfc; cursor:pointer; font-size:0.75rem; color:#888; font-family:var(--font); font-weight:500; transition:all 0.2s; margin-top:8px; }
        .add-sep-btn:hover { border-color:var(--c-info); color:var(--c-info); background:#eaf4fe; }

        /* Export/Import buttons */
        .settings-backup { display:flex; gap:8px; flex-wrap:wrap; }
        .backup-btn { display:flex; align-items:center; gap:7px; padding:8px 16px; border:1px solid #ddd; border-radius:8px; background:#fafbfc; cursor:pointer; font-size:0.78rem; font-weight:500; font-family:var(--font); color:#555; transition:all 0.2s; }
        .backup-btn:hover { border-color:var(--c-info); background:#eaf4fe; color:var(--c-info); }
        .backup-btn i { font-size:0.85rem; }
        .backup-btn.import-btn { position:relative; }
        .backup-btn.import-btn input[type="file"] { position:absolute; inset:0; opacity:0; cursor:pointer; }

        .settings-footer { padding:14px 24px; border-top:1px solid #eee; display:flex; justify-content:flex-end; gap:10px; }
        .btn-settings { padding:9px 22px; border:none; border-radius:8px; font-size:0.82rem; font-weight:600; cursor:pointer; font-family:var(--font); transition:all 0.2s; }
        .btn-save { background:var(--c-accent); color:white; }
        .btn-save:hover { background:#c0392b; }
        .btn-cancel { background:#f0f0f0; color:#666; }
        .btn-cancel:hover { background:#e0e0e0; }

        /* ═══ DATA PANEL ═══ */
        .data-panel { position:absolute; inset:0; display:none; flex-direction:column; background:var(--c-bg); z-index:10; overflow-y:auto; }
        .data-panel.active { display:flex; }
        .data-header { padding:30px 40px 0; }
        .data-header h1 { font-family:var(--font-display); font-size:1.6rem; font-weight:700; color:var(--c-nav); display:flex; align-items:center; gap:12px; }
        .data-header h1 i { color:var(--c-purple); }
        .data-header p { color:#6b7280; font-size:0.85rem; margin-top:6px; }
        .data-body { padding:24px 40px 40px; display:grid; grid-template-columns:1fr 1fr; gap:24px; }
        .data-card { background:white; border-radius:var(--radius); box-shadow:var(--shadow); border:1px solid var(--c-border); overflow:hidden; }
        .data-card-header { padding:16px 20px; border-bottom:1px solid #eee; display:flex; align-items:center; gap:10px; }
        .data-card-header i { font-size:1.1rem; }
        .data-card-header.teachers i { color:var(--c-info); }
        .data-card-header.students i { color:var(--c-purple); }
        .data-card-header h3 { font-size:0.95rem; font-weight:600; color:var(--c-nav); }
        .data-card-header .data-badge { margin-left:auto; font-size:0.7rem; padding:3px 10px; border-radius:20px; font-weight:600; background:#f0f0f0; color:#888; }
        .data-card-header .data-badge.has-data { background:#e8f8f0; color:var(--c-success); }
        .data-card-body { padding:20px; }

        .excel-drop { border:2px dashed #ccc; border-radius:8px; padding:24px; text-align:center; transition:0.2s; cursor:pointer; position:relative; background:#fafbfc; }
        .excel-drop:hover { border-color:var(--c-info); background:#f0f7ff; }
        .excel-drop.loaded { border-color:var(--c-success); background:#f0fff4; }
        .excel-drop input[type="file"] { position:absolute; inset:0; opacity:0; cursor:pointer; }
        .excel-drop i.drop-icon { font-size:2rem; color:#ccc; margin-bottom:8px; display:block; }
        .excel-drop.loaded i.drop-icon { color:var(--c-success); }
        .excel-drop .drop-label { font-size:0.82rem; color:#888; }
        .excel-drop.loaded .drop-label { color:var(--c-success); font-weight:600; }
        .excel-drop .drop-hint { font-size:0.68rem; color:#bbb; margin-top:4px; }

        .data-actions { display:flex; gap:8px; margin-top:12px; flex-wrap:wrap; }
        .data-btn { padding:7px 14px; border:none; border-radius:7px; font-size:0.75rem; font-weight:600; cursor:pointer; font-family:var(--font); transition:0.2s; display:flex; align-items:center; gap:6px; }
        .data-btn-view { background:#eaf4fe; color:var(--c-info); }
        .data-btn-view:hover { background:#d0e8fc; }
        .data-btn-clear { background:#fff0f0; color:var(--c-accent); }
        .data-btn-clear:hover { background:#fde0e0; }
        .data-btn-tpl { background:#f0f7ff; color:var(--c-purple); }
        .data-btn-tpl:hover { background:#e4edfe; }

        .data-preview { margin-top:14px; max-height:260px; overflow-y:auto; border:1px solid #eee; border-radius:8px; }
        .data-preview table { width:100%; border-collapse:collapse; font-size:0.72rem; }
        .data-preview th { background:#f4f5f7; padding:7px 10px; text-align:left; font-weight:600; color:#555; position:sticky; top:0; border-bottom:1px solid #ddd; }
        .data-preview td { padding:6px 10px; border-bottom:1px solid #f0f0f0; color:#444; }
        .data-preview tr:hover td { background:#f8f9ff; }
        .data-count { font-size:0.72rem; color:#888; margin-top:8px; display:flex; align-items:center; gap:6px; }
        .data-count strong { color:var(--c-nav); }
        .data-count i { color:var(--c-success); }

        /* ═══ CONTENT ═══ */
        .content-area { flex:1; position:relative; overflow:hidden; }
        .welcome { position:absolute; inset:0; display:flex; flex-direction:column; align-items:center; justify-content:center; background:linear-gradient(160deg,#f0f1f4,#e4e7ee,#dfe2ea); z-index:10; transition:opacity 0.4s,transform 0.4s; padding:40px; }
        .welcome.hidden { opacity:0; transform:scale(0.98); pointer-events:none; }
        .welcome-header { text-align:center; margin-bottom:40px; }
        .welcome-logo { width:auto; height:auto; min-height:56px; background:var(--c-accent); border-radius:14px; display:flex; align-items:center; justify-content:center; font-size:24px; color:white; font-weight:700; margin:0 auto 16px; box-shadow:0 8px 32px var(--c-accent-glow); overflow:hidden; }
        .welcome-logo img { height:4cm; width:auto; object-fit:contain; }
        .welcome-title { font-family:var(--font-display); font-size:2rem; font-weight:700; color:var(--c-nav); margin-bottom:6px; }
        .welcome-subtitle { color:#6b7280; font-size:0.95rem; }
        .module-grid { display:flex; flex-wrap:wrap; justify-content:center; gap:16px; max-width:1000px; width:100%; }
        .module-card { background:var(--c-card); border-radius:var(--radius); padding:24px 20px; cursor:pointer; transition:all 0.25s; box-shadow:var(--shadow); border:1px solid var(--c-border); text-align:center; position:relative; overflow:hidden; width:170px; flex-shrink:0; }
        .module-card::before { content:''; position:absolute; top:0; left:0; right:0; height:3px; border-radius:var(--radius) var(--radius) 0 0; transition:height 0.3s; }
        .module-card:hover { transform:translateY(-4px); box-shadow:0 8px 32px rgba(0,0,0,0.12); }
        .module-card:hover::before { height:5px; }
        .module-card.card-hidden { display:none !important; }
        .module-card[data-m="perdir"]::before { background:var(--c-info); }
        .module-card[data-m="exam"]::before { background:var(--c-accent); }
        .module-card[data-m="oral"]::before { background:var(--c-warning); }
        .module-card[data-m="dhg"]::before { background:var(--c-purple); }
        .module-card[data-m="aed"]::before { background:var(--c-success); }
        .module-card[data-m="bibase"]::before { background:#e67e22; }
            .module-card[data-m="data"]::before { background:var(--c-purple); }
        .module-icon { width:44px; height:44px; border-radius:11px; display:flex; align-items:center; justify-content:center; font-size:1.1rem; color:white; margin:0 auto 12px; }
        .module-card[data-m="perdir"] .module-icon { background:var(--c-info); }
        .module-card[data-m="exam"] .module-icon { background:var(--c-accent); }
        .module-card[data-m="oral"] .module-icon { background:var(--c-warning); }
        .module-card[data-m="dhg"] .module-icon { background:var(--c-purple); }
        .module-card[data-m="aed"] .module-icon { background:var(--c-success); }
        .module-card[data-m="bibase"] .module-icon { background:#e67e22; }
            .module-card[data-m="data"] .module-icon { background:var(--c-purple); }
        .module-card h3 { font-size:0.9rem; font-weight:600; color:var(--c-nav); margin-bottom:4px; }
        .module-card p { font-size:0.7rem; color:#9ca3af; line-height:1.3; }

        .module-frame { position:absolute; inset:0; border:none; width:100%; height:100%; display:none; background:white; }
        .module-frame.active { display:block; }
        .loader-overlay { position:absolute; inset:0; background:rgba(240,241,244,0.92); display:flex; flex-direction:column; align-items:center; justify-content:center; z-index:20; opacity:0; pointer-events:none; transition:opacity 0.3s; }
        .loader-overlay.show { opacity:1; pointer-events:auto; }
        .loader-spinner { width:32px; height:32px; border:3px solid var(--c-border); border-top-color:var(--c-accent); border-radius:50%; animation:spin 0.8s linear infinite; margin-bottom:10px; }
        .loader-text { font-size:0.8rem; color:#6b7280; }
        @keyframes spin { to{transform:rotate(360deg)} }

        .bottom-bar { height:26px; background:var(--c-nav); display:flex; align-items:center; justify-content:space-between; padding:0 16px; font-size:0.6rem; color:var(--c-text-dim); flex-shrink:0; }
        .status-dot { display:inline-block; width:5px; height:5px; border-radius:50%; background:var(--c-success); margin-right:5px; animation:pulse-dot 2s ease infinite; }
        @keyframes pulse-dot { 0%,100%{opacity:1} 50%{opacity:0.4} }

        @media (max-width:900px) { .module-grid{grid-template-columns:repeat(2,1fr);max-width:460px} .nav-item .nav-label{display:none} .nav-item{padding:7px 10px} .brand-text span{display:none} .nav-clock{display:none} .settings-grid{grid-template-columns:1fr} .data-body{grid-template-columns:1fr;padding:20px} }
        @media (max-width:500px) { .module-grid{grid-template-columns:1fr;max-width:300px} }

/* ===== PARAMETRAGES: accordéons homogènes + icônes visibles ===== */
.settings-body, .settings-container, .settings-content{
  display:flex !important;
  flex-direction:column !important;
  gap:12px !important;
}
.acc-section{ width:100% !important; }
.acc-header h3{ display:flex !important; align-items:center !important; gap:10px !important; }
.acc-header h3 i{ display:inline-block !important; width:18px !important; text-align:center !important; opacity:0.95 !important; }


/* ===== ACCUEIL: logo centré si aucun évènement du jour ===== */
body.home-no-events .welcome{
  top: 50% !important;
  transform: translateY(-50%) !important;
}


/* ===== MAJ_UI_2026_02_26 — Paramétrages : accordéons homogènes + correction décalage Bulletin ===== */
.settings-body{
  display:flex;
  flex-direction:column;
  gap:12px;
}
/* on évite le double espacement (gap + margin-bottom) */
.settings-body .acc-section{ margin:0; }
/* filet de sécurité : si un accordéon est ajouté hors settings-body, on lui redonne le même alignement */
.settings-panel > .acc-section{ margin:0 24px 10px; }
/* cohérence largeur */
.acc-section{ width:100%; }


/* ===== FIX LARGEUR ACCORDEONS ===== */
.settings-body .acc-section {
  width: 100% !important;
}

.settings-body .acc-body > * {
  width: 100% !important;
  max-width: 100% !important;
}

.settings-body .settings-grid {
  width: 100% !important;
}


/* ===== V4 - FIX LARGEUR ACCORDEON BULLETIN UNIQUEMENT ===== */
.settings-body .acc-section {
  width: 100%;
  box-sizing: border-box;
}


/* ===== V5 - Bulletin dans le même bloc + largeur identique ===== */
.settings-body .acc-section{ width:100% !important; box-sizing:border-box !important; }
.settings-body .acc-header, .settings-body .acc-body{ width:100% !important; box-sizing:border-box !important; }


/* ===== V6 - DOCK PLUS LISIBLE ===== */

.module-grid{
  gap: 14px !important;
  padding: 12px 18px !important;
}

.module-card{
  width: 110px !important;
  height: 92px !important;
  padding: 12px 8px !important;
  border-radius: 18px !important;
}

.module-card .module-icon{
  width: 38px !important;
  height: 38px !important;
  font-size: 20px !important;
}

.module-card h3,
.module-card .module-title{
  font-size: 12px !important;
  line-height: 1.2 !important;
  margin-top: 8px !important;
  max-width: 100% !important;
  white-space: normal !important;
  display: -webkit-box !important;
  -webkit-line-clamp: 2 !important;
  -webkit-box-orient: vertical !important;
  overflow: hidden !important;
  text-overflow: ellipsis !important;
}


/* ===== V7 - DOCK INTERLIGNE REDUIT + TEXTE MAJUSCULE ===== */

.module-card{
  justify-content: flex-start !important;
  padding-top: 10px !important;
}

.module-card .module-icon{
  margin-bottom: 4px !important;
}

.module-card h3,
.module-card .module-title{
  margin-top: 4px !important;
  font-size: 11.5px !important;
  line-height: 1.1 !important;
  text-transform: uppercase !important;
  letter-spacing: 0.5px !important;
}


/* ===== V21 - MODAL EDIT EVENEMENT ===== */
#evtEditBackdrop{
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,.35);
  display: none;
  align-items: center;
  justify-content: center;
  z-index: 9999;
}
#evtEditModal{
  width: min(520px, calc(100vw - 32px));
  background: #fff;
  border-radius: 18px;
  box-shadow: 0 24px 80px rgba(0,0,0,.25);
  overflow: hidden;
  font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
}
#evtEditModal .hdr{
  display:flex;
  align-items:center;
  justify-content: space-between;
  padding: 14px 16px;
  border-bottom: 1px solid #eee;
}
#evtEditModal .hdr .t{
  font-weight: 800;
  font-size: 15px;
  letter-spacing: .3px;
}
#evtEditModal .hdr button{
  border: none;
  background: transparent;
  font-size: 18px;
  cursor: pointer;
  padding: 6px 8px;
  border-radius: 10px;
}
#evtEditModal .body{
  padding: 14px 16px 10px 16px;
}
#evtEditModal label{
  display:block;
  font-size: 12px;
  font-weight: 700;
  color:#333;
  margin: 10px 0 6px;
}
#evtEditModal input{
  width: 100%;
  box-sizing: border-box;
  padding: 10px 12px;
  border-radius: 12px;
  border: 1px solid #ddd;
  outline: none;
  font-size: 14px;
}
#evtEditModal input:focus{ border-color:#b9b9b9; }
#evtEditModal .row{
  display:flex;
  gap: 10px;
}
#evtEditModal .row > div{ flex:1; }
#evtEditModal .meta{
  margin-top: 6px;
  font-size: 12px;
  color:#666;
  line-height: 1.35;
}
#evtEditModal .warn{
  margin-top: 10px;
  padding: 10px 12px;
  border-radius: 12px;
  background: #fff7ed;
  border: 1px solid #fed7aa;
  color:#7c2d12;
  font-size: 12px;
  display:none;
}
#evtEditModal .ftr{
  padding: 12px 16px 16px 16px;
  display:flex;
  justify-content: flex-end;
  gap: 10px;
}
#evtEditModal .btn{
  border: none;
  border-radius: 12px;
  padding: 10px 14px;
  cursor: pointer;
  font-weight: 800;
}
#evtEditModal .btn.secondary{
  background:#f2f2f2;
  color:#333;
}
#evtEditModal .btn.primary{
  background:#d6452f;
  color:#fff;
}
#evtEditModal .btn.primary[disabled]{
  opacity:.5;
  cursor:not-allowed;
}


</style>
    <script src="CADIR_fichiers/client" async="" defer="defer"></script>
<style id="googleidentityservice_button_styles">.qJTHM{-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;color:#202124;direction:ltr;-webkit-touch-callout:none;font-family:"Roboto-Regular",arial,sans-serif;-webkit-font-smoothing:antialiased;font-weight:400;margin:0;overflow:hidden;-webkit-text-size-adjust:100%}.ynRLnc{left:-9999px;position:absolute;top:-9999px}.L6cTce{display:none}.bltWBb{overflow-wrap:break-word;word-break:break-word}.hSRGPd{color:#1a73e8;cursor:pointer;font-weight:500;text-decoration:none}.Bz112c-W3lGp{height:16px;width:16px}.Bz112c-E3DyYd{height:20px;width:20px}.Bz112c-r9oPif{height:24px;width:24px}.Bz112c-u2z5K{height:36px;width:36px}.Bz112c-uaxL4e{border-radius:10px}.LgbsSe-Bz112c{display:block}.S9gUrf-YoZ4jf{border:none;margin:0;padding:0}.S9gUrf-YoZ4jf *{border:none;margin:0;padding:0}.fFW7wc-ibnC6b>.aZ2wEe>div{border-color:#4285f4}.P1ekSe-ZMv3u{transition:height linear .2s}.P1ekSe-ZMv3u>div:nth-child(1){background-color:#1a73e8!important;transition:width linear .3s}.P1ekSe-ZMv3u>div:nth-child(2){background-image:linear-gradient(to right,rgba(255,255,255,.7),rgba(255,255,255,.7)),linear-gradient(to right,#1a73e8,#1a73e8)!important}.P1ekSe-ZMv3u>div:nth-child(3){background-image:linear-gradient(to right,rgba(255,255,255,.7),rgba(255,255,255,.7)),linear-gradient(to right,#1a73e8,#1a73e8)!important}.haAclf{display:inline-block}.nsm7Bb-HzV7m-LgbsSe{border-radius:4px;-moz-box-sizing:border-box;box-sizing:border-box;transition:background-color .218s,border-color .218s;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;-webkit-appearance:none;background-color:#fff;background-image:none;border:1px solid #dadce0;color:#3c4043;cursor:pointer;font-family:"Google Sans",arial,sans-serif;font-size:14px;height:40px;letter-spacing:.25px;outline:none;overflow:hidden;padding:0 12px;position:relative;text-align:center;vertical-align:middle;white-space:nowrap;width:auto}@media screen and (-ms-high-contrast:active){.nsm7Bb-HzV7m-LgbsSe{border:2px solid windowText;color:windowText}}@media screen and (preferes-contrast:more){.nsm7Bb-HzV7m-LgbsSe{color:#000}}.nsm7Bb-HzV7m-LgbsSe.pSzOP-SxQuSe{font-size:14px;height:32px;letter-spacing:.25px;padding:0 10px}.nsm7Bb-HzV7m-LgbsSe.purZT-SxQuSe{font-size:11px;height:20px;letter-spacing:.3px;padding:0 8px}.nsm7Bb-HzV7m-LgbsSe.Bz112c-LgbsSe{padding:0;width:40px}.nsm7Bb-HzV7m-LgbsSe.Bz112c-LgbsSe.pSzOP-SxQuSe{width:32px}.nsm7Bb-HzV7m-LgbsSe.Bz112c-LgbsSe.purZT-SxQuSe{width:20px}.nsm7Bb-HzV7m-LgbsSe.JGcpL-RbRzK{border-radius:20px}.nsm7Bb-HzV7m-LgbsSe.JGcpL-RbRzK.pSzOP-SxQuSe{border-radius:16px}.nsm7Bb-HzV7m-LgbsSe.JGcpL-RbRzK.purZT-SxQuSe{border-radius:10px}.nsm7Bb-HzV7m-LgbsSe.MFS4be-Ia7Qfc{border:none;color:#fff}.nsm7Bb-HzV7m-LgbsSe.MFS4be-v3pZbf-Ia7Qfc{background-color:#1a73e8}.nsm7Bb-HzV7m-LgbsSe.MFS4be-JaPV2b-Ia7Qfc{background-color:#202124;color:#e8eaed}@media screen and (prefers-contrast:more){.nsm7Bb-HzV7m-LgbsSe.MFS4be-JaPV2b-Ia7Qfc{color:#fff}}.nsm7Bb-HzV7m-LgbsSe .nsm7Bb-HzV7m-LgbsSe-Bz112c{height:18px;margin-right:8px;min-width:18px;width:18px}.nsm7Bb-HzV7m-LgbsSe.pSzOP-SxQuSe .nsm7Bb-HzV7m-LgbsSe-Bz112c{height:14px;min-width:14px;width:14px}.nsm7Bb-HzV7m-LgbsSe.purZT-SxQuSe .nsm7Bb-HzV7m-LgbsSe-Bz112c{height:10px;min-width:10px;width:10px}.nsm7Bb-HzV7m-LgbsSe.jVeSEe .nsm7Bb-HzV7m-LgbsSe-Bz112c{margin-left:8px;margin-right:-4px}.nsm7Bb-HzV7m-LgbsSe.Bz112c-LgbsSe .nsm7Bb-HzV7m-LgbsSe-Bz112c{margin:0;padding:10px}.nsm7Bb-HzV7m-LgbsSe.Bz112c-LgbsSe.pSzOP-SxQuSe .nsm7Bb-HzV7m-LgbsSe-Bz112c{padding:8px}.nsm7Bb-HzV7m-LgbsSe.Bz112c-LgbsSe.purZT-SxQuSe .nsm7Bb-HzV7m-LgbsSe-Bz112c{padding:4px}.nsm7Bb-HzV7m-LgbsSe .nsm7Bb-HzV7m-LgbsSe-Bz112c-haAclf{border-top-left-radius:3px;border-bottom-left-radius:3px;display:-moz-box;display:flex;-moz-box-pack:center;justify-content:center;-moz-box-align:center;align-items:center;background-color:#fff;height:36px;margin-left:-10px;margin-right:12px;min-width:36px;width:36px}.nsm7Bb-HzV7m-LgbsSe .nsm7Bb-HzV7m-LgbsSe-Bz112c-haAclf .nsm7Bb-HzV7m-LgbsSe-Bz112c,.nsm7Bb-HzV7m-LgbsSe.Bz112c-LgbsSe .nsm7Bb-HzV7m-LgbsSe-Bz112c-haAclf .nsm7Bb-HzV7m-LgbsSe-Bz112c{margin:0;padding:0}.nsm7Bb-HzV7m-LgbsSe.pSzOP-SxQuSe .nsm7Bb-HzV7m-LgbsSe-Bz112c-haAclf{height:28px;margin-left:-8px;margin-right:10px;min-width:28px;width:28px}.nsm7Bb-HzV7m-LgbsSe.purZT-SxQuSe .nsm7Bb-HzV7m-LgbsSe-Bz112c-haAclf{height:16px;margin-left:-6px;margin-right:8px;min-width:16px;width:16px}.nsm7Bb-HzV7m-LgbsSe.Bz112c-LgbsSe .nsm7Bb-HzV7m-LgbsSe-Bz112c-haAclf{border-radius:3px;margin-left:2px;margin-right:0;padding:0}.nsm7Bb-HzV7m-LgbsSe.JGcpL-RbRzK .nsm7Bb-HzV7m-LgbsSe-Bz112c-haAclf{border-radius:18px}.nsm7Bb-HzV7m-LgbsSe.pSzOP-SxQuSe.JGcpL-RbRzK .nsm7Bb-HzV7m-LgbsSe-Bz112c-haAclf{border-radius:14px}.nsm7Bb-HzV7m-LgbsSe.purZT-SxQuSe.JGcpL-RbRzK .nsm7Bb-HzV7m-LgbsSe-Bz112c-haAclf{border-radius:8px}.nsm7Bb-HzV7m-LgbsSe .nsm7Bb-HzV7m-LgbsSe-bN97Pc-sM5MNb{display:-moz-box;display:flex;-moz-box-align:center;align-items:center;-moz-box-orient:horizontal;-moz-box-direction:normal;flex-direction:row;-moz-box-pack:justify;justify-content:space-between;flex-wrap:nowrap;height:100%;position:relative;width:100%}.nsm7Bb-HzV7m-LgbsSe .oXtfBe-l4eHX{-moz-box-pack:center;justify-content:center}.nsm7Bb-HzV7m-LgbsSe .nsm7Bb-HzV7m-LgbsSe-BPrWId{-moz-box-flex:1;flex-grow:1;font-family:"Google Sans",arial,sans-serif;font-weight:500;overflow:hidden;text-overflow:ellipsis;vertical-align:top}.nsm7Bb-HzV7m-LgbsSe.purZT-SxQuSe .nsm7Bb-HzV7m-LgbsSe-BPrWId{font-weight:300}.nsm7Bb-HzV7m-LgbsSe .oXtfBe-l4eHX .nsm7Bb-HzV7m-LgbsSe-BPrWId{-moz-box-flex:0;flex-grow:0}.nsm7Bb-HzV7m-LgbsSe .nsm7Bb-HzV7m-LgbsSe-MJoBVe{transition:background-color .218s;bottom:0;left:0;position:absolute;right:0;top:0}.nsm7Bb-HzV7m-LgbsSe:hover,.nsm7Bb-HzV7m-LgbsSe:focus{box-shadow:none;border-color:rgb(210,227,252);outline:none}.nsm7Bb-HzV7m-LgbsSe:focus-within{outline:2px solid #00639b;border-color:transparent}.nsm7Bb-HzV7m-LgbsSe:hover .nsm7Bb-HzV7m-LgbsSe-MJoBVe{background:rgba(66,133,244,.08)}.nsm7Bb-HzV7m-LgbsSe:active .nsm7Bb-HzV7m-LgbsSe-MJoBVe,.nsm7Bb-HzV7m-LgbsSe:focus .nsm7Bb-HzV7m-LgbsSe-MJoBVe{background:rgba(66,133,244,.1)}.nsm7Bb-HzV7m-LgbsSe.MFS4be-Ia7Qfc:hover .nsm7Bb-HzV7m-LgbsSe-MJoBVe{background:rgba(255,255,255,.24)}.nsm7Bb-HzV7m-LgbsSe.MFS4be-Ia7Qfc:active .nsm7Bb-HzV7m-LgbsSe-MJoBVe,.nsm7Bb-HzV7m-LgbsSe.MFS4be-Ia7Qfc:focus .nsm7Bb-HzV7m-LgbsSe-MJoBVe{background:rgba(255,255,255,.32)}.nsm7Bb-HzV7m-LgbsSe .n1UuX-DkfjY{border-radius:50%;display:-moz-box;display:flex;height:20px;margin-left:-4px;margin-right:8px;min-width:20px;width:20px}.nsm7Bb-HzV7m-LgbsSe.jVeSEe .nsm7Bb-HzV7m-LgbsSe-BPrWId{font-family:"Roboto";font-size:12px;text-align:left}.nsm7Bb-HzV7m-LgbsSe.jVeSEe .nsm7Bb-HzV7m-LgbsSe-BPrWId .ssJRIf,.nsm7Bb-HzV7m-LgbsSe.jVeSEe .nsm7Bb-HzV7m-LgbsSe-BPrWId .K4efff .fmcmS{overflow:hidden;text-overflow:ellipsis}.nsm7Bb-HzV7m-LgbsSe.jVeSEe .nsm7Bb-HzV7m-LgbsSe-BPrWId .K4efff{display:-moz-box;display:flex;-moz-box-align:center;align-items:center;color:#5f6368;fill:#5f6368;font-size:11px;font-weight:400}.nsm7Bb-HzV7m-LgbsSe.jVeSEe.MFS4be-Ia7Qfc .nsm7Bb-HzV7m-LgbsSe-BPrWId .K4efff{color:#e8eaed;fill:#e8eaed}@media screen and (prefers-contrast:more){.nsm7Bb-HzV7m-LgbsSe.jVeSEe .nsm7Bb-HzV7m-LgbsSe-BPrWId .K4efff,.nsm7Bb-HzV7m-LgbsSe.jVeSEe.MFS4be-Ia7Qfc .nsm7Bb-HzV7m-LgbsSe-BPrWId .K4efff{color:#000;fill:#000}}.nsm7Bb-HzV7m-LgbsSe.jVeSEe .nsm7Bb-HzV7m-LgbsSe-BPrWId .K4efff .Bz112c{height:18px;margin:-3px -3px -3px 2px;min-width:18px;width:18px}.nsm7Bb-HzV7m-LgbsSe.jVeSEe .nsm7Bb-HzV7m-LgbsSe-Bz112c-haAclf{border-top-left-radius:0;border-bottom-left-radius:0;border-top-right-radius:3px;border-bottom-right-radius:3px;margin-left:12px;margin-right:-10px}.nsm7Bb-HzV7m-LgbsSe.jVeSEe.JGcpL-RbRzK .nsm7Bb-HzV7m-LgbsSe-Bz112c-haAclf{border-radius:18px}.L5Fo6c-sM5MNb{border:0;display:block;left:0;position:relative;top:0}.L5Fo6c-bF1uUb{border-radius:4px;bottom:0;cursor:pointer;left:0;position:absolute;right:0;top:0}.L5Fo6c-bF1uUb:focus{border:none;outline:none}sentinel{}
/* ===== DOCK EN BAS (vignettes petites) ===== */

/* ===== DOCK: texte lisible (2 lignes) ===== */
.module-card{
  width: 88px !important;
  height: 82px !important;
}
.module-card .module-title,
.module-card h3{
  font-size: 11px !important;
  line-height: 1.1 !important;
  margin-top: 6px !important;
  max-width: 82px !important;
  overflow: hidden !important;
  white-space: normal !important;
  display: -webkit-box !important;
  -webkit-line-clamp: 2 !important;
  -webkit-box-orient: vertical !important;
  text-overflow: ellipsis !important;
}
.module-card p{ display:none !important; }

.home-view, .home, .home-container, #homeView, #home {
  padding-bottom: 120px !important; /* évite que le dock masque le bas */
}

.module-grid{
  position: fixed !important;
  left: 50% !important;
  bottom: 14px !important;
  transform: translateX(-50%) !important;
  flex-wrap: nowrap !important;
  justify-content: flex-start !important;
  gap: 10px !important;
  max-width: min(1000px, calc(100vw - 24px)) !important;
  width: auto !important;
  overflow-x: auto !important;
  overflow-y: hidden !important;
  padding: 10px 12px !important;
  background: rgba(255,255,255,0.72) !important;
  backdrop-filter: blur(14px) saturate(160%) !important;
  -webkit-backdrop-filter: blur(14px) saturate(160%) !important;
  border: 1px solid rgba(0,0,0,0.08) !important;
  border-radius: 22px !important;
  box-shadow: 0 14px 40px rgba(0,0,0,0.12) !important;
  scrollbar-width: none; /* Firefox */
}
.module-grid::-webkit-scrollbar{ display:none; }

.module-card{
  width: 76px !important;
  height: 76px !important;
  padding: 10px 10px !important;
  border-radius: 18px !important;
  display: flex !important;
  flex-direction: column !important;
  align-items: center !important;
  justify-content: center !important;
}

.module-card::before{ height: 2px !important; }

.module-card:hover{
  transform: translateY(-6px) scale(1.06) !important;
}

.module-card:active{
  transform: translateY(-3px) scale(1.03) !important;
}

.module-card .module-title{
  font-size: 11px !important;
  line-height: 1.05 !important;
  margin-top: 6px !important;
  max-width: 70px !important;
  overflow: hidden !important;
  text-overflow: ellipsis !important;
  white-space: nowrap !important;
}

.module-card .module-subtitle{
  display:none !important; /* dock compact */
}

.module-card .module-icon{
  width: 34px !important;
  height: 34px !important;
  font-size: 18px !important;
}

/* Indicateur actif (petit point) */
.module-card.active::after{
  content:'';
  position:absolute;
  bottom:6px;
  left:50%;
  transform:translateX(-50%);
  width:6px;
  height:6px;
  border-radius:999px;
  background: rgba(30,41,59,0.6);
}

</style>
<style>
/* V44 - Bandeau en MAJUSCULE */
.topbar, .navbar, header, nav {
    text-transform: uppercase !important;
}
</style>

</head>
<body>

    <nav class="topnav">
        <a class="brand" onclick="goHome()" title="Accueil">
            <div class="brand-icon" id="brandIcon"><span id="brandLetter">P</span><img id="brandLogo" style="display:none"></div>
            <div class="brand-text">CADIR<span>Suite Direction</span></div>
        </a>
        <div class="nav-sep"></div>
        <div class="nav-items" id="navItems"><div class="nav-item active" data-module="perdir" onclick="loadModule('perdir')" title="Ctrl+P"><i class="fas fa-building-columns"></i><span class="nav-label">ADMIN</span><span class="nav-badge">Direction</span><kbd class="nav-shortcut">Ctrl+P</kbd></div><div class="nav-item" data-module="exam" onclick="loadModule('exam')" title="Ctrl+E"><i class="fas fa-file-pen"></i><span class="nav-label">Écrit</span><span class="nav-badge">Épreuves</span><kbd class="nav-shortcut">Ctrl+E</kbd></div><div class="nav-item" data-module="oral" onclick="loadModule('oral')" title="Ctrl+O"><i class="fas fa-comments"></i><span class="nav-label">Oral</span><span class="nav-badge">Oraux</span><kbd class="nav-shortcut">Ctrl+O</kbd></div><div class="nav-item" data-module="dhg" onclick="loadModule('dhg')" title="Ctrl+D"><i class="fas fa-calendar-check"></i><span class="nav-label">DHG</span><span class="nav-badge">Services</span><kbd class="nav-shortcut">Ctrl+D</kbd></div><div class="nav-item" data-module="aed" onclick="loadModule('aed')" title="Ctrl+A"><i class="fas fa-user-shield"></i><span class="nav-label">AED</span><span class="nav-badge">Vie Scolaire</span><kbd class="nav-shortcut">Ctrl+A</kbd></div><div class="nav-item" data-module="bibase" onclick="loadModule('bibase')" title="Ctrl+B"><i class="fas fa-newspaper"></i><span class="nav-label">BULLETIN</span><span class="nav-badge">Information</span><kbd class="nav-shortcut">Ctrl+B</kbd></div><div class="nav-item" data-module="data" onclick="openDataPanel()" title="Ctrl+D"><i class="fas fa-database"></i><span class="nav-label">Données</span><span class="nav-badge">Import</span><kbd class="nav-shortcut">Ctrl+D</kbd></div></div>
        <div class="nav-right">
            <div class="nav-clock" id="clock">mer. 18 févr., 21:26</div>
            <button class="nav-btn" onclick="openSettings()" title="Paramètres (Alt+P)"><i class="fas fa-cog"></i></button>
            <button class="nav-btn" onclick="toggleFullscreen()" title="Plein écran"><i class="fas fa-expand" id="fs-icon"></i></button>
        </div>
    </nav>

    <!-- ═══ SETTINGS ═══ -->
    <div class="settings-overlay" id="settingsOverlay" onclick="if(event.target===this)closeSettings()">
        <div class="settings-panel">
            <div class="settings-header">
                <h2><i class="fas fa-cog"></i> Paramètres généraux</h2>
                <button class="settings-close" onclick="closeSettings()">×</button>
            </div>
            <div class="settings-body">

                <div class="acc-section open">
                    <div class="acc-header" onclick="toggleAcc(this)"><h3><i class="fas fa-id-card"></i> Identité &amp; Établissement</h3><i class="fas fa-chevron-right acc-chevron"></i></div>
                    <div class="acc-body">
                    <div class="settings-grid">
                        <div class="form-group"><label>Nom de l'établissement</label><input type="text" id="s-school" placeholder="Lycée Jean-Antoine"></div>
                        <div class="form-group"><label>Nom &amp; Prénom</label><input type="text" id="s-name" placeholder="M. Dupont"></div>
                        <div class="form-group"><label>Fonction</label><input type="text" id="s-role" placeholder="Proviseur adjoint"></div>
                        <div class="form-group"><label>Ville</label><input type="text" id="s-city" placeholder="Rennes"></div>
                        <div class="form-group"><label>Zone de vacances</label><select id="s-zone" style="padding:8px 12px;border:1px solid #ddd;border-radius:8px;font-size:.85rem;width:100%;"><option value="A">Zone A</option><option value="B" selected="selected">Zone B</option><option value="C">Zone C</option></select></div>
                        <div class="form-group" style="display:flex;align-items:flex-end;">
                            <button onclick="triggerVacancesUpdate()" style="padding:9px 16px;border:none;border-radius:8px;background:#e67e22;color:#fff;font-weight:600;font-size:.78rem;cursor:pointer;white-space:nowrap;display:flex;align-items:center;gap:6px;height:40px;">
                                <i class="fas fa-calendar-day"></i> MAJ Vacances scolaires
                            </button>
                        </div>
                    </div>
                </div></div>
                <div class="acc-section">
                    <div class="acc-header" onclick="toggleAcc(this)"><h3><i class="fas fa-image"></i> Logo &amp; Signature</h3><i class="fas fa-chevron-right acc-chevron"></i></div>
                    <div class="acc-body">
                    <div class="settings-grid">
                        <div class="form-group">
                            <label>Logo de l'établissement</label>
                            <input type="file" accept="image/*" onchange="handleSettingsImage(this,'logo')">
                            <div class="img-preview" id="prev-logo">
                                <span class="placeholder" id="ph-logo">Aucun logo</span>
                                <img id="img-logo" style="display:none">
                                <button class="btn-clear" onclick="clearImage('logo')" title="Supprimer">×</button>
                            </div>
                        </div>
                        <div class="form-group">
                            <label>Signature scannée</label>
                            <input type="file" accept="image/*" onchange="handleSettingsImage(this,'sign')">
                            <div class="img-preview" id="prev-sign">
                                <span class="placeholder" id="ph-sign">Aucune signature</span>
                                <img id="img-sign" style="display:none">
                                <button class="btn-clear" onclick="clearImage('sign')" title="Supprimer">×</button>
                            </div>
                        </div>
                    </div>
                </div></div>
                <div class="acc-section">
                    <div class="acc-header" onclick="toggleAcc(this)"><h3><i class="fas fa-sliders"></i> Modules &amp; Organisation</h3><i class="fas fa-chevron-right acc-chevron"></i></div>
                    <div class="acc-body">
                        <small style="color:#888;display:block;margin-bottom:12px;">Glissez pour réordonner. Décochez pour masquer. Ajoutez des séparateurs pour organiser la barre de navigation.</small>
                        <ul class="order-list" id="orderList"></ul>
                        <div class="order-hint"><i class="fas fa-hand-pointer"></i> Glissez-déposez pour réorganiser l'ordre</div>
                        <button class="add-sep-btn" onclick="addSeparatorToOrderList()"><i class="fas fa-grip-lines"></i> Ajouter un séparateur</button>
                    </div>
                </div>
                <div class="acc-section">
                    <div class="acc-header" onclick="toggleAcc(this)"><h3><i class="fas fa-bars"></i> Sous-menus CADIR</h3><i class="fas fa-chevron-right acc-chevron"></i></div>
                    <div class="acc-body"><div class="acc-body-inner">
                        <small style="color:#888;display:block;margin-bottom:10px;">Affichez/masquez et réorganisez les sous-menus du module CADIR par glisser-déposer.</small>
                        <div id="perdir-submenu-list" style="margin-bottom:8px;"></div>
                        <button class="add-sep-btn" onclick="addSubMenuSeparator()"><i class="fas fa-grip-lines"></i> Ajouter un séparateur</button>
                        <div class="order-hint" style="font-size:.68rem;color:#aaa;margin-top:6px;"><i class="fas fa-hand-pointer"></i> Glissez pour réordonner. Décochez pour masquer.</div>
                    </div></div>
                </div>
                <div class="acc-section">
                    <div class="acc-header" onclick="toggleAcc(this)"><h3><i class="fas fa-file-pdf"></i> En-têtes des documents PDF</h3><i class="fas fa-chevron-right acc-chevron"></i></div>
                    <div class="acc-body">
                        <small style="color:#888;display:block;margin-bottom:12px;">Personnalisez l'en-tête des PDF générés dans CADIR (entretiens, réunions, conseil de direction…).</small>
                        <div class="settings-grid">
                            <div class="form-group">
                                <label>Style de l'en-tête</label>
                                <select id="s-pdf-layout" style="padding:9px 12px;border:1px solid #ddd;border-radius:8px;font-size:.85rem;font-family:var(--font);width:100%;">
                                    <option value="classique" selected="selected">Classique — logo + nom + séparateur</option>
                                    <option value="bandeau">Bandeau coloré pleine largeur</option>
                                    <option value="moderne">Moderne — centré avec accent coloré</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Couleur principale</label>
                                <div style="display:flex;align-items:center;gap:8px;">
                                    <input type="color" id="s-pdf-color" value="#1b2433" style="width:42px;height:36px;border:1px solid #ddd;border-radius:6px;cursor:pointer;padding:2px;" oninput="var h=document.getElementById('s-pdf-color-hex');if(h)h.value=this.value;" onchange="var h=document.getElementById('s-pdf-color-hex');if(h)h.value=this.value;">
                                    <input type="text" id="s-pdf-color-hex" value="#1b2433" placeholder="#1b2433" style="flex:1;padding:8px;border:1px solid #ddd;border-radius:8px;font-size:.82rem;" oninput="document.getElementById('s-pdf-color').value=this.value">
                                </div>
                            </div>
                            <div class="form-group" style="grid-column:1/-1;">
                                <label>Sous-titre (département, service…)</label>
                                <input type="text" id="s-pdf-subtitle" placeholder="Direction" style="padding:9px 12px;border:1px solid #ddd;border-radius:8px;font-size:.85rem;font-family:var(--font);">
                                <small style="color:#aaa;font-size:.65rem;margin-top:3px;">Affiché sous le nom d'établissement dans l'en-tête. Laissez vide pour "Direction".</small>
                            </div>
                        </div>
                        <div id="pdf-header-preview" style="margin-top:14px;border:1px solid #e0e0e0;border-radius:8px;overflow:hidden;font-family:'Times New Roman',serif;font-size:.8rem;">
                            <div style="background:#f5f5f5;padding:6px 12px;font-size:.7rem;color:#888;font-family:var(--font);border-bottom:1px solid #eee;">Aperçu</div>
                            <div style="padding:12px 16px;" id="pdf-header-preview-inner"><div style="display:flex;justify-content:space-between;align-items:flex-start;border-bottom:1.5px solid #000;padding-bottom:8px;"><div><div style="font-weight:bold;text-transform:uppercase;font-size:.9rem;">Nom de l'établissement</div><div style="font-size:.7rem;color:#555;margin-top:1px;">Direction</div></div><div></div></div></div>
                        </div>
                        <button onclick="updatePdfHeaderPreview()" style="margin-top:8px;padding:6px 14px;border:none;border-radius:7px;background:#eaf4fe;color:var(--c-info);font-weight:600;font-size:.75rem;cursor:pointer;font-family:var(--font);"><i class="fas fa-sync"></i> Aperçu</button>
                    </div>
                </div>
                <div class="acc-section">
                    <div class="acc-header" onclick="toggleAcc(this)"><h3><i class="fas fa-calendar-alt"></i> Agendas externes</h3><i class="fas fa-chevron-right acc-chevron"></i></div>
                    <div class="acc-body">
                    <div class="settings-grid">
                        <div class="form-group" style="grid-column:1/-1;">
                            <label style="display:flex;align-items:center;gap:8px;cursor:pointer;">
                                <input type="checkbox" id="s-gcal" onchange="toggleGcal()" style="width:18px;height:18px;cursor:pointer;accent-color:#4285f4;">
                                <span style="font-weight:600;">Utiliser Google Agenda dans CADIR</span>
                            </label>
                            <small style="color:#888;font-size:.65rem;margin-top:2px;display:block;margin-left:26px;">Si décoché, l'agenda CADIR fonctionne en mode local (déconnecté).</small>
                        </div>
                        <div id="gcal-opts" style="display:none;grid-column:1/-1;">
                            <div style="background:#f8f9fa;border:1px solid #e0e0e0;border-radius:10px;padding:14px;margin-bottom:12px;">
                                <div style="font-weight:600;font-size:.8rem;margin-bottom:8px;color:#333;"><i class="fab fa-google" style="color:#4285f4;margin-right:4px;"></i> Connexion OAuth2</div>
                                <div class="form-group" style="margin-bottom:8px">
                                    <label style="font-size:.75rem;">Client ID OAuth2</label>
                                    <input type="text" id="s-gcal-clientid" placeholder="xxxxx.apps.googleusercontent.com" style="padding:8px;border:1px solid #ddd;border-radius:8px;width:100%;font-size:.8rem;">
                                    <small style="color:#888;font-size:.62rem;">Console Google Cloud → API &amp; Services → Identifiants → ID client OAuth 2.0 (<a href="https://console.cloud.google.com/apis/credentials" target="_blank">ouvrir</a>)</small>
                                </div>
                                <div style="display:flex;gap:8px;align-items:center;flex-wrap:wrap;">
                                    <button onclick="gcalAuth()" id="btn-gcal-auth" style="padding:7px 16px;border:none;border-radius:8px;background:#4285f4;color:#fff;font-weight:600;font-size:.78rem;cursor:pointer;display:flex;align-items:center;gap:6px;">
                                        <i class="fas fa-sign-in-alt"></i> Se connecter à Google
                                    </button>
                                    <span id="gcal-auth-status" style="font-size:.72rem;color:#999;"></span>
                                </div>
                            </div>

                            <div id="gcal-list-wrap" style="display:none;">
                                <div style="font-weight:600;font-size:.78rem;margin-bottom:6px;color:#333;"><i class="fas fa-list"></i> Vos agendas Google</div>
                                <div id="gcal-list" style="margin-bottom:8px;max-height:200px;overflow-y:auto;"></div>
                                <button onclick="gcalFetchEvents()" style="padding:7px 14px;border:none;border-radius:8px;background:#34a853;color:#fff;font-weight:600;font-size:.78rem;cursor:pointer;"><i class="fas fa-sync"></i> Synchroniser les événements</button>
                                <div id="gcal-events-status" style="margin-top:6px;font-size:.72rem;color:#888;"></div>
                            </div>

                            <div style="margin-top:12px;border-top:1px solid #eee;padding-top:10px;">
                                <details>
                                    <summary style="cursor:pointer;font-size:.72rem;color:#888;font-weight:600;"><i class="fas fa-keyboard"></i> Ajouter un agenda manuellement</summary>
                                    <div style="margin-top:8px;">
                                        <small style="color:#888;font-size:.62rem;display:block;margin-bottom:6px;">Pour les agendas publics : copiez l'ID depuis Google Agenda → Paramètres de l'agenda.</small>
                                        <div class="form-group" style="margin-bottom:6px">
                                            <label style="font-size:.72rem;">Clé API (pour agendas publics)</label>
                                            <input type="text" id="s-gcal-key" placeholder="AIzaSy..." style="padding:7px;border:1px solid #ddd;border-radius:8px;width:100%;font-size:.78rem;">
                                        </div>
                                        <div style="display:flex;gap:6px;align-items:flex-end;">
                                            <div class="form-group" style="flex:2;">
                                                <label style="font-size:.72rem;">ID du calendrier</label>
                                                <input type="text" id="gcal-manual-id" placeholder="email@gmail.com" style="padding:7px;border:1px solid #ddd;border-radius:8px;width:100%;font-size:.78rem;">
                                            </div>
                                            <div class="form-group" style="flex:1;">
                                                <label style="font-size:.72rem;">Nom</label>
                                                <input type="text" id="gcal-manual-name" placeholder="Mon agenda" style="padding:7px;border:1px solid #ddd;border-radius:8px;width:100%;font-size:.78rem;">
                                            </div>
                                            <button onclick="addManualCal()" style="padding:7px 12px;border:none;border-radius:8px;background:var(--c-info);color:#fff;font-weight:700;cursor:pointer;font-size:.85rem;height:36px;">+</button>
                                        </div>
                                        <div id="gcal-manual-list" style="margin-top:6px;"></div>
                                    </div>
                                </details>
                            </div>
                        
<!-- ===== V15: Ordre d'affichage des agendas cochés ===== -->
<div id="gcal-order-wrap" style="display:none;grid-column:1/-1;margin-top:12px;">
  <div style="font-weight:700;font-size:.78rem;margin-bottom:6px;color:#333;display:flex;align-items:center;gap:8px;">
    <i class="fas fa-sort"></i> Ordre d'affichage des agendas cochés
  </div>
  <small style="color:#888;font-size:.65rem;display:block;margin-bottom:8px;line-height:1.35;">
    Glissez-déposez pour choisir l'ordre des cartes dans <b>Calendrier</b> (et l'ordre d'affichage sur l'accueil).
  </small>
  <ul id="gcal-order-list" class="order-list" style="margin:0;padding:0;list-style:none;"></ul>
  <div class="order-hint" style="margin-top:6px;">
    <i class="fas fa-hand-pointer"></i> Glissez pour réordonner
  </div>
</div>

</div>

                            <div style="margin-top:20px;border-top:2px solid #e0e0e0;padding-top:16px;">
                                <div style="font-weight:700;font-size:.88rem;margin-bottom:10px;color:#0078d4;display:flex;align-items:center;gap:8px;"><i class="fab fa-microsoft"></i> Outlook / Office 365</div>
                                <small style="color:#666;display:block;margin-bottom:10px;line-height:1.4;font-size:.7rem;">Connectez un calendrier Outlook / Microsoft 365 via Microsoft Graph API.</small>
                                <div class="form-group" style="margin-bottom:8px;"><label style="font-size:.72rem;">Application (client) ID</label><input type="text" id="s-outlook-clientid" placeholder="Azure AD App ID" style="padding:8px;border:1px solid #ddd;border-radius:8px;width:100%;font-size:.78rem;"></div>
                                <button onclick="outlookAuth()" id="btn-outlook-auth" style="padding:9px 18px;border:none;border-radius:8px;background:#0078d4;color:#fff;font-weight:600;cursor:pointer;display:flex;align-items:center;gap:8px;font-size:.8rem;"><i class="fab fa-microsoft"></i> Connecter Outlook</button>
                                <span id="outlook-auth-status" style="font-size:.72rem;color:#888;margin-left:8px;"></span>
                                <div id="outlook-cal-list-wrap" style="display:none;margin-top:12px;">
                                    <label style="font-size:.72rem;font-weight:600;">Agendas Outlook :</label>
                                    <div id="outlook-cal-list" style="margin-top:6px;"></div>
                                    <button onclick="outlookFetchEvents()" style="margin-top:8px;padding:8px 16px;border:none;border-radius:8px;background:#0078d4;color:#fff;font-weight:600;cursor:pointer;font-size:.78rem;"><i class="fas fa-sync"></i> Synchroniser</button>
                                    <span id="outlook-events-status" style="font-size:.72rem;margin-left:8px;"></span>
                                </div>
                            </div>
                    </div>
                </div></div>
                <div class="acc-section">
                    <div class="acc-header" onclick="toggleAcc(this)"><h3><i class="fas fa-hard-drive"></i> Sauvegarde &amp; Synchronisation</h3><i class="fas fa-chevron-right acc-chevron"></i></div>
                    <div class="acc-body">
                    <div style="margin-bottom:18px;padding:16px;background:#f0f7ff;border:1px solid #c8ddf5;border-radius:10px;">
                        <div style="display:flex;align-items:center;gap:8px;margin-bottom:10px;">
                            <i class="fas fa-cloud" style="color:#3498db;font-size:1.1rem;"></i>
                            <strong style="font-size:.85rem;color:#2c3e50;">Synchronisation en ligne</strong>
                            <label class="toggle-switch" style="margin-left:auto;"><input type="checkbox" id="s-cloud-enabled" onchange="toggleCloudUI()"><span class="toggle-slider"></span></label>
                        </div>
                        <div id="cloud-opts" style="display:none;">
                            <div style="margin-bottom:12px;">
                                <label style="font-size:.78rem;font-weight:600;color:#333;display:block;margin-bottom:6px;">Fournisseur de stockage</label>
                                <div style="display:flex;gap:8px;flex-wrap:wrap;" id="cloud-provider-btns">
                                    <button class="cloud-prov-btn active" data-prov="jsonbin" onclick="selectCloudProvider('jsonbin')"><i class="fas fa-database" style="color:#3498db"></i> jsonbin.io<br><small>Gratuit • Simple</small></button>
                                    <button class="cloud-prov-btn" data-prov="gist" onclick="selectCloudProvider('gist')"><i class="fab fa-github" style="color:#333"></i> GitHub Gist<br><small>Gratuit • Illimité</small></button>
                                    <button class="cloud-prov-btn" data-prov="webdav" onclick="selectCloudProvider('webdav')"><i class="fas fa-server" style="color:#e67e22"></i> WebDAV / FTP<br><small>Serveur perso</small></button>
                                    <button class="cloud-prov-btn" data-prov="gdrive" onclick="selectCloudProvider('gdrive')"><i class="fab fa-google-drive" style="color:#0f9d58"></i> Google Drive<br><small>OAuth2</small></button>
                                    <button class="cloud-prov-btn" data-prov="localfolder" onclick="selectCloudProvider('localfolder')"><i class="fas fa-folder-open" style="color:#0078d4"></i> Dossier Local<br><small>OneDrive / GDrive / Dropbox</small></button>
                                </div>
                            </div>
                            <div id="cloud-cfg-jsonbin">
                                <small style="color:#666;display:block;margin-bottom:8px;line-height:1.4;"><a href="https://jsonbin.io/" target="_blank" style="color:#3498db;">jsonbin.io</a> — Créez un compte gratuit, copiez votre <b>X-Master-Key</b> depuis le dashboard.</small>
                                <div class="settings-grid">
                                    <div class="form-group"><label style="font-size:.72rem;">Clé API (X-Master-Key)</label><input type="password" id="s-cloud-key" placeholder="$2a$10$xxxxxxx..." style="padding:8px;border:1px solid #ddd;border-radius:8px;width:100%;font-size:.78rem;"></div>
                                    <div class="form-group"><label style="font-size:.72rem;">ID du Bin <small style="color:#aaa;">(auto-créé)</small></label><input type="text" id="s-cloud-bin" placeholder="Automatique au 1er envoi" style="padding:8px;border:1px solid #ddd;border-radius:8px;width:100%;font-size:.78rem;"></div>
                                </div>
                            </div>
                            <div id="cloud-cfg-gist" style="display:none;">
                                <small style="color:#666;display:block;margin-bottom:8px;line-height:1.4;"><a href="https://github.com/settings/tokens" target="_blank" style="color:#333;">GitHub</a> — Créez un <b>Personal Access Token</b> (scope <code>gist</code>). Stockage illimité et privé.</small>
                                <div class="settings-grid">
                                    <div class="form-group"><label style="font-size:.72rem;">Personal Access Token</label><input type="password" id="s-gist-token" placeholder="ghp_xxxxxxxxxxxx" style="padding:8px;border:1px solid #ddd;border-radius:8px;width:100%;font-size:.78rem;"></div>
                                    <div class="form-group"><label style="font-size:.72rem;">Gist ID <small style="color:#aaa;">(auto-créé)</small></label><input type="text" id="s-gist-id" placeholder="Automatique au 1er envoi" style="padding:8px;border:1px solid #ddd;border-radius:8px;width:100%;font-size:.78rem;"></div>
                                </div>
                            </div>
                            <div id="cloud-cfg-gdrive" style="display:none;">
                                <small style="color:#666;display:block;margin-bottom:8px;line-height:1.4;">Utilisez <b>Google Drive</b> pour stocker vos données. Nécessite le même Client ID OAuth2 que Google Agenda (ajouter le scope <code>drive.file</code>).</small>
                                <div class="settings-grid">
                                    <div class="form-group"><label style="font-size:.72rem;">Client ID OAuth2</label><input type="text" id="s-gdrive-clientid" placeholder="Même que Google Agenda" style="padding:8px;border:1px solid #ddd;border-radius:8px;width:100%;font-size:.78rem;"></div>
                                    <div class="form-group"><label style="font-size:.72rem;">File ID <small style="color:#aaa;">(auto-créé)</small></label><input type="text" id="s-gdrive-fileid" placeholder="Automatique au 1er envoi" style="padding:8px;border:1px solid #ddd;border-radius:8px;width:100%;font-size:.78rem;"></div>
                                </div>
                                <button class="backup-btn" onclick="gdriveAuth()" style="margin-top:8px;background:#0f9d58;color:#fff;border-color:#0f9d58;"><i class="fab fa-google"></i> Connecter Google Drive</button>
                                <span id="gdrive-auth-status" style="font-size:.72rem;color:#888;margin-left:8px;"></span>
                            </div>
                            <div id="cloud-cfg-localfolder" style="display:none;">
                                <div id="lf-mode-auto" style="display:none;">
                                    <small style="color:#666;display:block;margin-bottom:10px;line-height:1.4;"><b>Mode automatique</b> — Toutes vos données sont synchronisées en temps réel dans le dossier local choisi (OneDrive, Google Drive, Dropbox…).</small>
                                    <div style="display:flex;align-items:center;gap:10px;flex-wrap:wrap;margin-bottom:8px;">
                                        <button class="backup-btn" onclick="lfPickFolder()" style="background:#0078d4;color:#fff;border-color:#0078d4;" id="lf-pick-btn"><i class="fas fa-folder-open"></i> Choisir le dossier</button>
                                        <span id="lf-auto-status" style="font-size:.72rem;color:#888;"></span>
                                    </div>
                                    <div id="lf-auto-actions" style="display:none;margin-top:6px;">
                                        <div style="display:flex;gap:8px;flex-wrap:wrap;">
                                            <button class="backup-btn" onclick="lfForceSave()" style="background:#27ae60;color:#fff;border-color:#27ae60;font-size:.72rem;padding:6px 12px;"><i class="fas fa-save"></i> Forcer la sauvegarde</button>
                                            <button class="backup-btn" onclick="lfForceLoad()" style="background:#3498db;color:#fff;border-color:#3498db;font-size:.72rem;padding:6px 12px;"><i class="fas fa-sync"></i> Recharger depuis le fichier</button>
                                        </div>
                                    </div>
                                    <small style="color:#aaa;display:block;margin-top:8px;"><i class="fas fa-info-circle"></i> Le fichier <code>pilote_data.json</code> est automatiquement mis à jour dans le dossier sélectionné à chaque modification.</small>
                                </div>
                                <div id="lf-mode-manual">
                                    <small style="color:#666;display:block;margin-bottom:10px;line-height:1.4;">Sauvegardez vos données dans un fichier <code>pilote_data.json</code> que vous placez dans votre <b>dossier synchronisé</b> (OneDrive, Google Drive, Dropbox…).</small>
                                    <div style="display:flex;gap:10px;flex-wrap:wrap;margin-bottom:8px;">
                                        <button class="backup-btn" onclick="localFolderExport()" style="background:#0078d4;color:#fff;border-color:#0078d4;"><i class="fas fa-download"></i> Exporter</button>
                                        <label class="backup-btn" style="background:#27ae60;color:#fff;border-color:#27ae60;cursor:pointer;margin:0;"><i class="fas fa-upload"></i> Importer
                                            <input type="file" id="localfolder-import" accept=".json" style="display:none;" onchange="localFolderImport(this)">
                                        </label>
                                    </div>
                                    <span id="localfolder-status" style="font-size:.72rem;color:#888;display:block;margin-top:4px;"></span>
                                    <div style="background:#fffbea;border:1px solid #f0d060;border-radius:8px;padding:10px 12px;margin-top:10px;">
                                        <small style="color:#8a6d00;line-height:1.5;display:block;"><i class="fas fa-lightbulb" style="color:#f0a030;"></i> <b>Astuce — Synchronisation automatique :</b><br>
                                        Lancez un mini-serveur local pour activer l'écriture directe dans votre dossier :<br>
                                        <code style="background:#fff;padding:3px 8px;border-radius:4px;display:inline-block;margin:4px 0;user-select:all;cursor:pointer;" onclick="navigator.clipboard.writeText(this.textContent)" title="Cliquer pour copier">python3 -m http.server 8080</code><br>
                                        puis ouvrez <code style="user-select:all;cursor:pointer;" onclick="navigator.clipboard.writeText('http://localhost:8080/PILOTE_Suite.html')">http://localhost:8080/PILOTE_Suite.html</code></small>
                                    </div>
                                </div>
                            </div>
                            <div id="cloud-cfg-webdav" style="display:none;">
                                <small style="color:#666;display:block;margin-bottom:8px;line-height:1.4;">Connectez un serveur <b>WebDAV</b>
 (Nextcloud, OwnCloud, Synology, NAS…). Le protocole FTP natif n'est pas
 supporté par les navigateurs — utilisez un proxy WebDAV.</small>
                                <div class="settings-grid">
                                    <div class="form-group" style="grid-column:1/-1;"><label style="font-size:.72rem;">URL du serveur WebDAV</label><input type="text" id="s-webdav-url" placeholder="https://cloud.monserveur.fr/remote.php/dav/files/user/" style="padding:8px;border:1px solid #ddd;border-radius:8px;width:100%;font-size:.78rem;"></div>
                                    <div class="form-group"><label style="font-size:.72rem;">Identifiant</label><input type="text" id="s-webdav-user" placeholder="utilisateur" style="padding:8px;border:1px solid #ddd;border-radius:8px;width:100%;font-size:.78rem;"></div>
                                    <div class="form-group"><label style="font-size:.72rem;">Mot de passe</label><input type="password" id="s-webdav-pass" placeholder="••••••••" style="padding:8px;border:1px solid #ddd;border-radius:8px;width:100%;font-size:.78rem;"></div>
                                </div>
                            </div>
                            <div style="display:flex;gap:8px;flex-wrap:wrap;margin-top:12px;">
                                <button class="backup-btn" onclick="cloudPush()" style="background:#27ae60;color:#fff;border-color:#27ae60;"><i class="fas fa-cloud-arrow-up"></i> Envoyer</button>
                                <button class="backup-btn" onclick="cloudPull()" style="background:#3498db;color:#fff;border-color:#3498db;"><i class="fas fa-cloud-arrow-down"></i> Récupérer</button>
                            </div>
                            <div id="cloud-status" style="margin-top:8px;font-size:.72rem;color:#888;"></div>
                            <label style="display:flex;align-items:center;gap:6px;margin-top:10px;cursor:pointer;font-size:.75rem;color:#555;">
                                <input type="checkbox" id="s-cloud-auto" style="accent-color:#27ae60;"> Sync automatique à chaque sauvegarde
                            </label>
                        </div>
                    </div>
                    <div class="settings-backup">
                        <button class="backup-btn" onclick="exportSettings()"><i class="fas fa-download"></i> Exporter les paramètres</button>
                        <label class="backup-btn import-btn"><i class="fas fa-upload"></i> Importer des paramètres<input type="file" accept=".json" onchange="importSettings(this)"></label>
                    </div>
                    <div class="order-hint" style="margin-top:8px"><i class="fas fa-info-circle"></i>
 Exportez vos paramètres pour les conserver entre les versions. Le
fichier JSON contient identité, images, ordre et visibilité des modules.</div>
                </div></div>
            <div class="acc-section">
                    <div class="acc-header" onclick="toggleAcc(this)"><h3><i class="fas fa-newspaper" style="color:#e67e22"></i> Bulletin d'information</h3><i class="fas fa-chevron-right acc-chevron"></i></div>
                    <div class="acc-body">
                    <small style="color:#888;display:block;margin-bottom:12px">Paramètres du module Bulletin d'information.</small>
                    <div class="settings-grid">
                        <div class="form-group">
                            <label>Mise en page du PDF</label>
                            <select id="bib-layout" style="padding:8px 12px;border:1px solid #ddd;border-radius:8px;font-size:.85rem;width:100%;">
                                <option value="classic" selected="selected">Classique</option>
                                <option value="modern">Centré</option>
                                <option value="banner">Bandeau</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Police d'écriture</label>
                            <select id="bib-font" style="padding:8px 12px;border:1px solid #ddd;border-radius:8px;font-size:.85rem;width:100%;">
                                <option value="inter" selected="selected">Inter (Moderne, Sans Serif)</option>
                                <option value="serif">Merriweather (Classique, Serif)</option>
                                <option value="mono">Roboto Mono (Monospace)</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Signataire par défaut</label>
                            <select id="bib-signatory" style="padding:8px 12px;border:1px solid #ddd;border-radius:8px;font-size:.85rem;width:100%;">
                                <option value="L'équipe de direction" selected="selected">L'équipe de direction</option>
                                <option value="Le Chef d'établissement">Le Chef d'établissement</option>
                                <option value="Le Directeur adjoint">Le Directeur adjoint</option>
                                <option value="Le Proviseur">Le Proviseur</option>
                                <option value="Le Principal">Le Principal</option>
                                <option value="Tous">Tous</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Titre du document</label>
                            <input type="text" id="bib-doc-title" value="Bulletin d'information" style="padding:8px 12px;border:1px solid #ddd;border-radius:8px;font-size:.85rem;width:100%;">
                        </div>
                    </div>
                    <div style="margin-top:10px">
                        <div class="form-group">
                            <label>Note de pied de page (PDF)</label>
                            <input type="text" id="bib-doc-footer" placeholder="Ex: Document Interne - Ne pas diffuser" style="padding:8px 12px;border:1px solid #ddd;border-radius:8px;font-size:.85rem;width:100%;">
                        </div>
                    </div>
                </div></div>
                        </div>
            <div class="settings-footer">
                <button class="btn-settings btn-cancel" onclick="closeSettings()">Annuler</button>
                <button class="btn-settings btn-save" onclick="saveSettings()"><i class="fas fa-check"></i> Enregistrer</button>
            </div>
        </div>
    </div>

    <!-- ═══ CONTENT ═══ -->
    <div class="content-area" id="contentArea">
        <div class="welcome hidden" id="welcome">
            <div class="welcome-header">
                <div class="welcome-logo" id="welcomeLogo"><span id="welcomeLetter">P</span><img id="welcomeLogoImg" style="display:none"></div>
                <h1 class="welcome-title">Bienvenue sur CADIR</h1>
                <p class="welcome-subtitle" id="welcomeSubtitle">Suite d'outils pour la direction d'établissement</p>
            </div>
            <div class="module-grid" id="moduleGrid"><div class="module-card" data-m="perdir" onclick="loadModule('perdir')"><div class="module-icon"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="22" height="22"><rect x="3" y="10" width="18" height="11" rx="1"></rect><path d="M3 10l9-7 9 7"></path><line x1="12" y1="3" x2="12" y2="10"></line><rect x="7" y="14" width="3" height="7"></rect><rect x="14" y="14" width="3" height="7"></rect></svg></div><h3>ADMIN</h3><p>Direction &amp; pilotage</p></div><div class="module-card" data-m="exam" onclick="loadModule('exam')"><div class="module-icon"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="22" height="22"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="16" y1="13" x2="8" y2="13"></line><line x1="16" y1="17" x2="8" y2="17"></line><path d="M10 9H8"></path></svg></div><h3>Écrit</h3><p>Organisation d'épreuves écrites</p></div><div class="module-card" data-m="oral" onclick="loadModule('oral')"><div class="module-icon"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="22" height="22"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path></svg></div><h3>Oral</h3><p>Organisation d'épreuves orales</p></div><div class="module-card" data-m="aed" onclick="loadModule('aed')"><div class="module-icon"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="22" height="22"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle><path d="M18 8s2 2 0 5"></path></svg></div><h3>AED</h3><p>Assistants d'éducation</p></div><div class="module-card" data-m="bibase" onclick="loadModule('bibase')"><div class="module-icon"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="22" height="22"><path d="M4 22h16a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v16a4 4 0 0 1-4-4V6"></path><line x1="16" y1="6" x2="10" y2="6"></line><line x1="16" y1="10" x2="10" y2="10"></line><line x1="16" y1="14" x2="10" y2="14"></line></svg></div><h3>BULLETIN</h3><p>Bulletin d'information</p></div><div class="module-card" data-m="data" onclick="openDataPanel()"><div class="module-icon"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="22" height="22"><ellipse cx="12" cy="5" rx="9" ry="3"></ellipse><path d="M21 12c0 1.66-4 3-9 3s-9-1.34-9-3"></path><path d="M3 5v14c0 1.66 4 3 9 3s9-1.34 9-3V5"></path></svg></div><h3>DONNÉES</h3><p>Import élèves &amp; enseignants</p></div></div>
        </div>

        <!-- DATA PANEL -->
        <div class="data-panel" id="dataPanel">
            <div class="data-header">
                <h1><i class="fas fa-database"></i> Données</h1>
                <p>Importez vos listes d'enseignants et d'élèves. Les données seront partagées avec tous les modules.</p>
            </div>
            <div class="data-body">
                <div class="data-card">
                    <div class="data-card-header teachers">
                        <i class="fas fa-chalkboard-teacher"></i>
                        <h3>Enseignants</h3>
                        <span class="data-badge has-data" id="badge-teachers">Non chargé</span>
                    </div>
                    <div class="data-card-body">
                        <div class="data-actions" style="margin-bottom:12px">
                            <button class="data-btn data-btn-tpl" onclick="downloadTemplate('teachers')"><i class="fas fa-file-download"></i> Télécharger le modèle vierge</button>
                        </div>
                        <div class="excel-drop loaded" id="drop-teachers">
                            <input type="file" accept=".xlsx,.xls,.csv" multiple="" onchange="handleExcelImport(this,'teachers')">
                            <i class="fas fa-file-excel drop-icon"></i>
                            <div class="drop-label" id="lbl-teachers">Cliquez ou glissez un ou plusieurs fichiers Excel</div>
                            <div class="drop-hint">.xlsx, .xls ou .csv — plusieurs fichiers possibles</div>
                        </div>
                        <div class="data-actions" id="actions-teachers" style="display:none">
                            <button class="data-btn data-btn-view" onclick="togglePreview('teachers')"><i class="fas fa-table"></i> Voir / Masquer</button>
                            <button class="data-btn data-btn-clear" onclick="clearExcelData('teachers')"><i class="fas fa-trash"></i> Supprimer</button>
                        </div>
                        <div class="data-count" id="count-teachers"></div>
                        <div class="data-preview" id="preview-teachers" style="display:none"></div>
                    </div>
                </div>
                <div class="data-card">
                    <div class="data-card-header students">
                        <i class="fas fa-user-graduate"></i>
                        <h3>Élèves</h3>
                        <span class="data-badge has-data" id="badge-students">Non chargé</span>
                    </div>
                    <div class="data-card-body">
                        <div class="data-actions" style="margin-bottom:12px">
                            <button class="data-btn data-btn-tpl" onclick="downloadTemplate('students')"><i class="fas fa-file-download"></i> Télécharger le modèle vierge</button>
                        </div>
                        <div class="excel-drop loaded" id="drop-students">
                            <input type="file" accept=".xlsx,.xls,.csv" multiple="" onchange="handleExcelImport(this,'students')">
                            <i class="fas fa-file-excel drop-icon"></i>
                            <div class="drop-label" id="lbl-students">Cliquez ou glissez un ou plusieurs fichiers Excel</div>
                            <div class="drop-hint">.xlsx, .xls ou .csv — plusieurs fichiers possibles</div>
                        </div>
                        <div class="data-actions" id="actions-students" style="display:none">
                            <button class="data-btn data-btn-view" onclick="togglePreview('students')"><i class="fas fa-table"></i> Voir / Masquer</button>
                            <button class="data-btn data-btn-clear" onclick="clearExcelData('students')"><i class="fas fa-trash"></i> Supprimer</button>
                        </div>
                        <div class="data-count" id="count-students"></div>
                        <div class="data-preview" id="preview-students" style="display:none"></div>
                    </div>
                </div>
            </div>
        </div>

        <div class="loader-overlay" id="loader"><div class="loader-spinner"></div><div class="loader-text">Chargement du module…</div></div>
        <iframe class="module-frame active" id="frame-perdir" sandbox="allow-scripts allow-same-origin allow-popups allow-modals allow-downloads allow-forms" src="about:blank"></iframe>
        <iframe class="module-frame" id="frame-exam" sandbox="allow-scripts allow-same-origin allow-popups allow-modals allow-downloads allow-forms"></iframe>
        <iframe class="module-frame" id="frame-oral" sandbox="allow-scripts allow-same-origin allow-popups allow-modals allow-downloads allow-forms"></iframe>
        <iframe class="module-frame" id="frame-dhg" sandbox="allow-scripts allow-same-origin allow-popups allow-modals allow-downloads allow-forms"></iframe>
        <iframe class="module-frame" id="frame-aed" sandbox="allow-scripts allow-same-origin allow-popups allow-modals allow-downloads allow-forms"></iframe>
        <iframe class="module-frame" id="frame-bibase" sandbox="allow-scripts allow-same-origin allow-popups allow-modals allow-downloads allow-forms"></iframe>
    </div>

    <div class="bottom-bar">
        <div><span class="status-dot"></span>Tous les modules opérationnels</div>
        <div id="lf-sync-indicator" style="display:none;font-size:.7rem;color:#888;cursor:pointer;" onclick="lfForceSave()" title="Cliquer pour forcer la sauvegarde"><i class="fas fa-circle" style="color:#27ae60;font-size:.5rem;vertical-align:middle;margin-right:4px;"></i><span id="lf-sync-text">Synchronisé</span></div>
        <div id="bottomBarInfo">CADIR Suite — Direction</div>
    </div>

    <script>
    const MODULE_DATA = {"perdir": "PCFET0NUWVBFIGh0bWw+CjxodG1sIGxhbmc9ImZyIj4KPGhlYWQ+CiAgICA8bWV0YSBjaGFyc2V0PSJVVEYtOCI+CiAgICA8bWV0YSBuYW1lPSJ2aWV3cG9ydCIgY29udGVudD0id2lkdGg9ZGV2aWNlLXdpZHRoLCBpbml0aWFsLXNjYWxlPTEuMCI+CiAgICA8dGl0bGU+Q0FESVI8L3RpdGxlPgogICAgPGxpbmsgaHJlZj0iaHR0cHM6Ly9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvZm9udC1hd2Vzb21lLzYuNC4wL2Nzcy9hbGwubWluLmNzcyIgcmVsPSJzdHlsZXNoZWV0Ij4KICAgIDxzY3JpcHQgc3JjPSJodHRwczovL2Nkbi5qc2RlbGl2ci5uZXQvbnBtL2NoYXJ0LmpzIj48L3NjcmlwdD4KICAgIDxzdHlsZT4KICAgICAgICA6cm9vdCB7CiAgICAgICAgICAgIC0tcHJpbWFyeTogIzJjM2U1MDsKICAgICAgICAgICAgLS1zZWNvbmRhcnk6ICMzNDQ5NWU7CiAgICAgICAgICAgIC0tYWNjZW50OiAjYzAzOTJiOwogICAgICAgICAgICAtLWhlYWRlcjogIzJjM2U1MDsKICAgICAgICAgICAgLS1tZW51LXRleHQ6ICMxYWJjOWM7CiAgICAgICAgICAgIC0taGlnaGxpZ2h0OiAjZTc0YzNjOwogICAgICAgICAgICAtLXdhcm5pbmc6ICNmMzljMTI7CiAgICAgICAgICAgIC0tc3VjY2VzczogIzI3YWU2MDsKICAgICAgICAgICAgLS1pbmZvOiAjMjk4MGI5OwogICAgICAgICAgICAtLWxpZ2h0OiAjZWNmMGYxOwogICAgICAgICAgICAtLWZvbnQtbWFpbjogJ0FwdG9zJywgJ0NhbGlicmknLCAnVHJlYnVjaGV0IE1TJywgQXJpYWwsIHNhbnMtc2VyaWY7CiAgICAgICAgfQoKICAgICAgICAqIHsgYm94LXNpemluZzogYm9yZGVyLWJveDsgbWFyZ2luOiAwOyBwYWRkaW5nOiAwOyB9CiAgICAgICAgYm9keSB7IGZvbnQtZmFtaWx5OiB2YXIoLS1mb250LW1haW4pOyBiYWNrZ3JvdW5kLWNvbG9yOiAjZWVmMmY1OyBjb2xvcjogIzMzMzsgZGlzcGxheTogZmxleDsgaGVpZ2h0OiAxMDB2aDsgb3ZlcmZsb3c6IGhpZGRlbjsgfQoKICAgICAgICAvKiBTSURFQkFSICovCiAgICAgICAgLnNpZGViYXIgeyB3aWR0aDogMjgwcHg7IGJhY2tncm91bmQtY29sb3I6IHZhcigtLXByaW1hcnkpOyBjb2xvcjogd2hpdGU7IGRpc3BsYXk6IGZsZXg7IGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47IGZsZXgtc2hyaW5rOiAwOyB9CiAgICAgICAgLmJyYW5kIHsgcGFkZGluZzogMjVweCAyMHB4OyBmb250LXNpemU6IDEuMnJlbTsgZm9udC13ZWlnaHQ6IGJvbGQ7IHRleHQtYWxpZ246IGNlbnRlcjsgYmFja2dyb3VuZDogIzFhMjUyZjsgYm9yZGVyLWJvdHRvbTogMnB4IHNvbGlkIHZhcigtLW1lbnUtdGV4dCk7IH0KICAgICAgICAuYnJhbmQgc3BhbiB7IGNvbG9yOiB2YXIoLS1tZW51LXRleHQpOyBkaXNwbGF5OiBibG9jazsgZm9udC1zaXplOiAwLjhyZW07IG1hcmdpbi10b3A6IDVweDsgZm9udC13ZWlnaHQ6IG5vcm1hbDsgfQogICAgICAgIC5tZW51IHsgZmxleDogMTsgcGFkZGluZy10b3A6IDEwcHg7IG92ZXJmbG93LXk6IGF1dG87IH0KICAgICAgICAubWVudS1pdGVtIHsgcGFkZGluZzogMTVweCAyMHB4OyBjdXJzb3I6IHBvaW50ZXI7IHRyYW5zaXRpb246IDAuM3M7IGRpc3BsYXk6IGZsZXg7IGFsaWduLWl0ZW1zOiBjZW50ZXI7IGNvbG9yOiAjYmRjM2M3OyB0ZXh0LWRlY29yYXRpb246IG5vbmU7IGJvcmRlci1sZWZ0OiA0cHggc29saWQgdHJhbnNwYXJlbnQ7IGZvbnQtc2l6ZTogMC45cmVtOyB9CiAgICAgICAgLm1lbnUtaXRlbTpob3ZlciwgLm1lbnUtaXRlbS5hY3RpdmUgeyBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1zZWNvbmRhcnkpOyBjb2xvcjogd2hpdGU7IGJvcmRlci1sZWZ0LWNvbG9yOiB2YXIoLS1tZW51LXRleHQpOyB9CiAgICAgICAgLm1lbnUtaXRlbSBpIHsgd2lkdGg6IDMwcHg7IGZvbnQtc2l6ZTogMS4xcmVtOyBtYXJnaW4tcmlnaHQ6IDEwcHg7IH0KICAgICAgICAubWVudS1udW0geyBkaXNwbGF5Om5vbmU7IH0KICAgICAgICAubWVudS1zZXBhcmF0b3J7aGVpZ2h0OjFweDtiYWNrZ3JvdW5kOnJnYmEoMjU1LDI1NSwyNTUsLjE1KTttYXJnaW46OHB4IDEycHh9CiAgICAgICAgLmZvb3Rlci1pbmZvIHsgcGFkZGluZzogMTVweDsgZm9udC1zaXplOiAwLjdyZW07IHRleHQtYWxpZ246IGNlbnRlcjsgYm9yZGVyLXRvcDogMXB4IHNvbGlkICMzNDQ5NWU7IGNvbG9yOiAjN2Y4YzhkOyB9CgogICAgICAgIC8qIE1BSU4gKi8KICAgICAgICAubWFpbi1jb250ZW50IHsgZmxleDogMTsgb3ZlcmZsb3cteTogYXV0bzsgcGFkZGluZzogMzBweDsgZGlzcGxheTogZmxleDsgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsgfQogICAgICAgIC50b3AtYmFyIHsgZGlzcGxheTogZmxleDsganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOyBhbGlnbi1pdGVtczogY2VudGVyOyBtYXJnaW4tYm90dG9tOiAzMHB4OyBiYWNrZ3JvdW5kOiB3aGl0ZTsgcGFkZGluZzogMTVweCAyNXB4OyBib3JkZXItcmFkaXVzOiA4cHg7IGJveC1zaGFkb3c6IDAgMnB4IDEwcHggcmdiYSgwLDAsMCwwLjA1KTsgfQogICAgICAgIC5wYWdlLXRpdGxlIGgyIHsgY29sb3I6IHZhcigtLXNlY29uZGFyeSk7IG1hcmdpbjogMDsgfQogICAgICAgIC5zeXN0ZW0tc3RhdHVzIHsgZGlzcGxheTogZmxleDsgYWxpZ24taXRlbXM6IGNlbnRlcjsgZ2FwOiAyMHB4OyB9CiAgICAgICAgLnNhdmUtaW5kaWNhdG9yIHsgZm9udC1zaXplOiAwLjhyZW07IGNvbG9yOiB2YXIoLS1zdWNjZXNzKTsgZGlzcGxheTogbm9uZTsgYWxpZ24taXRlbXM6IGNlbnRlcjsgZ2FwOiA1cHg7IGZvbnQtd2VpZ2h0OiBib2xkOyB9CgogICAgICAgIC8qIFVJIEVMRU1FTlRTICovCiAgICAgICAgLmJ0biB7IHBhZGRpbmc6IDEwcHggMjBweDsgYm9yZGVyOiBub25lOyBib3JkZXItcmFkaXVzOiA1cHg7IGN1cnNvcjogcG9pbnRlcjsgZm9udC13ZWlnaHQ6IDYwMDsgdHJhbnNpdGlvbjogMC4yczsgZGlzcGxheTogaW5saW5lLWZsZXg7IGFsaWduLWl0ZW1zOiBjZW50ZXI7IGdhcDogOHB4OyBmb250LXNpemU6IDAuOXJlbTsgfQogICAgICAgIC5idG46aG92ZXIgeyBvcGFjaXR5OiAwLjk7IHRyYW5zZm9ybTogdHJhbnNsYXRlWSgtMXB4KTsgfQogICAgICAgIC5idG4tcHJpbWFyeSB7IGJhY2tncm91bmQtY29sb3I6IHZhcigtLXNlY29uZGFyeSk7IGNvbG9yOiB3aGl0ZTsgfQogICAgICAgIC5idG4tYWNjZW50IHsgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tYWNjZW50KTsgY29sb3I6IHdoaXRlOyB9CiAgICAgICAgLmJ0bi1zdWNjZXNzIHsgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tc3VjY2Vzcyk7IGNvbG9yOiB3aGl0ZTsgfQogICAgICAgIC5idG4taW5mbyB7IGJhY2tncm91bmQtY29sb3I6IHZhcigtLWluZm8pOyBjb2xvcjogd2hpdGU7IH0KICAgICAgICAuYnRuLWRhbmdlciB7IGJhY2tncm91bmQtY29sb3I6IHZhcigtLWhpZ2hsaWdodCk7IGNvbG9yOiB3aGl0ZTsgfQogICAgICAgIC5idG4td2FybmluZyB7IGJhY2tncm91bmQtY29sb3I6IHZhcigtLXdhcm5pbmcpOyBjb2xvcjogd2hpdGU7IH0KICAgICAgICAuYnRuLWRhcmsgeyBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1wcmltYXJ5KTsgY29sb3I6IHdoaXRlOyB9CiAgICAgICAgLmJ0bi13b3JkIHsgYmFja2dyb3VuZC1jb2xvcjogIzJiNTc5YTsgY29sb3I6IHdoaXRlOyB9IC8qIENvdWxldXIgV29yZCAqLwogICAgICAgIC5idG4tc20geyBwYWRkaW5nOiA1cHggMTBweDsgZm9udC1zaXplOiAwLjhyZW07IH0KICAgICAgICAuYnRuLWljb24geyBwYWRkaW5nOiA4cHg7IHdpZHRoOiAzNXB4OyBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsgfQoKICAgICAgICAuYnRuLXVwZGF0ZS1tb2RlIHsgYmFja2dyb3VuZC1jb2xvcjogI2YzOWMxMiAhaW1wb3J0YW50OyBjb2xvcjogd2hpdGUgIWltcG9ydGFudDsgYW5pbWF0aW9uOiBwdWxzZSAycyBpbmZpbml0ZTsgfQogICAgICAgIEBrZXlmcmFtZXMgcHVsc2UgeyAwJSB7IGJveC1zaGFkb3c6IDAgMCAwIDAgcmdiYSgyNDMsIDE1NiwgMTgsIDAuNCk7IH0gNzAlIHsgYm94LXNoYWRvdzogMCAwIDAgMTBweCByZ2JhKDI0MywgMTU2LCAxOCwgMCk7IH0gMTAwJSB7IGJveC1zaGFkb3c6IDAgMCAwIDAgcmdiYSgyNDMsIDE1NiwgMTgsIDApOyB9IH0KCiAgICAgICAgLnNlY3Rpb24geyBkaXNwbGF5OiBub25lOyBhbmltYXRpb246IGZhZGVJbiAwLjNzIGVhc2UtaW4tb3V0OyB9CiAgICAgICAgLnNlY3Rpb24uYWN0aXZlIHsgZGlzcGxheTogYmxvY2s7IH0KICAgICAgICAuZm9ybS1jYXJkIHsgYmFja2dyb3VuZDogd2hpdGU7IHBhZGRpbmc6IDMwcHg7IHBhZGRpbmctYm90dG9tOjEwcHg7CiAgICAgICAgLnNhdmUtYmFye3Bvc2l0aW9uOnN0aWNreTtib3R0b206MDtiYWNrZ3JvdW5kOmxpbmVhci1ncmFkaWVudCh0cmFuc3BhcmVudCwjZmZmIDE1JSk7cGFkZGluZzoxNXB4IDAgNXB4O3otaW5kZXg6MTA7dGV4dC1hbGlnbjpyaWdodDttYXJnaW4tdG9wOjIwcHg7fQogICAgICAgIC5zYXZlLWJhciAuYnRue2JveC1zaGFkb3c6MCAycHggOHB4IHJnYmEoMCwwLDAsMC4xNSk7Zm9udC1zaXplOi45cmVtO3BhZGRpbmc6MTBweCAyNHB4O30KIGJvcmRlci1yYWRpdXM6IDhweDsgYm94LXNoYWRvdzogMCA0cHggMTVweCByZ2JhKDAsMCwwLDAuMDUpOyB9CiAgICAgICAgLmZvcm0tZ3JpZCB7IGRpc3BsYXk6IGdyaWQ7IGdyaWQtdGVtcGxhdGUtY29sdW1uczogMWZyIDFmcjsgZ2FwOiAyMHB4OyBtYXJnaW4tYm90dG9tOiAyMHB4OyB9CiAgICAgICAgLmZvcm0tZnVsbCB7IG1hcmdpbi1ib3R0b206IDIwcHg7IH0KICAgICAgICAuZm9ybS1ncm91cCBsYWJlbCB7IGRpc3BsYXk6IGJsb2NrOyBtYXJnaW4tYm90dG9tOiA4cHg7IGZvbnQtd2VpZ2h0OiA2MDA7IGNvbG9yOiB2YXIoLS1zZWNvbmRhcnkpOyBmb250LXNpemU6IDAuOXJlbTsgfQogICAgICAgIC5mb3JtLWNvbnRyb2wgeyB3aWR0aDogMTAwJTsgcGFkZGluZzogMTJweDsgYm9yZGVyOiAycHggc29saWQgI2MwYzVjZTsgYm9yZGVyLXJhZGl1czogNnB4OyBmb250LWZhbWlseTogaW5oZXJpdDsgZm9udC1zaXplOiAwLjk1cmVtOyB0cmFuc2l0aW9uOiAwLjJzOyB9CiAgICAgICAgICAgIC5mb3JtLWNvbnRyb2w6Zm9jdXMgeyBib3JkZXItY29sb3I6IHZhcigtLWFjY2VudCk7IG91dGxpbmU6bm9uZTsgYm94LXNoYWRvdzowIDAgMCAzcHggcmdiYSg1MiwxNTIsMjE5LDAuMTUpOyB9CiAgICAgICAgLm11bHRpLXJvdyB7IGRpc3BsYXk6IGZsZXg7IGdhcDogMTBweDsgbWFyZ2luLWJvdHRvbTogMTBweDsgYWxpZ24taXRlbXM6IGNlbnRlcjsgfQogICAgICAgIC5tdWx0aS1yb3cgaW5wdXQgeyBmbGV4OiAxOyB9CiAgICAgICAgCiAgICAgICAgLyogQVRUQUNITUVOVFMgQVJFQSAqLwogICAgICAgIC5hdHRhY2htZW50cy1hcmVhIHsgYm9yZGVyOiAycHggZGFzaGVkICNiZGMzYzc7IGJhY2tncm91bmQ6ICNmOWY5Zjk7IHBhZGRpbmc6IDE1cHg7IGJvcmRlci1yYWRpdXM6IDZweDsgbWFyZ2luLXRvcDogMTBweDsgfQogICAgICAgIC5hdHRhY2htZW50LWxpc3QgeyBtYXJnaW4tdG9wOiAxMHB4OyBsaXN0LXN0eWxlOiBub25lOyB9CiAgICAgICAgLmF0dGFjaG1lbnQtaXRlbSB7IGRpc3BsYXk6IGZsZXg7IGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjsgYmFja2dyb3VuZDogd2hpdGU7IHBhZGRpbmc6IDhweDsgbWFyZ2luLWJvdHRvbTogNXB4OyBib3JkZXItcmFkaXVzOiA0cHg7IGJvcmRlci1sZWZ0OiAzcHggc29saWQgdmFyKC0taW5mbyk7IGZvbnQtc2l6ZTogMC44NXJlbTsgYWxpZ24taXRlbXM6IGNlbnRlcjsgfQogICAgICAgIC5maWxlLXdhcm5pbmcgeyBmb250LXNpemU6IDAuNzVyZW07IGNvbG9yOiAjZTc0YzNjOyBtYXJnaW4tdG9wOiA1cHg7IGZvbnQtc3R5bGU6IGl0YWxpYzsgfQoKICAgICAgICAvKiBEUkFHICYgRFJPUCAvIEtBTkJBTiAqLwogICAgICAgIC50b2RvLWdyaWQgeyBkaXNwbGF5OiBncmlkOyBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IDFmciAxZnI7IGdhcDogMjVweDsgfQogICAgICAgIC50b2RvLWJveCB7IGJhY2tncm91bmQ6IHdoaXRlOyBib3JkZXItcmFkaXVzOiA4cHg7IHBhZGRpbmc6IDIwcHg7IGJveC1zaGFkb3c6IDAgNHB4IDEwcHggcmdiYSgwLDAsMCwwLjA1KTsgYm9yZGVyLXRvcDogNXB4IHNvbGlkICNjY2M7IGRpc3BsYXk6IGZsZXg7IGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47IG1pbi1oZWlnaHQ6IDM1MHB4OyB9CiAgICAgICAgLnRvZG8tdXJnZW50IHsgYm9yZGVyLXRvcC1jb2xvcjogdmFyKC0taGlnaGxpZ2h0KTsgfSAudG9kby1wbGFuIHsgYm9yZGVyLXRvcC1jb2xvcjogdmFyKC0tcHJpbWFyeSk7IH0gLnRvZG8tcG9zc2libGUgeyBib3JkZXItdG9wLWNvbG9yOiB2YXIoLS1zdWNjZXNzKTsgfSAudG9kby1kZWxlZ2F0ZSB7IGJvcmRlci10b3AtY29sb3I6IHZhcigtLXdhcm5pbmcpOyB9CiAgICAgICAgLnRvZG8taGVhZGVyIHsgZGlzcGxheTogZmxleDsganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOyBhbGlnbi1pdGVtczogY2VudGVyOyBtYXJnaW4tYm90dG9tOiAxNXB4OyBib3JkZXItYm90dG9tOiAxcHggc29saWQgI2VlZTsgcGFkZGluZy1ib3R0b206IDEwcHg7IH0KICAgICAgICAudG9kby1pbnB1dC1ncm91cCB7IGRpc3BsYXk6IGZsZXg7IGdhcDogNXB4OyBtYXJnaW4tYm90dG9tOiAxNXB4OyB9CiAgICAgICAgLnRvZG8taW5wdXQtZ3JvdXAgaW5wdXQgeyBmbGV4OiAxOyBwYWRkaW5nOiA4cHg7IGJvcmRlcjogMXB4IHNvbGlkICNkZGQ7IGJvcmRlci1yYWRpdXM6IDRweDsgfQogICAgICAgIC50b2RvLWxpc3QgeyBsaXN0LXN0eWxlOiBub25lOyBmbGV4OiAxOyBvdmVyZmxvdy15OiBhdXRvOyBtYXgtaGVpZ2h0OiAzNTBweDsgcGFkZGluZzogNXB4OyBtaW4taGVpZ2h0OiAxMDBweDsgdHJhbnNpdGlvbjogMC4yczsgfQogICAgICAgIC50b2RvLWxpc3QuZHJhZy1vdmVyIHsgYmFja2dyb3VuZC1jb2xvcjogI2YwZjBmMDsgYm9yZGVyLXJhZGl1czogNHB4OyBvdXRsaW5lOiAycHggZGFzaGVkICNjY2M7IH0KICAgICAgICAvKiBTdHlsZSBhbcOpbGlvcsOpIHBvdXIgbGUgRHJhZyAmIERyb3AgKi8KICAgICAgICAudG9kby1pdGVtIHsgZGlzcGxheTogZmxleDsganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOyBhbGlnbi1pdGVtczogY2VudGVyOyBwYWRkaW5nOiAxMnB4OyBib3JkZXItYm90dG9tOiAxcHggc29saWQgI2Y0ZjRmNDsgYmFja2dyb3VuZDogd2hpdGU7IG1hcmdpbi1ib3R0b206IDhweDsgYm9yZGVyLXJhZGl1czogNHB4OyBjdXJzb3I6IGdyYWI7IGJvcmRlci1sZWZ0OiAzcHggc29saWQgI2VlZTsgYm94LXNoYWRvdzogMCAxcHggM3B4IHJnYmEoMCwwLDAsMC4wNSk7IH0KICAgICAgICAudG9kby1pdGVtOmFjdGl2ZSB7IGN1cnNvcjogZ3JhYmJpbmc7IH0KICAgICAgICAudG9kby1pdGVtLmRyYWctb3Zlci1pdGVtIHsgYm9yZGVyLXRvcDogMnB4IHNvbGlkIHZhcigtLW1lbnUtdGV4dCk7IG1hcmdpbi10b3A6IDE1cHg7IH0gLyogSW5kaWNhdGV1ciB2aXN1ZWwgZCdpbnNlcnRpb24gKi8KICAgICAgICAudG9kby1pdGVtIHNwYW5bY29udGVudGVkaXRhYmxlXSB7IGZsZXg6MTsgbWFyZ2luLXJpZ2h0OjEwcHg7IHBhZGRpbmc6MnB4OyBib3JkZXI6MXB4IHNvbGlkIHRyYW5zcGFyZW50OyB0cmFuc2l0aW9uOjAuMnM7IH0KICAgICAgICAudG9kby1pdGVtIHNwYW5bY29udGVudGVkaXRhYmxlXTpmb2N1cyB7IGJvcmRlci1ib3R0b20tY29sb3I6IHZhcigtLWFjY2VudCk7IG91dGxpbmU6bm9uZTsgYmFja2dyb3VuZDojZjlmYmZmOyB9CiAgICAgICAgLmZyb20tYWdlbmRhIHsgYmFja2dyb3VuZC1jb2xvcjogI2ZmZjhlMTsgYm9yZGVyLWxlZnQ6IDRweCBzb2xpZCAjZjFjNDBmOyB9CiAgICAgICAgLnRvZG8tYWN0aW9ucyBpIHsgY3Vyc29yOiBwb2ludGVyOyBjb2xvcjogI2JkYzNjNzsgdHJhbnNpdGlvbjogMC4yczsgbWFyZ2luLWxlZnQ6IDhweDsgfQogICAgICAgIC50b2RvLWFjdGlvbnMgaTpob3ZlciB7IGNvbG9yOiB2YXIoLS1hY2NlbnQpOyB9CiAgICAgICAgCiAgICAgICAgLnRvZG8tdG9kYXktem9uZSB7IG1hcmdpbi1ib3R0b206IDIwcHg7IHBhZGRpbmc6IDE1cHg7IGJhY2tncm91bmQ6ICNmZmYzZTA7IGJvcmRlcjogMnB4IHNvbGlkICNmMzljMTI7IGJvcmRlci1yYWRpdXM6IDhweDsgZGlzcGxheTogbm9uZTsgfQogICAgICAgIC50b2RvLXRvZGF5LXpvbmUuYWN0aXZlIHsgZGlzcGxheTogYmxvY2s7IGFuaW1hdGlvbjogZmFkZUluIDAuNXM7IH0KICAgICAgICAudG9kby10b2RheS1pdGVtIHsgYmFja2dyb3VuZDogd2hpdGU7IHBhZGRpbmc6IDEwcHg7IGJvcmRlci1yYWRpdXM6IDRweDsgYm9yZGVyLWxlZnQ6IDRweCBzb2xpZCAjZTc0YzNjOyBtYXJnaW4tYm90dG9tOiA1cHg7IGN1cnNvcjogZ3JhYjsgZGlzcGxheTogZmxleDsganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOyBhbGlnbi1pdGVtczogY2VudGVyOyBib3gtc2hhZG93OiAwIDJweCA0cHggcmdiYSgwLDAsMCwwLjA1KTsgfQoKICAgICAgICAvKiBDQUxFTkRBUiAqLwogICAgICAgIC5jYWxlbmRhci10YWJsZSB7IHdpZHRoOiAxMDAlOyBib3JkZXItY29sbGFwc2U6IGNvbGxhcHNlOyBiYWNrZ3JvdW5kOiB3aGl0ZTsgfQogICAgICAgIC5jYWxlbmRhci10YWJsZSB0aCB7IGJhY2tncm91bmQ6IHZhcigtLXNlY29uZGFyeSk7IGNvbG9yOiB3aGl0ZTsgcGFkZGluZzogMTJweDsgdGV4dC1hbGlnbjogbGVmdDsgfQogICAgICAgIC5jYWxlbmRhci10YWJsZSB0ZCB7IHBhZGRpbmc6IDEycHg7IGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjZWVlOyB9CiAgICAgICAgLnJvdy10b2RheSB7IGJhY2tncm91bmQtY29sb3I6ICNmZmY4ZTE7IGZvbnQtd2VpZ2h0OiBib2xkOyBib3JkZXItbGVmdDogNXB4IHNvbGlkICNlNzRjM2M7IH0gCgogICAgICAgIC8qIEVESVRPUiAqLwogICAgICAgIC5kb2MtZWRpdG9yIHsgYm9yZGVyOiAxcHggc29saWQgI2RkZDsgcGFkZGluZzogNDBweDsgYmFja2dyb3VuZDogd2hpdGU7IG1pbi1oZWlnaHQ6IDIwMHB4OyBib3JkZXItcmFkaXVzOiA0cHg7IGZvbnQtZmFtaWx5OiAnQXB0b3MnLCAnQ2FsaWJyaScsICdUcmVidWNoZXQgTVMnLCBBcmlhbCwgc2Fucy1zZXJpZjsgbGluZS1oZWlnaHQ6IDEuNjsgY29sb3I6IzAwMDsgYm94LXNoYWRvdzogaW5zZXQgMCAwIDEwcHggcmdiYSgwLDAsMCwwLjA1KTsgcmVzaXplOiB2ZXJ0aWNhbDsgb3ZlcmZsb3c6IGF1dG87IH0KICAgICAgICAuZG9jLWVkaXRvcjpmb2N1cyB7IG91dGxpbmU6IG5vbmU7IGJvcmRlci1jb2xvcjogdmFyKC0tYWNjZW50KTsgfQogICAgICAgIC5ub3Rlcy1lZGl0b3IgeyBtaW4taGVpZ2h0OiAxNTBweDsgYmFja2dyb3VuZDogI2ZmZmZmMDsgYm9yZGVyLWNvbG9yOiAjZTBlMGQwOyB9CiAgICAgICAgCiAgICAgICAgLyogREFTSEJPQVJEICovCiAgICAgICAgLmRhc2gta3BpLWdyaWQgeyBkaXNwbGF5OiBncmlkOyBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IHJlcGVhdCgzLCAxZnIpOyBnYXA6IDIwcHg7IG1hcmdpbi1ib3R0b206IDMwcHg7IH0KICAgICAgICAua3BpLWNhcmQgeyBiYWNrZ3JvdW5kOiB3aGl0ZTsgcGFkZGluZzogMjBweDsgYm9yZGVyLXJhZGl1czogMTBweDsgYm94LXNoYWRvdzogMCA0cHggNnB4IHJnYmEoMCwwLDAsMC4wNSk7IHRleHQtYWxpZ246IGNlbnRlcjsgYm9yZGVyLWJvdHRvbTogNHB4IHNvbGlkIHZhcigtLXNlY29uZGFyeSk7IGRpc3BsYXk6ZmxleDsgZmxleC1kaXJlY3Rpb246Y29sdW1uOyBqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyOyBhbGlnbi1pdGVtczpjZW50ZXI7IG1pbi1oZWlnaHQ6IDE0MHB4OyB9CiAgICAgICAgLmtwaS1udW0geyBmb250LXNpemU6IDNyZW07IGZvbnQtd2VpZ2h0OiBib2xkOyBjb2xvcjogdmFyKC0tc2Vjb25kYXJ5KTsgZGlzcGxheTogYmxvY2s7IG1hcmdpbjogMTBweCAwOyB9CiAgICAgICAgLmtwaS1sYWJlbCB7IGZvbnQtc2l6ZTogMC45cmVtOyB0ZXh0LXRyYW5zZm9ybTogdXBwZXJjYXNlOyBmb250LXdlaWdodDogYm9sZDsgY29sb3I6ICM3ZjhjOGQ7IH0KICAgICAgICAuY2hhcnRzLWdyaWQgeyBkaXNwbGF5OiBncmlkOyBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IDFmciAxZnI7IGdhcDogMjBweDsgbWFyZ2luLWJvdHRvbTogMzBweDsgfQogICAgICAgIC5jaGFydC1jb250YWluZXIgeyBiYWNrZ3JvdW5kOiB3aGl0ZTsgcGFkZGluZzogMjBweDsgYm9yZGVyLXJhZGl1czogMTBweDsgYm94LXNoYWRvdzogMCA0cHggNnB4IHJnYmEoMCwwLDAsMC4wNSk7IGhlaWdodDogMzUwcHg7IH0KICAgICAgICAudG9wLXN0dWRlbnRzLWxpc3QgeyBsaXN0LXN0eWxlOiBub25lOyBwYWRkaW5nOiAwOyB9CiAgICAgICAgLnRvcC1zdHVkZW50LWl0ZW0geyBkaXNwbGF5OiBmbGV4OyBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47IHBhZGRpbmc6IDhweCAwOyBib3JkZXItYm90dG9tOiAxcHggc29saWQgI2VlZTsgfQoKICAgICAgICAvKiBUQUJMRVMgKi8KICAgICAgICAuZGF0YS10YWJsZSB7IHdpZHRoOiAxMDAlOyBib3JkZXItY29sbGFwc2U6IGNvbGxhcHNlOyBiYWNrZ3JvdW5kOiB3aGl0ZTsgfQogICAgICAgIC5kYXRhLXRhYmxlIHRoIHsgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tc2Vjb25kYXJ5KTsgY29sb3I6IHdoaXRlOyBwYWRkaW5nOiAxNXB4OyB0ZXh0LWFsaWduOiBsZWZ0OyB9CiAgICAgICAgLmRhdGEtdGFibGUgdGQgeyBwYWRkaW5nOiAxNXB4OyBib3JkZXItYm90dG9tOiAxcHggc29saWQgI2VlZTsgfQogICAgICAgIC5iYWRnZSB7IHBhZGRpbmc6IDRweCA4cHg7IGJvcmRlci1yYWRpdXM6IDEycHg7IGZvbnQtc2l6ZTogMC43NXJlbTsgZm9udC13ZWlnaHQ6IGJvbGQ7IGNvbG9yOiB3aGl0ZTsgfQogICAgICAgIC5iZy1lbnQgeyBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1hY2NlbnQpOyB9IC5iZy1yZXUgeyBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1zdWNjZXNzKTsgfSAuYmctc3VpdmkgeyBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1pbmZvKTsgfSAuYmctZGlyIHsgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tcHJpbWFyeSk7IH0KCiAgICAgICAgLyogRklMVEVSUyAqLwogICAgICAgIC5maWx0ZXJzLWJhciB7IGRpc3BsYXk6IGZsZXg7IGdhcDogMTVweDsgYmFja2dyb3VuZDogd2hpdGU7IHBhZGRpbmc6IDE1cHg7IGJvcmRlci1yYWRpdXM6IDhweDsgbWFyZ2luLWJvdHRvbTogMjBweDsgYWxpZ24taXRlbXM6IGZsZXgtZW5kOyB9CgogICAgICAgIAogICAgICAgIC8qIOKVkOKVkOKVkCBQcm9jw6lkdXJlcyDilZDilZDilZAgKi8KICAgICAgICAucHJvYy1oZWFkZXJ7ZGlzcGxheTpmbGV4O2p1c3RpZnktY29udGVudDpzcGFjZS1iZXR3ZWVuO2FsaWduLWl0ZW1zOmNlbnRlcjttYXJnaW4tYm90dG9tOjE2cHh9CiAgICAgICAgLnByb2MtaGVhZGVyIGJ1dHRvbntiYWNrZ3JvdW5kOnZhcigtLWhlYWRlciwjMmMzZTUwKTtjb2xvcjojZmZmO2JvcmRlcjpub25lO3BhZGRpbmc6MTBweCAyMHB4O2JvcmRlci1yYWRpdXM6OHB4O2N1cnNvcjpwb2ludGVyO2ZvbnQtc2l6ZTouODVyZW07Zm9udC13ZWlnaHQ6NjAwO2JveC1zaGFkb3c6MCAycHggOHB4IHJnYmEoNDQsNjIsODAsLjMpfQogICAgICAgIC5wcm9jLWhlYWRlciBidXR0b246aG92ZXJ7b3BhY2l0eTouOTt0cmFuc2Zvcm06dHJhbnNsYXRlWSgtMXB4KX0KICAgICAgICAucHJvYy1saXN0e2Rpc3BsYXk6ZmxleDtmbGV4LWRpcmVjdGlvbjpjb2x1bW47Z2FwOjhweH0KICAgICAgICAucHJvYy1jYXJke2JhY2tncm91bmQ6I2ZmZjtib3JkZXItcmFkaXVzOjEwcHg7cGFkZGluZzoxMHB4IDE0cHg7ZGlzcGxheTpmbGV4O2FsaWduLWl0ZW1zOmNlbnRlcjtnYXA6MTBweDtjdXJzb3I6cG9pbnRlcjtib3gtc2hhZG93OjAgMXB4IDRweCByZ2JhKDAsMCwwLC4wNik7dHJhbnNpdGlvbjpib3gtc2hhZG93IC4xNXN9CiAgICAgICAgLnByb2MtY2FyZDpob3Zlcntib3gtc2hhZG93OjAgM3B4IDEycHggcmdiYSgwLDAsMCwuMTIpfQogICAgICAgIC5wcm9jLWNvZGV7ZGlzcGxheTppbmxpbmUtYmxvY2s7cGFkZGluZzo0cHggMTBweDtib3JkZXItcmFkaXVzOjZweDtmb250LXdlaWdodDo3MDA7Zm9udC1zaXplOi44cmVtO2NvbG9yOiNmZmY7bWluLXdpZHRoOjQ0cHg7dGV4dC1hbGlnbjpjZW50ZXJ9CiAgICAgICAgLnByb2MtY2FyZC1ib2R5e2ZsZXg6MTttaW4td2lkdGg6MH0KICAgICAgICAucHJvYy1jYXJkLXRpdGxle2ZvbnQtd2VpZ2h0OjYwMDtmb250LXNpemU6Ljg4cmVtO2NvbG9yOiMzMzN9CiAgICAgICAgLnByb2MtY2FyZC1tZXRhe2ZvbnQtc2l6ZTouNzJyZW07Y29sb3I6Izk5OTttYXJnaW4tdG9wOjJweH0KICAgICAgICAucHJvYy1jYXJkLWNhdHtkaXNwbGF5OmlubGluZS1ibG9jaztiYWNrZ3JvdW5kOiNmMGYwZjA7cGFkZGluZzoycHggOHB4O2JvcmRlci1yYWRpdXM6MTBweDtmb250LXNpemU6LjY4cmVtO2NvbG9yOiM2NjY7bWFyZ2luLWxlZnQ6NnB4fQogICAgICAgIC5wcm9jLWNhcmQtYWN0aW9uc3tkaXNwbGF5OmZsZXg7Z2FwOjZweH0KICAgICAgICAucHJvYy1jYXJkLWFjdGlvbnMgYnV0dG9ue2JhY2tncm91bmQ6bm9uZTtib3JkZXI6bm9uZTtjdXJzb3I6cG9pbnRlcjtwYWRkaW5nOjRweCA4cHg7Ym9yZGVyLXJhZGl1czo2cHg7Y29sb3I6Izg4ODtmb250LXNpemU6LjhyZW19CiAgICAgICAgLnByb2MtY2FyZC1hY3Rpb25zIGJ1dHRvbjpob3ZlcntiYWNrZ3JvdW5kOiNmMGYwZjA7Y29sb3I6IzMzM30KICAgICAgICAucHJvYy1maWx0ZXJze2Rpc3BsYXk6ZmxleDtmbGV4LXdyYXA6d3JhcDtnYXA6NnB4O21hcmdpbi1ib3R0b206MTRweH0KICAgICAgICAucHJvYy1maWx0ZXJzIGJ1dHRvbntib3JkZXI6MXB4IHNvbGlkICNkZGQ7YmFja2dyb3VuZDojZmZmO3BhZGRpbmc6NHB4IDEycHg7Ym9yZGVyLXJhZGl1czoxNnB4O2ZvbnQtc2l6ZTouNzJyZW07Y3Vyc29yOnBvaW50ZXI7Y29sb3I6IzY2Nn0KICAgICAgICAucHJvYy1maWx0ZXJzIGJ1dHRvbi5hY3RpdmV7YmFja2dyb3VuZDp2YXIoLS1oZWFkZXIsIzJjM2U1MCk7Y29sb3I6I2ZmZjtib3JkZXItY29sb3I6dHJhbnNwYXJlbnR9CiAgICAgICAgLnByb2Mtdmlld3tiYWNrZ3JvdW5kOiNmZmY7Ym9yZGVyLXJhZGl1czoxMnB4O292ZXJmbG93OmhpZGRlbjtib3gtc2hhZG93OjAgMnB4IDEwcHggcmdiYSgwLDAsMCwuMDgpO3dpZHRoOjEwMCU7Ym94LXNpemluZzpib3JkZXItYm94fQogICAgICAgIC5wcm9jLXZpZXctaGVhZGVye3BhZGRpbmc6MThweCAyMnB4O2NvbG9yOiNmZmZ9CiAgICAgICAgLnByb2Mtdmlldy1oZWFkZXIgaDJ7bWFyZ2luOjA7Zm9udC1zaXplOjEuMXJlbX0KICAgICAgICAucHJvYy12aWV3LWhlYWRlciAucHYtY29kZXtmb250LXNpemU6Ljg1cmVtO29wYWNpdHk6Ljg1O21hcmdpbi10b3A6MnB4fQogICAgICAgIC5wcm9jLXZpZXctYm9keXtwYWRkaW5nOjE2cHggMTJweH0KICAgICAgICAucHJvYy16b25le2JvcmRlci1sZWZ0OjNweCBzb2xpZCAjZGRkO3BhZGRpbmc6MTBweCAxNHB4O21hcmdpbjoxMHB4IDA7YmFja2dyb3VuZDojZmFmYWZhO2JvcmRlci1yYWRpdXM6MCA4cHggOHB4IDA7d2lkdGg6MTAwJTtib3gtc2l6aW5nOmJvcmRlci1ib3h9CiAgICAgICAgLnByb2Mtem9uZSBoNHtmb250LXNpemU6Ljc4cmVtO2ZvbnQtd2VpZ2h0OjYwMDtjb2xvcjojOTk5O21hcmdpbjowIDAgNnB4O3RleHQtdHJhbnNmb3JtOnVwcGVyY2FzZTtsZXR0ZXItc3BhY2luZzouNXB4fQogICAgICAgIC5wcm9jLXpvbmUtY29udGVudHtmb250LXNpemU6Ljg1cmVtO2xpbmUtaGVpZ2h0OjEuNTtjb2xvcjojNDQ0fQogICAgICAgIC5wcm9jLXpvbmUtY29udGVudCBwe21hcmdpbjo0cHggMH0KICAgICAgICAucHJvYy1pY29uLW1haWwsLnByb2MtaWNvbi1hbGVydCwucHJvYy1pY29uLWlkZWF7ZGlzcGxheTppbmxpbmUtYmxvY2s7d2lkdGg6MjBweDtoZWlnaHQ6MjBweDt0ZXh0LWFsaWduOmNlbnRlcjtsaW5lLWhlaWdodDoyMHB4O2JvcmRlci1yYWRpdXM6NTAlO2ZvbnQtc2l6ZTouNjVyZW07bWFyZ2luOjAgMnB4O3ZlcnRpY2FsLWFsaWduOm1pZGRsZX0KICAgICAgICAucHJvYy1pY29uLW1haWx7YmFja2dyb3VuZDojMzQ5OGRiO2NvbG9yOiNmZmZ9CiAgICAgICAgLnByb2MtaWNvbi1hbGVydHtiYWNrZ3JvdW5kOiNlNzRjM2M7Y29sb3I6I2ZmZn0KICAgICAgICAucHJvYy1pY29uLWlkZWF7YmFja2dyb3VuZDojZjM5YzEyO2NvbG9yOiNmZmZ9CgogICAgICAgIC8qIFBSSU5UIENPTkZJRyAqLwogICAgICAgIEBtZWRpYSBwcmludCB7CiAgICAgICAgICAgIC5zaWRlYmFyLCAubm8tcHJpbnQsIC50b3AtYmFyLCAuc2VjdGlvbiB7IGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDsgfQogICAgICAgICAgICBib2R5IHsgYmFja2dyb3VuZDogd2hpdGU7IGhlaWdodDogYXV0bzsgb3ZlcmZsb3c6IHZpc2libGU7IG1hcmdpbjogMDsgcGFkZGluZzogMDsgZm9udC1mYW1pbHk6ICdUaW1lcyBOZXcgUm9tYW4nLCBzZXJpZjsgY29sb3I6ICMwMDA7IC13ZWJraXQtcHJpbnQtY29sb3ItYWRqdXN0OiBleGFjdDsgfQogICAgICAgICAgICAubWFpbi1jb250ZW50IHsgcGFkZGluZzogMDsgbWFyZ2luOiAwOyB3aWR0aDogMTAwJTsgZGlzcGxheTogYmxvY2s7IH0KICAgICAgICAgICAgLnByaW50LWFyZWEgeyBkaXNwbGF5OiBibG9jayAhaW1wb3J0YW50OyB3aWR0aDogMTAwJTsgcG9zaXRpb246IHN0YXRpYzsgb3ZlcmZsb3c6IHZpc2libGUgIWltcG9ydGFudDsgfQogICAgICAgICAgICBAcGFnZSB7IHNpemU6IEE0OyBtYXJnaW46IDVtbSA1bW0gMTJtbSA1bW07IH0KICAgICAgICAgICAgLnByaW50LXBhZ2UgeyB3aWR0aDogMTAwJTsgbWFyZ2luOiAwOyBwYWRkaW5nOiAwOyBwYWdlLWJyZWFrLWFmdGVyOiBhbHdheXM7IG92ZXJmbG93OiBoaWRkZW47IH0KICAgICAgICAgICAgLnByaW50LXBhZ2U6bGFzdC1jaGlsZCB7IHBhZ2UtYnJlYWstYWZ0ZXI6IGF2b2lkOyB9CiAgICAgICAgICAgIC5vZmZpY2lhbC1oZWFkZXIgeyBkaXNwbGF5OiBmbGV4ICFpbXBvcnRhbnQ7IGZsZXgtZGlyZWN0aW9uOiByb3cgIWltcG9ydGFudDsganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuICFpbXBvcnRhbnQ7IGFsaWduLWl0ZW1zOiBmbGV4LXN0YXJ0OyBtYXJnaW4tYm90dG9tOiAyMHB4OyBib3JkZXItYm90dG9tOiAxLjVweCBzb2xpZCAjMDAwOyBwYWRkaW5nLWJvdHRvbTogMTVweDsgfQogICAgICAgICAgICAub2ZmaWNpYWwtcmlnaHQgeyB0ZXh0LWFsaWduOiByaWdodCAhaW1wb3J0YW50OyBmbGV4LXNocmluazogMDsgfQogICAgICAgICAgICAuc2Nob29sLW5hbWUgeyBmb250LXdlaWdodDogYm9sZDsgdGV4dC10cmFuc2Zvcm06IHVwcGVyY2FzZTsgZm9udC1zaXplOiAxLjJyZW07IH0KICAgICAgICAgICAgLm9mZmljaWFsLWxvZ28geyBtYXgtaGVpZ2h0OiA5MHB4OyBtYXgtd2lkdGg6IDE4MHB4OyBvYmplY3QtZml0OiBjb250YWluOyBkaXNwbGF5OiBibG9jayAhaW1wb3J0YW50OyAtd2Via2l0LXByaW50LWNvbG9yLWFkanVzdDogZXhhY3QgIWltcG9ydGFudDsgcHJpbnQtY29sb3ItYWRqdXN0OiBleGFjdCAhaW1wb3J0YW50OyB9CiAgICAgICAgICAgIC5vZmZpY2lhbC1wYXJ0aWNpcGFudHMgeyBiYWNrZ3JvdW5kOiAjZjRmNGY0ICFpbXBvcnRhbnQ7IHBhZGRpbmc6IDEycHg7IGJvcmRlcjogMXB4IHNvbGlkICNjY2M7IG1hcmdpbi1ib3R0b206IDIwcHg7IGZvbnQtc2l6ZTogMXJlbTsgfQogICAgICAgICAgICAub2ZmaWNpYWwtY29udGVudCB7IHRleHQtYWxpZ246IGp1c3RpZnk7IGxpbmUtaGVpZ2h0OiAxLjY7IGZvbnQtc2l6ZTogMS4xcmVtOyB9CiAgICAgICAgICAgIC5vZmZpY2lhbC1jb250ZW50IGltZywgLnByaW50LXBhZ2UgaW1nIHsgZGlzcGxheTogaW5saW5lLWJsb2NrICFpbXBvcnRhbnQ7IHZpc2liaWxpdHk6IHZpc2libGUgIWltcG9ydGFudDsgbWF4LWhlaWdodDogODBweDsgbWF4LXdpZHRoOiAxNjBweDsgLXdlYmtpdC1wcmludC1jb2xvci1hZGp1c3Q6IGV4YWN0ICFpbXBvcnRhbnQ7IHByaW50LWNvbG9yLWFkanVzdDogZXhhY3QgIWltcG9ydGFudDsgfQogICAgICAgICAgICAub2ZmaWNpYWwtZm9vdGVyIHsgbWFyZ2luLXRvcDogNDBweDsgdGV4dC1hbGlnbjogcmlnaHQ7IGZvbnQtc2l6ZTogMS4xcmVtOyB9CiAgICAgICAgICAgIC5zaWduYXR1cmUtaW1nIHsgbWF4LWhlaWdodDogNzBweDsgZGlzcGxheTogYmxvY2s7IG1hcmdpbi1sZWZ0OiBhdXRvOyB9CiAgICAgICAgICAgIC5hdHRhY2htZW50LXByaW50LWxpc3QgeyBtYXJnaW4tdG9wOiAyMHB4OyBib3JkZXItdG9wOiAxcHggZG90dGVkICNjY2M7IHBhZGRpbmctdG9wOiAxMHB4OyBmb250LXNpemU6IDAuOXJlbTsgfQogICAgICAgIH0KICAgICAgICAucHJpbnQtYXJlYSB7IGRpc3BsYXk6IG5vbmU7IH0KICAgICAgICBAa2V5ZnJhbWVzIGZhZGVJbiB7IGZyb20geyBvcGFjaXR5OiAwOyB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoMTBweCk7IH0gdG8geyBvcGFjaXR5OiAxOyB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoMCk7IH0gfQogICAgCiAgICAgICAgCiAgICAgICAgLyog4pWQ4pWQ4pWQIFVOSUZJRUQgQ0FMRU5EQVIgVjEyLjEzIOKVkOKVkOKVkCAqLwogICAgICAgIC51Y2FsLWhlYWRlcntkaXNwbGF5OmZsZXg7YWxpZ24taXRlbXM6Y2VudGVyO2dhcDo4cHg7bWFyZ2luLWJvdHRvbToxNnB4O2ZsZXgtd3JhcDp3cmFwO30KICAgICAgICAudWNhbC1uYXYtYnRue2JhY2tncm91bmQ6bm9uZTtib3JkZXI6MXB4IHNvbGlkICNkZGQ7Ym9yZGVyLXJhZGl1czo4cHg7cGFkZGluZzo4cHggMTJweDtjdXJzb3I6cG9pbnRlcjtmb250LXNpemU6LjlyZW07Y29sb3I6IzU1NTt0cmFuc2l0aW9uOmFsbCAuMTVzO30KICAgICAgICAudWNhbC1uYXYtYnRuOmhvdmVye2JhY2tncm91bmQ6I2Y1ZjVmNTtib3JkZXItY29sb3I6I2JiYjt9CiAgICAgICAgLnVjYWwtdGl0bGV7bWFyZ2luOjA7Zm9udC1zaXplOjEuMXJlbTtjb2xvcjojMmMzZTUwO21pbi13aWR0aDoxODBweDt0ZXh0LWFsaWduOmNlbnRlcjt9CiAgICAgICAgLnVjYWwtYnRuLXRvZGF5e2JhY2tncm91bmQ6I2ZmZjtib3JkZXI6MXB4IHNvbGlkICMzNDk4ZGI7Y29sb3I6IzM0OThkYjtib3JkZXItcmFkaXVzOjhweDtwYWRkaW5nOjdweCAxNHB4O2N1cnNvcjpwb2ludGVyO2ZvbnQtc2l6ZTouNzhyZW07Zm9udC13ZWlnaHQ6NjAwO3RyYW5zaXRpb246YWxsIC4xNXM7fQogICAgICAgIC51Y2FsLWJ0bi10b2RheTpob3ZlcntiYWNrZ3JvdW5kOiMzNDk4ZGI7Y29sb3I6I2ZmZjt9CiAgICAgICAgLnVjYWwtYnRuLWFkZHtiYWNrZ3JvdW5kOiMyN2FlNjA7Y29sb3I6I2ZmZjtib3JkZXI6bm9uZTtib3JkZXItcmFkaXVzOjhweDtwYWRkaW5nOjhweCAxNnB4O2N1cnNvcjpwb2ludGVyO2ZvbnQtc2l6ZTouNzhyZW07Zm9udC13ZWlnaHQ6NjAwO2Rpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXI7Z2FwOjZweDt9CiAgICAgICAgLnVjYWwtYnRuLWFkZDpob3ZlcntiYWNrZ3JvdW5kOiMyMTlhNTI7fQogICAgICAgIC51Y2FsLWJ0bi1yZWZyZXNoe2JhY2tncm91bmQ6bm9uZTtib3JkZXI6MXB4IHNvbGlkICM0Mjg1ZjQ7Y29sb3I6IzQyODVmNDtib3JkZXItcmFkaXVzOjhweDtwYWRkaW5nOjhweCAxMnB4O2N1cnNvcjpwb2ludGVyO2ZvbnQtc2l6ZTouNzhyZW07fQogICAgICAgIC51Y2FsLWJ0bi1yZWZyZXNoOmhvdmVye2JhY2tncm91bmQ6IzQyODVmNDtjb2xvcjojZmZmO30KICAgICAgICAudWNhbC1sZWdlbmR7ZGlzcGxheTpmbGV4O2dhcDoxMHB4O2ZvbnQtc2l6ZTouNjVyZW07Y29sb3I6Izg4ODthbGlnbi1pdGVtczpjZW50ZXI7ZmxleC13cmFwOndyYXA7fQogICAgICAgIC51Y2FsLWxlZ2VuZC1kb3R7d2lkdGg6MTBweDtoZWlnaHQ6MTBweDtib3JkZXItcmFkaXVzOjUwJTtkaXNwbGF5OmlubGluZS1ibG9jazttYXJnaW4tcmlnaHQ6M3B4O30KICAgICAgICAudWNhbC1kYXktZ3JvdXB7bWFyZ2luLWJvdHRvbTo0cHg7fQogICAgICAgIC51Y2FsLWRheS1oZHJ7Zm9udC1zaXplOi43OHJlbTtmb250LXdlaWdodDo3MDA7Y29sb3I6IzU1NTtwYWRkaW5nOjEwcHggMTRweCA0cHg7cG9zaXRpb246c3RpY2t5O3RvcDowO2JhY2tncm91bmQ6I2Y5ZmFmYjt6LWluZGV4OjI7dGV4dC10cmFuc2Zvcm06Y2FwaXRhbGl6ZTtib3JkZXItYm90dG9tOjFweCBzb2xpZCAjZWVlO30KICAgICAgICAudWNhbC1kYXktaGRyLmlzLXRvZGF5e2NvbG9yOiNlNjdlMjI7YmFja2dyb3VuZDojZmZmOGYwO30KICAgICAgICAudWNhbC1pdGVte2Rpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpmbGV4LXN0YXJ0O2dhcDoxMHB4O3BhZGRpbmc6MTBweCAxNHB4O2JvcmRlci1ib3R0b206MXB4IHNvbGlkICNmMGYwZjA7dHJhbnNpdGlvbjpiYWNrZ3JvdW5kIC4xcztjdXJzb3I6ZGVmYXVsdDt9CiAgICAgICAgLnVjYWwtaXRlbTpob3ZlcntiYWNrZ3JvdW5kOiNmOGY5ZmE7fQogICAgICAgIC51Y2FsLWRvdHt3aWR0aDoxMHB4O2hlaWdodDoxMHB4O2JvcmRlci1yYWRpdXM6NTAlO2ZsZXgtc2hyaW5rOjA7bWFyZ2luLXRvcDo1cHg7fQogICAgICAgIC51Y2FsLWxlZnR7ZGlzcGxheTpmbGV4O2ZsZXgtZGlyZWN0aW9uOmNvbHVtbjthbGlnbi1pdGVtczpmbGV4LXN0YXJ0O21pbi13aWR0aDo5MHB4O2ZsZXgtc2hyaW5rOjA7fQogICAgICAgIC51Y2FsLWluZm97ZmxleDoxO21pbi13aWR0aDowO30KICAgICAgICAudWNhbC1pdGVtLXRpdGxle2ZvbnQtc2l6ZTouODJyZW07Y29sb3I6IzJjM2U1MDtmb250LXdlaWdodDo1MDA7fQogICAgICAgIC51Y2FsLWl0ZW0tbWV0YXtmb250LXNpemU6LjY1cmVtO2NvbG9yOiNhYWE7bWFyZ2luLXRvcDoxcHg7fQogICAgICAgIC51Y2FsLWl0ZW0tdGltZXtmb250LXNpemU6LjcycmVtO2NvbG9yOiM4ODg7fQogICAgICAgIC51Y2FsLWl0ZW0tYWN0aW9uc3tkaXNwbGF5OmZsZXg7Z2FwOjFweDttYXJnaW4tdG9wOjRweDtvcGFjaXR5OjA7dHJhbnNpdGlvbjpvcGFjaXR5IC4xNXM7fQogICAgICAgIC51Y2FsLWl0ZW06aG92ZXIgLnVjYWwtaXRlbS1hY3Rpb25ze29wYWNpdHk6MTt9CiAgICAgICAgLnVjYWwtaXRlbS1hY3Rpb25zIGJ1dHRvbntiYWNrZ3JvdW5kOm5vbmU7Ym9yZGVyOm5vbmU7Y3Vyc29yOnBvaW50ZXI7cGFkZGluZzozcHggNnB4O2JvcmRlci1yYWRpdXM6NXB4O2ZvbnQtc2l6ZTouNjhyZW07Y29sb3I6I2JiYjt9CiAgICAgICAgLnVjYWwtaXRlbS1hY3Rpb25zIGJ1dHRvbjpob3ZlcntiYWNrZ3JvdW5kOiNlZWU7Y29sb3I6IzU1NTt9CiAgICAgICAgLnVjYWwtaXRlbS1hY3Rpb25zIGJ1dHRvbi5hY3QtZGVsOmhvdmVye2NvbG9yOiNlNzRjM2M7YmFja2dyb3VuZDojZmRmMGYwO30KICAgICAgICAudWNhbC1lbXB0eXt0ZXh0LWFsaWduOmNlbnRlcjtjb2xvcjojY2NjO3BhZGRpbmc6NTBweCAyMHB4O2ZvbnQtc2l6ZTouODVyZW07fQogICAgICAgIC51Y2FsLWVtcHR5IGl7Zm9udC1zaXplOjJyZW07ZGlzcGxheTpibG9jazttYXJnaW4tYm90dG9tOjEwcHg7fQogICAgICAgIC51Y2FsLWRlc3Qtb3B0e2Rpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXI7Z2FwOjZweDtwYWRkaW5nOjhweCAxNHB4O2JvcmRlcjoycHggc29saWQgI2UwZTBlMDtib3JkZXItcmFkaXVzOjhweDtjdXJzb3I6cG9pbnRlcjtmb250LXNpemU6Ljc4cmVtO2ZvbnQtd2VpZ2h0OjUwMDtjb2xvcjojNTU1O3RyYW5zaXRpb246YWxsIC4xNXM7fQogICAgICAgIC51Y2FsLWRlc3Qtb3B0OmhvdmVye2JvcmRlci1jb2xvcjojMzQ5OGRiO30KICAgICAgICAudWNhbC1kZXN0LW9wdC5hY3RpdmV7Ym9yZGVyLWNvbG9yOiMzNDk4ZGI7YmFja2dyb3VuZDojZWFmNGZlO2NvbG9yOiMyYzNlNTA7fQogICAgICAgIC51Y2FsLWRlc3Qtb3B0IGlucHV0e2Rpc3BsYXk6bm9uZTt9CiAgICAgICAgLnVjYWwtc3JjLWJhZGdle2ZvbnQtc2l6ZTouNTVyZW07cGFkZGluZzoxcHggNXB4O2JvcmRlci1yYWRpdXM6NHB4O2NvbG9yOiNmZmY7Zm9udC13ZWlnaHQ6NjAwO21hcmdpbi1sZWZ0OjZweDt9CgogICAgICAgIC8qIOKVkOKVkOKVkCBJTkxJTkUgTE9HTyDilZDilZDilZAgKi8KICAgICAgICAucnRlLWxvZ28taW1nIHsgbWF4LWhlaWdodDo2MHB4OyBtYXgtd2lkdGg6MTIwcHg7IHZlcnRpY2FsLWFsaWduOm1pZGRsZTsgZGlzcGxheTppbmxpbmUtYmxvY2sgIWltcG9ydGFudDsgLXdlYmtpdC1wcmludC1jb2xvci1hZGp1c3Q6ZXhhY3QgIWltcG9ydGFudDsgcHJpbnQtY29sb3ItYWRqdXN0OmV4YWN0ICFpbXBvcnRhbnQ7IH0KICAgICAgICAvKiDilZDilZDilZAgUklDSCBURVhUIEVESVRPUiDilZDilZDilZAgKi8KICAgICAgICAucnRlLXdyYXB7Ym9yZGVyOjFweCBzb2xpZCAjZGRkO2JvcmRlci1yYWRpdXM6OHB4O292ZXJmbG93OmhpZGRlbjtiYWNrZ3JvdW5kOiNmZmZ9CiAgICAgICAgLnJ0ZS1iYXJ7ZGlzcGxheTpmbGV4O2dhcDoycHg7cGFkZGluZzo0cHggNnB4O2JhY2tncm91bmQ6I2Y0ZjVmNztib3JkZXItYm90dG9tOjFweCBzb2xpZCAjZGRkfQogICAgICAgIC5ydGUtYmFyIGJ1dHRvbnt3aWR0aDoyOHB4O2hlaWdodDoyNnB4O2JvcmRlcjpub25lO2JvcmRlci1yYWRpdXM6NHB4O2JhY2tncm91bmQ6dHJhbnNwYXJlbnQ7Y3Vyc29yOnBvaW50ZXI7Zm9udC1zaXplOi43OHJlbTtjb2xvcjojNTU1O2Rpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXI7anVzdGlmeS1jb250ZW50OmNlbnRlcn0KICAgICAgICAucnRlLWJhciBidXR0b246aG92ZXJ7YmFja2dyb3VuZDojZTBlMGUwfQogICAgICAgIC5ydGUtc2Vwe2Rpc3BsYXk6aW5saW5lLWJsb2NrO3dpZHRoOjFweDtoZWlnaHQ6MTZweDtiYWNrZ3JvdW5kOiNkZGQ7bWFyZ2luOjAgM3B4O3ZlcnRpY2FsLWFsaWduOm1pZGRsZTt9CiAgICAgICAgLnJ0ZS1jb2xvci1wb3B7cG9zaXRpb246YWJzb2x1dGU7dG9wOjEwMCU7bGVmdDowO2JhY2tncm91bmQ6I2ZmZjtib3JkZXI6MXB4IHNvbGlkICNkZGQ7Ym9yZGVyLXJhZGl1czo4cHg7Ym94LXNoYWRvdzowIDRweCAxMnB4IHJnYmEoMCwwLDAsLjE1KTtwYWRkaW5nOjhweDtkaXNwbGF5OmZsZXg7Z2FwOjRweDtmbGV4LXdyYXA6d3JhcDt6LWluZGV4OjEwMDt3aWR0aDoxNjBweDt9CiAgICAgICAgLnJ0ZS1jb2xvci1zd3t3aWR0aDoyMHB4O2hlaWdodDoyMHB4O2JvcmRlci1yYWRpdXM6NHB4O2JvcmRlcjoxcHggc29saWQgI2RkZDtjdXJzb3I6cG9pbnRlcjt9CiAgICAgICAgLnJ0ZS1jb2xvci1zdzpob3Zlcnt0cmFuc2Zvcm06c2NhbGUoMS4yKTtib3gtc2hhZG93OjAgMCA0cHggcmdiYSgwLDAsMCwuMik7fQoKICAgICAgICAucnRlLWJvZHl7bWluLWhlaWdodDo4MHB4O292ZXJmbG93OmF1dG87cmVzaXplOnZlcnRpY2FsO3BhZGRpbmc6OHB4IDEwcHg7Zm9udC1zaXplOi44MnJlbTtsaW5lLWhlaWdodDoxLjU7b3V0bGluZTpub25lfQogICAgICAgIC5ydGUtYm9keSB1bCwucnRlLWJvZHkgb2x7bWFyZ2luOjRweCAwIDRweCAxOHB4O3BhZGRpbmc6MH0KCiAgICAgICAgCiAgICAgICAgLyog4pWQ4pWQ4pWQIEFVVE9DT01QTEVURSDDiUzDiFZFUyDilZDilZDilZAgKi8KICAgICAgICAuYWMtd3JhcHtwb3NpdGlvbjpyZWxhdGl2ZX0KICAgICAgICAuYWMtbGlzdHtwb3NpdGlvbjphYnNvbHV0ZTt0b3A6MTAwJTtsZWZ0OjA7cmlnaHQ6MDttYXgtaGVpZ2h0OjE4MHB4O292ZXJmbG93LXk6YXV0bztiYWNrZ3JvdW5kOiNmZmY7Ym9yZGVyOjFweCBzb2xpZCAjZGRkO2JvcmRlci10b3A6bm9uZTtib3JkZXItcmFkaXVzOjAgMCA4cHggOHB4O2JveC1zaGFkb3c6MCA0cHggMTJweCByZ2JhKDAsMCwwLC4xMik7ei1pbmRleDo5OTk7ZGlzcGxheTpub25lfQogICAgICAgIC5hYy1saXN0LnNob3d7ZGlzcGxheTpibG9ja30KICAgICAgICAuYWMtaXRlbXtwYWRkaW5nOjdweCAxMnB4O2ZvbnQtc2l6ZTouNzhyZW07Y3Vyc29yOnBvaW50ZXI7ZGlzcGxheTpmbGV4O2p1c3RpZnktY29udGVudDpzcGFjZS1iZXR3ZWVuO2FsaWduLWl0ZW1zOmNlbnRlcn0KICAgICAgICAuYWMtaXRlbTpob3ZlciwuYWMtaXRlbS5hY3RpdmV7YmFja2dyb3VuZDojZWFmNGZlfQogICAgICAgIC5hYy1pdGVtIC5hYy1jbGFzc2V7Zm9udC1zaXplOi42NXJlbTtjb2xvcjojODg4O2JhY2tncm91bmQ6I2YwZjBmMDtwYWRkaW5nOjFweCA2cHg7Ym9yZGVyLXJhZGl1czo0cHh9CgogICAgICAgIC8qIOKVkOKVkOKVkCBFVkVORU1FTlRTIChtZW51MTApIOKVkOKVkOKVkCAqLwogICAgICAgIC5ldi1oZWFkZXJ7ZGlzcGxheTpmbGV4O2FsaWduLWl0ZW1zOmNlbnRlcjtqdXN0aWZ5LWNvbnRlbnQ6c3BhY2UtYmV0d2VlbjttYXJnaW4tYm90dG9tOjE0cHg7ZmxleC13cmFwOndyYXA7Z2FwOjhweH0KICAgICAgICAuZXYtaGVhZGVyIGgye2NvbG9yOnZhcigtLWhlYWRlcik7Zm9udC1zaXplOjEuMDVyZW07ZGlzcGxheTpmbGV4O2FsaWduLWl0ZW1zOmNlbnRlcjtnYXA6OHB4O21hcmdpbjowfQogICAgICAgIC5ldi10b3B7ZGlzcGxheTpmbGV4O2dhcDoxMnB4O21hcmdpbi1ib3R0b206MTRweDtmbGV4LXdyYXA6d3JhcDthbGlnbi1pdGVtczpjZW50ZXJ9CiAgICAgICAgLmV2LWtwaXN7ZGlzcGxheTpmbGV4O2dhcDoxMHB4O2ZsZXg6MTtmbGV4LXdyYXA6d3JhcH0KICAgICAgICAuZXYta3Bpe2JhY2tncm91bmQ6I2ZmZjtib3JkZXI6MXB4IHNvbGlkICNlOGVhZWQ7Ym9yZGVyLXJhZGl1czoxMHB4O3BhZGRpbmc6MTBweCAxNnB4O3RleHQtYWxpZ246Y2VudGVyO21pbi13aWR0aDo5MHB4fQogICAgICAgIC5ldi1rcGkgLmt2e2ZvbnQtc2l6ZToxLjNyZW07Zm9udC13ZWlnaHQ6NzAwfS5ldi1rcGkgLmtse2ZvbnQtc2l6ZTouNjVyZW07Y29sb3I6Izg4ODttYXJnaW4tdG9wOjJweH0KICAgICAgICAuZXYtZmlsdGVyc3tkaXNwbGF5OmZsZXg7Z2FwOjhweDtmbGV4LXdyYXA6d3JhcDttYXJnaW4tYm90dG9tOjE0cHg7YWxpZ24taXRlbXM6Y2VudGVyfQogICAgICAgIC5ldi1maWx0ZXJzIHNlbGVjdCwuZXYtZmlsdGVycyBpbnB1dHtwYWRkaW5nOjZweCAxMHB4O2JvcmRlcjoxcHggc29saWQgI2RkZDtib3JkZXItcmFkaXVzOjhweDtmb250LXNpemU6Ljc4cmVtfQogICAgICAgIC5ldi1ncmlke2Rpc3BsYXk6Z3JpZDtncmlkLXRlbXBsYXRlLWNvbHVtbnM6cmVwZWF0KGF1dG8tZmlsbCxtaW5tYXgoMzIwcHgsMWZyKSk7Z2FwOjE0cHh9CiAgICAgICAgLmV2LWNhcmR7YmFja2dyb3VuZDojZmZmO2JvcmRlcjoxcHggc29saWQgI2U4ZWFlZDtib3JkZXItcmFkaXVzOjEwcHg7cGFkZGluZzoxNnB4O2JveC1zaGFkb3c6MCAxcHggNHB4IHJnYmEoMCwwLDAsLjA0KTt0cmFuc2l0aW9uOmFsbCAuMTVzO3Bvc2l0aW9uOnJlbGF0aXZlfQogICAgICAgIC5ldi1jYXJkOmhvdmVye2JveC1zaGFkb3c6MCA0cHggMTRweCByZ2JhKDAsMCwwLC4xKTt0cmFuc2Zvcm06dHJhbnNsYXRlWSgtMXB4KX0KICAgICAgICAuZXYtY2FyZC1oZHtkaXNwbGF5OmZsZXg7YWxpZ24taXRlbXM6ZmxleC1zdGFydDtnYXA6OHB4O21hcmdpbi1ib3R0b206OHB4fQogICAgICAgIC5ldi1jYXJkIGg0e2ZvbnQtc2l6ZTouODhyZW07Zm9udC13ZWlnaHQ6NzAwO2NvbG9yOiMyYzNlNTA7bWFyZ2luOjA7ZmxleDoxO2xpbmUtaGVpZ2h0OjEuM30KICAgICAgICAuZXYtY2FyZC1hY3Rze2Rpc3BsYXk6ZmxleDtnYXA6M3B4fQogICAgICAgIC5ldi1jYXJkLWFjdHMgYnV0dG9ue3dpZHRoOjI2cHg7aGVpZ2h0OjI2cHg7Ym9yZGVyOm5vbmU7Ym9yZGVyLXJhZGl1czo2cHg7Y3Vyc29yOnBvaW50ZXI7Zm9udC1zaXplOi43cmVtO2Rpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXI7anVzdGlmeS1jb250ZW50OmNlbnRlcjtiYWNrZ3JvdW5kOiNmMGYwZjA7Y29sb3I6Izg4OH0KICAgICAgICAuZXYtY2FyZC1hY3RzIGJ1dHRvbjpob3ZlcntiYWNrZ3JvdW5kOiNkZGQ7Y29sb3I6IzMzM30KICAgICAgICAuZXYtY2FyZC1tZXRhe2Rpc3BsYXk6ZmxleDtnYXA6MTBweDtmbGV4LXdyYXA6d3JhcDtmb250LXNpemU6LjdyZW07Y29sb3I6Izg4ODttYXJnaW4tYm90dG9tOjZweH0KICAgICAgICAuZXYtY2FyZC1tZXRhIHNwYW57ZGlzcGxheTpmbGV4O2FsaWduLWl0ZW1zOmNlbnRlcjtnYXA6M3B4fQogICAgICAgIC5ldi1jYXJkLWRlc2N7Zm9udC1zaXplOi43NnJlbTtjb2xvcjojNTU1O2xpbmUtaGVpZ2h0OjEuNDttYXgtaGVpZ2h0OjYwcHg7b3ZlcmZsb3c6aGlkZGVuO21hcmdpbi1ib3R0b206OHB4fQogICAgICAgIC5ldi1jYXJkLWZ0e2Rpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXI7Z2FwOjZweDtmbGV4LXdyYXA6d3JhcH0KICAgICAgICAuZXYtYmFkZ2V7cGFkZGluZzoycHggOHB4O2JvcmRlci1yYWRpdXM6MTBweDtmb250LXNpemU6LjZyZW07Zm9udC13ZWlnaHQ6NjAwO2NvbG9yOiNmZmZ9CiAgICAgICAgLmV2LWJhZGdlLnRvZG97YmFja2dyb3VuZDojZTc0YzNjfS5ldi1iYWRnZS5wcm9ncmVzc3tiYWNrZ3JvdW5kOiNmMzljMTJ9LmV2LWJhZGdlLmRvbmV7YmFja2dyb3VuZDojMjdhZTYwfS5ldi1iYWRnZS5ibG9ja2Vke2JhY2tncm91bmQ6Izk1YTVhNn0KICAgICAgICAuZXYtcGJhcntoZWlnaHQ6NHB4O2JhY2tncm91bmQ6I2VjZjBmMTtib3JkZXItcmFkaXVzOjRweDtvdmVyZmxvdzpoaWRkZW47ZmxleDoxO21pbi13aWR0aDo2MHB4fQogICAgICAgIC5ldi1wZmlsbHtoZWlnaHQ6MTAwJTtib3JkZXItcmFkaXVzOjRweH0KICAgICAgICAuZXYtdGFne3BhZGRpbmc6MXB4IDVweDtib3JkZXItcmFkaXVzOjZweDtmb250LXNpemU6LjU4cmVtO2JhY2tncm91bmQ6I2VlZjtjb2xvcjojNjY2fQogICAgICAgIC5ldi1hdHRhY2h7Zm9udC1zaXplOi42NnJlbTtjb2xvcjp2YXIoLS1oZWFkZXIpO2N1cnNvcjpwb2ludGVyO2Rpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXI7Z2FwOjNweH0KICAgICAgICAuZXYtYXR0YWNoOmhvdmVye3RleHQtZGVjb3JhdGlvbjp1bmRlcmxpbmV9CgogICAgICAgIC8qIOKVkOKVkOKVkCBHQU5UVCBUQUJMRSAobWVudTExKSDilZDilZDilZAgKi8KICAgICAgICAuZ3QtYmFye2Rpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXI7anVzdGlmeS1jb250ZW50OnNwYWNlLWJldHdlZW47bWFyZ2luLWJvdHRvbToxMnB4O2ZsZXgtd3JhcDp3cmFwO2dhcDo4cHg7cGFkZGluZzoxMnB4IDE2cHg7YmFja2dyb3VuZDojZmRmMmU5O2JvcmRlci1yYWRpdXM6MTBweDtib3JkZXI6MXB4IHNvbGlkICNmMGM0OWJ9CiAgICAgICAgLmd0LWJhciBoMntjb2xvcjojZDM1NDAwO2ZvbnQtc2l6ZToxLjA1cmVtO2Rpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXI7Z2FwOjhweDttYXJnaW46MH0KICAgICAgICAuZ3QtYmFyLWJ0bnN7ZGlzcGxheTpmbGV4O2dhcDo2cHh9CiAgICAgICAgLmd0LWJhci1idG5zIGJ1dHRvbntwYWRkaW5nOjZweCAxNHB4O2JvcmRlcjpub25lO2JvcmRlci1yYWRpdXM6NnB4O2ZvbnQtd2VpZ2h0OjYwMDtjdXJzb3I6cG9pbnRlcjtmb250LXNpemU6Ljc4cmVtO2Rpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXI7Z2FwOjVweH0KICAgICAgICAuZ3QtYnRuLWFkZHtiYWNrZ3JvdW5kOiNkMzU0MDA7Y29sb3I6I2ZmZn0uZ3QtYnRuLWFkZDpob3ZlcntiYWNrZ3JvdW5kOiNlNjdlMjJ9CiAgICAgICAgLmd0LWJ0bi1zZWN7YmFja2dyb3VuZDojZmZmO2NvbG9yOiM1NTU7Ym9yZGVyOjFweCBzb2xpZCAjY2NjfS5ndC1idG4tc2VjOmhvdmVye2JhY2tncm91bmQ6I2Y1ZjVmNX0KICAgICAgICAuZ3QtbmF2e2Rpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXI7Z2FwOjZweDttYXJnaW4tYm90dG9tOjEwcHg7ZmxleC13cmFwOndyYXB9CiAgICAgICAgLmd0LW5hdiBidXR0b257aGVpZ2h0OjI4cHg7Ym9yZGVyOjFweCBzb2xpZCAjZGRkO2JvcmRlci1yYWRpdXM6NXB4O2JhY2tncm91bmQ6I2ZmZjtjdXJzb3I6cG9pbnRlcjtmb250LXNpemU6LjcycmVtO3BhZGRpbmc6MCA4cHh9CiAgICAgICAgLmd0LW5hdiBidXR0b246aG92ZXJ7YmFja2dyb3VuZDojZjBmMGYwfQogICAgICAgIC5ndC1uYXYgc2VsZWN0e3BhZGRpbmc6NHB4IDhweDtib3JkZXI6MXB4IHNvbGlkICNkZGQ7Ym9yZGVyLXJhZGl1czo1cHg7Zm9udC1zaXplOi43NXJlbX0KICAgICAgICAuZ3Qtd3JhcHtvdmVyZmxvdy14OmF1dG87Ym9yZGVyOjFweCBzb2xpZCAjZGRkO2JvcmRlci1yYWRpdXM6OHB4O2JhY2tncm91bmQ6I2ZmZn0KICAgICAgICB0YWJsZS5ndHt3aWR0aDoxMDAlO2JvcmRlci1jb2xsYXBzZTpjb2xsYXBzZTt0YWJsZS1sYXlvdXQ6Zml4ZWR9CiAgICAgICAgLmd0IHRoe3BhZGRpbmc6NHB4IDJweDtmb250LXNpemU6LjYycmVtO2ZvbnQtd2VpZ2h0OjYwMDtjb2xvcjojNjY2O2JvcmRlci1ib3R0b206MXB4IHNvbGlkICNkZGQ7dGV4dC1hbGlnbjpjZW50ZXI7YmFja2dyb3VuZDojZjhmOGY4fQogICAgICAgIC5ndCB0aC5ndC1tb3tiYWNrZ3JvdW5kOiNlOGU4ZTg7Zm9udC1zaXplOi42OHJlbTtjb2xvcjojNDQ0O2JvcmRlci1yaWdodDoxcHggc29saWQgI2RkZH0KICAgICAgICAuZ3QgdGguZ3QtbGN7bWluLXdpZHRoOjI3MHB4O3dpZHRoOjI3MHB4O3RleHQtYWxpZ246bGVmdDtwYWRkaW5nLWxlZnQ6MTBweH0KICAgICAgICAuZ3QgdGguZ3QtY2N7d2lkdGg6NTBweDt0ZXh0LWFsaWduOmNlbnRlcn0uZ3QgdGguZ3QtZGN7d2lkdGg6NTVweDt0ZXh0LWFsaWduOmNlbnRlcn0KICAgICAgICAuZ3QgdGguZ3QtY3d7YmFja2dyb3VuZDojZDM1NDAwO2NvbG9yOiNmZmZ9CiAgICAgICAgLmd0IHRoLmd0LXZhe2JhY2tncm91bmQ6cmVwZWF0aW5nLWxpbmVhci1ncmFkaWVudCg0NWRlZywjZjBmMGYwLCNmMGYwZjAgM3B4LCNlOGU4ZTggM3B4LCNlOGU4ZTggNnB4KX0KICAgICAgICAuZ3QgdGR7cGFkZGluZzowO2hlaWdodDoyOHB4O2JvcmRlci1ib3R0b206MXB4IHNvbGlkICNmMGYwZjA7Ym9yZGVyLXJpZ2h0OjFweCBzb2xpZCAjZjhmOGY4O3Bvc2l0aW9uOnJlbGF0aXZlfQogICAgICAgIC5ndCB0ZC5ndC1sYXtmb250LXNpemU6Ljc0cmVtO2ZvbnQtd2VpZ2h0OjUwMDtjb2xvcjojMzMzO3BhZGRpbmctbGVmdDoxMHB4O3doaXRlLXNwYWNlOm5vd3JhcDtvdmVyZmxvdzpoaWRkZW47dGV4dC1vdmVyZmxvdzplbGxpcHNpcztjdXJzb3I6cG9pbnRlcjtib3JkZXItcmlnaHQ6MXB4IHNvbGlkICNlZWV9CiAgICAgICAgLmd0IHRkLmd0LWxhOmhvdmVye2NvbG9yOiNkMzU0MDA7dGV4dC1kZWNvcmF0aW9uOnVuZGVybGluZX0KICAgICAgICAuZ3QgdGQuZ3QtY297Zm9udC1zaXplOi43cmVtO2ZvbnQtd2VpZ2h0OjcwMDt0ZXh0LWFsaWduOmNlbnRlcjtjb2xvcjojZDM1NDAwO2JvcmRlci1yaWdodDoxcHggc29saWQgI2VlZX0KICAgICAgICAuZ3QgdGQuZ3QtY2t7dGV4dC1hbGlnbjpjZW50ZXI7Ym9yZGVyLXJpZ2h0OjFweCBzb2xpZCAjZWVlfQogICAgICAgIC5ndCB0ZC5ndC12YXtiYWNrZ3JvdW5kOnJlcGVhdGluZy1saW5lYXItZ3JhZGllbnQoNDVkZWcsI2YwZjBmMCwjZjBmMGYwIDNweCwjZThlOGU4IDNweCwjZThlOGU4IDZweCkhaW1wb3J0YW50fQogICAgICAgIC5ndC1jZntwb3NpdGlvbjphYnNvbHV0ZTtpbnNldDozcHggMXB4O2JvcmRlci1yYWRpdXM6M3B4fQogICAgICAgIC5ndC1jZi5kb25le29wYWNpdHk6LjR9CiAgICAgICAgLmd0LWNmLmMtcmVudHJlZXtiYWNrZ3JvdW5kOiM1ZGFkZTJ9Lmd0LWNmLmMtZXhhbWVuc3tiYWNrZ3JvdW5kOiMyZTg2YzF9CiAgICAgICAgLmd0LWNmLmMtb3JpZW50YXRpb257YmFja2dyb3VuZDojMWE1Mjc2fS5ndC1jZi5jLWNvbnNlaWxze2JhY2tncm91bmQ6IzI0NzFhM30KICAgICAgICAuZ3QtY2YuYy1hZG1pbntiYWNrZ3JvdW5kOiMxNDhmNzd9Lmd0LWNmLmMtYXV0cmV7YmFja2dyb3VuZDojNWI2ZDVifQogICAgICAgIC5ndC1jZi5jLXBlZGFnb2d7YmFja2dyb3VuZDojOGU0NGFkfS5ndC1jZi5jLXJoe2JhY2tncm91bmQ6I2MwMzkyYn0KICAgICAgICAuZ3QtbGVne2Rpc3BsYXk6ZmxleDtnYXA6MTJweDtmbGV4LXdyYXA6d3JhcDttYXJnaW4tdG9wOjhweDtwYWRkaW5nOjRweCAwfQogICAgICAgIC5ndC1sZWcgc3BhbntkaXNwbGF5OmZsZXg7YWxpZ24taXRlbXM6Y2VudGVyO2dhcDo0cHg7Zm9udC1zaXplOi42OHJlbTtjb2xvcjojNjY2fQogICAgICAgIC5ndC1sZWcgaXt3aWR0aDoxMnB4O2hlaWdodDo4cHg7Ym9yZGVyLXJhZGl1czoycHg7ZGlzcGxheTppbmxpbmUtYmxvY2t9CgogICAgICAgIC8qIOKVkOKVkOKVkCBNT0RBTFMg4pWQ4pWQ4pWQICovCiAgICAgICAgLm0tb3Z7ZGlzcGxheTpub25lO3Bvc2l0aW9uOmZpeGVkO2luc2V0OjA7YmFja2dyb3VuZDpyZ2JhKDAsMCwwLC40KTt6LWluZGV4Ojk5OTk7YWxpZ24taXRlbXM6Y2VudGVyO2p1c3RpZnktY29udGVudDpjZW50ZXJ9CiAgICAgICAgLm0tb3Yub3BlbntkaXNwbGF5OmZsZXh9CiAgICAgICAgLm0tYm94e2JhY2tncm91bmQ6I2ZmZjtib3JkZXItcmFkaXVzOjE0cHg7cGFkZGluZzoyNnB4O21heC13aWR0aDo5NXZ3O21heC1oZWlnaHQ6OTB2aDtvdmVyZmxvdy15OmF1dG87Ym94LXNoYWRvdzowIDIwcHggNjBweCByZ2JhKDAsMCwwLC4yNSl9CiAgICAgICAgLm0tYm94IGgze21hcmdpbjowIDAgMTZweDtkaXNwbGF5OmZsZXg7YWxpZ24taXRlbXM6Y2VudGVyO2dhcDo4cHh9Lm0tYm94IGgzIGl7Y29sb3I6dmFyKC0taGVhZGVyKX0KICAgICAgICAubS1yb3d7ZGlzcGxheTpncmlkO2dyaWQtdGVtcGxhdGUtY29sdW1uczoxZnIgMWZyO2dhcDoxMnB4O21hcmdpbi1ib3R0b206MTJweH0KICAgICAgICAubS1hY3Rze2Rpc3BsYXk6ZmxleDtnYXA6OHB4O2p1c3RpZnktY29udGVudDpmbGV4LWVuZDttYXJnaW4tdG9wOjEycHh9CiAgICAgICAgLm1ie3BhZGRpbmc6OHB4IDE4cHg7Ym9yZGVyOm5vbmU7Ym9yZGVyLXJhZGl1czo4cHg7Y3Vyc29yOnBvaW50ZXI7Zm9udC13ZWlnaHQ6NjAwO2ZvbnQtc2l6ZTouOHJlbTtkaXNwbGF5OmZsZXg7YWxpZ24taXRlbXM6Y2VudGVyO2dhcDo1cHh9CiAgICAgICAgLm1iLWN7YmFja2dyb3VuZDojZjBmMGYwO2NvbG9yOiM1NTU7cGFkZGluZzoxMHB4IDIwcHg7Zm9udC1zaXplOi44NXJlbTtib3JkZXItcmFkaXVzOjhweH0ubWItb2t7YmFja2dyb3VuZDp2YXIoLS1oZWFkZXIpO2NvbG9yOiNmZmY7Zm9udC1zaXplOi45cmVtO3BhZGRpbmc6MTBweCAyNHB4O2JveC1zaGFkb3c6MCAycHggOHB4IHJnYmEoNDQsNjIsODAsLjMpO3RyYW5zaXRpb246dHJhbnNmb3JtIC4xcyxib3gtc2hhZG93IC4xc30ubWItb2s6aG92ZXJ7dHJhbnNmb3JtOnRyYW5zbGF0ZVkoLTFweCk7Ym94LXNoYWRvdzowIDRweCAxMnB4IHJnYmEoNDQsNjIsODAsLjQpfQogICAgICAgIC5tYi1kZWx7YmFja2dyb3VuZDojZTc0YzNjO2NvbG9yOiNmZmY7bWFyZ2luLXJpZ2h0OmF1dG99CgogICAgICAgIEBtZWRpYSBwcmludHsKICAgICAgICAgICAgLnNpZGViYXIsLmd0LWJhci1idG5zLC5ndC1uYXYsLmd0LWxlZywuZ3QtY2ssLmV2LWhlYWRlciwuZXYtdG9wLC5ldi1maWx0ZXJzLC5ldi1jYXJkLWFjdHMsLm5vLXByaW50e2Rpc3BsYXk6bm9uZSFpbXBvcnRhbnR9CiAgICAgICAgICAgIC5jb250ZW50e21hcmdpbi1sZWZ0OjAhaW1wb3J0YW50O3BhZGRpbmc6OHB4IWltcG9ydGFudH0KICAgICAgICAgICAgLmd0LXdyYXB7Ym9yZGVyOjFweCBzb2xpZCAjOTk5O21heC1oZWlnaHQ6bm9uZSFpbXBvcnRhbnQ7b3ZlcmZsb3c6dmlzaWJsZSFpbXBvcnRhbnR9CiAgICAgICAgICAgIC5ndCB0ZCwuZ3QgdGh7Ym9yZGVyOjFweCBzb2xpZCAjY2NjIWltcG9ydGFudH0KICAgICAgICAgICAgLmd0LWNme3ByaW50LWNvbG9yLWFkanVzdDpleGFjdDstd2Via2l0LXByaW50LWNvbG9yLWFkanVzdDpleGFjdH0KICAgICAgICB9CgogICAgCi8qIOKUgOKUgCBHb29nbGUgQ2FsZW5kYXIgZHVhbCB2aWV3IOKUgOKUgCAqLwouZ2NhbC1iYW5uZXJ7YmFja2dyb3VuZDpsaW5lYXItZ3JhZGllbnQoMTM1ZGVnLCM0Mjg1ZjQsIzM0YTg1Myk7Y29sb3I6I2ZmZjtwYWRkaW5nOjE0cHggMThweDtib3JkZXItcmFkaXVzOjEycHg7ZGlzcGxheTpmbGV4O2FsaWduLWl0ZW1zOmNlbnRlcjtnYXA6MTJweDttYXJnaW4tYm90dG9tOjE2cHg7Zm9udC1zaXplOi44NXJlbTt9Ci5nY2FsLWJhbm5lciBpe2ZvbnQtc2l6ZToxLjNyZW07fQouZ2NhbC1iYW5uZXIgLmdjYWwtc3RhdHVze2ZvbnQtd2VpZ2h0OjYwMDt9Ci5nY2FsLWJhbm5lciAuZ2NhbC1zdWJ7b3BhY2l0eTouODU7Zm9udC1zaXplOi43MnJlbTt9Ci5nY2FsLW9mZmxpbmUtYmFubmVye2JhY2tncm91bmQ6I2YwZjBmMDtjb2xvcjojNTU1O3BhZGRpbmc6MTRweCAxOHB4O2JvcmRlci1yYWRpdXM6MTJweDtkaXNwbGF5OmZsZXg7YWxpZ24taXRlbXM6Y2VudGVyO2dhcDoxMnB4O21hcmdpbi1ib3R0b206MTZweDtmb250LXNpemU6Ljg1cmVtO30KLmdjYWwtb2ZmbGluZS1iYW5uZXIgaXtmb250LXNpemU6MS4zcmVtO2NvbG9yOiM5OTk7fQouZ2NhbC1ldnQtbGlzdHttYXgtaGVpZ2h0OjYwdmg7b3ZlcmZsb3cteTphdXRvO30KLmdjYWwtZGF5LWdyb3Vwe21hcmdpbi1ib3R0b206MTRweDt9Ci5nY2FsLWRheS1oZWFkZXJ7Zm9udC13ZWlnaHQ6NzAwO2ZvbnQtc2l6ZTouODJyZW07Y29sb3I6IzMzMztwYWRkaW5nOjZweCAwO2JvcmRlci1ib3R0b206MnB4IHNvbGlkICNlMGUwZTA7bWFyZ2luLWJvdHRvbTo2cHg7cG9zaXRpb246c3RpY2t5O3RvcDowO2JhY2tncm91bmQ6I2ZmZjt6LWluZGV4OjE7fQouZ2NhbC1kYXktaGVhZGVyLmlzLXRvZGF5e2NvbG9yOiNlNjdlMjI7Ym9yZGVyLWJvdHRvbS1jb2xvcjojZTY3ZTIyO30KLmdjYWwtaXRlbXtkaXNwbGF5OmZsZXg7YWxpZ24taXRlbXM6ZmxleC1zdGFydDtnYXA6MTBweDtwYWRkaW5nOjdweCAxMHB4O2JvcmRlci1yYWRpdXM6OHB4O2ZvbnQtc2l6ZTouOHJlbTt0cmFuc2l0aW9uOmJhY2tncm91bmQgLjE1czt9Ci5nY2FsLWl0ZW06aG92ZXJ7YmFja2dyb3VuZDojZjVmNWY1O30KLmdjYWwtaXRlbSAuZ2NhbC1kb3R7d2lkdGg6MTBweDtoZWlnaHQ6MTBweDtib3JkZXItcmFkaXVzOjUwJTtmbGV4LXNocmluazowO21hcmdpbi10b3A6M3B4O30KLmdjYWwtaXRlbSAuZ2NhbC10aW1le2ZvbnQtd2VpZ2h0OjYwMDtjb2xvcjojNTU1O21pbi13aWR0aDo0OHB4O2ZvbnQtc2l6ZTouNzVyZW07fQouZ2NhbC1pdGVtIC5nY2FsLXRpdGxle2ZsZXg6MTtjb2xvcjojMjIyO30KLmdjYWwtaXRlbSAuZ2NhbC1jYWwtbmFtZXtmb250LXNpemU6LjY1cmVtO2NvbG9yOiM5OTk7bWFyZ2luLXRvcDoxcHg7fQouZ2NhbC1uYXZ7ZGlzcGxheTpmbGV4O2FsaWduLWl0ZW1zOmNlbnRlcjtnYXA6OHB4O21hcmdpbi1ib3R0b206MTJweDtmbGV4LXdyYXA6d3JhcDt9Ci5nY2FsLW5hdiBidXR0b257cGFkZGluZzo2cHggMTJweDtib3JkZXI6MXB4IHNvbGlkICNkZGQ7Ym9yZGVyLXJhZGl1czo4cHg7YmFja2dyb3VuZDojZmZmO2N1cnNvcjpwb2ludGVyO2ZvbnQtc2l6ZTouNzhyZW07Zm9udC13ZWlnaHQ6NjAwO30KLmdjYWwtbmF2IGJ1dHRvbjpob3ZlcntiYWNrZ3JvdW5kOiNmMGYwZjA7fQouZ2NhbC1uYXYgLmdjYWwtcGVyaW9ke2ZvbnQtd2VpZ2h0OjcwMDtmb250LXNpemU6LjlyZW07Y29sb3I6IzMzMzttaW4td2lkdGg6MTYwcHg7dGV4dC1hbGlnbjpjZW50ZXI7fQouZ2NhbC1lbXB0eXt0ZXh0LWFsaWduOmNlbnRlcjtwYWRkaW5nOjMwcHg7Y29sb3I6I2FhYTtmb250LXNpemU6Ljg1cmVtO30KLmdjYWwtZW1wdHkgaXtmb250LXNpemU6MnJlbTtkaXNwbGF5OmJsb2NrO21hcmdpbi1ib3R0b206OHB4O30KCjwvc3R5bGU+CjwvaGVhZD4KPGJvZHk+Cgo8bmF2IGNsYXNzPSJzaWRlYmFyIG5vLXByaW50Ij4KICAgIDxkaXYgY2xhc3M9ImJyYW5kIj5DQURJUjwvZGl2PgogICAgPGRpdiBjbGFzcz0ibWVudSI+CiAgICAgICAgPGEgY2xhc3M9Im1lbnUtaXRlbSIgZGF0YS1tZW51PSJtZW51MSIgb25jbGljaz0ic3dpdGNoTWVudSgnbWVudTEnKSI+PGkgY2xhc3M9ImZhcyBmYS1jb2dzIj48L2k+IFBhcmFtw6h0cmVzPC9hPgogICAgICAgIDxhIGNsYXNzPSJtZW51LWl0ZW0gYWN0aXZlIiBkYXRhLW1lbnU9Im1lbnUyIiBvbmNsaWNrPSJzd2l0Y2hNZW51KCdtZW51MicpIj48aSBjbGFzcz0iZmFzIGZhLWNoZWNrLXNxdWFyZSI+PC9pPiBUbyBEbyBMaXN0PC9hPgogICAgICAgIDxhIGNsYXNzPSJtZW51LWl0ZW0iIGRhdGEtbWVudT0ibWVudTMiIG9uY2xpY2s9InN3aXRjaE1lbnUoJ21lbnUzJykiPjxpIGNsYXNzPSJmYXMgZmEtY2FsZW5kYXItYWx0Ij48L2k+IENhbGVuZHJpZXI8L2E+CiAgICAgICAgPGEgY2xhc3M9Im1lbnUtaXRlbSIgZGF0YS1tZW51PSJtZW51NCIgb25jbGljaz0ic3dpdGNoTWVudSgnbWVudTQnKSI+PGkgY2xhc3M9ImZhcyBmYS1jbGlwYm9hcmQtbGlzdCI+PC9pPiBDb25zZWlsIGRlIERpcmVjdGlvbjwvYT4KICAgICAgICA8YSBjbGFzcz0ibWVudS1pdGVtIiBkYXRhLW1lbnU9Im1lbnU1IiBvbmNsaWNrPSJzd2l0Y2hNZW51KCdtZW51NScpIj48aSBjbGFzcz0iZmFzIGZhLXVzZXItZ3JhZHVhdGUiPjwvaT4gU3Vpdmkgw4lsw6h2ZSAvIFBvaW50IENQRTwvYT4KICAgICAgICA8YSBjbGFzcz0ibWVudS1pdGVtIiBkYXRhLW1lbnU9Im1lbnU2IiBvbmNsaWNrPSJzd2l0Y2hNZW51KCdtZW51NicpIj48aSBjbGFzcz0iZmFzIGZhLWNvbW1lbnRzIj48L2k+IEVudHJldGllbnM8L2E+CiAgICAgICAgPGEgY2xhc3M9Im1lbnUtaXRlbSIgZGF0YS1tZW51PSJtZW51NyIgb25jbGljaz0ic3dpdGNoTWVudSgnbWVudTcnKSI+PGkgY2xhc3M9ImZhcyBmYS11c2VycyI+PC9pPiBSw6l1bmlvbnM8L2E+CiAgICAgICAgPGEgY2xhc3M9Im1lbnUtaXRlbSIgZGF0YS1tZW51PSJtZW51OCIgb25jbGljaz0ic3dpdGNoTWVudSgnbWVudTgnKSI+PGkgY2xhc3M9ImZhcyBmYS1oaXN0b3J5Ij48L2k+IEhpc3RvcmlxdWU8L2E+CiAgICAgICAgPGEgY2xhc3M9Im1lbnUtaXRlbSIgZGF0YS1tZW51PSJtZW51OSIgb25jbGljaz0ic3dpdGNoTWVudSgnbWVudTknKSI+PGkgY2xhc3M9ImZhcyBmYS1jaGFydC1saW5lIj48L2k+IFRhYmxlYXUgZGUgQm9yZDwvYT4KICAgICAgICA8YSBjbGFzcz0ibWVudS1pdGVtIiBkYXRhLW1lbnU9Im1lbnUxMCIgb25jbGljaz0ic3dpdGNoTWVudSgnbWVudTEwJykiPjxpIGNsYXNzPSJmYXMgZmEtY2FsZW5kYXItY2hlY2siPjwvaT4gQWN0aXZpdMOpcyBww6lkYWdvZ2lxdWVzPC9hPgogICAgICAgIDxhIGNsYXNzPSJtZW51LWl0ZW0iIGRhdGEtbWVudT0ibWVudTExIiBvbmNsaWNrPSJzd2l0Y2hNZW51KCdtZW51MTEnKSI+PGkgY2xhc3M9ImZhcyBmYS1zdHJlYW0iPjwvaT4gw4ljaMOpYW5jZXM8L2E+CiAgICAgICAgPGEgY2xhc3M9Im1lbnUtaXRlbSIgZGF0YS1tZW51PSJtZW51MTIiIG9uY2xpY2s9InN3aXRjaE1lbnUoJ21lbnUxMicpIj48aSBjbGFzcz0iZmFzIGZhLWJvb2siPjwvaT4gUHJvY8OpZHVyZXM8L2E+CiAgICA8L2Rpdj4KICAgIDxkaXYgY2xhc3M9ImZvb3Rlci1pbmZvIj5DQURJUiBieSBGUzwvZGl2Pgo8L25hdj4KCjxkaXYgY2xhc3M9Im1haW4tY29udGVudCI+CiAgICA8ZGl2IGNsYXNzPSJ0b3AtYmFyIG5vLXByaW50Ij4KICAgICAgICA8ZGl2IGNsYXNzPSJwYWdlLXRpdGxlIj48aDIgaWQ9ImN1cnJlbnQtdGl0bGUiPlBhcmFtw6h0cmVzPC9oMj48cCBpZD0iY3VycmVudC1kYXRlIj48L3A+PC9kaXY+CiAgICAgICAgPGRpdiBjbGFzcz0ic3lzdGVtLXN0YXR1cyI+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9InNhdmUtaW5kaWNhdG9yIiBpZD0iYXV0by1zYXZlLW1zZyI+PGkgY2xhc3M9ImZhcyBmYS1zeW5jLWFsdCBmYS1zcGluIj48L2k+IERvbm7DqWVzIMOgIGpvdXI8L2Rpdj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0iYWN0aW9uLWJ1dHRvbnMiPgogICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9ImZpbGUiIGlkPSJpbXBvcnRGaWxlIiBzdHlsZT0iZGlzcGxheTpub25lIiBvbmNoYW5nZT0iaW1wb3J0RGF0YSh0aGlzKSI+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgIDwvZGl2PgogICAgPC9kaXY+CgogICAgPGRpdiBpZD0ibWVudTEiIGNsYXNzPSJzZWN0aW9uIGFjdGl2ZSI+CiAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1jYXJkIj4KICAgICAgICAgICAgPGgzPlBhcmFtw6h0cmVzIEfDqW7DqXJhdXg8L2gzPgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWdyaWQiPgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1ncm91cCI+PGxhYmVsPk5vbSDDiXRhYmxpc3NlbWVudDwvbGFiZWw+PGlucHV0IHR5cGU9InRleHQiIGlkPSJjZmctc2Nob29sIiBjbGFzcz0iZm9ybS1jb250cm9sIiBvbmlucHV0PSJzYXZlRGF0YSgpOyI+PC9kaXY+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWdyb3VwIj48bGFiZWw+Tm9tICYgRm9uY3Rpb24gKFNpZ25hdHVyZSk8L2xhYmVsPjxpbnB1dCB0eXBlPSJ0ZXh0IiBpZD0iY2ZnLXVzZXIiIGNsYXNzPSJmb3JtLWNvbnRyb2wiIHBsYWNlaG9sZGVyPSJNLiBsZSBQcmluY2lwYWwiIG9uaW5wdXQ9InNhdmVEYXRhKCk7Ij48L2Rpdj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZ3JpZCI+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWdyb3VwIj48bGFiZWw+TG9nbzwvbGFiZWw+PGlucHV0IHR5cGU9ImZpbGUiIG9uY2hhbmdlPSJlbmNvZGVJbWFnZSh0aGlzLCAnY2ZnLWxvZ28tcHJldmlldycsICdsb2dvJykiIGNsYXNzPSJmb3JtLWNvbnRyb2wiPjxpbWcgaWQ9ImNmZy1sb2dvLXByZXZpZXciIHNyYz0iIiBzdHlsZT0iaGVpZ2h0OjUwcHg7IGRpc3BsYXk6bm9uZTsgbWFyZ2luLXRvcDoxMHB4OyI+PC9kaXY+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWdyb3VwIj48bGFiZWw+U2lnbmF0dXJlPC9sYWJlbD48aW5wdXQgdHlwZT0iZmlsZSIgb25jaGFuZ2U9ImVuY29kZUltYWdlKHRoaXMsICdjZmctc2lnLXByZXZpZXcnLCAnc2lnbmF0dXJlJykiIGNsYXNzPSJmb3JtLWNvbnRyb2wiPjxpbWcgaWQ9ImNmZy1zaWctcHJldmlldyIgc3JjPSIiIHN0eWxlPSJoZWlnaHQ6NTBweDsgZGlzcGxheTpub25lOyBtYXJnaW4tdG9wOjEwcHg7Ij48L2Rpdj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDxkaXYgc3R5bGU9Im1hcmdpbi10b3A6MjBweDsgZGlzcGxheTpmbGV4OyBqdXN0aWZ5LWNvbnRlbnQ6c3BhY2UtYmV0d2VlbjsiPgogICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYnRuIGJ0bi1wcmltYXJ5IiBvbmNsaWNrPSJzYXZlU2V0dGluZ3MoKSI+RW5yZWdpc3RyZXIgbGVzIHBhcmFtw6h0cmVzPC9idXR0b24+CiAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJidG4gYnRuLWRhbmdlciIgb25jbGljaz0iY2xlYXJBbGwoKSI+UmVzZXQgQXBwPC9idXR0b24+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8ZGl2IHN0eWxlPSJtYXJnaW4tdG9wOjE0cHgiPgogICAgICAgICAgICAgICAgPGxhYmVsIHN0eWxlPSJmb250LXNpemU6Ljc4cmVtO2ZvbnQtd2VpZ2h0OjYwMDtkaXNwbGF5OmJsb2NrO21hcmdpbi1ib3R0b206NnB4Ij48aSBjbGFzcz0iZmFzIGZhLWdyaXAtbGluZXMiIHN0eWxlPSJjb2xvcjojOTk5Ij48L2k+IFPDqXBhcmF0ZXVycyBkZSBzb3VzLW1lbnVzPC9sYWJlbD4KICAgICAgICAgICAgICAgIDxzbWFsbCBzdHlsZT0iY29sb3I6Izg4ODtkaXNwbGF5OmJsb2NrO21hcmdpbi1ib3R0b206OHB4Ij5Db2NoZXogbGVzIHNvdXMtbWVudXMgYXByw6hzIGxlc3F1ZWxzIGFmZmljaGVyIHVuIHPDqXBhcmF0ZXVyLjwvc21hbGw+CiAgICAgICAgICAgICAgICA8ZGl2IGlkPSJzZXAtY29uZmlnIiBzdHlsZT0iZGlzcGxheTpmbGV4O2ZsZXgtZGlyZWN0aW9uOmNvbHVtbjtnYXA6NHB4Ij48L2Rpdj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgCiAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1jYXJkIiBzdHlsZT0ibWFyZ2luLXRvcDoyMHB4OyI+CiAgICAgICAgICAgIDxoMz48aSBjbGFzcz0iZmFzIGZhLWZpbGUtYWx0Ij48L2k+IE1vZMOobGVzIHBhciBkw6lmYXV0PC9oMz4KICAgICAgICAgICAgPHNtYWxsIHN0eWxlPSJjb2xvcjojODg4O2Rpc3BsYXk6YmxvY2s7bWFyZ2luLWJvdHRvbToxMnB4OyI+UGVyc29ubmFsaXNleiBsZSBjb250ZW51IHBhciBkw6lmYXV0IGRlcyB6b25lcyBkZSBwcmlzZSBkZSBub3Rlcy48L3NtYWxsPgogICAgICAgICAgICA8ZGl2IHN0eWxlPSJkaXNwbGF5OmZsZXg7ZmxleC1kaXJlY3Rpb246Y29sdW1uO2dhcDoxNHB4OyI+CiAgICAgICAgICAgICAgICA8ZGl2PgogICAgICAgICAgICAgICAgICAgIDxsYWJlbCBzdHlsZT0iZm9udC1zaXplOi43OHJlbTtmb250LXdlaWdodDo2MDA7bWFyZ2luLWJvdHRvbTo0cHg7ZGlzcGxheTpibG9jazsiPjxpIGNsYXNzPSJmYXMgZmEtY29tbWVudHMiIHN0eWxlPSJjb2xvcjojOWI1OWI2Ij48L2k+IEVudHJldGllbjwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0icnRlLXdyYXAiPjxkaXYgY2xhc3M9InJ0ZS1iYXIiPgo8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0iZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2JvbGQnKSIgdGl0bGU9IkdyYXMiPjxiPkc8L2I+PC9idXR0b24+CjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJkb2N1bWVudC5leGVjQ29tbWFuZCgnaXRhbGljJykiIHRpdGxlPSJJdGFsaXF1ZSI+PGk+STwvaT48L2J1dHRvbj4KPGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9ImRvY3VtZW50LmV4ZWNDb21tYW5kKCdpbnNlcnRVbm9yZGVyZWRMaXN0JykiIHRpdGxlPSJQdWNlcyI+PGkgY2xhc3M9ImZhcyBmYS1saXN0LXVsIj48L2k+PC9idXR0b24+CjxzcGFuIGNsYXNzPSJydGUtc2VwIj48L3NwYW4+PGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9ImRvY3VtZW50LmV4ZWNDb21tYW5kKCdqdXN0aWZ5TGVmdCcpIiB0aXRsZT0iQWxpZ25lciDDoCBnYXVjaGUiPjxpIGNsYXNzPSJmYXMgZmEtYWxpZ24tbGVmdCI+PC9pPjwvYnV0dG9uPjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJkb2N1bWVudC5leGVjQ29tbWFuZCgnanVzdGlmeUNlbnRlcicpIiB0aXRsZT0iQ2VudHJlciI+PGkgY2xhc3M9ImZhcyBmYS1hbGlnbi1jZW50ZXIiPjwvaT48L2J1dHRvbj48YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0iZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2p1c3RpZnlGdWxsJykiIHRpdGxlPSJKdXN0aWZpZXIiPjxpIGNsYXNzPSJmYXMgZmEtYWxpZ24tanVzdGlmeSI+PC9pPjwvYnV0dG9uPjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJwYXN0ZUZyb21Xb3JkKCkiIHRpdGxlPSJDb2xsZXIgZGVwdWlzIFdvcmQgZW4gY29uc2VydmFudCBsYSBtaXNlIGVuIHBhZ2UiIHN0eWxlPSJtYXJnaW4tbGVmdDo2cHg7YmFja2dyb3VuZDojMmI1NzlhO2NvbG9yOndoaXRlO2JvcmRlci1yYWRpdXM6NHB4O3BhZGRpbmc6MnB4IDhweDtmb250LXNpemU6LjY4cmVtO2JvcmRlcjpub25lO2N1cnNvcjpwb2ludGVyO2ZvbnQtZmFtaWx5OmluaGVyaXQ7ZGlzcGxheTppbmxpbmUtZmxleDthbGlnbi1pdGVtczpjZW50ZXI7Z2FwOjNweDt2ZXJ0aWNhbC1hbGlnbjptaWRkbGU7Ij48aSBjbGFzcz0iZmFzIGZhLWZpbGUtd29yZCI+PC9pPsKgV29yZDwvYnV0dG9uPgo8L2Rpdj48ZGl2IGlkPSJ0cGwtZW50IiBjbGFzcz0iZG9jLWVkaXRvciIgY29udGVudGVkaXRhYmxlPSJ0cnVlIiBzdHlsZT0ibWluLWhlaWdodDo4MHB4O2ZvbnQtc2l6ZTouOHJlbTtyZXNpemU6dmVydGljYWw7b3ZlcmZsb3c6YXV0bzsiPjwvZGl2PjwvZGl2PgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICA8ZGl2PgogICAgICAgICAgICAgICAgICAgIDxsYWJlbCBzdHlsZT0iZm9udC1zaXplOi43OHJlbTtmb250LXdlaWdodDo2MDA7bWFyZ2luLWJvdHRvbTo0cHg7ZGlzcGxheTpibG9jazsiPjxpIGNsYXNzPSJmYXMgZmEtdXNlcnMiIHN0eWxlPSJjb2xvcjojZTc0YzNjIj48L2k+IFLDqXVuaW9uPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJydGUtd3JhcCI+PGRpdiBjbGFzcz0icnRlLWJhciI+CjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJkb2N1bWVudC5leGVjQ29tbWFuZCgnYm9sZCcpIiB0aXRsZT0iR3JhcyI+PGI+RzwvYj48L2J1dHRvbj4KPGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9ImRvY3VtZW50LmV4ZWNDb21tYW5kKCdpdGFsaWMnKSIgdGl0bGU9Ikl0YWxpcXVlIj48aT5JPC9pPjwvYnV0dG9uPgo8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0iZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2luc2VydFVub3JkZXJlZExpc3QnKSIgdGl0bGU9IlB1Y2VzIj48aSBjbGFzcz0iZmFzIGZhLWxpc3QtdWwiPjwvaT48L2J1dHRvbj4KPHNwYW4gY2xhc3M9InJ0ZS1zZXAiPjwvc3Bhbj48YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0iZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2p1c3RpZnlMZWZ0JykiIHRpdGxlPSJBbGlnbmVyIMOgIGdhdWNoZSI+PGkgY2xhc3M9ImZhcyBmYS1hbGlnbi1sZWZ0Ij48L2k+PC9idXR0b24+PGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9ImRvY3VtZW50LmV4ZWNDb21tYW5kKCdqdXN0aWZ5Q2VudGVyJykiIHRpdGxlPSJDZW50cmVyIj48aSBjbGFzcz0iZmFzIGZhLWFsaWduLWNlbnRlciI+PC9pPjwvYnV0dG9uPjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJkb2N1bWVudC5leGVjQ29tbWFuZCgnanVzdGlmeUZ1bGwnKSIgdGl0bGU9Ikp1c3RpZmllciI+PGkgY2xhc3M9ImZhcyBmYS1hbGlnbi1qdXN0aWZ5Ij48L2k+PC9idXR0b24+PGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9InBhc3RlRnJvbVdvcmQoKSIgdGl0bGU9IkNvbGxlciBkZXB1aXMgV29yZCBlbiBjb25zZXJ2YW50IGxhIG1pc2UgZW4gcGFnZSIgc3R5bGU9Im1hcmdpbi1sZWZ0OjZweDtiYWNrZ3JvdW5kOiMyYjU3OWE7Y29sb3I6d2hpdGU7Ym9yZGVyLXJhZGl1czo0cHg7cGFkZGluZzoycHggOHB4O2ZvbnQtc2l6ZTouNjhyZW07Ym9yZGVyOm5vbmU7Y3Vyc29yOnBvaW50ZXI7Zm9udC1mYW1pbHk6aW5oZXJpdDtkaXNwbGF5OmlubGluZS1mbGV4O2FsaWduLWl0ZW1zOmNlbnRlcjtnYXA6M3B4O3ZlcnRpY2FsLWFsaWduOm1pZGRsZTsiPjxpIGNsYXNzPSJmYXMgZmEtZmlsZS13b3JkIj48L2k+wqBXb3JkPC9idXR0b24+CjwvZGl2PjxkaXYgaWQ9InRwbC1yZXUiIGNsYXNzPSJkb2MtZWRpdG9yIiBjb250ZW50ZWRpdGFibGU9InRydWUiIHN0eWxlPSJtaW4taGVpZ2h0OjgwcHg7Zm9udC1zaXplOi44cmVtO3Jlc2l6ZTp2ZXJ0aWNhbDtvdmVyZmxvdzphdXRvOyI+PC9kaXY+PC9kaXY+CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIDxkaXY+CiAgICAgICAgICAgICAgICAgICAgPGxhYmVsIHN0eWxlPSJmb250LXNpemU6Ljc4cmVtO2ZvbnQtd2VpZ2h0OjYwMDttYXJnaW4tYm90dG9tOjRweDtkaXNwbGF5OmJsb2NrOyI+PGkgY2xhc3M9ImZhcyBmYS1jbGlwYm9hcmQtbGlzdCIgc3R5bGU9ImNvbG9yOiMyYzNlNTAiPjwvaT4gQ29uc2VpbCBkZSBEaXJlY3Rpb24gKE9ESik8L2xhYmVsPgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InJ0ZS13cmFwIj48ZGl2IGNsYXNzPSJydGUtYmFyIj4KPGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9ImRvY3VtZW50LmV4ZWNDb21tYW5kKCdib2xkJykiIHRpdGxlPSJHcmFzIj48Yj5HPC9iPjwvYnV0dG9uPgo8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0iZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2l0YWxpYycpIiB0aXRsZT0iSXRhbGlxdWUiPjxpPkk8L2k+PC9idXR0b24+CjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJkb2N1bWVudC5leGVjQ29tbWFuZCgnaW5zZXJ0VW5vcmRlcmVkTGlzdCcpIiB0aXRsZT0iUHVjZXMiPjxpIGNsYXNzPSJmYXMgZmEtbGlzdC11bCI+PC9pPjwvYnV0dG9uPgo8c3BhbiBjbGFzcz0icnRlLXNlcCI+PC9zcGFuPjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJkb2N1bWVudC5leGVjQ29tbWFuZCgnanVzdGlmeUxlZnQnKSIgdGl0bGU9IkFsaWduZXIgw6AgZ2F1Y2hlIj48aSBjbGFzcz0iZmFzIGZhLWFsaWduLWxlZnQiPjwvaT48L2J1dHRvbj48YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0iZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2p1c3RpZnlDZW50ZXInKSIgdGl0bGU9IkNlbnRyZXIiPjxpIGNsYXNzPSJmYXMgZmEtYWxpZ24tY2VudGVyIj48L2k+PC9idXR0b24+PGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9ImRvY3VtZW50LmV4ZWNDb21tYW5kKCdqdXN0aWZ5RnVsbCcpIiB0aXRsZT0iSnVzdGlmaWVyIj48aSBjbGFzcz0iZmFzIGZhLWFsaWduLWp1c3RpZnkiPjwvaT48L2J1dHRvbj48YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0icGFzdGVGcm9tV29yZCgpIiB0aXRsZT0iQ29sbGVyIGRlcHVpcyBXb3JkIGVuIGNvbnNlcnZhbnQgbGEgbWlzZSBlbiBwYWdlIiBzdHlsZT0ibWFyZ2luLWxlZnQ6NnB4O2JhY2tncm91bmQ6IzJiNTc5YTtjb2xvcjp3aGl0ZTtib3JkZXItcmFkaXVzOjRweDtwYWRkaW5nOjJweCA4cHg7Zm9udC1zaXplOi42OHJlbTtib3JkZXI6bm9uZTtjdXJzb3I6cG9pbnRlcjtmb250LWZhbWlseTppbmhlcml0O2Rpc3BsYXk6aW5saW5lLWZsZXg7YWxpZ24taXRlbXM6Y2VudGVyO2dhcDozcHg7dmVydGljYWwtYWxpZ246bWlkZGxlOyI+PGkgY2xhc3M9ImZhcyBmYS1maWxlLXdvcmQiPjwvaT7CoFdvcmQ8L2J1dHRvbj4KPC9kaXY+PGRpdiBpZD0idHBsLWRpciIgY2xhc3M9ImRvYy1lZGl0b3IiIGNvbnRlbnRlZGl0YWJsZT0idHJ1ZSIgc3R5bGU9Im1pbi1oZWlnaHQ6ODBweDtmb250LXNpemU6LjhyZW07cmVzaXplOnZlcnRpY2FsO292ZXJmbG93OmF1dG87Ij48L2Rpdj48L2Rpdj4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgPGRpdj4KICAgICAgICAgICAgICAgICAgICA8bGFiZWwgc3R5bGU9ImZvbnQtc2l6ZTouNzhyZW07Zm9udC13ZWlnaHQ6NjAwO21hcmdpbi1ib3R0b206NHB4O2Rpc3BsYXk6YmxvY2s7Ij48aSBjbGFzcz0iZmFzIGZhLXVzZXItZ3JhZHVhdGUiIHN0eWxlPSJjb2xvcjojMjdhZTYwIj48L2k+IFN1aXZpIMOJbMOodmU8L2xhYmVsPgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InJ0ZS13cmFwIj48ZGl2IGNsYXNzPSJydGUtYmFyIj4KPGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9ImRvY3VtZW50LmV4ZWNDb21tYW5kKCdib2xkJykiIHRpdGxlPSJHcmFzIj48Yj5HPC9iPjwvYnV0dG9uPgo8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0iZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2l0YWxpYycpIiB0aXRsZT0iSXRhbGlxdWUiPjxpPkk8L2k+PC9idXR0b24+CjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJkb2N1bWVudC5leGVjQ29tbWFuZCgnaW5zZXJ0VW5vcmRlcmVkTGlzdCcpIiB0aXRsZT0iUHVjZXMiPjxpIGNsYXNzPSJmYXMgZmEtbGlzdC11bCI+PC9pPjwvYnV0dG9uPgo8c3BhbiBjbGFzcz0icnRlLXNlcCI+PC9zcGFuPjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJkb2N1bWVudC5leGVjQ29tbWFuZCgnanVzdGlmeUxlZnQnKSIgdGl0bGU9IkFsaWduZXIgw6AgZ2F1Y2hlIj48aSBjbGFzcz0iZmFzIGZhLWFsaWduLWxlZnQiPjwvaT48L2J1dHRvbj48YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0iZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2p1c3RpZnlDZW50ZXInKSIgdGl0bGU9IkNlbnRyZXIiPjxpIGNsYXNzPSJmYXMgZmEtYWxpZ24tY2VudGVyIj48L2k+PC9idXR0b24+PGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9ImRvY3VtZW50LmV4ZWNDb21tYW5kKCdqdXN0aWZ5RnVsbCcpIiB0aXRsZT0iSnVzdGlmaWVyIj48aSBjbGFzcz0iZmFzIGZhLWFsaWduLWp1c3RpZnkiPjwvaT48L2J1dHRvbj48YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0icGFzdGVGcm9tV29yZCgpIiB0aXRsZT0iQ29sbGVyIGRlcHVpcyBXb3JkIGVuIGNvbnNlcnZhbnQgbGEgbWlzZSBlbiBwYWdlIiBzdHlsZT0ibWFyZ2luLWxlZnQ6NnB4O2JhY2tncm91bmQ6IzJiNTc5YTtjb2xvcjp3aGl0ZTtib3JkZXItcmFkaXVzOjRweDtwYWRkaW5nOjJweCA4cHg7Zm9udC1zaXplOi42OHJlbTtib3JkZXI6bm9uZTtjdXJzb3I6cG9pbnRlcjtmb250LWZhbWlseTppbmhlcml0O2Rpc3BsYXk6aW5saW5lLWZsZXg7YWxpZ24taXRlbXM6Y2VudGVyO2dhcDozcHg7dmVydGljYWwtYWxpZ246bWlkZGxlOyI+PGkgY2xhc3M9ImZhcyBmYS1maWxlLXdvcmQiPjwvaT7CoFdvcmQ8L2J1dHRvbj4KPC9kaXY+PGRpdiBpZD0idHBsLXN1aXZpIiBjbGFzcz0iZG9jLWVkaXRvciIgY29udGVudGVkaXRhYmxlPSJ0cnVlIiBzdHlsZT0ibWluLWhlaWdodDo4MHB4O2ZvbnQtc2l6ZTouOHJlbTtyZXNpemU6dmVydGljYWw7b3ZlcmZsb3c6YXV0bzsiPjwvZGl2PjwvZGl2PgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJidG4gYnRuLWFjY2VudCIgb25jbGljaz0ic2F2ZVRlbXBsYXRlcygpIiBzdHlsZT0iYWxpZ24tc2VsZjpmbGV4LXN0YXJ0OyI+PGkgY2xhc3M9ImZhcyBmYS1zYXZlIj48L2k+IEVucmVnaXN0cmVyIGxlcyBtb2TDqGxlczwvYnV0dG9uPgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICA8L2Rpdj4KCiAgICAgICAgPCEtLSBFeHBvcnQgLyBJbXBvcnQgLS0+CiAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1jYXJkIiBzdHlsZT0ibWFyZ2luLXRvcDoxNnB4O2JvcmRlcjoycHggc29saWQgI2UwZTdmZjtiYWNrZ3JvdW5kOiNmOGZhZmYiPgogICAgICAgICAgICA8aDM+PGkgY2xhc3M9ImZhcyBmYS1kYXRhYmFzZSIgc3R5bGU9ImNvbG9yOiMzQjgyRjYiPjwvaT4gU2F1dmVnYXJkZSAmIFJlc3RhdXJhdGlvbiBkZXMgZG9ubsOpZXM8L2gzPgogICAgICAgICAgICA8ZGl2IHN0eWxlPSJiYWNrZ3JvdW5kOiNmMGZkZjQ7Ym9yZGVyOjJweCBzb2xpZCAjMjJDNTVFO2JvcmRlci1yYWRpdXM6MTBweDtwYWRkaW5nOjE0cHggMThweDttYXJnaW4tYm90dG9tOjE2cHgiPgogICAgICAgICAgICAgICAgPGg0IHN0eWxlPSJtYXJnaW46MCAwIDhweDtmb250LXNpemU6LjlyZW07Y29sb3I6IzE2NjUzNCI+PGkgY2xhc3M9ImZhcyBmYS1oZGQiPjwvaT4gU2F1dmVnYXJkZSBmaWNoaWVyIGxvY2FsPC9oND4KICAgICAgICAgICAgICAgIDxwIHN0eWxlPSJmb250LXNpemU6Ljc4cmVtO2NvbG9yOiM1NTU7bWFyZ2luOjAgMCAxMHB4Ij5DaG9pc2lzc2V6IHVuIGRvc3NpZXIgc3VyIHZvdHJlIGRpc3F1ZSwgcsOpc2VhdSwgb3UgY2xvdWQgKE9uZURyaXZlLCBHb29nbGUgRHJpdmXigKYpLiBMZSBmaWNoaWVyIDxzdHJvbmc+Y2FkaXJfZGF0YS5qc29uPC9zdHJvbmc+IHkgc2VyYSBjcsOpw6kgZXQgbWlzIMOgIGpvdXIgYXV0b21hdGlxdWVtZW50LjwvcD4KICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9ImRpc3BsYXk6ZmxleDtnYXA6MTBweDthbGlnbi1pdGVtczpjZW50ZXI7ZmxleC13cmFwOndyYXAiPgogICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImJ0biIgb25jbGljaz0id2luZG93LnBpY2tTYXZlRmlsZSgpIiBzdHlsZT0iYmFja2dyb3VuZDojMTY2NTM0O2NvbG9yOiNmZmY7Zm9udC1zaXplOi44cmVtIj48aSBjbGFzcz0iZmFzIGZhLWZvbGRlci1vcGVuIj48L2k+IENob2lzaXIgdW4gZG9zc2llcjwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImJ0biIgb25jbGljaz0id2luZG93LnBpY2tFeGlzdGluZ0ZpbGUoKSIgc3R5bGU9ImJhY2tncm91bmQ6IzI1NjNFQjtjb2xvcjojZmZmO2ZvbnQtc2l6ZTouOHJlbSI+PGkgY2xhc3M9ImZhcyBmYS1maWxlLWltcG9ydCI+PC9pPiBPdXZyaXIgdW4gZmljaGllciBleGlzdGFudDwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImJ0biIgaWQ9ImZpbGUtdW5saW5rLWJ0biIgb25jbGljaz0id2luZG93LnVubGlua0ZpbGUoKSIgc3R5bGU9ImJhY2tncm91bmQ6I2RjMjYyNjtjb2xvcjojZmZmO2ZvbnQtc2l6ZTouNzVyZW07ZGlzcGxheTpub25lIj48aSBjbGFzcz0iZmFzIGZhLXVubGluayI+PC9pPiBEw6lsaWVyPC9idXR0b24+CiAgICAgICAgICAgICAgICAgICAgPHNwYW4gaWQ9ImZpbGUtbGluay1zdGF0dXMiIHN0eWxlPSJmb250LXNpemU6LjhyZW0iPjxpIGNsYXNzPSJmYXMgZmEtdW5saW5rIiBzdHlsZT0iY29sb3I6I2FhYSI+PC9pPiA8c3BhbiBzdHlsZT0iY29sb3I6Izk5OSI+QXVjdW4gZmljaGllciBsacOpPC9zcGFuPjwvc3Bhbj4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgPHAgc3R5bGU9ImZvbnQtc2l6ZTouNjhyZW07Y29sb3I6Izg4ODttYXJnaW46OHB4IDAgMCI+PGkgY2xhc3M9ImZhcyBmYS1pbmZvLWNpcmNsZSI+PC9pPiBMZSBmaWNoaWVyIHBldXQgw6p0cmUgc3VyIHZvdHJlIGRpc3F1ZSwgdW4gcsOpc2VhdSBwYXJ0YWfDqSwgR29vZ2xlIERyaXZlLCBPbmVEcml2ZSwgZXRjLiBGb25jdGlvbm5lIGF2ZWMgQ2hyb21lIGV0IEVkZ2UuPC9wPgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPHAgc3R5bGU9ImZvbnQtc2l6ZTouOHJlbTtjb2xvcjojNjY2O21hcmdpbjowIDAgMTJweCI+Vm91cyBwb3V2ZXogYXVzc2kgZXhwb3J0ZXIvaW1wb3J0ZXIgbWFudWVsbGVtZW50IDo8L3A+CiAgICAgICAgICAgIDxkaXYgc3R5bGU9ImRpc3BsYXk6ZmxleDtnYXA6MTBweDtmbGV4LXdyYXA6d3JhcDthbGlnbi1pdGVtczpjZW50ZXIiPgogICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYnRuIGJ0bi1hY2NlbnQiIG9uY2xpY2s9IndpbmRvdy5leHBvcnREYXRhKCkiIHN0eWxlPSJiYWNrZ3JvdW5kOiMzQjgyRjYiPjxpIGNsYXNzPSJmYXMgZmEtZG93bmxvYWQiPjwvaT4gRXhwb3J0ZXIgSlNPTjwvYnV0dG9uPgogICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYnRuIiBvbmNsaWNrPSJkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW1wb3J0LWZpbGUnKS5jbGljaygpIiBzdHlsZT0iYmFja2dyb3VuZDojMjJDNTVFO2NvbG9yOiNmZmYiPjxpIGNsYXNzPSJmYXMgZmEtdXBsb2FkIj48L2k+IEltcG9ydGVyIEpTT048L2J1dHRvbj4KICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJmaWxlIiBpZD0iaW1wb3J0LWZpbGUiIGFjY2VwdD0iLmpzb24iIHN0eWxlPSJkaXNwbGF5Om5vbmUiIG9uY2hhbmdlPSJpbXBvcnREYXRhKHRoaXMpIj4KICAgICAgICAgICAgICAgIDxzcGFuIGlkPSJsYXN0LWV4cG9ydCIgc3R5bGU9ImZvbnQtc2l6ZTouN3JlbTtjb2xvcjojOTk5Ij48L3NwYW4+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8cCBzdHlsZT0iZm9udC1zaXplOi43cmVtO2NvbG9yOiM5OTk7bWFyZ2luOjhweCAwIDAiPjxpIGNsYXNzPSJmYXMgZmEtaW5mby1jaXJjbGUiPjwvaT4gTGUgZmljaGllciBleHBvcnTDqSBwZXV0IMOqdHJlIHN0b2Nrw6kgc3VyIHVuIHLDqXNlYXUsIHVuZSBjbMOpIFVTQiwgdW4gRlRQLCBHb29nbGUgRHJpdmUsIGV0Yy48L3A+CiAgICAgICAgPC9kaXY+CgogICAgPC9kaXY+CiAgICA8L2Rpdj4KCiAgICA8ZGl2IGlkPSJtZW51MiIgY2xhc3M9InNlY3Rpb24iPgogICAgICAgIDxkaXYgaWQ9InRvZG8tdG9kYXktem9uZSIgY2xhc3M9InRvZG8tdG9kYXktem9uZSI+CiAgICAgICAgICAgIDxkaXYgc3R5bGU9ImZvbnQtd2VpZ2h0OmJvbGQ7IGNvbG9yOiNkMzU0MDA7IG1hcmdpbi1ib3R0b206MTBweDsgZGlzcGxheTpmbGV4OyBhbGlnbi1pdGVtczpjZW50ZXI7IGdhcDoxMHB4OyI+PGkgY2xhc3M9ImZhcyBmYS1iZWxsIGZhLWxnIj48L2k+IEFHRU5EQSBEVSBKT1VSIChHbGlzc2V6LWxlcyBkYW5zIHZvcyBjb2xvbm5lcyk8L2Rpdj4KICAgICAgICAgICAgPGRpdiBpZD0idG9kby10b2RheS1saXN0Ij48L2Rpdj4KICAgICAgICA8L2Rpdj4KICAgICAgICA8ZGl2IGNsYXNzPSJ0b2RvLWdyaWQiPgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJ0b2RvLWJveCB0b2RvLXVyZ2VudCI+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJ0b2RvLWhlYWRlciI+PGgzIHN0eWxlPSJjb2xvcjp2YXIoLS1oaWdobGlnaHQpIj5VUkdFTlQ8L2gzPjwvZGl2PgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0idG9kby1pbnB1dC1ncm91cCI+PGlucHV0IHR5cGU9InRleHQiIGlkPSJ0b2RvLWlucHV0LXVyZ2VudCIgcGxhY2Vob2xkZXI9IkFqb3V0ZXIuLi4iIG9ua2V5cHJlc3M9ImhhbmRsZUVudGVyKGV2ZW50LCAndXJnZW50JykiPjxidXR0b24gY2xhc3M9ImJ0biBidG4tZGFuZ2VyIGJ0bi1zbSIgb25jbGljaz0iYWRkVG9kbygndXJnZW50JykiPis8L2J1dHRvbj48L2Rpdj4KICAgICAgICAgICAgICAgIDx1bCBjbGFzcz0idG9kby1saXN0IiBpZD0ibGlzdC11cmdlbnQiIG9uZHJvcD0iZHJvcChldmVudCwgJ3VyZ2VudCcpIiBvbmRyYWdvdmVyPSJhbGxvd0Ryb3AoZXZlbnQpIj48L3VsPgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0idG9kby1ib3ggdG9kby1wbGFuIj4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InRvZG8taGVhZGVyIj48aDMgc3R5bGU9ImNvbG9yOnZhcigtLXByaW1hcnkpIj5BIFBMQU5JRklFUjwvaDM+PC9kaXY+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJ0b2RvLWlucHV0LWdyb3VwIj48aW5wdXQgdHlwZT0idGV4dCIgaWQ9InRvZG8taW5wdXQtcGxhbiIgcGxhY2Vob2xkZXI9IkFqb3V0ZXIuLi4iIG9ua2V5cHJlc3M9ImhhbmRsZUVudGVyKGV2ZW50LCAncGxhbicpIj48YnV0dG9uIGNsYXNzPSJidG4gYnRuLXByaW1hcnkgYnRuLXNtIiBvbmNsaWNrPSJhZGRUb2RvKCdwbGFuJykiPis8L2J1dHRvbj48L2Rpdj4KICAgICAgICAgICAgICAgIDx1bCBjbGFzcz0idG9kby1saXN0IiBpZD0ibGlzdC1wbGFuIiBvbmRyb3A9ImRyb3AoZXZlbnQsICdwbGFuJykiIG9uZHJhZ292ZXI9ImFsbG93RHJvcChldmVudCkiPjwvdWw+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJ0b2RvLWJveCB0b2RvLXBvc3NpYmxlIj4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InRvZG8taGVhZGVyIj48aDMgc3R5bGU9ImNvbG9yOnZhcigtLXN1Y2Nlc3MpIj5TSSBQT1NTSUJMRTwvaDM+PC9kaXY+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJ0b2RvLWlucHV0LWdyb3VwIj48aW5wdXQgdHlwZT0idGV4dCIgaWQ9InRvZG8taW5wdXQtcG9zc2libGUiIHBsYWNlaG9sZGVyPSJBam91dGVyLi4uIiBvbmtleXByZXNzPSJoYW5kbGVFbnRlcihldmVudCwgJ3Bvc3NpYmxlJykiPjxidXR0b24gY2xhc3M9ImJ0biBidG4tc3VjY2VzcyBidG4tc20iIG9uY2xpY2s9ImFkZFRvZG8oJ3Bvc3NpYmxlJykiPis8L2J1dHRvbj48L2Rpdj4KICAgICAgICAgICAgICAgIDx1bCBjbGFzcz0idG9kby1saXN0IiBpZD0ibGlzdC1wb3NzaWJsZSIgb25kcm9wPSJkcm9wKGV2ZW50LCAncG9zc2libGUnKSIgb25kcmFnb3Zlcj0iYWxsb3dEcm9wKGV2ZW50KSI+PC91bD4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9InRvZG8tYm94IHRvZG8tZGVsZWdhdGUiPgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0idG9kby1oZWFkZXIiPjxoMyBzdHlsZT0iY29sb3I6dmFyKC0td2FybmluZykiPkEgREVMRUdVRVI8L2gzPjwvZGl2PgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0idG9kby1pbnB1dC1ncm91cCI+PGlucHV0IHR5cGU9InRleHQiIGlkPSJ0b2RvLWlucHV0LWRlbGVnYXRlIiBwbGFjZWhvbGRlcj0iQWpvdXRlci4uLiIgb25rZXlwcmVzcz0iaGFuZGxlRW50ZXIoZXZlbnQsICdkZWxlZ2F0ZScpIj48YnV0dG9uIGNsYXNzPSJidG4gYnRuLWRhcmsgYnRuLXNtIiBzdHlsZT0iYmFja2dyb3VuZDp2YXIoLS13YXJuaW5nKTtib3JkZXI6bm9uZSIgb25jbGljaz0iYWRkVG9kbygnZGVsZWdhdGUnKSI+KzwvYnV0dG9uPjwvZGl2PgogICAgICAgICAgICAgICAgPHVsIGNsYXNzPSJ0b2RvLWxpc3QiIGlkPSJsaXN0LWRlbGVnYXRlIiBvbmRyb3A9ImRyb3AoZXZlbnQsICdkZWxlZ2F0ZScpIiBvbmRyYWdvdmVyPSJhbGxvd0Ryb3AoZXZlbnQpIj48L3VsPgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICA8L2Rpdj4KICAgIDwvZGl2PgoKICAgIDxkaXYgaWQ9Im1lbnUzIiBjbGFzcz0ic2VjdGlvbiI+CiAgICAgICAgPCEtLSBDYWxlbmRyaWVyIFVuaWZpw6kgVjEyLjEzIC0tPgogICAgICAgIDxkaXYgY2xhc3M9InVjYWwtaGVhZGVyIj4KICAgICAgICAgICAgPGJ1dHRvbiBvbmNsaWNrPSJ1Y2FsUHJldigpIiBjbGFzcz0idWNhbC1uYXYtYnRuIj48aSBjbGFzcz0iZmFzIGZhLWNoZXZyb24tbGVmdCI+PC9pPjwvYnV0dG9uPgogICAgICAgICAgICA8aDMgY2xhc3M9InVjYWwtdGl0bGUiIGlkPSJ1Y2FsLXRpdGxlIj7igJQ8L2gzPgogICAgICAgICAgICA8YnV0dG9uIG9uY2xpY2s9InVjYWxOZXh0KCkiIGNsYXNzPSJ1Y2FsLW5hdi1idG4iPjxpIGNsYXNzPSJmYXMgZmEtY2hldnJvbi1yaWdodCI+PC9pPjwvYnV0dG9uPgogICAgICAgICAgICA8YnV0dG9uIG9uY2xpY2s9InVjYWxUb2RheSgpIiBjbGFzcz0idWNhbC1idG4tdG9kYXkiPkF1am91cmQnaHVpPC9idXR0b24+CiAgICAgICAgICAgIDxkaXYgc3R5bGU9ImZsZXg6MSI+PC9kaXY+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9InVjYWwtbGVnZW5kIiBpZD0idWNhbC1sZWdlbmQiPjwvZGl2PgogICAgICAgICAgICA8YnV0dG9uIG9uY2xpY2s9Im9wZW5VY2FsQWRkTW9kYWwoKSIgY2xhc3M9InVjYWwtYnRuLWFkZCI+PGkgY2xhc3M9ImZhcyBmYS1wbHVzIj48L2k+IEFqb3V0ZXI8L2J1dHRvbj4KICAgICAgICAgICAgPGJ1dHRvbiBvbmNsaWNrPSJ1Y2FsUmVmcmVzaCgpIiBjbGFzcz0idWNhbC1idG4tcmVmcmVzaCIgdGl0bGU9IlN5bmNocm9uaXNlciBHb29nbGUgQWdlbmRhIj48aSBjbGFzcz0iZmFzIGZhLXN5bmMiPjwvaT48L2J1dHRvbj4KICAgICAgICA8L2Rpdj4KICAgICAgICA8ZGl2IGlkPSJ1Y2FsLWJvZHkiPjwvZGl2PgoKICAgICAgICA8IS0tIE1vZGFsIEFqb3V0L0VkaXQgw6l2w6luZW1lbnQgLS0+CiAgICAgICAgPGRpdiBpZD0idWNhbE1vZGFsIiBjbGFzcz0ibS1vdiIgb25jbGljaz0iaWYoZXZlbnQudGFyZ2V0PT09dGhpcyljbG9zZVVjYWxNb2RhbCgpIiBzdHlsZT0iZGlzcGxheTpub25lIj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0ibS1ib3giIHN0eWxlPSJ3aWR0aDo0ODBweDsiPgogICAgICAgICAgICAgICAgPGgzPjxpIGNsYXNzPSJmYXMgZmEtY2FsZW5kYXItcGx1cyI+PC9pPiA8c3BhbiBpZD0idWNhbC1tb2RhbC10aXRsZSI+Tm91dmVsIMOpdsOpbmVtZW50PC9zcGFuPjwvaDM+CiAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0iaGlkZGVuIiBpZD0idWNhbC1laWQiPgogICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9ImhpZGRlbiIgaWQ9InVjYWwtZXNyYyI+CiAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0iaGlkZGVuIiBpZD0idWNhbC1lY2FsaWQiPgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ibS1yb3ciPgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAiPjxsYWJlbD5EYXRlICo8L2xhYmVsPjxpbnB1dCB0eXBlPSJkYXRlIiBpZD0idWNhbC1kYXRlIiBjbGFzcz0iZm9ybS1jb250cm9sIj48L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWdyb3VwIj48bGFiZWw+SGV1cmUgZMOpYnV0PC9sYWJlbD48aW5wdXQgdHlwZT0idGltZSIgaWQ9InVjYWwtdGltZSIgY2xhc3M9ImZvcm0tY29udHJvbCI+PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1ncm91cCI+PGxhYmVsPkhldXJlIGZpbjwvbGFiZWw+PGlucHV0IHR5cGU9InRpbWUiIGlkPSJ1Y2FsLWVuZHRpbWUiIGNsYXNzPSJmb3JtLWNvbnRyb2wiPjwvZGl2PgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWdyb3VwIiBzdHlsZT0ibWFyZ2luLWJvdHRvbToxMHB4Ij48bGFiZWw+SW50aXR1bMOpICo8L2xhYmVsPjxpbnB1dCB0eXBlPSJ0ZXh0IiBpZD0idWNhbC10YXNrIiBjbGFzcz0iZm9ybS1jb250cm9sIiBwbGFjZWhvbGRlcj0iRXg6IENvbnNlaWwgZGUgY2xhc3NlIFQzIj48L2Rpdj4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAiIHN0eWxlPSJtYXJnaW4tYm90dG9tOjE0cHgiIGlkPSJ1Y2FsLWRlc3Qtd3JhcCI+CiAgICAgICAgICAgICAgICAgICAgPGxhYmVsPkVucmVnaXN0cmVyIGRhbnM8L2xhYmVsPgogICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9ImRpc3BsYXk6ZmxleDtnYXA6OHB4O2ZsZXgtd3JhcDp3cmFwIiBpZD0idWNhbC1kZXN0LWJ0bnMiPgogICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9InVjYWwtZGVzdC1vcHQgYWN0aXZlIiBkYXRhLWRlc3Q9ImxvY2FsIj48aW5wdXQgdHlwZT0icmFkaW8iIG5hbWU9InVjYWwtZGVzdCIgdmFsdWU9ImxvY2FsIiBjaGVja2VkPjxpIGNsYXNzPSJmYXMgZmEtZGF0YWJhc2UiIHN0eWxlPSJjb2xvcjojMzQ5OGRiIj48L2k+IEFnZW5kYSBsb2NhbDwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz0idWNhbC1kZXN0LW9wdCIgZGF0YS1kZXN0PSJnY2FsIj48aW5wdXQgdHlwZT0icmFkaW8iIG5hbWU9InVjYWwtZGVzdCIgdmFsdWU9ImdjYWwiPjxpIGNsYXNzPSJmYWIgZmEtZ29vZ2xlIiBzdHlsZT0iY29sb3I6IzQyODVmNCI+PC9pPiBHb29nbGUgQWdlbmRhPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPSJ1Y2FsLWRlc3Qtb3B0IiBkYXRhLWRlc3Q9Im91dGxvb2siIHN0eWxlPSJkaXNwbGF5Om5vbmUiPjxpbnB1dCB0eXBlPSJyYWRpbyIgbmFtZT0idWNhbC1kZXN0IiB2YWx1ZT0ib3V0bG9vayI+PGkgY2xhc3M9ImZhYiBmYS1taWNyb3NvZnQiIHN0eWxlPSJjb2xvcjojMDA3OGQ0Ij48L2k+IE91dGxvb2s8L2xhYmVsPgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgIDxzZWxlY3QgaWQ9InVjYWwtZ2NhbC10YXJnZXQiIGNsYXNzPSJmb3JtLWNvbnRyb2wiIHN0eWxlPSJkaXNwbGF5Om5vbmU7bWFyZ2luLXRvcDo2cHg7Zm9udC1zaXplOi43OHJlbTsiPgogICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSIiPuKAlCBDaG9pc2lyIHVuIGFnZW5kYSDigJQ8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICA8L3NlbGVjdD4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ic2F2ZS1iYXIiPgogICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImJ0biIgb25jbGljaz0iY2xvc2VVY2FsTW9kYWwoKSIgc3R5bGU9ImJhY2tncm91bmQ6I2VlZTtjb2xvcjojNTU1O21hcmdpbi1yaWdodDo4cHg7Ij5Bbm51bGVyPC9idXR0b24+CiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYnRuIGJ0bi1hY2NlbnQiIG9uY2xpY2s9InNhdmVVY2FsRXZlbnQoKSI+PGkgY2xhc3M9ImZhcyBmYS1zYXZlIj48L2k+IEVucmVnaXN0cmVyPC9idXR0b24+CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgPC9kaXY+CiAgICA8L2Rpdj4KCiAgICA8ZGl2IGlkPSJtZW51NCIgY2xhc3M9InNlY3Rpb24iPgogICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tY2FyZCI+CiAgICAgICAgICAgIDxkaXYgc3R5bGU9ImRpc3BsYXk6ZmxleDsganVzdGlmeS1jb250ZW50OnNwYWNlLWJldHdlZW47IGFsaWduLWl0ZW1zOmNlbnRlcjsiPgogICAgICAgICAgICAgICAgPGgzIHN0eWxlPSJjb2xvcjp2YXIoLS1wcmltYXJ5KSI+UsOpdW5pb24gZGUgRGlyZWN0aW9uPC9oMz4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImFjdGlvbi1yb3ciPgogICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImJ0biBidG4td2FybmluZyBidG4tc20iIG9uY2xpY2s9InJhelBhZ2UoJ0RJUicpIj48aSBjbGFzcz0iZmFzIGZhLWVyYXNlciI+PC9pPiBSQVo8L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJidG4gYnRuLXdvcmQgYnRuLXNtIiBvbmNsaWNrPSJleHBvcnREb2NXb3JkKCdQUkVQX0RJUicpIj48aSBjbGFzcz0iZmFzIGZhLWZpbGUtd29yZCI+PC9pPiBXb3JkPC9idXR0b24+CiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYnRuIGJ0bi1kYXJrIGJ0bi1zbSIgb25jbGljaz0icHJpbnRDdXJyZW50Rm9ybSgnUFJFUF9ESVInKSI+PGkgY2xhc3M9ImZhcyBmYS1wcmludCI+PC9pPiBQREY8L2J1dHRvbj4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1ncmlkIiBzdHlsZT0ibWFyZ2luLXRvcDoxNXB4OyI+PGRpdiBjbGFzcz0iZm9ybS1ncm91cCI+PGxhYmVsPkRhdGU8L2xhYmVsPjxpbnB1dCB0eXBlPSJkYXRlIiBpZD0iZGlyLWRhdGUiIGNsYXNzPSJmb3JtLWNvbnRyb2wiPjwvZGl2PjxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAiPjxsYWJlbD5QYXJ0aWNpcGFudHM8L2xhYmVsPjxpbnB1dCB0eXBlPSJ0ZXh0IiBpZD0iZGlyLXBhcnRzIiBjbGFzcz0iZm9ybS1jb250cm9sIiBwbGFjZWhvbGRlcj0iQWRqLCBDUEUsIERERlBULi4uIj48L2Rpdj48L2Rpdj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1mdWxsIj48bGFiZWwgc3R5bGU9ImNvbG9yOnZhcigtLXByaW1hcnkpOyBmb250LXNpemU6MXJlbTsgYm9yZGVyLWJvdHRvbToycHggc29saWQgI2VlZTsgcGFkZGluZy1ib3R0b206NXB4OyBtYXJnaW4tYm90dG9tOjEwcHg7Ij48aSBjbGFzcz0iZmFzIGZhLWxpc3QtdWwiPjwvaT4gUHLDqXBhcmF0aW9uIDogVGjDqG1lcyAmIFN1amV0czwvbGFiZWw+PGRpdiBjbGFzcz0icnRlLXdyYXAiPjxkaXYgY2xhc3M9InJ0ZS1iYXIiPgo8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0iZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2JvbGQnKSIgdGl0bGU9IkdyYXMiPjxiPkc8L2I+PC9idXR0b24+CjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJkb2N1bWVudC5leGVjQ29tbWFuZCgnaXRhbGljJykiIHRpdGxlPSJJdGFsaXF1ZSI+PGk+STwvaT48L2J1dHRvbj4KPGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9ImRvY3VtZW50LmV4ZWNDb21tYW5kKCd1bmRlcmxpbmUnKSIgdGl0bGU9IlNvdWxpZ27DqSI+PHU+UzwvdT48L2J1dHRvbj4KPHNwYW4gY2xhc3M9InJ0ZS1zZXAiPjwvc3Bhbj4KPGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9ImRvY3VtZW50LmV4ZWNDb21tYW5kKCdpbnNlcnRVbm9yZGVyZWRMaXN0JykiIHRpdGxlPSJMaXN0ZSDDoCBwdWNlcyI+PGkgY2xhc3M9ImZhcyBmYS1saXN0LXVsIj48L2k+PC9idXR0b24+CjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJkb2N1bWVudC5leGVjQ29tbWFuZCgnaW5zZXJ0T3JkZXJlZExpc3QnKSIgdGl0bGU9Ikxpc3RlIG51bcOpcm90w6llIj48aSBjbGFzcz0iZmFzIGZhLWxpc3Qtb2wiPjwvaT48L2J1dHRvbj4KPHNwYW4gY2xhc3M9InJ0ZS1zZXAiPjwvc3Bhbj4KPGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9InJ0ZUNvbG9yKHRoaXMpIiB0aXRsZT0iQ291bGV1ciI+PGkgY2xhc3M9ImZhcyBmYS1wYWxldHRlIj48L2k+PC9idXR0b24+CjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJydGVMaW5rKHRoaXMpIiB0aXRsZT0iTGllbiI+PGkgY2xhc3M9ImZhcyBmYS1saW5rIj48L2k+PC9idXR0b24+CjxzcGFuIGNsYXNzPSJydGUtc2VwIj48L3NwYW4+CjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJkb2N1bWVudC5leGVjQ29tbWFuZCgndW5kbycpIiB0aXRsZT0iQW5udWxlciI+PGkgY2xhc3M9ImZhcyBmYS11bmRvIj48L2k+PC9idXR0b24+CjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJkb2N1bWVudC5leGVjQ29tbWFuZCgncmVkbycpIiB0aXRsZT0iUmVzdGF1cmVyIj48aSBjbGFzcz0iZmFzIGZhLXJlZG8iPjwvaT48L2J1dHRvbj48c3BhbiBjbGFzcz0icnRlLXNlcCI+PC9zcGFuPjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJydGVJbnNlcnRMb2dvKCkiIHRpdGxlPSJJbnPDqXJlciBsZSBsb2dvIj48aSBjbGFzcz0iZmFzIGZhLXN0YW1wIiBzdHlsZT0iY29sb3I6I2U2N2UyMiI+PC9pPjwvYnV0dG9uPgo8c3BhbiBjbGFzcz0icnRlLXNlcCI+PC9zcGFuPjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJkb2N1bWVudC5leGVjQ29tbWFuZCgnanVzdGlmeUxlZnQnKSIgdGl0bGU9IkFsaWduZXIgw6AgZ2F1Y2hlIj48aSBjbGFzcz0iZmFzIGZhLWFsaWduLWxlZnQiPjwvaT48L2J1dHRvbj48YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0iZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2p1c3RpZnlDZW50ZXInKSIgdGl0bGU9IkNlbnRyZXIiPjxpIGNsYXNzPSJmYXMgZmEtYWxpZ24tY2VudGVyIj48L2k+PC9idXR0b24+PGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9ImRvY3VtZW50LmV4ZWNDb21tYW5kKCdqdXN0aWZ5RnVsbCcpIiB0aXRsZT0iSnVzdGlmaWVyIj48aSBjbGFzcz0iZmFzIGZhLWFsaWduLWp1c3RpZnkiPjwvaT48L2J1dHRvbj48YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0icGFzdGVGcm9tV29yZCgpIiB0aXRsZT0iQ29sbGVyIGRlcHVpcyBXb3JkIGVuIGNvbnNlcnZhbnQgbGEgbWlzZSBlbiBwYWdlIiBzdHlsZT0ibWFyZ2luLWxlZnQ6NnB4O2JhY2tncm91bmQ6IzJiNTc5YTtjb2xvcjp3aGl0ZTtib3JkZXItcmFkaXVzOjRweDtwYWRkaW5nOjJweCA4cHg7Zm9udC1zaXplOi42OHJlbTtib3JkZXI6bm9uZTtjdXJzb3I6cG9pbnRlcjtmb250LWZhbWlseTppbmhlcml0O2Rpc3BsYXk6aW5saW5lLWZsZXg7YWxpZ24taXRlbXM6Y2VudGVyO2dhcDozcHg7dmVydGljYWwtYWxpZ246bWlkZGxlOyI+PGkgY2xhc3M9ImZhcyBmYS1maWxlLXdvcmQiPjwvaT7CoFdvcmQ8L2J1dHRvbj4KPC9kaXY+PGRpdiBpZD0iZGlyLWNvbnRlbnUiIGNsYXNzPSJkb2MtZWRpdG9yIiBjb250ZW50ZWRpdGFibGU9InRydWUiPjwvZGl2PjwvZGl2PjwvZGl2PgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWZ1bGwiIHN0eWxlPSJtYXJnaW4tdG9wOiAzMHB4OyI+PGxhYmVsIHN0eWxlPSJjb2xvcjp2YXIoLS1hY2NlbnQpOyBmb250LXNpemU6MXJlbTsgYm9yZGVyLWJvdHRvbToycHggc29saWQgI2VlZTsgcGFkZGluZy1ib3R0b206NXB4OyBtYXJnaW4tYm90dG9tOjEwcHg7Ij48aSBjbGFzcz0iZmFzIGZhLXBlbi1hbHQiPjwvaT4gU8OpYW5jZSA6IE5vdGVzICYgRMOpY2lzaW9uczwvbGFiZWw+PGRpdiBjbGFzcz0icnRlLXdyYXAiPjxkaXYgY2xhc3M9InJ0ZS1iYXIiPgo8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0iZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2JvbGQnKSIgdGl0bGU9IkdyYXMiPjxiPkc8L2I+PC9idXR0b24+CjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJkb2N1bWVudC5leGVjQ29tbWFuZCgnaXRhbGljJykiIHRpdGxlPSJJdGFsaXF1ZSI+PGk+STwvaT48L2J1dHRvbj4KPGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9ImRvY3VtZW50LmV4ZWNDb21tYW5kKCd1bmRlcmxpbmUnKSIgdGl0bGU9IlNvdWxpZ27DqSI+PHU+UzwvdT48L2J1dHRvbj4KPHNwYW4gY2xhc3M9InJ0ZS1zZXAiPjwvc3Bhbj4KPGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9ImRvY3VtZW50LmV4ZWNDb21tYW5kKCdpbnNlcnRVbm9yZGVyZWRMaXN0JykiIHRpdGxlPSJMaXN0ZSDDoCBwdWNlcyI+PGkgY2xhc3M9ImZhcyBmYS1saXN0LXVsIj48L2k+PC9idXR0b24+CjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJkb2N1bWVudC5leGVjQ29tbWFuZCgnaW5zZXJ0T3JkZXJlZExpc3QnKSIgdGl0bGU9Ikxpc3RlIG51bcOpcm90w6llIj48aSBjbGFzcz0iZmFzIGZhLWxpc3Qtb2wiPjwvaT48L2J1dHRvbj4KPHNwYW4gY2xhc3M9InJ0ZS1zZXAiPjwvc3Bhbj4KPGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9InJ0ZUNvbG9yKHRoaXMpIiB0aXRsZT0iQ291bGV1ciI+PGkgY2xhc3M9ImZhcyBmYS1wYWxldHRlIj48L2k+PC9idXR0b24+CjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJydGVMaW5rKHRoaXMpIiB0aXRsZT0iTGllbiI+PGkgY2xhc3M9ImZhcyBmYS1saW5rIj48L2k+PC9idXR0b24+CjxzcGFuIGNsYXNzPSJydGUtc2VwIj48L3NwYW4+CjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJkb2N1bWVudC5leGVjQ29tbWFuZCgndW5kbycpIiB0aXRsZT0iQW5udWxlciI+PGkgY2xhc3M9ImZhcyBmYS11bmRvIj48L2k+PC9idXR0b24+CjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJkb2N1bWVudC5leGVjQ29tbWFuZCgncmVkbycpIiB0aXRsZT0iUmVzdGF1cmVyIj48aSBjbGFzcz0iZmFzIGZhLXJlZG8iPjwvaT48L2J1dHRvbj48c3BhbiBjbGFzcz0icnRlLXNlcCI+PC9zcGFuPjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJydGVJbnNlcnRMb2dvKCkiIHRpdGxlPSJJbnPDqXJlciBsZSBsb2dvIj48aSBjbGFzcz0iZmFzIGZhLXN0YW1wIiBzdHlsZT0iY29sb3I6I2U2N2UyMiI+PC9pPjwvYnV0dG9uPgo8c3BhbiBjbGFzcz0icnRlLXNlcCI+PC9zcGFuPjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJkb2N1bWVudC5leGVjQ29tbWFuZCgnanVzdGlmeUxlZnQnKSIgdGl0bGU9IkFsaWduZXIgw6AgZ2F1Y2hlIj48aSBjbGFzcz0iZmFzIGZhLWFsaWduLWxlZnQiPjwvaT48L2J1dHRvbj48YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0iZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2p1c3RpZnlDZW50ZXInKSIgdGl0bGU9IkNlbnRyZXIiPjxpIGNsYXNzPSJmYXMgZmEtYWxpZ24tY2VudGVyIj48L2k+PC9idXR0b24+PGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9ImRvY3VtZW50LmV4ZWNDb21tYW5kKCdqdXN0aWZ5RnVsbCcpIiB0aXRsZT0iSnVzdGlmaWVyIj48aSBjbGFzcz0iZmFzIGZhLWFsaWduLWp1c3RpZnkiPjwvaT48L2J1dHRvbj48YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0icGFzdGVGcm9tV29yZCgpIiB0aXRsZT0iQ29sbGVyIGRlcHVpcyBXb3JkIGVuIGNvbnNlcnZhbnQgbGEgbWlzZSBlbiBwYWdlIiBzdHlsZT0ibWFyZ2luLWxlZnQ6NnB4O2JhY2tncm91bmQ6IzJiNTc5YTtjb2xvcjp3aGl0ZTtib3JkZXItcmFkaXVzOjRweDtwYWRkaW5nOjJweCA4cHg7Zm9udC1zaXplOi42OHJlbTtib3JkZXI6bm9uZTtjdXJzb3I6cG9pbnRlcjtmb250LWZhbWlseTppbmhlcml0O2Rpc3BsYXk6aW5saW5lLWZsZXg7YWxpZ24taXRlbXM6Y2VudGVyO2dhcDozcHg7dmVydGljYWwtYWxpZ246bWlkZGxlOyI+PGkgY2xhc3M9ImZhcyBmYS1maWxlLXdvcmQiPjwvaT7CoFdvcmQ8L2J1dHRvbj4KPC9kaXY+PGRpdiBpZD0iZGlyLW5vdGVzIiBjbGFzcz0iZG9jLWVkaXRvciBub3Rlcy1lZGl0b3IiIGNvbnRlbnRlZGl0YWJsZT0idHJ1ZSI+PC9kaXY+PC9kaXY+PC9kaXY+CiAgICAgICAgICAgIAogICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWZ1bGwgYXR0YWNobWVudHMtYXJlYSI+CiAgICAgICAgICAgICAgICA8bGFiZWw+PGkgY2xhc3M9ImZhcyBmYS1wYXBlcmNsaXAiPjwvaT4gUGnDqGNlcyBqb2ludGVzIC8gRG9jdW1lbnRzIGxpw6lzPC9sYWJlbD4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZpbGUtd2FybmluZyI+TGltaXRlIGNvbnNlaWxsw6llIDogZmljaGllcnMgbMOpZ2VycyBvdSBsaWVucy4gR3JvcyBmaWNoaWVycyA9IHJpc3F1ZSBkZSByYWxlbnRpc3NlbWVudC48L2Rpdj4KICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJmaWxlIiBpZD0iZGlyLWZpbGUtaW5wdXQiIGNsYXNzPSJmb3JtLWNvbnRyb2wiIG9uY2hhbmdlPSJhZGRBdHRhY2htZW50KCdkaXItYXR0YWNobWVudHMnLCB0aGlzKSI+CiAgICAgICAgICAgICAgICA8dWwgaWQ9ImRpci1hdHRhY2htZW50cyIgY2xhc3M9ImF0dGFjaG1lbnQtbGlzdCI+PC91bD4KICAgICAgICAgICAgPC9kaXY+CgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJzYXZlLWJhciI+PGJ1dHRvbiBpZD0iYnRuLXNhdmUtZGlyIiBjbGFzcz0iYnRuIGJ0bi1wcmltYXJ5IiBvbmNsaWNrPSJzYXZlUHJlcERpcmVjdGlvbigpIj48aSBjbGFzcz0iZmFzIGZhLXNhdmUiIHN0eWxlPSJtYXJnaW4tcmlnaHQ6NnB4Ij48L2k+RW5yZWdpc3RyZXIgKEhpc3RvcmlxdWUpPC9idXR0b24+PC9kaXY+CiAgICAgICAgPC9kaXY+CiAgICA8L2Rpdj4KCiAgICA8ZGl2IGlkPSJtZW51NSIgY2xhc3M9InNlY3Rpb24iPgogICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tY2FyZCI+CiAgICAgICAgICAgIDxkaXYgc3R5bGU9ImRpc3BsYXk6ZmxleDsganVzdGlmeS1jb250ZW50OnNwYWNlLWJldHdlZW47IGFsaWduLWl0ZW1zOmNlbnRlcjsiPgogICAgICAgICAgICAgICAgPGgzIHN0eWxlPSJjb2xvcjp2YXIoLS1pbmZvKSI+U3Vpdmkgw4lsw6h2ZSAvIFBvaW50IENQRTwvaDM+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJhY3Rpb24tcm93Ij4KICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJidG4gYnRuLXdhcm5pbmcgYnRuLXNtIiBvbmNsaWNrPSJyYXpQYWdlKCdTVUlWSScpIj48aSBjbGFzcz0iZmFzIGZhLWVyYXNlciI+PC9pPiBSQVo8L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJidG4gYnRuLXdvcmQgYnRuLXNtIiBvbmNsaWNrPSJleHBvcnREb2NXb3JkKCdTVUlWSScpIj48aSBjbGFzcz0iZmFzIGZhLWZpbGUtd29yZCI+PC9pPiBXb3JkPC9idXR0b24+CiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYnRuIGJ0bi1kYXJrIGJ0bi1zbSIgb25jbGljaz0icHJpbnRDdXJyZW50Rm9ybSgnU1VJVkknKSI+PGkgY2xhc3M9ImZhcyBmYS1wcmludCI+PC9pPiBQREY8L2J1dHRvbj4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1ncmlkIiBzdHlsZT0ibWFyZ2luLXRvcDoxNXB4OyI+PGRpdiBjbGFzcz0iZm9ybS1ncm91cCI+PGxhYmVsPkRhdGU8L2xhYmVsPjxpbnB1dCB0eXBlPSJkYXRlIiBpZD0ic3VpdmktZGF0ZSIgY2xhc3M9ImZvcm0tY29udHJvbCI+PC9kaXY+PGRpdiBjbGFzcz0iZm9ybS1ncm91cCI+PGxhYmVsPlBhcnRpY2lwYW50cyAoQ1BFLCBQcm9mcy4uLik8L2xhYmVsPjxpbnB1dCB0eXBlPSJ0ZXh0IiBpZD0ic3VpdmktcGFydHMiIGNsYXNzPSJmb3JtLWNvbnRyb2wiPjwvZGl2PjxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAiPjxsYWJlbD5DbGFzc2VzIENvbmNlcm7DqWVzPC9sYWJlbD48aW5wdXQgdHlwZT0idGV4dCIgaWQ9InN1aXZpLWNsYXNzZXMiIGNsYXNzPSJmb3JtLWNvbnRyb2wiPjwvZGl2PjwvZGl2PgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWZ1bGwiPjxsYWJlbD5TaXR1YXRpb25zIMOpbMOodmVzIGFib3Jkw6llcyAoTm90ZXMpPC9sYWJlbD48ZGl2IGNsYXNzPSJydGUtd3JhcCI+PGRpdiBjbGFzcz0icnRlLWJhciI+CjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJkb2N1bWVudC5leGVjQ29tbWFuZCgnYm9sZCcpIiB0aXRsZT0iR3JhcyI+PGI+RzwvYj48L2J1dHRvbj4KPGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9ImRvY3VtZW50LmV4ZWNDb21tYW5kKCdpdGFsaWMnKSIgdGl0bGU9Ikl0YWxpcXVlIj48aT5JPC9pPjwvYnV0dG9uPgo8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0iZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ3VuZGVybGluZScpIiB0aXRsZT0iU291bGlnbsOpIj48dT5TPC91PjwvYnV0dG9uPgo8c3BhbiBjbGFzcz0icnRlLXNlcCI+PC9zcGFuPgo8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0iZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2luc2VydFVub3JkZXJlZExpc3QnKSIgdGl0bGU9Ikxpc3RlIMOgIHB1Y2VzIj48aSBjbGFzcz0iZmFzIGZhLWxpc3QtdWwiPjwvaT48L2J1dHRvbj4KPGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9ImRvY3VtZW50LmV4ZWNDb21tYW5kKCdpbnNlcnRPcmRlcmVkTGlzdCcpIiB0aXRsZT0iTGlzdGUgbnVtw6lyb3TDqWUiPjxpIGNsYXNzPSJmYXMgZmEtbGlzdC1vbCI+PC9pPjwvYnV0dG9uPgo8c3BhbiBjbGFzcz0icnRlLXNlcCI+PC9zcGFuPgo8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0icnRlQ29sb3IodGhpcykiIHRpdGxlPSJDb3VsZXVyIj48aSBjbGFzcz0iZmFzIGZhLXBhbGV0dGUiPjwvaT48L2J1dHRvbj4KPGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9InJ0ZUxpbmsodGhpcykiIHRpdGxlPSJMaWVuIj48aSBjbGFzcz0iZmFzIGZhLWxpbmsiPjwvaT48L2J1dHRvbj4KPHNwYW4gY2xhc3M9InJ0ZS1zZXAiPjwvc3Bhbj4KPGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9ImRvY3VtZW50LmV4ZWNDb21tYW5kKCd1bmRvJykiIHRpdGxlPSJBbm51bGVyIj48aSBjbGFzcz0iZmFzIGZhLXVuZG8iPjwvaT48L2J1dHRvbj4KPGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9ImRvY3VtZW50LmV4ZWNDb21tYW5kKCdyZWRvJykiIHRpdGxlPSJSZXN0YXVyZXIiPjxpIGNsYXNzPSJmYXMgZmEtcmVkbyI+PC9pPjwvYnV0dG9uPjxzcGFuIGNsYXNzPSJydGUtc2VwIj48L3NwYW4+PGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9InJ0ZUluc2VydExvZ28oKSIgdGl0bGU9Ikluc8OpcmVyIGxlIGxvZ28iPjxpIGNsYXNzPSJmYXMgZmEtc3RhbXAiIHN0eWxlPSJjb2xvcjojZTY3ZTIyIj48L2k+PC9idXR0b24+CjxzcGFuIGNsYXNzPSJydGUtc2VwIj48L3NwYW4+PGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9ImRvY3VtZW50LmV4ZWNDb21tYW5kKCdqdXN0aWZ5TGVmdCcpIiB0aXRsZT0iQWxpZ25lciDDoCBnYXVjaGUiPjxpIGNsYXNzPSJmYXMgZmEtYWxpZ24tbGVmdCI+PC9pPjwvYnV0dG9uPjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJkb2N1bWVudC5leGVjQ29tbWFuZCgnanVzdGlmeUNlbnRlcicpIiB0aXRsZT0iQ2VudHJlciI+PGkgY2xhc3M9ImZhcyBmYS1hbGlnbi1jZW50ZXIiPjwvaT48L2J1dHRvbj48YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0iZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2p1c3RpZnlGdWxsJykiIHRpdGxlPSJKdXN0aWZpZXIiPjxpIGNsYXNzPSJmYXMgZmEtYWxpZ24tanVzdGlmeSI+PC9pPjwvYnV0dG9uPjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJwYXN0ZUZyb21Xb3JkKCkiIHRpdGxlPSJDb2xsZXIgZGVwdWlzIFdvcmQgZW4gY29uc2VydmFudCBsYSBtaXNlIGVuIHBhZ2UiIHN0eWxlPSJtYXJnaW4tbGVmdDo2cHg7YmFja2dyb3VuZDojMmI1NzlhO2NvbG9yOndoaXRlO2JvcmRlci1yYWRpdXM6NHB4O3BhZGRpbmc6MnB4IDhweDtmb250LXNpemU6LjY4cmVtO2JvcmRlcjpub25lO2N1cnNvcjpwb2ludGVyO2ZvbnQtZmFtaWx5OmluaGVyaXQ7ZGlzcGxheTppbmxpbmUtZmxleDthbGlnbi1pdGVtczpjZW50ZXI7Z2FwOjNweDt2ZXJ0aWNhbC1hbGlnbjptaWRkbGU7Ij48aSBjbGFzcz0iZmFzIGZhLWZpbGUtd29yZCI+PC9pPsKgV29yZDwvYnV0dG9uPgo8L2Rpdj48ZGl2IGlkPSJzdWl2aS1jb250ZW51IiBjbGFzcz0iZG9jLWVkaXRvciIgY29udGVudGVkaXRhYmxlPSJ0cnVlIj48L2Rpdj48L2Rpdj48L2Rpdj4KICAgICAgICAgICAgCiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZnVsbCBhdHRhY2htZW50cy1hcmVhIj4KICAgICAgICAgICAgICAgIDxsYWJlbD48aSBjbGFzcz0iZmFzIGZhLXBhcGVyY2xpcCI+PC9pPiBQacOoY2VzIGpvaW50ZXM8L2xhYmVsPgogICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9ImZpbGUiIGlkPSJzdWl2aS1maWxlLWlucHV0IiBjbGFzcz0iZm9ybS1jb250cm9sIiBvbmNoYW5nZT0iYWRkQXR0YWNobWVudCgnc3VpdmktYXR0YWNobWVudHMnLCB0aGlzKSI+CiAgICAgICAgICAgICAgICA8dWwgaWQ9InN1aXZpLWF0dGFjaG1lbnRzIiBjbGFzcz0iYXR0YWNobWVudC1saXN0Ij48L3VsPgogICAgICAgICAgICA8L2Rpdj4KCiAgICAgICAgICAgIDxkaXYgY2xhc3M9InNhdmUtYmFyIj48YnV0dG9uIGlkPSJidG4tc2F2ZS1zdWl2aSIgY2xhc3M9ImJ0biBidG4taW5mbyIgb25jbGljaz0ic2F2ZVN1aXZpRWxldmUoKSI+PGkgY2xhc3M9ImZhcyBmYS1zYXZlIiBzdHlsZT0ibWFyZ2luLXJpZ2h0OjZweCI+PC9pPkVucmVnaXN0cmVyIChIaXN0b3JpcXVlKTwvYnV0dG9uPjwvZGl2PgogICAgICAgIDwvZGl2PgogICAgPC9kaXY+CgogICAgPGRpdiBpZD0ibWVudTYiIGNsYXNzPSJzZWN0aW9uIj4KICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWNhcmQiPgogICAgICAgICAgICA8ZGl2IHN0eWxlPSJkaXNwbGF5OmZsZXg7IGp1c3RpZnktY29udGVudDpzcGFjZS1iZXR3ZWVuOyBhbGlnbi1pdGVtczpjZW50ZXI7Ij4KICAgICAgICAgICAgICAgIDxoMyBzdHlsZT0iY29sb3I6dmFyKC0tYWNjZW50KSI+U2Fpc2lyIHVuIEVudHJldGllbjwvaDM+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJhY3Rpb24tcm93Ij4KICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJidG4gYnRuLXdhcm5pbmcgYnRuLXNtIiBvbmNsaWNrPSJyYXpQYWdlKCdFTlQnKSI+PGkgY2xhc3M9ImZhcyBmYS1lcmFzZXIiPjwvaT4gUkFaPC9idXR0b24+CiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYnRuIGJ0bi13b3JkIGJ0bi1zbSIgb25jbGljaz0iZXhwb3J0RG9jV29yZCgnRU5UJykiPjxpIGNsYXNzPSJmYXMgZmEtZmlsZS13b3JkIj48L2k+IFdvcmQ8L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJidG4gYnRuLWRhcmsgYnRuLXNtIiBvbmNsaWNrPSJwcmludEN1cnJlbnRGb3JtKCdFTlQnKSI+PGkgY2xhc3M9ImZhcyBmYS1wcmludCI+PC9pPiBQREY8L2J1dHRvbj4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1ncmlkIiBzdHlsZT0ibWFyZ2luLXRvcDoxNXB4OyI+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWdyb3VwIj48bGFiZWw+RGF0ZTwvbGFiZWw+PGlucHV0IHR5cGU9ImRhdGUiIGlkPSJlbnQtZGF0ZSIgY2xhc3M9ImZvcm0tY29udHJvbCI+PC9kaXY+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWdyb3VwIj4KICAgICAgICAgICAgICAgICAgICA8bGFiZWw+VHlwZTwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iZGlzcGxheTpmbGV4OyBnYXA6NXB4OyI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxzZWxlY3QgaWQ9ImVudC10eXBlIiBjbGFzcz0iZm9ybS1jb250cm9sIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24+RW50cmV0aWVuIFJIIC8gUGVyc29ubmVsPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uPlJlbmRlei12b3VzIEZhbWlsbGU8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24+U3Vpdmkgw4lsw6h2ZTwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbj5QYXJ0ZW5haXJlczwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbj5JbnNwZWN0aW9uPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uPkF1dHJlPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvc2VsZWN0PgogICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJidG4gYnRuLXByaW1hcnkgYnRuLWljb24iIG9uY2xpY2s9ImFkZEN1c3RvbVR5cGUoJ2VudC10eXBlJykiPjxpIGNsYXNzPSJmYXMgZmEtcGx1cyI+PC9pPjwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8ZGl2IHN0eWxlPSJkaXNwbGF5OmZsZXg7Z2FwOjE1cHg7ZmxleC13cmFwOndyYXA7Ij4KICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9ImZsZXg6MTttaW4td2lkdGg6MjUwcHg7YmFja2dyb3VuZDojZjlmOWY5O3BhZGRpbmc6MTVweDtib3JkZXItcmFkaXVzOjVweDtib3JkZXItbGVmdDozcHggc29saWQgI2U2N2UyMjsiPgogICAgICAgICAgICAgICAgICAgIDxsYWJlbD48aSBjbGFzcz0iZmFzIGZhLXVzZXItZ3JhZHVhdGUiIHN0eWxlPSJjb2xvcjojZTY3ZTIyO21hcmdpbi1yaWdodDo0cHgiPjwvaT4gw4lsw6h2ZXMgY29uY2VybsOpczwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBpZD0iZW50LXN0dWRlbnRzLWNvbnRhaW5lciI+PGRpdiBjbGFzcz0ibXVsdGktcm93IGVudC1zdHVkZW50Ij48aW5wdXQgdHlwZT0idGV4dCIgY2xhc3M9ImZvcm0tY29udHJvbCBuYW1lIiBwbGFjZWhvbGRlcj0iTm9tIFByw6lub20iPjxidXR0b24gY2xhc3M9ImJ0biBidG4tZGFuZ2VyIGJ0bi1pY29uIiBvbmNsaWNrPSJ0aGlzLnBhcmVudEVsZW1lbnQucmVtb3ZlKCkiPjxpIGNsYXNzPSJmYXMgZmEtdGltZXMiPjwvaT48L2J1dHRvbj48L2Rpdj48L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJidG4gYnRuLXNtIGJ0bi1zdWNjZXNzIiBvbmNsaWNrPSJhZGRNdWx0aVJvdygnZW50LXN0dWRlbnRzLWNvbnRhaW5lcicsICdlbnQtc3R1ZGVudCcsICdOb20gw4lsw6h2ZScpIj4rIMOJbMOodmU8L2J1dHRvbj4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iZmxleDoxO21pbi13aWR0aDoyNTBweDtiYWNrZ3JvdW5kOiNmOWY5Zjk7cGFkZGluZzoxNXB4O2JvcmRlci1yYWRpdXM6NXB4O2JvcmRlci1sZWZ0OjNweCBzb2xpZCAjMjk4MGI5OyI+CiAgICAgICAgICAgICAgICAgICAgPGxhYmVsPjxpIGNsYXNzPSJmYXMgZmEtY2hhbGtib2FyZC10ZWFjaGVyIiBzdHlsZT0iY29sb3I6IzI5ODBiOTttYXJnaW4tcmlnaHQ6NHB4Ij48L2k+IEVuc2VpZ25hbnRzIC8gUGVyc29ubmVsczwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBpZD0iZW50LXRlYWNoZXJzLWNvbnRhaW5lciI+PGRpdiBjbGFzcz0ibXVsdGktcm93IGVudC10ZWFjaGVyIj48aW5wdXQgdHlwZT0idGV4dCIgY2xhc3M9ImZvcm0tY29udHJvbCBuYW1lIiBwbGFjZWhvbGRlcj0iTm9tIFByw6lub20iPjxidXR0b24gY2xhc3M9ImJ0biBidG4tZGFuZ2VyIGJ0bi1pY29uIiBvbmNsaWNrPSJ0aGlzLnBhcmVudEVsZW1lbnQucmVtb3ZlKCkiPjxpIGNsYXNzPSJmYXMgZmEtdGltZXMiPjwvaT48L2J1dHRvbj48L2Rpdj48L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJidG4gYnRuLXNtIGJ0bi1zdWNjZXNzIiBvbmNsaWNrPSJhZGRNdWx0aVJvdygnZW50LXRlYWNoZXJzLWNvbnRhaW5lcicsICdlbnQtdGVhY2hlcicsICdOb20gUGVyc29ubmVsJykiPisgUGVyc29ubmVsPC9idXR0b24+CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZnVsbCI+PGxhYmVsPk9iamV0PC9sYWJlbD48aW5wdXQgdHlwZT0idGV4dCIgaWQ9ImVudC1vYmpldCIgY2xhc3M9ImZvcm0tY29udHJvbCI+PC9kaXY+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZnVsbCI+PGxhYmVsPkNvbXB0ZSBSZW5kdTwvbGFiZWw+PGRpdiBjbGFzcz0icnRlLXdyYXAiPjxkaXYgY2xhc3M9InJ0ZS1iYXIiPgo8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0iZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2JvbGQnKSIgdGl0bGU9IkdyYXMiPjxiPkc8L2I+PC9idXR0b24+CjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJkb2N1bWVudC5leGVjQ29tbWFuZCgnaXRhbGljJykiIHRpdGxlPSJJdGFsaXF1ZSI+PGk+STwvaT48L2J1dHRvbj4KPGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9ImRvY3VtZW50LmV4ZWNDb21tYW5kKCd1bmRlcmxpbmUnKSIgdGl0bGU9IlNvdWxpZ27DqSI+PHU+UzwvdT48L2J1dHRvbj4KPHNwYW4gY2xhc3M9InJ0ZS1zZXAiPjwvc3Bhbj4KPGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9ImRvY3VtZW50LmV4ZWNDb21tYW5kKCdpbnNlcnRVbm9yZGVyZWRMaXN0JykiIHRpdGxlPSJMaXN0ZSDDoCBwdWNlcyI+PGkgY2xhc3M9ImZhcyBmYS1saXN0LXVsIj48L2k+PC9idXR0b24+CjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJkb2N1bWVudC5leGVjQ29tbWFuZCgnaW5zZXJ0T3JkZXJlZExpc3QnKSIgdGl0bGU9Ikxpc3RlIG51bcOpcm90w6llIj48aSBjbGFzcz0iZmFzIGZhLWxpc3Qtb2wiPjwvaT48L2J1dHRvbj4KPHNwYW4gY2xhc3M9InJ0ZS1zZXAiPjwvc3Bhbj4KPGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9InJ0ZUNvbG9yKHRoaXMpIiB0aXRsZT0iQ291bGV1ciI+PGkgY2xhc3M9ImZhcyBmYS1wYWxldHRlIj48L2k+PC9idXR0b24+CjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJydGVMaW5rKHRoaXMpIiB0aXRsZT0iTGllbiI+PGkgY2xhc3M9ImZhcyBmYS1saW5rIj48L2k+PC9idXR0b24+CjxzcGFuIGNsYXNzPSJydGUtc2VwIj48L3NwYW4+CjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJkb2N1bWVudC5leGVjQ29tbWFuZCgndW5kbycpIiB0aXRsZT0iQW5udWxlciI+PGkgY2xhc3M9ImZhcyBmYS11bmRvIj48L2k+PC9idXR0b24+CjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJkb2N1bWVudC5leGVjQ29tbWFuZCgncmVkbycpIiB0aXRsZT0iUmVzdGF1cmVyIj48aSBjbGFzcz0iZmFzIGZhLXJlZG8iPjwvaT48L2J1dHRvbj48c3BhbiBjbGFzcz0icnRlLXNlcCI+PC9zcGFuPjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJydGVJbnNlcnRMb2dvKCkiIHRpdGxlPSJJbnPDqXJlciBsZSBsb2dvIj48aSBjbGFzcz0iZmFzIGZhLXN0YW1wIiBzdHlsZT0iY29sb3I6I2U2N2UyMiI+PC9pPjwvYnV0dG9uPgo8c3BhbiBjbGFzcz0icnRlLXNlcCI+PC9zcGFuPjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJkb2N1bWVudC5leGVjQ29tbWFuZCgnanVzdGlmeUxlZnQnKSIgdGl0bGU9IkFsaWduZXIgw6AgZ2F1Y2hlIj48aSBjbGFzcz0iZmFzIGZhLWFsaWduLWxlZnQiPjwvaT48L2J1dHRvbj48YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0iZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2p1c3RpZnlDZW50ZXInKSIgdGl0bGU9IkNlbnRyZXIiPjxpIGNsYXNzPSJmYXMgZmEtYWxpZ24tY2VudGVyIj48L2k+PC9idXR0b24+PGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9ImRvY3VtZW50LmV4ZWNDb21tYW5kKCdqdXN0aWZ5RnVsbCcpIiB0aXRsZT0iSnVzdGlmaWVyIj48aSBjbGFzcz0iZmFzIGZhLWFsaWduLWp1c3RpZnkiPjwvaT48L2J1dHRvbj48YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0icGFzdGVGcm9tV29yZCgpIiB0aXRsZT0iQ29sbGVyIGRlcHVpcyBXb3JkIGVuIGNvbnNlcnZhbnQgbGEgbWlzZSBlbiBwYWdlIiBzdHlsZT0ibWFyZ2luLWxlZnQ6NnB4O2JhY2tncm91bmQ6IzJiNTc5YTtjb2xvcjp3aGl0ZTtib3JkZXItcmFkaXVzOjRweDtwYWRkaW5nOjJweCA4cHg7Zm9udC1zaXplOi42OHJlbTtib3JkZXI6bm9uZTtjdXJzb3I6cG9pbnRlcjtmb250LWZhbWlseTppbmhlcml0O2Rpc3BsYXk6aW5saW5lLWZsZXg7YWxpZ24taXRlbXM6Y2VudGVyO2dhcDozcHg7dmVydGljYWwtYWxpZ246bWlkZGxlOyI+PGkgY2xhc3M9ImZhcyBmYS1maWxlLXdvcmQiPjwvaT7CoFdvcmQ8L2J1dHRvbj4KPC9kaXY+PGRpdiBpZD0iZW50LWNvbnRlbnUiIGNsYXNzPSJkb2MtZWRpdG9yIiBjb250ZW50ZWRpdGFibGU9InRydWUiPjwvZGl2PjwvZGl2PjwvZGl2PgogICAgICAgICAgICAKICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1mdWxsIGF0dGFjaG1lbnRzLWFyZWEiPgogICAgICAgICAgICAgICAgPGxhYmVsPjxpIGNsYXNzPSJmYXMgZmEtcGFwZXJjbGlwIj48L2k+IFBpw6hjZXMgam9pbnRlczwvbGFiZWw+CiAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0iZmlsZSIgaWQ9ImVudC1maWxlLWlucHV0IiBjbGFzcz0iZm9ybS1jb250cm9sIiBvbmNoYW5nZT0iYWRkQXR0YWNobWVudCgnZW50LWF0dGFjaG1lbnRzJywgdGhpcykiPgogICAgICAgICAgICAgICAgPHVsIGlkPSJlbnQtYXR0YWNobWVudHMiIGNsYXNzPSJhdHRhY2htZW50LWxpc3QiPjwvdWw+CiAgICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgICAgPGRpdiBjbGFzcz0ic2F2ZS1iYXIiPjxidXR0b24gaWQ9ImJ0bi1zYXZlLWVudCIgY2xhc3M9ImJ0biBidG4tcHJpbWFyeSIgb25jbGljaz0ic2F2ZUVudHJldGllbigpIj48aSBjbGFzcz0iZmFzIGZhLXNhdmUiIHN0eWxlPSJtYXJnaW4tcmlnaHQ6NnB4Ij48L2k+RW5yZWdpc3RyZXI8L2J1dHRvbj48L2Rpdj4KICAgICAgICA8L2Rpdj4KICAgIDwvZGl2PgoKICAgIDxkaXYgaWQ9Im1lbnU3IiBjbGFzcz0ic2VjdGlvbiI+CiAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1jYXJkIj4KICAgICAgICAgICAgPGRpdiBzdHlsZT0iZGlzcGxheTpmbGV4OyBqdXN0aWZ5LWNvbnRlbnQ6c3BhY2UtYmV0d2VlbjsgYWxpZ24taXRlbXM6Y2VudGVyOyI+CiAgICAgICAgICAgICAgICA8aDMgc3R5bGU9ImNvbG9yOnZhcigtLXN1Y2Nlc3MpIj5TYWlzaXIgdW5lIFLDqXVuaW9uPC9oMz4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImFjdGlvbi1yb3ciPgogICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImJ0biBidG4td2FybmluZyBidG4tc20iIG9uY2xpY2s9InJhelBhZ2UoJ1JFVScpIj48aSBjbGFzcz0iZmFzIGZhLWVyYXNlciI+PC9pPiBSQVo8L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJidG4gYnRuLXdvcmQgYnRuLXNtIiBvbmNsaWNrPSJleHBvcnREb2NXb3JkKCdSRVUnKSI+PGkgY2xhc3M9ImZhcyBmYS1maWxlLXdvcmQiPjwvaT4gV29yZDwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImJ0biBidG4tZGFyayBidG4tc20iIG9uY2xpY2s9InByaW50Q3VycmVudEZvcm0oJ1JFVScpIj48aSBjbGFzcz0iZmFzIGZhLXByaW50Ij48L2k+IFBERjwvYnV0dG9uPgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWdyaWQiIHN0eWxlPSJtYXJnaW4tdG9wOjE1cHg7Ij4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAiPjxsYWJlbD5EYXRlPC9sYWJlbD48aW5wdXQgdHlwZT0iZGF0ZSIgaWQ9InJldS1kYXRlIiBjbGFzcz0iZm9ybS1jb250cm9sIj48L2Rpdj4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAiPgogICAgICAgICAgICAgICAgICAgIDxsYWJlbD5UeXBlIGRlIHLDqXVuaW9uPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJkaXNwbGF5OmZsZXg7IGdhcDo1cHg7Ij4KICAgICAgICAgICAgICAgICAgICAgICAgPHNlbGVjdCBpZD0icmV1LXR5cGUiIGNsYXNzPSJmb3JtLWNvbnRyb2wiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbj5Db25zZWlsIGQnQWRtaW5pc3RyYXRpb248L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24+Q29uc2VpbCBQw6lkYWdvZ2lxdWU8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24+Q29taXTDqSBkZSBQaWxvdGFnZSAoQ09QSUwpPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uPkNvbW1pc3Npb24gw4lkdWNhdGl2ZTwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbj7DiXF1aXBlIMOpZHVjYXRpdmU8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24+RVNTPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uPkdQRFM8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24+Q2VsbHVsZSBkZSB2ZWlsbGU8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24+Rm9uZCBzb2NpYWw8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24+QXV0cmU8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICAgICAgPC9zZWxlY3Q+CiAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImJ0biBidG4tc3VjY2VzcyBidG4taWNvbiIgb25jbGljaz0iYWRkQ3VzdG9tVHlwZSgncmV1LXR5cGUnKSI+PGkgY2xhc3M9ImZhcyBmYS1wbHVzIj48L2k+PC9idXR0b24+CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDxkaXYgc3R5bGU9ImRpc3BsYXk6ZmxleDtnYXA6MTVweDtmbGV4LXdyYXA6d3JhcDsiPgogICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iZmxleDoxO21pbi13aWR0aDoyNTBweDtiYWNrZ3JvdW5kOiNmOWY5Zjk7cGFkZGluZzoxNXB4O2JvcmRlci1yYWRpdXM6NXB4O2JvcmRlci1sZWZ0OjNweCBzb2xpZCAjZTY3ZTIyOyI+CiAgICAgICAgICAgICAgICAgICAgPGxhYmVsPjxpIGNsYXNzPSJmYXMgZmEtdXNlci1ncmFkdWF0ZSIgc3R5bGU9ImNvbG9yOiNlNjdlMjI7bWFyZ2luLXJpZ2h0OjRweCI+PC9pPiDDiWzDqHZlcyBjb25jZXJuw6lzPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICA8ZGl2IGlkPSJyZXUtc3R1ZGVudHMtY29udGFpbmVyIj48ZGl2IGNsYXNzPSJtdWx0aS1yb3cgcmV1LXN0dWRlbnQiPjxpbnB1dCB0eXBlPSJ0ZXh0IiBjbGFzcz0iZm9ybS1jb250cm9sIG5hbWUiIHBsYWNlaG9sZGVyPSJOb20gUHLDqW5vbSI+PGJ1dHRvbiBjbGFzcz0iYnRuIGJ0bi1kYW5nZXIgYnRuLWljb24iIG9uY2xpY2s9InRoaXMucGFyZW50RWxlbWVudC5yZW1vdmUoKSI+PGkgY2xhc3M9ImZhcyBmYS10aW1lcyI+PC9pPjwvYnV0dG9uPjwvZGl2PjwvZGl2PgogICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImJ0biBidG4tc20gYnRuLXN1Y2Nlc3MiIG9uY2xpY2s9ImFkZE11bHRpUm93KCdyZXUtc3R1ZGVudHMtY29udGFpbmVyJywgJ3JldS1zdHVkZW50JywgJ05vbSDDiWzDqHZlJykiPisgw4lsw6h2ZTwvYnV0dG9uPgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJmbGV4OjE7bWluLXdpZHRoOjI1MHB4O2JhY2tncm91bmQ6I2Y5ZjlmOTtwYWRkaW5nOjE1cHg7Ym9yZGVyLXJhZGl1czo1cHg7Ym9yZGVyLWxlZnQ6M3B4IHNvbGlkICMyOTgwYjk7Ij4KICAgICAgICAgICAgICAgICAgICA8bGFiZWw+PGkgY2xhc3M9ImZhcyBmYS1jaGFsa2JvYXJkLXRlYWNoZXIiIHN0eWxlPSJjb2xvcjojMjk4MGI5O21hcmdpbi1yaWdodDo0cHgiPjwvaT4gUGFydGljaXBhbnRzIC8gUGVyc29ubmVsczwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBpZD0icmV1LXRlYWNoZXJzLWNvbnRhaW5lciI+PGRpdiBjbGFzcz0ibXVsdGktcm93IHJldS10ZWFjaGVyIj48aW5wdXQgdHlwZT0idGV4dCIgY2xhc3M9ImZvcm0tY29udHJvbCBuYW1lIiBwbGFjZWhvbGRlcj0iTm9tIFByw6lub20iPjxidXR0b24gY2xhc3M9ImJ0biBidG4tZGFuZ2VyIGJ0bi1pY29uIiBvbmNsaWNrPSJ0aGlzLnBhcmVudEVsZW1lbnQucmVtb3ZlKCkiPjxpIGNsYXNzPSJmYXMgZmEtdGltZXMiPjwvaT48L2J1dHRvbj48L2Rpdj48L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJidG4gYnRuLXNtIGJ0bi1zdWNjZXNzIiBvbmNsaWNrPSJhZGRNdWx0aVJvdygncmV1LXRlYWNoZXJzLWNvbnRhaW5lcicsICdyZXUtdGVhY2hlcicsICdOb20gUGVyc29ubmVsJykiPisgUGVyc29ubmVsPC9idXR0b24+CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZnVsbCI+PGxhYmVsPk9yZHJlIGR1IGpvdXI8L2xhYmVsPjxpbnB1dCB0eXBlPSJ0ZXh0IiBpZD0icmV1LW9kaiIgY2xhc3M9ImZvcm0tY29udHJvbCI+PC9kaXY+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZnVsbCI+PGxhYmVsPkNvbXB0ZS1yZW5kdTwvbGFiZWw+PGRpdiBjbGFzcz0icnRlLXdyYXAiPjxkaXYgY2xhc3M9InJ0ZS1iYXIiPgo8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0iZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2JvbGQnKSIgdGl0bGU9IkdyYXMiPjxiPkc8L2I+PC9idXR0b24+CjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJkb2N1bWVudC5leGVjQ29tbWFuZCgnaXRhbGljJykiIHRpdGxlPSJJdGFsaXF1ZSI+PGk+STwvaT48L2J1dHRvbj4KPGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9ImRvY3VtZW50LmV4ZWNDb21tYW5kKCd1bmRlcmxpbmUnKSIgdGl0bGU9IlNvdWxpZ27DqSI+PHU+UzwvdT48L2J1dHRvbj4KPHNwYW4gY2xhc3M9InJ0ZS1zZXAiPjwvc3Bhbj4KPGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9ImRvY3VtZW50LmV4ZWNDb21tYW5kKCdpbnNlcnRVbm9yZGVyZWRMaXN0JykiIHRpdGxlPSJMaXN0ZSDDoCBwdWNlcyI+PGkgY2xhc3M9ImZhcyBmYS1saXN0LXVsIj48L2k+PC9idXR0b24+CjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJkb2N1bWVudC5leGVjQ29tbWFuZCgnaW5zZXJ0T3JkZXJlZExpc3QnKSIgdGl0bGU9Ikxpc3RlIG51bcOpcm90w6llIj48aSBjbGFzcz0iZmFzIGZhLWxpc3Qtb2wiPjwvaT48L2J1dHRvbj4KPHNwYW4gY2xhc3M9InJ0ZS1zZXAiPjwvc3Bhbj4KPGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9InJ0ZUNvbG9yKHRoaXMpIiB0aXRsZT0iQ291bGV1ciI+PGkgY2xhc3M9ImZhcyBmYS1wYWxldHRlIj48L2k+PC9idXR0b24+CjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJydGVMaW5rKHRoaXMpIiB0aXRsZT0iTGllbiI+PGkgY2xhc3M9ImZhcyBmYS1saW5rIj48L2k+PC9idXR0b24+CjxzcGFuIGNsYXNzPSJydGUtc2VwIj48L3NwYW4+CjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJkb2N1bWVudC5leGVjQ29tbWFuZCgndW5kbycpIiB0aXRsZT0iQW5udWxlciI+PGkgY2xhc3M9ImZhcyBmYS11bmRvIj48L2k+PC9idXR0b24+CjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJkb2N1bWVudC5leGVjQ29tbWFuZCgncmVkbycpIiB0aXRsZT0iUmVzdGF1cmVyIj48aSBjbGFzcz0iZmFzIGZhLXJlZG8iPjwvaT48L2J1dHRvbj48c3BhbiBjbGFzcz0icnRlLXNlcCI+PC9zcGFuPjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJydGVJbnNlcnRMb2dvKCkiIHRpdGxlPSJJbnPDqXJlciBsZSBsb2dvIj48aSBjbGFzcz0iZmFzIGZhLXN0YW1wIiBzdHlsZT0iY29sb3I6I2U2N2UyMiI+PC9pPjwvYnV0dG9uPgo8c3BhbiBjbGFzcz0icnRlLXNlcCI+PC9zcGFuPjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJkb2N1bWVudC5leGVjQ29tbWFuZCgnanVzdGlmeUxlZnQnKSIgdGl0bGU9IkFsaWduZXIgw6AgZ2F1Y2hlIj48aSBjbGFzcz0iZmFzIGZhLWFsaWduLWxlZnQiPjwvaT48L2J1dHRvbj48YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0iZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2p1c3RpZnlDZW50ZXInKSIgdGl0bGU9IkNlbnRyZXIiPjxpIGNsYXNzPSJmYXMgZmEtYWxpZ24tY2VudGVyIj48L2k+PC9idXR0b24+PGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9ImRvY3VtZW50LmV4ZWNDb21tYW5kKCdqdXN0aWZ5RnVsbCcpIiB0aXRsZT0iSnVzdGlmaWVyIj48aSBjbGFzcz0iZmFzIGZhLWFsaWduLWp1c3RpZnkiPjwvaT48L2J1dHRvbj48YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0icGFzdGVGcm9tV29yZCgpIiB0aXRsZT0iQ29sbGVyIGRlcHVpcyBXb3JkIGVuIGNvbnNlcnZhbnQgbGEgbWlzZSBlbiBwYWdlIiBzdHlsZT0ibWFyZ2luLWxlZnQ6NnB4O2JhY2tncm91bmQ6IzJiNTc5YTtjb2xvcjp3aGl0ZTtib3JkZXItcmFkaXVzOjRweDtwYWRkaW5nOjJweCA4cHg7Zm9udC1zaXplOi42OHJlbTtib3JkZXI6bm9uZTtjdXJzb3I6cG9pbnRlcjtmb250LWZhbWlseTppbmhlcml0O2Rpc3BsYXk6aW5saW5lLWZsZXg7YWxpZ24taXRlbXM6Y2VudGVyO2dhcDozcHg7dmVydGljYWwtYWxpZ246bWlkZGxlOyI+PGkgY2xhc3M9ImZhcyBmYS1maWxlLXdvcmQiPjwvaT7CoFdvcmQ8L2J1dHRvbj4KPC9kaXY+PGRpdiBpZD0icmV1LWNvbnRlbnUiIGNsYXNzPSJkb2MtZWRpdG9yIiBjb250ZW50ZWRpdGFibGU9InRydWUiPjwvZGl2PjwvZGl2PjwvZGl2PgogICAgICAgICAgICAKICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1mdWxsIGF0dGFjaG1lbnRzLWFyZWEiPgogICAgICAgICAgICAgICAgPGxhYmVsPjxpIGNsYXNzPSJmYXMgZmEtcGFwZXJjbGlwIj48L2k+IFBpw6hjZXMgam9pbnRlczwvbGFiZWw+CiAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0iZmlsZSIgaWQ9InJldS1maWxlLWlucHV0IiBjbGFzcz0iZm9ybS1jb250cm9sIiBvbmNoYW5nZT0iYWRkQXR0YWNobWVudCgncmV1LWF0dGFjaG1lbnRzJywgdGhpcykiPgogICAgICAgICAgICAgICAgPHVsIGlkPSJyZXUtYXR0YWNobWVudHMiIGNsYXNzPSJhdHRhY2htZW50LWxpc3QiPjwvdWw+CiAgICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgICAgPGRpdiBjbGFzcz0ic2F2ZS1iYXIiPjxidXR0b24gaWQ9ImJ0bi1zYXZlLXJldSIgY2xhc3M9ImJ0biBidG4tc3VjY2VzcyIgb25jbGljaz0ic2F2ZVJldW5pb24oKSI+PGkgY2xhc3M9ImZhcyBmYS1zYXZlIiBzdHlsZT0ibWFyZ2luLXJpZ2h0OjZweCI+PC9pPkVucmVnaXN0cmVyPC9idXR0b24+PC9kaXY+CiAgICAgICAgPC9kaXY+CiAgICA8L2Rpdj4KCiAgICA8ZGl2IGlkPSJtZW51OCIgY2xhc3M9InNlY3Rpb24iPgogICAgICAgIDxkaXYgY2xhc3M9ImZpbHRlcnMtYmFyIj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1ncm91cCIgc3R5bGU9ImZsZXg6MTsiPjxsYWJlbD5SZWNoZXJjaGUgZ2xvYmFsZTwvbGFiZWw+PGlucHV0IHR5cGU9InRleHQiIGlkPSJzZWFyY2gtc3R1ZGVudCIgY2xhc3M9ImZvcm0tY29udHJvbCIgcGxhY2Vob2xkZXI9IlRhcGVyIHVuIG5vbS4uLiIgZGF0YS1zdHVkZW50LWFjPSIxIiBvbmtleXVwPSJyZW5kZXJIaXN0b3J5KCkiPjwvZGl2PgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWdyb3VwIiBzdHlsZT0iZmxleDoxOyI+PGxhYmVsPlR5cGU8L2xhYmVsPjxzZWxlY3QgaWQ9InNlYXJjaC10eXBlIiBjbGFzcz0iZm9ybS1jb250cm9sIiBvbmNoYW5nZT0icmVuZGVySGlzdG9yeSgpIj48b3B0aW9uIHZhbHVlPSJBTEwiPlRvdXQ8L29wdGlvbj48b3B0aW9uIHZhbHVlPSJFTlQiPkVudHJldGllbnM8L29wdGlvbj48b3B0aW9uIHZhbHVlPSJSRVUiPlLDqXVuaW9uczwvb3B0aW9uPjxvcHRpb24gdmFsdWU9IkRJUiI+RGlyZWN0aW9uPC9vcHRpb24+PG9wdGlvbiB2YWx1ZT0iU1VJVkkiPlN1aXZpPC9vcHRpb24+PC9zZWxlY3Q+PC9kaXY+CiAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImJ0biBidG4tZGFyayBidG4tc20iIG9uY2xpY2s9InByaW50QWxsSGlzdG9yeSgpIj5Ub3V0IEltcHJpbWVyPC9idXR0b24+CiAgICAgICAgPC9kaXY+CiAgICAgICAgPHRhYmxlIGNsYXNzPSJkYXRhLXRhYmxlIiBpZD0iaGlzdG9yeS10YWJsZSI+PHRoZWFkPjx0cj48dGg+RGF0ZTwvdGg+PHRoPlR5cGU8L3RoPjx0aD5TdWpldCAvIFBlcnNvbm5lczwvdGg+PHRoPkFjdGlvbnM8L3RoPjwvdHI+PC90aGVhZD48dGJvZHk+PC90Ym9keT48L3RhYmxlPgogICAgPC9kaXY+CgogICAgPGRpdiBpZD0ibWVudTkiIGNsYXNzPSJzZWN0aW9uIj4KICAgICAgICA8aDMgc3R5bGU9Im1hcmdpbi1ib3R0b206MjBweDsgY29sb3I6dmFyKC0tcHJpbWFyeSk7Ij48aSBjbGFzcz0iZmFzIGZhLWNoYXJ0LWxpbmUiPjwvaT4gUGlsb3RhZ2UgR2xvYmFsPC9oMz4KICAgICAgICA8ZGl2IGNsYXNzPSJkYXNoLWtwaS1ncmlkIj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0ia3BpLWNhcmQiIHN0eWxlPSJib3JkZXItYm90dG9tLWNvbG9yOnZhcigtLWhpZ2hsaWdodCkiPjxpIGNsYXNzPSJmYXMgZmEtZmlyZSBmYS0yeCBrcGktaWNvbiIgc3R5bGU9ImNvbG9yOnZhcigtLWhpZ2hsaWdodCkiPjwvaT48c3BhbiBjbGFzcz0ia3BpLW51bSIgaWQ9ImtwaS10b2RvIj4wPC9zcGFuPjxzcGFuIGNsYXNzPSJrcGktbGFiZWwiPlVyZ2VuY2VzPC9zcGFuPjwvZGl2PgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJrcGktY2FyZCIgc3R5bGU9ImJvcmRlci1ib3R0b20tY29sb3I6dmFyKC0tcHJpbWFyeSkiPjxpIGNsYXNzPSJmYXMgZmEtY2xpcGJvYXJkLWxpc3QgZmEtMngga3BpLWljb24iIHN0eWxlPSJjb2xvcjp2YXIoLS1wcmltYXJ5KSI+PC9pPjxzcGFuIGNsYXNzPSJrcGktbnVtIiBpZD0ia3BpLWRpciI+MDwvc3Bhbj48c3BhbiBjbGFzcz0ia3BpLWxhYmVsIj5EaXJlY3Rpb248L3NwYW4+PC9kaXY+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImtwaS1jYXJkIiBzdHlsZT0iYm9yZGVyLWJvdHRvbS1jb2xvcjp2YXIoLS1hY2NlbnQpIj48aSBjbGFzcz0iZmFzIGZhLWNvbW1lbnRzIGZhLTJ4IGtwaS1pY29uIiBzdHlsZT0iY29sb3I6dmFyKC0tYWNjZW50KSI+PC9pPjxzcGFuIGNsYXNzPSJrcGktbnVtIiBpZD0ia3BpLWVudCI+MDwvc3Bhbj48c3BhbiBjbGFzcz0ia3BpLWxhYmVsIj5FbnRyZXRpZW5zPC9zcGFuPjwvZGl2PgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJrcGktY2FyZCIgc3R5bGU9ImJvcmRlci1ib3R0b20tY29sb3I6dmFyKC0tc3VjY2VzcykiPjxpIGNsYXNzPSJmYXMgZmEtdXNlcnMgZmEtMngga3BpLWljb24iIHN0eWxlPSJjb2xvcjp2YXIoLS1zdWNjZXNzKSI+PC9pPjxzcGFuIGNsYXNzPSJrcGktbnVtIiBpZD0ia3BpLXJldSI+MDwvc3Bhbj48c3BhbiBjbGFzcz0ia3BpLWxhYmVsIj5Sw6l1bmlvbnM8L3NwYW4+PC9kaXY+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImtwaS1jYXJkIiBzdHlsZT0iYm9yZGVyLWJvdHRvbS1jb2xvcjp2YXIoLS13YXJuaW5nKSI+PGkgY2xhc3M9ImZhcyBmYS1jYWxlbmRhci1hbHQgZmEtMngga3BpLWljb24iIHN0eWxlPSJjb2xvcjp2YXIoLS13YXJuaW5nKSI+PC9pPjxzcGFuIGNsYXNzPSJrcGktbnVtIiBpZD0ia3BpLWNhbCI+MDwvc3Bhbj48c3BhbiBjbGFzcz0ia3BpLWxhYmVsIj5BZ2VuZGE8L3NwYW4+PC9kaXY+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImtwaS1jYXJkIiBzdHlsZT0iYm9yZGVyLWJvdHRvbS1jb2xvcjp2YXIoLS1pbmZvKSI+PGkgY2xhc3M9ImZhcyBmYS11c2VyLWdyYWR1YXRlIGZhLTJ4IGtwaS1pY29uIiBzdHlsZT0iY29sb3I6dmFyKC0taW5mbykiPjwvaT48c3BhbiBjbGFzcz0ia3BpLW51bSIgaWQ9ImtwaS1zdWl2aSI+MDwvc3Bhbj48c3BhbiBjbGFzcz0ia3BpLWxhYmVsIj5TdWl2aTwvc3Bhbj48L2Rpdj4KICAgICAgICA8L2Rpdj4KICAgICAgICA8ZGl2IGNsYXNzPSJjaGFydHMtZ3JpZCI+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImNoYXJ0LWNvbnRhaW5lciI+PGgzPlLDqXBhcnRpdGlvbiBBY3Rpdml0w6k8L2gzPjxjYW52YXMgaWQ9ImNoYXJ0VHlwZXMiPjwvY2FudmFzPjwvZGl2PgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJjaGFydC1jb250YWluZXIiPgogICAgICAgICAgICAgICAgPGgzPlRvcCA1IMOJbMOodmVzIChIaXN0b3JpcXVlKTwvaDM+CiAgICAgICAgICAgICAgICA8dWwgaWQ9InRvcC1zdHVkZW50cy1saXN0IiBjbGFzcz0idG9wLXN0dWRlbnRzLWxpc3QiIHN0eWxlPSJtYXJnaW4tdG9wOjIwcHg7Ij48L3VsPgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICA8L2Rpdj4KICAgICAgICA8ZGl2IGNsYXNzPSJjaGFydC1jb250YWluZXIiIHN0eWxlPSJ3aWR0aDoxMDAlOyBoZWlnaHQ6MzAwcHg7Ij48aDM+w4l2b2x1dGlvbiAoNiBtb2lzKTwvaDM+PGNhbnZhcyBpZD0iY2hhcnRNb250aGx5Ij48L2NhbnZhcz48L2Rpdj4KICAgIDwvZGl2PgoKCjwhLS0g4pWQ4pWQ4pWQIEVWRU5FTUVOVFMgKG1lbnUxMCkg4pWQ4pWQ4pWQIC0tPgo8ZGl2IGlkPSJtZW51MTAiIGNsYXNzPSJzZWN0aW9uIj4KICAgIDxkaXYgY2xhc3M9ImV2LWhlYWRlciI+CiAgICAgICAgPGgyPjxpIGNsYXNzPSJmYXMgZmEtY2FsZW5kYXItY2hlY2siPjwvaT4gQWN0aXZpdMOpcyBww6lkYWdvZ2lxdWVzPC9oMj4KICAgICAgICA8YnV0dG9uIGNsYXNzPSJhY3Rpb24tYnRuIiBzdHlsZT0iYmFja2dyb3VuZDp2YXIoLS1oZWFkZXIpO2NvbG9yOiNmZmY7cGFkZGluZzoxMHB4IDIwcHg7Zm9udC1zaXplOi45NXJlbTtmb250LXdlaWdodDo3MDA7Ym9yZGVyLXJhZGl1czoxMHB4O2JvcmRlcjpub25lO2N1cnNvcjpwb2ludGVyO2JveC1zaGFkb3c6MCAzcHggMTBweCByZ2JhKDQ0LDYyLDgwLC4zKTt0cmFuc2l0aW9uOnRyYW5zZm9ybSAuMTVzLGJveC1zaGFkb3cgLjE1czsiIG9ubW91c2VvdmVyPSJ0aGlzLnN0eWxlLnRyYW5zZm9ybT0ndHJhbnNsYXRlWSgtMnB4KSc7dGhpcy5zdHlsZS5ib3hTaGFkb3c9JzAgNXB4IDE1cHggcmdiYSg0NCw2Miw4MCwuNCknIiBvbm1vdXNlb3V0PSJ0aGlzLnN0eWxlLnRyYW5zZm9ybT0nbm9uZSc7dGhpcy5zdHlsZS5ib3hTaGFkb3c9JzAgM3B4IDEwcHggcmdiYSg0NCw2Miw4MCwuMyknIiBvbmNsaWNrPSJvcGVuRXZNb2RhbCgpIj48aSBjbGFzcz0iZmFzIGZhLXBsdXMiPjwvaT4gTm91dmVsIMOpdsOpbmVtZW50PC9idXR0b24+CiAgICA8L2Rpdj4KICAgIDxkaXYgY2xhc3M9ImV2LXRvcCI+CiAgICAgICAgPGRpdiBjbGFzcz0iZXYta3BpcyI+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImV2LWtwaSI+PGRpdiBjbGFzcz0ia3YiIGlkPSJrcGktZXYtdG90IiBzdHlsZT0iY29sb3I6dmFyKC0taGVhZGVyKSI+MDwvZGl2PjxkaXYgY2xhc3M9ImtsIj5Ub3RhbDwvZGl2PjwvZGl2PgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJldi1rcGkiPjxkaXYgY2xhc3M9Imt2IiBpZD0ia3BpLWV2LW1zZyIgc3R5bGU9ImNvbG9yOiMyN2FlNjAiPjA8L2Rpdj48ZGl2IGNsYXNzPSJrbCI+TXNnIFBhcmVudHM8L2Rpdj48L2Rpdj4KICAgICAgICA8L2Rpdj4KICAgIDwvZGl2PgogICAgPGRpdiBjbGFzcz0iZXYtZmlsdGVycyI+CiAgICAgICAgCiAgICAgICAgCiAgICAgICAgPGlucHV0IHR5cGU9InRleHQiIGlkPSJldi1zZWFyY2giIHBsYWNlaG9sZGVyPSJSZWNoZXJjaGVy4oCmIiBvbmlucHV0PSJyZW5kZXJFdmVudHMoKSIgc3R5bGU9ImZsZXg6MTttaW4td2lkdGg6MTIwcHg7bWF4LXdpZHRoOjI2MHB4Ij4KICAgIDwvZGl2PgogICAgPGRpdiBjbGFzcz0iZXYtZ3JpZCIgaWQ9ImV2LWdyaWQiPjwvZGl2Pgo8L2Rpdj4KCjwhLS0gTU9EQUwgRVZFTkVNRU5UIC0tPgo8ZGl2IGlkPSJldk1vZCIgY2xhc3M9Im0tb3YiIHN0eWxlPSJsZWZ0OjI4MHB4IiBvbmNsaWNrPSJpZihldmVudC50YXJnZXQ9PT10aGlzKWNsb3NlRXZNb2RhbCgpIj4KICAgIDxkaXYgY2xhc3M9Im0tYm94IiBzdHlsZT0id2lkdGg6Y2FsYygxMDB2dyAtIDI4MHB4KTttYXgtd2lkdGg6Y2FsYygxMDB2dyAtIDI4MHB4KTtoZWlnaHQ6MTAwdmg7bWF4LWhlaWdodDoxMDB2aDtib3JkZXItcmFkaXVzOjA7cGFkZGluZzoyMHB4IDI4cHg7Ym94LXNpemluZzpib3JkZXItYm94O21hcmdpbi1sZWZ0OmF1dG8iPgogICAgICAgIDxoMz48aSBjbGFzcz0iZmFzIGZhLWNhbGVuZGFyLWNoZWNrIj48L2k+IDxzcGFuIGlkPSJldi1tdCI+Tm91dmVsIMOpdsOpbmVtZW50PC9zcGFuPjwvaDM+CiAgICAgICAgPGlucHV0IHR5cGU9ImhpZGRlbiIgaWQ9ImV2LWVpZCI+CiAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1ncm91cCIgc3R5bGU9Im1hcmdpbi1ib3R0b206MTBweCI+PGxhYmVsPkludGl0dWzDqSAqPC9sYWJlbD48aW5wdXQgdHlwZT0idGV4dCIgaWQ9ImV2LW5hbWUiIGNsYXNzPSJmb3JtLWNvbnRyb2wiIHBsYWNlaG9sZGVyPSJFeDogSm91cm7DqWUgcG9ydGVzIG91dmVydGVzIj48L2Rpdj4KICAgICAgICA8ZGl2IGNsYXNzPSJtLXJvdyI+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAiPjxsYWJlbD5Ew6lidXQ8L2xhYmVsPjxpbnB1dCB0eXBlPSJkYXRlIiBpZD0iZXYtc3RhcnQiIGNsYXNzPSJmb3JtLWNvbnRyb2wiPjwvZGl2PgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWdyb3VwIj48bGFiZWw+w4ljaMOpYW5jZTwvbGFiZWw+PGlucHV0IHR5cGU9ImRhdGUiIGlkPSJldi1kZWFkIiBjbGFzcz0iZm9ybS1jb250cm9sIj48L2Rpdj4KICAgICAgICA8L2Rpdj4KICAgICAgICA8ZGl2IGNsYXNzPSJtLXJvdyI+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAiPjxsYWJlbD5QaWxvdGU8L2xhYmVsPjxzZWxlY3QgaWQ9ImV2LXJlc3AiIGNsYXNzPSJmb3JtLWNvbnRyb2wiPjxvcHRpb24gdmFsdWU9IiI+LS0gQ2hvaXNpciAtLTwvb3B0aW9uPjwvc2VsZWN0PjwvZGl2PgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWdyb3VwIiBzdHlsZT0iZGlzcGxheTpmbGV4O2FsaWduLWl0ZW1zOmNlbnRlcjtnYXA6OHB4O3BhZGRpbmctdG9wOjIycHgiPjxpbnB1dCB0eXBlPSJjaGVja2JveCIgaWQ9ImV2LW1zZ3BhcmVudHMiIHN0eWxlPSJ3aWR0aDoxOHB4O2hlaWdodDoxOHB4O2N1cnNvcjpwb2ludGVyIj48bGFiZWwgZm9yPSJldi1tc2dwYXJlbnRzIiBzdHlsZT0ibWFyZ2luOjA7Y3Vyc29yOnBvaW50ZXI7Zm9udC1zaXplOi44NXJlbSI+TWVzc2FnZSBlbnZvecOpIGF1eCBwYXJlbnRzPC9sYWJlbD48L2Rpdj4KICAgICAgICA8L2Rpdj4KICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWdyb3VwIiBzdHlsZT0ibWFyZ2luLWJvdHRvbToxMHB4Ij48bGFiZWw+Q2xhc3NlcyBjb25jZXJuw6llczwvbGFiZWw+CiAgICAgICAgICAgIDxkaXYgc3R5bGU9ImRpc3BsYXk6ZmxleDtnYXA6OHB4O2FsaWduLWl0ZW1zOmNlbnRlciI+CiAgICAgICAgICAgICAgICA8c2VsZWN0IGlkPSJldi1jbGFzc2UiIGNsYXNzPSJmb3JtLWNvbnRyb2wiIHN0eWxlPSJmbGV4OjEiPjxvcHRpb24gdmFsdWU9IiI+LS0gQ2hvaXNpciBvdSBzYWlzaXIgLS08L29wdGlvbj48L3NlbGVjdD4KICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT0iYnV0dG9uIiBjbGFzcz0ibWIiIHN0eWxlPSJiYWNrZ3JvdW5kOiM1NTU7Y29sb3I6I2ZmZjtwYWRkaW5nOjZweCAxMHB4O2ZvbnQtc2l6ZTouNzVyZW0iIG9uY2xpY2s9IndpbmRvdy5hZGRFdkNsYXNzZSgpIj48aSBjbGFzcz0iZmFzIGZhLXBsdXMiPjwvaT48L2J1dHRvbj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDxkaXYgaWQ9ImV2LWNsYXNzZXMtbGlzdCIgc3R5bGU9ImRpc3BsYXk6ZmxleDtmbGV4LXdyYXA6d3JhcDtnYXA6NHB4O21hcmdpbi10b3A6NnB4Ij48L2Rpdj4KICAgICAgICA8L2Rpdj4KICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWdyb3VwIiBzdHlsZT0ibWFyZ2luLWJvdHRvbToxMHB4Ij48bGFiZWw+TWVzc2FnZSDDoCBhZHJlc3NlciBhdXggcGFyZW50czwvbGFiZWw+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9InJ0ZS13cmFwIj48ZGl2IGNsYXNzPSJydGUtYmFyIj4KICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJkb2N1bWVudC5leGVjQ29tbWFuZCgnYm9sZCcpIiB0aXRsZT0iR3JhcyI+PGI+RzwvYj48L2J1dHRvbj4KICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJkb2N1bWVudC5leGVjQ29tbWFuZCgnaXRhbGljJykiIHRpdGxlPSJJdGFsaXF1ZSI+PGk+STwvaT48L2J1dHRvbj4KICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJkb2N1bWVudC5leGVjQ29tbWFuZCgndW5kZXJsaW5lJykiIHRpdGxlPSJTb3VsaWduw6kiPjx1PlM8L3U+PC9idXR0b24+CiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz0icnRlLXNlcCI+PC9zcGFuPgogICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9ImRvY3VtZW50LmV4ZWNDb21tYW5kKCdpbnNlcnRVbm9yZGVyZWRMaXN0JykiIHRpdGxlPSJQdWNlcyI+PGkgY2xhc3M9ImZhcyBmYS1saXN0LXVsIj48L2k+PC9idXR0b24+CiAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0iZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2luc2VydE9yZGVyZWRMaXN0JykiIHRpdGxlPSJMaXN0ZSBudW3DqXJvdMOpZSI+PGkgY2xhc3M9ImZhcyBmYS1saXN0LW9sIj48L2k+PC9idXR0b24+CiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz0icnRlLXNlcCI+PC9zcGFuPgogICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9InJ0ZUNvbG9yKHRoaXMpIiB0aXRsZT0iQ291bGV1ciI+PGkgY2xhc3M9ImZhcyBmYS1wYWxldHRlIj48L2k+PC9idXR0b24+CiAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0icnRlTGluayh0aGlzKSIgdGl0bGU9IkxpZW4iPjxpIGNsYXNzPSJmYXMgZmEtbGluayI+PC9pPjwvYnV0dG9uPgogICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9InJ0ZS1zZXAiPjwvc3Bhbj4KICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJkb2N1bWVudC5leGVjQ29tbWFuZCgndW5kbycpIiB0aXRsZT0iQW5udWxlciI+PGkgY2xhc3M9ImZhcyBmYS11bmRvIj48L2k+PC9idXR0b24+CiAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0iZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ3JlZG8nKSIgdGl0bGU9IlJlc3RhdXJlciI+PGkgY2xhc3M9ImZhcyBmYS1yZWRvIj48L2k+PC9idXR0b24+CiAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJydGUtc2VwIj48L3NwYW4+PGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9ImRvY3VtZW50LmV4ZWNDb21tYW5kKCdqdXN0aWZ5TGVmdCcpIiB0aXRsZT0iQWxpZ25lciDDoCBnYXVjaGUiPjxpIGNsYXNzPSJmYXMgZmEtYWxpZ24tbGVmdCI+PC9pPjwvYnV0dG9uPjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJkb2N1bWVudC5leGVjQ29tbWFuZCgnanVzdGlmeUNlbnRlcicpIiB0aXRsZT0iQ2VudHJlciI+PGkgY2xhc3M9ImZhcyBmYS1hbGlnbi1jZW50ZXIiPjwvaT48L2J1dHRvbj48YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0iZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2p1c3RpZnlGdWxsJykiIHRpdGxlPSJKdXN0aWZpZXIiPjxpIGNsYXNzPSJmYXMgZmEtYWxpZ24tanVzdGlmeSI+PC9pPjwvYnV0dG9uPjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJwYXN0ZUZyb21Xb3JkKCkiIHRpdGxlPSJDb2xsZXIgZGVwdWlzIFdvcmQgZW4gY29uc2VydmFudCBsYSBtaXNlIGVuIHBhZ2UiIHN0eWxlPSJtYXJnaW4tbGVmdDo2cHg7YmFja2dyb3VuZDojMmI1NzlhO2NvbG9yOndoaXRlO2JvcmRlci1yYWRpdXM6NHB4O3BhZGRpbmc6MnB4IDhweDtmb250LXNpemU6LjY4cmVtO2JvcmRlcjpub25lO2N1cnNvcjpwb2ludGVyO2ZvbnQtZmFtaWx5OmluaGVyaXQ7ZGlzcGxheTppbmxpbmUtZmxleDthbGlnbi1pdGVtczpjZW50ZXI7Z2FwOjNweDt2ZXJ0aWNhbC1hbGlnbjptaWRkbGU7Ij48aSBjbGFzcz0iZmFzIGZhLWZpbGUtd29yZCI+PC9pPsKgV29yZDwvYnV0dG9uPgo8L2Rpdj48ZGl2IGNsYXNzPSJydGUtYm9keSIgaWQ9ImV2LWRlc2MiIGNvbnRlbnRlZGl0YWJsZT0idHJ1ZSIgc3R5bGU9Im1pbi1oZWlnaHQ6MTIwcHg7Ym9yZGVyOjJweCBzb2xpZCAjZTBlMGUwO2JvcmRlci1yYWRpdXM6MCAwIDhweCA4cHg7cGFkZGluZzoxMHB4Ij48L2Rpdj48L2Rpdj4KICAgICAgICA8L2Rpdj4KICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWdyb3VwIiBzdHlsZT0ibWFyZ2luLWJvdHRvbToxMHB4Ij48bGFiZWw+w4l0aXF1ZXR0ZXMgKHZpcmd1bGVzKTwvbGFiZWw+PGlucHV0IHR5cGU9InRleHQiIGlkPSJldi10YWdzIiBjbGFzcz0iZm9ybS1jb250cm9sIiBwbGFjZWhvbGRlcj0iSlBPLCBjb21tdW5pY2F0aW9uLCBvcmllbnRhdGlvbiI+PC9kaXY+CiAgICAgICAgCiAgICAgICAgPGRpdiBjbGFzcz0ibS1hY3RzIj4KICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0ibWIgbWItZGVsIiBpZD0iZXYtZGVsLWJ0biIgc3R5bGU9ImRpc3BsYXk6bm9uZSIgb25jbGljaz0id2luZG93LmRlbEV2RnJvbU1vZGFsKCkiPjxpIGNsYXNzPSJmYXMgZmEtdHJhc2giPjwvaT4gU3VwcHJpbWVyPC9idXR0b24+CiAgICAgICAgICAgIDxidXR0b24gY2xhc3M9Im1iIG1iLWMiIG9uY2xpY2s9IndpbmRvdy5jbG9zZUV2TW9kYWwoKSI+QW5udWxlcjwvYnV0dG9uPgogICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJtYiBtYi1vayIgb25jbGljaz0id2luZG93LnNhdmVFdmVudCgpIj48aSBjbGFzcz0iZmFzIGZhLWNoZWNrIj48L2k+IEVucmVnaXN0cmVyPC9idXR0b24+CiAgICAgICAgPC9kaXY+CiAgICA8L2Rpdj4KPC9kaXY+Cgo8IS0tIOKVkOKVkOKVkCBHQU5UVCAvIFBST0NFRFVSRVMgKG1lbnUxMSkg4pWQ4pWQ4pWQIC0tPgo8ZGl2IGlkPSJtZW51MTEiIGNsYXNzPSJzZWN0aW9uIj4KICAgIDxkaXYgY2xhc3M9Imd0LWJhciI+CiAgICAgICAgPGgyPjxpIGNsYXNzPSJmYXMgZmEtc3RyZWFtIj48L2k+IMOJY2jDqWFuY2VzPC9oMj4KICAgICAgICA8ZGl2IGNsYXNzPSJndC1iYXItYnRucyI+CiAgICAgICAgICAgIDxidXR0b24gY2xhc3M9Imd0LWJ0bi1hZGQiIG9uY2xpY2s9IndpbmRvdy5vcGVuR3RNb2RhbCgpIj48aSBjbGFzcz0iZmFzIGZhLXBsdXMiPjwvaT4gw4ljaMOpYW5jZTwvYnV0dG9uPgogICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJndC1idG4tc2VjIiBvbmNsaWNrPSJ3aW5kb3cucHJpbnRHYW50dCgpIj48aSBjbGFzcz0iZmFzIGZhLXByaW50Ij48L2k+IEltcHJpbWVyPC9idXR0b24+CiAgICAgICAgPC9kaXY+CiAgICA8L2Rpdj4KICAgIAogICAgPGRpdiBjbGFzcz0iZ3QtbmF2Ij4KICAgICAgICA8YnV0dG9uIG9uY2xpY2s9IndpbmRvdy5ndFByZXYoKSIgdGl0bGU9IlByw6ljw6lkZW50Ij48aSBjbGFzcz0iZmFzIGZhLWNoZXZyb24tbGVmdCI+PC9pPjwvYnV0dG9uPgogICAgICAgIDxzcGFuIHN0eWxlPSJmb250LXNpemU6Ljc2cmVtO2ZvbnQtd2VpZ2h0OjYwMDttaW4td2lkdGg6MTUwcHg7dGV4dC1hbGlnbjpjZW50ZXIiIGlkPSJndC1wZXIiPjwvc3Bhbj4KICAgICAgICA8YnV0dG9uIG9uY2xpY2s9IndpbmRvdy5ndE5leHQoKSIgdGl0bGU9IlN1aXZhbnQiPjxpIGNsYXNzPSJmYXMgZmEtY2hldnJvbi1yaWdodCI+PC9pPjwvYnV0dG9uPgogICAgICAgIDxidXR0b24gb25jbGljaz0id2luZG93Lmd0WWVhcigpIj5Bbm7DqWU8L2J1dHRvbj4KICAgICAgICA8YnV0dG9uIG9uY2xpY2s9IndpbmRvdy5ndFRvZGF5KCkiPkF1ai48L2J1dHRvbj4KICAgICAgICA8c2VsZWN0IGlkPSJndC1mYyIgb25jaGFuZ2U9IndpbmRvdy5yZW5kZXJHYW50dCgpIiBzdHlsZT0ibWFyZ2luLWxlZnQ6YXV0byI+PG9wdGlvbiB2YWx1ZT0iQUxMIj5Ub3V0ZXMgY2F0w6lnb3JpZXM8L29wdGlvbj48L3NlbGVjdD4KICAgIDwvZGl2PgogICAgPGRpdiBjbGFzcz0iZ3Qtd3JhcCIgc3R5bGU9Im1heC1oZWlnaHQ6Y2FsYygxMDB2aCAtIDI2MHB4KTtvdmVyZmxvdy15OmF1dG8iPgogICAgICAgIDx0YWJsZSBjbGFzcz0iZ3QiIGlkPSJndC10YmwiPjwvdGFibGU+CiAgICA8L2Rpdj4KICAgIDxkaXYgY2xhc3M9Imd0LWxlZyI+CiAgICAgICAgPHNwYW4+PGkgc3R5bGU9ImJhY2tncm91bmQ6IzVkYWRlMiI+PC9pPlJlbnRyw6llPC9zcGFuPgogICAgICAgIDxzcGFuPjxpIHN0eWxlPSJiYWNrZ3JvdW5kOiMyZTg2YzEiPjwvaT5FeGFtZW5zPC9zcGFuPgogICAgICAgIDxzcGFuPjxpIHN0eWxlPSJiYWNrZ3JvdW5kOiMxYTUyNzYiPjwvaT5PcmllbnRhdGlvbjwvc3Bhbj4KICAgICAgICA8c3Bhbj48aSBzdHlsZT0iYmFja2dyb3VuZDojMjQ3MWEzIj48L2k+Q29uc2VpbHM8L3NwYW4+CiAgICAgICAgPHNwYW4+PGkgc3R5bGU9ImJhY2tncm91bmQ6IzhlNDRhZCI+PC9pPlDDqWRhZ29naXF1ZTwvc3Bhbj4KICAgICAgICA8c3Bhbj48aSBzdHlsZT0iYmFja2dyb3VuZDojMTQ4Zjc3Ij48L2k+QWRtaW48L3NwYW4+CiAgICAgICAgPHNwYW4+PGkgc3R5bGU9ImJhY2tncm91bmQ6I2MwMzkyYiI+PC9pPlJIPC9zcGFuPgogICAgICAgIDxzcGFuPjxpIHN0eWxlPSJiYWNrZ3JvdW5kOiM1YjZkNWIiPjwvaT5BdXRyZTwvc3Bhbj4KICAgICAgICA8c3Bhbj48aSBzdHlsZT0iYmFja2dyb3VuZDpyZXBlYXRpbmctbGluZWFyLWdyYWRpZW50KDQ1ZGVnLCNmMGYwZjAsI2YwZjBmMCAycHgsI2U4ZThlOCAycHgsI2U4ZThlOCA0cHgpO2JvcmRlcjoxcHggc29saWQgI2NjYyI+PC9pPlZhY2FuY2VzPC9zcGFuPgogICAgICAgIDxzcGFuPjxpIHN0eWxlPSJiYWNrZ3JvdW5kOiNkMzU0MDAiPjwvaT5TZW0uIGNvdXJhbnRlPC9zcGFuPgogICAgPC9kaXY+CjwvZGl2PgoKPCEtLSBNT0RBTCBHQU5UVCAtLT4KPGRpdiBpZD0iZ3RNb2QiIGNsYXNzPSJtLW92IiBvbmNsaWNrPSJpZihldmVudC50YXJnZXQ9PT10aGlzKWNsb3NlR3RNb2RhbCgpIj4KICAgIDxkaXYgY2xhc3M9Im0tYm94IiBzdHlsZT0id2lkdGg6NTAwcHg7Ij4KICAgICAgICA8aDM+PGkgY2xhc3M9ImZhcyBmYS1zdHJlYW0iPjwvaT4gPHNwYW4gaWQ9Imd0LW10Ij5Ob3V2ZWxsZSDDqWNow6lhbmNlPC9zcGFuPjwvaDM+CiAgICAgICAgPGlucHV0IHR5cGU9ImhpZGRlbiIgaWQ9Imd0LWVpZCI+CiAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1ncm91cCIgc3R5bGU9Im1hcmdpbi1ib3R0b206MTBweCI+PGxhYmVsPkludGl0dWzDqSAqPC9sYWJlbD48aW5wdXQgdHlwZT0idGV4dCIgaWQ9Imd0LW5hbWUiIGNsYXNzPSJmb3JtLWNvbnRyb2wiIHBsYWNlaG9sZGVyPSJDb25zZWlscyBkZSBjbGFzc2UgVDIiPjwvZGl2PgogICAgICAgIDxkaXYgY2xhc3M9Im0tcm93Ij4KICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1ncm91cCI+PGxhYmVsPkNvZGU8L2xhYmVsPjxpbnB1dCB0eXBlPSJ0ZXh0IiBpZD0iZ3QtY29kZSIgY2xhc3M9ImZvcm0tY29udHJvbCIgcGxhY2Vob2xkZXI9IkEgNCIgbWF4bGVuZ3RoPSI2Ij48L2Rpdj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1ncm91cCI+PGxhYmVsPkNhdMOpZ29yaWU8L2xhYmVsPgogICAgICAgICAgICAgICAgPHNlbGVjdCBpZD0iZ3QtY2F0IiBjbGFzcz0iZm9ybS1jb250cm9sIj4KICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJBZG1pbmlzdHJhdGlmIj5BZG1pbmlzdHJhdGlmPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iw4lsw6h2ZXMgQkVQIj7DiWzDqHZlcyBCRVA8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJDb25jZXJ0YXRpb25zIj5Db25jZXJ0YXRpb25zPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iRGlzcG9zaXRpZnMgUMOpZGFnb2dpcXVlcyI+RGlzcG9zaXRpZnMgUMOpZGFnb2dpcXVlczwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IlN1aXZpIGRlcyDDqWzDqHZlcyI+U3VpdmkgZGVzIMOpbMOodmVzPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iSW50ZXJ2ZW5hbnRzIj5JbnRlcnZlbmFudHM8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJOdW3DqXJpcXVlIj5OdW3DqXJpcXVlPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iT3JpZW50YXRpb24iPk9yaWVudGF0aW9uPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iUHJvamV0cyI+UHJvamV0czwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IlBvcnRlcyBPdXZlcnRlcyI+UG9ydGVzIE91dmVydGVzPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iUmVzc291cmNlcyBIdW1haW5lcyI+UmVzc291cmNlcyBIdW1haW5lczwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IlPDqWN1cml0w6kiPlPDqWN1cml0w6k8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJBdXRyZSI+QXV0cmU8L29wdGlvbj4KICAgICAgICAgICAgICAgIDwvc2VsZWN0PgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICA8L2Rpdj4KICAgICAgICA8ZGl2IGNsYXNzPSJtLXJvdyIgc3R5bGU9ImFsaWduLWl0ZW1zOmZsZXgtZW5kIj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1ncm91cCIgc3R5bGU9Im1heC13aWR0aDoxMjBweCI+PGxhYmVsPlNlbS4gZMOpYnV0IChJU08pPC9sYWJlbD48aW5wdXQgdHlwZT0ibnVtYmVyIiBpZD0iZ3Qtd3MiIGNsYXNzPSJmb3JtLWNvbnRyb2wiIG1pbj0iMSIgbWF4PSI1MyIgc3R5bGU9IndpZHRoOjEwMHB4O3RleHQtYWxpZ246Y2VudGVyIj48L2Rpdj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1ncm91cCIgc3R5bGU9Im1heC13aWR0aDoxMjBweCI+PGxhYmVsPlNlbS4gZmluIChJU08pPC9sYWJlbD48aW5wdXQgdHlwZT0ibnVtYmVyIiBpZD0iZ3Qtd2UiIGNsYXNzPSJmb3JtLWNvbnRyb2wiIG1pbj0iMSIgbWF4PSI1MyIgc3R5bGU9IndpZHRoOjEwMHB4O3RleHQtYWxpZ246Y2VudGVyIj48L2Rpdj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1ncm91cCIgc3R5bGU9ImZsZXg6MSI+PC9kaXY+CiAgICAgICAgPC9kaXY+CiAgICAgICAgPGRpdiBjbGFzcz0iZm9ybS1ncm91cCIgc3R5bGU9Im1hcmdpbi1ib3R0b206MTBweCI+PGxhYmVsPlJlc3BvbnNhYmxlPC9sYWJlbD48c2VsZWN0IGlkPSJndC1yZXNwIiBjbGFzcz0iZm9ybS1jb250cm9sIj48b3B0aW9uIHZhbHVlPSIiPi0tIENob2lzaXIgLS08L29wdGlvbj48L3NlbGVjdD48L2Rpdj4KICAgICAgICA8ZGl2IGNsYXNzPSJmb3JtLWdyb3VwIiBzdHlsZT0ibWFyZ2luLWJvdHRvbToxMHB4Ij48bGFiZWw+Tm90ZXM8L2xhYmVsPgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJydGUtd3JhcCI+PGRpdiBjbGFzcz0icnRlLWJhciI+CiAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0iZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2JvbGQnKSIgdGl0bGU9IkdyYXMiPjxiPkc8L2I+PC9idXR0b24+CiAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0iZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2l0YWxpYycpIiB0aXRsZT0iSXRhbGlxdWUiPjxpPkk8L2k+PC9idXR0b24+CiAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0iZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ3VuZGVybGluZScpIiB0aXRsZT0iU291bGlnbsOpIj48dT5TPC91PjwvYnV0dG9uPgogICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9InJ0ZS1zZXAiPjwvc3Bhbj4KICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJkb2N1bWVudC5leGVjQ29tbWFuZCgnaW5zZXJ0VW5vcmRlcmVkTGlzdCcpIiB0aXRsZT0iUHVjZXMiPjxpIGNsYXNzPSJmYXMgZmEtbGlzdC11bCI+PC9pPjwvYnV0dG9uPgogICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9ImRvY3VtZW50LmV4ZWNDb21tYW5kKCdpbnNlcnRPcmRlcmVkTGlzdCcpIiB0aXRsZT0iTnVtw6lyb3TDqWUiPjxpIGNsYXNzPSJmYXMgZmEtbGlzdC1vbCI+PC9pPjwvYnV0dG9uPgogICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9InJ0ZS1zZXAiPjwvc3Bhbj4KICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJydGVDb2xvcih0aGlzKSIgdGl0bGU9IkNvdWxldXIiPjxpIGNsYXNzPSJmYXMgZmEtcGFsZXR0ZSI+PC9pPjwvYnV0dG9uPgogICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9InJ0ZUxpbmsodGhpcykiIHRpdGxlPSJMaWVuIj48aSBjbGFzcz0iZmFzIGZhLWxpbmsiPjwvaT48L2J1dHRvbj4KICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJydGUtc2VwIj48L3NwYW4+CiAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0iZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ3VuZG8nKSIgdGl0bGU9IkFubnVsZXIiPjxpIGNsYXNzPSJmYXMgZmEtdW5kbyI+PC9pPjwvYnV0dG9uPgogICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9ImRvY3VtZW50LmV4ZWNDb21tYW5kKCdyZWRvJykiIHRpdGxlPSJSZXN0YXVyZXIiPjxpIGNsYXNzPSJmYXMgZmEtcmVkbyI+PC9pPjwvYnV0dG9uPgogICAgICAgICAgICA8c3BhbiBjbGFzcz0icnRlLXNlcCI+PC9zcGFuPjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJkb2N1bWVudC5leGVjQ29tbWFuZCgnanVzdGlmeUxlZnQnKSIgdGl0bGU9IkFsaWduZXIgw6AgZ2F1Y2hlIj48aSBjbGFzcz0iZmFzIGZhLWFsaWduLWxlZnQiPjwvaT48L2J1dHRvbj48YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0iZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2p1c3RpZnlDZW50ZXInKSIgdGl0bGU9IkNlbnRyZXIiPjxpIGNsYXNzPSJmYXMgZmEtYWxpZ24tY2VudGVyIj48L2k+PC9idXR0b24+PGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9ImRvY3VtZW50LmV4ZWNDb21tYW5kKCdqdXN0aWZ5RnVsbCcpIiB0aXRsZT0iSnVzdGlmaWVyIj48aSBjbGFzcz0iZmFzIGZhLWFsaWduLWp1c3RpZnkiPjwvaT48L2J1dHRvbj48YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0icGFzdGVGcm9tV29yZCgpIiB0aXRsZT0iQ29sbGVyIGRlcHVpcyBXb3JkIGVuIGNvbnNlcnZhbnQgbGEgbWlzZSBlbiBwYWdlIiBzdHlsZT0ibWFyZ2luLWxlZnQ6NnB4O2JhY2tncm91bmQ6IzJiNTc5YTtjb2xvcjp3aGl0ZTtib3JkZXItcmFkaXVzOjRweDtwYWRkaW5nOjJweCA4cHg7Zm9udC1zaXplOi42OHJlbTtib3JkZXI6bm9uZTtjdXJzb3I6cG9pbnRlcjtmb250LWZhbWlseTppbmhlcml0O2Rpc3BsYXk6aW5saW5lLWZsZXg7YWxpZ24taXRlbXM6Y2VudGVyO2dhcDozcHg7dmVydGljYWwtYWxpZ246bWlkZGxlOyI+PGkgY2xhc3M9ImZhcyBmYS1maWxlLXdvcmQiPjwvaT7CoFdvcmQ8L2J1dHRvbj4KPC9kaXY+PGRpdiBjbGFzcz0icnRlLWJvZHkiIGlkPSJndC1ub3RlcyIgY29udGVudGVkaXRhYmxlPSJ0cnVlIiBzdHlsZT0iYm9yZGVyOjJweCBzb2xpZCAjZTBlMGUwO2JvcmRlci1yYWRpdXM6MCAwIDhweCA4cHg7cGFkZGluZzoxMHB4O21pbi1oZWlnaHQ6ODBweCI+PC9kaXY+PC9kaXY+CiAgICAgICAgPC9kaXY+CiAgICAgICAgPGRpdiBjbGFzcz0ibS1hY3RzIiBzdHlsZT0icGFkZGluZy10b3A6MTJweDtib3JkZXItdG9wOjFweCBzb2xpZCAjZWVlO2Rpc3BsYXk6ZmxleDtnYXA6OHB4O2p1c3RpZnktY29udGVudDpmbGV4LWVuZCI+CiAgICAgICAgICAgIDxidXR0b24gdHlwZT0iYnV0dG9uIiBjbGFzcz0ibWIgbWItZGVsIiBpZD0iZ3QtZGVsLWJ0biIgc3R5bGU9ImRpc3BsYXk6bm9uZSIgb25jbGljaz0id2luZG93LmRlbEd0RnJvbU1vZGFsKCkiPjxpIGNsYXNzPSJmYXMgZmEtdHJhc2giPjwvaT4gU3VwcHJpbWVyPC9idXR0b24+CiAgICAgICAgICAgIDxidXR0b24gdHlwZT0iYnV0dG9uIiBjbGFzcz0ibWIgbWItYyIgb25jbGljaz0id2luZG93LmNsb3NlR3RNb2RhbCgpIj5Bbm51bGVyPC9idXR0b24+CiAgICAgICAgICAgIDxidXR0b24gdHlwZT0iYnV0dG9uIiBjbGFzcz0ibWIgbWItb2siIG9uY2xpY2s9IndpbmRvdy5zYXZlR3QoKSI+PGkgY2xhc3M9ImZhcyBmYS1jaGVjayI+PC9pPiBFbnJlZ2lzdHJlcjwvYnV0dG9uPgogICAgICAgIDwvZGl2PgogICAgPC9kaXY+CjwvZGl2PgogICAgPCEtLSDilZDilZDilZAgUFJPQ8OJRFVSRVMg4pWQ4pWQ4pWQIC0tPgogICAgPGRpdiBpZD0ibWVudTEyIiBjbGFzcz0ic2VjdGlvbiI+CiAgICAgICAgPGRpdiBjbGFzcz0iZXYtaGVhZGVyIiBzdHlsZT0iZGlzcGxheTpmbGV4O2p1c3RpZnktY29udGVudDpzcGFjZS1iZXR3ZWVuO2FsaWduLWl0ZW1zOmNlbnRlcjttYXJnaW4tYm90dG9tOjE2cHgiPgogICAgICAgICAgICA8aDIgc3R5bGU9ImNvbG9yOnZhcigtLWhlYWRlcik7Zm9udC1zaXplOjEuMDVyZW07ZGlzcGxheTpmbGV4O2FsaWduLWl0ZW1zOmNlbnRlcjtnYXA6OHB4O21hcmdpbjowIj48aSBjbGFzcz0iZmFzIGZhLWJvb2siPjwvaT4gUHJvY8OpZHVyZXM8L2gyPgogICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJhY3Rpb24tYnRuIiBzdHlsZT0iYmFja2dyb3VuZDp2YXIoLS1oZWFkZXIpO2NvbG9yOiNmZmY7cGFkZGluZzoxMHB4IDIwcHg7Zm9udC1zaXplOi45NXJlbTtmb250LXdlaWdodDo3MDA7Ym9yZGVyLXJhZGl1czoxMHB4O2JvcmRlcjpub25lO2N1cnNvcjpwb2ludGVyO2JveC1zaGFkb3c6MCAzcHggMTBweCByZ2JhKDQ0LDYyLDgwLC4zKSIgb25jbGljaz0ib3BlblByb2NNb2RhbCgpIj48aSBjbGFzcz0iZmFzIGZhLXBsdXMiPjwvaT4gTm91dmVsbGUgcHJvY8OpZHVyZTwvYnV0dG9uPgogICAgICAgIDwvZGl2PgogICAgICAgIDxkaXYgY2xhc3M9InByb2MtZmlsdGVycyIgaWQ9InByb2MtZmlsdGVycyI+PC9kaXY+CiAgICAgICAgPGRpdiBpZD0icHJvYy12aWV3LWFyZWEiIHN0eWxlPSJkaXNwbGF5Om5vbmUiPjwvZGl2PgogICAgICAgIDxkaXYgY2xhc3M9InByb2MtbGlzdCIgaWQ9InByb2MtbGlzdCI+PC9kaXY+CiAgICA8L2Rpdj4KCjwvZGl2PjwhLS0gL21haW4tY29udGVudCAtLT4KCjxkaXYgaWQ9InByaW50LXpvbmUiIGNsYXNzPSJwcmludC1hcmVhIj48L2Rpdj4KCjxzY3JpcHQ+CiAgICBsZXQgYXBwRGF0YSA9IHsgCiAgICAgICAgc2V0dGluZ3M6IHsgc2Nob29sOiAiTHljw6llIiwgdXNlcjogIlByb3Zpc2V1ciIsIGxvZ286ICIiLCBzaWduYXR1cmU6ICIiLCBjdXN0b21FbnRUeXBlczogW10sIGN1c3RvbVJldVR5cGVzOiBbXSwgem9uZTogIkIiIH0sIAogICAgICAgIGVudHJldGllbnM6IFtdLCByZXVuaW9uczogW10sIHN1aXZpRWxldmVzOiBbXSwgCiAgICAgICAgdG9kbzogeyB1cmdlbnQ6W10sIHBsYW46W10sIHBvc3NpYmxlOltdLCBkZWxlZ2F0ZTpbXSB9LCAKICAgICAgICBjYWxlbmRhcjogW10sCiAgICAgICAgZXZlbnRzOiBbXSwKICAgICAgICAgICAgcHJvY2VkdXJlczogW10sCiAgICAgICAgZ2FudHQ6IFtdCiAgICB9OwogICAgbGV0IGNoYXJ0SW5zdGFuY2VzID0ge307CiAgICBsZXQgY3VycmVudEVkaXRJZCA9IG51bGw7CiAgICBsZXQgY3VycmVudEVkaXRUeXBlID0gbnVsbDsgCgogICAgd2luZG93Lm9ubG9hZCA9ICgpID0+IHsKICAgICAgICBpbml0V29yZFBhc3RlKCk7CiAgICAgICAgbG9hZERhdGEoKTsKICAgICAgICByZXNldEFsbERhdGVzKCk7CiAgICAgICAgaW5pdERvY1RlbXBsYXRlcygpOwogICAgICAgIHJlbmRlclRvZG8oKTsgY2hlY2tEYWlseVRhc2tzKCk7IHVwZGF0ZVByZXZpZXdzKCk7IHN3aXRjaE1lbnUoJ21lbnUyJyk7IGFwcGx5U2VwYXJhdG9ycygpOwogICAgICAgIGxvYWRDdXN0b21UeXBlcygpOwogICAgfTsKCiAgICBmdW5jdGlvbiByZXNldEFsbERhdGVzKCkgewogICAgICAgIGNvbnN0IHRvZGF5ID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpLnNwbGl0KCdUJylbMF07CiAgICAgICAgWydlbnQtZGF0ZScsJ3JldS1kYXRlJywnZGlyLWRhdGUnLCdzdWl2aS1kYXRlJywnY2FsLWRhdGUnXS5mb3JFYWNoKGlkID0+IHsgY29uc3QgZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCk7IGlmKGVsKSBlbC52YWx1ZSA9IHRvZGF5OyB9KTsKICAgIH0KCiAgICAKICAgIC8vIOKVkOKVkOKVkCBTQVVWRUdBUkRFIEZJQ0hJRVIgTE9DQUwg4pWQ4pWQ4pWQCiAgICB2YXIgX2ZpbGVIYW5kbGUgPSBudWxsOwogICAgdmFyIF9kaXJIYW5kbGUgPSBudWxsOwoKICAgIGZ1bmN0aW9uIHN0b3JlRGlySGFuZGxlKGhhbmRsZSl7CiAgICAgICAgb3BlbkhhbmRsZURCKCkudGhlbihmdW5jdGlvbihkYil7CiAgICAgICAgICAgIHZhciB0eD1kYi50cmFuc2FjdGlvbignaGFuZGxlcycsJ3JlYWR3cml0ZScpOwogICAgICAgICAgICB0eC5vYmplY3RTdG9yZSgnaGFuZGxlcycpLnB1dChoYW5kbGUsJ3NhdmVEaXInKTsKICAgICAgICB9KS5jYXRjaChmdW5jdGlvbigpe30pOwogICAgfQogICAgZnVuY3Rpb24gZ2V0U3RvcmVkRGlySGFuZGxlKCl7CiAgICAgICAgcmV0dXJuIG9wZW5IYW5kbGVEQigpLnRoZW4oZnVuY3Rpb24oZGIpewogICAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSl7CiAgICAgICAgICAgICAgICB2YXIgdHg9ZGIudHJhbnNhY3Rpb24oJ2hhbmRsZXMnLCdyZWFkb25seScpOwogICAgICAgICAgICAgICAgdmFyIHJxPXR4Lm9iamVjdFN0b3JlKCdoYW5kbGVzJykuZ2V0KCdzYXZlRGlyJyk7CiAgICAgICAgICAgICAgICBycS5vbnN1Y2Nlc3M9ZnVuY3Rpb24oKXtyZXNvbHZlKHJxLnJlc3VsdHx8bnVsbCk7fTsKICAgICAgICAgICAgICAgIHJxLm9uZXJyb3I9ZnVuY3Rpb24oKXtyZXNvbHZlKG51bGwpO307CiAgICAgICAgICAgIH0pOwogICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uKCl7cmV0dXJuIG51bGw7fSk7CiAgICB9CgogICAgLy8gSW5kZXhlZERCIHBvdXIgcGVyc2lzdGVyIGxlIGZpbGVIYW5kbGUgZW50cmUgc2Vzc2lvbnMKICAgIGZ1bmN0aW9uIG9wZW5IYW5kbGVEQigpewogICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLHJlamVjdCl7CiAgICAgICAgICAgIHZhciBycT1pbmRleGVkREIub3BlbignY2FkaXJfaGFuZGxlcycsMSk7CiAgICAgICAgICAgIHJxLm9udXBncmFkZW5lZWRlZD1mdW5jdGlvbihlKXtlLnRhcmdldC5yZXN1bHQuY3JlYXRlT2JqZWN0U3RvcmUoJ2hhbmRsZXMnKTt9OwogICAgICAgICAgICBycS5vbnN1Y2Nlc3M9ZnVuY3Rpb24oZSl7cmVzb2x2ZShlLnRhcmdldC5yZXN1bHQpO307CiAgICAgICAgICAgIHJxLm9uZXJyb3I9ZnVuY3Rpb24oKXtyZWplY3QoKTt9OwogICAgICAgIH0pOwogICAgfQogICAgZnVuY3Rpb24gc3RvcmVIYW5kbGUoaGFuZGxlKXsKICAgICAgICBvcGVuSGFuZGxlREIoKS50aGVuKGZ1bmN0aW9uKGRiKXsKICAgICAgICAgICAgdmFyIHR4PWRiLnRyYW5zYWN0aW9uKCdoYW5kbGVzJywncmVhZHdyaXRlJyk7CiAgICAgICAgICAgIHR4Lm9iamVjdFN0b3JlKCdoYW5kbGVzJykucHV0KGhhbmRsZSwnc2F2ZUZpbGUnKTsKICAgICAgICB9KS5jYXRjaChmdW5jdGlvbigpe30pOwogICAgfQogICAgZnVuY3Rpb24gZ2V0U3RvcmVkSGFuZGxlKCl7CiAgICAgICAgcmV0dXJuIG9wZW5IYW5kbGVEQigpLnRoZW4oZnVuY3Rpb24oZGIpewogICAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSl7CiAgICAgICAgICAgICAgICB2YXIgdHg9ZGIudHJhbnNhY3Rpb24oJ2hhbmRsZXMnLCdyZWFkb25seScpOwogICAgICAgICAgICAgICAgdmFyIHJxPXR4Lm9iamVjdFN0b3JlKCdoYW5kbGVzJykuZ2V0KCdzYXZlRmlsZScpOwogICAgICAgICAgICAgICAgcnEub25zdWNjZXNzPWZ1bmN0aW9uKCl7cmVzb2x2ZShycS5yZXN1bHR8fG51bGwpO307CiAgICAgICAgICAgICAgICBycS5vbmVycm9yPWZ1bmN0aW9uKCl7cmVzb2x2ZShudWxsKTt9OwogICAgICAgICAgICB9KTsKICAgICAgICB9KS5jYXRjaChmdW5jdGlvbigpe3JldHVybiBudWxsO30pOwogICAgfQogICAgZnVuY3Rpb24gY2xlYXJTdG9yZWRIYW5kbGUoKXsKICAgICAgICBvcGVuSGFuZGxlREIoKS50aGVuKGZ1bmN0aW9uKGRiKXsKICAgICAgICAgICAgdmFyIHR4PWRiLnRyYW5zYWN0aW9uKCdoYW5kbGVzJywncmVhZHdyaXRlJyk7CiAgICAgICAgICAgIHR4Lm9iamVjdFN0b3JlKCdoYW5kbGVzJykuZGVsZXRlKCdzYXZlRmlsZScpOwogICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uKCl7fSk7CiAgICB9CgogICAgLy8gQ2hvaXNpciB1biBmaWNoaWVyIGRlIHNhdXZlZ2FyZGUKICAgIGFzeW5jIGZ1bmN0aW9uIHBpY2tTYXZlRmlsZSgpewogICAgICAgIHRyeXsKICAgICAgICAgICAgLy8gQ2hvaXNpciB1biBkb3NzaWVyCiAgICAgICAgICAgIHZhciBkaXJIYW5kbGU9YXdhaXQgd2luZG93LnNob3dEaXJlY3RvcnlQaWNrZXIoe21vZGU6J3JlYWR3cml0ZSd9KTsKICAgICAgICAgICAgLy8gQ3LDqWVyIG91IG91dnJpciBsZSBmaWNoaWVyIGRhbnMgY2UgZG9zc2llcgogICAgICAgICAgICB2YXIgZmlsZUhhbmRsZT1hd2FpdCBkaXJIYW5kbGUuZ2V0RmlsZUhhbmRsZSgnY2FkaXJfZGF0YS5qc29uJyx7Y3JlYXRlOnRydWV9KTsKICAgICAgICAgICAgX2ZpbGVIYW5kbGU9ZmlsZUhhbmRsZTsKICAgICAgICAgICAgX2RpckhhbmRsZT1kaXJIYW5kbGU7CiAgICAgICAgICAgIHN0b3JlSGFuZGxlKGZpbGVIYW5kbGUpOwogICAgICAgICAgICBzdG9yZURpckhhbmRsZShkaXJIYW5kbGUpOwogICAgICAgICAgICBhd2FpdCB3cml0ZVRvRmlsZSgpOwogICAgICAgICAgICB1cGRhdGVGaWxlVUkoKTsKICAgICAgICB9Y2F0Y2goZSl7CiAgICAgICAgICAgIGlmKGUubmFtZSE9PSdBYm9ydEVycm9yJykgYWxlcnQoJ0VycmV1ciA6ICcrZS5tZXNzYWdlKTsKICAgICAgICB9CiAgICB9CgogICAgLy8gQXVzc2kgcGVybWV0dHJlIGRlIGNob2lzaXIgdW4gZmljaGllciBleGlzdGFudAogICAgYXN5bmMgZnVuY3Rpb24gcGlja0V4aXN0aW5nRmlsZSgpewogICAgICAgIHRyeXsKICAgICAgICAgICAgdmFyIGhhbmRsZXM9YXdhaXQgd2luZG93LnNob3dPcGVuRmlsZVBpY2tlcih7CiAgICAgICAgICAgICAgICB0eXBlczpbe2Rlc2NyaXB0aW9uOidKU09OJyxhY2NlcHQ6eydhcHBsaWNhdGlvbi9qc29uJzpbJy5qc29uJ119fV0KICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHZhciBoYW5kbGU9aGFuZGxlc1swXTsKICAgICAgICAgICAgX2ZpbGVIYW5kbGU9aGFuZGxlOwogICAgICAgICAgICBzdG9yZUhhbmRsZShoYW5kbGUpOwogICAgICAgICAgICAvLyBDaGFyZ2VyIGxlcyBkb25uw6llcyBkZXB1aXMgbGUgZmljaGllcgogICAgICAgICAgICB2YXIgbG9hZGVkPWF3YWl0IGxvYWRGcm9tRmlsZSgpOwogICAgICAgICAgICB1cGRhdGVGaWxlVUkoKTsKICAgICAgICAgICAgaWYobG9hZGVkKXtsb2NhdGlvbi5yZWxvYWQoKTt9CiAgICAgICAgfWNhdGNoKGUpewogICAgICAgICAgICBpZihlLm5hbWUhPT0nQWJvcnRFcnJvcicpIGFsZXJ0KCdFcnJldXIgOiAnK2UubWVzc2FnZSk7CiAgICAgICAgfQogICAgfQoKICAgIC8vIMOJY3JpcmUgZGFucyBsZSBmaWNoaWVyIGNob2lzaQogICAgYXN5bmMgZnVuY3Rpb24gd3JpdGVUb0ZpbGUoKXsKICAgICAgICBpZighX2ZpbGVIYW5kbGUpcmV0dXJuOwogICAgICAgIHRyeXsKICAgICAgICAgICAgdmFyIHdyaXRhYmxlPWF3YWl0IF9maWxlSGFuZGxlLmNyZWF0ZVdyaXRhYmxlKCk7CiAgICAgICAgICAgIGF3YWl0IHdyaXRhYmxlLndyaXRlKEpTT04uc3RyaW5naWZ5KGFwcERhdGEsbnVsbCwyKSk7CiAgICAgICAgICAgIGF3YWl0IHdyaXRhYmxlLmNsb3NlKCk7CiAgICAgICAgfWNhdGNoKGUpewogICAgICAgICAgICBjb25zb2xlLndhcm4oJ8OJY3JpdHVyZSBmaWNoaWVyIMOpY2hvdcOpZTonLGUpOwogICAgICAgICAgICAvLyBTaSBwZXJtaXNzaW9uIHJlZnVzw6llLCB0ZW50ZXIgZGUgcmVkZW1hbmRlcgogICAgICAgICAgICBpZihlLm5hbWU9PT0nTm90QWxsb3dlZEVycm9yJyl7CiAgICAgICAgICAgICAgICB0cnl7CiAgICAgICAgICAgICAgICAgICAgdmFyIHBlcm09YXdhaXQgX2ZpbGVIYW5kbGUucmVxdWVzdFBlcm1pc3Npb24oe21vZGU6J3JlYWR3cml0ZSd9KTsKICAgICAgICAgICAgICAgICAgICBpZihwZXJtPT09J2dyYW50ZWQnKXsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHcyPWF3YWl0IF9maWxlSGFuZGxlLmNyZWF0ZVdyaXRhYmxlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHcyLndyaXRlKEpTT04uc3RyaW5naWZ5KGFwcERhdGEsbnVsbCwyKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHcyLmNsb3NlKCk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfWNhdGNoKGUyKXtjb25zb2xlLndhcm4oJ1Blcm1pc3Npb24gcmVmdXPDqWU6JyxlMik7fQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQoKICAgIC8vIENoYXJnZXIgZGVwdWlzIGxlIGZpY2hpZXIKICAgIGFzeW5jIGZ1bmN0aW9uIGxvYWRGcm9tRmlsZSgpewogICAgICAgIGlmKCFfZmlsZUhhbmRsZSlyZXR1cm4gZmFsc2U7CiAgICAgICAgdHJ5ewogICAgICAgICAgICB2YXIgcGVybT1hd2FpdCBfZmlsZUhhbmRsZS5xdWVyeVBlcm1pc3Npb24oe21vZGU6J3JlYWR3cml0ZSd9KTsKICAgICAgICAgICAgaWYocGVybSE9PSdncmFudGVkJyl7CiAgICAgICAgICAgICAgICBwZXJtPWF3YWl0IF9maWxlSGFuZGxlLnJlcXVlc3RQZXJtaXNzaW9uKHttb2RlOidyZWFkd3JpdGUnfSk7CiAgICAgICAgICAgICAgICBpZihwZXJtIT09J2dyYW50ZWQnKXJldHVybiBmYWxzZTsKICAgICAgICAgICAgfQogICAgICAgICAgICB2YXIgZmlsZT1hd2FpdCBfZmlsZUhhbmRsZS5nZXRGaWxlKCk7CiAgICAgICAgICAgIHZhciB0ZXh0PWF3YWl0IGZpbGUudGV4dCgpOwogICAgICAgICAgICB2YXIgZGF0YT1KU09OLnBhcnNlKHRleHQpOwogICAgICAgICAgICBhcHBEYXRhPWRhdGE7CiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdwZXJkaXJfcGlsb3RlX3YxMCcsSlNPTi5zdHJpbmdpZnkoYXBwRGF0YSkpOwogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9Y2F0Y2goZSl7CiAgICAgICAgICAgIGNvbnNvbGUud2FybignTGVjdHVyZSBmaWNoaWVyIMOpY2hvdcOpZTonLGUpOwogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQogICAgfQoKICAgIC8vIETDqWxpZXIgbGUgZmljaGllcgogICAgZnVuY3Rpb24gdW5saW5rRmlsZSgpewogICAgICAgIGlmKGNvbmZpcm0oJ0TDqWxpZXIgbGUgZG9zc2llciBkZSBzYXV2ZWdhcmRlID9cbkxlcyBkb25uw6llcyByZXN0ZXJvbnQgZGFucyBsZSBuYXZpZ2F0ZXVyLicpKXsKICAgICAgICAgICAgX2ZpbGVIYW5kbGU9bnVsbDsKICAgICAgICAgICAgX2RpckhhbmRsZT1udWxsOwogICAgICAgICAgICBjbGVhclN0b3JlZEhhbmRsZSgpOwogICAgICAgICAgICBvcGVuSGFuZGxlREIoKS50aGVuKGZ1bmN0aW9uKGRiKXt2YXIgdHg9ZGIudHJhbnNhY3Rpb24oJ2hhbmRsZXMnLCdyZWFkd3JpdGUnKTt0eC5vYmplY3RTdG9yZSgnaGFuZGxlcycpLmRlbGV0ZSgnc2F2ZURpcicpO30pLmNhdGNoKGZ1bmN0aW9uKCl7fSk7CiAgICAgICAgICAgIHVwZGF0ZUZpbGVVSSgpOwogICAgICAgIH0KICAgIH0KCiAgICAvLyBNaXNlIMOgIGpvdXIgZGUgbCdhZmZpY2hhZ2UKICAgIGZ1bmN0aW9uIHVwZGF0ZUZpbGVVSSgpewogICAgICAgIHZhciBlbD1kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmlsZS1saW5rLXN0YXR1cycpOwogICAgICAgIHZhciBidG49ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpbGUtdW5saW5rLWJ0bicpOwogICAgICAgIGlmKCFlbClyZXR1cm47CiAgICAgICAgaWYoX2ZpbGVIYW5kbGUpewogICAgICAgICAgICB2YXIgZGlyTmFtZT1fZGlySGFuZGxlP19kaXJIYW5kbGUubmFtZSsnLyc6Jyc7CiAgICAgICAgICAgIGVsLmlubmVySFRNTD0nPGkgY2xhc3M9ImZhcyBmYS1jaGVjay1jaXJjbGUiIHN0eWxlPSJjb2xvcjojMjJDNTVFIj48L2k+IDxzdHJvbmc+JytkaXJOYW1lK19maWxlSGFuZGxlLm5hbWUrJzwvc3Ryb25nPiA8c3BhbiBzdHlsZT0iY29sb3I6IzIyQzU1RTtmb250LXNpemU6LjdyZW0iPihzYXV2ZWdhcmRlIGF1dG9tYXRpcXVlKTwvc3Bhbj4nOwogICAgICAgICAgICBpZihidG4pYnRuLnN0eWxlLmRpc3BsYXk9J2lubGluZS1mbGV4JzsKICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgZWwuaW5uZXJIVE1MPSc8aSBjbGFzcz0iZmFzIGZhLXVubGluayIgc3R5bGU9ImNvbG9yOiNhYWEiPjwvaT4gPHNwYW4gc3R5bGU9ImNvbG9yOiM5OTkiPkF1Y3VuIGRvc3NpZXIgc8OpbGVjdGlvbm7DqTwvc3Bhbj4nOwogICAgICAgICAgICBpZihidG4pYnRuLnN0eWxlLmRpc3BsYXk9J25vbmUnOwogICAgICAgIH0KICAgIH0KCiAgICAvLyBSZXN0YXVyZXIgbGUgaGFuZGxlIGF1IGTDqW1hcnJhZ2UKICAgIGFzeW5jIGZ1bmN0aW9uIHJlc3RvcmVGaWxlSGFuZGxlKCl7CiAgICAgICAgaWYoIXdpbmRvdy5zaG93RGlyZWN0b3J5UGlja2VyJiYhd2luZG93LnNob3dTYXZlRmlsZVBpY2tlcilyZXR1cm47CiAgICAgICAgdmFyIGRoPWF3YWl0IGdldFN0b3JlZERpckhhbmRsZSgpOwogICAgICAgIGlmKGRoKV9kaXJIYW5kbGU9ZGg7CiAgICAgICAgdmFyIGhhbmRsZT1hd2FpdCBnZXRTdG9yZWRIYW5kbGUoKTsKICAgICAgICBpZihoYW5kbGUpewogICAgICAgICAgICBfZmlsZUhhbmRsZT1oYW5kbGU7CiAgICAgICAgICAgIHVwZGF0ZUZpbGVVSSgpOwogICAgICAgICAgICAvLyBUZW50ZXIgZGUgY2hhcmdlciBsZXMgZG9ubsOpZXMgZHUgZmljaGllciAocGx1cyByw6ljZW50ZXMgPykKICAgICAgICAgICAgdHJ5ewogICAgICAgICAgICAgICAgdmFyIHBlcm09YXdhaXQgaGFuZGxlLnF1ZXJ5UGVybWlzc2lvbih7bW9kZToncmVhZHdyaXRlJ30pOwogICAgICAgICAgICAgICAgaWYocGVybT09PSdncmFudGVkJyl7CiAgICAgICAgICAgICAgICAgICAgdmFyIGZpbGU9YXdhaXQgaGFuZGxlLmdldEZpbGUoKTsKICAgICAgICAgICAgICAgICAgICB2YXIgdGV4dD1hd2FpdCBmaWxlLnRleHQoKTsKICAgICAgICAgICAgICAgICAgICB2YXIgZmlsZURhdGE9SlNPTi5wYXJzZSh0ZXh0KTsKICAgICAgICAgICAgICAgICAgICAvLyBDb21wYXJlciBsZXMgdGltZXN0YW1wcyBwb3VyIHByZW5kcmUgbGUgcGx1cyByw6ljZW50CiAgICAgICAgICAgICAgICAgICAgdmFyIGZpbGVNb2Q9ZmlsZS5sYXN0TW9kaWZpZWR8fDA7CiAgICAgICAgICAgICAgICAgICAgdmFyIGxvY2FsU3RyPWxvY2FsU3RvcmFnZS5nZXRJdGVtKCdwZXJkaXJfcGlsb3RlX3YxMCcpOwogICAgICAgICAgICAgICAgICAgIGlmKGxvY2FsU3RyKXsKICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgbGUgZmljaGllciBlc3QgcGx1cyByw6ljZW50LCBjaGFyZ2VyIGRlcHVpcyBsZSBmaWNoaWVyCiAgICAgICAgICAgICAgICAgICAgICAgIGFwcERhdGE9ZmlsZURhdGE7CiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdwZXJkaXJfcGlsb3RlX3YxMCcsSlNPTi5zdHJpbmdpZnkoYXBwRGF0YSkpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfWNhdGNoKGUpe2NvbnNvbGUubG9nKCdSZXN0YXVyYXRpb24gYXV0bzogZW4gYXR0ZW50ZSBkZSBwZXJtaXNzaW9uIHV0aWxpc2F0ZXVyJyk7fQogICAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBzYXZlRGF0YSgpewogICAgICAgIHRyeXtsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgncGVyZGlyX3BpbG90ZV92MTAnLEpTT04uc3RyaW5naWZ5KGFwcERhdGEpKTtpZihfZmlsZUhhbmRsZSl3cml0ZVRvRmlsZSgpO31jYXRjaChlKXtjb25zb2xlLmVycm9yKCdzYXZlRGF0YTonLGUpO30KICAgICAgICB0cnl7dmFyIG1zZz1kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYXV0by1zYXZlLW1zZycpO2lmKG1zZyl7bXNnLnN0eWxlLmRpc3BsYXk9J2ZsZXgnO3NldFRpbWVvdXQoZnVuY3Rpb24oKXttc2cuc3R5bGUuZGlzcGxheT0nbm9uZSc7fSwxMDAwKTt9fWNhdGNoKGUyKXt9CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIGxvYWREYXRhKCkgeyAKICAgICAgICBjb25zdCBkID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3BlcmRpcl9waWxvdGVfdjEwJyk7IAogICAgICAgIC8vIE1pZ3JhdGlvbiBkZXB1aXMgdjkuOSBzaSBuw6ljZXNzYWlyZQogICAgICAgIGNvbnN0IG9sZCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdwZXJkaXJfcGlsb3RlX3Y5Jyk7CiAgICAgICAgaWYoZCkgewogICAgICAgICAgICBhcHBEYXRhID0gSlNPTi5wYXJzZShkKTsgCiAgICAgICAgfSBlbHNlIGlmIChvbGQpIHsKICAgICAgICAgICAgYXBwRGF0YSA9IEpTT04ucGFyc2Uob2xkKTsKICAgICAgICAgICAgc2F2ZURhdGEoKTsgLy8gU2F2ZSBhcyBuZXcgdmVyc2lvbgogICAgICAgIH0KICAgICAgICAKICAgICAgICAvLyBJbml0IHN0cnVjdHVyZXMgaWYgbWlzc2luZwogICAgICAgIGlmKCFhcHBEYXRhLnRvZG8pIGFwcERhdGEudG9kbyA9IHsgdXJnZW50OltdLCBwbGFuOltdLCBwb3NzaWJsZTpbXSwgZGVsZWdhdGU6W10gfTsKICAgICAgICBpZighYXBwRGF0YS5zZXR0aW5ncy5jdXN0b21FbnRUeXBlcykgYXBwRGF0YS5zZXR0aW5ncy5jdXN0b21FbnRUeXBlcyA9IFtdOwogICAgICAgIGlmKCFhcHBEYXRhLnNldHRpbmdzLmN1c3RvbVJldVR5cGVzKSBhcHBEYXRhLnNldHRpbmdzLmN1c3RvbVJldVR5cGVzID0gW107CiAgICB9CgogICAgZnVuY3Rpb24gYWRkQ3VzdG9tVHlwZShzZWxlY3RJZCkgewogICAgICAgIGNvbnN0IG5ld1R5cGUgPSBwcm9tcHQoIkVudHJleiBsZSBub3V2ZWF1IHR5cGUgOiIpOwogICAgICAgIGlmIChuZXdUeXBlKSB7CiAgICAgICAgICAgIGNvbnN0IHNlbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHNlbGVjdElkKTsKICAgICAgICAgICAgY29uc3Qgb3B0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnb3B0aW9uJyk7CiAgICAgICAgICAgIG9wdC50ZXh0ID0gbmV3VHlwZTsKICAgICAgICAgICAgc2VsLmFkZChvcHQsIHNlbFtzZWwubGVuZ3RoIC0gMV0pOwogICAgICAgICAgICBzZWwudmFsdWUgPSBuZXdUeXBlOwogICAgICAgICAgICBpZihzZWxlY3RJZCA9PT0gJ2VudC10eXBlJykgYXBwRGF0YS5zZXR0aW5ncy5jdXN0b21FbnRUeXBlcy5wdXNoKG5ld1R5cGUpOwogICAgICAgICAgICBlbHNlIGFwcERhdGEuc2V0dGluZ3MuY3VzdG9tUmV1VHlwZXMucHVzaChuZXdUeXBlKTsKICAgICAgICAgICAgc2F2ZURhdGEoKTsKICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gbG9hZEN1c3RvbVR5cGVzKCkgewogICAgICAgIGNvbnN0IGVudFNlbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlbnQtdHlwZScpOwogICAgICAgIGFwcERhdGEuc2V0dGluZ3MuY3VzdG9tRW50VHlwZXMuZm9yRWFjaCh0ID0+IHsgaWYoIUFycmF5LmZyb20oZW50U2VsLm9wdGlvbnMpLnNvbWUobyA9PiBvLnRleHQgPT09IHQpKSB7IGNvbnN0IG9wdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ29wdGlvbicpOyBvcHQudGV4dCA9IHQ7IGVudFNlbC5hZGQob3B0LCBlbnRTZWxbZW50U2VsLmxlbmd0aC0xXSk7IH0gfSk7CiAgICAgICAgY29uc3QgcmV1U2VsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JldS10eXBlJyk7CiAgICAgICAgYXBwRGF0YS5zZXR0aW5ncy5jdXN0b21SZXVUeXBlcy5mb3JFYWNoKHQgPT4geyBpZighQXJyYXkuZnJvbShyZXVTZWwub3B0aW9ucykuc29tZShvID0+IG8udGV4dCA9PT0gdCkpIHsgY29uc3Qgb3B0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnb3B0aW9uJyk7IG9wdC50ZXh0ID0gdDsgcmV1U2VsLmFkZChvcHQsIHJldVNlbFtyZXVTZWwubGVuZ3RoLTFdKTsgfSB9KTsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gc3dpdGNoTWVudShpZCkgewogICAgICAgIGlmKGlkID09PSAnbWVudTgnKSByZXNldEVkaXRNb2RlKCk7CiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLm1lbnUtaXRlbScpLmZvckVhY2goZWw9PmVsLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpKTsKICAgICAgICB2YXIgbWkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1tZW51PSInK2lkKyciXScpOwogICAgICAgIGlmKG1pKSBtaS5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTsKICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuc2VjdGlvbicpLmZvckVhY2goZWw9PmVsLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpKTsKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCkuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7CiAgICAgICAgY29uc3QgdCA9IHsnbWVudTEnOidQYXJhbcOodHJlcycsJ21lbnUyJzonVG8gRG8gTGlzdCcsJ21lbnUzJzonQ2FsZW5kcmllcicsJ21lbnU0JzonQ29uc2VpbCBkZSBEaXJlY3Rpb24nLCdtZW51NSc6J1N1aXZpIMOJbMOodmUnLCdtZW51Nic6J0VudHJldGllbnMnLCdtZW51Nyc6J1LDqXVuaW9ucycsJ21lbnU4JzonSGlzdG9yaXF1ZScsJ21lbnU5JzonVGFibGVhdSBkZSBCb3JkJywnbWVudTEwJzonQWN0aXZpdMOpcyBww6lkYWdvZ2lxdWVzJywnbWVudTExJzonw4ljaMOpYW5jZXMnLCdtZW51MTInOidQcm9jw6lkdXJlcyd9OwogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjdXJyZW50LXRpdGxlJykuaW5uZXJUZXh0ID0gdFtpZF0gfHwgJ0NBRElSJzsKICAgICAgICBpZihpZD09PSdtZW51MicpIHsgcmVuZGVyVG9kbygpOyBjaGVja0RhaWx5VGFza3MoKTsgfQogICAgICAgIGlmKGlkPT09J21lbnUzJykgeyByZW5kZXJQaWxvdENhbDE1KCk7IH0KICAgICAgICBpZihpZD09PSdtZW51OCcpIHJlbmRlckhpc3RvcnkoKTsKICAgICAgICBpZihpZD09PSdtZW51OScpIHJlbmRlckRhc2hib2FyZCgpOwogICAgICAgIGlmKGlkPT09J21lbnUxJyl7bG9hZFNldHRpbmdzVUkoKTt1cGRhdGVGaWxlVUkoKTt9CiAgICAgICAgaWYoaWQ9PT0nbWVudTEwJykgcmVuZGVyRXZlbnRzKCk7CiAgICAgICAgaWYoaWQ9PT0nbWVudTEyJyl7YXV0b1Jlc2V0RG9uZSgpO3JlbmRlclByb2NlZHVyZXMoKTt9CiAgICAgICAgaWYoaWQ9PT0nbWVudTExJykgeyBhdXRvUmVzZXREb25lKCk7IGlmKCF3aW5kb3cuX2dhbnR0UmVhZHkpIGluaXRHYW50dFZpZXcoKTsgZ3RUb2RheSgpOyB9CiAgICB9CgogICAgCiAgICAvLyDilZDilZDilZAgVEVNUExBVEVTIFBBUiBEw4lGQVVUIOKVkOKVkOKVkAogICAgdmFyIERFRkFVTFRfVEVNUExBVEVTID0gewogICAgICAgIGVudDogJzxwPjxzdHJvbmc+T2JqZXQgOjwvc3Ryb25nPiAuLi48L3A+PHA+PHN0cm9uZz7DiWNoYW5nZXMgOjwvc3Ryb25nPjwvcD48dWw+PGxpPi4uLjwvbGk+PC91bD48cD48c3Ryb25nPkTDqWNpc2lvbnMgOjwvc3Ryb25nPjwvcD48cD4uLi48L3A+JywKICAgICAgICByZXU6ICc8cD48c3Ryb25nPk9yZHJlIGR1IGpvdXIgOjwvc3Ryb25nPiAuLi48L3A+PHA+PHN0cm9uZz5Ew6lsaWLDqXJhdGlvbnMgOjwvc3Ryb25nPjwvcD48dWw+PGxpPi4uLjwvbGk+PC91bD4nLAogICAgICAgIGRpcjogJzxwPjxzdHJvbmc+VGjDqG1lcyBhYm9yZMOpcyA6PC9zdHJvbmc+PC9wPjx1bD48bGk+UMOpZGFnb2dpZSA6IC4uLjwvbGk+PGxpPlZpZSBTY29sYWlyZSA6IC4uLjwvbGk+PGxpPlPDqWN1cml0w6kgOiAuLi48L2xpPjxsaT5EaXZlcnMgOiAuLi48L2xpPjwvdWw+JywKICAgICAgICBzdWl2aTogJzxwPjxzdHJvbmc+U2l0dWF0aW9ucyDDqWzDqHZlcyA6PC9zdHJvbmc+PC9wPjx1bD48bGk+W05PTSBQcsOpbm9tXSA6IC4uLjwvbGk+PC91bD4nCiAgICB9OwoKICAgIGZ1bmN0aW9uIGxvYWRUZW1wbGF0ZXNVSSgpIHsKICAgICAgICB2YXIgdHBscyA9IGFwcERhdGEuc2V0dGluZ3MudGVtcGxhdGVzIHx8IERFRkFVTFRfVEVNUExBVEVTOwogICAgICAgIHZhciBlbDsKICAgICAgICBlbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0cGwtZW50Jyk7IGlmIChlbCkgZWwuaW5uZXJIVE1MID0gdHBscy5lbnQgfHwgREVGQVVMVF9URU1QTEFURVMuZW50OwogICAgICAgIGVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RwbC1yZXUnKTsgaWYgKGVsKSBlbC5pbm5lckhUTUwgPSB0cGxzLnJldSB8fCBERUZBVUxUX1RFTVBMQVRFUy5yZXU7CiAgICAgICAgZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndHBsLWRpcicpOyBpZiAoZWwpIGVsLmlubmVySFRNTCA9IHRwbHMuZGlyIHx8IERFRkFVTFRfVEVNUExBVEVTLmRpcjsKICAgICAgICBlbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0cGwtc3VpdmknKTsgaWYgKGVsKSBlbC5pbm5lckhUTUwgPSB0cGxzLnN1aXZpIHx8IERFRkFVTFRfVEVNUExBVEVTLnN1aXZpOwogICAgfQoKICAgIGZ1bmN0aW9uIHNhdmVUZW1wbGF0ZXMoKSB7CiAgICAgICAgaWYgKCFhcHBEYXRhLnNldHRpbmdzKSBhcHBEYXRhLnNldHRpbmdzID0ge307CiAgICAgICAgYXBwRGF0YS5zZXR0aW5ncy50ZW1wbGF0ZXMgPSB7CiAgICAgICAgICAgIGVudDogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RwbC1lbnQnKS5pbm5lckhUTUwsCiAgICAgICAgICAgIHJldTogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RwbC1yZXUnKS5pbm5lckhUTUwsCiAgICAgICAgICAgIGRpcjogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RwbC1kaXInKS5pbm5lckhUTUwsCiAgICAgICAgICAgIHN1aXZpOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndHBsLXN1aXZpJykuaW5uZXJIVE1MCiAgICAgICAgfTsKICAgICAgICBzYXZlRGF0YSgpOwogICAgICAgIGFsZXJ0KCdNb2TDqGxlcyBlbnJlZ2lzdHLDqXMgIScpOwogICAgfQoKICAgIGZ1bmN0aW9uIGdldFRlbXBsYXRlKHR5cGUpIHsKICAgICAgICB2YXIgdHBscyA9IChhcHBEYXRhLnNldHRpbmdzICYmIGFwcERhdGEuc2V0dGluZ3MudGVtcGxhdGVzKSA/IGFwcERhdGEuc2V0dGluZ3MudGVtcGxhdGVzIDogREVGQVVMVF9URU1QTEFURVM7CiAgICAgICAgcmV0dXJuIHRwbHNbdHlwZV0gfHwgREVGQVVMVF9URU1QTEFURVNbdHlwZV0gfHwgJyc7CiAgICB9CgogICAgZnVuY3Rpb24gaW5pdERvY1RlbXBsYXRlcygpIHsKICAgICAgICBjb25zdCBoZWFkZXIgPSBgPGRpdiBjbGFzcz0ibm8tcHJpbnQiIHN0eWxlPSJtYXJnaW4tYm90dG9tOjIwcHg7IGJvcmRlci1ib3R0b206MXB4IHNvbGlkICNlZWU7IHBhZGRpbmctYm90dG9tOjEwcHg7Ij48c3Ryb25nPiR7YXBwRGF0YS5zZXR0aW5ncy5zY2hvb2x9PC9zdHJvbmc+IHwgRGlyZWN0aW9uPC9kaXY+YDsKICAgICAgICBjb25zdCBlbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZW50LWNvbnRlbnUnKTsgY29uc3QgcmV1ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JldS1jb250ZW51Jyk7CiAgICAgICAgY29uc3QgZGlyYyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkaXItY29udGVudScpOyBjb25zdCBkaXJuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Rpci1ub3RlcycpOwogICAgICAgIGNvbnN0IHN1aSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzdWl2aS1jb250ZW51Jyk7CgogICAgICAgIGlmKGVudCAmJiBlbnQuaW5uZXJUZXh0LnRyaW0oKT09PSIiKSBlbnQuaW5uZXJIVE1MID0gaGVhZGVyICsgZ2V0VGVtcGxhdGUoJ2VudCcpOwogICAgICAgIGlmKHJldSAmJiByZXUuaW5uZXJUZXh0LnRyaW0oKT09PSIiKSByZXUuaW5uZXJIVE1MID0gaGVhZGVyICsgZ2V0VGVtcGxhdGUoJ3JldScpOwogICAgICAgIGlmKGRpcmMgJiYgZGlyYy5pbm5lclRleHQudHJpbSgpPT09IiIpIGRpcmMuaW5uZXJIVE1MID0gZ2V0VGVtcGxhdGUoJ2RpcicpOwogICAgICAgIGlmKGRpcm4gJiYgZGlybi5pbm5lclRleHQudHJpbSgpPT09IiIpIGRpcm4uaW5uZXJIVE1MID0gYDxwPjxlbT5Ob3RlcyBkZSBzw6lhbmNlLi4uPC9lbT48L3A+YDsKICAgICAgICBpZihzdWkgJiYgc3VpLmlubmVyVGV4dC50cmltKCk9PT0iIikgc3VpLmlubmVySFRNTCA9IGhlYWRlciArIGdldFRlbXBsYXRlKCdzdWl2aScpOwogICAgfQoKICAgIGZ1bmN0aW9uIHJhelBhZ2UobW9kZSkgewogICAgICAgIGlmKCFjb25maXJtKCJFZmZhY2VyIHRvdXQgbGUgY29udGVudSBkZSBjZXR0ZSBwYWdlID8iKSkgcmV0dXJuOwogICAgICAgIHJlc2V0RWRpdE1vZGUoKTsKICAgICAgICBjb25zdCB0b2RheSA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKS5zcGxpdCgnVCcpWzBdOwogICAgICAgIGlmKG1vZGUgPT09ICdESVInKSB7IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkaXItZGF0ZScpLnZhbHVlID0gdG9kYXk7IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkaXItcGFydHMnKS52YWx1ZSA9ICIiOyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGlyLWNvbnRlbnUnKS5pbm5lckhUTUwgPSAiIjsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Rpci1ub3RlcycpLmlubmVySFRNTCA9ICIiOyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGlyLWF0dGFjaG1lbnRzJykuaW5uZXJIVE1MID0gIiI7IH0KICAgICAgICBlbHNlIGlmIChtb2RlID09PSAnU1VJVkknKSB7IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzdWl2aS1kYXRlJykudmFsdWUgPSB0b2RheTsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N1aXZpLXBhcnRzJykudmFsdWUgPSAiIjsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N1aXZpLWNsYXNzZXMnKS52YWx1ZSA9ICIiOyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3VpdmktY29udGVudScpLmlubmVySFRNTCA9ICIiOyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3VpdmktYXR0YWNobWVudHMnKS5pbm5lckhUTUwgPSAiIjsgfQogICAgICAgIGVsc2UgaWYgKG1vZGUgPT09ICdFTlQnKSB7IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlbnQtZGF0ZScpLnZhbHVlID0gdG9kYXk7IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlbnQtb2JqZXQnKS52YWx1ZSA9ICIiOyByZXNldE11bHRpKCdlbnQtc3R1ZGVudHMtY29udGFpbmVyJywgJ2VudC1zdHVkZW50JywgJ05vbSDDiWzDqHZlJyk7IHJlc2V0TXVsdGkoJ2VudC10ZWFjaGVycy1jb250YWluZXInLCAnZW50LXRlYWNoZXInLCAnTm9tIFBlcnNvbm5lbCcpOyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZW50LWNvbnRlbnUnKS5pbm5lckhUTUwgPSAiIjsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VudC1hdHRhY2htZW50cycpLmlubmVySFRNTCA9ICIiOyB9CiAgICAgICAgZWxzZSBpZiAobW9kZSA9PT0gJ1JFVScpIHsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JldS1kYXRlJykudmFsdWUgPSB0b2RheTsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JldS1vZGonKS52YWx1ZSA9ICIiOyByZXNldE11bHRpKCdyZXUtc3R1ZGVudHMtY29udGFpbmVyJywgJ3JldS1zdHVkZW50JywgJ05vbSDDiWzDqHZlJyk7IHJlc2V0TXVsdGkoJ3JldS10ZWFjaGVycy1jb250YWluZXInLCAncmV1LXRlYWNoZXInLCAnTm9tIFBlcnNvbm5lbCcpOyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmV1LWNvbnRlbnUnKS5pbm5lckhUTUwgPSAiIjsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JldS1hdHRhY2htZW50cycpLmlubmVySFRNTCA9ICIiOyB9CiAgICAgICAgaW5pdERvY1RlbXBsYXRlcygpOwogICAgfQoKICAgIC8vIC0tLSBUT0RPIExPR0lDIChJTVBST1ZFRCBSRU9SREVSSU5HKSAtLS0KICAgIGxldCBkcmFnZ2VkSXRlbUlkID0gbnVsbDsKICAgIGxldCBzb3VyY2VDb2x1bW4gPSBudWxsOwogICAgCiAgICBmdW5jdGlvbiBhZGRUb2RvKHR5cGUpIHsgY29uc3QgdD1kb2N1bWVudC5nZXRFbGVtZW50QnlJZChgdG9kby1pbnB1dC0ke3R5cGV9YCkudmFsdWUudHJpbSgpOyBpZih0KXsgYXBwRGF0YS50b2RvW3R5cGVdLnB1c2goe2lkOkRhdGUubm93KCkudG9TdHJpbmcoKSwgdGV4dDp0LCBpc0Zyb21BZ2VuZGE6ZmFsc2V9KTsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYHRvZG8taW5wdXQtJHt0eXBlfWApLnZhbHVlPSIiOyBzYXZlRGF0YSgpOyByZW5kZXJUb2RvKCk7IH0gfQogICAgZnVuY3Rpb24gcmVtb3ZlVG9kbyh0eXBlLCBpZCkgeyBhcHBEYXRhLnRvZG9bdHlwZV0gPSBhcHBEYXRhLnRvZG9bdHlwZV0uZmlsdGVyKHQgPT4gdC5pZC50b1N0cmluZygpICE9PSBpZC50b1N0cmluZygpKTsgc2F2ZURhdGEoKTsgcmVuZGVyVG9kbygpOyB9CiAgICBmdW5jdGlvbiB1cGRhdGVUb2RvVGV4dCh0eXBlLCBpZCwgbmV3VGV4dCkgeyBjb25zdCBpdGVtID0gYXBwRGF0YS50b2RvW3R5cGVdLmZpbmQodCA9PiB0LmlkLnRvU3RyaW5nKCkgPT09IGlkLnRvU3RyaW5nKCkpOyBpZihpdGVtKSB7IGl0ZW0udGV4dCA9IG5ld1RleHQ7IHNhdmVEYXRhKCk7IH0gfQogICAgZnVuY3Rpb24gaGFuZGxlRW50ZXIoZSx0KXsgaWYoZS5rZXk9PT0nRW50ZXInKSBhZGRUb2RvKHQpOyB9CiAgICAKICAgIGZ1bmN0aW9uIGRyYWdUb2RvKGUsIGlkLCBzb3VyY2VDb2wpIHsgCiAgICAgICAgZHJhZ2dlZEl0ZW1JZCA9IGlkLnRvU3RyaW5nKCk7IAogICAgICAgIHNvdXJjZUNvbHVtbiA9IHNvdXJjZUNvbDsgCiAgICAgICAgZS5kYXRhVHJhbnNmZXIuc2V0RGF0YSgidGV4dC9wbGFpbiIsIGlkKTsgCiAgICAgICAgZS5kYXRhVHJhbnNmZXIuZWZmZWN0QWxsb3dlZCA9ICJtb3ZlIjsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gYWxsb3dEcm9wKGUpIHsgCiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOyAKICAgICAgICBjb25zdCB0YXJnZXRJdGVtID0gZS50YXJnZXQuY2xvc2VzdCgnLnRvZG8taXRlbScpOwogICAgICAgIGlmICh0YXJnZXRJdGVtKSB7CiAgICAgICAgICAgIHRhcmdldEl0ZW0uY2xhc3NMaXN0LmFkZCgnZHJhZy1vdmVyLWl0ZW0nKTsKICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnRvZG8taXRlbScpLmZvckVhY2goZWwgPT4gewogICAgICAgICAgICAgICAgaWYoZWwgIT09IHRhcmdldEl0ZW0pIGVsLmNsYXNzTGlzdC5yZW1vdmUoJ2RyYWctb3Zlci1pdGVtJyk7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGUuY3VycmVudFRhcmdldC5jbGFzc0xpc3QuYWRkKCJkcmFnLW92ZXIiKTsgCiAgICAgICAgfQogICAgfQogICAgCiAgICBmdW5jdGlvbiBkcmFnTGVhdmUoZSkgeyAKICAgICAgICBlLmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgiZHJhZy1vdmVyIik7CiAgICAgICAgaWYoZS50YXJnZXQuY2xvc2VzdCgnLnRvZG8taXRlbScpKSBlLnRhcmdldC5jbG9zZXN0KCcudG9kby1pdGVtJykuY2xhc3NMaXN0LnJlbW92ZSgnZHJhZy1vdmVyLWl0ZW0nKTsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gZHJvcChlLCB0YXJnZXRDb2wpIHsKICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnRvZG8tbGlzdCcpLmZvckVhY2goZWwgPT4gZWwuY2xhc3NMaXN0LnJlbW92ZSgnZHJhZy1vdmVyJykpOwogICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy50b2RvLWl0ZW0nKS5mb3JFYWNoKGVsID0+IGVsLmNsYXNzTGlzdC5yZW1vdmUoJ2RyYWctb3Zlci1pdGVtJykpOwoKICAgICAgICBpZiAoc291cmNlQ29sdW1uID09PSAnQUdFTkRBX1NPVVJDRScpIHsKICAgICAgICAgICAgY29uc3QgYWdUYXNrID0gYXBwRGF0YS5jYWxlbmRhci5maW5kKGMgPT4gYy5pZC50b1N0cmluZygpID09PSBkcmFnZ2VkSXRlbUlkKTsKICAgICAgICAgICAgaWYoYWdUYXNrKSBhcHBEYXRhLnRvZG9bdGFyZ2V0Q29sXS5wdXNoKHtpZDogRGF0ZS5ub3coKS50b1N0cmluZygpLCB0ZXh0OiBhZ1Rhc2sudGFzaywgaXNGcm9tQWdlbmRhOiB0cnVlfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgY29uc3Qgc291cmNlTGlzdCA9IGFwcERhdGEudG9kb1tzb3VyY2VDb2x1bW5dOwogICAgICAgICAgICBjb25zdCBpdGVtSWR4ID0gc291cmNlTGlzdC5maW5kSW5kZXgodCA9PiB0LmlkLnRvU3RyaW5nKCkgPT09IGRyYWdnZWRJdGVtSWQpOwogICAgICAgICAgICBpZihpdGVtSWR4ID09PSAtMSkgcmV0dXJuOwogICAgICAgICAgICBjb25zdCBbbW92ZWRJdGVtXSA9IHNvdXJjZUxpc3Quc3BsaWNlKGl0ZW1JZHgsIDEpOwoKICAgICAgICAgICAgY29uc3QgZHJvcFRhcmdldCA9IGUudGFyZ2V0LmNsb3Nlc3QoJy50b2RvLWl0ZW0nKTsKICAgICAgICAgICAgaWYoZHJvcFRhcmdldCAmJiBzb3VyY2VDb2x1bW4gPT09IHRhcmdldENvbCkgewogICAgICAgICAgICAgICAgY29uc3QgdGFyZ2V0SWQgPSBkcm9wVGFyZ2V0LmdldEF0dHJpYnV0ZSgnZGF0YS1pZCcpOwogICAgICAgICAgICAgICAgY29uc3QgdGFyZ2V0SWR4ID0gYXBwRGF0YS50b2RvW3RhcmdldENvbF0uZmluZEluZGV4KHQgPT4gdC5pZC50b1N0cmluZygpID09PSB0YXJnZXRJZCk7CiAgICAgICAgICAgICAgICBpZih0YXJnZXRJZHggPiAtMSkgewogICAgICAgICAgICAgICAgICAgIGFwcERhdGEudG9kb1t0YXJnZXRDb2xdLnNwbGljZSh0YXJnZXRJZHgsIDAsIG1vdmVkSXRlbSk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIGFwcERhdGEudG9kb1t0YXJnZXRDb2xdLnB1c2gobW92ZWRJdGVtKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICBhcHBEYXRhLnRvZG9bdGFyZ2V0Q29sXS5wdXNoKG1vdmVkSXRlbSk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgc2F2ZURhdGEoKTsgcmVuZGVyVG9kbygpOwogICAgfQoKICAgIGZ1bmN0aW9uIHJlbmRlclRvZG8oKSB7CiAgICAgICAgWyd1cmdlbnQnLCdwbGFuJywncG9zc2libGUnLCdkZWxlZ2F0ZSddLmZvckVhY2goY29sID0+IHsKICAgICAgICAgICAgY29uc3QgbGlzdEVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYGxpc3QtJHtjb2x9YCk7IGlmKCFsaXN0RWwpIHJldHVybjsgbGlzdEVsLmlubmVySFRNTCA9ICIiOwogICAgICAgICAgICBhcHBEYXRhLnRvZG9bY29sXS5mb3JFYWNoKGl0ZW0gPT4gewogICAgICAgICAgICAgICAgbGlzdEVsLmlubmVySFRNTCArPSBgPGxpIGNsYXNzPSJ0b2RvLWl0ZW0gJHtpdGVtLmlzRnJvbUFnZW5kYT8nZnJvbS1hZ2VuZGEnOicnfSIgZGF0YS1pZD0iJHtpdGVtLmlkfSIgZHJhZ2dhYmxlPSJ0cnVlIiBvbmRyYWdzdGFydD0iZHJhZ1RvZG8oZXZlbnQsICcke2l0ZW0uaWR9JywgJyR7Y29sfScpIiBvbmRyYWdvdmVyPSJhbGxvd0Ryb3AoZXZlbnQpIiBvbmRyYWdsZWF2ZT0iZHJhZ0xlYXZlKGV2ZW50KSI+JHtpdGVtLmlzRnJvbUFnZW5kYT8nPGkgY2xhc3M9ImZhcyBmYS1iZWxsIiBzdHlsZT0iY29sb3I6I2YxYzQwZjttYXJnaW4tcmlnaHQ6OHB4OyI+PC9pPic6Jyd9PHNwYW4gY29udGVudGVkaXRhYmxlPSJ0cnVlIiBvbmJsdXI9InVwZGF0ZVRvZG9UZXh0KCcke2NvbH0nLCcke2l0ZW0uaWR9Jyx0aGlzLmlubmVyVGV4dCkiPiR7aXRlbS50ZXh0fTwvc3Bhbj48ZGl2IGNsYXNzPSJ0b2RvLWFjdGlvbnMiPjxpIGNsYXNzPSJmYXMgZmEtdHJhc2giIG9uY2xpY2s9InJlbW92ZVRvZG8oJyR7Y29sfScsJyR7aXRlbS5pZH0nKSI+PC9pPjwvZGl2PjwvbGk+YDsKICAgICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICB9CgogICAgLy8gLS0tIENBTEVOREFSIC0tLQogICAgZnVuY3Rpb24gYWRkQ2FsZW5kYXJFdmVudCgpIHsKICAgICAgICBjb25zdCBkYXRlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NhbC1kYXRlJykudmFsdWU7IGNvbnN0IHRhc2sgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2FsLXRhc2snKS52YWx1ZS50cmltKCk7CiAgICAgICAgaWYoIWRhdGUgfHwgIXRhc2spIHJldHVybiBhbGVydCgiU2Fpc2llIGluY29tcGzDqHRlIik7CiAgICAgICAgYXBwRGF0YS5jYWxlbmRhci5wdXNoKHtpZDpEYXRlLm5vdygpLnRvU3RyaW5nKCksIGRhdGUsIHRhc2t9KTsgYXBwRGF0YS5jYWxlbmRhci5zb3J0KChhLGIpPT4gbmV3IERhdGUoYS5kYXRlKSAtIG5ldyBEYXRlKGIuZGF0ZSkpOwogICAgICAgIHNhdmVEYXRhKCk7IHJlbmRlckNhbGVuZGFyKCk7IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjYWwtdGFzaycpLnZhbHVlPSIiOwogICAgfQogICAgZnVuY3Rpb24gcmVuZGVyQ2FsZW5kYXIoKSB7CiAgICAgICAgdmFyIGxpc3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2FsZW5kYXItbGlzdCcpOwogICAgICAgIGlmICghbGlzdCkgcmV0dXJuOwogICAgICAgIGxpc3QuaW5uZXJIVE1MID0gJyc7CiAgICAgICAgdmFyIHRvZGF5ID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpLnNwbGl0KCdUJylbMF07CiAgICAgICAgdmFyIHVwY29taW5nID0gYXBwRGF0YS5jYWxlbmRhci5maWx0ZXIoZnVuY3Rpb24oYyl7IHJldHVybiBjLnRhc2sgJiYgYy50YXNrLnRyaW0oKS5sZW5ndGggPiAzICYmIGMuZGF0ZSA+PSB0b2RheTsgfSk7CgogICAgICAgIC8vIEZ1c2lvbm5lciBsZXMgw6l2w6luZW1lbnRzIEdvb2dsZSBDYWxlbmRhciBzaSBhY3RpdsOpCiAgICAgICAgaWYgKF9nY2FsRXZlbnRzICYmIF9nY2FsRXZlbnRzLmxlbmd0aCkgewogICAgICAgICAgICBfZ2NhbEV2ZW50cy5mb3JFYWNoKGZ1bmN0aW9uKGdlKSB7CiAgICAgICAgICAgICAgICBpZiAoZ2UuZGF0ZSA+PSB0b2RheSAmJiBnZS50aXRsZSAmJiBnZS50aXRsZS50cmltKCkubGVuZ3RoID4gMykgewogICAgICAgICAgICAgICAgICAgIHZhciBleGlzdHMgPSB1cGNvbWluZy5zb21lKGZ1bmN0aW9uKHUpeyByZXR1cm4gdS50YXNrID09PSBnZS50aXRsZSAmJiB1LmRhdGUgPT09IGdlLmRhdGU7IH0pOwogICAgICAgICAgICAgICAgICAgIGlmICghZXhpc3RzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHVwY29taW5nLnB1c2goe2lkOidnY2FsXycrZ2UuaWQsIGRhdGU6Z2UuZGF0ZSwgdGFzazogZ2UudGl0bGUsIGdjYWw6dHJ1ZSwgY29sb3I6Z2UuY29sb3IsIGNhbE5hbWU6Z2UuY2FsTmFtZSwgdGltZTpnZS50aW1lfSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9CgogICAgICAgIHVwY29taW5nLnNvcnQoZnVuY3Rpb24oYSxiKXsgcmV0dXJuIGEuZGF0ZS5sb2NhbGVDb21wYXJlKGIuZGF0ZSk7IH0pOwogICAgICAgIGlmKCF1cGNvbWluZy5sZW5ndGgpIHsgbGlzdC5pbm5lckhUTUwgPSAnPHRyPjx0ZCBjb2xzcGFuPSI0IiBzdHlsZT0idGV4dC1hbGlnbjpjZW50ZXI7Y29sb3I6I2JiYjtwYWRkaW5nOjIwcHgiPkF1Y3VuIMOpdsOpbmVtZW50IMOgIHZlbmlyPC90ZD48L3RyPic7IH0KICAgICAgICB1cGNvbWluZy5mb3JFYWNoKGZ1bmN0aW9uKGMpIHsKICAgICAgICAgICAgdmFyIGlzVG9kYXkgPSBjLmRhdGUgPT09IHRvZGF5OwogICAgICAgICAgICB2YXIgY2xzID0gaXNUb2RheSA/ICdyb3ctdG9kYXknIDogJyc7CiAgICAgICAgICAgIHZhciBzcmMgPSBjLmdjYWwgPyAnPHNwYW4gc3R5bGU9ImNvbG9yOiM0Mjg1ZjQ7Zm9udC1zaXplOi42NXJlbSIgdGl0bGU9Ikdvb2dsZSI+PGkgY2xhc3M9ImZhYiBmYS1nb29nbGUiPjwvaT48L3NwYW4+JyA6ICcnOwogICAgICAgICAgICB2YXIgdGltZVN0ciA9IGMudGltZSA/ICc8c21hbGwgc3R5bGU9ImNvbG9yOiM4ODgiPiAnK2MudGltZSsnPC9zbWFsbD4nIDogJyc7CiAgICAgICAgICAgIHZhciBhY3Rpb25zID0gJyc7CiAgICAgICAgICAgIGlmICghYy5nY2FsKSB7CiAgICAgICAgICAgICAgICBhY3Rpb25zID0gJzxidXR0b24gY2xhc3M9ImJ0biBidG4tc20iIHN0eWxlPSJiYWNrZ3JvdW5kOm5vbmU7Y29sb3I6IzM0OThkYjtib3JkZXI6bm9uZTtwYWRkaW5nOjJweCA0cHgiIG9uY2xpY2s9ImVkaXRDYWxFdmVudChcJycrYy5pZCsnXCcpIj48aSBjbGFzcz0iZmFzIGZhLXBlbiI+PC9pPjwvYnV0dG9uPic7CiAgICAgICAgICAgICAgICBhY3Rpb25zICs9ICc8YnV0dG9uIGNsYXNzPSJidG4gYnRuLWRhbmdlciBidG4tc20iIG9uY2xpY2s9ImRlbGV0ZUNhbEV2ZW50KFwnJytjLmlkKydcJykiPjxpIGNsYXNzPSJmYXMgZmEtdHJhc2giPjwvaT48L2J1dHRvbj4nOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGxpc3QuaW5uZXJIVE1MICs9ICc8dHIgY2xhc3M9IicrY2xzKyciPjx0ZCBzdHlsZT0id2hpdGUtc3BhY2U6bm93cmFwIj4nK25ldyBEYXRlKGMuZGF0ZSkudG9Mb2NhbGVEYXRlU3RyaW5nKCdmci1GUicpKyc8L3RkPjx0ZD4nK3NyYysnICcrYy50YXNrK3RpbWVTdHIrJzwvdGQ+PHRkIHN0eWxlPSJ3aGl0ZS1zcGFjZTpub3dyYXA7dGV4dC1hbGlnbjpyaWdodCI+JythY3Rpb25zKyc8L3RkPjwvdHI+JzsKICAgICAgICB9KTsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gZWRpdENhbEV2ZW50KGlkKSB7CiAgICAgICAgdmFyIGl0ZW0gPSBhcHBEYXRhLmNhbGVuZGFyLmZpbmQoZnVuY3Rpb24oYyl7IHJldHVybiBjLmlkLnRvU3RyaW5nKCkgPT09IGlkLnRvU3RyaW5nKCk7IH0pOwogICAgICAgIGlmICghaXRlbSkgcmV0dXJuOwogICAgICAgIHZhciBuZXdUYXNrID0gcHJvbXB0KCdNb2RpZmllciBsXCfDqXbDqW5lbWVudCA6JywgaXRlbS50YXNrKTsKICAgICAgICBpZiAobmV3VGFzayA9PT0gbnVsbCkgcmV0dXJuOwogICAgICAgIHZhciBuZXdEYXRlID0gcHJvbXB0KCdEYXRlIChBQUFBLU1NLUpKKSA6JywgaXRlbS5kYXRlKTsKICAgICAgICBpZiAobmV3RGF0ZSA9PT0gbnVsbCkgcmV0dXJuOwogICAgICAgIGl0ZW0udGFzayA9IG5ld1Rhc2s7CiAgICAgICAgaXRlbS5kYXRlID0gbmV3RGF0ZTsKICAgICAgICBzYXZlRGF0YSgpOyByZW5kZXJDYWxlbmRhcigpOyBjaGVja0RhaWx5VGFza3MoKTsKICAgIH0KCiAgICBmdW5jdGlvbiBkZWxldGVDYWxFdmVudChpZCkgewogICAgICAgIGFwcERhdGEuY2FsZW5kYXIgPSBhcHBEYXRhLmNhbGVuZGFyLmZpbHRlcihmdW5jdGlvbihjKSB7IHJldHVybiBjLmlkLnRvU3RyaW5nKCkgIT09IGlkLnRvU3RyaW5nKCk7IH0pOwogICAgICAgIHNhdmVEYXRhKCk7IHJlbmRlckNhbGVuZGFyKCk7IGNoZWNrRGFpbHlUYXNrcygpOwogICAgfQogICAgZnVuY3Rpb24gY2hlY2tEYWlseVRhc2tzKCkgewogICAgICAgIHZhciB0b2RheSA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKS5zcGxpdCgnVCcpWzBdOwogICAgICAgIHZhciBsaXN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RvZG8tdG9kYXktbGlzdCcpOwogICAgICAgIGlmICghbGlzdCkgcmV0dXJuOwogICAgICAgIGxpc3QuaW5uZXJIVE1MID0gJyc7CiAgICAgICAgdmFyIGMgPSAwOwogICAgICAgIGFwcERhdGEuY2FsZW5kYXIuZmlsdGVyKGZ1bmN0aW9uKHQpeyByZXR1cm4gdC50YXNrICYmIHQudGFzay50cmltKCkubGVuZ3RoID4gMzsgfSkuZm9yRWFjaChmdW5jdGlvbih0KSB7CiAgICAgICAgICAgIGlmICh0LmRhdGUgPT09IHRvZGF5KSB7CiAgICAgICAgICAgICAgICBjKys7CiAgICAgICAgICAgICAgICBsaXN0LmlubmVySFRNTCArPSAnPGRpdiBjbGFzcz0idG9kby10b2RheS1pdGVtIiBkcmFnZ2FibGU9InRydWUiIG9uZHJhZ3N0YXJ0PSJkcmFnVG9kbyhldmVudCwgXCcnICsgdC5pZCArICdcJywgXCdBR0VOREFfU09VUkNFXCcpIj48c3Bhbj48aSBjbGFzcz0iZmFzIGZhLWJlbGwiIHN0eWxlPSJjb2xvcjpyZWQ7IG1hcmdpbi1yaWdodDo1cHg7Ij48L2k+JyArIHQudGFzayArICc8L3NwYW4+IDxzbWFsbCBzdHlsZT0iY29sb3I6Izk5OSI+PGkgY2xhc3M9ImZhcyBmYS1hcnJvd3MtYWx0Ij48L2k+IEdsaXNzZXI8L3NtYWxsPjwvZGl2Pic7CiAgICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndG9kby10b2RheS16b25lJykuY2xhc3NMaXN0LnRvZ2dsZSgnYWN0aXZlJywgYyA+IDApOwogICAgfQoKICAgIC8vIC0tLSBBVFRBQ0hNRU5UUyAmIEhFTFBFUlMgLS0tCiAgICBmdW5jdGlvbiBhZGRNdWx0aVJvdyhjSWQsIGNsLCBwaDEpIHsKICAgICAgICB2YXIgY29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoY0lkKTsKICAgICAgICB2YXIgcm93ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgICAgcm93LmNsYXNzTmFtZSA9ICdtdWx0aS1yb3cgJyArIGNsOwogICAgICAgIHZhciBpbnAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpOwogICAgICAgIGlucC50eXBlID0gJ3RleHQnOyBpbnAuY2xhc3NOYW1lID0gJ2Zvcm0tY29udHJvbCBuYW1lJzsgaW5wLnBsYWNlaG9sZGVyID0gcGgxOwogICAgICAgIHZhciBidG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTsKICAgICAgICBidG4uY2xhc3NOYW1lID0gJ2J0biBidG4tZGFuZ2VyIGJ0bi1pY29uJzsKICAgICAgICBidG4uaW5uZXJIVE1MID0gJzxpIGNsYXNzPSJmYXMgZmEtdGltZXMiPjwvaT4nOwogICAgICAgIGJ0bi5vbmNsaWNrID0gZnVuY3Rpb24oKSB7IHRoaXMucGFyZW50RWxlbWVudC5yZW1vdmUoKTsgfTsKICAgICAgICByb3cuYXBwZW5kQ2hpbGQoaW5wKTsKICAgICAgICByb3cuYXBwZW5kQ2hpbGQoYnRuKTsKICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQocm93KTsKICAgICAgICBpZiAoY2wuaW5kZXhPZignc3R1ZGVudCcpID49IDAgfHwgY2wuaW5kZXhPZignZWxldmUnKSA+PSAwKSB7IGF0dGFjaFN0dWRlbnRBQyhpbnApOyB9CiAgICAgICAgaWYgKGNsLmluZGV4T2YoJ3RlYWNoZXInKSA+PSAwKSB7IGF0dGFjaFRlYWNoZXJBQyhpbnApOyB9CiAgICB9CiAgICBmdW5jdGlvbiBnZXRNdWx0aURhdGEoY0lkLCBjbCkgeyBsZXQgcmVzID0gW107IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoYCMke2NJZH0gLiR7Y2x9YCkuZm9yRWFjaChyb3cgPT4geyBjb25zdCBuID0gcm93LnF1ZXJ5U2VsZWN0b3IoJy5uYW1lJykudmFsdWUudHJpbSgpOyBpZihuKSByZXMucHVzaCh7bmFtZTpufSk7IH0pOyByZXR1cm4gcmVzOyB9CiAgICBmdW5jdGlvbiByZXN0b3JlTXVsdGlSb3dzKGNJZCwgY2wsIGRhdGEsIHBoMSkgeyBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChjSWQpOyBpZighY29udGFpbmVyKSByZXR1cm47IGNvbnRhaW5lci5pbm5lckhUTUwgPSAiIjsgaWYoIWRhdGEgfHwgZGF0YS5sZW5ndGggPT09IDApIHsgcmVzZXRNdWx0aShjSWQsIGNsLCBwaDEpOyByZXR1cm47IH0gZGF0YS5mb3JFYWNoKGQgPT4geyBjb250YWluZXIuaW5uZXJIVE1MICs9IGA8ZGl2IGNsYXNzPSJtdWx0aS1yb3cgJHtjbH0iPjxpbnB1dCB0eXBlPSJ0ZXh0IiBjbGFzcz0iZm9ybS1jb250cm9sIG5hbWUiIHZhbHVlPSIke2QubmFtZX0iIHBsYWNlaG9sZGVyPSIke3BoMX0iPjxidXR0b24gY2xhc3M9ImJ0biBidG4tZGFuZ2VyIGJ0bi1pY29uIiBvbmNsaWNrPSJ0aGlzLnBhcmVudEVsZW1lbnQucmVtb3ZlKCkiPjxpIGNsYXNzPSJmYXMgZmEtdGltZXMiPjwvaT48L2J1dHRvbj48L2Rpdj5gOyB9KTsgfQogICAgZnVuY3Rpb24gcmVzZXRNdWx0aShjSWQsIGNsLCBwaDEpIHsgY29uc3QgYyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGNJZCk7IGlmKGMpIGMuaW5uZXJIVE1MID0gYDxkaXYgY2xhc3M9Im11bHRpLXJvdyAke2NsfSI+PGlucHV0IHR5cGU9InRleHQiIGNsYXNzPSJmb3JtLWNvbnRyb2wgbmFtZSIgcGxhY2Vob2xkZXI9IiR7cGgxfSI+PGJ1dHRvbiBjbGFzcz0iYnRuIGJ0bi1kYW5nZXIgYnRuLWljb24iIG9uY2xpY2s9InRoaXMucGFyZW50RWxlbWVudC5yZW1vdmUoKSI+PGkgY2xhc3M9ImZhcyBmYS10aW1lcyI+PC9pPjwvYnV0dG9uPjwvZGl2PmA7IH0KICAgIAogICAgZnVuY3Rpb24gYWRkQXR0YWNobWVudChsaXN0SWQsIGlucHV0KSB7CiAgICAgICAgY29uc3QgZmlsZSA9IGlucHV0LmZpbGVzWzBdOwogICAgICAgIGlmKCFmaWxlKSByZXR1cm47CiAgICAgICAgaWYgKGZpbGUuc2l6ZSA+IDE1MDAwMCkgewogICAgICAgICAgICAgYWxlcnQoIkZpY2hpZXIgdHJvcCB2b2x1bWluZXV4IHBvdXIgbGEgc2F1dmVnYXJkZSBsb2NhbGUgKD4xNTBrbykuIFNldWwgbGUgbm9tIGR1IGZpY2hpZXIgc2VyYSBjb25zZXJ2w6kgZW4gcsOpZsOpcmVuY2UuIik7CiAgICAgICAgICAgICBhcHBlbmRBdHRhY2htZW50VUkobGlzdElkLCB7bmFtZTogZmlsZS5uYW1lLCBkYXRhOiBudWxsLCBpc1JlZjogdHJ1ZX0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICBjb25zdCByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpOwogICAgICAgICAgICAgcmVhZGVyLm9ubG9hZCA9IGZ1bmN0aW9uKGUpIHsgYXBwZW5kQXR0YWNobWVudFVJKGxpc3RJZCwge25hbWU6IGZpbGUubmFtZSwgZGF0YTogZS50YXJnZXQucmVzdWx0LCBpc1JlZjogZmFsc2V9KTsgfTsKICAgICAgICAgICAgIHJlYWRlci5yZWFkQXNEYXRhVVJMKGZpbGUpOwogICAgICAgIH0KICAgICAgICBpbnB1dC52YWx1ZSA9ICIiOwogICAgfQoKICAgIGZ1bmN0aW9uIGFwcGVuZEF0dGFjaG1lbnRVSShsaXN0SWQsIGZpbGVPYmopIHsKICAgICAgICBjb25zdCB1bCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGxpc3RJZCk7CiAgICAgICAgY29uc3QgbGkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpOwogICAgICAgIGxpLmNsYXNzTmFtZSA9ICdhdHRhY2htZW50LWl0ZW0nOwogICAgICAgIGxpLmRhdGFzZXQubmFtZSA9IGZpbGVPYmoubmFtZTsKICAgICAgICBsaS5kYXRhc2V0LmRhdGEgPSBmaWxlT2JqLmRhdGEgfHwgIiI7CiAgICAgICAgbGkuZGF0YXNldC5pc1JlZiA9IGZpbGVPYmouaXNSZWY7CiAgICAgICAgY29uc3QgbGluayA9IGZpbGVPYmouZGF0YSA/IGA8YSBocmVmPSIjIiBvbmNsaWNrPSJkb3dubG9hZEJhc2U2NCgnJHtmaWxlT2JqLmRhdGF9JywgJyR7ZmlsZU9iai5uYW1lfScpIj4ke2ZpbGVPYmoubmFtZX08L2E+YCA6IGA8c3Bhbj4ke2ZpbGVPYmoubmFtZX0gKFLDqWbDqXJlbmNlIHNldWxlKTwvc3Bhbj5gOwogICAgICAgIGxpLmlubmVySFRNTCA9IGA8ZGl2PjxpIGNsYXNzPSJmYXMgZmEtZmlsZSI+PC9pPiAke2xpbmt9PC9kaXY+IDxpIGNsYXNzPSJmYXMgZmEtdHJhc2giIHN0eWxlPSJjb2xvcjojZTc0YzNjOyBjdXJzb3I6cG9pbnRlcjsiIG9uY2xpY2s9InRoaXMucGFyZW50RWxlbWVudC5yZW1vdmUoKSI+PC9pPmA7CiAgICAgICAgdWwuYXBwZW5kQ2hpbGQobGkpOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBkb3dubG9hZEJhc2U2NChiYXNlNjQsIG5hbWUpIHsKICAgICAgICBjb25zdCBhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiYSIpOwogICAgICAgIGEuaHJlZiA9IGJhc2U2NDsKICAgICAgICBhLmRvd25sb2FkID0gbmFtZTsKICAgICAgICBhLmNsaWNrKCk7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIGdldEF0dGFjaG1lbnRzRGF0YShsaXN0SWQpIHsKICAgICAgICBjb25zdCByZXMgPSBbXTsKICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGAjJHtsaXN0SWR9IC5hdHRhY2htZW50LWl0ZW1gKS5mb3JFYWNoKGxpID0+IHsKICAgICAgICAgICAgcmVzLnB1c2goewogICAgICAgICAgICAgICAgbmFtZTogbGkuZGF0YXNldC5uYW1lLAogICAgICAgICAgICAgICAgZGF0YTogbGkuZGF0YXNldC5kYXRhID09PSAibnVsbCIgfHwgbGkuZGF0YXNldC5kYXRhID09PSAiIiA/IG51bGwgOiBsaS5kYXRhc2V0LmRhdGEsCiAgICAgICAgICAgICAgICBpc1JlZjogbGkuZGF0YXNldC5pc1JlZiA9PT0gInRydWUiCiAgICAgICAgICAgIH0pOwogICAgICAgIH0pOwogICAgICAgIHJldHVybiByZXM7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIHJlc3RvcmVBdHRhY2htZW50cyhsaXN0SWQsIGRhdGEpIHsKICAgICAgICBjb25zdCB1bCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGxpc3RJZCk7CiAgICAgICAgdWwuaW5uZXJIVE1MID0gIiI7CiAgICAgICAgaWYoIWRhdGEpIHJldHVybjsKICAgICAgICBkYXRhLmZvckVhY2goZCA9PiBhcHBlbmRBdHRhY2htZW50VUkobGlzdElkLCBkKSk7CiAgICB9CgogICAgZnVuY3Rpb24gcmVzZXRFZGl0TW9kZSgpIHsgY3VycmVudEVkaXRJZCA9IG51bGw7IGN1cnJlbnRFZGl0VHlwZSA9IG51bGw7IFsnYnRuLXNhdmUtZW50JywnYnRuLXNhdmUtcmV1JywnYnRuLXNhdmUtZGlyJywnYnRuLXNhdmUtc3VpdmknXS5mb3JFYWNoKGlkID0+IHsgY29uc3QgYiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKTsgaWYoYikgeyBiLmlubmVyVGV4dCA9IChpZC5pbmNsdWRlcygnZGlyJykgfHwgaWQuaW5jbHVkZXMoJ3N1aXZpJykpID8gIkVucmVnaXN0cmVyIChIaXN0b3JpcXVlKSIgOiAiRW5yZWdpc3RyZXIiOyBiLmNsYXNzTmFtZSA9IGIuaWQuaW5jbHVkZXMoJ3N1aXZpJykgPyAiYnRuIGJ0bi1pbmZvIiA6IChiLmlkLmluY2x1ZGVzKCdyZXUnKSA/ICJidG4gYnRuLXN1Y2Nlc3MiIDogImJ0biBidG4tcHJpbWFyeSIpOyB9IH0pOyB9CiAgICBmdW5jdGlvbiBhY3RpdmF0ZUVkaXRNb2RlKHQsIGlkKSB7IGN1cnJlbnRFZGl0SWQgPSBpZDsgY3VycmVudEVkaXRUeXBlID0gdDsgY29uc3QgbSA9IHsnRU5UJzonYnRuLXNhdmUtZW50JywnUkVVJzonYnRuLXNhdmUtcmV1JywnRElSJzonYnRuLXNhdmUtZGlyJywnU1VJVkknOididG4tc2F2ZS1zdWl2aSd9OyBjb25zdCBiID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQobVt0XSk7IGlmKGIpIHsgYi5pbm5lclRleHQgPSAiTWV0dHJlIMOgIGpvdXIgbGUgZG9jdW1lbnQiOyBiLmNsYXNzTmFtZSA9ICJidG4gYnRuLXVwZGF0ZS1tb2RlIjsgfSB9CgogICAgZnVuY3Rpb24gbG9hZEl0ZW1Gb3JFZGl0KHR5cGUsIGlkKSB7CiAgICAgICAgbGV0IGl0OwogICAgICAgIGlmKHR5cGUgPT09ICdFTlQnKSB7CiAgICAgICAgICAgIGl0ID0gYXBwRGF0YS5lbnRyZXRpZW5zLmZpbmQoeCA9PiB4LmlkLnRvU3RyaW5nKCkgPT09IGlkLnRvU3RyaW5nKCkpOyBpZighaXQpIHJldHVybjsKICAgICAgICAgICAgc3dpdGNoTWVudSgnbWVudTYnKTsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VudC1kYXRlJykudmFsdWUgPSBpdC5kYXRlOyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZW50LXR5cGUnKS52YWx1ZSA9IGl0LnR5cGU7IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlbnQtb2JqZXQnKS52YWx1ZSA9IGl0Lm9iamV0OyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZW50LWNvbnRlbnUnKS5pbm5lckhUTUwgPSBpdC5ib2R5OwogICAgICAgICAgICByZXN0b3JlTXVsdGlSb3dzKCdlbnQtc3R1ZGVudHMtY29udGFpbmVyJywgJ2VudC1zdHVkZW50JywgaXQuc3R1ZGVudHMsICdOb20gw4lsw6h2ZScpOyByZXN0b3JlTXVsdGlSb3dzKCdlbnQtdGVhY2hlcnMtY29udGFpbmVyJywgJ2VudC10ZWFjaGVyJywgaXQudGVhY2hlcnMsICdOb20gUGVyc29ubmVsJyk7CiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJyNlbnQtc3R1ZGVudHMtY29udGFpbmVyIC5uYW1lJykuZm9yRWFjaChhdHRhY2hTdHVkZW50QUMpOwogICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcjZW50LXRlYWNoZXJzLWNvbnRhaW5lciAubmFtZScpLmZvckVhY2goYXR0YWNoVGVhY2hlckFDKTsKICAgICAgICAgICAgcmVzdG9yZUF0dGFjaG1lbnRzKCdlbnQtYXR0YWNobWVudHMnLCBpdC5hdHRhY2htZW50cyk7CiAgICAgICAgfSBlbHNlIGlmICh0eXBlID09PSAnUkVVJykgewogICAgICAgICAgICBpdCA9IGFwcERhdGEucmV1bmlvbnMuZmluZCh4ID0+IHguaWQudG9TdHJpbmcoKSA9PT0gaWQudG9TdHJpbmcoKSk7IGlmKCFpdCkgcmV0dXJuOwogICAgICAgICAgICBpZihpdC50eXBlID09PSAiUsOpdW5pb24gZGUgRGlyZWN0aW9uIikgeyAKICAgICAgICAgICAgICAgIHN3aXRjaE1lbnUoJ21lbnU0Jyk7IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkaXItZGF0ZScpLnZhbHVlID0gaXQuZGF0ZTsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Rpci1wYXJ0cycpLnZhbHVlID0gaXQucGFydHMgfHwgIiI7IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkaXItY29udGVudScpLmlubmVySFRNTCA9IGl0Lm9kajsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Rpci1ub3RlcycpLmlubmVySFRNTCA9IGl0LmNyOyAKICAgICAgICAgICAgICAgIHJlc3RvcmVBdHRhY2htZW50cygnZGlyLWF0dGFjaG1lbnRzJywgaXQuYXR0YWNobWVudHMpOwogICAgICAgICAgICAgICAgYWN0aXZhdGVFZGl0TW9kZSgnRElSJywgaWQpOyByZXR1cm47IAogICAgICAgICAgICB9IAogICAgICAgICAgICBlbHNlIHsgCiAgICAgICAgICAgICAgICBzd2l0Y2hNZW51KCdtZW51NycpOyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmV1LWRhdGUnKS52YWx1ZSA9IGl0LmRhdGU7IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXUtdHlwZScpLnZhbHVlID0gaXQudHlwZTsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JldS1vZGonKS52YWx1ZSA9IGl0Lm9kajsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JldS1jb250ZW51JykuaW5uZXJIVE1MID0gaXQuYm9keTsgCiAgICAgICAgICAgICAgICByZXN0b3JlTXVsdGlSb3dzKCdyZXUtc3R1ZGVudHMtY29udGFpbmVyJywgJ3JldS1zdHVkZW50JywgaXQuc3R1ZGVudHMsICdOb20gw4lsw6h2ZScpOyByZXN0b3JlTXVsdGlSb3dzKCdyZXUtdGVhY2hlcnMtY29udGFpbmVyJywgJ3JldS10ZWFjaGVyJywgaXQudGVhY2hlcnMsICdOb20gUGVyc29ubmVsJyk7CiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJyNyZXUtc3R1ZGVudHMtY29udGFpbmVyIC5uYW1lJykuZm9yRWFjaChhdHRhY2hTdHVkZW50QUMpOwogICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcjcmV1LXRlYWNoZXJzLWNvbnRhaW5lciAubmFtZScpLmZvckVhY2goYXR0YWNoVGVhY2hlckFDKTsgCiAgICAgICAgICAgICAgICByZXN0b3JlQXR0YWNobWVudHMoJ3JldS1hdHRhY2htZW50cycsIGl0LmF0dGFjaG1lbnRzKTsKICAgICAgICAgICAgfQogICAgICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gJ1NVSVZJJykgewogICAgICAgICAgICBpdCA9IGFwcERhdGEuc3VpdmlFbGV2ZXMuZmluZCh4ID0+IHguaWQudG9TdHJpbmcoKSA9PT0gaWQudG9TdHJpbmcoKSk7IGlmKCFpdCkgcmV0dXJuOwogICAgICAgICAgICBzd2l0Y2hNZW51KCdtZW51NScpOyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3VpdmktZGF0ZScpLnZhbHVlID0gaXQuZGF0ZTsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N1aXZpLXBhcnRzJykudmFsdWUgPSBpdC5wYXJ0aWNpcGFudHM7IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzdWl2aS1jbGFzc2VzJykudmFsdWUgPSBpdC5jbGFzc2VzOyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3VpdmktY29udGVudScpLmlubmVySFRNTCA9IGl0LmJvZHk7CiAgICAgICAgICAgIHJlc3RvcmVBdHRhY2htZW50cygnc3VpdmktYXR0YWNobWVudHMnLCBpdC5hdHRhY2htZW50cyk7CiAgICAgICAgfQogICAgICAgIGFjdGl2YXRlRWRpdE1vZGUodHlwZSwgaWQpOwogICAgfQoKICAgIC8vIC0tLSBTQVZJTkcgLS0tCiAgICBmdW5jdGlvbiBzYXZlUHJlcERpcmVjdGlvbigpIHsKICAgICAgICBjb25zdCBkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Rpci1kYXRlJykudmFsdWU7IGlmKCFkKSByZXR1cm4gYWxlcnQoIkRhdGUgcmVxdWlzZSIpOwogICAgICAgIGNvbnN0IG4gPSB7IGlkOiBjdXJyZW50RWRpdElkIHx8IERhdGUubm93KCkudG9TdHJpbmcoKSwgZGF0ZTpkLCB0eXBlOiJSw6l1bmlvbiBkZSBEaXJlY3Rpb24iLCBvZGo6ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Rpci1jb250ZW51JykuaW5uZXJIVE1MLCBjcjpkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGlyLW5vdGVzJykuaW5uZXJIVE1MLCBwYXJ0czpkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGlyLXBhcnRzJykudmFsdWUsIGF0dGFjaG1lbnRzOiBnZXRBdHRhY2htZW50c0RhdGEoJ2Rpci1hdHRhY2htZW50cycpIH07CiAgICAgICAgaWYoY3VycmVudEVkaXRJZCkgeyBjb25zdCBpZHggPSBhcHBEYXRhLnJldW5pb25zLmZpbmRJbmRleCh4ID0+IHguaWQudG9TdHJpbmcoKSA9PT0gY3VycmVudEVkaXRJZC50b1N0cmluZygpKTsgaWYoaWR4ID4gLTEpIGFwcERhdGEucmV1bmlvbnNbaWR4XSA9IG47IH0gZWxzZSB7IGFwcERhdGEucmV1bmlvbnMudW5zaGlmdChuKTsgfQogICAgICAgIHNhdmVEYXRhKCk7IHJlc2V0RWRpdE1vZGUoKTsgYWxlcnQoIkVucmVnaXN0csOpIik7IHN3aXRjaE1lbnUoJ21lbnU4Jyk7CiAgICB9CiAgICBmdW5jdGlvbiBzYXZlU3VpdmlFbGV2ZSgpIHsKICAgICAgICBjb25zdCBkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N1aXZpLWRhdGUnKS52YWx1ZTsgaWYoIWQpIHJldHVybiBhbGVydCgiRGF0ZSByZXF1aXNlIik7CiAgICAgICAgY29uc3QgbiA9IHsgaWQ6IGN1cnJlbnRFZGl0SWQgfHwgRGF0ZS5ub3coKS50b1N0cmluZygpLCBkYXRlOmQsIHR5cGU6ICJTdWl2aSDDiWzDqHZlIC8gUG9pbnQgQ1BFIiwgcGFydGljaXBhbnRzOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3VpdmktcGFydHMnKS52YWx1ZSwgY2xhc3NlczogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N1aXZpLWNsYXNzZXMnKS52YWx1ZSwgYm9keTogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N1aXZpLWNvbnRlbnUnKS5pbm5lckhUTUwsIGF0dGFjaG1lbnRzOiBnZXRBdHRhY2htZW50c0RhdGEoJ3N1aXZpLWF0dGFjaG1lbnRzJykgfTsKICAgICAgICBpZihjdXJyZW50RWRpdElkKSB7IGNvbnN0IGlkeCA9IGFwcERhdGEuc3VpdmlFbGV2ZXMuZmluZEluZGV4KHggPT4geC5pZC50b1N0cmluZygpID09PSBjdXJyZW50RWRpdElkLnRvU3RyaW5nKCkpOyBpZihpZHggPiAtMSkgYXBwRGF0YS5zdWl2aUVsZXZlc1tpZHhdID0gbjsgfSBlbHNlIHsgYXBwRGF0YS5zdWl2aUVsZXZlcy51bnNoaWZ0KG4pOyB9CiAgICAgICAgc2F2ZURhdGEoKTsgcmVzZXRFZGl0TW9kZSgpOyBhbGVydCgiRW5yZWdpc3Ryw6kiKTsgc3dpdGNoTWVudSgnbWVudTgnKTsKICAgIH0KICAgIGZ1bmN0aW9uIHNhdmVFbnRyZXRpZW4oKSB7CiAgICAgICAgY29uc3QgZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlbnQtZGF0ZScpLnZhbHVlOyBpZighZCkgcmV0dXJuIGFsZXJ0KCJEYXRlIHJlcXVpc2UiKTsKICAgICAgICBjb25zdCBuID0ge2lkOiBjdXJyZW50RWRpdElkIHx8IERhdGUubm93KCkudG9TdHJpbmcoKSwgZGF0ZTpkLCB0eXBlOmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlbnQtdHlwZScpLnZhbHVlLCBvYmpldDpkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZW50LW9iamV0JykudmFsdWUsIGJvZHk6ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VudC1jb250ZW51JykuaW5uZXJIVE1MLCBzdHVkZW50czpnZXRNdWx0aURhdGEoJ2VudC1zdHVkZW50cy1jb250YWluZXInLCdlbnQtc3R1ZGVudCcpLCB0ZWFjaGVyczpnZXRNdWx0aURhdGEoJ2VudC10ZWFjaGVycy1jb250YWluZXInLCdlbnQtdGVhY2hlcicpLCBhdHRhY2htZW50czogZ2V0QXR0YWNobWVudHNEYXRhKCdlbnQtYXR0YWNobWVudHMnKX07CiAgICAgICAgaWYoY3VycmVudEVkaXRJZCkgeyBjb25zdCBpZHggPSBhcHBEYXRhLmVudHJldGllbnMuZmluZEluZGV4KHggPT4geC5pZC50b1N0cmluZygpID09PSBjdXJyZW50RWRpdElkLnRvU3RyaW5nKCkpOyBpZihpZHggPiAtMSkgYXBwRGF0YS5lbnRyZXRpZW5zW2lkeF0gPSBuOyB9IGVsc2UgeyBhcHBEYXRhLmVudHJldGllbnMudW5zaGlmdChuKTsgfQogICAgICAgIHNhdmVEYXRhKCk7IHJlc2V0RWRpdE1vZGUoKTsgYWxlcnQoIkVucmVnaXN0csOpIik7IHN3aXRjaE1lbnUoJ21lbnU4Jyk7CiAgICB9CiAgICBmdW5jdGlvbiBzYXZlUmV1bmlvbigpIHsKICAgICAgICBjb25zdCBkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JldS1kYXRlJykudmFsdWU7IGlmKCFkKSByZXR1cm4gYWxlcnQoIkRhdGUgcmVxdWlzZSIpOwogICAgICAgIGNvbnN0IG4gPSB7aWQ6IGN1cnJlbnRFZGl0SWQgfHwgRGF0ZS5ub3coKS50b1N0cmluZygpLCBkYXRlOmQsIHR5cGU6ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JldS10eXBlJykudmFsdWUsIG9kajpkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmV1LW9kaicpLnZhbHVlLCBib2R5OmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXUtY29udGVudScpLmlubmVySFRNTCwgc3R1ZGVudHM6Z2V0TXVsdGlEYXRhKCdyZXUtc3R1ZGVudHMtY29udGFpbmVyJywncmV1LXN0dWRlbnQnKSwgdGVhY2hlcnM6Z2V0TXVsdGlEYXRhKCdyZXUtdGVhY2hlcnMtY29udGFpbmVyJywncmV1LXRlYWNoZXInKSwgYXR0YWNobWVudHM6IGdldEF0dGFjaG1lbnRzRGF0YSgncmV1LWF0dGFjaG1lbnRzJyl9OwogICAgICAgIGlmKGN1cnJlbnRFZGl0SWQpIHsgY29uc3QgaWR4ID0gYXBwRGF0YS5yZXVuaW9ucy5maW5kSW5kZXgoeCA9PiB4LmlkLnRvU3RyaW5nKCkgPT09IGN1cnJlbnRFZGl0SWQudG9TdHJpbmcoKSk7IGlmKGlkeCA+IC0xKSBhcHBEYXRhLnJldW5pb25zW2lkeF0gPSBuOyB9IGVsc2UgeyBhcHBEYXRhLnJldW5pb25zLnVuc2hpZnQobik7IH0KICAgICAgICBzYXZlRGF0YSgpOyByZXNldEVkaXRNb2RlKCk7IGFsZXJ0KCJFbnJlZ2lzdHLDqSIpOyBzd2l0Y2hNZW51KCdtZW51OCcpOwogICAgfQoKICAgIC8vIC0tLSBXT1JEIEVYUE9SVCBXSVRIIEhFQURFUlMgKFRBQkxFIEJBU0VEKSAtLS0KICAgIGZ1bmN0aW9uIGV4cG9ydERvY1dvcmQobW9kZSkgewogICAgICAgIGxldCB0aXRsZSwgY29udGVudCwgbWV0YSA9ICIiOwogICAgICAgIAogICAgICAgIC8vIFByZXBhcmUgY29udGVudCBiYXNlZCBvbiBtb2RlCiAgICAgICAgaWYobW9kZSA9PT0gJ0VOVCcpIHsKICAgICAgICAgICAgdGl0bGUgPSAiQ29tcHRlLVJlbmR1IGQnRW50cmV0aWVuIjsKICAgICAgICAgICAgbWV0YSA9IGA8cD48c3Ryb25nPk9iamV0IDo8L3N0cm9uZz4gJHtkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZW50LXR5cGUnKS52YWx1ZX0gLSAke2RvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlbnQtb2JqZXQnKS52YWx1ZX08L3A+CiAgICAgICAgICAgICAgICAgICAgPHA+PHN0cm9uZz5EYXRlOjwvc3Ryb25nPiAke2RvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlbnQtZGF0ZScpLnZhbHVlfTwvcD5gOwogICAgICAgICAgICBjb250ZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VudC1jb250ZW51JykuaW5uZXJIVE1MOwogICAgICAgIH0gZWxzZSBpZiAobW9kZSA9PT0gJ1BSRVBfRElSJykgewogICAgICAgICAgICB0aXRsZSA9ICJSw6l1bmlvbiBkZSBEaXJlY3Rpb24iOwogICAgICAgICAgICBtZXRhID0gYDxwPjxzdHJvbmc+RGF0ZTo8L3N0cm9uZz4gJHtkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGlyLWRhdGUnKS52YWx1ZX08L3A+CiAgICAgICAgICAgICAgICAgICAgPHA+PHN0cm9uZz5QYXJ0aWNpcGFudHM6PC9zdHJvbmc+ICR7ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Rpci1wYXJ0cycpLnZhbHVlfTwvcD5gOwogICAgICAgICAgICBjb250ZW50ID0gYDxoND5PcmRyZSBkdSBqb3VyPC9oND4ke2RvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkaXItY29udGVudScpLmlubmVySFRNTH08aHI+PGg0Pk5vdGVzPC9oND4ke2RvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkaXItbm90ZXMnKS5pbm5lckhUTUx9YDsKICAgICAgICB9IGVsc2UgaWYgKG1vZGUgPT09ICdSRVUnKSB7CiAgICAgICAgICAgIHRpdGxlID0gIkNvbXB0ZS1SZW5kdSA6ICIgKyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmV1LXR5cGUnKS52YWx1ZTsKICAgICAgICAgICAgbWV0YSA9IGA8cD48c3Ryb25nPkRhdGU6PC9zdHJvbmc+ICR7ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JldS1kYXRlJykudmFsdWV9PC9wPmA7CiAgICAgICAgICAgIGNvbnRlbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmV1LWNvbnRlbnUnKS5pbm5lckhUTUw7CiAgICAgICAgfSBlbHNlIGlmIChtb2RlID09PSAnU1VJVkknKSB7CiAgICAgICAgICAgIHRpdGxlID0gIlN1aXZpIMOJbMOodmUgLyBQb2ludCBDUEUiOwogICAgICAgICAgICBtZXRhID0gYDxwPjxzdHJvbmc+RGF0ZTo8L3N0cm9uZz4gJHtkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3VpdmktZGF0ZScpLnZhbHVlfTwvcD4KICAgICAgICAgICAgICAgICAgICA8cD48c3Ryb25nPlBhcnRpY2lwYW50czo8L3N0cm9uZz4gJHtkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3VpdmktcGFydHMnKS52YWx1ZX08L3A+YDsKICAgICAgICAgICAgY29udGVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzdWl2aS1jb250ZW51JykuaW5uZXJIVE1MOwogICAgICAgIH0KCiAgICAgICAgLy8gSGVhZGVyIFRhYmxlIGZvciBXb3JkIChMZWZ0OiBTY2hvb2wsIFJpZ2h0OiBMb2dvKQogICAgICAgIGNvbnN0IGxvZ29JbWcgPSBhcHBEYXRhLnNldHRpbmdzLmxvZ28gPyBgPGltZyBzcmM9IiR7YXBwRGF0YS5zZXR0aW5ncy5sb2dvfSIgd2lkdGg9IjE1MCIgaGVpZ2h0PSJhdXRvIiBhbHQ9IkxvZ28iPmAgOiAnJzsKICAgICAgICBjb25zdCBzaWdJbWcgPSBhcHBEYXRhLnNldHRpbmdzLnNpZ25hdHVyZSA/IGA8aW1nIHNyYz0iJHthcHBEYXRhLnNldHRpbmdzLnNpZ25hdHVyZX0iIHdpZHRoPSIxNTAiIGhlaWdodD0iYXV0byIgYWx0PSJTaWduYXR1cmUiPmAgOiAnJzsKCiAgICAgICAgY29uc3QgaGVhZGVyU2VjdGlvbiA9IGAKICAgICAgICA8dGFibGUgd2lkdGg9IjEwMCUiIGJvcmRlcj0iMCIgY2VsbHBhZGRpbmc9IjAiIGNlbGxzcGFjaW5nPSIwIiBzdHlsZT0ibWFyZ2luLWJvdHRvbTogMjBweDsgYm9yZGVyLWJvdHRvbTogMnB4IHNvbGlkICMzMzM7Ij4KICAgICAgICAgICAgPHRyPgogICAgICAgICAgICAgICAgPHRkIHZhbGlnbj0idG9wIiBzdHlsZT0idGV4dC1hbGlnbjogbGVmdDsiPgogICAgICAgICAgICAgICAgICAgIDxoMSBzdHlsZT0iZm9udC1zaXplOiAyNHB4OyBtYXJnaW46IDA7IHBhZGRpbmc6IDA7Ij4ke2FwcERhdGEuc2V0dGluZ3Muc2Nob29sfTwvaDE+CiAgICAgICAgICAgICAgICAgICAgPHAgc3R5bGU9Im1hcmdpbjogNXB4IDAgMTBweCAwOyBmb250LXNpemU6IDE0cHg7IGNvbG9yOiAjNjY2OyI+RGlyZWN0aW9uPC9wPgogICAgICAgICAgICAgICAgPC90ZD4KICAgICAgICAgICAgICAgIDx0ZCB2YWxpZ249InRvcCIgc3R5bGU9InRleHQtYWxpZ246IHJpZ2h0OyI+CiAgICAgICAgICAgICAgICAgICAgJHtsb2dvSW1nfQogICAgICAgICAgICAgICAgPC90ZD4KICAgICAgICAgICAgPC90cj4KICAgICAgICA8L3RhYmxlPmA7CgogICAgICAgIGNvbnN0IGZvb3RlclNlY3Rpb24gPSBgCiAgICAgICAgPGRpdiBzdHlsZT0ibWFyZ2luLXRvcDogNTBweDsgdGV4dC1hbGlnbjogcmlnaHQ7Ij4KICAgICAgICAgICAgJHtzaWdJbWd9CiAgICAgICAgICAgIDxwPjxzdHJvbmc+JHthcHBEYXRhLnNldHRpbmdzLnVzZXJ9PC9zdHJvbmc+PC9wPgogICAgICAgIDwvZGl2PmA7CgogICAgICAgIGNvbnN0IGhlYWRlciA9IGA8aHRtbCB4bWxuczpvPSd1cm46c2NoZW1hcy1taWNyb3NvZnQtY29tOm9mZmljZTpvZmZpY2UnIHhtbG5zOnc9J3VybjpzY2hlbWFzLW1pY3Jvc29mdC1jb206b2ZmaWNlOndvcmQnIHhtbG5zPSdodHRwOi8vd3d3LnczLm9yZy9UUi9SRUMtaHRtbDQwJz48aGVhZD48bWV0YSBjaGFyc2V0PSd1dGYtOCc+PHRpdGxlPiR7dGl0bGV9PC90aXRsZT48L2hlYWQ+PGJvZHk+YDsKICAgICAgICBjb25zdCBmb290ZXIgPSAiPC9ib2R5PjwvaHRtbD4iOwogICAgICAgIAogICAgICAgIGNvbnN0IGZ1bGxIdG1sID0gaGVhZGVyICsgaGVhZGVyU2VjdGlvbiArIGA8aDIgc3R5bGU9InRleHQtYWxpZ246Y2VudGVyOyBtYXJnaW4tYm90dG9tOjIwcHg7Ij4ke3RpdGxlfTwvaDI+YCArIG1ldGEgKyBgPGhyPmAgKyBjb250ZW50ICsgZm9vdGVyU2VjdGlvbiArIGZvb3RlcjsKCiAgICAgICAgY29uc3QgYmxvYiA9IG5ldyBCbG9iKFsnXHVmZWZmJywgZnVsbEh0bWxdLCB7IHR5cGU6ICdhcHBsaWNhdGlvbi9tc3dvcmQnIH0pOwogICAgICAgIGNvbnN0IHVybCA9IFVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7CiAgICAgICAgY29uc3QgbGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTsKICAgICAgICBsaW5rLmhyZWYgPSB1cmw7CiAgICAgICAgbGluay5kb3dubG9hZCA9IGAke3RpdGxlLnJlcGxhY2UoLyAvZywnXycpfV8ke25ldyBEYXRlKCkudG9JU09TdHJpbmcoKS5zcGxpdCgnVCcpWzBdfS5kb2NgOwogICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQobGluayk7CiAgICAgICAgbGluay5jbGljaygpOwogICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQobGluayk7CiAgICB9CgogICAgLy8gLS0tIFBSSU5USU5HIC0tLQogICAgZnVuY3Rpb24gZ2VuZXJhdGVPZmZpY2lhbFByaW50KHRpdGxlLCBkYXRlLCB0eXBlLCBwU3RyLCBib2R5LCBhdHRhY2htZW50cykgewogICAgICAgIGNvbnN0IHMgPSBhcHBEYXRhLnNldHRpbmdzIHx8IHt9OwogICAgICAgIGNvbnN0IHNpZyA9IHMuc2lnbmF0dXJlID8gYDxpbWcgc3JjPSIke3Muc2lnbmF0dXJlfSIgY2xhc3M9InNpZ25hdHVyZS1pbWciPmAgOiAnJzsKICAgICAgICBsZXQgYXR0SHRtbCA9ICIiOwogICAgICAgIGlmKGF0dGFjaG1lbnRzICYmIGF0dGFjaG1lbnRzLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgYXR0SHRtbCA9IGA8ZGl2IGNsYXNzPSJhdHRhY2htZW50LXByaW50LWxpc3QiPjxzdHJvbmc+UGnDqGNlcyBqb2ludGVzIC8gRG9jdW1lbnRzIGxpw6lzIDo8L3N0cm9uZz48dWw+YCArIGF0dGFjaG1lbnRzLm1hcChhID0+IGA8bGk+JHthLm5hbWV9PC9saT5gKS5qb2luKCcnKSArIGA8L3VsPjwvZGl2PmA7CiAgICAgICAgfQogICAgICAgIGNvbnN0IGxheW91dCAgID0gcy5wZGZIZWFkZXJMYXlvdXQgICB8fCAnY2xhc3NpcXVlJzsKICAgICAgICBjb25zdCBoQ29sb3IgICA9IHMucGRmSGVhZGVyQ29sb3IgICAgfHwgJyMxYjI0MzMnOwogICAgICAgIGNvbnN0IHN1YnRpdGxlID0gcy5wZGZIZWFkZXJTdWJ0aXRsZSB8fCAnRGlyZWN0aW9uJzsKICAgICAgICBjb25zdCBzY2hvb2wgICA9IHMuc2Nob29sIHx8ICcnOwogICAgICAgIGNvbnN0IGNpdHkgICAgID0gcy5jaXR5ICAgfHwgJyc7CiAgICAgICAgY29uc3QgdXNlciAgICAgPSBzLnVzZXIgfHwgcy5uYW1lIHx8ICcnOwogICAgICAgIGNvbnN0IGRhdGVTdHIgID0gZGF0ZSA/ICdMZcKgJyArIG5ldyBEYXRlKGRhdGUpLnRvTG9jYWxlRGF0ZVN0cmluZygnZnItRlInKSA6ICcnOwogICAgICAgIGNvbnN0IGxvZ29UYWcgID0gcy5sb2dvID8gYDxpbWcgc3JjPSIke3MubG9nb30iIHN0eWxlPSJtYXgtaGVpZ2h0OjgwcHg7bWF4LXdpZHRoOjE2MHB4O29iamVjdC1maXQ6Y29udGFpbjtkaXNwbGF5OmJsb2NrOy13ZWJraXQtcHJpbnQtY29sb3ItYWRqdXN0OmV4YWN0O3ByaW50LWNvbG9yLWFkanVzdDpleGFjdDsiPmAgOiAnJzsKICAgICAgICBjb25zdCBsb2dvVGFnU209IHMubG9nbyA/IGA8aW1nIHNyYz0iJHtzLmxvZ299IiBzdHlsZT0ibWF4LWhlaWdodDo1MHB4O21heC13aWR0aDoxMTBweDtvYmplY3QtZml0OmNvbnRhaW47YmFja2dyb3VuZDp3aGl0ZTtwYWRkaW5nOjNweDtib3JkZXItcmFkaXVzOjNweDstd2Via2l0LXByaW50LWNvbG9yLWFkanVzdDpleGFjdDtwcmludC1jb2xvci1hZGp1c3Q6ZXhhY3Q7Ij5gIDogJyc7CgogICAgICAgIGxldCBoZWFkZXJIdG1sID0gJyc7CiAgICAgICAgaWYgKGxheW91dCA9PT0gJ21vZGVybmUnKSB7CiAgICAgICAgICAgIGhlYWRlckh0bWwgPSBgPGRpdiBzdHlsZT0idGV4dC1hbGlnbjpjZW50ZXI7bWFyZ2luLWJvdHRvbToyMHB4O3BhZGRpbmctYm90dG9tOjE1cHg7Ym9yZGVyLWJvdHRvbTozcHggc29saWQgJHtoQ29sb3J9OyI+CiAgICAgICAgICAgICAgICAke3MubG9nbyA/IGA8aW1nIHNyYz0iJHtzLmxvZ299IiBzdHlsZT0ibWF4LWhlaWdodDo3MHB4O29iamVjdC1maXQ6Y29udGFpbjtkaXNwbGF5OmJsb2NrO21hcmdpbjowIGF1dG8gOHB4Oy13ZWJraXQtcHJpbnQtY29sb3ItYWRqdXN0OmV4YWN0O3ByaW50LWNvbG9yLWFkanVzdDpleGFjdDsiPmAgOiAnJ30KICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9ImZvbnQtc2l6ZToxLjNyZW07Zm9udC13ZWlnaHQ6OTAwO3RleHQtdHJhbnNmb3JtOnVwcGVyY2FzZTtsZXR0ZXItc3BhY2luZzoycHg7Y29sb3I6JHtoQ29sb3J9OyI+JHtzY2hvb2x9PC9kaXY+CiAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJmb250LXNpemU6LjgycmVtO2NvbG9yOiM2NjY7bWFyZ2luLXRvcDoycHg7Ij4ke3N1YnRpdGxlfSR7Y2l0eSA/ICcg4oCUICcgKyBjaXR5IDogJyd9PC9kaXY+CiAgICAgICAgICAgIDwvZGl2PmA7CiAgICAgICAgfSBlbHNlIGlmIChsYXlvdXQgPT09ICdiYW5kZWF1JykgewogICAgICAgICAgICBoZWFkZXJIdG1sID0gYDxkaXYgc3R5bGU9ImJhY2tncm91bmQ6JHtoQ29sb3J9O2NvbG9yOndoaXRlO3BhZGRpbmc6MTRweCAyMHB4O21hcmdpbi1ib3R0b206MjBweDtkaXNwbGF5OmZsZXg7YWxpZ24taXRlbXM6Y2VudGVyO2dhcDoxNnB4Oy13ZWJraXQtcHJpbnQtY29sb3ItYWRqdXN0OmV4YWN0O3ByaW50LWNvbG9yLWFkanVzdDpleGFjdDsiPgogICAgICAgICAgICAgICAgJHtzLmxvZ28gPyBgPGltZyBzcmM9IiR7cy5sb2dvfSIgc3R5bGU9Im1heC1oZWlnaHQ6NTJweDttYXgtd2lkdGg6MTAwcHg7b2JqZWN0LWZpdDpjb250YWluO2JhY2tncm91bmQ6d2hpdGU7cGFkZGluZzo0cHg7Ym9yZGVyLXJhZGl1czo1cHg7ZmxleC1zaHJpbms6MDstd2Via2l0LXByaW50LWNvbG9yLWFkanVzdDpleGFjdDtwcmludC1jb2xvci1hZGp1c3Q6ZXhhY3Q7Ij5gIDogJyd9CiAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJmbGV4OjE7Ij4KICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJmb250LXNpemU6MS4xcmVtO2ZvbnQtd2VpZ2h0OjkwMDt0ZXh0LXRyYW5zZm9ybTp1cHBlcmNhc2U7bGV0dGVyLXNwYWNpbmc6MS41cHg7Ij4ke3NjaG9vbH08L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJmb250LXNpemU6Ljc1cmVtO29wYWNpdHk6Ljg1O21hcmdpbi10b3A6MnB4OyI+JHtzdWJ0aXRsZX0ke2NpdHkgPyAnIOKAlCAnICsgY2l0eSA6ICcnfTwvZGl2PgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDwvZGl2PmA7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgLy8gQ2xhc3NpcXVlCiAgICAgICAgICAgIGhlYWRlckh0bWwgPSBgPGRpdiBzdHlsZT0iZGlzcGxheTpmbGV4O2p1c3RpZnktY29udGVudDpzcGFjZS1iZXR3ZWVuO2FsaWduLWl0ZW1zOmZsZXgtc3RhcnQ7bWFyZ2luLWJvdHRvbToyMHB4O2JvcmRlci1ib3R0b206MS41cHggc29saWQgIzAwMDtwYWRkaW5nLWJvdHRvbToxNXB4OyI+CiAgICAgICAgICAgICAgICA8ZGl2PgogICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9ImZvbnQtd2VpZ2h0OmJvbGQ7dGV4dC10cmFuc2Zvcm06dXBwZXJjYXNlO2ZvbnQtc2l6ZToxLjJyZW07Ij4ke3NjaG9vbH08L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJmb250LXNpemU6LjgycmVtO2NvbG9yOiM1NTU7bWFyZ2luLXRvcDoycHg7Ij4ke3N1YnRpdGxlfSR7Y2l0eSA/ICcg4oCUICcgKyBjaXR5IDogJyd9PC9kaXY+CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIDxkaXY+JHtsb2dvVGFnfTwvZGl2PgogICAgICAgICAgICA8L2Rpdj5gOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIGA8ZGl2IGNsYXNzPSJwcmludC1wYWdlIj4KICAgICAgICAgICAgJHtoZWFkZXJIdG1sfQogICAgICAgICAgICA8ZGl2IGNsYXNzPSJvZmZpY2lhbC1tZXRhIj4ke2RhdGVTdHJ9PC9kaXY+CiAgICAgICAgICAgIDxoMiBzdHlsZT0idGV4dC1hbGlnbjpjZW50ZXI7Ij4ke3RpdGxlfTwvaDI+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9Im9mZmljaWFsLXN1YmplY3QiPk9CSkVUwqA6ICR7dHlwZX08L2Rpdj4KICAgICAgICAgICAgJHtwU3RyID8gYDxkaXYgY2xhc3M9Im9mZmljaWFsLXBhcnRpY2lwYW50cyI+JHtwU3RyfTwvZGl2PmAgOiAnJ30KICAgICAgICAgICAgPGRpdiBjbGFzcz0ib2ZmaWNpYWwtY29udGVudCI+JHtib2R5fTwvZGl2PgogICAgICAgICAgICAke2F0dEh0bWx9CiAgICAgICAgICAgIDxkaXYgY2xhc3M9Im9mZmljaWFsLWZvb3RlciI+JHtzaWd9PHN0cm9uZz4ke3VzZXJ9PC9zdHJvbmc+PC9kaXY+CiAgICAgICAgPC9kaXY+YDsKICAgIH0KCiAgICAKICAgIAogICAgZnVuY3Rpb24gcnRlSW5zZXJ0TG9nbygpIHsKICAgICAgICB2YXIgbG9nbyA9IGFwcERhdGEuc2V0dGluZ3MgJiYgYXBwRGF0YS5zZXR0aW5ncy5sb2dvOwogICAgICAgIGlmICghbG9nbykgeyBhbGVydCgnQXVjdW4gbG9nbyBkw6lmaW5pLiBBam91dGV6IHVuIGxvZ28gZGFucyBsZXMgUGFyYW3DqHRyZXMuJyk7IHJldHVybjsgfQogICAgICAgIGRvY3VtZW50LmV4ZWNDb21tYW5kKCdpbnNlcnRIVE1MJywgZmFsc2UsICc8aW1nIHNyYz0iJytsb2dvKyciIGNsYXNzPSJydGUtbG9nby1pbWciIHN0eWxlPSJtYXgtaGVpZ2h0OjYwcHg7bWF4LXdpZHRoOjEyMHB4O3ZlcnRpY2FsLWFsaWduOm1pZGRsZTsiIGFsdD0iTG9nbyI+Jyk7CiAgICB9CiAgICBmdW5jdGlvbiBydGVDb2xvcihidG4pIHsKICAgICAgICB2YXIgZXhpc3RpbmcgPSBidG4ucGFyZW50RWxlbWVudC5xdWVyeVNlbGVjdG9yKCcucnRlLWNvbG9yLXBvcCcpOwogICAgICAgIGlmIChleGlzdGluZykgeyBleGlzdGluZy5yZW1vdmUoKTsgcmV0dXJuOyB9CiAgICAgICAgdmFyIGNvbG9ycyA9IFsnIzAwMDAwMCcsJyNlNzRjM2MnLCcjZTY3ZTIyJywnI2YxYzQwZicsJyMyN2FlNjAnLCcjMjk4MGI5JywnIzhlNDRhZCcsJyMyYzNlNTAnLCcjOTVhNWE2JywnIzFhYmM5YycsJyNkMzU0MDAnLCcjYzAzOTJiJywnIzE2YTA4NScsJyMyZWNjNzEnLCcjMzQ5OGRiJywnIzliNTliNiddOwogICAgICAgIHZhciBwb3AgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgICAgICBwb3AuY2xhc3NOYW1lID0gJ3J0ZS1jb2xvci1wb3AnOwogICAgICAgIGNvbG9ycy5mb3JFYWNoKGZ1bmN0aW9uKGMpIHsKICAgICAgICAgICAgdmFyIHN3ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgICAgICAgIHN3LmNsYXNzTmFtZSA9ICdydGUtY29sb3Itc3cnOwogICAgICAgICAgICBzdy5zdHlsZS5iYWNrZ3JvdW5kID0gYzsKICAgICAgICAgICAgc3cub25jbGljayA9IGZ1bmN0aW9uKGUpIHsgZS5zdG9wUHJvcGFnYXRpb24oKTsgZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2ZvcmVDb2xvcicsIGZhbHNlLCBjKTsgcG9wLnJlbW92ZSgpOyB9OwogICAgICAgICAgICBwb3AuYXBwZW5kQ2hpbGQoc3cpOwogICAgICAgIH0pOwogICAgICAgIGJ0bi5zdHlsZS5wb3NpdGlvbiA9ICdyZWxhdGl2ZSc7CiAgICAgICAgYnRuLmFwcGVuZENoaWxkKHBvcCk7CiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpeyBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIGhhbmRsZXIoZSl7IGlmKCFwb3AuY29udGFpbnMoZS50YXJnZXQpKXtwb3AucmVtb3ZlKCk7ZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLGhhbmRsZXIpO30gfSwge29uY2U6ZmFsc2V9KTsgfSwxMCk7CiAgICB9CiAgICBmdW5jdGlvbiBydGVMaW5rKGJ0bikgewogICAgICAgIHZhciB1cmwgPSBwcm9tcHQoJ1VSTCBkdSBsaWVuIDonLCdodHRwczovLycpOwogICAgICAgIGlmICh1cmwpIGRvY3VtZW50LmV4ZWNDb21tYW5kKCdjcmVhdGVMaW5rJywgZmFsc2UsIHVybCk7CiAgICB9CgogICAgZnVuY3Rpb24gd2FpdEZvckltYWdlc1RoZW5QcmludCgpIHsKICAgICAgICB2YXIgem9uZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcmludC16b25lJyk7CiAgICAgICAgdmFyIGltZ3MgPSB6b25lLnF1ZXJ5U2VsZWN0b3JBbGwoJ2ltZycpOwogICAgICAgIGlmIChpbWdzLmxlbmd0aCA9PT0gMCkgeyB3aW5kb3cucHJpbnQoKTsgcmV0dXJuOyB9CiAgICAgICAgdmFyIGxvYWRlZCA9IDA7CiAgICAgICAgdmFyIHRvdGFsID0gaW1ncy5sZW5ndGg7CiAgICAgICAgdmFyIGRvbmUgPSBmYWxzZTsKICAgICAgICB2YXIgdGltZW91dCA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7IGlmICghZG9uZSkgeyBkb25lID0gdHJ1ZTsgd2luZG93LnByaW50KCk7IH0gfSwgMjAwMCk7CiAgICAgICAgaW1ncy5mb3JFYWNoKGZ1bmN0aW9uKGltZykgewogICAgICAgICAgICBpZiAoaW1nLmNvbXBsZXRlICYmIGltZy5uYXR1cmFsSGVpZ2h0ID4gMCkgewogICAgICAgICAgICAgICAgbG9hZGVkKys7CiAgICAgICAgICAgICAgICBpZiAobG9hZGVkID49IHRvdGFsICYmICFkb25lKSB7IGRvbmUgPSB0cnVlOyBjbGVhclRpbWVvdXQodGltZW91dCk7IHdpbmRvdy5wcmludCgpOyB9CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBpbWcub25sb2FkID0gaW1nLm9uZXJyb3IgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICBsb2FkZWQrKzsKICAgICAgICAgICAgICAgICAgICBpZiAobG9hZGVkID49IHRvdGFsICYmICFkb25lKSB7IGRvbmUgPSB0cnVlOyBjbGVhclRpbWVvdXQodGltZW91dCk7IHdpbmRvdy5wcmludCgpOyB9CiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgLy8gRm9yY2UgcmVsb2FkIGZvciBiYXNlNjQgaW1hZ2VzCiAgICAgICAgICAgICAgICBpZiAoaW1nLnNyYyAmJiBpbWcuc3JjLmluZGV4T2YoJ2RhdGE6JykgPT09IDApIHsKICAgICAgICAgICAgICAgICAgICB2YXIgc3JjID0gaW1nLnNyYzsKICAgICAgICAgICAgICAgICAgICBpbWcuc3JjID0gJyc7CiAgICAgICAgICAgICAgICAgICAgaW1nLnNyYyA9IHNyYzsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0pOwogICAgfQoKICAgIGZ1bmN0aW9uIHByaW50Q3VycmVudEZvcm0obW9kZSkgewogICAgICAgIGxldCB0aXRsZSwgZGF0ZSwgdHlwZSwgYm9keSwgcFN0cj0iIiwgYXR0cz1bXTsKICAgICAgICBpZihtb2RlID09PSAnRU5UJykgewogICAgICAgICAgICB0aXRsZSA9ICJDb21wdGUtUmVuZHUgZCdFbnRyZXRpZW4iOyBkYXRlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VudC1kYXRlJykudmFsdWU7IHR5cGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZW50LXR5cGUnKS52YWx1ZSArICIgLSAiICsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VudC1vYmpldCcpLnZhbHVlOyBib2R5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VudC1jb250ZW51JykuaW5uZXJIVE1MOwogICAgICAgICAgICBsZXQgcyA9IGdldE11bHRpRGF0YSgnZW50LXN0dWRlbnRzLWNvbnRhaW5lcicsICdlbnQtc3R1ZGVudCcpOyBsZXQgdCA9IGdldE11bHRpRGF0YSgnZW50LXRlYWNoZXJzLWNvbnRhaW5lcicsICdlbnQtdGVhY2hlcicpOwogICAgICAgICAgICBpZihzLmxlbmd0aCkgcFN0ciArPSAiPHN0cm9uZz7DiWzDqHZlcyBjb25jZXJuw6lzIDo8L3N0cm9uZz4gIiArIHMubWFwKHg9PngubmFtZSkuam9pbignLCAnKSArICI8YnI+IjsKICAgICAgICAgICAgaWYodC5sZW5ndGgpIHBTdHIgKz0gIjxzdHJvbmc+UHLDqXNlbnRzIDo8L3N0cm9uZz4gIiArIHQubWFwKHg9PngubmFtZSkuam9pbignLCAnKTsKICAgICAgICAgICAgYXR0cyA9IGdldEF0dGFjaG1lbnRzRGF0YSgnZW50LWF0dGFjaG1lbnRzJyk7CiAgICAgICAgfSBlbHNlIGlmKG1vZGUgPT09ICdSRVUnKSB7CiAgICAgICAgICAgIHRpdGxlID0gIkNvbXB0ZS1SZW5kdSBkZSBSw6l1bmlvbiI7IGRhdGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmV1LWRhdGUnKS52YWx1ZTsgdHlwZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXUtdHlwZScpLnZhbHVlOyBib2R5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JldS1jb250ZW51JykuaW5uZXJIVE1MOwogICAgICAgICAgICBsZXQgcyA9IGdldE11bHRpRGF0YSgncmV1LXN0dWRlbnRzLWNvbnRhaW5lcicsICdyZXUtc3R1ZGVudCcpOyBsZXQgdCA9IGdldE11bHRpRGF0YSgncmV1LXRlYWNoZXJzLWNvbnRhaW5lcicsICdyZXUtdGVhY2hlcicpOwogICAgICAgICAgICBpZihzLmxlbmd0aCkgcFN0ciArPSAiPHN0cm9uZz7DiWzDqHZlcyBjb25jZXJuw6lzIDo8L3N0cm9uZz4gIiArIHMubWFwKHg9PngubmFtZSkuam9pbignLCAnKSArICI8YnI+IjsKICAgICAgICAgICAgaWYodC5sZW5ndGgpIHBTdHIgKz0gIjxzdHJvbmc+UGFydGljaXBhbnRzIDo8L3N0cm9uZz4gIiArIHQubWFwKHg9PngubmFtZSkuam9pbignLCAnKTsKICAgICAgICAgICAgYXR0cyA9IGdldEF0dGFjaG1lbnRzRGF0YSgncmV1LWF0dGFjaG1lbnRzJyk7CiAgICAgICAgfSBlbHNlIGlmKG1vZGUgPT09ICdQUkVQX0RJUicpIHsKICAgICAgICAgICAgdGl0bGUgPSAiUsOpdW5pb24gZGUgRGlyZWN0aW9uIjsgZGF0ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkaXItZGF0ZScpLnZhbHVlOyB0eXBlID0gIkNvbXB0ZS1yZW5kdSI7IHBTdHIgPSAiPHN0cm9uZz5QcsOpc2VudHMgOjwvc3Ryb25nPiAiICsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Rpci1wYXJ0cycpLnZhbHVlOwogICAgICAgICAgICBib2R5ID0gYDxoMz5PUkRSRSBEVSBKT1VSPC9oMz4ke2RvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkaXItY29udGVudScpLmlubmVySFRNTH08ZGl2IGNsYXNzPSJwcmludC1zZXBhcmF0b3IiIHN0eWxlPSJtYXJnaW46MjBweCAwOyBib3JkZXItdG9wOjFweCBkYXNoZWQgI2NjYyI+PC9kaXY+PGgzPk5PVEVTICYgRMOJQ0lTSU9OUzwvaDM+JHtkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGlyLW5vdGVzJykuaW5uZXJIVE1MfWA7CiAgICAgICAgICAgIGF0dHMgPSBnZXRBdHRhY2htZW50c0RhdGEoJ2Rpci1hdHRhY2htZW50cycpOwogICAgICAgIH0gZWxzZSBpZihtb2RlID09PSAnU1VJVkknKSB7CiAgICAgICAgICAgIHRpdGxlID0gIlBvaW50IFN1aXZpIMOJbMOodmUiOyBkYXRlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N1aXZpLWRhdGUnKS52YWx1ZTsgdHlwZSA9ICJDb29yZGluYXRpb24gQ1BFIC8gRGlyZWN0aW9uIjsgcFN0ciA9ICI8c3Ryb25nPlBhcnRpY2lwYW50cyA6PC9zdHJvbmc+ICIgKyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3VpdmktcGFydHMnKS52YWx1ZSArICIgfCA8c3Ryb25nPk5pdmVhdXggOjwvc3Ryb25nPiAiICsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N1aXZpLWNsYXNzZXMnKS52YWx1ZTsKICAgICAgICAgICAgYm9keSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzdWl2aS1jb250ZW51JykuaW5uZXJIVE1MOwogICAgICAgICAgICBhdHRzID0gZ2V0QXR0YWNobWVudHNEYXRhKCdzdWl2aS1hdHRhY2htZW50cycpOwogICAgICAgIH0KICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJpbnQtem9uZScpLmlubmVySFRNTCA9IGdlbmVyYXRlT2ZmaWNpYWxQcmludCh0aXRsZSwgZGF0ZSwgdHlwZSwgcFN0ciwgYm9keSwgYXR0cyk7CiAgICAgICAgd2FpdEZvckltYWdlc1RoZW5QcmludCgpOwogICAgfQoKICAgIGZ1bmN0aW9uIHByaW50U2F2ZWREb2ModHlwZSwgaWQpIHsKICAgICAgICBsZXQgaXQsIHRpdGxlLCBzdWIsIGJvZHksIHBTdHI9IiI7CiAgICAgICAgaWYodHlwZT09PSdFTlQnKSB7IGl0ID0gYXBwRGF0YS5lbnRyZXRpZW5zLmZpbmQoeD0+eC5pZC50b1N0cmluZygpPT09aWQudG9TdHJpbmcoKSk7IHRpdGxlPSJFbnRyZXRpZW4iOyBzdWI9aXQudHlwZSsiIC0gIitpdC5vYmpldDsgYm9keT1pdC5ib2R5OyBpZihpdC5zdHVkZW50cy5sZW5ndGgpIHBTdHIrPSI8c3Ryb25nPsOJbMOodmVzIDo8L3N0cm9uZz4gIitpdC5zdHVkZW50cy5tYXAoeD0+eC5uYW1lKS5qb2luKCcsICcpKyI8YnI+IjsgaWYoaXQudGVhY2hlcnMubGVuZ3RoKSBwU3RyKz0iPHN0cm9uZz5QcsOpc2VudHMgOjwvc3Ryb25nPiAiK2l0LnRlYWNoZXJzLm1hcCh4PT54Lm5hbWUpLmpvaW4oJywgJyk7IH0gCiAgICAgICAgZWxzZSBpZiAodHlwZT09PSdSRVUnKSB7IGl0ID0gYXBwRGF0YS5yZXVuaW9ucy5maW5kKHg9PnguaWQudG9TdHJpbmcoKT09PWlkLnRvU3RyaW5nKCkpOyBpZihpdC50eXBlID09PSAiUsOpdW5pb24gZGUgRGlyZWN0aW9uIikgeyB0aXRsZT0iRGlyZWN0aW9uIjsgc3ViPSJDb21wdGUtcmVuZHUiOyBwU3RyPSI8c3Ryb25nPlByw6lzZW50cyA6PC9zdHJvbmc+ICIrKGl0LnBhcnRzIHx8ICIiKTsgYm9keSA9IGA8aDM+T0RKPC9oMz4ke2l0Lm9kan08ZGl2IGNsYXNzPSJwcmludC1zZXBhcmF0b3IiIHN0eWxlPSJtYXJnaW46MjBweCAwOyBib3JkZXItdG9wOjFweCBkYXNoZWQgI2NjYyI+PC9kaXY+PGgzPk5PVEVTPC9oMz4ke2l0LmNyfWA7IH0gZWxzZSB7IHRpdGxlPSJSw6l1bmlvbiI7IHN1Yj1pdC50eXBlOyBib2R5PWl0LmJvZHk7IGlmKGl0LnN0dWRlbnRzLmxlbmd0aCkgcFN0cis9IjxzdHJvbmc+w4lsw6h2ZXMgOjwvc3Ryb25nPiAiK2l0LnN0dWRlbnRzLm1hcCh4PT54Lm5hbWUpLmpvaW4oJywgJykrIjxicj4iOyBpZihpdC50ZWFjaGVycy5sZW5ndGgpIHBTdHIrPSI8c3Ryb25nPlBhcnRpY2lwYW50cyA6PC9zdHJvbmc+ICIraXQudGVhY2hlcnMubWFwKHg9PngubmFtZSkuam9pbignLCAnKTsgfSB9IAogICAgICAgIGVsc2UgaWYgKHR5cGU9PT0nU1VJVkknKSB7IGl0ID0gYXBwRGF0YS5zdWl2aUVsZXZlcy5maW5kKHg9PnguaWQudG9TdHJpbmcoKT09PWlkLnRvU3RyaW5nKCkpOyB0aXRsZT0iU3VpdmkiOyBzdWI9IlBvaW50IENQRSI7IGJvZHk9aXQuYm9keTsgcFN0ciA9ICI8c3Ryb25nPlBhcnRpY2lwYW50cyA6PC9zdHJvbmc+ICIraXQucGFydGljaXBhbnRzKyIgfCA8c3Ryb25nPk5pdmVhdXggOjwvc3Ryb25nPiAiK2l0LmNsYXNzZXM7IH0KICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJpbnQtem9uZScpLmlubmVySFRNTCA9IGdlbmVyYXRlT2ZmaWNpYWxQcmludCh0aXRsZSwgaXQuZGF0ZSwgc3ViLCBwU3RyLCBib2R5LCBpdC5hdHRhY2htZW50cyk7IHdhaXRGb3JJbWFnZXNUaGVuUHJpbnQoKTsKICAgIH0KCiAgICBmdW5jdGlvbiBwcmludEFsbEhpc3RvcnkoKSB7CiAgICAgICAgY29uc3QgbGlzdCA9IGdldEhpc3RvcnlMaXN0KCk7IGlmKCFsaXN0Lmxlbmd0aCkgcmV0dXJuOwogICAgICAgIGxldCBodG1sID0gIiI7CiAgICAgICAgbGlzdC5mb3JFYWNoKGkgPT4gewogICAgICAgICAgICBsZXQgdGl0bGUsIHN1YiwgYm9keSwgcFN0cj0iIjsKICAgICAgICAgICAgaWYoaS50PT09J0VOVCcpIHsgdGl0bGU9IkVudHJldGllbiI7IHN1Yj1pLmQudHlwZSsiIC0gIitpLmQub2JqZXQ7IGJvZHk9aS5kLmJvZHk7IGlmKGkuZC5zdHVkZW50cy5sZW5ndGgpIHBTdHIrPSLDiWzDqHZlcyA6ICIraS5kLnN0dWRlbnRzLm1hcCh4PT54Lm5hbWUpLmpvaW4oJywgJykrIjxicj4iOyBpZihpLmQudGVhY2hlcnMubGVuZ3RoKSBwU3RyKz0iUHLDqXNlbnRzIDogIitpLmQudGVhY2hlcnMubWFwKHg9PngubmFtZSkuam9pbignLCAnKTsgfSAKICAgICAgICAgICAgZWxzZSBpZiAoaS50PT09J1JFVScpIHsgaWYoaS5kLnR5cGUgPT09ICJSw6l1bmlvbiBkZSBEaXJlY3Rpb24iKSB7IHRpdGxlPSJEaXJlY3Rpb24iOyBzdWI9IkNvbXB0ZS1yZW5kdSI7IHBTdHI9IlByw6lzZW50cyA6ICIrKGkuZC5wYXJ0cyB8fCAiIik7IGJvZHkgPSBgPGgzPk9ESjwvaDM+JHtpLmQub2RqfTxkaXYgc3R5bGU9Im1hcmdpbjoyMHB4IDA7IGJvcmRlci10b3A6MXB4IGRhc2hlZCAjY2NjIj48L2Rpdj48aDM+Q1I8L2gzPiR7aS5kLmNyfWA7IH0gZWxzZSB7IHRpdGxlPSJSw6l1bmlvbiI7IHN1Yj1pLmQudHlwZTsgYm9keT1pLmQuYm9keTsgaWYoaS5kLnN0dWRlbnRzLmxlbmd0aCkgcFN0cis9IsOJbMOodmVzIDogIitpLmQuc3R1ZGVudHMubWFwKHg9PngubmFtZSkuam9pbignLCAnKSsiPGJyPiI7IGlmKGkuZC50ZWFjaGVycy5sZW5ndGgpIHBTdHIrPSJQYXJ0aWNpcGFudHMgOiAiK2kuZC50ZWFjaGVycy5tYXAoeD0+eC5uYW1lKS5qb2luKCcsICcpOyB9IH0gCiAgICAgICAgICAgIGVsc2UgaWYgKGkudD09PSdTVUlWSScpIHsgdGl0bGU9IlN1aXZpIjsgc3ViPSJQb2ludCBDUEUiOyBib2R5PWkuZC5ib2R5OyBwU3RyID0gIlBhcnRpY2lwYW50cyA6ICIraS5kLnBhcnRpY2lwYW50cysiIHwgQ2xhc3NlcyA6ICIraS5kLmNsYXNzZXM7IH0KICAgICAgICAgICAgaHRtbCArPSBnZW5lcmF0ZU9mZmljaWFsUHJpbnQodGl0bGUsIGkuZC5kYXRlLCBzdWIsIHBTdHIsIGJvZHksIGkuZC5hdHRhY2htZW50cyk7CiAgICAgICAgfSk7CiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ByaW50LXpvbmUnKS5pbm5lckhUTUwgPSBodG1sOyB3YWl0Rm9ySW1hZ2VzVGhlblByaW50KCk7CiAgICB9CgogICAgLy8gLS0tIEhJU1RPUlkgUkVOREVSIC0tLQogICAgZnVuY3Rpb24gZ2V0SGlzdG9yeUxpc3QoKSB7CiAgICAgICAgY29uc3QgcSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZWFyY2gtc3R1ZGVudCcpLnZhbHVlLnRvTG93ZXJDYXNlKCkudHJpbSgpOwogICAgICAgIGNvbnN0IGYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2VhcmNoLXR5cGUnKS52YWx1ZTsKICAgICAgICBsZXQgbGlzdCA9IFtdOwogICAgICAgIGNvbnN0IGlzTSA9IChpdCkgPT4gewogICAgICAgICAgICBpZiAoIXEpIHJldHVybiB0cnVlOwogICAgICAgICAgICBpZiAoaXQudHlwZT8udG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhxKSB8fCBpdC5vYmpldD8udG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhxKSB8fCBpdC5vZGo/LnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMocSkgfHwgaXQuYm9keT8udG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhxKSB8fCBpdC5jcj8udG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhxKSB8fCBpdC5wYXJ0aWNpcGFudHM/LnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMocSkgfHwgaXQucGFydHM/LnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMocSkpIHJldHVybiB0cnVlOwogICAgICAgICAgICBpZiAoaXQuc3R1ZGVudHM/LnNvbWUocyA9PiBzLm5hbWUudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhxKSkgfHwgaXQudGVhY2hlcnM/LnNvbWUodCA9PiB0Lm5hbWUudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhxKSkpIHJldHVybiB0cnVlOwogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfTsKICAgICAgICBpZihmPT09IkFMTCJ8fGY9PT0iRU5UIikgYXBwRGF0YS5lbnRyZXRpZW5zLmZvckVhY2goZT0+eyBpZihpc00oZSkpIGxpc3QucHVzaCh7dDonRU5UJyxkOmUsdGltZTpuZXcgRGF0ZShlLmRhdGUpLmdldFRpbWUoKX0pOyB9KTsKICAgICAgICBpZihmPT09IkFMTCJ8fGY9PT0iUkVVInx8Zj09PSJESVIiKSBhcHBEYXRhLnJldW5pb25zLmZvckVhY2gocj0+eyBjb25zdCBpc0QgPSByLnR5cGU9PT0iUsOpdW5pb24gZGUgRGlyZWN0aW9uIjsgaWYoZj09PSJESVIiICYmICFpc0QpIHJldHVybjsgaWYoZj09PSJSRVUiICYmIGlzRCkgcmV0dXJuOyBpZihpc00ocikpIGxpc3QucHVzaCh7dDonUkVVJyxkOnIsdGltZTpuZXcgRGF0ZShyLmRhdGUpLmdldFRpbWUoKX0pOyB9KTsKICAgICAgICBpZihmPT09IkFMTCJ8fGY9PT0iU1VJVkkiKSBhcHBEYXRhLnN1aXZpRWxldmVzLmZvckVhY2goc3U9PnsgaWYoaXNNKHN1KSkgbGlzdC5wdXNoKHt0OidTVUlWSScsZDpzdSx0aW1lOm5ldyBEYXRlKHN1LmRhdGUpLmdldFRpbWUoKX0pOyB9KTsKICAgICAgICByZXR1cm4gbGlzdC5zb3J0KChhLGIpPT5iLnRpbWUtYS50aW1lKTsKICAgIH0KCiAgICBmdW5jdGlvbiByZW5kZXJIaXN0b3J5KCkgewogICAgICAgIGNvbnN0IGxpc3QgPSBnZXRIaXN0b3J5TGlzdCgpOyBjb25zdCB0Ym9keSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNoaXN0b3J5LXRhYmxlIHRib2R5Jyk7IHRib2R5LmlubmVySFRNTD0iIjsKICAgICAgICBpZighbGlzdC5sZW5ndGgpIHsgdGJvZHkuaW5uZXJIVE1MPSI8dHI+PHRkIGNvbHNwYW49JzQnIHN0eWxlPSd0ZXh0LWFsaWduOmNlbnRlcjtjb2xvcjojOTk5O3BhZGRpbmc6MjBweCc+QXVjdW4gZG9jdW1lbnQ8L3RkPjwvdHI+IjsgcmV0dXJuOyB9CiAgICAgICAgbGlzdC5mb3JFYWNoKGk9PnsKICAgICAgICAgICAgbGV0IGR0bCA9ICIiOwogICAgICAgICAgICBpZihpLnQ9PT0nRU5UJykgewogICAgICAgICAgICAgICAgdmFyIF9lcyA9IChpLmQuc3R1ZGVudHN8fFtdKS5tYXAocz0+cy5uYW1lKS5maWx0ZXIoQm9vbGVhbik7CiAgICAgICAgICAgICAgICB2YXIgX2V0ID0gKGkuZC50ZWFjaGVyc3x8W10pLm1hcCh0PT50Lm5hbWUpLmZpbHRlcihCb29sZWFuKTsKICAgICAgICAgICAgICAgIGR0bCA9ICc8c3Ryb25nPicraS5kLm9iamV0Kyc8L3N0cm9uZz48YnI+JzsKICAgICAgICAgICAgICAgIGlmKF9lcy5sZW5ndGgpIGR0bCArPSAnPHNtYWxsPjxpIGNsYXNzPSJmYXMgZmEtdXNlci1ncmFkdWF0ZSIgc3R5bGU9ImNvbG9yOiNlNjdlMjI7bWFyZ2luLXJpZ2h0OjNweCI+PC9pPicrX2VzLmpvaW4oJywgJykrJzwvc21hbGw+JzsKICAgICAgICAgICAgICAgIGlmKF9ldC5sZW5ndGgpIGR0bCArPSAnPGJyPjxzbWFsbD48aSBjbGFzcz0iZmFzIGZhLWNoYWxrYm9hcmQtdGVhY2hlciIgc3R5bGU9ImNvbG9yOiMyOTgwYjk7bWFyZ2luLXJpZ2h0OjNweCI+PC9pPicrX2V0LmpvaW4oJywgJykrJzwvc21hbGw+JzsKICAgICAgICAgICAgfSBlbHNlIGlmKGkudD09PSdSRVUnKSB7CiAgICAgICAgICAgICAgICB2YXIgX3JzID0gKGkuZC5zdHVkZW50c3x8W10pLm1hcChzPT5zLm5hbWUpLmZpbHRlcihCb29sZWFuKTsKICAgICAgICAgICAgICAgIHZhciBfcnQgPSAoaS5kLnRlYWNoZXJzfHxbXSkubWFwKHQ9PnQubmFtZSkuZmlsdGVyKEJvb2xlYW4pOwogICAgICAgICAgICAgICAgdmFyIF9oZHIgPSBpLmQudHlwZT09PSJSw6l1bmlvbiBkZSBEaXJlY3Rpb24iPyJEaXJlY3Rpb24iOihpLmQub2RqfHwnJykucmVwbGFjZSgvPFtePl0qPi9nLCAnJykuc3Vic3RyaW5nKDAsNTApOwogICAgICAgICAgICAgICAgZHRsID0gJzxzdHJvbmc+JytfaGRyKyc8L3N0cm9uZz48YnI+JzsKICAgICAgICAgICAgICAgIGlmKF9ycy5sZW5ndGgpIGR0bCArPSAnPHNtYWxsPjxpIGNsYXNzPSJmYXMgZmEtdXNlci1ncmFkdWF0ZSIgc3R5bGU9ImNvbG9yOiNlNjdlMjI7bWFyZ2luLXJpZ2h0OjNweCI+PC9pPicrX3JzLmpvaW4oJywgJykrJzwvc21hbGw+JzsKICAgICAgICAgICAgICAgIGlmKF9ydC5sZW5ndGgpIGR0bCArPSAnPGJyPjxzbWFsbD48aSBjbGFzcz0iZmFzIGZhLWNoYWxrYm9hcmQtdGVhY2hlciIgc3R5bGU9ImNvbG9yOiMyOTgwYjk7bWFyZ2luLXJpZ2h0OjNweCI+PC9pPicrX3J0LmpvaW4oJywgJykrJzwvc21hbGw+JzsKICAgICAgICAgICAgICAgIGlmKCFfcnMubGVuZ3RoICYmICFfcnQubGVuZ3RoICYmIGkuZC5wYXJ0cykgZHRsICs9ICc8c21hbGw+JytpLmQucGFydHMrJzwvc21hbGw+JzsKICAgICAgICAgICAgfSBlbHNlIGlmKGkudD09PSdTVUlWSScpIGR0bCA9ICc8c3Ryb25nPkNsYXNzZXMgOiAnK2kuZC5jbGFzc2VzKyc8L3N0cm9uZz48YnI+PHNtYWxsPicraS5kLnBhcnRpY2lwYW50cysnPC9zbWFsbD4nOwogICAgICAgICAgICAKICAgICAgICAgICAgY29uc3QgaGFzQXR0ID0gKGkuZC5hdHRhY2htZW50cyAmJiBpLmQuYXR0YWNobWVudHMubGVuZ3RoID4gMCkgPyAnPGkgY2xhc3M9ImZhcyBmYS1wYXBlcmNsaXAiIHN0eWxlPSJjb2xvcjojN2Y4YzhkOyBtYXJnaW4tbGVmdDo1cHg7Ij48L2k+JyA6ICcnOwoKICAgICAgICAgICAgdGJvZHkuaW5uZXJIVE1MICs9IGA8dHI+PHRkPiR7bmV3IERhdGUoaS5kLmRhdGUpLnRvTG9jYWxlRGF0ZVN0cmluZygnZnItRlInKX08L3RkPjx0ZD48c3BhbiBjbGFzcz0iYmFkZ2UgJHtpLnQ9PT0nRU5UJz8nYmctZW50JzooaS50PT09J1NVSVZJJz8nYmctc3VpdmknOihpLmQudHlwZS5pbmNsdWRlcygnRGlyJyk/J2JnLWRpcic6J2JnLXJldScpKX0iPiR7aS5kLnR5cGV9PC9zcGFuPiR7aGFzQXR0fTwvdGQ+PHRkPiR7ZHRsfTwvdGQ+PHRkPjxidXR0b24gY2xhc3M9ImJ0biBidG4td2FybmluZyBidG4tc20iIG9uY2xpY2s9ImxvYWRJdGVtRm9yRWRpdCgnJHtpLnR9JywgJyR7aS5kLmlkfScpIj48aSBjbGFzcz0iZmFzIGZhLXBlbiI+PC9pPjwvYnV0dG9uPiA8YnV0dG9uIGNsYXNzPSJidG4gYnRuLWRhcmsgYnRuLXNtIiBvbmNsaWNrPSJwcmludFNhdmVkRG9jKCcke2kudH0nLCcke2kuZC5pZH0nKSI+PGkgY2xhc3M9ImZhcyBmYS1wcmludCI+PC9pPjwvYnV0dG9uPiA8YnV0dG9uIGNsYXNzPSJidG4gYnRuLWRhbmdlciBidG4tc20iIG9uY2xpY2s9ImRlbGV0ZUl0ZW0oJyR7aS50PT09J0VOVCc/J2VudHJldGllbnMnOihpLnQ9PT0nUkVVJz8ncmV1bmlvbnMnOidzdWl2aUVsZXZlcycpfScsJHtpLmQuaWR9KSI+PGkgY2xhc3M9ImZhcyBmYS10cmFzaCI+PC9pPjwvYnV0dG9uPjwvdGQ+PC90cj5gOwogICAgICAgIH0pOwogICAgfQoKICAgIC8vIC0tLSBEQVNIQk9BUkQgJiBTVEFUUyAtLS0KICAgIGZ1bmN0aW9uIHJlbmRlckRhc2hib2FyZCgpIHsKICAgICAgICBjb25zdCB0cyA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKS5zcGxpdCgnVCcpWzBdOwogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdrcGktZW50JykuaW5uZXJUZXh0ID0gYXBwRGF0YS5lbnRyZXRpZW5zLmxlbmd0aDsKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgna3BpLXJldScpLmlubmVyVGV4dCA9IGFwcERhdGEucmV1bmlvbnMuZmlsdGVyKHI9PnIudHlwZSE9PSJSw6l1bmlvbiBkZSBEaXJlY3Rpb24iKS5sZW5ndGg7CiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2twaS1kaXInKS5pbm5lclRleHQgPSBhcHBEYXRhLnJldW5pb25zLmZpbHRlcihyPT5yLnR5cGU9PT0iUsOpdW5pb24gZGUgRGlyZWN0aW9uIikubGVuZ3RoOwogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdrcGktc3VpdmknKS5pbm5lclRleHQgPSBhcHBEYXRhLnN1aXZpRWxldmVzLmxlbmd0aDsKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgna3BpLXRvZG8nKS5pbm5lclRleHQgPSBhcHBEYXRhLnRvZG8udXJnZW50Lmxlbmd0aDsKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgna3BpLWNhbCcpLmlubmVyVGV4dCA9IGFwcERhdGEuY2FsZW5kYXIuZmlsdGVyKGM9PmMuZGF0ZT49dHMpLmxlbmd0aDsKICAgICAgICAKICAgICAgICByZW5kZXJDaGFydCgnY2hhcnRUeXBlcycsICdkb3VnaG51dCcsIHsgCiAgICAgICAgICAgIGxhYmVsczogWydVcmdlbmNlcycsICdEaXJlY3Rpb24nLCAnRW50cmV0aWVucycsICdSw6l1bmlvbnMnLCAnQWdlbmRhJywgJ1N1aXZpJ10sIAogICAgICAgICAgICBkYXRhc2V0czogW3sgCiAgICAgICAgICAgICAgICBkYXRhOiBbYXBwRGF0YS50b2RvLnVyZ2VudC5sZW5ndGgsIGFwcERhdGEucmV1bmlvbnMuZmlsdGVyKHI9PnIudHlwZT09PSJSw6l1bmlvbiBkZSBEaXJlY3Rpb24iKS5sZW5ndGgsIGFwcERhdGEuZW50cmV0aWVucy5sZW5ndGgsIGFwcERhdGEucmV1bmlvbnMuZmlsdGVyKHI9PnIudHlwZSE9PSJSw6l1bmlvbiBkZSBEaXJlY3Rpb24iKS5sZW5ndGgsIGFwcERhdGEuY2FsZW5kYXIubGVuZ3RoLCBhcHBEYXRhLnN1aXZpRWxldmVzLmxlbmd0aF0sIAogICAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiBbJyNlNzRjM2MnLCcjMmMzZTUwJywnI2MwMzkyYicsJyMyN2FlNjAnLCcjZjM5YzEyJywnIzI5ODBiOSddIAogICAgICAgICAgICB9XSAKICAgICAgICB9KTsKICAgICAgICAKICAgICAgICBjb25zdCBzdCA9IGdldE1vbnRobHlTdGF0cygpOyAKICAgICAgICByZW5kZXJDaGFydCgnY2hhcnRNb250aGx5JywgJ2xpbmUnLCB7IGxhYmVsczogc3QubGFiZWxzLCBkYXRhc2V0czogW3sgbGFiZWw6ICdBY3Rpdml0w6lzJywgZGF0YTogc3QudmFsdWVzLCBib3JkZXJDb2xvcjogJyMyOTgwYjknLCBmaWxsOiB0cnVlLCB0ZW5zaW9uOiAwLjMgfV0gfSk7CiAgICAgICAgcmVuZGVyVG9wU3R1ZGVudHMoKTsKICAgIH0KCiAgICBmdW5jdGlvbiByZW5kZXJUb3BTdHVkZW50cygpIHsKICAgICAgICBjb25zdCBjb3VudHMgPSB7fTsKICAgICAgICBbLi4uYXBwRGF0YS5lbnRyZXRpZW5zLCAuLi5hcHBEYXRhLnJldW5pb25zXS5mb3JFYWNoKGl0ID0+IHsKICAgICAgICAgICAgaWYoaXQuc3R1ZGVudHMpIHsKICAgICAgICAgICAgICAgIGl0LnN0dWRlbnRzLmZvckVhY2gocyA9PiB7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgbmFtZSA9IHMubmFtZS50cmltKCk7CiAgICAgICAgICAgICAgICAgICAgaWYobmFtZSkgY291bnRzW25hbWVdID0gKGNvdW50c1tuYW1lXSB8fCAwKSArIDE7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgIH0pOwogICAgICAgIGNvbnN0IHNvcnRlZCA9IE9iamVjdC5lbnRyaWVzKGNvdW50cykuc29ydCgoYSxiKSA9PiBiWzFdIC0gYVsxXSkuc2xpY2UoMCwgNSk7CiAgICAgICAgY29uc3QgbGlzdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0b3Atc3R1ZGVudHMtbGlzdCcpOwogICAgICAgIGxpc3QuaW5uZXJIVE1MID0gc29ydGVkLmxlbmd0aCA/ICIiIDogIjxsaSBzdHlsZT0nY29sb3I6Izk5OSc+QXVjdW5lIGRvbm7DqWUgw6lsw6h2ZTwvbGk+IjsKICAgICAgICBzb3J0ZWQuZm9yRWFjaCgoW25hbWUsIGNvdW50XSkgPT4gewogICAgICAgICAgICBsaXN0LmlubmVySFRNTCArPSBgPGxpIGNsYXNzPSJ0b3Atc3R1ZGVudC1pdGVtIj48c3Bhbj4ke25hbWV9PC9zcGFuPiA8c3Ryb25nPiR7Y291bnR9IGZvaXM8L3N0cm9uZz48L2xpPmA7CiAgICAgICAgfSk7CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0TW9udGhseVN0YXRzKCkgewogICAgICAgIGNvbnN0IG10aHMgPSBbXTsgY29uc3QgbiA9IG5ldyBEYXRlKCk7CiAgICAgICAgZm9yIChsZXQgaT01OyBpPj0wOyBpLS0pIHsgY29uc3QgZD1uZXcgRGF0ZShuLmdldEZ1bGxZZWFyKCksIG4uZ2V0TW9udGgoKS1pLCAxKTsgbXRocy5wdXNoKHsgbGFiZWw6IGQudG9Mb2NhbGVEYXRlU3RyaW5nKCdmci1GUicsIHttb250aDonc2hvcnQnLCB5ZWFyOicyLWRpZ2l0J30pLCBrZXk6IGAke2QuZ2V0RnVsbFllYXIoKX0tJHtTdHJpbmcoZC5nZXRNb250aCgpKzEpLnBhZFN0YXJ0KDIsJzAnKX1gLCBjb3VudDogMCB9KTsgfQogICAgICAgIFsuLi5hcHBEYXRhLmVudHJldGllbnMsIC4uLmFwcERhdGEucmV1bmlvbnMsIC4uLmFwcERhdGEuc3VpdmlFbGV2ZXNdLmZvckVhY2goaXQgPT4geyBpZihpdC5kYXRlKSB7IGNvbnN0IGsgPSBpdC5kYXRlLnN1YnN0cmluZygwLDcpOyBjb25zdCBtID0gbXRocy5maW5kKHg9Pngua2V5PT09ayk7IGlmKG0pIG0uY291bnQrKzsgfSB9KTsKICAgICAgICByZXR1cm4geyBsYWJlbHM6IG10aHMubWFwKG09Pm0ubGFiZWwpLCB2YWx1ZXM6IG10aHMubWFwKG09Pm0uY291bnQpIH07CiAgICB9CgogICAgZnVuY3Rpb24gcmVuZGVyQ2hhcnQoaWQsIHR5cGUsIGRhdGEpIHsKICAgICAgICBjb25zdCBjYW52YXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCk7IGlmKCFjYW52YXMpIHJldHVybjsKICAgICAgICBjb25zdCBjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTsgaWYoY2hhcnRJbnN0YW5jZXNbaWRdKSBjaGFydEluc3RhbmNlc1tpZF0uZGVzdHJveSgpOwogICAgICAgIGNoYXJ0SW5zdGFuY2VzW2lkXSA9IG5ldyBDaGFydChjdHgsIHsgdHlwZSwgZGF0YSwgb3B0aW9uczogeyByZXNwb25zaXZlOiB0cnVlLCBtYWludGFpbkFzcGVjdFJhdGlvOiBmYWxzZSB9IH0pOwogICAgfQoKICAgIGZ1bmN0aW9uIGxvYWRTZXR0aW5nc1VJKCkgewogICAgICAgIGxvYWRUZW1wbGF0ZXNVSSgpOyBsb2FkU2VwQ29uZmlnKCk7IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjZmctc2Nob29sJykudmFsdWU9YXBwRGF0YS5zZXR0aW5ncy5zY2hvb2w7IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjZmctdXNlcicpLnZhbHVlPWFwcERhdGEuc2V0dGluZ3MudXNlcjsgdXBkYXRlUHJldmlld3MoKTsgfQogICAgZnVuY3Rpb24gc2F2ZVNldHRpbmdzKCkgeyBhcHBEYXRhLnNldHRpbmdzLnNjaG9vbD1kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2ZnLXNjaG9vbCcpLnZhbHVlOyBhcHBEYXRhLnNldHRpbmdzLnVzZXI9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NmZy11c2VyJykudmFsdWU7IHNhdmVEYXRhKCk7IGFsZXJ0KCJFbnJlZ2lzdHLDqSIpOyB9CiAgICBmdW5jdGlvbiB1cGRhdGVQcmV2aWV3cygpIHsgaWYoYXBwRGF0YS5zZXR0aW5ncy5sb2dvKSB7IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjZmctbG9nby1wcmV2aWV3Jykuc3JjPWFwcERhdGEuc2V0dGluZ3MubG9nbzsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NmZy1sb2dvLXByZXZpZXcnKS5zdHlsZS5kaXNwbGF5PSdibG9jayc7IH0gaWYoYXBwRGF0YS5zZXR0aW5ncy5zaWduYXR1cmUpIHsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NmZy1zaWctcHJldmlldycpLnNyYz1hcHBEYXRhLnNldHRpbmdzLnNpZ25hdHVyZTsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NmZy1zaWctcHJldmlldycpLnN0eWxlLmRpc3BsYXk9J2Jsb2NrJzsgfSB9CiAgICBmdW5jdGlvbiBlbmNvZGVJbWFnZShpLCBpZCwgaykgeyBjb25zdCBmPWkuZmlsZXNbMF07IGNvbnN0IHI9bmV3IEZpbGVSZWFkZXIoKTsgci5vbmxvYWRlbmQ9KCk9PnsgYXBwRGF0YS5zZXR0aW5nc1trXT1yLnJlc3VsdDsgc2F2ZURhdGEoKTsgdXBkYXRlUHJldmlld3MoKTsgfTsgaWYoZikgci5yZWFkQXNEYXRhVVJMKGYpOyB9CiAgICBmdW5jdGlvbiBkZWxldGVJdGVtKGMsIGlkKSB7IGlmKGNvbmZpcm0oIlN1cHByaW1lciA/IikpIHsgYXBwRGF0YVtjXT1hcHBEYXRhW2NdLmZpbHRlcihpPT5pLmlkLnRvU3RyaW5nKCkhPT1pZC50b1N0cmluZygpKTsgc2F2ZURhdGEoKTsgcmVuZGVySGlzdG9yeSgpOyB9IH0KICAgIGZ1bmN0aW9uIGNsZWFyQWxsKCkgeyBpZihjb25maXJtKCJTdXBwcmltZXIgVE9VVEVTIGxlcyBkb25uw6llcyA/IikpIHsgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ3BlcmRpcl9waWxvdGVfdjEwJyk7IGxvY2F0aW9uLnJlbG9hZCgpOyB9IH0KICAgIGZ1bmN0aW9uIGV4cG9ydERhdGEoKSB7IGNvbnN0IGE9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpOyBhLmhyZWY9ImRhdGE6dGV4dC9qc29uO2NoYXJzZXQ9dXRmLTgsIitlbmNvZGVVUklDb21wb25lbnQoSlNPTi5zdHJpbmdpZnkoYXBwRGF0YSkpOyBhLmRvd25sb2FkPSJwZXJkaXJfYmFja3VwLmpzb24iOyBhLmNsaWNrKCk7IH0KICAgIGZ1bmN0aW9uIGltcG9ydERhdGEoaSkgeyBjb25zdCByPW5ldyBGaWxlUmVhZGVyKCk7IHIub25sb2FkPWU9PnsgdHJ5IHsgYXBwRGF0YT1KU09OLnBhcnNlKGUudGFyZ2V0LnJlc3VsdCk7IHNhdmVEYXRhKCk7IGxvY2F0aW9uLnJlbG9hZCgpOyB9IGNhdGNoKGVycikgeyBhbGVydCgiRm9ybWF0IGludmFsaWRlIik7IH0gfTsgci5yZWFkQXNUZXh0KGkuZmlsZXNbMF0pOyB9CgogICAgLy8g4pWQ4pWQ4pWQIFNIQVJFRDogVGVhY2hlciBsaXN0IGZyb20gUElMT1RFIGRvbm7DqWVzIOKVkOKVkOKVkAogICAgdmFyIF90ZWFjaGVycyA9IFtdOwogICAgdmFyIF9zdHVkZW50cyA9IFtdOwogICAgZnVuY3Rpb24gZmlsbFRlYWNoZXJTZWwoc2VsSWQsIHZhbCkgewogICAgICAgIHZhciBzZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChzZWxJZCk7IGlmKCFzZWwpIHJldHVybjsKICAgICAgICB2YXIgaCA9ICc8b3B0aW9uIHZhbHVlPSIiPi0tIENob2lzaXIgLS08L29wdGlvbj48b3B0aW9uIHZhbHVlPSJfX2MiPlx1MjcwRiBTYWlzaXIuLi48L29wdGlvbj4nOwogICAgICAgIF90ZWFjaGVycy5mb3JFYWNoKGZ1bmN0aW9uKHQpewogICAgICAgICAgICB2YXIgbiA9ICgodC5Ob218fHQubm9tfHwnJykgKyAnICcgKyAodFsnUHLDqW5vbSddfHx0LlByZW5vbXx8dFsncHLDqW5vbSddfHwnJykpLnRyaW0oKTsKICAgICAgICAgICAgaWYobikgaCArPSAnPG9wdGlvbiB2YWx1ZT0iJytuKyciJysobj09PXZhbD8nIHNlbGVjdGVkJzonJykrJz4nK24rJzwvb3B0aW9uPic7CiAgICAgICAgfSk7CiAgICAgICAgaWYodmFsICYmIHZhbCE9PSdfX2MnICYmIGguaW5kZXhPZigndmFsdWU9IicrdmFsKyciJyk8MCkgaCs9JzxvcHRpb24gdmFsdWU9IicrdmFsKyciIHNlbGVjdGVkPicrdmFsKyc8L29wdGlvbj4nOwogICAgICAgIHNlbC5pbm5lckhUTUw9aDsgaWYodmFsKSBzZWwudmFsdWU9dmFsOwogICAgICAgIHNlbC5vbmNoYW5nZT1mdW5jdGlvbigpeyBpZih0aGlzLnZhbHVlPT09J19fYycpe3ZhciB4PXByb21wdCgnTm9tIDonKTtpZih4JiZ4LnRyaW0oKSl7dGhpcy5pbnNlcnRBZGphY2VudEhUTUwoJ2JlZm9yZWVuZCcsJzxvcHRpb24gdmFsdWU9IicreC50cmltKCkrJyI+Jyt4LnRyaW0oKSsnPC9vcHRpb24+Jyk7dGhpcy52YWx1ZT14LnRyaW0oKTt9ZWxzZSB0aGlzLnZhbHVlPScnO30gfTsKICAgIH0KCiAgICAvLyDilZDilZDilZAgRVZFTkVNRU5UUyDilZDilZDilZAKICAgIHZhciBFVl9TPXt0b2RvOifDgCBmYWlyZScscHJvZ3Jlc3M6J0VuIGNvdXJzJyxkb25lOidUZXJtaW7DqScsYmxvY2tlZDonQmxvcXXDqSd9OwogICAgdmFyIEVWX0M9e3RvZG86JyNlNzRjM2MnLHByb2dyZXNzOicjZjM5YzEyJyxkb25lOicjMjdhZTYwJyxibG9ja2VkOicjOTVhNWE2J307CiAgICB2YXIgRVZfUD17aGF1dGU6J1x1ezFGNTM0fScsbW95ZW5uZTonXHV7MUY3RTF9JyxiYXNzZTonXHV7MUY3RTJ9J307CiAgICB2YXIgX2V2RmlsZT1udWxsOwoKCiAgICAvLyDilZDilZDilZAgQVVUT0NPTVBMRVRFIMOJTMOIVkVTIOKVkOKVkOKVkAogICAgZnVuY3Rpb24gZ2V0U3R1ZGVudE5hbWVzKCkgewogICAgICAgIHJldHVybiBfc3R1ZGVudHMubWFwKGZ1bmN0aW9uKHMpIHsKICAgICAgICAgICAgdmFyIG5vbSA9IChzLk5vbXx8cy5ub218fCcnKS50cmltKCk7CiAgICAgICAgICAgIHZhciBwcmVub20gPSAoc1snUHLDqW5vbSddfHxzLlByZW5vbXx8c1sncHLDqW5vbSddfHxzLnByZW5vbXx8JycpLnRyaW0oKTsKICAgICAgICAgICAgdmFyIGNsYXNzZSA9IChzLkNsYXNzZXx8cy5jbGFzc2V8fCcnKS50cmltKCk7CiAgICAgICAgICAgIHJldHVybiB7IGZ1bGw6IG5vbSArICcgJyArIHByZW5vbSwgY2xhc3NlOiBjbGFzc2UgfTsKICAgICAgICB9KS5maWx0ZXIoZnVuY3Rpb24ocykgeyByZXR1cm4gcy5mdWxsLnRyaW0oKTsgfSk7CiAgICB9CgogICAgZnVuY3Rpb24gYXR0YWNoU3R1ZGVudEFDKGlucHV0KSB7CiAgICAgICAgaWYgKGlucHV0Ll9hY0F0dGFjaGVkKSByZXR1cm47CiAgICAgICAgaW5wdXQuX2FjQXR0YWNoZWQgPSB0cnVlOwogICAgICAgIHZhciB3cmFwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgICAgd3JhcC5jbGFzc05hbWUgPSAnYWMtd3JhcCc7CiAgICAgICAgaW5wdXQucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUod3JhcCwgaW5wdXQpOwogICAgICAgIHdyYXAuYXBwZW5kQ2hpbGQoaW5wdXQpOwogICAgICAgIHZhciBsaXN0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgICAgbGlzdC5jbGFzc05hbWUgPSAnYWMtbGlzdCc7CiAgICAgICAgd3JhcC5hcHBlbmRDaGlsZChsaXN0KTsKICAgICAgICB2YXIgc2VsSWR4ID0gLTE7CgogICAgICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIHZhciBxID0gdGhpcy52YWx1ZS50cmltKCkudG9Mb3dlckNhc2UoKTsKICAgICAgICAgICAgaWYgKHEubGVuZ3RoIDwgMSB8fCAhX3N0dWRlbnRzLmxlbmd0aCkgeyBsaXN0LmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3cnKTsgcmV0dXJuOyB9CiAgICAgICAgICAgIHZhciBuYW1lcyA9IGdldFN0dWRlbnROYW1lcygpOwogICAgICAgICAgICB2YXIgbWF0Y2hlcyA9IG5hbWVzLmZpbHRlcihmdW5jdGlvbihzKSB7IHJldHVybiBzLmZ1bGwudG9Mb3dlckNhc2UoKS5pbmRleE9mKHEpID49IDA7IH0pLnNsaWNlKDAsIDEyKTsKICAgICAgICAgICAgaWYgKCFtYXRjaGVzLmxlbmd0aCkgeyBsaXN0LmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3cnKTsgcmV0dXJuOyB9CiAgICAgICAgICAgIHNlbElkeCA9IC0xOwogICAgICAgICAgICBsaXN0LmlubmVySFRNTCA9IG1hdGNoZXMubWFwKGZ1bmN0aW9uKHMsIGkpIHsKICAgICAgICAgICAgICAgIHJldHVybiAnPGRpdiBjbGFzcz0iYWMtaXRlbSIgZGF0YS12YWw9IicgKyBzLmZ1bGwgKyAnIj48c3Bhbj4nICsgcy5mdWxsICsgJzwvc3Bhbj4nICsgKHMuY2xhc3NlID8gJzxzcGFuIGNsYXNzPSJhYy1jbGFzc2UiPicgKyBzLmNsYXNzZSArICc8L3NwYW4+JyA6ICcnKSArICc8L2Rpdj4nOwogICAgICAgICAgICB9KS5qb2luKCcnKTsKICAgICAgICAgICAgbGlzdC5jbGFzc0xpc3QuYWRkKCdzaG93Jyk7CiAgICAgICAgICAgIGxpc3QucXVlcnlTZWxlY3RvckFsbCgnLmFjLWl0ZW0nKS5mb3JFYWNoKGZ1bmN0aW9uKGVsKSB7CiAgICAgICAgICAgICAgICBlbC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgICAgICAgICAgICAgIGlucHV0LnZhbHVlID0gdGhpcy5kYXRhc2V0LnZhbDsKICAgICAgICAgICAgICAgICAgICBsaXN0LmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3cnKTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9KTsKICAgICAgICB9KTsKCiAgICAgICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgdmFyIGl0ZW1zID0gbGlzdC5xdWVyeVNlbGVjdG9yQWxsKCcuYWMtaXRlbScpOwogICAgICAgICAgICBpZiAoIWl0ZW1zLmxlbmd0aCB8fCAhbGlzdC5jbGFzc0xpc3QuY29udGFpbnMoJ3Nob3cnKSkgcmV0dXJuOwogICAgICAgICAgICBpZiAoZS5rZXkgPT09ICdBcnJvd0Rvd24nKSB7IGUucHJldmVudERlZmF1bHQoKTsgc2VsSWR4ID0gTWF0aC5taW4oc2VsSWR4ICsgMSwgaXRlbXMubGVuZ3RoIC0gMSk7IHVwZGF0ZVNlbChpdGVtcyk7IH0KICAgICAgICAgICAgZWxzZSBpZiAoZS5rZXkgPT09ICdBcnJvd1VwJykgeyBlLnByZXZlbnREZWZhdWx0KCk7IHNlbElkeCA9IE1hdGgubWF4KHNlbElkeCAtIDEsIDApOyB1cGRhdGVTZWwoaXRlbXMpOyB9CiAgICAgICAgICAgIGVsc2UgaWYgKGUua2V5ID09PSAnRW50ZXInICYmIHNlbElkeCA+PSAwKSB7IGUucHJldmVudERlZmF1bHQoKTsgaW5wdXQudmFsdWUgPSBpdGVtc1tzZWxJZHhdLmRhdGFzZXQudmFsOyBsaXN0LmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3cnKTsgfQogICAgICAgICAgICBlbHNlIGlmIChlLmtleSA9PT0gJ0VzY2FwZScpIHsgbGlzdC5jbGFzc0xpc3QucmVtb3ZlKCdzaG93Jyk7IH0KICAgICAgICB9KTsKCiAgICAgICAgZnVuY3Rpb24gdXBkYXRlU2VsKGl0ZW1zKSB7IGl0ZW1zLmZvckVhY2goZnVuY3Rpb24oZWwsIGkpIHsgZWwuY2xhc3NMaXN0LnRvZ2dsZSgnYWN0aXZlJywgaSA9PT0gc2VsSWR4KTsgfSk7IH0KCiAgICAgICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignYmx1cicsIGZ1bmN0aW9uKCkgeyBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgeyBsaXN0LmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3cnKTsgfSwgMTUwKTsgfSk7CiAgICB9CgogICAgLy8gQXV0by1hdHRhY2ggdG8gYWxsIGV4aXN0aW5nIHN0dWRlbnQgbmFtZSBpbnB1dHMKICAgIGZ1bmN0aW9uIGluaXRTdHVkZW50QUMoKSB7CiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnI2VudC1zdHVkZW50cy1jb250YWluZXIgLm5hbWUsICNyZXUtc3R1ZGVudHMtY29udGFpbmVyIC5uYW1lLCBbZGF0YS1zdHVkZW50LWFjXScpLmZvckVhY2goYXR0YWNoU3R1ZGVudEFDKTsKICAgIH0KCiAgICAvLyDilZDilZDilZAgQVVUT0NPTVBMRVRFIEVOU0VJR05BTlRTIC8gUEVSU09OTkVMIOKVkOKVkOKVkAogICAgZnVuY3Rpb24gZ2V0VGVhY2hlck5hbWVzKCkgewogICAgICAgIHJldHVybiBfdGVhY2hlcnMubWFwKGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgdmFyIG5vbSA9ICh0Lk5vbXx8dC5ub218fCcnKS50cmltKCk7CiAgICAgICAgICAgIHZhciBwcmVub20gPSAodFsnUHLDqW5vbSddfHx0LlByZW5vbXx8dFsncHLDqW5vbSddfHx0LnByZW5vbXx8JycpLnRyaW0oKTsKICAgICAgICAgICAgcmV0dXJuIHsgZnVsbDogbm9tICsgJyAnICsgcHJlbm9tIH07CiAgICAgICAgfSkuZmlsdGVyKGZ1bmN0aW9uKHQpIHsgcmV0dXJuIHQuZnVsbC50cmltKCk7IH0pOwogICAgfQoKICAgIGZ1bmN0aW9uIGF0dGFjaFRlYWNoZXJBQyhpbnB1dCkgewogICAgICAgIGlmIChpbnB1dC5fYWNBdHRhY2hlZCkgcmV0dXJuOwogICAgICAgIGlucHV0Ll9hY0F0dGFjaGVkID0gdHJ1ZTsKICAgICAgICB2YXIgd3JhcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgICAgIHdyYXAuY2xhc3NOYW1lID0gJ2FjLXdyYXAnOwogICAgICAgIGlucHV0LnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKHdyYXAsIGlucHV0KTsKICAgICAgICB3cmFwLmFwcGVuZENoaWxkKGlucHV0KTsKICAgICAgICB2YXIgbGlzdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgICAgIGxpc3QuY2xhc3NOYW1lID0gJ2FjLWxpc3QnOwogICAgICAgIHdyYXAuYXBwZW5kQ2hpbGQobGlzdCk7CiAgICAgICAgdmFyIHNlbElkeCA9IC0xOwoKICAgICAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIGZ1bmN0aW9uKCkgewogICAgICAgICAgICB2YXIgcSA9IHRoaXMudmFsdWUudHJpbSgpLnRvTG93ZXJDYXNlKCk7CiAgICAgICAgICAgIGlmIChxLmxlbmd0aCA8IDEgfHwgIV90ZWFjaGVycy5sZW5ndGgpIHsgbGlzdC5jbGFzc0xpc3QucmVtb3ZlKCdzaG93Jyk7IHJldHVybjsgfQogICAgICAgICAgICB2YXIgbmFtZXMgPSBnZXRUZWFjaGVyTmFtZXMoKTsKICAgICAgICAgICAgdmFyIG1hdGNoZXMgPSBuYW1lcy5maWx0ZXIoZnVuY3Rpb24odCkgeyByZXR1cm4gdC5mdWxsLnRvTG93ZXJDYXNlKCkuaW5kZXhPZihxKSA+PSAwOyB9KS5zbGljZSgwLCAxMik7CiAgICAgICAgICAgIGlmICghbWF0Y2hlcy5sZW5ndGgpIHsgbGlzdC5jbGFzc0xpc3QucmVtb3ZlKCdzaG93Jyk7IHJldHVybjsgfQogICAgICAgICAgICBzZWxJZHggPSAtMTsKICAgICAgICAgICAgbGlzdC5pbm5lckhUTUwgPSBtYXRjaGVzLm1hcChmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICByZXR1cm4gJzxkaXYgY2xhc3M9ImFjLWl0ZW0iIGRhdGEtdmFsPSInICsgdC5mdWxsICsgJyI+PHNwYW4+JyArIHQuZnVsbCArICc8L3NwYW4+PHNwYW4gY2xhc3M9ImFjLWNsYXNzZSI+UHJvZjwvc3Bhbj48L2Rpdj4nOwogICAgICAgICAgICB9KS5qb2luKCcnKTsKICAgICAgICAgICAgbGlzdC5jbGFzc0xpc3QuYWRkKCdzaG93Jyk7CiAgICAgICAgICAgIGxpc3QucXVlcnlTZWxlY3RvckFsbCgnLmFjLWl0ZW0nKS5mb3JFYWNoKGZ1bmN0aW9uKGVsKSB7CiAgICAgICAgICAgICAgICBlbC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgICAgICAgICAgICAgIGlucHV0LnZhbHVlID0gdGhpcy5kYXRhc2V0LnZhbDsKICAgICAgICAgICAgICAgICAgICBsaXN0LmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3cnKTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9KTsKICAgICAgICB9KTsKCiAgICAgICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgdmFyIGl0ZW1zID0gbGlzdC5xdWVyeVNlbGVjdG9yQWxsKCcuYWMtaXRlbScpOwogICAgICAgICAgICBpZiAoIWl0ZW1zLmxlbmd0aCB8fCAhbGlzdC5jbGFzc0xpc3QuY29udGFpbnMoJ3Nob3cnKSkgcmV0dXJuOwogICAgICAgICAgICBpZiAoZS5rZXkgPT09ICdBcnJvd0Rvd24nKSB7IGUucHJldmVudERlZmF1bHQoKTsgc2VsSWR4ID0gTWF0aC5taW4oc2VsSWR4ICsgMSwgaXRlbXMubGVuZ3RoIC0gMSk7IHVwZGF0ZVNlbChpdGVtcyk7IH0KICAgICAgICAgICAgZWxzZSBpZiAoZS5rZXkgPT09ICdBcnJvd1VwJykgeyBlLnByZXZlbnREZWZhdWx0KCk7IHNlbElkeCA9IE1hdGgubWF4KHNlbElkeCAtIDEsIDApOyB1cGRhdGVTZWwoaXRlbXMpOyB9CiAgICAgICAgICAgIGVsc2UgaWYgKGUua2V5ID09PSAnRW50ZXInICYmIHNlbElkeCA+PSAwKSB7IGUucHJldmVudERlZmF1bHQoKTsgaW5wdXQudmFsdWUgPSBpdGVtc1tzZWxJZHhdLmRhdGFzZXQudmFsOyBsaXN0LmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3cnKTsgfQogICAgICAgICAgICBlbHNlIGlmIChlLmtleSA9PT0gJ0VzY2FwZScpIHsgbGlzdC5jbGFzc0xpc3QucmVtb3ZlKCdzaG93Jyk7IH0KICAgICAgICB9KTsKCiAgICAgICAgZnVuY3Rpb24gdXBkYXRlU2VsKGl0ZW1zKSB7IGl0ZW1zLmZvckVhY2goZnVuY3Rpb24oZWwsIGkpIHsgZWwuY2xhc3NMaXN0LnRvZ2dsZSgnYWN0aXZlJywgaSA9PT0gc2VsSWR4KTsgfSk7IH0KICAgICAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKCdibHVyJywgZnVuY3Rpb24oKSB7IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7IGxpc3QuY2xhc3NMaXN0LnJlbW92ZSgnc2hvdycpOyB9LCAxNTApOyB9KTsKICAgIH0KCiAgICBmdW5jdGlvbiBpbml0VGVhY2hlckFDKCkgewogICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJyNlbnQtdGVhY2hlcnMtY29udGFpbmVyIC5uYW1lLCAjcmV1LXRlYWNoZXJzLWNvbnRhaW5lciAubmFtZScpLmZvckVhY2goYXR0YWNoVGVhY2hlckFDKTsKICAgIH0KCgogICAgZnVuY3Rpb24gZXZQcmV2aWV3RmlsZShpbnApewogICAgICAgIHZhciBmPWlucC5maWxlc1swXTsKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZXYtZm5hbWUnKS50ZXh0Q29udGVudD1mP2YubmFtZSsnICgnKyhmLnNpemUvMTAyNCkudG9GaXhlZCgwKSsnIEtvKSc6Jyc7CiAgICAgICAgaWYoZiYmZi5zaXplPjUqMTAyNCoxMDI0KXthbGVydCgnTWF4IDUgTW8nKTtpbnAudmFsdWU9Jyc7X2V2RmlsZT1udWxsO3JldHVybjt9CiAgICAgICAgX2V2RmlsZT1mfHxudWxsOwogICAgfQogICAgZnVuY3Rpb24gdG9CNjQoZmlsZSxjYil7dmFyIHI9bmV3IEZpbGVSZWFkZXIoKTtyLm9ubG9hZD1mdW5jdGlvbihlKXtjYih7bmFtZTpmaWxlLm5hbWUsdHlwZTpmaWxlLnR5cGUsc2l6ZTpmaWxlLnNpemUsZGF0YTplLnRhcmdldC5yZXN1bHR9KTt9O3IucmVhZEFzRGF0YVVSTChmaWxlKTt9CgogICAgZnVuY3Rpb24gb3BlbkV2TW9kYWwoaWQpewogICAgICAgIHZhciBfZXZtPWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdldk1vZCcpO19ldm0uY2xhc3NMaXN0LmFkZCgnb3BlbicpO19ldm0uc3R5bGUuZGlzcGxheT0nZmxleCc7CiAgICAgICAgZmlsbFRlYWNoZXJTZWwoJ2V2LXJlc3AnKTtidWlsZENsYXNzU2VsZWN0KCk7ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2V2LW1zZ3BhcmVudHMnKS5jaGVja2VkPWZhbHNlOwogICAgICAgIAogICAgICAgIGlmKGlkKXsKICAgICAgICAgICAgdmFyIHA9KGFwcERhdGEuZXZlbnRzfHxbXSkuZmluZChmdW5jdGlvbih4KXtyZXR1cm4geC5pZC50b1N0cmluZygpPT09aWQudG9TdHJpbmcoKTt9KTtpZighcClyZXR1cm47CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdldi1tdCcpLnRleHRDb250ZW50PSdNb2RpZmllciBsXHUyMDE5w6l2w6luZW1lbnQnOwogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZXYtZWlkJykudmFsdWU9aWQ7ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2V2LW5hbWUnKS52YWx1ZT1wLm5hbWU7CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdldi1zdGFydCcpLnZhbHVlPXAuc3RhcnR8fCcnO2RvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdldi1kZWFkJykudmFsdWU9cC5kZWFkbGluZXx8Jyc7CiAgICAgICAgICAgIF9ldkNsYXNzZXM9KHAuY2xhc3Nlc3x8W10pLnNsaWNlKCk7cmVuZGVyRXZDbGFzc2VzKCk7CiAgICAgICAgICAgIGZpbGxUZWFjaGVyU2VsKCdldi1yZXNwJyxwLnJlc3ApOwogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZXYtbXNncGFyZW50cycpLmNoZWNrZWQ9ISFwLm1zZ1BhcmVudHM7ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2V2LWRlc2MnKS5pbm5lckhUTUw9cC5kZXNjfHwnJzsKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2V2LXRhZ3MnKS52YWx1ZT0ocC50YWdzfHxbXSkuam9pbignLCAnKTsKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2V2LWRlbC1idG4nKS5zdHlsZS5kaXNwbGF5PSdmbGV4JzsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZXYtbXQnKS50ZXh0Q29udGVudD0nTm91dmVsIMOpdsOpbmVtZW50Jztkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZXYtZWlkJykudmFsdWU9Jyc7CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdldi1uYW1lJykudmFsdWU9Jyc7ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2V2LXN0YXJ0JykudmFsdWU9bmV3IERhdGUoKS50b0lTT1N0cmluZygpLnNwbGl0KCdUJylbMF07CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdldi1kZWFkJykudmFsdWU9Jyc7CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdldi1kZXNjJykuaW5uZXJIVE1MPScnO2RvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdldi10YWdzJykudmFsdWU9Jyc7CiAgICAgICAgICAgIF9ldkNsYXNzZXM9W107cmVuZGVyRXZDbGFzc2VzKCk7CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdldi1kZWwtYnRuJykuc3R5bGUuZGlzcGxheT0nbm9uZSc7CiAgICAgICAgfQogICAgfQogICAgZnVuY3Rpb24gY2xvc2VFdk1vZGFsKCl7dmFyIG09ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2V2TW9kJyk7bS5jbGFzc0xpc3QucmVtb3ZlKCdvcGVuJyk7bS5zdHlsZS5kaXNwbGF5PSdub25lJzt9CiAgICBmdW5jdGlvbiBkZWxFdkZyb21Nb2RhbCgpe3ZhciBpZD1kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZXYtZWlkJykudmFsdWU7aWYoaWQmJmNvbmZpcm0oJ1N1cHByaW1lciA/Jykpe2FwcERhdGEuZXZlbnRzPShhcHBEYXRhLmV2ZW50c3x8W10pLmZpbHRlcihmdW5jdGlvbihwKXtyZXR1cm4gcC5pZC50b1N0cmluZygpIT09aWQudG9TdHJpbmcoKTt9KTtzYXZlRGF0YSgpO2Nsb3NlRXZNb2RhbCgpO3JlbmRlckV2ZW50cygpO319CgogICAgZnVuY3Rpb24gc2F2ZUV2ZW50KCl7CiAgICAgICAgdmFyIG5tPWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdldi1uYW1lJykudmFsdWUudHJpbSgpO2lmKCFubSl7YWxlcnQoJ0ludGl0dWzDqSByZXF1aXMnKTtyZXR1cm47fQogICAgICAgIHZhciBlaWQ9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2V2LWVpZCcpLnZhbHVlOwogICAgICAgIHZhciBvYmo9e2lkOmVpZHx8RGF0ZS5ub3coKS50b1N0cmluZygpLG5hbWU6bm0sc3RhcnQ6ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2V2LXN0YXJ0JykudmFsdWUsCiAgICAgICAgICAgIGRlYWRsaW5lOmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdldi1kZWFkJykudmFsdWUscmVzcDpkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZXYtcmVzcCcpLnZhbHVlLGNsYXNzZXM6X2V2Q2xhc3Nlcy5zbGljZSgpLAogICAgICAgICAgICBtc2dQYXJlbnRzOmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdldi1tc2dwYXJlbnRzJykuY2hlY2tlZCwKICAgICAgICAgICAgZGVzYzpkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZXYtZGVzYycpLmlubmVySFRNTCwKICAgICAgICAgICAgdGFnczpkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZXYtdGFncycpLnZhbHVlLnNwbGl0KCcsJykubWFwKGZ1bmN0aW9uKHQpe3JldHVybiB0LnRyaW0oKTt9KS5maWx0ZXIoQm9vbGVhbiksCiAgICAgICAgICAgIGNyZWF0ZWQ6bmV3IERhdGUoKS50b0lTT1N0cmluZygpfTsKICAgICAgICBpZighYXBwRGF0YS5ldmVudHMpIGFwcERhdGEuZXZlbnRzPVtdOwogICAgICAgIGlmKGVpZCl7CiAgICAgICAgICAgIHZhciBpZHg9LTE7Zm9yKHZhciBrPTA7azxhcHBEYXRhLmV2ZW50cy5sZW5ndGg7aysrKXtpZihTdHJpbmcoYXBwRGF0YS5ldmVudHNba10uaWQpPT09U3RyaW5nKGVpZCkpe2lkeD1rO2JyZWFrO319CiAgICAgICAgICAgIGlmKGlkeD49MCl7b2JqLmNyZWF0ZWQ9YXBwRGF0YS5ldmVudHNbaWR4XS5jcmVhdGVkO2FwcERhdGEuZXZlbnRzW2lkeF09b2JqO30KICAgICAgICAgICAgZWxzZXthcHBEYXRhLmV2ZW50cy5wdXNoKG9iaik7fQogICAgICAgIH1lbHNle2FwcERhdGEuZXZlbnRzLnB1c2gob2JqKTt9CiAgICAgICAgc2F2ZURhdGEoKTtjbG9zZUV2TW9kYWwoKTtyZW5kZXJFdmVudHMoKTsKICAgIH0KICAgIGZ1bmN0aW9uIGRsRXZGaWxlKGlkKXt2YXIgcD0oYXBwRGF0YS5ldmVudHN8fFtdKS5maW5kKGZ1bmN0aW9uKHgpe3JldHVybiB4LmlkLnRvU3RyaW5nKCk9PT1pZC50b1N0cmluZygpO30pO2lmKHAmJnAuZmlsZSl7dmFyIGE9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpO2EuaHJlZj1wLmZpbGUuZGF0YTthLmRvd25sb2FkPXAuZmlsZS5uYW1lO2EuY2xpY2soKTt9fQoKICAgIGZ1bmN0aW9uIHJlbmRlckV2ZW50cygpewogICAgICAgIGlmKCFhcHBEYXRhLmV2ZW50cylhcHBEYXRhLmV2ZW50cz1bXTsKICAgICAgICB2YXIgcXM9KGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdldi1zZWFyY2gnKS52YWx1ZXx8JycpLnRvTG93ZXJDYXNlKCkudHJpbSgpOwogICAgICAgIHZhciB0ZD1uZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkuc3BsaXQoJ1QnKVswXTsKICAgICAgICB2YXIgbGlzdD1hcHBEYXRhLmV2ZW50cy5maWx0ZXIoZnVuY3Rpb24ocCl7CiAgICAgICAgICAgIGlmKHFzJiZwLm5hbWUudG9Mb3dlckNhc2UoKS5pbmRleE9mKHFzKTwwJiYocC5yZXNwfHwnJykudG9Mb3dlckNhc2UoKS5pbmRleE9mKHFzKTwwKSByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0pOwogICAgICAgIGxpc3Quc29ydChmdW5jdGlvbihhLGIpe3JldHVybiBuZXcgRGF0ZShhLmRlYWRsaW5lfHxhLnN0YXJ0fHwnOTk5OScpLW5ldyBEYXRlKGIuZGVhZGxpbmV8fGIuc3RhcnR8fCc5OTk5Jyk7fSk7CiAgICAgICAgdmFyIGFsbD1hcHBEYXRhLmV2ZW50czsKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgna3BpLWV2LXRvdCcpLnRleHRDb250ZW50PWFsbC5sZW5ndGg7CiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2twaS1ldi1tc2cnKS50ZXh0Q29udGVudD1hbGwuZmlsdGVyKGZ1bmN0aW9uKHApe3JldHVybiBwLm1zZ1BhcmVudHM7fSkubGVuZ3RoOwogICAgICAgIHZhciBib3g9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2V2LWdyaWQnKTsKICAgICAgICBpZighbGlzdC5sZW5ndGgpe2JveC5pbm5lckhUTUw9JzxkaXYgc3R5bGU9InRleHQtYWxpZ246Y2VudGVyO2NvbG9yOiNiYmI7cGFkZGluZzo0MHB4IDIwcHg7Z3JpZC1jb2x1bW46MS8tMSI+PGkgY2xhc3M9ImZhcyBmYS1jYWxlbmRhci1jaGVjayIgc3R5bGU9ImZvbnQtc2l6ZToycmVtO21hcmdpbi1ib3R0b206MTBweDtkaXNwbGF5OmJsb2NrIj48L2k+QXVjdW4gw6l2w6luZW1lbnQ8L2Rpdj4nO3JldHVybjt9CiAgICAgICAgdmFyIGg9Jyc7bGlzdC5mb3JFYWNoKGZ1bmN0aW9uKHApewogICAgICAgICAgICB2YXIgYz1wLm1zZ1BhcmVudHM/JyMyN2FlNjAnOid2YXIoLS1oZWFkZXIpJyxsYXRlPWZhbHNlOwogICAgICAgICAgICB2YXIgZHM9cC5zdGFydD9uZXcgRGF0ZShwLnN0YXJ0KS50b0xvY2FsZURhdGVTdHJpbmcoJ2ZyLUZSJyx7d2Vla2RheTonbG9uZycsZGF5OicyLWRpZ2l0Jyxtb250aDonbG9uZyd9KTonJzsKICAgICAgICAgICAgaCs9JzxkaXYgY2xhc3M9ImV2LWNhcmQiIHN0eWxlPSJib3JkZXItbGVmdDo0cHggc29saWQgJytjKyciPic7CiAgICAgICAgICAgIGgrPSc8ZGl2IGNsYXNzPSJldi1jYXJkLWhkIj48aDQ+JysocC5tc2dQYXJlbnRzPydcdTI3MDlcdUZFMEYgJzonJykrIHAubmFtZSsnPC9oND48ZGl2IGNsYXNzPSJldi1jYXJkLWFjdHMiPjxidXR0b24gb25jbGljaz0ib3BlbkV2TW9kYWwoXCcnK3AuaWQrJ1wnKSIgdGl0bGU9Ik1vZGlmaWVyIj48aSBjbGFzcz0iZmFzIGZhLXBlbiI+PC9pPjwvYnV0dG9uPjxidXR0b24gb25jbGljaz0iaWYoY29uZmlybShcJ1N1cHByaW1lciA/XCcpKWRlbEV2RGlyZWN0KFwnJytwLmlkKydcJykiIHRpdGxlPSJTdXBwcmltZXIiPjxpIGNsYXNzPSJmYXMgZmEtdHJhc2giPjwvaT48L2J1dHRvbj48L2Rpdj48L2Rpdj4nOwogICAgICAgICAgICBoKz0nPGRpdiBjbGFzcz0iZXYtY2FyZC1tZXRhIj4nOwogICAgICAgICAgICBpZihkcykgaCs9JzxzcGFuPjxpIGNsYXNzPSJmYXMgZmEtZmxhZyI+PC9pPiAnK2RzKyhsYXRlPycgPGIgc3R5bGU9ImNvbG9yOiNlNzRjM2MiPlx1MjZBMCDDiWNow6lhbmNlIGTDqXBhc3PDqWU8L2I+JzonJykrJzwvc3Bhbj4nOwogICAgICAgICAgICBpZihwLnJlc3ApIGgrPSc8c3Bhbj48aSBjbGFzcz0iZmFzIGZhLXVzZXIiPjwvaT4gJytwLnJlc3ArJzwvc3Bhbj4nOwogICAgICAgICAgICBpZihwLm1zZ1BhcmVudHMpIGgrPSc8c3BhbiBzdHlsZT0iY29sb3I6IzI3YWU2MDtmb250LXNpemU6LjdyZW07Ij48aSBjbGFzcz0iZmFzIGZhLWVudmVsb3BlIj48L2k+IFBhcmVudHMgaW5mb3Jtw6lzPC9zcGFuPic7aCs9JzwvZGl2Pic7CiAgICAgICAgICAgIGlmKHAuZGVzYyl7aCs9JzxkaXYgY2xhc3M9ImV2LWNhcmQtZGVzYyI+JytwLmRlc2MrJzwvZGl2Pic7fQogICAgICAgICAgICBoKz0nPGRpdiBjbGFzcz0iZXYtY2FyZC1mdCI+JzsKICAgICAgICAgICAgaWYocC50YWdzJiZwLnRhZ3MubGVuZ3RoKSBwLnRhZ3MuZm9yRWFjaChmdW5jdGlvbih0KXtoKz0nPHNwYW4gY2xhc3M9ImV2LXRhZyI+Jyt0Kyc8L3NwYW4+Jzt9KTsKICAgICAgICAgICAgaWYocC5maWxlKSBoKz0nPHNwYW4gY2xhc3M9ImV2LWF0dGFjaCIgb25jbGljaz0iZGxFdkZpbGUoXCcnK3AuaWQrJ1wnKSIgdGl0bGU9IlTDqWzDqWNoYXJnZXIiPjxpIGNsYXNzPSJmYXMgZmEtcGFwZXJjbGlwIj48L2k+ICcrcC5maWxlLm5hbWUrJzwvc3Bhbj4nOwogICAgICAgICAgICAKICAgICAgICAgICAgaCs9JzwvZGl2PjwvZGl2Pic7CiAgICAgICAgfSk7Ym94LmlubmVySFRNTD1oOwogICAgfQogICAgZnVuY3Rpb24gZGVsRXZEaXJlY3QoaWQpe2FwcERhdGEuZXZlbnRzPShhcHBEYXRhLmV2ZW50c3x8W10pLmZpbHRlcihmdW5jdGlvbihwKXtyZXR1cm4gcC5pZC50b1N0cmluZygpIT09aWQudG9TdHJpbmcoKTt9KTtzYXZlRGF0YSgpO3JlbmRlckV2ZW50cygpO30KCiAgICAvLyDilZDilZDilZAgR0FOVFQgLyBQUk9DRURVUkVTIOKVkOKVkOKVkAogICAgdmFyIFZBQz17YWxsOls0Myw0NCw1MiwxXSxBOls3LDgsMTUsMTZdLEI6WzgsOSwxNiwxN10sQzpbOSwxMCwxNywxOF19OwogICAgdmFyIF9ndnM9bnVsbCxfZ3ZsPTE2LFNZPVtdOwogICAgZnVuY3Rpb24gYnVpbGRTWSgpe1NZPVtdO2Zvcih2YXIgdz0zNjt3PD01Mzt3KyspU1kucHVzaCh3KTtmb3IodmFyIHc9MTt3PD0yNjt3KyspU1kucHVzaCh3KTt9CiAgICBmdW5jdGlvbiBnZXRWVygpe3ZhciB6PShhcHBEYXRhLnNldHRpbmdzJiZhcHBEYXRhLnNldHRpbmdzLnpvbmUpfHwnQic7dmFyIHY9VkFDLmFsbC5zbGljZSgpO2lmKFZBQ1t6XSl2PXYuY29uY2F0KFZBQ1t6XSk7cmV0dXJuIHY7fQogICAgZnVuY3Rpb24gaXNvVyhkKXt2YXIgZHQ9bmV3IERhdGUoRGF0ZS5VVEMoZC5nZXRGdWxsWWVhcigpLGQuZ2V0TW9udGgoKSxkLmdldERhdGUoKSkpO2R0LnNldFVUQ0RhdGUoZHQuZ2V0VVRDRGF0ZSgpKzQtKGR0LmdldFVUQ0RheSgpfHw3KSk7dmFyIHkwPW5ldyBEYXRlKERhdGUuVVRDKGR0LmdldFVUQ0Z1bGxZZWFyKCksMCwxKSk7cmV0dXJuIE1hdGguY2VpbCgoKChkdC15MCkvODY0ZTUpKzEpLzcpO30KICAgIGZ1bmN0aW9uIGN1clcoKXtyZXR1cm4gaXNvVyhuZXcgRGF0ZSgpKTt9CiAgICBmdW5jdGlvbiB3a01vKHcpe3ZhciB5PXc+PTM2PzIwMjU6MjAyNjt2YXIgajQ9bmV3IERhdGUoeSwwLDQpO3ZhciBkPW5ldyBEYXRlKGo0LmdldFRpbWUoKSsoKHctMSkqNy0oKGo0LmdldERheSgpKzYpJTcpKSo4NjRlNSk7dmFyIG1uPWQudG9Mb2NhbGVEYXRlU3RyaW5nKCdmci1GUicse21vbnRoOidzaG9ydCd9KS5yZXBsYWNlKCcuJywnJyk7cmV0dXJuIG1uLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpK21uLnNsaWNlKDEpO30KICAgIGZ1bmN0aW9uIGluaXRHYW50dFZpZXcoKXtidWlsZFNZKCk7dmFyIGN3PWN1clcoKSxpPVNZLmluZGV4T2YoY3cpO2lmKGk8MClpPTA7X2d2cz1NYXRoLm1heCgwLGkpO19ndmw9MTY7d2luZG93Ll9nYW50dFJlYWR5PXRydWU7fQogICAgZnVuY3Rpb24gZ3RQcmV2KCl7X2d2cz1NYXRoLm1heCgwLF9ndnMtX2d2bCk7cmVuZGVyR2FudHQoKTt9CiAgICBmdW5jdGlvbiBndE5leHQoKXtfZ3ZzPU1hdGgubWluKFNZLmxlbmd0aC1fZ3ZsLF9ndnMrX2d2bCk7aWYoX2d2czwwKV9ndnM9MDtyZW5kZXJHYW50dCgpO30KICAgIGZ1bmN0aW9uIGd0VG9kYXkoKXt2YXIgY3c9Y3VyVygpLGk9U1kuaW5kZXhPZihjdyk7aWYoaTwwKWk9MDtfZ3ZzPU1hdGgubWF4KDAsaSk7X2d2bD0xNjtyZW5kZXJHYW50dCgpO30KICAgIGZ1bmN0aW9uIGd0WWVhcigpe19ndnM9MDtfZ3ZsPVNZLmxlbmd0aDtyZW5kZXJHYW50dCgpO19ndmw9MTY7fQoKICAgIGZ1bmN0aW9uIG9wZW5HdE1vZGFsKGlkKXsKICAgICAgICB2YXIgX2d0bT1kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ3RNb2QnKTtfZ3RtLmNsYXNzTGlzdC5hZGQoJ29wZW4nKTtfZ3RtLnN0eWxlLmRpc3BsYXk9J2ZsZXgnOwogICAgICAgIGZpbGxUZWFjaGVyU2VsKCdndC1yZXNwJyk7dmFyIGN3PWN1clcoKTsKICAgICAgICBpZihpZCl7dmFyIGc9KGFwcERhdGEuZ2FudHR8fFtdKS5maW5kKGZ1bmN0aW9uKHgpe3JldHVybiB4LmlkLnRvU3RyaW5nKCk9PT1pZC50b1N0cmluZygpO30pO2lmKCFnKXJldHVybjsKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2d0LW10JykudGV4dENvbnRlbnQ9J01vZGlmaWVyIGxceDI3w6ljaMOpYW5jZSc7ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2d0LWVpZCcpLnZhbHVlPWlkOwogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ3QtbmFtZScpLnZhbHVlPWcubmFtZTtkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ3QtY29kZScpLnZhbHVlPWcuY29kZXx8Jyc7CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdndC1jYXQnKS52YWx1ZT1nLmNhdHx8J0F1dHJlJztkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ3Qtd3MnKS52YWx1ZT1nLndzdGFydHx8Y3c7CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdndC13ZScpLnZhbHVlPWcud2VuZHx8Y3c7ZmlsbFRlYWNoZXJTZWwoJ2d0LXJlc3AnLGcucmVzcCk7CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdndC1ub3RlcycpLmlubmVySFRNTD1nLm5vdGVzfHwnJzsKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2d0LWRlbC1idG4nKS5zdHlsZS5kaXNwbGF5PSdmbGV4JzsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ3QtbXQnKS50ZXh0Q29udGVudD0nTm91dmVsbGUgw6ljaMOpYW5jZSc7ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2d0LWVpZCcpLnZhbHVlPScnOwogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ3QtbmFtZScpLnZhbHVlPScnO2RvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdndC1jb2RlJykudmFsdWU9Jyc7CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdndC1jYXQnKS52YWx1ZT0nQXV0cmUnO2RvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdndC13cycpLnZhbHVlPWN3OwogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ3Qtd2UnKS52YWx1ZT1jdztkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ3Qtbm90ZXMnKS5pbm5lckhUTUw9Jyc7CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdndC1kZWwtYnRuJykuc3R5bGUuZGlzcGxheT0nbm9uZSc7CiAgICAgICAgfQogICAgfQogICAgZnVuY3Rpb24gY2xvc2VHdE1vZGFsKCl7dmFyIG09ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2d0TW9kJyk7bS5jbGFzc0xpc3QucmVtb3ZlKCdvcGVuJyk7bS5zdHlsZS5kaXNwbGF5PSdub25lJzt9CiAgICBmdW5jdGlvbiBkZWxHdEZyb21Nb2RhbCgpe3ZhciBpZD1kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ3QtZWlkJykudmFsdWU7aWYoaWQmJmNvbmZpcm0oJ1N1cHByaW1lciBjZXR0ZSBwcm9jw6lkdXJlID8nKSl7YXBwRGF0YS5nYW50dD0oYXBwRGF0YS5nYW50dHx8W10pLmZpbHRlcihmdW5jdGlvbihnKXtyZXR1cm4gZy5pZC50b1N0cmluZygpIT09aWQudG9TdHJpbmcoKTt9KTtzYXZlRGF0YSgpO2Nsb3NlR3RNb2RhbCgpO3JlbmRlckdhbnR0KCk7fX0KICAgIGZ1bmN0aW9uIHRvZ2dsZUd0RG9uZShpZCl7dmFyIGc9KGFwcERhdGEuZ2FudHR8fFtdKS5maW5kKGZ1bmN0aW9uKHgpe3JldHVybiB4LmlkLnRvU3RyaW5nKCk9PT1pZC50b1N0cmluZygpO30pO2lmKGcpe2cuZG9uZT0hZy5kb25lO3NhdmVEYXRhKCk7cmVuZGVyR2FudHQoKTt9fQogICAgZnVuY3Rpb24gc2F2ZUd0KCl7CiAgICAgICAgdmFyIG5tPWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdndC1uYW1lJykudmFsdWUudHJpbSgpO2lmKCFubSl7YWxlcnQoJ0ludGl0dWzDqSByZXF1aXMnKTtyZXR1cm47fQogICAgICAgIHZhciBlaWQ9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2d0LWVpZCcpLnZhbHVlOwogICAgICAgIHZhciB3cz1wYXJzZUludChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ3Qtd3MnKS52YWx1ZSl8fDEsd2U9cGFyc2VJbnQoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2d0LXdlJykudmFsdWUpfHx3czsKICAgICAgICB2YXIgb2JqPXtpZDplaWR8fERhdGUubm93KCkudG9TdHJpbmcoKSxuYW1lOm5tLGNvZGU6ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2d0LWNvZGUnKS52YWx1ZS50cmltKCksCiAgICAgICAgICAgIGNhdDpkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ3QtY2F0JykudmFsdWUsd3N0YXJ0OndzLHdlbmQ6d2UsCiAgICAgICAgICAgIGRvbmU6ZWlkPygoYXBwRGF0YS5nYW50dHx8W10pLmZpbmQoZnVuY3Rpb24oZyl7cmV0dXJuIGcuaWQudG9TdHJpbmcoKT09PWVpZC50b1N0cmluZygpfSl8fHt9KS5kb25lfHxmYWxzZTpmYWxzZSwKICAgICAgICAgICAgcmVzcDpkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ3QtcmVzcCcpLnZhbHVlLG5vdGVzOmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdndC1ub3RlcycpLmlubmVySFRNTH07CiAgICAgICAgaWYoIWFwcERhdGEuZ2FudHQpYXBwRGF0YS5nYW50dD1bXTsKICAgICAgICBpZihlaWQpe3ZhciBpPWFwcERhdGEuZ2FudHQuZmluZEluZGV4KGZ1bmN0aW9uKGcpe3JldHVybiBnLmlkLnRvU3RyaW5nKCk9PT1laWQudG9TdHJpbmcoKTt9KTtpZihpPj0wKWFwcERhdGEuZ2FudHRbaV09b2JqO2Vsc2UgYXBwRGF0YS5nYW50dC5wdXNoKG9iaik7fQogICAgICAgIGVsc2UgYXBwRGF0YS5nYW50dC5wdXNoKG9iaik7CiAgICAgICAgc2F2ZURhdGEoKTtjbG9zZUd0TW9kYWwoKTtyZW5kZXJHYW50dCgpOwogICAgfQoKICAgIGZ1bmN0aW9uIHdJblIodyx3cyx3ZSl7cmV0dXJuIHdzPD13ZT8odz49d3MmJnc8PXdlKToodz49d3N8fHc8PXdlKTt9CgogICAgZnVuY3Rpb24gcmVuZGVyR2FudHQoKXsKICAgICAgICBpZighU1kubGVuZ3RoKWJ1aWxkU1koKTtpZihfZ3ZzPT09bnVsbClpbml0R2FudHRWaWV3KCk7CiAgICAgICAgdmFyIGZjPWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdndC1mYycpLnZhbHVlOwogICAgICAgIHZhciBwcm9jcz0oYXBwRGF0YS5wcm9jZWR1cmVzfHxbXSkuZmlsdGVyKGZ1bmN0aW9uKHApe3JldHVybiAocC53c3RhcnR8fHAuYW5uZWUpJiYhcC5kb25lJiYoZmM9PT0nQUxMJ3x8cC5jYXQ9PT1mYyk7fSk7CiAgICAgICAgLy8gQWxzbyBpbmNsdWRlIHN0YW5kYWxvbmUgZ2FudHQgaXRlbXMgKMOpY2jDqWFuY2VzIG5vdCBsaW5rZWQgdG8gcHJvY2VkdXJlcykKICAgICAgICB2YXIgZ2FudHRJdGVtcz0oYXBwRGF0YS5nYW50dHx8W10pLmZpbHRlcihmdW5jdGlvbihnKXtyZXR1cm4gZy53c3RhcnQmJiFnLmRvbmUmJihmYz09PSdBTEwnfHxnLmNhdD09PWZjKTt9KTsKICAgICAgICBnYW50dEl0ZW1zLmZvckVhY2goZnVuY3Rpb24oZyl7aWYoIWcudGl0bGUpZy50aXRsZT1nLm5hbWU7fSk7CiAgICAgICAgcHJvY3M9cHJvY3MuY29uY2F0KGdhbnR0SXRlbXMpOwogICAgICAgIC8vIFNvcnQgYnkgd3N0YXJ0IHRoZW4gY29kZSBudW1iZXIKICAgICAgICBwcm9jcy5zb3J0KGZ1bmN0aW9uKGEsYil7CiAgICAgICAgICAgIC8vIGFubmVlIGl0ZW1zIGdvIHRvIHRoZSBlbmQKICAgICAgICAgICAgaWYoYS5hbm5lZSYmIWIuYW5uZWUpcmV0dXJuIDE7aWYoIWEuYW5uZWUmJmIuYW5uZWUpcmV0dXJuIC0xOwogICAgICAgICAgICBpZihhLmFubmVlJiZiLmFubmVlKXJldHVybiBuYXRDb2RlU29ydChhLGIpOwogICAgICAgICAgICAvLyBvdGhlcnMgYnkgd3N0YXJ0IHRoZW4gd2VuZAogICAgICAgICAgICB2YXIgaWE9U1kuaW5kZXhPZihhLndzdGFydCksaWI9U1kuaW5kZXhPZihiLndzdGFydCk7CiAgICAgICAgICAgIGlmKGlhPDApaWE9OTk5O2lmKGliPDApaWI9OTk5OwogICAgICAgICAgICBpZihpYSE9PWliKXJldHVybiBpYS1pYjsKICAgICAgICAgICAgdmFyIGVhPVNZLmluZGV4T2YoYS53ZW5kKSxlYj1TWS5pbmRleE9mKGIud2VuZCk7CiAgICAgICAgICAgIGlmKGVhPDApZWE9OTk5O2lmKGViPDApZWI9OTk5OwogICAgICAgICAgICBpZihlYSE9PWViKXJldHVybiBlYS1lYjsKICAgICAgICAgICAgcmV0dXJuIG5hdENvZGVTb3J0KGEsYik7CiAgICAgICAgfSk7CiAgICAgICAgdmFyIHZsPU1hdGgubWluKF9ndmwsU1kubGVuZ3RoLV9ndnMpLHZpcz1TWS5zbGljZShfZ3ZzLF9ndnMrdmwpLGN3PWN1clcoKSx2dz1nZXRWVygpOwogICAgICAgIHZhciBpdGVtcz1wcm9jcy5maWx0ZXIoZnVuY3Rpb24oZyl7aWYoZy5hbm5lZSlyZXR1cm4gdHJ1ZTtmb3IodmFyIHZpPTA7dmk8dmlzLmxlbmd0aDt2aSsrKXtpZih3SW5SKHZpc1t2aV0sZy53c3RhcnQsZy53ZW5kKSlyZXR1cm4gdHJ1ZTt9cmV0dXJuIGZhbHNlO30pOwogICAgICAgIGlmKHZpcy5sZW5ndGgpIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdndC1wZXInKS50ZXh0Q29udGVudD0nUycrdmlzWzBdKycgXHUyMTkyIFMnK3Zpc1t2aXMubGVuZ3RoLTFdKycgKCcrdmlzLmxlbmd0aCsnIHNlbS4pJzsKICAgICAgICAvLyBNb250aCBoZWFkZXJzCiAgICAgICAgdmFyIG1vcz1bXSxjbT0nJzt2aXMuZm9yRWFjaChmdW5jdGlvbih3KXt2YXIgbWw9d2tNbyh3KTtpZihtbCE9PWNtKXttb3MucHVzaCh7bjptbCxzOjF9KTtjbT1tbDt9ZWxzZSBtb3NbbW9zLmxlbmd0aC0xXS5zKys7fSk7CiAgICAgICAgdmFyIGg9Jzx0aGVhZD48dHI+PHRoIGNsYXNzPSJndC1tbyBndC1sYyIgcm93c3Bhbj0iMiI+UHJvY8OpZHVyZTwvdGg+PHRoIGNsYXNzPSJndC1tbyBndC1kYyIgcm93c3Bhbj0iMiI+XHUyNzE0PC90aD4nOwogICAgICAgIG1vcy5mb3JFYWNoKGZ1bmN0aW9uKG0pe2grPSc8dGggY2xhc3M9Imd0LW1vIiBjb2xzcGFuPSInK20ucysnIj4nK20ubisnPC90aD4nO30pOwogICAgICAgIGgrPSc8L3RyPjx0cj4nO3Zpcy5mb3JFYWNoKGZ1bmN0aW9uKHcpewogICAgICAgICAgICB2YXIgY2xzPScnOwogICAgICAgICAgICBpZih3PT09Y3cpIGNscz0nZ3QtY3cnOwogICAgICAgICAgICBlbHNlIGlmKHZ3LmluZGV4T2Yodyk+PTApIGNscz0nZ3QtdmEnOwogICAgICAgICAgICBoKz0nPHRoJysoY2xzPycgY2xhc3M9IicrY2xzKyciJzonJykrJz5TJyt3Kyc8L3RoPic7CiAgICAgICAgfSk7CiAgICAgICAgaCs9JzwvdHI+PC90aGVhZD48dGJvZHk+JzsKICAgICAgICBpZighaXRlbXMubGVuZ3RoKSBoKz0nPHRyPjx0ZCBjb2xzcGFuPSInKygyK3Zpcy5sZW5ndGgpKyciIHN0eWxlPSJ0ZXh0LWFsaWduOmNlbnRlcjtjb2xvcjojYmJiO3BhZGRpbmc6MzBweCI+PGkgY2xhc3M9ImZhcyBmYS1zdHJlYW0iIHN0eWxlPSJmb250LXNpemU6MS4zcmVtO2Rpc3BsYXk6YmxvY2s7bWFyZ2luLWJvdHRvbTo2cHgiPjwvaT5BdWN1bmUgcHJvY8OpZHVyZSDigJQgY2xpcXVleiArR8OpcmVyIHBvdXIgY29tbWVuY2VyPC90ZD48L3RyPic7CiAgICAgICAgaXRlbXMuZm9yRWFjaChmdW5jdGlvbihnKXsKICAgICAgICAgICAgdmFyIGNvbD1nZXRQcm9jQ29sb3IoZy5jb2RlKTsKICAgICAgICAgICAgaCs9Jzx0cicrKGcuZG9uZT8nIHN0eWxlPSJvcGFjaXR5Oi42Iic6JycpKyc+JzsKICAgICAgICAgICAgdmFyIGlzUmVhbFByb2M9KGFwcERhdGEucHJvY2VkdXJlc3x8W10pLmluZGV4T2YoZyk+PTA7CiAgICAgICAgICAgIHZhciBoYXNMaW5rZWRQcm9jPSFpc1JlYWxQcm9jJiZnLmNvZGUmJihhcHBEYXRhLnByb2NlZHVyZXN8fFtdKS5zb21lKGZ1bmN0aW9uKHBwKXtyZXR1cm4gcHAuY29kZT09PWcuY29kZTt9KTsKICAgICAgICAgICAgaWYoaXNSZWFsUHJvYyYmZy5jb2RlKXsKICAgICAgICAgICAgICAgIGgrPSc8dGQgY2xhc3M9Imd0LWxhIiBvbmNsaWNrPSJ3aW5kb3cudmlld1Byb2NSZWFkb25seShcJycrKChnLmNvZGV8fCcnKS5yZXBsYWNlKC8nL2csIlxcJyIpKSsnXCcpIiBzdHlsZT0iY3Vyc29yOnBvaW50ZXIiIHRpdGxlPSJWb2lyIGxhIHByb2PDqWR1cmUiPicrKGcudGl0bGV8fGcubmFtZXx8JycpKyc8L3RkPic7CiAgICAgICAgICAgIH0gZWxzZSBpZihoYXNMaW5rZWRQcm9jKXsKICAgICAgICAgICAgICAgIGgrPSc8dGQgY2xhc3M9Imd0LWxhIiBzdHlsZT0iY3Vyc29yOnBvaW50ZXIiPic7CiAgICAgICAgICAgICAgICBoKz0nPHNwYW4gb25jbGljaz0id2luZG93LnZpZXdQcm9jUmVhZG9ubHkoXCcnKygoZy5jb2RlfHwnJykucmVwbGFjZSgvJy9nLCJcXCciKSkrJ1wnKSIgdGl0bGU9IlZvaXIgbGEgcHJvY8OpZHVyZSI+JysoZy50aXRsZXx8Zy5uYW1lfHwnJykrJzwvc3Bhbj4nOwogICAgICAgICAgICAgICAgaCs9JyA8aSBjbGFzcz0iZmFzIGZhLXBlbmNpbC1hbHQiIG9uY2xpY2s9ImV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO3dpbmRvdy5vcGVuR3RNb2RhbChcJycrZy5pZCsnXCcpIiBzdHlsZT0iY29sb3I6Izg4ODtmb250LXNpemU6LjdyZW07Y3Vyc29yOnBvaW50ZXI7bWFyZ2luLWxlZnQ6NnB4IiB0aXRsZT0iTW9kaWZpZXIgbFx4MjfDqWNow6lhbmNlIj48L2k+JzsKICAgICAgICAgICAgICAgIGgrPSc8L3RkPic7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBoKz0nPHRkIGNsYXNzPSJndC1sYSIgb25jbGljaz0id2luZG93Lm9wZW5HdE1vZGFsKFwnJytnLmlkKydcJykiIHN0eWxlPSJjdXJzb3I6cG9pbnRlciIgdGl0bGU9Ik1vZGlmaWVyIGxceDI3w6ljaMOpYW5jZSI+JysoZy50aXRsZXx8Zy5uYW1lfHwnJykrJzwvdGQ+JzsKICAgICAgICAgICAgfQogICAgICAgICAgICB2YXIgaXNBbm5lZT1nLmFubmVlfHxmYWxzZTsKICAgICAgICAgICAgaCs9Jzx0ZCBjbGFzcz0iZ3QtY2siPicrKGlzQW5uZWU/JzxzcGFuIHRpdGxlPSLDgCBsXCdhbm7DqWUiIHN0eWxlPSJjb2xvcjojYWFhO2ZvbnQtc2l6ZTouN3JlbSI+XHUyMjFFPC9zcGFuPic6JzxpbnB1dCB0eXBlPSJjaGVja2JveCIgJysoZy5kb25lPydjaGVja2VkJzonJykrJyBvbmNoYW5nZT0id2luZG93LnRvZ2dsZVByb2NEb25lKFwnJytnLmlkKydcJykiIHRpdGxlPSJUZXJtaW7DqWUiPicpKyc8L3RkPic7CiAgICAgICAgICAgIHZpcy5mb3JFYWNoKGZ1bmN0aW9uKHcpewogICAgICAgICAgICAgICAgdmFyIHZhYz12dy5pbmRleE9mKHcpPj0wLCBpcj13SW5SKHcsZy53c3RhcnQsZy53ZW5kKTsKICAgICAgICAgICAgICAgIGgrPSc8dGQnKyh2YWM/JyBjbGFzcz0iZ3QtdmEiJzonJykrJyBzdHlsZT0icG9zaXRpb246cmVsYXRpdmUiPic7CiAgICAgICAgICAgICAgICBpZihpcikgaCs9JzxkaXYgY2xhc3M9Imd0LWNmIiBzdHlsZT0iYmFja2dyb3VuZDonK2NvbCsnOy13ZWJraXQtcHJpbnQtY29sb3ItYWRqdXN0OmV4YWN0O3ByaW50LWNvbG9yLWFkanVzdDpleGFjdCcrKGcuZG9uZT8nO29wYWNpdHk6LjQnOicnKSsnIj4nKyc8L2Rpdj4nOwogICAgICAgICAgICAgICAgaCs9JzwvdGQ+JzsKICAgICAgICAgICAgfSk7aCs9JzwvdHI+JzsKICAgICAgICB9KTsKICAgICAgICBoKz0nPC90Ym9keT4nO2RvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdndC10YmwnKS5pbm5lckhUTUw9aDsKICAgICAgICAvLyBVcGRhdGUgZmlsdGVyIG9wdGlvbnMgZHluYW1pY2FsbHkKICAgICAgICB2YXIgZnNlbD1kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ3QtZmMnKTt2YXIgY3VyVmFsPWZzZWwudmFsdWU7CiAgICAgICAgdmFyIGNhdHMyPXt9OyhhcHBEYXRhLnByb2NlZHVyZXN8fFtdKS5mb3JFYWNoKGZ1bmN0aW9uKHBwKXtpZihwcC5jYXQmJihwcC53c3RhcnR8fHBwLmFubmVlKSljYXRzMltwcC5jYXRdPTE7fSk7CiAgICAgICAgKGFwcERhdGEuZ2FudHR8fFtdKS5mb3JFYWNoKGZ1bmN0aW9uKGdnKXtpZihnZy5jYXQmJmdnLndzdGFydCljYXRzMltnZy5jYXRdPTE7fSk7CiAgICAgICAgdmFyIGZvcHRzPSc8b3B0aW9uIHZhbHVlPSJBTEwiPlRvdXRlcyBjYXTDqWdvcmllczwvb3B0aW9uPic7CiAgICAgICAgT2JqZWN0LmtleXMoY2F0czIpLnNvcnQoKS5mb3JFYWNoKGZ1bmN0aW9uKGMpe2ZvcHRzKz0nPG9wdGlvbiB2YWx1ZT0iJytjKyciJysoY3VyVmFsPT09Yz8nIHNlbGVjdGVkJzonJykrJz4nK2MrJzwvb3B0aW9uPic7fSk7CiAgICAgICAgZnNlbC5pbm5lckhUTUw9Zm9wdHM7CiAgICB9CgoKICAgICAgICAvLyBTaG93IGxhc3QgZXhwb3J0CiAgICAgICAgaWYoYXBwRGF0YS5zZXR0aW5ncyYmYXBwRGF0YS5zZXR0aW5ncy5sYXN0RXhwb3J0KXsKICAgICAgICAgICAgdmFyIGVsPWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsYXN0LWV4cG9ydCcpOwogICAgICAgICAgICBpZihlbCllbC50ZXh0Q29udGVudD0nRGVybmllciBleHBvcnQgOiAnK25ldyBEYXRlKGFwcERhdGEuc2V0dGluZ3MubGFzdEV4cG9ydCkudG9Mb2NhbGVTdHJpbmcoJ2ZyLUZSJyk7CiAgICAgICAgfQoKICAgIHdpbmRvdy5zYXZlRXZlbnQgPSBzYXZlRXZlbnQ7CiAgICB3aW5kb3cub3BlbkV2TW9kYWwgPSBvcGVuRXZNb2RhbDsKICAgIHdpbmRvdy5jbG9zZUV2TW9kYWwgPSBjbG9zZUV2TW9kYWw7CiAgICB3aW5kb3cuZGVsRXZGcm9tTW9kYWwgPSBkZWxFdkZyb21Nb2RhbDsKICAgIHdpbmRvdy5maWxsVGVhY2hlclNlbCA9IGZpbGxUZWFjaGVyU2VsOwogICAgd2luZG93LnBpY2tTYXZlRmlsZSA9IHBpY2tTYXZlRmlsZTsKICAgIHdpbmRvdy5waWNrRXhpc3RpbmdGaWxlID0gcGlja0V4aXN0aW5nRmlsZTsKICAgIHdpbmRvdy51bmxpbmtGaWxlID0gdW5saW5rRmlsZTsKICAgIHdpbmRvdy53cml0ZVRvRmlsZSA9IHdyaXRlVG9GaWxlOwogICAgd2luZG93LmxvYWRGcm9tRmlsZSA9IGxvYWRGcm9tRmlsZTsKICAgIHdpbmRvdy51cGRhdGVGaWxlVUkgPSB1cGRhdGVGaWxlVUk7CiAgICB3aW5kb3cucmVzdG9yZUZpbGVIYW5kbGUgPSByZXN0b3JlRmlsZUhhbmRsZTsKICAgIHdpbmRvdy5leHBvcnREYXRhID0gZXhwb3J0RGF0YTsKICAgIHdpbmRvdy5pbXBvcnREYXRhID0gaW1wb3J0RGF0YTsKPC9zY3JpcHQ+Cgo8c2NyaXB0PgooZnVuY3Rpb24oKXsKICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgZnVuY3Rpb24oZSkgewogICAgICAgIGlmICghZS5kYXRhIHx8IGUuZGF0YS50eXBlICE9PSAncGlsb3RlLXNldHRpbmdzJykgcmV0dXJuOwogICAgICAgIHZhciBzID0gZS5kYXRhLmRhdGE7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgaWYgKHR5cGVvZiBhcHBEYXRhICE9PSAndW5kZWZpbmVkJykgewogICAgICAgICAgICAgICAgaWYgKHMuc2Nob29sKSBhcHBEYXRhLnNldHRpbmdzLnNjaG9vbCA9IHMuc2Nob29sOwogICAgICAgICAgICAgICAgaWYgKHMubmFtZSkgYXBwRGF0YS5zZXR0aW5ncy51c2VyID0gcy5uYW1lOwogICAgICAgICAgICAgICAgaWYgKHMubG9nb1NyYykgYXBwRGF0YS5zZXR0aW5ncy5sb2dvID0gcy5sb2dvU3JjOwogICAgICAgICAgICAgICAgaWYgKHMucGRmSGVhZGVyTGF5b3V0KSAgIGFwcERhdGEuc2V0dGluZ3MucGRmSGVhZGVyTGF5b3V0ICAgPSBzLnBkZkhlYWRlckxheW91dDsKICAgICAgICAgICAgICAgIGlmIChzLnBkZkhlYWRlckNvbG9yKSAgICBhcHBEYXRhLnNldHRpbmdzLnBkZkhlYWRlckNvbG9yICAgID0gcy5wZGZIZWFkZXJDb2xvcjsKICAgICAgICAgICAgICAgIGlmIChzLnBkZkhlYWRlclN1YnRpdGxlKSBhcHBEYXRhLnNldHRpbmdzLnBkZkhlYWRlclN1YnRpdGxlID0gcy5wZGZIZWFkZXJTdWJ0aXRsZTsKICAgICAgICAgICAgICAgIGlmIChzLnNpZ25TcmMpIGFwcERhdGEuc2V0dGluZ3Muc2lnbmF0dXJlID0gcy5zaWduU3JjOwogICAgICAgICAgICAgICAgaWYgKHMuem9uZSkgYXBwRGF0YS5zZXR0aW5ncy56b25lID0gcy56b25lOwogICAgICAgICAgICAgICAgaWYgKHMudGVhY2hlcnMgJiYgcy50ZWFjaGVycy5sZW5ndGgpIHsgX3RlYWNoZXJzID0gcy50ZWFjaGVyczsgfQogICAgICAgICAgICAgICAgaWYgKHMuc3R1ZGVudHMgJiYgcy5zdHVkZW50cy5sZW5ndGgpIHsgX3N0dWRlbnRzID0gcy5zdHVkZW50czsgfQogICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBzLmdjYWxFbmFibGVkICE9PSAndW5kZWZpbmVkJykgeyBzZXRDYWxlbmRhck1vZGUocy5nY2FsRW5hYmxlZCk7IH0KICAgICAgICAgICAgICAgIGlmIChzLmdjYWxFdmVudHMpIHsgX2djYWxFdmVudHMgPSBzLmdjYWxFdmVudHM7IHJlbmRlclVuaWZpZWRDYWwoKTsgfQogICAgICAgICAgICAgICAgaWYgKHMuZ2NhbENhbGVuZGFycykgeyBfZ2NhbENhbGVuZGFycyA9IHMuZ2NhbENhbGVuZGFyczsgfQogICAgICAgICAgICAgICAgaWYgKHMuZ2NhbFNlbCkgeyBfZ2NhbFNlbGVjdGVkSWRzID0gcy5nY2FsU2VsOyB9CiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHNhdmVEYXRhID09PSAnZnVuY3Rpb24nKSBzYXZlRGF0YSgpOwogICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBpbml0U3R1ZGVudEFDID09PSAnZnVuY3Rpb24nKSBpbml0U3R1ZGVudEFDKCk7CiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGluaXRUZWFjaGVyQUMgPT09ICdmdW5jdGlvbicpIGluaXRUZWFjaGVyQUMoKTsKICAgICAgICAgICAgfQogICAgICAgIH0gY2F0Y2goZXJyKSB7IGNvbnNvbGUud2FybignQnJpZGdlIGVycm9yOicsIGVycik7IH0KICAgIH0pOwogICAgd2luZG93LnBhcmVudC5wb3N0TWVzc2FnZSh7IHR5cGU6ICdwaWxvdGUtbW9kdWxlLXJlYWR5JywgbW9kdWxlOiAncGVyZGlyJyB9LCAnKicpOwoKICAgIAogICAgLy8g4pWQ4pWQ4pWQIFRBQiBLRVkgSU4gUlRFIEVESVRPUlMg4pWQ4pWQ4pWQCiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgZnVuY3Rpb24oZSkgewogICAgICAgIHZhciBlbCA9IGUudGFyZ2V0OwogICAgICAgIGlmICghZWwgfHwgIWVsLmNsYXNzTGlzdCB8fCAhZWwuY2xhc3NMaXN0LmNvbnRhaW5zKCdkb2MtZWRpdG9yJykgfHwgIWVsLmlzQ29udGVudEVkaXRhYmxlKSByZXR1cm47CiAgICAgICAgaWYgKGUua2V5ID09PSAnVGFiJykgewogICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgICAgIGlmIChlLnNoaWZ0S2V5KSB7CiAgICAgICAgICAgICAgICBkb2N1bWVudC5leGVjQ29tbWFuZCgnb3V0ZGVudCcsIGZhbHNlLCBudWxsKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGRvY3VtZW50LmV4ZWNDb21tYW5kKCdpbmRlbnQnLCBmYWxzZSwgbnVsbCk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9KTsKCiAgICAvLyBGb3J3YXJkIGtleWJvYXJkIHNob3J0Y3V0cyB0byBwYXJlbnQKICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBmdW5jdGlvbihlKSB7CiAgICAgICAgaWYgKCFlLmN0cmxLZXkgfHwgZS5zaGlmdEtleSB8fCBlLmFsdEtleSB8fCBlLm1ldGFLZXkpIHJldHVybjsKICAgICAgICB2YXIga2V5ID0gZS5rZXkudG9Mb3dlckNhc2UoKTsKICAgICAgICBpZiAoWydwJywnZScsJ28nLCdhJywnZCddLmluZGV4T2Yoa2V5KSA+PSAwKSB7CiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgICAgICAgd2luZG93LnBhcmVudC5wb3N0TWVzc2FnZSh7dHlwZToncGlsb3RlLXNob3J0Y3V0Jywga2V5OmtleX0sICcqJyk7CiAgICAgICAgfQogICAgfSk7CgoKICAgIC8vIExpc3RlbiBmb3IgZ2NhbCBDUlVEIHJlc3BvbnNlcwogICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCBmdW5jdGlvbihlT0wpIHsKICAgICAgICBpZiAoIWVPTC5kYXRhIHx8IGVPTC5kYXRhLnR5cGUgIT09ICdwaWxvdGUtb3V0bG9vaycpIHJldHVybjsKICAgICAgICB2YXIgb2QgPSBlT0wuZGF0YS5kYXRhOwogICAgICAgIGlmIChvZCkgewogICAgICAgICAgICBpZiAob2Qub3V0bG9va0V2ZW50cykgeyBfb3V0bG9va0V2ZW50cyA9IG9kLm91dGxvb2tFdmVudHM7IHJlbmRlclVuaWZpZWRDYWwoKTsgfQogICAgICAgICAgICBpZiAob2Qub3V0bG9va0NhbHMpIF9vdXRsb29rQ2FsZW5kYXJzID0gb2Qub3V0bG9va0NhbHM7CiAgICAgICAgICAgIGlmICh0eXBlb2Ygb2Qub3V0bG9va0VuYWJsZWQgIT09ICd1bmRlZmluZWQnKSBfb3V0bG9va0VuYWJsZWQgPSBvZC5vdXRsb29rRW5hYmxlZDsKICAgICAgICB9CiAgICB9KTsKICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgZnVuY3Rpb24oZTIpIHsKICAgICAgICBpZiAoIWUyLmRhdGEpIHJldHVybjsKICAgICAgICBpZiAoZTIuZGF0YS50eXBlID09PSAncGlsb3RlLWdjYWwtY3J1ZC1vaycpIHsKICAgICAgICAgICAgLy8gUmVmcmVzaCBhZnRlciBDUlVECiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXsgd2luZG93LnBhcmVudC5wb3N0TWVzc2FnZSh7dHlwZToncGlsb3RlLWdjYWwtcmVmcmVzaCd9LCAnKicpOyB9LCA1MDApOwogICAgICAgIH0KICAgIH0pOwp9KSgpOwoKICAgIAogICAgZnVuY3Rpb24gZXNjSHRtbChzKSB7IHZhciBkPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOyBkLnRleHRDb250ZW50PXM7IHJldHVybiBkLmlubmVySFRNTDsgfQoKICAgIGZ1bmN0aW9uIHNldENhbGVuZGFyTW9kZShlbmFibGVkKSB7IF9nY2FsRW5hYmxlZCA9IGVuYWJsZWQ7IH0KCiAgICAvLyDilZDilZDilZAgQ0FMRU5EUklFUiBVTklGScOJIFYxMi4xMyDilZDilZDilZAKICAgIHZhciBfZ2NhbEVuYWJsZWQgPSBmYWxzZTsKICAgIHZhciBfZ2NhbEV2ZW50cyA9IFtdOwogICAgdmFyIF91Y2FsTW9udGggPSBuZXcgRGF0ZSgpLmdldE1vbnRoKCk7CiAgICB2YXIgX3VjYWxZZWFyID0gbmV3IERhdGUoKS5nZXRGdWxsWWVhcigpOwogICAgdmFyIF9nY2FsQ2FsZW5kYXJzID0gW107IC8vIGxpc3Qgb2Yge2lkLCBuYW1lLCBiZ30KICAgIHZhciBfZ2NhbFNlbGVjdGVkSWRzID0gW107IC8vIElEcyBzZWxlY3RlZCBpbiBtYXN0ZXIgc2V0dGluZ3MKICAgIHZhciBfb3V0bG9va0V2ZW50cyA9IFtdOwogICAgdmFyIF9vdXRsb29rQ2FsZW5kYXJzID0gW107CiAgICB2YXIgX291dGxvb2tFbmFibGVkID0gZmFsc2U7CgogICAgLy8gQ29sb3IgbWFwIGZvciBldmVudCB0eXBlcwogICAgdmFyIFVDQUxfQ09MT1JTID0gewogICAgICAgIGxvY2FsOiAnIzM0OThkYicsCiAgICAgICAgZmVyaWU6ICcjZTc0YzNjJywKICAgICAgICB2YWM6ICcjZTY3ZTIyJywKICAgICAgICBnY2FsRGVmYXVsdDogJyM0Mjg1ZjQnCiAgICB9OwoKICAgIGZ1bmN0aW9uIHVjYWxQcmV2KCkgeyBfdWNhbE1vbnRoLS07IGlmKF91Y2FsTW9udGg8MCl7X3VjYWxNb250aD0xMTtfdWNhbFllYXItLTt9IHJlbmRlclVuaWZpZWRDYWwoKTsgfQogICAgZnVuY3Rpb24gdWNhbE5leHQoKSB7IF91Y2FsTW9udGgrKzsgaWYoX3VjYWxNb250aD4xMSl7X3VjYWxNb250aD0wO191Y2FsWWVhcisrO30gcmVuZGVyVW5pZmllZENhbCgpOyB9CiAgICBmdW5jdGlvbiB1Y2FsVG9kYXkoKSB7IF91Y2FsTW9udGg9bmV3IERhdGUoKS5nZXRNb250aCgpOyBfdWNhbFllYXI9bmV3IERhdGUoKS5nZXRGdWxsWWVhcigpOyByZW5kZXJVbmlmaWVkQ2FsKCk7IH0KICAgIGZ1bmN0aW9uIHVjYWxSZWZyZXNoKCkgeyB3aW5kb3cucGFyZW50LnBvc3RNZXNzYWdlKHt0eXBlOidwaWxvdGUtZ2NhbC1yZWZyZXNoJ30sICcqJyk7IH0KCiAgICBmdW5jdGlvbiByZW5kZXJVbmlmaWVkQ2FsKCkgewogICAgICAgIHZhciBtTmFtZXMgPSBbJ0phbnZpZXInLCdGw6l2cmllcicsJ01hcnMnLCdBdnJpbCcsJ01haScsJ0p1aW4nLCdKdWlsbGV0JywnQW/Du3QnLCdTZXB0ZW1icmUnLCdPY3RvYnJlJywnTm92ZW1icmUnLCdEw6ljZW1icmUnXTsKICAgICAgICB2YXIgdGl0bGVFbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd1Y2FsLXRpdGxlJyk7CiAgICAgICAgaWYgKHRpdGxlRWwpIHRpdGxlRWwudGV4dENvbnRlbnQgPSBtTmFtZXNbX3VjYWxNb250aF0gKyAnICcgKyBfdWNhbFllYXI7CgogICAgICAgIHZhciBib2R5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3VjYWwtYm9keScpOwogICAgICAgIGlmICghYm9keSkgcmV0dXJuOwogICAgICAgIHZhciB0b2RheSA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKS5zcGxpdCgnVCcpWzBdOwogICAgICAgIHZhciBtU3RyID0gX3VjYWxZZWFyICsgJy0nICsgU3RyaW5nKF91Y2FsTW9udGgrMSkucGFkU3RhcnQoMiwnMCcpOwogICAgICAgIHZhciBpc0N1cnJlbnRNb250aCA9IChfdWNhbE1vbnRoID09PSBuZXcgRGF0ZSgpLmdldE1vbnRoKCkgJiYgX3VjYWxZZWFyID09PSBuZXcgRGF0ZSgpLmdldEZ1bGxZZWFyKCkpOwoKICAgICAgICAvLyBDb2xsZWN0IEFMTCBldmVudHMgZm9yIHRoaXMgbW9udGgKICAgICAgICB2YXIgYWxsID0gW107CgogICAgICAgIC8vIDEuIExvY2FsIGV2ZW50cwogICAgICAgIChhcHBEYXRhLmNhbGVuZGFyIHx8IFtdKS5mb3JFYWNoKGZ1bmN0aW9uKGMpIHsKICAgICAgICAgICAgaWYgKCFjLmRhdGUgfHwgIWMudGFzayB8fCBjLmRhdGUuc3Vic3RyaW5nKDAsNykgIT09IG1TdHIpIHJldHVybjsKICAgICAgICAgICAgdmFyIHR5cGUgPSAnbG9jYWwnOwogICAgICAgICAgICBpZiAoYy52YWNPZmZpY2llbCkgdHlwZSA9IGMudGFzay5pbmRleE9mKCfwn4er8J+HtycpID49IDAgPyAnZmVyaWUnIDogJ3ZhYyc7CiAgICAgICAgICAgIGFsbC5wdXNoKHsKICAgICAgICAgICAgICAgIGlkOiBjLmlkLCB0aXRsZTogYy50YXNrLCBkYXRlOiBjLmRhdGUsIHRpbWU6ICcnLCBlbmRUaW1lOiAnJywKICAgICAgICAgICAgICAgIHNyYzogJ2xvY2FsJywgdHlwZTogdHlwZSwKICAgICAgICAgICAgICAgIGNvbG9yOiB0eXBlID09PSAnZmVyaWUnID8gVUNBTF9DT0xPUlMuZmVyaWUgOiB0eXBlID09PSAndmFjJyA/IFVDQUxfQ09MT1JTLnZhYyA6IFVDQUxfQ09MT1JTLmxvY2FsLAogICAgICAgICAgICAgICAgY2FsTmFtZTogdHlwZSA9PT0gJ2ZlcmllJyA/ICdKb3VyIGbDqXJpw6knIDogdHlwZSA9PT0gJ3ZhYycgPyAnVmFjYW5jZXMnIDogJ0FnZW5kYSBsb2NhbCcsCiAgICAgICAgICAgICAgICBjYWxJZDogJycsIGVkaXRhYmxlOiB0eXBlID09PSAnbG9jYWwnCiAgICAgICAgICAgIH0pOwogICAgICAgIH0pOwoKICAgICAgICAvLyAyLiBHb29nbGUgQ2FsZW5kYXIgZXZlbnRzCiAgICAgICAgKF9nY2FsRXZlbnRzIHx8IFtdKS5mb3JFYWNoKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgaWYgKCFlLmRhdGUgfHwgZS5kYXRlLnN1YnN0cmluZygwLDcpICE9PSBtU3RyKSByZXR1cm47CiAgICAgICAgICAgIC8vIEF2b2lkIGR1cGxpY2F0ZXMgd2l0aCBsb2NhbAogICAgICAgICAgICB2YXIgaXNEdXAgPSBhbGwuc29tZShmdW5jdGlvbihhKXsgcmV0dXJuIGEudGl0bGUgPT09IGUudGl0bGUgJiYgYS5kYXRlID09PSBlLmRhdGUgJiYgYS5zcmMgPT09ICdsb2NhbCc7IH0pOwogICAgICAgICAgICBpZiAoaXNEdXApIHJldHVybjsKICAgICAgICAgICAgYWxsLnB1c2goewogICAgICAgICAgICAgICAgaWQ6IGUuaWQsIHRpdGxlOiBlLnRpdGxlLCBkYXRlOiBlLmRhdGUsIHRpbWU6IGUudGltZSB8fCAnJywgZW5kVGltZTogZS5lbmRUaW1lIHx8ICcnLAogICAgICAgICAgICAgICAgc3JjOiAnZ2NhbCcsIHR5cGU6ICdnY2FsJywKICAgICAgICAgICAgICAgIGNvbG9yOiBlLmNvbG9yIHx8IFVDQUxfQ09MT1JTLmdjYWxEZWZhdWx0LAogICAgICAgICAgICAgICAgY2FsTmFtZTogZS5jYWxOYW1lIHx8ICdHb29nbGUnLCBjYWxJZDogZS5jYWxJZCB8fCAnJywKICAgICAgICAgICAgICAgIGVkaXRhYmxlOiAhIV9nY2FsRW5hYmxlZAogICAgICAgICAgICB9KTsKICAgICAgICB9KTsKCiAgICAgICAgLy8gMy4gT3V0bG9vayBldmVudHMKICAgICAgICAoX291dGxvb2tFdmVudHMgfHwgW10pLmZvckVhY2goZnVuY3Rpb24oZSkgewogICAgICAgICAgICBpZiAoIWUuZGF0ZSB8fCBlLmRhdGUuc3Vic3RyaW5nKDAsNykgIT09IG1TdHIpIHJldHVybjsKICAgICAgICAgICAgdmFyIGlzRHVwID0gYWxsLnNvbWUoZnVuY3Rpb24oYSl7IHJldHVybiBhLnRpdGxlID09PSBlLnRpdGxlICYmIGEuZGF0ZSA9PT0gZS5kYXRlOyB9KTsKICAgICAgICAgICAgaWYgKGlzRHVwKSByZXR1cm47CiAgICAgICAgICAgIGFsbC5wdXNoKHsKICAgICAgICAgICAgICAgIGlkOiBlLmlkLCB0aXRsZTogZS50aXRsZSwgZGF0ZTogZS5kYXRlLCB0aW1lOiBlLnRpbWUgfHwgJycsIGVuZFRpbWU6IGUuZW5kVGltZSB8fCAnJywKICAgICAgICAgICAgICAgIHNyYzogJ291dGxvb2snLCB0eXBlOiAnb3V0bG9vaycsCiAgICAgICAgICAgICAgICBjb2xvcjogZS5jb2xvciB8fCAnIzAwNzhkNCcsCiAgICAgICAgICAgICAgICBjYWxOYW1lOiBlLmNhbE5hbWUgfHwgJ091dGxvb2snLCBjYWxJZDogZS5jYWxJZCB8fCAnJywKICAgICAgICAgICAgICAgIGVkaXRhYmxlOiAhIV9vdXRsb29rRW5hYmxlZAogICAgICAgICAgICB9KTsKICAgICAgICB9KTsKCiAgICAgICAgLy8gU29ydCBieSBkYXRlK3RpbWUKICAgICAgICBhbGwuc29ydChmdW5jdGlvbihhLGIpIHsgcmV0dXJuIChhLmRhdGUrJyAnKyhhLnRpbWV8fCcwMDowMCcpKS5sb2NhbGVDb21wYXJlKGIuZGF0ZSsnICcrKGIudGltZXx8JzAwOjAwJykpOyB9KTsKCiAgICAgICAgLy8gRmlsdGVyOiBmb3IgY3VycmVudCBtb250aCwgb25seSBmdXR1cmUgZXZlbnRzCiAgICAgICAgaWYgKGlzQ3VycmVudE1vbnRoKSB7CiAgICAgICAgICAgIGFsbCA9IGFsbC5maWx0ZXIoZnVuY3Rpb24oZSkgeyByZXR1cm4gZS5kYXRlID49IHRvZGF5OyB9KTsKICAgICAgICB9CgogICAgICAgIGlmICghYWxsLmxlbmd0aCkgewogICAgICAgICAgICBib2R5LmlubmVySFRNTCA9ICc8ZGl2IGNsYXNzPSJ1Y2FsLWVtcHR5Ij48aSBjbGFzcz0iZmFzIGZhLWNhbGVuZGFyLWNoZWNrIj48L2k+QXVjdW4gw6l2w6luZW1lbnQgY2UgbW9pczwvZGl2Pic7CiAgICAgICAgICAgIHJlbmRlclVjYWxMZWdlbmQoW10pOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICAvLyBHcm91cCBieSBkYXkKICAgICAgICB2YXIgZ3JvdXBzID0ge307CiAgICAgICAgYWxsLmZvckVhY2goZnVuY3Rpb24oZSkgeyBpZighZ3JvdXBzW2UuZGF0ZV0pIGdyb3Vwc1tlLmRhdGVdPVtdOyBncm91cHNbZS5kYXRlXS5wdXNoKGUpOyB9KTsKCiAgICAgICAgdmFyIGh0bWwgPSAnJzsKICAgICAgICB2YXIgc3JjU2V0ID0gbmV3IFNldCgpOwogICAgICAgIE9iamVjdC5rZXlzKGdyb3Vwcykuc29ydCgpLmZvckVhY2goZnVuY3Rpb24oZGF0ZSkgewogICAgICAgICAgICB2YXIgZCA9IG5ldyBEYXRlKGRhdGUgKyAnVDEyOjAwOjAwJyk7CiAgICAgICAgICAgIHZhciBkYXlOYW1lID0gZC50b0xvY2FsZURhdGVTdHJpbmcoJ2ZyLUZSJywge3dlZWtkYXk6J2xvbmcnLCBkYXk6J251bWVyaWMnLCBtb250aDonbG9uZyd9KTsKICAgICAgICAgICAgZGF5TmFtZSA9IGRheU5hbWUuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBkYXlOYW1lLnNsaWNlKDEpOwogICAgICAgICAgICB2YXIgaXNUb2RheSA9IGRhdGUgPT09IHRvZGF5OwoKICAgICAgICAgICAgaHRtbCArPSAnPGRpdiBjbGFzcz0idWNhbC1kYXktZ3JvdXAiPic7CiAgICAgICAgICAgIGh0bWwgKz0gJzxkaXYgY2xhc3M9InVjYWwtZGF5LWhkcicrKGlzVG9kYXk/JyBpcy10b2RheSc6JycpKyciPicrKGlzVG9kYXk/JzxpIGNsYXNzPSJmYXMgZmEtc3RhciIgc3R5bGU9ImNvbG9yOiNlNjdlMjI7bWFyZ2luLXJpZ2h0OjRweDtmb250LXNpemU6LjdyZW0iPjwvaT4nOicnKStkYXlOYW1lKyc8L2Rpdj4nOwoKICAgICAgICAgICAgZ3JvdXBzW2RhdGVdLmZvckVhY2goZnVuY3Rpb24oZXYpIHsKICAgICAgICAgICAgICAgIHNyY1NldC5hZGQoZXYudHlwZSA9PT0gJ2djYWwnID8gZXYuY2FsTmFtZSA6IGV2LnR5cGUpOwogICAgICAgICAgICAgICAgaHRtbCArPSAnPGRpdiBjbGFzcz0idWNhbC1pdGVtIj4nOwogICAgICAgICAgICAgICAgaHRtbCArPSAnPGRpdiBjbGFzcz0idWNhbC1kb3QiIHN0eWxlPSJiYWNrZ3JvdW5kOicrZXYuY29sb3IrJyI+PC9kaXY+JzsKICAgICAgICAgICAgICAgIGh0bWwgKz0gJzxkaXYgY2xhc3M9InVjYWwtbGVmdCI+JzsKICAgICAgICAgICAgICAgIGh0bWwgKz0gJzxkaXYgY2xhc3M9InVjYWwtaXRlbS10aW1lIj4nKyhldi50aW1lID8gZXYudGltZSsoZXYuZW5kVGltZT8nIOKAkyAnK2V2LmVuZFRpbWU6JycpIDogJzxzcGFuIHN0eWxlPSJjb2xvcjojY2NjIj5Kb3VybsOpZTwvc3Bhbj4nKSsnPC9kaXY+JzsKICAgICAgICAgICAgICAgIGlmIChldi5lZGl0YWJsZSB8fCBldi5zcmM9PT0nZ2NhbCcpIHsKICAgICAgICAgICAgICAgICAgICBodG1sICs9ICc8ZGl2IGNsYXNzPSJ1Y2FsLWl0ZW0tYWN0aW9ucyI+JzsKICAgICAgICAgICAgICAgICAgICBodG1sICs9ICc8YnV0dG9uIG9uY2xpY2s9ImVkaXRVY2FsRXZlbnQoXCcnK2V2LmlkKydcJyxcJycrZXYuc3JjKydcJyxcJycrZXYuY2FsSWQucmVwbGFjZSgvJy9nLCJcXCciKSsnXCcpIj48aSBjbGFzcz0iZmFzIGZhLXBlbiI+PC9pPjwvYnV0dG9uPic7CiAgICAgICAgICAgICAgICAgICAgaHRtbCArPSAnPGJ1dHRvbiBjbGFzcz0iYWN0LWRlbCIgb25jbGljaz0iZGVsZXRlVWNhbEV2ZW50KFwnJytldi5pZCsnXCcsXCcnK2V2LnNyYysnXCcsXCcnK2V2LmNhbElkLnJlcGxhY2UoLycvZywiXFwnIikrJ1wnKSI+PGkgY2xhc3M9ImZhcyBmYS10cmFzaCI+PC9pPjwvYnV0dG9uPic7CiAgICAgICAgICAgICAgICAgICAgaHRtbCArPSAnPC9kaXY+JzsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGh0bWwgKz0gJzwvZGl2Pic7CiAgICAgICAgICAgICAgICBodG1sICs9ICc8ZGl2IGNsYXNzPSJ1Y2FsLWluZm8iPic7CiAgICAgICAgICAgICAgICBodG1sICs9ICc8ZGl2IGNsYXNzPSJ1Y2FsLWl0ZW0tdGl0bGUiPicrZXNjSHRtbChldi50aXRsZSkrJzwvZGl2Pic7CiAgICAgICAgICAgICAgICBodG1sICs9ICc8ZGl2IGNsYXNzPSJ1Y2FsLWl0ZW0tbWV0YSI+Jytlc2NIdG1sKGV2LmNhbE5hbWUpOwogICAgICAgICAgICAgICAgaWYgKGV2LnNyYz09PSdnY2FsJykgaHRtbCArPSAnIDxzcGFuIGNsYXNzPSJ1Y2FsLXNyYy1iYWRnZSIgc3R5bGU9ImJhY2tncm91bmQ6IzQyODVmNCI+Rzwvc3Bhbj4nOwogICAgICAgICAgICAgICAgaHRtbCArPSAnPC9kaXY+PC9kaXY+JzsKICAgICAgICAgICAgICAgIGh0bWwgKz0gJzwvZGl2Pic7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBodG1sICs9ICc8L2Rpdj4nOwogICAgICAgIH0pOwogICAgICAgIGJvZHkuaW5uZXJIVE1MID0gaHRtbDsKICAgICAgICByZW5kZXJVY2FsTGVnZW5kKHNyY1NldCk7CiAgICB9CgogICAgZnVuY3Rpb24gcmVuZGVyVWNhbExlZ2VuZChzcmNTZXQpIHsKICAgICAgICB2YXIgbGVnID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3VjYWwtbGVnZW5kJyk7CiAgICAgICAgaWYgKCFsZWcpIHJldHVybjsKICAgICAgICB2YXIgaXRlbXMgPSBbCiAgICAgICAgICAgIHtsYWJlbDonTG9jYWwnLCBjb2xvcjpVQ0FMX0NPTE9SUy5sb2NhbCwga2V5Oidsb2NhbCd9LAogICAgICAgICAgICB7bGFiZWw6J0bDqXJpw6lzJywgY29sb3I6VUNBTF9DT0xPUlMuZmVyaWUsIGtleTonZmVyaWUnfSwKICAgICAgICAgICAge2xhYmVsOidWYWNhbmNlcycsIGNvbG9yOlVDQUxfQ09MT1JTLnZhYywga2V5Oid2YWMnfSwKICAgICAgICAgICAge2xhYmVsOidPdXRsb29rJywgY29sb3I6JyMwMDc4ZDQnLCBrZXk6J291dGxvb2snfQogICAgICAgIF07CiAgICAgICAgLy8gQWRkIGdjYWwgY2FsZW5kYXJzCiAgICAgICAgKF9nY2FsRXZlbnRzIHx8IFtdKS5mb3JFYWNoKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgaWYgKGUuY2FsTmFtZSAmJiAhaXRlbXMuc29tZShmdW5jdGlvbihpKXtyZXR1cm4gaS5sYWJlbD09PWUuY2FsTmFtZTt9KSkgewogICAgICAgICAgICAgICAgaXRlbXMucHVzaCh7bGFiZWw6ZS5jYWxOYW1lLCBjb2xvcjplLmNvbG9yfHxVQ0FMX0NPTE9SUy5nY2FsRGVmYXVsdCwga2V5OmUuY2FsTmFtZX0pOwogICAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgbGVnLmlubmVySFRNTCA9IGl0ZW1zLm1hcChmdW5jdGlvbihpKXsKICAgICAgICAgICAgcmV0dXJuICc8c3Bhbj48c3BhbiBjbGFzcz0idWNhbC1sZWdlbmQtZG90IiBzdHlsZT0iYmFja2dyb3VuZDonK2kuY29sb3IrJyI+PC9zcGFuPicraS5sYWJlbCsnPC9zcGFuPic7CiAgICAgICAgfSkuam9pbignJyk7CiAgICB9CgogICAgLy8g4pSA4pSAIENSVUQg4pSA4pSACiAgICBmdW5jdGlvbiBvcGVuVWNhbEFkZE1vZGFsKCkgewogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd1Y2FsLWVpZCcpLnZhbHVlID0gJyc7CiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3VjYWwtZXNyYycpLnZhbHVlID0gJ2xvY2FsJzsKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndWNhbC1lY2FsaWQnKS52YWx1ZSA9ICcnOwogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd1Y2FsLWRhdGUnKS52YWx1ZSA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKS5zcGxpdCgnVCcpWzBdOwogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd1Y2FsLXRpbWUnKS52YWx1ZSA9ICcnOwogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd1Y2FsLWVuZHRpbWUnKS52YWx1ZSA9ICcnOwogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd1Y2FsLXRhc2snKS52YWx1ZSA9ICcnOwogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd1Y2FsLW1vZGFsLXRpdGxlJykudGV4dENvbnRlbnQgPSAnTm91dmVsIMOpdsOpbmVtZW50JzsKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndWNhbC1kZXN0LXdyYXAnKS5zdHlsZS5kaXNwbGF5ID0gJyc7CiAgICAgICAgc2V0VWNhbERlc3QoJ2xvY2FsJyk7CiAgICAgICAgdXBkYXRlR2NhbFRhcmdldExpc3QoKTsKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndWNhbE1vZGFsJykuc3R5bGUuZGlzcGxheSA9ICdmbGV4JzsKICAgIH0KCiAgICBmdW5jdGlvbiBjbG9zZVVjYWxNb2RhbCgpIHsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3VjYWxNb2RhbCcpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7IH0KCiAgICBmdW5jdGlvbiBzZXRVY2FsRGVzdChkZXN0KSB7CiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnVjYWwtZGVzdC1vcHQnKS5mb3JFYWNoKGZ1bmN0aW9uKGVsKXsKICAgICAgICAgICAgZWwuY2xhc3NMaXN0LnRvZ2dsZSgnYWN0aXZlJywgZWwuZGF0YXNldC5kZXN0ID09PSBkZXN0KTsKICAgICAgICAgICAgZWwucXVlcnlTZWxlY3RvcignaW5wdXQnKS5jaGVja2VkID0gZWwuZGF0YXNldC5kZXN0ID09PSBkZXN0OwogICAgICAgIH0pOwogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd1Y2FsLWdjYWwtdGFyZ2V0Jykuc3R5bGUuZGlzcGxheSA9IChkZXN0ID09PSAnZ2NhbCcgfHwgZGVzdCA9PT0gJ291dGxvb2snKSA/ICdibG9jaycgOiAnbm9uZSc7CiAgICAgICAgaWYgKGRlc3QgPT09ICdvdXRsb29rJykgdXBkYXRlT3V0bG9va1RhcmdldExpc3QoKTsKICAgICAgICBlbHNlIGlmIChkZXN0ID09PSAnZ2NhbCcpIHVwZGF0ZUdjYWxUYXJnZXRMaXN0KCk7CiAgICB9CgogICAgLy8gV2lyZSB1cCBkZXN0IGJ1dHRvbnMKICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZSkgewogICAgICAgIHZhciBvcHQgPSBlLnRhcmdldC5jbG9zZXN0KCcudWNhbC1kZXN0LW9wdCcpOwogICAgICAgIGlmIChvcHQpIHNldFVjYWxEZXN0KG9wdC5kYXRhc2V0LmRlc3QpOwogICAgfSk7CgogICAgZnVuY3Rpb24gdXBkYXRlT3V0bG9va1RhcmdldExpc3QoKSB7CiAgICAgICAgdmFyIHNlbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd1Y2FsLWdjYWwtdGFyZ2V0Jyk7CiAgICAgICAgc2VsLmlubmVySFRNTCA9ICc8b3B0aW9uIHZhbHVlPSIiPuKAlCBDaG9pc2lyIHVuIGFnZW5kYSDigJQ8L29wdGlvbj4nOwogICAgICAgIChfb3V0bG9va0NhbGVuZGFycyB8fCBbXSkuZm9yRWFjaChmdW5jdGlvbihjKSB7CiAgICAgICAgICAgIHNlbC5pbm5lckhUTUwgKz0gJzxvcHRpb24gdmFsdWU9IicrZXNjSHRtbChjLmlkKSsnIj4nK2VzY0h0bWwoYy5uYW1lKSsnPC9vcHRpb24+JzsKICAgICAgICB9KTsKICAgICAgICB2YXIgb3V0bG9va09wdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy51Y2FsLWRlc3Qtb3B0W2RhdGEtZGVzdD0ib3V0bG9vayJdJyk7CiAgICAgICAgaWYgKG91dGxvb2tPcHQpIG91dGxvb2tPcHQuc3R5bGUuZGlzcGxheSA9IChfb3V0bG9va0NhbGVuZGFycyAmJiBfb3V0bG9va0NhbGVuZGFycy5sZW5ndGgpID8gJycgOiAnbm9uZSc7CiAgICB9CiAgICBmdW5jdGlvbiB1cGRhdGVHY2FsVGFyZ2V0TGlzdCgpIHsKICAgICAgICB2YXIgc2VsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3VjYWwtZ2NhbC10YXJnZXQnKTsKICAgICAgICBzZWwuaW5uZXJIVE1MID0gJzxvcHRpb24gdmFsdWU9IiI+4oCUIENob2lzaXIgdW4gYWdlbmRhIOKAlDwvb3B0aW9uPic7CiAgICAgICAgLy8gT25seSBzaG93IGNhbGVuZGFycyBzZWxlY3RlZCBpbiBtYXN0ZXIgc2V0dGluZ3MgKGdjYWxTZWwpCiAgICAgICAgdmFyIHNlbGVjdGVkSWRzID0gX2djYWxTZWxlY3RlZElkcyB8fCBbXTsKICAgICAgICAoX2djYWxDYWxlbmRhcnMgfHwgW10pLmZvckVhY2goZnVuY3Rpb24oYykgewogICAgICAgICAgICBpZiAoc2VsZWN0ZWRJZHMubGVuZ3RoID09PSAwIHx8IHNlbGVjdGVkSWRzLmluZGV4T2YoYy5pZCkgPj0gMCkgewogICAgICAgICAgICAgICAgc2VsLmlubmVySFRNTCArPSAnPG9wdGlvbiB2YWx1ZT0iJytlc2NIdG1sKGMuaWQpKyciPicrZXNjSHRtbChjLm5hbWUpKyc8L29wdGlvbj4nOwogICAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgLy8gSWYgbm8gR29vZ2xlIGNhbGVuZGFycyBhdmFpbGFibGUsIGhpZGUgR29vZ2xlIG9wdGlvbgogICAgICAgIHZhciBnY2FsT3B0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnVjYWwtZGVzdC1vcHRbZGF0YS1kZXN0PSJnY2FsIl0nKTsKICAgICAgICB2YXIgb3V0bG9va09wdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy51Y2FsLWRlc3Qtb3B0W2RhdGEtZGVzdD0ib3V0bG9vayJdJyk7CiAgICAgICAgaWYgKGdjYWxPcHQpIGdjYWxPcHQuc3R5bGUuZGlzcGxheSA9IChfZ2NhbENhbGVuZGFycyAmJiBfZ2NhbENhbGVuZGFycy5sZW5ndGgpID8gJycgOiAnbm9uZSc7CiAgICB9CgogICAgZnVuY3Rpb24gZWRpdFVjYWxFdmVudChpZCwgc3JjLCBjYWxJZCkgewogICAgICAgIGlmIChzcmMgPT09ICdsb2NhbCcpIHsKICAgICAgICAgICAgdmFyIGl0ZW0gPSAoYXBwRGF0YS5jYWxlbmRhcnx8W10pLmZpbmQoZnVuY3Rpb24oYyl7IHJldHVybiBjLmlkLnRvU3RyaW5nKCk9PT1pZC50b1N0cmluZygpOyB9KTsKICAgICAgICAgICAgaWYgKCFpdGVtKSByZXR1cm47CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd1Y2FsLWVpZCcpLnZhbHVlID0gaWQ7CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd1Y2FsLWVzcmMnKS52YWx1ZSA9ICdsb2NhbCc7CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd1Y2FsLWVjYWxpZCcpLnZhbHVlID0gJyc7CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd1Y2FsLWRhdGUnKS52YWx1ZSA9IGl0ZW0uZGF0ZSB8fCAnJzsKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3VjYWwtdGltZScpLnZhbHVlID0gaXRlbS50aW1lIHx8ICcnOwogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndWNhbC1lbmR0aW1lJykudmFsdWUgPSBpdGVtLmVuZFRpbWUgfHwgJyc7CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd1Y2FsLXRhc2snKS52YWx1ZSA9IGl0ZW0udGFzayB8fCAnJzsKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3VjYWwtbW9kYWwtdGl0bGUnKS50ZXh0Q29udGVudCA9ICdNb2RpZmllciBsXCfDqXbDqW5lbWVudCc7CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd1Y2FsLWRlc3Qtd3JhcCcpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd1Y2FsTW9kYWwnKS5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnOwogICAgICAgIH0gZWxzZSBpZiAoc3JjID09PSAnZ2NhbCcpIHsKICAgICAgICAgICAgdmFyIGV2ID0gKF9nY2FsRXZlbnRzfHxbXSkuZmluZChmdW5jdGlvbihlKXsgcmV0dXJuIGUuaWQ9PT1pZDsgfSk7CiAgICAgICAgICAgIGlmICghZXYpIHJldHVybjsKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3VjYWwtZWlkJykudmFsdWUgPSBpZDsKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3VjYWwtZXNyYycpLnZhbHVlID0gJ2djYWwnOwogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndWNhbC1lY2FsaWQnKS52YWx1ZSA9IGNhbElkIHx8IGV2LmNhbElkIHx8ICcnOwogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndWNhbC1kYXRlJykudmFsdWUgPSBldi5kYXRlIHx8ICcnOwogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndWNhbC10aW1lJykudmFsdWUgPSBldi50aW1lIHx8ICcnOwogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndWNhbC1lbmR0aW1lJykudmFsdWUgPSBldi5lbmRUaW1lIHx8ICcnOwogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndWNhbC10YXNrJykudmFsdWUgPSBldi50aXRsZSB8fCAnJzsKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3VjYWwtbW9kYWwtdGl0bGUnKS50ZXh0Q29udGVudCA9ICdNb2RpZmllciAoR29vZ2xlIEFnZW5kYSknOwogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndWNhbC1kZXN0LXdyYXAnKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOwogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndWNhbE1vZGFsJykuc3R5bGUuZGlzcGxheSA9ICdmbGV4JzsKICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gc2F2ZVVjYWxFdmVudCgpIHsKICAgICAgICB2YXIgaWQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndWNhbC1laWQnKS52YWx1ZTsKICAgICAgICB2YXIgc3JjID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3VjYWwtZXNyYycpLnZhbHVlOwogICAgICAgIHZhciBjYWxJZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd1Y2FsLWVjYWxpZCcpLnZhbHVlOwogICAgICAgIHZhciBkYXRlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3VjYWwtZGF0ZScpLnZhbHVlOwogICAgICAgIHZhciB0aW1lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3VjYWwtdGltZScpLnZhbHVlOwogICAgICAgIHZhciBlbmRUaW1lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3VjYWwtZW5kdGltZScpLnZhbHVlOwogICAgICAgIHZhciB0YXNrID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3VjYWwtdGFzaycpLnZhbHVlLnRyaW0oKTsKICAgICAgICBpZiAoIWRhdGUgfHwgIXRhc2spIHJldHVybiBhbGVydCgnRGF0ZSBldCBpbnRpdHVsw6kgcmVxdWlzJyk7CgogICAgICAgIGlmIChpZCAmJiBzcmMgPT09ICdsb2NhbCcpIHsKICAgICAgICAgICAgLy8gVXBkYXRlIGxvY2FsCiAgICAgICAgICAgIHZhciBpdGVtID0gKGFwcERhdGEuY2FsZW5kYXJ8fFtdKS5maW5kKGZ1bmN0aW9uKGMpeyByZXR1cm4gYy5pZC50b1N0cmluZygpPT09aWQudG9TdHJpbmcoKTsgfSk7CiAgICAgICAgICAgIGlmIChpdGVtKSB7IGl0ZW0uZGF0ZSA9IGRhdGU7IGl0ZW0udGFzayA9IHRhc2s7IGl0ZW0udGltZSA9IHRpbWU7IGl0ZW0uZW5kVGltZSA9IGVuZFRpbWU7IH0KICAgICAgICAgICAgc2F2ZURhdGEoKTsKICAgICAgICB9IGVsc2UgaWYgKGlkICYmIHNyYyA9PT0gJ2djYWwnKSB7CiAgICAgICAgICAgIHdpbmRvdy5wYXJlbnQucG9zdE1lc3NhZ2Uoe3R5cGU6J3BpbG90ZS1nY2FsLXVwZGF0ZScsIGV2ZW50SWQ6aWQsIGNhbElkOmNhbElkLCB0aXRsZTp0YXNrLCBkYXRlOmRhdGUsIHRpbWU6dGltZSwgZW5kVGltZTplbmRUaW1lfSwgJyonKTsKICAgICAgICB9IGVsc2UgaWYgKGlkICYmIHNyYyA9PT0gJ291dGxvb2snKSB7CiAgICAgICAgICAgIHdpbmRvdy5wYXJlbnQucG9zdE1lc3NhZ2Uoe3R5cGU6J3BpbG90ZS1vdXRsb29rLXVwZGF0ZScsIGV2ZW50SWQ6aWQsIGNhbElkOmNhbElkLCB0aXRsZTp0YXNrLCBkYXRlOmRhdGUsIHRpbWU6dGltZSwgZW5kVGltZTplbmRUaW1lfSwgJyonKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAvLyBOZXcgZXZlbnQKICAgICAgICAgICAgdmFyIGRlc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdpbnB1dFtuYW1lPSJ1Y2FsLWRlc3QiXTpjaGVja2VkJyk7CiAgICAgICAgICAgIHZhciBkZXN0VmFsID0gZGVzdCA/IGRlc3QudmFsdWUgOiAnbG9jYWwnOwogICAgICAgICAgICBpZiAoZGVzdFZhbCA9PT0gJ2xvY2FsJykgewogICAgICAgICAgICAgICAgYXBwRGF0YS5jYWxlbmRhci5wdXNoKHtpZDpEYXRlLm5vdygpLnRvU3RyaW5nKCksIGRhdGU6ZGF0ZSwgdGFzazp0YXNrLCB0aW1lOnRpbWUsIGVuZFRpbWU6ZW5kVGltZX0pOwogICAgICAgICAgICAgICAgc2F2ZURhdGEoKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHZhciB0YXJnZXRDYWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndWNhbC1nY2FsLXRhcmdldCcpLnZhbHVlOwogICAgICAgICAgICAgICAgaWYgKCF0YXJnZXRDYWwpIHJldHVybiBhbGVydCgnU8OpbGVjdGlvbm5leiB1biBhZ2VuZGEgR29vZ2xlJyk7CiAgICAgICAgICAgICAgICB2YXIgZGVzdFZhbDIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdpbnB1dFtuYW1lPSJ1Y2FsLWRlc3QiXTpjaGVja2VkJykudmFsdWU7CiAgICAgICAgICAgICAgICBpZiAoZGVzdFZhbDIgPT09ICdnY2FsJykgewogICAgICAgICAgICAgICAgICAgIHdpbmRvdy5wYXJlbnQucG9zdE1lc3NhZ2Uoe3R5cGU6J3BpbG90ZS1nY2FsLWFkZCcsIGNhbElkOnRhcmdldENhbCwgdGl0bGU6dGFzaywgZGF0ZTpkYXRlLCB0aW1lOnRpbWUsIGVuZFRpbWU6ZW5kVGltZX0sICcqJyk7CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGRlc3RWYWwyID09PSAnb3V0bG9vaycpIHsKICAgICAgICAgICAgICAgICAgICB3aW5kb3cucGFyZW50LnBvc3RNZXNzYWdlKHt0eXBlOidwaWxvdGUtb3V0bG9vay1hZGQnLCBjYWxJZDp0YXJnZXRDYWwsIHRpdGxlOnRhc2ssIGRhdGU6ZGF0ZSwgdGltZTp0aW1lLCBlbmRUaW1lOmVuZFRpbWV9LCAnKicpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGNsb3NlVWNhbE1vZGFsKCk7CiAgICAgICAgcmVuZGVyVW5pZmllZENhbCgpOwogICAgICAgIGlmKHR5cGVvZiBjaGVja0RhaWx5VGFza3MgPT09ICdmdW5jdGlvbicpIGNoZWNrRGFpbHlUYXNrcygpOwogICAgfQoKICAgIGZ1bmN0aW9uIGRlbGV0ZVVjYWxFdmVudChpZCwgc3JjLCBjYWxJZCkgewogICAgICAgIGlmICghY29uZmlybSgnU3VwcHJpbWVyIGNldCDDqXbDqW5lbWVudCA/JykpIHJldHVybjsKICAgICAgICBpZiAoc3JjID09PSAnbG9jYWwnKSB7CiAgICAgICAgICAgIGFwcERhdGEuY2FsZW5kYXIgPSAoYXBwRGF0YS5jYWxlbmRhcnx8W10pLmZpbHRlcihmdW5jdGlvbihjKXsgcmV0dXJuIGMuaWQudG9TdHJpbmcoKSE9PWlkLnRvU3RyaW5nKCk7IH0pOwogICAgICAgICAgICBzYXZlRGF0YSgpOwogICAgICAgICAgICByZW5kZXJVbmlmaWVkQ2FsKCk7CiAgICAgICAgICAgIGlmKHR5cGVvZiBjaGVja0RhaWx5VGFza3MgPT09ICdmdW5jdGlvbicpIGNoZWNrRGFpbHlUYXNrcygpOwogICAgICAgIH0gZWxzZSBpZiAoc3JjID09PSAnZ2NhbCcpIHsKICAgICAgICAgICAgd2luZG93LnBhcmVudC5wb3N0TWVzc2FnZSh7dHlwZToncGlsb3RlLWdjYWwtZGVsZXRlJywgZXZlbnRJZDppZCwgY2FsSWQ6Y2FsSWR9LCAnKicpOwogICAgICAgICAgICBfZ2NhbEV2ZW50cyA9IF9nY2FsRXZlbnRzLmZpbHRlcihmdW5jdGlvbihlKXsgcmV0dXJuIGUuaWQgIT09IGlkOyB9KTsKICAgICAgICAgICAgcmVuZGVyVW5pZmllZENhbCgpOwogICAgICAgIH0gZWxzZSBpZiAoc3JjID09PSAnb3V0bG9vaycpIHsKICAgICAgICAgICAgd2luZG93LnBhcmVudC5wb3N0TWVzc2FnZSh7dHlwZToncGlsb3RlLW91dGxvb2stZGVsZXRlJywgZXZlbnRJZDppZCwgY2FsSWQ6Y2FsSWR9LCAnKicpOwogICAgICAgICAgICBfb3V0bG9va0V2ZW50cyA9IF9vdXRsb29rRXZlbnRzLmZpbHRlcihmdW5jdGlvbihlKXsgcmV0dXJuIGUuaWQgIT09IGlkOyB9KTsKICAgICAgICAgICAgcmVuZGVyVW5pZmllZENhbCgpOwogICAgICAgIH0KICAgIH0KCiAgICAvLyBPdmVycmlkZSBvbGQgcmVuZGVyQ2FsZW5kYXIgdG8gdXNlIHVuaWZpZWQKICAgIGZ1bmN0aW9uIHJlbmRlckNhbGVuZGFyKCkgeyByZW5kZXJVbmlmaWVkQ2FsKCk7IH0KCiAgICBmdW5jdGlvbiBtYWpWYWNhbmNlcygpIHsKICAgICAgICB2YXIgem9uZSA9IChhcHBEYXRhLnNldHRpbmdzICYmIGFwcERhdGEuc2V0dGluZ3Muem9uZSkgfHwgJ0InOwogICAgICAgIHZhciB6b25lTmFtZSA9ICdab25lICcgKyB6b25lOwoKICAgICAgICAvLyBEw6l0ZXJtaW5lciBsJ2FubsOpZSBzY29sYWlyZSBjb3VyYW50ZSAoc2VwdCDDoCBhb8O7dCkKICAgICAgICB2YXIgbm93ID0gbmV3IERhdGUoKTsKICAgICAgICB2YXIgeWVhciA9IG5vdy5nZXRNb250aCgpID49IDggPyBub3cuZ2V0RnVsbFllYXIoKSA6IG5vdy5nZXRGdWxsWWVhcigpIC0gMTsKICAgICAgICB2YXIgYW5uZWVTY28gPSB5ZWFyICsgJy0nICsgKHllYXIgKyAxKTsKCiAgICAgICAgLy8gSm91cnMgZsOpcmnDqXMgZnJhbsOnYWlzIChjYWxjdWzDqXMgZHluYW1pcXVlbWVudCkKICAgICAgICBmdW5jdGlvbiBqb3Vyc0Zlcmllcyh5KSB7CiAgICAgICAgICAgIC8vIENhbGN1bCBkZSBQw6JxdWVzIChhbGdvcml0aG1lIGRlIE1lZXVzKQogICAgICAgICAgICB2YXIgYT15JTE5LCBiPU1hdGguZmxvb3IoeS8xMDApLCBjPXklMTAwLCBkPU1hdGguZmxvb3IoYi80KSwgZT1iJTQ7CiAgICAgICAgICAgIHZhciBmPU1hdGguZmxvb3IoKGIrOCkvMjUpLCBnPU1hdGguZmxvb3IoKGItZisxKS8zKSwgaD0oMTkqYStiLWQtZysxNSklMzA7CiAgICAgICAgICAgIHZhciBpPU1hdGguZmxvb3IoYy80KSwgaz1jJTQsIGw9KDMyKzIqZSsyKmktaC1rKSU3OwogICAgICAgICAgICB2YXIgbT1NYXRoLmZsb29yKChhKzExKmgrMjIqbCkvNDUxKSwgbW9udGg9TWF0aC5mbG9vcigoaCtsLTcqbSsxMTQpLzMxKS0xOwogICAgICAgICAgICB2YXIgZGF5PShoK2wtNyptKzExNCklMzErMTsKICAgICAgICAgICAgdmFyIHBhcXVlcyA9IG5ldyBEYXRlKHksIG1vbnRoLCBkYXkpOwogICAgICAgICAgICB2YXIgdG9JU08gPSBmdW5jdGlvbihkKXsgcmV0dXJuIGQudG9JU09TdHJpbmcoKS5zcGxpdCgnVCcpWzBdOyB9OwogICAgICAgICAgICB2YXIgYWRkRGF5cyA9IGZ1bmN0aW9uKGQsbil7IHZhciByPW5ldyBEYXRlKGQpOyByLnNldERhdGUoci5nZXREYXRlKCkrbik7IHJldHVybiByOyB9OwogICAgICAgICAgICByZXR1cm4gWwogICAgICAgICAgICAgICAge25hbWU6J0pvdXIgZGUgbFwnQW4nLCBkYXRlOnRvSVNPKG5ldyBEYXRlKHksMCwxKSl9LAogICAgICAgICAgICAgICAge25hbWU6J0x1bmRpIGRlIFDDonF1ZXMnLCBkYXRlOnRvSVNPKGFkZERheXMocGFxdWVzLDEpKX0sCiAgICAgICAgICAgICAgICB7bmFtZTonRsOqdGUgZHUgVHJhdmFpbCcsIGRhdGU6dG9JU08obmV3IERhdGUoeSw0LDEpKX0sCiAgICAgICAgICAgICAgICB7bmFtZTonVmljdG9pcmUgMTk0NScsIGRhdGU6dG9JU08obmV3IERhdGUoeSw0LDgpKX0sCiAgICAgICAgICAgICAgICB7bmFtZTonQXNjZW5zaW9uJywgZGF0ZTp0b0lTTyhhZGREYXlzKHBhcXVlcywzOSkpfSwKICAgICAgICAgICAgICAgIHtuYW1lOidMdW5kaSBkZSBQZW50ZWPDtHRlJywgZGF0ZTp0b0lTTyhhZGREYXlzKHBhcXVlcyw1MCkpfSwKICAgICAgICAgICAgICAgIHtuYW1lOidGw6p0ZSBOYXRpb25hbGUnLCBkYXRlOnRvSVNPKG5ldyBEYXRlKHksNiwxNCkpfSwKICAgICAgICAgICAgICAgIHtuYW1lOidBc3NvbXB0aW9uJywgZGF0ZTp0b0lTTyhuZXcgRGF0ZSh5LDcsMTUpKX0sCiAgICAgICAgICAgICAgICB7bmFtZTonVG91c3NhaW50JywgZGF0ZTp0b0lTTyhuZXcgRGF0ZSh5LDEwLDEpKX0sCiAgICAgICAgICAgICAgICB7bmFtZTonQXJtaXN0aWNlJywgZGF0ZTp0b0lTTyhuZXcgRGF0ZSh5LDEwLDExKSl9LAogICAgICAgICAgICAgICAge25hbWU6J05vw6tsJywgZGF0ZTp0b0lTTyhuZXcgRGF0ZSh5LDExLDI1KSl9CiAgICAgICAgICAgIF07CiAgICAgICAgfQoKICAgICAgICAvLyBUZW50ZXIgbGUgZmV0Y2ggQVBJIG9mZmljaWVsbGUKICAgICAgICB2YXIgYXBpVXJsID0gJ2h0dHBzOi8vZGF0YS5lZHVjYXRpb24uZ291di5mci9hcGkvZXhwbG9yZS92Mi4xL2NhdGFsb2cvZGF0YXNldHMvZnItZW4tY2FsZW5kcmllci1zY29sYWlyZS9yZWNvcmRzP3doZXJlPWFubmVlX3Njb2xhaXJlJTNEJTIyJyArIGFubmVlU2NvICsgJyUyMiUyMEFORCUyMCh6b25lcyUzRCUyMicgKyB6b25lTmFtZSArICclMjIlMjBPUiUyMHpvbmVzJTNEJTIyRnJhbmNlJTIwZW50acOocmUlMjIpJmxpbWl0PTUwJm9yZGVyX2J5PXN0YXJ0X2RhdGUnOwoKICAgICAgICB2YXIgYnRuID0gZXZlbnQgJiYgZXZlbnQudGFyZ2V0ID8gZXZlbnQudGFyZ2V0LmNsb3Nlc3QoJ2J1dHRvbicpIDogbnVsbDsKICAgICAgICBpZiAoYnRuKSB7IGJ0bi5kaXNhYmxlZCA9IHRydWU7IGJ0bi5pbm5lckhUTUwgPSAnPGkgY2xhc3M9ImZhcyBmYS1zcGlubmVyIGZhLXNwaW4iPjwvaT4gQ2hhcmdlbWVudC4uLic7IH0KCiAgICAgICAgZmV0Y2goYXBpVXJsKS50aGVuKGZ1bmN0aW9uKHIpIHsKICAgICAgICAgICAgaWYgKCFyLm9rKSB0aHJvdyBuZXcgRXJyb3IoJ0hUVFAgJyArIHIuc3RhdHVzKTsKICAgICAgICAgICAgcmV0dXJuIHIuanNvbigpOwogICAgICAgIH0pLnRoZW4oZnVuY3Rpb24oZGF0YSkgewogICAgICAgICAgICBpZiAoIWRhdGEucmVzdWx0cyB8fCAhZGF0YS5yZXN1bHRzLmxlbmd0aCkgdGhyb3cgbmV3IEVycm9yKCdBdWN1bmUgZG9ubsOpZScpOwoKICAgICAgICAgICAgLy8gU3VwcHJpbWVyIGFuY2llbm5lcyBlbnRyw6llcwogICAgICAgICAgICBhcHBEYXRhLmNhbGVuZGFyID0gYXBwRGF0YS5jYWxlbmRhci5maWx0ZXIoZnVuY3Rpb24oYykgeyByZXR1cm4gIWMudmFjT2ZmaWNpZWw7IH0pOwogICAgICAgICAgICB2YXIgYWRkZWQgPSAwOwoKICAgICAgICAgICAgZGF0YS5yZXN1bHRzLmZvckVhY2goZnVuY3Rpb24ocmVjKSB7CiAgICAgICAgICAgICAgICB2YXIgZGVzYyA9IHJlYy5kZXNjcmlwdGlvbiB8fCAnJzsKICAgICAgICAgICAgICAgIHZhciBzdGFydCA9IChyZWMuc3RhcnRfZGF0ZSB8fCAnJykuc3BsaXQoJ1QnKVswXTsKICAgICAgICAgICAgICAgIHZhciBlbmQgPSAocmVjLmVuZF9kYXRlIHx8ICcnKS5zcGxpdCgnVCcpWzBdOwogICAgICAgICAgICAgICAgaWYgKCFzdGFydCB8fCAhZW5kKSByZXR1cm47CgogICAgICAgICAgICAgICAgdmFyIGlkID0gJ3ZhY18nICsgZGVzYy5yZXBsYWNlKC9bXmEtekEtWjAtOV0vZywnXycpICsgJ18nICsgc3RhcnQ7CiAgICAgICAgICAgICAgICBpZiAoIWFwcERhdGEuY2FsZW5kYXIuc29tZShmdW5jdGlvbihjKXsgcmV0dXJuIGMuaWQgPT09IGlkOyB9KSkgewogICAgICAgICAgICAgICAgICAgIGFwcERhdGEuY2FsZW5kYXIucHVzaCh7aWQ6IGlkLCBkYXRlOiBzdGFydCwgdGFzazogJ1x1ezFGM0Q2fSBEw6lidXQgJyArIGRlc2MgKyAnICgnICsgem9uZU5hbWUgKyAnKScsIHZhY09mZmljaWVsOiB0cnVlfSk7CiAgICAgICAgICAgICAgICAgICAgYXBwRGF0YS5jYWxlbmRhci5wdXNoKHtpZDogaWQrJ19lbmQnLCBkYXRlOiBlbmQsIHRhc2s6ICdcdXsxRjREQX0gUmVwcmlzZSAnICsgZGVzYyArICcgKCcgKyB6b25lTmFtZSArICcpJywgdmFjT2ZmaWNpZWw6IHRydWV9KTsKICAgICAgICAgICAgICAgICAgICBhZGRlZCsrOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIC8vIEFqb3V0ZXIgam91cnMgZsOpcmnDqXMgcG91ciBsZXMgMiBhbm7DqWVzIGNpdmlsZXMKICAgICAgICAgICAgW3llYXIsIHllYXIrMV0uZm9yRWFjaChmdW5jdGlvbih5KSB7CiAgICAgICAgICAgICAgICBqb3Vyc0Zlcmllcyh5KS5mb3JFYWNoKGZ1bmN0aW9uKGpmKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKGpmLmRhdGUgPj0geWVhcisnLTA5LTAxJyAmJiBqZi5kYXRlIDw9ICh5ZWFyKzEpKyctMDgtMzEnKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBmaWQgPSAnZmVyaWVfJyArIGpmLmRhdGU7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghYXBwRGF0YS5jYWxlbmRhci5zb21lKGZ1bmN0aW9uKGMpeyByZXR1cm4gYy5pZCA9PT0gZmlkOyB9KSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgYXBwRGF0YS5jYWxlbmRhci5wdXNoKHtpZDogZmlkLCBkYXRlOiBqZi5kYXRlLCB0YXNrOiAnXHV7MUYxRUJ9XHV7MUYxRjd9ICcgKyBqZi5uYW1lLCB2YWNPZmZpY2llbDogdHJ1ZX0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYWRkZWQrKzsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIC8vIE1BSiBzZW1haW5lcyB2YWNhbmNlcyBwb3VyIEdhbnR0CiAgICAgICAgICAgIHVwZGF0ZVZhY1dlZWtzRnJvbUFQSShkYXRhLnJlc3VsdHMsIHpvbmUpOwoKICAgICAgICAgICAgc2F2ZURhdGEoKTsgcmVuZGVyQ2FsZW5kYXIoKTsKICAgICAgICAgICAgaWYodHlwZW9mIGNoZWNrRGFpbHlUYXNrcyA9PT0gJ2Z1bmN0aW9uJykgY2hlY2tEYWlseVRhc2tzKCk7CiAgICAgICAgICAgIGFsZXJ0KCdcdTI3MDUgQ2FsZW5kcmllciAnICsgYW5uZWVTY28gKyAnIG1pcyDDoCBqb3VyICFcblxuJyArIHpvbmVOYW1lICsgJyDigJQgJyArIGFkZGVkICsgJyBlbnRyw6llKHMpIGFqb3V0w6llKHMpXG5cblNvdXJjZSA6IGRhdGEuZWR1Y2F0aW9uLmdvdXYuZnIgKEFQSSBvZmZpY2llbGxlKScpOwogICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uKGVycikgewogICAgICAgICAgICBjb25zb2xlLndhcm4oJ0FQSSBpbmRpc3BvbmlibGUsIGZhbGxiYWNrIGRvbm7DqWVzIGxvY2FsZXM6JywgZXJyKTsKICAgICAgICAgICAgbWFqVmFjYW5jZXNGYWxsYmFjayh6b25lLCB6b25lTmFtZSk7CiAgICAgICAgfSkuZmluYWxseShmdW5jdGlvbigpIHsKICAgICAgICAgICAgaWYgKGJ0bikgeyBidG4uZGlzYWJsZWQgPSBmYWxzZTsgYnRuLmlubmVySFRNTCA9ICc8aSBjbGFzcz0iZmFzIGZhLXN5bmMiPjwvaT4gTUFKIFZhY2FuY2VzJzsgfQogICAgICAgIH0pOwogICAgfQoKICAgIGZ1bmN0aW9uIHVwZGF0ZVZhY1dlZWtzRnJvbUFQSShyZXN1bHRzLCB6b25lKSB7CiAgICAgICAgdmFyIG5ld1ZBQyA9IHthbGw6W10sIEE6W10sIEI6W10sIEM6W119OwogICAgICAgIHJlc3VsdHMuZm9yRWFjaChmdW5jdGlvbihyZWMpIHsKICAgICAgICAgICAgdmFyIHN0YXJ0ID0gcmVjLnN0YXJ0X2RhdGUgPyBuZXcgRGF0ZShyZWMuc3RhcnRfZGF0ZSkgOiBudWxsOwogICAgICAgICAgICB2YXIgZW5kID0gcmVjLmVuZF9kYXRlID8gbmV3IERhdGUocmVjLmVuZF9kYXRlKSA6IG51bGw7CiAgICAgICAgICAgIGlmICghc3RhcnQgfHwgIWVuZCkgcmV0dXJuOwogICAgICAgICAgICB2YXIgem9uZXMgPSByZWMuem9uZXMgfHwgJyc7CiAgICAgICAgICAgIGZvciAodmFyIGQgPSBuZXcgRGF0ZShzdGFydCk7IGQgPCBlbmQ7IGQuc2V0RGF0ZShkLmdldERhdGUoKSs3KSkgewogICAgICAgICAgICAgICAgdmFyIHcgPSBnZXRJU09XZWVrKGQpOwogICAgICAgICAgICAgICAgaWYgKHpvbmVzLmluZGV4T2YoJ0ZyYW5jZScpID49IDApIHsgaWYgKG5ld1ZBQy5hbGwuaW5kZXhPZih3KTwwKSBuZXdWQUMuYWxsLnB1c2godyk7IH0KICAgICAgICAgICAgICAgIGVsc2UgaWYgKHpvbmVzLmluZGV4T2YoJ0EnKSA+PSAwKSB7IGlmIChuZXdWQUMuQS5pbmRleE9mKHcpPDApIG5ld1ZBQy5BLnB1c2godyk7IH0KICAgICAgICAgICAgICAgIGVsc2UgaWYgKHpvbmVzLmluZGV4T2YoJ0InKSA+PSAwKSB7IGlmIChuZXdWQUMuQi5pbmRleE9mKHcpPDApIG5ld1ZBQy5CLnB1c2godyk7IH0KICAgICAgICAgICAgICAgIGVsc2UgaWYgKHpvbmVzLmluZGV4T2YoJ0MnKSA+PSAwKSB7IGlmIChuZXdWQUMuQy5pbmRleE9mKHcpPDApIG5ld1ZBQy5DLnB1c2godyk7IH0KICAgICAgICAgICAgfQogICAgICAgIH0pOwogICAgICAgIGlmIChuZXdWQUMuYWxsLmxlbmd0aCkgVkFDID0gbmV3VkFDOwogICAgfQoKICAgIGZ1bmN0aW9uIGdldElTT1dlZWsoZCkgewogICAgICAgIHZhciBkYXRlID0gbmV3IERhdGUoZC5nZXRUaW1lKCkpOwogICAgICAgIGRhdGUuc2V0SG91cnMoMCwwLDAsMCk7CiAgICAgICAgZGF0ZS5zZXREYXRlKGRhdGUuZ2V0RGF0ZSgpKzMtKGRhdGUuZ2V0RGF5KCkrNiklNyk7CiAgICAgICAgdmFyIHdlZWsxID0gbmV3IERhdGUoZGF0ZS5nZXRGdWxsWWVhcigpLDAsNCk7CiAgICAgICAgcmV0dXJuIDErTWF0aC5yb3VuZCgoKGRhdGUuZ2V0VGltZSgpLXdlZWsxLmdldFRpbWUoKSkvODY0MDAwMDAtMysod2VlazEuZ2V0RGF5KCkrNiklNykvNyk7CiAgICB9CgogICAgZnVuY3Rpb24gbWFqVmFjYW5jZXNGYWxsYmFjayh6b25lLCB6b25lTmFtZSkgewogICAgICAgIHZhciBWQUNBTkNFUyA9IHsKICAgICAgICAgICAgYWxsOlt7bmFtZTonVG91c3NhaW50JyxzdGFydDonMjAyNS0xMC0xOCcsZW5kOicyMDI1LTExLTAzJ30se25hbWU6J05vw6tsJyxzdGFydDonMjAyNS0xMi0yMCcsZW5kOicyMDI2LTAxLTA1J30se25hbWU6J0FzY2Vuc2lvbicsc3RhcnQ6JzIwMjYtMDUtMTMnLGVuZDonMjAyNi0wNS0xOCd9LHtuYW1lOifDiXTDqScsc3RhcnQ6JzIwMjYtMDctMDQnLGVuZDonMjAyNi0wOS0wMSd9XSwKICAgICAgICAgICAgQTpbe25hbWU6J0hpdmVyJyxzdGFydDonMjAyNi0wMi0wNycsZW5kOicyMDI2LTAyLTIzJ30se25hbWU6J1ByaW50ZW1wcycsc3RhcnQ6JzIwMjYtMDQtMDQnLGVuZDonMjAyNi0wNC0yMCd9XSwKICAgICAgICAgICAgQjpbe25hbWU6J0hpdmVyJyxzdGFydDonMjAyNi0wMi0xNCcsZW5kOicyMDI2LTAzLTAyJ30se25hbWU6J1ByaW50ZW1wcycsc3RhcnQ6JzIwMjYtMDQtMTEnLGVuZDonMjAyNi0wNC0yNyd9XSwKICAgICAgICAgICAgQzpbe25hbWU6J0hpdmVyJyxzdGFydDonMjAyNi0wMi0yMScsZW5kOicyMDI2LTAzLTA5J30se25hbWU6J1ByaW50ZW1wcycsc3RhcnQ6JzIwMjYtMDQtMTgnLGVuZDonMjAyNi0wNS0wNCd9XQogICAgICAgIH07CiAgICAgICAgYXBwRGF0YS5jYWxlbmRhciA9IGFwcERhdGEuY2FsZW5kYXIuZmlsdGVyKGZ1bmN0aW9uKGMpeyByZXR1cm4gIWMudmFjT2ZmaWNpZWw7IH0pOwogICAgICAgIHZhciBwZXJpb2RzID0gVkFDQU5DRVMuYWxsLmNvbmNhdChWQUNBTkNFU1t6b25lXXx8W10pOwogICAgICAgIHZhciBhZGRlZCA9IDA7CiAgICAgICAgcGVyaW9kcy5mb3JFYWNoKGZ1bmN0aW9uKHYpIHsKICAgICAgICAgICAgdmFyIGlkID0gJ3ZhY18nK3YubmFtZS5yZXBsYWNlKC9ccy9nLCdfJykrJ18nK3Yuc3RhcnQ7CiAgICAgICAgICAgIGFwcERhdGEuY2FsZW5kYXIucHVzaCh7aWQ6aWQsZGF0ZTp2LnN0YXJ0LHRhc2s6J1x1ezFGM0Q2fSBEw6lidXQgVmFjLiAnK3YubmFtZSsnICgnK3pvbmVOYW1lKycpJyx2YWNPZmZpY2llbDp0cnVlfSk7CiAgICAgICAgICAgIGFwcERhdGEuY2FsZW5kYXIucHVzaCh7aWQ6aWQrJ19lbmQnLGRhdGU6di5lbmQsdGFzazonXHV7MUY0REF9IFJlcHJpc2UgJyt2Lm5hbWUrJyAoJyt6b25lTmFtZSsnKScsdmFjT2ZmaWNpZWw6dHJ1ZX0pOwogICAgICAgICAgICBhZGRlZCsrOwogICAgICAgIH0pOwogICAgICAgIHZhciBuZXdWQUMgPSB7YWxsOls0Myw0NCw1MiwxXSxBOls3LDgsMTUsMTZdLEI6WzgsOSwxNiwxN10sQzpbOSwxMCwxNywxOF19OwogICAgICAgIFZBQyA9IG5ld1ZBQzsKICAgICAgICBzYXZlRGF0YSgpOyByZW5kZXJDYWxlbmRhcigpOwogICAgICAgIGlmKHR5cGVvZiBjaGVja0RhaWx5VGFza3MgPT09ICdmdW5jdGlvbicpIGNoZWNrRGFpbHlUYXNrcygpOwogICAgICAgIGFsZXJ0KCdcdTI3MDUgQ2FsZW5kcmllciBtaXMgw6Agam91ciAoZG9ubsOpZXMgaW50w6lncsOpZXMpXG5cbicgKyB6b25lTmFtZSArICcg4oCUICcgKyBhZGRlZCArICcgcMOpcmlvZGUocylcblxu4pqgIEFQSSBpbmRpc3BvbmlibGUsIGRvbm7DqWVzIDIwMjUtMjAyNiB1dGlsaXPDqWVzLicpOwogICAgfQoKCiAgICAKICAgIC8vIOKVkOKVkOKVkCBQUk9Dw4lEVVJFUyDilZDilZDilZAKICAgIHZhciBQUk9DX0NPTE9SUz17QTonIzNCODJGNicsQjonIzhCNUNGNicsQzonI0VDNDg5OScsRDonI0VGNDQ0NCcsRTonI0Y5NzMxNicsRjonIzZCNzI4MCcsRzonIzZCNzI4MCcsSDonIzZCNzI4MCcsSTonI0VBQjMwOCcsSjonIzZCNzI4MCcsSzonIzZCNzI4MCcsTDonIzZCNzI4MCcsTTonIzZCNzI4MCcsTjonIzIyQzU1RScsTzonIzEwQjk4MScsUDonIzYzNjZGMScsUTonIzZCNzI4MCcsUjonI0E4NTVGNycsUzonI0ZCNzE4NScsVDonIzZCNzI4MCcsVTonIzZCNzI4MCcsVjonIzZCNzI4MCcsVzonIzZCNzI4MCcsWDonIzZCNzI4MCcsWTonIzZCNzI4MCcsWjonIzZCNzI4MCd9OwogICAgZnVuY3Rpb24gZ2V0UHJvY0NvbG9yKGNvZGUpe2lmKCFjb2RlKXJldHVybicjODg4Jzt2YXIgYz1jb2RlLnRyaW0oKS50b1VwcGVyQ2FzZSgpO2lmKGMuaW5kZXhPZignUE8nKT09PTApcmV0dXJuJyMwNkI2RDQnO2lmKGMuaW5kZXhPZignUkgnKT09PTApcmV0dXJuJyNBODU1RjcnO3ZhciBsPWMuY2hhckF0KDApO3JldHVybiBQUk9DX0NPTE9SU1tsXXx8JyM4ODgnO30KICAgIHdpbmRvdy53aW5kb3cuX3Byb2NFZGl0SWQ9bnVsbDsKICAgIGZ1bmN0aW9uIG9wZW5Qcm9jTW9kYWwoaWQpewogICAgICAgIHdpbmRvdy5fcHJvY0VkaXRJZD1pZHx8bnVsbDsKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJvY01vZC10aXRsZScpLnRleHRDb250ZW50PWlkPydNb2RpZmllciBsYSBwcm9jw6lkdXJlJzonTm91dmVsbGUgcHJvY8OpZHVyZSc7CiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Byb2MtZGVsLWJ0bicpLnN0eWxlLmRpc3BsYXk9aWQ/Jyc6J25vbmUnOwogICAgICAgIGlmKGlkKXsKICAgICAgICAgICAgdmFyIHA9KGFwcERhdGEucHJvY2VkdXJlc3x8W10pLmZpbmQoZnVuY3Rpb24oeCl7cmV0dXJuIHguaWQ9PT1pZDt9KTsKICAgICAgICAgICAgaWYocCl7CiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJvYy1jb2RlJykudmFsdWU9cC5jb2RlfHwnJzsKICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcm9jLXRpdGxlJykudmFsdWU9cC50aXRsZXx8Jyc7CiAgICAgICAgICAgICAgICB2YXIgc2VsPWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcm9jLWNhdCcpOwogICAgICAgICAgICAgICAgdmFyIGZvdW5kPWZhbHNlOwogICAgICAgICAgICAgICAgZm9yKHZhciBpPTA7aTxzZWwub3B0aW9ucy5sZW5ndGg7aSsrKXtpZihzZWwub3B0aW9uc1tpXS52YWx1ZT09PXAuY2F0KXtmb3VuZD10cnVlO2JyZWFrO319CiAgICAgICAgICAgICAgICBpZighZm91bmQmJnAuY2F0KXt2YXIgb3B0PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ29wdGlvbicpO29wdC52YWx1ZT1wLmNhdDtvcHQudGV4dD1wLmNhdDtzZWwuaW5zZXJ0QmVmb3JlKG9wdCxzZWwucXVlcnlTZWxlY3Rvcignb3B0aW9uW3ZhbHVlPSJfX25ld19fIl0nKSk7fTsKICAgICAgICAgICAgICAgIHNlbC52YWx1ZT1wLmNhdHx8Jyc7CiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJvYy1hbm5lZScpLmNoZWNrZWQ9ISFwLmFubmVlOwogICAgICAgICAgICAgICAgaWYocC5hbm5lZSl7CiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Byb2Mtd3MnKS52YWx1ZT0nJzsKICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJvYy13ZScpLnZhbHVlPScnOwogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcm9jLXdzJykuZGlzYWJsZWQ9dHJ1ZTsKICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJvYy13ZScpLmRpc2FibGVkPXRydWU7CiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Byb2Mtd3MnKS5zdHlsZS5vcGFjaXR5PScuNCc7CiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Byb2Mtd2UnKS5zdHlsZS5vcGFjaXR5PScuNCc7CiAgICAgICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJvYy13cycpLnZhbHVlPXAud3N0YXJ0fHwnJzsKICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJvYy13ZScpLnZhbHVlPXAud2VuZHx8Jyc7CiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Byb2Mtd3MnKS5kaXNhYmxlZD1mYWxzZTsKICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJvYy13ZScpLmRpc2FibGVkPWZhbHNlOwogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcm9jLXdzJykuc3R5bGUub3BhY2l0eT0nMSc7CiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Byb2Mtd2UnKS5zdHlsZS5vcGFjaXR5PScxJzsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcm9jLXoyJykuaW5uZXJIVE1MPXAuem9uZTJ8fCcnOwogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Byb2MtejMnKS5pbm5lckhUTUw9cC56b25lM3x8Jyc7CiAgICAgICAgICAgIH0KICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Byb2MtY29kZScpLnZhbHVlPScnOwogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJvYy10aXRsZScpLnZhbHVlPScnOwogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJvYy1jYXQnKS52YWx1ZT0nJzsKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Byb2Mtd3MnKS52YWx1ZT0nJzsKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Byb2Mtd2UnKS52YWx1ZT0nJzsKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Byb2MtYW5uZWUnKS5jaGVja2VkPWZhbHNlOwogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJvYy13cycpLmRpc2FibGVkPWZhbHNlOwogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJvYy13ZScpLmRpc2FibGVkPWZhbHNlOwogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJvYy13cycpLnN0eWxlLm9wYWNpdHk9JzEnOwogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJvYy13ZScpLnN0eWxlLm9wYWNpdHk9JzEnOwogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJvYy16MicpLmlubmVySFRNTD0nJzsKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Byb2MtejMnKS5pbm5lckhUTUw9Jyc7CiAgICAgICAgfQogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcm9jTW9kJykuc3R5bGUuZGlzcGxheT0nZmxleCc7CiAgICB9CiAgICBmdW5jdGlvbiBjbG9zZVByb2NNb2RhbCgpe3ZhciBwbT1kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJvY01vZCcpO3BtLnN0eWxlLmRpc3BsYXk9J25vbmUnO3BtLmNsYXNzTGlzdC5yZW1vdmUoJ29wZW4nKTt3aW5kb3cuX3Byb2NFZGl0SWQ9bnVsbDt9CiAgICBmdW5jdGlvbiBwcm9jSW5zZXJ0SWNvbih0eXBlKXsKICAgICAgICB2YXIgaWNvbnM9e21haWw6JzxzcGFuIGNsYXNzPSJwcm9jLWljb24tbWFpbCI+PGkgY2xhc3M9ImZhcyBmYS1lbnZlbG9wZSI+PC9pPjwvc3Bhbj4nLGFsZXJ0Oic8c3BhbiBjbGFzcz0icHJvYy1pY29uLWFsZXJ0Ij48aSBjbGFzcz0iZmFzIGZhLWV4Y2xhbWF0aW9uIj48L2k+PC9zcGFuPicsaWRlYTonPHNwYW4gY2xhc3M9InByb2MtaWNvbi1pZGVhIj48aSBjbGFzcz0iZmFzIGZhLWxpZ2h0YnVsYiI+PC9pPjwvc3Bhbj4nfTsKICAgICAgICBkb2N1bWVudC5leGVjQ29tbWFuZCgnaW5zZXJ0SFRNTCcsZmFsc2UsaWNvbnNbdHlwZV0rJyZuYnNwOycpOwogICAgfQogICAgZnVuY3Rpb24gc2F2ZVByb2MoKXsKICAgICAgICB0cnl7CiAgICAgICAgdmFyIHJhd0NvZGU9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Byb2MtY29kZScpLnZhbHVlLnRyaW0oKS50b1VwcGVyQ2FzZSgpOwogICAgICAgIHZhciBjb2RlPXJhd0NvZGUucmVwbGFjZSgvXihbQS1aXSspKFxkKS8sJyQxICQyJyk7CiAgICAgICAgdmFyIHRpdGxlPWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcm9jLXRpdGxlJykudmFsdWUudHJpbSgpOwogICAgICAgIGlmKCFjb2RlfHwhdGl0bGUpe2FsZXJ0KCdDb2RlIGV0IHRpdHJlIHJlcXVpcy4nKTtyZXR1cm47fQogICAgICAgIGlmKCFhcHBEYXRhLnByb2NlZHVyZXMpYXBwRGF0YS5wcm9jZWR1cmVzPVtdOwogICAgICAgIHZhciBhbm5lZT1kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJvYy1hbm5lZScpLmNoZWNrZWQ7CiAgICAgICAgdmFyIHdzPWFubmVlPzA6KHBhcnNlSW50KGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcm9jLXdzJykudmFsdWUpfHwwKTsKICAgICAgICB2YXIgd2U9YW5uZWU/MDoocGFyc2VJbnQoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Byb2Mtd2UnKS52YWx1ZSl8fHdzKTsKICAgICAgICB2YXIgb2JqPXtpZDp3aW5kb3cuX3Byb2NFZGl0SWR8fERhdGUubm93KCkudG9TdHJpbmcoKSxjb2RlOmNvZGUsdGl0bGU6dGl0bGUsY2F0OmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcm9jLWNhdCcpLnZhbHVlLHdzdGFydDp3cyx3ZW5kOndlLGFubmVlOmFubmVlLHpvbmUyOmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcm9jLXoyJykuaW5uZXJIVE1MLHpvbmUzOmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcm9jLXozJykuaW5uZXJIVE1MLHVwZGF0ZWQ6bmV3IERhdGUoKS50b0lTT1N0cmluZygpLnNwbGl0KCdUJylbMF19OwogICAgICAgIGlmKHdpbmRvdy5fcHJvY0VkaXRJZCl7dmFyIGlkeD1hcHBEYXRhLnByb2NlZHVyZXMuZmluZEluZGV4KGZ1bmN0aW9uKHgpe3JldHVybiB4LmlkPT09d2luZG93Ll9wcm9jRWRpdElkO30pO2lmKGlkeD49MClhcHBEYXRhLnByb2NlZHVyZXNbaWR4XT1vYmo7fQogICAgICAgIGVsc2V7YXBwRGF0YS5wcm9jZWR1cmVzLnB1c2gob2JqKTt9CiAgICAgICAgc2F2ZURhdGEoKTtjbG9zZVByb2NNb2RhbCgpO3JlbmRlclByb2NlZHVyZXMoKTsKICAgICAgICB9Y2F0Y2goZXJyKXthbGVydCgnRXJyZXVyIHNhdXZlZ2FyZGU6ICcrZXJyLm1lc3NhZ2UpO2NvbnNvbGUuZXJyb3IoZXJyKTt9CiAgICB9CiAgICBmdW5jdGlvbiBkZWxQcm9jKCl7CiAgICAgICAgaWYoIV9wcm9jRWRpdElkKXJldHVybjtpZighY29uZmlybSgnU3VwcHJpbWVyIGNldHRlIHByb2PDqWR1cmUgPycpKXJldHVybjsKICAgICAgICBhcHBEYXRhLnByb2NlZHVyZXM9KGFwcERhdGEucHJvY2VkdXJlc3x8W10pLmZpbHRlcihmdW5jdGlvbih4KXtyZXR1cm4geC5pZCE9PXdpbmRvdy5fcHJvY0VkaXRJZDt9KTsKICAgICAgICBzYXZlRGF0YSgpO2Nsb3NlUHJvY01vZGFsKCk7cmVuZGVyUHJvY2VkdXJlcygpOwogICAgfQogICAgd2luZG93Ll9wcm9jRmlsdGVyQ2F0PScnOwogICAgCiAgICBmdW5jdGlvbiBmb3JtYXREYXRlRlIoZCkgewogICAgICAgIGlmKCFkKSByZXR1cm4gJyc7CiAgICAgICAgdmFyIGR0ID0gKGQgaW5zdGFuY2VvZiBEYXRlKSA/IGQgOiBuZXcgRGF0ZShkKTsKICAgICAgICBpZihpc05hTihkdC5nZXRUaW1lKCkpKSByZXR1cm4gZDsKICAgICAgICByZXR1cm4gZHQudG9Mb2NhbGVEYXRlU3RyaW5nKCdmci1GUicse2RheTonMi1kaWdpdCcsbW9udGg6J2xvbmcnLHllYXI6J251bWVyaWMnfSk7CiAgICB9CgogICAgCiAgICAvLyBBbm7DqWUgc2NvbGFpcmUgY291cmFudGUgKGV4OiAiMjAyNS0yMDI2IikKICAgIGZ1bmN0aW9uIGdldEN1cnJlbnRTY2hvb2xZZWFyKCl7CiAgICAgICAgdmFyIG5vdz1uZXcgRGF0ZSgpLG09bm93LmdldE1vbnRoKCkrMSx5PW5vdy5nZXRGdWxsWWVhcigpOwogICAgICAgIHJldHVybiBtPj04Pyh5KyctJysoeSsxKSk6KCh5LTEpKyctJyt5KTsKICAgIH0KICAgIC8vIEF1dG8tcmVzZXQ6IHLDqXRhYmxpdCBsZXMgcHJvY8OpZHVyZXMgdGVybWluw6llcyBkJ3VuZSBhbm7DqWUgcHLDqWPDqWRlbnRlCiAgICBmdW5jdGlvbiBhdXRvUmVzZXREb25lKCl7CiAgICAgICAgdmFyIHN5PWdldEN1cnJlbnRTY2hvb2xZZWFyKCk7dmFyIGNoYW5nZWQ9ZmFsc2U7CiAgICAgICAgKGFwcERhdGEucHJvY2VkdXJlc3x8W10pLmZvckVhY2goZnVuY3Rpb24ocCl7CiAgICAgICAgICAgIGlmKHAuZG9uZSYmcC5kb25lU1kmJnAuZG9uZVNZIT09c3kpe3AuZG9uZT1mYWxzZTtwLmRvbmVTWT0nJztjaGFuZ2VkPXRydWU7fQogICAgICAgIH0pOwogICAgICAgIChhcHBEYXRhLmdhbnR0fHxbXSkuZm9yRWFjaChmdW5jdGlvbihnKXsKICAgICAgICAgICAgaWYoZy5kb25lJiZnLmRvbmVTWSYmZy5kb25lU1khPT1zeSl7Zy5kb25lPWZhbHNlO2cuZG9uZVNZPScnO2NoYW5nZWQ9dHJ1ZTt9CiAgICAgICAgfSk7CiAgICAgICAgaWYoY2hhbmdlZClzYXZlRGF0YSgpOwogICAgfQoKICAgIGZ1bmN0aW9uIG5hdENvZGVTb3J0KGEsYil7CiAgICAgICAgdmFyIGNhPShhLmNvZGV8fCcnKSxjYj0oYi5jb2RlfHwnJyk7CiAgICAgICAgdmFyIHBhPWNhLm1hdGNoKC9eKFtBLVphLXpdKylccyooXGQqKSQvKXx8WycnLCcnLDBdOwogICAgICAgIHZhciBwYj1jYi5tYXRjaCgvXihbQS1aYS16XSspXHMqKFxkKikkLyl8fFsnJywnJywwXTsKICAgICAgICB2YXIgbGE9cGFbMV0udG9VcHBlckNhc2UoKSxsYj1wYlsxXS50b1VwcGVyQ2FzZSgpOwogICAgICAgIGlmKGxhPGxiKXJldHVybiAtMTtpZihsYT5sYilyZXR1cm4gMTsKICAgICAgICByZXR1cm4ocGFyc2VJbnQocGFbMl0pfHwwKS0ocGFyc2VJbnQocGJbMl0pfHwwKTsKICAgIH0KICAgIGZ1bmN0aW9uIHJlbmRlclByb2NlZHVyZXMoKXsKICAgICAgICB2YXIgcHJvY3M9KGFwcERhdGEucHJvY2VkdXJlc3x8W10pLnNsaWNlKCkuc29ydChuYXRDb2RlU29ydCk7CiAgICAgICAgdmFyIGNhdHM9e307cHJvY3MuZm9yRWFjaChmdW5jdGlvbihwKXtpZihwLmNhdCljYXRzW3AuY2F0XT0oY2F0c1twLmNhdF18fDApKzE7fSk7CiAgICAgICAgdmFyIGZoPSc8YnV0dG9uIGNsYXNzPSInKyghX3Byb2NGaWx0ZXJDYXQ/J2FjdGl2ZSc6JycpKyciIG9uY2xpY2s9Il9wcm9jRmlsdGVyQ2F0PVwnXCc7cmVuZGVyUHJvY2VkdXJlcygpIj5Ub3VzICgnK3Byb2NzLmxlbmd0aCsnKTwvYnV0dG9uPic7CiAgICAgICAgT2JqZWN0LmtleXMoY2F0cykuc29ydCgpLmZvckVhY2goZnVuY3Rpb24oYyl7ZmgrPSc8YnV0dG9uIGNsYXNzPSInKyhfcHJvY0ZpbHRlckNhdD09PWM/J2FjdGl2ZSc6JycpKyciIG9uY2xpY2s9Il9wcm9jRmlsdGVyQ2F0PVwnJytjLnJlcGxhY2UoLycvZywiXFwnIikrJ1wnO3JlbmRlclByb2NlZHVyZXMoKSI+JytjKycgKCcrY2F0c1tjXSsnKTwvYnV0dG9uPic7fSk7CiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Byb2MtZmlsdGVycycpLmlubmVySFRNTD1maDsKICAgICAgICB2YXIgZmlsdGVyZWQ9X3Byb2NGaWx0ZXJDYXQ/cHJvY3MuZmlsdGVyKGZ1bmN0aW9uKHApe3JldHVybiBwLmNhdD09PV9wcm9jRmlsdGVyQ2F0O30pOnByb2NzOwogICAgICAgIHZhciBoPScnOwogICAgICAgIGlmKCFmaWx0ZXJlZC5sZW5ndGgpe2g9JzxkaXYgc3R5bGU9InRleHQtYWxpZ246Y2VudGVyO3BhZGRpbmc6NDBweDtjb2xvcjojOTk5Ij48aSBjbGFzcz0iZmFzIGZhLWJvb2siIHN0eWxlPSJmb250LXNpemU6MnJlbTttYXJnaW4tYm90dG9tOjEwcHg7ZGlzcGxheTpibG9jayI+PC9pPkF1Y3VuZSBwcm9jw6lkdXJlPC9kaXY+Jzt9CiAgICAgICAgZmlsdGVyZWQuZm9yRWFjaChmdW5jdGlvbihwKXsKICAgICAgICAgICAgdmFyIGNvbD1nZXRQcm9jQ29sb3IocC5jb2RlKTsKICAgICAgICAgICAgaCs9JzxkaXYgY2xhc3M9InByb2MtY2FyZCIgb25jbGljaz0idmlld1Byb2MoXCcnK3AuaWQrJ1wnKSIgc3R5bGU9ImRpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXI7Z2FwOjEwcHg7cGFkZGluZzoxMHB4IDE0cHgiPic7CiAgICAgICAgICAgIGgrPSc8c3BhbiBjbGFzcz0icHJvYy1jb2RlIiBzdHlsZT0iYmFja2dyb3VuZDonK2NvbCsnO3BhZGRpbmc6NnB4IDEwcHg7Ym9yZGVyLXJhZGl1czo4cHg7Zm9udC13ZWlnaHQ6NzAwO2ZvbnQtc2l6ZTouOHJlbTtjb2xvcjojZmZmO21pbi13aWR0aDo0MHB4O3RleHQtYWxpZ246Y2VudGVyIj4nKyhwLmNvZGV8fCc/JykrJzwvc3Bhbj4nOwogICAgICAgICAgICBoKz0nPHNwYW4gc3R5bGU9ImZvbnQtd2VpZ2h0OjYwMDtmb250LXNpemU6Ljg4cmVtO2NvbG9yOiMzMzM7ZmxleDoxO3doaXRlLXNwYWNlOm5vd3JhcDtvdmVyZmxvdzpoaWRkZW47dGV4dC1vdmVyZmxvdzplbGxpcHNpcyI+JysocC50aXRsZXx8J1NhbnMgdGl0cmUnKSsnPC9zcGFuPic7CiAgICAgICAgICAgIGgrPSc8c3BhbiBzdHlsZT0iZm9udC1zaXplOi43MnJlbTtjb2xvcjojOTk5O3doaXRlLXNwYWNlOm5vd3JhcCI+Jytmb3JtYXREYXRlRlIocC51cGRhdGVkKSsnPC9zcGFuPic7CiAgICAgICAgICAgIGgrPShwLmNhdD8nPHNwYW4gY2xhc3M9InByb2MtY2FyZC1jYXQiIHN0eWxlPSJ3aGl0ZS1zcGFjZTpub3dyYXAiPicrcC5jYXQrJzwvc3Bhbj4nOicnKTsKICAgICAgICAgICAgaCs9JzxkaXYgY2xhc3M9InByb2MtY2FyZC1hY3Rpb25zIiBzdHlsZT0iZGlzcGxheTpmbGV4O2dhcDo0cHg7bWFyZ2luLWxlZnQ6NHB4Ij48YnV0dG9uIG9uY2xpY2s9ImV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO29wZW5Qcm9jTW9kYWwoXCcnK3AuaWQrJ1wnKSIgdGl0bGU9Ik1vZGlmaWVyIj48aSBjbGFzcz0iZmFzIGZhLXBlbiI+PC9pPjwvYnV0dG9uPic7CiAgICAgICAgICAgIGgrPSc8YnV0dG9uIG9uY2xpY2s9ImV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO3ByaW50UHJvYyhcJycrcC5pZCsnXCcpIiB0aXRsZT0iSW1wcmltZXIiPjxpIGNsYXNzPSJmYXMgZmEtcHJpbnQiPjwvaT48L2J1dHRvbj48L2Rpdj48L2Rpdj4nOwogICAgICAgIH0pOwogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcm9jLWxpc3QnKS5pbm5lckhUTUw9aDsKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJvYy12aWV3LWFyZWEnKS5zdHlsZS5kaXNwbGF5PSdub25lJzsKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJvYy1saXN0Jykuc3R5bGUuZGlzcGxheT0nJzsKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJvYy1maWx0ZXJzJykuc3R5bGUuZGlzcGxheT0nJzsKICAgIH0KICAgIGZ1bmN0aW9uIHZpZXdQcm9jKGlkKXsKICAgICAgICB2YXIgcD0oYXBwRGF0YS5wcm9jZWR1cmVzfHxbXSkuZmluZChmdW5jdGlvbih4KXtyZXR1cm4geC5pZD09PWlkO30pO2lmKCFwKXJldHVybjsKICAgICAgICB2YXIgY29sPWdldFByb2NDb2xvcihwLmNvZGUpOwogICAgICAgIHZhciBoPSc8ZGl2IGNsYXNzPSJwcm9jLXZpZXciPjxkaXYgY2xhc3M9InByb2Mtdmlldy1oZWFkZXIiIHN0eWxlPSJiYWNrZ3JvdW5kOicrY29sKyciPjxoMj4nKyhwLnRpdGxlfHwnJykrJzwvaDI+PGRpdiBjbGFzcz0icHYtY29kZSI+JysocC5jb2RlfHwnJykrKHAuY2F0Pycg4oCUICcrcC5jYXQ6JycpKyc8L2Rpdj48L2Rpdj48ZGl2IGNsYXNzPSJwcm9jLXZpZXctYm9keSI+JzsKICAgICAgICBoKz0nPGRpdiBzdHlsZT0ibWFyZ2luLWJvdHRvbToxNnB4O2Rpc3BsYXk6ZmxleDtnYXA6OHB4Ij48YnV0dG9uIGNsYXNzPSJtYiBtYi1vayIgb25jbGljaz0ib3BlblByb2NNb2RhbChcJycraWQrJ1wnKSI+PGkgY2xhc3M9ImZhcyBmYS1wZW4iPjwvaT4gTW9kaWZpZXI8L2J1dHRvbj48YnV0dG9uIGNsYXNzPSJtYiIgc3R5bGU9ImJhY2tncm91bmQ6IzU1NTtjb2xvcjojZmZmIiBvbmNsaWNrPSJwcmludFByb2MoXCcnK2lkKydcJykiPjxpIGNsYXNzPSJmYXMgZmEtcHJpbnQiPjwvaT4gSW1wcmltZXI8L2J1dHRvbj48YnV0dG9uIGNsYXNzPSJtYiBtYi1jIiBvbmNsaWNrPSJyZW5kZXJQcm9jZWR1cmVzKCkiPjxpIGNsYXNzPSJmYXMgZmEtYXJyb3ctbGVmdCI+PC9pPiBSZXRvdXI8L2J1dHRvbj48L2Rpdj4nOwogICAgICAgIGlmKHAuem9uZTIpaCs9JzxkaXYgY2xhc3M9InByb2Mtem9uZSIgc3R5bGU9ImJvcmRlci1sZWZ0LWNvbG9yOicrY29sKyciPjxoND5BY3Rpb25zIC8gw4l0YXBlczwvaDQ+PGRpdiBjbGFzcz0icHJvYy16b25lLWNvbnRlbnQiPicrcC56b25lMisnPC9kaXY+PC9kaXY+JzsKICAgICAgICBpZihwLnpvbmUzKWgrPSc8ZGl2IGNsYXNzPSJwcm9jLXpvbmUiIHN0eWxlPSJib3JkZXItbGVmdC1jb2xvcjonK2NvbCsnIj48aDQ+Tm90ZXM8L2g0PjxkaXYgY2xhc3M9InByb2Mtem9uZS1jb250ZW50Ij4nK3Auem9uZTMrJzwvZGl2PjwvZGl2Pic7CiAgICAgICAgaCs9JzwvZGl2PjwvZGl2Pic7CiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Byb2Mtdmlldy1hcmVhJykuaW5uZXJIVE1MPWg7CiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Byb2Mtdmlldy1hcmVhJykuc3R5bGUuZGlzcGxheT0nJzsKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJvYy1saXN0Jykuc3R5bGUuZGlzcGxheT0nbm9uZSc7CiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Byb2MtZmlsdGVycycpLnN0eWxlLmRpc3BsYXk9J25vbmUnOwogICAgfQogICAgZnVuY3Rpb24gcHJpbnRQcm9jKGlkKXsKICAgICAgICB2YXIgcD0oYXBwRGF0YS5wcm9jZWR1cmVzfHxbXSkuZmluZChmdW5jdGlvbih4KXtyZXR1cm4geC5pZD09PWlkO30pO2lmKCFwKXJldHVybjsKICAgICAgICB2YXIgY29sPWdldFByb2NDb2xvcihwLmNvZGUpOwogICAgICAgIC8vIExpZ2h0ZW4gY29sb3IgZm9yIHpvbmUgYmcKICAgICAgICBmdW5jdGlvbiBoZXhUb1JnYmEoaGV4LGEpewogICAgICAgICAgICB2YXIgcj1wYXJzZUludChoZXguc2xpY2UoMSwzKSwxNiksZz1wYXJzZUludChoZXguc2xpY2UoMyw1KSwxNiksYj1wYXJzZUludChoZXguc2xpY2UoNSw3KSwxNik7CiAgICAgICAgICAgIHJldHVybidyZ2JhKCcrcisnLCcrZysnLCcrYisnLCcrYSsnKSc7CiAgICAgICAgfQogICAgICAgIHZhciBsaWdodENvbD1oZXhUb1JnYmEoY29sLDAuMik7CiAgICAgICAgdmFyIGxvZ29TcmM9KGFwcERhdGEuc2V0dGluZ3MmJmFwcERhdGEuc2V0dGluZ3MubG9nbyl8fCcnOwogICAgICAgIHZhciB0b2RheT1uZXcgRGF0ZSgpLnRvTG9jYWxlRGF0ZVN0cmluZygnZnItRlInLHtkYXk6JzItZGlnaXQnLG1vbnRoOidsb25nJyx5ZWFyOidudW1lcmljJ30pOwogICAgICAgIHZhciB1c2VyTmFtZT0oYXBwRGF0YS5zZXR0aW5ncyYmYXBwRGF0YS5zZXR0aW5ncy51c2VyKXx8Jyc7CiAgICAgICAgdmFyIGh0bWw9Jyc7CiAgICAgICAgaHRtbCs9JzxzdHlsZT5AcGFnZXtzaXplOkE0O21hcmdpbjo1bW0gNW1tIDI1bW0gNW1tfWJvZHl7bWFyZ2luOjA7cGFkZGluZzowfTwvc3R5bGU+JzsKICAgICAgICBodG1sKz0nPGRpdiBzdHlsZT0iZm9udC1mYW1pbHk6QXJpYWwsc2Fucy1zZXJpZjtwYWRkaW5nLWJvdHRvbToyNW1tIj4nOwogICAgICAgIGh0bWwrPSc8ZGl2IHN0eWxlPSJiYWNrZ3JvdW5kOicrY29sKyc7Y29sb3I6I2ZmZjtwYWRkaW5nOjEwcHggMTRweDstd2Via2l0LXByaW50LWNvbG9yLWFkanVzdDpleGFjdDtwcmludC1jb2xvci1hZGp1c3Q6ZXhhY3Q7dGV4dC1hbGlnbjpyaWdodCI+JzsKICAgICAgICBodG1sKz0nPGgxIHN0eWxlPSJtYXJnaW46MDtmb250LXNpemU6MS4zcmVtO2ZvbnQtd2VpZ2h0OjcwMCI+JytwLmNvZGUrJyAtICcrcC50aXRsZSsnPC9oMT4nOwogICAgICAgIGh0bWwrPSc8L2Rpdj4nOwogICAgICAgIGh0bWwrPSc8ZGl2IHN0eWxlPSJwYWRkaW5nOjhweCAxMHB4O2NvbG9yOiMzMzMiPic7CiAgICAgICAgaWYocC56b25lMil7CiAgICAgICAgaHRtbCs9JzxkaXYgc3R5bGU9Im1hcmdpbjo4cHggMDtwYWRkaW5nOjAiPic7CiAgICAgICAgaHRtbCs9JzxkaXYgc3R5bGU9ImJhY2tncm91bmQ6JytsaWdodENvbCsnO3BhZGRpbmc6OHB4IDE0cHg7Zm9udC13ZWlnaHQ6NzAwO2ZvbnQtc2l6ZTouODVyZW07Y29sb3I6IzMzMzt0ZXh0LXRyYW5zZm9ybTp1cHBlcmNhc2U7bGV0dGVyLXNwYWNpbmc6LjVweDtib3JkZXItcmFkaXVzOjZweCA2cHggMCAwOy13ZWJraXQtcHJpbnQtY29sb3ItYWRqdXN0OmV4YWN0O3ByaW50LWNvbG9yLWFkanVzdDpleGFjdCI+QWN0aW9ucyAvIMOJdGFwZXM8L2Rpdj4nOwogICAgICAgIGh0bWwrPSc8ZGl2IHN0eWxlPSJwYWRkaW5nOjhweCAxNHB4O2ZvbnQtc2l6ZTouOXJlbTtsaW5lLWhlaWdodDoxLjY1O2NvbG9yOiM0NDQ7Ym9yZGVyLWxlZnQ6NHB4IHNvbGlkICcrY29sKyciPicrcC56b25lMisnPC9kaXY+PC9kaXY+Jzt9CiAgICAgICAgaWYocC56b25lMyl7CiAgICAgICAgaHRtbCs9JzxkaXYgc3R5bGU9Im1hcmdpbjo4cHggMDtwYWRkaW5nOjAiPic7CiAgICAgICAgaHRtbCs9JzxkaXYgc3R5bGU9ImJhY2tncm91bmQ6JytsaWdodENvbCsnO3BhZGRpbmc6OHB4IDE0cHg7Zm9udC13ZWlnaHQ6NzAwO2ZvbnQtc2l6ZTouODVyZW07Y29sb3I6IzMzMzt0ZXh0LXRyYW5zZm9ybTp1cHBlcmNhc2U7bGV0dGVyLXNwYWNpbmc6LjVweDtib3JkZXItcmFkaXVzOjZweCA2cHggMCAwOy13ZWJraXQtcHJpbnQtY29sb3ItYWRqdXN0OmV4YWN0O3ByaW50LWNvbG9yLWFkanVzdDpleGFjdCI+Tm90ZXMgLyBSZW1hcnF1ZXM8L2Rpdj4nOwogICAgICAgIGh0bWwrPSc8ZGl2IHN0eWxlPSJwYWRkaW5nOjhweCAxNHB4O2ZvbnQtc2l6ZTouOXJlbTtsaW5lLWhlaWdodDoxLjY1O2NvbG9yOiM0NDQ7Ym9yZGVyLWxlZnQ6NHB4IHNvbGlkICcrY29sKyciPicrcC56b25lMysnPC9kaXY+PC9kaXY+Jzt9CiAgICAgICAgaHRtbCs9JzwvZGl2PjwvZGl2Pic7CiAgICAgICAgaHRtbCs9JzxkaXYgc3R5bGU9InBvc2l0aW9uOmZpeGVkO2JvdHRvbTowO2xlZnQ6MDtyaWdodDowO2Rpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXI7anVzdGlmeS1jb250ZW50OnNwYWNlLWJldHdlZW47cGFkZGluZzo2cHggMTBweDtib3JkZXItdG9wOjJweCBzb2xpZCAjY2NjO2ZvbnQtZmFtaWx5OkFyaWFsLHNhbnMtc2VyaWY7LXdlYmtpdC1wcmludC1jb2xvci1hZGp1c3Q6ZXhhY3Q7cHJpbnQtY29sb3ItYWRqdXN0OmV4YWN0O2JhY2tncm91bmQ6I2ZmZiI+JzsKICAgICAgICBpZihsb2dvU3JjKWh0bWwrPSc8aW1nIHNyYz0iJytsb2dvU3JjKyciIHN0eWxlPSJoZWlnaHQ6MWNtIj4nOwogICAgICAgIGh0bWwrPSc8ZGl2IHN0eWxlPSJ0ZXh0LWFsaWduOnJpZ2h0Ij48ZGl2IHN0eWxlPSJmb250LXNpemU6LjhyZW07Zm9udC13ZWlnaHQ6NjAwO2NvbG9yOiM1NTUiPicrcC5jb2RlKycgLSAnK3AudGl0bGUrJzwvZGl2Pic7CiAgICAgICAgaHRtbCs9JzxkaXYgc3R5bGU9ImZvbnQtc2l6ZTouNjJyZW07Y29sb3I6Izk5OSI+JysodXNlck5hbWU/dXNlck5hbWUrJyAtICc6JycpK3RvZGF5Kyc8L2Rpdj48L2Rpdj4nOwogICAgICAgIGh0bWwrPSc8L2Rpdj4nOwogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcmludC16b25lJykuaW5uZXJIVE1MPWh0bWw7CiAgICAgICAgdmFyIG9sZFRpdGxlPWRvY3VtZW50LnRpdGxlO2RvY3VtZW50LnRpdGxlPXAuY29kZSsnIC0gJytwLnRpdGxlOwogICAgICAgIHRyeXt3aW5kb3cucGFyZW50LmRvY3VtZW50LnRpdGxlPXAuY29kZSsnIC0gJytwLnRpdGxlO31jYXRjaChlKXt9CiAgICAgICAgd2FpdEZvckltYWdlc1RoZW5QcmludCgpOwogICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtkb2N1bWVudC50aXRsZT1vbGRUaXRsZTt0cnl7d2luZG93LnBhcmVudC5kb2N1bWVudC50aXRsZT0nUElMT1RFIFx1MjAxNCBTdWl0ZSBkZSBEaXJlY3Rpb24nO31jYXRjaChlKXt9fSwzMDAwKTsKICAgIH0KICAgIC8vIOKVkOKVkOKVkCBTw4lQQVJBVEVVUlMg4pWQ4pWQ4pWQCiAgICBmdW5jdGlvbiBsb2FkU2VwQ29uZmlnKCl7CiAgICAgICAgdmFyIGJveD1kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2VwLWNvbmZpZycpO2lmKCFib3gpcmV0dXJuOwogICAgICAgIHZhciBpdGVtcz1kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcubWVudS1pdGVtW2RhdGEtbWVudV0nKTsKICAgICAgICB2YXIgc2Vwcz0oYXBwRGF0YS5zZXR0aW5ncyYmYXBwRGF0YS5zZXR0aW5ncy5zZXBhcmF0b3JzKXx8W107CiAgICAgICAgdmFyIGg9Jyc7CiAgICAgICAgaXRlbXMuZm9yRWFjaChmdW5jdGlvbihpdGVtKXt2YXIgbWVudUlkPWl0ZW0uZ2V0QXR0cmlidXRlKCdkYXRhLW1lbnUnKTtpZihtZW51SWQ9PT0nbWVudTEnKXJldHVybjt2YXIgbGFiZWw9aXRlbS50ZXh0Q29udGVudC50cmltKCk7dmFyIGNoZWNrZWQ9c2Vwcy5pbmRleE9mKG1lbnVJZCk+PTA/JyBjaGVja2VkJzonJztoKz0nPGxhYmVsIHN0eWxlPSJmb250LXNpemU6Ljc4cmVtO2Rpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXI7Z2FwOjZweDtjdXJzb3I6cG9pbnRlciI+PGlucHV0IHR5cGU9ImNoZWNrYm94IiB2YWx1ZT0iJyttZW51SWQrJyInK2NoZWNrZWQrJyBvbmNoYW5nZT0ic2F2ZVNlcENvbmZpZygpIj4gJytsYWJlbCsnPC9sYWJlbD4nO30pOwogICAgICAgIGJveC5pbm5lckhUTUw9aDsKICAgIH0KICAgIGZ1bmN0aW9uIHNhdmVTZXBDb25maWcoKXsKICAgICAgICB2YXIgY2hlY2tzPWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJyNzZXAtY29uZmlnIGlucHV0W3R5cGU9Y2hlY2tib3hdOmNoZWNrZWQnKTsKICAgICAgICB2YXIgc2Vwcz1bXTtjaGVja3MuZm9yRWFjaChmdW5jdGlvbihjKXtzZXBzLnB1c2goYy52YWx1ZSk7fSk7CiAgICAgICAgaWYoIWFwcERhdGEuc2V0dGluZ3MpYXBwRGF0YS5zZXR0aW5ncz17fTthcHBEYXRhLnNldHRpbmdzLnNlcGFyYXRvcnM9c2VwcztzYXZlRGF0YSgpO2FwcGx5U2VwYXJhdG9ycygpOwogICAgfQogICAgZnVuY3Rpb24gYXBwbHlTZXBhcmF0b3JzKCl7CiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLm1lbnUtc2VwYXJhdG9yJykuZm9yRWFjaChmdW5jdGlvbihzKXtzLnJlbW92ZSgpO30pOwogICAgICAgIHZhciBzZXBzPShhcHBEYXRhLnNldHRpbmdzJiZhcHBEYXRhLnNldHRpbmdzLnNlcGFyYXRvcnMpfHxbXTsKICAgICAgICBzZXBzLmZvckVhY2goZnVuY3Rpb24obWVudUlkKXt2YXIgaXRlbT1kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubWVudS1pdGVtW2RhdGEtbWVudT0iJyttZW51SWQrJyJdJyk7aWYoaXRlbSYmaXRlbS5uZXh0RWxlbWVudFNpYmxpbmcpe3ZhciBzZXA9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7c2VwLmNsYXNzTmFtZT0nbWVudS1zZXBhcmF0b3InO2l0ZW0ucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoc2VwLGl0ZW0ubmV4dEVsZW1lbnRTaWJsaW5nKTt9fSk7CiAgICB9CiAgICAvLyBFeHBvc2UgcHJvYyBmdW5jdGlvbnMgdG8gZ2xvYmFsIHNjb3BlIChJSUZFIGNsb3N1cmUpCiAgICAKICAgIC8vIFZpZXcgcHJvY2VkdXJlIGZyb20gR2FudHQgKHJlYWQtb25seSBwb3B1cCkKICAgIGZ1bmN0aW9uIHZpZXdQcm9jUmVhZG9ubHkoY29kZSkgewogICAgICAgIGlmKCFjb2RlKSByZXR1cm47CiAgICAgICAgLy8gUmVtb3ZlIGV4aXN0aW5nIHBvcHVwCiAgICAgICAgdmFyIG9sZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcm9jLXJvLXBvcHVwJyk7CiAgICAgICAgaWYob2xkKSBvbGQucmVtb3ZlKCk7CiAgICAgICAgLy8gU2VhcmNoIGluIHByb2NlZHVyZXMgZmlyc3QsIHRoZW4gZmFsbCBiYWNrIHRvIGdhbnR0IGl0ZW0KICAgICAgICB2YXIgcHJvY3MgPSBhcHBEYXRhLnByb2NlZHVyZXMgfHwgW107CiAgICAgICAgdmFyIHByb2MgPSBwcm9jcy5maW5kKGZ1bmN0aW9uKHgpeyByZXR1cm4geC5jb2RlICYmIHguY29kZS50cmltKCkudG9VcHBlckNhc2UoKSA9PT0gY29kZS50cmltKCkudG9VcHBlckNhc2UoKTsgfSk7CiAgICAgICAgdmFyIGdhbnR0SXRlbSA9IChhcHBEYXRhLmdhbnR0fHxbXSkuZmluZChmdW5jdGlvbih4KXsgcmV0dXJuIHguY29kZSAmJiB4LmNvZGUudHJpbSgpLnRvVXBwZXJDYXNlKCkgPT09IGNvZGUudHJpbSgpLnRvVXBwZXJDYXNlKCk7IH0pOwogICAgICAgIGlmKCFwcm9jICYmICFnYW50dEl0ZW0pIHsgYWxlcnQoJ0F1Y3VuZSBwcm9jw6lkdXJlIHRyb3V2w6llIGF2ZWMgbGUgY29kZSAiJyArIGNvZGUgKyAnIicpOyByZXR1cm47IH0KICAgICAgICAvLyBVc2UgcHJvY2VkdXJlIGRhdGEgaWYgYXZhaWxhYmxlLCBvdGhlcndpc2UgYnVpbGQgZnJvbSBnYW50dAogICAgICAgIHZhciB0aXRsZSA9IHByb2MgPyBwcm9jLnRpdGxlIDogKGdhbnR0SXRlbSA/IGdhbnR0SXRlbS5uYW1lIDogJycpOwogICAgICAgIHZhciBwQ29kZSA9IHByb2MgPyBwcm9jLmNvZGUgOiBjb2RlOwogICAgICAgIHZhciBjYXQgPSBwcm9jID8gcHJvYy5jYXQgOiAoZ2FudHRJdGVtID8gZ2FudHRJdGVtLmNhdCA6ICcnKTsKICAgICAgICAKICAgICAgICB2YXIgejIgPSBwcm9jID8gKHByb2Muem9uZTJ8fCcnKSA6ICcnOwogICAgICAgIHZhciB6MyA9IHByb2MgPyAocHJvYy56b25lM3x8JycpIDogKGdhbnR0SXRlbSAmJiBnYW50dEl0ZW0ubm90ZXMgPyBnYW50dEl0ZW0ubm90ZXMgOiAnJyk7CiAgICAgICAgdmFyIHBJZCA9IHByb2MgPyBwcm9jLmlkIDogbnVsbDsKICAgICAgICB2YXIgYmcgPSAodHlwZW9mIGdldFByb2NDb2xvcj09PSdmdW5jdGlvbicpID8gZ2V0UHJvY0NvbG9yKHBDb2RlKSA6ICcjMmMzZTUwJzsKICAgICAgICAvLyBCdWlsZCBwb3B1cAogICAgICAgIHZhciBoID0gJzxkaXYgc3R5bGU9InBvc2l0aW9uOmZpeGVkO3RvcDowO2xlZnQ6MDt3aWR0aDoxMDAlO2hlaWdodDoxMDAlO2JhY2tncm91bmQ6cmdiYSgwLDAsMCwuNSk7ei1pbmRleDo5OTk5O2Rpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXI7anVzdGlmeS1jb250ZW50OmNlbnRlciIgb25jbGljaz0iaWYoZXZlbnQudGFyZ2V0PT09dGhpcyl0aGlzLnJlbW92ZSgpIiBpZD0icHJvYy1yby1wb3B1cCI+JzsKICAgICAgICBoICs9ICc8ZGl2IHN0eWxlPSJiYWNrZ3JvdW5kOiNmZmY7Ym9yZGVyLXJhZGl1czoxNHB4O3dpZHRoOjgwdnc7bWF4LWhlaWdodDo4NXZoO292ZXJmbG93LXk6YXV0bztib3gtc2hhZG93OjAgMjBweCA2MHB4IHJnYmEoMCwwLDAsLjI1KSI+JzsKICAgICAgICBoICs9ICc8ZGl2IHN0eWxlPSJiYWNrZ3JvdW5kOicrYmcrJztjb2xvcjojZmZmO3BhZGRpbmc6MThweCAyMnB4O2JvcmRlci1yYWRpdXM6MTRweCAxNHB4IDAgMDtkaXNwbGF5OmZsZXg7YWxpZ24taXRlbXM6Y2VudGVyO2p1c3RpZnktY29udGVudDpzcGFjZS1iZXR3ZWVuIj4nOwogICAgICAgIGggKz0gJzxkaXY+PHNwYW4gc3R5bGU9ImZvbnQtc2l6ZToxLjFyZW07Zm9udC13ZWlnaHQ6NzAwO29wYWNpdHk6Ljk7YmFja2dyb3VuZDpyZ2JhKDI1NSwyNTUsMjU1LC4yKTtwYWRkaW5nOjRweCAxMnB4O2JvcmRlci1yYWRpdXM6NnB4O21hcmdpbi1yaWdodDoxMnB4Ij4nK3BDb2RlKyc8L3NwYW4+JzsKICAgICAgICBoICs9ICc8c3BhbiBzdHlsZT0iZm9udC1zaXplOjEuMXJlbTtmb250LXdlaWdodDo3MDAiPicrdGl0bGUrJzwvc3Bhbj48L2Rpdj4nOwogICAgICAgIGggKz0gJzxidXR0b24gb25jbGljaz0iZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXHgyN3Byb2Mtcm8tcG9wdXBceDI3KS5yZW1vdmUoKSIgc3R5bGU9ImJhY2tncm91bmQ6cmdiYSgyNTUsMjU1LDI1NSwuMik7Ym9yZGVyOm5vbmU7Y29sb3I6I2ZmZjt3aWR0aDozMnB4O2hlaWdodDozMnB4O2JvcmRlci1yYWRpdXM6NTAlO2N1cnNvcjpwb2ludGVyO2ZvbnQtc2l6ZToxLjFyZW0iPiZ0aW1lczs8L2J1dHRvbj4nOwogICAgICAgIGggKz0gJzwvZGl2Pic7CiAgICAgICAgaWYoY2F0KSBoICs9ICc8ZGl2IHN0eWxlPSJwYWRkaW5nOjEwcHggMjJweCAwO2ZvbnQtc2l6ZTouNzhyZW07Y29sb3I6Izg4OCI+Q2F0w6lnb3JpZSA6IDxzdHJvbmc+JytjYXQrJzwvc3Ryb25nPjwvZGl2Pic7CiAgICAgICAgaWYoIXByb2MpIGggKz0gJzxkaXYgc3R5bGU9InBhZGRpbmc6MTBweCAyMnB4IDA7Zm9udC1zaXplOi43OHJlbTtjb2xvcjojZTY3ZTIyIj48aSBjbGFzcz0iZmFzIGZhLWluZm8tY2lyY2xlIj48L2k+IEF1Y3VuZSBmaWNoZSBwcm9jw6lkdXJlIGFzc29jacOpZSDigJQgY3LDqWV6LWxhIGRhbnMgbGUgc291cy1tZW51IFByb2PDqWR1cmVzIGF2ZWMgbGUgY29kZSA8c3Ryb25nPicrcENvZGUrJzwvc3Ryb25nPjwvZGl2Pic7CiAgICAgICAgdmFyIHpvbmVzID0gWwogICAgICAgICAgICB7bGFiZWw6J0FjdGlvbnMgLyDDiXRhcGVzJywgaWNvbjoncHJvYy1pY29uLWFsZXJ0JywgY29udGVudDp6Mn0sCiAgICAgICAgICAgIHtsYWJlbDonTm90ZXMgLyBSZW1hcnF1ZXMnLCBpY29uOidwcm9jLWljb24taWRlYScsIGNvbnRlbnQ6ejN9CiAgICAgICAgXTsKICAgICAgICB2YXIgaGFzQ29udGVudCA9IHoyfHx6MzsKICAgICAgICBoICs9ICc8ZGl2IHN0eWxlPSJwYWRkaW5nOjE2cHggMjJweCI+JzsKICAgICAgICBpZihoYXNDb250ZW50KSB7CiAgICAgICAgICAgIHpvbmVzLmZvckVhY2goZnVuY3Rpb24oeil7CiAgICAgICAgICAgICAgICBpZih6LmNvbnRlbnQpIHsKICAgICAgICAgICAgICAgICAgICBoICs9ICc8ZGl2IHN0eWxlPSJib3JkZXItbGVmdDozcHggc29saWQgI2RkZDtwYWRkaW5nOjEwcHggMTRweDttYXJnaW46MTJweCAwO2JhY2tncm91bmQ6I2ZhZmFmYTtib3JkZXItcmFkaXVzOjAgOHB4IDhweCAwIj4nOwogICAgICAgICAgICAgICAgICAgIGggKz0gJzxoNCBzdHlsZT0iZm9udC1zaXplOi43OHJlbTtmb250LXdlaWdodDo2MDA7Y29sb3I6Izk5OTttYXJnaW46MCAwIDZweDt0ZXh0LXRyYW5zZm9ybTp1cHBlcmNhc2U7bGV0dGVyLXNwYWNpbmc6LjVweCI+PHNwYW4gY2xhc3M9Iicrei5pY29uKyciIHN0eWxlPSJtYXJnaW4tcmlnaHQ6NnB4Ij48L3NwYW4+Jyt6LmxhYmVsKyc8L2g0Pic7CiAgICAgICAgICAgICAgICAgICAgaCArPSAnPGRpdiBzdHlsZT0iZm9udC1zaXplOi44NXJlbTtsaW5lLWhlaWdodDoxLjU7Y29sb3I6IzQ0NCI+Jyt6LmNvbnRlbnQrJzwvZGl2Pic7CiAgICAgICAgICAgICAgICAgICAgaCArPSAnPC9kaXY+JzsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgaCArPSAnPGRpdiBzdHlsZT0idGV4dC1hbGlnbjpjZW50ZXI7cGFkZGluZzozMHB4O2NvbG9yOiNiYmIiPjxpIGNsYXNzPSJmYXMgZmEtZmlsZS1hbHQiIHN0eWxlPSJmb250LXNpemU6MnJlbTtkaXNwbGF5OmJsb2NrO21hcmdpbi1ib3R0b206OHB4Ij48L2k+QXVjdW4gY29udGVudSByZW5zZWlnbsOpPC9kaXY+JzsKICAgICAgICB9CiAgICAgICAgaCArPSAnPC9kaXY+JzsKICAgICAgICBoICs9ICc8ZGl2IHN0eWxlPSJwYWRkaW5nOjEycHggMjJweCAxOHB4O3RleHQtYWxpZ246cmlnaHQ7Ym9yZGVyLXRvcDoxcHggc29saWQgI2VlZSI+JzsKICAgICAgICBoICs9ICc8YnV0dG9uIG9uY2xpY2s9ImRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFx4Mjdwcm9jLXJvLXBvcHVwXHgyNykucmVtb3ZlKCkiIHN0eWxlPSJwYWRkaW5nOjhweCAyMHB4O2JvcmRlcjoxcHggc29saWQgI2RkZDtib3JkZXItcmFkaXVzOjhweDtiYWNrZ3JvdW5kOiNmZmY7Y3Vyc29yOnBvaW50ZXI7bWFyZ2luLXJpZ2h0OjhweDtmb250LXNpemU6Ljg1cmVtIj5GZXJtZXI8L2J1dHRvbj4nOwogICAgICAgIGlmKHBJZCkgaCArPSAnPGJ1dHRvbiBvbmNsaWNrPSJkb2N1bWVudC5nZXRFbGVtZW50QnlJZChceDI3cHJvYy1yby1wb3B1cFx4MjcpLnJlbW92ZSgpO3N3aXRjaE1lbnUoXHgyN21lbnUxMlx4MjcpO3NldFRpbWVvdXQoZnVuY3Rpb24oKXt2aWV3UHJvYyhceDI3JytwSWQrJ1x4MjcpfSwyMDApIiBzdHlsZT0icGFkZGluZzo4cHggMjBweDtib3JkZXI6bm9uZTtib3JkZXItcmFkaXVzOjhweDtiYWNrZ3JvdW5kOnZhcigtLWhlYWRlciwjMmMzZTUwKTtjb2xvcjojZmZmO2N1cnNvcjpwb2ludGVyO2ZvbnQtc2l6ZTouODVyZW0iPjxpIGNsYXNzPSJmYXMgZmEtZWRpdCI+PC9pPiBPdXZyaXIgZGFucyBQcm9jw6lkdXJlczwvYnV0dG9uPic7CiAgICAgICAgaCArPSAnPC9kaXY+PC9kaXY+PC9kaXY+JzsKICAgICAgICBkb2N1bWVudC5ib2R5Lmluc2VydEFkamFjZW50SFRNTCgnYmVmb3JlZW5kJywgaCk7CiAgICB9CgogICAgCiAgICB2YXIgX1BST0NfQ0FUX01BUCA9IFsKICAgICAgICB7cHJlZml4OidQTycsIGNhdDonUG9ydGVzIE91dmVydGVzJ30sCiAgICAgICAge3ByZWZpeDonUkgnLCBjYXQ6J1Jlc3NvdXJjZXMgSHVtYWluZXMnfSwKICAgICAgICB7cHJlZml4OidBJywgY2F0OidBZG1pbmlzdHJhdGlmJ30sCiAgICAgICAge3ByZWZpeDonQicsIGNhdDonw4lsw6h2ZXMgQkVQJ30sCiAgICAgICAge3ByZWZpeDonQycsIGNhdDonQ29uY2VydGF0aW9ucyd9LAogICAgICAgIHtwcmVmaXg6J0QnLCBjYXQ6J0Rpc3Bvc2l0aWZzIFDDqWRhZ29naXF1ZXMnfSwKICAgICAgICB7cHJlZml4OidFJywgY2F0OidTdWl2aSBkZXMgw6lsw6h2ZXMnfSwKICAgICAgICB7cHJlZml4OidJJywgY2F0OidJbnRlcnZlbmFudHMnfSwKICAgICAgICB7cHJlZml4OidOJywgY2F0OidOdW3DqXJpcXVlJ30sCiAgICAgICAge3ByZWZpeDonTycsIGNhdDonT3JpZW50YXRpb24nfSwKICAgICAgICB7cHJlZml4OidQJywgY2F0OidQcm9qZXRzJ30sCiAgICAgICAge3ByZWZpeDonUycsIGNhdDonU8OpY3VyaXTDqSd9CiAgICBdOwogICAgZnVuY3Rpb24gYXV0b1Byb2NDYXQoY29kZSkgewogICAgICAgIGlmKCFjb2RlKSByZXR1cm47CiAgICAgICAgdmFyIGMgPSBjb2RlLnRyaW0oKS50b1VwcGVyQ2FzZSgpOwogICAgICAgIHZhciBzZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJvYy1jYXQnKTsKICAgICAgICBmb3IodmFyIGk9MDtpPF9QUk9DX0NBVF9NQVAubGVuZ3RoO2krKyl7CiAgICAgICAgICAgIGlmKGMuaW5kZXhPZihfUFJPQ19DQVRfTUFQW2ldLnByZWZpeCk9PT0wKXsKICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIG9wdGlvbiBleGlzdHMKICAgICAgICAgICAgICAgIHZhciBmb3VuZD1mYWxzZTsKICAgICAgICAgICAgICAgIGZvcih2YXIgaj0wO2o8c2VsLm9wdGlvbnMubGVuZ3RoO2orKyl7aWYoc2VsLm9wdGlvbnNbal0udmFsdWU9PT1fUFJPQ19DQVRfTUFQW2ldLmNhdCl7Zm91bmQ9dHJ1ZTticmVhazt9fQogICAgICAgICAgICAgICAgaWYoZm91bmQpIHNlbC52YWx1ZT1fUFJPQ19DQVRfTUFQW2ldLmNhdDsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KCiAgICAKICAgIAogICAgZnVuY3Rpb24gcHJpbnRHYW50dCgpewogICAgICAgIHZhciBzdz1wcm9tcHQoJ1NlbWFpbmUgZGUgZMOpYnV0IChleDogMzYpOicsJzM2Jyk7aWYoIXN3KXJldHVybjtzdz1wYXJzZUludChzdyk7CiAgICAgICAgdmFyIGV3PXByb21wdCgnU2VtYWluZSBkZSBmaW4gKGV4OiAyNik6JywnMjYnKTtpZighZXcpcmV0dXJuO2V3PXBhcnNlSW50KGV3KTsKICAgICAgICBpZighc3d8fCFldylyZXR1cm47CiAgICAgICAgLy8gQnVpbGQgd2VlayBsaXN0CiAgICAgICAgdmFyIHdlZWtzPVtdOwogICAgICAgIGlmKHN3PmV3KXtmb3IodmFyIHc9c3c7dzw9NTM7dysrKXdlZWtzLnB1c2godyk7Zm9yKHZhciB3PTE7dzw9ZXc7dysrKXdlZWtzLnB1c2godyk7fQogICAgICAgIGVsc2V7Zm9yKHZhciB3PXN3O3c8PWV3O3crKyl3ZWVrcy5wdXNoKHcpO30KICAgICAgICB2YXIgcHJvY3M9KGFwcERhdGEucHJvY2VkdXJlc3x8W10pLmZpbHRlcihmdW5jdGlvbihwKXtyZXR1cm4gcC53c3RhcnQ7fSk7CiAgICAgICAgcHJvY3Muc29ydChmdW5jdGlvbihhLGIpewogICAgICAgICAgICB2YXIgaWE9d2Vla3MuaW5kZXhPZihhLndzdGFydCksaWI9d2Vla3MuaW5kZXhPZihiLndzdGFydCk7CiAgICAgICAgICAgIGlmKGlhPDApaWE9OTk5O2lmKGliPDApaWI9OTk5OwogICAgICAgICAgICBpZihpYSE9PWliKXJldHVybiBpYS1pYjsKICAgICAgICAgICAgdmFyIG5hPXBhcnNlSW50KChhLmNvZGV8fCcnKS5yZXBsYWNlKC9bXjAtOV0vZywnJykpfHwwOwogICAgICAgICAgICB2YXIgbmI9cGFyc2VJbnQoKGIuY29kZXx8JycpLnJlcGxhY2UoL1teMC05XS9nLCcnKSl8fDA7CiAgICAgICAgICAgIHJldHVybiBuYS1uYjsKICAgICAgICB9KTsKICAgICAgICB2YXIgdnc9Z2V0VlcoKTsKICAgICAgICB2YXIgbW9zPVtdLGNtPScnO3dlZWtzLmZvckVhY2goZnVuY3Rpb24odyl7dmFyIG1sPXdrTW8odyk7aWYobWwhPT1jbSl7bW9zLnB1c2goe246bWwsczoxfSk7Y209bWw7fWVsc2UgbW9zW21vcy5sZW5ndGgtMV0ucysrO30pOwogICAgICAgIHZhciBjdz1jdXJXKCk7CiAgICAgICAgdmFyIGg9JzxzdHlsZT5AcGFnZXtzaXplOkEzIGxhbmRzY2FwZTttYXJnaW46NW1tfWJvZHl7Zm9udC1mYW1pbHk6QXJpYWwsc2Fucy1zZXJpZjttYXJnaW46MH10YWJsZXtib3JkZXItY29sbGFwc2U6Y29sbGFwc2U7d2lkdGg6MTAwJTtmb250LXNpemU6LjU1cmVtfXRoLHRke2JvcmRlcjoxcHggc29saWQgI2NjYztwYWRkaW5nOjJweCAzcHg7dGV4dC1hbGlnbjpjZW50ZXJ9dGh7YmFja2dyb3VuZDojZjVmNWY1O2ZvbnQtd2VpZ2h0OjYwMH0uZ3QtY3d7YmFja2dyb3VuZDojZmZmM2NkIWltcG9ydGFudH0uZ3QtdmF7YmFja2dyb3VuZDojZjhmOGY4fS5iYXJ7cG9zaXRpb246YWJzb2x1dGU7aW5zZXQ6MnB4IDFweDtib3JkZXItcmFkaXVzOjJweDstd2Via2l0LXByaW50LWNvbG9yLWFkanVzdDpleGFjdDtwcmludC1jb2xvci1hZGp1c3Q6ZXhhY3R9Lmxhe3RleHQtYWxpZ246bGVmdDtmb250LXNpemU6LjZyZW07d2hpdGUtc3BhY2U6bm93cmFwO21heC13aWR0aDoyMDBweDtvdmVyZmxvdzpoaWRkZW47dGV4dC1vdmVyZmxvdzplbGxpcHNpc30uZnR7ZGlzcGxheTpmbGV4O2FsaWduLWl0ZW1zOmNlbnRlcjtqdXN0aWZ5LWNvbnRlbnQ6c3BhY2UtYmV0d2VlbjtwYWRkaW5nOjRweCAxMHB4O21hcmdpbi10b3A6OHB4O2ZvbnQtc2l6ZTouNnJlbTtjb2xvcjojOTk5fTwvc3R5bGU+JzsKICAgICAgICBoKz0nPHRhYmxlPjx0aGVhZD48dHI+PHRoIHJvd3NwYW49IjIiIHN0eWxlPSJtaW4td2lkdGg6MTYwcHg7dGV4dC1hbGlnbjpsZWZ0Ij5Qcm9jw6lkdXJlPC90aD4nOwogICAgICAgIG1vcy5mb3JFYWNoKGZ1bmN0aW9uKG0pe2grPSc8dGggY29sc3Bhbj0iJyttLnMrJyI+JyttLm4rJzwvdGg+Jzt9KTsKICAgICAgICBoKz0nPC90cj48dHI+JzsKICAgICAgICB3ZWVrcy5mb3JFYWNoKGZ1bmN0aW9uKHcpewogICAgICAgICAgICB2YXIgY2xzPScnO2lmKHc9PT1jdyljbHM9J2d0LWN3JztlbHNlIGlmKHZ3LmluZGV4T2Yodyk+PTApY2xzPSdndC12YSc7CiAgICAgICAgICAgIGgrPSc8dGgnKyhjbHM/JyBjbGFzcz0iJytjbHMrJyInOicnKSsnPicrdysnPC90aD4nOwogICAgICAgIH0pOwogICAgICAgIGgrPSc8L3RyPjwvdGhlYWQ+PHRib2R5Pic7CiAgICAgICAgcHJvY3MuZm9yRWFjaChmdW5jdGlvbihnKXsKICAgICAgICAgICAgdmFyIGNvbD1nZXRQcm9jQ29sb3IoZy5jb2RlKTsKICAgICAgICAgICAgaCs9Jzx0cj48dGQgY2xhc3M9ImxhIj4nK2cuY29kZSsnIC0gJysoZy50aXRsZXx8JycpKyc8L3RkPic7CiAgICAgICAgICAgIHdlZWtzLmZvckVhY2goZnVuY3Rpb24odyl7CiAgICAgICAgICAgICAgICB2YXIgdmFjPXZ3LmluZGV4T2Yodyk+PTAsaXI9d0luUih3LGcud3N0YXJ0LGcud2VuZCk7CiAgICAgICAgICAgICAgICBoKz0nPHRkJysodmFjPycgY2xhc3M9Imd0LXZhIic6JycpKycgc3R5bGU9InBvc2l0aW9uOnJlbGF0aXZlO2hlaWdodDoxNHB4Ij4nOwogICAgICAgICAgICAgICAgaWYoaXIpaCs9JzxkaXYgY2xhc3M9ImJhciIgc3R5bGU9ImJhY2tncm91bmQ6Jytjb2wrJyI+PC9kaXY+JzsKICAgICAgICAgICAgICAgIGgrPSc8L3RkPic7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBoKz0nPC90cj4nOwogICAgICAgIH0pOwogICAgICAgIGgrPSc8L3Rib2R5PjwvdGFibGU+JzsKICAgICAgICB2YXIgbG9nb1NyYz0oYXBwRGF0YS5zZXR0aW5ncyYmYXBwRGF0YS5zZXR0aW5ncy5sb2dvKXx8Jyc7CiAgICAgICAgdmFyIHRvZGF5PW5ldyBEYXRlKCkudG9Mb2NhbGVEYXRlU3RyaW5nKCdmci1GUicse2RheTonMi1kaWdpdCcsbW9udGg6J2xvbmcnLHllYXI6J251bWVyaWMnfSk7CiAgICAgICAgaCs9JzxkaXYgY2xhc3M9ImZ0Ij4nOwogICAgICAgIGlmKGxvZ29TcmMpaCs9JzxpbWcgc3JjPSInK2xvZ29TcmMrJyIgc3R5bGU9ImhlaWdodDoxY20iPic7CiAgICAgICAgaCs9JzxzcGFuPicrdG9kYXkrJzwvc3Bhbj48L2Rpdj4nOwogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcmludC16b25lJykuaW5uZXJIVE1MPWg7CiAgICAgICAgd2FpdEZvckltYWdlc1RoZW5QcmludCgpOwogICAgfQoKICAgIGZ1bmN0aW9uIHRvZ2dsZVByb2NEb25lKGlkKXsKICAgICAgICB2YXIgc3k9Z2V0Q3VycmVudFNjaG9vbFllYXIoKTsKICAgICAgICB2YXIgcDI9KGFwcERhdGEucHJvY2VkdXJlc3x8W10pLmZpbmQoZnVuY3Rpb24oeCl7cmV0dXJuIHguaWQ9PT1pZDt9KTsKICAgICAgICBpZihwMil7cDIuZG9uZT0hcDIuZG9uZTtwMi5kb25lU1k9cDIuZG9uZT9zeTonJztzYXZlRGF0YSgpO3JlbmRlckdhbnR0KCk7cmV0dXJuO30KICAgICAgICB2YXIgZz0oYXBwRGF0YS5nYW50dHx8W10pLmZpbmQoZnVuY3Rpb24oeCl7cmV0dXJuIHguaWQ9PT1pZDt9KTsKICAgICAgICBpZihnKXtnLmRvbmU9IWcuZG9uZTtnLmRvbmVTWT1nLmRvbmU/c3k6Jyc7c2F2ZURhdGEoKTtyZW5kZXJHYW50dCgpO30KICAgIH0KCiAgICB3aW5kb3cub3BlblByb2NNb2RhbCA9IG9wZW5Qcm9jTW9kYWw7CiAgICB3aW5kb3cuY2xvc2VQcm9jTW9kYWwgPSBjbG9zZVByb2NNb2RhbDsKICAgIHdpbmRvdy5zYXZlUHJvYyA9IHNhdmVQcm9jOwogICAgd2luZG93LmRlbFByb2MgPSBkZWxQcm9jOwogICAgd2luZG93LnJlbmRlclByb2NlZHVyZXMgPSByZW5kZXJQcm9jZWR1cmVzOwogICAgd2luZG93LnZpZXdQcm9jID0gdmlld1Byb2M7CiAgICB3aW5kb3cucHJpbnRQcm9jID0gcHJpbnRQcm9jOwogICAgd2luZG93LnByb2NJbnNlcnRJY29uID0gcHJvY0luc2VydEljb247CiAgICB3aW5kb3cubG9hZFNlcENvbmZpZyA9IGxvYWRTZXBDb25maWc7CiAgICB3aW5kb3cuc2F2ZVNlcENvbmZpZyA9IHNhdmVTZXBDb25maWc7CiAgICB3aW5kb3cuYXBwbHlTZXBhcmF0b3JzID0gYXBwbHlTZXBhcmF0b3JzOwogICAgd2luZG93LnZpZXdQcm9jUmVhZG9ubHkgPSB2aWV3UHJvY1JlYWRvbmx5OwogICAgd2luZG93LnRvZ2dsZVByb2NEb25lID0gdG9nZ2xlUHJvY0RvbmU7CiAgICB3aW5kb3cucHJpbnRHYW50dCA9IHByaW50R2FudHQ7CiAgICAKICAgIGZ1bmN0aW9uIHJ0ZUltZ1Jlc2l6ZShzaXplKXsKICAgICAgICB2YXIgc2VsPXdpbmRvdy5nZXRTZWxlY3Rpb24oKTtpZighc2VsLnJhbmdlQ291bnQpcmV0dXJuOwogICAgICAgIHZhciBub2RlPXNlbC5hbmNob3JOb2RlOwogICAgICAgIC8vIEZpbmQgbmVhcmVzdCBpbWcKICAgICAgICB2YXIgZWw9bm9kZTt3aGlsZShlbCYmZWwudGFnTmFtZSE9PSdJTUcnKXtpZihlbC5jaGlsZE5vZGVzKXtmb3IodmFyIGk9MDtpPGVsLmNoaWxkTm9kZXMubGVuZ3RoO2krKyl7aWYoZWwuY2hpbGROb2Rlc1tpXS50YWdOYW1lPT09J0lNRycpe2VsPWVsLmNoaWxkTm9kZXNbaV07YnJlYWs7fX19aWYoZWwudGFnTmFtZSE9PSdJTUcnKWVsPWVsLnBhcmVudE5vZGU7fQogICAgICAgIGlmKCFlbHx8ZWwudGFnTmFtZSE9PSdJTUcnKXsKICAgICAgICAgICAgLy8gVHJ5IHRvIGZpbmQgYW55IHNlbGVjdGVkIGltZwogICAgICAgICAgICB2YXIgaW1ncz1zZWwuYW5jaG9yTm9kZS5wYXJlbnROb2RlLnF1ZXJ5U2VsZWN0b3JBbGwoJ2ltZycpOwogICAgICAgICAgICBpZihpbWdzLmxlbmd0aD09PTEpZWw9aW1nc1swXTsKICAgICAgICAgICAgZWxzZXthbGVydCgnU8OpbGVjdGlvbm5leiB1bmUgaW1hZ2UgZFwnYWJvcmQnKTtyZXR1cm47fQogICAgICAgIH0KICAgICAgICB2YXIgc2l6ZXM9eydzbWFsbCc6JzI1JScsJ21lZGl1bSc6JzUwJScsJ2xhcmdlJzonNzUlJywnZnVsbCc6JzEwMCUnfTsKICAgICAgICBlbC5zdHlsZS53aWR0aD1zaXplc1tzaXplXXx8JzUwJSc7ZWwuc3R5bGUuaGVpZ2h0PSdhdXRvJzsKICAgIH0KICAgIHdpbmRvdy5ydGVJbWdSZXNpemUgPSBydGVJbWdSZXNpemU7CiAgICBmdW5jdGlvbiBleHBvcnREYXRhKCl7CiAgICAgICAgdmFyIGpzb249SlNPTi5zdHJpbmdpZnkoYXBwRGF0YSxudWxsLDIpOwogICAgICAgIHZhciBibG9iPW5ldyBCbG9iKFtqc29uXSx7dHlwZTonYXBwbGljYXRpb24vanNvbid9KTsKICAgICAgICB2YXIgdXJsPVVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7CiAgICAgICAgdmFyIGE9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpOwogICAgICAgIHZhciBkPW5ldyBEYXRlKCk7CiAgICAgICAgdmFyIGZuYW1lPSdDQURJUl9iYWNrdXBfJytkLmdldEZ1bGxZZWFyKCkrJy0nK1N0cmluZyhkLmdldE1vbnRoKCkrMSkucGFkU3RhcnQoMiwnMCcpKyctJytTdHJpbmcoZC5nZXREYXRlKCkpLnBhZFN0YXJ0KDIsJzAnKSsnXycrU3RyaW5nKGQuZ2V0SG91cnMoKSkucGFkU3RhcnQoMiwnMCcpKydoJytTdHJpbmcoZC5nZXRNaW51dGVzKCkpLnBhZFN0YXJ0KDIsJzAnKSsnLmpzb24nOwogICAgICAgIGEuaHJlZj11cmw7YS5kb3dubG9hZD1mbmFtZTthLmNsaWNrKCk7VVJMLnJldm9rZU9iamVjdFVSTCh1cmwpOwogICAgICAgIHZhciBlbD1kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbGFzdC1leHBvcnQnKTsKICAgICAgICBpZihlbCllbC50ZXh0Q29udGVudD0nRGVybmllciBleHBvcnQgOiAnK2QudG9Mb2NhbGVTdHJpbmcoJ2ZyLUZSJyk7CiAgICAgICAgYXBwRGF0YS5zZXR0aW5ncy5sYXN0RXhwb3J0PWQudG9JU09TdHJpbmcoKTtzYXZlRGF0YSgpOwogICAgfQogICAgZnVuY3Rpb24gaW1wb3J0RGF0YShpbnB1dCl7CiAgICAgICAgaWYoIWlucHV0LmZpbGVzfHwhaW5wdXQuZmlsZXNbMF0pcmV0dXJuOwogICAgICAgIGlmKCFjb25maXJtKCfimqDvuI8gSW1wb3J0ZXIgdmEgUkVNUExBQ0VSIHRvdXRlcyB2b3MgZG9ubsOpZXMgYWN0dWVsbGVzLlxuXG5Wb3VsZXotdm91cyBjb250aW51ZXIgPycpKXJldHVybjsKICAgICAgICB2YXIgcmVhZGVyPW5ldyBGaWxlUmVhZGVyKCk7CiAgICAgICAgcmVhZGVyLm9ubG9hZD1mdW5jdGlvbihlKXsKICAgICAgICAgICAgdHJ5ewogICAgICAgICAgICAgICAgdmFyIGRhdGE9SlNPTi5wYXJzZShlLnRhcmdldC5yZXN1bHQpOwogICAgICAgICAgICAgICAgaWYoIWRhdGEuc2V0dGluZ3Mpe2FsZXJ0KCdGaWNoaWVyIGludmFsaWRlIDogcGFzIGRlIHNlY3Rpb24gc2V0dGluZ3MnKTtyZXR1cm47fQogICAgICAgICAgICAgICAgLy8gTWVyZ2UgaW50byBhcHBEYXRhCiAgICAgICAgICAgICAgICBPYmplY3Qua2V5cyhkYXRhKS5mb3JFYWNoKGZ1bmN0aW9uKGspe2FwcERhdGFba109ZGF0YVtrXTt9KTsKICAgICAgICAgICAgICAgIHNhdmVEYXRhKCk7CiAgICAgICAgICAgICAgICBhbGVydCgn4pyFIEltcG9ydCByw6l1c3NpICEgTGEgcGFnZSB2YSBzZSByZWNoYXJnZXIuJyk7CiAgICAgICAgICAgICAgICBsb2NhdGlvbi5yZWxvYWQoKTsKICAgICAgICAgICAgfWNhdGNoKGVycil7CiAgICAgICAgICAgICAgICBhbGVydCgnRXJyZXVyIGRlIGxlY3R1cmUgOiAnK2Vyci5tZXNzYWdlKTsKICAgICAgICAgICAgfQogICAgICAgIH07CiAgICAgICAgcmVhZGVyLnJlYWRBc1RleHQoaW5wdXQuZmlsZXNbMF0pOwogICAgICAgIGlucHV0LnZhbHVlPScnOwogICAgfQogICAgd2luZG93LmV4cG9ydERhdGEgPSBleHBvcnREYXRhOwogICAgd2luZG93LmltcG9ydERhdGEgPSBpbXBvcnREYXRhOwoKICAgIHZhciBfZXZDbGFzc2VzPVtdOwogICAgZnVuY3Rpb24gYnVpbGRDbGFzc1NlbGVjdCgpewogICAgICAgIHZhciBzZWw9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2V2LWNsYXNzZScpO2lmKCFzZWwpcmV0dXJuOwogICAgICAgIHZhciBjbGFzc2VzPXt9OwogICAgICAgIChhcHBEYXRhLnN0dWRlbnRzfHxbXSkuZm9yRWFjaChmdW5jdGlvbihzKXt2YXIgYz1zLkNsYXNzZXx8cy5jbGFzc2U7aWYoYyljbGFzc2VzW2NdPTE7fSk7CiAgICAgICAgdmFyIGg9JzxvcHRpb24gdmFsdWU9IiI+LS0gQ2hvaXNpciBvdSBzYWlzaXIgLS08L29wdGlvbj4nOwogICAgICAgIE9iamVjdC5rZXlzKGNsYXNzZXMpLnNvcnQoKS5mb3JFYWNoKGZ1bmN0aW9uKGMpe2grPSc8b3B0aW9uIHZhbHVlPSInK2MrJyI+JytjKyc8L29wdGlvbj4nO30pOwogICAgICAgIGgrPSc8b3B0aW9uIHZhbHVlPSJfX2N1c3RvbSI+XHUyNzBGIFNhaXNpci4uLjwvb3B0aW9uPic7CiAgICAgICAgc2VsLmlubmVySFRNTD1oOwogICAgfQogICAgZnVuY3Rpb24gYWRkRXZDbGFzc2UoKXsKICAgICAgICB2YXIgc2VsPWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdldi1jbGFzc2UnKTsKICAgICAgICB2YXIgdj1zZWwudmFsdWU7CiAgICAgICAgaWYodj09PSdfX2N1c3RvbScpe3Y9cHJvbXB0KCdDbGFzc2UgOicpO2lmKCF2KXJldHVybjt9CiAgICAgICAgaWYoIXYpcmV0dXJuOwogICAgICAgIGlmKF9ldkNsYXNzZXMuaW5kZXhPZih2KTwwKV9ldkNsYXNzZXMucHVzaCh2KTsKICAgICAgICByZW5kZXJFdkNsYXNzZXMoKTsKICAgIH0KICAgIGZ1bmN0aW9uIHJlbW92ZUV2Q2xhc3NlKGMpe19ldkNsYXNzZXM9X2V2Q2xhc3Nlcy5maWx0ZXIoZnVuY3Rpb24oeCl7cmV0dXJuIHghPT1jO30pO3JlbmRlckV2Q2xhc3NlcygpO30KICAgIGZ1bmN0aW9uIHJlbmRlckV2Q2xhc3NlcygpewogICAgICAgIHZhciBoPScnO19ldkNsYXNzZXMuZm9yRWFjaChmdW5jdGlvbihjKXsKICAgICAgICAgICAgaCs9JzxzcGFuIHN0eWxlPSJiYWNrZ3JvdW5kOiNlMGU3ZmY7Y29sb3I6IzM3MzBhMztwYWRkaW5nOjNweCA4cHg7Ym9yZGVyLXJhZGl1czoxMnB4O2ZvbnQtc2l6ZTouNzVyZW07ZGlzcGxheTppbmxpbmUtZmxleDthbGlnbi1pdGVtczpjZW50ZXI7Z2FwOjRweCI+JytjKycgPHNwYW4gc3R5bGU9ImN1cnNvcjpwb2ludGVyO2ZvbnQtd2VpZ2h0OjcwMCIgb25jbGljaz0id2luZG93LnJlbW92ZUV2Q2xhc3NlKFwnJytjKydcJykiPlx1MDBENzwvc3Bhbj48L3NwYW4+JzsKICAgICAgICB9KTsKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZXYtY2xhc3Nlcy1saXN0JykuaW5uZXJIVE1MPWg7CiAgICB9CiAgICB3aW5kb3cuYWRkRXZDbGFzc2UgPSBhZGRFdkNsYXNzZTsKICAgIHdpbmRvdy5yZW1vdmVFdkNsYXNzZSA9IHJlbW92ZUV2Q2xhc3NlOwogICAgd2luZG93LmJ1aWxkQ2xhc3NTZWxlY3QgPSBidWlsZENsYXNzU2VsZWN0OwogICAgd2luZG93LnNhdmVFdmVudCA9IHR5cGVvZiBzYXZlRXZlbnQhPT0ndW5kZWZpbmVkJz9zYXZlRXZlbnQ6ZnVuY3Rpb24oKXt9OwogICAgd2luZG93LmNsb3NlRXZNb2RhbCA9IHR5cGVvZiBjbG9zZUV2TW9kYWwhPT0ndW5kZWZpbmVkJz9jbG9zZUV2TW9kYWw6ZnVuY3Rpb24oKXt9OwogICAgd2luZG93LmRlbEV2RnJvbU1vZGFsID0gdHlwZW9mIGRlbEV2RnJvbU1vZGFsIT09J3VuZGVmaW5lZCc/ZGVsRXZGcm9tTW9kYWw6ZnVuY3Rpb24oKXt9OwogICAgd2luZG93Lm9wZW5Fdk1vZGFsID0gdHlwZW9mIG9wZW5Fdk1vZGFsIT09J3VuZGVmaW5lZCc/b3BlbkV2TW9kYWw6ZnVuY3Rpb24oKXt9OwoKCiAgICB3aW5kb3cuYXV0b1Byb2NDYXQgPSBhdXRvUHJvY0NhdDsKICAgIHdpbmRvdy5hdXRvUmVzZXREb25lID0gYXV0b1Jlc2V0RG9uZTsKICAgIHdpbmRvdy5nZXRDdXJyZW50U2Nob29sWWVhciA9IGdldEN1cnJlbnRTY2hvb2xZZWFyOwogICAgd2luZG93LnNhdmVHdCA9IHNhdmVHdDsKICAgIHdpbmRvdy5vcGVuR3RNb2RhbCA9IG9wZW5HdE1vZGFsOwogICAgd2luZG93LmNsb3NlR3RNb2RhbCA9IGNsb3NlR3RNb2RhbDsKICAgIHdpbmRvdy5kZWxHdEZyb21Nb2RhbCA9IGRlbEd0RnJvbU1vZGFsOwogICAgd2luZG93LnRvZ2dsZUd0RG9uZSA9IHRvZ2dsZUd0RG9uZTsKICAgIHdpbmRvdy5yZW5kZXJHYW50dCA9IHJlbmRlckdhbnR0OwogICAgd2luZG93Lmd0UHJldiA9IGd0UHJldjsKICAgIHdpbmRvdy5ndE5leHQgPSBndE5leHQ7CiAgICB3aW5kb3cuZ3RUb2RheSA9IGd0VG9kYXk7CiAgICB3aW5kb3cuZ3RZZWFyID0gZ3RZZWFyOwogICAgd2luZG93LmZpbGxUZWFjaGVyU2VsID0gZmlsbFRlYWNoZXJTZWw7CgoKICAgIAovLyBBdXRvLXJlc2V0IGF1IGTDqW1hcnJhZ2UKZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZ1bmN0aW9uKCl7CiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7IGlmKHR5cGVvZiBhdXRvUmVzZXREb25lPT09J2Z1bmN0aW9uJykgYXV0b1Jlc2V0RG9uZSgpOyB9LCA1MDApOwogICAgc2V0VGltZW91dChmdW5jdGlvbigpeyBpZih0eXBlb2YgcmVzdG9yZUZpbGVIYW5kbGU9PT0nZnVuY3Rpb24nKSByZXN0b3JlRmlsZUhhbmRsZSgpOyB9LCAzMDApOwp9KTsKCgogICAgLy8gPT09IFdPUkQgUEFTVEUg4oCUIENvbGxhZ2UgaW50ZWxsaWdlbnQgZGVwdWlzIFdvcmQgPT09CiAgICBmdW5jdGlvbiBjbGVhbldvcmRIdG1sKGh0bWwpIHsKICAgICAgICAvLyDilIDilIAgMS4gU3VwcHJpbWVyIGNvbW1lbnRhaXJlcyBjb25kaXRpb25uZWxzIFdvcmQg4pSA4pSACiAgICAgICAgaHRtbCA9IGh0bWwucmVwbGFjZSgvPCEtLVxbaWZbXlxdXSpcXT5bXHNcU10qPzwhXFtlbmRpZlxdLS0+L2dpLCAnJyk7CgogICAgICAgIC8vIOKUgOKUgCAyLiBTdXBwcmltZXIgYmFsaXNlcyBYTUwgV29yZCAobzosIHc6LCBtOikg4pSA4pSACiAgICAgICAgaHRtbCA9IGh0bWwucmVwbGFjZSgvPFwvP286W2EtekEtWl1bXj5dKj4vZ2ksICcnKTsKICAgICAgICBodG1sID0gaHRtbC5yZXBsYWNlKC88XC8/dzpbYS16QS1aXVtePl0qPi9naSwgJycpOwogICAgICAgIGh0bWwgPSBodG1sLnJlcGxhY2UoLzxcLz9tOlthLXpBLVpdW14+XSo+L2dpLCAnJyk7CiAgICAgICAgaHRtbCA9IGh0bWwucmVwbGFjZSgvPHY6W14+XSs+W1xzXFNdKj88XC92OltePl0rPi9naSwgJycpOwogICAgICAgIGh0bWwgPSBodG1sLnJlcGxhY2UoLzxcLz92OltePl0rPi9naSwgJycpOwoKICAgICAgICAvLyDilIDilIAgMy4gQ29udmVydGlyIGxpc3RlcyBXb3JkIGF2ZWMgbml2ZWF1eCDilIDilIAKICAgICAgICAvLyBXb3JkIGVuY29kZTogPHAgY2xhc3M9Ik1zb0xpc3RQYXJhZ3JhcGgiIHN0eWxlPSIuLi5tc28tbGlzdDpsMCBsZXZlbDIgbGZvMS4uLiI+CiAgICAgICAgLy8gT24gZXh0cmFpdCBsZSBuaXZlYXUgZXQgY29uc3RydWl0IHVuZSBsaXN0ZSBpbWJyaXF1w6llCgogICAgICAgIC8vIDNhLiBQYXJzZXIgY2hhcXVlIHBhcmFncmFwaGUgbGlzdGUgZW4gb2JqZXQge2xldmVsLCBvcmRlcmVkLCBjb250ZW50fQogICAgICAgIHZhciBsaXN0SXRlbXMgPSBbXTsKICAgICAgICB2YXIgbGlzdFJhbmdlcyA9IFtdOyAvLyBwb3NpdGlvbnMgZGFucyBsZSBIVE1MIHBvdXIgcmVjb25zdHJ1Y3Rpb24KCiAgICAgICAgdmFyIHBMaXN0UmUgPSAvPHAoW14+XSooPzptc28tbGlzdHxNc29MaXN0KVtePl0qKT4oW1xzXFNdKj8pPFwvcD4vZ2k7CiAgICAgICAgdmFyIG1hdGNoOwogICAgICAgIHdoaWxlICgobWF0Y2ggPSBwTGlzdFJlLmV4ZWMoaHRtbCkpICE9PSBudWxsKSB7CiAgICAgICAgICAgIHZhciBhdHRycyA9IG1hdGNoWzFdOwogICAgICAgICAgICB2YXIgaW5uZXIgPSBtYXRjaFsyXTsKICAgICAgICAgICAgdmFyIGxldmVsTSA9IC9tc28tbGlzdDpbXjtdKj9sZXZlbChcZCspL2kuZXhlYyhhdHRycyk7CiAgICAgICAgICAgIHZhciBsZXZlbCA9IGxldmVsTSA/IHBhcnNlSW50KGxldmVsTVsxXSkgOiAxOwogICAgICAgICAgICBpZiAobGV2ZWwgPCAxKSBsZXZlbCA9IDE7CiAgICAgICAgICAgIGlmIChsZXZlbCA+IDMpIGxldmVsID0gMzsKCiAgICAgICAgICAgIC8vIETDqXRlY3RlciBsaXN0ZSBvcmRvbm7DqWU6IGxlIHNwYW4gZGUgcHVjZSBjb250aWVudCBjaGlmZnJlL2xldHRyZStwb25jdHVhdGlvbgogICAgICAgICAgICB2YXIgaXNPcmRlcmVkID0gZmFsc2U7CiAgICAgICAgICAgIHZhciBmaXJzdFNwYW4gPSBpbm5lci5tYXRjaCgvPHNwYW5bXj5dKj4oW1xzXFNdKj8pPFwvc3Bhbj4vaSk7CiAgICAgICAgICAgIGlmIChmaXJzdFNwYW4pIHsKICAgICAgICAgICAgICAgIHZhciB0eHQgPSBmaXJzdFNwYW5bMV0ucmVwbGFjZSgvPFtePl0rPi9nLCcnKS5yZXBsYWNlKC8mbmJzcDsvZywnICcpLnRyaW0oKTsKICAgICAgICAgICAgICAgIGlzT3JkZXJlZCA9IC9eW1xkXHddK1suKV1ccyokLy50ZXN0KHR4dCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC8vIE5ldHRveWVyIGxlIGNvbnRlbnU6IHN1cHByaW1lciBsZSBzcGFuIGRlIHB1Y2UgKFN5bWJvbC9XaW5nZGluZ3MvbXNvLWxpc3QpCiAgICAgICAgICAgIGlubmVyID0gaW5uZXIucmVwbGFjZSgvPHNwYW5bXj5dKmZvbnQtZmFtaWx5XHMqOlxzKlsnIl0/XHMqKD86U3ltYm9sfFdpbmdkaW5ncylbXj5dKj5bXHNcU10qPzxcL3NwYW4+L2dpLCAnJyk7CiAgICAgICAgICAgIGlubmVyID0gaW5uZXIucmVwbGFjZSgvPHNwYW5bXj5dKm1zby1saXN0W14+XSo+W1xzXFNdKj88XC9zcGFuPi9naSwgJycpOwogICAgICAgICAgICAvLyBTdXBwcmltZXIgbGVzICZuYnNwOyBkJ2luZGVudGF0aW9uIGVuIGTDqWJ1dAogICAgICAgICAgICBpbm5lciA9IGlubmVyLnJlcGxhY2UoL14oXHMqJm5ic3A7XHMqKSsvLCAnJyk7CiAgICAgICAgICAgIGlubmVyID0gaW5uZXIudHJpbSgpOwoKICAgICAgICAgICAgbGlzdEl0ZW1zLnB1c2goeyBsZXZlbDogbGV2ZWwsIG9yZGVyZWQ6IGlzT3JkZXJlZCwgY29udGVudDogaW5uZXIsIGZ1bGw6IG1hdGNoWzBdLCBpbmRleDogbWF0Y2guaW5kZXggfSk7CiAgICAgICAgICAgIGxpc3RSYW5nZXMucHVzaCh7IHN0YXJ0OiBtYXRjaC5pbmRleCwgZW5kOiBtYXRjaC5pbmRleCArIG1hdGNoWzBdLmxlbmd0aCB9KTsKICAgICAgICB9CgogICAgICAgIC8vIDNiLiBDb25zdHJ1aXJlIGwnSFRNTCBkZSBsaXN0ZSBpbWJyaXF1w6llIMOgIHBhcnRpciBkZXMgaXRlbXMKICAgICAgICBmdW5jdGlvbiBidWlsZE5lc3RlZExpc3QoaXRlbXMpIHsKICAgICAgICAgICAgaWYgKCFpdGVtcy5sZW5ndGgpIHJldHVybiAnJzsKICAgICAgICAgICAgdmFyIHJlc3VsdCA9ICcnOwogICAgICAgICAgICB2YXIgaSA9IDA7CgogICAgICAgICAgICBmdW5jdGlvbiBwcm9jZXNzR3JvdXAocGFyZW50TGV2ZWwpIHsKICAgICAgICAgICAgICAgIHZhciBncm91cEh0bWwgPSAnJzsKICAgICAgICAgICAgICAgIHZhciBsaXN0VGFnID0gbnVsbDsKICAgICAgICAgICAgICAgIHdoaWxlIChpIDwgaXRlbXMubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGl0ZW0gPSBpdGVtc1tpXTsKICAgICAgICAgICAgICAgICAgICBpZiAoaXRlbS5sZXZlbCA8IHBhcmVudExldmVsKSBicmVhazsKICAgICAgICAgICAgICAgICAgICBpZiAoaXRlbS5sZXZlbCA+IHBhcmVudExldmVsKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNvdXMtbGlzdGUgw6AgbCdpbnTDqXJpZXVyIGR1IGRlcm5pZXIgPGxpPgogICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3ViVGFnID0gaXRlbS5vcmRlcmVkID8gJ29sJyA6ICd1bCc7CiAgICAgICAgICAgICAgICAgICAgICAgIGdyb3VwSHRtbCArPSAnPCcgKyBzdWJUYWcgKyAnIHN0eWxlPSJtYXJnaW46MnB4IDAgMnB4IDIycHg7cGFkZGluZy1sZWZ0OjA7Ij4nOwogICAgICAgICAgICAgICAgICAgICAgICBncm91cEh0bWwgKz0gcHJvY2Vzc0dyb3VwKGl0ZW0ubGV2ZWwpOwogICAgICAgICAgICAgICAgICAgICAgICBncm91cEh0bWwgKz0gJzwvJyArIHN1YlRhZyArICc+JzsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAvLyBNw6ptZSBuaXZlYXUKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGN1clRhZyA9IGl0ZW0ub3JkZXJlZCA/ICdvbCcgOiAndWwnOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWxpc3RUYWcpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpc3RUYWcgPSBjdXJUYWc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBncm91cEh0bWwgPSAnPCcgKyBjdXJUYWcgKyAnIHN0eWxlPSJtYXJnaW46NHB4IDA7cGFkZGluZy1sZWZ0OjIycHg7Ij4nOwogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGN1clRhZyAhPT0gbGlzdFRhZykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ3JvdXBIdG1sICs9ICc8LycgKyBsaXN0VGFnICsgJz48JyArIGN1clRhZyArICcgc3R5bGU9Im1hcmdpbjo0cHggMDtwYWRkaW5nLWxlZnQ6MjJweDsiPic7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaXN0VGFnID0gY3VyVGFnOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGdyb3VwSHRtbCArPSAnPGxpPicgKyBpdGVtLmNvbnRlbnQ7CiAgICAgICAgICAgICAgICAgICAgICAgIGkrKzsKICAgICAgICAgICAgICAgICAgICAgICAgLy8gVsOpcmlmaWVyIHNpIGxlIHByb2NoYWluIGl0ZW0gZXN0IHVuIHNvdXMtbml2ZWF1CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpIDwgaXRlbXMubGVuZ3RoICYmIGl0ZW1zW2ldLmxldmVsID4gcGFyZW50TGV2ZWwpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdyb3VwSHRtbCArPSBwcm9jZXNzR3JvdXAoaXRlbXNbaV0ubGV2ZWwpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGdyb3VwSHRtbCArPSAnPC9saT4nOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmIChsaXN0VGFnKSBncm91cEh0bWwgKz0gJzwvJyArIGxpc3RUYWcgKyAnPic7CiAgICAgICAgICAgICAgICByZXR1cm4gZ3JvdXBIdG1sOwogICAgICAgICAgICB9CgogICAgICAgICAgICByZXR1cm4gcHJvY2Vzc0dyb3VwKDEpOwogICAgICAgIH0KCiAgICAgICAgaWYgKGxpc3RJdGVtcy5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgIC8vIFJlbXBsYWNlciBsZXMgYmxvY3MgZGUgbGlzdGUgZGFucyBsZSBIVE1MCiAgICAgICAgICAgIC8vIFRyb3V2ZXIgbGVzIGdyb3VwZXMgZGUgbGlzdGVzIGNvbnPDqWN1dGl2ZXMKICAgICAgICAgICAgdmFyIGdyb3VwcyA9IFtdOwogICAgICAgICAgICB2YXIgY3VycmVudEdyb3VwID0gW2xpc3RJdGVtc1swXV07CiAgICAgICAgICAgIGZvciAodmFyIGdpID0gMTsgZ2kgPCBsaXN0SXRlbXMubGVuZ3RoOyBnaSsrKSB7CiAgICAgICAgICAgICAgICAvLyBDb25zw6ljdXRpZiBzaSBsZXMgcG9zaXRpb25zIHNvbnQgcHJvY2hlcyAocGFzIGQnYXV0cmUgY29udGVudSBlbnRyZSBldXgpCiAgICAgICAgICAgICAgICB2YXIgcHJldkVuZCA9IGxpc3RSYW5nZXNbZ2ktMV0uZW5kOwogICAgICAgICAgICAgICAgdmFyIG5leHRTdGFydCA9IGxpc3RSYW5nZXNbZ2ldLnN0YXJ0OwogICAgICAgICAgICAgICAgdmFyIGJldHdlZW4gPSBodG1sLnN1YnN0cmluZyhwcmV2RW5kLCBuZXh0U3RhcnQpLnJlcGxhY2UoL1xzKy9nLCcnKTsKICAgICAgICAgICAgICAgIGlmIChiZXR3ZWVuID09PSAnJyB8fCBiZXR3ZWVuLmxlbmd0aCA8IDUwKSB7CiAgICAgICAgICAgICAgICAgICAgY3VycmVudEdyb3VwLnB1c2gobGlzdEl0ZW1zW2dpXSk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIGdyb3Vwcy5wdXNoKHsgaXRlbXM6IGN1cnJlbnRHcm91cCwgc3RhcnQ6IGxpc3RSYW5nZXNbZ2kgLSBjdXJyZW50R3JvdXAubGVuZ3RoXS5zdGFydCwgZW5kOiBsaXN0UmFuZ2VzW2dpLTFdLmVuZCB9KTsKICAgICAgICAgICAgICAgICAgICBjdXJyZW50R3JvdXAgPSBbbGlzdEl0ZW1zW2dpXV07CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZ3JvdXBzLnB1c2goeyBpdGVtczogY3VycmVudEdyb3VwLCBzdGFydDogbGlzdFJhbmdlc1tsaXN0SXRlbXMubGVuZ3RoIC0gY3VycmVudEdyb3VwLmxlbmd0aF0uc3RhcnQsIGVuZDogbGlzdFJhbmdlc1tsaXN0SXRlbXMubGVuZ3RoLTFdLmVuZCB9KTsKCiAgICAgICAgICAgIC8vIFJlY29uc3RydWlyZSBsZSBIVE1MIGVuIHJlbXBsYcOnYW50IGNoYXF1ZSBncm91cGUKICAgICAgICAgICAgdmFyIG5ld0h0bWwgPSAnJzsKICAgICAgICAgICAgdmFyIGxhc3RQb3MgPSAwOwogICAgICAgICAgICBncm91cHMuZm9yRWFjaChmdW5jdGlvbihncm91cCkgewogICAgICAgICAgICAgICAgbmV3SHRtbCArPSBodG1sLnN1YnN0cmluZyhsYXN0UG9zLCBncm91cC5zdGFydCk7CiAgICAgICAgICAgICAgICBuZXdIdG1sICs9IGJ1aWxkTmVzdGVkTGlzdChncm91cC5pdGVtcyk7CiAgICAgICAgICAgICAgICBsYXN0UG9zID0gZ3JvdXAuZW5kOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgbmV3SHRtbCArPSBodG1sLnN1YnN0cmluZyhsYXN0UG9zKTsKICAgICAgICAgICAgaHRtbCA9IG5ld0h0bWw7CiAgICAgICAgfQoKICAgICAgICAvLyDilIDilIAgNC4gSW1hZ2VzIDogZ2FyZGVyIGRhdGE6IGV0IGh0dHA6LCBzdXBwcmltZXIgZmlsZTovLyDilIDilIAKICAgICAgICBodG1sID0gaHRtbC5yZXBsYWNlKC88aW1nKFtePl0qKT4vZ2ksIGZ1bmN0aW9uKG0sIGF0dHJzKSB7CiAgICAgICAgICAgIHZhciBzcmNNID0gL3NyY1xzKj1ccypbIiddKFteIiddKylbIiddL2kuZXhlYyhhdHRycyk7CiAgICAgICAgICAgIGlmICghc3JjTSkgcmV0dXJuICcnOwogICAgICAgICAgICB2YXIgc3JjID0gc3JjTVsxXTsKICAgICAgICAgICAgaWYgKHNyYy5zdGFydHNXaXRoKCdkYXRhOicpIHx8IHNyYy5zdGFydHNXaXRoKCdodHRwOi8vJykgfHwgc3JjLnN0YXJ0c1dpdGgoJ2h0dHBzOi8vJykpIHsKICAgICAgICAgICAgICAgIHJldHVybiAnPGltZyBzcmM9IicgKyBzcmMgKyAnIiBzdHlsZT0ibWF4LXdpZHRoOjEwMCU7aGVpZ2h0OmF1dG87Ij4nOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiAnJzsKICAgICAgICB9KTsKCiAgICAgICAgLy8g4pSA4pSAIDUuIFN1cHByaW1lciBwcm9wcmnDqXTDqXMgbXNvLSBkYW5zIHN0eWxlcyDilIDilIAKICAgICAgICBodG1sID0gaHRtbC5yZXBsYWNlKC9tc28tW2EtekEtWlwtXStccyo6W147Il0qKDt8KD89XHMqIikpL2csICcnKTsKCiAgICAgICAgLy8g4pSA4pSAIDYuIFN1cHByaW1lciBmb250LWZhbWlseSBTeW1ib2wvV2luZ2RpbmdzIOKUgOKUgAogICAgICAgIGh0bWwgPSBodG1sLnJlcGxhY2UoL2ZvbnQtZmFtaWx5XHMqOlxzKlsiJ10/XHMqKD86U3ltYm9sfFdpbmdkaW5nc1teOywnIl0qKVxzKlsiJ10/XHMqOz8vZ2ksICcnKTsKCiAgICAgICAgLy8g4pSA4pSAIDcuIFN1cHByaW1lciBjbGFzc2VzIE1zbyDilIDilIAKICAgICAgICBodG1sID0gaHRtbC5yZXBsYWNlKC9ccypjbGFzcz0iTXNvW14iXSoiL2dpLCAnJyk7CgogICAgICAgIC8vIOKUgOKUgCA4LiBOZXR0b3llciBzdHlsZXMgdmlkZXMgZXQgcGFyYWdyYXBoZXMgdmlkZXMg4pSA4pSACiAgICAgICAgaHRtbCA9IGh0bWwucmVwbGFjZSgvXHMqc3R5bGU9IlxzKjs/XHMqIi9naSwgJycpOwogICAgICAgIGh0bWwgPSBodG1sLnJlcGxhY2UoLzxwW14+XSo+XHMqKDxiclxzKlwvPz4pP1xzKjxcL3A+L2dpLCAnJyk7CiAgICAgICAgaHRtbCA9IGh0bWwucmVwbGFjZSgvPHNwYW5ccyo+KFtcc1xTXSo/KTxcL3NwYW4+L2dpLCAnJDEnKTsKCiAgICAgICAgcmV0dXJuIGh0bWwudHJpbSgpOwogICAgfQoKICAgIGZ1bmN0aW9uIGFwcGx5Q2xlYW5QYXN0ZShlZGl0b3IsIGh0bWwpIHsKICAgICAgICB2YXIgY2xlYW5lZCA9IGNsZWFuV29yZEh0bWwoaHRtbCk7CiAgICAgICAgZWRpdG9yLmZvY3VzKCk7CiAgICAgICAgdmFyIHNlbCA9IHdpbmRvdy5nZXRTZWxlY3Rpb24oKTsKICAgICAgICB2YXIgcmFuZ2UgPSBzZWwgJiYgc2VsLnJhbmdlQ291bnQgPyBzZWwuZ2V0UmFuZ2VBdCgwKSA6IG51bGw7CiAgICAgICAgaWYgKHJhbmdlICYmIGVkaXRvci5jb250YWlucyhyYW5nZS5jb21tb25BbmNlc3RvckNvbnRhaW5lcikpIHsKICAgICAgICAgICAgcmFuZ2UuZGVsZXRlQ29udGVudHMoKTsKICAgICAgICAgICAgdmFyIGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgICAgICAgICBkaXYuaW5uZXJIVE1MID0gY2xlYW5lZDsKICAgICAgICAgICAgdmFyIGZyYWcgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7CiAgICAgICAgICAgIHZhciBub2RlOwogICAgICAgICAgICB3aGlsZSAoKG5vZGUgPSBkaXYuZmlyc3RDaGlsZCkpIGZyYWcuYXBwZW5kQ2hpbGQobm9kZSk7CiAgICAgICAgICAgIHJhbmdlLmluc2VydE5vZGUoZnJhZyk7CiAgICAgICAgICAgIC8vIE1vdmUgY3Vyc29yIHRvIGVuZCBvZiBpbnNlcnRlZCBjb250ZW50CiAgICAgICAgICAgIHJhbmdlLmNvbGxhcHNlKGZhbHNlKTsKICAgICAgICAgICAgc2VsLnJlbW92ZUFsbFJhbmdlcygpOwogICAgICAgICAgICBzZWwuYWRkUmFuZ2UocmFuZ2UpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGRvY3VtZW50LmV4ZWNDb21tYW5kKCdpbnNlcnRIVE1MJywgZmFsc2UsIGNsZWFuZWQpOwogICAgICAgIH0KICAgIH0KCiAgICBhc3luYyBmdW5jdGlvbiBwYXN0ZUZyb21Xb3JkKCkgewogICAgICAgIC8vIFVzZSB0cmFja2VkIGVkaXRvciAoYnV0dG9uIGNsaWNrIHN0ZWFscyBmb2N1cyBmcm9tIGNvbnRlbnRlZGl0YWJsZSkKICAgICAgICB2YXIgZWRpdG9yID0gd2luZG93Ll9sYXN0Rm9jdXNlZEVkaXRvciB8fCBkb2N1bWVudC5hY3RpdmVFbGVtZW50OwogICAgICAgIGlmICghZWRpdG9yIHx8ICFlZGl0b3IuaXNDb250ZW50RWRpdGFibGUpIHsKICAgICAgICAgICAgYWxlcnQoJ0NsaXF1ZXogZFwnYWJvcmQgZGFucyBsYSB6b25lIGRlIHRleHRlLCBwdWlzIHV0aWxpc2V6IGNlIGJvdXRvbi4nKTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICBlZGl0b3IuZm9jdXMoKTsKICAgICAgICB0cnkgewogICAgICAgICAgICBpZiAoIW5hdmlnYXRvci5jbGlwYm9hcmQgfHwgIW5hdmlnYXRvci5jbGlwYm9hcmQucmVhZCkgdGhyb3cgbmV3IEVycm9yKCdBUEkgbm9uIGRpc3BvbmlibGUnKTsKICAgICAgICAgICAgdmFyIGl0ZW1zID0gYXdhaXQgbmF2aWdhdG9yLmNsaXBib2FyZC5yZWFkKCk7CiAgICAgICAgICAgIGZvciAodmFyIGl0ZW0gb2YgaXRlbXMpIHsKICAgICAgICAgICAgICAgIGlmIChpdGVtLnR5cGVzLmluY2x1ZGVzKCd0ZXh0L2h0bWwnKSkgewogICAgICAgICAgICAgICAgICAgIHZhciBibG9iID0gYXdhaXQgaXRlbS5nZXRUeXBlKCd0ZXh0L2h0bWwnKTsKICAgICAgICAgICAgICAgICAgICB2YXIgaHRtbCA9IGF3YWl0IGJsb2IudGV4dCgpOwogICAgICAgICAgICAgICAgICAgIGFwcGx5Q2xlYW5QYXN0ZShlZGl0b3IsIGh0bWwpOwogICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmIChpdGVtLnR5cGVzLmluY2x1ZGVzKCd0ZXh0L3BsYWluJykpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgYmxvYiA9IGF3YWl0IGl0ZW0uZ2V0VHlwZSgndGV4dC9wbGFpbicpOwogICAgICAgICAgICAgICAgICAgIHZhciB0eHQgPSBhd2FpdCBibG9iLnRleHQoKTsKICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5leGVjQ29tbWFuZCgnaW5zZXJ0VGV4dCcsIGZhbHNlLCB0eHQpOwogICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0gY2F0Y2goZSkgewogICAgICAgICAgICAvLyBGYWxsYmFjazogYXNrIHVzZXIgdG8gdXNlIEN0cmwrViDigJQgdGhlIHBhc3RlIGV2ZW50IGxpc3RlbmVyIHdpbGwgY2xlYW4gaXQKICAgICAgICAgICAgYWxlcnQoJ1V0aWxpc2V6IEN0cmwrViBkaXJlY3RlbWVudCBkYW5zIGxcJ8OpZGl0ZXVyIDogbGEgbWlzZSBlbiBmb3JtZSBXb3JkIHNlcmEgYXV0b21hdGlxdWVtZW50IHByw6lzZXJ2w6llIGV0IG5ldHRvecOpZS4nKTsKICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gaW5pdFdvcmRQYXN0ZSgpIHsKICAgICAgICAvLyBBam91dGVyIHVuIMOpY291dGV1ciBkZSBjb2xsYWdlIHN1ciBUT1VTIGxlcyDDqWRpdGV1cnMKICAgICAgICAvLyBDJ2VzdCBsYSBtw6l0aG9kZSBsYSBwbHVzIGZpYWJsZSA6IGludGVyY2VwdGUgQ3RybCtWIG5hdGl2ZW1lbnQKICAgICAgICBmdW5jdGlvbiB3b3JkUGFzdGVIYW5kbGVyKGUpIHsKICAgICAgICAgICAgdmFyIGNkID0gZS5jbGlwYm9hcmREYXRhIHx8IHdpbmRvdy5jbGlwYm9hcmREYXRhOwogICAgICAgICAgICBpZiAoIWNkKSByZXR1cm47CiAgICAgICAgICAgIHZhciBlZGl0b3IgPSBlLmN1cnJlbnRUYXJnZXQ7CgogICAgICAgICAgICAvLyDilIDilIAgQ2hlcmNoZXIgdW5lIGltYWdlIGRhbnMgaXRlbXMgKHNjcmVlbnNob3QsIGNvcGllIGQnaW1hZ2UpIOKUgOKUgAogICAgICAgICAgICBmdW5jdGlvbiBnZXRJbWFnZUl0ZW0oY2QpIHsKICAgICAgICAgICAgICAgIGlmICghY2QuaXRlbXMpIHJldHVybiBudWxsOwogICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjZC5pdGVtcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgICAgIGlmIChjZC5pdGVtc1tpXS50eXBlLnN0YXJ0c1dpdGgoJ2ltYWdlLycpKSByZXR1cm4gY2QuaXRlbXNbaV07CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgdmFyIGh0bWwgPSBjZC5nZXREYXRhKCd0ZXh0L2h0bWwnKTsKICAgICAgICAgICAgdmFyIGltZ0l0ZW0gPSBnZXRJbWFnZUl0ZW0oY2QpOwoKICAgICAgICAgICAgLy8g4pSA4pSAIENhcyAxIDogSW1hZ2Ugc2V1bGUgKHBhcyBkZSBIVE1MIG91IEhUTUwgdmlkZSkg4pSA4pSACiAgICAgICAgICAgIGlmIChpbWdJdGVtICYmICghaHRtbCB8fCBodG1sLnRyaW0oKSA9PT0gJycpKSB7CiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgICAgICAgICB2YXIgYmxvYiA9IGltZ0l0ZW0uZ2V0QXNGaWxlKCk7CiAgICAgICAgICAgICAgICBpZiAoIWJsb2IpIHJldHVybjsKICAgICAgICAgICAgICAgIHZhciByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpOwogICAgICAgICAgICAgICAgcmVhZGVyLm9ubG9hZCA9IGZ1bmN0aW9uKGV2KSB7CiAgICAgICAgICAgICAgICAgICAgZWRpdG9yLmZvY3VzKCk7CiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2luc2VydEhUTUwnLCBmYWxzZSwKICAgICAgICAgICAgICAgICAgICAgICAgJzxpbWcgc3JjPSInICsgZXYudGFyZ2V0LnJlc3VsdCArICciIHN0eWxlPSJtYXgtd2lkdGg6MTAwJTtoZWlnaHQ6YXV0bztkaXNwbGF5OmJsb2NrO21hcmdpbjo0cHggMDsiPicpOwogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIHJlYWRlci5yZWFkQXNEYXRhVVJMKGJsb2IpOwogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAoIWh0bWwpIHJldHVybjsKCiAgICAgICAgICAgIC8vIFNpIHBhcyBkZSBtYXJxdWV1ciBXb3JkIG5pIEhUTUwgcmljaGUg4oaSIGxhaXNzZXIgbGUgbmF2aWdhdGV1ciBnw6lyZXIKICAgICAgICAgICAgdmFyIGlzV29yZCA9IGh0bWwuaW5jbHVkZXMoJ21zby0nKSB8fCBodG1sLmluY2x1ZGVzKCd1cm46c2NoZW1hcy1taWNyb3NvZnQtY29tJykgfHwKICAgICAgICAgICAgICAgICAgICAgICAgIGh0bWwuaW5jbHVkZXMoJ01zb05vcm1hbCcpIHx8IGh0bWwuaW5jbHVkZXMoJ1dvcmREb2N1bWVudCcpOwogICAgICAgICAgICB2YXIgaXNSaWNoSHRtbCA9IGh0bWwuaW5jbHVkZXMoJzx1bCcpIHx8IGh0bWwuaW5jbHVkZXMoJzxvbCcpIHx8CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaHRtbC5pbmNsdWRlcygnPHRhYmxlJykgfHwgaHRtbC5pbmNsdWRlcygnPGltZycpOwogICAgICAgICAgICBpZiAoIWlzV29yZCAmJiAhaXNSaWNoSHRtbCkgcmV0dXJuOwoKICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwoKICAgICAgICAgICAgLy8g4pSA4pSAIENhcyAyIDogSFRNTCBXb3JkIGF2ZWMgcG9zc2libGVzIGltYWdlcyBpbmxpbmUg4pSA4pSACiAgICAgICAgICAgIGlmIChpbWdJdGVtICYmIGlzV29yZCkgewogICAgICAgICAgICAgICAgdmFyIGJsb2IyID0gaW1nSXRlbS5nZXRBc0ZpbGUoKTsKICAgICAgICAgICAgICAgIGlmIChibG9iMikgewogICAgICAgICAgICAgICAgICAgIHZhciByZWFkZXIyID0gbmV3IEZpbGVSZWFkZXIoKTsKICAgICAgICAgICAgICAgICAgICByZWFkZXIyLm9ubG9hZCA9IGZ1bmN0aW9uKGV2KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJlbXBsYWNlciBsZSBwcmVtaWVyIDxpbWc+IHNhbnMgZGF0YTogc3JjIHBhciBjZXR0ZSBpbWFnZQogICAgICAgICAgICAgICAgICAgICAgICB2YXIgcHJvY2Vzc2VkSHRtbCA9IGh0bWwucmVwbGFjZSgvPGltZyhbXj5dKik+L2ksIGZ1bmN0aW9uKG0sIGF0dHJzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3JjTSA9IC9zcmNccyo9XHMqWyInXShbXiInXSspWyInXS9pLmV4ZWMoYXR0cnMpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNyY00gJiYgc3JjTVsxXS5zdGFydHNXaXRoKCdkYXRhOicpKSByZXR1cm4gbTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAnPGltZyBzcmM9IicgKyBldi50YXJnZXQucmVzdWx0ICsgJyIgc3R5bGU9Im1heC13aWR0aDoxMDAlO2hlaWdodDphdXRvOyI+JzsKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGFwcGx5Q2xlYW5QYXN0ZShlZGl0b3IsIHByb2Nlc3NlZEh0bWwpOwogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgcmVhZGVyMi5yZWFkQXNEYXRhVVJMKGJsb2IyKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGFwcGx5Q2xlYW5QYXN0ZShlZGl0b3IsIGh0bWwpOwogICAgICAgIH0KICAgICAgICAvLyBBdHRhY2hlciDDoCB0b3VzIGxlcyDDqWRpdGV1cnMgZXhpc3RhbnRzCiAgICAgICAgLy8gVHJhY2sgbGFzdCBmb2N1c2VkIGVkaXRvciBzbyBidXR0b24gY2xpY2sgZG9lc24ndCBicmVhayBmb2N1cyBkZXRlY3Rpb24KICAgICAgICBmdW5jdGlvbiB0cmFja0ZvY3VzKGVsKSB7CiAgICAgICAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoJ2ZvY3VzJywgZnVuY3Rpb24oKSB7IHdpbmRvdy5fbGFzdEZvY3VzZWRFZGl0b3IgPSBlbDsgfSk7CiAgICAgICAgfQogICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ1tjb250ZW50ZWRpdGFibGU9InRydWUiXScpLmZvckVhY2goZnVuY3Rpb24oZWwpIHsKICAgICAgICAgICAgZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcigncGFzdGUnLCB3b3JkUGFzdGVIYW5kbGVyKTsKICAgICAgICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcigncGFzdGUnLCB3b3JkUGFzdGVIYW5kbGVyKTsKICAgICAgICAgICAgdHJhY2tGb2N1cyhlbCk7CiAgICAgICAgfSk7CiAgICAgICAgLy8gT2JzZXJ2ZXIgcG91ciBmdXR1cnMgw6lkaXRldXJzIGR5bmFtaXF1ZXMKICAgICAgICBpZiAod2luZG93Ll93b3JkUGFzdGVPYnNlcnZlcikgd2luZG93Ll93b3JkUGFzdGVPYnNlcnZlci5kaXNjb25uZWN0KCk7CiAgICAgICAgd2luZG93Ll93b3JkUGFzdGVPYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKGZ1bmN0aW9uKG11dGF0aW9ucykgewogICAgICAgICAgICBtdXRhdGlvbnMuZm9yRWFjaChmdW5jdGlvbihtKSB7CiAgICAgICAgICAgICAgICBtLmFkZGVkTm9kZXMuZm9yRWFjaChmdW5jdGlvbihub2RlKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKG5vZGUubm9kZVR5cGUgPT09IDEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5vZGUuY29udGVudEVkaXRhYmxlID09PSAndHJ1ZScpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vZGUuYWRkRXZlbnRMaXN0ZW5lcigncGFzdGUnLCB3b3JkUGFzdGVIYW5kbGVyKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vZGUuYWRkRXZlbnRMaXN0ZW5lcignZm9jdXMnLCBmdW5jdGlvbigpIHsgd2luZG93Ll9sYXN0Rm9jdXNlZEVkaXRvciA9IG5vZGU7IH0pOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIG5vZGUucXVlcnlTZWxlY3RvckFsbCAmJiBub2RlLnF1ZXJ5U2VsZWN0b3JBbGwoJ1tjb250ZW50ZWRpdGFibGU9InRydWUiXScpLmZvckVhY2goZnVuY3Rpb24oZWwpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoJ3Bhc3RlJywgd29yZFBhc3RlSGFuZGxlcik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbC5hZGRFdmVudExpc3RlbmVyKCdmb2N1cycsIGZ1bmN0aW9uKCkgeyB3aW5kb3cuX2xhc3RGb2N1c2VkRWRpdG9yID0gZWw7IH0pOwogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICAgICAgd2luZG93Ll93b3JkUGFzdGVPYnNlcnZlci5vYnNlcnZlKGRvY3VtZW50LmJvZHksIHsgY2hpbGRMaXN0OiB0cnVlLCBzdWJ0cmVlOiB0cnVlIH0pOwogICAgfQoKICAgIAovKiA9PT09PSBQSUxPVEU6IENhbGVuZHJpZXIgKGFnZW5kYXMgY29jaMOpcykgKyAxNSBwcm9jaGFpbnMgam91cnMgPT09PT0gKi8KZnVuY3Rpb24gX3BpbG90ZUxvY2FsSVNPKGQpewogICAgY29uc3QgeT1kLmdldEZ1bGxZZWFyKCk7IGNvbnN0IG09U3RyaW5nKGQuZ2V0TW9udGgoKSsxKS5wYWRTdGFydCgyLCcwJyk7IGNvbnN0IGRhPVN0cmluZyhkLmdldERhdGUoKSkucGFkU3RhcnQoMiwnMCcpOwogICAgcmV0dXJuIGAke3l9LSR7bX0tJHtkYX1gOwp9CmZ1bmN0aW9uIF9waWxvdGVBZGREYXlzKGlzbywgZGF5cyl7CiAgICBjb25zdCBbeSxtLGRdPWlzby5zcGxpdCgnLScpLm1hcChOdW1iZXIpOwogICAgY29uc3QgZHQ9bmV3IERhdGUoeSwgbS0xLCBkLCAxMiwgMCwgMCk7CiAgICBkdC5zZXREYXRlKGR0LmdldERhdGUoKStkYXlzKTsKICAgIHJldHVybiBfcGlsb3RlTG9jYWxJU08oZHQpOwp9CmZ1bmN0aW9uIF9waWxvdGVGbXREYXRlRnIoaXNvKXsKICAgIGNvbnN0IFt5LG0sZF09aXNvLnNwbGl0KCctJykubWFwKE51bWJlcik7CiAgICBjb25zdCBkdD1uZXcgRGF0ZSh5LCBtLTEsIGQsIDEyLCAwLCAwKTsKICAgIGNvbnN0IG9wdHM9e3dlZWtkYXk6J3Nob3J0JywgZGF5OicyLWRpZ2l0JywgbW9udGg6JzItZGlnaXQnfTsKICAgIC8vIGV4OiAibWVyLiAyNi8wMiIKICAgIHJldHVybiBkdC50b0xvY2FsZURhdGVTdHJpbmcoJ2ZyLUZSJywgb3B0cykucmVwbGFjZSgnLicsICcnKTsKfQpmdW5jdGlvbiBfcGlsb3RlU2FmZShzdHIpeyByZXR1cm4gKHN0cnx8JycpLnRvU3RyaW5nKCkucmVwbGFjZSgvWzw+JiJdL2csIHM9Pih7ICc8JzonJmx0OycsJz4nOicmZ3Q7JywnJic6JyZhbXA7JywnIic6JyZxdW90OycgfVtzXSkpOyB9CgpmdW5jdGlvbiByZW5kZXJQaWxvdENhbDE1KCl7CiAgICBjb25zdCBtZW51ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21lbnUzJyk7CiAgICBpZighbWVudSkgcmV0dXJuOwoKICAgIC8vIFVJIGNvbnRhaW5lciAoMiBjb2xvbm5lcykKICAgIG1lbnUuaW5uZXJIVE1MID0gYAogICAgICA8ZGl2IHN0eWxlPSJkaXNwbGF5OmZsZXg7YWxpZ24taXRlbXM6ZmxleC1lbmQ7anVzdGlmeS1jb250ZW50OnNwYWNlLWJldHdlZW47Z2FwOjEwcHg7bWFyZ2luLWJvdHRvbToxMnB4OyI+CiAgICAgICAgPGRpdj4KICAgICAgICAgIDxkaXYgc3R5bGU9ImZvbnQtd2VpZ2h0OjgwMDtmb250LXNpemU6MS4wNXJlbTtjb2xvcjojMmMzZTUwOyI+Q2FsZW5kcmllciDigJQgMTUgcHJvY2hhaW5zIGpvdXJzPC9kaXY+CiAgICAgICAgICA8ZGl2IHN0eWxlPSJmb250LXNpemU6Ljc4cmVtO2NvbG9yOiM3ZjhjOGQ7bWFyZ2luLXRvcDoycHg7Ij5BZ2VuZGFzIGNvY2jDqXMgZGFucyBQYXJhbcOpdHJhZ2VzIOKAoiBMaXN0ZSBjb21wYWN0ZSAoZGF0ZSArIGhldXJlICsgZGVzY3JpcHRpb24pPC9kaXY+CiAgICAgICAgPC9kaXY+CiAgICAgICAgPGJ1dHRvbiBvbmNsaWNrPSJyZW5kZXJQaWxvdENhbDE1KCkiIGNsYXNzPSJidG4iIHN0eWxlPSJwYWRkaW5nOjhweCAxMHB4O2JvcmRlci1yYWRpdXM6MTBweDtmb250LXNpemU6LjhyZW07Ij4KICAgICAgICAgIDxpIGNsYXNzPSJmYXMgZmEtcm90YXRlLXJpZ2h0Ij48L2k+IEFjdHVhbGlzZXIKICAgICAgICA8L2J1dHRvbj4KICAgICAgPC9kaXY+CiAgICAgIDxkaXYgaWQ9InBpbG90LWNhbDE1LWdyaWQiIHN0eWxlPSJkaXNwbGF5OmdyaWQ7Z3JpZC10ZW1wbGF0ZS1jb2x1bW5zOnJlcGVhdCgyLG1pbm1heCgwLDFmcikpO2dhcDoxMnB4OyI+PC9kaXY+CiAgICAgIDxkaXYgc3R5bGU9Im1hcmdpbi10b3A6MTBweDtmb250LXNpemU6LjcycmVtO2NvbG9yOiM5NWE1YTY7Ij4KICAgICAgICBBc3R1Y2UgOiBzaSB1biBhZ2VuZGEgZXN0IGNvY2jDqSBtYWlzIHNhbnMgw6l2w6luZW1lbnQgc3VyIDE1IGpvdXJzLCBpbCBz4oCZYWZmaWNoZSBxdWFuZCBtw6ptZS4KICAgICAgPC9kaXY+CiAgICBgOwoKICAgIC8vIFJlYWQgUElMT1RFIHNldHRpbmdzIChkYW5zIGxlIG3Dqm1lIG5hdmlnYXRldXIpCiAgICBsZXQgcyA9IHt9OwogICAgdHJ5IHsgcyA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3BpbG90ZV9zdWl0ZV9zZXR0aW5ncycpIHx8ICd7fScpOyB9IGNhdGNoKGUpeyBzID0ge307IH0KCiAgICBjb25zdCBnU2VsID0gQXJyYXkuaXNBcnJheShzLmdjYWxTZWwpID8gcy5nY2FsU2VsIDogW107CiAgICBjb25zdCBvU2VsID0gQXJyYXkuaXNBcnJheShzLm91dGxvb2tTZWwpID8gcy5vdXRsb29rU2VsIDogW107CiAgICBjb25zdCBzZWxlY3RlZCA9IFsuLi5uZXcgU2V0KFsuLi5nU2VsLCAuLi5vU2VsXSldOwoKICAgIGNvbnN0IGdDYWxzID0gQXJyYXkuaXNBcnJheShzLmdjYWxDYWxzKSA/IHMuZ2NhbENhbHMgOiBbXTsKICAgIGNvbnN0IG9DYWxzID0gQXJyYXkuaXNBcnJheShzLm91dGxvb2tDYWxzKSA/IHMub3V0bG9va0NhbHMgOiBbXTsKCiAgICBjb25zdCBjYWxNZXRhID0ge307CiAgICBnQ2Fscy5mb3JFYWNoKGMgPT4gY2FsTWV0YVtjLmlkXSA9IHsgaWQ6Yy5pZCwgbmFtZTpjLm5hbWUgfHwgYy5zdW1tYXJ5IHx8ICdBZ2VuZGEnLCBjb2xvcjpjLmJnIHx8IGMuY29sb3IgfHwgJyMzNDk4ZGInLCBzb3VyY2U6J0dvb2dsZScgfSk7CiAgICBvQ2Fscy5mb3JFYWNoKGMgPT4gY2FsTWV0YVtjLmlkXSA9IHsgaWQ6Yy5pZCwgbmFtZTpjLm5hbWUgfHwgYy5kaXNwbGF5TmFtZSB8fCAnQWdlbmRhJywgY29sb3I6Yy5iZyB8fCBjLmNvbG9yIHx8ICcjOGU0NGFkJywgc291cmNlOidPdXRsb29rJyB9KTsKCiAgICAvLyBFdmVudHMKICAgIGNvbnN0IGdFdiA9IEFycmF5LmlzQXJyYXkocy5nY2FsRXZlbnRzKSA/IHMuZ2NhbEV2ZW50cyA6IFtdOwogICAgY29uc3Qgb0V2ID0gQXJyYXkuaXNBcnJheShzLm91dGxvb2tFdmVudHMpID8gcy5vdXRsb29rRXZlbnRzIDogW107CiAgICBsZXQgYWxsID0gWy4uLmdFdiwgLi4ub0V2XTsKCiAgICAvLyBJZiBubyBzZWxlY3Rpb24gc3RvcmVkLCBmYWxsYmFjayB0byAiYWxsIGNhbGVuZGFycyBmb3VuZCBpbiBldmVudHMiCiAgICBjb25zdCBlZmZlY3RpdmVTZWxlY3RlZCA9IHNlbGVjdGVkLmxlbmd0aCA/IHNlbGVjdGVkIDogWy4uLm5ldyBTZXQoYWxsLm1hcChlID0+IGUuY2FsSWQpLmZpbHRlcihCb29sZWFuKSldOwoKICAgIC8vIERhdGUgd2luZG93OiB0b2RheSAuLiB0b2RheSsxNCAoMTUgZGF5cykKICAgIGNvbnN0IHRvZGF5SXNvID0gX3BpbG90ZUxvY2FsSVNPKG5ldyBEYXRlKCkpOwogICAgY29uc3QgZW5kSXNvID0gX3BpbG90ZUFkZERheXModG9kYXlJc28sIDE0KTsKCiAgICBhbGwgPSBhbGwuZmlsdGVyKGUgPT4gZSAmJiBlLmRhdGUgJiYgZS5kYXRlID49IHRvZGF5SXNvICYmIGUuZGF0ZSA8PSBlbmRJc28gJiYgZWZmZWN0aXZlU2VsZWN0ZWQuaW5jbHVkZXMoZS5jYWxJZCkpOwoKICAgIC8vIHNvcnQgY2hyb25vbG9naWNhbGx5CiAgICBhbGwuc29ydCgoYSxiKT0+IChhLmRhdGUgKyAnICcgKyAoYS50aW1lfHwnMDA6MDAnKSkubG9jYWxlQ29tcGFyZShiLmRhdGUgKyAnICcgKyAoYi50aW1lfHwnMDA6MDAnKSkpOwoKICAgIC8vIGdyb3VwIGJ5IGNhbGVuZGFyCiAgICBjb25zdCBieUNhbCA9IHt9OwogICAgZWZmZWN0aXZlU2VsZWN0ZWQuZm9yRWFjaChpZCA9PiBieUNhbFtpZF0gPSBbXSk7CiAgICBhbGwuZm9yRWFjaChlID0+IHsgaWYoIWJ5Q2FsW2UuY2FsSWRdKSBieUNhbFtlLmNhbElkXT1bXTsgYnlDYWxbZS5jYWxJZF0ucHVzaChlKTsgfSk7CgogICAgY29uc3QgZ3JpZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwaWxvdC1jYWwxNS1ncmlkJyk7CiAgICBpZighZ3JpZCkgcmV0dXJuOwoKICAgIC8vIFJlc3BvbnNpdmU6IDIgY29sb25uZXMgZGVza3RvcCwgMSBzdXIgcGV0aXQgw6ljcmFuCiAgICBjb25zdCBtcSA9IHdpbmRvdy5tYXRjaE1lZGlhKCcobWF4LXdpZHRoOiA5MDBweCknKTsKICAgIGNvbnN0IGFwcGx5Q29scyA9ICgpPT57IGdyaWQuc3R5bGUuZ3JpZFRlbXBsYXRlQ29sdW1ucyA9IG1xLm1hdGNoZXMgPyAnMWZyJyA6ICdyZXBlYXQoMixtaW5tYXgoMCwxZnIpKSc7IH07CiAgICBhcHBseUNvbHMoKTsgbXEub25jaGFuZ2UgPSBhcHBseUNvbHM7CgogICAgLy8gUmVuZGVyIGNhcmRzCiAgICBlZmZlY3RpdmVTZWxlY3RlZC5mb3JFYWNoKGNhbElkID0+IHsKICAgICAgICBjb25zdCBtZXRhID0gY2FsTWV0YVtjYWxJZF0gfHwgeyBpZDpjYWxJZCwgbmFtZTonQWdlbmRhJywgY29sb3I6JyNiZGMzYzcnLCBzb3VyY2U6JycgfTsKICAgICAgICBjb25zdCBldmVudHMgPSBieUNhbFtjYWxJZF0gfHwgW107CiAgICAgICAgY29uc3QgY2FyZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgICAgIGNhcmQuc3R5bGUuY3NzVGV4dCA9ICJiYWNrZ3JvdW5kOiNmZmY7Ym9yZGVyOjFweCBzb2xpZCByZ2JhKDAsMCwwLC4wOCk7Ym9yZGVyLXJhZGl1czoxNHB4O2JveC1zaGFkb3c6MCA4cHggMThweCByZ2JhKDAsMCwwLC4wNik7b3ZlcmZsb3c6aGlkZGVuO21pbi1oZWlnaHQ6MTQwcHg7IjsKICAgICAgICBjYXJkLmlubmVySFRNTCA9IGAKICAgICAgICAgIDxkaXYgc3R5bGU9ImRpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXI7anVzdGlmeS1jb250ZW50OnNwYWNlLWJldHdlZW47cGFkZGluZzoxMHB4IDEycHg7YmFja2dyb3VuZDpsaW5lYXItZ3JhZGllbnQoOTBkZWcsICR7bWV0YS5jb2xvcn0yMiwgdHJhbnNwYXJlbnQpO2JvcmRlci1ib3R0b206MXB4IHNvbGlkIHJnYmEoMCwwLDAsLjA2KTsiPgogICAgICAgICAgICA8ZGl2IHN0eWxlPSJkaXNwbGF5OmZsZXg7YWxpZ24taXRlbXM6Y2VudGVyO2dhcDoxMHB4O21pbi13aWR0aDowOyI+CiAgICAgICAgICAgICAgPHNwYW4gc3R5bGU9IndpZHRoOjEwcHg7aGVpZ2h0OjEwcHg7Ym9yZGVyLXJhZGl1czo5OTlweDtiYWNrZ3JvdW5kOiR7bWV0YS5jb2xvcn07Ym94LXNoYWRvdzowIDAgMCAzcHggJHttZXRhLmNvbG9yfTIyOyI+PC9zcGFuPgogICAgICAgICAgICAgIDxkaXYgc3R5bGU9Im1pbi13aWR0aDowOyI+CiAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJmb250LXdlaWdodDo4MDA7Y29sb3I6IzJjM2U1MDtmb250LXNpemU6LjkycmVtO3doaXRlLXNwYWNlOm5vd3JhcDtvdmVyZmxvdzpoaWRkZW47dGV4dC1vdmVyZmxvdzplbGxpcHNpczsiPiR7X3BpbG90ZVNhZmUobWV0YS5uYW1lKX08L2Rpdj4KICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9ImZvbnQtc2l6ZTouNzByZW07Y29sb3I6Izk1YTVhNjttYXJnaW4tdG9wOjFweDsiPiR7ZXZlbnRzLmxlbmd0aH0gw6l2w6huZW1lbnQocyk8L2Rpdj4KICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDxkaXYgc3R5bGU9ImZvbnQtc2l6ZTouNzByZW07Y29sb3I6Izk1YTVhNjsiPjE1IGpvdXJzPC9kaXY+CiAgICAgICAgICA8L2Rpdj4KICAgICAgICAgIDxkaXYgc3R5bGU9InBhZGRpbmc6MTBweCAxMnB4O2Rpc3BsYXk6ZmxleDtmbGV4LWRpcmVjdGlvbjpjb2x1bW47Z2FwOjZweDsiPgogICAgICAgICAgICAke2V2ZW50cy5sZW5ndGggPyBldmVudHMubWFwKGV2ID0+IHsKICAgICAgICAgICAgICAgIGNvbnN0IGRhdGUgPSBfcGlsb3RlRm10RGF0ZUZyKGV2LmRhdGUpOwogICAgICAgICAgICAgICAgY29uc3QgdGltZSA9IGV2LnRpbWUgPyBldi50aW1lIDogJ+KAlCc7CiAgICAgICAgICAgICAgICBjb25zdCB0aXRsZSA9IF9waWxvdGVTYWZlKGV2LnRpdGxlIHx8IGV2LnN1bW1hcnkgfHwgJyhTYW5zIHRpdHJlKScpOwogICAgICAgICAgICAgICAgcmV0dXJuIGAKICAgICAgICAgICAgICAgICAgPGRpdiB0aXRsZT0iJHt0aXRsZX0iIHN0eWxlPSJkaXNwbGF5OmZsZXg7Z2FwOjEwcHg7YWxpZ24taXRlbXM6YmFzZWxpbmU7bGluZS1oZWlnaHQ6MS4xNTsiPgogICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9ImZsZXg6MCAwIGF1dG87Zm9udC1zaXplOi43MnJlbTtjb2xvcjojN2Y4YzhkO3doaXRlLXNwYWNlOm5vd3JhcDsiPiR7ZGF0ZX0g4oCiICR7dGltZX08L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJmbGV4OjEgMSBhdXRvO2ZvbnQtc2l6ZTouODByZW07Y29sb3I6IzJjM2U1MDt3aGl0ZS1zcGFjZTpub3dyYXA7b3ZlcmZsb3c6aGlkZGVuO3RleHQtb3ZlcmZsb3c6ZWxsaXBzaXM7Ij4ke3RpdGxlfTwvZGl2PgogICAgICAgICAgICAgICAgICA8L2Rpdj5gOwogICAgICAgICAgICB9KS5qb2luKCcnKSA6IGAKICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJmb250LXNpemU6LjgwcmVtO2NvbG9yOiM5NWE1YTY7cGFkZGluZzo2cHggMDsiPkF1Y3VuIMOpdsOobmVtZW50IHN1ciBsZXMgMTUgcHJvY2hhaW5zIGpvdXJzLjwvZGl2PgogICAgICAgICAgICBgfQogICAgICAgICAgPC9kaXY+CiAgICAgICAgYDsKICAgICAgICBncmlkLmFwcGVuZENoaWxkKGNhcmQpOwogICAgfSk7Cn0KCjwvc2NyaXB0PgoKICAgIDwhLS0gTW9kYWwgUHJvY8OpZHVyZSAtLT4KICAgIDxkaXYgaWQ9InByb2NNb2QiIGNsYXNzPSJtLW92IiBzdHlsZT0iZGlzcGxheTpub25lO2xlZnQ6MjgwcHgiIG9uY2xpY2s9ImlmKGV2ZW50LnRhcmdldD09PXRoaXMpY2xvc2VQcm9jTW9kYWwoKSI+CiAgICAgICAgPGRpdiBjbGFzcz0ibS1ib3giIHN0eWxlPSJ3aWR0aDpjYWxjKDEwMHZ3IC0gMjgwcHgpO21heC13aWR0aDpjYWxjKDEwMHZ3IC0gMjgwcHgpO2hlaWdodDoxMDB2aDttYXgtaGVpZ2h0OjEwMHZoO2JvcmRlci1yYWRpdXM6MDtwYWRkaW5nOjIwcHggMjhweDtib3gtc2l6aW5nOmJvcmRlci1ib3g7bWFyZ2luLWxlZnQ6YXV0byI+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9Im0taGVhZCI+PGgzIGlkPSJwcm9jTW9kLXRpdGxlIj5Ob3V2ZWxsZSBwcm9jw6lkdXJlPC9oMz48YnV0dG9uIGNsYXNzPSJtLWNscyIgb25jbGljaz0id2luZG93LmNsb3NlUHJvY01vZGFsKCkiPiZ0aW1lczs8L2J1dHRvbj48L2Rpdj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0ibS1ib2R5IiBzdHlsZT0ibWF4LWhlaWdodDo3OHZoO292ZXJmbG93LXk6YXV0byI+CiAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJkaXNwbGF5OmZsZXg7Z2FwOjE0cHg7bWFyZ2luLWJvdHRvbToxNnB4O2JhY2tncm91bmQ6I2Y4ZjlmYTtwYWRkaW5nOjE2cHg7Ym9yZGVyLXJhZGl1czoxMHB4O2JvcmRlcjoxcHggc29saWQgI2VlZSI+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iZmxleDowIDAgMTEwcHgiPgogICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgc3R5bGU9ImRpc3BsYXk6YmxvY2s7Zm9udC1zaXplOi43cmVtO2ZvbnQtd2VpZ2h0OjYwMDtjb2xvcjojODg4O3RleHQtdHJhbnNmb3JtOnVwcGVyY2FzZTtsZXR0ZXItc3BhY2luZzouNXB4O21hcmdpbi1ib3R0b206NnB4Ij5Db2RlPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IGlkPSJwcm9jLWNvZGUiIHBsYWNlaG9sZGVyPSJBIDEiIG1heGxlbmd0aD0iMTAiIG9uaW5wdXQ9ImF1dG9Qcm9jQ2F0KHRoaXMudmFsdWUpIiBzdHlsZT0id2lkdGg6MTAwJTtwYWRkaW5nOjEwcHggMTJweDtib3JkZXI6MnB4IHNvbGlkICNlMGUwZTA7Ym9yZGVyLXJhZGl1czo4cHg7Zm9udC1zaXplOjFyZW07Zm9udC13ZWlnaHQ6NzAwO3RleHQtdHJhbnNmb3JtOnVwcGVyY2FzZTt0ZXh0LWFsaWduOmNlbnRlcjtiYWNrZ3JvdW5kOiNmZmY7dHJhbnNpdGlvbjpib3JkZXItY29sb3IgLjJzO291dGxpbmU6bm9uZTtib3gtc2l6aW5nOmJvcmRlci1ib3giIG9uZm9jdXM9InRoaXMuc3R5bGUuYm9yZGVyQ29sb3I9J3ZhcigtLWhlYWRlciwjMmMzZTUwKSciIG9uYmx1cj0idGhpcy5zdHlsZS5ib3JkZXJDb2xvcj0nI2UwZTBlMCciPgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9ImZsZXg6MSI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBzdHlsZT0iZGlzcGxheTpibG9jaztmb250LXNpemU6LjdyZW07Zm9udC13ZWlnaHQ6NjAwO2NvbG9yOiM4ODg7dGV4dC10cmFuc2Zvcm06dXBwZXJjYXNlO2xldHRlci1zcGFjaW5nOi41cHg7bWFyZ2luLWJvdHRvbTo2cHgiPlRpdHJlPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IGlkPSJwcm9jLXRpdGxlIiBwbGFjZWhvbGRlcj0iVGl0cmUgZGUgbGEgcHJvY8OpZHVyZSIgc3R5bGU9IndpZHRoOjEwMCU7cGFkZGluZzoxMHB4IDEycHg7Ym9yZGVyOjJweCBzb2xpZCAjZTBlMGUwO2JvcmRlci1yYWRpdXM6OHB4O2ZvbnQtc2l6ZTouOTVyZW07YmFja2dyb3VuZDojZmZmO3RyYW5zaXRpb246Ym9yZGVyLWNvbG9yIC4ycztvdXRsaW5lOm5vbmU7Ym94LXNpemluZzpib3JkZXItYm94IiBvbmZvY3VzPSJ0aGlzLnN0eWxlLmJvcmRlckNvbG9yPSd2YXIoLS1oZWFkZXIsIzJjM2U1MCknIiBvbmJsdXI9InRoaXMuc3R5bGUuYm9yZGVyQ29sb3I9JyNlMGUwZTAnIj4KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJmbGV4OjAgMCAyMjBweCI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBzdHlsZT0iZGlzcGxheTpibG9jaztmb250LXNpemU6LjdyZW07Zm9udC13ZWlnaHQ6NjAwO2NvbG9yOiM4ODg7dGV4dC10cmFuc2Zvcm06dXBwZXJjYXNlO2xldHRlci1zcGFjaW5nOi41cHg7bWFyZ2luLWJvdHRvbTo2cHgiPkNhdMOpZ29yaWU8L2xhYmVsPgogICAgICAgICAgICAgICAgICAgIDxzZWxlY3QgaWQ9InByb2MtY2F0IiBzdHlsZT0id2lkdGg6MTAwJTtwYWRkaW5nOjEwcHggMTJweDtib3JkZXI6MnB4IHNvbGlkICNlMGUwZTA7Ym9yZGVyLXJhZGl1czo4cHg7Zm9udC1zaXplOi44OHJlbTtiYWNrZ3JvdW5kOiNmZmY7Y3Vyc29yOnBvaW50ZXI7b3V0bGluZTpub25lO3RyYW5zaXRpb246Ym9yZGVyLWNvbG9yIC4yczthcHBlYXJhbmNlOmF1dG87Ym94LXNpemluZzpib3JkZXItYm94IiBvbmNoYW5nZT0iaWYodGhpcy52YWx1ZT09PSdfX25ld19fJyl7dmFyIG49cHJvbXB0KCdOb3V2ZWxsZSBjYXTDqWdvcmllIDonKTtpZihuKXt2YXIgbz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCdvcHRpb24nKTtvLnZhbHVlPW47by50ZXh0PW47dGhpcy5pbnNlcnRCZWZvcmUobyx0aGlzLmxhc3RDaGlsZCk7dGhpcy52YWx1ZT1uO31lbHNle3RoaXMudmFsdWU9Jyc7fX0iPgogICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSIiPuKAlCBDaG9pc2lyIOKAlDwvb3B0aW9uPjxvcHRpb24gdmFsdWU9IkFkbWluaXN0cmF0aWYiPkFkbWluaXN0cmF0aWY8L29wdGlvbj48b3B0aW9uIHZhbHVlPSLDiWzDqHZlcyBCRVAiPsOJbMOodmVzIEJFUDwvb3B0aW9uPjxvcHRpb24gdmFsdWU9IkNvbmNlcnRhdGlvbnMiPkNvbmNlcnRhdGlvbnM8L29wdGlvbj48b3B0aW9uIHZhbHVlPSJEaXNwb3NpdGlmcyBQw6lkYWdvZ2lxdWVzIj5EaXNwb3NpdGlmcyBQw6lkYWdvZ2lxdWVzPC9vcHRpb24+PG9wdGlvbiB2YWx1ZT0iU3VpdmkgZGVzIMOpbMOodmVzIj5TdWl2aSBkZXMgw6lsw6h2ZXM8L29wdGlvbj48b3B0aW9uIHZhbHVlPSJJbnRlcnZlbmFudHMiPkludGVydmVuYW50czwvb3B0aW9uPjxvcHRpb24gdmFsdWU9Ik51bcOpcmlxdWUiPk51bcOpcmlxdWU8L29wdGlvbj48b3B0aW9uIHZhbHVlPSJPcmllbnRhdGlvbiI+T3JpZW50YXRpb248L29wdGlvbj48b3B0aW9uIHZhbHVlPSJQcm9qZXRzIj5Qcm9qZXRzPC9vcHRpb24+PG9wdGlvbiB2YWx1ZT0iUG9ydGVzIE91dmVydGVzIj5Qb3J0ZXMgT3V2ZXJ0ZXM8L29wdGlvbj48b3B0aW9uIHZhbHVlPSJSZXNzb3VyY2VzIEh1bWFpbmVzIj5SZXNzb3VyY2VzIEh1bWFpbmVzPC9vcHRpb24+PG9wdGlvbiB2YWx1ZT0iU8OpY3VyaXTDqSI+U8OpY3VyaXTDqTwvb3B0aW9uPjxvcHRpb24gdmFsdWU9Il9fbmV3X18iPisgTm91dmVsbGUgY2F0w6lnb3JpZeKApjwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgIDwvc2VsZWN0PgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJkaXNwbGF5OmZsZXg7Z2FwOjE0cHg7bWFyZ2luLWJvdHRvbToxNnB4O2JhY2tncm91bmQ6I2Y4ZjlmYTtwYWRkaW5nOjEycHggMTZweDtib3JkZXItcmFkaXVzOjEwcHg7Ym9yZGVyOjFweCBzb2xpZCAjZWVlO2FsaWduLWl0ZW1zOmNlbnRlciI+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0id2lkdGg6ODBweDtmbGV4LXNocmluazowIj4KICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIHN0eWxlPSJkaXNwbGF5OmJsb2NrO2ZvbnQtc2l6ZTouN3JlbTtmb250LXdlaWdodDo2MDA7Y29sb3I6Izg4ODt0ZXh0LXRyYW5zZm9ybTp1cHBlcmNhc2U7bGV0dGVyLXNwYWNpbmc6LjVweDttYXJnaW4tYm90dG9tOjZweCI+U2VtLiBkw6lidXQ8L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0ibnVtYmVyIiBpZD0icHJvYy13cyIgbWluPSIxIiBtYXg9IjUzIiBzdHlsZT0id2lkdGg6ODBweDtwYWRkaW5nOjhweCA2cHg7Ym9yZGVyOjJweCBzb2xpZCAjZTBlMGUwO2JvcmRlci1yYWRpdXM6OHB4O2ZvbnQtc2l6ZTouOXJlbTt0ZXh0LWFsaWduOmNlbnRlcjtib3gtc2l6aW5nOmJvcmRlci1ib3giPgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9IndpZHRoOjgwcHg7ZmxleC1zaHJpbms6MCI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBzdHlsZT0iZGlzcGxheTpibG9jaztmb250LXNpemU6LjdyZW07Zm9udC13ZWlnaHQ6NjAwO2NvbG9yOiM4ODg7dGV4dC10cmFuc2Zvcm06dXBwZXJjYXNlO2xldHRlci1zcGFjaW5nOi41cHg7bWFyZ2luLWJvdHRvbTo2cHgiPlNlbS4gZmluPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9Im51bWJlciIgaWQ9InByb2Mtd2UiIG1pbj0iMSIgbWF4PSI1MyIgc3R5bGU9IndpZHRoOjgwcHg7cGFkZGluZzo4cHggNnB4O2JvcmRlcjoycHggc29saWQgI2UwZTBlMDtib3JkZXItcmFkaXVzOjhweDtmb250LXNpemU6LjlyZW07dGV4dC1hbGlnbjpjZW50ZXI7Ym94LXNpemluZzpib3JkZXItYm94Ij4KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJkaXNwbGF5OmZsZXg7YWxpZ24taXRlbXM6Y2VudGVyO2dhcDo2cHg7cGFkZGluZy10b3A6MTRweCI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJjaGVja2JveCIgaWQ9InByb2MtYW5uZWUiIHN0eWxlPSJ3aWR0aDoxOHB4O2hlaWdodDoxOHB4O2N1cnNvcjpwb2ludGVyIiBvbmNoYW5nZT0idmFyIGQ9dGhpcy5jaGVja2VkO2RvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcm9jLXdzJykuZGlzYWJsZWQ9ZDtkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJvYy13ZScpLmRpc2FibGVkPWQ7aWYoZCl7ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Byb2Mtd3MnKS52YWx1ZT0nJztkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJvYy13ZScpLnZhbHVlPScnO2RvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcm9jLXdzJykuc3R5bGUub3BhY2l0eT0nLjQnO2RvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcm9jLXdlJykuc3R5bGUub3BhY2l0eT0nLjQnO31lbHNle2RvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcm9jLXdzJykuc3R5bGUub3BhY2l0eT0nMSc7ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Byb2Mtd2UnKS5zdHlsZS5vcGFjaXR5PScxJzt9Ij4KICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGZvcj0icHJvYy1hbm5lZSIgc3R5bGU9Im1hcmdpbjowO2N1cnNvcjpwb2ludGVyO2ZvbnQtc2l6ZTouOHJlbTtmb250LXdlaWdodDo2MDA7Y29sb3I6IzU1NTt3aGl0ZS1zcGFjZTpub3dyYXAiPsOAIGwnYW5uw6llPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJtYXJnaW4tYm90dG9tOjhweCI+PGxhYmVsIHN0eWxlPSJkaXNwbGF5OmJsb2NrO2ZvbnQtc2l6ZTouODJyZW07Zm9udC13ZWlnaHQ6NjAwO2NvbG9yOiM1NTU7bWFyZ2luLWJvdHRvbTo2cHgiPkFjdGlvbnMgLyDDiXRhcGVzPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJydGUtYmFyIj48YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0iZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2JvbGQnKSIgdGl0bGU9IkdyYXMiPjxiPkc8L2I+PC9idXR0b24+PGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9ImRvY3VtZW50LmV4ZWNDb21tYW5kKCdpdGFsaWMnKSIgdGl0bGU9Ikl0YWxpcXVlIj48aT5JPC9pPjwvYnV0dG9uPjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJkb2N1bWVudC5leGVjQ29tbWFuZCgndW5kZXJsaW5lJykiIHRpdGxlPSJTb3VsaWduw6kiPjx1PlM8L3U+PC9idXR0b24+PHNwYW4gY2xhc3M9InJ0ZS1zZXAiPjwvc3Bhbj48YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0iZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2luc2VydFVub3JkZXJlZExpc3QnKSIgdGl0bGU9IlB1Y2VzIj48aSBjbGFzcz0iZmFzIGZhLWxpc3QtdWwiPjwvaT48L2J1dHRvbj48YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0iZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2luc2VydE9yZGVyZWRMaXN0JykiIHRpdGxlPSJOdW3DqXJvdMOpZSI+PGkgY2xhc3M9ImZhcyBmYS1saXN0LW9sIj48L2k+PC9idXR0b24+PHNwYW4gY2xhc3M9InJ0ZS1zZXAiPjwvc3Bhbj48YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0icHJvY0luc2VydEljb24oJ21haWwnKSIgdGl0bGU9Ik1haWwiPjxzcGFuIGNsYXNzPSJwcm9jLWljb24tbWFpbCI+PGkgY2xhc3M9ImZhcyBmYS1lbnZlbG9wZSI+PC9pPjwvc3Bhbj48L2J1dHRvbj48YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0icHJvY0luc2VydEljb24oJ2FsZXJ0JykiIHRpdGxlPSJBbGVydGUiPjxzcGFuIGNsYXNzPSJwcm9jLWljb24tYWxlcnQiPjxpIGNsYXNzPSJmYXMgZmEtZXhjbGFtYXRpb24iPjwvaT48L3NwYW4+PC9idXR0b24+PGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9InByb2NJbnNlcnRJY29uKCdpZGVhJykiIHRpdGxlPSJJZMOpZSI+PHNwYW4gY2xhc3M9InByb2MtaWNvbi1pZGVhIj48aSBjbGFzcz0iZmFzIGZhLWxpZ2h0YnVsYiI+PC9pPjwvc3Bhbj48L2J1dHRvbj48c3BhbiBjbGFzcz0icnRlLXNlcCI+PC9zcGFuPjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJydGVDb2xvcih0aGlzKSIgdGl0bGU9IkNvdWxldXIiPjxpIGNsYXNzPSJmYXMgZmEtcGFsZXR0ZSI+PC9pPjwvYnV0dG9uPjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJkb2N1bWVudC5leGVjQ29tbWFuZCgndW5kbycpIiB0aXRsZT0iQW5udWxlciI+PGkgY2xhc3M9ImZhcyBmYS11bmRvIj48L2k+PC9idXR0b24+PHNwYW4gY2xhc3M9InJ0ZS1zZXAiPjwvc3Bhbj48YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0icnRlSW1nUmVzaXplKCdzbWFsbCcpIiB0aXRsZT0iSW1hZ2UgMjUlIj4mI3gxRjVCQztTPC9idXR0b24+PGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9InJ0ZUltZ1Jlc2l6ZSgnbWVkaXVtJykiIHRpdGxlPSJJbWFnZSA1MCUiPiYjeDFGNUJDO008L2J1dHRvbj48YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0icnRlSW1nUmVzaXplKCdsYXJnZScpIiB0aXRsZT0iSW1hZ2UgNzUlIj4mI3gxRjVCQztMPC9idXR0b24+PGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9InJ0ZUltZ1Jlc2l6ZSgnZnVsbCcpIiB0aXRsZT0iSW1hZ2UgMTAwJSI+JiN4MUY1QkM7RjwvYnV0dG9uPjxzcGFuIGNsYXNzPSJydGUtc2VwIj48L3NwYW4+PGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9ImRvY3VtZW50LmV4ZWNDb21tYW5kKCdqdXN0aWZ5TGVmdCcpIiB0aXRsZT0iQWxpZ25lciDDoCBnYXVjaGUiPjxpIGNsYXNzPSJmYXMgZmEtYWxpZ24tbGVmdCI+PC9pPjwvYnV0dG9uPjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJkb2N1bWVudC5leGVjQ29tbWFuZCgnanVzdGlmeUNlbnRlcicpIiB0aXRsZT0iQ2VudHJlciI+PGkgY2xhc3M9ImZhcyBmYS1hbGlnbi1jZW50ZXIiPjwvaT48L2J1dHRvbj48YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0iZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2p1c3RpZnlGdWxsJykiIHRpdGxlPSJKdXN0aWZpZXIiPjxpIGNsYXNzPSJmYXMgZmEtYWxpZ24tanVzdGlmeSI+PC9pPjwvYnV0dG9uPjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJwYXN0ZUZyb21Xb3JkKCkiIHRpdGxlPSJDb2xsZXIgZGVwdWlzIFdvcmQgZW4gY29uc2VydmFudCBsYSBtaXNlIGVuIHBhZ2UiIHN0eWxlPSJtYXJnaW4tbGVmdDo2cHg7YmFja2dyb3VuZDojMmI1NzlhO2NvbG9yOndoaXRlO2JvcmRlci1yYWRpdXM6NHB4O3BhZGRpbmc6MnB4IDhweDtmb250LXNpemU6LjY4cmVtO2JvcmRlcjpub25lO2N1cnNvcjpwb2ludGVyO2ZvbnQtZmFtaWx5OmluaGVyaXQ7ZGlzcGxheTppbmxpbmUtZmxleDthbGlnbi1pdGVtczpjZW50ZXI7Z2FwOjNweDt2ZXJ0aWNhbC1hbGlnbjptaWRkbGU7Ij48aSBjbGFzcz0iZmFzIGZhLWZpbGUtd29yZCI+PC9pPsKgV29yZDwvYnV0dG9uPgo8L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8ZGl2IGlkPSJwcm9jLXoyIiBjbGFzcz0icnRlLWJvZHkiIGNvbnRlbnRlZGl0YWJsZT0idHJ1ZSIgc3R5bGU9Im1pbi1oZWlnaHQ6MTIwcHg7Ym9yZGVyOjJweCBzb2xpZCAjZTBlMGUwO2JvcmRlci1yYWRpdXM6MCAwIDhweCA4cHg7cGFkZGluZzoxMHB4Ij48L2Rpdj4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0ibWFyZ2luLWJvdHRvbTo4cHgiPjxsYWJlbCBzdHlsZT0iZGlzcGxheTpibG9jaztmb250LXNpemU6LjgycmVtO2ZvbnQtd2VpZ2h0OjYwMDtjb2xvcjojNTU1O21hcmdpbi1ib3R0b206NnB4Ij5Ob3RlcyAvIFJlbWFycXVlczwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0icnRlLWJhciI+PGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9ImRvY3VtZW50LmV4ZWNDb21tYW5kKCdib2xkJykiIHRpdGxlPSJHcmFzIj48Yj5HPC9iPjwvYnV0dG9uPjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJkb2N1bWVudC5leGVjQ29tbWFuZCgnaXRhbGljJykiIHRpdGxlPSJJdGFsaXF1ZSI+PGk+STwvaT48L2J1dHRvbj48YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0iZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ3VuZGVybGluZScpIiB0aXRsZT0iU291bGlnbsOpIj48dT5TPC91PjwvYnV0dG9uPjxzcGFuIGNsYXNzPSJydGUtc2VwIj48L3NwYW4+PGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9ImRvY3VtZW50LmV4ZWNDb21tYW5kKCdpbnNlcnRVbm9yZGVyZWRMaXN0JykiIHRpdGxlPSJQdWNlcyI+PGkgY2xhc3M9ImZhcyBmYS1saXN0LXVsIj48L2k+PC9idXR0b24+PGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9ImRvY3VtZW50LmV4ZWNDb21tYW5kKCdpbnNlcnRPcmRlcmVkTGlzdCcpIiB0aXRsZT0iTnVtw6lyb3TDqWUiPjxpIGNsYXNzPSJmYXMgZmEtbGlzdC1vbCI+PC9pPjwvYnV0dG9uPjxzcGFuIGNsYXNzPSJydGUtc2VwIj48L3NwYW4+PGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9InByb2NJbnNlcnRJY29uKCdtYWlsJykiIHRpdGxlPSJNYWlsIj48c3BhbiBjbGFzcz0icHJvYy1pY29uLW1haWwiPjxpIGNsYXNzPSJmYXMgZmEtZW52ZWxvcGUiPjwvaT48L3NwYW4+PC9idXR0b24+PGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9InByb2NJbnNlcnRJY29uKCdhbGVydCcpIiB0aXRsZT0iQWxlcnRlIj48c3BhbiBjbGFzcz0icHJvYy1pY29uLWFsZXJ0Ij48aSBjbGFzcz0iZmFzIGZhLWV4Y2xhbWF0aW9uIj48L2k+PC9zcGFuPjwvYnV0dG9uPjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJwcm9jSW5zZXJ0SWNvbignaWRlYScpIiB0aXRsZT0iSWTDqWUiPjxzcGFuIGNsYXNzPSJwcm9jLWljb24taWRlYSI+PGkgY2xhc3M9ImZhcyBmYS1saWdodGJ1bGIiPjwvaT48L3NwYW4+PC9idXR0b24+PHNwYW4gY2xhc3M9InJ0ZS1zZXAiPjwvc3Bhbj48YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0icnRlQ29sb3IodGhpcykiIHRpdGxlPSJDb3VsZXVyIj48aSBjbGFzcz0iZmFzIGZhLXBhbGV0dGUiPjwvaT48L2J1dHRvbj48YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0iZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ3VuZG8nKSIgdGl0bGU9IkFubnVsZXIiPjxpIGNsYXNzPSJmYXMgZmEtdW5kbyI+PC9pPjwvYnV0dG9uPjxzcGFuIGNsYXNzPSJydGUtc2VwIj48L3NwYW4+PGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9InJ0ZUltZ1Jlc2l6ZSgnc21hbGwnKSIgdGl0bGU9IkltYWdlIDI1JSI+JiN4MUY1QkM7UzwvYnV0dG9uPjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJydGVJbWdSZXNpemUoJ21lZGl1bScpIiB0aXRsZT0iSW1hZ2UgNTAlIj4mI3gxRjVCQztNPC9idXR0b24+PGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9InJ0ZUltZ1Jlc2l6ZSgnbGFyZ2UnKSIgdGl0bGU9IkltYWdlIDc1JSI+JiN4MUY1QkM7TDwvYnV0dG9uPjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJydGVJbWdSZXNpemUoJ2Z1bGwnKSIgdGl0bGU9IkltYWdlIDEwMCUiPiYjeDFGNUJDO0Y8L2J1dHRvbj48c3BhbiBjbGFzcz0icnRlLXNlcCI+PC9zcGFuPjxidXR0b24gdHlwZT0iYnV0dG9uIiBvbmNsaWNrPSJkb2N1bWVudC5leGVjQ29tbWFuZCgnanVzdGlmeUxlZnQnKSIgdGl0bGU9IkFsaWduZXIgw6AgZ2F1Y2hlIj48aSBjbGFzcz0iZmFzIGZhLWFsaWduLWxlZnQiPjwvaT48L2J1dHRvbj48YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0iZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2p1c3RpZnlDZW50ZXInKSIgdGl0bGU9IkNlbnRyZXIiPjxpIGNsYXNzPSJmYXMgZmEtYWxpZ24tY2VudGVyIj48L2k+PC9idXR0b24+PGJ1dHRvbiB0eXBlPSJidXR0b24iIG9uY2xpY2s9ImRvY3VtZW50LmV4ZWNDb21tYW5kKCdqdXN0aWZ5RnVsbCcpIiB0aXRsZT0iSnVzdGlmaWVyIj48aSBjbGFzcz0iZmFzIGZhLWFsaWduLWp1c3RpZnkiPjwvaT48L2J1dHRvbj48YnV0dG9uIHR5cGU9ImJ1dHRvbiIgb25jbGljaz0icGFzdGVGcm9tV29yZCgpIiB0aXRsZT0iQ29sbGVyIGRlcHVpcyBXb3JkIGVuIGNvbnNlcnZhbnQgbGEgbWlzZSBlbiBwYWdlIiBzdHlsZT0ibWFyZ2luLWxlZnQ6NnB4O2JhY2tncm91bmQ6IzJiNTc5YTtjb2xvcjp3aGl0ZTtib3JkZXItcmFkaXVzOjRweDtwYWRkaW5nOjJweCA4cHg7Zm9udC1zaXplOi42OHJlbTtib3JkZXI6bm9uZTtjdXJzb3I6cG9pbnRlcjtmb250LWZhbWlseTppbmhlcml0O2Rpc3BsYXk6aW5saW5lLWZsZXg7YWxpZ24taXRlbXM6Y2VudGVyO2dhcDozcHg7dmVydGljYWwtYWxpZ246bWlkZGxlOyI+PGkgY2xhc3M9ImZhcyBmYS1maWxlLXdvcmQiPjwvaT7CoFdvcmQ8L2J1dHRvbj4KPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBpZD0icHJvYy16MyIgY2xhc3M9InJ0ZS1ib2R5IiBjb250ZW50ZWRpdGFibGU9InRydWUiIHN0eWxlPSJtaW4taGVpZ2h0OjEyMHB4O2JvcmRlcjoycHggc29saWQgI2UwZTBlMDtib3JkZXItcmFkaXVzOjAgMCA4cHggOHB4O3BhZGRpbmc6MTBweCI+PC9kaXY+CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9Im0tYWN0cyI+CiAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgaWQ9InByb2MtZGVsLWJ0biIgY2xhc3M9Im1iIiBzdHlsZT0iYmFja2dyb3VuZDojZTc0YzNjO2NvbG9yOiNmZmY7ZGlzcGxheTpub25lIiBvbmNsaWNrPSJ3aW5kb3cuZGVsUHJvYygpIj48aSBjbGFzcz0iZmFzIGZhLXRyYXNoIj48L2k+IFN1cHByaW1lcjwvYnV0dG9uPgogICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPSJidXR0b24iIGNsYXNzPSJtYiBtYi1jIiBvbmNsaWNrPSJ3aW5kb3cuY2xvc2VQcm9jTW9kYWwoKSI+QW5udWxlcjwvYnV0dG9uPgogICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPSJidXR0b24iIGNsYXNzPSJtYiBtYi1vayIgb25jbGljaz0id2luZG93LnNhdmVQcm9jKCkiPjxpIGNsYXNzPSJmYXMgZmEtY2hlY2siPjwvaT4gRW5yZWdpc3RyZXI8L2J1dHRvbj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgPC9kaXY+CiAgICA8L2Rpdj4KCgo8L2JvZHk+CjwvaHRtbD4=", "exam": "PCFET0NUWVBFIGh0bWw+CjxodG1sIGxhbmc9ImZyIj4KPGhlYWQ+CiAgICA8bWV0YSBjaGFyc2V0PSJVVEYtOCI+CiAgICA8bWV0YSBuYW1lPSJ2aWV3cG9ydCIgY29udGVudD0id2lkdGg9ZGV2aWNlLXdpZHRoLCBpbml0aWFsLXNjYWxlPTEuMCI+CiAgICA8dGl0bGU+UEVSRElSRk9STUFOQ0UgRE5CIEJMQU5DIEVDUklUIFYxMSAtIEdlc3Rpb24gQ29tcGzDqHRlPC90aXRsZT4KICAgIAogICAgPCEtLSBSZWFjdCAmIFJlYWN0RE9NIC0tPgogICAgPHNjcmlwdCBjcm9zc29yaWdpbiBzcmM9Imh0dHBzOi8vdW5wa2cuY29tL3JlYWN0QDE4L3VtZC9yZWFjdC5kZXZlbG9wbWVudC5qcyI+PC9zY3JpcHQ+CiAgICA8c2NyaXB0IGNyb3Nzb3JpZ2luIHNyYz0iaHR0cHM6Ly91bnBrZy5jb20vcmVhY3QtZG9tQDE4L3VtZC9yZWFjdC1kb20uZGV2ZWxvcG1lbnQuanMiPjwvc2NyaXB0PgogICAgCiAgICA8IS0tIEJhYmVsIGZvciBKU1ggLS0+CiAgICA8c2NyaXB0IHNyYz0iaHR0cHM6Ly91bnBrZy5jb20vQGJhYmVsL3N0YW5kYWxvbmUvYmFiZWwubWluLmpzIj48L3NjcmlwdD4KICAgIAogICAgPCEtLSBUYWlsd2luZCBDU1MgLS0+CiAgICA8c2NyaXB0IHNyYz0iaHR0cHM6Ly9jZG4udGFpbHdpbmRjc3MuY29tIj48L3NjcmlwdD4KICAgIDxzY3JpcHQ+CiAgICAgICAgdGFpbHdpbmQuY29uZmlnID0gewogICAgICAgICAgICB0aGVtZTogewogICAgICAgICAgICAgICAgZXh0ZW5kOiB7CiAgICAgICAgICAgICAgICAgICAgY29sb3JzOiB7CiAgICAgICAgICAgICAgICAgICAgICAgIHByaW1hcnk6ICcjMGVhNWU5JywgLy8gU2t5IDUwMAogICAgICAgICAgICAgICAgICAgICAgICBwcmltYXJ5RGFyazogJyMwMjg0YzcnLCAvLyBTa3kgNjAwCiAgICAgICAgICAgICAgICAgICAgICAgIHNlY29uZGFyeTogJyNmOTczMTYnLCAvLyBPcmFuZ2UgNTAwCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgPC9zY3JpcHQ+CiAgICAKICAgIDwhLS0gTGlicmFyaWVzIGZvciBFeGNlbCBhbmQgUERGIC0tPgogICAgPHNjcmlwdCBzcmM9Imh0dHBzOi8vY2RuLnNoZWV0anMuY29tL3hsc3gtMC4yMC4xL3BhY2thZ2UvZGlzdC94bHN4LmZ1bGwubWluLmpzIj48L3NjcmlwdD4KICAgIDxzY3JpcHQgc3JjPSJodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9qc3BkZi8yLjUuMS9qc3BkZi51bWQubWluLmpzIj48L3NjcmlwdD4KICAgIDxzY3JpcHQgc3JjPSJodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9qc3BkZi1hdXRvdGFibGUvMy41LjMxL2pzcGRmLnBsdWdpbi5hdXRvdGFibGUubWluLmpzIj48L3NjcmlwdD4KICAgIAogICAgPHN0eWxlPgogICAgICAgIEBpbXBvcnQgdXJsKCdodHRwczovL2ZvbnRzLmdvb2dsZWFwaXMuY29tL2NzczI/ZmFtaWx5PU91dGZpdDp3Z2h0QDMwMDs0MDA7NTAwOzYwMCZkaXNwbGF5PXN3YXAnKTsKICAgICAgICBib2R5IHsgZm9udC1mYW1pbHk6ICdPdXRmaXQnLCBzYW5zLXNlcmlmOyBiYWNrZ3JvdW5kLWNvbG9yOiAjZjBmOWZmOyB9IC8qIEZvbmQgdHLDqHMgbMOpZ2VyIGJsZXUgKi8KICAgICAgICAKICAgICAgICAvKiBDdXN0b20gU2Nyb2xsYmFyICovCiAgICAgICAgOjotd2Via2l0LXNjcm9sbGJhciB7IHdpZHRoOiA4cHg7IGhlaWdodDogOHB4OyB9CiAgICAgICAgOjotd2Via2l0LXNjcm9sbGJhci10cmFjayB7IGJhY2tncm91bmQ6ICNmMGY5ZmY7IH0KICAgICAgICA6Oi13ZWJraXQtc2Nyb2xsYmFyLXRodW1iIHsgYmFja2dyb3VuZDogI2JhZTZmZDsgYm9yZGVyLXJhZGl1czogNHB4OyB9CiAgICAgICAgOjotd2Via2l0LXNjcm9sbGJhci10aHVtYjpob3ZlciB7IGJhY2tncm91bmQ6ICM3ZGQzZmM7IH0KCiAgICAgICAgLmFuaW1hdGUtZmFkZS1pbiB7CiAgICAgICAgICAgIGFuaW1hdGlvbjogZmFkZUluIDAuM3MgZWFzZS1vdXQ7CiAgICAgICAgfQogICAgICAgIEBrZXlmcmFtZXMgZmFkZUluIHsKICAgICAgICAgICAgZnJvbSB7IG9wYWNpdHk6IDA7IHRyYW5zZm9ybTogdHJhbnNsYXRlWSgxMHB4KTsgfQogICAgICAgICAgICB0byB7IG9wYWNpdHk6IDE7IHRyYW5zZm9ybTogdHJhbnNsYXRlWSgwKTsgfQogICAgICAgIH0KCiAgICAgICAgLyogRHJhZyAmIERyb3AgU3R5bGVzICovCiAgICAgICAgLmRyYWdnYWJsZS1pdGVtIHsKICAgICAgICAgICAgY3Vyc29yOiBncmFiOwogICAgICAgICAgICB0cmFuc2l0aW9uOiBhbGwgMC4xNXMgZWFzZTsKICAgICAgICB9CiAgICAgICAgLmRyYWdnYWJsZS1pdGVtOmFjdGl2ZSB7CiAgICAgICAgICAgIGN1cnNvcjogZ3JhYmJpbmc7CiAgICAgICAgICAgIHRyYW5zZm9ybTogc2NhbGUoMS4wMik7CiAgICAgICAgICAgIGJveC1zaGFkb3c6IDAgMTBweCAxNXB4IC0zcHggcmdiYSgwLCAwLCAwLCAwLjEpOwogICAgICAgIH0KICAgICAgICAuZHJvcC16b25lIHsKICAgICAgICAgICAgdHJhbnNpdGlvbjogYWxsIDAuMnMgZWFzZTsKICAgICAgICB9CiAgICAgICAgLmRyb3Atem9uZS5kcmFnLW92ZXIgewogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZTBmMmZlOyAvKiBTa3kgMTAwICovCiAgICAgICAgICAgIGJvcmRlci1jb2xvcjogIzBlYTVlOTsKICAgICAgICAgICAgdHJhbnNmb3JtOiBzY2FsZSgxLjAxKTsKICAgICAgICB9CiAgICA8L3N0eWxlPgo8L2hlYWQ+Cjxib2R5PgogICAgPGRpdiBpZD0icm9vdCI+PC9kaXY+CgogICAgPHNjcmlwdCB0eXBlPSJ0ZXh0L2JhYmVsIj4KICAgICAgICBjb25zdCB7IHVzZVN0YXRlLCB1c2VFZmZlY3QsIHVzZU1lbW8sIHVzZVJlZiB9ID0gUmVhY3Q7CgogICAgICAgIC8vIC0tLSBDT05TVEFOVEVTIFBBUiBEw4lGQVVUIC0tLQogICAgICAgIGNvbnN0IEFQUF9WRVJTSU9OID0gIjExLjAiOwogICAgICAgIGNvbnN0IFNUT1JBR0VfS0VZX1YxMSA9ICdQRVJESVJGT1JNQU5DRV9ETkJfREFUQV9WMTEnOwogICAgICAgIGNvbnN0IFNUT1JBR0VfS0VZX1YxMCA9ICdQRVJESVJGT1JNQU5DRV9ETkJfREFUQV9WMTAnOyAvLyBQb3VyIG1pZ3JhdGlvbgoKICAgICAgICBjb25zdCBERUZBVUxUX1NVQkpFQ1RTID0gWwogICAgICAgICAgICB7IGlkOiAxLCBuYW1lOiAiTWF0aMOpbWF0aXF1ZXMiLCBkYXRlOiAiTHVuZGkgMzAgSnVpbiAyMDI1IiwgdGltZTogIjE0OjMwIC0gMTY6MzAiLCB0aW1lVFQ6ICIxNDozMCAtIDE3OjEwIiB9LAogICAgICAgICAgICB7IGlkOiAyLCBuYW1lOiAiRnJhbsOnYWlzIiwgZGF0ZTogIkx1bmRpIDMwIEp1aW4gMjAyNSIsIHRpbWU6ICIwOTowMCAtIDEyOjE1IiwgdGltZVRUOiAiMDk6MDAgLSAxMzoyMCIgfSwKICAgICAgICAgICAgeyBpZDogMywgbmFtZTogIkhpc3RvaXJlLUfDqW8gRU1DIiwgZGF0ZTogIk1hcmRpIDAxIEp1aWxsZXQgMjAyNSIsIHRpbWU6ICIwOTowMCAtIDExOjAwIiwgdGltZVRUOiAiMDk6MDAgLSAxMTo0MCIgfSwKICAgICAgICAgICAgeyBpZDogNCwgbmFtZTogIlNjaWVuY2VzIiwgZGF0ZTogIk1hcmRpIDAxIEp1aWxsZXQgMjAyNSIsIHRpbWU6ICIxMzozMCAtIDE0OjMwIiwgdGltZVRUOiAiMTM6MzAgLSAxNDo1MCIsIGRpc2NpcGxpbmVzOiBbXSB9CiAgICAgICAgXTsKCiAgICAgICAgY29uc3QgREVGQVVMVF9TQ0hPT0xfQ09ORklHID0gewogICAgICAgICAgICBuYW1lOiAiQ29sbMOoZ2UgTGFtYmRhIiwKICAgICAgICAgICAgY2l0eTogIkJhc3NlLVRlcnJlIiwKICAgICAgICAgICAgcHJpbmNpcGFsOiAiTS4gTGUgUHJpbmNpcGFsIiwKICAgICAgICAgICAgbG9nb1VybDogbnVsbCwKICAgICAgICAgICAgbG9nb1JhdGlvOiAxLCAvLyBSYXRpbyBXaWR0aC9IZWlnaHQgcGFyIGTDqWZhdXQKICAgICAgICAgICAgc3RhbXBVcmw6IG51bGwsCiAgICAgICAgICAgIHN0YW1wUmF0aW86IDEsCiAgICAgICAgICAgIHNlc3Npb25OYW1lOiAiRE5CIEJsYW5jIE7CsDEiCiAgICAgICAgfTsKCiAgICAgICAgLy8gLS0tIE1PRMOITEVTIERFIERPQ1VNRU5UUyBQQVIgRMOJRkFVVCAoVjEwL1YxMSkgLS0tCiAgICAgICAgY29uc3QgREVGQVVMVF9ET0NfVEVNUExBVEVTID0gewogICAgICAgICAgICBzdHVkZW50OiB7CiAgICAgICAgICAgICAgICB0aXRsZTogIkNPTlZPQ0FUSU9OIiwKICAgICAgICAgICAgICAgIHN1YnRpdGxlOiAiRElQTMOUTUUgTkFUSU9OQUwgRFUgQlJFVkVUIiwKICAgICAgICAgICAgICAgIGludHJvOiAiVm91cyDDqnRlcyBjb252b3F1w6koZSkgcG91ciBwYXNzZXIgbGVzIMOpcHJldXZlcyDDqWNyaXRlcyBkdSBEaXBsw7RtZSBOYXRpb25hbCBkdSBCcmV2ZXQgKFNlc3Npb24gQmxhbmNoZSkgYXV4IGhvcmFpcmVzIGluZGlxdcOpcyBjaS1kZXNzb3VzIDoiLAogICAgICAgICAgICAgICAgY29uc2lnbmVzOiAiLSBWZXVpbGxleiB2b3VzIHByw6lzZW50ZXIgMTUgbWludXRlcyBhdmFudCBsZSBkw6lidXQgZGUgY2hhcXVlIMOpcHJldXZlLlxuLSBVbmUgcGnDqGNlIGQnaWRlbnRpdMOpIGF2ZWMgcGhvdG8gZXN0IG9ibGlnYXRvaXJlIHBvdXIgbCdhY2PDqHMgZW4gc2FsbGUuXG4tIExlcyB0w6lsw6lwaG9uZXMgcG9ydGFibGVzIGV0IG1vbnRyZXMgY29ubmVjdMOpZXMgc29udCBzdHJpY3RlbWVudCBpbnRlcmRpdHMuXG4tIExlIG1hdMOpcmllbCAoc3R5bG9zLCByw6hnbGUsIGNhbGN1bGF0cmljZSBtb2RlIGV4YW1lbikgZXN0IHNvdXMgbGEgcmVzcG9uc2FiaWxpdMOpIGR1IGNhbmRpZGF0LiIKICAgICAgICAgICAgfSwKICAgICAgICAgICAgc3VydmVpbGxhbnQ6IHsKICAgICAgICAgICAgICAgIHRpdGxlOiAiQ09OVk9DQVRJT04gREUgU1VSVkVJTExBTkNFIiwKICAgICAgICAgICAgICAgIHN1YnRpdGxlOiAiRElQTMOUTUUgTkFUSU9OQUwgRFUgQlJFVkVUIiwKICAgICAgICAgICAgICAgIGludHJvOiAiVm91cyDDqnRlcyBjb252b3F1w6koZSkgcG91ciBhc3N1cmVyIGxhIHN1cnZlaWxsYW5jZSBkZXMgw6lwcmV1dmVzIGRlIGxhIHNlc3Npb24uIiwKICAgICAgICAgICAgICAgIGNvbnNpZ25lczogIi0gTWVyY2kgZGUgdm91cyBwcsOpc2VudGVyIGVuIHNhbGxlIDE1IG1pbnV0ZXMgYXZhbnQgbGUgZMOpYnV0IGRlIHZvdHJlIGNyw6luZWF1LlxuLSBWw6lyaWZpZXIgbCdpZGVudGl0w6kgZGVzIGNhbmRpZGF0cyBldCBzJ2Fzc3VyZXIgZHUgYm9uIHBsYWNlbWVudC5cbi0gRmFpcmUgw6ltYXJnZXIgbGVzIGNhbmRpZGF0cyBwcsOpc2VudHMgKHbDqXJpZmllciBsZXMgVGllcnMgVGVtcHMpLlxuLSBBdWN1bmUgc29ydGllIGRlIGNhbmRpZGF0IGF1dG9yaXPDqWUgYXZhbnQgbGEgcHJlbWnDqHJlIGhldXJlIGQnw6lwcmV1dmUuIgogICAgICAgICAgICB9LAogICAgICAgICAgICBhZXNoOiB7CiAgICAgICAgICAgICAgICB0aXRsZTogIkNPTlZPQ0FUSU9OIEFDQ09NUEFHTkFOVCAoQUVTSCkiLAogICAgICAgICAgICAgICAgc3VidGl0bGU6ICJESVBMw5RNRSBOQVRJT05BTCBEVSBCUkVWRVQiLAogICAgICAgICAgICAgICAgaW50cm86ICJWb3VzIMOqdGVzIGNvbnZvcXXDqShlKSBwb3VyIGwnYWNjb21wYWduZW1lbnQgZGVzIMOpbMOodmVzIHN1aXZhbnRzLiIKICAgICAgICAgICAgfSwKICAgICAgICAgICAgc2VjcmV0YXJpYXQ6IHsKICAgICAgICAgICAgICAgIHRpdGxlOiAiT1JEUkUgREUgTUlTU0lPTiAtIFNFQ1LDiVRBUklBVCIsCiAgICAgICAgICAgICAgICBzdWJ0aXRsZTogIkRJUEzDlE1FIE5BVElPTkFMIERVIEJSRVZFVCIsCiAgICAgICAgICAgICAgICBpbnRybzogIlZvdXMgw6p0ZXMgZMOpc2lnbsOpKGUpIHBvdXIgYXNzdXJlciBsZSBzZWNyw6l0YXJpYXQgw6AgbCdpc3N1ZSBkZXMgw6lwcmV1dmVzIHN1aXZhbnRlcyA6IiwKICAgICAgICAgICAgICAgIG1pc3Npb25zOiAiLSBSw6ljZXB0aW9ubmVyIGV0IHbDqXJpZmllciBsZXMgcGFxdWV0cyBkZSBjb3BpZXMuXG4tIENvbnRyw7RsZXIgbGVzIGxpc3RlcyBkJ8OpbWFyZ2VtZW50LlxuLSBQcsOpcGFyZXIgbGVzIGxvdHMgcG91ciBsYSBjb3JyZWN0aW9uLiIKICAgICAgICAgICAgfQogICAgICAgIH07CgogICAgICAgIC8vIC0tLSBGT05DVElPTiBVVElMSVRBSVJFIDogQ0FMQ1VMIERFUyBUUkFOQ0hFUyBIT1JBSVJFUyAoMWggbWF4KSAtLS0KICAgICAgICBjb25zdCBjYWxjdWxhdGVUaW1lU2xvdHMgPSAodGltZVJhbmdlU3RyKSA9PiB7CiAgICAgICAgICAgIGlmICghdGltZVJhbmdlU3RyKSByZXR1cm4gW107CiAgICAgICAgICAgIGNvbnN0IHBhcnRzID0gdGltZVJhbmdlU3RyLnNwbGl0KCctJykubWFwKHMgPT4gcy50cmltKCkpOwogICAgICAgICAgICBpZiAocGFydHMubGVuZ3RoICE9PSAyKSByZXR1cm4gW3sgc3RhcnQ6ICI/Pzo/PyIsIGVuZDogIj8/Oj8/IiwgbGFiZWw6IHRpbWVSYW5nZVN0ciB9XTsKCiAgICAgICAgICAgIGNvbnN0IFtzdGFydFN0ciwgZW5kU3RyXSA9IHBhcnRzOwoKICAgICAgICAgICAgY29uc3QgcGFyc2VUaW1lID0gKHQpID0+IHsKICAgICAgICAgICAgICAgIGNvbnN0IFtoLCBtXSA9IHQuc3BsaXQoJzonKS5tYXAoTnVtYmVyKTsKICAgICAgICAgICAgICAgIHJldHVybiBoICogNjAgKyBtOwogICAgICAgICAgICB9OwogICAgICAgICAgICAKICAgICAgICAgICAgY29uc3QgZm9ybWF0VGltZSA9IChtaW51dGVzKSA9PiB7CiAgICAgICAgICAgICAgICBjb25zdCBoID0gTWF0aC5mbG9vcihtaW51dGVzIC8gNjApOwogICAgICAgICAgICAgICAgY29uc3QgbSA9IG1pbnV0ZXMgJSA2MDsKICAgICAgICAgICAgICAgIHJldHVybiBgJHtTdHJpbmcoaCkucGFkU3RhcnQoMiwgJzAnKX06JHtTdHJpbmcobSkucGFkU3RhcnQoMiwgJzAnKX1gOwogICAgICAgICAgICB9OwoKICAgICAgICAgICAgbGV0IGN1cnJlbnQgPSBwYXJzZVRpbWUoc3RhcnRTdHIpOwogICAgICAgICAgICBjb25zdCBlbmQgPSBwYXJzZVRpbWUoZW5kU3RyKTsKICAgICAgICAgICAgY29uc3Qgc2xvdHMgPSBbXTsKCiAgICAgICAgICAgIHdoaWxlIChjdXJyZW50IDwgZW5kKSB7CiAgICAgICAgICAgICAgICBsZXQgbmV4dCA9IGN1cnJlbnQgKyA2MDsKICAgICAgICAgICAgICAgIGlmIChuZXh0ID4gZW5kKSBuZXh0ID0gZW5kOyAKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgc2xvdHMucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgc3RhcnQ6IGZvcm1hdFRpbWUoY3VycmVudCksCiAgICAgICAgICAgICAgICAgICAgZW5kOiBmb3JtYXRUaW1lKG5leHQpLAogICAgICAgICAgICAgICAgICAgIGxhYmVsOiBgJHtmb3JtYXRUaW1lKGN1cnJlbnQpfSAtICR7Zm9ybWF0VGltZShuZXh0KX1gCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIGN1cnJlbnQgPSBuZXh0OwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiBzbG90czsKICAgICAgICB9OwoKICAgICAgICAvLyAtLS0gTk9VVkVBVVggVVRJTElUQUlSRVMgUE9VUiBHRVNUSU9OIEhPUkFJUkUgVjEwL1YxMSAtLS0KICAgICAgICBjb25zdCBwYXJzZVRpbWVSYW5nZSA9IChyYW5nZVN0cikgPT4gewogICAgICAgICAgICBpZiAoIXJhbmdlU3RyIHx8ICFyYW5nZVN0ci5pbmNsdWRlcygnLScpKSByZXR1cm4geyBzdGFydDogIjA5OjAwIiwgZW5kOiAiMTA6MDAiIH07CiAgICAgICAgICAgIGNvbnN0IFtzdGFydCwgZW5kXSA9IHJhbmdlU3RyLnNwbGl0KCctJykubWFwKHMgPT4gcy50cmltKCkpOwogICAgICAgICAgICByZXR1cm4geyBzdGFydCwgZW5kIH07CiAgICAgICAgfTsKCiAgICAgICAgY29uc3QgdGltZVRvTWludXRlcyA9ICh0aW1lU3RyKSA9PiB7CiAgICAgICAgICAgIGNvbnN0IFtoLCBtXSA9IHRpbWVTdHIuc3BsaXQoJzonKS5tYXAoTnVtYmVyKTsKICAgICAgICAgICAgcmV0dXJuIGggKiA2MCArIG07CiAgICAgICAgfTsKCiAgICAgICAgY29uc3QgbWludXRlc1RvVGltZSA9IChtaW5zKSA9PiB7CiAgICAgICAgICAgIGNvbnN0IGggPSBNYXRoLmZsb29yKG1pbnMgLyA2MCkgJSAyNDsKICAgICAgICAgICAgY29uc3QgbSA9IE1hdGguZmxvb3IobWlucyAlIDYwKTsKICAgICAgICAgICAgcmV0dXJuIGAke1N0cmluZyhoKS5wYWRTdGFydCgyLCAnMCcpfToke1N0cmluZyhtKS5wYWRTdGFydCgyLCAnMCcpfWA7CiAgICAgICAgfTsKCiAgICAgICAgY29uc3QgY2FsY3VsYXRlQXV0b1RUID0gKHN0YW5kYXJkU3RhcnQsIHN0YW5kYXJkRW5kKSA9PiB7CiAgICAgICAgICAgIGNvbnN0IHMgPSB0aW1lVG9NaW51dGVzKHN0YW5kYXJkU3RhcnQpOwogICAgICAgICAgICBjb25zdCBlID0gdGltZVRvTWludXRlcyhzdGFuZGFyZEVuZCk7CiAgICAgICAgICAgIGxldCBkdXJhdGlvbiA9IGUgLSBzOwogICAgICAgICAgICBpZiAoZHVyYXRpb24gPCAwKSBkdXJhdGlvbiArPSAyNCAqIDYwOyAvLyBQYXNzYWdlIG1pbnVpdAogICAgICAgICAgICBjb25zdCB0dER1cmF0aW9uID0gTWF0aC5jZWlsKGR1cmF0aW9uICogNCAvIDMpOyAvLyArIDEvMwogICAgICAgICAgICBjb25zdCB0dEVuZCA9IHMgKyB0dER1cmF0aW9uOwogICAgICAgICAgICByZXR1cm4gYCR7c3RhbmRhcmRTdGFydH0gLSAke21pbnV0ZXNUb1RpbWUodHRFbmQpfWA7CiAgICAgICAgfTsKCiAgICAgICAgLy8gLS0tIE5PVVZFQVVYIFVUSUxJVEFJUkVTIFBPVVIgR0VTVElPTiBEQVRFIChDQUxFTkRSSUVSKSAtLS0KICAgICAgICAvLyBDb252ZXJ0aXQgIjIwMjUtMDYtMzAiIC0+ICJMdW5kaSAzMCBKdWluIDIwMjUiCiAgICAgICAgY29uc3QgZm9ybWF0RGF0ZVRvRnJlbmNoU3RyaW5nID0gKGlzb0RhdGUpID0+IHsKICAgICAgICAgICAgaWYgKCFpc29EYXRlKSByZXR1cm4gIiI7CiAgICAgICAgICAgIAogICAgICAgICAgICAvLyBDT1JSRUNUSU9OIERVIETDiUNBTEFHRSBIT1JBSVJFIDoKICAgICAgICAgICAgLy8gQXUgbGlldSBkZSBuZXcgRGF0ZShpc29EYXRlKSBxdWkgcGV1dCBpbnRlcnByw6l0ZXIgZW4gVVRDIGV0IGTDqWNhbGVyLAogICAgICAgICAgICAvLyBvbiBkw6ljb21wb3NlIG1hbnVlbGxlbWVudCBwb3VyIGZvcmNlciBsYSBkYXRlIGxvY2FsZSBtaWRpIChwb3VyIMOpdml0ZXIgdG91dCBwcm9ibMOobWUgZCdoZXVyZSBkJ8OpdMOpL2hpdmVyKQogICAgICAgICAgICBjb25zdCBbeWVhciwgbW9udGgsIGRheV0gPSBpc29EYXRlLnNwbGl0KCctJykubWFwKE51bWJlcik7CiAgICAgICAgICAgIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZSh5ZWFyLCBtb250aCAtIDEsIGRheSwgMTIsIDAsIDApOyAvLyBGb3JjZSBtaWRpIHBvdXIgw6p0cmUgc8O7ciBkZSByZXN0ZXIgbGUgYm9uIGpvdXIKICAgICAgICAgICAgCiAgICAgICAgICAgIGNvbnN0IG9wdGlvbnMgPSB7IHdlZWtkYXk6ICdsb25nJywgZGF5OiAnbnVtZXJpYycsIG1vbnRoOiAnbG9uZycsIHllYXI6ICdudW1lcmljJyB9OwogICAgICAgICAgICAvLyBGb3JtYXRhZ2UgbmF0aWYKICAgICAgICAgICAgbGV0IHN0ciA9IGRhdGUudG9Mb2NhbGVEYXRlU3RyaW5nKCdmci1GUicsIG9wdGlvbnMpOwogICAgICAgICAgICAvLyBDYXBpdGFsaXNhdGlvbiBkZXMgbW90cyAoTHVuZGksIEp1aW4pIHBvdXIgY29ycmVzcG9uZHJlIGF1IHN0eWxlIGV4aXN0YW50CiAgICAgICAgICAgIHJldHVybiBzdHIucmVwbGFjZSgvXGJcdy9nLCBsID0+IGwudG9VcHBlckNhc2UoKSk7CiAgICAgICAgfTsKCiAgICAgICAgLy8gVGVudGUgZGUgY29udmVydGlyICJMdW5kaSAzMCBKdWluIDIwMjUiIC0+ICIyMDI1LTA2LTMwIiBwb3VyIGwnaW5wdXQgZGF0ZQogICAgICAgIGNvbnN0IHBhcnNlRnJlbmNoU3RyaW5nVG9Jc28gPSAoZGF0ZVN0cikgPT4gewogICAgICAgICAgICBpZiAoIWRhdGVTdHIpIHJldHVybiAiIjsKICAgICAgICAgICAgLy8gU2kgYydlc3QgZMOpasOgIHVuIGZvcm1hdCBJU08gKHZpZXV4IGJ1ZyBvdSBhdXRyZSksIG9uIGxlIHJlbnZvaWUKICAgICAgICAgICAgaWYgKGRhdGVTdHIubWF0Y2goL15cZHs0fS1cZHsyfS1cZHsyfSQvKSkgcmV0dXJuIGRhdGVTdHI7CgogICAgICAgICAgICBjb25zdCBtb250aHMgPSB7CiAgICAgICAgICAgICAgICAnamFudmllcic6ICcwMScsICdmw6l2cmllcic6ICcwMicsICdmZXZyaWVyJzogJzAyJywgJ21hcnMnOiAnMDMnLCAnYXZyaWwnOiAnMDQnLCAnbWFpJzogJzA1JywgJ2p1aW4nOiAnMDYnLAogICAgICAgICAgICAgICAgJ2p1aWxsZXQnOiAnMDcnLCAnYW/Du3QnOiAnMDgnLCAnYW91dCc6ICcwOCcsICdzZXB0ZW1icmUnOiAnMDknLCAnb2N0b2JyZSc6ICcxMCcsICdub3ZlbWJyZSc6ICcxMScsICdkw6ljZW1icmUnOiAnMTInLCAnZGVjZW1icmUnOiAnMTInCiAgICAgICAgICAgIH07CiAgICAgICAgICAgIAogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgLy8gTmV0dG95YWdlIGV0IGTDqWNvdXBhZ2UgOiAiTHVuZGkgMzAgSnVpbiAyMDI1IiAtPiBbIkx1bmRpIiwgIjMwIiwgIkp1aW4iLCAiMjAyNSJdCiAgICAgICAgICAgICAgICBjb25zdCBwYXJ0cyA9IGRhdGVTdHIudG9Mb3dlckNhc2UoKS5yZXBsYWNlKC8sL2csICcnKS5zcGxpdCgnICcpLmZpbHRlcihwID0+IHAudHJpbSgpICE9PSAnJyk7CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIC8vIE9uIGNoZXJjaGUgbGUgam91ciAoY2hpZmZyZSksIGxlIG1vaXMgKHRleHRlKSBldCBsJ2FubsOpZSAoNCBjaGlmZnJlcykKICAgICAgICAgICAgICAgIGxldCBkYXkgPSBwYXJ0cy5maW5kKHAgPT4gcC5tYXRjaCgvXlxkezEsMn0kLykpOwogICAgICAgICAgICAgICAgbGV0IHllYXIgPSBwYXJ0cy5maW5kKHAgPT4gcC5tYXRjaCgvXlxkezR9JC8pKTsKICAgICAgICAgICAgICAgIGxldCBtb250aE5hbWUgPSBwYXJ0cy5maW5kKHAgPT4gbW9udGhzW3BdKTsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgaWYgKGRheSAmJiB5ZWFyICYmIG1vbnRoTmFtZSkgewogICAgICAgICAgICAgICAgICAgIGNvbnN0IG1vbnRoID0gbW9udGhzW21vbnRoTmFtZV07CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGAke3llYXJ9LSR7bW9udGgucGFkU3RhcnQoMiwgJzAnKX0tJHtkYXkucGFkU3RhcnQoMiwgJzAnKX1gOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gIiI7IC8vIMOJY2hlYyBzaWxlbmNpZXV4CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuICIiOwogICAgICAgIH07CgogICAgICAgIC8vIC0tLSBCSUJMSU9USMOIUVVFIEQnSUPDlE5FUyBJTlRFUk5FIChTVkcpIC0tLQogICAgICAgIGNvbnN0IEljb25CYXNlID0gKHsgY2hpbGRyZW4sIGNsYXNzTmFtZSA9ICIiIH0pID0+ICgKICAgICAgICAgICAgPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlV2lkdGg9IjIiIHN0cm9rZUxpbmVjYXA9InJvdW5kIiBzdHJva2VMaW5lam9pbj0icm91bmQiIGNsYXNzTmFtZT17Y2xhc3NOYW1lfT4KICAgICAgICAgICAgICAgIHtjaGlsZHJlbn0KICAgICAgICAgICAgPC9zdmc+CiAgICAgICAgKTsKCiAgICAgICAgY29uc3QgU2Nob29sID0gKHByb3BzKSA9PiA8SWNvbkJhc2Ugey4uLnByb3BzfT48cGF0aCBkPSJtNCA2IDgtNCA4IDQiIC8+PHBhdGggZD0ibTE4IDEwIDQgMnY4YTIgMiAwIDAgMS0yIDJINGEyIDIgMCAwIDEtMi0ydi04bDQtMiIgLz48cGF0aCBkPSJNMTQgMjJ2LTRhMiAyIDAgMCAwLTItMnYwYTIgMiAwIDAgMC0yIDJ2NCIgLz48cGF0aCBkPSJNMTggNXYxNyIgLz48cGF0aCBkPSJNNiA1djE3IiAvPjxjaXJjbGUgY3g9IjEyIiBjeT0iOSIgcj0iMiIgLz48L0ljb25CYXNlPjsKICAgICAgICBjb25zdCBVc2VycyA9IChwcm9wcykgPT4gPEljb25CYXNlIHsuLi5wcm9wc30+PHBhdGggZD0iTTE2IDIxdi0yYTQgNCAwIDAgMC00LTRINmE0IDQgMCAwIDAtNCA0djIiIC8+PGNpcmNsZSBjeD0iOSIgY3k9IjciIHI9IjQiIC8+PHBhdGggZD0iTTIyIDIxdi0yYTQgNCAwIDAgMC0zLTMuODciIC8+PHBhdGggZD0iTTE2IDMuMTNhNCA0IDAgMCAxIDAgNy43NSIgLz48L0ljb25CYXNlPjsKICAgICAgICBjb25zdCBMYXlvdXREYXNoYm9hcmQgPSAocHJvcHMpID0+IDxJY29uQmFzZSB7Li4ucHJvcHN9PjxyZWN0IHdpZHRoPSI3IiBoZWlnaHQ9IjkiIHg9IjMiIHk9IjMiIHJ4PSIxIiAvPjxyZWN0IHdpZHRoPSI3IiBoZWlnaHQ9IjUiIHg9IjE0IiB5PSIzIiByeD0iMSIgLz48cmVjdCB3aWR0aD0iNyIgaGVpZ2h0PSI5IiB4PSIxNCIgeT0iMTIiIHJ4PSIxIiAvPjxyZWN0IHdpZHRoPSI3IiBoZWlnaHQ9IjUiIHg9IjMiIHk9IjE2IiByeD0iMSIgLz48L0ljb25CYXNlPjsKICAgICAgICBjb25zdCBGaWxlU3ByZWFkc2hlZXQgPSAocHJvcHMpID0+IDxJY29uQmFzZSB7Li4ucHJvcHN9PjxwYXRoIGQ9Ik0xNSAySDZhMiAyIDAgMCAwLTIgMnYxNmEyIDIgMCAwIDAgMiAyaDEyYTIgMiAwIDAgMCAyLTJWN1oiIC8+PHBhdGggZD0iTTE0IDJ2NGEyIDIgMCAwIDAgMiAyaDQiIC8+PHBhdGggZD0iTTggMTNoMiIgLz48cGF0aCBkPSJNMTQgMTNoMiIgLz48cGF0aCBkPSJNOCAxN2gyIiAvPjxwYXRoIGQ9Ik0xNCAxN2gyIiAvPjwvSWNvbkJhc2U+OwogICAgICAgIGNvbnN0IFNldHRpbmdzID0gKHByb3BzKSA9PiA8SWNvbkJhc2Ugey4uLnByb3BzfT48cGF0aCBkPSJNMTIuMjIgMmgtLjQ0YTIgMiAwIDAgMC0yIDJ2LjE4YTIgMiAwIDAgMS0xIDEuNzNsLS40My4yNWEyIDIgMCAwIDEtMiAwbC0uMTUtLjA4YTIgMiAwIDAgMC0yLjczLjczbC0uMjIuMzhhMiAyIDAgMCAwIC43MyAyLjczbC4xNS4xYTIgMiAwIDAgMSAxIDEuNzJ2LjUxYTIgMiAwIDAgMS0xIDEuNzRsLS4xNS4wOWEyIDIgMCAwIDAtLjczIDIuNzNsLjIyLjM4YTIgMiAwIDAgMCAyLjczLjczbC4xNS0uMDhhMiAyIDAgMCAxIDIgMGwuNDMuMjVhMiAyIDAgMCAxIDEgMS43M1YyMGEyIDIgMCAwIDAgMiAyaC40NGEyIDIgMCAwIDAgMi0ydi0uMThhMiAyIDAgMCAxIDEtMS43M2wuNDMtLjI1YTIgMiAwIDAgMSAyIDBsLjE1LjA4YTIgMiAwIDAgMCAyLjczLS43M2wuMjItLjM4YTIgMiAwIDAgMC0uNzMtMi43M2wtLjE1LS4xYTIgMiAwIDAgMS0xLTEuNzJ2LS41MWEyIDIgMCAwIDEgMS0xLjc0bC4xNS0uMDlhMiAyIDAgMCAwIC43My0yLjczbC0uMjItLjM4YTIgMiAwIDAgMC0yLjczLS43M2wtLjE1LjA4YTIgMiAwIDAgMS0yIDBsLS40My0uMjVhMiAyIDAgMCAxLTEtMS43M1Y0YTIgMiAwIDAgMC0yLTJ6IiAvPjxjaXJjbGUgY3g9IjEyIiBjeT0iMTIiIHI9IjMiIC8+PC9JY29uQmFzZT47CiAgICAgICAgY29uc3QgRmlsZVRleHQgPSAocHJvcHMpID0+IDxJY29uQmFzZSB7Li4ucHJvcHN9PjxwYXRoIGQ9Ik0xNSAySDZhMiAyIDAgMCAwLTIgMnYxNmEyIDIgMCAwIDAgMiAyaDEyYTIgMiAwIDAgMCAyLTJWN1oiIC8+PHBhdGggZD0iTTE0IDJ2NGEyIDIgMCAwIDAgMiAyaDQiIC8+PHBhdGggZD0iTTEwIDlIOCIgLz48cGF0aCBkPSJNMTYgMTNIOCIgLz48cGF0aCBkPSJNMTYgMTdIOCIgLz48L0ljb25CYXNlPjsKICAgICAgICBjb25zdCBQcmludGVyID0gKHByb3BzKSA9PiA8SWNvbkJhc2Ugey4uLnByb3BzfT48cG9seWxpbmUgcG9pbnRzPSI2IDkgNiAyIDE4IDIgMTggOSIgLz48cGF0aCBkPSJNNiAxOEg0YTIgMiAwIDAgMS0yLTJ2LTVhMiAyIDAgMCAxIDItMmgxNmEyIDIgMCAwIDEgMiAydjVhMiAyIDAgMCAxLTIgMmgtMiIgLz48cmVjdCB3aWR0aD0iMTIiIGhlaWdodD0iOCIgeD0iNiIgeT0iMTQiIC8+PC9JY29uQmFzZT47CiAgICAgICAgY29uc3QgU2F2ZSA9IChwcm9wcykgPT4gPEljb25CYXNlIHsuLi5wcm9wc30+PHBhdGggZD0iTTE1LjIgM2EyIDIgMCAwIDEgMS40LjZsMy44IDMuOGEyIDIgMCAwIDEgLjYgMS40VjE5YTIgMiAwIDAgMS0yIDJINWEyIDIgMCAwIDEtMi0yVjVhMiAyIDAgMCAxIDItMnoiIC8+PHBhdGggZD0iTTE3IDIxdi04SDd2OCIgLz48cGF0aCBkPSJNNyAzdjVoOCIgLz48L0ljb25CYXNlPjsKICAgICAgICBjb25zdCBVcGxvYWQgPSAocHJvcHMpID0+IDxJY29uQmFzZSB7Li4ucHJvcHN9PjxwYXRoIGQ9Ik0yMSAxNXY0YTIgMiAwIDAgMS0yIDJINWEyIDIgMCAwIDEtMi0ydi00IiAvPjxwb2x5bGluZSBwb2ludHM9IjE3IDggMTIgMyA3IDgiIC8+PGxpbmUgeDE9IjEyIiB4Mj0iMTIiIHkxPSIzIiB5Mj0iMTUiIC8+PC9JY29uQmFzZT47CiAgICAgICAgY29uc3QgVHJhc2gyID0gKHByb3BzKSA9PiA8SWNvbkJhc2Ugey4uLnByb3BzfT48cGF0aCBkPSJNMyA2aDE4IiAvPjxwYXRoIGQ9Ik0xOSA2djE0YzAgMS0xIDItMiAySDdjLTEgMC0yLTEtMi0yVjYiIC8+PHBhdGggZD0iTTggNlY0YzAtMSAxLTIgMi0yaDRjMSAwIDIgMSAyIDJ2MiIgLz48bGluZSB4MT0iMTAiIHgyPSIxMCIgeTE9IjExIiB5Mj0iMTciIC8+PGxpbmUgeDE9IjE0IiB4Mj0iMTQiIHkxPSIxMSIgeTI9IjE3IiAvPjwvSWNvbkJhc2U+OwogICAgICAgIGNvbnN0IENoZWNrQ2lyY2xlID0gKHByb3BzKSA9PiA8SWNvbkJhc2Ugey4uLnByb3BzfT48cGF0aCBkPSJNMjIgMTEuMDhWMTJhMTAgMTAgMCAxIDEtNS45My05LjE0IiAvPjxwb2x5bGluZSBwb2ludHM9IjIyIDQgMTIgMTQuMDEgOSAxMS4wMSIgLz48L0ljb25CYXNlPjsKICAgICAgICBjb25zdCBBbGVydENpcmNsZSA9IChwcm9wcykgPT4gPEljb25CYXNlIHsuLi5wcm9wc30+PGNpcmNsZSBjeD0iMTIiIGN5PSIxMiIgcj0iMTAiIC8+PGxpbmUgeDE9IjEyIiB4Mj0iMTIiIHkxPSI4IiB5Mj0iMTIiIC8+PGxpbmUgeDE9IjEyIiB4Mj0iMTIuMDEiIHkxPSIxNiIgeTI9IjE2IiAvPjwvSWNvbkJhc2U+OwogICAgICAgIGNvbnN0IFJlZnJlc2hDdyA9IChwcm9wcykgPT4gPEljb25CYXNlIHsuLi5wcm9wc30+PHBhdGggZD0iTTMgMTJhOSA5IDAgMCAxIDktOSA5Ljc1IDkuNzUgMCAwIDEgNi43NCAyLjc0TDIxIDgiIC8+PHBhdGggZD0iTTIxIDN2NWgtNSIgLz48cGF0aCBkPSJNMjEgMTJhOSA5IDAgMCAxLTkgOSA5Ljc1IDkuNzUgMCAwIDEtNi43NC0yLjc0TDMgMTYiIC8+PHBhdGggZD0iTTggMTZIM3Y1IiAvPjwvSWNvbkJhc2U+OwogICAgICAgIGNvbnN0IFJvdGF0ZUNjdyA9IChwcm9wcykgPT4gPEljb25CYXNlIHsuLi5wcm9wc30+PHBhdGggZD0iTTMgMTJhOSA5IDAgMSAwIDktOSA5Ljc1IDkuNzUgMCAwIDAtNi43NC0yLjc0TDMgMTIiIC8+PHBhdGggZD0iTTMgNXY3aDciIC8+PC9JY29uQmFzZT47CiAgICAgICAgY29uc3QgRG93bmxvYWQgPSAocHJvcHMpID0+IDxJY29uQmFzZSB7Li4ucHJvcHN9PjxwYXRoIGQ9Ik0yMSAxNXY0YTIgMiAwIDAgMS0yIDJINWEyIDIgMCAwIDEtMi0ydi00IiAvPjxwb2x5bGluZSBwb2ludHM9IjcgMTAgMTIgMTUgMTcgMTAiIC8+PGxpbmUgeDE9IjEyIiB4Mj0iMTIiIHkxPSIxNSIgeTI9IjMiIC8+PC9JY29uQmFzZT47CiAgICAgICAgY29uc3QgUGx1cyA9IChwcm9wcykgPT4gPEljb25CYXNlIHsuLi5wcm9wc30+PGxpbmUgeDE9IjEyIiB5MT0iNSIgeDI9IjEyIiB5Mj0iMTkiIC8+PGxpbmUgeDE9IjUiIHkxPSIxMiIgeDI9IjE5IiB5Mj0iMTIiIC8+PC9JY29uQmFzZT47CiAgICAgICAgY29uc3QgQnJpZWZjYXNlID0gKHByb3BzKSA9PiA8SWNvbkJhc2Ugey4uLnByb3BzfT48cmVjdCB3aWR0aD0iMjAiIGhlaWdodD0iMTQiIHg9IjIiIHk9IjciIHJ4PSIyIiByeT0iMiIgLz48cGF0aCBkPSJNMTYgMjFWNWEyIDIgMCAwIDAtMi0yaC00YTIgMiAwIDAgMC0yIDJ2MTYiIC8+PC9JY29uQmFzZT47CiAgICAgICAgY29uc3QgTG9jayA9IChwcm9wcykgPT4gPEljb25CYXNlIHsuLi5wcm9wc30+PHJlY3QgeD0iMyIgeT0iMTEiIHdpZHRoPSIxOCIgaGVpZ2h0PSIxMSIgcng9IjIiIHJ5PSIyIiAvPjxwYXRoIGQ9Ik03IDExVjdhNSA1IDAgMCAxIDEwIDB2NCIgLz48L0ljb25CYXNlPjsKICAgICAgICBjb25zdCBVbmxvY2sgPSAocHJvcHMpID0+IDxJY29uQmFzZSB7Li4ucHJvcHN9PjxyZWN0IHg9IjMiIHk9IjExIiB3aWR0aD0iMTgiIGhlaWdodD0iMTEiIHJ4PSIyIiByeT0iMiIgLz48cGF0aCBkPSJNNyAxMVY3YTUgNSAwIDAgMSA5LjktMSIgLz48L0ljb25CYXNlPjsKICAgICAgICBjb25zdCBFZGl0ID0gKHByb3BzKSA9PiA8SWNvbkJhc2Ugey4uLnByb3BzfT48cGF0aCBkPSJNMTEgNEg0YTIgMiAwIDAgMC0yIDJ2MTRhMiAyIDAgMCAwIDIgMmgxNGEyIDIgMCAwIDAgMi0ydi03IiAvPjxwYXRoIGQ9Ik0xOC41IDIuNWEyLjEyMSAyLjEyMSAwIDAgMSAzIDNMMTIgMTVsLTQgMSAxLTQgOS41LTkuNXoiIC8+PC9JY29uQmFzZT47CiAgICAgICAgY29uc3QgQ2hlY2sgPSAocHJvcHMpID0+IDxJY29uQmFzZSB7Li4ucHJvcHN9Pjxwb2x5bGluZSBwb2ludHM9IjIwIDYgOSAxNyA0IDEyIiAvPjwvSWNvbkJhc2U+OwogICAgICAgIGNvbnN0IEdyaWQgPSAocHJvcHMpID0+IDxJY29uQmFzZSB7Li4ucHJvcHN9PjxyZWN0IHdpZHRoPSI3IiBoZWlnaHQ9IjciIHg9IjMiIHk9IjMiIHJ4PSIxIiAvPjxyZWN0IHdpZHRoPSI3IiBoZWlnaHQ9IjciIHg9IjE0IiB5PSIzIiByeD0iMSIgLz48cmVjdCB3aWR0aD0iNyIgaGVpZ2h0PSI3IiB4PSIxNCIgeT0iMTQiIHJ4PSIxIiAvPjxyZWN0IHdpZHRoPSI3IiBoZWlnaHQ9IjciIHg9IjMiIHk9IjE0IiByeD0iMSIgLz48L0ljb25CYXNlPjsKICAgICAgICBjb25zdCBMaXN0ID0gKHByb3BzKSA9PiA8SWNvbkJhc2Ugey4uLnByb3BzfT48bGluZSB4MT0iOCIgeDI9IjIxIiB5MT0iNiIgeTI9IjYiIC8+PGxpbmUgeDE9IjgiIHgyPSIyMSIgeTE9IjEyIiB5Mj0iMTIiIC8+PGxpbmUgeDE9IjgiIHgyPSIyMSIgeTE9IjE4IiB5Mj0iMTgiIC8+PGxpbmUgeDE9IjMiIHgyPSIzLjAxIiB5MT0iNiIgeTI9IjYiIC8+PGxpbmUgeDE9IjMiIHgyPSIzLjAxIiB5MT0iMTIiIHkyPSIxMiIgLz48bGluZSB4MT0iMyIgeDI9IjMuMDEiIHkxPSIxOCIgeTI9IjE4IiAvPjwvSWNvbkJhc2U+OwogICAgICAgIGNvbnN0IEJlYWtlciA9IChwcm9wcykgPT4gPEljb25CYXNlIHsuLi5wcm9wc30+PHBhdGggZD0iTTQuNSAzaDE1Ii8+PHBhdGggZD0iTTYgM3YxNmEyIDIgMCAwIDAgMiAyaDhhMiAyIDAgMCAwIDItMlYzIi8+PHBhdGggZD0iTTYgMTRoMTIiLz48L0ljb25CYXNlPjsKICAgICAgICBjb25zdCBCb29rT3BlbiA9IChwcm9wcykgPT4gPEljb25CYXNlIHsuLi5wcm9wc30+PHBhdGggZD0iTTIgM2g2YTQgNCAwIDAgMSA0IDR2MTRhMyAzIDAgMCAwLTMtM0gyeiIvPjxwYXRoIGQ9Ik0yMiAzaC02YTQgNCAwIDAgMC00IDR2MTRhMyAzIDAgMCAxIDMtM2g3eiIvPjwvSWNvbkJhc2U+OwogICAgICAgIGNvbnN0IENsb2NrID0gKHByb3BzKSA9PiA8SWNvbkJhc2Ugey4uLnByb3BzfT48Y2lyY2xlIGN4PSIxMiIgY3k9IjEyIiByPSIxMCIvPjxwb2x5bGluZSBwb2ludHM9IjEyIDYgMTIgMTIgMTYgMTQiLz48L0ljb25CYXNlPjsKICAgICAgICBjb25zdCBFeWUgPSAocHJvcHMpID0+IDxJY29uQmFzZSB7Li4ucHJvcHN9PjxwYXRoIGQ9Ik0xIDEyczQtOCAxMS04IDExIDggMTEgOC0xMSA4LTQgOC0xMSA4LTExLTgtMTEtOHoiLz48Y2lyY2xlIGN4PSIxMiIgY3k9IjEyIiByPSIzIi8+PC9JY29uQmFzZT47CiAgICAgICAgY29uc3QgQXJjaGl2ZSA9IChwcm9wcykgPT4gPEljb25CYXNlIHsuLi5wcm9wc30+PHBvbHlsaW5lIHBvaW50cz0iMjEgOCAyMSAyMSAzIDIxIDMgOCIgLz48cmVjdCB4PSIxIiB5PSIzIiB3aWR0aD0iMjIiIGhlaWdodD0iNSIgLz48bGluZSB4MT0iMTAiIHkxPSIxMiIgeDI9IjE0IiB5Mj0iMTIiIC8+PC9JY29uQmFzZT47CiAgICAgICAgY29uc3QgSGVscENpcmNsZSA9IChwcm9wcykgPT4gPEljb25CYXNlIHsuLi5wcm9wc30+PGNpcmNsZSBjeD0iMTIiIGN5PSIxMiIgcj0iMTAiIC8+PHBhdGggZD0iTTkuMDkgOWEzIDMgMCAwIDEgNS44MyAxYzAgMi0zIDMtMyAzIiAvPjxsaW5lIHgxPSIxMiIgeDI9IjEyLjAxIiB5MT0iMTciIHkyPSIxNyIgLz48L0ljb25CYXNlPjsKICAgICAgICBjb25zdCBFZGl0MyA9IChwcm9wcykgPT4gPEljb25CYXNlIHsuLi5wcm9wc30+PHBhdGggZD0iTTEyIDIwaDkiIC8+PHBhdGggZD0iTTE2LjUgMy41YTIuMTIxIDIuMTIxIDAgMCAxIDMgM0w3IDE5bC00IDEgMS00TDE2LjUgMy41eiIgLz48L0ljb25CYXNlPjsKICAgICAgICBjb25zdCBTdGFtcCA9IChwcm9wcykgPT4gPEljb25CYXNlIHsuLi5wcm9wc30+PHBhdGggZD0iTTEyIDJMMiA3bDEwIDUgMTAtNS0xMC01ek0yIDE3bDEwIDUgMTAtNU0yIDEybDEwIDUgMTAtNSIvPjwvSWNvbkJhc2U+OwogICAgICAgIGNvbnN0IENhbGN1bGF0b3IgPSAocHJvcHMpID0+IDxJY29uQmFzZSB7Li4ucHJvcHN9PjxyZWN0IHg9IjQiIHk9IjIiIHdpZHRoPSIxNiIgaGVpZ2h0PSIyMCIgcng9IjIiLz48bGluZSB4MT0iOCIgeDI9IjE2IiB5MT0iNiIgeTI9IjYiLz48bGluZSB4MT0iOCIgeDI9IjE2IiB5MT0iMTAiIHkyPSIxMCIvPjxsaW5lIHgxPSI4IiB4Mj0iMTYiIHkxPSIxNCIgeTI9IjE0Ii8+PGxpbmUgeDE9IjgiIHgyPSIxNiIgeTE9IjE4IiB5Mj0iMTgiLz48L0ljb25CYXNlPjsKCiAgICAgICAgLy8gLS0tIENvbXBvc2FudHMgVUkgLS0tCgogICAgICAgIGNvbnN0IEJ1dHRvbiA9ICh7IGNoaWxkcmVuLCBvbkNsaWNrLCB2YXJpYW50ID0gJ3ByaW1hcnknLCBjbGFzc05hbWUgPSAnJywgaWNvbjogSWNvbiwgZGlzYWJsZWQgPSBmYWxzZSwgdGl0bGUgPSAnJyB9KSA9PiB7CiAgICAgICAgICAgIGNvbnN0IGJhc2VTdHlsZSA9ICJmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBweC00IHB5LTIgcm91bmRlZC1sZyB0cmFuc2l0aW9uLWFsbCBkdXJhdGlvbi0yMDAgZm9jdXM6b3V0bGluZS1ub25lIGZvY3VzOnJpbmctMiBmb2N1czpyaW5nLW9mZnNldC0xIGZvbnQtbWVkaXVtIHNoYWRvdy1zbSBhY3RpdmU6c2NhbGUtOTUgZGlzYWJsZWQ6b3BhY2l0eS01MCBkaXNhYmxlZDpjdXJzb3Itbm90LWFsbG93ZWQiOwogICAgICAgICAgICBjb25zdCB2YXJpYW50cyA9IHsKICAgICAgICAgICAgICAgIHByaW1hcnk6ICJiZy1za3ktNTAwIHRleHQtd2hpdGUgaG92ZXI6Ymctc2t5LTYwMCBmb2N1czpyaW5nLXNreS0zMDAgc2hhZG93LXNreS0xMDAiLAogICAgICAgICAgICAgICAgc2Vjb25kYXJ5OiAiYmctd2hpdGUgdGV4dC1zbGF0ZS03MDAgYm9yZGVyIGJvcmRlci1zbGF0ZS0yMDAgaG92ZXI6Ymctc2xhdGUtNTAgZm9jdXM6cmluZy1zbGF0ZS0yMDAiLAogICAgICAgICAgICAgICAgZGFuZ2VyOiAiYmctcm9zZS00MDAgdGV4dC13aGl0ZSBob3ZlcjpiZy1yb3NlLTUwMCBmb2N1czpyaW5nLXJvc2UtMzAwIHNoYWRvdy1yb3NlLTEwMCIsCiAgICAgICAgICAgICAgICBzdWNjZXNzOiAiYmctZW1lcmFsZC01MDAgdGV4dC13aGl0ZSBob3ZlcjpiZy1lbWVyYWxkLTYwMCBmb2N1czpyaW5nLWVtZXJhbGQtMzAwIHNoYWRvdy1lbWVyYWxkLTEwMCIsCiAgICAgICAgICAgICAgICB3YXJuaW5nOiAiYmctYW1iZXItNDAwIHRleHQtd2hpdGUgaG92ZXI6YmctYW1iZXItNTAwIGZvY3VzOnJpbmctYW1iZXItMzAwIHNoYWRvdy1hbWJlci0xMDAiCiAgICAgICAgICAgIH07CiAgICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgICAgICA8YnV0dG9uIG9uQ2xpY2s9e29uQ2xpY2t9IGRpc2FibGVkPXtkaXNhYmxlZH0gY2xhc3NOYW1lPXtgJHtiYXNlU3R5bGV9ICR7dmFyaWFudHNbdmFyaWFudF19ICR7Y2xhc3NOYW1lfWB9IHRpdGxlPXt0aXRsZX0+CiAgICAgICAgICAgICAgICAgICAge0ljb24gJiYgPEljb24gY2xhc3NOYW1lPSJ3LTQgaC00IG1yLTIiIC8+fQogICAgICAgICAgICAgICAgICAgIHtjaGlsZHJlbn0KICAgICAgICAgICAgICAgIDwvYnV0dG9uPgogICAgICAgICAgICApOwogICAgICAgIH07CgogICAgICAgIGNvbnN0IENhcmQgPSAoeyB0aXRsZSwgY2hpbGRyZW4sIGNsYXNzTmFtZSA9ICcnLCBoZWFkZXJBY3Rpb24gPSBudWxsIH0pID0+ICgKICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9e2BiZy13aGl0ZSByb3VuZGVkLXhsIHNoYWRvdy1zbSBib3JkZXIgYm9yZGVyLXNsYXRlLTEwMCBwLTYgJHtjbGFzc05hbWV9YH0+CiAgICAgICAgICAgICAgICB7dGl0bGUgJiYgPGgzIGNsYXNzTmFtZT0idGV4dC1sZyBmb250LXNlbWlib2xkIHRleHQtc2xhdGUtODAwIG1iLTUgYm9yZGVyLWIgYm9yZGVyLXNsYXRlLTUwIHBiLTMgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1iZXR3ZWVuIj4KICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9ImZsZXggaXRlbXMtY2VudGVyIj4KICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPSJiZy1za3ktMTAwIHctMiBoLTYgcm91bmRlZC1mdWxsIG1yLTMgYmxvY2siPjwvc3Bhbj4KICAgICAgICAgICAgICAgICAgICAgICAge3RpdGxlfQogICAgICAgICAgICAgICAgICAgIDwvc3Bhbj4KICAgICAgICAgICAgICAgICAgICB7aGVhZGVyQWN0aW9ufQogICAgICAgICAgICAgICAgPC9oMz59CiAgICAgICAgICAgICAgICB7Y2hpbGRyZW59CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICk7CgogICAgICAgIGNvbnN0IENvbmZpcm1hdGlvbk1vZGFsID0gKHsgaXNPcGVuLCB0aXRsZSwgbWVzc2FnZSwgb25Db25maXJtLCBvbkNhbmNlbCB9KSA9PiB7CiAgICAgICAgICAgIGlmICghaXNPcGVuKSByZXR1cm4gbnVsbDsKICAgICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJmaXhlZCBpbnNldC0wIGJnLWJsYWNrLzUwIGJhY2tkcm9wLWJsdXItc20gei01MCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBwLTQgYW5pbWF0ZS1mYWRlLWluIj4KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iYmctd2hpdGUgcm91bmRlZC14bCBzaGFkb3ctMnhsIG1heC13LW1kIHctZnVsbCBvdmVyZmxvdy1oaWRkZW4gdHJhbnNmb3JtIHRyYW5zaXRpb24tYWxsIHNjYWxlLTEwMCBib3JkZXIgYm9yZGVyLXNsYXRlLTEwMCI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJwLTYiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGgzIGNsYXNzTmFtZT0idGV4dC1sZyBmb250LWJvbGQgdGV4dC1zbGF0ZS04MDAgbWItMiBmbGV4IGl0ZW1zLWNlbnRlciI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEFsZXJ0Q2lyY2xlIGNsYXNzTmFtZT0idy02IGgtNiB0ZXh0LXNreS01MDAgbXItMiIgLz4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7dGl0bGV9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2gzPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPSJ0ZXh0LXNsYXRlLTYwMCB3aGl0ZXNwYWNlLXByZS1saW5lIj57bWVzc2FnZX08L3A+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iYmctc2xhdGUtNTAgcHgtNiBweS00IGZsZXgganVzdGlmeS1lbmQgc3BhY2UteC0zIGJvcmRlci10IGJvcmRlci1zbGF0ZS0xMDAiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBvbkNsaWNrPXtvbkNhbmNlbH0gY2xhc3NOYW1lPSJweC00IHB5LTIgcm91bmRlZC1sZyB0ZXh0LXNsYXRlLTYwMCBob3ZlcjpiZy1zbGF0ZS0yMDAgZm9udC1tZWRpdW0gdHJhbnNpdGlvbi1jb2xvcnMiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFubnVsZXIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBvbkNsaWNrPXtvbkNvbmZpcm19IGNsYXNzTmFtZT0icHgtNCBweS0yIHJvdW5kZWQtbGcgYmctc2t5LTYwMCB0ZXh0LXdoaXRlIGhvdmVyOmJnLXNreS03MDAgZm9udC1tZWRpdW0gdHJhbnNpdGlvbi1jb2xvcnMgc2hhZG93LXNtIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDb25maXJtZXIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICApOwogICAgICAgIH07CgogICAgICAgIC8vIC0tLSBDT01QT1NBTlQgOiBNT0RBTCBERSBTQUlTSUUgLS0tCiAgICAgICAgY29uc3QgSW5wdXRNb2RhbCA9ICh7IGlzT3BlbiwgdGl0bGUsIG1lc3NhZ2UsIGRlZmF1bHRWYWx1ZSwgb25Db25maXJtLCBvbkNhbmNlbCB9KSA9PiB7CiAgICAgICAgICAgIGNvbnN0IFt2YWx1ZSwgc2V0VmFsdWVdID0gdXNlU3RhdGUoZGVmYXVsdFZhbHVlKTsKICAgICAgICAgICAgCiAgICAgICAgICAgIHVzZUVmZmVjdCgoKSA9PiB7CiAgICAgICAgICAgICAgICBpZiAoaXNPcGVuKSBzZXRWYWx1ZShkZWZhdWx0VmFsdWUpOwogICAgICAgICAgICB9LCBbaXNPcGVuLCBkZWZhdWx0VmFsdWVdKTsKCiAgICAgICAgICAgIGlmICghaXNPcGVuKSByZXR1cm4gbnVsbDsKCiAgICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iZml4ZWQgaW5zZXQtMCBiZy1ibGFjay81MCBiYWNrZHJvcC1ibHVyLXNtIHotNTAgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgcC00IGFuaW1hdGUtZmFkZS1pbiI+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9ImJnLXdoaXRlIHJvdW5kZWQteGwgc2hhZG93LTJ4bCBtYXgtdy1tZCB3LWZ1bGwgb3ZlcmZsb3ctaGlkZGVuIHRyYW5zZm9ybSB0cmFuc2l0aW9uLWFsbCBzY2FsZS0xMDAgYm9yZGVyIGJvcmRlci1zbGF0ZS0xMDAiPgogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0icC02Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMyBjbGFzc05hbWU9InRleHQtbGcgZm9udC1ib2xkIHRleHQtc2xhdGUtODAwIG1iLTIgZmxleCBpdGVtcy1jZW50ZXIiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTYXZlIGNsYXNzTmFtZT0idy02IGgtNiB0ZXh0LXNreS01MDAgbXItMiIgLz4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7dGl0bGV9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2gzPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPSJ0ZXh0LXNsYXRlLTYwMCBtYi00IHRleHQtc20iPnttZXNzYWdlfTwvcD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPSJ0ZXh0IiAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17dmFsdWV9IAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4gc2V0VmFsdWUoZS50YXJnZXQudmFsdWUpfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0idy1mdWxsIHAtMiBib3JkZXIgYm9yZGVyLXNsYXRlLTMwMCByb3VuZGVkIGZvY3VzOnJpbmctMiBmb2N1czpyaW5nLXNreS0yMDAgb3V0bGluZS1ub25lIGZvbnQtbWVkaXVtIHRleHQtc2xhdGUtNzAwIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF1dG9Gb2N1cwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uS2V5RG93bj17KGUpID0+IHsgaWYoZS5rZXkgPT09ICdFbnRlcicpIG9uQ29uZmlybSh2YWx1ZSk7IH19CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPgogICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9ImJnLXNsYXRlLTUwIHB4LTYgcHktNCBmbGV4IGp1c3RpZnktZW5kIHNwYWNlLXgtMyBib3JkZXItdCBib3JkZXItc2xhdGUtMTAwIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gb25DbGljaz17b25DYW5jZWx9IGNsYXNzTmFtZT0icHgtNCBweS0yIHJvdW5kZWQtbGcgdGV4dC1zbGF0ZS02MDAgaG92ZXI6Ymctc2xhdGUtMjAwIGZvbnQtbWVkaXVtIHRyYW5zaXRpb24tY29sb3JzIHRleHQtc20iPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFubnVsZXIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBvbkNsaWNrPXsoKSA9PiBvbkNvbmZpcm0odmFsdWUpfSBjbGFzc05hbWU9InB4LTQgcHktMiByb3VuZGVkLWxnIGJnLXNreS02MDAgdGV4dC13aGl0ZSBob3ZlcjpiZy1za3ktNzAwIGZvbnQtbWVkaXVtIHRyYW5zaXRpb24tY29sb3JzIHNoYWRvdy1zbSB0ZXh0LXNtIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTYXV2ZWdhcmRlcgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICk7CiAgICAgICAgfTsKCiAgICAgICAgLy8gLS0tIENPTVBPU0FOVCA6IMOJRElURVVSIERFIE1PRMOITEVTIERFIERPQ1VNRU5UUyAtLS0KICAgICAgICBjb25zdCBEb2NUZW1wbGF0ZUVkaXRvciA9ICh7IHRlbXBsYXRlcywgc2V0VGVtcGxhdGVzLCBvbkNsb3NlIH0pID0+IHsKICAgICAgICAgICAgY29uc3QgW2FjdGl2ZVRhYiwgc2V0QWN0aXZlVGFiXSA9IHVzZVN0YXRlKCdzdHVkZW50Jyk7CgogICAgICAgICAgICBjb25zdCBoYW5kbGVDaGFuZ2UgPSAoZmllbGQsIHZhbHVlKSA9PiB7CiAgICAgICAgICAgICAgICBzZXRUZW1wbGF0ZXMocHJldiA9PiAoewogICAgICAgICAgICAgICAgICAgIC4uLnByZXYsCiAgICAgICAgICAgICAgICAgICAgW2FjdGl2ZVRhYl06IHsKICAgICAgICAgICAgICAgICAgICAgICAgLi4ucHJldlthY3RpdmVUYWJdLAogICAgICAgICAgICAgICAgICAgICAgICBbZmllbGRdOiB2YWx1ZQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pKTsKICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIGNvbnN0IHRhYnMgPSBbCiAgICAgICAgICAgICAgICB7IGlkOiAnc3R1ZGVudCcsIGxhYmVsOiAnQ29udm9jLiDDiWzDqHZlJywgaWNvbjogVXNlcnMgfSwKICAgICAgICAgICAgICAgIHsgaWQ6ICdzdXJ2ZWlsbGFudCcsIGxhYmVsOiAnQ29udm9jLiBTdXJ2ZWlsbGFudCcsIGljb246IEV5ZSB9LAogICAgICAgICAgICAgICAgeyBpZDogJ2Flc2gnLCBsYWJlbDogJ0NvbnZvYy4gQUVTSCcsIGljb246IEhlbHBDaXJjbGUgfSwKICAgICAgICAgICAgICAgIHsgaWQ6ICdzZWNyZXRhcmlhdCcsIGxhYmVsOiAnT3JkcmUgTWlzc2lvbiBTZWNyw6l0LicsIGljb246IEFyY2hpdmUgfSwKICAgICAgICAgICAgXTsKCiAgICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iYmctc2xhdGUtNTAgcm91bmRlZC14bCBib3JkZXIgYm9yZGVyLXNsYXRlLTIwMCBvdmVyZmxvdy1oaWRkZW4gbWItNiBhbmltYXRlLWZhZGUtaW4iPgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWJldHdlZW4gcC00IGJvcmRlci1iIGJvcmRlci1zbGF0ZS0yMDAgYmctd2hpdGUiPgogICAgICAgICAgICAgICAgICAgICAgICA8aDMgY2xhc3NOYW1lPSJmb250LWJvbGQgdGV4dC1zbGF0ZS03MDAgZmxleCBpdGVtcy1jZW50ZXIiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPEVkaXQzIGNsYXNzTmFtZT0idy01IGgtNSBtci0yIHRleHQtc2t5LTYwMCIgLz4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIMOJZGl0ZXVyIGRlIE1vZMOobGVzIChWMTApCiAgICAgICAgICAgICAgICAgICAgICAgIDwvaDM+CiAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gb25DbGljaz17b25DbG9zZX0gY2xhc3NOYW1lPSJ0ZXh0LXNsYXRlLTQwMCBob3Zlcjp0ZXh0LXNsYXRlLTYwMCBwLTEiPkZlcm1lcjwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJmbGV4IGJvcmRlci1iIGJvcmRlci1zbGF0ZS0yMDAgYmctd2hpdGUgb3ZlcmZsb3cteC1hdXRvIj4KICAgICAgICAgICAgICAgICAgICAgICAge3RhYnMubWFwKHRhYiA9PiAoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleT17dGFiLmlkfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHNldEFjdGl2ZVRhYih0YWIuaWQpfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17YGZsZXggaXRlbXMtY2VudGVyIHB4LTQgcHktMyB0ZXh0LXNtIGZvbnQtbWVkaXVtIHRyYW5zaXRpb24tY29sb3JzIGJvcmRlci1iLTIgd2hpdGVzcGFjZS1ub3dyYXAgJHthY3RpdmVUYWIgPT09IHRhYi5pZCA/ICdib3JkZXItc2t5LTUwMCB0ZXh0LXNreS02MDAgYmctc2t5LTUwJyA6ICdib3JkZXItdHJhbnNwYXJlbnQgdGV4dC1zbGF0ZS01MDAgaG92ZXI6dGV4dC1zbGF0ZS03MDAgaG92ZXI6Ymctc2xhdGUtNTAnfWB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRhYi5pY29uIGNsYXNzTmFtZT0idy00IGgtNCBtci0yIiAvPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt0YWIubGFiZWx9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICAgICAgKSl9CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJwLTYgZ3JpZCBncmlkLWNvbHMtMSBtZDpncmlkLWNvbHMtMiBnYXAtNiI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJzcGFjZS15LTQiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3NOYW1lPSJibG9jayB0ZXh0LXhzIGZvbnQtYm9sZCB0ZXh0LXNsYXRlLTUwMCB1cHBlcmNhc2UgbWItMSI+VGl0cmUgZHUgRG9jdW1lbnQ8L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT0idGV4dCIgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXt0ZW1wbGF0ZXNbYWN0aXZlVGFiXS50aXRsZX0gCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4gaGFuZGxlQ2hhbmdlKCd0aXRsZScsIGUudGFyZ2V0LnZhbHVlKX0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPSJ3LWZ1bGwgcC0yIGJvcmRlciBib3JkZXItc2xhdGUtMzAwIHJvdW5kZWQgZm9jdXM6cmluZy0yIGZvY3VzOnJpbmctc2t5LTIwMCBvdXRsaW5lLW5vbmUgZm9udC1ib2xkIHRleHQtc2xhdGUtODAwIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzTmFtZT0iYmxvY2sgdGV4dC14cyBmb250LWJvbGQgdGV4dC1zbGF0ZS01MDAgdXBwZXJjYXNlIG1iLTEiPlNvdXMtdGl0cmU8L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT0idGV4dCIgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXt0ZW1wbGF0ZXNbYWN0aXZlVGFiXS5zdWJ0aXRsZX0gCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4gaGFuZGxlQ2hhbmdlKCdzdWJ0aXRsZScsIGUudGFyZ2V0LnZhbHVlKX0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPSJ3LWZ1bGwgcC0yIGJvcmRlciBib3JkZXItc2xhdGUtMzAwIHJvdW5kZWQgZm9jdXM6cmluZy0yIGZvY3VzOnJpbmctc2t5LTIwMCBvdXRsaW5lLW5vbmUgdGV4dC1zbGF0ZS03MDAiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAge3RlbXBsYXRlc1thY3RpdmVUYWJdLmludHJvICE9PSB1bmRlZmluZWQgJiYgKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzc05hbWU9ImJsb2NrIHRleHQteHMgZm9udC1ib2xkIHRleHQtc2xhdGUtNTAwIHVwcGVyY2FzZSBtYi0xIj5UZXh0ZSBkJ0ludHJvZHVjdGlvbjwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZXh0YXJlYSAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvd3M9ezN9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17dGVtcGxhdGVzW2FjdGl2ZVRhYl0uaW50cm99IAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiBoYW5kbGVDaGFuZ2UoJ2ludHJvJywgZS50YXJnZXQudmFsdWUpfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPSJ3LWZ1bGwgcC0yIGJvcmRlciBib3JkZXItc2xhdGUtMzAwIHJvdW5kZWQgZm9jdXM6cmluZy0yIGZvY3VzOnJpbmctc2t5LTIwMCBvdXRsaW5lLW5vbmUgdGV4dC1zbSB0ZXh0LXNsYXRlLTcwMCIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9CiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ic3BhY2UteS00Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt0ZW1wbGF0ZXNbYWN0aXZlVGFiXS5jb25zaWduZXMgIT09IHVuZGVmaW5lZCAmJiAoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzTmFtZT0iYmxvY2sgdGV4dC14cyBmb250LWJvbGQgdGV4dC1zbGF0ZS01MDAgdXBwZXJjYXNlIG1iLTEiPkNvbnNpZ25lcyAoMSBwYXIgbGlnbmUpPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRleHRhcmVhIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcm93cz17OH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXt0ZW1wbGF0ZXNbYWN0aXZlVGFiXS5jb25zaWduZXN9IAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiBoYW5kbGVDaGFuZ2UoJ2NvbnNpZ25lcycsIGUudGFyZ2V0LnZhbHVlKX0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0idy1mdWxsIHAtMiBib3JkZXIgYm9yZGVyLXNsYXRlLTMwMCByb3VuZGVkIGZvY3VzOnJpbmctMiBmb2N1czpyaW5nLXNreS0yMDAgb3V0bGluZS1ub25lIHRleHQtc20gdGV4dC1zbGF0ZS03MDAgZm9udC1tb25vIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9Ii0gQ29uc2lnbmUgMS4uLiIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPSJ0ZXh0LVsxMHB4XSB0ZXh0LXNsYXRlLTQwMCBtdC0xIj5DaGFxdWUgc2F1dCBkZSBsaWduZSBjcsOpZXJhIHVuZSBub3V2ZWxsZSBsaWduZSBkYW5zIGxlIFBERi48L3A+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICApfQogICAgICAgICAgICAgICAgICAgICAgICAgICAge3RlbXBsYXRlc1thY3RpdmVUYWJdLm1pc3Npb25zICE9PSB1bmRlZmluZWQgJiYgKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzc05hbWU9ImJsb2NrIHRleHQteHMgZm9udC1ib2xkIHRleHQtc2xhdGUtNTAwIHVwcGVyY2FzZSBtYi0xIj5NaXNzaW9ucyAoMSBwYXIgbGlnbmUpPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRleHRhcmVhIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcm93cz17OH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXt0ZW1wbGF0ZXNbYWN0aXZlVGFiXS5taXNzaW9uc30gCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IGhhbmRsZUNoYW5nZSgnbWlzc2lvbnMnLCBlLnRhcmdldC52YWx1ZSl9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9InctZnVsbCBwLTIgYm9yZGVyIGJvcmRlci1zbGF0ZS0zMDAgcm91bmRlZCBmb2N1czpyaW5nLTIgZm9jdXM6cmluZy1za3ktMjAwIG91dGxpbmUtbm9uZSB0ZXh0LXNtIHRleHQtc2xhdGUtNzAwIGZvbnQtbW9ubyIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9CiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJiZy15ZWxsb3ctNTAgcC0zIGJvcmRlci10IGJvcmRlci15ZWxsb3ctMTAwIHRleHQteWVsbG93LTgwMCB0ZXh0LXhzIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIj4KICAgICAgICAgICAgICAgICAgICAgICAgPEFsZXJ0Q2lyY2xlIGNsYXNzTmFtZT0idy00IGgtNCBtci0yIiAvPgogICAgICAgICAgICAgICAgICAgICAgICBMZXMgbW9kaWZpY2F0aW9ucyBzb250IGVucmVnaXN0csOpZXMgYXV0b21hdGlxdWVtZW50LgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICk7CiAgICAgICAgfTsKCiAgICAgICAgLy8gLS0tIE1PRFVMRSBTRUNSRVRBUklBVCAtLS0KICAgICAgICBjb25zdCBTZWNyZXRhcmlhdFBhbmVsID0gKHsgc3ViamVjdHMsIHJvb21zLCB0ZWFjaGVycywgYXNzaWdubWVudHMsIG9uQXNzaWdubWVudENoYW5nZSB9KSA9PiB7CiAgICAgICAgICAgIGNvbnN0IFtzZWxlY3RlZFN1YmplY3RJZCwgc2V0U2VsZWN0ZWRTdWJqZWN0SWRdID0gdXNlU3RhdGUoc3ViamVjdHNbMF0/LmlkIHx8IG51bGwpOwogICAgICAgICAgICBjb25zdCBjdXJyZW50U3ViamVjdCA9IHN1YmplY3RzLmZpbmQocyA9PiBzLmlkID09PSBwYXJzZUludChzZWxlY3RlZFN1YmplY3RJZCkpOwoKICAgICAgICAgICAgY29uc3QgY3VycmVudEFzc2lnbm1lbnQgPSBhc3NpZ25tZW50c1tjdXJyZW50U3ViamVjdD8uaWRdIHx8IHsgcm9vbUlkOiAiIiwgdGVhY2hlcklkczogW10gfTsKCiAgICAgICAgICAgIGNvbnN0IGhhbmRsZVJvb21DaGFuZ2UgPSAoZSkgPT4gewogICAgICAgICAgICAgICAgaWYgKCFjdXJyZW50U3ViamVjdCkgcmV0dXJuOwogICAgICAgICAgICAgICAgb25Bc3NpZ25tZW50Q2hhbmdlKGN1cnJlbnRTdWJqZWN0LmlkLCB7IC4uLmN1cnJlbnRBc3NpZ25tZW50LCByb29tSWQ6IGUudGFyZ2V0LnZhbHVlIH0pOwogICAgICAgICAgICB9OwoKICAgICAgICAgICAgY29uc3QgdG9nZ2xlVGVhY2hlciA9ICh0SWQpID0+IHsKICAgICAgICAgICAgICAgIGlmICghY3VycmVudFN1YmplY3QpIHJldHVybjsKICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRJZHMgPSBjdXJyZW50QXNzaWdubWVudC50ZWFjaGVySWRzIHx8IFtdOwogICAgICAgICAgICAgICAgY29uc3QgbmV3SWRzID0gY3VycmVudElkcy5pbmNsdWRlcyh0SWQpIAogICAgICAgICAgICAgICAgICAgID8gY3VycmVudElkcy5maWx0ZXIoaWQgPT4gaWQgIT09IHRJZCkKICAgICAgICAgICAgICAgICAgICA6IFsuLi5jdXJyZW50SWRzLCB0SWRdOwogICAgICAgICAgICAgICAgb25Bc3NpZ25tZW50Q2hhbmdlKGN1cnJlbnRTdWJqZWN0LmlkLCB7IC4uLmN1cnJlbnRBc3NpZ25tZW50LCB0ZWFjaGVySWRzOiBuZXdJZHMgfSk7CiAgICAgICAgICAgIH07CgogICAgICAgICAgICBjb25zdCBzb3J0ZWRUZWFjaGVycyA9IFsuLi50ZWFjaGVyc10uc29ydCgoYSxiKSA9PiBhLmxhc3RuYW1lLmxvY2FsZUNvbXBhcmUoYi5sYXN0bmFtZSkpOwoKICAgICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJzcGFjZS15LTYgYW5pbWF0ZS1mYWRlLWluIj4KICAgICAgICAgICAgICAgICAgICA8Q2FyZCB0aXRsZT0iR2VzdGlvbiBkdSBTZWNyw6l0YXJpYXQgZCdFeGFtZW4iIGNsYXNzTmFtZT0iYm9yZGVyLWwtNCBib3JkZXItbC1wdXJwbGUtNTAwIj4KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9ImZsZXggZmxleC1jb2wgbWQ6ZmxleC1yb3cgZ2FwLTYiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgey8qIENvbG9ubmUgR2F1Y2hlIDogU8OpbGVjdGlvbiBFcHJldXZlICovfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9InctZnVsbCBtZDp3LTEvMyBzcGFjZS15LTQiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzc05hbWU9ImJsb2NrIHRleHQtc20gZm9udC1tZWRpdW0gdGV4dC1zbGF0ZS03MDAiPkNob2lzaXIgbCfDqXByZXV2ZSAoRmluIGQnw6lwcmV1dmUpIDo8L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJzcGFjZS15LTIgbWF4LWgtWzQwMHB4XSBvdmVyZmxvdy15LWF1dG8iPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7c3ViamVjdHMubWFwKHN1YiA9PiAoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleT17c3ViLmlkfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHNldFNlbGVjdGVkU3ViamVjdElkKHN1Yi5pZCl9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgdy1mdWxsIHRleHQtbGVmdCBwLTMgcm91bmRlZC1sZyBib3JkZXIgdHJhbnNpdGlvbi1hbGwgJHtzZWxlY3RlZFN1YmplY3RJZCA9PT0gc3ViLmlkID8gJ2JnLXB1cnBsZS01MCBib3JkZXItcHVycGxlLTUwMCByaW5nLTEgcmluZy1wdXJwbGUtMjAwJyA6ICdiZy13aGl0ZSBib3JkZXItc2xhdGUtMjAwIGhvdmVyOmJnLXNsYXRlLTUwJ31gfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJmb250LWJvbGQgdGV4dC1zbGF0ZS04MDAiPntzdWIubmFtZX08L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0idGV4dC14cyB0ZXh0LXNsYXRlLTUwMCI+e3N1Yi5kYXRlfSDigKIge3N1Yi50aW1lfTwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkpfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgey8qIENvbG9ubmUgRHJvaXRlIDogQ29uZmlndXJhdGlvbiAqL30KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJ3LWZ1bGwgbWQ6dy0yLzMgYmctc2xhdGUtNTAgcm91bmRlZC14bCBib3JkZXIgYm9yZGVyLXNsYXRlLTIwMCBwLTYiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50U3ViamVjdCA/ICgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9InNwYWNlLXktNiI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoNCBjbGFzc05hbWU9ImZvbnQtYm9sZCB0ZXh0LXNsYXRlLTcwMCBtYi0xIj4xLiBTYWxsZSBkdSBTZWNyw6l0YXJpYXQ8L2g0PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT0idGV4dC14cyB0ZXh0LXNsYXRlLTUwMCBtYi0yIj5MaWV1IGRlIHJldG91ciBkZXMgY29waWVzIGV0IGQnw6ltYXJnZW1lbnQgZmluYWwuPC9wPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzZWxlY3QgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXtjdXJyZW50QXNzaWdubWVudC5yb29tSWR9IAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17aGFuZGxlUm9vbUNoYW5nZX0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPSJ3LWZ1bGwgcC0yIGJvcmRlciBib3JkZXItc2xhdGUtMzAwIHJvdW5kZWQgZm9jdXM6cmluZy0yIGZvY3VzOnJpbmctcHVycGxlLTIwMCBvdXRsaW5lLW5vbmUiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSIiPi0tIFPDqWxlY3Rpb25uZXIgdW5lIHNhbGxlIC0tPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtyb29tcy5tYXAociA9PiA8b3B0aW9uIGtleT17ci5pZH0gdmFsdWU9e3IuaWR9PntyLm5hbWV9ICh7ci5jYXBhY2l0eX0gcGwuKTwvb3B0aW9uPil9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zZWxlY3Q+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoNCBjbGFzc05hbWU9ImZvbnQtYm9sZCB0ZXh0LXNsYXRlLTcwMCBtYi0xIj4yLiBQZXJzb25uZWxzIGFmZmVjdMOpczwvaDQ+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPSJ0ZXh0LXhzIHRleHQtc2xhdGUtNTAwIG1iLTIiPlPDqWxlY3Rpb25uZXogbGVzIHByb2Zlc3NldXJzIGNoYXJnw6lzIGR1IHNlY3LDqXRhcmlhdC48L3A+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9ImJnLXdoaXRlIGJvcmRlciBib3JkZXItc2xhdGUtMzAwIHJvdW5kZWQgaC02MCBvdmVyZmxvdy15LWF1dG8gcC0yIGdyaWQgZ3JpZC1jb2xzLTEgc206Z3JpZC1jb2xzLTIgZ2FwLTIiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7c29ydGVkVGVhY2hlcnMubWFwKHQgPT4gKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGtleT17dC5pZH0gY2xhc3NOYW1lPXtgZmxleCBpdGVtcy1jZW50ZXIgc3BhY2UteC0yIHAtMiByb3VuZGVkIGN1cnNvci1wb2ludGVyIGhvdmVyOmJnLXB1cnBsZS01MCBib3JkZXIgdHJhbnNpdGlvbi1jb2xvcnMgJHtjdXJyZW50QXNzaWdubWVudC50ZWFjaGVySWRzPy5pbmNsdWRlcyh0LmlkKSA/ICdiZy1wdXJwbGUtNTAgYm9yZGVyLXB1cnBsZS0yMDAnIDogJ2JvcmRlci10cmFuc3BhcmVudCd9YH0+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPSJjaGVja2JveCIgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9e2N1cnJlbnRBc3NpZ25tZW50LnRlYWNoZXJJZHM/LmluY2x1ZGVzKHQuaWQpIHx8IGZhbHNlfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KCkgPT4gdG9nZ2xlVGVhY2hlcih0LmlkKX0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPSJyb3VuZGVkIHRleHQtcHVycGxlLTYwMCBmb2N1czpyaW5nLXB1cnBsZS01MDAiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9InRleHQtc20gdHJ1bmNhdGUiPnt0Lmxhc3RuYW1lfSB7dC5maXJzdG5hbWV9PC9zcGFuPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSl9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9Im10LTIgdGV4dC1yaWdodCB0ZXh0LXhzIHRleHQtc2xhdGUtNTAwIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRBc3NpZ25tZW50LnRlYWNoZXJJZHM/Lmxlbmd0aCB8fCAwfSBwcm9mZXNzZXVyKHMpIHPDqWxlY3Rpb25uw6kocykuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6ICgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9InRleHQtY2VudGVyIHRleHQtc2xhdGUtNDAwIHB5LTEwIGl0YWxpYyI+U8OpbGVjdGlvbm5leiB1bmUgw6lwcmV1dmU8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgIDwvQ2FyZD4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICApOwogICAgICAgIH07CgogICAgICAgIC8vIC0tLSBNT0RVTEUgRVhURVJORSA6IEdFU1RJT04gREVTIFNVUlZFSUxMQU5UUyAtLS0KICAgICAgICBjb25zdCBTdXJ2ZWlsbGFuY2VQYW5lbCA9ICh7IHN1YmplY3RzLCByb29tcywgdGVhY2hlcnMsIHN0dWRlbnRzLCBhc3NpZ25tZW50cywgb25Bc3NpZ25tZW50Q2hhbmdlLCBzY2hvb2xDb25maWcsIG1vZGUsIHNldE1vZGUgfSkgPT4gewogICAgICAgICAgICBjb25zdCBbc2VsZWN0ZWRTdWJqZWN0SWQsIHNldFNlbGVjdGVkU3ViamVjdElkXSA9IHVzZVN0YXRlKHN1YmplY3RzWzBdPy5pZCB8fCBudWxsKTsKICAgICAgICAgICAgY29uc3QgY3VycmVudFN1YmplY3QgPSBzdWJqZWN0cy5maW5kKHMgPT4gcy5pZCA9PT0gcGFyc2VJbnQoc2VsZWN0ZWRTdWJqZWN0SWQpKTsKCiAgICAgICAgICAgIGNvbnN0IGV4cG9ydFN1cnZlaWxsYW5jZVBERiA9ICgpID0+IHsKICAgICAgICAgICAgICAgIGlmKCFjdXJyZW50U3ViamVjdCkgcmV0dXJuOwogICAgICAgICAgICAgICAgY29uc3QgeyBqc1BERiB9ID0gd2luZG93LmpzcGRmOwogICAgICAgICAgICAgICAgY29uc3QgZG9jID0gbmV3IGpzUERGKCk7CiAgICAgICAgICAgICAgICBnZW5lcmF0ZVN1YmplY3RQYWdlKGRvYywgY3VycmVudFN1YmplY3QpOwogICAgICAgICAgICAgICAgZG9jLnNhdmUoYHN1cnZlaWxsYW5jZV8ke2N1cnJlbnRTdWJqZWN0Lm5hbWV9LnBkZmApOwogICAgICAgICAgICB9OwoKICAgICAgICAgICAgY29uc3QgZXhwb3J0R2xvYmFsU3VydmVpbGxhbmNlUERGID0gKCkgPT4gewogICAgICAgICAgICAgICAgY29uc3QgeyBqc1BERiB9ID0gd2luZG93LmpzcGRmOwogICAgICAgICAgICAgICAgY29uc3QgZG9jID0gbmV3IGpzUERGKCk7CiAgICAgICAgICAgICAgICBzdWJqZWN0cy5mb3JFYWNoKChzdWIsIGluZGV4KSA9PiB7CiAgICAgICAgICAgICAgICAgICAgaWYgKGluZGV4ID4gMCkgZG9jLmFkZFBhZ2UoKTsKICAgICAgICAgICAgICAgICAgICBnZW5lcmF0ZVN1YmplY3RQYWdlKGRvYywgc3ViKTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgZG9jLnNhdmUoInBsYW5uaW5nX3N1cnZlaWxsYW5jZV9jb21wbGV0X2dsb2JhbC5wZGYiKTsKICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIGNvbnN0IGV4cG9ydEdsb2JhbFN1cnZlaWxsYW5jZVdvcmQgPSAoKSA9PiB7CiAgICAgICAgICAgICAgICBjb25zdCBoZWFkZXIgPSAiPGh0bWwgeG1sbnM6bz0ndXJuOnNjaGVtYXMtbWljcm9zb2Z0LWNvbTpvZmZpY2U6b2ZmaWNlJyB4bWxuczp3PSd1cm46c2NoZW1hcy1taWNyb3NvZnQtY29tOm9mZmljZTp3b3JkJyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvVFIvUkVDLWh0bWw0MCc+PGhlYWQ+PG1ldGEgY2hhcnNldD0ndXRmLTgnPjx0aXRsZT5QbGFubmluZyBTdXJ2ZWlsbGFuY2U8L3RpdGxlPjxzdHlsZT5ib2R5IHsgZm9udC1mYW1pbHk6IEFyaWFsOyB9IHRhYmxlIHsgYm9yZGVyLWNvbGxhcHNlOiBjb2xsYXBzZTsgd2lkdGg6IDEwMCU7IH0gdGQsIHRoIHsgYm9yZGVyOiAxcHggc29saWQgIzAwMDsgcGFkZGluZzogNXB4OyB9IC5wYWdlLWJyZWFrIHsgcGFnZS1icmVhay1iZWZvcmU6IGFsd2F5czsgfTwvc3R5bGU+PC9oZWFkPjxib2R5PiI7CiAgICAgICAgICAgICAgICBjb25zdCBmb290ZXIgPSAiPC9ib2R5PjwvaHRtbD4iOwogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBsZXQgY29udGVudCA9ICIiOwogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBzdWJqZWN0cy5mb3JFYWNoKChzdWIsIGluZGV4KSA9PiB7CiAgICAgICAgICAgICAgICAgICAgaWYgKGluZGV4ID4gMCkgY29udGVudCArPSAiPGRpdiBjbGFzcz0ncGFnZS1icmVhayc+PC9kaXY+IjsKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICBjb250ZW50ICs9IGA8aDEgc3R5bGU9J3RleHQtYWxpZ246Y2VudGVyJz5QTEFOTklORyBERSBTVVJWRUlMTEFOQ0U8L2gxPmA7CiAgICAgICAgICAgICAgICAgICAgY29udGVudCArPSBgPGgyIHN0eWxlPSd0ZXh0LWFsaWduOmNlbnRlcic+RXByZXV2ZSA6ICR7c3ViLm5hbWV9PC9oMj5gOwogICAgICAgICAgICAgICAgICAgIGNvbnRlbnQgKz0gYDxoMyBzdHlsZT0ndGV4dC1hbGlnbjpjZW50ZXInPiR7c3ViLmRhdGV9IC0gJHtzdWIudGltZX08L2gzPmA7CiAgICAgICAgICAgICAgICAgICAgY29udGVudCArPSBgPHAgc3R5bGU9J3RleHQtYWxpZ246Y2VudGVyJz5Nb2RlIDogJHttb2RlID09PSAnd2l0aF9yb3RhdGlvbicgPyAnUm90YXRpb25zIGhvcmFpcmVzJyA6ICdTYW5zIHJvdGF0aW9uJ308L3A+YDsKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICBjb250ZW50ICs9ICI8dGFibGU+PHRoZWFkPjx0ciBzdHlsZT0nYmFja2dyb3VuZC1jb2xvcjojZWVlJz48dGg+U2FsbGU8L3RoPjx0aD5TdXJ2ZWlsbGFudHM8L3RoPjwvdHI+PC90aGVhZD48dGJvZHk+IjsKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICByb29tcy5mb3JFYWNoKHJvb20gPT4gewogICAgICAgICAgICAgICAgICAgICAgICAvLyBERVRFQ1RFUiBTSSBFTEVWRSBUVCBFU1QgREFOUyBMQSBTQUxMRQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBoYXNUVCA9IHN0dWRlbnRzLnNvbWUocyA9PiBzLnJvb21JZCA9PT0gcm9vbS5pZCAmJiBzLmlzVFQpOwogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhY3RpdmVUaW1lID0gaGFzVFQgJiYgc3ViLnRpbWVUVCA/IHN1Yi50aW1lVFQgOiBzdWIudGltZTsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGltZVNsb3RzID0gbW9kZSA9PT0gJ3dpdGhfcm90YXRpb24nID8gY2FsY3VsYXRlVGltZVNsb3RzKGFjdGl2ZVRpbWUpIDogW3sgbGFiZWw6IGFjdGl2ZVRpbWUgfV07CgogICAgICAgICAgICAgICAgICAgICAgICBsZXQgY2VsbENvbnRlbnQgPSAiIjsKICAgICAgICAgICAgICAgICAgICAgICAgdGltZVNsb3RzLmZvckVhY2goKHNsb3QsIHNsb3RJbmRleCkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYXNzaWduS2V5ID0gYCR7c3ViLmlkfS0ke3Jvb20uaWR9LSR7c2xvdEluZGV4fWA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhc3NpZ25lZFRlYWNoZXJJZHMgPSBhc3NpZ25tZW50c1thc3NpZ25LZXldIHx8IFtdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYXNzaWduZWROYW1lcyA9IGFzc2lnbmVkVGVhY2hlcklkcy5tYXAoaWQgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHQgPSB0ZWFjaGVycy5maW5kKHRlYSA9PiB0ZWEuaWQgPT09IGlkKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdCA/IGAke3QuY2l2fSAke3QubGFzdG5hbWV9ICR7dC5maXJzdG5hbWUuY2hhckF0KDApfS5gIDogIiI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KS5maWx0ZXIobiA9PiBuKS5qb2luKCIgJiAiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNlbGxDb250ZW50ICE9PSAiIikgY2VsbENvbnRlbnQgKz0gIjxici8+IjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNlbGxDb250ZW50ICs9IGA8c3Ryb25nPiR7c2xvdC5sYWJlbH08L3N0cm9uZz4gOiAke2Fzc2lnbmVkTmFtZXMgfHwgIk5PTiBBU1NJR07DiSJ9YDsKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByb29tTGFiZWwgPSBoYXNUVCA/IGAke3Jvb20ubmFtZX0gKFRUKWAgOiByb29tLm5hbWU7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQgKz0gYDx0cj48dGQ+PHN0cm9uZz4ke3Jvb21MYWJlbH08L3N0cm9uZz48L3RkPjx0ZD4ke2NlbGxDb250ZW50fTwvdGQ+PC90cj5gOwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIGNvbnRlbnQgKz0gIjwvdGJvZHk+PC90YWJsZT4iOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIGNvbnN0IHNvdXJjZUhUTUwgPSBoZWFkZXIgKyBjb250ZW50ICsgZm9vdGVyOwogICAgICAgICAgICAgICAgY29uc3QgYmxvYiA9IG5ldyBCbG9iKFsnXHVmZWZmJywgc291cmNlSFRNTF0sIHsgdHlwZTogJ2FwcGxpY2F0aW9uL21zd29yZCcgfSk7CiAgICAgICAgICAgICAgICBjb25zdCB1cmwgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpOwogICAgICAgICAgICAgICAgY29uc3QgZmlsZURvd25sb2FkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiYSIpOwogICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChmaWxlRG93bmxvYWQpOwogICAgICAgICAgICAgICAgZmlsZURvd25sb2FkLmhyZWYgPSB1cmw7CiAgICAgICAgICAgICAgICBmaWxlRG93bmxvYWQuZG93bmxvYWQgPSAncGxhbm5pbmdfc3VydmVpbGxhbmNlX2dsb2JhbC5kb2MnOwogICAgICAgICAgICAgICAgZmlsZURvd25sb2FkLmNsaWNrKCk7CiAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGZpbGVEb3dubG9hZCk7CiAgICAgICAgICAgIH07CgogICAgICAgICAgICBjb25zdCBnZW5lcmF0ZVN1YmplY3RQYWdlID0gKGRvYywgc3ViamVjdCkgPT4gewogICAgICAgICAgICAgICAgaWYgKHNjaG9vbENvbmZpZyAmJiBzY2hvb2xDb25maWcubG9nb1VybCkgewogICAgICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJhdGlvID0gc2Nob29sQ29uZmlnLmxvZ29SYXRpbyB8fCAxOwogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtYXhEaW0gPSAyNTsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbWFyZ2luID0gMTA7CiAgICAgICAgICAgICAgICAgICAgICAgIGxldCB3ID0gbWF4RGltOwogICAgICAgICAgICAgICAgICAgICAgICBsZXQgaCA9IHcgLyByYXRpbzsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGggPiBtYXhEaW0pIHsgaCA9IG1heERpbTsgdyA9IGggKiByYXRpbzsgfQogICAgICAgICAgICAgICAgICAgICAgICBkb2MuYWRkSW1hZ2Uoc2Nob29sQ29uZmlnLmxvZ29VcmwsICdKUEVHJywgbWFyZ2luLCAxMCwgdywgaCk7CiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge30KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGRvYy5zZXRGb250U2l6ZSgxNik7IGRvYy5zZXRGb250KCJoZWx2ZXRpY2EiLCAiYm9sZCIpOyBkb2Muc2V0VGV4dENvbG9yKDAsIDAsIDApOwogICAgICAgICAgICAgICAgZG9jLnRleHQoYFBMQU5OSU5HIERFIFNVUlZFSUxMQU5DRWAsIDEwNSwgMTUsIHthbGlnbjogJ2NlbnRlcid9KTsKICAgICAgICAgICAgICAgIGRvYy5zZXRGb250U2l6ZSgxMik7IGRvYy5zZXRGb250KCJoZWx2ZXRpY2EiLCAibm9ybWFsIik7CiAgICAgICAgICAgICAgICBkb2MudGV4dChgRXByZXV2ZSA6ICR7c3ViamVjdC5uYW1lfWAsIDEwNSwgMjUsIHthbGlnbjogJ2NlbnRlcid9KTsKICAgICAgICAgICAgICAgIGRvYy50ZXh0KGBEYXRlIDogJHtzdWJqZWN0LmRhdGV9IC0gSG9yYWlyZSA6ICR7c3ViamVjdC50aW1lfWAsIDEwNSwgMzIsIHthbGlnbjogJ2NlbnRlcid9KTsKICAgICAgICAgICAgICAgIGRvYy50ZXh0KGBNb2RlIDogJHttb2RlID09PSAnd2l0aF9yb3RhdGlvbicgPyAnUm90YXRpb25zIGhvcmFpcmVzJyA6ICdTYW5zIHJvdGF0aW9uJ31gLCAxMDUsIDM5LCB7YWxpZ246ICdjZW50ZXInfSk7CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIGNvbnN0IHRhYmxlRGF0YSA9IHJvb21zLm1hcChyb29tID0+IHsKICAgICAgICAgICAgICAgICAgICAvLyBERVRFQ1RFUiBTSSBFTEVWRSBUVCBFU1QgREFOUyBMQSBTQUxMRQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGhhc1RUID0gc3R1ZGVudHMuc29tZShzID0+IHMucm9vbUlkID09PSByb29tLmlkICYmIHMuaXNUVCk7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgYWN0aXZlVGltZSA9IGhhc1RUICYmIHN1YmplY3QudGltZVRUID8gc3ViamVjdC50aW1lVFQgOiBzdWJqZWN0LnRpbWU7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgdGltZVNsb3RzID0gbW9kZSA9PT0gJ3dpdGhfcm90YXRpb24nID8gY2FsY3VsYXRlVGltZVNsb3RzKGFjdGl2ZVRpbWUpIDogW3sgbGFiZWw6IGFjdGl2ZVRpbWUgfV07CgogICAgICAgICAgICAgICAgICAgIGNvbnN0IGRldGFpbHMgPSB0aW1lU2xvdHMubWFwKChzbG90LCBpbmRleCkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhc3NpZ25LZXkgPSBgJHtzdWJqZWN0LmlkfS0ke3Jvb20uaWR9LSR7aW5kZXh9YDsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYXNzaWduZWRUZWFjaGVySWRzID0gYXNzaWdubWVudHNbYXNzaWduS2V5XSB8fCBbXTsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYXNzaWduZWROYW1lcyA9IGFzc2lnbmVkVGVhY2hlcklkcy5tYXAoaWQgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdCA9IHRlYWNoZXJzLmZpbmQodGVhID0+IHRlYS5pZCA9PT0gaWQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQgPyBgJHt0LmNpdn0gJHt0Lmxhc3RuYW1lfSAke3QuZmlyc3RuYW1lLmNoYXJBdCgwKX0uYCA6ICIiOwogICAgICAgICAgICAgICAgICAgICAgICB9KS5maWx0ZXIobiA9PiBuKS5qb2luKCIgJiAiKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGAke3Nsb3QubGFiZWx9IDogJHthc3NpZ25lZE5hbWVzIHx8ICJOT04gQVNTSUdOw4kifWA7CiAgICAgICAgICAgICAgICAgICAgfSkuam9pbigiXG4iKTsKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICBjb25zdCByb29tTGFiZWwgPSBoYXNUVCA/IGAke3Jvb20ubmFtZX1cbihUaWVycy1UZW1wcylgIDogcm9vbS5uYW1lOwogICAgICAgICAgICAgICAgICAgIHJldHVybiBbcm9vbUxhYmVsLCBkZXRhaWxzXTsKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgIGRvYy5hdXRvVGFibGUoewogICAgICAgICAgICAgICAgICAgIHN0YXJ0WTogNDUsCiAgICAgICAgICAgICAgICAgICAgaGVhZDogW1snU2FsbGUnLCAnU3VydmVpbGxhbnRzIEFmZmVjdMOpcyddXSwKICAgICAgICAgICAgICAgICAgICBib2R5OiB0YWJsZURhdGEsCiAgICAgICAgICAgICAgICAgICAgdGhlbWU6ICdncmlkJywKICAgICAgICAgICAgICAgICAgICBoZWFkU3R5bGVzOiB7IGZpbGxDb2xvcjogWzIyMCwgMjIwLCAyMjBdLCB0ZXh0Q29sb3I6IFswLCAwLCAwXSwgZm9udFN0eWxlOiAnYm9sZCcsIGxpbmVXaWR0aDogMC4xLCBsaW5lQ29sb3I6IFswLCAwLCAwXSB9LAogICAgICAgICAgICAgICAgICAgIHN0eWxlczogeyBtaW5DZWxsSGVpZ2h0OiAxNSwgdmFsaWduOiAnbWlkZGxlJywgZm9udFNpemU6IDEwLCBjZWxsUGFkZGluZzogNCwgdGV4dENvbG9yOiBbMCwgMCwgMF0sIGxpbmVDb2xvcjogWzAsIDAsIDBdLCBsaW5lV2lkdGg6IDAuMSB9LAogICAgICAgICAgICAgICAgICAgIGNvbHVtblN0eWxlczogeyAwOiB7IGNlbGxXaWR0aDogNDAsIGZvbnRTdHlsZTogJ2JvbGQnIH0sIDE6IHsgY2VsbFdpZHRoOiAnYXV0bycgfSB9CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ic3BhY2UteS02IGFuaW1hdGUtZmFkZS1pbiI+CiAgICAgICAgICAgICAgICAgICAgPENhcmQgdGl0bGU9Ikdlc3Rpb24gZGVzIFN1cnZlaWxsYW50cyIgY2xhc3NOYW1lPSJib3JkZXItbC00IGJvcmRlci1sLWluZGlnby01MDAiPgogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iZmxleCBmbGV4LWNvbCBtZDpmbGV4LXJvdyBnYXAtNiBtYi02Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJ3LWZ1bGwgbWQ6dy0xLzMgc3BhY2UteS00Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iYmctaW5kaWdvLTUwLzUwIHAtNCByb3VuZGVkLWxnIGJvcmRlciBib3JkZXItaW5kaWdvLTEwMCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzc05hbWU9ImJsb2NrIHRleHQtc20gZm9udC1ib2xkIHRleHQtaW5kaWdvLTkwMCBtYi0yIj5Nb2RlIGQnb3JnYW5pc2F0aW9uIDo8L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ic3BhY2UteS0yIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzc05hbWU9ImZsZXggaXRlbXMtY2VudGVyIGN1cnNvci1wb2ludGVyIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9InJhZGlvIiAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT0ic3VydmVpbGxhbmNlTW9kZSIgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9e21vZGUgPT09ICd3aXRoX3JvdGF0aW9uJ30gCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoKSA9PiBzZXRNb2RlKCd3aXRoX3JvdGF0aW9uJyl9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0iZm9ybS1yYWRpbyB0ZXh0LWluZGlnby02MDAgZm9jdXM6cmluZy1pbmRpZ28tNTAwIGgtNCB3LTQiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9Im1sLTIgdGV4dC1zbSB0ZXh0LXNsYXRlLTcwMCI+QXZlYyByb3RhdGlvbnMgKFRyYW5jaGVzIGQnMWgpPC9zcGFuPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzc05hbWU9ImZsZXggaXRlbXMtY2VudGVyIGN1cnNvci1wb2ludGVyIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9InJhZGlvIiAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT0ic3VydmVpbGxhbmNlTW9kZSIgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9e21vZGUgPT09ICdub19yb3RhdGlvbid9IAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KCkgPT4gc2V0TW9kZSgnbm9fcm90YXRpb24nKX0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPSJmb3JtLXJhZGlvIHRleHQtaW5kaWdvLTYwMCBmb2N1czpyaW5nLWluZGlnby01MDAgaC00IHctNCIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT0ibWwtMiB0ZXh0LXNtIHRleHQtc2xhdGUtNzAwIj5TYW5zIHJvdGF0aW9uIChEdXLDqWUgY29tcGzDqHRlKTwvc3Bhbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3NOYW1lPSJibG9jayB0ZXh0LXNtIGZvbnQtbWVkaXVtIHRleHQtc2xhdGUtNzAwIj5DaG9pc2lyIGxlIGNyw6luZWF1IGQnw6lwcmV1dmUgOjwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9InNwYWNlLXktMiI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtzdWJqZWN0cy5tYXAoc3ViID0+ICgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24ga2V5PXtzdWIuaWR9IG9uQ2xpY2s9eygpID0+IHNldFNlbGVjdGVkU3ViamVjdElkKHN1Yi5pZCl9IGNsYXNzTmFtZT17YHctZnVsbCB0ZXh0LWxlZnQgcC0zIHJvdW5kZWQtbGcgYm9yZGVyIHRyYW5zaXRpb24tYWxsICR7c2VsZWN0ZWRTdWJqZWN0SWQgPT09IHN1Yi5pZCA/ICdiZy1pbmRpZ28tNTAgYm9yZGVyLWluZGlnby01MDAgcmluZy0xIHJpbmctaW5kaWdvLTIwMCcgOiAnYmctd2hpdGUgYm9yZGVyLXNsYXRlLTIwMCBob3ZlcjpiZy1zbGF0ZS01MCd9YH0+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9ImZvbnQtYm9sZCB0ZXh0LXNsYXRlLTgwMCI+e3N1Yi5uYW1lfTwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJ0ZXh0LXhzIHRleHQtc2xhdGUtNTAwIj57c3ViLmRhdGV9IOKAoiB7c3ViLnRpbWV9PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSl9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9InB0LTQgYm9yZGVyLXQgYm9yZGVyLXNsYXRlLTEwMCBmbGV4IGZsZXgtY29sIGdhcC0yIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvbiBvbkNsaWNrPXtleHBvcnRTdXJ2ZWlsbGFuY2VQREZ9IGljb249e1ByaW50ZXJ9IHZhcmlhbnQ9InNlY29uZGFyeSIgY2xhc3NOYW1lPSJ3LWZ1bGwgdGV4dC14cyI+SW1wcmltZXIgUGxhbm5pbmcgKFPDqWxlY3Rpb24pPC9CdXR0b24+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxCdXR0b24gb25DbGljaz17ZXhwb3J0R2xvYmFsU3VydmVpbGxhbmNlUERGfSBpY29uPXtGaWxlVGV4dH0gdmFyaWFudD0icHJpbWFyeSIgY2xhc3NOYW1lPSJ3LWZ1bGwgdGV4dC14cyI+SW1wcmltZXIgUGxhbm5pbmcgR2xvYmFsIChUb3V0KTwvQnV0dG9uPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uIG9uQ2xpY2s9e2V4cG9ydEdsb2JhbFN1cnZlaWxsYW5jZVdvcmR9IGljb249e0Rvd25sb2FkfSB2YXJpYW50PSJwcmltYXJ5IiBjbGFzc05hbWU9InctZnVsbCB0ZXh0LXhzIGJnLWJsdWUtNzAwIGhvdmVyOmJnLWJsdWUtODAwIj5FeHBvcnRlciBHbG9iYWwgKC5kb2MpPC9CdXR0b24+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJ3LWZ1bGwgbWQ6dy0yLzMgYmctc2xhdGUtNTAgcm91bmRlZC14bCBib3JkZXIgYm9yZGVyLXNsYXRlLTIwMCBwLTQgb3ZlcmZsb3cteS1hdXRvIG1heC1oLVs2MDBweF0iPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50U3ViamVjdCA/ICgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9InNwYWNlLXktMyI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDQgY2xhc3NOYW1lPSJmb250LWJvbGQgdGV4dC1zbGF0ZS03MDAgbWItMiI+QWZmZWN0YXRpb25zIHBvdXIge2N1cnJlbnRTdWJqZWN0Lm5hbWV9PC9oND4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT0idGV4dC14cyB0ZXh0LXNsYXRlLTUwMCBtYi00IGJnLWJsdWUtNTAgcC0yIHJvdW5kZWQgYm9yZGVyIGJvcmRlci1ibHVlLTEwMCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg4oS577iPIHttb2RlID09PSAnd2l0aF9yb3RhdGlvbicgPyAiTGVzIGV4YW1lbnMgc29udCBkw6ljb3Vww6lzIGVuIHRyYW5jaGVzIGhvcmFpcmVzICgxaCBtYXgpLiIgOiAiVW4gc2V1bCBjcsOpbmVhdSBkZSBzdXJ2ZWlsbGFuY2UgcG91ciB0b3V0ZSBsYSBkdXLDqWUgZGUgbCfDqXByZXV2ZS4ifQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxici8+4pqg77iPIExlcyBob3JhaXJlcyBzJ2FkYXB0ZW50IGF1dG9tYXRpcXVlbWVudCBhdSBUaWVycy1UZW1wcyAoVFQpIHNpIHVuIMOpbMOodmUgY29uY2VybsOpIGVzdCBkYW5zIGxhIHNhbGxlLgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9wPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3Jvb21zLm1hcChyb29tID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBERVRFQ1RFUiBTSSBFTEVWRSBUVCBFU1QgREFOUyBMQSBTQUxMRSBQT1VSIEFEQVBURVIgTEVTIEhPUkFJUkVTCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaGFzVFQgPSBzdHVkZW50cy5zb21lKHMgPT4gcy5yb29tSWQgPT09IHJvb20uaWQgJiYgcy5pc1RUKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhY3RpdmVUaW1lID0gaGFzVFQgJiYgY3VycmVudFN1YmplY3QudGltZVRUID8gY3VycmVudFN1YmplY3QudGltZVRUIDogY3VycmVudFN1YmplY3QudGltZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0aW1lU2xvdHMgPSBtb2RlID09PSAnd2l0aF9yb3RhdGlvbicgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gY2FsY3VsYXRlVGltZVNsb3RzKGFjdGl2ZVRpbWUpIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IFt7IGxhYmVsOiBhY3RpdmVUaW1lIH1dOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYga2V5PXtyb29tLmlkfSBjbGFzc05hbWU9ImJnLXdoaXRlIHJvdW5kZWQtbGcgYm9yZGVyIGJvcmRlci1zbGF0ZS0yMDAgc2hhZG93LXNtIG92ZXJmbG93LWhpZGRlbiBtYi00Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJiZy1zbGF0ZS01MCBweC00IHB5LTIgYm9yZGVyLWIgYm9yZGVyLXNsYXRlLTIwMCBmbGV4IGp1c3RpZnktYmV0d2VlbiBpdGVtcy1jZW50ZXIiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT0iZm9udC1ib2xkIHRleHQtaW5kaWdvLTcwMCB0ZXh0LXNtIGZsZXggaXRlbXMtY2VudGVyIGdhcC0yIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3Jvb20ubmFtZX0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2hhc1RUICYmIDxzcGFuIGNsYXNzTmFtZT0idGV4dC1bMTBweF0gYmctcm9zZS0xMDAgdGV4dC1yb3NlLTcwMCBweC0xLjUgcHktMC41IHJvdW5kZWQgYm9yZGVyIGJvcmRlci1yb3NlLTIwMCIgdGl0bGU9IkhvcmFpcmUgYW3DqW5hZ8OpIChUaWVycy1UZW1wcykiPkhvcmFpcmUgVFQ8L3NwYW4+fQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9InRleHQtWzEwcHhdIHRleHQtc2xhdGUtNDAwIGZvbnQtbm9ybWFsIj57cm9vbS5jYXBhY2l0eX0gcGxhY2VzPC9zcGFuPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0icC0zIHNwYWNlLXktMyI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3RpbWVTbG90cy5tYXAoKHNsb3QsIGluZGV4KSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGFzc2lnbktleSA9IGAke2N1cnJlbnRTdWJqZWN0LmlkfS0ke3Jvb20uaWR9LSR7aW5kZXh9YDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY3VycmVudEFzc2lnbnMgPSBhc3NpZ25tZW50c1thc3NpZ25LZXldIHx8IFsiIiwgIiJdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBrZXk9e2luZGV4fSBjbGFzc05hbWU9ImZsZXggZmxleC1jb2wgc206ZmxleC1yb3cgaXRlbXMtY2VudGVyIGdhcC0zIGJvcmRlci1iIGJvcmRlci1zbGF0ZS0xMDAgcGItMiBsYXN0OmJvcmRlci0wIGxhc3Q6cGItMCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9e2B3LWZ1bGwgc206dy0xLzQgdGV4dC14cyBmb250LXNlbWlib2xkIHB4LTIgcHktMSByb3VuZGVkIHRleHQtY2VudGVyICR7aGFzVFQgPyAnYmctcm9zZS01MCB0ZXh0LXJvc2UtNjAwIGJvcmRlciBib3JkZXItcm9zZS0xMDAnIDogJ2JnLXNsYXRlLTEwMCB0ZXh0LXNsYXRlLTYwMCd9YH0+e3Nsb3QubGFiZWx9PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9ImZsZXgtMSB3LWZ1bGwgZ3JpZCBncmlkLWNvbHMtMiBnYXAtMiI+e1swLCAxXS5tYXAoaWR4ID0+ICg8c2VsZWN0IGtleT17aWR4fSBjbGFzc05hbWU9InRleHQteHMgcC0yIGJvcmRlciBib3JkZXItc2xhdGUtMzAwIHJvdW5kZWQgZm9jdXM6cmluZy0yIGZvY3VzOnJpbmctaW5kaWdvLTIwMCBvdXRsaW5lLW5vbmUiIHZhbHVlPXtjdXJyZW50QXNzaWduc1tpZHhdIHx8ICIifSBvbkNoYW5nZT17KGUpID0+IHsgY29uc3QgbmV3QXNzaWducyA9IFsuLi5jdXJyZW50QXNzaWduc107IG5ld0Fzc2lnbnNbaWR4XSA9IGUudGFyZ2V0LnZhbHVlOyBvbkFzc2lnbm1lbnRDaGFuZ2UoYXNzaWduS2V5LCBuZXdBc3NpZ25zKTsgfX0+PG9wdGlvbiB2YWx1ZT0iIj4tLSBTdXJ2LiB7aWR4ICsgMX0gLS08L29wdGlvbj57dGVhY2hlcnMubWFwKHQgPT4gKDxvcHRpb24ga2V5PXt0LmlkfSB2YWx1ZT17dC5pZH0+e3QubGFzdG5hbWV9IHt0LmZpcnN0bmFtZX08L29wdGlvbj4pKX08L3NlbGVjdD4pKX08L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KX0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6ICgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9InRleHQtY2VudGVyIHRleHQtc2xhdGUtNDAwIHB5LTEwIGl0YWxpYyI+U8OpbGVjdGlvbm5leiB1bmUgw6lwcmV1dmUgw6AgZ2F1Y2hlPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8L0NhcmQ+CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgKTsKICAgICAgICB9OwoKICAgICAgICAvLyAtLS0gTU9EVUxFIEFJREVTIC0tLQogICAgICAgIGNvbnN0IEhlbHBQYW5lbCA9ICgpID0+ICgKICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9InNwYWNlLXktNiBhbmltYXRlLWZhZGUtaW4iPgogICAgICAgICAgICAgICAgPENhcmQgdGl0bGU9Ik1vZGUgZCdFbXBsb2kgLSBQRVJESVJGT1JNQU5DRSBETkIgQkxBTkMgVjExIj4KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0idGV4dC1zbGF0ZS02MDAgc3BhY2UteS02Ij4KICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPSJ0ZXh0LWxnIGZvbnQtbGlnaHQgdGV4dC1zbGF0ZS04MDAiPkJpZW52ZW51ZSBkYW5zIGwnb3V0aWwgZCdvcmdhbmlzYXRpb24gZCdleGFtZW4gYmxhbmMuIFN1aXZleiBjZXMgw6l0YXBlcyBwb3VyIHVuZSBnZXN0aW9uIGZsdWlkZSBkZSB2b3RyZSBzZXNzaW9uLjwvcD4KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9ImdyaWQgZ3JpZC1jb2xzLTEgbWQ6Z3JpZC1jb2xzLTIgZ2FwLTYiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9ImJnLXNreS01MCBwLTUgcm91bmRlZC14bCBib3JkZXIgYm9yZGVyLXNreS0xMDAgc2hhZG93LXNtIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDQgY2xhc3NOYW1lPSJmb250LWJvbGQgdGV4dC1za3ktODAwIGZsZXggaXRlbXMtY2VudGVyIG1iLTMgdGV4dC1sZyI+PHNwYW4gY2xhc3NOYW1lPSJiZy1za3ktMjAwIHRleHQtc2t5LTgwMCB3LTYgaC02IHJvdW5kZWQtZnVsbCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciB0ZXh0LXhzIG1yLTIiPjE8L3NwYW4+IEFjY3VlaWwgJiBDb25maWd1cmF0aW9uPC9oND4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dWwgY2xhc3NOYW1lPSJsaXN0LWRpc2MgcGwtNSB0ZXh0LXNtIHNwYWNlLXktMiB0ZXh0LXNsYXRlLTcwMCI+PGxpPkluZm9zIEV0YWIsIExvZ28sIERpc2NpcGxpbmVzIFNjaWVuY2VzLCBIb3JhaXJlcy48L2xpPjwvdWw+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9ImJnLWVtZXJhbGQtNTAgcC01IHJvdW5kZWQteGwgYm9yZGVyIGJvcmRlci1lbWVyYWxkLTEwMCBzaGFkb3ctc20iPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoNCBjbGFzc05hbWU9ImZvbnQtYm9sZCB0ZXh0LWVtZXJhbGQtODAwIGZsZXggaXRlbXMtY2VudGVyIG1iLTMgdGV4dC1sZyI+PHNwYW4gY2xhc3NOYW1lPSJiZy1lbWVyYWxkLTIwMCB0ZXh0LWVtZXJhbGQtODAwIHctNiBoLTYgcm91bmRlZC1mdWxsIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIHRleHQteHMgbXItMiI+Mjwvc3Bhbj4gSW1wb3J0IGRlcyBEb25uw6llcyAoRXhjZWwvQ1NWKTwvaDQ+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9InRleHQtc20gdGV4dC1zbGF0ZS03MDAgc3BhY2UteS0zIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPSJmb250LW1lZGl1bSB1bmRlcmxpbmUiPkNvbG9ubmVzIGF0dGVuZHVlcyAoMcOocmUgbGlnbmUgPSBlbi10w6p0ZSkgOjwvcD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHVsIGNsYXNzTmFtZT0ibGlzdC1kaXNjIHBsLTUgc3BhY2UteS0xIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsaT48c3Ryb25nPsOJbMOodmVzIDo8L3N0cm9uZz4gTm9tLCBQcsOpbm9tLCBDbGFzc2UsIFRpZXJzLVRlbXBzIChvdSBUVCksIEFFU0gsIElORS48L2xpPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxpPjxzdHJvbmc+U2FsbGVzIDo8L3N0cm9uZz4gTm9tIGRlIGxhIHNhbGxlICgxw6hyZSBjb2wpLCBDYXBhY2l0w6kgKDLDqG1lIGNvbCkuPC9saT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsaT48c3Ryb25nPlByb2Zlc3NldXJzIDo8L3N0cm9uZz4gTm9tLCBQcsOpbm9tLCBDaXZpbGl0w6ksIERpc2NpcGxpbmUuPC9saT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC91bD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJiZy1vcmFuZ2UtNTAgcC01IHJvdW5kZWQteGwgYm9yZGVyIGJvcmRlci1vcmFuZ2UtMTAwIHNoYWRvdy1zbSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGg0IGNsYXNzTmFtZT0iZm9udC1ib2xkIHRleHQtb3JhbmdlLTgwMCBmbGV4IGl0ZW1zLWNlbnRlciBtYi0zIHRleHQtbGciPjxzcGFuIGNsYXNzTmFtZT0iYmctb3JhbmdlLTIwMCB0ZXh0LW9yYW5nZS04MDAgdy02IGgtNiByb3VuZGVkLWZ1bGwgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgdGV4dC14cyBtci0yIj4zPC9zcGFuPiBSw6lwYXJ0aXRpb248L2g0PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx1bCBjbGFzc05hbWU9Imxpc3QtZGlzYyBwbC01IHRleHQtc20gc3BhY2UteS0yIHRleHQtc2xhdGUtNzAwIj48bGk+QW5vbnltYXQsIFLDqXBhcnRpdGlvbiBBdXRvL01hbnVlbGxlLjwvbGk+PC91bD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9ImJnLWluZGlnby01MCBwLTUgcm91bmRlZC14bCBib3JkZXIgYm9yZGVyLWluZGlnby0xMDAgc2hhZG93LXNtIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDQgY2xhc3NOYW1lPSJmb250LWJvbGQgdGV4dC1pbmRpZ28tODAwIGZsZXggaXRlbXMtY2VudGVyIG1iLTMgdGV4dC1sZyI+PHNwYW4gY2xhc3NOYW1lPSJiZy1pbmRpZ28tMjAwIHRleHQtaW5kaWdvLTgwMCB3LTYgaC02IHJvdW5kZWQtZnVsbCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciB0ZXh0LXhzIG1yLTIiPjQ8L3NwYW4+IFN1cnZlaWxsYW50cyAmIFNlY3LDqXRhcmlhdDwvaDQ+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHVsIGNsYXNzTmFtZT0ibGlzdC1kaXNjIHBsLTUgdGV4dC1zbSBzcGFjZS15LTIgdGV4dC1zbGF0ZS03MDAiPjxsaT5QbGFubmluZyBzdXJ2ZWlsbGFuY2UgZXQgZ2VzdGlvbiBkZSBmaW4gZCfDqXByZXV2ZS48L2xpPjwvdWw+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJiZy1wdXJwbGUtNTAgcC01IHJvdW5kZWQteGwgYm9yZGVyIGJvcmRlci1wdXJwbGUtMTAwIHNoYWRvdy1zbSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGg0IGNsYXNzTmFtZT0iZm9udC1ib2xkIHRleHQtcHVycGxlLTgwMCBmbGV4IGl0ZW1zLWNlbnRlciBtYi0zIHRleHQtbGciPjxzcGFuIGNsYXNzTmFtZT0iYmctcHVycGxlLTIwMCB0ZXh0LXB1cnBsZS04MDAgdy02IGgtNiByb3VuZGVkLWZ1bGwgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgdGV4dC14cyBtci0yIj41PC9zcGFuPiBDb3JyZWN0aW9uPC9oND4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dWwgY2xhc3NOYW1lPSJsaXN0LWRpc2MgcGwtNSB0ZXh0LXNtIHNwYWNlLXktMiB0ZXh0LXNsYXRlLTcwMCI+PGxpPlLDqXBhcnRpdGlvbiBkZXMgbG90cyBldCBsaXN0ZXMgZGUgY29udHLDtGxlLjwvbGk+PC91bD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJiZy1zbGF0ZS0xMDAgcC01IHJvdW5kZWQteGwgYm9yZGVyIGJvcmRlci1zbGF0ZS0yMDAgc2hhZG93LXNtIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDQgY2xhc3NOYW1lPSJmb250LWJvbGQgdGV4dC1zbGF0ZS04MDAgZmxleCBpdGVtcy1jZW50ZXIgbWItMyB0ZXh0LWxnIj48c3BhbiBjbGFzc05hbWU9ImJnLXNsYXRlLTMwMCB0ZXh0LXNsYXRlLTgwMCB3LTYgaC02IHJvdW5kZWQtZnVsbCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciB0ZXh0LXhzIG1yLTIiPjY8L3NwYW4+IERvY3VtZW50cyAmIEV4cG9ydHM8L2g0PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx1bCBjbGFzc05hbWU9Imxpc3QtZGlzYyBwbC01IHRleHQtc20gc3BhY2UteS0yIHRleHQtc2xhdGUtNzAwIj48bGk+VG91cyBsZXMgUERGLCBwZXJzb25uYWxpc2FibGVzIHZpYSBsJ8OpZGl0ZXVyLjwvbGk+PC91bD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIDwvQ2FyZD4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgKTsKCiAgICAgICAgLy8gLS0tIEFwcGxpY2F0aW9uIFByaW5jaXBhbGUgLS0tCiAgICAgICAgY29uc3QgQXBwID0gKCkgPT4gewogICAgICAgICAgICBjb25zdCBbYWN0aXZlVGFiLCBzZXRBY3RpdmVUYWJdID0gdXNlU3RhdGUoJ2NvbmZpZycpOwogICAgICAgICAgICBjb25zdCBbaXNBbm9ueW1pdHlMb2NrZWQsIHNldElzQW5vbnltaXR5TG9ja2VkXSA9IHVzZVN0YXRlKHRydWUpOyAKICAgICAgICAgICAgY29uc3QgW2lzU3R1ZGVudExpc3RFZGl0YWJsZSwgc2V0SXNTdHVkZW50TGlzdEVkaXRhYmxlXSA9IHVzZVN0YXRlKGZhbHNlKTsKICAgICAgICAgICAgY29uc3QgW3JlcGFydGl0aW9uVmlldywgc2V0UmVwYXJ0aXRpb25WaWV3XSA9IHVzZVN0YXRlKCdib2FyZCcpOyAKICAgICAgICAgICAgCiAgICAgICAgICAgIGNvbnN0IFtzdXJ2ZWlsbGFuY2VNb2RlLCBzZXRTdXJ2ZWlsbGFuY2VNb2RlXSA9IHVzZVN0YXRlKCd3aXRoX3JvdGF0aW9uJyk7IAoKICAgICAgICAgICAgY29uc3QgW3NlbGVjdGVkQ29ycmVjdGlvblN1YmplY3QsIHNldFNlbGVjdGVkQ29ycmVjdGlvblN1YmplY3RdID0gdXNlU3RhdGUobnVsbCk7CiAgICAgICAgICAgIGNvbnN0IFtzZWxlY3RlZFRlYWNoZXJzRm9yQ29ycmVjdGlvbiwgc2V0U2VsZWN0ZWRUZWFjaGVyc0ZvckNvcnJlY3Rpb25dID0gdXNlU3RhdGUoW10pOwogICAgICAgICAgICAvLyBBam91dCBFdGF0IHBvdXIgZm9yY2VyIGFmZmljaGFnZSB0b3VzIHByb2ZzCiAgICAgICAgICAgIGNvbnN0IFtmb3JjZUFsbFRlYWNoZXJzQ29ycmVjdGlvbiwgc2V0Rm9yY2VBbGxUZWFjaGVyc0NvcnJlY3Rpb25dID0gdXNlU3RhdGUoZmFsc2UpOwoKICAgICAgICAgICAgY29uc3QgW3RlYWNoZXJBc3NpZ25tZW50cywgc2V0VGVhY2hlckFzc2lnbm1lbnRzXSA9IHVzZVN0YXRlKHt9KTsgCiAgICAgICAgICAgIAogICAgICAgICAgICBjb25zdCBbc3VydmVpbGxhbmNlQXNzaWdubWVudHMsIHNldFN1cnZlaWxsYW5jZUFzc2lnbm1lbnRzXSA9IHVzZVN0YXRlKHt9KTsgCiAgICAgICAgICAgIGNvbnN0IFtzZWNyZXRhcmlhdEFzc2lnbm1lbnRzLCBzZXRTZWNyZXRhcmlhdEFzc2lnbm1lbnRzXSA9IHVzZVN0YXRlKHt9KTsKCiAgICAgICAgICAgIGNvbnN0IFtkcmFnZ2VkU3R1ZGVudElkLCBzZXREcmFnZ2VkU3R1ZGVudElkXSA9IHVzZVN0YXRlKG51bGwpOwogICAgICAgICAgICBjb25zdCBbbW9kYWxDb25maWcsIHNldE1vZGFsQ29uZmlnXSA9IHVzZVN0YXRlKHsgaXNPcGVuOiBmYWxzZSwgdGl0bGU6ICcnLCBtZXNzYWdlOiAnJywgb25Db25maXJtOiBudWxsIH0pOwogICAgICAgICAgICAvLyBBam91dCBkdSBzdGF0ZSBwb3VyIGxlIG1vZGFsIGRlIHNhaXNpZQogICAgICAgICAgICBjb25zdCBbaW5wdXRNb2RhbENvbmZpZywgc2V0SW5wdXRNb2RhbENvbmZpZ10gPSB1c2VTdGF0ZSh7IGlzT3BlbjogZmFsc2UsIHRpdGxlOiAnJywgbWVzc2FnZTogJycsIGRlZmF1bHRWYWx1ZTogJycsIG9uQ29uZmlybTogbnVsbCB9KTsKICAgICAgICAgICAgCiAgICAgICAgICAgIGNvbnN0IFtzY2hvb2xDb25maWcsIHNldFNjaG9vbENvbmZpZ10gPSB1c2VTdGF0ZShERUZBVUxUX1NDSE9PTF9DT05GSUcpOwogICAgICAgICAgICAKICAgICAgICAgICAgLy8gLS0tIFNUQVRFIFBPVVIgTEVTIFRFTVBMQVRFUyBERSBET0NTIC0tLQogICAgICAgICAgICBjb25zdCBbZG9jVGVtcGxhdGVzLCBzZXREb2NUZW1wbGF0ZXNdID0gdXNlU3RhdGUoREVGQVVMVF9ET0NfVEVNUExBVEVTKTsKICAgICAgICAgICAgLy8gQWpvdXQgw6l0YXQgcG91ciBsJ8OpZGl0ZXVyIGRlIHRlbXBsYXRlcwogICAgICAgICAgICBjb25zdCBbaXNUZW1wbGF0ZUVkaXRvck9wZW4sIHNldElzVGVtcGxhdGVFZGl0b3JPcGVuXSA9IHVzZVN0YXRlKGZhbHNlKTsKCiAgICAgICAgICAgIGNvbnN0IFtyb29tcywgc2V0Um9vbXNdID0gdXNlU3RhdGUoW10pOyAKICAgICAgICAgICAgY29uc3QgW3N0dWRlbnRzLCBzZXRTdHVkZW50c10gPSB1c2VTdGF0ZShbXSk7CiAgICAgICAgICAgIGNvbnN0IFt0ZWFjaGVycywgc2V0VGVhY2hlcnNdID0gdXNlU3RhdGUoW10pOwogICAgICAgICAgICBjb25zdCBbc3ViamVjdHMsIHNldFN1YmplY3RzXSA9IHVzZVN0YXRlKERFRkFVTFRfU1VCSkVDVFMpOwogICAgICAgICAgICBjb25zdCBbbmV3U3ViamVjdCwgc2V0TmV3U3ViamVjdF0gPSB1c2VTdGF0ZSh7IG5hbWU6ICcnLCBkYXRlOiAnJywgdGltZTogJycsIHRpbWVUVDogJycgfSk7CiAgICAgICAgICAgIAogICAgICAgICAgICAvLyAtLS0gTk9VVkVBVSBTVEFURSBQT1VSIEwnQUpPVVQgTUFOVUVMIERFIFNBTExFIC0tLQogICAgICAgICAgICBjb25zdCBbbmV3Um9vbSwgc2V0TmV3Um9vbV0gPSB1c2VTdGF0ZSh7IG5hbWU6ICcnLCBjYXBhY2l0eTogMjAgfSk7CgogICAgICAgICAgICBjb25zdCBbbm90aWZpY2F0aW9uLCBzZXROb3RpZmljYXRpb25dID0gdXNlU3RhdGUobnVsbCk7CiAgICAgICAgICAgIAogICAgICAgICAgICBjb25zdCBzaG93Tm90aWZpY2F0aW9uID0gKG1zZywgdHlwZSA9ICdzdWNjZXNzJykgPT4geyBzZXROb3RpZmljYXRpb24oeyBtc2csIHR5cGUgfSk7IHNldFRpbWVvdXQoKCkgPT4gc2V0Tm90aWZpY2F0aW9uKG51bGwpLCAzMDAwKTsgfTsKCiAgICAgICAgICAgIC8vIC0tLSBBVVRPIFNBVkUgJiBMT0FEIEFNw4lMSU9Sw4lTIChWMTEgYXZlYyBtaWdyYXRpb24gVjEwKSAtLS0KICAgICAgICAgICAgdXNlRWZmZWN0KCgpID0+IHsKICAgICAgICAgICAgICAgIC8vIFRlbnRlciBkZSBjaGFyZ2VyIFYxMQogICAgICAgICAgICAgICAgY29uc3Qgc2F2ZWREYXRhVjExID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oU1RPUkFHRV9LRVlfVjExKTsKICAgICAgICAgICAgICAgIGlmIChzYXZlZERhdGFWMTEpIHsKICAgICAgICAgICAgICAgICAgICBsb2FkRGF0YShKU09OLnBhcnNlKHNhdmVkRGF0YVYxMSksICJWMTEiKTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgLy8gVGVudGVyIG1pZ3JhdGlvbiBkZXB1aXMgVjEwCiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2F2ZWREYXRhVjEwID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oU1RPUkFHRV9LRVlfVjEwKTsKICAgICAgICAgICAgICAgICAgICBpZiAoc2F2ZWREYXRhVjEwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJNaWdyYXRpb24gZGVwdWlzIFYxMC4uLiIpOwogICAgICAgICAgICAgICAgICAgICAgICBsb2FkRGF0YShKU09OLnBhcnNlKHNhdmVkRGF0YVYxMCksICJWMTAgKE1pZ3LDqSkiKTsKICAgICAgICAgICAgICAgICAgICAgICAgc2hvd05vdGlmaWNhdGlvbigiRG9ubsOpZXMgbWlncsOpZXMgZGVwdWlzIGxhIHZlcnNpb24gcHLDqWPDqWRlbnRlIChWMTApLiIsICJzdWNjZXNzIik7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LCBbXSk7CgogICAgICAgICAgICBjb25zdCBsb2FkRGF0YSA9IChkYXRhLCB2ZXJzaW9uTGFiZWwpID0+IHsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgLy8gLS0tIEdFU1RJT04gSU5URUxMSUdFTlRFIERFUyBWRVJTSU9OUyAoUEFTU8OJRVMgRVQgRlVUVVJFUykgLS0tCiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgLy8gRMOpdGVjdGlvbiBkZXMgdmVyc2lvbnMgZnV0dXJlcwogICAgICAgICAgICAgICAgICAgIGNvbnN0IGxvYWRlZFZlcnNpb24gPSBwYXJzZUZsb2F0KGRhdGEudmVyc2lvbikgfHwgMDsKICAgICAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50VmVyc2lvbiA9IHBhcnNlRmxvYXQoQVBQX1ZFUlNJT04pOwoKICAgICAgICAgICAgICAgICAgICBpZiAobG9hZGVkVmVyc2lvbiA+IGN1cnJlbnRWZXJzaW9uKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHNob3dOb3RpZmljYXRpb24oYEluZm8gOiBTYXV2ZWdhcmRlIGlzc3VlIGQndW5lIHZlcnNpb24gcGx1cyByw6ljZW50ZSAoJHtkYXRhLnZlcnNpb24gfHwgJ0luY29ubnVlJ30pLiBMZXMgZG9ubsOpZXMgY29tcGF0aWJsZXMgc2Vyb250IGNoYXJnw6llcy5gLCAid2FybmluZyIpOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgLy8gMS4gQ29uZmlnIEV0YWJsaXNzZW1lbnQKICAgICAgICAgICAgICAgICAgICAvLyBPbiBwYXJ0IGRlcyBkw6lmYXV0cyBldCBvbiBmdXNpb25uZSBhdmVjIGNlIHF1aSBleGlzdGUgZGFucyBsZSBKU09OIChzaSBwcsOpc2VudCkKICAgICAgICAgICAgICAgICAgICAvLyBMJ29ww6lyYXRldXIgLi4uIHBlcm1ldCBkZSBjb25zZXJ2ZXIgZGVzIGNoYW1wcyBmdXR1cnMgaW5jb25udXMgZGUgbGEgVjEwCiAgICAgICAgICAgICAgICAgICAgc2V0U2Nob29sQ29uZmlnKHByZXYgPT4gKHsgCiAgICAgICAgICAgICAgICAgICAgICAgIC4uLkRFRkFVTFRfU0NIT09MX0NPTkZJRywgCiAgICAgICAgICAgICAgICAgICAgICAgIC4uLihkYXRhLnNjaG9vbENvbmZpZyB8fCB7fSkgCiAgICAgICAgICAgICAgICAgICAgfSkpOwoKICAgICAgICAgICAgICAgICAgICAvLyAyLiBTYWxsZXMKICAgICAgICAgICAgICAgICAgICAvLyBTw6ljdXJpc2F0aW9uIHNpIGRhdGEucm9vbXMgZXN0IG51bGwgb3UgdW5kZWZpbmVkCiAgICAgICAgICAgICAgICAgICAgY29uc3QgbG9hZGVkUm9vbXMgPSBBcnJheS5pc0FycmF5KGRhdGEucm9vbXMpID8gZGF0YS5yb29tcyA6IFtdOwogICAgICAgICAgICAgICAgICAgIHNldFJvb21zKGxvYWRlZFJvb21zLm1hcChyID0+ICh7CiAgICAgICAgICAgICAgICAgICAgICAgIC4uLnIsIC8vIE9uIGdhcmRlIHRvdXRlcyBsZXMgcHJvcHJpw6l0w6lzIGV4aXN0YW50ZXMgKG3Dqm1lIGZ1dHVyZXMpCiAgICAgICAgICAgICAgICAgICAgICAgIGlkOiByLmlkIHx8IGByb29tLW1pZ3JhdGVkLSR7TWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyKDIsIDkpfWAsIC8vIFPDqWN1cml0w6kgSUQgbWFucXVhbnQKICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogci5uYW1lIHx8ICJTYWxsZSBzYW5zIG5vbSIsCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIENvbXBhdGliaWxpdMOpIFYxLVY5IChjYXBhY2l0eSBvdSBtYXhDYXBhY2l0eSkKICAgICAgICAgICAgICAgICAgICAgICAgY2FwYWNpdHk6IHBhcnNlSW50KHIuY2FwYWNpdHkpIHx8IHBhcnNlSW50KHIubWF4Q2FwYWNpdHkpIHx8IDIwLCAKICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogci50eXBlIHx8ICdzdGFuZGFyZCcKICAgICAgICAgICAgICAgICAgICB9KSkpOwoKICAgICAgICAgICAgICAgICAgICAvLyAzLiDDiWzDqHZlcwogICAgICAgICAgICAgICAgICAgIGNvbnN0IGxvYWRlZFN0dWRlbnRzID0gQXJyYXkuaXNBcnJheShkYXRhLnN0dWRlbnRzKSA/IGRhdGEuc3R1ZGVudHMgOiBbXTsKICAgICAgICAgICAgICAgICAgICBzZXRTdHVkZW50cyhsb2FkZWRTdHVkZW50cy5tYXAocyA9PiAoewogICAgICAgICAgICAgICAgICAgICAgICAuLi5zLCAvLyBDUlVDSUFMIDogT24gY29uc2VydmUgbGVzIGNoYW1wcyBwb3RlbnRpZWxzIGRlcyB2ZXJzaW9ucyBmdXR1cmVzIChleDogJ2dyb3VwZUNvbXBldGVuY2UnIGRlIGxhIFYxMikKICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IHMuaWQgfHwgYHN0dWRlbnQtbWlncmF0ZWQtJHtNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHIoMiwgOSl9YCwKICAgICAgICAgICAgICAgICAgICAgICAgLy8gU3VwcG9ydCBjbMOpcyBmcmFuw6dhaXNlcyBhbmNpZW5uZXMgdmVyc2lvbnMgKG5vbS9wcmVub20pCiAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RuYW1lOiBzLmxhc3RuYW1lIHx8IHMubm9tIHx8ICJJbmNvbm51IiwgCiAgICAgICAgICAgICAgICAgICAgICAgIGZpcnN0bmFtZTogcy5maXJzdG5hbWUgfHwgcy5wcmVub20gfHwgIiIsCiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzOiBzLmNsYXNzIHx8IHMuY2xhc3NlIHx8ICIiLAogICAgICAgICAgICAgICAgICAgICAgICAvLyBDb21wYXRpYmlsaXTDqSBib29sw6llbm5lIHJvYnVzdGUgKGlzVFQsIHRpZXJzVGVtcHMsIHR0LCBvdSBjaGHDrm5lICJPVUkiKQogICAgICAgICAgICAgICAgICAgICAgICBpc1RUOiAocy5pc1RUICE9PSB1bmRlZmluZWQpID8gcy5pc1RUIDogKCEhcy50aWVyc1RlbXBzIHx8ICEhcy50dCB8fCBzLnR0ID09PSAiT1VJIiksCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFPDqWN1cml0w6kgOiByb29tSWQgZG9pdCDDqnRyZSBudWxsIHNpIGludmFsaWRlCiAgICAgICAgICAgICAgICAgICAgICAgIHJvb21JZDogcy5yb29tSWQgfHwgbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgaW5lOiBzLmluZSB8fCAiIiwKICAgICAgICAgICAgICAgICAgICAgICAgYWVzaDogcy5hZXNoIHx8ICIiLAogICAgICAgICAgICAgICAgICAgICAgICBhbm9ueW1vdXNJZDogcy5hbm9ueW1vdXNJZCB8fCAiIiAKICAgICAgICAgICAgICAgICAgICB9KSkpOwoKICAgICAgICAgICAgICAgICAgICAvLyA0LiBQcm9mZXNzZXVycwogICAgICAgICAgICAgICAgICAgIGNvbnN0IGxvYWRlZFRlYWNoZXJzID0gQXJyYXkuaXNBcnJheShkYXRhLnRlYWNoZXJzKSA/IGRhdGEudGVhY2hlcnMgOiBbXTsKICAgICAgICAgICAgICAgICAgICBzZXRUZWFjaGVycyhsb2FkZWRUZWFjaGVycy5tYXAodCA9PiAoewogICAgICAgICAgICAgICAgICAgICAgICAuLi50LCAvLyBDb25zZXJ2YXRpb24gZGVzIGNoYW1wcyBmdXR1cnMKICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IHQuaWQgfHwgYHByb2YtbWlncmF0ZWQtJHtNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHIoMiwgOSl9YCwKICAgICAgICAgICAgICAgICAgICAgICAgLy8gU3VwcG9ydCBjbMOpcyBmcmFuw6dhaXNlcyBhbmNpZW5uZXMKICAgICAgICAgICAgICAgICAgICAgICAgbGFzdG5hbWU6IHQubGFzdG5hbWUgfHwgdC5ub20gfHwgIlByb2Zlc3NldXIiLAogICAgICAgICAgICAgICAgICAgICAgICBmaXJzdG5hbWU6IHQuZmlyc3RuYW1lIHx8IHQucHJlbm9tIHx8ICIiLAogICAgICAgICAgICAgICAgICAgICAgICBjaXY6IHQuY2l2IHx8ICIiLAogICAgICAgICAgICAgICAgICAgICAgICAvLyBTdXBwb3J0IGRpc2NpcGxpbmUvbWF0aWVyZQogICAgICAgICAgICAgICAgICAgICAgICBzdWJqZWN0OiB0LnN1YmplY3QgfHwgdC5kaXNjaXBsaW5lIHx8IHQubWF0aWVyZSB8fCAnTm9uIGTDqWZpbmknCiAgICAgICAgICAgICAgICAgICAgfSkpKTsKCiAgICAgICAgICAgICAgICAgICAgLy8gNS4gTWF0acOocmVzIChDcnVjaWFsIHBvdXIgVjEwL1YxMSkKICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YS5zdWJqZWN0cyAmJiBBcnJheS5pc0FycmF5KGRhdGEuc3ViamVjdHMpICYmIGRhdGEuc3ViamVjdHMubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgICAgICAgICAgICBzZXRTdWJqZWN0cyhkYXRhLnN1YmplY3RzLm1hcChzID0+ICh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5zLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IHBhcnNlSW50KHMuaWQpIHx8IHMuaWQgfHwgRGF0ZS5ub3coKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IHMubmFtZSB8fCAiw4lwcmV1dmUiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZTogcy5kYXRlIHx8ICIiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZTogcy50aW1lIHx8ICIwMDowMCAtIDAwOjAwIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE1pZ3JhdGlvbiBWMTAgOiBzaSBwYXMgZGUgdGltZVRULCBvbiB1dGlsaXNlIHRpbWUgc3RhbmRhcmQgcGFyIGTDqWZhdXQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVUVDogcy50aW1lVFQgfHwgcy50aW1lIHx8ICIwMDowMCAtIDAwOjAwIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE1pZ3JhdGlvbiBWMTAgOiB0YWJsZWF1IHZpZGUgc2kgYWJzZW50CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNjaXBsaW5lczogQXJyYXkuaXNBcnJheShzLmRpc2NpcGxpbmVzKSA/IHMuZGlzY2lwbGluZXMgOiBbXQogICAgICAgICAgICAgICAgICAgICAgICB9KSkpOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZGF0YS5zdWJqZWN0cykgewogICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBsYSBjbMOpIGV4aXN0ZSBtYWlzIGVzdCB2aWRlIG91IGludmFsaWRlLCBvbiByZW1ldCBsZXMgZMOpZmF1dHMgb3UgdmlkZSBzZWxvbiBsZSBjYXMKICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWNpIG9uIGNvbnNlcnZlIGxlcyBzdWpldHMgZXhpc3RhbnRzIGRlIGwnYXBwIHNpIGxlIEpTT04gbidlbiBhIHBhcywgb3Ugb24gbWV0IHZpZGUKICAgICAgICAgICAgICAgICAgICAgICAgLy8gUG91ciDDqXZpdGVyIGRlIHBlcmRyZSBsZXMgZG9ubsOpZXMsIHNpIGxlIEpTT04gbidhIHBhcyBkZSBzdWpldHMsIG9uIHN1cHBvc2UgcXUnaWwgbidlbiBhdmFpdCBwYXMuCiAgICAgICAgICAgICAgICAgICAgICAgIHNldFN1YmplY3RzKFtdKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgLy8gTm90ZTogU2kgZGF0YS5zdWJqZWN0cyBlc3QgdW5kZWZpbmVkICh0csOocyB2aWVpbGxlIHNhdXZlZ2FyZGUgcGFydGllbGxlKSwgb24gZ2FyZGUgbGVzIERFRkFVTFRfU1VCSkVDVFMgaW5pdGlhbGlzw6lzIGF1IGTDqW1hcnJhZ2UKCiAgICAgICAgICAgICAgICAgICAgLy8gNi4gQWZmZWN0YXRpb25zCiAgICAgICAgICAgICAgICAgICAgc2V0VGVhY2hlckFzc2lnbm1lbnRzKGRhdGEudGVhY2hlckFzc2lnbm1lbnRzIHx8IHt9KTsKICAgICAgICAgICAgICAgICAgICBzZXRTdXJ2ZWlsbGFuY2VBc3NpZ25tZW50cyhkYXRhLnN1cnZlaWxsYW5jZUFzc2lnbm1lbnRzIHx8IHt9KTsKICAgICAgICAgICAgICAgICAgICBzZXRTZWNyZXRhcmlhdEFzc2lnbm1lbnRzKGRhdGEuc2VjcmV0YXJpYXRBc3NpZ25tZW50cyB8fCB7fSk7CgogICAgICAgICAgICAgICAgICAgIC8vIDcuIFBhcmFtw6h0cmVzCiAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGEuc3VydmVpbGxhbmNlTW9kZSkgc2V0U3VydmVpbGxhbmNlTW9kZShkYXRhLnN1cnZlaWxsYW5jZU1vZGUpOwogICAgICAgICAgICAgICAgICAgIGlmIChkYXRhLmlzQW5vbnltaXR5TG9ja2VkICE9PSB1bmRlZmluZWQpIHNldElzQW5vbnltaXR5TG9ja2VkKGRhdGEuaXNBbm9ueW1pdHlMb2NrZWQpOwoKICAgICAgICAgICAgICAgICAgICAvLyA4LiBUZW1wbGF0ZXMgZGUgZG9jdW1lbnRzIChNaWdyYXRpb24gVjEwIGNyaXRpcXVlKQogICAgICAgICAgICAgICAgICAgIC8vIE9uIGFzc3VyZSBxdWUgdG91dGVzIGxlcyBjbMOpcyBkdSB0ZW1wbGF0ZSBWMTAgZXhpc3RlbnQgbcOqbWUgc2kgbGEgc2F1dmVnYXJkZSBlc3QgYW5jaWVubmUKICAgICAgICAgICAgICAgICAgICBjb25zdCBsb2FkZWRUZW1wbGF0ZXMgPSBkYXRhLmRvY1RlbXBsYXRlcyB8fCB7fTsKICAgICAgICAgICAgICAgICAgICBjb25zdCBtZXJnZWRUZW1wbGF0ZXMgPSB7IC4uLkRFRkFVTFRfRE9DX1RFTVBMQVRFUyB9OwogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIE9iamVjdC5rZXlzKERFRkFVTFRfRE9DX1RFTVBMQVRFUykuZm9yRWFjaChrZXkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAvLyBPbiBwcmVuZCBsZSB0ZW1wbGF0ZSBwYXIgZMOpZmF1dCBjb21tZSBiYXNlCiAgICAgICAgICAgICAgICAgICAgICAgIG1lcmdlZFRlbXBsYXRlc1trZXldID0geyAuLi5ERUZBVUxUX0RPQ19URU1QTEFURVNba2V5XSB9OwogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgbGEgc2F1dmVnYXJkZSBjb250aWVudCBkZXMgaW5mb3MgcG91ciBjZSB0ZW1wbGF0ZSwgb24gZnVzaW9ubmUKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGxvYWRlZFRlbXBsYXRlc1trZXldKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXJnZWRUZW1wbGF0ZXNba2V5XSA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5tZXJnZWRUZW1wbGF0ZXNba2V5XSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5sb2FkZWRUZW1wbGF0ZXNba2V5XSAvLyDDiWNyYXNlIGF2ZWMgbGVzIHZhbGV1cnMgY2hhcmfDqWVzLCBpZ25vcmUgbGVzIGNsw6lzIGluY29ubnVlcyBzaSBvbiB2b3VsYWl0IMOqdHJlIHN0cmljdCwgbWFpcyBpY2kgb24gZXN0IHBlcm1pc3NpZgogICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIHNldERvY1RlbXBsYXRlcyhtZXJnZWRUZW1wbGF0ZXMpOwoKICAgICAgICAgICAgICAgICAgICBpZiAobG9hZGVkVmVyc2lvbiA8PSBjdXJyZW50VmVyc2lvbikgewogICAgICAgICAgICAgICAgICAgICAgICAgc2hvd05vdGlmaWNhdGlvbihgRG9ubsOpZXMgcmVzdGF1csOpZXMgYXZlYyBzdWNjw6hzICgke3ZlcnNpb25MYWJlbCB8fCAiRmljaGllciBleHRlcm5lIn0pYCwgInN1Y2Nlc3MiKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcigiRXJyZXVyIGNoYXJnZW1lbnQgZG9ubsOpZXMiLCBlKTsKICAgICAgICAgICAgICAgICAgICBzaG93Tm90aWZpY2F0aW9uKCJBdHRlbnRpb24gOiBGaWNoaWVyIGRlIHNhdXZlZ2FyZGUgY29ycm9tcHUgb3UgZm9ybWF0IGluY29ubnUuIiwgImVycm9yIik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH07CgogICAgICAgICAgICAvLyBTYXV2ZWdhcmRlciBhdXRvbWF0aXF1ZW1lbnQgw6AgY2hhcXVlIGNoYW5nZW1lbnQgKFYxMSBFWEhBVVNUSVZFKQogICAgICAgICAgICB1c2VFZmZlY3QoKCkgPT4gewogICAgICAgICAgICAgICAgY29uc3QgZGF0YVRvU2F2ZSA9IHsKICAgICAgICAgICAgICAgICAgICB2ZXJzaW9uOiBBUFBfVkVSU0lPTiwKICAgICAgICAgICAgICAgICAgICBzY2hvb2xDb25maWcsCiAgICAgICAgICAgICAgICAgICAgcm9vbXMsCiAgICAgICAgICAgICAgICAgICAgc3R1ZGVudHMsCiAgICAgICAgICAgICAgICAgICAgdGVhY2hlcnMsCiAgICAgICAgICAgICAgICAgICAgc3ViamVjdHMsCiAgICAgICAgICAgICAgICAgICAgdGVhY2hlckFzc2lnbm1lbnRzLAogICAgICAgICAgICAgICAgICAgIHN1cnZlaWxsYW5jZUFzc2lnbm1lbnRzLAogICAgICAgICAgICAgICAgICAgIHNlY3JldGFyaWF0QXNzaWdubWVudHMsCiAgICAgICAgICAgICAgICAgICAgc3VydmVpbGxhbmNlTW9kZSwKICAgICAgICAgICAgICAgICAgICBkb2NUZW1wbGF0ZXMsCiAgICAgICAgICAgICAgICAgICAgaXNBbm9ueW1pdHlMb2NrZWQsIC8vIFNhdXZlZ2FyZGUgZGUgbCfDqXRhdCBkdSB2ZXJyb3UKICAgICAgICAgICAgICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKQogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFNUT1JBR0VfS0VZX1YxMSwgSlNPTi5zdHJpbmdpZnkoZGF0YVRvU2F2ZSkpOwogICAgICAgICAgICB9LCBbc2Nob29sQ29uZmlnLCByb29tcywgc3R1ZGVudHMsIHRlYWNoZXJzLCBzdWJqZWN0cywgdGVhY2hlckFzc2lnbm1lbnRzLCBzdXJ2ZWlsbGFuY2VBc3NpZ25tZW50cywgc2VjcmV0YXJpYXRBc3NpZ25tZW50cywgc3VydmVpbGxhbmNlTW9kZSwgZG9jVGVtcGxhdGVzLCBpc0Fub255bWl0eUxvY2tlZF0pOwoKICAgICAgICAgICAgY29uc3QgZ2V0Um9vbU9jY3VwYW5jeSA9IChyb29tSWQpID0+IHN0dWRlbnRzLmZpbHRlcihzID0+IHMucm9vbUlkID09PSByb29tSWQpLmxlbmd0aDsKICAgICAgICAgICAgY29uc3Qgb3Blbk1vZGFsID0gKHRpdGxlLCBtZXNzYWdlLCBhY3Rpb24pID0+IHNldE1vZGFsQ29uZmlnKHsgaXNPcGVuOiB0cnVlLCB0aXRsZSwgbWVzc2FnZSwgb25Db25maXJtOiBhY3Rpb24gfSk7CiAgICAgICAgICAgIGNvbnN0IGNsb3NlTW9kYWwgPSAoKSA9PiBzZXRNb2RhbENvbmZpZyh7IC4uLm1vZGFsQ29uZmlnLCBpc09wZW46IGZhbHNlIH0pOwogICAgICAgICAgICBjb25zdCBoYW5kbGVNb2RhbENvbmZpcm0gPSAoKSA9PiB7IGlmIChtb2RhbENvbmZpZy5vbkNvbmZpcm0pIG1vZGFsQ29uZmlnLm9uQ29uZmlybSgpOyBjbG9zZU1vZGFsKCk7IH07CiAgICAgICAgICAgIAogICAgICAgICAgICAvLyBIZWxwZXJzIHBvdXIgbGUgSW5wdXRNb2RhbCAoQ29ycmVjdGlvbjogZnVuY3Rpb25hbCB1cGRhdGUpCiAgICAgICAgICAgIGNvbnN0IGNsb3NlSW5wdXRNb2RhbCA9ICgpID0+IHNldElucHV0TW9kYWxDb25maWcocHJldiA9PiAoeyAuLi5wcmV2LCBpc09wZW46IGZhbHNlIH0pKTsKCiAgICAgICAgICAgIGNvbnN0IGdldFNjaWVuY2VTdWJqZWN0ID0gKCkgPT4gc3ViamVjdHMuZmluZChzID0+IHMuaWQgPT09IDQpOwoKICAgICAgICAgICAgY29uc3QgdG9nZ2xlU2NpZW5jZURpc2NpcGxpbmUgPSAoZGlzYykgPT4gewogICAgICAgICAgICAgICAgc2V0U3ViamVjdHMocHJldiA9PiBwcmV2Lm1hcChzID0+IHsKICAgICAgICAgICAgICAgICAgICBpZiAocy5pZCAhPT0gNCkgcmV0dXJuIHM7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgY3VycmVudCA9IHMuZGlzY2lwbGluZXMgfHwgW107CiAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnQuaW5jbHVkZXMoZGlzYykpIHJldHVybiB7IC4uLnMsIGRpc2NpcGxpbmVzOiBjdXJyZW50LmZpbHRlcihkID0+IGQgIT09IGRpc2MpIH07CiAgICAgICAgICAgICAgICAgICAgZWxzZSB7IGlmIChjdXJyZW50Lmxlbmd0aCA+PSAyKSB7IHNob3dOb3RpZmljYXRpb24oIk1heGltdW0gMiBkaXNjaXBsaW5lcyAhIiwgImVycm9yIik7IHJldHVybiBzOyB9IHJldHVybiB7IC4uLnMsIGRpc2NpcGxpbmVzOiBbLi4uY3VycmVudCwgZGlzY10uc29ydCgpIH07IH0KICAgICAgICAgICAgICAgIH0pKTsKICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIGNvbnN0IGhhbmRsZUdsb2JhbFJlc2V0ID0gKCkgPT4gewogICAgICAgICAgICAgICAgb3Blbk1vZGFsKCJOb3V2ZWxsZSBTZXNzaW9uIC8gUkFaIiwgIkF0dGVudGlvbiA6IFLDqWluaXRpYWxpc2F0aW9uIGNvbXBsw6h0ZSAhIiwgKCkgPT4gewogICAgICAgICAgICAgICAgICAgIHNldFNjaG9vbENvbmZpZyhERUZBVUxUX1NDSE9PTF9DT05GSUcpOyBzZXRSb29tcyhbXSk7IHNldFN0dWRlbnRzKFtdKTsgc2V0VGVhY2hlcnMoW10pOyBzZXRTdWJqZWN0cyhERUZBVUxUX1NVQkpFQ1RTKTsgc2V0VGVhY2hlckFzc2lnbm1lbnRzKHt9KTsgc2V0U3VydmVpbGxhbmNlQXNzaWdubWVudHMoe30pOyBzZXRTZWNyZXRhcmlhdEFzc2lnbm1lbnRzKHt9KTsgc2V0RG9jVGVtcGxhdGVzKERFRkFVTFRfRE9DX1RFTVBMQVRFUyk7IHNldElzQW5vbnltaXR5TG9ja2VkKHRydWUpOyBzaG93Tm90aWZpY2F0aW9uKCJSQVogZWZmZWN0dcOpZSAhIiwgInN1Y2Nlc3MiKTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9OwoKICAgICAgICAgICAgLy8gLS0tIE5PVVZFQVUgOiBGT05DVElPTiBEJ0FKT1VUIE1BTlVFTCBERSBTQUxMRSAtLS0KICAgICAgICAgICAgY29uc3QgaGFuZGxlQWRkUm9vbSA9ICgpID0+IHsKICAgICAgICAgICAgICAgIGlmIChuZXdSb29tLm5hbWUgJiYgbmV3Um9vbS5jYXBhY2l0eSA+IDApIHsKICAgICAgICAgICAgICAgICAgICBzZXRSb29tcyhbLi4ucm9vbXMsIHsgaWQ6IGByb29tLW1hbnVhbC0ke0RhdGUubm93KCl9YCwgbmFtZTogbmV3Um9vbS5uYW1lLCBjYXBhY2l0eTogbmV3Um9vbS5jYXBhY2l0eSwgdHlwZTogJ3N0YW5kYXJkJyB9XSk7CiAgICAgICAgICAgICAgICAgICAgc2V0TmV3Um9vbSh7IG5hbWU6ICcnLCBjYXBhY2l0eTogMjAgfSk7CiAgICAgICAgICAgICAgICAgICAgc2hvd05vdGlmaWNhdGlvbigiU2FsbGUgYWpvdXTDqWUgISIpOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBzaG93Tm90aWZpY2F0aW9uKCJOb20gZXQgY2FwYWNpdMOpIHJlcXVpcyIsICJlcnJvciIpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9OwoKICAgICAgICAgICAgLy8gLS0tIE5PVVZFQVUgOiBGT05DVElPTiBDSEFSR0VNRU5UIERFTU8gLS0tCiAgICAgICAgICAgIGNvbnN0IGxvYWRHbG9iYWxEZW1vRGF0YSA9ICgpID0+IHsKICAgICAgICAgICAgICAgIG9wZW5Nb2RhbCgiQ2hhcmdlbWVudCBEw6ltbyIsICJBdHRlbnRpb24gOiBDZWxhIHZhIHJlbXBsYWNlciB0b3V0ZXMgdm9zIGRvbm7DqWVzIGFjdHVlbGxlcyAow6lsw6h2ZXMsIHByb2ZzLCBzYWxsZXMpIHBhciBkZXMgZG9ubsOpZXMgZmljdGl2ZXMuIENvbnRpbnVlciA/IiwgKCkgPT4gewogICAgICAgICAgICAgICAgICAgIGNvbnN0IHllYXIgPSBuZXcgRGF0ZSgpLmdldEZ1bGxZZWFyKCk7CiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgLy8gMS4gU2FsbGVzCiAgICAgICAgICAgICAgICAgICAgY29uc3QgZGVtb1Jvb21zID0gWwogICAgICAgICAgICAgICAgICAgICAgICB7IGlkOiAncjEnLCBuYW1lOiAnU2FsbGUgMTAxJywgY2FwYWNpdHk6IDIwIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIHsgaWQ6ICdyMicsIG5hbWU6ICdTYWxsZSAxMDInLCBjYXBhY2l0eTogMjAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgeyBpZDogJ3IzJywgbmFtZTogJ1NhbGxlIDEwMycsIGNhcGFjaXR5OiAyMCB9LAogICAgICAgICAgICAgICAgICAgICAgICB7IGlkOiAncjQnLCBuYW1lOiAnU2FsbGUgMTA0JywgY2FwYWNpdHk6IDE1IH0sCiAgICAgICAgICAgICAgICAgICAgICAgIHsgaWQ6ICdyNScsIG5hbWU6ICdQZXJtYW5lbmNlJywgY2FwYWNpdHk6IDMwIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIHsgaWQ6ICdyNicsIG5hbWU6ICdTYWxsZSBUVCcsIGNhcGFjaXR5OiAxMCB9LAogICAgICAgICAgICAgICAgICAgIF07CgogICAgICAgICAgICAgICAgICAgIC8vIDIuIFByb2Zlc3NldXJzCiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3ViamVjdHNMaXN0ID0gWyJNYXRow6ltYXRpcXVlcyIsICJGcmFuw6dhaXMiLCAiSGlzdG9pcmUtR8OpbyIsICJBbmdsYWlzIiwgIkVzcGFnbm9sIiwgIlNWVCIsICJQaHlzaXF1ZS1DaGltaWUiLCAiVGVjaG5vbG9naWUiLCAiTXVzaXF1ZSIsICJBcnRzIFBsYXN0aXF1ZXMiXTsKICAgICAgICAgICAgICAgICAgICBjb25zdCBkZW1vVGVhY2hlcnMgPSBBcnJheS5mcm9tKHtsZW5ndGg6IDIwfSwgKF8sIGkpID0+ICh7CiAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBgcHJvZi0ke2l9YCwKICAgICAgICAgICAgICAgICAgICAgICAgY2l2OiBpICUgMiA9PT0gMCA/ICJNLiIgOiAiTW1lIiwKICAgICAgICAgICAgICAgICAgICAgICAgbGFzdG5hbWU6IGBQUk9GJHtpKzF9YCwKICAgICAgICAgICAgICAgICAgICAgICAgZmlyc3RuYW1lOiAiVGVzdCIsCiAgICAgICAgICAgICAgICAgICAgICAgIHN1YmplY3Q6IHN1YmplY3RzTGlzdFtpICUgc3ViamVjdHNMaXN0Lmxlbmd0aF0KICAgICAgICAgICAgICAgICAgICB9KSk7CgogICAgICAgICAgICAgICAgICAgIC8vIDMuIMOJbMOodmVzCiAgICAgICAgICAgICAgICAgICAgY29uc3QgdXNlZElkcyA9IG5ldyBTZXQoKTsKICAgICAgICAgICAgICAgICAgICBjb25zdCBkZW1vU3R1ZGVudHMgPSBBcnJheS5mcm9tKHtsZW5ndGg6IDEwMH0sIChfLCBpKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBzdWZmaXg7IGxldCBpZDsKICAgICAgICAgICAgICAgICAgICAgICAgZG8geyBzdWZmaXggPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiA5OTkpICsgMTsgaWQgPSBgRE5CJHt5ZWFyfSR7U3RyaW5nKHN1ZmZpeCkucGFkU3RhcnQoMywgJzAnKX1gOyB9IHdoaWxlKHVzZWRJZHMuaGFzKGlkKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHVzZWRJZHMuYWRkKGlkKTsKICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGlzVFQgPSBNYXRoLnJhbmRvbSgpIDwgMC4xOyAvLyAxMCUgVGllcnMgVGVtcHMKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaGFzQWVzaCA9IGlzVFQgJiYgTWF0aC5yYW5kb20oKSA8IDAuNTsgLy8gNTAlIGRlcyBUVCBvbnQgdW4gQUVTSAogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBgc3R1ZGVudC0ke2l9YCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RuYW1lOiBgRUxFVkUke2krMX1gLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlyc3RuYW1lOiBgUHLDqW5vbSR7aSsxfWAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzczogaSA8IDI1ID8gJzPDqG1lIEEnIDogKGkgPCA1MCA/ICczw6htZSBCJyA6IChpIDwgNzUgPyAnM8OobWUgQycgOiAnM8OobWUgRCcpKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzVFQ6IGlzVFQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZXNoOiBoYXNBZXNoID8gIkFFU0ggVGVzdCIgOiAiIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluZTogU3RyaW5nKDEwMDAwMDAwMDAgKyBpKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFub255bW91c0lkOiBpZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvb21JZDogbnVsbAogICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIHNldFJvb21zKGRlbW9Sb29tcyk7CiAgICAgICAgICAgICAgICAgICAgc2V0VGVhY2hlcnMoZGVtb1RlYWNoZXJzKTsKICAgICAgICAgICAgICAgICAgICBzZXRTdHVkZW50cyhkZW1vU3R1ZGVudHMpOwogICAgICAgICAgICAgICAgICAgIHNldFRlYWNoZXJBc3NpZ25tZW50cyh7fSk7CiAgICAgICAgICAgICAgICAgICAgc2V0U3VydmVpbGxhbmNlQXNzaWdubWVudHMoe30pOwogICAgICAgICAgICAgICAgICAgIHNldFNlY3JldGFyaWF0QXNzaWdubWVudHMoe30pOwogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIHNob3dOb3RpZmljYXRpb24oIkRvbm7DqWVzIGRlIGTDqW1vbnN0cmF0aW9uIGNoYXJnw6llcyAhIiwgInN1Y2Nlc3MiKTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9OwoKICAgICAgICAgICAgLy8gLi4uIChDb3JyZWN0aW9uIGZ1bmN0aW9ucykgLi4uCiAgICAgICAgICAgIGNvbnN0IGlzVGVhY2hlckZvclN1YmplY3QgPSAodGVhY2hlciwgc3ViamVjdCkgPT4gewogICAgICAgICAgICAgICAgaWYgKCF0ZWFjaGVyLnN1YmplY3QpIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgICAgIGNvbnN0IHRTdWIgPSB0ZWFjaGVyLnN1YmplY3QudG9VcHBlckNhc2UoKS50cmltKCk7CiAgICAgICAgICAgICAgICBjb25zdCBzTmFtZSA9IHN1YmplY3QubmFtZS50b1VwcGVyQ2FzZSgpLnRyaW0oKTsKICAgICAgICAgICAgICAgIGlmIChzTmFtZS5pbmNsdWRlcygiTUFUSCIpICYmIHRTdWIuaW5jbHVkZXMoIk1BVEgiKSkgcmV0dXJuIHRydWU7CiAgICAgICAgICAgICAgICBpZiAoc05hbWUuaW5jbHVkZXMoIkZSQU7Dh0FJUyIpICYmICh0U3ViLmluY2x1ZGVzKCJGUkFOw4dBSVMiKSB8fCB0U3ViLmluY2x1ZGVzKCJGUkFOQ0FJUyIpIHx8IHRTdWIuaW5jbHVkZXMoIkxFVFRSRSIpKSkgcmV0dXJuIHRydWU7CiAgICAgICAgICAgICAgICBpZiAoKHNOYW1lLmluY2x1ZGVzKCJISVNUT0lSRSIpIHx8IHNOYW1lLmluY2x1ZGVzKCJHRU8iKSB8fCBzTmFtZS5pbmNsdWRlcygiSEciKSkgJiYgKHRTdWIuaW5jbHVkZXMoIkhJU1QiKSB8fCB0U3ViLmluY2x1ZGVzKCJHRU8iKSB8fCB0U3ViLmluY2x1ZGVzKCJIRyIpIHx8IHRTdWIuaW5jbHVkZXMoIkVNQyIpKSkgcmV0dXJuIHRydWU7CiAgICAgICAgICAgICAgICBpZiAoc05hbWUuaW5jbHVkZXMoIlNDSUVOQ0VTIikpIHsgY29uc3QgZGlzY2lwbGluZXMgPSBzdWJqZWN0LmRpc2NpcGxpbmVzIHx8IFtdOyBpZiAodFN1Yi5pbmNsdWRlcygiU0NJRU5DRSIpIHx8IHRTdWIuaW5jbHVkZXMoIlNWVCIpIHx8IHRTdWIuaW5jbHVkZXMoIlBIWSIpIHx8IHRTdWIuaW5jbHVkZXMoIlRFQ0hOTyIpIHx8IHRTdWIuaW5jbHVkZXMoIkNISU1JRSIpKSByZXR1cm4gdHJ1ZTsgfQogICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICB9OwoKICAgICAgICAgICAgY29uc3QgaGFuZGxlU3ViamVjdFNlbGVjdEZvckNvcnJlY3Rpb24gPSAoc3ViamVjdElkKSA9PiB7CiAgICAgICAgICAgICAgICBjb25zdCBzdWJqZWN0ID0gc3ViamVjdHMuZmluZChzID0+IHMuaWQgPT09IHBhcnNlSW50KHN1YmplY3RJZCkpOwogICAgICAgICAgICAgICAgc2V0U2VsZWN0ZWRDb3JyZWN0aW9uU3ViamVjdChzdWJqZWN0KTsKICAgICAgICAgICAgICAgIGNvbnN0IHJlbGV2YW50VGVhY2hlcnMgPSB0ZWFjaGVycy5maWx0ZXIodCA9PiBpc1RlYWNoZXJGb3JTdWJqZWN0KHQsIHN1YmplY3QpKTsKICAgICAgICAgICAgICAgIHNldFNlbGVjdGVkVGVhY2hlcnNGb3JDb3JyZWN0aW9uKHJlbGV2YW50VGVhY2hlcnMubWFwKHQgPT4gdC5pZCkpOwogICAgICAgICAgICB9OwoKICAgICAgICAgICAgY29uc3QgZGlzdHJpYnV0ZUNvcGllcyA9ICgpID0+IHsKICAgICAgICAgICAgICAgIGlmICghc2VsZWN0ZWRDb3JyZWN0aW9uU3ViamVjdCkgcmV0dXJuOwogICAgICAgICAgICAgICAgY29uc3QgYWN0aXZlVGVhY2hlcnMgPSB0ZWFjaGVycy5maWx0ZXIodCA9PiBzZWxlY3RlZFRlYWNoZXJzRm9yQ29ycmVjdGlvbi5pbmNsdWRlcyh0LmlkKSk7CiAgICAgICAgICAgICAgICBpZiAoYWN0aXZlVGVhY2hlcnMubGVuZ3RoID09PSAwKSB7IHNob3dOb3RpZmljYXRpb24oIkF1Y3VuIHByb2Zlc3NldXIgISIsICJlcnJvciIpOyByZXR1cm47IH0KICAgICAgICAgICAgICAgIGNvbnN0IGFub255bWl6ZWRTdHVkZW50cyA9IHN0dWRlbnRzLmZpbHRlcihzID0+IHMuYW5vbnltb3VzSWQpLnNvcnQoKGEsIGIpID0+IGEuYW5vbnltb3VzSWQubG9jYWxlQ29tcGFyZShiLmFub255bW91c0lkKSk7CiAgICAgICAgICAgICAgICBjb25zdCB0b3RhbENvcGllcyA9IGFub255bWl6ZWRTdHVkZW50cy5sZW5ndGg7CiAgICAgICAgICAgICAgICBpZiAodG90YWxDb3BpZXMgPT09IDApIHsgc2hvd05vdGlmaWNhdGlvbigiQXVjdW4gw6lsw6h2ZSBhbm9ueW1lICEiLCAiZXJyb3IiKTsgcmV0dXJuOyB9CiAgICAgICAgICAgICAgICBjb25zdCBiYXNlQ291bnQgPSBNYXRoLmZsb29yKHRvdGFsQ29waWVzIC8gYWN0aXZlVGVhY2hlcnMubGVuZ3RoKTsKICAgICAgICAgICAgICAgIGNvbnN0IHJlbWFpbmRlciA9IHRvdGFsQ29waWVzICUgYWN0aXZlVGVhY2hlcnMubGVuZ3RoOwogICAgICAgICAgICAgICAgbGV0IGN1cnJlbnRJbmRleCA9IDA7CiAgICAgICAgICAgICAgICBjb25zdCBuZXdBc3NpZ25tZW50cyA9IGFjdGl2ZVRlYWNoZXJzLm1hcCgodGVhY2hlciwgaWR4KSA9PiB7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgY291bnQgPSBiYXNlQ291bnQgKyAoaWR4IDwgcmVtYWluZGVyID8gMSA6IDApOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IHN0YXJ0SWR4ID0gY3VycmVudEluZGV4OwogICAgICAgICAgICAgICAgICAgIGNvbnN0IGVuZElkeCA9IGN1cnJlbnRJbmRleCArIGNvdW50IC0gMTsKICAgICAgICAgICAgICAgICAgICBjdXJyZW50SW5kZXggKz0gY291bnQ7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgdGVhY2hlcklkOiB0ZWFjaGVyLmlkLCB0ZWFjaGVyTmFtZTogYCR7dGVhY2hlci5sYXN0bmFtZX0gJHt0ZWFjaGVyLmZpcnN0bmFtZX1gLCBjb3VudDogY291bnQsIHN0YXJ0UmFuazogc3RhcnRJZHggKyAxLCBlbmRSYW5rOiBlbmRJZHggKyAxLCBzdGFydEFub255bTogYW5vbnltaXplZFN0dWRlbnRzW3N0YXJ0SWR4XT8uYW5vbnltb3VzSWQgfHwgJz8nLCBlbmRBbm9ueW06IGFub255bWl6ZWRTdHVkZW50c1tlbmRJZHhdPy5hbm9ueW1vdXNJZCB8fCAnPycgfTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgc2V0VGVhY2hlckFzc2lnbm1lbnRzKHByZXYgPT4gKHsgLi4ucHJldiwgW3NlbGVjdGVkQ29ycmVjdGlvblN1YmplY3QuaWRdOiBuZXdBc3NpZ25tZW50cyB9KSk7CiAgICAgICAgICAgICAgICBzaG93Tm90aWZpY2F0aW9uKCJSw6lwYXJ0aXRpb24gY2FsY3Vsw6llICEiKTsKICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIGNvbnN0IHVwZGF0ZU1hbnVhbEFzc2lnbm1lbnQgPSAoaWR4LCBmaWVsZCwgdmFsdWUpID0+IHsKICAgICAgICAgICAgICAgIGlmICghc2VsZWN0ZWRDb3JyZWN0aW9uU3ViamVjdCkgcmV0dXJuOwogICAgICAgICAgICAgICAgY29uc3QgY3VycmVudEFzc2lnbm1lbnRzID0gWy4uLih0ZWFjaGVyQXNzaWdubWVudHNbc2VsZWN0ZWRDb3JyZWN0aW9uU3ViamVjdC5pZF0gfHwgW10pXTsKICAgICAgICAgICAgICAgIGlmIChmaWVsZCA9PT0gJ2NvdW50JykgewogICAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld1ZhbCA9IHBhcnNlSW50KHZhbHVlKSB8fCAwOwogICAgICAgICAgICAgICAgICAgIGN1cnJlbnRBc3NpZ25tZW50c1tpZHhdLmNvdW50ID0gbmV3VmFsOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IGFub255bWl6ZWRTdHVkZW50cyA9IHN0dWRlbnRzLmZpbHRlcihzID0+IHMuYW5vbnltb3VzSWQpLnNvcnQoKGEsIGIpID0+IGEuYW5vbnltb3VzSWQubG9jYWxlQ29tcGFyZShiLmFub255bW91c0lkKSk7CiAgICAgICAgICAgICAgICAgICAgbGV0IGN1cnJlbnRSYW5rID0gMDsKICAgICAgICAgICAgICAgICAgICBjdXJyZW50QXNzaWdubWVudHMuZm9yRWFjaChhc3NpZ24gPT4gewogICAgICAgICAgICAgICAgICAgICAgICBhc3NpZ24uc3RhcnRSYW5rID0gY3VycmVudFJhbmsgKyAxOwogICAgICAgICAgICAgICAgICAgICAgICBhc3NpZ24uZW5kUmFuayA9IGN1cnJlbnRSYW5rICsgYXNzaWduLmNvdW50OwogICAgICAgICAgICAgICAgICAgICAgICBhc3NpZ24uc3RhcnRBbm9ueW0gPSBhbm9ueW1pemVkU3R1ZGVudHNbYXNzaWduLnN0YXJ0UmFuayAtIDFdPy5hbm9ueW1vdXNJZCB8fCAoYXNzaWduLmNvdW50ID4gMCA/ICc/JyA6ICctJyk7CiAgICAgICAgICAgICAgICAgICAgICAgIGFzc2lnbi5lbmRBbm9ueW0gPSBhbm9ueW1pemVkU3R1ZGVudHNbYXNzaWduLmVuZFJhbmsgLSAxXT8uYW5vbnltb3VzSWQgfHwgKGFzc2lnbi5jb3VudCA+IDAgPyAnPycgOiAnLScpOwogICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50UmFuayArPSBhc3NpZ24uY291bnQ7CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBzZXRUZWFjaGVyQXNzaWdubWVudHMocHJldiA9PiAoeyAuLi5wcmV2LCBbc2VsZWN0ZWRDb3JyZWN0aW9uU3ViamVjdC5pZF06IGN1cnJlbnRBc3NpZ25tZW50cyB9KSk7CiAgICAgICAgICAgIH07CgogICAgICAgICAgICAvLyAuLi4gKEltcG9ydHMvRXhwb3J0cy9EYXRhIGhhbmRsaW5nKSAuLi4KICAgICAgICAgICAgY29uc3QgaGFuZGxlTG9nb1VwbG9hZCA9IChlKSA9PiB7IAogICAgICAgICAgICAgICAgY29uc3QgZmlsZSA9IGUudGFyZ2V0LmZpbGVzWzBdOyAKICAgICAgICAgICAgICAgIGlmIChmaWxlKSB7IAogICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7IAogICAgICAgICAgICAgICAgICAgIHJlYWRlci5vbmxvYWRlbmQgPSAoKSA9PiB7IAogICAgICAgICAgICAgICAgICAgICAgICAvLyBOb3V2ZWF1IGNhbGN1bCBkdSByYXRpbyBsb2dvCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGltZyA9IG5ldyBJbWFnZSgpOwogICAgICAgICAgICAgICAgICAgICAgICBpbWcub25sb2FkID0gKCkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmF0aW8gPSBpbWcud2lkdGggLyBpbWcuaGVpZ2h0OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0U2Nob29sQ29uZmlnKHByZXYgPT4gKHsgLi4ucHJldiwgbG9nb1VybDogcmVhZGVyLnJlc3VsdCwgbG9nb1JhdGlvOiByYXRpbyB9KSk7IAogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hvd05vdGlmaWNhdGlvbigiTG9nbyBpbXBvcnTDqSAhIik7CiAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgIGltZy5zcmMgPSByZWFkZXIucmVzdWx0OwogICAgICAgICAgICAgICAgICAgIH07IAogICAgICAgICAgICAgICAgICAgIHJlYWRlci5yZWFkQXNEYXRhVVJMKGZpbGUpOyAKICAgICAgICAgICAgICAgIH0gCiAgICAgICAgICAgIH07CiAgICAgICAgICAgIGNvbnN0IGhhbmRsZVN0YW1wVXBsb2FkID0gKGUpID0+IHsgCiAgICAgICAgICAgICAgICBjb25zdCBmaWxlID0gZS50YXJnZXQuZmlsZXNbMF07IAogICAgICAgICAgICAgICAgaWYgKGZpbGUpIHsgCiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTsgCiAgICAgICAgICAgICAgICAgICAgcmVhZGVyLm9ubG9hZGVuZCA9ICgpID0+IHsgCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGltZyA9IG5ldyBJbWFnZSgpOwogICAgICAgICAgICAgICAgICAgICAgICBpbWcub25sb2FkID0gKCkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmF0aW8gPSBpbWcud2lkdGggLyBpbWcuaGVpZ2h0OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0U2Nob29sQ29uZmlnKHByZXYgPT4gKHsgLi4ucHJldiwgc3RhbXBVcmw6IHJlYWRlci5yZXN1bHQsIHN0YW1wUmF0aW86IHJhdGlvIH0pKTsgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaG93Tm90aWZpY2F0aW9uKCJDYWNoZXQgaW1wb3J0w6kgISIpOyAKICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgaW1nLnNyYyA9IHJlYWRlci5yZXN1bHQ7CiAgICAgICAgICAgICAgICAgICAgfTsgCiAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnJlYWRBc0RhdGFVUkwoZmlsZSk7IAogICAgICAgICAgICAgICAgfSAKICAgICAgICAgICAgfTsgCiAgICAgICAgICAgIGNvbnN0IGhhbmRsZUFkZFN1YmplY3QgPSAoKSA9PiB7IGlmIChuZXdTdWJqZWN0Lm5hbWUgJiYgbmV3U3ViamVjdC5kYXRlKSB7IHNldFN1YmplY3RzKFsuLi5zdWJqZWN0cywgeyAuLi5uZXdTdWJqZWN0LCBpZDogRGF0ZS5ub3coKSB9XSk7IHNldE5ld1N1YmplY3QoeyBuYW1lOiAnJywgZGF0ZTogJycsIHRpbWU6ICcnLCB0aW1lVFQ6ICcnIH0pOyBzaG93Tm90aWZpY2F0aW9uKCLDiXByZXV2ZSBham91dMOpZSAhIik7IH0gfTsKICAgICAgICAgICAgY29uc3QgaGFuZGxlRGVsZXRlU3ViamVjdCA9IChpZCkgPT4geyBzZXRTdWJqZWN0cyhzdWJqZWN0cy5maWx0ZXIocyA9PiBzLmlkICE9PSBpZCkpOyB9OwogICAgICAgICAgICBjb25zdCBoYW5kbGVVcGRhdGVTdWJqZWN0ID0gKGlkLCBmaWVsZCwgdmFsdWUpID0+IHsgc2V0U3ViamVjdHMoc3ViamVjdHMubWFwKHMgPT4gcy5pZCA9PT0gaWQgPyB7IC4uLnMsIFtmaWVsZF06IHZhbHVlIH0gOiBzKSk7IH07CiAgICAgICAgICAgIGNvbnN0IGhhbmRsZVVwZGF0ZVN0dWRlbnQgPSAoaWQsIGZpZWxkLCB2YWx1ZSkgPT4geyBzZXRTdHVkZW50cyhzdHVkZW50cy5tYXAocyA9PiBzLmlkID09PSBpZCA/IHsgLi4ucywgW2ZpZWxkXTogdmFsdWUgfSA6IHMpKTsgfTsKICAgICAgICAgICAgY29uc3QgaGFuZGxlRGVsZXRlU3R1ZGVudCA9IChpZCkgPT4geyBvcGVuTW9kYWwoIlN1cHByZXNzaW9uIiwgIlZvdWxlei12b3VzIHZyYWltZW50IHN1cHByaW1lciBjZXQgw6lsw6h2ZSA/IiwgKCkgPT4geyBzZXRTdHVkZW50cyhwcmV2ID0+IHByZXYuZmlsdGVyKHMgPT4gcy5pZCAhPT0gaWQpKTsgc2hvd05vdGlmaWNhdGlvbigiw4lsw6h2ZSBzdXBwcmltw6kuIiwgInN1Y2Nlc3MiKTsgfSk7IH07CiAgICAgICAgICAgIAogICAgICAgICAgICAvLyBGb25jdGlvbiBwb3VyIG1ldHRyZSDDoCBqb3VyIGwnaG9yYWlyZSBldCBzeW5jaHJvbmlzZXIgbGUgVFQKICAgICAgICAgICAgY29uc3QgaGFuZGxlVGltZVVwZGF0ZSA9IChzdWJqZWN0SWQsIHR5cGUsIG5ld1N0YXJ0LCBuZXdFbmQpID0+IHsKICAgICAgICAgICAgICAgIC8vIENvbnN0cnVjdGlvbiBkZSBsYSBub3V2ZWxsZSBwbGFnZSBicnV0ZQogICAgICAgICAgICAgICAgY29uc3QgbmV3UmFuZ2UgPSBgJHtuZXdTdGFydH0gLSAke25ld0VuZH1gOwogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBzZXRTdWJqZWN0cyhwcmV2U3ViamVjdHMgPT4gcHJldlN1YmplY3RzLm1hcChzdWIgPT4gewogICAgICAgICAgICAgICAgICAgIGlmIChzdWIuaWQgIT09IHN1YmplY3RJZCkgcmV0dXJuIHN1YjsKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICBsZXQgdXBkYXRlcyA9IHsgLi4uc3ViLCBbdHlwZV06IG5ld1JhbmdlIH07CiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgLy8gQ2FsY3VsIGRlIGxhIGR1csOpZSBkZSBsJ8OpcHJldXZlIHN0YW5kYXJkIGFjdHVlbGxlIChvdSBub3V2ZWxsZSBzaSBjJ2VzdCBjZSBxdSdvbiBtb2RpZmllKQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHN0ZFJhbmdlVG9DaGVjayA9IHR5cGUgPT09ICd0aW1lJyA/IG5ld1JhbmdlIDogc3ViLnRpbWU7CiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3RkUGFydHMgPSBwYXJzZVRpbWVSYW5nZShzdGRSYW5nZVRvQ2hlY2spOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IHN0ZFN0YXJ0TWlucyA9IHRpbWVUb01pbnV0ZXMoc3RkUGFydHMuc3RhcnQpOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IHN0ZEVuZE1pbnMgPSB0aW1lVG9NaW51dGVzKHN0ZFBhcnRzLmVuZCk7CiAgICAgICAgICAgICAgICAgICAgbGV0IHN0ZER1cmF0aW9uID0gc3RkRW5kTWlucyAtIHN0ZFN0YXJ0TWluczsKICAgICAgICAgICAgICAgICAgICBpZiAoc3RkRHVyYXRpb24gPCAwKSBzdGREdXJhdGlvbiArPSAyNCAqIDYwOyAvLyBHZXN0aW9uIG51aXQKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAvLyBDYWxjdWwgZGUgbGEgZHVyw6llIHRow6lvcmlxdWUgZHUgVGllcnMtVGVtcHMgKER1csOpZSB4IDEuMzMpCiAgICAgICAgICAgICAgICAgICAgY29uc3QgdHREdXJhdGlvbiA9IE1hdGguY2VpbChzdGREdXJhdGlvbiAqIDQgLyAzKTsKCiAgICAgICAgICAgICAgICAgICAgLy8gTE9HSVFVRSBEJ0FEQVBUQVRJT04KICAgICAgICAgICAgICAgICAgICBpZiAodHlwZSA9PT0gJ3RpbWUnKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vIENhcyAxIDogT24gbW9kaWZpZSBsJ2hvcmFpcmUgU1RBTkRBUkQKICAgICAgICAgICAgICAgICAgICAgICAgLy8gLT4gTGUgZMOpYnV0IFRUIHMnYWxpZ25lIHN1ciBsZSBkw6lidXQgU3RhbmRhcmQKICAgICAgICAgICAgICAgICAgICAgICAgLy8gLT4gTGEgZmluIFRUIGVzdCByZWNhbGN1bMOpZSAoRMOpYnV0ICsgRHVyw6llIFRUKQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0dEVuZE1pbnMgPSBzdGRTdGFydE1pbnMgKyB0dER1cmF0aW9uOwogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0dEVuZCA9IG1pbnV0ZXNUb1RpbWUodHRFbmRNaW5zKTsKICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlcy50aW1lVFQgPSBgJHtzdGRQYXJ0cy5zdGFydH0gLSAke3R0RW5kfWA7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlID09PSAndGltZVRUJykgewogICAgICAgICAgICAgICAgICAgICAgICAvLyBDYXMgMiA6IE9uIG1vZGlmaWUgbGUgZMOpYnV0IGR1IFRUIE1BTlVFTExFTUVOVCAoVm90cmUgZGVtYW5kZSkKICAgICAgICAgICAgICAgICAgICAgICAgLy8gLT4gT24gcHJlbmQgbGUgTk9VVkVBVSBkw6lidXQgc2Fpc2kKICAgICAgICAgICAgICAgICAgICAgICAgLy8gLT4gT24gcmVjYWxjdWxlIGxhIGZpbiBwb3VyIGdhcmFudGlyIHF1ZSBsYSBkdXLDqWUgVFQgZXN0IHJlc3BlY3TDqWUKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdHROZXdTdGFydE1pbnMgPSB0aW1lVG9NaW51dGVzKG5ld1N0YXJ0KTsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdHROZXdFbmRNaW5zID0gdHROZXdTdGFydE1pbnMgKyB0dER1cmF0aW9uOwogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0dE5ld0VuZCA9IG1pbnV0ZXNUb1RpbWUodHROZXdFbmRNaW5zKTsKICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlcy50aW1lVFQgPSBgJHtuZXdTdGFydH0gLSAke3R0TmV3RW5kfWA7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIHJldHVybiB1cGRhdGVzOwogICAgICAgICAgICAgICAgfSkpOwogICAgICAgICAgICB9OwogICAgICAgICAgICAKICAgICAgICAgICAgLy8gR2VzdGlvbiBkdSBjaGFuZ2VtZW50IGRlIGRhdGUgdmlhIGNhbGVuZHJpZXIKICAgICAgICAgICAgY29uc3QgaGFuZGxlRGF0ZUNoYW5nZSA9IChpZCwgaXNvRGF0ZSkgPT4gewogICAgICAgICAgICAgICAgY29uc3QgZnJlbmNoRGF0ZSA9IGZvcm1hdERhdGVUb0ZyZW5jaFN0cmluZyhpc29EYXRlKTsKICAgICAgICAgICAgICAgIGlmIChpZCA9PT0gJ25ldycpIHsKICAgICAgICAgICAgICAgICAgICBzZXROZXdTdWJqZWN0KHsuLi5uZXdTdWJqZWN0LCBkYXRlOiBmcmVuY2hEYXRlfSk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIGhhbmRsZVVwZGF0ZVN1YmplY3QoaWQsICdkYXRlJywgZnJlbmNoRGF0ZSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH07CgogICAgICAgICAgICBjb25zdCB0cmlnZ2VyQXV0b1RUID0gKHN1YmplY3RJZCkgPT4gewogICAgICAgICAgICAgICAgc2V0U3ViamVjdHMocHJldiA9PiBwcmV2Lm1hcChzID0+IHsKICAgICAgICAgICAgICAgICAgICBpZiAocy5pZCAhPT0gc3ViamVjdElkKSByZXR1cm4gczsKICAgICAgICAgICAgICAgICAgICBjb25zdCB7IHN0YXJ0LCBlbmQgfSA9IHBhcnNlVGltZVJhbmdlKHMudGltZSk7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgYXV0b1RUID0gY2FsY3VsYXRlQXV0b1RUKHN0YXJ0LCBlbmQpOwogICAgICAgICAgICAgICAgICAgIHJldHVybiB7IC4uLnMsIHRpbWVUVDogYXV0b1RUIH07CiAgICAgICAgICAgICAgICB9KSk7CiAgICAgICAgICAgICAgICBzaG93Tm90aWZpY2F0aW9uKCJUaWVycy1UZW1wcyBjYWxjdWzDqSAoRHVyw6llIHggMS4zMykiKTsKICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIGNvbnN0IGhhbmRsZURlbGV0ZVJvb20gPSAoaWQpID0+IHsgb3Blbk1vZGFsKCJTdXBwcmVzc2lvbiIsICJWb3VsZXotdm91cyB2cmFpbWVudCBzdXBwcmltZXIgY2V0dGUgc2FsbGUgPyIsICgpID0+IHsgc2V0Um9vbXMocHJldiA9PiBwcmV2LmZpbHRlcihyID0+IHIuaWQgIT09IGlkKSk7IHNob3dOb3RpZmljYXRpb24oIlNhbGxlIHN1cHByaW3DqWUuIiwgInN1Y2Nlc3MiKTsgfSk7IH07CiAgICAgICAgICAgIAogICAgICAgICAgICBjb25zdCByZWdlbmVyYXRlQW5vbnltaXR5ID0gKCkgPT4geyAKICAgICAgICAgICAgICAgIGlmIChpc0Fub255bWl0eUxvY2tlZCkgeyAKICAgICAgICAgICAgICAgICAgICBzaG93Tm90aWZpY2F0aW9uKCJEw6l2ZXJyb3VpbGxleiBkJ2Fib3JkICEiLCAiZXJyb3IiKTsgCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOyAKICAgICAgICAgICAgICAgIH0gCiAgICAgICAgICAgICAgICBjb25zdCB5ZWFyID0gbmV3IERhdGUoKS5nZXRGdWxsWWVhcigpOyAKICAgICAgICAgICAgICAgIGNvbnN0IHVzZWRJZHMgPSBuZXcgU2V0KCk7IAogICAgICAgICAgICAgICAgY29uc3QgdXBkYXRlZFN0dWRlbnRzID0gc3R1ZGVudHMubWFwKChzKSA9PiB7IAogICAgICAgICAgICAgICAgICAgIGxldCBzdWZmaXg7IAogICAgICAgICAgICAgICAgICAgIGxldCBuZXdJZDsgCiAgICAgICAgICAgICAgICAgICAgbGV0IGF0dGVtcHRzID0gMDsgCiAgICAgICAgICAgICAgICAgICAgZG8geyAKICAgICAgICAgICAgICAgICAgICAgICAgc3VmZml4ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogOTk5KSArIDE7IAogICAgICAgICAgICAgICAgICAgICAgICBuZXdJZCA9IGBETkIke3llYXJ9JHtTdHJpbmcoc3VmZml4KS5wYWRTdGFydCgzLCAnMCcpfWA7IAogICAgICAgICAgICAgICAgICAgICAgICBhdHRlbXB0cysrOyAKICAgICAgICAgICAgICAgICAgICAgICAgaWYoYXR0ZW1wdHMgPiA1MDAwKSBicmVhazsgCiAgICAgICAgICAgICAgICAgICAgfSB3aGlsZSAodXNlZElkcy5oYXMobmV3SWQpKTsgCiAgICAgICAgICAgICAgICAgICAgdXNlZElkcy5hZGQobmV3SWQpOyAKICAgICAgICAgICAgICAgICAgICByZXR1cm4geyAuLi5zLCBhbm9ueW1vdXNJZDogbmV3SWQgfTsgCiAgICAgICAgICAgICAgICB9KTsgCiAgICAgICAgICAgICAgICBzZXRTdHVkZW50cyh1cGRhdGVkU3R1ZGVudHMpOyAKICAgICAgICAgICAgICAgIHNob3dOb3RpZmljYXRpb24oIkFub255bWF0IHLDqWfDqW7DqXLDqSAhIik7IAogICAgICAgICAgICB9OwogICAgICAgICAgICAKICAgICAgICAgICAgY29uc3QgaGFuZGxlRmlsZVVwbG9hZCA9IChlLCB0eXBlKSA9PiB7IGNvbnN0IGZpbGUgPSBlLnRhcmdldC5maWxlc1swXTsgaWYgKCFmaWxlKSByZXR1cm47IGNvbnN0IHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7IHJlYWRlci5vbmxvYWQgPSAoZXZ0KSA9PiB7IGNvbnN0IGJzdHIgPSBldnQudGFyZ2V0LnJlc3VsdDsgY29uc3Qgd2IgPSBYTFNYLnJlYWQoYnN0ciwgeyB0eXBlOiAnYmluYXJ5JyB9KTsgY29uc3Qgd3NuYW1lID0gd2IuU2hlZXROYW1lc1swXTsgY29uc3Qgd3MgPSB3Yi5TaGVldHNbd3NuYW1lXTsgY29uc3QgZGF0YSA9IFhMU1gudXRpbHMuc2hlZXRfdG9fanNvbih3cywgeyBoZWFkZXI6IDEgfSk7IGlmICh0eXBlID09PSAnc3R1ZGVudHMnKSBwcm9jZXNzU3R1ZGVudERhdGEoZGF0YSk7IGVsc2UgaWYgKHR5cGUgPT09ICdyb29tcycpIHByb2Nlc3NSb29tRGF0YShkYXRhKTsgZWxzZSBpZiAodHlwZSA9PT0gJ3RlYWNoZXJzJykgcHJvY2Vzc1RlYWNoZXJEYXRhKGRhdGEpOyB9OyByZWFkZXIucmVhZEFzQmluYXJ5U3RyaW5nKGZpbGUpOyB9OwogICAgICAgICAgICBjb25zdCBoYW5kbGVFeHBvcnQgPSAodHlwZSkgPT4geyAKICAgICAgICAgICAgICAgIGxldCBkYXRhID0gW107IAogICAgICAgICAgICAgICAgbGV0IGZpbGVuYW1lID0gIiI7IAogICAgICAgICAgICAgICAgaWYgKHR5cGUgPT09ICdzdHVkZW50cycpIHsgCiAgICAgICAgICAgICAgICAgICAgZGF0YSA9IHN0dWRlbnRzLm1hcChzID0+ICh7ICJOb20iOiBzLmxhc3RuYW1lLCAiUHLDqW5vbSI6IHMuZmlyc3RuYW1lLCAiQ2xhc3NlIjogcy5jbGFzcywgIlRpZXJzIFRlbXBzIjogcy5pc1RUID8gIk9VSSIgOiAiTk9OIiwgIkFFU0giOiBzLmFlc2ggfHwgIiIsICJJTkUiOiBzLmluZSB8fCAiIiwgIkFub255bWF0Ijogcy5hbm9ueW1vdXNJZCwgIlNhbGxlIjogcm9vbXMuZmluZChyID0+IHIuaWQgPT09IHMucm9vbUlkKT8ubmFtZSB8fCAiIiB9KSk7IAogICAgICAgICAgICAgICAgICAgIGZpbGVuYW1lID0gImV4cG9ydF9lbGV2ZXMueGxzeCI7IAogICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlID09PSAncm9vbXMnKSB7IAogICAgICAgICAgICAgICAgICAgIGRhdGEgPSByb29tcy5tYXAociA9PiAoeyAiTm9tIjogci5uYW1lLCAiQ2FwYWNpdMOpIjogci5jYXBhY2l0eSwgIk9jY3Vww6kiOiBnZXRSb29tT2NjdXBhbmN5KHIuaWQpIH0pKTsgCiAgICAgICAgICAgICAgICAgICAgZmlsZW5hbWUgPSAiZXhwb3J0X3NhbGxlcy54bHN4IjsgCiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICd0ZWFjaGVycycpIHsgCiAgICAgICAgICAgICAgICAgICAgZGF0YSA9IHRlYWNoZXJzLm1hcCh0ID0+ICh7ICJDaXZpbGl0w6kiOiB0LmNpdiwgIk5vbSI6IHQubGFzdG5hbWUsICJQcsOpbm9tIjogdC5maXJzdG5hbWUsICJEaXNjaXBsaW5lIjogdC5zdWJqZWN0IH0pKTsgCiAgICAgICAgICAgICAgICAgICAgZmlsZW5hbWUgPSAiZXhwb3J0X3Byb2Zlc3NldXJzLnhsc3giOyAKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gJ2NvcHlfbGFiZWxzJyB8fCB0eXBlID09PSAnY29weV9sYWJlbHNfc2luZ2xlJykgeyAKICAgICAgICAgICAgICAgICAgICBjb25zdCBzdWJqZWN0c1RvRXhwb3J0ID0gKHR5cGUgPT09ICdjb3B5X2xhYmVsc19zaW5nbGUnICYmIHNlbGVjdGVkQ29ycmVjdGlvblN1YmplY3QpID8gW3NlbGVjdGVkQ29ycmVjdGlvblN1YmplY3RdIDogc3ViamVjdHM7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgdmFsaWRTdHVkZW50cyA9IHN0dWRlbnRzLmZpbHRlcihzID0+IHMuYW5vbnltb3VzSWQpLnNvcnQoKGEsIGIpID0+IGEubGFzdG5hbWUubG9jYWxlQ29tcGFyZShiLmxhc3RuYW1lKSk7CiAgICAgICAgICAgICAgICAgICAgc3ViamVjdHNUb0V4cG9ydC5mb3JFYWNoKHN1YiA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHN1Yk5hbWUgPSAoc3ViLmRpc2NpcGxpbmVzICYmIHN1Yi5kaXNjaXBsaW5lcy5sZW5ndGggPiAwKSA/IGAke3N1Yi5uYW1lfSAoJHtzdWIuZGlzY2lwbGluZXMuam9pbignLScpfSlgIDogc3ViLm5hbWU7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkU3R1ZGVudHMuZm9yRWFjaChzID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEucHVzaCh7ICJOwrAgQ2FuZGlkYXQiOiBzLmluZSB8fCAiIiwgIk7CsCBBbm9ueW1hdCI6IHMuYW5vbnltb3VzSWQsICJNYXRpw6hyZSI6IHN1Yk5hbWUsICJOb20iOiBzLmxhc3RuYW1lLCAiUHLDqW5vbSI6IHMuZmlyc3RuYW1lLCAiQ2xhc3NlIjogcy5jbGFzcyB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgZmlsZW5hbWUgPSAiZXhwb3J0X2V0aXF1ZXR0ZXNfY29waWVzLnhsc3giOyAKICAgICAgICAgICAgICAgIH0gCiAgICAgICAgICAgICAgICBpZiAoZGF0YS5sZW5ndGggPiAwKSB7IAogICAgICAgICAgICAgICAgICAgIGNvbnN0IHdzID0gWExTWC51dGlscy5qc29uX3RvX3NoZWV0KGRhdGEpOyAKICAgICAgICAgICAgICAgICAgICBjb25zdCB3YiA9IFhMU1gudXRpbHMuYm9va19uZXcoKTsgCiAgICAgICAgICAgICAgICAgICAgWExTWC51dGlscy5ib29rX2FwcGVuZF9zaGVldCh3Yiwgd3MsICJEb25uw6llcyIpOyAKICAgICAgICAgICAgICAgICAgICBYTFNYLndyaXRlRmlsZSh3YiwgZmlsZW5hbWUpOyAKICAgICAgICAgICAgICAgICAgICBzaG93Tm90aWZpY2F0aW9uKCJFeHBvcnQgdGVybWluw6kgISIpOyAKICAgICAgICAgICAgICAgIH0gCiAgICAgICAgICAgIH07CiAgICAgICAgICAgIGNvbnN0IHByb2Nlc3NTdHVkZW50RGF0YSA9IChyb3dzKSA9PiB7IGNvbnN0IG5ld1N0dWRlbnRzID0gW107IGNvbnN0IGhlYWRlcnMgPSByb3dzWzBdLm1hcChoID0+IFN0cmluZyhoKS50b0xvd2VyQ2FzZSgpKTsgY29uc3QgaWR4Tm9tID0gaGVhZGVycy5maW5kSW5kZXgoaCA9PiBoLmluY2x1ZGVzKCdub20nKSk7IGNvbnN0IGlkeFByZW5vbSA9IGhlYWRlcnMuZmluZEluZGV4KGggPT4gaC5pbmNsdWRlcygncHLDqW5vbScpIHx8IGguaW5jbHVkZXMoJ3ByZW5vbScpKTsgY29uc3QgaWR4Q2xhc3NlID0gaGVhZGVycy5maW5kSW5kZXgoaCA9PiBoLmluY2x1ZGVzKCdjbGFzc2UnKSB8fCBoLmluY2x1ZGVzKCdkaXYnKSk7IGNvbnN0IGlkeFRUID0gaGVhZGVycy5maW5kSW5kZXgoaCA9PiBoLmluY2x1ZGVzKCd0dCcpIHx8IGguaW5jbHVkZXMoJ2ViZXAnKSB8fCBoLmluY2x1ZGVzKCd0aWVycycpKTsgY29uc3QgaWR4SW5lID0gaGVhZGVycy5maW5kSW5kZXgoaCA9PiBoLmluY2x1ZGVzKCdpbmUnKSB8fCBoLmluY2x1ZGVzKCdudW1lcm8nKSk7IGNvbnN0IGlkeEFlc2ggPSBoZWFkZXJzLmZpbmRJbmRleChoID0+IGguaW5jbHVkZXMoJ2Flc2gnKSB8fCBoLmluY2x1ZGVzKCdhdnMnKSk7IGlmIChpZHhOb20gPT09IC0xKSByZXR1cm47IGNvbnN0IGN1cnJlbnRZZWFyID0gbmV3IERhdGUoKS5nZXRGdWxsWWVhcigpOyBjb25zdCB1c2VkSWRzID0gbmV3IFNldCgpOyBmb3IgKGxldCBpID0gMTsgaSA8IHJvd3MubGVuZ3RoOyBpKyspIHsgY29uc3Qgcm93ID0gcm93c1tpXTsgaWYgKHJvd1tpZHhOb21dKSB7IGxldCBzdWZmaXgsIGFub255bUlkOyBkbyB7IHN1ZmZpeCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDk5OSkgKyAxOyBhbm9ueW1JZCA9IGBETkIke2N1cnJlbnRZZWFyfSR7U3RyaW5nKHN1ZmZpeCkucGFkU3RhcnQoMywgJzAnKX1gOyB9IHdoaWxlICh1c2VkSWRzLmhhcyhhbm9ueW1JZCkpOyB1c2VkSWRzLmFkZChhbm9ueW1JZCk7IG5ld1N0dWRlbnRzLnB1c2goeyBpZDogaSwgbGFzdG5hbWU6IHJvd1tpZHhOb21dLCBmaXJzdG5hbWU6IHJvd1tpZHhQcmVub21dIHx8ICcnLCBjbGFzczogcm93W2lkeENsYXNzZV0gfHwgJzPDqG1lJywgaXNUVDogaWR4VFQgPiAtMSA/ICghIXJvd1tpZHhUVF0pIDogZmFsc2UsIGFub255bW91c0lkOiBhbm9ueW1JZCwgcm9vbUlkOiBudWxsLCBpbmU6IGlkeEluZSA+IC0xID8gcm93W2lkeEluZV0gOiAnJywgYWVzaDogaWR4QWVzaCA+IC0xID8gcm93W2lkeEFlc2hdIDogJycgfSk7IH0gfSBuZXdTdHVkZW50cy5zb3J0KChhLCBiKSA9PiBhLmxhc3RuYW1lLmxvY2FsZUNvbXBhcmUoYi5sYXN0bmFtZSkpOyBzZXRTdHVkZW50cyhuZXdTdHVkZW50cyk7IHNob3dOb3RpZmljYXRpb24oYCR7bmV3U3R1ZGVudHMubGVuZ3RofSDDqWzDqHZlcyBpbXBvcnTDqXMuYCk7IH07CiAgICAgICAgICAgIGNvbnN0IHByb2Nlc3NSb29tRGF0YSA9IChyb3dzKSA9PiB7IGNvbnN0IG5ld1Jvb21zID0gW107IGZvciAobGV0IGkgPSAxOyBpIDwgcm93cy5sZW5ndGg7IGkrKykgeyBjb25zdCByb3cgPSByb3dzW2ldOyBpZiAocm93WzBdKSBuZXdSb29tcy5wdXNoKHsgaWQ6IGByb29tLSR7aX1gLCBuYW1lOiByb3dbMF0sIGNhcGFjaXR5OiBwYXJzZUludChyb3dbMV0pIHx8IDIwLCBhc3NpZ25lZENvdW50OiAwLCB0eXBlOiAnc3RhbmRhcmQnIH0pOyB9IHNldFJvb21zKG5ld1Jvb21zKTsgc2hvd05vdGlmaWNhdGlvbihgJHtuZXdSb29tcy5sZW5ndGh9IHNhbGxlcyBpbXBvcnTDqWVzLmApOyB9OwogICAgICAgICAgICBjb25zdCBwcm9jZXNzVGVhY2hlckRhdGEgPSAocm93cykgPT4geyBjb25zdCBuZXdUZWFjaGVycyA9IFtdOyBjb25zdCBoZWFkZXJzID0gcm93c1swXS5tYXAoaCA9PiBTdHJpbmcoaCkudG9Mb3dlckNhc2UoKSk7IGNvbnN0IGlkeE5vbSA9IGhlYWRlcnMuZmluZEluZGV4KGggPT4gaC5pbmNsdWRlcygnbm9tJykpOyBjb25zdCBpZHhQcmVub20gPSBoZWFkZXJzLmZpbmRJbmRleChoID0+IGguaW5jbHVkZXMoJ3Byw6lub20nKSk7IGNvbnN0IGlkeENpdiA9IGhlYWRlcnMuZmluZEluZGV4KGggPT4gaC5pbmNsdWRlcygnY2l2JykpOyBjb25zdCBpZHhEaXNjID0gaGVhZGVycy5maW5kSW5kZXgoaCA9PiBoLmluY2x1ZGVzKCdkaXNjaXBsaW5lJykpOyBpZiAoaWR4Tm9tID09PSAtMSkgcmV0dXJuOyBmb3IgKGxldCBpID0gMTsgaSA8IHJvd3MubGVuZ3RoOyBpKyspIHsgY29uc3Qgcm93ID0gcm93c1tpXTsgaWYgKHJvd1tpZHhOb21dKSBuZXdUZWFjaGVycy5wdXNoKHsgaWQ6IGBwcm9mLSR7aX1gLCBjaXY6IGlkeENpdiA+IC0xID8gcm93W2lkeENpdl0gOiAnJywgbGFzdG5hbWU6IHJvd1tpZHhOb21dLCBmaXJzdG5hbWU6IGlkeFByZW5vbSA+IC0xID8gcm93W2lkeFByZW5vbV0gOiAnJywgc3ViamVjdDogaWR4RGlzYyA+IC0xID8gcm93W2lkeERpc2NdIDogJ05vbiBkw6lmaW5pJyB9KTsgfSBzZXRUZWFjaGVycyhuZXdUZWFjaGVycyk7IHNob3dOb3RpZmljYXRpb24oYCR7bmV3VGVhY2hlcnMubGVuZ3RofSBwcm9mZXNzZXVycyBpbXBvcnTDqXMuYCk7IH07CgogICAgICAgICAgICBjb25zdCBoYW5kbGVEcmFnU3RhcnQgPSAoZSwgc3R1ZGVudElkKSA9PiB7IHNldERyYWdnZWRTdHVkZW50SWQoc3R1ZGVudElkKTsgZS5kYXRhVHJhbnNmZXIuZWZmZWN0QWxsb3dlZCA9ICJtb3ZlIjsgfTsKICAgICAgICAgICAgY29uc3QgaGFuZGxlRHJhZ092ZXIgPSAoZSkgPT4geyBlLnByZXZlbnREZWZhdWx0KCk7IGUuY3VycmVudFRhcmdldC5jbGFzc0xpc3QuYWRkKCdkcmFnLW92ZXInKTsgfTsKICAgICAgICAgICAgY29uc3QgaGFuZGxlRHJhZ0xlYXZlID0gKGUpID0+IHsgZS5jdXJyZW50VGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ2RyYWctb3ZlcicpOyB9OwogICAgICAgICAgICBjb25zdCBoYW5kbGVEcm9wID0gKGUsIHJvb21JZCkgPT4geyBlLnByZXZlbnREZWZhdWx0KCk7IGUuY3VycmVudFRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKCdkcmFnLW92ZXInKTsgaWYgKGRyYWdnZWRTdHVkZW50SWQgIT09IG51bGwpIHsgaGFuZGxlTWFudWFsQXNzaWduKGRyYWdnZWRTdHVkZW50SWQsIHJvb21JZCk7IHNldERyYWdnZWRTdHVkZW50SWQobnVsbCk7IH0gfTsKICAgICAgICAgICAgY29uc3QgZXhlY3V0ZUFzc2lnbm1lbnQgPSAoc3R1ZGVudElkLCB0YXJnZXRSb29tSWQpID0+IHsgc2V0U3R1ZGVudHMocHJldiA9PiBwcmV2Lm1hcChzID0+IHMuaWQgPT09IHN0dWRlbnRJZCA/IHsgLi4ucywgcm9vbUlkOiB0YXJnZXRSb29tSWQgfSA6IHMpKTsgfTsKICAgICAgICAgICAgY29uc3QgaGFuZGxlTWFudWFsQXNzaWduID0gKHN0dWRlbnRJZCwgcm9vbUlkKSA9PiB7IGNvbnN0IHRhcmdldFJvb21JZCA9IHJvb21JZCA9PT0gIiIgPyBudWxsIDogcm9vbUlkOyBpZiAodGFyZ2V0Um9vbUlkKSB7IGNvbnN0IHJvb20gPSByb29tcy5maW5kKHIgPT4gci5pZCA9PT0gdGFyZ2V0Um9vbUlkKTsgY29uc3QgY3VycmVudE9jY3VwYW5jeSA9IGdldFJvb21PY2N1cGFuY3kodGFyZ2V0Um9vbUlkKTsgY29uc3Qgc3R1ZGVudCA9IHN0dWRlbnRzLmZpbmQocyA9PiBzLmlkID09PSBzdHVkZW50SWQpOyBpZiAoY3VycmVudE9jY3VwYW5jeSA+PSByb29tLmNhcGFjaXR5ICYmIHN0dWRlbnQucm9vbUlkICE9PSB0YXJnZXRSb29tSWQpIHsgb3Blbk1vZGFsKCJDYXBhY2l0w6kgZMOpcGFzc8OpZSIsIGBMYSBzYWxsZSAke3Jvb20ubmFtZX0gZXN0IHBsZWluZS4gQWpvdXRlciBxdWFuZCBtw6ptZSA/YCwgKCkgPT4gZXhlY3V0ZUFzc2lnbm1lbnQoc3R1ZGVudElkLCB0YXJnZXRSb29tSWQpKTsgcmV0dXJuOyB9IH0gZXhlY3V0ZUFzc2lnbm1lbnQoc3R1ZGVudElkLCB0YXJnZXRSb29tSWQpOyB9OwogICAgICAgICAgICBjb25zdCBkaXN0cmlidXRlU3R1ZGVudHMgPSAoKSA9PiB7IGlmIChzdHVkZW50cy5sZW5ndGggPT09IDAgfHwgcm9vbXMubGVuZ3RoID09PSAwKSB7IHNob3dOb3RpZmljYXRpb24oIkRvbm7DqWVzIG1hbnF1YW50ZXMuIiwgImVycm9yIik7IHJldHVybjsgfSBjb25zdCBuZXdTdHVkZW50cyA9IHN0dWRlbnRzLm1hcChzID0+ICh7IC4uLnMsIHJvb21JZDogbnVsbCB9KSk7IGNvbnN0IHNvcnRlZFJvb21zID0gWy4uLnJvb21zXS5zb3J0KChhLCBiKSA9PiBhLmNhcGFjaXR5IC0gYi5jYXBhY2l0eSk7IGNvbnN0IHR0U3R1ZGVudHMgPSBuZXdTdHVkZW50cy5maWx0ZXIocyA9PiBzLmlzVFQpOyBjb25zdCBzdGRTdHVkZW50cyA9IG5ld1N0dWRlbnRzLmZpbHRlcihzID0+ICFzLmlzVFQpOyBjb25zdCBmaWxsID0gKGdyb3VwLCByTGlzdCkgPT4geyBsZXQgaWR4ID0gMDsgZ3JvdXAuZm9yRWFjaChzID0+IHsgbGV0IHBsYWNlZCA9IGZhbHNlOyB3aGlsZSAoIXBsYWNlZCAmJiBpZHggPCByTGlzdC5sZW5ndGgpIHsgY29uc3QgciA9IHJMaXN0W2lkeCAlIHJMaXN0Lmxlbmd0aF07IGlmIChuZXdTdHVkZW50cy5maWx0ZXIoc3QgPT4gc3Qucm9vbUlkID09PSByLmlkKS5sZW5ndGggPCByLmNhcGFjaXR5KSB7IGNvbnN0IHNpID0gbmV3U3R1ZGVudHMuZmluZEluZGV4KHggPT4geC5pZCA9PT0gcy5pZCk7IG5ld1N0dWRlbnRzW3NpXS5yb29tSWQgPSByLmlkOyBwbGFjZWQgPSB0cnVlOyB9IGVsc2UgeyBpZHgrKzsgfSB9IH0pOyB9OyBmaWxsKHR0U3R1ZGVudHMsIHNvcnRlZFJvb21zKTsgZmlsbChzdGRTdHVkZW50cywgWy4uLnJvb21zXS5zb3J0KChhLCBiKSA9PiBiLmNhcGFjaXR5IC0gYS5jYXBhY2l0eSkpOyBzZXRTdHVkZW50cyhuZXdTdHVkZW50cyk7IHNob3dOb3RpZmljYXRpb24oIlLDqXBhcnRpdGlvbiB0ZXJtaW7DqWUuIik7IH07CiAgICAgICAgICAgIGNvbnN0IHJlc2V0RGlzdHJpYnV0aW9uID0gKCkgPT4geyBvcGVuTW9kYWwoIlLDqWluaXRpYWxpc2F0aW9uIiwgIlZpZGVyIGxlcyBzYWxsZXMgPyIsICgpID0+IHsgc2V0U3R1ZGVudHMocHJldiA9PiBwcmV2Lm1hcChzID0+ICh7IC4uLnMsIHJvb21JZDogbnVsbCB9KSkpOyBzaG93Tm90aWZpY2F0aW9uKCJTYWxsZXMgdmlkw6llcyAhIik7IH0pOyB9OwogICAgICAgICAgICAKICAgICAgICAgICAgY29uc3QgaGFuZGxlU2F2ZVdvcmsgPSAoKSA9PiB7CiAgICAgICAgICAgICAgICBjb25zdCBkZWZhdWx0TmFtZSA9IGBkbmJfYmFja3VwX3YxMV8ke25ldyBEYXRlKCkudG9JU09TdHJpbmcoKS5zbGljZSgwLDEwKX1gOwogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBzZXRJbnB1dE1vZGFsQ29uZmlnKHsKICAgICAgICAgICAgICAgICAgICBpc09wZW46IHRydWUsCiAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICJTYXV2ZWdhcmRlciBsYSBzZXNzaW9uIiwKICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAiTm9tbWV6IHZvdHJlIGZpY2hpZXIgZGUgc2F1dmVnYXJkZSAoZXg6IGFwcmVzX3JlcGFydGl0aW9uLCBmaW5hbCwgZXRjLikgOiIsCiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlOiBkZWZhdWx0TmFtZSwKICAgICAgICAgICAgICAgICAgICBvbkNvbmZpcm06IChmaWxlTmFtZSkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBmaW5hbE5hbWUgPSBmaWxlTmFtZS50cmltKCkgPyAoZmlsZU5hbWUuZW5kc1dpdGgoJy5qc29uJykgPyBmaWxlTmFtZSA6IGAke2ZpbGVOYW1lfS5qc29uYCkgOiBgJHtkZWZhdWx0TmFtZX0uanNvbmA7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGRhdGEgPSB7IAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmVyc2lvbjogQVBQX1ZFUlNJT04sIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2Nob29sQ29uZmlnLCAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvb21zLCAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0dWRlbnRzLCAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlYWNoZXJzLCAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1YmplY3RzLCAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlYWNoZXJBc3NpZ25tZW50cywgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdXJ2ZWlsbGFuY2VBc3NpZ25tZW50cywgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWNyZXRhcmlhdEFzc2lnbm1lbnRzLCAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1cnZlaWxsYW5jZU1vZGUsIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jVGVtcGxhdGVzLCAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzQW5vbnltaXR5TG9ja2VkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkgCiAgICAgICAgICAgICAgICAgICAgICAgIH07IAogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBibG9iID0gbmV3IEJsb2IoW0pTT04uc3RyaW5naWZ5KGRhdGEsIG51bGwsIDIpXSwgeyB0eXBlOiAiYXBwbGljYXRpb24vanNvbiIgfSk7IAogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBsaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpOyAKICAgICAgICAgICAgICAgICAgICAgICAgbGluay5ocmVmID0gVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTsgCiAgICAgICAgICAgICAgICAgICAgICAgIGxpbmsuZG93bmxvYWQgPSBmaW5hbE5hbWU7IAogICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGxpbmspOyAKICAgICAgICAgICAgICAgICAgICAgICAgbGluay5jbGljaygpOyAKICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChsaW5rKTsgCiAgICAgICAgICAgICAgICAgICAgICAgIHNob3dOb3RpZmljYXRpb24oYFNhdXZlZ2FyZMOpIHNvdXMgOiAke2ZpbmFsTmFtZX1gLCAic3VjY2VzcyIpOwogICAgICAgICAgICAgICAgICAgICAgICBjbG9zZUlucHV0TW9kYWwoKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIGNvbnN0IGhhbmRsZUxvYWRXb3JrID0gKGUpID0+IHsgCiAgICAgICAgICAgICAgICBjb25zdCBmaWxlID0gZS50YXJnZXQuZmlsZXNbMF07IAogICAgICAgICAgICAgICAgaWYgKCFmaWxlKSByZXR1cm47IAogICAgICAgICAgICAgICAgY29uc3QgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTsgCiAgICAgICAgICAgICAgICByZWFkZXIub25sb2FkID0gKGV2dCkgPT4geyAKICAgICAgICAgICAgICAgICAgICB0cnkgeyAKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZGF0YSA9IEpTT04ucGFyc2UoZXZ0LnRhcmdldC5yZXN1bHQpOyAKICAgICAgICAgICAgICAgICAgICAgICAgbG9hZERhdGEoZGF0YSwgIkZpY2hpZXIiKTsgCiAgICAgICAgICAgICAgICAgICAgICAgIHNob3dOb3RpZmljYXRpb24oIkRvbm7DqWVzIHJlc3RhdXLDqWVzIGF2ZWMgc3VjY8OocyAhIik7IAogICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycikgeyAKICAgICAgICAgICAgICAgICAgICAgICAgc2hvd05vdGlmaWNhdGlvbigiRXJyZXVyIGxlY3R1cmUgZmljaGllciIsICJlcnJvciIpOyAKICAgICAgICAgICAgICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICAgICAgICAgICAgICAvLyBSZXNldCBpbnB1dCB0byBhbGxvdyByZWxvYWRpbmcgc2FtZSBmaWxlCiAgICAgICAgICAgICAgICAgICAgICAgIGUudGFyZ2V0LnZhbHVlID0gJyc7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfTsgCiAgICAgICAgICAgICAgICByZWFkZXIucmVhZEFzVGV4dChmaWxlKTsgCiAgICAgICAgICAgIH07CgogICAgICAgICAgICAvLyAtLS0gR0VORVJBVEUgUERGIE1PRElGScOJIFBPVVIgVVRJTElTRVIgTEVTIFRFTVBMQVRFUyAtLS0KICAgICAgICAgICAgY29uc3QgZ2VuZXJhdGVQREYgPSAoZG9jVHlwZSkgPT4gewogICAgICAgICAgICAgICAgY29uc3QgeyBqc1BERiB9ID0gd2luZG93LmpzcGRmOwogICAgICAgICAgICAgICAgY29uc3QgZG9jID0gbmV3IGpzUERGKCk7CiAgICAgICAgICAgICAgICBjb25zdCBwYWdlV2lkdGggPSBkb2MuaW50ZXJuYWwucGFnZVNpemUud2lkdGg7CiAgICAgICAgICAgICAgICBjb25zdCBwYWdlSGVpZ2h0ID0gZG9jLmludGVybmFsLnBhZ2VTaXplLmhlaWdodDsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgLy8gSGVscGVyIGRpbWVuc2lvbnMgY2FjaGV0IChNYXggNTB4MjVtbSAtIFJhdGlvIGNvbnNlcnbDqSkKICAgICAgICAgICAgICAgIGNvbnN0IGdldFN0YW1wRGltcyA9ICgpID0+IHsKICAgICAgICAgICAgICAgICAgICBpZiAoIXNjaG9vbENvbmZpZy5zdGFtcFVybCkgcmV0dXJuIG51bGw7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgTUFYX1cgPSA1MCwgTUFYX0ggPSAyNTsKICAgICAgICAgICAgICAgICAgICBjb25zdCByID0gc2Nob29sQ29uZmlnLnN0YW1wUmF0aW8gfHwgMTsKICAgICAgICAgICAgICAgICAgICBsZXQgdyA9IDI1LCBoID0gMjU7CiAgICAgICAgICAgICAgICAgICAgaWYgKHIgPiAoTUFYX1cgLyBNQVhfSCkpIHsgdyA9IE1BWF9XOyBoID0gTUFYX1cgLyByOyB9IAogICAgICAgICAgICAgICAgICAgIGVsc2UgeyBoID0gTUFYX0g7IHcgPSBNQVhfSCAqIHI7IH0KICAgICAgICAgICAgICAgICAgICByZXR1cm4geyB3LCBoIH07CiAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgIC8vIEhlbHBlciBkaW1lbnNpb25zIExvZ28gKEV2aXRlIGTDqWZvcm1hdGlvbikKICAgICAgICAgICAgICAgIGNvbnN0IGdldExvZ29EaW1zID0gKG1heFcsIG1heEgpID0+IHsKICAgICAgICAgICAgICAgICAgICBpZiAoIXNjaG9vbENvbmZpZy5sb2dvVXJsKSByZXR1cm4gbnVsbDsKICAgICAgICAgICAgICAgICAgICBjb25zdCByYXRpbyA9IHNjaG9vbENvbmZpZy5sb2dvUmF0aW8gfHwgMTsKICAgICAgICAgICAgICAgICAgICBsZXQgdyA9IG1heFc7CiAgICAgICAgICAgICAgICAgICAgbGV0IGggPSB3IC8gcmF0aW87CiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgLy8gU2kgbGEgaGF1dGV1ciBjYWxjdWzDqWUgZMOpcGFzc2UgbGUgbWF4LCBvbiBmaXhlIGxhIGhhdXRldXIgZXQgcmVjYWxjdWxlIGxhIGxhcmdldXIKICAgICAgICAgICAgICAgICAgICBpZiAoaCA+IG1heEgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaCA9IG1heEg7CiAgICAgICAgICAgICAgICAgICAgICAgIHcgPSBoICogcmF0aW87CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHJldHVybiB7IHcsIGggfTsKICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgY29uc3QgYWRkSGVhZGVyID0gKHRpdGxlLCBzdWJ0aXRsZSA9ICIiKSA9PiB7IAogICAgICAgICAgICAgICAgICAgIC8vIEFqb3V0IGxvZ28gc2FucyBkw6lmb3JtYXRpb24KICAgICAgICAgICAgICAgICAgICBpZiAoc2Nob29sQ29uZmlnLmxvZ29VcmwpIHsgCiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7IAogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbG9nbyA9IGdldExvZ29EaW1zKDIwLCAyMCk7IC8vIEJvaXRlIG1heCAyMHgyMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmFkZEltYWdlKHNjaG9vbENvbmZpZy5sb2dvVXJsLCAnSlBFRycsIDEwLCAxMCwgbG9nby53LCBsb2dvLmgpOyAKICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaChlKSB7fSAKICAgICAgICAgICAgICAgICAgICB9IAogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIGRvYy5zZXRGb250U2l6ZSgxMCk7IGRvYy50ZXh0KHNjaG9vbENvbmZpZy5uYW1lLCAzNSwgMTUpOyBkb2Muc2V0Rm9udFNpemUoOSk7IGRvYy50ZXh0KHNjaG9vbENvbmZpZy5jaXR5LCAzNSwgMjApOyBkb2Muc2V0Rm9udFNpemUoMTQpOyBkb2Muc2V0Rm9udCgiaGVsdmV0aWNhIiwgImJvbGQiKTsgZG9jLnRleHQoKHNjaG9vbENvbmZpZy5zZXNzaW9uTmFtZSB8fCAiU0VTU0lPTiAyMDI1IikudG9VcHBlckNhc2UoKSwgcGFnZVdpZHRoIC8gMiwgMzIsIHsgYWxpZ246ICdjZW50ZXInIH0pOyBkb2Muc2V0Rm9udFNpemUoMTQpOyBkb2Muc2V0Rm9udCgiaGVsdmV0aWNhIiwgIm5vcm1hbCIpOyBkb2MudGV4dCh0aXRsZSwgcGFnZVdpZHRoIC8gMiwgNDAsIHsgYWxpZ246ICdjZW50ZXInIH0pOyBpZiAoc3VidGl0bGUpIHsgZG9jLnNldEZvbnRTaXplKDExKTsgZG9jLnRleHQoc3VidGl0bGUsIHBhZ2VXaWR0aCAvIDIsIDQ2LCB7IGFsaWduOiAnY2VudGVyJyB9KTsgfSBkb2Muc2V0TGluZVdpZHRoKDAuNSk7IGRvYy5saW5lKDEwLCA1MCwgcGFnZVdpZHRoIC0gMTAsIDUwKTsgcmV0dXJuIDYwOyAKICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgLy8gLS0tIEhFTFBFUiA6IEVOQ0FEUsOJIERFU1RJTkFUQUlSRSBVTklGScOJIC0tLQogICAgICAgICAgICAgICAgY29uc3QgYWRkUmVjaXBpZW50Qm94ID0gKGxpbmVzLCB5UG9zLCBpc1RUID0gZmFsc2UpID0+IHsKICAgICAgICAgICAgICAgICAgICBkb2Muc2V0RHJhd0NvbG9yKDApOyAKICAgICAgICAgICAgICAgICAgICBkb2Muc2V0TGluZVdpZHRoKDAuMSk7IAogICAgICAgICAgICAgICAgICAgIGRvYy5zZXRGaWxsQ29sb3IoMjUwLCAyNTAsIDI1MCk7IC8vIEdyaXMgdHLDqHMgbMOpZ2VyCiAgICAgICAgICAgICAgICAgICAgZG9jLnJvdW5kZWRSZWN0KDE1LCB5UG9zLCBwYWdlV2lkdGggLSAzMCwgMjYsIDMsIDMsICdGJyk7IC8vIE9wdGltaXNhdGlvbjogQm9pdGUgcGx1cyBjb21wYWN0ZSAoMjYgYXUgbGlldSBkZSAzMikKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICBkb2Muc2V0Rm9udFNpemUoMTIpOyAKICAgICAgICAgICAgICAgICAgICBkb2Muc2V0Rm9udCgiaGVsdmV0aWNhIiwgImJvbGQiKTsgCiAgICAgICAgICAgICAgICAgICAgZG9jLnRleHQobGluZXNbMF0gfHwgIiIsIDI1LCB5UG9zICsgOCk7IC8vIEFqdXN0ZW1lbnQgWQogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIGRvYy5zZXRGb250U2l6ZSgxMSk7IAogICAgICAgICAgICAgICAgICAgIGRvYy5zZXRGb250KCJoZWx2ZXRpY2EiLCAibm9ybWFsIik7IAogICAgICAgICAgICAgICAgICAgIGlmIChsaW5lc1sxXSkgZG9jLnRleHQobGluZXNbMV0sIDI1LCB5UG9zICsgMTUpOyAvLyBBanVzdGVtZW50IFkKICAgICAgICAgICAgICAgICAgICBpZiAobGluZXNbMl0pIGRvYy50ZXh0KGxpbmVzWzJdLCAyNSwgeVBvcyArIDIyKTsgLy8gQWp1c3RlbWVudCBZCgogICAgICAgICAgICAgICAgICAgIGlmIChpc1RUKSB7IAogICAgICAgICAgICAgICAgICAgICAgICBkb2Muc2V0VGV4dENvbG9yKDIyMCwgMzgsIDM4KTsgCiAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5zZXRGb250KCJoZWx2ZXRpY2EiLCAiYm9sZCIpOyAKICAgICAgICAgICAgICAgICAgICAgICAgZG9jLnRleHQoIkFNw4lOQUdFTUVOVCA6IFRJRVJTIFRFTVBTIEFDQ09SRMOJIiwgMTEwLCB5UG9zICsgOCk7IAogICAgICAgICAgICAgICAgICAgICAgICBkb2Muc2V0VGV4dENvbG9yKDApOyAKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHlQb3MgKyAzMjsgLy8gTm91dmVsbGUgWSBhcHLDqHMgbGEgYm9pdGUgcsOpZHVpdGUKICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgLy8gLS0tIEhFTFBFUiA6IFNJR05BVFVSRSBCQVMgREUgUEFHRSAtLS0KICAgICAgICAgICAgICAgIGNvbnN0IGFkZFNpZ25hdHVyZUJvdHRvbSA9IChjdXJyZW50WSkgPT4gewogICAgICAgICAgICAgICAgICAgIC8vIFBvc2l0aW9uIGNpYmxlIDogUmVtb250w6llIHBvdXIgw6l2aXRlciBsYSBjb3VwdXJlIHRlY2huaXF1ZSBkZSBsJ2ltcHJpbWFudGUgKDU1bW0gZHUgYmFzIGF1IGxpZXUgZGUgNDVtbSkKICAgICAgICAgICAgICAgICAgICBjb25zdCB0YXJnZXRZID0gcGFnZUhlaWdodCAtIDU1OwogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIC8vIFNpIGxlIGNvbnRlbnUgYWN0dWVsIGTDqXBhc3NlIGxhIHpvbmUgZGUgc2lnbmF0dXJlLCBvbiBham91dGUgdW5lIHBhZ2UKICAgICAgICAgICAgICAgICAgICBsZXQgc2lnblkgPSB0YXJnZXRZOwogICAgICAgICAgICAgICAgICAgIGlmIChjdXJyZW50WSA+IHRhcmdldFkgLSAxMCkgewogICAgICAgICAgICAgICAgICAgICAgICBkb2MuYWRkUGFnZSgpOwogICAgICAgICAgICAgICAgICAgICAgICAvLyBTdXIgbm91dmVsbGUgcGFnZSwgbGEgc2lnbmF0dXJlIHJlc3RlIGVuIGJhcwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgY29uc3QgZGF0ZVN0ciA9IG5ldyBEYXRlKCkudG9Mb2NhbGVEYXRlU3RyaW5nKCdmci1GUicpOwogICAgICAgICAgICAgICAgICAgIGRvYy5zZXRGb250U2l6ZSgxMSk7IAogICAgICAgICAgICAgICAgICAgIGRvYy5zZXRGb250KCJoZWx2ZXRpY2EiLCAibm9ybWFsIik7CiAgICAgICAgICAgICAgICAgICAgZG9jLnRleHQoYEZhaXQgw6AgJHtzY2hvb2xDb25maWcuY2l0eSB8fCAnLi4uLi4uLi4uLi4uLi4nfSwgbGUgJHtkYXRlU3RyfWAsIDExMCwgc2lnblkpOwogICAgICAgICAgICAgICAgICAgIGRvYy50ZXh0KCJMZSBDaGVmIGQnw6l0YWJsaXNzZW1lbnQsIiwgMTEwLCBzaWduWSArIDYpOyAKICAgICAgICAgICAgICAgICAgICBkb2Muc2V0Rm9udCgiaGVsdmV0aWNhIiwgImJvbGQiKTsKICAgICAgICAgICAgICAgICAgICBkb2MudGV4dChzY2hvb2xDb25maWcucHJpbmNpcGFsLCAxMTAsIHNpZ25ZICsgMTQpOyAKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAvLyBDYWNoZXQKICAgICAgICAgICAgICAgICAgICBjb25zdCBzdGFtcCA9IGdldFN0YW1wRGltcygpOwogICAgICAgICAgICAgICAgICAgIGlmIChzdGFtcCkgeyAKICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHsgZG9jLmFkZEltYWdlKHNjaG9vbENvbmZpZy5zdGFtcFVybCwgJ0pQRUcnLCAxMjAsIHNpZ25ZICsgMTYsIHN0YW1wLncsIHN0YW1wLmgpOyB9IGNhdGNoIChlKSB7fSAKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgIGlmIChkb2NUeXBlID09PSAnY29udm9jYXRpb25zX3NlY3JldGFyaWF0JykgewogICAgICAgICAgICAgICAgICAgIC8vIC0tLSBDT05WT0NBVElPTlMgU0VDUkVUQVJJQVQgLS0tCiAgICAgICAgICAgICAgICAgICAgY29uc3QgdHBsID0gZG9jVGVtcGxhdGVzLnNlY3JldGFyaWF0OwogICAgICAgICAgICAgICAgICAgIGNvbnN0IGFzc2lnbm1lbnRzQnlUZWFjaGVyID0ge307IAogICAgICAgICAgICAgICAgICAgIHN1YmplY3RzLmZvckVhY2goc3ViID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYXNzaWduID0gc2VjcmV0YXJpYXRBc3NpZ25tZW50c1tzdWIuaWRdOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoYXNzaWduICYmIGFzc2lnbi50ZWFjaGVySWRzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhc3NpZ24udGVhY2hlcklkcy5mb3JFYWNoKHRpZCA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFhc3NpZ25tZW50c0J5VGVhY2hlclt0aWRdKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHQgPSB0ZWFjaGVycy5maW5kKHRlYSA9PiB0ZWEuaWQgPT09IHRpZCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0KSBhc3NpZ25tZW50c0J5VGVhY2hlclt0aWRdID0geyBpbmZvOiB0LCBtaXNzaW9uczogW10gfTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFzc2lnbm1lbnRzQnlUZWFjaGVyW3RpZF0pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgcm9vbU5hbWUgPSByb29tcy5maW5kKHIgPT4gci5pZCA9PT0gYXNzaWduLnJvb21JZCk/Lm5hbWUgfHwgIk5vbiBkw6lmaW5pZSI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzc2lnbm1lbnRzQnlUZWFjaGVyW3RpZF0ubWlzc2lvbnMucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRlOiBzdWIuZGF0ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1YmplY3Q6IHN1Yi5uYW1lLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcm9vbTogcm9vbU5hbWUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgICAgY29uc3QgdElkcyA9IE9iamVjdC5rZXlzKGFzc2lnbm1lbnRzQnlUZWFjaGVyKS5zb3J0KChhLGIpID0+IGFzc2lnbm1lbnRzQnlUZWFjaGVyW2FdLmluZm8ubGFzdG5hbWUubG9jYWxlQ29tcGFyZShhc3NpZ25tZW50c0J5VGVhY2hlcltiXS5pbmZvLmxhc3RuYW1lKSk7CiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgaWYgKHRJZHMubGVuZ3RoID09PSAwKSB7IHNob3dOb3RpZmljYXRpb24oIkF1Y3VuIHBlcnNvbm5lbCBhZmZlY3TDqSBhdSBzZWNyw6l0YXJpYXQuIiwgImVycm9yIik7IHJldHVybjsgfQoKICAgICAgICAgICAgICAgICAgICB0SWRzLmZvckVhY2goKHRpZCwgaWR4KSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpZHggPiAwKSBkb2MuYWRkUGFnZSgpOwogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkYXRhID0gYXNzaWdubWVudHNCeVRlYWNoZXJbdGlkXTsKICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHkgPSBhZGRIZWFkZXIodHBsLnRpdGxlLCB0cGwuc3VidGl0bGUpOwogICAgICAgICAgICAgICAgICAgICAgICB5IC09IDU7IC8vIEFqdXN0ZW1lbnQKCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFV0aWxpc2F0aW9uIEJvaXRlIFVuaWZpw6llCiAgICAgICAgICAgICAgICAgICAgICAgIHkgPSBhZGRSZWNpcGllbnRCb3goWwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYERlc3RpbmF0YWlyZSA6ICR7ZGF0YS5pbmZvLmNpdn0gJHtkYXRhLmluZm8ubGFzdG5hbWV9ICR7ZGF0YS5pbmZvLmZpcnN0bmFtZX1gLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgYE1pc3Npb24gOiBTZWNyw6l0YXJpYXQgZCdFeGFtZW5gLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgYFNlc3Npb24gOiAke3NjaG9vbENvbmZpZy5zZXNzaW9uTmFtZSB8fCAnRE5CIEJsYW5jJ31gCiAgICAgICAgICAgICAgICAgICAgICAgIF0sIHkpOwoKICAgICAgICAgICAgICAgICAgICAgICAgZG9jLnNldEZvbnQoImhlbHZldGljYSIsICJub3JtYWwiKTsgZG9jLnNldEZvbnRTaXplKDExKTsKICAgICAgICAgICAgICAgICAgICAgICAgLy8gSW50cm8gVGVtcGxhdGUKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3BsaXRJbnRybyA9IGRvYy5zcGxpdFRleHRUb1NpemUodHBsLmludHJvLCBwYWdlV2lkdGggLSAzMCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGRvYy50ZXh0KHNwbGl0SW50cm8sIDE1LCB5KTsKICAgICAgICAgICAgICAgICAgICAgICAgeSArPSAoc3BsaXRJbnRyby5sZW5ndGggKiA2KSArIDM7IC8vIE9wdGltaXPDqQoKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGFibGVCb2R5ID0gZGF0YS5taXNzaW9ucy5tYXAobSA9PiBbbS5kYXRlLCBtLnN1YmplY3QsICJGaW4gZCfDqXByZXV2ZSIsIG0ucm9vbV0pOwogICAgICAgICAgICAgICAgICAgICAgICBkb2MuYXV0b1RhYmxlKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0WTogeSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWQ6IFtbJ0RhdGUnLCAnRXByZXV2ZScsICdIb3JhaXJlJywgJ0xpZXUgKFNhbGxlKSddXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvZHk6IHRhYmxlQm9keSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoZW1lOiAnZ3JpZCcsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkU3R5bGVzOiB7IGZpbGxDb2xvcjogWzIzMCwgMjMwLCAyMzBdLCB0ZXh0Q29sb3I6IFswLDAsMF0sIGZvbnRTdHlsZTogJ2JvbGQnLCBsaW5lQ29sb3I6IFswLDAsMF0sIGxpbmVXaWR0aDogMC4xIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZXM6IHsgZm9udFNpemU6IDksIGNlbGxQYWRkaW5nOiAyLjUsIHZhbGlnbjogJ21pZGRsZScsIGxpbmVDb2xvcjogWzAsMCwwXSwgbGluZVdpZHRoOiAwLjEsIHRleHRDb2xvcjogWzAsMCwwXSB9IC8vIE9wdGltaXPDqQogICAgICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBmaW5hbFkgPSBkb2MubGFzdEF1dG9UYWJsZS5maW5hbFkgKyA4OyAvLyBPcHRpbWlzw6kKICAgICAgICAgICAgICAgICAgICAgICAgZG9jLnNldEZvbnRTaXplKDEwKTsgZG9jLnNldEZvbnQoImhlbHZldGljYSIsICJib2xkIik7IGRvYy50ZXh0KCJNSVNTSU9OUyA6IiwgMjAsIGZpbmFsWSk7IGZpbmFsWSArPSA2OwogICAgICAgICAgICAgICAgICAgICAgICBkb2Muc2V0Rm9udCgiaGVsdmV0aWNhIiwgIm5vcm1hbCIpOwogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbWlzc2lvbkxpbmVzID0gdHBsLm1pc3Npb25zLnNwbGl0KCdcbicpLmZpbHRlcihsID0+IGwudHJpbSgpICE9PSAiIik7CiAgICAgICAgICAgICAgICAgICAgICAgIG1pc3Npb25MaW5lcy5mb3JFYWNoKGxpbmUgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLnRleHQobGluZSwgMjAsIGZpbmFsWSk7IGZpbmFsWSArPSA0LjU7IC8vIE9wdGltaXPDqQogICAgICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpZ25hdHVyZSBVbmlmacOpZSBCYXMgZGUgUGFnZQogICAgICAgICAgICAgICAgICAgICAgICBhZGRTaWduYXR1cmVCb3R0b20oZmluYWxZKTsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICBkb2Muc2F2ZSgiY29udm9jYXRpb25zX3NlY3JldGFyaWF0LnBkZiIpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgLy8gLi4uIChPdGhlciBQREZzKSAuLi4KICAgICAgICAgICAgICAgIGVsc2UgaWYgKGRvY1R5cGUgPT09ICdlbWFyZ2VtZW50JyB8fCBkb2NUeXBlID09PSAnZW1hcmdlbWVudF90dCcpIHsKICAgICAgICAgICAgICAgICAgICAvLyAoQ29kZSDDqW1hcmdlbWVudCBpZGVudGlxdWUgLSBpbmNoYW5nw6kpCiAgICAgICAgICAgICAgICAgICAgc3ViamVjdHMuZm9yRWFjaCgoc3ViamVjdCwgc0lkeCkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICByb29tcy5mb3JFYWNoKChyb29tLCBySWR4KSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc0lkeCA+IDAgfHwgcklkeCA+IDApIGRvYy5hZGRQYWdlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByb29tU3R1ZGVudHMgPSBzdHVkZW50cy5maWx0ZXIocyA9PiBzLnJvb21JZCA9PT0gcm9vbS5pZCkuc29ydCgoYSwgYikgPT4gYS5sYXN0bmFtZS5sb2NhbGVDb21wYXJlKGIubGFzdG5hbWUpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHN1Yk5hbWUgPSAoc3ViamVjdC5kaXNjaXBsaW5lcyAmJiBzdWJqZWN0LmRpc2NpcGxpbmVzLmxlbmd0aCA+IDApID8gYCR7c3ViamVjdC5uYW1lfSAoJHtzdWJqZWN0LmRpc2NpcGxpbmVzLmpvaW4oJy0nKX0pYCA6IHN1YmplY3QubmFtZTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2Muc2V0Rm9udFNpemUoMTEpOyBkb2Muc2V0Rm9udCgiaGVsdmV0aWNhIiwgImJvbGQiKTsgZG9jLnRleHQoc2Nob29sQ29uZmlnLm5hbWUudG9VcHBlckNhc2UoKSwgMTUsIDE1KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5zZXRGb250KCJoZWx2ZXRpY2EiLCAibm9ybWFsIik7IGRvYy5zZXRGb250U2l6ZSgxMCk7IGRvYy50ZXh0KGBDZW50cmUgOiAke3NjaG9vbENvbmZpZy5uYW1lfWAsIDE1LCAyMCk7IGRvYy50ZXh0KCJTw6lyaWUgR8OpbsOpcmFsZSIsIDE1LCAyNSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2Muc2V0Rm9udFNpemUoMTQpOyBkb2Muc2V0Rm9udCgiaGVsdmV0aWNhIiwgImJvbGQiKTsgZG9jLnRleHQoYEVwcmV1dmUgOiAke3N1Yk5hbWUudG9VcHBlckNhc2UoKX1gLCBwYWdlV2lkdGggLyAyLCAzNSwgeyBhbGlnbjogJ2NlbnRlcicgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2Muc2V0Rm9udFNpemUoMTIpOyBkb2MucmVjdChwYWdlV2lkdGggLSA2MCwgMTAsIDUwLCAxMik7IGRvYy50ZXh0KGBTQUxMRSAke3Jvb20ubmFtZX1gLCBwYWdlV2lkdGggLSAzNSwgMTgsIHsgYWxpZ246ICdjZW50ZXInIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLnNldEZvbnRTaXplKDEwKTsgZG9jLnNldEZvbnQoImhlbHZldGljYSIsICJub3JtYWwiKTsgZG9jLnRleHQoYERhdGUgOiAke3N1YmplY3QuZGF0ZX0gLSAke3N1YmplY3QudGltZX1gLCAxNSwgNDUpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBoZWFkID0gW1snTsKwJywgJ05PTScsICdQUsOJTk9NJywgJ1AvQScsICdFbWFyZ2VtZW50JywgJ0VtYXJnZW1lbnQgUmV0b3VyJywgJ1JlbWlzZSBDb3BpZSddXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBjb2xTdHlsZXMgPSB7IDA6IHsgY2VsbFdpZHRoOiAxMCB9LCAxOiB7IGNlbGxXaWR0aDogNDAgfSwgMjogeyBjZWxsV2lkdGg6IDM1IH0sIDM6IHsgY2VsbFdpZHRoOiAxMCB9LCA0OiB7IGNlbGxXaWR0aDogMzUgfSwgNTogeyBjZWxsV2lkdGg6IDM1IH0sIDY6IHsgY2VsbFdpZHRoOiAyNSB9IH07CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRvY1R5cGUgPT09ICdlbWFyZ2VtZW50X3R0JykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWQgPSBbWydOwrAnLCAnTk9NJywgJ1BSw4lOT00nLCAnVFQnLCAnUC9BJywgJ0VtYXJnZW1lbnQnLCAnRW1hcmcuIFJldG91cicsICdSZW1pc2UnXV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sU3R5bGVzID0geyAwOiB7IGNlbGxXaWR0aDogOCB9LCAxOiB7IGNlbGxXaWR0aDogMzUgfSwgMjogeyBjZWxsV2lkdGg6IDMwIH0sIDM6IHsgY2VsbFdpZHRoOiAxMCwgdGV4dENvbG9yOiBbMjAwLDAsMF0gfSwgNDogeyBjZWxsV2lkdGg6IDggfSwgNTogeyBjZWxsV2lkdGg6IDMwIH0sIDY6IHsgY2VsbFdpZHRoOiAzMCB9LCA3OiB7IGNlbGxXaWR0aDogMjAgfSB9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRhYmxlRGF0YSA9IHJvb21TdHVkZW50cy5tYXAoKHMsIGkpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgcm93ID0gW2kgKyAxLCBzLmxhc3RuYW1lLnRvVXBwZXJDYXNlKCksIHMuZmlyc3RuYW1lXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZG9jVHlwZSA9PT0gJ2VtYXJnZW1lbnRfdHQnKSByb3cucHVzaChzLmlzVFQgPyAiT1VJIiA6ICIiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3cucHVzaCgiIiwgIiIsICIiLCAiIik7IAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByb3c7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MuYXV0b1RhYmxlKHsgc3RhcnRZOiA1MCwgaGVhZDogaGVhZCwgYm9keTogdGFibGVEYXRhLCB0aGVtZTogJ3BsYWluJywgc3R5bGVzOiB7IGxpbmVDb2xvcjogMCwgbGluZVdpZHRoOiAwLjIsIHRleHRDb2xvcjogMCwgZm9udFNpemU6IDksIG1pbkNlbGxIZWlnaHQ6IDEyLCB2YWxpZ246ICdtaWRkbGUnIH0sIGhlYWRTdHlsZXM6IHsgZmlsbENvbG9yOiAyMjAsIGZvbnRTdHlsZTogJ2JvbGQnLCBoYWxpZ246ICdjZW50ZXInIH0sIGNvbHVtblN0eWxlczogY29sU3R5bGVzIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBQVgogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGZpbmFsWSA9IGRvYy5sYXN0QXV0b1RhYmxlLmZpbmFsWSArIDEwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZpbmFsWSArIDcwID4gZG9jLmludGVybmFsLnBhZ2VTaXplLmhlaWdodCkgeyBkb2MuYWRkUGFnZSgpOyBmaW5hbFkgPSAyMDsgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLnJlY3QoMTAsIGZpbmFsWSwgcGFnZVdpZHRoIC0gMjAsIDcwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5zZXRGb250U2l6ZSgxMik7IGRvYy5zZXRGb250KCJoZWx2ZXRpY2EiLCAiYm9sZCIpOyBkb2MudGV4dChgUFYgZGUgc2FsbGUgJHtyb29tLm5hbWV9YCwgMTUsIGZpbmFsWSArIDgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmxpbmUoMTAsIGZpbmFsWSArIDEwLCBwYWdlV2lkdGggLSAxMCwgZmluYWxZICsgMTApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgY3kgPSBmaW5hbFkgKyAxODsgZG9jLnNldEZvbnRTaXplKDEwKTsgZG9jLnNldEZvbnQoImhlbHZldGljYSIsICJub3JtYWwiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy50ZXh0KGBFcHJldXZlIDogJHtzdWJOYW1lfWAsIDE1LCBjeSk7IGN5ICs9IDY7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MudGV4dChgRGF0ZSA6ICR7c3ViamVjdC5kYXRlfWAsIDE1LCBjeSk7IGN5ICs9IDEwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLnRleHQoYENhbmRpZGF0cyA6ICR7cm9vbVN0dWRlbnRzLmxlbmd0aH1gLCAxNSwgY3kpOyBjeSArPSA4OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLnRleHQoYFByw6lzZW50cyA6IC4uLi4uLi5gLCAxNSwgY3kpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MudGV4dChgU3VydmVpbGxhbnRzIDpgLCAxMDAsIGZpbmFsWSArIDE4KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy50ZXh0KGBOb20gOiAuLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4gU2lnbiA6YCwgMTAwLCBmaW5hbFkgKyAyNik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MudGV4dChgTm9tIDogLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uIFNpZ24gOmAsIDEwMCwgZmluYWxZICsgMzYpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MudGV4dChgT2JzZXJ2YXRpb25zIDpgLCAxNSwgZmluYWxZICsgNTApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmxpbmUoNDAsIGZpbmFsWSArIDUwLCBwYWdlV2lkdGggLSAxNSwgZmluYWxZICsgNTApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmxpbmUoMTUsIGZpbmFsWSArIDU3LCBwYWdlV2lkdGggLSAxNSwgZmluYWxZICsgNTcpOwogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICBkb2Muc2F2ZSgibGlzdGVzX2VtYXJnZW1lbnQucGRmIik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlIGlmIChkb2NUeXBlID09PSAnZXRpcXVldHRlc19hbm9ueW1hdCcgfHwgZG9jVHlwZSA9PT0gJ2V0aXF1ZXR0ZXNfdGFibGVfYW1lbmFnZW1lbnRzJyB8fCBkb2NUeXBlID09PSAnZXRpcXVldHRlc19jb3BpZXNfcGRmJyB8fCBkb2NUeXBlID09PSAncG9jaGV0dGVzJyB8fCBkb2NUeXBlID09PSAnY29udm9jYXRpb25zJyB8fCBkb2NUeXBlID09PSAnY29udm9jYXRpb25zX3N1cnZlaWxsYW50cycgfHwgZG9jVHlwZSA9PT0gJ2NvbnZvY2F0aW9uc19hZXNoJyB8fCBkb2NUeXBlID09PSAnbGlzdGVzX2NvcnJlY3Rpb25fZGV0YWlsJyB8fCBkb2NUeXBlID09PSAncGxhbnNfc2FsbGUnKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKGRvY1R5cGUgPT09ICdldGlxdWV0dGVzX2Fub255bWF0JyB8fCBkb2NUeXBlID09PSAnZXRpcXVldHRlc190YWJsZV9hbWVuYWdlbWVudHMnKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAvLyAoQ29kZSDDqXRpcXVldHRlcyBpbmNoYW5nw6kpCiAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgdyA9IDEwNTsgbGV0IGggPSAzNTsgbGV0IGdhcFggPSAwOyBsZXQgZ2FwWSA9IDA7IGxldCB4U3RhcnQgPSAwOyBsZXQgeVN0YXJ0ID0gOC41OwogICAgICAgICAgICAgICAgICAgICAgICBsZXQgY29sID0gMCwgcm93ID0gMDsgY29uc3QgaXRlbXNQZXJQYWdlID0gMTY7CiAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5zZXRGb250U2l6ZSgxMCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHN0dWRlbnRzLmZpbHRlcihzID0+IHMucm9vbUlkKS5mb3JFYWNoKChzLCBpKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaSA+IDAgJiYgaSAlIGl0ZW1zUGVyUGFnZSA9PT0gMCkgeyBkb2MuYWRkUGFnZSgpOyBjb2wgPSAwOyByb3cgPSAwOyB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgeCA9IHhTdGFydCArIGNvbCAqICh3ICsgZ2FwWCk7IGxldCB5ID0geVN0YXJ0ICsgcm93ICogKGggKyBnYXBZKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5zZXREcmF3Q29sb3IoMjAwKTsgZG9jLnNldExpbmVXaWR0aCgwLjEpOyBkb2MucmVjdCh4LCB5LCB3LCBoKTsgZG9jLnNldFRleHRDb2xvcigwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5zZXRGb250U2l6ZSg4KTsgZG9jLnNldEZvbnQoImhlbHZldGljYSIsICJub3JtYWwiKTsgZG9jLnNldFRleHRDb2xvcigxMDApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLnRleHQoc2Nob29sQ29uZmlnLm5hbWUuc3Vic3RyaW5nKDAsIDQ1KSwgeCArIHcvMiwgeSArIDcsIHsgYWxpZ246ICdjZW50ZXInIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLnNldEZvbnRTaXplKDEyKTsgZG9jLnNldEZvbnQoImhlbHZldGljYSIsICJib2xkIik7IGRvYy5zZXRUZXh0Q29sb3IoMCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MudGV4dChgJHtzLmxhc3RuYW1lfSAke3MuZmlyc3RuYW1lfWAuc3Vic3RyaW5nKDAsIDMwKSwgeCArIHcvMiwgeSArIDE3LCB7IGFsaWduOiAnY2VudGVyJyB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5zZXRGb250U2l6ZSgxMCk7IGRvYy5zZXRGb250KCJoZWx2ZXRpY2EiLCAibm9ybWFsIik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MudGV4dChgSU5FIDogJHtzLmluZSB8fCAnLSd9YCwgeCArIHcvMiwgeSArIDI0LCB7IGFsaWduOiAnY2VudGVyJyB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJvb21OYW1lID0gcm9vbXMuZmluZChyID0+IHIuaWQgPT09IHMucm9vbUlkKT8ubmFtZSB8fCAnPyc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2Muc2V0Rm9udCgiaGVsdmV0aWNhIiwgImJvbGQiKTsgZG9jLnRleHQoYFNhbGxlIDogJHtyb29tTmFtZX1gLCB4ICsgdy8yLCB5ICsgMzAsIHsgYWxpZ246ICdjZW50ZXInIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRvY1R5cGUgPT09ICdldGlxdWV0dGVzX3RhYmxlX2FtZW5hZ2VtZW50cycgJiYgcy5pc1RUKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLnNldFRleHRDb2xvcigyMjAsIDM4LCAzOCk7IGRvYy5zZXRGb250U2l6ZSg5KTsgZG9jLnNldEZvbnQoImhlbHZldGljYSIsICJib2xkIik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLnRleHQoIlRJRVJTIFRFTVBTIiwgeCArIHcgLSA1LCB5ICsgOCwgeyBhbGlnbjogJ3JpZ2h0JyB9KTsgZG9jLnNldFRleHRDb2xvcigwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbCsrOyBpZiAoY29sID49IDIpIHsgY29sID0gMDsgcm93Kys7IH0KICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5zYXZlKGRvY1R5cGUgKyAiLnBkZiIpOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZG9jVHlwZSA9PT0gJ3BsYW5zX3NhbGxlJykgewogICAgICAgICAgICAgICAgICAgICAgICAvLyAoQ29kZSBwbGFuIGRlIHNhbGxlIGluY2hhbmfDqSkKICAgICAgICAgICAgICAgICAgICAgICAgcm9vbXMuZm9yRWFjaCgocm9vbSwgaWR4KSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaWR4ID4gMCkgZG9jLmFkZFBhZ2UoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCB5ID0gYWRkSGVhZGVyKGBQTEFOIERFIFNBTExFIC0gJHtyb29tLm5hbWV9YCwgYENhcGFjaXTDqTogJHtyb29tLmNhcGFjaXR5fSBwbGFjZXNgKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHVuaXF1ZURhdGVzID0gWy4uLm5ldyBTZXQoc3ViamVjdHMubWFwKHMgPT4gcy5kYXRlKSldOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcGVyaW9kU3RyID0gdW5pcXVlRGF0ZXMubGVuZ3RoID4gMSA/IGDDiXByZXV2ZXMgZHUgJHt1bmlxdWVEYXRlc1swXX0gYXUgJHt1bmlxdWVEYXRlc1t1bmlxdWVEYXRlcy5sZW5ndGgtMV19YCA6ICh1bmlxdWVEYXRlcy5sZW5ndGggPT09IDEgPyBgw4lwcmV1dmVzIGxlICR7dW5pcXVlRGF0ZXNbMF19YCA6ICIiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwZXJpb2RTdHIpIHsgZG9jLnNldEZvbnRTaXplKDEwKTsgZG9jLnNldEZvbnQoImhlbHZldGljYSIsICJpdGFsaWMiKTsgZG9jLnRleHQocGVyaW9kU3RyLCBwYWdlV2lkdGggLyAyLCB5IC0gNiwgeyBhbGlnbjogJ2NlbnRlcicgfSk7IH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJvb21TdHVkZW50cyA9IHN0dWRlbnRzLmZpbHRlcihzID0+IHMucm9vbUlkID09PSByb29tLmlkKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRhYmxlRGF0YSA9IHJvb21TdHVkZW50cy5tYXAoKHMsIGkpID0+IFtpICsgMSwgcy5sYXN0bmFtZS50b1VwcGVyQ2FzZSgpLCBzLmZpcnN0bmFtZSwgcy5pc1RUID8gIk9VSSIgOiAiTk9OIiwgcy5pbmUgfHwgIiJdKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5hdXRvVGFibGUoeyBzdGFydFk6IHksIGhlYWQ6IFtbJ1BsYWNlJywgJ05vbScsICdQcsOpbm9tJywgJ1RpZXJzIFRlbXBzJywgJ0lORSddXSwgYm9keTogdGFibGVEYXRhLCB0aGVtZTogJ2dyaWQnLCBoZWFkU3R5bGVzOiB7IGZpbGxDb2xvcjogWzUwLCA1MCwgNTBdLCB0ZXh0Q29sb3I6IFsyNTUsIDI1NSwgMjU1XSB9IH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLnRleHQoYEVmZmVjdGlmIDogJHtyb29tU3R1ZGVudHMubGVuZ3RofWAsIDE0LCBkb2MubGFzdEF1dG9UYWJsZS5maW5hbFkgKyAxMCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MudGV4dChgU2lnbmF0dXJlIDpgLCAxMzAsIGRvYy5sYXN0QXV0b1RhYmxlLmZpbmFsWSArIDEwKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5zYXZlKCJwbGFuc19kZV9zYWxsZS5wZGYiKTsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGRvY1R5cGUgPT09ICdwb2NoZXR0ZXMnKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vIChDb2RlIHBvY2hldHRlcyBpbmNoYW5nw6kpCiAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgaXNGaXJzdCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgICBzdWJqZWN0cy5mb3JFYWNoKChzdWJqZWN0KSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByb29tcy5mb3JFYWNoKChyb29tKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFpc0ZpcnN0KSBkb2MuYWRkUGFnZSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzRmlyc3QgPSBmYWxzZTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLnJlY3QoMTAsIDEwLCBwYWdlV2lkdGggLSAyMCwgZG9jLmludGVybmFsLnBhZ2VTaXplLmhlaWdodCAtIDIwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2Nob29sQ29uZmlnLmxvZ29VcmwpIHsgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7IAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbG9nbyA9IGdldExvZ29EaW1zKDI1LCAyNSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MuYWRkSW1hZ2Uoc2Nob29sQ29uZmlnLmxvZ29VcmwsICdKUEVHJywgMTUsIDE1LCBsb2dvLncsIGxvZ28uaCk7IAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7IH0gCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5zZXRGb250U2l6ZSgyNCk7IGRvYy50ZXh0KHNjaG9vbENvbmZpZy5uYW1lLCBwYWdlV2lkdGgvMiwgNDAsIHthbGlnbjogJ2NlbnRlcid9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2Muc2V0Rm9udFNpemUoNDApOyBkb2Muc2V0Rm9udCgiaGVsdmV0aWNhIiwgImJvbGQiKTsgZG9jLnRleHQoKHNjaG9vbENvbmZpZy5zZXNzaW9uTmFtZSB8fCAiRE5CIDIwMjUiKS50b1VwcGVyQ2FzZSgpLCBwYWdlV2lkdGgvMiwgNzAsIHthbGlnbjogJ2NlbnRlcid9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2Muc2V0Rm9udFNpemUoMjApOyBkb2MudGV4dChgU2FsbGUgOiAke3Jvb20ubmFtZX1gLCBwYWdlV2lkdGgvMiwgMTAwLCB7YWxpZ246ICdjZW50ZXInfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3ViTmFtZSA9IChzdWJqZWN0LmRpc2NpcGxpbmVzICYmIHN1YmplY3QuZGlzY2lwbGluZXMubGVuZ3RoID4gMCkgPyBgJHtzdWJqZWN0Lm5hbWV9ICgke3N1YmplY3QuZGlzY2lwbGluZXMuam9pbignIC0gJyl9KWAgOiBzdWJqZWN0Lm5hbWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLnJlY3QoMzAsIDEyMCwgcGFnZVdpZHRoIC0gNjAsIDYwKTsgZG9jLnNldEZvbnRTaXplKDE4KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MudGV4dChgRGlzY2lwbGluZSA6ICR7c3ViTmFtZX1gLCBwYWdlV2lkdGgvMiwgMTM1LCB7YWxpZ246ICdjZW50ZXInfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLnRleHQoYERhdGUgOiAke3N1YmplY3QuZGF0ZX1gLCBwYWdlV2lkdGgvMiwgMTUwLCB7YWxpZ246ICdjZW50ZXInfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLnRleHQoYEhvcmFpcmUgOiAke3N1YmplY3QudGltZX1gLCBwYWdlV2lkdGgvMiwgMTY1LCB7YWxpZ246ICdjZW50ZXInfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLnNldEZvbnRTaXplKDE2KTsgZG9jLnRleHQoYE5vbWJyZSBkZSBjYW5kaWRhdHMgOiAuLi4uLi4uYCwgNDAsIDIwMCk7IAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5zZXRGb250U2l6ZSgxNik7IGRvYy50ZXh0KGBPYnNlcnZhdGlvbnMgOiAuLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLmAsIDQwLCAyNTApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICBkb2Muc2F2ZSgiZXRpcXVldHRlc19wb2NoZXR0ZXMucGRmIik7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChkb2NUeXBlID09PSAnZXRpcXVldHRlc19jb3BpZXNfcGRmJykgewogICAgICAgICAgICAgICAgICAgICAgICAvLyAoQ29kZSDDqXRpcXVldHRlcyBjb3BpZXMgaW5jaGFuZ8OpKQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB3ID0gMTA1OyBjb25zdCBoID0gMzU7IGNvbnN0IHhTdGFydCA9IDA7IGNvbnN0IHlTdGFydCA9IDguNTsgY29uc3QgaXRlbXNQZXJQYWdlID0gMTY7CiAgICAgICAgICAgICAgICAgICAgICAgIHN1YmplY3RzLmZvckVhY2goKHN1YmplY3QsIHNJZHgpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHNvcnRlZFN0dWRlbnRzID0gWy4uLnN0dWRlbnRzXS5zb3J0KChhLGIpID0+IGEubGFzdG5hbWUubG9jYWxlQ29tcGFyZShiLmxhc3RuYW1lKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgY29sID0gMDsgbGV0IHJvdyA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc0lkeCA+IDApIHsgZG9jLmFkZFBhZ2UoKTsgY29sID0gMDsgcm93ID0gMDsgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgc29ydGVkU3R1ZGVudHMuZm9yRWFjaCgocywgaSkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpID4gMCAmJiBpICUgaXRlbXNQZXJQYWdlID09PSAwKSB7IGRvYy5hZGRQYWdlKCk7IGNvbCA9IDA7IHJvdyA9IDA7IH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgeCA9IHhTdGFydCArIGNvbCAqIHc7IGxldCB5ID0geVN0YXJ0ICsgcm93ICogaDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2Muc2V0RHJhd0NvbG9yKDIwMCk7IGRvYy5zZXRMaW5lV2lkdGgoMC4xKTsgZG9jLnNldExpbmVEYXNoUGF0dGVybihbXSwgMCk7IGRvYy5yZWN0KHgsIHksIHcsIGgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHNwbGl0WCA9IHggKyAodyAvIDIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5zZXREcmF3Q29sb3IoMCk7IGRvYy5zZXRMaW5lRGFzaFBhdHRlcm4oWzMsIDNdLCAwKTsgZG9jLmxpbmUoc3BsaXRYLCB5LCBzcGxpdFgsIHkgKyBoKTsgZG9jLnNldExpbmVEYXNoUGF0dGVybihbXSwgMCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY2VudGVyTGVmdFggPSB4ICsgKHcgLyA0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2Muc2V0VGV4dENvbG9yKDApOyBkb2Muc2V0Rm9udCgiaGVsdmV0aWNhIiwgImJvbGQiKTsgZG9jLnNldEZvbnRTaXplKDE0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MudGV4dChzLmFub255bW91c0lkLCBjZW50ZXJMZWZ0WCwgeSArIDE1LCB7IGFsaWduOiAnY2VudGVyJyB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2Muc2V0Rm9udFNpemUoOSk7IGRvYy5zZXRGb250KCJoZWx2ZXRpY2EiLCAibm9ybWFsIik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3ViTmFtZVNob3J0ID0gc3ViamVjdC5uYW1lLmxlbmd0aCA+IDIyID8gc3ViamVjdC5uYW1lLnN1YnN0cmluZygwLCAyMCkgKyAiLiIgOiBzdWJqZWN0Lm5hbWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLnRleHQoc3ViTmFtZVNob3J0LCBjZW50ZXJMZWZ0WCwgeSArIDI1LCB7IGFsaWduOiAnY2VudGVyJyB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZXh0WCA9IHNwbGl0WCArIDU7IGxldCB0ZXh0WSA9IHkgKyA3OyBjb25zdCBsaW5lSGVpZ2h0ID0gNTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2Muc2V0Rm9udFNpemUoMTApOyBkb2Muc2V0Rm9udCgiaGVsdmV0aWNhIiwgImJvbGQiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MudGV4dChgJHtzLmxhc3RuYW1lfSAke3MuZmlyc3RuYW1lfWAuc3Vic3RyaW5nKDAsIDMwKSwgdGV4dFgsIHRleHRZKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0WSArPSBsaW5lSGVpZ2h0OyBkb2Muc2V0Rm9udCgiaGVsdmV0aWNhIiwgIm5vcm1hbCIpOyBkb2Muc2V0Rm9udFNpemUoOSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLnRleHQoYENsYXNzZSA6ICR7cy5jbGFzc31gLCB0ZXh0WCwgdGV4dFkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHRZICs9IGxpbmVIZWlnaHQ7IGRvYy50ZXh0KGBNYXRpw6hyZSA6ICR7c3ViamVjdC5uYW1lfWAsIHRleHRYLCB0ZXh0WSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dFkgKz0gbGluZUhlaWdodCArIDI7IGRvYy5zZXRGb250KCJoZWx2ZXRpY2EiLCAiYm9sZCIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy50ZXh0KGBOwrAgQW5vbnltYXQgOiAke3MuYW5vbnltb3VzSWR9YCwgdGV4dFgsIHRleHRZKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2wrKzsgaWYgKGNvbCA+PSAyKSB7IGNvbCA9IDA7IHJvdysrOyB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5zYXZlKCJldGlxdWV0dGVzX2NvcGllc19jb21wbGV0LnBkZiIpOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZG9jVHlwZSA9PT0gJ2xpc3Rlc19jb3JyZWN0aW9uX2RldGFpbCcpIHsKICAgICAgICAgICAgICAgICAgICAgICAgIC8vIChDb2RlIGxpc3RlIGNvcnJlY3Rpb24gaW5jaGFuZ8OpKQogICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFzZWxlY3RlZENvcnJlY3Rpb25TdWJqZWN0IHx8ICF0ZWFjaGVyQXNzaWdubWVudHNbc2VsZWN0ZWRDb3JyZWN0aW9uU3ViamVjdC5pZF0pIHsgc2hvd05vdGlmaWNhdGlvbigiQXVjdW5lIHLDqXBhcnRpdGlvbiAhIiwgImVycm9yIik7IHJldHVybjsgfQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhc3NpZ25tZW50cyA9IHRlYWNoZXJBc3NpZ25tZW50c1tzZWxlY3RlZENvcnJlY3Rpb25TdWJqZWN0LmlkXTsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYW5vbnltaXplZFN0dWRlbnRzID0gc3R1ZGVudHMuZmlsdGVyKHMgPT4gcy5hbm9ueW1vdXNJZCkuc29ydCgoYSwgYikgPT4gYS5hbm9ueW1vdXNJZC5sb2NhbGVDb21wYXJlKGIuYW5vbnltb3VzSWQpKTsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3ViTmFtZVVwcGVyID0gc2VsZWN0ZWRDb3JyZWN0aW9uU3ViamVjdC5uYW1lLnRvVXBwZXJDYXNlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGlzSEdFTUMgPSBzdWJOYW1lVXBwZXIuaW5jbHVkZXMoIkhJU1RPSVJFIikgfHwgc3ViTmFtZVVwcGVyLmluY2x1ZGVzKCJHRU8iKSB8fCBzdWJOYW1lVXBwZXIuaW5jbHVkZXMoIkhHIikgfHwgc3ViTmFtZVVwcGVyLmluY2x1ZGVzKCJFTUMiKTsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaXNTY2llbmNlcyA9IHN1Yk5hbWVVcHBlci5pbmNsdWRlcygiU0NJRU5DRSIpIHx8IHN1Yk5hbWVVcHBlci5pbmNsdWRlcygiU1ZUIikgfHwgc3ViTmFtZVVwcGVyLmluY2x1ZGVzKCJQSFkiKSB8fCBzdWJOYW1lVXBwZXIuaW5jbHVkZXMoIlRFQ0hOTyIpOwoKICAgICAgICAgICAgICAgICAgICAgICAgYXNzaWdubWVudHMuZm9yRWFjaCgoYXNzaWduLCBpZHgpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpZHggPiAwKSBkb2MuYWRkUGFnZSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHkgPSBhZGRIZWFkZXIoYExJU1RFIERFIENPTlRSw5RMRSBERSBDT1JSRUNUSU9OYCwgYCR7c2VsZWN0ZWRDb3JyZWN0aW9uU3ViamVjdC5uYW1lfWApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgeSArPSAxMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5zZXRGb250U2l6ZSgxMSk7IGRvYy5zZXRGb250KCJoZWx2ZXRpY2EiLCAiYm9sZCIpOyBkb2Muc2V0VGV4dENvbG9yKDApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLnRleHQoYENvcnJlY3RldXIgOiAke2Fzc2lnbi50ZWFjaGVyTmFtZX1gLCAxNCwgeSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2Muc2V0Rm9udCgiaGVsdmV0aWNhIiwgIm5vcm1hbCIpOyBkb2Muc2V0Rm9udFNpemUoMTApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLnRleHQoYExvdCA6ICR7YXNzaWduLnN0YXJ0QW5vbnltfSDDoCAke2Fzc2lnbi5lbmRBbm9ueW19ICgke2Fzc2lnbi5jb3VudH0gY29waWVzKWAsIDE0LCB5ICsgNik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB5ICs9IDE1OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYmF0Y2hTdHVkZW50cyA9IGFub255bWl6ZWRTdHVkZW50cy5zbGljZShhc3NpZ24uc3RhcnRSYW5rIC0gMSwgYXNzaWduLmVuZFJhbmspOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGhlYWRSb3csIGJvZHlEYXRhLCBjb2xTdHlsZXM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNIR0VNQykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRSb3cgPSBbWydOwrAgQW5vbnltYXQnLCAnTm90ZSBIRycsICdOb3RlIEVNQycsICdUT1RBTCcsICdPYnNlcnZhdGlvbnMgLyBBcHByw6ljaWF0aW9ucyddXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib2R5RGF0YSA9IGJhdGNoU3R1ZGVudHMubWFwKHMgPT4gW3MuYW5vbnltb3VzSWQsICIiLCAiIiwgIiIsICIiXSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sU3R5bGVzID0geyAwOiB7IGNlbGxXaWR0aDogMzAsIGhhbGlnbjogJ2NlbnRlcicgfSwgMTogeyBjZWxsV2lkdGg6IDIwLCBoYWxpZ246ICdjZW50ZXInIH0sIDI6IHsgY2VsbFdpZHRoOiAyMCwgaGFsaWduOiAnY2VudGVyJyB9LCAzOiB7IGNlbGxXaWR0aDogMjAsIGhhbGlnbjogJ2NlbnRlcicsIGZvbnRTdHlsZTogJ2JvbGQnIH0sIDQ6IHsgY2VsbFdpZHRoOiAnYXV0bycgfSB9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChpc1NjaWVuY2VzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhZFJvdyA9IFtbJ07CsCBBbm9ueW1hdCcsICdTQ0lFTkNFIDEnLCAnU0NJRU5DRSAyJywgJ1RPVEFMJywgJ09ic2VydmF0aW9ucyAvIEFwcHLDqWNpYXRpb25zJ11dOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvZHlEYXRhID0gYmF0Y2hTdHVkZW50cy5tYXAocyA9PiBbcy5hbm9ueW1vdXNJZCwgIiIsICIiLCAiIiwgIiJdKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xTdHlsZXMgPSB7IDA6IHsgY2VsbFdpZHRoOiAzMCwgaGFsaWduOiAnY2VudGVyJyB9LCAxOiB7IGNlbGxXaWR0aDogMjAsIGhhbGlnbjogJ2NlbnRlcicgfSwgMjogeyBjZWxsV2lkdGg6IDIwLCBoYWxpZ246ICdjZW50ZXInIH0sIDM6IHsgY2VsbFdpZHRoOiAyMCwgaGFsaWduOiAnY2VudGVyJywgZm9udFN0eWxlOiAnYm9sZCcgfSwgNDogeyBjZWxsV2lkdGg6ICdhdXRvJyB9IH07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRSb3cgPSBbWydOwrAgQW5vbnltYXQnLCAnTm90ZScsICdPYnNlcnZhdGlvbnMgLyBBcHByw6ljaWF0aW9ucyddXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib2R5RGF0YSA9IGJhdGNoU3R1ZGVudHMubWFwKHMgPT4gW3MuYW5vbnltb3VzSWQsICIiLCAiIl0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbFN0eWxlcyA9IHsgMDogeyBjZWxsV2lkdGg6IDQwLCBoYWxpZ246ICdjZW50ZXInIH0sIDE6IHsgY2VsbFdpZHRoOiAzMCwgaGFsaWduOiAnY2VudGVyJyB9LCAyOiB7IGNlbGxXaWR0aDogJ2F1dG8nIH0gfTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5hdXRvVGFibGUoeyBzdGFydFk6IHksIGhlYWQ6IGhlYWRSb3csIGJvZHk6IGJvZHlEYXRhLCB0aGVtZTogJ2dyaWQnLCBoZWFkU3R5bGVzOiB7IGZpbGxDb2xvcjogWzUwLCA1MCwgNTBdLCB0ZXh0Q29sb3I6IFsyNTUsIDI1NSwgMjU1XSB9LCBjb2x1bW5TdHlsZXM6IGNvbFN0eWxlcywgc3R5bGVzOiB7IG1pbkNlbGxIZWlnaHQ6IDEwLCBmb250U2l6ZTogMTAsIGxpbmVDb2xvcjogWzE1MCwgMTUwLCAxNTBdIH0sIG1hcmdpbjogeyBib3R0b206IDIwIH0gfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBmaW5hbFkgPSBkb2MubGFzdEF1dG9UYWJsZS5maW5hbFkgKyAyMDsgZG9jLnNldEZvbnRTaXplKDEwKTsgZG9jLnRleHQoIlNpZ25hdHVyZSBkdSBjb3JyZWN0ZXVyIDoiLCAxMzAsIGZpbmFsWSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICBkb2Muc2F2ZShgbGlzdGVzX2NvcnJlY3Rpb25fJHtzZWxlY3RlZENvcnJlY3Rpb25TdWJqZWN0Lm5hbWV9LnBkZmApOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZG9jVHlwZSA9PT0gJ2NvbnZvY2F0aW9ucycpIHsKICAgICAgICAgICAgICAgICAgICAgICAgLy8gLS0tIENPTlZPQ0FUSU9OUyBFTEVWRVMgLS0tCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRwbCA9IGRvY1RlbXBsYXRlcy5zdHVkZW50OwogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzb3J0ZWRTdHVkZW50cyA9IFsuLi5zdHVkZW50c10uc29ydCgoYSwgYikgPT4gYS5sYXN0bmFtZS5sb2NhbGVDb21wYXJlKGIubGFzdG5hbWUpKTsKICAgICAgICAgICAgICAgICAgICAgICAgc29ydGVkU3R1ZGVudHMuZm9yRWFjaCgoc3R1ZGVudCwgaW5kZXgpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbmRleCA+IDApIGRvYy5hZGRQYWdlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgeSA9IGFkZEhlYWRlcih0cGwudGl0bGUsIHRwbC5zdWJ0aXRsZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB5IC09IDU7IC8vIEFqdXN0ZW1lbnQKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBVdGlsaXNhdGlvbiBCb2l0ZSBVbmlmacOpZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgeSA9IGFkZFJlY2lwaWVudEJveChbCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYENhbmRpZGF0IDogJHtzdHVkZW50Lmxhc3RuYW1lfSAke3N0dWRlbnQuZmlyc3RuYW1lfWAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYENsYXNzZSA6ICR7c3R1ZGVudC5jbGFzc31gLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGBJTkUgLyBJZGVudGlmaWFudCA6ICR7c3R1ZGVudC5pbmUgfHwgJ05vbiByZW5zZWlnbsOpJ31gCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBdLCB5LCBzdHVkZW50LmlzVFQpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFERElUSU9OOiBJbnRybyB0ZXh0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodHBsLmludHJvKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLnNldEZvbnQoImhlbHZldGljYSIsICJub3JtYWwiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2Muc2V0Rm9udFNpemUoMTEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHNwbGl0SW50cm8gPSBkb2Muc3BsaXRUZXh0VG9TaXplKHRwbC5pbnRybywgcGFnZVdpZHRoIC0gMzApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy50ZXh0KHNwbGl0SW50cm8sIDE1LCB5KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB5ICs9IChzcGxpdEludHJvLmxlbmd0aCAqIDYpICsgMzsgLy8gT3B0aW1pc8OpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBFTkQgQURESVRJT04KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzdHVkZW50Um9vbSA9IHJvb21zLmZpbmQociA9PiByLmlkID09PSBzdHVkZW50LnJvb21JZCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByb29tTmFtZSA9IHN0dWRlbnRSb29tID8gc3R1ZGVudFJvb20ubmFtZSA6ICJOT04gQUZGRUNUw4kgKFZvaXIgYWRtaW5pc3RyYXRpb24pIjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRhYmxlRGF0YSA9IHN1YmplY3RzLm1hcChzdWIgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGRpc3BsYXlUaW1lID0gKHN0dWRlbnQuaXNUVCAmJiBzdWIudGltZVRUKSA/IHN1Yi50aW1lVFQgOiBzdWIudGltZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzdWJMYWJlbCA9IChzdWIuZGlzY2lwbGluZXMgJiYgc3ViLmRpc2NpcGxpbmVzLmxlbmd0aCA+IDApID8gYCR7c3ViLm5hbWV9XG4oJHtzdWIuZGlzY2lwbGluZXMuam9pbignIC0gJyl9KWAgOiBzdWIubmFtZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gW3N1Yi5kYXRlLCBkaXNwbGF5VGltZSwgc3ViTGFiZWwsIHJvb21OYW1lXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU3R5bGUgR3JpZCBVbmlmacOpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MuYXV0b1RhYmxlKHsgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnRZOiB5LCAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkOiBbWydEYXRlJywgJ0hvcmFpcmUnLCAnw4lwcmV1dmUnLCAnU2FsbGUnXV0sIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvZHk6IHRhYmxlRGF0YSwgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhlbWU6ICdncmlkJywgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhZFN0eWxlczogeyBmaWxsQ29sb3I6IFsyMzAsIDIzMCwgMjMwXSwgdGV4dENvbG9yOiBbMCwgMCwgMF0sIGZvbnRTdHlsZTogJ2JvbGQnLCBsaW5lV2lkdGg6IDAuMSwgbGluZUNvbG9yOiBbMCwgMCwgMF0gfSwgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGVzOiB7IGZvbnRTaXplOiA5LCBjZWxsUGFkZGluZzogMi41LCB2YWxpZ246ICdtaWRkbGUnLCBsaW5lQ29sb3I6IFswLCAwLCAwXSwgbGluZVdpZHRoOiAwLjEsIHRleHRDb2xvcjogWzAsIDAsIDBdIH0sIC8vIE9wdGltaXPDqQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbHVtblN0eWxlczogeyAwOiB7IGNlbGxXaWR0aDogNDAgfSwgMTogeyBjZWxsV2lkdGg6IDM1LCBmb250U3R5bGU6ICdib2xkJyB9LCAyOiB7IGNlbGxXaWR0aDogJ2F1dG8nIH0sIDM6IHsgY2VsbFdpZHRoOiA0MCwgaGFsaWduOiAnY2VudGVyJywgZm9udFN0eWxlOiAnYm9sZCcgfSB9IAogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBmaW5hbFkgPSBkb2MubGFzdEF1dG9UYWJsZS5maW5hbFkgKyA4OyAvLyBPcHRpbWlzw6kKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5zZXRGb250U2l6ZSgxMCk7IGRvYy5zZXRGb250KCJoZWx2ZXRpY2EiLCAiYm9sZCIpOyBkb2MudGV4dCgiQ09OU0lHTkVTIElNUE9SVEFOVEVTIDoiLCAxNSwgZmluYWxZKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5zZXRGb250KCJoZWx2ZXRpY2EiLCAibm9ybWFsIik7IGRvYy5zZXRGb250U2l6ZSg5KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVXRpbGlzYXRpb24gZGVzIGNvbnNpZ25lcyBkdSB0ZW1wbGF0ZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbGluZXMgPSB0cGwuY29uc2lnbmVzLnNwbGl0KCdcbicpLmZpbHRlcihsID0+IGwudHJpbSgpICE9PSAiIik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgbGluZVkgPSBmaW5hbFkgKyA2OyBsaW5lcy5mb3JFYWNoKGxpbmUgPT4geyBkb2MudGV4dChsaW5lLCAxNSwgbGluZVkpOyBsaW5lWSArPSA0LjU7IH0pOyAvLyBPcHRpbWlzw6kKICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2lnbmF0dXJlIFVuaWZpw6llIEJhcyBkZSBQYWdlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZGRTaWduYXR1cmVCb3R0b20obGluZVkpOwogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgZG9jLnNhdmUoImNvbnZvY2F0aW9uc19lbGV2ZXMucGRmIik7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChkb2NUeXBlID09PSAnY29udm9jYXRpb25zX3N1cnZlaWxsYW50cycpIHsKICAgICAgICAgICAgICAgICAgICAgICAgIC8vIC0tLSBDT05WT0NBVElPTlMgU1VSVkVJTExBTlRTIC0tLQogICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdHBsID0gZG9jVGVtcGxhdGVzLnN1cnZlaWxsYW50OwogICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYXNzaWdubWVudHNCeVRlYWNoZXIgPSB7fTsKICAgICAgICAgICAgICAgICAgICAgICAgc3ViamVjdHMuZm9yRWFjaChzdWIgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcm9vbXMuZm9yRWFjaChyb29tID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBERVRFQ1RFUiBTSSBFTEVWRSBUVCBFU1QgREFOUyBMQSBTQUxMRSBQT1VSIEFEQVBURVIgTEVTIEhPUkFJUkVTIERFUyBTVVJWRUlMTEFOVFMKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBoYXNUVCA9IHN0dWRlbnRzLnNvbWUocyA9PiBzLnJvb21JZCA9PT0gcm9vbS5pZCAmJiBzLmlzVFQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGFjdGl2ZVRpbWUgPSBoYXNUVCAmJiBzdWIudGltZVRUID8gc3ViLnRpbWVUVCA6IHN1Yi50aW1lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRpbWVTbG90cyA9IHN1cnZlaWxsYW5jZU1vZGUgPT09ICd3aXRoX3JvdGF0aW9uJyAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBjYWxjdWxhdGVUaW1lU2xvdHMoYWN0aXZlVGltZSkgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogW3sgbGFiZWw6IGFjdGl2ZVRpbWUgfV07CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVTbG90cy5mb3JFYWNoKChzbG90LCBzbG90SW5kZXgpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYXNzaWduS2V5ID0gYCR7c3ViLmlkfS0ke3Jvb20uaWR9LSR7c2xvdEluZGV4fWA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGFzc2lnbmVkVGVhY2hlcklkcyA9IHN1cnZlaWxsYW5jZUFzc2lnbm1lbnRzW2Fzc2lnbktleV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhc3NpZ25lZFRlYWNoZXJJZHMgJiYgYXNzaWduZWRUZWFjaGVySWRzLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzc2lnbmVkVGVhY2hlcklkcy5mb3JFYWNoKHRpZCA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0aWQpIHJldHVybjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWFzc2lnbm1lbnRzQnlUZWFjaGVyW3RpZF0pIHsgY29uc3QgdGVhY2hlciA9IHRlYWNoZXJzLmZpbmQodCA9PiB0LmlkID09PSB0aWQpOyBpZiAodGVhY2hlcikgYXNzaWdubWVudHNCeVRlYWNoZXJbdGlkXSA9IHsgaW5mbzogdGVhY2hlciwgc2xvdHM6IFtdIH07IH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYXNzaWdubWVudHNCeVRlYWNoZXJbdGlkXSkgeyAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgcm9vbUxhYmVsID0gaGFzVFQgPyBgJHtyb29tLm5hbWV9IChUVClgIDogcm9vbS5uYW1lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhc3NpZ25tZW50c0J5VGVhY2hlclt0aWRdLnNsb3RzLnB1c2goeyBzdWJqZWN0OiBzdWIubmFtZSwgZGF0ZTogc3ViLmRhdGUsIHRpbWU6IHNsb3QubGFiZWwsIHJvb206IHJvb21MYWJlbCB9KTsgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVhY2hlcklkcyA9IE9iamVjdC5rZXlzKGFzc2lnbm1lbnRzQnlUZWFjaGVyKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRlYWNoZXJJZHMubGVuZ3RoID09PSAwKSB7IHNob3dOb3RpZmljYXRpb24oIkF1Y3VuZSBzdXJ2ZWlsbGFuY2UgISIsICJlcnJvciIpOyByZXR1cm47IH0KICAgICAgICAgICAgICAgICAgICAgICAgdGVhY2hlcklkcy5zb3J0KChhLGIpID0+IGFzc2lnbm1lbnRzQnlUZWFjaGVyW2FdLmluZm8ubGFzdG5hbWUubG9jYWxlQ29tcGFyZShhc3NpZ25tZW50c0J5VGVhY2hlcltiXS5pbmZvLmxhc3RuYW1lKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHRlYWNoZXJJZHMuZm9yRWFjaCgodGlkLCBpbmRleCkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGluZGV4ID4gMCkgZG9jLmFkZFBhZ2UoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBhc3NpZ25tZW50c0J5VGVhY2hlclt0aWRdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHkgPSBhZGRIZWFkZXIodHBsLnRpdGxlLCB0cGwuc3VidGl0bGUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgeSAtPSA1OwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFV0aWxpc2F0aW9uIEJvaXRlIFVuaWZpw6llCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB5ID0gYWRkUmVjaXBpZW50Qm94KFsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgRGVzdGluYXRhaXJlIDogJHtkYXRhLmluZm8uY2l2fSAke2RhdGEuaW5mby5sYXN0bmFtZX0gJHtkYXRhLmluZm8uZmlyc3RuYW1lfWAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYFN0YXR1dCA6IFN1cnZlaWxsYW50IGQnZXhhbWVuYCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgU2Vzc2lvbiA6ICR7c2Nob29sQ29uZmlnLnNlc3Npb25OYW1lIHx8ICdETkIgQmxhbmMnfWAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0sIHkpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5zZXRGb250KCJoZWx2ZXRpY2EiLCAibm9ybWFsIik7IGRvYy5zZXRGb250U2l6ZSgxMSk7IAogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSW50cm8gdGVtcGxhdGUKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHNwbGl0SW50cm8gPSBkb2Muc3BsaXRUZXh0VG9TaXplKHRwbC5pbnRybywgcGFnZVdpZHRoIC0gMzApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLnRleHQoc3BsaXRJbnRybywgMTUsIHkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgeSArPSAoc3BsaXRJbnRyby5sZW5ndGggKiA2KSArIDM7IC8vIE9wdGltaXPDqQogICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2Muc2V0Rm9udCgiaGVsdmV0aWNhIiwgImJvbGQiKTsgZG9jLnRleHQoIlBsYW5uaW5nIGRlIHZvcyBzdXJ2ZWlsbGFuY2VzIDoiLCAyMCwgeSk7IHkgKz0gNTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEuc2xvdHMuc29ydCgoYSwgYikgPT4geyBpZiAoYS5kYXRlICE9PSBiLmRhdGUpIHJldHVybiBhLmRhdGUubG9jYWxlQ29tcGFyZShiLmRhdGUpOyByZXR1cm4gYS50aW1lLmxvY2FsZUNvbXBhcmUoYi50aW1lKTsgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0YWJsZUJvZHkgPSBkYXRhLnNsb3RzLm1hcChzbG90ID0+IFtzbG90LmRhdGUsIHNsb3QudGltZSwgc2xvdC5zdWJqZWN0LCBzbG90LnJvb21dKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5hdXRvVGFibGUoeyAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGFydFk6IHksIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWQ6IFtbJ0RhdGUnLCAnQ3LDqW5lYXUnLCAnw4lwcmV1dmUnLCAnU2FsbGUnXV0sIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvZHk6IHRhYmxlQm9keSwgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhlbWU6ICdncmlkJywgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhZFN0eWxlczogeyBmaWxsQ29sb3I6IFsyMzAsIDIzMCwgMjMwXSwgdGV4dENvbG9yOiBbMCwwLDBdLCBmb250U3R5bGU6ICdib2xkJywgbGluZUNvbG9yOiBbMCwwLDBdLCBsaW5lV2lkdGg6IDAuMSB9LCAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2x1bW5TdHlsZXM6IHsgMDogeyBjZWxsV2lkdGg6IDM1IH0sIDE6IHsgY2VsbFdpZHRoOiA0MCwgZm9udFN0eWxlOiAnYm9sZCcgfSwgMjogeyBjZWxsV2lkdGg6ICdhdXRvJyB9LCAzOiB7IGNlbGxXaWR0aDogMzAsIGhhbGlnbjogJ2NlbnRlcicsIGZvbnRTdHlsZTogJ2JvbGQnIH0gfSwgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGVzOiB7IGZvbnRTaXplOiA5LCBjZWxsUGFkZGluZzogMi41LCB2YWxpZ246ICdtaWRkbGUnLCBsaW5lQ29sb3I6IFswLDAsMF0sIGxpbmVXaWR0aDogMC4xLCB0ZXh0Q29sb3I6IFswLDAsMF0gfSAvLyBPcHRpbWlzw6kKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGZpbmFsWSA9IGRvYy5sYXN0QXV0b1RhYmxlLmZpbmFsWSArIDg7IC8vIE9wdGltaXPDqQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLnNldEZvbnRTaXplKDEwKTsgZG9jLnNldEZvbnQoImhlbHZldGljYSIsICJib2xkIik7IGRvYy50ZXh0KCJDT05TSUdORVMgREUgU1VSVkVJTExBTkNFIDoiLCAyMCwgZmluYWxZKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5zZXRGb250KCJoZWx2ZXRpY2EiLCAibm9ybWFsIik7IGZpbmFsWSArPSA2OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBVdGlsaXNhdGlvbiBjb25zaWduZXMgdGVtcGxhdGUKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbnNpZ25lcyA9IHRwbC5jb25zaWduZXMuc3BsaXQoJ1xuJykuZmlsdGVyKGwgPT4gbC50cmltKCkgIT09ICIiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNpZ25lcy5mb3JFYWNoKGxpbmUgPT4geyBkb2MudGV4dChsaW5lLCAyMCwgZmluYWxZKTsgZmluYWxZICs9IDQuNTsgfSk7IC8vIE9wdGltaXPDqQogICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaWduYXR1cmUgVW5pZmnDqWUgQmFzIGRlIFBhZ2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkZFNpZ25hdHVyZUJvdHRvbShmaW5hbFkpOwogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgZG9jLnNhdmUoImNvbnZvY2F0aW9uc19zdXJ2ZWlsbGFudHMucGRmIik7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChkb2NUeXBlID09PSAnY29udm9jYXRpb25zX2Flc2gnKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAvLyAtLS0gQ09OVk9DQVRJT05TIEFFU0ggLS0tCiAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0cGwgPSBkb2NUZW1wbGF0ZXMuYWVzaDsKICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGFlc2hlcyA9IHt9OyAKICAgICAgICAgICAgICAgICAgICAgICAgc3R1ZGVudHMuZmlsdGVyKHMgPT4gcy5hZXNoICYmIHMuYWVzaC50cmltKCkgIT09ICIiKS5mb3JFYWNoKHN0dWRlbnQgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYWVzaE5hbWUgPSBzdHVkZW50LmFlc2gudHJpbSgpLnRvVXBwZXJDYXNlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWFlc2hlc1thZXNoTmFtZV0pIGFlc2hlc1thZXNoTmFtZV0gPSBbXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHN0dWRlbnRSb29tID0gcm9vbXMuZmluZChyID0+IHIuaWQgPT09IHN0dWRlbnQucm9vbUlkKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJvb21OYW1lID0gc3R1ZGVudFJvb20gPyBzdHVkZW50Um9vbS5uYW1lIDogIk5PTiBBRkZFQ1TDiSI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWJqZWN0cy5mb3JFYWNoKHN1YiA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGltZSA9IHN1Yi50aW1lVFQgPyBzdWIudGltZVRUIDogc3ViLnRpbWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWVzaGVzW2Flc2hOYW1lXS5wdXNoKHsgZGF0ZTogc3ViLmRhdGUsIHRpbWU6IHRpbWUsIHN1YmplY3Q6IHN1Yi5uYW1lLCBzdHVkZW50TmFtZTogYCR7c3R1ZGVudC5sYXN0bmFtZX0gJHtzdHVkZW50LmZpcnN0bmFtZX1gLCBzdHVkZW50Q2xhc3M6IHN0dWRlbnQuY2xhc3MsIHJvb206IHJvb21OYW1lIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhZXNoTmFtZXMgPSBPYmplY3Qua2V5cyhhZXNoZXMpLnNvcnQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFlc2hOYW1lcy5sZW5ndGggPT09IDApIHsgc2hvd05vdGlmaWNhdGlvbigiQXVjdW4gQUVTSCAhIiwgImVycm9yIik7IHJldHVybjsgfQogICAgICAgICAgICAgICAgICAgICAgICBhZXNoTmFtZXMuZm9yRWFjaCgobmFtZSwgaW5kZXgpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbmRleCA+IDApIGRvYy5hZGRQYWdlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzbG90cyA9IGFlc2hlc1tuYW1lXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCB5ID0gYWRkSGVhZGVyKHRwbC50aXRsZSwgdHBsLnN1YnRpdGxlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHkgLT0gNTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVXRpbGlzYXRpb24gQm9pdGUgVW5pZmnDqWUKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHkgPSBhZGRSZWNpcGllbnRCb3goWwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGBEZXN0aW5hdGFpcmUgOiAke25hbWV9YCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgU3RhdHV0IDogQWNjb21wYWduYW50IChBRVNIKWAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYFNlc3Npb24gOiAke3NjaG9vbENvbmZpZy5zZXNzaW9uTmFtZSB8fCAnRE5CIEJsYW5jJ31gCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBdLCB5KTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2Muc2V0Rm9udCgiaGVsdmV0aWNhIiwgIm5vcm1hbCIpOyBkb2Muc2V0Rm9udFNpemUoMTEpOyAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEludHJvIHRlbXBsYXRlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzcGxpdEludHJvID0gZG9jLnNwbGl0VGV4dFRvU2l6ZSh0cGwuaW50cm8sIHBhZ2VXaWR0aCAtIDMwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYy50ZXh0KHNwbGl0SW50cm8sIDE1LCB5KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHkgKz0gKHNwbGl0SW50cm8ubGVuZ3RoICogNikgKyAzOyAvLyBPcHRpbWlzw6kKICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLnNldEZvbnQoImhlbHZldGljYSIsICJib2xkIik7IGRvYy50ZXh0KCJQbGFubmluZyBkJ2FjY29tcGFnbmVtZW50IDoiLCAyMCwgeSk7IHkgKz0gNTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRhYmxlQm9keSA9IHNsb3RzLm1hcChzbG90ID0+IFtzbG90LmRhdGUsIHNsb3QudGltZSwgYCR7c2xvdC5zdHVkZW50TmFtZX1cbigke3Nsb3Quc3R1ZGVudENsYXNzfSlgLCBzbG90LnN1YmplY3QsIHNsb3Qucm9vbV0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmF1dG9UYWJsZSh7IAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0WTogeSwgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhZDogW1snRGF0ZScsICdIb3JhaXJlJywgJ8OJbMOodmUnLCAnw4lwcmV1dmUnLCAnU2FsbGUnXV0sIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvZHk6IHRhYmxlQm9keSwgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhlbWU6ICdncmlkJywgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhZFN0eWxlczogeyBmaWxsQ29sb3I6IFsyMzAsIDIzMCwgMjMwXSwgdGV4dENvbG9yOiBbMCwwLDBdLCBmb250U3R5bGU6ICdib2xkJywgbGluZUNvbG9yOiBbMCwwLDBdLCBsaW5lV2lkdGg6IDAuMSB9LCAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZXM6IHsgZm9udFNpemU6IDksIGNlbGxQYWRkaW5nOiAyLjUsIHZhbGlnbjogJ21pZGRsZScsIGxpbmVDb2xvcjogWzAsMCwwXSwgbGluZVdpZHRoOiAwLjEsIHRleHRDb2xvcjogWzAsMCwwXSB9IC8vIE9wdGltaXPDqQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgZmluYWxZID0gZG9jLmxhc3RBdXRvVGFibGUuZmluYWxZICsgODsgLy8gT3B0aW1pc8OpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpZ25hdHVyZSBVbmlmacOpZSBCYXMgZGUgUGFnZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYWRkU2lnbmF0dXJlQm90dG9tKGZpbmFsWSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICBkb2Muc2F2ZSgiY29udm9jYXRpb25zX2Flc2gucGRmIik7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9OwoKICAgICAgICAgICAgLy8gLS0tIE5PVVZFQVUgUkVOREVSIFBPVVIgRE9DVU1FTlRTIEFWRUMgRURJVEVVUiAtLS0KICAgICAgICAgICAgY29uc3QgcmVuZGVyRG9jdW1lbnRzID0gKCkgPT4gKAogICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9InNwYWNlLXktNiBhbmltYXRlLWZhZGUtaW4iPgogICAgICAgICAgICAgICAgICAgIHsvKiBCb3V0b24gcG91ciBvdXZyaXIgbCfDqWRpdGV1ciBkZSB0ZW1wbGF0ZXMgKi99CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9ImZsZXgganVzdGlmeS1iZXR3ZWVuIGl0ZW1zLWNlbnRlciBiZy13aGl0ZSBwLTQgcm91bmRlZC14bCBib3JkZXIgYm9yZGVyLXNsYXRlLTEwMCBzaGFkb3ctc20iPgogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGgzIGNsYXNzTmFtZT0idGV4dC1sZyBmb250LWJvbGQgdGV4dC1zbGF0ZS04MDAiPkNlbnRyZSBkJ2ltcHJlc3Npb248L2gzPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPSJ0ZXh0LXNtIHRleHQtc2xhdGUtNTAwIj5Hw6luw6lyZXogdm9zIGRvY3VtZW50cyBvZmZpY2llbHMuIFZvdXMgcG91dmV6IHBlcnNvbm5hbGlzZXIgbGVzIHRleHRlcyBhdmFudCBpbXByZXNzaW9uLjwvcD4KICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgIDxCdXR0b24gCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBzZXRJc1RlbXBsYXRlRWRpdG9yT3BlbighaXNUZW1wbGF0ZUVkaXRvck9wZW4pfSAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhcmlhbnQ9InNlY29uZGFyeSIgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpY29uPXtpc1RlbXBsYXRlRWRpdG9yT3BlbiA/IENoZWNrIDogRWRpdDN9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2lzVGVtcGxhdGVFZGl0b3JPcGVuID8gImJnLXNreS01MCB0ZXh0LXNreS02MDAgYm9yZGVyLXNreS0yMDAiIDogIiJ9CiAgICAgICAgICAgICAgICAgICAgICAgID4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtpc1RlbXBsYXRlRWRpdG9yT3BlbiA/ICJNYXNxdWVyIGwnw6lkaXRldXIiIDogIkNvbmZpZ3VyZXIgbGVzIE1vZMOobGVzIn0KICAgICAgICAgICAgICAgICAgICAgICAgPC9CdXR0b24+CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CgogICAgICAgICAgICAgICAgICAgIHsvKiDDiWRpdGV1ciBkZSBtb2TDqGxlcyAoQ29uZGl0aW9ubmVsKSAqL30KICAgICAgICAgICAgICAgICAgICB7aXNUZW1wbGF0ZUVkaXRvck9wZW4gJiYgKAogICAgICAgICAgICAgICAgICAgICAgICA8RG9jVGVtcGxhdGVFZGl0b3IgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZXM9e2RvY1RlbXBsYXRlc30gCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRUZW1wbGF0ZXM9e3NldERvY1RlbXBsYXRlc30gCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsb3NlPXsoKSA9PiBzZXRJc1RlbXBsYXRlRWRpdG9yT3BlbihmYWxzZSl9CiAgICAgICAgICAgICAgICAgICAgICAgIC8+CiAgICAgICAgICAgICAgICAgICAgKX0KCiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9ImdyaWQgZ3JpZC1jb2xzLTEgbWQ6Z3JpZC1jb2xzLTIgbGc6Z3JpZC1jb2xzLTMgZ2FwLTYiPgogICAgICAgICAgICAgICAgICAgICAgICB7WwogICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBpZDogJ2V0aXF1ZXR0ZXNfYW5vbnltYXQnLCBsYWJlbDogIsOJdGlxdWV0dGVzIGRlIHRhYmxlIiwgaWNvbjogRmlsZVRleHQsIGRlc2M6ICJQbGFuY2hlIGQnw6l0aXF1ZXR0ZXMgYXZlYyBOb20sIFByw6lub20sIElORSBldCBTYWxsZS4iIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IGlkOiAnZXRpcXVldHRlc190YWJsZV9hbWVuYWdlbWVudHMnLCBsYWJlbDogIsOJdGlxdWV0dGVzIFRhYmxlIChBdmVjIE1lbnRpb24gVFQpIiwgaWNvbjogQ2xvY2ssIGRlc2M6ICJJZGVudGlxdWUgYXV4IMOpdGlxdWV0dGVzIHN0YW5kYXJkcyBhdmVjIG1lbnRpb24gJ1RJRVJTIFRFTVBTJyBlbiByb3VnZS4iIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IGlkOiAncGxhbnNfc2FsbGUnLCBsYWJlbDogIlBsYW5zIGRlIFNhbGxlIiwgaWNvbjogTGF5b3V0RGFzaGJvYXJkLCBkZXNjOiAiTGlzdGUgZGVzIMOpbMOodmVzIHBhciBzYWxsZSBwb3VyIGFmZmljaGFnZS4iIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IGlkOiAnZW1hcmdlbWVudCcsIGxhYmVsOiAiTGlzdGVzIGQnw4ltYXJnZW1lbnQiLCBpY29uOiBGaWxlU3ByZWFkc2hlZXQsIGRlc2M6ICJGZXVpbGxlcyBkZSBzaWduYXR1cmVzIHN0YW5kYXJkcyBwYXIgw6lwcmV1dmUuIiB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBpZDogJ2VtYXJnZW1lbnRfdHQnLCBsYWJlbDogIsOJbWFyZ2VtZW50IChBdmVjIE1lbnRpb24gVFQpIiwgaWNvbjogRmlsZVNwcmVhZHNoZWV0LCBkZXNjOiAiTGlzdGVzIGF2ZWMgY29sb25uZSBzcMOpY2lmaXF1ZSBwb3VyIHbDqXJpZmllciBsZXMgYW3DqW5hZ2VtZW50cy4iIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IGlkOiAncG9jaGV0dGVzJywgbGFiZWw6ICJQb2NoZXR0ZXMgZGUgQ29waWVzIiwgaWNvbjogRmlsZVRleHQsIGRlc2M6ICJHcmFuZGVzIMOpdGlxdWV0dGVzIHBvdXIgbGVzIGVudmVsb3BwZXMuIiB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBpZDogJ2V0aXF1ZXR0ZXNfY29waWVzX2luZGl2aWR1ZWxsZXMnLCBsYWJlbDogIsOJdGlxdWV0dGVzIENvcGllcyAoRXhjZWwpIiwgaWNvbjogRmlsZVNwcmVhZHNoZWV0LCBkZXNjOiAiRmljaGllciBFeGNlbCBwb3VyIHB1YmxpcG9zdGFnZSAoTsKwICsgTWF0acOocmUgKyBOb20pLiIgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgaWQ6ICdldGlxdWV0dGVzX2NvcGllc19wZGYnLCBsYWJlbDogIsOJdGlxdWV0dGVzIENvcGllcyAoUERGKSIsIGljb246IFByaW50ZXIsIGRlc2M6ICJGb3JtYXQgMTA1eDM1bW0uIFBhcnRpZSBBbm9ueW1hdCBkw6l0YWNow6llLiIgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgaWQ6ICdsaXN0ZXNfY29ycmVjdGlvbl9kZXRhaWwnLCBsYWJlbDogIkxpc3RlcyBkZSBDb250csO0bGUgKEE0KSIsIGljb246IExpc3QsIGRlc2M6ICJGZXVpbGxlIEE0IHBhciBjb3JyZWN0ZXVyIGF2ZWMgbGlzdGUgZGVzIG51bcOpcm9zIMOgIGNvcnJpZ2VyLiIgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIERvY3VtZW50cyBQZXJzb25uYWxpc2FibGVzCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IGlkOiAnY29udm9jYXRpb25zJywgbGFiZWw6ICJDb252b2NhdGlvbnMgw4lsw6h2ZXMiLCBpY29uOiBGaWxlVGV4dCwgZGVzYzogIkNvbnZvY2F0aW9ucyBpbmRpdmlkdWVsbGVzIEE0IGF2ZWMgZW1wbG9pIGR1IHRlbXBzIGV0IHNhbGxlLiIsIGN1c3RvbTogdHJ1ZSB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBpZDogJ2NvbnZvY2F0aW9uc19zdXJ2ZWlsbGFudHMnLCBsYWJlbDogIkNvbnZvY2F0aW9ucyBTdXJ2ZWlsbGFudHMiLCBpY29uOiBFeWUsIGRlc2M6ICJPcmRyZXMgZGUgbWlzc2lvbiBpbmRpdmlkdWVscyBwb3VyIGxhIHN1cnZlaWxsYW5jZS4iLCBjdXN0b206IHRydWUgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgaWQ6ICdjb252b2NhdGlvbnNfYWVzaCcsIGxhYmVsOiAiQ29udm9jYXRpb25zIEFFU0giLCBpY29uOiBVc2VycywgZGVzYzogIk9yZHJlcyBkZSBtaXNzaW9uIHBvdXIgbGVzIGFjY29tcGFnbmFudHMgcGFyIMOpbMOodmUuIiwgY3VzdG9tOiB0cnVlIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IGlkOiAnY29udm9jYXRpb25zX3NlY3JldGFyaWF0JywgbGFiZWw6ICJDb252b2NhdGlvbnMgU2VjcsOpdGFyaWF0IiwgaWNvbjogQXJjaGl2ZSwgZGVzYzogIk9yZHJlcyBkZSBtaXNzaW9uIHBvdXIgbGEgZ2VzdGlvbiBkZSBmaW4gZCfDqXByZXV2ZS4iLCBjdXN0b206IHRydWUgfSwKICAgICAgICAgICAgICAgICAgICAgICAgXS5tYXAoZG9jID0+ICgKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYga2V5PXtkb2MuaWR9IGNsYXNzTmFtZT17YGJnLXdoaXRlIGJvcmRlciByb3VuZGVkLXhsIHAtNiBob3ZlcjpzaGFkb3ctbGcgdHJhbnNpdGlvbi1hbGwgdHJhbnNmb3JtIGhvdmVyOi10cmFuc2xhdGUteS0xIHRleHQtY2VudGVyIGZsZXggZmxleC1jb2wgaXRlbXMtY2VudGVyIGN1cnNvci1wb2ludGVyICR7ZG9jLmN1c3RvbSA/ICdib3JkZXItc2t5LTEwMCByaW5nLTEgcmluZy1za3ktNTAnIDogJ2JvcmRlci1zbGF0ZS0xMDAnfWB9IG9uQ2xpY2s9eygpID0+IGRvYy5pZCAhPT0gJ2V0aXF1ZXR0ZXNfY29waWVzX2luZGl2aWR1ZWxsZXMnID8gZ2VuZXJhdGVQREYoZG9jLmlkKSA6IGhhbmRsZUV4cG9ydCgnY29weV9sYWJlbHMnKX0+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9e2BwLTQgcm91bmRlZC1mdWxsIG1iLTQgJHtkb2MuY3VzdG9tID8gJ2JnLXNreS0xMDAnIDogJ2JnLXNsYXRlLTUwJ31gfT57ZG9jLmljb24gPyA8ZG9jLmljb24gY2xhc3NOYW1lPXtgdy04IGgtOCAke2RvYy5jdXN0b20gPyAndGV4dC1za3ktNjAwJyA6ICd0ZXh0LXNsYXRlLTUwMCd9YH0gLz4gOiBudWxsfTwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMyBjbGFzc05hbWU9InRleHQtbGcgZm9udC1ib2xkIHRleHQtc2xhdGUtODAwIG1iLTIiPntkb2MubGFiZWx9PC9oMz4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9InRleHQtc20gdGV4dC1zbGF0ZS01MDAgbWItNiBmbGV4LWdyb3ciPntkb2MuZGVzY308L3A+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RvYy5pZCAhPT0gJ2V0aXF1ZXR0ZXNfY29waWVzX2luZGl2aWR1ZWxsZXMnICYmICgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvbiBvbkNsaWNrPXsoZSkgPT4geyBlLnN0b3BQcm9wYWdhdGlvbigpOyBnZW5lcmF0ZVBERihkb2MuaWQpOyB9fSBpY29uPXtQcmludGVyfSBjbGFzc05hbWU9InctZnVsbCI+R8OpbsOpcmVyIFBERjwvQnV0dG9uPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MuaWQgPT09ICdldGlxdWV0dGVzX2NvcGllc19pbmRpdmlkdWVsbGVzJyAmJiAoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uIG9uQ2xpY2s9eyhlKSA9PiB7IGUuc3RvcFByb3BhZ2F0aW9uKCk7IGhhbmRsZUV4cG9ydCgnY29weV9sYWJlbHMnKTsgfX0gdmFyaWFudD0icHJpbWFyeSIgaWNvbj17RmlsZVNwcmVhZHNoZWV0fSBjbGFzc05hbWU9InctZnVsbCI+RXhwb3J0ZXIgRXhjZWw8L0J1dHRvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkb2MuY3VzdG9tICYmIDxzcGFuIGNsYXNzTmFtZT0ibXQtMiB0ZXh0LVsxMHB4XSB0ZXh0LXNreS01MDAgZm9udC1tZWRpdW0gYmctc2t5LTUwIHB4LTIgcHktMC41IHJvdW5kZWQtZnVsbCI+VGV4dGUgUGVyc29ubmFsaXNhYmxlPC9zcGFuPn0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICApKX0KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICApOwoKICAgICAgICAgICAgLy8gLS0tIFJFTkRFUiBDT05GSUcgLS0tCiAgICAgICAgICAgIGNvbnN0IHJlbmRlckNvbmZpZyA9ICgpID0+ICgKICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJzcGFjZS15LTYgYW5pbWF0ZS1mYWRlLWluIj4KICAgICAgICAgICAgICAgICAgICB7LyogRMOJUExBQ8OJIEVOIEhBVVQgOiBCTE9DIEFETUlOSVNUUkFUSU9OICovfQogICAgICAgICAgICAgICAgICAgIDxDYXJkIHRpdGxlPSJBZG1pbmlzdHJhdGlvbiBkZXMgRG9ubsOpZXMiPgogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iZ3JpZCBncmlkLWNvbHMtMSBtZDpncmlkLWNvbHMtMiBsZzpncmlkLWNvbHMtNCBnYXAtNiI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iYmctc2t5LTUwIHAtNiByb3VuZGVkLXhsIGJvcmRlciBib3JkZXItc2t5LTEwMCBmbGV4IGZsZXgtY29sIGl0ZW1zLWNlbnRlciB0ZXh0LWNlbnRlciI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9ImJnLXdoaXRlIHAtMyByb3VuZGVkLWZ1bGwgc2hhZG93LXNtIG1iLTMiPjxTYXZlIGNsYXNzTmFtZT0idy02IGgtNiB0ZXh0LXNreS01MDAiIC8+PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGg0IGNsYXNzTmFtZT0iZm9udC1zZW1pYm9sZCB0ZXh0LXNsYXRlLTgwMCI+U2F1dmVnYXJkZXI8L2g0PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxCdXR0b24gb25DbGljaz17aGFuZGxlU2F2ZVdvcmt9IGljb249e0Rvd25sb2FkfSBjbGFzc05hbWU9Im10LTQgdy1mdWxsIHRleHQteHMiPlTDqWzDqWNoYXJnZXIgKEpTT04pPC9CdXR0b24+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJiZy1lbWVyYWxkLTUwIHAtNiByb3VuZGVkLXhsIGJvcmRlciBib3JkZXItZW1lcmFsZC0xMDAgZmxleCBmbGV4LWNvbCBpdGVtcy1jZW50ZXIgdGV4dC1jZW50ZXIiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJiZy13aGl0ZSBwLTMgcm91bmRlZC1mdWxsIHNoYWRvdy1zbSBtYi0zIj48VXBsb2FkIGNsYXNzTmFtZT0idy02IGgtNiB0ZXh0LWVtZXJhbGQtNTAwIiAvPjwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoNCBjbGFzc05hbWU9ImZvbnQtc2VtaWJvbGQgdGV4dC1zbGF0ZS04MDAiPlJlc3RhdXJlcjwvaDQ+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzTmFtZT0ibXQtNCBjdXJzb3ItcG9pbnRlciBiZy13aGl0ZSBweS0yIHB4LTQgYm9yZGVyIGJvcmRlci1lbWVyYWxkLTIwMCByb3VuZGVkLWxnIHNoYWRvdy1zbSB0ZXh0LXhzIGZvbnQtbWVkaXVtIHRleHQtZW1lcmFsZC02MDAgaG92ZXI6YmctZW1lcmFsZC01MCB3LWZ1bGwgaW5saW5lLWJsb2NrIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4+Q2hvaXNpciBmaWNoaWVyLi4uPC9zcGFuPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0iZmlsZSIgY2xhc3NOYW1lPSJzci1vbmx5IiBhY2NlcHQ9Ii5qc29uIiBvbkNoYW5nZT17aGFuZGxlTG9hZFdvcmt9IC8+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iYmctaW5kaWdvLTUwIHAtNiByb3VuZGVkLXhsIGJvcmRlciBib3JkZXItaW5kaWdvLTEwMCBmbGV4IGZsZXgtY29sIGl0ZW1zLWNlbnRlciB0ZXh0LWNlbnRlciI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9ImJnLXdoaXRlIHAtMyByb3VuZGVkLWZ1bGwgc2hhZG93LXNtIG1iLTMiPjxCZWFrZXIgY2xhc3NOYW1lPSJ3LTYgaC02IHRleHQtaW5kaWdvLTUwMCIgLz48L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDQgY2xhc3NOYW1lPSJmb250LXNlbWlib2xkIHRleHQtc2xhdGUtODAwIj5Nb2RlIETDqW1vPC9oND4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uIG9uQ2xpY2s9e2xvYWRHbG9iYWxEZW1vRGF0YX0gdmFyaWFudD0icHJpbWFyeSIgY2xhc3NOYW1lPSJtdC00IHctZnVsbCBiZy1pbmRpZ28tNTAwIGhvdmVyOmJnLWluZGlnby02MDAgdGV4dC14cyI+Q2hhcmdlciBEb25uw6llczwvQnV0dG9uPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9ImJnLXJvc2UtNTAgcC02IHJvdW5kZWQteGwgYm9yZGVyIGJvcmRlci1yb3NlLTEwMCBmbGV4IGZsZXgtY29sIGl0ZW1zLWNlbnRlciB0ZXh0LWNlbnRlciI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9ImJnLXdoaXRlIHAtMyByb3VuZGVkLWZ1bGwgc2hhZG93LXNtIG1iLTMiPjxSb3RhdGVDY3cgY2xhc3NOYW1lPSJ3LTYgaC02IHRleHQtcm9zZS01MDAiIC8+PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGg0IGNsYXNzTmFtZT0iZm9udC1zZW1pYm9sZCB0ZXh0LXNsYXRlLTgwMCI+Wm9uZSBkZSBEYW5nZXI8L2g0PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxCdXR0b24gb25DbGljaz17aGFuZGxlR2xvYmFsUmVzZXR9IHZhcmlhbnQ9ImRhbmdlciIgY2xhc3NOYW1lPSJtdC00IHctZnVsbCB0ZXh0LXhzIj5Sw6lpbml0aWFsaXNhdGlvbjwvQnV0dG9uPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgIDwvQ2FyZD4KCiAgICAgICAgICAgICAgICAgICAgPENhcmQgdGl0bGU9IkNvbmZpZ3VyYXRpb24gZGUgbCfDiXRhYmxpc3NlbWVudCIgaWNvbj17U2Nob29sfT4KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9ImdyaWQgZ3JpZC1jb2xzLTEgbWQ6Z3JpZC1jb2xzLTIgZ2FwLTYiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9InNwYWNlLXktNCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj48bGFiZWwgY2xhc3NOYW1lPSJibG9jayB0ZXh0LXNtIGZvbnQtbWVkaXVtIHRleHQtc2xhdGUtNzAwIj5Ob20gZHUgQ29sbMOoZ2U8L2xhYmVsPjxpbnB1dCB0eXBlPSJ0ZXh0IiB2YWx1ZT17c2Nob29sQ29uZmlnLm5hbWV9IG9uQ2hhbmdlPXsoZSkgPT4gc2V0U2Nob29sQ29uZmlnKHsuLi5zY2hvb2xDb25maWcsIG5hbWU6IGUudGFyZ2V0LnZhbHVlfSl9IGNsYXNzTmFtZT0idy1mdWxsIHAtMiBib3JkZXIgcm91bmRlZCBmb2N1czpyaW5nLTIgZm9jdXM6cmluZy1za3ktMjAwIG91dGxpbmUtbm9uZSIgLz48L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PjxsYWJlbCBjbGFzc05hbWU9ImJsb2NrIHRleHQtc20gZm9udC1tZWRpdW0gdGV4dC1zbGF0ZS03MDAiPlZpbGxlPC9sYWJlbD48aW5wdXQgdHlwZT0idGV4dCIgdmFsdWU9e3NjaG9vbENvbmZpZy5jaXR5fSBvbkNoYW5nZT17KGUpID0+IHNldFNjaG9vbENvbmZpZyh7Li4uc2Nob29sQ29uZmlnLCBjaXR5OiBlLnRhcmdldC52YWx1ZX0pfSBjbGFzc05hbWU9InctZnVsbCBwLTIgYm9yZGVyIHJvdW5kZWQgZm9jdXM6cmluZy0yIGZvY3VzOnJpbmctc2t5LTIwMCBvdXRsaW5lLW5vbmUiIC8+PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj48bGFiZWwgY2xhc3NOYW1lPSJibG9jayB0ZXh0LXNtIGZvbnQtbWVkaXVtIHRleHQtc2xhdGUtNzAwIj5Ob20gZHUgQ2hlZiBkJ8OJdGFibGlzc2VtZW50PC9sYWJlbD48aW5wdXQgdHlwZT0idGV4dCIgdmFsdWU9e3NjaG9vbENvbmZpZy5wcmluY2lwYWx9IG9uQ2hhbmdlPXsoZSkgPT4gc2V0U2Nob29sQ29uZmlnKHsuLi5zY2hvb2xDb25maWcsIHByaW5jaXBhbDogZS50YXJnZXQudmFsdWV9KX0gY2xhc3NOYW1lPSJ3LWZ1bGwgcC0yIGJvcmRlciByb3VuZGVkIGZvY3VzOnJpbmctMiBmb2N1czpyaW5nLXNreS0yMDAgb3V0bGluZS1ub25lIiAvPjwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+PGxhYmVsIGNsYXNzTmFtZT0iYmxvY2sgdGV4dC1zbSBmb250LW1lZGl1bSB0ZXh0LXNsYXRlLTcwMCI+Tm9tIGRlIGxhIFNlc3Npb248L2xhYmVsPjxpbnB1dCB0eXBlPSJ0ZXh0IiB2YWx1ZT17c2Nob29sQ29uZmlnLnNlc3Npb25OYW1lfSBvbkNoYW5nZT17KGUpID0+IHNldFNjaG9vbENvbmZpZyh7Li4uc2Nob29sQ29uZmlnLCBzZXNzaW9uTmFtZTogZS50YXJnZXQudmFsdWV9KX0gY2xhc3NOYW1lPSJ3LWZ1bGwgcC0yIGJvcmRlciByb3VuZGVkIGZvY3VzOnJpbmctMiBmb2N1czpyaW5nLXNreS0yMDAgb3V0bGluZS1ub25lIiAvPjwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iZmxleCBmbGV4LWNvbCBnYXAtNCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9ImZsZXggZmxleC1jb2wgaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIGJvcmRlci0yIGJvcmRlci1kYXNoZWQgYm9yZGVyLXNsYXRlLTMwMCByb3VuZGVkLWxnIHAtMyBiZy1zbGF0ZS01MCBmbGV4LTEiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7c2Nob29sQ29uZmlnLmxvZ29VcmwgPyA8aW1nIHNyYz17c2Nob29sQ29uZmlnLmxvZ29Vcmx9IGFsdD0iTG9nbyIgY2xhc3NOYW1lPSJoLTE2IG9iamVjdC1jb250YWluIG1iLTIiIC8+IDogPGRpdiBjbGFzc05hbWU9ImgtMTYgdy0xNiBiZy1zbGF0ZS0yMDAgcm91bmRlZC1mdWxsIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIG1iLTIgdGV4dC1zbGF0ZS00MDAiPjxTY2hvb2wgY2xhc3NOYW1lPSJ3LTggaC04IiAvPjwvZGl2Pn0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzTmFtZT0iY3Vyc29yLXBvaW50ZXIgYmctd2hpdGUgYm9yZGVyIGJvcmRlci1zbGF0ZS0zMDAgaG92ZXI6Ymctc2xhdGUtNTAgdGV4dC1zbGF0ZS03MDAgZm9udC1tZWRpdW0gcHktMS41IHB4LTMgdGV4dC14cyByb3VuZGVkLWxnIHNoYWRvdy1zbSB0cmFuc2l0aW9uLWFsbCI+PFVwbG9hZCBjbGFzc05hbWU9InctMyBoLTMgaW5saW5lIG1yLTEiIC8+SW1wb3J0ZXIgTG9nbzxpbnB1dCB0eXBlPSJmaWxlIiBhY2NlcHQ9ImltYWdlLyoiIG9uQ2hhbmdlPXtoYW5kbGVMb2dvVXBsb2FkfSBjbGFzc05hbWU9ImhpZGRlbiIgLz48L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJmbGV4IGZsZXgtY29sIGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBib3JkZXItMiBib3JkZXItZGFzaGVkIGJvcmRlci1pbmRpZ28tMjAwIHJvdW5kZWQtbGcgcC0zIGJnLWluZGlnby01MCBmbGV4LTEiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7c2Nob29sQ29uZmlnLnN0YW1wVXJsID8gPGltZyBzcmM9e3NjaG9vbENvbmZpZy5zdGFtcFVybH0gYWx0PSJDYWNoZXQiIGNsYXNzTmFtZT0iaC0xNiBvYmplY3QtY29udGFpbiBtYi0yIiAvPiA6IDxkaXYgY2xhc3NOYW1lPSJoLTE2IHctMTYgYmctaW5kaWdvLTIwMCByb3VuZGVkLWZ1bGwgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgbWItMiB0ZXh0LWluZGlnby00MDAiPjxTdGFtcCBjbGFzc05hbWU9InctOCBoLTgiIC8+PC9kaXY+fQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3NOYW1lPSJjdXJzb3ItcG9pbnRlciBiZy13aGl0ZSBib3JkZXIgYm9yZGVyLWluZGlnby0zMDAgaG92ZXI6YmctaW5kaWdvLTUwIHRleHQtaW5kaWdvLTcwMCBmb250LW1lZGl1bSBweS0xLjUgcHgtMyB0ZXh0LXhzIHJvdW5kZWQtbGcgc2hhZG93LXNtIHRyYW5zaXRpb24tYWxsIj48VXBsb2FkIGNsYXNzTmFtZT0idy0zIGgtMyBpbmxpbmUgbXItMSIgLz5JbXBvcnRlciBDYWNoZXQ8aW5wdXQgdHlwZT0iZmlsZSIgYWNjZXB0PSJpbWFnZS8qIiBvbkNoYW5nZT17aGFuZGxlU3RhbXBVcGxvYWR9IGNsYXNzTmFtZT0iaGlkZGVuIiAvPjwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPC9DYXJkPgoKICAgICAgICAgICAgICAgICAgICA8Q2FyZCB0aXRsZT0iQ29uZmlndXJhdGlvbiBkZXMgw4lwcmV1dmVzIiBpY29uPXtDbG9ja30+CiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJzcGFjZS15LTQiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAge3N1YmplY3RzLm1hcChzdWJqZWN0ID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0aW1lcyA9IHBhcnNlVGltZVJhbmdlKHN1YmplY3QudGltZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGltZXNUVCA9IHBhcnNlVGltZVJhbmdlKHN1YmplY3QudGltZVRUKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYga2V5PXtzdWJqZWN0LmlkfSBjbGFzc05hbWU9ImJnLXNsYXRlLTUwIHAtNCByb3VuZGVkLWxnIGJvcmRlciBib3JkZXItc2xhdGUtMjAwIGZsZXggZmxleC1jb2wgZ2FwLTQiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iZmxleC1ncm93IGdyaWQgZ3JpZC1jb2xzLTEgbWQ6Z3JpZC1jb2xzLTEyIGdhcC00IHctZnVsbCBpdGVtcy1jZW50ZXIiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9Im1kOmNvbC1zcGFuLTMiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzc05hbWU9ImJsb2NrIHRleHQtWzEwcHhdIHVwcGVyY2FzZSBmb250LWJvbGQgdGV4dC1zbGF0ZS00MDAgbWItMSI+Tm9tIGRlIGwnw6lwcmV1dmU8L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiB2YWx1ZT17c3ViamVjdC5uYW1lfSBvbkNoYW5nZT17KGUpID0+IGhhbmRsZVVwZGF0ZVN1YmplY3Qoc3ViamVjdC5pZCwgJ25hbWUnLCBlLnRhcmdldC52YWx1ZSl9IGNsYXNzTmFtZT0idy1mdWxsIHAtMiBib3JkZXIgcm91bmRlZCBmb250LWJvbGQgdGV4dC1zbGF0ZS03MDAgZm9jdXM6cmluZy0yIGZvY3VzOnJpbmctc2t5LTIwMCBvdXRsaW5lLW5vbmUiIC8+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJtZDpjb2wtc3Bhbi0yIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3NOYW1lPSJibG9jayB0ZXh0LVsxMHB4XSB1cHBlcmNhc2UgZm9udC1ib2xkIHRleHQtc2xhdGUtNDAwIG1iLTEiPkRhdGU8L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsvKiBSZW1wbGFjZW1lbnQgZHUgY2hhbXAgdGV4dGUgcGFyIHVuIGNoYW1wIERBVEUgKi99CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPSJkYXRlIiAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU9e3BhcnNlRnJlbmNoU3RyaW5nVG9Jc28oc3ViamVjdC5kYXRlKX0gCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4gaGFuZGxlRGF0ZUNoYW5nZShzdWJqZWN0LmlkLCBlLnRhcmdldC52YWx1ZSl9IAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9InctZnVsbCBwLTIgYm9yZGVyIHJvdW5kZWQgdGV4dC1zbSBmb2N1czpyaW5nLTIgZm9jdXM6cmluZy1za3ktMjAwIG91dGxpbmUtbm9uZSBjdXJzb3ItcG9pbnRlciIgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7LyogQWZmaWNoYWdlIGRpc2NyZXQgZGUgbGEgZGF0ZSBmb3JtYXTDqWUgcG91ciBjb250csO0bGUgKi99CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9InRleHQtWzEwcHhdIHRleHQtc2xhdGUtNDAwIG10LTAuNSB0cnVuY2F0ZSBwbC0xIj57c3ViamVjdC5kYXRlfTwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsvKiBOb3V2ZWF1IFPDqWxlY3RldXIgZCdIb3JhaXJlIFN0YW5kYXJkICovfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9Im1kOmNvbC1zcGFuLTMiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzc05hbWU9ImJsb2NrIHRleHQtWzEwcHhdIHVwcGVyY2FzZSBmb250LWJvbGQgdGV4dC1zbGF0ZS00MDAgbWItMSI+SG9yYWlyZSAoU3RhbmRhcmQpPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iZmxleCBpdGVtcy1jZW50ZXIgc3BhY2UteC0xIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT0idGltZSIgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17dGltZXMuc3RhcnR9IAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiBoYW5kbGVUaW1lVXBkYXRlKHN1YmplY3QuaWQsICd0aW1lJywgZS50YXJnZXQudmFsdWUsIHRpbWVzLmVuZCl9IAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPSJwLTIgYm9yZGVyIGJvcmRlci1zbGF0ZS0zMDAgcm91bmRlZCB0ZXh0LXNtIHctZnVsbCBmb2N1czpyaW5nLTIgZm9jdXM6cmluZy1za3ktMjAwIG91dGxpbmUtbm9uZSBmb250LW1vbm8iIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9InRleHQtc2xhdGUtNDAwIj4tPC9zcGFuPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPSJ0aW1lIiAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXt0aW1lcy5lbmR9IAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiBoYW5kbGVUaW1lVXBkYXRlKHN1YmplY3QuaWQsICd0aW1lJywgdGltZXMuc3RhcnQsIGUudGFyZ2V0LnZhbHVlKX0gCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9InAtMiBib3JkZXIgYm9yZGVyLXNsYXRlLTMwMCByb3VuZGVkIHRleHQtc20gdy1mdWxsIGZvY3VzOnJpbmctMiBmb2N1czpyaW5nLXNreS0yMDAgb3V0bGluZS1ub25lIGZvbnQtbW9ubyIgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7LyogTm91dmVhdSBTw6lsZWN0ZXVyIGQnSG9yYWlyZSBUVCBhdmVjIENhbGN1bCBBdXRvICovfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9Im1kOmNvbC1zcGFuLTMgcmVsYXRpdmUiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJmbGV4IGp1c3RpZnktYmV0d2VlbiBpdGVtcy1jZW50ZXIgbWItMSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzc05hbWU9ImJsb2NrIHRleHQtWzEwcHhdIHVwcGVyY2FzZSBmb250LWJvbGQgdGV4dC1yb3NlLTQwMCI+SG9yYWlyZSAoVGllcnMtVGVtcHMpPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHRyaWdnZXJBdXRvVFQoc3ViamVjdC5pZCl9IAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPSJ0ZXh0LVs5cHhdIGJnLXJvc2UtNTAgdGV4dC1yb3NlLTYwMCBweC0yIHB5LTAuNSByb3VuZGVkIGJvcmRlciBib3JkZXItcm9zZS0xMDAgaG92ZXI6Ymctcm9zZS0xMDAgZmxleCBpdGVtcy1jZW50ZXIgdHJhbnNpdGlvbi1jb2xvcnMiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZT0iQ2FsY3VsZXIgYXV0b21hdGlxdWVtZW50ICgrMS8zIGR1IHRlbXBzKSIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENhbGN1bGF0b3IgY2xhc3NOYW1lPSJ3LTMgaC0zIG1yLTEiIC8+IEF1dG8KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9ImZsZXggaXRlbXMtY2VudGVyIHNwYWNlLXgtMSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9InRpbWUiIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU9e3RpbWVzVFQuc3RhcnR9IAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiBoYW5kbGVUaW1lVXBkYXRlKHN1YmplY3QuaWQsICd0aW1lVFQnLCBlLnRhcmdldC52YWx1ZSwgdGltZXNUVC5lbmQpfSAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0icC0yIGJvcmRlciBib3JkZXItcm9zZS0yMDAgcm91bmRlZCB0ZXh0LXNtIHctZnVsbCB0ZXh0LXJvc2UtNzAwIGZvbnQtYm9sZCBmb2N1czpyaW5nLTIgZm9jdXM6cmluZy1yb3NlLTIwMCBvdXRsaW5lLW5vbmUgZm9udC1tb25vIiAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPSJ0ZXh0LXNsYXRlLTQwMCI+LTwvc3Bhbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT0idGltZSIgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17dGltZXNUVC5lbmR9IAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhZE9ubHkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0icC0yIGJvcmRlciBib3JkZXItc2xhdGUtMjAwIGJnLXNsYXRlLTEwMCByb3VuZGVkIHRleHQtc20gdy1mdWxsIHRleHQtc2xhdGUtNTAwIGZvbnQtYm9sZCBmb250LW1vbm8gY3Vyc29yLW5vdC1hbGxvd2VkIiAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPSJDYWxjdWzDqSBhdXRvbWF0aXF1ZW1lbnQgdmlhIGxlIGJvdXRvbiBBdXRvIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9Im1kOmNvbC1zcGFuLTEgZmxleCBqdXN0aWZ5LWVuZCBpdGVtcy1lbmQgaC1mdWxsIHBiLTEiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gb25DbGljaz17KCkgPT4gaGFuZGxlRGVsZXRlU3ViamVjdChzdWJqZWN0LmlkKX0gY2xhc3NOYW1lPSJ0ZXh0LXNsYXRlLTMwMCBob3Zlcjp0ZXh0LXJlZC01MDAgcC0yIHRyYW5zaXRpb24tY29sb3JzIj48VHJhc2gyIGNsYXNzTmFtZT0idy01IGgtNSIgLz48L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3N1YmplY3QuaWQgPT09IDQgJiYgKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9InctZnVsbCBtdC0yIHB0LTIgYm9yZGVyLXQgYm9yZGVyLXNsYXRlLTEwMCBmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMiI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPSJ0ZXh0LXhzIGZvbnQtYm9sZCB0ZXh0LXNsYXRlLTUwMCBtci0yIj5EaXNjaXBsaW5lcyA6PC9zcGFuPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtbJ1BoeXNpcXVlLUNoaW1pZScsICdTVlQnLCAnVGVjaG5vbG9naWUnXS5tYXAoZGlzYyA9PiAoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24ga2V5PXtkaXNjfSBvbkNsaWNrPXsoKSA9PiB0b2dnbGVTY2llbmNlRGlzY2lwbGluZShkaXNjKX0gY2xhc3NOYW1lPXtgcHgtMiBweS0xIHRleHQteHMgcm91bmRlZCBib3JkZXIgdHJhbnNpdGlvbi1jb2xvcnMgJHtzdWJqZWN0LmRpc2NpcGxpbmVzLmluY2x1ZGVzKGRpc2MpID8gJ2JnLWdyZWVuLTEwMCBib3JkZXItZ3JlZW4tMzAwIHRleHQtZ3JlZW4tODAwIGZvbnQtbWVkaXVtIHNoYWRvdy1zbScgOiAnYmctd2hpdGUgYm9yZGVyLXNsYXRlLTMwMCB0ZXh0LXNsYXRlLTQwMCBob3ZlcjpiZy1zbGF0ZS01MCd9YH0+e2Rpc2N9PC9idXR0b24+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSl9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7fSl9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iZmxleCBnYXAtNCBpdGVtcy1lbmQgYmctc2t5LTUwIHAtNCByb3VuZGVkLWxnIGJvcmRlciBib3JkZXItc2t5LTEwMCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9ImZsZXgtZ3JvdyBncmlkIGdyaWQtY29scy0xIG1kOmdyaWQtY29scy00IGdhcC00Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzc05hbWU9InRleHQteHMgdGV4dC1za3ktNzAwIGZvbnQtYm9sZCI+Tm91dmVsbGUgw4lwcmV1dmU8L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9InRleHQiIHZhbHVlPXtuZXdTdWJqZWN0Lm5hbWV9IG9uQ2hhbmdlPXsoZSkgPT4gc2V0TmV3U3ViamVjdCh7Li4ubmV3U3ViamVjdCwgbmFtZTogZS50YXJnZXQudmFsdWV9KX0gY2xhc3NOYW1lPSJ3LWZ1bGwgcC0yIGJvcmRlciByb3VuZGVkIiBwbGFjZWhvbGRlcj0iTm9tIiAvPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzc05hbWU9InRleHQteHMgdGV4dC1za3ktNzAwIGZvbnQtYm9sZCI+RGF0ZTwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7LyogQ2hhbXAgRGF0ZSBwb3VyIE5vdXZlbGxlIMOJcHJldXZlICovfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9ImRhdGUiIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXtwYXJzZUZyZW5jaFN0cmluZ1RvSXNvKG5ld1N1YmplY3QuZGF0ZSl9IAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4gaGFuZGxlRGF0ZUNoYW5nZSgnbmV3JywgZS50YXJnZXQudmFsdWUpfSAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9InctZnVsbCBwLTIgYm9yZGVyIHJvdW5kZWQgY3Vyc29yLXBvaW50ZXIiIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+PGxhYmVsIGNsYXNzTmFtZT0idGV4dC14cyB0ZXh0LXNreS03MDAgZm9udC1ib2xkIj5Ib3JhaXJlPC9sYWJlbD48aW5wdXQgdHlwZT0idGV4dCIgdmFsdWU9e25ld1N1YmplY3QudGltZX0gb25DaGFuZ2U9eyhlKSA9PiBzZXROZXdTdWJqZWN0KHsuLi5uZXdTdWJqZWN0LCB0aW1lOiBlLnRhcmdldC52YWx1ZX0pfSBjbGFzc05hbWU9InctZnVsbCBwLTIgYm9yZGVyIHJvdW5kZWQiIHBsYWNlaG9sZGVyPSIwMDowMCAtIDAwOjAwIiAvPjwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PjxsYWJlbCBjbGFzc05hbWU9InRleHQteHMgdGV4dC1za3ktNzAwIGZvbnQtYm9sZCI+SG9yYWlyZSBUVDwvbGFiZWw+PGlucHV0IHR5cGU9InRleHQiIHZhbHVlPXtuZXdTdWJqZWN0LnRpbWVUVH0gb25DaGFuZ2U9eyhlKSA9PiBzZXROZXdTdWJqZWN0KHsuLi5uZXdTdWJqZWN0LCB0aW1lVFQ6IGUudGFyZ2V0LnZhbHVlfSl9IGNsYXNzTmFtZT0idy1mdWxsIHAtMiBib3JkZXIgcm91bmRlZCIgcGxhY2Vob2xkZXI9IjAwOjAwIC0gMDA6MDAiIC8+PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvbiBvbkNsaWNrPXtoYW5kbGVBZGRTdWJqZWN0fSBpY29uPXtQbHVzfT5Bam91dGVyPC9CdXR0b24+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPC9DYXJkPgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICk7CgogICAgICAgICAgICAvLyAtLS0gUkVOREVSIERBVEEgLS0tCiAgICAgICAgICAgIGNvbnN0IHJlbmRlckRhdGEgPSAoKSA9PiAoCiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ic3BhY2UteS02IGFuaW1hdGUtZmFkZS1pbiI+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9ImdyaWQgZ3JpZC1jb2xzLTEgbWQ6Z3JpZC1jb2xzLTMgZ2FwLTYiPgogICAgICAgICAgICAgICAgICAgICAgICB7WwogICAgICAgICAgICAgICAgICAgICAgICAgICAgeyB0eXBlOiAnc3R1ZGVudHMnLCBsYWJlbDogJ8OJbMOodmVzJywgaWNvbjogVXNlcnMsIGRhdGE6IHN0dWRlbnRzLCBjb2xvcjogJ3NreScgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgdHlwZTogJ3Jvb21zJywgbGFiZWw6ICdTYWxsZXMnLCBpY29uOiBMYXlvdXREYXNoYm9hcmQsIGRhdGE6IHJvb21zLCBjb2xvcjogJ2VtZXJhbGQnIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IHR5cGU6ICd0ZWFjaGVycycsIGxhYmVsOiAnUHJvZmVzc2V1cnMnLCBpY29uOiBCcmllZmNhc2UsIGRhdGE6IHRlYWNoZXJzLCBjb2xvcjogJ29yYW5nZScgfQogICAgICAgICAgICAgICAgICAgICAgICBdLm1hcChzZWN0aW9uID0+ICgKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxDYXJkIGtleT17c2VjdGlvbi50eXBlfSB0aXRsZT17YCR7c2VjdGlvbi5sYWJlbH0gKCR7c2VjdGlvbi5kYXRhLmxlbmd0aH0pYH0gY2xhc3NOYW1lPSJoLWZ1bGwgZmxleCBmbGV4LWNvbCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9ImZsZXggZmxleC1jb2wgZ2FwLTMgbWItNCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzc05hbWU9e2BmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciB3LWZ1bGwgcHktMyBib3JkZXItMiBib3JkZXItZGFzaGVkIGJvcmRlci0ke3NlY3Rpb24uY29sb3J9LTIwMCByb3VuZGVkLWxnIGJnLSR7c2VjdGlvbi5jb2xvcn0tNTAgdGV4dC0ke3NlY3Rpb24uY29sb3J9LTcwMCBjdXJzb3ItcG9pbnRlciBob3ZlcjpiZy0ke3NlY3Rpb24uY29sb3J9LTEwMCB0cmFuc2l0aW9uLWNvbG9yc2B9PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFVwbG9hZCBjbGFzc05hbWU9InctNSBoLTUgbXItMiIgLz4gSW1wb3J0IEV4Y2VsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0iZmlsZSIgYWNjZXB0PSIueGxzeCwgLnhscywgLmNzdiIgb25DaGFuZ2U9eyhlKSA9PiBoYW5kbGVGaWxlVXBsb2FkKGUsIHNlY3Rpb24udHlwZSl9IGNsYXNzTmFtZT0iaGlkZGVuIiAvPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uIG9uQ2xpY2s9eygpID0+IGhhbmRsZUV4cG9ydChzZWN0aW9uLnR5cGUpfSB2YXJpYW50PSJzZWNvbmRhcnkiIGljb249e0Rvd25sb2FkfSBjbGFzc05hbWU9InctZnVsbCB0ZXh0LXhzIj5FeHBvcnRlcjwvQnV0dG9uPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJmbGV4LWdyb3cgb3ZlcmZsb3cteS1hdXRvIG1heC1oLTYwIGJvcmRlciByb3VuZGVkIGJnLXNsYXRlLTUwIHAtMiBzcGFjZS15LTEiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7c2VjdGlvbi5kYXRhLm1hcCgoaXRlbSwgaSkgPT4gKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBrZXk9e2l0ZW0uaWR9IGNsYXNzTmFtZT0iYmctd2hpdGUgcC0yIHJvdW5kZWQgYm9yZGVyIGJvcmRlci1zbGF0ZS0yMDAgdGV4dC14cyBmbGV4IGp1c3RpZnktYmV0d2VlbiBpdGVtcy1jZW50ZXIgZ3JvdXAiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT0idHJ1bmNhdGUiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7c2VjdGlvbi50eXBlID09PSAnc3R1ZGVudHMnICYmIGAke2l0ZW0ubGFzdG5hbWV9ICR7aXRlbS5maXJzdG5hbWV9ICgke2l0ZW0uY2xhc3N9KWB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtzZWN0aW9uLnR5cGUgPT09ICdyb29tcycgJiYgYCR7aXRlbS5uYW1lfSAoJHtpdGVtLmNhcGFjaXR5fSBwbC4pYH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3NlY3Rpb24udHlwZSA9PT0gJ3RlYWNoZXJzJyAmJiBgJHtpdGVtLmxhc3RuYW1lfSAke2l0ZW0uZmlyc3RuYW1lfWB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHNlY3Rpb24udHlwZSA9PT0gJ3N0dWRlbnRzJykgaGFuZGxlRGVsZXRlU3R1ZGVudChpdGVtLmlkKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHNlY3Rpb24udHlwZSA9PT0gJ3Jvb21zJykgaGFuZGxlRGVsZXRlUm9vbShpdGVtLmlkKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFkZCB0ZWFjaGVyIGRlbGV0ZSBsb2dpYyBpZiBuZWVkZWQgb3IganVzdCBnZW5lcmljCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19IAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9InRleHQtc2xhdGUtMzAwIGhvdmVyOnRleHQtcmVkLTUwMCBvcGFjaXR5LTAgZ3JvdXAtaG92ZXI6b3BhY2l0eS0xMDAgdHJhbnNpdGlvbi1vcGFjaXR5IgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRyYXNoMiBjbGFzc05hbWU9InctMyBoLTMiIC8+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSl9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtzZWN0aW9uLmRhdGEubGVuZ3RoID09PSAwICYmIDxkaXYgY2xhc3NOYW1lPSJ0ZXh0LWNlbnRlciB0ZXh0LXNsYXRlLTQwMCBpdGFsaWMgcHktNCI+QXVjdW5lIGRvbm7DqWU8L2Rpdj59CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L0NhcmQ+CiAgICAgICAgICAgICAgICAgICAgICAgICkpfQogICAgICAgICAgICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgICAgICAgICAgICB7LyogU0VDVElPTiBBUEVSw4dVIFNBTExFUyAoTkVXKSAqL30KICAgICAgICAgICAgICAgICAgICA8Q2FyZCB0aXRsZT0iQXBlcsOndSAmIENvbmZpZ3VyYXRpb24gU2FsbGVzIiBjbGFzc05hbWU9Im1heC1oLTk2IG92ZXJmbG93LWhpZGRlbiBmbGV4IGZsZXgtY29sIj4KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9Im92ZXJmbG93LXktYXV0byBwci0yIG1iLTQiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRhYmxlIGNsYXNzTmFtZT0ibWluLXctZnVsbCB0ZXh0LXNtIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGhlYWQgY2xhc3NOYW1lPSJiZy1zbGF0ZS01MCBzdGlja3kgdG9wLTAgei0xMCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0cj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aCBjbGFzc05hbWU9InB4LTQgcHktMiB0ZXh0LWxlZnQgdGV4dC1zbGF0ZS01MDAgZm9udC1tZWRpdW0iPk5vbSBkZSBsYSBzYWxsZTwvdGg+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGggY2xhc3NOYW1lPSJweC00IHB5LTIgdGV4dC1jZW50ZXIgdGV4dC1zbGF0ZS01MDAgZm9udC1tZWRpdW0iPkNhcGFjaXTDqTwvdGg+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGggY2xhc3NOYW1lPSJweC00IHB5LTIgdGV4dC1yaWdodCI+QWN0aW9uPC90aD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90cj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RoZWFkPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0Ym9keSBjbGFzc05hbWU9ImRpdmlkZS15IGRpdmlkZS1zbGF0ZS0xMDAiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7cm9vbXMubGVuZ3RoID4gMCA/IHJvb21zLm1hcCgocikgPT4gKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRyIGtleT17ci5pZH0gY2xhc3NOYW1lPSJob3ZlcjpiZy1zbGF0ZS01MCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIGNsYXNzTmFtZT0icHgtNCBweS0yIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT0idGV4dCIgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17ci5uYW1lfSAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4gaGFuZGxlVXBkYXRlUm9vbShyLmlkLCAnbmFtZScsIGUudGFyZ2V0LnZhbHVlKX0gCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9InctZnVsbCBiZy10cmFuc3BhcmVudCBib3JkZXItYiBib3JkZXItdHJhbnNwYXJlbnQgZm9jdXM6Ym9yZGVyLXNreS01MDAgZm9jdXM6b3V0bGluZS1ub25lIHRyYW5zaXRpb24tY29sb3JzIGZvbnQtbWVkaXVtIHRleHQtc2xhdGUtNzAwIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIGNsYXNzTmFtZT0icHgtNCBweS0yIHRleHQtY2VudGVyIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT0ibnVtYmVyIiAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXtyLmNhcGFjaXR5fSAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4gaGFuZGxlVXBkYXRlUm9vbShyLmlkLCAnY2FwYWNpdHknLCBwYXJzZUludChlLnRhcmdldC52YWx1ZSkpfSAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0idy0yMCB0ZXh0LWNlbnRlciBib3JkZXIgYm9yZGVyLXNsYXRlLTMwMCByb3VuZGVkIHB4LTIgcHktMSB0ZXh0LXNsYXRlLTcwMCBmb2N1czpyaW5nLTIgZm9jdXM6cmluZy1za3ktNTAwIGZvY3VzOmJvcmRlci10cmFuc3BhcmVudCBmb250LWJvbGQgYmctd2hpdGUiIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWluPSIxIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIGNsYXNzTmFtZT0icHgtNCBweS0yIHRleHQtcmlnaHQiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIG9uQ2xpY2s9eygpID0+IGhhbmRsZURlbGV0ZVJvb20oci5pZCl9IGNsYXNzTmFtZT0idGV4dC1yb3NlLTQwMCBob3Zlcjp0ZXh0LXJvc2UtNjAwIHAtMSByb3VuZGVkLWZ1bGwgaG92ZXI6Ymctcm9zZS01MCB0cmFuc2l0aW9uLWNvbG9ycyI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhc2gyIGNsYXNzTmFtZT0idy00IGgtNCIgLz4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdHI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkpIDogKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRyPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBjb2xTcGFuPSIzIiBjbGFzc05hbWU9InRleHQtY2VudGVyIHB5LTQgdGV4dC1zbGF0ZS00MDAgaXRhbGljIj5BdWN1bmUgc2FsbGUgY29uZmlndXLDqWUuPC90ZD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdHI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90Ym9keT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGFibGU+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgey8qIFpvbmUgZCdham91dCBtYW51ZWwgZGUgc2FsbGUgKi99CiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJtdC1hdXRvIHB0LTQgYm9yZGVyLXQgYm9yZGVyLXNsYXRlLTEwMCBiZy1zbGF0ZS01MCBwLTQgcm91bmRlZC1sZyBmbGV4IGl0ZW1zLWVuZCBnYXAtNCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iZmxleC1ncm93IGdyaWQgZ3JpZC1jb2xzLTIgZ2FwLTQiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzc05hbWU9ImJsb2NrIHRleHQteHMgZm9udC1ib2xkIHRleHQtc2xhdGUtNTAwIHVwcGVyY2FzZSBtYi0xIj5Ob20gZGUgbGEgc2FsbGU8L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPSJ0ZXh0IiAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXtuZXdSb29tLm5hbWV9IAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiBzZXROZXdSb29tKHsuLi5uZXdSb29tLCBuYW1lOiBlLnRhcmdldC52YWx1ZX0pfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPSJ3LWZ1bGwgcC0yIGJvcmRlciBib3JkZXItc2xhdGUtMzAwIHJvdW5kZWQgZm9jdXM6cmluZy0yIGZvY3VzOnJpbmctZW1lcmFsZC0yMDAgb3V0bGluZS1ub25lIHRleHQtc20iCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj0iRXg6IFNhbGxlIDEwMSIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3NOYW1lPSJibG9jayB0ZXh0LXhzIGZvbnQtYm9sZCB0ZXh0LXNsYXRlLTUwMCB1cHBlcmNhc2UgbWItMSI+Q2FwYWNpdMOpPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT0ibnVtYmVyIiAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXtuZXdSb29tLmNhcGFjaXR5fSAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4gc2V0TmV3Um9vbSh7Li4ubmV3Um9vbSwgY2FwYWNpdHk6IHBhcnNlSW50KGUudGFyZ2V0LnZhbHVlKSB8fCAwfSl9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9InctZnVsbCBwLTIgYm9yZGVyIGJvcmRlci1zbGF0ZS0zMDAgcm91bmRlZCBmb2N1czpyaW5nLTIgZm9jdXM6cmluZy1lbWVyYWxkLTIwMCBvdXRsaW5lLW5vbmUgdGV4dC1zbSIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pbj0iMSIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvbiBvbkNsaWNrPXtoYW5kbGVBZGRSb29tfSBpY29uPXtQbHVzfSB2YXJpYW50PSJzdWNjZXNzIiBjbGFzc05hbWU9ImgtWzM4cHhdIj5Bam91dGVyPC9CdXR0b24+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgIDwvQ2FyZD4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICApOwoKICAgICAgICAgICAgLy8gLS0tIFJFTkRFUiBSRVBBUlRJVElPTiAtLS0KICAgICAgICAgICAgY29uc3QgcmVuZGVyUmVwYXJ0aXRpb24gPSAoKSA9PiB7CiAgICAgICAgICAgICAgICBjb25zdCBzdHVkZW50c1dpdGhvdXRSb29tID0gc3R1ZGVudHMuZmlsdGVyKHMgPT4gIXMucm9vbUlkKTsKICAgICAgICAgICAgICAgIGNvbnN0IHN0dWRlbnRzV2l0aFJvb20gPSBzdHVkZW50cy5maWx0ZXIocyA9PiBzLnJvb21JZCk7CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9InNwYWNlLXktNiBhbmltYXRlLWZhZGUtaW4iPgogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iYmctd2hpdGUgcC00IHJvdW5kZWQteGwgc2hhZG93LXNtIGJvcmRlciBib3JkZXItc2xhdGUtMTAwIGZsZXggZmxleC1jb2wgbWQ6ZmxleC1yb3cganVzdGlmeS1iZXR3ZWVuIGl0ZW1zLWNlbnRlciBnYXAtNCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iZmxleCBnYXAtNCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9ImZsZXggaXRlbXMtY2VudGVyIHNwYWNlLXgtMiBiZy1zbGF0ZS0xMDAgcC0xIHJvdW5kZWQtbGciPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIG9uQ2xpY2s9eygpID0+IHNldElzQW5vbnltaXR5TG9ja2VkKCFpc0Fub255bWl0eUxvY2tlZCl9IGNsYXNzTmFtZT17YHAtMiByb3VuZGVkLW1kIHRyYW5zaXRpb24tY29sb3JzICR7aXNBbm9ueW1pdHlMb2NrZWQgPyAnYmctd2hpdGUgc2hhZG93IHRleHQtZW1lcmFsZC02MDAnIDogJ3RleHQtc2xhdGUtNTAwJ31gfSB0aXRsZT17aXNBbm9ueW1pdHlMb2NrZWQgPyAiQW5vbnltYXQgVmVycm91aWxsw6kiIDogIkTDqXZlcnJvdWlsbMOpIn0+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7aXNBbm9ueW1pdHlMb2NrZWQgPyA8TG9jayBjbGFzc05hbWU9InctNSBoLTUiIC8+IDogPFVubG9jayBjbGFzc05hbWU9InctNSBoLTUiIC8+fQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvbiBvbkNsaWNrPXtyZWdlbmVyYXRlQW5vbnltaXR5fSBkaXNhYmxlZD17aXNBbm9ueW1pdHlMb2NrZWR9IHZhcmlhbnQ9InNlY29uZGFyeSIgY2xhc3NOYW1lPSJ0ZXh0LXhzIj5Hw6luw6lyZXIgQW5vbnltYXQ8L0J1dHRvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uIG9uQ2xpY2s9e2Rpc3RyaWJ1dGVTdHVkZW50c30gaWNvbj17UmVmcmVzaEN3fT5Sw6lwYXJ0aXRpb24gQXV0bzwvQnV0dG9uPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxCdXR0b24gb25DbGljaz17cmVzZXREaXN0cmlidXRpb259IHZhcmlhbnQ9ImRhbmdlciIgaWNvbj17VHJhc2gyfT5Ub3V0IFZpZGVyPC9CdXR0b24+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtNCB0ZXh0LXNtIHRleHQtc2xhdGUtNjAwIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9ImZsZXggaXRlbXMtY2VudGVyIj48ZGl2IGNsYXNzTmFtZT0idy0zIGgtMyByb3VuZGVkLWZ1bGwgYmctZW1lcmFsZC01MDAgbXItMiI+PC9kaXY+UGxhY8OpczogPHN0cm9uZz57c3R1ZGVudHNXaXRoUm9vbS5sZW5ndGh9PC9zdHJvbmc+PC9zcGFuPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT0iZmxleCBpdGVtcy1jZW50ZXIiPjxkaXYgY2xhc3NOYW1lPSJ3LTMgaC0zIHJvdW5kZWQtZnVsbCBiZy1yb3NlLTUwMCBtci0yIj48L2Rpdj5FbiBhdHRlbnRlOiA8c3Ryb25nPntzdHVkZW50c1dpdGhvdXRSb29tLmxlbmd0aH08L3N0cm9uZz48L3NwYW4+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CgogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iZ3JpZCBncmlkLWNvbHMtMSBsZzpncmlkLWNvbHMtNCBnYXAtNiBoLVs2MDBweF0iPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgey8qIExlZnQ6IFN0dWRlbnRzIExpc3QgKi99CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ibGc6Y29sLXNwYW4tMSBiZy13aGl0ZSByb3VuZGVkLXhsIHNoYWRvdy1zbSBib3JkZXIgYm9yZGVyLXNsYXRlLTEwMCBmbGV4IGZsZXgtY29sIG92ZXJmbG93LWhpZGRlbiI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9InAtMyBib3JkZXItYiBib3JkZXItc2xhdGUtMTAwIGJnLXNsYXRlLTUwIGZvbnQtYm9sZCB0ZXh0LXNsYXRlLTcwMCBmbGV4IGp1c3RpZnktYmV0d2VlbiI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuPsOJbMOodmVzIHNhbnMgc2FsbGU8L3NwYW4+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT0iYmctcm9zZS0xMDAgdGV4dC1yb3NlLTYwMCBweC0yIHJvdW5kZWQtZnVsbCB0ZXh0LXhzIGZsZXggaXRlbXMtY2VudGVyIj57c3R1ZGVudHNXaXRob3V0Um9vbS5sZW5ndGh9PC9zcGFuPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJmbGV4LWdyb3cgb3ZlcmZsb3cteS1hdXRvIHAtMiBzcGFjZS15LTIiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7c3R1ZGVudHNXaXRob3V0Um9vbS5tYXAoc3R1ZGVudCA9PiAoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleT17c3R1ZGVudC5pZH0gCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZHJhZ2dhYmxlIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uRHJhZ1N0YXJ0PXsoZSkgPT4gaGFuZGxlRHJhZ1N0YXJ0KGUsIHN0dWRlbnQuaWQpfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0iYmctd2hpdGUgYm9yZGVyIGJvcmRlci1zbGF0ZS0yMDAgcC0zIHJvdW5kZWQtbGcgc2hhZG93LXNtIGhvdmVyOnNoYWRvdy1tZCBjdXJzb3ItZ3JhYiBhY3RpdmU6Y3Vyc29yLWdyYWJiaW5nIGJvcmRlci1sLTQgYm9yZGVyLWwtc2xhdGUtNDAwIGdyb3VwIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJmb250LWJvbGQgdGV4dC1zbGF0ZS04MDAgdGV4dC1zbSI+e3N0dWRlbnQubGFzdG5hbWV9IHtzdHVkZW50LmZpcnN0bmFtZX08L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iZmxleCBqdXN0aWZ5LWJldHdlZW4gaXRlbXMtY2VudGVyIG10LTEiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9InRleHQteHMgdGV4dC1zbGF0ZS01MDAgYmctc2xhdGUtMTAwIHB4LTEgcm91bmRlZCI+e3N0dWRlbnQuY2xhc3N9PC9zcGFuPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iZmxleCBnYXAtMSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7c3R1ZGVudC5pc1RUICYmIDxzcGFuIGNsYXNzTmFtZT0idGV4dC1bMTBweF0gYmctYW1iZXItMTAwIHRleHQtYW1iZXItNzAwIHB4LTEgcm91bmRlZCBmb250LWJvbGQiPlRUPC9zcGFuPn0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtzdHVkZW50LmFlc2ggJiYgPHNwYW4gY2xhc3NOYW1lPSJ0ZXh0LVsxMHB4XSBiZy1wdXJwbGUtMTAwIHRleHQtcHVycGxlLTcwMCBweC0xIHJvdW5kZWQgZm9udC1ib2xkIiB0aXRsZT17c3R1ZGVudC5hZXNofT5BRVNIPC9zcGFuPn0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSl9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7LyogUmlnaHQ6IFJvb21zIEdyaWQgKi99CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ibGc6Y29sLXNwYW4tMyBiZy1zbGF0ZS01MCByb3VuZGVkLXhsIGJvcmRlciBib3JkZXItc2xhdGUtMjAwIHAtNCBvdmVyZmxvdy15LWF1dG8iPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJncmlkIGdyaWQtY29scy0xIHNtOmdyaWQtY29scy0yIGxnOmdyaWQtY29scy0zIGdhcC00Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3Jvb21zLm1hcChyb29tID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG9jY3VwYW5jeSA9IGdldFJvb21PY2N1cGFuY3kocm9vbS5pZCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwZXJjZW50YWdlID0gTWF0aC5yb3VuZCgob2NjdXBhbmN5IC8gcm9vbS5jYXBhY2l0eSkgKiAxMDApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaXNGdWxsID0gb2NjdXBhbmN5ID49IHJvb20uY2FwYWNpdHk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByb29tU3R1ZGVudHMgPSBzdHVkZW50cy5maWx0ZXIocyA9PiBzLnJvb21JZCA9PT0gcm9vbS5pZCk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk9e3Jvb20uaWR9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uRHJhZ092ZXI9e2hhbmRsZURyYWdPdmVyfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkRyYWdMZWF2ZT17aGFuZGxlRHJhZ0xlYXZlfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkRyb3A9eyhlKSA9PiBoYW5kbGVEcm9wKGUsIHJvb20uaWQpfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2BiZy13aGl0ZSByb3VuZGVkLXhsIGJvcmRlci0yIHRyYW5zaXRpb24tYWxsICR7aXNGdWxsID8gJ2JvcmRlci1zbGF0ZS0yMDAnIDogJ2JvcmRlci1kYXNoZWQgYm9yZGVyLXNsYXRlLTMwMCBob3Zlcjpib3JkZXItc2t5LTQwMCBob3ZlcjpiZy1za3ktNTAnfSBkcm9wLXpvbmUgZmxleCBmbGV4LWNvbCBoLTY0YH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJwLTMgYm9yZGVyLWIgYm9yZGVyLXNsYXRlLTEwMCBmbGV4IGp1c3RpZnktYmV0d2VlbiBpdGVtcy1jZW50ZXIgYmctd2hpdGUgcm91bmRlZC10LXhsIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGg0IGNsYXNzTmFtZT0iZm9udC1ib2xkIHRleHQtc2xhdGUtODAwIj57cm9vbS5uYW1lfTwvaDQ+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9InRleHQteHMgdGV4dC1zbGF0ZS01MDAiPntvY2N1cGFuY3l9IC8ge3Jvb20uY2FwYWNpdHl9PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtgdy0xMCBoLTEwIHJvdW5kZWQtZnVsbCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciB0ZXh0LXhzIGZvbnQtYm9sZCAke2lzRnVsbCA/ICdiZy1yb3NlLTEwMCB0ZXh0LXJvc2UtNjAwJyA6ICdiZy1lbWVyYWxkLTEwMCB0ZXh0LWVtZXJhbGQtNjAwJ31gfT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7cGVyY2VudGFnZX0lCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJmbGV4LWdyb3cgb3ZlcmZsb3cteS1hdXRvIHAtMiBzcGFjZS15LTEgYmctc2xhdGUtNTAvNTAiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3Jvb21TdHVkZW50cy5tYXAocyA9PiAoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBrZXk9e3MuaWR9IGNsYXNzTmFtZT0idGV4dC14cyBiZy13aGl0ZSBib3JkZXIgYm9yZGVyLXNsYXRlLTIwMCBwLTEuNSByb3VuZGVkIGZsZXgganVzdGlmeS1iZXR3ZWVuIGl0ZW1zLWNlbnRlciBncm91cCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT0idHJ1bmNhdGUgbWF4LXctWzEyMHB4XSI+e3MubGFzdG5hbWV9IHtzLmZpcnN0bmFtZX08L3NwYW4+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gb25DbGljaz17KCkgPT4gZXhlY3V0ZUFzc2lnbm1lbnQocy5pZCwgbnVsbCl9IGNsYXNzTmFtZT0idGV4dC1zbGF0ZS0zMDAgaG92ZXI6dGV4dC1yZWQtNTAwIG9wYWNpdHktMCBncm91cC1ob3ZlcjpvcGFjaXR5LTEwMCI+PFRyYXNoMiBjbGFzc05hbWU9InctMyBoLTMiIC8+PC9idXR0b24+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApKX0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KX0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgIH07CgogICAgICAgICAgICAvLyAtLS0gUkVOREVSIENPUlJFQ1RJT04gLS0tCiAgICAgICAgICAgIGNvbnN0IHJlbmRlckNvcnJlY3Rpb24gPSAoKSA9PiB7CiAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50QXNzaWdubWVudHMgPSBzZWxlY3RlZENvcnJlY3Rpb25TdWJqZWN0ID8gKHRlYWNoZXJBc3NpZ25tZW50c1tzZWxlY3RlZENvcnJlY3Rpb25TdWJqZWN0LmlkXSB8fCBbXSkgOiBbXTsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgLy8gTG9naXF1ZSBkZSB0cmkgZGVzIHByb2Zlc3NldXJzCiAgICAgICAgICAgICAgICBjb25zdCBnZXRWaXNpYmxlVGVhY2hlcnMgPSAoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgaWYgKCFzZWxlY3RlZENvcnJlY3Rpb25TdWJqZWN0KSByZXR1cm4gW107CiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgbGV0IGZpbHRlcmVkID0gdGVhY2hlcnM7CiAgICAgICAgICAgICAgICAgICAgaWYgKCFmb3JjZUFsbFRlYWNoZXJzQ29ycmVjdGlvbikgewogICAgICAgICAgICAgICAgICAgICAgICBmaWx0ZXJlZCA9IHRlYWNoZXJzLmZpbHRlcih0ID0+IGlzVGVhY2hlckZvclN1YmplY3QodCwgc2VsZWN0ZWRDb3JyZWN0aW9uU3ViamVjdCkpOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgLy8gVHJpIDogUHJvZnMgZGUgbGEgbWF0acOocmUgZW4gcHJlbWllciwgcHVpcyBhbHBoYWLDqXRpcXVlCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsuLi5maWx0ZXJlZF0uc29ydCgoYSwgYikgPT4gewogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpc1N1YkEgPSBpc1RlYWNoZXJGb3JTdWJqZWN0KGEsIHNlbGVjdGVkQ29ycmVjdGlvblN1YmplY3QpOwogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpc1N1YkIgPSBpc1RlYWNoZXJGb3JTdWJqZWN0KGIsIHNlbGVjdGVkQ29ycmVjdGlvblN1YmplY3QpOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNTdWJBICYmICFpc1N1YkIpIHJldHVybiAtMTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFpc1N1YkEgJiYgaXNTdWJCKSByZXR1cm4gMTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGEubGFzdG5hbWUubG9jYWxlQ29tcGFyZShiLmxhc3RuYW1lKTsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgY29uc3QgdmlzaWJsZVRlYWNoZXJzID0gZ2V0VmlzaWJsZVRlYWNoZXJzKCk7CgogICAgICAgICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ic3BhY2UteS02IGFuaW1hdGUtZmFkZS1pbiI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxDYXJkIHRpdGxlPSJSw6lwYXJ0aXRpb24gZGUgbGEgQ29ycmVjdGlvbiIgaWNvbj17Q2hlY2tDaXJjbGV9PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9ImdyaWQgZ3JpZC1jb2xzLTEgbWQ6Z3JpZC1jb2xzLTMgZ2FwLTYiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJzcGFjZS15LTQiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3NOYW1lPSJibG9jayB0ZXh0LXNtIGZvbnQtYm9sZCB0ZXh0LXNsYXRlLTcwMCI+MS4gQ2hvaXNpciBsJ8OJcHJldXZlPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNlbGVjdCAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0idy1mdWxsIHAtMiBib3JkZXIgYm9yZGVyLXNsYXRlLTMwMCByb3VuZGVkIGZvY3VzOnJpbmctMiBmb2N1czpyaW5nLXNreS0yMDAgb3V0bGluZS1ub25lIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiBoYW5kbGVTdWJqZWN0U2VsZWN0Rm9yQ29ycmVjdGlvbihlLnRhcmdldC52YWx1ZSl9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17c2VsZWN0ZWRDb3JyZWN0aW9uU3ViamVjdD8uaWQgfHwgJyd9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IiI+LS0gU8OpbGVjdGlvbm5lciAtLTwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3N1YmplY3RzLm1hcChzID0+IDxvcHRpb24ga2V5PXtzLmlkfSB2YWx1ZT17cy5pZH0+e3MubmFtZX08L29wdGlvbj4pfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3NlbGVjdD4KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtzZWxlY3RlZENvcnJlY3Rpb25TdWJqZWN0ICYmICgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJiZy1za3ktNTAgcC0zIHJvdW5kZWQgYm9yZGVyIGJvcmRlci1za3ktMTAwIHRleHQtc20gdGV4dC1za3ktODAwIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3Ryb25nPntzdHVkZW50cy5maWx0ZXIocyA9PiBzLmFub255bW91c0lkKS5sZW5ndGh9PC9zdHJvbmc+IGNvcGllcyDDoCBjb3JyaWdlci4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ibWQ6Y29sLXNwYW4tMiBzcGFjZS15LTQiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iZmxleCBqdXN0aWZ5LWJldHdlZW4gaXRlbXMtY2VudGVyIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzc05hbWU9ImJsb2NrIHRleHQtc20gZm9udC1ib2xkIHRleHQtc2xhdGUtNzAwIj4yLiBTw6lsZWN0aW9ubmVyIGxlcyBDb3JyZWN0ZXVyczwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3NOYW1lPSJmbGV4IGl0ZW1zLWNlbnRlciBzcGFjZS14LTIgdGV4dC14cyB0ZXh0LXNsYXRlLTUwMCBjdXJzb3ItcG9pbnRlciI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPSJjaGVja2JveCIgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9e2ZvcmNlQWxsVGVhY2hlcnNDb3JyZWN0aW9ufSAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eygpID0+IHNldEZvcmNlQWxsVGVhY2hlcnNDb3JyZWN0aW9uKCFmb3JjZUFsbFRlYWNoZXJzQ29ycmVjdGlvbil9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0icm91bmRlZCB0ZXh0LXNreS01MDAgZm9jdXM6cmluZy1za3ktNDAwIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4+QWZmaWNoZXIgdG91cyBsZXMgcHJvZmVzc2V1cnM8L3NwYW4+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtzZWxlY3RlZENvcnJlY3Rpb25TdWJqZWN0ID8gKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9ImJnLXdoaXRlIGJvcmRlciBib3JkZXItc2xhdGUtMjAwIHJvdW5kZWQgcC0zIGgtNjAgb3ZlcmZsb3cteS1hdXRvIGdyaWQgZ3JpZC1jb2xzLTEgc206Z3JpZC1jb2xzLTIgZ2FwLTIiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt2aXNpYmxlVGVhY2hlcnMubGVuZ3RoID4gMCA/IHZpc2libGVUZWFjaGVycy5tYXAodCA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGlzU3ViamVjdFRlYWNoZXIgPSBpc1RlYWNoZXJGb3JTdWJqZWN0KHQsIHNlbGVjdGVkQ29ycmVjdGlvblN1YmplY3QpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGtleT17dC5pZH0gY2xhc3NOYW1lPXtgZmxleCBpdGVtcy1jZW50ZXIgc3BhY2UteC0yIHRleHQtc20gY3Vyc29yLXBvaW50ZXIgaG92ZXI6Ymctc2xhdGUtNTAgcC0yIHJvdW5kZWQgYm9yZGVyICR7aXNTdWJqZWN0VGVhY2hlciA/ICdib3JkZXItZW1lcmFsZC0yMDAgYmctZW1lcmFsZC01MC8zMCcgOiAnYm9yZGVyLXRyYW5zcGFyZW50J31gfT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9ImNoZWNrYm94IiAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZD17c2VsZWN0ZWRUZWFjaGVyc0ZvckNvcnJlY3Rpb24uaW5jbHVkZXModC5pZCl9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRTZWxlY3RlZFRlYWNoZXJzRm9yQ29ycmVjdGlvbihwcmV2ID0+IHByZXYuaW5jbHVkZXModC5pZCkgPyBwcmV2LmZpbHRlcihpZCA9PiBpZCAhPT0gdC5pZCkgOiBbLi4ucHJldiwgdC5pZF0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9InJvdW5kZWQgdGV4dC1za3ktNTAwIGZvY3VzOnJpbmctc2t5LTQwMCIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJmbGV4IGZsZXgtY29sIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPXtpc1N1YmplY3RUZWFjaGVyID8gImZvbnQtc2VtaWJvbGQgdGV4dC1lbWVyYWxkLTgwMCIgOiAiIn0+e3QubGFzdG5hbWV9IHt0LmZpcnN0bmFtZX08L3NwYW4+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT0idGV4dC1bMTBweF0gdGV4dC1zbGF0ZS00MDAiPnt0LnN1YmplY3R9PC9zcGFuPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSA6ICgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9InRleHQtc2xhdGUtNDAwIGl0YWxpYyBjb2wtc3Bhbi0yIHRleHQtY2VudGVyIHB5LTQiPkF1Y3VuIHByb2Zlc3NldXIgdHJvdXbDqS4gRXNzYXlleiAiQWZmaWNoZXIgdG91cyBsZXMgcHJvZmVzc2V1cnMiLjwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IDxkaXYgY2xhc3NOYW1lPSJ0ZXh0LXNsYXRlLTQwMCBpdGFsaWMgcC00IGJvcmRlciBib3JkZXItZGFzaGVkIHJvdW5kZWQgdGV4dC1jZW50ZXIiPkVuIGF0dGVudGUgZGUgc8OpbGVjdGlvbiBkJ8OpcHJldXZlLi4uPC9kaXY+fQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uIG9uQ2xpY2s9e2Rpc3RyaWJ1dGVDb3BpZXN9IGRpc2FibGVkPXshc2VsZWN0ZWRDb3JyZWN0aW9uU3ViamVjdCB8fCBzZWxlY3RlZFRlYWNoZXJzRm9yQ29ycmVjdGlvbi5sZW5ndGggPT09IDB9IGNsYXNzTmFtZT0idy1mdWxsIj5DYWxjdWxlciBsZXMgTG90czwvQnV0dG9uPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CgogICAgICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRBc3NpZ25tZW50cy5sZW5ndGggPiAwICYmICgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ibXQtOCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoNCBjbGFzc05hbWU9ImZvbnQtYm9sZCB0ZXh0LXNsYXRlLTcwMCBtYi00IGZsZXgganVzdGlmeS1iZXR3ZWVuIGl0ZW1zLWNlbnRlciI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3Bhbj4zLiBMb3RzIEF0dHJpYnXDqXM8L3NwYW4+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uIG9uQ2xpY2s9eygpID0+IGdlbmVyYXRlUERGKCdsaXN0ZXNfY29ycmVjdGlvbl9kZXRhaWwnKX0gdmFyaWFudD0ic2Vjb25kYXJ5IiBpY29uPXtQcmludGVyfSBjbGFzc05hbWU9InRleHQteHMiPkltcHJpbWVyIExpc3RlcyBkZSBDb250csO0bGU8L0J1dHRvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9oND4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9Im92ZXJmbG93LXgtYXV0byBib3JkZXIgYm9yZGVyLXNsYXRlLTIwMCByb3VuZGVkLWxnIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0YWJsZSBjbGFzc05hbWU9InctZnVsbCB0ZXh0LXNtIHRleHQtbGVmdCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRoZWFkIGNsYXNzTmFtZT0iYmctc2xhdGUtNTAgdGV4dC1zbGF0ZS03MDAgZm9udC1ib2xkIGJvcmRlci1iIGJvcmRlci1zbGF0ZS0yMDAiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dHI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGggY2xhc3NOYW1lPSJwLTMiPkNvcnJlY3RldXI8L3RoPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRoIGNsYXNzTmFtZT0icC0zIHctMjQiPk5iIENvcGllczwvdGg+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGggY2xhc3NOYW1lPSJwLTMiPlByZW1pZXIgTsKwPC90aD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aCBjbGFzc05hbWU9InAtMyI+RGVybmllciBOwrA8L3RoPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RyPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGhlYWQ+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRib2R5IGNsYXNzTmFtZT0iZGl2aWRlLXkgZGl2aWRlLXNsYXRlLTEwMCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50QXNzaWdubWVudHMubWFwKChhc3NpZ24sIGlkeCkgPT4gKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRyIGtleT17aWR4fSBjbGFzc05hbWU9ImhvdmVyOmJnLXNsYXRlLTUwIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQgY2xhc3NOYW1lPSJwLTMgZm9udC1tZWRpdW0gdGV4dC1zbGF0ZS04MDAiPnthc3NpZ24udGVhY2hlck5hbWV9PC90ZD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQgY2xhc3NOYW1lPSJwLTMiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPSJudW1iZXIiIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU9e2Fzc2lnbi5jb3VudH0gCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHVwZGF0ZU1hbnVhbEFzc2lnbm1lbnQoaWR4LCAnY291bnQnLCBlLnRhcmdldC52YWx1ZSl9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9InctMTYgcC0xIGJvcmRlciByb3VuZGVkIHRleHQtY2VudGVyIGZvY3VzOnJpbmctMiBmb2N1czpyaW5nLXNreS0yMDAgb3V0bGluZS1ub25lIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIGNsYXNzTmFtZT0icC0zIGZvbnQtbW9ubyB0ZXh0LXNsYXRlLTUwMCI+e2Fzc2lnbi5zdGFydEFub255bX08L3RkPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBjbGFzc05hbWU9InAtMyBmb250LW1vbm8gdGV4dC1zbGF0ZS01MDAiPnthc3NpZ24uZW5kQW5vbnltfTwvdGQ+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RyPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApKX0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3Rib2R5PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90YWJsZT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICApfQogICAgICAgICAgICAgICAgICAgICAgICA8L0NhcmQ+CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICApOwogICAgICAgICAgICB9OwoKICAgICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJtaW4taC1zY3JlZW4gZmxleCBmbGV4LWNvbCI+CiAgICAgICAgICAgICAgICAgICAgPENvbmZpcm1hdGlvbk1vZGFsIGlzT3Blbj17bW9kYWxDb25maWcuaXNPcGVufSB0aXRsZT17bW9kYWxDb25maWcudGl0bGV9IG1lc3NhZ2U9e21vZGFsQ29uZmlnLm1lc3NhZ2V9IG9uQ29uZmlybT17aGFuZGxlTW9kYWxDb25maXJtfSBvbkNhbmNlbD17Y2xvc2VNb2RhbH0gLz4KICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICB7LyogTW9kYWwgZGUgU2Fpc2llIHBvdXIgbGEgU2F1dmVnYXJkZSAqL30KICAgICAgICAgICAgICAgICAgICA8SW5wdXRNb2RhbCAKICAgICAgICAgICAgICAgICAgICAgICAgaXNPcGVuPXtpbnB1dE1vZGFsQ29uZmlnLmlzT3Blbn0gCiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPXtpbnB1dE1vZGFsQ29uZmlnLnRpdGxlfSAKICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZT17aW5wdXRNb2RhbENvbmZpZy5tZXNzYWdlfSAKICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlPXtpbnB1dE1vZGFsQ29uZmlnLmRlZmF1bHRWYWx1ZX0gCiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ29uZmlybT17aW5wdXRNb2RhbENvbmZpZy5vbkNvbmZpcm19IAogICAgICAgICAgICAgICAgICAgICAgICBvbkNhbmNlbD17Y2xvc2VJbnB1dE1vZGFsfSAKICAgICAgICAgICAgICAgICAgICAvPgoKICAgICAgICAgICAgICAgICAgICA8aGVhZGVyIGNsYXNzTmFtZT0iYmctZ3JhZGllbnQtdG8tciBmcm9tLWN5YW4tNTAwIHRvLWJsdWUtNjAwIHNoYWRvdy1tZCBzdGlja3kgdG9wLTAgei0xMCI+PGRpdiBjbGFzc05hbWU9Im1heC13LTd4bCBteC1hdXRvIHB4LTQgaC0xNiBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWJldHdlZW4iPjxkaXYgY2xhc3NOYW1lPSJmbGV4IGl0ZW1zLWNlbnRlciI+PFNjaG9vbCBjbGFzc05hbWU9InctNiBoLTYgdGV4dC13aGl0ZSBtci0zIiAvPjxoMSBjbGFzc05hbWU9InRleHQteGwgZm9udC1ib2xkIHRleHQtd2hpdGUiPlBFUkRJUkZPUk1BTkNFIEROQiBCTEFOQyBFQ1JJVCBWMTE8L2gxPjwvZGl2PjxkaXYgY2xhc3NOYW1lPSJ0ZXh0LXNtIHRleHQtc2t5LTEwMCBoaWRkZW4gbWQ6YmxvY2siPk9yZ2FuaXNhdGlvbiBkJ0V4YW1lbiBCbGFuYzwvZGl2PjwvZGl2PjwvaGVhZGVyPgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJiZy13aGl0ZSBib3JkZXItYiBzaGFkb3ctc20iPjxkaXYgY2xhc3NOYW1lPSJtYXgtdy03eGwgbXgtYXV0byBweC00Ij48bmF2IGNsYXNzTmFtZT0iLW1iLXB4IGZsZXggc3BhY2UteC04IG92ZXJmbG93LXgtYXV0byI+CiAgICAgICAgICAgICAgICAgICAgICAgIHtbCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IGlkOiAnY29uZmlnJywgbGFiZWw6ICdBY2N1ZWlsJywgaWNvbjogU2V0dGluZ3MgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgaWQ6ICdkYXRhJywgbGFiZWw6ICdJbXBvcnQnLCBpY29uOiBVcGxvYWQgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgaWQ6ICdyZXBhcnRpdGlvbicsIGxhYmVsOiAnUsOpcGFydGl0aW9uJywgaWNvbjogVXNlcnMgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgaWQ6ICdzdXJ2ZWlsbGFuY2UnLCBsYWJlbDogJ1N1cnZlaWxsYW5jZScsIGljb246IEV5ZSB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBpZDogJ3NlY3JldGFyaWF0JywgbGFiZWw6ICdTZWNyw6l0YXJpYXQnLCBpY29uOiBBcmNoaXZlIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IGlkOiAnY29ycmVjdGlvbicsIGxhYmVsOiAnQ29ycmVjdGlvbicsIGljb246IENoZWNrQ2lyY2xlIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IGlkOiAnZG9jdW1lbnRzJywgbGFiZWw6ICdEb2N1bWVudHMnLCBpY29uOiBGaWxlVGV4dCB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBpZDogJ2hlbHAnLCBsYWJlbDogJ0FpZGVzJywgaWNvbjogSGVscENpcmNsZSB9CiAgICAgICAgICAgICAgICAgICAgICAgIF0ubWFwKHRhYiA9PiAoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGtleT17dGFiLmlkfSBvbkNsaWNrPXsoKSA9PiBzZXRBY3RpdmVUYWIodGFiLmlkKX0gY2xhc3NOYW1lPXtgcHktNCBweC0zIGJvcmRlci1iLTIgZm9udC1tZWRpdW0gdGV4dC1zbSBmbGV4IGl0ZW1zLWNlbnRlciAke2FjdGl2ZVRhYiA9PT0gdGFiLmlkID8gJ2JvcmRlci1pbmRpZ28tNTAwIHRleHQtaW5kaWdvLTYwMCcgOiAnYm9yZGVyLXRyYW5zcGFyZW50IHRleHQtc2xhdGUtNTAwIGhvdmVyOnRleHQtc2xhdGUtNzAwJ31gfT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGFiLmljb24gY2xhc3NOYW1lPXtgdy00IGgtNCBtci0yICR7YWN0aXZlVGFiID09PSB0YWIuaWQgPyAndGV4dC1pbmRpZ28tNTAwJyA6ICd0ZXh0LXNsYXRlLTQwMCd9YH0gLz4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7dGFiLmxhYmVsfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+CiAgICAgICAgICAgICAgICAgICAgICAgICkpfQogICAgICAgICAgICAgICAgICAgIDwvbmF2PjwvZGl2PjwvZGl2PgogICAgICAgICAgICAgICAgICAgIDxtYWluIGNsYXNzTmFtZT0iZmxleC1ncm93IG1heC13LTd4bCB3LWZ1bGwgbXgtYXV0byBweC00IHB5LTgiPgogICAgICAgICAgICAgICAgICAgICAgICB7bm90aWZpY2F0aW9uICYmIDxkaXYgY2xhc3NOYW1lPSJmaXhlZCBib3R0b20tNiByaWdodC02IHAtNCByb3VuZGVkLXhsIHNoYWRvdy14bCBiZy1lbWVyYWxkLTUwMCB0ZXh0LXdoaXRlIHotNTAiPntub3RpZmljYXRpb24ubXNnfTwvZGl2Pn0KICAgICAgICAgICAgICAgICAgICAgICAge2FjdGl2ZVRhYiA9PT0gJ2NvbmZpZycgJiYgcmVuZGVyQ29uZmlnKCl9CiAgICAgICAgICAgICAgICAgICAgICAgIHthY3RpdmVUYWIgPT09ICdkYXRhJyAmJiByZW5kZXJEYXRhKCl9CiAgICAgICAgICAgICAgICAgICAgICAgIHthY3RpdmVUYWIgPT09ICdyZXBhcnRpdGlvbicgJiYgcmVuZGVyUmVwYXJ0aXRpb24oKX0KICAgICAgICAgICAgICAgICAgICAgICAge2FjdGl2ZVRhYiA9PT0gJ3N1cnZlaWxsYW5jZScgJiYgPFN1cnZlaWxsYW5jZVBhbmVsIHN1YmplY3RzPXtzdWJqZWN0c30gcm9vbXM9e3Jvb21zfSB0ZWFjaGVycz17dGVhY2hlcnN9IHN0dWRlbnRzPXtzdHVkZW50c30gYXNzaWdubWVudHM9e3N1cnZlaWxsYW5jZUFzc2lnbm1lbnRzfSBvbkFzc2lnbm1lbnRDaGFuZ2U9eyhrLCB2KSA9PiBzZXRTdXJ2ZWlsbGFuY2VBc3NpZ25tZW50cyhwcmV2ID0+ICh7Li4ucHJldiwgW2tdOiB2fSkpfSBzY2hvb2xDb25maWc9e3NjaG9vbENvbmZpZ30gbW9kZT17c3VydmVpbGxhbmNlTW9kZX0gc2V0TW9kZT17c2V0U3VydmVpbGxhbmNlTW9kZX0gLz59CiAgICAgICAgICAgICAgICAgICAgICAgIHthY3RpdmVUYWIgPT09ICdzZWNyZXRhcmlhdCcgJiYgPFNlY3JldGFyaWF0UGFuZWwgc3ViamVjdHM9e3N1YmplY3RzfSByb29tcz17cm9vbXN9IHRlYWNoZXJzPXt0ZWFjaGVyc30gYXNzaWdubWVudHM9e3NlY3JldGFyaWF0QXNzaWdubWVudHN9IG9uQXNzaWdubWVudENoYW5nZT17KHNpZCwgZGF0YSkgPT4gc2V0U2VjcmV0YXJpYXRBc3NpZ25tZW50cyhwcmV2ID0+ICh7Li4ucHJldiwgW3NpZF06IGRhdGF9KSl9IC8+fQogICAgICAgICAgICAgICAgICAgICAgICB7YWN0aXZlVGFiID09PSAnY29ycmVjdGlvbicgJiYgcmVuZGVyQ29ycmVjdGlvbigpfQogICAgICAgICAgICAgICAgICAgICAgICB7YWN0aXZlVGFiID09PSAnZG9jdW1lbnRzJyAmJiByZW5kZXJEb2N1bWVudHMoKX0KICAgICAgICAgICAgICAgICAgICAgICAge2FjdGl2ZVRhYiA9PT0gJ2hlbHAnICYmIDxIZWxwUGFuZWwgLz59CiAgICAgICAgICAgICAgICAgICAgPC9tYWluPgogICAgICAgICAgICAgICAgICAgIDxmb290ZXIgY2xhc3NOYW1lPSJiZy13aGl0ZSBib3JkZXItdCBweS04IHRleHQtY2VudGVyIHRleHQtc2xhdGUtNDAwIHRleHQtc20iPlBFUkRJUkZPUk1BTkNFIEROQiBCTEFOQyBFQ1JJVCBWMTEgcHJvcG9zw6kgcGFyIFlhbm5pcyBDSFJJU1RPTjwvZm9vdGVyPgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICk7CiAgICAgICAgfTsKCiAgICAgICAgY29uc3Qgcm9vdCA9IFJlYWN0RE9NLmNyZWF0ZVJvb3QoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jvb3QnKSk7CiAgICAgICAgcm9vdC5yZW5kZXIoPEFwcCAvPik7CiAgICA8L3NjcmlwdD4KPC9ib2R5Pgo8L2h0bWw+", "oral": "PCFET0NUWVBFIGh0bWw+CjxodG1sIGxhbmc9ImZyIj4KPGhlYWQ+CiAgICA8bWV0YSBjaGFyc2V0PSJVVEYtOCI+CiAgICA8bWV0YSBuYW1lPSJ2aWV3cG9ydCIgY29udGVudD0id2lkdGg9ZGV2aWNlLXdpZHRoLCBpbml0aWFsLXNjYWxlPTEuMCI+CiAgICA8dGl0bGU+T1JBTCBCTEFOQyBETkItQ0ZHLUdPIFBFUkRJUkZPUk1BTkNFIFYxMTwvdGl0bGU+CiAgICAKICAgIDwhLS0gUmVhY3QgJiBSZWFjdERPTSAtLT4KICAgIDxzY3JpcHQgY3Jvc3NvcmlnaW4gc3JjPSJodHRwczovL3VucGtnLmNvbS9yZWFjdEAxOC91bWQvcmVhY3QuZGV2ZWxvcG1lbnQuanMiPjwvc2NyaXB0PgogICAgPHNjcmlwdCBjcm9zc29yaWdpbiBzcmM9Imh0dHBzOi8vdW5wa2cuY29tL3JlYWN0LWRvbUAxOC91bWQvcmVhY3QtZG9tLmRldmVsb3BtZW50LmpzIj48L3NjcmlwdD4KICAgIAogICAgPCEtLSBCYWJlbCBmb3IgSlNYIC0tPgogICAgPHNjcmlwdCBzcmM9Imh0dHBzOi8vdW5wa2cuY29tL0BiYWJlbC9zdGFuZGFsb25lL2JhYmVsLm1pbi5qcyI+PC9zY3JpcHQ+CiAgICAKICAgIDwhLS0gVGFpbHdpbmQgQ1NTIC0tPgogICAgPHNjcmlwdCBzcmM9Imh0dHBzOi8vY2RuLnRhaWx3aW5kY3NzLmNvbSI+PC9zY3JpcHQ+CiAgICAKICAgIDwhLS0gUGFwYVBhcnNlIGZvciBDU1YgLS0+CiAgICA8c2NyaXB0IHNyYz0iaHR0cHM6Ly9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvUGFwYVBhcnNlLzUuMy4wL3BhcGFwYXJzZS5taW4uanMiPjwvc2NyaXB0PgogICAgCiAgICA8c3R5bGU+CiAgICAgICAgQGltcG9ydCB1cmwoJ2h0dHBzOi8vZm9udHMuZ29vZ2xlYXBpcy5jb20vY3NzMj9mYW1pbHk9Um9ib3RvOndnaHRAMzAwOzQwMDs1MDA7NzAwJmRpc3BsYXk9c3dhcCcpOwogICAgICAgIAogICAgICAgIGJvZHkgewogICAgICAgICAgICBmb250LWZhbWlseTogJ1JvYm90bycsIHNhbnMtc2VyaWY7CiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNmM2Y0ZjY7CiAgICAgICAgfQoKICAgICAgICAvKiBBbmltYXRpb24gU2NpbnRpbGxhbnRlIHBvdXIgbGUgYm91dG9uIFJFVE9VUiAqLwogICAgICAgIEBrZXlmcmFtZXMgZ2xvd2luZyB7CiAgICAgICAgICAgIDAlIHsgYm94LXNoYWRvdzogMCAwIDVweCAjZWY0NDQ0OyB0cmFuc2Zvcm06IHNjYWxlKDEpOyB9CiAgICAgICAgICAgIDUwJSB7IGJveC1zaGFkb3c6IDAgMCAyMHB4ICNlZjQ0NDQ7IHRyYW5zZm9ybTogc2NhbGUoMS4wNSk7IH0KICAgICAgICAgICAgMTAwJSB7IGJveC1zaGFkb3c6IDAgMCA1cHggI2VmNDQ0NDsgdHJhbnNmb3JtOiBzY2FsZSgxKTsgfQogICAgICAgIH0KICAgICAgICAuYnRuLXJldG91ci1zY2ludGlsbGFudCB7CiAgICAgICAgICAgIGFuaW1hdGlvbjogZ2xvd2luZyAycyBpbmZpbml0ZSBlYXNlLWluLW91dDsKICAgICAgICB9CgogICAgICAgIC5tb2RhbC1lbnRlciB7IG9wYWNpdHk6IDA7IHRyYW5zZm9ybTogc2NhbGUoMC45KTsgfQogICAgICAgIC5tb2RhbC1lbnRlci1hY3RpdmUgeyBvcGFjaXR5OiAxOyB0cmFuc2Zvcm06IHNjYWxlKDEpOyB0cmFuc2l0aW9uOiBvcGFjaXR5IDMwMG1zLCB0cmFuc2Zvcm0gMzAwbXM7IH0KICAgICAgICAubW9kYWwtZXhpdCB7IG9wYWNpdHk6IDE7IH0KICAgICAgICAubW9kYWwtZXhpdC1hY3RpdmUgeyBvcGFjaXR5OiAwOyB0cmFuc2Zvcm06IHNjYWxlKDAuOSk7IHRyYW5zaXRpb246IG9wYWNpdHkgMzAwbXMsIHRyYW5zZm9ybSAzMDBtczsgfQoKICAgICAgICBAa2V5ZnJhbWVzIHNjYWxlSW4gewogICAgICAgICAgICBmcm9tIHsgb3BhY2l0eTogMDsgdHJhbnNmb3JtOiBzY2FsZSgwLjk1KTsgfQogICAgICAgICAgICB0byB7IG9wYWNpdHk6IDE7IHRyYW5zZm9ybTogc2NhbGUoMSk7IH0KICAgICAgICB9CiAgICAgICAgLmFuaW1hdGUtc2NhbGUtaW4gewogICAgICAgICAgICBhbmltYXRpb246IHNjYWxlSW4gMC4ycyBlYXNlLW91dCBmb3J3YXJkczsKICAgICAgICB9CgogICAgICAgIC8qIC0tLSBTVFlMRVMgRCdJTVBSRVNTSU9OIFNUUklDVFMgLS0tICovCiAgICAgICAgCiAgICAgICAgLyogU3R5bGVzIEE0IHZpc2libGUgw6AgbCfDqWNyYW4gKi8KICAgICAgICAuQTQtc2hlZXQgewogICAgICAgICAgICB3aWR0aDogMjEwbW07CiAgICAgICAgICAgIG1pbi1oZWlnaHQ6IDI5N21tOyAvKiBDaGFuZ8OpIGhlaWdodCBlbiBtaW4taGVpZ2h0IHBvdXIgw6l2aXRlciBjb3VwdXJlcyDDqWNyYW4gKi8KICAgICAgICAgICAgaGVpZ2h0OiBhdXRvOwogICAgICAgICAgICBwYWRkaW5nOiAxMG1tOwogICAgICAgICAgICBiYWNrZ3JvdW5kOiB3aGl0ZTsKICAgICAgICAgICAgbWFyZ2luOiAwIGF1dG8gMnJlbSBhdXRvOwogICAgICAgICAgICBib3gtc2hhZG93OiAwIDRweCA2cHggLTFweCByZ2JhKDAsIDAsIDAsIDAuMSksIDAgMnB4IDRweCAtMXB4IHJnYmEoMCwgMCwgMCwgMC4wNik7CiAgICAgICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTsKICAgICAgICAgICAgZGlzcGxheTogZmxleDsKICAgICAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsKICAgICAgICAgICAgYm94LXNpemluZzogYm9yZGVyLWJveDsKICAgICAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjsgCiAgICAgICAgfQogICAgICAgIAogICAgICAgIC5BNC1sYW5kc2NhcGUtc2hlZXQgewogICAgICAgICAgICB3aWR0aDogMjk3bW07CiAgICAgICAgICAgIG1pbi1oZWlnaHQ6IDIxMG1tOwogICAgICAgICAgICBoZWlnaHQ6IGF1dG87CiAgICAgICAgICAgIHBhZGRpbmc6IDEwbW07CiAgICAgICAgICAgIGJhY2tncm91bmQ6IHdoaXRlOwogICAgICAgICAgICBtYXJnaW46IDAgYXV0byAycmVtIGF1dG87CiAgICAgICAgICAgIGJveC1zaGFkb3c6IDAgNHB4IDZweCAtMXB4IHJnYmEoMCwgMCwgMCwgMC4xKSwgMCAycHggNHB4IC0xcHggcmdiYSgwLCAwLCAwLCAwLjA2KTsKICAgICAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlOwogICAgICAgICAgICBkaXNwbGF5OiBmbGV4OwogICAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uOwogICAgICAgICAgICBib3gtc2l6aW5nOiBib3JkZXItYm94OwogICAgICAgICAgICBvdmVyZmxvdzogaGlkZGVuOwogICAgICAgIH0KCiAgICAgICAgLyogU2Nyb2xsYmFyIGN1c3RvbSBwb3VyIGxhIHNpZGViYXIgKi8KICAgICAgICAuY3VzdG9tLXNjcm9sbGJhcjo6LXdlYmtpdC1zY3JvbGxiYXIgewogICAgICAgICAgICB3aWR0aDogNnB4OwogICAgICAgIH0KICAgICAgICAuY3VzdG9tLXNjcm9sbGJhcjo6LXdlYmtpdC1zY3JvbGxiYXItdHJhY2sgewogICAgICAgICAgICBiYWNrZ3JvdW5kOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMSk7CiAgICAgICAgfQogICAgICAgIC5jdXN0b20tc2Nyb2xsYmFyOjotd2Via2l0LXNjcm9sbGJhci10aHVtYiB7CiAgICAgICAgICAgIGJhY2tncm91bmQ6IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4zKTsKICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogM3B4OwogICAgICAgIH0KCiAgICAgICAgQG1lZGlhIHByaW50IHsKICAgICAgICAgICAgQHBhZ2UgeyAKICAgICAgICAgICAgICAgIHNpemU6IEE0OyAKICAgICAgICAgICAgICAgIG1hcmdpbjogMDsgCiAgICAgICAgICAgIH0KICAgICAgICAgICAgCiAgICAgICAgICAgIGJvZHksIGh0bWwgewogICAgICAgICAgICAgICAgbWFyZ2luOiAwOwogICAgICAgICAgICAgICAgcGFkZGluZzogMDsKICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6IHdoaXRlOwogICAgICAgICAgICAgICAgaGVpZ2h0OiAxMDAlOwogICAgICAgICAgICAgICAgd2lkdGg6IDEwMCU7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC8qIENhY2hlciB0b3V0IGNlIHF1aSBuJ2VzdCBwYXMgbGEgem9uZSBkJ2ltcHJlc3Npb24gKi8KICAgICAgICAgICAgLm5vLXByaW50LCAucHJpbnQtc2lkZWJhciB7IAogICAgICAgICAgICAgICAgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50OyAKICAgICAgICAgICAgfQoKICAgICAgICAgICAgLyogQ29udGVuZXVyIHByaW5jaXBhbCBkJ2ltcHJlc3Npb24gKi8KICAgICAgICAgICAgLnByaW50LW1vZGFsIHsKICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBzdGF0aWMgIWltcG9ydGFudDsKICAgICAgICAgICAgICAgIGRpc3BsYXk6IGJsb2NrICFpbXBvcnRhbnQ7CiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiB3aGl0ZSAhaW1wb3J0YW50OwogICAgICAgICAgICAgICAgaGVpZ2h0OiBhdXRvICFpbXBvcnRhbnQ7CiAgICAgICAgICAgICAgICB3aWR0aDogMTAwJSAhaW1wb3J0YW50OwogICAgICAgICAgICAgICAgb3ZlcmZsb3c6IHZpc2libGUgIWltcG9ydGFudDsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgLnByaW50LWNvbnRlbnQtYXJlYSB7CiAgICAgICAgICAgICAgICBtYXJnaW46IDAgIWltcG9ydGFudDsKICAgICAgICAgICAgICAgIHBhZGRpbmc6IDAgIWltcG9ydGFudDsKICAgICAgICAgICAgICAgIGhlaWdodDogYXV0byAhaW1wb3J0YW50OwogICAgICAgICAgICAgICAgd2lkdGg6IDEwMCUgIWltcG9ydGFudDsKICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6IHdoaXRlICFpbXBvcnRhbnQ7CiAgICAgICAgICAgICAgICBkaXNwbGF5OiBibG9jayAhaW1wb3J0YW50OwogICAgICAgICAgICAgICAgb3ZlcmZsb3c6IHZpc2libGUgIWltcG9ydGFudDsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgLnByaW50LXdyYXBwZXIgewogICAgICAgICAgICAgICAgbWF4LXdpZHRoOiBub25lICFpbXBvcnRhbnQ7CiAgICAgICAgICAgICAgICBib3gtc2hhZG93OiBub25lICFpbXBvcnRhbnQ7CiAgICAgICAgICAgICAgICBtYXJnaW46IDAgIWltcG9ydGFudDsKICAgICAgICAgICAgICAgIHdpZHRoOiAxMDAlICFpbXBvcnRhbnQ7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC8qIEdlc3Rpb24gZGVzIHNhdXRzIGRlIHBhZ2UgKi8KICAgICAgICAgICAgLkE0LXNoZWV0LCAuQTQtbGFuZHNjYXBlLXNoZWV0IHsKICAgICAgICAgICAgICAgIG1hcmdpbjogMCAhaW1wb3J0YW50OwogICAgICAgICAgICAgICAgYm94LXNoYWRvdzogbm9uZSAhaW1wb3J0YW50OwogICAgICAgICAgICAgICAgcGFnZS1icmVhay1hZnRlcjogYWx3YXlzICFpbXBvcnRhbnQ7CiAgICAgICAgICAgICAgICBicmVhay1hZnRlcjogcGFnZSAhaW1wb3J0YW50OwogICAgICAgICAgICAgICAgcGFnZS1icmVhay1pbnNpZGU6IGF2b2lkICFpbXBvcnRhbnQ7CiAgICAgICAgICAgICAgICBoZWlnaHQ6IGF1dG8gIWltcG9ydGFudDsgLyogTGFpc3NlciBsYSBoYXV0ZXVyIGF1dG8gcG91ciBsJ2ltcHJlc3Npb24gKi8KICAgICAgICAgICAgICAgIG1pbi1oZWlnaHQ6IDAgIWltcG9ydGFudDsKICAgICAgICAgICAgICAgIG92ZXJmbG93OiB2aXNpYmxlICFpbXBvcnRhbnQ7IC8qIENSVUNJQUwgOiBuZSBwYXMgY2FjaGVyIGxlIGNvbnRlbnUgcXVpIGTDqXBhc3NlICovCiAgICAgICAgICAgIH0KICAgICAgICAgICAgCiAgICAgICAgICAgIC5BNC1zaGVldDpsYXN0LWNoaWxkLCAuQTQtbGFuZHNjYXBlLXNoZWV0Omxhc3QtY2hpbGQgeyAKICAgICAgICAgICAgICAgIHBhZ2UtYnJlYWstYWZ0ZXI6IGF1dG8gIWltcG9ydGFudDsgCiAgICAgICAgICAgICAgICBicmVhay1hZnRlcjogYXV0byAhaW1wb3J0YW50OwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgPC9zdHlsZT4KPC9oZWFkPgo8Ym9keT4KICAgIDxkaXYgaWQ9InJvb3QiPjwvZGl2PgoKICAgIDxzY3JpcHQgdHlwZT0idGV4dC9iYWJlbCI+CiAgICAgICAgY29uc3QgeyB1c2VTdGF0ZSwgdXNlRWZmZWN0LCB1c2VSZWYgfSA9IFJlYWN0OwoKICAgICAgICAvKiAtLS0gSUNPTlMgLS0tICovCiAgICAgICAgY29uc3QgSWNvbkJhc2UgPSAoeyBjaGlsZHJlbiwgc2l6ZSA9IDI0LCBjb2xvciA9ICJjdXJyZW50Q29sb3IiLCBjbGFzc05hbWUgPSAiIiB9KSA9PiAoCiAgICAgICAgICAgIDxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD17c2l6ZX0gaGVpZ2h0PXtzaXplfSB2aWV3Qm94PSIwIDAgMjQgMjQiIGZpbGw9Im5vbmUiIHN0cm9rZT17Y29sb3J9IHN0cm9rZVdpZHRoPSIyIiBzdHJva2VMaW5lY2FwPSJyb3VuZCIgc3Ryb2tlTGluZWpvaW49InJvdW5kIiBjbGFzc05hbWU9e2NsYXNzTmFtZX0+CiAgICAgICAgICAgICAgICB7Y2hpbGRyZW59CiAgICAgICAgICAgIDwvc3ZnPgogICAgICAgICk7CgogICAgICAgIGNvbnN0IEljb25zID0gewogICAgICAgICAgICBTYXZlOiAocHJvcHMpID0+IDxJY29uQmFzZSB7Li4ucHJvcHN9PjxwYXRoIGQ9Ik0xOSAyMUg1YTIgMiAwIDAgMS0yLTJWNWEyIDIgMCAwIDEgMi0yaDExbDUgNXYxMWEyIDIgMCAwIDEtMiAyeiIvPjxwb2x5bGluZSBwb2ludHM9IjE3IDIxIDE3IDEzIDcgMTMgNyAyMSIvPjxwb2x5bGluZSBwb2ludHM9IjcgMyA3IDggMTUgOCIvPjwvSWNvbkJhc2U+LAogICAgICAgICAgICBVcGxvYWQ6IChwcm9wcykgPT4gPEljb25CYXNlIHsuLi5wcm9wc30+PHBhdGggZD0iTTIxIDE1djRhMiAyIDAgMCAxLTIgMkg1YTIgMiAwIDAgMS0yLTJ2LTQiLz48cG9seWxpbmUgcG9pbnRzPSIxNyA4IDEyIDMgNyA4Ii8+PGxpbmUgeDE9IjEyIiB5MT0iMyIgeDI9IjEyIiB5Mj0iMTUiLz48L0ljb25CYXNlPiwKICAgICAgICAgICAgVHJhc2gyOiAocHJvcHMpID0+IDxJY29uQmFzZSB7Li4ucHJvcHN9Pjxwb2x5bGluZSBwb2ludHM9IjMgNiA1IDYgMjEgNiIvPjxwYXRoIGQ9Ik0xOSA2djE0YTIgMiAwIDAgMS0yLTJIN2EyIDIgMCAwIDEtMi0yVjZtMyAwVjRhMiAyIDAgMCAxIDItMmg0YTIgMiAwIDAgMSAyIDJ2MiIvPjxsaW5lIHgxPSIxMCIgeTE9IjExIiB4Mj0iMTAiIHkyPSIxNyIvPjxsaW5lIHgxPSIxNCIgeTE9IjExIiB4Mj0iMTQiIHkyPSIxNyIvPjwvSWNvbkJhc2U+LAogICAgICAgICAgICBQcmludGVyOiAocHJvcHMpID0+IDxJY29uQmFzZSB7Li4ucHJvcHN9Pjxwb2x5bGluZSBwb2ludHM9IjYgOSA2IDIgMTggMiAxOCA5Ii8+PHBhdGggZD0iTTYgMThINGEyIDIgMCAwIDEtMi0ydi01YTIgMiAwIDAgMSAyLTJoMTZhMiAyIDAgMCAxIDIgMnY1YTIgMiAwIDAgMS0yIDJoLTIiLz48cmVjdCB4PSI2IiB5PSIxNCIgd2lkdGg9IjEyIiBoZWlnaHQ9IjgiLz48L0ljb25CYXNlPiwKICAgICAgICAgICAgVXNlcnM6IChwcm9wcykgPT4gPEljb25CYXNlIHsuLi5wcm9wc30+PHBhdGggZD0iTTE3IDIxdi0yYTQgNCAwIDAgMC00LTRINWE0IDQgMCAwIDAtNCA0djIiLz48Y2lyY2xlIGN4PSI5IiBjeT0iNyIgcj0iNCIvPjxwYXRoIGQ9Ik0yMyAyMXYtMmE0IDQgMCAwIDAtMy0zLjg3Ii8+PHBhdGggZD0iTTE2IDMuMTNhNCA0IDAgMCAxIDAgNy43NSIvPjwvSWNvbkJhc2U+LAogICAgICAgICAgICBDbG9jazogKHByb3BzKSA9PiA8SWNvbkJhc2Ugey4uLnByb3BzfT48Y2lyY2xlIGN4PSIxMiIgY3k9IjEyIiByPSIxMCIvPjxwb2x5bGluZSBwb2ludHM9IjEyIDYgMTIgMTIgMTYgMTQiLz48L0ljb25CYXNlPiwKICAgICAgICAgICAgQWxlcnRUcmlhbmdsZTogKHByb3BzKSA9PiA8SWNvbkJhc2Ugey4uLnByb3BzfT48cGF0aCBkPSJNMTAuMjkgMy44NkwxLjgyIDE4YTIgMiAwIDAgMCAxLjcxIDNoMTYuOTRhMiAyIDAgMCAwIDEuNzEtM0wxMy43MSAzLjg2YTIgMiAwIDAgMC0zLjQyIDB6Ii8+PGxpbmUgeDE9IjEyIiB5MT0iOSIgeDI9IjEyIiB5Mj0iMTMiLz48bGluZSB4MT0iMTIiIHkxPSIxNyIgeDI9IjEyLjAxIiB5Mj0iMTciLz48L0ljb25CYXNlPiwKICAgICAgICAgICAgRmlsZVVwOiAocHJvcHMpID0+IDxJY29uQmFzZSB7Li4ucHJvcHN9PjxwYXRoIGQ9Ik0xNC41IDJINmEyIDIgMCAwIDAtMiAydjE2YTIgMiAwIDAgMCAyIDJoMTJhMiAyIDAgMCAwIDItMlY3LjVMMTQuNSAyeiIvPjxwb2x5bGluZSBwb2ludHM9IjE0IDIgMTQgOCAyMCA4Ii8+PHBhdGggZD0iTTEyIDEydjYiLz48cGF0aCBkPSJNOSAxNWwzLTMgMyAzIi8+PC9JY29uQmFzZT4sCiAgICAgICAgICAgIERvd25sb2FkOiAocHJvcHMpID0+IDxJY29uQmFzZSB7Li4ucHJvcHN9PjxwYXRoIGQ9Ik0yMSAxNXY0YTIgMiAwIDAgMS0yIDJINWEyIDIgMCAwIDEtMi0ydi00Ii8+PHBvbHlsaW5lIHBvaW50cz0iNyAxMCAxMiAxNSAxNyAxMCIvPjxsaW5lIHgxPSIxMiIgeTE9IjE1IiB4Mj0iMTIiIHkyPSIzIi8+PC9JY29uQmFzZT4sCiAgICAgICAgICAgIFJvdGF0ZUNjdzogKHByb3BzKSA9PiA8SWNvbkJhc2Ugey4uLnByb3BzfT48cG9seWxpbmUgcG9pbnRzPSIxIDQgMSAxMCA3IDEwIi8+PHBhdGggZD0iTTMuNTEgMTVhOSA5IDAgMSAwIDIuMTMtOS4zNkwxIDEwIi8+PC9JY29uQmFzZT4sCiAgICAgICAgICAgIFNoaWVsZEFsZXJ0OiAocHJvcHMpID0+IDxJY29uQmFzZSB7Li4ucHJvcHN9PjxwYXRoIGQ9Ik0xMiAyMnM4LTQgOC0xMFY1bC04LTMtOCAzdjdjMCA2IDggMTAgOCAxMHoiLz48bGluZSB4MT0iMTIiIHkxPSI4IiB4Mj0iMTIiIHkyPSIxMiIvPjxsaW5lIHgxPSIxMiIgeTE9IjE2IiB4Mj0iMTIuMDEiIHkyPSIxNiIvPjwvSWNvbkJhc2U+LAogICAgICAgICAgICBFZGl0OiAocHJvcHMpID0+IDxJY29uQmFzZSB7Li4ucHJvcHN9PjxwYXRoIGQ9Ik0xMSA0SDRhMiAyIDAgMCAwLTIgMnYxNGEyIDIgMCAwIDAgMiAyaDE0YTIgMiAwIDAgMCAyLTJ2LTciLz48cGF0aCBkPSJNMTguNSAyLjVhMi4xMjEgMi4xMjEgMCAwIDEgMyAzTDEyIDE1bC00IDEgMS00IDkuNS05LjV6Ii8+PC9JY29uQmFzZT4sCiAgICAgICAgICAgIENoZWNrQ2lyY2xlOiAocHJvcHMpID0+IDxJY29uQmFzZSB7Li4ucHJvcHN9PjxwYXRoIGQ9Ik0yMiAxMS4wOFYxMmExMCAxMCAwIDEgMS01LjkzLTkuMTQiLz48cG9seWxpbmUgcG9pbnRzPSIyMiA0IDEyIDE0LjAxIDkgMTEuMDEiLz48L0ljb25CYXNlPiwKICAgICAgICAgICAgQ2xpcGJvYXJkTGlzdDogKHByb3BzKSA9PiA8SWNvbkJhc2Ugey4uLnByb3BzfT48cGF0aCBkPSJNMTYgNGgyYTIgMiAwIDAgMSAyIDJ2MTRhMiAyIDAgMCAxLTIgMkg2YTIgMiAwIDAgMS0yLTJWNmEyIDIgMCAwIDEgMi0yaDIiLz48cmVjdCB4PSI4IiB5PSIyIiB3aWR0aD0iOCIgaGVpZ2h0PSI0IiByeD0iMSIgcnk9IjEiLz48cGF0aCBkPSJNOSAxNGwyIDIgNC00Ii8+PC9JY29uQmFzZT4sCiAgICAgICAgICAgIENhbGVuZGFyOiAocHJvcHMpID0+IDxJY29uQmFzZSB7Li4ucHJvcHN9PjxyZWN0IHg9IjMiIHk9IjQiIHdpZHRoPSIxOCIgaGVpZ2h0PSIxOCIgcng9IjIiIHJ5PSIyIi8+PGxpbmUgeDE9IjE2IiB5MT0iMiIgeDI9IjE2IiB5Mj0iNiIvPjxsaW5lIHgxPSI4IiB5MT0iMiIgeDI9IjgiIHkyPSI2Ii8+PGxpbmUgeDE9IjMiIHkxPSIxMCIgeDI9IjIxIiB5Mj0iMTAiLz48L0ljb25CYXNlPiwKICAgICAgICAgICAgQ2hldnJvblVwOiAocHJvcHMpID0+IDxJY29uQmFzZSB7Li4ucHJvcHN9Pjxwb2x5bGluZSBwb2ludHM9IjE4IDE1IDEyIDkgNiAxNSIvPjwvSWNvbkJhc2U+LAogICAgICAgICAgICBDaGV2cm9uRG93bjogKHByb3BzKSA9PiA8SWNvbkJhc2Ugey4uLnByb3BzfT48cG9seWxpbmUgcG9pbnRzPSI2IDkgMTIgMTUgMTggOSIvPjwvSWNvbkJhc2U+LAogICAgICAgICAgICBTcGFya2xlczogKHByb3BzKSA9PiA8SWNvbkJhc2Ugey4uLnByb3BzfT48cGF0aCBkPSJtMTIgMy0xLjkxMiA1LjgxM2EyIDIgMCAwIDEtMS4yNzUgMS4yNzVMMyAxMmw1LjgxMyAxLjkxMmEyIDIgMCAwIDEgMS4yNzUgMS4yNzVMMTIgMjFsMS45MTItNS44MTNhMiAyIDAgMCAxIDEuMjc1LTEuMjc1TDIxIDEybC01LjgxMy0xLjkxMmEyIDIgMCAwIDEtMS4yNzUtMS4yNzVMMTIgM1oiLz48L0ljb25CYXNlPiwKICAgICAgICAgICAgWmFwOiAocHJvcHMpID0+IDxJY29uQmFzZSB7Li4ucHJvcHN9Pjxwb2x5Z29uIHBvaW50cz0iMTMgMiAzIDE0IDEyIDE0IDExIDIyIDIxIDEwIDEyIDEwIDEzIDIiLz48L0ljb25CYXNlPiwKICAgICAgICAgICAgQ29mZmVlOiAocHJvcHMpID0+IDxJY29uQmFzZSB7Li4ucHJvcHN9PjxwYXRoIGQ9Ik0xOCA4aDFhNCA0IDAgMCAxIDAgOGgtMSIvPjxwYXRoIGQ9Ik0yIDhoMTZ2OWE0IDQgMCAwIDEtNCA0SDZhNCA0IDAgMCAxLTQtNFY4eiIvPjxsaW5lIHgxPSI2IiB5MT0iMSIgeDI9IjYiIHkyPSI0Ii8+PGxpbmUgeDE9IjEwIiB5MT0iMSIgeDI9IjEwIiB5Mj0iNCIvPjxsaW5lIHgxPSIxNCIgeTE9IjEiIHgyPSIxNCIgeTI9IjQiLz48L0ljb25CYXNlPiwKICAgICAgICAgICAgTWludXM6IChwcm9wcykgPT4gPEljb25CYXNlIHsuLi5wcm9wc30+PGxpbmUgeDE9IjUiIHkxPSIxMiIgeDI9IjE5IiB5Mj0iMTIiLz48L0ljb25CYXNlPiwKICAgICAgICAgICAgUGx1czogKHByb3BzKSA9PiA8SWNvbkJhc2Ugey4uLnByb3BzfT48bGluZSB4MT0iMTIiIHkxPSI1IiB4Mj0iMTIiIHkyPSIxOSIvPjxsaW5lIHgxPSI1IiB5MT0iMTIiIHgyPSIxOSIgeTI9IjEyIi8+PC9JY29uQmFzZT4sCiAgICAgICAgICAgIEJvb2tPcGVuOiAocHJvcHMpID0+IDxJY29uQmFzZSB7Li4ucHJvcHN9PjxwYXRoIGQ9Ik0yIDNoNmE0IDQgMCAwIDEgNCA0djE0YTMgMyAwIDAgMC0zLTNIMnoiLz48cGF0aCBkPSJNMjIgM2gtNmE0IDQgMCAwIDAtNCA0djE0YTMgMyAwIDAgMSAzLTNoN3oiLz48L0ljb25CYXNlPiwKICAgICAgICAgICAgR3JhZHVhdGlvbkNhcDogKHByb3BzKSA9PiA8SWNvbkJhc2Ugey4uLnByb3BzfT48cGF0aCBkPSJNMjIgMTB2Nk0yIDEwbDEwLTUgMTAgNS0xMCA1eiIvPjxwYXRoIGQ9Ik02IDEydjVjMyAzIDkgMyAxMiAwdi01Ii8+PC9JY29uQmFzZT4sCiAgICAgICAgICAgIENoZXZyb25SaWdodDogKHByb3BzKSA9PiA8SWNvbkJhc2Ugey4uLnByb3BzfT48cG9seWxpbmUgcG9pbnRzPSI5IDE4IDE1IDEyIDkgNiIvPjwvSWNvbkJhc2U+LAogICAgICAgICAgICBBd2FyZDogKHByb3BzKSA9PiA8SWNvbkJhc2Ugey4uLnByb3BzfT48Y2lyY2xlIGN4PSIxMiIgY3k9IjgiIHI9IjciIC8+PHBvbHlsaW5lIHBvaW50cz0iOC4yMSAxMy44OSA3IDIzIDEyIDIwIDE3IDIzIDE1Ljc5IDEzLjg4IiAvPjwvSWNvbkJhc2U+LAogICAgICAgICAgICBNaWM6IChwcm9wcykgPT4gPEljb25CYXNlIHsuLi5wcm9wc30+PHBhdGggZD0iTTEyIDFhMyAzIDAgMCAwLTMgM3Y4YTMgMyAwIDAgMCA2IDBWNGEzIDMgMCAwIDAtMy0zeiIvPjxwYXRoIGQ9Ik0xOSAxMHYyYTcgNyAwIDAgMS0xNCAwdi0yIi8+PGxpbmUgeDE9IjEyIiB5MT0iMTkiIHgyPSIxMiIgeTI9IjIzIi8+PGxpbmUgeDE9IjgiIHkxPSIyMyIgeDI9IjE2IiB5Mj0iMjMiLz48L0ljb25CYXNlPiwKICAgICAgICAgICAgUGllQ2hhcnQ6IChwcm9wcykgPT4gPEljb25CYXNlIHsuLi5wcm9wc30+PHBhdGggZD0iTTIxLjIxIDE1Ljg5QTEwIDEwIDAgMSAxIDggMi44MyIgLz48cGF0aCBkPSJNMjIgMTJBMTAgMTAgMCAwIDAgMTIgMnYxMHoiIC8+PC9JY29uQmFzZT4sCiAgICAgICAgICAgIFNlYXJjaDogKHByb3BzKSA9PiA8SWNvbkJhc2Ugey4uLnByb3BzfT48Y2lyY2xlIGN4PSIxMSIgY3k9IjExIiByPSI4Ij48L2NpcmNsZT48bGluZSB4MT0iMjEiIHkxPSIyMSIgeDI9IjE2LjY1IiB5Mj0iMTYuNjUiPjwvbGluZT48L0ljb25CYXNlPiwKICAgICAgICAgICAgU2F2ZUxvY2FsOiAocHJvcHMpID0+IDxJY29uQmFzZSB7Li4ucHJvcHN9PjxwYXRoIGQ9Ik0xOSAyMUg1YTIgMiAwIDAgMS0yLTJWNWEyIDIgMCAwIDEgMi0yaDExbDUgNXYxMWEyIDIgMCAwIDEtMiAyeiI+PC9wYXRoPjxwb2x5bGluZSBwb2ludHM9IjE3IDIxIDE3IDEzIDcgMTMgNyAyMSI+PC9wb2x5bGluZT48cG9seWxpbmUgcG9pbnRzPSI3IDMgNyA4IDE1IDgiPjwvcG9seWxpbmU+PC9JY29uQmFzZT4sCiAgICAgICAgICAgIEhhbmRIZWFydDogKHByb3BzKSA9PiA8SWNvbkJhc2Ugey4uLnByb3BzfT48cGF0aCBkPSJNMTkgMTRjMS40OS0xLjQ2IDMtMy4yMSAzLTUuNUE1LjUgNS41IDAgMCAwIDE2LjUgM2MtMS43NiAwLTMgLjUtNC41IDItMS41LTEuNS0yLjc0LTItNC41LTJBNS41IDUuNSAwIDAgMCAyIDguNWMwIDIuMyAxLjUgNC4wNSAzIDUuNWw3IDdaIiAvPjwvSWNvbkJhc2U+LAogICAgICAgICAgICBGaWxlVGV4dDogKHByb3BzKSA9PiA8SWNvbkJhc2Ugey4uLnByb3BzfT48cGF0aCBkPSJNMTQgMkg2YTIgMiAwIDAgMC0yIDJ2MTZhMiAyIDAgMCAwIDIgMmgxMmEyIDIgMCAwIDAgMi0yVjh6Ij48L3BhdGg+PHBvbHlsaW5lIHBvaW50cz0iMTQgMiAxNCA4IDIwIDgiPjwvcG9seWxpbmU+PGxpbmUgeDE9IjE2IiB5MT0iMTMiIHgyPSI4IiB5Mj0iMTMiPjwvbGluZT48bGluZSB4MT0iMTYiIHkxPSIxNyIgeDI9IjgiIHkyPSIxNyI+PC9saW5lPjxwb2x5bGluZSBwb2ludHM9IjEwIDkgOSA5IDggOSI+PC9wb2x5bGluZT48L0ljb25CYXNlPiwKICAgICAgICAgICAgVHlwZTogKHByb3BzKSA9PiA8SWNvbkJhc2Ugey4uLnByb3BzfT48cG9seWxpbmUgcG9pbnRzPSI0IDcgNCA0IDIwIDQgMjAgNyIvPjxsaW5lIHgxPSI5IiB5MT0iMjAiIHgyPSIxNSIgeTI9IjIwIi8+PGxpbmUgeDE9IjEyIiB5MT0iNCIgeDI9IjEyIiB5Mj0iMjAiLz48L0ljb25CYXNlPiwKICAgICAgICAgICAgSGVscENpcmNsZTogKHByb3BzKSA9PiA8SWNvbkJhc2Ugey4uLnByb3BzfT48Y2lyY2xlIGN4PSIxMiIgY3k9IjEyIiByPSIxMCIvPjxwYXRoIGQ9Ik05LjA5IDlhMyAzIDAgMCAxIDUuODMgMWMwIDItMyAzLTMgMyIvPjxsaW5lIHgxPSIxMiIgeTE9IjE3IiB4Mj0iMTIuMDEiIHkyPSIxNyIvPjwvSWNvbkJhc2U+LAogICAgICAgICAgICBGb2xkZXI6IChwcm9wcykgPT4gPEljb25CYXNlIHsuLi5wcm9wc30+PHBhdGggZD0iTTIyIDE5YTIgMiAwIDAgMS0yIDJINGEyIDIgMCAwIDEtMi0yVjVhMiAyIDAgMCAxIDItMmg1bDIgM2g5YTIgMiAwIDAgMSAyIDJ6Ii8+PC9JY29uQmFzZT4sCiAgICAgICAgICAgIFNldHRpbmdzOiAocHJvcHMpID0+IDxJY29uQmFzZSB7Li4ucHJvcHN9PjxjaXJjbGUgY3g9IjEyIiBjeT0iMTIiIHI9IjMiPjwvY2lyY2xlPjxwYXRoIGQ9Ik0xOS40IDE1YTEuNjUgMS42NSAwIDAgMCAuMzMgMS44MmwuMDYuMDZhMiAyIDAgMCAxIDAgMi44MyAyIDIgMCAwIDEtMi44MyAwbC0uMDYtLjA2YTEuNjUgMS42NSAwIDAgMC0xLjgyLS4zMyAxLjY1IDEuNjUgMCAwIDAtMSAxLjUxVjIxYTIgMiAwIDAgMS0yIDIgMiAyIDAgMCAxLTItMnYtLjA5QTEuNjUgMS42NSAwIDAgMCA5IDE5LjRhMS42NSAxLjY1IDAgMCAwLTEuODIuMzNsLS4wNi4wNmEyIDIgMCAwIDEgMC0yLjgzIDIgMiAwIDAgMSAyLjgzIDBsLjA2LjA2YTEuNjUgMS42NSAwIDAgMCAuMzMtMS44MiAxLjY1IDEuNjUgMCAwIDAtMS41MS0xSDNhMiAyIDAgMCAxLTItMiAyIDIgMCAwIDEgMi0yaC4wOUExLjY1IDEuNjUgMCAwIDAgNC42IDlhMS42NSAxLjY1IDAgMCAwLS4zMy0xLjgybC0uMDYtLjA2YTIgMiAwIDAgMSAwLTIuODMgMiAyIDAgMCAxIDIuODMgMGwuMDYuMDZhMS42NSAxLjY1IDAgMCAwIDEuODIuMzNIOWExLjY1IDEuNjUgMCAwIDAgMS0xLjUxVjNhMiAyIDAgMCAxIDItMiAyIDIgMCAwIDEgMiAydi4wOWExLjY1IDEuNjUgMCAwIDAgMSAxLjUxIDEuNjUgMS42NSAwIDAgMCAxLjgyLS4zM2wuMDYtLjA2YTIgMiAwIDAgMSAyLjgzIDAgMiAyIDAgMCAxIDAgMi44M2wtLjA2LjA2YTEuNjUgMS42NSAwIDAgMC0uMzMgMS44MlY5YTEuNjUgMS42NSAwIDAgMCAxLjUxIDFIMjFhMiAyIDAgMCAxIDIgMiAyIDIgMCAwIDEtMiAyaC0uMDlhMS42NSAxLjY1IDAgMCAwLTEuNTEgMXoiPjwvcGF0aD48L0ljb25CYXNlPiwKICAgICAgICAgICAgTGFwdG9wOiAocHJvcHMpID0+IDxJY29uQmFzZSB7Li4ucHJvcHN9PjxwYXRoIGQ9Ik0yMCAxNlY3YTIgMiAwIDAgMC0yLTJINmEyIDIgMCAwIDAtMiAydjltMTYgMEg0bTE2IDAgMS4yOCAyLjU1YTEgMSAwIDAgMS0uOSAxLjQ1SDMuNjJhMSAxIDAgMCAxLS45LTEuNDVMNCAxNiIvPjwvSWNvbkJhc2U+LAogICAgICAgICAgICBTdGFtcDogKHByb3BzKSA9PiA8SWNvbkJhc2Ugey4uLnByb3BzfT48cGF0aCBkPSJNMTIgMkwxMiAyMiIvPjxwYXRoIGQ9Ik0xMiAyTDIgN0wxMiAxMkwyMiA3TDEyIDJaIi8+PHBhdGggZD0iTTIgMTdMMTIgMjJMMjIgMTciLz48cGF0aCBkPSJNMiAxMkwxMiAxN0wyMiAxMiIvPjwvSWNvbkJhc2U+LAogICAgICAgICAgICBHcmlkOiAocHJvcHMpID0+IDxJY29uQmFzZSB7Li4ucHJvcHN9PjxyZWN0IHg9IjMiIHk9IjMiIHdpZHRoPSIxOCIgaGVpZ2h0PSIxOCIgcng9IjIiIHJ5PSIyIi8+PGxpbmUgeDE9IjMiIHkxPSI5IiB4Mj0iMjEiIHkyPSI5Ii8+PGxpbmUgeDE9IjMiIHkxPSIxNSIgeDI9IjIxIiB5Mj0iMTUiLz48bGluZSB4MT0iOSIgeTE9IjMiIHgyPSI5IiB5Mj0iMjEiLz48bGluZSB4MT0iMTUiIHkxPSIzIiB4Mj0iMTUiIHkyPSIyMSIvPjwvSWNvbkJhc2U+LAogICAgICAgICAgICBMYXlvdXQ6IChwcm9wcykgPT4gPEljb25CYXNlIHsuLi5wcm9wc30+PHJlY3QgeD0iMyIgeT0iMyIgd2lkdGg9IjE4IiBoZWlnaHQ9IjE4IiByeD0iMiIgcnk9IjIiLz48bGluZSB4MT0iMyIgeTE9IjkiIHgyPSIyMSIgeTI9IjkiLz48bGluZSB4MT0iOSIgeTE9IjIxIiB4Mj0iOSIgeTI9IjkiLz48L0ljb25CYXNlPgogICAgICAgIH07CgogICAgICAgIGNvbnN0IHsgU2F2ZSwgVXBsb2FkLCBUcmFzaDIsIFByaW50ZXIsIFVzZXJzLCBDbG9jaywgQWxlcnRUcmlhbmdsZSwgRmlsZVVwLCBEb3dubG9hZCwgUm90YXRlQ2N3LCBTaGllbGRBbGVydCwgRWRpdCwgQ2hlY2tDaXJjbGUsIENsaXBib2FyZExpc3QsIENhbGVuZGFyLCBDaGV2cm9uVXAsIENoZXZyb25Eb3duLCBTcGFya2xlcywgWmFwLCBDb2ZmZWUsIE1pbnVzLCBQbHVzLCBCb29rT3BlbiwgR3JhZHVhdGlvbkNhcCwgQ2hldnJvblJpZ2h0LCBBd2FyZCwgTWljLCBQaWVDaGFydCwgU2VhcmNoLCBTYXZlTG9jYWwsIEhhbmRIZWFydCwgRmlsZVRleHQsIFR5cGUsIEhlbHBDaXJjbGUsIEZvbGRlciwgU2V0dGluZ3MsIExhcHRvcCwgU3RhbXAsIEdyaWQsIExheW91dCB9ID0gSWNvbnM7CgogICAgICAgIC8qIC0tLSBDT05TVEFOVFMgLS0tICovCiAgICAgICAgY29uc3QgU1VCSkVDVF9NQVBQSU5HID0gewogICAgICAgICAgICAnQVZFTklSJzogWydNQVRIUycsICdURUNITk8nLCAnUEhZLkNISU1JRScsICdIRyBFTUMnLCdISVNUT0lSRS1Hw4lPJywgJ0hJU1RPSVJFJywgJ0dFT0dSQVBISUUnLCAnRU1DJ10sCiAgICAgICAgICAgICdDSVRPWUVOJzogWydISVNUT0lSRS1Hw4lPJywgJ0hJU1RPSVJFJywgJ0dFT0dSQVBISUUnLCAnRU1DJ10sCiAgICAgICAgICAgICdQRUFDJzogWydNVVNJUVVFJywgJ0FSVFMgUExBU1RJUVVFUycsICdBUlRTJywnQVJUUyBQTEFTVCcsICdGUkFOQ0FJUyddLAogICAgICAgICAgICAnU0FOVEUnOiBbJ1NWVCcsICdFUFMnLCAnU0NJRU5DRVMnXSwKICAgICAgICAgICAgJ0NSRU9MRSc6IFsnQ1JFT0xFJywgJ0xDUiddLAogICAgICAgICAgICAnRVNQQUdOT0wnOiBbJ0VTUEFHTk9MJ10sCiAgICAgICAgICAgICdBTkdMQUlTJzogWydBTkdMQUlTJ10sCiAgICAgICAgICAgICdFUEknIDogWydGUkFOQ0FJUyddLAogICAgICAgICAgICAnTEFUSU4nOiBbJ0xBVElOJywgJ0xDQSddCiAgICAgICAgfTsKCiAgICAgICAgY29uc3QgRURTX0xJU1QgPSB7CiAgICAgICAgICAgICJWb2llIEfDqW7DqXJhbGUiOiBbCiAgICAgICAgICAgICAgICAiTWF0aMOpbWF0aXF1ZXMiLCAiUGh5c2lxdWUtQ2hpbWllIiwgIlNWVCIsICJOU0kgKE51bcOpcmlxdWUpIiwgCiAgICAgICAgICAgICAgICAiQmlvbG9naWUtw4ljb2xvZ2llIiwgIlNFUyIsICJIR0dTUCIsICJITFAgKEh1bWFuaXTDqXMpIiwgCiAgICAgICAgICAgICAgICAiTExDRVIgQW5nbGFpcyIsICJMTENFUiBBbmdsYWlzIE1vbmRlIENvbnRlbXAuIiwgIkxMQ0VSIEVzcGFnbm9sIiwgCiAgICAgICAgICAgICAgICAiTExDQSAoTGFuZ3VlcyBBbnRpcXVpdMOpKSIsICJBcnRzIiwgIkVQUENTIChTcG9ydCkiCiAgICAgICAgICAgIF0sCiAgICAgICAgICAgICJTVE1HIjogWyJEcm9pdCBldCDDiWNvbm9taWUiLCAiTWFuYWdlbWVudCwgU2MuIEdlc3Rpb24gKE1lcmNhdGlxdWUpIiwgIk1hbmFnZW1lbnQsIFNjLiBHZXN0aW9uIChSSCkiLCAiTWFuYWdlbWVudCwgU2MuIEdlc3Rpb24gKEdlc3Rpb24tRmluYW5jZSkiLCAiTWFuYWdlbWVudCwgU2MuIEdlc3Rpb24gKFNJRykiXSwKICAgICAgICAgICAgIlNUSTJEIjogWyJJbmfDqW5pZXJpZSwgSW5ub3ZhdGlvbiBldCBERCIsICJQaHlzaXF1ZS1DaGltaWUgZXQgTWF0aMOpbWF0aXF1ZXMiXSwKICAgICAgICAgICAgIlNUMlMiOiBbIkNoaW1pZSwgQmlvIGV0IFBoeXNpb3BhdGhvbG9naWUiLCAiU2MuIGV0IFRlY2huaXF1ZXMgU2FuaXRhaXJlcyJdLAogICAgICAgICAgICAiU1RMIjogWyJQaHlzaXF1ZS1DaGltaWUgZXQgTWF0aMOpbWF0aXF1ZXMiLCAiQmlvY2hpbWllLUJpb2xvZ2llIChCaW90ZWNoKSIsICJTY2llbmNlcyBQaHlzaXF1ZXMgKFNQQykiXSwKICAgICAgICAgICAgIlNURDJBIjogWyJBbmFseXNlIGV0IG3DqXRob2RlcyBlbiBkZXNpZ24iLCAiQ29uY2VwdGlvbiBldCBjcsOpYXRpb24gZGVzaWduIl0sCiAgICAgICAgICAgICJTVEhSIjogWyJTYy4gZXQgdGVjaG5vIGN1bGluYWlyZXMiLCAiw4ljb25vbWllIC0gR2VzdGlvbiBIw7R0ZWxpw6hyZSJdLAogICAgICAgICAgICAiUzJUTUQiOiBbIkN1bHR1cmUgZXQgc2NpZW5jZXMiLCAiUHJhdGlxdWUgKE11c2lxdWUvRGFuc2UvVGjDqcOidHJlKSJdLAogICAgICAgICAgICAiU1RBViI6IFsiR2VzdGlvbiBkZXMgcmVzc291cmNlcyIsICJUZXJyaXRvaXJlcyBldCBzb2Npw6l0w6lzIl0KICAgICAgICB9OwoKICAgICAgICBjb25zdCBHT19TVUJKRUNUX01BUFBJTkcgPSB7CiAgICAgICAgICAgICdNQVRIw4lNQVRJUVVFUyc6IFsnTUFUSFMnLCAnTUFUSEVNQVRJUVVFUycsICdNQVRIJ10sCiAgICAgICAgICAgICdQSFlTSVFVRS1DSElNSUUnOiBbJ1BIWVNJUVVFJywgJ0NISU1JRScsICdTUEMnLCAnU0NJRU5DRVMgUEhZU0lRVUVTJ10sCiAgICAgICAgICAgICdTVlQnOiBbJ1NWVCcsICdCSU9MT0dJRScsICdTQ0lFTkNFUyBERSBMQSBWSUUnXSwKICAgICAgICAgICAgJ05TSSc6IFsnTlNJJywgJ05VTUVSSVFVRScsICdJTkZPUk1BVElRVUUnLCAnU0lJJ10sCiAgICAgICAgICAgICdCSU9MT0dJRS3DiUNPTE9HSUUnOiBbJ0JJT0xPR0lFJywgJ0VDT0xPR0lFJywgJ1NWVCddLAogICAgICAgICAgICAnU0VTJzogWydTRVMnLCAnRUNPTk9NSUUnLCAnU09DSUFMJ10sCiAgICAgICAgICAgICdIR0dTUCc6IFsnSElTVE9JUkUnLCAnR0VPR1JBUEhJRScsICdIR0dTUCcsICdIRyddLAogICAgICAgICAgICAnSExQJzogWydMRVRUUkVTJywgJ0xJVFRFUkFUVVJFJywgJ0ZSQU5DQUlTJywgJ1BISUxPU09QSElFJywgJ1BISUxPJ10sCiAgICAgICAgICAgICdMTENFUiBBTkdMQUlTJzogWydBTkdMQUlTJ10sCiAgICAgICAgICAgICdMTENFUiBFU1BBR05PTCc6IFsnRVNQQUdOT0wnXSwKICAgICAgICAgICAgJ0xMQ0VSIEFMTEVNQU5EJzogWydBTExFTUFORCddLAogICAgICAgICAgICAnTExDQSc6IFsnTEFUSU4nLCAnR1JFQycsICdMRVRUUkVTIENMQVNTSVFVRVMnXSwKICAgICAgICAgICAgJ0FSVFMnOiBbJ0FSVFMnLCAnUExBU1RJUVVFUycsICdNVVNJUVVFJywgJ0NJTkVNQScsICdUSEVBVFJFJ10sCiAgICAgICAgICAgICdFUFBDUyc6IFsnRVBTJywgJ1NQT1JUJ10sCiAgICAgICAgICAgICdTVE1HJzogWydFQ08tR0VTVElPTicsICdNQU5BR0VNRU5UJywgJ0RST0lUJywgJ0VDT05PTUlFJywgJ01BUktFVElORycsICdSSCcsICdTSUcnLCAnR0VTVElPTiddLAogICAgICAgICAgICAnU1RJMkQnOiBbJ1NJSScsICdJTkdFTklFUklFJywgJ1RFQ0hOT0xPR0lFJywgJ1BIWVNJUVVFJ10sCiAgICAgICAgICAgICdTVDJTJzogWydTVFNTJywgJ0JJT1RFQ0gnLCAnQlBIJywgJ1NNUyddLAogICAgICAgICAgICAnU1RMJzogWydCSU9URUNIJywgJ1BIWVNJUVVFJywgJ0NISU1JRScsICdCSU9DSElNSUUnXSwKICAgICAgICAgICAgJ1NURDJBJzogWydERVNJR04nLCAnQVJUUyBBUFBMSVFVRVMnXSwKICAgICAgICAgICAgJ1NUSFInOiBbJ0hPVEVMTEVSSUUnLCAnQ1VJU0lORScsICdTRVJWSUNFJywgJ0dFU1RJT04nXSwKICAgICAgICAgICAgJ1NUQVYnOiBbJ0FHUk9OT01JRScsICdCSU9MT0dJRSddCiAgICAgICAgfTsKCiAgICAgICAgLyogLS0tIEhFTFBFUlMgLS0tICovCiAgICAgICAgY29uc3Qgbm9ybWFsaXplVGV4dCA9ICh0ZXh0KSA9PiB0ZXh0ID8gdGV4dC50b1N0cmluZygpLnRvVXBwZXJDYXNlKCkudHJpbSgpIDogIiI7CgogICAgICAgIGNvbnN0IGNoZWNrQ29tcGF0aWJpbGl0eSA9IChzdHVkZW50LCBwcm9mcywgZXhhbVR5cGUpID0+IHsKICAgICAgICAgICAgaWYgKCFzdHVkZW50KSByZXR1cm4gdHJ1ZTsgCiAgICAgICAgICAgIAogICAgICAgICAgICBsZXQgcmVxdWlyZWRTdWJqZWN0cyA9IFtdOwoKICAgICAgICAgICAgaWYgKGV4YW1UeXBlID09PSAnRE5CJykgewogICAgICAgICAgICAgICAgY29uc3QgcGFyY291cnMgPSBub3JtYWxpemVUZXh0KHN0dWRlbnQuUEFSQ09VUlMpOwogICAgICAgICAgICAgICAgY29uc3QgbGFuZ3VlID0gbm9ybWFsaXplVGV4dChzdHVkZW50LkxBTkdVRSk7CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IGluIFNVQkpFQ1RfTUFQUElORykgewogICAgICAgICAgICAgICAgICAgIGlmIChwYXJjb3Vycy5pbmNsdWRlcyhrZXkpKSByZXF1aXJlZFN1YmplY3RzID0gWy4uLnJlcXVpcmVkU3ViamVjdHMsIC4uLlNVQkpFQ1RfTUFQUElOR1trZXldXTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IGluIFNVQkpFQ1RfTUFQUElORykgewogICAgICAgICAgICAgICAgICAgIGlmIChsYW5ndWUuaW5jbHVkZXMoa2V5KSkgcmVxdWlyZWRTdWJqZWN0cyA9IFsuLi5yZXF1aXJlZFN1YmplY3RzLCAuLi5TVUJKRUNUX01BUFBJTkdba2V5XV07CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgaWYgKFNVQkpFQ1RfTUFQUElOR1twYXJjb3Vyc10pIHJlcXVpcmVkU3ViamVjdHMgPSBbLi4ucmVxdWlyZWRTdWJqZWN0cywgLi4uU1VCSkVDVF9NQVBQSU5HW3BhcmNvdXJzXV07CiAgICAgICAgICAgICAgICBpZiAoU1VCSkVDVF9NQVBQSU5HW2xhbmd1ZV0pIHJlcXVpcmVkU3ViamVjdHMgPSBbLi4ucmVxdWlyZWRTdWJqZWN0cywgLi4uU1VCSkVDVF9NQVBQSU5HW2xhbmd1ZV1dOwogICAgICAgICAgICB9IAogICAgICAgICAgICBlbHNlIGlmIChleGFtVHlwZSA9PT0gJ0dPJykgewogICAgICAgICAgICAgICAgaWYgKCFzdHVkZW50LkVEUykgcmV0dXJuIG51bGw7CiAgICAgICAgICAgICAgICBjb25zdCBlZHMgPSBub3JtYWxpemVUZXh0KHN0dWRlbnQuRURTKTsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gR09fU1VCSkVDVF9NQVBQSU5HKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKGVkcy5pbmNsdWRlcyhrZXkpIHx8IGtleS5pbmNsdWRlcyhlZHMpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkU3ViamVjdHMgPSBbLi4ucmVxdWlyZWRTdWJqZWN0cywgLi4uR09fU1VCSkVDVF9NQVBQSU5HW2tleV1dOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJlcXVpcmVkU3ViamVjdHMucHVzaChlZHMpOwogICAgICAgICAgICB9CgogICAgICAgICAgICByZXF1aXJlZFN1YmplY3RzID0gWy4uLm5ldyBTZXQocmVxdWlyZWRTdWJqZWN0cyldOwoKICAgICAgICAgICAgaWYgKHJlcXVpcmVkU3ViamVjdHMubGVuZ3RoID09PSAwKSByZXR1cm4gbnVsbDsgCgogICAgICAgICAgICBjb25zdCBoYXNNYXRjaCA9IHByb2ZzLnNvbWUocCA9PiB7CiAgICAgICAgICAgICAgICBpZiAoIXAgfHwgIXAuTUFUSUVSRSkgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICAgICAgY29uc3QgbWF0ID0gbm9ybWFsaXplVGV4dChwLk1BVElFUkUpOwogICAgICAgICAgICAgICAgcmV0dXJuIHJlcXVpcmVkU3ViamVjdHMuc29tZShyZXEgPT4gbWF0LmluY2x1ZGVzKG5vcm1hbGl6ZVRleHQocmVxKSkpOwogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIHJldHVybiBoYXNNYXRjaDsKICAgICAgICB9OwoKICAgICAgICBjb25zdCBhZGRNaW51dGVzID0gKHRpbWVTdHIsIG1pbnV0ZXNUb0FkZCkgPT4gewogICAgICAgICAgICBpZiAoIXRpbWVTdHIpIHJldHVybiAiIjsKICAgICAgICAgICAgY29uc3QgW2gsIG1dID0gdGltZVN0ci5zcGxpdCgnOicpLm1hcChOdW1iZXIpOwogICAgICAgICAgICBjb25zdCBkYXRlID0gbmV3IERhdGUoKTsKICAgICAgICAgICAgZGF0ZS5zZXRIb3VycyhoKTsKICAgICAgICAgICAgZGF0ZS5zZXRNaW51dGVzKG0gKyBtaW51dGVzVG9BZGQpOwogICAgICAgICAgICByZXR1cm4gZGF0ZS50b0xvY2FsZVRpbWVTdHJpbmcoJ2ZyLUZSJywgeyBob3VyOiAnMi1kaWdpdCcsIG1pbnV0ZTogJzItZGlnaXQnIH0pOwogICAgICAgIH07CgogICAgICAgIGNvbnN0IGNhbGN1bGF0ZVN0dWRlbnRUaW1lcyA9IChzdHVkZW50cywgc3RhcnRUaW1lLCBleGFtVHlwZSkgPT4gewogICAgICAgICAgICBsZXQgY3VycmVudFRpbWUgPSBzdGFydFRpbWU7CiAgICAgICAgICAgIGxldCBsYXN0R3JvdXAgPSBudWxsOwogICAgICAgICAgICBsZXQgbGFzdEdyb3VwU3RhcnQgPSBudWxsOwogICAgICAgICAgICBsZXQgbGFzdEdyb3VwRW5kID0gbnVsbDsKCiAgICAgICAgICAgIHJldHVybiBzdHVkZW50cy5tYXAoc3R1ZGVudCA9PiB7CiAgICAgICAgICAgICAgICBpZiAoc3R1ZGVudC5pc0JyZWFrKSB7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgZHVyYXRpb24gPSBzdHVkZW50LmR1cmF0aW9uIHx8IDE1OwogICAgICAgICAgICAgICAgICAgIGNvbnN0IHN0YXJ0ID0gY3VycmVudFRpbWU7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgZW5kID0gYWRkTWludXRlcyhzdGFydCwgZHVyYXRpb24pOwogICAgICAgICAgICAgICAgICAgIGN1cnJlbnRUaW1lID0gZW5kOyAKICAgICAgICAgICAgICAgICAgICBsYXN0R3JvdXAgPSBudWxsOyBsYXN0R3JvdXBTdGFydCA9IG51bGw7IGxhc3RHcm91cEVuZCA9IG51bGw7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgLi4uc3R1ZGVudCwgdGltZVN0YXJ0OiBzdGFydCwgdGltZUVuZDogZW5kIH07CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgY29uc3QgcmF3R3JvdXAgPSAoZXhhbVR5cGUgPT09ICdETkInICYmIHN0dWRlbnQuR1JPVVBFKSA/IHN0dWRlbnQuR1JPVVBFLnRvU3RyaW5nKCkudHJpbSgpIDogIiI7CiAgICAgICAgICAgICAgICBjb25zdCBpc0dyb3VwID0gcmF3R3JvdXAubGVuZ3RoID4gMCAmJiByYXdHcm91cC50b1VwcGVyQ2FzZSgpICE9PSAiTk9OIjsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgY29uc3QgaXNUVCA9IChzdHVkZW50LlRUICYmIChzdHVkZW50LlRUID09PSAnT1VJJyB8fCBzdHVkZW50LlRUID09PSB0cnVlIHx8IHN0dWRlbnQuVFQudG9TdHJpbmcoKS50b1VwcGVyQ2FzZSgpLmluY2x1ZGVzKCdUSUVSUycpKSk7CgogICAgICAgICAgICAgICAgbGV0IHN0YXJ0LCBlbmQ7CgogICAgICAgICAgICAgICAgaWYgKGlzR3JvdXAgJiYgcmF3R3JvdXAgPT09IGxhc3RHcm91cCkgewogICAgICAgICAgICAgICAgICAgIHN0YXJ0ID0gbGFzdEdyb3VwU3RhcnQ7CiAgICAgICAgICAgICAgICAgICAgZW5kID0gbGFzdEdyb3VwRW5kOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBzdGFydCA9IGN1cnJlbnRUaW1lOwogICAgICAgICAgICAgICAgICAgIGxldCBkdXJhdGlvbiA9IDA7CiAgICAgICAgICAgICAgICAgICAgaWYgKGV4YW1UeXBlID09PSAnQ0ZHJykgewogICAgICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbiA9IDIwOyAKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzVFQpIGR1cmF0aW9uICs9IDc7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChleGFtVHlwZSA9PT0gJ0dPJykgewogICAgICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbiA9IDIwOyAKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzVFQpIGR1cmF0aW9uICs9IDc7IAogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uID0gaXNHcm91cCA/IDI1IDogMTU7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc1RUKSBkdXJhdGlvbiArPSA1OwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZW5kID0gYWRkTWludXRlcyhzdGFydCwgZHVyYXRpb24pOwogICAgICAgICAgICAgICAgICAgIGN1cnJlbnRUaW1lID0gYWRkTWludXRlcyhlbmQsIDUpOwoKICAgICAgICAgICAgICAgICAgICBpZiAoaXNHcm91cCkgewogICAgICAgICAgICAgICAgICAgICAgICBsYXN0R3JvdXAgPSByYXdHcm91cDsKICAgICAgICAgICAgICAgICAgICAgICAgbGFzdEdyb3VwU3RhcnQgPSBzdGFydDsKICAgICAgICAgICAgICAgICAgICAgICAgbGFzdEdyb3VwRW5kID0gZW5kOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RHcm91cCA9IG51bGw7IGxhc3RHcm91cFN0YXJ0ID0gbnVsbDsgbGFzdEdyb3VwRW5kID0gbnVsbDsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIHsgLi4uc3R1ZGVudCwgdGltZVN0YXJ0OiBzdGFydCwgdGltZUVuZDogZW5kIH07CiAgICAgICAgICAgIH0pOwogICAgICAgIH07CgogICAgICAgIGNvbnN0IHRpbWVUb01pbnV0ZXMgPSAodCkgPT4gewogICAgICAgICAgICBpZiAoIXQpIHJldHVybiAwOwogICAgICAgICAgICBjb25zdCBbaCwgbV0gPSB0LnNwbGl0KCc6JykubWFwKE51bWJlcik7CiAgICAgICAgICAgIHJldHVybiAoaCAqIDYwKSArIChtIHx8IDApOwogICAgICAgIH07CgogICAgICAgIGNvbnN0IG1pbnV0ZXNUb0hITU0gPSAobWlucykgPT4gewogICAgICAgICAgICBjb25zdCBoID0gTWF0aC5mbG9vcihtaW5zIC8gNjApOwogICAgICAgICAgICBjb25zdCBtID0gbWlucyAlIDYwOwogICAgICAgICAgICBjb25zdCBoaCA9IFN0cmluZyhoKS5wYWRTdGFydCgyLCcwJyk7CiAgICAgICAgICAgIGNvbnN0IG1tID0gU3RyaW5nKG0pLnBhZFN0YXJ0KDIsJzAnKTsKICAgICAgICAgICAgcmV0dXJuIGAke2hofToke21tfWA7CiAgICAgICAgfTsKCiAgICAgICAgY29uc3QgZm9ybWF0TWludXRlc0hNID0gKG1pbnMpID0+IHsKICAgICAgICAgICAgY29uc3QgaCA9IE1hdGguZmxvb3IobWlucyAvIDYwKTsKICAgICAgICAgICAgY29uc3QgbSA9IG1pbnMgJSA2MDsKICAgICAgICAgICAgcmV0dXJuIGAke2h9aCR7U3RyaW5nKG0pLnBhZFN0YXJ0KDIsJzAnKX1gOwogICAgICAgIH07CgogICAgICAgIGNvbnN0IGNhbGN1bGF0ZUp1cnlMb2FkID0gKGp1cnksIHN0YXJ0VGltZSwgZXhhbVR5cGUpID0+IHsKICAgICAgICAgICAgY29uc3Qgc3R1ZGVudHNXaXRoVGltZSA9IGNhbGN1bGF0ZVN0dWRlbnRUaW1lcyhqdXJ5LnN0dWRlbnRzIHx8IFtdLCBzdGFydFRpbWUsIGV4YW1UeXBlKTsKICAgICAgICAgICAgCiAgICAgICAgICAgIGxldCB0b3RhbE1pbnV0ZXMgPSAwOwogICAgICAgICAgICBsZXQgdHRDb3VudCA9IDA7CiAgICAgICAgICAgIGNvbnN0IGdyb3VwSWRzID0gbmV3IFNldCgpOwogICAgICAgICAgICBsZXQgbGFzdEVuZCA9IHN0YXJ0VGltZTsKICAgICAgICAgICAgCiAgICAgICAgICAgIGxldCByZWFsU3R1ZGVudENvdW50ID0gMDsKICAgICAgICAgICAgY29uc3QgdW5pcXVlU2xvdHMgPSBuZXcgU2V0KCk7CgogICAgICAgICAgICBzdHVkZW50c1dpdGhUaW1lLmZvckVhY2gocyA9PiB7CiAgICAgICAgICAgICAgICBpZiAocy5pc0JyZWFrKSByZXR1cm47CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIHJlYWxTdHVkZW50Q291bnQrKzsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgY29uc3Qgc2xvdEtleSA9IHMudGltZVN0YXJ0ICsgJy0nICsgcy50aW1lRW5kOwogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBpZiAoIXVuaXF1ZVNsb3RzLmhhcyhzbG90S2V5KSkgewogICAgICAgICAgICAgICAgICAgIHVuaXF1ZVNsb3RzLmFkZChzbG90S2V5KTsKICAgICAgICAgICAgICAgICAgICB0b3RhbE1pbnV0ZXMgKz0gTWF0aC5tYXgoMCwgdGltZVRvTWludXRlcyhzLnRpbWVFbmQpIC0gdGltZVRvTWludXRlcyhzLnRpbWVTdGFydCkpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBpZiAoIWxhc3RFbmQgfHwgdGltZVRvTWludXRlcyhzLnRpbWVFbmQpID4gdGltZVRvTWludXRlcyhsYXN0RW5kKSkgewogICAgICAgICAgICAgICAgICAgIGxhc3RFbmQgPSBzLnRpbWVFbmQ7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgY29uc3QgaXNUVCA9IChzLlRUICYmIChzLlRUID09PSAnT1VJJyB8fCBzLlRUID09PSB0cnVlIHx8IG5vcm1hbGl6ZVRleHQocy5UVCkuaW5jbHVkZXMoJ1RJRVJTJykpKTsKICAgICAgICAgICAgICAgIGlmIChpc1RUKSB0dENvdW50Kys7CiAgICAgICAgICAgICAgICBjb25zdCBnID0gKHMuR1JPVVBFICYmIHMuR1JPVVBFLnRvU3RyaW5nKCkudHJpbSgpICYmIG5vcm1hbGl6ZVRleHQocy5HUk9VUEUpICE9PSAnTk9OJykgPyBzLkdST1VQRS50b1N0cmluZygpLnRyaW0oKSA6ICcnOwogICAgICAgICAgICAgICAgaWYgKGcpIGdyb3VwSWRzLmFkZChnKTsKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAganVyeUlkOiBqdXJ5LmlkLAogICAgICAgICAgICAgICAgcm9vbToganVyeS5yb29tIHx8ICcnLAogICAgICAgICAgICAgICAgc3R1ZGVudENvdW50OiByZWFsU3R1ZGVudENvdW50LAogICAgICAgICAgICAgICAgcGFzc2FnZUNvdW50OiB1bmlxdWVTbG90cy5zaXplLCAKICAgICAgICAgICAgICAgIHRvdGFsTWludXRlcywKICAgICAgICAgICAgICAgIHR0Q291bnQsCiAgICAgICAgICAgICAgICBncm91cENvdW50OiBncm91cElkcy5zaXplLAogICAgICAgICAgICAgICAgZW5kVGltZTogbGFzdEVuZCB8fCBzdGFydFRpbWUKICAgICAgICAgICAgfTsKICAgICAgICB9OwoKICAgICAgICBjb25zdCBnZXRMb2FkU3RhdHVzID0gKGp1cnlNaW51dGVzLCBhdmdNaW51dGVzKSA9PiB7CiAgICAgICAgICAgIGlmICghYXZnTWludXRlcyB8fCBhdmdNaW51dGVzIDw9IDApIHJldHVybiB7IGxhYmVsOiAn4oCUJywgY2xzOiAndGV4dC1zbGF0ZS02MDAgYmctc2xhdGUtMTAwIGJvcmRlci1zbGF0ZS0yMDAnIH07CiAgICAgICAgICAgIGNvbnN0IHJhdGlvID0ganVyeU1pbnV0ZXMgLyBhdmdNaW51dGVzOwogICAgICAgICAgICBpZiAocmF0aW8gPD0gMS4xMCkgcmV0dXJuIHsgbGFiZWw6ICfDiXF1aWxpYnLDqScsIGNsczogJ3RleHQtZW1lcmFsZC03MDAgYmctZW1lcmFsZC01MCBib3JkZXItZW1lcmFsZC0yMDAnIH07CiAgICAgICAgICAgIGlmIChyYXRpbyA8PSAxLjIwKSByZXR1cm4geyBsYWJlbDogJ1NvdXMgdGVuc2lvbicsIGNsczogJ3RleHQtb3JhbmdlLTcwMCBiZy1vcmFuZ2UtNTAgYm9yZGVyLW9yYW5nZS0yMDAnIH07CiAgICAgICAgICAgIHJldHVybiB7IGxhYmVsOiAnU3VyY2hhcmfDqScsIGNsczogJ3RleHQtcmVkLTcwMCBiZy1yZWQtNTAgYm9yZGVyLXJlZC0yMDAnIH07CiAgICAgICAgfTsKCiAgICAgICAgY29uc3QgZm9ybWF0RGF0ZSA9IChkYXRlU3RyKSA9PiB7CiAgICAgICAgICAgIGlmICghZGF0ZVN0cikgcmV0dXJuICJEYXRlIG5vbiBkw6lmaW5pZSI7CiAgICAgICAgICAgIGNvbnN0IHBhcnRzID0gZGF0ZVN0ci5zcGxpdCgnLScpOwogICAgICAgICAgICBpZiAocGFydHMubGVuZ3RoID09PSAzKSB7CiAgICAgICAgICAgICAgICBjb25zdCBkYXRlID0gbmV3IERhdGUocGFyc2VJbnQocGFydHNbMF0pLCBwYXJzZUludChwYXJ0c1sxXSkgLSAxLCBwYXJzZUludChwYXJ0c1syXSkpOwogICAgICAgICAgICAgICAgcmV0dXJuIGRhdGUudG9Mb2NhbGVEYXRlU3RyaW5nKCdmci1GUicsIHsgd2Vla2RheTogJ2xvbmcnLCB5ZWFyOiAnbnVtZXJpYycsIG1vbnRoOiAnbG9uZycsIGRheTogJ251bWVyaWMnIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZShkYXRlU3RyKTsKICAgICAgICAgICAgcmV0dXJuIGRhdGUudG9Mb2NhbGVEYXRlU3RyaW5nKCdmci1GUicsIHsgd2Vla2RheTogJ2xvbmcnLCB5ZWFyOiAnbnVtZXJpYycsIG1vbnRoOiAnbG9uZycsIGRheTogJ251bWVyaWMnIH0pOwogICAgICAgIH07CgogICAgICAgIGNvbnN0IGRvd25sb2FkQ1NWID0gKGRhdGEsIGZpbGVuYW1lKSA9PiB7CiAgICAgICAgICAgIGlmICghZGF0YSB8fCBkYXRhLmxlbmd0aCA9PT0gMCkgewogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGNvbnN0IGhlYWRlcnMgPSBPYmplY3Qua2V5cyhkYXRhWzBdKS5qb2luKCI7Iik7CiAgICAgICAgICAgIGNvbnN0IHJvd3MgPSBkYXRhLm1hcChyb3cgPT4gCiAgICAgICAgICAgICAgICBPYmplY3QudmFsdWVzKHJvdykubWFwKHZhbHVlID0+IHsKICAgICAgICAgICAgICAgICAgICBjb25zdCBzdHIgPSBTdHJpbmcodmFsdWUgfHwgJycpOwogICAgICAgICAgICAgICAgICAgIHJldHVybiBgIiR7c3RyLnJlcGxhY2UoLyIvZywgJyIiJyl9ImA7CiAgICAgICAgICAgICAgICB9KS5qb2luKCI7IikKICAgICAgICAgICAgKTsKICAgICAgICAgICAgY29uc3QgY3N2Q29udGVudCA9ICJcdUZFRkYiICsgW2hlYWRlcnMsIC4uLnJvd3NdLmpvaW4oIlxuIik7CiAgICAgICAgICAgIGNvbnN0IGJsb2IgPSBuZXcgQmxvYihbY3N2Q29udGVudF0sIHsgdHlwZTogJ3RleHQvY3N2O2NoYXJzZXQ9dXRmLTg7JyB9KTsKICAgICAgICAgICAgY29uc3QgbGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImEiKTsKICAgICAgICAgICAgaWYgKGxpbmsuZG93bmxvYWQgIT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICAgICAgY29uc3QgdXJsID0gVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTsKICAgICAgICAgICAgICAgIGxpbmsuc2V0QXR0cmlidXRlKCJocmVmIiwgdXJsKTsKICAgICAgICAgICAgICAgIGxpbmsuc2V0QXR0cmlidXRlKCJkb3dubG9hZCIsIGZpbGVuYW1lKTsKICAgICAgICAgICAgICAgIGxpbmsuc3R5bGUudmlzaWJpbGl0eSA9ICdoaWRkZW4nOwogICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChsaW5rKTsKICAgICAgICAgICAgICAgIGxpbmsuY2xpY2soKTsKICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQobGluayk7CiAgICAgICAgICAgIH0KICAgICAgICB9OwoKICAgICAgICBjb25zdCBjaHVua0FycmF5ID0gKGFycmF5LCBzaXplKSA9PiB7CiAgICAgICAgICAgIGNvbnN0IGNodW5rcyA9IFtdOwogICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFycmF5Lmxlbmd0aDsgaSArPSBzaXplKSB7CiAgICAgICAgICAgICAgICBjaHVua3MucHVzaChhcnJheS5zbGljZShpLCBpICsgc2l6ZSkpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiBjaHVua3M7CiAgICAgICAgfTsKCiAgICAgICAgLyogLS0tIENPTVBPTkVOVFMgLS0tICovCgogICAgICAgIGNvbnN0IEZpbGVVcGxvYWRlciA9ICh7IGxhYmVsLCBvbkRhdGFMb2FkZWQsIGZpZWxkcywgY29sb3IgPSAiYmx1ZSIgfSkgPT4gewogICAgICAgICAgICAgY29uc3QgaGFuZGxlRmlsZSA9IChlKSA9PiB7CiAgICAgICAgICAgICAgICBjb25zdCBmaWxlID0gZS50YXJnZXQuZmlsZXNbMF07CiAgICAgICAgICAgICAgICBpZiAoIWZpbGUpIHJldHVybjsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgUGFwYS5wYXJzZShmaWxlLCB7CiAgICAgICAgICAgICAgICAgICAgaGVhZGVyOiB0cnVlLAogICAgICAgICAgICAgICAgICAgIHNraXBFbXB0eUxpbmVzOiB0cnVlLAogICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybUhlYWRlcjogKGgpID0+IGgudHJpbSgpLAogICAgICAgICAgICAgICAgICAgIGNvbXBsZXRlOiAocmVzdWx0cykgPT4gewogICAgICAgICAgICAgICAgICAgICAgICBvbkRhdGFMb2FkZWQocmVzdWx0cy5kYXRhKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIGNvbnN0IGNvbG9yQ2xhc3NlcyA9IHsKICAgICAgICAgICAgICAgIGJsdWU6ICJib3JkZXItYmx1ZS0yMDAgYmctYmx1ZS01MC81MCBob3ZlcjpiZy1ibHVlLTEwMC84MCB0ZXh0LWJsdWUtNzAwIiwKICAgICAgICAgICAgICAgIGdyZWVuOiAiYm9yZGVyLWVtZXJhbGQtMjAwIGJnLWVtZXJhbGQtNTAvNTAgaG92ZXI6YmctZW1lcmFsZC0xMDAvODAgdGV4dC1lbWVyYWxkLTcwMCIsCiAgICAgICAgICAgICAgICByb3NlOiAiYm9yZGVyLXJvc2UtMjAwIGJnLXJvc2UtNTAvNTAgaG92ZXI6Ymctcm9zZS0xMDAvODAgdGV4dC1yb3NlLTcwMCIsCiAgICAgICAgICAgICAgICBpbmRpZ286ICJib3JkZXItaW5kaWdvLTIwMCBiZy1pbmRpZ28tNTAvNTAgaG92ZXI6YmctaW5kaWdvLTEwMC84MCB0ZXh0LWluZGlnby03MDAiCiAgICAgICAgICAgIH07CgogICAgICAgICAgICByZXR1cm4gKAogICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9e2ByZWxhdGl2ZSBncm91cCBvdmVyZmxvdy1oaWRkZW4gYm9yZGVyLTIgYm9yZGVyLWRhc2hlZCByb3VuZGVkLXhsIHRyYW5zaXRpb24tYWxsIGR1cmF0aW9uLTMwMCBjdXJzb3ItcG9pbnRlciAke2NvbG9yQ2xhc3Nlc1tjb2xvcl0gfHwgY29sb3JDbGFzc2VzLmJsdWV9YH0+CiAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzTmFtZT0iZmxleCBmbGV4LWNvbCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgcC00IGgtZnVsbCB3LWZ1bGwgY3Vyc29yLXBvaW50ZXIgZ2FwLTIiPgogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iYmctd2hpdGUgcC0yLjUgcm91bmRlZC1mdWxsIHNoYWRvdy1zbSBncm91cC1ob3ZlcjpzY2FsZS0xMTAgZ3JvdXAtaG92ZXI6c2hhZG93LW1kIHRyYW5zaXRpb24tYWxsIGR1cmF0aW9uLTMwMCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8RmlsZVVwIHNpemU9ezIwfSBjbGFzc05hbWU9e2B0ZXh0LSR7Y29sb3J9LTUwMGB9IC8+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9ImZvbnQtYm9sZCB0ZXh0LXNtIHRleHQtY2VudGVyIj57bGFiZWx9PC9zcGFuPgogICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9InRleHQtWzEwcHhdIG9wYWNpdHktNjAgZm9udC1tZWRpdW0iPkNTViA6IHtmaWVsZHMuc2xpY2UoMCwgMikuam9pbignLCAnKX0uLi48L3NwYW4+CiAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJmaWxlIiBhY2NlcHQ9Ii5jc3YiIG9uQ2hhbmdlPXtoYW5kbGVGaWxlfSBjbGFzc05hbWU9ImhpZGRlbiIgLz4KICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICk7CiAgICAgICAgfTsKCiAgICAgICAgY29uc3QgU3R1ZGVudENhcmQgPSAoeyBzdHVkZW50LCB0eXBlLCBkcmFnZ2FibGUsIG9uRHJhZ1N0YXJ0LCBvblVwZGF0ZUR1cmF0aW9uLCBvbkVkaXRFZHMsIG9uR2VuZXJhbEVkaXQsIGlzQ29tcGF0IH0pID0+IHsKICAgICAgICAgICAgaWYgKHN0dWRlbnQuaXNCcmVhaykgewogICAgICAgICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgICAgICAgICA8ZGl2IAogICAgICAgICAgICAgICAgICAgICAgICBkcmFnZ2FibGU9e2RyYWdnYWJsZX0KICAgICAgICAgICAgICAgICAgICAgICAgb25EcmFnU3RhcnQ9eyhlKSA9PiBvbkRyYWdTdGFydChlLCBzdHVkZW50KX0KICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPSJwLTIgbWItMiByb3VuZGVkIGJvcmRlciBib3JkZXItb3JhbmdlLTIwMCBiZy1vcmFuZ2UtNTAgc2hhZG93LXNtIGN1cnNvci1ncmFiIGFjdGl2ZTpjdXJzb3ItZ3JhYmJpbmcgdGV4dC1zbSBmbGV4IGZsZXgtY29sIGdhcC0xIgogICAgICAgICAgICAgICAgICAgID4KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9ImZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktYmV0d2VlbiI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTIgdGV4dC1vcmFuZ2UtNzAwIGZvbnQtYm9sZCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENvZmZlZSBzaXplPXsxOH0gLz4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3Bhbj5QQVVTRTwvc3Bhbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAge3N0dWRlbnQudGltZVN0YXJ0ICYmIHN0dWRlbnQudGltZUVuZCAmJiAoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9InRleHQteHMgZm9udC1tb25vIGZvbnQtYm9sZCB0ZXh0LW9yYW5nZS04MDAgYmctb3JhbmdlLTEwMCBweC0yIHB5LTAuNSByb3VuZGVkIGJvcmRlciBib3JkZXItb3JhbmdlLTIwMCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtzdHVkZW50LnRpbWVTdGFydH0gLSB7c3R1ZGVudC50aW1lRW5kfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgKX0KICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1iZXR3ZWVuIG10LTEgcGwtMSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPSJ0ZXh0LVsxMHB4XSB0ZXh0LW9yYW5nZS02MDAgZm9udC1tZWRpdW0gdXBwZXJjYXNlIHRyYWNraW5nLXdpZGUgb3BhY2l0eS04MCI+RHVyw6llIHBlcnNvbm5hbGlzYWJsZTwvc3Bhbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTEgYmctd2hpdGUgcm91bmRlZCBib3JkZXIgYm9yZGVyLW9yYW5nZS0yMDAgcHgtMSBzaGFkb3ctc20iPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtvblVwZGF0ZUR1cmF0aW9uICYmICgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBvbkNsaWNrPXsoKSA9PiBvblVwZGF0ZUR1cmF0aW9uKHN0dWRlbnQuaWQsIE1hdGgubWF4KDUsIChzdHVkZW50LmR1cmF0aW9uIHx8IDE1KSAtIDUpKX0gY2xhc3NOYW1lPSJwLTEgdGV4dC1vcmFuZ2UtNDAwIGhvdmVyOnRleHQtb3JhbmdlLTYwMCBob3ZlcjpiZy1vcmFuZ2UtNTAgcm91bmRlZCIgdGl0bGU9Ii0gNSBtaW4iPjxNaW51cyBzaXplPXsxMn0gLz48L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT0idGV4dC14cyBmb250LW1vbm8gZm9udC1ib2xkIHctMTIgdGV4dC1jZW50ZXIgdGV4dC1vcmFuZ2UtOTAwIj57c3R1ZGVudC5kdXJhdGlvbiB8fCAxNX0gbWluPC9zcGFuPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtvblVwZGF0ZUR1cmF0aW9uICYmICgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBvbkNsaWNrPXsoKSA9PiBvblVwZGF0ZUR1cmF0aW9uKHN0dWRlbnQuaWQsIChzdHVkZW50LmR1cmF0aW9uIHx8IDE1KSArIDUpfSBjbGFzc05hbWU9InAtMSB0ZXh0LW9yYW5nZS00MDAgaG92ZXI6dGV4dC1vcmFuZ2UtNjAwIGhvdmVyOmJnLW9yYW5nZS01MCByb3VuZGVkIiB0aXRsZT0iKyA1IG1pbiI+PFBsdXMgc2l6ZT17MTJ9IC8+PC9idXR0b24+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGNvbnN0IGlzVFQgPSBzdHVkZW50LlRUICYmIChzdHVkZW50LlRUID09PSAnT1VJJyB8fCBub3JtYWxpemVUZXh0KHN0dWRlbnQuVFQpLmluY2x1ZGVzKCdUSUVSUycpIHx8IHN0dWRlbnQuVFQgPT09IHRydWUpOwogICAgICAgICAgICBjb25zdCBpc1BDID0gc3R1ZGVudC5QQyAmJiAoc3R1ZGVudC5QQyA9PT0gJ09VSScgfHwgc3R1ZGVudC5QQyA9PT0gdHJ1ZSk7CiAgICAgICAgICAgIGNvbnN0IGlzQUVTSCA9IHN0dWRlbnQuQUVTSF9OT00gJiYgc3R1ZGVudC5BRVNIX05PTS50cmltKCkgIT09ICIiOwogICAgICAgICAgICBjb25zdCBpc0dyb3VwID0gc3R1ZGVudC5HUk9VUEUgJiYgc3R1ZGVudC5HUk9VUEUubGVuZ3RoID4gMDsKICAgICAgICAgICAgY29uc3Qgc2hvd0NvbXBhdCA9ICh0eXBlID09PSAnRE5CJyB8fCB0eXBlID09PSAnR08nKSAmJiAhc3R1ZGVudC5pc0JyZWFrICYmIGlzQ29tcGF0ICE9PSB1bmRlZmluZWQ7CiAgICAgICAgICAgIAogICAgICAgICAgICByZXR1cm4gKAogICAgICAgICAgICAgICAgPGRpdiAKICAgICAgICAgICAgICAgICAgICBkcmFnZ2FibGU9e2RyYWdnYWJsZX0KICAgICAgICAgICAgICAgICAgICBvbkRyYWdTdGFydD17KGUpID0+IG9uRHJhZ1N0YXJ0KGUsIHN0dWRlbnQpfQogICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17YAogICAgICAgICAgICAgICAgICAgICAgICBwLTIgbWItMiByb3VuZGVkIGJvcmRlciBzaGFkb3ctc20gY3Vyc29yLWdyYWIgYWN0aXZlOmN1cnNvci1ncmFiYmluZyB0ZXh0LXNtIGZsZXggZmxleC1jb2wgZ2FwLTEgcmVsYXRpdmUgZ3JvdXAKICAgICAgICAgICAgICAgICAgICAgICAgJHtpc1RUID8gJ2JnLXJlZC01MCBib3JkZXItcmVkLTIwMCcgOiAnYmctd2hpdGUgYm9yZGVyLWdyYXktMjAwJ30KICAgICAgICAgICAgICAgICAgICAgICAgJHtkcmFnZ2FibGUgPyAnaG92ZXI6c2hhZG93LW1kJyA6ICcnfQogICAgICAgICAgICAgICAgICAgIGB9CiAgICAgICAgICAgICAgICA+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9ImZsZXgganVzdGlmeS1iZXR3ZWVuIGl0ZW1zLXN0YXJ0IGZvbnQtYm9sZCI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT17aXNUVCA/ICd0ZXh0LXJlZC03MDAnIDogJ3RleHQtZ3JheS04MDAnfT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtzdHVkZW50Lk5PTX0ge3N0dWRlbnQuUFJFTk9NfQogICAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9Im1iLTEgZmxleCBnYXAtMiBmbGV4LXdyYXAiPgogICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9InRleHQteHMgYmctZ3JheS0yMDAgcHgtMSByb3VuZGVkIj57c3R1ZGVudC5ESVZ9PC9zcGFuPgogICAgICAgICAgICAgICAgICAgICAgICB7aXNBRVNIICYmIDxzcGFuIGNsYXNzTmFtZT0idGV4dC14cyBiZy1wdXJwbGUtMTAwIHRleHQtcHVycGxlLTcwMCBweC0xIHJvdW5kZWQgZm9udC1ib2xkIGZsZXggaXRlbXMtY2VudGVyIGdhcC0xIiB0aXRsZT17YCR7c3R1ZGVudC5BRVNIX05PTX0gJHtzdHVkZW50LkFFU0hfUFJFTk9NIHx8ICcnfWB9PjxIYW5kSGVhcnQgc2l6ZT17MTB9IC8+IEFFU0g8L3NwYW4+fQogICAgICAgICAgICAgICAgICAgICAgICB7aXNQQyAmJiA8c3BhbiBjbGFzc05hbWU9InRleHQteHMgYmctYmx1ZS0xMDAgdGV4dC1ibHVlLTcwMCBweC0xIHJvdW5kZWQgZm9udC1ib2xkIGZsZXggaXRlbXMtY2VudGVyIGdhcC0xIiB0aXRsZT0iVXRpbGlzZSB1biBPcmRpbmF0ZXVyIj48TGFwdG9wIHNpemU9ezEwfSAvPiBQQzwvc3Bhbj59CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAge2lzVFQgJiYgPHNwYW4gY2xhc3NOYW1lPSJ0ZXh0LXhzIGZvbnQtYm9sZCB0ZXh0LXJlZC02MDAiPuKaoO+4jyBUSUVSUyBURU1QUzwvc3Bhbj59CiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAge3R5cGUgPT09ICdETkInICYmICgKICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9InRleHQteHMgdGV4dC1ncmF5LTYwMCBwYi0yIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtzdHVkZW50LlBBUkNPVVJTICYmIDxkaXYgY2xhc3NOYW1lPSJ0cnVuY2F0ZSIgdGl0bGU9e3N0dWRlbnQuUEFSQ09VUlN9PlBhcmNvdXJzOiB7c3R1ZGVudC5QQVJDT1VSU308L2Rpdj59CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7c3R1ZGVudC5USEVNRSAmJiA8ZGl2IGNsYXNzTmFtZT0idHJ1bmNhdGUiIHRpdGxlPXtzdHVkZW50LlRIRU1FfT5UaMOobWU6IHtzdHVkZW50LlRIRU1FfTwvZGl2Pn0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtzdHVkZW50LkxBTkdVRSAmJiA8ZGl2Pkxhbmd1ZToge3N0dWRlbnQuTEFOR1VFfTwvZGl2Pn0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtpc0dyb3VwICYmIDxkaXYgY2xhc3NOYW1lPSJ0ZXh0LWJsdWUtNjAwIGZvbnQtc2VtaWJvbGQiPkdyb3VwZToge3N0dWRlbnQuR1JPVVBFfTwvZGl2Pn0KICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgKX0KCiAgICAgICAgICAgICAgICAgICAge3R5cGUgPT09ICdHTycgJiYgKAogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0idGV4dC14cyBtdC0xIGJvcmRlci10IGJvcmRlci1ncmF5LTEwMCBwdC0xIHBiLTEiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAge3N0dWRlbnQuRURTID8gKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJ0ZXh0LXJvc2UtNzAwIGZvbnQtYm9sZCBmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMSBwci02Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEJvb2tPcGVuIHNpemU9ezEyfSAvPiB7c3R1ZGVudC5FRFN9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtvbkVkaXRFZHMgJiYgKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBvbkNsaWNrPXsoZSkgPT4geyBlLnN0b3BQcm9wYWdhdGlvbigpOyBvbkVkaXRFZHMoc3R1ZGVudCk7IH19IGNsYXNzTmFtZT0idGV4dC1ncmF5LTQwMCBob3Zlcjp0ZXh0LXJvc2UtNjAwIG1sLTEiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxFZGl0IHNpemU9ezEyfSAvPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICApIDogKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eyhlKSA9PiB7IGUuc3RvcFByb3BhZ2F0aW9uKCk7IG9uRWRpdEVkcyAmJiBvbkVkaXRFZHMoc3R1ZGVudCk7IH19CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0idy1mdWxsIHRleHQtY2VudGVyIGJnLXJvc2UtNTAgaG92ZXI6Ymctcm9zZS0xMDAgdGV4dC1yb3NlLTYwMCB0ZXh0LXhzIGZvbnQtYm9sZCBweS0xIHJvdW5kZWQgYm9yZGVyIGJvcmRlci1yb3NlLTIwMCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBnYXAtMSIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxFZGl0IHNpemU9ezEyfSAvPiBEw6lmaW5pciBFRFMKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9CiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICl9CgogICAgICAgICAgICAgICAgICAgIHtzaG93Q29tcGF0ICYmICgKICAgICAgICAgICAgICAgICAgICAgICAgPD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtpc0NvbXBhdCA9PT0gdHJ1ZSAmJiAoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9ImFic29sdXRlIGJvdHRvbS04IHJpZ2h0LTEgYmctZ3JlZW4tNTAgdGV4dC1ncmVlbi03MDAgYm9yZGVyIGJvcmRlci1ncmVlbi0yMDAgdGV4dC1bMTBweF0gZm9udC1ib2xkIHB4LTEuNSBweS0wLjUgcm91bmRlZCBzaGFkb3ctc20gZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTEgei0xMCBiYWNrZHJvcC1ibHVyLXNtIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENoZWNrQ2lyY2xlIHNpemU9ezEyfSAvPiBDb21wYXRpYmxlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICApfQogICAgICAgICAgICAgICAgICAgICAgICAgICAge2lzQ29tcGF0ID09PSBmYWxzZSAmJiAoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9ImFic29sdXRlIGJvdHRvbS04IHJpZ2h0LTEgYmctb3JhbmdlLTUwIHRleHQtb3JhbmdlLTcwMCBib3JkZXIgYm9yZGVyLW9yYW5nZS0yMDAgdGV4dC1bMTBweF0gZm9udC1ib2xkIHB4LTEuNSBweS0wLjUgcm91bmRlZCBzaGFkb3ctc20gZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTEgei0xMCBiYWNrZHJvcC1ibHVyLXNtIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEFsZXJ0VHJpYW5nbGUgc2l6ZT17MTJ9IC8+IE1hdGnDqHJlID8KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7aXNDb21wYXQgPT09IG51bGwgJiYgdHlwZSA9PT0gJ0dPJyAmJiAoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9ImFic29sdXRlIGJvdHRvbS04IHJpZ2h0LTEgYmctb3JhbmdlLTUwIHRleHQtb3JhbmdlLTcwMCBib3JkZXIgYm9yZGVyLW9yYW5nZS0yMDAgdGV4dC1bMTBweF0gZm9udC1ib2xkIHB4LTEuNSBweS0wLjUgcm91bmRlZCBzaGFkb3ctc20gZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTEgei0xMCBiYWNrZHJvcC1ibHVyLXNtIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEFsZXJ0VHJpYW5nbGUgc2l6ZT17MTJ9IC8+IEVEUyA/CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICApfQogICAgICAgICAgICAgICAgICAgICAgICA8Lz4KICAgICAgICAgICAgICAgICAgICApfQoKICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIAogICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoZSkgPT4geyBlLnN0b3BQcm9wYWdhdGlvbigpOyBvbkdlbmVyYWxFZGl0KHN0dWRlbnQpOyB9fQogICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9ImFic29sdXRlIGJvdHRvbS0xIHJpZ2h0LTEgdGV4dC1ncmF5LTQwMCBob3Zlcjp0ZXh0LWJsdWUtNjAwIGJnLXdoaXRlLzgwIGhvdmVyOmJnLXdoaXRlIHJvdW5kZWQtZnVsbCBwLTEuNSB0cmFuc2l0aW9uLWNvbG9ycyB6LTEwIHNoYWRvdy1zbSBib3JkZXIgYm9yZGVyLXRyYW5zcGFyZW50IGhvdmVyOmJvcmRlci1ncmF5LTIwMCIKICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU9Ik1vZGlmaWVyIGxlcyBpbmZvcm1hdGlvbnMiCiAgICAgICAgICAgICAgICAgICAgPgogICAgICAgICAgICAgICAgICAgICAgICA8RWRpdCBzaXplPXsxNH0gLz4KICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICApOwogICAgICAgIH07CgogICAgICAgIGNvbnN0IEp1cnlDb2x1bW4gPSAoeyBqdXJ5SWQsIGp1cnlEYXRhLCBwcm9mcywgb25VcGRhdGVKdXJ5LCBvbkRyb3BTdHVkZW50LCBvblJlbW92ZVN0dWRlbnQsIG9uTW92ZVN0dWRlbnQsIG9uVXBkYXRlU3R1ZGVudER1cmF0aW9uLCBleGFtVHlwZSwgc3RhcnRUaW1lLCBvbkVkaXRFZHMsIG9uR2VuZXJhbEVkaXQsIHNpbmdsZUp1cnkgfSkgPT4gewogICAgICAgICAgICBjb25zdCBbaXNFZGl0aW5nLCBzZXRJc0VkaXRpbmddID0gdXNlU3RhdGUoZmFsc2UpOwogICAgICAgICAgICBjb25zdCBzdHVkZW50c1dpdGhUaW1lID0gY2FsY3VsYXRlU3R1ZGVudFRpbWVzKGp1cnlEYXRhLnN0dWRlbnRzLCBzdGFydFRpbWUsIGV4YW1UeXBlKTsKICAgICAgICAgICAgY29uc3QgcHJvZjEgPSBwcm9mcy5maW5kKHAgPT4gcC5pZCA9PT0ganVyeURhdGEucHJvZjFJZCkgfHwge307CiAgICAgICAgICAgIGNvbnN0IHByb2YyID0gcHJvZnMuZmluZChwID0+IHAuaWQgPT09IGp1cnlEYXRhLnByb2YySWQpIHx8IHt9OwoKICAgICAgICAgICAgY29uc3QgaGFuZGxlRHJvcCA9IChlKSA9PiB7CiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgICAgICAgICBjb25zdCBkYXRhID0gZS5kYXRhVHJhbnNmZXIuZ2V0RGF0YSgic3R1ZGVudCIpOwogICAgICAgICAgICAgICAgaWYgKGRhdGEgPT09ICJORVdfUEFVU0UiKSB7CiAgICAgICAgICAgICAgICAgICAgb25Ecm9wU3R1ZGVudChqdXJ5SWQsIHsgaWQ6ICdORVdfUEFVU0UnIH0pOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBjb25zdCBzdHVkZW50RGF0YSA9IEpTT04ucGFyc2UoZGF0YSk7CiAgICAgICAgICAgICAgICAgICAgb25Ecm9wU3R1ZGVudChqdXJ5SWQsIHN0dWRlbnREYXRhKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgICAgICA8ZGl2IAogICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0iYmctd2hpdGUgYm9yZGVyIGJvcmRlci1ncmF5LTMwMCByb3VuZGVkLWxnIGZsZXggZmxleC1jb2wgdy04MCBzaHJpbmstMCBoLWZ1bGwgbWF4LWgtWzgwMHB4XSIKICAgICAgICAgICAgICAgICAgICBvbkRyYWdPdmVyPXsoZSkgPT4gZS5wcmV2ZW50RGVmYXVsdCgpfQogICAgICAgICAgICAgICAgICAgIG9uRHJvcD17aGFuZGxlRHJvcH0KICAgICAgICAgICAgICAgID4KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iYmctc2xhdGUtMTAwIHAtMyByb3VuZGVkLXQtbGcgYm9yZGVyLWIgYm9yZGVyLWdyYXktMjAwIj4KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9ImZsZXgganVzdGlmeS1iZXR3ZWVuIGl0ZW1zLWNlbnRlciBtYi0yIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMyBjbGFzc05hbWU9ImZvbnQtYm9sZCB0ZXh0LWxnIHRleHQtc2xhdGUtODAwIj5KdXJ5IHtqdXJ5SWR9PC9oMz4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gb25DbGljaz17KCkgPT4gc2V0SXNFZGl0aW5nKCFpc0VkaXRpbmcpfSBjbGFzc05hbWU9InRleHQtYmx1ZS02MDAgaG92ZXI6dGV4dC1ibHVlLTgwMCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEVkaXQgc2l6ZT17MTZ9IC8+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICB7aXNFZGl0aW5nID8gKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9ImZsZXggZmxleC1jb2wgZ2FwLTIgdGV4dC1zbSBtYi0yIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0idGV4dCIgdmFsdWU9e2p1cnlEYXRhLnJvb219IG9uQ2hhbmdlPXsoZSkgPT4gb25VcGRhdGVKdXJ5KGp1cnlJZCwgJ3Jvb20nLCBlLnRhcmdldC52YWx1ZSl9IGNsYXNzTmFtZT0iYm9yZGVyIHAtMSByb3VuZGVkIiBwbGFjZWhvbGRlcj0iU2FsbGUgKGV4OiBEMjEpIi8+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNlbGVjdCBjbGFzc05hbWU9ImJvcmRlciBwLTEgcm91bmRlZCIgdmFsdWU9e2p1cnlEYXRhLnByb2YxSWQgfHwgJyd9IG9uQ2hhbmdlPXsoZSkgPT4gb25VcGRhdGVKdXJ5KGp1cnlJZCwgJ3Byb2YxSWQnLCBlLnRhcmdldC52YWx1ZSl9PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSIiPlPDqWxlY3Rpb25uZXIgUHJvZiAxPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtwcm9mcy5tYXAocCA9PiA8b3B0aW9uIGtleT17cC5pZH0gdmFsdWU9e3AuaWR9PntwLk5PTX0ge3AuUFJFTk9NfSAoe3AuTUFUSUVSRX0pPC9vcHRpb24+KX0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3NlbGVjdD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IXNpbmdsZUp1cnkgJiYgKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c2VsZWN0IGNsYXNzTmFtZT0iYm9yZGVyIHAtMSByb3VuZGVkIiB2YWx1ZT17anVyeURhdGEucHJvZjJJZCB8fCAnJ30gb25DaGFuZ2U9eyhlKSA9PiBvblVwZGF0ZUp1cnkoanVyeUlkLCAncHJvZjJJZCcsIGUudGFyZ2V0LnZhbHVlKX0+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSIiPlPDqWxlY3Rpb25uZXIgUHJvZiAyPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7cHJvZnMubWFwKHAgPT4gPG9wdGlvbiBrZXk9e3AuaWR9IHZhbHVlPXtwLmlkfT57cC5OT019IHtwLlBSRU5PTX0gKHtwLk1BVElFUkV9KTwvb3B0aW9uPil9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc2VsZWN0PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgKSA6ICgKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJ0ZXh0LXNtIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9ImZvbnQtc2VtaWJvbGQiPlNhbGxlIDogPHNwYW4gY2xhc3NOYW1lPSJ0ZXh0LWJsdWUtNjAwIj57anVyeURhdGEucm9vbSB8fCAnTm9uIGFzc2lnbsOpZSd9PC9zcGFuPjwvcD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9InRydW5jYXRlIiB0aXRsZT17cHJvZjEuTk9NID8gYCR7cHJvZjEuTk9NfSAke3Byb2YxLlBSRU5PTX1gIDogJyd9PlAxOiB7cHJvZjEuTk9NIHx8ICctLS0nfSA8c3BhbiBjbGFzc05hbWU9InRleHQtZ3JheS01MDAgdGV4dC14cyI+KHtwcm9mMS5NQVRJRVJFIHx8ICc/J30pPC9zcGFuPjwvcD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9InRydW5jYXRlIiB0aXRsZT17cHJvZjIuTk9NID8gYCR7cHJvZjIuTk9NfSAke3Byb2YyLlBSRU5PTX1gIDogJyd9PlAyOiB7cHJvZjIuTk9NIHx8ICctLS0nfSA8c3BhbiBjbGFzc05hbWU9InRleHQtZ3JheS01MDAgdGV4dC14cyI+KHtwcm9mMi5NQVRJRVJFIHx8ICc/J30pPC9zcGFuPjwvcD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICApfQogICAgICAgICAgICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iZmxleC0xIG92ZXJmbG93LXktYXV0byBwLTIgc3BhY2UteS0yIGJnLWdyYXktNTAiPgogICAgICAgICAgICAgICAgICAgICAgICB7c3R1ZGVudHNXaXRoVGltZS5sZW5ndGggPT09IDAgJiYgPGRpdiBjbGFzc05hbWU9InRleHQtY2VudGVyIHRleHQtZ3JheS00MDAgaXRhbGljIHB5LTEwIj5HbGlzc2VyIGxlcyDDqWzDqHZlcyBpY2k8L2Rpdj59CiAgICAgICAgICAgICAgICAgICAgICAgIHtzdHVkZW50c1dpdGhUaW1lLm1hcCgoc3R1ZGVudCwgaWR4KSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpc0NvbXBhdCA9IChleGFtVHlwZSA9PT0gJ0ROQicgfHwgZXhhbVR5cGUgPT09ICdHTycpID8gY2hlY2tDb21wYXRpYmlsaXR5KHN0dWRlbnQsIFtwcm9mMSwgcHJvZjJdLCBleGFtVHlwZSkgOiB1bmRlZmluZWQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpc0xpbmtlZFRvUHJldiA9ICFzdHVkZW50LmlzQnJlYWsgJiYgaWR4ID4gMCAmJiBzdHVkZW50LnRpbWVTdGFydCA9PT0gc3R1ZGVudHNXaXRoVGltZVtpZHgtMV0udGltZVN0YXJ0OwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBrZXk9e3N0dWRlbnQuaWR9IGNsYXNzTmFtZT0icmVsYXRpdmUgZ3JvdXAiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17YGFic29sdXRlIC1sZWZ0LTIgdG9wLTIgdGV4dC1bMTBweF0gZm9udC1tb25vIHctMTAgdGV4dC1yaWdodCBwci0xICR7aXNMaW5rZWRUb1ByZXYgPyAndGV4dC1ibHVlLTMwMCcgOiAndGV4dC1ncmF5LTUwMCd9YH0+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7aXNMaW5rZWRUb1ByZXYgPyAn4oazJyA6IHN0dWRlbnQudGltZVN0YXJ0fQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9Im1sLTgiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFN0dWRlbnRDYXJkIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0dWRlbnQ9e3N0dWRlbnR9IAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9e2V4YW1UeXBlfSAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkcmFnZ2FibGU9e3RydWV9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNDb21wYXQ9e2lzQ29tcGF0fQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uRHJhZ1N0YXJ0PXsoZSkgPT4geyBlLmRhdGFUcmFuc2Zlci5zZXREYXRhKCJzdHVkZW50IiwgSlNPTi5zdHJpbmdpZnkoey4uLnN0dWRlbnQsIGZyb21KdXJ5OiBqdXJ5SWR9KSk7IH19CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25VcGRhdGVEdXJhdGlvbj17b25VcGRhdGVTdHVkZW50RHVyYXRpb24gPyAoaWQsIGR1cmF0aW9uKSA9PiBvblVwZGF0ZVN0dWRlbnREdXJhdGlvbihqdXJ5SWQsIGlkLCBkdXJhdGlvbikgOiBudWxsfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uRWRpdEVkcz17b25FZGl0RWRzfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uR2VuZXJhbEVkaXQ9e29uR2VuZXJhbEVkaXR9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iYWJzb2x1dGUgdG9wLTEgcmlnaHQtMSBmbGV4IGdhcC0xIG9wYWNpdHktMCBncm91cC1ob3ZlcjpvcGFjaXR5LTEwMCB0cmFuc2l0aW9uLW9wYWNpdHkgYmctd2hpdGUvODAgcm91bmRlZC1sZyBwLTAuNSBzaGFkb3ctc20gYmFja2Ryb3AtYmx1ci1zbSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2lkeCA+IDAgJiYgPGJ1dHRvbiBvbkNsaWNrPXsoKSA9PiBvbk1vdmVTdHVkZW50KGp1cnlJZCwgc3R1ZGVudC5pZCwgLTEpfSBjbGFzc05hbWU9InRleHQtZ3JheS01MDAgaG92ZXI6dGV4dC1ibHVlLTYwMCBob3ZlcjpiZy1ibHVlLTUwIHJvdW5kZWQgcC0wLjUiPjxDaGV2cm9uVXAgc2l6ZT17MTR9IC8+PC9idXR0b24+fQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtpZHggPCBzdHVkZW50c1dpdGhUaW1lLmxlbmd0aCAtIDEgJiYgPGJ1dHRvbiBvbkNsaWNrPXsoKSA9PiBvbk1vdmVTdHVkZW50KGp1cnlJZCwgc3R1ZGVudC5pZCwgMSl9IGNsYXNzTmFtZT0idGV4dC1ncmF5LTUwMCBob3Zlcjp0ZXh0LWJsdWUtNjAwIGhvdmVyOmJnLWJsdWUtNTAgcm91bmRlZCBwLTAuNSI+PENoZXZyb25Eb3duIHNpemU9ezE0fSAvPjwvYnV0dG9uPn0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0idy1weCBiZy1ncmF5LTIwMCBteC0wLjUiPjwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gb25DbGljaz17KCkgPT4gb25SZW1vdmVTdHVkZW50KGp1cnlJZCwgc3R1ZGVudC5pZCl9IGNsYXNzTmFtZT0idGV4dC1yZWQtNDAwIGhvdmVyOnRleHQtcmVkLTYwMCBob3ZlcjpiZy1yZWQtNTAgcm91bmRlZCBwLTAuNSI+PFJvdGF0ZUNjdyBzaXplPXsxNH0gLz48L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pfQogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICk7CiAgICAgICAgfTsKCiAgICAgICAgY29uc3QgR2VuZXJhbFN0dWRlbnRFZGl0TW9kYWwgPSAoeyBzdHVkZW50LCBleGFtVHlwZSwgb25DbG9zZSwgb25TYXZlIH0pID0+IHsKICAgICAgICAgICAgIGNvbnN0IFtmb3JtRGF0YSwgc2V0Rm9ybURhdGFdID0gdXNlU3RhdGUoeyAuLi5zdHVkZW50IH0pOwoKICAgICAgICAgICAgY29uc3QgaGFuZGxlQ2hhbmdlID0gKGUpID0+IHsKICAgICAgICAgICAgICAgIGNvbnN0IHsgbmFtZSwgdmFsdWUsIHR5cGUsIGNoZWNrZWQgfSA9IGUudGFyZ2V0OwogICAgICAgICAgICAgICAgc2V0Rm9ybURhdGEocHJldiA9PiAoewogICAgICAgICAgICAgICAgICAgIC4uLnByZXYsCiAgICAgICAgICAgICAgICAgICAgW25hbWVdOiB0eXBlID09PSAnY2hlY2tib3gnID8gKGNoZWNrZWQgPyAnT1VJJyA6ICdOT04nKSA6IHZhbHVlCiAgICAgICAgICAgICAgICB9KSk7CiAgICAgICAgICAgIH07CgogICAgICAgICAgICByZXR1cm4gKAogICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9ImZpeGVkIGluc2V0LTAgei01MCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBiZy1ibGFjay81MCBiYWNrZHJvcC1ibHVyLXNtIj4KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iYmctd2hpdGUgcm91bmRlZC14bCBzaGFkb3ctMnhsIHAtNiB3LVs1MDBweF0gbWF4LXctZnVsbCBtLTQgYW5pbWF0ZS1zY2FsZS1pbiI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJmbGV4IGp1c3RpZnktYmV0d2VlbiBpdGVtcy1jZW50ZXIgbWItNCBwYi0yIGJvcmRlci1iIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMiBjbGFzc05hbWU9InRleHQteGwgZm9udC1ib2xkIHRleHQtc2xhdGUtODAwIGZsZXggaXRlbXMtY2VudGVyIGdhcC0yIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8RWRpdCBjbGFzc05hbWU9InRleHQtYmx1ZS02MDAiIC8+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTW9kaWZpZXIgbGVzIGluZm9ybWF0aW9ucwogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9oMj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gb25DbGljaz17b25DbG9zZX0gY2xhc3NOYW1lPSJ0ZXh0LWdyYXktNDAwIGhvdmVyOnRleHQtZ3JheS02MDAiPiZ0aW1lczs8L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CgogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ic3BhY2UteS00Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJncmlkIGdyaWQtY29scy0yIGdhcC00Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3NOYW1lPSJibG9jayB0ZXh0LXhzIGZvbnQtYm9sZCB0ZXh0LWdyYXktNTAwIHVwcGVyY2FzZSBtYi0xIj5Ob208L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0idGV4dCIgbmFtZT0iTk9NIiB2YWx1ZT17Zm9ybURhdGEuTk9NfSBvbkNoYW5nZT17aGFuZGxlQ2hhbmdlfSBjbGFzc05hbWU9InctZnVsbCBib3JkZXIgcC0yIHJvdW5kZWQgZm9jdXM6cmluZy0yIGZvY3VzOnJpbmctYmx1ZS0yMDAgb3V0bGluZS1ub25lIiAvPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzc05hbWU9ImJsb2NrIHRleHQteHMgZm9udC1ib2xkIHRleHQtZ3JheS01MDAgdXBwZXJjYXNlIG1iLTEiPlByw6lub208L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0idGV4dCIgbmFtZT0iUFJFTk9NIiB2YWx1ZT17Zm9ybURhdGEuUFJFTk9NfSBvbkNoYW5nZT17aGFuZGxlQ2hhbmdlfSBjbGFzc05hbWU9InctZnVsbCBib3JkZXIgcC0yIHJvdW5kZWQgZm9jdXM6cmluZy0yIGZvY3VzOnJpbmctYmx1ZS0yMDAgb3V0bGluZS1ub25lIiAvPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9ImdyaWQgZ3JpZC1jb2xzLTIgZ2FwLTQiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzc05hbWU9ImJsb2NrIHRleHQteHMgZm9udC1ib2xkIHRleHQtZ3JheS01MDAgdXBwZXJjYXNlIG1iLTEiPkNsYXNzZSAoRElWKTwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiBuYW1lPSJESVYiIHZhbHVlPXtmb3JtRGF0YS5ESVZ9IG9uQ2hhbmdlPXtoYW5kbGVDaGFuZ2V9IGNsYXNzTmFtZT0idy1mdWxsIGJvcmRlciBwLTIgcm91bmRlZCBmb2N1czpyaW5nLTIgZm9jdXM6cmluZy1ibHVlLTIwMCBvdXRsaW5lLW5vbmUiIC8+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9ImZsZXggaXRlbXMtZW5kIGdhcC0yIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzTmFtZT0iZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTIgY3Vyc29yLXBvaW50ZXIgYmctcmVkLTUwIHAtMiByb3VuZGVkIGJvcmRlciBib3JkZXItcmVkLTEwMCB3LWZ1bGwgaG92ZXI6YmctcmVkLTEwMCB0cmFuc2l0aW9uIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPSJjaGVja2JveCIgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT0iVFQiIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9e2Zvcm1EYXRhLlRUID09PSAnT1VJJyB8fCBmb3JtRGF0YS5UVCA9PT0gdHJ1ZSB8fCAodHlwZW9mIGZvcm1EYXRhLlRUID09PSAnc3RyaW5nJyAmJiBmb3JtRGF0YS5UVC5pbmNsdWRlcygnVElFUlMnKSl9IAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXtoYW5kbGVDaGFuZ2V9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPSJ3LTUgaC01IHRleHQtcmVkLTYwMCByb3VuZGVkIGZvY3VzOnJpbmctcmVkLTUwMCIgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPSJmb250LWJvbGQgdGV4dC1yZWQtNzAwIHRleHQtc20iPlRpZXJzLVRlbXBzPC9zcGFuPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3NOYW1lPSJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMiBjdXJzb3ItcG9pbnRlciBiZy1ibHVlLTUwIHAtMiByb3VuZGVkIGJvcmRlciBib3JkZXItYmx1ZS0xMDAgdy1mdWxsIGhvdmVyOmJnLWJsdWUtMTAwIHRyYW5zaXRpb24iPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9ImNoZWNrYm94IiAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPSJQQyIgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZD17Zm9ybURhdGEuUEMgPT09ICdPVUknIHx8IGZvcm1EYXRhLlBDID09PSB0cnVlfSAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17aGFuZGxlQ2hhbmdlfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0idy01IGgtNSB0ZXh0LWJsdWUtNjAwIHJvdW5kZWQgZm9jdXM6cmluZy1ibHVlLTUwMCIgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPSJmb250LWJvbGQgdGV4dC1ibHVlLTcwMCB0ZXh0LXNtIGZsZXggaXRlbXMtY2VudGVyIGdhcC0xIj48TGFwdG9wIHNpemU9ezE0fS8+IFBDPC9zcGFuPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9ImJnLXB1cnBsZS01MCBwLTMgcm91bmRlZC1sZyBib3JkZXIgYm9yZGVyLXB1cnBsZS0xMDAiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzc05hbWU9ImJsb2NrIHRleHQteHMgZm9udC1ib2xkIHRleHQtcHVycGxlLTcwMCB1cHBlcmNhc2UgbWItMiBmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMSI+PEhhbmRIZWFydCBzaXplPXsxMn0vPiBBY2NvbXBhZ25lbWVudCAoQUVTSCk8L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJncmlkIGdyaWQtY29scy0yIGdhcC00Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiBuYW1lPSJBRVNIX05PTSIgdmFsdWU9e2Zvcm1EYXRhLkFFU0hfTk9NIHx8ICcnfSBvbkNoYW5nZT17aGFuZGxlQ2hhbmdlfSBjbGFzc05hbWU9InctZnVsbCBib3JkZXIgYm9yZGVyLXB1cnBsZS0yMDAgcC0yIHJvdW5kZWQgdGV4dC1zbSBwbGFjZWhvbGRlci1wdXJwbGUtMzAwIGZvY3VzOm91dGxpbmUtbm9uZSBmb2N1czpib3JkZXItcHVycGxlLTQwMCIgcGxhY2Vob2xkZXI9Ik5vbSBBRVNIIiAvPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiBuYW1lPSJBRVNIX1BSRU5PTSIgdmFsdWU9e2Zvcm1EYXRhLkFFU0hfUFJFTk9NIHx8ICcnfSBvbkNoYW5nZT17aGFuZGxlQ2hhbmdlfSBjbGFzc05hbWU9InctZnVsbCBib3JkZXIgYm9yZGVyLXB1cnBsZS0yMDAgcC0yIHJvdW5kZWQgdGV4dC1zbSBwbGFjZWhvbGRlci1wdXJwbGUtMzAwIGZvY3VzOm91dGxpbmUtbm9uZSBmb2N1czpib3JkZXItcHVycGxlLTQwMCIgcGxhY2Vob2xkZXI9IlByw6lub20gQUVTSCIgLz4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZXhhbVR5cGUgPT09ICdETkInICYmICgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iZ3JpZCBncmlkLWNvbHMtMiBnYXAtNCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzc05hbWU9ImJsb2NrIHRleHQteHMgZm9udC1ib2xkIHRleHQtZ3JheS01MDAgdXBwZXJjYXNlIG1iLTEiPkdyb3VwZTwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9InRleHQiIG5hbWU9IkdST1VQRSIgdmFsdWU9e2Zvcm1EYXRhLkdST1VQRSB8fCAnJ30gb25DaGFuZ2U9e2hhbmRsZUNoYW5nZX0gY2xhc3NOYW1lPSJ3LWZ1bGwgYm9yZGVyIHAtMiByb3VuZGVkIHBsYWNlaG9sZGVyLWdyYXktMzAwIiBwbGFjZWhvbGRlcj0iZXg6IEcxIiAvPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzc05hbWU9ImJsb2NrIHRleHQteHMgZm9udC1ib2xkIHRleHQtZ3JheS01MDAgdXBwZXJjYXNlIG1iLTEiPkxhbmd1ZTwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9InRleHQiIG5hbWU9IkxBTkdVRSIgdmFsdWU9e2Zvcm1EYXRhLkxBTkdVRSB8fCAnJ30gb25DaGFuZ2U9e2hhbmRsZUNoYW5nZX0gY2xhc3NOYW1lPSJ3LWZ1bGwgYm9yZGVyIHAtMiByb3VuZGVkIiAvPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzTmFtZT0iYmxvY2sgdGV4dC14cyBmb250LWJvbGQgdGV4dC1ncmF5LTUwMCB1cHBlcmNhc2UgbWItMSI+UGFyY291cnM8L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9InRleHQiIG5hbWU9IlBBUkNPVVJTIiB2YWx1ZT17Zm9ybURhdGEuUEFSQ09VUlMgfHwgJyd9IG9uQ2hhbmdlPXtoYW5kbGVDaGFuZ2V9IGNsYXNzTmFtZT0idy1mdWxsIGJvcmRlciBwLTIgcm91bmRlZCIgLz4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC8+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICApfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtleGFtVHlwZSA9PT0gJ0dPJyAmJiAoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzTmFtZT0iYmxvY2sgdGV4dC14cyBmb250LWJvbGQgdGV4dC1ncmF5LTUwMCB1cHBlcmNhc2UgbWItMSI+RW5zZWlnbmVtZW50IGRlIFNww6ljaWFsaXTDqSAoRURTKTwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzZWxlY3QgbmFtZT0iRURTIiB2YWx1ZT17Zm9ybURhdGEuRURTIHx8ICcnfSBvbkNoYW5nZT17aGFuZGxlQ2hhbmdlfSBjbGFzc05hbWU9InctZnVsbCBib3JkZXIgcC0yIHJvdW5kZWQiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iIj4tLSBTw6lsZWN0aW9ubmVyIC0tPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7T2JqZWN0LnZhbHVlcyhFRFNfTElTVCkuZmxhdCgpLm1hcChlZHMgPT4gKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24ga2V5PXtlZHN9IHZhbHVlPXtlZHN9PntlZHN9PC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApKX0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zZWxlY3Q+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICApfQogICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KCiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJmbGV4IGp1c3RpZnktZW5kIGdhcC0zIG10LTYgcHQtNCBib3JkZXItdCBib3JkZXItZ3JheS0xMDAiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBvbkNsaWNrPXtvbkNsb3NlfSBjbGFzc05hbWU9InB4LTQgcHktMiB0ZXh0LXNsYXRlLTYwMCBob3ZlcjpiZy1zbGF0ZS0xMDAgcm91bmRlZC1sZyBmb250LW1lZGl1bSI+QW5udWxlcjwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBvblNhdmUoZm9ybURhdGEpfSAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9InB4LTQgcHktMiBiZy1ibHVlLTYwMCBob3ZlcjpiZy1ibHVlLTcwMCB0ZXh0LXdoaXRlIHJvdW5kZWQtbGcgZm9udC1ib2xkIHNoYWRvdy1sZyBzaGFkb3ctYmx1ZS0yMDAgZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTIiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNhdmUgc2l6ZT17MTZ9IC8+IEVucmVnaXN0cmVyCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgKTsKICAgICAgICB9OwoKICAgICAgICBjb25zdCBTdHVkZW50RWRpdE1vZGFsID0gKHsgc3R1ZGVudCwgb25DbG9zZSwgb25TYXZlIH0pID0+IHsKICAgICAgICAgICAgY29uc3QgW3NlbGVjdGVkRWRzLCBzZXRTZWxlY3RlZEVkc10gPSB1c2VTdGF0ZShzdHVkZW50LkVEUyB8fCAnJyk7CgogICAgICAgICAgICBpZiAoIXN0dWRlbnQpIHJldHVybiBudWxsOwoKICAgICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJmaXhlZCBpbnNldC0wIHotNTAgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgYmctYmxhY2svNTAgYmFja2Ryb3AtYmx1ci1zbSI+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9ImJnLXdoaXRlIHJvdW5kZWQteGwgc2hhZG93LTJ4bCBwLTYgdy1bNTAwcHhdIG1heC13LWZ1bGwgbS00IGFuaW1hdGUtc2NhbGUtaW4iPgogICAgICAgICAgICAgICAgICAgICAgICA8aDIgY2xhc3NOYW1lPSJ0ZXh0LXhsIGZvbnQtYm9sZCB0ZXh0LXNsYXRlLTgwMCBtYi00IGZsZXggaXRlbXMtY2VudGVyIGdhcC0yIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxCb29rT3BlbiBjbGFzc05hbWU9InRleHQtcm9zZS02MDAiIC8+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBDaG9pc2lyIEVEUyAtIHtzdHVkZW50Lk5PTX0ge3N0dWRlbnQuUFJFTk9NfQogICAgICAgICAgICAgICAgICAgICAgICA8L2gyPgogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9Im92ZXJmbG93LXktYXV0byBtYXgtaC1bNjB2aF0gcHItMiI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7T2JqZWN0LmVudHJpZXMoRURTX0xJU1QpLm1hcCgoW2NhdGVnb3J5LCBvcHRpb25zXSkgPT4gKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYga2V5PXtjYXRlZ29yeX0gY2xhc3NOYW1lPSJtYi00Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGgzIGNsYXNzTmFtZT0idGV4dC1zbSBmb250LWJvbGQgdGV4dC1zbGF0ZS01MDAgdXBwZXJjYXNlIHRyYWNraW5nLXdpZGVyIG1iLTIgYm9yZGVyLWIgcGItMSI+e2NhdGVnb3J5fTwvaDM+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJncmlkIGdyaWQtY29scy0xIGdhcC0xIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtvcHRpb25zLm1hcChlZHMgPT4gKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBrZXk9e2Vkc30gY2xhc3NOYW1lPXtgZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTMgcC0yIHJvdW5kZWQgY3Vyc29yLXBvaW50ZXIgdHJhbnNpdGlvbi1jb2xvcnMgJHtzZWxlY3RlZEVkcyA9PT0gZWRzID8gJ2JnLXJvc2UtMTAwIGJvcmRlciBib3JkZXItcm9zZS0zMDAnIDogJ2hvdmVyOmJnLWdyYXktNTAgYm9yZGVyIGJvcmRlci10cmFuc3BhcmVudCd9YH0+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9InJhZGlvIiAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9ImVkcyIgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17ZWRzfSAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9e3NlbGVjdGVkRWRzID09PSBlZHN9IAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eygpID0+IHNldFNlbGVjdGVkRWRzKGVkcyl9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9InctNCBoLTQgdGV4dC1yb3NlLTYwMCBmb2N1czpyaW5nLXJvc2UtNTAwIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9InRleHQtc20gZm9udC1tZWRpdW0gdGV4dC1zbGF0ZS03MDAiPntlZHN9PC9zcGFuPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApKX0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICApKX0KICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CgogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iZmxleCBqdXN0aWZ5LWVuZCBnYXAtMyBtdC02IHB0LTQgYm9yZGVyLXQgYm9yZGVyLWdyYXktMTAwIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gb25DbGljaz17b25DbG9zZX0gY2xhc3NOYW1lPSJweC00IHB5LTIgdGV4dC1zbGF0ZS02MDAgaG92ZXI6Ymctc2xhdGUtMTAwIHJvdW5kZWQtbGcgZm9udC1tZWRpdW0iPkFubnVsZXI8L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gb25TYXZlKHN0dWRlbnQuaWQsIHNlbGVjdGVkRWRzKX0gCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPSJweC00IHB5LTIgYmctcm9zZS02MDAgaG92ZXI6Ymctcm9zZS03MDAgdGV4dC13aGl0ZSByb3VuZGVkLWxnIGZvbnQtYm9sZCBzaGFkb3ctbGcgc2hhZG93LXJvc2UtMjAwIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVucmVnaXN0cmVyCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgKTsKICAgICAgICB9OwoKICAgICAgICBjb25zdCBTYXZlTW9kYWwgPSAoeyBmaWxlTmFtZSwgc2V0RmlsZU5hbWUsIG9uQ2xvc2UsIG9uQ29uZmlybSB9KSA9PiAoCiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJmaXhlZCBpbnNldC0wIHotWzcwXSBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBiZy1ibGFjay81MCBiYWNrZHJvcC1ibHVyLXNtIj4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJiZy13aGl0ZSByb3VuZGVkLXhsIHNoYWRvdy0yeGwgcC02IHctWzQwMHB4XSBhbmltYXRlLXNjYWxlLWluIj4KICAgICAgICAgICAgICAgICAgICA8aDMgY2xhc3NOYW1lPSJ0ZXh0LXhsIGZvbnQtYm9sZCB0ZXh0LXNsYXRlLTgwMCBtYi00IGZsZXggaXRlbXMtY2VudGVyIGdhcC0yIj4KICAgICAgICAgICAgICAgICAgICAgICAgPFNhdmUgc2l6ZT17MjB9IGNsYXNzTmFtZT0idGV4dC1ibHVlLTYwMCIvPgogICAgICAgICAgICAgICAgICAgICAgICBTYXV2ZWdhcmRlciBsZXMgZG9ubsOpZXMKICAgICAgICAgICAgICAgICAgICA8L2gzPgogICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT0idGV4dC1zbSB0ZXh0LXNsYXRlLTYwMCBtYi00Ij4KICAgICAgICAgICAgICAgICAgICAgICAgTm9tbWV6IHZvdHJlIGZpY2hpZXIgZGUgc2F1dmVnYXJkZSBwb3VyIGxlIHJldHJvdXZlciBwbHVzIGZhY2lsZW1lbnQgKGV4OiBETkJfSnVpbl8yMDI2KS4KICAgICAgICAgICAgICAgICAgICA8L3A+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9Im1iLTYiPgogICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3NOYW1lPSJibG9jayB0ZXh0LXhzIGZvbnQtYm9sZCB0ZXh0LXNsYXRlLTUwMCB1cHBlcmNhc2UgbWItMSI+Tm9tIGR1IGZpY2hpZXI8L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPSJ0ZXh0IiAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXtmaWxlTmFtZX0gCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHNldEZpbGVOYW1lKGUudGFyZ2V0LnZhbHVlKX0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0idy1mdWxsIGJvcmRlci0yIGJvcmRlci1ibHVlLTEwMCBwLTIgcm91bmRlZC1sZyBmb2N1czpib3JkZXItYmx1ZS01MDAgZm9jdXM6cmluZy0yIGZvY3VzOnJpbmctYmx1ZS0yMDAgb3V0bGluZS1ub25lIGZvbnQtYm9sZCB0ZXh0LXNsYXRlLTcwMCIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF1dG9Gb2N1cwogICAgICAgICAgICAgICAgICAgICAgICAvPgogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0idGV4dC14cyB0ZXh0LXJpZ2h0IHRleHQtZ3JheS00MDAgbXQtMSI+Lmpzb24gc2VyYSBham91dMOpIGF1dG9tYXRpcXVlbWVudDwvZGl2PgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJmbGV4IGp1c3RpZnktZW5kIGdhcC0zIj4KICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBvbkNsaWNrPXtvbkNsb3NlfSBjbGFzc05hbWU9InB4LTQgcHktMiB0ZXh0LXNsYXRlLTYwMCBob3ZlcjpiZy1zbGF0ZS0xMDAgcm91bmRlZC1sZyBmb250LW1lZGl1bSI+QW5udWxlcjwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIG9uQ2xpY2s9e29uQ29uZmlybX0gY2xhc3NOYW1lPSJweC00IHB5LTIgYmctYmx1ZS02MDAgaG92ZXI6YmctYmx1ZS03MDAgdGV4dC13aGl0ZSByb3VuZGVkLWxnIGZvbnQtYm9sZCBzaGFkb3ctbGcgc2hhZG93LWJsdWUtMjAwIGZsZXggaXRlbXMtY2VudGVyIGdhcC0yIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxEb3dubG9hZCBzaXplPXsxNn0gLz4gVMOpbMOpY2hhcmdlcgogICAgICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICApOwoKICAgICAgICBjb25zdCBUZW1wbGF0ZUVkaXRvciA9ICh7IG1vZGUsIHRlbXBsYXRlLCBvbkNsb3NlLCBvblNhdmUgfSkgPT4gewogICAgICAgICAgICAgY29uc3QgW2RhdGEsIHNldERhdGFdID0gdXNlU3RhdGUoeyAuLi50ZW1wbGF0ZSB9KTsKCiAgICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iZml4ZWQgaW5zZXQtMCB6LVs2MF0gZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgYmctYmxhY2svNjAgYmFja2Ryb3AtYmx1ci1zbSBwLTQiPgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJiZy13aGl0ZSByb3VuZGVkLTJ4bCBzaGFkb3ctMnhsIHctZnVsbCBtYXgtdy0yeGwgbWF4LWgtWzkwdmhdIGZsZXggZmxleC1jb2wgYW5pbWF0ZS1zY2FsZS1pbiI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJwLTUgYm9yZGVyLWIgZmxleCBqdXN0aWZ5LWJldHdlZW4gaXRlbXMtY2VudGVyIGJnLXNsYXRlLTUwIHJvdW5kZWQtdC0yeGwiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGgyIGNsYXNzTmFtZT0idGV4dC14bCBmb250LWJvbGQgdGV4dC1zbGF0ZS04MDAgZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTIiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxFZGl0IHNpemU9ezIwfSBjbGFzc05hbWU9InRleHQtaW5kaWdvLTYwMCIvPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIMOJZGl0ZXIgbGUgbW9kw6hsZSA6IHttb2RlID09PSAnU1RVREVOVFMnID8gJ8OJbMOodmVzJyA6IG1vZGUgPT09ICdQUk9GUycgPyAnUHJvZmVzc2V1cnMnIDogJ0FFU0gnfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9oMj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gb25DbGljaz17b25DbG9zZX0gY2xhc3NOYW1lPSJ0ZXh0LWdyYXktNDAwIGhvdmVyOnRleHQtZ3JheS02MDAgdGV4dC0yeGwiPiZ0aW1lczs8L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iZmxleC0xIG92ZXJmbG93LXktYXV0byBwLTYgc3BhY2UteS02Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJiZy1pbmRpZ28tNTAgYm9yZGVyIGJvcmRlci1pbmRpZ28tMTAwIHAtNCByb3VuZGVkLWxnIHRleHQtc20gdGV4dC1pbmRpZ28tODAwIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3Ryb25nPlZhcmlhYmxlcyBkaXNwb25pYmxlcyA6PC9zdHJvbmc+IHsne0VQUkVVVkV9J30sIHsne1NFU1NJT059J30sIHsne1ZJTExFfSd9LCB7J3tEQVRFX0pPVVJ9J30sIHsne0RBVEVfRVhBTX0nfSwgeyd7RVRBQkxJU1NFTUVOVH0nfSwgeyd7Tk9NfSd9LCB7J3tQUkVOT019J30uIDxici8+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge21vZGUgPT09ICdQUk9GUycgJiYgPHNwYW4+U3DDqWNpZmlxdWUgUHJvZnMgOiB7J3tDSVZ9J30sIHsne0hFVVJFX0RFQlVUfSd9Ljwvc3Bhbj59CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge21vZGUgPT09ICdTVFVERU5UUycgJiYgPHNwYW4+U3DDqWNpZmlxdWUgw4lsw6h2ZXMgOiB7J3tTQUxMRX0nfSwgeyd7SEVVUkV9J30uPC9zcGFuPn0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnIvPjxzcGFuIGNsYXNzTmFtZT0idGV4dC14cyBvcGFjaXR5LTc1IG10LTEgYmxvY2siPlV0aWxpc2V6ICoqdGV4dGUqKiBwb3VyIG1ldHRyZSBlbiBncmFzLjwvc3Bhbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzTmFtZT0iYmxvY2sgdGV4dC14cyBmb250LWJvbGQgdGV4dC1ncmF5LTUwMCB1cHBlcmNhc2UgbWItMSI+VGl0cmUgcHJpbmNpcGFsPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9InRleHQiIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17ZGF0YS50aXRsZX0gCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXtlID0+IHNldERhdGEoey4uLmRhdGEsIHRpdGxlOiBlLnRhcmdldC52YWx1ZX0pfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9InctZnVsbCBib3JkZXIgcC0yIHJvdW5kZWQgZm9jdXM6cmluZy0yIGZvY3VzOnJpbmctaW5kaWdvLTIwMCBvdXRsaW5lLW5vbmUgZm9udC1ib2xkIHRleHQtbGciCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzTmFtZT0iYmxvY2sgdGV4dC14cyBmb250LWJvbGQgdGV4dC1ncmF5LTUwMCB1cHBlcmNhc2UgbWItMSI+SW50cm9kdWN0aW9uPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGV4dGFyZWEgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXtkYXRhLmludHJvfSAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e2UgPT4gc2V0RGF0YSh7Li4uZGF0YSwgaW50cm86IGUudGFyZ2V0LnZhbHVlfSl9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0idy1mdWxsIGJvcmRlciBwLTIgcm91bmRlZCBmb2N1czpyaW5nLTIgZm9jdXM6cmluZy1pbmRpZ28tMjAwIG91dGxpbmUtbm9uZSBoLTMyIHJlc2l6ZS1ub25lIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzc05hbWU9ImJsb2NrIHRleHQteHMgZm9udC1ib2xkIHRleHQtZ3JheS01MDAgdXBwZXJjYXNlIG1iLTEiPkluc3RydWN0aW9ucyAvIENvbnNpZ25lczwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRleHRhcmVhIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17ZGF0YS5pbnN0cnVjdGlvbnN9IAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17ZSA9PiBzZXREYXRhKHsuLi5kYXRhLCBpbnN0cnVjdGlvbnM6IGUudGFyZ2V0LnZhbHVlfSl9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0idy1mdWxsIGJvcmRlciBwLTIgcm91bmRlZCBmb2N1czpyaW5nLTIgZm9jdXM6cmluZy1pbmRpZ28tMjAwIG91dGxpbmUtbm9uZSBoLTQwIHJlc2l6ZS1ub25lIGZvbnQtbW9ubyB0ZXh0LXNtIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzc05hbWU9ImJsb2NrIHRleHQteHMgZm9udC1ib2xkIHRleHQtZ3JheS01MDAgdXBwZXJjYXNlIG1iLTEiPlBpZWQgZGUgcGFnZSAoU2lnbmF0dXJlKTwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRleHRhcmVhIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17ZGF0YS5mb290ZXJ9IAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17ZSA9PiBzZXREYXRhKHsuLi5kYXRhLCBmb290ZXI6IGUudGFyZ2V0LnZhbHVlfSl9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0idy1mdWxsIGJvcmRlciBwLTIgcm91bmRlZCBmb2N1czpyaW5nLTIgZm9jdXM6cmluZy1pbmRpZ28tMjAwIG91dGxpbmUtbm9uZSBoLTI0IHJlc2l6ZS1ub25lIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CgogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0icC01IGJvcmRlci10IGJnLWdyYXktNTAgcm91bmRlZC1iLTJ4bCBmbGV4IGp1c3RpZnktZW5kIGdhcC0zIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gb25DbGljaz17b25DbG9zZX0gY2xhc3NOYW1lPSJweC00IHB5LTIgdGV4dC1zbGF0ZS02MDAgaG92ZXI6Ymctc2xhdGUtMjAwIHJvdW5kZWQtbGciPkFubnVsZXI8L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gb25DbGljaz17KCkgPT4gb25TYXZlKGRhdGEpfSBjbGFzc05hbWU9InB4LTYgcHktMiBiZy1pbmRpZ28tNjAwIGhvdmVyOmJnLWluZGlnby03MDAgdGV4dC13aGl0ZSByb3VuZGVkLWxnIGZvbnQtYm9sZCBzaGFkb3ctbGcgc2hhZG93LWluZGlnby0yMDAgZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTIiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTYXZlIHNpemU9ezE4fSAvPiBTYXV2ZWdhcmRlciBsZSBtb2TDqGxlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgKTsKICAgICAgICB9OwoKICAgICAgICBjb25zdCBQcmludFZpZXcgPSAoeyBqdXJpZXMsIHByb2ZzLCBleGFtVHlwZSwgb25DbG9zZSwgc2V0dGluZ3MsIHNjaG9vbE5hbWUsIHNjaG9vbENpdHksIHNjaG9vbExvZ28sIHNjaG9vbFN0YW1wLCBzZXNzaW9uWWVhciwgdGVtcGxhdGVzLCBzZXRUZW1wbGF0ZXMsIGlzRnJlbmNoT3JhbCwgaW5pdGlhbFZpZXdNb2RlIH0pID0+IHsKICAgICAgICAgICAgY29uc3QgW3ZpZXdNb2RlLCBzZXRWaWV3TW9kZV0gPSB1c2VTdGF0ZShpbml0aWFsVmlld01vZGUgfHwgJ1NUVURFTlRTJyk7IAogICAgICAgICAgICBjb25zdCBbc2hvd1RlbXBsYXRlRWRpdG9yLCBzZXRTaG93VGVtcGxhdGVFZGl0b3JdID0gdXNlU3RhdGUoZmFsc2UpOwoKICAgICAgICAgICAgY29uc3Qgc3RhcnRUaW1lID0gc2V0dGluZ3M/LnN0YXJ0VGltZSB8fCAnMDg6MDAnOwogICAgICAgICAgICBjb25zdCBleGFtRGF0ZSA9IHNldHRpbmdzPy5kYXRlID8gZm9ybWF0RGF0ZShzZXR0aW5ncy5kYXRlKSA6ICJEYXRlIG5vbiBkw6lmaW5pZSI7CgogICAgICAgICAgICBjb25zdCBjdXN0b21UaXRsZSA9IHNldHRpbmdzPy5leGFtTmFtZSB8fCAiIjsKICAgICAgICAgICAgY29uc3QgZGVmYXVsdExhYmVsID0gZXhhbVR5cGUgPT09ICdHTycKICAgICAgICAgICAgICAgID8gKGlzRnJlbmNoT3JhbCA/ICdHUkFORCBPUkFMIOKAlCBPUkFMIERFIEZSQU7Dh0FJUycgOiAnR1JBTkQgT1JBTCBCTEFOQycpCiAgICAgICAgICAgICAgICA6IGAke2V4YW1UeXBlfSAke2lzRnJlbmNoT3JhbCA/ICdPUkFMIERFIEZSQU7Dh0FJUycgOiAnQkxBTkMnfWA7CiAgICAgICAgICAgIGNvbnN0IGV4YW1MYWJlbCA9IGN1c3RvbVRpdGxlLnRyaW0oKSA/IGN1c3RvbVRpdGxlIDogZGVmYXVsdExhYmVsOwogICAgICAgICAgICAKICAgICAgICAgICAgY29uc3QgZXhhbUZ1bGxOYW1lID0gY3VzdG9tVGl0bGUudHJpbSgpID8gY3VzdG9tVGl0bGUgOiAoZXhhbVR5cGUgPT09ICdETkInID8gKGlzRnJlbmNoT3JhbCA/ICdPcmFsIGRlIEZyYW7Dp2FpcyDigJQgRE5CJyA6ICdEaXBsw7RtZSBOYXRpb25hbCBkdSBCcmV2ZXQgQmxhbmMnKSA6IGV4YW1UeXBlID09PSAnR08nID8gKGlzRnJlbmNoT3JhbCA/ICdHcmFuZCBPcmFsIOKAlCBPcmFsIGRlIEZyYW7Dp2FpcycgOiAnR3JhbmQgT3JhbCBkdSBCYWNjYWxhdXLDqWF0IEJsYW5jJykgOiAoaXNGcmVuY2hPcmFsID8gJ09yYWwgZGUgRnJhbsOnYWlzIOKAlCBDRkcnIDogJ0NlcnRpZmljYXQgZGUgRm9ybWF0aW9uIEfDqW7DqXJhbGUgQmxhbmMnKTsKICAgICAgICAgICAgY29uc3QgZXhhbUxhYmVsTWl4ZWQgPSBjdXN0b21UaXRsZS50cmltKCkgPyBjdXN0b21UaXRsZSA6IChleGFtVHlwZSA9PT0gJ0dPJyA/ICdHcmFuZCBPcmFsIEJsYW5jJyA6IGAke2V4YW1UeXBlfSBCbGFuY2ApOwoKICAgICAgICAgICAgY29uc3QgcmVuZGVyVGVtcGxhdGVUZXh0ID0gKHRleHQsIGRhdGEpID0+IHsKICAgICAgICAgICAgICAgIGlmICghdGV4dCkgcmV0dXJuIG51bGw7CiAgICAgICAgICAgICAgICBsZXQgY29udGVudCA9IHRleHQ7CiAgICAgICAgICAgICAgICAvLyBSZXBsYWNlIHN0YW5kYXJkIHZhcmlhYmxlcwogICAgICAgICAgICAgICAgT2JqZWN0LmtleXMoZGF0YSkuZm9yRWFjaChrZXkgPT4gewogICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlZ2V4ID0gbmV3IFJlZ0V4cChgeyR7a2V5fX1gLCAnZycpOwogICAgICAgICAgICAgICAgICAgIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2UocmVnZXgsIGRhdGFba2V5XSB8fCAnJyk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgLy8gU2ltcGxlIHBhcnNlciBmb3IgKipib2xkKioKICAgICAgICAgICAgICAgIGNvbnN0IHBhcnRzID0gY29udGVudC5zcGxpdCgvKFwqXCouKj9cKlwqKS9nKTsKICAgICAgICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9IndoaXRlc3BhY2UtcHJlLWxpbmUiPgogICAgICAgICAgICAgICAgICAgICAgICB7cGFydHMubWFwKChwYXJ0LCBpKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocGFydC5zdGFydHNXaXRoKCcqKicpICYmIHBhcnQuZW5kc1dpdGgoJyoqJykpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gPHN0cm9uZyBrZXk9e2l9PntwYXJ0LnNsaWNlKDIsIC0yKX08L3N0cm9uZz47CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gPHNwYW4ga2V5PXtpfT57cGFydH08L3NwYW4+OwogICAgICAgICAgICAgICAgICAgICAgICB9KX0KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgIH07CgogICAgICAgICAgICBjb25zdCBoYW5kbGVTYXZlVGVtcGxhdGUgPSAobmV3VGVtcGxhdGUpID0+IHsKICAgICAgICAgICAgICAgIHNldFRlbXBsYXRlcyhwcmV2ID0+ICh7CiAgICAgICAgICAgICAgICAgICAgLi4ucHJldiwKICAgICAgICAgICAgICAgICAgICBbdmlld01vZGVdOiBuZXdUZW1wbGF0ZQogICAgICAgICAgICAgICAgfSkpOwogICAgICAgICAgICAgICAgc2V0U2hvd1RlbXBsYXRlRWRpdG9yKGZhbHNlKTsKICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIGNvbnN0IGdldEFsbEFzc2lnbmVkU3R1ZGVudHMgPSAodHlwZSkgPT4gewogICAgICAgICAgICAgICAgY29uc3QgY3VycmVudEp1cmllcyA9IGp1cmllc1t0eXBlXSB8fCB7fTsKICAgICAgICAgICAgICAgIGxldCBhbGwgPSBbXTsKICAgICAgICAgICAgICAgIE9iamVjdC52YWx1ZXMoY3VycmVudEp1cmllcykuZm9yRWFjaChqdXJ5ID0+IHsKICAgICAgICAgICAgICAgICAgICBjb25zdCBwcm9mMSA9IHByb2ZzLmZpbmQocCA9PiBwLmlkID09PSBqdXJ5LnByb2YxSWQpOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IHByb2YyID0gIWlzRnJlbmNoT3JhbCA/IHByb2ZzLmZpbmQocCA9PiBwLmlkID09PSBqdXJ5LnByb2YySWQpIDogbnVsbDsKICAgICAgICAgICAgICAgICAgICBjb25zdCB0aW1lZFN0dWRlbnRzID0gY2FsY3VsYXRlU3R1ZGVudFRpbWVzKGp1cnkuc3R1ZGVudHMsIHN0YXJ0VGltZSwgdHlwZSk7CiAgICAgICAgICAgICAgICAgICAgdGltZWRTdHVkZW50cy5mb3JFYWNoKHMgPT4gewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXMuaXNCcmVhaykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxsLnB1c2goewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLnMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAganVyeUlkOiBqdXJ5LmlkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvb206IGp1cnkucm9vbSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lOiBzLnRpbWVTdGFydCwgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvZjE6IHByb2YxID8gYCR7cHJvZjEuTk9NfSAke3Byb2YxLlBSRU5PTX1gIDogJ05vbiBhc3NpZ27DqScsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvZjI6IHByb2YyID8gYCR7cHJvZjIuTk9NfSAke3Byb2YyLlBSRU5PTX1gIDogJ05vbiBhc3NpZ27DqScKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIHJldHVybiBhbGwuc29ydCgoYSxiKSA9PiBhLk5PTS5sb2NhbGVDb21wYXJlKGIuTk9NKSk7CiAgICAgICAgICAgIH07CgogICAgICAgICAgICBjb25zdCBnZXRQcm9mQXNzaWdubWVudHMgPSAoKSA9PiB7CiAgICAgICAgICAgICAgICBjb25zdCBhc3NpZ25tZW50cyA9IFtdOwogICAgICAgICAgICAgICAgY29uc3QgY3VycmVudEp1cmllcyA9IGp1cmllc1tleGFtVHlwZV0gfHwge307CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIE9iamVjdC52YWx1ZXMoY3VycmVudEp1cmllcykuZm9yRWFjaChqdXJ5ID0+IHsKICAgICAgICAgICAgICAgICAgICBpZiAoanVyeS5wcm9mMUlkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHAgPSBwcm9mcy5maW5kKHggPT4geC5pZCA9PT0ganVyeS5wcm9mMUlkKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHApIGFzc2lnbm1lbnRzLnB1c2goeyAuLi5wLCBqdXJ5SWQ6IGp1cnkuaWQsIHJvb206IGp1cnkucm9vbSwgcm9sZTogJ0V4YW1pbmF0ZXVyIDEnIH0pOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBpZiAoIWlzRnJlbmNoT3JhbCAmJiBqdXJ5LnByb2YySWQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcCA9IHByb2ZzLmZpbmQoeCA9PiB4LmlkID09PSBqdXJ5LnByb2YySWQpOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAocCkgYXNzaWdubWVudHMucHVzaCh7IC4uLnAsIGp1cnlJZDoganVyeS5pZCwgcm9vbToganVyeS5yb29tLCByb2xlOiAnRXhhbWluYXRldXIgMicgfSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICByZXR1cm4gYXNzaWdubWVudHMuc29ydCgoYSxiKSA9PiBhLk5PTS5sb2NhbGVDb21wYXJlKGIuTk9NKSk7CiAgICAgICAgICAgIH07CgogICAgICAgICAgICBjb25zdCBnZXRBZXNoQXNzaWdubWVudHMgPSAoKSA9PiB7CiAgICAgICAgICAgICAgICBjb25zdCBhc3NpZ25tZW50cyA9IHt9OwogICAgICAgICAgICAgICAgY29uc3QgY3VycmVudEp1cmllcyA9IGp1cmllc1tleGFtVHlwZV0gfHwge307CiAgICAgICAgICAgICAgICBjb25zdCBwcm9jZXNzZWRTdHVkZW50SWRzID0gbmV3IFNldCgpOyAKICAgICAgICAgICAgICAgIGNvbnN0IHByb2Nlc3NlZFN0dWRlbnROYW1lcyA9IG5ldyBTZXQoKTsgLy8gU2FmZXR5IG5ldCBmb3IgZGlzdGluY3QgSURzIGJ1dCBzYW1lIG5hbWUKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgT2JqZWN0LnZhbHVlcyhjdXJyZW50SnVyaWVzKS5mb3JFYWNoKGp1cnkgPT4gewogICAgICAgICAgICAgICAgICAgIGNvbnN0IHRpbWVkU3R1ZGVudHMgPSBjYWxjdWxhdGVTdHVkZW50VGltZXMoanVyeS5zdHVkZW50cywgc3RhcnRUaW1lLCBleGFtVHlwZSk7CiAgICAgICAgICAgICAgICAgICAgdGltZWRTdHVkZW50cy5mb3JFYWNoKHMgPT4gewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXMuaXNCcmVhayAmJiBzLkFFU0hfTk9NKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBDaGVjayBJRAogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHByb2Nlc3NlZFN0dWRlbnRJZHMuaGFzKHMuaWQpKSByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIENoZWNrIE5hbWUgKFNhZmV0eSBuZXQgZm9yIGR1cGxpY2F0ZXMpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuYW1lS2V5ID0gYCR7cy5OT019LSR7cy5QUkVOT019YC50b1VwcGVyQ2FzZSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHByb2Nlc3NlZFN0dWRlbnROYW1lcy5oYXMobmFtZUtleSkpIHJldHVybjsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9jZXNzZWRTdHVkZW50SWRzLmFkZChzLmlkKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2Nlc3NlZFN0dWRlbnROYW1lcy5hZGQobmFtZUtleSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYWVzaE5vbSA9IChzLkFFU0hfTk9NIHx8ICcnKS50cmltKCkudG9VcHBlckNhc2UoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGFlc2hQcmVub20gPSAocy5BRVNIX1BSRU5PTSB8fCAnJykudHJpbSgpLnRvVXBwZXJDYXNlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBrZXkgPSBgJHthZXNoTm9tfSAke2Flc2hQcmVub219YC50cmltKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgha2V5KSByZXR1cm47IC8vIFNraXAgaWYgbm8gbmFtZQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghYXNzaWdubWVudHNba2V5XSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzc2lnbm1lbnRzW2tleV0gPSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vbTogKHMuQUVTSF9OT00gfHwgJycpLnRyaW0oKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJlbm9tOiAocy5BRVNIX1BSRU5PTSB8fCAnJykudHJpbSgpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtaXNzaW9uczogW10KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYXNzaWdubWVudHNba2V5XS5taXNzaW9ucy5wdXNoKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHVkZW50OiBzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWU6IHMudGltZVN0YXJ0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvb206IGp1cnkucm9vbSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBqdXJ5SWQ6IGp1cnkuaWQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgT2JqZWN0LnZhbHVlcyhhc3NpZ25tZW50cykuZm9yRWFjaChhID0+IHsKICAgICAgICAgICAgICAgICAgICBhLm1pc3Npb25zLnNvcnQoKHgsIHkpID0+IHgudGltZS5sb2NhbGVDb21wYXJlKHkudGltZSkpOwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgcmV0dXJuIE9iamVjdC52YWx1ZXMoYXNzaWdubWVudHMpLnNvcnQoKGEsYikgPT4gYS5ub20ubG9jYWxlQ29tcGFyZShiLm5vbSkpOwogICAgICAgICAgICB9OwoKICAgICAgICAgICAgY29uc3Qgc3R1ZGVudHNUb1ByaW50ID0gZ2V0QWxsQXNzaWduZWRTdHVkZW50cyhleGFtVHlwZSk7CiAgICAgICAgICAgIGNvbnN0IHByb2ZBc3NpZ25tZW50cyA9IGdldFByb2ZBc3NpZ25tZW50cygpOwogICAgICAgICAgICBjb25zdCBhZXNoQXNzaWdubWVudHMgPSBnZXRBZXNoQXNzaWdubWVudHMoKTsKICAgICAgICAgICAgY29uc3QgYWN0aXZlSnVyaWVzID0gT2JqZWN0LnZhbHVlcyhqdXJpZXNbZXhhbVR5cGVdIHx8IHt9KS5maWx0ZXIoaiA9PiBqLnByb2YxSWQgfHwgai5wcm9mMklkIHx8IGouc3R1ZGVudHMubGVuZ3RoID4gMCk7CiAgICAgICAgICAgIAogICAgICAgICAgICAgLyogTG9naWMgZm9yIEdlbmVyYWwgUGxhbm5pbmcgKExhbmRzY2FwZSkgKi8KICAgICAgICAgICAgY29uc3QgZ2V0R2VuZXJhbFBsYW5uaW5nRGF0YSA9ICgpID0+IHsKICAgICAgICAgICAgICAgIGNvbnN0IHRpbWVzID0gbmV3IFNldCgpOwogICAgICAgICAgICAgICAgY29uc3QganVyaWVzRGF0YSA9IFtdOwoKICAgICAgICAgICAgICAgIGFjdGl2ZUp1cmllcy5mb3JFYWNoKGp1cnkgPT4gewogICAgICAgICAgICAgICAgICAgIGNvbnN0IHN0dWRlbnRzV2l0aFRpbWUgPSBjYWxjdWxhdGVTdHVkZW50VGltZXMoanVyeS5zdHVkZW50cywgc3RhcnRUaW1lLCBleGFtVHlwZSk7CiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3R1ZGVudHNNYXAgPSB7fTsKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICBzdHVkZW50c1dpdGhUaW1lLmZvckVhY2gocyA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghcy5pc0JyZWFrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lcy5hZGQocy50aW1lU3RhcnQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R1ZGVudHNNYXBbcy50aW1lU3RhcnRdID0gczsKICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEhhbmRsZSBicmVhayB0aW1lcyBpbiB0aW1lbGluZT8KICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZvciBnZW5lcmFsIHBsYW5uaW5nLCB3ZSB1c3VhbGx5IGxpc3QgYnJlYWtzIG9yIGVtcHR5IHNsb3RzLgogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTGV0J3MganVzdCBrZXkgYnJlYWtzIGJ5IHN0YXJ0IHRpbWUgdG9vCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lcy5hZGQocy50aW1lU3RhcnQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R1ZGVudHNNYXBbcy50aW1lU3RhcnRdID0gczsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICBqdXJpZXNEYXRhLnB1c2goewogICAgICAgICAgICAgICAgICAgICAgICBpZDoganVyeS5pZCwKICAgICAgICAgICAgICAgICAgICAgICAgcm9vbToganVyeS5yb29tLAogICAgICAgICAgICAgICAgICAgICAgICBzdHVkZW50c01hcAogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgLy8gU29ydCB0aW1lcwogICAgICAgICAgICAgICAgY29uc3Qgc29ydGVkVGltZXMgPSBBcnJheS5mcm9tKHRpbWVzKS5zb3J0KCk7CgogICAgICAgICAgICAgICAgLy8gU3BsaXQganVyaWVzIGludG8gY2h1bmtzIG9mIDYgbWF4IHBlciBwYWdlCiAgICAgICAgICAgICAgICBjb25zdCBjaHVua1NpemUgPSA2OwogICAgICAgICAgICAgICAgY29uc3QganVyeUNodW5rcyA9IFtdOwogICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBqdXJpZXNEYXRhLmxlbmd0aDsgaSArPSBjaHVua1NpemUpIHsKICAgICAgICAgICAgICAgICAgICBqdXJ5Q2h1bmtzLnB1c2goanVyaWVzRGF0YS5zbGljZShpLCBpICsgY2h1bmtTaXplKSk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIHsgc29ydGVkVGltZXMsIGp1cnlDaHVua3MgfTsKICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIGNvbnN0IFNpZGViYXJCdXR0b24gPSAoeyBtb2RlLCBpY29uOiBJY29uLCBsYWJlbCwgb25DbGljaywgaXNBY3RpdmUgfSkgPT4gKAogICAgICAgICAgICAgICAgPGJ1dHRvbiAKICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXtvbkNsaWNrfSAKICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2B3LWZ1bGwgdGV4dC1sZWZ0IHB4LTQgcHktMyByb3VuZGVkLWxnIGZsZXggaXRlbXMtY2VudGVyIGdhcC0zIGZvbnQtYm9sZCB0cmFuc2l0aW9uLWFsbCAke2lzQWN0aXZlID8gJ2JnLWluZGlnby02MDAgdGV4dC13aGl0ZSBzaGFkb3ctbGcgc2hhZG93LWluZGlnby01MDAvMzAnIDogJ3RleHQtc2xhdGUtMzAwIGhvdmVyOmJnLXNsYXRlLTgwMCBob3Zlcjp0ZXh0LXdoaXRlJ31gfQogICAgICAgICAgICAgICAgPgogICAgICAgICAgICAgICAgICAgIDxJY29uIHNpemU9ezE4fSAvPgogICAgICAgICAgICAgICAgICAgIDxzcGFuPntsYWJlbH08L3NwYW4+CiAgICAgICAgICAgICAgICA8L2J1dHRvbj4KICAgICAgICAgICAgKTsKICAgICAgICAgICAgCiAgICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iZml4ZWQgaW5zZXQtMCBiZy1zbGF0ZS05MDAgei01MCBmbGV4IHByaW50LW1vZGFsIG92ZXJmbG93LWhpZGRlbiI+CiAgICAgICAgICAgICAgICAgICAgey8qIFNJREVCQVIgKEdhdWNoZSkgLSBNYXNxdcOpZSDDoCBsJ2ltcHJlc3Npb24gKi99CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9InctNzIgYmctc2xhdGUtOTAwIHRleHQtd2hpdGUgZmxleCBmbGV4LWNvbCBoLWZ1bGwgYm9yZGVyLXIgYm9yZGVyLXNsYXRlLTgwMCBzaGFkb3ctMnhsIHByaW50LXNpZGViYXIgZmxleC1zaHJpbmstMCI+CiAgICAgICAgICAgICAgICAgICAgICAgIHsvKiBIZWFkZXIgU2lkZWJhciAqL30KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9InAtNiBib3JkZXItYiBib3JkZXItc2xhdGUtODAwIGJnLXNsYXRlLTk1MC81MCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTMgbWItMiI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9ImJnLWluZGlnby01MDAvMjAgcC0yIHJvdW5kZWQtbGciPjxQcmludGVyIHNpemU9ezI0fSBjbGFzc05hbWU9InRleHQtaW5kaWdvLTQwMCIgLz48L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDIgY2xhc3NOYW1lPSJ0ZXh0LXhsIGZvbnQtYmxhY2sgdHJhY2tpbmctdGlnaHQiPklNUFJFU1NJT048L2gyPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0idGV4dC14cyB0ZXh0LXNsYXRlLTQwMCBmb250LW1lZGl1bSB1cHBlcmNhc2UgdHJhY2tpbmctd2lkZXN0IHBsLTEiPntleGFtTGFiZWx9IHtzZXNzaW9uWWVhcn08L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CgogICAgICAgICAgICAgICAgICAgICAgICB7LyogTWVudSBOYXZpZ2F0aW9uICovfQogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iZmxleC0xIG92ZXJmbG93LXktYXV0byBwLTQgc3BhY2UteS0yIGN1c3RvbS1zY3JvbGxiYXIiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9InRleHQteHMgZm9udC1ib2xkIHRleHQtc2xhdGUtNTAwIHVwcGVyY2FzZSB0cmFja2luZy13aWRlciBtYi0yIG10LTIgcHgtMiI+RG9jdW1lbnRzPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2lkZWJhckJ1dHRvbiBtb2RlPSJTVFVERU5UUyIgaWNvbj17VXNlcnN9IGxhYmVsPSJDb252b2NhdGlvbnMgw4lsw6h2ZXMiIGlzQWN0aXZlPXt2aWV3TW9kZSA9PT0gJ1NUVURFTlRTJ30gb25DbGljaz17KCkgPT4gc2V0Vmlld01vZGUoJ1NUVURFTlRTJyl9IC8+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2lkZWJhckJ1dHRvbiBtb2RlPSJQUk9GUyIgaWNvbj17VXNlcnN9IGxhYmVsPSJDb252b2NhdGlvbnMgUHJvZnMiIGlzQWN0aXZlPXt2aWV3TW9kZSA9PT0gJ1BST0ZTJ30gb25DbGljaz17KCkgPT4gc2V0Vmlld01vZGUoJ1BST0ZTJyl9IC8+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2lkZWJhckJ1dHRvbiBtb2RlPSJBRVNIIiBpY29uPXtIYW5kSGVhcnR9IGxhYmVsPSJNaXNzaW9ucyBBRVNIIiBpc0FjdGl2ZT17dmlld01vZGUgPT09ICdBRVNIJ30gb25DbGljaz17KCkgPT4gc2V0Vmlld01vZGUoJ0FFU0gnKX0gLz4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9InRleHQteHMgZm9udC1ib2xkIHRleHQtc2xhdGUtNTAwIHVwcGVyY2FzZSB0cmFja2luZy13aWRlciBtYi0yIG10LTYgcHgtMiI+SnVyeXMgJiBTYWxsZXM8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTaWRlYmFyQnV0dG9uIG1vZGU9IlBWIiBpY29uPXtGaWxlVGV4dH0gbGFiZWw9IlByb2PDqHMgVmVyYmF1eCIgaXNBY3RpdmU9e3ZpZXdNb2RlID09PSAnUFYnfSBvbkNsaWNrPXsoKSA9PiBzZXRWaWV3TW9kZSgnUFYnKX0gLz4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTaWRlYmFyQnV0dG9uIG1vZGU9IlBPQ0hFVFRFUyIgaWNvbj17Rm9sZGVyfSBsYWJlbD0iUG9jaGV0dGVzIEp1cnkiIGlzQWN0aXZlPXt2aWV3TW9kZSA9PT0gJ1BPQ0hFVFRFUyd9IG9uQ2xpY2s9eygpID0+IHNldFZpZXdNb2RlKCdQT0NIRVRURVMnKX0gLz4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTaWRlYmFyQnV0dG9uIG1vZGU9IkpVUklFUyIgaWNvbj17Q2FsZW5kYXJ9IGxhYmVsPSJQbGFubmluZ3MgSnVyeSIgaXNBY3RpdmU9e3ZpZXdNb2RlID09PSAnSlVSSUVTJ30gb25DbGljaz17KCkgPT4gc2V0Vmlld01vZGUoJ0pVUklFUycpfSAvPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNpZGViYXJCdXR0b24gbW9kZT0iR0VORVJBTCIgaWNvbj17R3JpZH0gbGFiZWw9IlBsYW5uaW5nIEfDqW7DqXJhbCIgaXNBY3RpdmU9e3ZpZXdNb2RlID09PSAnR0VORVJBTCd9IG9uQ2xpY2s9eygpID0+IHNldFZpZXdNb2RlKCdHRU5FUkFMJyl9IC8+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJ0ZXh0LXhzIGZvbnQtYm9sZCB0ZXh0LXNsYXRlLTUwMCB1cHBlcmNhc2UgdHJhY2tpbmctd2lkZXIgbWItMiBtdC02IHB4LTIiPkFkbWluaXN0cmF0aW9uPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2lkZWJhckJ1dHRvbiBtb2RlPSJOT1RBVElPTiIgaWNvbj17Q2xpcGJvYXJkTGlzdH0gbGFiZWw9IkZldWlsbGVzIGRlIE5vdGVzIiBpc0FjdGl2ZT17dmlld01vZGUgPT09ICdOT1RBVElPTid9IG9uQ2xpY2s9eygpID0+IHNldFZpZXdNb2RlKCdOT1RBVElPTicpfSAvPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNpZGViYXJCdXR0b24gbW9kZT0iRU1BUkdFTUVOVCIgaWNvbj17Q2hlY2tDaXJjbGV9IGxhYmVsPSLDiW1hcmdlbWVudCIgaXNBY3RpdmU9e3ZpZXdNb2RlID09PSAnRU1BUkdFTUVOVCd9IG9uQ2xpY2s9eygpID0+IHNldFZpZXdNb2RlKCdFTUFSR0VNRU5UJyl9IC8+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgICAgICAgICAgICAgICAgey8qIEZvb3RlciBBY3Rpb25zICovfQogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0icC00IGJvcmRlci10IGJvcmRlci1zbGF0ZS04MDAgYmctc2xhdGUtOTUwIHNwYWNlLXktMyI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7WydTVFVERU5UUycsICdQUk9GUycsICdBRVNIJ10uaW5jbHVkZXModmlld01vZGUpICYmICgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIG9uQ2xpY2s9eygpID0+IHNldFNob3dUZW1wbGF0ZUVkaXRvcih0cnVlKX0gY2xhc3NOYW1lPSJ3LWZ1bGwgYmctc2xhdGUtODAwIGhvdmVyOmJnLXNsYXRlLTcwMCB0ZXh0LXdoaXRlIHB4LTQgcHktMi41IHJvdW5kZWQtbGcgZm9udC1ib2xkIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIGdhcC0yIGJvcmRlciBib3JkZXItc2xhdGUtNzAwIHRyYW5zaXRpb24tYWxsIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEVkaXQgc2l6ZT17MTZ9IC8+IFBlcnNvbm5hbGlzZXIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIG9uQ2xpY2s9eygpID0+IHdpbmRvdy5wcmludCgpfSBjbGFzc05hbWU9InctZnVsbCBiZy1lbWVyYWxkLTYwMCBob3ZlcjpiZy1lbWVyYWxkLTUwMCB0ZXh0LXdoaXRlIHB4LTQgcHktMyByb3VuZGVkLWxnIGZvbnQtYm9sZCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBnYXAtMiBzaGFkb3ctbGcgc2hhZG93LWVtZXJhbGQtOTAwLzIwIHRyYW5zaXRpb24tYWxsIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8UHJpbnRlciBzaXplPXsxOH0gLz4gSU1QUklNRVIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBvbkNsaWNrPXtvbkNsb3NlfSBjbGFzc05hbWU9InctZnVsbCBiZy1yZWQtNjAwLzEwIGhvdmVyOmJnLXJlZC02MDAgdGV4dC1yZWQtNTAwIGhvdmVyOnRleHQtd2hpdGUgcHgtNCBweS0yLjUgcm91bmRlZC1sZyBmb250LWJvbGQgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgZ2FwLTIgYm9yZGVyIGJvcmRlci1yZWQtOTAwLzMwIGhvdmVyOmJvcmRlci1yZWQtNjAwIHRyYW5zaXRpb24tYWxsIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Um90YXRlQ2N3IHNpemU9ezE2fSAvPiBSZXRvdXIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KCiAgICAgICAgICAgICAgICAgICAgey8qIFpPTkUgUFJJTkNJUEFMRSAoRHJvaXRlKSAtIENvbnRpZW50IGxlcyBmZXVpbGxlcyBBNCAqL30KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iZmxleC0xIGJnLXNsYXRlLTIwMC81MCBvdmVyZmxvdy1hdXRvIHAtOCBwcmludC1jb250ZW50LWFyZWEgZmxleCBmbGV4LWNvbCBpdGVtcy1jZW50ZXIiPgogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0icHJpbnQtd3JhcHBlciB3LWZ1bGwgZmxleCBmbGV4LWNvbCBpdGVtcy1jZW50ZXIiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAge3ZpZXdNb2RlID09PSAnR0VORVJBTCcgJiYgKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJ3LWZ1bGwgbWF4LXctWzI5N21tXSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJuby1wcmludCBtYi00IHAtNCBiZy1ibHVlLTEwMCB0ZXh0LWJsdWUtODAwIHJvdW5kZWQtbGcgZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTMgYm9yZGVyIGJvcmRlci1ibHVlLTIwMCBzaGFkb3ctc20gdy1mdWxsIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxHcmlkIHNpemU9ezI0fSAvPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3Ryb25nPlBsYW5uaW5nIEfDqW7DqXJhbCAoUGF5c2FnZSk8L3N0cm9uZz48YnIvPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1hdHJpY2UgaG9yYWlyZSBwb3VyIGFmZmljaGFnZSBnbG9iYWwuIDxzdHJvbmc+UGVuc2V6IMOgIHLDqWdsZXIgdm90cmUgaW1wcmltYW50ZSBzdXIgIlBheXNhZ2UiIChMYW5kc2NhcGUpLjwvc3Ryb25nPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Z2V0R2VuZXJhbFBsYW5uaW5nRGF0YSgpLmp1cnlDaHVua3MubWFwKChjaHVuaywgY2h1bmtJbmRleCkgPT4gKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBrZXk9e2NodW5rSW5kZXh9IGNsYXNzTmFtZT0iQTQtbGFuZHNjYXBlLXNoZWV0Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iZmxleCBqdXN0aWZ5LWJldHdlZW4gaXRlbXMtY2VudGVyIGJvcmRlci1iLTIgYm9yZGVyLWJsYWNrIHBiLTQgbWItNCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtNCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7c2Nob29sTG9nbyAmJiA8aW1nIHNyYz17c2Nob29sTG9nb30gYWx0PSJMb2dvIiBjbGFzc05hbWU9ImgtMTYgb2JqZWN0LWNvbnRhaW4iIC8+fQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDEgY2xhc3NOYW1lPSJ0ZXh0LTJ4bCBmb250LWJsYWNrIHVwcGVyY2FzZSB0ZXh0LXNsYXRlLTkwMCI+UExBTk5JTkcgR8OJTsOJUkFMIHtjaHVua0luZGV4ID4gMCA/IGAoU3VpdGUgJHtjaHVua0luZGV4KzF9KWAgOiAnJ308L2gxPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJ0ZXh0LXhsIGZvbnQtYm9sZCB0ZXh0LWJsdWUtODAwIj57ZXhhbUxhYmVsfSAtIFNlc3Npb24ge3Nlc3Npb25ZZWFyfTwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJ0ZXh0LXNtIGZvbnQtYm9sZCB0ZXh0LWdyYXktNTAwIj57ZXhhbURhdGV9PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJ0ZXh0LXJpZ2h0Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJmb250LWJvbGQgdGV4dC14bCB0ZXh0LXNsYXRlLTcwMCI+e3NjaG9vbE5hbWV9PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0idGV4dC1zbGF0ZS01MDAiPntzY2hvb2xDaXR5fTwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRhYmxlIGNsYXNzTmFtZT0idy1mdWxsIGJvcmRlci1jb2xsYXBzZSBib3JkZXIgYm9yZGVyLWJsYWNrIHRleHQteHMgdGFibGUtZml4ZWQiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGhlYWQ+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dHIgY2xhc3NOYW1lPSJiZy1zbGF0ZS0xMDAiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aCBjbGFzc05hbWU9ImJvcmRlciBib3JkZXItYmxhY2sgcC0yIHctMjAgdGV4dC1jZW50ZXIgYmctc2xhdGUtMjAwIj5Ib3JhaXJlPC90aD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Y2h1bmsubWFwKGogPT4gKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGgga2V5PXtqLmlkfSBjbGFzc05hbWU9ImJvcmRlciBib3JkZXItYmxhY2sgcC0yIHRleHQtY2VudGVyIG1pbi13LVsxMjBweF0iPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9InRleHQtbGcgZm9udC1ibGFjayI+SlVSWSB7ai5pZH08L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJmb250LWJvbGQgdGV4dC1ibHVlLTcwMCI+U2FsbGUge2oucm9vbX08L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90aD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApKX0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdHI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGhlYWQ+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0Ym9keT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtnZXRHZW5lcmFsUGxhbm5pbmdEYXRhKCkuc29ydGVkVGltZXMubWFwKCh0aW1lLCB0SWR4KSA9PiAoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRyIGtleT17dElkeH0gY2xhc3NOYW1lPXt0SWR4ICUgMiA9PT0gMCA/ICdiZy13aGl0ZScgOiAnYmctZ3JheS01MCd9PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQgY2xhc3NOYW1lPSJib3JkZXIgYm9yZGVyLWJsYWNrIHAtMiB0ZXh0LWNlbnRlciBmb250LWJvbGQgdGV4dC1zbSBiZy1zbGF0ZS0xMDAiPnt0aW1lfTwvdGQ+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtjaHVuay5tYXAoaiA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzID0gai5zdHVkZW50c01hcFt0aW1lXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghcykgcmV0dXJuIDx0ZCBrZXk9e2ouaWR9IGNsYXNzTmFtZT0iYm9yZGVyIGJvcmRlci1ibGFjayBwLTIiPjwvdGQ+OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHMuaXNCcmVhaykgcmV0dXJuIDx0ZCBrZXk9e2ouaWR9IGNsYXNzTmFtZT0iYm9yZGVyIGJvcmRlci1ibGFjayBwLTIgdGV4dC1jZW50ZXIgdGV4dC1ncmF5LTQwMCBpdGFsaWMgYmctZ3JheS0xMDAiPlBBVVNFPC90ZD47CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIGtleT17ai5pZH0gY2xhc3NOYW1lPSJib3JkZXIgYm9yZGVyLWJsYWNrIHAtMiBvdmVyZmxvdy1oaWRkZW4iPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iZm9udC1ib2xkIHVwcGVyY2FzZSB0ZXh0LXNsYXRlLTkwMCB0cnVuY2F0ZSI+e3MuTk9NfSB7cy5QUkVOT019PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJmbGV4IGp1c3RpZnktYmV0d2VlbiBpdGVtcy1jZW50ZXIgbXQtMSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9ImZvbnQtbWVkaXVtIHRleHQtZ3JheS02MDAiPntzLkRJVn08L3NwYW4+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7cy5UVCAmJiA8c3BhbiBjbGFzc05hbWU9InRleHQtWzEwcHhdIGZvbnQtYm9sZCB0ZXh0LXdoaXRlIGJnLXJlZC01MDAgcHgtMSByb3VuZGVkIj5UVDwvc3Bhbj59CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KX0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RyPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSl9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGJvZHk+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90YWJsZT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ibXQtYXV0byBwdC0yIHRleHQtY2VudGVyIHRleHQtWzEwcHhdIHRleHQtZ3JheS00MDAiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEb2N1bWVudCBnw6luw6lyw6kgcGFyIFBlcmRpckZvcm1hbmNlIC0gUGFnZSB7Y2h1bmtJbmRleCArIDF9L3tnZXRHZW5lcmFsUGxhbm5pbmdEYXRhKCkuanVyeUNodW5rcy5sZW5ndGh9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSl9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICApfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt2aWV3TW9kZSA9PT0gJ1NUVURFTlRTJyAmJiAoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9InctZnVsbCBtYXgtdy1bMjEwbW1dIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3N0dWRlbnRzVG9QcmludC5tYXAoKHMsIGkpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGlzVFQgPSAocy5UVCAmJiAocy5UVCA9PT0gJ09VSScgfHwgcy5UVCA9PT0gdHJ1ZSB8fCBub3JtYWxpemVUZXh0KHMuVFQpLmluY2x1ZGVzKCdUSUVSUycpKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgcHJlcFRpbWUgPSAxNTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChleGFtVHlwZSA9PT0gJ0dPJykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZXBUaW1lID0gaXNUVCA/IDI3IDogMjA7IAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFByZXBhcmUgdmFyaWFibGVzIGZvciB0ZW1wbGF0ZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVtcGxhdGVWYXJzID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE5PTTogcy5OT00sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUFJFTk9NOiBzLlBSRU5PTSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFUFJFVVZFOiBleGFtRnVsbE5hbWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU0VTU0lPTjogc2Vzc2lvblllYXIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgREFURV9FWEFNOiBleGFtRGF0ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBWSUxMRTogc2Nob29sQ2l0eSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEQVRFX0pPVVI6IG5ldyBEYXRlKCkudG9Mb2NhbGVEYXRlU3RyaW5nKCdmci1GUicpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVUQUJMSVNTRU1FTlQ6IHNjaG9vbE5hbWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSEVVUkU6IHMudGltZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTQUxMRTogcy5yb29tLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEpVUlk6IHMuanVyeUlkCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGtleT17aX0gY2xhc3NOYW1lPSJBNC1zaGVldCB0ZXh0LWJsYWNrIGZvbnQtc2FucyBmbGV4IGZsZXgtY29sIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7LyogSGVhZGVyICsgRGVzdGluYXRhaXJlIGFsaWduw6lzIChSZW1vbnTDqWUgZHUgTm9tKSAqL30KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iZmxleCBqdXN0aWZ5LWJldHdlZW4gaXRlbXMtc3RhcnQgbWItMTIiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iZmxleCBpdGVtcy1zdGFydCBnYXAtNCBtYXgtdy1bNTAlXSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7c2Nob29sTG9nbyAmJiA8aW1nIHNyYz17c2Nob29sTG9nb30gYWx0PSJMb2dvIiBjbGFzc05hbWU9ImgtMjQgdy0yNCBvYmplY3QtY29udGFpbiIgLz59CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0icHQtMSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9ImZvbnQtYm9sZCB0ZXh0LWxnIHVwcGVyY2FzZSBsZWFkaW5nLXRpZ2h0Ij57c2Nob29sTmFtZX08L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0idGV4dC1iYXNlIHRleHQtZ3JheS02MDAiPntzY2hvb2xDaXR5fTwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9InRleHQtcmlnaHQgbWF4LXctWzQ1JV0gcHQtMiI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0idGV4dC1zbSB1cHBlcmNhc2UgZm9udC1ib2xkIHRleHQtZ3JheS00MDAgbWItMSI+Q2FuZGlkYXQoZSk8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJmb250LWJvbGQgdGV4dC14bCB1cHBlcmNhc2UgbWItMSI+e3MuTk9NfSB7cy5QUkVOT019PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0idGV4dC1sZyI+Q2xhc3NlIGRlIHtzLkRJVn08L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsvKiBUaXRyZSAqL30KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0idGV4dC1jZW50ZXIgbWItMTAiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDEgY2xhc3NOYW1lPSJ0ZXh0LTN4bCBmb250LWJsYWNrIHVwcGVyY2FzZSBtYi0yIHVuZGVybGluZSB1bmRlcmxpbmUtb2Zmc2V0LTQiPkNPTlZPQ0FUSU9OPC9oMT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9InRleHQteGwgZm9udC1ib2xkIHVwcGVyY2FzZSI+e2V4YW1GdWxsTmFtZX08L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9InRleHQtbGcgdXBwZXJjYXNlIj5TZXNzaW9uIHtzZXNzaW9uWWVhcn08L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9InB4LTQgZmxleC0xIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgey8qIEludHJvICovfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ibWItOCB0ZXh0LWp1c3RpZnkgbGVhZGluZy1yZWxheGVkIHRleHQtYmFzZSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7cmVuZGVyVGVtcGxhdGVUZXh0KHRlbXBsYXRlcy5TVFVERU5UUy5pbnRybywgdGVtcGxhdGVWYXJzKX0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7LyogRGV0YWlscyAqL30KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9Im1iLTEwIGJvcmRlci0yIGJvcmRlci1ibGFjayBwLTYiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9ImdyaWQgZ3JpZC1jb2xzLTEgZ2FwLTQgdGV4dC1sZyI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9ImZsZXggYm9yZGVyLWIgYm9yZGVyLWdyYXktMzAwIHBiLTIiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9ImZvbnQtYm9sZCB3LTQ4Ij5EYXRlIGRlIGwnw6lwcmV1dmUgOjwvc3Bhbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPSJjYXBpdGFsaXplIj57ZXhhbURhdGV9PC9zcGFuPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJmbGV4IGJvcmRlci1iIGJvcmRlci1ncmF5LTMwMCBwYi0yIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPSJmb250LWJvbGQgdy00OCI+SnVyeSA6PC9zcGFuPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3Bhbj5OwrAge3MuanVyeUlkfTwvc3Bhbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iZmxleCBib3JkZXItYiBib3JkZXItZ3JheS0zMDAgcGItMiI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT0iZm9udC1ib2xkIHctNDgiPkhvcmFpcmUgZGUgcGFzc2FnZSA6PC9zcGFuPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9ImZvbnQtYm9sZCI+e3MudGltZX08L3NwYW4+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtleGFtVHlwZSA9PT0gJ0dPJyAmJiA8c3BhbiBjbGFzc05hbWU9Im1sLTQgdGV4dC1zbSBpdGFsaWMiPihQcsOpcGFyYXRpb24gOiB7YWRkTWludXRlcyhzLnRpbWUsIC0yMCl9KTwvc3Bhbj59CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9ImZsZXggYm9yZGVyLWIgYm9yZGVyLWdyYXktMzAwIHBiLTIiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9ImZvbnQtYm9sZCB3LTQ4Ij5TYWxsZSA6PC9zcGFuPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3Bhbj57cy5yb29tfTwvc3Bhbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZXhhbVR5cGUgPT09ICdHTycgJiYgKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iZmxleCBib3JkZXItYiBib3JkZXItZ3JheS0zMDAgcGItMiI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9ImZvbnQtYm9sZCB3LTQ4Ij5TcMOpY2lhbGl0w6kgOjwvc3Bhbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuPntzLkVEU308L3NwYW4+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7LyogSW5zdHJ1Y3Rpb25zICovfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ibWItOCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDQgY2xhc3NOYW1lPSJmb250LWJvbGQgdW5kZXJsaW5lIG1iLTIiPkluc3RydWN0aW9ucyA6PC9oND4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJ0ZXh0LXNtIHRleHQtanVzdGlmeSBsZWFkaW5nLXJlbGF4ZWQiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtyZW5kZXJUZW1wbGF0ZVRleHQodGVtcGxhdGVzLlNUVURFTlRTLmluc3RydWN0aW9ucywgdGVtcGxhdGVWYXJzKX0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgey8qIEZvb3RlciAtIE1hcmdlIHJlc3BlY3TDqWUgKi99CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9Im10LWF1dG8gZmxleCBqdXN0aWZ5LWVuZCBwYi00Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9InRleHQtY2VudGVyIHctNjQiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9Im1iLTIgZm9udC1ib2xkIj5MZSBDaGVmIGQnw4l0YWJsaXNzZW1lbnQ8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJtYi00IHRleHQtc20iPntzY2hvb2xDaXR5fSwgbGUge25ldyBEYXRlKCkudG9Mb2NhbGVEYXRlU3RyaW5nKCdmci1GUicpfTwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9ImgtMzIgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgcmVsYXRpdmUiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtzY2hvb2xTdGFtcCAmJiAoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbWcgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcmM9e3NjaG9vbFN0YW1wfSAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsdD0iQ2FjaGV0IiAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0ibWF4LWgtZnVsbCBtYXgtdy1mdWxsIG9iamVjdC1jb250YWluIG1peC1ibGVuZC1tdWx0aXBseSBvcGFjaXR5LTkwIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgKX0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7dmlld01vZGUgPT09ICdBRVNIJyAmJiAoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9InctZnVsbCBtYXgtdy1bMjEwbW1dIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9Im5vLXByaW50IG1iLTYgcC00IGJnLWdyYXktMTAwIHRleHQtZ3JheS04MDAgYm9yZGVyIGJvcmRlci1ncmF5LTMwMCByb3VuZGVkLWxnIGZsZXggaXRlbXMtY2VudGVyIGdhcC0zIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxIYW5kSGVhcnQgc2l6ZT17MjB9IC8+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzdHJvbmc+T3JkcmVzIGRlIE1pc3Npb24gQUVTSDwvc3Ryb25nPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2Flc2hBc3NpZ25tZW50cy5tYXAoKGFlc2gsIGkpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXBsYXRlVmFycyA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBOT006IGFlc2gubm9tLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFBSRU5PTTogYWVzaC5wcmVub20sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRVBSRVVWRTogZXhhbUxhYmVsTWl4ZWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU0VTU0lPTjogc2Vzc2lvblllYXIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgREFURV9FWEFNOiBleGFtRGF0ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBWSUxMRTogc2Nob29sQ2l0eSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEQVRFX0pPVVI6IG5ldyBEYXRlKCkudG9Mb2NhbGVEYXRlU3RyaW5nKCdmci1GUicpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVUQUJMSVNTRU1FTlQ6IHNjaG9vbE5hbWUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYga2V5PXtpfSBjbGFzc05hbWU9IkE0LXNoZWV0IHRleHQtYmxhY2sgZm9udC1zYW5zIGZsZXggZmxleC1jb2wiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsvKiBIZWFkZXIgKyBEZXN0aW5hdGFpcmUgYWxpZ27DqXMgKi99CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9ImZsZXgganVzdGlmeS1iZXR3ZWVuIGl0ZW1zLXN0YXJ0IG1iLTEyIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9ImZsZXggaXRlbXMtc3RhcnQgZ2FwLTQgbWF4LXctWzUwJV0iPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3NjaG9vbExvZ28gJiYgPGltZyBzcmM9e3NjaG9vbExvZ299IGFsdD0iTG9nbyIgY2xhc3NOYW1lPSJoLTI0IHctMjQgb2JqZWN0LWNvbnRhaW4iIC8+fQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9InB0LTEiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJmb250LWJvbGQgdGV4dC1sZyB1cHBlcmNhc2UgbGVhZGluZy10aWdodCI+e3NjaG9vbE5hbWV9PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9InRleHQtYmFzZSB0ZXh0LWdyYXktNjAwIj57c2Nob29sQ2l0eX08L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJ0ZXh0LXJpZ2h0IG1heC13LVs0NSVdIHB0LTIiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9InRleHQtc20gdXBwZXJjYXNlIGZvbnQtYm9sZCB0ZXh0LWdyYXktNDAwIG1iLTEiPkFFU0g8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJmb250LWJvbGQgdGV4dC14bCB1cHBlcmNhc2UgbWItMSI+e2Flc2gubm9tfSB7YWVzaC5wcmVub219PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7LyogVGl0cmUgKi99CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9InRleHQtY2VudGVyIG1iLTEwIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT0idGV4dC0zeGwgZm9udC1ibGFjayB1cHBlcmNhc2UgbWItMiB1bmRlcmxpbmUgdW5kZXJsaW5lLW9mZnNldC00Ij5PUkRSRSBERSBNSVNTSU9OIEFFU0g8L2gxPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0idGV4dC14bCBmb250LWJvbGQgdXBwZXJjYXNlIj57ZXhhbUZ1bGxOYW1lfTwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0idGV4dC1sZyB1cHBlcmNhc2UiPlNlc3Npb24ge3Nlc3Npb25ZZWFyfTwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJweC00IGZsZXgtMSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsvKiBJbnRybyAqL30KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9Im1iLTggdGV4dC1qdXN0aWZ5IGxlYWRpbmctcmVsYXhlZCB0ZXh0LWJhc2UiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3JlbmRlclRlbXBsYXRlVGV4dCh0ZW1wbGF0ZXMuQUVTSC5pbnRybywgdGVtcGxhdGVWYXJzKX0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7LyogTGlzdGUgRWxldmVzIC8gTWlzc2lvbnMgLSBTVFlMRSBFTkNBRFLDiSAoTW9kaWZpw6kpICovfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ibWItMTAgc3BhY2UteS02Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHthZXNoLm1pc3Npb25zLm1hcCgobSwgaWR4KSA9PiAoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBrZXk9e2lkeH0gY2xhc3NOYW1lPSJicmVhay1pbnNpZGUtYXZvaWQgYm9yZGVyLTIgYm9yZGVyLWJsYWNrIHAtNiI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJmb250LWJvbGQgdGV4dC14bCB1cHBlcmNhc2UgbWItNCBib3JkZXItYi0yIGJvcmRlci1ncmF5LTIwMCBwYi0yIHRleHQtc2xhdGUtODAwIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHttLnN0dWRlbnQuTk9NfSB7bS5zdHVkZW50LlBSRU5PTX0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJ0ZXh0LWxnIHNwYWNlLXktMiI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iZmxleCBib3JkZXItYiBib3JkZXItZ3JheS0xMDAgcGItMSI+PHNwYW4gY2xhc3NOYW1lPSJ3LTU2IGZvbnQtYm9sZCB0ZXh0LWdyYXktNjAwIj5EYXRlIGRlIGwnw6lwcmV1dmUgOjwvc3Bhbj4gPHNwYW4gY2xhc3NOYW1lPSJmb250LXNlbWlib2xkIj57ZXhhbURhdGV9PC9zcGFuPjwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9ImZsZXggYm9yZGVyLWIgYm9yZGVyLWdyYXktMTAwIHBiLTEiPjxzcGFuIGNsYXNzTmFtZT0idy01NiBmb250LWJvbGQgdGV4dC1ncmF5LTYwMCI+SnVyeSA6PC9zcGFuPiA8c3BhbiBjbGFzc05hbWU9ImZvbnQtYm9sZCI+TsKwIHttLmp1cnlJZH08L3NwYW4+PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iZmxleCBib3JkZXItYiBib3JkZXItZ3JheS0xMDAgcGItMSI+PHNwYW4gY2xhc3NOYW1lPSJ3LTU2IGZvbnQtYm9sZCB0ZXh0LWdyYXktNjAwIj5Ib3JhaXJlIGRlIHByaXNlIGVuIGNoYXJnZSA6PC9zcGFuPiA8c3BhbiBjbGFzc05hbWU9ImZvbnQtYm9sZCI+e20udGltZX08L3NwYW4+PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iZmxleCBib3JkZXItYiBib3JkZXItZ3JheS0xMDAgcGItMSI+PHNwYW4gY2xhc3NOYW1lPSJ3LTU2IGZvbnQtYm9sZCB0ZXh0LWdyYXktNjAwIj5TYWxsZSA6PC9zcGFuPiA8c3BhbiBjbGFzc05hbWU9ImZvbnQtYm9sZCI+e20ucm9vbX08L3NwYW4+PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSl9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgey8qIEluc3RydWN0aW9ucyAqL30KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9Im1iLTgiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGg0IGNsYXNzTmFtZT0iZm9udC1ib2xkIHVuZGVybGluZSBtYi0yIj5JbnN0cnVjdGlvbnMgOjwvaDQ+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0idGV4dC1zbSB0ZXh0LWp1c3RpZnkgbGVhZGluZy1yZWxheGVkIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7cmVuZGVyVGVtcGxhdGVUZXh0KHRlbXBsYXRlcy5BRVNILmluc3RydWN0aW9ucywgdGVtcGxhdGVWYXJzKX0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgey8qIEZvb3RlciAqL30KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ibXQtYXV0byBmbGV4IGp1c3RpZnktZW5kIHBiLTQiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0idGV4dC1jZW50ZXIgdy02NCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ibWItMiBmb250LWJvbGQiPkxlIENoZWYgZCfDiXRhYmxpc3NlbWVudDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9Im1iLTQgdGV4dC1zbSI+e3NjaG9vbENpdHl9LCBsZSB7bmV3IERhdGUoKS50b0xvY2FsZURhdGVTdHJpbmcoJ2ZyLUZSJyl9PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iaC0zMiBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciByZWxhdGl2ZSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3NjaG9vbFN0YW1wICYmICgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGltZyAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNyYz17c2Nob29sU3RhbXB9IAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWx0PSJDYWNoZXQiIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPSJtYXgtaC1mdWxsIG1heC13LWZ1bGwgb2JqZWN0LWNvbnRhaW4gbWl4LWJsZW5kLW11bHRpcGx5IG9wYWNpdHktOTAiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSl9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHthZXNoQXNzaWdubWVudHMubGVuZ3RoID09PSAwICYmICgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJ0ZXh0LWNlbnRlciBweS0yMCB0ZXh0LWdyYXktNDAwIGl0YWxpYyB0ZXh0LXhsIj5BdWN1biDDqWzDqHZlIGF2ZWMgQUVTSCBhc3NpZ27DqSDDoCB1biBqdXJ5LjwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgKX0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7dmlld01vZGUgPT09ICdQUk9GUycgJiYgKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJ3LWZ1bGwgbWF4LXctWzIxMG1tXSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJuby1wcmludCBtYi02IHAtNCBiZy1ncmF5LTEwMCB0ZXh0LWdyYXktODAwIGJvcmRlciBib3JkZXItZ3JheS0zMDAgcm91bmRlZC1sZyBmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMyI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8UHJpbnRlciBzaXplPXsyMH0gLz4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHN0cm9uZz5Db252b2NhdGlvbnMgUHJvZmVzc2V1cnMgKE9yZHJlcyBkZSBNaXNzaW9uKTwvc3Ryb25nPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3Byb2ZBc3NpZ25tZW50cy5tYXAoKHAsIGkpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXBsYXRlVmFycyA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBOT006IHAuTk9NLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFBSRU5PTTogcC5QUkVOT00sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQ0lWOiBwLkNJViB8fCAnTS4vTW1lJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFUFJFVVZFOiBleGFtTGFiZWxNaXhlZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTRVNTSU9OOiBzZXNzaW9uWWVhciwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEQVRFX0VYQU06IGV4YW1EYXRlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFZJTExFOiBzY2hvb2xDaXR5LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERBVEVfSk9VUjogbmV3IERhdGUoKS50b0xvY2FsZURhdGVTdHJpbmcoJ2ZyLUZSJyksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRVRBQkxJU1NFTUVOVDogc2Nob29sTmFtZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBIRVVSRV9ERUJVVDogc3RhcnRUaW1lLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEpVUlk6IHAuanVyeUlkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNBTExFOiBwLnJvb20gfHwgJ05vbiBkw6lmaW5pZScsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUk9MRTogcC5yb2xlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGtleT17aX0gY2xhc3NOYW1lPSJBNC1zaGVldCB0ZXh0LWJsYWNrIGZvbnQtc2FucyBmbGV4IGZsZXgtY29sIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7LyogSGVhZGVyICsgRGVzdGluYXRhaXJlIGFsaWduw6lzICovfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJmbGV4IGp1c3RpZnktYmV0d2VlbiBpdGVtcy1zdGFydCBtYi04Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9ImZsZXggaXRlbXMtc3RhcnQgZ2FwLTQgbWF4LXctWzUwJV0iPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3NjaG9vbExvZ28gJiYgPGltZyBzcmM9e3NjaG9vbExvZ299IGFsdD0iTG9nbyIgY2xhc3NOYW1lPSJoLTI0IHctMjQgb2JqZWN0LWNvbnRhaW4iIC8+fQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9InB0LTEiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJmb250LWJvbGQgdGV4dC1sZyB1cHBlcmNhc2UgbGVhZGluZy10aWdodCI+e3NjaG9vbE5hbWV9PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9InRleHQtYmFzZSB0ZXh0LWdyYXktNjAwIj57c2Nob29sQ2l0eX08L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJ0ZXh0LXJpZ2h0IG1heC13LVs0NSVdIHB0LTIiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9InRleHQtc20gdXBwZXJjYXNlIGZvbnQtYm9sZCB0ZXh0LWdyYXktNDAwIG1iLTEiPkV4YW1pbmF0ZXVyPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iZm9udC1ib2xkIHRleHQteGwgdXBwZXJjYXNlIG1iLTEiPntwLkNJVn0ge3AuTk9NfSB7cC5QUkVOT019PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0idGV4dC1sZyBpdGFsaWMiPntwLk1BVElFUkV9PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7LyogVGl0cmUgKi99CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9InRleHQtY2VudGVyIG1iLTgiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDEgY2xhc3NOYW1lPSJ0ZXh0LTN4bCBmb250LWJsYWNrIHVwcGVyY2FzZSBtYi0yIHVuZGVybGluZSB1bmRlcmxpbmUtb2Zmc2V0LTQiPk9SRFJFIERFIE1JU1NJT048L2gxPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0idGV4dC14bCBmb250LWJvbGQgdXBwZXJjYXNlIj57ZXhhbUZ1bGxOYW1lfTwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0idGV4dC1sZyB1cHBlcmNhc2UiPlNlc3Npb24ge3Nlc3Npb25ZZWFyfTwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJweC00IGZsZXgtMSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsvKiBJbnRybyAqL30KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9Im1iLTYgdGV4dC1qdXN0aWZ5IGxlYWRpbmctcmVsYXhlZCB0ZXh0LWJhc2UiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3JlbmRlclRlbXBsYXRlVGV4dCh0ZW1wbGF0ZXMuUFJPRlMuaW50cm8sIHRlbXBsYXRlVmFycyl9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgey8qIERldGFpbHMgKi99CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJtYi02IGJvcmRlci0yIGJvcmRlci1ibGFjayBwLTQiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9ImdyaWQgZ3JpZC1jb2xzLTEgZ2FwLTIgdGV4dC1sZyI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9ImZsZXggYm9yZGVyLWIgYm9yZGVyLWdyYXktMzAwIHBiLTIiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9ImZvbnQtYm9sZCB3LTQ4Ij5EYXRlIGRlIGwnw6lwcmV1dmUgOjwvc3Bhbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPSJjYXBpdGFsaXplIj57ZXhhbURhdGV9PC9zcGFuPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJmbGV4IGJvcmRlci1iIGJvcmRlci1ncmF5LTMwMCBwYi0yIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPSJmb250LWJvbGQgdy00OCI+QWZmZWN0YXRpb24gOjwvc3Bhbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPSJmb250LWJvbGQiPkp1cnkgTsKwe3AuanVyeUlkfTwvc3Bhbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iZmxleCBib3JkZXItYiBib3JkZXItZ3JheS0zMDAgcGItMiI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT0iZm9udC1ib2xkIHctNDgiPkhvcmFpcmUgZGUgZMOpYnV0IDo8L3NwYW4+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuPntzdGFydFRpbWV9PC9zcGFuPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJmbGV4IGJvcmRlci1iIGJvcmRlci1ncmF5LTMwMCBwYi0yIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPSJmb250LWJvbGQgdy00OCI+U2FsbGUgOjwvc3Bhbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4+e3Aucm9vbSB8fCAnTm9uIGTDqWZpbmllJ308L3NwYW4+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9ImZsZXggYm9yZGVyLWIgYm9yZGVyLWdyYXktMzAwIHBiLTIiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9ImZvbnQtYm9sZCB3LTQ4Ij5Gb25jdGlvbiA6PC9zcGFuPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3Bhbj57cC5yb2xlfTwvc3Bhbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsvKiBJbnN0cnVjdGlvbnMgT1BUSU1JWkVEIEZPTlQgU0laRSAqL30KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9Im1iLTQiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGg0IGNsYXNzTmFtZT0iZm9udC1ib2xkIHVuZGVybGluZSBtYi0yIj5JbnN0cnVjdGlvbnMgOjwvaDQ+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0idGV4dC1zbSB0ZXh0LWp1c3RpZnkgbGVhZGluZy1yZWxheGVkIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7cmVuZGVyVGVtcGxhdGVUZXh0KHRlbXBsYXRlcy5QUk9GUy5pbnN0cnVjdGlvbnMsIHRlbXBsYXRlVmFycyl9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsvKiBGb290ZXIgT1BUSU1JWkVEIEhFSUdIVCAqL30KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ibXQtYXV0byBmbGV4IGp1c3RpZnktZW5kIHBiLTIiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0idGV4dC1jZW50ZXIgdy02NCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ibWItMiBmb250LWJvbGQiPkxlIENoZWYgZCfDiXRhYmxpc3NlbWVudDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9Im1iLTIgdGV4dC1zbSI+e3NjaG9vbENpdHl9LCBsZSB7bmV3IERhdGUoKS50b0xvY2FsZURhdGVTdHJpbmcoJ2ZyLUZSJyl9PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iaC0zMiBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciByZWxhdGl2ZSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3NjaG9vbFN0YW1wICYmICgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGltZyAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNyYz17c2Nob29sU3RhbXB9IAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWx0PSJDYWNoZXQiIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPSJtYXgtaC1mdWxsIG1heC13LWZ1bGwgb2JqZWN0LWNvbnRhaW4gbWl4LWJsZW5kLW11bHRpcGx5IG9wYWNpdHktOTAiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSl9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICApfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt2aWV3TW9kZSA9PT0gJ1BWJyAmJiAoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9InctZnVsbCBtYXgtdy1bMjEwbW1dIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9Im5vLXByaW50IG1iLTQgcC00IGJnLWdyYXktMTAwIHRleHQtZ3JheS04MDAgcm91bmRlZCBmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMiI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Q2xpcGJvYXJkTGlzdCBzaXplPXsyMH0gLz4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHN0cm9uZz5Qcm9jw6hzIFZlcmJhbCBkZSBKdXJ5PC9zdHJvbmc+PGJyLz4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEb2N1bWVudCBkZSBzeW50aMOoc2UgcG91ciBsZXMgb2JzZXJ2YXRpb25zIGR1IGp1cnkuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHthY3RpdmVKdXJpZXMubWFwKChqdXJ5KSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwcm9mMSA9IHByb2ZzLmZpbmQocCA9PiBwLmlkID09PSBqdXJ5LnByb2YxSWQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcHJvZjIgPSAhaXNGcmVuY2hPcmFsID8gcHJvZnMuZmluZChwID0+IHAuaWQgPT09IGp1cnkucHJvZjJJZCkgOiBudWxsOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYga2V5PXtqdXJ5LmlkfSBjbGFzc05hbWU9IkE0LXNoZWV0IGZsZXggZmxleC1jb2wiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iZmxleCBqdXN0aWZ5LWJldHdlZW4gaXRlbXMtc3RhcnQgYm9yZGVyLWItMiBib3JkZXItYmxhY2sgcGItNCBtYi02Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJ3LTEvMyI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtzY2hvb2xMb2dvICYmIDxpbWcgc3JjPXtzY2hvb2xMb2dvfSBhbHQ9IkxvZ28iIGNsYXNzTmFtZT0iaC0xNiBvYmplY3QtY29udGFpbiIgLz59CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJtdC0yIHRleHQteHMgdXBwZXJjYXNlIGZvbnQtYm9sZCB0ZXh0LWdyYXktNTAwIj57c2Nob29sTmFtZX08L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9InctMS8zIHRleHQtY2VudGVyIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDEgY2xhc3NOYW1lPSJ0ZXh0LTJ4bCBmb250LWJsYWNrIHVwcGVyY2FzZSB0ZXh0LXNsYXRlLTkwMCI+UFJPQ8OIUyBWRVJCQUw8L2gxPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJ0ZXh0LXhsIGZvbnQtYm9sZCB0ZXh0LWJsdWUtODAwIj57ZXhhbUxhYmVsfTwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJ0ZXh0LXNtIGZvbnQtYm9sZCBtdC0xIj5KVVJZIHtqdXJ5LmlkfSAtIFNhbGxlIHtqdXJ5LnJvb219PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJ3LTEvMyB0ZXh0LXJpZ2h0IHRleHQtc20iPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJmb250LWJvbGQgdXBwZXJjYXNlIj5TZXNzaW9uIHtzZXNzaW9uWWVhcn08L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PntleGFtRGF0ZX08L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ibXQtMiBmb250LWJvbGQiPkV4YW1pbmF0ZXVycyA6PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj57cHJvZjEgPyBgJHtwcm9mMS5OT019ICR7cHJvZjEuUFJFTk9NfWAgOiAnLi4uJ308L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2Pntwcm9mMiA/IGAke3Byb2YyLk5PTX0gJHtwcm9mMi5QUkVOT019YCA6ICcuLi4nfTwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9Im1iLTggcC00IGJnLWdyYXktNTAgYm9yZGVyIGJvcmRlci1ncmF5LTIwMCByb3VuZGVkLWxnIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMyBjbGFzc05hbWU9ImZvbnQtYm9sZCB0ZXh0LXNtIHVwcGVyY2FzZSB0ZXh0LWdyYXktNTAwIG1iLTIiPkNvbXBvc2l0aW9uIGR1IEp1cnk8L2gzPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9ImdyaWQgZ3JpZC1jb2xzLTIgZ2FwLTQiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT0idGV4dC14cyB0ZXh0LWdyYXktNDAwIGZvbnQtYm9sZCB1cHBlcmNhc2UiPkV4YW1pbmF0ZXVyIDE8L3NwYW4+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJmb250LWJvbGQiPntwcm9mMSA/IGAke3Byb2YxLk5PTX0gJHtwcm9mMS5QUkVOT019YCA6ICdOb24gYXNzaWduw6knfTwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0idGV4dC14cyBpdGFsaWMiPntwcm9mMT8uTUFUSUVSRX08L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9InRleHQteHMgdGV4dC1ncmF5LTQwMCBmb250LWJvbGQgdXBwZXJjYXNlIj5FeGFtaW5hdGV1ciAyPC9zcGFuPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iZm9udC1ib2xkIj57cHJvZjIgPyBgJHtwcm9mMi5OT019ICR7cHJvZjIuUFJFTk9NfWAgOiAnTm9uIGFzc2lnbsOpJ308L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9InRleHQteHMgaXRhbGljIj57cHJvZjI/Lk1BVElFUkV9PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iZmxleC0xIGJvcmRlci0yIGJvcmRlci1ibGFjayByb3VuZGVkLXhsIHAtNCBtYi04Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMyBjbGFzc05hbWU9ImZvbnQtYm9sZCB0ZXh0LWxnIHVwcGVyY2FzZSB1bmRlcmxpbmUgbWItNCI+T0JTRVJWQVRJT05TIC8gRMOJUk9VTEVNRU5UIERFUyDDiVBSRVVWRVM8L2gzPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9InctZnVsbCBoLWZ1bGwiIHN0eWxlPXt7bWluSGVpZ2h0OiAnMjAwcHgnfX0+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1suLi5BcnJheSg4KV0ubWFwKChfLCBpKSA9PiAoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYga2V5PXtpfSBjbGFzc05hbWU9ImJvcmRlci1iIGJvcmRlci1ncmF5LTMwMCBoLTEwIHctZnVsbCI+PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSl9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ibXQtYXV0byBwdC04IGZsZXgganVzdGlmeS1hcm91bmQgdGV4dC1jZW50ZXIgcGItOCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJtYi0xMiB0ZXh0LXhzIGZvbnQtYm9sZCB0ZXh0LWdyYXktNTAwIHVwcGVyY2FzZSI+U2lnbmF0dXJlIEV4YW1pbmF0ZXVyIDE8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0idy00OCBib3JkZXItYiBib3JkZXItYmxhY2siPjwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJtYi0xMiB0ZXh0LXhzIGZvbnQtYm9sZCB0ZXh0LWdyYXktNTAwIHVwcGVyY2FzZSI+U2lnbmF0dXJlIEV4YW1pbmF0ZXVyIDI8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0idy00OCBib3JkZXItYiBib3JkZXItYmxhY2siPjwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSl9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICApfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt2aWV3TW9kZSA9PT0gJ1BPQ0hFVFRFUycgJiYgKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJ3LWZ1bGwgbWF4LXctWzIxMG1tXSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJuby1wcmludCBtYi00IHAtNCBiZy1vcmFuZ2UtMTAwIHRleHQtb3JhbmdlLTgwMCByb3VuZGVkIGZsZXggaXRlbXMtY2VudGVyIGdhcC0yIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxGb2xkZXIgc2l6ZT17MjB9IC8+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzdHJvbmc+UG9jaGV0dGVzIGRlIEp1cnk8L3N0cm9uZz48YnIvPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFBhZ2UgZGUgZ2FyZGUgcG91ciBsZXMgZG9zc2llcnMgcmVtaXMgYXV4IGp1cnlzLgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7YWN0aXZlSnVyaWVzLm1hcCgoanVyeSkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcHJvZjEgPSBwcm9mcy5maW5kKHAgPT4gcC5pZCA9PT0ganVyeS5wcm9mMUlkKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHByb2YyID0gIWlzRnJlbmNoT3JhbCA/IHByb2ZzLmZpbmQocCA9PiBwLmlkID09PSBqdXJ5LnByb2YySWQpIDogbnVsbDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGtleT17anVyeS5pZH0gY2xhc3NOYW1lPSJBNC1zaGVldCBmbGV4IGZsZXgtY29sIGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciB0ZXh0LWNlbnRlciBwLTEyIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgey8qIEhlYWRlciAqL30KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9Im1iLTEyIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtzY2hvb2xMb2dvICYmIDxpbWcgc3JjPXtzY2hvb2xMb2dvfSBhbHQ9IkxvZ28iIGNsYXNzTmFtZT0iaC0zMiBvYmplY3QtY29udGFpbiBteC1hdXRvIG1iLTQiIC8+fQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGgyIGNsYXNzTmFtZT0idGV4dC0yeGwgZm9udC1ib2xkIHVwcGVyY2FzZSB0cmFja2luZy13aWRlc3QgdGV4dC1zbGF0ZS02MDAiPntzY2hvb2xOYW1lfTwvaDI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0idGV4dC14bCB0ZXh0LXNsYXRlLTQwMCBtdC0yIj57c2Nob29sQ2l0eX08L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7LyogTWFpbiBJbmZvICovfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iZmxleC0xIGZsZXggZmxleC1jb2wganVzdGlmeS1jZW50ZXIgdy1mdWxsIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJib3JkZXItdC00IGJvcmRlci1iLTQgYm9yZGVyLXNsYXRlLTkwMCBweS04IG1iLTgiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMSBjbGFzc05hbWU9InRleHQtNXhsIGZvbnQtYmxhY2sgdXBwZXJjYXNlIHRleHQtc2xhdGUtOTAwIG1iLTQiPntleGFtTGFiZWx9PC9oMT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0idGV4dC0zeGwgZm9udC1ib2xkIHRleHQtYmx1ZS04MDAgdXBwZXJjYXNlIHRyYWNraW5nLXdpZGVyIj5TZXNzaW9uIHtzZXNzaW9uWWVhcn08L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJtYi0xMiI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9ImlubGluZS1ibG9jayBiZy13aGl0ZSBib3JkZXItNCBib3JkZXItYmxhY2sgdGV4dC1zbGF0ZS05MDAgcHgtMTAgcHktNiByb3VuZGVkLTN4bCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJ0ZXh0LTJ4bCBmb250LW1lZGl1bSB1cHBlcmNhc2Ugb3BhY2l0eS04MCBtYi0xIj5KdXJ5IE7CsDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0idGV4dC04eGwgZm9udC1ibGFjayI+e2p1cnkuaWR9PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iZ3JpZCBncmlkLWNvbHMtMiBnYXAtOCB0ZXh0LWxlZnQgbWF4LXctMnhsIG14LWF1dG8gdy1mdWxsIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iYmctc2xhdGUtNTAgcC02IHJvdW5kZWQteGwgYm9yZGVyLTIgYm9yZGVyLXNsYXRlLTIwMCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJ0ZXh0LXhzIGZvbnQtYm9sZCB0ZXh0LXNsYXRlLTQwMCB1cHBlcmNhc2UgdHJhY2tpbmctd2lkZXN0IG1iLTIiPlNhbGxlPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJ0ZXh0LTR4bCBmb250LWJsYWNrIHRleHQtc2xhdGUtODAwIj57anVyeS5yb29tfTwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJiZy1zbGF0ZS01MCBwLTYgcm91bmRlZC14bCBib3JkZXItMiBib3JkZXItc2xhdGUtMjAwIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9InRleHQteHMgZm9udC1ib2xkIHRleHQtc2xhdGUtNDAwIHVwcGVyY2FzZSB0cmFja2luZy13aWRlc3QgbWItMiI+RGF0ZTwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0idGV4dC0yeGwgZm9udC1ib2xkIHRleHQtc2xhdGUtODAwIGNhcGl0YWxpemUiPntleGFtRGF0ZX08L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsvKiBGb290ZXIgLyBFeGFtaW5lcnMgKi99CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJ3LWZ1bGwgbXQtMTIgcHQtOCBib3JkZXItdC0yIGJvcmRlci1zbGF0ZS0yMDAiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGgzIGNsYXNzTmFtZT0idGV4dC1zbSBmb250LWJvbGQgdGV4dC1zbGF0ZS00MDAgdXBwZXJjYXNlIHRyYWNraW5nLXdpZGVzdCBtYi02Ij5FeGFtaW5hdGV1cnM8L2gzPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9ImZsZXgganVzdGlmeS1hcm91bmQgdGV4dC14bCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9InRleHQtY2VudGVyIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9ImZvbnQtYm9sZCB0ZXh0LXNsYXRlLTkwMCI+e3Byb2YxID8gYCR7cHJvZjEuTk9NfSAke3Byb2YxLlBSRU5PTX1gIDogJ05vbiBhc3NpZ27DqSd9PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJ0ZXh0LWJhc2UgaXRhbGljIHRleHQtc2xhdGUtNTAwIj57cHJvZjE/Lk1BVElFUkV9PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9InRleHQtY2VudGVyIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9ImZvbnQtYm9sZCB0ZXh0LXNsYXRlLTkwMCI+e3Byb2YyID8gYCR7cHJvZjIuTk9NfSAke3Byb2YyLlBSRU5PTX1gIDogJ05vbiBhc3NpZ27DqSd9PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJ0ZXh0LWJhc2UgaXRhbGljIHRleHQtc2xhdGUtNTAwIj57cHJvZjI/Lk1BVElFUkV9PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KX0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt2aWV3TW9kZSA9PT0gJ0pVUklFUycgJiYgKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJ3LWZ1bGwgbWF4LXctWzIxMG1tXSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHthY3RpdmVKdXJpZXMubWFwKChqdXJ5LCBpZHgpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHN0dWRlbnRzID0gY2FsY3VsYXRlU3R1ZGVudFRpbWVzKGp1cnkuc3R1ZGVudHMsIHN0YXJ0VGltZSwgZXhhbVR5cGUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY2h1bmtzID0gY2h1bmtBcnJheShzdHVkZW50cywgMTgpOyAvLyBQYWdpbmF0aW9uIGZvciBsb25nIGxpc3RzCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNodW5rcy5tYXAoKGNodW5rLCBjaHVua0lkeCkgPT4gKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYga2V5PXtgJHtqdXJ5LmlkfS0ke2NodW5rSWR4fWB9IGNsYXNzTmFtZT0iQTQtc2hlZXQiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iZmxleCBqdXN0aWZ5LWJldHdlZW4gaXRlbXMtY2VudGVyIGJvcmRlci1iLTIgYm9yZGVyLWJsYWNrIHBiLTQgbWItNCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9ImZsZXggaXRlbXMtY2VudGVyIGdhcC00Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3NjaG9vbExvZ28gJiYgPGRpdiBjbGFzc05hbWU9InctMjAgaC0yMCBmbGV4LXNocmluay0wIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIj48aW1nIHNyYz17c2Nob29sTG9nb30gYWx0PSJMb2dvIiBjbGFzc05hbWU9Im1heC1oLWZ1bGwgbWF4LXctZnVsbCBvYmplY3QtY29udGFpbiIgLz48L2Rpdj59CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDIgY2xhc3NOYW1lPSJ0ZXh0LTJ4bCBmb250LWJvbGQgdXBwZXJjYXNlIj5QbGFubmluZyBKdXJ5IHtqdXJ5LmlkfSAtIHtleGFtTGFiZWx9PC9oMj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT0idGV4dC1sZyB0ZXh0LWdyYXktNjAwIGZvbnQtc2VtaWJvbGQiPntleGFtRGF0ZX0gLSBTYWxsZSB7anVyeS5yb29tfSB7Y2h1bmtJZHggPiAwID8gYChQYWdlICR7Y2h1bmtJZHggKyAxfSlgIDogJyd9PC9wPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0YWJsZSBjbGFzc05hbWU9InctZnVsbCBib3JkZXItY29sbGFwc2UgYm9yZGVyIGJvcmRlci1ibGFjayB0ZXh0LXNtIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGhlYWQ+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ciBjbGFzc05hbWU9ImJnLWdyYXktMTAwIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aCBjbGFzc05hbWU9ImJvcmRlciBib3JkZXItYmxhY2sgcC0yIHctMjQiPkhvcmFpcmU8L3RoPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRoIGNsYXNzTmFtZT0iYm9yZGVyIGJvcmRlci1ibGFjayBwLTIiPkNhbmRpZGF0PC90aD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aCBjbGFzc05hbWU9ImJvcmRlciBib3JkZXItYmxhY2sgcC0yIHctMjAiPkNsYXNzZTwvdGg+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGggY2xhc3NOYW1lPSJib3JkZXIgYm9yZGVyLWJsYWNrIHAtMiI+e2V4YW1UeXBlID09PSAnR08nID8gJ0VEUyAvIFRpZXJzLVRlbXBzJyA6ICdEw6l0YWlscyd9PC90aD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90cj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RoZWFkPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0Ym9keT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2NodW5rLm1hcCgocywgaSkgPT4gKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRyIGtleT17aX0gY2xhc3NOYW1lPXtzLmlzQnJlYWsgPyAiYmctZ3JheS0xMDAiIDogIiJ9PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBjbGFzc05hbWU9ImJvcmRlciBib3JkZXItYmxhY2sgcC0zIHRleHQtY2VudGVyIGZvbnQtYm9sZCI+e3MudGltZVN0YXJ0fTwvdGQ+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3MuaXNCcmVhayA/ICgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIGNvbFNwYW49IjMiIGNsYXNzTmFtZT0iYm9yZGVyIGJvcmRlci1ibGFjayBwLTMgdGV4dC1jZW50ZXIgZm9udC1ib2xkIHRleHQtZ3JheS01MDAgaXRhbGljIj5QQVVTRSAoe3MuZHVyYXRpb259IG1pbik8L3RkPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgOiAoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDw+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQgY2xhc3NOYW1lPSJib3JkZXIgYm9yZGVyLWJsYWNrIHAtMyBmb250LWJvbGQgdXBwZXJjYXNlIj57cy5OT019IHtzLlBSRU5PTX08L3RkPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIGNsYXNzTmFtZT0iYm9yZGVyIGJvcmRlci1ibGFjayBwLTMgdGV4dC1jZW50ZXIiPntzLkRJVn08L3RkPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIGNsYXNzTmFtZT0iYm9yZGVyIGJvcmRlci1ibGFjayBwLTMgdGV4dC14cyI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3MuVFQgJiYgKHMuVFQgPT09ICdPVUknIHx8IHMuVFQgPT09IHRydWUgfHwgbm9ybWFsaXplVGV4dChzLlRUKS5pbmNsdWRlcygnVElFUlMnKSkgJiYgPHNwYW4gY2xhc3NOYW1lPSJmb250LWJvbGQgdGV4dC1yZWQtNjAwIGJsb2NrIj7imqDvuI8gVElFUlMgVEVNUFM8L3NwYW4+fQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtzLlBDICYmIChzLlBDID09PSAnT1VJJyB8fCBzLlBDID09PSB0cnVlKSAmJiA8c3BhbiBjbGFzc05hbWU9ImZvbnQtYm9sZCB0ZXh0LWJsdWUtNjAwIGJsb2NrIG10LTEgZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTEiPjxMYXB0b3Agc2l6ZT17MTB9Lz4gT1JESU5BVEVVUjwvc3Bhbj59CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2V4YW1UeXBlID09PSAnR08nICYmIHMuRURTICYmIDxzcGFuIGNsYXNzTmFtZT0idGV4dC1yb3NlLTcwMCBmb250LWJvbGQgYmxvY2siPntzLkVEU308L3NwYW4+fQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtzLkFFU0hfTk9NICYmIDxzcGFuIGNsYXNzTmFtZT0idGV4dC1wdXJwbGUtNjAwIGZvbnQtYm9sZCBibG9jayBtdC0xIGZsZXggaXRlbXMtY2VudGVyIGdhcC0xIj48SGFuZEhlYXJ0IHNpemU9ezEwfS8+IEFFU0ggOiB7cy5BRVNIX05PTX08L3NwYW4+fQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC8+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdHI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkpfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGJvZHk+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGFibGU+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSl9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICApfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt2aWV3TW9kZSA9PT0gJ05PVEFUSU9OJyAmJiAoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9InctZnVsbCBtYXgtdy1bMjEwbW1dIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9Im5vLXByaW50IG1iLTQgcC00IGJnLXllbGxvdy0xMDAgdGV4dC15ZWxsb3ctODAwIHJvdW5kZWQgZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTIiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENsaXBib2FyZExpc3Qgc2l6ZT17MjB9IC8+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzdHJvbmc+RmV1aWxsZXMgZGUgTm90YXRpb24gQ29sbGVjdGl2ZXM8L3N0cm9uZz48YnIvPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFVuZSBsaXN0ZSByw6ljYXBpdHVsYXRpdmUgcGFyIGp1cnkgcG91ciBsYSBzYWlzaWUgZGVzIG5vdGVzLgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7YWN0aXZlSnVyaWVzLm1hcCgoanVyeSkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcHJvZjEgPSBwcm9mcy5maW5kKHAgPT4gcC5pZCA9PT0ganVyeS5wcm9mMUlkKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHByb2YyID0gIWlzRnJlbmNoT3JhbCA/IHByb2ZzLmZpbmQocCA9PiBwLmlkID09PSBqdXJ5LnByb2YySWQpIDogbnVsbDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHN0dWRlbnRzV2l0aFRpbWUgPSBjYWxjdWxhdGVTdHVkZW50VGltZXMoanVyeS5zdHVkZW50cywgc3RhcnRUaW1lLCBleGFtVHlwZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjaHVua3MgPSBjaHVua0FycmF5KHN0dWRlbnRzV2l0aFRpbWUsIDE2KTsgLy8gT1BUSU1JWkVEOiBJbmNyZWFzZWQgZnJvbSAxMiB0byAxNgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgbWF4U2NvcmUgPSAyMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChleGFtVHlwZSA9PT0gJ0NGRycpIG1heFNjb3JlID0gMTYwOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjaHVua3MubWFwKChjaHVuaywgY2h1bmtJZHgpID0+ICgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGtleT17YCR7anVyeS5pZH0tJHtjaHVua0lkeH1gfSBjbGFzc05hbWU9IkE0LXNoZWV0Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9ImZsZXgganVzdGlmeS1iZXR3ZWVuIGl0ZW1zLXN0YXJ0IGJvcmRlci1iLTIgYm9yZGVyLWJsYWNrIHBiLTIgbWItMiI+IHsvKiBPUFRJTUlaRUQ6IFJlZHVjZWQgcGFkZGluZy9tYXJnaW4gKi99CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0idy0xLzMiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7c2Nob29sTG9nbyAmJiA8aW1nIHNyYz17c2Nob29sTG9nb30gYWx0PSJMb2dvIiBjbGFzc05hbWU9ImgtMTYgb2JqZWN0LWNvbnRhaW4iIC8+fQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ibXQtMiB0ZXh0LXhzIHVwcGVyY2FzZSBmb250LWJvbGQgdGV4dC1ncmF5LTUwMCI+e3NjaG9vbE5hbWV9PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJ3LTEvMyB0ZXh0LWNlbnRlciI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT0idGV4dC0yeGwgZm9udC1ibGFjayB1cHBlcmNhc2UgdGV4dC1zbGF0ZS05MDAiPlJFTEVWw4kgREUgTk9URVM8L2gxPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJ0ZXh0LXhsIGZvbnQtYm9sZCB0ZXh0LWJsdWUtODAwIj57ZXhhbUxhYmVsfTwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJ0ZXh0LXNtIGZvbnQtYm9sZCBtdC0xIj5KVVJZIHtqdXJ5LmlkfSAtIFNhbGxlIHtqdXJ5LnJvb219IHtjaHVua0lkeCA+IDAgPyBgKFBhZ2UgJHtjaHVua0lkeCsxfSlgIDogJyd9PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJ3LTEvMyB0ZXh0LXJpZ2h0IHRleHQtc20iPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJmb250LWJvbGQgdXBwZXJjYXNlIj5TZXNzaW9uIHtzZXNzaW9uWWVhcn08L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PntleGFtRGF0ZX08L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ibXQtMiBmb250LWJvbGQiPkV4YW1pbmF0ZXVycyA6PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj57cHJvZjEgPyBgJHtwcm9mMS5OT019ICR7cHJvZjEuUFJFTk9NfWAgOiAnLi4uJ308L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2Pntwcm9mMiA/IGAke3Byb2YyLk5PTX0gJHtwcm9mMi5QUkVOT019YCA6ICcuLi4nfTwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRhYmxlIGNsYXNzTmFtZT0idy1mdWxsIGJvcmRlci1jb2xsYXBzZSBib3JkZXIgYm9yZGVyLWJsYWNrIHRleHQtc20gbWItMiI+IHsvKiBPUFRJTUlaRUQgbWFyZ2luICovfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRoZWFkPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ciBjbGFzc05hbWU9ImJnLWdyYXktMTAwIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRoIGNsYXNzTmFtZT0iYm9yZGVyIGJvcmRlci1ibGFjayBwLTEuNSB3LTE2IHRleHQtY2VudGVyIj5IZXVyZTwvdGg+IHsvKiBPUFRJTUlaRUQgcGFkZGluZyAqL30KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRoIGNsYXNzTmFtZT0iYm9yZGVyIGJvcmRlci1ibGFjayBwLTEuNSI+Q2FuZGlkYXQ8L3RoPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGggY2xhc3NOYW1lPSJib3JkZXIgYm9yZGVyLWJsYWNrIHAtMS41IHctMTYgdGV4dC1jZW50ZXIiPkNsYXNzZTwvdGg+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aCBjbGFzc05hbWU9ImJvcmRlciBib3JkZXItYmxhY2sgcC0xLjUiPntleGFtVHlwZSA9PT0gJ0dPJyA/ICdTdWpldCAvIEVEUycgOiAnVGjDqG1lJ308L3RoPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGggY2xhc3NOYW1lPSJib3JkZXIgYm9yZGVyLWJsYWNrIHAtMS41IHctMzIgdGV4dC1jZW50ZXIgdGV4dC1sZyI+Tk9URSAvIHttYXhTY29yZX08L3RoPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGggY2xhc3NOYW1lPSJib3JkZXIgYm9yZGVyLWJsYWNrIHAtMS41IHctNDggdGV4dC1jZW50ZXIiPk9ic2VydmF0aW9uczwvdGg+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90cj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGhlYWQ+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGJvZHk+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2NodW5rLm1hcCgocywgaSkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocy5pc0JyZWFrKSByZXR1cm4gKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRyIGtleT17aX0gY2xhc3NOYW1lPSJiZy1ncmF5LTUwIGgtMTAiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBjbGFzc05hbWU9ImJvcmRlciBib3JkZXItYmxhY2sgcC0xLjUgdGV4dC1jZW50ZXIgdGV4dC1ncmF5LTQwMCI+e3MudGltZVN0YXJ0fTwvdGQ+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIGNvbFNwYW49IjUiIGNsYXNzTmFtZT0iYm9yZGVyIGJvcmRlci1ibGFjayBwLTEuNSB0ZXh0LWNlbnRlciB0ZXh0LWdyYXktNDAwIGl0YWxpYyI+UEFVU0U8L3RkPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90cj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ciBrZXk9e2l9IGNsYXNzTmFtZT0iaC0xMCI+IHsvKiBGaXhlZCBoZWlnaHQgZm9yIGNvbnNpc3RlbmN5ICovfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBjbGFzc05hbWU9ImJvcmRlciBib3JkZXItYmxhY2sgcC0xLjUgdGV4dC1jZW50ZXIgZm9udC1ib2xkIj57cy50aW1lU3RhcnR9PC90ZD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQgY2xhc3NOYW1lPSJib3JkZXIgYm9yZGVyLWJsYWNrIHAtMS41IGZvbnQtYm9sZCB1cHBlcmNhc2UiPntzLk5PTX0ge3MuUFJFTk9NfTwvdGQ+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIGNsYXNzTmFtZT0iYm9yZGVyIGJvcmRlci1ibGFjayBwLTEuNSB0ZXh0LWNlbnRlciI+e3MuRElWfTwvdGQ+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIGNsYXNzTmFtZT0iYm9yZGVyIGJvcmRlci1ibGFjayBwLTEuNSB0ZXh0LXhzIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3MuVFQgJiYgPHNwYW4gY2xhc3NOYW1lPSJ0ZXh0LXJlZC02MDAgZm9udC1ib2xkIGJsb2NrIj5USUVSUyBURU1QUzwvc3Bhbj59CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtzLlBDICYmIChzLlBDID09PSAnT1VJJyB8fCBzLlBDID09PSB0cnVlKSAmJiA8c3BhbiBjbGFzc05hbWU9ImZvbnQtYm9sZCB0ZXh0LWJsdWUtNjAwIGJsb2NrIG10LTEgZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTEiPjxMYXB0b3Agc2l6ZT17MTB9Lz4gT1JESU5BVEVVUjwvc3Bhbj59CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtleGFtVHlwZSA9PT0gJ0dPJyA/ICgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT0idGV4dC1yb3NlLTcwMCBmb250LWJvbGQiPntzLkVEU308L3NwYW4+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgOiAoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3Bhbj57cy5QQVJDT1VSU30ge3MuVEhFTUUgJiYgYC0gJHtzLlRIRU1FfWB9PC9zcGFuPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIGNsYXNzTmFtZT0iYm9yZGVyIGJvcmRlci1ibGFjayBwLTEuNSBiZy13aGl0ZSI+PC90ZD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQgY2xhc3NOYW1lPSJib3JkZXIgYm9yZGVyLWJsYWNrIHAtMS41IGJnLXdoaXRlIj48L3RkPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90cj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KX0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGJvZHk+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGFibGU+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ibXQtYXV0byBwdC00IGZsZXgganVzdGlmeS1hcm91bmQgdGV4dC1jZW50ZXIgcGItNCI+IHsvKiBPUFRJTUlaRUQgZm9vdGVyIHNwYWNpbmcgKi99CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJtYi04IHRleHQteHMgZm9udC1ib2xkIHRleHQtZ3JheS01MDAgdXBwZXJjYXNlIj5TaWduYXR1cmUgRXhhbWluYXRldXIgMTwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJ3LTQ4IGJvcmRlci1iIGJvcmRlci1ibGFjayI+PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9Im1iLTggdGV4dC14cyBmb250LWJvbGQgdGV4dC1ncmF5LTUwMCB1cHBlcmNhc2UiPlNpZ25hdHVyZSBFeGFtaW5hdGV1ciAyPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9InctNDggYm9yZGVyLWIgYm9yZGVyLWJsYWNrIj48L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KX0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAge3ZpZXdNb2RlID09PSAnRU1BUkdFTUVOVCcgJiYgKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJ3LWZ1bGwgbWF4LXctWzIxMG1tXSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJuby1wcmludCBtYi00IHAtNCBiZy1ncmVlbi0xMDAgdGV4dC1ncmVlbi04MDAgcm91bmRlZCBmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMiI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Q2hlY2tDaXJjbGUgc2l6ZT17MjB9IC8+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzdHJvbmc+RmV1aWxsZXMgZCfDiW1hcmdlbWVudDwvc3Ryb25nPjxici8+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTGlzdGUgcG91ciBsYSBzaWduYXR1cmUgZGVzIGNhbmRpZGF0cy4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2FjdGl2ZUp1cmllcy5tYXAoKGp1cnkpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHByb2YxID0gcHJvZnMuZmluZChwID0+IHAuaWQgPT09IGp1cnkucHJvZjFJZCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwcm9mMiA9ICFpc0ZyZW5jaE9yYWwgPyBwcm9mcy5maW5kKHAgPT4gcC5pZCA9PT0ganVyeS5wcm9mMklkKSA6IG51bGw7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzdHVkZW50c1dpdGhUaW1lID0gY2FsY3VsYXRlU3R1ZGVudFRpbWVzKGp1cnkuc3R1ZGVudHMsIHN0YXJ0VGltZSwgZXhhbVR5cGUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY2h1bmtzID0gY2h1bmtBcnJheShzdHVkZW50c1dpdGhUaW1lLCAxNCk7IC8vIFBhZ2luYXRpb24KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2h1bmtzLm1hcCgoY2h1bmssIGNodW5rSWR4KSA9PiAoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBrZXk9e2Ake2p1cnkuaWR9LSR7Y2h1bmtJZHh9YH0gY2xhc3NOYW1lPSJBNC1zaGVldCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJmbGV4IGp1c3RpZnktYmV0d2VlbiBpdGVtcy1zdGFydCBib3JkZXItYi0yIGJvcmRlci1ibGFjayBwYi00IG1iLTYiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9InctMS8zIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3NjaG9vbExvZ28gJiYgPGltZyBzcmM9e3NjaG9vbExvZ299IGFsdD0iTG9nbyIgY2xhc3NOYW1lPSJoLTE2IG9iamVjdC1jb250YWluIiAvPn0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9Im10LTIgdGV4dC14cyB1cHBlcmNhc2UgZm9udC1ib2xkIHRleHQtZ3JheS01MDAiPntzY2hvb2xOYW1lfTwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0idy0xLzMgdGV4dC1jZW50ZXIiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMSBjbGFzc05hbWU9InRleHQtMnhsIGZvbnQtYmxhY2sgdXBwZXJjYXNlIHRleHQtc2xhdGUtOTAwIj5GRVVJTExFIEQnw4lNQVJHRU1FTlQ8L2gxPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJ0ZXh0LXhsIGZvbnQtYm9sZCB0ZXh0LWJsdWUtODAwIj57ZXhhbUxhYmVsfTwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJ0ZXh0LXNtIGZvbnQtYm9sZCBtdC0xIj5KVVJZIHtqdXJ5LmlkfSAtIFNhbGxlIHtqdXJ5LnJvb219IHtjaHVua0lkeCA+IDAgPyBgKFBhZ2UgJHtjaHVua0lkeCsxfSlgIDogJyd9PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJ3LTEvMyB0ZXh0LXJpZ2h0IHRleHQtc20iPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJmb250LWJvbGQgdXBwZXJjYXNlIj5TZXNzaW9uIHtzZXNzaW9uWWVhcn08L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PntleGFtRGF0ZX08L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ibXQtMiBmb250LWJvbGQiPkV4YW1pbmF0ZXVycyA6PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj57cHJvZjEgPyBgJHtwcm9mMS5OT019ICR7cHJvZjEuUFJFTk9NfWAgOiAnLi4uJ308L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2Pntwcm9mMiA/IGAke3Byb2YyLk5PTX0gJHtwcm9mMi5QUkVOT019YCA6ICcuLi4nfTwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRhYmxlIGNsYXNzTmFtZT0idy1mdWxsIGJvcmRlci1jb2xsYXBzZSBib3JkZXIgYm9yZGVyLWJsYWNrIHRleHQtc20gbWItNCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGhlYWQ+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRyIGNsYXNzTmFtZT0iYmctZ3JheS0xMDAiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGggY2xhc3NOYW1lPSJib3JkZXIgYm9yZGVyLWJsYWNrIHAtMiB3LTIwIHRleHQtY2VudGVyIj5IZXVyZTwvdGg+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aCBjbGFzc05hbWU9ImJvcmRlciBib3JkZXItYmxhY2sgcC0yIj5DYW5kaWRhdDwvdGg+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aCBjbGFzc05hbWU9ImJvcmRlciBib3JkZXItYmxhY2sgcC0yIHctMjAgdGV4dC1jZW50ZXIiPkNsYXNzZTwvdGg+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aCBjbGFzc05hbWU9ImJvcmRlciBib3JkZXItYmxhY2sgcC0yIHctMTYgdGV4dC1jZW50ZXIiPlAvQTwvdGg+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aCBjbGFzc05hbWU9ImJvcmRlciBib3JkZXItYmxhY2sgcC0yIHctNjQgdGV4dC1jZW50ZXIiPlNpZ25hdHVyZTwvdGg+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90cj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGhlYWQ+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGJvZHk+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2NodW5rLm1hcCgocywgaSkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocy5pc0JyZWFrKSByZXR1cm4gKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRyIGtleT17aX0gY2xhc3NOYW1lPSJiZy1ncmF5LTUwIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQgY2xhc3NOYW1lPSJib3JkZXIgYm9yZGVyLWJsYWNrIHAtMiB0ZXh0LWNlbnRlciB0ZXh0LWdyYXktNDAwIj57cy50aW1lU3RhcnR9PC90ZD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQgY29sU3Bhbj0iNCIgY2xhc3NOYW1lPSJib3JkZXIgYm9yZGVyLWJsYWNrIHAtMiB0ZXh0LWNlbnRlciB0ZXh0LWdyYXktNDAwIGl0YWxpYyI+UEFVU0U8L3RkPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90cj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ciBrZXk9e2l9PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBjbGFzc05hbWU9ImJvcmRlciBib3JkZXItYmxhY2sgcC0zIHRleHQtY2VudGVyIGZvbnQtYm9sZCI+e3MudGltZVN0YXJ0fTwvdGQ+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIGNsYXNzTmFtZT0iYm9yZGVyIGJvcmRlci1ibGFjayBwLTMgZm9udC1ib2xkIHVwcGVyY2FzZSI+e3MuTk9NfSB7cy5QUkVOT019PC90ZD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQgY2xhc3NOYW1lPSJib3JkZXIgYm9yZGVyLWJsYWNrIHAtMyB0ZXh0LWNlbnRlciI+e3MuRElWfTwvdGQ+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIGNsYXNzTmFtZT0iYm9yZGVyIGJvcmRlci1ibGFjayBwLTMgdGV4dC1jZW50ZXIiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RkPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBjbGFzc05hbWU9ImJvcmRlciBib3JkZXItYmxhY2sgcC0zIj48L3RkPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90cj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KX0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGJvZHk+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGFibGU+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ibXQtYXV0byBwdC04IGZsZXgganVzdGlmeS1hcm91bmQgdGV4dC1jZW50ZXIgcGItOCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJtYi0xMiB0ZXh0LXhzIGZvbnQtYm9sZCB0ZXh0LWdyYXktNTAwIHVwcGVyY2FzZSI+U2lnbmF0dXJlIEV4YW1pbmF0ZXVyIDE8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0idy00OCBib3JkZXItYiBib3JkZXItYmxhY2siPjwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJtYi0xMiB0ZXh0LXhzIGZvbnQtYm9sZCB0ZXh0LWdyYXktNTAwIHVwcGVyY2FzZSI+U2lnbmF0dXJlIEV4YW1pbmF0ZXVyIDI8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0idy00OCBib3JkZXItYiBib3JkZXItYmxhY2siPjwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgKX0KICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAge3Nob3dUZW1wbGF0ZUVkaXRvciAmJiAoCiAgICAgICAgICAgICAgICAgICAgICAgIDxUZW1wbGF0ZUVkaXRvciAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vZGU9e3ZpZXdNb2RlfSAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlPXt0ZW1wbGF0ZXNbdmlld01vZGVdfSAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xvc2U9eygpID0+IHNldFNob3dUZW1wbGF0ZUVkaXRvcihmYWxzZSl9IAogICAgICAgICAgICAgICAgICAgICAgICAgICAgb25TYXZlPXtoYW5kbGVTYXZlVGVtcGxhdGV9IAogICAgICAgICAgICAgICAgICAgICAgICAvPgogICAgICAgICAgICAgICAgICAgICl9CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgKTsKICAgICAgICB9OwoKICAgICAgICBjb25zdCBIZWxwVmlldyA9ICgpID0+ICgKICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9Im1heC13LTR4bCBteC1hdXRvIHNwYWNlLXktOCI+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iYmctd2hpdGUgcm91bmRlZC0yeGwgc2hhZG93LXNtIGJvcmRlciBib3JkZXItc2xhdGUtMjAwIHAtOCI+CiAgICAgICAgICAgICAgICAgICAgPGgyIGNsYXNzTmFtZT0idGV4dC0yeGwgZm9udC1ibGFjayB0ZXh0LXNsYXRlLTgwMCBtYi02IGZsZXggaXRlbXMtY2VudGVyIGdhcC0zIj4KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9ImJnLXRlYWwtMTAwIHAtMiByb3VuZGVkLWxnIHRleHQtdGVhbC03MDAiPjxIZWxwQ2lyY2xlIHNpemU9ezI4fSAvPjwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICBHdWlkZSBkJ1V0aWxpc2F0aW9uIFJhcGlkZQogICAgICAgICAgICAgICAgICAgIDwvaDI+CgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJncmlkIGdyaWQtY29scy0xIG1kOmdyaWQtY29scy0yIGdhcC04IG1iLTgiPgogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGgzIGNsYXNzTmFtZT0idGV4dC1sZyBmb250LWJvbGQgdGV4dC1zbGF0ZS03MDAgbWItNCBmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMiI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPSJiZy1zbGF0ZS04MDAgdGV4dC13aGl0ZSB3LTYgaC02IHJvdW5kZWQtZnVsbCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciB0ZXh0LXhzIj4xPC9zcGFuPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIENvbmZpZ3VyYXRpb24gJiBJbXBvcnQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvaDM+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dWwgY2xhc3NOYW1lPSJzcGFjZS15LTMgdGV4dC1zbSB0ZXh0LXNsYXRlLTYwMCBtbC0yIGJvcmRlci1sLTIgYm9yZGVyLXNsYXRlLTEwMCBwbC00Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGk+PHN0cm9uZz5Sw6lnbGV6IGxlcyBwYXJhbcOodHJlczwvc3Ryb25nPiAoaGV1cmUsIGRhdGUsIG5vbWJyZSBkZSBqdXJ5cykgZGFucyBsYSBiYXJyZSBkdSBoYXV0LjwvbGk+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxpPjxzdHJvbmc+SW1wb3J0ZXogdm9zIGRvbm7DqWVzPC9zdHJvbmc+IHZpYSBsZXMgY2FzZXMgQ1NWIChQcm9mcyBldCDDiWzDqHZlcykgb3UgdXRpbGlzZXogbGUgYm91dG9uICJNb2RlIETDqW1vIiBwb3VyIHRlc3Rlci48L2xpPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsaT48ZW0+Q29uc3VsdGV6IGxhIHNlY3Rpb24gY2ktZGVzc291cyBwb3VyIGxlIGZvcm1hdCBkZXMgY29sb25uZXMgQ1NWLjwvZW0+PC9saT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdWw+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMyBjbGFzc05hbWU9InRleHQtbGcgZm9udC1ib2xkIHRleHQtc2xhdGUtNzAwIG1iLTQgZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTIiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT0iYmctc2xhdGUtODAwIHRleHQtd2hpdGUgdy02IGgtNiByb3VuZGVkLWZ1bGwgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgdGV4dC14cyI+Mjwvc3Bhbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDcsOpYXRpb24gZGVzIEp1cnlzCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2gzPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHVsIGNsYXNzTmFtZT0ic3BhY2UteS0zIHRleHQtc20gdGV4dC1zbGF0ZS02MDAgbWwtMiBib3JkZXItbC0yIGJvcmRlci1zbGF0ZS0xMDAgcGwtNCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxpPkRhbnMgY2hhcXVlIGNvbG9ubmUgZGUgSnVyeSwgY2xpcXVleiBzdXIgPEVkaXQgc2l6ZT17MTJ9IGNsYXNzTmFtZT0iaW5saW5lIi8+IHBvdXIgPHN0cm9uZz5hc3NpZ25lciBsZXMgZXhhbWluYXRldXJzPC9zdHJvbmc+IGV0IGxhIHNhbGxlLjwvbGk+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxpPkxhIHLDqXBhcnRpdGlvbiBhdXRvbWF0aXF1ZSAoYm91dG9uIDxaYXAgc2l6ZT17MTJ9IGNsYXNzTmFtZT0iaW5saW5lIi8+KSB0ZW50ZSBkJ8OpcXVpbGlicmVyIGxlcyBqdXJ5cyBlbiByZXNwZWN0YW50IGxlcyBtYXRpw6hyZXMgc2kgcG9zc2libGUuPC9saT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdWw+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMyBjbGFzc05hbWU9InRleHQtbGcgZm9udC1ib2xkIHRleHQtc2xhdGUtNzAwIG1iLTQgZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTIiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT0iYmctc2xhdGUtODAwIHRleHQtd2hpdGUgdy02IGgtNiByb3VuZGVkLWZ1bGwgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgdGV4dC14cyI+Mzwvc3Bhbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBHZXN0aW9uIGR1IFBsYW5uaW5nCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2gzPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHVsIGNsYXNzTmFtZT0ic3BhY2UteS0zIHRleHQtc20gdGV4dC1zbGF0ZS02MDAgbWwtMiBib3JkZXItbC0yIGJvcmRlci1zbGF0ZS0xMDAgcGwtNCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxpPjxzdHJvbmc+R2xpc3Nlci1Ew6lwb3NlciA6PC9zdHJvbmc+IETDqXBsYWNleiBsZXMgw6lsw6h2ZXMgZGUgbGEgbGlzdGUgZCdhdHRlbnRlIHZlcnMgdW4ganVyeS48L2xpPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsaT48c3Ryb25nPlLDqW9yZ2FuaXNlciA6PC9zdHJvbmc+IENoYW5nZXogbCdvcmRyZSBkZSBwYXNzYWdlIGF2ZWMgbGVzIGZsw6hjaGVzIGhhdXQvYmFzIHN1ciBsYSBjYXJ0ZSDDqWzDqHZlLjwvbGk+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxpPjxzdHJvbmc+UGF1c2VzIDo8L3N0cm9uZz4gQWpvdXRleiBkZXMgcGF1c2VzIHZpYSBsYSBiYXJyZSBkJ291dGlscyAoUGF1c2UgR8OpbsOpcmFsZSkgb3UgZW4gZ2xpc3NhbnQgbGUgYmxvYyAiUEFVU0UiLjwvbGk+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxpPjxzdHJvbmc+SG9yYWlyZXMgOjwvc3Ryb25nPiBJbHMgc29udCBjYWxjdWzDqXMgYXV0b21hdGlxdWVtZW50IGVuIGZvbmN0aW9uIGRlIGxhIGR1csOpZSBkZSBjaGFxdWUgb3JhbC48L2xpPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC91bD4KICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CgogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGgzIGNsYXNzTmFtZT0idGV4dC1sZyBmb250LWJvbGQgdGV4dC1zbGF0ZS03MDAgbWItNCBmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMiI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPSJiZy1zbGF0ZS04MDAgdGV4dC13aGl0ZSB3LTYgaC02IHJvdW5kZWQtZnVsbCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciB0ZXh0LXhzIj40PC9zcGFuPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEZpbmFsaXNhdGlvbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9oMz4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx1bCBjbGFzc05hbWU9InNwYWNlLXktMyB0ZXh0LXNtIHRleHQtc2xhdGUtNjAwIG1sLTIgYm9yZGVyLWwtMiBib3JkZXItc2xhdGUtMTAwIHBsLTQiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsaT48c3Ryb25nPk9uZ2xldCBQaWxvdGFnZSA6PC9zdHJvbmc+IFbDqXJpZmlleiBsYSBjaGFyZ2UgZGUgdHJhdmFpbCBldCBsJ2hldXJlIGRlIGZpbiBkZSBjaGFxdWUganVyeS48L2xpPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsaT48c3Ryb25nPkNvbnZvY2F0aW9ucyA6PC9zdHJvbmc+IENsaXF1ZXogc3VyICJDb252b2NhdGlvbnMiIHBvdXIgZ8OpbsOpcmVyIGxlcyBQREYgKMOJbMOodmVzLCBQcm9mcywgQUVTSCwgUFYsIMOJbWFyZ2VtZW50KS48L2xpPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsaT48c3Ryb25nPlBlcnNvbm5hbGlzYXRpb24gOjwvc3Ryb25nPiDDiWRpdGV6IGxlIHRleHRlIGRlcyBjb252b2NhdGlvbnMgdmlhIGxlIGJvdXRvbiAiUGVyc29ubmFsaXNlciIgZGFucyBsZSBtb2RlIGltcHJlc3Npb24uPC9saT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGk+PHN0cm9uZz5TYXV2ZWdhcmRlIDo8L3N0cm9uZz4gVm9zIGRvbm7DqWVzIHNvbnQgZW5yZWdpc3Ryw6llcyBhdXRvbWF0aXF1ZW1lbnQsIG1haXMgcGVuc2V6IMOgIHV0aWxpc2VyIGxlIGJvdXRvbiAiU2F1dmVnYXJkZXIiIHBvdXIgdMOpbMOpY2hhcmdlciBsZSBmaWNoaWVyIEpTT04gZGUgc8OpY3VyaXTDqS48L2xpPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC91bD4KICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJiZy1zbGF0ZS01MCBwLTYgcm91bmRlZC14bCBib3JkZXIgYm9yZGVyLXNsYXRlLTIwMCI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxoMyBjbGFzc05hbWU9InRleHQtbGcgZm9udC1ib2xkIHRleHQtc2xhdGUtODAwIG1iLTQgZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTIgYm9yZGVyLWIgYm9yZGVyLXNsYXRlLTIwMCBwYi0yIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxGaWxlVGV4dCBzaXplPXsyMH0gY2xhc3NOYW1lPSJ0ZXh0LXNsYXRlLTUwMCIvPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgU3RydWN0dXJlIGRlcyBmaWNoaWVycyBDU1YgKFPDqXBhcmF0ZXVyIHBvaW50LXZpcmd1bGUpCiAgICAgICAgICAgICAgICAgICAgICAgIDwvaDM+CiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJncmlkIGdyaWQtY29scy0xIG1kOmdyaWQtY29scy0yIGdhcC02IHRleHQtc20iPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9ImJnLXdoaXRlIHAtNCByb3VuZGVkLWxnIGJvcmRlciBib3JkZXItaW5kaWdvLTEwMCBzaGFkb3ctc20iPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoNCBjbGFzc05hbWU9ImZvbnQtYm9sZCB0ZXh0LWluZGlnby03MDAgbWItMiBmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMiI+PFVzZXJzIHNpemU9ezE2fS8+IFByb2Zlc3NldXJzIChDb21tdW4pPC9oND4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Y29kZSBjbGFzc05hbWU9ImJsb2NrIGJnLXNsYXRlLTEwMCBwLTIgcm91bmRlZCB0ZXh0LXNsYXRlLTcwMCBmb250LW1vbm8gdGV4dC14cyBtYi0yIGJvcmRlciBib3JkZXItc2xhdGUtMjAwIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTk9NOyBQUkVOT007IENJVjsgTUFUSUVSRQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvY29kZT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dWwgY2xhc3NOYW1lPSJ0ZXh0LXhzIHRleHQtc2xhdGUtNTAwIGxpc3QtZGlzYyBtbC00IHNwYWNlLXktMSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsaT48c3Ryb25nPkNJViA6PC9zdHJvbmc+IE0uIG91IE1tZTwvbGk+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsaT48c3Ryb25nPk1BVElFUkUgOjwvc3Ryb25nPiBDcnVjaWFsZSBwb3VyIGxhIGNvbXBhdGliaWxpdMOpIChleDogTUFUSFMsIEhJU1RPSVJFLCBBTkdMQUlTLi4uKTwvbGk+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC91bD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iYmctd2hpdGUgcC00IHJvdW5kZWQtbGcgYm9yZGVyIGJvcmRlci1ibHVlLTEwMCBzaGFkb3ctc20iPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoNCBjbGFzc05hbWU9ImZvbnQtYm9sZCB0ZXh0LWJsdWUtNzAwIG1iLTIgZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTIiPjxCb29rT3BlbiBzaXplPXsxNn0vPiDDiWzDqHZlcyBETkI8L2g0PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxjb2RlIGNsYXNzTmFtZT0iYmxvY2sgYmctc2xhdGUtMTAwIHAtMiByb3VuZGVkIHRleHQtc2xhdGUtNzAwIGZvbnQtbW9ubyB0ZXh0LXhzIG1iLTIgYm9yZGVyIGJvcmRlci1zbGF0ZS0yMDAiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBOT007IFBSRU5PTTsgRElWOyBUVDsgR1JPVVBFOyBQQVJDT1VSUzsgVEhFTUU7IExBTkdVRTsgQUVTSF9OT00KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2NvZGU+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHVsIGNsYXNzTmFtZT0idGV4dC14cyB0ZXh0LXNsYXRlLTUwMCBsaXN0LWRpc2MgbWwtNCBzcGFjZS15LTEiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGk+PHN0cm9uZz5UVCA6PC9zdHJvbmc+IE9VSSBvdSBOT04gKFRpZXJzLXRlbXBzKTwvbGk+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsaT48c3Ryb25nPkdST1VQRSA6PC9zdHJvbmc+IElkZW50aWZpYW50IHBvdXIgbGllciBkZXMgw6lsw6h2ZXMgKGV4OiBHMSk8L2xpPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGk+PHN0cm9uZz5QQVJDT1VSUyA6PC9zdHJvbmc+IEFWRU5JUiwgQ0lUT1lFTiwgUEVBQywgU0FOVEU8L2xpPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdWw+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iYmctd2hpdGUgcC00IHJvdW5kZWQtbGcgYm9yZGVyIGJvcmRlci1lbWVyYWxkLTEwMCBzaGFkb3ctc20iPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoNCBjbGFzc05hbWU9ImZvbnQtYm9sZCB0ZXh0LWVtZXJhbGQtNzAwIG1iLTIgZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTIiPjxBd2FyZCBzaXplPXsxNn0vPiDDiWzDqHZlcyBDRkc8L2g0PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxjb2RlIGNsYXNzTmFtZT0iYmxvY2sgYmctc2xhdGUtMTAwIHAtMiByb3VuZGVkIHRleHQtc2xhdGUtNzAwIGZvbnQtbW9ubyB0ZXh0LXhzIG1iLTIgYm9yZGVyIGJvcmRlci1zbGF0ZS0yMDAiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBOT007IFBSRU5PTTsgRElWOyBUVDsgQUVTSF9OT00KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2NvZGU+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPSJ0ZXh0LXhzIHRleHQtc2xhdGUtNTAwIGl0YWxpYyBtdC0yIj5Gb3JtYXQgc2ltcGxpZmnDqS4gUGFzIGRlIGdyb3VwZXMgcG91ciBsZSBDRkcuPC9wPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9ImJnLXdoaXRlIHAtNCByb3VuZGVkLWxnIGJvcmRlciBib3JkZXItcm9zZS0xMDAgc2hhZG93LXNtIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDQgY2xhc3NOYW1lPSJmb250LWJvbGQgdGV4dC1yb3NlLTcwMCBtYi0yIGZsZXggaXRlbXMtY2VudGVyIGdhcC0yIj48TWljIHNpemU9ezE2fS8+IMOJbMOodmVzIEdyYW5kIE9yYWw8L2g0PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxjb2RlIGNsYXNzTmFtZT0iYmxvY2sgYmctc2xhdGUtMTAwIHAtMiByb3VuZGVkIHRleHQtc2xhdGUtNzAwIGZvbnQtbW9ubyB0ZXh0LXhzIG1iLTIgYm9yZGVyIGJvcmRlci1zbGF0ZS0yMDAiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBOT007IFBSRU5PTTsgRElWOyBUVDsgRURTOyBBRVNIX05PTQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvY29kZT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dWwgY2xhc3NOYW1lPSJ0ZXh0LXhzIHRleHQtc2xhdGUtNTAwIGxpc3QtZGlzYyBtbC00IHNwYWNlLXktMSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsaT48c3Ryb25nPkVEUyA6PC9zdHJvbmc+IEVuc2VpZ25lbWVudCBkZSBTcMOpY2lhbGl0w6kgKGV4OiBNQVRIw4lNQVRJUVVFUywgSEdHU1AuLi4pPC9saT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxpPlBldXQgw6p0cmUgZMOpZmluaSBtYW51ZWxsZW1lbnQgZGFucyBsJ2FwcGxpIHNpIGFic2VudCBkdSBDU1YuPC9saT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3VsPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgPC9kaXY+CgogICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9ImdyaWQgZ3JpZC1jb2xzLTEgbWQ6Z3JpZC1jb2xzLTMgZ2FwLTYiPgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJiZy1ibHVlLTUwIHAtNiByb3VuZGVkLXhsIGJvcmRlciBib3JkZXItYmx1ZS0xMDAiPgogICAgICAgICAgICAgICAgICAgICAgICA8aDQgY2xhc3NOYW1lPSJmb250LWJvbGQgdGV4dC1ibHVlLTgwMCBtYi0yIGZsZXggaXRlbXMtY2VudGVyIGdhcC0yIj48Qm9va09wZW4gc2l6ZT17MTh9Lz4gU3DDqWNpZmljaXTDqXMgRE5CPC9oND4KICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPSJ0ZXh0LXNtIHRleHQtYmx1ZS03MDAiPkfDqHJlIGxlcyBvcmF1eCBpbmRpdmlkdWVscyBldCBjb2xsZWN0aWZzLiBJbmRpcXVlIGxhIGNvbXBhdGliaWxpdMOpIGVudHJlIGxlIHBhcmNvdXJzIGRlIGwnw6lsw6h2ZSBldCBsYSBtYXRpw6hyZSBkdSBwcm9mLjwvcD4KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iYmctZW1lcmFsZC01MCBwLTYgcm91bmRlZC14bCBib3JkZXIgYm9yZGVyLWVtZXJhbGQtMTAwIj4KICAgICAgICAgICAgICAgICAgICAgICAgPGg0IGNsYXNzTmFtZT0iZm9udC1ib2xkIHRleHQtZW1lcmFsZC04MDAgbWItMiBmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMiI+PEF3YXJkIHNpemU9ezE4fS8+IFNww6ljaWZpY2l0w6lzIENGRzwvaDQ+CiAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT0idGV4dC1zbSB0ZXh0LWVtZXJhbGQtNzAwIj5PcmF1eCBkZSAyMCBtaW51dGVzLiBHZXN0aW9uIHNpbXBsaWZpw6llIHNhbnMgZ3JvdXBlcy4gTWFqb3JhdGlvbiBhdXRvbWF0aXF1ZSBkdSB0ZW1wcyBwb3VyIGxlcyBUaWVycy1UZW1wcy48L3A+CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9ImJnLXJvc2UtNTAgcC02IHJvdW5kZWQteGwgYm9yZGVyIGJvcmRlci1yb3NlLTEwMCI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxoNCBjbGFzc05hbWU9ImZvbnQtYm9sZCB0ZXh0LXJvc2UtODAwIG1iLTIgZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTIiPjxNaWMgc2l6ZT17MTh9Lz4gR3JhbmQgT3JhbDwvaDQ+CiAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT0idGV4dC1zbSB0ZXh0LXJvc2UtNzAwIj5HZXN0aW9uIGRlcyBFbnNlaWduZW1lbnRzIGRlIFNww6ljaWFsaXTDqSAoRURTKS4gVsOpcmlmaWNhdGlvbiBkZSBsYSBjb21wYXRpYmlsaXTDqSBwcm9mL0VEUy4gQ2FsY3VsIGRlcyB0ZW1wcyBkZSBwcsOpcGFyYXRpb24uPC9wPgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICk7CgogICAgICAgIAogICAgICAgIGNvbnN0IEFkbWluVmlldyA9ICh7IG9uT3Blbk5vdGVzLCBvbk9wZW5FbWFyZ2VtZW50IH0pID0+ICgKICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9InNwYWNlLXktNiI+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iYmctd2hpdGUgcC02IHJvdW5kZWQtMnhsIHNoYWRvdy1zbSBib3JkZXIgYm9yZGVyLXNsYXRlLTIwMC82MCI+CiAgICAgICAgICAgICAgICAgICAgPGgyIGNsYXNzTmFtZT0idGV4dC14bCBmb250LWV4dHJhYm9sZCB0ZXh0LXNsYXRlLTkwMCBtYi0yIj5BZG1pbmlzdHJhdGlvbjwvaDI+CiAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPSJ0ZXh0LXNtIHRleHQtc2xhdGUtNjAwIj5BY2PDqHMgcmFwaWRlIGF1eCBkb2N1bWVudHMgZCdhZG1pbmlzdHJhdGlvbiAobm90ZXMgZXQgw6ltYXJnZW1lbnQpLjwvcD4KICAgICAgICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJncmlkIG1kOmdyaWQtY29scy0yIGdhcC02Ij4KICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIG9uQ2xpY2s9e29uT3Blbk5vdGVzfSBjbGFzc05hbWU9InRleHQtbGVmdCBiZy13aGl0ZSBwLTYgcm91bmRlZC0yeGwgc2hhZG93LXNtIGJvcmRlciBib3JkZXItc2xhdGUtMjAwLzYwIGhvdmVyOnNoYWRvdy1tZCB0cmFuc2l0aW9uIj4KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9ImZsZXggaXRlbXMtY2VudGVyIGdhcC0zIG1iLTIiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPENsaXBib2FyZExpc3QgY2xhc3NOYW1lPSJ0ZXh0LXNsYXRlLTkwMCIgc2l6ZT17MjJ9IC8+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iZm9udC1leHRyYWJvbGQgdGV4dC1zbGF0ZS05MDAiPkZldWlsbGVzIGRlIG5vdGVzPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0idGV4dC1zbSB0ZXh0LXNsYXRlLTYwMCI+R8OpbsOpcmVyIGV0IGltcHJpbWVyIGxlcyBmZXVpbGxlcyBkZSBub3RlcyBwYXIganVyeS48L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj4KCiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBvbkNsaWNrPXtvbk9wZW5FbWFyZ2VtZW50fSBjbGFzc05hbWU9InRleHQtbGVmdCBiZy13aGl0ZSBwLTYgcm91bmRlZC0yeGwgc2hhZG93LXNtIGJvcmRlciBib3JkZXItc2xhdGUtMjAwLzYwIGhvdmVyOnNoYWRvdy1tZCB0cmFuc2l0aW9uIj4KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9ImZsZXggaXRlbXMtY2VudGVyIGdhcC0zIG1iLTIiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPENoZWNrQ2lyY2xlIGNsYXNzTmFtZT0idGV4dC1zbGF0ZS05MDAiIHNpemU9ezIyfSAvPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9ImZvbnQtZXh0cmFib2xkIHRleHQtc2xhdGUtOTAwIj7DiW1hcmdlbWVudDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9InRleHQtc20gdGV4dC1zbGF0ZS02MDAiPkfDqW7DqXJlciBldCBpbXByaW1lciBsZXMgZmV1aWxsZXMgZCfDqW1hcmdlbWVudC48L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj4KICAgICAgICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJiZy1zbGF0ZS01MCBwLTUgcm91bmRlZC0yeGwgYm9yZGVyIGJvcmRlci1zbGF0ZS0yMDAvNjAiPgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJ0ZXh0LXNtIHRleHQtc2xhdGUtNzAwIj4KICAgICAgICAgICAgICAgICAgICAgICAgQXN0dWNlIDogdm91cyBwb3V2ZXogYXVzc2kgcmV0cm91dmVyIGNlcyBkb2N1bWVudHMgZGFucyBsZSBtZW51IGxhdMOpcmFsIGRlIGxhIGZlbsOqdHJlIGQnaW1wcmVzc2lvbi4KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICApOwoKZnVuY3Rpb24gQXBwKCkgewogICAgICAgICAgICAgY29uc3QgW2FjdGl2ZVRhYiwgc2V0QWN0aXZlVGFiXSA9IHVzZVN0YXRlKCdETkInKTsgCiAgICAgICAgICAgIGNvbnN0IFtwaWxvdGFnZVR5cGUsIHNldFBpbG90YWdlVHlwZV0gPSB1c2VTdGF0ZSgnRE5CJyk7CiAgICAgICAgICAgIGNvbnN0IFtvcmFsVmFyaWFudCwgc2V0T3JhbFZhcmlhbnRdID0gdXNlU3RhdGUoJ0JMQU5DJyk7IC8vIEJMQU5DIHwgRlIgKE9yYWwgZGUgZnJhbsOnYWlzKQogICAgICAgICAgICBjb25zdCBpc0ZyZW5jaE9yYWwgPSBvcmFsVmFyaWFudCA9PT0gJ0ZSJzsKICAgICAgICAgICAgY29uc3QgW3Nob3dQcmludCwgc2V0U2hvd1ByaW50XSA9IHVzZVN0YXRlKGZhbHNlKTsKICAgICAgICAgICAgY29uc3QgW3ByaW50SW5pdGlhbE1vZGUsIHNldFByaW50SW5pdGlhbE1vZGVdID0gdXNlU3RhdGUoJ1NUVURFTlRTJyk7CiAgICAgICAgICAgIGNvbnN0IFtzY2hvb2xOYW1lLCBzZXRTY2hvb2xOYW1lXSA9IHVzZVN0YXRlKCcnKTsKICAgICAgICAgICAgY29uc3QgW3NjaG9vbENpdHksIHNldFNjaG9vbENpdHldID0gdXNlU3RhdGUoJycpOwogICAgICAgICAgICBjb25zdCBbc2Nob29sTG9nbywgc2V0U2Nob29sTG9nb10gPSB1c2VTdGF0ZShudWxsKTsgCiAgICAgICAgICAgIGNvbnN0IFtzY2hvb2xTdGFtcCwgc2V0U2Nob29sU3RhbXBdID0gdXNlU3RhdGUobnVsbCk7IC8vIEFkZGVkIHN0YXRlIGZvciBTdGFtcAogICAgICAgICAgICBjb25zdCBbc2Vzc2lvblllYXIsIHNldFNlc3Npb25ZZWFyXSA9IHVzZVN0YXRlKCcyMDI2Jyk7IAogICAgICAgICAgICAKICAgICAgICAgICAgY29uc3QgW3Nob3dFZHNNb2RhbCwgc2V0U2hvd0Vkc01vZGFsXSA9IHVzZVN0YXRlKGZhbHNlKTsKICAgICAgICAgICAgY29uc3QgW3Nob3dHZW5lcmFsRWRpdE1vZGFsLCBzZXRTaG93R2VuZXJhbEVkaXRNb2RhbF0gPSB1c2VTdGF0ZShmYWxzZSk7CiAgICAgICAgICAgIGNvbnN0IFtjdXJyZW50U3R1ZGVudEZvckVkcywgc2V0Q3VycmVudFN0dWRlbnRGb3JFZHNdID0gdXNlU3RhdGUobnVsbCk7CiAgICAgICAgICAgIGNvbnN0IFtjdXJyZW50U3R1ZGVudEZvckdlbmVyYWxFZGl0LCBzZXRDdXJyZW50U3R1ZGVudEZvckdlbmVyYWxFZGl0XSA9IHVzZVN0YXRlKG51bGwpOwoKICAgICAgICAgICAgY29uc3QgW3Nob3dTYXZlTW9kYWwsIHNldFNob3dTYXZlTW9kYWxdID0gdXNlU3RhdGUoZmFsc2UpOwogICAgICAgICAgICBjb25zdCBbc2F2ZUZpbGVOYW1lLCBzZXRTYXZlRmlsZU5hbWVdID0gdXNlU3RhdGUoJycpOwoKICAgICAgICAgICAgY29uc3QgW3Byb2ZzLCBzZXRQcm9mc10gPSB1c2VTdGF0ZShbXSk7CiAgICAgICAgICAgIGNvbnN0IFtzdHVkZW50c0ROQiwgc2V0U3R1ZGVudHNETkJdID0gdXNlU3RhdGUoW10pOwogICAgICAgICAgICBjb25zdCBbc3R1ZGVudHNDRkcsIHNldFN0dWRlbnRzQ0ZHXSA9IHVzZVN0YXRlKFtdKTsKICAgICAgICAgICAgY29uc3QgW3N0dWRlbnRzR08sIHNldFN0dWRlbnRzR09dID0gdXNlU3RhdGUoW10pOwogICAgICAgICAgICAKICAgICAgICAgICAgY29uc3QgW3Bvb2xETkIsIHNldFBvb2xETkJdID0gdXNlU3RhdGUoW10pOwogICAgICAgICAgICBjb25zdCBbcG9vbENGRywgc2V0UG9vbENGR10gPSB1c2VTdGF0ZShbXSk7CiAgICAgICAgICAgIGNvbnN0IFtwb29sR08sIHNldFBvb2xHT10gPSB1c2VTdGF0ZShbXSk7CgogICAgICAgICAgICBjb25zdCBbc2V0dGluZ3MsIHNldFNldHRpbmdzXSA9IHVzZVN0YXRlKHsKICAgICAgICAgICAgICAgIEROQjogeyBzdGFydFRpbWU6ICcwODowMCcsIGp1cnlDb3VudDogNSwgZGF0ZTogJycsIGV4YW1OYW1lOiAnJyB9LAogICAgICAgICAgICAgICAgQ0ZHOiB7IHN0YXJ0VGltZTogJzA4OjMwJywganVyeUNvdW50OiAyLCBkYXRlOiAnJywgZXhhbU5hbWU6ICcnIH0sCiAgICAgICAgICAgICAgICBHTzogIHsgc3RhcnRUaW1lOiAnMDg6MDAnLCBqdXJ5Q291bnQ6IDUsIGRhdGU6ICcnLCBleGFtTmFtZTogJycgfQogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIC8vIC4uLiAoS2VlcCBleGlzdGluZyB0ZW1wbGF0ZSBzdGF0ZSkKICAgICAgICAgICAgY29uc3QgW3RlbXBsYXRlcywgc2V0VGVtcGxhdGVzXSA9IHVzZVN0YXRlKHsKICAgICAgICAgICAgICAgIFNUVURFTlRTOiB7CiAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICJDT05WT0NBVElPTiIsCiAgICAgICAgICAgICAgICAgICAgaW50cm86ICJNYWRhbWUsIE1vbnNpZXVyLCBjaGVyKGUpIMOpbMOodmUsXG5cblZvdXMgw6p0ZXMgY29udm9xdcOpKGUpIMOgIHBhc3NlciBsJ8OpcHJldXZlICoqe0VQUkVVVkV9KiogcXVpIHNlIGTDqXJvdWxlcmEgbGUgOiIsCiAgICAgICAgICAgICAgICAgICAgaW5zdHJ1Y3Rpb25zOiAiTXVuaXNzZXotdm91cyBvYmxpZ2F0b2lyZW1lbnQgZGUgY2V0dGUgKipjb252b2NhdGlvbioqIGV0IGQndW5lICoqcGnDqGNlIGQnaWRlbnRpdMOpKiouIiwKICAgICAgICAgICAgICAgICAgICBmb290ZXI6ICIiCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgUFJPRlM6IHsKICAgICAgICAgICAgICAgICAgICB0aXRsZTogIk9SRFJFIERFIE1JU1NJT04iLAogICAgICAgICAgICAgICAgICAgIGludHJvOiAie0NJVn0gKip7Tk9NfSoqLFxuXG5Db25mb3Jtw6ltZW50IMOgIGxhIHLDqWdsZW1lbnRhdGlvbiBkZXMgZXhhbWVucywgdm91cyDDqnRlcyBjb252b3F1w6koZSkgcG91ciBwYXJ0aWNpcGVyIGF1eCDDqXByZXV2ZXMgKip7RVBSRVVWRX0gU2Vzc2lvbiB7U0VTU0lPTn0qKiBlbiBxdWFsaXTDqSBkJ2V4YW1pbmF0ZXVyLiIsCiAgICAgICAgICAgICAgICAgICAgaW5zdHJ1Y3Rpb25zOiAiRMOpcm91bGVtZW50IGRlIGxhIG1pc3Npb24gOlxuXG4tICoqSCAtIDE1bWluKiogOiBSw6l1bmlvbiBwcsOpcGFyYXRvaXJlLiBSw6ljdXDDqXJhdGlvbiBkZXMgZG9zc2llcnMgZXQgYm9yZGVyZWF1eC5cbi0gKip7SEVVUkVfREVCVVR9KiogOiBEw6lidXQgZGVzIGludGVycm9nYXRpb25zIG9yYWxlcyBzZWxvbiBsZSBwbGFubmluZyBqb2ludC5cbi0gKipGaW4qKiA6IETDqWxpYsOpcmF0aW9uIGR1IGp1cnkgZXQgcmVtaXNlIGRlcyBkb3NzaWVycyBjb21wbGV0cyBhdSBzZWNyw6l0YXJpYXQgZCdleGFtZW4uIiwKICAgICAgICAgICAgICAgICAgICBmb290ZXI6ICIiCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgQUVTSDogewogICAgICAgICAgICAgICAgICAgIHRpdGxlOiAiT1JEUkUgREUgTUlTU0lPTiBBRVNIIiwKICAgICAgICAgICAgICAgICAgICBpbnRybzogIk0uL01tZSAqKntOT019IHtQUkVOT019KiosXG5cblZvdXMgw6p0ZXMgcHJpw6koZSkgZCdhY2NvbXBhZ25lciBsZXMgw6lsw6h2ZXMgc3VpdmFudHMgbG9ycyBkZXMgw6lwcmV1dmVzICoqe0VQUkVVVkV9IFNlc3Npb24ge1NFU1NJT059KiogcXVpIHNlIGTDqXJvdWxlcm9udCBsZSAqKntEQVRFX0VYQU19KiogOiIsCiAgICAgICAgICAgICAgICAgICAgaW5zdHJ1Y3Rpb25zOiAiUmFwcGVsIGRlcyBjb25zaWduZXMgOlxuXG4tIFByw6lzZW50ZXotdm91cyBkZXZhbnQgbGEgc2FsbGUgZCdleGFtZW4gMTUgbWludXRlcyBhdmFudCBsJ2hvcmFpcmUgaW5kaXF1w6kuXG4tIEFjY29tcGFnbmV6IGwnw6lsw6h2ZSBkdXJhbnQgbGUgdGVtcHMgZGUgcHLDqXBhcmF0aW9uIGV0IGxlIHRlbXBzIGRlIHBhc3NhZ2Ugc2Vsb24gbGVzIG1vZGFsaXTDqXMgZGUgc29uIFBQUy9QQVAuXG4tIFZlaWxsZXogw6AgbGEgY29uZmlkZW50aWFsaXTDqSBkZXMgw6ljaGFuZ2VzLiIsCiAgICAgICAgICAgICAgICAgICAgZm9vdGVyOiAiIgogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIGNvbnN0IFticmVha0NvbmZpZywgc2V0QnJlYWtDb25maWddID0gdXNlU3RhdGUoeyB0aW1lOiAnMTA6MDAnLCBkdXJhdGlvbjogMTUgfSk7CgogICAgICAgICAgICBjb25zdCBbc2VhcmNoVGVybSwgc2V0U2VhcmNoVGVybV0gPSB1c2VTdGF0ZSgiIik7CgogICAgICAgICAgICBjb25zdCBbanVyaWVzLCBzZXRKdXJpZXNdID0gdXNlU3RhdGUoeyBETkI6IHt9LCBDRkc6IHt9LCBHTzoge30gfSk7CiAgICAgICAgICAgIAogICAgICAgICAgICAvLyAuLi4gKE90aGVyIGZ1bmN0aW9ucyBzdGF5IHRoZSBzYW1lLCBJIHdpbGwganVzdCBjYWxsIEFwcCkgLi4uCiAgICAgICAgICAgIGNvbnN0IGdlbmVyYXRlRGVtb0RhdGEgPSAoKSA9PiB7CiAgICAgICAgICAgICAgICBpZighY29uZmlybSgiQ2hhcmdlciBsZXMgZG9ubsOpZXMgZGUgZMOpbW9uc3RyYXRpb24gPyAoQ2VsYSBlZmZhY2VyYSBsZXMgZG9ubsOpZXMgYWN0dWVsbGVzKSIpKSByZXR1cm47CgogICAgICAgICAgICAgICAgY29uc3QgZGVtb1Byb2ZzID0gWwogICAgICAgICAgICAgICAgICAgIHsgaWQ6ICdQMScsIENJVjogJ00uJywgTk9NOiAnRFVQT05UJywgUFJFTk9NOiAnSmVhbicsIE1BVElFUkU6ICdNQVRIw4lNQVRJUVVFUycgfSwgCiAgICAgICAgICAgICAgICAgICAgeyBpZDogJ1AyJywgQ0lWOiAnTW1lJywgTk9NOiAnRFVSQU5EJywgUFJFTk9NOiAnU29waGllJywgTUFUSUVSRTogJ0xFVFRSRVMgTU9ERVJORVMnIH0sIAogICAgICAgICAgICAgICAgICAgIHsgaWQ6ICdQMycsIENJVjogJ00uJywgTk9NOiAnTUFSVElOJywgUFJFTk9NOiAnUGF1bCcsIE1BVElFUkU6ICdISVNUT0lSRS1Hw4lPJyB9LCAKICAgICAgICAgICAgICAgICAgICB7IGlkOiAnUDQnLCBDSVY6ICdNbWUnLCBOT006ICdCRVJOQVJEJywgUFJFTk9NOiAnSnVsaWUnLCBNQVRJRVJFOiAnQU5HTEFJUycgfSwKICAgICAgICAgICAgICAgICAgICB7IGlkOiAnUDUnLCBDSVY6ICdNLicsIE5PTTogJ1BFVElUJywgUFJFTk9NOiAnVGhvbWFzJywgTUFUSUVSRTogJ1NWVCcgfSwKICAgICAgICAgICAgICAgICAgICB7IGlkOiAnUDYnLCBDSVY6ICdNbWUnLCBOT006ICdST0JFUlQnLCBQUkVOT006ICdDw6lsaW5lJywgTUFUSUVSRTogJ1BIWVNJUVVFLUNISU1JRScgfSwgCiAgICAgICAgICAgICAgICAgICAgeyBpZDogJ1A3JywgQ0lWOiAnTS4nLCBOT006ICdSSUNIQVJEJywgUFJFTk9NOiAnTHVjJywgTUFUSUVSRTogJ1RFQ0hOT0xPR0lFJyB9LAogICAgICAgICAgICAgICAgICAgIHsgaWQ6ICdQOCcsIENJVjogJ01tZScsIE5PTTogJ01PUkVBVScsIFBSRU5PTTogJ01hcmllJywgTUFUSUVSRTogJ0VTUEFHTk9MJyB9LCAKICAgICAgICAgICAgICAgICAgICB7IGlkOiAnUDknLCBDSVY6ICdNLicsIE5PTTogJ1NJTU9OJywgUFJFTk9NOiAnTmljb2xhcycsIE1BVElFUkU6ICdFUFMnIH0sCiAgICAgICAgICAgICAgICAgICAgeyBpZDogJ1AxMCcsIENJVjogJ01tZScsIE5PTTogJ0xBVVJFTlQnLCBQUkVOT006ICdJc2FiZWxsZScsIE1BVElFUkU6ICdQSElMT1NPUEhJRScgfSwgCiAgICAgICAgICAgICAgICAgICAgeyBpZDogJ1AxMScsIENJVjogJ00uJywgTk9NOiAnTEVGRUJWUkUnLCBQUkVOT006ICdQaWVycmUnLCBNQVRJRVJFOiAnU0VTJyB9LCAKICAgICAgICAgICAgICAgICAgICB7IGlkOiAnUDEyJywgQ0lWOiAnTW1lJywgTk9NOiAnTUlDSEVMJywgUFJFTk9NOiAnRnJhbsOnb2lzZScsIE1BVElFUkU6ICdOU0knIH0sIAogICAgICAgICAgICAgICAgICAgIHsgaWQ6ICdQMTMnLCBDSVY6ICdNLicsIE5PTTogJ0dBUkNJQScsIFBSRU5PTTogJ0FudG9uaW8nLCBNQVRJRVJFOiAnU1RNRyBFQ08tR0VTVElPTicgfSwgCiAgICAgICAgICAgICAgICAgICAgeyBpZDogJ1AxNCcsIENJVjogJ01tZScsIE5PTTogJ0RVQk9JUycsIFBSRU5PTTogJ0NsYWlyZScsIE1BVElFUkU6ICdBUlRTIFBMQVNUSVFVRVMnIH0gCiAgICAgICAgICAgICAgICBdOwoKICAgICAgICAgICAgICAgIGNvbnN0IGRlbW9ETkIgPSBbCiAgICAgICAgICAgICAgICAgICAgeyBOT006ICdBREFNJywgUFJFTk9NOiAnTmF0aGFuJywgRElWOiAnM0EnLCBQQVJDT1VSUzogJ1BBUkNPVVJTIENJVE9ZRU4nLCBUSEVNRTogIkwnZW5nYWdlbWVudCIsIExBTkdVRTogJ0FOR0xBSVMnIH0sCiAgICAgICAgICAgICAgICAgICAgeyBOT006ICdCQVJCSUVSJywgUFJFTk9NOiAnTMOpYScsIERJVjogJzNBJywgUEFSQ09VUlM6ICdQRUFDJywgVEhFTUU6ICJBcnQgZXQgcG91dm9pciIsIExBTkdVRTogJ0VTUEFHTk9MJywgR1JPVVBFOiAnRzEnIH0sCiAgICAgICAgICAgICAgICAgICAgeyBOT006ICdDSEFSTEVTJywgUFJFTk9NOiAnSHVnbycsIERJVjogJzNBJywgUEFSQ09VUlM6ICdQRUFDJywgVEhFTUU6ICJBcnQgZXQgcG91dm9pciIsIExBTkdVRTogJ0VTUEFHTk9MJywgR1JPVVBFOiAnRzEnIH0sIAogICAgICAgICAgICAgICAgICAgIHsgTk9NOiAnREFWSUQnLCBQUkVOT006ICdFbW1hJywgRElWOiAnM0InLCBQQVJDT1VSUzogJ0FWRU5JUicsIFRIRU1FOiAiTW9uIHN0YWdlIiwgTEFOR1VFOiAnQU5HTEFJUycsIFRUOiAnT1VJJywgQUVTSF9OT006ICdEVVBPTlQnLCBBRVNIX1BSRU5PTTogJ01hcmllJyB9LAogICAgICAgICAgICAgICAgICAgIHsgTk9NOiAnRVZBTlMnLCBQUkVOT006ICdUb20nLCBESVY6ICczQicsIFBBUkNPVVJTOiAnU0FOVMOJJywgVEhFTUU6ICJMZSBzb21tZWlsIiwgTEFOR1VFOiAnQU5HTEFJUycgfSwKICAgICAgICAgICAgICAgICAgICB7IE5PTTogJ0ZBQlJFJywgUFJFTk9NOiAnQ2hsb8OpJywgRElWOiAnM0MnLCBQQVJDT1VSUzogJ0NJVE9ZRU4nLCBUSEVNRTogIkxhIGxhw69jaXTDqSIsIExBTkdVRTogJ0FMTEVNQU5EJyB9LAogICAgICAgICAgICAgICAgICAgIHsgTk9NOiAnR0lSQVJEJywgUFJFTk9NOiAnTG91aXMnLCBESVY6ICczQycsIFBBUkNPVVJTOiAnQVZFTklSJywgVEhFTUU6ICJNw6l0aWVycyBkdSBib2lzIiwgTEFOR1VFOiAnQU5HTEFJUycgfSwKICAgICAgICAgICAgICAgICAgICB7IE5PTTogJ0hFTlJZJywgUFJFTk9NOiAnSmFkZScsIERJVjogJzNBJywgUEFSQ09VUlM6ICdQRUFDJywgVEhFTUU6ICJTdHJlZXQgQXJ0IiwgTEFOR1VFOiAnRVNQQUdOT0wnLCBHUk9VUEU6ICdHMicgfSwKICAgICAgICAgICAgICAgICAgICB7IE5PTTogJ0lWQU5PVicsIFBSRU5PTTogJ1NhY2hhJywgRElWOiAnM0EnLCBQQVJDT1VSUzogJ1BFQUMnLCBUSEVNRTogIlN0cmVldCBBcnQiLCBMQU5HVUU6ICdFU1BBR05PTCcsIEdST1VQRTogJ0cyJyB9LAogICAgICAgICAgICAgICAgICAgIHsgTk9NOiAnSk9MWScsIFBSRU5PTTogJ1NhcmFoJywgRElWOiAnM0InLCBQQVJDT1VSUzogJ0NJVE9ZRU4nLCBUSEVNRTogIkxlIGRldm9pciBkZSBtw6ltb2lyZSIsIExBTkdVRTogJ0FOR0xBSVMnIH0sCiAgICAgICAgICAgICAgICAgICAgeyBOT006ICdLTEVJTicsIFBSRU5PTTogJ05vYWgnLCBESVY6ICczQicsIFBBUkNPVVJTOiAnU0FOVMOJJywgVEhFTUU6ICJBZGRpY3Rpb25zIiwgTEFOR1VFOiAnQU5HTEFJUycsIFRUOiAnT1VJJyB9LAogICAgICAgICAgICAgICAgICAgIHsgTk9NOiAnTEVDTEVSQycsIFBSRU5PTTogJ0luw6hzJywgRElWOiAnM0MnLCBQQVJDT1VSUzogJ0FWRU5JUicsIFRIRU1FOiAiQXJtw6llIGRlIHRlcnJlIiwgTEFOR1VFOiAnRVNQQUdOT0wnIH0KICAgICAgICAgICAgICAgIF07CgogICAgICAgICAgICAgICAgY29uc3QgZGVtb0NGRyA9IFsKICAgICAgICAgICAgICAgICAgICB7IE5PTTogJ01BUlRJTicsIFBSRU5PTTogJ0x1Y2FzJywgRElWOiAnM1NFR1BBJywgVFQ6ICdOT04nLCBBRVNIX05PTTogJ0RVUkFORCcsIEFFU0hfUFJFTk9NOiAnUGllcnJlJyB9LAogICAgICAgICAgICAgICAgICAgIHsgTk9NOiAnTk9FTCcsIFBSRU5PTTogJ0NhbWlsbGUnLCBESVY6ICczU0VHUEEnLCBUVDogJ09VSScgfSwKICAgICAgICAgICAgICAgICAgICB7IE5PTTogJ09VRElOJywgUFJFTk9NOiAnRW56bycsIERJVjogJzNVTElTJywgVFQ6ICdPVUknLCBBRVNIX05PTTogJ0RVUkFORCcsIEFFU0hfUFJFTk9NOiAnUGllcnJlJyB9LAogICAgICAgICAgICAgICAgICAgIHsgTk9NOiAnUEVSUklOJywgUFJFTk9NOiAnTWFub24nLCBESVY6ICczUFJFUEEnLCBUVDogJ05PTicgfSwKICAgICAgICAgICAgICAgICAgICB7IE5PTTogJ1FVRU5USU4nLCBQUkVOT006ICdUaMOpbycsIERJVjogJzNTRUdQQScsIFRUOiAnTk9OJyB9CiAgICAgICAgICAgICAgICBdOwoKICAgICAgICAgICAgICAgIGNvbnN0IGRlbW9HTyA9IFsKICAgICAgICAgICAgICAgICAgICB7IE5PTTogJ1JPVVNTRUFVJywgUFJFTk9NOiAnQWxpY2UnLCBESVY6ICdUMScsIEVEUzogJ01hdGjDqW1hdGlxdWVzJywgVFQ6ICdOT04nIH0sCiAgICAgICAgICAgICAgICAgICAgeyBOT006ICdTSU1PTicsIFBSRU5PTTogJ0JvYicsIERJVjogJ1QxJywgRURTOiAnUGh5c2lxdWUtQ2hpbWllJywgVFQ6ICdOT04nIH0sCiAgICAgICAgICAgICAgICAgICAgeyBOT006ICdUSE9NQVMnLCBQUkVOT006ICdDbGFyYScsIERJVjogJ1QyJywgRURTOiAnSEdHU1AnLCBUVDogJ05PTicgfSwKICAgICAgICAgICAgICAgICAgICB7IE5PTTogJ1VSQkFJTicsIFBSRU5PTTogJ0RhdmlkJywgRElWOiAnVDInLCBFRFM6ICdITFAgKEh1bWFuaXTDqXMpJywgVFQ6ICdPVUknIH0sCiAgICAgICAgICAgICAgICAgICAgeyBOT006ICdWQUxMRVQnLCBQUkVOT006ICdFdmEnLCBESVY6ICdUMycsIEVEUzogJ1NFUycsIFRUOiAnTk9OJyB9LAogICAgICAgICAgICAgICAgICAgIHsgTk9NOiAnV09MRkYnLCBQUkVOT006ICdGcmVkJywgRElWOiAnVDMnLCBFRFM6ICdOU0kgKE51bcOpcmlxdWUpJywgVFQ6ICdOT04nIH0sCiAgICAgICAgICAgICAgICAgICAgeyBOT006ICdYQVZJRVInLCBQUkVOT006ICdHaW5hJywgRElWOiAnVDQnLCBFRFM6ICdTVlQnLCBUVDogJ05PTicgfSwKICAgICAgICAgICAgICAgICAgICB7IE5PTTogJ1lWT04nLCBQUkVOT006ICdIdWdvJywgRElWOiAnVDQnLCBFRFM6ICdMTENFUiBBbmdsYWlzJywgVFQ6ICdOT04nIH0sCiAgICAgICAgICAgICAgICAgICAgeyBOT006ICdaT0xBJywgUFJFTk9NOiAnSXJpcycsIERJVjogJ1RTVE1HJywgRURTOiAnRHJvaXQgZXQgw4ljb25vbWllJywgVFQ6ICdOT04nIH0sCiAgICAgICAgICAgICAgICAgICAgeyBOT006ICdBUk5BVUQnLCBQUkVOT006ICdKdWxlcycsIERJVjogJ1RTVE1HJywgRURTOiAnTWFuYWdlbWVudCwgU2MuIEdlc3Rpb24gKE1lcmNhdGlxdWUpJywgVFQ6ICdPVUknIH0KICAgICAgICAgICAgICAgIF07CgogICAgICAgICAgICAgICAgc2V0UHJvZnMoZGVtb1Byb2ZzKTsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgc2V0U3R1ZGVudHNETkIocHJvY2Vzc1N0dWRlbnRzKGRlbW9ETkIsICdETkInKSk7CiAgICAgICAgICAgICAgICBzZXRQb29sRE5CKHByb2Nlc3NTdHVkZW50cyhkZW1vRE5CLCAnRE5CJykpOwoKICAgICAgICAgICAgICAgIHNldFN0dWRlbnRzQ0ZHKHByb2Nlc3NTdHVkZW50cyhkZW1vQ0ZHLCAnQ0ZHJykpOwogICAgICAgICAgICAgICAgc2V0UG9vbENGRyhwcm9jZXNzU3R1ZGVudHMoZGVtb0NGRywgJ0NGRycpKTsKCiAgICAgICAgICAgICAgICBzZXRTdHVkZW50c0dPKHByb2Nlc3NTdHVkZW50cyhkZW1vR08sICdHTycpKTsKICAgICAgICAgICAgICAgIHNldFBvb2xHTyhwcm9jZXNzU3R1ZGVudHMoZGVtb0dPLCAnR08nKSk7CgogICAgICAgICAgICAgICAgc2V0U2Nob29sTmFtZSgiQ29sbMOoZ2UtTHljw6llIETDqW1vbnN0cmF0aW9uIik7CiAgICAgICAgICAgICAgICBzZXRTY2hvb2xDaXR5KCJQYXJpcyIpOwogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBzZXRKdXJpZXMocHJldiA9PiB7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzZXRKdXJpZXMgPSAodHlwZSkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50ID0gcHJldlt0eXBlXTsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV3SiA9IHt9OwogICAgICAgICAgICAgICAgICAgICAgICBPYmplY3Qua2V5cyhjdXJyZW50KS5mb3JFYWNoKGsgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3SltrXSA9IHsgLi4uY3VycmVudFtrXSwgc3R1ZGVudHM6IFtdIH07CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3SjsKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICAgICAgICAgIEROQjogcmVzZXRKdXJpZXMoJ0ROQicpLAogICAgICAgICAgICAgICAgICAgICAgICBDRkc6IHJlc2V0SnVyaWVzKCdDRkcnKSwKICAgICAgICAgICAgICAgICAgICAgICAgR086IHJlc2V0SnVyaWVzKCdHTycpCiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgIGFsZXJ0KCJEb25uw6llcyBkZSBkw6ltb25zdHJhdGlvbiBjaGFyZ8OpZXMgISIpOwogICAgICAgICAgICB9OwoKICAgICAgICAgICAgLy8gLi4uIChLZWVwIGV4aXN0aW5nIGhlbHBlciBmdW5jdGlvbnMpCiAgICAgICAgICAgIGNvbnN0IHByb2Nlc3NTdHVkZW50cyA9IChkYXRhLCB0eXBlKSA9PiB7CiAgICAgICAgICAgICAgICBjb25zdCBwcm9jZXNzZWQgPSBkYXRhLm1hcCgocywgaSkgPT4gKHsKICAgICAgICAgICAgICAgICAgICAuLi5zLAogICAgICAgICAgICAgICAgICAgIGlkOiBgJHt0eXBlfS0ke0RhdGUubm93KCl9LSR7aX1gLAogICAgICAgICAgICAgICAgICAgIGFzc2lnbmVkOiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICBfaXNUVDogKHMuVFQgJiYgKHMuVFQgPT09ICdPVUknIHx8IG5vcm1hbGl6ZVRleHQocy5UVCkuaW5jbHVkZXMoJ1RJRVJTJykpKSwKICAgICAgICAgICAgICAgICAgICBfaXNHcm91cDogKHMuR1JPVVBFICYmIHMuR1JPVVBFLmxlbmd0aCA+IDApCiAgICAgICAgICAgICAgICB9KSk7CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIHJldHVybiBbLi4ucHJvY2Vzc2VkXS5zb3J0KChhLGIpID0+IHsKICAgICAgICAgICAgICAgICAgICBpZiAodHlwZSA9PT0gJ0ROQicpIHsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZ0EgPSAoYS5HUk9VUEUgfHwgJycpLnRvU3RyaW5nKCkudHJpbSgpOwogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBnQiA9IChiLkdST1VQRSB8fCAnJykudG9TdHJpbmcoKS50cmltKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGlzR0EgPSBnQSAmJiBnQS50b1VwcGVyQ2FzZSgpICE9PSAnTk9OJzsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaXNHQiA9IGdCICYmIGdCLnRvVXBwZXJDYXNlKCkgIT09ICdOT04nOwogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzR0EgJiYgIWlzR0IpIHJldHVybiAtMTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFpc0dBICYmIGlzR0IpIHJldHVybiAxOwogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzR0EgJiYgaXNHQikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY21wID0gZ0EubG9jYWxlQ29tcGFyZShnQik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY21wICE9PSAwKSByZXR1cm4gY21wOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHJldHVybiBhLk5PTS5sb2NhbGVDb21wYXJlKGIuTk9NKTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9OwoKICAgICAgICAgICAgY29uc3QgaGFuZGxlUHJvZnNMb2FkID0gKGRhdGEpID0+IHsKICAgICAgICAgICAgICAgIGNvbnN0IHAgPSBkYXRhLm1hcCgoZCwgaSkgPT4gKHsgLi4uZCwgaWQ6IGBQUk9GLSR7aX1gIH0pKTsKICAgICAgICAgICAgICAgIHNldFByb2ZzKHApOwogICAgICAgICAgICB9OwoKICAgICAgICAgICAgY29uc3QgaGFuZGxlU3R1ZGVudHNETkJMb2FkID0gKGRhdGEpID0+IHsKICAgICAgICAgICAgICAgIGNvbnN0IHMgPSBwcm9jZXNzU3R1ZGVudHMoZGF0YSwgJ0ROQicpOwogICAgICAgICAgICAgICAgc2V0U3R1ZGVudHNETkIocyk7CiAgICAgICAgICAgICAgICBzZXRQb29sRE5CKHMpOwogICAgICAgICAgICB9OwoKICAgICAgICAgICAgY29uc3QgaGFuZGxlU3R1ZGVudHNDRkdMb2FkID0gKGRhdGEpID0+IHsKICAgICAgICAgICAgICAgIGNvbnN0IHMgPSBwcm9jZXNzU3R1ZGVudHMoZGF0YSwgJ0NGRycpOwogICAgICAgICAgICAgICAgc2V0U3R1ZGVudHNDRkcocyk7CiAgICAgICAgICAgICAgICBzZXRQb29sQ0ZHKHMpOwogICAgICAgICAgICB9OwoKICAgICAgICAgICAgY29uc3QgaGFuZGxlU3R1ZGVudHNHT0xvYWQgPSAoZGF0YSkgPT4gewogICAgICAgICAgICAgICAgY29uc3QgcyA9IHByb2Nlc3NTdHVkZW50cyhkYXRhLCAnR08nKTsKICAgICAgICAgICAgICAgIHNldFN0dWRlbnRzR08ocyk7CiAgICAgICAgICAgICAgICBzZXRQb29sR08ocyk7CiAgICAgICAgICAgIH07CgogICAgICAgICAgICBjb25zdCBvcGVuRWRzTW9kYWwgPSAoc3R1ZGVudCkgPT4gewogICAgICAgICAgICAgICAgc2V0Q3VycmVudFN0dWRlbnRGb3JFZHMoc3R1ZGVudCk7CiAgICAgICAgICAgICAgICBzZXRTaG93RWRzTW9kYWwodHJ1ZSk7CiAgICAgICAgICAgIH07CgogICAgICAgICAgICBjb25zdCBvcGVuR2VuZXJhbEVkaXRNb2RhbCA9IChzdHVkZW50KSA9PiB7CiAgICAgICAgICAgICAgICBzZXRDdXJyZW50U3R1ZGVudEZvckdlbmVyYWxFZGl0KHN0dWRlbnQpOwogICAgICAgICAgICAgICAgc2V0U2hvd0dlbmVyYWxFZGl0TW9kYWwodHJ1ZSk7CiAgICAgICAgICAgIH07CgogICAgICAgICAgICBjb25zdCBzYXZlRWRzID0gKHN0dWRlbnRJZCwgZWRzVmFsdWUpID0+IHsKICAgICAgICAgICAgICAgIGNvbnN0IHVwZGF0ZVN0dWRlbnQgPSAocykgPT4gcy5pZCA9PT0gc3R1ZGVudElkID8geyAuLi5zLCBFRFM6IGVkc1ZhbHVlIH0gOiBzOwogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBzZXRTdHVkZW50c0dPKHByZXYgPT4gcHJldi5tYXAodXBkYXRlU3R1ZGVudCkpOwogICAgICAgICAgICAgICAgc2V0UG9vbEdPKHByZXYgPT4gcHJldi5tYXAodXBkYXRlU3R1ZGVudCkpOwogICAgICAgICAgICAgICAgc2V0SnVyaWVzKHByZXYgPT4gewogICAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld0dPSnVyaWVzID0geyAuLi5wcmV2LkdPIH07CiAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmtleXMobmV3R09KdXJpZXMpLmZvckVhY2goamlkID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgbmV3R09KdXJpZXNbamlkXS5zdHVkZW50cyA9IG5ld0dPSnVyaWVzW2ppZF0uc3R1ZGVudHMubWFwKHVwZGF0ZVN0dWRlbnQpOwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIHJldHVybiB7IC4uLnByZXYsIEdPOiBuZXdHT0p1cmllcyB9OwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIHNldFNob3dFZHNNb2RhbChmYWxzZSk7CiAgICAgICAgICAgIH07CgogICAgICAgICAgICBjb25zdCBzYXZlR2VuZXJhbFN0dWRlbnQgPSAodXBkYXRlZFN0dWRlbnQpID0+IHsKICAgICAgICAgICAgICAgIGNvbnN0IHR5cGUgPSBhY3RpdmVUYWI7IAogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBjb25zdCBwcm9jZXNzZWRTdHVkZW50ID0gewogICAgICAgICAgICAgICAgICAgIC4uLnVwZGF0ZWRTdHVkZW50LAogICAgICAgICAgICAgICAgICAgIF9pc1RUOiAodXBkYXRlZFN0dWRlbnQuVFQgPT09ICdPVUknIHx8IHVwZGF0ZWRTdHVkZW50LlRUID09PSB0cnVlIHx8ICh0eXBlb2YgdXBkYXRlZFN0dWRlbnQuVFQgPT09ICdzdHJpbmcnICYmIHVwZGF0ZWRTdHVkZW50LlRULmluY2x1ZGVzKCdUSUVSUycpKSksCiAgICAgICAgICAgICAgICAgICAgX2lzR3JvdXA6ICh1cGRhdGVkU3R1ZGVudC5HUk9VUEUgJiYgdXBkYXRlZFN0dWRlbnQuR1JPVVBFLmxlbmd0aCA+IDApCiAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgIGNvbnN0IHVwZGF0ZUxvZ2ljID0gKHByZXYpID0+IHByZXYubWFwKHMgPT4gcy5pZCA9PT0gcHJvY2Vzc2VkU3R1ZGVudC5pZCA/IHByb2Nlc3NlZFN0dWRlbnQgOiBzKTsKCiAgICAgICAgICAgICAgICBpZiAodHlwZSA9PT0gJ0ROQicpIHNldFN0dWRlbnRzRE5CKHVwZGF0ZUxvZ2ljKTsKICAgICAgICAgICAgICAgIGVsc2UgaWYgKHR5cGUgPT09ICdDRkcnKSBzZXRTdHVkZW50c0NGRyh1cGRhdGVMb2dpYyk7CiAgICAgICAgICAgICAgICBlbHNlIHNldFN0dWRlbnRzR08odXBkYXRlTG9naWMpOwoKICAgICAgICAgICAgICAgIGlmICh0eXBlID09PSAnRE5CJykgc2V0UG9vbEROQih1cGRhdGVMb2dpYyk7CiAgICAgICAgICAgICAgICBlbHNlIGlmICh0eXBlID09PSAnQ0ZHJykgc2V0UG9vbENGRyh1cGRhdGVMb2dpYyk7CiAgICAgICAgICAgICAgICBlbHNlIHNldFBvb2xHTyh1cGRhdGVMb2dpYyk7CgogICAgICAgICAgICAgICAgc2V0SnVyaWVzKHByZXYgPT4gewogICAgICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRKdXJpZXMgPSB7IC4uLnByZXZbdHlwZV0gfTsKICAgICAgICAgICAgICAgICAgICBPYmplY3Qua2V5cyhjdXJyZW50SnVyaWVzKS5mb3JFYWNoKGppZCA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRKdXJpZXNbamlkXS5zdHVkZW50cyA9IGN1cnJlbnRKdXJpZXNbamlkXS5zdHVkZW50cy5tYXAocyA9PiBzLmlkID09PSBwcm9jZXNzZWRTdHVkZW50LmlkID8gcHJvY2Vzc2VkU3R1ZGVudCA6IHMpOwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIHJldHVybiB7IC4uLnByZXYsIFt0eXBlXTogY3VycmVudEp1cmllcyB9OwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgc2V0U2hvd0dlbmVyYWxFZGl0TW9kYWwoZmFsc2UpOwogICAgICAgICAgICB9OwoKICAgICAgICAgICAgY29uc3QgaGFuZGxlQXV0b0Rpc3RyaWJ1dGlvbiA9ICgpID0+IHsKICAgICAgICAgICAgICAgIGNvbnN0IHR5cGUgPSBhY3RpdmVUYWI7CiAgICAgICAgICAgICAgICBsZXQgcG9vbCwgc2V0UG9vbDsKICAgICAgICAgICAgICAgIGlmICh0eXBlID09PSAnRE5CJykgeyBwb29sID0gcG9vbEROQjsgc2V0UG9vbCA9IHNldFBvb2xETkI7IH0KICAgICAgICAgICAgICAgIGVsc2UgaWYgKHR5cGUgPT09ICdDRkcnKSB7IHBvb2wgPSBwb29sQ0ZHOyBzZXRQb29sID0gc2V0UG9vbENGRzsgfQogICAgICAgICAgICAgICAgZWxzZSB7IHBvb2wgPSBwb29sR087IHNldFBvb2wgPSBzZXRQb29sR087IH0KCiAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50SnVyaWVzID0ganVyaWVzW3R5cGVdOwogICAgICAgICAgICAgICAgY29uc3QgYWN0aXZlSnVyeUlkcyA9IE9iamVjdC5rZXlzKGN1cnJlbnRKdXJpZXMpOwoKICAgICAgICAgICAgICAgIGlmIChwb29sLmxlbmd0aCA9PT0gMCkgeyBhbGVydCgiQXVjdW4gw6lsw6h2ZSBkYW5zIGxhIGxpc3RlIGQnYXR0ZW50ZS4iKTsgcmV0dXJuOyB9CiAgICAgICAgICAgICAgICBpZiAoYWN0aXZlSnVyeUlkcy5sZW5ndGggPT09IDApIHsgYWxlcnQoIkF1Y3VuIGp1cnkgY29uZmlndXLDqS4iKTsgcmV0dXJuOyB9CiAgICAgICAgICAgICAgICBpZiAoIWNvbmZpcm0oYFLDqXBhcnRpciAke3Bvb2wubGVuZ3RofSDDqWzDqHZlcyBzdXIgJHthY3RpdmVKdXJ5SWRzLmxlbmd0aH0ganVyeXMgP2ApKSByZXR1cm47CgogICAgICAgICAgICAgICAgY29uc3QgbmV3SnVyaWVzU3RhdGUgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGN1cnJlbnRKdXJpZXMpKTsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgbGV0IHVuaXRzVG9Bc3NpZ24gPSBbXTsKCiAgICAgICAgICAgICAgICBpZiAodHlwZSA9PT0gJ0ROQicpIHsKICAgICAgICAgICAgICAgICAgICBjb25zdCBncm91cHNNYXAgPSB7fTsKICAgICAgICAgICAgICAgICAgICBjb25zdCBzaW5nbGVzID0gW107CgogICAgICAgICAgICAgICAgICAgIHBvb2wuZm9yRWFjaChzID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZ1JhdyA9IChzLkdST1VQRSB8fCAnJykudG9TdHJpbmcoKS50cmltKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGdOYW1lID0gZ1Jhdy50b1VwcGVyQ2FzZSgpOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZ05hbWUgJiYgZ05hbWUgIT09ICdOT04nKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWdyb3Vwc01hcFtnTmFtZV0pIGdyb3Vwc01hcFtnTmFtZV0gPSBbXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdyb3Vwc01hcFtnTmFtZV0ucHVzaChzKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpbmdsZXMucHVzaChzKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICBPYmplY3Qua2V5cyhncm91cHNNYXApLnNvcnQoKS5mb3JFYWNoKGdOYW1lID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgdW5pdHNUb0Fzc2lnbi5wdXNoKHsgc3R1ZGVudHM6IGdyb3Vwc01hcFtnTmFtZV0sIGlzR3JvdXA6IHRydWUsIGlkOiBgR1JQLSR7Z05hbWV9YCB9KTsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICBzaW5nbGVzLmZvckVhY2gocyA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIHVuaXRzVG9Bc3NpZ24ucHVzaCh7IHN0dWRlbnRzOiBbc10sIGlzR3JvdXA6IGZhbHNlLCBpZDogcy5pZCB9KTsKICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIHVuaXRzVG9Bc3NpZ24gPSBwb29sLm1hcChzID0+ICh7IHN0dWRlbnRzOiBbc10sIGlzR3JvdXA6IGZhbHNlLCBpZDogcy5pZCB9KSk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgdW5pdHNUb0Fzc2lnbi5zb3J0KChhLCBiKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgaGFzVFRfQSA9IGEuc3R1ZGVudHMuc29tZShzID0+IHMuX2lzVFQpOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IGhhc1RUX0IgPSBiLnN0dWRlbnRzLnNvbWUocyA9PiBzLl9pc1RUKTsKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICBpZiAoaGFzVFRfQSA9PT0gaGFzVFRfQikgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYS5zdHVkZW50c1swXS5OT00ubG9jYWxlQ29tcGFyZShiLnN0dWRlbnRzWzBdLk5PTSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHJldHVybiBoYXNUVF9BID8gMSA6IC0xOyAKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgIHVuaXRzVG9Bc3NpZ24uZm9yRWFjaCh1bml0ID0+IHsKICAgICAgICAgICAgICAgICAgICBsZXQgYmVzdEp1cnlJZCA9IG51bGw7CiAgICAgICAgICAgICAgICAgICAgbGV0IG1pblNjb3JlID0gSW5maW5pdHk7CgogICAgICAgICAgICAgICAgICAgIGFjdGl2ZUp1cnlJZHMuZm9yRWFjaChqdXJ5SWQgPT4gewogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBqdXJ5ID0gbmV3SnVyaWVzU3RhdGVbanVyeUlkXTsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcHJvZjEgPSBwcm9mcy5maW5kKHAgPT4gcC5pZCA9PT0ganVyeS5wcm9mMUlkKTsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcHJvZjIgPSAhaXNGcmVuY2hPcmFsID8gcHJvZnMuZmluZChwID0+IHAuaWQgPT09IGp1cnkucHJvZjJJZCkgOiBudWxsOwogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHNjb3JlID0gKGp1cnkuc3R1ZGVudHMubGVuZ3RoICsgdW5pdC5zdHVkZW50cy5sZW5ndGgpICogMTA7CgogICAgICAgICAgICAgICAgICAgICAgICBpZiAoKHR5cGUgPT09ICdETkInIHx8IHR5cGUgPT09ICdHTycpICYmIChwcm9mMSB8fCBwcm9mMikpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVuaXQuc3R1ZGVudHMuZm9yRWFjaChzdHVkZW50ID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjb21wYXQgPSBjaGVja0NvbXBhdGliaWxpdHkoc3R1ZGVudCwgaXNGcmVuY2hPcmFsID8gW3Byb2YxXS5maWx0ZXIoQm9vbGVhbikgOiBbcHJvZjEsIHByb2YyXS5maWx0ZXIoQm9vbGVhbiksIHR5cGUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb21wYXQgPT09IHRydWUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2NvcmUgLT0gNTA7IAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoY29tcGF0ID09PSBmYWxzZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY29yZSArPSAxMDA7IAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2NvcmUgPCBtaW5TY29yZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbWluU2NvcmUgPSBzY29yZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJlc3RKdXJ5SWQgPSBqdXJ5SWQ7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgICAgaWYgKGJlc3RKdXJ5SWQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdW5pdC5zdHVkZW50cy5mb3JFYWNoKHN0dWRlbnQgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3SnVyaWVzU3RhdGVbYmVzdEp1cnlJZF0uc3R1ZGVudHMucHVzaChzdHVkZW50KTsKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgc2V0SnVyaWVzKHByZXYgPT4gKHsgLi4ucHJldiwgW3R5cGVdOiBuZXdKdXJpZXNTdGF0ZSB9KSk7CiAgICAgICAgICAgICAgICBzZXRQb29sKFtdKTsKICAgICAgICAgICAgICAgIGFsZXJ0KCJSw6lwYXJ0aXRpb24gdGVybWluw6llICEiKTsKICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIGNvbnN0IGhhbmRsZUVtcHR5SnVyaWVzID0gKCkgPT4gewogICAgICAgICAgICAgICAgaWYgKCFjb25maXJtKCJWb3VsZXotdm91cyB2cmFpbWVudCB2aWRlciB0b3VzIGxlcyBqdXJ5cyBkZSBjZXQgb25nbGV0IGV0IHJlbWV0dHJlIGxlcyDDqWzDqHZlcyBlbiBhdHRlbnRlID8iKSkgcmV0dXJuOwogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBjb25zdCB0eXBlID0gYWN0aXZlVGFiOwogICAgICAgICAgICAgICAgY29uc3QgY3VycmVudEp1cmllcyA9IGp1cmllc1t0eXBlXTsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgbGV0IHN0dWRlbnRzUmVjb3ZlcmVkID0gW107CiAgICAgICAgICAgICAgICBPYmplY3QudmFsdWVzKGN1cnJlbnRKdXJpZXMpLmZvckVhY2goanVyeSA9PiB7CiAgICAgICAgICAgICAgICAgICAgLy8gT25seSBrZWVwIG5vbi1icmVhayBpdGVtcyBhbmQgbm9uLWdlbmVyYXRlZCBpdGVtcyBpZiBuZWVkZWQsIGJ1dCBoZXJlIHdlIGp1c3QgdGFrZSBzdHVkZW50cyBiYWNrCiAgICAgICAgICAgICAgICAgICAgLy8gRmlsdGVyIG91dCBicmVha3MgaWYgdGhleSBhcmUganVzdCBicmVha3MKICAgICAgICAgICAgICAgICAgICBjb25zdCByZWFsU3R1ZGVudHMgPSBqdXJ5LnN0dWRlbnRzLmZpbHRlcihzID0+ICFzLmlzQnJlYWspOwogICAgICAgICAgICAgICAgICAgIHN0dWRlbnRzUmVjb3ZlcmVkID0gWy4uLnN0dWRlbnRzUmVjb3ZlcmVkLCAuLi5yZWFsU3R1ZGVudHNdOwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgaWYgKHR5cGUgPT09ICdETkInKSBzZXRQb29sRE5CKHByZXYgPT4gWy4uLnByZXYsIC4uLnN0dWRlbnRzUmVjb3ZlcmVkXSk7CiAgICAgICAgICAgICAgICBlbHNlIGlmICh0eXBlID09PSAnQ0ZHJykgc2V0UG9vbENGRyhwcmV2ID0+IFsuLi5wcmV2LCAuLi5zdHVkZW50c1JlY292ZXJlZF0pOwogICAgICAgICAgICAgICAgZWxzZSBzZXRQb29sR08ocHJldiA9PiBbLi4ucHJldiwgLi4uc3R1ZGVudHNSZWNvdmVyZWRdKTsKCiAgICAgICAgICAgICAgICBzZXRKdXJpZXMocHJldiA9PiB7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV3SnVyaWVzVHlwZSA9IHt9OwogICAgICAgICAgICAgICAgICAgIE9iamVjdC5rZXlzKHByZXZbdHlwZV0pLmZvckVhY2goamlkID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgbmV3SnVyaWVzVHlwZVtqaWRdID0geyAuLi5wcmV2W3R5cGVdW2ppZF0sIHN0dWRlbnRzOiBbXSB9OwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIHJldHVybiB7IC4uLnByZXYsIFt0eXBlXTogbmV3SnVyaWVzVHlwZSB9OwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIGFsZXJ0KCJKdXJ5cyB2aWTDqXMgZXQgw6lsw6h2ZXMgcmVwbGFjw6lzIGVuIGxpc3RlIGQnYXR0ZW50ZS4iKTsKICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIGNvbnN0IGhhbmRsZUFkZEdsb2JhbEJyZWFrID0gKCkgPT4gewogICAgICAgICAgICAgICAgaWYgKCFjb25maXJtKGBBam91dGVyIHVuZSBwYXVzZSBkZSAke2JyZWFrQ29uZmlnLmR1cmF0aW9ufSBtaW4gw6AgJHticmVha0NvbmZpZy50aW1lfSBwb3VyIFRPVVMgbGVzIGp1cnlzICR7YWN0aXZlVGFifSA/YCkpIHJldHVybjsKICAgICAgICAgICAgICAgIGNvbnN0IHR5cGUgPSBhY3RpdmVUYWI7CiAgICAgICAgICAgICAgICBzZXRKdXJpZXMocHJldiA9PiB7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgY3VycmVudEp1cmllcyA9IHsgLi4ucHJldlt0eXBlXSB9OwogICAgICAgICAgICAgICAgICAgIGNvbnN0IHVwZGF0ZWRKdXJpZXMgPSB7fTsKICAgICAgICAgICAgICAgICAgICBPYmplY3Qua2V5cyhjdXJyZW50SnVyaWVzKS5mb3JFYWNoKGp1cnlJZCA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGp1cnkgPSBjdXJyZW50SnVyaWVzW2p1cnlJZF07CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRpbWVsaW5lID0gY2FsY3VsYXRlU3R1ZGVudFRpbWVzKGp1cnkuc3R1ZGVudHMsIHNldHRpbmdzW3R5cGVdLnN0YXJ0VGltZSwgdHlwZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBpbnNlcnRJbmRleCA9IHRpbWVsaW5lLmZpbmRJbmRleChzID0+IHMudGltZVN0YXJ0ID49IGJyZWFrQ29uZmlnLnRpbWUpOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW5zZXJ0SW5kZXggPT09IC0xKSBpbnNlcnRJbmRleCA9IGp1cnkuc3R1ZGVudHMubGVuZ3RoOwogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdQYXVzZSA9IHsgaWQ6IGBCUkVBSy0ke2p1cnlJZH0tJHtEYXRlLm5vdygpfWAsIGlzQnJlYWs6IHRydWUsIGR1cmF0aW9uOiBwYXJzZUludChicmVha0NvbmZpZy5kdXJhdGlvbiksIE5PTTogJ1BBVVNFJywgUFJFTk9NOiAnJywgRElWOiAnJyB9OwogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdTdHVkZW50cyA9IFsuLi5qdXJ5LnN0dWRlbnRzXTsKICAgICAgICAgICAgICAgICAgICAgICAgbmV3U3R1ZGVudHMuc3BsaWNlKGluc2VydEluZGV4LCAwLCBuZXdQYXVzZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZWRKdXJpZXNbanVyeUlkXSA9IHsgLi4uanVyeSwgc3R1ZGVudHM6IG5ld1N0dWRlbnRzIH07CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgLi4ucHJldiwgW3R5cGVdOiB1cGRhdGVkSnVyaWVzIH07CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICB1c2VFZmZlY3QoKCkgPT4gewogICAgICAgICAgICAgICAgWydETkInLCAnQ0ZHJywgJ0dPJ10uZm9yRWFjaCh0eXBlID0+IHsKICAgICAgICAgICAgICAgICAgICBjb25zdCBjb3VudCA9IHNldHRpbmdzW3R5cGVdLmp1cnlDb3VudDsKICAgICAgICAgICAgICAgICAgICBzZXRKdXJpZXMocHJldiA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnQgPSBwcmV2W3R5cGVdIHx8IHt9OwogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdKdXJpZXMgPSB7IC4uLmN1cnJlbnQgfTsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPD0gY291bnQ7IGkrKykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFuZXdKdXJpZXNbaV0pIG5ld0p1cmllc1tpXSA9IHsgaWQ6IGksIHJvb206IGBTJHtpfWAsIHByb2YxSWQ6IG51bGwsIHByb2YySWQ6IG51bGwsIHN0dWRlbnRzOiBbXSB9OwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIE9iamVjdC5rZXlzKG5ld0p1cmllcykuZm9yRWFjaChrZXkgPT4geyBpZiAocGFyc2VJbnQoa2V5KSA+IGNvdW50KSBkZWxldGUgbmV3SnVyaWVzW2tleV07IH0pOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4geyAuLi5wcmV2LCBbdHlwZV06IG5ld0p1cmllcyB9OwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0sIFtzZXR0aW5ncy5ETkIuanVyeUNvdW50LCBzZXR0aW5ncy5DRkcuanVyeUNvdW50LCBzZXR0aW5ncy5HTy5qdXJ5Q291bnRdKTsKCiAgICAgICAgICAgIGNvbnN0IHVwZGF0ZUp1cnkgPSAoaWQsIGZpZWxkLCB2YWx1ZSkgPT4gewogICAgICAgICAgICAgICAgc2V0SnVyaWVzKHByZXYgPT4gKHsKICAgICAgICAgICAgICAgICAgICAuLi5wcmV2LAogICAgICAgICAgICAgICAgICAgIFthY3RpdmVUYWJdOiB7CiAgICAgICAgICAgICAgICAgICAgICAgIC4uLnByZXZbYWN0aXZlVGFiXSwKICAgICAgICAgICAgICAgICAgICAgICAgW2lkXTogeyAuLi5wcmV2W2FjdGl2ZVRhYl1baWRdLCBbZmllbGRdOiB2YWx1ZSB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSkpOwogICAgICAgICAgICB9OwoKICAgICAgICAgICAgY29uc3QgaGFuZGxlRHJvcFN0dWRlbnRUb0p1cnkgPSAoanVyeUlkLCBzdHVkZW50KSA9PiB7CiAgICAgICAgICAgICAgICBjb25zdCB0eXBlID0gYWN0aXZlVGFiOwogICAgICAgICAgICAgICAgaWYgKCFzdHVkZW50LmZyb21KdXJ5KSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGUgPT09ICdETkInKSBzZXRQb29sRE5CKHByZXYgPT4gcHJldi5maWx0ZXIocyA9PiBzLmlkICE9PSBzdHVkZW50LmlkKSk7CiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAodHlwZSA9PT0gJ0NGRycpIHNldFBvb2xDRkcocHJldiA9PiBwcmV2LmZpbHRlcihzID0+IHMuaWQgIT09IHN0dWRlbnQuaWQpKTsKICAgICAgICAgICAgICAgICAgICBlbHNlIHNldFBvb2xHTyhwcmV2ID0+IHByZXYuZmlsdGVyKHMgPT4gcy5pZCAhPT0gc3R1ZGVudC5pZCkpOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICByZW1vdmVTdHVkZW50RnJvbUp1cnkoc3R1ZGVudC5mcm9tSnVyeSwgc3R1ZGVudC5pZCwgZmFsc2UpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgc2V0SnVyaWVzKHByZXYgPT4gewogICAgICAgICAgICAgICAgICAgIGNvbnN0IGp1cnkgPSBwcmV2W3R5cGVdW2p1cnlJZF07CiAgICAgICAgICAgICAgICAgICAgaWYgKGp1cnkuc3R1ZGVudHMuZmluZChzID0+IHMuaWQgPT09IHN0dWRlbnQuaWQpKSByZXR1cm4gcHJldjsKICAgICAgICAgICAgICAgICAgICByZXR1cm4geyAuLi5wcmV2LCBbdHlwZV06IHsgLi4ucHJldlt0eXBlXSwgW2p1cnlJZF06IHsgLi4uanVyeSwgc3R1ZGVudHM6IFsuLi5qdXJ5LnN0dWRlbnRzLCB7IC4uLnN0dWRlbnQsIGZyb21KdXJ5OiB1bmRlZmluZWQgfV0gfSB9IH07CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIGNvbnN0IHJlbW92ZVN0dWRlbnRGcm9tSnVyeSA9IChqdXJ5SWQsIHN0dWRlbnRJZCwgcmV0dXJuVG9Qb29sID0gdHJ1ZSkgPT4gewogICAgICAgICAgICAgICAgY29uc3QgdHlwZSA9IGFjdGl2ZVRhYjsKICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRKdXJpZXMgPSBqdXJpZXNbdHlwZV07CiAgICAgICAgICAgICAgICBpZiAoIWN1cnJlbnRKdXJpZXMpIHJldHVybjsKICAgICAgICAgICAgICAgIGNvbnN0IGp1cnkgPSBjdXJyZW50SnVyaWVzW2p1cnlJZF07CiAgICAgICAgICAgICAgICBpZiAoIWp1cnkpIHJldHVybjsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgY29uc3Qgc3R1ZGVudFRvUmVtb3ZlID0ganVyeS5zdHVkZW50cy5maW5kKHMgPT4gcy5pZCA9PT0gc3R1ZGVudElkKTsKCiAgICAgICAgICAgICAgICBzZXRKdXJpZXMocHJldiA9PiB7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgcHJldkp1cnkgPSBwcmV2W3R5cGVdW2p1cnlJZF07CiAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV3U3R1ZGVudHMgPSBwcmV2SnVyeS5zdHVkZW50cy5maWx0ZXIocyA9PiBzLmlkICE9PSBzdHVkZW50SWQpOwogICAgICAgICAgICAgICAgICAgIHJldHVybiB7IC4uLnByZXYsIFt0eXBlXTogeyAuLi5wcmV2W3R5cGVdLCBbanVyeUlkXTogeyAuLi5wcmV2SnVyeSwgc3R1ZGVudHM6IG5ld1N0dWRlbnRzIH0gfSB9OwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgaWYgKHJldHVyblRvUG9vbCAmJiBzdHVkZW50VG9SZW1vdmUpIHsKICAgICAgICAgICAgICAgICAgICBpZiAodHlwZSA9PT0gJ0ROQicpIHNldFBvb2xETkIocHJldiA9PiBbc3R1ZGVudFRvUmVtb3ZlLCAuLi5wcmV2XSk7CiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAodHlwZSA9PT0gJ0NGRycpIHNldFBvb2xDRkcocHJldiA9PiBbc3R1ZGVudFRvUmVtb3ZlLCAuLi5wcmV2XSk7CiAgICAgICAgICAgICAgICAgICAgZWxzZSBzZXRQb29sR08ocHJldiA9PiBbc3R1ZGVudFRvUmVtb3ZlLCAuLi5wcmV2XSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH07CgogICAgICAgICAgICBjb25zdCBtb3ZlU3R1ZGVudCA9IChqdXJ5SWQsIHN0dWRlbnRJZCwgZGlyZWN0aW9uKSA9PiB7CiAgICAgICAgICAgICAgICBzZXRKdXJpZXMocHJldiA9PiB7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgdHlwZSA9IGFjdGl2ZVRhYjsKICAgICAgICAgICAgICAgICAgICBjb25zdCBqdXJ5ID0gcHJldlt0eXBlXVtqdXJ5SWRdOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IHN0dWRlbnRzID0gWy4uLmp1cnkuc3R1ZGVudHNdOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gc3R1ZGVudHMuZmluZEluZGV4KHMgPT4gcy5pZCA9PT0gc3R1ZGVudElkKTsKICAgICAgICAgICAgICAgICAgICBpZiAoaW5kZXggPT09IC0xKSByZXR1cm4gcHJldjsKICAgICAgICAgICAgICAgICAgICBpZiAoZGlyZWN0aW9uID09PSAtMSAmJiBpbmRleCA9PT0gMCkgcmV0dXJuIHByZXY7CiAgICAgICAgICAgICAgICAgICAgaWYgKGRpcmVjdGlvbiA9PT0gMSAmJiBpbmRleCA9PT0gc3R1ZGVudHMubGVuZ3RoIC0gMSkgcmV0dXJuIHByZXY7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVtcCA9IHN0dWRlbnRzW2luZGV4XTsKICAgICAgICAgICAgICAgICAgICBzdHVkZW50c1tpbmRleF0gPSBzdHVkZW50c1tpbmRleCArIGRpcmVjdGlvbl07CiAgICAgICAgICAgICAgICAgICAgc3R1ZGVudHNbaW5kZXggKyBkaXJlY3Rpb25dID0gdGVtcDsKICAgICAgICAgICAgICAgICAgICByZXR1cm4geyAuLi5wcmV2LCBbdHlwZV06IHsgLi4ucHJldlt0eXBlXSwgW2p1cnlJZF06IHsgLi4uanVyeSwgc3R1ZGVudHMgfSB9IH07CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIGNvbnN0IGhhbmRsZVVwZGF0ZVN0dWRlbnRJbkp1cnkgPSAoanVyeUlkLCBzdHVkZW50SWQsIGR1cmF0aW9uKSA9PiB7CiAgICAgICAgICAgICAgICBzZXRKdXJpZXMocHJldiA9PiB7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgdHlwZSA9IGFjdGl2ZVRhYjsKICAgICAgICAgICAgICAgICAgICBjb25zdCBqdXJ5ID0gcHJldlt0eXBlXVtqdXJ5SWRdOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld1N0dWRlbnRzID0ganVyeS5zdHVkZW50cy5tYXAocyA9PiBzLmlkID09PSBzdHVkZW50SWQgPyB7IC4uLnMsIGR1cmF0aW9uOiBkdXJhdGlvbiB9IDogcyk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgLi4ucHJldiwgW3R5cGVdOiB7IC4uLnByZXZbdHlwZV0sIFtqdXJ5SWRdOiB7IC4uLmp1cnksIHN0dWRlbnRzOiBuZXdTdHVkZW50cyB9IH0gfTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9OwoKICAgICAgICAgICAgY29uc3QgZXhwb3J0RGF0YSA9ICh0eXBlKSA9PiB7CiAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50VHlwZSA9IGFjdGl2ZVRhYiA9PT0gJ1BJTE9UQUdFJyA/ICdETkInIDogYWN0aXZlVGFiOwogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBpZiAodHlwZSA9PT0gJ1BST0ZTJykgewogICAgICAgICAgICAgICAgICAgIGNvbnN0IGFzc2lnbm1lbnRzID0ge307CiAgICAgICAgICAgICAgICAgICAgaWYgKGp1cmllc1tjdXJyZW50VHlwZV0pIHsKICAgICAgICAgICAgICAgICAgICAgICAgT2JqZWN0LnZhbHVlcyhqdXJpZXNbY3VycmVudFR5cGVdKS5mb3JFYWNoKGogPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGoucHJvZjFJZCkgYXNzaWdubWVudHNbai5wcm9mMUlkXSA9IGBKdXJ5ICR7ai5pZH1gOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFpc0ZyZW5jaE9yYWwgJiYgai5wcm9mMklkKSBhc3NpZ25tZW50c1tqLnByb2YySWRdID0gYEp1cnkgJHtqLmlkfWA7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgY29uc3QgZGF0YSA9IHByb2ZzLm1hcChwID0+ICh7CiAgICAgICAgICAgICAgICAgICAgICAgIENJVjogcC5DSVYgfHwgJycsIAogICAgICAgICAgICAgICAgICAgICAgICBOT006IHAuTk9NLCAKICAgICAgICAgICAgICAgICAgICAgICAgUFJFTk9NOiBwLlBSRU5PTSwgCiAgICAgICAgICAgICAgICAgICAgICAgIE1BVElFUkU6IHAuTUFUSUVSRSwKICAgICAgICAgICAgICAgICAgICAgICAgW2BBRkZFQ1RBVElPTl8ke2N1cnJlbnRUeXBlfWBdOiBhc3NpZ25tZW50c1twLmlkXSB8fCAnTk9OIEFGRkVDVMOJJwogICAgICAgICAgICAgICAgICAgIH0pKTsKICAgICAgICAgICAgICAgICAgICBkb3dubG9hZENTVihkYXRhLCBgZXhwb3J0X3Byb2ZzXyR7Y3VycmVudFR5cGV9XyR7c2Vzc2lvblllYXJ9LmNzdmApOwogICAgICAgICAgICAgICAgfSAKICAgICAgICAgICAgICAgIGVsc2UgaWYgKHR5cGUgPT09ICdTVFVERU5UUycpIHsKICAgICAgICAgICAgICAgICAgICBsZXQgcm93cyA9IFtdOwogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIGlmIChqdXJpZXNbY3VycmVudFR5cGVdKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIE9iamVjdC52YWx1ZXMoanVyaWVzW2N1cnJlbnRUeXBlXSkuZm9yRWFjaChqdXJ5ID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRpbWVkU3R1ZGVudHMgPSBjYWxjdWxhdGVTdHVkZW50VGltZXMoanVyeS5zdHVkZW50cywgc2V0dGluZ3NbY3VycmVudFR5cGVdLnN0YXJ0VGltZSwgY3VycmVudFR5cGUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZWRTdHVkZW50cy5mb3JFYWNoKHMgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHMuaXNCcmVhaykgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvd3MucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE5PTTogcy5OT00sIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBQUkVOT006IHMuUFJFTk9NLCAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRElWOiBzLkRJViwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVFQ6IChzLlRUICYmIChzLlRUID09PSAnT1VJJyB8fCBzLlRUID09PSB0cnVlIHx8IG5vcm1hbGl6ZVRleHQocy5UVCkuaW5jbHVkZXMoJ1RJRVJTJykpKSA/ICdPVUknIDogJ05PTicsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFFU0hfTk9NOiBzLkFFU0hfTk9NIHx8ICcnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBRVNIX1BSRU5PTTogcy5BRVNIX1BSRU5PTSB8fCAnJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRURTOiBzLkVEUyB8fCAnJywgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEdST1VQRTogcy5HUk9VUEUgfHwgJycsIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBQQVJDT1VSUzogcy5QQVJDT1VSUyB8fCAnJywgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEpVUlk6IGp1cnkuaWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNBTExFOiBqdXJ5LnJvb20sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEhFVVJFX1BBU1NBR0U6IHMudGltZVN0YXJ0LCAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSEVVUkVfRklOOiBzLnRpbWVFbmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGxldCBwb29sID0gW107CiAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRUeXBlID09PSAnRE5CJykgcG9vbCA9IHBvb2xETkI7CiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoY3VycmVudFR5cGUgPT09ICdDRkcnKSBwb29sID0gcG9vbENGRzsKICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChjdXJyZW50VHlwZSA9PT0gJ0dPJykgcG9vbCA9IHBvb2xHTzsKCiAgICAgICAgICAgICAgICAgICAgcG9vbC5mb3JFYWNoKHMgPT4gewogICAgICAgICAgICAgICAgICAgICAgICByb3dzLnB1c2goewogICAgICAgICAgICAgICAgICAgICAgICAgICAgTk9NOiBzLk5PTSwgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBQUkVOT006IHMuUFJFTk9NLCAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIERJVjogcy5ESVYsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBUVDogKHMuVFQgJiYgKHMuVFQgPT09ICdPVUknIHx8IHMuVFQgPT09IHRydWUgfHwgbm9ybWFsaXplVGV4dChzLlRUKS5pbmNsdWRlcygnVElFUlMnKSkpID8gJ09VSScgOiAnTk9OJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFFU0hfTk9NOiBzLkFFU0hfTk9NIHx8ICcnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgQUVTSF9QUkVOT006IHMuQUVTSF9QUkVOT00gfHwgJycsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBFRFM6IHMuRURTIHx8ICcnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgR1JPVVBFOiBzLkdST1VQRSB8fCAnJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFBBUkNPVVJTOiBzLlBBUkNPVVJTIHx8ICcnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgSlVSWTogJ05PTiBBRkZFQ1TDiScsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBTQUxMRTogJycsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBIRVVSRV9QQVNTQUdFOiAnJywgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBIRVVSRV9GSU46ICcnCiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICByb3dzLnNvcnQoKGEsYikgPT4gYS5OT00ubG9jYWxlQ29tcGFyZShiLk5PTSkpOwogICAgICAgICAgICAgICAgICAgIGRvd25sb2FkQ1NWKHJvd3MsIGBleHBvcnRfZWxldmVzXyR7Y3VycmVudFR5cGV9XyR7c2Vzc2lvblllYXJ9LmNzdmApOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9OwoKICAgICAgICAgICAgY29uc3QgaW5pdGlhdGVTYXZlID0gKCkgPT4gewogICAgICAgICAgICAgICAgY29uc3QgZGVmYXVsdE5hbWUgPSBgT1JBTF9QRVJESVJfJHtuZXcgRGF0ZSgpLnRvTG9jYWxlRGF0ZVN0cmluZygnZnItRlInKS5yZXBsYWNlKC9cLy9nLCAnLScpfWA7CiAgICAgICAgICAgICAgICBzZXRTYXZlRmlsZU5hbWUoZGVmYXVsdE5hbWUpOwogICAgICAgICAgICAgICAgc2V0U2hvd1NhdmVNb2RhbCh0cnVlKTsKICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIGNvbnN0IHBlcmZvcm1TYXZlID0gKCkgPT4gewogICAgICAgICAgICAgICAgY29uc3QgZGF0YSA9IHsKICAgICAgICAgICAgICAgICAgICBkYXRlOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksCiAgICAgICAgICAgICAgICAgICAgcHJvZnMsIHN0dWRlbnRzRE5CLCBzdHVkZW50c0NGRywgc3R1ZGVudHNHTywgcG9vbEROQiwgcG9vbENGRywgcG9vbEdPLCBqdXJpZXMsIHNldHRpbmdzLCBzY2hvb2xOYW1lLCBzY2hvb2xDaXR5LCBzY2hvb2xMb2dvLCBzY2hvb2xTdGFtcCwgc2Vzc2lvblllYXIsIHRlbXBsYXRlcwogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIGNvbnN0IGJsb2IgPSBuZXcgQmxvYihbSlNPTi5zdHJpbmdpZnkoZGF0YSldLCB7dHlwZTogImFwcGxpY2F0aW9uL2pzb24ifSk7CiAgICAgICAgICAgICAgICBjb25zdCB1cmwgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpOwogICAgICAgICAgICAgICAgY29uc3QgbGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTsKICAgICAgICAgICAgICAgIGxpbmsuaHJlZiA9IHVybDsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgbGV0IGZpbmFsTmFtZSA9IHNhdmVGaWxlTmFtZS50cmltKCkgfHwgYE9SQUxfUEVSRElSXyR7bmV3IERhdGUoKS50b0xvY2FsZURhdGVTdHJpbmcoJ2ZyLUZSJykucmVwbGFjZSgvXC8vZywgJy0nKX1gOwogICAgICAgICAgICAgICAgaWYgKCFmaW5hbE5hbWUudG9Mb3dlckNhc2UoKS5lbmRzV2l0aCgnLmpzb24nKSkgZmluYWxOYW1lICs9ICcuanNvbic7CgogICAgICAgICAgICAgICAgbGluay5kb3dubG9hZCA9IGZpbmFsTmFtZTsKICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQobGluayk7CiAgICAgICAgICAgICAgICBsaW5rLmNsaWNrKCk7CiAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGxpbmspOwogICAgICAgICAgICAgICAgc2V0U2hvd1NhdmVNb2RhbChmYWxzZSk7CiAgICAgICAgICAgIH07CgogICAgICAgICAgICBjb25zdCBoYW5kbGVMb2FkID0gKGUpID0+IHsKICAgICAgICAgICAgICAgIGNvbnN0IGZpbGUgPSBlLnRhcmdldC5maWxlc1swXTsKICAgICAgICAgICAgICAgIGlmICghZmlsZSkgcmV0dXJuOwogICAgICAgICAgICAgICAgY29uc3QgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTsKICAgICAgICAgICAgICAgIHJlYWRlci5vbmxvYWQgPSAoZXZlbnQpID0+IHsKICAgICAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkYXRhID0gSlNPTi5wYXJzZShldmVudC50YXJnZXQucmVzdWx0KTsKICAgICAgICAgICAgICAgICAgICAgICAgc2V0UHJvZnMoZGF0YS5wcm9mcyB8fCBbXSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHNldFN0dWRlbnRzRE5CKGRhdGEuc3R1ZGVudHNETkIgfHwgW10pOwogICAgICAgICAgICAgICAgICAgICAgICBzZXRTdHVkZW50c0NGRyhkYXRhLnN0dWRlbnRzQ0ZHIHx8IFtdKTsKICAgICAgICAgICAgICAgICAgICAgICAgc2V0U3R1ZGVudHNHTyhkYXRhLnN0dWRlbnRzR08gfHwgW10pOwogICAgICAgICAgICAgICAgICAgICAgICBzZXRQb29sRE5CKGRhdGEucG9vbEROQiB8fCBbXSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHNldFBvb2xDRkcoZGF0YS5wb29sQ0ZHIHx8IFtdKTsKICAgICAgICAgICAgICAgICAgICAgICAgc2V0UG9vbEdPKGRhdGEucG9vbEdPIHx8IFtdKTsKICAgICAgICAgICAgICAgICAgICAgICAgc2V0SnVyaWVzKGRhdGEuanVyaWVzIHx8IHsgRE5COiB7fSwgQ0ZHOiB7fSwgR086IHt9IH0pOwogICAgICAgICAgICAgICAgICAgICAgICBzZXRTZXR0aW5ncyhkYXRhLnNldHRpbmdzIHx8IHNldHRpbmdzKTsKICAgICAgICAgICAgICAgICAgICAgICAgc2V0U2Nob29sTmFtZShkYXRhLnNjaG9vbE5hbWUgfHwgJycpOwogICAgICAgICAgICAgICAgICAgICAgICBzZXRTY2hvb2xDaXR5KGRhdGEuc2Nob29sQ2l0eSB8fCAnJyk7CiAgICAgICAgICAgICAgICAgICAgICAgIHNldFNjaG9vbExvZ28oZGF0YS5zY2hvb2xMb2dvIHx8IG51bGwpOwogICAgICAgICAgICAgICAgICAgICAgICBzZXRTY2hvb2xTdGFtcChkYXRhLnNjaG9vbFN0YW1wIHx8IG51bGwpOyAvLyBMb2FkIHN0YW1wCiAgICAgICAgICAgICAgICAgICAgICAgIHNldFNlc3Npb25ZZWFyKGRhdGEuc2Vzc2lvblllYXIgfHwgJzIwMjYnKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGEudGVtcGxhdGVzKSBzZXRUZW1wbGF0ZXMoZGF0YS50ZW1wbGF0ZXMpOwogICAgICAgICAgICAgICAgICAgICAgICBhbGVydCgiRG9ubsOpZXMgcmVzdGF1csOpZXMgISIpOwogICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycikgeyBhbGVydCgiRXJyZXVyIGZpY2hpZXIuIik7IH0KICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICByZWFkZXIucmVhZEFzVGV4dChmaWxlKTsKICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIGNvbnN0IGhhbmRsZUxvZ29VcGxvYWQgPSAoZSkgPT4gewogICAgICAgICAgICAgICAgY29uc3QgZmlsZSA9IGUudGFyZ2V0LmZpbGVzWzBdOwogICAgICAgICAgICAgICAgaWYgKGZpbGUpIHsKICAgICAgICAgICAgICAgICAgICBjb25zdCByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpOwogICAgICAgICAgICAgICAgICAgIHJlYWRlci5vbmxvYWRlbmQgPSAoKSA9PiBzZXRTY2hvb2xMb2dvKHJlYWRlci5yZXN1bHQpOwogICAgICAgICAgICAgICAgICAgIHJlYWRlci5yZWFkQXNEYXRhVVJMKGZpbGUpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9OwoKICAgICAgICAgICAgY29uc3QgaGFuZGxlU3RhbXBVcGxvYWQgPSAoZSkgPT4gewogICAgICAgICAgICAgICAgY29uc3QgZmlsZSA9IGUudGFyZ2V0LmZpbGVzWzBdOwogICAgICAgICAgICAgICAgaWYgKGZpbGUpIHsKICAgICAgICAgICAgICAgICAgICBjb25zdCByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpOwogICAgICAgICAgICAgICAgICAgIHJlYWRlci5vbmxvYWRlbmQgPSAoKSA9PiBzZXRTY2hvb2xTdGFtcChyZWFkZXIucmVzdWx0KTsKICAgICAgICAgICAgICAgICAgICByZWFkZXIucmVhZEFzRGF0YVVSTChmaWxlKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfTsKICAgICAgICAgICAgCiAgICAgICAgICAgIGNvbnN0IGhhbmRsZVJlc2V0ID0gKCkgPT4gewogICAgICAgICAgICAgICAgIGlmKGNvbmZpcm0oIkFUVEVOVElPTiA6IFRvdXQgZWZmYWNlciA/IikpIHsKICAgICAgICAgICAgICAgICAgICBzZXRQcm9mcyhbXSk7IHNldFN0dWRlbnRzRE5CKFtdKTsgc2V0U3R1ZGVudHNDRkcoW10pOyBzZXRTdHVkZW50c0dPKFtdKTsKICAgICAgICAgICAgICAgICAgICBzZXRQb29sRE5CKFtdKTsgc2V0UG9vbENGRyhbXSk7IHNldFBvb2xHTyhbXSk7CiAgICAgICAgICAgICAgICAgICAgc2V0SnVyaWVzKHsgRE5COiB7fSwgQ0ZHOiB7fSwgR086IHt9IH0pOwogICAgICAgICAgICAgICAgICAgIHNldFNjaG9vbE5hbWUoJycpOyBzZXRTY2hvb2xDaXR5KCcnKTsgc2V0U2Nob29sTG9nbyhudWxsKTsKICAgICAgICAgICAgICAgICAgICBzZXRTY2hvb2xTdGFtcChudWxsKTsKICAgICAgICAgICAgICAgICAgICBzZXRTZXNzaW9uWWVhcignMjAyNicpOyAKICAgICAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgnb3JhbF9ibGFuY19kYXRhJyk7IC8vIFBMVVMgREUgTE9DQUxTVE9SQUdFCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH07CgogICAgICAgICAgICAvLyBBREQgQVVUT1NBVkUgSEVSRQogICAgICAgICAgICB1c2VFZmZlY3QoKCkgPT4gewogICAgICAgICAgICAgICAgY29uc3Qgc2F2ZWREYXRhID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ29yYWxfYmxhbmNfZGF0YScpOwogICAgICAgICAgICAgICAgaWYgKHNhdmVkRGF0YSkgewogICAgICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBKU09OLnBhcnNlKHNhdmVkRGF0YSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkYXRhLnByb2ZzKSBzZXRQcm9mcyhkYXRhLnByb2ZzKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGEuc3R1ZGVudHNETkIpIHNldFN0dWRlbnRzRE5CKGRhdGEuc3R1ZGVudHNETkIpOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YS5zdHVkZW50c0NGRykgc2V0U3R1ZGVudHNDRkcoZGF0YS5zdHVkZW50c0NGRyk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkYXRhLnN0dWRlbnRzR08pIHNldFN0dWRlbnRzR08oZGF0YS5zdHVkZW50c0dPKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGEucG9vbEROQikgc2V0UG9vbEROQihkYXRhLnBvb2xETkIpOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YS5wb29sQ0ZHKSBzZXRQb29sQ0ZHKGRhdGEucG9vbENGRyk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkYXRhLnBvb2xHTykgc2V0UG9vbEdPKGRhdGEucG9vbEdPKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGEuanVyaWVzKSBzZXRKdXJpZXMoZGF0YS5qdXJpZXMpOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YS5zZXR0aW5ncykgc2V0U2V0dGluZ3MoZGF0YS5zZXR0aW5ncyk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkYXRhLnNjaG9vbE5hbWUpIHNldFNjaG9vbE5hbWUoZGF0YS5zY2hvb2xOYW1lKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGEuc2Nob29sQ2l0eSkgc2V0U2Nob29sQ2l0eShkYXRhLnNjaG9vbENpdHkpOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YS5zY2hvb2xMb2dvKSBzZXRTY2hvb2xMb2dvKGRhdGEuc2Nob29sTG9nbyk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkYXRhLnNjaG9vbFN0YW1wKSBzZXRTY2hvb2xTdGFtcChkYXRhLnNjaG9vbFN0YW1wKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGEuc2Vzc2lvblllYXIpIHNldFNlc3Npb25ZZWFyKGRhdGEuc2Vzc2lvblllYXIpOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YS50ZW1wbGF0ZXMpIHNldFRlbXBsYXRlcyhkYXRhLnRlbXBsYXRlcyk7CiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCJFcnJldXIgY2hhcmdlbWVudCBhdXRvLXNhdmUiLCBlKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sIFtdKTsKCiAgICAgICAgICAgIHVzZUVmZmVjdCgoKSA9PiB7CiAgICAgICAgICAgICAgICBjb25zdCBkYXRhVG9TYXZlID0gewogICAgICAgICAgICAgICAgICAgIGRhdGU6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSwKICAgICAgICAgICAgICAgICAgICBwcm9mcywgc3R1ZGVudHNETkIsIHN0dWRlbnRzQ0ZHLCBzdHVkZW50c0dPLAogICAgICAgICAgICAgICAgICAgIHBvb2xETkIsIHBvb2xDRkcsIHBvb2xHTywKICAgICAgICAgICAgICAgICAgICBqdXJpZXMsIHNldHRpbmdzLCBzY2hvb2xOYW1lLCBzY2hvb2xDaXR5LCBzY2hvb2xMb2dvLCBzY2hvb2xTdGFtcCwgc2Vzc2lvblllYXIsIHRlbXBsYXRlcwogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdvcmFsX2JsYW5jX2RhdGEnLCBKU09OLnN0cmluZ2lmeShkYXRhVG9TYXZlKSk7CiAgICAgICAgICAgIH0sIFtwcm9mcywgc3R1ZGVudHNETkIsIHN0dWRlbnRzQ0ZHLCBzdHVkZW50c0dPLCBwb29sRE5CLCBwb29sQ0ZHLCBwb29sR08sIGp1cmllcywgc2V0dGluZ3MsIHNjaG9vbE5hbWUsIHNjaG9vbENpdHksIHNjaG9vbExvZ28sIHNjaG9vbFN0YW1wLCBzZXNzaW9uWWVhciwgdGVtcGxhdGVzXSk7CgogICAgICAgICAgICBjb25zdCBQaWxvdGFnZVZpZXcgPSAoKSA9PiB7CiAgICAgICAgICAgICAgICBjb25zdCB0eXBlID0gcGlsb3RhZ2VUeXBlOwogICAgICAgICAgICAgICAgY29uc3QgY3VycmVudEp1cmllcyA9IGp1cmllc1t0eXBlXSB8fCB7fTsKICAgICAgICAgICAgICAgIGNvbnN0IHN0YXJ0VGltZSA9IHNldHRpbmdzW3R5cGVdPy5zdGFydFRpbWUgfHwgJzA4OjAwJzsKICAgICAgICAgICAgICAgIGNvbnN0IGxvYWRzID0gT2JqZWN0LnZhbHVlcyhjdXJyZW50SnVyaWVzKS5tYXAoaiA9PiBjYWxjdWxhdGVKdXJ5TG9hZChqLCBzdGFydFRpbWUsIHR5cGUpKTsKICAgICAgICAgICAgICAgIGNvbnN0IHRvdGFsQ2FuZGlkYXRlcyA9IGxvYWRzLnJlZHVjZSgocywgaikgPT4gcyArIGouc3R1ZGVudENvdW50LCAwKTsKICAgICAgICAgICAgICAgIGNvbnN0IGF2Z01pbnV0ZXMgPSBsb2Fkcy5sZW5ndGggPyAobG9hZHMucmVkdWNlKChzLCBqKSA9PiBzICsgai50b3RhbE1pbnV0ZXMsIDApIC8gbG9hZHMubGVuZ3RoKSA6IDA7CiAgICAgICAgICAgICAgICBjb25zdCBlbmRNYXggPSBsb2Fkcy5sZW5ndGggPyBtaW51dGVzVG9ISE1NKE1hdGgubWF4KC4uLmxvYWRzLm1hcChqID0+IHRpbWVUb01pbnV0ZXMoai5lbmRUaW1lIHx8IHN0YXJ0VGltZSkpKSkgOiBzdGFydFRpbWU7CiAgICAgICAgICAgICAgICBjb25zdCBvdmVybG9hZGVkID0gbG9hZHMuZmlsdGVyKGogPT4gZ2V0TG9hZFN0YXR1cyhqLnRvdGFsTWludXRlcywgYXZnTWludXRlcykubGFiZWwgPT09ICdTdXJjaGFyZ8OpJykubGVuZ3RoOwogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICByZXR1cm4gKAogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJiZy13aGl0ZSByb3VuZGVkLTJ4bCBzaGFkb3ctc20gYm9yZGVyIGJvcmRlci1zbGF0ZS0yMDAvNjAgcC02Ij4KICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMiBtYi02Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMiBjbGFzc05hbWU9InRleHQtMnhsIGZvbnQtYmxhY2sgdGV4dC1zbGF0ZS05MDAiPlBpbG90YWdlIHt0eXBlfTwvaDI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iZmxleCBnYXAtMiBtbC1hdXRvIGl0ZW1zLWNlbnRlciI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9ImZsZXggZ2FwLTEgYmctc2xhdGUtMTAwIHJvdW5kZWQtbGcgcC0xIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBvbkNsaWNrPXsoKSA9PiBzZXRPcmFsVmFyaWFudCgnQkxBTkMnKX0gY2xhc3NOYW1lPXtgcHgtMyBweS0xLjUgcm91bmRlZC1tZCB0ZXh0LXhzIGZvbnQtZXh0cmFib2xkIHRyYW5zaXRpb24gJHtvcmFsVmFyaWFudCA9PT0gJ0JMQU5DJyA/ICdiZy13aGl0ZSBzaGFkb3cgdGV4dC1zbGF0ZS05MDAnIDogJ3RleHQtc2xhdGUtNjAwJ31gfT5PcmFsIGJsYW5jPC9idXR0b24+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gb25DbGljaz17KCkgPT4gc2V0T3JhbFZhcmlhbnQoJ0ZSJyl9IGNsYXNzTmFtZT17YHB4LTMgcHktMS41IHJvdW5kZWQtbWQgdGV4dC14cyBmb250LWV4dHJhYm9sZCB0cmFuc2l0aW9uICR7b3JhbFZhcmlhbnQgPT09ICdGUicgPyAnYmctd2hpdGUgc2hhZG93IHRleHQtc2xhdGUtOTAwJyA6ICd0ZXh0LXNsYXRlLTYwMCd9YH0+T3JhbCBkZSBmcmFuw6dhaXM8L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7WydETkInLCAnQ0ZHJywgJ0dPJ10ubWFwKHQgPT4gKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGtleT17dH0gb25DbGljaz17KCkgPT4gc2V0UGlsb3RhZ2VUeXBlKHQpfSBjbGFzc05hbWU9e2BweC00IHB5LTIgcm91bmRlZC1sZyB0ZXh0LXNtIGZvbnQtYm9sZCB0cmFuc2l0aW9uICR7cGlsb3RhZ2VUeXBlID09PSB0ID8gJ2JnLXNsYXRlLTgwMCB0ZXh0LXdoaXRlJyA6ICd0ZXh0LXNsYXRlLTYwMCBiZy1zbGF0ZS0xMDAnfWB9Pnt0fTwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkpfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iZ3JpZCBncmlkLWNvbHMtNCBnYXAtNCBtYi02Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJyb3VuZGVkLTJ4bCBib3JkZXIgYm9yZGVyLXNsYXRlLTIwMCBwLTQgYmctc2xhdGUtNTAiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJ0ZXh0LVsxMXB4XSBmb250LWJvbGQgdXBwZXJjYXNlIHRleHQtc2xhdGUtNDAwIj5DYW5kaWRhdHM8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0idGV4dC0zeGwgZm9udC1ibGFjayI+e3RvdGFsQ2FuZGlkYXRlc308L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJyb3VuZGVkLTJ4bCBib3JkZXIgYm9yZGVyLXNsYXRlLTIwMCBwLTQgYmctc2xhdGUtNTAiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJ0ZXh0LVsxMXB4XSBmb250LWJvbGQgdXBwZXJjYXNlIHRleHQtc2xhdGUtNDAwIj5GaW4gRXN0aW3DqWU8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0idGV4dC0zeGwgZm9udC1ibGFjayI+e2VuZE1heH08L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJyb3VuZGVkLTJ4bCBib3JkZXIgYm9yZGVyLXNsYXRlLTIwMCBwLTQgYmctc2xhdGUtNTAiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJ0ZXh0LVsxMXB4XSBmb250LWJvbGQgdXBwZXJjYXNlIHRleHQtc2xhdGUtNDAwIj5TdXJjaGFyZ2VzPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9e2B0ZXh0LTN4bCBmb250LWJsYWNrICR7b3ZlcmxvYWRlZCA+IDAgPyAndGV4dC1yZWQtNjAwJyA6ICd0ZXh0LWVtZXJhbGQtNjAwJ31gfT57b3ZlcmxvYWRlZH08L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgPHRhYmxlIGNsYXNzTmFtZT0idy1mdWxsIHRleHQtc20gYm9yZGVyIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aGVhZCBjbGFzc05hbWU9ImJnLXNsYXRlLTEwMCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRyPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGggY2xhc3NOYW1lPSJwLTMgdGV4dC1sZWZ0Ij5KdXJ5PC90aD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRoIGNsYXNzTmFtZT0icC0zIHRleHQtY2VudGVyIj7DiWzDqHZlczwvdGg+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aCBjbGFzc05hbWU9InAtMyB0ZXh0LWNlbnRlciI+UGFzc2FnZXM8L3RoPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGggY2xhc3NOYW1lPSJwLTMgdGV4dC1jZW50ZXIiPkR1csOpZTwvdGg+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aCBjbGFzc05hbWU9InAtMyB0ZXh0LWNlbnRlciI+RmluPC90aD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRoIGNsYXNzTmFtZT0icC0zIHRleHQtY2VudGVyIj7DiXRhdDwvdGg+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90cj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGhlYWQ+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGJvZHk+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2xvYWRzLm1hcChqID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3QgPSBnZXRMb2FkU3RhdHVzKGoudG90YWxNaW51dGVzLCBhdmdNaW51dGVzKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ciBrZXk9e2ouanVyeUlkfSBjbGFzc05hbWU9ImJvcmRlci1iIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQgY2xhc3NOYW1lPSJwLTMgZm9udC1ib2xkIj5Ke2ouanVyeUlkfTwvdGQ+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIGNsYXNzTmFtZT0icC0zIHRleHQtY2VudGVyIj57ai5zdHVkZW50Q291bnR9PC90ZD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQgY2xhc3NOYW1lPSJwLTMgdGV4dC1jZW50ZXIiPntqLnBhc3NhZ2VDb3VudH08L3RkPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBjbGFzc05hbWU9InAtMyB0ZXh0LWNlbnRlciI+e2Zvcm1hdE1pbnV0ZXNITShqLnRvdGFsTWludXRlcyl9PC90ZD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQgY2xhc3NOYW1lPSJwLTMgdGV4dC1jZW50ZXIiPntqLmVuZFRpbWV9PC90ZD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQgY2xhc3NOYW1lPSJwLTMgdGV4dC1jZW50ZXIiPjxzcGFuIGNsYXNzTmFtZT17YHB4LTIgcHktMSByb3VuZGVkIHRleHQteHMgZm9udC1ib2xkICR7c3QuY2xzfWB9PntzdC5sYWJlbH08L3NwYW4+PC90ZD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdHI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSl9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3Rib2R5PgogICAgICAgICAgICAgICAgICAgICAgICA8L3RhYmxlPgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ibWluLWgtc2NyZWVuIGZsZXggZmxleC1jb2wgZm9udC1zYW5zIHRleHQtc2xhdGUtODAwIGJnLXNsYXRlLTUwIj4KICAgICAgICAgICAgICAgICAgICB7LyogQkFOTklFUkUgUFJJTkNJUEFMRSBBTUVMSU9SRUUgKi99CiAgICAgICAgICAgICAgICAgICAgPGhlYWRlciBjbGFzc05hbWU9ImJnLWdyYWRpZW50LXRvLXIgZnJvbS1ibHVlLTkwMCB2aWEtaW5kaWdvLTkwMCB0by1wdXJwbGUtOTAwIHRleHQtd2hpdGUgcC00IHNoYWRvdy14bCBuby1wcmludCByZWxhdGl2ZSBvdmVyZmxvdy1oaWRkZW4iPgogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iYWJzb2x1dGUgaW5zZXQtMCBiZy1bdXJsKCdodHRwczovL3d3dy50cmFuc3BhcmVudHRleHR1cmVzLmNvbS9wYXR0ZXJucy9jdWJlcy5wbmcnKV0gb3BhY2l0eS0xMCBtaXgtYmxlbmQtb3ZlcmxheSI+PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJjb250YWluZXIgbXgtYXV0byBmbGV4IGp1c3RpZnktYmV0d2VlbiBpdGVtcy1jZW50ZXIgcmVsYXRpdmUgei0xMCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTMiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJiZy13aGl0ZS8xMCBwLTIgcm91bmRlZC14bCBiYWNrZHJvcC1ibHVyLXNtIGJvcmRlciBib3JkZXItd2hpdGUvMTAgc2hhZG93LWlubmVyIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEdyYWR1YXRpb25DYXAgY2xhc3NOYW1lPSJ0ZXh0LWJsdWUtMjAwIHctOCBoLTgiIC8+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT0idGV4dC0yeGwgZm9udC1ibGFjayB0cmFja2luZy10aWdodCB0ZXh0LXdoaXRlIGRyb3Atc2hhZG93LXNtIj5QRVJESVI8c3BhbiBjbGFzc05hbWU9InRleHQtYmx1ZS0zMDAiPkZPUk1BTkNFPC9zcGFuPjwvaDE+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJ0ZXh0LXhzIHRleHQtYmx1ZS0yMDAgZm9udC1tZWRpdW0gdHJhY2tpbmctd2lkZXN0IHVwcGVyY2FzZSBvcGFjaXR5LTkwIj5PcmFsIEROQi1DRkctR08ge3Nlc3Npb25ZZWFyfSAtIFYxMTwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iZmxleCBnYXAtMyBpdGVtcy1jZW50ZXIiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJmbGV4IGJnLWJsYWNrLzIwIHJvdW5kZWQteGwgcC0xIGJhY2tkcm9wLWJsdXItc20gYm9yZGVyIGJvcmRlci13aGl0ZS81IHNoYWRvdy1pbm5lciI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzc05hbWU9ImZsZXggaXRlbXMtY2VudGVyIGdhcC0yIGN1cnNvci1wb2ludGVyIGhvdmVyOmJnLXdoaXRlLzEwIHB4LTMgcHktMiByb3VuZGVkLWxnIHRleHQtc20gdGV4dC1ibHVlLTEwMCB0cmFuc2l0aW9uLWNvbG9ycyI+PFVwbG9hZCBzaXplPXsxNn0gLz4gUmVzdGF1cmVyPGlucHV0IHR5cGU9ImZpbGUiIGFjY2VwdD0iLmpzb24iIG9uQ2hhbmdlPXtoYW5kbGVMb2FkfSBjbGFzc05hbWU9ImhpZGRlbiIgLz48L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0idy1weCBiZy13aGl0ZS8xMCBteS0xIj48L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBvbkNsaWNrPXtpbml0aWF0ZVNhdmV9IGNsYXNzTmFtZT0iZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTIgaG92ZXI6Ymctd2hpdGUvMTAgcHgtMyBweS0yIHJvdW5kZWQtbGcgdGV4dC1zbSB0ZXh0LWJsdWUtMTAwIHRyYW5zaXRpb24tY29sb3JzIj48U2F2ZSBzaXplPXsxNn0gLz4gU2F1dmVnYXJkZXI8L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIG9uQ2xpY2s9e2dlbmVyYXRlRGVtb0RhdGF9IGNsYXNzTmFtZT0iYmctZ3JhZGllbnQtdG8tciBmcm9tLXB1cnBsZS01MDAgdG8taW5kaWdvLTYwMCB0ZXh0LXdoaXRlIHB4LTQgcHktMiByb3VuZGVkLXhsIHNoYWRvdy1sZyBmb250LWJvbGQgZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTIgaG92ZXI6ZnJvbS1wdXJwbGUtNjAwIGhvdmVyOnRvLWluZGlnby03MDAgdHJhbnNpdGlvbi1hbGwgdGV4dC1zbSBib3JkZXIgYm9yZGVyLXdoaXRlLzIwIj48U3BhcmtsZXMgc2l6ZT17MTZ9IC8+IE1vZGUgRMOpbW88L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIG9uQ2xpY2s9eygpID0+IHsgc2V0UHJpbnRJbml0aWFsTW9kZSgnU1RVREVOVFMnKTsgc2V0U2hvd1ByaW50KHRydWUpOyB9fSBjbGFzc05hbWU9ImJnLXdoaXRlIHRleHQtaW5kaWdvLTkwMCBweC02IHB5LTMgcm91bmRlZC14bCBzaGFkb3ctbGcgZm9udC1ib2xkIGZsZXggaXRlbXMtY2VudGVyIGdhcC0yIGhvdmVyOmJnLWJsdWUtNTAgdHJhbnNpdGlvbi1hbGwgYm9yZGVyIGJvcmRlci1ibHVlLTEwMCB0cmFuc2Zvcm0gaG92ZXI6LXRyYW5zbGF0ZS15LTAuNSI+PFByaW50ZXIgc2l6ZT17MjB9IGNsYXNzTmFtZT0idGV4dC1pbmRpZ28tNjAwIiAvPiBDb252b2NhdGlvbnM8L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8L2hlYWRlcj4KCiAgICAgICAgICAgICAgICAgICAgPG5hdiBjbGFzc05hbWU9ImJnLXdoaXRlIGJvcmRlci1iIGJvcmRlci1ncmF5LTIwMCBuby1wcmludCBzaGFkb3ctc20gei0xMCBzdGlja3kgdG9wLTAiPgogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iY29udGFpbmVyIG14LWF1dG8gZmxleCBweC00IGdhcC04IG92ZXJmbG93LXgtYXV0byI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIG9uQ2xpY2s9eygpID0+IHNldEFjdGl2ZVRhYignRE5CJyl9IGNsYXNzTmFtZT17YHJlbGF0aXZlIHB4LTYgcHktNSBmb250LWJvbGQgdGV4dC1sZyBmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMiB3aGl0ZXNwYWNlLW5vd3JhcCAke2FjdGl2ZVRhYiA9PT0gJ0ROQicgPyAndGV4dC1ibHVlLTcwMCcgOiAndGV4dC1ncmF5LTQwMCBob3Zlcjp0ZXh0LWdyYXktNjAwJ31gfT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Qm9va09wZW4gc2l6ZT17MjB9IGNsYXNzTmFtZT17YWN0aXZlVGFiID09PSAnRE5CJyA/ICd0ZXh0LWJsdWUtNjAwJyA6ICd0ZXh0LWdyYXktNDAwJ30gLz4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBETkIgPHNwYW4gY2xhc3NOYW1lPSJtbC0yIGJnLWJsdWUtMTAwIHRleHQtYmx1ZS04MDAgdGV4dC14cyBweC0yIHB5LTAuNSByb3VuZGVkLWZ1bGwiPntwb29sRE5CLmxlbmd0aH0gLyB7c3R1ZGVudHNETkIubGVuZ3RofTwvc3Bhbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7YWN0aXZlVGFiID09PSAnRE5CJyAmJiA8ZGl2IGNsYXNzTmFtZT0iYWJzb2x1dGUgYm90dG9tLTAgbGVmdC0wIHJpZ2h0LTAgaC0xIGJnLWJsdWUtNjAwIHJvdW5kZWQtdC1mdWxsIj48L2Rpdj59CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gb25DbGljaz17KCkgPT4gc2V0QWN0aXZlVGFiKCdDRkcnKX0gY2xhc3NOYW1lPXtgcmVsYXRpdmUgcHgtNiBweS01IGZvbnQtYm9sZCB0ZXh0LWxnIGZsZXggaXRlbXMtY2VudGVyIGdhcC0yIHdoaXRlc3BhY2Utbm93cmFwICR7YWN0aXZlVGFiID09PSAnQ0ZHJyA/ICd0ZXh0LWVtZXJhbGQtNzAwJyA6ICd0ZXh0LWdyYXktNDAwIGhvdmVyOnRleHQtZ3JheS02MDAnfWB9PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxBd2FyZCBzaXplPXsyMH0gY2xhc3NOYW1lPXthY3RpdmVUYWIgPT09ICdDRkcnID8gJ3RleHQtZW1lcmFsZC02MDAnIDogJ3RleHQtZ3JheS00MDAnfSAvPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIENGRyA8c3BhbiBjbGFzc05hbWU9Im1sLTIgYmctZW1lcmFsZC0xMDAgdGV4dC1lbWVyYWxkLTgwMCB0ZXh0LXhzIHB4LTIgcHktMC41IHJvdW5kZWQtZnVsbCI+e3Bvb2xDRkcubGVuZ3RofSAvIHtzdHVkZW50c0NGRy5sZW5ndGh9PC9zcGFuPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHthY3RpdmVUYWIgPT09ICdDRkcnICYmIDxkaXYgY2xhc3NOYW1lPSJhYnNvbHV0ZSBib3R0b20tMCBsZWZ0LTAgcmlnaHQtMCBoLTEgYmctZW1lcmFsZC02MDAgcm91bmRlZC10LWZ1bGwiPjwvZGl2Pn0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBvbkNsaWNrPXsoKSA9PiBzZXRBY3RpdmVUYWIoJ0dPJyl9IGNsYXNzTmFtZT17YHJlbGF0aXZlIHB4LTYgcHktNSBmb250LWJvbGQgdGV4dC1sZyBmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMiB3aGl0ZXNwYWNlLW5vd3JhcCAke2FjdGl2ZVRhYiA9PT0gJ0dPJyA/ICd0ZXh0LXJvc2UtNzAwJyA6ICd0ZXh0LWdyYXktNDAwIGhvdmVyOnRleHQtZ3JheS02MDAnfWB9PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxNaWMgc2l6ZT17MjB9IGNsYXNzTmFtZT17YWN0aXZlVGFiID09PSAnR08nID8gJ3RleHQtcm9zZS02MDAnIDogJ3RleHQtZ3JheS00MDAnfSAvPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEdSQU5EIE9SQUwgPHNwYW4gY2xhc3NOYW1lPSJtbC0yIGJnLXJvc2UtMTAwIHRleHQtcm9zZS04MDAgdGV4dC14cyBweC0yIHB5LTAuNSByb3VuZGVkLWZ1bGwiPntwb29sR08ubGVuZ3RofSAvIHtzdHVkZW50c0dPLmxlbmd0aH08L3NwYW4+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2FjdGl2ZVRhYiA9PT0gJ0dPJyAmJiA8ZGl2IGNsYXNzTmFtZT0iYWJzb2x1dGUgYm90dG9tLTAgbGVmdC0wIHJpZ2h0LTAgaC0xIGJnLXJvc2UtNjAwIHJvdW5kZWQtdC1mdWxsIj48L2Rpdj59CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gb25DbGljaz17KCkgPT4gc2V0QWN0aXZlVGFiKCdQSUxPVEFHRScpfSBjbGFzc05hbWU9e2ByZWxhdGl2ZSBweC02IHB5LTUgZm9udC1ib2xkIHRleHQtbGcgZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTIgd2hpdGVzcGFjZS1ub3dyYXAgJHthY3RpdmVUYWIgPT09ICdQSUxPVEFHRScgPyAndGV4dC1wdXJwbGUtNzAwJyA6ICd0ZXh0LWdyYXktNDAwIGhvdmVyOnRleHQtZ3JheS02MDAnfWB9PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxQaWVDaGFydCBzaXplPXsyMH0gY2xhc3NOYW1lPXthY3RpdmVUYWIgPT09ICdQSUxPVEFHRScgPyAndGV4dC1wdXJwbGUtNjAwJyA6ICd0ZXh0LWdyYXktNDAwJ30gLz4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBQSUxPVEFHRQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHthY3RpdmVUYWIgPT09ICdQSUxPVEFHRScgJiYgPGRpdiBjbGFzc05hbWU9ImFic29sdXRlIGJvdHRvbS0wIGxlZnQtMCByaWdodC0wIGgtMSBiZy1wdXJwbGUtNjAwIHJvdW5kZWQtdC1mdWxsIj48L2Rpdj59CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIG9uQ2xpY2s9eygpID0+IHNldEFjdGl2ZVRhYignQURNSU4nKX0gY2xhc3NOYW1lPXtgcmVsYXRpdmUgcHgtNiBweS01IGZvbnQtYm9sZCB0ZXh0LWxnIGZsZXggaXRlbXMtY2VudGVyIGdhcC0yIHdoaXRlc3BhY2Utbm93cmFwICR7YWN0aXZlVGFiID09PSAnQURNSU4nID8gJ3RleHQtc2xhdGUtOTAwJyA6ICd0ZXh0LWdyYXktNDAwIGhvdmVyOnRleHQtZ3JheS02MDAnfWB9PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTaGllbGQgc2l6ZT17MjB9IGNsYXNzTmFtZT17YWN0aXZlVGFiID09PSAnQURNSU4nID8gJ3RleHQtc2xhdGUtOTAwJyA6ICd0ZXh0LWdyYXktNDAwJ30gLz4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBRE1JTgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHthY3RpdmVUYWIgPT09ICdBRE1JTicgJiYgPGRpdiBjbGFzc05hbWU9ImFic29sdXRlIGJvdHRvbS0wIGxlZnQtMCByaWdodC0wIGgtMSBiZy1zbGF0ZS05MDAgcm91bmRlZC10LWZ1bGwiPjwvZGl2Pn0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBvbkNsaWNrPXsoKSA9PiBzZXRBY3RpdmVUYWIoJ0FJREVTJyl9IGNsYXNzTmFtZT17YHJlbGF0aXZlIHB4LTYgcHktNSBmb250LWJvbGQgdGV4dC1sZyBmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMiB3aGl0ZXNwYWNlLW5vd3JhcCAke2FjdGl2ZVRhYiA9PT0gJ0FJREVTJyA/ICd0ZXh0LXRlYWwtNzAwJyA6ICd0ZXh0LWdyYXktNDAwIGhvdmVyOnRleHQtZ3JheS02MDAnfWB9PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxIZWxwQ2lyY2xlIHNpemU9ezIwfSBjbGFzc05hbWU9e2FjdGl2ZVRhYiA9PT0gJ0FJREVTJyA/ICd0ZXh0LXRlYWwtNjAwJyA6ICd0ZXh0LWdyYXktNDAwJ30gLz4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBSURFUwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHthY3RpdmVUYWIgPT09ICdBSURFUycgJiYgPGRpdiBjbGFzc05hbWU9ImFic29sdXRlIGJvdHRvbS0wIGxlZnQtMCByaWdodC0wIGgtMSBiZy10ZWFsLTYwMCByb3VuZGVkLXQtZnVsbCI+PC9kaXY+fQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgIDwvbmF2PgoKICAgICAgICAgICAgICAgICAgICA8bWFpbiBjbGFzc05hbWU9ImZsZXgtMSBjb250YWluZXIgbXgtYXV0byBwLTYgZmxleCBmbGV4LWNvbCBnYXAtNiBuby1wcmludCI+CiAgICAgICAgICAgICAgICAgICAgICAgIHthY3RpdmVUYWIgPT09ICdBSURFUycgPyAoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SGVscFZpZXcgLz4KICAgICAgICAgICAgICAgICAgICAgICAgKSA6IGFjdGl2ZVRhYiA9PT0gJ1BJTE9UQUdFJyA/ICgKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxQaWxvdGFnZVZpZXcgLz4KICAgICAgICAgICAgICAgICAgICAgICAgKSA6IGFjdGl2ZVRhYiA9PT0gJ0FETUlOJyA/ICgKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxBZG1pblZpZXcgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25PcGVuTm90ZXM9eygpID0+IHsgc2V0UHJpbnRJbml0aWFsTW9kZSgnTk9UQVRJT04nKTsgc2V0U2hvd1ByaW50KHRydWUpOyB9fQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uT3BlbkVtYXJnZW1lbnQ9eygpID0+IHsgc2V0UHJpbnRJbml0aWFsTW9kZSgnRU1BUkdFTUVOVCcpOyBzZXRTaG93UHJpbnQodHJ1ZSk7IH19CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPgogICAgICAgICAgICAgICAgICAgICAgICApIDogKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgPD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7LyogQkFSUkUgRCdPVVRJTFMgKi99CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9ImJnLXdoaXRlIHAtNSByb3VuZGVkLTJ4bCBzaGFkb3ctc20gYm9yZGVyIGJvcmRlci1zbGF0ZS0yMDAvNjAgZmxleCBmbGV4LXdyYXAgZ2FwLTYganVzdGlmeS1iZXR3ZWVuIGl0ZW1zLWNlbnRlciI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJmbGV4IGdhcC00IGl0ZW1zLWNlbnRlciI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9ImZsZXggZmxleC1jb2wgZ2FwLTEuNSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzTmFtZT0idGV4dC1bMTFweF0gZm9udC1ib2xkIHRleHQtc2xhdGUtNDAwIHVwcGVyY2FzZSBtbC0xIj7DiXRhYmxpc3NlbWVudDwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9ImZsZXggaXRlbXMtY2VudGVyIGdhcC0yIGJnLXNsYXRlLTUwIHAtMiByb3VuZGVkLXhsIGJvcmRlciBib3JkZXItc2xhdGUtMjAwIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzTmFtZT0iY3Vyc29yLXBvaW50ZXIgaG92ZXI6Ymctd2hpdGUgcC0xIHJvdW5kZWQtbGcgYm9yZGVyIGJvcmRlci10cmFuc3BhcmVudCBob3Zlcjpib3JkZXItc2xhdGUtMjAwIiB0aXRsZT0iTG9nbyBkZSBsJ8OpdGFibGlzc2VtZW50Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtzY2hvb2xMb2dvID8gPGltZyBzcmM9e3NjaG9vbExvZ299IGNsYXNzTmFtZT0idy04IGgtOCBvYmplY3QtY29udGFpbiIgLz4gOiA8ZGl2IGNsYXNzTmFtZT0idy04IGgtOCBiZy1zbGF0ZS0yMDAgcm91bmRlZCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciB0ZXh0LXNsYXRlLTQwMCI+PFVwbG9hZCBzaXplPXsxNH0gLz48L2Rpdj59CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0iZmlsZSIgYWNjZXB0PSJpbWFnZS8qIiBvbkNoYW5nZT17aGFuZGxlTG9nb1VwbG9hZH0gY2xhc3NOYW1lPSJoaWRkZW4iIC8+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzc05hbWU9ImN1cnNvci1wb2ludGVyIGhvdmVyOmJnLXdoaXRlIHAtMSByb3VuZGVkLWxnIGJvcmRlciBib3JkZXItdHJhbnNwYXJlbnQgaG92ZXI6Ym9yZGVyLXNsYXRlLTIwMCIgdGl0bGU9IkNhY2hldCBkZSBsJ8OpdGFibGlzc2VtZW50Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtzY2hvb2xTdGFtcCA/IDxpbWcgc3JjPXtzY2hvb2xTdGFtcH0gY2xhc3NOYW1lPSJ3LTggaC04IG9iamVjdC1jb250YWluIiAvPiA6IDxkaXYgY2xhc3NOYW1lPSJ3LTggaC04IGJnLXNsYXRlLTIwMCByb3VuZGVkIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIHRleHQtc2xhdGUtNDAwIj48U3RhbXAgc2l6ZT17MTR9IC8+PC9kaXY+fQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9ImZpbGUiIGFjY2VwdD0iaW1hZ2UvKiIgb25DaGFuZ2U9e2hhbmRsZVN0YW1wVXBsb2FkfSBjbGFzc05hbWU9ImhpZGRlbiIgLz4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9InRleHQiIHZhbHVlPXtzY2hvb2xOYW1lfSBvbkNoYW5nZT17KGUpID0+IHNldFNjaG9vbE5hbWUoZS50YXJnZXQudmFsdWUpfSBjbGFzc05hbWU9ImJnLXRyYW5zcGFyZW50IG91dGxpbmUtbm9uZSB3LTMyIHRleHQtc20gZm9udC1tZWRpdW0iIHBsYWNlaG9sZGVyPSJOb20gQ29sbMOoZ2UiIC8+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiB2YWx1ZT17c2Nob29sQ2l0eX0gb25DaGFuZ2U9eyhlKSA9PiBzZXRTY2hvb2xDaXR5KGUudGFyZ2V0LnZhbHVlKX0gY2xhc3NOYW1lPSJiZy10cmFuc3BhcmVudCBvdXRsaW5lLW5vbmUgdy0yNCB0ZXh0LXNtIGZvbnQtbWVkaXVtIGJvcmRlci1sIHBsLTIiIHBsYWNlaG9sZGVyPSJWaWxsZSIgLz4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iZmxleCBmbGV4LWNvbCBnYXAtMS41Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3NOYW1lPSJ0ZXh0LVsxMXB4XSBmb250LWJvbGQgdGV4dC1zbGF0ZS00MDAgdXBwZXJjYXNlIG1sLTEiPkNvbmZpZ3VyYXRpb248L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJmbGV4IGdhcC0yIGl0ZW1zLXN0YXJ0Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9ImZsZXggZmxleC1jb2wgaXRlbXMtY2VudGVyIGdhcC0xIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMiBiZy1zbGF0ZS01MCBweC0zIHB5LTIgcm91bmRlZC14bCBib3JkZXIgYm9yZGVyLXNsYXRlLTIwMCIgdGl0bGU9IlNlc3Npb24gKEFubsOpZSkiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxDYWxlbmRhciBzaXplPXsxNn0gY2xhc3NOYW1lPSJ0ZXh0LXNsYXRlLTQwMCIgLz4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0idGV4dCIgdmFsdWU9e3Nlc3Npb25ZZWFyfSBvbkNoYW5nZT17KGUpID0+IHNldFNlc3Npb25ZZWFyKGUudGFyZ2V0LnZhbHVlKX0gY2xhc3NOYW1lPSJiZy10cmFuc3BhcmVudCBvdXRsaW5lLW5vbmUgZm9udC1ib2xkIHRleHQtc2xhdGUtNzAwIHctMTIgdGV4dC1zbSIgcGxhY2Vob2xkZXI9IjIwMjYiIC8+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT0idGV4dC1bMTBweF0gdGV4dC1zbGF0ZS00MDAgZm9udC1tZWRpdW0iPihTZXNzaW9uKTwvc3Bhbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iZmxleCBmbGV4LWNvbCBpdGVtcy1jZW50ZXIgZ2FwLTEiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9ImZsZXggaXRlbXMtY2VudGVyIGdhcC0yIGJnLXNsYXRlLTUwIHB4LTMgcHktMiByb3VuZGVkLXhsIGJvcmRlciBib3JkZXItc2xhdGUtMjAwIiB0aXRsZT0iSGV1cmUgZGUgZMOpYnV0Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Q2xvY2sgc2l6ZT17MTZ9IGNsYXNzTmFtZT0idGV4dC1zbGF0ZS00MDAiIC8+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9InRpbWUiIHZhbHVlPXtzZXR0aW5nc1thY3RpdmVUYWJdLnN0YXJ0VGltZX0gb25DaGFuZ2U9eyhlKSA9PiBzZXRTZXR0aW5ncyh7Li4uc2V0dGluZ3MsIFthY3RpdmVUYWJdOiB7Li4uc2V0dGluZ3NbYWN0aXZlVGFiXSwgc3RhcnRUaW1lOiBlLnRhcmdldC52YWx1ZX19KX0gY2xhc3NOYW1lPSJiZy10cmFuc3BhcmVudCBvdXRsaW5lLW5vbmUgZm9udC1ib2xkIHRleHQtc2xhdGUtNzAwIHctMjAgdGV4dC1zbSIgLz4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPSJ0ZXh0LVsxMHB4XSB0ZXh0LXNsYXRlLTQwMCBmb250LW1lZGl1bSI+KETDqWJ1dCk8L3NwYW4+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9ImZsZXggZmxleC1jb2wgaXRlbXMtY2VudGVyIGdhcC0xIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMiBiZy1zbGF0ZS01MCBweC0zIHB5LTIgcm91bmRlZC14bCBib3JkZXIgYm9yZGVyLXNsYXRlLTIwMCIgdGl0bGU9Ik5vbWJyZSBkZSBqdXJ5cyI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFVzZXJzIHNpemU9ezE2fSBjbGFzc05hbWU9InRleHQtc2xhdGUtNDAwIiAvPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJudW1iZXIiIG1pbj0iMSIgbWF4PSIzMCIgdmFsdWU9e3NldHRpbmdzW2FjdGl2ZVRhYl0uanVyeUNvdW50fSBvbkNoYW5nZT17KGUpID0+IHNldFNldHRpbmdzKHsuLi5zZXR0aW5ncywgW2FjdGl2ZVRhYl06IHsuLi5zZXR0aW5nc1thY3RpdmVUYWJdLCBqdXJ5Q291bnQ6IHBhcnNlSW50KGUudGFyZ2V0LnZhbHVlKX19KX0gY2xhc3NOYW1lPSJiZy10cmFuc3BhcmVudCBvdXRsaW5lLW5vbmUgZm9udC1ib2xkIHRleHQtc2xhdGUtNzAwIHctMTIgdGV4dC1zbSIgLz4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPSJ0ZXh0LVsxMHB4XSB0ZXh0LXNsYXRlLTQwMCBmb250LW1lZGl1bSI+KE5CIGRlIGp1cnlzKTwvc3Bhbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iZmxleCBmbGV4LWNvbCBpdGVtcy1jZW50ZXIgZ2FwLTEiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9ImZsZXggaXRlbXMtY2VudGVyIGdhcC0yIGJnLXNsYXRlLTUwIHB4LTMgcHktMiByb3VuZGVkLXhsIGJvcmRlciBib3JkZXItc2xhdGUtMjAwIiB0aXRsZT0iRGF0ZSBkZSBsJ2V4YW1lbiI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPENhbGVuZGFyIHNpemU9ezE2fSBjbGFzc05hbWU9InRleHQtc2xhdGUtNDAwIiAvPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJkYXRlIiB2YWx1ZT17c2V0dGluZ3NbYWN0aXZlVGFiXS5kYXRlIHx8ICcnfSBvbkNoYW5nZT17KGUpID0+IHNldFNldHRpbmdzKHsuLi5zZXR0aW5ncywgW2FjdGl2ZVRhYl06IHsuLi5zZXR0aW5nc1thY3RpdmVUYWJdLCBkYXRlOiBlLnRhcmdldC52YWx1ZX19KX0gY2xhc3NOYW1lPSJiZy10cmFuc3BhcmVudCBvdXRsaW5lLW5vbmUgZm9udC1ib2xkIHRleHQtc2xhdGUtNzAwIHRleHQtc20iIC8+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT0idGV4dC1bMTBweF0gdGV4dC1zbGF0ZS00MDAgZm9udC1tZWRpdW0iPihEYXRlIGRlIGwnZXhhbWVuKTwvc3Bhbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iZmxleCBmbGV4LWNvbCBpdGVtcy1jZW50ZXIgZ2FwLTEiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9ImZsZXggaXRlbXMtY2VudGVyIGdhcC0yIGJnLXNsYXRlLTUwIHB4LTMgcHktMiByb3VuZGVkLXhsIGJvcmRlciBib3JkZXItc2xhdGUtMjAwIiB0aXRsZT0iTm9tIGRlIGwnw6lwcmV1dmUiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUeXBlIHNpemU9ezE2fSBjbGFzc05hbWU9InRleHQtc2xhdGUtNDAwIiAvPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiB2YWx1ZT17c2V0dGluZ3NbYWN0aXZlVGFiXS5leGFtTmFtZSB8fCAnJ30gb25DaGFuZ2U9eyhlKSA9PiBzZXRTZXR0aW5ncyh7Li4uc2V0dGluZ3MsIFthY3RpdmVUYWJdOiB7Li4uc2V0dGluZ3NbYWN0aXZlVGFiXSwgZXhhbU5hbWU6IGUudGFyZ2V0LnZhbHVlfX0pfSBjbGFzc05hbWU9ImJnLXRyYW5zcGFyZW50IG91dGxpbmUtbm9uZSBmb250LWJvbGQgdGV4dC1zbGF0ZS03MDAgdy0zMyB0ZXh0LXNtIiBwbGFjZWhvbGRlcj0iTm9tIMOpcHJldXZlIiAvPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9InRleHQtWzEwcHhdIHRleHQtc2xhdGUtNDAwIGZvbnQtbWVkaXVtIj4oTm9tIMOJcHJldXZlKTwvc3Bhbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iZmxleCBnYXAtNCBpdGVtcy1jZW50ZXIiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBvbkNsaWNrPXtoYW5kbGVBdXRvRGlzdHJpYnV0aW9ufSBjbGFzc05hbWU9ImJnLWluZGlnby01MCBob3ZlcjpiZy1pbmRpZ28tMTAwIHRleHQtaW5kaWdvLTcwMCBib3JkZXIgYm9yZGVyLWluZGlnby0yMDAgcm91bmRlZC14bCBweC00IHB5LTIgZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTIgdHJhbnNpdGlvbi1hbGwgZm9udC1ib2xkIHRleHQtc20iPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxaYXAgc2l6ZT17MTZ9IC8+IFLDqXBhcnRpdGlvbiBhdXRvIMOJbMOodmVzIHVuaXF1ZW1lbnQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBvbkNsaWNrPXtoYW5kbGVFbXB0eUp1cmllc30gY2xhc3NOYW1lPSJiZy1yZWQtNTAgaG92ZXI6YmctcmVkLTEwMCB0ZXh0LXJlZC03MDAgYm9yZGVyIGJvcmRlci1yZWQtMjAwIHJvdW5kZWQteGwgcHgtMyBweS0yIGZsZXggaXRlbXMtY2VudGVyIGdhcC0yIHRyYW5zaXRpb24tYWxsIGZvbnQtYm9sZCB0ZXh0LXNtIiB0aXRsZT0iVmlkZXIgbGVzIGp1cnlzIGV0IHJlbWV0dHJlIGVuIGF0dGVudGUiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxSb3RhdGVDY3cgc2l6ZT17MTZ9IC8+IFZpZGVyCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJmbGV4IGZsZXgtY29sIGdhcC0xLjUiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzc05hbWU9InRleHQtWzExcHhdIGZvbnQtYm9sZCB0ZXh0LXNsYXRlLTQwMCB1cHBlcmNhc2UgbWwtMSI+SW1wb3J0cyBDU1Y8L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJmbGV4IGdhcC0yIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEZpbGVVcGxvYWRlciBsYWJlbD0iUHJvZnMiIG9uRGF0YUxvYWRlZD17aGFuZGxlUHJvZnNMb2FkfSBmaWVsZHM9e1snQ0lWJywgJ05PTScsICdQUkVOT00nLCAnTUFUSUVSRSddfSBjb2xvcj0iaW5kaWdvIiAvPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8RmlsZVVwbG9hZGVyIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw9e2DDiWzDqHZlcyAke2FjdGl2ZVRhYn1gfSAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uRGF0YUxvYWRlZD17YWN0aXZlVGFiID09PSAnRE5CJyA/IGhhbmRsZVN0dWRlbnRzRE5CTG9hZCA6IGFjdGl2ZVRhYiA9PT0gJ0NGRycgPyBoYW5kbGVTdHVkZW50c0NGR0xvYWQgOiBoYW5kbGVTdHVkZW50c0dPTG9hZH0gCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZHM9e1snTk9NJywgJ1BSRU5PTScsICdESVYnLCAnVFQnXX0gCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvcj17YWN0aXZlVGFiID09PSAnRE5CJyA/ICdibHVlJyA6IGFjdGl2ZVRhYiA9PT0gJ0NGRycgPyAnZ3JlZW4nIDogJ3Jvc2UnfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJmbGV4IGZsZXgtY29sIGdhcC0xLjUgcGwtNCBib3JkZXItbCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzTmFtZT0idGV4dC1bMTFweF0gZm9udC1ib2xkIHRleHQtb3JhbmdlLTQwMCB1cHBlcmNhc2UgbWwtMSI+UGF1c2UgR8OpbsOpcmFsZTwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9ImZsZXggaXRlbXMtY2VudGVyIGdhcC0xIGJnLW9yYW5nZS01MCBweC0yIHB5LTEgcm91bmRlZC14bCBib3JkZXIgYm9yZGVyLW9yYW5nZS0yMDAiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0idGltZSIgdmFsdWU9e2JyZWFrQ29uZmlnLnRpbWV9IG9uQ2hhbmdlPXsoZSkgPT4gc2V0QnJlYWtDb25maWcoey4uLmJyZWFrQ29uZmlnLCB0aW1lOiBlLnRhcmdldC52YWx1ZX0pfSBjbGFzc05hbWU9ImJnLXRyYW5zcGFyZW50IHctMTYgdGV4dC14cyBmb250LWJvbGQgdGV4dC1vcmFuZ2UtODAwIiAvPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0ibnVtYmVyIiBtaW49IjUiIHZhbHVlPXticmVha0NvbmZpZy5kdXJhdGlvbn0gb25DaGFuZ2U9eyhlKSA9PiBzZXRCcmVha0NvbmZpZyh7Li4uYnJlYWtDb25maWcsIGR1cmF0aW9uOiBwYXJzZUludChlLnRhcmdldC52YWx1ZSl9KX0gY2xhc3NOYW1lPSJ3LTEwIHRleHQteHMgdGV4dC1jZW50ZXIgYm9yZGVyIHJvdW5kZWQiIC8+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gb25DbGljaz17aGFuZGxlQWRkR2xvYmFsQnJlYWt9IGNsYXNzTmFtZT0iYmctb3JhbmdlLTUwMCB0ZXh0LXdoaXRlIHJvdW5kZWQgcC0xIGhvdmVyOmJnLW9yYW5nZS02MDAiPjxQbHVzIHNpemU9ezEyfSAvPjwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9ImZsZXggZmxleC1jb2wgZ2FwLTEuNSBib3JkZXItbCBwbC0zIGJvcmRlci1ncmF5LTIwMCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzTmFtZT0idGV4dC1bMTFweF0gZm9udC1ib2xkIHRleHQtc2xhdGUtNDAwIHVwcGVyY2FzZSB0cmFja2luZy13aWRlciBtbC0xIj5FeHBvcnQgKENTVik8L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJmbGV4IGZsZXgtY29sIGdhcC0yIGgtZnVsbCBqdXN0aWZ5LWNlbnRlciI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gb25DbGljaz17KCkgPT4gZXhwb3J0RGF0YSgnUFJPRlMnKX0gY2xhc3NOYW1lPSJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMiBweC0zIHB5LTEuNSBiZy1pbmRpZ28tNTAgdGV4dC1pbmRpZ28tNzAwIHJvdW5kZWQtbGcgaG92ZXI6YmctaW5kaWdvLTEwMCB0cmFuc2l0aW9uIHRleHQteHMgZm9udC1ib2xkIHctZnVsbCIgdGl0bGU9IkV4cG9ydGVyIGxhIGxpc3RlIGRlcyBwcm9mZXNzZXVycyI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8RG93bmxvYWQgc2l6ZT17MTR9IC8+IFByb2ZzCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIG9uQ2xpY2s9eygpID0+IGV4cG9ydERhdGEoJ1NUVURFTlRTJyl9IGNsYXNzTmFtZT17YGZsZXggaXRlbXMtY2VudGVyIGdhcC0yIHB4LTMgcHktMS41IHJvdW5kZWQtbGcgdHJhbnNpdGlvbiB0ZXh0LXhzIGZvbnQtYm9sZCB3LWZ1bGwgJHthY3RpdmVUYWIgPT09ICdETkInID8gJ2JnLWJsdWUtNTAgdGV4dC1ibHVlLTcwMCBob3ZlcjpiZy1ibHVlLTEwMCcgOiBhY3RpdmVUYWIgPT09ICdDRkcnID8gJ2JnLWVtZXJhbGQtNTAgdGV4dC1lbWVyYWxkLTcwMCBob3ZlcjpiZy1lbWVyYWxkLTEwMCcgOiAnYmctcm9zZS01MCB0ZXh0LXJvc2UtNzAwIGhvdmVyOmJnLXJvc2UtMTAwJ31gfSB0aXRsZT0iRXhwb3J0ZXIgbGEgbGlzdGUgZGVzIMOpbMOodmVzIGF2ZWMgYWZmZWN0YXRpb25zIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxEb3dubG9hZCBzaXplPXsxNH0gLz4gw4lsw6h2ZXMge2FjdGl2ZVRhYn0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHthY3RpdmVUYWIgPT09ICdETkInICYmICgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9ImJnLWJsdWUtNTAgYm9yZGVyLWwtNCBib3JkZXItYmx1ZS01MDAgcC00IHJvdW5kZWQtci14bCBzaGFkb3ctc20gZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTQiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9ImJnLXdoaXRlIHAtMiByb3VuZGVkLWZ1bGwgdGV4dC1ibHVlLTYwMCI+PEJvb2tPcGVuIHNpemU9ezI0fSAvPjwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDMgY2xhc3NOYW1lPSJ0ZXh0LXhzIGZvbnQtYm9sZCB0ZXh0LWJsdWUtNDAwIHVwcGVyY2FzZSB0cmFja2luZy13aWRlc3QgbWItMC41Ij5Nb2RlIGQnZW1wbG9pIEROQjwvaDM+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPSJ0ZXh0LWJsdWUtOTAwIHRleHQtc20iPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3Ryb25nPkluZGl2aWR1ZWwgOjwvc3Ryb25nPiAxNSBtaW4gKDUnIGV4cG9zw6kgKyAxMCcgZW50cmV0aWVuKS4gPHN0cm9uZz5Db2xsZWN0aWYgOjwvc3Ryb25nPiAyNSBtaW4gKDEwJyArIDE1JykuPGJyLz4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPSJvcGFjaXR5LTgwIj5QbGFjZXogZCdhYm9yZCBsZXMgbWVtYnJlcyBkZXMganVyeXMuIEdsaXNzZXogZW5zdWl0ZSBsZXMgw6lsw6h2ZXMgdmVycyBsZXMganVyeXMuIFVuZSBwYXN0aWxsZSA8c3BhbiBjbGFzc05hbWU9InRleHQtZ3JlZW4tNjAwIGZvbnQtYm9sZCI+VmVydGU8L3NwYW4+IGluZGlxdWUgdW5lIGNvbXBhdGliaWxpdMOpIG1hdGnDqHJlL3BhcmNvdXJzLjwvc3Bhbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3A+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2FjdGl2ZVRhYiA9PT0gJ0NGRycgJiYgKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iYmctZW1lcmFsZC01MCBib3JkZXItbC00IGJvcmRlci1lbWVyYWxkLTUwMCBwLTQgcm91bmRlZC1yLXhsIHNoYWRvdy1zbSBmbGV4IGl0ZW1zLWNlbnRlciBnYXAtNCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iYmctd2hpdGUgcC0yIHJvdW5kZWQtZnVsbCB0ZXh0LWVtZXJhbGQtNjAwIj48Qm9va09wZW4gc2l6ZT17MjR9IC8+PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMyBjbGFzc05hbWU9InRleHQteHMgZm9udC1ib2xkIHRleHQtZW1lcmFsZC00MDAgdXBwZXJjYXNlIHRyYWNraW5nLXdpZGVzdCBtYi0wLjUiPk1vZGUgZCdlbXBsb2kgQ0ZHPC9oMz4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9InRleHQtZW1lcmFsZC05MDAgdGV4dC1zbSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzdHJvbmc+T3JhbCA6PC9zdHJvbmc+IDIwIG1pbnV0ZXMgKEVudHJldGllbiBkb3NzaWVyKS4gPHN0cm9uZz5TdHJpY3RlbWVudCBpbmRpdmlkdWVsLjwvc3Ryb25nPjxici8+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT0ib3BhY2l0eS04MCI+UGxhY2V6IGQnYWJvcmQgbGVzIG1lbWJyZXMgZGVzIGp1cnlzLiBMJ8OpcHJldXZlIG5lIGNvbXBvcnRlIHBhcyBkZSBncm91cGVzLiBMZXMgdGllcnMtdGVtcHMgYsOpbsOpZmljaWVudCBkJ3VuZSBtYWpvcmF0aW9uIGF1dG9tYXRpcXVlIGR1IHRlbXBzIGRlIHBhc3NhZ2UuPC9zcGFuPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvcD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7YWN0aXZlVGFiID09PSAnR08nICYmICgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9ImJnLXJvc2UtNTAgYm9yZGVyLWwtNCBib3JkZXItcm9zZS01MDAgcC00IHJvdW5kZWQtci14bCBzaGFkb3ctc20gZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTQiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9ImJnLXdoaXRlIHAtMiByb3VuZGVkLWZ1bGwgdGV4dC1yb3NlLTYwMCI+PEJvb2tPcGVuIHNpemU9ezI0fSAvPjwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDMgY2xhc3NOYW1lPSJ0ZXh0LXhzIGZvbnQtYm9sZCB0ZXh0LXJvc2UtNDAwIHVwcGVyY2FzZSB0cmFja2luZy13aWRlc3QgbWItMC41Ij5HcmFuZCBPcmFsIC0gR2VzdGlvbiBkZXMgRURTPC9oMz4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9InRleHQtcm9zZS05MDAgZm9udC1ib2xkIHRleHQtc20iPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBQbGFjZXogZCdhYm9yZCBsZXMgbWVtYnJlcyBkZXMganVyeXMuIEF0dGVudGlvbiA6IFBhc3NhZ2Ugc3RyaWN0ZW1lbnQgaW5kaXZpZHVlbCAoMjAgbWluKS4gVGllcnMtdGVtcHMgOiAyNyBtaW4gKCsgcHLDqXBhIG1ham9yw6llKS4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJyLz5BcHLDqHMgaW1wb3J0IGRlcyDDqWzDqHZlcyBkZSBUZXJtaW5hbGUsIGNsaXF1ZXogc3VyICJEw6lmaW5pciBFRFMiIHBvdXIgYXR0cmlidWVyIGxhIHNww6ljaWFsaXTDqS4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3A+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9ImZsZXggZ2FwLTYgaC1bY2FsYygxMDB2aC0yODBweCldIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9InctMS80IGJnLXdoaXRlIHJvdW5kZWQtbGcgc2hhZG93LXNtIGJvcmRlciBib3JkZXItZ3JheS0yMDAgZmxleCBmbGV4LWNvbCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0icC0zIGJnLWdyYXktMTAwIHJvdW5kZWQtdC1sZyBib3JkZXItYiBib3JkZXItZ3JheS0yMDAgZm9udC1ib2xkIGZsZXgganVzdGlmeS1iZXR3ZWVuIGl0ZW1zLWNlbnRlciI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4+TGlzdGUgZCdBdHRlbnRlPC9zcGFuPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT0idGV4dC14cyBmb250LW5vcm1hbCBiZy1ncmF5LTIwMCBweC0yIHB5LTAuNSByb3VuZGVkLWZ1bGwiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7YWN0aXZlVGFiID09PSAnRE5CJyA/IHBvb2xETkIubGVuZ3RoIDogYWN0aXZlVGFiID09PSAnQ0ZHJyA/IHBvb2xDRkcubGVuZ3RoIDogcG9vbEdPLmxlbmd0aH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9InAtMiBiZy13aGl0ZSBib3JkZXItYiBib3JkZXItZ3JheS0yMDAiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJyZWxhdGl2ZSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9InRleHQiIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9IlJlY2hlcmNoZXIgw6lsw6h2ZS4uLiIgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9InctZnVsbCBib3JkZXIgcm91bmRlZC1sZyBwbC04IHByLTIgcHktMS41IHRleHQtc20gZm9jdXM6b3V0bGluZS1ub25lIGZvY3VzOnJpbmctMiBmb2N1czpyaW5nLWJsdWUtMTAwIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU9e3NlYXJjaFRlcm19CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17ZSA9PiBzZXRTZWFyY2hUZXJtKGUudGFyZ2V0LnZhbHVlKX0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNlYXJjaCBzaXplPXsxNH0gY2xhc3NOYW1lPSJhYnNvbHV0ZSBsZWZ0LTIuNSB0b3AtMi41IHRleHQtZ3JheS00MDAiIC8+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtzZWFyY2hUZXJtICYmICgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gb25DbGljaz17KCkgPT4gc2V0U2VhcmNoVGVybSgiIil9IGNsYXNzTmFtZT0iYWJzb2x1dGUgcmlnaHQtMiB0b3AtMiB0ZXh0LWdyYXktNDAwIGhvdmVyOnRleHQtZ3JheS02MDAiPiZ0aW1lczs8L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJmbGV4LTEgb3ZlcmZsb3cteS1hdXRvIHAtMyBiZy1ncmF5LTUwIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7KGFjdGl2ZVRhYiA9PT0gJ0ROQicgPyBwb29sRE5CIDogYWN0aXZlVGFiID09PSAnQ0ZHJyA/IHBvb2xDRkcgOiBwb29sR08pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5maWx0ZXIocyA9PiAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICFzZWFyY2hUZXJtIHx8IAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcy5OT00udG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhzZWFyY2hUZXJtLnRvTG93ZXJDYXNlKCkpIHx8IAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcy5QUkVOT00udG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhzZWFyY2hUZXJtLnRvTG93ZXJDYXNlKCkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm1hcChzdHVkZW50ID0+ICgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFN0dWRlbnRDYXJkIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5PXtzdHVkZW50LmlkfSAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0dWRlbnQ9e3N0dWRlbnR9IAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT17YWN0aXZlVGFifSAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRyYWdnYWJsZT17dHJ1ZX0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uRHJhZ1N0YXJ0PXsoZSkgPT4gZS5kYXRhVHJhbnNmZXIuc2V0RGF0YSgic3R1ZGVudCIsIEpTT04uc3RyaW5naWZ5KHN0dWRlbnQpKX0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uRWRpdEVkcz17YWN0aXZlVGFiID09PSAnR08nID8gb3BlbkVkc01vZGFsIDogbnVsbH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uR2VuZXJhbEVkaXQ9e29wZW5HZW5lcmFsRWRpdE1vZGFsfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkpfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsoYWN0aXZlVGFiID09PSAnRE5CJyA/IHBvb2xETkIgOiBhY3RpdmVUYWIgPT09ICdDRkcnID8gcG9vbENGRyA6IHBvb2xHTykubGVuZ3RoID09PSAwICYmIDxkaXYgY2xhc3NOYW1lPSJ0ZXh0LWNlbnRlciB0ZXh0LWdyYXktNDAwIG10LTEwIGl0YWxpYyI+QXVjdW4gw6lsw6h2ZSBlbiBhdHRlbnRlLjwvZGl2Pn0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJ3LTMvNCBvdmVyZmxvdy14LWF1dG8gcGItNCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iZmxleCBnYXAtNCBoLWZ1bGwiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtPYmplY3QudmFsdWVzKGp1cmllc1thY3RpdmVUYWJdKS5tYXAoanVyeSA9PiAoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxKdXJ5Q29sdW1uCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk9e2p1cnkuaWR9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaW5nbGVKdXJ5PXtpc0ZyZW5jaE9yYWx9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBqdXJ5SWQ9e2p1cnkuaWR9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBqdXJ5RGF0YT17anVyeX0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2ZzPXtwcm9mc30KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uVXBkYXRlSnVyeT17dXBkYXRlSnVyeX0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uRHJvcFN0dWRlbnQ9e2hhbmRsZURyb3BTdHVkZW50VG9KdXJ5fQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25SZW1vdmVTdHVkZW50PXtyZW1vdmVTdHVkZW50RnJvbUp1cnl9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbk1vdmVTdHVkZW50PXttb3ZlU3R1ZGVudH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uVXBkYXRlU3R1ZGVudER1cmF0aW9uPXtoYW5kbGVVcGRhdGVTdHVkZW50SW5KdXJ5fQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhhbVR5cGU9e2FjdGl2ZVRhYn0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0VGltZT17c2V0dGluZ3NbYWN0aXZlVGFiXS5zdGFydFRpbWV9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkVkaXRFZHM9e2FjdGl2ZVRhYiA9PT0gJ0dPJyA/IG9wZW5FZHNNb2RhbCA6IG51bGx9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkdlbmVyYWxFZGl0PXtvcGVuR2VuZXJhbEVkaXRNb2RhbH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApKX0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvPgogICAgICAgICAgICAgICAgICAgICAgICApfQogICAgICAgICAgICAgICAgICAgIDwvbWFpbj4KCiAgICAgICAgICAgICAgICAgICAgPGZvb3RlciBjbGFzc05hbWU9ImJnLXNsYXRlLTUwIGJvcmRlci10IGJvcmRlci1zbGF0ZS0yMDAgcC00IHRleHQtY2VudGVyIHRleHQteHMgdGV4dC1zbGF0ZS00MDAgZmxleCBqdXN0aWZ5LWJldHdlZW4gcHgtMTAgaXRlbXMtY2VudGVyIG5vLXByaW50IG10LWF1dG8iPgogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTIiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPSJmb250LWJvbGQgdGV4dC1zbGF0ZS02MDAiPk91dGlsIHByb3Bvc8OpIHBhciBZYW5uaXMgQ0hSSVNUT04gLSBWZXJzaW9uIE9SQVVYX1YxMSAyMDI2IHwgTGVzIGRvbm7DqWVzIHNvbnQgc2F1dmVnYXJkw6llcyBsb2NhbGVtZW50LiBSZXNwZWN0ZSBsYSBSR1BELjwvc3Bhbj4KICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gb25DbGljaz17aGFuZGxlUmVzZXR9IGNsYXNzTmFtZT0idGV4dC1yZWQtNDAwIGhvdmVyOnRleHQtcmVkLTYwMCBob3ZlcjpiZy1yZWQtNTAgcHgtMyBweS0xLjUgcm91bmRlZC1sZyBmb250LWJvbGQgZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTIiPjxUcmFzaDIgc2l6ZT17MTR9IC8+IFJFU0VUPC9idXR0b24+CiAgICAgICAgICAgICAgICAgICAgPC9mb290ZXI+CgogICAgICAgICAgICAgICAgICAgIHtzaG93UHJpbnQgJiYgKAogICAgICAgICAgICAgICAgICAgICAgICA8UHJpbnRWaWV3IAogICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbG9zZT17KCkgPT4gc2V0U2hvd1ByaW50KGZhbHNlKX0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGp1cmllcz17anVyaWVzfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvZnM9e3Byb2ZzfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhhbVR5cGU9e2FjdGl2ZVRhYiA9PT0gJ1BJTE9UQUdFJyA/IHBpbG90YWdlVHlwZSA6IGFjdGl2ZVRhYn0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzRnJlbmNoT3JhbD17aXNGcmVuY2hPcmFsfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5pdGlhbFZpZXdNb2RlPXtwcmludEluaXRpYWxNb2RlfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0dGluZ3M9e3NldHRpbmdzW2FjdGl2ZVRhYiA9PT0gJ1BJTE9UQUdFJyA/IHBpbG90YWdlVHlwZSA6IGFjdGl2ZVRhYl19CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY2hvb2xOYW1lPXtzY2hvb2xOYW1lfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2Nob29sQ2l0eT17c2Nob29sQ2l0eX0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjaG9vbExvZ289e3NjaG9vbExvZ299CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY2hvb2xTdGFtcD17c2Nob29sU3RhbXB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXNzaW9uWWVhcj17c2Vzc2lvblllYXJ9IAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGVzPXt0ZW1wbGF0ZXN9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRUZW1wbGF0ZXM9e3NldFRlbXBsYXRlc30KICAgICAgICAgICAgICAgICAgICAgICAgLz4KICAgICAgICAgICAgICAgICAgICApfQoKICAgICAgICAgICAgICAgICAgICB7c2hvd0Vkc01vZGFsICYmIGN1cnJlbnRTdHVkZW50Rm9yRWRzICYmICgKICAgICAgICAgICAgICAgICAgICAgICAgPFN0dWRlbnRFZGl0TW9kYWwgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHVkZW50PXtjdXJyZW50U3R1ZGVudEZvckVkc30gCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsb3NlPXsoKSA9PiBzZXRTaG93RWRzTW9kYWwoZmFsc2UpfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgb25TYXZlPXtzYXZlRWRzfQogICAgICAgICAgICAgICAgICAgICAgICAvPgogICAgICAgICAgICAgICAgICAgICl9CgogICAgICAgICAgICAgICAgICAgIHtzaG93R2VuZXJhbEVkaXRNb2RhbCAmJiBjdXJyZW50U3R1ZGVudEZvckdlbmVyYWxFZGl0ICYmICgKICAgICAgICAgICAgICAgICAgICAgICAgPEdlbmVyYWxTdHVkZW50RWRpdE1vZGFsIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R1ZGVudD17Y3VycmVudFN0dWRlbnRGb3JHZW5lcmFsRWRpdH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4YW1UeXBlPXthY3RpdmVUYWJ9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsb3NlPXsoKSA9PiBzZXRTaG93R2VuZXJhbEVkaXRNb2RhbChmYWxzZSl9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvblNhdmU9e3NhdmVHZW5lcmFsU3R1ZGVudH0KICAgICAgICAgICAgICAgICAgICAgICAgLz4KICAgICAgICAgICAgICAgICAgICApfQoKICAgICAgICAgICAgICAgICAgICB7c2hvd1NhdmVNb2RhbCAmJiAoCiAgICAgICAgICAgICAgICAgICAgICAgIDxTYXZlTW9kYWwgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxlTmFtZT17c2F2ZUZpbGVOYW1lfSAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldEZpbGVOYW1lPXtzZXRTYXZlRmlsZU5hbWV9IAogICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbG9zZT17KCkgPT4gc2V0U2hvd1NhdmVNb2RhbChmYWxzZSl9IAogICAgICAgICAgICAgICAgICAgICAgICAgICAgb25Db25maXJtPXtwZXJmb3JtU2F2ZX0gCiAgICAgICAgICAgICAgICAgICAgICAgIC8+CiAgICAgICAgICAgICAgICAgICAgKX0KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICApOwogICAgICAgIH07CgogICAgICAgIGNvbnN0IHJvb3QgPSBSZWFjdERPTS5jcmVhdGVSb290KGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyb290JykpOwogICAgICAgIHJvb3QucmVuZGVyKDxBcHAgLz4pOwogICAgPC9zY3JpcHQ+CjwvYm9keT4KPC9odG1sPg==", "aed": "PCFET0NUWVBFIGh0bWw+CjxodG1sIGxhbmc9ImZyIj4KPGhlYWQ+CiAgICA8bWV0YSBjaGFyc2V0PSJVVEYtOCI+CiAgICA8bWV0YSBuYW1lPSJ2aWV3cG9ydCIgY29udGVudD0id2lkdGg9ZGV2aWNlLXdpZHRoLCBpbml0aWFsLXNjYWxlPTEuMCI+CiAgICA8dGl0bGU+QUVEIFBJTE9URSBCeSBTeWx2w6hyZSBNaWNoZWxldDwvdGl0bGU+CiAgICA8c2NyaXB0IHNyYz0iaHR0cHM6Ly9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMveGxzeC8wLjE4LjUveGxzeC5mdWxsLm1pbi5qcyI+PC9zY3JpcHQ+CiAgICA8bGluayByZWw9InN0eWxlc2hlZXQiIGhyZWY9Imh0dHBzOi8vY2RuanMuY2xvdWRmbGFyZS5jb20vYWpheC9saWJzL2ZvbnQtYXdlc29tZS82LjAuMC9jc3MvYWxsLm1pbi5jc3MiPgogICAgCiAgICA8c3R5bGU+CiAgICAgICAgOnJvb3QgewogICAgICAgICAgICAtLXByaW1hcnk6ICMyYzNlNTA7CiAgICAgICAgICAgIC0tc2Vjb25kYXJ5OiAjMzQ5OGRiOwogICAgICAgICAgICAtLWFjY2VudDogI2U3NGMzYzsKICAgICAgICAgICAgLS1zdWNjZXNzOiAjMjdhZTYwOwogICAgICAgICAgICAtLWJnOiAjZjBmMmY1OwogICAgICAgICAgICAtLXRleHQ6ICMzMzM7CiAgICAgICAgfQoKICAgICAgICBib2R5IHsgZm9udC1mYW1pbHk6ICdBcHRvcycsICdDYWxpYnJpJywgJ1RyZWJ1Y2hldCBNUycsIEFyaWFsLCBzYW5zLXNlcmlmOyBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1iZyk7IGNvbG9yOiB2YXIoLS10ZXh0KTsgbWFyZ2luOiAwOyBwYWRkaW5nOiAwOyBkaXNwbGF5OiBmbGV4OyBmbGV4LWRpcmVjdGlvbjogY29sdW1uOyBoZWlnaHQ6IDEwMHZoOyB9CgogICAgICAgIC8qIC0tLSBOQVZJR0FUSU9OIC0tLSAqLwogICAgICAgIG5hdiB7CiAgICAgICAgICAgIGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCg5MGRlZywgIzFhMmEzYSwgIzJjM2U1MCk7CiAgICAgICAgICAgIGNvbG9yOiB3aGl0ZTsgcGFkZGluZzogMCAxNXB4OyBoZWlnaHQ6IDYwcHg7CiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7IGFsaWduLWl0ZW1zOiBjZW50ZXI7IGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjsKICAgICAgICAgICAgYm94LXNoYWRvdzogMCAycHggNXB4IHJnYmEoMCwwLDAsMC4yKTsgei1pbmRleDogMTAwOwogICAgICAgIH0KICAgICAgICAubmF2LWxlZnQgeyBkaXNwbGF5OiBmbGV4OyBhbGlnbi1pdGVtczogY2VudGVyOyBnYXA6IDE1cHg7IH0KICAgICAgICAubmF2LXRpdGxlIHsgZm9udC1zaXplOiAxLjFyZW07IGZvbnQtd2VpZ2h0OiBib2xkOyBsZXR0ZXItc3BhY2luZzogMC41cHg7IGRpc3BsYXk6IGZsZXg7IGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47IH0KICAgICAgICAubmF2LXN1YnRpdGxlIHsgZm9udC1zaXplOiAwLjdyZW07IGNvbG9yOiAjYmRjM2M3OyBmb250LXdlaWdodDogbm9ybWFsOyB9CiAgICAgICAgLm5hdi1hY3Rpb25zIHsgZGlzcGxheTogZmxleDsgZ2FwOiAxMHB4OyBtYXJnaW4tcmlnaHQ6IDIwcHg7IGJvcmRlci1yaWdodDogMXB4IHNvbGlkIHJnYmEoMjU1LDI1NSwyNTUsMC4yKTsgcGFkZGluZy1yaWdodDogMjBweDsgfQogICAgICAgIC5idG4tbmF2LWFjdGlvbiB7IGJhY2tncm91bmQ6IHJnYmEoMjU1LDI1NSwyNTUsMC4xKTsgYm9yZGVyOiAxcHggc29saWQgcmdiYSgyNTUsMjU1LDI1NSwwLjMpOyBjb2xvcjogd2hpdGU7IHBhZGRpbmc6IDVweCAxMHB4OyBib3JkZXItcmFkaXVzOiA0cHg7IGN1cnNvcjogcG9pbnRlcjsgZm9udC1zaXplOiAwLjhyZW07IHRyYW5zaXRpb246IDAuMnM7IH0KICAgICAgICAuYnRuLW5hdi1hY3Rpb246aG92ZXIgeyBiYWNrZ3JvdW5kOiB2YXIoLS1zZWNvbmRhcnkpOyBib3JkZXItY29sb3I6IHZhcigtLXNlY29uZGFyeSk7IH0KICAgICAgICAuYnRuLWRhbmdlci1uYXYgeyBiYWNrZ3JvdW5kOiByZ2JhKDIzMSwgNzYsIDYwLCAwLjIpOyBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1hY2NlbnQpOyBjb2xvcjogI2ZmY2NjYzsgfQogICAgICAgIC5idG4tZGFuZ2VyLW5hdjpob3ZlciB7IGJhY2tncm91bmQ6IHZhcigtLWFjY2VudCk7IGNvbG9yOiB3aGl0ZTsgfQoKICAgICAgICAubmF2LXRhYnMgeyBkaXNwbGF5OiBmbGV4OyBnYXA6IDVweDsgfQogICAgICAgIC50YWItYnRuIHsKICAgICAgICAgICAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7IGJvcmRlcjogbm9uZTsgY29sb3I6ICNiZGMzYzc7CiAgICAgICAgICAgIHBhZGRpbmc6IDAgMTVweDsgaGVpZ2h0OiA2MHB4OyBjdXJzb3I6IHBvaW50ZXI7IGZvbnQtd2VpZ2h0OiA2MDA7IGZvbnQtc2l6ZTogMC45NXJlbTsKICAgICAgICAgICAgdHJhbnNpdGlvbjogYWxsIDAuMnM7IGJvcmRlci1ib3R0b206IDRweCBzb2xpZCB0cmFuc3BhcmVudDsKICAgICAgICB9CiAgICAgICAgLnRhYi1idG4uYWN0aXZlIHsgY29sb3I6IHdoaXRlOyBib3JkZXItYm90dG9tLWNvbG9yOiB2YXIoLS1zZWNvbmRhcnkpOyBiYWNrZ3JvdW5kOiByZ2JhKDAsMCwwLDAuMSk7IH0KCiAgICAgICAgLyogLS0tIExBWU9VVCAtLS0gKi8KICAgICAgICBtYWluIHsgZmxleDogMTsgb3ZlcmZsb3c6IGhpZGRlbjsgcG9zaXRpb246IHJlbGF0aXZlOyB9CiAgICAgICAgLnZpZXctc2VjdGlvbiB7CiAgICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsgdG9wOiAwOyBsZWZ0OiAwOyByaWdodDogMDsgYm90dG9tOiAwOwogICAgICAgICAgICBwYWRkaW5nOiAyMHB4OyBvdmVyZmxvdy15OiBhdXRvOyBkaXNwbGF5OiBub25lOwogICAgICAgIH0KICAgICAgICAudmlldy1zZWN0aW9uLmFjdGl2ZSB7IGRpc3BsYXk6IGJsb2NrOyB9CgogICAgICAgIC8qIC0tLSBVSSBDT01QT05FTlRTIC0tLSAqLwogICAgICAgIC5jYXJkIHsgYmFja2dyb3VuZDogd2hpdGU7IHBhZGRpbmc6IDIwcHg7IGJvcmRlci1yYWRpdXM6IDhweDsgYm94LXNoYWRvdzogMCAycHggNXB4IHJnYmEoMCwwLDAsMC4wNSk7IG1hcmdpbi1ib3R0b206IDIwcHg7IH0KICAgICAgICBzZWxlY3QsIGlucHV0W3R5cGU9dGV4dF0sIGlucHV0W3R5cGU9bnVtYmVyXSwgaW5wdXRbdHlwZT10aW1lXSB7IHBhZGRpbmc6IDhweDsgYm9yZGVyOiAxcHggc29saWQgI2RkZDsgYm9yZGVyLXJhZGl1czogNHB4OyB9CiAgICAgICAgLmJ0biB7IGJvcmRlcjogbm9uZTsgcGFkZGluZzogOHB4IDE2cHg7IGJvcmRlci1yYWRpdXM6IDRweDsgY3Vyc29yOiBwb2ludGVyOyBmb250LXdlaWdodDogYm9sZDsgfQogICAgICAgIC5idG4tcHJpbWFyeSB7IGJhY2tncm91bmQ6IHZhcigtLXNlY29uZGFyeSk7IGNvbG9yOiB3aGl0ZTsgfQogICAgICAgIC5idG4tZGFuZ2VyIHsgYmFja2dyb3VuZDogdmFyKC0tYWNjZW50KTsgY29sb3I6IHdoaXRlOyB9CiAgICAgICAgCiAgICAgICAgLyogLS0tIE1FTlUgMSA6IERBU0hCT0FSRCAtLS0gKi8KICAgICAgICAuaW1wb3J0LWhlYWRlciB7IGJhY2tncm91bmQ6IHdoaXRlOyBwYWRkaW5nOiAyMHB4OyBib3JkZXItcmFkaXVzOiA4cHg7IG1hcmdpbi1ib3R0b206IDIwcHg7IGRpc3BsYXk6IGZsZXg7IGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjsgYWxpZ24taXRlbXM6IGNlbnRlcjsgYm94LXNoYWRvdzogMCAycHggNXB4IHJnYmEoMCwwLDAsMC4wNSk7IH0KICAgICAgICAuZGFzaGJvYXJkLWdyaWQgeyBkaXNwbGF5OiBncmlkOyBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IHJlcGVhdChhdXRvLWZpbGwsIG1pbm1heCgzNTBweCwgMWZyKSk7IGdhcDogMjBweDsgfQogICAgICAgIC5hZWQtc3VtbWFyeS1jYXJkIHsgYmFja2dyb3VuZDogd2hpdGU7IGJvcmRlci1yYWRpdXM6IDEwcHg7IG92ZXJmbG93OiBoaWRkZW47IGJveC1zaGFkb3c6IDAgM3B4IDZweCByZ2JhKDAsMCwwLDAuMSk7IGJvcmRlci10b3A6IDVweCBzb2xpZCB2YXIoLS1zZWNvbmRhcnkpOyBicmVhay1pbnNpZGU6IGF2b2lkOyB9CiAgICAgICAgLmNhcmQtaGVhZGVyIHsgcGFkZGluZzogMTVweDsgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICNlZWU7IGRpc3BsYXk6IGZsZXg7IGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjsgYWxpZ24taXRlbXM6IGNlbnRlcjsgYmFja2dyb3VuZDogI2Y5ZjlmOTsgfQogICAgICAgIC5jYXJkLWJvZHkgeyBwYWRkaW5nOiAxNXB4OyBmb250LXNpemU6IDAuOXJlbTsgfQogICAgICAgIC5zdGF0LXJvdyB7IGRpc3BsYXk6IGZsZXg7IGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjsgbWFyZ2luLWJvdHRvbTogOHB4OyBwYWRkaW5nLWJvdHRvbTogOHB4OyBib3JkZXItYm90dG9tOiAxcHggZGFzaGVkICNlZWU7IH0KICAgICAgICAuY29uc3RyYWludHMtYm94IHsgbWFyZ2luLXRvcDogMTBweDsgYmFja2dyb3VuZDogI2ZmZjVmNTsgY29sb3I6ICNjMDM5MmI7IHBhZGRpbmc6IDhweDsgYm9yZGVyLXJhZGl1czogNHB4OyBmb250LXNpemU6IDAuODVyZW07IH0KCiAgICAgICAgLyogQmFkZ2UgcG91ciBxdW90aXTDqSBub24tc3RhbmRhcmQgKi8KICAgICAgICAuYmFkZ2UtY3VzdG9tIHsgYmFja2dyb3VuZDogI2U3NGMzYyAhaW1wb3J0YW50OyB9CiAgICAgICAgLmJhZGdlLXN0YW5kYXJkIHsgYmFja2dyb3VuZDogdmFyKC0tc2Vjb25kYXJ5KTsgfQoKICAgICAgICAvKiAtLS0gTUVOVSAyIDogUExBTk5JTkcgLS0tICovCiAgICAgICAgLnBsYW5uZXItdG9vbGJhciB7CiAgICAgICAgICAgIGJhY2tncm91bmQ6IHdoaXRlOyBwYWRkaW5nOiAxMHB4IDE1cHg7IGJvcmRlci1yYWRpdXM6IDhweDsgbWFyZ2luLWJvdHRvbTogMTBweDsKICAgICAgICAgICAgZGlzcGxheTogZmxleDsganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOyBhbGlnbi1pdGVtczogY2VudGVyOyBnYXA6IDEwcHg7CiAgICAgICAgICAgIGJveC1zaGFkb3c6IDAgMXB4IDNweCByZ2JhKDAsMCwwLDAuMSk7IGZsZXgtd3JhcDogd3JhcDsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgLnBhbGV0dGUgeyBkaXNwbGF5OiBmbGV4OyBnYXA6IDhweDsgZmxleC13cmFwOiB3cmFwOyBhbGlnbi1pdGVtczogY2VudGVyOyB9CiAgICAgICAgLnBhbGV0dGUtYnRuIHsKICAgICAgICAgICAgcGFkZGluZzogOHB4IDEycHg7IGJvcmRlci1yYWRpdXM6IDRweDsgY3Vyc29yOiBwb2ludGVyOyBjb2xvcjogd2hpdGU7IGZvbnQtc2l6ZTogMC44NXJlbTsgZm9udC13ZWlnaHQ6IGJvbGQ7CiAgICAgICAgICAgIGJvcmRlcjogMnB4IHNvbGlkIHdoaXRlOyBib3gtc2hhZG93OiAwIDJweCA0cHggcmdiYSgwLDAsMCwwLjEpOyB0ZXh0LXNoYWRvdzogMCAxcHggMXB4IHJnYmEoMCwwLDAsMC4yKTsKICAgICAgICB9CiAgICAgICAgLnBhbGV0dGUtYnRuOmhvdmVyIHsgdHJhbnNmb3JtOiBzY2FsZSgxLjA1KTsgfQogICAgICAgIC5wYWxldHRlLWJ0bi5zZWxlY3RlZCB7IGJvcmRlci1jb2xvcjogIzMzMzsgdHJhbnNmb3JtOiBzY2FsZSgxLjEpOyBib3gtc2hhZG93OiAwIDRweCA4cHggcmdiYSgwLDAsMCwwLjIpOyB9CgogICAgICAgIC8qIENPVUxFVVJTICovCiAgICAgICAgLmJnLWdyaWxsZSB7IGJhY2tncm91bmQtY29sb3I6ICNmZjAwZmY7IH0gCiAgICAgICAgLmJnLWFkbWluIHsgYmFja2dyb3VuZC1jb2xvcjogIzAwYjg5NDsgfSAKICAgICAgICAuYmctZXR1ZGUgeyBiYWNrZ3JvdW5kLWNvbG9yOiAjOGU0NGFkOyB9IAogICAgICAgIC5iZy1zZWxmIHsgYmFja2dyb3VuZC1jb2xvcjogI2U2N2UyMjsgfSAKICAgICAgICAuYmctY291bG9pcnMgeyBiYWNrZ3JvdW5kLWNvbG9yOiAjZjFjNDBmOyBjb2xvcjogIzMzMzsgdGV4dC1zaGFkb3c6IG5vbmU7IH0KICAgICAgICAuYmctY291ciB7IGJhY2tncm91bmQtY29sb3I6ICNkNjMwMzE7IH0gCiAgICAgICAgLmJnLXN1aXZpIHsgYmFja2dyb3VuZC1jb2xvcjogIzI3YWU2MDsgfSAKICAgICAgICAuYmctZXJhc2VyIHsgYmFja2dyb3VuZC1jb2xvcjogI2RmZTZlOTsgY29sb3I6ICM2MzZlNzI7IHRleHQtc2hhZG93OiBub25lOyBib3JkZXI6IDFweCBzb2xpZCAjYjJiZWMzOyB9CgogICAgICAgIC8qIFNlcnZpY2VzIGR5bmFtaXF1ZXMgKi8KICAgICAgICAuYnRuLWFkZC1zZXJ2aWNlIHsgCiAgICAgICAgICAgIGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCgxMzVkZWcsICM2NjdlZWEgMCUsICM3NjRiYTIgMTAwJSk7IAogICAgICAgICAgICBib3JkZXI6IDJweCBkYXNoZWQgd2hpdGU7IAogICAgICAgICAgICBmb250LXNpemU6IDEuMnJlbTsgCiAgICAgICAgICAgIHBhZGRpbmc6IDhweCAxNHB4OwogICAgICAgIH0KICAgICAgICAuYnRuLWFkZC1zZXJ2aWNlOmhvdmVyIHsgdHJhbnNmb3JtOiBzY2FsZSgxLjEpOyB9CiAgICAgICAgCiAgICAgICAgLnNlcnZpY2UtZGVsZXRlIHsgCiAgICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsgdG9wOiAtNnB4OyByaWdodDogLTZweDsgCiAgICAgICAgICAgIGJhY2tncm91bmQ6ICNlNzRjM2M7IGNvbG9yOiB3aGl0ZTsgCiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDUwJTsgd2lkdGg6IDE2cHg7IGhlaWdodDogMTZweDsgCiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTBweDsgY3Vyc29yOiBwb2ludGVyOyAKICAgICAgICAgICAgZGlzcGxheTogbm9uZTsgYWxpZ24taXRlbXM6IGNlbnRlcjsganVzdGlmeS1jb250ZW50OiBjZW50ZXI7CiAgICAgICAgICAgIGJvcmRlcjogbm9uZTsgbGluZS1oZWlnaHQ6IDE7CiAgICAgICAgfQogICAgICAgIC5wYWxldHRlLWJ0bi13cmFwcGVyIHsgcG9zaXRpb246IHJlbGF0aXZlOyBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7IH0KICAgICAgICAucGFsZXR0ZS1idG4td3JhcHBlcjpob3ZlciAuc2VydmljZS1kZWxldGUgeyBkaXNwbGF5OiBmbGV4OyB9CiAgICAgICAgCiAgICAgICAgLyogTW9kYWwgcG91ciBham91dGVyIHVuIHNlcnZpY2UgZXQgY29uZmlnICovCiAgICAgICAgLm1vZGFsLW92ZXJsYXkgewogICAgICAgICAgICBwb3NpdGlvbjogZml4ZWQ7IHRvcDogMDsgbGVmdDogMDsgcmlnaHQ6IDA7IGJvdHRvbTogMDsKICAgICAgICAgICAgYmFja2dyb3VuZDogcmdiYSgwLDAsMCwwLjUpOyBkaXNwbGF5OiBub25lOyAKICAgICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjsganVzdGlmeS1jb250ZW50OiBjZW50ZXI7IHotaW5kZXg6IDEwMDA7CiAgICAgICAgfQogICAgICAgIC5tb2RhbC1vdmVybGF5LmFjdGl2ZSB7IGRpc3BsYXk6IGZsZXg7IH0KICAgICAgICAubW9kYWwtYm94IHsKICAgICAgICAgICAgYmFja2dyb3VuZDogd2hpdGU7IHBhZGRpbmc6IDI1cHg7IGJvcmRlci1yYWRpdXM6IDEycHg7CiAgICAgICAgICAgIGJveC1zaGFkb3c6IDAgMTBweCA0MHB4IHJnYmEoMCwwLDAsMC4zKTsgbWluLXdpZHRoOiAzNTBweDsKICAgICAgICAgICAgbWF4LXdpZHRoOiA1MDBweDsKICAgICAgICB9CiAgICAgICAgLm1vZGFsLWJveCBoMyB7IG1hcmdpbi10b3A6IDA7IGNvbG9yOiB2YXIoLS1wcmltYXJ5KTsgYm9yZGVyLWJvdHRvbTogMnB4IHNvbGlkIHZhcigtLXNlY29uZGFyeSk7IHBhZGRpbmctYm90dG9tOiAxMHB4OyB9CiAgICAgICAgLm1vZGFsLWJveCBsYWJlbCB7IGRpc3BsYXk6IGJsb2NrOyBtYXJnaW4tYm90dG9tOiA1cHg7IGZvbnQtd2VpZ2h0OiBib2xkOyBjb2xvcjogIzU1NTsgfQogICAgICAgIC5tb2RhbC1ib3ggaW5wdXRbdHlwZT0idGV4dCJdLCAubW9kYWwtYm94IGlucHV0W3R5cGU9Im51bWJlciJdIHsgd2lkdGg6IDEwMCU7IHBhZGRpbmc6IDEwcHg7IG1hcmdpbi1ib3R0b206IDE1cHg7IGJveC1zaXppbmc6IGJvcmRlci1ib3g7IH0KICAgICAgICAubW9kYWwtYm94IGlucHV0W3R5cGU9ImNvbG9yIl0geyB3aWR0aDogMTAwJTsgaGVpZ2h0OiA1MHB4OyBwYWRkaW5nOiAwOyBib3JkZXI6IG5vbmU7IGN1cnNvcjogcG9pbnRlcjsgbWFyZ2luLWJvdHRvbTogMTVweDsgfQogICAgICAgIC5tb2RhbC1hY3Rpb25zIHsgZGlzcGxheTogZmxleDsgZ2FwOiAxMHB4OyBqdXN0aWZ5LWNvbnRlbnQ6IGZsZXgtZW5kOyBtYXJnaW4tdG9wOiAyMHB4OyB9CiAgICAgICAgLm1vZGFsLWFjdGlvbnMgYnV0dG9uIHsgcGFkZGluZzogMTBweCAyMHB4OyBib3JkZXI6IG5vbmU7IGJvcmRlci1yYWRpdXM6IDZweDsgY3Vyc29yOiBwb2ludGVyOyBmb250LXdlaWdodDogYm9sZDsgfQogICAgICAgIC5idG4tY2FuY2VsIHsgYmFja2dyb3VuZDogI2JkYzNjNzsgY29sb3I6ICMyYzNlNTA7IH0KICAgICAgICAuYnRuLWNvbmZpcm0geyBiYWNrZ3JvdW5kOiB2YXIoLS1zZWNvbmRhcnkpOyBjb2xvcjogd2hpdGU7IH0KICAgICAgICAuY29sb3ItcHJlc2V0cyB7IGRpc3BsYXk6IGZsZXg7IGdhcDogOHB4OyBmbGV4LXdyYXA6IHdyYXA7IG1hcmdpbi1ib3R0b206IDE1cHg7IH0KICAgICAgICAuY29sb3ItcHJlc2V0IHsgCiAgICAgICAgICAgIHdpZHRoOiAzMHB4OyBoZWlnaHQ6IDMwcHg7IGJvcmRlci1yYWRpdXM6IDZweDsgY3Vyc29yOiBwb2ludGVyOyAKICAgICAgICAgICAgYm9yZGVyOiAycHggc29saWQgdHJhbnNwYXJlbnQ7IHRyYW5zaXRpb246IDAuMnM7CiAgICAgICAgfQogICAgICAgIC5jb2xvci1wcmVzZXQ6aG92ZXIgeyB0cmFuc2Zvcm06IHNjYWxlKDEuMSk7IGJvcmRlci1jb2xvcjogIzMzMzsgfQogICAgICAgIC5wcmV2aWV3LWJ0biB7IAogICAgICAgICAgICBwYWRkaW5nOiAxMHB4IDIwcHg7IGJvcmRlci1yYWRpdXM6IDZweDsgY29sb3I6IHdoaXRlOyBmb250LXdlaWdodDogYm9sZDsgCiAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjsgbWFyZ2luOiAxNXB4IDA7IHRleHQtdHJhbnNmb3JtOiB1cHBlcmNhc2U7CiAgICAgICAgfQoKICAgICAgICAvKiBMaXN0ZSBkZSBzbG90cyBwb3VyIGxhIGNvbmZpZyAqLwogICAgICAgIC5zbG90LWxpc3QgewogICAgICAgICAgICBtYXgtaGVpZ2h0OiAzMDBweDsgb3ZlcmZsb3cteTogYXV0bzsgYm9yZGVyOiAxcHggc29saWQgI2VlZTsgYm9yZGVyLXJhZGl1czogNHB4OyBwYWRkaW5nOiAxMHB4OyBtYXJnaW4tYm90dG9tOiAxNXB4OwogICAgICAgIH0KICAgICAgICAuc2xvdC1pdGVtIHsKICAgICAgICAgICAgZGlzcGxheTogZmxleDsganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOyBhbGlnbi1pdGVtczogY2VudGVyOyAKICAgICAgICAgICAgcGFkZGluZzogOHB4OyBiYWNrZ3JvdW5kOiAjZjlmOWY5OyBtYXJnaW4tYm90dG9tOiA1cHg7IGJvcmRlci1yYWRpdXM6IDRweDsgYm9yZGVyLWxlZnQ6IDNweCBzb2xpZCB2YXIoLS1zZWNvbmRhcnkpOwogICAgICAgIH0KICAgICAgICAuc2xvdC1pbnB1dHMgeyBkaXNwbGF5OiBmbGV4OyBnYXA6IDEwcHg7IG1hcmdpbi1ib3R0b206IDEwcHg7IGFsaWduLWl0ZW1zOiBmbGV4LWVuZDsgfQoKICAgICAgICAuZWR0LWNvbnRhaW5lciB7IGJhY2tncm91bmQ6IHdoaXRlOyBwYWRkaW5nOiAxNXB4OyBib3JkZXItcmFkaXVzOiA4cHg7IG92ZXJmbG93LXg6IGF1dG87IG1pbi1oZWlnaHQ6IDUwMHB4OyB9CiAgICAgICAgCiAgICAgICAgLyogVEFCTEVBVSBTVEFCSUxJU8OJICovCiAgICAgICAgLmVkdC10YWJsZSB7IHdpZHRoOiAxMDAlOyBib3JkZXItY29sbGFwc2U6IGNvbGxhcHNlOyB0YWJsZS1sYXlvdXQ6IGZpeGVkOyB9CiAgICAgICAgLmVkdC10YWJsZSB0aCB7IGJhY2tncm91bmQ6IHZhcigtLXByaW1hcnkpOyBjb2xvcjogd2hpdGU7IHBhZGRpbmc6IDEwcHg7IHRleHQtYWxpZ246IGNlbnRlcjsgYm9yZGVyOiAxcHggc29saWQgIzM0NDk1ZTsgfQogICAgICAgIC5lZHQtdGFibGUgdGQgeyAKICAgICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgI2NjYzsgaGVpZ2h0OiA0MHB4OyB3aWR0aDogMTglOyBwYWRkaW5nOiAwOyB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlOyBvdmVyZmxvdzogaGlkZGVuOwogICAgICAgIH0KICAgICAgICAuZWR0LXRhYmxlIHRkLnRpbWUtY29sIHsgCiAgICAgICAgICAgIGJhY2tncm91bmQ6ICNmMWYyZjY7IGNvbG9yOiAjMmMzZTUwOyBmb250LXdlaWdodDogYm9sZDsgd2lkdGg6IDkwcHggIWltcG9ydGFudDsgYm9yZGVyLXJpZ2h0OiAycHggc29saWQgI2JkYzNjNzsgCiAgICAgICAgICAgIGZvbnQtc2l6ZTogMC43NXJlbTsgdGV4dC1hbGlnbjogY2VudGVyOwogICAgICAgIH0KCiAgICAgICAgLmNlbGwtY29udGVudCB7CiAgICAgICAgICAgIHdpZHRoOiAxMDAlOyBoZWlnaHQ6IDEwMCU7IGRpc3BsYXk6IGZsZXg7IGFsaWduLWl0ZW1zOiBjZW50ZXI7IGp1c3RpZnktY29udGVudDogY2VudGVyOwogICAgICAgICAgICBmb250LXNpemU6IDAuNzVyZW07IGZvbnQtd2VpZ2h0OiA4MDA7IHRleHQtdHJhbnNmb3JtOiB1cHBlcmNhc2U7IAogICAgICAgICAgICB3aGl0ZS1zcGFjZTogbm93cmFwOyBvdmVyZmxvdzogaGlkZGVuOyB0ZXh0LW92ZXJmbG93OiBlbGxpcHNpczsgY29sb3I6IHdoaXRlOwogICAgICAgIH0KICAgICAgICAuY2VsbC1pbmFjdGl2ZSB7IGJhY2tncm91bmQ6ICNmOWY5Zjk7IGN1cnNvcjogbm90LWFsbG93ZWQ7IH0KICAgICAgICAuY2VsbC1ibG9ja2VkIHsgYmFja2dyb3VuZDogcmVwZWF0aW5nLWxpbmVhci1ncmFkaWVudCg0NWRlZywgI2UwZTBlMCwgI2UwZTBlMCAxMHB4LCAjZWNmMGYxIDEwcHgsICNlY2YwZjEgMjBweCk7IGhlaWdodDogMTAwJTsgfQoKICAgICAgICAvKiAtLS0gTUVOVSAzIDogR0VTVElPTiAtLS0gKi8KICAgICAgICAuZ2VzdGlvbi1ncmlkIHsgZGlzcGxheTogZ3JpZDsgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiAxZnIgMmZyOyBnYXA6IDIwcHg7IH0KICAgICAgICAuc3RhdHMtcm93IHsgZGlzcGxheTogZmxleDsgZ2FwOiAxNXB4OyBtYXJnaW4tYm90dG9tOiAyMHB4OyB9CiAgICAgICAgLmJhbGFuY2UtYm94IHsgCiAgICAgICAgICAgIGZsZXg6IDE7IHRleHQtYWxpZ246IGNlbnRlcjsgcGFkZGluZzogMjBweDsgYmFja2dyb3VuZDogdmFyKC0tcHJpbWFyeSk7IGNvbG9yOiB3aGl0ZTsgYm9yZGVyLXJhZGl1czogOHB4OyAKICAgICAgICAgICAgZGlzcGxheTogZmxleDsgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsganVzdGlmeS1jb250ZW50OiBjZW50ZXI7CiAgICAgICAgfQogICAgICAgIC5iYWxhbmNlLWJveC5zZWNvbmRhcnkgeyBiYWNrZ3JvdW5kOiAjOGU0NGFkOyB9CiAgICAgICAgLmJhbGFuY2UtYW1vdW50IHsgZm9udC1zaXplOiAycmVtOyBmb250LXdlaWdodDogYm9sZDsgbWFyZ2luOiAxMHB4IDA7IH0KICAgICAgICAuaGlzdG9yeS10YWJsZSB7IHdpZHRoOiAxMDAlOyBib3JkZXItY29sbGFwc2U6IGNvbGxhcHNlOyB9CiAgICAgICAgLmhpc3RvcnktdGFibGUgdGggeyB0ZXh0LWFsaWduOiBsZWZ0OyBwYWRkaW5nOiAxMHB4OyBib3JkZXItYm90dG9tOiAycHggc29saWQgI2VlZTsgYmFja2dyb3VuZDogI2Y5ZjlmOTsgfQogICAgICAgIC5oaXN0b3J5LXRhYmxlIHRkIHsgcGFkZGluZzogMTBweDsgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICNlZWU7IH0KCiAgICAgICAgLyogLS0tIE1FTlUgNCA6IFJFUEFSVElUSU9OIChRVUkgRkFJVCBRVU9JKSAtLS0gKi8KICAgICAgICAucmVwYXJ0aXRpb24tdG9vbGJhciB7CiAgICAgICAgICAgIGJhY2tncm91bmQ6IHdoaXRlOyBwYWRkaW5nOiAxNXB4OyBib3JkZXItcmFkaXVzOiA4cHg7IG1hcmdpbi1ib3R0b206IDE1cHg7CiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7IGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjsgYWxpZ24taXRlbXM6IGNlbnRlcjsgYm94LXNoYWRvdzogMCAxcHggM3B4IHJnYmEoMCwwLDAsMC4xKTsKICAgICAgICB9CiAgICAgICAgLnJlcGFydGl0aW9uLXRhYmxlIHsgd2lkdGg6IDEwMCU7IGJvcmRlci1jb2xsYXBzZTogY29sbGFwc2U7IHRhYmxlLWxheW91dDogYXV0bzsgfQogICAgICAgIC5yZXBhcnRpdGlvbi10YWJsZSB0aCB7IGJhY2tncm91bmQ6IHZhcigtLXByaW1hcnkpOyBjb2xvcjogd2hpdGU7IHBhZGRpbmc6IDEycHg7IGJvcmRlcjogMXB4IHNvbGlkICMzNDQ5NWU7IGZvbnQtc2l6ZTogMC45cmVtOyBwb3NpdGlvbjogc3RpY2t5OyB0b3A6IDA7IH0KICAgICAgICAucmVwYXJ0aXRpb24tdGFibGUgdGQgeyBib3JkZXI6IDFweCBzb2xpZCAjY2NjOyBwYWRkaW5nOiA4cHg7IHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7IGJhY2tncm91bmQ6IHdoaXRlOyBmb250LXNpemU6IDAuODVyZW07IGhlaWdodDogYXV0bzsgfQogICAgICAgIC5yZXBhcnRpdGlvbi10YWJsZSB0cjpudGgtY2hpbGQoZXZlbikgdGQgeyBiYWNrZ3JvdW5kLWNvbG9yOiAjZjhmOWZhOyB9CiAgICAgICAgLmFnZW50LXRhZyB7CiAgICAgICAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jazsgcGFkZGluZzogM3B4IDhweDsgbWFyZ2luOiAycHg7CiAgICAgICAgICAgIGJhY2tncm91bmQ6ICNlY2YwZjE7IGJvcmRlci1yYWRpdXM6IDEycHg7IGJvcmRlcjogMXB4IHNvbGlkICNiZGMzYzc7CiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiA2MDA7IGNvbG9yOiAjMmMzZTUwOyBmb250LXNpemU6IDAuOHJlbTsKICAgICAgICB9CgogICAgICAgIC8qIC0tLSBNRU5VIDUgOiBFTiBESVJFQ1QgKE5PVVZFQVUpIC0tLSAqLwogICAgICAgIC5saXZlLWhlYWRlciB7CiAgICAgICAgICAgIGJhY2tncm91bmQ6ICMyYzNlNTA7IGNvbG9yOiB3aGl0ZTsgcGFkZGluZzogMzBweDsgYm9yZGVyLXJhZGl1czogMTBweDsKICAgICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyOyBtYXJnaW4tYm90dG9tOiAzMHB4OyBib3gtc2hhZG93OiAwIDVweCAxNXB4IHJnYmEoMCwwLDAsMC4yKTsKICAgICAgICB9CiAgICAgICAgLmNsb2NrLXRpbWUgeyBmb250LXNpemU6IDNyZW07IGZvbnQtd2VpZ2h0OiA4MDA7IGZvbnQtZmFtaWx5OiAnU2Vnb2UgVUkgTW9ubycsIG1vbm9zcGFjZTsgfQogICAgICAgIC5jbG9jay1kYXkgeyBmb250LXNpemU6IDEuNXJlbTsgY29sb3I6ICMzNDk4ZGI7IG1hcmdpbi1ib3R0b206IDVweDsgdGV4dC10cmFuc2Zvcm06IHVwcGVyY2FzZTsgbGV0dGVyLXNwYWNpbmc6IDJweDsgfQogICAgICAgIAogICAgICAgIC5saXZlLWdyaWQgeyBkaXNwbGF5OiBncmlkOyBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IHJlcGVhdChhdXRvLWZpbGwsIG1pbm1heCgyODBweCwgMWZyKSk7IGdhcDogMjBweDsgfQogICAgICAgIC5saXZlLWNhcmQgewogICAgICAgICAgICBiYWNrZ3JvdW5kOiB3aGl0ZTsgYm9yZGVyLXJhZGl1czogMTBweDsgb3ZlcmZsb3c6IGhpZGRlbjsKICAgICAgICAgICAgYm94LXNoYWRvdzogMCAzcHggNnB4IHJnYmEoMCwwLDAsMC4xKTsKICAgICAgICAgICAgdHJhbnNpdGlvbjogdHJhbnNmb3JtIDAuMnM7CiAgICAgICAgICAgIGJvcmRlci1sZWZ0OiA1cHggc29saWQgI2NjYzsKICAgICAgICB9CiAgICAgICAgLmxpdmUtY2FyZC5hY3RpdmUgeyB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLTVweCk7IGJveC1zaGFkb3c6IDAgOHB4IDE1cHggcmdiYSgwLDAsMCwwLjE1KTsgYm9yZGVyLWxlZnQtY29sb3I6IHZhcigtLXN1Y2Nlc3MpOyB9CiAgICAgICAgLmxpdmUtY2FyZC1ib2R5IHsgcGFkZGluZzogMjBweDsgfQogICAgICAgIC5saXZlLWFnZW50LW5hbWUgeyBmb250LXNpemU6IDEuMnJlbTsgZm9udC13ZWlnaHQ6IGJvbGQ7IG1hcmdpbi1ib3R0b206IDEwcHg7IGNvbG9yOiB2YXIoLS1wcmltYXJ5KTsgfQogICAgICAgIC5saXZlLXN0YXR1cyB7IAogICAgICAgICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7IHBhZGRpbmc6IDVweCAxMHB4OyBib3JkZXItcmFkaXVzOiA0cHg7IAogICAgICAgICAgICBmb250LXNpemU6IDAuOXJlbTsgZm9udC13ZWlnaHQ6IGJvbGQ7IHRleHQtdHJhbnNmb3JtOiB1cHBlcmNhc2U7CiAgICAgICAgfQogICAgICAgIC5zZWN0aW9uLXRpdGxlIHsgbWFyZ2luOiAzMHB4IDAgMTVweCAwOyBjb2xvcjogIzdmOGM4ZDsgZm9udC1zaXplOiAxcmVtOyBib3JkZXItYm90dG9tOiAxcHggc29saWQgI2NjYzsgcGFkZGluZy1ib3R0b206IDVweDsgfQoKICAgICAgICAvKiBJTVBPUlQgSU5GTyAqLwogICAgICAgIC5pbXBvcnQtaW5mbyB7IAogICAgICAgICAgICBiYWNrZ3JvdW5kOiAjZThmNGZkOyBib3JkZXI6IDFweCBzb2xpZCAjMzQ5OGRiOyBib3JkZXItcmFkaXVzOiA4cHg7IAogICAgICAgICAgICBwYWRkaW5nOiAxNXB4OyBtYXJnaW4tYm90dG9tOiAyMHB4OyBmb250LXNpemU6IDAuOXJlbTsgCiAgICAgICAgfQogICAgICAgIC5pbXBvcnQtaW5mbyBzdHJvbmcgeyBjb2xvcjogdmFyKC0tcHJpbWFyeSk7IH0KICAgICAgICAucXVvdGl0ZS1saXN0IHsgZGlzcGxheTogZmxleDsgZ2FwOiAxNXB4OyBmbGV4LXdyYXA6IHdyYXA7IG1hcmdpbi10b3A6IDEwcHg7IH0KICAgICAgICAucXVvdGl0ZS1pdGVtIHsgYmFja2dyb3VuZDogd2hpdGU7IHBhZGRpbmc6IDVweCAxMHB4OyBib3JkZXItcmFkaXVzOiA0cHg7IGZvbnQtc2l6ZTogMC44NXJlbTsgfQoKICAgICAgICAvKiBaT05FUyBEJ0lNUFJFU1NJT04gKENhY2jDqWVzIHBhciBkw6lmYXV0KSAqLwogICAgICAgICNiYXRjaC1wcmludC1hcmVhLCAjZGFzaGJvYXJkLXByaW50LWFyZWEsICNnZXN0aW9uLXByaW50LWFyZWEsICNyZXBhcnRpdGlvbi1wcmludC1hcmVhIHsgZGlzcGxheTogbm9uZTsgfQoKICAgICAgICAvKiAtLS0gUFJJTlQgQ1NTIE9QVElNSVPDiSBQQVlTQUdFIChMQU5EU0NBUEUpIC0tLSAqLwogICAgICAgIEBtZWRpYSBwcmludCB7CiAgICAgICAgICAgIEBwYWdlIHsKICAgICAgICAgICAgICAgIHNpemU6IEE0IGxhbmRzY2FwZTsKICAgICAgICAgICAgICAgIG1hcmdpbjogNW1tOyAvKiBNYXJnZXMgcsOpZHVpdGVzIHBvdXIgbWF4aW1pc2VyIGwnZXNwYWNlICovCiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGJvZHkgeyAKICAgICAgICAgICAgICAgIC13ZWJraXQtcHJpbnQtY29sb3ItYWRqdXN0OiBleGFjdCAhaW1wb3J0YW50OyAKICAgICAgICAgICAgICAgIHByaW50LWNvbG9yLWFkanVzdDogZXhhY3QgIWltcG9ydGFudDsgCiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiB3aGl0ZTsgbWFyZ2luOiAwOyBwYWRkaW5nOiAwOyAKICAgICAgICAgICAgICAgIHdpZHRoOiAxMDAlOwogICAgICAgICAgICAgICAgZm9udC1mYW1pbHk6ICdBcHRvcycsICdDYWxpYnJpJywgJ1RyZWJ1Y2hldCBNUycsIEFyaWFsLCBzYW5zLXNlcmlmOwogICAgICAgICAgICB9CiAgICAgICAgICAgIAogICAgICAgICAgICBuYXYsIC5wbGFubmVyLXRvb2xiYXIsIC5pbXBvcnQtaGVhZGVyLCAubmF2LWFjdGlvbnMsIC50YWItYnRuLCAuaW1wb3J0LWluZm8sIC5yZXBhcnRpdGlvbi10b29sYmFyIHsgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50OyB9CiAgICAgICAgICAgIAogICAgICAgICAgICBib2R5Om5vdCgucHJpbnRpbmctbW9kZSkgLnZpZXctc2VjdGlvbiB7IGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDsgfQoKICAgICAgICAgICAgLyogSGVhZGVyIGQnaW1wcmVzc2lvbiBjb21tdW4gKi8KICAgICAgICAgICAgLnByaW50LWhlYWRlci1iYXRjaCB7IAogICAgICAgICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyOyAKICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMS4ycmVtOyAKICAgICAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiBib2xkOwogICAgICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogNXB4OyAKICAgICAgICAgICAgICAgIGJvcmRlci1ib3R0b206IDJweCBzb2xpZCAjMzMzOyAKICAgICAgICAgICAgICAgIHBhZGRpbmctYm90dG9tOiAycHg7IAogICAgICAgICAgICAgICAgdGV4dC10cmFuc2Zvcm06IHVwcGVyY2FzZTsKICAgICAgICAgICAgICAgIHBhZ2UtYnJlYWstYWZ0ZXI6IGF2b2lkOwogICAgICAgICAgICB9CiAgICAgICAgICAgIAogICAgICAgICAgICAucGFnZS1icmVhayB7IHBhZ2UtYnJlYWstYWZ0ZXI6IGFsd2F5czsgZGlzcGxheTogYmxvY2s7IGhlaWdodDogMXB4OyB9CgogICAgICAgICAgICAvKiBNT0RFOiBEYXNoYm9hcmQgKi8KICAgICAgICAgICAgYm9keS5wcmludGluZy1kYXNoYm9hcmQgbWFpbiB7IGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDsgfQogICAgICAgICAgICBib2R5LnByaW50aW5nLWRhc2hib2FyZCAjZGFzaGJvYXJkLXByaW50LWFyZWEgeyBkaXNwbGF5OiBibG9jayAhaW1wb3J0YW50OyB9CiAgICAgICAgICAgIGJvZHkucHJpbnRpbmctZGFzaGJvYXJkIC5kYXNoYm9hcmQtZ3JpZCB7IAogICAgICAgICAgICAgICAgZGlzcGxheTogZ3JpZDsgCiAgICAgICAgICAgICAgICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IDFmciAxZnIgMWZyOyAvKiAzIGNvbG9ubmVzIGVuIHBheXNhZ2UgKi8KICAgICAgICAgICAgICAgIGdhcDogMTBweDsgCiAgICAgICAgICAgICAgICBmb250LXNpemU6IDAuOHJlbTsKICAgICAgICAgICAgfQogICAgICAgICAgICBib2R5LnByaW50aW5nLWRhc2hib2FyZCAuYWVkLXN1bW1hcnktY2FyZCB7IGJveC1zaGFkb3c6IG5vbmU7IGJvcmRlcjogMXB4IHNvbGlkICNjY2M7IGJyZWFrLWluc2lkZTogYXZvaWQ7IH0KCiAgICAgICAgICAgIC8qIE1PREU6IEVEVCBCYXRjaCAoQWdlbnQgU2V1bCBvdSBUb3V0KSAtIE9QVElNSVPDiSBQQVlTQUdFICovCiAgICAgICAgICAgIGJvZHkucHJpbnRpbmctYmF0Y2ggbWFpbiB7IGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDsgfQogICAgICAgICAgICBib2R5LnByaW50aW5nLWJhdGNoICNiYXRjaC1wcmludC1hcmVhIHsgZGlzcGxheTogYmxvY2sgIWltcG9ydGFudDsgd2lkdGg6IDEwMCU7IH0KICAgICAgICAgICAgCiAgICAgICAgICAgIGJvZHkucHJpbnRpbmctYmF0Y2ggLmVkdC10YWJsZSB7IAogICAgICAgICAgICAgICAgd2lkdGg6IDEwMCU7IAogICAgICAgICAgICAgICAgZm9udC1zaXplOiAwLjdyZW07IAogICAgICAgICAgICAgICAgYm9yZGVyLWNvbGxhcHNlOiBjb2xsYXBzZTsKICAgICAgICAgICAgICAgIHRhYmxlLWxheW91dDogZml4ZWQ7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgYm9keS5wcmludGluZy1iYXRjaCAuZWR0LXRhYmxlIHRoIHsgCiAgICAgICAgICAgICAgICBwYWRkaW5nOiAycHg7IAogICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2NjYyAhaW1wb3J0YW50OyAKICAgICAgICAgICAgICAgIGNvbG9yOiBibGFjayAhaW1wb3J0YW50OyAKICAgICAgICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIGJsYWNrOwogICAgICAgICAgICAgICAgZm9udC1zaXplOiAwLjhyZW07CiAgICAgICAgICAgIH0KICAgICAgICAgICAgYm9keS5wcmludGluZy1iYXRjaCAuZWR0LXRhYmxlIHRkIHsgCiAgICAgICAgICAgICAgICBoZWlnaHQ6IDE4cHggIWltcG9ydGFudDsgLyogSGF1dGV1ciBmb3Jjw6llIHRyw6hzIHBldGl0ZSBwb3VyIHRlbmlyIHN1ciAyMWNtIGRlIGhhdXQgKi8KICAgICAgICAgICAgICAgIHBhZGRpbmc6IDA7IAogICAgICAgICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgYmxhY2s7IAogICAgICAgICAgICAgICAgdmVydGljYWwtYWxpZ246IG1pZGRsZTsKICAgICAgICAgICAgfQogICAgICAgICAgICBib2R5LnByaW50aW5nLWJhdGNoIC5jZWxsLWNvbnRlbnQgeyBmb250LXNpemU6IDAuNjVyZW07IGZvbnQtd2VpZ2h0OiBib2xkOyB9CiAgICAgICAgICAgIAogICAgICAgICAgICAvKiBNT0RFOiBHZXN0aW9uIEZpY2hlIC0gT1BUSU1JU8OJIFBBWVNBR0UgKi8KICAgICAgICAgICAgYm9keS5wcmludGluZy1nZXN0aW9uIG1haW4geyBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7IH0KICAgICAgICAgICAgYm9keS5wcmludGluZy1nZXN0aW9uICNnZXN0aW9uLXByaW50LWFyZWEgeyBkaXNwbGF5OiBibG9jayAhaW1wb3J0YW50OyBwYWRkaW5nOiAwOyB9CiAgICAgICAgICAgIAogICAgICAgICAgICAvKiBEaXNwb3NpdGlvbiBob3Jpem9udGFsZSBwb3VyIGxhIGdlc3Rpb24gKi8KICAgICAgICAgICAgYm9keS5wcmludGluZy1nZXN0aW9uIC5nZXN0aW9uLXN0YXRzLWNvbnRhaW5lciB7CiAgICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4OwogICAgICAgICAgICAgICAgd2lkdGg6IDEwMCU7CiAgICAgICAgICAgICAgICBnYXA6IDIwcHg7CiAgICAgICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAxMHB4OwogICAgICAgICAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgCiAgICAgICAgICAgIGJvZHkucHJpbnRpbmctZ2VzdGlvbiAuYmFsYW5jZS1ib3ggeyAKICAgICAgICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkICMzMzM7IAogICAgICAgICAgICAgICAgY29sb3I6IGJsYWNrICFpbXBvcnRhbnQ7IAogICAgICAgICAgICAgICAgYmFja2dyb3VuZDogd2hpdGUgIWltcG9ydGFudDsgCiAgICAgICAgICAgICAgICBwYWRkaW5nOiA1cHggMjBweDsgCiAgICAgICAgICAgICAgICBmbGV4OiAwIDAgMzAwcHg7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgYm9keS5wcmludGluZy1nZXN0aW9uIC5iYWxhbmNlLWFtb3VudCB7IGZvbnQtc2l6ZTogMS40cmVtOyBjb2xvcjogYmxhY2s7IG1hcmdpbjogNXB4IDA7IH0KICAgICAgICAgICAgCiAgICAgICAgICAgIGJvZHkucHJpbnRpbmctZ2VzdGlvbiAuaGlzdG9yeS10YWJsZSB7IGZvbnQtc2l6ZTogMC44cmVtOyB3aWR0aDogMTAwJTsgfQogICAgICAgICAgICBib2R5LnByaW50aW5nLWdlc3Rpb24gLmhpc3RvcnktdGFibGUgdGgsIGJvZHkucHJpbnRpbmctZ2VzdGlvbiAuaGlzdG9yeS10YWJsZSB0ZCB7IHBhZGRpbmc6IDRweDsgYm9yZGVyOiAxcHggc29saWQgI2NjYzsgfQoKICAgICAgICAgICAgLyogTU9ERTogUsOpcGFydGl0aW9uIC0gT1BUSU1JU8OJIFBBWVNBR0UgKi8KICAgICAgICAgICAgYm9keS5wcmludGluZy1yZXBhcnRpdGlvbiBtYWluIHsgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50OyB9CiAgICAgICAgICAgIGJvZHkucHJpbnRpbmctcmVwYXJ0aXRpb24gI3JlcGFydGl0aW9uLXByaW50LWFyZWEgeyBkaXNwbGF5OiBibG9jayAhaW1wb3J0YW50OyB3aWR0aDogMTAwJTsgcGFkZGluZzogMDsgfQogICAgICAgICAgICBib2R5LnByaW50aW5nLXJlcGFydGl0aW9uIC5yZXBhcnRpdGlvbi10YWJsZSB7IAogICAgICAgICAgICAgICAgd2lkdGg6IDEwMCU7IAogICAgICAgICAgICAgICAgZm9udC1zaXplOiAwLjY1cmVtOyAvKiBQZXRpdCBwb3VyIHRvdXQgZmFpcmUgdGVuaXIgKi8KICAgICAgICAgICAgICAgIGJvcmRlci1jb2xsYXBzZTogY29sbGFwc2U7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgYm9keS5wcmludGluZy1yZXBhcnRpdGlvbiAucmVwYXJ0aXRpb24tdGFibGUgdGgsIAogICAgICAgICAgICBib2R5LnByaW50aW5nLXJlcGFydGl0aW9uIC5yZXBhcnRpdGlvbi10YWJsZSB0ZCB7IAogICAgICAgICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgIzAwMDsgCiAgICAgICAgICAgICAgICBwYWRkaW5nOiAxcHggMnB4OyAKICAgICAgICAgICAgICAgIGhlaWdodDogMThweCAhaW1wb3J0YW50OyAvKiBIYXV0ZXVyIGNvbnRyYWludGUgKi8KICAgICAgICAgICAgICAgIG92ZXJmbG93OiBoaWRkZW47CiAgICAgICAgICAgIH0KICAgICAgICAgICAgYm9keS5wcmludGluZy1yZXBhcnRpdGlvbiAuYWdlbnQtdGFnIHsgCiAgICAgICAgICAgICAgICBib3JkZXI6IG5vbmU7IAogICAgICAgICAgICAgICAgcGFkZGluZzogMCAxcHg7IAogICAgICAgICAgICAgICAgbWFyZ2luOiAwIDFweDsgCiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDsgCiAgICAgICAgICAgICAgICBmb250LXNpemU6IDAuNnJlbTsgCiAgICAgICAgICAgICAgICBkaXNwbGF5OiBpbmxpbmU7CiAgICAgICAgICAgICAgICBsaW5lLWhlaWdodDogMTsKICAgICAgICAgICAgfQogICAgICAgICAgICAKICAgICAgICAgICAgLyogRm9yY2VyIGxlcyBjb3VsZXVycyBpbmxpbmUgw6AgcydpbXByaW1lciAqLwogICAgICAgICAgICAuY2VsbC1jb250ZW50IHsgCiAgICAgICAgICAgICAgICAtd2Via2l0LXByaW50LWNvbG9yLWFkanVzdDogZXhhY3QgIWltcG9ydGFudDsgCiAgICAgICAgICAgICAgICBwcmludC1jb2xvci1hZGp1c3Q6IGV4YWN0ICFpbXBvcnRhbnQ7IAogICAgICAgICAgICB9CiAgICAgICAgfQogICAgPC9zdHlsZT4KPC9oZWFkPgo8Ym9keT4KCjxuYXY+CiAgICA8ZGl2IGNsYXNzPSJuYXYtbGVmdCI+CiAgICAgICAgPGRpdiBjbGFzcz0ibmF2LXRpdGxlIj4KICAgICAgICAgICAgQUVEIFBJTE9URQogICAgICAgICAgICA8c3BhbiBjbGFzcz0ibmF2LXN1YnRpdGxlIj5CeSBTeWx2w6hyZSBNaWNoZWxldCAtIHYyLjkgKEFkYXB0w6llIENTVik8L3NwYW4+CiAgICAgICAgPC9kaXY+CiAgICAgICAgPGRpdiBjbGFzcz0ibmF2LWFjdGlvbnMiPgogICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJidG4tbmF2LWFjdGlvbiIgb25jbGljaz0iZG93bmxvYWRKU09OKCkiIHRpdGxlPSJTYXV2ZWdhcmRlciI+PGkgY2xhc3M9ImZhcyBmYS1kb3dubG9hZCI+PC9pPiBTYXV2ZWdhcmRlcjwvYnV0dG9uPgogICAgICAgICAgICA8bGFiZWwgY2xhc3M9ImJ0bi1uYXYtYWN0aW9uIiB0aXRsZT0iUmVzdGF1cmVyIj4KICAgICAgICAgICAgICAgIDxpIGNsYXNzPSJmYXMgZmEtdXBsb2FkIj48L2k+IFJlc3RhdXJlcgogICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9ImZpbGUiIGlkPSJqc29uSW5wdXQiIGFjY2VwdD0iLmpzb24iIHN0eWxlPSJkaXNwbGF5Om5vbmUiIG9uY2hhbmdlPSJpbXBvcnRKU09OKHRoaXMpIj4KICAgICAgICAgICAgPC9sYWJlbD4KICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYnRuLW5hdi1hY3Rpb24gYnRuLWRhbmdlci1uYXYiIG9uY2xpY2s9InJlc2V0QWxsRGF0YSgpIiB0aXRsZT0iRWZmYWNlciB0b3V0IGV0IHJlY29tbWVuY2VyIj4KICAgICAgICAgICAgICAgIDxpIGNsYXNzPSJmYXMgZmEtdHJhc2giPjwvaT4gVG91dCBFZmZhY2VyCiAgICAgICAgICAgIDwvYnV0dG9uPgogICAgICAgIDwvZGl2PgogICAgPC9kaXY+CiAgICA8ZGl2IGNsYXNzPSJuYXYtdGFicyI+CiAgICAgICAgPGJ1dHRvbiBjbGFzcz0idGFiLWJ0biBhY3RpdmUiIG9uY2xpY2s9InN3aXRjaFRhYignaW1wb3J0JykiPjEuIFZ1ZSBkJ2Vuc2VtYmxlPC9idXR0b24+CiAgICAgICAgPGJ1dHRvbiBjbGFzcz0idGFiLWJ0biIgb25jbGljaz0ic3dpdGNoVGFiKCdjb25jZXB0aW9uJykiPjIuIENvbmNlcHRpb24gRURUPC9idXR0b24+CiAgICAgICAgPGJ1dHRvbiBjbGFzcz0idGFiLWJ0biIgb25jbGljaz0ic3dpdGNoVGFiKCdnZXN0aW9uJykiPjMuIEdlc3Rpb24gUXVvdGlkaWVubmU8L2J1dHRvbj4KICAgICAgICA8YnV0dG9uIGNsYXNzPSJ0YWItYnRuIiBvbmNsaWNrPSJzd2l0Y2hUYWIoJ3JlcGFydGl0aW9uJykiPjQuIFF1aSBmYWl0IHF1b2kgPzwvYnV0dG9uPgogICAgICAgIDxidXR0b24gY2xhc3M9InRhYi1idG4iIG9uY2xpY2s9InN3aXRjaFRhYignbGl2ZScpIj41LiBFbiBEaXJlY3Q8L2J1dHRvbj4KICAgIDwvZGl2Pgo8L25hdj4KCjxtYWluPgogICAgPHNlY3Rpb24gaWQ9InZpZXctaW1wb3J0IiBjbGFzcz0idmlldy1zZWN0aW9uIGFjdGl2ZSI+CiAgICAgICAgPGRpdiBjbGFzcz0iaW1wb3J0LWhlYWRlciI+CiAgICAgICAgICAgIDxkaXY+CiAgICAgICAgICAgICAgICA8aDIgc3R5bGU9Im1hcmdpbjowOyBib3JkZXI6bm9uZTsgY29sb3I6dmFyKC0tcHJpbWFyeSkiPlRhYmxlYXUgZGUgQm9yZDwvaDI+CiAgICAgICAgICAgICAgICA8cCBzdHlsZT0ibWFyZ2luOjVweCAwIDAgMDsgY29sb3I6IzdmOGM4ZDsiPkfDqXJleiB2b3MgZWZmZWN0aWZzIEFFRCBzaW1wbGVtZW50LjwvcD4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDxkaXYgc3R5bGU9ImRpc3BsYXk6ZmxleDsgZ2FwOjEwcHg7Ij4KICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz0iYnRuIGJ0bi1wcmltYXJ5IiBzdHlsZT0iZGlzcGxheTppbmxpbmUtZmxleDsgYWxpZ24taXRlbXM6Y2VudGVyOyBnYXA6MTBweDsiPgogICAgICAgICAgICAgICAgICAgIDxpIGNsYXNzPSJmYXMgZmEtZmlsZS1leGNlbCI+PC9pPiBJbXBvcnRlciBFeGNlbAogICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJmaWxlIiBpZD0iZXhjZWxJbnB1dCIgYWNjZXB0PSIueGxzeCwgLnhscywgLmNzdiIgc3R5bGU9ImRpc3BsYXk6bm9uZSIgb25jaGFuZ2U9ImhhbmRsZUV4Y2VsKHRoaXMpIj4KICAgICAgICAgICAgICAgIDwvbGFiZWw+CiAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJidG4gYnRuLXByaW1hcnkiIG9uY2xpY2s9InByaW50RGFzaGJvYXJkKCkiIHN0eWxlPSJiYWNrZ3JvdW5kOiMzNDQ5NWU7Ij4KICAgICAgICAgICAgICAgICAgICA8aSBjbGFzcz0iZmFzIGZhLXByaW50Ij48L2k+IEltcHJpbWVyIFLDqWNhcAogICAgICAgICAgICAgICAgPC9idXR0b24+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgIDwvZGl2PgogICAgICAgIAogICAgICAgIDxkaXYgaWQ9ImltcG9ydC1pbmZvLWFyZWEiPjwvZGl2PgogICAgICAgIAogICAgICAgIDxkaXYgaWQ9ImRhc2hib2FyZC1hcmVhIiBjbGFzcz0iZGFzaGJvYXJkLWdyaWQiPgogICAgICAgICAgICA8ZGl2IHN0eWxlPSJncmlkLWNvbHVtbjogMS8tMTsgdGV4dC1hbGlnbjpjZW50ZXI7IHBhZGRpbmc6NTBweDsgY29sb3I6I2FhYTsiPgogICAgICAgICAgICAgICAgPGkgY2xhc3M9ImZhcyBmYS1mb2xkZXItb3BlbiIgc3R5bGU9ImZvbnQtc2l6ZTozcmVtOyBtYXJnaW4tYm90dG9tOjEwcHg7Ij48L2k+PGJyPgogICAgICAgICAgICAgICAgQXVjdW5lIGRvbm7DqWUuIFZldWlsbGV6IGltcG9ydGVyIHVuIGZpY2hpZXIgRXhjZWwgb3UgcmVzdGF1cmVyIHVuZSBzYXV2ZWdhcmRlLgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICA8L2Rpdj4KICAgIDwvc2VjdGlvbj4KCiAgICA8c2VjdGlvbiBpZD0idmlldy1jb25jZXB0aW9uIiBjbGFzcz0idmlldy1zZWN0aW9uIj4KICAgICAgICA8ZGl2IGNsYXNzPSJwbGFubmVyLXRvb2xiYXIiPgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJ0b29sLWdyb3VwIj4KICAgICAgICAgICAgICAgIDxsYWJlbD48c3Ryb25nPkFnZW50IDo8L3N0cm9uZz48L2xhYmVsPgogICAgICAgICAgICAgICAgPHNlbGVjdCBpZD0iYWVkLXNlbGVjdC1jb25jZXB0aW9uIiBvbmNoYW5nZT0iY2hhbmdlQUVEKCdjb25jZXB0aW9uJykiPgogICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IiI+LS0gU8OpbGVjdGlvbm5lciAtLTwvb3B0aW9uPgogICAgICAgICAgICAgICAgPC9zZWxlY3Q+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAKICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYnRuIGJ0bi1wcmltYXJ5IiBvbmNsaWNrPSJvcGVuR3JpZENvbmZpZygpIiBzdHlsZT0iYmFja2dyb3VuZDojMmMzZTUwOyBmb250LXNpemU6MC44cmVtOyI+CiAgICAgICAgICAgICAgICA8aSBjbGFzcz0iZmFzIGZhLWNvZyI+PC9pPiBDb25maWcgR3JpbGxlCiAgICAgICAgICAgIDwvYnV0dG9uPgoKICAgICAgICAgICAgPGRpdiBjbGFzcz0idG9vbC1ncm91cCIgc3R5bGU9ImJhY2tncm91bmQ6I2Y4ZjlmYTsgcGFkZGluZzo1cHg7IGJvcmRlci1yYWRpdXM6NHB4OyBib3JkZXI6MXB4IHNvbGlkICNlZWU7Ij4KICAgICAgICAgICAgICAgIDxsYWJlbCBzdHlsZT0iZm9udC1zaXplOjAuOHJlbTsgZm9udC13ZWlnaHQ6Ym9sZDsgY29sb3I6dmFyKC0tcHJpbWFyeSkiPvCfm4/vuI8gSW50ZXJuYXQgKEgpOjwvbGFiZWw+CiAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0ibnVtYmVyIiBpZD0iaW50ZXJuYXQtaG91cnMiIHN0eWxlPSJ3aWR0aDo1MHB4OyBwYWRkaW5nOjRweDsgdGV4dC1hbGlnbjpjZW50ZXIiIG1pbj0iMCIgc3RlcD0iMC41IiB2YWx1ZT0iMCIgb25jaGFuZ2U9InVwZGF0ZUludGVybmF0KCkiPgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgCiAgICAgICAgICAgIDxkaXYgY2xhc3M9InRvb2wtZ3JvdXAgcGFsZXR0ZSIgaWQ9InBhbGV0dGUtY29udGFpbmVyIj4KICAgICAgICAgICAgPC9kaXY+CgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJ0b29sLWdyb3VwIj4KICAgICAgICAgICAgICAgIDxzcGFuIGlkPSJoZWFkZXItc3RhdHMiIHN0eWxlPSJmb250LXNpemU6MC45cmVtOyBmb250LXdlaWdodDpib2xkOyBjb2xvcjp2YXIoLS1wcmltYXJ5KTsgYmFja2dyb3VuZDojZWVlOyBwYWRkaW5nOjVweCAxMHB4OyBib3JkZXItcmFkaXVzOjRweDsiPjBoIC8gMGg8L3NwYW4+CiAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJidG4gYnRuLXByaW1hcnkiIG9uY2xpY2s9InByaW50U2luZ2xlKCkiIHN0eWxlPSJmb250LXNpemU6IDAuOHJlbTsiPjxpIGNsYXNzPSJmYXMgZmEtcHJpbnQiPjwvaT4gQWdlbnQ8L2J1dHRvbj4KICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImJ0biBidG4tcHJpbWFyeSIgb25jbGljaz0icHJpbnRBbGwoKSIgc3R5bGU9ImZvbnQtc2l6ZTogMC44cmVtOyBiYWNrZ3JvdW5kLWNvbG9yOiMyYzNlNTA7Ij48aSBjbGFzcz0iZmFzIGZhLWxheWVyLWdyb3VwIj48L2k+IFRvdXQ8L2J1dHRvbj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgPC9kaXY+CgogICAgICAgIDxkaXYgY2xhc3M9ImVkdC1jb250YWluZXIiPgogICAgICAgICAgICA8dGFibGUgY2xhc3M9ImVkdC10YWJsZSIgaWQ9InRpbWV0YWJsZSI+PC90YWJsZT4KICAgICAgICA8L2Rpdj4KICAgIDwvc2VjdGlvbj4KCiAgICA8ZGl2IGNsYXNzPSJtb2RhbC1vdmVybGF5IiBpZD0ibW9kYWwtc2VydmljZSI+CiAgICAgICAgPGRpdiBjbGFzcz0ibW9kYWwtYm94Ij4KICAgICAgICAgICAgPGgzPjxpIGNsYXNzPSJmYXMgZmEtcGx1cy1jaXJjbGUiPjwvaT4gQWpvdXRlciB1biBTZXJ2aWNlPC9oMz4KICAgICAgICAgICAgCiAgICAgICAgICAgIDxsYWJlbCBmb3I9InNlcnZpY2UtbmFtZSI+Tm9tIGR1IHNlcnZpY2UgOjwvbGFiZWw+CiAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiBpZD0ic2VydmljZS1uYW1lIiBwbGFjZWhvbGRlcj0iRXg6IENESSwgSW5maXJtZXJpZSwgQWNjdWVpbC4uLiIgbWF4bGVuZ3RoPSIxNSI+CiAgICAgICAgICAgIAogICAgICAgICAgICA8bGFiZWw+Q291bGV1ciAocHLDqXNldHMpIDo8L2xhYmVsPgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJjb2xvci1wcmVzZXRzIj4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImNvbG9yLXByZXNldCIgc3R5bGU9ImJhY2tncm91bmQ6I2U3NGMzYyIgb25jbGljaz0ic2V0UHJlc2V0Q29sb3IoJyNlNzRjM2MnKSI+PC9kaXY+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJjb2xvci1wcmVzZXQiIHN0eWxlPSJiYWNrZ3JvdW5kOiNlOTFlNjMiIG9uY2xpY2s9InNldFByZXNldENvbG9yKCcjZTkxZTYzJykiPjwvZGl2PgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iY29sb3ItcHJlc2V0IiBzdHlsZT0iYmFja2dyb3VuZDojOWMyN2IwIiBvbmNsaWNrPSJzZXRQcmVzZXRDb2xvcignIzljMjdiMCcpIj48L2Rpdj4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImNvbG9yLXByZXNldCIgc3R5bGU9ImJhY2tncm91bmQ6IzY3M2FiNyIgb25jbGljaz0ic2V0UHJlc2V0Q29sb3IoJyM2NzNhYjcnKSI+PC9kaXY+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJjb2xvci1wcmVzZXQiIHN0eWxlPSJiYWNrZ3JvdW5kOiMzZjUxYjUiIG9uY2xpY2s9InNldFByZXNldENvbG9yKCcjM2Y1MWI1JykiPjwvZGl2PgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iY29sb3ItcHJlc2V0IiBzdHlsZT0iYmFja2dyb3VuZDojMjE5NmYzIiBvbmNsaWNrPSJzZXRQcmVzZXRDb2xvcignIzIxOTZmMycpIj48L2Rpdj4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImNvbG9yLXByZXNldCIgc3R5bGU9ImJhY2tncm91bmQ6IzAwYmNkNCIgb25jbGljaz0ic2V0UHJlc2V0Q29sb3IoJyMwMGJjZDQnKSI+PC9kaXY+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJjb2xvci1wcmVzZXQiIHN0eWxlPSJiYWNrZ3JvdW5kOiMwMDk2ODgiIG9uY2xpY2s9InNldFByZXNldENvbG9yKCcjMDA5Njg4JykiPjwvZGl2PgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iY29sb3ItcHJlc2V0IiBzdHlsZT0iYmFja2dyb3VuZDojNGNhZjUwIiBvbmNsaWNrPSJzZXRQcmVzZXRDb2xvcignIzRjYWY1MCcpIj48L2Rpdj4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImNvbG9yLXByZXNldCIgc3R5bGU9ImJhY2tncm91bmQ6IzhiYzM0YSIgb25jbGljaz0ic2V0UHJlc2V0Q29sb3IoJyM4YmMzNGEnKSI+PC9kaXY+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJjb2xvci1wcmVzZXQiIHN0eWxlPSJiYWNrZ3JvdW5kOiNmZjk4MDAiIG9uY2xpY2s9InNldFByZXNldENvbG9yKCcjZmY5ODAwJykiPjwvZGl2PgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iY29sb3ItcHJlc2V0IiBzdHlsZT0iYmFja2dyb3VuZDojZmY1NzIyIiBvbmNsaWNrPSJzZXRQcmVzZXRDb2xvcignI2ZmNTcyMicpIj48L2Rpdj4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImNvbG9yLXByZXNldCIgc3R5bGU9ImJhY2tncm91bmQ6Izc5NTU0OCIgb25jbGljaz0ic2V0UHJlc2V0Q29sb3IoJyM3OTU1NDgnKSI+PC9kaXY+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJjb2xvci1wcmVzZXQiIHN0eWxlPSJiYWNrZ3JvdW5kOiM2MDdkOGIiIG9uY2xpY2s9InNldFByZXNldENvbG9yKCcjNjA3ZDhiJykiPjwvZGl2PgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iY29sb3ItcHJlc2V0IiBzdHlsZT0iYmFja2dyb3VuZDojMDAwMDAwIiBvbmNsaWNrPSJzZXRQcmVzZXRDb2xvcignIzAwMDAwMCcpIj48L2Rpdj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIAogICAgICAgICAgICA8bGFiZWwgZm9yPSJzZXJ2aWNlLWNvbG9yIj5PdSBjb3VsZXVyIHBlcnNvbm5hbGlzw6llIDo8L2xhYmVsPgogICAgICAgICAgICA8aW5wdXQgdHlwZT0iY29sb3IiIGlkPSJzZXJ2aWNlLWNvbG9yIiB2YWx1ZT0iIzM0OThkYiIgb25jaGFuZ2U9InVwZGF0ZVByZXZpZXcoKSI+CiAgICAgICAgICAgIAogICAgICAgICAgICA8bGFiZWw+QXBlcsOndSA6PC9sYWJlbD4KICAgICAgICAgICAgPGRpdiBjbGFzcz0icHJldmlldy1idG4iIGlkPSJzZXJ2aWNlLXByZXZpZXciPk5PVVZFQVUgU0VSVklDRTwvZGl2PgogICAgICAgICAgICAKICAgICAgICAgICAgPGRpdiBjbGFzcz0ibW9kYWwtYWN0aW9ucyI+CiAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJidG4tY2FuY2VsIiBvbmNsaWNrPSJjbG9zZVNlcnZpY2VNb2RhbCgpIj5Bbm51bGVyPC9idXR0b24+CiAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJidG4tY29uZmlybSIgb25jbGljaz0iY29uZmlybUFkZFNlcnZpY2UoKSI+PGkgY2xhc3M9ImZhcyBmYS1jaGVjayI+PC9pPiBBam91dGVyPC9idXR0b24+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgIDwvZGl2PgogICAgPC9kaXY+CgogICAgPGRpdiBjbGFzcz0ibW9kYWwtb3ZlcmxheSIgaWQ9Im1vZGFsLWdyaWQtY29uZmlnIj4KICAgICAgICA8ZGl2IGNsYXNzPSJtb2RhbC1ib3giPgogICAgICAgICAgICA8aDM+PGkgY2xhc3M9ImZhcyBmYS1jb2ciPjwvaT4gQ29uZmlndXJhdGlvbiBHcmlsbGUgSG9yYWlyZTwvaDM+CiAgICAgICAgICAgIDxwIHN0eWxlPSJmb250LXNpemU6MC45cmVtOyBjb2xvcjojNjY2OyI+QWpvdXRleiwgc3VwcHJpbWV6IGV0IGTDqWZpbmlzc2V6IHZvcyBjcsOpbmVhdXggcHLDqWNpcyAoZXg6IDhoMjUtOWgyMCkuPC9wPgogICAgICAgICAgICAKICAgICAgICAgICAgPGRpdiBjbGFzcz0ic2xvdC1pbnB1dHMiPgogICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iZmxleDoxIj4KICAgICAgICAgICAgICAgICAgICA8bGFiZWwgc3R5bGU9ImZvbnQtc2l6ZTowLjhyZW0iPkTDqWJ1dDwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9InRpbWUiIGlkPSJuZXctc2xvdC1zdGFydCIgc3R5bGU9IndpZHRoOjEwMCUiPgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJmbGV4OjEiPgogICAgICAgICAgICAgICAgICAgIDxsYWJlbCBzdHlsZT0iZm9udC1zaXplOjAuOHJlbSI+RmluPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0idGltZSIgaWQ9Im5ldy1zbG90LWVuZCIgc3R5bGU9IndpZHRoOjEwMCUiPgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJidG4gYnRuLXByaW1hcnkiIG9uY2xpY2s9ImFkZFNsb3QoKSI+PGkgY2xhc3M9ImZhcyBmYS1wbHVzIj48L2k+PC9idXR0b24+CiAgICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgICAgPGRpdiBjbGFzcz0ic2xvdC1saXN0IiBpZD0ic2xvdC1jb25maWctbGlzdCI+CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgCiAgICAgICAgICAgIDxkaXYgY2xhc3M9Im1vZGFsLWFjdGlvbnMiPgogICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYnRuLWNhbmNlbCIgb25jbGljaz0iZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21vZGFsLWdyaWQtY29uZmlnJykuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJykiPkZlcm1lcjwvYnV0dG9uPgogICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYnRuLWNvbmZpcm0iIG9uY2xpY2s9InNhdmVHcmlkQ29uZmlnKCkiPjxpIGNsYXNzPSJmYXMgZmEtY2hlY2siPjwvaT4gRW5yZWdpc3RyZXIgJiBBcHBsaXF1ZXI8L2J1dHRvbj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgPC9kaXY+CiAgICA8L2Rpdj4KCiAgICA8c2VjdGlvbiBpZD0idmlldy1nZXN0aW9uIiBjbGFzcz0idmlldy1zZWN0aW9uIj4KICAgICAgICA8ZGl2IHN0eWxlPSJtYXJnaW4tYm90dG9tOiAyMHB4OyBkaXNwbGF5OmZsZXg7IGp1c3RpZnktY29udGVudDpzcGFjZS1iZXR3ZWVuOyBhbGlnbi1pdGVtczpjZW50ZXI7Ij4KICAgICAgICAgICAgPGRpdj4KICAgICAgICAgICAgICAgIDxsYWJlbD48c3Ryb25nPkFnZW50IDo8L3N0cm9uZz48L2xhYmVsPgogICAgICAgICAgICAgICAgPHNlbGVjdCBpZD0iYWVkLXNlbGVjdC1nZXN0aW9uIiBvbmNoYW5nZT0iY2hhbmdlQUVEKCdnZXN0aW9uJykiPjwvc2VsZWN0PgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYnRuIGJ0bi1wcmltYXJ5IiBvbmNsaWNrPSJwcmludEdlc3Rpb24oKSI+PGkgY2xhc3M9ImZhcyBmYS1wcmludCI+PC9pPiBJbXByaW1lciBGaWNoZTwvYnV0dG9uPgogICAgICAgIDwvZGl2PgogICAgICAgIDxkaXYgY2xhc3M9Imdlc3Rpb24tZ3JpZCI+CiAgICAgICAgICAgIDxkaXY+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJzdGF0cy1yb3ciPgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImJhbGFuY2UtYm94Ij4KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj5Ub3RhbCBBbm51ZWwgKE5ldCk8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iYmFsYW5jZS1hbW91bnQiIGlkPSJhbm51YWwtdGFyZ2V0LWRpc3BsYXkiPjBoPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9ImZvbnQtc2l6ZTowLjhyZW07IG9wYWNpdHk6MC44OyI+T2JqZWN0aWY8L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJiYWxhbmNlLWJveCBzZWNvbmRhcnkiPgogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PlNvbGRlIEFqdXN0ZW1lbnRzPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImJhbGFuY2UtYW1vdW50IiBpZD0iYmFsYW5jZS1kaXNwbGF5Ij4waDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJmb250LXNpemU6MC44cmVtOyBvcGFjaXR5OjAuODsiPkN1bXVsIChBYnMvU3VwKTwvZGl2PgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgPC9kaXY+CgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iY2FyZCI+CiAgICAgICAgICAgICAgICAgICAgPGgzIHN0eWxlPSJtYXJnaW4tdG9wOjAiPlNhaXNpZSBRdW90aWRpZW5uZTwvaDM+CiAgICAgICAgICAgICAgICAgICAgPHNlbGVjdCBpZD0iYWRqLXR5cGUiIHN0eWxlPSJ3aWR0aDoxMDAlOyBtYXJnaW4tYm90dG9tOjEwcHgiPjxvcHRpb24gdmFsdWU9InBsdXMiPkhldXJlcyBlbiBQTFVTICgrKTwvb3B0aW9uPjxvcHRpb24gdmFsdWU9Im1pbnVzIj5IZXVyZXMgZW4gTU9JTlMgKC0pPC9vcHRpb24+PC9zZWxlY3Q+CiAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9Im51bWJlciIgaWQ9ImFkai1hbW91bnQiIHBsYWNlaG9sZGVyPSJEdXLDqWUiIHN0ZXA9IjAuNSIgc3R5bGU9IndpZHRoOjEwMCU7IG1hcmdpbi1ib3R0b206MTBweDsiPgogICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiBpZD0iYWRqLXJlYXNvbiIgcGxhY2Vob2xkZXI9Ik1vdGlmLi4uIiBzdHlsZT0id2lkdGg6MTAwJTsgbWFyZ2luLWJvdHRvbToxMHB4OyI+CiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYnRuIGJ0bi1wcmltYXJ5IiBzdHlsZT0id2lkdGg6MTAwJSIgb25jbGljaz0iYWRkQWRqdXN0bWVudCgpIj5FbnJlZ2lzdHJlcjwvYnV0dG9uPgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJjYXJkIj4KICAgICAgICAgICAgICAgIDxoMyBzdHlsZT0ibWFyZ2luLXRvcDowIj5IaXN0b3JpcXVlPC9oMz4KICAgICAgICAgICAgICAgIDx0YWJsZSBjbGFzcz0iaGlzdG9yeS10YWJsZSI+CiAgICAgICAgICAgICAgICAgICAgPHRoZWFkPjx0cj48dGg+RGF0ZTwvdGg+PHRoPlR5cGU8L3RoPjx0aD5Nb3RpZjwvdGg+PHRoPkg8L3RoPjx0aD48L3RoPjwvdHI+PC90aGVhZD4KICAgICAgICAgICAgICAgICAgICA8dGJvZHkgaWQ9Imhpc3RvcnktYm9keSI+PC90Ym9keT4KICAgICAgICAgICAgICAgIDwvdGFibGU+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgIDwvZGl2PgogICAgPC9zZWN0aW9uPgoKICAgIDxzZWN0aW9uIGlkPSJ2aWV3LXJlcGFydGl0aW9uIiBjbGFzcz0idmlldy1zZWN0aW9uIj4KICAgICAgICA8ZGl2IGNsYXNzPSJyZXBhcnRpdGlvbi10b29sYmFyIj4KICAgICAgICAgICAgPGRpdiBzdHlsZT0iZGlzcGxheTpmbGV4OyBhbGlnbi1pdGVtczpjZW50ZXI7IGdhcDoxNXB4OyI+CiAgICAgICAgICAgICAgICA8aDIgc3R5bGU9Im1hcmdpbjowOyBjb2xvcjp2YXIoLS1wcmltYXJ5KTsgZm9udC1zaXplOjEuMnJlbTsiPlF1aSBmYWl0IHF1b2kgPzwvaDI+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJ0b29sLWdyb3VwIj4KICAgICAgICAgICAgICAgICAgICA8bGFiZWw+PHN0cm9uZz5Kb3VyIDo8L3N0cm9uZz48L2xhYmVsPgogICAgICAgICAgICAgICAgICAgIDxzZWxlY3QgaWQ9InJlcGFydGl0aW9uLWRheS1zZWxlY3QiIG9uY2hhbmdlPSJyZW5kZXJSZXBhcnRpdGlvbigpIj4KICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iTHVuZGkiPkx1bmRpPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9Ik1hcmRpIj5NYXJkaTwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJNZXJjcmVkaSI+TWVyY3JlZGk8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iSmV1ZGkiPkpldWRpPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IlZlbmRyZWRpIj5WZW5kcmVkaTwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgIDwvc2VsZWN0PgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJidG4gYnRuLXByaW1hcnkiIG9uY2xpY2s9InByaW50UmVwYXJ0aXRpb24oKSI+PGkgY2xhc3M9ImZhcyBmYS1wcmludCI+PC9pPiBJbXByaW1lciBsYSBqb3VybsOpZTwvYnV0dG9uPgogICAgICAgIDwvZGl2PgogICAgICAgIAogICAgICAgIDxkaXYgY2xhc3M9ImVkdC1jb250YWluZXIiPgogICAgICAgICAgICA8ZGl2IGlkPSJyZXBhcnRpdGlvbi1jb250ZW50Ij48L2Rpdj4KICAgICAgICA8L2Rpdj4KICAgIDwvc2VjdGlvbj4KCiAgICA8c2VjdGlvbiBpZD0idmlldy1saXZlIiBjbGFzcz0idmlldy1zZWN0aW9uIj4KICAgICAgICA8ZGl2IGNsYXNzPSJsaXZlLWhlYWRlciI+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImNsb2NrLWRheSIgaWQ9ImxpdmUtZGF5Ij5DSEFSR0VNRU5ULi4uPC9kaXY+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImNsb2NrLXRpbWUiIGlkPSJsaXZlLWNsb2NrIj4tLTotLTotLTwvZGl2PgogICAgICAgIDwvZGl2PgogICAgICAgIAogICAgICAgIDxkaXYgY2xhc3M9InNlY3Rpb24tdGl0bGUiPjxpIGNsYXNzPSJmYXMgZmEtdXNlci1jbG9jayI+PC9pPiBBRUQgRU4gUE9TVEUgQUNUVUVMTEVNRU5UPC9kaXY+CiAgICAgICAgPGRpdiBjbGFzcz0ibGl2ZS1ncmlkIiBpZD0ibGl2ZS1hY3RpdmUtY29udGFpbmVyIj4KICAgICAgICAgICAgPC9kaXY+CgogICAgICAgIDxkaXYgY2xhc3M9InNlY3Rpb24tdGl0bGUiPjxpIGNsYXNzPSJmYXMgZmEtdXNlci1zbGFzaCI+PC9pPiBBQlNFTlRTIC8gTk9OIFBMQU5JRknDiVM8L2Rpdj4KICAgICAgICA8ZGl2IGNsYXNzPSJsaXZlLWdyaWQiIGlkPSJsaXZlLWluYWN0aXZlLWNvbnRhaW5lciIgc3R5bGU9Im9wYWNpdHk6IDAuNjsiPgogICAgICAgICAgICA8L2Rpdj4KICAgIDwvc2VjdGlvbj4KCjwvbWFpbj4KCjxkaXYgaWQ9ImJhdGNoLXByaW50LWFyZWEiPjwvZGl2Pgo8ZGl2IGlkPSJkYXNoYm9hcmQtcHJpbnQtYXJlYSI+PC9kaXY+CjxkaXYgaWQ9Imdlc3Rpb24tcHJpbnQtYXJlYSI+PC9kaXY+CjxkaXYgaWQ9InJlcGFydGl0aW9uLXByaW50LWFyZWEiPjwvZGl2PgoKPHNjcmlwdD4KICAgIC8vIC0tLSBJTklUSUFMSVNBVElPTiBET05Ow4lFUyBWSURFIC0tLQogICAgLy8gQWpvdXQgZGUgInNsb3RzIiBkYW5zIERBVEEuY29uZmlnIHBvdXIgc3RvY2tlciBsZXMgY3LDqW5lYXV4IHBlcnNvbm5hbGlzw6lzCiAgICBsZXQgREFUQSA9IHsgYWdlbnRzOiBbXSwgc2NoZWR1bGVzOiB7fSwgYWRqdXN0bWVudHM6IHt9LCBxdW90aXRlczogW10sIHNlcnZpY2VzOiBbXSwgY29uZmlnOiB7IHNsb3RzOiBbXSB9IH07CiAgICBjb25zdCBEQVlTID0gWydMdW5kaScsICdNYXJkaScsICdNZXJjcmVkaScsICdKZXVkaScsICdWZW5kcmVkaSddOwogICAgCiAgICAvLyBDcsOpbmVhdXggcGFyIGTDqWZhdXQgc2kgYXVjdW5lIGNvbmZpZyAocG91ciDDqXZpdGVyIGxlIHZpZGUgYXUgcHJlbWllciBsYW5jZW1lbnQpCiAgICBjb25zdCBERUZBVUxUX1NMT1RTID0gWwogICAgICAgIHsgc3RhcnQ6ICcwODowMCcsIGVuZDogJzA4OjU1JyB9LAogICAgICAgIHsgc3RhcnQ6ICcwODo1NScsIGVuZDogJzA5OjUwJyB9LAogICAgICAgIHsgc3RhcnQ6ICcwOTo1MCcsIGVuZDogJzEwOjA1JyB9LAogICAgICAgIHsgc3RhcnQ6ICcxMDowNScsIGVuZDogJzExOjAwJyB9LAogICAgICAgIHsgc3RhcnQ6ICcxMTowMCcsIGVuZDogJzExOjU1JyB9LAogICAgICAgIHsgc3RhcnQ6ICcxMjowMCcsIGVuZDogJzEzOjAwJyB9LAogICAgICAgIHsgc3RhcnQ6ICcxMzowMCcsIGVuZDogJzEzOjU1JyB9LAogICAgICAgIHsgc3RhcnQ6ICcxMzo1NScsIGVuZDogJzE0OjUwJyB9LAogICAgICAgIHsgc3RhcnQ6ICcxNDo1MCcsIGVuZDogJzE1OjA1JyB9LAogICAgICAgIHsgc3RhcnQ6ICcxNTowNScsIGVuZDogJzE2OjAwJyB9LAogICAgICAgIHsgc3RhcnQ6ICcxNjowMCcsIGVuZDogJzE2OjU1JyB9LAogICAgICAgIHsgc3RhcnQ6ICcxNjo1NScsIGVuZDogJzE3OjUwJyB9CiAgICBdOwoKICAgIGxldCBDVVJSRU5UX1RPT0wgPSB7IG5hbWU6ICdHcmlsbGUnLCBjb2xvcjogJyNmZjAwZmYnLCBpc0VyYXNlcjogZmFsc2UgfTsKICAgIAogICAgLy8gU2VydmljZXMgcGFyIGTDqWZhdXQKICAgIGNvbnN0IERFRkFVTFRfU0VSVklDRVMgPSBbCiAgICAgICAgeyBpZDogJ2dyaWxsZScsIG5hbWU6ICdHcmlsbGUnLCBjb2xvcjogJyNmZjAwZmYnLCBpc0RlZmF1bHQ6IHRydWUgfSwKICAgICAgICB7IGlkOiAnYWRtaW4nLCBuYW1lOiAnQWRtaW4nLCBjb2xvcjogJyMwMGI4OTQnLCBpc0RlZmF1bHQ6IHRydWUgfSwKICAgICAgICB7IGlkOiAnZXR1ZGUnLCBuYW1lOiAnRXR1ZGUnLCBjb2xvcjogJyM4ZTQ0YWQnLCBpc0RlZmF1bHQ6IHRydWUgfSwKICAgICAgICB7IGlkOiAnc2VsZicsIG5hbWU6ICdTZWxmJywgY29sb3I6ICcjZTY3ZTIyJywgaXNEZWZhdWx0OiB0cnVlIH0sCiAgICAgICAgeyBpZDogJ2NvdWxvaXJzJywgbmFtZTogJ0NvdWxvaXJzJywgY29sb3I6ICcjZjFjNDBmJywgaXNEZWZhdWx0OiB0cnVlIH0sCiAgICAgICAgeyBpZDogJ2NvdXInLCBuYW1lOiAnQ291cicsIGNvbG9yOiAnI2Q2MzAzMScsIGlzRGVmYXVsdDogdHJ1ZSB9LAogICAgICAgIHsgaWQ6ICdzdWl2aScsIG5hbWU6ICdTdWl2aScsIGNvbG9yOiAnIzI3YWU2MCcsIGlzRGVmYXVsdDogdHJ1ZSB9CiAgICBdOwogICAgCiAgICBjb25zdCBTVE9SQUdFX0tFWSA9ICdBRURfUElMT1RFX1YyOF9TTE9UUyc7CgogICAgd2luZG93Lm9ubG9hZCA9IGZ1bmN0aW9uKCkgeyAKICAgICAgICBsb2FkTG9jYWxTdG9yYWdlKCk7IAogICAgICAgIHJlbmRlclBhbGV0dGUoKTsgCiAgICAgICAgLy8gTGFuY2VyIGwnaG9ybG9nZSBwb3VyIGxlIG1lbnUgNQogICAgICAgIHNldEludGVydmFsKHVwZGF0ZUxpdmVWaWV3LCAxMDAwKTsKICAgICAgICB1cGRhdGVMaXZlVmlldygpOwogICAgfTsKCiAgICBmdW5jdGlvbiBzd2l0Y2hUYWIodGFiSWQpIHsKICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcudmlldy1zZWN0aW9uJykuZm9yRWFjaChlbCA9PiBlbC5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKSk7CiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnRhYi1idG4nKS5mb3JFYWNoKGVsID0+IGVsLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpKTsKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndmlldy0nICsgdGFiSWQpLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpOwogICAgICAgIAogICAgICAgIGNvbnN0IHRhYnMgPSBbJ2ltcG9ydCcsICdjb25jZXB0aW9uJywgJ2dlc3Rpb24nLCAncmVwYXJ0aXRpb24nLCAnbGl2ZSddOwogICAgICAgIGNvbnN0IGJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy50YWItYnRuJylbdGFicy5pbmRleE9mKHRhYklkKV07CiAgICAgICAgaWYoYnRuKSBidG4uY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7CiAgICAgICAgCiAgICAgICAgaWYodGFiSWQgPT09ICdjb25jZXB0aW9uJykgdXBkYXRlU3RhdHNIZWFkZXIoKTsKICAgICAgICBpZih0YWJJZCA9PT0gJ2dlc3Rpb24nKSB1cGRhdGVHZXN0aW9uVUkoKTsKICAgICAgICBpZih0YWJJZCA9PT0gJ3JlcGFydGl0aW9uJykgcmVuZGVyUmVwYXJ0aXRpb24oKTsKICAgICAgICBpZih0YWJJZCA9PT0gJ2xpdmUnKSB1cGRhdGVMaXZlVmlldygpOwogICAgfQogICAgCiAgICAvLyAtLS0gR0VTVElPTiBERSBMQSBDT05GSUdVUkFUSU9OIEhPUkFJUkUgQVZBTkNFRSAoTWVudSAyKSAtLS0KICAgIC8vIFZhcmlhYmxlIHRlbXBvcmFpcmUgcG91ciBsJ8OpZGl0aW9uIGRhbnMgbGUgbW9kYWwKICAgIGxldCB0ZW1wU2xvdHMgPSBbXTsKCiAgICBmdW5jdGlvbiBvcGVuR3JpZENvbmZpZygpIHsKICAgICAgICAvLyBDaGFyZ2VyIGxlcyBzbG90cyBhY3R1ZWxzIG91IGxlcyBkw6lmYXV0cwogICAgICAgIHRlbXBTbG90cyA9IChEQVRBLmNvbmZpZyAmJiBEQVRBLmNvbmZpZy5zbG90cyAmJiBEQVRBLmNvbmZpZy5zbG90cy5sZW5ndGggPiAwKSAKICAgICAgICAgICAgICAgICAgICA/IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoREFUQS5jb25maWcuc2xvdHMpKSAKICAgICAgICAgICAgICAgICAgICA6IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoREVGQVVMVF9TTE9UUykpOwogICAgICAgIAogICAgICAgIHJlbmRlclNsb3RDb25maWdMaXN0KCk7CiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21vZGFsLWdyaWQtY29uZmlnJykuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7CiAgICB9CgogICAgZnVuY3Rpb24gcmVuZGVyU2xvdENvbmZpZ0xpc3QoKSB7CiAgICAgICAgY29uc3QgbGlzdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzbG90LWNvbmZpZy1saXN0Jyk7CiAgICAgICAgbGlzdC5pbm5lckhUTUwgPSAnJzsKICAgICAgICAKICAgICAgICAvLyBUcmllciBwYXIgaGV1cmUgZGUgZMOpYnV0CiAgICAgICAgdGVtcFNsb3RzLnNvcnQoKGEsIGIpID0+IGEuc3RhcnQubG9jYWxlQ29tcGFyZShiLnN0YXJ0KSk7CgogICAgICAgIHRlbXBTbG90cy5mb3JFYWNoKChzbG90LCBpbmRleCkgPT4gewogICAgICAgICAgICBjb25zdCBpdGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgICAgICAgIGl0ZW0uY2xhc3NOYW1lID0gJ3Nsb3QtaXRlbSc7CiAgICAgICAgICAgIGl0ZW0uaW5uZXJIVE1MID0gYAogICAgICAgICAgICAgICAgPHNwYW4+PHN0cm9uZz4ke3Nsb3Quc3RhcnR9PC9zdHJvbmc+IMOgIDxzdHJvbmc+JHtzbG90LmVuZH08L3N0cm9uZz48L3NwYW4+CiAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJidG4gYnRuLWRhbmdlciIgc3R5bGU9InBhZGRpbmc6NHB4IDhweDsgZm9udC1zaXplOjAuN3JlbTsiIG9uY2xpY2s9InJlbW92ZVNsb3QoJHtpbmRleH0pIj48aSBjbGFzcz0iZmFzIGZhLXRyYXNoIj48L2k+PC9idXR0b24+CiAgICAgICAgICAgIGA7CiAgICAgICAgICAgIGxpc3QuYXBwZW5kQ2hpbGQoaXRlbSk7CiAgICAgICAgfSk7CiAgICB9CgogICAgZnVuY3Rpb24gYWRkU2xvdCgpIHsKICAgICAgICBjb25zdCBzdGFydCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCduZXctc2xvdC1zdGFydCcpLnZhbHVlOwogICAgICAgIGNvbnN0IGVuZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCduZXctc2xvdC1lbmQnKS52YWx1ZTsKCiAgICAgICAgaWYgKCFzdGFydCB8fCAhZW5kKSB7CiAgICAgICAgICAgIGFsZXJ0KCJWZXVpbGxleiByZW1wbGlyIGwnaGV1cmUgZGUgZMOpYnV0IGV0IGRlIGZpbi4iKTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICBpZiAoc3RhcnQgPj0gZW5kKSB7CiAgICAgICAgICAgIGFsZXJ0KCJMJ2hldXJlIGRlIGTDqWJ1dCBkb2l0IMOqdHJlIGF2YW50IGwnaGV1cmUgZGUgZmluLiIpOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICB0ZW1wU2xvdHMucHVzaCh7IHN0YXJ0OiBzdGFydCwgZW5kOiBlbmQgfSk7CiAgICAgICAgcmVuZGVyU2xvdENvbmZpZ0xpc3QoKTsKICAgICAgICAKICAgICAgICAvLyBSZXNldCBpbnB1dHMKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbmV3LXNsb3Qtc3RhcnQnKS52YWx1ZSA9ICcnOwogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCduZXctc2xvdC1lbmQnKS52YWx1ZSA9ICcnOwogICAgfQoKICAgIGZ1bmN0aW9uIHJlbW92ZVNsb3QoaW5kZXgpIHsKICAgICAgICB0ZW1wU2xvdHMuc3BsaWNlKGluZGV4LCAxKTsKICAgICAgICByZW5kZXJTbG90Q29uZmlnTGlzdCgpOwogICAgfQoKICAgIGZ1bmN0aW9uIHNhdmVHcmlkQ29uZmlnKCkgewogICAgICAgIGlmICh0ZW1wU2xvdHMubGVuZ3RoID09PSAwKSB7CiAgICAgICAgICAgIGlmKCFjb25maXJtKCJMYSBncmlsbGUgZXN0IHZpZGUuIFZvdWxlei12b3VzIHZyYWltZW50IGNvbnRpbnVlciA/IikpIHJldHVybjsKICAgICAgICB9CgogICAgICAgIGlmKCFEQVRBLmNvbmZpZykgREFUQS5jb25maWcgPSB7fTsKICAgICAgICAKICAgICAgICAvLyBPbiB0cmllIHVuZSBkZXJuacOocmUgZm9pcyBwb3VyIMOqdHJlIHPDu3IKICAgICAgICB0ZW1wU2xvdHMuc29ydCgoYSwgYikgPT4gYS5zdGFydC5sb2NhbGVDb21wYXJlKGIuc3RhcnQpKTsKICAgICAgICBEQVRBLmNvbmZpZy5zbG90cyA9IHRlbXBTbG90czsKICAgICAgICAKICAgICAgICBzYXZlTG9jYWxTdG9yYWdlKCk7CiAgICAgICAgCiAgICAgICAgLy8gUmFmcmHDrmNoaXIgbGVzIHZ1ZXMKICAgICAgICByZW5kZXJUaW1ldGFibGUoKTsKICAgICAgICByZW5kZXJSZXBhcnRpdGlvbigpOwogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtb2RhbC1ncmlkLWNvbmZpZycpLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpOwogICAgfQoKICAgIC8vIC0tLSBMT0dJUVVFIE1FTlUgNSA6IEVOIERJUkVDVCAoQWRhcHTDqSBhdXggY3LDqW5lYXV4IGxpYnJlcykgLS0tCiAgICBmdW5jdGlvbiB1cGRhdGVMaXZlVmlldygpIHsKICAgICAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpOwogICAgICAgIGNvbnN0IGRheU5hbWVzID0gWydEaW1hbmNoZScsICdMdW5kaScsICdNYXJkaScsICdNZXJjcmVkaScsICdKZXVkaScsICdWZW5kcmVkaScsICdTYW1lZGknXTsKICAgICAgICBjb25zdCBjdXJyZW50RGF5SW5kZXggPSBub3cuZ2V0RGF5KCk7CiAgICAgICAgY29uc3QgY3VycmVudERheU5hbWUgPSBkYXlOYW1lc1tjdXJyZW50RGF5SW5kZXhdOwogICAgICAgIAogICAgICAgIC8vIEZvcm1hdGFnZSAiSEg6TU0iIHBvdXIgY29tcGFyYWlzb24KICAgICAgICBjb25zdCBob3VycyA9IFN0cmluZyhub3cuZ2V0SG91cnMoKSkucGFkU3RhcnQoMiwgJzAnKTsKICAgICAgICBjb25zdCBtaW51dGVzID0gU3RyaW5nKG5vdy5nZXRNaW51dGVzKCkpLnBhZFN0YXJ0KDIsICcwJyk7CiAgICAgICAgY29uc3QgY3VycmVudFRpbWVTdHIgPSBgJHtob3Vyc306JHttaW51dGVzfWA7CgogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsaXZlLWRheScpLnRleHRDb250ZW50ID0gY3VycmVudERheU5hbWUgKyAiICIgKyBub3cudG9Mb2NhbGVEYXRlU3RyaW5nKCk7CiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xpdmUtY2xvY2snKS50ZXh0Q29udGVudCA9IG5vdy50b0xvY2FsZVRpbWVTdHJpbmcoKTsKCiAgICAgICAgY29uc3QgY29udGFpbmVyQWN0aXZlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xpdmUtYWN0aXZlLWNvbnRhaW5lcicpOwogICAgICAgIGNvbnN0IGNvbnRhaW5lckluYWN0aXZlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xpdmUtaW5hY3RpdmUtY29udGFpbmVyJyk7CiAgICAgICAgCiAgICAgICAgaWYoIWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd2aWV3LWxpdmUnKS5jbGFzc0xpc3QuY29udGFpbnMoJ2FjdGl2ZScpKSByZXR1cm47CgogICAgICAgIGNvbnRhaW5lckFjdGl2ZS5pbm5lckhUTUwgPSAnJzsKICAgICAgICBjb250YWluZXJJbmFjdGl2ZS5pbm5lckhUTUwgPSAnJzsKCiAgICAgICAgLy8gVHJvdXZlciBsJ2luZGV4IGR1IHNsb3QgYWN0aWYKICAgICAgICBjb25zdCBhY3RpdmVTbG90SW5kZXggPSAoREFUQS5jb25maWcuc2xvdHMgfHwgREVGQVVMVF9TTE9UUykuZmluZEluZGV4KHNsb3QgPT4gewogICAgICAgICAgICByZXR1cm4gY3VycmVudFRpbWVTdHIgPj0gc2xvdC5zdGFydCAmJiBjdXJyZW50VGltZVN0ciA8IHNsb3QuZW5kOwogICAgICAgIH0pOwogICAgICAgIAogICAgICAgIGxldCBhY3RpdmVTbG90TGFiZWwgPSAiSE9SUyBDUsOJTkVBVSI7CiAgICAgICAgbGV0IGFjdGl2ZVNsb3RFbmQgPSAiIjsKCiAgICAgICAgaWYoYWN0aXZlU2xvdEluZGV4ICE9PSAtMSkgewogICAgICAgICAgICBjb25zdCBzbG90ID0gKERBVEEuY29uZmlnLnNsb3RzIHx8IERFRkFVTFRfU0xPVFMpW2FjdGl2ZVNsb3RJbmRleF07CiAgICAgICAgICAgIGFjdGl2ZVNsb3RMYWJlbCA9IGAke3Nsb3Quc3RhcnR9IC0gJHtzbG90LmVuZH1gOwogICAgICAgICAgICBhY3RpdmVTbG90RW5kID0gc2xvdC5lbmQ7CiAgICAgICAgfQoKICAgICAgICBsZXQgaGFzQWN0aXZlID0gZmFsc2U7CgogICAgICAgIERBVEEuYWdlbnRzLmZvckVhY2goYWdlbnQgPT4gewogICAgICAgICAgICAvLyBMYSBjbMOpIGVzdCBiYXPDqWUgc3VyIGwnaW5kZXggZHUgc2xvdCA6ICJMdW5kaS0wIiwgIkx1bmRpLTEiLCBldGMuCiAgICAgICAgICAgIGNvbnN0IGtleSA9IGAke2N1cnJlbnREYXlOYW1lfS0ke2FjdGl2ZVNsb3RJbmRleH1gOwogICAgICAgICAgICBjb25zdCBzY2hlZHVsZSA9IERBVEEuc2NoZWR1bGVzW2FnZW50Lm5hbWVdOwogICAgICAgICAgICAKICAgICAgICAgICAgbGV0IGlzQWN0aXZlID0gZmFsc2U7CiAgICAgICAgICAgIGxldCBzZXJ2aWNlSW5mbyA9IG51bGw7CgogICAgICAgICAgICBpZiAoYWN0aXZlU2xvdEluZGV4ICE9PSAtMSAmJiBzY2hlZHVsZSAmJiBzY2hlZHVsZVtrZXldKSB7CiAgICAgICAgICAgICAgICBpc0FjdGl2ZSA9IHRydWU7CiAgICAgICAgICAgICAgICBzZXJ2aWNlSW5mbyA9IHNjaGVkdWxlW2tleV07CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC8vIENyw6lhdGlvbiBkZSBsYSBjYXJ0ZQogICAgICAgICAgICBjb25zdCBjYXJkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgICAgICAgIGNhcmQuY2xhc3NOYW1lID0gYGxpdmUtY2FyZCAke2lzQWN0aXZlID8gJ2FjdGl2ZScgOiAnJ31gOwogICAgICAgICAgICAKICAgICAgICAgICAgaWYoaXNBY3RpdmUgJiYgc2VydmljZUluZm8uY29sb3IpIHsKICAgICAgICAgICAgICAgIGNhcmQuc3R5bGUuYm9yZGVyTGVmdENvbG9yID0gc2VydmljZUluZm8uY29sb3I7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGNvbnN0IGlzTGlnaHQgPSBpc0FjdGl2ZSA/IGlzTGlnaHRDb2xvcihzZXJ2aWNlSW5mby5jb2xvcikgOiB0cnVlOwogICAgICAgICAgICBjb25zdCB0ZXh0Q29sb3IgPSBpc0xpZ2h0ID8gJyMzMzMnIDogJ3doaXRlJzsKCiAgICAgICAgICAgIGNhcmQuaW5uZXJIVE1MID0gYAogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ibGl2ZS1jYXJkLWJvZHkiPgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImxpdmUtYWdlbnQtbmFtZSI+JHthZ2VudC5uYW1lfTwvZGl2PgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImxpdmUtc3RhdHVzIiBzdHlsZT0iYmFja2dyb3VuZC1jb2xvcjogJHtpc0FjdGl2ZSA/IHNlcnZpY2VJbmZvLmNvbG9yIDogJyNlZWUnfTsgY29sb3I6ICR7dGV4dENvbG9yfSI+CiAgICAgICAgICAgICAgICAgICAgICAgICR7aXNBY3RpdmUgPyBzZXJ2aWNlSW5mby50b29sIDogKGFjdGl2ZVNsb3RJbmRleCAhPT0gLTEgPyAnTElCUkUgLyBOT04gUExBTklGScOJJyA6ICdIT1JTIEhPUkFJUkUnKX0KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAke2lzQWN0aXZlID8gYDxkaXYgc3R5bGU9Im1hcmdpbi10b3A6NXB4OyBmb250LXNpemU6MC44cmVtOyBjb2xvcjojNzc3OyI+QWN0dWVsbGVtZW50IDogJHthY3RpdmVTbG90TGFiZWx9PC9kaXY+YCA6ICcnfQogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIGA7CgogICAgICAgICAgICBpZihpc0FjdGl2ZSkgewogICAgICAgICAgICAgICAgY29udGFpbmVyQWN0aXZlLmFwcGVuZENoaWxkKGNhcmQpOwogICAgICAgICAgICAgICAgaGFzQWN0aXZlID0gdHJ1ZTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGNvbnRhaW5lckluYWN0aXZlLmFwcGVuZENoaWxkKGNhcmQpOwogICAgICAgICAgICB9CiAgICAgICAgfSk7CgogICAgICAgIGlmKCFoYXNBY3RpdmUpIHsKICAgICAgICAgICAgY29udGFpbmVyQWN0aXZlLmlubmVySFRNTCA9IGA8ZGl2IHN0eWxlPSJncmlkLWNvbHVtbjoxLy0xOyB0ZXh0LWFsaWduOmNlbnRlcjsgcGFkZGluZzoyMHB4OyBjb2xvcjojYWFhOyI+QXVjdW4gQUVEIGVuIHBvc3RlIHN1ciBsZSBjcsOpbmVhdSBhY3R1ZWwgKCR7YWN0aXZlU2xvdExhYmVsfSkuPC9kaXY+YDsKICAgICAgICB9CiAgICB9CgoKICAgIC8vIC0tLSBMT0dJUVVFIElOVEVSTkFUIC0tLQogICAgZnVuY3Rpb24gdXBkYXRlSW50ZXJuYXQoKSB7CiAgICAgICAgY29uc3QgbmFtZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhZWQtc2VsZWN0LWNvbmNlcHRpb24nKS52YWx1ZTsKICAgICAgICBpZighbmFtZSkgcmV0dXJuOwogICAgICAgIGNvbnN0IHZhbCA9IHBhcnNlRmxvYXQoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ludGVybmF0LWhvdXJzJykudmFsdWUpIHx8IDA7CiAgICAgICAgY29uc3QgYWdlbnQgPSBEQVRBLmFnZW50cy5maW5kKGEgPT4gYS5uYW1lID09PSBuYW1lKTsKICAgICAgICBpZihhZ2VudCkgewogICAgICAgICAgICBhZ2VudC5pbnRlcm5hdEhvdXJzID0gdmFsOwogICAgICAgICAgICBzYXZlTG9jYWxTdG9yYWdlKCk7CiAgICAgICAgICAgIHVwZGF0ZVN0YXRzSGVhZGVyKCk7CiAgICAgICAgfQogICAgfQoKICAgIC8vIC0tLSBJTVBSRVNTSU9OUyAtLS0KICAgIGZ1bmN0aW9uIHByaW50RGFzaGJvYXJkKCkgewogICAgICAgIGlmKERBVEEuYWdlbnRzLmxlbmd0aCA9PT0gMCkgeyBhbGVydCgiQXVjdW5lIGRvbm7DqWUuIik7IHJldHVybjsgfQogICAgICAgIGNvbnN0IGFyZWEgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGFzaGJvYXJkLXByaW50LWFyZWEnKTsKICAgICAgICBhcmVhLmlubmVySFRNTCA9IGAKICAgICAgICAgICAgPGRpdiBjbGFzcz0icHJpbnQtaGVhZGVyLWJhdGNoIj5Sw6ljYXBpdHVsYXRpZiBkZXMgQWdlbnRzIC0gQUVEIFBJTE9URTwvZGl2PgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJkYXNoYm9hcmQtZ3JpZCI+JHtkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGFzaGJvYXJkLWFyZWEnKS5pbm5lckhUTUx9PC9kaXY+CiAgICAgICAgYDsKICAgICAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5hZGQoJ3ByaW50aW5nLWRhc2hib2FyZCcsICdwcmludGluZy1tb2RlJyk7CiAgICAgICAgd2luZG93LnByaW50KCk7CiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LnJlbW92ZSgncHJpbnRpbmctZGFzaGJvYXJkJywgJ3ByaW50aW5nLW1vZGUnKTsKICAgICAgICAgICAgYXJlYS5pbm5lckhUTUwgPSAnJzsKICAgICAgICB9LCAxMDAwKTsKICAgIH0KCiAgICBmdW5jdGlvbiBwcmludEdlc3Rpb24oKSB7CiAgICAgICAgY29uc3QgbmFtZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhZWQtc2VsZWN0LWdlc3Rpb24nKS52YWx1ZTsKICAgICAgICBpZighbmFtZSkgeyBhbGVydCgiU8OpbGVjdGlvbm5leiB1biBhZ2VudCIpOyByZXR1cm47IH0KICAgICAgICBjb25zdCBhbm51YWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYW5udWFsLXRhcmdldC1kaXNwbGF5JykuaW5uZXJUZXh0OwogICAgICAgIGNvbnN0IHNvbGRlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2JhbGFuY2UtZGlzcGxheScpLmlubmVyVGV4dDsKICAgICAgICBjb25zdCBoaXN0b3J5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2hpc3RvcnktYm9keScpLmlubmVySFRNTDsKICAgICAgICBjb25zdCBhcmVhID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2dlc3Rpb24tcHJpbnQtYXJlYScpOwogICAgICAgIGFyZWEuaW5uZXJIVE1MID0gYAogICAgICAgICAgICA8ZGl2IGNsYXNzPSJwcmludC1oZWFkZXItYmF0Y2giPkZpY2hlIGRlIEdlc3Rpb24gOiAke25hbWV9PC9kaXY+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9Imdlc3Rpb24tc3RhdHMtY29udGFpbmVyIj4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImJhbGFuY2UtYm94Ij48aDM+T2JqZWN0aWYgQW5udWVsPC9oMz48ZGl2IGNsYXNzPSJiYWxhbmNlLWFtb3VudCI+JHthbm51YWx9PC9kaXY+PC9kaXY+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJiYWxhbmNlLWJveCBzZWNvbmRhcnkiPjxoMz5Tb2xkZSBBanVzdGVtZW50czwvaDM+PGRpdiBjbGFzcz0iYmFsYW5jZS1hbW91bnQiPiR7c29sZGV9PC9kaXY+PC9kaXY+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8aDM+SGlzdG9yaXF1ZSBkZXMgbW91dmVtZW50czwvaDM+CiAgICAgICAgICAgIDx0YWJsZSBjbGFzcz0iaGlzdG9yeS10YWJsZSI+PHRoZWFkPjx0cj48dGg+RGF0ZTwvdGg+PHRoPlR5cGU8L3RoPjx0aD5Nb3RpZjwvdGg+PHRoPkg8L3RoPjx0aD48L3RoPjwvdHI+PC90aGVhZD48dGJvZHk+JHtoaXN0b3J5fTwvdGJvZHk+PC90YWJsZT4KICAgICAgICBgOwogICAgICAgIGNvbnN0IHRyYXNoZXMgPSBhcmVhLnF1ZXJ5U2VsZWN0b3JBbGwoJy5mYS10cmFzaCcpOwogICAgICAgIHRyYXNoZXMuZm9yRWFjaCh0ID0+IHQuc3R5bGUuZGlzcGxheSA9ICdub25lJyk7CiAgICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuYWRkKCdwcmludGluZy1nZXN0aW9uJywgJ3ByaW50aW5nLW1vZGUnKTsKICAgICAgICB3aW5kb3cucHJpbnQoKTsKICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QucmVtb3ZlKCdwcmludGluZy1nZXN0aW9uJywgJ3ByaW50aW5nLW1vZGUnKTsKICAgICAgICAgICAgYXJlYS5pbm5lckhUTUwgPSAnJzsKICAgICAgICB9LCAxMDAwKTsKICAgIH0KCiAgICBmdW5jdGlvbiBwcmludFJlcGFydGl0aW9uKCkgewogICAgICAgIGNvbnN0IGRheSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXBhcnRpdGlvbi1kYXktc2VsZWN0JykudmFsdWU7CiAgICAgICAgY29uc3QgY29udGVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXBhcnRpdGlvbi1jb250ZW50JykuaW5uZXJIVE1MOwogICAgICAgIGNvbnN0IGFyZWEgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVwYXJ0aXRpb24tcHJpbnQtYXJlYScpOwogICAgICAgIAogICAgICAgIGFyZWEuaW5uZXJIVE1MID0gYAogICAgICAgICAgICA8ZGl2IGNsYXNzPSJwcmludC1oZWFkZXItYmF0Y2giPlF1aSBmYWl0IHF1b2kgPyAtICR7ZGF5fTwvZGl2PgogICAgICAgICAgICAke2NvbnRlbnR9CiAgICAgICAgYDsKICAgICAgICAKICAgICAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5hZGQoJ3ByaW50aW5nLXJlcGFydGl0aW9uJywgJ3ByaW50aW5nLW1vZGUnKTsKICAgICAgICB3aW5kb3cucHJpbnQoKTsKICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QucmVtb3ZlKCdwcmludGluZy1yZXBhcnRpdGlvbicsICdwcmludGluZy1tb2RlJyk7CiAgICAgICAgICAgIGFyZWEuaW5uZXJIVE1MID0gJyc7CiAgICAgICAgfSwgMTAwMCk7CiAgICB9CgogICAgLy8gLS0tIElNUFJFU1NJT04gUEFSIEFHRU5UIC0tLQogICAgZnVuY3Rpb24gcHJpbnRTaW5nbGUoKSB7CiAgICAgICAgY29uc3QgbmFtZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhZWQtc2VsZWN0LWNvbmNlcHRpb24nKS52YWx1ZTsKICAgICAgICBpZighbmFtZSkgeyBhbGVydCgiU8OpbGVjdGlvbm5leiB1biBhZ2VudCAhIik7IHJldHVybjsgfQogICAgICAgIAogICAgICAgIGNvbnN0IGFnZW50ID0gREFUQS5hZ2VudHMuZmluZChhID0+IGEubmFtZSA9PT0gbmFtZSk7CiAgICAgICAgaWYoIWFnZW50KSByZXR1cm47CgogICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdiYXRjaC1wcmludC1hcmVhJyk7CiAgICAgICAgY29udGFpbmVyLmlubmVySFRNTCA9ICcnOyAKICAgICAgICAKICAgICAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5hZGQoJ3ByaW50aW5nLWJhdGNoJywgJ3ByaW50aW5nLW1vZGUnKTsKCiAgICAgICAgY29uc3QgcGFnZURpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgICAgIHBhZ2VEaXYuY2xhc3NOYW1lID0gJ3BhZ2UtYnJlYWsnOwogICAgICAgIHBhZ2VEaXYuaW5uZXJIVE1MID0gYDxkaXYgY2xhc3M9InByaW50LWhlYWRlci1iYXRjaCI+RW1wbG9pIGR1IHRlbXBzIDogJHthZ2VudC5uYW1lfSAoJHthZ2VudC5mdGVMYWJlbH0pPC9kaXY+YDsKICAgICAgICAKICAgICAgICBjb25zdCB0YWJsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RhYmxlJyk7CiAgICAgICAgdGFibGUuY2xhc3NOYW1lID0gJ2VkdC10YWJsZSc7CiAgICAgICAgdGFibGUuaW5uZXJIVE1MID0gZ2VuZXJhdGVUYWJsZUhUTUwoYWdlbnQubmFtZSk7CiAgICAgICAgCiAgICAgICAgcGFnZURpdi5hcHBlbmRDaGlsZCh0YWJsZSk7CiAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKHBhZ2VEaXYpOwoKICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgICAgd2luZG93LnByaW50KCk7CiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QucmVtb3ZlKCdwcmludGluZy1iYXRjaCcsICdwcmludGluZy1tb2RlJyk7CiAgICAgICAgICAgICAgICBjb250YWluZXIuaW5uZXJIVE1MID0gJyc7CiAgICAgICAgICAgIH0sIDEwMDApOwogICAgICAgIH0sIDUwMCk7CiAgICB9CgogICAgZnVuY3Rpb24gcHJpbnRBbGwoKSB7CiAgICAgICAgaWYoREFUQS5hZ2VudHMubGVuZ3RoID09PSAwKSB7IGFsZXJ0KCJBdWN1biBhZ2VudCDDoCBpbXByaW1lci4iKTsgcmV0dXJuOyB9CiAgICAgICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2JhdGNoLXByaW50LWFyZWEnKTsKICAgICAgICBjb250YWluZXIuaW5uZXJIVE1MID0gJyc7IAogICAgICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmFkZCgncHJpbnRpbmctYmF0Y2gnLCAncHJpbnRpbmctbW9kZScpOwogICAgICAgIERBVEEuYWdlbnRzLmZvckVhY2goKGFnZW50LCBpbmRleCkgPT4gewogICAgICAgICAgICBjb25zdCBwYWdlRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgICAgICAgIHBhZ2VEaXYuY2xhc3NOYW1lID0gJ3BhZ2UtYnJlYWsnOwogICAgICAgICAgICBwYWdlRGl2LmlubmVySFRNTCA9IGA8ZGl2IGNsYXNzPSJwcmludC1oZWFkZXItYmF0Y2giPkVtcGxvaSBkdSB0ZW1wcyA6ICR7YWdlbnQubmFtZX0gKCR7YWdlbnQuZnRlTGFiZWx9KTwvZGl2PmA7CiAgICAgICAgICAgIGNvbnN0IHRhYmxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGFibGUnKTsKICAgICAgICAgICAgdGFibGUuY2xhc3NOYW1lID0gJ2VkdC10YWJsZSc7CiAgICAgICAgICAgIHRhYmxlLmlubmVySFRNTCA9IGdlbmVyYXRlVGFibGVIVE1MKGFnZW50Lm5hbWUpOwogICAgICAgICAgICBwYWdlRGl2LmFwcGVuZENoaWxkKHRhYmxlKTsKICAgICAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKHBhZ2VEaXYpOwogICAgICAgIH0pOwogICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgICB3aW5kb3cucHJpbnQoKTsKICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5yZW1vdmUoJ3ByaW50aW5nLWJhdGNoJywgJ3ByaW50aW5nLW1vZGUnKTsKICAgICAgICAgICAgICAgIGNvbnRhaW5lci5pbm5lckhUTUwgPSAnJzsKICAgICAgICAgICAgfSwgMTAwMCk7CiAgICAgICAgfSwgNTAwKTsKICAgIH0KCiAgICAvLyBHRVNUSU9OIERVIFJFTkRVIERFIExBIFRBQkxFIChBZGFwdMOpIGF1eCBzbG90cykKICAgIGZ1bmN0aW9uIGdlbmVyYXRlVGFibGVIVE1MKGFnZW50TmFtZSkgewogICAgICAgIGxldCBodG1sID0gYDx0aGVhZD48dHI+PHRoIHN0eWxlPSJ3aWR0aDo5MHB4Ij5IPC90aD5gOwogICAgICAgIERBWVMuZm9yRWFjaChkID0+IGh0bWwgKz0gYDx0aD4ke2R9PC90aD5gKTsKICAgICAgICBodG1sICs9IGA8L3RyPjwvdGhlYWQ+PHRib2R5PmA7CiAgICAgICAgY29uc3QgYWdlbnQgPSBEQVRBLmFnZW50cy5maW5kKGEgPT4gYS5uYW1lID09PSBhZ2VudE5hbWUpOwogICAgICAgIGNvbnN0IHNjaGVkID0gREFUQS5zY2hlZHVsZXNbYWdlbnROYW1lXSB8fCB7fTsKICAgICAgICAKICAgICAgICBjb25zdCBzbG90cyA9IChEQVRBLmNvbmZpZy5zbG90cyAmJiBEQVRBLmNvbmZpZy5zbG90cy5sZW5ndGggPiAwKSA/IERBVEEuY29uZmlnLnNsb3RzIDogREVGQVVMVF9TTE9UUzsKCiAgICAgICAgLy8gQm91Y2xlIHN1ciBsZXMgY3LDqW5lYXV4IGTDqWZpbmlzCiAgICAgICAgc2xvdHMuZm9yRWFjaCgoc2xvdCwgaW5kZXgpID0+IHsKICAgICAgICAgICAgaHRtbCArPSBgPHRyPjx0ZCBjbGFzcz0idGltZS1jb2wiPiR7c2xvdC5zdGFydH08YnI+LTxicj4ke3Nsb3QuZW5kfTwvdGQ+YDsKICAgICAgICAgICAgREFZUy5mb3JFYWNoKGRheSA9PiB7CiAgICAgICAgICAgICAgICAvLyBMYSBjbMOpIHN0b2Nrw6llIGVzdCBKb3VyLUluZGV4IChleDogTHVuZGktMCkgcG91ciDDqnRyZSBpbmTDqXBlbmRhbnRlIGR1IHRleHRlCiAgICAgICAgICAgICAgICBjb25zdCBrZXkgPSBgJHtkYXl9LSR7aW5kZXh9YDsKICAgICAgICAgICAgICAgIGxldCBjb250ZW50ID0gJyc7CiAgICAgICAgICAgICAgICBsZXQgY2VsbENsYXNzID0gJyc7CiAgICAgICAgICAgICAgICBpZihhZ2VudCAmJiBhZ2VudC5jb25zdHJhaW50cy50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKGRheS50b0xvd2VyQ2FzZSgpKSkgewogICAgICAgICAgICAgICAgICAgIGNlbGxDbGFzcyA9ICdjZWxsLWJsb2NrZWQnOwogICAgICAgICAgICAgICAgfSBlbHNlIGlmKHNjaGVkW2tleV0pIHsKICAgICAgICAgICAgICAgICAgICBjb25zdCBiZ0NvbG9yID0gc2NoZWRba2V5XS5jb2xvciB8fCAnIzk5OSc7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgdGV4dENvbG9yID0gaXNMaWdodENvbG9yKGJnQ29sb3IpID8gJyMzMzMnIDogJ3doaXRlJzsKICAgICAgICAgICAgICAgICAgICBjb250ZW50ID0gYDxkaXYgY2xhc3M9ImNlbGwtY29udGVudCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6JHtiZ0NvbG9yfTtjb2xvcjoke3RleHRDb2xvcn0iPiR7c2NoZWRba2V5XS50b29sfTwvZGl2PmA7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBodG1sICs9IGA8dGQgY2xhc3M9IiR7Y2VsbENsYXNzfSI+JHtjb250ZW50fTwvdGQ+YDsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGh0bWwgKz0gYDwvdHI+YDsKICAgICAgICB9KTsKICAgICAgICBodG1sICs9IGA8L3Rib2R5PmA7CiAgICAgICAgcmV0dXJuIGh0bWw7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIGlzTGlnaHRDb2xvcihoZXgpIHsKICAgICAgICBjb25zdCBjID0gaGV4LnN1YnN0cmluZygxKTsKICAgICAgICBjb25zdCByZ2IgPSBwYXJzZUludChjLCAxNik7CiAgICAgICAgY29uc3QgciA9IChyZ2IgPj4gMTYpICYgMHhmZjsKICAgICAgICBjb25zdCBnID0gKHJnYiA+PiAgOCkgJiAweGZmOwogICAgICAgIGNvbnN0IGIgPSAocmdiID4+ICAwKSAmIDB4ZmY7CiAgICAgICAgY29uc3QgbHVtYSA9IDAuMjk5ICogciArIDAuNTg3ICogZyArIDAuMTE0ICogYjsKICAgICAgICByZXR1cm4gbHVtYSA+IDE2MDsKICAgIH0KCiAgICAvLyAtLS0gU1lTVEVNRSAtLS0KICAgIGZ1bmN0aW9uIHJlc2V0QWxsRGF0YSgpIHsKICAgICAgICBpZihjb25maXJtKCLDinRlcy12b3VzIHPDu3IgZGUgdm91bG9pciBUT1VUIGVmZmFjZXIgZXQgcmVwYXJ0aXIgw6AgesOpcm8gPyBDZXR0ZSBhY3Rpb24gZXN0IGlycsOpdmVyc2libGUuIikpIHsKICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oU1RPUkFHRV9LRVkpOwogICAgICAgICAgICBsb2NhdGlvbi5yZWxvYWQoKTsKICAgICAgICB9CiAgICB9CiAgICBmdW5jdGlvbiBkb3dubG9hZEpTT04oKSB7CiAgICAgICAgY29uc3QgZGF0YVN0ciA9ICJkYXRhOnRleHQvanNvbjtjaGFyc2V0PXV0Zi04LCIgKyBlbmNvZGVVUklDb21wb25lbnQoSlNPTi5zdHJpbmdpZnkoREFUQSkpOwogICAgICAgIGNvbnN0IGFuY2hvciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTsKICAgICAgICBhbmNob3Iuc2V0QXR0cmlidXRlKCJocmVmIiwgZGF0YVN0cik7IGFuY2hvci5zZXRBdHRyaWJ1dGUoImRvd25sb2FkIiwgInNhdXZlZ2FyZGVfYWVkX3BpbG90ZS5qc29uIik7CiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChhbmNob3IpOyBhbmNob3IuY2xpY2soKTsgYW5jaG9yLnJlbW92ZSgpOwogICAgfQogICAgZnVuY3Rpb24gaW1wb3J0SlNPTihpbnB1dCkgewogICAgICAgIGNvbnN0IGZpbGUgPSBpbnB1dC5maWxlc1swXTsKICAgICAgICBpZighZmlsZSkgcmV0dXJuOwogICAgICAgIGNvbnN0IHIgPSBuZXcgRmlsZVJlYWRlcigpOwogICAgICAgIHIub25sb2FkID0gZSA9PiB7IHRyeXsgREFUQSA9IEpTT04ucGFyc2UoZS50YXJnZXQucmVzdWx0KTsgc2F2ZUxvY2FsU3RvcmFnZSgpOyByZWZyZXNoQWxsVUkoKTsgfWNhdGNoKGUpe2FsZXJ0KCJFcnJldXIiKTt9IH07CiAgICAgICAgci5yZWFkQXNUZXh0KGZpbGUpOwogICAgfQogICAgZnVuY3Rpb24gc2F2ZUxvY2FsU3RvcmFnZSgpIHsgbG9jYWxTdG9yYWdlLnNldEl0ZW0oU1RPUkFHRV9LRVksIEpTT04uc3RyaW5naWZ5KERBVEEpKTsgfQogICAgCiAgICBmdW5jdGlvbiBsb2FkTG9jYWxTdG9yYWdlKCkgeyAKICAgICAgICBsZXQgaiA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKFNUT1JBR0VfS0VZKTsKICAgICAgICBpZihqKSB7IAogICAgICAgICAgICBEQVRBID0gSlNPTi5wYXJzZShqKTsgCiAgICAgICAgICAgIC8vIFLDqXRyby1jb21wYXRpYmlsaXTDqSA6IHNpIHBhcyBkZSBzbG90cywgb24gbWV0IGNldXggcGFyIGTDqWZhdXQKICAgICAgICAgICAgaWYoIURBVEEuY29uZmlnKSBEQVRBLmNvbmZpZyA9IHsgc2xvdHM6IERFRkFVTFRfU0xPVFMgfTsKICAgICAgICAgICAgaWYoIURBVEEuY29uZmlnLnNsb3RzKSBEQVRBLmNvbmZpZy5zbG90cyA9IERFRkFVTFRfU0xPVFM7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgLy8gUHJlbWllciBsYW5jZW1lbnQKICAgICAgICAgICAgREFUQS5jb25maWcuc2xvdHMgPSBERUZBVUxUX1NMT1RTOwogICAgICAgIH0KICAgICAgICByZWZyZXNoQWxsVUkoKTsgCiAgICB9CiAgICBmdW5jdGlvbiByZWZyZXNoQWxsVUkoKSB7IHJlbmRlck92ZXJ2aWV3KCk7IHBvcHVsYXRlU2VsZWN0cygpOyByZW5kZXJUaW1ldGFibGUoKTsgcmVuZGVySW1wb3J0SW5mbygpOyByZW5kZXJQYWxldHRlKCk7IH0KCiAgICAvLyAtLS0gR0VTVElPTiBERVMgU0VSVklDRVMgKFBBTEVUVEUgRFlOQU1JUVVFKSAtLS0KICAgIGZ1bmN0aW9uIGdldEFsbFNlcnZpY2VzKCkgewogICAgICAgIGNvbnN0IGN1c3RvbVNlcnZpY2VzID0gREFUQS5zZXJ2aWNlcyB8fCBbXTsKICAgICAgICByZXR1cm4gWy4uLkRFRkFVTFRfU0VSVklDRVMsIC4uLmN1c3RvbVNlcnZpY2VzXTsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gcmVuZGVyUGFsZXR0ZSgpIHsKICAgICAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGFsZXR0ZS1jb250YWluZXInKTsKICAgICAgICBpZighY29udGFpbmVyKSByZXR1cm47CiAgICAgICAgCiAgICAgICAgY29udGFpbmVyLmlubmVySFRNTCA9ICcnOwogICAgICAgIGNvbnN0IHNlcnZpY2VzID0gZ2V0QWxsU2VydmljZXMoKTsKICAgICAgICAKICAgICAgICBzZXJ2aWNlcy5mb3JFYWNoKChzZXJ2aWNlLCBpbmRleCkgPT4gewogICAgICAgICAgICBjb25zdCBpc0xpZ2h0ID0gaXNMaWdodENvbG9yKHNlcnZpY2UuY29sb3IpOwogICAgICAgICAgICBjb25zdCB0ZXh0Q29sb3IgPSBpc0xpZ2h0ID8gJyMzMzMnIDogJ3doaXRlJzsKICAgICAgICAgICAgY29uc3QgdGV4dFNoYWRvdyA9IGlzTGlnaHQgPyAnbm9uZScgOiAnMCAxcHggMXB4IHJnYmEoMCwwLDAsMC4yKSc7CiAgICAgICAgICAgIAogICAgICAgICAgICBjb25zdCB3cmFwcGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgICAgICAgIHdyYXBwZXIuY2xhc3NOYW1lID0gJ3BhbGV0dGUtYnRuLXdyYXBwZXInOwogICAgICAgICAgICAKICAgICAgICAgICAgY29uc3QgYnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgICAgICAgIGJ0bi5jbGFzc05hbWUgPSAncGFsZXR0ZS1idG4nICsgKGluZGV4ID09PSAwID8gJyBzZWxlY3RlZCcgOiAnJyk7CiAgICAgICAgICAgIGJ0bi5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBzZXJ2aWNlLmNvbG9yOwogICAgICAgICAgICBidG4uc3R5bGUuY29sb3IgPSB0ZXh0Q29sb3I7CiAgICAgICAgICAgIGJ0bi5zdHlsZS50ZXh0U2hhZG93ID0gdGV4dFNoYWRvdzsKICAgICAgICAgICAgYnRuLnRleHRDb250ZW50ID0gc2VydmljZS5uYW1lOwogICAgICAgICAgICBidG4ub25jbGljayA9IGZ1bmN0aW9uKGUpIHsgc2V0VG9vbChzZXJ2aWNlLm5hbWUsIHNlcnZpY2UuY29sb3IpOyB9OwogICAgICAgICAgICAKICAgICAgICAgICAgd3JhcHBlci5hcHBlbmRDaGlsZChidG4pOwogICAgICAgICAgICAKICAgICAgICAgICAgaWYoIXNlcnZpY2UuaXNEZWZhdWx0KSB7CiAgICAgICAgICAgICAgICBjb25zdCBkZWxldGVCdG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTsKICAgICAgICAgICAgICAgIGRlbGV0ZUJ0bi5jbGFzc05hbWUgPSAnc2VydmljZS1kZWxldGUnOwogICAgICAgICAgICAgICAgZGVsZXRlQnRuLmlubmVySFRNTCA9ICfDlyc7CiAgICAgICAgICAgICAgICBkZWxldGVCdG4udGl0bGUgPSAnU3VwcHJpbWVyIGNlIHNlcnZpY2UnOwogICAgICAgICAgICAgICAgZGVsZXRlQnRuLm9uY2xpY2sgPSBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgICAgICAgICAgICAgICBkZWxldGVTZXJ2aWNlKHNlcnZpY2UuaWQpOwogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIHdyYXBwZXIuYXBwZW5kQ2hpbGQoZGVsZXRlQnRuKTsKICAgICAgICAgICAgfQogICAgICAgICAgICAKICAgICAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKHdyYXBwZXIpOwogICAgICAgIH0pOwogICAgICAgIAogICAgICAgIGNvbnN0IGFkZEJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgICAgIGFkZEJ0bi5jbGFzc05hbWUgPSAncGFsZXR0ZS1idG4gYnRuLWFkZC1zZXJ2aWNlJzsKICAgICAgICBhZGRCdG4uaW5uZXJIVE1MID0gJzxpIGNsYXNzPSJmYXMgZmEtcGx1cyI+PC9pPic7CiAgICAgICAgYWRkQnRuLnRpdGxlID0gJ0Fqb3V0ZXIgdW4gc2VydmljZSc7CiAgICAgICAgYWRkQnRuLm9uY2xpY2sgPSBvcGVuU2VydmljZU1vZGFsOwogICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChhZGRCdG4pOwogICAgICAgIAogICAgICAgIGNvbnN0IGVyYXNlckJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgICAgIGVyYXNlckJ0bi5jbGFzc05hbWUgPSAncGFsZXR0ZS1idG4gYmctZXJhc2VyJzsKICAgICAgICBlcmFzZXJCdG4uaW5uZXJIVE1MID0gJzxpIGNsYXNzPSJmYXMgZmEtZXJhc2VyIj48L2k+JzsKICAgICAgICBlcmFzZXJCdG4ub25jbGljayA9IGZ1bmN0aW9uKCkgeyBzZXRUb29sKCdnb21tZScsICcnKTsgfTsKICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoZXJhc2VyQnRuKTsKICAgICAgICAKICAgICAgICBpZihzZXJ2aWNlcy5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgIENVUlJFTlRfVE9PTCA9IHsgbmFtZTogc2VydmljZXNbMF0ubmFtZSwgY29sb3I6IHNlcnZpY2VzWzBdLmNvbG9yLCBpc0VyYXNlcjogZmFsc2UgfTsKICAgICAgICB9CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIG9wZW5TZXJ2aWNlTW9kYWwoKSB7CiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21vZGFsLXNlcnZpY2UnKS5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTsKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2VydmljZS1uYW1lJykudmFsdWUgPSAnJzsKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2VydmljZS1jb2xvcicpLnZhbHVlID0gJyMzNDk4ZGInOwogICAgICAgIHVwZGF0ZVByZXZpZXcoKTsKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2VydmljZS1uYW1lJykuZm9jdXMoKTsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gY2xvc2VTZXJ2aWNlTW9kYWwoKSB7CiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21vZGFsLXNlcnZpY2UnKS5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gc2V0UHJlc2V0Q29sb3IoY29sb3IpIHsKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2VydmljZS1jb2xvcicpLnZhbHVlID0gY29sb3I7CiAgICAgICAgdXBkYXRlUHJldmlldygpOwogICAgfQogICAgCiAgICBmdW5jdGlvbiB1cGRhdGVQcmV2aWV3KCkgewogICAgICAgIGNvbnN0IG5hbWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2VydmljZS1uYW1lJykudmFsdWUudHJpbSgpIHx8ICdOT1VWRUFVIFNFUlZJQ0UnOwogICAgICAgIGNvbnN0IGNvbG9yID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NlcnZpY2UtY29sb3InKS52YWx1ZTsKICAgICAgICBjb25zdCBwcmV2aWV3ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NlcnZpY2UtcHJldmlldycpOwogICAgICAgIHByZXZpZXcudGV4dENvbnRlbnQgPSBuYW1lLnRvVXBwZXJDYXNlKCk7CiAgICAgICAgcHJldmlldy5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBjb2xvcjsKICAgICAgICBwcmV2aWV3LnN0eWxlLmNvbG9yID0gaXNMaWdodENvbG9yKGNvbG9yKSA/ICcjMzMzJyA6ICd3aGl0ZSc7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIGNvbmZpcm1BZGRTZXJ2aWNlKCkgewogICAgICAgIGNvbnN0IG5hbWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2VydmljZS1uYW1lJykudmFsdWUudHJpbSgpOwogICAgICAgIGNvbnN0IGNvbG9yID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NlcnZpY2UtY29sb3InKS52YWx1ZTsKICAgICAgICAKICAgICAgICBpZighbmFtZSkgeyBhbGVydCgnVmV1aWxsZXogZW50cmVyIHVuIG5vbSBwb3VyIGxlIHNlcnZpY2UnKTsgcmV0dXJuOyB9CiAgICAgICAgaWYobmFtZS5sZW5ndGggPiAxNSkgeyBhbGVydCgnTGUgbm9tIGR1IHNlcnZpY2UgbmUgZG9pdCBwYXMgZMOpcGFzc2VyIDE1IGNhcmFjdMOocmVzJyk7IHJldHVybjsgfQogICAgICAgIAogICAgICAgIGNvbnN0IGFsbFNlcnZpY2VzID0gZ2V0QWxsU2VydmljZXMoKTsKICAgICAgICBpZihhbGxTZXJ2aWNlcy5zb21lKHMgPT4gcy5uYW1lLnRvTG93ZXJDYXNlKCkgPT09IG5hbWUudG9Mb3dlckNhc2UoKSkpIHsgYWxlcnQoJ1VuIHNlcnZpY2UgYXZlYyBjZSBub20gZXhpc3RlIGTDqWrDoCcpOyByZXR1cm47IH0KICAgICAgICAKICAgICAgICBjb25zdCBuZXdTZXJ2aWNlID0geyBpZDogJ2N1c3RvbV8nICsgRGF0ZS5ub3coKSwgbmFtZTogbmFtZSwgY29sb3I6IGNvbG9yLCBpc0RlZmF1bHQ6IGZhbHNlIH07CiAgICAgICAgaWYoIURBVEEuc2VydmljZXMpIERBVEEuc2VydmljZXMgPSBbXTsKICAgICAgICBEQVRBLnNlcnZpY2VzLnB1c2gobmV3U2VydmljZSk7CiAgICAgICAgCiAgICAgICAgc2F2ZUxvY2FsU3RvcmFnZSgpOwogICAgICAgIHJlbmRlclBhbGV0dGUoKTsKICAgICAgICBjbG9zZVNlcnZpY2VNb2RhbCgpOwogICAgICAgIAogICAgICAgIENVUlJFTlRfVE9PTCA9IHsgbmFtZTogbmV3U2VydmljZS5uYW1lLCBjb2xvcjogbmV3U2VydmljZS5jb2xvciwgaXNFcmFzZXI6IGZhbHNlIH07CiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnBhbGV0dGUtYnRuJykuZm9yRWFjaChiID0+IGIuY2xhc3NMaXN0LnJlbW92ZSgnc2VsZWN0ZWQnKSk7CiAgICAgICAgY29uc3QgYnRucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5wYWxldHRlLWJ0bicpOwogICAgICAgIGlmKGJ0bnMubGVuZ3RoID4gMikgYnRuc1tidG5zLmxlbmd0aCAtIDNdLmNsYXNzTGlzdC5hZGQoJ3NlbGVjdGVkJyk7IAogICAgfQogICAgCiAgICBmdW5jdGlvbiBkZWxldGVTZXJ2aWNlKHNlcnZpY2VJZCkgewogICAgICAgIGlmKCFjb25maXJtKCdTdXBwcmltZXIgY2Ugc2VydmljZSA/JykpIHJldHVybjsKICAgICAgICBEQVRBLnNlcnZpY2VzID0gKERBVEEuc2VydmljZXMgfHwgW10pLmZpbHRlcihzID0+IHMuaWQgIT09IHNlcnZpY2VJZCk7CiAgICAgICAgc2F2ZUxvY2FsU3RvcmFnZSgpOwogICAgICAgIHJlbmRlclBhbGV0dGUoKTsKICAgIH0KICAgIAogICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihlKSB7CiAgICAgICAgY29uc3QgbW9kYWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbW9kYWwtc2VydmljZScpOwogICAgICAgIGlmKGUudGFyZ2V0ID09PSBtb2RhbCkgY2xvc2VTZXJ2aWNlTW9kYWwoKTsKICAgICAgICBjb25zdCBtb2RhbEdyaWQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbW9kYWwtZ3JpZC1jb25maWcnKTsKICAgICAgICBpZihlLnRhcmdldCA9PT0gbW9kYWxHcmlkKSBtb2RhbEdyaWQuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7CiAgICB9KTsKICAgIAogICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZ1bmN0aW9uKCkgewogICAgICAgIGNvbnN0IG5hbWVJbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZXJ2aWNlLW5hbWUnKTsKICAgICAgICBpZihuYW1lSW5wdXQpIG5hbWVJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIHVwZGF0ZVByZXZpZXcpOwogICAgfSk7CgogICAgLy8gLS0tIExPR0lRVUUgTUVOVSA0IDogUVVJIEZBSVQgUVVPSSAoUkVQQVJUSVRJT04pIC0tLQogICAgZnVuY3Rpb24gcmVuZGVyUmVwYXJ0aXRpb24oKSB7CiAgICAgICAgY29uc3QgZGF5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JlcGFydGl0aW9uLWRheS1zZWxlY3QnKS52YWx1ZTsKICAgICAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVwYXJ0aXRpb24tY29udGVudCcpOwogICAgICAgIGNvbnN0IHNlcnZpY2VzID0gZ2V0QWxsU2VydmljZXMoKTsKICAgICAgICAKICAgICAgICBpZighY29udGFpbmVyKSByZXR1cm47CgogICAgICAgIGxldCBodG1sID0gYDx0YWJsZSBjbGFzcz0icmVwYXJ0aXRpb24tdGFibGUiPjx0aGVhZD48dHI+YDsKICAgICAgICBodG1sICs9IGA8dGggc3R5bGU9IndpZHRoOjkwcHg7IGJhY2tncm91bmQ6IzJjM2U1MDsgei1pbmRleDoyMDsiPkhvcmFpcmU8L3RoPmA7CiAgICAgICAgCiAgICAgICAgc2VydmljZXMuZm9yRWFjaChzID0+IHsKICAgICAgICAgICAgY29uc3QgaXNMaWdodCA9IGlzTGlnaHRDb2xvcihzLmNvbG9yKTsKICAgICAgICAgICAgY29uc3QgdGV4dENvbG9yID0gaXNMaWdodCA/ICcjMzMzJyA6ICd3aGl0ZSc7CiAgICAgICAgICAgIGh0bWwgKz0gYDx0aCBzdHlsZT0iYmFja2dyb3VuZDoke3MuY29sb3J9OyBjb2xvcjoke3RleHRDb2xvcn07IGJvcmRlci1jb2xvcjoke2lzTGlnaHQ/JyNjY2MnOnMuY29sb3J9Ij4ke3MubmFtZX08L3RoPmA7CiAgICAgICAgfSk7CiAgICAgICAgaHRtbCArPSBgPC90cj48L3RoZWFkPjx0Ym9keT5gOwoKICAgICAgICBjb25zdCBzbG90cyA9IChEQVRBLmNvbmZpZy5zbG90cyAmJiBEQVRBLmNvbmZpZy5zbG90cy5sZW5ndGggPiAwKSA/IERBVEEuY29uZmlnLnNsb3RzIDogREVGQVVMVF9TTE9UUzsKCiAgICAgICAgc2xvdHMuZm9yRWFjaCgoc2xvdCwgaW5kZXgpID0+IHsKICAgICAgICAgICAgaHRtbCArPSBgPHRyPjx0ZCBzdHlsZT0iZm9udC13ZWlnaHQ6Ym9sZDsgYmFja2dyb3VuZDojZjBmMmY1OyB0ZXh0LWFsaWduOmNlbnRlcjsgYm9yZGVyLXJpZ2h0OjJweCBzb2xpZCAjY2NjOyBmb250LXNpemU6MC43NXJlbTsiPiR7c2xvdC5zdGFydH08YnI+LTxicj4ke3Nsb3QuZW5kfTwvdGQ+YDsKICAgICAgICAgICAgCiAgICAgICAgICAgIHNlcnZpY2VzLmZvckVhY2goc2VydmljZSA9PiB7CiAgICAgICAgICAgICAgICBsZXQgYWdlbnRzT25Qb3N0ID0gW107CiAgICAgICAgICAgICAgICBEQVRBLmFnZW50cy5mb3JFYWNoKGFnZW50ID0+IHsKICAgICAgICAgICAgICAgICAgICBjb25zdCBrZXkgPSBgJHtkYXl9LSR7aW5kZXh9YDsKICAgICAgICAgICAgICAgICAgICBjb25zdCBzY2hlZCA9IERBVEEuc2NoZWR1bGVzW2FnZW50Lm5hbWVdOwogICAgICAgICAgICAgICAgICAgIGlmKHNjaGVkICYmIHNjaGVkW2tleV0gJiYgc2NoZWRba2V5XS50b29sID09PSBzZXJ2aWNlLm5hbWUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgYWdlbnRzT25Qb3N0LnB1c2goYWdlbnQubmFtZSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIGxldCBjZWxsQ29udGVudCA9IGFnZW50c09uUG9zdC5tYXAobmFtZSA9PiBgPHNwYW4gY2xhc3M9ImFnZW50LXRhZyI+JHtuYW1lfTwvc3Bhbj5gKS5qb2luKCcnKTsKICAgICAgICAgICAgICAgIGh0bWwgKz0gYDx0ZD4ke2NlbGxDb250ZW50fTwvdGQ+YDsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGh0bWwgKz0gYDwvdHI+YDsKICAgICAgICB9KTsKCiAgICAgICAgaHRtbCArPSBgPC90Ym9keT48L3RhYmxlPmA7CiAgICAgICAgY29udGFpbmVyLmlubmVySFRNTCA9IGh0bWw7CiAgICB9CgogICAgLy8gLS0tIElNUE9SVCBFWENFTCAtLS0KICAgIGZ1bmN0aW9uIGhhbmRsZUV4Y2VsKGlucHV0KSB7CiAgICAgICAgY29uc3QgZiA9IGlucHV0LmZpbGVzWzBdOyAKICAgICAgICBpZighZikgcmV0dXJuOwogICAgICAgIAogICAgICAgIGNvbnN0IHIgPSBuZXcgRmlsZVJlYWRlcigpOwogICAgICAgIHIub25sb2FkID0gZSA9PiB7CiAgICAgICAgICAgIGNvbnN0IHdiID0gWExTWC5yZWFkKG5ldyBVaW50OEFycmF5KGUudGFyZ2V0LnJlc3VsdCksIHt0eXBlOidhcnJheSd9KTsKICAgICAgICAgICAgY29uc3Qgcm93cyA9IFhMU1gudXRpbHMuc2hlZXRfdG9fanNvbih3Yi5TaGVldHNbd2IuU2hlZXROYW1lc1swXV0sIHtoZWFkZXI6MX0pOwogICAgICAgICAgICAKICAgICAgICAgICAgY29uc3QgaGVhZGVyID0gcm93c1swXTsKICAgICAgICAgICAgY29uc3QgcXVvdGl0ZXMgPSBbXTsKICAgICAgICAgICAgLy8gTU9ESUZJQ0FUSU9OIElDSSA6IE9uIHNjYW5uZSBqdXNxdSfDoCBsYSBjb2xvbm5lIDggKEluZGV4IEkpIHBvdXIgbGVzIHF1b3RpdMOpcwogICAgICAgICAgICBmb3IobGV0IGNvbCA9IDE7IGNvbCA8PSA4OyBjb2wrKykgewogICAgICAgICAgICAgICAgY29uc3QgdmFsID0gcGFyc2VGbG9hdChoZWFkZXJbY29sXSk7CiAgICAgICAgICAgICAgICBpZighaXNOYU4odmFsKSAmJiB2YWwgPiAwKSB7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgZnRlID0gdmFsID4gMSA/IHZhbCAvIDEwMCA6IHZhbDsKICAgICAgICAgICAgICAgICAgICBxdW90aXRlcy5wdXNoKHsgY29sdW1uOiBjb2wsIGZ0ZTogZnRlLCBsYWJlbDogTWF0aC5yb3VuZChmdGUgKiAxMDApICsgJyUnIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIAogICAgICAgICAgICBEQVRBLnF1b3RpdGVzID0gcXVvdGl0ZXM7CiAgICAgICAgICAgIERBVEEuYWdlbnRzID0gW107CiAgICAgICAgICAgIAogICAgICAgICAgICBmb3IobGV0IGkgPSAxOyBpIDwgcm93cy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgY29uc3QgYyA9IHJvd3NbaV07IAogICAgICAgICAgICAgICAgaWYoIWMgfHwgIWNbMF0pIGNvbnRpbnVlOwogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBsZXQgZnRlID0gMDsKICAgICAgICAgICAgICAgIGxldCBmdGVMYWJlbCA9ICJJbmNvbm51IjsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgZm9yKGNvbnN0IHEgb2YgcXVvdGl0ZXMpIHsKICAgICAgICAgICAgICAgICAgICBpZihjaGVja1goY1txLmNvbHVtbl0pKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGZ0ZSA9IHEuZnRlOwogICAgICAgICAgICAgICAgICAgICAgICBmdGVMYWJlbCA9IHEubGFiZWw7CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgaWYoZnRlID09PSAwKSBjb250aW51ZTsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgLy8gTU9ESUZJQ0FUSU9OIElDSSA6IFLDqWFsaWduZW1lbnQgZGVzIGNvbG9ubmVzIHNlbG9uIGxlIG5vdXZlYXUgZmljaGllcgogICAgICAgICAgICAgICAgLy8gQ29sIDEwIChLKSA9IFRlbXBzIGRlIHRyYXZhaWwgYW5udWVsCiAgICAgICAgICAgICAgICAvLyBDb2wgMTEgKEwpID0gQ3LDqWRpdCBmb3JtYXRpb24KICAgICAgICAgICAgICAgIC8vIENvbCA5IChKKSA9IENvbnRyYWludGVzCiAgICAgICAgICAgICAgICBjb25zdCBiYXNlID0gcGFyc2VGbG9hdChjWzEwXSkgfHwgMTYwNzsKICAgICAgICAgICAgICAgIGNvbnN0IGNyZWRpdCA9IHBhcnNlRmxvYXQoY1sxMV0pIHx8IDA7CiAgICAgICAgICAgICAgICBjb25zdCBuZXRBbm51YWwgPSAoYmFzZSAqIGZ0ZSkgLSBjcmVkaXQ7CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIERBVEEuYWdlbnRzLnB1c2goewogICAgICAgICAgICAgICAgICAgIG5hbWU6IGNbMF0sIGZ0ZTogZnRlLCBmdGVMYWJlbDogZnRlTGFiZWwsIGJhc2U6IGJhc2UsCiAgICAgICAgICAgICAgICAgICAgcmF3QW5udWFsOiBiYXNlICogZnRlLCBjcmVkaXQ6IGNyZWRpdCwgbmV0QW5udWFsOiBuZXRBbm51YWwsIAogICAgICAgICAgICAgICAgICAgIHdlZWtseVRhcmdldDogTWF0aC5tYXgoMCwgbmV0QW5udWFsIC8gMzkpLCBpbnRlcm5hdEhvdXJzOiAwLAogICAgICAgICAgICAgICAgICAgIGNvbnN0cmFpbnRzOiAoY1s5XSB8fCAiIikudHJpbSgpCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgICBzYXZlTG9jYWxTdG9yYWdlKCk7IAogICAgICAgICAgICByZWZyZXNoQWxsVUkoKTsKICAgICAgICB9OwogICAgICAgIHIucmVhZEFzQXJyYXlCdWZmZXIoZik7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIGNoZWNrWCh2KSB7IHJldHVybiB2ICYmIFN0cmluZyh2KS50b1VwcGVyQ2FzZSgpLnRyaW0oKSA9PT0gJ1gnOyB9CgogICAgLy8gLS0tIEFGRklDSEFHRSBJTkZPIElNUE9SVCAtLS0KICAgIGZ1bmN0aW9uIHJlbmRlckltcG9ydEluZm8oKSB7CiAgICAgICAgY29uc3QgYXJlYSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbXBvcnQtaW5mby1hcmVhJyk7CiAgICAgICAgaWYoIURBVEEucXVvdGl0ZXMgfHwgREFUQS5xdW90aXRlcy5sZW5ndGggPT09IDApIHsgYXJlYS5pbm5lckhUTUwgPSAnJzsgcmV0dXJuOyB9CiAgICAgICAgCiAgICAgICAgY29uc3QgcXVvdGl0ZUh0bWwgPSBEQVRBLnF1b3RpdGVzLm1hcChxID0+IGA8c3BhbiBjbGFzcz0icXVvdGl0ZS1pdGVtIj48c3Ryb25nPiR7cS5sYWJlbH08L3N0cm9uZz4gKGNvbC4ke3EuY29sdW1uICsgMX0pPC9zcGFuPmApLmpvaW4oJycpOwogICAgICAgIGFyZWEuaW5uZXJIVE1MID0gYAogICAgICAgICAgICA8ZGl2IGNsYXNzPSJpbXBvcnQtaW5mbyI+CiAgICAgICAgICAgICAgICA8aSBjbGFzcz0iZmFzIGZhLWluZm8tY2lyY2xlIiBzdHlsZT0iY29sb3I6dmFyKC0tc2Vjb25kYXJ5KSI+PC9pPgogICAgICAgICAgICAgICAgPHN0cm9uZz5GaWNoaWVyIGltcG9ydMOpPC9zdHJvbmc+IC0gJHtEQVRBLmFnZW50cy5sZW5ndGh9IGFnZW50KHMpIGNoYXJnw6kocykKICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InF1b3RpdGUtbGlzdCI+PHNwYW4gc3R5bGU9ImZvbnQtd2VpZ2h0OmJvbGQ7IG1hcmdpbi1yaWdodDoxMHB4OyI+UXVvdGl0w6lzIGTDqXRlY3TDqWVzIDo8L3NwYW4+JHtxdW90aXRlSHRtbH08L2Rpdj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgYDsKICAgIH0KCiAgICBmdW5jdGlvbiByZW5kZXJPdmVydmlldygpIHsKICAgICAgICBjb25zdCBjID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Rhc2hib2FyZC1hcmVhJyk7IAogICAgICAgIGMuaW5uZXJIVE1MID0gJyc7CiAgICAgICAgaWYoREFUQS5hZ2VudHMubGVuZ3RoID09PSAwKSB7IAogICAgICAgICAgICBjLmlubmVySFRNTCA9ICc8ZGl2IHN0eWxlPSJncmlkLWNvbHVtbjoxLy0xO3RleHQtYWxpZ246Y2VudGVyO3BhZGRpbmc6NTBweDtjb2xvcjojYWFhOyI+PGkgY2xhc3M9ImZhcyBmYS1mb2xkZXItb3BlbiIgc3R5bGU9ImZvbnQtc2l6ZTozcmVtOyBtYXJnaW4tYm90dG9tOjEwcHg7Ij48L2k+PGJyPkF1Y3VuZSBkb25uw6llLiBWZXVpbGxleiBpbXBvcnRlciB1biBmaWNoaWVyIEV4Y2VsIG91IHJlc3RhdXJlciB1bmUgc2F1dmVnYXJkZS48L2Rpdj4nOyAKICAgICAgICAgICAgcmV0dXJuOyAKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgREFUQS5hZ2VudHMuZm9yRWFjaChhID0+IHsKICAgICAgICAgICAgY29uc3Qgc3RhbmRhcmRRdW90aXRlcyA9IFsxLCAwLjgsIDAuNSwgMC4yNV07CiAgICAgICAgICAgIGNvbnN0IGlzU3RhbmRhcmQgPSBzdGFuZGFyZFF1b3RpdGVzLnNvbWUoc3EgPT4gTWF0aC5hYnMoc3EgLSBhLmZ0ZSkgPCAwLjAxKTsKICAgICAgICAgICAgY29uc3QgYmFkZ2VDbGFzcyA9IGlzU3RhbmRhcmQgPyAnYmFkZ2Utc3RhbmRhcmQnIDogJ2JhZGdlLWN1c3RvbSc7CiAgICAgICAgICAgIAogICAgICAgICAgICBjLmlubmVySFRNTCArPSBgPGRpdiBjbGFzcz0iYWVkLXN1bW1hcnktY2FyZCI+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJjYXJkLWhlYWRlciI+PHNwYW4gc3R5bGU9ImZvbnQtd2VpZ2h0OmJvbGQ7Y29sb3I6dmFyKC0tcHJpbWFyeSkiPiR7YS5uYW1lfTwvc3Bhbj48c3BhbiBjbGFzcz0iJHtiYWRnZUNsYXNzfSIgc3R5bGU9ImNvbG9yOndoaXRlO3BhZGRpbmc6MnB4IDhweDtib3JkZXItcmFkaXVzOjEwcHg7Zm9udC1zaXplOjAuOHJlbSI+JHthLmZ0ZUxhYmVsfTwvc3Bhbj48L2Rpdj4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImNhcmQtYm9keSI+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ic3RhdC1yb3ciPjxzcGFuPlF1b3RpdMOpPC9zcGFuPjxzcGFuPiR7KGEuZnRlICogMTAwKS50b0ZpeGVkKDApfSUgKCR7YS5mdGUudG9GaXhlZCgyKX0pPC9zcGFuPjwvZGl2PgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InN0YXQtcm93Ij48c3Bhbj5CYXNlIGFubnVlbGxlPC9zcGFuPjxzcGFuPiR7YS5iYXNlfWg8L3NwYW4+PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ic3RhdC1yb3ciPjxzcGFuPlRlbXBzIHByb3JhdMOpPC9zcGFuPjxzcGFuPiR7YS5yYXdBbm51YWwudG9GaXhlZCgxKX1oPC9zcGFuPjwvZGl2PgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InN0YXQtcm93Ij48c3Bhbj5DcsOpZGl0IGZvcm1hdGlvbjwvc3Bhbj48c3Bhbj4tJHthLmNyZWRpdH1oPC9zcGFuPjwvZGl2PgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InN0YXQtcm93Ij48c3Bhbj5OZXQgQW5udWVsPC9zcGFuPjxzcGFuPjxzdHJvbmc+JHthLm5ldEFubnVhbC50b0ZpeGVkKDEpfWg8L3N0cm9uZz48L3NwYW4+PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ic3RhdC1yb3ciIHN0eWxlPSJiYWNrZ3JvdW5kOiNmMGY5ZmY7Zm9udC13ZWlnaHQ6Ym9sZDtjb2xvcjojMjk4MGI5O21hcmdpbi10b3A6NXB4O3BhZGRpbmc6NXB4OyI+PHNwYW4+Q2libGUgSGViZG8gKMO3MzkpPC9zcGFuPjxzcGFuPiR7YS53ZWVrbHlUYXJnZXQudG9GaXhlZCgyKX1oPC9zcGFuPjwvZGl2PgogICAgICAgICAgICAgICAgICAgICR7YS5jb25zdHJhaW50cyA/IGA8ZGl2IGNsYXNzPSJjb25zdHJhaW50cy1ib3giPuKaoO+4jyAke2EuY29uc3RyYWludHN9PC9kaXY+YCA6ICcnfQogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDwvZGl2PmA7CiAgICAgICAgfSk7CiAgICB9CgogICAgLy8gLS0tIENPTkNFUFRJT04gLS0tCiAgICBmdW5jdGlvbiBwb3B1bGF0ZVNlbGVjdHMoKSB7CiAgICAgICAgY29uc3QgczEgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWVkLXNlbGVjdC1jb25jZXB0aW9uJyk7CiAgICAgICAgY29uc3QgczIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWVkLXNlbGVjdC1nZXN0aW9uJyk7CiAgICAgICAgY29uc3QgdjEgPSBzMS52YWx1ZSwgdjIgPSBzMi52YWx1ZTsKICAgICAgICBzMS5pbm5lckhUTUwgPSBzMi5pbm5lckhUTUwgPSAnPG9wdGlvbiB2YWx1ZT0iIj4tLSBTw6lsZWN0aW9ubmVyIC0tPC9vcHRpb24+JzsKICAgICAgICBEQVRBLmFnZW50cy5mb3JFYWNoKGEgPT4gewogICAgICAgICAgICBjb25zdCBvcHQgPSBgPG9wdGlvbiB2YWx1ZT0iJHthLm5hbWV9Ij4ke2EubmFtZX0gKCR7YS5mdGVMYWJlbH0pPC9vcHRpb24+YDsKICAgICAgICAgICAgczEuaW5uZXJIVE1MICs9IG9wdDsgczIuaW5uZXJIVE1MICs9IG9wdDsKICAgICAgICB9KTsKICAgICAgICBpZih2MSkgczEudmFsdWUgPSB2MTsgaWYodjIpIHMyLnZhbHVlID0gdjI7CiAgICB9CgogICAgZnVuY3Rpb24gY2hhbmdlQUVEKHZpZXcpIHsgCiAgICAgICAgaWYodmlldyA9PT0gJ2NvbmNlcHRpb24nKSB7IAogICAgICAgICAgICBjb25zdCBuYW1lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FlZC1zZWxlY3QtY29uY2VwdGlvbicpLnZhbHVlOwogICAgICAgICAgICBjb25zdCBhZ2VudCA9IERBVEEuYWdlbnRzLmZpbmQoYSA9PiBhLm5hbWUgPT09IG5hbWUpOwogICAgICAgICAgICBpZihhZ2VudCkgeyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW50ZXJuYXQtaG91cnMnKS52YWx1ZSA9IGFnZW50LmludGVybmF0SG91cnMgfHwgMDsgfQogICAgICAgICAgICByZW5kZXJUaW1ldGFibGUoKTsgdXBkYXRlU3RhdHNIZWFkZXIoKTsgCiAgICAgICAgfSBlbHNlIHsgdXBkYXRlR2VzdGlvblVJKCk7IH0gCiAgICB9CgogICAgZnVuY3Rpb24gc2V0VG9vbChuYW1lLCBjb2xvcikgewogICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5wYWxldHRlLWJ0bicpLmZvckVhY2goYiA9PiBiLmNsYXNzTGlzdC5yZW1vdmUoJ3NlbGVjdGVkJykpOwogICAgICAgIGlmKG5hbWUgIT09ICdnb21tZScpIGV2ZW50LnRhcmdldC5jbGFzc0xpc3QuYWRkKCdzZWxlY3RlZCcpOwogICAgICAgIENVUlJFTlRfVE9PTCA9IG5hbWUgPT09ICdnb21tZScgPyB7aXNFcmFzZXI6IHRydWV9IDoge25hbWU6IG5hbWUsIGNvbG9yOiBjb2xvciwgaXNFcmFzZXI6IGZhbHNlfTsKICAgIH0KCiAgICBmdW5jdGlvbiByZW5kZXJUaW1ldGFibGUoKSB7CiAgICAgICAgY29uc3QgbmFtZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhZWQtc2VsZWN0LWNvbmNlcHRpb24nKS52YWx1ZTsKICAgICAgICBjb25zdCB0YWJsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0aW1ldGFibGUnKTsKICAgICAgICBpZighbmFtZSkgeyB0YWJsZS5pbm5lckhUTUwgPSAnJzsgcmV0dXJuOyB9CiAgICAgICAgdGFibGUuaW5uZXJIVE1MID0gZ2VuZXJhdGVUYWJsZUhUTUwobmFtZSk7CiAgICAgICAgCiAgICAgICAgdGFibGUucXVlcnlTZWxlY3RvckFsbCgndGQ6bm90KC50aW1lLWNvbCknKS5mb3JFYWNoKHRkID0+IHsKICAgICAgICAgICAgdGQub25jbGljayA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgY29uc3QgdHIgPSB0aGlzLnBhcmVudE5vZGU7CiAgICAgICAgICAgICAgICBjb25zdCByb3dJbmRleCA9IEFycmF5LmZyb20odHIucGFyZW50Tm9kZS5jaGlsZHJlbikuaW5kZXhPZih0cik7CiAgICAgICAgICAgICAgICBjb25zdCBjb2xJbmRleCA9IEFycmF5LmZyb20odHIuY2hpbGRyZW4pLmluZGV4T2YodGhpcykgLSAxOyAKICAgICAgICAgICAgICAgIGlmKGNvbEluZGV4IDwgMCkgcmV0dXJuOwogICAgICAgICAgICAgICAgLy8gcm93SW5kZXggY29ycmVzcG9uZCDDoCBsJ2luZGV4IGR1IHNsb3QKICAgICAgICAgICAgICAgIGNvbnN0IGRheSA9IERBWVNbY29sSW5kZXhdOwogICAgICAgICAgICAgICAgY2xpY2tDZWxsKGRheSwgcm93SW5kZXgpOwogICAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICB9CgogICAgZnVuY3Rpb24gY2xpY2tDZWxsKGRheSwgc2xvdEluZGV4KSB7CiAgICAgICAgY29uc3QgbmFtZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhZWQtc2VsZWN0LWNvbmNlcHRpb24nKS52YWx1ZTsKICAgICAgICBpZighbmFtZSkgcmV0dXJuOwogICAgICAgIGNvbnN0IGFnZW50ID0gREFUQS5hZ2VudHMuZmluZChhID0+IGEubmFtZSA9PT0gbmFtZSk7CiAgICAgICAgaWYoYWdlbnQgJiYgYWdlbnQuY29uc3RyYWludHMudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhkYXkudG9Mb3dlckNhc2UoKSkpIHJldHVybjsKCiAgICAgICAgaWYoIURBVEEuc2NoZWR1bGVzW25hbWVdKSBEQVRBLnNjaGVkdWxlc1tuYW1lXSA9IHt9OwogICAgICAgIGNvbnN0IGtleSA9IGAke2RheX0tJHtzbG90SW5kZXh9YDsgLy8gQ2zDqSBiYXPDqWUgc3VyIGwnaW5kZXggZHUgY3LDqW5lYXUKCiAgICAgICAgaWYoQ1VSUkVOVF9UT09MLmlzRXJhc2VyKSBkZWxldGUgREFUQS5zY2hlZHVsZXNbbmFtZV1ba2V5XTsKICAgICAgICBlbHNlIERBVEEuc2NoZWR1bGVzW25hbWVdW2tleV0gPSB7IHRvb2w6IENVUlJFTlRfVE9PTC5uYW1lLCBjb2xvcjogQ1VSUkVOVF9UT09MLmNvbG9yIH07CiAgICAgICAgCiAgICAgICAgc2F2ZUxvY2FsU3RvcmFnZSgpOwogICAgICAgIHJlbmRlclRpbWV0YWJsZSgpOwogICAgICAgIHVwZGF0ZVN0YXRzSGVhZGVyKCk7CiAgICB9CgogICAgZnVuY3Rpb24gdXBkYXRlU3RhdHNIZWFkZXIoKSB7CiAgICAgICAgY29uc3QgbmFtZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhZWQtc2VsZWN0LWNvbmNlcHRpb24nKS52YWx1ZTsKICAgICAgICBjb25zdCBlbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdoZWFkZXItc3RhdHMnKTsKICAgICAgICBpZighbmFtZSkgeyBlbC5pbm5lclRleHQgPSAiMGggLyAwaCI7IHJldHVybjsgfQogICAgICAgIAogICAgICAgIGNvbnN0IGFnZW50ID0gREFUQS5hZ2VudHMuZmluZChhID0+IGEubmFtZSA9PT0gbmFtZSk7CiAgICAgICAgY29uc3QgaW50ZXJuYXQgPSBhZ2VudC5pbnRlcm5hdEhvdXJzIHx8IDA7CiAgICAgICAgCiAgICAgICAgLy8gQ2FsY3VsIGR1IHRlbXBzIHBsYW5pZmnDqSBiYXPDqSBzdXIgbGEgZHVyw6llIHLDqWVsbGUgZGVzIHNsb3RzCiAgICAgICAgbGV0IHRvdGFsTWludXRlcyA9IDA7CiAgICAgICAgY29uc3Qgc2xvdHMgPSAoREFUQS5jb25maWcuc2xvdHMgJiYgREFUQS5jb25maWcuc2xvdHMubGVuZ3RoID4gMCkgPyBEQVRBLmNvbmZpZy5zbG90cyA6IERFRkFVTFRfU0xPVFM7CiAgICAgICAgY29uc3Qgc2NoZWQgPSBEQVRBLnNjaGVkdWxlc1tuYW1lXSB8fCB7fTsKCiAgICAgICAgREFZUy5mb3JFYWNoKGRheSA9PiB7CiAgICAgICAgICAgIHNsb3RzLmZvckVhY2goKHNsb3QsIGluZGV4KSA9PiB7CiAgICAgICAgICAgICAgICBjb25zdCBrZXkgPSBgJHtkYXl9LSR7aW5kZXh9YDsKICAgICAgICAgICAgICAgIGlmKHNjaGVkW2tleV0pIHsKICAgICAgICAgICAgICAgICAgICAvLyBDYWxjdWwgZHVyw6llIHNsb3QKICAgICAgICAgICAgICAgICAgICBjb25zdCBbaDEsIG0xXSA9IHNsb3Quc3RhcnQuc3BsaXQoJzonKS5tYXAoTnVtYmVyKTsKICAgICAgICAgICAgICAgICAgICBjb25zdCBbaDIsIG0yXSA9IHNsb3QuZW5kLnNwbGl0KCc6JykubWFwKE51bWJlcik7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgZHVyYXRpb24gPSAoaDIgKiA2MCArIG0yKSAtIChoMSAqIDYwICsgbTEpOwogICAgICAgICAgICAgICAgICAgIGlmKGR1cmF0aW9uID4gMCkgdG90YWxNaW51dGVzICs9IGR1cmF0aW9uOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9KTsKCiAgICAgICAgY29uc3QgZ3JpZEhvdXJzID0gdG90YWxNaW51dGVzIC8gNjA7CiAgICAgICAgY29uc3QgdG90YWxQbGFubmVkID0gZ3JpZEhvdXJzICsgaW50ZXJuYXQ7CiAgICAgICAgY29uc3QgdGFyZ2V0ID0gYWdlbnQud2Vla2x5VGFyZ2V0OwogICAgICAgIGNvbnN0IGRpZmYgPSB0b3RhbFBsYW5uZWQgLSB0YXJnZXQ7CiAgICAgICAgCiAgICAgICAgZWwuaW5uZXJIVE1MID0gYENpYmxlOiAke3RhcmdldC50b0ZpeGVkKDIpfWggfCBQbGFuaWZpw6k6ICR7dG90YWxQbGFubmVkLnRvRml4ZWQoMil9aCA8c21hbGw+KGRvbnQgJHtpbnRlcm5hdH1oIEludC4pPC9zbWFsbD4gfCA8c3BhbiBzdHlsZT0iY29sb3I6JHtNYXRoLmFicyhkaWZmKSA8IDEgPyAnZ3JlZW4nIDogJ3JlZCd9Ij5EaWZmOiAke2RpZmYgPiAwID8gJysnIDogJyd9JHtkaWZmLnRvRml4ZWQoMil9aDwvc3Bhbj5gOwogICAgfQoKICAgIC8vIC0tLSBHRVNUSU9OIC0tLQogICAgZnVuY3Rpb24gYWRkQWRqdXN0bWVudCgpIHsKICAgICAgICBjb25zdCBuYW1lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FlZC1zZWxlY3QtZ2VzdGlvbicpLnZhbHVlOwogICAgICAgIGlmKCFuYW1lKSByZXR1cm4gYWxlcnQoIlPDqWxlY3Rpb25uZXogdW4gYWdlbnQiKTsKICAgICAgICBjb25zdCB0eXBlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Fkai10eXBlJykudmFsdWU7CiAgICAgICAgY29uc3QgYW10ID0gcGFyc2VGbG9hdChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWRqLWFtb3VudCcpLnZhbHVlKTsKICAgICAgICBjb25zdCByID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Fkai1yZWFzb24nKS52YWx1ZTsKICAgICAgICBpZighYW10IHx8ICFyKSByZXR1cm4gYWxlcnQoIkluZm9zIG1hbnF1YW50ZXMiKTsKICAgICAgICBpZighREFUQS5hZGp1c3RtZW50c1tuYW1lXSkgREFUQS5hZGp1c3RtZW50c1tuYW1lXSA9IFtdOwogICAgICAgIERBVEEuYWRqdXN0bWVudHNbbmFtZV0ucHVzaCh7aWQ6IERhdGUubm93KCksIGRhdGU6IG5ldyBEYXRlKCkudG9Mb2NhbGVEYXRlU3RyaW5nKCksIHR5cGUsIGFtb3VudDogYW10LCByZWFzb246IHJ9KTsKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWRqLWFtb3VudCcpLnZhbHVlID0gJyc7IAogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhZGotcmVhc29uJykudmFsdWUgPSAnJzsKICAgICAgICBzYXZlTG9jYWxTdG9yYWdlKCk7IHVwZGF0ZUdlc3Rpb25VSSgpOwogICAgfQogICAgCiAgICBmdW5jdGlvbiB1cGRhdGVHZXN0aW9uVUkoKSB7CiAgICAgICAgY29uc3QgbmFtZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhZWQtc2VsZWN0LWdlc3Rpb24nKS52YWx1ZTsKICAgICAgICBjb25zdCB0YiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdoaXN0b3J5LWJvZHknKTsKICAgICAgICBjb25zdCBiYWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYmFsYW5jZS1kaXNwbGF5Jyk7CiAgICAgICAgY29uc3QgdGFyZ2V0QmFsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FubnVhbC10YXJnZXQtZGlzcGxheScpOwogICAgICAgIAogICAgICAgIHRiLmlubmVySFRNTCA9ICcnOyBiYWwuaW5uZXJUZXh0ID0gJzBoJzsgdGFyZ2V0QmFsLmlubmVyVGV4dCA9ICcwaCc7CiAgICAgICAgaWYoIW5hbWUpIHJldHVybjsKICAgICAgICAKICAgICAgICBjb25zdCBhZ2VudCA9IERBVEEuYWdlbnRzLmZpbmQoYSA9PiBhLm5hbWUgPT09IG5hbWUpOwogICAgICAgIGlmKGFnZW50ICYmIGFnZW50Lm5ldEFubnVhbCkgdGFyZ2V0QmFsLmlubmVyVGV4dCA9IGFnZW50Lm5ldEFubnVhbC50b0ZpeGVkKDEpICsgJ2gnOwoKICAgICAgICBsZXQgYiA9IDA7CiAgICAgICAgKERBVEEuYWRqdXN0bWVudHNbbmFtZV0gfHwgW10pLmZvckVhY2goKGEsIGkpID0+IHsKICAgICAgICAgICAgY29uc3QgcCA9IGEudHlwZSA9PT0gJ3BsdXMnOyBiICs9IHAgPyBhLmFtb3VudCA6IC1hLmFtb3VudDsKICAgICAgICAgICAgdGIuaW5uZXJIVE1MICs9IGA8dHI+PHRkPiR7YS5kYXRlfTwvdGQ+PHRkIHN0eWxlPSJjb2xvcjoke3AgPyAnZ3JlZW4nIDogJ3JlZCd9Ij4ke3AgPyAnKycgOiAnLSd9PC90ZD48dGQ+JHthLnJlYXNvbn08L3RkPjx0ZD4ke2EuYW1vdW50fWg8L3RkPjx0ZD48aSBjbGFzcz0iZmFzIGZhLXRyYXNoIiBvbmNsaWNrPSJkZWxBZGooJyR7bmFtZX0nLCR7aX0pIiBzdHlsZT0iY3Vyc29yOnBvaW50ZXIiPjwvaT48L3RkPjwvdHI+YDsKICAgICAgICB9KTsKICAgICAgICBiYWwuaW5uZXJUZXh0ID0gKGIgPiAwID8gJysnIDogJycpICsgYiArICdoJzsgCiAgICAgICAgYmFsLnN0eWxlLmNvbG9yID0gYiA+PSAwID8gJ3doaXRlJyA6ICcjZmFiMWEwJzsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gZGVsQWRqKG4sIGkpIHsgREFUQS5hZGp1c3RtZW50c1tuXS5zcGxpY2UoaSwgMSk7IHNhdmVMb2NhbFN0b3JhZ2UoKTsgdXBkYXRlR2VzdGlvblVJKCk7IH0KCjwvc2NyaXB0PgoKPHNjcmlwdD4Kd2luZG93LnBhcmVudC5wb3N0TWVzc2FnZSh7IHR5cGU6ICdwaWxvdGUtbW9kdWxlLXJlYWR5JywgbW9kdWxlOiAnYWVkJyB9LCAnKicpOwo8L3NjcmlwdD4KCgo8c2NyaXB0Pgpkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgZnVuY3Rpb24oZSkgewogICAgaWYgKCFlLmN0cmxLZXkgfHwgZS5zaGlmdEtleSB8fCBlLmFsdEtleSB8fCBlLm1ldGFLZXkpIHJldHVybjsKICAgIHZhciBrZXkgPSBlLmtleS50b0xvd2VyQ2FzZSgpOwogICAgaWYgKFsncCcsJ2UnLCdvJywnYScsJ2QnXS5pbmRleE9mKGtleSkgPj0gMCkgewogICAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgICB3aW5kb3cucGFyZW50LnBvc3RNZXNzYWdlKHt0eXBlOidwaWxvdGUtc2hvcnRjdXQnLCBrZXk6a2V5fSwgJyonKTsKICAgIH0KfSk7Cjwvc2NyaXB0Pgo8L2JvZHk+CjwvaHRtbD4=", "bibase": "PCFET0NUWVBFIGh0bWw+CjxodG1sIGxhbmc9ImZyIj4KPGhlYWQ+CiAgICA8bWV0YSBjaGFyc2V0PSJVVEYtOCI+CiAgICA8bWV0YSBuYW1lPSJ2aWV3cG9ydCIgY29udGVudD0id2lkdGg9ZGV2aWNlLXdpZHRoLCBpbml0aWFsLXNjYWxlPTEuMCI+CiAgICA8dGl0bGU+QnVsbGV0aW4gZCdpbmZvcm1hdGlvbjwvdGl0bGU+CiAgICA8IS0tIFRhaWx3aW5kIENTUyAtLT4KICAgIDxzY3JpcHQgc3JjPSJodHRwczovL2Nkbi50YWlsd2luZGNzcy5jb20iPjwvc2NyaXB0PgogICAgPCEtLSBIVE1MMlBERiAtLT4KICAgIDxzY3JpcHQgc3JjPSJodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9odG1sMnBkZi5qcy8wLjEwLjEvaHRtbDJwZGYuYnVuZGxlLm1pbi5qcyI+PC9zY3JpcHQ+CiAgICA8IS0tIEV4cG9ydCBXb3JkIChodG1sLWRvY3gtanMpICYgRmlsZVNhdmVyIC0tPgogICAgPHNjcmlwdCBzcmM9Imh0dHBzOi8vdW5wa2cuY29tL2h0bWwtZG9jeC1qcy9kaXN0L2h0bWwtZG9jeC5qcyI+PC9zY3JpcHQ+CiAgICA8c2NyaXB0IHNyYz0iaHR0cHM6Ly9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvRmlsZVNhdmVyLmpzLzIuMC41L0ZpbGVTYXZlci5taW4uanMiPjwvc2NyaXB0PgoKICAgIDwhLS0gUXVpbGwgRWRpdG9yIChXWVNJV1lHKSAtLT4KICAgIDxsaW5rIGhyZWY9Imh0dHBzOi8vY2RuLnF1aWxsanMuY29tLzEuMy42L3F1aWxsLnNub3cuY3NzIiByZWw9InN0eWxlc2hlZXQiPgogICAgPHNjcmlwdCBzcmM9Imh0dHBzOi8vY2RuLnF1aWxsanMuY29tLzEuMy42L3F1aWxsLm1pbi5qcyI+PC9zY3JpcHQ+CiAgICAKICAgIDwhLS0gRm9udCAtLT4KICAgIDxzdHlsZT4KICAgICAgICAvKiBBcHRvcyBmb250IChuYXRpdmUpICovCiAgICAgICAgCiAgICAgICAgYm9keSB7IGZvbnQtZmFtaWx5OiAnQXB0b3MnLCAnQ2FsaWJyaScsICdUcmVidWNoZXQgTVMnLCBBcmlhbCwgc2Fucy1zZXJpZjsgfQogICAgICAgIAogICAgICAgIC8qIEZvbnQgQ2xhc3NlcyAqLwogICAgICAgIC5mb250LWludGVyIHsgZm9udC1mYW1pbHk6ICdBcHRvcycsICdDYWxpYnJpJywgJ1RyZWJ1Y2hldCBNUycsIEFyaWFsLCBzYW5zLXNlcmlmOyB9CiAgICAgICAgLmZvbnQtc2VyaWYgeyBmb250LWZhbWlseTogJ01lcnJpd2VhdGhlcicsIHNlcmlmOyB9CiAgICAgICAgLmZvbnQtbW9ubyB7IGZvbnQtZmFtaWx5OiAnUm9ib3RvIE1vbm8nLCBtb25vc3BhY2U7IH0KCiAgICAgICAgLyogU2Nyb2xsYmFyIGN1c3RvbWlzYXRpb24gKi8KICAgICAgICA6Oi13ZWJraXQtc2Nyb2xsYmFyIHsgd2lkdGg6IDZweDsgfQogICAgICAgIDo6LXdlYmtpdC1zY3JvbGxiYXItdHJhY2sgeyBiYWNrZ3JvdW5kOiAjZjFmNWY5OyB9CiAgICAgICAgOjotd2Via2l0LXNjcm9sbGJhci10aHVtYiB7IGJhY2tncm91bmQ6ICNjYmQ1ZTE7IGJvcmRlci1yYWRpdXM6IDNweDsgfQogICAgICAgIDo6LXdlYmtpdC1zY3JvbGxiYXItdGh1bWI6aG92ZXIgeyBiYWNrZ3JvdW5kOiAjOTRhM2I4OyB9CgogICAgICAgIC8qIEE0IFBhcGVyIFN0eWxlIGZvciBQcmV2aWV3ICovCiAgICAgICAgLmE0LXBhZ2UgewogICAgICAgICAgICB3aWR0aDogMjEwbW07CiAgICAgICAgICAgIG1pbi1oZWlnaHQ6IDI4MG1tOwogICAgICAgICAgICBwYWRkaW5nOiAxNW1tOwogICAgICAgICAgICBtYXJnaW46IDAgYXV0bzsKICAgICAgICAgICAgYmFja2dyb3VuZDogd2hpdGU7CiAgICAgICAgICAgIGJveC1zaGFkb3c6IDAgMCAxNXB4IHJnYmEoMCwwLDAsMC4xKTsKICAgICAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlOwogICAgICAgICAgICBmb250LXNpemU6IDExcHQ7CiAgICAgICAgICAgIGxpbmUtaGVpZ2h0OiAxLjQ7CiAgICAgICAgICAgIGNvbG9yOiAjMWYyOTM3OwogICAgICAgICAgICBkaXNwbGF5OiBmbGV4OwogICAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uOwogICAgICAgIH0KCiAgICAgICAgLnBkZi1mb290ZXItZml4ZWQgewogICAgICAgICAgICBtYXJnaW4tdG9wOiBhdXRvOwogICAgICAgICAgICBwYWRkaW5nLXRvcDogMTBweDsKICAgICAgICAgICAgYm9yZGVyLXRvcDogMXB4IHNvbGlkICNlMmU4ZjA7CiAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjsKICAgICAgICAgICAgZm9udC1zaXplOiA5cHg7CiAgICAgICAgICAgIGNvbG9yOiAjOTRhM2I4OwogICAgICAgIH0KCiAgICAgICAgLyogU3R5bGVzIHNww6ljaWZpcXVlcyBwb3VyIGxlIGNvbnRlbnUgcmljaGUgKFF1aWxsL0hUTUwpIGRhbnMgbGUgUERGIGV0IGxhIFNpZGViYXIgKi8KICAgICAgICAucmljaC10ZXh0LWNvbnRlbnQgdWwgeyBsaXN0LXN0eWxlLXR5cGU6IGRpc2M7IG1hcmdpbi1sZWZ0OiAxLjVlbTsgbWFyZ2luLWJvdHRvbTogMC41ZW07IH0KICAgICAgICAucmljaC10ZXh0LWNvbnRlbnQgb2wgeyBsaXN0LXN0eWxlLXR5cGU6IGRlY2ltYWw7IG1hcmdpbi1sZWZ0OiAxLjVlbTsgbWFyZ2luLWJvdHRvbTogMC41ZW07IH0KICAgICAgICAucmljaC10ZXh0LWNvbnRlbnQgcCB7IG1hcmdpbi1ib3R0b206IDAuNWVtOyB9CiAgICAgICAgLnJpY2gtdGV4dC1jb250ZW50IHN0cm9uZyB7IGZvbnQtd2VpZ2h0OiA3MDA7IH0KICAgICAgICAucmljaC10ZXh0LWNvbnRlbnQgZW0geyBmb250LXN0eWxlOiBpdGFsaWM7IH0KICAgICAgICAucmljaC10ZXh0LWNvbnRlbnQgdSB7IHRleHQtZGVjb3JhdGlvbjogdW5kZXJsaW5lOyB9CiAgICAgICAgCiAgICAgICAgLyogU3R5bGVzIHBvdXIgbGVzIHRhaWxsZXMgZGUgcG9saWNlIFF1aWxsIGRhbnMgbGUgUERGL0FwZXLDp3UgKi8KICAgICAgICAucmljaC10ZXh0LWNvbnRlbnQgLnFsLXNpemUtc21hbGwgeyBmb250LXNpemU6IDAuNzVlbTsgfQogICAgICAgIC5yaWNoLXRleHQtY29udGVudCAucWwtc2l6ZS1sYXJnZSB7IGZvbnQtc2l6ZTogMS41ZW07IH0KICAgICAgICAucmljaC10ZXh0LWNvbnRlbnQgLnFsLXNpemUtaHVnZSB7IGZvbnQtc2l6ZTogMi41ZW07IH0KICAgICAgICAKICAgICAgICAvKiBOZXR0b3lhZ2UgZGVzIG1hcmdlcyBkdSBkZXJuaWVyIMOpbMOpbWVudCBwb3VyIMOpdml0ZXIgbGVzIGVzcGFjZXMgdmlkZXMgKi8KICAgICAgICAucmljaC10ZXh0LWNvbnRlbnQgPiAqOmxhc3QtY2hpbGQgeyBtYXJnaW4tYm90dG9tOiAwOyB9CgogICAgICAgIC8qIFByaW50IHN0eWxlcyAqLwogICAgICAgIEBtZWRpYSBwcmludCB7CiAgICAgICAgICAgIGJvZHkgKiB7IHZpc2liaWxpdHk6IGhpZGRlbjsgfQogICAgICAgICAgICAjcGRmLXByZXZpZXctY29udGFpbmVyLCAjcGRmLXByZXZpZXctY29udGFpbmVyICogeyB2aXNpYmlsaXR5OiB2aXNpYmxlOyB9CiAgICAgICAgICAgICNwZGYtcHJldmlldy1jb250YWluZXIgeyBwb3NpdGlvbjogYWJzb2x1dGU7IGxlZnQ6IDA7IHRvcDogMDsgbWFyZ2luOiAwOyBib3gtc2hhZG93OiBub25lOyB9CiAgICAgICAgICAgIC5uby1wcmludCB7IGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDsgfQogICAgICAgIH0KCiAgICAgICAgLmJpLWhlYWRlciB7CiAgICAgICAgICAgIGJvcmRlci1ib3R0b206IDJweCBzb2xpZCAjMWQ0ZWQ4OwogICAgICAgICAgICBwYWRkaW5nLWJvdHRvbTogMTBweDsKICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogMjBweDsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgLyogUXVpbGwgQ3VzdG9tIE92ZXJyaWRlcyB0byBtYXRjaCB0aGVtZSAqLwogICAgICAgIC5xbC10b29sYmFyLnFsLXNub3cgewogICAgICAgICAgICBib3JkZXI6IG5vbmU7CiAgICAgICAgICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjZjFmNWY5OwogICAgICAgICAgICBiYWNrZ3JvdW5kOiAjZjhmYWZjOwogICAgICAgICAgICBib3JkZXItcmFkaXVzOiAwLjc1cmVtIDAuNzVyZW0gMCAwOwogICAgICAgICAgICBwYWRkaW5nOiA4cHg7CiAgICAgICAgfQogICAgICAgIC5xbC1jb250YWluZXIucWwtc25vdyB7CiAgICAgICAgICAgIGJvcmRlcjogbm9uZTsKICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogMCAwIDAuNzVyZW0gMC43NXJlbTsKICAgICAgICAgICAgZm9udC1mYW1pbHk6ICdBcHRvcycsICdDYWxpYnJpJywgJ1RyZWJ1Y2hldCBNUycsIEFyaWFsLCBzYW5zLXNlcmlmOwogICAgICAgICAgICBmb250LXNpemU6IDAuODc1cmVtOyAvKiB0ZXh0LXNtICovCiAgICAgICAgfQogICAgICAgIC5xbC1lZGl0b3IgewogICAgICAgICAgICBtaW4taGVpZ2h0OiAxMjBweDsKICAgICAgICAgICAgbWF4LWhlaWdodDogMjUwcHg7IC8qIFBhcyBkJ2FncmFuZGlzc2VtZW50IGludXRpbGUgKi8KICAgICAgICAgICAgcGFkZGluZzogMTJweCAxNnB4OwogICAgICAgIH0KICAgICAgICAucWwtZWRpdG9yLnFsLWJsYW5rOjpiZWZvcmUgewogICAgICAgICAgICBmb250LXN0eWxlOiBub3JtYWw7CiAgICAgICAgICAgIGNvbG9yOiAjOTRhM2I4OwogICAgICAgICAgICBmb250LXNpemU6IDAuODc1cmVtOwogICAgICAgIH0KICAgICAgICAKICAgICAgICAvKiBDb250YWluZXIgd3JhcHBlciBmb3IgUXVpbGwgYm9yZGVyICovCiAgICAgICAgLnF1aWxsLXdyYXBwZXIgewogICAgICAgICAgICBib3JkZXI6IDJweCBzb2xpZCAjZjFmNWY5OwogICAgICAgICAgICBib3JkZXItcmFkaXVzOiAwLjc1cmVtOwogICAgICAgICAgICB0cmFuc2l0aW9uOiBib3JkZXItY29sb3IgMC4yczsKICAgICAgICAgICAgYmFja2dyb3VuZDogd2hpdGU7CiAgICAgICAgfQogICAgICAgIC5xdWlsbC13cmFwcGVyOmZvY3VzLXdpdGhpbiB7CiAgICAgICAgICAgIGJvcmRlci1jb2xvcjogI2ZiOTIzYzsgLyogb3JhbmdlLTQwMCAqLwogICAgICAgIH0KCiAgICAgICAgLyogQXV0byBzYXZlIGluZGljYXRvciBhbmltYXRpb24gKi8KICAgICAgICBAa2V5ZnJhbWVzIGZhZGUtaW4tb3V0IHsKICAgICAgICAgICAgMCUgeyBvcGFjaXR5OiAwOyB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoNXB4KTsgfQogICAgICAgICAgICAyMCUgeyBvcGFjaXR5OiAxOyB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoMCk7IH0KICAgICAgICAgICAgODAlIHsgb3BhY2l0eTogMTsgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKDApOyB9CiAgICAgICAgICAgIDEwMCUgeyBvcGFjaXR5OiAwOyB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLTVweCk7IH0KICAgICAgICB9CiAgICAgICAgLnNhdmUtaW5kaWNhdG9yIHsKICAgICAgICAgICAgYW5pbWF0aW9uOiBmYWRlLWluLW91dCAycyBlYXNlLWluLW91dCBmb3J3YXJkczsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgLyogTGF5b3V0IHNwZWNpZmljIHN0eWxlcyAqLwogICAgICAgIC5sYXlvdXQtY2xhc3NpYyAuaGVhZGVyLWJsb2NrIHsgYm9yZGVyLWJvdHRvbS13aWR0aDogNHB4OyBwYWRkaW5nLWJvdHRvbTogMXJlbTsgbWFyZ2luLWJvdHRvbTogMnJlbTsgfQogICAgICAgIC5sYXlvdXQtbW9kZXJuIC5oZWFkZXItYmxvY2sgeyBib3JkZXItYm90dG9tLXdpZHRoOiAxcHg7IHBhZGRpbmctYm90dG9tOiAxLjVyZW07IG1hcmdpbi1ib3R0b206IDJyZW07IHRleHQtYWxpZ246IGNlbnRlcjsgfQogICAgICAgIC5sYXlvdXQtYmFubmVyIC5oZWFkZXItYmxvY2sgeyBtYXJnaW4tYm90dG9tOiAycmVtOyBib3JkZXItcmFkaXVzOiAwLjc1cmVtOyBvdmVyZmxvdzogaGlkZGVuOyBib3gtc2hhZG93OiAwIDRweCA2cHggLTFweCByZ2JhKDAsIDAsIDAsIDAuMSk7IH0KICAgIDwvc3R5bGU+CjwvaGVhZD4KPGJvZHkgY2xhc3M9ImJnLXNsYXRlLTEwMCB0ZXh0LXNsYXRlLTkwMCBoLXNjcmVlbiBvdmVyZmxvdy1oaWRkZW4gZmxleCBmbGV4LWNvbCI+CgogICAgPCEtLSBJQ09OUyAtLT4KICAgIDxzdmcgc3R5bGU9ImRpc3BsYXk6IG5vbmU7Ij4KICAgICAgICA8c3ltYm9sIGlkPSJpY29uLXNldHRpbmdzIiB2aWV3Qm94PSIwIDAgMjQgMjQiIGZpbGw9Im5vbmUiIHN0cm9rZT0iY3VycmVudENvbG9yIiBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCI+PHBhdGggZD0iTTEyLjIyIDJoLS40NGEyIDIgMCAwIDAtMiAydi4xOGEyIDIgMCAwIDEtMSAxLjczbC0uNDMuMjVhMiAyIDAgMCAxLTIgMGwtLjE1LS4wOGEyIDIgMCAwIDAtMi43My43M2wtLjIyLjM4YTIgMiAwIDAgMCAuNzMgMi43M2wuMTUuMWEyIDIgMCAwIDEgMSAxLjcydi41MWEyIDIgMCAwIDEtMSAxLjc0bC0uMTUuMDlhMiAyIDAgMCAwLS43MyAyLjczbC4yMi4zOGEyIDIgMCAwIDAgMi43My43M2wuMTUtLjA4YTIgMiAwIDAgMSAyIDBsLjQzLjI1YTIgMiAwIDAgMSAxIDEuNzNWMjBhMiAyIDAgMCAwIDIgMmguNDRhMiAyIDAgMCAwIDItMnYtLjE4YTIgMiAwIDAgMSAxLTEuNzNsLjQzLS4yNWEyIDIgMCAwIDEgMiAwbC4xNS4wOGEyIDIgMCAwIDAgMi43My0uNzNsLjIyLS4zOWEyIDIgMCAwIDAtLjczLTIuNzNsLS4xNS0uMDlhMiAyIDAgMCAxLTEtMS43NHYtLjQ3YTIgMiAwIDAgMSAxLTEuNzRsLjE1LS4wOWEyIDIgMCAwIDAgLjczLTIuNzNsLS4yMi0uMzlhMiAyIDAgMCAwLTIuNzMtLjczbC0uMTUuMDhhMiAyIDAgMCAxLTIgMGwtLjQzLS4yNWEyIDIgMCAwIDEtMS0xLjczVjRhMiAyIDAgMCAwLTItMnoiLz48Y2lyY2xlIGN4PSIxMiIgY3k9IjEyIiByPSIzIi8+PC9zeW1ib2w+CiAgICAgICAgPHN5bWJvbCBpZD0iaWNvbi10cmFzaCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiPjxwb2x5bGluZSBwb2ludHM9IjMgNiA1IDYgMjEgNiIvPjxwYXRoIGQ9Ik0xOSA2djE0YTIgMiAwIDAgMS0yIDJIN2EyIDIgMCAwIDEtMi0yVjZtMyAwVjRhMiAyIDAgMCAxIDItMmg0YTIgMiAwIDAgMSAyIDJ2MiIvPjxsaW5lIHgxPSIxMCIgeTE9IjExIiB4Mj0iMTAiIHkyPSIxNyIvPjxsaW5lIHgxPSIxNCIgeTE9IjExIiB4Mj0iMTQiIHkyPSIxNyIvPjwvc3ltYm9sPgogICAgICAgIDxzeW1ib2wgaWQ9Imljb24tZWRpdCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiPjxwYXRoIGQ9Ik0xMSA0SDRhMiAyIDAgMCAwLTIgMnYxNGEyIDIgMCAwIDAgMiAyaDE0YTIgMiAwIDAgMCAyLTJ2LTciLz48cGF0aCBkPSJNMTguNSAyLjVhMi4xMjEgMi4xMjEgMCAwIDEgMyAzTDEyIDE1bC00IDEgMS00IDkuNS05LjV6Ii8+PC9zeW1ib2w+CiAgICAgICAgPHN5bWJvbCBpZD0iaWNvbi1kb3dubG9hZCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiPjxwYXRoIGQ9Ik0yMSAxNXY0YTIgMiAwIDAgMS0yIDJINWEyIDIgMCAwIDEtMi0ydi00Ii8+PHBvbHlsaW5lIHBvaW50cz0iNyAxMCAxMiAxNSAxNyAxMCIvPjxsaW5lIHgxPSIxMiIgeTE9IjE1IiB4Mj0iMTIiIHkyPSIzIi8+PC9zeW1ib2w+CiAgICAgICAgPHN5bWJvbCBpZD0iaWNvbi1hcnJvdy11cCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiPjxsaW5lIHgxPSIxMiIgeTE9IjE5IiB4Mj0iMTIiIHkyPSI1Ij48L2xpbmU+PHBvbHlsaW5lIHBvaW50cz0iNSAxMiAxMiA1IDE5IDEyIj48L3BvbHlsaW5lPjwvc3ltYm9sPgogICAgICAgIDxzeW1ib2wgaWQ9Imljb24tYXJyb3ctZG93biIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiPjxsaW5lIHgxPSIxMiIgeTE9IjUiIHgyPSIxMiIgeTI9IjE5Ij48L2xpbmU+PHBvbHlsaW5lIHBvaW50cz0iMTkgMTIgMTIgMTkgNSAxMiI+PC9wb2x5bGluZT48L3N5bWJvbD4KICAgICAgICA8c3ltYm9sIGlkPSJpY29uLWxpc3QiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJjdXJyZW50Q29sb3IiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIj48bGluZSB4MT0iOCIgeTE9IjYiIHgyPSIyMSIgeTI9IjYiPjwvbGluZT48bGluZSB4MT0iOCIgeTE9IjEyIiB4Mj0iMjEiIHkyPSIxMiI+PC9saW5lPjxsaW5lIHgxPSI4IiB5MT0iMTgiIHgyPSIyMSIgeTI9IjE4Ij48L2xpbmU+PGxpbmUgeDE9IjMiIHkxPSI2IiB4Mj0iMy4wMSIgeTI9IjYiPjwvbGluZT48bGluZSB4MT0iMyIgeTE9IjEyIiB4Mj0iMy4wMSIgeTI9IjEyIj48L2xpbmU+PGxpbmUgeDE9IjMiIHkxPSIxOCIgeDI9IjMuMDEiIHkyPSIxOCI+PC9saW5lPjwvc3ltYm9sPgogICAgICAgIDxzeW1ib2wgaWQ9Imljb24td29yZCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiPjxwYXRoIGQ9Ik0xNCAySDZhMiAyIDAgMCAwLTIgMnYxNmEyIDIgMCAwIDAgMiAyaDEyYTIgMiAwIDAgMCAyLTJWOHoiPjwvcGF0aD48cG9seWxpbmUgcG9pbnRzPSIxNCAyIDE0IDggMjAgOCI+PC9wb2x5bGluZT48bGluZSB4MT0iMTYiIHkxPSIxMyIgeDI9IjgiIHkyPSIxMyI+PC9saW5lPjxsaW5lIHgxPSIxNiIgeTE9IjE3IiB4Mj0iOCIgeTI9IjE3Ij48L2xpbmU+PHBvbHlsaW5lIHBvaW50cz0iMTAgOSA5IDkgOCA5Ij48L3BvbHlsaW5lPjwvc3ltYm9sPgogICAgICAgIDxzeW1ib2wgaWQ9Imljb24tc2VhcmNoIiB2aWV3Qm94PSIwIDAgMjQgMjQiIGZpbGw9Im5vbmUiIHN0cm9rZT0iY3VycmVudENvbG9yIiBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCI+PGNpcmNsZSBjeD0iMTEiIGN5PSIxMSIgcj0iOCI+PC9jaXJjbGU+PGxpbmUgeDE9IjIxIiB5MT0iMjEiIHgyPSIxNi42NSIgeTI9IjE2LjY1Ij48L2xpbmU+PC9zeW1ib2w+CiAgICAgICAgPHN5bWJvbCBpZD0iaWNvbi1jb3B5IiB2aWV3Qm94PSIwIDAgMjQgMjQiIGZpbGw9Im5vbmUiIHN0cm9rZT0iY3VycmVudENvbG9yIiBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCI+PHJlY3QgeD0iOSIgeT0iOSIgd2lkdGg9IjEzIiBoZWlnaHQ9IjEzIiByeD0iMiIgcnk9IjIiPjwvcmVjdD48cGF0aCBkPSJNNSAxNUg0YTIgMiAwIDAgMS0yLTJWNGEyIDIgMCAwIDEgMi0yaDlhMiAyIDAgMCAxIDIgMnYxIj48L3BhdGg+PC9zeW1ib2w+CiAgICA8L3N2Zz4KCiAgICA8IS0tIEhFQURFUiAtLT4KICAgIAoKICAgIDwhLS0gQ09OVEVOVCAtLT4KICAgIDxtYWluIGlkPSJjb250ZW50LWFyZWEiIGNsYXNzPSJmbGV4LTEgb3ZlcmZsb3ctaGlkZGVuIHJlbGF0aXZlIHctZnVsbCBmbGV4IGZsZXgtY29sIj4KICAgICAgICAKICAgICAgICA8ZGl2IGlkPSJ2aWV3LWJ1bGxldGluIiBjbGFzcz0iZmxleC0xIGZsZXggb3ZlcmZsb3ctaGlkZGVuIj4KICAgICAgICAgICAgCiAgICAgICAgICAgIDwhLS0gU2lkZWJhcjogQXJjaGl2ZXMgLS0+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9InctNzIgZmxleCBmbGV4LWNvbCBmbGV4LXNocmluay0wIHotMTAgc2hhZG93LXNtIGhpZGRlbiBtZDpmbGV4IiBzdHlsZT0iYmFja2dyb3VuZDojMmMzZTUwO2NvbG9yOiNlY2YwZjEiPgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0icC00IHNwYWNlLXktMyIgc3R5bGU9ImJvcmRlci1ib3R0b206MXB4IHNvbGlkIHJnYmEoMjU1LDI1NSwyNTUsLjEpIj4KICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIG9uY2xpY2s9ImNyZWF0ZU5ld0J1bGxldGluKCkiIGNsYXNzPSJ3LWZ1bGwgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgZ2FwLTIgdGV4dC13aGl0ZSBweS0zIHJvdW5kZWQteGwgZm9udC1ib2xkIHRyYW5zaXRpb24tYWxsIiBzdHlsZT0iYmFja2dyb3VuZDpyZ2JhKDI1NSwyNTUsMjU1LC4xNSk7Ym9yZGVyOjFweCBkYXNoZWQgcmdiYSgyNTUsMjU1LDI1NSwuNCkiPgogICAgICAgICAgICAgICAgICAgICAgICDinKggTm91dmVhdSBCdWxsZXRpbgogICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgIDwhLS0gU2VhcmNoIEJhciAoVjMpIC0tPgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InJlbGF0aXZlIj4KICAgICAgICAgICAgICAgICAgICAgICAgPHN2ZyBjbGFzcz0iYWJzb2x1dGUgbGVmdC0zIHRvcC0yLjUgdy00IGgtNCIgc3R5bGU9ImNvbG9yOnJnYmEoMjU1LDI1NSwyNTUsLjUpIj48dXNlIGhyZWY9IiNpY29uLXNlYXJjaCI+PC91c2U+PC9zdmc+CiAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiBpZD0ic2VhcmNoLWJ1bGxldGluIiBvbmlucHV0PSJyZW5kZXJCdWxsZXRpbkxpc3QoKSIgcGxhY2Vob2xkZXI9IlJlY2hlcmNoZXIgKE7CsC4uLikiIGNsYXNzPSJ3LWZ1bGwgcGwtOSBwci0zIHB5LTIgcm91bmRlZC1sZyB0ZXh0LXNtIGZvY3VzOm91dGxpbmUtbm9uZSB0cmFuc2l0aW9uLWNvbG9ycyIgc3R5bGU9ImJhY2tncm91bmQ6cmdiYSgyNTUsMjU1LDI1NSwuMTIpO2JvcmRlcjoxcHggc29saWQgcmdiYSgyNTUsMjU1LDI1NSwuMTUpO2NvbG9yOiNmZmYiPgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmbGV4LTEgb3ZlcmZsb3cteS1hdXRvIHAtMyBzcGFjZS15LTIiIGlkPSJidWxsZXRpbi1saXN0Ij4KICAgICAgICAgICAgICAgICAgICA8IS0tIExpc3QgaXRlbXMgZ2VuZXJhdGVkIGJ5IEpTIC0tPgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgICAgPCEtLSBFZGl0b3IgLS0+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZsZXgtMSBmbGV4IGZsZXgtY29sIGJnLXNsYXRlLTUwIG92ZXJmbG93LWhpZGRlbiByZWxhdGl2ZSI+CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmbGV4LTEgb3ZlcmZsb3cteS1hdXRvIHAtNiI+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ibWF4LXctNnhsIG14LWF1dG8gZ3JpZCBncmlkLWNvbHMtMSBtZDpncmlkLWNvbHMtMiBnYXAtNiBoLWZ1bGwiPgogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgPCEtLSBMZWZ0OiBGb3JtIC0tPgogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJzcGFjZS15LTYgb3ZlcmZsb3cteS1hdXRvIHBiLTIwIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iYmctd2hpdGUgcC02IHJvdW5kZWQtMnhsIGJvcmRlciBib3JkZXItc2xhdGUtMjAwIHNoYWRvdy1zbSBob3ZlcjpzaGFkb3ctbWQgdHJhbnNpdGlvbi1zaGFkb3cgcmVsYXRpdmUiIGlkPSJmb3JtLWNvbnRhaW5lciI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGgzIGNsYXNzPSJmb250LWJvbGQgdGV4dC1zbGF0ZS04MDAgbWItNCBmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMyI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGlkPSJmb3JtLXRpdGxlIj5TYWlzaXIgdW5lIGluZm88L3NwYW4+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9oMz4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJzcGFjZS15LTQiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPSJibG9jayB0ZXh0LXhzIGZvbnQtYm9sZCB0ZXh0LXNsYXRlLTQwMCB1cHBlcmNhc2UgdHJhY2tpbmctd2lkZXIgbWItMSI+Q2F0w6lnb3JpZTwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmbGV4IGdhcC0yIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c2VsZWN0IGlkPSJpdGVtLWNhdGVnb3J5IiBjbGFzcz0iZmxleC0xIHB4LTQgcHktMi41IGJvcmRlci0yIGJvcmRlci1zbGF0ZS0xMDAgcm91bmRlZC14bCB0ZXh0LXNtIGZvbnQtbWVkaXVtIGJnLXNsYXRlLTUwIGZvY3VzOmJnLXdoaXRlIGZvY3VzOmJvcmRlci1vcmFuZ2UtNDAwIG91dGxpbmUtbm9uZSB0cmFuc2l0aW9uLWFsbCBjdXJzb3ItcG9pbnRlciI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwhLS0gRHluYW1pYyBDYXRlZ29yaWVzIC0tPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc2VsZWN0PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gb25jbGljaz0ib3BlbkNhdGVnb3J5TWFuYWdlcigpIiBjbGFzcz0icHgtMyBiZy1zbGF0ZS0xMDAgdGV4dC1zbGF0ZS02MDAgcm91bmRlZC14bCBob3ZlcjpiZy1zbGF0ZS0yMDAgdHJhbnNpdGlvbi1jb2xvcnMgZm9udC1ib2xkIiB0aXRsZT0iR8OpcmVyIHRvdXRlcyBsZXMgY2F0w6lnb3JpZXMiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3ZnIGNsYXNzPSJ3LTUgaC01Ij48dXNlIGhyZWY9IiNpY29uLWxpc3QiPjwvdXNlPjwvc3ZnPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gb25jbGljaz0iYWRkQ3VzdG9tQ2F0ZWdvcnkoKSIgY2xhc3M9InB4LTQgYmctc2xhdGUtMTAwIHRleHQtc2xhdGUtNjAwIHJvdW5kZWQteGwgaG92ZXI6Ymctc2xhdGUtMjAwIHRyYW5zaXRpb24tY29sb3JzIGZvbnQtYm9sZCB0ZXh0LWxnIiB0aXRsZT0iQ3LDqWVyIHVuZSBub3V2ZWxsZSBjYXTDqWdvcmllIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZmxleCBnYXAtMyI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0idy0xLzMgZmxleCBmbGV4LWNvbCBnYXAtMSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZmxleCBnYXAtMiB0ZXh0LVsxMHB4XSB1cHBlcmNhc2UgZm9udC1ib2xkIHRleHQtc2xhdGUtNDAwIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPSJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMSBjdXJzb3ItcG9pbnRlciI+PGlucHV0IHR5cGU9InJhZGlvIiBuYW1lPSJkYXRlLXR5cGUiIHZhbHVlPSJmaXhlZCIgY2hlY2tlZCBvbmNoYW5nZT0idG9nZ2xlRGF0ZUlucHV0KCkiPiBGaXhlPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPSJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMSBjdXJzb3ItcG9pbnRlciI+PGlucHV0IHR5cGU9InJhZGlvIiBuYW1lPSJkYXRlLXR5cGUiIHZhbHVlPSJ2YXJpYWJsZSIgb25jaGFuZ2U9InRvZ2dsZURhdGVJbnB1dCgpIj4gTGlicmU8L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJkYXRlIiBpZD0iaXRlbS1kYXRlLWZpeGVkIiBjbGFzcz0idy1mdWxsIHB4LTQgcHktMi41IGJvcmRlci0yIGJvcmRlci15ZWxsb3ctMTAwIGJnLXllbGxvdy01MCByb3VuZGVkLXhsIHRleHQtc20gZm9udC1ib2xkIHRleHQteWVsbG93LTgwMCBmb2N1czpib3JkZXIteWVsbG93LTQwMCBvdXRsaW5lLW5vbmUgdHJhbnNpdGlvbi1jb2xvcnMiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiBpZD0iaXRlbS1kYXRlLXZhcmlhYmxlIiBjbGFzcz0idy1mdWxsIHB4LTQgcHktMi41IGJvcmRlci0yIGJvcmRlci15ZWxsb3ctMTAwIGJnLXllbGxvdy01MCByb3VuZGVkLXhsIHRleHQtc20gZm9udC1ib2xkIHRleHQteWVsbG93LTgwMCBmb2N1czpib3JkZXIteWVsbG93LTQwMCBvdXRsaW5lLW5vbmUgdHJhbnNpdGlvbi1jb2xvcnMgaGlkZGVuIiBwbGFjZWhvbGRlcj0iRXg6IFRvdXRlIGxhIHNlbWFpbmUiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InctMi8zIGZsZXggZmxleC1jb2wganVzdGlmeS1lbmQiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiBpZD0iaXRlbS10aXRsZSIgbGlzdD0idGl0bGUtc3VnZ2VzdGlvbnMiIGNsYXNzPSJ3LWZ1bGwgcHgtNCBweS0yLjUgYm9yZGVyLTIgYm9yZGVyLXNsYXRlLTEwMCByb3VuZGVkLXhsIHRleHQtc20gZm9udC1ib2xkIGZvY3VzOmJvcmRlci1vcmFuZ2UtNDAwIG91dGxpbmUtbm9uZSB0cmFuc2l0aW9uLWNvbG9ycyIgcGxhY2Vob2xkZXI9IlRpdHJlIG91IGNob2lzaXIuLi4iPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkYXRhbGlzdCBpZD0idGl0bGUtc3VnZ2VzdGlvbnMiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJBY2N1ZWlsIMOpbGFyZ2kiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJBZmZlY3RhdGlvbiI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IkFTU1IgMTIiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJBVVRSRSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IkJhc3NpbiI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IkNBIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iQ0VDIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iQ0VTQ0UiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJDaG9peCBkJ29yaWVudGF0aW9uIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iQ2l0w6kgw6lkdWNhdGl2ZSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IkNvbW1pc3Npb24gw6lkdWNhdGl2ZSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IkNvbW1pc3Npb24gcGVybWFuZW50ZSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IkNvbnNlaWwgZGUgZGlzY2lwbGluZSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IkNvbnNlaWwgZCdlbnNlaWduZW1lbnQiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJDb25zZWlsIHDDqWRhZ29naXF1ZSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IkNvbnNlaWxzIGRlIGNsYXNzZSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IkRGIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iREdIIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iRWR1Y0Ryb2l0Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iRWR1Y0ZpIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iw4lxdWlwZSDDqWR1Y2F0aXZlIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iRVNTIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iw4l2YWx1YXRpb24gRVBMRSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IsOJdmFsdWF0aW9ucyBuYXRpb25hbGVzIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iRXZhbGFuZyI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IkV4YW1lbnMiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJFeGFtZW5zIGJsYW5jcyI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IkxpYWlzb25zIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iTkFIIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iTnVtw6lyaXF1ZSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IlBJWCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IlBQTVMiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJQUE8iPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJQcm9qZXQgZCfDqXRhYmxpc3NlbWVudCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IlByb2pldHMiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJSZW50csOpZSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IlJJIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iU0MzQyI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IlNvcnRpZSBzY29sYWlyZSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IlN0YWdlIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iVU5TUyI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IlZTIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2RhdGFsaXN0PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwhLS0gV1lTSVdZRyBFRElUT1IgLS0+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InF1aWxsLXdyYXBwZXIiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBpZD0icXVpbGwtZWRpdG9yIj48L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmbGV4IGdhcC0zIHB0LTIiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBpZD0iYnRuLWFkZC11cGRhdGUiIG9uY2xpY2s9ImFkZEJ1bGxldGluSXRlbSgpIiBjbGFzcz0iZmxleC0xIHB5LTMgYmctb3JhbmdlLTUwMCB0ZXh0LXdoaXRlIGZvbnQtYm9sZCByb3VuZGVkLXhsIGhvdmVyOmJnLW9yYW5nZS02MDAgYWN0aXZlOnNjYWxlLTk1IHRyYW5zaXRpb24tYWxsIHNoYWRvdy1tZCBzaGFkb3ctb3JhbmdlLTIwMCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQWpvdXRlciBsJ2luZm8g8J+agAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGlkPSJidG4tY2FuY2VsLWVkaXQiIG9uY2xpY2s9ImNhbmNlbEVkaXQoKSIgY2xhc3M9ImhpZGRlbiBweC01IHB5LTMgYmctc2xhdGUtMTAwIHRleHQtc2xhdGUtNTAwIGZvbnQtYm9sZCByb3VuZGVkLXhsIGhvdmVyOmJnLXNsYXRlLTIwMCB0cmFuc2l0aW9uLWNvbG9ycyI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQW5udWxlcgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPCEtLSBHcm91cGVkIExpc3QgaW4gRWRpdG9yIC0tPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ic3BhY2UteS02IiBpZD0iZWRpdG9yLWl0ZW1zLWxpc3QiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwhLS0gRHluYW1pYyBMaXN0IC0tPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgICAgICAgICAgICAgICAgPCEtLSBSaWdodDogUHJldmlldyAtLT4KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZmxleCBvdmVyZmxvdy1oaWRkZW4gYmctc2xhdGUtMjAwIHJvdW5kZWQtMnhsIGJvcmRlci00IGJvcmRlci1zbGF0ZS0zMDAgc2hhZG93LWlubmVyIHAtNCBpdGVtcy1zdGFydCBqdXN0aWZ5LWNlbnRlciI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJvcmlnaW4tdG9wIHRyYW5zZm9ybS1ncHUgc2hhZG93LTJ4bCIgaWQ9InByZXZpZXctd3JhcHBlciIgc3R5bGU9InRyYW5zZm9ybTpzY2FsZSgwLjU1KSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBpZD0icGRmLWNvbnRlbnQiIGNsYXNzPSJhNC1wYWdlIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPCEtLSBSZW5kZXJlZCBDb250ZW50IC0tPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICA8L2Rpdj4KCiAgICAgICAgPCEtLSBIRUxQIC0tPgogICAgICAgIDxkaXYgaWQ9InZpZXctaGVscCIgY2xhc3M9ImhpZGRlbiBmbGV4LTEgb3ZlcmZsb3cteS1hdXRvIHAtOCBiZy1zbGF0ZS01MCI+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9Im1heC13LTR4bCBteC1hdXRvIHByb3NlIGJnLXdoaXRlIHAtMTAgcm91bmRlZC0zeGwgc2hhZG93LXhsIGJvcmRlciBib3JkZXItc2xhdGUtMTAwIj4KICAgICAgICAgICAgICAgIDxoMiBjbGFzcz0idGV4dC0zeGwgZm9udC1ibGFjayB0ZXh0LXNsYXRlLTgwMCBtYi02IGZsZXggaXRlbXMtY2VudGVyIGdhcC0zIj4KICAgICAgICAgICAgICAgICAgICDwn5OaIE1vZGUgZCdlbXBsb2kgJiBFbmpldXgKICAgICAgICAgICAgICAgIDwvaDI+CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIDwhLS0gU2VjdGlvbiBFbmpldSAtLT4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9Im1iLTEwIj4KICAgICAgICAgICAgICAgICAgICA8aDMgY2xhc3M9InRleHQteGwgZm9udC1ib2xkIHRleHQtYmx1ZS04MDAgbWItNCBmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMiI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJ0ZXh0LTJ4bCI+8J+Orzwvc3Bhbj4gTCdFbmpldSBkZSBQRVJESVJGT1JNQU5DRSBCaSBCYXNlCiAgICAgICAgICAgICAgICAgICAgPC9oMz4KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJiZy1ibHVlLTUwIGJvcmRlci1sLTQgYm9yZGVyLWJsdWUtNTAwIHAtNSByb3VuZGVkLXIteGwgdGV4dC1zbGF0ZS03MDAgc3BhY2UteS0zIHRleHQtc20gbGVhZGluZy1yZWxheGVkIj4KICAgICAgICAgICAgICAgICAgICAgICAgPHA+PHN0cm9uZz5Db21tdW5pcXVlciBlZmZpY2FjZW1lbnQgOjwvc3Ryb25nPiBEYW5zIHVuIMOpdGFibGlzc2VtZW50IHNjb2xhaXJlLCBsJ2luZm9ybWF0aW9uIGVzdCBkZW5zZSBldCBtdWx0aXNvdXJjZS4gQ2UgYnVsbGV0aW4gcGVybWV0IGRlIGNlbnRyYWxpc2VyIGxlcyBpbmZvcm1hdGlvbnMgZXNzZW50aWVsbGVzIGRlIGxhIHNlbWFpbmUgZW4gdW4gZG9jdW1lbnQgdW5pcXVlLCBjbGFpciBldCBzdHJ1Y3R1csOpLjwvcD4KICAgICAgICAgICAgICAgICAgICAgICAgPHA+PHN0cm9uZz5Qcm9mZXNzaW9ubmFsaXNlciBsJ2ltYWdlIDo8L3N0cm9uZz4gVW4gZG9jdW1lbnQgc3RhbmRhcmRpc8OpLCBhdXggY291bGV1cnMgZGUgbCfDqXRhYmxpc3NlbWVudCAobG9nbywgc2lnbmF0dXJlKSwgcmVuZm9yY2UgbCdpZGVudGl0w6kgdmlzdWVsbGUgZXQgbGEgY3LDqWRpYmlsaXTDqSBkZSBsYSBkaXJlY3Rpb24uPC9wPgogICAgICAgICAgICAgICAgICAgICAgICA8cD48c3Ryb25nPkdhZ25lciBkdSB0ZW1wcyA6PC9zdHJvbmc+IEZpbmkgbGEgbWlzZSBlbiBwYWdlIGZhc3RpZGlldXNlIHN1ciB0cmFpdGVtZW50IGRlIHRleHRlLiBTYWlzaXNzZXosIGNhdMOpZ29yaXNleiwgZXQgbGUgUERGIHNlIGfDqW7DqHJlIGF1dG9tYXRpcXVlbWVudC48L3A+CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICA8L2Rpdj4KCiAgICAgICAgICAgICAgICA8IS0tIFNlY3Rpb24gTW9kZSBkJ2VtcGxvaSAtLT4KICAgICAgICAgICAgICAgIDxkaXY+CiAgICAgICAgICAgICAgICAgICAgPGgzIGNsYXNzPSJ0ZXh0LXhsIGZvbnQtYm9sZCB0ZXh0LW9yYW5nZS03MDAgbWItNiBmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMiI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJ0ZXh0LTJ4bCI+8J+agDwvc3Bhbj4gR3VpZGUgZGUgZMOpbWFycmFnZSByYXBpZGUKICAgICAgICAgICAgICAgICAgICA8L2gzPgogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImdyaWQgZ3JpZC1jb2xzLTEgbWQ6Z3JpZC1jb2xzLTIgZ2FwLTYiPgogICAgICAgICAgICAgICAgICAgICAgICA8IS0tIMOJdGFwZSAxIC0tPgogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJiZy1zbGF0ZS01MCBwLTUgcm91bmRlZC0yeGwgYm9yZGVyIGJvcmRlci1zbGF0ZS0xMDAgc2hhZG93LXNtIGhvdmVyOnNoYWRvdy1tZCB0cmFuc2l0aW9uLXNoYWRvdyI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb250LWJsYWNrIHRleHQtc2xhdGUtODAwIHRleHQtbGcgbWItMiI+MS4gSWRlbnRpdMOpIPCfj6I8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzPSJ0ZXh0LXNtIHRleHQtc2xhdGUtNjAwIj5DbGlxdWV6IHN1ciA8c3BhbiBjbGFzcz0iZm9udC1ib2xkIj5QYXJhbcOodHJlcyAo4pqZ77iPKTwvc3Bhbj4gZW4gaGF1dCDDoCBkcm9pdGUgcG91ciBlbnRyZXIgbGUgbm9tIGRlIHZvdHJlIMOpdGFibGlzc2VtZW50IGV0IGFqb3V0ZXIgdm90cmUgbG9nby48L3A+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgICAgICAgICAgICAgICAgPCEtLSDDiXRhcGUgMiAtLT4KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iYmctc2xhdGUtNTAgcC01IHJvdW5kZWQtMnhsIGJvcmRlciBib3JkZXItc2xhdGUtMTAwIHNoYWRvdy1zbSBob3ZlcjpzaGFkb3ctbWQgdHJhbnNpdGlvbi1zaGFkb3ciPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9udC1ibGFjayB0ZXh0LXNsYXRlLTgwMCB0ZXh0LWxnIG1iLTIiPjIuIFBhcmFtw6l0cmV6IPCfk4U8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzPSJ0ZXh0LXNtIHRleHQtc2xhdGUtNjAwIj5Ew6lmaW5pc3NleiBsZSBudW3DqXJvIGR1IGJ1bGxldGluLCBsYSBww6lyaW9kZSAoc2VtYWluZSkgZXQgY2hvaXNpc3NleiBsZSBzaWduYXRhaXJlIG9mZmljaWVsIGRhbnMgbGUgYmxvYyAiUGFyYW3DqHRyZXMiLjwvcD4KICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CgogICAgICAgICAgICAgICAgICAgICAgICA8IS0tIMOJdGFwZSAzIC0tPgogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJiZy1zbGF0ZS01MCBwLTUgcm91bmRlZC0yeGwgYm9yZGVyIGJvcmRlci1zbGF0ZS0xMDAgc2hhZG93LXNtIGhvdmVyOnNoYWRvdy1tZCB0cmFuc2l0aW9uLXNoYWRvdyI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb250LWJsYWNrIHRleHQtc2xhdGUtODAwIHRleHQtbGcgbWItMiI+My4gU2Fpc2lzc2V6IOKcje+4jzwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3M9InRleHQtc20gdGV4dC1zbGF0ZS02MDAiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlbXBsaXNzZXogbGUgZm9ybXVsYWlyZS4gVXRpbGlzZXogbGVzIG91dGlscyBkZSBsJ8OpZGl0ZXVyIChHcmFzLCBMaXN0ZXMpIHBvdXIgbWV0dHJlIGVuIGZvcm1lIHZvdHJlIHRleHRlLgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9wPgogICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KCiAgICAgICAgICAgICAgICAgICAgICAgIDwhLS0gw4l0YXBlIDQgLS0+CiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImJnLXNsYXRlLTUwIHAtNSByb3VuZGVkLTJ4bCBib3JkZXIgYm9yZGVyLXNsYXRlLTEwMCBzaGFkb3ctc20gaG92ZXI6c2hhZG93LW1kIHRyYW5zaXRpb24tc2hhZG93Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvbnQtYmxhY2sgdGV4dC1zbGF0ZS04MDAgdGV4dC1sZyBtYi0yIj40LiBPcmdhbmlzZXog4oaV77iPPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzcz0idGV4dC1zbSB0ZXh0LXNsYXRlLTYwMCI+VXRpbGlzZXogbGVzIGZsw6hjaGVzIHN1ciBsZXMgdGl0cmVzIGRlIGNhdMOpZ29yaWVzIHBvdXIgY2hhbmdlciBsJ29yZHJlIGQnYXBwYXJpdGlvbiBkYW5zIGxlIFBERi48L3A+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgPC9kaXY+CgogICAgICAgICAgICAgICAgPCEtLSBTZWN0aW9uIE5vdXZlYXV0w6kgVjMuMCAtLT4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9Im10LTEwIHB0LTggYm9yZGVyLXQgYm9yZGVyLXNsYXRlLTEwMCI+CiAgICAgICAgICAgICAgICAgICAgPGgzIGNsYXNzPSJ0ZXh0LXhsIGZvbnQtYm9sZCB0ZXh0LWluZGlnby03MDAgbWItNCBmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMiI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJ0ZXh0LTJ4bCI+4pyoPC9zcGFuPiBOb3V2ZWF1dMOpcyBWMy4wIDogUHJvZHVjdGl2aXTDqSBNYXhpbWFsZQogICAgICAgICAgICAgICAgICAgIDwvaDM+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iYmctaW5kaWdvLTUwIGJvcmRlci1sLTQgYm9yZGVyLWluZGlnby01MDAgcC01IHJvdW5kZWQtci14bCB0ZXh0LXNsYXRlLTcwMCBzcGFjZS15LTQgdGV4dC1zbSBsZWFkaW5nLXJlbGF4ZWQiPgogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoNCBjbGFzcz0iZm9udC1ib2xkIHRleHQtaW5kaWdvLTkwMCBmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMiI+4pqhIER1cGxpY2F0aW9uIGRlIEJ1bGxldGluPC9oND4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cD5Wb3VzIHNvdWhhaXRleiByZXByZW5kcmUgbGEgYmFzZSBkZSBsYSBzZW1haW5lIGRlcm5pw6hyZSA/IERhbnMgbGEgbGlzdGUgZGUgZ2F1Y2hlLCBjbGlxdWV6IHN1ciBsZSBib3V0b24gIkNvcGllciIgKGRvdWJsZSBjYXJyw6kpLiBVbiBub3V2ZWF1IGJ1bGxldGluIHNlcmEgY3LDqcOpIGF2ZWMgdG91dCBsZSBjb250ZW51LCBldCBsZSBudW3DqXJvIHNlcmEgYXV0b21hdGlxdWVtZW50IGluY3LDqW1lbnTDqSAhPC9wPgogICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDQgY2xhc3M9ImZvbnQtYm9sZCB0ZXh0LWluZGlnby05MDAgZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTIiPvCflI0gUmVjaGVyY2hlIEluc3RhbnRhbsOpZTwvaDQ+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHA+UmV0cm91dmV6IGZhY2lsZW1lbnQgdW4gYW5jaWVuIG51bcOpcm8gZ3LDomNlIMOgIGxhIG5vdXZlbGxlIGJhcnJlIGRlIHJlY2hlcmNoZSBzaXR1w6llIGVuIGhhdXQgZGUgbGEgbGlzdGUgZGVzIGJ1bGxldGlucy48L3A+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoNCBjbGFzcz0iZm9udC1ib2xkIHRleHQtaW5kaWdvLTkwMCBmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMiI+8J+ThCBFeHBvcnQgV29yZCAoLmRvY3gpPC9oND4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cD5JbnRyb2R1aXQgZW4gVjIuNywgbCdleHBvcnQgV29yZCBwZXJtZXQgZGUgcmV0b3VjaGVyIGxlIGRvY3VtZW50IGZpbmFsIHNpIG7DqWNlc3NhaXJlIGF2YW50IGwnZW52b2kuPC9wPgogICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICA8L2Rpdj4KCiAgICA8L21haW4+CgogICAgPCEtLSBGT09URVIgLS0+CiAgICA8Zm9vdGVyIGNsYXNzPSJiZy13aGl0ZSBib3JkZXItdCBib3JkZXItc2xhdGUtMjAwIHB5LTIgdGV4dC1jZW50ZXIgdGV4dC1bMTBweF0gdGV4dC1zbGF0ZS00MDAgZmxleC1zaHJpbmstMCB6LTIwIj4KICAgICAgICBPdXRpbCBwcm9wb3PDqSBwYXIgWWFubmlzIENIUklTVE9OIHwgVXRpbGlzYXRpb24gbG9jYWxlLCBSR1BELgogICAgPC9mb290ZXI+CgogICAgPCEtLSBTRVRUSU5HUyBNT0RBTCAtLT4KICAgIAogICAgCiAgICA8IS0tIENBVEVHT1JZIE1BTkFHRVIgTU9EQUwgLS0+CiAgICA8ZGl2IGlkPSJtb2RhbC1jYXRlZ29yaWVzIiBjbGFzcz0iZml4ZWQgaW5zZXQtMCB6LTUwIGhpZGRlbiBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciI+CiAgICAgICAgPGRpdiBjbGFzcz0iYWJzb2x1dGUgaW5zZXQtMCBiZy1zbGF0ZS05MDAvNTAgYmFja2Ryb3AtYmx1ci1zbSIgb25jbGljaz0iY2xvc2VDYXRlZ29yeU1hbmFnZXIoKSI+PC9kaXY+CiAgICAgICAgPGRpdiBjbGFzcz0iYmctd2hpdGUgcm91bmRlZC0yeGwgc2hhZG93LTJ4bCB3LWZ1bGwgbWF4LXctbWQgbXgtNCByZWxhdGl2ZSB6LTEwIHAtMCB0cmFuc2Zvcm0gdHJhbnNpdGlvbi1hbGwgc2NhbGUtMTAwIG92ZXJmbG93LWhpZGRlbiBmbGV4IGZsZXgtY29sIG1heC1oLXNjcmVlbiI+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9InAtNiBib3JkZXItYiBib3JkZXItc2xhdGUtMTAwIGJnLXNsYXRlLTUwIj4KICAgICAgICAgICAgICAgIDxoMyBjbGFzcz0idGV4dC14bCBmb250LWJsYWNrIHRleHQtc2xhdGUtODAwIGZsZXggaXRlbXMtY2VudGVyIGdhcC0yIj4KICAgICAgICAgICAgICAgICAgICDwn5OLIE9yZHJlIGRlcyBjYXTDqWdvcmllcwogICAgICAgICAgICAgICAgPC9oMz4KICAgICAgICAgICAgICAgIDxwIGNsYXNzPSJ0ZXh0LXNtIHRleHQtc2xhdGUtNTAwIG10LTEiPk1vZGlmaWV6IGwnb3JkcmUgZCdhZmZpY2hhZ2UgZGFucyBsZSBQREYuPC9wPgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgCiAgICAgICAgICAgIDxkaXYgY2xhc3M9Im92ZXJmbG93LXktYXV0byBwLTQgc3BhY2UteS0yIGZsZXgtMSIgaWQ9ImNhdGVnb3J5LW1hbmFnZXItbGlzdCI+CiAgICAgICAgICAgICAgICA8IS0tIExpc3Qgd2lsbCBiZSBoZXJlIC0tPgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgCiAgICAgICAgICAgIDxkaXYgY2xhc3M9InAtNCBib3JkZXItdCBib3JkZXItc2xhdGUtMTAwIGJnLXNsYXRlLTUwIGZsZXgganVzdGlmeS1lbmQiPgogICAgICAgICAgICAgICAgPGJ1dHRvbiBvbmNsaWNrPSJjbG9zZUNhdGVnb3J5TWFuYWdlcigpIiBjbGFzcz0icHgtNiBweS0yIGJnLWJsdWUtNjAwIHRleHQtd2hpdGUgcm91bmRlZC14bCBmb250LWJvbGQgaG92ZXI6YmctYmx1ZS03MDAgdHJhbnNpdGlvbi1jb2xvcnMiPkZlcm1lcjwvYnV0dG9uPgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICA8L2Rpdj4KICAgIDwvZGl2PgoKICAgIDwhLS0gSkFWQVNDUklQVCAtLT4KICAgIDxzY3JpcHQ+CiAgICAgICAgLy8gLS0tIERBVEEgU1RBVEUgLS0tCiAgICAgICAgLy8gRW5oYW5jZWQgRXN0YWJsaXNobWVudCBPYmplY3Qgd2l0aCBMYXlvdXQsIEZvbnQgYW5kIEN1c3RvbSBUZXh0cwogICAgICAgIGxldCBlc3RhYmxpc2htZW50ID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnYmliYXNlX2VzdGFibGlzaG1lbnQnKSkgfHwgewogICAgICAgICAgICBuYW1lOiAiIiwKICAgICAgICAgICAgYWRkcmVzczogIiIsCiAgICAgICAgICAgIGxvZ286ICIiLAogICAgICAgICAgICBsYXlvdXQ6ICJjbGFzc2ljIiwgLy8gY2xhc3NpYywgbW9kZXJuLCBiYW5uZXIKICAgICAgICAgICAgZm9udDogImludGVyIiwgLy8gaW50ZXIsIHNlcmlmLCBtb25vCiAgICAgICAgICAgIGRlZmF1bHRTaWduYXRvcnk6ICJMJ8OpcXVpcGUgZGUgZGlyZWN0aW9uIiwKICAgICAgICAgICAgZG9jVGl0bGU6ICJCdWxsZXRpbiBkJ2luZm9ybWF0aW9uIiwKICAgICAgICAgICAgZG9jRm9vdGVyOiAiIiAvLyBDdXN0b20gZm9vdGVyIHRleHQKICAgICAgICB9OwoKICAgICAgICBsZXQgYnVsbGV0aW5zID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnYmliYXNlX2J1bGxldGlucycpKSB8fCBbXTsKICAgICAgICAKICAgICAgICAvLyBEZWZhdWx0IENhdGVnb3JpZXMKICAgICAgICBjb25zdCBERUZBVUxUX0NBVEVHT1JJRVMgPSBbCiAgICAgICAgICAgICLwn5OFIEFHRU5EQSIsIAogICAgICAgICAgICAi8J+PqyBWSUUgREUgTCfDiVRBQkxJU1NFTUVOVCIsIAogICAgICAgICAgICAi8J+knSBBTUlDQUxFIiwgCiAgICAgICAgICAgICLwn5GlIFBFUlNPTk5FTCIsIAogICAgICAgICAgICAi8J+TmiBQw4lEQUdPR0lFIiwgCiAgICAgICAgICAgICLwn46SIFZJRSBTQ09MQUlSRSIsIAogICAgICAgICAgICAi8J+nrSBPUklFTlRBVElPTiIsIAogICAgICAgICAgICAi4pm/IEVCRVAiLAogICAgICAgICAgICAi8J+OqCDDiURVQ0FUSUYiLAogICAgICAgICAgICAi8J+SuyBOVU3DiVJJUVVFIiwKICAgICAgICAgICAgIvCfkrwgSU5URU5EQU5DRSIsIAogICAgICAgICAgICAi8J+PpSBTQU5Uw4kgLyBTT0NJQUwiLCAKICAgICAgICAgICAgIvCfjpMgRVhBTUVOUyIsIAogICAgICAgICAgICAi8J+TnCBCVUxMRVRJTiBPRkZJQ0lFTCIsIAogICAgICAgICAgICAi4pqW77iPIEJPIiwKICAgICAgICAgICAgIvCfkqEgQVVUUkUiCiAgICAgICAgXTsKICAgICAgICAKICAgICAgICAvLyBNYXN0ZXIgY2F0ZWdvcnkgbGlzdAogICAgICAgIGxldCBtYXN0ZXJDYXRlZ29yaWVzID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnYmliYXNlX2NhdGVnb3JpZXNfbWFzdGVyJykpOwoKICAgICAgICBpZiAoIW1hc3RlckNhdGVnb3JpZXMpIHsKICAgICAgICAgICAgY29uc3Qgb2xkQ3VzdG9tID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnYmliYXNlX2NhdGVnb3JpZXMnKSkgfHwgW107CiAgICAgICAgICAgIG1hc3RlckNhdGVnb3JpZXMgPSBbLi4uREVGQVVMVF9DQVRFR09SSUVTLCAuLi5vbGRDdXN0b21dOwogICAgICAgICAgICBtYXN0ZXJDYXRlZ29yaWVzID0gWy4uLm5ldyBTZXQobWFzdGVyQ2F0ZWdvcmllcyldOwogICAgICAgIH0KCiAgICAgICAgbGV0IGN1cnJlbnRCdWxsZXRpbklkID0gbnVsbDsKICAgICAgICBsZXQgY3VycmVudEl0ZW1zID0gW107CiAgICAgICAgbGV0IGF1dG9TYXZlVGltZXIgPSBudWxsOwogICAgICAgIGxldCBlZGl0aW5nSXRlbUlkID0gbnVsbDsKICAgICAgICBsZXQgcXVpbGwgPSBudWxsOwogICAgICAgIGxldCBfYmlJbml0RG9uZSA9IGZhbHNlOwoKICAgICAgICAvLyAtLS0gSU5JVCAtLS0KICAgICAgICBmdW5jdGlvbiBpbml0QXBwKCkgewogICAgICAgICAgICBpZiAoX2JpSW5pdERvbmUpIHJldHVybjsKICAgICAgICAgICAgY29uc29sZS5sb2coJ1tCaUJhc2VdIGluaXQgYXR0ZW1wdCwgcmVhZHlTdGF0ZT0nICsgZG9jdW1lbnQucmVhZHlTdGF0ZSk7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBpZiAoIWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdxdWlsbC1lZGl0b3InKSkgeyBjb25zb2xlLndhcm4oJ1tCaUJhc2VdIERPTSBub3QgcmVhZHknKTsgc2V0VGltZW91dChpbml0QXBwLCAzMDApOyByZXR1cm47IH0KICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgUXVpbGwgPT09ICd1bmRlZmluZWQnKSB7CiAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCdbQmlCYXNlXSBRdWlsbCBDRE4gbm90IGxvYWRlZCwgcmV0cnkuLi4nKTsKICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGluaXRBcHAsIDUwMCk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKCFxdWlsbCkgewogICAgICAgICAgICAgICAgICAgIHF1aWxsID0gbmV3IFF1aWxsKCcjcXVpbGwtZWRpdG9yJywgewogICAgICAgICAgICAgICAgICAgICAgICB0aGVtZTogJ3Nub3cnLAogICAgICAgICAgICAgICAgICAgICAgICBtb2R1bGVzOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b29sYmFyOiBbCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgWydib2xkJywgJ2l0YWxpYycsICd1bmRlcmxpbmUnXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbeyAnY29sb3InOiBbXSB9LCB7ICdiYWNrZ3JvdW5kJzogW10gfV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgW3sgJ3NpemUnOiBbJ3NtYWxsJywgZmFsc2UsICdsYXJnZScsICdodWdlJ10gfV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgW3sgJ2xpc3QnOiAnb3JkZXJlZCd9LCB7ICdsaXN0JzogJ2J1bGxldCcgfV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgWydjbGVhbiddCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBdCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyOiAnU2Fpc2lzc2V6IGxlIGNvbnRlbnUgaWNpLi4uJwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgdHJ5IHsgcmVuZGVyQnVsbGV0aW5MaXN0KCk7IH0gY2F0Y2goZSkgeyBjb25zb2xlLndhcm4oJ1tCaUJhc2VdIHJlbmRlckJ1bGxldGluTGlzdCBlcnI6JywgZSk7IH0KICAgICAgICAgICAgICAgIHRyeSB7IHJlbmRlckNhdGVnb3J5T3B0aW9ucygpOyB9IGNhdGNoKGUpIHsgY29uc29sZS53YXJuKCdbQmlCYXNlXSByZW5kZXJDYXRlZ29yeU9wdGlvbnMgZXJyOicsIGUpOyB9CiAgICAgICAgICAgICAgICBpZihidWxsZXRpbnMubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgICAgICAgIHRyeSB7IGxvYWRCdWxsZXRpbihidWxsZXRpbnMuc29ydCgoYSxiKSA9PiBiLmlkIC0gYS5pZClbMF0uaWQpOyB9IGNhdGNoKGUpIHsgY29uc29sZS53YXJuKCdbQmlCYXNlXSBsb2FkQnVsbGV0aW4gZXJyOicsIGUpOyB9CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIHRyeSB7IGNyZWF0ZU5ld0J1bGxldGluKCk7IH0gY2F0Y2goZSkgeyBjb25zb2xlLndhcm4oJ1tCaUJhc2VdIGNyZWF0ZU5ld0J1bGxldGluIGVycjonLCBlKTsgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgdHJ5IHsgdXBkYXRlUHJldmlldygpOyB9IGNhdGNoKHBlKSB7IGNvbnNvbGUud2FybignW0JpQmFzZV0gdXBkYXRlUHJldmlldyBlcnI6JywgcGUpOyB9CiAgICAgICAgICAgICAgICBfYmlJbml0RG9uZSA9IHRydWU7CiAgICAgICAgICAgIH0gY2F0Y2goZXJyKSB7CiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdCaUJhc2UgaW5pdCBlcnJvcjonLCBlcnIpOwogICAgICAgICAgICAgICAgaWYgKCFfYmlJbml0RG9uZSkgc2V0VGltZW91dChpbml0QXBwLCAxMDAwKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgZnVuY3Rpb24oKSB7IHNldFRpbWVvdXQoaW5pdEFwcCwgMjAwKTsgfSk7CgogICAgICAgIC8vIC0tLSBOQVZJR0FUSU9OIC0tLQogICAgICAgIGZ1bmN0aW9uIHN3aXRjaFRhYih0YWIpIHsKICAgICAgICAgICAgWydidWxsZXRpbicsICdoZWxwJ10uZm9yRWFjaCh0ID0+IHsKICAgICAgICAgICAgICAgIGNvbnN0IGJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGBuYXYtJHt0fWApOwogICAgICAgICAgICAgICAgY29uc3QgdmlldyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGB2aWV3LSR7dH1gKTsKICAgICAgICAgICAgICAgIGlmICghYnRuIHx8ICF2aWV3KSByZXR1cm47CgogICAgICAgICAgICAgICAgaWYodCA9PT0gdGFiKSB7CiAgICAgICAgICAgICAgICAgICAgYnRuLmNsYXNzTGlzdC5yZW1vdmUoJ3RleHQtc2xhdGUtNTAwJywgJ2hvdmVyOnRleHQtc2xhdGUtNzAwJywgJ2hvdmVyOmJnLXNsYXRlLTUwJywgJ2JvcmRlci10cmFuc3BhcmVudCcpOwogICAgICAgICAgICAgICAgICAgIGJ0bi5jbGFzc0xpc3QuYWRkKCdiZy1ibHVlLTUwJywgJ3RleHQtYmx1ZS03MDAnLCAnYm9yZGVyLWJsdWUtMTAwJywgJ3NoYWRvdy1zbScpOwogICAgICAgICAgICAgICAgICAgIHZpZXcuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7CiAgICAgICAgICAgICAgICAgICAgaWYodCA9PT0gJ2J1bGxldGluJykgdmlldy5jbGFzc0xpc3QuYWRkKCdmbGV4Jyk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIGJ0bi5jbGFzc0xpc3QuYWRkKCd0ZXh0LXNsYXRlLTUwMCcsICdob3Zlcjp0ZXh0LXNsYXRlLTcwMCcsICdob3ZlcjpiZy1zbGF0ZS01MCcsICdib3JkZXItdHJhbnNwYXJlbnQnKTsKICAgICAgICAgICAgICAgICAgICBidG4uY2xhc3NMaXN0LnJlbW92ZSgnYmctYmx1ZS01MCcsICd0ZXh0LWJsdWUtNzAwJywgJ2JvcmRlci1ibHVlLTEwMCcsICdzaGFkb3ctc20nKTsKICAgICAgICAgICAgICAgICAgICB2aWV3LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpOwogICAgICAgICAgICAgICAgICAgIHZpZXcuY2xhc3NMaXN0LnJlbW92ZSgnZmxleCcpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgZnVuY3Rpb24gdG9nZ2xlU2lkZWJhck1vYmlsZSgpIHsKICAgICAgICAgICAgY29uc3Qgc2lkZWJhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN2aWV3LWJ1bGxldGluID4gZGl2OmZpcnN0LWNoaWxkJyk7CiAgICAgICAgICAgIHNpZGViYXIuY2xhc3NMaXN0LnRvZ2dsZSgnaGlkZGVuJyk7CiAgICAgICAgICAgIHNpZGViYXIuY2xhc3NMaXN0LnRvZ2dsZSgnYWJzb2x1dGUnKTsKICAgICAgICAgICAgc2lkZWJhci5jbGFzc0xpc3QudG9nZ2xlKCdoLWZ1bGwnKTsKICAgICAgICB9CgogICAgICAgIC8vIC0tLSBDQVRFR09SWSBMT0dJQyAtLS0KICAgICAgICBmdW5jdGlvbiByZW5kZXJDYXRlZ29yeU9wdGlvbnMoKSB7CiAgICAgICAgICAgIGNvbnN0IHNlbGVjdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpdGVtLWNhdGVnb3J5Jyk7CiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRWYWwgPSBzZWxlY3QudmFsdWU7CiAgICAgICAgICAgIHNlbGVjdC5pbm5lckhUTUwgPSBtYXN0ZXJDYXRlZ29yaWVzLm1hcChjYXQgPT4gYDxvcHRpb24gdmFsdWU9IiR7Y2F0fSI+JHtjYXR9PC9vcHRpb24+YCkuam9pbignJyk7CiAgICAgICAgICAgIGlmKG1hc3RlckNhdGVnb3JpZXMuaW5jbHVkZXMoY3VycmVudFZhbCkpIHsgc2VsZWN0LnZhbHVlID0gY3VycmVudFZhbDsgfQogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gYWRkQ3VzdG9tQ2F0ZWdvcnkoKSB7CiAgICAgICAgICAgIGNvbnN0IG5ld0NhdCA9IHByb21wdCgiTm9tIGRlIGxhIG5vdXZlbGxlIGNhdMOpZ29yaWUgKGF2ZWMgw6ltb2ppIHNpIHZvdXMgdm91bGV6ICEpIDoiKTsKICAgICAgICAgICAgaWYobmV3Q2F0ICYmIG5ld0NhdC50cmltKCkgIT09ICIiKSB7CiAgICAgICAgICAgICAgICBjb25zdCB1cHBlckNhdCA9IG5ld0NhdC50cmltKCkudG9VcHBlckNhc2UoKTsKICAgICAgICAgICAgICAgIGlmKCFtYXN0ZXJDYXRlZ29yaWVzLmluY2x1ZGVzKHVwcGVyQ2F0KSkgewogICAgICAgICAgICAgICAgICAgIG1hc3RlckNhdGVnb3JpZXMucHVzaCh1cHBlckNhdCk7CiAgICAgICAgICAgICAgICAgICAgc2F2ZUNhdGVnb3JpZXMoKTsKICAgICAgICAgICAgICAgICAgICByZW5kZXJDYXRlZ29yeU9wdGlvbnMoKTsKICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaXRlbS1jYXRlZ29yeScpLnZhbHVlID0gdXBwZXJDYXQ7CiAgICAgICAgICAgICAgICB9IGVsc2UgeyBhbGVydCgiQ2V0dGUgY2F0w6lnb3JpZSBleGlzdGUgZMOpasOgLiIpOyB9CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgCiAgICAgICAgZnVuY3Rpb24gc2F2ZUNhdGVnb3JpZXMoKSB7CiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdiaWJhc2VfY2F0ZWdvcmllc19tYXN0ZXInLCBKU09OLnN0cmluZ2lmeShtYXN0ZXJDYXRlZ29yaWVzKSk7CiAgICAgICAgfQoKICAgICAgICAvLyAtLS0gQ0FURUdPUlkgTUFOQUdFUiBVSSAtLS0KICAgICAgICBmdW5jdGlvbiBvcGVuQ2F0ZWdvcnlNYW5hZ2VyKCkgewogICAgICAgICAgICBjb25zdCBsaXN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NhdGVnb3J5LW1hbmFnZXItbGlzdCcpOwogICAgICAgICAgICBsaXN0LmlubmVySFRNTCA9ICcnOwogICAgICAgICAgICAKICAgICAgICAgICAgbWFzdGVyQ2F0ZWdvcmllcy5mb3JFYWNoKChjYXQsIGluZGV4KSA9PiB7CiAgICAgICAgICAgICAgICBjb25zdCBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgICAgICAgICAgICAgIGRpdi5jbGFzc05hbWUgPSAiZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1iZXR3ZWVuIHAtMyBiZy13aGl0ZSBib3JkZXIgYm9yZGVyLXNsYXRlLTIwMCByb3VuZGVkLXhsIGhvdmVyOmJvcmRlci1ibHVlLTMwMCB0cmFuc2l0aW9uLWNvbG9ycyBncm91cCI7CiAgICAgICAgICAgICAgICBkaXYuaW5uZXJIVE1MID0gYAogICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJmb250LWJvbGQgdGV4dC1zbGF0ZS03MDAgdGV4dC1zbSI+JHtjYXR9PC9zcGFuPgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZsZXggaXRlbXMtY2VudGVyIGdhcC0xIG9wYWNpdHktNTAgZ3JvdXAtaG92ZXI6b3BhY2l0eS0xMDAgdHJhbnNpdGlvbi1vcGFjaXR5Ij4KICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBvbmNsaWNrPSJtb3ZlQ2F0ZWdvcnkoJHtpbmRleH0sIC0xKSIgY2xhc3M9InAtMS41IGhvdmVyOmJnLXNsYXRlLTEwMCByb3VuZGVkLWxnIHRleHQtc2xhdGUtNTAwIGhvdmVyOnRleHQtYmx1ZS02MDAgZGlzYWJsZWQ6b3BhY2l0eS0zMCIgJHtpbmRleCA9PT0gMCA/ICdkaXNhYmxlZCcgOiAnJ30+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHN2ZyBjbGFzcz0idy00IGgtNCI+PHVzZSBocmVmPSIjaWNvbi1hcnJvdy11cCI+PC91c2U+PC9zdmc+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIG9uY2xpY2s9Im1vdmVDYXRlZ29yeSgke2luZGV4fSwgMSkiIGNsYXNzPSJwLTEuNSBob3ZlcjpiZy1zbGF0ZS0xMDAgcm91bmRlZC1sZyB0ZXh0LXNsYXRlLTUwMCBob3Zlcjp0ZXh0LWJsdWUtNjAwIGRpc2FibGVkOm9wYWNpdHktMzAiICR7aW5kZXggPT09IG1hc3RlckNhdGVnb3JpZXMubGVuZ3RoIC0gMSA/ICdkaXNhYmxlZCcgOiAnJ30+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHN2ZyBjbGFzcz0idy00IGgtNCI+PHVzZSBocmVmPSIjaWNvbi1hcnJvdy1kb3duIj48L3VzZT48L3N2Zz4KICAgICAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICBgOwogICAgICAgICAgICAgICAgbGlzdC5hcHBlbmRDaGlsZChkaXYpOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgCiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtb2RhbC1jYXRlZ29yaWVzJykuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBjbG9zZUNhdGVnb3J5TWFuYWdlcigpIHsKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21vZGFsLWNhdGVnb3JpZXMnKS5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTsKICAgICAgICAgICAgcmVuZGVyQ2F0ZWdvcnlPcHRpb25zKCk7CiAgICAgICAgICAgIHJlbmRlckVkaXRvckxpc3QoKTsKICAgICAgICAgICAgdXBkYXRlUHJldmlldygpOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gZ2V0VmlzaWJsZUNhdGVnb3JpZXMoKSB7CiAgICAgICAgICAgIGNvbnN0IGdyb3VwZWQgPSB7fTsKICAgICAgICAgICAgY3VycmVudEl0ZW1zLmZvckVhY2goaXRlbSA9PiB7CiAgICAgICAgICAgICAgICBpZighZ3JvdXBlZFtpdGVtLmNhdGVnb3J5XSkgZ3JvdXBlZFtpdGVtLmNhdGVnb3J5XSA9IFtdOwogICAgICAgICAgICAgICAgZ3JvdXBlZFtpdGVtLmNhdGVnb3J5XS5wdXNoKGl0ZW0pOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgcmV0dXJuIG1hc3RlckNhdGVnb3JpZXMuZmlsdGVyKGNhdCA9PiBncm91cGVkW2NhdF0gJiYgZ3JvdXBlZFtjYXRdLmxlbmd0aCA+IDApOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gbW92ZVZpc2libGVDYXRlZ29yeShjYXROYW1lLCBkaXJlY3Rpb24pIHsKICAgICAgICAgICAgIGNvbnN0IHZpc2libGVDYXRzID0gZ2V0VmlzaWJsZUNhdGVnb3JpZXMoKTsKICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRJbmRleEluVmlzaWJsZSA9IHZpc2libGVDYXRzLmluZGV4T2YoY2F0TmFtZSk7CiAgICAgICAgICAgICBpZiAoY3VycmVudEluZGV4SW5WaXNpYmxlID09PSAtMSkgcmV0dXJuOyAKICAgICAgICAgICAgIGNvbnN0IHRhcmdldEluZGV4SW5WaXNpYmxlID0gY3VycmVudEluZGV4SW5WaXNpYmxlICsgZGlyZWN0aW9uOwogICAgICAgICAgICAgaWYgKHRhcmdldEluZGV4SW5WaXNpYmxlIDwgMCB8fCB0YXJnZXRJbmRleEluVmlzaWJsZSA+PSB2aXNpYmxlQ2F0cy5sZW5ndGgpIHJldHVybjsKICAgICAgICAgICAgIGNvbnN0IHRhcmdldENhdE5hbWUgPSB2aXNpYmxlQ2F0c1t0YXJnZXRJbmRleEluVmlzaWJsZV07CiAgICAgICAgICAgICAKICAgICAgICAgICAgIGNvbnN0IGluZGV4MSA9IG1hc3RlckNhdGVnb3JpZXMuaW5kZXhPZihjYXROYW1lKTsKICAgICAgICAgICAgIGNvbnN0IGluZGV4MiA9IG1hc3RlckNhdGVnb3JpZXMuaW5kZXhPZih0YXJnZXRDYXROYW1lKTsKICAgICAgICAgICAgIAogICAgICAgICAgICAgaWYoaW5kZXgxID09PSAtMSB8fCBpbmRleDIgPT09IC0xKSByZXR1cm47CiAgICAgICAgICAgICAKICAgICAgICAgICAgIGNvbnN0IHRlbXAgPSBtYXN0ZXJDYXRlZ29yaWVzW2luZGV4MV07CiAgICAgICAgICAgICBtYXN0ZXJDYXRlZ29yaWVzW2luZGV4MV0gPSBtYXN0ZXJDYXRlZ29yaWVzW2luZGV4Ml07CiAgICAgICAgICAgICBtYXN0ZXJDYXRlZ29yaWVzW2luZGV4Ml0gPSB0ZW1wOwogICAgICAgICAgICAgCiAgICAgICAgICAgICBzYXZlQ2F0ZWdvcmllcygpOwogICAgICAgICAgICAgcmVuZGVyRWRpdG9yTGlzdCgpOwogICAgICAgICAgICAgdXBkYXRlUHJldmlldygpOwogICAgICAgICAgICAgcmVuZGVyQ2F0ZWdvcnlPcHRpb25zKCk7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBtb3ZlQ2F0ZWdvcnkoaW5kZXgsIGRpcmVjdGlvbiwgcmVsb2FkVUkgPSAnbW9kYWwnKSB7CiAgICAgICAgICAgIGNvbnN0IG5ld0luZGV4ID0gaW5kZXggKyBkaXJlY3Rpb247CiAgICAgICAgICAgIGlmIChuZXdJbmRleCA8IDAgfHwgbmV3SW5kZXggPj0gbWFzdGVyQ2F0ZWdvcmllcy5sZW5ndGgpIHJldHVybjsKICAgICAgICAgICAgW21hc3RlckNhdGVnb3JpZXNbaW5kZXhdLCBtYXN0ZXJDYXRlZ29yaWVzW25ld0luZGV4XV0gPSBbbWFzdGVyQ2F0ZWdvcmllc1tuZXdJbmRleF0sIG1hc3RlckNhdGVnb3JpZXNbaW5kZXhdXTsKICAgICAgICAgICAgc2F2ZUNhdGVnb3JpZXMoKTsKICAgICAgICAgICAgaWYocmVsb2FkVUkgPT09ICdtb2RhbCcpIHsgb3BlbkNhdGVnb3J5TWFuYWdlcigpOyB9IAogICAgICAgICAgICBlbHNlIHsgcmVuZGVyRWRpdG9yTGlzdCgpOyB1cGRhdGVQcmV2aWV3KCk7IHJlbmRlckNhdGVnb3J5T3B0aW9ucygpOyB9CiAgICAgICAgfQoKCiAgICAgICAgLy8gLS0tIEJVTExFVElOIExPR0lDIC0tLQogICAgICAgIGZ1bmN0aW9uIGNyZWF0ZU5ld0J1bGxldGluKCkgewogICAgICAgICAgICB0cnkgeyBjYW5jZWxFZGl0KCk7IH0gY2F0Y2goZSkge30KICAgICAgICAgICAgY3VycmVudEJ1bGxldGluSWQgPSBEYXRlLm5vdygpOwogICAgICAgICAgICBjdXJyZW50SXRlbXMgPSBbXTsKICAgICAgICAgICAgLy8gQXV0byBpbmNyZW1lbnQgbG9naWMgYmFzZWQgb24gbWF4IG51bWJlciBmb3VuZAogICAgICAgICAgICBsZXQgbWF4TnVtID0gMDsKICAgICAgICAgICAgYnVsbGV0aW5zLmZvckVhY2goYiA9PiB7CiAgICAgICAgICAgICAgICAgY29uc3QgbiA9IHBhcnNlSW50KGIubnVtYmVyKTsKICAgICAgICAgICAgICAgICBpZighaXNOYU4obikgJiYgbiA+IG1heE51bSkgbWF4TnVtID0gbjsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdiaS1udW1iZXInKS52YWx1ZSA9IG1heE51bSArIDE7CiAgICAgICAgICAgIAogICAgICAgICAgICBjb25zdCBjdXJyID0gbmV3IERhdGUoKTsKICAgICAgICAgICAgY29uc3QgZmlyc3QgPSBjdXJyLmdldERhdGUoKSAtIGN1cnIuZ2V0RGF5KCkgKyAxOyAKICAgICAgICAgICAgY29uc3QgbGFzdCA9IGZpcnN0ICsgNDsgCiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdiaS1kYXRlLXN0YXJ0JykudmFsdWUgPSBuZXcgRGF0ZShjdXJyLnNldERhdGUoZmlyc3QpKS50b0lTT1N0cmluZygpLnNsaWNlKDAsMTApOwogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYmktZGF0ZS1lbmQnKS52YWx1ZSA9IG5ldyBEYXRlKGN1cnIuc2V0RGF0ZShsYXN0KSkudG9JU09TdHJpbmcoKS5zbGljZSgwLDEwKTsKICAgICAgICAgICAgCiAgICAgICAgICAgIC8vIFVTRSBFU1RBQkxJU0hNRU5UIERFRkFVTFRTCiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdiaS1wdWItZGF0ZScpLnZhbHVlQXNEYXRlID0gbmV3IERhdGUoKTsKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2JpLXNpZ25hdG9yeScpLnZhbHVlID0gZXN0YWJsaXNobWVudC5kZWZhdWx0U2lnbmF0b3J5IHx8ICJMJ8OpcXVpcGUgZGUgZGlyZWN0aW9uIjsgCiAgICAgICAgICAgIAogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYmktdGhlbWUnKS52YWx1ZSA9ICdibHVlJzsKCiAgICAgICAgICAgIHJlbmRlckVkaXRvckxpc3QoKTsKICAgICAgICAgICAgdXBkYXRlUHJldmlldygpOwogICAgICAgICAgICBzYXZlQ3VycmVudEJ1bGxldGluKCk7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBsb2FkQnVsbGV0aW4oaWQpIHsKICAgICAgICAgICAgY2FuY2VsRWRpdCgpOwogICAgICAgICAgICBjb25zdCBiID0gYnVsbGV0aW5zLmZpbmQoeCA9PiB4LmlkID09PSBpZCk7CiAgICAgICAgICAgIGlmKCFiKSByZXR1cm47CiAgICAgICAgICAgIGN1cnJlbnRCdWxsZXRpbklkID0gYi5pZDsKICAgICAgICAgICAgY3VycmVudEl0ZW1zID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShiLml0ZW1zKSk7IAogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYmktbnVtYmVyJykudmFsdWUgPSBiLm51bWJlcjsKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2JpLWRhdGUtc3RhcnQnKS52YWx1ZSA9IGIuZGF0ZVN0YXJ0OwogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYmktZGF0ZS1lbmQnKS52YWx1ZSA9IGIuZGF0ZUVuZDsKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2JpLXB1Yi1kYXRlJykudmFsdWUgPSBiLnB1YkRhdGUgfHwgbmV3IERhdGUoKS50b0lTT1N0cmluZygpLnNsaWNlKDAsMTApOwogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYmktc2lnbmF0b3J5JykudmFsdWUgPSBiLnNpZ25hdG9yeSB8fCAiTCfDqXF1aXBlIGRlIGRpcmVjdGlvbiI7CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdiaS10aGVtZScpLnZhbHVlID0gYi50aGVtZSB8fCAnYmx1ZSc7CgogICAgICAgICAgICByZW5kZXJFZGl0b3JMaXN0KCk7CiAgICAgICAgICAgIHVwZGF0ZVByZXZpZXcoKTsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgLy8gVjM6IERVUExJQ0FUSU9OIEZVTkNUSU9OCiAgICAgICAgZnVuY3Rpb24gZHVwbGljYXRlQnVsbGV0aW4oZSwgaWQpIHsKICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgICAgICAgY29uc3Qgc291cmNlID0gYnVsbGV0aW5zLmZpbmQoYiA9PiBiLmlkID09PSBpZCk7CiAgICAgICAgICAgIGlmKCFzb3VyY2UpIHJldHVybjsKCiAgICAgICAgICAgIGlmKGNvbmZpcm0oYENvcGllciBsZSBidWxsZXRpbiBOwrAke3NvdXJjZS5udW1iZXJ9ID9gKSkgewogICAgICAgICAgICAgICAgLy8gMS4gQ2FsY3VsYXRlIG5ldyBudW1iZXIKICAgICAgICAgICAgICAgIGxldCBtYXhOdW0gPSAwOwogICAgICAgICAgICAgICAgYnVsbGV0aW5zLmZvckVhY2goYiA9PiB7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgbiA9IHBhcnNlSW50KGIubnVtYmVyKTsKICAgICAgICAgICAgICAgICAgICBpZighaXNOYU4obikgJiYgbiA+IG1heE51bSkgbWF4TnVtID0gbjsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgY29uc3QgbmV3TnVtID0gbWF4TnVtICsgMTsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgLy8gMi4gQ2xvbmUKICAgICAgICAgICAgICAgIGNvbnN0IG5ld0l0ZW0gPSB7CiAgICAgICAgICAgICAgICAgICAgLi4uSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShzb3VyY2UpKSwKICAgICAgICAgICAgICAgICAgICBpZDogRGF0ZS5ub3coKSwKICAgICAgICAgICAgICAgICAgICBudW1iZXI6IG5ld051bSwKICAgICAgICAgICAgICAgICAgICBsYXN0TW9kaWZpZWQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKQogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgLy8gMy4gU2F2ZSAmIExvYWQKICAgICAgICAgICAgICAgIGJ1bGxldGlucy5wdXNoKG5ld0l0ZW0pOwogICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2JpYmFzZV9idWxsZXRpbnMnLCBKU09OLnN0cmluZ2lmeShidWxsZXRpbnMpKTsKICAgICAgICAgICAgICAgIGxvYWRCdWxsZXRpbihuZXdJdGVtLmlkKTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gZm9ybWF0RGF0ZUZvckRpc3BsYXkoZGF0ZVN0cikgewogICAgICAgICAgICBpZiAoIWRhdGVTdHIpIHJldHVybiAnJzsKICAgICAgICAgICAgaWYgKCEvXlxkezR9LVxkezJ9LVxkezJ9JC8udGVzdChkYXRlU3RyKSkgcmV0dXJuIGRhdGVTdHI7CiAgICAgICAgICAgIGNvbnN0IFt5LCBtLCBkXSA9IGRhdGVTdHIuc3BsaXQoJy0nKS5tYXAoTnVtYmVyKTsKICAgICAgICAgICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKHksIG0gLSAxLCBkKTsKICAgICAgICAgICAgcmV0dXJuIGRhdGUudG9Mb2NhbGVEYXRlU3RyaW5nKCdmci1GUicsIHsgd2Vla2RheTogJ2xvbmcnLCBkYXk6ICdudW1lcmljJywgbW9udGg6ICdsb25nJyB9KTsKICAgICAgICB9CgogICAgICAgIC8vIC0tLSBJVEVNUyBMT0dJQyAtLS0KICAgICAgICBmdW5jdGlvbiBtb3ZlSXRlbVVwKGlkKSB7CiAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gY3VycmVudEl0ZW1zLmZpbmRJbmRleChpID0+IGkuaWQgPT09IGlkKTsKICAgICAgICAgICAgaWYgKGluZGV4ID09PSAtMSkgcmV0dXJuOwogICAgICAgICAgICBjb25zdCBjYXQgPSBjdXJyZW50SXRlbXNbaW5kZXhdLmNhdGVnb3J5OwogICAgICAgICAgICBsZXQgcHJldkluZGV4ID0gLTE7CiAgICAgICAgICAgIGZvciAobGV0IGkgPSBpbmRleCAtIDE7IGkgPj0gMDsgaS0tKSB7IGlmIChjdXJyZW50SXRlbXNbaV0uY2F0ZWdvcnkgPT09IGNhdCkgeyBwcmV2SW5kZXggPSBpOyBicmVhazsgfSB9CgogICAgICAgICAgICBpZiAocHJldkluZGV4ICE9PSAtMSkgewogICAgICAgICAgICAgICAgW2N1cnJlbnRJdGVtc1twcmV2SW5kZXhdLCBjdXJyZW50SXRlbXNbaW5kZXhdXSA9IFtjdXJyZW50SXRlbXNbaW5kZXhdLCBjdXJyZW50SXRlbXNbcHJldkluZGV4XV07CiAgICAgICAgICAgICAgICByZW5kZXJFZGl0b3JMaXN0KCk7CiAgICAgICAgICAgICAgICB1cGRhdGVQcmV2aWV3KCk7CiAgICAgICAgICAgICAgICBzYXZlQ3VycmVudEJ1bGxldGluKHRydWUpOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBtb3ZlSXRlbURvd24oaWQpIHsKICAgICAgICAgICAgY29uc3QgaW5kZXggPSBjdXJyZW50SXRlbXMuZmluZEluZGV4KGkgPT4gaS5pZCA9PT0gaWQpOwogICAgICAgICAgICBpZiAoaW5kZXggPT09IC0xKSByZXR1cm47CiAgICAgICAgICAgIGNvbnN0IGNhdCA9IGN1cnJlbnRJdGVtc1tpbmRleF0uY2F0ZWdvcnk7CiAgICAgICAgICAgIGxldCBuZXh0SW5kZXggPSAtMTsKICAgICAgICAgICAgZm9yIChsZXQgaSA9IGluZGV4ICsgMTsgaSA8IGN1cnJlbnRJdGVtcy5sZW5ndGg7IGkrKykgeyBpZiAoY3VycmVudEl0ZW1zW2ldLmNhdGVnb3J5ID09PSBjYXQpIHsgbmV4dEluZGV4ID0gaTsgYnJlYWs7IH0gfQoKICAgICAgICAgICAgaWYgKG5leHRJbmRleCAhPT0gLTEpIHsKICAgICAgICAgICAgICAgIFtjdXJyZW50SXRlbXNbbmV4dEluZGV4XSwgY3VycmVudEl0ZW1zW2luZGV4XV0gPSBbY3VycmVudEl0ZW1zW2luZGV4XSwgY3VycmVudEl0ZW1zW25leHRJbmRleF1dOwogICAgICAgICAgICAgICAgcmVuZGVyRWRpdG9yTGlzdCgpOwogICAgICAgICAgICAgICAgdXBkYXRlUHJldmlldygpOwogICAgICAgICAgICAgICAgc2F2ZUN1cnJlbnRCdWxsZXRpbih0cnVlKTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gdG9nZ2xlRGF0ZUlucHV0KCkgewogICAgICAgICAgICBjb25zdCB0eXBlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignaW5wdXRbbmFtZT0iZGF0ZS10eXBlIl06Y2hlY2tlZCcpLnZhbHVlOwogICAgICAgICAgICBjb25zdCBmaXhlZElucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2l0ZW0tZGF0ZS1maXhlZCcpOwogICAgICAgICAgICBjb25zdCB2YXJpYWJsZUlucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2l0ZW0tZGF0ZS12YXJpYWJsZScpOwogICAgICAgICAgICAKICAgICAgICAgICAgaWYodHlwZSA9PT0gJ2ZpeGVkJykgeyBmaXhlZElucHV0LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpOyB2YXJpYWJsZUlucHV0LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpOyB9IAogICAgICAgICAgICBlbHNlIHsgZml4ZWRJbnB1dC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTsgdmFyaWFibGVJbnB1dC5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTsgfQogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gc3RhcnRFZGl0SXRlbShpZCkgewogICAgICAgICAgICBjb25zdCBpdGVtID0gY3VycmVudEl0ZW1zLmZpbmQoaSA9PiBpLmlkID09PSBpZCk7CiAgICAgICAgICAgIGlmKCFpdGVtKSByZXR1cm47CgogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaXRlbS1jYXRlZ29yeScpLnZhbHVlID0gaXRlbS5jYXRlZ29yeTsKICAgICAgICAgICAgY29uc3QgaXNEYXRlID0gL15cZHs0fS1cZHsyfS1cZHsyfSQvLnRlc3QoaXRlbS5kYXRlKTsKICAgICAgICAgICAgaWYoaXNEYXRlIHx8IGl0ZW0uZGF0ZSA9PT0gJycpIHsKICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2lucHV0W25hbWU9ImRhdGUtdHlwZSJdW3ZhbHVlPSJmaXhlZCJdJykuY2hlY2tlZCA9IHRydWU7CiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaXRlbS1kYXRlLWZpeGVkJykudmFsdWUgPSBpdGVtLmRhdGU7CiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaXRlbS1kYXRlLXZhcmlhYmxlJykudmFsdWUgPSAnJzsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2lucHV0W25hbWU9ImRhdGUtdHlwZSJdW3ZhbHVlPSJ2YXJpYWJsZSJdJykuY2hlY2tlZCA9IHRydWU7CiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaXRlbS1kYXRlLWZpeGVkJykudmFsdWUgPSAnJzsKICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpdGVtLWRhdGUtdmFyaWFibGUnKS52YWx1ZSA9IGl0ZW0uZGF0ZTsKICAgICAgICAgICAgfQogICAgICAgICAgICB0b2dnbGVEYXRlSW5wdXQoKTsKCiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpdGVtLXRpdGxlJykudmFsdWUgPSBpdGVtLnRpdGxlOwogICAgICAgICAgICBxdWlsbC5yb290LmlubmVySFRNTCA9IGl0ZW0uY29udGVudDsKICAgICAgICAgICAgZWRpdGluZ0l0ZW1JZCA9IGlkOwoKICAgICAgICAgICAgY29uc3QgYnRuTWFpbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdidG4tYWRkLXVwZGF0ZScpOwogICAgICAgICAgICBjb25zdCBidG5DYW5jZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnRuLWNhbmNlbC1lZGl0Jyk7CiAgICAgICAgICAgIGNvbnN0IGZvcm1UaXRsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmb3JtLXRpdGxlJyk7CiAgICAgICAgICAgIAogICAgICAgICAgICBmb3JtVGl0bGUuaW5uZXJUZXh0ID0gIk1vZGlmaWVyIGwnaW5mbyI7CiAgICAgICAgICAgIGJ0bk1haW4uaW5uZXJUZXh0ID0gIlZhbGlkZXIgbGVzIG1vZGlmaWNhdGlvbnMg4pyFIjsKICAgICAgICAgICAgYnRuTWFpbi5jbGFzc0xpc3QucmVtb3ZlKCdiZy1vcmFuZ2UtNTAwJywgJ2hvdmVyOmJnLW9yYW5nZS02MDAnKTsKICAgICAgICAgICAgYnRuTWFpbi5jbGFzc0xpc3QuYWRkKCdiZy1ibHVlLTYwMCcsICdob3ZlcjpiZy1ibHVlLTcwMCcpOwogICAgICAgICAgICBidG5DYW5jZWwuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmb3JtLWNvbnRhaW5lcicpLnNjcm9sbEludG9WaWV3KHtiZWhhdmlvcjogJ3Ntb290aCd9KTsKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Zvcm0tY29udGFpbmVyJykuY2xhc3NMaXN0LmFkZCgncmluZy0yJywgJ3JpbmctYmx1ZS00MDAnKTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGNhbmNlbEVkaXQoKSB7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2lucHV0W25hbWU9ImRhdGUtdHlwZSJdW3ZhbHVlPSJmaXhlZCJdJykuY2hlY2tlZCA9IHRydWU7CiAgICAgICAgICAgIHRvZ2dsZURhdGVJbnB1dCgpOwogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaXRlbS1kYXRlLWZpeGVkJykudmFsdWUgPSAnJzsgCiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpdGVtLWRhdGUtdmFyaWFibGUnKS52YWx1ZSA9ICcnOyAKCiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpdGVtLXRpdGxlJykudmFsdWUgPSAnJzsKICAgICAgICAgICAgcXVpbGwuc2V0Q29udGVudHMoW10pOwogICAgICAgICAgICBlZGl0aW5nSXRlbUlkID0gbnVsbDsKCiAgICAgICAgICAgIGNvbnN0IGJ0bk1haW4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnRuLWFkZC11cGRhdGUnKTsKICAgICAgICAgICAgY29uc3QgYnRuQ2FuY2VsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2J0bi1jYW5jZWwtZWRpdCcpOwogICAgICAgICAgICBjb25zdCBmb3JtVGl0bGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZm9ybS10aXRsZScpOwogICAgICAgICAgICBmb3JtVGl0bGUuaW5uZXJUZXh0ID0gIlNhaXNpciB1bmUgaW5mbyI7CiAgICAgICAgICAgIGJ0bk1haW4uaW5uZXJUZXh0ID0gIkFqb3V0ZXIgbCdpbmZvIPCfmoAiOwogICAgICAgICAgICBidG5NYWluLmNsYXNzTGlzdC5hZGQoJ2JnLW9yYW5nZS01MDAnLCAnaG92ZXI6Ymctb3JhbmdlLTYwMCcpOwogICAgICAgICAgICBidG5NYWluLmNsYXNzTGlzdC5yZW1vdmUoJ2JnLWJsdWUtNjAwJywgJ2hvdmVyOmJnLWJsdWUtNzAwJyk7CiAgICAgICAgICAgIGJ0bkNhbmNlbC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTsKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Zvcm0tY29udGFpbmVyJykuY2xhc3NMaXN0LnJlbW92ZSgncmluZy0yJywgJ3JpbmctYmx1ZS00MDAnKTsKICAgICAgICAgICAgfSBjYXRjaChlcnIpIHsgY29uc29sZS53YXJuKCdjYW5jZWxFZGl0OicsIGVycik7IH0KICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGFkZEJ1bGxldGluSXRlbSgpIHsKICAgICAgICAgICAgaWYgKCFxdWlsbCkgeyBhbGVydCgnRWRpdGV1ciBub24gcHJldC4gUmVjaGFyZ2V6IGxhIHBhZ2UuJyk7IHJldHVybjsgfQogICAgICAgICAgICBjb25zdCBjYXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaXRlbS1jYXRlZ29yeScpLnZhbHVlOwogICAgICAgICAgICBjb25zdCBkYXRlVHlwZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2lucHV0W25hbWU9ImRhdGUtdHlwZSJdOmNoZWNrZWQnKS52YWx1ZTsKICAgICAgICAgICAgbGV0IGRhdGUgPSBkYXRlVHlwZSA9PT0gJ2ZpeGVkJyA/IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpdGVtLWRhdGUtZml4ZWQnKS52YWx1ZSA6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpdGVtLWRhdGUtdmFyaWFibGUnKS52YWx1ZTsKICAgICAgICAgICAgY29uc3QgdGl0bGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaXRlbS10aXRsZScpLnZhbHVlOwogICAgICAgICAgICBjb25zdCBjb250ZW50ID0gcXVpbGwucm9vdC5pbm5lckhUTUw7CiAgICAgICAgICAgIGNvbnN0IHRleHRDb250ZW50ID0gcXVpbGwuZ2V0VGV4dCgpLnRyaW0oKTsKCiAgICAgICAgICAgIGlmKHRleHRDb250ZW50Lmxlbmd0aCA9PT0gMCAmJiAhdGl0bGUpIHJldHVybjsKCiAgICAgICAgICAgIGlmIChlZGl0aW5nSXRlbUlkKSB7CiAgICAgICAgICAgICAgICBjb25zdCBpZHggPSBjdXJyZW50SXRlbXMuZmluZEluZGV4KGkgPT4gaS5pZCA9PT0gZWRpdGluZ0l0ZW1JZCk7CiAgICAgICAgICAgICAgICBpZihpZHggIT09IC0xKSB7IGN1cnJlbnRJdGVtc1tpZHhdID0geyAuLi5jdXJyZW50SXRlbXNbaWR4XSwgY2F0ZWdvcnk6IGNhdCwgZGF0ZTogZGF0ZSwgdGl0bGU6IHRpdGxlLCBjb250ZW50OiBjb250ZW50IH07IH0KICAgICAgICAgICAgICAgIGNhbmNlbEVkaXQoKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGN1cnJlbnRJdGVtcy5wdXNoKHsgaWQ6IERhdGUubm93KCksIGNhdGVnb3J5OiBjYXQsIGRhdGU6IGRhdGUsIHRpdGxlOiB0aXRsZSwgY29udGVudDogY29udGVudCB9KTsKICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpdGVtLXRpdGxlJykudmFsdWUgPSAnJzsKICAgICAgICAgICAgICAgIHF1aWxsLnNldENvbnRlbnRzKFtdKTsKICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpdGVtLWRhdGUtdmFyaWFibGUnKS52YWx1ZSA9ICcnOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJlbmRlckVkaXRvckxpc3QoKTsKICAgICAgICAgICAgdXBkYXRlUHJldmlldygpOwogICAgICAgICAgICBzYXZlQ3VycmVudEJ1bGxldGluKHRydWUpOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gcmVtb3ZlQnVsbGV0aW5JdGVtKGlkKSB7CiAgICAgICAgICAgIGlmKGlkID09PSBlZGl0aW5nSXRlbUlkKSBjYW5jZWxFZGl0KCk7CiAgICAgICAgICAgIGlmKGNvbmZpcm0oIvCfl5HvuI8gU3VwcHJpbWVyIGNldHRlIGluZm9ybWF0aW9uID8iKSkgewogICAgICAgICAgICAgICAgY3VycmVudEl0ZW1zID0gY3VycmVudEl0ZW1zLmZpbHRlcihpID0+IGkuaWQgIT09IGlkKTsKICAgICAgICAgICAgICAgIHJlbmRlckVkaXRvckxpc3QoKTsKICAgICAgICAgICAgICAgIHVwZGF0ZVByZXZpZXcoKTsKICAgICAgICAgICAgICAgIHNhdmVDdXJyZW50QnVsbGV0aW4odHJ1ZSk7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGRlbGV0ZUJ1bGxldGluKGUsIGlkKSB7CiAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgICAgICAgIGlmKGNvbmZpcm0oIuKaoO+4jyBBdHRlbnRpb24gOiBWb3VsZXotdm91cyB2cmFpbWVudCBzdXBwcmltZXIgZMOpZmluaXRpdmVtZW50IGNlIGJ1bGxldGluID8iKSkgewogICAgICAgICAgICAgICAgYnVsbGV0aW5zID0gYnVsbGV0aW5zLmZpbHRlcihiID0+IGIuaWQgIT09IGlkKTsKICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdiaWJhc2VfYnVsbGV0aW5zJywgSlNPTi5zdHJpbmdpZnkoYnVsbGV0aW5zKSk7CiAgICAgICAgICAgICAgICBpZihjdXJyZW50QnVsbGV0aW5JZCA9PT0gaWQpIHsgYnVsbGV0aW5zLmxlbmd0aCA+IDAgPyBsb2FkQnVsbGV0aW4oYnVsbGV0aW5zWzBdLmlkKSA6IGNyZWF0ZU5ld0J1bGxldGluKCk7IH0gZWxzZSB7IHJlbmRlckJ1bGxldGluTGlzdCgpOyB9CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIHJlbmRlckVkaXRvckxpc3QoKSB7CiAgICAgICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlZGl0b3ItaXRlbXMtbGlzdCcpOwogICAgICAgICAgICBjb250YWluZXIuaW5uZXJIVE1MID0gJyc7CiAgICAgICAgICAgIGNvbnN0IGdyb3VwZWQgPSB7fTsKICAgICAgICAgICAgY3VycmVudEl0ZW1zLmZvckVhY2goaXRlbSA9PiB7IGlmKCFncm91cGVkW2l0ZW0uY2F0ZWdvcnldKSBncm91cGVkW2l0ZW0uY2F0ZWdvcnldID0gW107IGdyb3VwZWRbaXRlbS5jYXRlZ29yeV0ucHVzaChpdGVtKTsgfSk7CiAgICAgICAgICAgIGNvbnN0IHZpc2libGVDYXRzID0gZ2V0VmlzaWJsZUNhdGVnb3JpZXMoKTsKCiAgICAgICAgICAgIG1hc3RlckNhdGVnb3JpZXMuZm9yRWFjaCgoY2F0LCBpbmRleCkgPT4gewogICAgICAgICAgICAgICAgaWYoZ3JvdXBlZFtjYXRdICYmIGdyb3VwZWRbY2F0XS5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgaGVhZGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgICAgICAgICAgICAgICAgaGVhZGVyLmNsYXNzTmFtZSA9ICJmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWJldHdlZW4gbXQtNiBtYi0yIGdyb3VwL2hlYWRlciI7IAogICAgICAgICAgICAgICAgICAgIGNvbnN0IGlzRmlyc3QgPSB2aXNpYmxlQ2F0c1swXSA9PT0gY2F0OwogICAgICAgICAgICAgICAgICAgIGNvbnN0IGlzTGFzdCA9IHZpc2libGVDYXRzW3Zpc2libGVDYXRzLmxlbmd0aCAtIDFdID09PSBjYXQ7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgY2F0U2FmZSA9IGNhdC5yZXBsYWNlKC8nL2csICJcXCciKTsKCiAgICAgICAgICAgICAgICAgICAgaGVhZGVyLmlubmVySFRNTCA9IGAKICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0idGV4dC14cyBmb250LWJvbGQgdGV4dC1zbGF0ZS00MDAgdXBwZXJjYXNlIHRyYWNraW5nLXdpZGVzdCBmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMiI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAke2NhdH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJiZy1zbGF0ZS0xMDAgdGV4dC1zbGF0ZS00MDAgcHgtMS41IHB5LTAuNSByb3VuZGVkLWZ1bGwiIHN0eWxlPSJmb250LXNpemU6MTBweCI+JHtncm91cGVkW2NhdF0ubGVuZ3RofTwvc3Bhbj4KICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZsZXggaXRlbXMtY2VudGVyIGdhcC0xIG9wYWNpdHktMCBncm91cC1ob3Zlci9oZWFkZXI6b3BhY2l0eS0xMDAgdHJhbnNpdGlvbi1vcGFjaXR5Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gb25jbGljaz0ibW92ZVZpc2libGVDYXRlZ29yeSgnJHtjYXRTYWZlfScsIC0xKSIgY2xhc3M9InAtMSBob3ZlcjpiZy1zbGF0ZS0xMDAgdGV4dC1zbGF0ZS00MDAgaG92ZXI6dGV4dC1ibHVlLTYwMCByb3VuZGVkIGRpc2FibGVkOm9wYWNpdHktMzAiICR7aXNGaXJzdCA/ICdkaXNhYmxlZCcgOiAnJ30gdGl0bGU9Ik1vbnRlciBsYSBjYXTDqWdvcmllIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3ZnIGNsYXNzPSJ3LTQgaC00Ij48dXNlIGhyZWY9IiNpY29uLWFycm93LXVwIj48L3VzZT48L3N2Zz4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBvbmNsaWNrPSJtb3ZlVmlzaWJsZUNhdGVnb3J5KCcke2NhdFNhZmV9JywgMSkiIGNsYXNzPSJwLTEgaG92ZXI6Ymctc2xhdGUtMTAwIHRleHQtc2xhdGUtNDAwIGhvdmVyOnRleHQtYmx1ZS02MDAgcm91bmRlZCBkaXNhYmxlZDpvcGFjaXR5LTMwIiAke2lzTGFzdCA/ICdkaXNhYmxlZCcgOiAnJ30gdGl0bGU9IkRlc2NlbmRyZSBsYSBjYXTDqWdvcmllIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3ZnIGNsYXNzPSJ3LTQgaC00Ij48dXNlIGhyZWY9IiNpY29uLWFycm93LWRvd24iPjwvdXNlPjwvc3ZnPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgIGA7CiAgICAgICAgICAgICAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGhlYWRlcik7CgogICAgICAgICAgICAgICAgICAgIGdyb3VwZWRbY2F0XS5mb3JFYWNoKGl0ZW0gPT4gewogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgICAgICAgICAgICAgICAgICAgICAgZGl2LmNsYXNzTmFtZSA9ICJiZy13aGl0ZSBwLTQgcm91bmRlZC14bCBib3JkZXIgYm9yZGVyLXNsYXRlLTEwMCBzaGFkb3ctc20gZmxleCBqdXN0aWZ5LWJldHdlZW4gaXRlbXMtc3RhcnQgZ3JvdXAgbWItMyB0cmFuc2l0aW9uLWFsbCBob3Zlcjpib3JkZXItYmx1ZS0yMDAgaG92ZXI6c2hhZG93LW1kIjsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoaXRlbS5pZCA9PT0gZWRpdGluZ0l0ZW1JZCkgeyBkaXYuY2xhc3NOYW1lID0gImJnLWJsdWUtNTAgcC00IHJvdW5kZWQteGwgYm9yZGVyLTIgYm9yZGVyLWJsdWUtNDAwIHNoYWRvdy1tZCBmbGV4IGp1c3RpZnktYmV0d2VlbiBpdGVtcy1zdGFydCBtYi0zIjsgfQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkaXNwbGF5RGF0ZSA9IGZvcm1hdERhdGVGb3JEaXNwbGF5KGl0ZW0uZGF0ZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGRpdi5pbm5lckhUTUwgPSBgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmbGV4LTEgcHItNCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZm9udC1ib2xkIHRleHQtc2xhdGUtODAwIGZsZXggZmxleC13cmFwIGl0ZW1zLWNlbnRlciBnYXAtMiI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR7ZGlzcGxheURhdGUgPyBgPHNwYW4gY2xhc3M9ImJnLXllbGxvdy0xMDAgdGV4dC15ZWxsb3ctODAwIHB4LTIgcHktMC41IHJvdW5kZWQtbGcgdGV4dC14cyBmb250LWJvbGQgY2FwaXRhbGl6ZSI+JHtkaXNwbGF5RGF0ZX08L3NwYW4+YCA6ICcnfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAke2l0ZW0udGl0bGUgfHwgJzxzcGFuIGNsYXNzPSJpdGFsaWMgdGV4dC1zbGF0ZS00MDAiPlNhbnMgdGl0cmU8L3NwYW4+J30KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJ0ZXh0LXNtIHRleHQtc2xhdGUtNjAwIG10LTIgbGVhZGluZy1yZWxheGVkIHJpY2gtdGV4dC1jb250ZW50Ij4ke2l0ZW0uY29udGVudH08L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTEgb3BhY2l0eS0wIGdyb3VwLWhvdmVyOm9wYWNpdHktMTAwIHRyYW5zaXRpb24tb3BhY2l0eSBmbGV4LXNocmluay0wIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIG9uY2xpY2s9Im1vdmVJdGVtVXAoJHtpdGVtLmlkfSkiIGNsYXNzPSJwLTIgdGV4dC1zbGF0ZS00MDAgaG92ZXI6dGV4dC1pbmRpZ28tNjAwIGhvdmVyOmJnLWluZGlnby01MCByb3VuZGVkLWxnIHRyYW5zaXRpb24tY29sb3JzIiB0aXRsZT0iTW9udGVyIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHN2ZyBjbGFzcz0idy00IGgtNCI+PHVzZSBocmVmPSIjaWNvbi1hcnJvdy11cCI+PC91c2U+PC9zdmc+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBvbmNsaWNrPSJtb3ZlSXRlbURvd24oJHtpdGVtLmlkfSkiIGNsYXNzPSJwLTIgdGV4dC1zbGF0ZS00MDAgaG92ZXI6dGV4dC1pbmRpZ28tNjAwIGhvdmVyOmJnLWluZGlnby01MCByb3VuZGVkLWxnIHRyYW5zaXRpb24tY29sb3JzIiB0aXRsZT0iRGVzY2VuZHJlIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHN2ZyBjbGFzcz0idy00IGgtNCI+PHVzZSBocmVmPSIjaWNvbi1hcnJvdy1kb3duIj48L3VzZT48L3N2Zz4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJ3LXB4IGgtNCBiZy1zbGF0ZS0yMDAgbXgtMSI+PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBvbmNsaWNrPSJzdGFydEVkaXRJdGVtKCR7aXRlbS5pZH0pIiBjbGFzcz0icC0yIHRleHQtc2xhdGUtNDAwIGhvdmVyOnRleHQtYmx1ZS02MDAgaG92ZXI6YmctYmx1ZS01MCByb3VuZGVkLWxnIHRyYW5zaXRpb24tY29sb3JzIiB0aXRsZT0iTW9kaWZpZXIiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3ZnIGNsYXNzPSJ3LTQgaC00Ij48dXNlIGhyZWY9IiNpY29uLWVkaXQiPjwvdXNlPjwvc3ZnPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gb25jbGljaz0icmVtb3ZlQnVsbGV0aW5JdGVtKCR7aXRlbS5pZH0pIiBjbGFzcz0icC0yIHRleHQtc2xhdGUtNDAwIGhvdmVyOnRleHQtcmVkLTUwMCBob3ZlcjpiZy1yZWQtNTAgcm91bmRlZC1sZyB0cmFuc2l0aW9uLWNvbG9ycyIgdGl0bGU9IlN1cHByaW1lciI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzdmcgY2xhc3M9InctNCBoLTQiPjx1c2UgaHJlZj0iI2ljb24tdHJhc2giPjwvdXNlPjwvc3ZnPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgIGA7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChkaXYpOwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIHRyaWdnZXJBdXRvU2F2ZSgpIHsKICAgICAgICAgICAgdXBkYXRlUHJldmlldygpOyAKICAgICAgICAgICAgaWYoYXV0b1NhdmVUaW1lcikgY2xlYXJUaW1lb3V0KGF1dG9TYXZlVGltZXIpOwogICAgICAgICAgICBhdXRvU2F2ZVRpbWVyID0gc2V0VGltZW91dCgoKSA9PiB7IHNhdmVDdXJyZW50QnVsbGV0aW4odHJ1ZSk7IH0sIDEwMDApOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gc2hvd1NhdmVTdGF0dXMoKSB7CiAgICAgICAgICAgIGNvbnN0IHN0YXR1c0VsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2F1dG8tc2F2ZS1zdGF0dXMnKTsKICAgICAgICAgICAgc3RhdHVzRWwuY2xhc3NMaXN0LnJlbW92ZSgnc2F2ZS1pbmRpY2F0b3InKTsgCiAgICAgICAgICAgIHZvaWQgc3RhdHVzRWwub2Zmc2V0V2lkdGg7IAogICAgICAgICAgICBzdGF0dXNFbC5jbGFzc0xpc3QuYWRkKCdzYXZlLWluZGljYXRvcicpOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gc2F2ZUN1cnJlbnRCdWxsZXRpbihpc0F1dG8gPSBmYWxzZSkgewogICAgICAgICAgICB0cnkgewogICAgICAgICAgICBjb25zdCBudW0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYmktbnVtYmVyJykudmFsdWU7CiAgICAgICAgICAgIGNvbnN0IHN0YXJ0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2JpLWRhdGUtc3RhcnQnKS52YWx1ZTsKICAgICAgICAgICAgY29uc3QgZW5kID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2JpLWRhdGUtZW5kJykudmFsdWU7CiAgICAgICAgICAgIGNvbnN0IHB1YkRhdGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYmktcHViLWRhdGUnKS52YWx1ZTsKICAgICAgICAgICAgY29uc3Qgc2lnbmF0b3J5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2JpLXNpZ25hdG9yeScpLnZhbHVlOwogICAgICAgICAgICBjb25zdCB0aGVtZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdiaS10aGVtZScpLnZhbHVlOwoKICAgICAgICAgICAgY29uc3QgYnVsbGV0aW4gPSB7CiAgICAgICAgICAgICAgICBpZDogY3VycmVudEJ1bGxldGluSWQsCiAgICAgICAgICAgICAgICBudW1iZXI6IG51bSwKICAgICAgICAgICAgICAgIGRhdGVTdGFydDogc3RhcnQsCiAgICAgICAgICAgICAgICBkYXRlRW5kOiBlbmQsCiAgICAgICAgICAgICAgICBwdWJEYXRlOiBwdWJEYXRlLAogICAgICAgICAgICAgICAgc2lnbmF0b3J5OiBzaWduYXRvcnksCiAgICAgICAgICAgICAgICB0aGVtZTogdGhlbWUsCiAgICAgICAgICAgICAgICBpdGVtczogY3VycmVudEl0ZW1zLAogICAgICAgICAgICAgICAgbGFzdE1vZGlmaWVkOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkKICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIGNvbnN0IGlkeCA9IGJ1bGxldGlucy5maW5kSW5kZXgoYiA9PiBiLmlkID09PSBjdXJyZW50QnVsbGV0aW5JZCk7CiAgICAgICAgICAgIGlmKGlkeCA+PSAwKSB7IGJ1bGxldGluc1tpZHhdID0gYnVsbGV0aW47IH0gZWxzZSB7IGJ1bGxldGlucy5wdXNoKGJ1bGxldGluKTsgfQogICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnYmliYXNlX2J1bGxldGlucycsIEpTT04uc3RyaW5naWZ5KGJ1bGxldGlucykpOwogICAgICAgICAgICByZW5kZXJCdWxsZXRpbkxpc3QoKTsgLy8gUmUtcmVuZGVyIHRvIHVwZGF0ZSB0aGUgbGlzdCB2aWV3CiAgICAgICAgICAgIGlmKGlzQXV0bykgc2hvd1NhdmVTdGF0dXMoKTsKICAgICAgICAgICAgfSBjYXRjaChlcnIpIHsgY29uc29sZS5lcnJvcignc2F2ZUN1cnJlbnRCdWxsZXRpbiBlcnJvcjonLCBlcnIpOyB9CiAgICAgICAgfQogICAgICAgIAogICAgICAgIC8vIFYzOiBVcGRhdGVkIFJlbmRlciBMaXN0IHdpdGggRmlsdGVyCiAgICAgICAgZnVuY3Rpb24gcmVuZGVyQnVsbGV0aW5MaXN0KCkgewogICAgICAgICAgICBjb25zdCBsaXN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2J1bGxldGluLWxpc3QnKTsKICAgICAgICAgICAgbGlzdC5pbm5lckhUTUwgPSAnJzsKICAgICAgICAgICAgCiAgICAgICAgICAgIC8vIEdldCBTZWFyY2ggUXVlcnkKICAgICAgICAgICAgY29uc3QgcXVlcnkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2VhcmNoLWJ1bGxldGluJyk/LnZhbHVlLnRvTG93ZXJDYXNlKCkgfHwgIiI7CgogICAgICAgICAgICBjb25zdCBzb3J0ZWQgPSBidWxsZXRpbnMuc29ydCgoYSxiKSA9PiBiLmlkIC0gYS5pZCk7CiAgICAgICAgICAgIGNvbnN0IGZpbHRlcmVkID0gc29ydGVkLmZpbHRlcihiID0+IHsKICAgICAgICAgICAgICAgICByZXR1cm4gYi5udW1iZXIudG9TdHJpbmcoKS5pbmNsdWRlcyhxdWVyeSkgfHwgYi5kYXRlU3RhcnQuaW5jbHVkZXMocXVlcnkpOwogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIGZpbHRlcmVkLmZvckVhY2goYiA9PiB7CiAgICAgICAgICAgICAgICBjb25zdCBpc0FjdGl2ZSA9IGIuaWQgPT09IGN1cnJlbnRCdWxsZXRpbklkOwogICAgICAgICAgICAgICAgY29uc3QgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgICAgICAgICAgICBkaXYuY2xhc3NOYW1lID0gYHctZnVsbCB0ZXh0LWxlZnQgcC00IHJvdW5kZWQteGwgYm9yZGVyIHRyYW5zaXRpb24tYWxsIGdyb3VwIGZsZXgganVzdGlmeS1iZXR3ZWVuIGl0ZW1zLXN0YXJ0IGN1cnNvci1wb2ludGVyIG1iLTIgJHtpc0FjdGl2ZSA/ICdiZy13aGl0ZS8xNSBib3JkZXItYmx1ZS00MDAvNTAgc2hhZG93LXNtJyA6ICdiZy10cmFuc3BhcmVudCBib3JkZXItdHJhbnNwYXJlbnQgaG92ZXI6Ymctd2hpdGUvMTAnfWA7CiAgICAgICAgICAgICAgICBkaXYub25jbGljayA9ICgpID0+IGxvYWRCdWxsZXRpbihiLmlkKTsKICAgICAgICAgICAgICAgIGNvbnN0IHN0YXJ0RGF0ZSA9IHBhcnNlTG9jYWxEYXRlKGIuZGF0ZVN0YXJ0KTsKICAgICAgICAgICAgICAgIGNvbnN0IGRhdGVEaXNwbGF5ID0gc3RhcnREYXRlID8gc3RhcnREYXRlLnRvTG9jYWxlRGF0ZVN0cmluZygnZnItRlInLCB7ZGF5OidudW1lcmljJywgbW9udGg6J251bWVyaWMnfSkgOiAnLi4uJzsKICAgICAgICAgICAgICAgIGRpdi5pbm5lckhUTUwgPSBgCiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZmxleC0xIj4KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZmxleCBqdXN0aWZ5LWJldHdlZW4gaXRlbXMtY2VudGVyIG1iLTEiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9ImZvbnQtYm9sZCAke2lzQWN0aXZlID8gJ3RleHQtd2hpdGUnIDogJ3RleHQtc2xhdGUtMjAwJ30iPkJ1bGxldGluIE5cdTAwYjAke2IubnVtYmVyfTwvc3Bhbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJ0ZXh0LXNsYXRlLTQwMCIgc3R5bGU9ImZvbnQtc2l6ZToxMHB4Ij4ke25ldyBEYXRlKGIubGFzdE1vZGlmaWVkKS50b0xvY2FsZURhdGVTdHJpbmcoKX08L3NwYW4+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJ0ZXh0LXhzICR7aXNBY3RpdmUgPyAndGV4dC1ibHVlLTMwMCcgOiAndGV4dC1zbGF0ZS00MDAnfSI+U2VtYWluZSBkdSAke2RhdGVEaXNwbGF5fTwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJkaXNwbGF5OmZsZXg7ZmxleC1kaXJlY3Rpb246cm93O2dhcDo0cHg7bWFyZ2luLXRvcDo2cHg7ZmxleC13cmFwOndyYXA7Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gb25jbGljaz0iZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7bG9hZEJ1bGxldGluKCR7Yi5pZH0pO29wZW5CaVBhcmFtcygpIiBzdHlsZT0iY29sb3I6IzkzYzVmZDtwYWRkaW5nOjNweDtib3JkZXItcmFkaXVzOjZweDtiYWNrZ3JvdW5kOm5vbmU7Ym9yZGVyOm5vbmU7Y3Vyc29yOnBvaW50ZXIiIHRpdGxlPSJQYXJhbVx1MDBlOHRyZXMiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3ZnIHdpZHRoPSIxMyIgaGVpZ2h0PSIxMyIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIj48cGF0aCBkPSJNMTcgM2EyLjg1IDIuODMgMCAxMTQgNEw3LjUgMjAuNSAyIDIybDEuNS01LjVaIi8+PC9zdmc+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gb25jbGljaz0iZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7bG9hZEJ1bGxldGluKCR7Yi5pZH0pO3NldFRpbWVvdXQoZ2VuZXJhdGVQREYsMzAwKSIgc3R5bGU9ImNvbG9yOiNmY2E1YTU7cGFkZGluZzozcHg7Ym9yZGVyLXJhZGl1czo2cHg7YmFja2dyb3VuZDpub25lO2JvcmRlcjpub25lO2N1cnNvcjpwb2ludGVyIiB0aXRsZT0iUERGIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHN2ZyB3aWR0aD0iMTMiIGhlaWdodD0iMTMiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJjdXJyZW50Q29sb3IiIHN0cm9rZS13aWR0aD0iMiI+PHBhdGggZD0iTTE0IDJINmEyIDIgMCAwIDAtMiAydjE2YTIgMiAwIDAgMCAyIDJoMTJhMiAyIDAgMCAwIDItMlY4eiIvPjxwb2x5bGluZSBwb2ludHM9IjE0IDIgMTQgOCAyMCA4Ii8+PGxpbmUgeDE9IjE2IiB5MT0iMTMiIHgyPSI4IiB5Mj0iMTMiLz48bGluZSB4MT0iMTYiIHkxPSIxNyIgeDI9IjgiIHkyPSIxNyIvPjwvc3ZnPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIG9uY2xpY2s9ImV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO2xvYWRCdWxsZXRpbigke2IuaWR9KTtzZXRUaW1lb3V0KGdlbmVyYXRlRE9DWCwzMDApIiBzdHlsZT0iY29sb3I6IzkzYzVmZDtwYWRkaW5nOjNweDtib3JkZXItcmFkaXVzOjZweDtiYWNrZ3JvdW5kOm5vbmU7Ym9yZGVyOm5vbmU7Y3Vyc29yOnBvaW50ZXIiIHRpdGxlPSJXb3JkIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHN2ZyB3aWR0aD0iMTMiIGhlaWdodD0iMTMiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJjdXJyZW50Q29sb3IiIHN0cm9rZS13aWR0aD0iMiI+PHBhdGggZD0iTTQgMnYyMGgxNlY4bC02LTZINHoiLz48cG9seWxpbmUgcG9pbnRzPSIxNCAyIDE0IDggMjAgOCIvPjxwYXRoIGQ9Ik04IDEzbDIgNCAyLTQgMiA0IDItNCIvPjwvc3ZnPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIG9uY2xpY2s9ImR1cGxpY2F0ZUJ1bGxldGluKGV2ZW50LCAke2IuaWR9KSIgc3R5bGU9ImNvbG9yOnJnYmEoMjU1LDI1NSwyNTUsLjU1KTtwYWRkaW5nOjNweDtib3JkZXItcmFkaXVzOjZweDtiYWNrZ3JvdW5kOm5vbmU7Ym9yZGVyOm5vbmU7Y3Vyc29yOnBvaW50ZXIiIHRpdGxlPSJEdXBsaXF1ZXIiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3ZnIHdpZHRoPSIxMyIgaGVpZ2h0PSIxMyI+PHVzZSBocmVmPSIjaWNvbi1jb3B5Ij48L3VzZT48L3N2Zz4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBvbmNsaWNrPSJkZWxldGVCdWxsZXRpbihldmVudCwgJHtiLmlkfSkiIHN0eWxlPSJjb2xvcjpyZ2JhKDI1NSwyNTUsMjU1LC40KTtwYWRkaW5nOjNweDtib3JkZXItcmFkaXVzOjZweDtiYWNrZ3JvdW5kOm5vbmU7Ym9yZGVyOm5vbmU7Y3Vyc29yOnBvaW50ZXIiIHRpdGxlPSJTdXBwcmltZXIiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3ZnIHdpZHRoPSIxMyIgaGVpZ2h0PSIxMyI+PHVzZSBocmVmPSIjaWNvbi10cmFzaCI+PC91c2U+PC9zdmc+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CmA7CiAgICAgICAgICAgICAgICBsaXN0LmFwcGVuZENoaWxkKGRpdik7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICAKICAgICAgICAgICAgaWYoZmlsdGVyZWQubGVuZ3RoID09PSAwICYmIGJ1bGxldGlucy5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgICAgbGlzdC5pbm5lckhUTUwgPSBgPGRpdiBjbGFzcz0idGV4dC1jZW50ZXIgcC00IHRleHQtc2xhdGUtNDAwIHRleHQtc20iPkF1Y3VuIGJ1bGxldGluIHRyb3V2w6kgcG91ciAiJHtxdWVyeX0iPC9kaXY+YDsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICAKICAgICAgICBmdW5jdGlvbiBwYXJzZUxvY2FsRGF0ZShkYXRlU3RyaW5nKSB7CiAgICAgICAgICAgICBpZiAoIWRhdGVTdHJpbmcpIHJldHVybiBudWxsOwogICAgICAgICAgICAgY29uc3QgW3llYXIsIG1vbnRoLCBkYXldID0gZGF0ZVN0cmluZy5zcGxpdCgnLScpLm1hcChOdW1iZXIpOwogICAgICAgICAgICAgcmV0dXJuIG5ldyBEYXRlKHllYXIsIG1vbnRoIC0gMSwgZGF5KTsKICAgICAgICB9CgogICAgICAgIC8vIC0tLSBQUkVWSUVXIC0tLQogICAgICAgIGZ1bmN0aW9uIHVwZGF0ZVByZXZpZXcoKSB7CiAgICAgICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwZGYtY29udGVudCcpOwogICAgICAgICAgICAKICAgICAgICAgICAgLy8gTGF5b3V0ICYgRm9udCBDbGFzc2VzIGZyb20gU2V0dGluZ3MKICAgICAgICAgICAgY29uc3QgbGF5b3V0ID0gZXN0YWJsaXNobWVudC5sYXlvdXQgfHwgJ2NsYXNzaWMnOwogICAgICAgICAgICBjb25zdCBmb250ID0gZXN0YWJsaXNobWVudC5mb250IHx8ICdpbnRlcic7CiAgICAgICAgICAgIGNvbnN0IGZvbnRDbGFzcyA9IGZvbnQgPT09ICdzZXJpZicgPyAnZm9udC1zZXJpZicgOiAoZm9udCA9PT0gJ21vbm8nID8gJ2ZvbnQtbW9ubycgOiAnZm9udC1pbnRlcicpOwogICAgICAgICAgICAKICAgICAgICAgICAgLy8gQ3VzdG9tIHRleHRzCiAgICAgICAgICAgIGNvbnN0IGRvY1RpdGxlID0gZXN0YWJsaXNobWVudC5kb2NUaXRsZSB8fCAiQnVsbGV0aW4gZCdpbmZvcm1hdGlvbiI7CiAgICAgICAgICAgIGNvbnN0IGRvY0Zvb3RlciA9IGVzdGFibGlzaG1lbnQuZG9jRm9vdGVyIHx8ICIiOwoKICAgICAgICAgICAgLy8gQXBwbHkgZm9udCB0byBjb250YWluZXIKICAgICAgICAgICAgY29udGFpbmVyLmNsYXNzTmFtZSA9IGBhNC1wYWdlICR7Zm9udENsYXNzfSBsYXlvdXQtJHtsYXlvdXR9YDsKCiAgICAgICAgICAgIGNvbnN0IG51bSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdiaS1udW1iZXInKS52YWx1ZTsKICAgICAgICAgICAgY29uc3Qgc3RhcnRWYWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYmktZGF0ZS1zdGFydCcpLnZhbHVlOwogICAgICAgICAgICBjb25zdCBlbmRWYWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYmktZGF0ZS1lbmQnKS52YWx1ZTsKICAgICAgICAgICAgY29uc3QgcHViRGF0ZVZhbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdiaS1wdWItZGF0ZScpLnZhbHVlOwogICAgICAgICAgICBjb25zdCBzaWduYXRvcnkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYmktc2lnbmF0b3J5JykudmFsdWU7CiAgICAgICAgICAgIGNvbnN0IHRoZW1lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2JpLXRoZW1lJykudmFsdWUgfHwgJ2JsdWUnOwogICAgICAgICAgICAKICAgICAgICAgICAgLy8gVEhFTUUgQ09ORklHCiAgICAgICAgICAgIGNvbnN0IHRoZW1lQ29uZmlnID0gewogICAgICAgICAgICAgICAgYmx1ZTogIHsgbWFpbjogJ3RleHQtYmx1ZS05MDAnLCBib3JkZXI6ICdib3JkZXItYmx1ZS04MDAnLCBiYWRnZTogJ2JnLWJsdWUtODAwJywgc3ViQm9yZGVyOiAnYm9yZGVyLWJsdWUtMTAwJywgYWNjZW50OiAndGV4dC1vcmFuZ2UtNjAwJywgdGl0bGU6ICd0ZXh0LWJsdWUtOTAwJyB9LAogICAgICAgICAgICAgICAgcmVkOiAgIHsgbWFpbjogJ3RleHQtcmVkLTkwMCcsICBib3JkZXI6ICdib3JkZXItcmVkLTgwMCcsICBiYWRnZTogJ2JnLXJlZC04MDAnLCAgc3ViQm9yZGVyOiAnYm9yZGVyLXJlZC0xMDAnLCAgYWNjZW50OiAndGV4dC1zbGF0ZS02MDAnLCAgdGl0bGU6ICd0ZXh0LXJlZC05MDAnIH0sCiAgICAgICAgICAgICAgICBncmVlbjogeyBtYWluOiAndGV4dC1lbWVyYWxkLTkwMCcsIGJvcmRlcjogJ2JvcmRlci1lbWVyYWxkLTgwMCcsIGJhZGdlOiAnYmctZW1lcmFsZC04MDAnLCBzdWJCb3JkZXI6ICdib3JkZXItZW1lcmFsZC0xMDAnLCBhY2NlbnQ6ICd0ZXh0LWVtZXJhbGQtNjAwJywgdGl0bGU6ICd0ZXh0LWdyZWVuLTkwMCcgfSwKICAgICAgICAgICAgICAgIGdyZXk6ICB7IG1haW46ICd0ZXh0LXNsYXRlLTkwMCcsIGJvcmRlcjogJ2JvcmRlci1zbGF0ZS04MDAnLCBiYWRnZTogJ2JnLXNsYXRlLTgwMCcsIHN1YkJvcmRlcjogJ2JvcmRlci1zbGF0ZS0yMDAnLCBhY2NlbnQ6ICd0ZXh0LXNsYXRlLTUwMCcsIHRpdGxlOiAndGV4dC1zbGF0ZS05MDAnIH0sCiAgICAgICAgICAgICAgICBwdXJwbGU6eyBtYWluOiAndGV4dC1wdXJwbGUtOTAwJywgYm9yZGVyOiAnYm9yZGVyLXB1cnBsZS04MDAnLCBiYWRnZTogJ2JnLXB1cnBsZS04MDAnLCBzdWJCb3JkZXI6ICdib3JkZXItcHVycGxlLTEwMCcsIGFjY2VudDogJ3RleHQtcGluay02MDAnLCB0aXRsZTogJ3RleHQtcHVycGxlLTkwMCcgfQogICAgICAgICAgICB9OwogICAgICAgICAgICBjb25zdCB0ID0gdGhlbWVDb25maWdbdGhlbWVdIHx8IHRoZW1lQ29uZmlnLmJsdWU7CgogICAgICAgICAgICBjb25zdCBzdGFydCA9IHBhcnNlTG9jYWxEYXRlKHN0YXJ0VmFsKTsKICAgICAgICAgICAgY29uc3QgZW5kID0gcGFyc2VMb2NhbERhdGUoZW5kVmFsKTsKICAgICAgICAgICAgY29uc3QgcHViRGF0ZU9iaiA9IHBhcnNlTG9jYWxEYXRlKHB1YkRhdGVWYWwpOwogICAgICAgICAgICBjb25zdCBvcHRpb25zTW9udGggPSB7IG1vbnRoOiAnbG9uZycgfTsKICAgICAgICAgICAgCiAgICAgICAgICAgIGxldCBwdWJEYXRlU3RyID0gIiI7CiAgICAgICAgICAgIGlmKHB1YkRhdGVPYmopIHsKICAgICAgICAgICAgICAgICBjb25zdCBkID0gcHViRGF0ZU9iai5nZXREYXRlKCk7CiAgICAgICAgICAgICAgICAgY29uc3QgbSA9IHB1YkRhdGVPYmoudG9Mb2NhbGVEYXRlU3RyaW5nKCdmci1GUicsIG9wdGlvbnNNb250aCk7CiAgICAgICAgICAgICAgICAgY29uc3QgeSA9IHB1YkRhdGVPYmouZ2V0RnVsbFllYXIoKTsKICAgICAgICAgICAgICAgICBwdWJEYXRlU3RyID0gYCR7ZH0mbmJzcDske219Jm5ic3A7JHt5fWA7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgY29uc3QgdCA9IG5ldyBEYXRlKCk7CiAgICAgICAgICAgICAgICAgcHViRGF0ZVN0ciA9IGAke3QuZ2V0RGF0ZSgpfSZuYnNwOyR7dC50b0xvY2FsZURhdGVTdHJpbmcoJ2ZyLUZSJywgb3B0aW9uc01vbnRoKX0mbmJzcDske3QuZ2V0RnVsbFllYXIoKX1gOwogICAgICAgICAgICB9CgogICAgICAgICAgICBsZXQgZGF0ZVN0ciA9ICJTZW1haW5lIGR1IC4uLiI7CiAgICAgICAgICAgIGlmIChzdGFydCAmJiBlbmQgJiYgIWlzTmFOKHN0YXJ0KSkgewogICAgICAgICAgICAgICAgIGNvbnN0IHN0YXJ0RGF5ID0gc3RhcnQuZ2V0RGF0ZSgpOwogICAgICAgICAgICAgICAgIGNvbnN0IHN0YXJ0TW9udGggPSBzdGFydC50b0xvY2FsZURhdGVTdHJpbmcoJ2ZyLUZSJywgb3B0aW9uc01vbnRoKTsKICAgICAgICAgICAgICAgICBjb25zdCBlbmREYXkgPSBlbmQuZ2V0RGF0ZSgpOwogICAgICAgICAgICAgICAgIGNvbnN0IGVuZE1vbnRoID0gZW5kLnRvTG9jYWxlRGF0ZVN0cmluZygnZnItRlInLCBvcHRpb25zTW9udGgpOwogICAgICAgICAgICAgICAgIGNvbnN0IGVuZFllYXIgPSBlbmQuZ2V0RnVsbFllYXIoKTsKICAgICAgICAgICAgICAgICBkYXRlU3RyID0gYER1Jm5ic3A7JHtzdGFydERheX0mbmJzcDske3N0YXJ0TW9udGh9Jm5ic3A7YXUmbmJzcDske2VuZERheX0mbmJzcDske2VuZE1vbnRofSZuYnNwOyR7ZW5kWWVhcn1gOwogICAgICAgICAgICB9CgogICAgICAgICAgICBjb25zdCBncm91cGVkID0ge307CiAgICAgICAgICAgIGN1cnJlbnRJdGVtcy5mb3JFYWNoKGl0ZW0gPT4geyBpZighZ3JvdXBlZFtpdGVtLmNhdGVnb3J5XSkgZ3JvdXBlZFtpdGVtLmNhdGVnb3J5XSA9IFtdOyBncm91cGVkW2l0ZW0uY2F0ZWdvcnldLnB1c2goaXRlbSk7IH0pOwoKICAgICAgICAgICAgLy8gLS0tIERZTkFNSUMgSEVBREVSIEdFTkVSQVRJT04gLS0tCiAgICAgICAgICAgIGxldCBoZWFkZXJIdG1sID0gJyc7CgogICAgICAgICAgICAvLyBIYW5kbGUgbGluZSBicmVhayByZXBsYWNlbWVudCBpbiB0aXRsZSBpZiBuZWVkZWQsIGJ1dCBmbGV4IHdyYXAgaGFuZGxlcyBzdGFuZGFyZCBzcGFjZXMuCiAgICAgICAgICAgIC8vIElmIHVzZXIgdHlwZXMgPGJyPiwgaXQgd2lsbCByZW5kZXIuCiAgICAgICAgICAgIAogICAgICAgICAgICBpZihsYXlvdXQgPT09ICdtb2Rlcm4nKSB7CiAgICAgICAgICAgICAgICAvLyBDRU5UUsOJCiAgICAgICAgICAgICAgICBoZWFkZXJIdG1sID0gYAogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZsZXggZmxleC1jb2wgaXRlbXMtY2VudGVyIHRleHQtY2VudGVyIGhlYWRlci1ibG9jayAke3QuYm9yZGVyfSI+CiAgICAgICAgICAgICAgICAgICAgICAgICR7ZXN0YWJsaXNobWVudC5sb2dvID8gYDxpbWcgc3JjPSIke2VzdGFibGlzaG1lbnQubG9nb30iIGNsYXNzPSJoLTI0IG9iamVjdC1jb250YWluIG1iLTQiIC8+YCA6ICcnfQogICAgICAgICAgICAgICAgICAgICAgICA8aDEgY2xhc3M9InRleHQtM3hsIGZvbnQtYmxhY2sgdXBwZXJjYXNlIHRyYWNraW5nLXdpZGVzdCAke3QudGl0bGV9IG1iLTIgbGVhZGluZy10aWdodCI+JHtkb2NUaXRsZX08L2gxPgogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJ0ZXh0LXhsIGZvbnQtYm9sZCB0ZXh0LXNsYXRlLTcwMCBtYi0yIj4ke2VzdGFibGlzaG1lbnQubmFtZX08L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTMgdGV4dC1zbSB0ZXh0LXNsYXRlLTUwMCBmb250LW1lZGl1bSBiZy1zbGF0ZS01MCBweC00IHB5LTEgcm91bmRlZC1mdWxsIGJvcmRlciBib3JkZXItc2xhdGUtMTAwIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuPk7CsCR7bnVtfTwvc3Bhbj4gPHNwYW4gY2xhc3M9InRleHQtc2xhdGUtMzAwIj7igKI8L3NwYW4+IDxzcGFuPiR7ZGF0ZVN0cn08L3NwYW4+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgYDsKICAgICAgICAgICAgfSBlbHNlIGlmIChsYXlvdXQgPT09ICdiYW5uZXInKSB7CiAgICAgICAgICAgICAgICAvLyBCQU5ERUFVCiAgICAgICAgICAgICAgICBoZWFkZXJIdG1sID0gYAogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImhlYWRlci1ibG9jayI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9IiR7dC5iYWRnZX0gcC02IHRleHQtd2hpdGUgZmxleCBqdXN0aWZ5LWJldHdlZW4gaXRlbXMtY2VudGVyIHJvdW5kZWQtdC14bCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDEgY2xhc3M9InRleHQtMnhsIGZvbnQtYmxhY2sgdXBwZXJjYXNlIHRyYWNraW5nLXdpZGVzdCBtYi0xIj4ke2RvY1RpdGxlfTwvaDE+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzPSJvcGFjaXR5LTkwIHRleHQtc20gZm9udC1tZWRpdW0iPk7CsCR7bnVtfSDigKIgJHtkYXRlU3RyfTwvcD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgJHtlc3RhYmxpc2htZW50LmxvZ28gPyBgPGltZyBzcmM9IiR7ZXN0YWJsaXNobWVudC5sb2dvfSIgY2xhc3M9ImgtMTYgdy0xNiBvYmplY3QtY29udGFpbiBiZy13aGl0ZSByb3VuZGVkLWxnIHAtMSBzaGFkb3ctc20iIC8+YCA6ICcnfQogICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iYmctc2xhdGUtNTAgcC0zIGJvcmRlci14IGJvcmRlci1iIGJvcmRlci1zbGF0ZS0yMDAgdGV4dC1jZW50ZXIgdGV4dC14cyBmb250LWJvbGQgdXBwZXJjYXNlIHRleHQtc2xhdGUtNTAwIHRyYWNraW5nLXdpZGUgcm91bmRlZC1iLXhsIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICR7ZXN0YWJsaXNobWVudC5uYW1lfSDigKIgJHtlc3RhYmxpc2htZW50LmFkZHJlc3N9CiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgYDsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIC8vIENMQVNTSUMgKERlZmF1bHQpCiAgICAgICAgICAgICAgICBoZWFkZXJIdG1sID0gYAogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZsZXgganVzdGlmeS1iZXR3ZWVuIGl0ZW1zLWVuZCBoZWFkZXItYmxvY2sgJHt0LmJvcmRlcn0iPgogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJ3LTEvMiBmbGV4IGZsZXgtY29sIGl0ZW1zLXN0YXJ0Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICR7ZXN0YWJsaXNobWVudC5sb2dvID8gYDxpbWcgc3JjPSIke2VzdGFibGlzaG1lbnQubG9nb30iIGNsYXNzPSJoLTI0IG9iamVjdC1jb250YWluIG1iLTMiIC8+YCA6ICcnfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3M9ImZvbnQtYm9sZCB0ZXh0LXNsYXRlLTkwMCB0ZXh0LWxnIGxlYWRpbmctdGlnaHQiPiR7ZXN0YWJsaXNobWVudC5uYW1lfTwvcD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzPSJ0ZXh0LXNtIHRleHQtc2xhdGUtNjAwIj4ke2VzdGFibGlzaG1lbnQuYWRkcmVzc308L3A+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJ3LTEvMiB0ZXh0LXJpZ2h0Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMSBjbGFzcz0idGV4dC0zeGwgZm9udC1ib2xkIHVwcGVyY2FzZSB0cmFja2luZy13aWRlc3QgJHt0LnRpdGxlfSBsZWFkaW5nLXRpZ2h0IG1iLTIiPiR7ZG9jVGl0bGV9PC9oMT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InRleHQtNHhsIGZvbnQtYmxhY2sgdGV4dC1zbGF0ZS04MDAiPk7CsCR7bnVtfTwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3M9Im10LTIgZm9udC1tZWRpdW0gJHt0LmFjY2VudH0iPiR7ZGF0ZVN0cn08L3A+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgYDsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgbGV0IGh0bWwgPSBoZWFkZXJIdG1sOwoKICAgICAgICAgICAgbGV0IGNvdW50ZXIgPSAxOwogICAgICAgICAgICBtYXN0ZXJDYXRlZ29yaWVzLmZvckVhY2goY2F0ID0+IHsKICAgICAgICAgICAgICAgIGNvbnN0IGl0ZW1zID0gZ3JvdXBlZFtjYXRdOwogICAgICAgICAgICAgICAgaWYoaXRlbXMgJiYgaXRlbXMubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgICAgICAgIGh0bWwgKz0gYAogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJtYi02IGJyZWFrLWluc2lkZS1hdm9pZCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDIgY2xhc3M9InRleHQtbGcgZm9udC1ib2xkICR7dC5tYWlufSBib3JkZXItYiAke3Quc3ViQm9yZGVyfSBwYi0xIG1iLTMgdXBwZXJjYXNlIGZsZXggaXRlbXMtY2VudGVyIGdhcC0yIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz0iJHt0LmJhZGdlfSB0ZXh0LXdoaXRlIHctNiBoLTYgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgcm91bmRlZC1mdWxsIHRleHQteHMgZm9udC1ib2xkIj4ke2NvdW50ZXJ9PC9zcGFuPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR7Y2F0fQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9oMj4KICAgICAgICAgICAgICAgICAgICBgOwogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIGlmKGNhdC5pbmNsdWRlcygnQUdFTkRBJykpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaHRtbCArPSBgPHRhYmxlIGNsYXNzPSJ3LWZ1bGwgdGV4dC1zbSBib3JkZXItY29sbGFwc2UiPmA7CiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1zLmZvckVhY2goaXRlbSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkaXNwbGF5RGF0ZSA9IGZvcm1hdERhdGVGb3JEaXNwbGF5KGl0ZW0uZGF0ZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBodG1sICs9IGAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dHIgY2xhc3M9ImJvcmRlci1iIGJvcmRlci1zbGF0ZS0xMDAiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQgY2xhc3M9InB5LTIgZm9udC1ib2xkICR7dC5hY2NlbnR9IHctMS80IGFsaWduLXRvcCB1cHBlcmNhc2UgdGV4dC14cyB0cmFja2luZy13aWRlIGNhcGl0YWxpemUiPiR7ZGlzcGxheURhdGUgfHwgJyd9PC90ZD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIGNsYXNzPSJweS0yIGFsaWduLXRvcCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmb250LWJvbGQgdGV4dC1zbGF0ZS04MDAiPiR7aXRlbS50aXRsZX08L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InRleHQtc2xhdGUtNjAwIHRleHQteHMgbXQtMSByaWNoLXRleHQtY29udGVudCI+JHtpdGVtLmNvbnRlbnR9PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90cj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGA7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICBodG1sICs9IGA8L3RhYmxlPmA7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgaXRlbXMuZm9yRWFjaChpdGVtID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGRpc3BsYXlEYXRlID0gZm9ybWF0RGF0ZUZvckRpc3BsYXkoaXRlbS5kYXRlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGRhdGVIdG1sID0gZGlzcGxheURhdGUgPyBgPHNwYW4gY2xhc3M9IiR7dC5hY2NlbnR9IGZvbnQtYm9sZCBtci0xIHRleHQteHMgdXBwZXJjYXNlIHRyYWNraW5nLXdpZGUgY2FwaXRhbGl6ZSI+WyR7ZGlzcGxheURhdGV9XTwvc3Bhbj5gIDogJyc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBodG1sICs9IGAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJtYi0zIHBsLTQgYm9yZGVyLWwtNCBib3JkZXItc2xhdGUtMTAwIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHtpdGVtLnRpdGxlID8gYDxkaXYgY2xhc3M9ImZvbnQtYm9sZCB0ZXh0LXNsYXRlLTgwMCB0ZXh0LXNtIG1iLTEiPiR7ZGF0ZUh0bWx9JHtpdGVtLnRpdGxlfTwvZGl2PmAgOiAnJ30KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0idGV4dC1zbSB0ZXh0LXNsYXRlLTcwMCB0ZXh0LWp1c3RpZnkgbGVhZGluZy1yZWxheGVkIHJpY2gtdGV4dC1jb250ZW50Ij4keyFpdGVtLnRpdGxlID8gZGF0ZUh0bWwgOiAnJ30ke2l0ZW0uY29udGVudH08L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGA7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBodG1sICs9IGA8L2Rpdj5gOwogICAgICAgICAgICAgICAgICAgIGNvdW50ZXIrKzsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAvLyBTaWduYXRhaXJlCiAgICAgICAgICAgIGh0bWwgKz0gYAogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ibXQtMTIgcHQtNCBib3JkZXItdC0yIGJvcmRlci1zbGF0ZS0xMDAgYnJlYWstaW5zaWRlLWF2b2lkIGZsZXgganVzdGlmeS1lbmQiPgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InRleHQtcmlnaHQiPgogICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzcz0iZm9udC1ib2xkIHRleHQtc2xhdGUtODAwIG1iLTEiPkZhaXQgbGUgOiAke3B1YkRhdGVTdHJ9PC9wPgogICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzcz0idGV4dC1zbGF0ZS02MDAgdGV4dC1zbSBpdGFsaWMiPnBhciAke3NpZ25hdG9yeX0sPC9wPgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIGA7CiAgICAgICAgICAgIAogICAgICAgICAgICAvLyBGb290ZXIgRml4ZSAoQ3VzdG9tKQogICAgICAgICAgICBpZihkb2NGb290ZXIpIHsKICAgICAgICAgICAgICAgIGh0bWwgKz0gYDxkaXYgY2xhc3M9InBkZi1mb290ZXItZml4ZWQiPiR7ZG9jRm9vdGVyfTwvZGl2PmA7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGNvbnRhaW5lci5pbm5lckhUTUwgPSBodG1sOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gZ2VuZXJhdGVQREYoKSB7CiAgICAgICAgICAgIGlmICh0eXBlb2YgaHRtbDJwZGYgPT09ICd1bmRlZmluZWQnKSB7IGFsZXJ0KCdMZSBtb2R1bGUgUERGIGVzdCBlbiBjb3VycyBkZSBjaGFyZ2VtZW50LiBSw6llc3NheWV6IGRhbnMgcXVlbHF1ZXMgc2Vjb25kZXMuJyk7IHJldHVybjsgfQogICAgICAgICAgICBjb25zdCBlbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BkZi1jb250ZW50Jyk7CiAgICAgICAgICAgIGNvbnN0IG51bSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdiaS1udW1iZXInKS52YWx1ZTsKICAgICAgICAgICAgY29uc3Qgb3B0ID0gewogICAgICAgICAgICAgICAgbWFyZ2luOiAgICAgICAwLAogICAgICAgICAgICAgICAgZmlsZW5hbWU6ICAgICBgQklfTiR7bnVtfV8ke25ldyBEYXRlKCkudG9JU09TdHJpbmcoKS5zbGljZSgwLDEwKX0ucGRmYCwKICAgICAgICAgICAgICAgIGltYWdlOiAgICAgICAgeyB0eXBlOiAnanBlZycsIHF1YWxpdHk6IDAuOTggfSwKICAgICAgICAgICAgICAgIGh0bWwyY2FudmFzOiAgeyBzY2FsZTogMiB9LAogICAgICAgICAgICAgICAganNQREY6ICAgICAgICB7IHVuaXQ6ICdtbScsIGZvcm1hdDogJ2E0Jywgb3JpZW50YXRpb246ICdwb3J0cmFpdCcgfQogICAgICAgICAgICB9OwogICAgICAgICAgICBodG1sMnBkZigpLnNldChvcHQpLmZyb20oZWxlbWVudCkuc2F2ZSgpOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gZ2VuZXJhdGVET0NYKCkgewogICAgICAgICAgICBpZiAodHlwZW9mIGh0bWxEb2N4ID09PSAndW5kZWZpbmVkJykgeyBhbGVydCgnTGUgbW9kdWxlIFdvcmQgZXN0IGVuIGNvdXJzIGRlIGNoYXJnZW1lbnQuIFLDqWVzc2F5ZXogZGFucyBxdWVscXVlcyBzZWNvbmRlcy4nKTsgcmV0dXJuOyB9CiAgICAgICAgICAgIGNvbnN0IGNvbnRlbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGRmLWNvbnRlbnQnKS5jbG9uZU5vZGUodHJ1ZSk7CiAgICAgICAgICAgIGNvbnN0IGNzc1dvcmQgPSBgCiAgICAgICAgICAgICAgICA8c3R5bGU+CiAgICAgICAgICAgICAgICAgICAgYm9keSB7IGZvbnQtZmFtaWx5OiAnQXJpYWwnLCBzYW5zLXNlcmlmOyBmb250LXNpemU6IDExcHQ7IGxpbmUtaGVpZ2h0OiAxLjU7IGNvbG9yOiAjMWUyOTNiOyB9CiAgICAgICAgICAgICAgICAgICAgaDEgeyBjb2xvcjogIzFlNDBhZjsgZm9udC1zaXplOiAyMHB0OyB0ZXh0LXRyYW5zZm9ybTogdXBwZXJjYXNlOyBmb250LXdlaWdodDogYm9sZDsgbWFyZ2luLWJvdHRvbTogNXB4OyB9CiAgICAgICAgICAgICAgICAgICAgaDIgeyBjb2xvcjogIzFlNDBhZjsgZm9udC1zaXplOiAxNHB0OyBib3JkZXItYm90dG9tOiAycHggc29saWQgI2JmZGJmZTsgcGFkZGluZy1ib3R0b206IDVweDsgbWFyZ2luLXRvcDogMTVweDsgbWFyZ2luLWJvdHRvbTogMTBweDsgdGV4dC10cmFuc2Zvcm06IHVwcGVyY2FzZTsgfQogICAgICAgICAgICAgICAgICAgIC5oZWFkZXItYmxvY2sgeyBtYXJnaW4tYm90dG9tOiAyMHB4OyBib3JkZXItYm90dG9tOiAycHggc29saWQgIzFkNGVkODsgcGFkZGluZy1ib3R0b206IDEwcHg7IH0KICAgICAgICAgICAgICAgICAgICBwIHsgbWFyZ2luLWJvdHRvbTogOHB4OyB9CiAgICAgICAgICAgICAgICAgICAgdGFibGUgeyB3aWR0aDogMTAwJTsgYm9yZGVyLWNvbGxhcHNlOiBjb2xsYXBzZTsgbWFyZ2luLWJvdHRvbTogMTVweDsgfQogICAgICAgICAgICAgICAgICAgIHRkIHsgcGFkZGluZzogNnB4OyB2ZXJ0aWNhbC1hbGlnbjogdG9wOyBib3JkZXItYm90dG9tOiAxcHggc29saWQgI2UyZThmMDsgfQogICAgICAgICAgICAgICAgICAgIC5mb250LWJvbGQgeyBmb250LXdlaWdodDogYm9sZDsgfQogICAgICAgICAgICAgICAgICAgIC5pdGFsaWMgeyBmb250LXN0eWxlOiBpdGFsaWM7IH0KICAgICAgICAgICAgICAgICAgICAudGV4dC1yaWdodCB7IHRleHQtYWxpZ246IHJpZ2h0OyB9CiAgICAgICAgICAgICAgICAgICAgLnRleHQtY2VudGVyIHsgdGV4dC1hbGlnbjogY2VudGVyOyB9CiAgICAgICAgICAgICAgICAgICAgLnVwcGVyY2FzZSB7IHRleHQtdHJhbnNmb3JtOiB1cHBlcmNhc2U7IH0KICAgICAgICAgICAgICAgICAgICAudGV4dC1ibHVlLTkwMCB7IGNvbG9yOiAjMWUzYThhOyB9CiAgICAgICAgICAgICAgICAgICAgLnRleHQtb3JhbmdlLTYwMCB7IGNvbG9yOiAjZWE1ODBjOyB9CiAgICAgICAgICAgICAgICAgICAgLnRleHQtc2xhdGUtNTAwIHsgY29sb3I6ICM2NDc0OGI7IH0KICAgICAgICAgICAgICAgICAgICAudGV4dC14cyB7IGZvbnQtc2l6ZTogOXB0OyB9CiAgICAgICAgICAgICAgICAgICAgdWwgeyBtYXJnaW4tbGVmdDogMjBweDsgbGlzdC1zdHlsZS10eXBlOiBkaXNjOyB9CiAgICAgICAgICAgICAgICAgICAgb2wgeyBtYXJnaW4tbGVmdDogMjBweDsgbGlzdC1zdHlsZS10eXBlOiBkZWNpbWFsOyB9CiAgICAgICAgICAgICAgICA8L3N0eWxlPgogICAgICAgICAgICBgOwoKICAgICAgICAgICAgY29uc3QgaHRtbFN0cmluZyA9IGAKICAgICAgICAgICAgICAgIDwhRE9DVFlQRSBodG1sPgogICAgICAgICAgICAgICAgPGh0bWw+CiAgICAgICAgICAgICAgICA8aGVhZD4KICAgICAgICAgICAgICAgICAgICA8bWV0YSBjaGFyc2V0PSJ1dGYtOCI+CiAgICAgICAgICAgICAgICAgICAgJHtjc3NXb3JkfQogICAgICAgICAgICAgICAgPC9oZWFkPgogICAgICAgICAgICAgICAgPGJvZHk+CiAgICAgICAgICAgICAgICAgICAgJHtjb250ZW50LmlubmVySFRNTH0KICAgICAgICAgICAgICAgIDwvYm9keT4KICAgICAgICAgICAgICAgIDwvaHRtbD4KICAgICAgICAgICAgYDsKCiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBjb25zdCBjb252ZXJ0ZWQgPSBodG1sRG9jeC5hc0Jsb2IoaHRtbFN0cmluZywgewogICAgICAgICAgICAgICAgICAgIG9yaWVudGF0aW9uOiAncG9ydHJhaXQnLAogICAgICAgICAgICAgICAgICAgIG1hcmdpbnM6IHsgdG9wOiA3MjAsIHJpZ2h0OiA3MjAsIGJvdHRvbTogNzIwLCBsZWZ0OiA3MjAgfQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIGNvbnN0IG51bSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdiaS1udW1iZXInKS52YWx1ZTsKICAgICAgICAgICAgICAgIHNhdmVBcyhjb252ZXJ0ZWQsIGBCSV9OJHtudW19XyR7bmV3IERhdGUoKS50b0lTT1N0cmluZygpLnNsaWNlKDAsMTApfS5kb2N4YCk7CiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgIGFsZXJ0KCJFcnJldXIgbG9ycyBkZSBsYSBnw6luw6lyYXRpb24gV29yZCA6ICIgKyBlLm1lc3NhZ2UpOwogICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlKTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gZXhwb3J0RGF0YSgpIHsKICAgICAgICAgICAgY29uc3QgZGF0YSA9IHsKICAgICAgICAgICAgICAgIGVzdGFibGlzaG1lbnQsIGJ1bGxldGlucywgCiAgICAgICAgICAgICAgICBjYXRlZ29yaWVzOiBtYXN0ZXJDYXRlZ29yaWVzLAogICAgICAgICAgICAgICAgZXhwb3J0RGF0ZTogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLAogICAgICAgICAgICAgICAgdmVyc2lvbjogImJpYmFzZS12My4wIgogICAgICAgICAgICB9OwogICAgICAgICAgICBjb25zdCBkYXRhU3RyID0gImRhdGE6dGV4dC9qc29uO2NoYXJzZXQ9dXRmLTgsIiArIGVuY29kZVVSSUNvbXBvbmVudChKU09OLnN0cmluZ2lmeShkYXRhKSk7CiAgICAgICAgICAgIGNvbnN0IGRvd25sb2FkQW5jaG9yTm9kZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTsKICAgICAgICAgICAgZG93bmxvYWRBbmNob3JOb2RlLnNldEF0dHJpYnV0ZSgiaHJlZiIsIGRhdGFTdHIpOwogICAgICAgICAgICBkb3dubG9hZEFuY2hvck5vZGUuc2V0QXR0cmlidXRlKCJkb3dubG9hZCIsIGBiaWJhc2Vfc2F1dmVnYXJkZV8ke25ldyBEYXRlKCkudG9JU09TdHJpbmcoKS5zbGljZSgwLDEwKX0uanNvbmApOwogICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGRvd25sb2FkQW5jaG9yTm9kZSk7CiAgICAgICAgICAgIGRvd25sb2FkQW5jaG9yTm9kZS5jbGljaygpOwogICAgICAgICAgICBkb3dubG9hZEFuY2hvck5vZGUucmVtb3ZlKCk7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBpbXBvcnREYXRhKGlucHV0KSB7CiAgICAgICAgICAgIGNvbnN0IGZpbGUgPSBpbnB1dC5maWxlc1swXTsKICAgICAgICAgICAgaWYgKCFmaWxlKSByZXR1cm47CiAgICAgICAgICAgIGNvbnN0IHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7CiAgICAgICAgICAgIHJlYWRlci5vbmxvYWQgPSBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBKU09OLnBhcnNlKGUudGFyZ2V0LnJlc3VsdCk7CiAgICAgICAgICAgICAgICAgICAgaWYoY29uZmlybSgi4pqg77iPIEF0dGVudGlvbiA6IENlbGEgdmEgcmVtcGxhY2VyIHRvdXRlcyB2b3MgZG9ubsOpZXMgYWN0dWVsbGVzIHBhciBjZWxsZXMgZHUgZmljaGllci4gQ29udGludWVyID8iKSkgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YS5lc3RhYmxpc2htZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlc3RhYmxpc2htZW50ID0gZGF0YS5lc3RhYmxpc2htZW50OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2JpYmFzZV9lc3RhYmxpc2htZW50JywgSlNPTi5zdHJpbmdpZnkoZXN0YWJsaXNobWVudCkpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkYXRhLmJ1bGxldGlucykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnVsbGV0aW5zID0gZGF0YS5idWxsZXRpbnM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnYmliYXNlX2J1bGxldGlucycsIEpTT04uc3RyaW5naWZ5KGJ1bGxldGlucykpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkYXRhLmNhdGVnb3JpZXMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hc3RlckNhdGVnb3JpZXMgPSBkYXRhLmNhdGVnb3JpZXM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzYXZlQ2F0ZWdvcmllcygpOwogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGRhdGEuY3VzdG9tQ2F0ZWdvcmllcykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFzdGVyQ2F0ZWdvcmllcyA9IFsuLi5ERUZBVUxUX0NBVEVHT1JJRVMsIC4uLmRhdGEuY3VzdG9tQ2F0ZWdvcmllc107CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzYXZlQ2F0ZWdvcmllcygpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGFsZXJ0KCLinIUgRG9ubsOpZXMgcmVzdGF1csOpZXMgYXZlYyBzdWNjw6hzICEiKTsKICAgICAgICAgICAgICAgICAgICAgICAgbG9jYXRpb24ucmVsb2FkKCk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7IGFsZXJ0KCLinYwgRXJyZXVyIDogTGUgZmljaGllciBzZW1ibGUgaW52YWxpZGUuIik7IH0KICAgICAgICAgICAgfTsKICAgICAgICAgICAgcmVhZGVyLnJlYWRBc1RleHQoZmlsZSk7CiAgICAgICAgICAgIGlucHV0LnZhbHVlID0gJyc7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiByZXNldERhdGEoKSB7CiAgICAgICAgICAgIGlmKGNvbmZpcm0oIuKaoO+4jyBBVFRFTlRJT04gOiBUb3V0IGVmZmFjZXIgPyIpKSB7CiAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2UuY2xlYXIoKTsKICAgICAgICAgICAgICAgIGFsZXJ0KCLimbvvuI8gQXBwbGljYXRpb24gcsOpaW5pdGlhbGlzw6llLiIpOwogICAgICAgICAgICAgICAgbG9jYXRpb24ucmVsb2FkKCk7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIG9wZW5TZXR0aW5ncygpIHsgLyogbW92ZWQgdG8gd3JhcHBlciBBbHQrUCAqLyB9CiAgICAgICAgZnVuY3Rpb24gY2xvc2VTZXR0aW5ncygpIHt9CiAgICAgICAgZnVuY3Rpb24gaGFuZGxlTG9nb1VwbG9hZChpbnB1dCkgeyAvKiBsb2dvIGZyb20gd3JhcHBlciAqLyB9CiAgICAgICAgZnVuY3Rpb24gc2F2ZVNldHRpbmdzKCkgeyAvKiBtb3ZlZCB0byB3cmFwcGVyICovIH0KICAgIAogICAgICAgIC8vIExpc3RlbiBmb3Igc2V0dGluZ3MgZnJvbSBDQURJUiB3cmFwcGVyCiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgIGlmICghZS5kYXRhKSByZXR1cm47CiAgICAgICAgICAgIGlmIChlLmRhdGEudHlwZSA9PT0gJ3BpbG90ZS1zZXR0aW5ncycpIHsKICAgICAgICAgICAgICAgIHZhciBkID0gZS5kYXRhLmRhdGE7CiAgICAgICAgICAgICAgICBpZiAoZC5zY2hvb2wpIGVzdGFibGlzaG1lbnQubmFtZSA9IGQuc2Nob29sOwogICAgICAgICAgICAgICAgaWYgKGQuY2l0eSkgZXN0YWJsaXNobWVudC5hZGRyZXNzID0gZC5jaXR5OwogICAgICAgICAgICAgICAgaWYgKGQubG9nb1NyYykgZXN0YWJsaXNobWVudC5sb2dvID0gZC5sb2dvU3JjOwogICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2JpYmFzZV9lc3RhYmxpc2htZW50JywgSlNPTi5zdHJpbmdpZnkoZXN0YWJsaXNobWVudCkpOwogICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB1cGRhdGVQcmV2aWV3ID09PSAnZnVuY3Rpb24nKSB1cGRhdGVQcmV2aWV3KCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKGUuZGF0YS50eXBlID09PSAnYmliYXNlLXNldHRpbmdzJykgewogICAgICAgICAgICAgICAgdmFyIHMgPSBlLmRhdGEuZGF0YTsKICAgICAgICAgICAgICAgIGlmIChzLmxheW91dCkgZXN0YWJsaXNobWVudC5sYXlvdXQgPSBzLmxheW91dDsKICAgICAgICAgICAgICAgIGlmIChzLmZvbnQpIGVzdGFibGlzaG1lbnQuZm9udCA9IHMuZm9udDsKICAgICAgICAgICAgICAgIGlmIChzLmRlZmF1bHRTaWduYXRvcnkpIGVzdGFibGlzaG1lbnQuZGVmYXVsdFNpZ25hdG9yeSA9IHMuZGVmYXVsdFNpZ25hdG9yeTsKICAgICAgICAgICAgICAgIGlmIChzLmRvY1RpdGxlKSBlc3RhYmxpc2htZW50LmRvY1RpdGxlID0gcy5kb2NUaXRsZTsKICAgICAgICAgICAgICAgIGlmIChzLmRvY0Zvb3RlciAhPT0gdW5kZWZpbmVkKSBlc3RhYmxpc2htZW50LmRvY0Zvb3RlciA9IHMuZG9jRm9vdGVyOwogICAgICAgICAgICAgICAgaWYgKHMubmFtZSkgZXN0YWJsaXNobWVudC5uYW1lID0gcy5uYW1lOwogICAgICAgICAgICAgICAgaWYgKHMuYWRkcmVzcykgZXN0YWJsaXNobWVudC5hZGRyZXNzID0gcy5hZGRyZXNzOwogICAgICAgICAgICAgICAgaWYgKHMubG9nbykgZXN0YWJsaXNobWVudC5sb2dvID0gcy5sb2dvOwogICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2JpYmFzZV9lc3RhYmxpc2htZW50JywgSlNPTi5zdHJpbmdpZnkoZXN0YWJsaXNobWVudCkpOwogICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB1cGRhdGVQcmV2aWV3ID09PSAnZnVuY3Rpb24nKSB1cGRhdGVQcmV2aWV3KCk7CiAgICAgICAgICAgIH0KICAgICAgICB9KTsKICAgIAogICAgICAgIC8vIEZhbGxiYWNrOiBpZiBET01Db250ZW50TG9hZGVkIGFscmVhZHkgZmlyZWQsIHJ1biBpbml0CiAgICAgICAgaWYgKGRvY3VtZW50LnJlYWR5U3RhdGUgPT09ICdjb21wbGV0ZScgfHwgZG9jdW1lbnQucmVhZHlTdGF0ZSA9PT0gJ2ludGVyYWN0aXZlJykgewogICAgICAgICAgICBzZXRUaW1lb3V0KGluaXRBcHAsIDIwMCk7CiAgICAgICAgfQogICAgCiAgICBmdW5jdGlvbiBvcGVuQmlQYXJhbXMoKSB7IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdiaS1wYXJhbXMtbW9kYWwnKS5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnOyB9CiAgICBmdW5jdGlvbiBjbG9zZUJpUGFyYW1zKCkgeyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYmktcGFyYW1zLW1vZGFsJykuc3R5bGUuZGlzcGxheSA9ICdub25lJzsgc2F2ZUN1cnJlbnRCdWxsZXRpbigpOyByZW5kZXJCdWxsZXRpbkxpc3QoKTsgdXBkYXRlUHJldmlldygpOyB9CiAgICB3aW5kb3cub3BlbkJpUGFyYW1zID0gb3BlbkJpUGFyYW1zOwogICAgd2luZG93LmNsb3NlQmlQYXJhbXMgPSBjbG9zZUJpUGFyYW1zOwo8L3NjcmlwdD4KCjxkaXYgaWQ9ImJpLXBhcmFtcy1tb2RhbCIgc3R5bGU9ImRpc3BsYXk6bm9uZTtwb3NpdGlvbjpmaXhlZDtpbnNldDowO2JhY2tncm91bmQ6cmdiYSgwLDAsMCwuNDUpO3otaW5kZXg6OTk5OTthbGlnbi1pdGVtczpjZW50ZXI7anVzdGlmeS1jb250ZW50OmNlbnRlciIgb25jbGljaz0iaWYoZXZlbnQudGFyZ2V0PT09dGhpcyljbG9zZUJpUGFyYW1zKCkiPgo8ZGl2IHN0eWxlPSJiYWNrZ3JvdW5kOiNmZmY7Ym9yZGVyLXJhZGl1czoxNnB4O3BhZGRpbmc6MjRweCAyOHB4O3dpZHRoOjUyMHB4O21heC13aWR0aDo5MnZ3O21heC1oZWlnaHQ6OTB2aDtvdmVyZmxvdy15OmF1dG87Ym94LXNoYWRvdzowIDIwcHggNjBweCByZ2JhKDAsMCwwLC4yNSkiPgo8ZGl2IHN0eWxlPSJkaXNwbGF5OmZsZXg7anVzdGlmeS1jb250ZW50OnNwYWNlLWJldHdlZW47YWxpZ24taXRlbXM6Y2VudGVyO21hcmdpbi1ib3R0b206MThweCI+CjxoMyBzdHlsZT0ibWFyZ2luOjA7Zm9udC1zaXplOjEuMDVyZW07Zm9udC13ZWlnaHQ6NzAwO2NvbG9yOiMxZTI5M2IiPuKame+4jyBQYXJhbcOodHJlcyBkdSBidWxsZXRpbjwvaDM+CjxidXR0b24gb25jbGljaz0iY2xvc2VCaVBhcmFtcygpIiBzdHlsZT0iYmFja2dyb3VuZDpub25lO2JvcmRlcjpub25lO2ZvbnQtc2l6ZToxLjNyZW07Y3Vyc29yOnBvaW50ZXI7Y29sb3I6Izk0YTNiODtwYWRkaW5nOjRweCI+JnRpbWVzOzwvYnV0dG9uPgo8L2Rpdj4KPGRpdiBzdHlsZT0iZGlzcGxheTpncmlkO2dyaWQtdGVtcGxhdGUtY29sdW1uczoxMDBweCAxZnI7Z2FwOjEycHg7bWFyZ2luLWJvdHRvbToxNHB4Ij4KPGRpdj4KPGxhYmVsIHN0eWxlPSJkaXNwbGF5OmJsb2NrO2ZvbnQtc2l6ZTouN3JlbTtmb250LXdlaWdodDo3MDA7Y29sb3I6Izk0YTNiODt0ZXh0LXRyYW5zZm9ybTp1cHBlcmNhc2U7bGV0dGVyLXNwYWNpbmc6LjVweDttYXJnaW4tYm90dG9tOjRweCI+TnVtw6lybzwvbGFiZWw+CjxpbnB1dCB0eXBlPSJudW1iZXIiIGlkPSJiaS1udW1iZXIiIG9uaW5wdXQ9InRyaWdnZXJBdXRvU2F2ZSgpIiBzdHlsZT0id2lkdGg6MTAwJTtwYWRkaW5nOjhweCAxMnB4O2JvcmRlcjoycHggc29saWQgI2YxZjVmOTtib3JkZXItcmFkaXVzOjEwcHg7Zm9udC1zaXplOjFyZW07Zm9udC13ZWlnaHQ6NzAwO2NvbG9yOiMxZTNhNWY7b3V0bGluZTpub25lIiBwbGFjZWhvbGRlcj0iTsKwIj4KPC9kaXY+CjxkaXY+CjxsYWJlbCBzdHlsZT0iZGlzcGxheTpibG9jaztmb250LXNpemU6LjdyZW07Zm9udC13ZWlnaHQ6NzAwO2NvbG9yOiM5NGEzYjg7dGV4dC10cmFuc2Zvcm06dXBwZXJjYXNlO2xldHRlci1zcGFjaW5nOi41cHg7bWFyZ2luLWJvdHRvbTo0cHgiPlDDqXJpb2RlIChTZW1haW5lKTwvbGFiZWw+CjxkaXYgc3R5bGU9ImRpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXI7Z2FwOjZweCI+CjxpbnB1dCB0eXBlPSJkYXRlIiBpZD0iYmktZGF0ZS1zdGFydCIgb25pbnB1dD0idHJpZ2dlckF1dG9TYXZlKCkiIHN0eWxlPSJmbGV4OjE7cGFkZGluZzo4cHggMTBweDtib3JkZXI6MnB4IHNvbGlkICNmMWY1Zjk7Ym9yZGVyLXJhZGl1czoxMHB4O2ZvbnQtc2l6ZTouODVyZW07b3V0bGluZTpub25lIj4KPHNwYW4gc3R5bGU9ImNvbG9yOiNjYmQ1ZTEiPuKGkjwvc3Bhbj4KPGlucHV0IHR5cGU9ImRhdGUiIGlkPSJiaS1kYXRlLWVuZCIgb25pbnB1dD0idHJpZ2dlckF1dG9TYXZlKCkiIHN0eWxlPSJmbGV4OjE7cGFkZGluZzo4cHggMTBweDtib3JkZXI6MnB4IHNvbGlkICNmMWY1Zjk7Ym9yZGVyLXJhZGl1czoxMHB4O2ZvbnQtc2l6ZTouODVyZW07b3V0bGluZTpub25lIj4KPC9kaXY+PC9kaXY+CjwvZGl2Pgo8ZGl2IHN0eWxlPSJkaXNwbGF5OmdyaWQ7Z3JpZC10ZW1wbGF0ZS1jb2x1bW5zOjFmciAxZnI7Z2FwOjEycHg7bWFyZ2luLWJvdHRvbToxNHB4Ij4KPGRpdj4KPGxhYmVsIHN0eWxlPSJkaXNwbGF5OmJsb2NrO2ZvbnQtc2l6ZTouN3JlbTtmb250LXdlaWdodDo3MDA7Y29sb3I6Izk0YTNiODt0ZXh0LXRyYW5zZm9ybTp1cHBlcmNhc2U7bGV0dGVyLXNwYWNpbmc6LjVweDttYXJnaW4tYm90dG9tOjRweCI+RGF0ZSBkZSBwdWJsaWNhdGlvbjwvbGFiZWw+CjxpbnB1dCB0eXBlPSJkYXRlIiBpZD0iYmktcHViLWRhdGUiIG9uaW5wdXQ9InRyaWdnZXJBdXRvU2F2ZSgpIiBzdHlsZT0id2lkdGg6MTAwJTtwYWRkaW5nOjhweCAxMHB4O2JvcmRlcjoycHggc29saWQgI2YxZjVmOTtib3JkZXItcmFkaXVzOjEwcHg7Zm9udC1zaXplOi44NXJlbTtvdXRsaW5lOm5vbmUiPgo8L2Rpdj4KPGRpdj4KPGxhYmVsIHN0eWxlPSJkaXNwbGF5OmJsb2NrO2ZvbnQtc2l6ZTouN3JlbTtmb250LXdlaWdodDo3MDA7Y29sb3I6Izk0YTNiODt0ZXh0LXRyYW5zZm9ybTp1cHBlcmNhc2U7bGV0dGVyLXNwYWNpbmc6LjVweDttYXJnaW4tYm90dG9tOjRweCI+U2lnbmF0YWlyZTwvbGFiZWw+CjxzZWxlY3QgaWQ9ImJpLXNpZ25hdG9yeSIgb25jaGFuZ2U9InRyaWdnZXJBdXRvU2F2ZSgpIiBzdHlsZT0id2lkdGg6MTAwJTtwYWRkaW5nOjhweCAxMHB4O2JvcmRlcjoycHggc29saWQgI2YxZjVmOTtib3JkZXItcmFkaXVzOjEwcHg7Zm9udC1zaXplOi44NXJlbTtvdXRsaW5lOm5vbmU7YmFja2dyb3VuZDojZmZmIj4KPG9wdGlvbiB2YWx1ZT0iTCfDqXF1aXBlIGRlIGRpcmVjdGlvbiI+TCfDqXF1aXBlIGRlIGRpcmVjdGlvbjwvb3B0aW9uPgo8b3B0aW9uIHZhbHVlPSJMZSBwcm92aXNldXIiPkxlIHByb3Zpc2V1cjwvb3B0aW9uPgo8b3B0aW9uIHZhbHVlPSJMZSBwcm92aXNldXIgYWRqb2ludCI+TGUgcHJvdmlzZXVyIGFkam9pbnQ8L29wdGlvbj4KPG9wdGlvbiB2YWx1ZT0iTGEgZGlyZWN0aW9uIj5MYSBkaXJlY3Rpb248L29wdGlvbj4KPC9zZWxlY3Q+PC9kaXY+CjwvZGl2Pgo8ZGl2IHN0eWxlPSJtYXJnaW4tYm90dG9tOjE2cHgiPgo8bGFiZWwgc3R5bGU9ImRpc3BsYXk6YmxvY2s7Zm9udC1zaXplOi43cmVtO2ZvbnQtd2VpZ2h0OjcwMDtjb2xvcjojOTRhM2I4O3RleHQtdHJhbnNmb3JtOnVwcGVyY2FzZTtsZXR0ZXItc3BhY2luZzouNXB4O21hcmdpbi1ib3R0b206NHB4Ij5UaMOobWUgLyBDb3VsZXVycyBQREY8L2xhYmVsPgo8c2VsZWN0IGlkPSJiaS10aGVtZSIgb25jaGFuZ2U9InRyaWdnZXJBdXRvU2F2ZSgpIiBzdHlsZT0id2lkdGg6MTAwJTtwYWRkaW5nOjhweCAxMHB4O2JvcmRlcjoycHggc29saWQgI2YxZjVmOTtib3JkZXItcmFkaXVzOjEwcHg7Zm9udC1zaXplOi44NXJlbTtvdXRsaW5lOm5vbmU7YmFja2dyb3VuZDojZmZmIj4KPG9wdGlvbiB2YWx1ZT0iYmx1ZSI+8J+UtSBCbGV1IEluc3RpdHV0aW9ubmVsPC9vcHRpb24+CjxvcHRpb24gdmFsdWU9ImdyZWVuIj7wn5+iIFZlcnQgTmF0dXJlPC9vcHRpb24+CjxvcHRpb24gdmFsdWU9InB1cnBsZSI+8J+foyBWaW9sZXQgQ3LDqWF0aWY8L29wdGlvbj4KPG9wdGlvbiB2YWx1ZT0icmVkIj7wn5S0IFJvdWdlIMOJbmVyZ2llPC9vcHRpb24+CjxvcHRpb24gdmFsdWU9Im9yYW5nZSI+8J+foCBPcmFuZ2UgRHluYW1pcXVlPC9vcHRpb24+CjxvcHRpb24gdmFsdWU9InRlYWwiPvCfkqAgVHVycXVvaXNlIE1vZGVybmU8L29wdGlvbj4KPG9wdGlvbiB2YWx1ZT0iZ3JleSI+4pqrIFNvYnJpw6l0w6kgKE4mQik8L29wdGlvbj4KPC9zZWxlY3Q+PC9kaXY+CjxkaXYgc3R5bGU9InRleHQtYWxpZ246cmlnaHQiPgo8YnV0dG9uIG9uY2xpY2s9ImNsb3NlQmlQYXJhbXMoKSIgc3R5bGU9InBhZGRpbmc6OHB4IDIwcHg7YmFja2dyb3VuZDojM2I4MmY2O2NvbG9yOiNmZmY7Ym9yZGVyOm5vbmU7Ym9yZGVyLXJhZGl1czoxMHB4O2ZvbnQtd2VpZ2h0OjYwMDtjdXJzb3I6cG9pbnRlcjtmb250LXNpemU6Ljg1cmVtIj7inJMgRmVybWVyPC9idXR0b24+CjwvZGl2Pgo8L2Rpdj48L2Rpdj4KCjwvYm9keT4KPC9odG1sPg==", "dhg": "PCFET0NUWVBFIGh0bWw+CjxodG1sIGxhbmc9ImZyIj48aGVhZD4KPG1ldGEgaHR0cC1lcXVpdj0iY29udGVudC10eXBlIiBjb250ZW50PSJ0ZXh0L2h0bWw7IGNoYXJzZXQ9VVRGLTgiPgogICAgPG1ldGEgY2hhcnNldD0iVVRGLTgiPgogICAgPG1ldGEgbmFtZT0idmlld3BvcnQiIGNvbnRlbnQ9IndpZHRoPWRldmljZS13aWR0aCwgaW5pdGlhbC1zY2FsZT0xLjAiPgogICAgPHRpdGxlPkdlc3Rpb24gZGUgbGEgREhHPC90aXRsZT4KICAgIAkgICAgPGxpbmsgcmVsPSJpY29uIiB0eXBlPSJpbWFnZS9wbmciIGhyZWY9ImRhdGE6aW1hZ2UvcG5nO2Jhc2U2NCxpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBU0FBQUFFZ0NBWUFBQUFVZzY2QUFBQUFCSE5DU1ZRSUNBZ0lmQWhraUFBQUFGOTZWRmgwVW1GM0lIQnliMlpwYkdVZ2RIbHdaU0JCVUZBeEFBQUltZU5LVDgxTExjcE1WaWdveWsvTHpFbmxVZ0FEWXhNdUUwc1RTNk5FQXdNREN3TUlNRFF3TURZRWtrWkF0amxVS05FQUJaZ2FtRm1hR1pzWm1nTXhpTThGQUVpMkZNazYxRU15QUFBZ0FFbEVRVlI0bk8zZGQzd1VSZjhIOE05c3VjdWxGMUlJdlJONkV3c0tpb2dnUGhZRXdRSTJSRlJFQlZGL0t2cklnMkxGZ2tvVFVGQkFzQmRVVUVTVW9pZ2RsTjU3U0wrNlpYNS9CQ1RFa01iZHplemV2Rjh2bENTYjIyK08zT2RtWjZjQWdpQUlnaUFJZ2lBSWdpQUlnaUFJZ2lBSWdpQUlnaUFJZ2lBSWdpQUlnaUFJVmtOWUZ4QUtkOXc1NWZHWk05THJxSW5VQkFBdEQ5bzl3NHgrdXE2N2ROMmtsQUllandaQ0FIL0FoR0dZb0JUd2VuUVFRaEFJbUFnRXpIK2VuYlRVS01neUFTR0FZVkFZQmtWTWpBcTMyNCsvdHlkanoyRUpzc3p5SjdZbXJZamdxaXR6RU5CMEZCVG9pSGJKaUl0VGtaVGtsQ2gxN3BzOVMvNFpDbkgwdlhiL3ZvRTNQakRqeGdFNHpycG1JYmhzRlVEOStzOXFzV3Uzc25uTm1taW84ZlNNcjJsNXAvNVc2a2VXVHY0QkFMbkU1MG9lRmdCZ2x2aDJBa0FIb0FLU2kwS1dJRlNUNWliRno2ZUM0dWRZQTJBQUFJV2FlUEtZQUlHa1VOdzFjUDg5MDZhT21NcXFWaUg0YkJOQTk5MTNXWlBscTBac1c3K1JRSTJoRlgrRFlDbUdDU1RHR09oL3piN0xwMHdadVlSMVBVSndLS3dMQ0piRlMrNWF1SDJQQ0IrN2tpVWdKMGZCeHMyMWZvU04zamdqblMwdUhsNStlVkpMazBZM0pxb0lIenRUWEJTcjFxdm9mZFhFanF4ckVZTERGZ0dVbTV2V2N1ZFdBa1YwQk5zYUFXQVdTdWpVTWZaRzFyVUl3V0dMQUZMVmdyYXNheERDUkFYMjdjL1dXSmNoQkljdEFzanQ5aHVpV3lCQ3lFQlJrWjkxRlVLUTJDS0EvSDdOSmorSlVDRUpjTHNEcktzUWdzUVdMMXQvUUJjTm9FaGhBRW1KVHRaVkNFRmlpd0FLK0hXYi9DUkNoWFNLcE9TbXJLc1Fnc1FXTDF1ZnVBU0xHR29jOE03YnRobStGdkZzOGJJMVRTb3V3U0xJcVNrYWd2WFpJb0IweldCZGdpQUkxV0NMQUtLQWFBRUpnZ1haSW9BTXc2ejRJRUVRdUdPTEFCSjlRSUpnVGZZSklFRVFMTWNXQWFUcnBtZ0JDWUlGMlNLQUlCcEFnbUJKdGdnZ1RiU0FCTUdTYkJGQVVWSEs2VFdiQlVHd0RGc0VFQkd0SDBHd0pGc0VVTnMyZFFFUDZ5b0VRYWdxV3dSUVdsb2lSRSswSUZpUExRTG8rSEd4UXFjZ1dKRXRBdWo1NTZQRURHbEJzQ0JiQkpBSUgwR3dKbHNFa0NBSTFpUUNTTEFjVFd5S1lSc2lnQVJMMFEzZ3ZMWmk0SmRkaUFBU0xJVjZDVHEwM2NHNkRDRklSQUFKMWlJRHVibCtzUW0zVFlnQUVxeEZwNmhWSy8wdjFtVUl3U0VDU0xBTUxRQzBiNjlod29RaGMxblhJZ1NIQ0NEQkVpZ0ZFQ0JvMjdwb0RDRVFROTl0UXV6d0ZpRzBJZ0Q2eVE4VWN2cGZYc0taYXltVm5sSm5sdkUxV3VKUFdkOW5udnlZbFBGNFpjelpPOXRBVWkwUFFCUUJUQ0NsaG9tTWVublQzcHQ1NTdpeWp4YXNTQVFRSTVxUEFESUFTcUU2QU0wTlFDV0FodUkvb0NCeGdCS0U3bGJORFZ4K21ZbGFtU3Fpb2d6czJ1V0J4K3NCcFlDbW1kRDE0bENnRkpCbEFsa21vSlNDZ0VCVkNVQ0t2NllvcERpcnlNbmpwTlBKcFNoU2liOFRFSW1BbWhTS0lrR1NDQ1NKUUZZSVpFbUNKQUd5TEVGVkpiamQwT2JPa1g1VUU4LzhYZFR5Z0pHakpLeGR1MHRLVHE2eDc5aXhBMU4vV2ZaL0s4LzkyUkI0WW9zQkZXcmlaMk1CakdGZFIyVnBmcUQ3UlVYSGRjUDNSYzJhQ1Q5L05OZDUrUG5uajVEZHUrOUI3ZG8zSVNPaklXcldiS2hlYzgxZDM3S3VWUkJDU1FSUW1HazYwTHB4SUdmanVnRXByR3NSQk5aRUozU1l5VEp3SWxmN2pIVWRnc0FERVVCaFpyZ0pMdTJTbzdLdVF4QjRJQUlvM0hTS2V2VnFPRmlYSVFnOEVBRVVabklDTUh0ZTlBZXM2eEFFSG9nQUNqT0pBQWVPVXJHSmtDQkFCQkFUcXNNZWR4OEY0VnlKQUJJRWdSa1JRSUlnTUNPbVlnaENHT1djcU9mc2VNSFRnenUyaTc4N0x6KzNZVzZ1WnNiRktraE1jaUE5TFJyN0QwUmg0YmNtMUxqVDM2TjVnVXU3RkU5L0tTb3kwYUErQlNIRlUya0lBWXFLTkJ3OTVvT2lFSmdtWUpvVWhrRkJBSmowekoyRFZiWDRtRk9mb2lpZU9nTUtTQktjOGZISmt4WitNK0R4Y0QwZnR1aUxzTkpJNkpQNmFIblhMMlJkaEJCZUkwZStQMlQ3anVocFgzMnBBZ290dmlPaG9IanliZ0RGYWFFQWF1eS92MWZ6blR4T0J1QUZ6bmpweWdDY09EMEJ1TlNYejFEVy9wMzB6QS9xWlFiTUcvdG0zL0x5eS9mUHEveFBWejJpQlNRSVlUQmc0TVJwYjgyTUh4TElCZFRFa3NzS25CUlYvdmVySmIvdUxQVzlRYmIzc0ZQNi9PdjB1U05IdnI1OXdvU0gvZ3paaVNENmdBUWg1RWFNbUQ3a3F4OXFEOUVOYSt4aHB6b290dTlVc0dKVnpOdWhQcGNJSUVFSXNjKytqbm5WNHdka0s3M2FIQlNGN2hydFFuMGFLejBsZ21BNWR3OTk3Zno4SW1lOFlyVlhXZ0JJcTJFNEZ5MTZzVTRvVDJPMXAwVVFMTVhsaXJtaDRCZzU0MDZVRlVoUndQYWRXbmJQbm8vdEQrbDVRdm5nZ2hEcC92Z3pKZ2F4b2Vzd0RoVXpRSkRWMU5nVzZ2T0lBQktFRUNvb3BQMnNPdG9sTHM0WDhoVTVSUUFKUW9pOE4vT1ZHckxzU2l2ZTBzTTZLQVhVS0lxczVybUxRbjB1RVVDQ0VDSy8vYTcxWEw5T2htcXg1ZWYwQXVEcXl3TjQ3cm5SdjRmNlhDS0FCQ0ZFdG02cmt3V1h0Vm8vQUlBWVlPZE8vY2R3bkVvRWtDQ0V5UEVUOGhYRW9xK3cxRlFqNUpkZmdBZ2d3VVltVG56ejhkZGZmNTJiNVc2OVB1VjhTM1kvdXdrdXYreXY3OEp4S2hGQWdrMk1sM2J2ems1NDZLR0hBcXdyQVlDeFkyL0oyckZiaFJ5RWpTWERTZk1ERjF6b3h4TlBqTjhRanZPSkFCSnM0YWFiMHo4dUxHcjJPdXM2VHRtNDZacmVrQ3pZLytNbGFOcllIL0xPNTFORUFBbVdOM3IwazgyOFhpTjkydFJianJLdTVSU1h5M01lL0JhOEFJc0c5dTRMZkJ5dTA0a0FFaXh2NDZZV3Y5U29vVDNNdW82U1BCN0g5YkRZMWdPVUFvbnhKckt5dEMvRGRVNnhIcEJnYWRkZi84SjErdzc0ak8rK3ZTOXNsdzBWT1hRUWpvYXRYVTRsd1ZxWFlMcEcwTENwTnpCNTByMWJ3M1ZPMFFJU0xNM3JyLzlaczZZU1Y2dGhEcm5uNDR0OUFldE5RSVZKVVNOWkNtdVFpd0FTTE92V1FXOU1PSGJjYWM3NThJNTNXZGRTa3FFZjdnWFRhdWtEQUFSSlNlN3Z3M2xHRVVDQ0pYMjdFSTVOVytvKzNMQitRY2hYN2FzcVoxUlNWK2lzcTZnR1NwR1d1bnRHT0U4cEFraXdwSGRuelBqYTR5SDQ3OU9KejdHdXBiVHRPeHdONGJCVy80OVdSSEJsZHpjbVRoeDNLSnpuRlFFa1dNN3c0V1BQVy81NzRoV05HcmgvYWRYNldtNXV2UVBBczg5T1NqSk1PZFZ5L1Q4cW9BWDhQNFQ3dENLQUJNdlpzS254QjBmMnlXamY3cTlIV2RkUzJ2b045Slp0TzJRb0Zoc0JEWk1pTFQxT0JKQWdsT2ZhNjk0WXRHeHBkTk9MdTNxeW4zOSszQ3JXOVpRV0Z4ZDdsZFg2ZnlnRkVoSU0xTWw4ZjBxNHp5MENTTEFNU2lHdjM1VDZOZ2pRdk5rSnJtNjluN0orb3hxRGFHdjEvK2dHVUs4V3pYNzVsVy95d24xdUVVQ0NaWngvNGZUeGUvWkh4elhMQ3RCM3B3MmZ6THFlc2hnRzdXcTVKVmhOZ3NRRTl6SVdweFlCSkZqQ1UwKzlrTDV6WDhKb0dFRGIxdm5jM1hvSGdPRVBQTmwxNCtab3FJcTFXa0R3VUhTNXlCWFc4VCtuaUFBU0xPR3JoYlZubk1oVGtKaGlvbG5UUStOWTExT1dnb0ltdlVDc0ZUNkdBZFJ2WW9CZ1hWZ1dJQ3ROQkpEQXZVY2ZuZGxuOTM3blZUQ0JqbTF5Zi9qZi81N2g2dGI3S1Z1M09iTmdzZldmVFFOSVRkSGR6ejgvZmcrTDg0c0FFcmozM1dMbjFBS1BDdmlBL2pjVWNObjZBUUNYUzdzV3VzWDZmeVJBSWtiWVpyK1hjWHBCNE5lUXUyZU0zcnpMbFFrZDZINTUwZDVod3g3K21YVk5aWG43TGFSdDNocERaS2UxTHNGQWdZeDBqY25sRnlBQ1NPRGNzdVhSTHhrR0FEOXc4Y1VCYmxZOExHM3R1cG1YSGMrV0lGbnRGZVVtdU9mdTZVdzZvQUVSUUFMSHpqdC83dFJ0dTZPZ3lFQnNEUzB3OXRrN3VRMmcvUWNjTFdDeDBjOWFFZEM3VDBDL3FzOHZoMW5WSUFKSTROSmpqOGJXeXM1UjdwWlVDcjBBdU9GcVl5N3Jtc3FqS0w1QjBLelcvMFBnaXNvSitmYkw1WmJBOHVTQ2NEWi9ybjEzNmU0OXhiZVVVak1wdW5YOSsxbkdKWlZyOTk3NGRGaXQvNGNBaXFKK3hySUVFVUFDZDdwYzhtNjNuMWM3R2lzeEZLWUg2Tkk1c1BIT08vKzdtM1ZkWnpOaHdxeG1mKytWb3hVTExYQnNtRUM5MmdhNlh1TC9uR1VkSW9BRURzVXQwWHdFb0VCOE11QjA3dXpQdXFMeXpIeWZYZ0lRUzAzQW9CUndSZm4vSGo3OHZseVdkWWdBRXJneThLYVo0NWYvNHBUVUtFRDNBaGUwOXhaOU5PL0pzQzJTWGgxMTYzaDZtd0VyeFE5QXZVQzdOc1lXMW5XSUFCSzQ4ZGRtT05kdGlIc2NzU2Y3VWlRQ1F0eDNzNjJxWXNlemsxdEF0bGovRHdqUzA3ek1icitmSWdKSTRNYVFleGQ4OHZjT0dhb0NhRHJRdXJrUDMzMTc5d0xXZFZYazhGSFNYTExRTFhoS2djUWFKbXJWK292NW5VVVJRQUlYaGcxN3B2M21yVW9mSmVya0p5aEJmS3puSlVKZ01DMnNBdmNQbjlwci95RUhaQXU5a25RL1FZZVcza09QUHZwYUlldGFMUFMwQ1hhV25kTnFWdDV4Z0JEQXBFQnl2SWs3YjMvcFRkWjFWV1Q3ZHYwOHkyM3ZLUUdLNHYrT2RSbUFDQ0FtdER6QzlidDZ1QTI1ZThxTlcvNVdXOEZWL0xGaEVEU3FtNy80cmlGL0gyUmJXY1ZVTmIwM2RLdjEvd0NKaVlYeldkY0FpQUFLTzYwUXVIKzQxcEYxSFR3NWREaitveTBiS05SVFMxbDRnUjdkRDNNNzY3MmsvUWY4N2F5MEJJZGhBcG1wR3VaLzlDRHpEbWhBQkZENEdRU3lWTlNDZFJtODZIcnArK01XZnUyQ21sajhzYVlSZE9wVWRIRDgrQ2VZTEJGYUZSTW5UbXJpOVVlNXJMUUZqK2tqYU5QU3Y1TjFIYWVJQUFvM0IzRDRTSjY0QkFPd1lNR1lCbDZmNjBtNFNsekMrSUcyclR4ajJWVlZlU3RXbWxuYmQwblcyb0tIVU1SRVM4eVczeWhOQkZDWVNWRVVxOWZVdDlqR0xhRXhmVWF6MmF0WE9hQTZpei9XRGFCNU15K21UeDg2bFcxbGxYTTh1MFl2eTQzL29RUTFNNDZMQUlwVXBrWlFyMDdScGF6cllHM1VxT2xYL0xiVzJVVk9PUDBDcGhyUXBKRmpJc095cWlRajNYOFpQTmE1L2pKTm9IYW1nWWtUSDJRNi82c2tFVUJocGpnb1ZtK0liZmo0LzAwZnhMb1dsaGIvNkppVlc2QkNPdm42TlNrUUc2Zmp5cDQvL3BkcFlaVkVLYVJkdTUzTkVXV2RGcENoRXpTbzUxN0hVNStWMVVZd1dCNGhnRGNBelB3Z2VWWlN4dWR2MVVvL1lkYXBCWktVNUVSQ2dsTlo5YnZ5K2RwTktGU2p5cDdicU9VQi94dEhzV0g5SHZnREJuSnlmSkFrQWtVcFBseFZaUkJTL0g4QVVCUUNRZ2draVVCVlpWQktvY2dTSkptQVVzRHBVQUNDazMrWGl3dWtGQTZuQWtvQmlSQ29EaG1VQW9vaVE1WWxnRklvcWd4WmtrQWtxTXRYeUY5OCt3MHBBSWdUVUg4Qituaktldzd1SGpwNTFMU1pjUmxxek9rWHIxRUE5QmxnN2g0Ky9KMmNvRDNaSWZUMDArUHJyRmlyNHArQmsxWkFBRmx5TDJSZFJra2lnQmhRWkNBN0h5Q0V4bS9hbVlKTm00SGk3WHdwRUl0YjFISitxZFZFWU14VEJIQTBMRzYvbnZvWHBLWCtiNWJ4K2RMSGxEeXU5Ti9QVU1HN2ZDenVSQXpRUHN1SHRYOWNWKzc3SzZXUUd6YU5mNFdVK0JrcEFFUlRSRWZuRHlqL1JQell0cjErTDVqV21nRVBVTFJ2bjdKaTZVK3M2emhOQkJBanA5WU9WaFVLeEZidGU0dHZXZlBWOU5lS0NCbzNwRGV0L2FQODQvcjEvK2pEM2J1Y1VPTk8xNjk3Z0NzdTB3SXpad3hkSGVJeWd5WXZyNkF2cUF1OC9UdWNqV0VDYVVrYVhwdHc0emVzYXlsSjlBRUo1MHp6RVhTOXVIRDNndmszelN2dnVPSDNJMlhwQ21tQUhGdnFSUnNnaUhiNUh3aGxqY0ZtbWdtZFlGb2pmQURBTEFENjlDUy9zYTZqTkJGQXdqbWhGSWlOMVhCZVIzZS9pbzdkczIvZTZoUEhUbmM4QThVancvdjhSOFBVeVlNL0NHV2R3YloyRTBtV1hheXJxSUlvZ3R6Y0FpNUdQNWNrQWtnNEo3cUhvSE03NzRKWFh4MjJwcnpqSG52czlZdStYdWhzb0padS9hZ0VQcDl2YW5vR3l1MjQ1c25OTjc5NGFVNlI4NHdnNVo0UHFGZDNxd2dnd1Q0MEhXaVo1Y2M5ZDh2M1YzVHNiNy9YWEZLNng5RTBnWXhVSDU1K1l0Q0lVTlVZQ2g1ZitnMW1nSFVWbGFkNWdhNlhCdkRHR3krdFlGMUxhU0tBaE9vekNPclU4ajQ2WU1BdHg4czdyT041TTRZc1hlNTBxcVV1V1l3QVFWWlRmWFczeStBUFpabkJscDBkMVFLU2RmcC9RQW5pNDd6TFdaZFJGaEZBUXJVWUpsQ25adURZZDkvZS9uSjV4MzN6RmFKeTgrT25TYVcyckNudU85SVJGN3ZscnBBV0dnSkhqdXFkSk5sQzExOFM0SElWTWQzLzYyeEVBQWxWUmdHWUprRzdWa2NxSE0wOTVkMlpjM2J0VWlDWG1yQ3BCd2phWmdYeXZ2emkrWTBoS2pNa25ucnEwVG9tallxM3l1MTNBSUJDMGJDaGk3ditIMEFFa0ZBTmVoSFFyN2R2eFZkZmppaDNVdU45OXozWjh1dWZFcTlYU25jOEF5QUtoZGViUFRSa1JZWklkbmFUSzhzS1ZGNlpKbEFuTFpELzRndDNWakJDaXcwUlFFS1ZVQXJBUVJIdCtxWEMxcyt5NVcxbm15YitOVnBZMDRCV2pRTDRjL1VJYmlaRlZ0YXZLK05iRUpkMVdqK0dBZFN0WmZ6TXVvNnpFUUVrVkltZVQzRFA0TUtmWjgxNmUxZDV4L1g1ejVUci85cWp0aTl6dDFBTmFOd0kveU1FV29qS0RKbXNadlJLNm1aZFJSVzRDVHEwSy95YmRSbG5Jd0pJcURUZEFPbzMwVEJsOG0yWFZuUnNZV0hTcDRidjM2MGYwd1FTazB3OE43YkFFbXYrbEVRcHlQRnN0TERLQkNiVEJOSnFVN1J1N1puT3VwYXpFUUVrVkJvdEpMaitQMFZ2VkhSY3oxN3YvM2ZaTWdkSzMzWUhBTU5EMFBVQ3o1b1dMZTgrRUlvYVEybml4TmM2TFYwU0JUV2FkU1dWWTJnRURldDZNWFRvdzl0WTEzSTJJb0NFU3RIOEJGMHU5dVM5TnVHT2g4bzdic0tFU2JVTENtS2ZnZlBmL1NRVUFIRlIxS3VuUGg2cU9rUHB1WmZydGxBU3JOUC9BejlGMDhiNGhIVVo1UkVCSkZTSUFvQkIwYTNybnRzcU92YUxyMkttcmxvbC83UE1ha202ajZCckozZk94RGNITGc1K2xhRlhON1B3QnQydzBQZ2ZBSFhxNk53c3Yxb1dFVUJDaGZRQ2d1Nlh1TmMvLy93VFg1WjMzSkFoc3kvKytkZjQzbXI4V1ZvSkFhQm1UZlhGVU5RWUR1bnAwbi9nWlYxRkZSQ0M1T1QxWEE1QVBFVUVrRkF1TFFDMDcwQng3ejNyYjZ6bzJJMmJzZUJzZTJScEd0Q3V2US96NWd4NEtkZzFob1BQZDMvTTEwdmlVTmFZSmg1cGZ1RGlMajcvcUZHdjdtZGRTM2xFQUFubDh4UFVUQzk2dC8rTkw1ZmJrZm40LzgwWS9kdkt1QXpWY1pZWHFKdWdjVU8vWlhjRGVlNzU5bTNpckxUOGhneTQzV1FXNnpJcUlnSklPQ3N0QUxScjU4UGpqeG9QVjNUc2wxL0h2SWh5V2dkU1BNV3lsYkVLcFJaYnhmU2s3NzZQN1Z2b0xWNHkyeExjQkpkME9iQ1ZkUmtWRVFFa2xJa0NrQlNnUWIzQVBWMjczVjVVM3JIMzN2ditnaTBiblVTdFlIeU15MG53Nm9USnJZSlladGlrSlB0N1FiTkcraGdtVUxlaGdZRG01SDZSTnhGQVFwbE1BNmlmb2UzKzdOUEI1UTRZdk9ZYUpNMzVKS2FmWE1IdGFWa0M5aDRtV1BCeGZPK2dGaG9tMjNkRjF5ZG51N3prak9rRHNwcG9SWk1uRFQvS3VwYUtpQUFTL3FWNEF3MkN5N29ldWFXaVk5UFNQMWlWZjB5cDNPcUFKa0ZLc21HNUFIcjQ0VUdabE5KWWE3Ui9BRGlBbkZ4dE51c3lLa01Fa1BBdnVvK2crd1U1UDA1L2Q4VEs4bzU3NG9rWHIzdDNXbXhUTmJGeUxRT2lVbXpicVRZSlNwRmhkT1JvaCs2Nzlqb3NNd01lQUJvMjRIdjh6eWtpZ0lRem1CUklTVFp4NGZucktwenR2bUpWdmRsVjJSbVVta0NNQzdVbXZvbjRjeW95elBMemEvUzJ5Z3FJRk1YN3p0MDg4STRsckd1cERCRkF3aG1NUW9KZWx4VytNMjdjbTRmTE8rN0NMcE1ITDEwWkZWdmVKb3FscVNxd2ZtTVVObTk1L3NKenJUT2NsdjBlMDF4eHNLNmljblEvd1lYdDNOblhYb2NDMXJWVWhnZ2c0UithRHJScHErSEREMjhyZDVINTc3NUZsTitmK0Q1SU5Wb0ZDc1dod3cwczFRL1V1cW03Z3g2d1NBK1FUcEZaVStGNjlITkpJb0NFMC93RThYRTVmU282N01tbnA0OWZzekVLYW5WYUJSUXdETlV5dCtMSGpMbW45Y3BWY1ZETG1GekxKWk1nTTNPekNDREJXalFQd1JXWGVZLzl1dXllaGVVZDkvREk4WTNqNDJzOFZMdzBZalZRQXEvUGZYbjF2am44Tm0zdTFxdXNtZjA4TWd5Z1FjTUFYcHZ3djdtc2E2a3NFVUFDS0FWY2NRWnFwQ3k4dUtKamx5N0xlTytubjJpMTE4UlJveW1XL0pDQXI3KzZyV2IxSGlHOGpoeVZlN0t1b2JKTUE4ak1rUGF4cnFNcVJBQUowSXNJZW5YVGxzK2RPM3Q3ZWNmMXVtcDZyN1diazdxY2RiWjdKU2tKRlBlTzZHMkp5N0NhR2I0ZThGaWovNGZJQkQ1ZjRReldkVlNGQ0tBSVo1aEFlazAvUHZ0MFlJV3RINDhuK3NOZ2JFZGpta0JTQXIzNW5COG94SEp6NFB4bVNUeXNzZ2daOVZOYzNZZHlQLytySkJGQUVjNHNJQmpRMXplaG91TnU2RGRyM0xLZlhjbGxMVFJXNVhNR0NOTFRmTDNPL1pGQzY2R1JNN3RwaGpVbW9Kb21rSjZ1bzMvZk83bGVBYkUwRVVBUlROTUptcmNzZEwvNTVtMmpLanAyelhybmsxSmNjRm9Da3BOaTg5YjQ5S0E4V0FqdDJLbjJOQTNXVlZTTzRRVXU2R2h1YWRYR1dqdU5pQUNLVUpRQzhkRW1MdXZxR1ZMUnNWZjFtYlZvOXg0bjVDRCt0cWdLeU9PUFA5Y3NlSThZZkdscHhpRDRMTkQ4QVFCQ0lNcytMbmMvTFk4SW9BaWxCd2l5R2hWdW1qVHBubm5sSFRkbXpMU0xGaStQdVVLSkRsNC9pQ3dCZS9mSU9KRlRtOXNCaVpSQzJiRXpMcWtxVTAxWW9SUlFvaWt1dW5EbkY2eHJxU29SUUl4UUFKcW51Qk5ZOHhGb0FRTE5UNkI1Q0xSQ0FpMmZRTXM3OVFlbi94U2UrN2xOQ3RSSTh1RS9mYlNiS2pwMjZiTG9EeldmSFB4K0VCWFl0NDl3MncvVXI5OHppY2RQR0twc2dUM0FUQXFrSi9yeHlDTmp1ZDBCOVd3czhQVGFqMmtDUmdGRnoxNCt6ODdkTWRQYXRmcmJrWmV2dytWUzRJcFNFUnZyZ01PaHdCbWx3T0ZRNFhRcVVGVUZCSkR6OHVWTnIwMlExNnFKcVBiY2JDTWZHRGhZVlo5NmFzaW04bzRiOC9RSGcvNDNOcVorWldlN1Y0bEVrVjhRM1RUNER4d2N5U2tOQmgwNXJFSzF3QnJRcGdZMGJTU3ZQN2lIZFNWVkp3SW96RXdLU0JMQnNPRUZjOTUrNjdaYkFHQm5OVzZjYW5ublZzZGJFeXMrNXZNdkhlK1Z0OHpxT1NFRVhsK2d3ZXhaaUJvMEdMN1FuS1Q2ZnYvRGFaMDk0R1hBWFpSbnVaMW1BWEVKRm5hR0IramZwK2pEVStIRHE5R2o1NyswY1owcVZiVE1hbldwS3NYNjlkRll1MjdjQmFFNXc3bHhxSTRycU1tNmlvcFJDc0JQMEw5ZkViZjd2NWRIQkZDWXFUSEFuQTlqMzJOZFIzbkdqNzhsWWMwNlpmVFp0dGdKR3BWaXo5N0dYSFpFdXozK2VsWVlBS1FYQVZmMTFQRElJdy8veExxVzZoQUJ4SUNhU0xsZVhlYXZ2M3Y4L09OaUNXcE1hTStqT0lFZmZsSGFoUFlzVmZmYWEvL1hZOHZHYUtpS0JTN0JYTUNCUS9RblFvSXdSSjBCRVVEQ0dRWU5mckhWckUrUzJvWmorb0h1SStqUXNvQzdPMkUvL05paU9XSXM4bnJXQ0ZvMHo3ZmtWdGVBQ0NDaEZJOG5jeVhjNFpsK29Mb29saTVMeHRLbGpXcUUvbXlWNS9ZNGVsdWhQV0ZTSUQzTmdDUWRuYys2bHVvU0FTVDhvMmV2cWJkK3NqQXVOcHlUTDVWWWlydUdqdU5xWnJ6WDY3MEtGdGcva1ZJZ0prb1B6UG53cVoyc2E2a3VFVUFDQUlEU3NjcUpuTGpaeFJ2eWhJOWhBdkZ4WkdBWVQxbXUrZk92cXJYdllEd2tDL1QvbURwUXV4YVdzcTdqWElnQUVnQUEvVytzUGVQUDMxM1ZXMmIxSEZBL1FVYTZqNXM3WVIvTnY2YlJzWHdFZGQ1YnlHZ0VXYzN5TFRmL3F5UXJQTTFDaU0yYXRhRE9waTB4ZzBJMjZMQWN4RW14YzA4Y042c2pIanJzNm0wWUZubFphRURuemt0RkFBblc5dFk3aFIvOXZkMkpVQTA2TEE4aFFDQkExZEdqbjJ3WS9yUC9XMHlNZWdzMC9pKy9OQy9RN1RJdjdycHJ6bWJXdFp3TEVVQVJidFNvU1QwMmJFdThVR0UwN1VDV2dEMzdGZXpZbVhFbGt3SktvQlRrNENGSGFzZ0hZQVlCY1FDNWVkSkhyT3M0VnlLQUl0eWlIMkpuK3dJUzIwRy9CUEI0RTVnSFVNK2VRMk56OHMwb0syekJUQU1FYlZvZSs0RjFIZWRLQkZBRXUrTEtEKy9idURVdWcvbUlYMEtSWHhCM0Nkc2lnTXpNam9PUEhuTkE0dndPdkdrQ2RUSURrTWpjRDFqWGNxNUVBRVd3WFh2VXR5V1ZnLzRPaWNEamNTZG5IMlg3KzdoNlRWeVdaSVU5d0FnUTBKVkRzMmF2NEc0Vmdhb1NBUlNoQmd5Yy9jM083UTd3Y0xtaHFoUWJOc2JpNVFsam1NNk1WMVgxU3RNQ00rQU5IV2hVVDdQazVOUFNSQUJGb0ljZUdwengxZUtZcTVRZ0xUSWZGQXJGbnIydG1JNEhpb2syR2tObldVSEZLQVVVQmJpZ2MrNTNyR3NKQmhGQUVXakxYejJYZVFvWmR6eVhJanVCNzMrU21jMk1mLy85c1plcytEVUthaFNyQ2lySE1JRzY2U1l1N3ZLVGFBRUoxbk5scjljdituRmxUSk5nTGpJZkRJYUhvSFA3d210WW5mK0xMeHRsZ2JQbnBDeFVJNmlWNGRQNjN2RFJRZGExQklNSW9BaHorR2l0NVliQjMxUkxKWnJpaCtWSitPYnJjUzFabko5STBiMTR2L3dDQUtKU0ZCYkpVMWpYRVN3aWdDTElMYmRPR2JkaGt3cVZ3NEYyaEFDU1ROSG4yZ2J4TE02LzVTL3ZOWER3RnN2L1JuV0NGbGs3RnJLdUkxaEVBRVdJbVRQNnhpNy9MZlZKaWVOOXJuUTNNUGpXOE0rTW56WHJ3WmFVT3VWZzdIc2ZTcVpadkozU0c2L1hXY0c2bG1BUkFSUWhwazYvOGYwOSt3a1h0OTNQU2lYWXNWTVArd3FKM3k5cUdiUC9LSUhDODNNRHdQQURiVnRLZWFtcHQrV3pyaVZZUkFCRkFFcEJETVBYbDZ2YlhtV1JLQW9LWTV0bVo5OGU0dFdvejdSOWg5TEg3ZVBycm1DWkhFQitnVG1EZFJuQkpBSW9BaEFDdXVkQXdqclp3ZmNsaGtRQWo5ZkFDeThrSm9ienZORXV4MDFXNklDR2wrQ3lyZ2NYc1M0am1FUUFSWWhXemQyTERJM3Z0M2haQm5idFZiRnZYOE93VFV3dEtvVHFENmhOZU8vLzBYU2dSVllBSFR1TVdzYTZsbUFTQVJRaExyb2c1N3RvbDFHOGtSM1BDRkRrU1F4YlA5Q2l4UXZxdWowcS82OEVneUE1S1hCZzRFM3dzaTRsbUhoLzJvVWc2WHY5aU45cXBWRVl2TTkxSWhTNWViSGR3blc2T1hNUFhicGhveFQycFdpclRLYncrNlZwck1zSU5oRkFFYUpEUjNqcTF2THZwcHhmaG9FU0VIalR3blc2UUNDbEoyUyttNFdVQXJGUkpoclczL0k1NjFxQ1RRUlFCTWt2SkZQQWV1MmZDcWhSRkN0K2pjR0VDUzljSDQ3ejZicmFHMFk0emxSOXVoOW8wNXhpM3J3ZFcxblhFbXdpZ0NKSW4xNWJWemhVOE44UDVLVDQ0ODlHV2VFNDFkL2JwVGppQ3NlWnpvRUp4TVZxdXdpWjUyZGRTckNKQUlvZ3p6Nzc3QzhOTTkzUURiNHZ3MlFuOE10S2RBajFlWjU2OHJHZXUzYXEzQTlBSkU0Z041OU9aVjFIS0lnQWlqQjE2N2orNW4zWEI4TWdTSy9odXlIVTV6bHlyRlZuU0h3L0Z3QkFQUVRYOXZuVHN2dS9sMGNFVU1SeFQrTjh5QXRrbVdMWC9sak1ueit5YVNqUGMvU29xd1h2cndBdFFOQ3hnd2RQUHZYcUd0YTFoQUxuVDc4UWJIMnZ5LzYrYWVQaWdXMjhJZ1RRRFlvbFN4ckhoZkk4aGlGZHgzc0hOQWlncXZvcTFtV0VpaTBDU1BPd3JzQTZoZzBidVRreDNtK0M0L0ZBaEFBRlJSSzJiWmRETmpQKzlkZDZOdHEyUTNkeDN3Rk5nZmc0TEdCZFJxallJb0F1NzBhNGZrZm5UVUs4dmhvbTN4M1JBS0RwMFNHYmtyRm43K0FXTzNZNnVPNkFOaW1RRUJmQWxUMXpMYjM5Y25sc0VVQUc3ODFvem5oOW1Ncjl2N3hFa1ZvTm5id0FBQlJ5U1VSQlZKc1gzWnBTT0VQeDhELy80bTB0Y2Q3Nk1ZcUFTODVYQTZOR1BXanA3WmZMdy91dllhVXNYVUtaN0d0dVZaZDArVzFwdlV5ZDcrQ21nQ1JSVEp2MldvMVFQSHgwZE5STkpzOC9Qd0RJQUtWdVczWStuMktMQUhyeFJRbGFIdXNxckdQOCtJbTdNbElEbXNueGVDQlZCVGFzVmJCeG96b2cySTlOS1locEtxMjRINUhwQVBMeVlMdjVYeVhaSW9DT0hMWFZCT0d3U0VweXJJVEIrUXZRU2JGblgySzdZRC9zRzI5TXJiMW1peE1LeHhOUUtRWGlveWx1dVA0elcyeS9jemEyQ0tEa1pOWVZXSStpRkUzaitVNFlBRUFDY25OZGx3ZjdZWmY4bEh1cDM4LzNDb2k2UnRDMHZoc2pSMzZ5bTNVdG9XU0xBRHAwU0xiSlR4SStEOXozL3VMMmJRbTBBT3RLeWlFQmJyZWVHZXlIMVkyYVBia1BYMHFSa2l4L3dycU1VTFBGeXpZMnRnamMvMEp4NXNwZVB4MU5yZUVPZ09QbE9WUVZXUHVuRXkrODhPaFZ3WHhjUTNmMGhzbjU1U2NJQVBjWHJLc0lOVnNFVUdvcTUvZFR1V1Y4QjQ3SHdRQUFvaWcyYk96VUlwZ1ArZjBTWjRvYUhjeEhEQzdEQk9yVzlPUEovOU50c2Y5N2VXd1JRRGtuQ3NIZlhwLzhvNmJ4THU5UG0rUUFscTFBeDJBOTNvZ0g3cnpVRWNQM0N0Q21EbVRXbFBLNmRydjNPT3RhUXMwV0FWU3paZ3I0L3BYaTA0Mzk3bGpVcEw2UDYxSGtwZzlvMGN6c0g2ekhPNUY3MFhrQkwrRTdkMDBnSmNuM0Mrc3l3c0VXQWJSdjMxR0lGbERWM1QwVS9qWXRsV1BnZUM2ZEZBV3MyZUNRWjg3OFQvMWdQTjZTWlVrdFpDZm5iMVlTZ2FZWnRsei9welJiQkpDdWl4N282dEkwOHhkd1BJcWNBQ0NFNEVUT2pZMkQ4WGl5VEsvbnViRnNHRUREMmhxdXYvYjJYMW5YRWc2MkNDQUtLaHBBMWFTcW5tbFFXVmR4ZHBJRUhNOG1XTExFM2ZOY0grdWJyMGZYcXBtR0JJUG5TMDZESUsyRzk4Uzk5eUVpeHZiYklvQk1Rd1JRZFQwMit2YVZkZEk1MzY1SEJvcmMwWmVkNjhQOHRycEZyOVcvS1h4dndXTlFwS1hHTEdWZFJyallJb0FDbWk0Q3FKbzZuNCtDdXJYY0IweWQ0eWVRVU9UbFI3ZW45TndHRGF6NmpTUWlodVByTHdCUUFFcVAySHIrVjBtMkNDQy9YN1BKVDhKR1lvTHhQYy85SXJJTUhEOEJlZWc5cnlXZHkrTVVGcEtiUVBrTldrMEhXallLNE1zdlp0cDYvbGRKdG5qWjZyb3BXa0Rud09uMHZjdHpBRWtTY1BpUUFsVXhianFYeC9FSG5CMUJPUDVCZFNDMWhubUFrRDk0bmlBVFZMWUlJTk1VZlVEbjR0TlBocTFxM2N3TmplZkxNSVhpd0tHTU50WDk5c21USjNkY3N6b0tLc2NkN2dCQmJJemZ0cXNmbHNVV0FaU2Y1d1gzVXdvNGw1RG8zTUg3OGh5RkJhNXEzd2xiL0VOT0k4UUVzNXJRY0RoOEVkUC9BOWdrZ0hoZVZxRTBUUWUwUE1KZFhMWnBwUzJHajNVVlp5YzVnTzI3YU4zcWZuOUJRVVpQbmk4ek5SMW8zZHlMVHo4WjlodnJXc0xKRmdIa2RsdWpFMXJUZ1JZTlRMdzFjVEYzdjJRMU03elRJUEdiNUxJRUhEaWdZT3pZMjZxMVBwQmhSbkUrQTU1QWtmMGJXRmNSYmhaNDJWWXNLa3F4eGxTd0FFRmNyT2VwNFErOGZZeDFLYVU5OWRTZDY5cTBDVkNlNTRWQnBkaTRxWGVWWjhaVCt0L29GV3RjbVVwSWxyY1BFbzJpWVlPNEZhekxDRGRiQkpCbWdidGdtaDg0djVPTzMxWU9lbzUxTFdVaEJEUXUxcmVXNisxNlRFQTMwS21xMy9iMjIxR3RZNk1vdCs5UkZJQWpta0pWOTBmRS9LK1NiQkZBbFBQRnhTa0ZYTkZBMDBZN3p1azJjcWpWekRDK0I5Y3RJR0RyTnJsZlZiOXR5NWFrRzdJUFNkeGVZZW9Cb0YwempjNmQ4OUE2MXJXRW0wMENpSFVGNWRNMW9Ia0RiZXZzMlkvUFkxMUxlVktTL1hOcTFEQzU3U3FSSktESUkwWFBuZE85VmxXK2I4KytsQmJnZVFhOFNSQVRvNjBsaE50R1dzallJb0Fram44SzB3UXlVdzEwN2ppdk8rdGFLakpseXJCTnRUTThNRGdkRHlRUjRFUytoRitXMzlXb0t0KzNiaVBPazNudS95RkFRb0ovRWVzeVdPRDRwVnNWZkw1Z0FNRHdFelJyYkh3MVpjcW5oMWpYVWhtSmljNVZ2RGFCQ0FIY2JvSzllL01xUFI3b2tWRTNwYnFpekRTdVc4a0drSnB5NGwzV1piQmdrd0RpazJFQTllc0c4Tk9QQTY1aFhVdGwxYW50WFFUT2R3ejFlT012cmV5eHNucHhyNTNiSEpDNUczbFZUUE1RWEhheEc5T21QYnFUZFMwczJDS0FKSWx3ZVJ2ZURBQ1hYRmowRXVzNnFxSmhnLzFUZVo2d0NZa2lMeS9xdk1vZXZuOS9VaExYL1Q4U29LamFTdFpsc0dLTEFPTHhMcGltRTJRMThlZk9ublhuWTZ4cnFZcG5uMzN5NElXZHZRSE56MmNJS1Nxd2NhZmlhTlh1aTdqS0hMOXJkMkFBWkQ1L0ZnQ0FTWkdTRXJ1WWRSbXMyQ0tBSk03bVloUnZxMnVnYVJQMzlheHJxUTVKOGkzaHRWdU5BTkI5QkowN3JMMjVNc2NiaHZNaVhtK1RVZ3E0NGlpYU5ka2NjZU4vVHJGRkFQRkc5eFBVcStuOTlZdlA3dnFaZFMzVmtaa1JXTWgzUHhERmlaeEdiU3M2YXNiMFYxdXQvczNGN1FxSXVoL28xTXBmK095enp4eGtYUXNydGdnZ25ocEFtZzVrTmRZd2JPaWhoMWpYVWwzMTZ2ay9xbGZiNEhhWlZzVUpMRjBablZYUmNiTStpRzJCT0Q1YlA4VUlvcU8xNWF5cllNa1dBY1RWNVlKQmtKeVVQKzMrK3gvOWszVXAxZlhLS3lPT1pXWjQ4M2hkcHRXa1FHS3NlV2xGeDlXdXJkNElENTgvQXdDQUFrbUp2b2djLzNPS1BRS0lremM1VFFkcVovaTA3eGM2TGR2Nk9TVTZXbDNHNjNnZ1dRTDI3bFV4YnR6Vmw1UjNYSFoyZEh2SWZQNE1sQUtKaVNaU2tuTS9ZRjBMUzdZSUlNTEJiWGlUQW9reEJPZDNQUDVJYk53Z2pyZjZxNXhtVFFzWGNkV3lMTTFCc2ZxUGdlWE9qUC8rVjJkRGhkTTk0SFUvUWV2bWJ2L2JiejltKysyWHkyT0xBS0lVekMvRGpFS0NpenQ3am43eThRTnZzcTBrT0VZTWYrdURsRVR3MmdnQ2RNRHBWTTg2SHVqR0c4ZDJUSWltek4rWXpzb0VrcE9OaUZwK3RTeTJDQ0JDd1BRWHpUQ0JqRm9VQ2ZFSHVKN3RYaFhOczlibFp6VnhaeHNCVHB0QkJEaVJZL1k5MjVkcnBOYm9tM2RjNHVvR3haa29raEpqSW5iOHp5bTJDQ0NKOFRvTFppRkI1dzdILy9qd3cwZHR0WjJLSlBtLzVmVTNSSElDZjIxVGs5NmFpTlN5dm43b1VGb01ISHcyZnlnRnBDaUttVFA2VDJGZEMydWMvbnBWamNud09rSFRnU2JOVGZUb1BxdGFTNFh5ckdhRyt3dGV4d1BKRW5Eb29JdzkrK1owSyt2ck8zWjYrMFBocy9takZ3TFg5OVNPRVFLTmRTMnMyU0tBbUxhQWlnaDZYSlk5YjhTRHZ4YXdLeUkwUHBvMzRwUDZ0VFVZbklZUUZJSzllL1ArTlI1bzNMaHJFelhEbVVsNDNRTk1JVEJOejNlc3krQ0JQUUtJRUNZL2h4WUEybmZTTU9tZG9iYnAreW10ZVpQQUhwUFRlV0dRZ0NOSG9pOHQvZW1DZ3U1WGJOM2lnTUxwREhnQVNFbnhSSHovRDJDVEFJcU5qYzhMOTVZeWxCYi9wM2FtNzdid25qbThLTWlQdkk2bEFhRW9kRWRmV1ByVHVwR1d4ZXZ0TDhNRTZ0UTIwTzJTKytleXJvVUh0Z2lnZWZOR3ZkS3BVd0JhR0VOSXp3ZHU3bXZ1KytyTFFiUENkOWJ3YTVsVndPMzZRSW9Lck51aXVONTVaMTdqa3AvZnNESFFFMDQrVzIybVRsQTMwNzFyMEdCZW45WHdza1VBQVVEL0c4eStNYkVVZWhqK1dVMEsxS2hsSWlIQmI4blo3bFh4NnF2RFBtM1J6QUNQMi9VUUFEQWtiTm15clV2Sno1dW1xd3UzQTVpOEZFMmJ5cGFjcEJ3S3RnbWd4eDRiK05rOWd3dkh4cmswYURxQlZrU2dlUW0wQUlHV1I2b1VUSVpadkpieldiL3VKMmlUNVY4ODZaMWIxcHg3NVh3akJIcEtzbmNMREQ1YkZOQ0JJbmU5cTA5OXVINGRvcGI4NUlESzRRaG8wd1RTYXdNeDBXYkVMcjlSbW0wQ0NBQW1UTGp0bWZ5amhkRnRHaGU4MXFlWHAvQ1NDNDZqWGZNanVLRmZBZXBub0ZJaFpKaEFSaEtRRWw5MkNCa21rSkdxWWNrUE4xZDduM0tyaVkzeDgzdkh4a0d4WjIvTVAxTXlIaDQxcVRlSjVyUDFVenhnbjJMaXhFRy9zNjZGRndyckFvS05rTHU4QUVadVdJZVJwejYzcmtRN3BUSURMdzdtZnhuVnYvL0JKUjkvWHZOQ0tmYjBMek9sZ0NJQlBTNHRldjJEMlVFc21uT0ppWGtMb2x3cEkzbmMvN0Y0ejNqem53QnExRWdhdUdRSkFSTDRDeUhUUTNCK2Q4OW1Rc0RwUWlmaFo2c1dVTERjTnZnYVpjbnkxQXZsbUROL2lYVURhRmdyY09LRDJYYzh6S2cwSnViT2VXUlZaZzJkeS9GQWtnUWN6Rll4YnR5NFRnQ3djVk5DSWpodEFVRUNvcUxjL0xZbUdSQUJWSVlUdVpPZXpjbFZ6dGhKa3dLQUR2Uzh2UEJSVm5XeDFLYWxmeTMxOGRiK09ka2lDeEJzM1paMkZRRGs1cEdlYkVhRlZZSUoxSzNqanVqMWYwcmo3emVLQXkzYnpOTTM3M0xLYW9rTFZFMG42SmlWdi9yUDFiZDFabGNaTzlkZFArdUZ6NytOZTB5TllsM0p2eGtHVURkZFEycUtkUEN2WFhJdFg0Q3ZWVEtCNHRaenMzb0cvdDdVajdQSzJPTDF2WUtaKzRmUC9iL05HNkxPQ0I4QVFBQzQ2SUlpV3c4NkxJOUQzVGFWdTFmMVNiSU03RHVxWXZVbVBzTUhBS2hKRUJkVDlBdnJPbmdqQXFpVVRadk4rMUhxWFY3TEo3aTB5N0gzSjA2OC95ODJWYkUzZi82NFhXMmJld01hcDh1MHlqS2dxbnlHRHdEQVRYRnhsNmlJM2YvcmJFUUFsVERxa1htZGYvNDVwcFlhZGJvVFUvTUMzUytuNWxOUEhydWZZV2xjU0VyU1ZvajdOMVZIS1pDWVlXTC8vcTBSdi94R2FTS0FTdGkweWY5ZmxON0NSU2RRbFgyUDllanhsSnRKVVJ5SmRoVjl6K2tVSzY0WkpwQ1dETS9IQzU3Wnhib1czb2dBT21ubWU1K21yZHNjMzF0MmxHejlFSFRyNmkzNi9yc0hYMkZZR2pmaTQ0cytURTAydUozbHdDc2FBQm8zOElyQmgyVVFBWFRTelBkeUhqeWFUU0NkZkVZb0JSSVNUU1FsSE9qRHRqSit6SnY3NlA3V1daclhDUFBLQTlaSDRIU0s4VDlsRVFGMFVtYk5oQ2ZnUGYzV3JoY1JkRDNmdS9uenowY3ZZMWdXZDJKai9MK0E4dHJUeXgvVEJOSlNUYlJ2NXhIamY4b2dBZ2hBbDBzbTlwczNWNFdhV1B5eFlRSzE2NXFvVi9mQkx1Vi9aK1NKaXpNV1FSTFhZSlZsYUFSTkduajlUei85OEZyV3RmQklCQkNBZW5VVHBwZjgyQ3dnNkhIcGtjL2VlaXM3bjFWTnZLcFQrODdwWUx3SmdLWElnR2tFUG1OZEJxOGlQb0Q2OW4ydzBaejVjZkZLWXZHN3VtWUFqWnRyZUcvbWZXZmQ4aVdTdmZBQzhpNW9WMVNnOGJwZEQyOENGRTJheEZwMm0rNVFpL2dBTXN4T2N3RnllazVLSWREM211eXhMR3ZpWGMwTVk3bll6NkZpbEFLUzAwU1A3djBuczY2RlZ4RWRRQk5laFhQVkg4N3paTmZKMW8rWG9FZFB6LzZYWHJyM0djYWxjYTFPSGUxYnNhQm94ZlJDNE5xZTV2SEJ0NkdJZFMyOGl1Z0FXckhxdlhlT0huVkFrazdPZHBkTlhIVEI5b0dzNitKZFl2eVFLWFhxYVRERXFPanlTWURUNGJmVlpwWEJGdEVCdEhHek9vQ2NuUGVsZXdtdTdKYTNkT3pZLzY1Z1d4WC94djRQZ2FhTkF3ZTUzYTZIRndaQnc0WTU0dlo3T1NJMmdPNjhhOGI5VzdmRnhDZ3lCYVVBVVRYY1BHRGQ3YXpyc29vYUtjWlBZbDdZMlprVXFGSFR3TGF0bThYMk8rV0kyQURhdUlrOEJHZngzL1Y4Z3BIRGl0Nis3ZlkzOTdLdHlqclMwcnppbmIwY1JvQ2daVlB2Z1k4L251SmhYUXZQSWpLQW5ob3pwY3ZxdFVtTlZaVVdMekpmeDVmNzZpdDNER2RkbDVWMGFIL1BncVFVczNpRFJ1SGZKTUNrMnNlc3krQmRSQWJRNGgvakhvZGEvTW94Q3dpZUdLMDl6cmdreTduakR2ZzZ0UGJ0MU1XOHNIK2hBS0tjRkxVeUExK3lyb1YzRVJkQTA2ZFBUTnQvS09wcVNTN2UyNzFGYS8rR0VTTUdpWDJhcXFGQi9jTHZ3T2tDWlN4UkNyZ2NKdWJPdVVkc1FGaUJpQXVnK1F1U1J4ODZRa0FwMEtBV2NNM1YrYmV6cnNtcUFvR2l6KzIzc2RPNU16d0VYYzd6N2hEYjcxUXM0Z0xvNEdGMUpCU0FhZ1JORzUzNCtJWHhROFVrd1dxYTlmNm9INW8xMXNLeUhiYTFVQ1FrR0dMNWpVcUlxQUFhTStiam5wczJxcElzQTZrcEZQY04yeG14aTh3SGk4dnBYOHk2QnU1b0JDMWI3QkIzQ1NzaG9nTG9qelcrbVpBSkREZkJCUjJQanJ6MnV2SGlGdWs1U2t6VUZvazdZYWZwQnRDa3VZNG5udmpmVjZ4cnNZS0lDYUFlUGE2cHVYWmpUQ1lJY09INWJ2clZsOE5lWTEyVEhXUTFPeURtaFpWQU5ZSjZkWDFyS2o1U0FDSW9nRnpSZlQ4NGNwQWdLWm1pZnQzOFMxalhZeGVUSm8zWjNLNkZwbXRpZG55eEFOQ3lSV0FlNnpLc0lpSUM2Sk5QaGlRVUZzVjFod25VenZEK01IZnVmY3RaMTJRbjlldlMxUWl3cm9JOUNzQ1ZhT0RRb2NLRnJHdXhpb2dJb01sVE9vOVp1a1JHYXFhSnE2NzgrVmJXOWRoTmpaUkRpOFE2MGNWYlJOZEpoN0ZnL29PYldkZGlGUkVSUUlWRkNhTUFvRjByNzZRWFg1eHlsSFU5ZG5NOFc1MFpteVNtWlZBS3hNWjZ4ZlNMS3JCOUFOMDY2TzFiVjYxd29sNWpEWXUvditVKzF2WFkwUmVmRDkvYnVxblAxQ045bVZZUHdZWG5hMXRabDJFbHRnK2dRNGNTWGdlQTNqMXlSZmlFVUdiTndOeEl2aHRHQVpBWWl1Yk5Sa3l2OEdEaEg3WU9vRWNlZWJYdGtsOWpVenAxOWg2WlBIbm9KTmIxMkZuSGpvNUZDRVR1TlpqdUo3aWdqUWNQUEZDNGozVXRWbUxyQU5xMkkvVnRhQlFaNmZ1NnNxN0Y3anAxWFBNZGxBaStCUE5TdEd0RHZtRmRodFhZTm9DbXYzdGR6TThyWXJwY2ZYWGhxcSsvZW13NzYzcnNybWZQVjQ2MWIrZmZvZW1zSzJFa2l1QkV6cTZQV0pkaE5iWU5vRFhyYm5yRE1FMk1mbkR3eGF4cmlSVE5tcmdYSXdJN29rMEtwS1lZNk4ycjF2ZXNhN0VhMndiUUQwdklYWDM3R085MnV6eVN1MGJEcTI2ZEU0c2ljUUVLYWdJSmNmN3RkOXh4eHpIV3RWaU5MUVBvdHR2bkRQUUhkTXg2ZitEZHJHdUpKQysrT1BxTGV2V05pTnV1eC9RVG5OZmU5d1ByT3F6SWxnRzBkajE5OVlydUJRTlkxeEZwQ0FGMU9RTmZzNjRqN0V3Z0ljRVU2LzlVZyswQ2FQVG81MXJGeDJueXRLbkQ1ck91SlJLMWFwSHp2UmxCL1VDYURqUnRhdUNHRy83NGxYVXRWbVM3QUZxNUt2bTFLNitJNzhPNmpralZ0czJ4SDVLVFRKaVJjaG1tRWRTdjQxNTN4UldUYzFpWFlrVzJDcURISG5zMW9YWnRoM2ZNbUw1L3NxNGxVbzBaOCt6Zmw1eHY1QnR1MXBXRWlSKzQ4SUlUTTFtWFlWVzJDcUM4dkIwUE5tNjRWT3p0enBoRWpveUJRV0QzY2RGYUhrR3Zxeng3bm4zMjRUZFoxMkpWdGdxZ2V2WHFIQjMzM0d5eHpDcGpuMzMyd01RNzdzeitWTStEYlMvRnREeUNpN3NXZWU4WWZITWIxclZZV2VUMEZncGhkK3VnOTZaOHZTaDZhTjRKQjlSWUNpMlBBQ29BdWZqcmtvTkNadmdXcUFWSThTdkF3T20zWW9yaXo1MXF2cFUxaWl3QVhIT2RiLzk1SFFhMkh2TTA4c05RcW0ySkFCSkM2c2tuTDAvZnRmdU84WFBueEViZmNxdDN3TkZqWG5nOEJoU1pZcytCRkJ3NExqRUpJUzFBMExuTmNRUUNCdUxpRkxqZE9pU0pRSllKS0tVZ2hFQ1NnQ2luL00vSEZCU3k3TkRyMXNFek0yY01majc4VlF1Q0lBaUNJQWlDSUFpQ0lBaUNJQWlDSUFpQ0lBaUNJQWlDSVBEbi93SFpwUjlOWDNCTGtRQUFBQUJKUlU1RXJrSmdnZz09Ij4KCiAgICA8c2NyaXB0IHNyYz0iaHR0cHM6Ly9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMveGxzeC8wLjE4LjUveGxzeC5mdWxsLm1pbi5qcyI+PC9zY3JpcHQ+CiAgICA8c2NyaXB0IHNyYz0iaHR0cHM6Ly9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvQ2hhcnQuanMvNC40LjEvY2hhcnQudW1kLm1pbi5qcyI+PC9zY3JpcHQ+CiAgICA8c2NyaXB0IHNyYz0iaHR0cHM6Ly9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvanNwZGYvMi41LjEvanNwZGYudW1kLm1pbi5qcyI+PC9zY3JpcHQ+CiAgICA8c2NyaXB0IHNyYz0iaHR0cHM6Ly9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvanNwZGYtYXV0b3RhYmxlLzMuOC4yL2pzcGRmLnBsdWdpbi5hdXRvdGFibGUubWluLmpzIj48L3NjcmlwdD4KCTxzY3JpcHQgc3JjPSJodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9wcHR4Z2VuanMvMy4xMi4wL3BwdHhnZW4uYnVuZGxlLmpzIj48L3NjcmlwdD4KCiAgICA8c3R5bGU+CiAgICAgICAgOnJvb3QgeyAKICAgICAgICAgICAgLS1wcmltYXJ5OiAjMmMzZTUwOyAtLXNlY29uZGFyeTogIzM0OThkYjsgLS1hY2NlbnQ6ICNlNjdlMjI7IAogICAgICAgICAgICAtLXN1Y2Nlc3M6ICMyN2FlNjA7IC0tZGFuZ2VyOiAjYzAzOTJiOyAtLWxpZ2h0OiAjZWNmMGYxOyAtLWRhcms6ICMzNDQ5NWU7CiAgICAgICAgICAgIC0taHAtY29sb3I6ICMzNDk4ZGI7IC0taHNhLWNvbG9yOiAjZTY3ZTIyOyAtLXdlaWdodDogIzhlNDRhZDsKICAgICAgICAgICAgLS1zdXBwLWJnOiAjZThmOGY1OyAtLXN1cHAtYm9yZGVyOiAjMWFiYzljOwogICAgICAgIH0KICAgICAgICBib2R5IHsgZm9udC1mYW1pbHk6ICdTZWdvZSBVSScsIHN5c3RlbS11aSwgc2Fucy1zZXJpZjsgbWFyZ2luOiAwOyBiYWNrZ3JvdW5kLWNvbG9yOiAjZjRmNmY5OyBoZWlnaHQ6IDEwMHZoOyBkaXNwbGF5OiBmbGV4OyBvdmVyZmxvdzogaGlkZGVuOyBjb2xvcjogIzMzMzsgfQogICAgICAgIAogICAgICAgIC8qIFNJREVCQVIgKi8KICAgICAgICAuc2lkZWJhciB7IHdpZHRoOiAyNjBweDsgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tcHJpbWFyeSk7IGNvbG9yOiB3aGl0ZTsgZGlzcGxheTogZmxleDsgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsgcGFkZGluZy10b3A6IDIwcHg7IGZsZXgtc2hyaW5rOiAwOyBib3gtc2hhZG93OiAycHggMCAxMHB4IHJnYmEoMCwwLDAsMC4xKTsgfQogICAgICAgIC5zaWRlYmFyIGgyIHsgdGV4dC1hbGlnbjogY2VudGVyOyBtYXJnaW46IDAgMCA1cHggMDsgZm9udC1zaXplOiAxLjVyZW07IGZvbnQtd2VpZ2h0OiA3MDA7IGxldHRlci1zcGFjaW5nOiAwLjVweDsgfQogICAgICAgIC5zaWRlYmFyLXN1YnRpdGxlIHsgdGV4dC1hbGlnbjogY2VudGVyOyBmb250LXNpemU6IDAuODVyZW07IGNvbG9yOiAjYmRjM2M3OyBtYXJnaW4tYm90dG9tOiAzMHB4OyBmb250LXN0eWxlOiBpdGFsaWM7IG9wYWNpdHk6IDAuODsgfQogICAgICAgIC5tZW51LWl0ZW0geyBiYWNrZ3JvdW5kOiBub25lOyBib3JkZXI6IG5vbmU7IHdpZHRoOiAxMDAlOyB0ZXh0LWFsaWduOiBsZWZ0OyBwYWRkaW5nOiAxNXB4IDI1cHg7IGNvbG9yOiAjYmRjM2M3OyBjdXJzb3I6IHBvaW50ZXI7IHRyYW5zaXRpb246IDAuMnM7IGJvcmRlci1sZWZ0OiA0cHggc29saWQgdHJhbnNwYXJlbnQ7IGZvbnQtc2l6ZTogMC45NXJlbTsgZm9udC13ZWlnaHQ6IDUwMDsgfQogICAgICAgIC5tZW51LWl0ZW06aG92ZXIgeyBjb2xvcjogd2hpdGU7IGJhY2tncm91bmQ6IHJnYmEoMjU1LDI1NSwyNTUsMC4wNSk7IH0KICAgICAgICAubWVudS1pdGVtLmFjdGl2ZSB7IGJhY2tncm91bmQtY29sb3I6IHZhcigtLXNlY29uZGFyeSk7IGNvbG9yOiB3aGl0ZTsgYm9yZGVyLWxlZnQ6IDRweCBzb2xpZCB3aGl0ZTsgfQogICAgICAgIAogICAgICAgIC8qIENPTlRFTlQgKi8KICAgICAgICAuY29udGVudCB7IGZsZXgtZ3JvdzogMTsgcGFkZGluZzogMzBweDsgb3ZlcmZsb3cteTogYXV0bzsgYmFja2dyb3VuZC1jb2xvcjogI2Y4ZjlmYTsgcG9zaXRpb246IHJlbGF0aXZlOyB9CiAgICAgICAgLmNvbnRlbnQuZnVsbHNjcmVlbi1tb2RlIHsgcGFkZGluZzogMDsgfQogICAgICAgIC5jb250ZW50LmZ1bGxzY3JlZW4tbW9kZSAuc2VjdGlvbi5hY3RpdmUgeyBwYWRkaW5nOiAyMHB4OyBib3gtc2l6aW5nOiBib3JkZXItYm94OyB9CiAgICAgICAgLnNlY3Rpb24geyBkaXNwbGF5OiBub25lOyBhbmltYXRpb246IGZhZGVJbiAwLjNzIGVhc2Utb3V0OyB9CiAgICAgICAgLnNlY3Rpb24uYWN0aXZlIHsgZGlzcGxheTogYmxvY2s7IH0KICAgICAgICAKICAgICAgICAvKiBTRVRVUCBNT0RBTCAqLwogICAgICAgICNzZXR1cC1vdmVybGF5IHsKICAgICAgICAgICAgcG9zaXRpb246IGZpeGVkOyB0b3A6IDA7IGxlZnQ6IDA7IHdpZHRoOiAxMDAlOyBoZWlnaHQ6IDEwMCU7CiAgICAgICAgICAgIGJhY2tncm91bmQ6IHJnYmEoNDQsIDYyLCA4MCwgMC45NSk7IHotaW5kZXg6IDk5OTk7CiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7IGp1c3RpZnktY29udGVudDogY2VudGVyOyBhbGlnbi1pdGVtczogY2VudGVyOwogICAgICAgIH0KICAgICAgICAuc2V0dXAtYm94IHsKICAgICAgICAgICAgYmFja2dyb3VuZDogd2hpdGU7IHBhZGRpbmc6IDQwcHg7IGJvcmRlci1yYWRpdXM6IDEwcHg7IHRleHQtYWxpZ246IGNlbnRlcjsKICAgICAgICAgICAgYm94LXNoYWRvdzogMCAxMHB4IDI1cHggcmdiYSgwLDAsMCwwLjIpOyBtYXgtd2lkdGg6IDY1MHB4OyB3aWR0aDogOTAlOwogICAgICAgIH0KICAgICAgICAuc2V0dXAtb3B0aW9ucyB7IGRpc3BsYXk6IGdyaWQ7IGdyaWQtdGVtcGxhdGUtY29sdW1uczogcmVwZWF0KDMsIDFmcik7IGdhcDogMTVweDsgbWFyZ2luLXRvcDogMzBweDsgfQogICAgICAgIC5zZXR1cC1idG4gewogICAgICAgICAgICBwYWRkaW5nOiAyMHB4IDEwcHg7IGJvcmRlcjogMnB4IHNvbGlkICNlZWU7IGJvcmRlci1yYWRpdXM6IDhweDsgYmFja2dyb3VuZDogI2Y4ZjlmYTsKICAgICAgICAgICAgY3Vyc29yOiBwb2ludGVyOyB0cmFuc2l0aW9uOiAwLjJzOyBmb250LXdlaWdodDogYm9sZDsgY29sb3I6IHZhcigtLXByaW1hcnkpOyBkaXNwbGF5OmZsZXg7IGZsZXgtZGlyZWN0aW9uOmNvbHVtbjsgYWxpZ24taXRlbXM6Y2VudGVyOwogICAgICAgIH0KICAgICAgICAuc2V0dXAtYnRuOmhvdmVyIHsgYm9yZGVyLWNvbG9yOiB2YXIoLS1zZWNvbmRhcnkpOyBiYWNrZ3JvdW5kOiAjZWJmNWZiOyB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLTNweCk7IH0KICAgICAgICAuc2V0dXAtaWNvbiB7IGZvbnQtc2l6ZTogMi41cmVtOyBkaXNwbGF5OiBibG9jazsgbWFyZ2luLWJvdHRvbTogMTBweDsgfQoKICAgICAgICAvKiBDQVJEUyAqLwogICAgICAgIC5jYXJkIHsgYmFja2dyb3VuZDogd2hpdGU7IGJvcmRlci1yYWRpdXM6IDhweDsgYm94LXNoYWRvdzogMCAycHggNnB4IHJnYmEoMCwwLDAsMC4wNCk7IHBhZGRpbmc6IDI1cHg7IG1hcmdpbi1ib3R0b206IDI1cHg7IGJvcmRlcjogMXB4IHNvbGlkICNlOWVjZWY7IH0KICAgICAgICAuY2FyZC1oZWFkZXIgeyBkaXNwbGF5OiBmbGV4OyBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47IGFsaWduLWl0ZW1zOiBjZW50ZXI7IGJvcmRlci1ib3R0b206IDJweCBzb2xpZCAjZjFmMmY2OyBwYWRkaW5nLWJvdHRvbTogMTVweDsgbWFyZ2luLWJvdHRvbTogMjBweDsgZmxleC13cmFwOiB3cmFwOyBnYXA6IDEwcHg7IH0KICAgICAgICAuY2FyZCBoMyB7IG1hcmdpbjogMDsgY29sb3I6IHZhcigtLXByaW1hcnkpOyBmb250LXNpemU6IDEuMnJlbTsgZm9udC13ZWlnaHQ6IDYwMDsgfQogICAgICAgIAogICAgICAgIC8qIEJVVFRPTlMgKi8KICAgICAgICAuYnRuIHsgcGFkZGluZzogOHB4IDE2cHg7IGJvcmRlcjogbm9uZTsgYm9yZGVyLXJhZGl1czogNHB4OyBjdXJzb3I6IHBvaW50ZXI7IGZvbnQtd2VpZ2h0OiA2MDA7IGZvbnQtc2l6ZTogMC45cmVtOyBkaXNwbGF5OiBpbmxpbmUtZmxleDsgYWxpZ24taXRlbXM6IGNlbnRlcjsgZ2FwOiA2cHg7IGNvbG9yOiB3aGl0ZTsgdHJhbnNpdGlvbjogMC4yczsgfQogICAgICAgIC5idG4tcHJpbWFyeSB7IGJhY2tncm91bmQtY29sb3I6IHZhcigtLXNlY29uZGFyeSk7IH0KICAgICAgICAuYnRuLXN1Y2Nlc3MgeyBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1zdWNjZXNzKTsgfQogICAgICAgIC5idG4tZGFuZ2VyIHsgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tZGFuZ2VyKTsgfQogICAgICAgIC5idG4td2FybmluZyB7IGJhY2tncm91bmQtY29sb3I6IHZhcigtLWFjY2VudCk7IH0KICAgICAgICAuYnRuLXB1cnBsZSB7IGJhY2tncm91bmQtY29sb3I6IHZhcigtLXdlaWdodCk7IH0KICAgICAgICAuYnRuLWRhcmsgeyBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1kYXJrKTsgfQogICAgICAgIC5idG4tc20geyBwYWRkaW5nOiA0cHggMTBweDsgZm9udC1zaXplOiAwLjhyZW07IH0KICAgICAgICAuZXhwb3J0LWdyb3VwIHsgZGlzcGxheTogZmxleDsgZ2FwOiA1cHg7IH0KICAgICAgICAuYnRuLWV4cCB7IGJhY2tncm91bmQ6ICM5NWE1YTY7IGNvbG9yOiB3aGl0ZTsgYm9yZGVyOiBub25lOyBwYWRkaW5nOiA1cHggMTBweDsgYm9yZGVyLXJhZGl1czogNHB4OyBjdXJzb3I6IHBvaW50ZXI7IGZvbnQtc2l6ZTogMC44cmVtOyBmb250LXdlaWdodDogYm9sZDsgZGlzcGxheTogZmxleDsgYWxpZ24taXRlbXM6IGNlbnRlcjsgZ2FwOiA1cHg7IH0KICAgICAgICAuYnRuLWV4cDpob3ZlciB7IGJhY2tncm91bmQ6ICM3ZjhjOGQ7IH0KICAgICAgICAuYnRuLW91dGxpbmUgeyBiYWNrZ3JvdW5kOnRyYW5zcGFyZW50OyBib3JkZXI6MXB4IHNvbGlkICNiZGMzYzc7IGNvbG9yOiM3ZjhjOGQ7IH0KICAgICAgICAuYnRuLW91dGxpbmU6aG92ZXIsIC5idG4tb3V0bGluZS5hY3RpdmUgeyBiYWNrZ3JvdW5kOiNiZGMzYzc7IGNvbG9yOndoaXRlOyB9CgogICAgICAgIC8qIFRBQkxFUyAqLwogICAgICAgIHRhYmxlIHsgd2lkdGg6IDEwMCU7IGJvcmRlci1jb2xsYXBzZTogc2VwYXJhdGU7IGJvcmRlci1zcGFjaW5nOiAwOyBmb250LXNpemU6IDAuOXJlbTsgbWFyZ2luLXRvcDogMTBweDsgfQogICAgICAgIHRoLCB0ZCB7IHBhZGRpbmc6IDhweDsgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICNlZWU7IHRleHQtYWxpZ246IGNlbnRlcjsgdmVydGljYWwtYWxpZ246IG1pZGRsZTsgfQogICAgICAgIHRoIHsgYmFja2dyb3VuZDogI2Y4ZjlmYTsgZm9udC13ZWlnaHQ6IDYwMDsgY29sb3I6ICM2MzZlNzI7IHBvc2l0aW9uOiBzdGlja3k7IHRvcDogMDsgei1pbmRleDogNTsgYm9yZGVyLXRvcDogMXB4IHNvbGlkICNlZWU7IH0KICAgICAgICB0ZCB7IGJvcmRlci1sZWZ0OiAxcHggc29saWQgI2VlZTsgfQogICAgICAgIHRkOmxhc3QtY2hpbGQgeyBib3JkZXItcmlnaHQ6IDFweCBzb2xpZCAjZWVlOyB9CiAgICAgICAgdHI6aG92ZXIgdGQgeyBiYWNrZ3JvdW5kLWNvbG9yOiAjZmFmYWZhOyB9CiAgICAgICAgLnN0cnVjdHVyZS10b3RhbC1yb3cgdGQgeyBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1wcmltYXJ5KSAhaW1wb3J0YW50OyBjb2xvcjogd2hpdGU7IGZvbnQtd2VpZ2h0OiBib2xkOyBmb250LXNpemU6IDFyZW07IGJvcmRlci10b3A6IDJweCBzb2xpZCB2YXIoLS1zZWNvbmRhcnkpOyB9CiAgICAgICAgCiAgICAgICAgLyogTElHTkUgTU9ZRU5TIFNVUFBMRU1FTlRBSVJFUyAqLwogICAgICAgIC5yb3ctc3VwcCB7IGJhY2tncm91bmQtY29sb3I6IHZhcigtLXN1cHAtYmcpOyBib3JkZXItdG9wOiAycHggc29saWQgdmFyKC0tc3VwcC1ib3JkZXIpOyBib3JkZXItYm90dG9tOiAycHggc29saWQgdmFyKC0tc3VwcC1ib3JkZXIpOyB9CiAgICAgICAgLnJvdy1zdXBwIHRkIHsgY29sb3I6ICMxNmEwODU7IGZvbnQtd2VpZ2h0OiA2MDA7IHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7IGJvcmRlci1jb2xvcjogI2QxZjJlYjsgfQogICAgICAgIC5pbnB1dC1zdXBwIHsgd2lkdGg6IDgwcHggIWltcG9ydGFudDsgdGV4dC1hbGlnbjogY2VudGVyOyBmb250LXdlaWdodDogYm9sZDsgYm9yZGVyOiAycHggc29saWQgIzFhYmM5YzsgY29sb3I6ICMxNmEwODU7IGJhY2tncm91bmQ6IHdoaXRlOyBwYWRkaW5nOiA2cHg7IGJvcmRlci1yYWRpdXM6IDRweDsgZm9udC1zaXplOiAxcmVtOyB9CiAgICAgICAgLnN1cHAtbGFiZWwtZ3JvdXAgeyBkaXNwbGF5OiBmbGV4OyBhbGlnbi1pdGVtczogY2VudGVyOyBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsgZ2FwOiA1cHg7IGZvbnQtc2l6ZTogMC44NXJlbTsgfQoKICAgICAgICAvKiBHUklMTEUgVEFCTEVVUiBWRVJUSUNBTCAqLwogICAgICAgIC5ncmlkLXdyYXBwZXIgeyBvdmVyZmxvdy14OiBhdXRvOyBiYWNrZ3JvdW5kOiB3aGl0ZTsgYm9yZGVyOiAxcHggc29saWQgI2RmZTZlOTsgcGFkZGluZzogMDsgYm94LXNoYWRvdzogMCA0cHggNnB4IHJnYmEoMCwwLDAsMC4wMik7IG1hcmdpbi1ib3R0b206IDMwcHg7IH0KICAgICAgICAudGgtY2xhc3MgeyB3aWR0aDogNjBweDsgbWluLXdpZHRoOiA2MHB4OyB0ZXh0LWFsaWduOiBjZW50ZXI7IGZvbnQtd2VpZ2h0OiBib2xkOyB9CiAgICAgICAgLnRoLXZlcnRpY2FsIHsgaGVpZ2h0OiAxOTBweDsgdmVydGljYWwtYWxpZ246IGJvdHRvbTsgcGFkZGluZzogMDsgd2lkdGg6IDQ1cHg7IHBvc2l0aW9uOiByZWxhdGl2ZTsgfQogICAgICAgIAogICAgICAgIC50aC10ZXh0LXdyYXBwZXIgeyAKICAgICAgICAgICAgd3JpdGluZy1tb2RlOiB2ZXJ0aWNhbC1ybDsgCiAgICAgICAgICAgIHRyYW5zZm9ybTogcm90YXRlKDE4MGRlZyk7IAogICAgICAgICAgICB3aGl0ZS1zcGFjZTogbm93cmFwOyAKICAgICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyOwogICAgICAgICAgICBtYXJnaW46IDAgYXV0bzsgCiAgICAgICAgICAgIHBhZGRpbmctdG9wOiAxMHB4OyAKICAgICAgICAgICAgaGVpZ2h0OiAxNDBweDsgCiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7IAogICAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyOyAKICAgICAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7CiAgICAgICAgICAgIHdpZHRoOiAxMDAlOwogICAgICAgICAgICBmb250LXdlaWdodDogNzAwOyAKICAgICAgICAgICAgY29sb3I6ICMyYzNlNTA7IAogICAgICAgIH0KICAgICAgICAudGgtY29kZSB7IGZvbnQtc2l6ZTowLjdyZW07IGNvbG9yOiM3ZjhjOGQ7IGRpc3BsYXk6YmxvY2s7IGhlaWdodDoyMHB4OyBtYXJnaW4tdG9wOjVweDsgZm9udC13ZWlnaHQ6bm9ybWFsOyB9CiAgICAgICAgLmNsYXNzLW5hbWUtYnRuIHsgYmFja2dyb3VuZDpub25lOyBib3JkZXI6bm9uZTsgYm9yZGVyLWJvdHRvbToxcHggZGFzaGVkICMzNDk4ZGI7IGNvbG9yOiMyYzNlNTA7IGZvbnQtd2VpZ2h0OmJvbGQ7IGN1cnNvcjpwb2ludGVyOyBmb250LXNpemU6MC45NXJlbTsgfQogICAgICAgIC5jbGFzcy1uYW1lLWJ0bjpob3ZlciB7IGNvbG9yOnZhcigtLXNlY29uZGFyeSk7IGJvcmRlci1ib3R0b20tc3R5bGU6c29saWQ7IH0KICAgICAgICAKICAgICAgICAvKiBSSCBISUVSQVJDSElFICovCiAgICAgICAgLnJvdy1tYXN0ZXIgeyBiYWNrZ3JvdW5kLWNvbG9yOiAjZWNmMGYxOyBmb250LXdlaWdodDogYm9sZDsgfQogICAgICAgIC5yb3ctbWFzdGVyIHRkIHsgYm9yZGVyLXRvcDogMnB4IHNvbGlkICNiZGMzYzc7IGNvbG9yOiAjMmMzZTUwOyB9CiAgICAgICAgLnJvdy1zdWItbWFzdGVyIHsgYmFja2dyb3VuZC1jb2xvcjogI2Y0ZjZmNzsgZm9udC13ZWlnaHQ6IDYwMDsgfQogICAgICAgIC5yb3ctZGV0YWlsIHsgYmFja2dyb3VuZC1jb2xvcjogd2hpdGU7IH0KICAgICAgICAuaW5wdXQtaW5saW5lIHsgd2lkdGg6IDYwcHggIWltcG9ydGFudDsgcGFkZGluZzogNHB4ICFpbXBvcnRhbnQ7IHRleHQtYWxpZ246IGNlbnRlcjsgYm9yZGVyOiAxcHggc29saWQgI2RmZTZlOTsgYmFja2dyb3VuZDogd2hpdGU7IGZvbnQtd2VpZ2h0OiBib2xkOyB9CiAgICAgICAgLmJ0bi1hZGQtc3ViamVjdC10ZWFjaGVyIHsgYmFja2dyb3VuZDogdmFyKC0tc3VjY2Vzcyk7IGNvbG9yOiB3aGl0ZTsgYm9yZGVyOiBub25lOyBib3JkZXItcmFkaXVzOiA1MCU7IHdpZHRoOiAyNHB4OyBoZWlnaHQ6IDI0cHg7IGZvbnQtc2l6ZTogMTRweDsgZm9udC13ZWlnaHQ6IGJvbGQ7IGN1cnNvcjogcG9pbnRlcjsgZGlzcGxheTogaW5saW5lLWZsZXg7IGFsaWduLWl0ZW1zOiBjZW50ZXI7IGp1c3RpZnktY29udGVudDogY2VudGVyOyBtYXJnaW4tbGVmdDogMTBweDsgdHJhbnNpdGlvbjogMC4yczsgfQogICAgICAgIC5zdWItaW5mbyB7IGZvbnQtc2l6ZTogMC44cmVtOyBjb2xvcjogIzdmOGM4ZDsgZm9udC13ZWlnaHQ6IG5vcm1hbDsgbWFyZ2luLWxlZnQ6IDEwcHg7IGZvbnQtc3R5bGU6IGl0YWxpYzsgfQogICAgICAgIC5jb2wtY29kZSB7IGJhY2tncm91bmQtY29sb3I6ICNmOGY5ZmE7IGZvbnQtZmFtaWx5OiBtb25vc3BhY2U7IGZvbnQtc2l6ZTogMC44NXJlbTsgY29sb3I6ICM1NTU7IH0KCiAgICAgICAgLyogS1BJICovCiAgICAgICAgLmtwaS1jb250YWluZXIgeyBkaXNwbGF5OiBncmlkOyBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IHJlcGVhdCg1LCAxZnIpOyBnYXA6IDE1cHg7IG1hcmdpbi1ib3R0b206IDI1cHg7IH0KICAgICAgICAua3BpLWJveCB7IGJhY2tncm91bmQ6IHdoaXRlOyBwYWRkaW5nOiAyMHB4IDEwcHg7IGJvcmRlci1yYWRpdXM6IDhweDsgYm9yZGVyLWxlZnQ6IDVweCBzb2xpZCAjY2NjOyBib3gtc2hhZG93OiAwIDJweCA1cHggcmdiYSgwLDAsMCwwLjA1KTsgcG9zaXRpb246cmVsYXRpdmU7IG92ZXJmbG93OiBoaWRkZW47IH0KICAgICAgICAua3BpLXRpdGxlIHsgZm9udC1zaXplOiAwLjlyZW07IGNvbG9yOiAjN2Y4YzhkOyBmb250LXdlaWdodDogYm9sZDsgdGV4dC10cmFuc2Zvcm06IHVwcGVyY2FzZTsgd2hpdGUtc3BhY2U6IG5vd3JhcDsgb3ZlcmZsb3c6IGhpZGRlbjsgdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7IH0KICAgICAgICAua3BpLXZhbHVlIHsgZm9udC1zaXplOiAxLjZyZW07IGZvbnQtd2VpZ2h0OiA3MDA7IGNvbG9yOiAjMmMzZTUwOyBtYXJnaW4tdG9wOiA4cHg7IH0KICAgICAgICAuZG90YXRpb24tZGlzcGxheSB7IGZvbnQtc2l6ZTogMS44cmVtOyBmb250LXdlaWdodDogYm9sZDsgY29sb3I6IHZhcigtLXByaW1hcnkpOyBtYXJnaW4tYm90dG9tOiAxNXB4OyBwYWRkaW5nOiA1cHggMDsgYm9yZGVyLWJvdHRvbTogMnB4IHNvbGlkICNlZWU7IGRpc3BsYXk6IGJsb2NrOyB9CgogICAgICAgIC8qIFRPR0dMRSAqLwogICAgICAgIC50b2dnbGUtY29udGFpbmVyIHsgZGlzcGxheTogZmxleDsgYmFja2dyb3VuZC1jb2xvcjogI2UwZTBlMDsgYm9yZGVyLXJhZGl1czogMzBweDsgcGFkZGluZzogNHB4OyB3aWR0aDogZml0LWNvbnRlbnQ7IGJveC1zaGFkb3c6IGluc2V0IDAgMnB4IDRweCByZ2JhKDAsMCwwLDAuMSk7IH0KICAgICAgICAudG9nZ2xlLWJ0biB7IGJvcmRlcjogbm9uZTsgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7IHBhZGRpbmc6IDhweCAyNHB4OyBib3JkZXItcmFkaXVzOiAyNXB4OyBjdXJzb3I6IHBvaW50ZXI7IGZvbnQtd2VpZ2h0OiA2MDA7IGNvbG9yOiAjN2Y4YzhkOyB0cmFuc2l0aW9uOiBhbGwgMC4zczsgZGlzcGxheTogZmxleDsgYWxpZ24taXRlbXM6IGNlbnRlcjsgZ2FwOiA4cHg7IH0KICAgICAgICAudG9nZ2xlLWJ0bi5hY3RpdmUgeyBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1zZWNvbmRhcnkpOyBjb2xvcjogd2hpdGU7IGJveC1zaGFkb3c6IDAgNHB4IDZweCByZ2JhKDUyLCAxNTIsIDIxOSwgMC4zKTsgfQoKICAgICAgICAvKiBUQUJTICovCiAgICAgICAgLnRhYi1jb250YWluZXIgeyBkaXNwbGF5OiBmbGV4OyBnYXA6IDVweDsgYm9yZGVyLWJvdHRvbTogMnB4IHNvbGlkICNkZmU2ZTk7IH0KICAgICAgICAudGFiIHsgcGFkZGluZzogMTBweCAyMHB4OyBiYWNrZ3JvdW5kOiAjZTllY2VmOyBib3JkZXItcmFkaXVzOiA2cHggNnB4IDAgMDsgY3Vyc29yOiBwb2ludGVyOyBmb250LXdlaWdodDogYm9sZDsgY29sb3I6ICM2MzZlNzI7IGJvcmRlcjogMXB4IHNvbGlkICNkZmU2ZTk7IGJvcmRlci1ib3R0b206IG5vbmU7IH0KICAgICAgICAudGFiLmFjdGl2ZSB7IGJhY2tncm91bmQ6IHdoaXRlOyBjb2xvcjogdmFyKC0tc2Vjb25kYXJ5KTsgYm9yZGVyLXRvcDogM3B4IHNvbGlkIHZhcigtLXNlY29uZGFyeSk7IG1hcmdpbi1ib3R0b206IC0ycHg7IHBhZGRpbmctYm90dG9tOiAxMnB4OyB6LWluZGV4OiAxMDsgfQogICAgICAgIC50YWIuZ2xvYmFsLXRhYiB7IGNvbG9yOiAjOGU0NGFkOyB9IAogICAgICAgIC50YWIuZ2xvYmFsLXRhYi5hY3RpdmUgeyBib3JkZXItdG9wLWNvbG9yOiAjOGU0NGFkOyBjb2xvcjogIzhlNDRhZDsgfQoKICAgICAgICAvKiBJTlBVVFMgKi8KICAgICAgICBpbnB1dFt0eXBlPSJudW1iZXIiXSwgaW5wdXRbdHlwZT0idGV4dCJdLCBzZWxlY3QgeyB3aWR0aDogMTAwJTsgcGFkZGluZzogNnB4OyBib3JkZXI6IDFweCBzb2xpZCAjY2NjOyBib3JkZXItcmFkaXVzOiA0cHg7IGJveC1zaXppbmc6IGJvcmRlci1ib3g7IH0KICAgICAgICAuaW5wLWhvdXJzLCAuaW5wLW1hcmdlLCAuaW5wLWNvZWYgeyB3aWR0aDogNTJweCAhaW1wb3J0YW50OyB0ZXh0LWFsaWduOiBjZW50ZXI7IGZvbnQtd2VpZ2h0OiBib2xkOyBwYWRkaW5nOiAzcHg7IGhlaWdodDogMjJweDsgYm9yZGVyLXJhZGl1czogMnB4OyBmb250LXNpemU6IDAuODJyZW07IH0KICAgICAgICAuaW5wLWhvdXJzIHsgYm9yZGVyOiAxcHggc29saWQgI2JkYzNjNzsgfQogICAgICAgIC5pbnAtaG91cnMuaGFzLWRlbWkgeyBib3JkZXItY29sb3I6ICM4ZTQ0YWQ7IGJhY2tncm91bmQ6ICNmZGYyZmY7IGNvbG9yOiAjNmMzNDgzOyB9CiAgICAgICAgLmlucC1kZW1pLWxhYmVsIHsgZm9udC1zaXplOiAwLjZyZW07IGNvbG9yOiAjOGU0NGFkOyBmb250LXdlaWdodDogNzAwOyB0ZXh0LWFsaWduOiBjZW50ZXI7IGxpbmUtaGVpZ2h0OiAxOyBtYXJnaW4tdG9wOiAxcHg7IH0KICAgICAgICAuaW5wLW1hcmdlIHsgYm9yZGVyOiAxcHggc29saWQgI2YxYzQwZjsgYmFja2dyb3VuZC1jb2xvcjogI2ZmZmNmNTsgY29sb3I6ICNkMzU0MDA7IH0KICAgICAgICAuaW5wLWNvZWYgeyBib3JkZXI6IDFweCBzb2xpZCAjOWI1OWI2OyBiYWNrZ3JvdW5kLWNvbG9yOiAjZmJmNmZmOyBjb2xvcjogIzhlNDRhZDsgfQogICAgICAgIC52ZXJ0aWNhbC1zdGFjayB7IGRpc3BsYXk6IGZsZXg7IGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47IGdhcDogM3B4OyBhbGlnbi1pdGVtczogY2VudGVyOyB9CgogICAgICAgIC50ZXh0LXN1Y2Nlc3MgeyBjb2xvcjogdmFyKC0tc3VjY2Vzcyk7IGZvbnQtd2VpZ2h0OiBib2xkOyB9CiAgICAgICAgLnRleHQtZGFuZ2VyIHsgY29sb3I6IHZhcigtLWRhbmdlcik7IGZvbnQtd2VpZ2h0OiBib2xkOyB9CiAgICAgICAgLnBlcmNlbnQtZGlzcGxheSB7IGNvbG9yOiAjYzAzOTJiOyBmb250LXdlaWdodDogYm9sZDsgZm9udC1zaXplOiAxLjFyZW07IG1hcmdpbi10b3A6IDVweDsgZGlzcGxheTogYmxvY2s7IHRleHQtYWxpZ246IGNlbnRlcjsgYm9yZGVyOiAycHggc29saWQgI2MwMzkyYjsgcGFkZGluZzogNXB4OyBib3JkZXItcmFkaXVzOiA4cHg7IGJhY2tncm91bmQ6ICNmZmY1ZjU7IHdpZHRoOiBmaXQtY29udGVudDsgbWFyZ2luLWxlZnQ6IGF1dG87IG1hcmdpbi1yaWdodDogYXV0bzsgfQogICAgICAgIAogICAgICAgIC5sdmwtY2hlY2stY29udGFpbmVyIHsgZGlzcGxheTpmbGV4OyBmbGV4LXdyYXA6d3JhcDsgZ2FwOjhweDsgYWxpZ24taXRlbXM6Y2VudGVyOyB9CiAgICAgICAgLmx2bC1jaGVjay1pdGVtIHsgZGlzcGxheTpmbGV4OyBhbGlnbi1pdGVtczpjZW50ZXI7IGdhcDozcHg7IGJhY2tncm91bmQ6I2Y4ZjlmYTsgYm9yZGVyOjFweCBzb2xpZCAjZWVlOyBwYWRkaW5nOjJweCA2cHg7IGJvcmRlci1yYWRpdXM6NHB4OyBmb250LXNpemU6MC44cmVtOyB9CiAgICAgICAgLmx2bC1pbnB1dC1pdGVtIHsgZGlzcGxheTpmbGV4OyBhbGlnbi1pdGVtczpjZW50ZXI7IGdhcDo1cHg7IG1hcmdpbi1ib3R0b206MnB4OyB9CiAgICAgICAgLmx2bC1pbnB1dC1pdGVtIHNwYW4geyBmb250LXNpemU6MC44cmVtOyBmb250LXdlaWdodDpib2xkOyB9CgkJLyogRkVOw4pUUkUgVkVOVElMQVRJT04gKFNQTElUIE1PREFMKSAqLwojc3BsaXQtb3ZlcmxheSB7CiAgICBwb3NpdGlvbjogZml4ZWQ7IHRvcDogMDsgbGVmdDogMDsgd2lkdGg6IDEwMCU7IGhlaWdodDogMTAwJTsKICAgIGJhY2tncm91bmQ6IHJnYmEoMCwgMCwgMCwgMC41KTsgei1pbmRleDogMTAwMDA7CiAgICBkaXNwbGF5OiBub25lOyBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsgYWxpZ24taXRlbXM6IGNlbnRlcjsKICAgIGJhY2tkcm9wLWZpbHRlcjogYmx1cigycHgpOwp9Ci5zcGxpdC1ib3ggewogICAgYmFja2dyb3VuZDogd2hpdGU7IHBhZGRpbmc6IDI1cHg7IGJvcmRlci1yYWRpdXM6IDhweDsgCiAgICB3aWR0aDogNDAwcHg7IG1heC13aWR0aDogOTAlOwogICAgYm94LXNoYWRvdzogMCAxMHB4IDI1cHggcmdiYSgwLDAsMCwwLjIpOwp9Ci5zcGxpdC1oZWFkZXIgeyAKICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjZWVlOyBwYWRkaW5nLWJvdHRvbTogMTVweDsgbWFyZ2luLWJvdHRvbTogMTVweDsgCiAgICBkaXNwbGF5OiBmbGV4OyBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47IGFsaWduLWl0ZW1zOiBjZW50ZXI7IAp9Ci5zcGxpdC1oZWFkZXIgaDMgeyBtYXJnaW46IDA7IGNvbG9yOiB2YXIoLS1wcmltYXJ5KTsgfQouc3BsaXQtcm93IHsKICAgIGRpc3BsYXk6IGZsZXg7IGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjsgYWxpZ24taXRlbXM6IGNlbnRlcjsKICAgIG1hcmdpbi1ib3R0b206IDEycHg7IHBhZGRpbmc6IDhweDsgYmFja2dyb3VuZDogI2Y4ZjlmYTsgYm9yZGVyLXJhZGl1czogNnB4OyBib3JkZXI6IDFweCBzb2xpZCAjZWVlOwp9Ci5zcGxpdC1yb3cgbGFiZWwgeyBmb250LXdlaWdodDogYm9sZDsgY29sb3I6ICM1NTU7IH0KLnNwbGl0LXJvdyBpbnB1dCB7IHdpZHRoOiA4MHB4ICFpbXBvcnRhbnQ7IHRleHQtYWxpZ246IGNlbnRlcjsgZm9udC13ZWlnaHQ6IGJvbGQ7IGNvbG9yOiB2YXIoLS1zZWNvbmRhcnkpOyB9Ci5zcGxpdC1hY3Rpb25zIHsgZGlzcGxheTogZmxleDsganVzdGlmeS1jb250ZW50OiBmbGV4LWVuZDsgZ2FwOiAxMHB4OyBtYXJnaW4tdG9wOiAyMHB4OyBib3JkZXItdG9wOiAxcHggc29saWQgI2VlZTsgcGFkZGluZy10b3A6IDE1cHg7IH0KLmluZm8tZGlzcG8geyBiYWNrZ3JvdW5kOiAjZThmOGY1OyBjb2xvcjogIzE2YTA4NTsgcGFkZGluZzogMTBweDsgYm9yZGVyLXJhZGl1czogNXB4OyBtYXJnaW4tYm90dG9tOiAxNXB4OyBmb250LXdlaWdodDogYm9sZDsgdGV4dC1hbGlnbjogY2VudGVyOyBmb250LXNpemU6IDAuOXJlbTsgfQoJCQoJCS8qIC0tLSBBSk9VVCBQT1VSIMOJUVVJUEVTIFDDiURBR09HSVFVRVMgLS0tICovCiAgICAgICAgLnRlYW0tdGFibGUgeyBmb250LXNpemU6IDAuOHJlbTsgd2lkdGg6IDEwMCU7IGJvcmRlci1jb2xsYXBzZTogY29sbGFwc2U7IH0KICAgICAgICAudGVhbS10YWJsZSB0aCB7IGJhY2tncm91bmQ6ICMyYzNlNTA7IGNvbG9yOiB3aGl0ZTsgZm9udC13ZWlnaHQ6IGJvbGQ7IGJvcmRlcjogMXB4IHNvbGlkICMzNDQ5NWU7IHBhZGRpbmc6IDEwcHggNXB4OyBwb3NpdGlvbjogc3RpY2t5OyB0b3A6IDA7IHotaW5kZXg6IDEwOyB9CiAgICAgICAgLnRlYW0tdGFibGUgdGQgeyBib3JkZXI6IDFweCBzb2xpZCAjYmRjM2M3OyBwYWRkaW5nOiAwOyBoZWlnaHQ6IDM1cHg7IG1pbi13aWR0aDogNDBweDsgdGV4dC1hbGlnbjogY2VudGVyOyB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlOyB9CiAgICAgICAgCiAgICAgICAgLnRlYW0tc3ViamVjdC1yb3cgeyBiYWNrZ3JvdW5kLWNvbG9yOiAjZWNmMGYxOyBmb250LXdlaWdodDogYm9sZDsgdGV4dC1hbGlnbjogbGVmdDsgcGFkZGluZy1sZWZ0OiAxMHB4ICFpbXBvcnRhbnQ7IGNvbG9yOiAjMmMzZTUwOyBib3JkZXItdG9wOiAycHggc29saWQgIzdmOGM4ZCAhaW1wb3J0YW50OyB9CiAgICAgICAgLnRlYW0tdGVhY2hlci1sYWJlbCB7IHRleHQtYWxpZ246IGxlZnQ7IHBhZGRpbmctbGVmdDogMTBweCAhaW1wb3J0YW50OyBmb250LXNpemU6IDAuODVyZW07IGNvbG9yOiAjMzMzOyBiYWNrZ3JvdW5kOiAjZmZmOyB3aWR0aDogMjIwcHg7IG1heC13aWR0aDogMjIwcHg7IHdoaXRlLXNwYWNlOiBub3dyYXA7IG92ZXJmbG93OiBoaWRkZW47IHRleHQtb3ZlcmZsb3c6IGVsbGlwc2lzOyBmb250LXdlaWdodDogNTAwOyB9CiAgICAgICAgCiAgICAgICAgLmNlbGwtYXNzaWduIHsgd2lkdGg6IDEwMCU7IGhlaWdodDogMTAwJTsgZGlzcGxheTogZmxleDsgYWxpZ24taXRlbXM6IGNlbnRlcjsganVzdGlmeS1jb250ZW50OiBjZW50ZXI7IGN1cnNvcjogcG9pbnRlcjsgdHJhbnNpdGlvbjogMC4xczsgZm9udC1zaXplOiAxLjJyZW07IHVzZXItc2VsZWN0OiBub25lOyB9CiAgICAgICAgLmNlbGwtYXNzaWduOmhvdmVyIHsgYmFja2dyb3VuZC1jb2xvcjogI2YwZjBmMDsgfQogICAgICAgIAovKiAtLS0gU8OJTEVDVEVVUiBEJ0VOVElUw4lTIE1VTFRJIChWOSkgLS0tICovCi5lbnRpdHktc2VsZWN0b3IgewogICAgZGlzcGxheTogZmxleDsKICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47CiAgICBnYXA6IDZweDsKICAgIHBhZGRpbmc6IDEycHggMTVweCAxOHB4IDE1cHg7CiAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgcmdiYSgyNTUsMjU1LDI1NSwwLjE1KTsKICAgIG1hcmdpbi1ib3R0b206IDEwcHg7Cn0KLmVudGl0eS1sYWJlbCB7CiAgICBmb250LXNpemU6IDAuN3JlbTsKICAgIGNvbG9yOiByZ2JhKDI1NSwyNTUsMjU1LDAuNSk7CiAgICB0ZXh0LXRyYW5zZm9ybTogdXBwZXJjYXNlOwogICAgbGV0dGVyLXNwYWNpbmc6IDFweDsKICAgIGZvbnQtd2VpZ2h0OiA3MDA7CiAgICBtYXJnaW4tYm90dG9tOiA0cHg7Cn0KLmVudGl0eS1idG4gewogICAgYmFja2dyb3VuZDogcmdiYSgyNTUsMjU1LDI1NSwwLjA3KTsKICAgIGJvcmRlcjogMXB4IHNvbGlkIHJnYmEoMjU1LDI1NSwyNTUsMC4xNSk7CiAgICBib3JkZXItcmFkaXVzOiA4cHg7CiAgICBjb2xvcjogI2JkYzNjNzsKICAgIHBhZGRpbmc6IDlweCAxMnB4OwogICAgY3Vyc29yOiBwb2ludGVyOwogICAgZm9udC1zaXplOiAwLjg1cmVtOwogICAgZm9udC13ZWlnaHQ6IDYwMDsKICAgIHRleHQtYWxpZ246IGxlZnQ7CiAgICB0cmFuc2l0aW9uOiBhbGwgMC4yczsKICAgIGRpc3BsYXk6IGZsZXg7CiAgICBhbGlnbi1pdGVtczogY2VudGVyOwogICAgZ2FwOiA4cHg7Cn0KLmVudGl0eS1idG46aG92ZXIgewogICAgYmFja2dyb3VuZDogcmdiYSgyNTUsMjU1LDI1NSwwLjE0KTsKICAgIGNvbG9yOiB3aGl0ZTsKICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWCgycHgpOwp9Ci5lbnRpdHktYnRuLmFjdGl2ZSB7CiAgICBjb2xvcjogd2hpdGU7CiAgICBib3gtc2hhZG93OiAwIDNweCAxMHB4IHJnYmEoMCwwLDAsMC4zNSk7CiAgICBib3JkZXItY29sb3I6IHRyYW5zcGFyZW50OwogICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVYKDApOwp9Ci8qIENvdWxldXJzIHBhciBlbnRpdMOpICovCiNlbnRpdHktYnRuLWNvbGxlZ2UuYWN0aXZlICAgIHsgYmFja2dyb3VuZDogIzE1NjVDMDsgYm94LXNoYWRvdzogMCAzcHggMTBweCByZ2JhKDIxLDEwMSwxOTIsMC41NSk7IH0KI2VudGl0eS1idG4tbHljZWUuYWN0aXZlICAgICAgeyBiYWNrZ3JvdW5kOiAjMkU3RDMyOyBib3gtc2hhZG93OiAwIDNweCAxMHB4IHJnYmEoNDYsMTI1LDUwLDAuNTUpOyB9CiNlbnRpdHktYnRuLWx5Y2VlX3Byby5hY3RpdmUgIHsgYmFja2dyb3VuZDogI0U2NTEwMDsgYm94LXNoYWRvdzogMCAzcHggMTBweCByZ2JhKDIzMCw4MSwwLDAuNTUpOyB9CiNlbnRpdHktYnRuLXBvbGUuYWN0aXZlICAgICAgIHsgYmFja2dyb3VuZDogIzZBMUI5QTsgYm94LXNoYWRvdzogMCAzcHggMTBweCByZ2JhKDEwNiwyNywxNTQsMC41NSk7IH0KI2VudGl0eS1idG4tY29sbGVnZTpub3QoLmFjdGl2ZSk6aG92ZXIgICAgeyBib3JkZXItY29sb3I6ICMxNTY1QzA7IGNvbG9yOiAjOTBDQUY5OyB9CiNlbnRpdHktYnRuLWx5Y2VlOm5vdCguYWN0aXZlKTpob3ZlciAgICAgIHsgYm9yZGVyLWNvbG9yOiAjMkU3RDMyOyBjb2xvcjogI0E1RDZBNzsgfQojZW50aXR5LWJ0bi1seWNlZV9wcm86bm90KC5hY3RpdmUpOmhvdmVyICB7IGJvcmRlci1jb2xvcjogI0U2NTEwMDsgY29sb3I6ICNGRkNDODA7IH0KI2VudGl0eS1idG4tcG9sZTpub3QoLmFjdGl2ZSk6aG92ZXIgICAgICAgeyBib3JkZXItY29sb3I6ICM2QTFCOUE7IGNvbG9yOiAjQ0U5M0Q4OyB9Ci5lbnRpdHktYnRuIC5lbnRpdHktYmFkZ2UgewogICAgZm9udC1zaXplOiAwLjY4cmVtOwogICAgYmFja2dyb3VuZDogcmdiYSgyNTUsMjU1LDI1NSwwLjE4KTsKICAgIHBhZGRpbmc6IDFweCA2cHg7CiAgICBib3JkZXItcmFkaXVzOiAxMHB4OwogICAgbWFyZ2luLWxlZnQ6IGF1dG87CiAgICB3aGl0ZS1zcGFjZTogbm93cmFwOwogICAgZm9udC13ZWlnaHQ6IDcwMDsKfQouZW50aXR5LWJ0bi5hY3RpdmUgLmVudGl0eS1iYWRnZSB7CiAgICBiYWNrZ3JvdW5kOiByZ2JhKDI1NSwyNTUsMjU1LDAuMjgpOwp9Ci8qIEJhZGdlIGRlIGRvdGF0aW9uIHRvdGFsZSBkYW5zIGxlIGhlYWRlciAqLwoubXVsdGktc3VtbWFyeSB7CiAgICBiYWNrZ3JvdW5kOiByZ2JhKDI1NSwyNTUsMjU1LDAuMDUpOwogICAgYm9yZGVyLXJhZGl1czogNXB4OwogICAgcGFkZGluZzogOHB4IDEycHg7CiAgICBtYXJnaW46IDAgMTVweCAxMHB4IDE1cHg7CiAgICBmb250LXNpemU6IDAuNzVyZW07CiAgICBjb2xvcjogcmdiYSgyNTUsMjU1LDI1NSwwLjcpOwogICAgYm9yZGVyOiAxcHggc29saWQgcmdiYSgyNTUsMjU1LDI1NSwwLjEpOwp9Ci5tdWx0aS1zdW1tYXJ5LXJvdyB7CiAgICBkaXNwbGF5OiBmbGV4OwogICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOwogICAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICAgIHBhZGRpbmc6IDJweCAwOwp9Ci5tdWx0aS1zdW1tYXJ5LXZhbCB7CiAgICBmb250LXdlaWdodDogNzAwOwogICAgY29sb3I6IHdoaXRlOwp9CgogICAgICAgIC8qIENvdWxldXJzIGRlcyDDqXRhdHMgKi8KICAgICAgICAubW9kZS1jbGFzcyB7IGJhY2tncm91bmQtY29sb3I6ICMyN2FlNjAgIWltcG9ydGFudDsgY29sb3I6IHdoaXRlOyB9IC8qIFZlcnQgOiBDbGFzc2UgRW50acOocmUgKi8KICAgICAgICAubW9kZS1ncm91cCB7IGJhY2tncm91bmQtY29sb3I6ICMzNDk4ZGIgIWltcG9ydGFudDsgY29sb3I6IHdoaXRlOyB9IC8qIEJsZXUgOiBHcm91cGUgKi8KICAgICAgICAubWlzc2luZy10ZWFjaGVyIHsgYmFja2dyb3VuZC1jb2xvcjogI2ZhZGJkOCAhaW1wb3J0YW50OyBib3gtc2hhZG93OiBpbnNldCAwIDAgMCAycHggI2MwMzkyYjsgfSAvKiBSb3VnZSA6IEFsZXJ0ZSAqLwogICAgICAgIAogICAgICAgIC8qIEluZGljYXRldXIgUHJvZiBQcmluY2lwYWwgKENvdXJvbm5lKSAqLwogICAgICAgIC5pcy1wcCB7IHBvc2l0aW9uOiByZWxhdGl2ZTsgYm9yZGVyOiAzcHggc29saWQgI2YxYzQwZiAhaW1wb3J0YW50OyB6LWluZGV4OiA1OyB9CiAgICAgICAgLmlzLXBwOjphZnRlciB7IAogICAgICAgICAgICBjb250ZW50OiAn8J+RkSc7IHBvc2l0aW9uOiBhYnNvbHV0ZTsgdG9wOiAtMTRweDsgcmlnaHQ6IC04cHg7IAogICAgICAgICAgICBiYWNrZ3JvdW5kOiB3aGl0ZTsgYm9yZGVyLXJhZGl1czogNTAlOyBwYWRkaW5nOiAxcHg7IAogICAgICAgICAgICBmb250LXNpemU6IDE0cHg7IGJveC1zaGFkb3c6IDAgMXB4IDNweCByZ2JhKDAsMCwwLDAuMyk7IGJvcmRlcjoxcHggc29saWQgI2YxYzQwZjsKICAgICAgICB9CgkJLyogQ2FzZSBkw6lzYWN0aXbDqWUgKDBoIGRhbnMgbGEgbWF0acOocmUpICovCiAgICAgICAgLmNlbGwtZGlzYWJsZWQgewogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZTBlMGUwICFpbXBvcnRhbnQ7IC8qIEdyaXMgKi8KICAgICAgICAgICAgY3Vyc29yOiBub3QtYWxsb3dlZCAhaW1wb3J0YW50OwogICAgICAgICAgICBvcGFjaXR5OiAwLjY7CiAgICAgICAgICAgIHBvaW50ZXItZXZlbnRzOiBub25lOyAvKiBCbG9xdWUgbGUgY2xpYyAqLwogICAgICAgICAgICBib3gtc2hhZG93OiBub25lICFpbXBvcnRhbnQ7CiAgICAgICAgICAgIGJvcmRlci1jb2xvcjogI2QwZDNkNCAhaW1wb3J0YW50OwogICAgICAgIH0KCi8qIC0tLSBNT0RBTCBFWFBPUlQgTU9ERVJORSAoVjIpIC0tLSAqLwouZXhwb3J0LXNlY3Rpb24tdGl0bGUgewogICAgZm9udC1zaXplOiAwLjlyZW07CiAgICBmb250LXdlaWdodDogNzAwOwogICAgY29sb3I6ICM3ZjhjOGQ7CiAgICBtYXJnaW4tYm90dG9tOiAxMHB4OwogICAgbWFyZ2luLXRvcDogMjBweDsKICAgIHRleHQtdHJhbnNmb3JtOiB1cHBlcmNhc2U7CiAgICBsZXR0ZXItc3BhY2luZzogMC41cHg7Cn0KCi5leHBvcnQtdGlsZXMtcm93IHsKICAgIGRpc3BsYXk6IGdyaWQ7CiAgICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IHJlcGVhdCgyLCAxZnIpOwogICAgZ2FwOiAxNXB4Owp9CgouZXhwb3J0LXRpbGUgewogICAgYmFja2dyb3VuZDogd2hpdGU7CiAgICBib3JkZXI6IDJweCBzb2xpZCAjZWNmMGYxOwogICAgYm9yZGVyLXJhZGl1czogMTBweDsKICAgIHBhZGRpbmc6IDE1cHg7CiAgICBjdXJzb3I6IHBvaW50ZXI7CiAgICB0cmFuc2l0aW9uOiBhbGwgMC4ycyBlYXNlOwogICAgZGlzcGxheTogZmxleDsKICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47CiAgICBhbGlnbi1pdGVtczogY2VudGVyOwogICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7CiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7CiAgICBjb2xvcjogIzJjM2U1MDsKICAgIHBvc2l0aW9uOiByZWxhdGl2ZTsKICAgIGhlaWdodDogMTAwcHg7IC8qIEhhdXRldXIgZml4ZSBwb3VyIHVuaWZvcm1pdMOpICovCn0KCi5leHBvcnQtdGlsZTpob3ZlciB7CiAgICBib3JkZXItY29sb3I6ICMzNDk4ZGI7CiAgICBiYWNrZ3JvdW5kOiAjZWJmNWZiOwogICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKC0ycHgpOwp9CgouZXhwb3J0LXRpbGUuc2VsZWN0ZWQgewogICAgYm9yZGVyLWNvbG9yOiAjMjdhZTYwOwogICAgYmFja2dyb3VuZDogI2U4ZjhmNTsKICAgIGNvbG9yOiAjMjdhZTYwOwogICAgYm94LXNoYWRvdzogMCA0cHggMTBweCByZ2JhKDM5LCAxNzQsIDk2LCAwLjIpOwp9CgouZXhwb3J0LXRpbGUuc2VsZWN0ZWQ6OmFmdGVyIHsKICAgIGNvbnRlbnQ6ICfinJQnOwogICAgcG9zaXRpb246IGFic29sdXRlOwogICAgdG9wOiA1cHg7IHJpZ2h0OiA1cHg7CiAgICBmb250LXNpemU6IDFyZW07CiAgICBjb2xvcjogIzI3YWU2MDsKfQoKLnRpbGUtbGFiZWwgeyBmb250LXdlaWdodDogYm9sZDsgZm9udC1zaXplOiAwLjk1cmVtOyBtYXJnaW4tdG9wOiA4cHg7IH0KCi8qIC0tLSBJQ09ORVMgQ1NTIFBVUkUgKFBvdXIgw6p0cmUgc8O7ciBkdSB2aXN1ZWwpIC0tLSAqLwouaWNvbi1wYXBlciB7CiAgICBib3JkZXI6IDJweCBzb2xpZCBjdXJyZW50Q29sb3I7CiAgICBib3JkZXItcmFkaXVzOiAycHg7CiAgICBwb3NpdGlvbjogcmVsYXRpdmU7CiAgICBiYWNrZ3JvdW5kOiByZ2JhKDAsMCwwLDAuMDUpOwp9Ci8qIExpZ25lcyBkZSB0ZXh0ZSBzaW11bMOpZXMgw6AgbCdpbnTDqXJpZXVyICovCi5pY29uLXBhcGVyOjpiZWZvcmUgewogICAgY29udGVudDogJyc7IHBvc2l0aW9uOiBhYnNvbHV0ZTsKICAgIGJhY2tncm91bmQ6IGN1cnJlbnRDb2xvcjsgb3BhY2l0eTogMC4zOwp9CgovKiBQb3J0cmFpdCA6IEhhdXQgZXQgw6l0cm9pdCAqLwouaWNvbi1wb3J0cmFpdCB7IHdpZHRoOiAyNHB4OyBoZWlnaHQ6IDM0cHg7IH0KLmljb24tcG9ydHJhaXQ6OmJlZm9yZSB7IHRvcDogNnB4OyBsZWZ0OiA0cHg7IHJpZ2h0OiA0cHg7IGhlaWdodDogMnB4OyBib3gtc2hhZG93OiAwIDRweCAwIGN1cnJlbnRDb2xvciwgMCA4cHggMCBjdXJyZW50Q29sb3I7IH0KCi8qIFBheXNhZ2UgOiBMYXJnZSBldCBiYXMgKi8KLmljb24tbGFuZHNjYXBlIHsgd2lkdGg6IDM0cHg7IGhlaWdodDogMjRweDsgfQouaWNvbi1sYW5kc2NhcGU6OmJlZm9yZSB7IHRvcDogNnB4OyBsZWZ0OiA0cHg7IHJpZ2h0OiA0cHg7IGhlaWdodDogMnB4OyBib3gtc2hhZG93OiAwIDRweCAwIGN1cnJlbnRDb2xvciwgMCA4cHggMCBjdXJyZW50Q29sb3I7IH0KCi8qIEZvcm1hdHMgKEp1c3RlIGR1IHRleHRlIHN0eWxpc8OpKSAqLwouaWNvbi1mb3JtYXQgeyBmb250LXNpemU6IDEuNXJlbTsgZm9udC13ZWlnaHQ6IDkwMDsgZm9udC1mYW1pbHk6IHNhbnMtc2VyaWY7IH0KCi5leHBvcnQtb3B0aW9ucy1yb3cgewogICAgYmFja2dyb3VuZDogI2Y4ZjlmYTsKICAgIHBhZGRpbmc6IDE1cHg7CiAgICBib3JkZXItcmFkaXVzOiA4cHg7CiAgICBtYXJnaW4tdG9wOiAyNXB4OwogICAgYm9yZGVyOiAxcHggc29saWQgI2VlZTsKfQouc3dpdGNoLWxhYmVsIHsgZGlzcGxheTogZmxleDsgYWxpZ24taXRlbXM6IGNlbnRlcjsgZ2FwOiAxMHB4OyBjdXJzb3I6IHBvaW50ZXI7IGNvbG9yOiAjMzQ0OTVlOyB9CgovKiBXSURHRVQgS1BJIERPVUJMRSAqLwoua3BpLXdpZGdldCB7CiAgICBiYWNrZ3JvdW5kOiB3aGl0ZTsKICAgIGJvcmRlcjogMXB4IHNvbGlkICNiZGMzYzc7CiAgICBib3JkZXItcmFkaXVzOiA2cHg7CiAgICBwYWRkaW5nOiA0cHggMTBweDsKICAgIGRpc3BsYXk6IGZsZXg7CiAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uOwogICAgZ2FwOiA0cHg7CiAgICBtYXJnaW4tcmlnaHQ6IGF1dG87IG1hcmdpbi1sZWZ0OiAyMHB4OwogICAgYm94LXNoYWRvdzogMCAycHggNHB4IHJnYmEoMCwwLDAsMC4wMyk7CiAgICBtaW4td2lkdGg6IDIwMHB4Owp9Cgoua3BpLXJvdyB7CiAgICBkaXNwbGF5OiBmbGV4OwogICAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICAgIGdhcDogOHB4OwogICAgZm9udC1zaXplOiAwLjg1cmVtOwogICAgbGluZS1oZWlnaHQ6IDEuMjsKfQoKLmxldmVsLXJvdyB7CiAgICBib3JkZXItdG9wOiAxcHggc29saWQgI2YxZjJmNjsKICAgIHBhZGRpbmctdG9wOiA0cHg7Cn0KCi5rcGktaWNvbiB7IGZvbnQtc2l6ZTogMC45cmVtOyB9Ci5rcGktbGFiZWwgeyBmb250LXdlaWdodDogYm9sZDsgY29sb3I6ICM3ZjhjOGQ7IGZvbnQtc2l6ZTogMC43NXJlbTsgd2lkdGg6IDQwcHg7IH0KLmtwaS12YWwgeyBmb250LXdlaWdodDogODAwOyBjb2xvcjogIzJjM2U1MDsgZmxleC1ncm93OiAxOyB0ZXh0LWFsaWduOiByaWdodDsgbWFyZ2luLXJpZ2h0OiA4cHg7IH0KCi5rcGktdGFnIHsKICAgIGZvbnQtc2l6ZTogMC43NXJlbTsKICAgIGZvbnQtd2VpZ2h0OiBib2xkOwogICAgcGFkZGluZzogMXB4IDZweDsKICAgIGJvcmRlci1yYWRpdXM6IDRweDsKICAgIGNvbG9yOiB3aGl0ZTsKICAgIG1pbi13aWR0aDogMzVweDsKICAgIHRleHQtYWxpZ246IGNlbnRlcjsKfQoKLyogQ291bGV1cnMgZGVzIGRlbHRhcyAqLwouYmctcG9zIHsgYmFja2dyb3VuZC1jb2xvcjogIzI3YWU2MDsgfSAvKiBWZXJ0IChSZXN0ZSkgKi8KLmJnLW5lZyB7IGJhY2tncm91bmQtY29sb3I6ICNjMDM5MmI7IH0gLyogUm91Z2UgKETDqXBhc3NlbWVudCkgKi8KLmJnLW51bCB7IGJhY2tncm91bmQtY29sb3I6ICM5NWE1YTY7IH0gLyogR3JpcyAoUGlsZSBwb2lsKSAqLwoKLyogLS0tIE5PVVZFQVUgU1RZTEUgREVTIEVOLVTDilRFUyAoUMO0bGVzICYgTWF0acOocmVzIFNvbG9zKSAtLS0gKi8KLyogLS0tIE5PVVZFQVUgU1RZTEUgREVTIEVOLVTDilRFUyAoR3JpcyBBbnRocmFjaXRlKSAtLS0gKi8KLnJvdy1oZWFkZXIgewogICAgYmFja2dyb3VuZC1jb2xvcjogIzQ1NWE2NCAhaW1wb3J0YW50OyAvKiBHcmlzIGZvbmPDqSBuZXV0cmUgKi8KICAgIGNvbG9yOiB3aGl0ZSAhaW1wb3J0YW50OwogICAgZm9udC13ZWlnaHQ6IGJvbGQ7CiAgICBib3JkZXItdG9wOiAycHggc29saWQgIzYwN2Q4YjsKfQoKLyogT24gZm9yY2UgbGEgY291bGV1ciDDoCByZXN0ZXIgbGEgbcOqbWUgYXUgc3Vydm9sICovCi5yb3ctaGVhZGVyOmhvdmVyIHRkIHsKICAgIGJhY2tncm91bmQtY29sb3I6ICM0NTVhNjQgIWltcG9ydGFudDsgCiAgICBjb2xvcjogd2hpdGUgIWltcG9ydGFudDsKfQoKLnJvdy1oZWFkZXIgYnV0dG9uIHsKICAgIGJvcmRlcjogMXB4IHNvbGlkIHdoaXRlICFpbXBvcnRhbnQ7CiAgICBib3gtc2hhZG93OiBub25lICFpbXBvcnRhbnQ7Cn0KCi5tZW51LWl0ZW0uZGlzYWJsZWQgewogICAgb3BhY2l0eTogMC4zNTsKICAgIGN1cnNvcjogbm90LWFsbG93ZWQ7CiAgICBmaWx0ZXI6IGdyYXlzY2FsZSgxKTsKICAgIHBvaW50ZXItZXZlbnRzOiBub25lOwp9Ci5tZW51LWl0ZW0uZGlzYWJsZWQ6aG92ZXIgewogICAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7CiAgICBjb2xvcjogI2JkYzNjNzsKICAgIHRyYW5zZm9ybTogbm9uZTsKfQoKLyogU3R5bGUgZHUgUG9wLXVwIEVEUyAqLwojZWRzLXNlbGVjdG9yLW92ZXJsYXkgewogICAgcG9zaXRpb246IGZpeGVkOyB0b3A6IDA7IGxlZnQ6IDA7IHdpZHRoOiAxMDAlOyBoZWlnaHQ6IDEwMCU7CiAgICBiYWNrZ3JvdW5kOiByZ2JhKDQ0LCA2MiwgODAsIDAuOCk7IHotaW5kZXg6IDIwMDAwOwogICAgZGlzcGxheTogbm9uZTsganVzdGlmeS1jb250ZW50OiBjZW50ZXI7IGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgICBiYWNrZHJvcC1maWx0ZXI6IGJsdXIoNHB4KTsKfQouZWRzLXNlbGVjdG9yLWJveCB7CiAgICBiYWNrZ3JvdW5kOiB3aGl0ZTsgcGFkZGluZzogMzBweDsgYm9yZGVyLXJhZGl1czogMTJweDsKICAgIHdpZHRoOiA4MDBweDsgbWF4LXdpZHRoOiA5NSU7IG1heC1oZWlnaHQ6IDkwdmg7CiAgICBib3gtc2hhZG93OiAwIDIwcHggNDBweCByZ2JhKDAsMCwwLDAuMyk7CiAgICBkaXNwbGF5OiBmbGV4OyBmbGV4LWRpcmVjdGlvbjogY29sdW1uOwp9Ci5lZHMtZ3JpZCB7CiAgICBkaXNwbGF5OiBncmlkOyBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IHJlcGVhdChhdXRvLWZpbGwsIG1pbm1heCgxNTBweCwgMWZyKSk7CiAgICBnYXA6IDEycHg7IG92ZXJmbG93LXk6IGF1dG87IHBhZGRpbmc6IDEwcHg7IG1hcmdpbjogMjBweCAwOwp9Ci5lZHMtdGlsZSB7CiAgICBib3JkZXI6IDJweCBzb2xpZCAjZWVlOyBib3JkZXItcmFkaXVzOiA4cHg7IHBhZGRpbmc6IDE1cHggMTBweDsKICAgIHRleHQtYWxpZ246IGNlbnRlcjsgY3Vyc29yOiBwb2ludGVyOyB0cmFuc2l0aW9uOiBhbGwgMC4yczsKICAgIGZvbnQtc2l6ZTogMC44NXJlbTsgZm9udC13ZWlnaHQ6IDYwMDsgY29sb3I6IHZhcigtLXByaW1hcnkpOwogICAgYmFja2dyb3VuZDogI2Y4ZjlmYTsgcG9zaXRpb246IHJlbGF0aXZlOwogICAgZGlzcGxheTogZmxleDsgYWxpZ24taXRlbXM6IGNlbnRlcjsganVzdGlmeS1jb250ZW50OiBjZW50ZXI7IG1pbi1oZWlnaHQ6IDYwcHg7Cn0KLmVkcy10aWxlOmhvdmVyIHsgYm9yZGVyLWNvbG9yOiB2YXIoLS1zZWNvbmRhcnkpOyBiYWNrZ3JvdW5kOiAjZWJmNWZiOyB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLTJweCk7IH0KLmVkcy10aWxlLnNlbGVjdGVkIHsKICAgIGJvcmRlci1jb2xvcjogdmFyKC0tc3VjY2Vzcyk7IGJhY2tncm91bmQ6ICNlOGY4ZjU7IGNvbG9yOiB2YXIoLS1zdWNjZXNzKTsKICAgIGJveC1zaGFkb3c6IDAgNHB4IDhweCByZ2JhKDM5LCAxNzQsIDk2LCAwLjIpOwp9Ci5lZHMtdGlsZS5zZWxlY3RlZDo6YWZ0ZXIgewogICAgY29udGVudDogJ+Kckyc7IHBvc2l0aW9uOiBhYnNvbHV0ZTsgdG9wOiA1cHg7IHJpZ2h0OiA1cHg7CiAgICBiYWNrZ3JvdW5kOiB2YXIoLS1zdWNjZXNzKTsgY29sb3I6IHdoaXRlOyB3aWR0aDogMThweDsgaGVpZ2h0OiAxOHB4OwogICAgYm9yZGVyLXJhZGl1czogNTAlOyBmb250LXNpemU6IDEycHg7IGRpc3BsYXk6IGZsZXg7IGFsaWduLWl0ZW1zOiBjZW50ZXI7IGp1c3RpZnktY29udGVudDogY2VudGVyOwp9CgovKiAtLS0gU1RZTEUgVEFCTEVBVSBFRFMgVjQgLS0tICovCi50YWJsZS1lZHMgeyAKICAgIHdpZHRoOiAxMDAlOyBib3JkZXItY29sbGFwc2U6IGNvbGxhcHNlOyBtYXJnaW4tYm90dG9tOiAyMHB4OyAKICAgIGJhY2tncm91bmQ6IHdoaXRlOyBib3JkZXItcmFkaXVzOiA4cHg7IG92ZXJmbG93OiBoaWRkZW47Cn0KLnRhYmxlLWVkcyB0aCB7IAogICAgYmFja2dyb3VuZDogI2Y4ZjlmYTsgY29sb3I6ICM3ZjhjOGQ7IGZvbnQtc2l6ZTogMC43NXJlbTsgCiAgICB0ZXh0LXRyYW5zZm9ybTogdXBwZXJjYXNlOyBwYWRkaW5nOiAxMnB4IDEwcHg7IGJvcmRlci1ib3R0b206IDJweCBzb2xpZCAjZWVlOyAKICAgIHRleHQtYWxpZ246IGNlbnRlcjsKfQoudGFibGUtZWRzIHRkIHsgcGFkZGluZzogMTBweDsgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICNmMWYxZjE7IHRleHQtYWxpZ246IGNlbnRlcjsgdmVydGljYWwtYWxpZ246IG1pZGRsZTsgfQouY29zdC1iYWRnZSB7IAogICAgZm9udC1zaXplOiAwLjhyZW07IGZvbnQtd2VpZ2h0OiA4MDA7IGJhY2tncm91bmQ6ICNlYmY1ZmI7IAogICAgY29sb3I6ICMyOTgwYjk7IHBhZGRpbmc6IDRweCA4cHg7IGJvcmRlci1yYWRpdXM6IDZweDsgYm9yZGVyOiAxcHggc29saWQgI2FlZDZmMTsgCn0KLmVkcy1jYXQtaGVhZGVyIHsKICAgIGJhY2tncm91bmQ6ICM0NTVhNjQgIWltcG9ydGFudDsgY29sb3I6IHdoaXRlICFpbXBvcnRhbnQ7IAogICAgdGV4dC1hbGlnbjogbGVmdCAhaW1wb3J0YW50OyBwYWRkaW5nLWxlZnQ6IDE1cHggIWltcG9ydGFudDsKICAgIGZvbnQtc2l6ZTogMC44NXJlbTsgZm9udC13ZWlnaHQ6IGJvbGQ7IGxldHRlci1zcGFjaW5nOiAxcHg7Cn0KLmlucHV0LWlubGluZS1lZHMgeyAKICAgIHdpZHRoOiA2MHB4ICFpbXBvcnRhbnQ7IAogICAgcGFkZGluZzogNnB4IDRweCAhaW1wb3J0YW50OyAKICAgIHRleHQtYWxpZ246IGNlbnRlcjsgCiAgICBib3JkZXI6IDFweCBzb2xpZCAjZGZlNmU5OyAKICAgIGJvcmRlci1yYWRpdXM6IDRweDsKICAgIGZvbnQtd2VpZ2h0OiBib2xkOwogICAgYmFja2dyb3VuZDogd2hpdGU7Cn0KLyogU3R5bGUgcG91ciBsZXMgcGV0aXRzIGJhZGdlcyBkZSBjYXTDqWdvcmllICovCi5iYWRnZS1jYXQgewogICAgZm9udC1zaXplOiAwLjY1cmVtOwogICAgcGFkZGluZzogMnB4IDVweDsKICAgIGJvcmRlci1yYWRpdXM6IDNweDsKICAgIGJhY2tncm91bmQ6ICNlZWU7CiAgICBtYXJnaW4tcmlnaHQ6IDhweDsKICAgIHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7Cn0KCiAgICA8L3N0eWxlPgo8L2hlYWQ+Cjxib2R5PgoKPGRpdiBpZD0ic2V0dXAtb3ZlcmxheSIgc3R5bGU9ImRpc3BsYXk6IG5vbmU7Ij4KICAgIDxkaXYgY2xhc3M9InNldHVwLWJveCIgc3R5bGU9Im1heC13aWR0aDo3ODBweDsiPgogICAgICAgIDxoMT7wn5GLIEJpZW52ZW51ZSBzdXIgREhHIE1hbmFnZXIgVjk8L2gxPgogICAgICAgIDxwIHN0eWxlPSJjb2xvcjojNTU1OyI+U8OpbGVjdGlvbm5leiBsZXMgZW50aXTDqXMgZGUgdm90cmUgw6l0YWJsaXNzZW1lbnQsIGNvbmZpZ3VyZXotbGVzLCBwdWlzIGNsaXF1ZXogc3VyIDxzdHJvbmc+RMOpbWFycmVyPC9zdHJvbmc+LjwvcD4KCiAgICAgICAgPCEtLSBTw4lMRUNURVVSIEQnRU5USVTDiVMgLS0+CiAgICAgICAgPGRpdiBzdHlsZT0iZGlzcGxheTpmbGV4OyBnYXA6MTBweDsganVzdGlmeS1jb250ZW50OmNlbnRlcjsgbWFyZ2luOjE4cHggMCAyMHB4IDA7IGZsZXgtd3JhcDp3cmFwOyI+CiAgICAgICAgICAgIDxsYWJlbCBpZD0idG9nZ2xlLWNvbGxlZ2UiIG9uY2xpY2s9InRvZ2dsZUVudGl0eUNhcmQoJ2NvbGxlZ2UnKSIgc3R5bGU9ImN1cnNvcjpwb2ludGVyOyBkaXNwbGF5OmZsZXg7IGFsaWduLWl0ZW1zOmNlbnRlcjsgZ2FwOjdweDsgcGFkZGluZzo4cHggMTZweDsgYm9yZGVyLXJhZGl1czoyMHB4OyBib3JkZXI6MnB4IHNvbGlkICMzNDk4ZGI7IGJhY2tncm91bmQ6I2ViZjVmYjsgY29sb3I6IzI5ODBiOTsgZm9udC13ZWlnaHQ6NzAwOyBmb250LXNpemU6MC45cmVtOyB1c2VyLXNlbGVjdDpub25lOyI+CiAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0iY2hlY2tib3giIGlkPSJjaGstY29sbGVnZSIgY2hlY2tlZCBzdHlsZT0id2lkdGg6MTZweDtoZWlnaHQ6MTZweDthY2NlbnQtY29sb3I6IzI5ODBiOTsiPiDwn4+rIENvbGzDqGdlCiAgICAgICAgICAgIDwvbGFiZWw+CiAgICAgICAgICAgIDxsYWJlbCBpZD0idG9nZ2xlLWx5Y2VlIiBvbmNsaWNrPSJ0b2dnbGVFbnRpdHlDYXJkKCdseWNlZScpIiBzdHlsZT0iY3Vyc29yOnBvaW50ZXI7IGRpc3BsYXk6ZmxleDsgYWxpZ24taXRlbXM6Y2VudGVyOyBnYXA6N3B4OyBwYWRkaW5nOjhweCAxNnB4OyBib3JkZXItcmFkaXVzOjIwcHg7IGJvcmRlcjoycHggc29saWQgIzI3YWU2MDsgYmFja2dyb3VuZDojZThmOGY1OyBjb2xvcjojMWU4NDQ5OyBmb250LXdlaWdodDo3MDA7IGZvbnQtc2l6ZTowLjlyZW07IHVzZXItc2VsZWN0Om5vbmU7Ij4KICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJjaGVja2JveCIgaWQ9ImNoay1seWNlZSIgY2hlY2tlZCBzdHlsZT0id2lkdGg6MTZweDtoZWlnaHQ6MTZweDthY2NlbnQtY29sb3I6IzFlODQ0OTsiPiDwn4+b77iPIEx5Y8OpZSBHVAogICAgICAgICAgICA8L2xhYmVsPgogICAgICAgICAgICA8bGFiZWwgaWQ9InRvZ2dsZS1seWNlZV9wcm8iIG9uY2xpY2s9InRvZ2dsZUVudGl0eUNhcmQoJ2x5Y2VlX3BybycpIiBzdHlsZT0iY3Vyc29yOnBvaW50ZXI7IGRpc3BsYXk6ZmxleDsgYWxpZ24taXRlbXM6Y2VudGVyOyBnYXA6N3B4OyBwYWRkaW5nOjhweCAxNnB4OyBib3JkZXItcmFkaXVzOjIwcHg7IGJvcmRlcjoycHggc29saWQgI2QzNTQwMDsgYmFja2dyb3VuZDojZmVmNWVjOyBjb2xvcjojZDM1NDAwOyBmb250LXdlaWdodDo3MDA7IGZvbnQtc2l6ZTowLjlyZW07IHVzZXItc2VsZWN0Om5vbmU7Ij4KICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJjaGVja2JveCIgaWQ9ImNoay1seWNlZV9wcm8iIHN0eWxlPSJ3aWR0aDoxNnB4O2hlaWdodDoxNnB4O2FjY2VudC1jb2xvcjojZDM1NDAwOyI+IPCfj60gTHljw6llIFBybwogICAgICAgICAgICA8L2xhYmVsPgogICAgICAgICAgICA8bGFiZWwgaWQ9InRvZ2dsZS1wb2xlIiBvbmNsaWNrPSJ0b2dnbGVFbnRpdHlDYXJkKCdwb2xlJykiIHN0eWxlPSJjdXJzb3I6cG9pbnRlcjsgZGlzcGxheTpmbGV4OyBhbGlnbi1pdGVtczpjZW50ZXI7IGdhcDo3cHg7IHBhZGRpbmc6OHB4IDE2cHg7IGJvcmRlci1yYWRpdXM6MjBweDsgYm9yZGVyOjJweCBzb2xpZCAjOGU0NGFkOyBiYWNrZ3JvdW5kOiNmNWVlZjg7IGNvbG9yOiM3ZDNjOTg7IGZvbnQtd2VpZ2h0OjcwMDsgZm9udC1zaXplOjAuOXJlbTsgdXNlci1zZWxlY3Q6bm9uZTsiPgogICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9ImNoZWNrYm94IiBpZD0iY2hrLXBvbGUiIHN0eWxlPSJ3aWR0aDoxNnB4O2hlaWdodDoxNnB4O2FjY2VudC1jb2xvcjojOGU0NGFkOyI+IPCfjpMgUMO0bGUgU3VwLgogICAgICAgICAgICA8L2xhYmVsPgogICAgICAgIDwvZGl2PgoKICAgICAgICA8IS0tIENBUlRFUyBERSBDT05GSUdVUkFUSU9OIC0tPgogICAgICAgIDxkaXYgaWQ9InNldHVwLWNhcmRzLWNvbnRhaW5lciIgc3R5bGU9ImRpc3BsYXk6Z3JpZDsgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOnJlcGVhdCg0LDFmcik7IGdhcDoxMnB4OyBtYXJnaW4tdG9wOjEwcHg7Ij4KICAgICAgICAgICAgPCEtLSBDT0xMw4hHRSAtLT4KICAgICAgICAgICAgPGRpdiBpZD0iY2FyZC1jb2xsZWdlIiBzdHlsZT0iYm9yZGVyOjJweCBzb2xpZCAjMzQ5OGRiOyBib3JkZXItcmFkaXVzOjEwcHg7IHBhZGRpbmc6MTVweDsgYmFja2dyb3VuZDojZWJmNWZiOyB0cmFuc2l0aW9uOm9wYWNpdHkgMC4yczsiPgogICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0idGV4dC1hbGlnbjpjZW50ZXI7IGZvbnQtc2l6ZToycmVtOyBtYXJnaW4tYm90dG9tOjVweDsiPvCfj6s8L2Rpdj4KICAgICAgICAgICAgICAgIDxoMyBzdHlsZT0ibWFyZ2luOjAgMCAxMHB4IDA7IGNvbG9yOiMyOTgwYjk7IHRleHQtYWxpZ246Y2VudGVyOyI+Q29sbMOoZ2U8L2gzPgogICAgICAgICAgICAgICAgPGxhYmVsIHN0eWxlPSJmb250LXNpemU6MC44NXJlbTsgY29sb3I6IzU1NTsiPlN0cnVjdHVyZSA6PC9sYWJlbD4KICAgICAgICAgICAgICAgIDxzZWxlY3QgaWQ9InNldHVwLWNvbGxlZ2UtdHlwZSIgc3R5bGU9IndpZHRoOjEwMCU7IG1hcmdpbi1ib3R0b206OHB4OyBmb250LXNpemU6MC44NXJlbTsiPgogICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9ImNvbGxlZ2UiPkNvbGzDqGdlICg2w6htZSDihpIgM8OobWUpPC9vcHRpb24+CiAgICAgICAgICAgICAgICA8L3NlbGVjdD4KICAgICAgICAgICAgICAgIDxsYWJlbCBzdHlsZT0iZm9udC1zaXplOjAuODVyZW07IGNvbG9yOiM1NTU7Ij5Ob20gKG9wdGlvbm5lbCkgOjwvbGFiZWw+CiAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0idGV4dCIgaWQ9InNldHVwLWNvbGxlZ2UtbmFtZSIgcGxhY2Vob2xkZXI9IkV4OiBDb2xsw6hnZSBWaWN0b3IgSHVnbyIgc3R5bGU9IndpZHRoOjEwMCU7IGZvbnQtc2l6ZTowLjg1cmVtOyBib3gtc2l6aW5nOmJvcmRlci1ib3g7Ij4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDwhLS0gTFlDw4lFIEdUIC0tPgogICAgICAgICAgICA8ZGl2IGlkPSJjYXJkLWx5Y2VlIiBzdHlsZT0iYm9yZGVyOjJweCBzb2xpZCAjMjdhZTYwOyBib3JkZXItcmFkaXVzOjEwcHg7IHBhZGRpbmc6MTVweDsgYmFja2dyb3VuZDojZThmOGY1OyB0cmFuc2l0aW9uOm9wYWNpdHkgMC4yczsiPgogICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0idGV4dC1hbGlnbjpjZW50ZXI7IGZvbnQtc2l6ZToycmVtOyBtYXJnaW4tYm90dG9tOjVweDsiPvCfj5vvuI88L2Rpdj4KICAgICAgICAgICAgICAgIDxoMyBzdHlsZT0ibWFyZ2luOjAgMCAxMHB4IDA7IGNvbG9yOiMxZTg0NDk7IHRleHQtYWxpZ246Y2VudGVyOyI+THljw6llPC9oMz4KICAgICAgICAgICAgICAgIDxsYWJlbCBzdHlsZT0iZm9udC1zaXplOjAuODVyZW07IGNvbG9yOiM1NTU7Ij5TdHJ1Y3R1cmUgOjwvbGFiZWw+CiAgICAgICAgICAgICAgICA8c2VsZWN0IGlkPSJzZXR1cC1seWNlZS10eXBlIiBzdHlsZT0id2lkdGg6MTAwJTsgbWFyZ2luLWJvdHRvbTo4cHg7IGZvbnQtc2l6ZTowLjg1cmVtOyI+CiAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0ibGd0Ij5MeWPDqWUgR1QgKDJuZGUg4oaSIFRlcm1pbmFsZSk8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJscCI+THljw6llIFBybyAoc3RydWN0dXJlIGxpYnJlKTwvb3B0aW9uPgogICAgICAgICAgICAgICAgPC9zZWxlY3Q+CiAgICAgICAgICAgICAgICA8bGFiZWwgc3R5bGU9ImZvbnQtc2l6ZTowLjg1cmVtOyBjb2xvcjojNTU1OyI+Tm9tIChvcHRpb25uZWwpIDo8L2xhYmVsPgogICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9InRleHQiIGlkPSJzZXR1cC1seWNlZS1uYW1lIiBwbGFjZWhvbGRlcj0iRXg6IEx5Y8OpZSBNYXJpZSBDdXJpZSIgc3R5bGU9IndpZHRoOjEwMCU7IGZvbnQtc2l6ZTowLjg1cmVtOyBib3gtc2l6aW5nOmJvcmRlci1ib3g7Ij4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDwhLS0gTFlDw4lFIFBSTyAtLT4KICAgICAgICAgICAgPGRpdiBpZD0iY2FyZC1seWNlZV9wcm8iIHN0eWxlPSJib3JkZXI6MnB4IHNvbGlkICNkMzU0MDA7IGJvcmRlci1yYWRpdXM6MTBweDsgcGFkZGluZzoxNXB4OyBiYWNrZ3JvdW5kOiNmZWY1ZWM7IHRyYW5zaXRpb246b3BhY2l0eSAwLjJzOyBvcGFjaXR5OjAuNDsgcG9pbnRlci1ldmVudHM6bm9uZTsiPgogICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0idGV4dC1hbGlnbjpjZW50ZXI7IGZvbnQtc2l6ZToycmVtOyBtYXJnaW4tYm90dG9tOjVweDsiPvCfj608L2Rpdj4KICAgICAgICAgICAgICAgIDxoMyBzdHlsZT0ibWFyZ2luOjAgMCAxMHB4IDA7IGNvbG9yOiNkMzU0MDA7IHRleHQtYWxpZ246Y2VudGVyOyI+THljw6llIFBybzwvaDM+CiAgICAgICAgICAgICAgICA8bGFiZWwgc3R5bGU9ImZvbnQtc2l6ZTowLjg1cmVtOyBjb2xvcjojNTU1OyI+U3RydWN0dXJlIDo8L2xhYmVsPgogICAgICAgICAgICAgICAgPHNlbGVjdCBpZD0ic2V0dXAtbHljZWUtcHJvLXR5cGUiIHN0eWxlPSJ3aWR0aDoxMDAlOyBtYXJnaW4tYm90dG9tOjhweDsgZm9udC1zaXplOjAuODVyZW07Ij4KICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJscCI+THljw6llIFBybyAoc3RydWN0dXJlIGxpYnJlKTwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9ImNvbGxlZ2UiPlN0cnVjdHVyZSBDb2xsw6hnZTwvb3B0aW9uPgogICAgICAgICAgICAgICAgPC9zZWxlY3Q+CiAgICAgICAgICAgICAgICA8bGFiZWwgc3R5bGU9ImZvbnQtc2l6ZTowLjg1cmVtOyBjb2xvcjojNTU1OyI+Tm9tIChvcHRpb25uZWwpIDo8L2xhYmVsPgogICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9InRleHQiIGlkPSJzZXR1cC1seWNlZS1wcm8tbmFtZSIgcGxhY2Vob2xkZXI9IkV4OiBMeWPDqWUgUHJvIERpZGVyb3QiIHN0eWxlPSJ3aWR0aDoxMDAlOyBmb250LXNpemU6MC44NXJlbTsgYm94LXNpemluZzpib3JkZXItYm94OyI+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8IS0tIFDDlExFIFNVUMOJUklFVVIgLS0+CiAgICAgICAgICAgIDxkaXYgaWQ9ImNhcmQtcG9sZSIgc3R5bGU9ImJvcmRlcjoycHggc29saWQgIzhlNDRhZDsgYm9yZGVyLXJhZGl1czoxMHB4OyBwYWRkaW5nOjE1cHg7IGJhY2tncm91bmQ6I2Y1ZWVmODsgdHJhbnNpdGlvbjpvcGFjaXR5IDAuMnM7IG9wYWNpdHk6MC40OyBwb2ludGVyLWV2ZW50czpub25lOyI+CiAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJ0ZXh0LWFsaWduOmNlbnRlcjsgZm9udC1zaXplOjJyZW07IG1hcmdpbi1ib3R0b206NXB4OyI+8J+OkzwvZGl2PgogICAgICAgICAgICAgICAgPGgzIHN0eWxlPSJtYXJnaW46MCAwIDEwcHggMDsgY29sb3I6IzdkM2M5ODsgdGV4dC1hbGlnbjpjZW50ZXI7Ij5Qw7RsZSBTdXDDqXJpZXVyPC9oMz4KICAgICAgICAgICAgICAgIDxsYWJlbCBzdHlsZT0iZm9udC1zaXplOjAuODVyZW07IGNvbG9yOiM1NTU7Ij5TdHJ1Y3R1cmUgOjwvbGFiZWw+CiAgICAgICAgICAgICAgICA8c2VsZWN0IGlkPSJzZXR1cC1wb2xlLXR5cGUiIHN0eWxlPSJ3aWR0aDoxMDAlOyBtYXJnaW4tYm90dG9tOjhweDsgZm9udC1zaXplOjAuODVyZW07Ij4KICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJscCI+U3RydWN0dXJlIGxpYnJlIChCVFMsIENQR0XigKYpPC9vcHRpb24+CiAgICAgICAgICAgICAgICA8L3NlbGVjdD4KICAgICAgICAgICAgICAgIDxsYWJlbCBzdHlsZT0iZm9udC1zaXplOjAuODVyZW07IGNvbG9yOiM1NTU7Ij5Ob20gKG9wdGlvbm5lbCkgOjwvbGFiZWw+CiAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0idGV4dCIgaWQ9InNldHVwLXBvbGUtbmFtZSIgcGxhY2Vob2xkZXI9IkV4OiBQw7RsZSBTdXDDqXJpZXVyIENQR0UiIHN0eWxlPSJ3aWR0aDoxMDAlOyBmb250LXNpemU6MC44NXJlbTsgYm94LXNpemluZzpib3JkZXItYm94OyI+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgIDwvZGl2PgogICAgICAgIAogICAgICAgIDxkaXYgc3R5bGU9Im1hcmdpbi10b3A6MjJweDsiPgogICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJidG4gYnRuLXN1Y2Nlc3MiIHN0eWxlPSJ3aWR0aDoxMDAlOyBwYWRkaW5nOjE0cHg7IGZvbnQtc2l6ZToxcmVtOyIgb25jbGljaz0iaW5pdE11bHRpRGF0YSgpIj7wn5qAIETDqW1hcnJlcjwvYnV0dG9uPgogICAgICAgIDwvZGl2PgogICAgICAgIAogICAgICAgIDxwIHN0eWxlPSJtYXJnaW4tdG9wOjIwcHg7IGZvbnQtc2l6ZTowLjlyZW07IGNvbG9yOiM3Nzc7IGJvcmRlci10b3A6MXB4IHNvbGlkICNlZWU7IHBhZGRpbmctdG9wOjE1cHg7IHRleHQtYWxpZ246Y2VudGVyOyI+CiAgICAgICAgICAgIFZvdXMgYXZleiBkw6lqw6AgdW4gZmljaGllciA/PGJyPgogICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJidG4gYnRuLWRhcmsgYnRuLXNtIiBzdHlsZT0ibWFyZ2luLXRvcDoxMHB4OyIgb25jbGljaz0iZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvYWQtZmlsZS1pbnB1dC1vdmVybGF5JykuY2xpY2soKSI+8J+TgiBDaGFyZ2VyIHVuZSBzYXV2ZWdhcmRlPC9idXR0b24+CiAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJmaWxlIiBpZD0ibG9hZC1maWxlLWlucHV0LW92ZXJsYXkiIHN0eWxlPSJkaXNwbGF5Om5vbmU7IiBvbmNoYW5nZT0ibG9hZFNhdmVGaWxlKHRoaXMpIiBhY2NlcHQ9Ii5kYXRhLC5qc29uIj4KICAgICAgICA8L3A+CiAgICA8L2Rpdj4KPC9kaXY+Cgo8ZGl2IGNsYXNzPSJzaWRlYmFyIj4KICAgIDxoMj5ESEcgTWFuYWdlciBWOTwvaDI+CiAgICA8ZGl2IGNsYXNzPSJzaWRlYmFyLXN1YnRpdGxlIj5NdWx0aS1FbnRpdMOpcyDCtyBCeSBGcmVkIFZlZHJlbm5lPC9kaXY+CiAgICAKICAgIDwhLS0gU8OJTEVDVEVVUiBEJ0VOVElUw4lTIC0tPgogICAgPGRpdiBjbGFzcz0iZW50aXR5LXNlbGVjdG9yIj4KICAgICAgICA8ZGl2IGNsYXNzPSJlbnRpdHktbGFiZWwiPvCfk40gRW50aXTDqSBhY3RpdmU8L2Rpdj4KICAgICAgICA8YnV0dG9uIGNsYXNzPSJlbnRpdHktYnRuIGFjdGl2ZSIgaWQ9ImVudGl0eS1idG4tY29sbGVnZSIgb25jbGljaz0ic3dpdGNoRW50aXR5KCdjb2xsZWdlJykiPgogICAgICAgICAgICDwn4+rIENvbGzDqGdlCiAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJlbnRpdHktYmFkZ2UiIGlkPSJlbnRpdHktYmFkZ2UtY29sbGVnZSI+4oCTIGg8L3NwYW4+CiAgICAgICAgPC9idXR0b24+CiAgICAgICAgPGJ1dHRvbiBjbGFzcz0iZW50aXR5LWJ0biIgaWQ9ImVudGl0eS1idG4tbHljZWUiIG9uY2xpY2s9InN3aXRjaEVudGl0eSgnbHljZWUnKSI+CiAgICAgICAgICAgIPCfj5vvuI8gTHljw6llCiAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJlbnRpdHktYmFkZ2UiIGlkPSJlbnRpdHktYmFkZ2UtbHljZWUiPuKAkyBoPC9zcGFuPgogICAgICAgIDwvYnV0dG9uPgogICAgICAgIDxidXR0b24gY2xhc3M9ImVudGl0eS1idG4iIGlkPSJlbnRpdHktYnRuLWx5Y2VlX3BybyIgb25jbGljaz0ic3dpdGNoRW50aXR5KCdseWNlZV9wcm8nKSI+CiAgICAgICAgICAgIPCfj60gTHljw6llIFBybwogICAgICAgICAgICA8c3BhbiBjbGFzcz0iZW50aXR5LWJhZGdlIiBpZD0iZW50aXR5LWJhZGdlLWx5Y2VlX3BybyI+4oCTIGg8L3NwYW4+CiAgICAgICAgPC9idXR0b24+CiAgICAgICAgPGJ1dHRvbiBjbGFzcz0iZW50aXR5LWJ0biIgaWQ9ImVudGl0eS1idG4tcG9sZSIgb25jbGljaz0ic3dpdGNoRW50aXR5KCdwb2xlJykiPgogICAgICAgICAgICDwn46TIFDDtGxlIFN1cMOpcmlldXIKICAgICAgICAgICAgPHNwYW4gY2xhc3M9ImVudGl0eS1iYWRnZSIgaWQ9ImVudGl0eS1iYWRnZS1wb2xlIj7igJMgaDwvc3Bhbj4KICAgICAgICA8L2J1dHRvbj4KICAgIDwvZGl2PgoKICAgIDxidXR0b24gaWQ9Im1lbnUtZGFzaGJvYXJkIiBjbGFzcz0ibWVudS1pdGVtIiBvbmNsaWNrPSJuYXYoJ2Rhc2hib2FyZCcsIHRoaXMpIj7wn5OKIFRhYmxlYXUgZGUgQm9yZDwvYnV0dG9uPgogICAgPGJ1dHRvbiBpZD0ibWVudS1zdHJ1Y3R1cmUiIGNsYXNzPSJtZW51LWl0ZW0iIG9uY2xpY2s9Im5hdignc3RydWN0dXJlJywgdGhpcykiPvCfj5fvuI8gU3RydWN0dXJlIChOaXZlYXV4KTwvYnV0dG9uPgogICAgPGJ1dHRvbiBpZD0ibWVudS1tYXRpZXJlcyIgY2xhc3M9Im1lbnUtaXRlbSIgb25jbGljaz0ibmF2KCdtYXRpZXJlcycsIHRoaXMpIj7wn5SXIE1hdGnDqHJlcyAmYW1wOyBNb2RhbGl0w6lzPC9idXR0b24+Cgk8YnV0dG9uIGlkPSJtZW51LWVkcyIgY2xhc3M9Im1lbnUtaXRlbSIgb25jbGljaz0ibmF2KCdlZHMnLCB0aGlzKSI+8J+OkyBTcMOpY2lhbGl0w6lzICZhbXA7IEVEUzwvYnV0dG9uPgogICAgPGJ1dHRvbiBpZD0ibWVudS12ZW50aWxhdGlvbiIgY2xhc3M9Im1lbnUtaXRlbSIgb25jbGljaz0ibmF2KCd2ZW50aWxhdGlvbicsIHRoaXMpIj7ij7HvuI8gR3JpbGxlIEhvcmFpcmU8L2J1dHRvbj4KCTxidXR0b24gaWQ9Im1lbnUtcHJvZmVzc2V1cnMiIGNsYXNzPSJtZW51LWl0ZW0iIG9uY2xpY2s9Im5hdigncHJvZmVzc2V1cnMnLCB0aGlzKSI+8J+RpSBQcm9mZXNzZXVyczwvYnV0dG9uPgoJPGJ1dHRvbiBpZD0ibWVudS1waWxvdGFnZSIgY2xhc3M9Im1lbnUtaXRlbSIgb25jbGljaz0ibmF2KCdwaWxvdGFnZScsIHRoaXMpIj7impbvuI8gVmVudGlsYXRpb248L2J1dHRvbj4KCTxidXR0b24gaWQ9Im1lbnUtZXF1aXBlcyIgY2xhc3M9Im1lbnUtaXRlbSIgb25jbGljaz0ibmF2KCdlcXVpcGVzJywgdGhpcykiPvCfjpMgw4lxdWlwZXMgUMOpZGFnb2dpcXVlczwvYnV0dG9uPgoJPGJ1dHRvbiBpZD0ibWVudS1yZXBhcnRpdGlvbiIgY2xhc3M9Im1lbnUtaXRlbSBhY3RpdmUiIG9uY2xpY2s9Im5hdigncmVwYXJ0aXRpb24nLCB0aGlzKSI+8J+TiyBSw6lwYXJ0aXRpb24gZGUgU2VydmljZXM8L2J1dHRvbj4KICAgIDxidXR0b24gaWQ9Im1lbnUtcmVjYXAiIGNsYXNzPSJtZW51LWl0ZW0iIG9uY2xpY2s9Im5hdigncmVjYXAnLCB0aGlzKSI+8J+TkSBCaWxhbiAmYW1wOyBFeHBvcnQ8L2J1dHRvbj4KICAgIAogICAgPGRpdiBzdHlsZT0iYm9yZGVyLXRvcDoxcHggc29saWQgcmdiYSgyNTUsMjU1LDI1NSwwLjE1KTsgbWFyZ2luOjhweCAxNXB4OyBwYWRkaW5nLXRvcDo4cHg7Ij4KICAgICAgICA8ZGl2IHN0eWxlPSJmb250LXNpemU6MC43cmVtOyBjb2xvcjpyZ2JhKDI1NSwyNTUsMjU1LDAuNDUpOyB0ZXh0LXRyYW5zZm9ybTp1cHBlcmNhc2U7IGxldHRlci1zcGFjaW5nOjFweDsgcGFkZGluZzowIDEwcHggNXB4IDEwcHg7IGZvbnQtd2VpZ2h0OjcwMDsiPk11bHRpLUVudGl0w6lzPC9kaXY+CiAgICAgICAgPGJ1dHRvbiBjbGFzcz0ibWVudS1pdGVtIiBvbmNsaWNrPSJuYXYoJ2JpbGFuLWdsb2JhbCcsIHRoaXMpIiBzdHlsZT0iY29sb3I6I2YxYzQwZjsiPvCfjJAgQmlsYW4gQ29uc29saWTDqTwvYnV0dG9uPgogICAgICAgIDxidXR0b24gY2xhc3M9Im1lbnUtaXRlbSIgb25jbGljaz0ibmF2KCdlbnNlaWduYW50cy1tdXR1YWxpc2VzJywgdGhpcykiIHN0eWxlPSJjb2xvcjojZjFjNDBmOyI+8J+RpSBFbnNlaWduYW50czwvYnV0dG9uPgogICAgPC9kaXY+CiAgICAKICAgIDxkaXYgc3R5bGU9Im1hcmdpbi10b3A6YXV0bzsgcGFkZGluZzoyMHB4OyI+CiAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYnRuIGJ0bi1wcmltYXJ5IiBzdHlsZT0id2lkdGg6MTAwJTsgbWFyZ2luLWJvdHRvbToxMHB4OyIgb25jbGljaz0iZG93bmxvYWRTYXZlRmlsZSgpIj7wn5K+IFNhdXZlZ2FyZGVyICguZGF0YSk8L2J1dHRvbj4KICAgICAgICA8aW5wdXQgdHlwZT0iZmlsZSIgaWQ9ImxvYWQtZmlsZS1pbnB1dCIgc3R5bGU9ImRpc3BsYXk6bm9uZTsiIG9uY2hhbmdlPSJsb2FkU2F2ZUZpbGUodGhpcykiIGFjY2VwdD0iLmRhdGEsLmpzb24iPgogICAgICAgIDxidXR0b24gY2xhc3M9ImJ0biBidG4tZGFyayIgc3R5bGU9IndpZHRoOjEwMCU7IGZvbnQtc2l6ZTowLjg1cmVtOyIgb25jbGljaz0iZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvYWQtZmlsZS1pbnB1dCcpLmNsaWNrKCkiPvCfk4IgQ2hhcmdlciB1bmUgc2F1dmVnYXJkZTwvYnV0dG9uPgogICAgICAgIAogICAgICAgIDxociBzdHlsZT0iYm9yZGVyOjA7IGJvcmRlci10b3A6MXB4IHNvbGlkIHJnYmEoMjU1LDI1NSwyNTUsMC4yKTsgbWFyZ2luOjE1cHggMDsiPgogICAgICAgIAogICAgICAgIDxidXR0b24gY2xhc3M9ImJ0biBidG4td2FybmluZyIgc3R5bGU9IndpZHRoOjEwMCU7IGZvbnQtc2l6ZTowLjg1cmVtOyIgb25jbGljaz0icmVzZXRBbGxFbnRpdGllcygpIj7impnvuI8gUsOpaW5pdGlhbGlzZXIgdG91dDwvYnV0dG9uPgogICAgPC9kaXY+CjwvZGl2PgoKPGRpdiBjbGFzcz0iY29udGVudCI+CiAgICA8IS0tIEJhbmRlYXUgZW50aXTDqSBhY3RpdmUgLS0+CiAgICA8ZGl2IGlkPSJlbnRpdHktaGVhZGVyLWJhbm5lciIgc3R5bGU9ImRpc3BsYXk6ZmxleDsgYWxpZ24taXRlbXM6Y2VudGVyOyBnYXA6MTJweDsgYmFja2dyb3VuZDp3aGl0ZTsgYm9yZGVyLWxlZnQ6NXB4IHNvbGlkICMxNTY1QzA7IGJvcmRlci10b3A6MXB4IHNvbGlkICNlMGUwZTA7IGJvcmRlci1yaWdodDoxcHggc29saWQgI2UwZTBlMDsgYm9yZGVyLWJvdHRvbToxcHggc29saWQgI2UwZTBlMDsgYm9yZGVyLXJhZGl1czo4cHg7IHBhZGRpbmc6MTBweCAyMHB4OyBtYXJnaW4tYm90dG9tOjE4cHg7IGJveC1zaGFkb3c6MCAxcHggNHB4IHJnYmEoMCwwLDAsMC4wNik7IHRyYW5zaXRpb246IGJvcmRlci1jb2xvciAwLjNzLCBiYWNrZ3JvdW5kIDAuM3M7Ij4KICAgICAgICA8c3BhbiBpZD0iZW50aXR5LXRpdGxlLWhlYWRlciIgc3R5bGU9ImZvbnQtc2l6ZToxLjA1cmVtOyBmb250LXdlaWdodDo4MDA7IGNvbG9yOiMxNTY1QzA7IGxldHRlci1zcGFjaW5nOjAuM3B4OyI+8J+PqyBDb2xsw6hnZTwvc3Bhbj4KICAgICAgICA8c3BhbiBzdHlsZT0iY29sb3I6I2JkYzNjNzsgZm9udC1zaXplOjAuOHJlbTsiPuKAlCBlbnRpdMOpIGFjdGl2ZTwvc3Bhbj4KICAgIDwvZGl2PgoKICAgIDxkaXYgaWQ9ImRhc2hib2FyZCIgY2xhc3M9InNlY3Rpb24iPgogICAgICAgIDxkaXYgY2xhc3M9ImNhcmQiPgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJjYXJkLWhlYWRlciI+CiAgICAgICAgICAgICAgICA8aDM+UGlsb3RhZ2UgR2xvYmFsPC9oMz4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImV4cG9ydC1ncm91cCI+CiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYnRuLWV4cCIgb25jbGljaz0iZXhwb3J0Q3VycmVudFBhZ2UoJ2V4Y2VsJykiPvCfk4ogRXhjZWw8L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJidG4tZXhwIiBvbmNsaWNrPSJleHBvcnRDdXJyZW50UGFnZSgncGRmJykiPvCfk4QgUERGPC9idXR0b24+CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9ImRpc3BsYXk6ZmxleDsgYWxpZ24taXRlbXM6Y2VudGVyOyBnYXA6MTBweDsiPgogICAgICAgICAgICAgICAgICAgIDxsYWJlbCBzdHlsZT0ibWFyZ2luOjA7IGZvbnQtd2VpZ2h0Om5vcm1hbDsiPlJlbnRyw6llIDo8L2xhYmVsPgogICAgICAgICAgICAgICAgICAgIDxzZWxlY3QgaWQ9ImRhc2gteWVhciIgc3R5bGU9IndpZHRoOjEwMHB4OyBmb250LXdlaWdodDpib2xkOyIgb25jaGFuZ2U9InVwZGF0ZVllYXIodGhpcy52YWx1ZSkiPjxvcHRpb24gdmFsdWU9IjIwMjUiPjIwMjU8L29wdGlvbj48b3B0aW9uIHZhbHVlPSIyMDI2IiBzZWxlY3RlZD0ic2VsZWN0ZWQiPjIwMjY8L29wdGlvbj48b3B0aW9uIHZhbHVlPSIyMDI3Ij4yMDI3PC9vcHRpb24+PG9wdGlvbiB2YWx1ZT0iMjAyOCI+MjAyODwvb3B0aW9uPjxvcHRpb24gdmFsdWU9IjIwMjkiPjIwMjk8L29wdGlvbj48b3B0aW9uIHZhbHVlPSIyMDMwIj4yMDMwPC9vcHRpb24+PG9wdGlvbiB2YWx1ZT0iMjAzMSI+MjAzMTwvb3B0aW9uPjwvc2VsZWN0PgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAKICAgICAgICAgICAgPGRpdiBjbGFzcz0ia3BpLWNvbnRhaW5lciI+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJrcGktYm94IiBzdHlsZT0iYm9yZGVyLWNvbG9yOiB2YXIoLS1wcmltYXJ5KTsiPgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImtwaS10aXRsZSI+RG90YXRpb24gUmVjdG9yYXQ8L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJrcGktdmFsdWUiPjxzcGFuIGlkPSJkYXNoLXRvdGFsLWRoZyI+NTc8L3NwYW4+IGg8L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8c21hbGwgc3R5bGU9ImNvbG9yOiM3Nzc7IGZvbnQtc2l6ZTowLjdyZW07IGZvbnQtc3R5bGU6aXRhbGljOyI+KFZpYSBTdHJ1Y3R1cmUpPC9zbWFsbD4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJrcGktYm94IiBzdHlsZT0iYm9yZGVyLWNvbG9yOiB2YXIoLS1zdWNjZXNzKTsiPgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImtwaS10aXRsZSI+Q29uc29tbWF0aW9uPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ia3BpLXZhbHVlIj48c3BhbiBpZD0iZGFzaC1jb25zbyI+NTQuMDwvc3Bhbj4gaDwvZGl2PgogICAgICAgICAgICAgICAgPC9kaXY+CgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ia3BpLWJveCIgc3R5bGU9ImJvcmRlci1jb2xvcjogdmFyKC0taHAtY29sb3IpOyI+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ia3BpLXRpdGxlIj5IUCBVdGlsaXPDqWVzPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ia3BpLXZhbHVlIj48c3BhbiBpZD0iZGFzaC1ocC11c2VkIj41NC4wPC9zcGFuPiBoPC9kaXY+CiAgICAgICAgICAgICAgICA8L2Rpdj4KCiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJrcGktYm94IiBzdHlsZT0iYm9yZGVyLWNvbG9yOiB2YXIoLS1oc2EtY29sb3IpOyI+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ia3BpLXRpdGxlIj5IU0EgVXRpbGlzw6llczwvZGl2PgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImtwaS12YWx1ZSI+PHNwYW4gaWQ9ImRhc2gtaHNhIj4wLjA8L3NwYW4+IGg8L2Rpdj4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJrcGktYm94IiBzdHlsZT0iYm9yZGVyLWNvbG9yOiAjOTVhNWE2OyI+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ia3BpLXRpdGxlIj5NYXJnZTwvZGl2PgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImtwaS12YWx1ZSIgaWQ9ImRhc2gtc29sZGUiPjMuMDwvZGl2PgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgICAgPGRpdiBzdHlsZT0iZGlzcGxheTpmbGV4OyBnYXA6MjVweDsgZmxleC13cmFwOndyYXA7Ij4KICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9ImZsZXg6MTsgbWluLXdpZHRoOjMwMHB4OyBiYWNrZ3JvdW5kOiNmOGY5ZmE7IHBhZGRpbmc6MjBweDsgYm9yZGVyLXJhZGl1czo4cHg7IGJvcmRlcjoxcHggc29saWQgI2VlZTsiPgogICAgICAgICAgICAgICAgICAgIDxoNCBzdHlsZT0ibWFyZ2luLXRvcDowOyI+UsOpcGFydGl0aW9uPC9oND4KICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJoZWlnaHQ6MjUwcHg7IHBvc2l0aW9uOnJlbGF0aXZlOyB3aWR0aDoxMDAlOyI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxjYW52YXMgaWQ9ImRoZ0NoYXJ0IiBzdHlsZT0iYm94LXNpemluZzogYm9yZGVyLWJveDsgZGlzcGxheTogYmxvY2s7IGhlaWdodDogMjUwcHg7IHdpZHRoOiA3MTkuNXB4OyIgd2lkdGg9IjcxOSIgaGVpZ2h0PSIyNTAiPjwvY2FudmFzPgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJmbGV4OjE7IG1pbi13aWR0aDozMDBweDsgYmFja2dyb3VuZDojZjhmOWZhOyBwYWRkaW5nOjIwcHg7IGJvcmRlci1yYWRpdXM6OHB4OyBib3JkZXI6MXB4IHNvbGlkICNlZWU7Ij4KICAgICAgICAgICAgICAgICAgICA8aDQgc3R5bGU9Im1hcmdpbi10b3A6MDsiPlBhcmFtw6h0cmVzIERvdGF0aW9uPC9oND4KICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICA8bGFiZWw+RG90YXRpb24gR2xvYmFsZSAoRG9ubsOpZSBpc3N1ZSBkdSBtZW51IFN0cnVjdHVyZSk8L2xhYmVsPgogICAgICAgICAgICAgICAgICAgIDxzcGFuIGlkPSJnbG9iYWwtZGhnLWRpc3BsYXkiIGNsYXNzPSJkb3RhdGlvbi1kaXNwbGF5Ij41Nzwvc3Bhbj4KICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJkaXNwbGF5OmZsZXg7IGdhcDoxNXB4OyBtYXJnaW4tYm90dG9tOjE1cHg7Ij4KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iZmxleDoxIj48bGFiZWw+RG9udCBIUDwvbGFiZWw+PGlucHV0IHR5cGU9Im51bWJlciIgaWQ9Imdsb2JhbC1ocCIgdmFsdWU9IjAiIG9uY2hhbmdlPSJ1cGRhdGVHbG9iYWxESEcoKSI+PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9ImZsZXg6MSI+PGxhYmVsPkRvbnQgSFNBPC9sYWJlbD48aW5wdXQgdHlwZT0ibnVtYmVyIiBpZD0iZ2xvYmFsLWhzYSIgdmFsdWU9IjAiIG9uY2hhbmdlPSJ1cGRhdGVHbG9iYWxESEcoKSI+PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0icGVyY2VudC1kaXNwbGF5Ij4KICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gaWQ9Imdsb2JhbC1oc2EtcGVyY2VudC1kaXNwbGF5Ij4wLjAlPC9zcGFuPiBIU0EKICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICA8L2Rpdj4KICAgIDwvZGl2PgoKICAgIDxkaXYgaWQ9InN0cnVjdHVyZSIgY2xhc3M9InNlY3Rpb24iPgogICAgICAgIDxkaXYgY2xhc3M9ImNhcmQiPgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJjYXJkLWhlYWRlciI+CiAgICAgICAgICAgICAgICA8aDM+U3RydWN0dXJlIFDDqWRhZ29naXF1ZSAoTml2ZWF1eCk8L2gzPgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZXhwb3J0LWdyb3VwIj4KICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJidG4tZXhwIiBvbmNsaWNrPSJleHBvcnRDdXJyZW50UGFnZSgnZXhjZWwnKSI+8J+TiiBFeGNlbDwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImJ0bi1leHAiIG9uY2xpY2s9ImV4cG9ydEN1cnJlbnRQYWdlKCdwZGYnKSI+8J+ThCBQREY8L2J1dHRvbj4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgPGRpdj4KICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJidG4gYnRuLXN1Y2Nlc3MgYnRuLXNtIiBvbmNsaWNrPSJhZGROZXdMZXZlbCgpIj7inpUgQWpvdXRlciBOaXZlYXU8L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJidG4gYnRuLXByaW1hcnkgYnRuLXNtIiBvbmNsaWNrPSJnZW5lcmF0ZUNsYXNzZXModHJ1ZSkiPvCflIQgUsOpZ8OpbsOpcmVyPC9idXR0b24+CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDx0YWJsZSBpZD0ic3RydWN0dXJlLXRhYmxlIj4KICAgICAgICAgICAgICAgIDx0aGVhZD4KICAgICAgICAgICAgICAgICAgICA8dHI+CiAgICAgICAgICAgICAgICAgICAgICAgIDx0aD5OaXZlYXU8L3RoPjx0aD5FZmZlY3RpZjwvdGg+PHRoPkRpdmlzaW9uczwvdGg+PHRoPk1veS4vRGl2PC90aD4KICAgICAgICAgICAgICAgICAgICAgICAgPHRoIHN0eWxlPSJiYWNrZ3JvdW5kOiNmZmYzY2Q7IGNvbG9yOiNkMzU0MDA7Ij5Nb3llbnMgSG9yYWlyZXMgcGFyIERpdmlzaW9uPC90aD48dGg+VG90YWwgTW95ZW5zPC90aD4KICAgICAgICAgICAgICAgICAgICAgICAgPHRoPkFjdGlvbnM8L3RoPgogICAgICAgICAgICAgICAgICAgIDwvdHI+CiAgICAgICAgICAgICAgICA8L3RoZWFkPgogICAgICAgICAgICAgICAgPHRib2R5IGlkPSJzdHJ1Y3R1cmUtYm9keSI+PHRyPgogICAgICAgICAgICA8dGQ+PGI+Mm5kZTwvYj48L3RkPgogICAgICAgICAgICA8dGQ+PGlucHV0IHR5cGU9Im51bWJlciIgdmFsdWU9IjI5IiBvbmNoYW5nZT0idXBkU3RydWN0KDAsJ3N0dWRlbnRzJyx0aGlzLnZhbHVlKSI+PC90ZD4KICAgICAgICAgICAgPHRkPjxpbnB1dCB0eXBlPSJudW1iZXIiIHZhbHVlPSIxIiBvbmNoYW5nZT0idXBkU3RydWN0KDAsJ2RpdicsdGhpcy52YWx1ZSkiPjwvdGQ+CiAgICAgICAgICAgIDx0ZD4yOS4wPC90ZD4KICAgICAgICAgICAgPHRkPjxpbnB1dCB0eXBlPSJudW1iZXIiIHZhbHVlPSIyOSIgc3RlcD0iMC41IiBzdHlsZT0iYmFja2dyb3VuZDojZmZmYmU2OyBmb250LXdlaWdodDpib2xkOyB0ZXh0LWFsaWduOmNlbnRlcjsiIG9uY2hhbmdlPSJ1cGRTdHJ1Y3QoMCwndGFyZ2V0Jyx0aGlzLnZhbHVlKSI+PC90ZD4KICAgICAgICAgICAgPHRkIHN0eWxlPSJmb250LXdlaWdodDpib2xkOyBjb2xvcjp2YXIoLS1wcmltYXJ5KSI+MjkuMCBoPC90ZD4KICAgICAgICAgICAgPHRkPgogICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iZGlzcGxheTpmbGV4OyBnYXA6NXB4OyBqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyOyI+CiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYnRuLXNtIGJ0bi13YXJuaW5nIiBvbmNsaWNrPSJyZW5hbWVMZXZlbCgwKSI+4pyP77iPPC9idXR0b24+CiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYnRuLXNtIGJ0bi1kYW5nZXIiIG9uY2xpY2s9ImRlbGV0ZUxldmVsKDApIj7wn5eR77iPPC9idXR0b24+CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPC90ZD4KICAgICAgICA8L3RyPjx0cj4KICAgICAgICAgICAgPHRkPjxiPjHDqHJlPC9iPjwvdGQ+CiAgICAgICAgICAgIDx0ZD48aW5wdXQgdHlwZT0ibnVtYmVyIiB2YWx1ZT0iMTM1IiBvbmNoYW5nZT0idXBkU3RydWN0KDEsJ3N0dWRlbnRzJyx0aGlzLnZhbHVlKSI+PC90ZD4KICAgICAgICAgICAgPHRkPjxpbnB1dCB0eXBlPSJudW1iZXIiIHZhbHVlPSIxIiBvbmNoYW5nZT0idXBkU3RydWN0KDEsJ2RpdicsdGhpcy52YWx1ZSkiPjwvdGQ+CiAgICAgICAgICAgIDx0ZD4xMzUuMDwvdGQ+CiAgICAgICAgICAgIDx0ZD48aW5wdXQgdHlwZT0ibnVtYmVyIiB2YWx1ZT0iMjgiIHN0ZXA9IjAuNSIgc3R5bGU9ImJhY2tncm91bmQ6I2ZmZmJlNjsgZm9udC13ZWlnaHQ6Ym9sZDsgdGV4dC1hbGlnbjpjZW50ZXI7IiBvbmNoYW5nZT0idXBkU3RydWN0KDEsJ3RhcmdldCcsdGhpcy52YWx1ZSkiPjwvdGQ+CiAgICAgICAgICAgIDx0ZCBzdHlsZT0iZm9udC13ZWlnaHQ6Ym9sZDsgY29sb3I6dmFyKC0tcHJpbWFyeSkiPjI4LjAgaDwvdGQ+CiAgICAgICAgICAgIDx0ZD4KICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9ImRpc3BsYXk6ZmxleDsgZ2FwOjVweDsganVzdGlmeS1jb250ZW50OmNlbnRlcjsiPgogICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImJ0bi1zbSBidG4td2FybmluZyIgb25jbGljaz0icmVuYW1lTGV2ZWwoMSkiPuKcj++4jzwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImJ0bi1zbSBidG4tZGFuZ2VyIiBvbmNsaWNrPSJkZWxldGVMZXZlbCgxKSI+8J+Xke+4jzwvYnV0dG9uPgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDwvdGQ+CiAgICAgICAgPC90cj48dHI+CiAgICAgICAgICAgIDx0ZD48Yj5UZXJtaW5hbGU8L2I+PC90ZD4KICAgICAgICAgICAgPHRkPjxpbnB1dCB0eXBlPSJudW1iZXIiIHZhbHVlPSIwIiBvbmNoYW5nZT0idXBkU3RydWN0KDIsJ3N0dWRlbnRzJyx0aGlzLnZhbHVlKSI+PC90ZD4KICAgICAgICAgICAgPHRkPjxpbnB1dCB0eXBlPSJudW1iZXIiIHZhbHVlPSIwIiBvbmNoYW5nZT0idXBkU3RydWN0KDIsJ2RpdicsdGhpcy52YWx1ZSkiPjwvdGQ+CiAgICAgICAgICAgIDx0ZD4wPC90ZD4KICAgICAgICAgICAgPHRkPjxpbnB1dCB0eXBlPSJudW1iZXIiIHZhbHVlPSIyOCIgc3RlcD0iMC41IiBzdHlsZT0iYmFja2dyb3VuZDojZmZmYmU2OyBmb250LXdlaWdodDpib2xkOyB0ZXh0LWFsaWduOmNlbnRlcjsiIG9uY2hhbmdlPSJ1cGRTdHJ1Y3QoMiwndGFyZ2V0Jyx0aGlzLnZhbHVlKSI+PC90ZD4KICAgICAgICAgICAgPHRkIHN0eWxlPSJmb250LXdlaWdodDpib2xkOyBjb2xvcjp2YXIoLS1wcmltYXJ5KSI+MC4wIGg8L3RkPgogICAgICAgICAgICA8dGQ+CiAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJkaXNwbGF5OmZsZXg7IGdhcDo1cHg7IGp1c3RpZnktY29udGVudDpjZW50ZXI7Ij4KICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJidG4tc20gYnRuLXdhcm5pbmciIG9uY2xpY2s9InJlbmFtZUxldmVsKDIpIj7inI/vuI88L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJidG4tc20gYnRuLWRhbmdlciIgb25jbGljaz0iZGVsZXRlTGV2ZWwoMikiPvCfl5HvuI88L2J1dHRvbj4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8L3RkPgogICAgICAgIDwvdHI+CiAgICA8dHIgY2xhc3M9InJvdy1zdXBwIj4KICAgICAgICA8dGQgY29sc3Bhbj0iNCIgc3R5bGU9InRleHQtYWxpZ246cmlnaHQ7IGZvbnQtd2VpZ2h0OmJvbGQ7IGZvbnQtc3R5bGU6aXRhbGljOyI+CiAgICAgICAgICAgIE1veWVucyBzdXBwbMOpbWVudGFpcmVzIDoKICAgICAgICA8L3RkPgogICAgICAgIDx0ZD4KICAgICAgICAgICAgPGRpdiBjbGFzcz0ic3VwcC1sYWJlbC1ncm91cCI+CiAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0ibnVtYmVyIiBjbGFzcz0iaW5wdXQtc3VwcCIgdmFsdWU9IjAiIG9uY2hhbmdlPSJ1cGRTdXBwKHRoaXMudmFsdWUpIj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgPC90ZD4KICAgICAgICA8dGQgc3R5bGU9ImZvbnQtd2VpZ2h0OmJvbGQ7Ij4wLjAgaDwvdGQ+CiAgICAgICAgPHRkPjwvdGQ+CiAgICA8L3RyPgogICAgPHRyIGNsYXNzPSJzdHJ1Y3R1cmUtdG90YWwtcm93Ij48dGQ+VE9UQUwgR8OJTsOJUkFMPC90ZD48dGQ+MTY0PC90ZD48dGQ+MjwvdGQ+PHRkPjgyLjA8L3RkPjx0ZCBzdHlsZT0idGV4dC1hbGlnbjpyaWdodDsiPlRvdGFsIE1veWVucyA6PC90ZD48dGQgc3R5bGU9ImNvbG9yOiNmMWM0MGY7Ij41Ny4wIGg8L3RkPjx0ZD48L3RkPjwvdHI+PC90Ym9keT4KICAgICAgICAgICAgPC90YWJsZT4KICAgICAgICA8L2Rpdj4KICAgICAgICA8ZGl2IGNsYXNzPSJjYXJkIj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0iY2FyZC1oZWFkZXIiPgogICAgICAgICAgICAgICAgPGgzPuKcj++4jyBOb21zIGRlcyBDbGFzc2VzPC9oMz4KICAgICAgICAgICAgICAgIDxzbWFsbCBzdHlsZT0iY29sb3I6IzdmOGM4ZDsgZm9udC13ZWlnaHQ6bm9ybWFsOyI+Q2xpcXVleiBzdXIgdW4gbm9tIHBvdXIgbGUgbW9kaWZpZXIgbGlicmVtZW50LiBMZXMgbm9tcyBzb250IGNvbnNlcnbDqXMgbcOqbWUgYXByw6hzIHLDqWfDqW7DqXJhdGlvbi48L3NtYWxsPgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPGRpdiBpZD0iY2xhc3MtbGlzdC1jb250YWluZXIiIHN0eWxlPSJkaXNwbGF5OiBmbGV4OyBmbGV4LXdyYXA6IHdyYXA7IGdhcDogOHB4OyBtYXJnaW4tdG9wOiAxMHB4OyI+PHNwYW4gc3R5bGU9ImJhY2tncm91bmQ6dmFyKC0tc2Vjb25kYXJ5KTsgY29sb3I6d2hpdGU7IHBhZGRpbmc6NHB4IDhweDsgYm9yZGVyLXJhZGl1czo0cHg7IGZvbnQtc2l6ZTowLjhyZW07Ij4yQTwvc3Bhbj48c3BhbiBzdHlsZT0iYmFja2dyb3VuZDp2YXIoLS1zZWNvbmRhcnkpOyBjb2xvcjp3aGl0ZTsgcGFkZGluZzo0cHggOHB4OyBib3JkZXItcmFkaXVzOjRweDsgZm9udC1zaXplOjAuOHJlbTsiPjFBPC9zcGFuPjwvZGl2PgogICAgICAgIDwvZGl2PgogICAgPC9kaXY+CgogICA8ZGl2IGlkPSJ2ZW50aWxhdGlvbiIgY2xhc3M9InNlY3Rpb24iPgogICAgICAgIDxkaXYgY2xhc3M9ImNhcmQiPgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJjYXJkLWhlYWRlciI+CiAgICAgICAgICAgICAgICA8aDM+R3JpbGxlIEhvcmFpcmU8L2gzPgogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICA8ZGl2IGlkPSJncmlkLWtwaSIgY2xhc3M9ImtwaS13aWRnZXQiPgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImtwaS1yb3ciPgogICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz0ia3BpLWljb24iPvCfjI08L3NwYW4+CiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJrcGktbGFiZWwiPsOJVEFCIDo8L3NwYW4+CiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGlkPSJrcGktZXRhYi12YWwiIGNsYXNzPSJrcGktdmFsIj40NC4wIC8gNTcuMCBoPC9zcGFuPgogICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBpZD0ia3BpLWV0YWItZGlmZiIgY2xhc3M9ImtwaS10YWcgYmctcG9zIj4rMTMuMDwvc3Bhbj4KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8ZGl2IGlkPSJrcGktbGV2ZWwtcm93IiBjbGFzcz0ia3BpLXJvdyBsZXZlbC1yb3ciIHN0eWxlPSJkaXNwbGF5OiBmbGV4OyI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJrcGktaWNvbiI+8J+Pl++4jzwvc3Bhbj4KICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9ImtwaS1sYWJlbCI+TklWIDo8L3NwYW4+CiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGlkPSJrcGktbHZsLXZhbCIgY2xhc3M9ImtwaS12YWwiPjI1LjAgLyAyOS4wIGg8L3NwYW4+CiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGlkPSJrcGktbHZsLWRpZmYiIGNsYXNzPSJrcGktdGFnIGJnLXBvcyI+KzQuMDwvc3Bhbj4KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZXhwb3J0LWdyb3VwIj4KICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJidG4tZXhwIiBvbmNsaWNrPSJleHBvcnRDdXJyZW50UGFnZSgnZXhjZWwnKSI+8J+TiiBFeGNlbDwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImJ0bi1leHAiIG9uY2xpY2s9ImV4cG9ydEN1cnJlbnRQYWdlKCdwZGYnKSI+8J+ThCBQREY8L2J1dHRvbj4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgPGRpdj4KICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJidG4gYnRuLXB1cnBsZSBidG4tc20iIG9uY2xpY2s9Im9wZW5XZWlnaHRpbmdNZW51KCkiPuKalu+4jyBQb25kw6lyYXRpb248L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJidG4gYnRuLXdhcm5pbmcgYnRuLXNtIiBvbmNsaWNrPSJyZXNldFRvT2ZmaWNpYWwoKSI+4pqg77iPIFJlc2V0IE9mZmljaWVsPC9idXR0b24+CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9InRhYi1jb250YWluZXIiIGlkPSJncmlkLXRhYnMiPjxkaXYgY2xhc3M9InRhYiBhY3RpdmUiIG9uY2xpY2s9ImNoYW5nZVRhYih0aGlzLCAwKSI+Mm5kZTwvZGl2PjxkaXYgY2xhc3M9InRhYiAiIG9uY2xpY2s9ImNoYW5nZVRhYih0aGlzLCAxKSI+McOocmU8L2Rpdj48ZGl2IGNsYXNzPSJ0YWIgIiBvbmNsaWNrPSJjaGFuZ2VUYWIodGhpcywgMikiPlRlcm1pbmFsZTwvZGl2PjxkaXYgY2xhc3M9InRhYiBnbG9iYWwtdGFiIiBvbmNsaWNrPSJjaGFuZ2VUYWIodGhpcywgLTEpIj7wn4yNIFZ1ZSBHbG9iYWxlPC9kaXY+PC9kaXY+CiAgICAgICAgICAgIDxkaXYgaWQ9ImdyaWQtY29udGFpbmVyIj48ZGl2IGNsYXNzPSJncmlkLXdyYXBwZXIiPjx0YWJsZSBjbGFzcz0iZ3JpZC10YWJsZSI+CiAgICA8dGhlYWQ+CiAgICAgICAgPHRyPgogICAgICAgICAgICA8dGggY2xhc3M9InRoLWNsYXNzIiBzdHlsZT0idmVydGljYWwtYWxpZ246Ym90dG9tOyBwYWRkaW5nLWJvdHRvbToxMHB4OyI+PHNwYW4gc3R5bGU9ImZvbnQtc2l6ZToxLjFyZW07IGNvbG9yOiMyYzNlNTA7Ij4ybmRlPC9zcGFuPjwvdGg+CiAgICAgICAgICAgIDx0aCBjbGFzcz0idGgtdmVydGljYWwiPjxzcGFuIGNsYXNzPSJkZWwtYmFkZ2UiIG9uY2xpY2s9ImRlbFN1YmplY3QoJ0ZyYW7Dp2FpcycpIj7Dlzwvc3Bhbj48ZGl2IGNsYXNzPSJ0aC10ZXh0LXdyYXBwZXIiPkZyYW7Dp2FpczwvZGl2PjwvdGg+PHRoIGNsYXNzPSJ0aC12ZXJ0aWNhbCI+PHNwYW4gY2xhc3M9ImRlbC1iYWRnZSIgb25jbGljaz0iZGVsU3ViamVjdCgnSGlzdC1Hw6lvJykiPsOXPC9zcGFuPjxkaXYgY2xhc3M9InRoLXRleHQtd3JhcHBlciI+SGlzdC1Hw6lvPC9kaXY+PC90aD48dGggY2xhc3M9InRoLXZlcnRpY2FsIj48c3BhbiBjbGFzcz0iZGVsLWJhZGdlIiBvbmNsaWNrPSJkZWxTdWJqZWN0KCdMVkEnKSI+w5c8L3NwYW4+PGRpdiBjbGFzcz0idGgtdGV4dC13cmFwcGVyIj5MVkE8L2Rpdj48L3RoPjx0aCBjbGFzcz0idGgtdmVydGljYWwiPjxzcGFuIGNsYXNzPSJkZWwtYmFkZ2UiIG9uY2xpY2s9ImRlbFN1YmplY3QoJ0xWQicpIj7Dlzwvc3Bhbj48ZGl2IGNsYXNzPSJ0aC10ZXh0LXdyYXBwZXIiPkxWQjwvZGl2PjwvdGg+PHRoIGNsYXNzPSJ0aC12ZXJ0aWNhbCI+PHNwYW4gY2xhc3M9ImRlbC1iYWRnZSIgb25jbGljaz0iZGVsU3ViamVjdCgnU0VTJykiPsOXPC9zcGFuPjxkaXYgY2xhc3M9InRoLXRleHQtd3JhcHBlciI+U0VTPC9kaXY+PC90aD48dGggY2xhc3M9InRoLXZlcnRpY2FsIj48c3BhbiBjbGFzcz0iZGVsLWJhZGdlIiBvbmNsaWNrPSJkZWxTdWJqZWN0KCdNYXRocyAoVEMpJykiPsOXPC9zcGFuPjxkaXYgY2xhc3M9InRoLXRleHQtd3JhcHBlciI+TWF0aHMgKFRDKTwvZGl2PjwvdGg+PHRoIGNsYXNzPSJ0aC12ZXJ0aWNhbCI+PHNwYW4gY2xhc3M9ImRlbC1iYWRnZSIgb25jbGljaz0iZGVsU3ViamVjdCgnUGh5cy1DaGkgKFRDKScpIj7Dlzwvc3Bhbj48ZGl2IGNsYXNzPSJ0aC10ZXh0LXdyYXBwZXIiPlBoeXMtQ2hpIChUQyk8L2Rpdj48L3RoPjx0aCBjbGFzcz0idGgtdmVydGljYWwiPjxzcGFuIGNsYXNzPSJkZWwtYmFkZ2UiIG9uY2xpY2s9ImRlbFN1YmplY3QoJ1NWVCAoVEMpJykiPsOXPC9zcGFuPjxkaXYgY2xhc3M9InRoLXRleHQtd3JhcHBlciI+U1ZUIChUQyk8L2Rpdj48L3RoPjx0aCBjbGFzcz0idGgtdmVydGljYWwiPjxzcGFuIGNsYXNzPSJkZWwtYmFkZ2UiIG9uY2xpY2s9ImRlbFN1YmplY3QoJ0VQUycpIj7Dlzwvc3Bhbj48ZGl2IGNsYXNzPSJ0aC10ZXh0LXdyYXBwZXIiPkVQUzwvZGl2PjwvdGg+PHRoIGNsYXNzPSJ0aC12ZXJ0aWNhbCI+PHNwYW4gY2xhc3M9ImRlbC1iYWRnZSIgb25jbGljaz0iZGVsU3ViamVjdCgnRW5zLiBTY2llbnRpZmlxdWUnKSI+w5c8L3NwYW4+PGRpdiBjbGFzcz0idGgtdGV4dC13cmFwcGVyIj5FbnMuIFNjaWVudGlmaXF1ZTwvZGl2PjwvdGg+PHRoIGNsYXNzPSJ0aC12ZXJ0aWNhbCI+PHNwYW4gY2xhc3M9ImRlbC1iYWRnZSIgb25jbGljaz0iZGVsU3ViamVjdCgnRU1DJykiPsOXPC9zcGFuPjxkaXYgY2xhc3M9InRoLXRleHQtd3JhcHBlciI+RU1DPC9kaXY+PC90aD48dGggY2xhc3M9InRoLXZlcnRpY2FsIj48c3BhbiBjbGFzcz0iZGVsLWJhZGdlIiBvbmNsaWNrPSJkZWxTdWJqZWN0KCdBdXRvbm9taWUgRVBMRScpIj7Dlzwvc3Bhbj48ZGl2IGNsYXNzPSJ0aC10ZXh0LXdyYXBwZXIiPkF1dG9ub21pZSBFUExFPC9kaXY+PC90aD48dGggY2xhc3M9InRoLXZlcnRpY2FsIj48c3BhbiBjbGFzcz0iZGVsLWJhZGdlIiBvbmNsaWNrPSJkZWxTdWJqZWN0KCdNQXRocycpIj7Dlzwvc3Bhbj48ZGl2IGNsYXNzPSJ0aC10ZXh0LXdyYXBwZXIiPk1BdGhzPC9kaXY+PC90aD4KICAgICAgICAgICAgPHRoIGNsYXNzPSJ0aC12ZXJ0aWNhbCIgc3R5bGU9InZlcnRpY2FsLWFsaWduOmJvdHRvbTsiPjxkaXYgc3R5bGU9IndyaXRpbmctbW9kZTp2ZXJ0aWNhbC1ybDsgdHJhbnNmb3JtOnJvdGF0ZSgxODBkZWcpOyBjb2xvcjojMmMzZTUwOyBmb250LXdlaWdodDpib2xkOyBoZWlnaHQ6YXV0bzsgbWFyZ2luOjAgYXV0bzsiPlRPVEFMPC9kaXY+PC90aD4KICAgICAgICA8L3RyPgogICAgPC90aGVhZD4KICAgIDx0Ym9keT4KICAgIAogICAgPHRyIHN0eWxlPSJiYWNrZ3JvdW5kOiNmY2YzZmY7Ij48dGQgc3R5bGU9InRleHQtYWxpZ246Y2VudGVyOyBmb250LXdlaWdodDpib2xkOyBjb2xvcjojOGU0NGFkOyBmb250LXNpemU6MC43NXJlbTsiPkNvZWZmLjwvdGQ+CiAgICA8dGQ+PGlucHV0IGNsYXNzPSJpbnAtY29lZiIgdmFsdWU9IjEiIG9uY2hhbmdlPSJ1cGRMdmwoJzJuZGUnLCdGcmFuw6dhaXMnLCdjb2VmJyx0aGlzLnZhbHVlKSI+PC90ZD48dGQ+PGlucHV0IGNsYXNzPSJpbnAtY29lZiIgdmFsdWU9IjEiIG9uY2hhbmdlPSJ1cGRMdmwoJzJuZGUnLCdIaXN0LUfDqW8nLCdjb2VmJyx0aGlzLnZhbHVlKSI+PC90ZD48dGQ+PGlucHV0IGNsYXNzPSJpbnAtY29lZiIgdmFsdWU9IjEiIG9uY2hhbmdlPSJ1cGRMdmwoJzJuZGUnLCdMVkEnLCdjb2VmJyx0aGlzLnZhbHVlKSI+PC90ZD48dGQ+PGlucHV0IGNsYXNzPSJpbnAtY29lZiIgdmFsdWU9IjEiIG9uY2hhbmdlPSJ1cGRMdmwoJzJuZGUnLCdMVkInLCdjb2VmJyx0aGlzLnZhbHVlKSI+PC90ZD48dGQ+PGlucHV0IGNsYXNzPSJpbnAtY29lZiIgdmFsdWU9IjEiIG9uY2hhbmdlPSJ1cGRMdmwoJzJuZGUnLCdTRVMnLCdjb2VmJyx0aGlzLnZhbHVlKSI+PC90ZD48dGQ+PGlucHV0IGNsYXNzPSJpbnAtY29lZiIgdmFsdWU9IjEiIG9uY2hhbmdlPSJ1cGRMdmwoJzJuZGUnLCdNYXRocyAoVEMpJywnY29lZicsdGhpcy52YWx1ZSkiPjwvdGQ+PHRkPjxpbnB1dCBjbGFzcz0iaW5wLWNvZWYiIHZhbHVlPSIxIiBvbmNoYW5nZT0idXBkTHZsKCcybmRlJywnUGh5cy1DaGkgKFRDKScsJ2NvZWYnLHRoaXMudmFsdWUpIj48L3RkPjx0ZD48aW5wdXQgY2xhc3M9ImlucC1jb2VmIiB2YWx1ZT0iMSIgb25jaGFuZ2U9InVwZEx2bCgnMm5kZScsJ1NWVCAoVEMpJywnY29lZicsdGhpcy52YWx1ZSkiPjwvdGQ+PHRkPjxpbnB1dCBjbGFzcz0iaW5wLWNvZWYiIHZhbHVlPSIxIiBvbmNoYW5nZT0idXBkTHZsKCcybmRlJywnRVBTJywnY29lZicsdGhpcy52YWx1ZSkiPjwvdGQ+PHRkPjxpbnB1dCBjbGFzcz0iaW5wLWNvZWYiIHZhbHVlPSIxIiBvbmNoYW5nZT0idXBkTHZsKCcybmRlJywnRW5zLiBTY2llbnRpZmlxdWUnLCdjb2VmJyx0aGlzLnZhbHVlKSI+PC90ZD48dGQ+PGlucHV0IGNsYXNzPSJpbnAtY29lZiIgdmFsdWU9IjEiIG9uY2hhbmdlPSJ1cGRMdmwoJzJuZGUnLCdFTUMnLCdjb2VmJyx0aGlzLnZhbHVlKSI+PC90ZD48dGQ+PGlucHV0IGNsYXNzPSJpbnAtY29lZiIgdmFsdWU9IjEiIG9uY2hhbmdlPSJ1cGRMdmwoJzJuZGUnLCdBdXRvbm9taWUgRVBMRScsJ2NvZWYnLHRoaXMudmFsdWUpIj48L3RkPjx0ZD48aW5wdXQgY2xhc3M9ImlucC1jb2VmIiB2YWx1ZT0iMSIgb25jaGFuZ2U9InVwZEx2bCgnMm5kZScsJ01BdGhzJywnY29lZicsdGhpcy52YWx1ZSkiPjwvdGQ+CiAgICA8dGQgc3R5bGU9ImJhY2tncm91bmQ6I2Y0ZjZmOTsiPjwvdGQ+PC90cj4KICAgIAogICAgPHRyIHN0eWxlPSJiYWNrZ3JvdW5kOiNmZmY7Ij48dGQgc3R5bGU9InRleHQtYWxpZ246Y2VudGVyOyBmb250LXdlaWdodDpib2xkOyBjb2xvcjojN2Y4YzhkOyBmb250LXNpemU6MC43NXJlbTsiPk9mZi48L3RkPgogICAgPHRkPjxpbnB1dCBjbGFzcz0iaW5wLWhvdXJzIiB0eXBlPSJ0ZXh0IiB2YWx1ZT0iNCIgb25pbnB1dD0idXBkYXRlSW5wSG91cnNTdHlsZSh0aGlzKSIgb25jaGFuZ2U9InVwZEx2bCgnMm5kZScsJ0ZyYW7Dp2FpcycsJ2Jhc2UnLHRoaXMudmFsdWUpIj48L3RkPjx0ZD48aW5wdXQgY2xhc3M9ImlucC1ob3VycyIgdHlwZT0idGV4dCIgdmFsdWU9IjMiIG9uaW5wdXQ9InVwZGF0ZUlucEhvdXJzU3R5bGUodGhpcykiIG9uY2hhbmdlPSJ1cGRMdmwoJzJuZGUnLCdIaXN0LUfDqW8nLCdiYXNlJyx0aGlzLnZhbHVlKSI+PC90ZD48dGQ+PGlucHV0IGNsYXNzPSJpbnAtaG91cnMiIHR5cGU9InRleHQiIHZhbHVlPSIzIiBvbmlucHV0PSJ1cGRhdGVJbnBIb3Vyc1N0eWxlKHRoaXMpIiBvbmNoYW5nZT0idXBkTHZsKCcybmRlJywnTFZBJywnYmFzZScsdGhpcy52YWx1ZSkiPjwvdGQ+PHRkPjxpbnB1dCBjbGFzcz0iaW5wLWhvdXJzIiB0eXBlPSJ0ZXh0IiB2YWx1ZT0iMi41IiBvbmlucHV0PSJ1cGRhdGVJbnBIb3Vyc1N0eWxlKHRoaXMpIiBvbmNoYW5nZT0idXBkTHZsKCcybmRlJywnTFZCJywnYmFzZScsdGhpcy52YWx1ZSkiPjwvdGQ+PHRkPjxpbnB1dCBjbGFzcz0iaW5wLWhvdXJzIiB0eXBlPSJ0ZXh0IiB2YWx1ZT0iMS41IiBvbmlucHV0PSJ1cGRhdGVJbnBIb3Vyc1N0eWxlKHRoaXMpIiBvbmNoYW5nZT0idXBkTHZsKCcybmRlJywnU0VTJywnYmFzZScsdGhpcy52YWx1ZSkiPjwvdGQ+PHRkPjxpbnB1dCBjbGFzcz0iaW5wLWhvdXJzIiB2YWx1ZT0iNCIgb25jaGFuZ2U9InVwZEx2bCgnMm5kZScsJ01hdGhzIChUQyknLCdiYXNlJyx0aGlzLnZhbHVlKSI+PC90ZD48dGQ+PGlucHV0IGNsYXNzPSJpbnAtaG91cnMiIHZhbHVlPSIzIiBvbmNoYW5nZT0idXBkTHZsKCcybmRlJywnUGh5cy1DaGkgKFRDKScsJ2Jhc2UnLHRoaXMudmFsdWUpIj48L3RkPjx0ZD48aW5wdXQgY2xhc3M9ImlucC1ob3VycyIgdmFsdWU9IjEuNSIgb25jaGFuZ2U9InVwZEx2bCgnMm5kZScsJ1NWVCAoVEMpJywnYmFzZScsdGhpcy52YWx1ZSkiPjwvdGQ+PHRkPjxpbnB1dCBjbGFzcz0iaW5wLWhvdXJzIiB0eXBlPSJ0ZXh0IiB2YWx1ZT0iMiIgb25pbnB1dD0idXBkYXRlSW5wSG91cnNTdHlsZSh0aGlzKSIgb25jaGFuZ2U9InVwZEx2bCgnMm5kZScsJ0VQUycsJ2Jhc2UnLHRoaXMudmFsdWUpIj48L3RkPjx0ZD48aW5wdXQgY2xhc3M9ImlucC1ob3VycyIgdHlwZT0idGV4dCIgdmFsdWU9IjAiIG9uaW5wdXQ9InVwZGF0ZUlucEhvdXJzU3R5bGUodGhpcykiIG9uY2hhbmdlPSJ1cGRMdmwoJzJuZGUnLCdFbnMuIFNjaWVudGlmaXF1ZScsJ2Jhc2UnLHRoaXMudmFsdWUpIj48L3RkPjx0ZD48aW5wdXQgY2xhc3M9ImlucC1ob3VycyIgdHlwZT0idGV4dCIgdmFsdWU9IjAuNSIgb25pbnB1dD0idXBkYXRlSW5wSG91cnNTdHlsZSh0aGlzKSIgb25jaGFuZ2U9InVwZEx2bCgnMm5kZScsJ0VNQycsJ2Jhc2UnLHRoaXMudmFsdWUpIj48L3RkPjx0ZD48aW5wdXQgY2xhc3M9ImlucC1ob3VycyIgdHlwZT0idGV4dCIgdmFsdWU9IjAiIG9uaW5wdXQ9InVwZGF0ZUlucEhvdXJzU3R5bGUodGhpcykiIG9uY2hhbmdlPSJ1cGRMdmwoJzJuZGUnLCdBdXRvbm9taWUgRVBMRScsJ2Jhc2UnLHRoaXMudmFsdWUpIj48L3RkPjx0ZD48aW5wdXQgY2xhc3M9ImlucC1ob3VycyIgdHlwZT0idGV4dCIgdmFsdWU9IjAiIG9uaW5wdXQ9InVwZGF0ZUlucEhvdXJzU3R5bGUodGhpcykiIG9uY2hhbmdlPSJ1cGRMdmwoJzJuZGUnLCdNQXRocycsJ2Jhc2UnLHRoaXMudmFsdWUpIj48L3RkPgogICAgPHRkIHJvd3NwYW49IjIiIGlkPSJ0b3QtbHZsIiBzdHlsZT0iZm9udC13ZWlnaHQ6Ym9sZDsgZm9udC1zaXplOjEuMXJlbTsgdmVydGljYWwtYWxpZ246bWlkZGxlOyI+MjUuMDwvdGQ+PC90cj4KICAgIAogICAgPHRyIHN0eWxlPSJiYWNrZ3JvdW5kOiNmZmZjZjU7Ij48dGQgc3R5bGU9InRleHQtYWxpZ246Y2VudGVyOyBmb250LXdlaWdodDpib2xkOyBjb2xvcjojZDM1NDAwOyBmb250LXNpemU6MC42NXJlbTsiPkF1dG9ub21pZTwvdGQ+CiAgICA8dGQ+PGlucHV0IGNsYXNzPSJpbnAtbWFyZ2UiIHZhbHVlPSIwIiBvbmNoYW5nZT0idXBkTHZsKCcybmRlJywnRnJhbsOnYWlzJywnbWFyZ2UnLHRoaXMudmFsdWUpIj48L3RkPjx0ZD48aW5wdXQgY2xhc3M9ImlucC1tYXJnZSIgdmFsdWU9IjAiIG9uY2hhbmdlPSJ1cGRMdmwoJzJuZGUnLCdIaXN0LUfDqW8nLCdtYXJnZScsdGhpcy52YWx1ZSkiPjwvdGQ+PHRkPjxpbnB1dCBjbGFzcz0iaW5wLW1hcmdlIiB2YWx1ZT0iMCIgb25jaGFuZ2U9InVwZEx2bCgnMm5kZScsJ0xWQScsJ21hcmdlJyx0aGlzLnZhbHVlKSI+PC90ZD48dGQ+PGlucHV0IGNsYXNzPSJpbnAtbWFyZ2UiIHZhbHVlPSIwIiBvbmNoYW5nZT0idXBkTHZsKCcybmRlJywnTFZCJywnbWFyZ2UnLHRoaXMudmFsdWUpIj48L3RkPjx0ZD48aW5wdXQgY2xhc3M9ImlucC1tYXJnZSIgdmFsdWU9IjAiIG9uY2hhbmdlPSJ1cGRMdmwoJzJuZGUnLCdTRVMnLCdtYXJnZScsdGhpcy52YWx1ZSkiPjwvdGQ+PHRkPjxpbnB1dCBjbGFzcz0iaW5wLW1hcmdlIiB2YWx1ZT0iMCIgb25jaGFuZ2U9InVwZEx2bCgnMm5kZScsJ01hdGhzIChUQyknLCdtYXJnZScsdGhpcy52YWx1ZSkiPjwvdGQ+PHRkPjxpbnB1dCBjbGFzcz0iaW5wLW1hcmdlIiB2YWx1ZT0iMCIgb25jaGFuZ2U9InVwZEx2bCgnMm5kZScsJ1BoeXMtQ2hpIChUQyknLCdtYXJnZScsdGhpcy52YWx1ZSkiPjwvdGQ+PHRkPjxpbnB1dCBjbGFzcz0iaW5wLW1hcmdlIiB2YWx1ZT0iMCIgb25jaGFuZ2U9InVwZEx2bCgnMm5kZScsJ1NWVCAoVEMpJywnbWFyZ2UnLHRoaXMudmFsdWUpIj48L3RkPjx0ZD48aW5wdXQgY2xhc3M9ImlucC1tYXJnZSIgdmFsdWU9IjAiIG9uY2hhbmdlPSJ1cGRMdmwoJzJuZGUnLCdFUFMnLCdtYXJnZScsdGhpcy52YWx1ZSkiPjwvdGQ+PHRkPjxpbnB1dCBjbGFzcz0iaW5wLW1hcmdlIiB2YWx1ZT0iMCIgb25jaGFuZ2U9InVwZEx2bCgnMm5kZScsJ0Vucy4gU2NpZW50aWZpcXVlJywnbWFyZ2UnLHRoaXMudmFsdWUpIj48L3RkPjx0ZD48aW5wdXQgY2xhc3M9ImlucC1tYXJnZSIgdmFsdWU9IjAiIG9uY2hhbmdlPSJ1cGRMdmwoJzJuZGUnLCdFTUMnLCdtYXJnZScsdGhpcy52YWx1ZSkiPjwvdGQ+PHRkPjxpbnB1dCBjbGFzcz0iaW5wLW1hcmdlIiB2YWx1ZT0iMCIgb25jaGFuZ2U9InVwZEx2bCgnMm5kZScsJ0F1dG9ub21pZSBFUExFJywnbWFyZ2UnLHRoaXMudmFsdWUpIj48L3RkPjx0ZD48aW5wdXQgY2xhc3M9ImlucC1tYXJnZSIgdmFsdWU9IjAiIG9uY2hhbmdlPSJ1cGRMdmwoJzJuZGUnLCdNQXRocycsJ21hcmdlJyx0aGlzLnZhbHVlKSI+PC90ZD4KICAgIDwvdHI+CiAgICAKICAgIDx0ciBzdHlsZT0iaGVpZ2h0OjE1cHg7IGJhY2tncm91bmQ6I2Y0ZjZmOTsiPjx0ZCBjb2xzcGFuPSIxNSI+PC90ZD48L3RyPjx0ciBzdHlsZT0iYmFja2dyb3VuZDp3aGl0ZSI+CiAgICAgICAgICAgIDx0ZCBjbGFzcz0idGQtY2xhc3MiPgogICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iY2xhc3MtbmFtZS1idG4iIG9uY2xpY2s9InJlbmFtZUNsYXNzKCcyQScpIj4yQTwvYnV0dG9uPgogICAgICAgICAgICAgICAgPGxhYmVsIHN0eWxlPSJkaXNwbGF5OmJsb2NrOyBmb250LXNpemU6MC42cmVtOyI+PGlucHV0IHR5cGU9ImNoZWNrYm94IiBvbmNoYW5nZT0idG9nZ2xlT3YoJzJBJykiPiBQZXJzby48L2xhYmVsPgogICAgICAgICAgICA8L3RkPjx0ZCBzdHlsZT0ib3BhY2l0eTowLjY7IHBvaW50ZXItZXZlbnRzOm5vbmU7Ij48ZGl2IGNsYXNzPSJ2ZXJ0aWNhbC1zdGFjayI+PGlucHV0IGNsYXNzPSJpbnAtaG91cnMiIHR5cGU9InRleHQiIHZhbHVlPSI0IiBvbmlucHV0PSJ1cGRhdGVJbnBIb3Vyc1N0eWxlKHRoaXMpIiBvbmNoYW5nZT0idXBkT3YoJzJBJywnRnJhbsOnYWlzJywnYmFzZScsdGhpcy52YWx1ZSkiPjxpbnB1dCBjbGFzcz0iaW5wLW1hcmdlIiB2YWx1ZT0iMCIgb25jaGFuZ2U9InVwZE92KCcyQScsJ0ZyYW7Dp2FpcycsJ21hcmdlJyx0aGlzLnZhbHVlKSI+PC9kaXY+PC90ZD48dGQgc3R5bGU9Im9wYWNpdHk6MC42OyBwb2ludGVyLWV2ZW50czpub25lOyI+PGRpdiBjbGFzcz0idmVydGljYWwtc3RhY2siPjxpbnB1dCBjbGFzcz0iaW5wLWhvdXJzIiB0eXBlPSJ0ZXh0IiB2YWx1ZT0iMyIgb25pbnB1dD0idXBkYXRlSW5wSG91cnNTdHlsZSh0aGlzKSIgb25jaGFuZ2U9InVwZE92KCcyQScsJ0hpc3QtR8OpbycsJ2Jhc2UnLHRoaXMudmFsdWUpIj48aW5wdXQgY2xhc3M9ImlucC1tYXJnZSIgdmFsdWU9IjAiIG9uY2hhbmdlPSJ1cGRPdignMkEnLCdIaXN0LUfDqW8nLCdtYXJnZScsdGhpcy52YWx1ZSkiPjwvZGl2PjwvdGQ+PHRkIHN0eWxlPSJvcGFjaXR5OjAuNjsgcG9pbnRlci1ldmVudHM6bm9uZTsiPjxkaXYgY2xhc3M9InZlcnRpY2FsLXN0YWNrIj48aW5wdXQgY2xhc3M9ImlucC1ob3VycyIgdHlwZT0idGV4dCIgdmFsdWU9IjMiIG9uaW5wdXQ9InVwZGF0ZUlucEhvdXJzU3R5bGUodGhpcykiIG9uY2hhbmdlPSJ1cGRPdignMkEnLCdMVkEnLCdiYXNlJyx0aGlzLnZhbHVlKSI+PGlucHV0IGNsYXNzPSJpbnAtbWFyZ2UiIHZhbHVlPSIwIiBvbmNoYW5nZT0idXBkT3YoJzJBJywnTFZBJywnbWFyZ2UnLHRoaXMudmFsdWUpIj48L2Rpdj48L3RkPjx0ZCBzdHlsZT0ib3BhY2l0eTowLjY7IHBvaW50ZXItZXZlbnRzOm5vbmU7Ij48ZGl2IGNsYXNzPSJ2ZXJ0aWNhbC1zdGFjayI+PGlucHV0IGNsYXNzPSJpbnAtaG91cnMiIHR5cGU9InRleHQiIHZhbHVlPSIyLjUiIG9uaW5wdXQ9InVwZGF0ZUlucEhvdXJzU3R5bGUodGhpcykiIG9uY2hhbmdlPSJ1cGRPdignMkEnLCdMVkInLCdiYXNlJyx0aGlzLnZhbHVlKSI+PGlucHV0IGNsYXNzPSJpbnAtbWFyZ2UiIHZhbHVlPSIwIiBvbmNoYW5nZT0idXBkT3YoJzJBJywnTFZCJywnbWFyZ2UnLHRoaXMudmFsdWUpIj48L2Rpdj48L3RkPjx0ZCBzdHlsZT0ib3BhY2l0eTowLjY7IHBvaW50ZXItZXZlbnRzOm5vbmU7Ij48ZGl2IGNsYXNzPSJ2ZXJ0aWNhbC1zdGFjayI+PGlucHV0IGNsYXNzPSJpbnAtaG91cnMiIHR5cGU9InRleHQiIHZhbHVlPSIxLjUiIG9uaW5wdXQ9InVwZGF0ZUlucEhvdXJzU3R5bGUodGhpcykiIG9uY2hhbmdlPSJ1cGRPdignMkEnLCdTRVMnLCdiYXNlJyx0aGlzLnZhbHVlKSI+PGlucHV0IGNsYXNzPSJpbnAtbWFyZ2UiIHZhbHVlPSIwIiBvbmNoYW5nZT0idXBkT3YoJzJBJywnU0VTJywnbWFyZ2UnLHRoaXMudmFsdWUpIj48L2Rpdj48L3RkPjx0ZCBzdHlsZT0ib3BhY2l0eTowLjY7IHBvaW50ZXItZXZlbnRzOm5vbmU7Ij48ZGl2IGNsYXNzPSJ2ZXJ0aWNhbC1zdGFjayI+PGlucHV0IGNsYXNzPSJpbnAtaG91cnMiIHZhbHVlPSI0IiBvbmNoYW5nZT0idXBkT3YoJzJBJywnTWF0aHMgKFRDKScsJ2Jhc2UnLHRoaXMudmFsdWUpIj48aW5wdXQgY2xhc3M9ImlucC1tYXJnZSIgdmFsdWU9IjAiIG9uY2hhbmdlPSJ1cGRPdignMkEnLCdNYXRocyAoVEMpJywnbWFyZ2UnLHRoaXMudmFsdWUpIj48L2Rpdj48L3RkPjx0ZCBzdHlsZT0ib3BhY2l0eTowLjY7IHBvaW50ZXItZXZlbnRzOm5vbmU7Ij48ZGl2IGNsYXNzPSJ2ZXJ0aWNhbC1zdGFjayI+PGlucHV0IGNsYXNzPSJpbnAtaG91cnMiIHZhbHVlPSIzIiBvbmNoYW5nZT0idXBkT3YoJzJBJywnUGh5cy1DaGkgKFRDKScsJ2Jhc2UnLHRoaXMudmFsdWUpIj48aW5wdXQgY2xhc3M9ImlucC1tYXJnZSIgdmFsdWU9IjAiIG9uY2hhbmdlPSJ1cGRPdignMkEnLCdQaHlzLUNoaSAoVEMpJywnbWFyZ2UnLHRoaXMudmFsdWUpIj48L2Rpdj48L3RkPjx0ZCBzdHlsZT0ib3BhY2l0eTowLjY7IHBvaW50ZXItZXZlbnRzOm5vbmU7Ij48ZGl2IGNsYXNzPSJ2ZXJ0aWNhbC1zdGFjayI+PGlucHV0IGNsYXNzPSJpbnAtaG91cnMiIHZhbHVlPSIxLjUiIG9uY2hhbmdlPSJ1cGRPdignMkEnLCdTVlQgKFRDKScsJ2Jhc2UnLHRoaXMudmFsdWUpIj48aW5wdXQgY2xhc3M9ImlucC1tYXJnZSIgdmFsdWU9IjAiIG9uY2hhbmdlPSJ1cGRPdignMkEnLCdTVlQgKFRDKScsJ21hcmdlJyx0aGlzLnZhbHVlKSI+PC9kaXY+PC90ZD48dGQgc3R5bGU9Im9wYWNpdHk6MC42OyBwb2ludGVyLWV2ZW50czpub25lOyI+PGRpdiBjbGFzcz0idmVydGljYWwtc3RhY2siPjxpbnB1dCBjbGFzcz0iaW5wLWhvdXJzIiB0eXBlPSJ0ZXh0IiB2YWx1ZT0iMiIgb25pbnB1dD0idXBkYXRlSW5wSG91cnNTdHlsZSh0aGlzKSIgb25jaGFuZ2U9InVwZE92KCcyQScsJ0VQUycsJ2Jhc2UnLHRoaXMudmFsdWUpIj48aW5wdXQgY2xhc3M9ImlucC1tYXJnZSIgdmFsdWU9IjAiIG9uY2hhbmdlPSJ1cGRPdignMkEnLCdFUFMnLCdtYXJnZScsdGhpcy52YWx1ZSkiPjwvZGl2PjwvdGQ+PHRkIHN0eWxlPSJvcGFjaXR5OjAuNjsgcG9pbnRlci1ldmVudHM6bm9uZTsiPjxkaXYgY2xhc3M9InZlcnRpY2FsLXN0YWNrIj48aW5wdXQgY2xhc3M9ImlucC1ob3VycyIgdHlwZT0idGV4dCIgdmFsdWU9IjAiIG9uaW5wdXQ9InVwZGF0ZUlucEhvdXJzU3R5bGUodGhpcykiIG9uY2hhbmdlPSJ1cGRPdignMkEnLCdFbnMuIFNjaWVudGlmaXF1ZScsJ2Jhc2UnLHRoaXMudmFsdWUpIj48aW5wdXQgY2xhc3M9ImlucC1tYXJnZSIgdmFsdWU9IjAiIG9uY2hhbmdlPSJ1cGRPdignMkEnLCdFbnMuIFNjaWVudGlmaXF1ZScsJ21hcmdlJyx0aGlzLnZhbHVlKSI+PC9kaXY+PC90ZD48dGQgc3R5bGU9Im9wYWNpdHk6MC42OyBwb2ludGVyLWV2ZW50czpub25lOyI+PGRpdiBjbGFzcz0idmVydGljYWwtc3RhY2siPjxpbnB1dCBjbGFzcz0iaW5wLWhvdXJzIiB0eXBlPSJ0ZXh0IiB2YWx1ZT0iMC41IiBvbmlucHV0PSJ1cGRhdGVJbnBIb3Vyc1N0eWxlKHRoaXMpIiBvbmNoYW5nZT0idXBkT3YoJzJBJywnRU1DJywnYmFzZScsdGhpcy52YWx1ZSkiPjxpbnB1dCBjbGFzcz0iaW5wLW1hcmdlIiB2YWx1ZT0iMCIgb25jaGFuZ2U9InVwZE92KCcyQScsJ0VNQycsJ21hcmdlJyx0aGlzLnZhbHVlKSI+PC9kaXY+PC90ZD48dGQgc3R5bGU9Im9wYWNpdHk6MC42OyBwb2ludGVyLWV2ZW50czpub25lOyI+PGRpdiBjbGFzcz0idmVydGljYWwtc3RhY2siPjxpbnB1dCBjbGFzcz0iaW5wLWhvdXJzIiB0eXBlPSJ0ZXh0IiB2YWx1ZT0iMCIgb25pbnB1dD0idXBkYXRlSW5wSG91cnNTdHlsZSh0aGlzKSIgb25jaGFuZ2U9InVwZE92KCcyQScsJ0F1dG9ub21pZSBFUExFJywnYmFzZScsdGhpcy52YWx1ZSkiPjxpbnB1dCBjbGFzcz0iaW5wLW1hcmdlIiB2YWx1ZT0iMCIgb25jaGFuZ2U9InVwZE92KCcyQScsJ0F1dG9ub21pZSBFUExFJywnbWFyZ2UnLHRoaXMudmFsdWUpIj48L2Rpdj48L3RkPjx0ZCBzdHlsZT0ib3BhY2l0eTowLjY7IHBvaW50ZXItZXZlbnRzOm5vbmU7Ij48ZGl2IGNsYXNzPSJ2ZXJ0aWNhbC1zdGFjayI+PGlucHV0IGNsYXNzPSJpbnAtaG91cnMiIHR5cGU9InRleHQiIHZhbHVlPSIwIiBvbmlucHV0PSJ1cGRhdGVJbnBIb3Vyc1N0eWxlKHRoaXMpIiBvbmNoYW5nZT0idXBkT3YoJzJBJywnTUF0aHMnLCdiYXNlJyx0aGlzLnZhbHVlKSI+PGlucHV0IGNsYXNzPSJpbnAtbWFyZ2UiIHZhbHVlPSIwIiBvbmNoYW5nZT0idXBkT3YoJzJBJywnTUF0aHMnLCdtYXJnZScsdGhpcy52YWx1ZSkiPjwvZGl2PjwvdGQ+PHRkIHN0eWxlPSJmb250LXdlaWdodDpib2xkOyI+MjUuMDwvdGQ+PC90cj48dHIgc3R5bGU9ImJhY2tncm91bmQ6IzM0NDk1ZTsgY29sb3I6d2hpdGU7IGZvbnQtd2VpZ2h0OmJvbGQ7Ij4KICAgICAgICAgICAgPHRkIHN0eWxlPSJ0ZXh0LWFsaWduOnJpZ2h0OyBwYWRkaW5nLXJpZ2h0OjEwcHg7Ij5UT1RBTCBOSVYuPC90ZD48dGQ+NC4wPC90ZD48dGQ+My4wPC90ZD48dGQ+My4wPC90ZD48dGQ+Mi41PC90ZD48dGQ+MS41PC90ZD48dGQ+NC4wPC90ZD48dGQ+My4wPC90ZD48dGQ+MS41PC90ZD48dGQ+Mi4wPC90ZD48dGQ+MC4wPC90ZD48dGQ+MC41PC90ZD48dGQ+MC4wPC90ZD48dGQ+MC4wPC90ZD48dGQgaWQ9InRvdGFsLWZpbmFsLWdyaWxsZSIgc3R5bGU9ImZvbnQtc2l6ZToxLjFyZW07IGNvbG9yOiNmMWM0MGY7Ij4yNS4wPC90ZD48L3RyPjwvdGJvZHk+PC90YWJsZT48L2Rpdj48L2Rpdj4KICAgICAgICA8L2Rpdj4KICAgIDwvZGl2PgoKPGRpdiBpZD0iZXF1aXBlcyIgY2xhc3M9InNlY3Rpb24iPgogICAgICAgIDxkaXYgY2xhc3M9ImNhcmQiPgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJjYXJkLWhlYWRlciI+CiAgICAgICAgICAgICAgICA8aDM+UsOpcGFydGl0aW9uICZhbXA7IMOJcXVpcGVzIFDDqWRhZ29naXF1ZXM8L2gzPgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZXhwb3J0LWdyb3VwIj4KICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJidG4tZXhwIiBvbmNsaWNrPSJleHBvcnRDdXJyZW50UGFnZSgnZXhjZWwnKSI+8J+TiiBFeGNlbCAoR3JpbGxlKTwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImJ0bi1leHAiIG9uY2xpY2s9ImV4cG9ydEN1cnJlbnRQYWdlKCdwZGYnKSI+8J+ThCBQREYgKEdyaWxsZSk8L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJidG4tZXhwIiBzdHlsZT0iYmFja2dyb3VuZDojOGU0NGFkOyIgb25jbGljaz0iZXhwb3J0VGVhbXNMaXN0c1BERigpIj7wn5OEIFBERiAoTGlzdGVzL0NsYXNzZSk8L2J1dHRvbj4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iZm9udC1zaXplOjAuOHJlbTsgY29sb3I6IzY2NjsgZm9udC1zdHlsZTppdGFsaWM7IGRpc3BsYXk6ZmxleDsgYWxpZ24taXRlbXM6Y2VudGVyOyBnYXA6MTBweDsiPgogICAgICAgICAgICA8c3BhbiBzdHlsZT0iZGlzcGxheTpmbGV4OyBhbGlnbi1pdGVtczpjZW50ZXI7Ij48c3BhbiBzdHlsZT0id2lkdGg6MTJweDsgaGVpZ2h0OjEycHg7IGJhY2tncm91bmQ6IzI3YWU2MDsgbWFyZ2luLXJpZ2h0OjRweDsiPjwvc3Bhbj5DbGFzc2U8L3NwYW4+CiAgICAgICAgICAgIDxzcGFuIHN0eWxlPSJkaXNwbGF5OmZsZXg7IGFsaWduLWl0ZW1zOmNlbnRlcjsgbWFyZ2luLWxlZnQ6MTBweDsiPjxzcGFuIHN0eWxlPSJ3aWR0aDoxMnB4OyBoZWlnaHQ6MTJweDsgYmFja2dyb3VuZDojMzQ5OGRiOyBtYXJnaW4tcmlnaHQ6NHB4OyI+PC9zcGFuPlBhcnRhZ2UgZGUgY2xhc3NlPC9zcGFuPgogICAgICAgICAgICA8c3BhbiBzdHlsZT0ibWFyZ2luLWxlZnQ6MTBweDsiPvCfkZEgQ2xpYyBEcm9pdCA9IFByb2YgUHJpbmNpcGFsPC9zcGFuPgogICAgICAgICAgICA8c3BhbiBzdHlsZT0iY29sb3I6I2MwMzkyYjsgZm9udC13ZWlnaHQ6Ym9sZDsgbWFyZ2luLWxlZnQ6MTBweDsiPlJvdWdlID0gUHJvZiBtYW5xdWFudDwvc3Bhbj4KICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImdyaWQtd3JhcHBlciIgc3R5bGU9Im1heC1oZWlnaHQ6IDc1dmg7IG92ZXJmbG93OmF1dG87Ij4KICAgICAgICAgICAgICAgIDx0YWJsZSBjbGFzcz0idGVhbS10YWJsZSIgaWQ9InRlYW1zLXRhYmxlIj48dGhlYWQ+PHRyPjx0aCBzdHlsZT0ibWluLXdpZHRoOjIyMHB4OyB0ZXh0LWFsaWduOmxlZnQ7IHBhZGRpbmctbGVmdDoxMHB4OyI+TWF0acOocmUgLyBFbnNlaWduYW50PC90aD48dGggc3R5bGU9IndpZHRoOjQ1cHg7IGZvbnQtc2l6ZTowLjhyZW07Ij4yQTwvdGg+PHRoIHN0eWxlPSJ3aWR0aDo0NXB4OyBmb250LXNpemU6MC44cmVtOyI+MUE8L3RoPjwvdHI+PC90aGVhZD48dGJvZHk+PHRyIGNsYXNzPSJ0ZWFtLXN1YmplY3Qtcm93Ij48dGQgY29sc3Bhbj0iMTAwJSI+RU1DPC90ZD48L3RyPjx0cj48dGQgY2xhc3M9InRlYW0tdGVhY2hlci1sYWJlbCIgc3R5bGU9ImZvbnQtc3R5bGU6aXRhbGljOyBjb2xvcjojOTk5OyI+KEF1Y3VuIGVuc2VpZ25hbnQpPC90ZD48dGQ+PGRpdiBjbGFzcz0iY2VsbC1hc3NpZ24gbWlzc2luZy10ZWFjaGVyIj48L2Rpdj48L3RkPjx0ZD48ZGl2IGNsYXNzPSJjZWxsLWFzc2lnbiBtaXNzaW5nLXRlYWNoZXIiPjwvZGl2PjwvdGQ+PC90cj48dHIgY2xhc3M9InRlYW0tc3ViamVjdC1yb3ciPjx0ZCBjb2xzcGFuPSIxMDAlIj5FUFM8L3RkPjwvdHI+PHRyPjx0ZCBjbGFzcz0idGVhbS10ZWFjaGVyLWxhYmVsIiBzdHlsZT0iZm9udC1zdHlsZTppdGFsaWM7IGNvbG9yOiM5OTk7Ij4oQXVjdW4gZW5zZWlnbmFudCk8L3RkPjx0ZD48ZGl2IGNsYXNzPSJjZWxsLWFzc2lnbiBtaXNzaW5nLXRlYWNoZXIiPjwvZGl2PjwvdGQ+PHRkPjxkaXYgY2xhc3M9ImNlbGwtYXNzaWduIG1pc3NpbmctdGVhY2hlciI+PC9kaXY+PC90ZD48L3RyPjx0ciBjbGFzcz0idGVhbS1zdWJqZWN0LXJvdyI+PHRkIGNvbHNwYW49IjEwMCUiPkVucy4gU2NpZW50aWZpcXVlPC90ZD48L3RyPjx0cj48dGQgY2xhc3M9InRlYW0tdGVhY2hlci1sYWJlbCIgc3R5bGU9ImZvbnQtc3R5bGU6aXRhbGljOyBjb2xvcjojOTk5OyI+KEF1Y3VuIGVuc2VpZ25hbnQpPC90ZD48dGQ+PGRpdiBjbGFzcz0iY2VsbC1hc3NpZ24gY2VsbC1kaXNhYmxlZCI+PC9kaXY+PC90ZD48dGQ+PGRpdiBjbGFzcz0iY2VsbC1hc3NpZ24gbWlzc2luZy10ZWFjaGVyIj48L2Rpdj48L3RkPjwvdHI+PHRyIGNsYXNzPSJ0ZWFtLXN1YmplY3Qtcm93Ij48dGQgY29sc3Bhbj0iMTAwJSI+RnJhbsOnYWlzPC90ZD48L3RyPjx0cj48dGQgY2xhc3M9InRlYW0tdGVhY2hlci1sYWJlbCIgc3R5bGU9ImZvbnQtc3R5bGU6aXRhbGljOyBjb2xvcjojOTk5OyI+KEF1Y3VuIGVuc2VpZ25hbnQpPC90ZD48dGQ+PGRpdiBjbGFzcz0iY2VsbC1hc3NpZ24gbWlzc2luZy10ZWFjaGVyIj48L2Rpdj48L3RkPjx0ZD48ZGl2IGNsYXNzPSJjZWxsLWFzc2lnbiBtaXNzaW5nLXRlYWNoZXIiPjwvZGl2PjwvdGQ+PC90cj48dHIgY2xhc3M9InRlYW0tc3ViamVjdC1yb3ciPjx0ZCBjb2xzcGFuPSIxMDAlIj5IaXN0LUfDqW88L3RkPjwvdHI+PHRyPjx0ZCBjbGFzcz0idGVhbS10ZWFjaGVyLWxhYmVsIiBzdHlsZT0iZm9udC1zdHlsZTppdGFsaWM7IGNvbG9yOiM5OTk7Ij4oQXVjdW4gZW5zZWlnbmFudCk8L3RkPjx0ZD48ZGl2IGNsYXNzPSJjZWxsLWFzc2lnbiBtaXNzaW5nLXRlYWNoZXIiPjwvZGl2PjwvdGQ+PHRkPjxkaXYgY2xhc3M9ImNlbGwtYXNzaWduIG1pc3NpbmctdGVhY2hlciI+PC9kaXY+PC90ZD48L3RyPjx0ciBjbGFzcz0idGVhbS1zdWJqZWN0LXJvdyI+PHRkIGNvbHNwYW49IjEwMCUiPkxWQTwvdGQ+PC90cj48dHI+PHRkIGNsYXNzPSJ0ZWFtLXRlYWNoZXItbGFiZWwiIHN0eWxlPSJmb250LXN0eWxlOml0YWxpYzsgY29sb3I6Izk5OTsiPihBdWN1biBlbnNlaWduYW50KTwvdGQ+PHRkPjxkaXYgY2xhc3M9ImNlbGwtYXNzaWduIG1pc3NpbmctdGVhY2hlciI+PC9kaXY+PC90ZD48dGQ+PGRpdiBjbGFzcz0iY2VsbC1hc3NpZ24gbWlzc2luZy10ZWFjaGVyIj48L2Rpdj48L3RkPjwvdHI+PHRyIGNsYXNzPSJ0ZWFtLXN1YmplY3Qtcm93Ij48dGQgY29sc3Bhbj0iMTAwJSI+TFZCPC90ZD48L3RyPjx0cj48dGQgY2xhc3M9InRlYW0tdGVhY2hlci1sYWJlbCIgc3R5bGU9ImZvbnQtc3R5bGU6aXRhbGljOyBjb2xvcjojOTk5OyI+KEF1Y3VuIGVuc2VpZ25hbnQpPC90ZD48dGQ+PGRpdiBjbGFzcz0iY2VsbC1hc3NpZ24gbWlzc2luZy10ZWFjaGVyIj48L2Rpdj48L3RkPjx0ZD48ZGl2IGNsYXNzPSJjZWxsLWFzc2lnbiBtaXNzaW5nLXRlYWNoZXIiPjwvZGl2PjwvdGQ+PC90cj48dHIgY2xhc3M9InRlYW0tc3ViamVjdC1yb3ciPjx0ZCBjb2xzcGFuPSIxMDAlIj5NYXRocyAoVEMpPC90ZD48L3RyPjx0cj48dGQgY2xhc3M9InRlYW0tdGVhY2hlci1sYWJlbCIgdGl0bGU9Ik5vdXZlYXUiPk5vdXZlYXU8L3RkPjx0ZD48ZGl2IGNsYXNzPSJjZWxsLWFzc2lnbiBtaXNzaW5nLXRlYWNoZXIiIG9uY2xpY2s9InRvZ2dsZVRlYW1Bc3NpZ24oJzJBJywgMSkiIG9uY29udGV4dG1lbnU9InRvZ2dsZVRlYW1QUChldmVudCwgJzJBJywgMSkiPjwvZGl2PjwvdGQ+PHRkPjxkaXYgY2xhc3M9ImNlbGwtYXNzaWduIGNlbGwtZGlzYWJsZWQiPjwvZGl2PjwvdGQ+PC90cj48dHI+PHRkIGNsYXNzPSJ0ZWFtLXRlYWNoZXItbGFiZWwiIHRpdGxlPSJOb3V2ZWF1Ij5Ob3V2ZWF1PC90ZD48dGQ+PGRpdiBjbGFzcz0iY2VsbC1hc3NpZ24gbWlzc2luZy10ZWFjaGVyIiBvbmNsaWNrPSJ0b2dnbGVUZWFtQXNzaWduKCcyQScsIDIpIiBvbmNvbnRleHRtZW51PSJ0b2dnbGVUZWFtUFAoZXZlbnQsICcyQScsIDIpIj48L2Rpdj48L3RkPjx0ZD48ZGl2IGNsYXNzPSJjZWxsLWFzc2lnbiBjZWxsLWRpc2FibGVkIj48L2Rpdj48L3RkPjwvdHI+PHRyPjx0ZCBjbGFzcz0idGVhbS10ZWFjaGVyLWxhYmVsIiB0aXRsZT0iU0FVVE9OIj5TQVVUT048L3RkPjx0ZD48ZGl2IGNsYXNzPSJjZWxsLWFzc2lnbiBtb2RlLWNsYXNzIGlzLXBwIiBvbmNsaWNrPSJ0b2dnbGVUZWFtQXNzaWduKCcyQScsIDApIiBvbmNvbnRleHRtZW51PSJ0b2dnbGVUZWFtUFAoZXZlbnQsICcyQScsIDApIj7inIU8L2Rpdj48L3RkPjx0ZD48ZGl2IGNsYXNzPSJjZWxsLWFzc2lnbiBjZWxsLWRpc2FibGVkIj48L2Rpdj48L3RkPjwvdHI+PHRyIGNsYXNzPSJ0ZWFtLXN1YmplY3Qtcm93Ij48dGQgY29sc3Bhbj0iMTAwJSI+UGh5cy1DaGkgKFRDKTwvdGQ+PC90cj48dHI+PHRkIGNsYXNzPSJ0ZWFtLXRlYWNoZXItbGFiZWwiIHN0eWxlPSJmb250LXN0eWxlOml0YWxpYzsgY29sb3I6Izk5OTsiPihBdWN1biBlbnNlaWduYW50KTwvdGQ+PHRkPjxkaXYgY2xhc3M9ImNlbGwtYXNzaWduIG1pc3NpbmctdGVhY2hlciI+PC9kaXY+PC90ZD48dGQ+PGRpdiBjbGFzcz0iY2VsbC1hc3NpZ24gY2VsbC1kaXNhYmxlZCI+PC9kaXY+PC90ZD48L3RyPjx0ciBjbGFzcz0idGVhbS1zdWJqZWN0LXJvdyI+PHRkIGNvbHNwYW49IjEwMCUiPlNFUzwvdGQ+PC90cj48dHI+PHRkIGNsYXNzPSJ0ZWFtLXRlYWNoZXItbGFiZWwiIHN0eWxlPSJmb250LXN0eWxlOml0YWxpYzsgY29sb3I6Izk5OTsiPihBdWN1biBlbnNlaWduYW50KTwvdGQ+PHRkPjxkaXYgY2xhc3M9ImNlbGwtYXNzaWduIG1pc3NpbmctdGVhY2hlciI+PC9kaXY+PC90ZD48dGQ+PGRpdiBjbGFzcz0iY2VsbC1hc3NpZ24gY2VsbC1kaXNhYmxlZCI+PC9kaXY+PC90ZD48L3RyPjx0ciBjbGFzcz0idGVhbS1zdWJqZWN0LXJvdyI+PHRkIGNvbHNwYW49IjEwMCUiPlNWVCAoVEMpPC90ZD48L3RyPjx0cj48dGQgY2xhc3M9InRlYW0tdGVhY2hlci1sYWJlbCIgc3R5bGU9ImZvbnQtc3R5bGU6aXRhbGljOyBjb2xvcjojOTk5OyI+KEF1Y3VuIGVuc2VpZ25hbnQpPC90ZD48dGQ+PGRpdiBjbGFzcz0iY2VsbC1hc3NpZ24gbWlzc2luZy10ZWFjaGVyIj48L2Rpdj48L3RkPjx0ZD48ZGl2IGNsYXNzPSJjZWxsLWFzc2lnbiBjZWxsLWRpc2FibGVkIj48L2Rpdj48L3RkPjwvdHI+PC90Ym9keT48L3RhYmxlPgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICA8L2Rpdj4KICAgIDwvZGl2PgoKPGRpdiBpZD0icmVwYXJ0aXRpb24iIGNsYXNzPSJzZWN0aW9uIGFjdGl2ZSI+CiAgICA8ZGl2IGNsYXNzPSJjYXJkIj4KICAgICAgICA8ZGl2IGNsYXNzPSJjYXJkLWhlYWRlciI+CiAgICAgICAgICAgIDxoMz5Sw6lwYXJ0aXRpb24gJmFtcDsgVmVudGlsYXRpb24gZGVzIFNlcnZpY2VzPC9oMz4KICAgICAgICAgICAgPGRpdiBjbGFzcz0idG9nZ2xlLWNvbnRhaW5lciI+CiAgICA8YnV0dG9uIGNsYXNzPSJ0b2dnbGUtYnRuIiBpZD0iYnRuLXZpZXctcmVwYXJ0LXByb2YiIG9uY2xpY2s9InN3aXRjaFJlcGFydGl0aW9uVmlldygncHJvZnMnKSI+8J+RpCBQYXIgRW5zZWlnbmFudDwvYnV0dG9uPgogICAgPGJ1dHRvbiBjbGFzcz0idG9nZ2xlLWJ0biBhY3RpdmUiIGlkPSJidG4tdmlldy1yZXBhcnQtbWF0IiBvbmNsaWNrPSJzd2l0Y2hSZXBhcnRpdGlvblZpZXcoJ21hdGllcmVzJykiPvCfk5ogUGFyIE1hdGnDqHJlPC9idXR0b24+CjwvZGl2PgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJleHBvcnQtZ3JvdXAiPgogICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYnRuLWV4cCIgb25jbGljaz0iZXhwb3J0Q3VycmVudFBhZ2UoJ2V4Y2VsJykiPvCfk4ogRXhjZWw8L2J1dHRvbj4KICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImJ0bi1leHAiIG9uY2xpY2s9ImV4cG9ydEN1cnJlbnRQYWdlKCdwZGYnKSI+8J+ThCBQREY8L2J1dHRvbj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgPC9kaXY+CiAgICAgICAgPGRpdiBpZD0icmVwYXJ0aXRpb24tY29udGVudCI+PGRpdiBjbGFzcz0iY2FyZCIgc3R5bGU9Im92ZXJmbG93LXg6YXV0bzsgbWFyZ2luLWJvdHRvbTozMHB4OyBib3JkZXItdG9wOiA0cHggc29saWQgIzQ1NWE2NDsiPgogICAgICAgICAgICAgICAgICAgICAgICA8aDMgc3R5bGU9ImNvbG9yOiM0NTVhNjQ7IG1hcmdpbi1ib3R0b206MjBweDsiPvCfk6YgUMO0bGUgQVVUT05PTUlFIEVQTEU8L2gzPjxoNCBzdHlsZT0iY29sb3I6dmFyKC0tc2Vjb25kYXJ5KTsgbWFyZ2luLWJvdHRvbToxMHB4OyBwYWRkaW5nLWxlZnQ6NXB4OyI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXV0b25vbWllIEVQTEUgPHNtYWxsIHN0eWxlPSJjb2xvcjojOTk5OyBmb250LXdlaWdodDpub3JtYWw7IGZvbnQtc2l6ZTowLjdyZW07Ij4oUGFyIENsYXNzZSk8L3NtYWxsPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvaDQ+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRhYmxlIHN0eWxlPSJ3aWR0aDoxMDAlOyBmb250LXNpemU6MC44cmVtOyBib3JkZXItY29sbGFwc2U6Y29sbGFwc2U7IG1hcmdpbi1ib3R0b206MjVweDsiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aGVhZD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dHIgc3R5bGU9ImJhY2tncm91bmQ6IzQ1NWE2NDsgY29sb3I6d2hpdGU7Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRoIHN0eWxlPSJ0ZXh0LWFsaWduOmxlZnQ7IGJvcmRlcjoxcHggc29saWQgI2RkZDsgcGFkZGluZzo4cHg7IHdpZHRoOjE4MHB4OyI+RW5zZWlnbmFudDwvdGg+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aCBzdHlsZT0iYm9yZGVyOjFweCBzb2xpZCAjZGRkOyBwYWRkaW5nOjhweDsiPjJBPC90aD48dGggc3R5bGU9ImJvcmRlcjoxcHggc29saWQgI2RkZDsgcGFkZGluZzo4cHg7Ij4xQTwvdGg+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aCBzdHlsZT0iYm9yZGVyOjFweCBzb2xpZCAjYmRjM2M3OyBwYWRkaW5nOjhweDsgd2lkdGg6NjVweDsgYmFja2dyb3VuZDojZDZlYWY4OyBjb2xvcjojMjk4MGI5OyBmb250LXdlaWdodDpib2xkOyI+VG90LiBNYXQuPC90aD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RyPjx0ciBzdHlsZT0iYmFja2dyb3VuZDojZmZmYmU2OyBmb250LXNpemU6MC43NXJlbTsiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQgc3R5bGU9InRleHQtYWxpZ246cmlnaHQ7IGZvbnQtd2VpZ2h0OmJvbGQ7IGJvcmRlcjoxcHggc29saWQgI2RkZDsgcGFkZGluZzo2cHg7Ij5CZXNvaW4gKGgpPC90ZD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIHN0eWxlPSJib3JkZXI6MXB4IHNvbGlkICNkZGQ7IHBhZGRpbmc6NnB4OyBmb250LXdlaWdodDpib2xkOyI+MC4wPC90ZD48dGQgc3R5bGU9ImJvcmRlcjoxcHggc29saWQgI2RkZDsgcGFkZGluZzo2cHg7IGZvbnQtd2VpZ2h0OmJvbGQ7Ij4wLjA8L3RkPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQgY29sc3Bhbj0iMSIgc3R5bGU9ImJvcmRlcjoxcHggc29saWQgI2RkZDsgYmFja2dyb3VuZDojZmZmOWM0OyI+PC90ZD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RyPjwvdGhlYWQ+PHRib2R5Pjx0ciBzdHlsZT0iYmFja2dyb3VuZDojZmRlZGVjOyI+CiAgICAgICAgICAgICAgICAgICAgPHRkIHN0eWxlPSJ0ZXh0LWFsaWduOnJpZ2h0OyBmb250LXN0eWxlOml0YWxpYzsgYm9yZGVyOjFweCBzb2xpZCAjZGRkOyBwYWRkaW5nOjhweDsgY29sb3I6I2MwMzkyYjsgZm9udC13ZWlnaHQ6Ym9sZDsiPlJlbGlxdWF0PC90ZD4KICAgICAgICAgICAgICAgICAgICA8dGQgc3R5bGU9ImJvcmRlcjoxcHggc29saWQgI2RkZDsgcGFkZGluZzo0cHg7IGZvbnQtd2VpZ2h0OmJvbGQ7IGNvbG9yOiMyN2FlNjA7IHRleHQtYWxpZ246Y2VudGVyOyI+T0s8L3RkPjx0ZCBzdHlsZT0iYm9yZGVyOjFweCBzb2xpZCAjZGRkOyBwYWRkaW5nOjRweDsgZm9udC13ZWlnaHQ6Ym9sZDsgY29sb3I6IzI3YWU2MDsgdGV4dC1hbGlnbjpjZW50ZXI7Ij5PSzwvdGQ+CiAgICAgICAgICAgICAgICAgICAgPHRkIGNvbHNwYW49IjEiIHN0eWxlPSJib3JkZXI6MXB4IHNvbGlkICNkZGQ7IGJhY2tncm91bmQ6I2ZkZWRlYzsiPjwvdGQ+CiAgICAgICAgICAgICAgICA8L3RyPjwvdGJvZHk+PC90YWJsZT48L2Rpdj48ZGl2IGNsYXNzPSJjYXJkIiBzdHlsZT0ib3ZlcmZsb3cteDphdXRvOyBtYXJnaW4tYm90dG9tOjMwcHg7IGJvcmRlci10b3A6IDRweCBzb2xpZCAjNDU1YTY0OyI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxoMyBzdHlsZT0iY29sb3I6IzQ1NWE2NDsgbWFyZ2luLWJvdHRvbToyMHB4OyI+8J+TpiBQw7RsZSBFTUM8L2gzPjxoNCBzdHlsZT0iY29sb3I6dmFyKC0tc2Vjb25kYXJ5KTsgbWFyZ2luLWJvdHRvbToxMHB4OyBwYWRkaW5nLWxlZnQ6NXB4OyI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRU1DIDxzbWFsbCBzdHlsZT0iY29sb3I6Izk5OTsgZm9udC13ZWlnaHQ6bm9ybWFsOyBmb250LXNpemU6MC43cmVtOyI+KFBhciBDbGFzc2UpPC9zbWFsbD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2g0PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0YWJsZSBzdHlsZT0id2lkdGg6MTAwJTsgZm9udC1zaXplOjAuOHJlbTsgYm9yZGVyLWNvbGxhcHNlOmNvbGxhcHNlOyBtYXJnaW4tYm90dG9tOjI1cHg7Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGhlYWQ+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRyIHN0eWxlPSJiYWNrZ3JvdW5kOiM0NTVhNjQ7IGNvbG9yOndoaXRlOyI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aCBzdHlsZT0idGV4dC1hbGlnbjpsZWZ0OyBib3JkZXI6MXB4IHNvbGlkICNkZGQ7IHBhZGRpbmc6OHB4OyB3aWR0aDoxODBweDsiPkVuc2VpZ25hbnQ8L3RoPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGggc3R5bGU9ImJvcmRlcjoxcHggc29saWQgI2RkZDsgcGFkZGluZzo4cHg7Ij4yQTwvdGg+PHRoIHN0eWxlPSJib3JkZXI6MXB4IHNvbGlkICNkZGQ7IHBhZGRpbmc6OHB4OyI+MUE8L3RoPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGggc3R5bGU9ImJvcmRlcjoxcHggc29saWQgI2JkYzNjNzsgcGFkZGluZzo4cHg7IHdpZHRoOjY1cHg7IGJhY2tncm91bmQ6I2Q2ZWFmODsgY29sb3I6IzI5ODBiOTsgZm9udC13ZWlnaHQ6Ym9sZDsiPlRvdC4gTWF0LjwvdGg+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90cj48dHIgc3R5bGU9ImJhY2tncm91bmQ6I2ZmZmJlNjsgZm9udC1zaXplOjAuNzVyZW07Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIHN0eWxlPSJ0ZXh0LWFsaWduOnJpZ2h0OyBmb250LXdlaWdodDpib2xkOyBib3JkZXI6MXB4IHNvbGlkICNkZGQ7IHBhZGRpbmc6NnB4OyI+QmVzb2luIChoKTwvdGQ+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT0iYm9yZGVyOjFweCBzb2xpZCAjZGRkOyBwYWRkaW5nOjZweDsgZm9udC13ZWlnaHQ6Ym9sZDsiPjAuNTwvdGQ+PHRkIHN0eWxlPSJib3JkZXI6MXB4IHNvbGlkICNkZGQ7IHBhZGRpbmc6NnB4OyBmb250LXdlaWdodDpib2xkOyI+MC41PC90ZD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIGNvbHNwYW49IjEiIHN0eWxlPSJib3JkZXI6MXB4IHNvbGlkICNkZGQ7IGJhY2tncm91bmQ6I2ZmZjljNDsiPjwvdGQ+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90cj48L3RoZWFkPjx0Ym9keT48dHIgc3R5bGU9ImJhY2tncm91bmQ6I2ZkZWRlYzsiPgogICAgICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT0idGV4dC1hbGlnbjpyaWdodDsgZm9udC1zdHlsZTppdGFsaWM7IGJvcmRlcjoxcHggc29saWQgI2RkZDsgcGFkZGluZzo4cHg7IGNvbG9yOiNjMDM5MmI7IGZvbnQtd2VpZ2h0OmJvbGQ7Ij5SZWxpcXVhdDwvdGQ+CiAgICAgICAgICAgICAgICAgICAgPHRkIHN0eWxlPSJib3JkZXI6MXB4IHNvbGlkICNkZGQ7IHBhZGRpbmc6NHB4OyBmb250LXdlaWdodDpib2xkOyBjb2xvcjojYzAzOTJiOyB0ZXh0LWFsaWduOmNlbnRlcjsiPjAuNTwvdGQ+PHRkIHN0eWxlPSJib3JkZXI6MXB4IHNvbGlkICNkZGQ7IHBhZGRpbmc6NHB4OyBmb250LXdlaWdodDpib2xkOyBjb2xvcjojYzAzOTJiOyB0ZXh0LWFsaWduOmNlbnRlcjsiPjAuNTwvdGQ+CiAgICAgICAgICAgICAgICAgICAgPHRkIGNvbHNwYW49IjEiIHN0eWxlPSJib3JkZXI6MXB4IHNvbGlkICNkZGQ7IGJhY2tncm91bmQ6I2ZkZWRlYzsiPjwvdGQ+CiAgICAgICAgICAgICAgICA8L3RyPjwvdGJvZHk+PC90YWJsZT48L2Rpdj48ZGl2IGNsYXNzPSJjYXJkIiBzdHlsZT0ib3ZlcmZsb3cteDphdXRvOyBtYXJnaW4tYm90dG9tOjMwcHg7IGJvcmRlci10b3A6IDRweCBzb2xpZCAjNDU1YTY0OyI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxoMyBzdHlsZT0iY29sb3I6IzQ1NWE2NDsgbWFyZ2luLWJvdHRvbToyMHB4OyI+8J+TpiBQw7RsZSBFUFM8L2gzPjxoNCBzdHlsZT0iY29sb3I6dmFyKC0tc2Vjb25kYXJ5KTsgbWFyZ2luLWJvdHRvbToxMHB4OyBwYWRkaW5nLWxlZnQ6NXB4OyI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRVBTIDxzbWFsbCBzdHlsZT0iY29sb3I6Izk5OTsgZm9udC13ZWlnaHQ6bm9ybWFsOyBmb250LXNpemU6MC43cmVtOyI+KFBhciBDbGFzc2UpPC9zbWFsbD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2g0PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0YWJsZSBzdHlsZT0id2lkdGg6MTAwJTsgZm9udC1zaXplOjAuOHJlbTsgYm9yZGVyLWNvbGxhcHNlOmNvbGxhcHNlOyBtYXJnaW4tYm90dG9tOjI1cHg7Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGhlYWQ+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRyIHN0eWxlPSJiYWNrZ3JvdW5kOiM0NTVhNjQ7IGNvbG9yOndoaXRlOyI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aCBzdHlsZT0idGV4dC1hbGlnbjpsZWZ0OyBib3JkZXI6MXB4IHNvbGlkICNkZGQ7IHBhZGRpbmc6OHB4OyB3aWR0aDoxODBweDsiPkVuc2VpZ25hbnQ8L3RoPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGggc3R5bGU9ImJvcmRlcjoxcHggc29saWQgI2RkZDsgcGFkZGluZzo4cHg7Ij4yQTwvdGg+PHRoIHN0eWxlPSJib3JkZXI6MXB4IHNvbGlkICNkZGQ7IHBhZGRpbmc6OHB4OyI+MUE8L3RoPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGggc3R5bGU9ImJvcmRlcjoxcHggc29saWQgI2JkYzNjNzsgcGFkZGluZzo4cHg7IHdpZHRoOjY1cHg7IGJhY2tncm91bmQ6I2Q2ZWFmODsgY29sb3I6IzI5ODBiOTsgZm9udC13ZWlnaHQ6Ym9sZDsiPlRvdC4gTWF0LjwvdGg+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90cj48dHIgc3R5bGU9ImJhY2tncm91bmQ6I2ZmZmJlNjsgZm9udC1zaXplOjAuNzVyZW07Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIHN0eWxlPSJ0ZXh0LWFsaWduOnJpZ2h0OyBmb250LXdlaWdodDpib2xkOyBib3JkZXI6MXB4IHNvbGlkICNkZGQ7IHBhZGRpbmc6NnB4OyI+QmVzb2luIChoKTwvdGQ+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT0iYm9yZGVyOjFweCBzb2xpZCAjZGRkOyBwYWRkaW5nOjZweDsgZm9udC13ZWlnaHQ6Ym9sZDsiPjIuMDwvdGQ+PHRkIHN0eWxlPSJib3JkZXI6MXB4IHNvbGlkICNkZGQ7IHBhZGRpbmc6NnB4OyBmb250LXdlaWdodDpib2xkOyI+Mi4wPC90ZD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIGNvbHNwYW49IjEiIHN0eWxlPSJib3JkZXI6MXB4IHNvbGlkICNkZGQ7IGJhY2tncm91bmQ6I2ZmZjljNDsiPjwvdGQ+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90cj48L3RoZWFkPjx0Ym9keT48dHIgc3R5bGU9ImJhY2tncm91bmQ6I2ZkZWRlYzsiPgogICAgICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT0idGV4dC1hbGlnbjpyaWdodDsgZm9udC1zdHlsZTppdGFsaWM7IGJvcmRlcjoxcHggc29saWQgI2RkZDsgcGFkZGluZzo4cHg7IGNvbG9yOiNjMDM5MmI7IGZvbnQtd2VpZ2h0OmJvbGQ7Ij5SZWxpcXVhdDwvdGQ+CiAgICAgICAgICAgICAgICAgICAgPHRkIHN0eWxlPSJib3JkZXI6MXB4IHNvbGlkICNkZGQ7IHBhZGRpbmc6NHB4OyBmb250LXdlaWdodDpib2xkOyBjb2xvcjojYzAzOTJiOyB0ZXh0LWFsaWduOmNlbnRlcjsiPjIuMDwvdGQ+PHRkIHN0eWxlPSJib3JkZXI6MXB4IHNvbGlkICNkZGQ7IHBhZGRpbmc6NHB4OyBmb250LXdlaWdodDpib2xkOyBjb2xvcjojYzAzOTJiOyB0ZXh0LWFsaWduOmNlbnRlcjsiPjIuMDwvdGQ+CiAgICAgICAgICAgICAgICAgICAgPHRkIGNvbHNwYW49IjEiIHN0eWxlPSJib3JkZXI6MXB4IHNvbGlkICNkZGQ7IGJhY2tncm91bmQ6I2ZkZWRlYzsiPjwvdGQ+CiAgICAgICAgICAgICAgICA8L3RyPjwvdGJvZHk+PC90YWJsZT48aDQgc3R5bGU9ImNvbG9yOnZhcigtLXNlY29uZGFyeSk7IG1hcmdpbi1ib3R0b206MTBweDsgcGFkZGluZy1sZWZ0OjVweDsiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFVOU1MgPHNtYWxsIHN0eWxlPSJjb2xvcjojOTk5OyBmb250LXdlaWdodDpub3JtYWw7IGZvbnQtc2l6ZTowLjdyZW07Ij4oRm9yZmFpdCk8L3NtYWxsPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvaDQ+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRhYmxlIHN0eWxlPSJ3aWR0aDoxMDAlOyBmb250LXNpemU6MC44cmVtOyBib3JkZXItY29sbGFwc2U6Y29sbGFwc2U7IG1hcmdpbi1ib3R0b206MjVweDsiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aGVhZD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dHIgc3R5bGU9ImJhY2tncm91bmQ6IzQ1NWE2NDsgY29sb3I6d2hpdGU7Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRoIHN0eWxlPSJ0ZXh0LWFsaWduOmxlZnQ7IGJvcmRlcjoxcHggc29saWQgI2RkZDsgcGFkZGluZzo4cHg7IHdpZHRoOjE4MHB4OyI+RW5zZWlnbmFudDwvdGg+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aCBzdHlsZT0iYm9yZGVyOjFweCBzb2xpZCAjZGRkOyBwYWRkaW5nOjhweDsiPkZvcmZhaXQgR2xvYmFsPC90aD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRoIHN0eWxlPSJib3JkZXI6MXB4IHNvbGlkICNiZGMzYzc7IHBhZGRpbmc6OHB4OyB3aWR0aDo2NXB4OyBiYWNrZ3JvdW5kOiNkNmVhZjg7IGNvbG9yOiMyOTgwYjk7IGZvbnQtd2VpZ2h0OmJvbGQ7Ij5Ub3QuIE1hdC48L3RoPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdHI+PHRyIHN0eWxlPSJiYWNrZ3JvdW5kOiNmZmZiZTY7IGZvbnQtc2l6ZTowLjc1cmVtOyI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT0idGV4dC1hbGlnbjpyaWdodDsgZm9udC13ZWlnaHQ6Ym9sZDsgYm9yZGVyOjFweCBzb2xpZCAjZGRkOyBwYWRkaW5nOjZweDsiPkJlc29pbiAoaCk8L3RkPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQgc3R5bGU9ImJvcmRlcjoxcHggc29saWQgI2RkZDsgcGFkZGluZzo2cHg7IGZvbnQtd2VpZ2h0OmJvbGQ7Ij4zLjA8L3RkPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQgY29sc3Bhbj0iMSIgc3R5bGU9ImJvcmRlcjoxcHggc29saWQgI2RkZDsgYmFja2dyb3VuZDojZmZmOWM0OyI+PC90ZD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RyPjwvdGhlYWQ+PHRib2R5Pjx0ciBzdHlsZT0iYmFja2dyb3VuZDojZmRlZGVjOyI+CiAgICAgICAgICAgICAgICAgICAgPHRkIHN0eWxlPSJ0ZXh0LWFsaWduOnJpZ2h0OyBmb250LXN0eWxlOml0YWxpYzsgYm9yZGVyOjFweCBzb2xpZCAjZGRkOyBwYWRkaW5nOjhweDsgY29sb3I6I2MwMzkyYjsgZm9udC13ZWlnaHQ6Ym9sZDsiPlJlbGlxdWF0PC90ZD4KICAgICAgICAgICAgICAgICAgICA8dGQgc3R5bGU9ImJvcmRlcjoxcHggc29saWQgI2RkZDsgcGFkZGluZzo0cHg7IGZvbnQtd2VpZ2h0OmJvbGQ7IGNvbG9yOiNjMDM5MmI7IHRleHQtYWxpZ246Y2VudGVyOyI+My4wPC90ZD4KICAgICAgICAgICAgICAgICAgICA8dGQgY29sc3Bhbj0iMSIgc3R5bGU9ImJvcmRlcjoxcHggc29saWQgI2RkZDsgYmFja2dyb3VuZDojZmRlZGVjOyI+PC90ZD4KICAgICAgICAgICAgICAgIDwvdHI+PC90Ym9keT48L3RhYmxlPjwvZGl2PjxkaXYgY2xhc3M9ImNhcmQiIHN0eWxlPSJvdmVyZmxvdy14OmF1dG87IG1hcmdpbi1ib3R0b206MzBweDsgYm9yZGVyLXRvcDogNHB4IHNvbGlkICM0NTVhNjQ7Ij4KICAgICAgICAgICAgICAgICAgICAgICAgPGgzIHN0eWxlPSJjb2xvcjojNDU1YTY0OyBtYXJnaW4tYm90dG9tOjIwcHg7Ij7wn5OmIFDDtGxlIEVOUy4gU0NJRU5USUZJUVVFPC9oMz48aDQgc3R5bGU9ImNvbG9yOnZhcigtLXNlY29uZGFyeSk7IG1hcmdpbi1ib3R0b206MTBweDsgcGFkZGluZy1sZWZ0OjVweDsiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVucy4gU2NpZW50aWZpcXVlIDxzbWFsbCBzdHlsZT0iY29sb3I6Izk5OTsgZm9udC13ZWlnaHQ6bm9ybWFsOyBmb250LXNpemU6MC43cmVtOyI+KFBhciBDbGFzc2UpPC9zbWFsbD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2g0PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0YWJsZSBzdHlsZT0id2lkdGg6MTAwJTsgZm9udC1zaXplOjAuOHJlbTsgYm9yZGVyLWNvbGxhcHNlOmNvbGxhcHNlOyBtYXJnaW4tYm90dG9tOjI1cHg7Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGhlYWQ+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRyIHN0eWxlPSJiYWNrZ3JvdW5kOiM0NTVhNjQ7IGNvbG9yOndoaXRlOyI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aCBzdHlsZT0idGV4dC1hbGlnbjpsZWZ0OyBib3JkZXI6MXB4IHNvbGlkICNkZGQ7IHBhZGRpbmc6OHB4OyB3aWR0aDoxODBweDsiPkVuc2VpZ25hbnQ8L3RoPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGggc3R5bGU9ImJvcmRlcjoxcHggc29saWQgI2RkZDsgcGFkZGluZzo4cHg7Ij4yQTwvdGg+PHRoIHN0eWxlPSJib3JkZXI6MXB4IHNvbGlkICNkZGQ7IHBhZGRpbmc6OHB4OyI+MUE8L3RoPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGggc3R5bGU9ImJvcmRlcjoxcHggc29saWQgI2JkYzNjNzsgcGFkZGluZzo4cHg7IHdpZHRoOjY1cHg7IGJhY2tncm91bmQ6I2Q2ZWFmODsgY29sb3I6IzI5ODBiOTsgZm9udC13ZWlnaHQ6Ym9sZDsiPlRvdC4gTWF0LjwvdGg+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90cj48dHIgc3R5bGU9ImJhY2tncm91bmQ6I2ZmZmJlNjsgZm9udC1zaXplOjAuNzVyZW07Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIHN0eWxlPSJ0ZXh0LWFsaWduOnJpZ2h0OyBmb250LXdlaWdodDpib2xkOyBib3JkZXI6MXB4IHNvbGlkICNkZGQ7IHBhZGRpbmc6NnB4OyI+QmVzb2luIChoKTwvdGQ+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT0iYm9yZGVyOjFweCBzb2xpZCAjZGRkOyBwYWRkaW5nOjZweDsgZm9udC13ZWlnaHQ6Ym9sZDsiPjAuMDwvdGQ+PHRkIHN0eWxlPSJib3JkZXI6MXB4IHNvbGlkICNkZGQ7IHBhZGRpbmc6NnB4OyBmb250LXdlaWdodDpib2xkOyI+Mi4wPC90ZD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIGNvbHNwYW49IjEiIHN0eWxlPSJib3JkZXI6MXB4IHNvbGlkICNkZGQ7IGJhY2tncm91bmQ6I2ZmZjljNDsiPjwvdGQ+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90cj48L3RoZWFkPjx0Ym9keT48dHIgc3R5bGU9ImJhY2tncm91bmQ6I2ZkZWRlYzsiPgogICAgICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT0idGV4dC1hbGlnbjpyaWdodDsgZm9udC1zdHlsZTppdGFsaWM7IGJvcmRlcjoxcHggc29saWQgI2RkZDsgcGFkZGluZzo4cHg7IGNvbG9yOiNjMDM5MmI7IGZvbnQtd2VpZ2h0OmJvbGQ7Ij5SZWxpcXVhdDwvdGQ+CiAgICAgICAgICAgICAgICAgICAgPHRkIHN0eWxlPSJib3JkZXI6MXB4IHNvbGlkICNkZGQ7IHBhZGRpbmc6NHB4OyBmb250LXdlaWdodDpib2xkOyBjb2xvcjojMjdhZTYwOyB0ZXh0LWFsaWduOmNlbnRlcjsiPk9LPC90ZD48dGQgc3R5bGU9ImJvcmRlcjoxcHggc29saWQgI2RkZDsgcGFkZGluZzo0cHg7IGZvbnQtd2VpZ2h0OmJvbGQ7IGNvbG9yOiNjMDM5MmI7IHRleHQtYWxpZ246Y2VudGVyOyI+Mi4wPC90ZD4KICAgICAgICAgICAgICAgICAgICA8dGQgY29sc3Bhbj0iMSIgc3R5bGU9ImJvcmRlcjoxcHggc29saWQgI2RkZDsgYmFja2dyb3VuZDojZmRlZGVjOyI+PC90ZD4KICAgICAgICAgICAgICAgIDwvdHI+PC90Ym9keT48L3RhYmxlPjwvZGl2PjxkaXYgY2xhc3M9ImNhcmQiIHN0eWxlPSJvdmVyZmxvdy14OmF1dG87IG1hcmdpbi1ib3R0b206MzBweDsgYm9yZGVyLXRvcDogNHB4IHNvbGlkICM0NTVhNjQ7Ij4KICAgICAgICAgICAgICAgICAgICAgICAgPGgzIHN0eWxlPSJjb2xvcjojNDU1YTY0OyBtYXJnaW4tYm90dG9tOjIwcHg7Ij7wn5OmIFDDtGxlIEZSQU7Dh0FJUzwvaDM+PGg0IHN0eWxlPSJjb2xvcjp2YXIoLS1zZWNvbmRhcnkpOyBtYXJnaW4tYm90dG9tOjEwcHg7IHBhZGRpbmctbGVmdDo1cHg7Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBGcmFuw6dhaXMgPHNtYWxsIHN0eWxlPSJjb2xvcjojOTk5OyBmb250LXdlaWdodDpub3JtYWw7IGZvbnQtc2l6ZTowLjdyZW07Ij4oUGFyIENsYXNzZSk8L3NtYWxsPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvaDQ+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRhYmxlIHN0eWxlPSJ3aWR0aDoxMDAlOyBmb250LXNpemU6MC44cmVtOyBib3JkZXItY29sbGFwc2U6Y29sbGFwc2U7IG1hcmdpbi1ib3R0b206MjVweDsiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aGVhZD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dHIgc3R5bGU9ImJhY2tncm91bmQ6IzQ1NWE2NDsgY29sb3I6d2hpdGU7Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRoIHN0eWxlPSJ0ZXh0LWFsaWduOmxlZnQ7IGJvcmRlcjoxcHggc29saWQgI2RkZDsgcGFkZGluZzo4cHg7IHdpZHRoOjE4MHB4OyI+RW5zZWlnbmFudDwvdGg+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aCBzdHlsZT0iYm9yZGVyOjFweCBzb2xpZCAjZGRkOyBwYWRkaW5nOjhweDsiPjJBPC90aD48dGggc3R5bGU9ImJvcmRlcjoxcHggc29saWQgI2RkZDsgcGFkZGluZzo4cHg7Ij4xQTwvdGg+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aCBzdHlsZT0iYm9yZGVyOjFweCBzb2xpZCAjYmRjM2M3OyBwYWRkaW5nOjhweDsgd2lkdGg6NjVweDsgYmFja2dyb3VuZDojZDZlYWY4OyBjb2xvcjojMjk4MGI5OyBmb250LXdlaWdodDpib2xkOyI+VG90LiBNYXQuPC90aD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RyPjx0ciBzdHlsZT0iYmFja2dyb3VuZDojZmZmYmU2OyBmb250LXNpemU6MC43NXJlbTsiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQgc3R5bGU9InRleHQtYWxpZ246cmlnaHQ7IGZvbnQtd2VpZ2h0OmJvbGQ7IGJvcmRlcjoxcHggc29saWQgI2RkZDsgcGFkZGluZzo2cHg7Ij5CZXNvaW4gKGgpPC90ZD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIHN0eWxlPSJib3JkZXI6MXB4IHNvbGlkICNkZGQ7IHBhZGRpbmc6NnB4OyBmb250LXdlaWdodDpib2xkOyI+NC4wPC90ZD48dGQgc3R5bGU9ImJvcmRlcjoxcHggc29saWQgI2RkZDsgcGFkZGluZzo2cHg7IGZvbnQtd2VpZ2h0OmJvbGQ7Ij40LjA8L3RkPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQgY29sc3Bhbj0iMSIgc3R5bGU9ImJvcmRlcjoxcHggc29saWQgI2RkZDsgYmFja2dyb3VuZDojZmZmOWM0OyI+PC90ZD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RyPjwvdGhlYWQ+PHRib2R5Pjx0ciBzdHlsZT0iYmFja2dyb3VuZDojZmRlZGVjOyI+CiAgICAgICAgICAgICAgICAgICAgPHRkIHN0eWxlPSJ0ZXh0LWFsaWduOnJpZ2h0OyBmb250LXN0eWxlOml0YWxpYzsgYm9yZGVyOjFweCBzb2xpZCAjZGRkOyBwYWRkaW5nOjhweDsgY29sb3I6I2MwMzkyYjsgZm9udC13ZWlnaHQ6Ym9sZDsiPlJlbGlxdWF0PC90ZD4KICAgICAgICAgICAgICAgICAgICA8dGQgc3R5bGU9ImJvcmRlcjoxcHggc29saWQgI2RkZDsgcGFkZGluZzo0cHg7IGZvbnQtd2VpZ2h0OmJvbGQ7IGNvbG9yOiNjMDM5MmI7IHRleHQtYWxpZ246Y2VudGVyOyI+NC4wPC90ZD48dGQgc3R5bGU9ImJvcmRlcjoxcHggc29saWQgI2RkZDsgcGFkZGluZzo0cHg7IGZvbnQtd2VpZ2h0OmJvbGQ7IGNvbG9yOiNjMDM5MmI7IHRleHQtYWxpZ246Y2VudGVyOyI+NC4wPC90ZD4KICAgICAgICAgICAgICAgICAgICA8dGQgY29sc3Bhbj0iMSIgc3R5bGU9ImJvcmRlcjoxcHggc29saWQgI2RkZDsgYmFja2dyb3VuZDojZmRlZGVjOyI+PC90ZD4KICAgICAgICAgICAgICAgIDwvdHI+PC90Ym9keT48L3RhYmxlPjwvZGl2PjxkaXYgY2xhc3M9ImNhcmQiIHN0eWxlPSJvdmVyZmxvdy14OmF1dG87IG1hcmdpbi1ib3R0b206MzBweDsgYm9yZGVyLXRvcDogNHB4IHNvbGlkICM0NTVhNjQ7Ij4KICAgICAgICAgICAgICAgICAgICAgICAgPGgzIHN0eWxlPSJjb2xvcjojNDU1YTY0OyBtYXJnaW4tYm90dG9tOjIwcHg7Ij7wn5OmIFDDtGxlIEhJU1QtR8OJTzwvaDM+PGg0IHN0eWxlPSJjb2xvcjp2YXIoLS1zZWNvbmRhcnkpOyBtYXJnaW4tYm90dG9tOjEwcHg7IHBhZGRpbmctbGVmdDo1cHg7Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBIaXN0LUfDqW8gPHNtYWxsIHN0eWxlPSJjb2xvcjojOTk5OyBmb250LXdlaWdodDpub3JtYWw7IGZvbnQtc2l6ZTowLjdyZW07Ij4oUGFyIENsYXNzZSk8L3NtYWxsPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvaDQ+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRhYmxlIHN0eWxlPSJ3aWR0aDoxMDAlOyBmb250LXNpemU6MC44cmVtOyBib3JkZXItY29sbGFwc2U6Y29sbGFwc2U7IG1hcmdpbi1ib3R0b206MjVweDsiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aGVhZD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dHIgc3R5bGU9ImJhY2tncm91bmQ6IzQ1NWE2NDsgY29sb3I6d2hpdGU7Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRoIHN0eWxlPSJ0ZXh0LWFsaWduOmxlZnQ7IGJvcmRlcjoxcHggc29saWQgI2RkZDsgcGFkZGluZzo4cHg7IHdpZHRoOjE4MHB4OyI+RW5zZWlnbmFudDwvdGg+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aCBzdHlsZT0iYm9yZGVyOjFweCBzb2xpZCAjZGRkOyBwYWRkaW5nOjhweDsiPjJBPC90aD48dGggc3R5bGU9ImJvcmRlcjoxcHggc29saWQgI2RkZDsgcGFkZGluZzo4cHg7Ij4xQTwvdGg+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aCBzdHlsZT0iYm9yZGVyOjFweCBzb2xpZCAjYmRjM2M3OyBwYWRkaW5nOjhweDsgd2lkdGg6NjVweDsgYmFja2dyb3VuZDojZDZlYWY4OyBjb2xvcjojMjk4MGI5OyBmb250LXdlaWdodDpib2xkOyI+VG90LiBNYXQuPC90aD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RyPjx0ciBzdHlsZT0iYmFja2dyb3VuZDojZmZmYmU2OyBmb250LXNpemU6MC43NXJlbTsiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQgc3R5bGU9InRleHQtYWxpZ246cmlnaHQ7IGZvbnQtd2VpZ2h0OmJvbGQ7IGJvcmRlcjoxcHggc29saWQgI2RkZDsgcGFkZGluZzo2cHg7Ij5CZXNvaW4gKGgpPC90ZD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIHN0eWxlPSJib3JkZXI6MXB4IHNvbGlkICNkZGQ7IHBhZGRpbmc6NnB4OyBmb250LXdlaWdodDpib2xkOyI+My4wPC90ZD48dGQgc3R5bGU9ImJvcmRlcjoxcHggc29saWQgI2RkZDsgcGFkZGluZzo2cHg7IGZvbnQtd2VpZ2h0OmJvbGQ7Ij4zLjA8L3RkPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQgY29sc3Bhbj0iMSIgc3R5bGU9ImJvcmRlcjoxcHggc29saWQgI2RkZDsgYmFja2dyb3VuZDojZmZmOWM0OyI+PC90ZD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RyPjwvdGhlYWQ+PHRib2R5Pjx0ciBzdHlsZT0iYmFja2dyb3VuZDojZmRlZGVjOyI+CiAgICAgICAgICAgICAgICAgICAgPHRkIHN0eWxlPSJ0ZXh0LWFsaWduOnJpZ2h0OyBmb250LXN0eWxlOml0YWxpYzsgYm9yZGVyOjFweCBzb2xpZCAjZGRkOyBwYWRkaW5nOjhweDsgY29sb3I6I2MwMzkyYjsgZm9udC13ZWlnaHQ6Ym9sZDsiPlJlbGlxdWF0PC90ZD4KICAgICAgICAgICAgICAgICAgICA8dGQgc3R5bGU9ImJvcmRlcjoxcHggc29saWQgI2RkZDsgcGFkZGluZzo0cHg7IGZvbnQtd2VpZ2h0OmJvbGQ7IGNvbG9yOiNjMDM5MmI7IHRleHQtYWxpZ246Y2VudGVyOyI+My4wPC90ZD48dGQgc3R5bGU9ImJvcmRlcjoxcHggc29saWQgI2RkZDsgcGFkZGluZzo0cHg7IGZvbnQtd2VpZ2h0OmJvbGQ7IGNvbG9yOiNjMDM5MmI7IHRleHQtYWxpZ246Y2VudGVyOyI+My4wPC90ZD4KICAgICAgICAgICAgICAgICAgICA8dGQgY29sc3Bhbj0iMSIgc3R5bGU9ImJvcmRlcjoxcHggc29saWQgI2RkZDsgYmFja2dyb3VuZDojZmRlZGVjOyI+PC90ZD4KICAgICAgICAgICAgICAgIDwvdHI+PC90Ym9keT48L3RhYmxlPjwvZGl2PjxkaXYgY2xhc3M9ImNhcmQiIHN0eWxlPSJvdmVyZmxvdy14OmF1dG87IG1hcmdpbi1ib3R0b206MzBweDsgYm9yZGVyLXRvcDogNHB4IHNvbGlkICM0NTVhNjQ7Ij4KICAgICAgICAgICAgICAgICAgICAgICAgPGgzIHN0eWxlPSJjb2xvcjojNDU1YTY0OyBtYXJnaW4tYm90dG9tOjIwcHg7Ij7wn5OmIFDDtGxlIExWQTwvaDM+PGg0IHN0eWxlPSJjb2xvcjp2YXIoLS1zZWNvbmRhcnkpOyBtYXJnaW4tYm90dG9tOjEwcHg7IHBhZGRpbmctbGVmdDo1cHg7Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBMVkEgPHNtYWxsIHN0eWxlPSJjb2xvcjojOTk5OyBmb250LXdlaWdodDpub3JtYWw7IGZvbnQtc2l6ZTowLjdyZW07Ij4oUGFyIENsYXNzZSk8L3NtYWxsPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvaDQ+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRhYmxlIHN0eWxlPSJ3aWR0aDoxMDAlOyBmb250LXNpemU6MC44cmVtOyBib3JkZXItY29sbGFwc2U6Y29sbGFwc2U7IG1hcmdpbi1ib3R0b206MjVweDsiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aGVhZD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dHIgc3R5bGU9ImJhY2tncm91bmQ6IzQ1NWE2NDsgY29sb3I6d2hpdGU7Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRoIHN0eWxlPSJ0ZXh0LWFsaWduOmxlZnQ7IGJvcmRlcjoxcHggc29saWQgI2RkZDsgcGFkZGluZzo4cHg7IHdpZHRoOjE4MHB4OyI+RW5zZWlnbmFudDwvdGg+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aCBzdHlsZT0iYm9yZGVyOjFweCBzb2xpZCAjZGRkOyBwYWRkaW5nOjhweDsiPjJBPC90aD48dGggc3R5bGU9ImJvcmRlcjoxcHggc29saWQgI2RkZDsgcGFkZGluZzo4cHg7Ij4xQTwvdGg+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aCBzdHlsZT0iYm9yZGVyOjFweCBzb2xpZCAjYmRjM2M3OyBwYWRkaW5nOjhweDsgd2lkdGg6NjVweDsgYmFja2dyb3VuZDojZDZlYWY4OyBjb2xvcjojMjk4MGI5OyBmb250LXdlaWdodDpib2xkOyI+VG90LiBNYXQuPC90aD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RyPjx0ciBzdHlsZT0iYmFja2dyb3VuZDojZmZmYmU2OyBmb250LXNpemU6MC43NXJlbTsiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQgc3R5bGU9InRleHQtYWxpZ246cmlnaHQ7IGZvbnQtd2VpZ2h0OmJvbGQ7IGJvcmRlcjoxcHggc29saWQgI2RkZDsgcGFkZGluZzo2cHg7Ij5CZXNvaW4gKGgpPC90ZD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIHN0eWxlPSJib3JkZXI6MXB4IHNvbGlkICNkZGQ7IHBhZGRpbmc6NnB4OyBmb250LXdlaWdodDpib2xkOyI+My4wPC90ZD48dGQgc3R5bGU9ImJvcmRlcjoxcHggc29saWQgI2RkZDsgcGFkZGluZzo2cHg7IGZvbnQtd2VpZ2h0OmJvbGQ7Ij4yLjU8L3RkPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQgY29sc3Bhbj0iMSIgc3R5bGU9ImJvcmRlcjoxcHggc29saWQgI2RkZDsgYmFja2dyb3VuZDojZmZmOWM0OyI+PC90ZD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RyPjwvdGhlYWQ+PHRib2R5Pjx0ciBzdHlsZT0iYmFja2dyb3VuZDojZmRlZGVjOyI+CiAgICAgICAgICAgICAgICAgICAgPHRkIHN0eWxlPSJ0ZXh0LWFsaWduOnJpZ2h0OyBmb250LXN0eWxlOml0YWxpYzsgYm9yZGVyOjFweCBzb2xpZCAjZGRkOyBwYWRkaW5nOjhweDsgY29sb3I6I2MwMzkyYjsgZm9udC13ZWlnaHQ6Ym9sZDsiPlJlbGlxdWF0PC90ZD4KICAgICAgICAgICAgICAgICAgICA8dGQgc3R5bGU9ImJvcmRlcjoxcHggc29saWQgI2RkZDsgcGFkZGluZzo0cHg7IGZvbnQtd2VpZ2h0OmJvbGQ7IGNvbG9yOiNjMDM5MmI7IHRleHQtYWxpZ246Y2VudGVyOyI+My4wPC90ZD48dGQgc3R5bGU9ImJvcmRlcjoxcHggc29saWQgI2RkZDsgcGFkZGluZzo0cHg7IGZvbnQtd2VpZ2h0OmJvbGQ7IGNvbG9yOiNjMDM5MmI7IHRleHQtYWxpZ246Y2VudGVyOyI+Mi41PC90ZD4KICAgICAgICAgICAgICAgICAgICA8dGQgY29sc3Bhbj0iMSIgc3R5bGU9ImJvcmRlcjoxcHggc29saWQgI2RkZDsgYmFja2dyb3VuZDojZmRlZGVjOyI+PC90ZD4KICAgICAgICAgICAgICAgIDwvdHI+PC90Ym9keT48L3RhYmxlPjwvZGl2PjxkaXYgY2xhc3M9ImNhcmQiIHN0eWxlPSJvdmVyZmxvdy14OmF1dG87IG1hcmdpbi1ib3R0b206MzBweDsgYm9yZGVyLXRvcDogNHB4IHNvbGlkICM0NTVhNjQ7Ij4KICAgICAgICAgICAgICAgICAgICAgICAgPGgzIHN0eWxlPSJjb2xvcjojNDU1YTY0OyBtYXJnaW4tYm90dG9tOjIwcHg7Ij7wn5OmIFDDtGxlIExWQjwvaDM+PGg0IHN0eWxlPSJjb2xvcjp2YXIoLS1zZWNvbmRhcnkpOyBtYXJnaW4tYm90dG9tOjEwcHg7IHBhZGRpbmctbGVmdDo1cHg7Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBMVkIgPHNtYWxsIHN0eWxlPSJjb2xvcjojOTk5OyBmb250LXdlaWdodDpub3JtYWw7IGZvbnQtc2l6ZTowLjdyZW07Ij4oUGFyIENsYXNzZSk8L3NtYWxsPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvaDQ+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRhYmxlIHN0eWxlPSJ3aWR0aDoxMDAlOyBmb250LXNpemU6MC44cmVtOyBib3JkZXItY29sbGFwc2U6Y29sbGFwc2U7IG1hcmdpbi1ib3R0b206MjVweDsiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aGVhZD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dHIgc3R5bGU9ImJhY2tncm91bmQ6IzQ1NWE2NDsgY29sb3I6d2hpdGU7Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRoIHN0eWxlPSJ0ZXh0LWFsaWduOmxlZnQ7IGJvcmRlcjoxcHggc29saWQgI2RkZDsgcGFkZGluZzo4cHg7IHdpZHRoOjE4MHB4OyI+RW5zZWlnbmFudDwvdGg+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aCBzdHlsZT0iYm9yZGVyOjFweCBzb2xpZCAjZGRkOyBwYWRkaW5nOjhweDsiPjJBPC90aD48dGggc3R5bGU9ImJvcmRlcjoxcHggc29saWQgI2RkZDsgcGFkZGluZzo4cHg7Ij4xQTwvdGg+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aCBzdHlsZT0iYm9yZGVyOjFweCBzb2xpZCAjYmRjM2M3OyBwYWRkaW5nOjhweDsgd2lkdGg6NjVweDsgYmFja2dyb3VuZDojZDZlYWY4OyBjb2xvcjojMjk4MGI5OyBmb250LXdlaWdodDpib2xkOyI+VG90LiBNYXQuPC90aD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RyPjx0ciBzdHlsZT0iYmFja2dyb3VuZDojZmZmYmU2OyBmb250LXNpemU6MC43NXJlbTsiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQgc3R5bGU9InRleHQtYWxpZ246cmlnaHQ7IGZvbnQtd2VpZ2h0OmJvbGQ7IGJvcmRlcjoxcHggc29saWQgI2RkZDsgcGFkZGluZzo2cHg7Ij5CZXNvaW4gKGgpPC90ZD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIHN0eWxlPSJib3JkZXI6MXB4IHNvbGlkICNkZGQ7IHBhZGRpbmc6NnB4OyBmb250LXdlaWdodDpib2xkOyI+Mi41PC90ZD48dGQgc3R5bGU9ImJvcmRlcjoxcHggc29saWQgI2RkZDsgcGFkZGluZzo2cHg7IGZvbnQtd2VpZ2h0OmJvbGQ7Ij4yLjA8L3RkPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQgY29sc3Bhbj0iMSIgc3R5bGU9ImJvcmRlcjoxcHggc29saWQgI2RkZDsgYmFja2dyb3VuZDojZmZmOWM0OyI+PC90ZD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RyPjwvdGhlYWQ+PHRib2R5Pjx0ciBzdHlsZT0iYmFja2dyb3VuZDojZmRlZGVjOyI+CiAgICAgICAgICAgICAgICAgICAgPHRkIHN0eWxlPSJ0ZXh0LWFsaWduOnJpZ2h0OyBmb250LXN0eWxlOml0YWxpYzsgYm9yZGVyOjFweCBzb2xpZCAjZGRkOyBwYWRkaW5nOjhweDsgY29sb3I6I2MwMzkyYjsgZm9udC13ZWlnaHQ6Ym9sZDsiPlJlbGlxdWF0PC90ZD4KICAgICAgICAgICAgICAgICAgICA8dGQgc3R5bGU9ImJvcmRlcjoxcHggc29saWQgI2RkZDsgcGFkZGluZzo0cHg7IGZvbnQtd2VpZ2h0OmJvbGQ7IGNvbG9yOiNjMDM5MmI7IHRleHQtYWxpZ246Y2VudGVyOyI+Mi41PC90ZD48dGQgc3R5bGU9ImJvcmRlcjoxcHggc29saWQgI2RkZDsgcGFkZGluZzo0cHg7IGZvbnQtd2VpZ2h0OmJvbGQ7IGNvbG9yOiNjMDM5MmI7IHRleHQtYWxpZ246Y2VudGVyOyI+Mi4wPC90ZD4KICAgICAgICAgICAgICAgICAgICA8dGQgY29sc3Bhbj0iMSIgc3R5bGU9ImJvcmRlcjoxcHggc29saWQgI2RkZDsgYmFja2dyb3VuZDojZmRlZGVjOyI+PC90ZD4KICAgICAgICAgICAgICAgIDwvdHI+PC90Ym9keT48L3RhYmxlPjwvZGl2PjxkaXYgY2xhc3M9ImNhcmQiIHN0eWxlPSJvdmVyZmxvdy14OmF1dG87IG1hcmdpbi1ib3R0b206MzBweDsgYm9yZGVyLXRvcDogNHB4IHNvbGlkICM0NTVhNjQ7Ij4KICAgICAgICAgICAgICAgICAgICAgICAgPGgzIHN0eWxlPSJjb2xvcjojNDU1YTY0OyBtYXJnaW4tYm90dG9tOjIwcHg7Ij7wn5OmIFDDtGxlIE1BVEhTPC9oMz48aDQgc3R5bGU9ImNvbG9yOnZhcigtLXNlY29uZGFyeSk7IG1hcmdpbi1ib3R0b206MTBweDsgcGFkZGluZy1sZWZ0OjVweDsiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1BdGhzIDxzbWFsbCBzdHlsZT0iY29sb3I6Izk5OTsgZm9udC13ZWlnaHQ6bm9ybWFsOyBmb250LXNpemU6MC43cmVtOyI+KFBhciBDbGFzc2UpPC9zbWFsbD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2g0PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0YWJsZSBzdHlsZT0id2lkdGg6MTAwJTsgZm9udC1zaXplOjAuOHJlbTsgYm9yZGVyLWNvbGxhcHNlOmNvbGxhcHNlOyBtYXJnaW4tYm90dG9tOjI1cHg7Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGhlYWQ+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRyIHN0eWxlPSJiYWNrZ3JvdW5kOiM0NTVhNjQ7IGNvbG9yOndoaXRlOyI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aCBzdHlsZT0idGV4dC1hbGlnbjpsZWZ0OyBib3JkZXI6MXB4IHNvbGlkICNkZGQ7IHBhZGRpbmc6OHB4OyB3aWR0aDoxODBweDsiPkVuc2VpZ25hbnQ8L3RoPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGggc3R5bGU9ImJvcmRlcjoxcHggc29saWQgI2RkZDsgcGFkZGluZzo4cHg7Ij4yQTwvdGg+PHRoIHN0eWxlPSJib3JkZXI6MXB4IHNvbGlkICNkZGQ7IHBhZGRpbmc6OHB4OyI+MUE8L3RoPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGggc3R5bGU9ImJvcmRlcjoxcHggc29saWQgI2JkYzNjNzsgcGFkZGluZzo4cHg7IHdpZHRoOjY1cHg7IGJhY2tncm91bmQ6I2Q2ZWFmODsgY29sb3I6IzI5ODBiOTsgZm9udC13ZWlnaHQ6Ym9sZDsiPlRvdC4gTWF0LjwvdGg+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90cj48dHIgc3R5bGU9ImJhY2tncm91bmQ6I2ZmZmJlNjsgZm9udC1zaXplOjAuNzVyZW07Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIHN0eWxlPSJ0ZXh0LWFsaWduOnJpZ2h0OyBmb250LXdlaWdodDpib2xkOyBib3JkZXI6MXB4IHNvbGlkICNkZGQ7IHBhZGRpbmc6NnB4OyI+QmVzb2luIChoKTwvdGQ+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT0iYm9yZGVyOjFweCBzb2xpZCAjZGRkOyBwYWRkaW5nOjZweDsgZm9udC13ZWlnaHQ6Ym9sZDsiPjAuMDwvdGQ+PHRkIHN0eWxlPSJib3JkZXI6MXB4IHNvbGlkICNkZGQ7IHBhZGRpbmc6NnB4OyBmb250LXdlaWdodDpib2xkOyI+MC4wPC90ZD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIGNvbHNwYW49IjEiIHN0eWxlPSJib3JkZXI6MXB4IHNvbGlkICNkZGQ7IGJhY2tncm91bmQ6I2ZmZjljNDsiPjwvdGQ+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90cj48L3RoZWFkPjx0Ym9keT48dHIgc3R5bGU9ImJhY2tncm91bmQ6I2ZkZWRlYzsiPgogICAgICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT0idGV4dC1hbGlnbjpyaWdodDsgZm9udC1zdHlsZTppdGFsaWM7IGJvcmRlcjoxcHggc29saWQgI2RkZDsgcGFkZGluZzo4cHg7IGNvbG9yOiNjMDM5MmI7IGZvbnQtd2VpZ2h0OmJvbGQ7Ij5SZWxpcXVhdDwvdGQ+CiAgICAgICAgICAgICAgICAgICAgPHRkIHN0eWxlPSJib3JkZXI6MXB4IHNvbGlkICNkZGQ7IHBhZGRpbmc6NHB4OyBmb250LXdlaWdodDpib2xkOyBjb2xvcjojMjdhZTYwOyB0ZXh0LWFsaWduOmNlbnRlcjsiPk9LPC90ZD48dGQgc3R5bGU9ImJvcmRlcjoxcHggc29saWQgI2RkZDsgcGFkZGluZzo0cHg7IGZvbnQtd2VpZ2h0OmJvbGQ7IGNvbG9yOiMyN2FlNjA7IHRleHQtYWxpZ246Y2VudGVyOyI+T0s8L3RkPgogICAgICAgICAgICAgICAgICAgIDx0ZCBjb2xzcGFuPSIxIiBzdHlsZT0iYm9yZGVyOjFweCBzb2xpZCAjZGRkOyBiYWNrZ3JvdW5kOiNmZGVkZWM7Ij48L3RkPgogICAgICAgICAgICAgICAgPC90cj48L3Rib2R5PjwvdGFibGU+PC9kaXY+PGRpdiBjbGFzcz0iY2FyZCIgc3R5bGU9Im92ZXJmbG93LXg6YXV0bzsgbWFyZ2luLWJvdHRvbTozMHB4OyBib3JkZXItdG9wOiA0cHggc29saWQgIzQ1NWE2NDsiPgogICAgICAgICAgICAgICAgICAgICAgICA8aDMgc3R5bGU9ImNvbG9yOiM0NTVhNjQ7IG1hcmdpbi1ib3R0b206MjBweDsiPvCfk6YgUMO0bGUgTUFUSFMgKFRDKTwvaDM+PGg0IHN0eWxlPSJjb2xvcjp2YXIoLS1zZWNvbmRhcnkpOyBtYXJnaW4tYm90dG9tOjEwcHg7IHBhZGRpbmctbGVmdDo1cHg7Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNYXRocyAoVEMpIDxzbWFsbCBzdHlsZT0iY29sb3I6Izk5OTsgZm9udC13ZWlnaHQ6bm9ybWFsOyBmb250LXNpemU6MC43cmVtOyI+KFBhciBDbGFzc2UpPC9zbWFsbD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2g0PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0YWJsZSBzdHlsZT0id2lkdGg6MTAwJTsgZm9udC1zaXplOjAuOHJlbTsgYm9yZGVyLWNvbGxhcHNlOmNvbGxhcHNlOyBtYXJnaW4tYm90dG9tOjI1cHg7Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGhlYWQ+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRyIHN0eWxlPSJiYWNrZ3JvdW5kOiM0NTVhNjQ7IGNvbG9yOndoaXRlOyI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aCBzdHlsZT0idGV4dC1hbGlnbjpsZWZ0OyBib3JkZXI6MXB4IHNvbGlkICNkZGQ7IHBhZGRpbmc6OHB4OyB3aWR0aDoxODBweDsiPkVuc2VpZ25hbnQ8L3RoPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGggc3R5bGU9ImJvcmRlcjoxcHggc29saWQgI2RkZDsgcGFkZGluZzo4cHg7Ij4yQTwvdGg+PHRoIHN0eWxlPSJib3JkZXI6MXB4IHNvbGlkICNkZGQ7IHBhZGRpbmc6OHB4OyI+MUE8L3RoPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGggc3R5bGU9ImJvcmRlcjoxcHggc29saWQgI2JkYzNjNzsgcGFkZGluZzo4cHg7IHdpZHRoOjY1cHg7IGJhY2tncm91bmQ6I2Q2ZWFmODsgY29sb3I6IzI5ODBiOTsgZm9udC13ZWlnaHQ6Ym9sZDsiPlRvdC4gTWF0LjwvdGg+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90cj48dHIgc3R5bGU9ImJhY2tncm91bmQ6I2ZmZmJlNjsgZm9udC1zaXplOjAuNzVyZW07Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIHN0eWxlPSJ0ZXh0LWFsaWduOnJpZ2h0OyBmb250LXdlaWdodDpib2xkOyBib3JkZXI6MXB4IHNvbGlkICNkZGQ7IHBhZGRpbmc6NnB4OyI+QmVzb2luIChoKTwvdGQ+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT0iYm9yZGVyOjFweCBzb2xpZCAjZGRkOyBwYWRkaW5nOjZweDsgZm9udC13ZWlnaHQ6Ym9sZDsiPjQuMDwvdGQ+PHRkIHN0eWxlPSJib3JkZXI6MXB4IHNvbGlkICNkZGQ7IHBhZGRpbmc6NnB4OyBmb250LXdlaWdodDpib2xkOyI+MC4wPC90ZD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIGNvbHNwYW49IjEiIHN0eWxlPSJib3JkZXI6MXB4IHNvbGlkICNkZGQ7IGJhY2tncm91bmQ6I2ZmZjljNDsiPjwvdGQ+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90cj48L3RoZWFkPjx0Ym9keT48dHI+CiAgICAgICAgICAgICAgICAgICAgPHRkIHN0eWxlPSJ0ZXh0LWFsaWduOmxlZnQ7IGZvbnQtd2VpZ2h0OmJvbGQ7IGJvcmRlcjoxcHggc29saWQgI2RkZDsgcGFkZGluZzo4cHg7IGJhY2tncm91bmQ6I2ZhZmFmYTsiPk5vdXZlYXU8L3RkPjx0ZCBzdHlsZT0iYm9yZGVyOjFweCBzb2xpZCAjZGRkOyBwYWRkaW5nOjRweDsgYmFja2dyb3VuZDp3aGl0ZTsiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJudW1iZXIiIHN0ZXA9IjAuNSIgcGxhY2Vob2xkZXI9IjAiIHN0eWxlPSJ3aWR0aDo1MHB4OyB0ZXh0LWFsaWduOmNlbnRlcjsgYm9yZGVyOjFweCBzb2xpZCAjZWVlOyBmb250LXdlaWdodDpub3JtYWw7IiBvbmNoYW5nZT0idXBkYXRlQ29UZWFjaGluZygnMkEnLCAxLCB0aGlzLnZhbHVlLCB0aGlzKSIgb25pbnB1dD0idXBkYXRlQ29UZWFjaGluZygnMkEnLCAxLCB0aGlzLnZhbHVlLCB0aGlzKSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RkPjx0ZCBzdHlsZT0iYm9yZGVyOjFweCBzb2xpZCAjZGRkOyBwYWRkaW5nOjRweDsgYmFja2dyb3VuZDp3aGl0ZTsiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJudW1iZXIiIHN0ZXA9IjAuNSIgcGxhY2Vob2xkZXI9IjAiIHN0eWxlPSJ3aWR0aDo1MHB4OyB0ZXh0LWFsaWduOmNlbnRlcjsgYm9yZGVyOjFweCBzb2xpZCAjZWVlOyBmb250LXdlaWdodDpub3JtYWw7IiBvbmNoYW5nZT0idXBkYXRlQ29UZWFjaGluZygnMUEnLCAxLCB0aGlzLnZhbHVlLCB0aGlzKSIgb25pbnB1dD0idXBkYXRlQ29UZWFjaGluZygnMUEnLCAxLCB0aGlzLnZhbHVlLCB0aGlzKSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RkPjx0ZCBzdHlsZT0iYm9yZGVyOjFweCBzb2xpZCAjZGRkOyBwYWRkaW5nOjhweDsgZm9udC13ZWlnaHQ6Ym9sZDsgYmFja2dyb3VuZDojZThmMGZlOyBjb2xvcjp2YXIoLS1wcmltYXJ5KTsgdGV4dC1hbGlnbjpjZW50ZXI7Ij4wLjA8L3RkPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQgc3R5bGU9ImJvcmRlcjoxcHggc29saWQgI2RkZDsgcGFkZGluZzo4cHg7IGZvbnQtd2VpZ2h0OmJvbGQ7IGNvbG9yOiNjMDM5MmI7IHRleHQtYWxpZ246Y2VudGVyOyI+MC4wPC90ZD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIHN0eWxlPSJib3JkZXI6MXB4IHNvbGlkICNkZGQ7IHBhZGRpbmc6OHB4OyBmb250LXdlaWdodDpib2xkOyBiYWNrZ3JvdW5kOiNmNGVjZjc7IGNvbG9yOiM4ZTQ0YWQ7IHRleHQtYWxpZ246Y2VudGVyOyI+MTguMDwvdGQ+CiAgICAgICAgICAgICAgICA8L3RyPjx0cj4KICAgICAgICAgICAgICAgICAgICA8dGQgc3R5bGU9InRleHQtYWxpZ246bGVmdDsgZm9udC13ZWlnaHQ6Ym9sZDsgYm9yZGVyOjFweCBzb2xpZCAjZGRkOyBwYWRkaW5nOjhweDsgYmFja2dyb3VuZDojZmFmYWZhOyI+Tm91dmVhdTwvdGQ+PHRkIHN0eWxlPSJib3JkZXI6MXB4IHNvbGlkICNkZGQ7IHBhZGRpbmc6NHB4OyBiYWNrZ3JvdW5kOndoaXRlOyI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9Im51bWJlciIgc3RlcD0iMC41IiBwbGFjZWhvbGRlcj0iMCIgc3R5bGU9IndpZHRoOjUwcHg7IHRleHQtYWxpZ246Y2VudGVyOyBib3JkZXI6MXB4IHNvbGlkICNlZWU7IGZvbnQtd2VpZ2h0Om5vcm1hbDsiIG9uY2hhbmdlPSJ1cGRhdGVDb1RlYWNoaW5nKCcyQScsIDIsIHRoaXMudmFsdWUsIHRoaXMpIiBvbmlucHV0PSJ1cGRhdGVDb1RlYWNoaW5nKCcyQScsIDIsIHRoaXMudmFsdWUsIHRoaXMpIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+PHRkIHN0eWxlPSJib3JkZXI6MXB4IHNvbGlkICNkZGQ7IHBhZGRpbmc6NHB4OyBiYWNrZ3JvdW5kOndoaXRlOyI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9Im51bWJlciIgc3RlcD0iMC41IiBwbGFjZWhvbGRlcj0iMCIgc3R5bGU9IndpZHRoOjUwcHg7IHRleHQtYWxpZ246Y2VudGVyOyBib3JkZXI6MXB4IHNvbGlkICNlZWU7IGZvbnQtd2VpZ2h0Om5vcm1hbDsiIG9uY2hhbmdlPSJ1cGRhdGVDb1RlYWNoaW5nKCcxQScsIDIsIHRoaXMudmFsdWUsIHRoaXMpIiBvbmlucHV0PSJ1cGRhdGVDb1RlYWNoaW5nKCcxQScsIDIsIHRoaXMudmFsdWUsIHRoaXMpIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+PHRkIHN0eWxlPSJib3JkZXI6MXB4IHNvbGlkICNkZGQ7IHBhZGRpbmc6OHB4OyBmb250LXdlaWdodDpib2xkOyBiYWNrZ3JvdW5kOiNlOGYwZmU7IGNvbG9yOnZhcigtLXByaW1hcnkpOyB0ZXh0LWFsaWduOmNlbnRlcjsiPjAuMDwvdGQ+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT0iYm9yZGVyOjFweCBzb2xpZCAjZGRkOyBwYWRkaW5nOjhweDsgZm9udC13ZWlnaHQ6Ym9sZDsgY29sb3I6I2MwMzkyYjsgdGV4dC1hbGlnbjpjZW50ZXI7Ij4wLjA8L3RkPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQgc3R5bGU9ImJvcmRlcjoxcHggc29saWQgI2RkZDsgcGFkZGluZzo4cHg7IGZvbnQtd2VpZ2h0OmJvbGQ7IGJhY2tncm91bmQ6I2Y0ZWNmNzsgY29sb3I6IzhlNDRhZDsgdGV4dC1hbGlnbjpjZW50ZXI7Ij4xOC4wPC90ZD4KICAgICAgICAgICAgICAgIDwvdHI+PHRyPgogICAgICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT0idGV4dC1hbGlnbjpsZWZ0OyBmb250LXdlaWdodDpib2xkOyBib3JkZXI6MXB4IHNvbGlkICNkZGQ7IHBhZGRpbmc6OHB4OyBiYWNrZ3JvdW5kOiNmYWZhZmE7Ij5TQVVUT048L3RkPjx0ZCBzdHlsZT0iYm9yZGVyOjFweCBzb2xpZCAjZGRkOyBwYWRkaW5nOjRweDsgYmFja2dyb3VuZDojZTNmMmZkOyI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9Im51bWJlciIgc3RlcD0iMC41IiB2YWx1ZT0iNCIgcGxhY2Vob2xkZXI9IjAiIHN0eWxlPSJ3aWR0aDo1MHB4OyB0ZXh0LWFsaWduOmNlbnRlcjsgYm9yZGVyOjFweCBzb2xpZCAjOTBjYWY5OyBmb250LXdlaWdodDpib2xkOyIgb25jaGFuZ2U9InVwZGF0ZUNvVGVhY2hpbmcoJzJBJywgMCwgdGhpcy52YWx1ZSwgdGhpcykiIG9uaW5wdXQ9InVwZGF0ZUNvVGVhY2hpbmcoJzJBJywgMCwgdGhpcy52YWx1ZSwgdGhpcykiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD48dGQgc3R5bGU9ImJvcmRlcjoxcHggc29saWQgI2RkZDsgcGFkZGluZzo0cHg7IGJhY2tncm91bmQ6d2hpdGU7Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0ibnVtYmVyIiBzdGVwPSIwLjUiIHBsYWNlaG9sZGVyPSIwIiBzdHlsZT0id2lkdGg6NTBweDsgdGV4dC1hbGlnbjpjZW50ZXI7IGJvcmRlcjoxcHggc29saWQgI2VlZTsgZm9udC13ZWlnaHQ6bm9ybWFsOyIgb25jaGFuZ2U9InVwZGF0ZUNvVGVhY2hpbmcoJzFBJywgMCwgdGhpcy52YWx1ZSwgdGhpcykiIG9uaW5wdXQ9InVwZGF0ZUNvVGVhY2hpbmcoJzFBJywgMCwgdGhpcy52YWx1ZSwgdGhpcykiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD48dGQgc3R5bGU9ImJvcmRlcjoxcHggc29saWQgI2RkZDsgcGFkZGluZzo4cHg7IGZvbnQtd2VpZ2h0OmJvbGQ7IGJhY2tncm91bmQ6I2U4ZjBmZTsgY29sb3I6dmFyKC0tcHJpbWFyeSk7IHRleHQtYWxpZ246Y2VudGVyOyI+NC4wPC90ZD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIHN0eWxlPSJib3JkZXI6MXB4IHNvbGlkICNkZGQ7IHBhZGRpbmc6OHB4OyBmb250LXdlaWdodDpib2xkOyBjb2xvcjojYzAzOTJiOyB0ZXh0LWFsaWduOmNlbnRlcjsiPjQuMDwvdGQ+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT0iYm9yZGVyOjFweCBzb2xpZCAjZGRkOyBwYWRkaW5nOjhweDsgZm9udC13ZWlnaHQ6Ym9sZDsgYmFja2dyb3VuZDojZjRlY2Y3OyBjb2xvcjojOGU0NGFkOyB0ZXh0LWFsaWduOmNlbnRlcjsiPjE4LjA8L3RkPgogICAgICAgICAgICAgICAgPC90cj48dHIgc3R5bGU9ImJhY2tncm91bmQ6I2ZkZWRlYzsiPgogICAgICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT0idGV4dC1hbGlnbjpyaWdodDsgZm9udC1zdHlsZTppdGFsaWM7IGJvcmRlcjoxcHggc29saWQgI2RkZDsgcGFkZGluZzo4cHg7IGNvbG9yOiNjMDM5MmI7IGZvbnQtd2VpZ2h0OmJvbGQ7Ij5SZWxpcXVhdDwvdGQ+CiAgICAgICAgICAgICAgICAgICAgPHRkIHN0eWxlPSJib3JkZXI6MXB4IHNvbGlkICNkZGQ7IHBhZGRpbmc6NHB4OyBmb250LXdlaWdodDpib2xkOyBjb2xvcjojMjdhZTYwOyB0ZXh0LWFsaWduOmNlbnRlcjsiPk9LPC90ZD48dGQgc3R5bGU9ImJvcmRlcjoxcHggc29saWQgI2RkZDsgcGFkZGluZzo0cHg7IGZvbnQtd2VpZ2h0OmJvbGQ7IGNvbG9yOiMyN2FlNjA7IHRleHQtYWxpZ246Y2VudGVyOyI+T0s8L3RkPgogICAgICAgICAgICAgICAgICAgIDx0ZCBjb2xzcGFuPSIxIiBzdHlsZT0iYm9yZGVyOjFweCBzb2xpZCAjZGRkOyBiYWNrZ3JvdW5kOiNmZGVkZWM7Ij48L3RkPgogICAgICAgICAgICAgICAgPC90cj48L3Rib2R5PjwvdGFibGU+PC9kaXY+PGRpdiBjbGFzcz0iY2FyZCIgc3R5bGU9Im92ZXJmbG93LXg6YXV0bzsgbWFyZ2luLWJvdHRvbTozMHB4OyBib3JkZXItdG9wOiA0cHggc29saWQgIzQ1NWE2NDsiPgogICAgICAgICAgICAgICAgICAgICAgICA8aDMgc3R5bGU9ImNvbG9yOiM0NTVhNjQ7IG1hcmdpbi1ib3R0b206MjBweDsiPvCfk6YgUMO0bGUgUEhJTE9TT1BISUU8L2gzPjwvZGl2PjxkaXYgY2xhc3M9ImNhcmQiIHN0eWxlPSJvdmVyZmxvdy14OmF1dG87IG1hcmdpbi1ib3R0b206MzBweDsgYm9yZGVyLXRvcDogNHB4IHNvbGlkICM0NTVhNjQ7Ij4KICAgICAgICAgICAgICAgICAgICAgICAgPGgzIHN0eWxlPSJjb2xvcjojNDU1YTY0OyBtYXJnaW4tYm90dG9tOjIwcHg7Ij7wn5OmIFDDtGxlIFBIWVMtQ0hJIChUQyk8L2gzPjxoNCBzdHlsZT0iY29sb3I6dmFyKC0tc2Vjb25kYXJ5KTsgbWFyZ2luLWJvdHRvbToxMHB4OyBwYWRkaW5nLWxlZnQ6NXB4OyI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUGh5cy1DaGkgKFRDKSA8c21hbGwgc3R5bGU9ImNvbG9yOiM5OTk7IGZvbnQtd2VpZ2h0Om5vcm1hbDsgZm9udC1zaXplOjAuN3JlbTsiPihQYXIgQ2xhc3NlKTwvc21hbGw+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9oND4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGFibGUgc3R5bGU9IndpZHRoOjEwMCU7IGZvbnQtc2l6ZTowLjhyZW07IGJvcmRlci1jb2xsYXBzZTpjb2xsYXBzZTsgbWFyZ2luLWJvdHRvbToyNXB4OyI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRoZWFkPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ciBzdHlsZT0iYmFja2dyb3VuZDojNDU1YTY0OyBjb2xvcjp3aGl0ZTsiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGggc3R5bGU9InRleHQtYWxpZ246bGVmdDsgYm9yZGVyOjFweCBzb2xpZCAjZGRkOyBwYWRkaW5nOjhweDsgd2lkdGg6MTgwcHg7Ij5FbnNlaWduYW50PC90aD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRoIHN0eWxlPSJib3JkZXI6MXB4IHNvbGlkICNkZGQ7IHBhZGRpbmc6OHB4OyI+MkE8L3RoPjx0aCBzdHlsZT0iYm9yZGVyOjFweCBzb2xpZCAjZGRkOyBwYWRkaW5nOjhweDsiPjFBPC90aD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRoIHN0eWxlPSJib3JkZXI6MXB4IHNvbGlkICNiZGMzYzc7IHBhZGRpbmc6OHB4OyB3aWR0aDo2NXB4OyBiYWNrZ3JvdW5kOiNkNmVhZjg7IGNvbG9yOiMyOTgwYjk7IGZvbnQtd2VpZ2h0OmJvbGQ7Ij5Ub3QuIE1hdC48L3RoPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdHI+PHRyIHN0eWxlPSJiYWNrZ3JvdW5kOiNmZmZiZTY7IGZvbnQtc2l6ZTowLjc1cmVtOyI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT0idGV4dC1hbGlnbjpyaWdodDsgZm9udC13ZWlnaHQ6Ym9sZDsgYm9yZGVyOjFweCBzb2xpZCAjZGRkOyBwYWRkaW5nOjZweDsiPkJlc29pbiAoaCk8L3RkPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQgc3R5bGU9ImJvcmRlcjoxcHggc29saWQgI2RkZDsgcGFkZGluZzo2cHg7IGZvbnQtd2VpZ2h0OmJvbGQ7Ij4zLjA8L3RkPjx0ZCBzdHlsZT0iYm9yZGVyOjFweCBzb2xpZCAjZGRkOyBwYWRkaW5nOjZweDsgZm9udC13ZWlnaHQ6Ym9sZDsiPjAuMDwvdGQ+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBjb2xzcGFuPSIxIiBzdHlsZT0iYm9yZGVyOjFweCBzb2xpZCAjZGRkOyBiYWNrZ3JvdW5kOiNmZmY5YzQ7Ij48L3RkPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdHI+PC90aGVhZD48dGJvZHk+PHRyIHN0eWxlPSJiYWNrZ3JvdW5kOiNmZGVkZWM7Ij4KICAgICAgICAgICAgICAgICAgICA8dGQgc3R5bGU9InRleHQtYWxpZ246cmlnaHQ7IGZvbnQtc3R5bGU6aXRhbGljOyBib3JkZXI6MXB4IHNvbGlkICNkZGQ7IHBhZGRpbmc6OHB4OyBjb2xvcjojYzAzOTJiOyBmb250LXdlaWdodDpib2xkOyI+UmVsaXF1YXQ8L3RkPgogICAgICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT0iYm9yZGVyOjFweCBzb2xpZCAjZGRkOyBwYWRkaW5nOjRweDsgZm9udC13ZWlnaHQ6Ym9sZDsgY29sb3I6I2MwMzkyYjsgdGV4dC1hbGlnbjpjZW50ZXI7Ij4zLjA8L3RkPjx0ZCBzdHlsZT0iYm9yZGVyOjFweCBzb2xpZCAjZGRkOyBwYWRkaW5nOjRweDsgZm9udC13ZWlnaHQ6Ym9sZDsgY29sb3I6IzI3YWU2MDsgdGV4dC1hbGlnbjpjZW50ZXI7Ij5PSzwvdGQ+CiAgICAgICAgICAgICAgICAgICAgPHRkIGNvbHNwYW49IjEiIHN0eWxlPSJib3JkZXI6MXB4IHNvbGlkICNkZGQ7IGJhY2tncm91bmQ6I2ZkZWRlYzsiPjwvdGQ+CiAgICAgICAgICAgICAgICA8L3RyPjwvdGJvZHk+PC90YWJsZT48L2Rpdj48ZGl2IGNsYXNzPSJjYXJkIiBzdHlsZT0ib3ZlcmZsb3cteDphdXRvOyBtYXJnaW4tYm90dG9tOjMwcHg7IGJvcmRlci10b3A6IDRweCBzb2xpZCAjNDU1YTY0OyI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxoMyBzdHlsZT0iY29sb3I6IzQ1NWE2NDsgbWFyZ2luLWJvdHRvbToyMHB4OyI+8J+TpiBQw7RsZSBTRVM8L2gzPjxoNCBzdHlsZT0iY29sb3I6dmFyKC0tc2Vjb25kYXJ5KTsgbWFyZ2luLWJvdHRvbToxMHB4OyBwYWRkaW5nLWxlZnQ6NXB4OyI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU0VTIDxzbWFsbCBzdHlsZT0iY29sb3I6Izk5OTsgZm9udC13ZWlnaHQ6bm9ybWFsOyBmb250LXNpemU6MC43cmVtOyI+KFBhciBDbGFzc2UpPC9zbWFsbD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2g0PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0YWJsZSBzdHlsZT0id2lkdGg6MTAwJTsgZm9udC1zaXplOjAuOHJlbTsgYm9yZGVyLWNvbGxhcHNlOmNvbGxhcHNlOyBtYXJnaW4tYm90dG9tOjI1cHg7Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGhlYWQ+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRyIHN0eWxlPSJiYWNrZ3JvdW5kOiM0NTVhNjQ7IGNvbG9yOndoaXRlOyI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aCBzdHlsZT0idGV4dC1hbGlnbjpsZWZ0OyBib3JkZXI6MXB4IHNvbGlkICNkZGQ7IHBhZGRpbmc6OHB4OyB3aWR0aDoxODBweDsiPkVuc2VpZ25hbnQ8L3RoPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGggc3R5bGU9ImJvcmRlcjoxcHggc29saWQgI2RkZDsgcGFkZGluZzo4cHg7Ij4yQTwvdGg+PHRoIHN0eWxlPSJib3JkZXI6MXB4IHNvbGlkICNkZGQ7IHBhZGRpbmc6OHB4OyI+MUE8L3RoPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGggc3R5bGU9ImJvcmRlcjoxcHggc29saWQgI2JkYzNjNzsgcGFkZGluZzo4cHg7IHdpZHRoOjY1cHg7IGJhY2tncm91bmQ6I2Q2ZWFmODsgY29sb3I6IzI5ODBiOTsgZm9udC13ZWlnaHQ6Ym9sZDsiPlRvdC4gTWF0LjwvdGg+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90cj48dHIgc3R5bGU9ImJhY2tncm91bmQ6I2ZmZmJlNjsgZm9udC1zaXplOjAuNzVyZW07Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIHN0eWxlPSJ0ZXh0LWFsaWduOnJpZ2h0OyBmb250LXdlaWdodDpib2xkOyBib3JkZXI6MXB4IHNvbGlkICNkZGQ7IHBhZGRpbmc6NnB4OyI+QmVzb2luIChoKTwvdGQ+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT0iYm9yZGVyOjFweCBzb2xpZCAjZGRkOyBwYWRkaW5nOjZweDsgZm9udC13ZWlnaHQ6Ym9sZDsiPjEuNTwvdGQ+PHRkIHN0eWxlPSJib3JkZXI6MXB4IHNvbGlkICNkZGQ7IHBhZGRpbmc6NnB4OyBmb250LXdlaWdodDpib2xkOyI+MC4wPC90ZD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIGNvbHNwYW49IjEiIHN0eWxlPSJib3JkZXI6MXB4IHNvbGlkICNkZGQ7IGJhY2tncm91bmQ6I2ZmZjljNDsiPjwvdGQ+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90cj48L3RoZWFkPjx0Ym9keT48dHIgc3R5bGU9ImJhY2tncm91bmQ6I2ZkZWRlYzsiPgogICAgICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT0idGV4dC1hbGlnbjpyaWdodDsgZm9udC1zdHlsZTppdGFsaWM7IGJvcmRlcjoxcHggc29saWQgI2RkZDsgcGFkZGluZzo4cHg7IGNvbG9yOiNjMDM5MmI7IGZvbnQtd2VpZ2h0OmJvbGQ7Ij5SZWxpcXVhdDwvdGQ+CiAgICAgICAgICAgICAgICAgICAgPHRkIHN0eWxlPSJib3JkZXI6MXB4IHNvbGlkICNkZGQ7IHBhZGRpbmc6NHB4OyBmb250LXdlaWdodDpib2xkOyBjb2xvcjojYzAzOTJiOyB0ZXh0LWFsaWduOmNlbnRlcjsiPjEuNTwvdGQ+PHRkIHN0eWxlPSJib3JkZXI6MXB4IHNvbGlkICNkZGQ7IHBhZGRpbmc6NHB4OyBmb250LXdlaWdodDpib2xkOyBjb2xvcjojMjdhZTYwOyB0ZXh0LWFsaWduOmNlbnRlcjsiPk9LPC90ZD4KICAgICAgICAgICAgICAgICAgICA8dGQgY29sc3Bhbj0iMSIgc3R5bGU9ImJvcmRlcjoxcHggc29saWQgI2RkZDsgYmFja2dyb3VuZDojZmRlZGVjOyI+PC90ZD4KICAgICAgICAgICAgICAgIDwvdHI+PC90Ym9keT48L3RhYmxlPjwvZGl2PjxkaXYgY2xhc3M9ImNhcmQiIHN0eWxlPSJvdmVyZmxvdy14OmF1dG87IG1hcmdpbi1ib3R0b206MzBweDsgYm9yZGVyLXRvcDogNHB4IHNvbGlkICM0NTVhNjQ7Ij4KICAgICAgICAgICAgICAgICAgICAgICAgPGgzIHN0eWxlPSJjb2xvcjojNDU1YTY0OyBtYXJnaW4tYm90dG9tOjIwcHg7Ij7wn5OmIFDDtGxlIFNWVCAoVEMpPC9oMz48aDQgc3R5bGU9ImNvbG9yOnZhcigtLXNlY29uZGFyeSk7IG1hcmdpbi1ib3R0b206MTBweDsgcGFkZGluZy1sZWZ0OjVweDsiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNWVCAoVEMpIDxzbWFsbCBzdHlsZT0iY29sb3I6Izk5OTsgZm9udC13ZWlnaHQ6bm9ybWFsOyBmb250LXNpemU6MC43cmVtOyI+KFBhciBDbGFzc2UpPC9zbWFsbD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2g0PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0YWJsZSBzdHlsZT0id2lkdGg6MTAwJTsgZm9udC1zaXplOjAuOHJlbTsgYm9yZGVyLWNvbGxhcHNlOmNvbGxhcHNlOyBtYXJnaW4tYm90dG9tOjI1cHg7Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGhlYWQ+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRyIHN0eWxlPSJiYWNrZ3JvdW5kOiM0NTVhNjQ7IGNvbG9yOndoaXRlOyI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aCBzdHlsZT0idGV4dC1hbGlnbjpsZWZ0OyBib3JkZXI6MXB4IHNvbGlkICNkZGQ7IHBhZGRpbmc6OHB4OyB3aWR0aDoxODBweDsiPkVuc2VpZ25hbnQ8L3RoPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGggc3R5bGU9ImJvcmRlcjoxcHggc29saWQgI2RkZDsgcGFkZGluZzo4cHg7Ij4yQTwvdGg+PHRoIHN0eWxlPSJib3JkZXI6MXB4IHNvbGlkICNkZGQ7IHBhZGRpbmc6OHB4OyI+MUE8L3RoPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGggc3R5bGU9ImJvcmRlcjoxcHggc29saWQgI2JkYzNjNzsgcGFkZGluZzo4cHg7IHdpZHRoOjY1cHg7IGJhY2tncm91bmQ6I2Q2ZWFmODsgY29sb3I6IzI5ODBiOTsgZm9udC13ZWlnaHQ6Ym9sZDsiPlRvdC4gTWF0LjwvdGg+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90cj48dHIgc3R5bGU9ImJhY2tncm91bmQ6I2ZmZmJlNjsgZm9udC1zaXplOjAuNzVyZW07Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIHN0eWxlPSJ0ZXh0LWFsaWduOnJpZ2h0OyBmb250LXdlaWdodDpib2xkOyBib3JkZXI6MXB4IHNvbGlkICNkZGQ7IHBhZGRpbmc6NnB4OyI+QmVzb2luIChoKTwvdGQ+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT0iYm9yZGVyOjFweCBzb2xpZCAjZGRkOyBwYWRkaW5nOjZweDsgZm9udC13ZWlnaHQ6Ym9sZDsiPjEuNTwvdGQ+PHRkIHN0eWxlPSJib3JkZXI6MXB4IHNvbGlkICNkZGQ7IHBhZGRpbmc6NnB4OyBmb250LXdlaWdodDpib2xkOyI+MC4wPC90ZD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIGNvbHNwYW49IjEiIHN0eWxlPSJib3JkZXI6MXB4IHNvbGlkICNkZGQ7IGJhY2tncm91bmQ6I2ZmZjljNDsiPjwvdGQ+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90cj48L3RoZWFkPjx0Ym9keT48dHIgc3R5bGU9ImJhY2tncm91bmQ6I2ZkZWRlYzsiPgogICAgICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT0idGV4dC1hbGlnbjpyaWdodDsgZm9udC1zdHlsZTppdGFsaWM7IGJvcmRlcjoxcHggc29saWQgI2RkZDsgcGFkZGluZzo4cHg7IGNvbG9yOiNjMDM5MmI7IGZvbnQtd2VpZ2h0OmJvbGQ7Ij5SZWxpcXVhdDwvdGQ+CiAgICAgICAgICAgICAgICAgICAgPHRkIHN0eWxlPSJib3JkZXI6MXB4IHNvbGlkICNkZGQ7IHBhZGRpbmc6NHB4OyBmb250LXdlaWdodDpib2xkOyBjb2xvcjojYzAzOTJiOyB0ZXh0LWFsaWduOmNlbnRlcjsiPjEuNTwvdGQ+PHRkIHN0eWxlPSJib3JkZXI6MXB4IHNvbGlkICNkZGQ7IHBhZGRpbmc6NHB4OyBmb250LXdlaWdodDpib2xkOyBjb2xvcjojMjdhZTYwOyB0ZXh0LWFsaWduOmNlbnRlcjsiPk9LPC90ZD4KICAgICAgICAgICAgICAgICAgICA8dGQgY29sc3Bhbj0iMSIgc3R5bGU9ImJvcmRlcjoxcHggc29saWQgI2RkZDsgYmFja2dyb3VuZDojZmRlZGVjOyI+PC90ZD4KICAgICAgICAgICAgICAgIDwvdHI+PC90Ym9keT48L3RhYmxlPjwvZGl2PjwvZGl2PgogICAgPC9kaXY+CjwvZGl2PgoKICAgIDxkaXYgaWQ9InBpbG90YWdlIiBjbGFzcz0ic2VjdGlvbiI+CiAgICA8ZGl2IGNsYXNzPSJjYXJkIj4KICAgICAgICA8ZGl2IGNsYXNzPSJjYXJkLWhlYWRlciI+CiAgICAgICAgICAgIDxoMz5WZW50aWxhdGlvbiAmYW1wOyBCZXNvaW5zPC9oMz4KICAgICAgICAgICAgPGRpdiBjbGFzcz0iZXhwb3J0LWdyb3VwIj4KICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImJ0bi1leHAiIG9uY2xpY2s9ImV4cG9ydEN1cnJlbnRQYWdlKCdleGNlbCcpIj7wn5OKIEV4Y2VsPC9idXR0b24+CiAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJidG4tZXhwIiBvbmNsaWNrPSJleHBvcnRDdXJyZW50UGFnZSgncGRmJykiPvCfk4QgUERGPC9idXR0b24+CgkJCQkgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgPGRpdiBjbGFzcz0idGFibGUtY29udGFpbmVyIj4KICAgICAgICAgICAgPHRhYmxlIGNsYXNzPSJ0YWJsZSIgaWQ9InJoLXRhYmxlLWRpc2MiPgogICAgICAgICAgICAgICAgPHRoZWFkPgogICAgICAgICAgICAgICAgICAgIDx0cj4KICAgICAgICAgICAgICAgICAgICAgICAgPHRoIHN0eWxlPSJ3aWR0aDoyMCU7Ij5EaXNjaXBsaW5lIC8gRW5zZWlnbmFudDwvdGg+CiAgICAgICAgICAgICAgICAgICAgICAgIDx0aCBzdHlsZT0id2lkdGg6MTAlOyI+QmVzb2luPC90aD4KICAgICAgICAgICAgICAgICAgICAgICAgPHRoIHN0eWxlPSJ3aWR0aDoxMCU7Ij5BcHBvcnQ8L3RoPgogICAgICAgICAgICAgICAgICAgICAgICA8dGggc3R5bGU9IndpZHRoOjEwJTsiPlNvbGRlPC90aD4KICAgICAgICAgICAgICAgICAgICA8L3RyPgogICAgICAgICAgICAgICAgPC90aGVhZD4KICAgICAgICAgICAgICAgIDx0Ym9keSBpZD0icmgtZGlzYy1ib2R5Ij48dHIgY2xhc3M9InJvdy1oZWFkZXIiPgogICAgICAgICAgICA8dGQgc3R5bGU9InRleHQtYWxpZ246bGVmdDsgZGlzcGxheTpmbGV4OyBhbGlnbi1pdGVtczpjZW50ZXI7ICI+RU1DIDxidXR0b24gY2xhc3M9ImJ0bi1hZGQtc3ViamVjdC10ZWFjaGVyIiBvbmNsaWNrPSJhZGRUZWFjaGVyVG9TdWJqZWN0KCdFTUMnKSIgc3R5bGU9ImJvcmRlcjoxcHggc29saWQgd2hpdGU7Ij4rPC9idXR0b24+PC90ZD4KICAgICAgICAgICAgPHRkIHN0eWxlPSJjb2xvcjojZjFjNDBmOyI+MS4wPC90ZD4KICAgICAgICAgICAgPHRkIHN0eWxlPSJjb2xvcjojODFkNGZhOyI+MC4wPC90ZD4KICAgICAgICAgICAgPHRkPjxzbWFsbD4wLjA8L3NtYWxsPjwvdGQ+CiAgICAgICAgICAgIDx0ZD48c21hbGw+MC4wPC9zbWFsbD48L3RkPgogICAgICAgICAgICA8dGQgc3R5bGU9ImNvbG9yOiNlNzRjM2MiPi0xLjA8L3RkPgogICAgICAgIDwvdHI+PHRyIGNsYXNzPSJyb3ctaGVhZGVyIj4KICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT0idGV4dC1hbGlnbjpsZWZ0OyBwYWRkaW5nLWxlZnQ6MTBweDsiPvCfk6YgUMOUTEUgRVBTPC90ZD4KICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT0iY29sb3I6I2YxYzQwZjsiPjcuMDwvdGQ+CiAgICAgICAgICAgICAgICA8dGQgc3R5bGU9ImNvbG9yOiM4MWQ0ZmE7Ij4wLjA8L3RkPgogICAgICAgICAgICAgICAgPHRkPjAuMDwvdGQ+CiAgICAgICAgICAgICAgICA8dGQ+MC4wPC90ZD4KICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT0iYmFja2dyb3VuZDojYzAzOTJiOyBjb2xvcjp3aGl0ZTsiPi03LjA8L3RkPgogICAgICAgICAgICA8L3RyPjx0ciBjbGFzcz0icm93LXN1Yi1tYXN0ZXIiPgogICAgICAgICAgICA8dGQgc3R5bGU9InRleHQtYWxpZ246bGVmdDsgZGlzcGxheTpmbGV4OyBhbGlnbi1pdGVtczpjZW50ZXI7IHBhZGRpbmctbGVmdDoyMHB4OyI+4oazIEVQUyA8YnV0dG9uIGNsYXNzPSJidG4tYWRkLXN1YmplY3QtdGVhY2hlciIgb25jbGljaz0iYWRkVGVhY2hlclRvU3ViamVjdCgnRVBTJykiIHN0eWxlPSIiPis8L2J1dHRvbj48L3RkPgogICAgICAgICAgICA8dGQgc3R5bGU9ImJhY2tncm91bmQ6I2ZjZjNjZjsgY29sb3I6I2QzNTQwMDsiPjQuMDwvdGQ+CiAgICAgICAgICAgIDx0ZCBzdHlsZT0iYmFja2dyb3VuZDojZDZlYWY4OyBjb2xvcjojMjk4MGI5OyI+MC4wPC90ZD4KICAgICAgICAgICAgPHRkPjxzbWFsbD4wLjA8L3NtYWxsPjwvdGQ+CiAgICAgICAgICAgIDx0ZD48c21hbGw+MC4wPC9zbWFsbD48L3RkPgogICAgICAgICAgICA8dGQgc3R5bGU9ImNvbG9yOnJlZCI+LTQuMDwvdGQ+CiAgICAgICAgPC90cj48dHIgY2xhc3M9InJvdy1zdWItbWFzdGVyIj4KICAgICAgICAgICAgPHRkIHN0eWxlPSJ0ZXh0LWFsaWduOmxlZnQ7IGRpc3BsYXk6ZmxleDsgYWxpZ24taXRlbXM6Y2VudGVyOyBwYWRkaW5nLWxlZnQ6MjBweDsiPuKGsyBVTlNTIDxidXR0b24gY2xhc3M9ImJ0bi1hZGQtc3ViamVjdC10ZWFjaGVyIiBvbmNsaWNrPSJhZGRUZWFjaGVyVG9TdWJqZWN0KCdVTlNTJykiIHN0eWxlPSIiPis8L2J1dHRvbj48L3RkPgogICAgICAgICAgICA8dGQgc3R5bGU9ImJhY2tncm91bmQ6I2ZjZjNjZjsgY29sb3I6I2QzNTQwMDsiPjMuMDwvdGQ+CiAgICAgICAgICAgIDx0ZCBzdHlsZT0iYmFja2dyb3VuZDojZDZlYWY4OyBjb2xvcjojMjk4MGI5OyI+MC4wPC90ZD4KICAgICAgICAgICAgPHRkPjxzbWFsbD4wLjA8L3NtYWxsPjwvdGQ+CiAgICAgICAgICAgIDx0ZD48c21hbGw+MC4wPC9zbWFsbD48L3RkPgogICAgICAgICAgICA8dGQgc3R5bGU9ImNvbG9yOnJlZCI+LTMuMDwvdGQ+CiAgICAgICAgPC90cj48dHIgY2xhc3M9InJvdy1oZWFkZXIiPgogICAgICAgICAgICA8dGQgc3R5bGU9InRleHQtYWxpZ246bGVmdDsgZGlzcGxheTpmbGV4OyBhbGlnbi1pdGVtczpjZW50ZXI7ICI+RW5zLiBTY2llbnRpZmlxdWUgPGJ1dHRvbiBjbGFzcz0iYnRuLWFkZC1zdWJqZWN0LXRlYWNoZXIiIG9uY2xpY2s9ImFkZFRlYWNoZXJUb1N1YmplY3QoJ0Vucy4gU2NpZW50aWZpcXVlJykiIHN0eWxlPSJib3JkZXI6MXB4IHNvbGlkIHdoaXRlOyI+KzwvYnV0dG9uPjwvdGQ+CiAgICAgICAgICAgIDx0ZCBzdHlsZT0iY29sb3I6I2YxYzQwZjsiPjIuMDwvdGQ+CiAgICAgICAgICAgIDx0ZCBzdHlsZT0iY29sb3I6IzgxZDRmYTsiPjAuMDwvdGQ+CiAgICAgICAgICAgIDx0ZD48c21hbGw+MC4wPC9zbWFsbD48L3RkPgogICAgICAgICAgICA8dGQ+PHNtYWxsPjAuMDwvc21hbGw+PC90ZD4KICAgICAgICAgICAgPHRkIHN0eWxlPSJjb2xvcjojZTc0YzNjIj4tMi4wPC90ZD4KICAgICAgICA8L3RyPjx0ciBjbGFzcz0icm93LWhlYWRlciI+CiAgICAgICAgICAgIDx0ZCBzdHlsZT0idGV4dC1hbGlnbjpsZWZ0OyBkaXNwbGF5OmZsZXg7IGFsaWduLWl0ZW1zOmNlbnRlcjsgIj5GcmFuw6dhaXMgPGJ1dHRvbiBjbGFzcz0iYnRuLWFkZC1zdWJqZWN0LXRlYWNoZXIiIG9uY2xpY2s9ImFkZFRlYWNoZXJUb1N1YmplY3QoJ0ZyYW7Dp2FpcycpIiBzdHlsZT0iYm9yZGVyOjFweCBzb2xpZCB3aGl0ZTsiPis8L2J1dHRvbj48L3RkPgogICAgICAgICAgICA8dGQgc3R5bGU9ImNvbG9yOiNmMWM0MGY7Ij44LjA8L3RkPgogICAgICAgICAgICA8dGQgc3R5bGU9ImNvbG9yOiM4MWQ0ZmE7Ij4wLjA8L3RkPgogICAgICAgICAgICA8dGQ+PHNtYWxsPjAuMDwvc21hbGw+PC90ZD4KICAgICAgICAgICAgPHRkPjxzbWFsbD4wLjA8L3NtYWxsPjwvdGQ+CiAgICAgICAgICAgIDx0ZCBzdHlsZT0iY29sb3I6I2U3NGMzYyI+LTguMDwvdGQ+CiAgICAgICAgPC90cj48dHIgY2xhc3M9InJvdy1oZWFkZXIiPgogICAgICAgICAgICA8dGQgc3R5bGU9InRleHQtYWxpZ246bGVmdDsgZGlzcGxheTpmbGV4OyBhbGlnbi1pdGVtczpjZW50ZXI7ICI+SGlzdC1Hw6lvIDxidXR0b24gY2xhc3M9ImJ0bi1hZGQtc3ViamVjdC10ZWFjaGVyIiBvbmNsaWNrPSJhZGRUZWFjaGVyVG9TdWJqZWN0KCdIaXN0LUfDqW8nKSIgc3R5bGU9ImJvcmRlcjoxcHggc29saWQgd2hpdGU7Ij4rPC9idXR0b24+PC90ZD4KICAgICAgICAgICAgPHRkIHN0eWxlPSJjb2xvcjojZjFjNDBmOyI+Ni4wPC90ZD4KICAgICAgICAgICAgPHRkIHN0eWxlPSJjb2xvcjojODFkNGZhOyI+MC4wPC90ZD4KICAgICAgICAgICAgPHRkPjxzbWFsbD4wLjA8L3NtYWxsPjwvdGQ+CiAgICAgICAgICAgIDx0ZD48c21hbGw+MC4wPC9zbWFsbD48L3RkPgogICAgICAgICAgICA8dGQgc3R5bGU9ImNvbG9yOiNlNzRjM2MiPi02LjA8L3RkPgogICAgICAgIDwvdHI+PHRyIGNsYXNzPSJyb3ctaGVhZGVyIj4KICAgICAgICAgICAgPHRkIHN0eWxlPSJ0ZXh0LWFsaWduOmxlZnQ7IGRpc3BsYXk6ZmxleDsgYWxpZ24taXRlbXM6Y2VudGVyOyAiPkxWQSA8YnV0dG9uIGNsYXNzPSJidG4tYWRkLXN1YmplY3QtdGVhY2hlciIgb25jbGljaz0iYWRkVGVhY2hlclRvU3ViamVjdCgnTFZBJykiIHN0eWxlPSJib3JkZXI6MXB4IHNvbGlkIHdoaXRlOyI+KzwvYnV0dG9uPjwvdGQ+CiAgICAgICAgICAgIDx0ZCBzdHlsZT0iY29sb3I6I2YxYzQwZjsiPjUuNTwvdGQ+CiAgICAgICAgICAgIDx0ZCBzdHlsZT0iY29sb3I6IzgxZDRmYTsiPjAuMDwvdGQ+CiAgICAgICAgICAgIDx0ZD48c21hbGw+MC4wPC9zbWFsbD48L3RkPgogICAgICAgICAgICA8dGQ+PHNtYWxsPjAuMDwvc21hbGw+PC90ZD4KICAgICAgICAgICAgPHRkIHN0eWxlPSJjb2xvcjojZTc0YzNjIj4tNS41PC90ZD4KICAgICAgICA8L3RyPjx0ciBjbGFzcz0icm93LWhlYWRlciI+CiAgICAgICAgICAgIDx0ZCBzdHlsZT0idGV4dC1hbGlnbjpsZWZ0OyBkaXNwbGF5OmZsZXg7IGFsaWduLWl0ZW1zOmNlbnRlcjsgIj5MVkIgPGJ1dHRvbiBjbGFzcz0iYnRuLWFkZC1zdWJqZWN0LXRlYWNoZXIiIG9uY2xpY2s9ImFkZFRlYWNoZXJUb1N1YmplY3QoJ0xWQicpIiBzdHlsZT0iYm9yZGVyOjFweCBzb2xpZCB3aGl0ZTsiPis8L2J1dHRvbj48L3RkPgogICAgICAgICAgICA8dGQgc3R5bGU9ImNvbG9yOiNmMWM0MGY7Ij40LjU8L3RkPgogICAgICAgICAgICA8dGQgc3R5bGU9ImNvbG9yOiM4MWQ0ZmE7Ij4wLjA8L3RkPgogICAgICAgICAgICA8dGQ+PHNtYWxsPjAuMDwvc21hbGw+PC90ZD4KICAgICAgICAgICAgPHRkPjxzbWFsbD4wLjA8L3NtYWxsPjwvdGQ+CiAgICAgICAgICAgIDx0ZCBzdHlsZT0iY29sb3I6I2U3NGMzYyI+LTQuNTwvdGQ+CiAgICAgICAgPC90cj48dHIgY2xhc3M9InJvdy1oZWFkZXIiPgogICAgICAgICAgICA8dGQgc3R5bGU9InRleHQtYWxpZ246bGVmdDsgZGlzcGxheTpmbGV4OyBhbGlnbi1pdGVtczpjZW50ZXI7ICI+TWF0aHMgKFRDKSA8YnV0dG9uIGNsYXNzPSJidG4tYWRkLXN1YmplY3QtdGVhY2hlciIgb25jbGljaz0iYWRkVGVhY2hlclRvU3ViamVjdCgnTWF0aHMgKFRDKScpIiBzdHlsZT0iYm9yZGVyOjFweCBzb2xpZCB3aGl0ZTsiPis8L2J1dHRvbj48L3RkPgogICAgICAgICAgICA8dGQgc3R5bGU9ImNvbG9yOiNmMWM0MGY7Ij40LjA8L3RkPgogICAgICAgICAgICA8dGQgc3R5bGU9ImNvbG9yOiM4MWQ0ZmE7Ij41NC4wPC90ZD4KICAgICAgICAgICAgPHRkPjxzbWFsbD41NC4wPC9zbWFsbD48L3RkPgogICAgICAgICAgICA8dGQ+PHNtYWxsPjAuMDwvc21hbGw+PC90ZD4KICAgICAgICAgICAgPHRkIHN0eWxlPSJjb2xvcjojMmVjYzcxIj41MC4wPC90ZD4KICAgICAgICA8L3RyPjx0ciBjbGFzcz0icm93LWRldGFpbCI+CiAgICAgICAgICAgICAgICA8dGQgc3R5bGU9InBhZGRpbmctbGVmdDozMHB4OyB0ZXh0LWFsaWduOmxlZnQ7IGRpc3BsYXk6ZmxleDsgYWxpZ24taXRlbXM6Y2VudGVyOyI+CiAgICAgICAgICAgICAgICAgICAgPHNwYW4gc3R5bGU9ImNvbG9yOiNiZGMzYzc7IG1hcmdpbi1yaWdodDo1cHg7Ij7ihrM8L3NwYW4+CiAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9InRleHQiIHZhbHVlPSJTQVVUT04iIG9uY2hhbmdlPSJ1cGRUKDAsJ25hbWUnLHRoaXMudmFsdWUpIiBzdHlsZT0iYm9yZGVyOm5vbmU7IGJvcmRlci1ib3R0b206MXB4IGRhc2hlZCAjYmRjM2M3OyBiYWNrZ3JvdW5kOnRyYW5zcGFyZW50OyB3aWR0aDoxNDBweDsgY29sb3I6IzJjM2U1MDsgZm9udC13ZWlnaHQ6NTAwOyIgcGxhY2Vob2xkZXI9Ik5vbSI+CiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBvbmNsaWNrPSJzZXRCTVAoMCkiIHN0eWxlPSJjdXJzb3I6cG9pbnRlcjsgYmFja2dyb3VuZDojMzQ0OTVlOyBjb2xvcjp3aGl0ZTsgYm9yZGVyOm5vbmU7IGJvcmRlci1yYWRpdXM6M3B4OyBwYWRkaW5nOjFweCA1cHg7IGZvbnQtc2l6ZTowLjY1cmVtOyBtYXJnaW4tbGVmdDo1cHg7IiB0aXRsZT0iRMOpZmluaXIgQk1QIj5CTVAgPzwvYnV0dG9uPiA8YnV0dG9uIG9uY2xpY2s9InNldENTRCgwKSIgc3R5bGU9ImN1cnNvcjpwb2ludGVyOyBiYWNrZ3JvdW5kOiMxN2EyYjg7IGNvbG9yOndoaXRlOyBib3JkZXI6bm9uZTsgYm9yZGVyLXJhZGl1czozcHg7IHBhZGRpbmc6MXB4IDVweDsgZm9udC1zaXplOjAuNjVyZW07IG1hcmdpbi1sZWZ0OjVweDsiIHRpdGxlPSJEw6lmaW5pciBDU0QiPkNTRCA/PC9idXR0b24+CiAgICAgICAgICAgICAgICAgICAgPHNwYW4gc3R5bGU9ImZvbnQtc2l6ZTowLjc1cmVtOyBjb2xvcjojOTk5OyBtYXJnaW4tbGVmdDo1cHg7Ij4oQ2VydGlmacOpKTwvc3Bhbj4KICAgICAgICAgICAgICAgIDwvdGQ+CiAgICAgICAgICAgICAgICA8dGQgY29sc3Bhbj0iMiI+PC90ZD4KICAgICAgICAgICAgICAgIDx0ZD4KICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0ibnVtYmVyIiBjbGFzcz0iaW5wdXQtaW5saW5lIiB2YWx1ZT0iMTgiIHN0ZXA9IjAuNSIgb25jaGFuZ2U9InVwZFQoMCwnb3JzJyx0aGlzLnZhbHVlKSI+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iZGlzcGxheTpmbGV4OyBmbGV4LWRpcmVjdGlvbjpjb2x1bW47IGFsaWduLWl0ZW1zOmNlbnRlcjsiPjwvZGl2PgogICAgICAgICAgICAgICAgPC90ZD4KICAgICAgICAgICAgICAgIDx0ZD48aW5wdXQgdHlwZT0ibnVtYmVyIiBjbGFzcz0iaW5wdXQtaW5saW5lIiB2YWx1ZT0iMCIgc3RlcD0iMC41IiBvbmNoYW5nZT0idXBkVCgwLCdoc2EnLHRoaXMudmFsdWUpIj48L3RkPgogICAgICAgICAgICAgICAgPHRkIHN0eWxlPSJmb250LXdlaWdodDpib2xkOyBjb2xvcjojN2Y4YzhkOyI+MTguMDwvdGQ+CiAgICAgICAgICAgIDwvdHI+PHRyIGNsYXNzPSJyb3ctZGV0YWlsIj4KICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT0icGFkZGluZy1sZWZ0OjMwcHg7IHRleHQtYWxpZ246bGVmdDsgZGlzcGxheTpmbGV4OyBhbGlnbi1pdGVtczpjZW50ZXI7Ij4KICAgICAgICAgICAgICAgICAgICA8c3BhbiBzdHlsZT0iY29sb3I6I2JkYzNjNzsgbWFyZ2luLXJpZ2h0OjVweDsiPuKGszwvc3Bhbj4KICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0idGV4dCIgdmFsdWU9Ik5vdXZlYXUiIG9uY2hhbmdlPSJ1cGRUKDEsJ25hbWUnLHRoaXMudmFsdWUpIiBzdHlsZT0iYm9yZGVyOm5vbmU7IGJvcmRlci1ib3R0b206MXB4IGRhc2hlZCAjYmRjM2M3OyBiYWNrZ3JvdW5kOnRyYW5zcGFyZW50OyB3aWR0aDoxNDBweDsgY29sb3I6IzJjM2U1MDsgZm9udC13ZWlnaHQ6NTAwOyIgcGxhY2Vob2xkZXI9Ik5vbSI+CiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBvbmNsaWNrPSJzZXRCTVAoMSkiIHN0eWxlPSJjdXJzb3I6cG9pbnRlcjsgYmFja2dyb3VuZDojMzQ0OTVlOyBjb2xvcjp3aGl0ZTsgYm9yZGVyOm5vbmU7IGJvcmRlci1yYWRpdXM6M3B4OyBwYWRkaW5nOjFweCA1cHg7IGZvbnQtc2l6ZTowLjY1cmVtOyBtYXJnaW4tbGVmdDo1cHg7IiB0aXRsZT0iRMOpZmluaXIgQk1QIj5CTVAgPzwvYnV0dG9uPiA8YnV0dG9uIG9uY2xpY2s9InNldENTRCgxKSIgc3R5bGU9ImN1cnNvcjpwb2ludGVyOyBiYWNrZ3JvdW5kOiMxN2EyYjg7IGNvbG9yOndoaXRlOyBib3JkZXI6bm9uZTsgYm9yZGVyLXJhZGl1czozcHg7IHBhZGRpbmc6MXB4IDVweDsgZm9udC1zaXplOjAuNjVyZW07IG1hcmdpbi1sZWZ0OjVweDsiIHRpdGxlPSJEw6lmaW5pciBDU0QiPkNTRCA/PC9idXR0b24+CiAgICAgICAgICAgICAgICAgICAgPHNwYW4gc3R5bGU9ImZvbnQtc2l6ZTowLjc1cmVtOyBjb2xvcjojOTk5OyBtYXJnaW4tbGVmdDo1cHg7Ij4oQ2VydGlmacOpKTwvc3Bhbj4KICAgICAgICAgICAgICAgIDwvdGQ+CiAgICAgICAgICAgICAgICA8dGQgY29sc3Bhbj0iMiI+PC90ZD4KICAgICAgICAgICAgICAgIDx0ZD4KICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0ibnVtYmVyIiBjbGFzcz0iaW5wdXQtaW5saW5lIiB2YWx1ZT0iMTgiIHN0ZXA9IjAuNSIgb25jaGFuZ2U9InVwZFQoMSwnb3JzJyx0aGlzLnZhbHVlKSI+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iZGlzcGxheTpmbGV4OyBmbGV4LWRpcmVjdGlvbjpjb2x1bW47IGFsaWduLWl0ZW1zOmNlbnRlcjsiPjwvZGl2PgogICAgICAgICAgICAgICAgPC90ZD4KICAgICAgICAgICAgICAgIDx0ZD48aW5wdXQgdHlwZT0ibnVtYmVyIiBjbGFzcz0iaW5wdXQtaW5saW5lIiB2YWx1ZT0iMCIgc3RlcD0iMC41IiBvbmNoYW5nZT0idXBkVCgxLCdoc2EnLHRoaXMudmFsdWUpIj48L3RkPgogICAgICAgICAgICAgICAgPHRkIHN0eWxlPSJmb250LXdlaWdodDpib2xkOyBjb2xvcjojN2Y4YzhkOyI+MTguMDwvdGQ+CiAgICAgICAgICAgIDwvdHI+PHRyIGNsYXNzPSJyb3ctZGV0YWlsIj4KICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT0icGFkZGluZy1sZWZ0OjMwcHg7IHRleHQtYWxpZ246bGVmdDsgZGlzcGxheTpmbGV4OyBhbGlnbi1pdGVtczpjZW50ZXI7Ij4KICAgICAgICAgICAgICAgICAgICA8c3BhbiBzdHlsZT0iY29sb3I6I2JkYzNjNzsgbWFyZ2luLXJpZ2h0OjVweDsiPuKGszwvc3Bhbj4KICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0idGV4dCIgdmFsdWU9Ik5vdXZlYXUiIG9uY2hhbmdlPSJ1cGRUKDIsJ25hbWUnLHRoaXMudmFsdWUpIiBzdHlsZT0iYm9yZGVyOm5vbmU7IGJvcmRlci1ib3R0b206MXB4IGRhc2hlZCAjYmRjM2M3OyBiYWNrZ3JvdW5kOnRyYW5zcGFyZW50OyB3aWR0aDoxNDBweDsgY29sb3I6IzJjM2U1MDsgZm9udC13ZWlnaHQ6NTAwOyIgcGxhY2Vob2xkZXI9Ik5vbSI+CiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBvbmNsaWNrPSJzZXRCTVAoMikiIHN0eWxlPSJjdXJzb3I6cG9pbnRlcjsgYmFja2dyb3VuZDojMzQ0OTVlOyBjb2xvcjp3aGl0ZTsgYm9yZGVyOm5vbmU7IGJvcmRlci1yYWRpdXM6M3B4OyBwYWRkaW5nOjFweCA1cHg7IGZvbnQtc2l6ZTowLjY1cmVtOyBtYXJnaW4tbGVmdDo1cHg7IiB0aXRsZT0iRMOpZmluaXIgQk1QIj5CTVAgPzwvYnV0dG9uPiA8YnV0dG9uIG9uY2xpY2s9InNldENTRCgyKSIgc3R5bGU9ImN1cnNvcjpwb2ludGVyOyBiYWNrZ3JvdW5kOiMxN2EyYjg7IGNvbG9yOndoaXRlOyBib3JkZXI6bm9uZTsgYm9yZGVyLXJhZGl1czozcHg7IHBhZGRpbmc6MXB4IDVweDsgZm9udC1zaXplOjAuNjVyZW07IG1hcmdpbi1sZWZ0OjVweDsiIHRpdGxlPSJEw6lmaW5pciBDU0QiPkNTRCA/PC9idXR0b24+CiAgICAgICAgICAgICAgICAgICAgPHNwYW4gc3R5bGU9ImZvbnQtc2l6ZTowLjc1cmVtOyBjb2xvcjojOTk5OyBtYXJnaW4tbGVmdDo1cHg7Ij4oQ2VydGlmacOpKTwvc3Bhbj4KICAgICAgICAgICAgICAgIDwvdGQ+CiAgICAgICAgICAgICAgICA8dGQgY29sc3Bhbj0iMiI+PC90ZD4KICAgICAgICAgICAgICAgIDx0ZD4KICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0ibnVtYmVyIiBjbGFzcz0iaW5wdXQtaW5saW5lIiB2YWx1ZT0iMTgiIHN0ZXA9IjAuNSIgb25jaGFuZ2U9InVwZFQoMiwnb3JzJyx0aGlzLnZhbHVlKSI+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iZGlzcGxheTpmbGV4OyBmbGV4LWRpcmVjdGlvbjpjb2x1bW47IGFsaWduLWl0ZW1zOmNlbnRlcjsiPjwvZGl2PgogICAgICAgICAgICAgICAgPC90ZD4KICAgICAgICAgICAgICAgIDx0ZD48aW5wdXQgdHlwZT0ibnVtYmVyIiBjbGFzcz0iaW5wdXQtaW5saW5lIiB2YWx1ZT0iMCIgc3RlcD0iMC41IiBvbmNoYW5nZT0idXBkVCgyLCdoc2EnLHRoaXMudmFsdWUpIj48L3RkPgogICAgICAgICAgICAgICAgPHRkIHN0eWxlPSJmb250LXdlaWdodDpib2xkOyBjb2xvcjojN2Y4YzhkOyI+MTguMDwvdGQ+CiAgICAgICAgICAgIDwvdHI+PHRyIGNsYXNzPSJyb3ctaGVhZGVyIj4KICAgICAgICAgICAgPHRkIHN0eWxlPSJ0ZXh0LWFsaWduOmxlZnQ7IGRpc3BsYXk6ZmxleDsgYWxpZ24taXRlbXM6Y2VudGVyOyAiPlBoeXMtQ2hpIChUQykgPGJ1dHRvbiBjbGFzcz0iYnRuLWFkZC1zdWJqZWN0LXRlYWNoZXIiIG9uY2xpY2s9ImFkZFRlYWNoZXJUb1N1YmplY3QoJ1BoeXMtQ2hpIChUQyknKSIgc3R5bGU9ImJvcmRlcjoxcHggc29saWQgd2hpdGU7Ij4rPC9idXR0b24+PC90ZD4KICAgICAgICAgICAgPHRkIHN0eWxlPSJjb2xvcjojZjFjNDBmOyI+My4wPC90ZD4KICAgICAgICAgICAgPHRkIHN0eWxlPSJjb2xvcjojODFkNGZhOyI+MC4wPC90ZD4KICAgICAgICAgICAgPHRkPjxzbWFsbD4wLjA8L3NtYWxsPjwvdGQ+CiAgICAgICAgICAgIDx0ZD48c21hbGw+MC4wPC9zbWFsbD48L3RkPgogICAgICAgICAgICA8dGQgc3R5bGU9ImNvbG9yOiNlNzRjM2MiPi0zLjA8L3RkPgogICAgICAgIDwvdHI+PHRyIGNsYXNzPSJyb3ctaGVhZGVyIj4KICAgICAgICAgICAgPHRkIHN0eWxlPSJ0ZXh0LWFsaWduOmxlZnQ7IGRpc3BsYXk6ZmxleDsgYWxpZ24taXRlbXM6Y2VudGVyOyAiPlNFUyA8YnV0dG9uIGNsYXNzPSJidG4tYWRkLXN1YmplY3QtdGVhY2hlciIgb25jbGljaz0iYWRkVGVhY2hlclRvU3ViamVjdCgnU0VTJykiIHN0eWxlPSJib3JkZXI6MXB4IHNvbGlkIHdoaXRlOyI+KzwvYnV0dG9uPjwvdGQ+CiAgICAgICAgICAgIDx0ZCBzdHlsZT0iY29sb3I6I2YxYzQwZjsiPjEuNTwvdGQ+CiAgICAgICAgICAgIDx0ZCBzdHlsZT0iY29sb3I6IzgxZDRmYTsiPjAuMDwvdGQ+CiAgICAgICAgICAgIDx0ZD48c21hbGw+MC4wPC9zbWFsbD48L3RkPgogICAgICAgICAgICA8dGQ+PHNtYWxsPjAuMDwvc21hbGw+PC90ZD4KICAgICAgICAgICAgPHRkIHN0eWxlPSJjb2xvcjojZTc0YzNjIj4tMS41PC90ZD4KICAgICAgICA8L3RyPjx0ciBjbGFzcz0icm93LWhlYWRlciI+CiAgICAgICAgICAgIDx0ZCBzdHlsZT0idGV4dC1hbGlnbjpsZWZ0OyBkaXNwbGF5OmZsZXg7IGFsaWduLWl0ZW1zOmNlbnRlcjsgIj5TVlQgKFRDKSA8YnV0dG9uIGNsYXNzPSJidG4tYWRkLXN1YmplY3QtdGVhY2hlciIgb25jbGljaz0iYWRkVGVhY2hlclRvU3ViamVjdCgnU1ZUIChUQyknKSIgc3R5bGU9ImJvcmRlcjoxcHggc29saWQgd2hpdGU7Ij4rPC9idXR0b24+PC90ZD4KICAgICAgICAgICAgPHRkIHN0eWxlPSJjb2xvcjojZjFjNDBmOyI+MS41PC90ZD4KICAgICAgICAgICAgPHRkIHN0eWxlPSJjb2xvcjojODFkNGZhOyI+MC4wPC90ZD4KICAgICAgICAgICAgPHRkPjxzbWFsbD4wLjA8L3NtYWxsPjwvdGQ+CiAgICAgICAgICAgIDx0ZD48c21hbGw+MC4wPC9zbWFsbD48L3RkPgogICAgICAgICAgICA8dGQgc3R5bGU9ImNvbG9yOiNlNzRjM2MiPi0xLjU8L3RkPgogICAgICAgIDwvdHI+PC90Ym9keT4KICAgICAgICAgICAgICAgIDx0Zm9vdCBpZD0icmgtZGlzYy10b3RhbCIgc3R5bGU9ImZvbnQtd2VpZ2h0OmJvbGQ7IGJhY2tncm91bmQ6I2VjZjBmMTsiPjx0cj48dGQ+VE9UQVVYIEfDiU7DiVJBVVg8L3RkPgogICAgICAgIDx0ZD40NC4wPC90ZD4KICAgICAgICA8dGQ+NTQuMDwvdGQ+CiAgICAgICAgPHRkPkhQOjU0LjA8L3RkPgogICAgICAgIDx0ZD5IU0E6MC4wPC90ZD4KICAgICAgICA8dGQgc3R5bGU9ImJhY2tncm91bmQ6dmFyKC0tc3VjY2Vzcyk7IGNvbG9yOndoaXRlOyI+MTAuMDwvdGQ+PC90cj48L3Rmb290PgogICAgICAgICAgICA8L3RhYmxlPgogICAgICAgIDwvZGl2PgogICAgPC9kaXY+CjwvZGl2PgoKPGRpdiBpZD0icHJvZmVzc2V1cnMiIGNsYXNzPSJzZWN0aW9uIj4KICAgIDxkaXYgY2xhc3M9ImNhcmQiPgogICAgICAgIDxkaXYgY2xhc3M9ImNhcmQtaGVhZGVyIj4KICAgIDxoMz5MaXN0ZSBkZXMgUHJvZmVzc2V1cnM8L2gzPgogICAgCiAgICA8ZGl2IGNsYXNzPSJleHBvcnQtZ3JvdXAiPgogICAgICAgIDxidXR0b24gY2xhc3M9ImJ0bi1leHAiIG9uY2xpY2s9ImV4cG9ydEN1cnJlbnRQYWdlKCdleGNlbCcpIj7wn5OKIEV4Y2VsPC9idXR0b24+CiAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYnRuLWV4cCIgb25jbGljaz0iZXhwb3J0Q3VycmVudFBhZ2UoJ3BkZicpIj7wn5OEIFBERjwvYnV0dG9uPgogICAgPC9kaXY+CgogICAgPGRpdiBzdHlsZT0iZGlzcGxheTpmbGV4OyBnYXA6OHB4OyBhbGlnbi1pdGVtczpjZW50ZXI7Ij4KICAgICAgICA8YnV0dG9uIGNsYXNzPSJidG4gYnRuLXNtIGJ0bi1vdXRsaW5lIiBpZD0iYnRuLXRvZ2dsZS1jb2RlcyIgb25jbGljaz0idG9nZ2xlUmhDb2RlcygpIiB0aXRsZT0iQWZmaWNoZXIvTWFzcXVlciBsZXMgY29kZXMgbWF0acOocmVzIj7wn5GB77iPIENvZGVzPC9idXR0b24+CiAgICAgICAgCiAgICAgICAgPGRpdiBzdHlsZT0id2lkdGg6MXB4OyBoZWlnaHQ6MjBweDsgYmFja2dyb3VuZDojZGRkOyBtYXJnaW46MCAycHg7Ij48L2Rpdj4KICAgICAgICAKICAgICAgICA8aW5wdXQgdHlwZT0iZmlsZSIgaWQ9ImltcG9ydC1yaC1pbnB1dC12NCIgYWNjZXB0PSIuY3N2LCAueGxzeCwgLnhscyIgc3R5bGU9ImRpc3BsYXk6bm9uZTsiIG9uY2hhbmdlPSJpbXBvcnRSSCh0aGlzKSI+CiAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYnRuIGJ0bi1kYXJrIGJ0bi1zbSIgb25jbGljaz0iZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ltcG9ydC1yaC1pbnB1dC12NCcpLmNsaWNrKCkiIHRpdGxlPSJJbXBvcnRlciBkZXB1aXMgRXhjZWwiPvCfk4IgSW1wb3J0PC9idXR0b24+CiAgICAgICAgCiAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYnRuIGJ0bi1kYW5nZXIgYnRuLXNtIiBvbmNsaWNrPSJjbGVhclRlYWNoZXJzKCkiIHRpdGxlPSJTdXBwcmltZXIgdG91cyBsZXMgcHJvZmVzc2V1cnMiPvCfl5HvuI8gVmlkZXI8L2J1dHRvbj4KICAgICAgICAKICAgICAgICA8YnV0dG9uIGNsYXNzPSJidG4gYnRuLXN1Y2Nlc3MgYnRuLXNtIiBvbmNsaWNrPSJvcGVuQXNzaWduVGVhY2hlck1vZGFsKCkiIHRpdGxlPSJBc3NpZ25lciB1biBlbnNlaWduYW50IGRlcHVpcyBsYSBsaXN0ZSBnbG9iYWxlIj7wn5OLIEFzc2lnbmVyPC9idXR0b24+CiAgICA8L2Rpdj4KPC9kaXY+CiAgICAgICAgPGRpdiBjbGFzcz0idGFibGUtY29udGFpbmVyIj4KICAgICAgICAgICAgPHRhYmxlIGNsYXNzPSJ0YWJsZSIgaWQ9InJoLXRhYmxlLWxpc3QiPgogICAgICAgICAgICAgICAgPHRoZWFkPgogICAgICAgICAgICAgICAgICAgIDx0cj4KICAgICAgICAgICAgICAgICAgICAgICAgPHRoIHN0eWxlPSJ3aWR0aDoyMiU7Ij5Ob208L3RoPgogICAgICAgICAgICAgICAgICAgICAgICA8dGggY2xhc3M9ImNvbC1jb2RlLWhlYWRlciIgc3R5bGU9IndpZHRoOjUlOyBkaXNwbGF5Om5vbmU7Ij5Db2RlPC90aD4KICAgICAgICAgICAgICAgICAgICAgICAgPHRoIHN0eWxlPSJ3aWR0aDoyMCU7Ij5EaXNjaXBsaW5lPC90aD4KICAgICAgICAgICAgICAgICAgICAgICAgPHRoIHN0eWxlPSJ3aWR0aDoyOCU7Ij7wn5SAIEVudGl0w6lzIChoIGFmZmVjdMOpZXMpPC90aD4KICAgICAgICAgICAgICAgICAgICAgICAgPHRoIHN0eWxlPSJ3aWR0aDozMCU7Ij5BY3Rpb25zPC90aD4KICAgICAgICAgICAgICAgICAgICA8L3RyPgogICAgICAgICAgICAgICAgPC90aGVhZD4KICAgICAgICAgICAgICAgIDx0Ym9keSBpZD0icmgtYm9keSI+PHRyIHN0eWxlPSIiPgogICAgICAgICAgICA8dGQgc3R5bGU9InZlcnRpY2FsLWFsaWduOm1pZGRsZTsiPjxpbnB1dCB0eXBlPSJ0ZXh0IiB2YWx1ZT0iTm91dmVhdSIgb25jaGFuZ2U9InVwZFQoMSwnbmFtZScsdGhpcy52YWx1ZSkiPjwvdGQ+CiAgICAgICAgICAgIAogICAgICAgICAgICA8dGQgc3R5bGU9InZlcnRpY2FsLWFsaWduOm1pZGRsZTsiPjxzZWxlY3Qgb25jaGFuZ2U9InVwZFQoMSwnc3ViamVjdCcsdGhpcy52YWx1ZSkiPjxvcHRpb24+RnJhbsOnYWlzPC9vcHRpb24+PG9wdGlvbj5QaGlsb3NvcGhpZTwvb3B0aW9uPjxvcHRpb24+SGlzdC1Hw6lvPC9vcHRpb24+PG9wdGlvbj5MVkE8L29wdGlvbj48b3B0aW9uPkxWQjwvb3B0aW9uPjxvcHRpb24+U0VTPC9vcHRpb24+PG9wdGlvbiBzZWxlY3RlZD0ic2VsZWN0ZWQiPk1hdGhzIChUQyk8L29wdGlvbj48b3B0aW9uPlBoeXMtQ2hpIChUQyk8L29wdGlvbj48b3B0aW9uPlNWVCAoVEMpPC9vcHRpb24+PG9wdGlvbj5FUFM8L29wdGlvbj48b3B0aW9uPkVucy4gU2NpZW50aWZpcXVlPC9vcHRpb24+PG9wdGlvbj5FTUM8L29wdGlvbj48b3B0aW9uPkF1dG9ub21pZSBFUExFPC9vcHRpb24+PG9wdGlvbj5VTlNTPC9vcHRpb24+PG9wdGlvbj5NQXRoczwvb3B0aW9uPjxvcHRpb24+U1RNRyAtIE1lcmNhdGlxdWUgKE1hcmtldGluZyk8L29wdGlvbj48b3B0aW9uPlNUTUcgLSBHZXN0aW9uIGV0IEZpbmFuY2U8L29wdGlvbj48b3B0aW9uPlNUTUcgLSBSZXNzb3VyY2VzIEh1bWFpbmVzIGV0IENvbW0uPC9vcHRpb24+PG9wdGlvbj5TVE1HIC0gU3lzdMOobWVzIGQnSW5mb3JtYXRpb24gZGUgR2VzdGlvbjwvb3B0aW9uPjwvc2VsZWN0PjwvdGQ+CiAgICAgICAgICAgIDx0ZCBzdHlsZT0idmVydGljYWwtYWxpZ246bWlkZGxlOyI+CiAgICAgICAgICAgICAgICA8c2VsZWN0IG9uY2hhbmdlPSJ1cGRUKDEsJ3N0YXR1cycsdGhpcy52YWx1ZSkiPgogICAgICAgICAgICAgICAgICAgIDxvcHRpb24gc2VsZWN0ZWQ9InNlbGVjdGVkIj5DZXJ0aWZpw6k8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICA8b3B0aW9uPkFncsOpZ8OpPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgPG9wdGlvbj5CTVAvQ1NSPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgPG9wdGlvbj5Db250cmFjdHVlbDwvb3B0aW9uPgogICAgICAgICAgICAgICAgPC9zZWxlY3Q+CiAgICAgICAgICAgIDwvdGQ+CiAgICAgICAgICAgIAogICAgICAgICAgICA8dGQgc3R5bGU9InZlcnRpY2FsLWFsaWduOm1pZGRsZTsiPgogICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iZGlzcGxheTpmbGV4OyBmbGV4LWRpcmVjdGlvbjpjb2x1bW47IGFsaWduLWl0ZW1zOmNlbnRlcjsiPgogICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJudW1iZXIiIHZhbHVlPSIxOCIgc3RlcD0iMC41IiBzdHlsZT0id2lkdGg6NjBweDsgdGV4dC1hbGlnbjpjZW50ZXI7IiBvbmNoYW5nZT0idXBkVCgxLCdvcnMnLHRoaXMudmFsdWUpIj4KICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8L3RkPgogICAgICAgICAgICAKICAgICAgICAgICAgPHRkIHN0eWxlPSJ2ZXJ0aWNhbC1hbGlnbjptaWRkbGU7Ij48aW5wdXQgdHlwZT0ibnVtYmVyIiB2YWx1ZT0iMCIgc3RlcD0iMC41IiBzdHlsZT0id2lkdGg6NjBweCIgb25jaGFuZ2U9InVwZFQoMSwnaHNhJyx0aGlzLnZhbHVlKSI+PC90ZD4KICAgICAgICAgICAgCiAgICAgICAgICAgIDx0ZCBzdHlsZT0iZm9udC13ZWlnaHQ6Ym9sZDsgY29sb3I6IzdmOGM4ZDsgdmVydGljYWwtYWxpZ246bWlkZGxlOyI+MTguMDwvdGQ+CiAgICAgICAgICAgIAogICAgICAgICAgICA8dGQgc3R5bGU9InZlcnRpY2FsLWFsaWduOm1pZGRsZTsgd2lkdGg6MjIwcHg7Ij4KICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9ImRpc3BsYXk6ZmxleDsganVzdGlmeS1jb250ZW50OmNlbnRlcjsgYWxpZ24taXRlbXM6Y2VudGVyOyBnYXA6NHB4OyBmbGV4LXdyYXA6d3JhcDsiPgogICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJidG4gYnRuLXNtIiBzdHlsZT0iYmFja2dyb3VuZDojMzQ0OTVlOyBjb2xvcjp3aGl0ZTsgcGFkZGluZzoycHggNXB4OyBtYXJnaW46MDsgZm9udC1zaXplOjAuN3JlbTsiIG9uY2xpY2s9InNldEJNUCgxKSIgdGl0bGU9IkTDqWZpbmlyIGNvbW1lIEJNUCI+Qk1QPC9idXR0b24+IDxidXR0b24gY2xhc3M9ImJ0biBidG4tc20iIHN0eWxlPSJiYWNrZ3JvdW5kOiM5YjU5YjY7IGNvbG9yOndoaXRlOyBwYWRkaW5nOjJweCA1cHg7IG1hcmdpbjowOyBmb250LXNpemU6MC43cmVtOyIgb25jbGljaz0ib3BlbkRlY2hhcmdlTWVudSgxKSIgdGl0bGU9IkTDqWNoYXJnZSI+RMOpY2guPC9idXR0b24+IDxidXR0b24gY2xhc3M9ImJ0biBidG4tc20iIHN0eWxlPSJiYWNrZ3JvdW5kOiMxN2EyYjg7IGNvbG9yOndoaXRlOyBwYWRkaW5nOjJweCA1cHg7IG1hcmdpbjowOyBmb250LXNpemU6MC43cmVtOyIgb25jbGljaz0ic2V0Q1NEKDEpIiB0aXRsZT0iQ1NEIj5DU0Q8L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJidG4gYnRuLWRhbmdlciBidG4tc20iIHN0eWxlPSJwYWRkaW5nOjJweCA1cHg7IG1hcmdpbjowOyBmb250LXNpemU6MC43cmVtOyIgb25jbGljaz0iZGVsVCgxKSI+WDwvYnV0dG9uPgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDwvdGQ+CiAgICAgICAgPC90cj48dHIgc3R5bGU9IiI+CiAgICAgICAgICAgIDx0ZCBzdHlsZT0idmVydGljYWwtYWxpZ246bWlkZGxlOyI+PGlucHV0IHR5cGU9InRleHQiIHZhbHVlPSJOb3V2ZWF1IiBvbmNoYW5nZT0idXBkVCgyLCduYW1lJyx0aGlzLnZhbHVlKSI+PC90ZD4KICAgICAgICAgICAgCiAgICAgICAgICAgIDx0ZCBzdHlsZT0idmVydGljYWwtYWxpZ246bWlkZGxlOyI+PHNlbGVjdCBvbmNoYW5nZT0idXBkVCgyLCdzdWJqZWN0Jyx0aGlzLnZhbHVlKSI+PG9wdGlvbj5GcmFuw6dhaXM8L29wdGlvbj48b3B0aW9uPlBoaWxvc29waGllPC9vcHRpb24+PG9wdGlvbj5IaXN0LUfDqW88L29wdGlvbj48b3B0aW9uPkxWQTwvb3B0aW9uPjxvcHRpb24+TFZCPC9vcHRpb24+PG9wdGlvbj5TRVM8L29wdGlvbj48b3B0aW9uIHNlbGVjdGVkPSJzZWxlY3RlZCI+TWF0aHMgKFRDKTwvb3B0aW9uPjxvcHRpb24+UGh5cy1DaGkgKFRDKTwvb3B0aW9uPjxvcHRpb24+U1ZUIChUQyk8L29wdGlvbj48b3B0aW9uPkVQUzwvb3B0aW9uPjxvcHRpb24+RW5zLiBTY2llbnRpZmlxdWU8L29wdGlvbj48b3B0aW9uPkVNQzwvb3B0aW9uPjxvcHRpb24+QXV0b25vbWllIEVQTEU8L29wdGlvbj48b3B0aW9uPlVOU1M8L29wdGlvbj48b3B0aW9uPk1BdGhzPC9vcHRpb24+PG9wdGlvbj5TVE1HIC0gTWVyY2F0aXF1ZSAoTWFya2V0aW5nKTwvb3B0aW9uPjxvcHRpb24+U1RNRyAtIEdlc3Rpb24gZXQgRmluYW5jZTwvb3B0aW9uPjxvcHRpb24+U1RNRyAtIFJlc3NvdXJjZXMgSHVtYWluZXMgZXQgQ29tbS48L29wdGlvbj48b3B0aW9uPlNUTUcgLSBTeXN0w6htZXMgZCdJbmZvcm1hdGlvbiBkZSBHZXN0aW9uPC9vcHRpb24+PC9zZWxlY3Q+PC90ZD4KICAgICAgICAgICAgPHRkIHN0eWxlPSJ2ZXJ0aWNhbC1hbGlnbjptaWRkbGU7Ij4KICAgICAgICAgICAgICAgIDxzZWxlY3Qgb25jaGFuZ2U9InVwZFQoMiwnc3RhdHVzJyx0aGlzLnZhbHVlKSI+CiAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiBzZWxlY3RlZD0ic2VsZWN0ZWQiPkNlcnRpZmnDqTwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgIDxvcHRpb24+QWdyw6lnw6k8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICA8b3B0aW9uPkJNUC9DU1I8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICA8b3B0aW9uPkNvbnRyYWN0dWVsPC9vcHRpb24+CiAgICAgICAgICAgICAgICA8L3NlbGVjdD4KICAgICAgICAgICAgPC90ZD4KICAgICAgICAgICAgCiAgICAgICAgICAgIDx0ZCBzdHlsZT0idmVydGljYWwtYWxpZ246bWlkZGxlOyI+CiAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJkaXNwbGF5OmZsZXg7IGZsZXgtZGlyZWN0aW9uOmNvbHVtbjsgYWxpZ24taXRlbXM6Y2VudGVyOyI+CiAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9Im51bWJlciIgdmFsdWU9IjE4IiBzdGVwPSIwLjUiIHN0eWxlPSJ3aWR0aDo2MHB4OyB0ZXh0LWFsaWduOmNlbnRlcjsiIG9uY2hhbmdlPSJ1cGRUKDIsJ29ycycsdGhpcy52YWx1ZSkiPgogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDwvdGQ+CiAgICAgICAgICAgIAogICAgICAgICAgICA8dGQgc3R5bGU9InZlcnRpY2FsLWFsaWduOm1pZGRsZTsiPjxpbnB1dCB0eXBlPSJudW1iZXIiIHZhbHVlPSIwIiBzdGVwPSIwLjUiIHN0eWxlPSJ3aWR0aDo2MHB4IiBvbmNoYW5nZT0idXBkVCgyLCdoc2EnLHRoaXMudmFsdWUpIj48L3RkPgogICAgICAgICAgICAKICAgICAgICAgICAgPHRkIHN0eWxlPSJmb250LXdlaWdodDpib2xkOyBjb2xvcjojN2Y4YzhkOyB2ZXJ0aWNhbC1hbGlnbjptaWRkbGU7Ij4xOC4wPC90ZD4KICAgICAgICAgICAgCiAgICAgICAgICAgIDx0ZCBzdHlsZT0idmVydGljYWwtYWxpZ246bWlkZGxlOyB3aWR0aDoyMjBweDsiPgogICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iZGlzcGxheTpmbGV4OyBqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyOyBhbGlnbi1pdGVtczpjZW50ZXI7IGdhcDo0cHg7IGZsZXgtd3JhcDp3cmFwOyI+CiAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImJ0biBidG4tc20iIHN0eWxlPSJiYWNrZ3JvdW5kOiMzNDQ5NWU7IGNvbG9yOndoaXRlOyBwYWRkaW5nOjJweCA1cHg7IG1hcmdpbjowOyBmb250LXNpemU6MC43cmVtOyIgb25jbGljaz0ic2V0Qk1QKDIpIiB0aXRsZT0iRMOpZmluaXIgY29tbWUgQk1QIj5CTVA8L2J1dHRvbj4gPGJ1dHRvbiBjbGFzcz0iYnRuIGJ0bi1zbSIgc3R5bGU9ImJhY2tncm91bmQ6IzliNTliNjsgY29sb3I6d2hpdGU7IHBhZGRpbmc6MnB4IDVweDsgbWFyZ2luOjA7IGZvbnQtc2l6ZTowLjdyZW07IiBvbmNsaWNrPSJvcGVuRGVjaGFyZ2VNZW51KDIpIiB0aXRsZT0iRMOpY2hhcmdlIj5Ew6ljaC48L2J1dHRvbj4gPGJ1dHRvbiBjbGFzcz0iYnRuIGJ0bi1zbSIgc3R5bGU9ImJhY2tncm91bmQ6IzE3YTJiODsgY29sb3I6d2hpdGU7IHBhZGRpbmc6MnB4IDVweDsgbWFyZ2luOjA7IGZvbnQtc2l6ZTowLjdyZW07IiBvbmNsaWNrPSJzZXRDU0QoMikiIHRpdGxlPSJDU0QiPkNTRDwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImJ0biBidG4tZGFuZ2VyIGJ0bi1zbSIgc3R5bGU9InBhZGRpbmc6MnB4IDVweDsgbWFyZ2luOjA7IGZvbnQtc2l6ZTowLjdyZW07IiBvbmNsaWNrPSJkZWxUKDIpIj5YPC9idXR0b24+CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPC90ZD4KICAgICAgICA8L3RyPjx0ciBzdHlsZT0iIj4KICAgICAgICAgICAgPHRkIHN0eWxlPSJ2ZXJ0aWNhbC1hbGlnbjptaWRkbGU7Ij48aW5wdXQgdHlwZT0idGV4dCIgdmFsdWU9IlNBVVRPTiIgb25jaGFuZ2U9InVwZFQoMCwnbmFtZScsdGhpcy52YWx1ZSkiPjwvdGQ+CiAgICAgICAgICAgIAogICAgICAgICAgICA8dGQgc3R5bGU9InZlcnRpY2FsLWFsaWduOm1pZGRsZTsiPjxzZWxlY3Qgb25jaGFuZ2U9InVwZFQoMCwnc3ViamVjdCcsdGhpcy52YWx1ZSkiPjxvcHRpb24+RnJhbsOnYWlzPC9vcHRpb24+PG9wdGlvbj5QaGlsb3NvcGhpZTwvb3B0aW9uPjxvcHRpb24+SGlzdC1Hw6lvPC9vcHRpb24+PG9wdGlvbj5MVkE8L29wdGlvbj48b3B0aW9uPkxWQjwvb3B0aW9uPjxvcHRpb24+U0VTPC9vcHRpb24+PG9wdGlvbiBzZWxlY3RlZD0ic2VsZWN0ZWQiPk1hdGhzIChUQyk8L29wdGlvbj48b3B0aW9uPlBoeXMtQ2hpIChUQyk8L29wdGlvbj48b3B0aW9uPlNWVCAoVEMpPC9vcHRpb24+PG9wdGlvbj5FUFM8L29wdGlvbj48b3B0aW9uPkVucy4gU2NpZW50aWZpcXVlPC9vcHRpb24+PG9wdGlvbj5FTUM8L29wdGlvbj48b3B0aW9uPkF1dG9ub21pZSBFUExFPC9vcHRpb24+PG9wdGlvbj5VTlNTPC9vcHRpb24+PG9wdGlvbj5NQXRoczwvb3B0aW9uPjxvcHRpb24+U1RNRyAtIE1lcmNhdGlxdWUgKE1hcmtldGluZyk8L29wdGlvbj48b3B0aW9uPlNUTUcgLSBHZXN0aW9uIGV0IEZpbmFuY2U8L29wdGlvbj48b3B0aW9uPlNUTUcgLSBSZXNzb3VyY2VzIEh1bWFpbmVzIGV0IENvbW0uPC9vcHRpb24+PG9wdGlvbj5TVE1HIC0gU3lzdMOobWVzIGQnSW5mb3JtYXRpb24gZGUgR2VzdGlvbjwvb3B0aW9uPjwvc2VsZWN0PjwvdGQ+CiAgICAgICAgICAgIDx0ZCBzdHlsZT0idmVydGljYWwtYWxpZ246bWlkZGxlOyI+CiAgICAgICAgICAgICAgICA8c2VsZWN0IG9uY2hhbmdlPSJ1cGRUKDAsJ3N0YXR1cycsdGhpcy52YWx1ZSkiPgogICAgICAgICAgICAgICAgICAgIDxvcHRpb24gc2VsZWN0ZWQ9InNlbGVjdGVkIj5DZXJ0aWZpw6k8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICA8b3B0aW9uPkFncsOpZ8OpPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgPG9wdGlvbj5CTVAvQ1NSPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgPG9wdGlvbj5Db250cmFjdHVlbDwvb3B0aW9uPgogICAgICAgICAgICAgICAgPC9zZWxlY3Q+CiAgICAgICAgICAgIDwvdGQ+CiAgICAgICAgICAgIAogICAgICAgICAgICA8dGQgc3R5bGU9InZlcnRpY2FsLWFsaWduOm1pZGRsZTsiPgogICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iZGlzcGxheTpmbGV4OyBmbGV4LWRpcmVjdGlvbjpjb2x1bW47IGFsaWduLWl0ZW1zOmNlbnRlcjsiPgogICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJudW1iZXIiIHZhbHVlPSIxOCIgc3RlcD0iMC41IiBzdHlsZT0id2lkdGg6NjBweDsgdGV4dC1hbGlnbjpjZW50ZXI7IiBvbmNoYW5nZT0idXBkVCgwLCdvcnMnLHRoaXMudmFsdWUpIj4KICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8L3RkPgogICAgICAgICAgICAKICAgICAgICAgICAgPHRkIHN0eWxlPSJ2ZXJ0aWNhbC1hbGlnbjptaWRkbGU7Ij48aW5wdXQgdHlwZT0ibnVtYmVyIiB2YWx1ZT0iMCIgc3RlcD0iMC41IiBzdHlsZT0id2lkdGg6NjBweCIgb25jaGFuZ2U9InVwZFQoMCwnaHNhJyx0aGlzLnZhbHVlKSI+PC90ZD4KICAgICAgICAgICAgCiAgICAgICAgICAgIDx0ZCBzdHlsZT0iZm9udC13ZWlnaHQ6Ym9sZDsgY29sb3I6IzdmOGM4ZDsgdmVydGljYWwtYWxpZ246bWlkZGxlOyI+MTguMDwvdGQ+CiAgICAgICAgICAgIAogICAgICAgICAgICA8dGQgc3R5bGU9InZlcnRpY2FsLWFsaWduOm1pZGRsZTsgd2lkdGg6MjIwcHg7Ij4KICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9ImRpc3BsYXk6ZmxleDsganVzdGlmeS1jb250ZW50OmNlbnRlcjsgYWxpZ24taXRlbXM6Y2VudGVyOyBnYXA6NHB4OyBmbGV4LXdyYXA6d3JhcDsiPgogICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJidG4gYnRuLXNtIiBzdHlsZT0iYmFja2dyb3VuZDojMzQ0OTVlOyBjb2xvcjp3aGl0ZTsgcGFkZGluZzoycHggNXB4OyBtYXJnaW46MDsgZm9udC1zaXplOjAuN3JlbTsiIG9uY2xpY2s9InNldEJNUCgwKSIgdGl0bGU9IkTDqWZpbmlyIGNvbW1lIEJNUCI+Qk1QPC9idXR0b24+IDxidXR0b24gY2xhc3M9ImJ0biBidG4tc20iIHN0eWxlPSJiYWNrZ3JvdW5kOiM5YjU5YjY7IGNvbG9yOndoaXRlOyBwYWRkaW5nOjJweCA1cHg7IG1hcmdpbjowOyBmb250LXNpemU6MC43cmVtOyIgb25jbGljaz0ib3BlbkRlY2hhcmdlTWVudSgwKSIgdGl0bGU9IkTDqWNoYXJnZSI+RMOpY2guPC9idXR0b24+IDxidXR0b24gY2xhc3M9ImJ0biBidG4tc20iIHN0eWxlPSJiYWNrZ3JvdW5kOiMxN2EyYjg7IGNvbG9yOndoaXRlOyBwYWRkaW5nOjJweCA1cHg7IG1hcmdpbjowOyBmb250LXNpemU6MC43cmVtOyIgb25jbGljaz0ic2V0Q1NEKDApIiB0aXRsZT0iQ1NEIj5DU0Q8L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJidG4gYnRuLWRhbmdlciBidG4tc20iIHN0eWxlPSJwYWRkaW5nOjJweCA1cHg7IG1hcmdpbjowOyBmb250LXNpemU6MC43cmVtOyIgb25jbGljaz0iZGVsVCgwKSI+WDwvYnV0dG9uPgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDwvdGQ+CiAgICAgICAgPC90cj48L3Rib2R5PgogICAgICAgICAgICA8L3RhYmxlPgogICAgICAgIDwvZGl2PgogICAgPC9kaXY+CjwvZGl2PgoKPGRpdiBpZD0iZWRzIiBjbGFzcz0ic2VjdGlvbiI+CiAgICA8ZGl2IGNsYXNzPSJjYXJkIj4KICAgICAgICA8ZGl2IGNsYXNzPSJjYXJkLWhlYWRlciI+CiAgICAgICAgICAgIDxoMz5QaWxvdGFnZSBkZXMgU3DDqWNpYWxpdMOpcyAoRURTKTwvaDM+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImV4cG9ydC1ncm91cCI+CiAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJidG4gYnRuLXB1cnBsZSBidG4tc20iIG9uY2xpY2s9InRyYW5zZmVyRURTKCdwcmVtaWVyZScsICd0ZXJtaW5hbGUnKSI+8J+agCBCYXNjdWxlciAxw6hyZSDinpQgVGVybTwvYnV0dG9uPgogICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYnRuIGJ0bi1kYXJrIGJ0bi1zbSIgb25jbGljaz0idHJhbnNmZXJFRFMoJ3Rlcm1pbmFsZScsICdwcmVtaWVyZScpIj7ihqnvuI8gQmFzY3VsZXIgVGVybSDinpQgMcOocmU8L2J1dHRvbj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgPC9kaXY+CiAgICAgICAgCiAgICAgICAgPGRpdiBjbGFzcz0iY2FyZCIgc3R5bGU9ImJvcmRlci10b3A6IDVweCBzb2xpZCB2YXIoLS1zZWNvbmRhcnkpOyBiYWNrZ3JvdW5kOiAjZmRmZWZlOyBtYXJnaW4tYm90dG9tOiAzMHB4OyI+CiAgICAgICAgICAgIDxkaXYgc3R5bGU9ImRpc3BsYXk6ZmxleDsganVzdGlmeS1jb250ZW50OnNwYWNlLWJldHdlZW47IGFsaWduLWl0ZW1zOmNlbnRlcjsgbWFyZ2luLWJvdHRvbToxNXB4OyI+CiAgICAgICAgICAgICAgICA8aDQgc3R5bGU9Im1hcmdpbjowOyBjb2xvcjp2YXIoLS1zZWNvbmRhcnkpOyI+Tml2ZWF1IFBSRU1Jw4hSRTwvaDQ+CiAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJiYWNrZ3JvdW5kOnZhcigtLXNlY29uZGFyeSk7IGNvbG9yOndoaXRlOyBwYWRkaW5nOjVweCAxNXB4OyBib3JkZXItcmFkaXVzOjIwcHg7IGZvbnQtd2VpZ2h0OmJvbGQ7Ij4KICAgICAgICAgICAgICAgICAgICBUb3RhbCBOaXZlYXUgOiA8c3BhbiBpZD0idG90YWwtZWRzLTFlcmUiPjAuMDwvc3Bhbj4gaAogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAKICAgICAgICAgICAgPHRhYmxlIGNsYXNzPSJ0YWJsZS1lZHMiPgogICAgICAgICAgICAgICAgPHRoZWFkPgogICAgICAgICAgICAgICAgICAgIDx0cj4KICAgICAgICAgICAgICAgICAgICA8dHI+CiAgICAgICAgICAgICAgICAgICAgICAgIDx0aCBzdHlsZT0idGV4dC1hbGlnbjpsZWZ0OyB3aWR0aDoyMiU7Ij5TcMOpY2lhbGl0w6k8L3RoPgogICAgICAgICAgICAgICAgICAgICAgICA8dGggc3R5bGU9IndpZHRoOjglOyI+RWZmZWN0aWY8L3RoPgogICAgICAgICAgICAgICAgICAgICAgICA8dGggc3R5bGU9IndpZHRoOjglOyI+R3JvdXBlczwvdGg+CiAgICAgICAgICAgICAgICAgICAgICAgIDx0aCBzdHlsZT0id2lkdGg6OCU7Ij5IIC8gR3IuPC90aD4KICAgICAgICAgICAgICAgICAgICAgICAgPHRoIHRpdGxlPSJDb2VmZmljaWVudCBkZSBwb25kw6lyYXRpb24gYXBwbGlxdcOpIGF1eCBoZXVyZXMgRURTIGRhbnMgbGUgY2FsY3VsIGR1IGJlc29pbiBESEciIHN0eWxlPSJ3aWR0aDo3JTsgY29sb3I6IzhlNDRhZDsgY3Vyc29yOmhlbHA7Ij5Qb25kLiDinLE8L3RoPgogICAgICAgICAgICAgICAgICAgICAgICA8dGggc3R5bGU9IndpZHRoOjglOyI+w4lsLiAvIEdyLjwvdGg+CiAgICAgICAgICAgICAgICAgICAgICAgIDx0aCBzdHlsZT0id2lkdGg6OSU7Ij5Db8O7dCBIL8OJbC48L3RoPgogICAgICAgICAgICAgICAgICAgICAgICA8dGggc3R5bGU9IndpZHRoOjIyJTsgY29sb3I6IzhlNDRhZDsiPvCfkaQgRW5zZWlnbmFudChzKTwvdGg+CiAgICAgICAgICAgICAgICAgICAgICAgIDx0aCBzdHlsZT0id2lkdGg6NSU7Ij48L3RoPgogICAgICAgICAgICAgICAgICAgIDwvdHI+CiAgICAgICAgICAgICAgICA8L3RoZWFkPgogICAgICAgICAgICAgICAgPHRib2R5IGlkPSJlZHMtZnVsbC0xZXJlIj48dHI+PHRkIGNvbHNwYW49IjciIGNsYXNzPSJlZHMtY2F0LWhlYWRlciI+RURTIFRFQ0hOT0xPR0lRVUVTPC90ZD48L3RyPgogICAgICAgICAgICAgICAgICAgIDx0cj4KICAgICAgICAgICAgICAgICAgICAgICAgPHRkIHN0eWxlPSJ0ZXh0LWFsaWduOmxlZnQ7IGZvbnQtd2VpZ2h0OmJvbGQ7IGZvbnQtc2l6ZTowLjlyZW07Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJiYWRnZS1jYXQiPlRFQ0g8L3NwYW4+U1RNRyAtIEdlc3Rpb24gZXQgRmluYW5jZQogICAgICAgICAgICAgICAgICAgICAgICA8L3RkPgogICAgICAgICAgICAgICAgICAgICAgICA8dGQ+PGlucHV0IHR5cGU9Im51bWJlciIgdmFsdWU9IjAiIGNsYXNzPSJpbnB1dC1pbmxpbmUtZWRzIiBvbmNoYW5nZT0idXBkRURTKCdwcmVtaWVyZScsIDEsICdzdHVkZW50cycsIHRoaXMudmFsdWUpIj48L3RkPgogICAgICAgICAgICAgICAgICAgICAgICA8dGQ+PGlucHV0IHR5cGU9Im51bWJlciIgdmFsdWU9IjAiIGNsYXNzPSJpbnB1dC1pbmxpbmUtZWRzIiBzdHlsZT0iYm9yZGVyLWNvbG9yOnZhcigtLXNlY29uZGFyeSkiIG9uY2hhbmdlPSJ1cGRFRFMoJ3ByZW1pZXJlJywgMSwgJ2dyb3VwcycsIHRoaXMudmFsdWUpIj48L3RkPgogICAgICAgICAgICAgICAgICAgICAgICA8dGQ+PGlucHV0IHR5cGU9Im51bWJlciIgdmFsdWU9IjQiIGNsYXNzPSJpbnB1dC1pbmxpbmUtZWRzIiBzdHlsZT0iYm9yZGVyLWNvbG9yOnZhcigtLWFjY2VudCkiIG9uY2hhbmdlPSJ1cGRFRFMoJ3ByZW1pZXJlJywgMSwgJ2hQZXJHcm91cCcsIHRoaXMudmFsdWUpIj48L3RkPgogICAgICAgICAgICAgICAgICAgICAgICA8dGQgY2xhc3M9InRleHQtd2FybmluZyIgc3R5bGU9ImZvbnQtd2VpZ2h0OmJvbGQ7IGZvbnQtc2l6ZToxLjFyZW07Ij4wPC90ZD4KICAgICAgICAgICAgICAgICAgICAgICAgPHRkPjxzcGFuIGNsYXNzPSJjb3N0LWJhZGdlIj4wIGgvw6lsLjwvc3Bhbj48L3RkPgogICAgICAgICAgICAgICAgICAgICAgICA8dGQ+PGJ1dHRvbiBvbmNsaWNrPSJkZWxFRFMoJ3ByZW1pZXJlJywgMSkiIHN0eWxlPSJib3JkZXI6bm9uZTsgYmFja2dyb3VuZDpub25lOyBjb2xvcjojYzAzOTJiOyBjdXJzb3I6cG9pbnRlcjsgZm9udC1zaXplOjEuMnJlbTsiPsOXPC9idXR0b24+PC90ZD4KICAgICAgICAgICAgICAgICAgICA8L3RyPgogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgPHRyPgogICAgICAgICAgICAgICAgICAgICAgICA8dGQgc3R5bGU9InRleHQtYWxpZ246bGVmdDsgZm9udC13ZWlnaHQ6Ym9sZDsgZm9udC1zaXplOjAuOXJlbTsiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9ImJhZGdlLWNhdCI+VEVDSDwvc3Bhbj5TVE1HIC0gTWVyY2F0aXF1ZSAoTWFya2V0aW5nKQogICAgICAgICAgICAgICAgICAgICAgICA8L3RkPgogICAgICAgICAgICAgICAgICAgICAgICA8dGQ+PGlucHV0IHR5cGU9Im51bWJlciIgdmFsdWU9IjAiIGNsYXNzPSJpbnB1dC1pbmxpbmUtZWRzIiBvbmNoYW5nZT0idXBkRURTKCdwcmVtaWVyZScsIDAsICdzdHVkZW50cycsIHRoaXMudmFsdWUpIj48L3RkPgogICAgICAgICAgICAgICAgICAgICAgICA8dGQ+PGlucHV0IHR5cGU9Im51bWJlciIgdmFsdWU9IjAiIGNsYXNzPSJpbnB1dC1pbmxpbmUtZWRzIiBzdHlsZT0iYm9yZGVyLWNvbG9yOnZhcigtLXNlY29uZGFyeSkiIG9uY2hhbmdlPSJ1cGRFRFMoJ3ByZW1pZXJlJywgMCwgJ2dyb3VwcycsIHRoaXMudmFsdWUpIj48L3RkPgogICAgICAgICAgICAgICAgICAgICAgICA8dGQ+PGlucHV0IHR5cGU9Im51bWJlciIgdmFsdWU9IjQiIGNsYXNzPSJpbnB1dC1pbmxpbmUtZWRzIiBzdHlsZT0iYm9yZGVyLWNvbG9yOnZhcigtLWFjY2VudCkiIG9uY2hhbmdlPSJ1cGRFRFMoJ3ByZW1pZXJlJywgMCwgJ2hQZXJHcm91cCcsIHRoaXMudmFsdWUpIj48L3RkPgogICAgICAgICAgICAgICAgICAgICAgICA8dGQgY2xhc3M9InRleHQtd2FybmluZyIgc3R5bGU9ImZvbnQtd2VpZ2h0OmJvbGQ7IGZvbnQtc2l6ZToxLjFyZW07Ij4wPC90ZD4KICAgICAgICAgICAgICAgICAgICAgICAgPHRkPjxzcGFuIGNsYXNzPSJjb3N0LWJhZGdlIj4wIGgvw6lsLjwvc3Bhbj48L3RkPgogICAgICAgICAgICAgICAgICAgICAgICA8dGQ+PGJ1dHRvbiBvbmNsaWNrPSJkZWxFRFMoJ3ByZW1pZXJlJywgMCkiIHN0eWxlPSJib3JkZXI6bm9uZTsgYmFja2dyb3VuZDpub25lOyBjb2xvcjojYzAzOTJiOyBjdXJzb3I6cG9pbnRlcjsgZm9udC1zaXplOjEuMnJlbTsiPsOXPC9idXR0b24+PC90ZD4KICAgICAgICAgICAgICAgICAgICA8L3RyPgogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgPHRyPgogICAgICAgICAgICAgICAgICAgICAgICA8dGQgc3R5bGU9InRleHQtYWxpZ246bGVmdDsgZm9udC13ZWlnaHQ6Ym9sZDsgZm9udC1zaXplOjAuOXJlbTsiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9ImJhZGdlLWNhdCI+VEVDSDwvc3Bhbj5TVE1HIC0gUmVzc291cmNlcyBIdW1haW5lcyBldCBDb21tLgogICAgICAgICAgICAgICAgICAgICAgICA8L3RkPgogICAgICAgICAgICAgICAgICAgICAgICA8dGQ+PGlucHV0IHR5cGU9Im51bWJlciIgdmFsdWU9IjAiIGNsYXNzPSJpbnB1dC1pbmxpbmUtZWRzIiBvbmNoYW5nZT0idXBkRURTKCdwcmVtaWVyZScsIDIsICdzdHVkZW50cycsIHRoaXMudmFsdWUpIj48L3RkPgogICAgICAgICAgICAgICAgICAgICAgICA8dGQ+PGlucHV0IHR5cGU9Im51bWJlciIgdmFsdWU9IjAiIGNsYXNzPSJpbnB1dC1pbmxpbmUtZWRzIiBzdHlsZT0iYm9yZGVyLWNvbG9yOnZhcigtLXNlY29uZGFyeSkiIG9uY2hhbmdlPSJ1cGRFRFMoJ3ByZW1pZXJlJywgMiwgJ2dyb3VwcycsIHRoaXMudmFsdWUpIj48L3RkPgogICAgICAgICAgICAgICAgICAgICAgICA8dGQ+PGlucHV0IHR5cGU9Im51bWJlciIgdmFsdWU9IjQiIGNsYXNzPSJpbnB1dC1pbmxpbmUtZWRzIiBzdHlsZT0iYm9yZGVyLWNvbG9yOnZhcigtLWFjY2VudCkiIG9uY2hhbmdlPSJ1cGRFRFMoJ3ByZW1pZXJlJywgMiwgJ2hQZXJHcm91cCcsIHRoaXMudmFsdWUpIj48L3RkPgogICAgICAgICAgICAgICAgICAgICAgICA8dGQgY2xhc3M9InRleHQtd2FybmluZyIgc3R5bGU9ImZvbnQtd2VpZ2h0OmJvbGQ7IGZvbnQtc2l6ZToxLjFyZW07Ij4wPC90ZD4KICAgICAgICAgICAgICAgICAgICAgICAgPHRkPjxzcGFuIGNsYXNzPSJjb3N0LWJhZGdlIj4wIGgvw6lsLjwvc3Bhbj48L3RkPgogICAgICAgICAgICAgICAgICAgICAgICA8dGQ+PGJ1dHRvbiBvbmNsaWNrPSJkZWxFRFMoJ3ByZW1pZXJlJywgMikiIHN0eWxlPSJib3JkZXI6bm9uZTsgYmFja2dyb3VuZDpub25lOyBjb2xvcjojYzAzOTJiOyBjdXJzb3I6cG9pbnRlcjsgZm9udC1zaXplOjEuMnJlbTsiPsOXPC9idXR0b24+PC90ZD4KICAgICAgICAgICAgICAgICAgICA8L3RyPgogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgPHRyPgogICAgICAgICAgICAgICAgICAgICAgICA8dGQgc3R5bGU9InRleHQtYWxpZ246bGVmdDsgZm9udC13ZWlnaHQ6Ym9sZDsgZm9udC1zaXplOjAuOXJlbTsiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9ImJhZGdlLWNhdCI+VEVDSDwvc3Bhbj5TVE1HIC0gU3lzdMOobWVzIGQnSW5mb3JtYXRpb24gZGUgR2VzdGlvbgogICAgICAgICAgICAgICAgICAgICAgICA8L3RkPgogICAgICAgICAgICAgICAgICAgICAgICA8dGQ+PGlucHV0IHR5cGU9Im51bWJlciIgdmFsdWU9IjAiIGNsYXNzPSJpbnB1dC1pbmxpbmUtZWRzIiBvbmNoYW5nZT0idXBkRURTKCdwcmVtaWVyZScsIDMsICdzdHVkZW50cycsIHRoaXMudmFsdWUpIj48L3RkPgogICAgICAgICAgICAgICAgICAgICAgICA8dGQ+PGlucHV0IHR5cGU9Im51bWJlciIgdmFsdWU9IjAiIGNsYXNzPSJpbnB1dC1pbmxpbmUtZWRzIiBzdHlsZT0iYm9yZGVyLWNvbG9yOnZhcigtLXNlY29uZGFyeSkiIG9uY2hhbmdlPSJ1cGRFRFMoJ3ByZW1pZXJlJywgMywgJ2dyb3VwcycsIHRoaXMudmFsdWUpIj48L3RkPgogICAgICAgICAgICAgICAgICAgICAgICA8dGQ+PGlucHV0IHR5cGU9Im51bWJlciIgdmFsdWU9IjQiIGNsYXNzPSJpbnB1dC1pbmxpbmUtZWRzIiBzdHlsZT0iYm9yZGVyLWNvbG9yOnZhcigtLWFjY2VudCkiIG9uY2hhbmdlPSJ1cGRFRFMoJ3ByZW1pZXJlJywgMywgJ2hQZXJHcm91cCcsIHRoaXMudmFsdWUpIj48L3RkPgogICAgICAgICAgICAgICAgICAgICAgICA8dGQgY2xhc3M9InRleHQtd2FybmluZyIgc3R5bGU9ImZvbnQtd2VpZ2h0OmJvbGQ7IGZvbnQtc2l6ZToxLjFyZW07Ij4wPC90ZD4KICAgICAgICAgICAgICAgICAgICAgICAgPHRkPjxzcGFuIGNsYXNzPSJjb3N0LWJhZGdlIj4wIGgvw6lsLjwvc3Bhbj48L3RkPgogICAgICAgICAgICAgICAgICAgICAgICA8dGQ+PGJ1dHRvbiBvbmNsaWNrPSJkZWxFRFMoJ3ByZW1pZXJlJywgMykiIHN0eWxlPSJib3JkZXI6bm9uZTsgYmFja2dyb3VuZDpub25lOyBjb2xvcjojYzAzOTJiOyBjdXJzb3I6cG9pbnRlcjsgZm9udC1zaXplOjEuMnJlbTsiPsOXPC9idXR0b24+PC90ZD4KICAgICAgICAgICAgICAgICAgICA8L3RyPgogICAgICAgICAgICAgICAgPC90Ym9keT4KICAgICAgICAgICAgPC90YWJsZT4KICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYnRuIGJ0bi1wcmltYXJ5IiBzdHlsZT0id2lkdGg6MTAwJTsiIG9uY2xpY2s9ImFkZEVEUygncHJlbWllcmUnKSI+4p6VIENvbmZpZ3VyZXIgbGVzIEVEUyBkZSBQcmVtacOocmU8L2J1dHRvbj4KICAgICAgICA8L2Rpdj4KCiAgICAgICAgPGRpdiBjbGFzcz0iY2FyZCIgc3R5bGU9ImJvcmRlci10b3A6IDVweCBzb2xpZCB2YXIoLS1hY2NlbnQpOyBiYWNrZ3JvdW5kOiAjZmRmZWZlOyI+CiAgICAgICAgICAgIDxkaXYgc3R5bGU9ImRpc3BsYXk6ZmxleDsganVzdGlmeS1jb250ZW50OnNwYWNlLWJldHdlZW47IGFsaWduLWl0ZW1zOmNlbnRlcjsgbWFyZ2luLWJvdHRvbToxNXB4OyI+CiAgICAgICAgICAgICAgICA8aDQgc3R5bGU9Im1hcmdpbjowOyBjb2xvcjp2YXIoLS1hY2NlbnQpOyI+Tml2ZWF1IFRFUk1JTkFMRTwvaDQ+CiAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJiYWNrZ3JvdW5kOnZhcigtLWFjY2VudCk7IGNvbG9yOndoaXRlOyBwYWRkaW5nOjVweCAxNXB4OyBib3JkZXItcmFkaXVzOjIwcHg7IGZvbnQtd2VpZ2h0OmJvbGQ7Ij4KICAgICAgICAgICAgICAgICAgICBUb3RhbCBOaXZlYXUgOiA8c3BhbiBpZD0idG90YWwtZWRzLXRlcm0iPjAuMDwvc3Bhbj4gaAogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAKICAgICAgICAgICAgPHRhYmxlIGNsYXNzPSJ0YWJsZS1lZHMiPgogICAgICAgICAgICAgICAgPHRoZWFkPgogICAgICAgICAgICAgICAgICAgIDx0cj4KICAgICAgICAgICAgICAgICAgICA8dHI+CiAgICAgICAgICAgICAgICAgICAgICAgIDx0aCBzdHlsZT0idGV4dC1hbGlnbjpsZWZ0OyB3aWR0aDoyMiU7Ij5TcMOpY2lhbGl0w6k8L3RoPgogICAgICAgICAgICAgICAgICAgICAgICA8dGggc3R5bGU9IndpZHRoOjglOyI+RWZmZWN0aWY8L3RoPgogICAgICAgICAgICAgICAgICAgICAgICA8dGggc3R5bGU9IndpZHRoOjglOyI+R3JvdXBlczwvdGg+CiAgICAgICAgICAgICAgICAgICAgICAgIDx0aCBzdHlsZT0id2lkdGg6OCU7Ij5IIC8gR3IuPC90aD4KICAgICAgICAgICAgICAgICAgICAgICAgPHRoIHRpdGxlPSJDb2VmZmljaWVudCBkZSBwb25kw6lyYXRpb24gYXBwbGlxdcOpIGF1eCBoZXVyZXMgRURTIGRhbnMgbGUgY2FsY3VsIGR1IGJlc29pbiBESEciIHN0eWxlPSJ3aWR0aDo3JTsgY29sb3I6IzhlNDRhZDsgY3Vyc29yOmhlbHA7Ij5Qb25kLiDinLE8L3RoPgogICAgICAgICAgICAgICAgICAgICAgICA8dGggc3R5bGU9IndpZHRoOjglOyI+w4lsLiAvIEdyLjwvdGg+CiAgICAgICAgICAgICAgICAgICAgICAgIDx0aCBzdHlsZT0id2lkdGg6OSU7Ij5Db8O7dCBIL8OJbC48L3RoPgogICAgICAgICAgICAgICAgICAgICAgICA8dGggc3R5bGU9IndpZHRoOjIyJTsgY29sb3I6IzhlNDRhZDsiPvCfkaQgRW5zZWlnbmFudChzKTwvdGg+CiAgICAgICAgICAgICAgICAgICAgICAgIDx0aCBzdHlsZT0id2lkdGg6NSU7Ij48L3RoPgogICAgICAgICAgICAgICAgICAgIDwvdHI+CiAgICAgICAgICAgICAgICA8L3RoZWFkPgogICAgICAgICAgICAgICAgPHRib2R5IGlkPSJlZHMtZnVsbC10ZXJtIj48L3Rib2R5PgogICAgICAgICAgICA8L3RhYmxlPgogICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJidG4gYnRuLXdhcm5pbmciIHN0eWxlPSJ3aWR0aDoxMDAlOyIgb25jbGljaz0iYWRkRURTKCd0ZXJtaW5hbGUnKSI+4p6VIENvbmZpZ3VyZXIgbGVzIEVEUyBkZSBUZXJtaW5hbGU8L2J1dHRvbj4KICAgICAgICA8L2Rpdj4KCiAgICAgICAgPCEtLSBSw4lDQVBJVFVMQVRJRiBFTlNFSUdOQU5UUyBFRFMgLS0+CiAgICAgICAgPGRpdiBjbGFzcz0iY2FyZCIgc3R5bGU9ImJvcmRlci10b3A6NXB4IHNvbGlkICM4ZTQ0YWQ7IGJhY2tncm91bmQ6I2ZkZmVmZTsgbWFyZ2luLXRvcDoxMHB4OyI+CiAgICAgICAgICAgIDxkaXYgc3R5bGU9ImRpc3BsYXk6ZmxleDsganVzdGlmeS1jb250ZW50OnNwYWNlLWJldHdlZW47IGFsaWduLWl0ZW1zOmNlbnRlcjsgbWFyZ2luLWJvdHRvbToxNXB4OyI+CiAgICAgICAgICAgICAgICA8aDQgc3R5bGU9Im1hcmdpbjowOyBjb2xvcjojOGU0NGFkOyI+8J+RpCBSw6ljYXBpdHVsYXRpZiDigJMgRW5zZWlnbmFudHMgRURTPC9oND4KICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImJ0biBidG4tc20iIHN0eWxlPSJiYWNrZ3JvdW5kOiM4ZTQ0YWQ7Y29sb3I6d2hpdGU7IiBvbmNsaWNrPSJyZW5kZXJFRFNUZWFjaGVyU3VtbWFyeSgpIj7wn5SEIEFjdHVhbGlzZXI8L2J1dHRvbj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDxkaXYgaWQ9ImVkcy10ZWFjaGVyLXN1bW1hcnkiIHN0eWxlPSJmb250LXNpemU6MC44OHJlbTsiPgogICAgICAgICAgICAgICAgPGVtIHN0eWxlPSJjb2xvcjojYWFhOyI+Q2xpcXVleiBzdXIgIkFjdHVhbGlzZXIiIHBvdXIgdm9pciBsYSBsaXN0ZSBkZXMgZW5zZWlnbmFudHMgYXNzaWduw6lzLjwvZW0+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgIDwvZGl2PgogICAgPC9kaXY+CjwvZGl2PgoKICAgIDxkaXYgaWQ9Im1hdGllcmVzIiBjbGFzcz0ic2VjdGlvbiI+CiAgICAgICAgPGRpdiBjbGFzcz0iY2FyZCI+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImNhcmQtaGVhZGVyIj4KICAgICAgICAgICAgICAgIDxoMz5NYXRpw6hyZXMgJmFtcDsgTW9kYWxpdMOpczwvaDM+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJleHBvcnQtZ3JvdXAiPgogICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImJ0bi1leHAiIG9uY2xpY2s9ImV4cG9ydEN1cnJlbnRQYWdlKCdleGNlbCcpIj7wn5OKIEV4Y2VsPC9idXR0b24+CiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYnRuLWV4cCIgb25jbGljaz0iZXhwb3J0Q3VycmVudFBhZ2UoJ3BkZicpIj7wn5OEIFBERjwvYnV0dG9uPgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJidG4gYnRuLXByaW1hcnkgYnRuLXNtIiBvbmNsaWNrPSJhZGRTdWJqZWN0KCkiPuKelSBOb3V2ZWxsZSBNYXRpw6hyZTwvYnV0dG9uPgogICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYnRuIGJ0bi1zbSIgb25jbGljaz0iYWRkR3JvdXBTdWJqZWN0KCkiIHN0eWxlPSJiYWNrZ3JvdW5kOiM4ZTQ0YWQ7IGNvbG9yOndoaXRlOyBtYXJnaW4tbGVmdDo2cHg7Ij7wn5OCIE5vdXZlbGxlIFN1ci1NYXRpw6hyZTwvYnV0dG9uPgogICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYnRuIGJ0bi1zbSIgc3R5bGU9ImJhY2tncm91bmQ6IzhlNDRhZDsgY29sb3I6d2hpdGU7IiBvbmNsaWNrPSJvcGVuU3ViamVjdENhdGFsb2coKSI+8J+TmiBDYXRhbG9ndWUgUE5FPC9idXR0b24+CiAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJidG4gYnRuLXNtIiBzdHlsZT0iYmFja2dyb3VuZDojMWFiYzljOyBjb2xvcjp3aGl0ZTsiIG9uY2xpY2s9Im9wZW5Db3B5U3ViamVjdHNNb2RhbCgpIj7wn5SAIENvcGllciB2ZXJzLi4uPC9idXR0b24+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8dGFibGUgaWQ9InN1YmplY3RzLXRhYmxlIj4KICAgICAgICAgICAgICAgIDx0aGVhZD48dHI+CiAgICA8dGggc3R5bGU9IndpZHRoOjgwcHg7Ij5Db2RlPC90aD4KICAgIDx0aCBzdHlsZT0idGV4dC1hbGlnbjpsZWZ0OyI+TWF0acOocmUgKMOJZGl0YWJsZSk8L3RoPgogICAgPHRoIHN0eWxlPSJ3aWR0aDoxMDBweDsgYmFja2dyb3VuZDojZjBlNmZmOyBjb2xvcjojNmMzNDgzOyIgdGl0bGU9IkNvZGUgZGlzY2lwbGluZSBhY2Fkw6ltaXF1ZSBQTkUgQWl4LU1hcnNlaWxsZSI+Q29kZSBQTkU8YnI+PHNtYWxsPkJ1cmVhdTwvc21hbGw+PC90aD4KICAgIDx0aCBzdHlsZT0id2lkdGg6MTgwcHg7Ij5SYXR0YWNow6kgw6AgKFBhcmVudCk8L3RoPgo8dGggc3R5bGU9IndpZHRoOjIwMHB4OyI+RGlzY2lwbGluZXMgQXNzb2Npw6llczxicj48c21hbGw+KENvLWludGVydmVudGlvbik8L3NtYWxsPjwvdGg+Cgk8dGggc3R5bGU9IndpZHRoOjE2MHB4OyI+TW9kYWxpdMOpczwvdGg+CiAgICA8dGggc3R5bGU9InRleHQtYWxpZ246bGVmdDsiPlBhcmFtw6h0cmVzIChOaXZlYXV4IC8gVm9sdW1lcyk8L3RoPgogICAgPHRoPkFjdGlvbnM8L3RoPgo8L3RyPjwvdGhlYWQ+CiAgICAgICAgICAgICAgICA8dGJvZHkgaWQ9InN1YmplY3RzLWJvZHkiPjx0cj4KICAgICAgICAgICAgPHRkIHN0eWxlPSJ3aWR0aDo4MHB4OyI+PGlucHV0IHR5cGU9InRleHQiIHBsYWNlaG9sZGVyPSJDb2RlIiBzdHlsZT0iZm9udC1mYW1pbHk6bW9ub3NwYWNlOyB0ZXh0LWFsaWduOmNlbnRlcjsiIG9uY2hhbmdlPSJ1cGRhdGVTdWJqZWN0TWV0YSgnQXV0b25vbWllIEVQTEUnLCdjb2RlJyx0aGlzLnZhbHVlKSI+PC90ZD4KICAgICAgICAgICAgPHRkPjxpbnB1dCB0eXBlPSJ0ZXh0IiB2YWx1ZT0iQXV0b25vbWllIEVQTEUiIHN0eWxlPSJmb250LXdlaWdodDpib2xkOyIgb25jaGFuZ2U9InJlbmFtZVN1YmplY3QoJ0F1dG9ub21pZSBFUExFJyx0aGlzLnZhbHVlKSI+PC90ZD4KICAgICAgICAgICAgPHRkIHN0eWxlPSJ3aWR0aDoxODBweDsiPjxzZWxlY3Qgc3R5bGU9ImZvbnQtc2l6ZTowLjlyZW07IiBvbmNoYW5nZT0idXBkYXRlU3ViamVjdE1ldGEoJ0F1dG9ub21pZSBFUExFJywncGFyZW50Jyx0aGlzLnZhbHVlKSI+PG9wdGlvbiB2YWx1ZT0iIiBzZWxlY3RlZD0ic2VsZWN0ZWQiPihBdWN1biAtIFJhY2luZSk8L29wdGlvbj48b3B0aW9uIHZhbHVlPSJFTUMiPkVNQzwvb3B0aW9uPjxvcHRpb24gdmFsdWU9IkVQUyI+RVBTPC9vcHRpb24+PG9wdGlvbiB2YWx1ZT0iRW5zLiBTY2llbnRpZmlxdWUiPkVucy4gU2NpZW50aWZpcXVlPC9vcHRpb24+PG9wdGlvbiB2YWx1ZT0iRnJhbsOnYWlzIj5GcmFuw6dhaXM8L29wdGlvbj48b3B0aW9uIHZhbHVlPSJIaXN0LUfDqW8iPkhpc3QtR8Opbzwvb3B0aW9uPjxvcHRpb24gdmFsdWU9IkxWQSI+TFZBPC9vcHRpb24+PG9wdGlvbiB2YWx1ZT0iTFZCIj5MVkI8L29wdGlvbj48b3B0aW9uIHZhbHVlPSJNQXRocyI+TUF0aHM8L29wdGlvbj48b3B0aW9uIHZhbHVlPSJNYXRocyAoVEMpIj5NYXRocyAoVEMpPC9vcHRpb24+PG9wdGlvbiB2YWx1ZT0iUGhpbG9zb3BoaWUiPlBoaWxvc29waGllPC9vcHRpb24+PG9wdGlvbiB2YWx1ZT0iUGh5cy1DaGkgKFRDKSI+UGh5cy1DaGkgKFRDKTwvb3B0aW9uPjxvcHRpb24gdmFsdWU9IlNFUyI+U0VTPC9vcHRpb24+PG9wdGlvbiB2YWx1ZT0iU1RNRyAtIEdlc3Rpb24gZXQgRmluYW5jZSI+U1RNRyAtIEdlc3Rpb24gZXQgRmluYW5jZTwvb3B0aW9uPjxvcHRpb24gdmFsdWU9IlNUTUcgLSBNZXJjYXRpcXVlIChNYXJrZXRpbmcpIj5TVE1HIC0gTWVyY2F0aXF1ZSAoTWFya2V0aW5nKTwvb3B0aW9uPjxvcHRpb24gdmFsdWU9IlNUTUcgLSBSZXNzb3VyY2VzIEh1bWFpbmVzIGV0IENvbW0uIj5TVE1HIC0gUmVzc291cmNlcyBIdW1haW5lcyBldCBDb21tLjwvb3B0aW9uPjxvcHRpb24gdmFsdWU9IlNUTUcgLSBTeXN0w6htZXMgZCdJbmZvcm1hdGlvbiBkZSBHZXN0aW9uIj5TVE1HIC0gU3lzdMOobWVzIGQnSW5mb3JtYXRpb24gZGUgR2VzdGlvbjwvb3B0aW9uPjxvcHRpb24gdmFsdWU9IlNWVCAoVEMpIj5TVlQgKFRDKTwvb3B0aW9uPjxvcHRpb24gdmFsdWU9IlVOU1MiPlVOU1M8L29wdGlvbj48L3NlbGVjdD48L3RkPgogICAgICAgICAgICAKICAgICAgICAgICAgPHRkIHN0eWxlPSJ3aWR0aDoxNDBweDsgdGV4dC1hbGlnbjpjZW50ZXI7Ij4KICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYnRuIGJ0bi1zbSIgc3R5bGU9ImJhY2tncm91bmQ6d2hpdGU7IGNvbG9yOiM3ZjhjOGQ7IGJvcmRlcjoxcHggc29saWQgI2JkYzNjNzsgd2lkdGg6MTAwJTsgZGlzcGxheTpmbGV4OyBqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyOyBhbGlnbi1pdGVtczpjZW50ZXI7IGdhcDo1cHg7IiBvbmNsaWNrPSJvcGVuTGlua2VkU3ViamVjdHNNb2RhbCgnQXV0b25vbWllIEVQTEUnKSI+CiAgICAgICAgICAgICAgICA8c3Bhbj7wn5SXIEfDqXJlcjwvc3Bhbj4KICAgICAgICAgICAgICAgIDxzcGFuIHN0eWxlPSJiYWNrZ3JvdW5kOnJnYmEoMCwwLDAsMC4yKTsgcGFkZGluZzoxcHggNnB4OyBib3JkZXItcmFkaXVzOjEwcHg7IGZvbnQtc2l6ZTowLjc1cmVtOyI+MDwvc3Bhbj4KICAgICAgICAgICAgPC9idXR0b24+CiAgICAgICAgPC90ZD4KCiAgICAgICAgICAgIDx0ZCBzdHlsZT0id2lkdGg6MTYwcHg7Ij4KICAgICAgICAgICAgICAgIDxzZWxlY3Qgb25jaGFuZ2U9InVwZGF0ZVN1YmplY3RNZXRhKCdBdXRvbm9taWUgRVBMRScsJ21vZGUnLHRoaXMudmFsdWUpIj4KICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJkaXYiIHNlbGVjdGVkPSJzZWxlY3RlZCI+RGl2aXNpb248L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJsZXZlbCI+Tml2ZWF1PC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iZXRhYiI+w4l0YWJsaXNzZW1lbnQ8L29wdGlvbj4KICAgICAgICAgICAgICAgIDwvc2VsZWN0PgogICAgICAgICAgICA8L3RkPgogICAgICAgICAgICA8dGQgc3R5bGU9InRleHQtYWxpZ246bGVmdDsiPjxkaXYgY2xhc3M9Imx2bC1jaGVjay1jb250YWluZXIiPjxsYWJlbCBjbGFzcz0ibHZsLWNoZWNrLWl0ZW0iPjxpbnB1dCB0eXBlPSJjaGVja2JveCIgY2hlY2tlZD0iY2hlY2tlZCIgb25jaGFuZ2U9InRvZ2dsZVN1YkxldmVsKCdBdXRvbm9taWUgRVBMRScsJzJuZGUnKSI+Mm5kZTwvbGFiZWw+PGxhYmVsIGNsYXNzPSJsdmwtY2hlY2staXRlbSI+PGlucHV0IHR5cGU9ImNoZWNrYm94IiBjaGVja2VkPSJjaGVja2VkIiBvbmNoYW5nZT0idG9nZ2xlU3ViTGV2ZWwoJ0F1dG9ub21pZSBFUExFJywnMcOocmUnKSI+McOocmU8L2xhYmVsPjxsYWJlbCBjbGFzcz0ibHZsLWNoZWNrLWl0ZW0iPjxpbnB1dCB0eXBlPSJjaGVja2JveCIgY2hlY2tlZD0iY2hlY2tlZCIgb25jaGFuZ2U9InRvZ2dsZVN1YkxldmVsKCdBdXRvbm9taWUgRVBMRScsJ1Rlcm1pbmFsZScpIj5UZXJtaW5hbGU8L2xhYmVsPjwvZGl2PjwvdGQ+CiAgICAgICAgICAgIDx0ZCBzdHlsZT0id2lkdGg6NTBweDsiPjxidXR0b24gY2xhc3M9ImJ0biBidG4tZGFuZ2VyIGJ0bi1zbSIgb25jbGljaz0iZGVsU3ViamVjdCgnQXV0b25vbWllIEVQTEUnKSI+w5c8L2J1dHRvbj48L3RkPgogICAgICAgIDwvdHI+PHRyPgogICAgICAgICAgICA8dGQgc3R5bGU9IndpZHRoOjgwcHg7Ij48aW5wdXQgdHlwZT0idGV4dCIgcGxhY2Vob2xkZXI9IkNvZGUiIHN0eWxlPSJmb250LWZhbWlseTptb25vc3BhY2U7IHRleHQtYWxpZ246Y2VudGVyOyIgb25jaGFuZ2U9InVwZGF0ZVN1YmplY3RNZXRhKCdFTUMnLCdjb2RlJyx0aGlzLnZhbHVlKSI+PC90ZD4KICAgICAgICAgICAgPHRkPjxpbnB1dCB0eXBlPSJ0ZXh0IiB2YWx1ZT0iRU1DIiBzdHlsZT0iZm9udC13ZWlnaHQ6Ym9sZDsiIG9uY2hhbmdlPSJyZW5hbWVTdWJqZWN0KCdFTUMnLHRoaXMudmFsdWUpIj48L3RkPgogICAgICAgICAgICA8dGQgc3R5bGU9IndpZHRoOjE4MHB4OyI+PHNlbGVjdCBzdHlsZT0iZm9udC1zaXplOjAuOXJlbTsiIG9uY2hhbmdlPSJ1cGRhdGVTdWJqZWN0TWV0YSgnRU1DJywncGFyZW50Jyx0aGlzLnZhbHVlKSI+PG9wdGlvbiB2YWx1ZT0iIiBzZWxlY3RlZD0ic2VsZWN0ZWQiPihBdWN1biAtIFJhY2luZSk8L29wdGlvbj48b3B0aW9uIHZhbHVlPSJBdXRvbm9taWUgRVBMRSI+QXV0b25vbWllIEVQTEU8L29wdGlvbj48b3B0aW9uIHZhbHVlPSJFUFMiPkVQUzwvb3B0aW9uPjxvcHRpb24gdmFsdWU9IkVucy4gU2NpZW50aWZpcXVlIj5FbnMuIFNjaWVudGlmaXF1ZTwvb3B0aW9uPjxvcHRpb24gdmFsdWU9IkZyYW7Dp2FpcyI+RnJhbsOnYWlzPC9vcHRpb24+PG9wdGlvbiB2YWx1ZT0iSGlzdC1Hw6lvIj5IaXN0LUfDqW88L29wdGlvbj48b3B0aW9uIHZhbHVlPSJMVkEiPkxWQTwvb3B0aW9uPjxvcHRpb24gdmFsdWU9IkxWQiI+TFZCPC9vcHRpb24+PG9wdGlvbiB2YWx1ZT0iTUF0aHMiPk1BdGhzPC9vcHRpb24+PG9wdGlvbiB2YWx1ZT0iTWF0aHMgKFRDKSI+TWF0aHMgKFRDKTwvb3B0aW9uPjxvcHRpb24gdmFsdWU9IlBoaWxvc29waGllIj5QaGlsb3NvcGhpZTwvb3B0aW9uPjxvcHRpb24gdmFsdWU9IlBoeXMtQ2hpIChUQykiPlBoeXMtQ2hpIChUQyk8L29wdGlvbj48b3B0aW9uIHZhbHVlPSJTRVMiPlNFUzwvb3B0aW9uPjxvcHRpb24gdmFsdWU9IlNUTUcgLSBHZXN0aW9uIGV0IEZpbmFuY2UiPlNUTUcgLSBHZXN0aW9uIGV0IEZpbmFuY2U8L29wdGlvbj48b3B0aW9uIHZhbHVlPSJTVE1HIC0gTWVyY2F0aXF1ZSAoTWFya2V0aW5nKSI+U1RNRyAtIE1lcmNhdGlxdWUgKE1hcmtldGluZyk8L29wdGlvbj48b3B0aW9uIHZhbHVlPSJTVE1HIC0gUmVzc291cmNlcyBIdW1haW5lcyBldCBDb21tLiI+U1RNRyAtIFJlc3NvdXJjZXMgSHVtYWluZXMgZXQgQ29tbS48L29wdGlvbj48b3B0aW9uIHZhbHVlPSJTVE1HIC0gU3lzdMOobWVzIGQnSW5mb3JtYXRpb24gZGUgR2VzdGlvbiI+U1RNRyAtIFN5c3TDqG1lcyBkJ0luZm9ybWF0aW9uIGRlIEdlc3Rpb248L29wdGlvbj48b3B0aW9uIHZhbHVlPSJTVlQgKFRDKSI+U1ZUIChUQyk8L29wdGlvbj48b3B0aW9uIHZhbHVlPSJVTlNTIj5VTlNTPC9vcHRpb24+PC9zZWxlY3Q+PC90ZD4KICAgICAgICAgICAgCiAgICAgICAgICAgIDx0ZCBzdHlsZT0id2lkdGg6MTQwcHg7IHRleHQtYWxpZ246Y2VudGVyOyI+CiAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImJ0biBidG4tc20iIHN0eWxlPSJiYWNrZ3JvdW5kOndoaXRlOyBjb2xvcjojN2Y4YzhkOyBib3JkZXI6MXB4IHNvbGlkICNiZGMzYzc7IHdpZHRoOjEwMCU7IGRpc3BsYXk6ZmxleDsganVzdGlmeS1jb250ZW50OmNlbnRlcjsgYWxpZ24taXRlbXM6Y2VudGVyOyBnYXA6NXB4OyIgb25jbGljaz0ib3BlbkxpbmtlZFN1YmplY3RzTW9kYWwoJ0VNQycpIj4KICAgICAgICAgICAgICAgIDxzcGFuPvCflJcgR8OpcmVyPC9zcGFuPgogICAgICAgICAgICAgICAgPHNwYW4gc3R5bGU9ImJhY2tncm91bmQ6cmdiYSgwLDAsMCwwLjIpOyBwYWRkaW5nOjFweCA2cHg7IGJvcmRlci1yYWRpdXM6MTBweDsgZm9udC1zaXplOjAuNzVyZW07Ij4wPC9zcGFuPgogICAgICAgICAgICA8L2J1dHRvbj4KICAgICAgICA8L3RkPgoKICAgICAgICAgICAgPHRkIHN0eWxlPSJ3aWR0aDoxNjBweDsiPgogICAgICAgICAgICAgICAgPHNlbGVjdCBvbmNoYW5nZT0idXBkYXRlU3ViamVjdE1ldGEoJ0VNQycsJ21vZGUnLHRoaXMudmFsdWUpIj4KICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJkaXYiIHNlbGVjdGVkPSJzZWxlY3RlZCI+RGl2aXNpb248L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJsZXZlbCI+Tml2ZWF1PC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iZXRhYiI+w4l0YWJsaXNzZW1lbnQ8L29wdGlvbj4KICAgICAgICAgICAgICAgIDwvc2VsZWN0PgogICAgICAgICAgICA8L3RkPgogICAgICAgICAgICA8dGQgc3R5bGU9InRleHQtYWxpZ246bGVmdDsiPjxkaXYgY2xhc3M9Imx2bC1jaGVjay1jb250YWluZXIiPjxsYWJlbCBjbGFzcz0ibHZsLWNoZWNrLWl0ZW0iPjxpbnB1dCB0eXBlPSJjaGVja2JveCIgY2hlY2tlZD0iY2hlY2tlZCIgb25jaGFuZ2U9InRvZ2dsZVN1YkxldmVsKCdFTUMnLCcybmRlJykiPjJuZGU8L2xhYmVsPjxsYWJlbCBjbGFzcz0ibHZsLWNoZWNrLWl0ZW0iPjxpbnB1dCB0eXBlPSJjaGVja2JveCIgY2hlY2tlZD0iY2hlY2tlZCIgb25jaGFuZ2U9InRvZ2dsZVN1YkxldmVsKCdFTUMnLCcxw6hyZScpIj4xw6hyZTwvbGFiZWw+PGxhYmVsIGNsYXNzPSJsdmwtY2hlY2staXRlbSI+PGlucHV0IHR5cGU9ImNoZWNrYm94IiBjaGVja2VkPSJjaGVja2VkIiBvbmNoYW5nZT0idG9nZ2xlU3ViTGV2ZWwoJ0VNQycsJ1Rlcm1pbmFsZScpIj5UZXJtaW5hbGU8L2xhYmVsPjwvZGl2PjwvdGQ+CiAgICAgICAgICAgIDx0ZCBzdHlsZT0id2lkdGg6NTBweDsiPjxidXR0b24gY2xhc3M9ImJ0biBidG4tZGFuZ2VyIGJ0bi1zbSIgb25jbGljaz0iZGVsU3ViamVjdCgnRU1DJykiPsOXPC9idXR0b24+PC90ZD4KICAgICAgICA8L3RyPjx0cj4KICAgICAgICAgICAgPHRkIHN0eWxlPSJ3aWR0aDo4MHB4OyI+PGlucHV0IHR5cGU9InRleHQiIHBsYWNlaG9sZGVyPSJDb2RlIiBzdHlsZT0iZm9udC1mYW1pbHk6bW9ub3NwYWNlOyB0ZXh0LWFsaWduOmNlbnRlcjsiIG9uY2hhbmdlPSJ1cGRhdGVTdWJqZWN0TWV0YSgnRVBTJywnY29kZScsdGhpcy52YWx1ZSkiPjwvdGQ+CiAgICAgICAgICAgIDx0ZD48aW5wdXQgdHlwZT0idGV4dCIgdmFsdWU9IkVQUyIgc3R5bGU9ImZvbnQtd2VpZ2h0OmJvbGQ7IiBvbmNoYW5nZT0icmVuYW1lU3ViamVjdCgnRVBTJyx0aGlzLnZhbHVlKSI+PC90ZD4KICAgICAgICAgICAgPHRkIHN0eWxlPSJ3aWR0aDoxODBweDsiPjxzZWxlY3Qgc3R5bGU9ImZvbnQtc2l6ZTowLjlyZW07IiBvbmNoYW5nZT0idXBkYXRlU3ViamVjdE1ldGEoJ0VQUycsJ3BhcmVudCcsdGhpcy52YWx1ZSkiPjxvcHRpb24gdmFsdWU9IiIgc2VsZWN0ZWQ9InNlbGVjdGVkIj4oQXVjdW4gLSBSYWNpbmUpPC9vcHRpb24+PG9wdGlvbiB2YWx1ZT0iQXV0b25vbWllIEVQTEUiPkF1dG9ub21pZSBFUExFPC9vcHRpb24+PG9wdGlvbiB2YWx1ZT0iRU1DIj5FTUM8L29wdGlvbj48b3B0aW9uIHZhbHVlPSJFbnMuIFNjaWVudGlmaXF1ZSI+RW5zLiBTY2llbnRpZmlxdWU8L29wdGlvbj48b3B0aW9uIHZhbHVlPSJGcmFuw6dhaXMiPkZyYW7Dp2Fpczwvb3B0aW9uPjxvcHRpb24gdmFsdWU9Ikhpc3QtR8OpbyI+SGlzdC1Hw6lvPC9vcHRpb24+PG9wdGlvbiB2YWx1ZT0iTFZBIj5MVkE8L29wdGlvbj48b3B0aW9uIHZhbHVlPSJMVkIiPkxWQjwvb3B0aW9uPjxvcHRpb24gdmFsdWU9Ik1BdGhzIj5NQXRoczwvb3B0aW9uPjxvcHRpb24gdmFsdWU9Ik1hdGhzIChUQykiPk1hdGhzIChUQyk8L29wdGlvbj48b3B0aW9uIHZhbHVlPSJQaGlsb3NvcGhpZSI+UGhpbG9zb3BoaWU8L29wdGlvbj48b3B0aW9uIHZhbHVlPSJQaHlzLUNoaSAoVEMpIj5QaHlzLUNoaSAoVEMpPC9vcHRpb24+PG9wdGlvbiB2YWx1ZT0iU0VTIj5TRVM8L29wdGlvbj48b3B0aW9uIHZhbHVlPSJTVE1HIC0gR2VzdGlvbiBldCBGaW5hbmNlIj5TVE1HIC0gR2VzdGlvbiBldCBGaW5hbmNlPC9vcHRpb24+PG9wdGlvbiB2YWx1ZT0iU1RNRyAtIE1lcmNhdGlxdWUgKE1hcmtldGluZykiPlNUTUcgLSBNZXJjYXRpcXVlIChNYXJrZXRpbmcpPC9vcHRpb24+PG9wdGlvbiB2YWx1ZT0iU1RNRyAtIFJlc3NvdXJjZXMgSHVtYWluZXMgZXQgQ29tbS4iPlNUTUcgLSBSZXNzb3VyY2VzIEh1bWFpbmVzIGV0IENvbW0uPC9vcHRpb24+PG9wdGlvbiB2YWx1ZT0iU1RNRyAtIFN5c3TDqG1lcyBkJ0luZm9ybWF0aW9uIGRlIEdlc3Rpb24iPlNUTUcgLSBTeXN0w6htZXMgZCdJbmZvcm1hdGlvbiBkZSBHZXN0aW9uPC9vcHRpb24+PG9wdGlvbiB2YWx1ZT0iU1ZUIChUQykiPlNWVCAoVEMpPC9vcHRpb24+PG9wdGlvbiB2YWx1ZT0iVU5TUyI+VU5TUzwvb3B0aW9uPjwvc2VsZWN0PjwvdGQ+CiAgICAgICAgICAgIAogICAgICAgICAgICA8dGQgc3R5bGU9IndpZHRoOjE0MHB4OyB0ZXh0LWFsaWduOmNlbnRlcjsiPgogICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJidG4gYnRuLXNtIiBzdHlsZT0iYmFja2dyb3VuZDp3aGl0ZTsgY29sb3I6IzdmOGM4ZDsgYm9yZGVyOjFweCBzb2xpZCAjYmRjM2M3OyB3aWR0aDoxMDAlOyBkaXNwbGF5OmZsZXg7IGp1c3RpZnktY29udGVudDpjZW50ZXI7IGFsaWduLWl0ZW1zOmNlbnRlcjsgZ2FwOjVweDsiIG9uY2xpY2s9Im9wZW5MaW5rZWRTdWJqZWN0c01vZGFsKCdFUFMnKSI+CiAgICAgICAgICAgICAgICA8c3Bhbj7wn5SXIEfDqXJlcjwvc3Bhbj4KICAgICAgICAgICAgICAgIDxzcGFuIHN0eWxlPSJiYWNrZ3JvdW5kOnJnYmEoMCwwLDAsMC4yKTsgcGFkZGluZzoxcHggNnB4OyBib3JkZXItcmFkaXVzOjEwcHg7IGZvbnQtc2l6ZTowLjc1cmVtOyI+MDwvc3Bhbj4KICAgICAgICAgICAgPC9idXR0b24+CiAgICAgICAgPC90ZD4KCiAgICAgICAgICAgIDx0ZCBzdHlsZT0id2lkdGg6MTYwcHg7Ij4KICAgICAgICAgICAgICAgIDxzZWxlY3Qgb25jaGFuZ2U9InVwZGF0ZVN1YmplY3RNZXRhKCdFUFMnLCdtb2RlJyx0aGlzLnZhbHVlKSI+CiAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iZGl2IiBzZWxlY3RlZD0ic2VsZWN0ZWQiPkRpdmlzaW9uPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0ibGV2ZWwiPk5pdmVhdTwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9ImV0YWIiPsOJdGFibGlzc2VtZW50PC9vcHRpb24+CiAgICAgICAgICAgICAgICA8L3NlbGVjdD4KICAgICAgICAgICAgPC90ZD4KICAgICAgICAgICAgPHRkIHN0eWxlPSJ0ZXh0LWFsaWduOmxlZnQ7Ij48ZGl2IGNsYXNzPSJsdmwtY2hlY2stY29udGFpbmVyIj48bGFiZWwgY2xhc3M9Imx2bC1jaGVjay1pdGVtIj48aW5wdXQgdHlwZT0iY2hlY2tib3giIGNoZWNrZWQ9ImNoZWNrZWQiIG9uY2hhbmdlPSJ0b2dnbGVTdWJMZXZlbCgnRVBTJywnMm5kZScpIj4ybmRlPC9sYWJlbD48bGFiZWwgY2xhc3M9Imx2bC1jaGVjay1pdGVtIj48aW5wdXQgdHlwZT0iY2hlY2tib3giIGNoZWNrZWQ9ImNoZWNrZWQiIG9uY2hhbmdlPSJ0b2dnbGVTdWJMZXZlbCgnRVBTJywnMcOocmUnKSI+McOocmU8L2xhYmVsPjxsYWJlbCBjbGFzcz0ibHZsLWNoZWNrLWl0ZW0iPjxpbnB1dCB0eXBlPSJjaGVja2JveCIgY2hlY2tlZD0iY2hlY2tlZCIgb25jaGFuZ2U9InRvZ2dsZVN1YkxldmVsKCdFUFMnLCdUZXJtaW5hbGUnKSI+VGVybWluYWxlPC9sYWJlbD48L2Rpdj48L3RkPgogICAgICAgICAgICA8dGQgc3R5bGU9IndpZHRoOjUwcHg7Ij48YnV0dG9uIGNsYXNzPSJidG4gYnRuLWRhbmdlciBidG4tc20iIG9uY2xpY2s9ImRlbFN1YmplY3QoJ0VQUycpIj7DlzwvYnV0dG9uPjwvdGQ+CiAgICAgICAgPC90cj48dHI+CiAgICAgICAgICAgIDx0ZCBzdHlsZT0id2lkdGg6ODBweDsiPjxpbnB1dCB0eXBlPSJ0ZXh0IiBwbGFjZWhvbGRlcj0iQ29kZSIgc3R5bGU9ImZvbnQtZmFtaWx5Om1vbm9zcGFjZTsgdGV4dC1hbGlnbjpjZW50ZXI7IiBvbmNoYW5nZT0idXBkYXRlU3ViamVjdE1ldGEoJ0Vucy4gU2NpZW50aWZpcXVlJywnY29kZScsdGhpcy52YWx1ZSkiPjwvdGQ+CiAgICAgICAgICAgIDx0ZD48aW5wdXQgdHlwZT0idGV4dCIgdmFsdWU9IkVucy4gU2NpZW50aWZpcXVlIiBzdHlsZT0iZm9udC13ZWlnaHQ6Ym9sZDsiIG9uY2hhbmdlPSJyZW5hbWVTdWJqZWN0KCdFbnMuIFNjaWVudGlmaXF1ZScsdGhpcy52YWx1ZSkiPjwvdGQ+CiAgICAgICAgICAgIDx0ZCBzdHlsZT0id2lkdGg6MTgwcHg7Ij48c2VsZWN0IHN0eWxlPSJmb250LXNpemU6MC45cmVtOyIgb25jaGFuZ2U9InVwZGF0ZVN1YmplY3RNZXRhKCdFbnMuIFNjaWVudGlmaXF1ZScsJ3BhcmVudCcsdGhpcy52YWx1ZSkiPjxvcHRpb24gdmFsdWU9IiIgc2VsZWN0ZWQ9InNlbGVjdGVkIj4oQXVjdW4gLSBSYWNpbmUpPC9vcHRpb24+PG9wdGlvbiB2YWx1ZT0iQXV0b25vbWllIEVQTEUiPkF1dG9ub21pZSBFUExFPC9vcHRpb24+PG9wdGlvbiB2YWx1ZT0iRU1DIj5FTUM8L29wdGlvbj48b3B0aW9uIHZhbHVlPSJFUFMiPkVQUzwvb3B0aW9uPjxvcHRpb24gdmFsdWU9IkZyYW7Dp2FpcyI+RnJhbsOnYWlzPC9vcHRpb24+PG9wdGlvbiB2YWx1ZT0iSGlzdC1Hw6lvIj5IaXN0LUfDqW88L29wdGlvbj48b3B0aW9uIHZhbHVlPSJMVkEiPkxWQTwvb3B0aW9uPjxvcHRpb24gdmFsdWU9IkxWQiI+TFZCPC9vcHRpb24+PG9wdGlvbiB2YWx1ZT0iTUF0aHMiPk1BdGhzPC9vcHRpb24+PG9wdGlvbiB2YWx1ZT0iTWF0aHMgKFRDKSI+TWF0aHMgKFRDKTwvb3B0aW9uPjxvcHRpb24gdmFsdWU9IlBoaWxvc29waGllIj5QaGlsb3NvcGhpZTwvb3B0aW9uPjxvcHRpb24gdmFsdWU9IlBoeXMtQ2hpIChUQykiPlBoeXMtQ2hpIChUQyk8L29wdGlvbj48b3B0aW9uIHZhbHVlPSJTRVMiPlNFUzwvb3B0aW9uPjxvcHRpb24gdmFsdWU9IlNUTUcgLSBHZXN0aW9uIGV0IEZpbmFuY2UiPlNUTUcgLSBHZXN0aW9uIGV0IEZpbmFuY2U8L29wdGlvbj48b3B0aW9uIHZhbHVlPSJTVE1HIC0gTWVyY2F0aXF1ZSAoTWFya2V0aW5nKSI+U1RNRyAtIE1lcmNhdGlxdWUgKE1hcmtldGluZyk8L29wdGlvbj48b3B0aW9uIHZhbHVlPSJTVE1HIC0gUmVzc291cmNlcyBIdW1haW5lcyBldCBDb21tLiI+U1RNRyAtIFJlc3NvdXJjZXMgSHVtYWluZXMgZXQgQ29tbS48L29wdGlvbj48b3B0aW9uIHZhbHVlPSJTVE1HIC0gU3lzdMOobWVzIGQnSW5mb3JtYXRpb24gZGUgR2VzdGlvbiI+U1RNRyAtIFN5c3TDqG1lcyBkJ0luZm9ybWF0aW9uIGRlIEdlc3Rpb248L29wdGlvbj48b3B0aW9uIHZhbHVlPSJTVlQgKFRDKSI+U1ZUIChUQyk8L29wdGlvbj48b3B0aW9uIHZhbHVlPSJVTlNTIj5VTlNTPC9vcHRpb24+PC9zZWxlY3Q+PC90ZD4KICAgICAgICAgICAgCiAgICAgICAgICAgIDx0ZCBzdHlsZT0id2lkdGg6MTQwcHg7IHRleHQtYWxpZ246Y2VudGVyOyI+CiAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImJ0biBidG4tc20iIHN0eWxlPSJiYWNrZ3JvdW5kOndoaXRlOyBjb2xvcjojN2Y4YzhkOyBib3JkZXI6MXB4IHNvbGlkICNiZGMzYzc7IHdpZHRoOjEwMCU7IGRpc3BsYXk6ZmxleDsganVzdGlmeS1jb250ZW50OmNlbnRlcjsgYWxpZ24taXRlbXM6Y2VudGVyOyBnYXA6NXB4OyIgb25jbGljaz0ib3BlbkxpbmtlZFN1YmplY3RzTW9kYWwoJ0Vucy4gU2NpZW50aWZpcXVlJykiPgogICAgICAgICAgICAgICAgPHNwYW4+8J+UlyBHw6lyZXI8L3NwYW4+CiAgICAgICAgICAgICAgICA8c3BhbiBzdHlsZT0iYmFja2dyb3VuZDpyZ2JhKDAsMCwwLDAuMik7IHBhZGRpbmc6MXB4IDZweDsgYm9yZGVyLXJhZGl1czoxMHB4OyBmb250LXNpemU6MC43NXJlbTsiPjA8L3NwYW4+CiAgICAgICAgICAgIDwvYnV0dG9uPgogICAgICAgIDwvdGQ+CgogICAgICAgICAgICA8dGQgc3R5bGU9IndpZHRoOjE2MHB4OyI+CiAgICAgICAgICAgICAgICA8c2VsZWN0IG9uY2hhbmdlPSJ1cGRhdGVTdWJqZWN0TWV0YSgnRW5zLiBTY2llbnRpZmlxdWUnLCdtb2RlJyx0aGlzLnZhbHVlKSI+CiAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iZGl2IiBzZWxlY3RlZD0ic2VsZWN0ZWQiPkRpdmlzaW9uPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0ibGV2ZWwiPk5pdmVhdTwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9ImV0YWIiPsOJdGFibGlzc2VtZW50PC9vcHRpb24+CiAgICAgICAgICAgICAgICA8L3NlbGVjdD4KICAgICAgICAgICAgPC90ZD4KICAgICAgICAgICAgPHRkIHN0eWxlPSJ0ZXh0LWFsaWduOmxlZnQ7Ij48ZGl2IGNsYXNzPSJsdmwtY2hlY2stY29udGFpbmVyIj48bGFiZWwgY2xhc3M9Imx2bC1jaGVjay1pdGVtIj48aW5wdXQgdHlwZT0iY2hlY2tib3giIGNoZWNrZWQ9ImNoZWNrZWQiIG9uY2hhbmdlPSJ0b2dnbGVTdWJMZXZlbCgnRW5zLiBTY2llbnRpZmlxdWUnLCcybmRlJykiPjJuZGU8L2xhYmVsPjxsYWJlbCBjbGFzcz0ibHZsLWNoZWNrLWl0ZW0iPjxpbnB1dCB0eXBlPSJjaGVja2JveCIgY2hlY2tlZD0iY2hlY2tlZCIgb25jaGFuZ2U9InRvZ2dsZVN1YkxldmVsKCdFbnMuIFNjaWVudGlmaXF1ZScsJzHDqHJlJykiPjHDqHJlPC9sYWJlbD48bGFiZWwgY2xhc3M9Imx2bC1jaGVjay1pdGVtIj48aW5wdXQgdHlwZT0iY2hlY2tib3giIGNoZWNrZWQ9ImNoZWNrZWQiIG9uY2hhbmdlPSJ0b2dnbGVTdWJMZXZlbCgnRW5zLiBTY2llbnRpZmlxdWUnLCdUZXJtaW5hbGUnKSI+VGVybWluYWxlPC9sYWJlbD48L2Rpdj48L3RkPgogICAgICAgICAgICA8dGQgc3R5bGU9IndpZHRoOjUwcHg7Ij48YnV0dG9uIGNsYXNzPSJidG4gYnRuLWRhbmdlciBidG4tc20iIG9uY2xpY2s9ImRlbFN1YmplY3QoJ0Vucy4gU2NpZW50aWZpcXVlJykiPsOXPC9idXR0b24+PC90ZD4KICAgICAgICA8L3RyPjx0cj4KICAgICAgICAgICAgPHRkIHN0eWxlPSJ3aWR0aDo4MHB4OyI+PGlucHV0IHR5cGU9InRleHQiIHBsYWNlaG9sZGVyPSJDb2RlIiBzdHlsZT0iZm9udC1mYW1pbHk6bW9ub3NwYWNlOyB0ZXh0LWFsaWduOmNlbnRlcjsiIG9uY2hhbmdlPSJ1cGRhdGVTdWJqZWN0TWV0YSgnRnJhbsOnYWlzJywnY29kZScsdGhpcy52YWx1ZSkiPjwvdGQ+CiAgICAgICAgICAgIDx0ZD48aW5wdXQgdHlwZT0idGV4dCIgdmFsdWU9IkZyYW7Dp2FpcyIgc3R5bGU9ImZvbnQtd2VpZ2h0OmJvbGQ7IiBvbmNoYW5nZT0icmVuYW1lU3ViamVjdCgnRnJhbsOnYWlzJyx0aGlzLnZhbHVlKSI+PC90ZD4KICAgICAgICAgICAgPHRkIHN0eWxlPSJ3aWR0aDoxODBweDsiPjxzZWxlY3Qgc3R5bGU9ImZvbnQtc2l6ZTowLjlyZW07IiBvbmNoYW5nZT0idXBkYXRlU3ViamVjdE1ldGEoJ0ZyYW7Dp2FpcycsJ3BhcmVudCcsdGhpcy52YWx1ZSkiPjxvcHRpb24gdmFsdWU9IiIgc2VsZWN0ZWQ9InNlbGVjdGVkIj4oQXVjdW4gLSBSYWNpbmUpPC9vcHRpb24+PG9wdGlvbiB2YWx1ZT0iQXV0b25vbWllIEVQTEUiPkF1dG9ub21pZSBFUExFPC9vcHRpb24+PG9wdGlvbiB2YWx1ZT0iRU1DIj5FTUM8L29wdGlvbj48b3B0aW9uIHZhbHVlPSJFUFMiPkVQUzwvb3B0aW9uPjxvcHRpb24gdmFsdWU9IkVucy4gU2NpZW50aWZpcXVlIj5FbnMuIFNjaWVudGlmaXF1ZTwvb3B0aW9uPjxvcHRpb24gdmFsdWU9Ikhpc3QtR8OpbyI+SGlzdC1Hw6lvPC9vcHRpb24+PG9wdGlvbiB2YWx1ZT0iTFZBIj5MVkE8L29wdGlvbj48b3B0aW9uIHZhbHVlPSJMVkIiPkxWQjwvb3B0aW9uPjxvcHRpb24gdmFsdWU9Ik1BdGhzIj5NQXRoczwvb3B0aW9uPjxvcHRpb24gdmFsdWU9Ik1hdGhzIChUQykiPk1hdGhzIChUQyk8L29wdGlvbj48b3B0aW9uIHZhbHVlPSJQaGlsb3NvcGhpZSI+UGhpbG9zb3BoaWU8L29wdGlvbj48b3B0aW9uIHZhbHVlPSJQaHlzLUNoaSAoVEMpIj5QaHlzLUNoaSAoVEMpPC9vcHRpb24+PG9wdGlvbiB2YWx1ZT0iU0VTIj5TRVM8L29wdGlvbj48b3B0aW9uIHZhbHVlPSJTVE1HIC0gR2VzdGlvbiBldCBGaW5hbmNlIj5TVE1HIC0gR2VzdGlvbiBldCBGaW5hbmNlPC9vcHRpb24+PG9wdGlvbiB2YWx1ZT0iU1RNRyAtIE1lcmNhdGlxdWUgKE1hcmtldGluZykiPlNUTUcgLSBNZXJjYXRpcXVlIChNYXJrZXRpbmcpPC9vcHRpb24+PG9wdGlvbiB2YWx1ZT0iU1RNRyAtIFJlc3NvdXJjZXMgSHVtYWluZXMgZXQgQ29tbS4iPlNUTUcgLSBSZXNzb3VyY2VzIEh1bWFpbmVzIGV0IENvbW0uPC9vcHRpb24+PG9wdGlvbiB2YWx1ZT0iU1RNRyAtIFN5c3TDqG1lcyBkJ0luZm9ybWF0aW9uIGRlIEdlc3Rpb24iPlNUTUcgLSBTeXN0w6htZXMgZCdJbmZvcm1hdGlvbiBkZSBHZXN0aW9uPC9vcHRpb24+PG9wdGlvbiB2YWx1ZT0iU1ZUIChUQykiPlNWVCAoVEMpPC9vcHRpb24+PG9wdGlvbiB2YWx1ZT0iVU5TUyI+VU5TUzwvb3B0aW9uPjwvc2VsZWN0PjwvdGQ+CiAgICAgICAgICAgIAogICAgICAgICAgICA8dGQgc3R5bGU9IndpZHRoOjE0MHB4OyB0ZXh0LWFsaWduOmNlbnRlcjsiPgogICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJidG4gYnRuLXNtIiBzdHlsZT0iYmFja2dyb3VuZDp3aGl0ZTsgY29sb3I6IzdmOGM4ZDsgYm9yZGVyOjFweCBzb2xpZCAjYmRjM2M3OyB3aWR0aDoxMDAlOyBkaXNwbGF5OmZsZXg7IGp1c3RpZnktY29udGVudDpjZW50ZXI7IGFsaWduLWl0ZW1zOmNlbnRlcjsgZ2FwOjVweDsiIG9uY2xpY2s9Im9wZW5MaW5rZWRTdWJqZWN0c01vZGFsKCdGcmFuw6dhaXMnKSI+CiAgICAgICAgICAgICAgICA8c3Bhbj7wn5SXIEfDqXJlcjwvc3Bhbj4KICAgICAgICAgICAgICAgIDxzcGFuIHN0eWxlPSJiYWNrZ3JvdW5kOnJnYmEoMCwwLDAsMC4yKTsgcGFkZGluZzoxcHggNnB4OyBib3JkZXItcmFkaXVzOjEwcHg7IGZvbnQtc2l6ZTowLjc1cmVtOyI+MDwvc3Bhbj4KICAgICAgICAgICAgPC9idXR0b24+CiAgICAgICAgPC90ZD4KCiAgICAgICAgICAgIDx0ZCBzdHlsZT0id2lkdGg6MTYwcHg7Ij4KICAgICAgICAgICAgICAgIDxzZWxlY3Qgb25jaGFuZ2U9InVwZGF0ZVN1YmplY3RNZXRhKCdGcmFuw6dhaXMnLCdtb2RlJyx0aGlzLnZhbHVlKSI+CiAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iZGl2IiBzZWxlY3RlZD0ic2VsZWN0ZWQiPkRpdmlzaW9uPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0ibGV2ZWwiPk5pdmVhdTwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9ImV0YWIiPsOJdGFibGlzc2VtZW50PC9vcHRpb24+CiAgICAgICAgICAgICAgICA8L3NlbGVjdD4KICAgICAgICAgICAgPC90ZD4KICAgICAgICAgICAgPHRkIHN0eWxlPSJ0ZXh0LWFsaWduOmxlZnQ7Ij48ZGl2IGNsYXNzPSJsdmwtY2hlY2stY29udGFpbmVyIj48bGFiZWwgY2xhc3M9Imx2bC1jaGVjay1pdGVtIj48aW5wdXQgdHlwZT0iY2hlY2tib3giIGNoZWNrZWQ9ImNoZWNrZWQiIG9uY2hhbmdlPSJ0b2dnbGVTdWJMZXZlbCgnRnJhbsOnYWlzJywnMm5kZScpIj4ybmRlPC9sYWJlbD48bGFiZWwgY2xhc3M9Imx2bC1jaGVjay1pdGVtIj48aW5wdXQgdHlwZT0iY2hlY2tib3giIGNoZWNrZWQ9ImNoZWNrZWQiIG9uY2hhbmdlPSJ0b2dnbGVTdWJMZXZlbCgnRnJhbsOnYWlzJywnMcOocmUnKSI+McOocmU8L2xhYmVsPjxsYWJlbCBjbGFzcz0ibHZsLWNoZWNrLWl0ZW0iPjxpbnB1dCB0eXBlPSJjaGVja2JveCIgY2hlY2tlZD0iY2hlY2tlZCIgb25jaGFuZ2U9InRvZ2dsZVN1YkxldmVsKCdGcmFuw6dhaXMnLCdUZXJtaW5hbGUnKSI+VGVybWluYWxlPC9sYWJlbD48L2Rpdj48L3RkPgogICAgICAgICAgICA8dGQgc3R5bGU9IndpZHRoOjUwcHg7Ij48YnV0dG9uIGNsYXNzPSJidG4gYnRuLWRhbmdlciBidG4tc20iIG9uY2xpY2s9ImRlbFN1YmplY3QoJ0ZyYW7Dp2FpcycpIj7DlzwvYnV0dG9uPjwvdGQ+CiAgICAgICAgPC90cj48dHI+CiAgICAgICAgICAgIDx0ZCBzdHlsZT0id2lkdGg6ODBweDsiPjxpbnB1dCB0eXBlPSJ0ZXh0IiBwbGFjZWhvbGRlcj0iQ29kZSIgc3R5bGU9ImZvbnQtZmFtaWx5Om1vbm9zcGFjZTsgdGV4dC1hbGlnbjpjZW50ZXI7IiBvbmNoYW5nZT0idXBkYXRlU3ViamVjdE1ldGEoJ0hpc3QtR8OpbycsJ2NvZGUnLHRoaXMudmFsdWUpIj48L3RkPgogICAgICAgICAgICA8dGQ+PGlucHV0IHR5cGU9InRleHQiIHZhbHVlPSJIaXN0LUfDqW8iIHN0eWxlPSJmb250LXdlaWdodDpib2xkOyIgb25jaGFuZ2U9InJlbmFtZVN1YmplY3QoJ0hpc3QtR8OpbycsdGhpcy52YWx1ZSkiPjwvdGQ+CiAgICAgICAgICAgIDx0ZCBzdHlsZT0id2lkdGg6MTgwcHg7Ij48c2VsZWN0IHN0eWxlPSJmb250LXNpemU6MC45cmVtOyIgb25jaGFuZ2U9InVwZGF0ZVN1YmplY3RNZXRhKCdIaXN0LUfDqW8nLCdwYXJlbnQnLHRoaXMudmFsdWUpIj48b3B0aW9uIHZhbHVlPSIiIHNlbGVjdGVkPSJzZWxlY3RlZCI+KEF1Y3VuIC0gUmFjaW5lKTwvb3B0aW9uPjxvcHRpb24gdmFsdWU9IkF1dG9ub21pZSBFUExFIj5BdXRvbm9taWUgRVBMRTwvb3B0aW9uPjxvcHRpb24gdmFsdWU9IkVNQyI+RU1DPC9vcHRpb24+PG9wdGlvbiB2YWx1ZT0iRVBTIj5FUFM8L29wdGlvbj48b3B0aW9uIHZhbHVlPSJFbnMuIFNjaWVudGlmaXF1ZSI+RW5zLiBTY2llbnRpZmlxdWU8L29wdGlvbj48b3B0aW9uIHZhbHVlPSJGcmFuw6dhaXMiPkZyYW7Dp2Fpczwvb3B0aW9uPjxvcHRpb24gdmFsdWU9IkxWQSI+TFZBPC9vcHRpb24+PG9wdGlvbiB2YWx1ZT0iTFZCIj5MVkI8L29wdGlvbj48b3B0aW9uIHZhbHVlPSJNQXRocyI+TUF0aHM8L29wdGlvbj48b3B0aW9uIHZhbHVlPSJNYXRocyAoVEMpIj5NYXRocyAoVEMpPC9vcHRpb24+PG9wdGlvbiB2YWx1ZT0iUGhpbG9zb3BoaWUiPlBoaWxvc29waGllPC9vcHRpb24+PG9wdGlvbiB2YWx1ZT0iUGh5cy1DaGkgKFRDKSI+UGh5cy1DaGkgKFRDKTwvb3B0aW9uPjxvcHRpb24gdmFsdWU9IlNFUyI+U0VTPC9vcHRpb24+PG9wdGlvbiB2YWx1ZT0iU1RNRyAtIEdlc3Rpb24gZXQgRmluYW5jZSI+U1RNRyAtIEdlc3Rpb24gZXQgRmluYW5jZTwvb3B0aW9uPjxvcHRpb24gdmFsdWU9IlNUTUcgLSBNZXJjYXRpcXVlIChNYXJrZXRpbmcpIj5TVE1HIC0gTWVyY2F0aXF1ZSAoTWFya2V0aW5nKTwvb3B0aW9uPjxvcHRpb24gdmFsdWU9IlNUTUcgLSBSZXNzb3VyY2VzIEh1bWFpbmVzIGV0IENvbW0uIj5TVE1HIC0gUmVzc291cmNlcyBIdW1haW5lcyBldCBDb21tLjwvb3B0aW9uPjxvcHRpb24gdmFsdWU9IlNUTUcgLSBTeXN0w6htZXMgZCdJbmZvcm1hdGlvbiBkZSBHZXN0aW9uIj5TVE1HIC0gU3lzdMOobWVzIGQnSW5mb3JtYXRpb24gZGUgR2VzdGlvbjwvb3B0aW9uPjxvcHRpb24gdmFsdWU9IlNWVCAoVEMpIj5TVlQgKFRDKTwvb3B0aW9uPjxvcHRpb24gdmFsdWU9IlVOU1MiPlVOU1M8L29wdGlvbj48L3NlbGVjdD48L3RkPgogICAgICAgICAgICAKICAgICAgICAgICAgPHRkIHN0eWxlPSJ3aWR0aDoxNDBweDsgdGV4dC1hbGlnbjpjZW50ZXI7Ij4KICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYnRuIGJ0bi1zbSIgc3R5bGU9ImJhY2tncm91bmQ6d2hpdGU7IGNvbG9yOiM3ZjhjOGQ7IGJvcmRlcjoxcHggc29saWQgI2JkYzNjNzsgd2lkdGg6MTAwJTsgZGlzcGxheTpmbGV4OyBqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyOyBhbGlnbi1pdGVtczpjZW50ZXI7IGdhcDo1cHg7IiBvbmNsaWNrPSJvcGVuTGlua2VkU3ViamVjdHNNb2RhbCgnSGlzdC1Hw6lvJykiPgogICAgICAgICAgICAgICAgPHNwYW4+8J+UlyBHw6lyZXI8L3NwYW4+CiAgICAgICAgICAgICAgICA8c3BhbiBzdHlsZT0iYmFja2dyb3VuZDpyZ2JhKDAsMCwwLDAuMik7IHBhZGRpbmc6MXB4IDZweDsgYm9yZGVyLXJhZGl1czoxMHB4OyBmb250LXNpemU6MC43NXJlbTsiPjA8L3NwYW4+CiAgICAgICAgICAgIDwvYnV0dG9uPgogICAgICAgIDwvdGQ+CgogICAgICAgICAgICA8dGQgc3R5bGU9IndpZHRoOjE2MHB4OyI+CiAgICAgICAgICAgICAgICA8c2VsZWN0IG9uY2hhbmdlPSJ1cGRhdGVTdWJqZWN0TWV0YSgnSGlzdC1Hw6lvJywnbW9kZScsdGhpcy52YWx1ZSkiPgogICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9ImRpdiIgc2VsZWN0ZWQ9InNlbGVjdGVkIj5EaXZpc2lvbjwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9ImxldmVsIj5OaXZlYXU8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJldGFiIj7DiXRhYmxpc3NlbWVudDwvb3B0aW9uPgogICAgICAgICAgICAgICAgPC9zZWxlY3Q+CiAgICAgICAgICAgIDwvdGQ+CiAgICAgICAgICAgIDx0ZCBzdHlsZT0idGV4dC1hbGlnbjpsZWZ0OyI+PGRpdiBjbGFzcz0ibHZsLWNoZWNrLWNvbnRhaW5lciI+PGxhYmVsIGNsYXNzPSJsdmwtY2hlY2staXRlbSI+PGlucHV0IHR5cGU9ImNoZWNrYm94IiBjaGVja2VkPSJjaGVja2VkIiBvbmNoYW5nZT0idG9nZ2xlU3ViTGV2ZWwoJ0hpc3QtR8OpbycsJzJuZGUnKSI+Mm5kZTwvbGFiZWw+PGxhYmVsIGNsYXNzPSJsdmwtY2hlY2staXRlbSI+PGlucHV0IHR5cGU9ImNoZWNrYm94IiBjaGVja2VkPSJjaGVja2VkIiBvbmNoYW5nZT0idG9nZ2xlU3ViTGV2ZWwoJ0hpc3QtR8OpbycsJzHDqHJlJykiPjHDqHJlPC9sYWJlbD48bGFiZWwgY2xhc3M9Imx2bC1jaGVjay1pdGVtIj48aW5wdXQgdHlwZT0iY2hlY2tib3giIGNoZWNrZWQ9ImNoZWNrZWQiIG9uY2hhbmdlPSJ0b2dnbGVTdWJMZXZlbCgnSGlzdC1Hw6lvJywnVGVybWluYWxlJykiPlRlcm1pbmFsZTwvbGFiZWw+PC9kaXY+PC90ZD4KICAgICAgICAgICAgPHRkIHN0eWxlPSJ3aWR0aDo1MHB4OyI+PGJ1dHRvbiBjbGFzcz0iYnRuIGJ0bi1kYW5nZXIgYnRuLXNtIiBvbmNsaWNrPSJkZWxTdWJqZWN0KCdIaXN0LUfDqW8nKSI+w5c8L2J1dHRvbj48L3RkPgogICAgICAgIDwvdHI+PHRyPgogICAgICAgICAgICA8dGQgc3R5bGU9IndpZHRoOjgwcHg7Ij48aW5wdXQgdHlwZT0idGV4dCIgcGxhY2Vob2xkZXI9IkNvZGUiIHN0eWxlPSJmb250LWZhbWlseTptb25vc3BhY2U7IHRleHQtYWxpZ246Y2VudGVyOyIgb25jaGFuZ2U9InVwZGF0ZVN1YmplY3RNZXRhKCdMVkEnLCdjb2RlJyx0aGlzLnZhbHVlKSI+PC90ZD4KICAgICAgICAgICAgPHRkPjxpbnB1dCB0eXBlPSJ0ZXh0IiB2YWx1ZT0iTFZBIiBzdHlsZT0iZm9udC13ZWlnaHQ6Ym9sZDsiIG9uY2hhbmdlPSJyZW5hbWVTdWJqZWN0KCdMVkEnLHRoaXMudmFsdWUpIj48L3RkPgogICAgICAgICAgICA8dGQgc3R5bGU9IndpZHRoOjE4MHB4OyI+PHNlbGVjdCBzdHlsZT0iZm9udC1zaXplOjAuOXJlbTsiIG9uY2hhbmdlPSJ1cGRhdGVTdWJqZWN0TWV0YSgnTFZBJywncGFyZW50Jyx0aGlzLnZhbHVlKSI+PG9wdGlvbiB2YWx1ZT0iIiBzZWxlY3RlZD0ic2VsZWN0ZWQiPihBdWN1biAtIFJhY2luZSk8L29wdGlvbj48b3B0aW9uIHZhbHVlPSJBdXRvbm9taWUgRVBMRSI+QXV0b25vbWllIEVQTEU8L29wdGlvbj48b3B0aW9uIHZhbHVlPSJFTUMiPkVNQzwvb3B0aW9uPjxvcHRpb24gdmFsdWU9IkVQUyI+RVBTPC9vcHRpb24+PG9wdGlvbiB2YWx1ZT0iRW5zLiBTY2llbnRpZmlxdWUiPkVucy4gU2NpZW50aWZpcXVlPC9vcHRpb24+PG9wdGlvbiB2YWx1ZT0iRnJhbsOnYWlzIj5GcmFuw6dhaXM8L29wdGlvbj48b3B0aW9uIHZhbHVlPSJIaXN0LUfDqW8iPkhpc3QtR8Opbzwvb3B0aW9uPjxvcHRpb24gdmFsdWU9IkxWQiI+TFZCPC9vcHRpb24+PG9wdGlvbiB2YWx1ZT0iTUF0aHMiPk1BdGhzPC9vcHRpb24+PG9wdGlvbiB2YWx1ZT0iTWF0aHMgKFRDKSI+TWF0aHMgKFRDKTwvb3B0aW9uPjxvcHRpb24gdmFsdWU9IlBoaWxvc29waGllIj5QaGlsb3NvcGhpZTwvb3B0aW9uPjxvcHRpb24gdmFsdWU9IlBoeXMtQ2hpIChUQykiPlBoeXMtQ2hpIChUQyk8L29wdGlvbj48b3B0aW9uIHZhbHVlPSJTRVMiPlNFUzwvb3B0aW9uPjxvcHRpb24gdmFsdWU9IlNUTUcgLSBHZXN0aW9uIGV0IEZpbmFuY2UiPlNUTUcgLSBHZXN0aW9uIGV0IEZpbmFuY2U8L29wdGlvbj48b3B0aW9uIHZhbHVlPSJTVE1HIC0gTWVyY2F0aXF1ZSAoTWFya2V0aW5nKSI+U1RNRyAtIE1lcmNhdGlxdWUgKE1hcmtldGluZyk8L29wdGlvbj48b3B0aW9uIHZhbHVlPSJTVE1HIC0gUmVzc291cmNlcyBIdW1haW5lcyBldCBDb21tLiI+U1RNRyAtIFJlc3NvdXJjZXMgSHVtYWluZXMgZXQgQ29tbS48L29wdGlvbj48b3B0aW9uIHZhbHVlPSJTVE1HIC0gU3lzdMOobWVzIGQnSW5mb3JtYXRpb24gZGUgR2VzdGlvbiI+U1RNRyAtIFN5c3TDqG1lcyBkJ0luZm9ybWF0aW9uIGRlIEdlc3Rpb248L29wdGlvbj48b3B0aW9uIHZhbHVlPSJTVlQgKFRDKSI+U1ZUIChUQyk8L29wdGlvbj48b3B0aW9uIHZhbHVlPSJVTlNTIj5VTlNTPC9vcHRpb24+PC9zZWxlY3Q+PC90ZD4KICAgICAgICAgICAgCiAgICAgICAgICAgIDx0ZCBzdHlsZT0id2lkdGg6MTQwcHg7IHRleHQtYWxpZ246Y2VudGVyOyI+CiAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImJ0biBidG4tc20iIHN0eWxlPSJiYWNrZ3JvdW5kOndoaXRlOyBjb2xvcjojN2Y4YzhkOyBib3JkZXI6MXB4IHNvbGlkICNiZGMzYzc7IHdpZHRoOjEwMCU7IGRpc3BsYXk6ZmxleDsganVzdGlmeS1jb250ZW50OmNlbnRlcjsgYWxpZ24taXRlbXM6Y2VudGVyOyBnYXA6NXB4OyIgb25jbGljaz0ib3BlbkxpbmtlZFN1YmplY3RzTW9kYWwoJ0xWQScpIj4KICAgICAgICAgICAgICAgIDxzcGFuPvCflJcgR8OpcmVyPC9zcGFuPgogICAgICAgICAgICAgICAgPHNwYW4gc3R5bGU9ImJhY2tncm91bmQ6cmdiYSgwLDAsMCwwLjIpOyBwYWRkaW5nOjFweCA2cHg7IGJvcmRlci1yYWRpdXM6MTBweDsgZm9udC1zaXplOjAuNzVyZW07Ij4wPC9zcGFuPgogICAgICAgICAgICA8L2J1dHRvbj4KICAgICAgICA8L3RkPgoKICAgICAgICAgICAgPHRkIHN0eWxlPSJ3aWR0aDoxNjBweDsiPgogICAgICAgICAgICAgICAgPHNlbGVjdCBvbmNoYW5nZT0idXBkYXRlU3ViamVjdE1ldGEoJ0xWQScsJ21vZGUnLHRoaXMudmFsdWUpIj4KICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJkaXYiIHNlbGVjdGVkPSJzZWxlY3RlZCI+RGl2aXNpb248L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJsZXZlbCI+Tml2ZWF1PC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iZXRhYiI+w4l0YWJsaXNzZW1lbnQ8L29wdGlvbj4KICAgICAgICAgICAgICAgIDwvc2VsZWN0PgogICAgICAgICAgICA8L3RkPgogICAgICAgICAgICA8dGQgc3R5bGU9InRleHQtYWxpZ246bGVmdDsiPjxkaXYgY2xhc3M9Imx2bC1jaGVjay1jb250YWluZXIiPjxsYWJlbCBjbGFzcz0ibHZsLWNoZWNrLWl0ZW0iPjxpbnB1dCB0eXBlPSJjaGVja2JveCIgY2hlY2tlZD0iY2hlY2tlZCIgb25jaGFuZ2U9InRvZ2dsZVN1YkxldmVsKCdMVkEnLCcybmRlJykiPjJuZGU8L2xhYmVsPjxsYWJlbCBjbGFzcz0ibHZsLWNoZWNrLWl0ZW0iPjxpbnB1dCB0eXBlPSJjaGVja2JveCIgY2hlY2tlZD0iY2hlY2tlZCIgb25jaGFuZ2U9InRvZ2dsZVN1YkxldmVsKCdMVkEnLCcxw6hyZScpIj4xw6hyZTwvbGFiZWw+PGxhYmVsIGNsYXNzPSJsdmwtY2hlY2staXRlbSI+PGlucHV0IHR5cGU9ImNoZWNrYm94IiBjaGVja2VkPSJjaGVja2VkIiBvbmNoYW5nZT0idG9nZ2xlU3ViTGV2ZWwoJ0xWQScsJ1Rlcm1pbmFsZScpIj5UZXJtaW5hbGU8L2xhYmVsPjwvZGl2PjwvdGQ+CiAgICAgICAgICAgIDx0ZCBzdHlsZT0id2lkdGg6NTBweDsiPjxidXR0b24gY2xhc3M9ImJ0biBidG4tZGFuZ2VyIGJ0bi1zbSIgb25jbGljaz0iZGVsU3ViamVjdCgnTFZBJykiPsOXPC9idXR0b24+PC90ZD4KICAgICAgICA8L3RyPjx0cj4KICAgICAgICAgICAgPHRkIHN0eWxlPSJ3aWR0aDo4MHB4OyI+PGlucHV0IHR5cGU9InRleHQiIHBsYWNlaG9sZGVyPSJDb2RlIiBzdHlsZT0iZm9udC1mYW1pbHk6bW9ub3NwYWNlOyB0ZXh0LWFsaWduOmNlbnRlcjsiIG9uY2hhbmdlPSJ1cGRhdGVTdWJqZWN0TWV0YSgnTFZCJywnY29kZScsdGhpcy52YWx1ZSkiPjwvdGQ+CiAgICAgICAgICAgIDx0ZD48aW5wdXQgdHlwZT0idGV4dCIgdmFsdWU9IkxWQiIgc3R5bGU9ImZvbnQtd2VpZ2h0OmJvbGQ7IiBvbmNoYW5nZT0icmVuYW1lU3ViamVjdCgnTFZCJyx0aGlzLnZhbHVlKSI+PC90ZD4KICAgICAgICAgICAgPHRkIHN0eWxlPSJ3aWR0aDoxODBweDsiPjxzZWxlY3Qgc3R5bGU9ImZvbnQtc2l6ZTowLjlyZW07IiBvbmNoYW5nZT0idXBkYXRlU3ViamVjdE1ldGEoJ0xWQicsJ3BhcmVudCcsdGhpcy52YWx1ZSkiPjxvcHRpb24gdmFsdWU9IiIgc2VsZWN0ZWQ9InNlbGVjdGVkIj4oQXVjdW4gLSBSYWNpbmUpPC9vcHRpb24+PG9wdGlvbiB2YWx1ZT0iQXV0b25vbWllIEVQTEUiPkF1dG9ub21pZSBFUExFPC9vcHRpb24+PG9wdGlvbiB2YWx1ZT0iRU1DIj5FTUM8L29wdGlvbj48b3B0aW9uIHZhbHVlPSJFUFMiPkVQUzwvb3B0aW9uPjxvcHRpb24gdmFsdWU9IkVucy4gU2NpZW50aWZpcXVlIj5FbnMuIFNjaWVudGlmaXF1ZTwvb3B0aW9uPjxvcHRpb24gdmFsdWU9IkZyYW7Dp2FpcyI+RnJhbsOnYWlzPC9vcHRpb24+PG9wdGlvbiB2YWx1ZT0iSGlzdC1Hw6lvIj5IaXN0LUfDqW88L29wdGlvbj48b3B0aW9uIHZhbHVlPSJMVkEiPkxWQTwvb3B0aW9uPjxvcHRpb24gdmFsdWU9Ik1BdGhzIj5NQXRoczwvb3B0aW9uPjxvcHRpb24gdmFsdWU9Ik1hdGhzIChUQykiPk1hdGhzIChUQyk8L29wdGlvbj48b3B0aW9uIHZhbHVlPSJQaGlsb3NvcGhpZSI+UGhpbG9zb3BoaWU8L29wdGlvbj48b3B0aW9uIHZhbHVlPSJQaHlzLUNoaSAoVEMpIj5QaHlzLUNoaSAoVEMpPC9vcHRpb24+PG9wdGlvbiB2YWx1ZT0iU0VTIj5TRVM8L29wdGlvbj48b3B0aW9uIHZhbHVlPSJTVE1HIC0gR2VzdGlvbiBldCBGaW5hbmNlIj5TVE1HIC0gR2VzdGlvbiBldCBGaW5hbmNlPC9vcHRpb24+PG9wdGlvbiB2YWx1ZT0iU1RNRyAtIE1lcmNhdGlxdWUgKE1hcmtldGluZykiPlNUTUcgLSBNZXJjYXRpcXVlIChNYXJrZXRpbmcpPC9vcHRpb24+PG9wdGlvbiB2YWx1ZT0iU1RNRyAtIFJlc3NvdXJjZXMgSHVtYWluZXMgZXQgQ29tbS4iPlNUTUcgLSBSZXNzb3VyY2VzIEh1bWFpbmVzIGV0IENvbW0uPC9vcHRpb24+PG9wdGlvbiB2YWx1ZT0iU1RNRyAtIFN5c3TDqG1lcyBkJ0luZm9ybWF0aW9uIGRlIEdlc3Rpb24iPlNUTUcgLSBTeXN0w6htZXMgZCdJbmZvcm1hdGlvbiBkZSBHZXN0aW9uPC9vcHRpb24+PG9wdGlvbiB2YWx1ZT0iU1ZUIChUQykiPlNWVCAoVEMpPC9vcHRpb24+PG9wdGlvbiB2YWx1ZT0iVU5TUyI+VU5TUzwvb3B0aW9uPjwvc2VsZWN0PjwvdGQ+CiAgICAgICAgICAgIAogICAgICAgICAgICA8dGQgc3R5bGU9IndpZHRoOjE0MHB4OyB0ZXh0LWFsaWduOmNlbnRlcjsiPgogICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJidG4gYnRuLXNtIiBzdHlsZT0iYmFja2dyb3VuZDp3aGl0ZTsgY29sb3I6IzdmOGM4ZDsgYm9yZGVyOjFweCBzb2xpZCAjYmRjM2M3OyB3aWR0aDoxMDAlOyBkaXNwbGF5OmZsZXg7IGp1c3RpZnktY29udGVudDpjZW50ZXI7IGFsaWduLWl0ZW1zOmNlbnRlcjsgZ2FwOjVweDsiIG9uY2xpY2s9Im9wZW5MaW5rZWRTdWJqZWN0c01vZGFsKCdMVkInKSI+CiAgICAgICAgICAgICAgICA8c3Bhbj7wn5SXIEfDqXJlcjwvc3Bhbj4KICAgICAgICAgICAgICAgIDxzcGFuIHN0eWxlPSJiYWNrZ3JvdW5kOnJnYmEoMCwwLDAsMC4yKTsgcGFkZGluZzoxcHggNnB4OyBib3JkZXItcmFkaXVzOjEwcHg7IGZvbnQtc2l6ZTowLjc1cmVtOyI+MDwvc3Bhbj4KICAgICAgICAgICAgPC9idXR0b24+CiAgICAgICAgPC90ZD4KCiAgICAgICAgICAgIDx0ZCBzdHlsZT0id2lkdGg6MTYwcHg7Ij4KICAgICAgICAgICAgICAgIDxzZWxlY3Qgb25jaGFuZ2U9InVwZGF0ZVN1YmplY3RNZXRhKCdMVkInLCdtb2RlJyx0aGlzLnZhbHVlKSI+CiAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iZGl2IiBzZWxlY3RlZD0ic2VsZWN0ZWQiPkRpdmlzaW9uPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0ibGV2ZWwiPk5pdmVhdTwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9ImV0YWIiPsOJdGFibGlzc2VtZW50PC9vcHRpb24+CiAgICAgICAgICAgICAgICA8L3NlbGVjdD4KICAgICAgICAgICAgPC90ZD4KICAgICAgICAgICAgPHRkIHN0eWxlPSJ0ZXh0LWFsaWduOmxlZnQ7Ij48ZGl2IGNsYXNzPSJsdmwtY2hlY2stY29udGFpbmVyIj48bGFiZWwgY2xhc3M9Imx2bC1jaGVjay1pdGVtIj48aW5wdXQgdHlwZT0iY2hlY2tib3giIGNoZWNrZWQ9ImNoZWNrZWQiIG9uY2hhbmdlPSJ0b2dnbGVTdWJMZXZlbCgnTFZCJywnMm5kZScpIj4ybmRlPC9sYWJlbD48bGFiZWwgY2xhc3M9Imx2bC1jaGVjay1pdGVtIj48aW5wdXQgdHlwZT0iY2hlY2tib3giIGNoZWNrZWQ9ImNoZWNrZWQiIG9uY2hhbmdlPSJ0b2dnbGVTdWJMZXZlbCgnTFZCJywnMcOocmUnKSI+McOocmU8L2xhYmVsPjxsYWJlbCBjbGFzcz0ibHZsLWNoZWNrLWl0ZW0iPjxpbnB1dCB0eXBlPSJjaGVja2JveCIgY2hlY2tlZD0iY2hlY2tlZCIgb25jaGFuZ2U9InRvZ2dsZVN1YkxldmVsKCdMVkInLCdUZXJtaW5hbGUnKSI+VGVybWluYWxlPC9sYWJlbD48L2Rpdj48L3RkPgogICAgICAgICAgICA8dGQgc3R5bGU9IndpZHRoOjUwcHg7Ij48YnV0dG9uIGNsYXNzPSJidG4gYnRuLWRhbmdlciBidG4tc20iIG9uY2xpY2s9ImRlbFN1YmplY3QoJ0xWQicpIj7DlzwvYnV0dG9uPjwvdGQ+CiAgICAgICAgPC90cj48dHI+CiAgICAgICAgICAgIDx0ZCBzdHlsZT0id2lkdGg6ODBweDsiPjxpbnB1dCB0eXBlPSJ0ZXh0IiBwbGFjZWhvbGRlcj0iQ29kZSIgc3R5bGU9ImZvbnQtZmFtaWx5Om1vbm9zcGFjZTsgdGV4dC1hbGlnbjpjZW50ZXI7IiBvbmNoYW5nZT0idXBkYXRlU3ViamVjdE1ldGEoJ01BdGhzJywnY29kZScsdGhpcy52YWx1ZSkiPjwvdGQ+CiAgICAgICAgICAgIDx0ZD48aW5wdXQgdHlwZT0idGV4dCIgdmFsdWU9Ik1BdGhzIiBzdHlsZT0iZm9udC13ZWlnaHQ6Ym9sZDsiIG9uY2hhbmdlPSJyZW5hbWVTdWJqZWN0KCdNQXRocycsdGhpcy52YWx1ZSkiPjwvdGQ+CiAgICAgICAgICAgIDx0ZCBzdHlsZT0id2lkdGg6MTgwcHg7Ij48c2VsZWN0IHN0eWxlPSJmb250LXNpemU6MC45cmVtOyIgb25jaGFuZ2U9InVwZGF0ZVN1YmplY3RNZXRhKCdNQXRocycsJ3BhcmVudCcsdGhpcy52YWx1ZSkiPjxvcHRpb24gdmFsdWU9IiIgc2VsZWN0ZWQ9InNlbGVjdGVkIj4oQXVjdW4gLSBSYWNpbmUpPC9vcHRpb24+PG9wdGlvbiB2YWx1ZT0iQXV0b25vbWllIEVQTEUiPkF1dG9ub21pZSBFUExFPC9vcHRpb24+PG9wdGlvbiB2YWx1ZT0iRU1DIj5FTUM8L29wdGlvbj48b3B0aW9uIHZhbHVlPSJFUFMiPkVQUzwvb3B0aW9uPjxvcHRpb24gdmFsdWU9IkVucy4gU2NpZW50aWZpcXVlIj5FbnMuIFNjaWVudGlmaXF1ZTwvb3B0aW9uPjxvcHRpb24gdmFsdWU9IkZyYW7Dp2FpcyI+RnJhbsOnYWlzPC9vcHRpb24+PG9wdGlvbiB2YWx1ZT0iSGlzdC1Hw6lvIj5IaXN0LUfDqW88L29wdGlvbj48b3B0aW9uIHZhbHVlPSJMVkEiPkxWQTwvb3B0aW9uPjxvcHRpb24gdmFsdWU9IkxWQiI+TFZCPC9vcHRpb24+PG9wdGlvbiB2YWx1ZT0iTWF0aHMgKFRDKSI+TWF0aHMgKFRDKTwvb3B0aW9uPjxvcHRpb24gdmFsdWU9IlBoaWxvc29waGllIj5QaGlsb3NvcGhpZTwvb3B0aW9uPjxvcHRpb24gdmFsdWU9IlBoeXMtQ2hpIChUQykiPlBoeXMtQ2hpIChUQyk8L29wdGlvbj48b3B0aW9uIHZhbHVlPSJTRVMiPlNFUzwvb3B0aW9uPjxvcHRpb24gdmFsdWU9IlNUTUcgLSBHZXN0aW9uIGV0IEZpbmFuY2UiPlNUTUcgLSBHZXN0aW9uIGV0IEZpbmFuY2U8L29wdGlvbj48b3B0aW9uIHZhbHVlPSJTVE1HIC0gTWVyY2F0aXF1ZSAoTWFya2V0aW5nKSI+U1RNRyAtIE1lcmNhdGlxdWUgKE1hcmtldGluZyk8L29wdGlvbj48b3B0aW9uIHZhbHVlPSJTVE1HIC0gUmVzc291cmNlcyBIdW1haW5lcyBldCBDb21tLiI+U1RNRyAtIFJlc3NvdXJjZXMgSHVtYWluZXMgZXQgQ29tbS48L29wdGlvbj48b3B0aW9uIHZhbHVlPSJTVE1HIC0gU3lzdMOobWVzIGQnSW5mb3JtYXRpb24gZGUgR2VzdGlvbiI+U1RNRyAtIFN5c3TDqG1lcyBkJ0luZm9ybWF0aW9uIGRlIEdlc3Rpb248L29wdGlvbj48b3B0aW9uIHZhbHVlPSJTVlQgKFRDKSI+U1ZUIChUQyk8L29wdGlvbj48b3B0aW9uIHZhbHVlPSJVTlNTIj5VTlNTPC9vcHRpb24+PC9zZWxlY3Q+PC90ZD4KICAgICAgICAgICAgCiAgICAgICAgICAgIDx0ZCBzdHlsZT0id2lkdGg6MTQwcHg7IHRleHQtYWxpZ246Y2VudGVyOyI+CiAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImJ0biBidG4tc20iIHN0eWxlPSJiYWNrZ3JvdW5kOndoaXRlOyBjb2xvcjojN2Y4YzhkOyBib3JkZXI6MXB4IHNvbGlkICNiZGMzYzc7IHdpZHRoOjEwMCU7IGRpc3BsYXk6ZmxleDsganVzdGlmeS1jb250ZW50OmNlbnRlcjsgYWxpZ24taXRlbXM6Y2VudGVyOyBnYXA6NXB4OyIgb25jbGljaz0ib3BlbkxpbmtlZFN1YmplY3RzTW9kYWwoJ01BdGhzJykiPgogICAgICAgICAgICAgICAgPHNwYW4+8J+UlyBHw6lyZXI8L3NwYW4+CiAgICAgICAgICAgICAgICA8c3BhbiBzdHlsZT0iYmFja2dyb3VuZDpyZ2JhKDAsMCwwLDAuMik7IHBhZGRpbmc6MXB4IDZweDsgYm9yZGVyLXJhZGl1czoxMHB4OyBmb250LXNpemU6MC43NXJlbTsiPjA8L3NwYW4+CiAgICAgICAgICAgIDwvYnV0dG9uPgogICAgICAgIDwvdGQ+CgogICAgICAgICAgICA8dGQgc3R5bGU9IndpZHRoOjE2MHB4OyI+CiAgICAgICAgICAgICAgICA8c2VsZWN0IG9uY2hhbmdlPSJ1cGRhdGVTdWJqZWN0TWV0YSgnTUF0aHMnLCdtb2RlJyx0aGlzLnZhbHVlKSI+CiAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iZGl2IiBzZWxlY3RlZD0ic2VsZWN0ZWQiPkRpdmlzaW9uPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0ibGV2ZWwiPk5pdmVhdTwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9ImV0YWIiPsOJdGFibGlzc2VtZW50PC9vcHRpb24+CiAgICAgICAgICAgICAgICA8L3NlbGVjdD4KICAgICAgICAgICAgPC90ZD4KICAgICAgICAgICAgPHRkIHN0eWxlPSJ0ZXh0LWFsaWduOmxlZnQ7Ij48ZGl2IGNsYXNzPSJsdmwtY2hlY2stY29udGFpbmVyIj48bGFiZWwgY2xhc3M9Imx2bC1jaGVjay1pdGVtIj48aW5wdXQgdHlwZT0iY2hlY2tib3giIGNoZWNrZWQ9ImNoZWNrZWQiIG9uY2hhbmdlPSJ0b2dnbGVTdWJMZXZlbCgnTUF0aHMnLCcybmRlJykiPjJuZGU8L2xhYmVsPjxsYWJlbCBjbGFzcz0ibHZsLWNoZWNrLWl0ZW0iPjxpbnB1dCB0eXBlPSJjaGVja2JveCIgY2hlY2tlZD0iY2hlY2tlZCIgb25jaGFuZ2U9InRvZ2dsZVN1YkxldmVsKCdNQXRocycsJzHDqHJlJykiPjHDqHJlPC9sYWJlbD48bGFiZWwgY2xhc3M9Imx2bC1jaGVjay1pdGVtIj48aW5wdXQgdHlwZT0iY2hlY2tib3giIGNoZWNrZWQ9ImNoZWNrZWQiIG9uY2hhbmdlPSJ0b2dnbGVTdWJMZXZlbCgnTUF0aHMnLCdUZXJtaW5hbGUnKSI+VGVybWluYWxlPC9sYWJlbD48L2Rpdj48L3RkPgogICAgICAgICAgICA8dGQgc3R5bGU9IndpZHRoOjUwcHg7Ij48YnV0dG9uIGNsYXNzPSJidG4gYnRuLWRhbmdlciBidG4tc20iIG9uY2xpY2s9ImRlbFN1YmplY3QoJ01BdGhzJykiPsOXPC9idXR0b24+PC90ZD4KICAgICAgICA8L3RyPjx0cj4KICAgICAgICAgICAgPHRkIHN0eWxlPSJ3aWR0aDo4MHB4OyI+PGlucHV0IHR5cGU9InRleHQiIHBsYWNlaG9sZGVyPSJDb2RlIiBzdHlsZT0iZm9udC1mYW1pbHk6bW9ub3NwYWNlOyB0ZXh0LWFsaWduOmNlbnRlcjsiIG9uY2hhbmdlPSJ1cGRhdGVTdWJqZWN0TWV0YSgnTWF0aHMgKFRDKScsJ2NvZGUnLHRoaXMudmFsdWUpIj48L3RkPgogICAgICAgICAgICA8dGQ+PGlucHV0IHR5cGU9InRleHQiIHZhbHVlPSJNYXRocyAoVEMpIiBzdHlsZT0iZm9udC13ZWlnaHQ6Ym9sZDsiIG9uY2hhbmdlPSJyZW5hbWVTdWJqZWN0KCdNYXRocyAoVEMpJyx0aGlzLnZhbHVlKSI+PC90ZD4KICAgICAgICAgICAgPHRkIHN0eWxlPSJ3aWR0aDoxODBweDsiPjxzZWxlY3Qgc3R5bGU9ImZvbnQtc2l6ZTowLjlyZW07IiBvbmNoYW5nZT0idXBkYXRlU3ViamVjdE1ldGEoJ01hdGhzIChUQyknLCdwYXJlbnQnLHRoaXMudmFsdWUpIj48b3B0aW9uIHZhbHVlPSIiIHNlbGVjdGVkPSJzZWxlY3RlZCI+KEF1Y3VuIC0gUmFjaW5lKTwvb3B0aW9uPjxvcHRpb24gdmFsdWU9IkF1dG9ub21pZSBFUExFIj5BdXRvbm9taWUgRVBMRTwvb3B0aW9uPjxvcHRpb24gdmFsdWU9IkVNQyI+RU1DPC9vcHRpb24+PG9wdGlvbiB2YWx1ZT0iRVBTIj5FUFM8L29wdGlvbj48b3B0aW9uIHZhbHVlPSJFbnMuIFNjaWVudGlmaXF1ZSI+RW5zLiBTY2llbnRpZmlxdWU8L29wdGlvbj48b3B0aW9uIHZhbHVlPSJGcmFuw6dhaXMiPkZyYW7Dp2Fpczwvb3B0aW9uPjxvcHRpb24gdmFsdWU9Ikhpc3QtR8OpbyI+SGlzdC1Hw6lvPC9vcHRpb24+PG9wdGlvbiB2YWx1ZT0iTFZBIj5MVkE8L29wdGlvbj48b3B0aW9uIHZhbHVlPSJMVkIiPkxWQjwvb3B0aW9uPjxvcHRpb24gdmFsdWU9Ik1BdGhzIj5NQXRoczwvb3B0aW9uPjxvcHRpb24gdmFsdWU9IlBoaWxvc29waGllIj5QaGlsb3NvcGhpZTwvb3B0aW9uPjxvcHRpb24gdmFsdWU9IlBoeXMtQ2hpIChUQykiPlBoeXMtQ2hpIChUQyk8L29wdGlvbj48b3B0aW9uIHZhbHVlPSJTRVMiPlNFUzwvb3B0aW9uPjxvcHRpb24gdmFsdWU9IlNUTUcgLSBHZXN0aW9uIGV0IEZpbmFuY2UiPlNUTUcgLSBHZXN0aW9uIGV0IEZpbmFuY2U8L29wdGlvbj48b3B0aW9uIHZhbHVlPSJTVE1HIC0gTWVyY2F0aXF1ZSAoTWFya2V0aW5nKSI+U1RNRyAtIE1lcmNhdGlxdWUgKE1hcmtldGluZyk8L29wdGlvbj48b3B0aW9uIHZhbHVlPSJTVE1HIC0gUmVzc291cmNlcyBIdW1haW5lcyBldCBDb21tLiI+U1RNRyAtIFJlc3NvdXJjZXMgSHVtYWluZXMgZXQgQ29tbS48L29wdGlvbj48b3B0aW9uIHZhbHVlPSJTVE1HIC0gU3lzdMOobWVzIGQnSW5mb3JtYXRpb24gZGUgR2VzdGlvbiI+U1RNRyAtIFN5c3TDqG1lcyBkJ0luZm9ybWF0aW9uIGRlIEdlc3Rpb248L29wdGlvbj48b3B0aW9uIHZhbHVlPSJTVlQgKFRDKSI+U1ZUIChUQyk8L29wdGlvbj48b3B0aW9uIHZhbHVlPSJVTlNTIj5VTlNTPC9vcHRpb24+PC9zZWxlY3Q+PC90ZD4KICAgICAgICAgICAgCiAgICAgICAgICAgIDx0ZCBzdHlsZT0id2lkdGg6MTQwcHg7IHRleHQtYWxpZ246Y2VudGVyOyI+CiAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImJ0biBidG4tc20iIHN0eWxlPSJiYWNrZ3JvdW5kOndoaXRlOyBjb2xvcjojN2Y4YzhkOyBib3JkZXI6MXB4IHNvbGlkICNiZGMzYzc7IHdpZHRoOjEwMCU7IGRpc3BsYXk6ZmxleDsganVzdGlmeS1jb250ZW50OmNlbnRlcjsgYWxpZ24taXRlbXM6Y2VudGVyOyBnYXA6NXB4OyIgb25jbGljaz0ib3BlbkxpbmtlZFN1YmplY3RzTW9kYWwoJ01hdGhzIChUQyknKSI+CiAgICAgICAgICAgICAgICA8c3Bhbj7wn5SXIEfDqXJlcjwvc3Bhbj4KICAgICAgICAgICAgICAgIDxzcGFuIHN0eWxlPSJiYWNrZ3JvdW5kOnJnYmEoMCwwLDAsMC4yKTsgcGFkZGluZzoxcHggNnB4OyBib3JkZXItcmFkaXVzOjEwcHg7IGZvbnQtc2l6ZTowLjc1cmVtOyI+MDwvc3Bhbj4KICAgICAgICAgICAgPC9idXR0b24+CiAgICAgICAgPC90ZD4KCiAgICAgICAgICAgIDx0ZCBzdHlsZT0id2lkdGg6MTYwcHg7Ij4KICAgICAgICAgICAgICAgIDxzZWxlY3Qgb25jaGFuZ2U9InVwZGF0ZVN1YmplY3RNZXRhKCdNYXRocyAoVEMpJywnbW9kZScsdGhpcy52YWx1ZSkiPgogICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9ImRpdiIgc2VsZWN0ZWQ9InNlbGVjdGVkIj5EaXZpc2lvbjwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9ImxldmVsIj5OaXZlYXU8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJldGFiIj7DiXRhYmxpc3NlbWVudDwvb3B0aW9uPgogICAgICAgICAgICAgICAgPC9zZWxlY3Q+CiAgICAgICAgICAgIDwvdGQ+CiAgICAgICAgICAgIDx0ZCBzdHlsZT0idGV4dC1hbGlnbjpsZWZ0OyI+PGRpdiBjbGFzcz0ibHZsLWNoZWNrLWNvbnRhaW5lciI+PGxhYmVsIGNsYXNzPSJsdmwtY2hlY2staXRlbSI+PGlucHV0IHR5cGU9ImNoZWNrYm94IiBjaGVja2VkPSJjaGVja2VkIiBvbmNoYW5nZT0idG9nZ2xlU3ViTGV2ZWwoJ01hdGhzIChUQyknLCcybmRlJykiPjJuZGU8L2xhYmVsPjxsYWJlbCBjbGFzcz0ibHZsLWNoZWNrLWl0ZW0iPjxpbnB1dCB0eXBlPSJjaGVja2JveCIgY2hlY2tlZD0iY2hlY2tlZCIgb25jaGFuZ2U9InRvZ2dsZVN1YkxldmVsKCdNYXRocyAoVEMpJywnMcOocmUnKSI+McOocmU8L2xhYmVsPjxsYWJlbCBjbGFzcz0ibHZsLWNoZWNrLWl0ZW0iPjxpbnB1dCB0eXBlPSJjaGVja2JveCIgY2hlY2tlZD0iY2hlY2tlZCIgb25jaGFuZ2U9InRvZ2dsZVN1YkxldmVsKCdNYXRocyAoVEMpJywnVGVybWluYWxlJykiPlRlcm1pbmFsZTwvbGFiZWw+PC9kaXY+PC90ZD4KICAgICAgICAgICAgPHRkIHN0eWxlPSJ3aWR0aDo1MHB4OyI+PGJ1dHRvbiBjbGFzcz0iYnRuIGJ0bi1kYW5nZXIgYnRuLXNtIiBvbmNsaWNrPSJkZWxTdWJqZWN0KCdNYXRocyAoVEMpJykiPsOXPC9idXR0b24+PC90ZD4KICAgICAgICA8L3RyPjx0cj4KICAgICAgICAgICAgPHRkIHN0eWxlPSJ3aWR0aDo4MHB4OyI+PGlucHV0IHR5cGU9InRleHQiIHBsYWNlaG9sZGVyPSJDb2RlIiBzdHlsZT0iZm9udC1mYW1pbHk6bW9ub3NwYWNlOyB0ZXh0LWFsaWduOmNlbnRlcjsiIG9uY2hhbmdlPSJ1cGRhdGVTdWJqZWN0TWV0YSgnUGhpbG9zb3BoaWUnLCdjb2RlJyx0aGlzLnZhbHVlKSI+PC90ZD4KICAgICAgICAgICAgPHRkPjxpbnB1dCB0eXBlPSJ0ZXh0IiB2YWx1ZT0iUGhpbG9zb3BoaWUiIHN0eWxlPSJmb250LXdlaWdodDpib2xkOyIgb25jaGFuZ2U9InJlbmFtZVN1YmplY3QoJ1BoaWxvc29waGllJyx0aGlzLnZhbHVlKSI+PC90ZD4KICAgICAgICAgICAgPHRkIHN0eWxlPSJ3aWR0aDoxODBweDsiPjxzZWxlY3Qgc3R5bGU9ImZvbnQtc2l6ZTowLjlyZW07IiBvbmNoYW5nZT0idXBkYXRlU3ViamVjdE1ldGEoJ1BoaWxvc29waGllJywncGFyZW50Jyx0aGlzLnZhbHVlKSI+PG9wdGlvbiB2YWx1ZT0iIiBzZWxlY3RlZD0ic2VsZWN0ZWQiPihBdWN1biAtIFJhY2luZSk8L29wdGlvbj48b3B0aW9uIHZhbHVlPSJBdXRvbm9taWUgRVBMRSI+QXV0b25vbWllIEVQTEU8L29wdGlvbj48b3B0aW9uIHZhbHVlPSJFTUMiPkVNQzwvb3B0aW9uPjxvcHRpb24gdmFsdWU9IkVQUyI+RVBTPC9vcHRpb24+PG9wdGlvbiB2YWx1ZT0iRW5zLiBTY2llbnRpZmlxdWUiPkVucy4gU2NpZW50aWZpcXVlPC9vcHRpb24+PG9wdGlvbiB2YWx1ZT0iRnJhbsOnYWlzIj5GcmFuw6dhaXM8L29wdGlvbj48b3B0aW9uIHZhbHVlPSJIaXN0LUfDqW8iPkhpc3QtR8Opbzwvb3B0aW9uPjxvcHRpb24gdmFsdWU9IkxWQSI+TFZBPC9vcHRpb24+PG9wdGlvbiB2YWx1ZT0iTFZCIj5MVkI8L29wdGlvbj48b3B0aW9uIHZhbHVlPSJNQXRocyI+TUF0aHM8L29wdGlvbj48b3B0aW9uIHZhbHVlPSJNYXRocyAoVEMpIj5NYXRocyAoVEMpPC9vcHRpb24+PG9wdGlvbiB2YWx1ZT0iUGh5cy1DaGkgKFRDKSI+UGh5cy1DaGkgKFRDKTwvb3B0aW9uPjxvcHRpb24gdmFsdWU9IlNFUyI+U0VTPC9vcHRpb24+PG9wdGlvbiB2YWx1ZT0iU1RNRyAtIEdlc3Rpb24gZXQgRmluYW5jZSI+U1RNRyAtIEdlc3Rpb24gZXQgRmluYW5jZTwvb3B0aW9uPjxvcHRpb24gdmFsdWU9IlNUTUcgLSBNZXJjYXRpcXVlIChNYXJrZXRpbmcpIj5TVE1HIC0gTWVyY2F0aXF1ZSAoTWFya2V0aW5nKTwvb3B0aW9uPjxvcHRpb24gdmFsdWU9IlNUTUcgLSBSZXNzb3VyY2VzIEh1bWFpbmVzIGV0IENvbW0uIj5TVE1HIC0gUmVzc291cmNlcyBIdW1haW5lcyBldCBDb21tLjwvb3B0aW9uPjxvcHRpb24gdmFsdWU9IlNUTUcgLSBTeXN0w6htZXMgZCdJbmZvcm1hdGlvbiBkZSBHZXN0aW9uIj5TVE1HIC0gU3lzdMOobWVzIGQnSW5mb3JtYXRpb24gZGUgR2VzdGlvbjwvb3B0aW9uPjxvcHRpb24gdmFsdWU9IlNWVCAoVEMpIj5TVlQgKFRDKTwvb3B0aW9uPjxvcHRpb24gdmFsdWU9IlVOU1MiPlVOU1M8L29wdGlvbj48L3NlbGVjdD48L3RkPgogICAgICAgICAgICAKICAgICAgICAgICAgPHRkIHN0eWxlPSJ3aWR0aDoxNDBweDsgdGV4dC1hbGlnbjpjZW50ZXI7Ij4KICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYnRuIGJ0bi1zbSIgc3R5bGU9ImJhY2tncm91bmQ6d2hpdGU7IGNvbG9yOiM3ZjhjOGQ7IGJvcmRlcjoxcHggc29saWQgI2JkYzNjNzsgd2lkdGg6MTAwJTsgZGlzcGxheTpmbGV4OyBqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyOyBhbGlnbi1pdGVtczpjZW50ZXI7IGdhcDo1cHg7IiBvbmNsaWNrPSJvcGVuTGlua2VkU3ViamVjdHNNb2RhbCgnUGhpbG9zb3BoaWUnKSI+CiAgICAgICAgICAgICAgICA8c3Bhbj7wn5SXIEfDqXJlcjwvc3Bhbj4KICAgICAgICAgICAgICAgIDxzcGFuIHN0eWxlPSJiYWNrZ3JvdW5kOnJnYmEoMCwwLDAsMC4yKTsgcGFkZGluZzoxcHggNnB4OyBib3JkZXItcmFkaXVzOjEwcHg7IGZvbnQtc2l6ZTowLjc1cmVtOyI+MDwvc3Bhbj4KICAgICAgICAgICAgPC9idXR0b24+CiAgICAgICAgPC90ZD4KCiAgICAgICAgICAgIDx0ZCBzdHlsZT0id2lkdGg6MTYwcHg7Ij4KICAgICAgICAgICAgICAgIDxzZWxlY3Qgb25jaGFuZ2U9InVwZGF0ZVN1YmplY3RNZXRhKCdQaGlsb3NvcGhpZScsJ21vZGUnLHRoaXMudmFsdWUpIj4KICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJkaXYiIHNlbGVjdGVkPSJzZWxlY3RlZCI+RGl2aXNpb248L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJsZXZlbCI+Tml2ZWF1PC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iZXRhYiI+w4l0YWJsaXNzZW1lbnQ8L29wdGlvbj4KICAgICAgICAgICAgICAgIDwvc2VsZWN0PgogICAgICAgICAgICA8L3RkPgogICAgICAgICAgICA8dGQgc3R5bGU9InRleHQtYWxpZ246bGVmdDsiPjxkaXYgY2xhc3M9Imx2bC1jaGVjay1jb250YWluZXIiPjxsYWJlbCBjbGFzcz0ibHZsLWNoZWNrLWl0ZW0iPjxpbnB1dCB0eXBlPSJjaGVja2JveCIgb25jaGFuZ2U9InRvZ2dsZVN1YkxldmVsKCdQaGlsb3NvcGhpZScsJzJuZGUnKSI+Mm5kZTwvbGFiZWw+PGxhYmVsIGNsYXNzPSJsdmwtY2hlY2staXRlbSI+PGlucHV0IHR5cGU9ImNoZWNrYm94IiBvbmNoYW5nZT0idG9nZ2xlU3ViTGV2ZWwoJ1BoaWxvc29waGllJywnMcOocmUnKSI+McOocmU8L2xhYmVsPjxsYWJlbCBjbGFzcz0ibHZsLWNoZWNrLWl0ZW0iPjxpbnB1dCB0eXBlPSJjaGVja2JveCIgY2hlY2tlZD0iY2hlY2tlZCIgb25jaGFuZ2U9InRvZ2dsZVN1YkxldmVsKCdQaGlsb3NvcGhpZScsJ1Rlcm1pbmFsZScpIj5UZXJtaW5hbGU8L2xhYmVsPjwvZGl2PjwvdGQ+CiAgICAgICAgICAgIDx0ZCBzdHlsZT0id2lkdGg6NTBweDsiPjxidXR0b24gY2xhc3M9ImJ0biBidG4tZGFuZ2VyIGJ0bi1zbSIgb25jbGljaz0iZGVsU3ViamVjdCgnUGhpbG9zb3BoaWUnKSI+w5c8L2J1dHRvbj48L3RkPgogICAgICAgIDwvdHI+PHRyPgogICAgICAgICAgICA8dGQgc3R5bGU9IndpZHRoOjgwcHg7Ij48aW5wdXQgdHlwZT0idGV4dCIgcGxhY2Vob2xkZXI9IkNvZGUiIHN0eWxlPSJmb250LWZhbWlseTptb25vc3BhY2U7IHRleHQtYWxpZ246Y2VudGVyOyIgb25jaGFuZ2U9InVwZGF0ZVN1YmplY3RNZXRhKCdQaHlzLUNoaSAoVEMpJywnY29kZScsdGhpcy52YWx1ZSkiPjwvdGQ+CiAgICAgICAgICAgIDx0ZD48aW5wdXQgdHlwZT0idGV4dCIgdmFsdWU9IlBoeXMtQ2hpIChUQykiIHN0eWxlPSJmb250LXdlaWdodDpib2xkOyIgb25jaGFuZ2U9InJlbmFtZVN1YmplY3QoJ1BoeXMtQ2hpIChUQyknLHRoaXMudmFsdWUpIj48L3RkPgogICAgICAgICAgICA8dGQgc3R5bGU9IndpZHRoOjE4MHB4OyI+PHNlbGVjdCBzdHlsZT0iZm9udC1zaXplOjAuOXJlbTsiIG9uY2hhbmdlPSJ1cGRhdGVTdWJqZWN0TWV0YSgnUGh5cy1DaGkgKFRDKScsJ3BhcmVudCcsdGhpcy52YWx1ZSkiPjxvcHRpb24gdmFsdWU9IiIgc2VsZWN0ZWQ9InNlbGVjdGVkIj4oQXVjdW4gLSBSYWNpbmUpPC9vcHRpb24+PG9wdGlvbiB2YWx1ZT0iQXV0b25vbWllIEVQTEUiPkF1dG9ub21pZSBFUExFPC9vcHRpb24+PG9wdGlvbiB2YWx1ZT0iRU1DIj5FTUM8L29wdGlvbj48b3B0aW9uIHZhbHVlPSJFUFMiPkVQUzwvb3B0aW9uPjxvcHRpb24gdmFsdWU9IkVucy4gU2NpZW50aWZpcXVlIj5FbnMuIFNjaWVudGlmaXF1ZTwvb3B0aW9uPjxvcHRpb24gdmFsdWU9IkZyYW7Dp2FpcyI+RnJhbsOnYWlzPC9vcHRpb24+PG9wdGlvbiB2YWx1ZT0iSGlzdC1Hw6lvIj5IaXN0LUfDqW88L29wdGlvbj48b3B0aW9uIHZhbHVlPSJMVkEiPkxWQTwvb3B0aW9uPjxvcHRpb24gdmFsdWU9IkxWQiI+TFZCPC9vcHRpb24+PG9wdGlvbiB2YWx1ZT0iTUF0aHMiPk1BdGhzPC9vcHRpb24+PG9wdGlvbiB2YWx1ZT0iTWF0aHMgKFRDKSI+TWF0aHMgKFRDKTwvb3B0aW9uPjxvcHRpb24gdmFsdWU9IlBoaWxvc29waGllIj5QaGlsb3NvcGhpZTwvb3B0aW9uPjxvcHRpb24gdmFsdWU9IlNFUyI+U0VTPC9vcHRpb24+PG9wdGlvbiB2YWx1ZT0iU1RNRyAtIEdlc3Rpb24gZXQgRmluYW5jZSI+U1RNRyAtIEdlc3Rpb24gZXQgRmluYW5jZTwvb3B0aW9uPjxvcHRpb24gdmFsdWU9IlNUTUcgLSBNZXJjYXRpcXVlIChNYXJrZXRpbmcpIj5TVE1HIC0gTWVyY2F0aXF1ZSAoTWFya2V0aW5nKTwvb3B0aW9uPjxvcHRpb24gdmFsdWU9IlNUTUcgLSBSZXNzb3VyY2VzIEh1bWFpbmVzIGV0IENvbW0uIj5TVE1HIC0gUmVzc291cmNlcyBIdW1haW5lcyBldCBDb21tLjwvb3B0aW9uPjxvcHRpb24gdmFsdWU9IlNUTUcgLSBTeXN0w6htZXMgZCdJbmZvcm1hdGlvbiBkZSBHZXN0aW9uIj5TVE1HIC0gU3lzdMOobWVzIGQnSW5mb3JtYXRpb24gZGUgR2VzdGlvbjwvb3B0aW9uPjxvcHRpb24gdmFsdWU9IlNWVCAoVEMpIj5TVlQgKFRDKTwvb3B0aW9uPjxvcHRpb24gdmFsdWU9IlVOU1MiPlVOU1M8L29wdGlvbj48L3NlbGVjdD48L3RkPgogICAgICAgICAgICAKICAgICAgICAgICAgPHRkIHN0eWxlPSJ3aWR0aDoxNDBweDsgdGV4dC1hbGlnbjpjZW50ZXI7Ij4KICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYnRuIGJ0bi1zbSIgc3R5bGU9ImJhY2tncm91bmQ6d2hpdGU7IGNvbG9yOiM3ZjhjOGQ7IGJvcmRlcjoxcHggc29saWQgI2JkYzNjNzsgd2lkdGg6MTAwJTsgZGlzcGxheTpmbGV4OyBqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyOyBhbGlnbi1pdGVtczpjZW50ZXI7IGdhcDo1cHg7IiBvbmNsaWNrPSJvcGVuTGlua2VkU3ViamVjdHNNb2RhbCgnUGh5cy1DaGkgKFRDKScpIj4KICAgICAgICAgICAgICAgIDxzcGFuPvCflJcgR8OpcmVyPC9zcGFuPgogICAgICAgICAgICAgICAgPHNwYW4gc3R5bGU9ImJhY2tncm91bmQ6cmdiYSgwLDAsMCwwLjIpOyBwYWRkaW5nOjFweCA2cHg7IGJvcmRlci1yYWRpdXM6MTBweDsgZm9udC1zaXplOjAuNzVyZW07Ij4wPC9zcGFuPgogICAgICAgICAgICA8L2J1dHRvbj4KICAgICAgICA8L3RkPgoKICAgICAgICAgICAgPHRkIHN0eWxlPSJ3aWR0aDoxNjBweDsiPgogICAgICAgICAgICAgICAgPHNlbGVjdCBvbmNoYW5nZT0idXBkYXRlU3ViamVjdE1ldGEoJ1BoeXMtQ2hpIChUQyknLCdtb2RlJyx0aGlzLnZhbHVlKSI+CiAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iZGl2IiBzZWxlY3RlZD0ic2VsZWN0ZWQiPkRpdmlzaW9uPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0ibGV2ZWwiPk5pdmVhdTwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9ImV0YWIiPsOJdGFibGlzc2VtZW50PC9vcHRpb24+CiAgICAgICAgICAgICAgICA8L3NlbGVjdD4KICAgICAgICAgICAgPC90ZD4KICAgICAgICAgICAgPHRkIHN0eWxlPSJ0ZXh0LWFsaWduOmxlZnQ7Ij48ZGl2IGNsYXNzPSJsdmwtY2hlY2stY29udGFpbmVyIj48bGFiZWwgY2xhc3M9Imx2bC1jaGVjay1pdGVtIj48aW5wdXQgdHlwZT0iY2hlY2tib3giIGNoZWNrZWQ9ImNoZWNrZWQiIG9uY2hhbmdlPSJ0b2dnbGVTdWJMZXZlbCgnUGh5cy1DaGkgKFRDKScsJzJuZGUnKSI+Mm5kZTwvbGFiZWw+PGxhYmVsIGNsYXNzPSJsdmwtY2hlY2staXRlbSI+PGlucHV0IHR5cGU9ImNoZWNrYm94IiBjaGVja2VkPSJjaGVja2VkIiBvbmNoYW5nZT0idG9nZ2xlU3ViTGV2ZWwoJ1BoeXMtQ2hpIChUQyknLCcxw6hyZScpIj4xw6hyZTwvbGFiZWw+PGxhYmVsIGNsYXNzPSJsdmwtY2hlY2staXRlbSI+PGlucHV0IHR5cGU9ImNoZWNrYm94IiBjaGVja2VkPSJjaGVja2VkIiBvbmNoYW5nZT0idG9nZ2xlU3ViTGV2ZWwoJ1BoeXMtQ2hpIChUQyknLCdUZXJtaW5hbGUnKSI+VGVybWluYWxlPC9sYWJlbD48L2Rpdj48L3RkPgogICAgICAgICAgICA8dGQgc3R5bGU9IndpZHRoOjUwcHg7Ij48YnV0dG9uIGNsYXNzPSJidG4gYnRuLWRhbmdlciBidG4tc20iIG9uY2xpY2s9ImRlbFN1YmplY3QoJ1BoeXMtQ2hpIChUQyknKSI+w5c8L2J1dHRvbj48L3RkPgogICAgICAgIDwvdHI+PHRyPgogICAgICAgICAgICA8dGQgc3R5bGU9IndpZHRoOjgwcHg7Ij48aW5wdXQgdHlwZT0idGV4dCIgcGxhY2Vob2xkZXI9IkNvZGUiIHN0eWxlPSJmb250LWZhbWlseTptb25vc3BhY2U7IHRleHQtYWxpZ246Y2VudGVyOyIgb25jaGFuZ2U9InVwZGF0ZVN1YmplY3RNZXRhKCdTRVMnLCdjb2RlJyx0aGlzLnZhbHVlKSI+PC90ZD4KICAgICAgICAgICAgPHRkPjxpbnB1dCB0eXBlPSJ0ZXh0IiB2YWx1ZT0iU0VTIiBzdHlsZT0iZm9udC13ZWlnaHQ6Ym9sZDsiIG9uY2hhbmdlPSJyZW5hbWVTdWJqZWN0KCdTRVMnLHRoaXMudmFsdWUpIj48L3RkPgogICAgICAgICAgICA8dGQgc3R5bGU9IndpZHRoOjE4MHB4OyI+PHNlbGVjdCBzdHlsZT0iZm9udC1zaXplOjAuOXJlbTsiIG9uY2hhbmdlPSJ1cGRhdGVTdWJqZWN0TWV0YSgnU0VTJywncGFyZW50Jyx0aGlzLnZhbHVlKSI+PG9wdGlvbiB2YWx1ZT0iIiBzZWxlY3RlZD0ic2VsZWN0ZWQiPihBdWN1biAtIFJhY2luZSk8L29wdGlvbj48b3B0aW9uIHZhbHVlPSJBdXRvbm9taWUgRVBMRSI+QXV0b25vbWllIEVQTEU8L29wdGlvbj48b3B0aW9uIHZhbHVlPSJFTUMiPkVNQzwvb3B0aW9uPjxvcHRpb24gdmFsdWU9IkVQUyI+RVBTPC9vcHRpb24+PG9wdGlvbiB2YWx1ZT0iRW5zLiBTY2llbnRpZmlxdWUiPkVucy4gU2NpZW50aWZpcXVlPC9vcHRpb24+PG9wdGlvbiB2YWx1ZT0iRnJhbsOnYWlzIj5GcmFuw6dhaXM8L29wdGlvbj48b3B0aW9uIHZhbHVlPSJIaXN0LUfDqW8iPkhpc3QtR8Opbzwvb3B0aW9uPjxvcHRpb24gdmFsdWU9IkxWQSI+TFZBPC9vcHRpb24+PG9wdGlvbiB2YWx1ZT0iTFZCIj5MVkI8L29wdGlvbj48b3B0aW9uIHZhbHVlPSJNQXRocyI+TUF0aHM8L29wdGlvbj48b3B0aW9uIHZhbHVlPSJNYXRocyAoVEMpIj5NYXRocyAoVEMpPC9vcHRpb24+PG9wdGlvbiB2YWx1ZT0iUGhpbG9zb3BoaWUiPlBoaWxvc29waGllPC9vcHRpb24+PG9wdGlvbiB2YWx1ZT0iUGh5cy1DaGkgKFRDKSI+UGh5cy1DaGkgKFRDKTwvb3B0aW9uPjxvcHRpb24gdmFsdWU9IlNUTUcgLSBHZXN0aW9uIGV0IEZpbmFuY2UiPlNUTUcgLSBHZXN0aW9uIGV0IEZpbmFuY2U8L29wdGlvbj48b3B0aW9uIHZhbHVlPSJTVE1HIC0gTWVyY2F0aXF1ZSAoTWFya2V0aW5nKSI+U1RNRyAtIE1lcmNhdGlxdWUgKE1hcmtldGluZyk8L29wdGlvbj48b3B0aW9uIHZhbHVlPSJTVE1HIC0gUmVzc291cmNlcyBIdW1haW5lcyBldCBDb21tLiI+U1RNRyAtIFJlc3NvdXJjZXMgSHVtYWluZXMgZXQgQ29tbS48L29wdGlvbj48b3B0aW9uIHZhbHVlPSJTVE1HIC0gU3lzdMOobWVzIGQnSW5mb3JtYXRpb24gZGUgR2VzdGlvbiI+U1RNRyAtIFN5c3TDqG1lcyBkJ0luZm9ybWF0aW9uIGRlIEdlc3Rpb248L29wdGlvbj48b3B0aW9uIHZhbHVlPSJTVlQgKFRDKSI+U1ZUIChUQyk8L29wdGlvbj48b3B0aW9uIHZhbHVlPSJVTlNTIj5VTlNTPC9vcHRpb24+PC9zZWxlY3Q+PC90ZD4KICAgICAgICAgICAgCiAgICAgICAgICAgIDx0ZCBzdHlsZT0id2lkdGg6MTQwcHg7IHRleHQtYWxpZ246Y2VudGVyOyI+CiAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImJ0biBidG4tc20iIHN0eWxlPSJiYWNrZ3JvdW5kOndoaXRlOyBjb2xvcjojN2Y4YzhkOyBib3JkZXI6MXB4IHNvbGlkICNiZGMzYzc7IHdpZHRoOjEwMCU7IGRpc3BsYXk6ZmxleDsganVzdGlmeS1jb250ZW50OmNlbnRlcjsgYWxpZ24taXRlbXM6Y2VudGVyOyBnYXA6NXB4OyIgb25jbGljaz0ib3BlbkxpbmtlZFN1YmplY3RzTW9kYWwoJ1NFUycpIj4KICAgICAgICAgICAgICAgIDxzcGFuPvCflJcgR8OpcmVyPC9zcGFuPgogICAgICAgICAgICAgICAgPHNwYW4gc3R5bGU9ImJhY2tncm91bmQ6cmdiYSgwLDAsMCwwLjIpOyBwYWRkaW5nOjFweCA2cHg7IGJvcmRlci1yYWRpdXM6MTBweDsgZm9udC1zaXplOjAuNzVyZW07Ij4wPC9zcGFuPgogICAgICAgICAgICA8L2J1dHRvbj4KICAgICAgICA8L3RkPgoKICAgICAgICAgICAgPHRkIHN0eWxlPSJ3aWR0aDoxNjBweDsiPgogICAgICAgICAgICAgICAgPHNlbGVjdCBvbmNoYW5nZT0idXBkYXRlU3ViamVjdE1ldGEoJ1NFUycsJ21vZGUnLHRoaXMudmFsdWUpIj4KICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJkaXYiIHNlbGVjdGVkPSJzZWxlY3RlZCI+RGl2aXNpb248L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJsZXZlbCI+Tml2ZWF1PC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iZXRhYiI+w4l0YWJsaXNzZW1lbnQ8L29wdGlvbj4KICAgICAgICAgICAgICAgIDwvc2VsZWN0PgogICAgICAgICAgICA8L3RkPgogICAgICAgICAgICA8dGQgc3R5bGU9InRleHQtYWxpZ246bGVmdDsiPjxkaXYgY2xhc3M9Imx2bC1jaGVjay1jb250YWluZXIiPjxsYWJlbCBjbGFzcz0ibHZsLWNoZWNrLWl0ZW0iPjxpbnB1dCB0eXBlPSJjaGVja2JveCIgY2hlY2tlZD0iY2hlY2tlZCIgb25jaGFuZ2U9InRvZ2dsZVN1YkxldmVsKCdTRVMnLCcybmRlJykiPjJuZGU8L2xhYmVsPjxsYWJlbCBjbGFzcz0ibHZsLWNoZWNrLWl0ZW0iPjxpbnB1dCB0eXBlPSJjaGVja2JveCIgY2hlY2tlZD0iY2hlY2tlZCIgb25jaGFuZ2U9InRvZ2dsZVN1YkxldmVsKCdTRVMnLCcxw6hyZScpIj4xw6hyZTwvbGFiZWw+PGxhYmVsIGNsYXNzPSJsdmwtY2hlY2staXRlbSI+PGlucHV0IHR5cGU9ImNoZWNrYm94IiBjaGVja2VkPSJjaGVja2VkIiBvbmNoYW5nZT0idG9nZ2xlU3ViTGV2ZWwoJ1NFUycsJ1Rlcm1pbmFsZScpIj5UZXJtaW5hbGU8L2xhYmVsPjwvZGl2PjwvdGQ+CiAgICAgICAgICAgIDx0ZCBzdHlsZT0id2lkdGg6NTBweDsiPjxidXR0b24gY2xhc3M9ImJ0biBidG4tZGFuZ2VyIGJ0bi1zbSIgb25jbGljaz0iZGVsU3ViamVjdCgnU0VTJykiPsOXPC9idXR0b24+PC90ZD4KICAgICAgICA8L3RyPjx0cj4KICAgICAgICAgICAgPHRkIHN0eWxlPSJ3aWR0aDo4MHB4OyI+PGlucHV0IHR5cGU9InRleHQiIHZhbHVlPSJFRFMiIHBsYWNlaG9sZGVyPSJDb2RlIiBzdHlsZT0iZm9udC1mYW1pbHk6bW9ub3NwYWNlOyB0ZXh0LWFsaWduOmNlbnRlcjsiIG9uY2hhbmdlPSJ1cGRhdGVTdWJqZWN0TWV0YSgnU1RNRyAtIEdlc3Rpb24gZXQgRmluYW5jZScsJ2NvZGUnLHRoaXMudmFsdWUpIj48L3RkPgogICAgICAgICAgICA8dGQ+PGlucHV0IHR5cGU9InRleHQiIHZhbHVlPSJTVE1HIC0gR2VzdGlvbiBldCBGaW5hbmNlIiBzdHlsZT0iZm9udC13ZWlnaHQ6Ym9sZDsiIG9uY2hhbmdlPSJyZW5hbWVTdWJqZWN0KCdTVE1HIC0gR2VzdGlvbiBldCBGaW5hbmNlJyx0aGlzLnZhbHVlKSI+PC90ZD4KICAgICAgICAgICAgPHRkIHN0eWxlPSJ3aWR0aDoxODBweDsiPjxzZWxlY3Qgc3R5bGU9ImZvbnQtc2l6ZTowLjlyZW07IiBvbmNoYW5nZT0idXBkYXRlU3ViamVjdE1ldGEoJ1NUTUcgLSBHZXN0aW9uIGV0IEZpbmFuY2UnLCdwYXJlbnQnLHRoaXMudmFsdWUpIj48b3B0aW9uIHZhbHVlPSIiIHNlbGVjdGVkPSJzZWxlY3RlZCI+KEF1Y3VuIC0gUmFjaW5lKTwvb3B0aW9uPjxvcHRpb24gdmFsdWU9IkF1dG9ub21pZSBFUExFIj5BdXRvbm9taWUgRVBMRTwvb3B0aW9uPjxvcHRpb24gdmFsdWU9IkVNQyI+RU1DPC9vcHRpb24+PG9wdGlvbiB2YWx1ZT0iRVBTIj5FUFM8L29wdGlvbj48b3B0aW9uIHZhbHVlPSJFbnMuIFNjaWVudGlmaXF1ZSI+RW5zLiBTY2llbnRpZmlxdWU8L29wdGlvbj48b3B0aW9uIHZhbHVlPSJGcmFuw6dhaXMiPkZyYW7Dp2Fpczwvb3B0aW9uPjxvcHRpb24gdmFsdWU9Ikhpc3QtR8OpbyI+SGlzdC1Hw6lvPC9vcHRpb24+PG9wdGlvbiB2YWx1ZT0iTFZBIj5MVkE8L29wdGlvbj48b3B0aW9uIHZhbHVlPSJMVkIiPkxWQjwvb3B0aW9uPjxvcHRpb24gdmFsdWU9Ik1BdGhzIj5NQXRoczwvb3B0aW9uPjxvcHRpb24gdmFsdWU9Ik1hdGhzIChUQykiPk1hdGhzIChUQyk8L29wdGlvbj48b3B0aW9uIHZhbHVlPSJQaGlsb3NvcGhpZSI+UGhpbG9zb3BoaWU8L29wdGlvbj48b3B0aW9uIHZhbHVlPSJQaHlzLUNoaSAoVEMpIj5QaHlzLUNoaSAoVEMpPC9vcHRpb24+PG9wdGlvbiB2YWx1ZT0iU0VTIj5TRVM8L29wdGlvbj48b3B0aW9uIHZhbHVlPSJTVE1HIC0gTWVyY2F0aXF1ZSAoTWFya2V0aW5nKSI+U1RNRyAtIE1lcmNhdGlxdWUgKE1hcmtldGluZyk8L29wdGlvbj48b3B0aW9uIHZhbHVlPSJTVE1HIC0gUmVzc291cmNlcyBIdW1haW5lcyBldCBDb21tLiI+U1RNRyAtIFJlc3NvdXJjZXMgSHVtYWluZXMgZXQgQ29tbS48L29wdGlvbj48b3B0aW9uIHZhbHVlPSJTVE1HIC0gU3lzdMOobWVzIGQnSW5mb3JtYXRpb24gZGUgR2VzdGlvbiI+U1RNRyAtIFN5c3TDqG1lcyBkJ0luZm9ybWF0aW9uIGRlIEdlc3Rpb248L29wdGlvbj48b3B0aW9uIHZhbHVlPSJTVlQgKFRDKSI+U1ZUIChUQyk8L29wdGlvbj48b3B0aW9uIHZhbHVlPSJVTlNTIj5VTlNTPC9vcHRpb24+PC9zZWxlY3Q+PC90ZD4KICAgICAgICAgICAgCiAgICAgICAgICAgIDx0ZCBzdHlsZT0id2lkdGg6MTQwcHg7IHRleHQtYWxpZ246Y2VudGVyOyI+CiAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImJ0biBidG4tc20iIHN0eWxlPSJiYWNrZ3JvdW5kOndoaXRlOyBjb2xvcjojN2Y4YzhkOyBib3JkZXI6MXB4IHNvbGlkICNiZGMzYzc7IHdpZHRoOjEwMCU7IGRpc3BsYXk6ZmxleDsganVzdGlmeS1jb250ZW50OmNlbnRlcjsgYWxpZ24taXRlbXM6Y2VudGVyOyBnYXA6NXB4OyIgb25jbGljaz0ib3BlbkxpbmtlZFN1YmplY3RzTW9kYWwoJ1NUTUcgLSBHZXN0aW9uIGV0IEZpbmFuY2UnKSI+CiAgICAgICAgICAgICAgICA8c3Bhbj7wn5SXIEfDqXJlcjwvc3Bhbj4KICAgICAgICAgICAgICAgIDxzcGFuIHN0eWxlPSJiYWNrZ3JvdW5kOnJnYmEoMCwwLDAsMC4yKTsgcGFkZGluZzoxcHggNnB4OyBib3JkZXItcmFkaXVzOjEwcHg7IGZvbnQtc2l6ZTowLjc1cmVtOyI+MDwvc3Bhbj4KICAgICAgICAgICAgPC9idXR0b24+CiAgICAgICAgPC90ZD4KCiAgICAgICAgICAgIDx0ZCBzdHlsZT0id2lkdGg6MTYwcHg7Ij4KICAgICAgICAgICAgICAgIDxzZWxlY3Qgb25jaGFuZ2U9InVwZGF0ZVN1YmplY3RNZXRhKCdTVE1HIC0gR2VzdGlvbiBldCBGaW5hbmNlJywnbW9kZScsdGhpcy52YWx1ZSkiPgogICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9ImRpdiI+RGl2aXNpb248L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJsZXZlbCIgc2VsZWN0ZWQ9InNlbGVjdGVkIj5OaXZlYXU8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJldGFiIj7DiXRhYmxpc3NlbWVudDwvb3B0aW9uPgogICAgICAgICAgICAgICAgPC9zZWxlY3Q+CiAgICAgICAgICAgIDwvdGQ+CiAgICAgICAgICAgIDx0ZCBzdHlsZT0idGV4dC1hbGlnbjpsZWZ0OyI+PGRpdiBzdHlsZT0iZGlzcGxheTpmbGV4OyBmbGV4LXdyYXA6d3JhcDsgZ2FwOjhweDsiPjxkaXYgY2xhc3M9Imx2bC1pbnB1dC1pdGVtIiBzdHlsZT0iYmFja2dyb3VuZDojZmZmOyBib3JkZXI6MXB4IHNvbGlkICNkZGQ7IHBhZGRpbmc6MnB4IDZweDsgYm9yZGVyLXJhZGl1czo0cHg7Ij48c3BhbiBzdHlsZT0iZm9udC1zaXplOjAuOHJlbTsgZm9udC13ZWlnaHQ6Ym9sZDsiPjJuZGU6PC9zcGFuPjxpbnB1dCB0eXBlPSJudW1iZXIiIHN0ZXA9IjAuNSIgdmFsdWU9IjAiIHN0eWxlPSJ3aWR0aDo1MHB4ICFpbXBvcnRhbnQ7IHRleHQtYWxpZ246Y2VudGVyOyBoZWlnaHQ6MjRweDsiIG9uY2hhbmdlPSJ1cGRTdWJWb2xMZXZlbCgnU1RNRyAtIEdlc3Rpb24gZXQgRmluYW5jZScsJzJuZGUnLHRoaXMudmFsdWUpIj48L2Rpdj48ZGl2IGNsYXNzPSJsdmwtaW5wdXQtaXRlbSIgc3R5bGU9ImJhY2tncm91bmQ6I2ZmZjsgYm9yZGVyOjFweCBzb2xpZCAjZGRkOyBwYWRkaW5nOjJweCA2cHg7IGJvcmRlci1yYWRpdXM6NHB4OyI+PHNwYW4gc3R5bGU9ImZvbnQtc2l6ZTowLjhyZW07IGZvbnQtd2VpZ2h0OmJvbGQ7Ij4xw6hyZTo8L3NwYW4+PGlucHV0IHR5cGU9Im51bWJlciIgc3RlcD0iMC41IiB2YWx1ZT0iMCIgc3R5bGU9IndpZHRoOjUwcHggIWltcG9ydGFudDsgdGV4dC1hbGlnbjpjZW50ZXI7IGhlaWdodDoyNHB4OyIgb25jaGFuZ2U9InVwZFN1YlZvbExldmVsKCdTVE1HIC0gR2VzdGlvbiBldCBGaW5hbmNlJywnMcOocmUnLHRoaXMudmFsdWUpIj48L2Rpdj48ZGl2IGNsYXNzPSJsdmwtaW5wdXQtaXRlbSIgc3R5bGU9ImJhY2tncm91bmQ6I2ZmZjsgYm9yZGVyOjFweCBzb2xpZCAjZGRkOyBwYWRkaW5nOjJweCA2cHg7IGJvcmRlci1yYWRpdXM6NHB4OyI+PHNwYW4gc3R5bGU9ImZvbnQtc2l6ZTowLjhyZW07IGZvbnQtd2VpZ2h0OmJvbGQ7Ij5UZXJtaW5hbGU6PC9zcGFuPjxpbnB1dCB0eXBlPSJudW1iZXIiIHN0ZXA9IjAuNSIgdmFsdWU9IjAiIHN0eWxlPSJ3aWR0aDo1MHB4ICFpbXBvcnRhbnQ7IHRleHQtYWxpZ246Y2VudGVyOyBoZWlnaHQ6MjRweDsiIG9uY2hhbmdlPSJ1cGRTdWJWb2xMZXZlbCgnU1RNRyAtIEdlc3Rpb24gZXQgRmluYW5jZScsJ1Rlcm1pbmFsZScsdGhpcy52YWx1ZSkiPjwvZGl2PjwvZGl2PjwvdGQ+CiAgICAgICAgICAgIDx0ZCBzdHlsZT0id2lkdGg6NTBweDsiPjxidXR0b24gY2xhc3M9ImJ0biBidG4tZGFuZ2VyIGJ0bi1zbSIgb25jbGljaz0iZGVsU3ViamVjdCgnU1RNRyAtIEdlc3Rpb24gZXQgRmluYW5jZScpIj7DlzwvYnV0dG9uPjwvdGQ+CiAgICAgICAgPC90cj48dHI+CiAgICAgICAgICAgIDx0ZCBzdHlsZT0id2lkdGg6ODBweDsiPjxpbnB1dCB0eXBlPSJ0ZXh0IiB2YWx1ZT0iRURTIiBwbGFjZWhvbGRlcj0iQ29kZSIgc3R5bGU9ImZvbnQtZmFtaWx5Om1vbm9zcGFjZTsgdGV4dC1hbGlnbjpjZW50ZXI7IiBvbmNoYW5nZT0idXBkYXRlU3ViamVjdE1ldGEoJ1NUTUcgLSBNZXJjYXRpcXVlIChNYXJrZXRpbmcpJywnY29kZScsdGhpcy52YWx1ZSkiPjwvdGQ+CiAgICAgICAgICAgIDx0ZD48aW5wdXQgdHlwZT0idGV4dCIgdmFsdWU9IlNUTUcgLSBNZXJjYXRpcXVlIChNYXJrZXRpbmcpIiBzdHlsZT0iZm9udC13ZWlnaHQ6Ym9sZDsiIG9uY2hhbmdlPSJyZW5hbWVTdWJqZWN0KCdTVE1HIC0gTWVyY2F0aXF1ZSAoTWFya2V0aW5nKScsdGhpcy52YWx1ZSkiPjwvdGQ+CiAgICAgICAgICAgIDx0ZCBzdHlsZT0id2lkdGg6MTgwcHg7Ij48c2VsZWN0IHN0eWxlPSJmb250LXNpemU6MC45cmVtOyIgb25jaGFuZ2U9InVwZGF0ZVN1YmplY3RNZXRhKCdTVE1HIC0gTWVyY2F0aXF1ZSAoTWFya2V0aW5nKScsJ3BhcmVudCcsdGhpcy52YWx1ZSkiPjxvcHRpb24gdmFsdWU9IiIgc2VsZWN0ZWQ9InNlbGVjdGVkIj4oQXVjdW4gLSBSYWNpbmUpPC9vcHRpb24+PG9wdGlvbiB2YWx1ZT0iQXV0b25vbWllIEVQTEUiPkF1dG9ub21pZSBFUExFPC9vcHRpb24+PG9wdGlvbiB2YWx1ZT0iRU1DIj5FTUM8L29wdGlvbj48b3B0aW9uIHZhbHVlPSJFUFMiPkVQUzwvb3B0aW9uPjxvcHRpb24gdmFsdWU9IkVucy4gU2NpZW50aWZpcXVlIj5FbnMuIFNjaWVudGlmaXF1ZTwvb3B0aW9uPjxvcHRpb24gdmFsdWU9IkZyYW7Dp2FpcyI+RnJhbsOnYWlzPC9vcHRpb24+PG9wdGlvbiB2YWx1ZT0iSGlzdC1Hw6lvIj5IaXN0LUfDqW88L29wdGlvbj48b3B0aW9uIHZhbHVlPSJMVkEiPkxWQTwvb3B0aW9uPjxvcHRpb24gdmFsdWU9IkxWQiI+TFZCPC9vcHRpb24+PG9wdGlvbiB2YWx1ZT0iTUF0aHMiPk1BdGhzPC9vcHRpb24+PG9wdGlvbiB2YWx1ZT0iTWF0aHMgKFRDKSI+TWF0aHMgKFRDKTwvb3B0aW9uPjxvcHRpb24gdmFsdWU9IlBoaWxvc29waGllIj5QaGlsb3NvcGhpZTwvb3B0aW9uPjxvcHRpb24gdmFsdWU9IlBoeXMtQ2hpIChUQykiPlBoeXMtQ2hpIChUQyk8L29wdGlvbj48b3B0aW9uIHZhbHVlPSJTRVMiPlNFUzwvb3B0aW9uPjxvcHRpb24gdmFsdWU9IlNUTUcgLSBHZXN0aW9uIGV0IEZpbmFuY2UiPlNUTUcgLSBHZXN0aW9uIGV0IEZpbmFuY2U8L29wdGlvbj48b3B0aW9uIHZhbHVlPSJTVE1HIC0gUmVzc291cmNlcyBIdW1haW5lcyBldCBDb21tLiI+U1RNRyAtIFJlc3NvdXJjZXMgSHVtYWluZXMgZXQgQ29tbS48L29wdGlvbj48b3B0aW9uIHZhbHVlPSJTVE1HIC0gU3lzdMOobWVzIGQnSW5mb3JtYXRpb24gZGUgR2VzdGlvbiI+U1RNRyAtIFN5c3TDqG1lcyBkJ0luZm9ybWF0aW9uIGRlIEdlc3Rpb248L29wdGlvbj48b3B0aW9uIHZhbHVlPSJTVlQgKFRDKSI+U1ZUIChUQyk8L29wdGlvbj48b3B0aW9uIHZhbHVlPSJVTlNTIj5VTlNTPC9vcHRpb24+PC9zZWxlY3Q+PC90ZD4KICAgICAgICAgICAgCiAgICAgICAgICAgIDx0ZCBzdHlsZT0id2lkdGg6MTQwcHg7IHRleHQtYWxpZ246Y2VudGVyOyI+CiAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImJ0biBidG4tc20iIHN0eWxlPSJiYWNrZ3JvdW5kOndoaXRlOyBjb2xvcjojN2Y4YzhkOyBib3JkZXI6MXB4IHNvbGlkICNiZGMzYzc7IHdpZHRoOjEwMCU7IGRpc3BsYXk6ZmxleDsganVzdGlmeS1jb250ZW50OmNlbnRlcjsgYWxpZ24taXRlbXM6Y2VudGVyOyBnYXA6NXB4OyIgb25jbGljaz0ib3BlbkxpbmtlZFN1YmplY3RzTW9kYWwoJ1NUTUcgLSBNZXJjYXRpcXVlIChNYXJrZXRpbmcpJykiPgogICAgICAgICAgICAgICAgPHNwYW4+8J+UlyBHw6lyZXI8L3NwYW4+CiAgICAgICAgICAgICAgICA8c3BhbiBzdHlsZT0iYmFja2dyb3VuZDpyZ2JhKDAsMCwwLDAuMik7IHBhZGRpbmc6MXB4IDZweDsgYm9yZGVyLXJhZGl1czoxMHB4OyBmb250LXNpemU6MC43NXJlbTsiPjA8L3NwYW4+CiAgICAgICAgICAgIDwvYnV0dG9uPgogICAgICAgIDwvdGQ+CgogICAgICAgICAgICA8dGQgc3R5bGU9IndpZHRoOjE2MHB4OyI+CiAgICAgICAgICAgICAgICA8c2VsZWN0IG9uY2hhbmdlPSJ1cGRhdGVTdWJqZWN0TWV0YSgnU1RNRyAtIE1lcmNhdGlxdWUgKE1hcmtldGluZyknLCdtb2RlJyx0aGlzLnZhbHVlKSI+CiAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iZGl2Ij5EaXZpc2lvbjwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9ImxldmVsIiBzZWxlY3RlZD0ic2VsZWN0ZWQiPk5pdmVhdTwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9ImV0YWIiPsOJdGFibGlzc2VtZW50PC9vcHRpb24+CiAgICAgICAgICAgICAgICA8L3NlbGVjdD4KICAgICAgICAgICAgPC90ZD4KICAgICAgICAgICAgPHRkIHN0eWxlPSJ0ZXh0LWFsaWduOmxlZnQ7Ij48ZGl2IHN0eWxlPSJkaXNwbGF5OmZsZXg7IGZsZXgtd3JhcDp3cmFwOyBnYXA6OHB4OyI+PGRpdiBjbGFzcz0ibHZsLWlucHV0LWl0ZW0iIHN0eWxlPSJiYWNrZ3JvdW5kOiNmZmY7IGJvcmRlcjoxcHggc29saWQgI2RkZDsgcGFkZGluZzoycHggNnB4OyBib3JkZXItcmFkaXVzOjRweDsiPjxzcGFuIHN0eWxlPSJmb250LXNpemU6MC44cmVtOyBmb250LXdlaWdodDpib2xkOyI+Mm5kZTo8L3NwYW4+PGlucHV0IHR5cGU9Im51bWJlciIgc3RlcD0iMC41IiB2YWx1ZT0iMCIgc3R5bGU9IndpZHRoOjUwcHggIWltcG9ydGFudDsgdGV4dC1hbGlnbjpjZW50ZXI7IGhlaWdodDoyNHB4OyIgb25jaGFuZ2U9InVwZFN1YlZvbExldmVsKCdTVE1HIC0gTWVyY2F0aXF1ZSAoTWFya2V0aW5nKScsJzJuZGUnLHRoaXMudmFsdWUpIj48L2Rpdj48ZGl2IGNsYXNzPSJsdmwtaW5wdXQtaXRlbSIgc3R5bGU9ImJhY2tncm91bmQ6I2ZmZjsgYm9yZGVyOjFweCBzb2xpZCAjZGRkOyBwYWRkaW5nOjJweCA2cHg7IGJvcmRlci1yYWRpdXM6NHB4OyI+PHNwYW4gc3R5bGU9ImZvbnQtc2l6ZTowLjhyZW07IGZvbnQtd2VpZ2h0OmJvbGQ7Ij4xw6hyZTo8L3NwYW4+PGlucHV0IHR5cGU9Im51bWJlciIgc3RlcD0iMC41IiB2YWx1ZT0iMCIgc3R5bGU9IndpZHRoOjUwcHggIWltcG9ydGFudDsgdGV4dC1hbGlnbjpjZW50ZXI7IGhlaWdodDoyNHB4OyIgb25jaGFuZ2U9InVwZFN1YlZvbExldmVsKCdTVE1HIC0gTWVyY2F0aXF1ZSAoTWFya2V0aW5nKScsJzHDqHJlJyx0aGlzLnZhbHVlKSI+PC9kaXY+PGRpdiBjbGFzcz0ibHZsLWlucHV0LWl0ZW0iIHN0eWxlPSJiYWNrZ3JvdW5kOiNmZmY7IGJvcmRlcjoxcHggc29saWQgI2RkZDsgcGFkZGluZzoycHggNnB4OyBib3JkZXItcmFkaXVzOjRweDsiPjxzcGFuIHN0eWxlPSJmb250LXNpemU6MC44cmVtOyBmb250LXdlaWdodDpib2xkOyI+VGVybWluYWxlOjwvc3Bhbj48aW5wdXQgdHlwZT0ibnVtYmVyIiBzdGVwPSIwLjUiIHZhbHVlPSIwIiBzdHlsZT0id2lkdGg6NTBweCAhaW1wb3J0YW50OyB0ZXh0LWFsaWduOmNlbnRlcjsgaGVpZ2h0OjI0cHg7IiBvbmNoYW5nZT0idXBkU3ViVm9sTGV2ZWwoJ1NUTUcgLSBNZXJjYXRpcXVlIChNYXJrZXRpbmcpJywnVGVybWluYWxlJyx0aGlzLnZhbHVlKSI+PC9kaXY+PC9kaXY+PC90ZD4KICAgICAgICAgICAgPHRkIHN0eWxlPSJ3aWR0aDo1MHB4OyI+PGJ1dHRvbiBjbGFzcz0iYnRuIGJ0bi1kYW5nZXIgYnRuLXNtIiBvbmNsaWNrPSJkZWxTdWJqZWN0KCdTVE1HIC0gTWVyY2F0aXF1ZSAoTWFya2V0aW5nKScpIj7DlzwvYnV0dG9uPjwvdGQ+CiAgICAgICAgPC90cj48dHI+CiAgICAgICAgICAgIDx0ZCBzdHlsZT0id2lkdGg6ODBweDsiPjxpbnB1dCB0eXBlPSJ0ZXh0IiB2YWx1ZT0iRURTIiBwbGFjZWhvbGRlcj0iQ29kZSIgc3R5bGU9ImZvbnQtZmFtaWx5Om1vbm9zcGFjZTsgdGV4dC1hbGlnbjpjZW50ZXI7IiBvbmNoYW5nZT0idXBkYXRlU3ViamVjdE1ldGEoJ1NUTUcgLSBSZXNzb3VyY2VzIEh1bWFpbmVzIGV0IENvbW0uJywnY29kZScsdGhpcy52YWx1ZSkiPjwvdGQ+CiAgICAgICAgICAgIDx0ZD48aW5wdXQgdHlwZT0idGV4dCIgdmFsdWU9IlNUTUcgLSBSZXNzb3VyY2VzIEh1bWFpbmVzIGV0IENvbW0uIiBzdHlsZT0iZm9udC13ZWlnaHQ6Ym9sZDsiIG9uY2hhbmdlPSJyZW5hbWVTdWJqZWN0KCdTVE1HIC0gUmVzc291cmNlcyBIdW1haW5lcyBldCBDb21tLicsdGhpcy52YWx1ZSkiPjwvdGQ+CiAgICAgICAgICAgIDx0ZCBzdHlsZT0id2lkdGg6MTgwcHg7Ij48c2VsZWN0IHN0eWxlPSJmb250LXNpemU6MC45cmVtOyIgb25jaGFuZ2U9InVwZGF0ZVN1YmplY3RNZXRhKCdTVE1HIC0gUmVzc291cmNlcyBIdW1haW5lcyBldCBDb21tLicsJ3BhcmVudCcsdGhpcy52YWx1ZSkiPjxvcHRpb24gdmFsdWU9IiIgc2VsZWN0ZWQ9InNlbGVjdGVkIj4oQXVjdW4gLSBSYWNpbmUpPC9vcHRpb24+PG9wdGlvbiB2YWx1ZT0iQXV0b25vbWllIEVQTEUiPkF1dG9ub21pZSBFUExFPC9vcHRpb24+PG9wdGlvbiB2YWx1ZT0iRU1DIj5FTUM8L29wdGlvbj48b3B0aW9uIHZhbHVlPSJFUFMiPkVQUzwvb3B0aW9uPjxvcHRpb24gdmFsdWU9IkVucy4gU2NpZW50aWZpcXVlIj5FbnMuIFNjaWVudGlmaXF1ZTwvb3B0aW9uPjxvcHRpb24gdmFsdWU9IkZyYW7Dp2FpcyI+RnJhbsOnYWlzPC9vcHRpb24+PG9wdGlvbiB2YWx1ZT0iSGlzdC1Hw6lvIj5IaXN0LUfDqW88L29wdGlvbj48b3B0aW9uIHZhbHVlPSJMVkEiPkxWQTwvb3B0aW9uPjxvcHRpb24gdmFsdWU9IkxWQiI+TFZCPC9vcHRpb24+PG9wdGlvbiB2YWx1ZT0iTUF0aHMiPk1BdGhzPC9vcHRpb24+PG9wdGlvbiB2YWx1ZT0iTWF0aHMgKFRDKSI+TWF0aHMgKFRDKTwvb3B0aW9uPjxvcHRpb24gdmFsdWU9IlBoaWxvc29waGllIj5QaGlsb3NvcGhpZTwvb3B0aW9uPjxvcHRpb24gdmFsdWU9IlBoeXMtQ2hpIChUQykiPlBoeXMtQ2hpIChUQyk8L29wdGlvbj48b3B0aW9uIHZhbHVlPSJTRVMiPlNFUzwvb3B0aW9uPjxvcHRpb24gdmFsdWU9IlNUTUcgLSBHZXN0aW9uIGV0IEZpbmFuY2UiPlNUTUcgLSBHZXN0aW9uIGV0IEZpbmFuY2U8L29wdGlvbj48b3B0aW9uIHZhbHVlPSJTVE1HIC0gTWVyY2F0aXF1ZSAoTWFya2V0aW5nKSI+U1RNRyAtIE1lcmNhdGlxdWUgKE1hcmtldGluZyk8L29wdGlvbj48b3B0aW9uIHZhbHVlPSJTVE1HIC0gU3lzdMOobWVzIGQnSW5mb3JtYXRpb24gZGUgR2VzdGlvbiI+U1RNRyAtIFN5c3TDqG1lcyBkJ0luZm9ybWF0aW9uIGRlIEdlc3Rpb248L29wdGlvbj48b3B0aW9uIHZhbHVlPSJTVlQgKFRDKSI+U1ZUIChUQyk8L29wdGlvbj48b3B0aW9uIHZhbHVlPSJVTlNTIj5VTlNTPC9vcHRpb24+PC9zZWxlY3Q+PC90ZD4KICAgICAgICAgICAgCiAgICAgICAgICAgIDx0ZCBzdHlsZT0id2lkdGg6MTQwcHg7IHRleHQtYWxpZ246Y2VudGVyOyI+CiAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImJ0biBidG4tc20iIHN0eWxlPSJiYWNrZ3JvdW5kOndoaXRlOyBjb2xvcjojN2Y4YzhkOyBib3JkZXI6MXB4IHNvbGlkICNiZGMzYzc7IHdpZHRoOjEwMCU7IGRpc3BsYXk6ZmxleDsganVzdGlmeS1jb250ZW50OmNlbnRlcjsgYWxpZ24taXRlbXM6Y2VudGVyOyBnYXA6NXB4OyIgb25jbGljaz0ib3BlbkxpbmtlZFN1YmplY3RzTW9kYWwoJ1NUTUcgLSBSZXNzb3VyY2VzIEh1bWFpbmVzIGV0IENvbW0uJykiPgogICAgICAgICAgICAgICAgPHNwYW4+8J+UlyBHw6lyZXI8L3NwYW4+CiAgICAgICAgICAgICAgICA8c3BhbiBzdHlsZT0iYmFja2dyb3VuZDpyZ2JhKDAsMCwwLDAuMik7IHBhZGRpbmc6MXB4IDZweDsgYm9yZGVyLXJhZGl1czoxMHB4OyBmb250LXNpemU6MC43NXJlbTsiPjA8L3NwYW4+CiAgICAgICAgICAgIDwvYnV0dG9uPgogICAgICAgIDwvdGQ+CgogICAgICAgICAgICA8dGQgc3R5bGU9IndpZHRoOjE2MHB4OyI+CiAgICAgICAgICAgICAgICA8c2VsZWN0IG9uY2hhbmdlPSJ1cGRhdGVTdWJqZWN0TWV0YSgnU1RNRyAtIFJlc3NvdXJjZXMgSHVtYWluZXMgZXQgQ29tbS4nLCdtb2RlJyx0aGlzLnZhbHVlKSI+CiAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iZGl2Ij5EaXZpc2lvbjwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9ImxldmVsIiBzZWxlY3RlZD0ic2VsZWN0ZWQiPk5pdmVhdTwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9ImV0YWIiPsOJdGFibGlzc2VtZW50PC9vcHRpb24+CiAgICAgICAgICAgICAgICA8L3NlbGVjdD4KICAgICAgICAgICAgPC90ZD4KICAgICAgICAgICAgPHRkIHN0eWxlPSJ0ZXh0LWFsaWduOmxlZnQ7Ij48ZGl2IHN0eWxlPSJkaXNwbGF5OmZsZXg7IGZsZXgtd3JhcDp3cmFwOyBnYXA6OHB4OyI+PGRpdiBjbGFzcz0ibHZsLWlucHV0LWl0ZW0iIHN0eWxlPSJiYWNrZ3JvdW5kOiNmZmY7IGJvcmRlcjoxcHggc29saWQgI2RkZDsgcGFkZGluZzoycHggNnB4OyBib3JkZXItcmFkaXVzOjRweDsiPjxzcGFuIHN0eWxlPSJmb250LXNpemU6MC44cmVtOyBmb250LXdlaWdodDpib2xkOyI+Mm5kZTo8L3NwYW4+PGlucHV0IHR5cGU9Im51bWJlciIgc3RlcD0iMC41IiB2YWx1ZT0iMCIgc3R5bGU9IndpZHRoOjUwcHggIWltcG9ydGFudDsgdGV4dC1hbGlnbjpjZW50ZXI7IGhlaWdodDoyNHB4OyIgb25jaGFuZ2U9InVwZFN1YlZvbExldmVsKCdTVE1HIC0gUmVzc291cmNlcyBIdW1haW5lcyBldCBDb21tLicsJzJuZGUnLHRoaXMudmFsdWUpIj48L2Rpdj48ZGl2IGNsYXNzPSJsdmwtaW5wdXQtaXRlbSIgc3R5bGU9ImJhY2tncm91bmQ6I2ZmZjsgYm9yZGVyOjFweCBzb2xpZCAjZGRkOyBwYWRkaW5nOjJweCA2cHg7IGJvcmRlci1yYWRpdXM6NHB4OyI+PHNwYW4gc3R5bGU9ImZvbnQtc2l6ZTowLjhyZW07IGZvbnQtd2VpZ2h0OmJvbGQ7Ij4xw6hyZTo8L3NwYW4+PGlucHV0IHR5cGU9Im51bWJlciIgc3RlcD0iMC41IiB2YWx1ZT0iMCIgc3R5bGU9IndpZHRoOjUwcHggIWltcG9ydGFudDsgdGV4dC1hbGlnbjpjZW50ZXI7IGhlaWdodDoyNHB4OyIgb25jaGFuZ2U9InVwZFN1YlZvbExldmVsKCdTVE1HIC0gUmVzc291cmNlcyBIdW1haW5lcyBldCBDb21tLicsJzHDqHJlJyx0aGlzLnZhbHVlKSI+PC9kaXY+PGRpdiBjbGFzcz0ibHZsLWlucHV0LWl0ZW0iIHN0eWxlPSJiYWNrZ3JvdW5kOiNmZmY7IGJvcmRlcjoxcHggc29saWQgI2RkZDsgcGFkZGluZzoycHggNnB4OyBib3JkZXItcmFkaXVzOjRweDsiPjxzcGFuIHN0eWxlPSJmb250LXNpemU6MC44cmVtOyBmb250LXdlaWdodDpib2xkOyI+VGVybWluYWxlOjwvc3Bhbj48aW5wdXQgdHlwZT0ibnVtYmVyIiBzdGVwPSIwLjUiIHZhbHVlPSIwIiBzdHlsZT0id2lkdGg6NTBweCAhaW1wb3J0YW50OyB0ZXh0LWFsaWduOmNlbnRlcjsgaGVpZ2h0OjI0cHg7IiBvbmNoYW5nZT0idXBkU3ViVm9sTGV2ZWwoJ1NUTUcgLSBSZXNzb3VyY2VzIEh1bWFpbmVzIGV0IENvbW0uJywnVGVybWluYWxlJyx0aGlzLnZhbHVlKSI+PC9kaXY+PC9kaXY+PC90ZD4KICAgICAgICAgICAgPHRkIHN0eWxlPSJ3aWR0aDo1MHB4OyI+PGJ1dHRvbiBjbGFzcz0iYnRuIGJ0bi1kYW5nZXIgYnRuLXNtIiBvbmNsaWNrPSJkZWxTdWJqZWN0KCdTVE1HIC0gUmVzc291cmNlcyBIdW1haW5lcyBldCBDb21tLicpIj7DlzwvYnV0dG9uPjwvdGQ+CiAgICAgICAgPC90cj48dHI+CiAgICAgICAgICAgIDx0ZCBzdHlsZT0id2lkdGg6ODBweDsiPjxpbnB1dCB0eXBlPSJ0ZXh0IiB2YWx1ZT0iRURTIiBwbGFjZWhvbGRlcj0iQ29kZSIgc3R5bGU9ImZvbnQtZmFtaWx5Om1vbm9zcGFjZTsgdGV4dC1hbGlnbjpjZW50ZXI7IiBvbmNoYW5nZT0idXBkYXRlU3ViamVjdE1ldGEoJ1NUTUcgLSBTeXN0w6htZXMgZFwnSW5mb3JtYXRpb24gZGUgR2VzdGlvbicsJ2NvZGUnLHRoaXMudmFsdWUpIj48L3RkPgogICAgICAgICAgICA8dGQ+PGlucHV0IHR5cGU9InRleHQiIHZhbHVlPSJTVE1HIC0gU3lzdMOobWVzIGQnSW5mb3JtYXRpb24gZGUgR2VzdGlvbiIgc3R5bGU9ImZvbnQtd2VpZ2h0OmJvbGQ7IiBvbmNoYW5nZT0icmVuYW1lU3ViamVjdCgnU1RNRyAtIFN5c3TDqG1lcyBkXCdJbmZvcm1hdGlvbiBkZSBHZXN0aW9uJyx0aGlzLnZhbHVlKSI+PC90ZD4KICAgICAgICAgICAgPHRkIHN0eWxlPSJ3aWR0aDoxODBweDsiPjxzZWxlY3Qgc3R5bGU9ImZvbnQtc2l6ZTowLjlyZW07IiBvbmNoYW5nZT0idXBkYXRlU3ViamVjdE1ldGEoJ1NUTUcgLSBTeXN0w6htZXMgZFwnSW5mb3JtYXRpb24gZGUgR2VzdGlvbicsJ3BhcmVudCcsdGhpcy52YWx1ZSkiPjxvcHRpb24gdmFsdWU9IiIgc2VsZWN0ZWQ9InNlbGVjdGVkIj4oQXVjdW4gLSBSYWNpbmUpPC9vcHRpb24+PG9wdGlvbiB2YWx1ZT0iQXV0b25vbWllIEVQTEUiPkF1dG9ub21pZSBFUExFPC9vcHRpb24+PG9wdGlvbiB2YWx1ZT0iRU1DIj5FTUM8L29wdGlvbj48b3B0aW9uIHZhbHVlPSJFUFMiPkVQUzwvb3B0aW9uPjxvcHRpb24gdmFsdWU9IkVucy4gU2NpZW50aWZpcXVlIj5FbnMuIFNjaWVudGlmaXF1ZTwvb3B0aW9uPjxvcHRpb24gdmFsdWU9IkZyYW7Dp2FpcyI+RnJhbsOnYWlzPC9vcHRpb24+PG9wdGlvbiB2YWx1ZT0iSGlzdC1Hw6lvIj5IaXN0LUfDqW88L29wdGlvbj48b3B0aW9uIHZhbHVlPSJMVkEiPkxWQTwvb3B0aW9uPjxvcHRpb24gdmFsdWU9IkxWQiI+TFZCPC9vcHRpb24+PG9wdGlvbiB2YWx1ZT0iTUF0aHMiPk1BdGhzPC9vcHRpb24+PG9wdGlvbiB2YWx1ZT0iTWF0aHMgKFRDKSI+TWF0aHMgKFRDKTwvb3B0aW9uPjxvcHRpb24gdmFsdWU9IlBoaWxvc29waGllIj5QaGlsb3NvcGhpZTwvb3B0aW9uPjxvcHRpb24gdmFsdWU9IlBoeXMtQ2hpIChUQykiPlBoeXMtQ2hpIChUQyk8L29wdGlvbj48b3B0aW9uIHZhbHVlPSJTRVMiPlNFUzwvb3B0aW9uPjxvcHRpb24gdmFsdWU9IlNUTUcgLSBHZXN0aW9uIGV0IEZpbmFuY2UiPlNUTUcgLSBHZXN0aW9uIGV0IEZpbmFuY2U8L29wdGlvbj48b3B0aW9uIHZhbHVlPSJTVE1HIC0gTWVyY2F0aXF1ZSAoTWFya2V0aW5nKSI+U1RNRyAtIE1lcmNhdGlxdWUgKE1hcmtldGluZyk8L29wdGlvbj48b3B0aW9uIHZhbHVlPSJTVE1HIC0gUmVzc291cmNlcyBIdW1haW5lcyBldCBDb21tLiI+U1RNRyAtIFJlc3NvdXJjZXMgSHVtYWluZXMgZXQgQ29tbS48L29wdGlvbj48b3B0aW9uIHZhbHVlPSJTVlQgKFRDKSI+U1ZUIChUQyk8L29wdGlvbj48b3B0aW9uIHZhbHVlPSJVTlNTIj5VTlNTPC9vcHRpb24+PC9zZWxlY3Q+PC90ZD4KICAgICAgICAgICAgCiAgICAgICAgICAgIDx0ZCBzdHlsZT0id2lkdGg6MTQwcHg7IHRleHQtYWxpZ246Y2VudGVyOyI+CiAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImJ0biBidG4tc20iIHN0eWxlPSJiYWNrZ3JvdW5kOndoaXRlOyBjb2xvcjojN2Y4YzhkOyBib3JkZXI6MXB4IHNvbGlkICNiZGMzYzc7IHdpZHRoOjEwMCU7IGRpc3BsYXk6ZmxleDsganVzdGlmeS1jb250ZW50OmNlbnRlcjsgYWxpZ24taXRlbXM6Y2VudGVyOyBnYXA6NXB4OyIgb25jbGljaz0ib3BlbkxpbmtlZFN1YmplY3RzTW9kYWwoJ1NUTUcgLSBTeXN0w6htZXMgZFwnSW5mb3JtYXRpb24gZGUgR2VzdGlvbicpIj4KICAgICAgICAgICAgICAgIDxzcGFuPvCflJcgR8OpcmVyPC9zcGFuPgogICAgICAgICAgICAgICAgPHNwYW4gc3R5bGU9ImJhY2tncm91bmQ6cmdiYSgwLDAsMCwwLjIpOyBwYWRkaW5nOjFweCA2cHg7IGJvcmRlci1yYWRpdXM6MTBweDsgZm9udC1zaXplOjAuNzVyZW07Ij4wPC9zcGFuPgogICAgICAgICAgICA8L2J1dHRvbj4KICAgICAgICA8L3RkPgoKICAgICAgICAgICAgPHRkIHN0eWxlPSJ3aWR0aDoxNjBweDsiPgogICAgICAgICAgICAgICAgPHNlbGVjdCBvbmNoYW5nZT0idXBkYXRlU3ViamVjdE1ldGEoJ1NUTUcgLSBTeXN0w6htZXMgZFwnSW5mb3JtYXRpb24gZGUgR2VzdGlvbicsJ21vZGUnLHRoaXMudmFsdWUpIj4KICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJkaXYiPkRpdmlzaW9uPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0ibGV2ZWwiIHNlbGVjdGVkPSJzZWxlY3RlZCI+Tml2ZWF1PC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iZXRhYiI+w4l0YWJsaXNzZW1lbnQ8L29wdGlvbj4KICAgICAgICAgICAgICAgIDwvc2VsZWN0PgogICAgICAgICAgICA8L3RkPgogICAgICAgICAgICA8dGQgc3R5bGU9InRleHQtYWxpZ246bGVmdDsiPjxkaXYgc3R5bGU9ImRpc3BsYXk6ZmxleDsgZmxleC13cmFwOndyYXA7IGdhcDo4cHg7Ij48ZGl2IGNsYXNzPSJsdmwtaW5wdXQtaXRlbSIgc3R5bGU9ImJhY2tncm91bmQ6I2ZmZjsgYm9yZGVyOjFweCBzb2xpZCAjZGRkOyBwYWRkaW5nOjJweCA2cHg7IGJvcmRlci1yYWRpdXM6NHB4OyI+PHNwYW4gc3R5bGU9ImZvbnQtc2l6ZTowLjhyZW07IGZvbnQtd2VpZ2h0OmJvbGQ7Ij4ybmRlOjwvc3Bhbj48aW5wdXQgdHlwZT0ibnVtYmVyIiBzdGVwPSIwLjUiIHZhbHVlPSIwIiBzdHlsZT0id2lkdGg6NTBweCAhaW1wb3J0YW50OyB0ZXh0LWFsaWduOmNlbnRlcjsgaGVpZ2h0OjI0cHg7IiBvbmNoYW5nZT0idXBkU3ViVm9sTGV2ZWwoJ1NUTUcgLSBTeXN0w6htZXMgZFwnSW5mb3JtYXRpb24gZGUgR2VzdGlvbicsJzJuZGUnLHRoaXMudmFsdWUpIj48L2Rpdj48ZGl2IGNsYXNzPSJsdmwtaW5wdXQtaXRlbSIgc3R5bGU9ImJhY2tncm91bmQ6I2ZmZjsgYm9yZGVyOjFweCBzb2xpZCAjZGRkOyBwYWRkaW5nOjJweCA2cHg7IGJvcmRlci1yYWRpdXM6NHB4OyI+PHNwYW4gc3R5bGU9ImZvbnQtc2l6ZTowLjhyZW07IGZvbnQtd2VpZ2h0OmJvbGQ7Ij4xw6hyZTo8L3NwYW4+PGlucHV0IHR5cGU9Im51bWJlciIgc3RlcD0iMC41IiB2YWx1ZT0iMCIgc3R5bGU9IndpZHRoOjUwcHggIWltcG9ydGFudDsgdGV4dC1hbGlnbjpjZW50ZXI7IGhlaWdodDoyNHB4OyIgb25jaGFuZ2U9InVwZFN1YlZvbExldmVsKCdTVE1HIC0gU3lzdMOobWVzIGRcJ0luZm9ybWF0aW9uIGRlIEdlc3Rpb24nLCcxw6hyZScsdGhpcy52YWx1ZSkiPjwvZGl2PjxkaXYgY2xhc3M9Imx2bC1pbnB1dC1pdGVtIiBzdHlsZT0iYmFja2dyb3VuZDojZmZmOyBib3JkZXI6MXB4IHNvbGlkICNkZGQ7IHBhZGRpbmc6MnB4IDZweDsgYm9yZGVyLXJhZGl1czo0cHg7Ij48c3BhbiBzdHlsZT0iZm9udC1zaXplOjAuOHJlbTsgZm9udC13ZWlnaHQ6Ym9sZDsiPlRlcm1pbmFsZTo8L3NwYW4+PGlucHV0IHR5cGU9Im51bWJlciIgc3RlcD0iMC41IiB2YWx1ZT0iMCIgc3R5bGU9IndpZHRoOjUwcHggIWltcG9ydGFudDsgdGV4dC1hbGlnbjpjZW50ZXI7IGhlaWdodDoyNHB4OyIgb25jaGFuZ2U9InVwZFN1YlZvbExldmVsKCdTVE1HIC0gU3lzdMOobWVzIGRcJ0luZm9ybWF0aW9uIGRlIEdlc3Rpb24nLCdUZXJtaW5hbGUnLHRoaXMudmFsdWUpIj48L2Rpdj48L2Rpdj48L3RkPgogICAgICAgICAgICA8dGQgc3R5bGU9IndpZHRoOjUwcHg7Ij48YnV0dG9uIGNsYXNzPSJidG4gYnRuLWRhbmdlciBidG4tc20iIG9uY2xpY2s9ImRlbFN1YmplY3QoJ1NUTUcgLSBTeXN0w6htZXMgZFwnSW5mb3JtYXRpb24gZGUgR2VzdGlvbicpIj7DlzwvYnV0dG9uPjwvdGQ+CiAgICAgICAgPC90cj48dHI+CiAgICAgICAgICAgIDx0ZCBzdHlsZT0id2lkdGg6ODBweDsiPjxpbnB1dCB0eXBlPSJ0ZXh0IiBwbGFjZWhvbGRlcj0iQ29kZSIgc3R5bGU9ImZvbnQtZmFtaWx5Om1vbm9zcGFjZTsgdGV4dC1hbGlnbjpjZW50ZXI7IiBvbmNoYW5nZT0idXBkYXRlU3ViamVjdE1ldGEoJ1NWVCAoVEMpJywnY29kZScsdGhpcy52YWx1ZSkiPjwvdGQ+CiAgICAgICAgICAgIDx0ZD48aW5wdXQgdHlwZT0idGV4dCIgdmFsdWU9IlNWVCAoVEMpIiBzdHlsZT0iZm9udC13ZWlnaHQ6Ym9sZDsiIG9uY2hhbmdlPSJyZW5hbWVTdWJqZWN0KCdTVlQgKFRDKScsdGhpcy52YWx1ZSkiPjwvdGQ+CiAgICAgICAgICAgIDx0ZCBzdHlsZT0id2lkdGg6MTgwcHg7Ij48c2VsZWN0IHN0eWxlPSJmb250LXNpemU6MC45cmVtOyIgb25jaGFuZ2U9InVwZGF0ZVN1YmplY3RNZXRhKCdTVlQgKFRDKScsJ3BhcmVudCcsdGhpcy52YWx1ZSkiPjxvcHRpb24gdmFsdWU9IiIgc2VsZWN0ZWQ9InNlbGVjdGVkIj4oQXVjdW4gLSBSYWNpbmUpPC9vcHRpb24+PG9wdGlvbiB2YWx1ZT0iQXV0b25vbWllIEVQTEUiPkF1dG9ub21pZSBFUExFPC9vcHRpb24+PG9wdGlvbiB2YWx1ZT0iRU1DIj5FTUM8L29wdGlvbj48b3B0aW9uIHZhbHVlPSJFUFMiPkVQUzwvb3B0aW9uPjxvcHRpb24gdmFsdWU9IkVucy4gU2NpZW50aWZpcXVlIj5FbnMuIFNjaWVudGlmaXF1ZTwvb3B0aW9uPjxvcHRpb24gdmFsdWU9IkZyYW7Dp2FpcyI+RnJhbsOnYWlzPC9vcHRpb24+PG9wdGlvbiB2YWx1ZT0iSGlzdC1Hw6lvIj5IaXN0LUfDqW88L29wdGlvbj48b3B0aW9uIHZhbHVlPSJMVkEiPkxWQTwvb3B0aW9uPjxvcHRpb24gdmFsdWU9IkxWQiI+TFZCPC9vcHRpb24+PG9wdGlvbiB2YWx1ZT0iTUF0aHMiPk1BdGhzPC9vcHRpb24+PG9wdGlvbiB2YWx1ZT0iTWF0aHMgKFRDKSI+TWF0aHMgKFRDKTwvb3B0aW9uPjxvcHRpb24gdmFsdWU9IlBoaWxvc29waGllIj5QaGlsb3NvcGhpZTwvb3B0aW9uPjxvcHRpb24gdmFsdWU9IlBoeXMtQ2hpIChUQykiPlBoeXMtQ2hpIChUQyk8L29wdGlvbj48b3B0aW9uIHZhbHVlPSJTRVMiPlNFUzwvb3B0aW9uPjxvcHRpb24gdmFsdWU9IlNUTUcgLSBHZXN0aW9uIGV0IEZpbmFuY2UiPlNUTUcgLSBHZXN0aW9uIGV0IEZpbmFuY2U8L29wdGlvbj48b3B0aW9uIHZhbHVlPSJTVE1HIC0gTWVyY2F0aXF1ZSAoTWFya2V0aW5nKSI+U1RNRyAtIE1lcmNhdGlxdWUgKE1hcmtldGluZyk8L29wdGlvbj48b3B0aW9uIHZhbHVlPSJTVE1HIC0gUmVzc291cmNlcyBIdW1haW5lcyBldCBDb21tLiI+U1RNRyAtIFJlc3NvdXJjZXMgSHVtYWluZXMgZXQgQ29tbS48L29wdGlvbj48b3B0aW9uIHZhbHVlPSJTVE1HIC0gU3lzdMOobWVzIGQnSW5mb3JtYXRpb24gZGUgR2VzdGlvbiI+U1RNRyAtIFN5c3TDqG1lcyBkJ0luZm9ybWF0aW9uIGRlIEdlc3Rpb248L29wdGlvbj48b3B0aW9uIHZhbHVlPSJVTlNTIj5VTlNTPC9vcHRpb24+PC9zZWxlY3Q+PC90ZD4KICAgICAgICAgICAgCiAgICAgICAgICAgIDx0ZCBzdHlsZT0id2lkdGg6MTQwcHg7IHRleHQtYWxpZ246Y2VudGVyOyI+CiAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImJ0biBidG4tc20iIHN0eWxlPSJiYWNrZ3JvdW5kOndoaXRlOyBjb2xvcjojN2Y4YzhkOyBib3JkZXI6MXB4IHNvbGlkICNiZGMzYzc7IHdpZHRoOjEwMCU7IGRpc3BsYXk6ZmxleDsganVzdGlmeS1jb250ZW50OmNlbnRlcjsgYWxpZ24taXRlbXM6Y2VudGVyOyBnYXA6NXB4OyIgb25jbGljaz0ib3BlbkxpbmtlZFN1YmplY3RzTW9kYWwoJ1NWVCAoVEMpJykiPgogICAgICAgICAgICAgICAgPHNwYW4+8J+UlyBHw6lyZXI8L3NwYW4+CiAgICAgICAgICAgICAgICA8c3BhbiBzdHlsZT0iYmFja2dyb3VuZDpyZ2JhKDAsMCwwLDAuMik7IHBhZGRpbmc6MXB4IDZweDsgYm9yZGVyLXJhZGl1czoxMHB4OyBmb250LXNpemU6MC43NXJlbTsiPjA8L3NwYW4+CiAgICAgICAgICAgIDwvYnV0dG9uPgogICAgICAgIDwvdGQ+CgogICAgICAgICAgICA8dGQgc3R5bGU9IndpZHRoOjE2MHB4OyI+CiAgICAgICAgICAgICAgICA8c2VsZWN0IG9uY2hhbmdlPSJ1cGRhdGVTdWJqZWN0TWV0YSgnU1ZUIChUQyknLCdtb2RlJyx0aGlzLnZhbHVlKSI+CiAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iZGl2IiBzZWxlY3RlZD0ic2VsZWN0ZWQiPkRpdmlzaW9uPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0ibGV2ZWwiPk5pdmVhdTwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9ImV0YWIiPsOJdGFibGlzc2VtZW50PC9vcHRpb24+CiAgICAgICAgICAgICAgICA8L3NlbGVjdD4KICAgICAgICAgICAgPC90ZD4KICAgICAgICAgICAgPHRkIHN0eWxlPSJ0ZXh0LWFsaWduOmxlZnQ7Ij48ZGl2IGNsYXNzPSJsdmwtY2hlY2stY29udGFpbmVyIj48bGFiZWwgY2xhc3M9Imx2bC1jaGVjay1pdGVtIj48aW5wdXQgdHlwZT0iY2hlY2tib3giIGNoZWNrZWQ9ImNoZWNrZWQiIG9uY2hhbmdlPSJ0b2dnbGVTdWJMZXZlbCgnU1ZUIChUQyknLCcybmRlJykiPjJuZGU8L2xhYmVsPjxsYWJlbCBjbGFzcz0ibHZsLWNoZWNrLWl0ZW0iPjxpbnB1dCB0eXBlPSJjaGVja2JveCIgY2hlY2tlZD0iY2hlY2tlZCIgb25jaGFuZ2U9InRvZ2dsZVN1YkxldmVsKCdTVlQgKFRDKScsJzHDqHJlJykiPjHDqHJlPC9sYWJlbD48bGFiZWwgY2xhc3M9Imx2bC1jaGVjay1pdGVtIj48aW5wdXQgdHlwZT0iY2hlY2tib3giIGNoZWNrZWQ9ImNoZWNrZWQiIG9uY2hhbmdlPSJ0b2dnbGVTdWJMZXZlbCgnU1ZUIChUQyknLCdUZXJtaW5hbGUnKSI+VGVybWluYWxlPC9sYWJlbD48L2Rpdj48L3RkPgogICAgICAgICAgICA8dGQgc3R5bGU9IndpZHRoOjUwcHg7Ij48YnV0dG9uIGNsYXNzPSJidG4gYnRuLWRhbmdlciBidG4tc20iIG9uY2xpY2s9ImRlbFN1YmplY3QoJ1NWVCAoVEMpJykiPsOXPC9idXR0b24+PC90ZD4KICAgICAgICA8L3RyPjx0cj4KICAgICAgICAgICAgPHRkIHN0eWxlPSJ3aWR0aDo4MHB4OyI+PGlucHV0IHR5cGU9InRleHQiIHBsYWNlaG9sZGVyPSJDb2RlIiBzdHlsZT0iZm9udC1mYW1pbHk6bW9ub3NwYWNlOyB0ZXh0LWFsaWduOmNlbnRlcjsiIG9uY2hhbmdlPSJ1cGRhdGVTdWJqZWN0TWV0YSgnVU5TUycsJ2NvZGUnLHRoaXMudmFsdWUpIj48L3RkPgogICAgICAgICAgICA8dGQ+PGlucHV0IHR5cGU9InRleHQiIHZhbHVlPSJVTlNTIiBzdHlsZT0iZm9udC13ZWlnaHQ6Ym9sZDsiIG9uY2hhbmdlPSJyZW5hbWVTdWJqZWN0KCdVTlNTJyx0aGlzLnZhbHVlKSI+PC90ZD4KICAgICAgICAgICAgPHRkIHN0eWxlPSJ3aWR0aDoxODBweDsiPjxzZWxlY3Qgc3R5bGU9ImZvbnQtc2l6ZTowLjlyZW07IiBvbmNoYW5nZT0idXBkYXRlU3ViamVjdE1ldGEoJ1VOU1MnLCdwYXJlbnQnLHRoaXMudmFsdWUpIj48b3B0aW9uIHZhbHVlPSIiPihBdWN1biAtIFJhY2luZSk8L29wdGlvbj48b3B0aW9uIHZhbHVlPSJBdXRvbm9taWUgRVBMRSI+QXV0b25vbWllIEVQTEU8L29wdGlvbj48b3B0aW9uIHZhbHVlPSJFTUMiPkVNQzwvb3B0aW9uPjxvcHRpb24gdmFsdWU9IkVQUyIgc2VsZWN0ZWQ9InNlbGVjdGVkIj5FUFM8L29wdGlvbj48b3B0aW9uIHZhbHVlPSJFbnMuIFNjaWVudGlmaXF1ZSI+RW5zLiBTY2llbnRpZmlxdWU8L29wdGlvbj48b3B0aW9uIHZhbHVlPSJGcmFuw6dhaXMiPkZyYW7Dp2Fpczwvb3B0aW9uPjxvcHRpb24gdmFsdWU9Ikhpc3QtR8OpbyI+SGlzdC1Hw6lvPC9vcHRpb24+PG9wdGlvbiB2YWx1ZT0iTFZBIj5MVkE8L29wdGlvbj48b3B0aW9uIHZhbHVlPSJMVkIiPkxWQjwvb3B0aW9uPjxvcHRpb24gdmFsdWU9Ik1BdGhzIj5NQXRoczwvb3B0aW9uPjxvcHRpb24gdmFsdWU9Ik1hdGhzIChUQykiPk1hdGhzIChUQyk8L29wdGlvbj48b3B0aW9uIHZhbHVlPSJQaGlsb3NvcGhpZSI+UGhpbG9zb3BoaWU8L29wdGlvbj48b3B0aW9uIHZhbHVlPSJQaHlzLUNoaSAoVEMpIj5QaHlzLUNoaSAoVEMpPC9vcHRpb24+PG9wdGlvbiB2YWx1ZT0iU0VTIj5TRVM8L29wdGlvbj48b3B0aW9uIHZhbHVlPSJTVE1HIC0gR2VzdGlvbiBldCBGaW5hbmNlIj5TVE1HIC0gR2VzdGlvbiBldCBGaW5hbmNlPC9vcHRpb24+PG9wdGlvbiB2YWx1ZT0iU1RNRyAtIE1lcmNhdGlxdWUgKE1hcmtldGluZykiPlNUTUcgLSBNZXJjYXRpcXVlIChNYXJrZXRpbmcpPC9vcHRpb24+PG9wdGlvbiB2YWx1ZT0iU1RNRyAtIFJlc3NvdXJjZXMgSHVtYWluZXMgZXQgQ29tbS4iPlNUTUcgLSBSZXNzb3VyY2VzIEh1bWFpbmVzIGV0IENvbW0uPC9vcHRpb24+PG9wdGlvbiB2YWx1ZT0iU1RNRyAtIFN5c3TDqG1lcyBkJ0luZm9ybWF0aW9uIGRlIEdlc3Rpb24iPlNUTUcgLSBTeXN0w6htZXMgZCdJbmZvcm1hdGlvbiBkZSBHZXN0aW9uPC9vcHRpb24+PG9wdGlvbiB2YWx1ZT0iU1ZUIChUQykiPlNWVCAoVEMpPC9vcHRpb24+PC9zZWxlY3Q+PC90ZD4KICAgICAgICAgICAgCiAgICAgICAgICAgIDx0ZCBzdHlsZT0id2lkdGg6MTQwcHg7IHRleHQtYWxpZ246Y2VudGVyOyI+CiAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImJ0biBidG4tc20iIHN0eWxlPSJiYWNrZ3JvdW5kOndoaXRlOyBjb2xvcjojN2Y4YzhkOyBib3JkZXI6MXB4IHNvbGlkICNiZGMzYzc7IHdpZHRoOjEwMCU7IGRpc3BsYXk6ZmxleDsganVzdGlmeS1jb250ZW50OmNlbnRlcjsgYWxpZ24taXRlbXM6Y2VudGVyOyBnYXA6NXB4OyIgb25jbGljaz0ib3BlbkxpbmtlZFN1YmplY3RzTW9kYWwoJ1VOU1MnKSI+CiAgICAgICAgICAgICAgICA8c3Bhbj7wn5SXIEfDqXJlcjwvc3Bhbj4KICAgICAgICAgICAgICAgIDxzcGFuIHN0eWxlPSJiYWNrZ3JvdW5kOnJnYmEoMCwwLDAsMC4yKTsgcGFkZGluZzoxcHggNnB4OyBib3JkZXItcmFkaXVzOjEwcHg7IGZvbnQtc2l6ZTowLjc1cmVtOyI+MDwvc3Bhbj4KICAgICAgICAgICAgPC9idXR0b24+CiAgICAgICAgPC90ZD4KCiAgICAgICAgICAgIDx0ZCBzdHlsZT0id2lkdGg6MTYwcHg7Ij4KICAgICAgICAgICAgICAgIDxzZWxlY3Qgb25jaGFuZ2U9InVwZGF0ZVN1YmplY3RNZXRhKCdVTlNTJywnbW9kZScsdGhpcy52YWx1ZSkiPgogICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9ImRpdiI+RGl2aXNpb248L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJsZXZlbCI+Tml2ZWF1PC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iZXRhYiIgc2VsZWN0ZWQ9InNlbGVjdGVkIj7DiXRhYmxpc3NlbWVudDwvb3B0aW9uPgogICAgICAgICAgICAgICAgPC9zZWxlY3Q+CiAgICAgICAgICAgIDwvdGQ+CiAgICAgICAgICAgIDx0ZCBzdHlsZT0idGV4dC1hbGlnbjpsZWZ0OyI+PGRpdiBjbGFzcz0ibHZsLWlucHV0LWl0ZW0iPjxzcGFuIHN0eWxlPSJmb250LXdlaWdodDpib2xkOyBjb2xvcjojMTZhMDg1OyI+Rm9yZmFpdCA6PC9zcGFuPjxpbnB1dCB0eXBlPSJudW1iZXIiIHN0ZXA9IjAuNSIgdmFsdWU9IjMiIHN0eWxlPSJ3aWR0aDo4MHB4ICFpbXBvcnRhbnQ7IHRleHQtYWxpZ246Y2VudGVyOyBmb250LXdlaWdodDpib2xkOyBjb2xvcjojMTZhMDg1OyBib3JkZXI6MnB4IHNvbGlkICMxYWJjOWM7IG1hcmdpbi1sZWZ0OiAxMHB4OyIgb25jaGFuZ2U9InVwZFN1YkV0YWIoJ1VOU1MnLHRoaXMudmFsdWUpIj48L2Rpdj48L3RkPgogICAgICAgICAgICA8dGQgc3R5bGU9IndpZHRoOjUwcHg7Ij48YnV0dG9uIGNsYXNzPSJidG4gYnRuLWRhbmdlciBidG4tc20iIG9uY2xpY2s9ImRlbFN1YmplY3QoJ1VOU1MnKSI+w5c8L2J1dHRvbj48L3RkPgogICAgICAgIDwvdHI+PC90Ym9keT4KICAgICAgICAgICAgPC90YWJsZT4KICAgICAgICA8L2Rpdj4KICAgIDwvZGl2PgoKICAgIDxkaXYgaWQ9InJlY2FwIiBjbGFzcz0ic2VjdGlvbiI+CiAgICAgICAgPGRpdiBjbGFzcz0iY2FyZCI+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImNhcmQtaGVhZGVyIj4KICAgICAgICAgICAgICAgIDxoMz5CaWxhbiAmYW1wOyBFeHBvcnQ8L2gzPgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZXhwb3J0LWdyb3VwIj4KICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJidG4tZXhwIiBvbmNsaWNrPSJleHBvcnRDdXJyZW50UGFnZSgnZXhjZWwnKSI+8J+TiiBFeGNlbDwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImJ0bi1leHAiIG9uY2xpY2s9ImV4cG9ydEN1cnJlbnRQYWdlKCdwZGYnKSI+8J+ThCBQREY8L2J1dHRvbj4KCQkJCQk8YnV0dG9uIGNsYXNzPSJidG4tZXhwIiBzdHlsZT0iYmFja2dyb3VuZDojZTY3ZTIyOyIgb25jbGljaz0iZ2VuZXJhdGVDQVByZXMoKSI+8J+Tve+4jyBEaWFwb3JhbWEgQ0EgKC5wcHR4KTwvYnV0dG9uPgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgPHRhYmxlIGlkPSJyZWNhcC10YWJsZSIgc3R5bGU9IndpZHRoOjEwMCU7IHRhYmxlLWxheW91dDogZml4ZWQ7Ij4KICAgIDx0aGVhZD4KICAgICAgICA8dHI+CiAgICAgICAgICAgIDx0aCBzdHlsZT0idGV4dC1hbGlnbjpsZWZ0OyB3aWR0aDogMjUwcHg7Ij5EaXNjaXBsaW5lPC90aD4KICAgICAgICAgICAgCiAgICAgICAgICAgIDx0aCBzdHlsZT0iYmFja2dyb3VuZDojZmRlZGVjOyBjb2xvcjojYzAzOTJiOyB3aWR0aDo3MHB4OyI+QmVzb2luPC90aD4KICAgICAgICAgICAgPHRoIHN0eWxlPSJiYWNrZ3JvdW5kOiNlOGY2ZjM7IGNvbG9yOiMxNmEwODU7IHdpZHRoOjcwcHg7Ij5BcHBvcnQ8L3RoPgogICAgICAgICAgICA8dGggc3R5bGU9IndpZHRoOjcwcHg7Ij7DiWNhcnQ8L3RoPgogICAgICAgICAgICAKICAgICAgICAgICAgPHRoPkNvbW1lbnRhaXJlczwvdGg+CiAgICAgICAgPC90cj4KICAgIDwvdGhlYWQ+CiAgICA8dGJvZHkgaWQ9InJlY2FwLWJvZHkiPjx0ciBjbGFzcz0icm93LWhlYWRlciIgc3R5bGU9IiI+CiAgICAgICAgICAgICAgICA8dGQgc3R5bGU9InRleHQtYWxpZ246bGVmdDsgZm9udC13ZWlnaHQ6Ym9sZDs7IG92ZXJmbG93OmhpZGRlbjsgdGV4dC1vdmVyZmxvdzplbGxpcHNpczsgd2hpdGUtc3BhY2U6bm93cmFwOyI+RU1DIDwvdGQ+CiAgICAgICAgICAgICAgICA8dGQgc3R5bGU9ImZvbnQtd2VpZ2h0OmJvbGQ7IGNvbG9yOiNmMWM0MGY7Ij4xLjA8L3RkPgogICAgICAgICAgICAgICAgPHRkIHN0eWxlPSJmb250LXdlaWdodDpib2xkOyBjb2xvcjojODFkNGZhOyI+MC4wPC90ZD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQgc3R5bGU9ImZvbnQtd2VpZ2h0OmJvbGQ7IGNvbG9yOiNlNzRjM2M7Ij4tMS4wPC90ZD4KICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT0icGFkZGluZzo0cHg7IHZlcnRpY2FsLWFsaWduOm1pZGRsZTsiPgogICAgICAgICAgICAgICAgICAgIDxpbnB1dCBjbGFzcz0iaW5wdXQtY29tbWVudCIgb25jaGFuZ2U9InVwZENvbW1lbnQoJ0VNQycsdGhpcy52YWx1ZSkiIHN0eWxlPSJ3aWR0aDoxMDAlOyBib3gtc2l6aW5nOmJvcmRlci1ib3g7IGJvcmRlcjoxcHggc29saWQgIzc4OTA5YzsgcGFkZGluZzo0cHg7IGNvbG9yOmJsYWNrOyIgcGxhY2Vob2xkZXI9IkF1dHJlIGNvbW1lbnRhaXJlLi4uIj4KICAgICAgICAgICAgICAgIDwvdGQ+CiAgICAgICAgICAgIDwvdHI+PHRyIGNsYXNzPSJyb3ctaGVhZGVyIj4KICAgICAgICAgICAgICAgICAgICA8dGQgc3R5bGU9InRleHQtYWxpZ246bGVmdDsgZm9udC13ZWlnaHQ6Ym9sZDsiPvCfk6YgUMOUTEUgRVBTPC90ZD4KICAgICAgICAgICAgICAgICAgICA8dGQgc3R5bGU9ImZvbnQtd2VpZ2h0OmJvbGQ7IGNvbG9yOiNmMWM0MGY7Ij43LjA8L3RkPgogICAgICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT0iZm9udC13ZWlnaHQ6Ym9sZDsgY29sb3I6IzgxZDRmYTsiPjAuMDwvdGQ+CiAgICAgICAgICAgICAgICAgICAgPHRkPjAuMDwvdGQ+CiAgICAgICAgICAgICAgICAgICAgPHRkPjAuMDwvdGQ+CiAgICAgICAgICAgICAgICAgICAgPHRkIHN0eWxlPSJmb250LXdlaWdodDpib2xkOyBiYWNrZ3JvdW5kOiNjMDM5MmI7IGNvbG9yOndoaXRlOyI+LTcuMDwvdGQ+CiAgICAgICAgICAgICAgICAgICAgPHRkPjwvdGQ+CiAgICAgICAgICAgICAgICA8L3RyPjx0ciBjbGFzcz0iIiBzdHlsZT0iYmFja2dyb3VuZDojZjlmOWY5OyI+CiAgICAgICAgICAgICAgICA8dGQgc3R5bGU9InRleHQtYWxpZ246bGVmdDsgZm9udC13ZWlnaHQ6Ym9sZDsgcGFkZGluZy1sZWZ0OjIwcHg7OyBvdmVyZmxvdzpoaWRkZW47IHRleHQtb3ZlcmZsb3c6ZWxsaXBzaXM7IHdoaXRlLXNwYWNlOm5vd3JhcDsiPuKGsyBFUFMgPC90ZD4KICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT0iZm9udC13ZWlnaHQ6Ym9sZDsgY29sb3I6I2MwMzkyYjsiPjQuMDwvdGQ+CiAgICAgICAgICAgICAgICA8dGQgc3R5bGU9ImZvbnQtd2VpZ2h0OmJvbGQ7IGNvbG9yOiMxNmEwODU7Ij4wLjA8L3RkPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT0iZm9udC13ZWlnaHQ6Ym9sZDsgY29sb3I6cmVkOyI+LTQuMDwvdGQ+CiAgICAgICAgICAgICAgICA8dGQgc3R5bGU9InBhZGRpbmc6NHB4OyB2ZXJ0aWNhbC1hbGlnbjptaWRkbGU7Ij4KICAgICAgICAgICAgICAgICAgICA8aW5wdXQgY2xhc3M9ImlucHV0LWNvbW1lbnQiIG9uY2hhbmdlPSJ1cGRDb21tZW50KCdFUFMnLHRoaXMudmFsdWUpIiBzdHlsZT0id2lkdGg6MTAwJTsgYm94LXNpemluZzpib3JkZXItYm94OyBib3JkZXI6MXB4IHNvbGlkICNjY2M7IHBhZGRpbmc6NHB4OyBjb2xvcjpibGFjazsiIHBsYWNlaG9sZGVyPSJBdXRyZSBjb21tZW50YWlyZS4uLiI+CiAgICAgICAgICAgICAgICA8L3RkPgogICAgICAgICAgICA8L3RyPjx0ciBjbGFzcz0iIiBzdHlsZT0iYmFja2dyb3VuZDojZjlmOWY5OyI+CiAgICAgICAgICAgICAgICA8dGQgc3R5bGU9InRleHQtYWxpZ246bGVmdDsgZm9udC13ZWlnaHQ6Ym9sZDsgcGFkZGluZy1sZWZ0OjIwcHg7OyBvdmVyZmxvdzpoaWRkZW47IHRleHQtb3ZlcmZsb3c6ZWxsaXBzaXM7IHdoaXRlLXNwYWNlOm5vd3JhcDsiPuKGsyBVTlNTIDwvdGQ+CiAgICAgICAgICAgICAgICA8dGQgc3R5bGU9ImZvbnQtd2VpZ2h0OmJvbGQ7IGNvbG9yOiNjMDM5MmI7Ij4zLjA8L3RkPgogICAgICAgICAgICAgICAgPHRkIHN0eWxlPSJmb250LXdlaWdodDpib2xkOyBjb2xvcjojMTZhMDg1OyI+MC4wPC90ZD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQgc3R5bGU9ImZvbnQtd2VpZ2h0OmJvbGQ7IGNvbG9yOnJlZDsiPi0zLjA8L3RkPgogICAgICAgICAgICAgICAgPHRkIHN0eWxlPSJwYWRkaW5nOjRweDsgdmVydGljYWwtYWxpZ246bWlkZGxlOyI+CiAgICAgICAgICAgICAgICAgICAgPGlucHV0IGNsYXNzPSJpbnB1dC1jb21tZW50IiBvbmNoYW5nZT0idXBkQ29tbWVudCgnVU5TUycsdGhpcy52YWx1ZSkiIHN0eWxlPSJ3aWR0aDoxMDAlOyBib3gtc2l6aW5nOmJvcmRlci1ib3g7IGJvcmRlcjoxcHggc29saWQgI2NjYzsgcGFkZGluZzo0cHg7IGNvbG9yOmJsYWNrOyIgcGxhY2Vob2xkZXI9IkF1dHJlIGNvbW1lbnRhaXJlLi4uIj4KICAgICAgICAgICAgICAgIDwvdGQ+CiAgICAgICAgICAgIDwvdHI+PHRyIGNsYXNzPSJyb3ctaGVhZGVyIiBzdHlsZT0iIj4KICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT0idGV4dC1hbGlnbjpsZWZ0OyBmb250LXdlaWdodDpib2xkOzsgb3ZlcmZsb3c6aGlkZGVuOyB0ZXh0LW92ZXJmbG93OmVsbGlwc2lzOyB3aGl0ZS1zcGFjZTpub3dyYXA7Ij5FbnMuIFNjaWVudGlmaXF1ZSA8L3RkPgogICAgICAgICAgICAgICAgPHRkIHN0eWxlPSJmb250LXdlaWdodDpib2xkOyBjb2xvcjojZjFjNDBmOyI+Mi4wPC90ZD4KICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT0iZm9udC13ZWlnaHQ6Ym9sZDsgY29sb3I6IzgxZDRmYTsiPjAuMDwvdGQ+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIHN0eWxlPSJmb250LXdlaWdodDpib2xkOyBjb2xvcjojZTc0YzNjOyI+LTIuMDwvdGQ+CiAgICAgICAgICAgICAgICA8dGQgc3R5bGU9InBhZGRpbmc6NHB4OyB2ZXJ0aWNhbC1hbGlnbjptaWRkbGU7Ij4KICAgICAgICAgICAgICAgICAgICA8aW5wdXQgY2xhc3M9ImlucHV0LWNvbW1lbnQiIG9uY2hhbmdlPSJ1cGRDb21tZW50KCdFbnMuIFNjaWVudGlmaXF1ZScsdGhpcy52YWx1ZSkiIHN0eWxlPSJ3aWR0aDoxMDAlOyBib3gtc2l6aW5nOmJvcmRlci1ib3g7IGJvcmRlcjoxcHggc29saWQgIzc4OTA5YzsgcGFkZGluZzo0cHg7IGNvbG9yOmJsYWNrOyIgcGxhY2Vob2xkZXI9IkF1dHJlIGNvbW1lbnRhaXJlLi4uIj4KICAgICAgICAgICAgICAgIDwvdGQ+CiAgICAgICAgICAgIDwvdHI+PHRyIGNsYXNzPSJyb3ctaGVhZGVyIiBzdHlsZT0iIj4KICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT0idGV4dC1hbGlnbjpsZWZ0OyBmb250LXdlaWdodDpib2xkOzsgb3ZlcmZsb3c6aGlkZGVuOyB0ZXh0LW92ZXJmbG93OmVsbGlwc2lzOyB3aGl0ZS1zcGFjZTpub3dyYXA7Ij5GcmFuw6dhaXMgPC90ZD4KICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT0iZm9udC13ZWlnaHQ6Ym9sZDsgY29sb3I6I2YxYzQwZjsiPjguMDwvdGQ+CiAgICAgICAgICAgICAgICA8dGQgc3R5bGU9ImZvbnQtd2VpZ2h0OmJvbGQ7IGNvbG9yOiM4MWQ0ZmE7Ij4wLjA8L3RkPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT0iZm9udC13ZWlnaHQ6Ym9sZDsgY29sb3I6I2U3NGMzYzsiPi04LjA8L3RkPgogICAgICAgICAgICAgICAgPHRkIHN0eWxlPSJwYWRkaW5nOjRweDsgdmVydGljYWwtYWxpZ246bWlkZGxlOyI+CiAgICAgICAgICAgICAgICAgICAgPGlucHV0IGNsYXNzPSJpbnB1dC1jb21tZW50IiBvbmNoYW5nZT0idXBkQ29tbWVudCgnRnJhbsOnYWlzJyx0aGlzLnZhbHVlKSIgc3R5bGU9IndpZHRoOjEwMCU7IGJveC1zaXppbmc6Ym9yZGVyLWJveDsgYm9yZGVyOjFweCBzb2xpZCAjNzg5MDljOyBwYWRkaW5nOjRweDsgY29sb3I6YmxhY2s7IiBwbGFjZWhvbGRlcj0iQXV0cmUgY29tbWVudGFpcmUuLi4iPgogICAgICAgICAgICAgICAgPC90ZD4KICAgICAgICAgICAgPC90cj48dHIgY2xhc3M9InJvdy1oZWFkZXIiIHN0eWxlPSIiPgogICAgICAgICAgICAgICAgPHRkIHN0eWxlPSJ0ZXh0LWFsaWduOmxlZnQ7IGZvbnQtd2VpZ2h0OmJvbGQ7OyBvdmVyZmxvdzpoaWRkZW47IHRleHQtb3ZlcmZsb3c6ZWxsaXBzaXM7IHdoaXRlLXNwYWNlOm5vd3JhcDsiPkhpc3QtR8OpbyA8L3RkPgogICAgICAgICAgICAgICAgPHRkIHN0eWxlPSJmb250LXdlaWdodDpib2xkOyBjb2xvcjojZjFjNDBmOyI+Ni4wPC90ZD4KICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT0iZm9udC13ZWlnaHQ6Ym9sZDsgY29sb3I6IzgxZDRmYTsiPjAuMDwvdGQ+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIHN0eWxlPSJmb250LXdlaWdodDpib2xkOyBjb2xvcjojZTc0YzNjOyI+LTYuMDwvdGQ+CiAgICAgICAgICAgICAgICA8dGQgc3R5bGU9InBhZGRpbmc6NHB4OyB2ZXJ0aWNhbC1hbGlnbjptaWRkbGU7Ij4KICAgICAgICAgICAgICAgICAgICA8aW5wdXQgY2xhc3M9ImlucHV0LWNvbW1lbnQiIG9uY2hhbmdlPSJ1cGRDb21tZW50KCdIaXN0LUfDqW8nLHRoaXMudmFsdWUpIiBzdHlsZT0id2lkdGg6MTAwJTsgYm94LXNpemluZzpib3JkZXItYm94OyBib3JkZXI6MXB4IHNvbGlkICM3ODkwOWM7IHBhZGRpbmc6NHB4OyBjb2xvcjpibGFjazsiIHBsYWNlaG9sZGVyPSJBdXRyZSBjb21tZW50YWlyZS4uLiI+CiAgICAgICAgICAgICAgICA8L3RkPgogICAgICAgICAgICA8L3RyPjx0ciBjbGFzcz0icm93LWhlYWRlciIgc3R5bGU9IiI+CiAgICAgICAgICAgICAgICA8dGQgc3R5bGU9InRleHQtYWxpZ246bGVmdDsgZm9udC13ZWlnaHQ6Ym9sZDs7IG92ZXJmbG93OmhpZGRlbjsgdGV4dC1vdmVyZmxvdzplbGxpcHNpczsgd2hpdGUtc3BhY2U6bm93cmFwOyI+TFZBIDwvdGQ+CiAgICAgICAgICAgICAgICA8dGQgc3R5bGU9ImZvbnQtd2VpZ2h0OmJvbGQ7IGNvbG9yOiNmMWM0MGY7Ij41LjU8L3RkPgogICAgICAgICAgICAgICAgPHRkIHN0eWxlPSJmb250LXdlaWdodDpib2xkOyBjb2xvcjojODFkNGZhOyI+MC4wPC90ZD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQgc3R5bGU9ImZvbnQtd2VpZ2h0OmJvbGQ7IGNvbG9yOiNlNzRjM2M7Ij4tNS41PC90ZD4KICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT0icGFkZGluZzo0cHg7IHZlcnRpY2FsLWFsaWduOm1pZGRsZTsiPgogICAgICAgICAgICAgICAgICAgIDxpbnB1dCBjbGFzcz0iaW5wdXQtY29tbWVudCIgb25jaGFuZ2U9InVwZENvbW1lbnQoJ0xWQScsdGhpcy52YWx1ZSkiIHN0eWxlPSJ3aWR0aDoxMDAlOyBib3gtc2l6aW5nOmJvcmRlci1ib3g7IGJvcmRlcjoxcHggc29saWQgIzc4OTA5YzsgcGFkZGluZzo0cHg7IGNvbG9yOmJsYWNrOyIgcGxhY2Vob2xkZXI9IkF1dHJlIGNvbW1lbnRhaXJlLi4uIj4KICAgICAgICAgICAgICAgIDwvdGQ+CiAgICAgICAgICAgIDwvdHI+PHRyIGNsYXNzPSJyb3ctaGVhZGVyIiBzdHlsZT0iIj4KICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT0idGV4dC1hbGlnbjpsZWZ0OyBmb250LXdlaWdodDpib2xkOzsgb3ZlcmZsb3c6aGlkZGVuOyB0ZXh0LW92ZXJmbG93OmVsbGlwc2lzOyB3aGl0ZS1zcGFjZTpub3dyYXA7Ij5MVkIgPC90ZD4KICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT0iZm9udC13ZWlnaHQ6Ym9sZDsgY29sb3I6I2YxYzQwZjsiPjQuNTwvdGQ+CiAgICAgICAgICAgICAgICA8dGQgc3R5bGU9ImZvbnQtd2VpZ2h0OmJvbGQ7IGNvbG9yOiM4MWQ0ZmE7Ij4wLjA8L3RkPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT0iZm9udC13ZWlnaHQ6Ym9sZDsgY29sb3I6I2U3NGMzYzsiPi00LjU8L3RkPgogICAgICAgICAgICAgICAgPHRkIHN0eWxlPSJwYWRkaW5nOjRweDsgdmVydGljYWwtYWxpZ246bWlkZGxlOyI+CiAgICAgICAgICAgICAgICAgICAgPGlucHV0IGNsYXNzPSJpbnB1dC1jb21tZW50IiBvbmNoYW5nZT0idXBkQ29tbWVudCgnTFZCJyx0aGlzLnZhbHVlKSIgc3R5bGU9IndpZHRoOjEwMCU7IGJveC1zaXppbmc6Ym9yZGVyLWJveDsgYm9yZGVyOjFweCBzb2xpZCAjNzg5MDljOyBwYWRkaW5nOjRweDsgY29sb3I6YmxhY2s7IiBwbGFjZWhvbGRlcj0iQXV0cmUgY29tbWVudGFpcmUuLi4iPgogICAgICAgICAgICAgICAgPC90ZD4KICAgICAgICAgICAgPC90cj48dHIgY2xhc3M9InJvdy1oZWFkZXIiIHN0eWxlPSIiPgogICAgICAgICAgICAgICAgPHRkIHN0eWxlPSJ0ZXh0LWFsaWduOmxlZnQ7IGZvbnQtd2VpZ2h0OmJvbGQ7OyBvdmVyZmxvdzpoaWRkZW47IHRleHQtb3ZlcmZsb3c6ZWxsaXBzaXM7IHdoaXRlLXNwYWNlOm5vd3JhcDsiPk1hdGhzIChUQykgPC90ZD4KICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT0iZm9udC13ZWlnaHQ6Ym9sZDsgY29sb3I6I2YxYzQwZjsiPjQuMDwvdGQ+CiAgICAgICAgICAgICAgICA8dGQgc3R5bGU9ImZvbnQtd2VpZ2h0OmJvbGQ7IGNvbG9yOiM4MWQ0ZmE7Ij41NC4wPC90ZD4KICAgICAgICAgICAgICAgIDx0ZD41NC4wPC90ZD4gCiAgICAgICAgICAgICAgICA8dGQ+MC4wPC90ZD4KICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT0iZm9udC13ZWlnaHQ6Ym9sZDsgY29sb3I6IzJlY2M3MTsiPjUwLjA8L3RkPgogICAgICAgICAgICAgICAgPHRkIHN0eWxlPSJwYWRkaW5nOjRweDsgdmVydGljYWwtYWxpZ246bWlkZGxlOyI+CiAgICAgICAgICAgICAgICAgICAgPGlucHV0IGNsYXNzPSJpbnB1dC1jb21tZW50IiBvbmNoYW5nZT0idXBkQ29tbWVudCgnTWF0aHMgKFRDKScsdGhpcy52YWx1ZSkiIHN0eWxlPSJ3aWR0aDoxMDAlOyBib3gtc2l6aW5nOmJvcmRlci1ib3g7IGJvcmRlcjoxcHggc29saWQgIzc4OTA5YzsgcGFkZGluZzo0cHg7IGNvbG9yOmJsYWNrOyIgcGxhY2Vob2xkZXI9IkF1dHJlIGNvbW1lbnRhaXJlLi4uIj4KICAgICAgICAgICAgICAgIDwvdGQ+CiAgICAgICAgICAgIDwvdHI+PHRyIGNsYXNzPSJyb3ctaGVhZGVyIiBzdHlsZT0iIj4KICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT0idGV4dC1hbGlnbjpsZWZ0OyBmb250LXdlaWdodDpib2xkOzsgb3ZlcmZsb3c6aGlkZGVuOyB0ZXh0LW92ZXJmbG93OmVsbGlwc2lzOyB3aGl0ZS1zcGFjZTpub3dyYXA7Ij5QaHlzLUNoaSAoVEMpIDwvdGQ+CiAgICAgICAgICAgICAgICA8dGQgc3R5bGU9ImZvbnQtd2VpZ2h0OmJvbGQ7IGNvbG9yOiNmMWM0MGY7Ij4zLjA8L3RkPgogICAgICAgICAgICAgICAgPHRkIHN0eWxlPSJmb250LXdlaWdodDpib2xkOyBjb2xvcjojODFkNGZhOyI+MC4wPC90ZD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQgc3R5bGU9ImZvbnQtd2VpZ2h0OmJvbGQ7IGNvbG9yOiNlNzRjM2M7Ij4tMy4wPC90ZD4KICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT0icGFkZGluZzo0cHg7IHZlcnRpY2FsLWFsaWduOm1pZGRsZTsiPgogICAgICAgICAgICAgICAgICAgIDxpbnB1dCBjbGFzcz0iaW5wdXQtY29tbWVudCIgb25jaGFuZ2U9InVwZENvbW1lbnQoJ1BoeXMtQ2hpIChUQyknLHRoaXMudmFsdWUpIiBzdHlsZT0id2lkdGg6MTAwJTsgYm94LXNpemluZzpib3JkZXItYm94OyBib3JkZXI6MXB4IHNvbGlkICM3ODkwOWM7IHBhZGRpbmc6NHB4OyBjb2xvcjpibGFjazsiIHBsYWNlaG9sZGVyPSJBdXRyZSBjb21tZW50YWlyZS4uLiI+CiAgICAgICAgICAgICAgICA8L3RkPgogICAgICAgICAgICA8L3RyPjx0ciBjbGFzcz0icm93LWhlYWRlciIgc3R5bGU9IiI+CiAgICAgICAgICAgICAgICA8dGQgc3R5bGU9InRleHQtYWxpZ246bGVmdDsgZm9udC13ZWlnaHQ6Ym9sZDs7IG92ZXJmbG93OmhpZGRlbjsgdGV4dC1vdmVyZmxvdzplbGxpcHNpczsgd2hpdGUtc3BhY2U6bm93cmFwOyI+U0VTIDwvdGQ+CiAgICAgICAgICAgICAgICA8dGQgc3R5bGU9ImZvbnQtd2VpZ2h0OmJvbGQ7IGNvbG9yOiNmMWM0MGY7Ij4xLjU8L3RkPgogICAgICAgICAgICAgICAgPHRkIHN0eWxlPSJmb250LXdlaWdodDpib2xkOyBjb2xvcjojODFkNGZhOyI+MC4wPC90ZD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQgc3R5bGU9ImZvbnQtd2VpZ2h0OmJvbGQ7IGNvbG9yOiNlNzRjM2M7Ij4tMS41PC90ZD4KICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT0icGFkZGluZzo0cHg7IHZlcnRpY2FsLWFsaWduOm1pZGRsZTsiPgogICAgICAgICAgICAgICAgICAgIDxpbnB1dCBjbGFzcz0iaW5wdXQtY29tbWVudCIgb25jaGFuZ2U9InVwZENvbW1lbnQoJ1NFUycsdGhpcy52YWx1ZSkiIHN0eWxlPSJ3aWR0aDoxMDAlOyBib3gtc2l6aW5nOmJvcmRlci1ib3g7IGJvcmRlcjoxcHggc29saWQgIzc4OTA5YzsgcGFkZGluZzo0cHg7IGNvbG9yOmJsYWNrOyIgcGxhY2Vob2xkZXI9IkF1dHJlIGNvbW1lbnRhaXJlLi4uIj4KICAgICAgICAgICAgICAgIDwvdGQ+CiAgICAgICAgICAgIDwvdHI+PHRyIGNsYXNzPSJyb3ctaGVhZGVyIiBzdHlsZT0iIj4KICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT0idGV4dC1hbGlnbjpsZWZ0OyBmb250LXdlaWdodDpib2xkOzsgb3ZlcmZsb3c6aGlkZGVuOyB0ZXh0LW92ZXJmbG93OmVsbGlwc2lzOyB3aGl0ZS1zcGFjZTpub3dyYXA7Ij5TVlQgKFRDKSA8L3RkPgogICAgICAgICAgICAgICAgPHRkIHN0eWxlPSJmb250LXdlaWdodDpib2xkOyBjb2xvcjojZjFjNDBmOyI+MS41PC90ZD4KICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT0iZm9udC13ZWlnaHQ6Ym9sZDsgY29sb3I6IzgxZDRmYTsiPjAuMDwvdGQ+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIHN0eWxlPSJmb250LXdlaWdodDpib2xkOyBjb2xvcjojZTc0YzNjOyI+LTEuNTwvdGQ+CiAgICAgICAgICAgICAgICA8dGQgc3R5bGU9InBhZGRpbmc6NHB4OyB2ZXJ0aWNhbC1hbGlnbjptaWRkbGU7Ij4KICAgICAgICAgICAgICAgICAgICA8aW5wdXQgY2xhc3M9ImlucHV0LWNvbW1lbnQiIG9uY2hhbmdlPSJ1cGRDb21tZW50KCdTVlQgKFRDKScsdGhpcy52YWx1ZSkiIHN0eWxlPSJ3aWR0aDoxMDAlOyBib3gtc2l6aW5nOmJvcmRlci1ib3g7IGJvcmRlcjoxcHggc29saWQgIzc4OTA5YzsgcGFkZGluZzo0cHg7IGNvbG9yOmJsYWNrOyIgcGxhY2Vob2xkZXI9IkF1dHJlIGNvbW1lbnRhaXJlLi4uIj4KICAgICAgICAgICAgICAgIDwvdGQ+CiAgICAgICAgICAgIDwvdHI+PC90Ym9keT4KICAgIDx0Zm9vdCBpZD0icmVjYXAtdG90YWwiIHN0eWxlPSJiYWNrZ3JvdW5kOiNlY2YwZjE7IGZvbnQtd2VpZ2h0OmJvbGQ7Ij4KICAgICAgICAgICAgPHRyPjx0ZCBzdHlsZT0idGV4dC1hbGlnbjpyaWdodDsiPlRPVEFMIEfDiU7DiVJBTDwvdGQ+CiAgICAgICAgICAgIDx0ZCBzdHlsZT0iY29sb3I6I2MwMzkyYjsgZm9udC1zaXplOjEuMXJlbTsiPjQ0LjA8L3RkPgogICAgICAgICAgICA8dGQgc3R5bGU9ImNvbG9yOiMxNmEwODU7IGZvbnQtc2l6ZToxLjFyZW07Ij41NC4wPC90ZD4KICAgICAgICAgICAgPHRkPjU0LjA8L3RkPgogICAgICAgICAgICA8dGQ+MC4wPC90ZD4KICAgICAgICAgICAgPHRkIHN0eWxlPSJjb2xvcjpncmVlbjsgZm9udC1zaXplOjEuMXJlbTsiPjEwLjA8L3RkPgogICAgICAgICAgICA8dGQ+PC90ZD48L3RyPjwvdGZvb3Q+CjwvdGFibGU+CiAgICAgICAgPC9kaXY+CiAgICA8L2Rpdj4KCjwvZGl2Pgo8IS0tID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAtLT4KPCEtLSBTRUNUSU9OIEJJTEFOIENPTlNPTElEw4kgKE1VTFRJLUVOVElUw4lTKSAgICAgICAgICAgICAgIC0tPgo8IS0tID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAtLT4KPGRpdiBpZD0iYmlsYW4tZ2xvYmFsIiBjbGFzcz0ic2VjdGlvbiIgc3R5bGU9Im92ZXJmbG93LXk6YXV0bzsgbWF4LWhlaWdodDpjYWxjKDEwMHZoIC0gNjBweCk7IHBhZGRpbmctcmlnaHQ6NHB4OyI+CiAgICA8ZGl2IGNsYXNzPSJjYXJkIj4KICAgICAgICA8ZGl2IGNsYXNzPSJjYXJkLWhlYWRlciI+CiAgICAgICAgICAgIDxoMz7wn4yQIEJpbGFuIENvbnNvbGlkw6k8L2gzPgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJleHBvcnQtZ3JvdXAiPgogICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYnRuLWV4cCIgb25jbGljaz0iZXhwb3J0QmlsYW5HbG9iYWwoJ2V4Y2VsJykiPvCfk4ogRXhjZWw8L2J1dHRvbj4KICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImJ0bi1leHAiIG9uY2xpY2s9ImV4cG9ydEJpbGFuR2xvYmFsKCdwZGYnKSI+8J+ThCBQREY8L2J1dHRvbj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgPC9kaXY+CgogICAgICAgIDwhLS0gS1BJIEdMT0JBVVggLS0+CiAgICAgICAgPGRpdiBpZD0iYmlsYW4ta3BpIiBzdHlsZT0iZGlzcGxheTpncmlkOyBncmlkLXRlbXBsYXRlLWNvbHVtbnM6cmVwZWF0KDQsMWZyKTsgZ2FwOjEycHg7IG1hcmdpbi1ib3R0b206MjBweDsiPjwvZGl2PgoKICAgICAgICA8IS0tIFRBQkxFQVUgUEFSIEVOVElUw4kgLS0+CiAgICAgICAgPGRpdiBzdHlsZT0iZGlzcGxheTpncmlkOyBncmlkLXRlbXBsYXRlLWNvbHVtbnM6cmVwZWF0KDQsMWZyKTsgZ2FwOjEycHg7IG1hcmdpbi1ib3R0b206MjVweDsiIGlkPSJiaWxhbi1jYXJkcyI+PC9kaXY+CgogICAgICAgIDwhLS0gVEFCTEVBVSBDT05TT0xJRMOJIFBBUiBCVVJFQVUgUE5FIC0tPgogICAgICAgIDxkaXYgY2xhc3M9ImNhcmQiIHN0eWxlPSJtYXJnaW4tYm90dG9tOjA7IGJvcmRlcjoxcHggc29saWQgI2UwZTBlMDsiPgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJjYXJkLWhlYWRlciI+PGgzPvCfk4sgQ29uc29saWTDqSBwYXIgQnVyZWF1IGRlIERpc2NpcGxpbmUgKFBORSk8L2gzPjwvZGl2PgogICAgICAgICAgICA8ZGl2IHN0eWxlPSJvdmVyZmxvdy14OmF1dG87IG1heC1oZWlnaHQ6NDAwcHg7IG92ZXJmbG93LXk6YXV0bzsiPgogICAgICAgICAgICAgICAgPHRhYmxlIGlkPSJiaWxhbi1idXJlYXUtdGFibGUiIHN0eWxlPSJ3aWR0aDoxMDAlOyBib3JkZXItY29sbGFwc2U6Y29sbGFwc2U7IGZvbnQtc2l6ZTowLjg4cmVtOyI+CiAgICAgICAgICAgICAgICAgICAgPHRoZWFkPgogICAgICAgICAgICAgICAgICAgICAgICA8dHIgc3R5bGU9ImJhY2tncm91bmQ6IzJjM2U1MDsgY29sb3I6d2hpdGU7Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aCBzdHlsZT0icGFkZGluZzoxMHB4OyB0ZXh0LWFsaWduOmxlZnQ7IHdpZHRoOjI2MHB4OyBwb3NpdGlvbjpzdGlja3k7IHRvcDowOyB6LWluZGV4OjI7IGJhY2tncm91bmQ6IzJjM2U1MDsiPkJ1cmVhdSAvIERpc2NpcGxpbmU8L3RoPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRoIHN0eWxlPSJwYWRkaW5nOjEwcHg7IGJhY2tncm91bmQ6IzFhMjUyZjsgd2lkdGg6MTEwcHg7Ij7wn4+rIENvbGzDqGdlPC90aD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aCBzdHlsZT0icGFkZGluZzoxMHB4OyBiYWNrZ3JvdW5kOiMxYTI1MmY7IHdpZHRoOjExMHB4OyI+8J+Pm++4jyBMeWPDqWU8L3RoPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRoIHN0eWxlPSJwYWRkaW5nOjEwcHg7IGJhY2tncm91bmQ6IzFhMjUyZjsgd2lkdGg6MTEwcHg7Ij7wn4+tIEx5Y8OpZSBQcm88L3RoPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRoIHN0eWxlPSJwYWRkaW5nOjEwcHg7IGJhY2tncm91bmQ6IzFhMjUyZjsgd2lkdGg6MTEwcHg7Ij7wn46TIFDDtGxlIFN1cC48L3RoPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRoIHN0eWxlPSJwYWRkaW5nOjEwcHg7IGJhY2tncm91bmQ6I2MwMzkyYjsgd2lkdGg6OTBweDsiPlRvdGFsIEJlc29pbjwvdGg+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGggc3R5bGU9InBhZGRpbmc6MTBweDsgYmFja2dyb3VuZDojMTZhMDg1OyB3aWR0aDo5MHB4OyI+VG90YWwgQXBwb3J0PC90aD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aCBzdHlsZT0icGFkZGluZzoxMHB4OyBiYWNrZ3JvdW5kOiM3ZjhjOGQ7IHdpZHRoOjgwcHg7Ij7DiWNhcnQ8L3RoPgogICAgICAgICAgICAgICAgICAgICAgICA8L3RyPgogICAgICAgICAgICAgICAgICAgIDwvdGhlYWQ+CiAgICAgICAgICAgICAgICAgICAgPHRib2R5IGlkPSJiaWxhbi1idXJlYXUtYm9keSI+PC90Ym9keT4KICAgICAgICAgICAgICAgIDwvdGFibGU+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgIDwvZGl2PgoKICAgICAgICA8IS0tIFRBQkxFQVUgRU5TRUlHTkFOVFMgw5cgRU5USVTDiVMgLS0+CiAgICAgICAgPGRpdiBjbGFzcz0iY2FyZCIgc3R5bGU9Im1hcmdpbi10b3A6MjBweDsgYm9yZGVyOjFweCBzb2xpZCAjZTBlMGUwOyI+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImNhcmQtaGVhZGVyIj4KICAgICAgICAgICAgICAgIDxoMz7wn5GlIFRhYmxlYXUgZGUgU2VydmljZSDigJMgRW5zZWlnbmFudHMgw5cgRW50aXTDqXM8L2gzPgogICAgICAgICAgICAgICAgPHNtYWxsIHN0eWxlPSJjb2xvcjojN2Y4YzhkOyI+VG91cyBsZXMgZW5zZWlnbmFudHMgZGVzIDMgZW50aXTDqXM8L3NtYWxsPgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPGRpdiBzdHlsZT0iZGlzcGxheTpmbGV4OyBnYXA6MTBweDsgYWxpZ24taXRlbXM6Y2VudGVyOyBtYXJnaW4tYm90dG9tOjEycHg7IGZsZXgtd3JhcDp3cmFwOyI+CiAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0idGV4dCIgaWQ9ImJpbGFuLXRlYWNoZXItZmlsdGVyIiBwbGFjZWhvbGRlcj0i8J+UjSBGaWx0cmVyIHBhciBub20uLi4iIG9uaW5wdXQ9InJlbmRlckJpbGFuVGVhY2hlcnMoKSIgc3R5bGU9IndpZHRoOjIyMHB4OyI+CiAgICAgICAgICAgICAgICA8c2VsZWN0IGlkPSJiaWxhbi10ZWFjaGVyLWVudGl0eS1maWx0ZXIiIG9uY2hhbmdlPSJyZW5kZXJCaWxhblRlYWNoZXJzKCkiIHN0eWxlPSJ3aWR0aDoxODBweDsiPgogICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IiI+VG91dGVzIGxlcyBlbnRpdMOpczwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9ImNvbGxlZ2UiPvCfj6sgQ29sbMOoZ2U8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJseWNlZSI+8J+Pm++4jyBMeWPDqWU8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJseWNlZV9wcm8iPvCfj60gTHljw6llIFBybzwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9InBvbGUiPvCfjpMgUMO0bGU8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJzaGFyZWQiPvCflIAgTXVsdGktZW50aXTDqXM8L29wdGlvbj4KICAgICAgICAgICAgICAgIDwvc2VsZWN0PgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPGRpdiBzdHlsZT0ib3ZlcmZsb3cteDphdXRvOyBtYXgtaGVpZ2h0OjQwMHB4OyBvdmVyZmxvdy15OmF1dG87Ij4KICAgICAgICAgICAgICAgIDx0YWJsZSBzdHlsZT0id2lkdGg6MTAwJTsgYm9yZGVyLWNvbGxhcHNlOmNvbGxhcHNlOyBmb250LXNpemU6MC44NXJlbTsiPgogICAgICAgICAgICAgICAgICAgIDx0aGVhZD4KICAgICAgICAgICAgICAgICAgICAgICAgPHRyIHN0eWxlPSJiYWNrZ3JvdW5kOiMyYzNlNTA7IGNvbG9yOndoaXRlOyBwb3NpdGlvbjpzdGlja3k7IHRvcDowOyB6LWluZGV4OjI7Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aCBzdHlsZT0icGFkZGluZzo4cHggMTBweDsgdGV4dC1hbGlnbjpsZWZ0OyBtaW4td2lkdGg6MTYwcHg7IGJhY2tncm91bmQ6IzJjM2U1MDsiPkVuc2VpZ25hbnQ8L3RoPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRoIHN0eWxlPSJwYWRkaW5nOjhweDsgbWluLXdpZHRoOjE0MHB4OyI+RGlzY2lwbGluZTwvdGg+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGggc3R5bGU9InBhZGRpbmc6OHB4OyB3aWR0aDo3MHB4OyI+T1JTPC90aD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aCBzdHlsZT0icGFkZGluZzo4cHg7IHdpZHRoOjEwMHB4OyBiYWNrZ3JvdW5kOiMyOTgwYjk7Ij7wn4+rIENvbGzDqGdlPC90aD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aCBzdHlsZT0icGFkZGluZzo4cHg7IHdpZHRoOjEwMHB4OyBiYWNrZ3JvdW5kOiMxZTg0NDk7Ij7wn4+b77iPIEx5Y8OpZTwvdGg+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGggc3R5bGU9InBhZGRpbmc6OHB4OyB3aWR0aDoxMDBweDsgYmFja2dyb3VuZDojZDM1NDAwOyI+8J+PrSBMeWPDqWUgUHJvPC90aD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aCBzdHlsZT0icGFkZGluZzo4cHg7IHdpZHRoOjEwMHB4OyBiYWNrZ3JvdW5kOiM2YzM0ODM7Ij7wn46TIFDDtGxlPC90aD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aCBzdHlsZT0icGFkZGluZzo4cHg7IHdpZHRoOjkwcHg7IGJhY2tncm91bmQ6I2MwMzkyYjsiPlRvdGFsIGg8L3RoPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRoIHN0eWxlPSJwYWRkaW5nOjhweDsgd2lkdGg6OTBweDsgYmFja2dyb3VuZDojN2Y4YzhkOyI+U29sZGUgT1JTPC90aD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aCBzdHlsZT0icGFkZGluZzo4cHg7IHdpZHRoOjcwcHg7Ij5UeXBlPC90aD4KICAgICAgICAgICAgICAgICAgICAgICAgPC90cj4KICAgICAgICAgICAgICAgICAgICA8L3RoZWFkPgogICAgICAgICAgICAgICAgICAgIDx0Ym9keSBpZD0iYmlsYW4tdGVhY2hlcnMtYm9keSI+PC90Ym9keT4KICAgICAgICAgICAgICAgIDwvdGFibGU+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgIDwvZGl2PgoKICAgICAgICA8IS0tIFLDiUNBUCBNQVRJw4hSRVMgQ1JPU1MtRU5USVTDiVMgLS0+CiAgICAgICAgPGRpdiBjbGFzcz0iY2FyZCIgc3R5bGU9Im1hcmdpbi10b3A6MjBweDsgYm9yZGVyOjFweCBzb2xpZCAjZTBlMGUwOyI+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImNhcmQtaGVhZGVyIj4KICAgICAgICAgICAgICAgIDxoMz7wn5OaIFLDqWNhcGl0dWxhdGlmIE1hdGnDqHJlcyDigJMgMyBFbnRpdMOpczwvaDM+CiAgICAgICAgICAgICAgICA8c21hbGwgc3R5bGU9ImNvbG9yOiM3ZjhjOGQ7Ij5CZXNvaW4gZW4gaGV1cmVzIHBhciBtYXRpw6hyZSBldCBwYXIgZW50aXTDqTwvc21hbGw+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8ZGl2IHN0eWxlPSJvdmVyZmxvdy14OmF1dG87Ij4KICAgICAgICAgICAgICAgIDx0YWJsZSBzdHlsZT0id2lkdGg6MTAwJTsgYm9yZGVyLWNvbGxhcHNlOmNvbGxhcHNlOyBmb250LXNpemU6MC44NXJlbTsiPgogICAgICAgICAgICAgICAgICAgIDx0aGVhZD4KICAgICAgICAgICAgICAgICAgICAgICAgPHRyIHN0eWxlPSJiYWNrZ3JvdW5kOiMyYzNlNTA7IGNvbG9yOndoaXRlOyI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGggc3R5bGU9InBhZGRpbmc6OHB4IDEwcHg7IHRleHQtYWxpZ246bGVmdDsgbWluLXdpZHRoOjIwMHB4OyI+TWF0acOocmU8L3RoPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRoIHN0eWxlPSJwYWRkaW5nOjhweDsgd2lkdGg6MTAwcHg7IGJhY2tncm91bmQ6IzI5ODBiOTsiPvCfj6sgQmVzb2luIENvbC48L3RoPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRoIHN0eWxlPSJwYWRkaW5nOjhweDsgd2lkdGg6MTAwcHg7IGJhY2tncm91bmQ6IzI5ODBiOTsiPvCfj6sgQXBwb3J0IENvbC48L3RoPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRoIHN0eWxlPSJwYWRkaW5nOjhweDsgd2lkdGg6MTAwcHg7IGJhY2tncm91bmQ6IzFlODQ0OTsiPvCfj5vvuI8gQmVzb2luIEx5Yy48L3RoPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRoIHN0eWxlPSJwYWRkaW5nOjhweDsgd2lkdGg6MTAwcHg7IGJhY2tncm91bmQ6IzFlODQ0OTsiPvCfj5vvuI8gQXBwb3J0IEx5Yy48L3RoPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRoIHN0eWxlPSJwYWRkaW5nOjhweDsgd2lkdGg6MTAwcHg7IGJhY2tncm91bmQ6I2QzNTQwMDsiPvCfj60gQmVzb2luIExQPC90aD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aCBzdHlsZT0icGFkZGluZzo4cHg7IHdpZHRoOjEwMHB4OyBiYWNrZ3JvdW5kOiNkMzU0MDA7Ij7wn4+tIEFwcG9ydCBMUDwvdGg+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGggc3R5bGU9InBhZGRpbmc6OHB4OyB3aWR0aDoxMDBweDsgYmFja2dyb3VuZDojNmMzNDgzOyI+8J+OkyBCZXNvaW4gUMO0bGU8L3RoPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRoIHN0eWxlPSJwYWRkaW5nOjhweDsgd2lkdGg6MTAwcHg7IGJhY2tncm91bmQ6IzZjMzQ4MzsiPvCfjpMgQXBwb3J0IFDDtGxlPC90aD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aCBzdHlsZT0icGFkZGluZzo4cHg7IHdpZHRoOjkwcHg7IGJhY2tncm91bmQ6I2MwMzkyYjsiPlRvdGFsIEJlc29pbjwvdGg+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGggc3R5bGU9InBhZGRpbmc6OHB4OyB3aWR0aDo5MHB4OyBiYWNrZ3JvdW5kOiMxNmEwODU7Ij5Ub3RhbCBBcHBvcnQ8L3RoPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRoIHN0eWxlPSJwYWRkaW5nOjhweDsgd2lkdGg6ODBweDsgYmFja2dyb3VuZDojN2Y4YzhkOyI+w4ljYXJ0PC90aD4KICAgICAgICAgICAgICAgICAgICAgICAgPC90cj4KICAgICAgICAgICAgICAgICAgICA8L3RoZWFkPgogICAgICAgICAgICAgICAgICAgIDx0Ym9keSBpZD0iYmlsYW4tc3ViamVjdHMtYm9keSI+PC90Ym9keT4KICAgICAgICAgICAgICAgIDwvdGFibGU+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgIDwvZGl2PgogICAgPC9kaXY+CjwvZGl2PgoKPCEtLSA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gLS0+CjwhLS0gU0VDVElPTiBFTlNFSUdOQU5UUyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC0tPgo8IS0tID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAtLT4KPGRpdiBpZD0iZW5zZWlnbmFudHMtbXV0dWFsaXNlcyIgY2xhc3M9InNlY3Rpb24iPgogICAgPGRpdiBjbGFzcz0iY2FyZCI+CiAgICAgICAgPGRpdiBjbGFzcz0iY2FyZC1oZWFkZXIiPgogICAgICAgICAgICA8aDM+8J+RpSBFbnNlaWduYW50czwvaDM+CiAgICAgICAgICAgIDxkaXYgc3R5bGU9ImZvbnQtc2l6ZTowLjg1cmVtOyBjb2xvcjojN2Y4YzhkOyI+RW5zZWlnbmFudHMgaW50ZXJ2ZW5hbnQgc3VyIHBsdXNpZXVycyBlbnRpdMOpczwvZGl2PgogICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJidG4gYnRuLXN1Y2Nlc3MgYnRuLXNtIiBvbmNsaWNrPSJvcGVuQWRkU2hhcmVkVGVhY2hlcigpIj7inpUgQWpvdXRlciB1biBlbnNlaWduYW50PC9idXR0b24+CiAgICAgICAgPC9kaXY+CgogICAgICAgIDwhLS0gRklMVFJFUyAtLT4KICAgICAgICA8ZGl2IHN0eWxlPSJkaXNwbGF5OmZsZXg7IGdhcDoxMHB4OyBhbGlnbi1pdGVtczpjZW50ZXI7IG1hcmdpbi1ib3R0b206MTVweDsgZmxleC13cmFwOndyYXA7Ij4KICAgICAgICAgICAgPGxhYmVsIHN0eWxlPSJmb250LXdlaWdodDo2MDA7IGNvbG9yOiM1NTU7Ij5GaWx0cmVyIDo8L2xhYmVsPgogICAgICAgICAgICA8c2VsZWN0IGlkPSJmaWx0ZXItZ3JhZGUiIG9uY2hhbmdlPSJyZW5kZXJTaGFyZWRUZWFjaGVycygpIiBzdHlsZT0id2lkdGg6MjIwcHg7Ij4KICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IiI+VG91cyBsZXMgZ3JhZGVzPC9vcHRpb24+CiAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJBZ3LDqWfDqSI+QWdyw6lnw6k8L29wdGlvbj4KICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IkNlcnRpZmnDqSI+Q2VydGlmacOpPC9vcHRpb24+CiAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJQTFAiPlBMUDwvb3B0aW9uPgogICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iQ0FQRVBTIj5DQVBFUFM8L29wdGlvbj4KICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IkFncsOpZ8OpIEVQUyI+QWdyw6lnw6kgRVBTPC9vcHRpb24+CiAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJQRUdDIj5QRUdDPC9vcHRpb24+CiAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJQQ1MiPlBDUzwvb3B0aW9uPgogICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iQ1BFIj5DUEU8L29wdGlvbj4KICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IkNvbnRyYWN0dWVsIj5Db250cmFjdHVlbDwvb3B0aW9uPgogICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iVmFjYXRhaXJlIj5WYWNhdGFpcmU8L29wdGlvbj4KICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IlBSQUciPlBSQUc8L29wdGlvbj4KICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9Ik1hw650cmUgZGUgY29uZsOpcmVuY2VzIj5NQ0Y8L29wdGlvbj4KICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IkJNUC9DU1IiPkJNUC9DU1I8L29wdGlvbj4KICAgICAgICAgICAgPC9zZWxlY3Q+CiAgICAgICAgICAgIDxzZWxlY3QgaWQ9ImZpbHRlci1lbnRpdHkiIG9uY2hhbmdlPSJyZW5kZXJTaGFyZWRUZWFjaGVycygpIiBzdHlsZT0id2lkdGg6MTgwcHg7Ij4KICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IiI+VG91dGVzIGxlcyBlbnRpdMOpczwvb3B0aW9uPgogICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iY29sbGVnZSI+8J+PqyBDb2xsw6hnZTwvb3B0aW9uPgogICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0ibHljZWUiPvCfj5vvuI8gTHljw6llPC9vcHRpb24+CiAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJseWNlZV9wcm8iPvCfj60gTHljw6llIFBybzwvb3B0aW9uPgogICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0icG9sZSI+8J+OkyBQw7RsZSBTdXDDqXJpZXVyPC9vcHRpb24+CiAgICAgICAgICAgIDwvc2VsZWN0PgogICAgICAgICAgICA8aW5wdXQgdHlwZT0idGV4dCIgaWQ9ImZpbHRlci10ZWFjaGVyLW5hbWUiIHBsYWNlaG9sZGVyPSLwn5SNIFJlY2hlcmNoZSBub20uLi4iIG9uaW5wdXQ9InJlbmRlclNoYXJlZFRlYWNoZXJzKCkiIHN0eWxlPSJ3aWR0aDoyMDBweDsiPgogICAgICAgIDwvZGl2PgoKICAgICAgICA8ZGl2IHN0eWxlPSJvdmVyZmxvdy14OmF1dG87Ij4KICAgICAgICAgICAgPHRhYmxlIHN0eWxlPSJ3aWR0aDoxMDAlOyBib3JkZXItY29sbGFwc2U6Y29sbGFwc2U7IGZvbnQtc2l6ZTowLjg4cmVtOyI+CiAgICAgICAgICAgICAgICA8dGhlYWQ+CiAgICAgICAgICAgICAgICAgICAgPHRyIHN0eWxlPSJiYWNrZ3JvdW5kOiMyYzNlNTA7IGNvbG9yOndoaXRlOyI+CiAgICAgICAgICAgICAgICAgICAgICAgIDx0aCBzdHlsZT0icGFkZGluZzo5cHggOHB4OyB0ZXh0LWFsaWduOmxlZnQ7Ij5FbnNlaWduYW50PC90aD4KICAgICAgICAgICAgICAgICAgICAgICAgPHRoIHN0eWxlPSJwYWRkaW5nOjlweCA4cHg7IHRleHQtYWxpZ246bGVmdDsgd2lkdGg6MTMwcHg7Ij5HcmFkZTwvdGg+CiAgICAgICAgICAgICAgICAgICAgICAgIDx0aCBzdHlsZT0icGFkZGluZzo5cHggOHB4OyB0ZXh0LWFsaWduOmxlZnQ7IHdpZHRoOjE4MHB4OyI+RGlzY2lwbGluZTwvdGg+CiAgICAgICAgICAgICAgICAgICAgICAgIDx0aCBzdHlsZT0icGFkZGluZzo5cHggOHB4OyB3aWR0aDoxMTBweDsiPkNvZGUgUE5FPC90aD4KICAgICAgICAgICAgICAgICAgICAgICAgPHRoIHN0eWxlPSJwYWRkaW5nOjlweCA4cHg7IHdpZHRoOjgwcHg7IGJhY2tncm91bmQ6IzI5ODBiOTsiPk9SUzwvdGg+CiAgICAgICAgICAgICAgICAgICAgICAgIDx0aCBzdHlsZT0icGFkZGluZzo5cHggOHB4OyB3aWR0aDo5MHB4OyBiYWNrZ3JvdW5kOiMxYTY5ODU7Ij7wn4+rIENvbGzDqGdlPC90aD4KICAgICAgICAgICAgICAgICAgICAgICAgPHRoIHN0eWxlPSJwYWRkaW5nOjlweCA4cHg7IHdpZHRoOjkwcHg7IGJhY2tncm91bmQ6IzFhNjk4NTsiPvCfj5vvuI8gTHljw6llPC90aD4KICAgICAgICAgICAgICAgICAgICAgICAgPHRoIHN0eWxlPSJwYWRkaW5nOjlweCA4cHg7IHdpZHRoOjkwcHg7IGJhY2tncm91bmQ6I2MyNWEwMDsiPvCfj60gTHljw6llIFBybzwvdGg+CiAgICAgICAgICAgICAgICAgICAgICAgIDx0aCBzdHlsZT0icGFkZGluZzo5cHggOHB4OyB3aWR0aDo5MHB4OyBiYWNrZ3JvdW5kOiMxYTY5ODU7Ij7wn46TIFDDtGxlPC90aD4KICAgICAgICAgICAgICAgICAgICAgICAgPHRoIHN0eWxlPSJwYWRkaW5nOjlweCA4cHg7IHdpZHRoOjgwcHg7IGJhY2tncm91bmQ6I2MwMzkyYjsiPlRvdGFsIGg8L3RoPgogICAgICAgICAgICAgICAgICAgICAgICA8dGggc3R5bGU9InBhZGRpbmc6OXB4IDhweDsgd2lkdGg6ODBweDsgYmFja2dyb3VuZDojN2Y4YzhkOyI+UmVzdGU8L3RoPgogICAgICAgICAgICAgICAgICAgICAgICA8dGggc3R5bGU9InBhZGRpbmc6OXB4IDhweDsgd2lkdGg6NzBweDsiPkFjdGlvbnM8L3RoPgogICAgICAgICAgICAgICAgICAgIDwvdHI+CiAgICAgICAgICAgICAgICA8L3RoZWFkPgogICAgICAgICAgICAgICAgPHRib2R5IGlkPSJzaGFyZWQtdGVhY2hlcnMtYm9keSI+PC90Ym9keT4KICAgICAgICAgICAgPC90YWJsZT4KICAgICAgICA8L2Rpdj4KICAgICAgICA8ZGl2IGlkPSJzaGFyZWQtdGVhY2hlcnMtZW1wdHkiIHN0eWxlPSJkaXNwbGF5Om5vbmU7IHRleHQtYWxpZ246Y2VudGVyOyBjb2xvcjojYWFhOyBwYWRkaW5nOjMwcHg7IGZvbnQtc3R5bGU6aXRhbGljOyI+CiAgICAgICAgICAgIEF1Y3VuIGVuc2VpZ25hbnQgcG91ciBsJ2luc3RhbnQuIENsaXF1ZXogc3VyICJBam91dGVyIiBwb3VyIGVuIGNyw6llciB1bi4KICAgICAgICA8L2Rpdj4KICAgIDwvZGl2Pgo8L2Rpdj4KCjwhLS0gTU9EQUwgQ0FUQUxPR1VFIE1BVEnDiFJFUyBQTkUgLS0+CjxkaXYgaWQ9InN1YmplY3QtY2F0YWxvZy1vdmVybGF5IiBzdHlsZT0iZGlzcGxheTpub25lOyBwb3NpdGlvbjpmaXhlZDsgdG9wOjA7IGxlZnQ6MDsgd2lkdGg6MTAwJTsgaGVpZ2h0OjEwMCU7IGJhY2tncm91bmQ6cmdiYSgwLDAsMCwwLjYpOyB6LWluZGV4OjIwMDAwOyBqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyOyBhbGlnbi1pdGVtczpjZW50ZXI7Ij4KICAgIDxkaXYgc3R5bGU9ImJhY2tncm91bmQ6d2hpdGU7IHBhZGRpbmc6MjRweDsgYm9yZGVyLXJhZGl1czoxMHB4OyB3aWR0aDo3MDBweDsgbWF4LXdpZHRoOjk2JTsgbWF4LWhlaWdodDo4OHZoOyBkaXNwbGF5OmZsZXg7IGZsZXgtZGlyZWN0aW9uOmNvbHVtbjsgYm94LXNoYWRvdzowIDEwcHggMzBweCByZ2JhKDAsMCwwLDAuMyk7Ij4KICAgICAgICA8ZGl2IHN0eWxlPSJkaXNwbGF5OmZsZXg7IGp1c3RpZnktY29udGVudDpzcGFjZS1iZXR3ZWVuOyBhbGlnbi1pdGVtczpjZW50ZXI7IG1hcmdpbi1ib3R0b206MTVweDsgYm9yZGVyLWJvdHRvbToycHggc29saWQgI2VlZTsgcGFkZGluZy1ib3R0b206MTJweDsiPgogICAgICAgICAgICA8aDMgc3R5bGU9Im1hcmdpbjowOyBjb2xvcjojOGU0NGFkOyI+8J+TmiBDYXRhbG9ndWUgZGVzIERpc2NpcGxpbmVzIFBORTwvaDM+CiAgICAgICAgICAgIDxidXR0b24gb25jbGljaz0iZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N1YmplY3QtY2F0YWxvZy1vdmVybGF5Jykuc3R5bGUuZGlzcGxheT0nbm9uZSciIHN0eWxlPSJiYWNrZ3JvdW5kOm5vbmU7Ym9yZGVyOm5vbmU7Zm9udC1zaXplOjEuNHJlbTtjdXJzb3I6cG9pbnRlcjtjb2xvcjojOTk5OyI+w5c8L2J1dHRvbj4KICAgICAgICA8L2Rpdj4KICAgICAgICA8ZGl2IHN0eWxlPSJtYXJnaW4tYm90dG9tOjEycHg7IGRpc3BsYXk6ZmxleDsgZ2FwOjEwcHg7IGFsaWduLWl0ZW1zOmNlbnRlcjsiPgogICAgICAgICAgICA8aW5wdXQgdHlwZT0idGV4dCIgaWQ9ImNhdGFsb2ctc2VhcmNoIiBwbGFjZWhvbGRlcj0i8J+UjSBSZWNoZXJjaGVyIHVuZSBkaXNjaXBsaW5lLi4uIiBvbmlucHV0PSJmaWx0ZXJDYXRhbG9nKCkiIHN0eWxlPSJmbGV4OjE7Ij4KICAgICAgICAgICAgPHNlbGVjdCBpZD0iY2F0YWxvZy1idXJlYXUtZmlsdGVyIiBvbmNoYW5nZT0iZmlsdGVyQ2F0YWxvZygpIiBzdHlsZT0id2lkdGg6MjAwcHg7IGZvbnQtc2l6ZTowLjg1cmVtOyI+CiAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSIiPlRvdXMgbGVzIGJ1cmVhdXg8L29wdGlvbj4KICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IjAxM0RJUEUxIj5CdXJlYXUgMSDigJMgTGl0dMOpcmFpcmVzPC9vcHRpb24+CiAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSIwMTNESVBFMiI+QnVyZWF1IDIg4oCTIFNjaWVudGlmaXF1ZXM8L29wdGlvbj4KICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IjAxM0RJUEUzIj5CdXJlYXUgMyDigJMgTGFuZ3Vlcy9BcnRzPC9vcHRpb24+CiAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSIwMTNESVBFNCI+QnVyZWF1IDQg4oCTIFRlY2huaXF1ZXMvTFA8L29wdGlvbj4KICAgICAgICAgICAgPC9zZWxlY3Q+CiAgICAgICAgPC9kaXY+CiAgICAgICAgPGRpdiBpZD0iY2F0YWxvZy1saXN0IiBzdHlsZT0ib3ZlcmZsb3cteTphdXRvOyBmbGV4LWdyb3c6MTsgYm9yZGVyOjFweCBzb2xpZCAjZWVlOyBwYWRkaW5nOjEwcHg7IGJvcmRlci1yYWRpdXM6NnB4OyI+PC9kaXY+CiAgICAgICAgPGRpdiBzdHlsZT0ibWFyZ2luLXRvcDoxMnB4OyBmb250LXNpemU6MC44cmVtOyBjb2xvcjojODg4OyBib3JkZXItdG9wOjFweCBzb2xpZCAjZWVlOyBwYWRkaW5nLXRvcDoxMHB4OyI+CiAgICAgICAgICAgIENsaXF1ZXogc3VyIHVuZSBkaXNjaXBsaW5lIHBvdXIgbCdham91dGVyIMOgIGwnZW50aXTDqSBjb3VyYW50ZS4gTGVzIGRpc2NpcGxpbmVzIGTDqWrDoCBwcsOpc2VudGVzIHNvbnQgZ3Jpc8OpZXMuCiAgICAgICAgPC9kaXY+CiAgICA8L2Rpdj4KPC9kaXY+Cgo8IS0tIE1PREFMIENPUElFUiBNQVRJw4hSRVMgVkVSUyBFTlRJVMOJIC0tPgo8ZGl2IGlkPSJjb3B5LXN1YmplY3RzLW92ZXJsYXkiIHN0eWxlPSJkaXNwbGF5Om5vbmU7IHBvc2l0aW9uOmZpeGVkOyB0b3A6MDsgbGVmdDowOyB3aWR0aDoxMDAlOyBoZWlnaHQ6MTAwJTsgYmFja2dyb3VuZDpyZ2JhKDAsMCwwLDAuNik7IHotaW5kZXg6MjAwMDA7IGp1c3RpZnktY29udGVudDpjZW50ZXI7IGFsaWduLWl0ZW1zOmNlbnRlcjsiPgogICAgPGRpdiBzdHlsZT0iYmFja2dyb3VuZDp3aGl0ZTsgcGFkZGluZzoyNHB4OyBib3JkZXItcmFkaXVzOjEwcHg7IHdpZHRoOjUwMHB4OyBtYXgtd2lkdGg6OTYlOyBib3gtc2hhZG93OjAgMTBweCAzMHB4IHJnYmEoMCwwLDAsMC4zKTsiPgogICAgICAgIDxkaXYgc3R5bGU9ImRpc3BsYXk6ZmxleDsganVzdGlmeS1jb250ZW50OnNwYWNlLWJldHdlZW47IGFsaWduLWl0ZW1zOmNlbnRlcjsgbWFyZ2luLWJvdHRvbToxNXB4OyBib3JkZXItYm90dG9tOjJweCBzb2xpZCAjZWVlOyBwYWRkaW5nLWJvdHRvbToxMnB4OyI+CiAgICAgICAgICAgIDxoMyBzdHlsZT0ibWFyZ2luOjA7IGNvbG9yOiMxYWJjOWM7Ij7wn5SAIENvcGllciBsZXMgTWF0acOocmVzPC9oMz4KICAgICAgICAgICAgPGJ1dHRvbiBvbmNsaWNrPSJkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29weS1zdWJqZWN0cy1vdmVybGF5Jykuc3R5bGUuZGlzcGxheT0nbm9uZSciIHN0eWxlPSJiYWNrZ3JvdW5kOm5vbmU7Ym9yZGVyOm5vbmU7Zm9udC1zaXplOjEuNHJlbTtjdXJzb3I6cG9pbnRlcjtjb2xvcjojOTk5OyI+w5c8L2J1dHRvbj4KICAgICAgICA8L2Rpdj4KICAgICAgICA8cCBzdHlsZT0iY29sb3I6IzU1NTsgbWFyZ2luLWJvdHRvbToxNXB4OyI+Q29waWVyIGxlcyBtYXRpw6hyZXMgZGUgPHN0cm9uZyBpZD0iY29weS1mcm9tLWxhYmVsIj5sJ2VudGl0w6kgY291cmFudGU8L3N0cm9uZz4gdmVycyA6PC9wPgogICAgICAgIDxkaXYgc3R5bGU9ImRpc3BsYXk6ZmxleDsgZmxleC1kaXJlY3Rpb246Y29sdW1uOyBnYXA6MTBweDsgbWFyZ2luLWJvdHRvbToyMHB4OyI+CiAgICAgICAgICAgIDxsYWJlbCBzdHlsZT0iZGlzcGxheTpmbGV4OyBhbGlnbi1pdGVtczpjZW50ZXI7IGdhcDoxMHB4OyBjdXJzb3I6cG9pbnRlcjsgcGFkZGluZzoxMHB4OyBib3JkZXI6MnB4IHNvbGlkICNlZWU7IGJvcmRlci1yYWRpdXM6OHB4OyIgaWQ9ImNvcHktdG8tY29sbGVnZS1vcHQiPgogICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9ImNoZWNrYm94IiBpZD0iY29weS10by1jb2xsZWdlIiBzdHlsZT0id2lkdGg6MTZweDsgaGVpZ2h0OjE2cHg7Ij4g8J+PqyA8c3BhbiBpZD0iY29weS1jb2xsZWdlLWxibCI+Q29sbMOoZ2U8L3NwYW4+CiAgICAgICAgICAgIDwvbGFiZWw+CiAgICAgICAgICAgIDxsYWJlbCBzdHlsZT0iZGlzcGxheTpmbGV4OyBhbGlnbi1pdGVtczpjZW50ZXI7IGdhcDoxMHB4OyBjdXJzb3I6cG9pbnRlcjsgcGFkZGluZzoxMHB4OyBib3JkZXI6MnB4IHNvbGlkICNlZWU7IGJvcmRlci1yYWRpdXM6OHB4OyIgaWQ9ImNvcHktdG8tbHljZWUtb3B0Ij4KICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJjaGVja2JveCIgaWQ9ImNvcHktdG8tbHljZWUiIHN0eWxlPSJ3aWR0aDoxNnB4OyBoZWlnaHQ6MTZweDsiPiDwn4+b77iPIDxzcGFuIGlkPSJjb3B5LWx5Y2VlLWxibCI+THljw6llPC9zcGFuPgogICAgICAgICAgICA8L2xhYmVsPgogICAgICAgICAgICA8bGFiZWwgc3R5bGU9ImRpc3BsYXk6ZmxleDsgYWxpZ24taXRlbXM6Y2VudGVyOyBnYXA6MTBweDsgY3Vyc29yOnBvaW50ZXI7IHBhZGRpbmc6MTBweDsgYm9yZGVyOjJweCBzb2xpZCAjZWVlOyBib3JkZXItcmFkaXVzOjhweDsiIGlkPSJjb3B5LXRvLXBvbGUtb3B0Ij4KICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJjaGVja2JveCIgaWQ9ImNvcHktdG8tcG9sZSIgc3R5bGU9IndpZHRoOjE2cHg7IGhlaWdodDoxNnB4OyI+IPCfjpMgPHNwYW4gaWQ9ImNvcHktcG9sZS1sYmwiPlDDtGxlIFN1cMOpcmlldXI8L3NwYW4+CiAgICAgICAgICAgIDwvbGFiZWw+CiAgICAgICAgPC9kaXY+CiAgICAgICAgPGRpdiBzdHlsZT0iYmFja2dyb3VuZDojZmZmM2NkOyBib3JkZXI6MXB4IHNvbGlkICNmZmMxMDc7IGJvcmRlci1yYWRpdXM6NnB4OyBwYWRkaW5nOjEwcHg7IG1hcmdpbi1ib3R0b206MTVweDsgZm9udC1zaXplOjAuODVyZW07IGNvbG9yOiM4NTY0MDQ7Ij4KICAgICAgICAgICAg4pqg77iPIExlcyBtYXRpw6hyZXMgZXhpc3RhbnRlcyBkYW5zIGxhIGNpYmxlIHNlcm9udCBjb25zZXJ2w6llcy4gU2V1bGVzIGxlcyBub3V2ZWxsZXMgbWF0acOocmVzIHNlcm9udCBham91dMOpZXMuCiAgICAgICAgPC9kaXY+CiAgICAgICAgPGRpdiBzdHlsZT0iZGlzcGxheTpmbGV4OyBnYXA6MTBweDsganVzdGlmeS1jb250ZW50OmZsZXgtZW5kOyI+CiAgICAgICAgICAgIDxidXR0b24gb25jbGljaz0iZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvcHktc3ViamVjdHMtb3ZlcmxheScpLnN0eWxlLmRpc3BsYXk9J25vbmUnIiBjbGFzcz0iYnRuIiBzdHlsZT0iYmFja2dyb3VuZDojZWVlOyBjb2xvcjojMzMzOyI+QW5udWxlcjwvYnV0dG9uPgogICAgICAgICAgICA8YnV0dG9uIG9uY2xpY2s9ImV4ZWN1dGVDb3B5U3ViamVjdHMoKSIgY2xhc3M9ImJ0biBidG4tc3VjY2VzcyI+4pyFIENvcGllcjwvYnV0dG9uPgogICAgICAgIDwvZGl2PgogICAgPC9kaXY+CjwvZGl2PgoKPCEtLSBNT0RBTCBBSk9VVCBFTlNFSUdOQU5UIC0tPgo8ZGl2IGlkPSJzaGFyZWQtdGVhY2hlci1vdmVybGF5IiBzdHlsZT0iZGlzcGxheTpub25lOyBwb3NpdGlvbjpmaXhlZDsgdG9wOjA7IGxlZnQ6MDsgd2lkdGg6MTAwJTsgaGVpZ2h0OjEwMCU7IGJhY2tncm91bmQ6cmdiYSgwLDAsMCwwLjYpOyB6LWluZGV4OjIwMDAwOyBqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyOyBhbGlnbi1pdGVtczpjZW50ZXI7Ij4KICAgIDxkaXYgc3R5bGU9ImJhY2tncm91bmQ6d2hpdGU7IHBhZGRpbmc6MjhweDsgYm9yZGVyLXJhZGl1czoxMHB4OyB3aWR0aDo1MDBweDsgbWF4LXdpZHRoOjk1JTsgYm94LXNoYWRvdzowIDEwcHggMzBweCByZ2JhKDAsMCwwLDAuMyk7Ij4KICAgICAgICA8aDMgc3R5bGU9Im1hcmdpbjowIDAgMjBweCAwOyBjb2xvcjojMmMzZTUwOyBib3JkZXItYm90dG9tOjJweCBzb2xpZCAjZWVlOyBwYWRkaW5nLWJvdHRvbToxMnB4OyI+CiAgICAgICAgICAgIPCfkaQgRW5zZWlnbmFudAogICAgICAgIDwvaDM+CiAgICAgICAgPGlucHV0IHR5cGU9ImhpZGRlbiIgaWQ9InN0LWlkIj4KICAgICAgICA8ZGl2IHN0eWxlPSJkaXNwbGF5OmdyaWQ7IGdyaWQtdGVtcGxhdGUtY29sdW1uczoxZnIgMWZyOyBnYXA6MTJweDsgbWFyZ2luLWJvdHRvbToxNXB4OyI+CiAgICAgICAgICAgIDxkaXYgc3R5bGU9ImdyaWQtY29sdW1uOjEvLTE7Ij4KICAgICAgICAgICAgICAgIDxsYWJlbCBzdHlsZT0iZm9udC13ZWlnaHQ6NjAwOyBmb250LXNpemU6MC44NXJlbTsiPk5vbSAmIFByw6lub20gKjwvbGFiZWw+CiAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0idGV4dCIgaWQ9InN0LW5hbWUiIHBsYWNlaG9sZGVyPSJFeDogRFVQT05UIE1hcmllIiBzdHlsZT0id2lkdGg6MTAwJTsgYm94LXNpemluZzpib3JkZXItYm94OyBtYXJnaW4tdG9wOjRweDsiPgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPGRpdj4KICAgICAgICAgICAgICAgIDxsYWJlbCBzdHlsZT0iZm9udC13ZWlnaHQ6NjAwOyBmb250LXNpemU6MC44NXJlbTsiPkdyYWRlICo8L2xhYmVsPgogICAgICAgICAgICAgICAgPHNlbGVjdCBpZD0ic3QtZ3JhZGUiIHN0eWxlPSJ3aWR0aDoxMDAlOyBib3gtc2l6aW5nOmJvcmRlci1ib3g7IG1hcmdpbi10b3A6NHB4OyI+CiAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iIj4tLSBTw6lsZWN0aW9ubmVyIC0tPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgPG9wdGdyb3VwIGxhYmVsPSLilIDilIAgQ29ycHMgZW5zZWlnbmFudHMgdGl0dWxhaXJlcyDilIDilIAiPgogICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJBZ3LDqWfDqSI+QWdyw6lnw6kgKEFHRyk8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iQ2VydGlmacOpIj5DZXJ0aWZpw6kgKENFUlQpPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IlBMUCI+UExQIOKAkyBQcm9mLiBkZSBMeWPDqWUgUHJvZmVzc2lvbm5lbDwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJDQVBFUFMiPkNBUEVQUyDigJMgRVBTIENlcnRpZmnDqTwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJBZ3LDqWfDqSBFUFMiPkFncsOpZ8OpIEVQUzwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJQRUdDIj5QRUdDIOKAkyBQcm9mLiBkJ0Vucy4gR8Opbi4gZGUgQ29sbMOoZ2U8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iUENTIj5Qcm9mLiBkZSBDaGFpcmUgU3Vww6lyaWV1cmUgKFBDUyk8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iQ1BFIj5DUEUg4oCTIENvbnNlaWxsZXIgUHJpbmNpcGFsIGQnw4lkdWNhdGlvbjwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJEb2N1bWVudGFsaXN0ZSI+RG9jdW1lbnRhbGlzdGUgKFBzeUVOLURPKTwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJCaS1hZG1pc3NpYmxlIj5CaS1hZG1pc3NpYmxlPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgPC9vcHRncm91cD4KICAgICAgICAgICAgICAgICAgICA8b3B0Z3JvdXAgbGFiZWw9IuKUgOKUgCBQZXJzb25uZWwgbm9uIHRpdHVsYWlyZSDilIDilIAiPgogICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJDb250cmFjdHVlbCI+Q29udHJhY3R1ZWw8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iVmFjYXRhaXJlIj5WYWNhdGFpcmU8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iQUVEIj5BRUQg4oCTIEFzc2lzdGFudCBkJ8OJZHVjYXRpb248L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iQUVTSCI+QUVTSCDigJMgQWNjb21wYWduYW50IMOJbMOodmVzIEhhbmRpY2Fww6lzPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IkludGVydmVuYW50IEV4dMOpcmlldXIiPkludGVydmVuYW50IEV4dMOpcmlldXI8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICA8L29wdGdyb3VwPgogICAgICAgICAgICAgICAgICAgIDxvcHRncm91cCBsYWJlbD0i4pSA4pSAIEVuc2VpZ25lbWVudCBTdXDDqXJpZXVyIOKUgOKUgCI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IlBSQUciPlBSQUcg4oCTIFByb2YuIEFncsOpZ8OpIGRhbnMgbGUgU3VwLjwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJQUkNFIj5QUkNFIOKAkyBQcm9mLiBDZXJ0aWZpw6kgZGFucyBsZSBTdXAuPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9Ik1hw650cmUgZGUgY29uZsOpcmVuY2VzIj5NYcOudHJlIGRlIGNvbmbDqXJlbmNlcyAoTUNGKTwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJQcm9mZXNzZXVyIGFzc29jacOpIj5Qcm9mZXNzZXVyIGFzc29jacOpPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgPC9vcHRncm91cD4KICAgICAgICAgICAgICAgICAgICA8b3B0Z3JvdXAgbGFiZWw9IuKUgOKUgCBBZG1pbmlzdHJhdGlmIOKUgOKUgCI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IkJNUC9DU1IiPkJNUCAvIENTUjwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJBdXRyZSI+QXV0cmU8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICA8L29wdGdyb3VwPgogICAgICAgICAgICAgICAgPC9zZWxlY3Q+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8ZGl2PgogICAgICAgICAgICAgICAgPGxhYmVsIHN0eWxlPSJmb250LXdlaWdodDo2MDA7IGZvbnQtc2l6ZTowLjg1cmVtOyI+RW1haWw8L2xhYmVsPgogICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9ImVtYWlsIiBpZD0ic3QtZW1haWwiIHBsYWNlaG9sZGVyPSJwcmVub20ubm9tQGFjLXh4eHh4LmZyIiBzdHlsZT0id2lkdGg6MTAwJTsgYm94LXNpemluZzpib3JkZXItYm94OyBtYXJnaW4tdG9wOjRweDsiPgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPGRpdj4KICAgICAgICAgICAgICAgIDxsYWJlbCBzdHlsZT0iZm9udC13ZWlnaHQ6NjAwOyBmb250LXNpemU6MC44NXJlbTsiPkRpc2NpcGxpbmUgcHJpbmNpcGFsZSAqPC9sYWJlbD4KICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiBpZD0ic3Qtc3ViamVjdCIgcGxhY2Vob2xkZXI9IkV4OiBNYXRow6ltYXRpcXVlcyIgc3R5bGU9IndpZHRoOjEwMCU7IGJveC1zaXppbmc6Ym9yZGVyLWJveDsgbWFyZ2luLXRvcDo0cHg7IgogICAgICAgICAgICAgICAgICAgIHRpdGxlPSJEaXNjaXBsaW5lIHByaW5jaXBhbGUgKHV0aWxpc8OpZSBzaSBhdWN1bmUgZGlzY2lwbGluZSBwYXIgZW50aXTDqSBuJ2VzdCBkw6lmaW5pZSkiPgogICAgICAgICAgICAgICAgPGRpdiBpZD0ic3Qtc3ViamVjdHMtcGVyLWVudGl0eSIgc3R5bGU9Im1hcmdpbi10b3A6OHB4OyBkaXNwbGF5OmZsZXg7IGZsZXgtZGlyZWN0aW9uOmNvbHVtbjsgZ2FwOjVweDsiPjwvZGl2PgogICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iZm9udC1zaXplOjAuNzJyZW07IGNvbG9yOiM5OTk7IG1hcmdpbi10b3A6M3B4OyI+8J+SoSBTaSBjZSBwcm9mIGVuc2VpZ25lIHVuZSBkaXNjaXBsaW5lIGRpZmbDqXJlbnRlIHNlbG9uIGwnZW50aXTDqSwgcHLDqWNpc2V6LWxhIGNpLWRlc3NvdXMuPC9kaXY+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8ZGl2PgogICAgICAgICAgICAgICAgPGxhYmVsIHN0eWxlPSJmb250LXdlaWdodDo2MDA7IGZvbnQtc2l6ZTowLjg1cmVtOyI+Q29kZSBQTkU8L2xhYmVsPgogICAgICAgICAgICAgICAgPHNlbGVjdCBpZD0ic3QtcG5lLWNvZGUiIG9uY2hhbmdlPSJ1cGRhdGVTdEJ1cmVhdURpc3BsYXkoKSIgc3R5bGU9IndpZHRoOjEwMCU7IGJveC1zaXppbmc6Ym9yZGVyLWJveDsgbWFyZ2luLXRvcDo0cHg7Ij4KICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSIiPi0tIFPDqWxlY3Rpb25uZXIgLS08L29wdGlvbj4KICAgICAgICAgICAgICAgIDwvc2VsZWN0PgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPGRpdj4KICAgICAgICAgICAgICAgIDxsYWJlbCBzdHlsZT0iZm9udC13ZWlnaHQ6NjAwOyBmb250LXNpemU6MC44NXJlbTsiPk9SUyAoT2JsaWdhdGlvbiBSw6lnbC4pPC9sYWJlbD4KICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJudW1iZXIiIGlkPSJzdC1vcnMiIHZhbHVlPSIxOCIgbWluPSIwIiBtYXg9IjMwIiBzdGVwPSIwLjUiIHN0eWxlPSJ3aWR0aDoxMDAlOyBib3gtc2l6aW5nOmJvcmRlci1ib3g7IG1hcmdpbi10b3A6NHB4OyIgb25pbnB1dD0idXBkYXRlU3RSZXN0ZSgpIj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgPC9kaXY+CiAgICAgICAgPCEtLSBDaGFtcHMgY2FjaMOpcyBwb3VyIGNvbXBhdGliaWxpdMOpIC0tPgogICAgICAgIDxpbnB1dCB0eXBlPSJoaWRkZW4iIGlkPSJzdC1oLWNvbGxlZ2UiIHZhbHVlPSIwIj4KICAgICAgICA8aW5wdXQgdHlwZT0iaGlkZGVuIiBpZD0ic3QtaC1seWNlZSIgdmFsdWU9IjAiPgogICAgICAgIDxpbnB1dCB0eXBlPSJoaWRkZW4iIGlkPSJzdC1oLWx5Y2VlLXBybyIgdmFsdWU9IjAiPgogICAgICAgIDxpbnB1dCB0eXBlPSJoaWRkZW4iIGlkPSJzdC1oLXBvbGUiIHZhbHVlPSIwIj4KCiAgICAgICAgPCEtLSBDQVNFUyDDgCBDT0NIRVIgRU5USVTDiVMgLS0+CiAgICAgICAgPGRpdiBzdHlsZT0iYmFja2dyb3VuZDojZjhmOWZhOyBib3JkZXI6MXB4IHNvbGlkICNlOGVjZjA7IGJvcmRlci1yYWRpdXM6OHB4OyBwYWRkaW5nOjE0cHg7IG1hcmdpbi1ib3R0b206MTVweDsiPgogICAgICAgICAgICA8ZGl2IHN0eWxlPSJmb250LXdlaWdodDo3MDA7IGNvbG9yOiMyYzNlNTA7IG1hcmdpbi1ib3R0b206MTBweDsgZm9udC1zaXplOjAuOXJlbTsiPvCfj6sgRW50aXTDqXMgYWN0aXZlcyA8c3BhbiBzdHlsZT0iZm9udC1zaXplOjAuNzVyZW07IGNvbG9yOiM3ZjhjOGQ7IGZvbnQtd2VpZ2h0OjQwMDsiPuKAlCBjZXQgZW5zZWlnbmFudCBhcHBhcmHDrnRyYSBkYW5zIGxhIGxpc3RlIFByb2Zlc3NldXJzIGRlIGNoYXF1ZSBlbnRpdMOpIGNvY2jDqWU8L3NwYW4+PC9kaXY+CiAgICAgICAgICAgIDxkaXYgc3R5bGU9ImRpc3BsYXk6Z3JpZDsgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOnJlcGVhdCgyLDFmcik7IGdhcDo4cHg7Ij4KICAgICAgICAgICAgICAgIDxsYWJlbCBpZD0ic3QtZW50aXR5LWxibC1jb2xsZWdlIiBzdHlsZT0iZGlzcGxheTpmbGV4OyBhbGlnbi1pdGVtczpjZW50ZXI7IGdhcDoxMHB4OyBjdXJzb3I6cG9pbnRlcjsgcGFkZGluZzo5cHggMTJweDsgYm9yZGVyOjJweCBzb2xpZCAjYWVkNmYxOyBib3JkZXItcmFkaXVzOjdweDsgYmFja2dyb3VuZDojZWFmNGZjOyB0cmFuc2l0aW9uOmFsbCAuMTVzOyI+CiAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9ImNoZWNrYm94IiBpZD0ic3QtZW50aXR5LWNvbGxlZ2UiIHZhbHVlPSJjb2xsZWdlIiBvbmNoYW5nZT0ic3RFbnRpdHlDaGVja0NoYW5nZSgpIiBzdHlsZT0id2lkdGg6MTdweDsgaGVpZ2h0OjE3cHg7IGFjY2VudC1jb2xvcjojMjk4MGI5OyBjdXJzb3I6cG9pbnRlcjsiPgogICAgICAgICAgICAgICAgICAgIDxzcGFuIHN0eWxlPSJmb250LXdlaWdodDo3MDA7IGNvbG9yOiMyOTgwYjk7IGZvbnQtc2l6ZTowLjlyZW07Ij7wn4+rIENvbGzDqGdlPC9zcGFuPgogICAgICAgICAgICAgICAgICAgIDxzcGFuIGlkPSJzdC1kaXNwLWNvbGxlZ2UiIHN0eWxlPSJtYXJnaW4tbGVmdDphdXRvOyBmb250LXNpemU6MC44MnJlbTsgY29sb3I6IzI5ODBiOTsgZm9udC13ZWlnaHQ6NjAwOyI+PC9zcGFuPgogICAgICAgICAgICAgICAgPC9sYWJlbD4KICAgICAgICAgICAgICAgIDxsYWJlbCBpZD0ic3QtZW50aXR5LWxibC1seWNlZSIgc3R5bGU9ImRpc3BsYXk6ZmxleDsgYWxpZ24taXRlbXM6Y2VudGVyOyBnYXA6MTBweDsgY3Vyc29yOnBvaW50ZXI7IHBhZGRpbmc6OXB4IDEycHg7IGJvcmRlcjoycHggc29saWQgI2E5ZGZiZjsgYm9yZGVyLXJhZGl1czo3cHg7IGJhY2tncm91bmQ6I2VhZmFmMTsgdHJhbnNpdGlvbjphbGwgLjE1czsiPgogICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJjaGVja2JveCIgaWQ9InN0LWVudGl0eS1seWNlZSIgdmFsdWU9Imx5Y2VlIiBvbmNoYW5nZT0ic3RFbnRpdHlDaGVja0NoYW5nZSgpIiBzdHlsZT0id2lkdGg6MTdweDsgaGVpZ2h0OjE3cHg7IGFjY2VudC1jb2xvcjojMWU4NDQ5OyBjdXJzb3I6cG9pbnRlcjsiPgogICAgICAgICAgICAgICAgICAgIDxzcGFuIHN0eWxlPSJmb250LXdlaWdodDo3MDA7IGNvbG9yOiMxZTg0NDk7IGZvbnQtc2l6ZTowLjlyZW07Ij7wn4+b77iPIEx5Y8OpZTwvc3Bhbj4KICAgICAgICAgICAgICAgICAgICA8c3BhbiBpZD0ic3QtZGlzcC1seWNlZSIgc3R5bGU9Im1hcmdpbi1sZWZ0OmF1dG87IGZvbnQtc2l6ZTowLjgycmVtOyBjb2xvcjojMWU4NDQ5OyBmb250LXdlaWdodDo2MDA7Ij48L3NwYW4+CiAgICAgICAgICAgICAgICA8L2xhYmVsPgogICAgICAgICAgICAgICAgPGxhYmVsIGlkPSJzdC1lbnRpdHktbGJsLWx5Y2VlX3BybyIgc3R5bGU9ImRpc3BsYXk6ZmxleDsgYWxpZ24taXRlbXM6Y2VudGVyOyBnYXA6MTBweDsgY3Vyc29yOnBvaW50ZXI7IHBhZGRpbmc6OXB4IDEycHg7IGJvcmRlcjoycHggc29saWQgI2YwYjI3YTsgYm9yZGVyLXJhZGl1czo3cHg7IGJhY2tncm91bmQ6I2ZlZjVlNzsgdHJhbnNpdGlvbjphbGwgLjE1czsiPgogICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJjaGVja2JveCIgaWQ9InN0LWVudGl0eS1seWNlZV9wcm8iIHZhbHVlPSJseWNlZV9wcm8iIG9uY2hhbmdlPSJzdEVudGl0eUNoZWNrQ2hhbmdlKCkiIHN0eWxlPSJ3aWR0aDoxN3B4OyBoZWlnaHQ6MTdweDsgYWNjZW50LWNvbG9yOiNkMzU0MDA7IGN1cnNvcjpwb2ludGVyOyI+CiAgICAgICAgICAgICAgICAgICAgPHNwYW4gc3R5bGU9ImZvbnQtd2VpZ2h0OjcwMDsgY29sb3I6I2QzNTQwMDsgZm9udC1zaXplOjAuOXJlbTsiPvCfj60gTHljw6llIFBybzwvc3Bhbj4KICAgICAgICAgICAgICAgICAgICA8c3BhbiBpZD0ic3QtZGlzcC1seWNlZS1wcm8iIHN0eWxlPSJtYXJnaW4tbGVmdDphdXRvOyBmb250LXNpemU6MC44MnJlbTsgY29sb3I6I2QzNTQwMDsgZm9udC13ZWlnaHQ6NjAwOyI+PC9zcGFuPgogICAgICAgICAgICAgICAgPC9sYWJlbD4KICAgICAgICAgICAgICAgIDxsYWJlbCBpZD0ic3QtZW50aXR5LWxibC1wb2xlIiBzdHlsZT0iZGlzcGxheTpmbGV4OyBhbGlnbi1pdGVtczpjZW50ZXI7IGdhcDoxMHB4OyBjdXJzb3I6cG9pbnRlcjsgcGFkZGluZzo5cHggMTJweDsgYm9yZGVyOjJweCBzb2xpZCAjYzM5YmQzOyBib3JkZXItcmFkaXVzOjdweDsgYmFja2dyb3VuZDojZjVlZWY4OyB0cmFuc2l0aW9uOmFsbCAuMTVzOyI+CiAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9ImNoZWNrYm94IiBpZD0ic3QtZW50aXR5LXBvbGUiIHZhbHVlPSJwb2xlIiBvbmNoYW5nZT0ic3RFbnRpdHlDaGVja0NoYW5nZSgpIiBzdHlsZT0id2lkdGg6MTdweDsgaGVpZ2h0OjE3cHg7IGFjY2VudC1jb2xvcjojN2QzYzk4OyBjdXJzb3I6cG9pbnRlcjsiPgogICAgICAgICAgICAgICAgICAgIDxzcGFuIHN0eWxlPSJmb250LXdlaWdodDo3MDA7IGNvbG9yOiM3ZDNjOTg7IGZvbnQtc2l6ZTowLjlyZW07Ij7wn46TIFDDtGxlIFN1cC48L3NwYW4+CiAgICAgICAgICAgICAgICAgICAgPHNwYW4gaWQ9InN0LWRpc3AtcG9sZSIgc3R5bGU9Im1hcmdpbi1sZWZ0OmF1dG87IGZvbnQtc2l6ZTowLjgycmVtOyBjb2xvcjojN2QzYzk4OyBmb250LXdlaWdodDo2MDA7Ij48L3NwYW4+CiAgICAgICAgICAgICAgICA8L2xhYmVsPgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPGRpdiBpZD0ic3QtcmVzdGUtZGlzcGxheSIgc3R5bGU9Im1hcmdpbi10b3A6OHB4OyBmb250LXNpemU6MC44NXJlbTsgZm9udC13ZWlnaHQ6NzAwOyB0ZXh0LWFsaWduOnJpZ2h0OyI+PC9kaXY+CiAgICAgICAgPC9kaXY+CiAgICAgICAgPGRpdiBzdHlsZT0iZGlzcGxheTpmbGV4OyBqdXN0aWZ5LWNvbnRlbnQ6ZmxleC1lbmQ7IGdhcDoxMHB4OyI+CiAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImJ0biBidG4tZGFyayIgb25jbGljaz0iY2xvc2VTaGFyZWRUZWFjaGVyTW9kYWwoKSI+QW5udWxlcjwvYnV0dG9uPgogICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJidG4gYnRuLXN1Y2Nlc3MiIG9uY2xpY2s9InNhdmVTaGFyZWRUZWFjaGVyKCkiPvCfkr4gRW5yZWdpc3RyZXI8L2J1dHRvbj4KICAgICAgICA8L2Rpdj4KICAgIDwvZGl2Pgo8L2Rpdj4KCjxkaXYgaWQ9InNwbGl0LW92ZXJsYXkiPgogICAgPGRpdiBjbGFzcz0ic3BsaXQtYm94Ij4KICAgICAgICA8ZGl2IGNsYXNzPSJzcGxpdC1oZWFkZXIiPgogICAgICAgICAgICA8aDM+4pyC77iPIFZlbnRpbGF0aW9uIGRlIHNlcnZpY2U8L2gzPgogICAgICAgICAgICA8YnV0dG9uIG9uY2xpY2s9ImNsb3NlU3BsaXRNb2RhbCgpIiBzdHlsZT0iYmFja2dyb3VuZDpub25lOyBib3JkZXI6bm9uZTsgZm9udC1zaXplOjEuMnJlbTsgY3Vyc29yOnBvaW50ZXI7Ij7DlzwvYnV0dG9uPgogICAgICAgIDwvZGl2PgogICAgICAgIAogICAgICAgIDxkaXYgaWQ9InNwbGl0LWluZm8iIGNsYXNzPSJpbmZvLWRpc3BvIj48L2Rpdj4KICAgICAgICAKICAgICAgICA8ZGl2IGlkPSJzcGxpdC1jb250YWluZXIiPgogICAgICAgICAgICA8L2Rpdj4KCiAgICAgICAgPGRpdiBjbGFzcz0ic3BsaXQtYWN0aW9ucyI+CiAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImJ0biBidG4tZGFyayIgb25jbGljaz0iY2xvc2VTcGxpdE1vZGFsKCkiPkFubnVsZXI8L2J1dHRvbj4KICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYnRuIGJ0bi1zdWNjZXNzIiBvbmNsaWNrPSJjb25maXJtVmVudGlsYXRpb24oKSI+VmFsaWRlciBsYSB2ZW50aWxhdGlvbjwvYnV0dG9uPgogICAgICAgIDwvZGl2PgogICAgPC9kaXY+CjwvZGl2Pgo8ZGl2IGlkPSJleHBvcnQtb3ZlcmxheSIgc3R5bGU9ImRpc3BsYXk6IG5vbmU7IHBvc2l0aW9uOiBmaXhlZDsgdG9wOiAwcHg7IGxlZnQ6IDBweDsgd2lkdGg6IDEwMCU7IGhlaWdodDogMTAwJTsgYmFja2dyb3VuZDogcmdiYSgwLCAwLCAwLCAwLjYpOyB6LWluZGV4OiAxMDAwMDsganVzdGlmeS1jb250ZW50OiBjZW50ZXI7IGFsaWduLWl0ZW1zOiBjZW50ZXI7IGJhY2tkcm9wLWZpbHRlcjogYmx1cigzcHgpOyI+CiAgICA8ZGl2IHN0eWxlPSJiYWNrZ3JvdW5kOndoaXRlOyBwYWRkaW5nOjMwcHg7IGJvcmRlci1yYWRpdXM6MTVweDsgd2lkdGg6NDUwcHg7IG1heC13aWR0aDo5MCU7IGJveC1zaGFkb3c6MCAxNXB4IDM1cHggcmdiYSgwLDAsMCwwLjIpOyI+CiAgICAgICAgPGRpdiBzdHlsZT0iZGlzcGxheTpmbGV4OyBqdXN0aWZ5LWNvbnRlbnQ6c3BhY2UtYmV0d2VlbjsgYWxpZ24taXRlbXM6Y2VudGVyOyI+CiAgICAgICAgICAgIDxoMiBzdHlsZT0ibWFyZ2luOjA7IGNvbG9yOiMyYzNlNTA7Ij7wn5ao77iPIENvbmZpZ3VyYXRpb24gUERGPC9oMj4KICAgICAgICAgICAgPGJ1dHRvbiBvbmNsaWNrPSJkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZXhwb3J0LW92ZXJsYXknKS5zdHlsZS5kaXNwbGF5PSdub25lJyIgc3R5bGU9ImJvcmRlcjpub25lOyBiYWNrZ3JvdW5kOm5vbmU7IGZvbnQtc2l6ZToxLjVyZW07IGN1cnNvcjpwb2ludGVyOyBjb2xvcjojOTVhNWE2OyI+w5c8L2J1dHRvbj4KICAgICAgICA8L2Rpdj4KCiAgICAgICAgPGRpdiBjbGFzcz0iZXhwb3J0LXNlY3Rpb24tdGl0bGUiPjEuIE9yaWVudGF0aW9uPC9kaXY+CiAgICAgICAgPGRpdiBjbGFzcz0iZXhwb3J0LXRpbGVzLXJvdyI+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImV4cG9ydC10aWxlIiBpZD0idGlsZS1vcmllbnQtcG9ydHJhaXQiIG9uY2xpY2s9InNldEV4cG9ydFBhcmFtKCdvcmllbnRhdGlvbicsICdwb3J0cmFpdCcpIj4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9Imljb24tcGFwZXIgaWNvbi1wb3J0cmFpdCI+PC9kaXY+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJ0aWxlLWxhYmVsIj5Qb3J0cmFpdDwvZGl2PgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0iZXhwb3J0LXRpbGUgc2VsZWN0ZWQiIGlkPSJ0aWxlLW9yaWVudC1sYW5kc2NhcGUiIG9uY2xpY2s9InNldEV4cG9ydFBhcmFtKCdvcmllbnRhdGlvbicsICdsYW5kc2NhcGUnKSI+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJpY29uLXBhcGVyIGljb24tbGFuZHNjYXBlIj48L2Rpdj4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InRpbGUtbGFiZWwiPlBheXNhZ2U8L2Rpdj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgPC9kaXY+CgogICAgICAgIDxkaXYgY2xhc3M9ImV4cG9ydC1zZWN0aW9uLXRpdGxlIj4yLiBGb3JtYXQgUGFwaWVyPC9kaXY+CiAgICAgICAgPGRpdiBjbGFzcz0iZXhwb3J0LXRpbGVzLXJvdyI+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImV4cG9ydC10aWxlIiBpZD0idGlsZS1mb3JtYXQtYTQiIG9uY2xpY2s9InNldEV4cG9ydFBhcmFtKCdmb3JtYXQnLCAnYTQnKSI+CiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz0iaWNvbi1mb3JtYXQiPkE0PC9zcGFuPgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0idGlsZS1sYWJlbCI+U3RhbmRhcmQ8L2Rpdj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImV4cG9ydC10aWxlIHNlbGVjdGVkIiBpZD0idGlsZS1mb3JtYXQtYTMiIG9uY2xpY2s9InNldEV4cG9ydFBhcmFtKCdmb3JtYXQnLCAnYTMnKSI+CiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz0iaWNvbi1mb3JtYXQiPkEzPC9zcGFuPgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0idGlsZS1sYWJlbCI+R3JhbmQgRm9ybWF0PC9kaXY+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgIDwvZGl2PgoKICAgICAgICA8ZGl2IGNsYXNzPSJleHBvcnQtb3B0aW9ucy1yb3ciPgogICAgICAgICAgICA8bGFiZWwgY2xhc3M9InN3aXRjaC1sYWJlbCI+CiAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0iY2hlY2tib3giIGlkPSJjaGstZm9yY2Utb25lLXBhZ2UiIGNoZWNrZWQ9ImNoZWNrZWQiIHN0eWxlPSJ3aWR0aDoyMHB4OyBoZWlnaHQ6MjBweDsgYWNjZW50LWNvbG9yOiMyN2FlNjA7Ij4KICAgICAgICAgICAgICAgIDxkaXY+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iZm9udC13ZWlnaHQ6Ym9sZDsiPkZvcmNlciBzdXIgdW5lIHNldWxlIHBhZ2U8L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8c21hbGwgc3R5bGU9ImNvbG9yOiM3ZjhjOGQ7Ij5Sw6lkdWl0IGF1dG9tYXRpcXVlbWVudCBsYSBwb2xpY2U8L3NtYWxsPgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDwvbGFiZWw+CiAgICAgICAgPC9kaXY+CgogICAgICAgIDxidXR0b24gY2xhc3M9ImJ0biBidG4tc3VjY2VzcyIgc3R5bGU9IndpZHRoOjEwMCU7IHBhZGRpbmc6MTVweDsgbWFyZ2luLXRvcDoyMHB4OyBmb250LXNpemU6MS4xcmVtOyBqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyOyIgb25jbGljaz0iY29uZmlybUdsb2JhbEV4cG9ydCgpIj4KICAgIFTDqWzDqWNoYXJnZXIgbGUgUERGCjwvYnV0dG9uPgogICAgPC9kaXY+CjwvZGl2Pgo8ZGl2IGlkPSJkZWNoLW92ZXJsYXkiIHN0eWxlPSJkaXNwbGF5Om5vbmU7IHBvc2l0aW9uOmZpeGVkOyB0b3A6MDsgbGVmdDowOyB3aWR0aDoxMDAlOyBoZWlnaHQ6MTAwJTsgYmFja2dyb3VuZDpyZ2JhKDAsMCwwLDAuNSk7IHotaW5kZXg6MTAwMDA7IGp1c3RpZnktY29udGVudDpjZW50ZXI7IGFsaWduLWl0ZW1zOmNlbnRlcjsgYmFja2Ryb3AtZmlsdGVyOmJsdXIoMnB4KTsiPgogICAgPGRpdiBzdHlsZT0iYmFja2dyb3VuZDp3aGl0ZTsgcGFkZGluZzoyNXB4OyBib3JkZXItcmFkaXVzOjEwcHg7IHdpZHRoOjQwMHB4OyBtYXgtd2lkdGg6OTAlOyBib3gtc2hhZG93OjAgMTBweCAyNXB4IHJnYmEoMCwwLDAsMC4yKTsiPgogICAgICAgIDxoMyBzdHlsZT0ibWFyZ2luLXRvcDowOyBjb2xvcjojMmMzZTUwOyBib3JkZXItYm90dG9tOjFweCBzb2xpZCAjZWVlOyBwYWRkaW5nLWJvdHRvbToxMHB4OyI+R2VzdGlvbiBkZXMgRMOpY2hhcmdlczwvaDM+CiAgICAgICAgPHAgaWQ9ImRlY2gtdGVhY2hlci1uYW1lIiBzdHlsZT0iZm9udC13ZWlnaHQ6Ym9sZDsgY29sb3I6IzM0OThkYjsgbWFyZ2luLWJvdHRvbToyMHB4OyI+PC9wPgoKICAgICAgICA8ZGl2IHN0eWxlPSJiYWNrZ3JvdW5kOiNmOWY5Zjk7IHBhZGRpbmc6MTVweDsgYm9yZGVyLXJhZGl1czo4cHg7IGJvcmRlcjoxcHggc29saWQgI2VlZTsgbWFyZ2luLWJvdHRvbToxNXB4OyI+CiAgICAgICAgICAgIDxsYWJlbCBzdHlsZT0iZGlzcGxheTpibG9jazsgZm9udC13ZWlnaHQ6Ym9sZDsgY29sb3I6I2U2N2UyMjsgbWFyZ2luLWJvdHRvbTo1cHg7Ij4xLiBEw6ljaGFyZ2UgREdIIChJbnRlcm5lKTwvbGFiZWw+CiAgICAgICAgICAgIDxzbWFsbCBzdHlsZT0iY29sb3I6Izc3NzsgZGlzcGxheTpibG9jazsgbWFyZ2luLWJvdHRvbTo4cHg7Ij5IZXVyZSBkZSBMYWJvLCBDYWJpbmV0LCBWYWlzc2VsbGUuLi48YnI+8J+RiSA8c3Ryb25nPkNvw7t0ZTwvc3Ryb25nPiDDoCBsJ8OpdGFibGlzc2VtZW50Ljwvc21hbGw+CiAgICAgICAgICAgIDxkaXYgc3R5bGU9ImRpc3BsYXk6ZmxleDsgYWxpZ24taXRlbXM6Y2VudGVyOyBnYXA6MTBweDsiPgogICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9Im51bWJlciIgaWQ9ImlucHV0LWRlY2gtaW50IiBzdGVwPSIwLjUiIG1pbj0iMCIgc3R5bGU9IndpZHRoOjgwcHg7IHRleHQtYWxpZ246Y2VudGVyOyBmb250LXdlaWdodDpib2xkOyBjb2xvcjojZTY3ZTIyOyIgcGxhY2Vob2xkZXI9IjAiPgogICAgICAgICAgICAgICAgPHNwYW4+aGV1cmUocyk8L3NwYW4+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgIDwvZGl2PgoKICAgICAgICA8ZGl2IHN0eWxlPSJiYWNrZ3JvdW5kOiNmOWY5Zjk7IHBhZGRpbmc6MTVweDsgYm9yZGVyLXJhZGl1czo4cHg7IGJvcmRlcjoxcHggc29saWQgI2VlZTsgbWFyZ2luLWJvdHRvbToyMHB4OyI+CiAgICAgICAgICAgIDxsYWJlbCBzdHlsZT0iZGlzcGxheTpibG9jazsgZm9udC13ZWlnaHQ6Ym9sZDsgY29sb3I6IzI3YWU2MDsgbWFyZ2luLWJvdHRvbTo1cHg7Ij4yLiBEw6ljaGFyZ2UgUmVjdG9yYXQgKEV4dGVybmUpPC9sYWJlbD4KICAgICAgICAgICAgPHNtYWxsIHN0eWxlPSJjb2xvcjojNzc3OyBkaXNwbGF5OmJsb2NrOyBtYXJnaW4tYm90dG9tOjhweDsiPlN5bmRpY2FsZSwgQWxsw6hnZW1lbnQgbcOpZGljYWwsIElNUCBSZWN0b3JhdC4uLjxicj7wn5GJIDxzdHJvbmc+TmUgY2/Du3RlIHBhczwvc3Ryb25nPiAocsOpZHVpdCBsJ09SUyBwYXnDqSkuPC9zbWFsbD4KICAgICAgICAgICAgPGRpdiBzdHlsZT0iZGlzcGxheTpmbGV4OyBhbGlnbi1pdGVtczpjZW50ZXI7IGdhcDoxMHB4OyI+CiAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0ibnVtYmVyIiBpZD0iaW5wdXQtZGVjaC1leHQiIHN0ZXA9IjAuNSIgbWluPSIwIiBzdHlsZT0id2lkdGg6ODBweDsgdGV4dC1hbGlnbjpjZW50ZXI7IGZvbnQtd2VpZ2h0OmJvbGQ7IGNvbG9yOiMyN2FlNjA7IiBwbGFjZWhvbGRlcj0iMCI+CiAgICAgICAgICAgICAgICA8c3Bhbj5oZXVyZShzKTwvc3Bhbj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgPC9kaXY+CgogICAgICAgIDxkaXYgc3R5bGU9InRleHQtYWxpZ246cmlnaHQ7IGRpc3BsYXk6ZmxleDsgZ2FwOjEwcHg7IGp1c3RpZnktY29udGVudDpmbGV4LWVuZDsiPgogICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJidG4gYnRuLWRhcmsiIG9uY2xpY2s9ImN1cnJlbnREZWNoSWR4ID0gLTE7IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkZWNoLW92ZXJsYXknKS5zdHlsZS5kaXNwbGF5PSdub25lJyI+QW5udWxlcjwvYnV0dG9uPgogICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJidG4gYnRuLXN1Y2Nlc3MiIG9uY2xpY2s9InNhdmVEZWNoYXJnZURldGFpbHMoKSI+VmFsaWRlcjwvYnV0dG9uPgogICAgICAgIDwvZGl2PgogICAgPC9kaXY+CjwvZGl2PgoKPGRpdiBpZD0iZWRzLXNlbGVjdG9yLW92ZXJsYXkiIHN0eWxlPSJkaXNwbGF5OiBub25lOyI+CiAgICA8ZGl2IGNsYXNzPSJlZHMtc2VsZWN0b3ItYm94Ij4KICAgICAgICA8ZGl2IGNsYXNzPSJzcGxpdC1oZWFkZXIiPgogICAgICAgICAgICA8aDMgaWQ9ImVkcy1zZWxlY3Rvci10aXRsZSI+Q2hvaXNpciBsZXMgRURTIDogUHJlbWnDqHJlPC9oMz4KICAgICAgICAgICAgPGJ1dHRvbiBvbmNsaWNrPSJjbG9zZUVkc1NlbGVjdG9yKCkiIHN0eWxlPSJiYWNrZ3JvdW5kOm5vbmU7IGJvcmRlcjpub25lOyBmb250LXNpemU6MS41cmVtOyBjdXJzb3I6cG9pbnRlcjsiPsOXPC9idXR0b24+CiAgICAgICAgPC9kaXY+CiAgICAgICAgPHAgc3R5bGU9ImNvbG9yOiAjN2Y4YzhkOyBmb250LXNpemU6IDAuOXJlbTsiPkNsaXF1ZXogc3VyIGxlcyB0dWlsZXMgcG91ciBzw6lsZWN0aW9ubmVyIGxlcyBlbnNlaWduZW1lbnRzIG91dmVydHMgZGFucyB2b3RyZSDDqXRhYmxpc3NlbWVudC48L3A+CiAgICAgICAgCiAgICAgICAgPGRpdiBjbGFzcz0iZWRzLWdyaWQiIGlkPSJlZHMtdGlsZXMtY29udGFpbmVyIj48ZGl2IGNsYXNzPSJlZHMtdGlsZSI+TWF0aMOpbWF0aXF1ZXM8L2Rpdj48ZGl2IGNsYXNzPSJlZHMtdGlsZSI+UGh5c2lxdWUtQ2hpbWllPC9kaXY+PGRpdiBjbGFzcz0iZWRzLXRpbGUiPlNWVDwvZGl2PjxkaXYgY2xhc3M9ImVkcy10aWxlIj5IR0dTUDwvZGl2PjxkaXYgY2xhc3M9ImVkcy10aWxlIj5TRVM8L2Rpdj48ZGl2IGNsYXNzPSJlZHMtdGlsZSI+SExQPC9kaXY+PGRpdiBjbGFzcz0iZWRzLXRpbGUiPkxMQ0UgQW5nbGFpczwvZGl2PjxkaXYgY2xhc3M9ImVkcy10aWxlIj5MTENFIEVzcGFnbm9sPC9kaXY+PGRpdiBjbGFzcz0iZWRzLXRpbGUiPkxMQ0UgQWxsZW1hbmQ8L2Rpdj48ZGl2IGNsYXNzPSJlZHMtdGlsZSI+TExDRSBJdGFsaWVuPC9kaXY+PGRpdiBjbGFzcz0iZWRzLXRpbGUiPk5TSTwvZGl2PjxkaXYgY2xhc3M9ImVkcy10aWxlIj5TSSAoU2NpZW5jZXMgZGUgbCdJbmfDqW5pZXVyKTwvZGl2PjxkaXYgY2xhc3M9ImVkcy10aWxlIj5BTUMgKEFuZ2xhaXMgTW9uZGUgQ29udGVtcC4pPC9kaXY+PGRpdiBjbGFzcz0iZWRzLXRpbGUiPkVQUENTIChTcG9ydCk8L2Rpdj48ZGl2IGNsYXNzPSJlZHMtdGlsZSI+U3DDqSBBcnRzIFBsYXN0aXF1ZXMgKEFydHMpPC9kaXY+PGRpdiBjbGFzcz0iZWRzLXRpbGUiPlNww6kgTXVzaXF1ZSAoQXJ0cyk8L2Rpdj48ZGl2IGNsYXNzPSJlZHMtdGlsZSI+U3DDqSBUaMOpw6J0cmUgKEFydHMpPC9kaXY+PGRpdiBjbGFzcz0iZWRzLXRpbGUiPlNww6kgQ2luw6ltYS1BdWRpb3Zpc3VlbCAoQXJ0cyk8L2Rpdj48ZGl2IGNsYXNzPSJlZHMtdGlsZSI+U3DDqSBEYW5zZSAoQXJ0cyk8L2Rpdj48ZGl2IGNsYXNzPSJlZHMtdGlsZSI+U3DDqSBIaXN0b2lyZSBkZXMgQXJ0cyAoQXJ0cyk8L2Rpdj48ZGl2IGNsYXNzPSJlZHMtdGlsZSI+U3DDqSBBcnRzIGR1IENpcnF1ZSAoQXJ0cyk8L2Rpdj48ZGl2IGNsYXNzPSJlZHMtdGlsZSI+U1RJMkQgLSBJbm5vdmF0aW9uIFRlY2hub2xvZ2lxdWUgKElUKTwvZGl2PjxkaXYgY2xhc3M9ImVkcy10aWxlIj5TVEkyRCAtIEluZ8OpbmllcmllIGV0IGTDqXYuIGR1cmFibGUgKEkyRCk8L2Rpdj48ZGl2IGNsYXNzPSJlZHMtdGlsZSI+U1RJMkQgLSBQaHlzLi1DaGltaWUgZXQgTWF0aHMgKFBDTSk8L2Rpdj48ZGl2IGNsYXNzPSJlZHMtdGlsZSI+U1QyUyAtIFNjaWVuY2VzIGV0IHRlY2guIHNhbml0YWlyZXMgZXQgc29jaWFsZXM8L2Rpdj48ZGl2IGNsYXNzPSJlZHMtdGlsZSI+U1QyUyAtIEJpb2xvZ2llIGV0IHBoeXNpb3BhdGhvbG9naWUgaHVtYWluZXM8L2Rpdj48ZGl2IGNsYXNzPSJlZHMtdGlsZSI+U1RMIC0gQmlvdGVjaG5vbG9naWVzPC9kaXY+PGRpdiBjbGFzcz0iZWRzLXRpbGUiPlNUTCAtIFNjaWVuY2VzIHBoeXMuIGV0IGNoaW0uIGVuIGxhYm88L2Rpdj48ZGl2IGNsYXNzPSJlZHMtdGlsZSI+U1REMkEgLSBBbmFseXNlIGV0IG3DqXRob2RlcyBlbiBkZXNpZ248L2Rpdj48ZGl2IGNsYXNzPSJlZHMtdGlsZSI+U1REMkEgLSBDb25jZXB0aW9uIGV0IGNyw6lhdGlvbiBlbiBkZXNpZ248L2Rpdj48ZGl2IGNsYXNzPSJlZHMtdGlsZSI+U1RIUiAtIEjDtHRlbGxlcmllIGV0IFJlc3RhdXJhdGlvbjwvZGl2PjxkaXYgY2xhc3M9ImVkcy10aWxlIj5TVEFWIC0gQW3DqW5hZ2VtZW50IC8gUHJvZHVjdGlvbiAvIFRyYW5zZm9ybWF0aW9uPC9kaXY+PGRpdiBjbGFzcz0iZWRzLXRpbGUiPlMyVE1EIC0gTXVzaXF1ZSAvIERhbnNlIC8gVGjDqcOidHJlPC9kaXY+PC9kaXY+CgogICAgICAgIDxkaXYgY2xhc3M9InNwbGl0LWFjdGlvbnMiPgogICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJidG4gYnRuLWRhcmsiIG9uY2xpY2s9ImNsb3NlRWRzU2VsZWN0b3IoKSI+QW5udWxlcjwvYnV0dG9uPgogICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJidG4gYnRuLXN1Y2Nlc3MiIGlkPSJidG4tdmFsaWRhdGUtZWRzIiBzdHlsZT0icGFkZGluZzogMTBweCAzMHB4OyI+VmFsaWRlciBsYSBzw6lsZWN0aW9uPC9idXR0b24+CiAgICAgICAgPC9kaXY+CiAgICA8L2Rpdj4KPC9kaXY+CjxkaXYgaWQ9ImxpbmtlZC1zdWJqZWN0cy1vdmVybGF5IiBzdHlsZT0iZGlzcGxheTpub25lOyBwb3NpdGlvbjpmaXhlZDsgdG9wOjA7IGxlZnQ6MDsgd2lkdGg6MTAwJTsgaGVpZ2h0OjEwMCU7IGJhY2tncm91bmQ6cmdiYSgwLDAsMCwwLjUpOyB6LWluZGV4OjEwMDAwOyBqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyOyBhbGlnbi1pdGVtczpjZW50ZXI7IGJhY2tkcm9wLWZpbHRlcjpibHVyKDJweCk7Ij4KICAgIDxkaXYgc3R5bGU9ImJhY2tncm91bmQ6d2hpdGU7IHBhZGRpbmc6MjVweDsgYm9yZGVyLXJhZGl1czoxMHB4OyB3aWR0aDo1MDBweDsgbWF4LXdpZHRoOjkwJTsgYm94LXNoYWRvdzowIDEwcHggMjVweCByZ2JhKDAsMCwwLDAuMik7IGRpc3BsYXk6ZmxleDsgZmxleC1kaXJlY3Rpb246Y29sdW1uOyBtYXgtaGVpZ2h0Ojg1dmg7Ij4KICAgICAgICA8ZGl2IHN0eWxlPSJib3JkZXItYm90dG9tOjFweCBzb2xpZCAjZWVlOyBwYWRkaW5nLWJvdHRvbToxNXB4OyBtYXJnaW4tYm90dG9tOjE1cHg7IGRpc3BsYXk6ZmxleDsganVzdGlmeS1jb250ZW50OnNwYWNlLWJldHdlZW47IGFsaWduLWl0ZW1zOmNlbnRlcjsiPgogICAgICAgICAgICA8aDMgc3R5bGU9Im1hcmdpbjowOyBjb2xvcjojMmMzZTUwOyI+8J+UlyBEaXNjaXBsaW5lcyBBc3NvY2nDqWVzPC9oMz4KICAgICAgICAgICAgPGJ1dHRvbiBvbmNsaWNrPSJjbG9zZUxpbmtlZFN1YmplY3RzTW9kYWwoKSIgc3R5bGU9ImJhY2tncm91bmQ6bm9uZTsgYm9yZGVyOm5vbmU7IGZvbnQtc2l6ZToxLjVyZW07IGN1cnNvcjpwb2ludGVyOyBjb2xvcjojN2Y4YzhkOyI+w5c8L2J1dHRvbj4KICAgICAgICA8L2Rpdj4KICAgICAgICAKICAgICAgICA8cCBzdHlsZT0iY29sb3I6IzdmOGM4ZDsgZm9udC1zaXplOjAuOXJlbTsgbWFyZ2luLXRvcDowOyI+CiAgICAgICAgICAgIFPDqWxlY3Rpb25uZXogbGVzIG1hdGnDqHJlcyBkb250IGxlcyBwcm9mZXNzZXVycyBwb3Vycm9udCBpbnRlcnZlbmlyIHN1ciA8c3Ryb25nIGlkPSJsaW5rZWQtbW9kYWwtdGFyZ2V0LW5hbWUiIHN0eWxlPSJjb2xvcjojMmMzZTUwOyI+PC9zdHJvbmc+LgogICAgICAgIDwvcD4KCiAgICAgICAgPGRpdiBpZD0ibGlua2VkLXN1YmplY3RzLWxpc3QiIHN0eWxlPSJvdmVyZmxvdy15OmF1dG87IGZsZXgtZ3JvdzoxOyBib3JkZXI6MXB4IHNvbGlkICNlZWU7IHBhZGRpbmc6MTBweDsgYm9yZGVyLXJhZGl1czo2cHg7IGJhY2tncm91bmQ6I2Y5ZjlmOTsgZGlzcGxheTpncmlkOyBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IDFmciAxZnI7IGdhcDoxMHB4OyI+CiAgICAgICAgICAgIDwvZGl2PgoKICAgICAgICA8ZGl2IHN0eWxlPSJtYXJnaW4tdG9wOjIwcHg7IHRleHQtYWxpZ246cmlnaHQ7IGJvcmRlci10b3A6MXB4IHNvbGlkICNlZWU7IHBhZGRpbmctdG9wOjE1cHg7Ij4KICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYnRuIGJ0bi1zdWNjZXNzIiBvbmNsaWNrPSJjbG9zZUxpbmtlZFN1YmplY3RzTW9kYWwoKSI+VmFsaWRlciAmYW1wOyBGZXJtZXI8L2J1dHRvbj4KICAgICAgICA8L2Rpdj4KICAgIDwvZGl2Pgo8L2Rpdj4KCjxzY3JpcHQ+Ci8qKgogKiBESEcgTUFOQUdFUiBWMiAtIFZlcnNpb24gRmluYWxlCiAqLwoKY29uc3QgUFJFU0VUUyA9IHsKICAgICdjb2xsZWdlJzogewogICAgICAgIGxldmVsczogWwogICAgICAgICAgICB7IGxldmVsOiAiNsOobWUiLCBzdHVkZW50czogMCwgZGl2OiAwLCB0YXJnZXQ6IDI4LjAgfSwKICAgICAgICAgICAgeyBsZXZlbDogIjXDqG1lIiwgc3R1ZGVudHM6IDAsIGRpdjogMCwgdGFyZ2V0OiAyOS4wIH0sCiAgICAgICAgICAgIHsgbGV2ZWw6ICI0w6htZSIsIHN0dWRlbnRzOiAwLCBkaXY6IDAsIHRhcmdldDogMjkuMCB9LAogICAgICAgICAgICB7IGxldmVsOiAiM8OobWUiLCBzdHVkZW50czogMCwgZGl2OiAwLCB0YXJnZXQ6IDI5LjAgfQogICAgICAgIF0sCiAgICAgICAgc3ViamVjdHM6IHsKICAgICAgICAgICAgIkZyYW7Dp2FpcyI6IHsiNsOobWUiOjQuNSwiNcOobWUiOjQuNSwiNMOobWUiOjQuNSwiM8OobWUiOjR9LCAiTWF0aHMiOiB7IjbDqG1lIjo0LjUsIjXDqG1lIjozLjUsIjTDqG1lIjozLjUsIjPDqG1lIjozLjV9LAogICAgICAgICAgICAiSGlzdC1Hw6lvIjogeyI2w6htZSI6MywiNcOobWUiOjMsIjTDqG1lIjozLCIzw6htZSI6My41fSwgIkxWMSBBbmdsYWlzIjogeyI2w6htZSI6NCwiNcOobWUiOjMsIjTDqG1lIjozLCIzw6htZSI6M30sCiAgICAgICAgICAgICJMVjIgRXNwYWdub2wiOiB7IjbDqG1lIjowLCI1w6htZSI6Mi41LCI0w6htZSI6Mi41LCIzw6htZSI6Mi41fSwgIlNWVCI6IHsiNsOobWUiOjIsIjXDqG1lIjoxLjUsIjTDqG1lIjoxLjUsIjPDqG1lIjoxLjV9LAogICAgICAgICAgICAiUGh5cy1DaGkiOiB7IjbDqG1lIjoyLCI1w6htZSI6MS41LCI0w6htZSI6MS41LCIzw6htZSI6MS41fSwgIlRlY2hubyI6IHsiNsOobWUiOjAsIjXDqG1lIjoxLjUsIjTDqG1lIjoxLjUsIjPDqG1lIjoxLjV9LAogICAgICAgICAgICAiRVBTIjogeyI2w6htZSI6NCwiNcOobWUiOjMsIjTDqG1lIjozLCIzw6htZSI6M30sICJBcnRzIFBsYXN0LiI6IHsiNsOobWUiOjEsIjXDqG1lIjoxLCI0w6htZSI6MSwiM8OobWUiOjF9LAogICAgICAgICAgICAiRWR1Y2F0aW9uIE11c2ljYWxlIjogeyI2w6htZSI6MSwiNcOobWUiOjEsIjTDqG1lIjoxLCIzw6htZSI6MX0sIAogICAgICAgICAgICAiQXV0b25vbWllIEVQTEUiOiB7ICI2w6htZSI6IDAsICI1w6htZSI6IDAsICI0w6htZSI6IDAsICIzw6htZSI6IDAgfSwKICAgICAgICAgICAgIlVOU1MiOiB7ICI2w6htZSI6IDAsICI1w6htZSI6IDAsICI0w6htZSI6IDAsICIzw6htZSI6IDAgfQogICAgICAgIH0KICAgIH0sCiAgICAnbGd0JzogewogICAgICAgIGxldmVsczogWwogICAgICAgICAgICB7IGxldmVsOiAiMm5kZSIsIHN0dWRlbnRzOiAwLCBkaXY6IDAsIHRhcmdldDogMjkuMCB9LAogICAgICAgICAgICB7IGxldmVsOiAiMcOocmUiLCBzdHVkZW50czogMCwgZGl2OiAwLCB0YXJnZXQ6IDI4LjAgfSwKICAgICAgICAgICAgeyBsZXZlbDogIlRlcm1pbmFsZSIsIHN0dWRlbnRzOiAwLCBkaXY6IDAsIHRhcmdldDogMjguMCB9CiAgICAgICAgXSwKICAgICAgICBzdWJqZWN0czogewogICAgICAgICAgICAiRnJhbsOnYWlzIjogeyIybmRlIjo0LCAiMcOocmUiOjQsICJUZXJtaW5hbGUiOjB9LCAiUGhpbG9zb3BoaWUiOiB7IjJuZGUiOjAsICIxw6hyZSI6MCwgIlRlcm1pbmFsZSI6NH0sCiAgICAgICAgICAgICJIaXN0LUfDqW8iOiB7IjJuZGUiOjMsICIxw6hyZSI6MywgIlRlcm1pbmFsZSI6M30sICJMVkEiOiB7IjJuZGUiOjMsICIxw6hyZSI6Mi41LCAiVGVybWluYWxlIjoyfSwKICAgICAgICAgICAgIkxWQiI6IHsiMm5kZSI6Mi41LCAiMcOocmUiOjIsICJUZXJtaW5hbGUiOjJ9LCAiU0VTIjogeyIybmRlIjoxLjUsICIxw6hyZSI6MCwgIlRlcm1pbmFsZSI6MH0sCiAgICAgICAgICAgICJNYXRocyAoVEMpIjogeyIybmRlIjo0LCAiMcOocmUiOjAsICJUZXJtaW5hbGUiOjB9LCAiUGh5cy1DaGkgKFRDKSI6IHsiMm5kZSI6MywgIjHDqHJlIjowLCAiVGVybWluYWxlIjowfSwKICAgICAgICAgICAgIlNWVCAoVEMpIjogeyIybmRlIjoxLjUsICIxw6hyZSI6MCwgIlRlcm1pbmFsZSI6MH0sICJFUFMiOiB7IjJuZGUiOjIsICIxw6hyZSI6MiwgIlRlcm1pbmFsZSI6Mn0sCiAgICAgICAgICAgICJFbnMuIFNjaWVudGlmaXF1ZSI6IHsiMm5kZSI6MCwgIjHDqHJlIjoyLCAiVGVybWluYWxlIjoyfSwgIkVNQyI6IHsiMm5kZSI6MC41LCAiMcOocmUiOjAuNSwgIlRlcm1pbmFsZSI6MC41fSwKICAgICAgICAgICAgIkF1dG9ub21pZSBFUExFIjogeyAiMm5kZSI6IDAsICIxw6hyZSI6IDAsICJUZXJtaW5hbGUiOiAwIH0sCiAgICAgICAgICAgICJVTlNTIjogeyAiMm5kZSI6IDAsICIxw6hyZSI6IDAsICJUZXJtaW5hbGUiOiAwIH0KICAgICAgICB9CiAgICB9LAogICAgJ2xwJzogewogICAgICAgIGxldmVsczogW3sgbGV2ZWw6ICIybmRlIEJhY1BybyIsIHN0dWRlbnRzOiAwLCBkaXY6IDAsIHRhcmdldDogMzAuMCB9XSwKICAgICAgICBzdWJqZWN0czogeyAKICAgICAgICAgICAgIkxldHRyZXMtSGlzdCI6IHsiMm5kZSBCYWNQcm8iOiA0fSwgIk1hdGhzLVNjaWVuY2VzIjogeyIybmRlIEJhY1BybyI6IDR9LCAiRVBTIjogeyIybmRlIEJhY1BybyI6IDJ9LCAKICAgICAgICAgICAgIkF1dG9ub21pZSBFUExFIjogeyAiMm5kZSBCYWNQcm8iOiAwIH0sICJVTlNTIjogeyAiMm5kZSBCYWNQcm8iOiAwIH0KICAgICAgICB9CiAgICB9Cn07CgovLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KLy8gUsOJRsOJUkVOVElFTCBQTkUg4oCTIEFDQUTDiU1JRSBBSVgtTUFSU0VJTExFCi8vIFNvdXJjZSA6IHBuZS1jb3JyZXNwb25kYW5jZS1idXJlYXUtZGlzY2lwbGluZQovLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KY29uc3QgUE5FX0JVUkVBVVggPSB7CiAgICAiMDEzRElQRTEiOiB7CiAgICAgICAgbGFiZWw6ICJCdXJlYXUgMSDigJMgTGl0dMOpcmFpcmVzLCBFUFMsIFNFUywgRG9jdW1lbnRhdGlvbiwgUGhpbG9zb3BoaWUiLAogICAgICAgIGNvbG9yOiAiIzJlY2M3MSIsCiAgICAgICAgZGlzY2lwbGluZXM6IHsKICAgICAgICAgICAgIkwwMDgwIjogIkRvY3VtZW50YXRpb24iLAogICAgICAgICAgICAiTDAxMDAiOiAiUGhpbG9zb3BoaWUiLAogICAgICAgICAgICAiTDAyMDEiOiAiTGV0dHJlcyBDbGFzc2lxdWVzIiwKICAgICAgICAgICAgIkwwMjAyIjogIkxldHRyZXMgTW9kZXJuZXMiLAogICAgICAgICAgICAiTDExMDAiOiAiU2NpZW5jZXMgw4ljby4gZXQgU29jaWFsZXMiLAogICAgICAgICAgICAiTDE5MDAiOiAiRVBTIgogICAgICAgIH0KICAgIH0sCiAgICAiMDEzRElQRTIiOiB7CiAgICAgICAgbGFiZWw6ICJCdXJlYXUgMiDigJMgU2NpZW50aWZpcXVlcywgSGlzdG9pcmUtR8OpbywgU1ZUIiwKICAgICAgICBjb2xvcjogIiMzNDk4ZGIiLAogICAgICAgIGRpc2NpcGxpbmVzOiB7CiAgICAgICAgICAgICJMMTAwMCI6ICJIaXN0b2lyZS1Hw6lvZ3JhcGhpZSIsCiAgICAgICAgICAgICJMMTMwMCI6ICJNYXRow6ltYXRpcXVlcyIsCiAgICAgICAgICAgICJMMTUwMCI6ICJTY2llbmNlcyBQaHlzaXF1ZXMgZXQgQ2hpbWlxdWVzIiwKICAgICAgICAgICAgIkwxNTEwIjogIlBoeXNpcXVlIGV0IMOJbGVjdHJpY2l0w6kgQXBwbGlxdcOpZSIsCiAgICAgICAgICAgICJMMTYwMCI6ICJTY2llbmNlcyBkZSBsYSBWaWUgZXQgZGUgbGEgVGVycmUiCiAgICAgICAgfQogICAgfSwKICAgICIwMTNESVBFMyI6IHsKICAgICAgICBsYWJlbDogIkJ1cmVhdSAzIOKAkyBMYW5ndWVzLCBBcnRzLCBNdXNpcXVlLCBDUEUsIFBTWUVOIiwKICAgICAgICBjb2xvcjogIiM5YjU5YjYiLAogICAgICAgIGRpc2NpcGxpbmVzOiB7CiAgICAgICAgICAgICJFMDAzMCI6ICJDUEUiLAogICAgICAgICAgICAiTDA0MjEiOiAiQWxsZW1hbmQiLAogICAgICAgICAgICAiTDA0MjIiOiAiQW5nbGFpcyIsCiAgICAgICAgICAgICJMMDQyMyI6ICJBcmFiZSIsCiAgICAgICAgICAgICJMMDQyNCI6ICJDaGlub2lzIiwKICAgICAgICAgICAgIkwwNDI2IjogIkVzcGFnbm9sIiwKICAgICAgICAgICAgIkwwNDI5IjogIkl0YWxpZW4iLAogICAgICAgICAgICAiTDA0MzAiOiAiSmFwb25haXMiLAogICAgICAgICAgICAiTDA0MzMiOiAiUG9ydHVnYWlzIiwKICAgICAgICAgICAgIkwwNDM0IjogIlJ1c3NlIiwKICAgICAgICAgICAgIkwwNDQ0IjogIk9jY2l0YW4iLAogICAgICAgICAgICAiTDE3MDAiOiAiw4lkdWNhdGlvbiBNdXNpY2FsZSIsCiAgICAgICAgICAgICJMMTgwMCI6ICJBcnRzIFBsYXN0aXF1ZXMiLAogICAgICAgICAgICAiWTAwMTEiOiAiUFNZRU4gRURBIiwKICAgICAgICAgICAgIlkwMDEyIjogIlBTWUVOIEVETyIKICAgICAgICB9CiAgICB9LAogICAgIjAxM0RJUEU0IjogewogICAgICAgIGxhYmVsOiAiQnVyZWF1IDQg4oCTIFRlY2huaXF1ZXMvVGVjaG5vIEx5Y8OpZSAmIEx5Y8OpZSBQcm8iLAogICAgICAgIGNvbG9yOiAiI2U2N2UyMiIsCiAgICAgICAgZGlzY2lwbGluZXM6IHsKICAgICAgICAgICAgIkwxNDAwIjogIlRlY2hub2xvZ2llIiwKICAgICAgICAgICAgIkwxNDExIjogIlNJSSBJbmfDqW5pZXJpZSBDb25zdHJ1Y3Rpb25zIiwKICAgICAgICAgICAgIkwxNDEyIjogIlNJSSBJbmfDqW5pZXJpZSDDiWxlY3RyaXF1ZSIsCiAgICAgICAgICAgICJMMTQxMyI6ICJTSUkgSW5nw6luaWVyaWUgSW5mb3JtYXRpcXVlIiwKICAgICAgICAgICAgIkwxNDE0IjogIlNJSSBJbmfDqW5pZXJpZSBNw6ljYW5pcXVlIiwKICAgICAgICAgICAgIkw2NTAwIjogIkVucy4gQXJ0aXN0aXF1ZXMgJiBBcnRzIEFwcGxpcXXDqXMiLAogICAgICAgICAgICAiTDcxMDAiOiAiQmlvY2hpbWllLUfDqW5pZSBCaW9sb2dpcXVlIiwKICAgICAgICAgICAgIkw3MjAwIjogIkJpb3RlY2hub2xvZ2llcyBTYW50w6ktRW52aXJvbm5lbWVudCIsCiAgICAgICAgICAgICJMNzMwMCI6ICJTY2llbmNlcyBldCBUZWNobmlxdWVzIE3DqWRpY28tU29jaWFsZXMiLAogICAgICAgICAgICAiTDgwMTEiOiAiw4ljby1HZXN0LiBDb21tLiwgT3JnLiwgR1JIIiwKICAgICAgICAgICAgIkw4MDEyIjogIsOJY28tR2VzdC4gQ29tcHRhYmlsaXTDqSAmIEZpbmFuY2UiLAogICAgICAgICAgICAiTDgwMTMiOiAiw4ljby1HZXN0LiBNYXJrZXRpbmciLAogICAgICAgICAgICAiTDgwMTUiOiAiTWFuYWdlbWVudCBVQyIsCiAgICAgICAgICAgICJMODAxNyI6ICJOw6lnb2NpYXRpb24gJiBSZWxhdGlvbiBDbGllbnQiLAogICAgICAgICAgICAiTDgwMzEiOiAiw4ljby1HZXN0LiBDb25jZXB0ICYgR2VzdC4gU0kiLAogICAgICAgICAgICAiTDg1MjAiOiAiSMO0dGVsLVJlc3QuIFNlcnYuICYgQWNjdWVpbCIsCiAgICAgICAgICAgICJMODUzMCI6ICJIw7R0ZWxsZXJpZSBUb3VyaXNtZSIsCiAgICAgICAgICAgIC8vIExQCiAgICAgICAgICAgICJQMDIxMCI6ICJMUCBMZXR0cmVzLUhpc3QtR8OpbyIsCiAgICAgICAgICAgICJQMDIyMiI6ICJMUCBMZXR0cmVzLUFuZ2xhaXMiLAogICAgICAgICAgICAiUDAyMjYiOiAiTFAgTGV0dHJlcy1Fc3BhZ25vbCIsCiAgICAgICAgICAgICJQMTMxNSI6ICJMUCBNYXRocy1TY2llbmNlcyBQaHlzLiIsCiAgICAgICAgICAgICJQMjEwMCI6ICJMUCBHw6luaWUgSW5kdXN0cmllbCBCb2lzIiwKICAgICAgICAgICAgIlAyMjAwIjogIkxQIEfDqW5pZSBJbmR1c3RyaWVsIFRleHRpbGVzIiwKICAgICAgICAgICAgIlAyNDAwIjogIkxQIEfDqW5pZSBJbmR1c3RyaWVsIFN0cnVjdHVyZXMgTcOpdGFsbGlxdWVzIiwKICAgICAgICAgICAgIlAyNDUwIjogIkxQIENvbnN0cnVjdGlvbiAmIFLDqXBhcmF0aW9uIENhcnJvc3NlcmllIiwKICAgICAgICAgICAgIlAyNjAwIjogIkxQIEfDqW5pZSBDaGltaXF1ZSIsCiAgICAgICAgICAgICJQMzAxMCI6ICJMUCBHw6luaWUgQ2l2aWwgw4ljby4iLAogICAgICAgICAgICAiUDMwMTMiOiAiTFAgRGVzc2luLVRvcG8uIiwKICAgICAgICAgICAgIlAzMDIwIjogIkxQIEfDqW5pZSBDaXZpbCBSw6lhbGlzYXRpb24iLAogICAgICAgICAgICAiUDMwMjgiOiAiTFAgUGVpbnR1cmUtUmV2w6p0ZW1lbnQiLAogICAgICAgICAgICAiUDMxMDAiOiAiTFAgR8OpbmllIFRoZXJtaXF1ZSIsCiAgICAgICAgICAgICJQNDEwMCI6ICJMUCBHw6luaWUgTcOpY2EuIENvbnN0cnVjdGlvbiIsCiAgICAgICAgICAgICJQNDIwMCI6ICJMUCBHw6luaWUgTcOpY2EuIFByb2R1Y3RpcXVlIiwKICAgICAgICAgICAgIlA0NTAwIjogIkxQIEfDqW5pZSBNw6ljYS4gTWFpbnQuIFbDqWhpY3VsZXMiLAogICAgICAgICAgICAiUDQ1NTAiOiAiTFAgRy5Nw6ljYSBNYWludC4gU3lzdC4gQXV0by4iLAogICAgICAgICAgICAiUDUxMDAiOiAiTFAgR8OpbmllIMOJbGVjLiDDiWxlY3Ryb25pcXVlIiwKICAgICAgICAgICAgIlA1MjAwIjogIkxQIEfDqW5pZSDDiWxlYy4gw4lsZWN0cm90ZWNobmlxdWUiLAogICAgICAgICAgICAiUDYxMDAiOiAiTFAgSW5kdXN0cmllcyBHcmFwaGlxdWVzIiwKICAgICAgICAgICAgIlA2MzEwIjogIkxQIENvbmR1Y3RldXJzIFJvdXRpZXJzIiwKICAgICAgICAgICAgIlA2NTAwIjogIkxQIEVucy4gQXJ0aXN0aXF1ZXMiLAogICAgICAgICAgICAiUDY2MjEiOiAiTFAgw4liw6luaXN0ZXJpZSBkJ0FydCIsCiAgICAgICAgICAgICJQNzIwMCI6ICJMUCBCaW90ZWNobm9sb2dpZXMgU2FudMOpLUVudi4iLAogICAgICAgICAgICAiUDczMDAiOiAiTFAgU2NpZW5jZXMgJiBUZWNobmlxdWVzIE3DqWRpY28tU29jLiIsCiAgICAgICAgICAgICJQNzQxMCI6ICJMUCBFc3Row6l0aXF1ZS1Db3Ntw6l0aXF1ZSIsCiAgICAgICAgICAgICJQNzQyMCI6ICJMUCBDb2lmZnVyZSIsCiAgICAgICAgICAgICJQODAxMyI6ICJMUCDDiWNvLUdlc3QuIENvbW1lcmNlICYgVmVudGUiLAogICAgICAgICAgICAiUDgwMzgiOiAiTFAgw4ljby1HZXN0LiBUcmFuc3BvcnQgTG9naXN0aXF1ZSIsCiAgICAgICAgICAgICJQODAzOSI6ICJMUCDDiWNvLUdlc3QuIEdlc3Rpb24tQWRtaW5pc3RyYXRpb24iLAogICAgICAgICAgICAiUDg1MTAiOiAiTFAgSMO0dGVsbGVyaWUgVGVjaG5pcXVlcyBDdWxpbmFpcmVzIiwKICAgICAgICAgICAgIlA4NTIwIjogIkxQIEjDtHRlbGxlcmllIFNlcnZpY2UgJiBDb21tZXJjaWFsaXNhdGlvbiIKICAgICAgICB9CiAgICB9Cn07CgovKiogUmV0b3VybmUgbGUgYnVyZWF1IFBORSBkJ3VuIGNvZGUgZGlzY2lwbGluZSAqLwpmdW5jdGlvbiBnZXRCdXJlYXVGb3JDb2RlKGNvZGUpIHsKICAgIGZvciAoY29uc3QgW2J1cmVhdUlkLCBidXJlYXVdIG9mIE9iamVjdC5lbnRyaWVzKFBORV9CVVJFQVVYKSkgewogICAgICAgIGlmIChidXJlYXUuZGlzY2lwbGluZXNbY29kZV0pIHJldHVybiBidXJlYXVJZDsKICAgIH0KICAgIHJldHVybiBudWxsOwp9CgovKiogUmV0b3VybmUgbGUgYnVyZWF1IFBORSDDoCBwYXJ0aXIgZHUgbm9tIGRlIGRpc2NpcGxpbmUgZGFucyBEQVRBICovCmZ1bmN0aW9uIGdldEJ1cmVhdUZvclN1YmplY3Qoc3ViamVjdE5hbWUpIHsKICAgIGlmICghREFUQSB8fCAhREFUQS5zdWJqZWN0TWV0YSB8fCAhREFUQS5zdWJqZWN0TWV0YVtzdWJqZWN0TmFtZV0pIHJldHVybiBudWxsOwogICAgY29uc3QgY29kZSA9IERBVEEuc3ViamVjdE1ldGFbc3ViamVjdE5hbWVdLnBuZUNvZGUgfHwgREFUQS5zdWJqZWN0TWV0YVtzdWJqZWN0TmFtZV0uY29kZSB8fCAnJzsKICAgIGlmICghY29kZSkgcmV0dXJuIG51bGw7CiAgICByZXR1cm4gZ2V0QnVyZWF1Rm9yQ29kZShjb2RlKTsKfQoKY29uc3QgU1VCSkVDVF9NQVBQSU5HID0gewogICAgLy8gTGV0dHJlcyAmIExhbmd1ZXMKICAgICJMRVQgTU9ERVJOIjogIkZyYW7Dp2FpcyIsICJMRVQgQ0xBU1MiOiAiRnJhbsOnYWlzIiwgIkZSQU5DQUlTIjogIkZyYW7Dp2FpcyIsICJMRVRUUkVTIE1PREVSTkVTIjogIkZyYW7Dp2FpcyIsCiAgICAiTElUVC4gIE1PREVSTkVTIjogIkZyYW7Dp2FpcyIsICJMSVRULiBDTEFTU0lRVUVTIjogIkZyYW7Dp2FpcyIsCiAgICAiQU5HTEFJUyI6ICJMVjEgQW5nbGFpcyIsICJFU1BBR05PTCI6ICJMVjIgRXNwYWdub2wiLCAKICAgICJBTExFTUFORCI6ICJMVjIgQWxsZW1hbmQiLCAiSVRBTElFTiI6ICJMVjIgSXRhbGllbiIsCiAgICAiQU5HTEFJUyBMQ0UiOiAiTFYxIEFuZ2xhaXMiLCAiTEFOR1VFIEVUIExJVFRFUkFUVVJFIEFOR0xBSVNFIjogIkxWMSBBbmdsYWlzIiwKICAgICJMQVRJTiI6ICJMQ0EgTGF0aW4iLCAiR1JFQyI6ICJMQ0EgR3JlYyIsCiAgICAKICAgIC8vIFNjaWVuY2VzCiAgICAiTUFUSEVNQVRJUSI6ICJNYXRocyIsICJNQVRIRU1BVElRVUVTIjogIk1hdGhzIiwgIk1BVEhTIjogIk1hdGhzIiwKICAgICJTLiBWLiBULiI6ICJTVlQiLCAiU0MuIFZJRSBURVJSRSI6ICJTVlQiLCAiU1ZUIjogIlNWVCIsCiAgICAiUEhZLkNISU1JRSI6ICJQaHlzLUNoaSIsICJQSFlTSVFVRS1DSElNSUUiOiAiUGh5cy1DaGkiLCAiU0MuIFBIWVNJUVVFUyI6ICJQaHlzLUNoaSIsCiAgICAiVEVDSE5PTE9HSSI6ICJUZWNobm8iLCAiVEVDSE5PTE9HSUUiOiAiVGVjaG5vIiwgIlRFQ0hOTyI6ICJUZWNobm8iLAogICAgIk1BVEhTLVNDSUVOQ0VTIjogIk1hdGhzLVNjaWVuY2VzIiwKICAgIAogICAgLy8gSHVtYW5pdMOpcyAmIEFydHMKICAgICJISVNULiBHRU8uIjogIkhpc3QtR8OpbyIsICJISVNUT0lSRS1HRU9HUkFQSElFIjogIkhpc3QtR8OpbyIsICJISVNUT0lSRS1HRU8iOiAiSGlzdC1Hw6lvIiwKICAgICJBUlRTIFBMQVNUIjogIkFydHMgUGxhc3QuIiwgIkFSVFMgUExBU1RJUVVFUyI6ICJBcnRzIFBsYXN0LiIsCiAgICAiRURVIE1VU0lDQSI6ICJFZHVjYXRpb24gTXVzaWNhbGUiLCAiRURVQ0FUSU9OIE1VU0lDQUxFIjogIkVkdWNhdGlvbiBNdXNpY2FsZSIsICJNVVNJUVVFIjogIkVkdWNhdGlvbiBNdXNpY2FsZSIsCiAgICAKICAgIC8vIFNwb3J0ICYgQXV0cmVzCiAgICAiRS4gUC4gUyI6ICJFUFMiLCAiRVBTIjogIkVQUyIsICJFRC4gUEhZUy4gU1BPUlQuIjogIkVQUyIsCiAgICAiRE9DVU1FTlRBIjogIkRvY3VtZW50YXRpb24iLCAiRE9DVU1FTlRBVElPTiI6ICJEb2N1bWVudGF0aW9uIgp9OwoKLy8gLS0tIEZPTkNUSU9OIENPUlJFQ1RJVkUgUE9VUiBMRVMgTk9NUyBERSBDTEFTU0VTIC0tLQovLyAtLS0gTk9VVkVMTEUgRk9OQ1RJT04gREUgUFLDiUZJWEUgKEFOVEktQ09ORkxJVCBUU1QyUykgLS0tCmZ1bmN0aW9uIGdldExldmVsUHJlZml4KG5hbWUpIHsKICAgIGlmICghbmFtZSkgcmV0dXJuICIiOwogICAgCiAgICAvLyAxLiBTaSBsZSBub20gQ09NTUVOQ0UgcGFyIHVuIGNoaWZmcmUgKGV4OiAiMm5kZSIsICI2w6htZSIpCiAgICAvLyBPbiBwcmVuZCBqdXN0ZSBjZSBjaGlmZnJlLgogICAgaWYgKC9eWzAtOV0vLnRlc3QobmFtZSkpIHsKICAgICAgICByZXR1cm4gbmFtZS5tYXRjaCgvXlswLTldKy8pWzBdOwogICAgfQogICAgCiAgICAvLyAyLiBTaW5vbiAoZXg6ICJUU1QyUyIsICJCVFMiLCAiVVBFMkEiKQogICAgLy8gT24gcHJlbmQgbGVzIDMgcHJlbWllcnMgY2FyYWN0w6hyZXMgZW4gbWFqdXNjdWxlcy4KICAgIC8vIFRTVDJTIGRldmllbmRyYSAiVFNUIiAoZXQgbm9uIHBsdXMgIjIiKQogICAgcmV0dXJuIG5hbWUuc3Vic3RyaW5nKDAsIDMpLnRvVXBwZXJDYXNlKCk7Cn0KCi8vIC0tLSBGT05DVElPTiBNQcOOVFJFU1NFIDogR8OJTsOIUkUgVE9VUyBMRVMgUFLDiUZJWEVTIFVOSVFVRVMgLS0tCmZ1bmN0aW9uIGdldEFsbFVuaXF1ZVByZWZpeGVzKCkgewogICAgY29uc3QgdW5pcXVlUHJlZml4ZXMgPSBbXTsKICAgIGNvbnN0IHVzZWRSZWdpc3RyeSA9IHt9OwoKICAgIERBVEEuc3RydWN0dXJlLmZvckVhY2gobHZsID0+IHsKICAgICAgICAvLyAxLiBPbiBjYWxjdWxlIGxlIHByw6lmaXhlIGRlIGJhc2UgKGV4OiAiMSIpCiAgICAgICAgbGV0IHAgPSBnZXRMZXZlbFByZWZpeChsdmwubGV2ZWwpOwogICAgICAgIAogICAgICAgIC8vIDIuIFMnaWwgZXN0IGTDqWrDoCBwcmlzLCBvbiBjaGVyY2hlIHVuZSB2YXJpYW50ZSAoZXg6ICIxMiIsICIxMyIsICIxNCIpCiAgICAgICAgaWYgKHVzZWRSZWdpc3RyeVtwXSkgewogICAgICAgICAgICBsZXQgc3VmZml4ID0gMjsKICAgICAgICAgICAgbGV0IGNhbmRpZGF0ZSA9IHAgKyBzdWZmaXg7CiAgICAgICAgICAgIHdoaWxlICh1c2VkUmVnaXN0cnlbY2FuZGlkYXRlXSkgewogICAgICAgICAgICAgICAgc3VmZml4Kys7CiAgICAgICAgICAgICAgICBjYW5kaWRhdGUgPSBwICsgc3VmZml4OwogICAgICAgICAgICB9CiAgICAgICAgICAgIHAgPSBjYW5kaWRhdGU7CiAgICAgICAgfQogICAgICAgIAogICAgICAgIC8vIDMuIE9uIHZhbGlkZSBjZSBwcsOpZml4ZQogICAgICAgIHVzZWRSZWdpc3RyeVtwXSA9IHRydWU7CiAgICAgICAgdW5pcXVlUHJlZml4ZXMucHVzaChwKTsKICAgIH0pOwogICAgCiAgICAvLyBSZXRvdXJuZSBsYSBsaXN0ZSBkZXMgcHLDqWZpeGVzIGRhbnMgbCdvcmRyZSBkZXMgbml2ZWF1eAogICAgLy8gRXg6IFsiNiIsICI1IiwgIjQiLCAiMyIsICIyIiwgIjEiLCAiMTIiLCAiVCJdCiAgICByZXR1cm4gdW5pcXVlUHJlZml4ZXM7Cn0KCmxldCBEQVRBID0gbnVsbDsKbGV0IGNoYXJ0SW5zdGFuY2UgPSBudWxsOwpsZXQgc2hvd1JoQ29kZXMgPSBmYWxzZTsKCi8vID09PSBNVUxUSS1FTlRJVMOJUyBWOSA9PT0KLy8gTVVMVElfREFUQSBjb250aWVudCBsZXMgZG9ubsOpZXMgZGVzIDMgZW50aXTDqXMgaW5kw6lwZW5kYW50ZXMKbGV0IE1VTFRJX0RBVEEgPSB7CiAgICBjb2xsZWdlOiBudWxsLAogICAgbHljZWU6IG51bGwsCiAgICBseWNlZV9wcm86IG51bGwsCiAgICBwb2xlOiBudWxsCn07CmxldCBjdXJyZW50RW50aXR5ID0gJ2NvbGxlZ2UnOyAvLyBlbnRpdMOpIGFmZmljaMOpZQoKLy8gQkFTRSBQQVJUQUfDiUUgOiBlbnNlaWduYW50cyBwb3V2YW50IGludGVydmVuaXIgc3VyIHBsdXNpZXVycyBlbnRpdMOpcwovLyBTdHJ1Y3R1cmUgOiB7IGlkLCBuYW1lLCBzdWJqZWN0LCBwbmVDb2RlLCBidXJlYXUsIG9ycywgZW50aXRpZXM6IFsnY29sbGVnZScsJ2x5Y2VlJywuLi5dLCBzZXJ2aWNlczoge2NvbGxlZ2U6IGgsIGx5Y2VlOiBoLCBwb2xlOiBofSB9CmxldCBTSEFSRURfVEVBQ0hFUlMgPSBbXTsKCi8vIE5vbXMgcGVyc29ubmFsaXPDqXMgZGVzIGVudGl0w6lzIChjb25maWd1csOpcyBhdSBzZXR1cCkKbGV0IEVOVElUWV9OQU1FUyA9IHsKICAgIGNvbGxlZ2U6ICdDb2xsw6hnZScsCiAgICBseWNlZTogJ0x5Y8OpZScsCiAgICBseWNlZV9wcm86ICdMeWPDqWUgUHJvJywKICAgIHBvbGU6ICdQw7RsZSBTdXDDqXJpZXVyJwp9OwoKLy8gSWPDtG5lcyBkZXMgZW50aXTDqXMKY29uc3QgRU5USVRZX0lDT05TID0geyBjb2xsZWdlOiAn8J+PqycsIGx5Y2VlOiAn8J+Pm++4jycsIGx5Y2VlX3BybzogJ/Cfj60nLCBwb2xlOiAn8J+OkycgfTsKY29uc3QgRU5USVRZX0NPTE9SUyA9IHsKICAgIGNvbGxlZ2U6ICAgeyBiZzogJyMxNTY1QzAnLCBob3ZlcjogJyMxOTc2RDInLCBhY3RpdmU6ICcjMEQ0N0ExJywgdGV4dDogJyNmZmYnLCBzaGFkb3c6ICdyZ2JhKDIxLDEwMSwxOTIsMC41KScsICBiYW5uZXJCZzogJyNFQkYyRkInLCBiYW5uZXJCb3JkZXI6ICcjMTU2NUMwJywgYmFubmVyVGV4dDogJyMxNTY1QzAnIH0sCiAgICBseWNlZTogICAgIHsgYmc6ICcjMkU3RDMyJywgaG92ZXI6ICcjMzg4RTNDJywgYWN0aXZlOiAnIzFCNUUyMCcsIHRleHQ6ICcjZmZmJywgc2hhZG93OiAncmdiYSg0NiwxMjUsNTAsMC41KScsICAgYmFubmVyQmc6ICcjRUJGNUVDJywgYmFubmVyQm9yZGVyOiAnIzJFN0QzMicsIGJhbm5lclRleHQ6ICcjMkU3RDMyJyB9LAogICAgbHljZWVfcHJvOiB7IGJnOiAnI0U2NTEwMCcsIGhvdmVyOiAnI0Y1N0MwMCcsIGFjdGl2ZTogJyNCRjM2MEMnLCB0ZXh0OiAnI2ZmZicsIHNoYWRvdzogJ3JnYmEoMjMwLDgxLDAsMC41KScsICAgYmFubmVyQmc6ICcjRkVGM0VCJywgYmFubmVyQm9yZGVyOiAnI0U2NTEwMCcsIGJhbm5lclRleHQ6ICcjRTY1MTAwJyB9LAogICAgcG9sZTogICAgICB7IGJnOiAnIzZBMUI5QScsIGhvdmVyOiAnIzdCMUZBMicsIGFjdGl2ZTogJyM0QTE0OEMnLCB0ZXh0OiAnI2ZmZicsIHNoYWRvdzogJ3JnYmEoMTA2LDI3LDE1NCwwLjUpJywgYmFubmVyQmc6ICcjRjVFRUY4JywgYmFubmVyQm9yZGVyOiAnIzZBMUI5QScsIGJhbm5lclRleHQ6ICcjNkExQjlBJyB9Cn07CgovKiogT2J0aWVudCB0b3VzIGxlcyBlbnNlaWduYW50cyBjb25zb2xpZMOpcyAocGFydGFnw6lzICsgcHJvcHJlcyDDoCBjaGFxdWUgZW50aXTDqSkgKi8KZnVuY3Rpb24gZ2V0QWxsU2hhcmVkVGVhY2hlcnMoKSB7CiAgICByZXR1cm4gU0hBUkVEX1RFQUNIRVJTOwp9CgovKiogQWpvdXRlIG91IG1ldCDDoCBqb3VyIHVuIGVuc2VpZ25hbnQgZGFucyBsYSBiYXNlIHBhcnRhZ8OpZSAqLwpmdW5jdGlvbiB1cHNlcnRTaGFyZWRUZWFjaGVyKHRlYWNoZXIpIHsKICAgIGNvbnN0IGlkeCA9IFNIQVJFRF9URUFDSEVSUy5maW5kSW5kZXgodCA9PiB0LmlkID09PSB0ZWFjaGVyLmlkKTsKICAgIGlmIChpZHggPj0gMCkgewogICAgICAgIFNIQVJFRF9URUFDSEVSU1tpZHhdID0geyAuLi5TSEFSRURfVEVBQ0hFUlNbaWR4XSwgLi4udGVhY2hlciB9OwogICAgfSBlbHNlIHsKICAgICAgICBpZiAoIXRlYWNoZXIuaWQpIHRlYWNoZXIuaWQgPSAnVF8nICsgRGF0ZS5ub3coKSArICdfJyArIE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnNsaWNlKDIsNik7CiAgICAgICAgU0hBUkVEX1RFQUNIRVJTLnB1c2godGVhY2hlcik7CiAgICB9CiAgICBzYXZlQWxsRGF0YSgpOwp9CgovKiogUmV0b3VybmUgbGVzIGhldXJlcyBkJ3VuIGVuc2VpZ25hbnQgcGFydGFnw6kgc3VyIHVuZSBlbnRpdMOpICovCmZ1bmN0aW9uIGdldFRlYWNoZXJFbnRpdHlIb3Vycyh0ZWFjaGVySWQsIGVudGl0eUtleSkgewogICAgY29uc3QgdCA9IFNIQVJFRF9URUFDSEVSUy5maW5kKHQgPT4gdC5pZCA9PT0gdGVhY2hlcklkKTsKICAgIGlmICghdCB8fCAhdC5zZXJ2aWNlcykgcmV0dXJuIDA7CiAgICByZXR1cm4gdC5zZXJ2aWNlc1tlbnRpdHlLZXldIHx8IDA7Cn0KCi8qKiBSZXRvdXJuZSBsZSB0b3RhbCBkZXMgaGV1cmVzIGQndW4gZW5zZWlnbmFudCBwYXJ0YWfDqSBzdXIgdG91dGVzIGVudGl0w6lzICovCmZ1bmN0aW9uIGdldFRlYWNoZXJUb3RhbEhvdXJzKHRlYWNoZXJJZCkgewogICAgY29uc3QgdCA9IFNIQVJFRF9URUFDSEVSUy5maW5kKHQgPT4gdC5pZCA9PT0gdGVhY2hlcklkKTsKICAgIGlmICghdCB8fCAhdC5zZXJ2aWNlcykgcmV0dXJuIDA7CiAgICByZXR1cm4gT2JqZWN0LnZhbHVlcyh0LnNlcnZpY2VzKS5yZWR1Y2UoKGEsIGIpID0+IGEgKyAocGFyc2VGbG9hdChiKXx8MCksIDApOwp9CgovKiogQmFzY3VsZSB2ZXJzIHVuZSBlbnRpdMOpLCBzYXV2ZWdhcmRlIGxhIHByw6ljw6lkZW50ZSAqLwpmdW5jdGlvbiBzd2l0Y2hFbnRpdHkoZW50aXR5S2V5KSB7CiAgICAvLyBEw6l0ZWN0ZXIgbGEgc2VjdGlvbiBhY3R1ZWxsZW1lbnQgYWN0aXZlIEFWQU5UIGRlIGNoYW5nZXIKICAgIGNvbnN0IGFjdGl2ZVNlY3Rpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2VjdGlvbi5hY3RpdmUnKTsKICAgIGNvbnN0IGFjdGl2ZVNlY3Rpb25JZCA9IGFjdGl2ZVNlY3Rpb24gPyBhY3RpdmVTZWN0aW9uLmlkIDogbnVsbDsKICAgIGNvbnN0IGFjdGl2ZU1lbnVCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubWVudS1pdGVtLmFjdGl2ZScpOwoKICAgIC8vIFNhdXZlZ2FyZGVyIGwnw6l0YXQgZGUgbCdlbnRpdMOpIGNvdXJhbnRlIGRhbnMgTVVMVElfREFUQQogICAgaWYgKERBVEEgJiYgY3VycmVudEVudGl0eSkgewogICAgICAgIE1VTFRJX0RBVEFbY3VycmVudEVudGl0eV0gPSBEQVRBOwogICAgfQogICAgLy8gQ2hhbmdlciBkJ2VudGl0w6kKICAgIGN1cnJlbnRFbnRpdHkgPSBlbnRpdHlLZXk7CiAgICBEQVRBID0gTVVMVElfREFUQVtlbnRpdHlLZXldOwogICAgCiAgICAvLyBNZXR0cmUgw6Agam91ciBsZXMgYm91dG9ucyAoc2V1bGVtZW50IGNldXggdmlzaWJsZXMpCiAgICBbJ2NvbGxlZ2UnLCAnbHljZWUnLCAnbHljZWVfcHJvJywgJ3BvbGUnXS5mb3JFYWNoKGsgPT4gewogICAgICAgIGNvbnN0IGJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlbnRpdHktYnRuLScgKyBrKTsKICAgICAgICBpZiAoYnRuKSBidG4uY2xhc3NMaXN0LnRvZ2dsZSgnYWN0aXZlJywgayA9PT0gZW50aXR5S2V5KTsKICAgIH0pOwogICAgCiAgICAvLyBNZXR0cmUgw6Agam91ciBsZSB0aXRyZSBkZSBzZWN0aW9uIHZpc2libGUKICAgIHVwZGF0ZUVudGl0eVRpdGxlKCk7CiAgICAKICAgIC8vIFJlLXJlbmRyZSBsJ2ludGVyZmFjZSBhdmVjIGxlcyBkb25uw6llcyBkZSBsYSBub3V2ZWxsZSBlbnRpdMOpCiAgICBpbml0VUkoKTsKCiAgICAvLyBTZWN0aW9ucyBxdWkgZG9pdmVudCBzZSByYWZyYcOuY2hpciBhdXRvbWF0aXF1ZW1lbnQgbG9ycyBkdSBjaGFuZ2VtZW50IGQnZW50aXTDqQogICAgY29uc3QgYXV0b1JlZnJlc2hTZWN0aW9ucyA9IFsncmVwYXJ0aXRpb24nLCAncmVjYXAnXTsKCiAgICBpZiAoYWN0aXZlU2VjdGlvbklkICYmIGF1dG9SZWZyZXNoU2VjdGlvbnMuaW5jbHVkZXMoYWN0aXZlU2VjdGlvbklkKSkgewogICAgICAgIC8vIFJlc3RlciBzdXIgbGEgbcOqbWUgc2VjdGlvbiBldCBsYSByYWZyYcOuY2hpcgogICAgICAgIG5hdihhY3RpdmVTZWN0aW9uSWQsIGFjdGl2ZU1lbnVCdG4pOwogICAgfSBlbHNlIHsKICAgICAgICAvLyBSZXZlbmlyIGF1IGRhc2hib2FyZCBwYXIgZMOpZmF1dAogICAgICAgIG5hdignZGFzaGJvYXJkJywgbnVsbCk7CiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLm1lbnUtaXRlbScpLmZvckVhY2goZWwgPT4gZWwuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJykpOwogICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tZW51LWl0ZW0nKS5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTsKICAgIH0KICAgIAogICAgLy8gTWV0dHJlIMOgIGpvdXIgbGVzIGJhZGdlcyBkZSBkb3RhdGlvbgogICAgdXBkYXRlRW50aXR5QmFkZ2VzKCk7CiAgICAKICAgIC8vIE1hc3F1ZXIvQWZmaWNoZXIgbGUgbWVudSBFRFMgc2Vsb24gbCdlbnRpdMOpCiAgICB1cGRhdGVNZW51VmlzaWJpbGl0eShlbnRpdHlLZXkpOwogICAgCiAgICBzYXZlQWxsRGF0YSgpOwp9CgovKiogTWV0IMOgIGpvdXIgbCfDqXRhdCBkdSBtZW51IEVEUyBzZWxvbiBsJ2VudGl0w6kgKi8KZnVuY3Rpb24gdXBkYXRlTWVudVZpc2liaWxpdHkoZW50aXR5S2V5KSB7CiAgICAvLyAtLS0gMS4gVsOJUklGSUNBVElPTiBERSBMQSBTVFJVQ1RVUkUgLS0tCiAgICAvLyBMYSBzdHJ1Y3R1cmUgZXN0ICJ2aWRlIiBzaSBhdWN1biBuaXZlYXUgbidhIGRlIGRpdmlzaW9ucyA+IDAKICAgIGNvbnN0IGhhc1N0cnVjdHVyZSA9IERBVEEgJiYgREFUQS5zdHJ1Y3R1cmUgJiYgREFUQS5zdHJ1Y3R1cmUuc29tZShsID0+IChsLmRpdiB8fCAwKSA+IDApOwoKICAgIC8vIE1lbnVzIHF1aSBuw6ljZXNzaXRlbnQgdW5lIHN0cnVjdHVyZSBub24gdmlkZSAodG91dCBjZSBxdWkgZXN0ICJlbiBkZXNzb3VzIiBkZSBTdHJ1Y3R1cmUpCiAgICBjb25zdCBkZXBlbmRlbnRNZW51cyA9IFsnbWVudS1tYXRpZXJlcycsICdtZW51LWVkcycsICdtZW51LXByb2Zlc3NldXJzJywgJ21lbnUtdmVudGlsYXRpb24nLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJ21lbnUtcGlsb3RhZ2UnLCAnbWVudS1lcXVpcGVzJywgJ21lbnUtcmVwYXJ0aXRpb24nLCAnbWVudS1yZWNhcCddOwoKICAgIGRlcGVuZGVudE1lbnVzLmZvckVhY2goaWQgPT4gewogICAgICAgIGNvbnN0IGJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKTsKICAgICAgICBpZiAoIWJ0bikgcmV0dXJuOwogICAgICAgIGlmICghaGFzU3RydWN0dXJlKSB7CiAgICAgICAgICAgIGJ0bi5jbGFzc0xpc3QuYWRkKCdkaXNhYmxlZCcpOwogICAgICAgICAgICBidG4uc3R5bGUucG9pbnRlckV2ZW50cyA9ICdub25lJzsKICAgICAgICAgICAgYnRuLnRpdGxlID0gJ0TDqWZpbmlzc2V6IGRcJ2Fib3JkIGxhIHN0cnVjdHVyZSAobml2ZWF1eCAmIGNsYXNzZXMpIGRhbnMgbFwnb25nbGV0IFN0cnVjdHVyZSc7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgYnRuLmNsYXNzTGlzdC5yZW1vdmUoJ2Rpc2FibGVkJyk7CiAgICAgICAgICAgIGJ0bi5zdHlsZS5wb2ludGVyRXZlbnRzID0gJyc7CiAgICAgICAgICAgIGJ0bi50aXRsZSA9ICcnOwogICAgICAgIH0KICAgIH0pOwoKICAgIC8vIC0tLSAyLiBHRVNUSU9OIFNQw4lDSUZJUVVFIEVEUyAoTHljw6llIHVuaXF1ZW1lbnQpIC0tLQogICAgY29uc3QgbWVudUVkcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtZW51LWVkcycpOwogICAgaWYgKG1lbnVFZHMgJiYgaGFzU3RydWN0dXJlKSB7CiAgICAgICAgY29uc3QgaXNMeWNlZSA9IChlbnRpdHlLZXkgPT09ICdseWNlZScpOwogICAgICAgIG1lbnVFZHMuY2xhc3NMaXN0LnRvZ2dsZSgnZGlzYWJsZWQnLCAhaXNMeWNlZSk7CiAgICAgICAgbWVudUVkcy5zdHlsZS5wb2ludGVyRXZlbnRzID0gaXNMeWNlZSA/ICcnIDogJ25vbmUnOwogICAgICAgIG1lbnVFZHMuc3R5bGUub3BhY2l0eSA9IGlzTHljZWUgPyAnJyA6ICcwLjM1JzsKICAgICAgICBtZW51RWRzLnRpdGxlID0gaXNMeWNlZSA/ICcnIDogJ0Rpc3BvbmlibGUgdW5pcXVlbWVudCBwb3VyIGxlIEx5Y8OpZSc7CiAgICB9Cn0KCi8qKiBNZXQgw6Agam91ciBsZXMgYmFkZ2VzIGRlIGRvdGF0aW9uIChoKSBkYW5zIGxlIHPDqWxlY3RldXIgKi8KZnVuY3Rpb24gdXBkYXRlRW50aXR5QmFkZ2VzKCkgewogICAgWydjb2xsZWdlJywgJ2x5Y2VlJywgJ2x5Y2VlX3BybycsICdwb2xlJ10uZm9yRWFjaChrID0+IHsKICAgICAgICBjb25zdCBiYWRnZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlbnRpdHktYmFkZ2UtJyArIGspOwogICAgICAgIGlmICghYmFkZ2UpIHJldHVybjsKICAgICAgICBjb25zdCBkID0gTVVMVElfREFUQVtrXTsKICAgICAgICBpZiAoIWQpIHsgYmFkZ2UudGV4dENvbnRlbnQgPSAn4oCTIGgnOyByZXR1cm47IH0KICAgICAgICAvLyBDYWxjdWwgcmFwaWRlIGRlIGxhIGRvdGF0aW9uCiAgICAgICAgbGV0IHRvdGFsID0gMDsKICAgICAgICBpZiAoZC5jb25maWcgJiYgZC5jb25maWcudG90YWwpIHsKICAgICAgICAgICAgdG90YWwgPSBkLmNvbmZpZy50b3RhbDsKICAgICAgICB9CiAgICAgICAgYmFkZ2UudGV4dENvbnRlbnQgPSB0b3RhbCA+IDAgPyB0b3RhbCArICcgaCcgOiAn4oCTIGgnOwogICAgfSk7Cn0KCi8qKiBBZmZpY2hlIGxlIG5vbSBkZSBsJ2VudGl0w6kgZGFucyBsZSBoZWFkZXIgZHUgY29udGVudSAqLwpmdW5jdGlvbiB1cGRhdGVFbnRpdHlUaXRsZSgpIHsKICAgIGNvbnN0IGVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VudGl0eS10aXRsZS1oZWFkZXInKTsKICAgIGNvbnN0IGJhbm5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlbnRpdHktaGVhZGVyLWJhbm5lcicpOwogICAgaWYgKGVsKSB7CiAgICAgICAgY29uc3QgaWNvbiA9IEVOVElUWV9JQ09OU1tjdXJyZW50RW50aXR5XSB8fCAnJzsKICAgICAgICBjb25zdCBuYW1lID0gRU5USVRZX05BTUVTW2N1cnJlbnRFbnRpdHldIHx8IGN1cnJlbnRFbnRpdHk7CiAgICAgICAgY29uc3QgYyA9IEVOVElUWV9DT0xPUlNbY3VycmVudEVudGl0eV0gfHwge307CiAgICAgICAgZWwudGV4dENvbnRlbnQgPSBpY29uICsgJyAnICsgbmFtZTsKICAgICAgICBlbC5zdHlsZS5jb2xvciA9IGMuYmFubmVyVGV4dCB8fCAnIzJjM2U1MCc7CiAgICAgICAgaWYgKGJhbm5lcikgewogICAgICAgICAgICBiYW5uZXIuc3R5bGUuYm9yZGVyTGVmdENvbG9yID0gYy5iYW5uZXJCb3JkZXIgfHwgJyNjY2MnOwogICAgICAgICAgICBiYW5uZXIuc3R5bGUuYmFja2dyb3VuZCA9IGMuYmFubmVyQmcgfHwgJ3doaXRlJzsKICAgICAgICB9CiAgICB9Cn0KCndpbmRvdy5vbmxvYWQgPSBmdW5jdGlvbigpIHsKICAgIC8vIFRlbnRhdGl2ZSBkZSByw6ljdXDDqXJhdGlvbiBkZSBsYSBzYXV2ZWdhcmRlIG11bHRpLWVudGl0w6lzCiAgICBpZihsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnREhHX011bHRpRGF0YV9WOScpKSB7CiAgICAgICAgdHJ5IHsgCiAgICAgICAgICAgIGNvbnN0IHNhdmVkID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnREhHX011bHRpRGF0YV9WOScpKTsKICAgICAgICAgICAgTVVMVElfREFUQSA9IHNhdmVkLmVudGl0aWVzIHx8IE1VTFRJX0RBVEE7CiAgICAgICAgICAgIEVOVElUWV9OQU1FUyA9IHNhdmVkLm5hbWVzIHx8IEVOVElUWV9OQU1FUzsKICAgICAgICAgICAgY3VycmVudEVudGl0eSA9IHNhdmVkLmN1cnJlbnRFbnRpdHkgfHwgJ2NvbGxlZ2UnOwogICAgICAgICAgICBTSEFSRURfVEVBQ0hFUlMgPSBzYXZlZC5zaGFyZWRUZWFjaGVycyB8fCBbXTsKICAgICAgICB9IGNhdGNoKGUpIHsgTVVMVElfREFUQSA9IHsgY29sbGVnZTogbnVsbCwgbHljZWU6IG51bGwsIGx5Y2VlX3BybzogbnVsbCwgcG9sZTogbnVsbCB9OyB9CiAgICB9IGVsc2UgaWYobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ0RIR19EYXRhX1Y5JykpIHsKICAgICAgICAvLyBNaWdyYXRpb24gZGVwdWlzIHVuZSBhbmNpZW5uZSBzYXV2ZWdhcmRlIG1vbm8tZW50aXTDqQogICAgICAgIHRyeSB7IAogICAgICAgICAgICBjb25zdCBvbGREYXRhID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnREhHX0RhdGFfVjknKSk7CiAgICAgICAgICAgIC8vIETDqXRlcm1pbmVyIHF1ZWxsZSBlbnRpdMOpIGNvcnJlc3BvbmQgw6AgbCdhbmNpZW5uZSBkb25uw6llCiAgICAgICAgICAgIGlmIChvbGREYXRhLnR5cGUgPT09ICdjb2xsZWdlJykgewogICAgICAgICAgICAgICAgTVVMVElfREFUQS5jb2xsZWdlID0gb2xkRGF0YTsKICAgICAgICAgICAgfSBlbHNlIGlmIChvbGREYXRhLnR5cGUgPT09ICdsZ3QnIHx8IG9sZERhdGEudHlwZSA9PT0gJ2xwJykgewogICAgICAgICAgICAgICAgTVVMVElfREFUQS5seWNlZSA9IG9sZERhdGE7CiAgICAgICAgICAgIH0KICAgICAgICB9IGNhdGNoKGUpIHt9CiAgICB9CiAgICAKICAgIC8vIFbDqXJpZmllciBzaSBhdSBtb2lucyB1bmUgZW50aXTDqSBlc3QgaW5pdGlhbGlzw6llCiAgICBjb25zdCBoYXNBbnkgPSBNVUxUSV9EQVRBLmNvbGxlZ2UgfHwgTVVMVElfREFUQS5seWNlZSB8fCBNVUxUSV9EQVRBLmx5Y2VlX3BybyB8fCBNVUxUSV9EQVRBLnBvbGU7CiAgICAKICAgIGlmKGhhc0FueSkgewogICAgICAgIC8vIENoYXJnZXIgbCdlbnRpdMOpIGNvdXJhbnRlCiAgICAgICAgREFUQSA9IE1VTFRJX0RBVEFbY3VycmVudEVudGl0eV07CiAgICAgICAgCiAgICAgICAgLy8gU2kgbCdlbnRpdMOpIGNvdXJhbnRlIGVzdCB2aWRlLCBwcmVuZHJlIGxhIHByZW1pw6hyZSBkaXNwb25pYmxlCiAgICAgICAgaWYgKCFEQVRBKSB7CiAgICAgICAgICAgIGZvciAoY29uc3QgayBvZiBbJ2NvbGxlZ2UnLCAnbHljZWUnLCAnbHljZWVfcHJvJywgJ3BvbGUnXSkgewogICAgICAgICAgICAgICAgaWYgKE1VTFRJX0RBVEFba10pIHsgY3VycmVudEVudGl0eSA9IGs7IERBVEEgPSBNVUxUSV9EQVRBW2tdOyBicmVhazsgfQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIAogICAgICAgIC8vIFbDqXJpZmljYXRpb25zIGRlIGNvbXBhdGliaWxpdMOpCiAgICAgICAgaWYoIURBVEEuc3ViamVjdE1ldGEpIERBVEEuc3ViamVjdE1ldGEgPSB7fTsKICAgICAgICBpZighREFUQS5hc3NpZ25tZW50cykgREFUQS5hc3NpZ25tZW50cyA9IHt9OwogICAgICAgIERBVEEuc3ViamVjdHMuZm9yRWFjaChzID0+IHsKICAgICAgICAgICAgaWYoIURBVEEuc3ViamVjdE1ldGFbc10pIERBVEEuc3ViamVjdE1ldGFbc10gPSB7fTsKICAgICAgICAgICAgaWYoIURBVEEuc3ViamVjdE1ldGFbc10ubW9kZSkgewogICAgICAgICAgICAgICAgREFUQS5zdWJqZWN0TWV0YVtzXS5tb2RlID0gJ2Rpdic7CiAgICAgICAgICAgICAgICBEQVRBLnN1YmplY3RNZXRhW3NdLmxldmVscyA9IGdldERlZmF1bHRBY3RpdmVMZXZlbHMocyk7CiAgICAgICAgICAgICAgICBEQVRBLnN1YmplY3RNZXRhW3NdLmV0YWIgPSAwOwogICAgICAgICAgICAgICAgREFUQS5zdWJqZWN0TWV0YVtzXS52b2xMZXZlbCA9IHt9OwogICAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgY2hlY2tBbmRGaXhEYXRhKCk7CiAgICAgICAgCiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NldHVwLW92ZXJsYXknKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOwogICAgICAgIGluaXRZZWFyU2VsZWN0b3IoKTsKICAgICAgICBpbml0VUkoKTsKICAgICAgICAKICAgICAgICAvLyBNZXR0cmUgw6Agam91ciBsZXMgYmFkZ2VzIGV0IGJvdXRvbnMgZCdlbnRpdMOpCiAgICAgICAgWydjb2xsZWdlJywgJ2x5Y2VlJywgJ2x5Y2VlX3BybycsICdwb2xlJ10uZm9yRWFjaChrID0+IHsKICAgICAgICAgICAgY29uc3QgYnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VudGl0eS1idG4tJyArIGspOwogICAgICAgICAgICBpZiAoYnRuKSB7CiAgICAgICAgICAgICAgICBidG4uY2xhc3NMaXN0LnRvZ2dsZSgnYWN0aXZlJywgayA9PT0gY3VycmVudEVudGl0eSk7CiAgICAgICAgICAgICAgICAvLyBNYXNxdWVyIGxlcyBib3V0b25zIGRlcyBlbnRpdMOpcyBub24gaW5pdGlhbGlzw6llcwogICAgICAgICAgICAgICAgYnRuLnN0eWxlLmRpc3BsYXkgPSBNVUxUSV9EQVRBW2tdID8gJycgOiAnbm9uZSc7CiAgICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgICB1cGRhdGVFbnRpdHlCYWRnZXMoKTsKICAgICAgICB1cGRhdGVFbnRpdHlUaXRsZSgpOwogICAgICAgIC8vIE1hc3F1ZXIgRURTIHBvdXIgQ29sbMOoZ2UgZXQgUMO0bGUgYXUgZMOpbWFycmFnZQogICAgICAgIHVwZGF0ZU1lbnVWaXNpYmlsaXR5KGN1cnJlbnRFbnRpdHkpOwogICAgICAgIC8vIE1pZ3JhdGlvbiBkZXMgZW5zZWlnbmFudHMgdmVycyBsYSBiYXNlIHBhcnRhZ8OpZQogICAgICAgIG1pZ3JhdGVUZWFjaGVyc1RvU2hhcmVkKCk7CiAgICB9IGVsc2UgewogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZXR1cC1vdmVybGF5Jykuc3R5bGUuZGlzcGxheSA9ICdmbGV4JzsKICAgIH0KfTsKCmZ1bmN0aW9uIGdldERlZmF1bHRBY3RpdmVMZXZlbHMocykgewogICAgaWYoIURBVEEgfHwgIURBVEEuc3RydWN0dXJlKSByZXR1cm4gW107CiAgICBsZXQgYWxsID0gREFUQS5zdHJ1Y3R1cmUubWFwKGwgPT4gbC5sZXZlbCk7CiAgICBpZihzLmluY2x1ZGVzKCJUZWNobm8iKSB8fCBzLmluY2x1ZGVzKCJFc3BhZ25vbCIpIHx8IHMuaW5jbHVkZXMoIkxWMiIpKSB7CiAgICAgICAgcmV0dXJuIGFsbC5maWx0ZXIobCA9PiAhbC5pbmNsdWRlcygiNiIpKTsKICAgIH0KICAgIGlmKHMuaW5jbHVkZXMoIlBoaWxvc29waGllIikpIHsKICAgICAgICByZXR1cm4gYWxsLmZpbHRlcihsID0+IGwudG9Mb3dlckNhc2UoKS5pbmNsdWRlcygidGVybSIpKTsKICAgIH0KICAgIHJldHVybiBhbGw7Cn0KCi8qKiBBY3RpdmUvZMOpc2FjdGl2ZSB1bmUgY2FydGUgZW50aXTDqSBkYW5zIGxlIHNldHVwICovCmZ1bmN0aW9uIHRvZ2dsZUVudGl0eUNhcmQoa2V5KSB7CiAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICBjb25zdCBjaGsgID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Noay0nICsga2V5KTsKICAgICAgICBjb25zdCBjYXJkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NhcmQtJyArIGtleSk7CiAgICAgICAgY29uc3QgbGJsICA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0b2dnbGUtJyArIGtleSk7CiAgICAgICAgaWYgKCFjaGsgfHwgIWNhcmQpIHJldHVybjsKICAgICAgICBjb25zdCBhY3RpdmUgPSBjaGsuY2hlY2tlZDsKICAgICAgICBjYXJkLnN0eWxlLm9wYWNpdHkgICAgICAgPSBhY3RpdmUgPyAnMScgICA6ICcwLjM1JzsKICAgICAgICBjYXJkLnN0eWxlLnBvaW50ZXJFdmVudHMgPSBhY3RpdmUgPyAnJyAgICA6ICdub25lJzsKICAgICAgICBpZiAobGJsKSBsYmwuc3R5bGUub3BhY2l0eSA9IGFjdGl2ZSA/ICcxJyA6ICcwLjYnOwogICAgICAgIC8vIFJlY2FsY3VsZXIgbGUgbm9tYnJlIGRlIGNvbG9ubmVzCiAgICAgICAgY29uc3QgbiA9IFsnY29sbGVnZScsJ2x5Y2VlJywnbHljZWVfcHJvJywncG9sZSddLmZpbHRlcihrID0+IHsKICAgICAgICAgICAgY29uc3QgYyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjaGstJyArIGspOwogICAgICAgICAgICByZXR1cm4gYyAmJiBjLmNoZWNrZWQ7CiAgICAgICAgfSkubGVuZ3RoOwogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZXR1cC1jYXJkcy1jb250YWluZXInKS5zdHlsZS5ncmlkVGVtcGxhdGVDb2x1bW5zID0gYHJlcGVhdCgke01hdGgubWF4KDEsbil9LDFmcilgOwogICAgfSwgMTApOwp9CgovKiogSW5pdGlhbGlzZSBsZXMgZW50aXTDqXMgc8OpbGVjdGlvbm7DqWVzIGRlcHVpcyBsJ8OpY3JhbiBkZSBzZXR1cCAqLwpmdW5jdGlvbiBpbml0TXVsdGlEYXRhKCkgewogICAgY29uc3QgYWxsS2V5cyA9IFsnY29sbGVnZScsICdseWNlZScsICdseWNlZV9wcm8nLCAncG9sZSddOwogICAgY29uc3QgYWN0aXZlS2V5cyA9IGFsbEtleXMuZmlsdGVyKGsgPT4gewogICAgICAgIGNvbnN0IGNoayA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjaGstJyArIGspOwogICAgICAgIHJldHVybiBjaGsgJiYgY2hrLmNoZWNrZWQ7CiAgICB9KTsKCiAgICBpZiAoYWN0aXZlS2V5cy5sZW5ndGggPT09IDApIHsKICAgICAgICBhbGVydCgn4pqg77iPIFPDqWxlY3Rpb25uZXogYXUgbW9pbnMgdW5lIGVudGl0w6kgcG91ciBkw6ltYXJyZXIuJyk7CiAgICAgICAgcmV0dXJuOwogICAgfQoKICAgIGNvbnN0IHR5cGVFbCA9IHsKICAgICAgICBjb2xsZWdlOiAgICdzZXR1cC1jb2xsZWdlLXR5cGUnLAogICAgICAgIGx5Y2VlOiAgICAgJ3NldHVwLWx5Y2VlLXR5cGUnLAogICAgICAgIGx5Y2VlX3BybzogJ3NldHVwLWx5Y2VlLXByby10eXBlJywKICAgICAgICBwb2xlOiAgICAgICdzZXR1cC1wb2xlLXR5cGUnCiAgICB9OwogICAgY29uc3QgbmFtZUVsID0gewogICAgICAgIGNvbGxlZ2U6ICAgWydzZXR1cC1jb2xsZWdlLW5hbWUnLCAgICdDb2xsw6hnZSddLAogICAgICAgIGx5Y2VlOiAgICAgWydzZXR1cC1seWNlZS1uYW1lJywgICAgICdMeWPDqWUnXSwKICAgICAgICBseWNlZV9wcm86IFsnc2V0dXAtbHljZWUtcHJvLW5hbWUnLCAnTHljw6llIFBybyddLAogICAgICAgIHBvbGU6ICAgICAgWydzZXR1cC1wb2xlLW5hbWUnLCAgICAgICdQw7RsZSBTdXDDqXJpZXVyJ10KICAgIH07CiAgICBjb25zdCBpY29uTWFwID0geyBjb2xsZWdlOifwn4+rJywgbHljZWU6J/Cfj5vvuI8nLCBseWNlZV9wcm86J/Cfj60nLCBwb2xlOifwn46TJyB9OwoKICAgIGFsbEtleXMuZm9yRWFjaChrID0+IHsKICAgICAgICBpZiAoYWN0aXZlS2V5cy5pbmNsdWRlcyhrKSkgewogICAgICAgICAgICBFTlRJVFlfTkFNRVNba10gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChuYW1lRWxba11bMF0pLnZhbHVlLnRyaW0oKSB8fCBuYW1lRWxba11bMV07CiAgICAgICAgICAgIE1VTFRJX0RBVEFba10gICA9IGNyZWF0ZUVudGl0eURhdGEoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodHlwZUVsW2tdKS52YWx1ZSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgTVVMVElfREFUQVtrXSAgID0gbnVsbDsKICAgICAgICB9CiAgICAgICAgLy8gTWV0dHJlIMOgIGpvdXIgbGliZWxsw6kgYm91dG9uICsgdmlzaWJpbGl0w6kgc2lkZWJhcgogICAgICAgIGNvbnN0IGJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlbnRpdHktYnRuLScgKyBrKTsKICAgICAgICBpZiAoYnRuKSB7CiAgICAgICAgICAgIGJ0bi5pbm5lckhUTUwgICAgID0gYCR7aWNvbk1hcFtrXX0gJHtFTlRJVFlfTkFNRVNba119PHNwYW4gY2xhc3M9ImVudGl0eS1iYWRnZSIgaWQ9ImVudGl0eS1iYWRnZS0ke2t9Ij7igJMgaDwvc3Bhbj5gOwogICAgICAgICAgICBidG4uc3R5bGUuZGlzcGxheSA9IGFjdGl2ZUtleXMuaW5jbHVkZXMoaykgPyAnJyA6ICdub25lJzsKICAgICAgICB9CiAgICB9KTsKCiAgICBjdXJyZW50RW50aXR5ID0gYWN0aXZlS2V5c1swXTsKICAgIERBVEEgPSBNVUxUSV9EQVRBW2N1cnJlbnRFbnRpdHldOwoKICAgIHNhdmVBbGxEYXRhKCk7CiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2V0dXAtb3ZlcmxheScpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7CgogICAgYWxsS2V5cy5mb3JFYWNoKGsgPT4gewogICAgICAgIGNvbnN0IGJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlbnRpdHktYnRuLScgKyBrKTsKICAgICAgICBpZiAoYnRuKSBidG4uY2xhc3NMaXN0LnRvZ2dsZSgnYWN0aXZlJywgayA9PT0gY3VycmVudEVudGl0eSk7CiAgICB9KTsKCiAgICB1cGRhdGVFbnRpdHlCYWRnZXMoKTsKICAgIHVwZGF0ZUVudGl0eVRpdGxlKCk7CiAgICB1cGRhdGVNZW51VmlzaWJpbGl0eShjdXJyZW50RW50aXR5KTsKICAgIGluaXRZZWFyU2VsZWN0b3IoKTsKICAgIGluaXRVSSgpOwp9CgovKiogQ3LDqWUgdW4gb2JqZXQgREFUQSBwb3VyIHVuZSBlbnRpdMOpIMOgIHBhcnRpciBkJ3VuIHR5cGUgZGUgcHJlc2V0ICovCmZ1bmN0aW9uIGNyZWF0ZUVudGl0eURhdGEodHlwZSkgewogICAgY29uc3QgcHJlc2V0ID0gUFJFU0VUU1t0eXBlXTsKICAgIGNvbnN0IGN1cnJlbnRZZWFyID0gbmV3IERhdGUoKS5nZXRGdWxsWWVhcigpOwogICAgY29uc3QgZW50aXR5RGF0YSA9IHsKICAgICAgICB0eXBlOiB0eXBlLAogICAgICAgIGNvbmZpZzogeyB5ZWFyOiBjdXJyZW50WWVhciwgdG90YWw6IDAsIGhwOiAwLCBoc2E6IDAgfSwKICAgICAgICBzdHJ1Y3R1cmU6IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkocHJlc2V0LmxldmVscykpLAogICAgICAgIGFkZGl0aW9uYWxNZWFuczogeyB0b3RhbDogMCB9LAogICAgICAgIHN1YmplY3RzOiBPYmplY3Qua2V5cyhwcmVzZXQuc3ViamVjdHMpLAogICAgICAgIHN1YmplY3RNZXRhOiB7fSwKICAgICAgICBsZXZlbENvbmZpZzoge30sCiAgICAgICAgY2xhc3NPdmVycmlkZXM6IHt9LAogICAgICAgIGNsYXNzTmFtZXM6IHt9LCAKICAgICAgICB0ZWFjaGVyczogW10sCiAgICAgICAgcmVjYXBDb21tZW50czoge30sCiAgICAgICAgYXNzaWdubWVudHM6IHt9LAogICAgICAgIGVkczogeyBwcmVtaWVyZTogW10sIHRlcm1pbmFsZTogW10gfQogICAgfTsKICAgIAogICAgZW50aXR5RGF0YS5zdWJqZWN0cy5mb3JFYWNoKHMgPT4gewogICAgICAgIGVudGl0eURhdGEuc3ViamVjdE1ldGFbc10gPSB7CiAgICAgICAgICAgIG1vZGU6ICdkaXYnLAogICAgICAgICAgICBsZXZlbHM6IGVudGl0eURhdGEuc3RydWN0dXJlLm1hcChsID0+IGwubGV2ZWwpLAogICAgICAgICAgICBldGFiOiAwLAogICAgICAgICAgICB2b2xMZXZlbDoge30sCiAgICAgICAgICAgIHBhcmVudDogIiIsCiAgICAgICAgICAgIGNvZGU6ICIiCiAgICAgICAgfTsKICAgICAgICBpZihzLmluY2x1ZGVzKCJMYXRpbiIpIHx8IHMuaW5jbHVkZXMoIkxDQSIpKSBlbnRpdHlEYXRhLnN1YmplY3RNZXRhW3NdLnBhcmVudCA9ICJGcmFuw6dhaXMiOwogICAgICAgIGlmKHMgPT09ICJVTlNTIikgewogICAgICAgICAgICBlbnRpdHlEYXRhLnN1YmplY3RNZXRhW3NdLm1vZGUgPSAnZXRhYic7CiAgICAgICAgICAgIGVudGl0eURhdGEuc3ViamVjdE1ldGFbc10uZXRhYiA9IDM7CiAgICAgICAgICAgIGVudGl0eURhdGEuc3ViamVjdE1ldGFbc10ucGFyZW50ID0gIkVQUyI7CiAgICAgICAgfQogICAgfSk7CgogICAgZW50aXR5RGF0YS5zdHJ1Y3R1cmUuZm9yRWFjaChsdmwgPT4gewogICAgICAgIGVudGl0eURhdGEubGV2ZWxDb25maWdbbHZsLmxldmVsXSA9IHt9OwogICAgICAgIGVudGl0eURhdGEuc3ViamVjdHMuZm9yRWFjaChzID0+IHsKICAgICAgICAgICAgY29uc3QgaHJzID0gcHJlc2V0LnN1YmplY3RzW3NdPy5bbHZsLmxldmVsXSB8fCAwOwogICAgICAgICAgICBlbnRpdHlEYXRhLmxldmVsQ29uZmlnW2x2bC5sZXZlbF1bc10gPSB7YmFzZTogaHJzLCBtYXJnZTogMCwgY29lZjogMS4wfTsKICAgICAgICB9KTsKICAgIH0pOwogICAgCiAgICByZXR1cm4gZW50aXR5RGF0YTsKfQoKZnVuY3Rpb24gaW5pdERhdGEodHlwZSkgewogICAgREFUQSA9IGNyZWF0ZUVudGl0eURhdGEodHlwZSk7CiAgICBNVUxUSV9EQVRBW2N1cnJlbnRFbnRpdHldID0gREFUQTsKICAgIHNhdmVBbGxEYXRhKCk7CiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2V0dXAtb3ZlcmxheScpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7CiAgICBpbml0WWVhclNlbGVjdG9yKCk7CiAgICBpbml0VUkoKTsKfQoKZnVuY3Rpb24gY2hhbmdlRXBsZVR5cGUoKSB7CiAgICBpZihjb25maXJtKCLimqDvuI8gQXR0ZW50aW9uIDogQ2VsYSB2YSByw6lpbml0aWFsaXNlciBsJ2VudGl0w6kgXCIiICsgKEVOVElUWV9OQU1FU1tjdXJyZW50RW50aXR5XXx8Y3VycmVudEVudGl0eSkgKyAiXCIuXG5cbkF2ZXotdm91cyBwZW5zw6kgw6Agc2F1dmVnYXJkZXIgP1xuXG5Db25maXJtZXIgbGEgcsOpaW5pdGlhbGlzYXRpb24gPyIpKSB7CiAgICAgICAgTVVMVElfREFUQVtjdXJyZW50RW50aXR5XSA9IG51bGw7CiAgICAgICAgREFUQSA9IG51bGw7CiAgICAgICAgc2F2ZUFsbERhdGEoKTsKICAgICAgICBsb2NhdGlvbi5yZWxvYWQoKTsKICAgIH0KfQoKZnVuY3Rpb24gcmVzZXRBbGxFbnRpdGllcygpIHsKICAgIGlmKGNvbmZpcm0oIuKaoO+4jyBBdHRlbnRpb24gOiBDZWxhIHZhIHLDqWluaXRpYWxpc2VyIFRPVVRFUyBsZXMgZW50aXTDqXMgKENvbGzDqGdlLCBMeWPDqWUsIEx5Y8OpZSBQcm8sIFDDtGxlIFN1cMOpcmlldXIpLlxuXG5Ub3V0ZXMgdm9zIGRvbm7DqWVzIHNlcm9udCBwZXJkdWVzICFcblxuQ29uZmlybWVyIGxhIHLDqWluaXRpYWxpc2F0aW9uIHRvdGFsZSA/IikpIHsKICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgnREhHX011bHRpRGF0YV9WOScpOwogICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCdESEdfRGF0YV9WOScpOwogICAgICAgIGxvY2F0aW9uLnJlbG9hZCgpOwogICAgfQp9CgpmdW5jdGlvbiBpbml0WWVhclNlbGVjdG9yKCkgewogICAgY29uc3Qgc2VsZWN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Rhc2gteWVhcicpOwogICAgY29uc3QgeU5vdyA9IG5ldyBEYXRlKCkuZ2V0RnVsbFllYXIoKTsKICAgIGNvbnN0IHNhdmVkID0gREFUQS5jb25maWcueWVhciB8fCB5Tm93OwogICAgc2VsZWN0LmlubmVySFRNTCA9ICcnOwogICAgZm9yKGxldCB5ID0gc2F2ZWQgLSAxOyB5IDw9IHNhdmVkICsgNTsgeSsrKSB7IGxldCBvcHQgPSBuZXcgT3B0aW9uKHksIHkpOyBpZih5ID09IHNhdmVkKSBvcHQuc2VsZWN0ZWQgPSB0cnVlOyBzZWxlY3QuYXBwZW5kQ2hpbGQob3B0KTsgfQp9CgpmdW5jdGlvbiBpbml0VUkoKSB7CiAgICB1cGRhdGVFbnRpdHlUaXRsZSgpOwogICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2dsb2JhbC1kaGctZGlzcGxheScpLmlubmVyVGV4dCA9IERBVEEuY29uZmlnLnRvdGFsOwogICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2dsb2JhbC1ocCcpLnZhbHVlID0gREFUQS5jb25maWcuaHA7CiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ2xvYmFsLWhzYScpLnZhbHVlID0gREFUQS5jb25maWcuaHNhOwogICAgaWYoIURBVEEuY2xhc3NOYW1lcykgREFUQS5jbGFzc05hbWVzID0ge307IAogICAgcmVuZGVyU3RydWN0dXJlKCk7IHJlbmRlckdyaWRTeXN0ZW0oKTsgcmVuZGVyUkgoKTsgY2FsY3VsYXRlUmVjYXAoKTsKICAgIHJlbmRlclN1YmplY3RzQ29uZmlnKCk7Cn0KCmZ1bmN0aW9uIG5hdihpZCwgYnRuKSB7CiAgICAvLyBTeW5jaHJvbmlzZXIgbCfDqXRhdCBjb3VyYW50IGF2YW50IGRlIHJlLXJlbmRyZSAoaW1wb3J0YW50IHBvdXIgcmVwYXJ0aXRpb24vcmVjYXAgbXVsdGktZW50aXTDqXMpCiAgICBpZiAoREFUQSAmJiBjdXJyZW50RW50aXR5KSBNVUxUSV9EQVRBW2N1cnJlbnRFbnRpdHldID0gREFUQTsKCiAgICAvLyBCbG9jYWdlIHNpIHN0cnVjdHVyZSB2aWRlICgwIGNsYXNzZXMpIHBvdXIgbGVzIG1lbnVzIGTDqXBlbmRhbnRzCiAgICBjb25zdCBoYXNTdHJ1Y3R1cmUgPSBEQVRBICYmIERBVEEuc3RydWN0dXJlICYmIERBVEEuc3RydWN0dXJlLnNvbWUobCA9PiAobC5kaXYgfHwgMCkgPiAwKTsKICAgIGNvbnN0IHN0cnVjdHVyZURlcGVuZGVudFNlY3Rpb25zID0gWydtYXRpZXJlcycsJ2VkcycsJ3Byb2Zlc3NldXJzJywndmVudGlsYXRpb24nLCdwaWxvdGFnZScsJ2VxdWlwZXMnLCdyZXBhcnRpdGlvbicsJ3JlY2FwJ107CiAgICBpZiAoIWhhc1N0cnVjdHVyZSAmJiBzdHJ1Y3R1cmVEZXBlbmRlbnRTZWN0aW9ucy5pbmNsdWRlcyhpZCkpIHsKICAgICAgICBhbGVydCgn4pqg77iPIFZldWlsbGV6IGRcJ2Fib3JkIGTDqWZpbmlyIGxhIHN0cnVjdHVyZSAobml2ZWF1eCAmIGNsYXNzZXMpIGRhbnMgbFwnb25nbGV0ICJTdHJ1Y3R1cmUiLicpOwogICAgICAgIHJldHVybjsKICAgIH0KCiAgICAvLyBCbG9jYWdlIHNpIEVEUyBjbGlxdcOpIGhvcnMgZW50aXTDqSBMeWPDqWUKICAgIGlmKGlkID09PSAnZWRzJyAmJiBjdXJyZW50RW50aXR5ICE9PSAnbHljZWUnKSB7CiAgICAgICAgYWxlcnQoIkNlIG1vZHVsZSBlc3QgZGlzcG9uaWJsZSB1bmlxdWVtZW50IHBvdXIgbCdlbnRpdMOpIEx5Y8OpZS4iKTsKICAgICAgICByZXR1cm47CiAgICB9CgogICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnNlY3Rpb24nKS5mb3JFYWNoKGVsID0+IGVsLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpKTsKICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKS5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTsKICAgIAogICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLm1lbnUtaXRlbScpLmZvckVhY2goZWwgPT4gZWwuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJykpOwogICAgaWYoYnRuKSBidG4uY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7CgogICAgLy8gU2VjdGlvbnMgcGxlaW4gw6ljcmFuIChob3JzIHNpZGViYXIpIDogbWFzcXVlciBiYW5kZWF1IGVudGl0w6kgKyBzdXBwcmltZXIgcGFkZGluZyAuY29udGVudAogICAgY29uc3QgZnVsbHNjcmVlblNlY3Rpb25zID0gWydiaWxhbi1nbG9iYWwnLCAnZW5zZWlnbmFudHMtbXV0dWFsaXNlcyddOwogICAgY29uc3QgaXNGdWxsc2NyZWVuID0gZnVsbHNjcmVlblNlY3Rpb25zLmluY2x1ZGVzKGlkKTsKICAgIGNvbnN0IGJhbm5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlbnRpdHktaGVhZGVyLWJhbm5lcicpOwogICAgaWYgKGJhbm5lcikgYmFubmVyLnN0eWxlLmRpc3BsYXkgPSBpc0Z1bGxzY3JlZW4gPyAnbm9uZScgOiAnJzsKICAgIGNvbnN0IGNvbnRlbnRFbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jb250ZW50Jyk7CiAgICBpZiAoY29udGVudEVsKSBjb250ZW50RWwuY2xhc3NMaXN0LnRvZ2dsZSgnZnVsbHNjcmVlbi1tb2RlJywgaXNGdWxsc2NyZWVuKTsKICAgIAogICAgaWYoaWQgPT09ICdkYXNoYm9hcmQnKSB7IGNhbGN1bGF0ZVJlY2FwKCk7IGRyYXdEYXNoYm9hcmRDaGFydCgpOyB9CiAgICBlbHNlIGlmKGlkID09PSAndmVudGlsYXRpb24nKSByZW5kZXJHcmlkU3lzdGVtKCk7CiAgICBlbHNlIGlmKGlkID09PSAncGlsb3RhZ2UnKSByZW5kZXJSSERpc2MoKTsKICAgIGVsc2UgaWYoaWQgPT09ICdwcm9mZXNzZXVycycpIHJlbmRlclJIKCk7CiAgICBlbHNlIGlmKGlkID09PSAnZXF1aXBlcycpIHJlbmRlclRlYW1zKCk7CgllbHNlIGlmKGlkID09PSAncmVwYXJ0aXRpb24nKSByZW5kZXJSZXBhcnRpdGlvbigpOyAKICAgIGVsc2UgaWYoaWQgPT09ICdyZWNhcCcpIGNhbGN1bGF0ZVJlY2FwKCk7CiAgICBlbHNlIGlmKGlkID09PSAnbWF0aWVyZXMnKSByZW5kZXJTdWJqZWN0c0NvbmZpZygpOwogICAgZWxzZSBpZihpZCA9PT0gJ2VkcycpIHJlbmRlckVEUygpOwogICAgZWxzZSBpZihpZCA9PT0gJ2JpbGFuLWdsb2JhbCcpIHJlbmRlckJpbGFuR2xvYmFsKCk7CiAgICBlbHNlIGlmKGlkID09PSAnZW5zZWlnbmFudHMtbXV0dWFsaXNlcycpIHJlbmRlclNoYXJlZFRlYWNoZXJzKCk7Cn0KCmZ1bmN0aW9uIGRyYXdEYXNoYm9hcmRDaGFydCgpIHsKICAgIGNvbnN0IGNhbnZhcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkaGdDaGFydCcpOwogICAgaWYoIWNhbnZhcyB8fCBjYW52YXMub2Zmc2V0UGFyZW50ID09PSBudWxsKSByZXR1cm47IAoKICAgIGNvbnN0IHRvdE4gPSBwYXJzZUZsb2F0KGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkYXNoLWNvbnNvJykuaW5uZXJUZXh0KSB8fCAwOwogICAgY29uc3QgZ2xvID0gcGFyc2VGbG9hdChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGFzaC10b3RhbC1kaGcnKS5pbm5lclRleHQpIHx8IDA7CiAgICBjb25zdCBzb2xkZSA9IGdsbyAtIHRvdE47CgogICAgY29uc3QgY3R4ID0gY2FudmFzLmdldENvbnRleHQoJzJkJyk7CiAgICBpZihjaGFydEluc3RhbmNlKSBjaGFydEluc3RhbmNlLmRlc3Ryb3koKTsKICAgIAogICAgY2hhcnRJbnN0YW5jZSA9IG5ldyBDaGFydChjdHgsIHsKICAgICAgICB0eXBlOiAnZG91Z2hudXQnLAogICAgICAgIGRhdGE6IHsKICAgICAgICAgICAgbGFiZWxzOiBbJ0NvbnNvbW3DqScsICdEaXNwbycsICdEw6lmaWNpdCddLAogICAgICAgICAgICBkYXRhc2V0czogW3sKICAgICAgICAgICAgICAgIGRhdGE6IFsKICAgICAgICAgICAgICAgICAgICBNYXRoLm1pbih0b3ROLCBnbG8pLCAKICAgICAgICAgICAgICAgICAgICBNYXRoLm1heCgwLCBzb2xkZSksIAogICAgICAgICAgICAgICAgICAgIHNvbGRlIDwgMCA/IE1hdGguYWJzKHNvbGRlKSA6IDAKICAgICAgICAgICAgICAgIF0sCiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IFsnIzM0OThkYicsICcjMmVjYzcxJywgJyNlNzRjM2MnXQogICAgICAgICAgICB9XQogICAgICAgIH0sCiAgICAgICAgb3B0aW9uczogeyAKICAgICAgICAgICAgcmVzcG9uc2l2ZTogdHJ1ZSwgCiAgICAgICAgICAgIG1haW50YWluQXNwZWN0UmF0aW86IGZhbHNlLAogICAgICAgICAgICBhbmltYXRpb246IHsgZHVyYXRpb246IDUwMCB9CiAgICAgICAgfQogICAgfSk7Cn0KCmZ1bmN0aW9uIGFkZE5ld0xldmVsKCkgewogICAgY29uc3QgbmFtZSA9IHByb21wdCgiTm9tIGR1IG5pdmVhdSAoZXg6IEJUUyAxKSA/Iik7CiAgICBpZighbmFtZSkgcmV0dXJuOwogICAgaWYoREFUQS5zdHJ1Y3R1cmUuc29tZShsID0+IGwubGV2ZWwgPT09IG5hbWUpKSB7IGFsZXJ0KCJFeGlzdGUgZMOpasOgICEiKTsgcmV0dXJuOyB9CiAgICBEQVRBLnN0cnVjdHVyZS5wdXNoKHsgbGV2ZWw6IG5hbWUsIHN0dWRlbnRzOiAwLCBkaXY6IDAsIHRhcmdldDogMjkuMCB9KTsKICAgIERBVEEubGV2ZWxDb25maWdbbmFtZV0gPSB7fTsKICAgIERBVEEuc3ViamVjdHMuZm9yRWFjaChzID0+IERBVEEubGV2ZWxDb25maWdbbmFtZV1bc10gPSB7YmFzZTowLCBkZW1pOjAsIG1hcmdlOjAsIGNvZWY6MS4wfSk7CiAgICBzYXZlRGF0YSgpOyByZW5kZXJTdHJ1Y3R1cmUoKTsgcmVuZGVyR3JpZFN5c3RlbSgpOwp9CmZ1bmN0aW9uIHJlbmFtZUxldmVsSW5saW5lKGlkeCwgbmV3TmFtZSkgewogICAgbmV3TmFtZSA9IChuZXdOYW1lIHx8ICcnKS50cmltKCk7CiAgICBjb25zdCBsdmwgPSBEQVRBLnN0cnVjdHVyZVtpZHhdOwogICAgaWYgKCFsdmwgfHwgIW5ld05hbWUgfHwgbmV3TmFtZSA9PT0gbHZsLmxldmVsKSByZXR1cm47CiAgICBjb25zdCBvbGROYW1lID0gbHZsLmxldmVsOwoKICAgIC8vIEdlbGVyIGxlcyBub21zIGRlIGNsYXNzZXMgZXhpc3RhbnRzCiAgICBpZiAoIURBVEEuY2xhc3NOYW1lcykgREFUQS5jbGFzc05hbWVzID0ge307CiAgICBjb25zdCBvbGRQcmVmaXggPSBnZXRMZXZlbFByZWZpeChvbGROYW1lKTsKICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbHZsLmRpdjsgaSsrKSB7CiAgICAgICAgY29uc3Qgb2xkSWQgPSBgJHtvbGRQcmVmaXh9JHtTdHJpbmcuZnJvbUNoYXJDb2RlKDY1ICsgaSl9YDsKICAgICAgICBpZiAoIURBVEEuY2xhc3NOYW1lc1tvbGRJZF0pIERBVEEuY2xhc3NOYW1lc1tvbGRJZF0gPSBvbGRJZDsKICAgIH0KCiAgICAvLyBSZW5vbW1lciBkYW5zIGxhIHN0cnVjdHVyZQogICAgbHZsLmxldmVsID0gbmV3TmFtZTsKCiAgICAvLyBNaWdyZXIgbGV2ZWxDb25maWcKICAgIGlmIChEQVRBLmxldmVsQ29uZmlnW29sZE5hbWVdKSB7CiAgICAgICAgREFUQS5sZXZlbENvbmZpZ1tuZXdOYW1lXSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoREFUQS5sZXZlbENvbmZpZ1tvbGROYW1lXSkpOwogICAgICAgIGRlbGV0ZSBEQVRBLmxldmVsQ29uZmlnW29sZE5hbWVdOwogICAgfQoKICAgIC8vIE1pZ3JlciBsZXMgbcOpdGEtZG9ubsOpZXMgbWF0acOocmVzCiAgICBEQVRBLnN1YmplY3RzLmZvckVhY2gocyA9PiB7CiAgICAgICAgY29uc3QgbWV0YSA9IERBVEEuc3ViamVjdE1ldGFbc107CiAgICAgICAgaWYgKG1ldGEubGV2ZWxzICYmIG1ldGEubGV2ZWxzLmluY2x1ZGVzKG9sZE5hbWUpKSB7CiAgICAgICAgICAgIG1ldGEubGV2ZWxzW21ldGEubGV2ZWxzLmluZGV4T2Yob2xkTmFtZSldID0gbmV3TmFtZTsKICAgICAgICB9CiAgICAgICAgaWYgKG1ldGEudm9sTGV2ZWwgJiYgbWV0YS52b2xMZXZlbFtvbGROYW1lXSAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgIG1ldGEudm9sTGV2ZWxbbmV3TmFtZV0gPSBtZXRhLnZvbExldmVsW29sZE5hbWVdOwogICAgICAgICAgICBkZWxldGUgbWV0YS52b2xMZXZlbFtvbGROYW1lXTsKICAgICAgICB9CiAgICB9KTsKCiAgICBzYXZlRGF0YSgpOwogICAgLy8gUmVjYWxjdWxlciBsZSBwb25kVHlwZSBhcHLDqHMgcmVub21tYWdlIChsZSB0eXBlIHBldXQgY2hhbmdlcikKICAgIHdpbmRvdy5sYXN0QWN0aXZlR3JpZFRhYiA9IGlkeDsKICAgIHJlbmRlckdyaWRTeXN0ZW0oKTsKfQoKZnVuY3Rpb24gcmVuYW1lTGV2ZWwoaWR4KSB7CiAgICBjb25zdCBsdmwgPSBEQVRBLnN0cnVjdHVyZVtpZHhdOwogICAgY29uc3Qgb2xkTmFtZSA9IGx2bC5sZXZlbDsKICAgIAogICAgY29uc3QgbmV3TmFtZSA9IHByb21wdCgiUmVub21tZXIgIiArIG9sZE5hbWUgKyAiIGVuIDoiLCBvbGROYW1lKTsKICAgIGlmICghbmV3TmFtZSB8fCBuZXdOYW1lID09PSBvbGROYW1lKSByZXR1cm47CgogICAgLy8gMS4gT24gY2FsY3VsZSBsZXMgcHLDqWZpeGVzIEFWQU5UIGV0IEFQUsOIUyBsZSBjaGFuZ2VtZW50CiAgICAvLyAoTsOpY2Vzc2l0ZSBsYSBmb25jdGlvbiBnZXRMZXZlbFByZWZpeCBham91dMOpZSBwcsOpY8OpZGVtbWVudCkKICAgIGNvbnN0IG9sZFByZWZpeCA9IGdldExldmVsUHJlZml4KG9sZE5hbWUpOyAKICAgIGNvbnN0IG5ld1ByZWZpeCA9IGdldExldmVsUHJlZml4KG5ld05hbWUpOwoKICAgIC8vIDIuICJHZWxlciIgbGVzIG5vbXMgYWN0dWVscyBkZXMgY2xhc3NlcwogICAgLy8gU2kgdW5lIGNsYXNzZSBzJ2FwcGVsbGUgIjZBIiBwYXIgZMOpZmF1dCwgb24gZW5yZWdpc3RyZSAiNkEiIGNvbW1lIG5vbSBmaXhlLgogICAgLy8gQWluc2ksIG3Dqm1lIHNpIGxlIGNvZGUgaW50ZXJuZSBkZXZpZW50ICJONkEiLCBsJ2FmZmljaGFnZSByZXN0ZXJhICI2QSIuCiAgICBpZiAoIURBVEEuY2xhc3NOYW1lcykgREFUQS5jbGFzc05hbWVzID0ge307CiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGx2bC5kaXY7IGkrKykgewogICAgICAgIGNvbnN0IG9sZElkID0gYCR7b2xkUHJlZml4fSR7U3RyaW5nLmZyb21DaGFyQ29kZSg2NSArIGkpfWA7CiAgICAgICAgLy8gU2kgYXVjdW4gbm9tIHBlcnNvbm5hbGlzw6kgbidleGlzdGUsIG9uIGZvcmNlIGxlIG5vbSBhY3R1ZWwKICAgICAgICBpZiAoIURBVEEuY2xhc3NOYW1lc1tvbGRJZF0pIHsKICAgICAgICAgICAgREFUQS5jbGFzc05hbWVzW29sZElkXSA9IG9sZElkOwogICAgICAgIH0KICAgIH0KCiAgICAvLyAzLiBBcHBsaXF1ZXIgbGUgbm91dmVhdSBub20gYXUgbml2ZWF1CiAgICBsdmwubGV2ZWwgPSBuZXdOYW1lOwoKICAgIC8vIDQuIE1pZ3JlciBsYSBjb25maWd1cmF0aW9uIGR1IG5pdmVhdSAoTWF0acOocmVzKQogICAgaWYgKERBVEEubGV2ZWxDb25maWdbb2xkTmFtZV0pIHsKICAgICAgICBEQVRBLmxldmVsQ29uZmlnW25ld05hbWVdID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShEQVRBLmxldmVsQ29uZmlnW29sZE5hbWVdKSk7CiAgICAgICAgZGVsZXRlIERBVEEubGV2ZWxDb25maWdbb2xkTmFtZV07CiAgICB9CiAgICAKICAgIC8vIE1ldHRyZSDDoCBqb3VyIGxlcyByw6lmw6lyZW5jZXMgZGFucyBsZXMgTcOpdGEtZG9ubsOpZXMgZGVzIG1hdGnDqHJlcyAoc2kgdXRpbGlzw6kgZW4gbW9kZSAibml2ZWF1IikKICAgIERBVEEuc3ViamVjdHMuZm9yRWFjaChzID0+IHsKICAgICAgICBpZiAoREFUQS5zdWJqZWN0TWV0YVtzXS5sZXZlbHMgJiYgREFUQS5zdWJqZWN0TWV0YVtzXS5sZXZlbHMuaW5jbHVkZXMob2xkTmFtZSkpIHsKICAgICAgICAgICAgY29uc3QgaSA9IERBVEEuc3ViamVjdE1ldGFbc10ubGV2ZWxzLmluZGV4T2Yob2xkTmFtZSk7CiAgICAgICAgICAgIERBVEEuc3ViamVjdE1ldGFbc10ubGV2ZWxzW2ldID0gbmV3TmFtZTsKICAgICAgICB9CiAgICAgICAgaWYgKERBVEEuc3ViamVjdE1ldGFbc10udm9sTGV2ZWwgJiYgREFUQS5zdWJqZWN0TWV0YVtzXS52b2xMZXZlbFtvbGROYW1lXSkgewogICAgICAgICAgICBEQVRBLnN1YmplY3RNZXRhW3NdLnZvbExldmVsW25ld05hbWVdID0gREFUQS5zdWJqZWN0TWV0YVtzXS52b2xMZXZlbFtvbGROYW1lXTsKICAgICAgICAgICAgZGVsZXRlIERBVEEuc3ViamVjdE1ldGFbc10udm9sTGV2ZWxbb2xkTmFtZV07CiAgICAgICAgfQogICAgfSk7CgogICAgLy8gNS4gTUlHUkFUSU9OIERFUyBDTEFTU0VTIChOb21zICYgSGV1cmVzIHBlcnNvbm5hbGlzw6llcykKICAgIC8vIE9uIGRvaXQgZMOpcGxhY2VyIGxlcyBkb25uw6llcyBkZSBsJ2FuY2llbiBJRCAoZXg6ICI2QSIpIHZlcnMgbGUgbm91dmVsIElEIChleDogIk42QSIpCiAgICAvLyB0b3V0IGVuIGdhcmRhbnQgbGUgbm9tIGQnYWZmaWNoYWdlICI2QSIuCiAgICAKICAgIGlmIChvbGRQcmVmaXggIT09IG5ld1ByZWZpeCkgewogICAgICAgIC8vIE1pZ3JhdGlvbiBkZXMgbm9tcyBkZSBjbGFzc2VzCiAgICAgICAgY29uc3QgbmV3Q2xhc3NOYW1lcyA9IHsgLi4uREFUQS5jbGFzc05hbWVzIH07CiAgICAgICAgT2JqZWN0LmtleXMoREFUQS5jbGFzc05hbWVzKS5mb3JFYWNoKGtleSA9PiB7CiAgICAgICAgICAgIGlmIChrZXkuc3RhcnRzV2l0aChvbGRQcmVmaXgpKSB7CiAgICAgICAgICAgICAgICAvLyBPbiBjcsOpZSBsYSBub3V2ZWxsZSBjbMOpIChleDogcmVtcGxhY2UgJzYnIHBhciAnTjYnIGF1IGTDqWJ1dCkKICAgICAgICAgICAgICAgIC8vIEF0dGVudGlvbiA6IG9uIHV0aWxpc2UgdW5lIHJlZ2V4IHBvdXIgbmUgcmVtcGxhY2VyIHF1ZSBsZSBkw6lidXQKICAgICAgICAgICAgICAgIGNvbnN0IG5ld0tleSA9IGtleS5yZXBsYWNlKG5ldyBSZWdFeHAoJ14nICsgb2xkUHJlZml4KSwgbmV3UHJlZml4KTsKICAgICAgICAgICAgICAgIG5ld0NsYXNzTmFtZXNbbmV3S2V5XSA9IERBVEEuY2xhc3NOYW1lc1trZXldOyAvLyBPbiBnYXJkZSBsYSB2YWxldXIgKGxlIG5vbSBhZmZpY2jDqSkKICAgICAgICAgICAgICAgIGRlbGV0ZSBuZXdDbGFzc05hbWVzW2tleV07IC8vIE9uIHN1cHByaW1lIGwnYW5jaWVubmUgY2zDqQogICAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgREFUQS5jbGFzc05hbWVzID0gbmV3Q2xhc3NOYW1lczsKCiAgICAgICAgLy8gTWlncmF0aW9uIGRlcyBzdXJjaGFyZ2VzIGhvcmFpcmVzIChPdmVycmlkZXMpCiAgICAgICAgaWYgKERBVEEuY2xhc3NPdmVycmlkZXMpIHsKICAgICAgICAgICAgY29uc3QgbmV3T3ZlcnJpZGVzID0geyAuLi5EQVRBLmNsYXNzT3ZlcnJpZGVzIH07CiAgICAgICAgICAgIE9iamVjdC5rZXlzKERBVEEuY2xhc3NPdmVycmlkZXMpLmZvckVhY2goa2V5ID0+IHsKICAgICAgICAgICAgICAgIGlmIChrZXkuc3RhcnRzV2l0aChvbGRQcmVmaXgpKSB7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV3S2V5ID0ga2V5LnJlcGxhY2UobmV3IFJlZ0V4cCgnXicgKyBvbGRQcmVmaXgpLCBuZXdQcmVmaXgpOwogICAgICAgICAgICAgICAgICAgIG5ld092ZXJyaWRlc1tuZXdLZXldID0gREFUQS5jbGFzc092ZXJyaWRlc1trZXldOwogICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBuZXdPdmVycmlkZXNba2V5XTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIERBVEEuY2xhc3NPdmVycmlkZXMgPSBuZXdPdmVycmlkZXM7CiAgICAgICAgfQogICAgICAgIAogICAgICAgIC8vIE1pZ3JhdGlvbiBkZXMgYWZmZWN0YXRpb25zIFByb2Zlc3NldXJzICjDiXF1aXBlcyBQw6lkYWdvZ2lxdWVzKQogICAgICAgIGlmIChEQVRBLmFzc2lnbm1lbnRzKSB7CiAgICAgICAgICAgIGNvbnN0IG5ld0Fzc2lnbm1lbnRzID0geyAuLi5EQVRBLmFzc2lnbm1lbnRzIH07CiAgICAgICAgICAgIE9iamVjdC5rZXlzKERBVEEuYXNzaWdubWVudHMpLmZvckVhY2goa2V5ID0+IHsKICAgICAgICAgICAgICAgIC8vIGtleSBlc3Qgc291cyBmb3JtZSAiQ0xBU1NFX1BST0ZJTkRFWCIgKGV4OiAiNkFfMTIiKQogICAgICAgICAgICAgICAgY29uc3QgcGFydHMgPSBrZXkuc3BsaXQoJ18nKTsKICAgICAgICAgICAgICAgIGNvbnN0IGNJZCA9IHBhcnRzWzBdOwogICAgICAgICAgICAgICAgaWYgKGNJZC5zdGFydHNXaXRoKG9sZFByZWZpeCkpIHsKICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdDSWQgPSBjSWQucmVwbGFjZShuZXcgUmVnRXhwKCdeJyArIG9sZFByZWZpeCksIG5ld1ByZWZpeCk7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV3S2V5ID0gYCR7bmV3Q0lkfV8ke3BhcnRzWzFdfWA7CiAgICAgICAgICAgICAgICAgICAgbmV3QXNzaWdubWVudHNbbmV3S2V5XSA9IERBVEEuYXNzaWdubWVudHNba2V5XTsKICAgICAgICAgICAgICAgICAgICBkZWxldGUgbmV3QXNzaWdubWVudHNba2V5XTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIERBVEEuYXNzaWdubWVudHMgPSBuZXdBc3NpZ25tZW50czsKICAgICAgICB9CiAgICB9CgogICAgc2F2ZURhdGEoKTsKICAgIHJlbmRlclN0cnVjdHVyZSgpOwogICAgcmVuZGVyR3JpZFN5c3RlbSgpOwogICAgcmVuZGVyU3ViamVjdHNDb25maWcoKTsKICAgIC8vIFJhZnJhw65jaGlyIGxlcyBvbmdsZXRzIHNpIG7DqWNlc3NhaXJlCiAgICBpZiAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VxdWlwZXMnKS5jbGFzc0xpc3QuY29udGFpbnMoJ2FjdGl2ZScpKSByZW5kZXJUZWFtcygpOwp9CmZ1bmN0aW9uIGRlbGV0ZUxldmVsKGlkeCkgewogICAgY29uc3QgbHZsTmFtZSA9IERBVEEuc3RydWN0dXJlW2lkeF0ubGV2ZWw7CiAgICBpZihjb25maXJtKGBTdXBwcmltZXIgbGUgbml2ZWF1ICIke2x2bE5hbWV9IiA/YCkpIHsKICAgICAgICBEQVRBLnN0cnVjdHVyZS5zcGxpY2UoaWR4LCAxKTsKICAgICAgICBkZWxldGUgREFUQS5sZXZlbENvbmZpZ1tsdmxOYW1lXTsKICAgICAgICBzYXZlRGF0YSgpOyByZW5kZXJTdHJ1Y3R1cmUoKTsgcmVuZGVyR3JpZFN5c3RlbSgpOwogICAgfQp9CgpmdW5jdGlvbiByZW5kZXJTdHJ1Y3R1cmUoKSB7CiAgICBjb25zdCB0Ym9keSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzdHJ1Y3R1cmUtYm9keScpOwogICAgdGJvZHkuaW5uZXJIVE1MID0gJyc7CiAgICBsZXQgdG90RWxldmVzID0gMCwgdG90RGl2ID0gMCwgdG90SGV1cmVzID0gMDsKICAgIAogICAgLy8gT04gUsOJQ1VQw4hSRSBMRVMgUFLDiUZJWEVTIFVOSVFVRVMgSUNJCiAgICBjb25zdCBhbGxQcmVmaXhlcyA9IGdldEFsbFVuaXF1ZVByZWZpeGVzKCk7CgogICAgREFUQS5zdHJ1Y3R1cmUuZm9yRWFjaCgobHZsLCBpZHgpID0+IHsKICAgICAgICBjb25zdCBiZXNvaW4gPSBsdmwuZGl2ICogbHZsLnRhcmdldDsKICAgICAgICB0b3RFbGV2ZXMgKz0gbHZsLnN0dWRlbnRzOyB0b3REaXYgKz0gbHZsLmRpdjsgdG90SGV1cmVzICs9IGJlc29pbjsKICAgICAgICAKICAgICAgICB0Ym9keS5pbm5lckhUTUwgKz0gYDx0cj4KICAgICAgICAgICAgPHRkPjxiPiR7bHZsLmxldmVsfTwvYj48L3RkPgogICAgICAgICAgICA8dGQ+PGlucHV0IHR5cGU9Im51bWJlciIgdmFsdWU9IiR7bHZsLnN0dWRlbnRzfSIgb25jaGFuZ2U9InVwZFN0cnVjdCgke2lkeH0sJ3N0dWRlbnRzJyx0aGlzLnZhbHVlKSI+PC90ZD4KICAgICAgICAgICAgPHRkPjxpbnB1dCB0eXBlPSJudW1iZXIiIHZhbHVlPSIke2x2bC5kaXZ9IiBvbmNoYW5nZT0idXBkU3RydWN0KCR7aWR4fSwnZGl2Jyx0aGlzLnZhbHVlKSI+PC90ZD4KICAgICAgICAgICAgPHRkPiR7bHZsLmRpdj4wID8gKGx2bC5zdHVkZW50cy9sdmwuZGl2KS50b0ZpeGVkKDEpIDogMH08L3RkPgogICAgICAgICAgICA8dGQ+PGlucHV0IHR5cGU9Im51bWJlciIgdmFsdWU9IiR7bHZsLnRhcmdldH0iIHN0ZXA9IjAuNSIgc3R5bGU9ImJhY2tncm91bmQ6I2ZmZmJlNjsgZm9udC13ZWlnaHQ6Ym9sZDsgdGV4dC1hbGlnbjpjZW50ZXI7IiBvbmNoYW5nZT0idXBkU3RydWN0KCR7aWR4fSwndGFyZ2V0Jyx0aGlzLnZhbHVlKSI+PC90ZD4KICAgICAgICAgICAgPHRkIHN0eWxlPSJmb250LXdlaWdodDpib2xkOyBjb2xvcjp2YXIoLS1wcmltYXJ5KSI+JHtiZXNvaW4udG9GaXhlZCgxKX0gaDwvdGQ+CiAgICAgICAgICAgIDx0ZD4KICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9ImRpc3BsYXk6ZmxleDsgZ2FwOjVweDsganVzdGlmeS1jb250ZW50OmNlbnRlcjsiPgogICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImJ0bi1zbSBidG4td2FybmluZyIgb25jbGljaz0icmVuYW1lTGV2ZWwoJHtpZHh9KSI+4pyP77iPPC9idXR0b24+CiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYnRuLXNtIGJ0bi1kYW5nZXIiIG9uY2xpY2s9ImRlbGV0ZUxldmVsKCR7aWR4fSkiPvCfl5HvuI88L2J1dHRvbj4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8L3RkPgogICAgICAgIDwvdHI+YDsKICAgIH0pOwoKICAgIGlmKCFEQVRBLmFkZGl0aW9uYWxNZWFucykgREFUQS5hZGRpdGlvbmFsTWVhbnMgPSB7IHRvdGFsOiAwIH07CiAgICBjb25zdCBzdXBwVG90YWwgPSBwYXJzZUZsb2F0KERBVEEuYWRkaXRpb25hbE1lYW5zLnRvdGFsIHx8IDApOwogICAgdG90SGV1cmVzICs9IHN1cHBUb3RhbDsKCiAgICB0Ym9keS5pbm5lckhUTUwgKz0gYAogICAgPHRyIGNsYXNzPSJyb3ctc3VwcCI+CiAgICAgICAgPHRkIGNvbHNwYW49IjQiIHN0eWxlPSJ0ZXh0LWFsaWduOnJpZ2h0OyBmb250LXdlaWdodDpib2xkOyBmb250LXN0eWxlOml0YWxpYzsiPgogICAgICAgICAgICBNb3llbnMgc3VwcGzDqW1lbnRhaXJlcyA6CiAgICAgICAgPC90ZD4KICAgICAgICA8dGQ+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9InN1cHAtbGFiZWwtZ3JvdXAiPgogICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9Im51bWJlciIgY2xhc3M9ImlucHV0LXN1cHAiIHZhbHVlPSIke3N1cHBUb3RhbH0iIG9uY2hhbmdlPSJ1cGRTdXBwKHRoaXMudmFsdWUpIj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgPC90ZD4KICAgICAgICA8dGQgc3R5bGU9ImZvbnQtd2VpZ2h0OmJvbGQ7Ij4ke3N1cHBUb3RhbC50b0ZpeGVkKDEpfSBoPC90ZD4KICAgICAgICA8dGQ+PC90ZD4KICAgIDwvdHI+CiAgICBgOwoKICAgIGNvbnN0IG1veUdlbiA9IHRvdERpdiA+IDAgPyAodG90RWxldmVzIC8gdG90RGl2KS50b0ZpeGVkKDEpIDogMDsKICAgIHRib2R5LmlubmVySFRNTCArPSBgPHRyIGNsYXNzPSJzdHJ1Y3R1cmUtdG90YWwtcm93Ij48dGQ+VE9UQUwgR8OJTsOJUkFMPC90ZD48dGQ+JHt0b3RFbGV2ZXN9PC90ZD48dGQ+JHt0b3REaXZ9PC90ZD48dGQ+JHttb3lHZW59PC90ZD48dGQgc3R5bGU9InRleHQtYWxpZ246cmlnaHQ7Ij5Ub3RhbCBNb3llbnMgOjwvdGQ+PHRkIHN0eWxlPSJjb2xvcjojZjFjNDBmOyI+JHt0b3RIZXVyZXMudG9GaXhlZCgxKX0gaDwvdGQ+PHRkPjwvdGQ+PC90cj5gOwogICAgCiAgICAvLyBHw6luw6lyYXRpb24gZGVzIGlucHV0cyBkZSByZW5vbW1hZ2UgY2xhc3NlcyAoZ3JvdXDDqXMgcGFyIG5pdmVhdSkKICAgIGNvbnN0IGMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2xhc3MtbGlzdC1jb250YWluZXInKTsgYy5pbm5lckhUTUwgPSAnJzsKICAgIAogICAgREFUQS5zdHJ1Y3R1cmUuZm9yRWFjaCgobHZsLCBpZHgpID0+IHsKICAgICAgICBpZiAobHZsLmRpdiA9PT0gMCkgcmV0dXJuOwogICAgICAgIGNvbnN0IHByZWZpeCA9IGFsbFByZWZpeGVzW2lkeF07CiAgICAgICAgbGV0IGdyb3VwSHRtbCA9IGA8ZGl2IHN0eWxlPSJtYXJnaW4tYm90dG9tOjEycHg7IHdpZHRoOjEwMCU7Ij4KICAgICAgICAgICAgPGRpdiBzdHlsZT0iZm9udC1zaXplOjAuNzVyZW07IGZvbnQtd2VpZ2h0OjcwMDsgY29sb3I6IzdmOGM4ZDsgdGV4dC10cmFuc2Zvcm06dXBwZXJjYXNlOyBsZXR0ZXItc3BhY2luZzowLjVweDsgbWFyZ2luLWJvdHRvbTo2cHg7IGJvcmRlci1ib3R0b206MXB4IHNvbGlkICNlZWU7IHBhZGRpbmctYm90dG9tOjRweDsiPiR7bHZsLmxldmVsfTwvZGl2PgogICAgICAgICAgICA8ZGl2IHN0eWxlPSJkaXNwbGF5OmZsZXg7IGZsZXgtd3JhcDp3cmFwOyBnYXA6OHB4OyI+YDsKICAgICAgICAKICAgICAgICBmb3IobGV0IGk9MDsgaTxsdmwuZGl2OyBpKyspIHsKICAgICAgICAgICAgY29uc3QgZGVmSWQgPSBgJHtwcmVmaXh9JHtTdHJpbmcuZnJvbUNoYXJDb2RlKDY1K2kpfWA7CiAgICAgICAgICAgIGNvbnN0IGRpc3BsYXlOYW1lID0gREFUQS5jbGFzc05hbWVzICYmIERBVEEuY2xhc3NOYW1lc1tkZWZJZF0gPyBEQVRBLmNsYXNzTmFtZXNbZGVmSWRdIDogZGVmSWQ7CiAgICAgICAgICAgIGdyb3VwSHRtbCArPSBgPGRpdiBzdHlsZT0iZGlzcGxheTpmbGV4OyBmbGV4LWRpcmVjdGlvbjpjb2x1bW47IGFsaWduLWl0ZW1zOmNlbnRlcjsgZ2FwOjNweDsiPgogICAgICAgICAgICAgICAgPHNwYW4gc3R5bGU9ImZvbnQtc2l6ZTowLjZyZW07IGNvbG9yOiNhYWE7IGZvbnQtZmFtaWx5Om1vbm9zcGFjZTsiPiR7ZGVmSWR9PC9zcGFuPgogICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9InRleHQiIHZhbHVlPSIke2Rpc3BsYXlOYW1lLnJlcGxhY2UoLyIvZywgJyZxdW90OycpfSIgCiAgICAgICAgICAgICAgICAgICAgc3R5bGU9IndpZHRoOjgwcHg7IHRleHQtYWxpZ246Y2VudGVyOyBmb250LXdlaWdodDo3MDA7IGNvbG9yOiMyYzNlNTA7IGJvcmRlcjoycHggc29saWQgdmFyKC0tc2Vjb25kYXJ5KTsgYm9yZGVyLXJhZGl1czo1cHg7IHBhZGRpbmc6NHB4IDZweDsgZm9udC1zaXplOjAuODVyZW07IGJhY2tncm91bmQ6d2hpdGU7IgogICAgICAgICAgICAgICAgICAgIG9uY2hhbmdlPSJyZW5hbWVDbGFzc0RpcmVjdCgnJHtkZWZJZH0nLCB0aGlzLnZhbHVlKSIKICAgICAgICAgICAgICAgICAgICBvbmZvY3VzPSJ0aGlzLnNlbGVjdCgpIgogICAgICAgICAgICAgICAgICAgIHRpdGxlPSJSZW5vbW1lciBsYSBjbGFzc2UgJHtkZWZJZH0iPgogICAgICAgICAgICA8L2Rpdj5gOwogICAgICAgIH0KICAgICAgICBncm91cEh0bWwgKz0gYDwvZGl2PjwvZGl2PmA7CiAgICAgICAgYy5pbm5lckhUTUwgKz0gZ3JvdXBIdG1sOwogICAgfSk7CgogICAgREFUQS5jb25maWcudG90YWwgPSB0b3RIZXVyZXM7CiAgICBjb25zdCBkYlRvdGFsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Rhc2gtdG90YWwtZGhnJyk7CiAgICBpZihkYlRvdGFsKSBkYlRvdGFsLmlubmVyVGV4dCA9IHRvdEhldXJlczsKICAgIGNvbnN0IGRiRGlzcGxheSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdnbG9iYWwtZGhnLWRpc3BsYXknKTsKICAgIGlmKGRiRGlzcGxheSkgZGJEaXNwbGF5LmlubmVyVGV4dCA9IHRvdEhldXJlczsKICAgIAogICAgc2F2ZURhdGEoKTsKfQpmdW5jdGlvbiB1cGRTdHJ1Y3QoaSxmLHYpIHsgREFUQS5zdHJ1Y3R1cmVbaV1bZl0gPSBwYXJzZUZsb2F0KHYpOyBpZihmPT09J2RpdicpIGdlbmVyYXRlQ2xhc3NlcyhmYWxzZSk7IHNhdmVEYXRhKCk7IHJlbmRlclN0cnVjdHVyZSgpOyB1cGRhdGVNZW51VmlzaWJpbGl0eShjdXJyZW50RW50aXR5KTsgfQpmdW5jdGlvbiByZW5hbWVDbGFzc0RpcmVjdChvcmlnaW5hbElkLCBuZXdOYW1lKSB7CiAgICBpZiAoIW5ld05hbWUgfHwgIW5ld05hbWUudHJpbSgpKSByZXR1cm47CiAgICBpZiAoIURBVEEuY2xhc3NOYW1lcykgREFUQS5jbGFzc05hbWVzID0ge307CiAgICBEQVRBLmNsYXNzTmFtZXNbb3JpZ2luYWxJZF0gPSBuZXdOYW1lLnRyaW0oKTsKICAgIHNhdmVEYXRhKCk7Cn0KZnVuY3Rpb24gdXBkU3VwcCh2YWwpIHsgaWYoIURBVEEuYWRkaXRpb25hbE1lYW5zKSBEQVRBLmFkZGl0aW9uYWxNZWFucyA9IHsgdG90YWw6IDAgfTsgREFUQS5hZGRpdGlvbmFsTWVhbnMudG90YWwgPSBwYXJzZUZsb2F0KHZhbCkgfHwgMDsgc2F2ZURhdGEoKTsgcmVuZGVyU3RydWN0dXJlKCk7IH0KZnVuY3Rpb24gZ2VuZXJhdGVDbGFzc2VzKGNvbmYpIHsKICAgIC8vIFNpIG9uIGNsaXF1ZSBzdXIgbGUgYm91dG9uICJSw6lnw6luw6lyZXIiLCBvbiBmb3JjZSBsZSByZXNldCAoYXZlYyBjb25maXJtYXRpb24pCiAgICBpZihjb25mKSB7CiAgICAgICAgaWYoIWNvbmZpcm0oIuKaoO+4jyBBdHRlbnRpb24gOiBDZWxhIHZhIHLDqWluaXRpYWxpc2VyIGxlcyBub21zIGRlcyBjbGFzc2VzLlxuQ29udGludWVyID8iKSkgcmV0dXJuOwogICAgICAgIERBVEEuY2xhc3NOYW1lcyA9IHt9OwogICAgfQoKICAgIC8vIFPDqWN1cml0w6kgc2kgbCdvYmpldCBuJ2V4aXN0ZSBwYXMKICAgIGlmKCFEQVRBLmNsYXNzTmFtZXMpIERBVEEuY2xhc3NOYW1lcyA9IHt9OwogICAgCiAgICAvLyAxLiBPbiByw6ljdXDDqHJlIGxlcyBwcsOpZml4ZXMKICAgIGNvbnN0IGFsbFByZWZpeGVzID0gZ2V0QWxsVW5pcXVlUHJlZml4ZXMoKTsKICAgIAogICAgLy8gMi4gT24gcGFyY291cnQgbGEgc3RydWN0dXJlIHBvdXIgQUpPVVRFUiBvdSBHQVJERVIgbGVzIGNsYXNzZXMKICAgIERBVEEuc3RydWN0dXJlLmZvckVhY2goKGx2bCwgaWR4KSA9PiB7CiAgICAgICAgY29uc3QgcHJlZml4ID0gYWxsUHJlZml4ZXNbaWR4XTsKICAgICAgICAKICAgICAgICBmb3IobGV0IGk9MDsgaTxsdmwuZGl2OyBpKyspIHsKICAgICAgICAgICAgY29uc3QgaWQgPSBgJHtwcmVmaXh9JHtTdHJpbmcuZnJvbUNoYXJDb2RlKDY1K2kpfWA7IC8vIEV4OiAxMkEKICAgICAgICAgICAgCiAgICAgICAgICAgIC8vIExBIENPUlJFQ1RJT04gRVNUIElDSSA6IAogICAgICAgICAgICAvLyBTaSBsZSBub20gbidleGlzdGUgcGFzLCBvbiBsZSBjcsOpZS4gCiAgICAgICAgICAgIC8vIFMnaWwgZXhpc3RlIGTDqWrDoCAoZXg6ICI2w6htZSBTRUdQQSIpLCBvbiBuZSBsZSB0b3VjaGUgcGFzICEKICAgICAgICAgICAgaWYgKCFEQVRBLmNsYXNzTmFtZXNbaWRdKSB7CiAgICAgICAgICAgICAgICBEQVRBLmNsYXNzTmFtZXNbaWRdID0gaWQ7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9KTsKICAgIAogICAgLy8gKE9wdGlvbm5lbCkgTmV0dG95YWdlIDogT24gcGV1dCBzdXBwcmltZXIgbGVzIGNsYXNzZXMgcXVpIHNlcmFpZW50ICJob3JzIGxpbWl0ZSIgCiAgICAvLyBzaSB0dSByw6lkdWlzIGxlIG5vbWJyZSBkZSBkaXZpc2lvbnMgKGV4OiBwYXNzYWdlIGRlIDYgw6AgNSBjbGFzc2VzKSwgCiAgICAvLyBtYWlzIGxlIHBsdXMgaW1wb3J0YW50IGVzdCBkZSBuZSBwYXMgw6ljcmFzZXIgbGVzIGV4aXN0YW50ZXMuCiAgICAKICAgIHNhdmVEYXRhKCk7CiAgICByZW5kZXJTdHJ1Y3R1cmUoKTsKICAgIHJlbmRlckdyaWRTeXN0ZW0oKTsKfQoKZnVuY3Rpb24gY2FsY3VsYXRlTmVlZHMoKSB7CiAgICBsZXQgbiA9IHt9OyAKICAgIERBVEEuc3ViamVjdHMuZm9yRWFjaChzID0+IG5bc10gPSAwKTsKICAgIAogICAgREFUQS5zdWJqZWN0cy5mb3JFYWNoKHMgPT4gewogICAgICAgIGNvbnN0IG1ldGEgPSBEQVRBLnN1YmplY3RNZXRhW3NdIHx8IHsgbW9kZTogJ2RpdicsIGxldmVsczogW10gfTsKICAgICAgICAKICAgICAgICAvLyBFRFMgOiBsZSBiZXNvaW4gdmllbnQgZGUgREFUQS5lZHMgKGdyb3VwZXMgw5cgaC9ncm91cGUgw5cgY29lZiksIHBhcyBkZSBsYSBzdHJ1Y3R1cmUKICAgICAgICBpZiAobWV0YS5pc0VkcykgewogICAgICAgICAgICBpZiAoREFUQS5lZHMpIHsKICAgICAgICAgICAgICAgIFsncHJlbWllcmUnLCAndGVybWluYWxlJ10uZm9yRWFjaChsdmwgPT4gewogICAgICAgICAgICAgICAgICAgIChEQVRBLmVkc1tsdmxdIHx8IFtdKS5mb3JFYWNoKGUgPT4gewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZS5uYW1lID09PSBzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjb2VmID0gcGFyc2VGbG9hdChlLmNvZWYpIHx8IDEuMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5bc10gKz0gKGUuZ3JvdXBzIHx8IDApICogKGUuaFBlckdyb3VwIHx8IChsdmwgPT09ICdwcmVtaWVyZScgPyA0IDogNikpICogY29lZjsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgLy8gMS4gTU9ERSBESVZJU0lPTgogICAgICAgIGlmKG1ldGEubW9kZSA9PT0gJ2RpdicpIHsKICAgICAgICAgICAgREFUQS5zdHJ1Y3R1cmUuZm9yRWFjaChsdmwgPT4gewogICAgICAgICAgICAgICAgaWYobWV0YS5sZXZlbHMgJiYgbWV0YS5sZXZlbHMuaW5jbHVkZXMobHZsLmxldmVsKSkgewogICAgICAgICAgICAgICAgICAgIGNvbnN0IHByZWZpeCA9IGdldExldmVsUHJlZml4KGx2bC5sZXZlbCk7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgY2ZnID0gREFUQS5sZXZlbENvbmZpZ1tsdmwubGV2ZWxdW3NdIHx8IHtiYXNlOjAsIGRlbWk6MCwgbWFyZ2U6MCwgY29lZjoxLjB9OwogICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvZWYgPSBjZmcuY29lZiB8fCAxLjA7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgaG91cnMgPSBnZXRFZmZlY3RpdmVCYXNlKGNmZykgKyAoY2ZnLm1hcmdlfHwwKTsKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICBmb3IobGV0IGk9MDsgaTxsdmwuZGl2OyBpKyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYyA9IGAke3ByZWZpeH0ke1N0cmluZy5mcm9tQ2hhckNvZGUoNjUraSl9YDsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKERBVEEuY2xhc3NPdmVycmlkZXNbY10gJiYgREFUQS5jbGFzc092ZXJyaWRlc1tjXVtzXSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgb3YgPSBEQVRBLmNsYXNzT3ZlcnJpZGVzW2NdW3NdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgbltzXSArPSAoZ2V0RWZmZWN0aXZlQmFzZShvdikgKyAob3YubWFyZ2V8fDApKSAqIGNvZWY7CiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7IAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbltzXSArPSBob3VycyAqIGNvZWY7IAogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgLy8gMi4gTU9ERSBOSVZFQVUKICAgICAgICBlbHNlIGlmIChtZXRhLm1vZGUgPT09ICdsZXZlbCcpIHsKICAgICAgICAgICAgREFUQS5zdHJ1Y3R1cmUuZm9yRWFjaChsdmwgPT4gewogICAgICAgICAgICAgICAgY29uc3QgdmFsID0gbWV0YS52b2xMZXZlbCA/IHBhcnNlRmxvYXQobWV0YS52b2xMZXZlbFtsdmwubGV2ZWxdIHx8IDApIDogMDsKICAgICAgICAgICAgICAgIG5bc10gKz0gdmFsOwogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgLy8gMy4gTU9ERSDDiVRBQkxJU1NFTUVOVAogICAgICAgIGVsc2UgaWYgKG1ldGEubW9kZSA9PT0gJ2V0YWInKSB7CiAgICAgICAgICAgIG5bc10gKz0gKHBhcnNlRmxvYXQobWV0YS5ldGFiKSB8fCAwKTsKICAgICAgICB9CiAgICB9KTsKICAgIHJldHVybiBuOwp9CgpmdW5jdGlvbiByZW5kZXJHcmlkU3lzdGVtKCkgewogICAgY29uc3QgdGFicyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdncmlkLXRhYnMnKTsKICAgIHRhYnMuaW5uZXJIVE1MID0gREFUQS5zdHJ1Y3R1cmUubWFwKChsLGkpID0+IHsKICAgICAgICBjb25zdCBwdCA9IGdldExldmVsUG9uZFR5cGUobC5sZXZlbCk7CiAgICAgICAgY29uc3QgYmFkZ2UgPSBwdCA9PT0gJ3N1cCcgICA/ICcgPHNwYW4gc3R5bGU9ImZvbnQtc2l6ZTowLjZyZW07Y29sb3I6IzhlNDRhZDt2ZXJ0aWNhbC1hbGlnbjpzdXBlcjsiPsOXMS4yNTwvc3Bhbj4nCiAgICAgICAgICAgICAgICAgICAgOiBwdCA9PT0gJ2x5Y2VlJyA/ICcgPHNwYW4gc3R5bGU9ImZvbnQtc2l6ZTowLjZyZW07Y29sb3I6IzhlNDRhZDt2ZXJ0aWNhbC1hbGlnbjpzdXBlcjsiPsOXMS4xPC9zcGFuPicKICAgICAgICAgICAgICAgICAgICA6ICcnOwogICAgICAgIHJldHVybiBgPGRpdiBjbGFzcz0idGFiICR7aT09PTA/J2FjdGl2ZSc6Jyd9IiBvbmNsaWNrPSJjaGFuZ2VUYWIodGhpcywgJHtpfSkiPiR7bC5sZXZlbH0ke2JhZGdlfTwvZGl2PmA7CiAgICB9KS5qb2luKCcnKTsKICAgIAogICAgdGFicy5pbm5lckhUTUwgKz0gYDxkaXYgY2xhc3M9InRhYiBnbG9iYWwtdGFiIiBvbmNsaWNrPSJjaGFuZ2VUYWIodGhpcywgLTEpIj7wn4yNIFZ1ZSBHbG9iYWxlPC9kaXY+YDsKICAgIAogICAgY29uc3QgYWN0aXZlSWR4ID0gd2luZG93Lmxhc3RBY3RpdmVHcmlkVGFiICE9PSB1bmRlZmluZWQgPyB3aW5kb3cubGFzdEFjdGl2ZUdyaWRUYWIgOiAwOwogICAgaWYoYWN0aXZlSWR4ID09PSAtMSkgewogICAgICAgIGNvbnN0IHQgPSB0YWJzLnF1ZXJ5U2VsZWN0b3IoJy5nbG9iYWwtdGFiJyk7CiAgICAgICAgaWYodCkgeyB0LmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpOyByZW5kZXJHbG9iYWxHcmlkKCk7IH0KICAgIH0gZWxzZSB7CiAgICAgICAgY29uc3QgdCA9IHRhYnMuY2hpbGRyZW5bYWN0aXZlSWR4XTsKICAgICAgICBpZih0KSB7IHQuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7IHJlbmRlckxldmVsR3JpZChhY3RpdmVJZHgpOyB9CiAgICB9Cgl1cGRhdGVHcmlkQ291bnRlcigpOwp9CgpmdW5jdGlvbiBjaGFuZ2VUYWIoZWwsIGlkeCkgewogICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnI2dyaWQtdGFicyAudGFiJykuZm9yRWFjaCh0ID0+IHQuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJykpOwogICAgZWwuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7CiAgICB3aW5kb3cubGFzdEFjdGl2ZUdyaWRUYWIgPSBpZHg7CiAgICBpZihpZHggPT09IC0xKSByZW5kZXJHbG9iYWxHcmlkKCk7CiAgICBlbHNlIHJlbmRlckxldmVsR3JpZChpZHgpOwp9CgpmdW5jdGlvbiByZW5hbWVDbGFzcyhvcmlnaW5hbElkLCBidG5FbCkgewogICAgaWYoIURBVEEuY2xhc3NOYW1lcykgREFUQS5jbGFzc05hbWVzID0ge307CiAgICBjb25zdCBjdXJyZW50TmFtZSA9IERBVEEuY2xhc3NOYW1lc1tvcmlnaW5hbElkXSB8fCBvcmlnaW5hbElkOwogICAgCiAgICAvLyBJbmxpbmUgZWRpdCDigJMgcmVtcGxhY2UgbGUgYm91dG9uIHBhciB1biBpbnB1dCB0ZW1wb3JhaXJlCiAgICBpZihidG5FbCkgewogICAgICAgIGNvbnN0IGlucCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7CiAgICAgICAgaW5wLnR5cGUgPSAndGV4dCc7CiAgICAgICAgaW5wLnZhbHVlID0gY3VycmVudE5hbWU7CiAgICAgICAgaW5wLnN0eWxlLmNzc1RleHQgPSAnd2lkdGg6NzBweDsgZm9udC13ZWlnaHQ6NzAwOyBjb2xvcjojMmMzZTUwOyBib3JkZXI6MnB4IHNvbGlkICMzNDk4ZGI7IGJvcmRlci1yYWRpdXM6NHB4OyBwYWRkaW5nOjJweCA0cHg7IGZvbnQtc2l6ZTowLjg1cmVtOyB0ZXh0LWFsaWduOmNlbnRlcjsnOwogICAgICAgIGJ0bkVsLnJlcGxhY2VXaXRoKGlucCk7CiAgICAgICAgaW5wLnNlbGVjdCgpOwogICAgICAgIGNvbnN0IGNvbW1pdCA9ICgpID0+IHsKICAgICAgICAgICAgY29uc3QgdiA9IGlucC52YWx1ZS50cmltKCkgfHwgY3VycmVudE5hbWU7CiAgICAgICAgICAgIERBVEEuY2xhc3NOYW1lc1tvcmlnaW5hbElkXSA9IHY7CiAgICAgICAgICAgIHNhdmVEYXRhKCk7CiAgICAgICAgICAgIGNvbnN0IGFjdGl2ZVRhYiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNncmlkLXRhYnMgLnRhYi5hY3RpdmUnKTsKICAgICAgICAgICAgaWYoYWN0aXZlVGFiICYmIGFjdGl2ZVRhYi5pbm5lclRleHQuaW5jbHVkZXMoJ1Z1ZSBHbG9iYWxlJykpIHJlbmRlckdsb2JhbEdyaWQoKTsKICAgICAgICAgICAgZWxzZSByZW5kZXJHcmlkU3lzdGVtKCk7CiAgICAgICAgfTsKICAgICAgICBpbnAuYWRkRXZlbnRMaXN0ZW5lcignYmx1cicsIGNvbW1pdCk7CiAgICAgICAgaW5wLmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBlID0+IHsgaWYoZS5rZXkgPT09ICdFbnRlcicpIHsgZS5wcmV2ZW50RGVmYXVsdCgpOyBpbnAuYmx1cigpOyB9IGlmKGUua2V5ID09PSAnRXNjYXBlJykgeyBpbnAudmFsdWUgPSBjdXJyZW50TmFtZTsgaW5wLmJsdXIoKTsgfSB9KTsKICAgICAgICByZXR1cm47CiAgICB9CiAgICAvLyBGYWxsYmFjayBwcm9tcHQKICAgIGNvbnN0IG5ld05hbWUgPSBwcm9tcHQoJ1Jlbm9tbWVyIGxhIGNsYXNzZSA6JywgY3VycmVudE5hbWUpOwogICAgaWYobmV3TmFtZSAmJiBuZXdOYW1lLnRyaW0oKSkgewogICAgICAgIERBVEEuY2xhc3NOYW1lc1tvcmlnaW5hbElkXSA9IG5ld05hbWUudHJpbSgpOwogICAgICAgIHNhdmVEYXRhKCk7CiAgICAgICAgY29uc3QgYWN0aXZlVGFiID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2dyaWQtdGFicyAudGFiLmFjdGl2ZScpOwogICAgICAgIGlmKGFjdGl2ZVRhYiAmJiBhY3RpdmVUYWIuaW5uZXJUZXh0LmluY2x1ZGVzKCdWdWUgR2xvYmFsZScpKSByZW5kZXJHbG9iYWxHcmlkKCk7CiAgICAgICAgZWxzZSByZW5kZXJHcmlkU3lzdGVtKCk7IAogICAgfQp9CgpmdW5jdGlvbiBnZXRMZXZlbFBvbmRUeXBlKGxldmVsTmFtZSkgewogICAgLy8gJ25vbmUnICA9IHBhcyBkZSBwb25kw6lyYXRpb24gKGNvbGzDqGdlLCBseWPDqWUgcHJvIOKAlCBUT1VTIGxlcyBuaXZlYXV4KQogICAgLy8gJ2x5Y2VlJyA9IHBvbmTDqXJhdGlvbiAxw6hyZS9UZXJtaW5hbGUgbHljw6llIEdUIChkw6lmYXV0IDEuMSkKICAgIC8vICdzdXAnICAgPSBwb25kw6lyYXRpb24gUMO0bGUgU3Vww6lyaWV1ciDigJQgVE9VUyBsZXMgbml2ZWF1eCAoZMOpZmF1dCAxLjI1KQogICAgaWYgKGN1cnJlbnRFbnRpdHkgPT09ICdjb2xsZWdlJykgICByZXR1cm4gJ25vbmUnOwogICAgaWYgKGN1cnJlbnRFbnRpdHkgPT09ICdseWNlZV9wcm8nKSByZXR1cm4gJ25vbmUnOwogICAgaWYgKGN1cnJlbnRFbnRpdHkgPT09ICdwb2xlJykgICAgICByZXR1cm4gJ3N1cCc7ICAvLyBUb3VzIGxlcyBuaXZlYXV4IGR1IHDDtGxlIOKGkiBzdXAKICAgIC8vIEx5Y8OpZSBHVCB1bmlxdWVtZW50IDogZGlzdGluZ3VlciAybmRlIChub25lKSBkZSAxw6hyZS9UZXJtaW5hbGUgKGx5Y2VlKQogICAgY29uc3QgbiA9IGxldmVsTmFtZS50b0xvd2VyQ2FzZSgpLnRyaW0oKTsKICAgIGlmIChuLmluY2x1ZGVzKCd0ZXJtaW5hbGUnKSB8fCBuLnN0YXJ0c1dpdGgoJ3Rlcm0nKSkgcmV0dXJuICdseWNlZSc7CiAgICBpZiAobi5pbmNsdWRlcygnMcOocmUnKSB8fCBuLmluY2x1ZGVzKCcxZXJlJykgfHwgbi5pbmNsdWRlcygncHJlbWnDqHJlJykgfHwgbi5tYXRjaCgvXjFbZcOoXS8pKSByZXR1cm4gJ2x5Y2VlJzsKICAgIHJldHVybiAnbm9uZSc7IC8vIDJuZGUgZXQgYXV0cmVzCn0KCmZ1bmN0aW9uIGdldERlZmF1bHRDb2VmKGxldmVsTmFtZSkgewogICAgY29uc3QgdCA9IGdldExldmVsUG9uZFR5cGUobGV2ZWxOYW1lKTsKICAgIGlmICh0ID09PSAnbHljZWUnKSByZXR1cm4gMS4xOwogICAgaWYgKHQgPT09ICdzdXAnKSAgIHJldHVybiAxLjI1OwogICAgcmV0dXJuIDEuMDsKfQoKZnVuY3Rpb24gcmVuZGVyTGV2ZWxHcmlkKGlkeCkgewogICAgY29uc3QgbHZsID0gREFUQS5zdHJ1Y3R1cmVbaWR4XTsgaWYoIWx2bCkgcmV0dXJuOwogICAgY29uc3QgbmFtZSA9IGx2bC5sZXZlbDsgCiAgICBjb25zdCBzYWZlTmFtZSA9IG5hbWUucmVwbGFjZSgvJy9nLCAiXFwnIik7CgogICAgLy8gMS4gUsOJQ1VQw4lSQVRJT04gREVTIFBSw4lGSVhFUyBVTklRVUVTIChFeDogMTJBLCAxMkIuLi4pCiAgICBjb25zdCBhbGxQcmVmaXhlcyA9IGdldEFsbFVuaXF1ZVByZWZpeGVzKCk7CiAgICBjb25zdCBwcmVmaXggPSBhbGxQcmVmaXhlc1tpZHhdOwogICAgY29uc3QgY29udCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdncmlkLWNvbnRhaW5lcicpOwogICAgCiAgICAvLyAyLiBJTklUSUFMSVNBVElPTgogICAgY29uc3QgcG9uZFR5cGUgICAgPSBnZXRMZXZlbFBvbmRUeXBlKG5hbWUpOwogICAgY29uc3QgZGVmYXVsdENvZWYgPSBnZXREZWZhdWx0Q29lZihuYW1lKTsKICAgIGNvbnN0IHNob3dDb2VmICAgID0gKHBvbmRUeXBlICE9PSAnbm9uZScpOwogICAgaWYoIURBVEEubGV2ZWxDb25maWdbbmFtZV0pIERBVEEubGV2ZWxDb25maWdbbmFtZV0gPSB7fTsKICAgIERBVEEuc3ViamVjdHMuZm9yRWFjaChzID0+IHsgCiAgICAgICAgaWYoIURBVEEubGV2ZWxDb25maWdbbmFtZV1bc10pIHsKICAgICAgICAgICAgREFUQS5sZXZlbENvbmZpZ1tuYW1lXVtzXSA9IHtiYXNlOjAsIGRlbWk6MCwgbWFyZ2U6MCwgY29lZjogZGVmYXVsdENvZWZ9OwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGlmIChwb25kVHlwZSA9PT0gJ25vbmUnKSB7CiAgICAgICAgICAgICAgICAvLyBQYXMgZGUgcG9uZMOpcmF0aW9uIHN1ciBjZSBuaXZlYXUgOiBmb3JjZXIgY29lZiDDoCAxLjAgKG5ldHRvaWUgbGVzIGFuY2llbm5lcyB2YWxldXJzKQogICAgICAgICAgICAgICAgREFUQS5sZXZlbENvbmZpZ1tuYW1lXVtzXS5jb2VmID0gMS4wOwogICAgICAgICAgICB9IGVsc2UgaWYgKERBVEEubGV2ZWxDb25maWdbbmFtZV1bc10uY29lZiA9PT0gdW5kZWZpbmVkIHx8IERBVEEubGV2ZWxDb25maWdbbmFtZV1bc10uY29lZiA9PT0gMS4wKSB7CiAgICAgICAgICAgICAgICAvLyBOaXZlYXUgcG9uZMOpcsOpLCBjb2VmIHBhcyBlbmNvcmUgcGVyc29ubmFsaXPDqSDihpIgYXBwbGlxdWVyIGxlIGTDqWZhdXQKICAgICAgICAgICAgICAgIERBVEEubGV2ZWxDb25maWdbbmFtZV1bc10uY29lZiA9IGRlZmF1bHRDb2VmOwogICAgICAgICAgICB9CiAgICAgICAgICAgIC8vIFNpIGNvZWYgZMOpasOgIHBlcnNvbm5hbGlzw6kgKOKJoCAxLjApIHN1ciB1biBuaXZlYXUgcG9uZMOpcsOpIOKGkiBuZSBwYXMgdG91Y2hlcgogICAgICAgIH0KICAgIH0pOwoKICAgIC8vIDMuIEZJTFRSQUdFIE1BVEnDiFJFUyA6IE9uIG1hc3F1ZSBsZXMgc3DDqWNpYWxpdMOpcyBpbmRpdmlkdWVsbGVzIChpc0VkcykgcG91ciBsYSBsaXNpYmlsaXTDqQogICAgY29uc3QgdmlzaWJsZVN1YmplY3RzID0gREFUQS5zdWJqZWN0cy5maWx0ZXIocyA9PiB7CiAgICAgICAgY29uc3QgbSA9IERBVEEuc3ViamVjdE1ldGFbc107CiAgICAgICAgaWYgKG0uaXNFZHMpIHJldHVybiBmYWxzZTsgLy8gTWFzcXVlIGxlcyBFRFMgaW5kaXZpZHVlbHMgZGFucyBjZXR0ZSB2dWUKICAgICAgICBpZiAobS5tb2RlID09PSAnZXRhYicpIHJldHVybiBmYWxzZTsKICAgICAgICBpZiAobS5tb2RlID09PSAnbGV2ZWwnKSB7CiAgICAgICAgICAgIGNvbnN0IHZvbCA9IG0udm9sTGV2ZWwgPyBwYXJzZUZsb2F0KG0udm9sTGV2ZWxbbmFtZV0gfHwgMCkgOiAwOwogICAgICAgICAgICByZXR1cm4gdm9sID4gMDsKICAgICAgICB9CiAgICAgICAgcmV0dXJuICghbS5sZXZlbHMgfHwgbS5sZXZlbHMuaW5jbHVkZXMobmFtZSkpOwogICAgfSk7CgogICAgbGV0IGggPSBgPGRpdiBjbGFzcz0iZ3JpZC13cmFwcGVyIj48dGFibGUgY2xhc3M9ImdyaWQtdGFibGUiPgogICAgPHRoZWFkPgogICAgICAgIDx0cj4KICAgICAgICAgICAgPHRoIGNsYXNzPSJ0aC1jbGFzcyIgc3R5bGU9InZlcnRpY2FsLWFsaWduOmJvdHRvbTsgcGFkZGluZy1ib3R0b206MTBweDsiPgogICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iZGlzcGxheTpmbGV4O2ZsZXgtZGlyZWN0aW9uOmNvbHVtbjthbGlnbi1pdGVtczpmbGV4LXN0YXJ0O2dhcDozcHg7Ij4KICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0idGV4dCIgdmFsdWU9IiR7bmFtZX0iCiAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPSJmb250LXNpemU6MS4wNXJlbTtmb250LXdlaWdodDo3MDA7Y29sb3I6IzJjM2U1MDtib3JkZXI6MS41cHggc29saWQgI2Q1ZDhkYztib3JkZXItcmFkaXVzOjVweDtwYWRkaW5nOjNweCA3cHg7YmFja2dyb3VuZDojZjhmOWZhO3dpZHRoOjEyMHB4O2N1cnNvcjpwb2ludGVyOyIKICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU9IkNsaXF1ZXIgcG91ciByZW5vbW1lciBjZSBuaXZlYXUiCiAgICAgICAgICAgICAgICAgICAgICAgIG9uY2hhbmdlPSJyZW5hbWVMZXZlbElubGluZSgke2lkeH0sIHRoaXMudmFsdWUpIgogICAgICAgICAgICAgICAgICAgICAgICBvbmZvY3VzPSJ0aGlzLnN0eWxlLmJvcmRlckNvbG9yPScjMzQ5OGRiJzt0aGlzLnN0eWxlLmJhY2tncm91bmQ9JyNmZmYnOyIKICAgICAgICAgICAgICAgICAgICAgICAgb25ibHVyPSJ0aGlzLnN0eWxlLmJvcmRlckNvbG9yPScjZDVkOGRjJzt0aGlzLnN0eWxlLmJhY2tncm91bmQ9JyNmOGY5ZmEnOyI+CiAgICAgICAgICAgICAgICAgICAgPHNwYW4gc3R5bGU9ImZvbnQtc2l6ZTowLjYycmVtO2NvbG9yOiNhYWE7Zm9udC1zdHlsZTppdGFsaWM7cGFkZGluZy1sZWZ0OjRweDsiPuKcj++4jyBDbGlxdWVyIHBvdXIgcmVub21tZXI8L3NwYW4+CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPC90aD4KICAgICAgICAgICAgJHt2aXNpYmxlU3ViamVjdHMubWFwKHMgPT4gewogICAgICAgICAgICAgICAgY29uc3Qgc2FmZVMgPSBzLnJlcGxhY2UoLycvZywgIlxcJyIpOwogICAgICAgICAgICAgICAgcmV0dXJuIGA8dGggY2xhc3M9InRoLXZlcnRpY2FsIj48c3BhbiBjbGFzcz0iZGVsLWJhZGdlIiBvbmNsaWNrPSJkZWxTdWJqZWN0KCcke3NhZmVTfScpIj7Dlzwvc3Bhbj48ZGl2IGNsYXNzPSJ0aC10ZXh0LXdyYXBwZXIiPiR7c308L2Rpdj48L3RoPmA7CiAgICAgICAgICAgIH0pLmpvaW4oJycpfQogICAgICAgICAgICA8dGggY2xhc3M9InRoLXZlcnRpY2FsIiBzdHlsZT0idmVydGljYWwtYWxpZ246Ym90dG9tOyI+PGRpdiBzdHlsZT0id3JpdGluZy1tb2RlOnZlcnRpY2FsLXJsOyB0cmFuc2Zvcm06cm90YXRlKDE4MGRlZyk7IGNvbG9yOiMyYzNlNTA7IGZvbnQtd2VpZ2h0OmJvbGQ7IGhlaWdodDphdXRvOyBtYXJnaW46MCBhdXRvOyI+VE9UQUw8L2Rpdj48L3RoPgogICAgICAgIDwvdHI+CiAgICA8L3RoZWFkPgogICAgPHRib2R5PgogICAgCiAgICAke3Nob3dDb2VmID8gYDx0ciBzdHlsZT0iYmFja2dyb3VuZDojZmNmM2ZmOyI+CiAgICA8dGQgc3R5bGU9InRleHQtYWxpZ246Y2VudGVyOyBmb250LXdlaWdodDpib2xkOyBjb2xvcjojOGU0NGFkOyBmb250LXNpemU6MC43NXJlbTsiIHRpdGxlPSJQb25kw6lyYXRpb24gYXBwbGlxdcOpZSBhdXggaGV1cmVzIGRlIGNlIG5pdmVhdSI+CiAgICAgICAgUG9uZC7inLE8YnI+PHNwYW4gc3R5bGU9ImZvbnQtc2l6ZTowLjYycmVtO2NvbG9yOiNiMDdmYzc7Ij4ke3BvbmRUeXBlPT09J3N1cCc/J0JUUy9TdXAgw5cxLjI1JzonMcOocmUvVGVybSDDlzEuMSd9PC9zcGFuPgogICAgPC90ZD4KICAgICR7dmlzaWJsZVN1YmplY3RzLm1hcChzID0+IGA8dGQ+PGlucHV0IGNsYXNzPSJpbnAtY29lZiIgdmFsdWU9IiR7REFUQS5sZXZlbENvbmZpZ1tuYW1lXVtzXS5jb2VmIHx8IGRlZmF1bHRDb2VmfSIgb25jaGFuZ2U9InVwZEx2bCgnJHtzYWZlTmFtZX0nLCcke3MucmVwbGFjZSgvJy9nLCAiXFwnIil9JywnY29lZicsdGhpcy52YWx1ZSkiIHN0eWxlPSJjb2xvcjojOGU0NGFkO2ZvbnQtd2VpZ2h0OjcwMDsiPjwvdGQ+YCkuam9pbignJyl9CiAgICA8dGQgc3R5bGU9ImJhY2tncm91bmQ6I2Y0ZjZmOTsiPjwvdGQ+PC90cj5gIDogJyd9CiAgICAKICAgIDx0ciBzdHlsZT0iYmFja2dyb3VuZDojZmZmOyI+PHRkIHN0eWxlPSJ0ZXh0LWFsaWduOmNlbnRlcjsgZm9udC13ZWlnaHQ6Ym9sZDsgY29sb3I6IzdmOGM4ZDsgZm9udC1zaXplOjAuNzVyZW07Ij5PZmYuPC90ZD4KICAgICR7dmlzaWJsZVN1YmplY3RzLm1hcChzID0+IHsKICAgICAgICBjb25zdCBtID0gREFUQS5zdWJqZWN0TWV0YVtzXTsKICAgICAgICBpZiAobS5tb2RlID09PSAnbGV2ZWwnKSByZXR1cm4gYDx0ZCBzdHlsZT0iYmFja2dyb3VuZDojZmRmMmU5OyBjb2xvcjojZDM1NDAwOyBmb250LXdlaWdodDpib2xkOyB0ZXh0LWFsaWduOmNlbnRlcjsiPiR7bS52b2xMZXZlbFtuYW1lXSB8fCAwfTwvdGQ+YDsKICAgICAgICBjb25zdCBjZmcgPSBEQVRBLmxldmVsQ29uZmlnW25hbWVdW3NdOwogICAgICAgIGNvbnN0IGV4cHJMYWJlbCA9IGNmZ1RvRXhwckxhYmVsKGNmZyk7CiAgICAgICAgY29uc3QgaGFzRGVtaSA9IChjZmcuZGVtaSB8fCAwKSA+IDA7CiAgICAgICAgY29uc3QgdG90YWxFZmYgPSBnZXRFZmZlY3RpdmVCYXNlKGNmZyk7CiAgICAgICAgcmV0dXJuIGA8dGQgc3R5bGU9InBhZGRpbmc6MnB4OyI+PGRpdiBzdHlsZT0iZGlzcGxheTpmbGV4O2ZsZXgtZGlyZWN0aW9uOmNvbHVtbjthbGlnbi1pdGVtczpjZW50ZXI7Z2FwOjFweDsiPgogICAgICAgICAgICA8aW5wdXQgY2xhc3M9ImlucC1ob3VycyR7aGFzRGVtaT8nIGhhcy1kZW1pJzonJ30iIHR5cGU9InRleHQiIHZhbHVlPSIke2V4cHJMYWJlbH0iIHRpdGxlPSJFbnRyZXogdW4gbm9tYnJlIChleDogMykgb3UgY2xhc3NlIGVudGnDqHJlICsgZGVtaS1jbGFzc2UgKGV4OiAyKygxKSkiIHBsYWNlaG9sZGVyPSJleDogMisoMSkiIG9uY2hhbmdlPSJ1cGRMdmwoJyR7c2FmZU5hbWV9JywnJHtzLnJlcGxhY2UoLycvZywgIlxcJyIpfScsJ2Jhc2UnLHRoaXMudmFsdWUpIiBvbmlucHV0PSJ1cGRhdGVJbnBIb3Vyc1N0eWxlKHRoaXMpIj4KICAgICAgICAgICAgJHtoYXNEZW1pID8gYDxzcGFuIGNsYXNzPSJpbnAtZGVtaS1sYWJlbCI+PSZ0aGluc3A7JHt0b3RhbEVmZn1oIHByb2Y8L3NwYW4+YCA6ICcnfQogICAgICAgIDwvZGl2PjwvdGQ+YDsKICAgIH0pLmpvaW4oJycpfQogICAgPHRkIHJvd3NwYW49IjIiIGlkPSJ0b3QtbHZsIiBzdHlsZT0iZm9udC13ZWlnaHQ6Ym9sZDsgZm9udC1zaXplOjEuMXJlbTsgdmVydGljYWwtYWxpZ246bWlkZGxlOyI+LTwvdGQ+PC90cj4KICAgIAogICAgPHRyIHN0eWxlPSJiYWNrZ3JvdW5kOiNmZmZjZjU7Ij48dGQgc3R5bGU9InRleHQtYWxpZ246Y2VudGVyOyBmb250LXdlaWdodDpib2xkOyBjb2xvcjojZDM1NDAwOyBmb250LXNpemU6MC42NXJlbTsiPkF1dG9ub21pZTwvdGQ+CiAgICAke3Zpc2libGVTdWJqZWN0cy5tYXAocyA9PiB7CiAgICAgICAgaWYgKERBVEEuc3ViamVjdE1ldGFbc10ubW9kZSA9PT0gJ2xldmVsJykgcmV0dXJuIGA8dGQgc3R5bGU9ImJhY2tncm91bmQ6I2ZkZjJlOTsiPjwvdGQ+YDsgCiAgICAgICAgcmV0dXJuIGA8dGQ+PGlucHV0IGNsYXNzPSJpbnAtbWFyZ2UiIHZhbHVlPSIke0RBVEEubGV2ZWxDb25maWdbbmFtZV1bc10ubWFyZ2V9IiBvbmNoYW5nZT0idXBkTHZsKCcke3NhZmVOYW1lfScsJyR7cy5yZXBsYWNlKC8nL2csICJcXCciKX0nLCdtYXJnZScsdGhpcy52YWx1ZSkiPjwvdGQ+YDsKICAgIH0pLmpvaW4oJycpfQogICAgPC90cj4KICAgIAogICAgPHRyIHN0eWxlPSJoZWlnaHQ6MTVweDsgYmFja2dyb3VuZDojZjRmNmY5OyI+PHRkIGNvbHNwYW49IiR7dmlzaWJsZVN1YmplY3RzLmxlbmd0aCsyfSI+PC90ZD48L3RyPmA7CiAgICAKICAgIC8vIDQuIENBTENVTCBERVMgQ0xBU1NFUwogICAgbGV0IGdyYW5kVG90YWxMZXZlbCA9IDA7CiAgICBsZXQgY29sVG90YWxzID0ge307IAogICAgdmlzaWJsZVN1YmplY3RzLmZvckVhY2gocyA9PiBjb2xUb3RhbHNbc10gPSAwKTsKCiAgICBmb3IobGV0IGk9MDsgaTxsdmwuZGl2OyBpKyspIHsKICAgICAgICBjb25zdCBjID0gYCR7cHJlZml4fSR7U3RyaW5nLmZyb21DaGFyQ29kZSg2NStpKX1gOwogICAgICAgIGNvbnN0IHNhZmVDID0gYy5yZXBsYWNlKC8nL2csICJcXCciKTsKICAgICAgICBjb25zdCBpc092ID0gISFEQVRBLmNsYXNzT3ZlcnJpZGVzW2NdOyAKICAgICAgICBsZXQgcm93VCA9IDA7IAogICAgICAgIGNvbnN0IGRpc3BsYXlOYW1lID0gKERBVEEuY2xhc3NOYW1lcyAmJiBEQVRBLmNsYXNzTmFtZXNbY10pID8gREFUQS5jbGFzc05hbWVzW2NdIDogYzsKCiAgICAgICAgaCArPSBgPHRyIHN0eWxlPSJiYWNrZ3JvdW5kOiR7aXNPdiA/ICcjZWFmMmY4JyA6ICd3aGl0ZSd9Ij4KICAgICAgICAgICAgPHRkIGNsYXNzPSJ0ZC1jbGFzcyI+CiAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJjbGFzcy1uYW1lLWJ0biIgb25jbGljaz0icmVuYW1lQ2xhc3MoJyR7c2FmZUN9Jyx0aGlzKSIgdGl0bGU9IkNsaXF1ZXIgcG91ciByZW5vbW1lciI+JHtkaXNwbGF5TmFtZX08L2J1dHRvbj4KICAgICAgICAgICAgICAgIDxsYWJlbCBzdHlsZT0iZGlzcGxheTpibG9jazsgZm9udC1zaXplOjAuNnJlbTsiPjxpbnB1dCB0eXBlPSJjaGVja2JveCIgJHtpc092PydjaGVja2VkJzonJ30gb25jaGFuZ2U9InRvZ2dsZU92KCcke3NhZmVDfScpIj4gUGVyc28uPC9sYWJlbD4KICAgICAgICAgICAgPC90ZD5gOwogICAgICAgICAgICAKICAgICAgICB2aXNpYmxlU3ViamVjdHMuZm9yRWFjaChzID0+IHsKICAgICAgICAgICAgaWYgKERBVEEuc3ViamVjdE1ldGFbc10ubW9kZSA9PT0gJ2xldmVsJykgewogICAgICAgICAgICAgICAgaCArPSBgPHRkIHN0eWxlPSJiYWNrZ3JvdW5kOiNmZGYyZTk7IGNvbG9yOiNjY2M7IHRleHQtYWxpZ246Y2VudGVyOyI+LTwvdGQ+YDsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGxldCB2ID0gaXNPdiAmJiBEQVRBLmNsYXNzT3ZlcnJpZGVzW2NdW3NdID8gREFUQS5jbGFzc092ZXJyaWRlc1tjXVtzXSA6IERBVEEubGV2ZWxDb25maWdbbmFtZV1bc107CiAgICAgICAgICAgICAgICBjb25zdCBlZmZCYXNlID0gZ2V0RWZmZWN0aXZlQmFzZSh2KTsKICAgICAgICAgICAgICAgIGNvbnN0IGNlbGxUb3RhbCA9IChlZmZCYXNlICsgKHYubWFyZ2V8fDApKSAqIChEQVRBLmxldmVsQ29uZmlnW25hbWVdW3NdLmNvZWYgfHwgMS4wKTsKICAgICAgICAgICAgICAgIHJvd1QgKz0gY2VsbFRvdGFsOyBjb2xUb3RhbHNbc10gKz0gY2VsbFRvdGFsOyAKICAgICAgICAgICAgICAgIGNvbnN0IGV4cHJMYWJlbCA9IGNmZ1RvRXhwckxhYmVsKHYpOwogICAgICAgICAgICAgICAgY29uc3QgaGFzRGVtaSA9ICh2LmRlbWkgfHwgMCkgPiAwOwogICAgICAgICAgICAgICAgaCArPSBgPHRkIHN0eWxlPSIke2lzT3Y/Jyc6J29wYWNpdHk6MC42OyBwb2ludGVyLWV2ZW50czpub25lOyd9Ij48ZGl2IGNsYXNzPSJ2ZXJ0aWNhbC1zdGFjayI+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iZGlzcGxheTpmbGV4O2ZsZXgtZGlyZWN0aW9uOmNvbHVtbjthbGlnbi1pdGVtczpjZW50ZXI7Z2FwOjFweDsiPgogICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgY2xhc3M9ImlucC1ob3VycyR7aGFzRGVtaT8nIGhhcy1kZW1pJzonJ30iIHR5cGU9InRleHQiIHZhbHVlPSIke2V4cHJMYWJlbH0iIHBsYWNlaG9sZGVyPSJleDogMisoMSkiIHRpdGxlPSJFbnRyZXogdW4gbm9tYnJlIG91IGV4OiAyKygxKSBwb3VyIGNsYXNzZSBlbnRpw6hyZStkZW1pIiBvbmNoYW5nZT0idXBkT3YoJyR7c2FmZUN9JywnJHtzLnJlcGxhY2UoLycvZywgIlxcJyIpfScsJ2Jhc2UnLHRoaXMudmFsdWUpIiBvbmlucHV0PSJ1cGRhdGVJbnBIb3Vyc1N0eWxlKHRoaXMpIj4KICAgICAgICAgICAgICAgICAgICAgICAgJHtoYXNEZW1pID8gYDxzcGFuIGNsYXNzPSJpbnAtZGVtaS1sYWJlbCI+PSZ0aGluc3A7JHtlZmZCYXNlfWggcHJvZjwvc3Bhbj5gIDogJyd9CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPGlucHV0IGNsYXNzPSJpbnAtbWFyZ2UiIHZhbHVlPSIke3YubWFyZ2V9IiBvbmNoYW5nZT0idXBkT3YoJyR7c2FmZUN9JywnJHtzLnJlcGxhY2UoLycvZywgIlxcJyIpfScsJ21hcmdlJyx0aGlzLnZhbHVlKSI+CiAgICAgICAgICAgICAgICA8L2Rpdj48L3RkPmA7CiAgICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgICBncmFuZFRvdGFsTGV2ZWwgKz0gcm93VDsKICAgICAgICBoICs9IGA8dGQgc3R5bGU9ImZvbnQtd2VpZ2h0OmJvbGQ7Ij4ke3Jvd1QudG9GaXhlZCgxKX08L3RkPjwvdHI+YDsKICAgIH0KCiAgICAvLyA1LiBMT0dJUVVFIEVEUyA6IE9uIGFmZmljaGUgdW5pcXVlbWVudCBsYSBsaWduZSBkZSByw6lzdW3DqSBnbG9iYWwgZHUgbml2ZWF1CiAgICBsZXQgdG90YWxFZHNOaXZlYXUgPSAwOwogICAgY29uc3QgbG93ZXJOYW1lID0gbmFtZS50b0xvd2VyQ2FzZSgpOwogICAgbGV0IGxldmVsS2V5ID0gIiI7CiAgICAKICAgIGlmIChsb3dlck5hbWUuaW5jbHVkZXMoIjEiKSB8fCBsb3dlck5hbWUuaW5jbHVkZXMoInByZW0iKSkgbGV2ZWxLZXkgPSAicHJlbWllcmUiOwogICAgZWxzZSBpZiAobG93ZXJOYW1lLmluY2x1ZGVzKCJ0ZXJtIikgfHwgbG93ZXJOYW1lLmluY2x1ZGVzKCJ0bGUiKSkgbGV2ZWxLZXkgPSAidGVybWluYWxlIjsKCiAgICBpZiAobGV2ZWxLZXkgJiYgREFUQS5lZHMgJiYgREFUQS5lZHNbbGV2ZWxLZXldKSB7CiAgICAgICAgREFUQS5lZHNbbGV2ZWxLZXldLmZvckVhY2goZSA9PiB7CiAgICAgICAgICAgIGNvbnN0IHZvbCA9IHBhcnNlRmxvYXQoZS5oUGVyR3JvdXApIHx8IChsZXZlbEtleSA9PT0gJ3ByZW1pZXJlJyA/IDQgOiA2KTsKICAgICAgICAgICAgY29uc3QgY29lZiA9IHBhcnNlRmxvYXQoZS5jb2VmKSB8fCAxLjA7CiAgICAgICAgICAgIHRvdGFsRWRzTml2ZWF1ICs9IChwYXJzZUZsb2F0KGUuZ3JvdXBzKSB8fCAwKSAqIHZvbCAqIGNvZWY7CiAgICAgICAgfSk7CiAgICB9CgogICAgaWYgKHRvdGFsRWRzTml2ZWF1ID4gMCkgewogICAgICAgIGggKz0gYDx0ciBzdHlsZT0iYmFja2dyb3VuZDojZWJmNWZiOyBmb250LXN0eWxlOml0YWxpYzsgZm9udC13ZWlnaHQ6Ym9sZDsgY29sb3I6IzI5ODBiOTsiPgogICAgICAgICAgICA8dGQgc3R5bGU9InRleHQtYWxpZ246cmlnaHQ7IHBhZGRpbmctcmlnaHQ6MTBweDsiPvCfjpMgU3DDqWNpYWxpdMOpcyAoRURTKTwvdGQ+CiAgICAgICAgICAgIDx0ZCBjb2xzcGFuPSIke3Zpc2libGVTdWJqZWN0cy5sZW5ndGh9IiBzdHlsZT0idGV4dC1hbGlnbjpsZWZ0OyBwYWRkaW5nLWxlZnQ6MjBweDsgY29sb3I6IzdmOGM4ZDsgZm9udC13ZWlnaHQ6bm9ybWFsOyI+CiAgICAgICAgICAgICAgICBWb2x1bWUgZ2xvYmFsIGNhbGN1bMOpIGRhbnMgbCdvbmdsZXQgU3DDqWNpYWxpdMOpcwogICAgICAgICAgICA8L3RkPgogICAgICAgICAgICA8dGQ+JHt0b3RhbEVkc05pdmVhdS50b0ZpeGVkKDEpfTwvdGQ+CiAgICAgICAgPC90cj5gOwogICAgICAgIGdyYW5kVG90YWxMZXZlbCArPSB0b3RhbEVkc05pdmVhdTsKICAgIH0KCiAgICAvLyA2LiBQSUVEIERFIFRBQkxFQVUKICAgIGggKz0gYDx0ciBzdHlsZT0iYmFja2dyb3VuZDojMzQ0OTVlOyBjb2xvcjp3aGl0ZTsgZm9udC13ZWlnaHQ6Ym9sZDsiPgogICAgICAgICAgICA8dGQgc3R5bGU9InRleHQtYWxpZ246cmlnaHQ7IHBhZGRpbmctcmlnaHQ6MTBweDsiPlRPVEFMIE5JVi48L3RkPmA7CiAgICB2aXNpYmxlU3ViamVjdHMuZm9yRWFjaChzID0+IHsKICAgICAgICBjb25zdCBtID0gREFUQS5zdWJqZWN0TWV0YVtzXTsKICAgICAgICBpZiAobS5tb2RlID09PSAnbGV2ZWwnKSB7CiAgICAgICAgICAgIGNvbnN0IHZvbCA9IHBhcnNlRmxvYXQobS52b2xMZXZlbFtuYW1lXSB8fCAwKTsKICAgICAgICAgICAgaCArPSBgPHRkPiR7dm9sLnRvRml4ZWQoMSl9PC90ZD5gOwogICAgICAgICAgICBncmFuZFRvdGFsTGV2ZWwgKz0gdm9sOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGggKz0gYDx0ZD4ke2NvbFRvdGFsc1tzXS50b0ZpeGVkKDEpfTwvdGQ+YDsKICAgICAgICB9CiAgICB9KTsKICAgIGggKz0gYDx0ZCBpZD0idG90YWwtZmluYWwtZ3JpbGxlIiBzdHlsZT0iZm9udC1zaXplOjEuMXJlbTsgY29sb3I6I2YxYzQwZjsiPiR7Z3JhbmRUb3RhbExldmVsLnRvRml4ZWQoMSl9PC90ZD48L3RyPmA7CgogICAgY29udC5pbm5lckhUTUwgPSBoICsgJzwvdGJvZHk+PC90YWJsZT48L2Rpdj4nOwoKICAgIC8vIE1pc2Ugw6Agam91ciBkZXMgY29tcHRldXJzIGV0IEtQSQogICAgbGV0IHRvdENvbmYgPSAwOyAKICAgIHZpc2libGVTdWJqZWN0cy5mb3JFYWNoKHMgPT4gewogICAgICAgIGNvbnN0IG0gPSBEQVRBLnN1YmplY3RNZXRhW3NdOwogICAgICAgIGlmIChtLm1vZGUgPT09ICdsZXZlbCcpIHRvdENvbmYgKz0gcGFyc2VGbG9hdChtLnZvbExldmVsW25hbWVdIHx8IDApOwogICAgICAgIGVsc2UgdG90Q29uZiArPSAoREFUQS5sZXZlbENvbmZpZ1tuYW1lXVtzXS5iYXNlICsgREFUQS5sZXZlbENvbmZpZ1tuYW1lXVtzXS5tYXJnZSkgKiAoREFUQS5sZXZlbENvbmZpZ1tuYW1lXVtzXS5jb2VmIHx8IDEpOwogICAgfSk7CiAgICBjb25zdCBlbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0b3QtbHZsJyk7CiAgICBpZihlbCkgZWwuaW5uZXJUZXh0ID0gdG90Q29uZi50b0ZpeGVkKDEpOwoKICAgIHVwZGF0ZUdyaWRDb3VudGVyKCk7Cn0KCmZ1bmN0aW9uIHJlbmRlckdsb2JhbEdyaWQoKSB7CiAgICBjb25zdCBjb250ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2dyaWQtY29udGFpbmVyJyk7CiAgICAKICAgIC8vIFPDqXBhcmF0aW9uIGRlcyBtYXRpw6hyZXMgcGFyIG1vZGUgcG91ciBsJ29yZ2FuaXNhdGlvbiBkZXMgY29sb25uZXMKICAgIGNvbnN0IHN1YmplY3RzRGl2ID0gREFUQS5zdWJqZWN0cy5maWx0ZXIocyA9PiBEQVRBLnN1YmplY3RNZXRhW3NdLm1vZGUgPT09ICdkaXYnKTsKICAgIGNvbnN0IHN1YmplY3RzTGV2ZWwgPSBEQVRBLnN1YmplY3RzLmZpbHRlcihzID0+IERBVEEuc3ViamVjdE1ldGFbc10ubW9kZSA9PT0gJ2xldmVsJyk7CiAgICBjb25zdCBzdWJqZWN0c0V0YWIgPSBEQVRBLnN1YmplY3RzLmZpbHRlcihzID0+IERBVEEuc3ViamVjdE1ldGFbc10ubW9kZSA9PT0gJ2V0YWInKTsKICAgIAogICAgbGV0IHRvdGFsRGVjaGFyZ2VzID0gMDsKICAgIGdldEVudGl0eVRlYWNoZXJzKCkuZm9yRWFjaCh0ID0+IHRvdGFsRGVjaGFyZ2VzICs9ICh0LmRlY2hhcmdlIHx8IDApKTsKCiAgICBsZXQgZ3JhbmRUb3RhbFRvdGFsRXRhYiA9IDA7IAogICAgbGV0IGNvbFRvdGFscyA9IHt9OyAKICAgIERBVEEuc3ViamVjdHMuZm9yRWFjaChzID0+IGNvbFRvdGFsc1tzXSA9IDApOwoKICAgIC8vIENvbnN0cnVjdGlvbiBkZSBsJ2VuLXTDqnRlIGRlIGxhIHRhYmxlCiAgICBsZXQgaCA9IGA8ZGl2IGNsYXNzPSJncmlkLXdyYXBwZXIiPjx0YWJsZSBjbGFzcz0iZ3JpZC10YWJsZSIgc3R5bGU9ImZvbnQtc2l6ZTowLjhyZW07Ij4KICAgIDx0aGVhZD48dHI+PHRoIGNsYXNzPSJ0aC1jbGFzcyIgc3R5bGU9IndpZHRoOjEwMHB4OyI+Q2xhc3NlIC8gTml2ZWF1PC90aD4KICAgICR7c3ViamVjdHNEaXYubWFwKHMgPT4gYDx0aCBjbGFzcz0idGgtdmVydGljYWwiIHN0eWxlPSJoZWlnaHQ6MTIwcHg7Ij48ZGl2IGNsYXNzPSJ0aC10ZXh0LXdyYXBwZXIiIHN0eWxlPSJoZWlnaHQ6ODBweDsiPiR7c308L2Rpdj48L3RoPmApLmpvaW4oJycpfQogICAgJHtzdWJqZWN0c0xldmVsLm1hcChzID0+IGA8dGggY2xhc3M9InRoLXZlcnRpY2FsIiBzdHlsZT0iaGVpZ2h0OjEyMHB4OyBiYWNrZ3JvdW5kOiNmZGYyZTk7IGJvcmRlci1ib3R0b206MnB4IHNvbGlkICNlNjdlMjI7Ij48ZGl2IGNsYXNzPSJ0aC10ZXh0LXdyYXBwZXIiIHN0eWxlPSJoZWlnaHQ6ODBweDsgY29sb3I6I2QzNTQwMDsiPiR7c308YnI+KE5pdik8L2Rpdj48L3RoPmApLmpvaW4oJycpfQogICAgJHtzdWJqZWN0c0V0YWIubWFwKHMgPT4gYDx0aCBjbGFzcz0idGgtdmVydGljYWwiIHN0eWxlPSJoZWlnaHQ6MTIwcHg7IGJhY2tncm91bmQ6I2U4ZjhmNTsgYm9yZGVyLWJvdHRvbToycHggc29saWQgIzFhYmM5YzsiPjxkaXYgY2xhc3M9InRoLXRleHQtd3JhcHBlciIgc3R5bGU9ImhlaWdodDo4MHB4OyBjb2xvcjojMTZhMDg1OyI+JHtzfTxicj4oRXRhYik8L2Rpdj48L3RoPmApLmpvaW4oJycpfQogICAgPHRoIGNsYXNzPSJ0aC12ZXJ0aWNhbCIgc3R5bGU9ImhlaWdodDoxMjBweDsgYmFja2dyb3VuZDojZmZmY2Y1OyBib3JkZXItYm90dG9tOjJweCBzb2xpZCAjZjM5YzEyOyI+PGRpdiBjbGFzcz0idGgtdGV4dC13cmFwcGVyIiBzdHlsZT0iaGVpZ2h0OjgwcHg7IGNvbG9yOiNkMzU0MDA7Ij5Ew6lnYWdlbWVudHM8YnI+KEludGVybmUpPC9kaXY+PC90aD4KICAgIDx0aCBjbGFzcz0idGgtdmVydGljYWwiIHN0eWxlPSJoZWlnaHQ6MTIwcHg7Ij48ZGl2IHN0eWxlPSJ3cml0aW5nLW1vZGU6dmVydGljYWwtcmw7IHRyYW5zZm9ybTpyb3RhdGUoMTgwZGVnKTsgbWFyZ2luOjAgYXV0bzsiPlRvdGFsPC9kaXY+PC90aD4KICAgIDwvdHI+PC90aGVhZD48dGJvZHk+YDsKCiAgICBjb25zdCBhbGxQcmVmaXhlcyA9IGdldEFsbFVuaXF1ZVByZWZpeGVzKCk7CgogICAgREFUQS5zdHJ1Y3R1cmUuZm9yRWFjaCgobHZsLCBpZHgpID0+IHsKICAgICAgICBjb25zdCBuYW1lID0gbHZsLmxldmVsOwogICAgICAgIGNvbnN0IHByZWZpeCA9IGFsbFByZWZpeGVzW2lkeF07CiAgICAgICAgCiAgICAgICAgbGV0IGxldmVsQ29sVG90YWxzID0ge307CiAgICAgICAgREFUQS5zdWJqZWN0cy5mb3JFYWNoKHMgPT4gbGV2ZWxDb2xUb3RhbHNbc10gPSAwKTsKICAgICAgICBsZXQgbGV2ZWxSb3dUb3RhbFRDID0gMDsKCiAgICAgICAgLy8gLS0tIDEuIEFGRklDSEFHRSBERVMgQ0xBU1NFUyAtLS0KICAgICAgICBmb3IobGV0IGk9MDsgaTxsdmwuZGl2OyBpKyspIHsKICAgICAgICAgICAgIGNvbnN0IGMgPSBgJHtwcmVmaXh9JHtTdHJpbmcuZnJvbUNoYXJDb2RlKDY1K2kpfWA7CiAgICAgICAgICAgICBjb25zdCBkaXNwbGF5TmFtZSA9IChEQVRBLmNsYXNzTmFtZXMgJiYgREFUQS5jbGFzc05hbWVzW2NdKSA/IERBVEEuY2xhc3NOYW1lc1tjXSA6IGM7CiAgICAgICAgICAgICBsZXQgcm93VG90YWwgPSAwOwogICAgICAgICAgICAgCiAgICAgICAgICAgICBoICs9IGA8dHI+PHRkIHN0eWxlPSJmb250LXdlaWdodDpib2xkOyBwYWRkaW5nLWxlZnQ6MTVweDsiPiR7ZGlzcGxheU5hbWV9PC90ZD5gOwogICAgICAgICAgICAgCiAgICAgICAgICAgICBzdWJqZWN0c0Rpdi5mb3JFYWNoKHMgPT4gewogICAgICAgICAgICAgICAgIGxldCB2YWwgPSAwOwogICAgICAgICAgICAgICAgIGlmKERBVEEuc3ViamVjdE1ldGFbc10ubGV2ZWxzICYmIERBVEEuc3ViamVjdE1ldGFbc10ubGV2ZWxzLmluY2x1ZGVzKG5hbWUpKSB7CiAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGlzT3YgPSBEQVRBLmNsYXNzT3ZlcnJpZGVzW2NdICYmIERBVEEuY2xhc3NPdmVycmlkZXNbY11bc107CiAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNmZyA9IGlzT3YgPyBEQVRBLmNsYXNzT3ZlcnJpZGVzW2NdW3NdIDogREFUQS5sZXZlbENvbmZpZ1tuYW1lXVtzXTsKICAgICAgICAgICAgICAgICAgICAgdmFsID0gKGdldEVmZmVjdGl2ZUJhc2UoY2ZnKSArIChjZmcubWFyZ2V8fDApKSAqIChjZmcuY29lZiB8fCAxLjApOwogICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICBpZih2YWwgPiAwKSB7CiAgICAgICAgICAgICAgICAgICAgIGxldmVsQ29sVG90YWxzW3NdICs9IHZhbDsgCiAgICAgICAgICAgICAgICAgICAgIGNvbFRvdGFsc1tzXSArPSB2YWw7ICAgICAgCiAgICAgICAgICAgICAgICAgICAgIHJvd1RvdGFsICs9IHZhbDsKICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgaCArPSBgPHRkPiR7dmFsID4gMCA/IHBhcnNlRmxvYXQodmFsLnRvRml4ZWQoMikpIDogJy0nfTwvdGQ+YDsKICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgCiAgICAgICAgICAgICAvLyBDb2xvbm5lcyB2aWRlcyBwb3VyIGxlcyBtb2RlcyBIb3JzLURpdmlzaW9uIGF1IG5pdmVhdSBkZSBsYSBjbGFzc2UKICAgICAgICAgICAgIHN1YmplY3RzTGV2ZWwuZm9yRWFjaChzID0+IGggKz0gYDx0ZCBzdHlsZT0iYmFja2dyb3VuZDojZmRmMmU5OyBvcGFjaXR5OjAuNTsiPi08L3RkPmApOwogICAgICAgICAgICAgc3ViamVjdHNFdGFiLmZvckVhY2gocyA9PiBoICs9IGA8dGQgc3R5bGU9ImJhY2tncm91bmQ6I2U4ZjhmNTsgb3BhY2l0eTowLjU7Ij4tPC90ZD5gKTsKICAgICAgICAgICAgIGggKz0gYDx0ZCBzdHlsZT0iYmFja2dyb3VuZDojZmZmY2Y1OyBvcGFjaXR5OjAuNTsiPi08L3RkPmA7CiAgICAgICAgICAgICBoICs9IGA8dGQgc3R5bGU9ImZvbnQtd2VpZ2h0OmJvbGQ7Ij4ke3BhcnNlRmxvYXQocm93VG90YWwudG9GaXhlZCgyKSl9PC90ZD48L3RyPmA7CiAgICAgICAgICAgICBsZXZlbFJvd1RvdGFsVEMgKz0gcm93VG90YWw7CiAgICAgICAgfQoKICAgICAgICAvLyAtLS0gMi4gR0VTVElPTiBERVMgRURTIChTcMOpY2lhbGl0w6lzIEx5Y8OpZSkgLS0tCiAgICAgICAgbGV0IHRvdGFsRWRzTml2ZWF1ID0gMDsKICAgICAgICBsZXQgbGV2ZWxLZXkgPSAiIjsKICAgICAgICBjb25zdCBsb3dlck5hbWUgPSBuYW1lLnRvTG93ZXJDYXNlKCk7CiAgICAgICAgCiAgICAgICAgaWYgKGxvd2VyTmFtZS5tYXRjaCgvMcOocmV8MWVyfDFnfHByZW1pLykpIHsKICAgICAgICAgICAgbGV2ZWxLZXkgPSAicHJlbWllcmUiOwogICAgICAgIH0gZWxzZSBpZiAobG93ZXJOYW1lLm1hdGNoKC90ZXJtfHRsZXx0Zy8pKSB7CiAgICAgICAgICAgIGxldmVsS2V5ID0gInRlcm1pbmFsZSI7CiAgICAgICAgfQogICAgICAgIAogICAgICAgIGlmIChsZXZlbEtleSAmJiBEQVRBLmVkcyAmJiBEQVRBLmVkc1tsZXZlbEtleV0pIHsKICAgICAgICAgICAgREFUQS5lZHNbbGV2ZWxLZXldLmZvckVhY2goZSA9PiB7CiAgICAgICAgICAgICAgICBjb25zdCB2b2wgPSBwYXJzZUZsb2F0KGUuaFBlckdyb3VwKSB8fCAobGV2ZWxLZXkgPT09ICdwcmVtaWVyZScgPyA0IDogNik7CiAgICAgICAgICAgICAgICBjb25zdCBjb2VmID0gcGFyc2VGbG9hdChlLmNvZWYpIHx8IDEuMDsKICAgICAgICAgICAgICAgIHRvdGFsRWRzTml2ZWF1ICs9IChwYXJzZUZsb2F0KGUuZ3JvdXBzKSB8fCAwKSAqIHZvbCAqIGNvZWY7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0KCiAgICAgICAgLy8gQWZmaWNoYWdlIGRlIGxhIGxpZ25lIEVEUyBzaSBhcHBsaWNhYmxlCiAgICAgICAgaWYgKHRvdGFsRWRzTml2ZWF1ID4gMCkgewogICAgICAgICAgICBoICs9IGA8dHIgc3R5bGU9ImJhY2tncm91bmQ6I2ViZjVmYjsgZm9udC1zdHlsZTppdGFsaWM7Ij4KICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT0idGV4dC1hbGlnbjpsZWZ0OyBwYWRkaW5nLWxlZnQ6MjVweDsgY29sb3I6IzI5ODBiOTsiPuKGsyBTcMOpY2lhbGl0w6lzIChFRFMpPC90ZD4KICAgICAgICAgICAgICAgIDx0ZCBjb2xzcGFuPSIke3N1YmplY3RzRGl2Lmxlbmd0aH0iIHN0eWxlPSJjb2xvcjojN2Y4YzhkOyBmb250LXNpemU6MC43NXJlbTsgdGV4dC1hbGlnbjpjZW50ZXI7Ij5Wb2x1bWUgZ2xvYmFsIGR1IG5pdmVhdTwvdGQ+YDsKICAgICAgICAgICAgCiAgICAgICAgICAgIHN1YmplY3RzTGV2ZWwuZm9yRWFjaChzID0+IGggKz0gYDx0ZCBzdHlsZT0iYmFja2dyb3VuZDojZmRmMmU5OyBvcGFjaXR5OjAuNTsiPi08L3RkPmApOwogICAgICAgICAgICBzdWJqZWN0c0V0YWIuZm9yRWFjaChzID0+IGggKz0gYDx0ZCBzdHlsZT0iYmFja2dyb3VuZDojZThmOGY1OyBvcGFjaXR5OjAuNTsiPi08L3RkPmApOwogICAgICAgICAgICBoICs9IGA8dGQgc3R5bGU9ImJhY2tncm91bmQ6I2ZmZmNmNTsgb3BhY2l0eTowLjU7Ij4tPC90ZD5gOwogICAgICAgICAgICBoICs9IGA8dGQgc3R5bGU9ImZvbnQtd2VpZ2h0OmJvbGQ7IGNvbG9yOiMyOTgwYjk7Ij4ke3RvdGFsRWRzTml2ZWF1LnRvRml4ZWQoMSl9PC90ZD48L3RyPmA7CiAgICAgICAgfQoKICAgICAgICAvLyAtLS0gMy4gU09VUy1UT1RBTCBEVSBOSVZFQVUgLS0tCiAgICAgICAgaCArPSBgPHRyIHN0eWxlPSJiYWNrZ3JvdW5kOiNlY2YwZjE7IGJvcmRlci10b3A6MXB4IHNvbGlkICNiZGMzYzc7IGZvbnQtd2VpZ2h0OmJvbGQ7Ij4KICAgICAgICAgICAgPHRkIHN0eWxlPSJ0ZXh0LWFsaWduOnJpZ2h0OyBjb2xvcjojMmMzZTUwOyBmb250LXN0eWxlOml0YWxpYzsiPlNPVVMtVE9UQUwgJHtuYW1lLnRvVXBwZXJDYXNlKCl9PC90ZD5gOwogICAgICAgIAogICAgICAgIGxldCBzdWJSb3dTdW0gPSB0b3RhbEVkc05pdmVhdTsgCiAgICAgICAgc3ViamVjdHNEaXYuZm9yRWFjaChzID0+IHsKICAgICAgICAgICAgY29uc3QgdmFsID0gbGV2ZWxDb2xUb3RhbHNbc107CiAgICAgICAgICAgIHN1YlJvd1N1bSArPSB2YWw7CiAgICAgICAgICAgIGggKz0gYDx0ZCBzdHlsZT0iZm9udC1zaXplOjAuODVyZW07Ij4ke3ZhbCA+IDAgPyBwYXJzZUZsb2F0KHZhbC50b0ZpeGVkKDIpKSA6ICctJ308L3RkPmA7CiAgICAgICAgfSk7CgogICAgICAgIHN1YmplY3RzTGV2ZWwuZm9yRWFjaChzID0+IHsKICAgICAgICAgICAgY29uc3QgdmFsID0gREFUQS5zdWJqZWN0TWV0YVtzXS52b2xMZXZlbCA/IHBhcnNlRmxvYXQoREFUQS5zdWJqZWN0TWV0YVtzXS52b2xMZXZlbFtuYW1lXSB8fCAwKSA6IDA7CiAgICAgICAgICAgIGNvbFRvdGFsc1tzXSArPSB2YWw7CiAgICAgICAgICAgIHN1YlJvd1N1bSArPSB2YWw7CiAgICAgICAgICAgIGggKz0gYDx0ZCBzdHlsZT0iYmFja2dyb3VuZDojZmFlNWQzOyBjb2xvcjojZDM1NDAwOyI+JHt2YWwgPiAwID8gdmFsLnRvRml4ZWQoMSkgOiAnLSd9PC90ZD5gOwogICAgICAgIH0pOwoKICAgICAgICBzdWJqZWN0c0V0YWIuZm9yRWFjaChzID0+IGggKz0gYDx0ZCBzdHlsZT0iYmFja2dyb3VuZDojZThmOGY1OyI+LTwvdGQ+YCk7CiAgICAgICAgaCArPSBgPHRkIHN0eWxlPSJiYWNrZ3JvdW5kOiNmZmZjZjU7Ij4tPC90ZD5gOwoKICAgICAgICBncmFuZFRvdGFsVG90YWxFdGFiICs9IHN1YlJvd1N1bTsgCiAgICAgICAgaCArPSBgPHRkIHN0eWxlPSJiYWNrZ3JvdW5kOiNiZGMzYzc7IGNvbG9yOiMyYzNlNTA7Ij4ke3N1YlJvd1N1bS50b0ZpeGVkKDEpfTwvdGQ+PC90cj5gOwogICAgfSk7CgogICAgLy8gLS0tIDQuIFBJRUQgREUgVEFCTEVBVSAoVE9UQUwgR8OJTsOJUkFMIMOJVEFCTElTU0VNRU5UKSAtLS0KICAgIGggKz0gYDx0ciBzdHlsZT0iYmFja2dyb3VuZDojMmMzZTUwOyBjb2xvcjp3aGl0ZTsgZm9udC13ZWlnaHQ6Ym9sZDsgYm9yZGVyLXRvcDozcHggc29saWQgIzM0NDk1ZTsiPgogICAgICAgICAgPHRkIHN0eWxlPSJ0ZXh0LWFsaWduOnJpZ2h0OyBwYWRkaW5nLXJpZ2h0OjEwcHg7Ij5UT1RBTCBHw4lOw4lSQUw8L3RkPmA7CiAgICAKICAgIHN1YmplY3RzRGl2LmZvckVhY2gocyA9PiBoICs9IGA8dGQ+JHtjb2xUb3RhbHNbc10gPiAwID8gY29sVG90YWxzW3NdLnRvRml4ZWQoMSkgOiAnLSd9PC90ZD5gKTsKICAgIHN1YmplY3RzTGV2ZWwuZm9yRWFjaChzID0+IGggKz0gYDx0ZCBzdHlsZT0iY29sb3I6I2U2N2UyMjsiPiR7Y29sVG90YWxzW3NdID4gMCA/IGNvbFRvdGFsc1tzXS50b0ZpeGVkKDEpIDogJy0nfTwvdGQ+YCk7CiAgICAKICAgIC8vIEFmZmljaGFnZSBmb3Jjw6kgZGVzIG1hdGnDqHJlcyBhdSBmb3JmYWl0IMOJdGFibGlzc2VtZW50CiAgICBzdWJqZWN0c0V0YWIuZm9yRWFjaChzID0+IHsKICAgICAgICBsZXQgdmFsID0gcGFyc2VGbG9hdChEQVRBLnN1YmplY3RNZXRhW3NdLmV0YWIgfHwgMCk7CiAgICAgICAgZ3JhbmRUb3RhbFRvdGFsRXRhYiArPSB2YWw7CiAgICAgICAgaCArPSBgPHRkIHN0eWxlPSJjb2xvcjojMWFiYzljOyBmb250LXNpemU6MXJlbTsiPiR7dmFsID4gMCA/IHZhbC50b0ZpeGVkKDEpIDogJzAuMCd9PC90ZD5gOwogICAgfSk7CiAgICAKICAgIGggKz0gYDx0ZCBzdHlsZT0iYmFja2dyb3VuZDojZjM5YzEyOyBjb2xvcjp3aGl0ZTsgZm9udC1zaXplOjFyZW07Ij4ke3RvdGFsRGVjaGFyZ2VzID4gMCA/IHRvdGFsRGVjaGFyZ2VzLnRvRml4ZWQoMSkgOiAnLSd9PC90ZD5gOwogICAgZ3JhbmRUb3RhbFRvdGFsRXRhYiArPSB0b3RhbERlY2hhcmdlczsKCiAgICBoICs9IGA8dGQgc3R5bGU9ImJhY2tncm91bmQ6IzE2YTA4NTsgY29sb3I6d2hpdGU7IGZvbnQtc2l6ZToxLjJyZW07Ij4ke2dyYW5kVG90YWxUb3RhbEV0YWIudG9GaXhlZCgxKX08L3RkPjwvdHI+YDsKCiAgICBjb250LmlubmVySFRNTCA9IGggKyAnPC90Ym9keT48L3RhYmxlPjwvZGl2Pic7Cn0KCmZ1bmN0aW9uIG9wZW5XZWlnaHRpbmdNZW51KCkgewogICAgY29uc3QgY2hvaWNlID0gcHJvbXB0KCJHZXN0aW9uIGRlcyBDb2VmZmljaWVudHMgKFBvbmTDqXJhdGlvbilcblxuRW50cmV6IHVuZSB2YWxldXIgcG91ciBsJ2FwcGxpcXVlciDDoCBUT1VURVMgbGVzIG1hdGnDqHJlcy5cblxuKExhaXNzZXogdmlkZSBwb3VyIGFubnVsZXIpIik7CiAgICBpZihjaG9pY2UpIHsKICAgICAgICBjb25zdCB2YWwgPSBwYXJzZUZsb2F0KGNob2ljZSk7CiAgICAgICAgaWYoIWlzTmFOKHZhbCkpIHsKICAgICAgICAgICAgaWYoY29uZmlybShgQXBwbGlxdWVyIGxlIGNvZWZmaWNpZW50ICR7dmFsfSDDoCBUT1VURVMgbGVzIG1hdGnDqHJlcyBkZSBUT1VTIGxlcyBuaXZlYXV4ID9gKSkgewogICAgICAgICAgICAgICAgREFUQS5zdHJ1Y3R1cmUuZm9yRWFjaChsID0+IHsKICAgICAgICAgICAgICAgICAgICBEQVRBLnN1YmplY3RzLmZvckVhY2gocyA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKERBVEEubGV2ZWxDb25maWdbbC5sZXZlbF1bc10pIERBVEEubGV2ZWxDb25maWdbbC5sZXZlbF1bc10uY29lZiA9IHZhbDsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgc2F2ZURhdGEoKTsKICAgICAgICAgICAgICAgIHJlbmRlckdyaWRTeXN0ZW0oKTsKICAgICAgICAgICAgICAgIGFsZXJ0KCLinIUgQ29lZmZpY2llbnRzIG1pcyDDoCBqb3VyICEiKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KfQoKZnVuY3Rpb24gYWRkU3ViamVjdCgpeyBvcGVuQWRkU3ViamVjdE1vZGFsKCk7IH0KCi8qKiBDcsOpZSB1bmUgc3VyLW1hdGnDqHJlIGRlIHR5cGUgIlJlZ3JvdXBlbWVudCIgKi8KZnVuY3Rpb24gYWRkR3JvdXBTdWJqZWN0KCkgewogICAgbGV0IG92ZXJsYXkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWRkLWdyb3VwLXN1YmplY3QtbW9kYWwnKTsKICAgIGlmICghb3ZlcmxheSkgewogICAgICAgIG92ZXJsYXkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgICAgICBvdmVybGF5LmlkID0gJ2FkZC1ncm91cC1zdWJqZWN0LW1vZGFsJzsKICAgICAgICBvdmVybGF5LnN0eWxlLmNzc1RleHQgPSAnZGlzcGxheTpub25lOyBwb3NpdGlvbjpmaXhlZDsgdG9wOjA7IGxlZnQ6MDsgd2lkdGg6MTAwJTsgaGVpZ2h0OjEwMCU7IGJhY2tncm91bmQ6cmdiYSgwLDAsMCwwLjYpOyB6LWluZGV4OjMwMDAwOyBqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyOyBhbGlnbi1pdGVtczpjZW50ZXI7JzsKICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKG92ZXJsYXkpOwogICAgfQoKICAgIC8vIExpc3RlIGRlcyBtYXRpw6hyZXMgZXhpc3RhbnRlcyBwb3VyIHJhdHRhY2hlbWVudCBpbW3DqWRpYXQKICAgIGNvbnN0IHNvcnRlZFN1YnMgPSBbLi4uREFUQS5zdWJqZWN0c10uc29ydCgpOwogICAgY29uc3QgY2hlY2tib3hlcyA9IHNvcnRlZFN1YnMKICAgICAgICAuZmlsdGVyKHMgPT4gREFUQS5zdWJqZWN0TWV0YVtzXT8ubW9kZSAhPT0gJ2dyb3VwJykKICAgICAgICAubWFwKHMgPT4gYDxsYWJlbCBzdHlsZT0iZGlzcGxheTpmbGV4O2FsaWduLWl0ZW1zOmNlbnRlcjtnYXA6NnB4O3BhZGRpbmc6NHB4IDA7Y3Vyc29yOnBvaW50ZXI7Ij4KICAgICAgICAgICAgPGlucHV0IHR5cGU9ImNoZWNrYm94IiB2YWx1ZT0iJHtzLnJlcGxhY2UoLyIvZywnJnF1b3Q7Jyl9IiBzdHlsZT0id2lkdGg6MTZweDtoZWlnaHQ6MTZweDsiPgogICAgICAgICAgICA8c3Bhbj4ke3N9PC9zcGFuPgogICAgICAgIDwvbGFiZWw+YCkuam9pbignJyk7CgogICAgb3ZlcmxheS5pbm5lckhUTUwgPSBgCiAgICAgICAgPGRpdiBzdHlsZT0iYmFja2dyb3VuZDp3aGl0ZTsgYm9yZGVyLXJhZGl1czoxMnB4OyBwYWRkaW5nOjI4cHg7IHdpZHRoOjQ4MHB4OyBtYXgtd2lkdGg6OTV2dzsgYm94LXNoYWRvdzowIDEwcHggNDBweCByZ2JhKDAsMCwwLDAuMyk7Ij4KICAgICAgICAgICAgPGRpdiBzdHlsZT0iZGlzcGxheTpmbGV4OyBqdXN0aWZ5LWNvbnRlbnQ6c3BhY2UtYmV0d2VlbjsgYWxpZ24taXRlbXM6Y2VudGVyOyBtYXJnaW4tYm90dG9tOjE2cHg7Ij4KICAgICAgICAgICAgICAgIDxoMyBzdHlsZT0ibWFyZ2luOjA7IGNvbG9yOiM2YzM0ODM7Ij7wn5OCIE5vdXZlbGxlIFN1ci1NYXRpw6hyZTwvaDM+CiAgICAgICAgICAgICAgICA8YnV0dG9uIG9uY2xpY2s9ImRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhZGQtZ3JvdXAtc3ViamVjdC1tb2RhbCcpLnN0eWxlLmRpc3BsYXk9J25vbmUnIiBzdHlsZT0iYmFja2dyb3VuZDpub25lO2JvcmRlcjpub25lO2ZvbnQtc2l6ZToxLjRyZW07Y3Vyc29yOnBvaW50ZXI7Y29sb3I6Izk5OTsiPsOXPC9idXR0b24+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8cCBzdHlsZT0iZm9udC1zaXplOjAuODVyZW07IGNvbG9yOiM2NjY7IG1hcmdpbi1ib3R0b206MTZweDsgYmFja2dyb3VuZDojZjVlZWY4OyBwYWRkaW5nOjEwcHg7IGJvcmRlci1yYWRpdXM6NnB4OyBib3JkZXItbGVmdDo0cHggc29saWQgIzhlNDRhZDsiPgogICAgICAgICAgICAgICAgVW5lIDxiPnN1ci1tYXRpw6hyZTwvYj4gcmVncm91cGUgcGx1c2lldXJzIGRpc2NpcGxpbmVzIHBvdXIgbGUgY29tcHRhZ2UgZGVzIGhldXJlcyBkJ3VuIGVuc2VpZ25hbnQuIEVsbGUgbidhcHBhcmHDrnQgcGFzIGRhbnMgbGEgZ3JpbGxlIGhvcmFpcmUuCiAgICAgICAgICAgIDwvcD4KICAgICAgICAgICAgPGRpdiBzdHlsZT0ibWFyZ2luLWJvdHRvbToxNnB4OyI+CiAgICAgICAgICAgICAgICA8bGFiZWwgc3R5bGU9ImZvbnQtd2VpZ2h0OjYwMDsgZGlzcGxheTpibG9jazsgbWFyZ2luLWJvdHRvbTo2cHg7Ij5Ob20gZHUgcmVncm91cGVtZW50IDo8L2xhYmVsPgogICAgICAgICAgICAgICAgPGlucHV0IGlkPSJuZXctZ3JvdXAtbmFtZSIgcGxhY2Vob2xkZXI9IkV4OiBTY2llbmNlcyBMUCwgTGV0dHJlcy1IaXN0b2lyZS4uLiIgCiAgICAgICAgICAgICAgICAgICAgc3R5bGU9IndpZHRoOjEwMCU7IHBhZGRpbmc6MTBweDsgYm9yZGVyOjJweCBzb2xpZCAjOGU0NGFkOyBib3JkZXItcmFkaXVzOjZweDsgZm9udC1zaXplOjFyZW07IGJveC1zaXppbmc6Ym9yZGVyLWJveDsiPgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPGRpdiBzdHlsZT0ibWFyZ2luLWJvdHRvbToyMHB4OyI+CiAgICAgICAgICAgICAgICA8bGFiZWwgc3R5bGU9ImZvbnQtd2VpZ2h0OjYwMDsgZGlzcGxheTpibG9jazsgbWFyZ2luLWJvdHRvbTo4cHg7Ij5SYXR0YWNoZXIgZGVzIG1hdGnDqHJlcyBleGlzdGFudGVzIDo8L2xhYmVsPgogICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0ibWF4LWhlaWdodDoyMDBweDsgb3ZlcmZsb3cteTphdXRvOyBib3JkZXI6MXB4IHNvbGlkICNkZGQ7IGJvcmRlci1yYWRpdXM6NnB4OyBwYWRkaW5nOjhweCAxMnB4OyBiYWNrZ3JvdW5kOiNmYWZhZmE7Ij4KICAgICAgICAgICAgICAgICAgICAke2NoZWNrYm94ZXMgfHwgJzxlbSBzdHlsZT0iY29sb3I6I2FhYTsgZm9udC1zaXplOjAuODVyZW07Ij5BdWN1bmUgbWF0acOocmUgZGlzcG9uaWJsZTwvZW0+J30KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgPHNtYWxsIHN0eWxlPSJjb2xvcjojODg4OyBtYXJnaW4tdG9wOjRweDsgZGlzcGxheTpibG9jazsiPlZvdXMgcG91cnJleiBhdXNzaSByYXR0YWNoZXIgZGVzIG1hdGnDqHJlcyBwbHVzIHRhcmQgdmlhIGxhIGNvbG9ubmUgIlBhcmVudCI8L3NtYWxsPgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPGRpdiBzdHlsZT0iZGlzcGxheTpmbGV4OyBnYXA6MTBweDsganVzdGlmeS1jb250ZW50OmZsZXgtZW5kOyI+CiAgICAgICAgICAgICAgICA8YnV0dG9uIG9uY2xpY2s9ImRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhZGQtZ3JvdXAtc3ViamVjdC1tb2RhbCcpLnN0eWxlLmRpc3BsYXk9J25vbmUnIiAKICAgICAgICAgICAgICAgICAgICBzdHlsZT0icGFkZGluZzo4cHggMjBweDsgYm9yZGVyOjFweCBzb2xpZCAjZGRkOyBib3JkZXItcmFkaXVzOjZweDsgYmFja2dyb3VuZDojZjVmNWY1OyBjdXJzb3I6cG9pbnRlcjsiPkFubnVsZXI8L2J1dHRvbj4KICAgICAgICAgICAgICAgIDxidXR0b24gb25jbGljaz0iY29uZmlybUFkZEdyb3VwU3ViamVjdCgpIiAKICAgICAgICAgICAgICAgICAgICBzdHlsZT0icGFkZGluZzo4cHggMjBweDsgYm9yZGVyOm5vbmU7IGJvcmRlci1yYWRpdXM6NnB4OyBiYWNrZ3JvdW5kOiM4ZTQ0YWQ7IGNvbG9yOndoaXRlOyBmb250LXdlaWdodDo2MDA7IGN1cnNvcjpwb2ludGVyOyI+8J+TgiBDcsOpZXI8L2J1dHRvbj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgPC9kaXY+YDsKCiAgICBvdmVybGF5LnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7CiAgICBzZXRUaW1lb3V0KCgpID0+IHsgY29uc3QgaW5wID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ25ldy1ncm91cC1uYW1lJyk7IGlmKGlucCkgaW5wLmZvY3VzKCk7IH0sIDEwMCk7Cn0KCmZ1bmN0aW9uIGNvbmZpcm1BZGRHcm91cFN1YmplY3QoKSB7CiAgICBjb25zdCBuYW1lRWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbmV3LWdyb3VwLW5hbWUnKTsKICAgIGNvbnN0IHMgPSAobmFtZUVsPy52YWx1ZSB8fCAnJykudHJpbSgpOwogICAgaWYgKCFzKSB7IGFsZXJ0KCdWZXVpbGxleiBzYWlzaXIgdW4gbm9tLicpOyByZXR1cm47IH0KICAgIGlmIChEQVRBLnN1YmplY3RzLmluY2x1ZGVzKHMpKSB7IGFsZXJ0KCdDZSBub20gZXhpc3RlIGTDqWrDoCAhJyk7IHJldHVybjsgfQoKICAgIC8vIENyw6llciBsYSBzdXItbWF0acOocmUKICAgIERBVEEuc3ViamVjdHMucHVzaChzKTsKICAgIERBVEEuc3ViamVjdE1ldGFbc10gPSB7IG1vZGU6ICdncm91cCcsIGxldmVsczogW10sIGV0YWI6IDAsIHZvbExldmVsOiB7fSwgcGFyZW50OiAnJywgY29kZTogJycsIHBuZUNvZGU6ICcnIH07CiAgICAvLyBQYXMgZGUgY29sb25uZSBkYW5zIGxhIGdyaWxsZSBob3JhaXJlIHBvdXIgbGVzIHN1ci1tYXRpw6hyZXMKCiAgICAvLyBSYXR0YWNoZXIgbGVzIG1hdGnDqHJlcyBjb2Now6llcwogICAgY29uc3QgY2hlY2tib3hlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJyNhZGQtZ3JvdXAtc3ViamVjdC1tb2RhbCBpbnB1dFt0eXBlPWNoZWNrYm94XTpjaGVja2VkJyk7CiAgICBjaGVja2JveGVzLmZvckVhY2goY2IgPT4gewogICAgICAgIGNvbnN0IGNoaWxkTmFtZSA9IGNiLnZhbHVlOwogICAgICAgIGlmIChEQVRBLnN1YmplY3RNZXRhW2NoaWxkTmFtZV0pIHsKICAgICAgICAgICAgREFUQS5zdWJqZWN0TWV0YVtjaGlsZE5hbWVdLnBhcmVudCA9IHM7CiAgICAgICAgfQogICAgfSk7CgogICAgc2F2ZURhdGEoKTsKICAgIHJlbmRlclN1YmplY3RzQ29uZmlnKCk7CiAgICByZW5kZXJSSCgpOwogICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FkZC1ncm91cC1zdWJqZWN0LW1vZGFsJykuc3R5bGUuZGlzcGxheSA9ICdub25lJzsKfQoKLyoqIE1vZGFsOiBham91dGUgdW5lIG1hdGnDqHJlIHZpYSBsaXN0ZSBkw6lyb3VsYW50ZSBwcsOpZGljdGl2ZSBhdmVjIGNvZGUgYXV0b21hdGlxdWUgKi8KZnVuY3Rpb24gb3BlbkFkZFN1YmplY3RNb2RhbCgpIHsKICAgIC8vIENvbnN0cnVpcmUgbGEgbGlzdGUgZGUgdG91dGVzIGxlcyBkaXNjaXBsaW5lcyBQTkUKICAgIGxldCBhbGxEaXNjaXBsaW5lcyA9IFtdOwogICAgT2JqZWN0LmVudHJpZXMoUE5FX0JVUkVBVVgpLmZvckVhY2goKFtidXJlYXVJZCwgYnVyZWF1XSkgPT4gewogICAgICAgIE9iamVjdC5lbnRyaWVzKGJ1cmVhdS5kaXNjaXBsaW5lcykuZm9yRWFjaCgoW2NvZGUsIGxhYmVsXSkgPT4gewogICAgICAgICAgICBhbGxEaXNjaXBsaW5lcy5wdXNoKHtjb2RlLCBsYWJlbCwgYnVyZWF1OiBidXJlYXUubGFiZWwsIGJ1cmVhdUlkfSk7CiAgICAgICAgfSk7CiAgICB9KTsKICAgIGFsbERpc2NpcGxpbmVzLnNvcnQoKGEsYikgPT4gYS5sYWJlbC5sb2NhbGVDb21wYXJlKGIubGFiZWwsICdmcicpKTsKCiAgICAvLyBDcsOpZXIvcsOpaW5pdGlhbGlzZXIgbCdvdmVybGF5CiAgICBsZXQgb3ZlcmxheSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhZGQtc3ViamVjdC1tb2RhbCcpOwogICAgaWYgKCFvdmVybGF5KSB7CiAgICAgICAgb3ZlcmxheSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgICAgIG92ZXJsYXkuaWQgPSAnYWRkLXN1YmplY3QtbW9kYWwnOwogICAgICAgIG92ZXJsYXkuc3R5bGUuY3NzVGV4dCA9ICdkaXNwbGF5Om5vbmU7IHBvc2l0aW9uOmZpeGVkOyB0b3A6MDsgbGVmdDowOyB3aWR0aDoxMDAlOyBoZWlnaHQ6MTAwJTsgYmFja2dyb3VuZDpyZ2JhKDAsMCwwLDAuNik7IHotaW5kZXg6MzAwMDA7IGp1c3RpZnktY29udGVudDpjZW50ZXI7IGFsaWduLWl0ZW1zOmNlbnRlcjsnOwogICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQob3ZlcmxheSk7CiAgICB9CgogICAgY29uc3QgZGF0YWxpc3RPcHRpb25zID0gYWxsRGlzY2lwbGluZXMubWFwKGQgPT4gYDxvcHRpb24gdmFsdWU9IiR7ZC5sYWJlbH0iIGRhdGEtY29kZT0iJHtkLmNvZGV9Ij4ke2QubGFiZWx9ICgke2QuY29kZX0pPC9vcHRpb24+YCkuam9pbignJyk7CgogICAgb3ZlcmxheS5pbm5lckhUTUwgPSBgCiAgICAgICAgPGRpdiBzdHlsZT0iYmFja2dyb3VuZDp3aGl0ZTsgYm9yZGVyLXJhZGl1czoxMnB4OyBwYWRkaW5nOjMwcHg7IHdpZHRoOjUwMHB4OyBtYXgtd2lkdGg6OTV2dzsgYm94LXNoYWRvdzowIDEwcHggNDBweCByZ2JhKDAsMCwwLDAuMyk7Ij4KICAgICAgICAgICAgPGRpdiBzdHlsZT0iZGlzcGxheTpmbGV4OyBqdXN0aWZ5LWNvbnRlbnQ6c3BhY2UtYmV0d2VlbjsgYWxpZ24taXRlbXM6Y2VudGVyOyBtYXJnaW4tYm90dG9tOjIwcHg7Ij4KICAgICAgICAgICAgICAgIDxoMyBzdHlsZT0ibWFyZ2luOjA7IGNvbG9yOiMyYzNlNTA7Ij7inpUgTm91dmVsbGUgTWF0acOocmU8L2gzPgogICAgICAgICAgICAgICAgPGJ1dHRvbiBvbmNsaWNrPSJkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWRkLXN1YmplY3QtbW9kYWwnKS5zdHlsZS5kaXNwbGF5PSdub25lJyIgc3R5bGU9ImJhY2tncm91bmQ6bm9uZTtib3JkZXI6bm9uZTtmb250LXNpemU6MS40cmVtO2N1cnNvcjpwb2ludGVyO2NvbG9yOiM5OTk7Ij7DlzwvYnV0dG9uPgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPGRpdiBzdHlsZT0ibWFyZ2luLWJvdHRvbToxNXB4OyI+CiAgICAgICAgICAgICAgICA8bGFiZWwgc3R5bGU9ImZvbnQtd2VpZ2h0OjYwMDsgZGlzcGxheTpibG9jazsgbWFyZ2luLWJvdHRvbTo1cHg7Ij5Ob20gZGUgbGEgbWF0acOocmUgOjwvbGFiZWw+CiAgICAgICAgICAgICAgICA8aW5wdXQgaWQ9Im5ldy1zdWJqZWN0LW5hbWUiIGxpc3Q9InBuZS1kaXNjaXBsaW5lLWxpc3QiIAogICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPSJUYXBleiBwb3VyIGNoZXJjaGVyIHVuZSBkaXNjaXBsaW5lLi4uIiAKICAgICAgICAgICAgICAgICAgICBzdHlsZT0id2lkdGg6MTAwJTsgcGFkZGluZzoxMHB4OyBib3JkZXI6MnB4IHNvbGlkICMzNDk4ZGI7IGJvcmRlci1yYWRpdXM6NnB4OyBmb250LXNpemU6MXJlbTsgYm94LXNpemluZzpib3JkZXItYm94OyIKICAgICAgICAgICAgICAgICAgICBvbmlucHV0PSJvblN1YmplY3ROYW1lSW5wdXQodGhpcy52YWx1ZSkiPgogICAgICAgICAgICAgICAgPGRhdGFsaXN0IGlkPSJwbmUtZGlzY2lwbGluZS1saXN0Ij4ke2RhdGFsaXN0T3B0aW9uc308L2RhdGFsaXN0PgogICAgICAgICAgICAgICAgPHNtYWxsIHN0eWxlPSJjb2xvcjojODg4OyBtYXJnaW4tdG9wOjRweDsgZGlzcGxheTpibG9jazsiPlZvdXMgcG91dmV6IGF1c3NpIHNhaXNpciB1biBub20gbGlicmU8L3NtYWxsPgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPGRpdiBzdHlsZT0ibWFyZ2luLWJvdHRvbToyMHB4OyI+CiAgICAgICAgICAgICAgICA8bGFiZWwgc3R5bGU9ImZvbnQtd2VpZ2h0OjYwMDsgZGlzcGxheTpibG9jazsgbWFyZ2luLWJvdHRvbTo1cHg7Ij5Db2RlIFBORSAoYXV0by1yZW1wbGkpIDo8L2xhYmVsPgogICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iZGlzcGxheTpmbGV4OyBnYXA6OHB4OyBhbGlnbi1pdGVtczpjZW50ZXI7Ij4KICAgICAgICAgICAgICAgICAgICA8aW5wdXQgaWQ9Im5ldy1zdWJqZWN0LWNvZGUiIHBsYWNlaG9sZGVyPSJFeDogTDEzMDAiIAogICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT0id2lkdGg6MTIwcHg7IHBhZGRpbmc6OHB4OyBib3JkZXI6MXB4IHNvbGlkICNkZGQ7IGJvcmRlci1yYWRpdXM6NnB4OyBmb250LWZhbWlseTptb25vc3BhY2U7IGZvbnQtc2l6ZTowLjlyZW07IHRleHQtYWxpZ246Y2VudGVyOyI+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBpZD0ibmV3LXN1YmplY3QtYnVyZWF1IiBzdHlsZT0iZm9udC1zaXplOjAuODJyZW07IGNvbG9yOiM2NjY7IGZsZXg6MTsiPjwvZGl2PgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8ZGl2IHN0eWxlPSJkaXNwbGF5OmZsZXg7IGdhcDoxMHB4OyBqdXN0aWZ5LWNvbnRlbnQ6ZmxleC1lbmQ7Ij4KICAgICAgICAgICAgICAgIDxidXR0b24gb25jbGljaz0iZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FkZC1zdWJqZWN0LW1vZGFsJykuc3R5bGUuZGlzcGxheT0nbm9uZSciIAogICAgICAgICAgICAgICAgICAgIHN0eWxlPSJwYWRkaW5nOjhweCAyMHB4OyBib3JkZXI6MXB4IHNvbGlkICNkZGQ7IGJvcmRlci1yYWRpdXM6NnB4OyBiYWNrZ3JvdW5kOiNmNWY1ZjU7IGN1cnNvcjpwb2ludGVyOyI+QW5udWxlcjwvYnV0dG9uPgogICAgICAgICAgICAgICAgPGJ1dHRvbiBvbmNsaWNrPSJjb25maXJtQWRkU3ViamVjdCgpIiAKICAgICAgICAgICAgICAgICAgICBzdHlsZT0icGFkZGluZzo4cHggMjBweDsgYm9yZGVyOm5vbmU7IGJvcmRlci1yYWRpdXM6NnB4OyBiYWNrZ3JvdW5kOiMzNDk4ZGI7IGNvbG9yOndoaXRlOyBmb250LXdlaWdodDo2MDA7IGN1cnNvcjpwb2ludGVyOyI+4pyTIEFqb3V0ZXI8L2J1dHRvbj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgPC9kaXY+YDsKICAgIAogICAgb3ZlcmxheS5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnOwogICAgCiAgICAvLyBTdG9ja2VyIGxlcyBkaXNjaXBsaW5lcyBwb3VyIGxhIHJlY2hlcmNoZQogICAgd2luZG93Ll9hbGxQbmVEaXNjaXBsaW5lcyA9IGFsbERpc2NpcGxpbmVzOwogICAgCiAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICBjb25zdCBpbnAgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbmV3LXN1YmplY3QtbmFtZScpOwogICAgICAgIGlmIChpbnApIGlucC5mb2N1cygpOwogICAgfSwgMTAwKTsKfQoKLyoqIEFwcGVsw6kgcXVhbmQgbCd1dGlsaXNhdGV1ciB0YXBlIGRhbnMgbGUgY2hhbXAgbm9tIGRlIG1hdGnDqHJlICovCmZ1bmN0aW9uIG9uU3ViamVjdE5hbWVJbnB1dCh2YWx1ZSkgewogICAgY29uc3QgZGlzY2lwbGluZXMgPSB3aW5kb3cuX2FsbFBuZURpc2NpcGxpbmVzIHx8IFtdOwogICAgLy8gQ2hlcmNoZXIgdW5lIGNvcnJlc3BvbmRhbmNlIGV4YWN0ZSAobGFiZWwpCiAgICBjb25zdCBtYXRjaCA9IGRpc2NpcGxpbmVzLmZpbmQoZCA9PiBkLmxhYmVsLnRvTG93ZXJDYXNlKCkgPT09IHZhbHVlLnRvTG93ZXJDYXNlKCkpOwogICAgaWYgKG1hdGNoKSB7CiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ25ldy1zdWJqZWN0LWNvZGUnKS52YWx1ZSA9IG1hdGNoLmNvZGU7CiAgICAgICAgLy8gQWZmaWNoZXIgbGUgYnVyZWF1IFBORQogICAgICAgIGNvbnN0IGJ1cmVhdUlkID0gZ2V0QnVyZWF1Rm9yQ29kZShtYXRjaC5jb2RlKTsKICAgICAgICBpZiAoYnVyZWF1SWQpIHsKICAgICAgICAgICAgY29uc3QgYiA9IFBORV9CVVJFQVVYW2J1cmVhdUlkXTsKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ25ldy1zdWJqZWN0LWJ1cmVhdScpLmlubmVySFRNTCA9IAogICAgICAgICAgICAgICAgYDxzcGFuIHN0eWxlPSJiYWNrZ3JvdW5kOiR7Yi5jb2xvcn0yMDsgY29sb3I6JHtiLmNvbG9yfTsgZm9udC13ZWlnaHQ6NzAwOyBwYWRkaW5nOjJweCA4cHg7IGJvcmRlci1yYWRpdXM6NHB4OyI+JHtidXJlYXVJZH08L3NwYW4+ICR7Yi5sYWJlbH1gOwogICAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgICAgLy8gRXNzYXllciB1bmUgY29ycmVzcG9uZGFuY2UgcGFydGllbGxlIChjb250aWVudCkKICAgICAgICBjb25zdCBwYXJ0aWFsID0gZGlzY2lwbGluZXMuZmluZChkID0+IGQubGFiZWwudG9Mb3dlckNhc2UoKS5zdGFydHNXaXRoKHZhbHVlLnRvTG93ZXJDYXNlKCkpKTsKICAgICAgICBpZiAoIXBhcnRpYWwpIHsKICAgICAgICAgICAgLy8gVsOpcmlmaWVyIHNpIGxhIHZhbGV1ciB0YXBlIGV4YWN0ZW1lbnQgdW5lIG9wdGlvbiBkdSBkYXRhbGlzdAogICAgICAgICAgICBjb25zdCBvcHQgPSBkaXNjaXBsaW5lcy5maW5kKGQgPT4gYCR7ZC5sYWJlbH0gKCR7ZC5jb2RlfSlgID09PSB2YWx1ZSB8fCBkLmxhYmVsID09PSB2YWx1ZSk7CiAgICAgICAgICAgIGlmICghb3B0KSB7CiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbmV3LXN1YmplY3QtYnVyZWF1JykudGV4dENvbnRlbnQgPSAnJzsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KfQoKLyoqIFZhbGlkZSBsJ2Fqb3V0IGRlIGxhIG5vdXZlbGxlIG1hdGnDqHJlICovCmZ1bmN0aW9uIGNvbmZpcm1BZGRTdWJqZWN0KCkgewogICAgY29uc3QgbmFtZUVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ25ldy1zdWJqZWN0LW5hbWUnKTsKICAgIGNvbnN0IGNvZGVFbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCduZXctc3ViamVjdC1jb2RlJyk7CiAgICAKICAgIC8vIE5ldHRveWVyIGxlIG5vbSBzaSBsJ3V0aWxpc2F0ZXVyIGEgc8OpbGVjdGlvbm7DqSBkZXB1aXMgbGUgZGF0YWxpc3QgKGZvcm1hdCAibGFiZWwgKGNvZGUpIikKICAgIGxldCBzID0gKG5hbWVFbC52YWx1ZSB8fCAnJykudHJpbSgpOwogICAgY29uc3QgbWF0Y2hEYXRhbGlzdCA9IHMubWF0Y2goL14oLis/KVxzK1woKFtBLVowLTldKylcKSQvKTsKICAgIGlmIChtYXRjaERhdGFsaXN0KSB7CiAgICAgICAgcyA9IG1hdGNoRGF0YWxpc3RbMV07CiAgICAgICAgaWYgKCFjb2RlRWwudmFsdWUpIGNvZGVFbC52YWx1ZSA9IG1hdGNoRGF0YWxpc3RbMl07CiAgICB9CiAgICAKICAgIGNvbnN0IGNvZGUgPSAoY29kZUVsLnZhbHVlIHx8ICcnKS50cmltKCk7CiAgICAKICAgIGlmICghcykgeyBhbGVydCgnVmV1aWxsZXogc2Fpc2lyIHVuIG5vbSBkZSBtYXRpw6hyZS4nKTsgcmV0dXJuOyB9CiAgICBpZiAoREFUQS5zdWJqZWN0cy5pbmNsdWRlcyhzKSkgeyBhbGVydCgnQ2V0dGUgbWF0acOocmUgZXhpc3RlIGTDqWrDoCAhJyk7IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhZGQtc3ViamVjdC1tb2RhbCcpLnN0eWxlLmRpc3BsYXk9J25vbmUnOyByZXR1cm47IH0KICAgIAogICAgREFUQS5zdWJqZWN0cy5wdXNoKHMpOwogICAgREFUQS5zdWJqZWN0TWV0YVtzXSA9IHsKICAgICAgICBtb2RlOiAnZGl2JywgCiAgICAgICAgbGV2ZWxzOiBnZXREZWZhdWx0QWN0aXZlTGV2ZWxzKHMpLCAKICAgICAgICBldGFiOiAwLCAKICAgICAgICB2b2xMZXZlbDoge30sIAogICAgICAgIHBhcmVudDogIiIsIAogICAgICAgIGNvZGU6IGNvZGUsCiAgICAgICAgcG5lQ29kZTogY29kZQogICAgfTsKICAgIERBVEEuc3RydWN0dXJlLmZvckVhY2gobCA9PiB7CiAgICAgICAgaWYgKCFEQVRBLmxldmVsQ29uZmlnW2wubGV2ZWxdKSBEQVRBLmxldmVsQ29uZmlnW2wubGV2ZWxdID0ge307CiAgICAgICAgREFUQS5sZXZlbENvbmZpZ1tsLmxldmVsXVtzXSA9IHtiYXNlOjAsIGRlbWk6MCwgbWFyZ2U6MCwgY29lZjoxLjB9OwogICAgfSk7CiAgICAKICAgIHNhdmVEYXRhKCk7IAogICAgcmVuZGVyR3JpZFN5c3RlbSgpOyAKICAgIHJlbmRlclJIKCk7IAogICAgcmVuZGVyU3ViamVjdHNDb25maWcoKTsKICAgIAogICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FkZC1zdWJqZWN0LW1vZGFsJykuc3R5bGUuZGlzcGxheSA9ICdub25lJzsKfQoKZnVuY3Rpb24gZGVsU3ViamVjdChzKSB7IGlmKGNvbmZpcm0oIlN1cHByaW1lciA/IikpIHsgREFUQS5zdWJqZWN0cz1EQVRBLnN1YmplY3RzLmZpbHRlcihzdWI9PnN1YiE9PXMpOyBkZWxldGUgREFUQS5zdWJqZWN0TWV0YVtzXTsgT2JqZWN0LmtleXMoREFUQS5sZXZlbENvbmZpZykuZm9yRWFjaChsPT5kZWxldGUgREFUQS5sZXZlbENvbmZpZ1tsXVtzXSk7IHNhdmVEYXRhKCk7IHJlbmRlclN1YmplY3RzQ29uZmlnKCk7IHJlbmRlckdyaWRTeXN0ZW0oKTsgcmVuZGVyUkgoKTsgfSB9CgovKioKICogUGFyc2UgdW5lIGV4cHJlc3Npb24gaG9yYWlyZS4KICogRm9ybWF0cyBhY2NlcHTDqXMgOgogKiAgICIzIiAgICAgICAg4oaSIHsgYmFzZTogMywgZGVtaTogMCwgdG90YWw6IDMsICBsYWJlbDogIjMiICAgICAgfQogKiAgICIyKygxKSIgICAg4oaSIHsgYmFzZTogMiwgZGVtaTogMSwgdG90YWw6IDQsICBsYWJlbDogIjIrKDEpIiAgfQogKiAgICIxLjUrKDAuNSki4oaSIHsgYmFzZToxLjUsZGVtaTowLjUsdG90YWw6Mi41LCBsYWJlbDoiMS41KygwLjUpIn0KICogICAiMCIgICAgICAgIOKGkiB7IGJhc2U6IDAsIGRlbWk6IDAsIHRvdGFsOiAwLCAgbGFiZWw6ICIwIiAgICAgIH0KICogdG90YWwgPSBiYXNlICsgMiDDlyBkZW1pICAobGEgZGVtaS1jbGFzc2UgY29tcHRlIGRvdWJsZSBlbiBoZXVyZXMgcHJvZikKICovCmZ1bmN0aW9uIHBhcnNlSG91cnNFeHByKHN0cikgewogICAgaWYgKHN0ciA9PT0gbnVsbCB8fCBzdHIgPT09IHVuZGVmaW5lZCkgcmV0dXJuIHsgYmFzZTogMCwgZGVtaTogMCwgdG90YWw6IDAsIGxhYmVsOiAnMCcgfTsKICAgIHZhciBzID0gU3RyaW5nKHN0cikudHJpbSgpOwogICAgLy8gRm9ybWF0ICJYKyhZKSIgYXZlYyBwYXJlbnRow6hzZXMKICAgIHZhciBtID0gcy5tYXRjaCgvXihbMC05XSpcLj9bMC05XSspXHMqXCtccypcKChbMC05XSpcLj9bMC05XSspXCkkLyk7CiAgICBpZiAobSkgewogICAgICAgIHZhciBiYXNlID0gcGFyc2VGbG9hdChtWzFdKSB8fCAwOwogICAgICAgIHZhciBkZW1pID0gcGFyc2VGbG9hdChtWzJdKSB8fCAwOwogICAgICAgIHJldHVybiB7IGJhc2U6IGJhc2UsIGRlbWk6IGRlbWksIHRvdGFsOiBNYXRoLnJvdW5kKChiYXNlICsgMiAqIGRlbWkpICogMTAwKSAvIDEwMCwgbGFiZWw6IGJhc2UgKyAnKygnK2RlbWkrJyknIH07CiAgICB9CiAgICAvLyBGb3JtYXQgbnVtw6lyaXF1ZSBzaW1wbGUKICAgIHZhciBuID0gcGFyc2VGbG9hdChzKTsKICAgIGlmICghaXNOYU4obikpIHJldHVybiB7IGJhc2U6IG4sIGRlbWk6IDAsIHRvdGFsOiBuLCBsYWJlbDogcyB9OwogICAgcmV0dXJuIHsgYmFzZTogMCwgZGVtaTogMCwgdG90YWw6IDAsIGxhYmVsOiAnMCcgfTsKfQoKLyoqIFJldG91cm5lIGxlIHRvdGFsIGVmZmVjdGlmIChoZXVyZXMgcHJvZikgZGVwdWlzIHVuIGNmZyBsZXZlbENvbmZpZyAqLwpmdW5jdGlvbiBnZXRFZmZlY3RpdmVCYXNlKGNmZykgewogICAgaWYgKCFjZmcpIHJldHVybiAwOwogICAgdmFyIGJhc2UgPSBwYXJzZUZsb2F0KGNmZy5iYXNlKSB8fCAwOwogICAgdmFyIGRlbWkgPSBwYXJzZUZsb2F0KGNmZy5kZW1pKSB8fCAwOwogICAgcmV0dXJuIE1hdGgucm91bmQoKGJhc2UgKyAyICogZGVtaSkgKiAxMDApIC8gMTAwOwp9CgovKiogQ29uc3RydWl0IGxlIGxhYmVsIHZpc3VlbCBkJ3VuIGNmZyBwb3VyIGFmZmljaGFnZSBkYW5zIGwnaW5wdXQgKi8KZnVuY3Rpb24gY2ZnVG9FeHByTGFiZWwoY2ZnKSB7CiAgICBpZiAoIWNmZykgcmV0dXJuICcwJzsKICAgIHZhciBiYXNlID0gcGFyc2VGbG9hdChjZmcuYmFzZSkgfHwgMDsKICAgIHZhciBkZW1pID0gcGFyc2VGbG9hdChjZmcuZGVtaSkgfHwgMDsKICAgIGlmIChkZW1pID4gMCkgcmV0dXJuIGJhc2UgKyAnKygnICsgZGVtaSArICcpJzsKICAgIHJldHVybiBTdHJpbmcoYmFzZSk7Cn0KCi8qKiBGZWVkYmFjayB2aXN1ZWwgaW1tw6lkaWF0IHN1ciBsJ2lucHV0IHF1YW5kIGwndXRpbGlzYXRldXIgdGFwZSAqLwpmdW5jdGlvbiB1cGRhdGVJbnBIb3Vyc1N0eWxlKGlucHV0KSB7CiAgICB2YXIgcGFyc2VkID0gcGFyc2VIb3Vyc0V4cHIoaW5wdXQudmFsdWUpOwogICAgdmFyIGhhc0RlbWkgPSBwYXJzZWQuZGVtaSA+IDA7CiAgICBpbnB1dC5jbGFzc0xpc3QudG9nZ2xlKCdoYXMtZGVtaScsIGhhc0RlbWkpOwogICAgdmFyIGxhYmVsID0gaW5wdXQucGFyZW50Tm9kZS5xdWVyeVNlbGVjdG9yKCcuaW5wLWRlbWktbGFiZWwnKTsKICAgIGlmIChoYXNEZW1pKSB7CiAgICAgICAgaWYgKCFsYWJlbCkgewogICAgICAgICAgICBsYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTsKICAgICAgICAgICAgbGFiZWwuY2xhc3NOYW1lID0gJ2lucC1kZW1pLWxhYmVsJzsKICAgICAgICAgICAgaW5wdXQucGFyZW50Tm9kZS5hcHBlbmRDaGlsZChsYWJlbCk7CiAgICAgICAgfQogICAgICAgIGxhYmVsLmlubmVySFRNTCA9ICc9XHUyMDA5JyArIHBhcnNlZC50b3RhbCArICdoIHByb2YnOwogICAgfSBlbHNlIHsKICAgICAgICBpZiAobGFiZWwpIGxhYmVsLnJlbW92ZSgpOwogICAgfQp9CgpmdW5jdGlvbiB1cGRMdmwobCwgcywgaywgdikgewogICAgaWYgKGsgPT09ICdiYXNlJykgewogICAgICAgIC8vIHYgcGV1dCDDqnRyZSAiMisoMSkiIG91ICIzIgogICAgICAgIHZhciBwYXJzZWQgPSBwYXJzZUhvdXJzRXhwcih2KTsKICAgICAgICBEQVRBLmxldmVsQ29uZmlnW2xdW3NdLmJhc2UgPSBwYXJzZWQuYmFzZTsKICAgICAgICBEQVRBLmxldmVsQ29uZmlnW2xdW3NdLmRlbWkgPSBwYXJzZWQuZGVtaTsKICAgIH0gZWxzZSB7CiAgICAgICAgREFUQS5sZXZlbENvbmZpZ1tsXVtzXVtrXSA9IHBhcnNlRmxvYXQodikgfHwgMDsKICAgIH0KICAgIHNhdmVEYXRhKCk7Cgl1cGRhdGVHcmlkQ291bnRlcigpOwogICAgaWYgKGsgPT09ICdtYXJnZScgfHwgayA9PT0gJ2Jhc2UnKSB7CiAgICAgICAgY29uc3QgcHJlZml4ID0gbC5yZXBsYWNlKC9bXjAtOV0vZywgJycpIHx8IGwuY2hhckF0KDApOwogICAgICAgIGxldCBpZ25vcmVkQ2xhc3NlcyA9IFtdOwogICAgICAgIE9iamVjdC5rZXlzKERBVEEuY2xhc3NPdmVycmlkZXMpLmZvckVhY2goYyA9PiB7CiAgICAgICAgICAgIGlmIChjLnN0YXJ0c1dpdGgocHJlZml4KSkgeyAKICAgICAgICAgICAgICAgIGlmIChEQVRBLmNsYXNzT3ZlcnJpZGVzW2NdW3NdKSB7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgZGlzcGxheU5hbWUgPSAoREFUQS5jbGFzc05hbWVzICYmIERBVEEuY2xhc3NOYW1lc1tjXSkgPyBEQVRBLmNsYXNzTmFtZXNbY10gOiBjOwogICAgICAgICAgICAgICAgICAgIGlnbm9yZWRDbGFzc2VzLnB1c2goZGlzcGxheU5hbWUpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgaWYgKGlnbm9yZWRDbGFzc2VzLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgYWxlcnQoYOKaoO+4jyBBVFRFTlRJT04gOlxuXG5Wb3VzIGF2ZXogbW9kaWZpw6kgbGEgJHtrID09PSAnbWFyZ2UnID8gJ21hcmdlJyA6ICdiYXNlJ30gcG91ciB0b3V0IGxlIG5pdmVhdSAke2x9LlxuXG5DZXBlbmRhbnQsIGxlcyBjbGFzc2VzIHN1aXZhbnRlcyBzb250IGVuIG1vZGUgIlBlcnNvbm5hbGlzw6kiIGV0IG4nb250IFBBUyDDqXTDqSBtb2RpZmnDqWVzIDpcblxu8J+RiSAke2lnbm9yZWRDbGFzc2VzLmpvaW4oJywgJyl9XG5cblBlbnNleiDDoCB2w6lyaWZpZXIgbGV1cnMgaG9yYWlyZXMgbWFudWVsbGVtZW50LmApOwogICAgICAgIH0KICAgIH0KICAgIHJlbmRlckxldmVsR3JpZChEQVRBLnN0cnVjdHVyZS5maW5kSW5kZXgoeCA9PiB4LmxldmVsID09PSBsKSk7Cn0KZnVuY3Rpb24gdG9nZ2xlT3YoYyl7IAogICAgaWYoREFUQS5jbGFzc092ZXJyaWRlc1tjXSkgZGVsZXRlIERBVEEuY2xhc3NPdmVycmlkZXNbY107IAogICAgZWxzZSB7IAogICAgICAgIGxldCBmb3VuZEx2bCA9IG51bGw7CiAgICAgICAgZm9yKGxldCBsIG9mIERBVEEuc3RydWN0dXJlKSB7CiAgICAgICAgICAgIGxldCBwID0gbC5sZXZlbC5yZXBsYWNlKC9bXjAtOV0vZywgJycpIHx8IGwubGV2ZWwuY2hhckF0KDApOwogICAgICAgICAgICBpZihjLnN0YXJ0c1dpdGgocCkpIHsgZm91bmRMdmw9bC5sZXZlbDsgYnJlYWs7IH0KICAgICAgICB9CiAgICAgICAgaWYoZm91bmRMdmwpIERBVEEuY2xhc3NPdmVycmlkZXNbY109SlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShEQVRBLmxldmVsQ29uZmlnW2ZvdW5kTHZsXSkpOyAKICAgIH0gCiAgICBzYXZlRGF0YSgpOyAKICAgIGNvbnN0IGFjdGl2ZVRhYiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50YWIuYWN0aXZlJyk7CiAgICBpZihhY3RpdmVUYWIpIGNoYW5nZVRhYihhY3RpdmVUYWIsIHdpbmRvdy5sYXN0QWN0aXZlR3JpZFRhYik7Cn0KZnVuY3Rpb24gdXBkT3YoYyxzLGssdil7IAogICAgaWYgKGsgPT09ICdiYXNlJykgewogICAgICAgIHZhciBwYXJzZWQgPSBwYXJzZUhvdXJzRXhwcih2KTsKICAgICAgICBEQVRBLmNsYXNzT3ZlcnJpZGVzW2NdW3NdLmJhc2UgPSBwYXJzZWQuYmFzZTsKICAgICAgICBEQVRBLmNsYXNzT3ZlcnJpZGVzW2NdW3NdLmRlbWkgPSBwYXJzZWQuZGVtaTsKICAgIH0gZWxzZSB7CiAgICAgICAgREFUQS5jbGFzc092ZXJyaWRlc1tjXVtzXVtrXSA9IHBhcnNlRmxvYXQodil8fDA7CiAgICB9CiAgICBzYXZlRGF0YSgpOyAKCXVwZGF0ZUdyaWRDb3VudGVyKCk7CiAgICBjb25zdCBhY3RpdmVUYWIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudGFiLmFjdGl2ZScpOwogICAgaWYoYWN0aXZlVGFiKSBjaGFuZ2VUYWIoYWN0aXZlVGFiLCB3aW5kb3cubGFzdEFjdGl2ZUdyaWRUYWIpOwp9CgpmdW5jdGlvbiByZW5kZXJTdWJqZWN0c0NvbmZpZygpIHsgCiAgICBjb25zdCB0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N1YmplY3RzLWJvZHknKTsgCiAgICB0LmlubmVySFRNTCA9ICcnOyAKICAgIAogICAgY29uc3Qgc29ydGVkU3ViamVjdHMgPSBbLi4uREFUQS5zdWJqZWN0c10uc29ydCgpOwoKICAgIGZ1bmN0aW9uIHJlbmRlclN1YmplY3RSb3cocywgaXNDaGlsZCkgewogICAgICAgIGNvbnN0IG0gPSBEQVRBLnN1YmplY3RNZXRhW3NdOwogICAgICAgIGlmICghbSkgcmV0dXJuOwogICAgICAgIGNvbnN0IHNhZmVTID0gcy5yZXBsYWNlKC8nL2csICJcXCciKTsgCgogICAgICAgIGxldCBwYXJlbnRPcHRpb25zID0gYDxvcHRpb24gdmFsdWU9IiI+KEF1Y3VuIC0gUmFjaW5lKTwvb3B0aW9uPmA7CiAgICAgICAgc29ydGVkU3ViamVjdHMuZm9yRWFjaChwYXJlbnROYW1lID0+IHsKICAgICAgICAgICAgaWYgKHBhcmVudE5hbWUgIT09IHMpIHsKICAgICAgICAgICAgICAgIGNvbnN0IGlzU2VsZWN0ZWQgPSBtLnBhcmVudCA9PT0gcGFyZW50TmFtZSA/ICdzZWxlY3RlZCcgOiAnJzsKICAgICAgICAgICAgICAgIHBhcmVudE9wdGlvbnMgKz0gYDxvcHRpb24gdmFsdWU9IiR7cGFyZW50TmFtZX0iICR7aXNTZWxlY3RlZH0+JHtwYXJlbnROYW1lfTwvb3B0aW9uPmA7CiAgICAgICAgICAgIH0KICAgICAgICB9KTsKCiAgICAgICAgY29uc3QgbGlua0NvdW50ID0gKG0ubGlua2VkU3ViamVjdHMgJiYgbS5saW5rZWRTdWJqZWN0cy5sZW5ndGggPiAwKSA/IG0ubGlua2VkU3ViamVjdHMubGVuZ3RoIDogMDsKICAgICAgICBjb25zdCBidG5TdHlsZSA9IGxpbmtDb3VudCA+IDAgCiAgICAgICAgICAgID8gImJhY2tncm91bmQ6IzM0OThkYjsgY29sb3I6d2hpdGU7IGJvcmRlcjoxcHggc29saWQgIzI5ODBiOTsiIAogICAgICAgICAgICA6ICJiYWNrZ3JvdW5kOndoaXRlOyBjb2xvcjojN2Y4YzhkOyBib3JkZXI6MXB4IHNvbGlkICNiZGMzYzc7IjsKICAgICAgICBjb25zdCBsaW5rZWRCdG4gPSBgPGJ1dHRvbiBjbGFzcz0iYnRuIGJ0bi1zbSIgc3R5bGU9IiR7YnRuU3R5bGV9IHdpZHRoOjEwMCU7IGRpc3BsYXk6ZmxleDsganVzdGlmeS1jb250ZW50OmNlbnRlcjsgYWxpZ24taXRlbXM6Y2VudGVyOyBnYXA6NXB4OyIgb25jbGljaz0ib3BlbkxpbmtlZFN1YmplY3RzTW9kYWwoJyR7c2FmZVN9JykiPjxzcGFuPvCflJc8L3NwYW4+PHNwYW4gc3R5bGU9ImJhY2tncm91bmQ6cmdiYSgwLDAsMCwwLjIpOyBwYWRkaW5nOjFweCA2cHg7IGJvcmRlci1yYWRpdXM6MTBweDsgZm9udC1zaXplOjAuNzVyZW07Ij4ke2xpbmtDb3VudH08L3NwYW4+PC9idXR0b24+YDsKCiAgICAgICAgbGV0IHBhcmFtSHRtbCA9ICIiOwogICAgICAgIGNvbnN0IGlzR3JvdXAgPSBtLm1vZGUgPT09ICdncm91cCc7CiAgICAgICAgaWYgKGlzR3JvdXApIHsKICAgICAgICAgICAgY29uc3QgY2hpbGRDb3VudCA9IERBVEEuc3ViamVjdHMuZmlsdGVyKGNzID0+IERBVEEuc3ViamVjdE1ldGFbY3NdPy5wYXJlbnQgPT09IHMpLmxlbmd0aDsKICAgICAgICAgICAgcGFyYW1IdG1sID0gYDxzcGFuIHN0eWxlPSJmb250LXNpemU6MC44cmVtOyBjb2xvcjojOGU0NGFkOyBmb250LXN0eWxlOml0YWxpYzsiPvCfk4IgJHtjaGlsZENvdW50fSBkaXNjaXBsaW5lKHMpIHJhdHRhY2jDqWUocyk8L3NwYW4+YDsKICAgICAgICB9IGVsc2UgaWYgKG0ubW9kZSA9PT0gJ2RpdicpIHsKICAgICAgICAgICAgcGFyYW1IdG1sID0gYDxkaXYgY2xhc3M9Imx2bC1jaGVjay1jb250YWluZXIiPmA7CiAgICAgICAgICAgIERBVEEuc3RydWN0dXJlLmZvckVhY2gobHZsID0+IHsKICAgICAgICAgICAgICAgIGNvbnN0IGlzQ2hlY2tlZCA9IG0ubGV2ZWxzICYmIG0ubGV2ZWxzLmluY2x1ZGVzKGx2bC5sZXZlbCk7CiAgICAgICAgICAgICAgICBjb25zdCBzYWZlTHZsID0gbHZsLmxldmVsLnJlcGxhY2UoLycvZywgIlxcJyIpOwogICAgICAgICAgICAgICAgcGFyYW1IdG1sICs9IGA8bGFiZWwgY2xhc3M9Imx2bC1jaGVjay1pdGVtIj48aW5wdXQgdHlwZT0iY2hlY2tib3giICR7aXNDaGVja2VkPydjaGVja2VkJzonJ30gb25jaGFuZ2U9InRvZ2dsZVN1YkxldmVsKCcke3NhZmVTfScsJyR7c2FmZUx2bH0nKSI+JHtsdmwubGV2ZWx9PC9sYWJlbD5gOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgcGFyYW1IdG1sICs9IGA8L2Rpdj5gOwogICAgICAgIH0gZWxzZSBpZiAobS5tb2RlID09PSAnbGV2ZWwnKSB7CiAgICAgICAgICAgIHBhcmFtSHRtbCA9IGA8ZGl2IHN0eWxlPSJkaXNwbGF5OmZsZXg7IGZsZXgtd3JhcDp3cmFwOyBnYXA6OHB4OyI+YDsKICAgICAgICAgICAgREFUQS5zdHJ1Y3R1cmUuZm9yRWFjaChsdmwgPT4gewogICAgICAgICAgICAgICAgY29uc3QgdmFsID0gbS52b2xMZXZlbCA/IChtLnZvbExldmVsW2x2bC5sZXZlbF0gfHwgMCkgOiAwOwogICAgICAgICAgICAgICAgY29uc3Qgc2FmZUx2bCA9IGx2bC5sZXZlbC5yZXBsYWNlKC8nL2csICJcXCciKTsKICAgICAgICAgICAgICAgIHBhcmFtSHRtbCArPSBgPGRpdiBjbGFzcz0ibHZsLWlucHV0LWl0ZW0iIHN0eWxlPSJiYWNrZ3JvdW5kOiNmZmY7IGJvcmRlcjoxcHggc29saWQgI2RkZDsgcGFkZGluZzoycHggNnB4OyBib3JkZXItcmFkaXVzOjRweDsiPjxzcGFuIHN0eWxlPSJmb250LXNpemU6MC44cmVtOyBmb250LXdlaWdodDpib2xkOyI+JHtsdmwubGV2ZWx9Ojwvc3Bhbj48aW5wdXQgdHlwZT0ibnVtYmVyIiBzdGVwPSIwLjUiIHZhbHVlPSIke3ZhbH0iIHN0eWxlPSJ3aWR0aDo1MHB4ICFpbXBvcnRhbnQ7IHRleHQtYWxpZ246Y2VudGVyOyBoZWlnaHQ6MjRweDsiIG9uY2hhbmdlPSJ1cGRTdWJWb2xMZXZlbCgnJHtzYWZlU30nLCcke3NhZmVMdmx9Jyx0aGlzLnZhbHVlKSI+PC9kaXY+YDsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHBhcmFtSHRtbCArPSBgPC9kaXY+YDsKICAgICAgICB9IGVsc2UgaWYgKG0ubW9kZSA9PT0gJ2V0YWInKSB7CiAgICAgICAgICAgICBwYXJhbUh0bWwgPSBgPGRpdiBjbGFzcz0ibHZsLWlucHV0LWl0ZW0iPjxzcGFuIHN0eWxlPSJmb250LXdlaWdodDpib2xkOyBjb2xvcjojMTZhMDg1OyI+Rm9yZmFpdCA6PC9zcGFuPjxpbnB1dCB0eXBlPSJudW1iZXIiIHN0ZXA9IjAuNSIgdmFsdWU9IiR7bS5ldGFifHwwfSIgc3R5bGU9IndpZHRoOjgwcHggIWltcG9ydGFudDsgdGV4dC1hbGlnbjpjZW50ZXI7IGZvbnQtd2VpZ2h0OmJvbGQ7IGNvbG9yOiMxNmEwODU7IGJvcmRlcjoycHggc29saWQgIzFhYmM5YzsgbWFyZ2luLWxlZnQ6IDEwcHg7IiBvbmNoYW5nZT0idXBkU3ViRXRhYignJHtzYWZlU30nLHRoaXMudmFsdWUpIj48L2Rpdj5gOwogICAgICAgIH0KCiAgICAgICAgY29uc3Qgcm93QmcgPSBpc0dyb3VwID8gJ2JhY2tncm91bmQ6I2YwZWJmODsgYm9yZGVyLWxlZnQ6NHB4IHNvbGlkICM4ZTQ0YWQ7JyAKICAgICAgICAgICAgICAgICAgICA6IGlzQ2hpbGQgPyAnYmFja2dyb3VuZDojZmFmYWZhOyBib3JkZXItbGVmdDo0cHggc29saWQgI2Q1YzhlYTsnIAogICAgICAgICAgICAgICAgICAgIDogJyc7CiAgICAgICAgY29uc3QgbmFtZUlucHV0U3R5bGUgPSBpc0dyb3VwID8gJ2ZvbnQtd2VpZ2h0OmJvbGQ7IGNvbG9yOiM2YzM0ODM7IGZvbnQtc2l6ZToxcmVtOycgOiAnZm9udC13ZWlnaHQ6Ym9sZDsnOwogICAgICAgIGNvbnN0IHByZWZpeCA9IGlzR3JvdXAgPyAn8J+TgiAnIDogKGlzQ2hpbGQgPyAnPHNwYW4gc3R5bGU9ImNvbG9yOiM4ZTQ0YWQ7bWFyZ2luLXJpZ2h0OjRweDtwYWRkaW5nLWxlZnQ6MTZweDsiPuKGszwvc3Bhbj4nIDogJycpOwoKICAgICAgICAvLyBDYWxjdWxlciBsZSBIVE1MIGR1IGNoYW1wIFBORSBlbiBkZWhvcnMgZHUgdGVtcGxhdGUgbGl0ZXJhbCBwb3VyIMOpdml0ZXIgbGVzIGltYnJpY2F0aW9ucwogICAgICAgIGNvbnN0IF9wYXJlbnRNZXRhID0gbS5wYXJlbnQgPyBEQVRBLnN1YmplY3RNZXRhW20ucGFyZW50XSA6IG51bGw7CiAgICAgICAgY29uc3QgX2lzQ2hpbGRPZkdyb3VwID0gX3BhcmVudE1ldGEgJiYgX3BhcmVudE1ldGEubW9kZSA9PT0gJ2dyb3VwJzsKICAgICAgICBsZXQgcG5lQ2VsbEh0bWw7CiAgICAgICAgaWYgKF9pc0NoaWxkT2ZHcm91cCkgewogICAgICAgICAgICBjb25zdCBfaW5oZXJpdGVkQ29kZSA9IG0ucG5lQ29kZSB8fCAnJzsKICAgICAgICAgICAgY29uc3QgX2J1cmVhdU5hbWUgPSBfaW5oZXJpdGVkQ29kZSA/IChnZXRCdXJlYXVGb3JDb2RlKF9pbmhlcml0ZWRDb2RlKSB8fCAnJykgOiAnJzsKICAgICAgICAgICAgY29uc3QgX2J1cmVhdUNvbG9yID0gX2luaGVyaXRlZENvZGUgJiYgUE5FX0JVUkVBVVhbZ2V0QnVyZWF1Rm9yQ29kZShfaW5oZXJpdGVkQ29kZSldID8gUE5FX0JVUkVBVVhbZ2V0QnVyZWF1Rm9yQ29kZShfaW5oZXJpdGVkQ29kZSldLmNvbG9yIDogJyNhYWEnOwogICAgICAgICAgICBjb25zdCBfYnVyZWF1U3BhbiA9IF9idXJlYXVOYW1lID8gJzxzcGFuIHN0eWxlPSJmb250LXNpemU6MC42NXJlbTsgY29sb3I6JyArIF9idXJlYXVDb2xvciArICc7IGZvbnQtd2VpZ2h0OjcwMDsgZGlzcGxheTpibG9jazsiPicgKyBfYnVyZWF1TmFtZSArICc8L3NwYW4+JyA6ICcnOwogICAgICAgICAgICBwbmVDZWxsSHRtbCA9ICc8ZGl2IHRpdGxlPSJDb2RlIFBORSBow6lyaXTDqSBkdSBncm91cGUgJyArIChtLnBhcmVudHx8JycpICsgJyIgc3R5bGU9ImZvbnQtZmFtaWx5Om1vbm9zcGFjZTsgZm9udC1zaXplOjAuNzVyZW07IGNvbG9yOiM2YzM0ODM7IGJhY2tncm91bmQ6I2YwZWJmODsgYm9yZGVyOjFweCBzb2xpZCAjZDVjOGVhOyBib3JkZXItcmFkaXVzOjRweDsgcGFkZGluZzozcHggNXB4OyB0ZXh0LWFsaWduOmNlbnRlcjsgY3Vyc29yOmRlZmF1bHQ7Ij7wn5SSICcgKyAoX2luaGVyaXRlZENvZGUgfHwgJ+KAkycpICsgX2J1cmVhdVNwYW4gKyAnPC9kaXY+JzsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBjb25zdCBfcG5lT3B0aW9ucyA9IE9iamVjdC5lbnRyaWVzKFBORV9CVVJFQVVYKS5tYXAoKFtiaWQsIGJdKSA9PgogICAgICAgICAgICAgICAgJzxvcHRncm91cCBsYWJlbD0iJyArIGJpZCArICciPicgKyBPYmplY3QuZW50cmllcyhiLmRpc2NpcGxpbmVzKS5tYXAoKFtjb2RlLCBsYmxdKSA9PgogICAgICAgICAgICAgICAgICAgICc8b3B0aW9uIHZhbHVlPSInICsgY29kZSArICciICcgKyAobS5wbmVDb2RlID09PSBjb2RlID8gJ3NlbGVjdGVkJyA6ICcnKSArICc+JyArIGNvZGUgKyAnIOKAkyAnICsgbGJsICsgJzwvb3B0aW9uPicKICAgICAgICAgICAgICAgICkuam9pbignJykgKyAnPC9vcHRncm91cD4nCiAgICAgICAgICAgICkuam9pbignJyk7CiAgICAgICAgICAgIGNvbnN0IF9idXJlYXVCYWRnZSA9IG0ucG5lQ29kZSAmJiBQTkVfQlVSRUFVWFtnZXRCdXJlYXVGb3JDb2RlKG0ucG5lQ29kZSldCiAgICAgICAgICAgICAgICA/ICc8c3BhbiBzdHlsZT0iZm9udC1zaXplOjAuNjVyZW07IGNvbG9yOicgKyAoUE5FX0JVUkVBVVhbZ2V0QnVyZWF1Rm9yQ29kZShtLnBuZUNvZGUpXS5jb2xvcnx8JyNhYWEnKSArICc7IGZvbnQtd2VpZ2h0OjcwMDsgZGlzcGxheTpibG9jazsgbWFyZ2luLXRvcDoycHg7Ij4nICsgKGdldEJ1cmVhdUZvckNvZGUobS5wbmVDb2RlKXx8JycpICsgJzwvc3Bhbj4nCiAgICAgICAgICAgICAgICA6ICcnOwogICAgICAgICAgICBwbmVDZWxsSHRtbCA9ICc8c2VsZWN0IHN0eWxlPSJmb250LXNpemU6MC43NXJlbTsgd2lkdGg6MTAwJTsgcGFkZGluZzozcHg7IiBvbmNoYW5nZT0idXBkYXRlU3ViamVjdE1ldGEoXCcnICsgc2FmZVMgKyAnXCcsXCdwbmVDb2RlXCcsdGhpcy52YWx1ZSkiIHRpdGxlPSJDb2RlIFBORSI+PG9wdGlvbiB2YWx1ZT0iIj7igJMgUE5FIOKAkzwvb3B0aW9uPicgKyBfcG5lT3B0aW9ucyArICc8L3NlbGVjdD4nICsgX2J1cmVhdUJhZGdlOwogICAgICAgIH0KCiAgICAgICAgdC5pbm5lckhUTUwgKz0gYDx0ciBzdHlsZT0iJHtyb3dCZ30iPgogICAgICAgICAgICA8dGQgc3R5bGU9IndpZHRoOjgwcHg7Ij48aW5wdXQgdHlwZT0idGV4dCIgdmFsdWU9IiR7bS5jb2RlfHwnJ30iIHBsYWNlaG9sZGVyPSJDb2RlIiBzdHlsZT0iZm9udC1mYW1pbHk6bW9ub3NwYWNlOyB0ZXh0LWFsaWduOmNlbnRlcjsiIG9uY2hhbmdlPSJ1cGRhdGVTdWJqZWN0TWV0YSgnJHtzYWZlU30nLCdjb2RlJyx0aGlzLnZhbHVlKSI+PC90ZD4KICAgICAgICAgICAgPHRkPiR7cHJlZml4fTxpbnB1dCB0eXBlPSJ0ZXh0IiB2YWx1ZT0iJHtzfSIgc3R5bGU9IiR7bmFtZUlucHV0U3R5bGV9IiBvbmNoYW5nZT0icmVuYW1lU3ViamVjdCgnJHtzYWZlU30nLHRoaXMudmFsdWUpIj48L3RkPgogICAgICAgICAgICA8dGQgc3R5bGU9IndpZHRoOjEwMHB4OyB0ZXh0LWFsaWduOmNlbnRlcjsiPiR7cG5lQ2VsbEh0bWx9PC90ZD4KICAgICAgICAgICAgPHRkIHN0eWxlPSJ3aWR0aDoxODBweDsiPjxzZWxlY3Qgc3R5bGU9ImZvbnQtc2l6ZTowLjlyZW07IiBvbmNoYW5nZT0idXBkYXRlU3ViamVjdE1ldGEoJyR7c2FmZVN9JywncGFyZW50Jyx0aGlzLnZhbHVlKSI+JHtwYXJlbnRPcHRpb25zfTwvc2VsZWN0PjwvdGQ+CiAgICAgICAgICAgIDx0ZCBzdHlsZT0id2lkdGg6MTQwcHg7IHRleHQtYWxpZ246Y2VudGVyOyI+JHtpc0dyb3VwID8gJzxzcGFuIHN0eWxlPSJjb2xvcjojY2NjO2ZvbnQtc2l6ZTowLjhyZW07Ij7igJM8L3NwYW4+JyA6IGxpbmtlZEJ0bn08L3RkPgogICAgICAgICAgICA8dGQgc3R5bGU9IndpZHRoOjE2MHB4OyI+CiAgICAgICAgICAgICAgICA8c2VsZWN0IG9uY2hhbmdlPSJ1cGRhdGVTdWJqZWN0TWV0YSgnJHtzYWZlU30nLCdtb2RlJyx0aGlzLnZhbHVlKSI+CiAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iZGl2IiAke20ubW9kZT09PSdkaXYnPydzZWxlY3RlZCc6Jyd9PkRpdmlzaW9uPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0ibGV2ZWwiICR7bS5tb2RlPT09J2xldmVsJz8nc2VsZWN0ZWQnOicnfT5OaXZlYXU8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJldGFiIiAke20ubW9kZT09PSdldGFiJz8nc2VsZWN0ZWQnOicnfT7DiXRhYmxpc3NlbWVudDwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9Imdyb3VwIiAke20ubW9kZT09PSdncm91cCc/J3NlbGVjdGVkJzonJ30+UmVncm91cGVtZW50PC9vcHRpb24+CiAgICAgICAgICAgICAgICA8L3NlbGVjdD4KICAgICAgICAgICAgPC90ZD4KICAgICAgICAgICAgPHRkIHN0eWxlPSJ0ZXh0LWFsaWduOmxlZnQ7Ij4ke3BhcmFtSHRtbH08L3RkPgogICAgICAgICAgICA8dGQgc3R5bGU9IndpZHRoOjUwcHg7Ij48YnV0dG9uIGNsYXNzPSJidG4gYnRuLWRhbmdlciBidG4tc20iIG9uY2xpY2s9ImRlbFN1YmplY3QoJyR7c2FmZVN9JykiPsOXPC9idXR0b24+PC90ZD4KICAgICAgICA8L3RyPmA7CgogICAgICAgIC8vIEVuZmFudHMgc291cyBsZSBncm91cGUKICAgICAgICBpZiAoaXNHcm91cCkgewogICAgICAgICAgICBzb3J0ZWRTdWJqZWN0cwogICAgICAgICAgICAgICAgLmZpbHRlcihjcyA9PiBEQVRBLnN1YmplY3RNZXRhW2NzXT8ucGFyZW50ID09PSBzKQogICAgICAgICAgICAgICAgLmZvckVhY2goY3MgPT4gcmVuZGVyU3ViamVjdFJvdyhjcywgdHJ1ZSkpOwogICAgICAgIH0KICAgIH0KCiAgICAvLyAxLiBTdXItbWF0acOocmVzIChtb2RlPWdyb3VwKSBhdmVjIGxldXJzIGVuZmFudHMKICAgIGNvbnN0IGdyb3VwUm9vdHMgPSByb290cyA9PiByb290cy5maWx0ZXIocyA9PiBEQVRBLnN1YmplY3RNZXRhW3NdPy5tb2RlID09PSAnZ3JvdXAnKTsKICAgIGNvbnN0IG5vcm1hbFJvb3RzID0gcm9vdHMgPT4gcm9vdHMuZmlsdGVyKHMgPT4gREFUQS5zdWJqZWN0TWV0YVtzXT8ubW9kZSAhPT0gJ2dyb3VwJyk7CiAgICBjb25zdCB0b3BMZXZlbCA9IHNvcnRlZFN1YmplY3RzLmZpbHRlcihzID0+ICFEQVRBLnN1YmplY3RNZXRhW3NdPy5wYXJlbnQpOwogICAgY29uc3QgY2hpbGRyZW5PZkdyb3VwcyA9IG5ldyBTZXQoCiAgICAgICAgc29ydGVkU3ViamVjdHMuZmlsdGVyKHMgPT4gewogICAgICAgICAgICBjb25zdCBwID0gREFUQS5zdWJqZWN0TWV0YVtzXT8ucGFyZW50OwogICAgICAgICAgICByZXR1cm4gcCAmJiBEQVRBLnN1YmplY3RNZXRhW3BdPy5tb2RlID09PSAnZ3JvdXAnOwogICAgICAgIH0pCiAgICApOwoKICAgIC8vIEFmZmljaGVyIGdyb3VwZXMgYXZlYyBlbmZhbnRzLCBwdWlzIG1hdGnDqHJlcyBub3JtYWxlcyBkZSByYWNpbmUKICAgIGdyb3VwUm9vdHModG9wTGV2ZWwpLmZvckVhY2gocyA9PiByZW5kZXJTdWJqZWN0Um93KHMsIGZhbHNlKSk7CiAgICBub3JtYWxSb290cyh0b3BMZXZlbCkuZm9yRWFjaChzID0+IHJlbmRlclN1YmplY3RSb3cocywgZmFsc2UpKTsKICAgIC8vIE9ycGhlbGlucyAocGFyZW50IGTDqWZpbmkgbWFpcyBub24tZ3JvdXAgb3UgbWFucXVhbnQpCiAgICBzb3J0ZWRTdWJqZWN0cwogICAgICAgIC5maWx0ZXIocyA9PiBEQVRBLnN1YmplY3RNZXRhW3NdPy5wYXJlbnQgJiYgIWNoaWxkcmVuT2ZHcm91cHMuaGFzKHMpKQogICAgICAgIC5mb3JFYWNoKHMgPT4gcmVuZGVyU3ViamVjdFJvdyhzLCB0cnVlKSk7Cn0KCgovKioKICogQWN0aXZlIG91IGTDqXNhY3RpdmUgbGUgbGllbiBlbnRyZSBkZXV4IG1hdGnDqHJlcwogKiBAcGFyYW0ge3N0cmluZ30gdGFyZ2V0U3ViamVjdCAtIExhIG1hdGnDqHJlIHByaW5jaXBhbGUgKGV4OiAiRW5zLiBTY2llbnRpZmlxdWUiKQogKiBAcGFyYW0ge3N0cmluZ30gbGlua2VkU3ViamVjdCAtIExhIG1hdGnDqHJlIMOgIGF1dG9yaXNlciAoZXg6ICJNYXRocyIpCiAqLwpmdW5jdGlvbiB0b2dnbGVMaW5rZWRTdWJqZWN0KHRhcmdldFN1YmplY3QsIGxpbmtlZFN1YmplY3QpIHsKICAgIGlmICghREFUQS5zdWJqZWN0TWV0YVt0YXJnZXRTdWJqZWN0XSkgcmV0dXJuOwogICAgCiAgICAvLyBJbml0aWFsaXNhdGlvbiBkdSB0YWJsZWF1IHNpIGluZXhpc3RhbnQKICAgIGlmICghREFUQS5zdWJqZWN0TWV0YVt0YXJnZXRTdWJqZWN0XS5saW5rZWRTdWJqZWN0cykgewogICAgICAgIERBVEEuc3ViamVjdE1ldGFbdGFyZ2V0U3ViamVjdF0ubGlua2VkU3ViamVjdHMgPSBbXTsKICAgIH0KICAgIAogICAgY29uc3QgYXJyID0gREFUQS5zdWJqZWN0TWV0YVt0YXJnZXRTdWJqZWN0XS5saW5rZWRTdWJqZWN0czsKICAgIGNvbnN0IGlkeCA9IGFyci5pbmRleE9mKGxpbmtlZFN1YmplY3QpOwogICAgCiAgICBpZiAoaWR4ID4gLTEpIHsKICAgICAgICAvLyBTaSBleGlzdGUgZMOpasOgLCBvbiByZXRpcmUKICAgICAgICBhcnIuc3BsaWNlKGlkeCwgMSk7CiAgICB9IGVsc2UgewogICAgICAgIC8vIFNpbm9uLCBvbiBham91dGUKICAgICAgICBhcnIucHVzaChsaW5rZWRTdWJqZWN0KTsKICAgIH0KICAgIAogICAgc2F2ZURhdGEoKTsKICAgIC8vIE9uIG5lIHJlY2hhcmdlIHBhcyB0b3V0ZSBsYSB2dWUgcG91ciBuZSBwYXMgcGVyZHJlIGxlIHNjcm9sbCBvdSBsZSBmb2N1cywKICAgIC8vIExhIHNhdXZlZ2FyZGUgc3VmZml0IGNhciBsJ8OpdGF0IHZpc3VlbCAoY2hlY2tlZCkgYSBkw6lqw6AgY2hhbmfDqSB2aWEgbGUgY2xpYy4KfQoKZnVuY3Rpb24gdXBkYXRlU3ViamVjdE1ldGEocyxmLHYpeyAKICAgIGlmKCFEQVRBLnN1YmplY3RNZXRhW3NdKSBEQVRBLnN1YmplY3RNZXRhW3NdPXt9OyAKICAgIERBVEEuc3ViamVjdE1ldGFbc11bZl09djsgCiAgICAKICAgIC8vIFNpIG9uIG1ldCDDoCBqb3VyIGxlIGNvZGUgUE5FLCBvbiBtZXQgYXVzc2kgw6Agam91ciBsZSBidXJlYXUgYXV0b21hdGlxdWVtZW50CiAgICBpZihmID09PSAncG5lQ29kZScgfHwgZiA9PT0gJ2NvZGUnKSB7CiAgICAgICAgY29uc3QgY29kZSA9IHY7CiAgICAgICAgY29uc3QgYnVyZWF1ID0gZ2V0QnVyZWF1Rm9yQ29kZShjb2RlKTsKICAgICAgICBEQVRBLnN1YmplY3RNZXRhW3NdLmJ1cmVhdSA9IGJ1cmVhdSB8fCAnJzsKICAgICAgICAKICAgICAgICAvLyBTaSBjJ2VzdCB1biBncm91cGUgKHN1ci1tYXRpw6hyZSksIHByb3BhZ2VyIGxlIGNvZGUgUE5FIMOgIHRvdXRlcyBzZXMgc291cy1tYXRpw6hyZXMKICAgICAgICBpZihEQVRBLnN1YmplY3RNZXRhW3NdPy5tb2RlID09PSAnZ3JvdXAnKSB7CiAgICAgICAgICAgIERBVEEuc3ViamVjdHMuZm9yRWFjaChjaGlsZCA9PiB7CiAgICAgICAgICAgICAgICBpZihEQVRBLnN1YmplY3RNZXRhW2NoaWxkXT8ucGFyZW50ID09PSBzKSB7CiAgICAgICAgICAgICAgICAgICAgREFUQS5zdWJqZWN0TWV0YVtjaGlsZF0ucG5lQ29kZSA9IHY7CiAgICAgICAgICAgICAgICAgICAgREFUQS5zdWJqZWN0TWV0YVtjaGlsZF0uYnVyZWF1ID0gYnVyZWF1IHx8ICcnOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICB9CiAgICAKICAgIC8vIFNpIG9uIGFzc2lnbmUgdW4gcGFyZW50IMOgIGNldHRlIG1hdGnDqHJlLCBow6lyaXRlciBkdSBjb2RlIFBORSBzaSBsZSBwYXJlbnQgZXN0IHVuIGdyb3VwZQogICAgaWYoZiA9PT0gJ3BhcmVudCcpIHsKICAgICAgICBjb25zdCBwYXJlbnRNZXRhID0gREFUQS5zdWJqZWN0TWV0YVt2XTsKICAgICAgICBpZihwYXJlbnRNZXRhICYmIHBhcmVudE1ldGEubW9kZSA9PT0gJ2dyb3VwJyAmJiBwYXJlbnRNZXRhLnBuZUNvZGUpIHsKICAgICAgICAgICAgREFUQS5zdWJqZWN0TWV0YVtzXS5wbmVDb2RlID0gcGFyZW50TWV0YS5wbmVDb2RlOwogICAgICAgICAgICBEQVRBLnN1YmplY3RNZXRhW3NdLmJ1cmVhdSA9IGdldEJ1cmVhdUZvckNvZGUocGFyZW50TWV0YS5wbmVDb2RlKSB8fCAnJzsKICAgICAgICB9CiAgICB9CiAgICAKICAgIGlmKGYgPT09ICdtb2RlJykgewogICAgICAgICBpZih2ID09PSAnZGl2JyAmJiAhREFUQS5zdWJqZWN0TWV0YVtzXS5sZXZlbHMpIERBVEEuc3ViamVjdE1ldGFbc10ubGV2ZWxzID0gZ2V0RGVmYXVsdEFjdGl2ZUxldmVscyhzKTsKICAgICAgICAgaWYodiA9PT0gJ2xldmVsJyAmJiAhREFUQS5zdWJqZWN0TWV0YVtzXS52b2xMZXZlbCkgREFUQS5zdWJqZWN0TWV0YVtzXS52b2xMZXZlbCA9IHt9OwogICAgfQogICAgCiAgICBzYXZlRGF0YSgpOyAKICAgIHJlbmRlclN1YmplY3RzQ29uZmlnKCk7Cn0KZnVuY3Rpb24gdG9nZ2xlU3ViTGV2ZWwocywgbHZsKSB7CiAgICBpZighREFUQS5zdWJqZWN0TWV0YVtzXS5sZXZlbHMpIERBVEEuc3ViamVjdE1ldGFbc10ubGV2ZWxzID0gW107CiAgICBjb25zdCBhcnIgPSBEQVRBLnN1YmplY3RNZXRhW3NdLmxldmVsczsKICAgIGlmKGFyci5pbmNsdWRlcyhsdmwpKSBEQVRBLnN1YmplY3RNZXRhW3NdLmxldmVscyA9IGFyci5maWx0ZXIoeCA9PiB4ICE9PSBsdmwpOwogICAgZWxzZSBhcnIucHVzaChsdmwpOwogICAgc2F2ZURhdGEoKTsKfQpmdW5jdGlvbiB1cGRTdWJWb2xMZXZlbChzLCBsdmwsIHZhbCkgewogICAgaWYoIURBVEEuc3ViamVjdE1ldGFbc10udm9sTGV2ZWwpIERBVEEuc3ViamVjdE1ldGFbc10udm9sTGV2ZWwgPSB7fTsKICAgIERBVEEuc3ViamVjdE1ldGFbc10udm9sTGV2ZWxbbHZsXSA9IHBhcnNlRmxvYXQodmFsKSB8fCAwOwogICAgc2F2ZURhdGEoKTsKfQpmdW5jdGlvbiB1cGRTdWJFdGFiKHMsIHZhbCkgewogICAgREFUQS5zdWJqZWN0TWV0YVtzXS5ldGFiID0gcGFyc2VGbG9hdCh2YWwpIHx8IDA7CiAgICBzYXZlRGF0YSgpOwp9CgpmdW5jdGlvbiByZW5hbWVTdWJqZWN0KG9sZE5hbWUsIG5ld05hbWUpIHsgCiAgICBpZighbmV3TmFtZSB8fCBuZXdOYW1lPT09b2xkTmFtZSkgeyByZW5kZXJTdWJqZWN0c0NvbmZpZygpOyByZXR1cm47IH0KICAgIGlmKERBVEEuc3ViamVjdHMuaW5jbHVkZXMobmV3TmFtZSkpIHsgYWxlcnQoIkNlIG5vbSBleGlzdGUgZMOpasOgICEiKTsgcmVuZGVyU3ViamVjdHNDb25maWcoKTsgcmV0dXJuOyB9CgogICAgREFUQS5zdWJqZWN0c1tEQVRBLnN1YmplY3RzLmluZGV4T2Yob2xkTmFtZSldID0gbmV3TmFtZTsgCiAgICAKICAgIGlmKERBVEEuc3ViamVjdE1ldGFbb2xkTmFtZV0pewogICAgICAgIERBVEEuc3ViamVjdE1ldGFbbmV3TmFtZV0gPSBEQVRBLnN1YmplY3RNZXRhW29sZE5hbWVdOwogICAgICAgIGRlbGV0ZSBEQVRBLnN1YmplY3RNZXRhW29sZE5hbWVdOwogICAgfQogICAgCiAgICBPYmplY3Qua2V5cyhEQVRBLnN1YmplY3RNZXRhKS5mb3JFYWNoKHMgPT4geyAKICAgICAgICBpZihEQVRBLnN1YmplY3RNZXRhW3NdLnBhcmVudCA9PT0gb2xkTmFtZSkgewogICAgICAgICAgICBEQVRBLnN1YmplY3RNZXRhW3NdLnBhcmVudCA9IG5ld05hbWU7CiAgICAgICAgfQogICAgfSk7IAogICAgCiAgICBPYmplY3Qua2V5cyhEQVRBLmxldmVsQ29uZmlnKS5mb3JFYWNoKGwgPT4gewogICAgICAgIGlmKERBVEEubGV2ZWxDb25maWdbbF1bb2xkTmFtZV0pewogICAgICAgICAgICBEQVRBLmxldmVsQ29uZmlnW2xdW25ld05hbWVdID0gREFUQS5sZXZlbENvbmZpZ1tsXVtvbGROYW1lXTsKICAgICAgICAgICAgZGVsZXRlIERBVEEubGV2ZWxDb25maWdbbF1bb2xkTmFtZV07CiAgICAgICAgfQogICAgfSk7IAogICAgCiAgICBPYmplY3Qua2V5cyhEQVRBLmNsYXNzT3ZlcnJpZGVzKS5mb3JFYWNoKGMgPT4gewogICAgICAgIGlmKERBVEEuY2xhc3NPdmVycmlkZXNbY11bb2xkTmFtZV0pIHsKICAgICAgICAgICAgREFUQS5jbGFzc092ZXJyaWRlc1tjXVtuZXdOYW1lXSA9IERBVEEuY2xhc3NPdmVycmlkZXNbY11bb2xkTmFtZV07CiAgICAgICAgICAgIGRlbGV0ZSBEQVRBLmNsYXNzT3ZlcnJpZGVzW2NdW29sZE5hbWVdOwogICAgICAgIH0KICAgIH0pOwoKICAgIERBVEEudGVhY2hlcnMuZm9yRWFjaCh0ID0+IHsKICAgICAgICBpZih0LnN1YmplY3QgPT09IG9sZE5hbWUpIHQuc3ViamVjdCA9IG5ld05hbWU7CiAgICB9KTsgCiAgICAKICAgIHNhdmVEYXRhKCk7IAogICAgcmVuZGVyU3ViamVjdHNDb25maWcoKTsKICAgIAogICAgaWYoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ZlbnRpbGF0aW9uJykuY2xhc3NMaXN0LmNvbnRhaW5zKCdhY3RpdmUnKSkgcmVuZGVyR3JpZFN5c3RlbSgpOwp9CgovLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KLy8gVlVFIFBJTE9UQUdFIChESVNDSVBMSU5FKSAtIE1pc2Ugw6Agam91ciBWMi45IChQcmlzZSBlbiBjb21wdGUgQ1NEICsgRMOpY2hhcmdlcykKLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCmZ1bmN0aW9uIHJlbmRlclJIRGlzYygpIHsKICAgIGNvbnN0IG5lZWRzID0gY2FsY3VsYXRlTmVlZHMoKTsKICAgIGNvbnN0IHRCb2R5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JoLWRpc2MtYm9keScpOwogICAgY29uc3QgdEZvb3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmgtZGlzYy10b3RhbCcpOwogICAgdEJvZHkuaW5uZXJIVE1MID0gJyc7CiAgICAKICAgIGNvbnN0IHJvb3RzID0gREFUQS5zdWJqZWN0cy5maWx0ZXIocyA9PiAhREFUQS5zdWJqZWN0TWV0YVtzXT8ucGFyZW50KS5zb3J0KCk7CgogICAgY29uc3QgZ2V0U3RhdHMgPSAoc3ViKSA9PiB7CiAgICAgICAgY29uc3QgcHJvZnMgPSBnZXRFbnRpdHlUZWFjaGVycygpLmZpbHRlcih0ID0+IHQuc3ViamVjdCA9PT0gc3ViKTsKICAgICAgICBjb25zdCBkZWNoSW50ID0gcHJvZnMucmVkdWNlKChhLHQpPT5hKyh0LmRlY2hhcmdlfHwwKSwgMCk7CiAgICAgICAgY29uc3QgZGVjaEV4dCA9IHByb2ZzLnJlZHVjZSgoYSx0KT0+YSsodC5kZWNoX2V4dHx8MCksIDApOwogICAgICAgIGNvbnN0IGhwID0gcHJvZnMucmVkdWNlKChhLHQpPT4gYSArICh0Lm9ycyAtICh0LmNzZHx8MCkgLSAodC5kZWNoX2V4dHx8MCkpLCAwKTsKICAgICAgICBjb25zdCBoc2EgPSBwcm9mcy5yZWR1Y2UoKGEsdCk9PmErdC5oc2EsIDApOwogICAgICAgIGNvbnN0IGJlcyA9IChuZWVkc1tzdWJdIHx8IDApICsgZGVjaEludDsKICAgICAgICBjb25zdCBhcHAgPSBocCArIGhzYTsKICAgICAgICByZXR1cm4geyBiZXMsIGFwcCwgaHAsIGhzYSwgcHJvZnMgfTsKICAgIH07CgogICAgcm9vdHMuZm9yRWFjaChyID0+IHsKICAgICAgICBjb25zdCByU3RhdHMgPSBnZXRTdGF0cyhyKTsKICAgICAgICBjb25zdCBzYWZlUiA9IHIucmVwbGFjZSgvJy9nLCAiXFwnIik7CiAgICAgICAgY29uc3Qga2lkcyA9IERBVEEuc3ViamVjdHMuZmlsdGVyKHMgPT4gREFUQS5zdWJqZWN0TWV0YVtzXT8ucGFyZW50ID09PSByKTsKICAgICAgICAKICAgICAgICBpZiAoa2lkcy5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgIGxldCBwb2xlQmVzID0gclN0YXRzLmJlczsKICAgICAgICAgICAgbGV0IHBvbGVBcHAgPSByU3RhdHMuYXBwOwogICAgICAgICAgICBsZXQgcG9sZUhQID0gclN0YXRzLmhwOwogICAgICAgICAgICBsZXQgcG9sZUhTQSA9IHJTdGF0cy5oc2E7CiAgICAgICAgICAgIAogICAgICAgICAgICBjb25zdCBraWRzRGF0YSA9IGtpZHMubWFwKGsgPT4gewogICAgICAgICAgICAgICAgY29uc3Qga1N0YXRzID0gZ2V0U3RhdHMoayk7CiAgICAgICAgICAgICAgICBwb2xlQmVzICs9IGtTdGF0cy5iZXM7CiAgICAgICAgICAgICAgICBwb2xlQXBwICs9IGtTdGF0cy5hcHA7CiAgICAgICAgICAgICAgICBwb2xlSFAgKz0ga1N0YXRzLmhwOwogICAgICAgICAgICAgICAgcG9sZUhTQSArPSBrU3RhdHMuaHNhOwogICAgICAgICAgICAgICAgcmV0dXJuIHsgbmFtZTogaywgc3RhdHM6IGtTdGF0cyB9OwogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIGNvbnN0IHNvbGRlUG9sZSA9IHBvbGVBcHAgLSBwb2xlQmVzOwogICAgICAgICAgICAKICAgICAgICAgICAgLy8gRU4tVMOKVEUgUMOUTEUgKEdyaXMgQW50aHJhY2l0ZSkKICAgICAgICAgICAgdEJvZHkuaW5uZXJIVE1MICs9IGA8dHIgY2xhc3M9InJvdy1oZWFkZXIiPgogICAgICAgICAgICAgICAgPHRkIHN0eWxlPSJ0ZXh0LWFsaWduOmxlZnQ7IHBhZGRpbmctbGVmdDoxMHB4OyI+8J+TpiBQw5RMRSAke3IudG9VcHBlckNhc2UoKX08L3RkPgogICAgICAgICAgICAgICAgPHRkIHN0eWxlPSJjb2xvcjojZjFjNDBmOyI+JHtwb2xlQmVzLnRvRml4ZWQoMSl9PC90ZD4KICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT0iY29sb3I6IzgxZDRmYTsiPiR7cG9sZUFwcC50b0ZpeGVkKDEpfTwvdGQ+CiAgICAgICAgICAgICAgICA8dGQgc3R5bGU9ImJhY2tncm91bmQ6JHtzb2xkZVBvbGU+PTA/JyMyN2FlNjAnOicjYzAzOTJiJ307IGNvbG9yOndoaXRlOyI+JHtzb2xkZVBvbGUudG9GaXhlZCgxKX08L3RkPgogICAgICAgICAgICA8L3RyPmA7CgogICAgICAgICAgICByZW5kZXJTdWJqZWN0Um93KHIsIHJTdGF0cywgdHJ1ZSwgYOKGsyAke3J9YCwgc2FmZVIpOwoKICAgICAgICAgICAga2lkc0RhdGEuZm9yRWFjaChrZCA9PiB7CiAgICAgICAgICAgICAgICByZW5kZXJTdWJqZWN0Um93KGtkLm5hbWUsIGtkLnN0YXRzLCB0cnVlLCBg4oazICR7a2QubmFtZX1gLCBrZC5uYW1lLnJlcGxhY2UoLycvZywgIlxcJyIpKTsKICAgICAgICAgICAgfSk7CgogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIC8vIE1BVEnDiFJFIFNPTE8gKFN0eWxlIEVuLXTDqnRlIEdyaXMgYXVzc2kpCiAgICAgICAgICAgIHJlbmRlclN1YmplY3RSb3cociwgclN0YXRzLCBmYWxzZSwgciwgc2FmZVIsIHRydWUpOwogICAgICAgIH0KICAgIH0pOwoKICAgIGZ1bmN0aW9uIHJlbmRlclN1YmplY3RSb3cobmFtZSwgc3RhdHMsIGlzQ2hpbGQsIGRpc3BsYXlOYW1lLCBzYWZlTmFtZSwgaXNIZWFkZXIgPSBmYWxzZSkgewogICAgICAgIGlmKHN0YXRzLmJlcyA9PT0gMCAmJiBzdGF0cy5hcHAgPT09IDApIHJldHVybjsKCiAgICAgICAgbGV0IHJvd0NsYXNzID0gaXNDaGlsZCA/ICdyb3ctc3ViLW1hc3RlcicgOiAncm93LW1hc3Rlcic7CiAgICAgICAgbGV0IHN0eWxlQmVzID0gaXNDaGlsZCA/ICdiYWNrZ3JvdW5kOiNmY2YzY2Y7IGNvbG9yOiNkMzU0MDA7JyA6ICdiYWNrZ3JvdW5kOiNmZGYyZTk7IGNvbG9yOiNkMzU0MDA7JzsKICAgICAgICBsZXQgc3R5bGVBcHAgPSBpc0NoaWxkID8gJ2JhY2tncm91bmQ6I2Q2ZWFmODsgY29sb3I6IzI5ODBiOTsnIDogJ2JhY2tncm91bmQ6I2ViZjVmYjsgY29sb3I6IzI5ODBiOTsnOwogICAgICAgIAogICAgICAgIGlmIChpc0hlYWRlcikgewogICAgICAgICAgICByb3dDbGFzcyA9ICdyb3ctaGVhZGVyJzsKICAgICAgICAgICAgc3R5bGVCZXMgPSAnY29sb3I6I2YxYzQwZjsnOyAKICAgICAgICAgICAgc3R5bGVBcHAgPSAnY29sb3I6IzgxZDRmYTsnOyAKICAgICAgICB9CgogICAgICAgIGNvbnN0IGFkZEJ0biA9IGA8YnV0dG9uIGNsYXNzPSJidG4tYWRkLXN1YmplY3QtdGVhY2hlciIgb25jbGljaz0iYWRkVGVhY2hlclRvU3ViamVjdCgnJHtzYWZlTmFtZX0nKSIgc3R5bGU9IiR7aXNIZWFkZXIgPyAnYm9yZGVyOjFweCBzb2xpZCB3aGl0ZTsnIDogJyd9Ij4rPC9idXR0b24+YDsKICAgICAgICBjb25zdCBzb2xkZSA9IHN0YXRzLmFwcCAtIHN0YXRzLmJlczsKICAgICAgICBjb25zdCBwYWRkaW5nTmFtZSA9IGlzQ2hpbGQgPyAncGFkZGluZy1sZWZ0OjIwcHg7JyA6ICcnOwoKICAgICAgICB0Qm9keS5pbm5lckhUTUwgKz0gYDx0ciBjbGFzcz0iJHtyb3dDbGFzc30iPgogICAgICAgICAgICA8dGQgc3R5bGU9InRleHQtYWxpZ246bGVmdDsgZGlzcGxheTpmbGV4OyBhbGlnbi1pdGVtczpjZW50ZXI7ICR7cGFkZGluZ05hbWV9Ij4ke2Rpc3BsYXlOYW1lfSAke2FkZEJ0bn08L3RkPgogICAgICAgICAgICA8dGQgc3R5bGU9IiR7c3R5bGVCZXN9Ij4ke3N0YXRzLmJlcy50b0ZpeGVkKDEpfTwvdGQ+CiAgICAgICAgICAgIDx0ZCBzdHlsZT0iJHtzdHlsZUFwcH0iPiR7c3RhdHMuYXBwLnRvRml4ZWQoMSl9PC90ZD4KICAgICAgICAgICAgPHRkIHN0eWxlPSJjb2xvcjoke3NvbGRlPj0wID8gKGlzSGVhZGVyPycjMmVjYzcxJzonZ3JlZW4nKSA6IChpc0hlYWRlcj8nI2U3NGMzYyc6J3JlZCcpfSI+JHtzb2xkZS50b0ZpeGVkKDEpfTwvdGQ+CiAgICAgICAgPC90cj5gOwoKICAgICAgICBzdGF0cy5wcm9mcy5mb3JFYWNoKHAgPT4gewogICAgICAgICAgICBsZXQgZGV0YWlsc1R4dCA9ICIiOwogICAgICAgICAgICAKICAgICAgICAgICAgLy8gLS0tIFJFU1RBVVJBVElPTiA6IEJBREdFUyBDTElRVUFCTEVTIEFWRUMgQ1JBWU9OIC0tLQogICAgICAgICAgICAKICAgICAgICAgICAgLy8gMS4gQk1QIChTaSA+IDApCiAgICAgICAgICAgIGlmKHAuYm1wID4gMCkgewogICAgICAgICAgICAgICAgZGV0YWlsc1R4dCArPSBgPGRpdiBvbmNsaWNrPSJzZXRCTVAoJHtwLmlkeH0pIiB0aXRsZT0iTW9kaWZpZXIgbGUgdm9sdW1lIGR1IEJNUCIgc3R5bGU9ImN1cnNvcjpwb2ludGVyOyBiYWNrZ3JvdW5kOiNlYmY1ZmI7IGJvcmRlcjoxcHggc29saWQgI2FlZDZmMTsgY29sb3I6IzJjM2U1MDsgZm9udC1zaXplOjAuNzVyZW07IGZvbnQtd2VpZ2h0OmJvbGQ7IG1hcmdpbi10b3A6MnB4OyBwYWRkaW5nOjJweCA1cHg7IGJvcmRlci1yYWRpdXM6NHB4OyBkaXNwbGF5OmlubGluZS1mbGV4OyBhbGlnbi1pdGVtczpjZW50ZXI7IGdhcDo1cHg7Ij4KICAgICAgICAgICAgICAgICAgIDxzcGFuPuKYhSBCTVAgOiAke3AuYm1wfWg8L3NwYW4+IDxzcGFuPuKcj++4jzwvc3Bhbj4KICAgICAgICAgICAgICAgIDwvZGl2Pjxicj5gOwogICAgICAgICAgICB9CiAgICAgICAgICAgIAogICAgICAgICAgICAvLyAyLiBDU0QgKFNpID4gMCkKICAgICAgICAgICAgaWYocC5jc2QgPiAwKSB7CiAgICAgICAgICAgICAgICBkZXRhaWxzVHh0ICs9IGA8ZGl2IG9uY2xpY2s9InNldENTRCgke3AuaWR4fSkiIHRpdGxlPSJNb2RpZmllciBsZSB2b2x1bWUgQ1NEIiBzdHlsZT0iY3Vyc29yOnBvaW50ZXI7IGJhY2tncm91bmQ6I2ZkZjJlOTsgYm9yZGVyOjFweCBzb2xpZCAjZmFkN2EwOyBjb2xvcjojZTY3ZTIyOyBmb250LXNpemU6MC43NXJlbTsgZm9udC13ZWlnaHQ6Ym9sZDsgbWFyZ2luLXRvcDoycHg7IHBhZGRpbmc6MnB4IDVweDsgYm9yZGVyLXJhZGl1czo0cHg7IGRpc3BsYXk6aW5saW5lLWZsZXg7IGFsaWduLWl0ZW1zOmNlbnRlcjsgZ2FwOjVweDsiPgogICAgICAgICAgICAgICAgICAgPHNwYW4+KERvbnQgJHtwLmNzZH1oIENTRCk8L3NwYW4+IDxzcGFuPuKcj++4jzwvc3Bhbj4KICAgICAgICAgICAgICAgIDwvZGl2Pjxicj5gOwogICAgICAgICAgICB9CgogICAgICAgICAgICAvLyAoQXV0cmVzIGTDqWNoYXJnZXMgOiBpbmZvcm1hdGlmIHNldWxlbWVudCBwb3VyIGwnaW5zdGFudCkKICAgICAgICAgICAgaWYocC5kZWNoYXJnZSA+IDApIGRldGFpbHNUeHQgKz0gYDxzcGFuIHN0eWxlPSJjb2xvcjojOGU0NGFkOyBmb250LXNpemU6MC43cmVtOyBkaXNwbGF5OmJsb2NrOyBtYXJnaW4tdG9wOjJweDsiPihEb250ICR7cC5kZWNoYXJnZX1oIERHSCk8L3NwYW4+YDsKICAgICAgICAgICAgaWYocC5kZWNoX2V4dCA+IDApIGRldGFpbHNUeHQgKz0gYDxzcGFuIHN0eWxlPSJjb2xvcjojMjdhZTYwOyBmb250LXNpemU6MC43cmVtOyBkaXNwbGF5OmJsb2NrOyBtYXJnaW4tdG9wOjJweDsiPihEb250ICR7cC5kZWNoX2V4dH1oIFJlY3QuKTwvc3Bhbj5gOwoKICAgICAgICAgICAgY29uc3QgcmVhbENvbnRyaWJ1dGlvbiA9IChwLm9ycyAtIChwLmNzZHx8MCkgLSAocC5kZWNoX2V4dHx8MCkpICsgcC5oc2E7CiAgICAgICAgICAgIGNvbnN0IHBhZGRpbmdQcm9mID0gaXNDaGlsZCA/ICdwYWRkaW5nLWxlZnQ6NTBweDsnIDogJ3BhZGRpbmctbGVmdDozMHB4Oyc7CgogICAgICAgICAgICAvLyBCb3V0b25zIGQnYWpvdXQgKGNvbG9ubmUgMSkgOiBNYXNxdcOpcyBzaSB2YWxldXIgZMOpasOgIHNhaXNpZQogICAgICAgICAgICBjb25zdCBidG5CbXAgPSAocC5ibXAgPiAwKSAKICAgICAgICAgICAgICAgID8gJycgCiAgICAgICAgICAgICAgICA6IGA8YnV0dG9uIG9uY2xpY2s9InNldEJNUCgke3AuaWR4fSkiIHN0eWxlPSJjdXJzb3I6cG9pbnRlcjsgYmFja2dyb3VuZDojMzQ0OTVlOyBjb2xvcjp3aGl0ZTsgYm9yZGVyOm5vbmU7IGJvcmRlci1yYWRpdXM6M3B4OyBwYWRkaW5nOjFweCA1cHg7IGZvbnQtc2l6ZTowLjY1cmVtOyBtYXJnaW4tbGVmdDo1cHg7IiB0aXRsZT0iRMOpZmluaXIgQk1QIj5CTVAgPzwvYnV0dG9uPmA7CgogICAgICAgICAgICBjb25zdCBidG5Dc2QgPSAocC5jc2QgPiAwKSAKICAgICAgICAgICAgICAgID8gJycgCiAgICAgICAgICAgICAgICA6IGA8YnV0dG9uIG9uY2xpY2s9InNldENTRCgke3AuaWR4fSkiIHN0eWxlPSJjdXJzb3I6cG9pbnRlcjsgYmFja2dyb3VuZDojMTdhMmI4OyBjb2xvcjp3aGl0ZTsgYm9yZGVyOm5vbmU7IGJvcmRlci1yYWRpdXM6M3B4OyBwYWRkaW5nOjFweCA1cHg7IGZvbnQtc2l6ZTowLjY1cmVtOyBtYXJnaW4tbGVmdDo1cHg7IiB0aXRsZT0iRMOpZmluaXIgQ1NEIj5DU0QgPzwvYnV0dG9uPmA7CgogICAgICAgICAgICB0Qm9keS5pbm5lckhUTUwgKz0gYDx0ciBjbGFzcz0icm93LWRldGFpbCI+CiAgICAgICAgICAgICAgICA8dGQgc3R5bGU9IiR7cGFkZGluZ1Byb2Z9IHRleHQtYWxpZ246bGVmdDsgZGlzcGxheTpmbGV4OyBhbGlnbi1pdGVtczpjZW50ZXI7Ij4KICAgICAgICAgICAgICAgICAgICA8c3BhbiBzdHlsZT0iY29sb3I6I2JkYzNjNzsgbWFyZ2luLXJpZ2h0OjVweDsiPuKGszwvc3Bhbj4KICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0idGV4dCIgdmFsdWU9IiR7cC5uYW1lfSIgb25jaGFuZ2U9InVwZFQoJHtwLmlkeH0sJ25hbWUnLHRoaXMudmFsdWUpIiBzdHlsZT0iYm9yZGVyOm5vbmU7IGJvcmRlci1ib3R0b206MXB4IGRhc2hlZCAjYmRjM2M3OyBiYWNrZ3JvdW5kOnRyYW5zcGFyZW50OyB3aWR0aDoxNDBweDsgY29sb3I6IzJjM2U1MDsgZm9udC13ZWlnaHQ6NTAwOyIgcGxhY2Vob2xkZXI9Ik5vbSI+CiAgICAgICAgICAgICAgICAgICAgJHtidG5CbXB9ICR7YnRuQ3NkfQogICAgICAgICAgICAgICAgICAgIDxzcGFuIHN0eWxlPSJmb250LXNpemU6MC43NXJlbTsgY29sb3I6Izk5OTsgbWFyZ2luLWxlZnQ6NXB4OyI+KCR7cC5ncmFkZSB8fCBwLnN0YXR1cyB8fCAnJ30pPC9zcGFuPgogICAgICAgICAgICAgICAgPC90ZD4KICAgICAgICAgICAgICAgIDx0ZCBjb2xzcGFuPSIyIj48L3RkPgogICAgICAgICAgICAgICAgPHRkPgogICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJudW1iZXIiIGNsYXNzPSJpbnB1dC1pbmxpbmUiIHZhbHVlPSIke3Aub3JzfSIgc3RlcD0iMC41IiBvbmNoYW5nZT0idXBkVCgke3AuaWR4fSwnb3JzJyx0aGlzLnZhbHVlKSI+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iZGlzcGxheTpmbGV4OyBmbGV4LWRpcmVjdGlvbjpjb2x1bW47IGFsaWduLWl0ZW1zOmNlbnRlcjsiPiR7ZGV0YWlsc1R4dH08L2Rpdj4KICAgICAgICAgICAgICAgIDwvdGQ+CiAgICAgICAgICAgICAgICA8dGQgc3R5bGU9ImZvbnQtd2VpZ2h0OmJvbGQ7IGNvbG9yOiM3ZjhjOGQ7Ij4ke3JlYWxDb250cmlidXRpb24udG9GaXhlZCgxKX08L3RkPgogICAgICAgICAgICA8L3RyPmA7CiAgICAgICAgfSk7CiAgICB9CiAgICAKICAgIC8vIFRvdGF1eAogICAgbGV0IHJlYWxIUD0wLCByZWFsSFNBPTAsIHJlYWxCZXNvaW4gPSAwOyAKICAgIGdldEVudGl0eVRlYWNoZXJzKCkuZm9yRWFjaCh0PT57IAogICAgICAgIHJlYWxIUCArPSAodC5vcnMgLSAodC5jc2R8fDApIC0gKHQuZGVjaF9leHR8fDApKTsgCiAgICAgICAgcmVhbEhTQSArPSB0LmhzYTsgCiAgICAgICAgcmVhbEJlc29pbiArPSAodC5kZWNoYXJnZSB8fCAwKTsKICAgIH0pOwogICAgT2JqZWN0LnZhbHVlcyhuZWVkcykuZm9yRWFjaCh2PT5yZWFsQmVzb2luKz12KTsKICAgIGNvbnN0IHJlYWxBcHBvcnQgPSByZWFsSFAgKyByZWFsSFNBOwoKICAgIHRGb290LmlubmVySFRNTCA9IGA8dGQ+VE9UQVVYIEfDiU7DiVJBVVg8L3RkPgogICAgICAgIDx0ZD4ke3JlYWxCZXNvaW4udG9GaXhlZCgxKX08L3RkPgogICAgICAgIDx0ZD4ke3JlYWxBcHBvcnQudG9GaXhlZCgxKX08L3RkPgogICAgICAgIDx0ZCBzdHlsZT0iYmFja2dyb3VuZDokeyhyZWFsQXBwb3J0LXJlYWxCZXNvaW4pPj0wPyd2YXIoLS1zdWNjZXNzKSc6J3ZhcigtLWRhbmdlciknfTsgY29sb3I6d2hpdGU7Ij4keyhyZWFsQXBwb3J0LXJlYWxCZXNvaW4pLnRvRml4ZWQoMSl9PC90ZD5gOwp9CgpmdW5jdGlvbiB1cGRhdGVZZWFyKHYpeyBEQVRBLmNvbmZpZy55ZWFyPXBhcnNlSW50KHYpOyBzYXZlRGF0YSgpOyB9CmZ1bmN0aW9uIHVwZGF0ZUdsb2JhbERIRygpeyBEQVRBLmNvbmZpZy5ocD1wYXJzZUZsb2F0KGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdnbG9iYWwtaHAnKS52YWx1ZSk7IERBVEEuY29uZmlnLmhzYT1wYXJzZUZsb2F0KGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdnbG9iYWwtaHNhJykudmFsdWUpOyBzYXZlRGF0YSgpOyBjYWxjdWxhdGVSZWNhcCgpOyB9CmZ1bmN0aW9uIHNhdmVEYXRhKGEpeyAKICAgIC8vIFNhdXZlZ2FyZGVyIGwnZW50aXTDqSBjb3VyYW50ZSBkYW5zIE1VTFRJX0RBVEEgYXZhbnQgZGUgc2F1dmVnYXJkZXIgdG91dAogICAgaWYgKERBVEEgJiYgY3VycmVudEVudGl0eSkgTVVMVElfREFUQVtjdXJyZW50RW50aXR5XSA9IERBVEE7CiAgICBzYXZlQWxsRGF0YSgpOwogICAgaWYoYSkgYWxlcnQoIuKchSBTYXV2ZWdhcmTDqSIpOwp9CgpmdW5jdGlvbiBzYXZlQWxsRGF0YSgpIHsKICAgIC8vIFNhdXZlZ2FyZGVyIGwnZW50aXTDqSBjb3VyYW50ZSBkYW5zIE1VTFRJX0RBVEEKICAgIGlmIChEQVRBICYmIGN1cnJlbnRFbnRpdHkpIE1VTFRJX0RBVEFbY3VycmVudEVudGl0eV0gPSBEQVRBOwogICAgY29uc3QgdG9TYXZlID0gewogICAgICAgIGVudGl0aWVzOiBNVUxUSV9EQVRBLAogICAgICAgIG5hbWVzOiBFTlRJVFlfTkFNRVMsCiAgICAgICAgY3VycmVudEVudGl0eTogY3VycmVudEVudGl0eSwKICAgICAgICBzaGFyZWRUZWFjaGVyczogU0hBUkVEX1RFQUNIRVJTCiAgICB9OwogICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ0RIR19NdWx0aURhdGFfVjknLCBKU09OLnN0cmluZ2lmeSh0b1NhdmUpKTsKfQoKLyoqCiAqIE1VVFVBTElTQVRJT046IE1pZ3JlIGxlcyBlbnNlaWduYW50cyBzcMOpY2lmaXF1ZXMgw6AgY2hhcXVlIGVudGl0w6kKICogdmVycyBsYSBiYXNlIFNIQVJFRF9URUFDSEVSUyBwYXJ0YWfDqWUgZW50cmUgdG91dGVzIGxlcyBlbnRpdMOpcy4KICogQ2V0dGUgbWlncmF0aW9uIGVzdCBpZGVtcG90ZW50ZSAocGV1dCDDqnRyZSBhcHBlbMOpZSBwbHVzaWV1cnMgZm9pcyBzYW5zIGRvdWJsb24pLgogKi8KZnVuY3Rpb24gbWlncmF0ZVRlYWNoZXJzVG9TaGFyZWQoKSB7CiAgICBsZXQgbWlncmF0ZWQgPSAwOwogICAgWydjb2xsZWdlJywgJ2x5Y2VlJywgJ2x5Y2VlX3BybycsICdwb2xlJ10uZm9yRWFjaChlbnRpdHlLZXkgPT4gewogICAgICAgIGNvbnN0IGQgPSBNVUxUSV9EQVRBW2VudGl0eUtleV07CiAgICAgICAgaWYgKCFkIHx8ICFkLnRlYWNoZXJzIHx8IGQudGVhY2hlcnMubGVuZ3RoID09PSAwIHx8IGQudGVhY2hlcnNNaWdyYXRlZCkgcmV0dXJuOwogICAgICAgIGQudGVhY2hlcnMuZm9yRWFjaCh0ID0+IHsKICAgICAgICAgICAgLy8gQ2hlcmNoZXIgc2kgY2V0IGVuc2VpZ25hbnQgZXhpc3RlIGTDqWrDoCBkYW5zIFNIQVJFRF9URUFDSEVSUyAobcOqbWUgbm9tK2Rpc2NpcGxpbmUpCiAgICAgICAgICAgIGNvbnN0IGV4aXN0aW5nID0gU0hBUkVEX1RFQUNIRVJTLmZpbmQoc3QgPT4gCiAgICAgICAgICAgICAgICBzdC5uYW1lICYmIHQubmFtZSAmJiAKICAgICAgICAgICAgICAgIHN0Lm5hbWUudHJpbSgpLnRvTG93ZXJDYXNlKCkgPT09IHQubmFtZS50cmltKCkudG9Mb3dlckNhc2UoKSAmJiAKICAgICAgICAgICAgICAgIHN0LnN1YmplY3QgPT09IHQuc3ViamVjdAogICAgICAgICAgICApOwogICAgICAgICAgICBpZiAoZXhpc3RpbmcpIHsKICAgICAgICAgICAgICAgIC8vIEFqb3V0ZXIgbGVzIGhldXJlcyBkZSBjZXR0ZSBlbnRpdMOpIMOgIGwnZW5zZWlnbmFudCBleGlzdGFudAogICAgICAgICAgICAgICAgaWYgKCFleGlzdGluZy5zZXJ2aWNlcykgZXhpc3Rpbmcuc2VydmljZXMgPSB7Y29sbGVnZTowLCBseWNlZTowLCBseWNlZV9wcm86MCwgcG9sZTowfTsKICAgICAgICAgICAgICAgIGV4aXN0aW5nLnNlcnZpY2VzW2VudGl0eUtleV0gPSAocGFyc2VGbG9hdChleGlzdGluZy5zZXJ2aWNlc1tlbnRpdHlLZXldKXx8MCkgKyAocGFyc2VGbG9hdCh0Lm9ycyl8fDApOwogICAgICAgICAgICAgICAgaWYgKCFleGlzdGluZy5lbnRpdGllcykgZXhpc3RpbmcuZW50aXRpZXMgPSBbXTsKICAgICAgICAgICAgICAgIGlmICghZXhpc3RpbmcuZW50aXRpZXMuaW5jbHVkZXMoZW50aXR5S2V5KSkgZXhpc3RpbmcuZW50aXRpZXMucHVzaChlbnRpdHlLZXkpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgY29uc3QgbmV3VCA9IHsKICAgICAgICAgICAgICAgICAgICBpZDogJ1RfJyArIERhdGUubm93KCkgKyAnXycgKyBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zbGljZSgyLDYpLAogICAgICAgICAgICAgICAgICAgIG5hbWU6IHQubmFtZSB8fCAnTm91dmVhdScsCiAgICAgICAgICAgICAgICAgICAgc3ViamVjdDogdC5zdWJqZWN0IHx8ICcnLAogICAgICAgICAgICAgICAgICAgIHN0YXR1czogdC5zdGF0dXMgfHwgJ0NlcnRpZmnDqScsCiAgICAgICAgICAgICAgICAgICAgb3JzOiBwYXJzZUZsb2F0KHQub3JzKSB8fCAwLAogICAgICAgICAgICAgICAgICAgIGhzYTogcGFyc2VGbG9hdCh0LmhzYSkgfHwgMCwKICAgICAgICAgICAgICAgICAgICBjc2Q6IHBhcnNlRmxvYXQodC5jc2QpIHx8IDAsCiAgICAgICAgICAgICAgICAgICAgZGVjaGFyZ2U6IHBhcnNlRmxvYXQodC5kZWNoYXJnZSkgfHwgMCwKICAgICAgICAgICAgICAgICAgICBkZWNoX2V4dDogcGFyc2VGbG9hdCh0LmRlY2hfZXh0KSB8fCAwLAogICAgICAgICAgICAgICAgICAgIGJtcDogcGFyc2VGbG9hdCh0LmJtcCkgfHwgMCwKICAgICAgICAgICAgICAgICAgICBzZXJ2aWNlczoge2NvbGxlZ2U6MCwgbHljZWU6MCwgbHljZWVfcHJvOjAsIHBvbGU6MH0sCiAgICAgICAgICAgICAgICAgICAgZW50aXRpZXM6IFtlbnRpdHlLZXldCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgbmV3VC5zZXJ2aWNlc1tlbnRpdHlLZXldID0gcGFyc2VGbG9hdCh0Lm9ycykgfHwgMDsKICAgICAgICAgICAgICAgIFNIQVJFRF9URUFDSEVSUy5wdXNoKG5ld1QpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIG1pZ3JhdGVkKys7CiAgICAgICAgfSk7CiAgICAgICAgLy8gVmlkZXIgbGEgbGlzdGUgbG9jYWxlIGFwcsOocyBtaWdyYXRpb24KICAgICAgICBkLnRlYWNoZXJzID0gW107CiAgICAgICAgZC50ZWFjaGVyc01pZ3JhdGVkID0gdHJ1ZTsKICAgIH0pOwogICAgaWYgKG1pZ3JhdGVkID4gMCkgewogICAgICAgIHNhdmVBbGxEYXRhKCk7CiAgICAgICAgY29uc29sZS5sb2coJ1tESEddIE1pZ3JhdGlvbjogJyArIG1pZ3JhdGVkICsgJyBlbnNlaWduYW50KHMpIG1pZ3LDqXMgdmVycyBsYSBiYXNlIG11dHVhbGlzw6llLicpOwogICAgfQp9CgovKiogT3V2cmUgbGEgZmVuw6p0cmUgcG91ciBnw6lyZXIgbGVzIGhldXJlcyBwYXIgZW50aXTDqSBkJ3VuIGVuc2VpZ25hbnQgbXV0dWFsaXPDqSAqLwpmdW5jdGlvbiBlZGl0VGVhY2hlclNlcnZpY2VzKHNoYXJlZElkeCkgewogICAgY29uc3QgdCA9IFNIQVJFRF9URUFDSEVSU1tzaGFyZWRJZHhdOwogICAgaWYgKCF0KSByZXR1cm47CiAgICBpZiAoIXQuc2VydmljZXMpIHQuc2VydmljZXMgPSB7Y29sbGVnZTowLCBseWNlZTowLCBseWNlZV9wcm86MCwgcG9sZTowfTsKICAgIAogICAgY29uc3QgaEMgPSBwcm9tcHQoCiAgICAgICAgJ+KaoSBBZmZlY3RlciBsZXMgaGV1cmVzIGRlICcgKyB0Lm5hbWUgKyAnIHBhciBlbnRpdMOpOlxuXG4nICsKICAgICAgICAnRW50cmV6IGxlcyBoZXVyZXMgcG91ciAnICsgKEVOVElUWV9OQU1FUy5jb2xsZWdlIHx8ICdDb2xsw6hnZScpICsgJyA6JywKICAgICAgICB0LnNlcnZpY2VzLmNvbGxlZ2UgfHwgMAogICAgKTsKICAgIGlmIChoQyA9PT0gbnVsbCkgcmV0dXJuOwogICAgCiAgICBjb25zdCBoTCA9IHByb21wdCgKICAgICAgICAn4pqhIEFmZmVjdGVyIGxlcyBoZXVyZXMgZGUgJyArIHQubmFtZSArICcgcGFyIGVudGl0w6k6XG5cbicgKwogICAgICAgICdFbnRyZXogbGVzIGhldXJlcyBwb3VyICcgKyAoRU5USVRZX05BTUVTLmx5Y2VlIHx8ICdMeWPDqWUnKSArICcgOicsCiAgICAgICAgdC5zZXJ2aWNlcy5seWNlZSB8fCAwCiAgICApOwogICAgaWYgKGhMID09PSBudWxsKSByZXR1cm47CiAgICAKICAgIGNvbnN0IGhMUCA9IHByb21wdCgKICAgICAgICAn4pqhIEFmZmVjdGVyIGxlcyBoZXVyZXMgZGUgJyArIHQubmFtZSArICcgcGFyIGVudGl0w6k6XG5cbicgKwogICAgICAgICdFbnRyZXogbGVzIGhldXJlcyBwb3VyICcgKyAoRU5USVRZX05BTUVTLmx5Y2VlX3BybyB8fCAnTHljw6llIFBybycpICsgJyA6JywKICAgICAgICB0LnNlcnZpY2VzLmx5Y2VlX3BybyB8fCAwCiAgICApOwogICAgaWYgKGhMUCA9PT0gbnVsbCkgcmV0dXJuOwogICAgCiAgICBjb25zdCBoUCA9IHByb21wdCgKICAgICAgICAn4pqhIEFmZmVjdGVyIGxlcyBoZXVyZXMgZGUgJyArIHQubmFtZSArICcgcGFyIGVudGl0w6k6XG5cbicgKwogICAgICAgICdFbnRyZXogbGVzIGhldXJlcyBwb3VyICcgKyAoRU5USVRZX05BTUVTLnBvbGUgfHwgJ1DDtGxlIFN1cMOpcmlldXInKSArICcgOicsCiAgICAgICAgdC5zZXJ2aWNlcy5wb2xlIHx8IDAKICAgICk7CiAgICBpZiAoaFAgPT09IG51bGwpIHJldHVybjsKICAgIAogICAgdC5zZXJ2aWNlcy5jb2xsZWdlICAgPSBwYXJzZUZsb2F0KGhDKSAgfHwgMDsKICAgIHQuc2VydmljZXMubHljZWUgICAgID0gcGFyc2VGbG9hdChoTCkgIHx8IDA7CiAgICB0LnNlcnZpY2VzLmx5Y2VlX3BybyA9IHBhcnNlRmxvYXQoaExQKSB8fCAwOwogICAgdC5zZXJ2aWNlcy5wb2xlICAgICAgPSBwYXJzZUZsb2F0KGhQKSAgfHwgMDsKICAgIAogICAgLy8gTWV0dHJlIMOgIGpvdXIgbCdPUlMgdG90YWwgc2kgbGEgc29tbWUgZMOpcGFzc2UgbCdPUlMgYWN0dWVsCiAgICBjb25zdCB0b3RhbEggPSB0LnNlcnZpY2VzLmNvbGxlZ2UgKyB0LnNlcnZpY2VzLmx5Y2VlICsgKHQuc2VydmljZXMubHljZWVfcHJvfHwwKSArIHQuc2VydmljZXMucG9sZTsKICAgIGlmICh0b3RhbEggPiB0Lm9ycykgewogICAgICAgIGlmIChjb25maXJtKCdMZSB0b3RhbCBkZXMgaGV1cmVzICgnICsgdG90YWxIICsgJ2gpIGTDqXBhc3NlIGxcJ09SUyAoJyArIHQub3JzICsgJ2gpLlxuVm91bGV6LXZvdXMgbWV0dHJlIMOgIGpvdXIgbFwnT1JTIMOgICcgKyB0b3RhbEggKyAnaCA/JykpIHsKICAgICAgICAgICAgdC5vcnMgPSB0b3RhbEg7CiAgICAgICAgfQogICAgfQogICAgCiAgICAvLyBNZXR0cmUgw6Agam91ciBsZXMgZW50aXTDqXMgYXNzb2Npw6llcwogICAgdC5lbnRpdGllcyA9IFsnY29sbGVnZScsJ2x5Y2VlJywnbHljZWVfcHJvJywncG9sZSddLmZpbHRlcihrID0+ICh0LnNlcnZpY2VzW2tdfHwwKSA+IDApOwogICAgCiAgICBzYXZlQWxsRGF0YSgpOwogICAgcmVuZGVyUkgoKTsKICAgIGNhbGN1bGF0ZVJlY2FwKCk7Cn0KCi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KLy8gQklMQU4gQ09OU09MSUTDiSDigJMgY2FsY3VsIHBvdXIgbGVzIDMgZW50aXTDqXMKLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQoKLyoqIENhbGN1bGUgbGEgY29uc29tbWF0aW9uIGQnaGV1cmVzIGQndW5lIGVudGl0w6kgKGJlc29pbi9hcHBvcnQpICovCmZ1bmN0aW9uIGNhbGNFbnRpdHlTdGF0cyhlbnRpdHlEYXRhLCBlbnRpdHlLZXkpIHsKICAgIGlmICghZW50aXR5RGF0YSkgcmV0dXJuIHsgYmVzb2luOiAwLCBhcHBvcnQ6IDAsIGhwOiAwLCBoc2E6IDAsIHNvbGRlOiAwLCB0b3RhbDogMCB9OwogICAgbGV0IGJlc29pbiA9IDAsIGFwcG9ydCA9IDAsIGhwID0gMCwgaHNhID0gMDsKICAgIAogICAgLy8gQmVzb2luIGRlcHVpcyBsYSBzdHJ1Y3R1cmUgKG1hdGnDqHJlcyBob3JzIEVEUykKICAgIGlmIChlbnRpdHlEYXRhLnN0cnVjdHVyZSAmJiBlbnRpdHlEYXRhLmxldmVsQ29uZmlnKSB7CiAgICAgICAgZW50aXR5RGF0YS5zdHJ1Y3R1cmUuZm9yRWFjaChsdmwgPT4gewogICAgICAgICAgICBjb25zdCBsYyA9IGVudGl0eURhdGEubGV2ZWxDb25maWdbbHZsLmxldmVsXSB8fCB7fTsKICAgICAgICAgICAgY29uc3QgbkRpdiA9IGx2bC5kaXYgfHwgMDsKICAgICAgICAgICAgZW50aXR5RGF0YS5zdWJqZWN0cyAmJiBlbnRpdHlEYXRhLnN1YmplY3RzLmZvckVhY2gocyA9PiB7CiAgICAgICAgICAgICAgICBjb25zdCBtZXRhID0gZW50aXR5RGF0YS5zdWJqZWN0TWV0YT8uW3NdIHx8IHt9OwogICAgICAgICAgICAgICAgaWYgKG1ldGEuaXNFZHMpIHJldHVybjsgLy8gRURTIGNvbXB0w6llcyBzw6lwYXLDqW1lbnQgY2ktZGVzc291cwogICAgICAgICAgICAgICAgY29uc3QgY2ZnID0gbGNbc10gfHwgeyBiYXNlOiAwLCBkZW1pOiAwLCBtYXJnZTogMCwgY29lZjogMSB9OwogICAgICAgICAgICAgICAgaWYgKG1ldGEubW9kZSAhPT0gJ2V0YWInKSB7CiAgICAgICAgICAgICAgICAgICAgYmVzb2luICs9IGdldEVmZmVjdGl2ZUJhc2UoY2ZnKSAqIG5EaXY7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgIH0pOwogICAgfQogICAgCiAgICAvLyBCZXNvaW4gRURTIDogZ3JvdXBlcyDDlyBoL2dyb3VwZSDDlyBjb2VmCiAgICBpZiAoZW50aXR5RGF0YS5lZHMpIHsKICAgICAgICBbJ3ByZW1pZXJlJywgJ3Rlcm1pbmFsZSddLmZvckVhY2gobHZsID0+IHsKICAgICAgICAgICAgKGVudGl0eURhdGEuZWRzW2x2bF0gfHwgW10pLmZvckVhY2goZSA9PiB7CiAgICAgICAgICAgICAgICBjb25zdCBjb2VmID0gcGFyc2VGbG9hdChlLmNvZWYpIHx8IDEuMDsKICAgICAgICAgICAgICAgIGJlc29pbiArPSAoZS5ncm91cHMgfHwgMCkgKiAoZS5oUGVyR3JvdXAgfHwgKGx2bCA9PT0gJ3ByZW1pZXJlJyA/IDQgOiA2KSkgKiBjb2VmOwogICAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgIH0KICAgIAogICAgLy8gQXBwb3J0IGRlcHVpcyBsZXMgcHJvZnMgbG9jYXV4IChjb21wYXRpYmlsaXTDqSBkb25uw6llcyBhbmNpZW5uZXMpCiAgICBpZiAoZW50aXR5RGF0YS50ZWFjaGVycykgewogICAgICAgIGVudGl0eURhdGEudGVhY2hlcnMuZm9yRWFjaCh0ID0+IHsKICAgICAgICAgICAgY29uc3Qgb3JzID0gcGFyc2VGbG9hdCh0Lm9ycykgfHwgMDsKICAgICAgICAgICAgY29uc3QgaHBWYWwgPSBwYXJzZUZsb2F0KHQuaHApIHx8IG9yczsKICAgICAgICAgICAgY29uc3QgaHNhVmFsID0gcGFyc2VGbG9hdCh0LmhzYSkgfHwgMDsKICAgICAgICAgICAgYXBwb3J0ICs9IG9yczsKICAgICAgICAgICAgaHAgKz0gaHBWYWw7CiAgICAgICAgICAgIGhzYSArPSBoc2FWYWw7CiAgICAgICAgfSk7CiAgICB9CiAgICAKICAgIC8vIE1VVFVBTElTQVRJT046IEFwcG9ydCBkZXB1aXMgU0hBUkVEX1RFQUNIRVJTIHBvdXIgY2V0dGUgZW50aXTDqQogICAgaWYgKGVudGl0eUtleSkgewogICAgICAgIFNIQVJFRF9URUFDSEVSUy5mb3JFYWNoKHQgPT4gewogICAgICAgICAgICBpZiAoIXQuZW50aXRpZXMgfHwgIXQuZW50aXRpZXMuaW5jbHVkZXMoZW50aXR5S2V5KSkgcmV0dXJuOwogICAgICAgICAgICBjb25zdCBoID0gcGFyc2VGbG9hdCh0LnNlcnZpY2VzPy5bZW50aXR5S2V5XSkgfHwgcGFyc2VGbG9hdCh0Lm9ycykgfHwgMDsKICAgICAgICAgICAgaWYgKGggPiAwKSB7CiAgICAgICAgICAgICAgICBhcHBvcnQgKz0gaDsKICAgICAgICAgICAgICAgIGhwICs9IGg7CiAgICAgICAgICAgICAgICBoc2EgKz0gcGFyc2VGbG9hdCh0LmhzYSkgfHwgMDsKICAgICAgICAgICAgfQogICAgICAgIH0pOwoKICAgICAgICAvLyBBcHBvcnQgRURTIDogaGV1cmVzIGRlcyBlbnNlaWduYW50cyBhc3NpZ27DqXMgZGFucyBTcMOpY2lhbGl0w6lzICYgRURTCiAgICAgICAgaWYgKGVudGl0eURhdGEuZWRzKSB7CiAgICAgICAgICAgIFsncHJlbWllcmUnLCAndGVybWluYWxlJ10uZm9yRWFjaChsdmwgPT4gewogICAgICAgICAgICAgICAgKGVudGl0eURhdGEuZWRzW2x2bF0gfHwgW10pLmZvckVhY2goZWRzID0+IHsKICAgICAgICAgICAgICAgICAgICBpZiAoIWVkcy50ZWFjaGVycykgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IGhQRyA9IChwYXJzZUZsb2F0KGVkcy5oUGVyR3JvdXApIHx8IChsdmwgPT09ICdwcmVtaWVyZScgPyA0IDogNikpICogKHBhcnNlRmxvYXQoZWRzLmNvZWYpIHx8IDEuMCk7CiAgICAgICAgICAgICAgICAgICAgZWRzLnRlYWNoZXJzLmZvckVhY2godGlkID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0aWQpIHJldHVybjsKICAgICAgICAgICAgICAgICAgICAgICAgYXBwb3J0ICs9IGhQRzsKICAgICAgICAgICAgICAgICAgICAgICAgaHAgKz0gaFBHOwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0KICAgIH0KICAgIAogICAgY29uc3QgdG90YWwgPSBlbnRpdHlEYXRhLmNvbmZpZz8udG90YWwgfHwgMDsKICAgIHJldHVybiB7IGJlc29pbiwgYXBwb3J0LCBocCwgaHNhLCBzb2xkZTogYXBwb3J0IC0gYmVzb2luLCB0b3RhbCB9Owp9CgovKiogQ2FsY3VsZSBsZSBiZXNvaW4gcGFyIGRpc2NpcGxpbmUgcG91ciB1bmUgZW50aXTDqSAqLwpmdW5jdGlvbiBjYWxjRW50aXR5U3ViamVjdE5lZWRzKGVudGl0eURhdGEsIGVudGl0eUtleSkgewogICAgY29uc3QgcmVzdWx0ID0ge307CiAgICBpZiAoIWVudGl0eURhdGEgfHwgIWVudGl0eURhdGEuc3RydWN0dXJlKSByZXR1cm4gcmVzdWx0OwogICAgCiAgICBlbnRpdHlEYXRhLnN1YmplY3RzPy5mb3JFYWNoKHMgPT4gewogICAgICAgIGxldCBuZWVkID0gMCwgYXBwID0gMDsKICAgICAgICBjb25zdCBtZXRhID0gZW50aXR5RGF0YS5zdWJqZWN0TWV0YT8uW3NdIHx8IHt9OwogICAgICAgIAogICAgICAgIGlmIChtZXRhLmlzRWRzKSB7CiAgICAgICAgICAgIC8vIExlcyBFRFMgOiBsZSBiZXNvaW4gdmllbnQgZGlyZWN0ZW1lbnQgZGVzIGRvbm7DqWVzIERBVEEuZWRzIChncm91cGVzIMOXIGgvZ3JvdXBlIMOXIGNvZWYpCiAgICAgICAgICAgIGlmIChlbnRpdHlEYXRhLmVkcykgewogICAgICAgICAgICAgICAgWydwcmVtaWVyZScsICd0ZXJtaW5hbGUnXS5mb3JFYWNoKGx2bCA9PiB7CiAgICAgICAgICAgICAgICAgICAgKGVudGl0eURhdGEuZWRzW2x2bF0gfHwgW10pLmZvckVhY2goZSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlLm5hbWUgPT09IHMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvZWYgPSBwYXJzZUZsb2F0KGUuY29lZikgfHwgMS4wOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgbmVlZCArPSAoZS5ncm91cHMgfHwgMCkgKiAoZS5oUGVyR3JvdXAgfHwgKGx2bCA9PT0gJ3ByZW1pZXJlJyA/IDQgOiA2KSkgKiBjb2VmOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgIH0gZWxzZSBpZiAobWV0YS5tb2RlID09PSAnZXRhYicpIHsKICAgICAgICAgICAgbmVlZCA9IHBhcnNlRmxvYXQobWV0YS5ldGFiKSB8fCAwOwogICAgICAgIH0gZWxzZSBpZiAobWV0YS5tb2RlID09PSAnbGV2ZWwnKSB7CiAgICAgICAgICAgIC8vIEZvcmZhaXQgcGFyIG5pdmVhdSA6IHNvbW1lIGRlcyB2b2x1bWVzIGNvbmZpZ3Vyw6lzCiAgICAgICAgICAgIGVudGl0eURhdGEuc3RydWN0dXJlLmZvckVhY2gobHZsID0+IHsKICAgICAgICAgICAgICAgIGNvbnN0IHZhbCA9IG1ldGEudm9sTGV2ZWwgPyBwYXJzZUZsb2F0KG1ldGEudm9sTGV2ZWxbbHZsLmxldmVsXSB8fCAwKSA6IDA7CiAgICAgICAgICAgICAgICBuZWVkICs9IHZhbDsKICAgICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgLy8gTW9kZSBkaXZpc2lvbiAocGFyIGTDqWZhdXQpIDogKGJhc2UgKyBtYXJnZSkgw5cgY29lZiDDlyBuYl9kaXZpc2lvbnMKICAgICAgICAgICAgZW50aXR5RGF0YS5zdHJ1Y3R1cmUuZm9yRWFjaChsdmwgPT4gewogICAgICAgICAgICAgICAgaWYgKG1ldGEubGV2ZWxzICYmICFtZXRhLmxldmVscy5pbmNsdWRlcyhsdmwubGV2ZWwpKSByZXR1cm47CiAgICAgICAgICAgICAgICBjb25zdCBsYyA9IGVudGl0eURhdGEubGV2ZWxDb25maWc/LltsdmwubGV2ZWxdPy5bc10gfHwgeyBiYXNlOiAwLCBkZW1pOiAwLCBtYXJnZTogMCwgY29lZjogMS4wIH07CiAgICAgICAgICAgICAgICBjb25zdCBjb2VmID0gcGFyc2VGbG9hdChsYy5jb2VmKSB8fCAxLjA7CiAgICAgICAgICAgICAgICBjb25zdCBob3VycyA9IGdldEVmZmVjdGl2ZUJhc2UobGMpICsgKHBhcnNlRmxvYXQobGMubWFyZ2UpIHx8IDApOwogICAgICAgICAgICAgICAgLy8gVsOpcmlmaWVyIGxlcyBvdmVycmlkZXMgZGUgY2xhc3NlCiAgICAgICAgICAgICAgICBjb25zdCBwcmVmaXggPSAobHZsLmxldmVsIHx8ICcnKS5yZXBsYWNlKC9bXjAtOV0vZywgJycpIHx8IChsdmwubGV2ZWwgfHwgJycpLmNoYXJBdCgwKTsKICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgKGx2bC5kaXYgfHwgMCk7IGkrKykgewogICAgICAgICAgICAgICAgICAgIGNvbnN0IGNJZCA9IGAke3ByZWZpeH0ke1N0cmluZy5mcm9tQ2hhckNvZGUoNjUgKyBpKX1gOwogICAgICAgICAgICAgICAgICAgIGlmIChlbnRpdHlEYXRhLmNsYXNzT3ZlcnJpZGVzPy5bY0lkXT8uW3NdKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG92ID0gZW50aXR5RGF0YS5jbGFzc092ZXJyaWRlc1tjSWRdW3NdOwogICAgICAgICAgICAgICAgICAgICAgICBuZWVkICs9IChnZXRFZmZlY3RpdmVCYXNlKG92KSArIChwYXJzZUZsb2F0KG92Lm1hcmdlKSB8fCAwKSkgKiBjb2VmOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIG5lZWQgKz0gaG91cnMgKiBjb2VmOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICAgIAogICAgICAgIC8vIEFwcG9ydCBlbnNlaWduYW50cyBsb2NhdXggKGFuY2llbm5lIHN0cnVjdHVyZSkKICAgICAgICBlbnRpdHlEYXRhLnRlYWNoZXJzPy5mb3JFYWNoKHQgPT4gewogICAgICAgICAgICBpZiAodC5zdWJqZWN0ID09PSBzKSBhcHAgKz0gcGFyc2VGbG9hdCh0Lm9ycykgfHwgMDsKICAgICAgICB9KTsKCiAgICAgICAgLy8gQXBwb3J0IGRlcHVpcyBTSEFSRURfVEVBQ0hFUlMgcG91ciBjZXR0ZSBlbnRpdMOpIGV0IGNldHRlIG1hdGnDqHJlCiAgICAgICAgaWYgKGVudGl0eUtleSAmJiAhbWV0YS5pc0VkcykgewogICAgICAgICAgICBTSEFSRURfVEVBQ0hFUlMuZm9yRWFjaCh0ID0+IHsKICAgICAgICAgICAgICAgIGlmICh0LnN1YmplY3QgIT09IHMpIHJldHVybjsKICAgICAgICAgICAgICAgIGlmICghdC5lbnRpdGllcyB8fCAhdC5lbnRpdGllcy5pbmNsdWRlcyhlbnRpdHlLZXkpKSByZXR1cm47CiAgICAgICAgICAgICAgICAvLyBDYWxjdWxlciBsZXMgaGV1cmVzIGRlIGNlIHByb2YgcG91ciBjZXR0ZSBtYXRpw6hyZSBkYW5zIGNldHRlIGVudGl0w6kKICAgICAgICAgICAgICAgIGNvbnN0IGQgPSBlbnRpdHlEYXRhOyAvLyBtw6ptZSByw6lmw6lyZW5jZQogICAgICAgICAgICAgICAgY29uc3QgYXNzaWdubWVudHMgPSBkLmFzc2lnbm1lbnRzIHx8IHt9OwogICAgICAgICAgICAgICAgY29uc3Qgc3RydWN0dXJlID0gZC5zdHJ1Y3R1cmUgfHwgW107CiAgICAgICAgICAgICAgICBjb25zdCBzdWJqZWN0TWV0YSA9IGQuc3ViamVjdE1ldGEgfHwge307CiAgICAgICAgICAgICAgICBjb25zdCBsZXZlbENvbmZpZyA9IGQubGV2ZWxDb25maWcgfHwge307CiAgICAgICAgICAgICAgICBjb25zdCBjbGFzc092ZXJyaWRlcyA9IGQuY2xhc3NPdmVycmlkZXMgfHwge307CiAgICAgICAgICAgICAgICBjb25zdCBzaGFyZWRJZHggPSBTSEFSRURfVEVBQ0hFUlMuaW5kZXhPZih0KTsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgZnVuY3Rpb24gZ2V0THZsUHJlZml4KG5hbWUpIHsgcmV0dXJuIG5hbWUucmVwbGFjZSgvW14wLTldL2csICcnKSB8fCBuYW1lLmNoYXJBdCgwKTsgfQogICAgICAgICAgICAgICAgZnVuY3Rpb24gZ2V0SG91cnNMb2NhbChjSWQsIGxldmVsTmFtZSwgc3ViamVjdCkgewogICAgICAgICAgICAgICAgICAgIGNvbnN0IG0gPSBzdWJqZWN0TWV0YVtzdWJqZWN0XTsKICAgICAgICAgICAgICAgICAgICBpZiAoIW0gfHwgbS5tb2RlID09PSAnZXRhYicpIHJldHVybiAwOwogICAgICAgICAgICAgICAgICAgIGlmIChtLm1vZGUgPT09ICdsZXZlbCcpIHJldHVybiAobS52b2xMZXZlbCAmJiBtLnZvbExldmVsW2xldmVsTmFtZV0pIHx8IDA7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgY2ZnID0gKGNsYXNzT3ZlcnJpZGVzW2NJZF0gJiYgY2xhc3NPdmVycmlkZXNbY0lkXVtzdWJqZWN0XSkKICAgICAgICAgICAgICAgICAgICAgICAgPyBjbGFzc092ZXJyaWRlc1tjSWRdW3N1YmplY3RdCiAgICAgICAgICAgICAgICAgICAgICAgIDogKGxldmVsQ29uZmlnW2xldmVsTmFtZV0gPyBsZXZlbENvbmZpZ1tsZXZlbE5hbWVdW3N1YmplY3RdIDogbnVsbCk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNmZyA/IChnZXRFZmZlY3RpdmVCYXNlKGNmZykgKyAoY2ZnLm1hcmdlIHx8IDApKSAqIChjZmcuY29lZiB8fCAxKSA6IDA7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgbGV0IHRlYWNoZXJIb3VycyA9IDA7CiAgICAgICAgICAgICAgICBsZXQgbGV2ZWxzUGFpZCA9IG5ldyBTZXQoKTsKICAgICAgICAgICAgICAgIGNvbnN0IHJlbGV2YW50S2V5cyA9IE9iamVjdC5rZXlzKGFzc2lnbm1lbnRzKQogICAgICAgICAgICAgICAgICAgIC5maWx0ZXIoa2V5ID0+IHBhcnNlSW50KGtleS5zcGxpdCgnXycpWzFdKSA9PT0gc2hhcmVkSWR4KQogICAgICAgICAgICAgICAgICAgIC5zb3J0KChhLCBiKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGlkQSA9IGEuc3BsaXQoJ18nKVswXSwgaWRCID0gYi5zcGxpdCgnXycpWzBdOwogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpc0x2bEEgPSBzdHJ1Y3R1cmUuc29tZShsID0+IGwubGV2ZWwgPT09IGlkQSkgfHwgaWRBID09PSAnRVRBQic7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGlzTHZsQiA9IHN0cnVjdHVyZS5zb21lKGwgPT4gbC5sZXZlbCA9PT0gaWRCKSB8fCBpZEIgPT09ICdFVEFCJzsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGlzTHZsQiAtIGlzTHZsQTsKICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICByZWxldmFudEtleXMuZm9yRWFjaChrZXkgPT4gewogICAgICAgICAgICAgICAgICAgIGNvbnN0IGFzc2lnbiA9IGFzc2lnbm1lbnRzW2tleV07CiAgICAgICAgICAgICAgICAgICAgY29uc3QgcGFydHMgPSBrZXkuc3BsaXQoJ18nKTsKICAgICAgICAgICAgICAgICAgICBjb25zdCBlbnRpdHlJZCA9IHBhcnRzLnNsaWNlKDAsIHBhcnRzLmxlbmd0aCAtIDEpLmpvaW4oJ18nKTsKICAgICAgICAgICAgICAgICAgICBjb25zdCBzdHJ1Y3RMdmxFeGFjdCA9IHN0cnVjdHVyZS5maW5kKGwgPT4gbC5sZXZlbCA9PT0gZW50aXR5SWQpOwogICAgICAgICAgICAgICAgICAgIGxldCBwYXJlbnRMZXZlbE5hbWUgPSBudWxsOwogICAgICAgICAgICAgICAgICAgIGlmIChzdHJ1Y3RMdmxFeGFjdCkgewogICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnRMZXZlbE5hbWUgPSBzdHJ1Y3RMdmxFeGFjdC5sZXZlbDsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBmb3VuZCA9IHN0cnVjdHVyZS5maW5kKGwgPT4gZW50aXR5SWQuc3RhcnRzV2l0aChnZXRMdmxQcmVmaXgobC5sZXZlbCkpKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZvdW5kKSBwYXJlbnRMZXZlbE5hbWUgPSBmb3VuZC5sZXZlbDsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgbGV0IGggPSAoYXNzaWduLnF1b3RhICE9PSB1bmRlZmluZWQgJiYgYXNzaWduLnF1b3RhICE9PSBudWxsKSA/IHBhcnNlRmxvYXQoYXNzaWduLnF1b3RhKSA6IDA7CiAgICAgICAgICAgICAgICAgICAgaWYgKGggPT09IDAgJiYgcGFyZW50TGV2ZWxOYW1lKSBoID0gZ2V0SG91cnNMb2NhbChlbnRpdHlJZCwgcGFyZW50TGV2ZWxOYW1lLCBzKTsKICAgICAgICAgICAgICAgICAgICBpZiAoaCA+IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc21ldGEgPSBzdWJqZWN0TWV0YVtzXTsKICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGVmZmVjdGl2ZSA9IGg7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzbWV0YSAmJiBzbWV0YS5tb2RlID09PSAnbGV2ZWwnICYmIHBhcmVudExldmVsTmFtZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGxldmVsc1BhaWQuaGFzKHBhcmVudExldmVsTmFtZSkpIHsgZWZmZWN0aXZlID0gMDsgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7IGxldmVsc1BhaWQuYWRkKHBhcmVudExldmVsTmFtZSk7IH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB0ZWFjaGVySG91cnMgKz0gZWZmZWN0aXZlOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgIC8vIEZhbGxiYWNrIHNpIHBhcyBkJ2Fzc2lnbm1lbnRzIDogdXRpbGlzZXIgdC5zZXJ2aWNlcwogICAgICAgICAgICAgICAgaWYgKHRlYWNoZXJIb3VycyA9PT0gMCkgewogICAgICAgICAgICAgICAgICAgIHRlYWNoZXJIb3VycyA9IHBhcnNlRmxvYXQodC5zZXJ2aWNlcz8uW2VudGl0eUtleV0pIHx8IDA7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBhcHAgKz0gdGVhY2hlckhvdXJzOwogICAgICAgICAgICB9KTsKICAgICAgICB9CgogICAgICAgIC8vIEFwcG9ydCBFRFMgOiBoZXVyZXMgYXNzaWduw6llcyBhdXggZW5zZWlnbmFudHMgcG91ciBjZXR0ZSBzcMOpY2lhbGl0w6kKICAgICAgICBpZiAobWV0YS5pc0VkcyAmJiBlbnRpdHlEYXRhLmVkcykgewogICAgICAgICAgICBbJ3ByZW1pZXJlJywgJ3Rlcm1pbmFsZSddLmZvckVhY2gobHZsID0+IHsKICAgICAgICAgICAgICAgIChlbnRpdHlEYXRhLmVkc1tsdmxdIHx8IFtdKS5mb3JFYWNoKGUgPT4gewogICAgICAgICAgICAgICAgICAgIGlmIChlLm5hbWUgPT09IHMgJiYgZS50ZWFjaGVycykgewogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBoUEcgPSAoZS5oUGVyR3JvdXAgfHwgKGx2bCA9PT0gJ3ByZW1pZXJlJyA/IDQgOiA2KSkgKiAocGFyc2VGbG9hdChlLmNvZWYpIHx8IDEuMCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGUudGVhY2hlcnMuZm9yRWFjaCh0aWQgPT4geyBpZiAodGlkKSBhcHAgKz0gaFBHOyB9KTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICAgIAogICAgICAgIHJlc3VsdFtzXSA9IHsgbmVlZCwgYXBwLCBwbmVDb2RlOiBtZXRhLnBuZUNvZGUgfHwgbWV0YS5jb2RlIHx8ICcnLCBsYWJlbDogcyB9OwogICAgfSk7CiAgICByZXR1cm4gcmVzdWx0Owp9CgovLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ci8vIENBVEFMT0dVRSBERSBNQVRJw4hSRVMgUE5FCi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KCmZ1bmN0aW9uIG9wZW5TdWJqZWN0Q2F0YWxvZygpIHsKICAgIHZhciBvdmVybGF5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N1YmplY3QtY2F0YWxvZy1vdmVybGF5Jyk7CiAgICBvdmVybGF5LnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7CiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2F0YWxvZy1zZWFyY2gnKS52YWx1ZSA9ICcnOwogICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NhdGFsb2ctYnVyZWF1LWZpbHRlcicpLnZhbHVlID0gJyc7CiAgICByZW5kZXJDYXRhbG9nKCk7Cn0KCmZ1bmN0aW9uIGZpbHRlckNhdGFsb2coKSB7IHJlbmRlckNhdGFsb2coKTsgfQoKZnVuY3Rpb24gcmVuZGVyQ2F0YWxvZygpIHsKICAgIHZhciBzZWFyY2ggPSAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NhdGFsb2ctc2VhcmNoJykudmFsdWUgfHwgJycpLnRvTG93ZXJDYXNlKCk7CiAgICB2YXIgYnVyZWF1RmlsdGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NhdGFsb2ctYnVyZWF1LWZpbHRlcicpLnZhbHVlOwogICAgdmFyIGV4aXN0aW5nID0gbmV3IFNldChEQVRBLnN1YmplY3RzLm1hcChmdW5jdGlvbihzKSB7IHJldHVybiBzLnRvTG93ZXJDYXNlKCk7IH0pKTsKICAgIHZhciBodG1sID0gJyc7CiAgICAKICAgIE9iamVjdC5lbnRyaWVzKFBORV9CVVJFQVVYKS5mb3JFYWNoKGZ1bmN0aW9uKGVudHJ5KSB7CiAgICAgICAgdmFyIGJ1cmVhdUlkID0gZW50cnlbMF0sIGJ1cmVhdSA9IGVudHJ5WzFdOwogICAgICAgIGlmIChidXJlYXVGaWx0ZXIgJiYgYnVyZWF1RmlsdGVyICE9PSBidXJlYXVJZCkgcmV0dXJuOwogICAgICAgIHZhciBpdGVtc0h0bWwgPSAnJzsKICAgICAgICBPYmplY3QuZW50cmllcyhidXJlYXUuZGlzY2lwbGluZXMpLmZvckVhY2goZnVuY3Rpb24oZGUpIHsKICAgICAgICAgICAgdmFyIGNvZGUgPSBkZVswXSwgbGFiZWwgPSBkZVsxXTsKICAgICAgICAgICAgaWYgKHNlYXJjaCAmJiAhbGFiZWwudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhzZWFyY2gpICYmICFjb2RlLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoc2VhcmNoKSkgcmV0dXJuOwogICAgICAgICAgICB2YXIgYWxyZWFkeUluID0gZXhpc3RpbmcuaGFzKGxhYmVsLnRvTG93ZXJDYXNlKCkpOwogICAgICAgICAgICB2YXIgc2FmZUxhYmVsID0gbGFiZWwucmVwbGFjZSgvXFwvZywnXFxcXCcpLnJlcGxhY2UoLycvZywiXFwnIik7CiAgICAgICAgICAgIGl0ZW1zSHRtbCArPSAnPGRpdiBzdHlsZT0iZGlzcGxheTppbmxpbmUtZmxleDthbGlnbi1pdGVtczpjZW50ZXI7Z2FwOjVweDttYXJnaW46M3B4O3BhZGRpbmc6NnB4IDEwcHg7Ym9yZGVyLXJhZGl1czoyMHB4O2N1cnNvcjonICsgKGFscmVhZHlJbj8nZGVmYXVsdCc6J3BvaW50ZXInKSArICc7YmFja2dyb3VuZDonICsgKGFscmVhZHlJbj8nI2YwZjBmMCc6YnVyZWF1LmNvbG9yKycyMCcpICsgJztib3JkZXI6MXB4IHNvbGlkICcgKyAoYWxyZWFkeUluPycjZGRkJzpidXJlYXUuY29sb3IpICsgJztjb2xvcjonICsgKGFscmVhZHlJbj8nI2FhYSc6JyMzMzMnKSArICc7Zm9udC1zaXplOjAuODJyZW07IiAnICsKICAgICAgICAgICAgICAgIChhbHJlYWR5SW4gPyAnJyA6ICdvbmNsaWNrPSJhZGRTdWJqZWN0RnJvbUNhdGFsb2coXCcnK3NhZmVMYWJlbCsnXCcsXCcnK2NvZGUrJ1wnKSInKSArCiAgICAgICAgICAgICAgICAnPjxzcGFuIHN0eWxlPSJmb250LWZhbWlseTptb25vc3BhY2U7Zm9udC1zaXplOjAuNzJyZW07YmFja2dyb3VuZDonICsgKGFscmVhZHlJbj8nI2UwZTBlMCc6YnVyZWF1LmNvbG9yKyc0MCcpICsgJztwYWRkaW5nOjFweCA0cHg7Ym9yZGVyLXJhZGl1czozcHg7Ij4nICsgY29kZSArICc8L3NwYW4+ICcgKyBsYWJlbCArIChhbHJlYWR5SW4gPyAnIOKckycgOiAnIOKelScpICsgJzwvZGl2Pic7CiAgICAgICAgfSk7CiAgICAgICAgaWYgKGl0ZW1zSHRtbCkgewogICAgICAgICAgICBodG1sICs9ICc8ZGl2IHN0eWxlPSJtYXJnaW4tYm90dG9tOjEycHg7Ij48ZGl2IHN0eWxlPSJmb250LXNpemU6MC43NXJlbTtmb250LXdlaWdodDo3MDA7Y29sb3I6JyArIGJ1cmVhdS5jb2xvciArICc7dGV4dC10cmFuc2Zvcm06dXBwZXJjYXNlO2xldHRlci1zcGFjaW5nOjAuNXB4O21hcmdpbi1ib3R0b206NnB4O3BhZGRpbmctYm90dG9tOjRweDtib3JkZXItYm90dG9tOjJweCBzb2xpZCAnICsgYnVyZWF1LmNvbG9yICsgJzsiPicgKyBidXJlYXUubGFiZWwgKyAnPC9kaXY+JyArIGl0ZW1zSHRtbCArICc8L2Rpdj4nOwogICAgICAgIH0KICAgIH0pOwogICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NhdGFsb2ctbGlzdCcpLmlubmVySFRNTCA9IGh0bWwgfHwgJzxwIHN0eWxlPSJjb2xvcjojYWFhO3RleHQtYWxpZ246Y2VudGVyO3BhZGRpbmc6MjBweDsiPkF1Y3VuZSBkaXNjaXBsaW5lIHRyb3V2w6llLjwvcD4nOwp9CgpmdW5jdGlvbiBhZGRTdWJqZWN0RnJvbUNhdGFsb2cobGFiZWwsIHBuZUNvZGUpIHsKICAgIGlmICghREFUQS5zdWJqZWN0cy5pbmNsdWRlcyhsYWJlbCkpIHsKICAgICAgICBEQVRBLnN1YmplY3RzLnB1c2gobGFiZWwpOwogICAgICAgIERBVEEuc3ViamVjdE1ldGFbbGFiZWxdID0geyBtb2RlOiAnZGl2JywgbGV2ZWxzOiBnZXREZWZhdWx0QWN0aXZlTGV2ZWxzKGxhYmVsKSwgZXRhYjogMCwgdm9sTGV2ZWw6IHt9LCBwYXJlbnQ6ICcnLCBjb2RlOiAnJywgcG5lQ29kZTogcG5lQ29kZSB9OwogICAgICAgIERBVEEuc3RydWN0dXJlLmZvckVhY2goZnVuY3Rpb24obCkgeyBEQVRBLmxldmVsQ29uZmlnW2wubGV2ZWxdW2xhYmVsXSA9IHsgYmFzZTogMCwgZGVtaTogMCwgbWFyZ2U6IDAsIGNvZWY6IDEuMCB9OyB9KTsKICAgICAgICBzYXZlRGF0YSgpOwogICAgICAgIHJlbmRlckdyaWRTeXN0ZW0oKTsKICAgICAgICByZW5kZXJSSCgpOwogICAgICAgIHJlbmRlclN1YmplY3RzQ29uZmlnKCk7CiAgICB9CiAgICByZW5kZXJDYXRhbG9nKCk7Cn0KCi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KLy8gQ09QSUUgREUgTUFUScOIUkVTIEVOVFJFIEVOVElUw4lTCi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KCmZ1bmN0aW9uIG9wZW5Db3B5U3ViamVjdHNNb2RhbCgpIHsKICAgIHZhciBvdmVybGF5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvcHktc3ViamVjdHMtb3ZlcmxheScpOwogICAgb3ZlcmxheS5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnOwogICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvcHktZnJvbS1sYWJlbCcpLnRleHRDb250ZW50ID0gRU5USVRZX05BTUVTW2N1cnJlbnRFbnRpdHldIHx8IGN1cnJlbnRFbnRpdHk7CiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29weS1jb2xsZWdlLWxibCcpLnRleHRDb250ZW50ID0gRU5USVRZX05BTUVTLmNvbGxlZ2U7CiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29weS1seWNlZS1sYmwnKS50ZXh0Q29udGVudCA9IEVOVElUWV9OQU1FUy5seWNlZTsKICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb3B5LXBvbGUtbGJsJykudGV4dENvbnRlbnQgPSBFTlRJVFlfTkFNRVMucG9sZTsKICAgIFsnY29sbGVnZScsJ2x5Y2VlJywnbHljZWVfcHJvJywncG9sZSddLmZvckVhY2goZnVuY3Rpb24oaykgewogICAgICAgIHZhciBlbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb3B5LXRvLScgKyBrKTsKICAgICAgICB2YXIgb3B0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvcHktdG8tJyArIGsgKyAnLW9wdCcpOwogICAgICAgIGVsLmNoZWNrZWQgPSBmYWxzZTsKICAgICAgICBpZiAoayA9PT0gY3VycmVudEVudGl0eSkgewogICAgICAgICAgICBlbC5kaXNhYmxlZCA9IHRydWU7CiAgICAgICAgICAgIG9wdC5zdHlsZS5vcGFjaXR5ID0gJzAuNCc7CiAgICAgICAgICAgIG9wdC5zdHlsZS5jdXJzb3IgPSAnbm90LWFsbG93ZWQnOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGVsLmRpc2FibGVkID0gZmFsc2U7CiAgICAgICAgICAgIG9wdC5zdHlsZS5vcGFjaXR5ID0gJzEnOwogICAgICAgICAgICBvcHQuc3R5bGUuY3Vyc29yID0gJ3BvaW50ZXInOwogICAgICAgIH0KICAgIH0pOwp9CgpmdW5jdGlvbiBleGVjdXRlQ29weVN1YmplY3RzKCkgewogICAgdmFyIHRhcmdldHMgPSBbJ2NvbGxlZ2UnLCdseWNlZScsJ2x5Y2VlX3BybycsJ3BvbGUnXS5maWx0ZXIoZnVuY3Rpb24oaykgewogICAgICAgIHJldHVybiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29weS10by0nICsgaykuY2hlY2tlZCAmJiAhZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvcHktdG8tJyArIGspLmRpc2FibGVkOwogICAgfSk7CiAgICBpZiAoIXRhcmdldHMubGVuZ3RoKSB7IGFsZXJ0KCdTw6lsZWN0aW9ubmV6IGF1IG1vaW5zIHVuZSBlbnRpdMOpIGNpYmxlLicpOyByZXR1cm47IH0KICAgIE1VTFRJX0RBVEFbY3VycmVudEVudGl0eV0gPSBEQVRBOwogICAgdmFyIGFkZGVkID0gMDsKICAgIHRhcmdldHMuZm9yRWFjaChmdW5jdGlvbih0YXJnZXRLZXkpIHsKICAgICAgICB2YXIgdGFyZ2V0ID0gTVVMVElfREFUQVt0YXJnZXRLZXldOwogICAgICAgIGlmICghdGFyZ2V0KSByZXR1cm47CiAgICAgICAgREFUQS5zdWJqZWN0cy5mb3JFYWNoKGZ1bmN0aW9uKHMpIHsKICAgICAgICAgICAgaWYgKCF0YXJnZXQuc3ViamVjdHMuaW5jbHVkZXMocykpIHsKICAgICAgICAgICAgICAgIHRhcmdldC5zdWJqZWN0cy5wdXNoKHMpOwogICAgICAgICAgICAgICAgdGFyZ2V0LnN1YmplY3RNZXRhW3NdID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShEQVRBLnN1YmplY3RNZXRhW3NdIHx8IHsgbW9kZTogJ2RpdicsIGxldmVsczogW10sIGV0YWI6IDAsIHZvbExldmVsOiB7fSwgcGFyZW50OiAnJywgY29kZTogJycgfSkpOwogICAgICAgICAgICAgICAgdGFyZ2V0LnN0cnVjdHVyZS5mb3JFYWNoKGZ1bmN0aW9uKGwpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoIXRhcmdldC5sZXZlbENvbmZpZ1tsLmxldmVsXSkgdGFyZ2V0LmxldmVsQ29uZmlnW2wubGV2ZWxdID0ge307CiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0LmxldmVsQ29uZmlnW2wubGV2ZWxdW3NdID0geyBiYXNlOiAwLCBkZW1pOiAwLCBtYXJnZTogMCwgY29lZjogMS4wIH07CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIGFkZGVkKys7CiAgICAgICAgICAgIH0KICAgICAgICB9KTsKICAgIH0pOwogICAgc2F2ZUFsbERhdGEoKTsKICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb3B5LXN1YmplY3RzLW92ZXJsYXknKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOwogICAgYWxlcnQoJ+KchSAnICsgYWRkZWQgKyAnIG1hdGnDqHJlKHMpIGNvcGnDqWUocykgdmVycyAnICsgdGFyZ2V0cy5tYXAoZnVuY3Rpb24oaykgeyByZXR1cm4gRU5USVRZX05BTUVTW2tdOyB9KS5qb2luKCcsICcpICsgJy4nKTsKfQoKLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQovLyBCSUxBTiBFTlJJQ0hJIOKAkyBUQUJMRUFVIEVOU0VJR05BTlRTIMOXIEVOVElUw4lTCi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KCi8qKgogKiBDYWxjdWxlIGxlcyBoZXVyZXMgcsOpZWxsZXMgYWZmZWN0w6llcyDDoCB1biBlbnNlaWduYW50IGRhbnMgbGEgdmVudGlsYXRpb24gZCd1bmUgZW50aXTDqS4KICogVXRpbGlzZSBNVUxUSV9EQVRBW2VudGl0eUtleV0uYXNzaWdubWVudHMgKGxhIHZyYWllIGdyaWxsZSBkZSB2ZW50aWxhdGlvbikuCiAqIENvcnJlc3BvbmQgYXUgbcOqbWUgY2FsY3VsIHF1ZSByZW5kZXJSZXBhcnRpdGlvblByb2ZzIC8gcmVuZGVyUmVwYXJ0aXRpb25NYXRpZXJlcy4KICogQHBhcmFtIHtudW1iZXJ9IHNoYXJlZElkeCAg4oCTIGluZGV4IGRlIGwnZW5zZWlnbmFudCBkYW5zIFNIQVJFRF9URUFDSEVSUwogKiBAcGFyYW0ge3N0cmluZ30gZW50aXR5S2V5ICDigJMgJ2NvbGxlZ2UnIHwgJ2x5Y2VlJyB8ICdwb2xlJwogKiBAcmV0dXJucyB7bnVtYmVyfSBoZXVyZXMgZWZmZWN0aXZlcyAoYXZlYyBkw6ljaGFyZ2VzLCBzYW5zIGRvdWJsb25zIGRlIG1vZGUgJ2xldmVsJykKICovCi8qKiBSZXRvdXJuZSBsZXMgaGV1cmVzIGJydXRlcyAoZGV2YW50IMOpbMOodmVzLCBzYW5zIHBvbmTDqXJhdGlvbikgZCd1biBlbnNlaWduYW50IGRhbnMgdW5lIGVudGl0w6kgKi8KLyoqCiAqIFJldG91cm5lIHtyYXcsIHBvbmQsIHdlaWdodGVkfSBwb3VyIHVuIGVuc2VpZ25hbnQgZGFucyB1bmUgZW50aXTDqS4KICogcmF3ICAgICA9IGhldXJlcyBkZXZhbnQgw6lsw6h2ZXMgKGJhc2Ugc2FucyBwb25kw6lyYXRpb24pCiAqIHBvbmQgICAgPSBoZXVyZXMgZGUgcG9uZMOpcmF0aW9uIChjb2VmIGFwcGxpcXXDqSAtIGJhc2UpCiAqIHdlaWdodGVkPSByYXcgKyBwb25kICh0b3RhbCBjb21wdGFiaWxpc8OpKQogKiBMZXMgZMOpY2hhcmdlcyBzb250IGNvbXB0w6llcyBkYW5zIHJhdyAocGFzIGRlIHBvbmTDqXJhdGlvbiBzdXIgZMOpY2hhcmdlcykuCiAqLwpmdW5jdGlvbiBjYWxjVGVhY2hlckhvdXJzQnJlYWtkb3duKHNoYXJlZElkeCwgZW50aXR5S2V5KSB7CiAgICBjb25zdCBkID0gTVVMVElfREFUQVtlbnRpdHlLZXldOwogICAgaWYgKCFkIHx8ICFkLmFzc2lnbm1lbnRzKSByZXR1cm4ge3JhdzowLCBwb25kOjAsIHdlaWdodGVkOjB9OwogICAgY29uc3QgdCA9IFNIQVJFRF9URUFDSEVSU1tzaGFyZWRJZHhdOwogICAgaWYgKCF0KSByZXR1cm4ge3JhdzowLCBwb25kOjAsIHdlaWdodGVkOjB9OwoKICAgIC8vIFNpIGxhIGRpc2NpcGxpbmUgZHUgcHJvZiBlc3QgdW5lICJzdXItbWF0acOocmUiIChtb2RlPWdyb3VwKSwKICAgIC8vIG9uIGN1bXVsZSBsZSBicmVha2Rvd24gZGUgdG91dGVzIGxlcyBkaXNjaXBsaW5lcyBlbmZhbnRzCiAgICBjb25zdCBfc21ldGEgPSBkLnN1YmplY3RNZXRhIHx8IHt9OwogICAgY29uc3QgX2VudGl0eVN1YmplY3QgPSAodC5zdWJqZWN0cyAmJiB0LnN1YmplY3RzW2VudGl0eUtleV0pID8gdC5zdWJqZWN0c1tlbnRpdHlLZXldIDogKHQuc3ViamVjdCB8fCAnJyk7CiAgICBpZiAoX2VudGl0eVN1YmplY3QgJiYgX3NtZXRhW19lbnRpdHlTdWJqZWN0XT8ubW9kZSA9PT0gJ2dyb3VwJykgewogICAgICAgIC8vIENoZXJjaGVyIGxlcyBjbMOpcyBkJ2FmZmVjdGF0aW9uIHBhciBzb3VzLW1hdGnDqHJlIChmb3JtYXQ6IGNJZF90SWR4fmNoaWxkU3ViKQogICAgICAgIGNvbnN0IGNoaWxkcmVuID0gKGQuc3ViamVjdHMgfHwgW10pLmZpbHRlcihzID0+IF9zbWV0YVtzXT8ucGFyZW50ID09PSBfZW50aXR5U3ViamVjdCk7CiAgICAgICAgbGV0IHJhd1N1bSA9IDAsIHBvbmRTdW0gPSAwOwogICAgICAgIGxldCBwb25kQ2FwcGVkID0gZmFsc2UsIHBvbmRFeGNlZWRzT1JTID0gZmFsc2U7CiAgICAgICAgY2hpbGRyZW4uZm9yRWFjaChjaGlsZFN1YmplY3QgPT4gewogICAgICAgICAgICAvLyBFeHRyYWlyZSBVTklRVUVNRU5UIGxlcyBjbMOpcyB+Y2hpbGRTdWIgZGUgY2UgcHJvZiwgY29udmVydGllcyBlbiBjbMOpcyBzdGFuZGFyZAogICAgICAgICAgICBjb25zdCBjaGlsZEFzc2lnbm1lbnRzID0ge307CiAgICAgICAgICAgIE9iamVjdC5lbnRyaWVzKGQuYXNzaWdubWVudHMgfHwge30pLmZvckVhY2goKFtrLCB2XSkgPT4gewogICAgICAgICAgICAgICAgaWYgKGsuZW5kc1dpdGgoJ34nICsgY2hpbGRTdWJqZWN0KSkgewogICAgICAgICAgICAgICAgICAgIGNoaWxkQXNzaWdubWVudHNbay5zcGxpdCgnficpWzBdXSA9IHY7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBpZiAoT2JqZWN0LmtleXMoY2hpbGRBc3NpZ25tZW50cykubGVuZ3RoID09PSAwKSByZXR1cm47IC8vIHBhcyBkJ2FmZmVjdGF0aW9uIHBvdXIgY2V0dGUgc291cy1tYXQKCiAgICAgICAgICAgIGNvbnN0IHRDbG9uZSA9IHsuLi50LCBzdWJqZWN0OiBjaGlsZFN1YmplY3QsIHN1YmplY3RzOiB7Li4uKHQuc3ViamVjdHN8fHt9KSwgW2VudGl0eUtleV06IGNoaWxkU3ViamVjdH19OwogICAgICAgICAgICBjb25zdCBiYWNrdXAgPSBTSEFSRURfVEVBQ0hFUlNbc2hhcmVkSWR4XTsKICAgICAgICAgICAgU0hBUkVEX1RFQUNIRVJTW3NoYXJlZElkeF0gPSB0Q2xvbmU7CiAgICAgICAgICAgIGNvbnN0IGJhY2t1cEFzc2lnbiA9IGQuYXNzaWdubWVudHM7CiAgICAgICAgICAgIC8vIElNUE9SVEFOVCA6IHV0aWxpc2VyIFVOSVFVRU1FTlQgY2hpbGRBc3NpZ25tZW50cywgcGFzIGZ1c2lvbm7DqSBhdmVjIGQuYXNzaWdubWVudHMKICAgICAgICAgICAgLy8gU2lub24gbGUgcHJvZiBjdW11bGUgbGVzIGhldXJlcyBkZSB0b3V0ZXMgbGVzIHNvdXMtbWF0acOocmVzCiAgICAgICAgICAgIGQuYXNzaWdubWVudHMgPSBjaGlsZEFzc2lnbm1lbnRzOwogICAgICAgICAgICBjb25zdCBiZCA9IGNhbGNUZWFjaGVySG91cnNCcmVha2Rvd24oc2hhcmVkSWR4LCBlbnRpdHlLZXkpOwogICAgICAgICAgICBkLmFzc2lnbm1lbnRzID0gYmFja3VwQXNzaWduOwogICAgICAgICAgICBTSEFSRURfVEVBQ0hFUlNbc2hhcmVkSWR4XSA9IGJhY2t1cDsKICAgICAgICAgICAgcmF3U3VtICArPSBiZC5yYXc7CiAgICAgICAgICAgIHBvbmRTdW0gKz0gYmQucG9uZDsKICAgICAgICAgICAgaWYgKGJkLnBvbmRDYXBwZWQpICAgICBwb25kQ2FwcGVkICAgICA9IHRydWU7CiAgICAgICAgICAgIGlmIChiZC5wb25kRXhjZWVkc09SUykgcG9uZEV4Y2VlZHNPUlMgPSB0cnVlOwogICAgICAgIH0pOwogICAgICAgIGlmIChlbnRpdHlLZXkgPT09ICdseWNlZScgJiYgcG9uZFN1bSA+IDEuMCkgeyBwb25kU3VtID0gMS4wOyBwb25kQ2FwcGVkID0gdHJ1ZTsgfQogICAgICAgIGNvbnN0IHdlaWdodGVkID0gTWF0aC5yb3VuZCgocmF3U3VtICsgcG9uZFN1bSkgKiAxMCkgLyAxMDsKICAgICAgICByZXR1cm4geyByYXc6IE1hdGgucm91bmQocmF3U3VtKjEwKS8xMCwgcG9uZDogTWF0aC5yb3VuZChwb25kU3VtKjEwKS8xMCwgd2VpZ2h0ZWQsIHBvbmRDYXBwZWQsIHBvbmRFeGNlZWRzT1JTIH07CiAgICB9CgogICAgY29uc3QgYXNzaWdubWVudHMgICAgPSBkLmFzc2lnbm1lbnRzOwogICAgY29uc3Qgc3RydWN0dXJlICAgICAgPSBkLnN0cnVjdHVyZSAgICAgIHx8IFtdOwogICAgY29uc3Qgc3ViamVjdE1ldGEgICAgPSBkLnN1YmplY3RNZXRhICAgIHx8IHt9OwogICAgY29uc3QgbGV2ZWxDb25maWcgICAgPSBkLmxldmVsQ29uZmlnICAgIHx8IHt9OwogICAgY29uc3QgY2xhc3NPdmVycmlkZXMgPSBkLmNsYXNzT3ZlcnJpZGVzIHx8IHt9OwoKICAgIGZ1bmN0aW9uIGdldEx2bFByZWZpeChuYW1lKSB7IHJldHVybiBuYW1lLnJlcGxhY2UoL1teMC05XS9nLCcnKSB8fCBuYW1lLmNoYXJBdCgwKTsgfQoKICAgIC8vIFJldG91cm5lIGxlIGNvZWYgZGUgcG9uZMOpcmF0aW9uIHBvdXIgdW4gbml2ZWF1IGRvbm7DqSAoaW5kw6lwZW5kYW50IGRlIGxhIG1hdGnDqHJlKQogICAgLy8gTGUgY29lZiBlc3QgY29uZmlndXLDqSBwYXIgbml2ZWF1IGRhbnMgbGEgZ3JpbGxlIOKAlCBvbiBwcmVuZCBsZSBjb2VmIG3DqWRpYW4gZGVzIG1hdGnDqHJlcyBkdSBuaXZlYXUKICAgIC8vIHBvdXIgw6l2aXRlciB0b3V0ZSBkw6lwZW5kYW5jZSDDoCB0LnN1YmplY3QgKHF1aSBwZXV0IG5lIHBhcyBjb3JyZXNwb25kcmUgw6AgY2UgcXVlIGxlIHByb2YgZW5zZWlnbmUgaWNpKQogICAgZnVuY3Rpb24gZ2V0Q29lZkZvckxldmVsKGxldmVsTmFtZSkgewogICAgICAgIGNvbnN0IGxjID0gbGV2ZWxDb25maWdbbGV2ZWxOYW1lXTsKICAgICAgICBpZiAoIWxjKSByZXR1cm4gMTsKICAgICAgICAvLyBQcmVuZHJlIGxlIHByZW1pZXIgY29lZiBub24tbnVsbCBkZSBjZSBuaXZlYXUgKHRvdXMgbGVzIGNvZWZzIHNvbnQgaWRlbnRpcXVlcyBwYXIgbml2ZWF1KQogICAgICAgIGNvbnN0IGNvZWZzID0gT2JqZWN0LnZhbHVlcyhsYykubWFwKGMgPT4gcGFyc2VGbG9hdChjLmNvZWYpIHx8IDEpLmZpbHRlcihjID0+IGMgPiAwKTsKICAgICAgICBpZiAoIWNvZWZzLmxlbmd0aCkgcmV0dXJuIDE7CiAgICAgICAgLy8gUmV0b3VybmVyIGxlIGNvZWYgbGUgcGx1cyBmcsOpcXVlbnQgKG91IGxlIG1heCBzaSB0b3VzIGRpZmbDqXJlbnRzKQogICAgICAgIHJldHVybiBjb2Vmcy5zb3J0KChhLGIpID0+IGItYSlbMF07CiAgICB9CgogICAgLy8gUmV0b3VybmUge2Jhc2UsIGNvZWZ9IHBvdXIgdW5lIGNsYXNzZS9tYXRpw6hyZQogICAgLy8gQ2hlcmNoZSBkYW5zIFRPVVRFUyBsZXMgbWF0acOocmVzIGNvbmZpZ3Vyw6llcyBwb3VyIHRyb3V2ZXIgY2VsbGUgcXVpIGNvcnJlc3BvbmQgYXUgcXVvdGEKICAgIGZ1bmN0aW9uIGdldEJhc2VBbmRDb2VmRm9yQXNzaWduKGNJZCwgbGV2ZWxOYW1lLCBxdW90YSkgewogICAgICAgIGNvbnN0IGxjID0gbGV2ZWxDb25maWdbbGV2ZWxOYW1lXTsKICAgICAgICBpZiAoIWxjKSByZXR1cm4ge2Jhc2U6IHF1b3RhIHx8IDAsIGNvZWY6IGdldENvZWZGb3JMZXZlbChsZXZlbE5hbWUpfTsKCiAgICAgICAgLy8gRCdhYm9yZCBlc3NheWVyIGF2ZWMgbGEgZGlzY2lwbGluZSBzcMOpY2lmaXF1ZSDDoCBsJ2VudGl0w6ksIHB1aXMgdC5zdWJqZWN0IGdsb2JhbAogICAgICAgIGNvbnN0IGVudGl0eVN1YmplY3QgPSBnZXRUZWFjaGVyU3ViamVjdEZvckVudGl0eSh0LCBlbnRpdHlLZXkpOwogICAgICAgIGNvbnN0IHRyeVN1YmplY3RzID0gZW50aXR5U3ViamVjdAogICAgICAgICAgICA/IFtlbnRpdHlTdWJqZWN0LCAuLi4odC5zdWJqZWN0ICYmIHQuc3ViamVjdCAhPT0gZW50aXR5U3ViamVjdCA/IFt0LnN1YmplY3RdIDogW10pLCAuLi5PYmplY3Qua2V5cyhsYykuZmlsdGVyKHMgPT4gcyAhPT0gZW50aXR5U3ViamVjdCAmJiBzICE9PSB0LnN1YmplY3QpXQogICAgICAgICAgICA6IE9iamVjdC5rZXlzKGxjKTsKCiAgICAgICAgZm9yIChjb25zdCBzIG9mIHRyeVN1YmplY3RzKSB7CiAgICAgICAgICAgIGNvbnN0IG1ldGEgPSBzdWJqZWN0TWV0YVtzXTsKICAgICAgICAgICAgaWYgKCFtZXRhIHx8IG1ldGEubW9kZSA9PT0gJ2V0YWInKSBjb250aW51ZTsKCiAgICAgICAgICAgIGxldCBiYXNlID0gMCwgY29lZiA9IDE7CiAgICAgICAgICAgIGlmIChtZXRhLm1vZGUgPT09ICdsZXZlbCcpIHsKICAgICAgICAgICAgICAgIGJhc2UgPSAobWV0YS52b2xMZXZlbCAmJiBtZXRhLnZvbExldmVsW2xldmVsTmFtZV0pIHx8IDA7CiAgICAgICAgICAgICAgICBjb2VmID0gMTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGNvbnN0IGNmZyA9IChjbGFzc092ZXJyaWRlc1tjSWRdICYmIGNsYXNzT3ZlcnJpZGVzW2NJZF1bc10pCiAgICAgICAgICAgICAgICAgICAgPyBjbGFzc092ZXJyaWRlc1tjSWRdW3NdCiAgICAgICAgICAgICAgICAgICAgOiAobGNbc10gfHwgbnVsbCk7CiAgICAgICAgICAgICAgICBpZiAoIWNmZykgY29udGludWU7CiAgICAgICAgICAgICAgICBiYXNlID0gZ2V0RWZmZWN0aXZlQmFzZShjZmcpICsgKGNmZy5tYXJnZSB8fCAwKTsKICAgICAgICAgICAgICAgIGNvZWYgPSBwYXJzZUZsb2F0KGNmZy5jb2VmKSB8fCAxOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAoYmFzZSA8PSAwKSBjb250aW51ZTsKCiAgICAgICAgICAgIC8vIFNpIHF1b3RhIGNvcnJlc3BvbmQgw6AgYmFzZSpjb2VmIChwb25kw6lyw6kpIG91IMOgIGJhc2UgKGJydXQpIOKGkiBib25uZSBtYXRpw6hyZSB0cm91dsOpZQogICAgICAgICAgICBpZiAocXVvdGEgIT09IG51bGwgJiYgcXVvdGEgIT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICAgICAgY29uc3QgcXYgPSBwYXJzZUZsb2F0KHF1b3RhKTsKICAgICAgICAgICAgICAgIGlmIChNYXRoLmFicyhxdiAtIGJhc2UgKiBjb2VmKSA8IDAuMDUgfHwgTWF0aC5hYnMocXYgLSBiYXNlKSA8IDAuMDUpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4ge2Jhc2UsIGNvZWZ9OwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgcmV0dXJuIHtiYXNlLCBjb2VmfTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgLy8gRmFsbGJhY2sgOiBvbiBuZSBzYWl0IHBhcyBxdWVsbGUgbWF0acOocmUsIG1haXMgb24gY29ubmHDrnQgbGUgY29lZiBkdSBuaXZlYXUKICAgICAgICByZXR1cm4ge2Jhc2U6IHF1b3RhID8gcGFyc2VGbG9hdChxdW90YSkgOiAwLCBjb2VmOiBnZXRDb2VmRm9yTGV2ZWwobGV2ZWxOYW1lKX07CiAgICB9CgogICAgbGV0IHJhdyA9IDAsIHBvbmQgPSAwOwogICAgbGV0IGxldmVsc1BhaWQgPSBuZXcgU2V0KCk7CgogICAgY29uc3QgcmVsZXZhbnRLZXlzID0gT2JqZWN0LmtleXMoYXNzaWdubWVudHMpLmZpbHRlcihrZXkgPT4gcGFyc2VJbnQoa2V5LnNwbGl0KCdfJylbMV0pID09PSBzaGFyZWRJZHgpOwogICAgY29uc3Qgc29ydGVkS2V5cyA9IHJlbGV2YW50S2V5cy5zb3J0KChhLGIpID0+IHsKICAgICAgICBjb25zdCBpc0x2bEEgPSBzdHJ1Y3R1cmUuc29tZShsPT5sLmxldmVsPT09YS5zcGxpdCgnXycpWzBdKSB8fCBhLnNwbGl0KCdfJylbMF09PT0nRVRBQic7CiAgICAgICAgY29uc3QgaXNMdmxCID0gc3RydWN0dXJlLnNvbWUobD0+bC5sZXZlbD09PWIuc3BsaXQoJ18nKVswXSkgfHwgYi5zcGxpdCgnXycpWzBdPT09J0VUQUInOwogICAgICAgIHJldHVybiBpc0x2bEIgLSBpc0x2bEE7CiAgICB9KTsKCiAgICBzb3J0ZWRLZXlzLmZvckVhY2goa2V5ID0+IHsKICAgICAgICBjb25zdCBhc3NpZ24gICA9IGFzc2lnbm1lbnRzW2tleV07CiAgICAgICAgY29uc3QgZW50aXR5SWQgPSBrZXkuc3BsaXQoJ18nKS5zbGljZSgwLC0xKS5qb2luKCdfJyk7CgogICAgICAgIGxldCBwYXJlbnRMZXZlbE5hbWUgPSBudWxsOwogICAgICAgIGNvbnN0IGx2bEV4YWN0ID0gc3RydWN0dXJlLmZpbmQobCA9PiBsLmxldmVsID09PSBlbnRpdHlJZCk7CiAgICAgICAgaWYgKGx2bEV4YWN0KSB7IHBhcmVudExldmVsTmFtZSA9IGx2bEV4YWN0LmxldmVsOyB9CiAgICAgICAgZWxzZSB7CiAgICAgICAgICAgIGNvbnN0IGx2bFByZWZpeCA9IHN0cnVjdHVyZS5maW5kKGwgPT4gZW50aXR5SWQuc3RhcnRzV2l0aChnZXRMdmxQcmVmaXgobC5sZXZlbCkpKTsKICAgICAgICAgICAgaWYgKGx2bFByZWZpeCkgcGFyZW50TGV2ZWxOYW1lID0gbHZsUHJlZml4LmxldmVsOwogICAgICAgIH0KCiAgICAgICAgaWYgKCFwYXJlbnRMZXZlbE5hbWUpIHJldHVybjsKCiAgICAgICAgY29uc3QgcXVvdGEgPSAoYXNzaWduLnF1b3RhICE9PSB1bmRlZmluZWQgJiYgYXNzaWduLnF1b3RhICE9PSBudWxsKSA/IHBhcnNlRmxvYXQoYXNzaWduLnF1b3RhKSA6IG51bGw7CiAgICAgICAgY29uc3Qge2Jhc2UsIGNvZWZ9ID0gZ2V0QmFzZUFuZENvZWZGb3JBc3NpZ24oZW50aXR5SWQsIHBhcmVudExldmVsTmFtZSwgcXVvdGEpOwoKICAgICAgICBsZXQgaFdlaWdodGVkLCBoQmFzZTsKICAgICAgICBpZiAocXVvdGEgIT09IG51bGwgJiYgcXVvdGEgPiAwKSB7CiAgICAgICAgICAgIC8vIExlIHF1b3RhIHBldXQgw6p0cmUgc2Fpc2kgZW4gaGV1cmVzIGJydXRlcyBPVSBwb25kw6lyw6llcyBzZWxvbiBsZSBjb250ZXh0ZQogICAgICAgICAgICAvLyBPbiBjb25zaWTDqHJlIHF1ZSBsZSBxdW90YSA9IGhldXJlcyBwb25kw6lyw6llcyBhZmZpY2jDqWVzIGRhbnMgbGEgZ3JpbGxlCiAgICAgICAgICAgIGhXZWlnaHRlZCA9IHF1b3RhOwogICAgICAgICAgICBoQmFzZSA9IGNvZWYgPiAxID8gTWF0aC5yb3VuZCgocXVvdGEgLyBjb2VmKSAqIDEwKSAvIDEwIDogcXVvdGE7CiAgICAgICAgfSBlbHNlIGlmIChiYXNlID4gMCkgewogICAgICAgICAgICBoQmFzZSAgICAgPSBiYXNlOwogICAgICAgICAgICBoV2VpZ2h0ZWQgPSBNYXRoLnJvdW5kKGJhc2UgKiBjb2VmICogMTApIC8gMTA7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgLy8gRMOpZG91Ymxvbm5hZ2UgbW9kZSAnbGV2ZWwnCiAgICAgICAgY29uc3QgbWV0YSA9IHN1YmplY3RNZXRhW3Quc3ViamVjdF07CiAgICAgICAgaWYgKG1ldGEgJiYgbWV0YS5tb2RlID09PSAnbGV2ZWwnICYmIHBhcmVudExldmVsTmFtZSkgewogICAgICAgICAgICBpZiAobGV2ZWxzUGFpZC5oYXMocGFyZW50TGV2ZWxOYW1lKSkgcmV0dXJuOwogICAgICAgICAgICBsZXZlbHNQYWlkLmFkZChwYXJlbnRMZXZlbE5hbWUpOwogICAgICAgIH0KCiAgICAgICAgcmF3ICArPSBoQmFzZTsKICAgICAgICBwb25kICs9IGhXZWlnaHRlZCAtIGhCYXNlOwogICAgfSk7CgogICAgLy8gRMOpY2hhcmdlcyA6IHJhdyB1bmlxdWVtZW50CiAgICByYXcgKz0gKHBhcnNlRmxvYXQodC5kZWNoYXJnZXx8MCkgKyBwYXJzZUZsb2F0KHQuZGVjaF9leHR8fDApKTsKCiAgICAvLyBFRFMKICAgIGlmIChkLmVkcykgewogICAgICAgIFsncHJlbWllcmUnLCd0ZXJtaW5hbGUnXS5mb3JFYWNoKGx2bCA9PiB7CiAgICAgICAgICAgIChkLmVkc1tsdmxdfHxbXSkuZm9yRWFjaChlZHMgPT4gewogICAgICAgICAgICAgICAgaWYgKCFlZHMudGVhY2hlcnMpIHJldHVybjsKICAgICAgICAgICAgICAgIGNvbnN0IGNvZWZFZHMgPSBwYXJzZUZsb2F0KGVkcy5jb2VmKSB8fCAxLjA7CiAgICAgICAgICAgICAgICBjb25zdCBoUEcgICAgID0gcGFyc2VGbG9hdChlZHMuaFBlckdyb3VwKSB8fCAobHZsPT09J3ByZW1pZXJlJyA/IDQgOiA2KTsKICAgICAgICAgICAgICAgIGVkcy50ZWFjaGVycy5mb3JFYWNoKHRpZCA9PiB7CiAgICAgICAgICAgICAgICAgICAgaWYgKHRpZCA9PT0gdC5pZCkgewogICAgICAgICAgICAgICAgICAgICAgICByYXcgICs9IGhQRzsKICAgICAgICAgICAgICAgICAgICAgICAgcG9uZCArPSBoUEcgKiAoY29lZkVkcyAtIDEpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgIH0KCiAgICAvLyDilIDilIAgUsOIR0xFUyBNw4lUSUVSIERFIFBMQUZPTk5FTUVOVCDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIAKICAgIC8vIEx5Y8OpZSBHVCA6IHBvbmTDqXJhdGlvbiB0b3RhbGUgcGxhZm9ubsOpZSDDoCAxaCByw6lnbGVtZW50YWlyZQogICAgbGV0IHBvbmRDYXBwZWQgPSBmYWxzZTsKICAgIGlmIChlbnRpdHlLZXkgPT09ICdseWNlZScpIHsKICAgICAgICBpZiAocG9uZCA+IDEuMCkgewogICAgICAgICAgICBwb25kICAgICAgPSAxLjA7CiAgICAgICAgICAgIHBvbmRDYXBwZWQgPSB0cnVlOyAgLy8gc2lnbmFsIHBvdXIgbCdhZmZpY2hhZ2UKICAgICAgICB9CiAgICB9CgogICAgLy8gUMO0bGUvQlRTIDogcG9uZMOpcmF0aW9uIGxpbWl0w6llIGF1eCBoZXVyZXMg4omkIE9SUyBkdSBwcm9mCiAgICAvLyBMZXMgaGV1cmVzIGF1LWRlbMOgIGRlIGwnT1JTIChIU0EpIG5lIHNvbnQgcGFzIHBvbmTDqXLDqWVzCiAgICBsZXQgcG9uZEV4Y2VlZHNPUlMgPSBmYWxzZTsKICAgIGlmIChlbnRpdHlLZXkgPT09ICdwb2xlJykgewogICAgICAgIGNvbnN0IG9ycyAgICAgID0gcGFyc2VGbG9hdCh0Lm9ycykgfHwgMTg7CiAgICAgICAgY29uc3QgcmF3VG90YWwgPSByYXc7ICAgLy8gaGV1cmVzIGRldmFudCDDqWzDqHZlcyBhdmFudCBwbGFmb25kCiAgICAgICAgaWYgKHJhd1RvdGFsID4gb3JzKSB7CiAgICAgICAgICAgIHBvbmRFeGNlZWRzT1JTID0gdHJ1ZTsgIC8vIHNpZ25hbCA6IHByb2YgZMOpcGFzc2UgbCdPUlMg4oaSIHBvbmTDqXJhdGlvbiB2aXJ0dWVsbGUgZW4gZ3JhcwogICAgICAgICAgICAvLyBTZXVsZXMgbGVzIGhldXJlcyDiiaQgT1JTIGRvbm5lbnQgZHJvaXQgw6AgcG9uZMOpcmF0aW9uCiAgICAgICAgICAgIC8vIHBvbmQgZXN0IGTDqWrDoCBjYWxjdWzDqSBzdXIgcmF3IOKAlCBvbiBsZSBwbGFmb25uZSBwcm9wb3J0aW9ubmVsbGVtZW50CiAgICAgICAgICAgIGNvbnN0IHJhdGlvT1JTID0gTWF0aC5tYXgoMCwgTWF0aC5taW4oMSwgb3JzIC8gcmF3VG90YWwpKTsKICAgICAgICAgICAgcG9uZCA9IE1hdGgucm91bmQocG9uZCAqIHJhdGlvT1JTICogMTApIC8gMTA7CiAgICAgICAgfQogICAgfQoKICAgIGNvbnN0IHdlaWdodGVkID0gTWF0aC5yb3VuZCgocmF3ICsgcG9uZCkgKiAxMCkgLyAxMDsKICAgIHJldHVybiB7CiAgICAgICAgcmF3OiAgICAgICBNYXRoLnJvdW5kKHJhdyAgKiAxMCkgLyAxMCwKICAgICAgICBwb25kOiAgICAgIE1hdGgucm91bmQocG9uZCAqIDEwKSAvIDEwLAogICAgICAgIHdlaWdodGVkLAogICAgICAgIHBvbmRDYXBwZWQsICAgICAgIC8vIHRydWUgc2kgcG9uZMOpcmF0aW9uIHBsYWZvbm7DqWUgw6AgMWggKGx5Y8OpZSBHVCkKICAgICAgICBwb25kRXhjZWVkc09SUyAgICAvLyB0cnVlIHNpIHByb2YgQlRTL3DDtGxlIGTDqXBhc3NlIHNvbiBPUlMKICAgIH07Cn0KCi8qKiBDb21wYXRpYmlsaXTDqSA6IHJldG91cm5lIHVuaXF1ZW1lbnQgbGUgdG90YWwgcG9uZMOpcsOpICovCmZ1bmN0aW9uIGNhbGNUZWFjaGVyUmF3SG91cnNGcm9tRW50aXR5VmVudGlsYXRpb24oc2hhcmVkSWR4LCBlbnRpdHlLZXkpIHsKICAgIHJldHVybiBjYWxjVGVhY2hlckhvdXJzQnJlYWtkb3duKHNoYXJlZElkeCwgZW50aXR5S2V5KS5yYXc7Cn0KCmZ1bmN0aW9uIGNhbGNUZWFjaGVySG91cnNGcm9tRW50aXR5VmVudGlsYXRpb24oc2hhcmVkSWR4LCBlbnRpdHlLZXkpIHsKICAgIHJldHVybiBjYWxjVGVhY2hlckhvdXJzQnJlYWtkb3duKHNoYXJlZElkeCwgZW50aXR5S2V5KS53ZWlnaHRlZDsKfQoKCmZ1bmN0aW9uIHJlbmRlckJpbGFuVGVhY2hlcnMoKSB7CiAgICB2YXIgdGJvZHkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYmlsYW4tdGVhY2hlcnMtYm9keScpOwogICAgaWYgKCF0Ym9keSkgcmV0dXJuOwogICAgdmFyIG5hbWVGaWx0ZXIgPSAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2JpbGFuLXRlYWNoZXItZmlsdGVyJykgPyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYmlsYW4tdGVhY2hlci1maWx0ZXInKS52YWx1ZSA6ICcnKS50b0xvd2VyQ2FzZSgpOwogICAgdmFyIGVudGl0eUZpbHRlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdiaWxhbi10ZWFjaGVyLWVudGl0eS1maWx0ZXInKSA/IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdiaWxhbi10ZWFjaGVyLWVudGl0eS1maWx0ZXInKS52YWx1ZSA6ICcnOwogICAgdmFyIGFsbFRlYWNoZXJzID0gW107CiAgICBTSEFSRURfVEVBQ0hFUlMuZm9yRWFjaChmdW5jdGlvbih0LCBzaGFyZWRJZHgpIHsKICAgICAgICB2YXIgZW50aXRpZXMgPSB0LmVudGl0aWVzIHx8IFtdOwogICAgICAgIGlmIChlbnRpdHlGaWx0ZXIpIHsKICAgICAgICAgICAgaWYgKGVudGl0eUZpbHRlciA9PT0gJ3NoYXJlZCcgJiYgZW50aXRpZXMubGVuZ3RoIDw9IDEpIHJldHVybjsKICAgICAgICAgICAgaWYgKGVudGl0eUZpbHRlciAhPT0gJ3NoYXJlZCcgJiYgIWVudGl0aWVzLmluY2x1ZGVzKGVudGl0eUZpbHRlcikpIHJldHVybjsKICAgICAgICB9CgogICAgICAgIC8vIENhbGN1bCBkw6l0YWlsbMOpIChkZXZhbnQgw6lsw6h2ZXMgKyBwb25kw6lyYXRpb24pIGRlcHVpcyBsYSB2ZW50aWxhdGlvbiBkZSBjaGFxdWUgZW50aXTDqQogICAgICAgIHZhciBiZEMgID0gY2FsY1RlYWNoZXJIb3Vyc0JyZWFrZG93bihzaGFyZWRJZHgsICdjb2xsZWdlJyk7CiAgICAgICAgdmFyIGJkTCAgPSBjYWxjVGVhY2hlckhvdXJzQnJlYWtkb3duKHNoYXJlZElkeCwgJ2x5Y2VlJyk7CiAgICAgICAgdmFyIGJkTFAgPSBjYWxjVGVhY2hlckhvdXJzQnJlYWtkb3duKHNoYXJlZElkeCwgJ2x5Y2VlX3BybycpOwogICAgICAgIHZhciBiZFAgID0gY2FsY1RlYWNoZXJIb3Vyc0JyZWFrZG93bihzaGFyZWRJZHgsICdwb2xlJyk7CgogICAgICAgIHZhciBoQyAgPSBiZEMud2VpZ2h0ZWQsICBoTCAgPSBiZEwud2VpZ2h0ZWQsICBoTFAgPSBiZExQLndlaWdodGVkLCBoUCAgPSBiZFAud2VpZ2h0ZWQ7CiAgICAgICAgdmFyIHJhd0MgPSBiZEMucmF3LCAgICAgIHJhd0wgPSBiZEwucmF3LCAgICAgICByYXdMUCA9IGJkTFAucmF3LCAgICByYXdQID0gYmRQLnJhdzsKICAgICAgICB2YXIgcG9uZEMgPSBiZEMucG9uZCwgICAgcG9uZEwgPSBiZEwucG9uZCwgICAgIHBvbmRMUCA9IGJkTFAucG9uZCwgIHBvbmRQID0gYmRQLnBvbmQ7CgogICAgICAgIC8vIFNpIGF1Y3VuZSBoZXVyZSBkYW5zIGxhIHZlbnRpbGF0aW9uLCBmYWxsYmFjayBzdXIgdC5zZXJ2aWNlcyAoc2Fpc2llIG1hbnVlbGxlLCBwYXMgZGUgcG9uZMOpcmF0aW9uIGNvbm51ZSkKICAgICAgICB2YXIgaGFzVmVudGlsYXRpb24gPSAoaEMgKyBoTCArIGhMUCArIGhQKSA+IDA7CiAgICAgICAgaWYgKCFoYXNWZW50aWxhdGlvbikgewogICAgICAgICAgICBoQyAgPSBwYXJzZUZsb2F0KHQuc2VydmljZXMgJiYgdC5zZXJ2aWNlcy5jb2xsZWdlKSAgICB8fCAwOwogICAgICAgICAgICBoTCAgPSBwYXJzZUZsb2F0KHQuc2VydmljZXMgJiYgdC5zZXJ2aWNlcy5seWNlZSkgICAgICB8fCAwOwogICAgICAgICAgICBoTFAgPSBwYXJzZUZsb2F0KHQuc2VydmljZXMgJiYgdC5zZXJ2aWNlcy5seWNlZV9wcm8pICB8fCAwOwogICAgICAgICAgICBoUCAgPSBwYXJzZUZsb2F0KHQuc2VydmljZXMgJiYgdC5zZXJ2aWNlcy5wb2xlKSAgICAgICB8fCAwOwogICAgICAgICAgICByYXdDID0gaEM7IHJhd0wgPSBoTDsgcmF3TFAgPSBoTFA7IHJhd1AgPSBoUDsKICAgICAgICAgICAgcG9uZEMgPSAwOyBwb25kTCA9IDA7IHBvbmRMUCA9IDA7IHBvbmRQID0gMDsKICAgICAgICB9CiAgICAgICAgdmFyIHJhd1RvdGFsICA9IHJhd0MgICsgcmF3TCAgKyByYXdMUCAgKyByYXdQOwogICAgICAgIHZhciBwb25kVG90YWwgPSBwb25kQyArIHBvbmRMICsgcG9uZExQICsgcG9uZFA7CgogICAgICAgIHZhciBlbnRMYWJlbCA9IGVudGl0aWVzLmxlbmd0aCA+IDAKICAgICAgICAgICAgPyBlbnRpdGllcy5tYXAoZnVuY3Rpb24oZSl7IHJldHVybiB7Y29sbGVnZTon8J+PqycsbHljZWU6J/Cfj5vvuI8nLGx5Y2VlX3Bybzon8J+PrScscG9sZTon8J+Okyd9W2VdfHxlOyB9KS5qb2luKCcgJykKICAgICAgICAgICAgOiAn4oCTJzsKICAgICAgICBhbGxUZWFjaGVycy5wdXNoKHsKICAgICAgICAgICAgbmFtZTogdC5uYW1lIHx8ICfigJMnLCBzdWJqZWN0OiB0LnN1YmplY3QgfHwgJ+KAkycsCiAgICAgICAgICAgIG9yczogcGFyc2VGbG9hdCh0Lm9ycykgfHwgMCwKICAgICAgICAgICAgZW50aXR5OiBlbnRpdGllcy5sZW5ndGggPiAxID8gJ3NoYXJlZCcgOiAoZW50aXRpZXNbMF0gfHwgJ3NoYXJlZCcpLAogICAgICAgICAgICBlbnRMYWJlbDogZW50TGFiZWwsCiAgICAgICAgICAgIGhDb2xsZWdlOiBoQywgICAgaEx5Y2VlOiBoTCwgICAgaEx5Y2VlUHJvOiBoTFAsICAgIGhQb2xlOiBoUCwKICAgICAgICAgICAgcmF3Q29sbGVnZTogcmF3QywgcmF3THljZWU6IHJhd0wsIHJhd0x5Y2VlUHJvOiByYXdMUCwgcmF3UG9sZTogcmF3UCwKICAgICAgICAgICAgcG9uZENvbGxlZ2U6IHBvbmRDLCBwb25kTHljZWU6IHBvbmRMLCBwb25kTHljZWVQcm86IHBvbmRMUCwgcG9uZFBvbGU6IHBvbmRQLAogICAgICAgICAgICByYXdUb3RhbDogcmF3VG90YWwsIHBvbmRUb3RhbDogcG9uZFRvdGFsLAogICAgICAgICAgICBjYXBwZWRMOiBiZEwucG9uZENhcHBlZCB8fCBmYWxzZSwgICAvLyBQb25kw6lyYXRpb24gbHljw6llIHBsYWZvbm7DqWUgw6AgMWgKICAgICAgICAgICAgY2FwcGVkUDogYmRQLnBvbmRDYXBwZWQgfHwgZmFsc2UsICAgLy8gKHLDqXNlcnbDqSkKICAgICAgICAgICAgZXhjZWVkc09SU19QOiBiZFAucG9uZEV4Y2VlZHNPUlMgfHwgZmFsc2UsICAvLyBQcm9mIEJUUy9ww7RsZSBkw6lwYXNzZSBzb24gT1JTCiAgICAgICAgICAgIGlzU2hhcmVkOiBlbnRpdGllcy5sZW5ndGggPiAxLAogICAgICAgICAgICBmcm9tVmVudGlsYXRpb246IGhhc1ZlbnRpbGF0aW9uCiAgICAgICAgfSk7CiAgICB9KTsKICAgIHZhciBmaWx0ZXJlZCA9IGFsbFRlYWNoZXJzLmZpbHRlcihmdW5jdGlvbih0KSB7IHJldHVybiAhbmFtZUZpbHRlciB8fCB0Lm5hbWUudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhuYW1lRmlsdGVyKTsgfSk7CiAgICBpZiAoIWZpbHRlcmVkLmxlbmd0aCkgewogICAgICAgIHRib2R5LmlubmVySFRNTCA9ICc8dHI+PHRkIGNvbHNwYW49IjEwIiBzdHlsZT0idGV4dC1hbGlnbjpjZW50ZXI7cGFkZGluZzoyMHB4O2NvbG9yOiNhYWE7Ij5BdWN1biBlbnNlaWduYW50IHRyb3V2w6k8L3RkPjwvdHI+JzsKICAgICAgICByZXR1cm47CiAgICB9CiAgICBmaWx0ZXJlZC5zb3J0KGZ1bmN0aW9uKGEsYikgeyByZXR1cm4gYS5uYW1lLmxvY2FsZUNvbXBhcmUoYi5uYW1lKTsgfSk7CiAgICB2YXIgZW50aXR5Q29sb3JzID0geyBjb2xsZWdlOiAnIzI5ODBiOScsIGx5Y2VlOiAnIzFlODQ0OScsIGx5Y2VlX3BybzogJyNkMzU0MDAnLCBwb2xlOiAnIzZjMzQ4MycsIHNoYXJlZDogJyNlNjdlMjInIH07CgogICAgLy8gVG90YXV4IHBhciBlbnRpdMOpCiAgICB2YXIgdG90T1JTID0gMCwgdG90Q29sbGVnZSA9IDAsIHRvdEx5Y2VlID0gMCwgdG90THljZWVQcm8gPSAwLCB0b3RQb2xlID0gMCwgdG90VG90YWwgPSAwLCB0b3RTb2xkZSA9IDA7CiAgICBmaWx0ZXJlZC5mb3JFYWNoKGZ1bmN0aW9uKHQpIHsKICAgICAgICB2YXIgdG90YWxIID0gdC5oQ29sbGVnZSArIHQuaEx5Y2VlICsgKHQuaEx5Y2VlUHJvfHwwKSArIHQuaFBvbGU7CiAgICAgICAgdG90T1JTICAgICAgKz0gdC5vcnM7CiAgICAgICAgdG90Q29sbGVnZSAgKz0gdC5oQ29sbGVnZTsKICAgICAgICB0b3RMeWNlZSAgICArPSB0LmhMeWNlZTsKICAgICAgICB0b3RMeWNlZVBybyArPSAodC5oTHljZWVQcm98fDApOwogICAgICAgIHRvdFBvbGUgICAgICs9IHQuaFBvbGU7CiAgICAgICAgdG90VG90YWwgICAgKz0gdG90YWxIOwogICAgICAgIHRvdFNvbGRlICAgICs9ICh0Lm9ycyAtIHRvdGFsSCk7CiAgICB9KTsKCiAgICB2YXIgcm93cyA9IGZpbHRlcmVkLm1hcChmdW5jdGlvbih0LCBpKSB7CiAgICAgICAgdmFyIHRvdGFsSCA9IHQuaENvbGxlZ2UgKyB0LmhMeWNlZSArIHQuaFBvbGU7CiAgICAgICAgdmFyIHNvbGRlID0gdC5vcnMgLSB0b3RhbEg7CiAgICAgICAgdmFyIHNvbGRlQ29sb3IgPSBNYXRoLmFicyhzb2xkZSkgPCAwLjEgPyAnIzI3YWU2MCcgOiAoc29sZGUgPiAwID8gJyNlNjdlMjInIDogJyNjMDM5MmInKTsKICAgICAgICB2YXIgYmcgPSBpICUgMiA9PT0gMCA/ICd3aGl0ZScgOiAnI2Y4ZjlmYSc7CiAgICAgICAgdmFyIHNyY0JhZGdlID0gdC5mcm9tVmVudGlsYXRpb24KICAgICAgICAgICAgPyAnPHNwYW4gdGl0bGU9IkhldXJlcyBjYWxjdWzDqWVzIGRlcHVpcyBsYSB2ZW50aWxhdGlvbiIgc3R5bGU9ImZvbnQtc2l6ZTowLjY1cmVtO2NvbG9yOiMyN2FlNjA7bWFyZ2luLWxlZnQ6M3B4OyI+4pqhVmVudC48L3NwYW4+JwogICAgICAgICAgICA6ICc8c3BhbiB0aXRsZT0iSGV1cmVzIHNhaXNpZXMgbWFudWVsbGVtZW50IChwYXMgZGUgdmVudGlsYXRpb24pIiBzdHlsZT0iZm9udC1zaXplOjAuNjVyZW07Y29sb3I6I2U2N2UyMjttYXJnaW4tbGVmdDozcHg7Ij7inI5NYW51ZWw8L3NwYW4+JzsKICAgICAgICB2YXIgaExQICAgPSB0LmhMeWNlZVBybyAgIHx8IDA7CiAgICAgICAgdmFyIHJhd0xQID0gdC5yYXdMeWNlZVBybyB8fCAwOwogICAgICAgIHZhciBwb25kTFAgPSB0LnBvbmRMeWNlZVBybyB8fCAwOwogICAgICAgIHZhciB0b3RhbEggPSB0LmhDb2xsZWdlICsgdC5oTHljZWUgKyBoTFAgKyB0LmhQb2xlOwogICAgICAgIHZhciByYXdIICAgPSB0LnJhd1RvdGFsICB8fCAwOwogICAgICAgIHZhciBwb25kSCAgPSB0LnBvbmRUb3RhbCB8fCAwOwoKICAgICAgICAvLyBIZWxwZXIgOiBhZmZpY2hlIFhoK1loPVpoIHNpIHBvbmTDqXJhdGlvbiwgc2lub24ganVzdGUgWGggKGNvdWxldXIgZW50aXTDqSkKICAgICAgICAvLyBjYXBwZWQ9dHJ1ZSDihpIgcG9uZMOpcmF0aW9uIGx5Y8OpZSBwbGFmb25uw6llIMOgIDFoIDogbGUgKzFoIGVzdCBhZmZpY2jDqSBlbiBncmFzCiAgICAgICAgLy8gYm9sZFBvbmQ9dHJ1ZSDihpIgcG9uZMOpcmF0aW9uIEJUUy9ww7RsZSBkw6lwYXNzYW50IGwnT1JTIDogbGUgK1hoIGVzdCBhZmZpY2jDqSBlbiBncmFzCiAgICAgICAgZnVuY3Rpb24gZW50aXR5Q2VsbChyYXcsIHBvbmQsIGNvbG9yLCBmdywgY2FwcGVkLCBib2xkUG9uZCkgewogICAgICAgICAgICB2YXIgd2VpZ2h0ZWQgPSByYXcgKyBwb25kOwogICAgICAgICAgICBpZiAod2VpZ2h0ZWQgPD0gMCkgcmV0dXJuICfigJMnOwogICAgICAgICAgICBpZiAocG9uZCA+IDAuMDEpIHsKICAgICAgICAgICAgICAgIHZhciBwb25kU3R5bGUgPSAoY2FwcGVkIHx8IGJvbGRQb25kKQogICAgICAgICAgICAgICAgICAgID8gJ2ZvbnQtd2VpZ2h0OjkwMDtjb2xvcjojOGU0NGFkOycKICAgICAgICAgICAgICAgICAgICA6ICdjb2xvcjojOGU0NGFkOyc7CiAgICAgICAgICAgICAgICByZXR1cm4gJzxzcGFuIHN0eWxlPSJmb250LXNpemU6MC43NHJlbTtjb2xvcjojOGU0NGFkOyI+JytyYXcudG9GaXhlZCgxKSsnaDxzcGFuIHN0eWxlPSJjb2xvcjojYmJiOyI+Kzwvc3Bhbj48c3BhbiBzdHlsZT0iJytwb25kU3R5bGUrJyI+Jytwb25kLnRvRml4ZWQoMSkrJ2g8L3NwYW4+PTwvc3Bhbj4nCiAgICAgICAgICAgICAgICAgICAgICsgJzxzcGFuIHN0eWxlPSJjb2xvcjonK2NvbG9yKyc7Zm9udC13ZWlnaHQ6JytmdysnOyI+Jyt3ZWlnaHRlZC50b0ZpeGVkKDEpKydoPC9zcGFuPic7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuICc8c3BhbiBzdHlsZT0iY29sb3I6Jytjb2xvcisnO2ZvbnQtd2VpZ2h0OicrZncrJzsiPicrcmF3LnRvRml4ZWQoMSkrJ2g8L3NwYW4+JzsKICAgICAgICB9CgogICAgICAgIHZhciB0b3RhbENlbGwgPSAocG9uZEggPiAwLjAxKQogICAgICAgICAgICA/ICc8c3BhbiBzdHlsZT0iZm9udC1zaXplOjAuNzhyZW07Y29sb3I6IzhlNDRhZDsiPicrcmF3SC50b0ZpeGVkKDEpKydoPHNwYW4gc3R5bGU9ImNvbG9yOiNhYWE7Ij4rPC9zcGFuPicrcG9uZEgudG9GaXhlZCgxKSsnaD08L3NwYW4+PGI+Jyt0b3RhbEgudG9GaXhlZCgxKSsnaDwvYj4nCiAgICAgICAgICAgIDogdG90YWxILnRvRml4ZWQoMSkrJ2gnOwogICAgICAgIHJldHVybiAnPHRyIHN0eWxlPSJiYWNrZ3JvdW5kOicrYmcrJztib3JkZXItYm90dG9tOjFweCBzb2xpZCAjZjBmMGYwOyI+JysKICAgICAgICAgICAgJzx0ZCBzdHlsZT0icGFkZGluZzo3cHggMTBweDtmb250LXdlaWdodDo2MDA7Y29sb3I6IzJjM2U1MDsiPicrdC5uYW1lK3NyY0JhZGdlKyc8L3RkPicrCiAgICAgICAgICAgICc8dGQgc3R5bGU9InBhZGRpbmc6N3B4IDhweDtjb2xvcjojNTU1O2ZvbnQtc2l6ZTowLjgzcmVtOyI+Jyt0LnN1YmplY3QrJzwvdGQ+JysKICAgICAgICAgICAgJzx0ZCBzdHlsZT0icGFkZGluZzo3cHg7dGV4dC1hbGlnbjpjZW50ZXI7Zm9udC13ZWlnaHQ6NzAwOyI+Jyt0Lm9ycysnPC90ZD4nKwogICAgICAgICAgICAnPHRkIHN0eWxlPSJwYWRkaW5nOjdweDt0ZXh0LWFsaWduOmNlbnRlcjsiPicrZW50aXR5Q2VsbCh0LnJhd0NvbGxlZ2V8fDAsIHQucG9uZENvbGxlZ2V8fDAsICcjMjk4MGI5JywgJzcwMCcsIGZhbHNlLCBmYWxzZSkrJzwvdGQ+JysKICAgICAgICAgICAgJzx0ZCBzdHlsZT0icGFkZGluZzo3cHg7dGV4dC1hbGlnbjpjZW50ZXI7Ij4nK2VudGl0eUNlbGwodC5yYXdMeWNlZXx8MCwgdC5wb25kTHljZWV8fDAsICcjMWU4NDQ5JywgJzcwMCcsIHQuY2FwcGVkTCwgZmFsc2UpKyc8L3RkPicrCiAgICAgICAgICAgICc8dGQgc3R5bGU9InBhZGRpbmc6N3B4O3RleHQtYWxpZ246Y2VudGVyOyI+JytlbnRpdHlDZWxsKHJhd0xQLCBwb25kTFAsICcjZDM1NDAwJywgJzcwMCcsIGZhbHNlLCBmYWxzZSkrJzwvdGQ+JysKICAgICAgICAgICAgJzx0ZCBzdHlsZT0icGFkZGluZzo3cHg7dGV4dC1hbGlnbjpjZW50ZXI7Ij4nK2VudGl0eUNlbGwodC5yYXdQb2xlfHwwLCB0LnBvbmRQb2xlfHwwLCAnIzZjMzQ4MycsICc3MDAnLCB0LmNhcHBlZFAsIHQuZXhjZWVkc09SU19QKSsnPC90ZD4nKwogICAgICAgICAgICAnPHRkIHN0eWxlPSJwYWRkaW5nOjdweDt0ZXh0LWFsaWduOmNlbnRlcjtmb250LXdlaWdodDo4MDA7Y29sb3I6I2MwMzkyYjsiPicrdG90YWxDZWxsKyc8L3RkPicrCiAgICAgICAgICAgICc8dGQgc3R5bGU9InBhZGRpbmc6N3B4O3RleHQtYWxpZ246Y2VudGVyO2ZvbnQtd2VpZ2h0OjgwMDtjb2xvcjonK3NvbGRlQ29sb3IrJzsiPicrKHNvbGRlPj0wPycrJzonJykrc29sZGUudG9GaXhlZCgxKSsnPC90ZD4nKwogICAgICAgICAgICAnPHRkIHN0eWxlPSJwYWRkaW5nOjdweDt0ZXh0LWFsaWduOmNlbnRlcjsiPjxzcGFuIHN0eWxlPSJiYWNrZ3JvdW5kOicrZW50aXR5Q29sb3JzW3QuZW50aXR5XSsnMjI7Y29sb3I6JytlbnRpdHlDb2xvcnNbdC5lbnRpdHldKyc7Ym9yZGVyLXJhZGl1czoxMHB4O3BhZGRpbmc6MnB4IDhweDtmb250LXNpemU6MC43NXJlbTtmb250LXdlaWdodDo3MDA7Ij4nK3QuZW50TGFiZWwrJzwvc3Bhbj48L3RkPicrCiAgICAgICAgICAgICc8L3RyPic7CiAgICB9KS5qb2luKCcnKTsKCiAgICAvLyBMaWduZSBkZSB0b3RhdXgKICAgIHZhciB0b3RTb2xkZUNvbG9yID0gTWF0aC5hYnModG90U29sZGUpIDwgMC4xID8gJyMyN2FlNjAnIDogKHRvdFNvbGRlID4gMCA/ICcjZTY3ZTIyJyA6ICcjYzAzOTJiJyk7CiAgICByb3dzICs9ICc8dHIgc3R5bGU9ImJhY2tncm91bmQ6IzFhMjUyZjtjb2xvcjp3aGl0ZTtmb250LXdlaWdodDo4MDA7Zm9udC1zaXplOjAuODhyZW07Ym9yZGVyLXRvcDoycHggc29saWQgIzU1NTsiPicrCiAgICAgICAgJzx0ZCBzdHlsZT0icGFkZGluZzo5cHggMTBweDsiPlRPVEFMICgnK2ZpbHRlcmVkLmxlbmd0aCsnIGVucy4pPC90ZD4nKwogICAgICAgICc8dGQgc3R5bGU9InBhZGRpbmc6OXB4IDhweDtjb2xvcjojYWFhO2ZvbnQtc2l6ZTowLjhyZW07Ij7igJM8L3RkPicrCiAgICAgICAgJzx0ZCBzdHlsZT0icGFkZGluZzo5cHg7dGV4dC1hbGlnbjpjZW50ZXI7Y29sb3I6I2YxYzQwZjsiPicrdG90T1JTLnRvRml4ZWQoMSkrJyBoPC90ZD4nKwogICAgICAgICc8dGQgc3R5bGU9InBhZGRpbmc6OXB4O3RleHQtYWxpZ246Y2VudGVyO2NvbG9yOiM3ZWM4ZTM7YmFja2dyb3VuZDojMWMzYTUyOyI+Jyt0b3RDb2xsZWdlLnRvRml4ZWQoMSkrJyBoPGJyPjxzbWFsbCBzdHlsZT0iY29sb3I6I2FhZDRlODtmb250LXdlaWdodDo1MDA7Ij7wn4+rIENvbGzDqGdlPC9zbWFsbD48L3RkPicrCiAgICAgICAgJzx0ZCBzdHlsZT0icGFkZGluZzo5cHg7dGV4dC1hbGlnbjpjZW50ZXI7Y29sb3I6IzgxZThhNTtiYWNrZ3JvdW5kOiMxYzNhMmM7Ij4nK3RvdEx5Y2VlLnRvRml4ZWQoMSkrJyBoPGJyPjxzbWFsbCBzdHlsZT0iY29sb3I6I2FhZThjMDtmb250LXdlaWdodDo1MDA7Ij7wn4+b77iPIEx5Y8OpZTwvc21hbGw+PC90ZD4nKwogICAgICAgICc8dGQgc3R5bGU9InBhZGRpbmc6OXB4O3RleHQtYWxpZ246Y2VudGVyO2NvbG9yOiNmZmIzNDc7YmFja2dyb3VuZDojM2EyMDEwOyI+Jyt0b3RMeWNlZVByby50b0ZpeGVkKDEpKycgaDxicj48c21hbGwgc3R5bGU9ImNvbG9yOiNmZmQwOGE7Zm9udC13ZWlnaHQ6NTAwOyI+8J+PrSBMeWPDqWUgUHJvPC9zbWFsbD48L3RkPicrCiAgICAgICAgJzx0ZCBzdHlsZT0icGFkZGluZzo5cHg7dGV4dC1hbGlnbjpjZW50ZXI7Y29sb3I6I2Q3YThmZjtiYWNrZ3JvdW5kOiMyZTFhM2E7Ij4nK3RvdFBvbGUudG9GaXhlZCgxKSsnIGg8YnI+PHNtYWxsIHN0eWxlPSJjb2xvcjojYzRhMGU4O2ZvbnQtd2VpZ2h0OjUwMDsiPvCfjpMgUMO0bGU8L3NtYWxsPjwvdGQ+JysKICAgICAgICAnPHRkIHN0eWxlPSJwYWRkaW5nOjlweDt0ZXh0LWFsaWduOmNlbnRlcjtjb2xvcjojZmY5OTk5O2ZvbnQtc2l6ZToxcmVtOyI+Jyt0b3RUb3RhbC50b0ZpeGVkKDEpKycgaDwvdGQ+JysKICAgICAgICAnPHRkIHN0eWxlPSJwYWRkaW5nOjlweDt0ZXh0LWFsaWduOmNlbnRlcjtmb250LXdlaWdodDo4MDA7Y29sb3I6Jyt0b3RTb2xkZUNvbG9yKyc7Ij4nKyh0b3RTb2xkZT49MD8nKyc6JycpK3RvdFNvbGRlLnRvRml4ZWQoMSkrJyBoPC90ZD4nKwogICAgICAgICc8dGQgc3R5bGU9InBhZGRpbmc6OXB4O3RleHQtYWxpZ246Y2VudGVyO2ZvbnQtc2l6ZTowLjcycmVtO2NvbG9yOiNjY2M7Ij4nKwogICAgICAgICAgICAnPGRpdiBzdHlsZT0iY29sb3I6IzdlYzhlMzsiPvCfj6sgJyt0b3RDb2xsZWdlLnRvRml4ZWQoMSkrJ2g8L2Rpdj4nKwogICAgICAgICAgICAnPGRpdiBzdHlsZT0iY29sb3I6IzgxZThhNTsiPvCfj5vvuI8gJyt0b3RMeWNlZS50b0ZpeGVkKDEpKydoPC9kaXY+JysKICAgICAgICAgICAgJzxkaXYgc3R5bGU9ImNvbG9yOiNmZmIzNDc7Ij7wn4+tICcrdG90THljZWVQcm8udG9GaXhlZCgxKSsnaDwvZGl2PicrCiAgICAgICAgICAgICc8ZGl2IHN0eWxlPSJjb2xvcjojZDdhOGZmOyI+8J+OkyAnK3RvdFBvbGUudG9GaXhlZCgxKSsnaDwvZGl2PicrCiAgICAgICAgJzwvdGQ+JysKICAgICAgICAnPC90cj4nOwoKICAgIHRib2R5LmlubmVySFRNTCA9IHJvd3M7Cn0KCmZ1bmN0aW9uIHJlbmRlckJpbGFuU3ViamVjdHMoKSB7CiAgICB2YXIgdGJvZHkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYmlsYW4tc3ViamVjdHMtYm9keScpOwogICAgaWYgKCF0Ym9keSkgcmV0dXJuOwogICAgdmFyIGFsbFN1YmplY3RzID0gbmV3IFNldCgpOwogICAgWydjb2xsZWdlJywnbHljZWUnLCdseWNlZV9wcm8nLCdwb2xlJ10uZm9yRWFjaChmdW5jdGlvbihrKSB7CiAgICAgICAgdmFyIGQgPSBNVUxUSV9EQVRBW2tdOwogICAgICAgIGlmIChkICYmIGQuc3ViamVjdHMpIGQuc3ViamVjdHMuZm9yRWFjaChmdW5jdGlvbihzKSB7IGFsbFN1YmplY3RzLmFkZChzKTsgfSk7CiAgICB9KTsKICAgIHZhciByb3dzID0gW107CiAgICBhbGxTdWJqZWN0cy5mb3JFYWNoKGZ1bmN0aW9uKHMpIHsKICAgICAgICB2YXIgY29sQmVzb2luPTAsY29sQXBwb3J0PTAsbHljQmVzb2luPTAsbHljQXBwb3J0PTAsbHBCZXNvaW49MCxscEFwcG9ydD0wLHBvbGVCZXNvaW49MCxwb2xlQXBwb3J0PTA7CiAgICAgICAgWydjb2xsZWdlJywnbHljZWUnLCdseWNlZV9wcm8nLCdwb2xlJ10uZm9yRWFjaChmdW5jdGlvbihrKSB7CiAgICAgICAgICAgIHZhciBkID0gTVVMVElfREFUQVtrXTsKICAgICAgICAgICAgaWYgKCFkIHx8ICFkLnN1YmplY3RzLmluY2x1ZGVzKHMpKSByZXR1cm47CiAgICAgICAgICAgIHZhciBuZWVkcyA9IGNhbGNFbnRpdHlTdWJqZWN0TmVlZHMoZCwgayk7CiAgICAgICAgICAgIHZhciBuID0gbmVlZHNbc10gfHwge25lZWQ6MCxhcHA6MH07CiAgICAgICAgICAgIGlmIChrPT09J2NvbGxlZ2UnKSAgICB7IGNvbEJlc29pbis9bi5uZWVkOyBjb2xBcHBvcnQrPW4uYXBwOyB9CiAgICAgICAgICAgIGVsc2UgaWYgKGs9PT0nbHljZWUnKSB7IGx5Y0Jlc29pbis9bi5uZWVkOyBseWNBcHBvcnQrPW4uYXBwOyB9CiAgICAgICAgICAgIGVsc2UgaWYgKGs9PT0nbHljZWVfcHJvJykgeyBscEJlc29pbis9bi5uZWVkOyBscEFwcG9ydCs9bi5hcHA7IH0KICAgICAgICAgICAgZWxzZSBpZiAoaz09PSdwb2xlJykgIHsgcG9sZUJlc29pbis9bi5uZWVkOyBwb2xlQXBwb3J0Kz1uLmFwcDsgfQogICAgICAgIH0pOwogICAgICAgIHZhciB0b3RhbEJlc29pbiA9IGNvbEJlc29pbitseWNCZXNvaW4rbHBCZXNvaW4rcG9sZUJlc29pbjsKICAgICAgICB2YXIgdG90YWxBcHBvcnQgPSBjb2xBcHBvcnQrbHljQXBwb3J0K2xwQXBwb3J0K3BvbGVBcHBvcnQ7CiAgICAgICAgaWYgKHRvdGFsQmVzb2luPT09MCAmJiB0b3RhbEFwcG9ydD09PTApIHJldHVybjsKICAgICAgICByb3dzLnB1c2goe3MsY29sQmVzb2luLGNvbEFwcG9ydCxseWNCZXNvaW4sbHljQXBwb3J0LGxwQmVzb2luLGxwQXBwb3J0LHBvbGVCZXNvaW4scG9sZUFwcG9ydCx0b3RhbEJlc29pbix0b3RhbEFwcG9ydH0pOwogICAgfSk7CiAgICByb3dzLnNvcnQoZnVuY3Rpb24oYSxiKSB7IHJldHVybiBiLnRvdGFsQmVzb2luIC0gYS50b3RhbEJlc29pbjsgfSk7CiAgICB2YXIgZm10ID0gZnVuY3Rpb24odikgeyByZXR1cm4gdiA+IDAgPyB2LnRvRml4ZWQoMSkgOiAn4oCTJzsgfTsKCiAgICBpZiAoIXJvd3MubGVuZ3RoKSB7CiAgICAgICAgdGJvZHkuaW5uZXJIVE1MID0gJzx0cj48dGQgY29sc3Bhbj0iMTIiIHN0eWxlPSJ0ZXh0LWFsaWduOmNlbnRlcjtwYWRkaW5nOjIwcHg7Y29sb3I6I2FhYTsiPkF1Y3VuZSBtYXRpw6hyZSBhdmVjIGRvbm7DqWVzPC90ZD48L3RyPic7CiAgICAgICAgcmV0dXJuOwogICAgfQoKICAgIC8vIENhbGN1bCBkZXMgdG90YXV4CiAgICB2YXIgdG90Q29sQmVzb2luPTAsIHRvdENvbEFwcG9ydD0wLCB0b3RMeWNCZXNvaW49MCwgdG90THljQXBwb3J0PTAsIHRvdExwQmVzb2luPTAsIHRvdExwQXBwb3J0PTAsIHRvdFBvbEJlc29pbj0wLCB0b3RQb2xBcHBvcnQ9MCwgdG90QmVzb2luPTAsIHRvdEFwcG9ydD0wOwogICAgcm93cy5mb3JFYWNoKGZ1bmN0aW9uKHIpIHsKICAgICAgICB0b3RDb2xCZXNvaW4gICs9IHIuY29sQmVzb2luOyAgdG90Q29sQXBwb3J0ICArPSByLmNvbEFwcG9ydDsKICAgICAgICB0b3RMeWNCZXNvaW4gICs9IHIubHljQmVzb2luOyAgdG90THljQXBwb3J0ICArPSByLmx5Y0FwcG9ydDsKICAgICAgICB0b3RMcEJlc29pbiAgICs9IHIubHBCZXNvaW47ICAgdG90THBBcHBvcnQgICArPSByLmxwQXBwb3J0OwogICAgICAgIHRvdFBvbEJlc29pbiAgKz0gci5wb2xlQmVzb2luOyB0b3RQb2xBcHBvcnQgICs9IHIucG9sZUFwcG9ydDsKICAgICAgICB0b3RCZXNvaW4gICAgICs9IHIudG90YWxCZXNvaW47CiAgICAgICAgdG90QXBwb3J0ICAgICArPSByLnRvdGFsQXBwb3J0OwogICAgfSk7CiAgICB2YXIgdG90RWNhcnQgPSB0b3RBcHBvcnQgLSB0b3RCZXNvaW47CiAgICB2YXIgdG90RWNhcnRDb2xvciA9IHRvdEVjYXJ0ID49IDAgPyAnIzI3YWU2MCcgOiAnI2MwMzkyYic7CgogICAgdmFyIGh0bWwgPSByb3dzLm1hcChmdW5jdGlvbihyLCBpKSB7CiAgICAgICAgdmFyIGVjYXJ0ID0gci50b3RhbEFwcG9ydCAtIHIudG90YWxCZXNvaW47CiAgICAgICAgdmFyIGVjID0gZWNhcnQgPj0gMCA/ICcjMjdhZTYwJyA6ICcjYzAzOTJiJzsKICAgICAgICB2YXIgYmcgPSBpJTI9PT0wPyd3aGl0ZSc6JyNmOGY5ZmEnOwogICAgICAgIHJldHVybiAnPHRyIHN0eWxlPSJiYWNrZ3JvdW5kOicrYmcrJztib3JkZXItYm90dG9tOjFweCBzb2xpZCAjZjBmMGYwOyI+JysKICAgICAgICAgICAgJzx0ZCBzdHlsZT0icGFkZGluZzo3cHggMTBweDtmb250LXdlaWdodDo2MDA7Y29sb3I6IzJjM2U1MDsiPicrci5zKyc8L3RkPicrCiAgICAgICAgICAgICc8dGQgc3R5bGU9InBhZGRpbmc6N3B4O3RleHQtYWxpZ246Y2VudGVyO2NvbG9yOiMyOTgwYjk7Ij4nK2ZtdChyLmNvbEJlc29pbikrJzwvdGQ+JysKICAgICAgICAgICAgJzx0ZCBzdHlsZT0icGFkZGluZzo3cHg7dGV4dC1hbGlnbjpjZW50ZXI7Y29sb3I6IzI5ODBiOTtmb250LXdlaWdodDonKyhyLmNvbEFwcG9ydD4wPzcwMDo0MDApKyc7Ij4nK2ZtdChyLmNvbEFwcG9ydCkrJzwvdGQ+JysKICAgICAgICAgICAgJzx0ZCBzdHlsZT0icGFkZGluZzo3cHg7dGV4dC1hbGlnbjpjZW50ZXI7Y29sb3I6IzFlODQ0OTsiPicrZm10KHIubHljQmVzb2luKSsnPC90ZD4nKwogICAgICAgICAgICAnPHRkIHN0eWxlPSJwYWRkaW5nOjdweDt0ZXh0LWFsaWduOmNlbnRlcjtjb2xvcjojMWU4NDQ5O2ZvbnQtd2VpZ2h0OicrKHIubHljQXBwb3J0PjA/NzAwOjQwMCkrJzsiPicrZm10KHIubHljQXBwb3J0KSsnPC90ZD4nKwogICAgICAgICAgICAnPHRkIHN0eWxlPSJwYWRkaW5nOjdweDt0ZXh0LWFsaWduOmNlbnRlcjtjb2xvcjojZDM1NDAwOyI+JytmbXQoci5scEJlc29pbikrJzwvdGQ+JysKICAgICAgICAgICAgJzx0ZCBzdHlsZT0icGFkZGluZzo3cHg7dGV4dC1hbGlnbjpjZW50ZXI7Y29sb3I6I2QzNTQwMDtmb250LXdlaWdodDonKyhyLmxwQXBwb3J0PjA/NzAwOjQwMCkrJzsiPicrZm10KHIubHBBcHBvcnQpKyc8L3RkPicrCiAgICAgICAgICAgICc8dGQgc3R5bGU9InBhZGRpbmc6N3B4O3RleHQtYWxpZ246Y2VudGVyO2NvbG9yOiM2YzM0ODM7Ij4nK2ZtdChyLnBvbGVCZXNvaW4pKyc8L3RkPicrCiAgICAgICAgICAgICc8dGQgc3R5bGU9InBhZGRpbmc6N3B4O3RleHQtYWxpZ246Y2VudGVyO2NvbG9yOiM2YzM0ODM7Zm9udC13ZWlnaHQ6Jysoci5wb2xlQXBwb3J0PjA/NzAwOjQwMCkrJzsiPicrZm10KHIucG9sZUFwcG9ydCkrJzwvdGQ+JysKICAgICAgICAgICAgJzx0ZCBzdHlsZT0icGFkZGluZzo3cHg7dGV4dC1hbGlnbjpjZW50ZXI7Zm9udC13ZWlnaHQ6ODAwO2NvbG9yOiNjMDM5MmI7YmFja2dyb3VuZDojZmZmNWY1OyI+JytyLnRvdGFsQmVzb2luLnRvRml4ZWQoMSkrJzwvdGQ+JysKICAgICAgICAgICAgJzx0ZCBzdHlsZT0icGFkZGluZzo3cHg7dGV4dC1hbGlnbjpjZW50ZXI7Zm9udC13ZWlnaHQ6ODAwO2NvbG9yOiMxNmEwODU7YmFja2dyb3VuZDojZjBmZmY0OyI+JytyLnRvdGFsQXBwb3J0LnRvRml4ZWQoMSkrJzwvdGQ+JysKICAgICAgICAgICAgJzx0ZCBzdHlsZT0icGFkZGluZzo3cHg7dGV4dC1hbGlnbjpjZW50ZXI7Zm9udC13ZWlnaHQ6ODAwO2NvbG9yOicrZWMrJzsiPicrKGVjYXJ0Pj0wPycrJzonJykrZWNhcnQudG9GaXhlZCgxKSsnPC90ZD4nKwogICAgICAgICAgICAnPC90cj4nOwogICAgfSkuam9pbignJyk7CgogICAgLy8gTGlnbmUgZGUgdG90YXV4CiAgICBodG1sICs9ICc8dHIgc3R5bGU9ImJhY2tncm91bmQ6IzFhMjUyZjtjb2xvcjp3aGl0ZTtmb250LXdlaWdodDo4MDA7Zm9udC1zaXplOjAuODhyZW07Ym9yZGVyLXRvcDoycHggc29saWQgIzU1NTsiPicrCiAgICAgICAgJzx0ZCBzdHlsZT0icGFkZGluZzo5cHggMTBweDsiPlRPVEFMICgnK3Jvd3MubGVuZ3RoKycgbWF0acOocmVzKTwvdGQ+JysKICAgICAgICAnPHRkIHN0eWxlPSJwYWRkaW5nOjlweDt0ZXh0LWFsaWduOmNlbnRlcjtjb2xvcjojN2VjOGUzO2JhY2tncm91bmQ6IzFjM2E1MjsiPicrdG90Q29sQmVzb2luLnRvRml4ZWQoMSkrJzwvdGQ+JysKICAgICAgICAnPHRkIHN0eWxlPSJwYWRkaW5nOjlweDt0ZXh0LWFsaWduOmNlbnRlcjtjb2xvcjojN2VjOGUzO2JhY2tncm91bmQ6IzFjM2E1Mjtmb250LXdlaWdodDo3MDA7Ij4nK3RvdENvbEFwcG9ydC50b0ZpeGVkKDEpKyc8L3RkPicrCiAgICAgICAgJzx0ZCBzdHlsZT0icGFkZGluZzo5cHg7dGV4dC1hbGlnbjpjZW50ZXI7Y29sb3I6IzgxZThhNTtiYWNrZ3JvdW5kOiMxYzNhMmM7Ij4nK3RvdEx5Y0Jlc29pbi50b0ZpeGVkKDEpKyc8L3RkPicrCiAgICAgICAgJzx0ZCBzdHlsZT0icGFkZGluZzo5cHg7dGV4dC1hbGlnbjpjZW50ZXI7Y29sb3I6IzgxZThhNTtiYWNrZ3JvdW5kOiMxYzNhMmM7Zm9udC13ZWlnaHQ6NzAwOyI+Jyt0b3RMeWNBcHBvcnQudG9GaXhlZCgxKSsnPC90ZD4nKwogICAgICAgICc8dGQgc3R5bGU9InBhZGRpbmc6OXB4O3RleHQtYWxpZ246Y2VudGVyO2NvbG9yOiNmZmIzNDc7YmFja2dyb3VuZDojM2EyMDEwOyI+Jyt0b3RMcEJlc29pbi50b0ZpeGVkKDEpKyc8L3RkPicrCiAgICAgICAgJzx0ZCBzdHlsZT0icGFkZGluZzo5cHg7dGV4dC1hbGlnbjpjZW50ZXI7Y29sb3I6I2ZmYjM0NztiYWNrZ3JvdW5kOiMzYTIwMTA7Zm9udC13ZWlnaHQ6NzAwOyI+Jyt0b3RMcEFwcG9ydC50b0ZpeGVkKDEpKyc8L3RkPicrCiAgICAgICAgJzx0ZCBzdHlsZT0icGFkZGluZzo5cHg7dGV4dC1hbGlnbjpjZW50ZXI7Y29sb3I6I2Q3YThmZjtiYWNrZ3JvdW5kOiMyZTFhM2E7Ij4nK3RvdFBvbEJlc29pbi50b0ZpeGVkKDEpKyc8L3RkPicrCiAgICAgICAgJzx0ZCBzdHlsZT0icGFkZGluZzo5cHg7dGV4dC1hbGlnbjpjZW50ZXI7Y29sb3I6I2Q3YThmZjtiYWNrZ3JvdW5kOiMyZTFhM2E7Zm9udC13ZWlnaHQ6NzAwOyI+Jyt0b3RQb2xBcHBvcnQudG9GaXhlZCgxKSsnPC90ZD4nKwogICAgICAgICc8dGQgc3R5bGU9InBhZGRpbmc6OXB4O3RleHQtYWxpZ246Y2VudGVyO2NvbG9yOiNmZjk5OTk7YmFja2dyb3VuZDojM2ExYzFjO2ZvbnQtc2l6ZToxcmVtOyI+Jyt0b3RCZXNvaW4udG9GaXhlZCgxKSsnPC90ZD4nKwogICAgICAgICc8dGQgc3R5bGU9InBhZGRpbmc6OXB4O3RleHQtYWxpZ246Y2VudGVyO2NvbG9yOiM4MWU4YTU7YmFja2dyb3VuZDojMWMzYTJjO2ZvbnQtc2l6ZToxcmVtOyI+Jyt0b3RBcHBvcnQudG9GaXhlZCgxKSsnPC90ZD4nKwogICAgICAgICc8dGQgc3R5bGU9InBhZGRpbmc6OXB4O3RleHQtYWxpZ246Y2VudGVyO2NvbG9yOicrdG90RWNhcnRDb2xvcisnOyI+JysodG90RWNhcnQ+PTA/JysnOicnKSt0b3RFY2FydC50b0ZpeGVkKDEpKyc8L3RkPicrCiAgICAgICAgJzwvdHI+JzsKCiAgICB0Ym9keS5pbm5lckhUTUwgPSBodG1sOwp9CgovKiogUmVuZCBsZSBiaWxhbiBjb25zb2xpZMOpICovCmZ1bmN0aW9uIHJlbmRlckJpbGFuR2xvYmFsKCkgewogICAgLy8gMS4gS1BJIEdMT0JBVVgKICAgIGNvbnN0IGtwaURpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdiaWxhbi1rcGknKTsKICAgIGlmICgha3BpRGl2KSByZXR1cm47CiAgICAKICAgIGNvbnN0IHN0YXRzID0gewogICAgICAgIGNvbGxlZ2U6IGNhbGNFbnRpdHlTdGF0cyhNVUxUSV9EQVRBLmNvbGxlZ2UsICdjb2xsZWdlJyksCiAgICAgICAgbHljZWU6IGNhbGNFbnRpdHlTdGF0cyhNVUxUSV9EQVRBLmx5Y2VlLCAnbHljZWUnKSwKICAgICAgICBseWNlZV9wcm86IGNhbGNFbnRpdHlTdGF0cyhNVUxUSV9EQVRBLmx5Y2VlX3BybywgJ2x5Y2VlX3BybycpLAogICAgICAgIHBvbGU6IGNhbGNFbnRpdHlTdGF0cyhNVUxUSV9EQVRBLnBvbGUsICdwb2xlJykKICAgIH07CiAgICAKICAgIGNvbnN0IHRvdGFsRG90ID0gKE1VTFRJX0RBVEEuY29sbGVnZT8uY29uZmlnPy50b3RhbHx8MCkgKyAoTVVMVElfREFUQS5seWNlZT8uY29uZmlnPy50b3RhbHx8MCkgKyAoTVVMVElfREFUQS5seWNlZV9wcm8/LmNvbmZpZz8udG90YWx8fDApICsgKE1VTFRJX0RBVEEucG9sZT8uY29uZmlnPy50b3RhbHx8MCk7CiAgICBjb25zdCB0b3RhbEFwcCA9IHN0YXRzLmNvbGxlZ2UuYXBwb3J0ICsgc3RhdHMubHljZWUuYXBwb3J0ICsgc3RhdHMubHljZWVfcHJvLmFwcG9ydCArIHN0YXRzLnBvbGUuYXBwb3J0OwogICAgY29uc3QgdG90YWxIU0EgPSBzdGF0cy5jb2xsZWdlLmhzYSArIHN0YXRzLmx5Y2VlLmhzYSArIHN0YXRzLmx5Y2VlX3Byby5oc2EgKyBzdGF0cy5wb2xlLmhzYTsKICAgIGNvbnN0IHRvdGFsUHJvZnMgPSBTSEFSRURfVEVBQ0hFUlMubGVuZ3RoOwogICAgCiAgICBrcGlEaXYuaW5uZXJIVE1MID0gYAogICAgICAgIDxkaXYgY2xhc3M9ImtwaS1ib3giIHN0eWxlPSJib3JkZXItY29sb3I6IzJjM2U1MDsiPgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJrcGktdGl0bGUiPkRvdGF0aW9uIFRvdGFsZTwvZGl2PgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJrcGktdmFsdWUiPiR7dG90YWxEb3R9IGg8L2Rpdj4KICAgICAgICAgICAgPHNtYWxsIHN0eWxlPSJjb2xvcjojOTk5OyBmb250LXNpemU6MC43cmVtOyI+NCBlbnRpdMOpcyBjdW11bMOpZXM8L3NtYWxsPgogICAgICAgIDwvZGl2PgogICAgICAgIDxkaXYgY2xhc3M9ImtwaS1ib3giIHN0eWxlPSJib3JkZXItY29sb3I6IzI3YWU2MDsiPgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJrcGktdGl0bGUiPkhldXJlcyBBdHRyaWJ1w6llczwvZGl2PgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJrcGktdmFsdWUiPiR7dG90YWxBcHAudG9GaXhlZCgxKX0gaDwvZGl2PgogICAgICAgIDwvZGl2PgogICAgICAgIDxkaXYgY2xhc3M9ImtwaS1ib3giIHN0eWxlPSJib3JkZXItY29sb3I6I2U2N2UyMjsiPgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJrcGktdGl0bGUiPkRvbnQgSFNBPC9kaXY+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImtwaS12YWx1ZSI+JHt0b3RhbEhTQS50b0ZpeGVkKDEpfSBoPC9kaXY+CiAgICAgICAgPC9kaXY+CiAgICAgICAgPGRpdiBjbGFzcz0ia3BpLWJveCIgc3R5bGU9ImJvcmRlci1jb2xvcjojMzQ5OGRiOyI+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImtwaS10aXRsZSI+RW5zZWlnbmFudHMgKHRvdGFsKTwvZGl2PgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJrcGktdmFsdWUiPiR7dG90YWxQcm9mc308L2Rpdj4KICAgICAgICAgICAgPHNtYWxsIHN0eWxlPSJjb2xvcjojOTk5OyBmb250LXNpemU6MC43cmVtOyI+ZGFucyBsYSBsaXN0ZSBnbG9iYWxlPC9zbWFsbD4KICAgICAgICA8L2Rpdj4KICAgIGA7CiAgICAKICAgIC8vIDIuIENBUkRTIFBBUiBFTlRJVMOJCiAgICBjb25zdCBjYXJkc0RpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdiaWxhbi1jYXJkcycpOwogICAgY29uc3QgZW50aXR5Q29sb3JzID0geyBjb2xsZWdlOiAnIzM0OThkYicsIGx5Y2VlOiAnIzI3YWU2MCcsIGx5Y2VlX3BybzogJyNkMzU0MDAnLCBwb2xlOiAnIzhlNDRhZCcgfTsKICAgIGNvbnN0IGVudGl0eUljb25zID0geyBjb2xsZWdlOiAn8J+PqycsIGx5Y2VlOiAn8J+Pm++4jycsIGx5Y2VlX3BybzogJ/Cfj60nLCBwb2xlOiAn8J+OkycgfTsKICAgIAogICAgY2FyZHNEaXYuaW5uZXJIVE1MID0gWydjb2xsZWdlJywnbHljZWUnLCdseWNlZV9wcm8nLCdwb2xlJ10ubWFwKGsgPT4gewogICAgICAgIGNvbnN0IHMgPSBzdGF0c1trXTsKICAgICAgICBjb25zdCBkID0gTVVMVElfREFUQVtrXTsKICAgICAgICBjb25zdCBjb2xvciA9IGVudGl0eUNvbG9yc1trXTsKICAgICAgICBjb25zdCBuYW1lID0gRU5USVRZX05BTUVTW2tdOwogICAgICAgIGNvbnN0IGljb24gPSBlbnRpdHlJY29uc1trXTsKICAgICAgICBjb25zdCBwcm9mcyA9IFNIQVJFRF9URUFDSEVSUy5maWx0ZXIodCA9PiB0LmVudGl0aWVzICYmIHQuZW50aXRpZXMuaW5jbHVkZXMoaykpLmxlbmd0aDsKICAgICAgICBjb25zdCBjbGFzc2VzID0gZCA/IE9iamVjdC5rZXlzKGQuY2xhc3NOYW1lcyB8fCB7fSkubGVuZ3RoIDogMDsKICAgICAgICBjb25zdCBkb3RhdGlvbiA9IGQ/LmNvbmZpZz8udG90YWwgfHwgMDsKICAgICAgICBjb25zdCBzb2xkZUNvbG9yID0gcy5zb2xkZSA+PSAwID8gJyMyN2FlNjAnIDogJyNjMDM5MmInOwogICAgICAgIAogICAgICAgIHJldHVybiBgPGRpdiBjbGFzcz0iY2FyZCIgc3R5bGU9ImJvcmRlci10b3A6NHB4IHNvbGlkICR7Y29sb3J9OyBtYXJnaW4tYm90dG9tOjA7Ij4KICAgICAgICAgICAgPGRpdiBzdHlsZT0iZm9udC1zaXplOjEuNXJlbTsgbWFyZ2luLWJvdHRvbTo1cHg7Ij4ke2ljb259PC9kaXY+CiAgICAgICAgICAgIDxoNCBzdHlsZT0ibWFyZ2luOjAgMCAxNXB4IDA7IGNvbG9yOiR7Y29sb3J9OyI+JHtuYW1lfTwvaDQ+CiAgICAgICAgICAgIDxkaXYgc3R5bGU9ImRpc3BsYXk6Z3JpZDsgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOjFmciAxZnI7IGdhcDo4cHg7IGZvbnQtc2l6ZTowLjg1cmVtOyI+CiAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJiYWNrZ3JvdW5kOiNmOGY5ZmE7IHBhZGRpbmc6OHB4OyBib3JkZXItcmFkaXVzOjVweDsiPgogICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9ImNvbG9yOiM4ODg7IGZvbnQtc2l6ZTowLjc1cmVtOyBmb250LXdlaWdodDo3MDA7Ij5ET1RBVElPTjwvZGl2PgogICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9ImZvbnQtd2VpZ2h0OjgwMDsgZm9udC1zaXplOjEuMXJlbTsgY29sb3I6IzJjM2U1MDsiPiR7ZG90YXRpb259IGg8L2Rpdj4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iYmFja2dyb3VuZDojZmRmMmU5OyBwYWRkaW5nOjhweDsgYm9yZGVyLXJhZGl1czo1cHg7Ij4KICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJjb2xvcjojODg4OyBmb250LXNpemU6MC43NXJlbTsgZm9udC13ZWlnaHQ6NzAwOyI+U09MREU8L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJmb250LXdlaWdodDo4MDA7IGZvbnQtc2l6ZToxLjFyZW07IGNvbG9yOiR7c29sZGVDb2xvcn07Ij4ke3Muc29sZGUgPj0gMCA/ICcrJyA6ICcnfSR7cy5zb2xkZS50b0ZpeGVkKDEpfSBoPC9kaXY+CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9ImJhY2tncm91bmQ6I2U4ZjhmNTsgcGFkZGluZzo4cHg7IGJvcmRlci1yYWRpdXM6NXB4OyI+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iY29sb3I6Izg4ODsgZm9udC1zaXplOjAuNzVyZW07IGZvbnQtd2VpZ2h0OjcwMDsiPlBST0ZTPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iZm9udC13ZWlnaHQ6ODAwOyBjb2xvcjojMmMzZTUwOyI+JHtwcm9mc308L2Rpdj4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iYmFja2dyb3VuZDojZWJmNWZiOyBwYWRkaW5nOjhweDsgYm9yZGVyLXJhZGl1czo1cHg7Ij4KICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJjb2xvcjojODg4OyBmb250LXNpemU6MC43NXJlbTsgZm9udC13ZWlnaHQ6NzAwOyI+Q0xBU1NFUzwvZGl2PgogICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9ImZvbnQtd2VpZ2h0OjgwMDsgY29sb3I6IzJjM2U1MDsiPiR7Y2xhc3Nlc308L2Rpdj4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICA8L2Rpdj5gOwogICAgfSkuam9pbignJyk7CiAgICAKICAgIC8vIDMuIFRBQkxFQVUgQ09OU09MSUTDiSBQQVIgQlVSRUFVIFBORQogICAgcmVuZGVyQmlsYW5CdXJlYXUoKTsKICAgIC8vIDQuIFRBQkxFQVUgRU5TRUlHTkFOVFMgw5cgRU5USVTDiVMKICAgIHJlbmRlckJpbGFuVGVhY2hlcnMoKTsKICAgIC8vIDUuIFLDiUNBUCBNQVRJw4hSRVMgQ1JPU1MtRU5USVTDiVMKICAgIHJlbmRlckJpbGFuU3ViamVjdHMoKTsKfQoKLyoqIFJlbmQgbGUgdGFibGVhdSBjb25zb2xpZMOpIHBhciBidXJlYXUgUE5FICovCmZ1bmN0aW9uIHJlbmRlckJpbGFuQnVyZWF1KCkgewogICAgY29uc3QgdGJvZHkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYmlsYW4tYnVyZWF1LWJvZHknKTsKICAgIGlmICghdGJvZHkpIHJldHVybjsKICAgIAogICAgLy8gQ29sbGVjdGVyIGxlcyBiZXNvaW5zIGRlIGNoYXF1ZSBlbnRpdMOpIHBhciBjb2RlIFBORQogICAgY29uc3QgbmVlZHNCeUNvZGUgPSB7fTsgLy8geyBjb2RlOiB7IGNvbGxlZ2U6IGgsIGx5Y2VlOiBoLCBwb2xlOiBoLCBsYWJlbDogJycgfSB9CiAgICAKICAgIFsnY29sbGVnZScsJ2x5Y2VlJywnbHljZWVfcHJvJywncG9sZSddLmZvckVhY2goayA9PiB7CiAgICAgICAgY29uc3QgZCA9IE1VTFRJX0RBVEFba107CiAgICAgICAgaWYgKCFkKSByZXR1cm47CiAgICAgICAgY29uc3QgbmVlZHMgPSBjYWxjRW50aXR5U3ViamVjdE5lZWRzKGQsIGspOwogICAgICAgIE9iamVjdC5lbnRyaWVzKG5lZWRzKS5mb3JFYWNoKChbc3ViamVjdCwgZGF0YV0pID0+IHsKICAgICAgICAgICAgY29uc3QgY29kZSA9IGRhdGEucG5lQ29kZSB8fCAnJzsKICAgICAgICAgICAgY29uc3Qga2V5ID0gY29kZSB8fCBzdWJqZWN0OwogICAgICAgICAgICBpZiAoIW5lZWRzQnlDb2RlW2tleV0pIG5lZWRzQnlDb2RlW2tleV0gPSB7IGNvZGUsIGxhYmVsOiBzdWJqZWN0LCBjb2xsZWdlOiAwLCBseWNlZTogMCwgbHljZWVfcHJvOiAwLCBwb2xlOiAwLCBhcHBDb2xsZWdlOiAwLCBhcHBMeWNlZTogMCwgYXBwTHljZWVfcHJvOiAwLCBhcHBQb2xlOiAwIH07CiAgICAgICAgICAgIG5lZWRzQnlDb2RlW2tleV1ba10gKz0gZGF0YS5uZWVkOwogICAgICAgICAgICBuZWVkc0J5Q29kZVtrZXldWydhcHAnK2suY2hhckF0KDApLnRvVXBwZXJDYXNlKCkray5zbGljZSgxKV0gKz0gZGF0YS5hcHA7CiAgICAgICAgfSk7CiAgICB9KTsKICAgIAogICAgLy8gR3JvdXBlciBwYXIgYnVyZWF1CiAgICBsZXQgaHRtbCA9ICcnOwogICAgCiAgICBPYmplY3QuZW50cmllcyhQTkVfQlVSRUFVWCkuZm9yRWFjaCgoW2J1cmVhdUlkLCBidXJlYXVdKSA9PiB7CiAgICAgICAgY29uc3QgYnVyZWF1Q29sb3IgPSBidXJlYXUuY29sb3I7CiAgICAgICAgbGV0IGJ1cmVhdUJlc29pblRvdGFsID0gMCwgYnVyZWF1QXBwb3J0VG90YWwgPSAwOwogICAgICAgIGxldCByb3dzSHRtbCA9ICcnOwogICAgICAgIAogICAgICAgIC8vIENoZXJjaGVyIGxlcyBtYXRpw6hyZXMgcXVpIGNvcnJlc3BvbmRlbnQgw6AgY2UgYnVyZWF1CiAgICAgICAgT2JqZWN0LmVudHJpZXMobmVlZHNCeUNvZGUpLmZvckVhY2goKFtrZXksIGRhdGFdKSA9PiB7CiAgICAgICAgICAgIGNvbnN0IGNvZGVCdXJlYXUgPSBnZXRCdXJlYXVGb3JDb2RlKGRhdGEuY29kZSk7CiAgICAgICAgICAgIGlmIChjb2RlQnVyZWF1ICE9PSBidXJlYXVJZCAmJiBkYXRhLmNvZGUpIHJldHVybjsKICAgICAgICAgICAgaWYgKCFkYXRhLmNvZGUgJiYgY29kZUJ1cmVhdSAhPT0gYnVyZWF1SWQpIHJldHVybjsKICAgICAgICAgICAgCiAgICAgICAgICAgIGNvbnN0IGJlc29pblRvdGFsID0gKGRhdGEuY29sbGVnZXx8MCkgKyAoZGF0YS5seWNlZXx8MCkgKyAoZGF0YS5seWNlZV9wcm98fDApICsgKGRhdGEucG9sZXx8MCk7CiAgICAgICAgICAgIGNvbnN0IGFwcG9ydFRvdGFsID0gKGRhdGEuYXBwQ29sbGVnZXx8MCkgKyAoZGF0YS5hcHBMeWNlZXx8MCkgKyAoZGF0YS5hcHBMeWNlZV9wcm98fDApICsgKGRhdGEuYXBwUG9sZXx8MCk7CiAgICAgICAgICAgIGlmIChiZXNvaW5Ub3RhbCA9PT0gMCAmJiBhcHBvcnRUb3RhbCA9PT0gMCkgcmV0dXJuOwogICAgICAgICAgICAKICAgICAgICAgICAgYnVyZWF1QmVzb2luVG90YWwgKz0gYmVzb2luVG90YWw7CiAgICAgICAgICAgIGJ1cmVhdUFwcG9ydFRvdGFsICs9IGFwcG9ydFRvdGFsOwogICAgICAgICAgICBjb25zdCBlY2FydCA9IGFwcG9ydFRvdGFsIC0gYmVzb2luVG90YWw7CiAgICAgICAgICAgIGNvbnN0IGVjYXJ0Q29sb3IgPSBlY2FydCA+PSAwID8gJyMyN2FlNjAnIDogJyNjMDM5MmInOwogICAgICAgICAgICAKICAgICAgICAgICAgcm93c0h0bWwgKz0gYDx0ciBzdHlsZT0iYm9yZGVyLWJvdHRvbToxcHggc29saWQgI2YwZjBmMDsiPgogICAgICAgICAgICAgICAgPHRkIHN0eWxlPSJwYWRkaW5nOjdweCA4cHggN3B4IDI1cHg7IGZvbnQtc2l6ZTowLjgzcmVtOyI+JHtkYXRhLmNvZGUgPyBgPHNwYW4gc3R5bGU9ImZvbnQtZmFtaWx5Om1vbm9zcGFjZTtmb250LXNpemU6MC43NXJlbTtiYWNrZ3JvdW5kOiNmMGYwZjA7cGFkZGluZzoxcHggNHB4O2JvcmRlci1yYWRpdXM6MnB4O21hcmdpbi1yaWdodDo2cHg7Ij4ke2RhdGEuY29kZX08L3NwYW4+YCA6ICcnfSR7ZGF0YS5sYWJlbH08L3RkPgogICAgICAgICAgICAgICAgPHRkIHN0eWxlPSJ0ZXh0LWFsaWduOmNlbnRlcjsgcGFkZGluZzo3cHg7IGNvbG9yOiMyOTgwYjk7IGZvbnQtd2VpZ2h0OjYwMDsiPiR7ZGF0YS5jb2xsZWdlID4gMCA/IGRhdGEuY29sbGVnZS50b0ZpeGVkKDEpIDogJ+KAkyd9PC90ZD4KICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT0idGV4dC1hbGlnbjpjZW50ZXI7IHBhZGRpbmc6N3B4OyBjb2xvcjojMWU4NDQ5OyBmb250LXdlaWdodDo2MDA7Ij4ke2RhdGEubHljZWUgPiAwID8gZGF0YS5seWNlZS50b0ZpeGVkKDEpIDogJ+KAkyd9PC90ZD4KICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT0idGV4dC1hbGlnbjpjZW50ZXI7IHBhZGRpbmc6N3B4OyBjb2xvcjojZDM1NDAwOyBmb250LXdlaWdodDo2MDA7Ij4ke2RhdGEubHljZWVfcHJvID4gMCA/IGRhdGEubHljZWVfcHJvLnRvRml4ZWQoMSkgOiAn4oCTJ308L3RkPgogICAgICAgICAgICAgICAgPHRkIHN0eWxlPSJ0ZXh0LWFsaWduOmNlbnRlcjsgcGFkZGluZzo3cHg7IGNvbG9yOiM3ZDNjOTg7IGZvbnQtd2VpZ2h0OjYwMDsiPiR7ZGF0YS5wb2xlID4gMCA/IGRhdGEucG9sZS50b0ZpeGVkKDEpIDogJ+KAkyd9PC90ZD4KICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT0idGV4dC1hbGlnbjpjZW50ZXI7IHBhZGRpbmc6N3B4OyBiYWNrZ3JvdW5kOiNmZmY1ZjU7IGZvbnQtd2VpZ2h0OjcwMDsgY29sb3I6I2MwMzkyYjsiPiR7YmVzb2luVG90YWwudG9GaXhlZCgxKX08L3RkPgogICAgICAgICAgICAgICAgPHRkIHN0eWxlPSJ0ZXh0LWFsaWduOmNlbnRlcjsgcGFkZGluZzo3cHg7IGJhY2tncm91bmQ6I2YwZmZmNDsgZm9udC13ZWlnaHQ6NzAwOyBjb2xvcjojMTZhMDg1OyI+JHthcHBvcnRUb3RhbC50b0ZpeGVkKDEpfTwvdGQ+CiAgICAgICAgICAgICAgICA8dGQgc3R5bGU9InRleHQtYWxpZ246Y2VudGVyOyBwYWRkaW5nOjdweDsgZm9udC13ZWlnaHQ6ODAwOyBjb2xvcjoke2VjYXJ0Q29sb3J9OyI+JHtlY2FydCA+PSAwID8gJysnIDogJyd9JHtlY2FydC50b0ZpeGVkKDEpfTwvdGQ+CiAgICAgICAgICAgIDwvdHI+YDsKICAgICAgICB9KTsKICAgICAgICAKICAgICAgICBpZiAoIXJvd3NIdG1sKSByZXR1cm47IC8vIE5lIHBhcyBhZmZpY2hlciBsZXMgYnVyZWF1eCBzYW5zIGRvbm7DqWVzCiAgICAgICAgCiAgICAgICAgY29uc3QgZWNhcnRCdXJlYXUgPSBidXJlYXVBcHBvcnRUb3RhbCAtIGJ1cmVhdUJlc29pblRvdGFsOwogICAgICAgIGh0bWwgKz0gYDx0ciBzdHlsZT0iYmFja2dyb3VuZDoke2J1cmVhdUNvbG9yfTIwOyBib3JkZXItdG9wOjJweCBzb2xpZCAke2J1cmVhdUNvbG9yfTsiPgogICAgICAgICAgICA8dGQgY29sc3Bhbj0iOCIgc3R5bGU9InBhZGRpbmc6OXB4IDEycHg7IGZvbnQtd2VpZ2h0OjcwMDsgY29sb3I6JHtidXJlYXVDb2xvcn07IGZvbnQtc2l6ZTowLjg4cmVtOyI+CiAgICAgICAgICAgICAgICAke2J1cmVhdUlkfSDigJMgJHtidXJlYXUubGFiZWx9CiAgICAgICAgICAgICAgICA8c3BhbiBzdHlsZT0iZmxvYXQ6cmlnaHQ7IGZvbnQtc2l6ZTowLjhyZW07IGNvbG9yOiM1NTU7Ij4KICAgICAgICAgICAgICAgICAgICBCZXNvaW4gOiA8c3Ryb25nPiR7YnVyZWF1QmVzb2luVG90YWwudG9GaXhlZCgxKX1oPC9zdHJvbmc+ICZuYnNwO3wmbmJzcDsgCiAgICAgICAgICAgICAgICAgICAgQXBwb3J0IDogPHN0cm9uZz4ke2J1cmVhdUFwcG9ydFRvdGFsLnRvRml4ZWQoMSl9aDwvc3Ryb25nPiAmbmJzcDt8Jm5ic3A7CiAgICAgICAgICAgICAgICAgICAgw4ljYXJ0IDogPHN0cm9uZyBzdHlsZT0iY29sb3I6JHtlY2FydEJ1cmVhdT49MD8nIzI3YWU2MCc6JyNjMDM5MmInfSI+JHtlY2FydEJ1cmVhdT49MD8nKyc6Jyd9JHtlY2FydEJ1cmVhdS50b0ZpeGVkKDEpfWg8L3N0cm9uZz4KICAgICAgICAgICAgICAgIDwvc3Bhbj4KICAgICAgICAgICAgPC90ZD4KICAgICAgICA8L3RyPiR7cm93c0h0bWx9YDsKICAgIH0pOwogICAgCiAgICAvLyBNYXRpw6hyZXMgc2FucyBjb2RlIFBORQogICAgbGV0IHVua25vd25IdG1sID0gJyc7CiAgICBPYmplY3QuZW50cmllcyhuZWVkc0J5Q29kZSkuZm9yRWFjaCgoW2tleSwgZGF0YV0pID0+IHsKICAgICAgICBpZiAoZGF0YS5jb2RlICYmIGdldEJ1cmVhdUZvckNvZGUoZGF0YS5jb2RlKSkgcmV0dXJuOwogICAgICAgIGNvbnN0IGJlc29pblRvdGFsID0gKGRhdGEuY29sbGVnZXx8MCkgKyAoZGF0YS5seWNlZXx8MCkgKyAoZGF0YS5seWNlZV9wcm98fDApICsgKGRhdGEucG9sZXx8MCk7CiAgICAgICAgY29uc3QgYXBwb3J0VG90YWwgPSAoZGF0YS5hcHBDb2xsZWdlfHwwKSArIChkYXRhLmFwcEx5Y2VlfHwwKSArIChkYXRhLmFwcEx5Y2VlX3Byb3x8MCkgKyAoZGF0YS5hcHBQb2xlfHwwKTsKICAgICAgICBpZiAoYmVzb2luVG90YWwgPT09IDAgJiYgYXBwb3J0VG90YWwgPT09IDApIHJldHVybjsKICAgICAgICBjb25zdCBlY2FydCA9IGFwcG9ydFRvdGFsIC0gYmVzb2luVG90YWw7CiAgICAgICAgdW5rbm93bkh0bWwgKz0gYDx0ciBzdHlsZT0iYm9yZGVyLWJvdHRvbToxcHggc29saWQgI2YwZjBmMDsiPgogICAgICAgICAgICA8dGQgc3R5bGU9InBhZGRpbmc6N3B4IDhweCA3cHggMjVweDsgZm9udC1zaXplOjAuODNyZW07IGNvbG9yOiNhYWE7Ij4ke2RhdGEubGFiZWx9IDxlbSBzdHlsZT0iZm9udC1zaXplOjAuN3JlbTsiPihjb2RlIG5vbiByZW5zZWlnbsOpKTwvZW0+PC90ZD4KICAgICAgICAgICAgPHRkIHN0eWxlPSJ0ZXh0LWFsaWduOmNlbnRlcjsgcGFkZGluZzo3cHg7IGNvbG9yOiMyOTgwYjk7Ij4ke2RhdGEuY29sbGVnZSA+IDAgPyBkYXRhLmNvbGxlZ2UudG9GaXhlZCgxKSA6ICfigJMnfTwvdGQ+CiAgICAgICAgICAgIDx0ZCBzdHlsZT0idGV4dC1hbGlnbjpjZW50ZXI7IHBhZGRpbmc6N3B4OyBjb2xvcjojMWU4NDQ5OyI+JHtkYXRhLmx5Y2VlID4gMCA/IGRhdGEubHljZWUudG9GaXhlZCgxKSA6ICfigJMnfTwvdGQ+CiAgICAgICAgICAgIDx0ZCBzdHlsZT0idGV4dC1hbGlnbjpjZW50ZXI7IHBhZGRpbmc6N3B4OyBjb2xvcjojZDM1NDAwOyI+JHtkYXRhLmx5Y2VlX3BybyA+IDAgPyBkYXRhLmx5Y2VlX3Byby50b0ZpeGVkKDEpIDogJ+KAkyd9PC90ZD4KICAgICAgICAgICAgPHRkIHN0eWxlPSJ0ZXh0LWFsaWduOmNlbnRlcjsgcGFkZGluZzo3cHg7IGNvbG9yOiM3ZDNjOTg7Ij4ke2RhdGEucG9sZSA+IDAgPyBkYXRhLnBvbGUudG9GaXhlZCgxKSA6ICfigJMnfTwvdGQ+CiAgICAgICAgICAgIDx0ZCBzdHlsZT0idGV4dC1hbGlnbjpjZW50ZXI7IHBhZGRpbmc6N3B4OyBiYWNrZ3JvdW5kOiNmZmY1ZjU7IGZvbnQtd2VpZ2h0OjcwMDsgY29sb3I6I2MwMzkyYjsiPiR7YmVzb2luVG90YWwudG9GaXhlZCgxKX08L3RkPgogICAgICAgICAgICA8dGQgc3R5bGU9InRleHQtYWxpZ246Y2VudGVyOyBwYWRkaW5nOjdweDsgYmFja2dyb3VuZDojZjBmZmY0OyBmb250LXdlaWdodDo3MDA7IGNvbG9yOiMxNmEwODU7Ij4ke2FwcG9ydFRvdGFsLnRvRml4ZWQoMSl9PC90ZD4KICAgICAgICAgICAgPHRkIHN0eWxlPSJ0ZXh0LWFsaWduOmNlbnRlcjsgcGFkZGluZzo3cHg7IGZvbnQtd2VpZ2h0OjgwMDsgY29sb3I6JHtlY2FydD49MD8nIzI3YWU2MCc6JyNjMDM5MmInfTsiPiR7ZWNhcnQ+PTA/JysnOicnfSR7ZWNhcnQudG9GaXhlZCgxKX08L3RkPgogICAgICAgIDwvdHI+YDsKICAgIH0pOwogICAgaWYgKHVua25vd25IdG1sKSB7CiAgICAgICAgaHRtbCArPSBgPHRyIHN0eWxlPSJiYWNrZ3JvdW5kOiNmOGY5ZmE7IGJvcmRlci10b3A6MnB4IHNvbGlkICNiZGMzYzc7Ij4KICAgICAgICAgICAgPHRkIGNvbHNwYW49IjgiIHN0eWxlPSJwYWRkaW5nOjlweCAxMnB4OyBmb250LXdlaWdodDo3MDA7IGNvbG9yOiM3ZjhjOGQ7Ij7inZMgTWF0acOocmVzIHNhbnMgY29kZSBQTkU8L3RkPgogICAgICAgIDwvdHI+JHt1bmtub3duSHRtbH1gOwogICAgfQogICAgCiAgICB0Ym9keS5pbm5lckhUTUwgPSBodG1sIHx8ICc8dHI+PHRkIGNvbHNwYW49IjgiIHN0eWxlPSJ0ZXh0LWFsaWduOmNlbnRlcjsgcGFkZGluZzoyMHB4OyBjb2xvcjojYWFhOyI+QXVjdW5lIGRvbm7DqWUgZGlzcG9uaWJsZSDigJMgcmVuc2VpZ25leiBsZXMgY29kZXMgUE5FIGRhbnMgbGVzIG1hdGnDqHJlczwvdGQ+PC90cj4nOwp9CgovLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ci8vIEVOU0VJR05BTlRTIE1VVFVBTElTw4lTIOKAkyBnZXN0aW9uIFVJCi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KCi8qKiBQZXVwbGUgbGUgc2VsZWN0IGRlcyBjb2RlcyBQTkUgZGFucyBsZSBtb2RhbCAqLwpmdW5jdGlvbiBwb3B1bGF0ZVBuZVNlbGVjdCgpIHsKICAgIGNvbnN0IHNlbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzdC1wbmUtY29kZScpOwogICAgaWYgKCFzZWwpIHJldHVybjsKICAgIGxldCBodG1sID0gJzxvcHRpb24gdmFsdWU9IiI+LS0gU8OpbGVjdGlvbm5lciAtLTwvb3B0aW9uPic7CiAgICBPYmplY3QuZW50cmllcyhQTkVfQlVSRUFVWCkuZm9yRWFjaCgoW2J1cmVhdUlkLCBidXJlYXVdKSA9PiB7CiAgICAgICAgaHRtbCArPSBgPG9wdGdyb3VwIGxhYmVsPSIke2J1cmVhdS5sYWJlbH0iPmA7CiAgICAgICAgT2JqZWN0LmVudHJpZXMoYnVyZWF1LmRpc2NpcGxpbmVzKS5mb3JFYWNoKChbY29kZSwgbGFiZWxdKSA9PiB7CiAgICAgICAgICAgIGh0bWwgKz0gYDxvcHRpb24gdmFsdWU9IiR7Y29kZX0iPiR7Y29kZX0g4oCTICR7bGFiZWx9PC9vcHRpb24+YDsKICAgICAgICB9KTsKICAgICAgICBodG1sICs9ICc8L29wdGdyb3VwPic7CiAgICB9KTsKICAgIHNlbC5pbm5lckhUTUwgPSBodG1sOwp9CgpmdW5jdGlvbiB1cGRhdGVTdEJ1cmVhdURpc3BsYXkoKSB7CiAgICBjb25zdCBjb2RlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N0LXBuZS1jb2RlJykudmFsdWU7CiAgICBjb25zdCBkaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3QtYnVyZWF1LWRpc3BsYXknKTsKICAgIGlmICghZGl2KSByZXR1cm47IC8vIENoYW1wIGJ1cmVhdSBzdXBwcmltw6kgZHUgbW9kYWwKICAgIGlmICghY29kZSkgeyBkaXYudGV4dENvbnRlbnQgPSAn4oCTJzsgcmV0dXJuOyB9CiAgICBjb25zdCBidXJlYXVJZCA9IGdldEJ1cmVhdUZvckNvZGUoY29kZSk7CiAgICBpZiAoYnVyZWF1SWQpIHsKICAgICAgICBjb25zdCBiID0gUE5FX0JVUkVBVVhbYnVyZWF1SWRdOwogICAgICAgIGRpdi5pbm5lckhUTUwgPSBgPHNwYW4gc3R5bGU9ImJhY2tncm91bmQ6JHtiLmNvbG9yfTMwOyBjb2xvcjoke2IuY29sb3J9OyBmb250LXdlaWdodDo3MDA7IHBhZGRpbmc6MnB4IDhweDsgYm9yZGVyLXJhZGl1czo0cHg7IGZvbnQtc2l6ZTowLjgycmVtOyI+JHtidXJlYXVJZH08L3NwYW4+ICR7Yi5sYWJlbH1gOwogICAgfSBlbHNlIHsKICAgICAgICBkaXYudGV4dENvbnRlbnQgPSAnQ29kZSBub24gcmVjb25udSc7CiAgICB9Cn0KCmZ1bmN0aW9uIHVwZGF0ZVN0UmVzdGUoKSB7CiAgICBjb25zdCBvcnMgPSBwYXJzZUZsb2F0KGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzdC1vcnMnKS52YWx1ZSkgfHwgMDsKICAgIGNvbnN0IGhDICA9IHBhcnNlRmxvYXQoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N0LWgtY29sbGVnZScpLnZhbHVlKSB8fCAwOwogICAgY29uc3QgaEwgID0gcGFyc2VGbG9hdChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3QtaC1seWNlZScpLnZhbHVlKSB8fCAwOwogICAgY29uc3QgaExQID0gcGFyc2VGbG9hdChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3QtaC1seWNlZS1wcm8nKT8udmFsdWUpIHx8IDA7CiAgICBjb25zdCBoUCAgPSBwYXJzZUZsb2F0KGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzdC1oLXBvbGUnKS52YWx1ZSkgfHwgMDsKICAgIGNvbnN0IHRvdGFsID0gaEMgKyBoTCArIGhMUCArIGhQOwogICAgY29uc3QgcmVzdGUgPSBvcnMgLSB0b3RhbDsKICAgIC8vIE1ldHRyZSDDoCBqb3VyIGxlcyBhZmZpY2hhZ2VzIHBhciBlbnRpdMOpIChsZWN0dXJlIHNldWxlKQogICAgY29uc3QgZm10ID0gdiA9PiB2ID4gMCA/IHYgKyAnaCcgOiAn4oCTJzsKICAgIGNvbnN0IGRpc3BDID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N0LWRpc3AtY29sbGVnZScpOwogICAgY29uc3QgZGlzcEwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3QtZGlzcC1seWNlZScpOwogICAgY29uc3QgZGlzcExQID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N0LWRpc3AtbHljZWUtcHJvJyk7CiAgICBjb25zdCBkaXNwUCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzdC1kaXNwLXBvbGUnKTsKICAgIGlmIChkaXNwQykgZGlzcEMudGV4dENvbnRlbnQgPSBmbXQoaEMpOwogICAgaWYgKGRpc3BMKSBkaXNwTC50ZXh0Q29udGVudCA9IGZtdChoTCk7CiAgICBpZiAoZGlzcExQKSBkaXNwTFAudGV4dENvbnRlbnQgPSBmbXQoaExQKTsKICAgIGlmIChkaXNwUCkgZGlzcFAudGV4dENvbnRlbnQgPSBmbXQoaFApOwogICAgY29uc3QgZGl2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N0LXJlc3RlLWRpc3BsYXknKTsKICAgIGlmIChkaXYpIHsKICAgICAgICBjb25zdCBjb2wgPSByZXN0ZSA+IDAgPyAnI2U2N2UyMicgOiAocmVzdGUgPT09IDAgPyAnIzI3YWU2MCcgOiAnI2MwMzkyYicpOwogICAgICAgIGRpdi5pbm5lckhUTUwgPSBgVG90YWwgYWZmZWN0w6kgOiA8c3Ryb25nPiR7dG90YWx9aDwvc3Ryb25nPiAvIE9SUyA6IDxzdHJvbmc+JHtvcnN9aDwvc3Ryb25nPiAmbmJzcDvihpIgUmVzdGUgOiA8c3Ryb25nIHN0eWxlPSJjb2xvcjoke2NvbH0iPiR7cmVzdGUgPj0gMCA/ICcrJyA6ICcnfSR7cmVzdGV9aDwvc3Ryb25nPmA7CiAgICB9Cn0KCmZ1bmN0aW9uIHN0RW50aXR5Q2hlY2tDaGFuZ2UoKSB7CiAgICAvLyBNZXQgw6Agam91ciBsJ2FwcGFyZW5jZSBkZXMgY2FzZXMgKGJvcmR1cmUgYWN0aXZlIHNpIGNvY2jDqWUpCiAgICBbJ2NvbGxlZ2UnLCdseWNlZScsJ2x5Y2VlX3BybycsJ3BvbGUnXS5mb3JFYWNoKGsgPT4gewogICAgICAgIGNvbnN0IGNoayA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzdC1lbnRpdHktJyArIGspOwogICAgICAgIGNvbnN0IGxibCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzdC1lbnRpdHktbGJsLScgKyBrKTsKICAgICAgICBpZiAoY2hrICYmIGxibCkgewogICAgICAgICAgICBjb25zdCBjb2xvcnMgPSB7Y29sbGVnZTonIzI5ODBiOScsIGx5Y2VlOicjMWU4NDQ5JywgbHljZWVfcHJvOicjZDM1NDAwJywgcG9sZTonIzdkM2M5OCd9OwogICAgICAgICAgICBsYmwuc3R5bGUuYm9yZGVyV2lkdGggPSBjaGsuY2hlY2tlZCA/ICcyLjVweCcgOiAnMnB4JzsKICAgICAgICAgICAgbGJsLnN0eWxlLmJvcmRlckNvbG9yID0gY2hrLmNoZWNrZWQgPyBjb2xvcnNba10gOiB7Y29sbGVnZTonI2FlZDZmMScsIGx5Y2VlOicjYTlkZmJmJywgbHljZWVfcHJvOicjZjBiMjdhJywgcG9sZTonI2MzOWJkMyd9W2tdOwogICAgICAgICAgICBsYmwuc3R5bGUuYm94U2hhZG93ID0gY2hrLmNoZWNrZWQgPyAnMCAwIDAgMnB4ICcgKyBjb2xvcnNba10gKyAnMzMnIDogJ25vbmUnOwogICAgICAgIH0KICAgIH0pOwogICAgc3RVcGRhdGVTdWJqZWN0c1BlckVudGl0eSgpOwp9CgovLyBBZmZpY2hlL21hc3F1ZSBsZXMgY2hhbXBzIGRpc2NpcGxpbmUgcGFyIGVudGl0w6kgc2Vsb24gbGVzIGNhc2VzIGNvY2jDqWVzCmZ1bmN0aW9uIHN0VXBkYXRlU3ViamVjdHNQZXJFbnRpdHkoKSB7CiAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3Qtc3ViamVjdHMtcGVyLWVudGl0eScpOwogICAgaWYgKCFjb250YWluZXIpIHJldHVybjsKICAgIGNvbnN0IGVudGl0eU5hbWVzID0ge2NvbGxlZ2U6J/Cfj6sgQ29sbMOoZ2UnLCBseWNlZTon8J+Pm++4jyBMeWPDqWUnLCBseWNlZV9wcm86J/Cfj60gTHljw6llIFBybycsIHBvbGU6J/CfjpMgUMO0bGUgU3VwLid9OwogICAgY29uc3QgZW50aXR5Q29sb3JzID0ge2NvbGxlZ2U6JyMyOTgwYjknLCBseWNlZTonIzFlODQ0OScsIGx5Y2VlX3BybzonI2QzNTQwMCcsIHBvbGU6JyM3ZDNjOTgnfTsKICAgIGNvbnN0IGNoZWNrZWRFbnRpdGllcyA9IHN0R2V0RW50aXR5Q2hlY2tib3hlcygpOwogICAgLy8gU2F1dmVnYXJkZXIgbGVzIHZhbGV1cnMgYWN0dWVsbGVzIGF2YW50IGRlIHJlLXJlbmRyZQogICAgY29uc3QgY3VycmVudFZhbHMgPSB7fTsKICAgIFsnY29sbGVnZScsJ2x5Y2VlJywnbHljZWVfcHJvJywncG9sZSddLmZvckVhY2goayA9PiB7CiAgICAgICAgY29uc3QgZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3Qtc3Viai0nICsgayk7CiAgICAgICAgaWYgKGVsKSBjdXJyZW50VmFsc1trXSA9IGVsLnZhbHVlOwogICAgfSk7CiAgICBpZiAoY2hlY2tlZEVudGl0aWVzLmxlbmd0aCA8PSAxKSB7CiAgICAgICAgY29udGFpbmVyLmlubmVySFRNTCA9ICcnOwogICAgICAgIHJldHVybjsKICAgIH0KICAgIGNvbnRhaW5lci5pbm5lckhUTUwgPSBjaGVja2VkRW50aXRpZXMubWFwKGsgPT4gYAogICAgICAgIDxkaXYgc3R5bGU9ImRpc3BsYXk6ZmxleDsgYWxpZ24taXRlbXM6Y2VudGVyOyBnYXA6OHB4OyI+CiAgICAgICAgICAgIDxzcGFuIHN0eWxlPSJmb250LXNpemU6MC43OHJlbTsgZm9udC13ZWlnaHQ6NzAwOyBjb2xvcjoke2VudGl0eUNvbG9yc1trXX07IG1pbi13aWR0aDo4MHB4OyI+JHtlbnRpdHlOYW1lc1trXX08L3NwYW4+CiAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiBpZD0ic3Qtc3Viai0ke2t9IiBwbGFjZWhvbGRlcj0iRGlzY2lwbGluZSBwb3VyICR7ZW50aXR5TmFtZXNba119IgogICAgICAgICAgICAgICAgdmFsdWU9IiR7Y3VycmVudFZhbHNba10gfHwgJyd9IgogICAgICAgICAgICAgICAgc3R5bGU9ImZsZXg6MTsgcGFkZGluZzo0cHggOHB4OyBib3JkZXI6MS41cHggc29saWQgJHtlbnRpdHlDb2xvcnNba119NTU7IGJvcmRlci1yYWRpdXM6NXB4OyBmb250LXNpemU6MC44MnJlbTsiPgogICAgICAgIDwvZGl2PmApLmpvaW4oJycpOwp9CgovLyBSZXRvdXJuZSBsZSBkaWN0IHN1YmplY3Rze2VudGl0eUtleTogZGlzY2lwbGluZX0gZGVwdWlzIGxlIG1vZGFsCmZ1bmN0aW9uIHN0R2V0U3ViamVjdHNQZXJFbnRpdHkoKSB7CiAgICBjb25zdCBjaGVja2VkRW50aXRpZXMgPSBzdEdldEVudGl0eUNoZWNrYm94ZXMoKTsKICAgIGNvbnN0IG1haW5TdWJqZWN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N0LXN1YmplY3QnKS52YWx1ZS50cmltKCk7CiAgICBjb25zdCBzdWJqZWN0cyA9IHt9OwogICAgY2hlY2tlZEVudGl0aWVzLmZvckVhY2goayA9PiB7CiAgICAgICAgY29uc3QgZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3Qtc3Viai0nICsgayk7CiAgICAgICAgc3ViamVjdHNba10gPSAoZWwgJiYgZWwudmFsdWUudHJpbSgpKSA/IGVsLnZhbHVlLnRyaW0oKSA6IG1haW5TdWJqZWN0OwogICAgfSk7CiAgICByZXR1cm4gc3ViamVjdHM7Cn0KCi8vIENoYXJnZSBsZXMgZGlzY2lwbGluZXMgcGFyIGVudGl0w6kgZGFucyBsZSBtb2RhbCAow6lkaXRpb24pCmZ1bmN0aW9uIHN0TG9hZFN1YmplY3RzUGVyRW50aXR5KHQpIHsKICAgIC8vIEQnYWJvcmQgZMOpY2xlbmNoZXIgbGUgcmVuZHUgZGVzIGNoYW1wcwogICAgc3RVcGRhdGVTdWJqZWN0c1BlckVudGl0eSgpOwogICAgLy8gUHVpcyByZW1wbGlyIGxlcyB2YWxldXJzCiAgICBjb25zdCBzdWJqZWN0cyA9IHQuc3ViamVjdHMgfHwge307CiAgICBbJ2NvbGxlZ2UnLCdseWNlZScsJ2x5Y2VlX3BybycsJ3BvbGUnXS5mb3JFYWNoKGsgPT4gewogICAgICAgIGNvbnN0IGVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N0LXN1YmotJyArIGspOwogICAgICAgIGlmIChlbCkgZWwudmFsdWUgPSBzdWJqZWN0c1trXSB8fCB0LnN1YmplY3QgfHwgJyc7CiAgICB9KTsKfQoKZnVuY3Rpb24gc3RTZXRFbnRpdHlDaGVja2JveGVzKGVudGl0aWVzKSB7CiAgICBbJ2NvbGxlZ2UnLCdseWNlZScsJ2x5Y2VlX3BybycsJ3BvbGUnXS5mb3JFYWNoKGsgPT4gewogICAgICAgIGNvbnN0IGNoayA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzdC1lbnRpdHktJyArIGspOwogICAgICAgIGlmIChjaGspIGNoay5jaGVja2VkID0gZW50aXRpZXMgPyBlbnRpdGllcy5pbmNsdWRlcyhrKSA6IGZhbHNlOwogICAgfSk7CiAgICBzdEVudGl0eUNoZWNrQ2hhbmdlKCk7Cn0KCmZ1bmN0aW9uIHN0R2V0RW50aXR5Q2hlY2tib3hlcygpIHsKICAgIHJldHVybiBbJ2NvbGxlZ2UnLCdseWNlZScsJ2x5Y2VlX3BybycsJ3BvbGUnXS5maWx0ZXIoayA9PiB7CiAgICAgICAgY29uc3QgY2hrID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N0LWVudGl0eS0nICsgayk7CiAgICAgICAgcmV0dXJuIGNoayAmJiBjaGsuY2hlY2tlZDsKICAgIH0pOwp9CgpmdW5jdGlvbiBzdFNob3dIb3Vyc0luTGFiZWxzKHQpIHsKICAgIC8vIEFmZmljaGUgbGVzIGhldXJlcyBkw6lqw6AgYXNzaWduw6llcyDDoCBjw7R0w6kgZGUgY2hhcXVlIGVudGl0w6kKICAgIGNvbnN0IGtleXMgPSB7Y29sbGVnZTonc3QtZGlzcC1jb2xsZWdlJywgbHljZWU6J3N0LWRpc3AtbHljZWUnLCBseWNlZV9wcm86J3N0LWRpc3AtbHljZWUtcHJvJywgcG9sZTonc3QtZGlzcC1wb2xlJ307CiAgICBbJ2NvbGxlZ2UnLCdseWNlZScsJ2x5Y2VlX3BybycsJ3BvbGUnXS5mb3JFYWNoKGsgPT4gewogICAgICAgIGNvbnN0IGVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoa2V5c1trXSk7CiAgICAgICAgaWYgKCFlbCkgcmV0dXJuOwogICAgICAgIGNvbnN0IGggPSB0ICYmIHQuc2VydmljZXMgJiYgdC5zZXJ2aWNlc1trXSA+IDAgPyB0LnNlcnZpY2VzW2tdICsgJ2gnIDogJyc7CiAgICAgICAgZWwudGV4dENvbnRlbnQgPSBoOwogICAgfSk7Cn0KCmZ1bmN0aW9uIG9wZW5BZGRTaGFyZWRUZWFjaGVyKCkgewogICAgcG9wdWxhdGVQbmVTZWxlY3QoKTsKICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzdC1pZCcpLnZhbHVlID0gJyc7CiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3QtbmFtZScpLnZhbHVlID0gJyc7CiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3QtZ3JhZGUnKS52YWx1ZSA9ICcnOwogICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N0LWVtYWlsJykudmFsdWUgPSAnJzsKICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzdC1zdWJqZWN0JykudmFsdWUgPSAnJzsKICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzdC1wbmUtY29kZScpLnZhbHVlID0gJyc7CiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3Qtb3JzJykudmFsdWUgPSAxODsKICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzdC1oLWNvbGxlZ2UnKS52YWx1ZSA9IDA7CiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3QtaC1seWNlZScpLnZhbHVlID0gMDsKICAgIGlmKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzdC1oLWx5Y2VlLXBybycpKSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3QtaC1seWNlZS1wcm8nKS52YWx1ZSA9IDA7CiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3QtaC1wb2xlJykudmFsdWUgPSAwOwogICAgLy8gQ29jaGVyIGwnZW50aXTDqSBjb3VyYW50ZSBwYXIgZMOpZmF1dAogICAgc3RTZXRFbnRpdHlDaGVja2JveGVzKFtjdXJyZW50RW50aXR5XSk7CiAgICBzdFNob3dIb3Vyc0luTGFiZWxzKG51bGwpOwogICAgc3RVcGRhdGVTdWJqZWN0c1BlckVudGl0eSgpOyAvLyBBZmZpY2hlciBsZXMgY2hhbXBzIGRpc2NpcGxpbmUgcGFyIGVudGl0w6kKICAgIHVwZGF0ZVN0QnVyZWF1RGlzcGxheSgpOwogICAgdXBkYXRlU3RSZXN0ZSgpOwogICAgY29uc3Qgb3ZlcmxheSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzaGFyZWQtdGVhY2hlci1vdmVybGF5Jyk7CiAgICBvdmVybGF5LnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7Cn0KCmZ1bmN0aW9uIGVkaXRTaGFyZWRUZWFjaGVyKGlkKSB7CiAgICBwb3B1bGF0ZVBuZVNlbGVjdCgpOwogICAgY29uc3QgdCA9IFNIQVJFRF9URUFDSEVSUy5maW5kKHQgPT4gdC5pZCA9PT0gaWQpOwogICAgaWYgKCF0KSByZXR1cm47CiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3QtaWQnKS52YWx1ZSA9IHQuaWQ7CiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3QtbmFtZScpLnZhbHVlID0gdC5uYW1lIHx8ICcnOwogICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N0LWdyYWRlJykudmFsdWUgPSB0LmdyYWRlIHx8ICcnOwogICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N0LWVtYWlsJykudmFsdWUgPSB0LmVtYWlsIHx8ICcnOwogICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N0LXN1YmplY3QnKS52YWx1ZSA9IHQuc3ViamVjdCB8fCAnJzsKICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzdC1wbmUtY29kZScpLnZhbHVlID0gdC5wbmVDb2RlIHx8ICcnOwogICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N0LW9ycycpLnZhbHVlID0gdC5vcnMgfHwgMTg7CiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3QtaC1jb2xsZWdlJykudmFsdWUgPSB0LnNlcnZpY2VzPy5jb2xsZWdlIHx8IDA7CiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3QtaC1seWNlZScpLnZhbHVlID0gdC5zZXJ2aWNlcz8ubHljZWUgfHwgMDsKICAgIGlmKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzdC1oLWx5Y2VlLXBybycpKSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3QtaC1seWNlZS1wcm8nKS52YWx1ZSA9IHQuc2VydmljZXM/Lmx5Y2VlX3BybyB8fCAwOwogICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N0LWgtcG9sZScpLnZhbHVlID0gdC5zZXJ2aWNlcz8ucG9sZSB8fCAwOwogICAgLy8gQ29jaGVyIGxlcyBlbnRpdMOpcyBhdXhxdWVsbGVzIGwnZW5zZWlnbmFudCBhcHBhcnRpZW50CiAgICBzdFNldEVudGl0eUNoZWNrYm94ZXModC5lbnRpdGllcyB8fCBbXSk7CiAgICBzdFNob3dIb3Vyc0luTGFiZWxzKHQpOwogICAgc3RMb2FkU3ViamVjdHNQZXJFbnRpdHkodCk7IC8vIENoYXJnZXIgbGVzIGRpc2NpcGxpbmVzIHBhciBlbnRpdMOpCiAgICB1cGRhdGVTdEJ1cmVhdURpc3BsYXkoKTsKICAgIHVwZGF0ZVN0UmVzdGUoKTsKICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzaGFyZWQtdGVhY2hlci1vdmVybGF5Jykuc3R5bGUuZGlzcGxheSA9ICdmbGV4JzsKfQoKCi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KLy8gQVNTSUdOQVRJT04gRCdVTiBFTlNFSUdOQU5UIMOAIFVORSBFTlRJVMOJCi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KZnVuY3Rpb24gb3BlbkFzc2lnblRlYWNoZXJNb2RhbCgpIHsKICAgIC8vIFByb2ZzIGdsb2JhdXggUEFTIGVuY29yZSBhc3NpZ27DqXMgw6AgbCdlbnRpdMOpIGNvdXJhbnRlCiAgICBjb25zdCBhdmFpbGFibGUgPSBTSEFSRURfVEVBQ0hFUlMKICAgICAgICAubWFwKCh0LCBpZHgpID0+ICh7Li4udCwgX3NoYXJlZElkeDogaWR4fSkpCiAgICAgICAgLmZpbHRlcih0ID0+ICF0LmVudGl0aWVzIHx8ICF0LmVudGl0aWVzLmluY2x1ZGVzKGN1cnJlbnRFbnRpdHkpKQogICAgICAgIC5zb3J0KChhLCBiKSA9PiAoYS5uYW1lfHwnJykubG9jYWxlQ29tcGFyZShiLm5hbWV8fCcnLCAnZnInLCB7c2Vuc2l0aXZpdHk6J2Jhc2UnfSkpOwoKICAgIGxldCBvdmVybGF5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Fzc2lnbi10ZWFjaGVyLW1vZGFsJyk7CiAgICBpZiAoIW92ZXJsYXkpIHsKICAgICAgICBvdmVybGF5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgICAgb3ZlcmxheS5pZCA9ICdhc3NpZ24tdGVhY2hlci1tb2RhbCc7CiAgICAgICAgb3ZlcmxheS5zdHlsZS5jc3NUZXh0ID0gJ2Rpc3BsYXk6bm9uZTsgcG9zaXRpb246Zml4ZWQ7IHRvcDowOyBsZWZ0OjA7IHdpZHRoOjEwMCU7IGhlaWdodDoxMDAlOyBiYWNrZ3JvdW5kOnJnYmEoMCwwLDAsMC42KTsgei1pbmRleDozMDAwMDsganVzdGlmeS1jb250ZW50OmNlbnRlcjsgYWxpZ24taXRlbXM6Y2VudGVyOyc7CiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChvdmVybGF5KTsKICAgIH0KCiAgICBjb25zdCBlbnRpdHlMYWJlbCA9IEVOVElUWV9OQU1FU1tjdXJyZW50RW50aXR5XSB8fCBjdXJyZW50RW50aXR5OwogICAgY29uc3QgZW50aXR5SWNvbiA9IHtjb2xsZWdlOifwn4+rJywgbHljZWU6J/Cfj5vvuI8nLCBseWNlZV9wcm86J/Cfj60nLCBwb2xlOifwn46TJ31bY3VycmVudEVudGl0eV0gfHwgJ/Cfj6snOwoKICAgIGlmIChhdmFpbGFibGUubGVuZ3RoID09PSAwKSB7CiAgICAgICAgb3ZlcmxheS5pbm5lckhUTUwgPSBgCiAgICAgICAgICAgIDxkaXYgc3R5bGU9ImJhY2tncm91bmQ6d2hpdGU7IGJvcmRlci1yYWRpdXM6MTJweDsgcGFkZGluZzozMHB4OyB3aWR0aDo1MDBweDsgbWF4LXdpZHRoOjk1dnc7IGJveC1zaGFkb3c6MCAxMHB4IDQwcHggcmdiYSgwLDAsMCwwLjMpOyI+CiAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJkaXNwbGF5OmZsZXg7IGp1c3RpZnktY29udGVudDpzcGFjZS1iZXR3ZWVuOyBhbGlnbi1pdGVtczpjZW50ZXI7IG1hcmdpbi1ib3R0b206MjBweDsiPgogICAgICAgICAgICAgICAgICAgIDxoMyBzdHlsZT0ibWFyZ2luOjA7IGNvbG9yOiMyYzNlNTA7Ij4ke2VudGl0eUljb259IEFzc2lnbmVyIMOgICR7ZW50aXR5TGFiZWx9PC9oMz4KICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIG9uY2xpY2s9ImRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhc3NpZ24tdGVhY2hlci1tb2RhbCcpLnN0eWxlLmRpc3BsYXk9J25vbmUnIiBzdHlsZT0iYmFja2dyb3VuZDpub25lO2JvcmRlcjpub25lO2ZvbnQtc2l6ZToxLjRyZW07Y3Vyc29yOnBvaW50ZXI7Y29sb3I6Izk5OTsiPsOXPC9idXR0b24+CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIDxwIHN0eWxlPSJjb2xvcjojODg4OyB0ZXh0LWFsaWduOmNlbnRlcjsgcGFkZGluZzoyMHB4IDA7Ij4KICAgICAgICAgICAgICAgICAgICBUb3VzIGxlcyBlbnNlaWduYW50cyBkZSBsYSBsaXN0ZSBnbG9iYWxlIHNvbnQgZMOpasOgIGFzc2lnbsOpcyDDoCBjZXR0ZSBlbnRpdMOpLjxicj4KICAgICAgICAgICAgICAgICAgICA8c21hbGw+Q3LDqWV6IGQnYWJvcmQgZGVzIGVuc2VpZ25hbnRzIGRhbnMgbCdvbmdsZXQgPGI+RW5zZWlnbmFudHM8L2I+Ljwvc21hbGw+CiAgICAgICAgICAgICAgICA8L3A+CiAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJ0ZXh0LWFsaWduOnJpZ2h0OyI+CiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBvbmNsaWNrPSJkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYXNzaWduLXRlYWNoZXItbW9kYWwnKS5zdHlsZS5kaXNwbGF5PSdub25lJyIgc3R5bGU9InBhZGRpbmc6OHB4IDIwcHg7IGJvcmRlcjoxcHggc29saWQgI2RkZDsgYm9yZGVyLXJhZGl1czo2cHg7IGJhY2tncm91bmQ6I2Y1ZjVmNTsgY3Vyc29yOnBvaW50ZXI7Ij5GZXJtZXI8L2J1dHRvbj4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8L2Rpdj5gOwogICAgfSBlbHNlIHsKICAgICAgICBjb25zdCByb3dzID0gYXZhaWxhYmxlLm1hcCh0ID0+IGAKICAgICAgICAgICAgPHRyIGlkPSJhc3NpZ24tcm93LSR7dC5fc2hhcmVkSWR4fSIgc3R5bGU9ImJvcmRlci1ib3R0b206MXB4IHNvbGlkICNmMGYwZjA7Ij4KICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT0icGFkZGluZzo4cHggNnB4OyBmb250LXdlaWdodDo2MDA7Ij4ke3QubmFtZSB8fCAn4oCTJ308L3RkPgogICAgICAgICAgICAgICAgPHRkIHN0eWxlPSJwYWRkaW5nOjhweCA2cHg7IGNvbG9yOiM2NjY7IGZvbnQtc2l6ZTowLjg1cmVtOyI+JHt0LnN1YmplY3QgfHwgJ+KAkyd9PC90ZD4KICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT0icGFkZGluZzo4cHggNnB4OyBjb2xvcjojODg4OyBmb250LXNpemU6MC44cmVtOyI+JHt0LmdyYWRlIHx8IHQuc3RhdHVzIHx8ICfigJMnfTwvdGQ+CiAgICAgICAgICAgICAgICA8dGQgc3R5bGU9InBhZGRpbmc6OHB4IDZweDsgY29sb3I6Izg4ODsgZm9udC1zaXplOjAuOHJlbTsiPiR7dC5vcnMgfHwgMTh9aDwvdGQ+CiAgICAgICAgICAgICAgICA8dGQgc3R5bGU9InBhZGRpbmc6OHB4IDZweDsgdGV4dC1hbGlnbjpyaWdodDsiPgogICAgICAgICAgICAgICAgICAgIDxidXR0b24gb25jbGljaz0iYXNzaWduVGVhY2hlclRvRW50aXR5KCR7dC5fc2hhcmVkSWR4fSkiIAogICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT0icGFkZGluZzo0cHggMTJweDsgYm9yZGVyOm5vbmU7IGJvcmRlci1yYWRpdXM6NXB4OyBiYWNrZ3JvdW5kOiMyN2FlNjA7IGNvbG9yOndoaXRlOyBmb250LXdlaWdodDo2MDA7IGN1cnNvcjpwb2ludGVyOyBmb250LXNpemU6MC44NXJlbTsiPgogICAgICAgICAgICAgICAgICAgICAgICDinpUgQWpvdXRlcgogICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPgogICAgICAgICAgICAgICAgPC90ZD4KICAgICAgICAgICAgPC90cj5gKS5qb2luKCcnKTsKCiAgICAgICAgb3ZlcmxheS5pbm5lckhUTUwgPSBgCiAgICAgICAgICAgIDxkaXYgc3R5bGU9ImJhY2tncm91bmQ6d2hpdGU7IGJvcmRlci1yYWRpdXM6MTJweDsgcGFkZGluZzozMHB4OyB3aWR0aDo2MjBweDsgbWF4LXdpZHRoOjk1dnc7IGJveC1zaGFkb3c6MCAxMHB4IDQwcHggcmdiYSgwLDAsMCwwLjMpOyBtYXgtaGVpZ2h0Ojg1dmg7IGRpc3BsYXk6ZmxleDsgZmxleC1kaXJlY3Rpb246Y29sdW1uOyI+CiAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJkaXNwbGF5OmZsZXg7IGp1c3RpZnktY29udGVudDpzcGFjZS1iZXR3ZWVuOyBhbGlnbi1pdGVtczpjZW50ZXI7IG1hcmdpbi1ib3R0b206MTZweDsgZmxleC1zaHJpbms6MDsiPgogICAgICAgICAgICAgICAgICAgIDxoMyBzdHlsZT0ibWFyZ2luOjA7IGNvbG9yOiMyYzNlNTA7Ij4ke2VudGl0eUljb259IEFzc2lnbmVyIMOgICR7ZW50aXR5TGFiZWx9PC9oMz4KICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIG9uY2xpY2s9ImRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhc3NpZ24tdGVhY2hlci1tb2RhbCcpLnN0eWxlLmRpc3BsYXk9J25vbmUnIiBzdHlsZT0iYmFja2dyb3VuZDpub25lO2JvcmRlcjpub25lO2ZvbnQtc2l6ZToxLjRyZW07Y3Vyc29yOnBvaW50ZXI7Y29sb3I6Izk5OTsiPsOXPC9idXR0b24+CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIDxwIHN0eWxlPSJtYXJnaW46MCAwIDEycHggMDsgY29sb3I6Izg4ODsgZm9udC1zaXplOjAuODVyZW07IGZsZXgtc2hyaW5rOjA7Ij4KICAgICAgICAgICAgICAgICAgICBTw6lsZWN0aW9ubmV6IGxlcyBlbnNlaWduYW50cyDDoCBmYWlyZSBhcHBhcmHDrnRyZSBkYW5zIGNldHRlIGVudGl0w6kgOgogICAgICAgICAgICAgICAgPC9wPgogICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0ib3ZlcmZsb3cteTphdXRvOyBmbGV4OjE7Ij4KICAgICAgICAgICAgICAgICAgICA8dGFibGUgc3R5bGU9IndpZHRoOjEwMCU7IGJvcmRlci1jb2xsYXBzZTpjb2xsYXBzZTsiPgogICAgICAgICAgICAgICAgICAgICAgICA8dGhlYWQ+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dHIgc3R5bGU9ImJhY2tncm91bmQ6I2Y4ZjlmYTsgZm9udC1zaXplOjAuOHJlbTsgY29sb3I6Izc3NzsgdGV4dC10cmFuc2Zvcm06dXBwZXJjYXNlOyI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRoIHN0eWxlPSJwYWRkaW5nOjZweDsgdGV4dC1hbGlnbjpsZWZ0OyI+Tm9tPC90aD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGggc3R5bGU9InBhZGRpbmc6NnB4OyB0ZXh0LWFsaWduOmxlZnQ7Ij5EaXNjaXBsaW5lPC90aD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGggc3R5bGU9InBhZGRpbmc6NnB4OyB0ZXh0LWFsaWduOmxlZnQ7Ij5HcmFkZTwvdGg+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRoIHN0eWxlPSJwYWRkaW5nOjZweDsgdGV4dC1hbGlnbjpsZWZ0OyI+T1JTPC90aD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGggc3R5bGU9InBhZGRpbmc6NnB4OyI+PC90aD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdHI+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvdGhlYWQ+CiAgICAgICAgICAgICAgICAgICAgICAgIDx0Ym9keSBpZD0iYXNzaWduLXRlYWNoZXItdGJvZHkiPiR7cm93c308L3Rib2R5PgogICAgICAgICAgICAgICAgICAgIDwvdGFibGU+CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9Im1hcmdpbi10b3A6MTZweDsgdGV4dC1hbGlnbjpyaWdodDsgZmxleC1zaHJpbms6MDsiPgogICAgICAgICAgICAgICAgICAgIDxidXR0b24gb25jbGljaz0iZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Fzc2lnbi10ZWFjaGVyLW1vZGFsJykuc3R5bGUuZGlzcGxheT0nbm9uZSciIHN0eWxlPSJwYWRkaW5nOjhweCAyMHB4OyBib3JkZXI6MXB4IHNvbGlkICNkZGQ7IGJvcmRlci1yYWRpdXM6NnB4OyBiYWNrZ3JvdW5kOiNmNWY1ZjU7IGN1cnNvcjpwb2ludGVyOyI+RmVybWVyPC9idXR0b24+CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPC9kaXY+YDsKICAgIH0KCiAgICBvdmVybGF5LnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7Cn0KCmZ1bmN0aW9uIGFzc2lnblRlYWNoZXJUb0VudGl0eShzaGFyZWRJZHgpIHsKICAgIGNvbnN0IHQgPSBTSEFSRURfVEVBQ0hFUlNbc2hhcmVkSWR4XTsKICAgIGlmICghdCkgcmV0dXJuOwogICAgaWYgKCF0LmVudGl0aWVzKSB0LmVudGl0aWVzID0gW107CiAgICBpZiAoIXQuZW50aXRpZXMuaW5jbHVkZXMoY3VycmVudEVudGl0eSkpIHsKICAgICAgICB0LmVudGl0aWVzLnB1c2goY3VycmVudEVudGl0eSk7CiAgICB9CiAgICBzYXZlQWxsRGF0YSgpOwogICAgcmVuZGVyUkgoKTsKICAgIC8vIFN1cHByaW1lciBsYSBsaWduZSBkZSBsYSBsaXN0ZSAoc2FucyBmZXJtZXIgbGUgbW9kYWwpCiAgICBjb25zdCByb3cgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYXNzaWduLXJvdy0nICsgc2hhcmVkSWR4KTsKICAgIGlmIChyb3cpIHsKICAgICAgICByb3cuc3R5bGUudHJhbnNpdGlvbiA9ICdvcGFjaXR5IDAuM3MnOwogICAgICAgIHJvdy5zdHlsZS5vcGFjaXR5ID0gJzAnOwogICAgICAgIHNldFRpbWVvdXQoKCkgPT4gcm93LnJlbW92ZSgpLCAzMDApOwogICAgfQp9CgpmdW5jdGlvbiByZW1vdmVUZWFjaGVyRnJvbUVudGl0eShzaGFyZWRJZHgpIHsKICAgIGNvbnN0IHQgPSBTSEFSRURfVEVBQ0hFUlNbc2hhcmVkSWR4XTsKICAgIGlmICghdCkgcmV0dXJuOwogICAgaWYgKCFjb25maXJtKCdSZXRpcmVyICcgKyAodC5uYW1lIHx8ICdjZXQgZW5zZWlnbmFudCcpICsgJyBkZSBjZXR0ZSBlbnRpdMOpID8nKSkgcmV0dXJuOwogICAgdC5lbnRpdGllcyA9ICh0LmVudGl0aWVzIHx8IFtdKS5maWx0ZXIoZSA9PiBlICE9PSBjdXJyZW50RW50aXR5KTsKICAgIC8vIFJlbWV0dHJlIGxlcyBoZXVyZXMgZGUgY2V0dGUgZW50aXTDqSDDoCAwCiAgICBpZiAodC5zZXJ2aWNlcykgdC5zZXJ2aWNlc1tjdXJyZW50RW50aXR5XSA9IDA7CiAgICBzYXZlQWxsRGF0YSgpOwogICAgcmVuZGVyUkgoKTsKfQoKCi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KLy8gSEVMUEVSIDogZW5zZWlnbmFudHMgZGUgbCdlbnRpdMOpIGNvdXJhbnRlIChyZW1wbGFjZSBEQVRBLnRlYWNoZXJzKQovLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ci8qKgogKiBSZXRvdXJuZSBsYSBkaXNjaXBsaW5lIGQndW4gZW5zZWlnbmFudCBwb3VyIHVuZSBlbnRpdMOpIGRvbm7DqWUuCiAqIFByaW9yaXTDqSA6IHQuc3ViamVjdHNbZW50aXR5S2V5XSA+IHQuc3ViamVjdCAoZ2xvYmFsKQogKi8KZnVuY3Rpb24gZ2V0VGVhY2hlclN1YmplY3RGb3JFbnRpdHkodCwgZW50aXR5S2V5KSB7CiAgICBpZiAodC5zdWJqZWN0cyAmJiB0LnN1YmplY3RzW2VudGl0eUtleV0pIHJldHVybiB0LnN1YmplY3RzW2VudGl0eUtleV07CiAgICByZXR1cm4gdC5zdWJqZWN0IHx8ICcnOwp9CgpmdW5jdGlvbiBnZXRFbnRpdHlUZWFjaGVycygpIHsKICAgIHJldHVybiBTSEFSRURfVEVBQ0hFUlMKICAgICAgICAubWFwKCh0LCBpZHgpID0+IHsKICAgICAgICAgICAgLy8gSW5qZWN0ZXIgbGEgZGlzY2lwbGluZSBzcMOpY2lmaXF1ZSDDoCBsJ2VudGl0w6kgY291cmFudGUgZGFucyBsZSBjaGFtcCAnc3ViamVjdCcKICAgICAgICAgICAgY29uc3Qgc3ViamVjdEZvckVudGl0eSA9IGdldFRlYWNoZXJTdWJqZWN0Rm9yRW50aXR5KHQsIGN1cnJlbnRFbnRpdHkpOwogICAgICAgICAgICByZXR1cm4gey4uLnQsIGlkeCwgc3ViamVjdDogc3ViamVjdEZvckVudGl0eX07CiAgICAgICAgfSkKICAgICAgICAuZmlsdGVyKHQgPT4gdC5lbnRpdGllcyAmJiB0LmVudGl0aWVzLmluY2x1ZGVzKGN1cnJlbnRFbnRpdHkpKTsKfQoKZnVuY3Rpb24gY2xvc2VTaGFyZWRUZWFjaGVyTW9kYWwoKSB7CiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2hhcmVkLXRlYWNoZXItb3ZlcmxheScpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7Cn0KCmZ1bmN0aW9uIHNhdmVTaGFyZWRUZWFjaGVyKCkgewogICAgY29uc3QgbmFtZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzdC1uYW1lJykudmFsdWUudHJpbSgpOwogICAgaWYgKCFuYW1lKSB7IGFsZXJ0KCdWZXVpbGxleiBzYWlzaXIgdW4gbm9tLicpOyByZXR1cm47IH0KICAgIGNvbnN0IGlkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N0LWlkJykudmFsdWUgfHwgJyc7CiAgICBjb25zdCBleGlzdGluZyA9IGlkID8gU0hBUkVEX1RFQUNIRVJTLmZpbmQodCA9PiB0LmlkID09PSBpZCkgOiBudWxsOwogICAgLy8gUsOpY3Vww6lyZXIgbGVzIGVudGl0w6lzIGNvY2jDqWVzCiAgICBjb25zdCBjaGVja2VkRW50aXRpZXMgPSBzdEdldEVudGl0eUNoZWNrYm94ZXMoKTsKICAgIGlmIChjaGVja2VkRW50aXRpZXMubGVuZ3RoID09PSAwKSB7CiAgICAgICAgYWxlcnQoJ1ZldWlsbGV6IHPDqWxlY3Rpb25uZXIgYXUgbW9pbnMgdW5lIGVudGl0w6kuJyk7CiAgICAgICAgcmV0dXJuOwogICAgfQogICAgLy8gQ29uc2VydmVyIGxlcyBlbnRpdMOpcyBleGlzdGFudGVzIG5vbiBkw6ljb2Now6llcyAoYXZlYyBsZXVycyBoZXVyZXMpLCBzdXBwcmltZXIgY2VsbGVzIGTDqWNvY2jDqWVzCiAgICBjb25zdCBwcmV2RW50aXRpZXMgPSBleGlzdGluZz8uZW50aXRpZXMgfHwgW107CiAgICAvLyBOZXR0b3llciBsZXMgc2VydmljZXMgZGVzIGVudGl0w6lzIGTDqWNvY2jDqWVzCiAgICBjb25zdCBzZXJ2aWNlcyA9IGV4aXN0aW5nPy5zZXJ2aWNlcyA/IHsuLi5leGlzdGluZy5zZXJ2aWNlc30gOiB7IGNvbGxlZ2U6IDAsIGx5Y2VlOiAwLCBseWNlZV9wcm86IDAsIHBvbGU6IDAgfTsKICAgIHByZXZFbnRpdGllcy5mb3JFYWNoKGsgPT4gewogICAgICAgIGlmICghY2hlY2tlZEVudGl0aWVzLmluY2x1ZGVzKGspKSBzZXJ2aWNlc1trXSA9IDA7CiAgICB9KTsKICAgIGNvbnN0IHRlYWNoZXIgPSB7CiAgICAgICAgaWQ6IGlkIHx8ICdUXycgKyBEYXRlLm5vdygpLAogICAgICAgIG5hbWUsCiAgICAgICAgZ3JhZGU6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzdC1ncmFkZScpLnZhbHVlLAogICAgICAgIGVtYWlsOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3QtZW1haWwnKS52YWx1ZS50cmltKCksCiAgICAgICAgc3ViamVjdDogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N0LXN1YmplY3QnKS52YWx1ZS50cmltKCksCiAgICAgICAgc3ViamVjdHM6IHN0R2V0U3ViamVjdHNQZXJFbnRpdHkoKSwgLy8gZGlzY2lwbGluZXMgcGFyIGVudGl0w6kKICAgICAgICBwbmVDb2RlOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3QtcG5lLWNvZGUnKS52YWx1ZSwKICAgICAgICBidXJlYXU6IGdldEJ1cmVhdUZvckNvZGUoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N0LXBuZS1jb2RlJykudmFsdWUpIHx8ICcnLAogICAgICAgIG9yczogcGFyc2VGbG9hdChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3Qtb3JzJykudmFsdWUpIHx8IDE4LAogICAgICAgIHNlcnZpY2VzLAogICAgICAgIGVudGl0aWVzOiBjaGVja2VkRW50aXRpZXMKICAgIH07CiAgICB1cHNlcnRTaGFyZWRUZWFjaGVyKHRlYWNoZXIpOwogICAgY2xvc2VTaGFyZWRUZWFjaGVyTW9kYWwoKTsKICAgIHJlbmRlclNoYXJlZFRlYWNoZXJzKCk7CiAgICByZW5kZXJSSCgpOwp9CgpmdW5jdGlvbiBkZWxldGVTaGFyZWRUZWFjaGVyKGlkKSB7CiAgICBpZiAoIWNvbmZpcm0oJ1N1cHByaW1lciBjZXQgZW5zZWlnbmFudCA/JykpIHJldHVybjsKICAgIFNIQVJFRF9URUFDSEVSUyA9IFNIQVJFRF9URUFDSEVSUy5maWx0ZXIodCA9PiB0LmlkICE9PSBpZCk7CiAgICBzYXZlQWxsRGF0YSgpOwogICAgcmVuZGVyU2hhcmVkVGVhY2hlcnMoKTsKfQoKZnVuY3Rpb24gcmVuZGVyU2hhcmVkVGVhY2hlcnMoKSB7CiAgICBjb25zdCB0Ym9keSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzaGFyZWQtdGVhY2hlcnMtYm9keScpOwogICAgY29uc3QgZW1wdHlEaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2hhcmVkLXRlYWNoZXJzLWVtcHR5Jyk7CiAgICBpZiAoIXRib2R5KSByZXR1cm47CiAgICAKICAgIGNvbnN0IGZpbHRlckdyYWRlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpbHRlci1ncmFkZScpPy52YWx1ZSB8fCAnJzsKICAgIGNvbnN0IGZpbHRlckVudGl0eSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaWx0ZXItZW50aXR5Jyk/LnZhbHVlIHx8ICcnOwogICAgY29uc3QgZmlsdGVyTmFtZSA9IChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmlsdGVyLXRlYWNoZXItbmFtZScpPy52YWx1ZSB8fCAnJykudG9Mb3dlckNhc2UoKTsKICAgIAogICAgbGV0IHRlYWNoZXJzID0gU0hBUkVEX1RFQUNIRVJTLmZpbHRlcih0ID0+IHsKICAgICAgICBpZiAoZmlsdGVyR3JhZGUgJiYgdC5ncmFkZSAhPT0gZmlsdGVyR3JhZGUpIHJldHVybiBmYWxzZTsKICAgICAgICBpZiAoZmlsdGVyRW50aXR5ICYmICEodC5zZXJ2aWNlcz8uW2ZpbHRlckVudGl0eV0gPiAwKSkgcmV0dXJuIGZhbHNlOwogICAgICAgIGlmIChmaWx0ZXJOYW1lICYmICF0Lm5hbWUudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhmaWx0ZXJOYW1lKSkgcmV0dXJuIGZhbHNlOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfSk7CiAgICAKICAgIC8vIFRyaSBhbHBoYWLDqXRpcXVlCiAgICB0ZWFjaGVycy5zb3J0KChhLCBiKSA9PiBhLm5hbWUubG9jYWxlQ29tcGFyZShiLm5hbWUsICdmcicpKTsKICAgIAogICAgaWYgKHRlYWNoZXJzLmxlbmd0aCA9PT0gMCkgewogICAgICAgIHRib2R5LmlubmVySFRNTCA9ICcnOwogICAgICAgIGlmIChlbXB0eURpdikgZW1wdHlEaXYuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7CiAgICAgICAgcmV0dXJuOwogICAgfQogICAgaWYgKGVtcHR5RGl2KSBlbXB0eURpdi5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOwogICAgCiAgICAvLyBIZWxwZXIgZCdhZmZpY2hhZ2UgaWRlbnRpcXVlIGF1IGJpbGFuIGNvbnNvbGlkw6kgOiBYaCtZaD1aaCBzaSBwb25kw6lyYXRpb24KICAgIGZ1bmN0aW9uIHNoYXJlZEVudGl0eUNlbGwocmF3LCBwb25kLCBjb2xvciwgY2FwcGVkLCBib2xkUG9uZCkgewogICAgICAgIGNvbnN0IHdlaWdodGVkID0gcmF3ICsgcG9uZDsKICAgICAgICBpZiAod2VpZ2h0ZWQgPD0gMCkgcmV0dXJuICc8c3BhbiBzdHlsZT0iY29sb3I6I2NjYzsiPuKAkzwvc3Bhbj4nOwogICAgICAgIGlmIChwb25kID4gMC4wMSkgewogICAgICAgICAgICBjb25zdCBwb25kU3R5bGUgPSAoY2FwcGVkIHx8IGJvbGRQb25kKSA/ICdmb250LXdlaWdodDo5MDA7Y29sb3I6IzhlNDRhZDsnIDogJ2NvbG9yOiM4ZTQ0YWQ7JzsKICAgICAgICAgICAgcmV0dXJuIGA8c3BhbiBzdHlsZT0iZm9udC1zaXplOjAuNzRyZW07Y29sb3I6IzhlNDRhZDsiPiR7cmF3LnRvRml4ZWQoMSl9aDxzcGFuIHN0eWxlPSJjb2xvcjojYmJiOyI+Kzwvc3Bhbj48c3BhbiBzdHlsZT0iJHtwb25kU3R5bGV9Ij4ke3BvbmQudG9GaXhlZCgxKX1oPC9zcGFuPj08L3NwYW4+YAogICAgICAgICAgICAgICAgICsgYDxzcGFuIHN0eWxlPSJjb2xvcjoke2NvbG9yfTtmb250LXdlaWdodDo3MDA7Ij4ke3dlaWdodGVkLnRvRml4ZWQoMSl9aDwvc3Bhbj5gOwogICAgICAgIH0KICAgICAgICByZXR1cm4gYDxzcGFuIHN0eWxlPSJjb2xvcjoke2NvbG9yfTtmb250LXdlaWdodDo3MDA7Ij4ke3Jhdy50b0ZpeGVkKDEpfWg8L3NwYW4+YDsKICAgIH0KCiAgICB0Ym9keS5pbm5lckhUTUwgPSB0ZWFjaGVycy5tYXAoKHQsIGkpID0+IHsKICAgICAgICAvLyA9PT0gTcOKTUUgTcOJVEhPRE9MT0dJRSBRVUUgTEUgQklMQU4gQ09OU09MSUTDiSA9PT0KICAgICAgICBjb25zdCBzaGFyZWRJZHggPSBTSEFSRURfVEVBQ0hFUlMuaW5kZXhPZih0KTsKICAgICAgICBjb25zdCBiZEMgID0gY2FsY1RlYWNoZXJIb3Vyc0JyZWFrZG93bihzaGFyZWRJZHgsICdjb2xsZWdlJyk7CiAgICAgICAgY29uc3QgYmRMICA9IGNhbGNUZWFjaGVySG91cnNCcmVha2Rvd24oc2hhcmVkSWR4LCAnbHljZWUnKTsKICAgICAgICBjb25zdCBiZExQID0gY2FsY1RlYWNoZXJIb3Vyc0JyZWFrZG93bihzaGFyZWRJZHgsICdseWNlZV9wcm8nKTsKICAgICAgICBjb25zdCBiZFAgID0gY2FsY1RlYWNoZXJIb3Vyc0JyZWFrZG93bihzaGFyZWRJZHgsICdwb2xlJyk7CgogICAgICAgIGxldCBoQyA9IGJkQy53ZWlnaHRlZCwgaEwgPSBiZEwud2VpZ2h0ZWQsIGhMUCA9IGJkTFAud2VpZ2h0ZWQsIGhQID0gYmRQLndlaWdodGVkOwogICAgICAgIGxldCByYXdDID0gYmRDLnJhdywgcmF3TCA9IGJkTC5yYXcsIHJhd0xQID0gYmRMUC5yYXcsIHJhd1AgPSBiZFAucmF3OwogICAgICAgIGxldCBwb25kQyA9IGJkQy5wb25kLCBwb25kTCA9IGJkTC5wb25kLCBwb25kTFAgPSBiZExQLnBvbmQsIHBvbmRQID0gYmRQLnBvbmQ7CgogICAgICAgIC8vIEZhbGxiYWNrIG1hbnVlbCBzaSBwYXMgZGUgdmVudGlsYXRpb24gY2FsY3Vsw6llCiAgICAgICAgY29uc3QgaGFzVmVudGlsYXRpb24gPSAoaEMgKyBoTCArIGhMUCArIGhQKSA+IDA7CiAgICAgICAgaWYgKCFoYXNWZW50aWxhdGlvbikgewogICAgICAgICAgICBoQyAgPSBwYXJzZUZsb2F0KHQuc2VydmljZXM/LmNvbGxlZ2UpICAgIHx8IDA7CiAgICAgICAgICAgIGhMICA9IHBhcnNlRmxvYXQodC5zZXJ2aWNlcz8ubHljZWUpICAgICAgfHwgMDsKICAgICAgICAgICAgaExQID0gcGFyc2VGbG9hdCh0LnNlcnZpY2VzPy5seWNlZV9wcm8pICB8fCAwOwogICAgICAgICAgICBoUCAgPSBwYXJzZUZsb2F0KHQuc2VydmljZXM/LnBvbGUpICAgICAgIHx8IDA7CiAgICAgICAgICAgIHJhd0MgPSBoQzsgcmF3TCA9IGhMOyByYXdMUCA9IGhMUDsgcmF3UCA9IGhQOwogICAgICAgICAgICBwb25kQyA9IDA7IHBvbmRMID0gMDsgcG9uZExQID0gMDsgcG9uZFAgPSAwOwogICAgICAgIH0KCiAgICAgICAgY29uc3QgdG90YWxIICAgPSBoQyArIGhMICsgaExQICsgaFA7CiAgICAgICAgY29uc3QgcmF3VG90YWwgPSByYXdDICsgcmF3TCArIHJhd0xQICsgcmF3UDsKICAgICAgICBjb25zdCBwb25kVG90YWw9IHBvbmRDICsgcG9uZEwgKyBwb25kTFAgKyBwb25kUDsKICAgICAgICBjb25zdCBvcnMgICAgICA9IHBhcnNlRmxvYXQodC5vcnMpIHx8IDE4OwogICAgICAgIGNvbnN0IHNvbGRlICAgID0gb3JzIC0gdG90YWxIOwogICAgICAgIGNvbnN0IHNvbGRlQ29sb3IgPSBNYXRoLmFicyhzb2xkZSkgPCAwLjEgPyAnIzI3YWU2MCcgOiAoc29sZGUgPiAwID8gJyNlNjdlMjInIDogJyNjMDM5MmInKTsKICAgICAgICBjb25zdCByb3dCZyAgICA9IHRvdGFsSCA+IG9ycyA/ICcjZmZmNWY1JyA6IChpICUgMiA9PT0gMCA/ICd3aGl0ZScgOiAnI2Y4ZjlmYScpOwoKICAgICAgICAvLyBDZWxsdWxlIFRvdGFsIChhdmVjIHBvbmTDqXJhdGlvbiBzaSBhcHBsaWNhYmxlKQogICAgICAgIGNvbnN0IHRvdGFsQ2VsbCA9IHBvbmRUb3RhbCA+IDAuMDEKICAgICAgICAgICAgPyBgPHNwYW4gc3R5bGU9ImZvbnQtc2l6ZTowLjc0cmVtO2NvbG9yOiM4ZTQ0YWQ7Ij4ke3Jhd1RvdGFsLnRvRml4ZWQoMSl9aDxzcGFuIHN0eWxlPSJjb2xvcjojYmJiOyI+Kzwvc3Bhbj4ke3BvbmRUb3RhbC50b0ZpeGVkKDEpfWg9PC9zcGFuPjxiIHN0eWxlPSJjb2xvcjojYzAzOTJiOyI+JHt0b3RhbEgudG9GaXhlZCgxKX1oPC9iPmAKICAgICAgICAgICAgOiBgPGIgc3R5bGU9ImNvbG9yOiNjMDM5MmI7Ij4ke3RvdGFsSC50b0ZpeGVkKDEpfWg8L2I+YDsKCiAgICAgICAgY29uc3Qgc3JjQmFkZ2UgPSBoYXNWZW50aWxhdGlvbgogICAgICAgICAgICA/IGA8c3BhbiB0aXRsZT0iSGV1cmVzIGNhbGN1bMOpZXMgZGVwdWlzIGxhIHZlbnRpbGF0aW9uIiBzdHlsZT0iZm9udC1zaXplOjAuNjJyZW07Y29sb3I6IzI3YWU2MDttYXJnaW4tbGVmdDozcHg7Ij7imqE8L3NwYW4+YAogICAgICAgICAgICA6IGA8c3BhbiB0aXRsZT0iSGV1cmVzIHNhaXNpZXMgbWFudWVsbGVtZW50IiBzdHlsZT0iZm9udC1zaXplOjAuNjJyZW07Y29sb3I6I2U2N2UyMjttYXJnaW4tbGVmdDozcHg7Ij7inI48L3NwYW4+YDsKCiAgICAgICAgcmV0dXJuIGA8dHIgc3R5bGU9ImJvcmRlci1ib3R0b206MXB4IHNvbGlkICNlZWU7IGJhY2tncm91bmQ6JHtyb3dCZ307Ij4KICAgICAgICAgICAgPHRkIHN0eWxlPSJwYWRkaW5nOjhweDsgZm9udC13ZWlnaHQ6NjAwOyI+JHt0Lm5hbWV9JHtzcmNCYWRnZX0ke3QuZW1haWwgPyBgPGJyPjxzcGFuIHN0eWxlPSJmb250LXNpemU6MC43MnJlbTsgY29sb3I6IzdmOGM4ZDsgZm9udC13ZWlnaHQ6NDAwOyI+4pyJ77iPICR7dC5lbWFpbH08L3NwYW4+YCA6ICcnfTwvdGQ+CiAgICAgICAgICAgIDx0ZCBzdHlsZT0icGFkZGluZzo4cHg7IGZvbnQtc2l6ZTowLjgycmVtOyI+JHt0LmdyYWRlID8gYDxzcGFuIHN0eWxlPSJiYWNrZ3JvdW5kOiNlYWYwZmY7IGNvbG9yOiMyYzNlNTA7IGJvcmRlci1yYWRpdXM6M3B4OyBwYWRkaW5nOjJweCA2cHg7IGZvbnQtd2VpZ2h0OjYwMDsiPiR7dC5ncmFkZX08L3NwYW4+YCA6ICc8c3BhbiBzdHlsZT0iY29sb3I6I2FhYTsiPuKAkzwvc3Bhbj4nfTwvdGQ+CiAgICAgICAgICAgIDx0ZCBzdHlsZT0icGFkZGluZzo4cHg7IGZvbnQtc2l6ZTowLjg1cmVtOyBjb2xvcjojNTU1OyI+JHt0LnN1YmplY3QgfHwgJ+KAkyd9PC90ZD4KICAgICAgICAgICAgPHRkIHN0eWxlPSJwYWRkaW5nOjhweDsgdGV4dC1hbGlnbjpjZW50ZXI7IGZvbnQtZmFtaWx5Om1vbm9zcGFjZTsgZm9udC1zaXplOjAuOHJlbTsgY29sb3I6IzU1NTsiPiR7dC5wbmVDb2RlIHx8ICfigJMnfTwvdGQ+CiAgICAgICAgICAgIDx0ZCBzdHlsZT0icGFkZGluZzo4cHg7IHRleHQtYWxpZ246Y2VudGVyOyBmb250LXdlaWdodDo3MDA7IGNvbG9yOiMyOTgwYjk7Ij4ke29yc31oPC90ZD4KICAgICAgICAgICAgPHRkIHN0eWxlPSJwYWRkaW5nOjhweDsgdGV4dC1hbGlnbjpjZW50ZXI7Ij4ke3NoYXJlZEVudGl0eUNlbGwocmF3QywgcG9uZEMsICcjMjk4MGI5JywgZmFsc2UsIGZhbHNlKX08L3RkPgogICAgICAgICAgICA8dGQgc3R5bGU9InBhZGRpbmc6OHB4OyB0ZXh0LWFsaWduOmNlbnRlcjsiPiR7c2hhcmVkRW50aXR5Q2VsbChyYXdMLCBwb25kTCwgJyMxZTg0NDknLCBiZEwucG9uZENhcHBlZHx8ZmFsc2UsIGZhbHNlKX08L3RkPgogICAgICAgICAgICA8dGQgc3R5bGU9InBhZGRpbmc6OHB4OyB0ZXh0LWFsaWduOmNlbnRlcjsiPiR7c2hhcmVkRW50aXR5Q2VsbChyYXdMUCwgcG9uZExQLCAnI2QzNTQwMCcsIGZhbHNlLCBmYWxzZSl9PC90ZD4KICAgICAgICAgICAgPHRkIHN0eWxlPSJwYWRkaW5nOjhweDsgdGV4dC1hbGlnbjpjZW50ZXI7Ij4ke3NoYXJlZEVudGl0eUNlbGwocmF3UCwgcG9uZFAsICcjN2QzYzk4JywgYmRQLnBvbmRDYXBwZWR8fGZhbHNlLCBiZFAucG9uZEV4Y2VlZHNPUlN8fGZhbHNlKX08L3RkPgogICAgICAgICAgICA8dGQgc3R5bGU9InBhZGRpbmc6OHB4OyB0ZXh0LWFsaWduOmNlbnRlcjsgZm9udC13ZWlnaHQ6ODAwOyBiYWNrZ3JvdW5kOiNmZmY4Zjg7Ij4ke3RvdGFsQ2VsbH08L3RkPgogICAgICAgICAgICA8dGQgc3R5bGU9InBhZGRpbmc6OHB4OyB0ZXh0LWFsaWduOmNlbnRlcjsgZm9udC13ZWlnaHQ6ODAwOyBjb2xvcjoke3NvbGRlQ29sb3J9OyI+JHtzb2xkZSA+PSAwID8gJysnIDogJyd9JHtzb2xkZS50b0ZpeGVkKDEpfWg8L3RkPgogICAgICAgICAgICA8dGQgc3R5bGU9InBhZGRpbmc6OHB4OyB0ZXh0LWFsaWduOmNlbnRlcjsiPgogICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYnRuIGJ0bi1zbSBidG4tcHJpbWFyeSIgb25jbGljaz0iZWRpdFNoYXJlZFRlYWNoZXIoJyR7dC5pZH0nKSIgc3R5bGU9Im1hcmdpbi1yaWdodDozcHg7Ij7inI/vuI88L2J1dHRvbj4KICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImJ0biBidG4tc20gYnRuLWRhbmdlciIgb25jbGljaz0iZGVsZXRlU2hhcmVkVGVhY2hlcignJHt0LmlkfScpIj7DlzwvYnV0dG9uPgogICAgICAgICAgICA8L3RkPgogICAgICAgIDwvdHI+YDsKICAgIH0pLmpvaW4oJycpOwp9CgpmdW5jdGlvbiBleHBvcnRCaWxhbkdsb2JhbChmb3JtYXQpIHsKICAgIGFsZXJ0KCdFeHBvcnQgJyArIGZvcm1hdC50b1VwcGVyQ2FzZSgpICsgJyBkdSBiaWxhbiBnbG9iYWwg4oCTIGZvbmN0aW9ubmFsaXTDqSBkaXNwb25pYmxlIGRhbnMgbGEgcHJvY2hhaW5lIHZlcnNpb24uJyk7Cn0KCmZ1bmN0aW9uIGxvYWRTYXZlRmlsZShpbnB1dCkgewogICAgY29uc3QgZiA9IGlucHV0LmZpbGVzWzBdOwogICAgaWYgKCFmKSByZXR1cm47CiAgICBjb25zdCByID0gbmV3IEZpbGVSZWFkZXIoKTsKICAgIHIub25sb2FkID0gZSA9PiB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgbGV0IGxvYWRlZERhdGEgPSBKU09OLnBhcnNlKGUudGFyZ2V0LnJlc3VsdCk7CiAgICAgICAgICAgIAogICAgICAgICAgICAvLyA9PT0gRMOJVEVDVElPTiBGT1JNQVQgTVVMVEktRU5USVTDiVMgVjkgPT09CiAgICAgICAgICAgIGlmIChsb2FkZWREYXRhLnZlcnNpb24gPT09ICdtdWx0aS12OScgJiYgbG9hZGVkRGF0YS5lbnRpdGllcykgewogICAgICAgICAgICAgICAgLy8gRm9ybWF0IG11bHRpLWVudGl0w6lzIG5hdGlmCiAgICAgICAgICAgICAgICBNVUxUSV9EQVRBID0gbG9hZGVkRGF0YS5lbnRpdGllcyB8fCB7IGNvbGxlZ2U6IG51bGwsIGx5Y2VlOiBudWxsLCBseWNlZV9wcm86IG51bGwsIHBvbGU6IG51bGwgfTsKICAgICAgICAgICAgICAgIEVOVElUWV9OQU1FUyA9IGxvYWRlZERhdGEubmFtZXMgfHwgeyBjb2xsZWdlOiAnQ29sbMOoZ2UnLCBseWNlZTogJ0x5Y8OpZScsIGx5Y2VlX3BybzogJ0x5Y8OpZSBQcm8nLCBwb2xlOiAnUMO0bGUgU3Vww6lyaWV1cicgfTsKICAgICAgICAgICAgICAgIGN1cnJlbnRFbnRpdHkgPSBsb2FkZWREYXRhLmN1cnJlbnRFbnRpdHkgfHwgJ2NvbGxlZ2UnOwogICAgICAgICAgICAgICAgU0hBUkVEX1RFQUNIRVJTID0gbG9hZGVkRGF0YS5zaGFyZWRUZWFjaGVycyB8fCBbXTsKICAgICAgICAgICAgICAgIERBVEEgPSBNVUxUSV9EQVRBW2N1cnJlbnRFbnRpdHldOwogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBpZiAoIURBVEEpIHsKICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGsgb2YgWydjb2xsZWdlJywgJ2x5Y2VlJywgJ2x5Y2VlX3BybycsICdwb2xlJ10pIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKE1VTFRJX0RBVEFba10pIHsgY3VycmVudEVudGl0eSA9IGs7IERBVEEgPSBNVUxUSV9EQVRBW2tdOyBicmVhazsgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgc2F2ZUFsbERhdGEoKTsKICAgICAgICAgICAgICAgIGFsZXJ0KCLinIUgU2F1dmVnYXJkZSBtdWx0aS1lbnRpdMOpcyBjaGFyZ8OpZSBhdmVjIHN1Y2PDqHMgISIpOwogICAgICAgICAgICAgICAgbG9jYXRpb24ucmVsb2FkKCk7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KICAgICAgICAgICAgCiAgICAgICAgICAgIC8vID09PSBGT1JNQVQgTU9OTy1FTlRJVMOJIEFOQ0lFTiAobWlncmF0aW9uKSA9PT0KICAgICAgICAgICAgLy8gLS0tIE1JR1JBVElPTlMgJiBJTklUSUFMSVNBVElPTlMgLS0tCiAgICAgICAgICAgIGlmICh0eXBlb2YgbWlncmF0ZVYxOHRvVjE5ID09PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgICAgICAgICBsb2FkZWREYXRhID0gbWlncmF0ZVYxOHRvVjE5KGxvYWRlZERhdGEpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIAogICAgICAgICAgICBpZiAoIWxvYWRlZERhdGEuYXNzaWdubWVudHMpIGxvYWRlZERhdGEuYXNzaWdubWVudHMgPSB7fTsgCiAgICAgICAgICAgIGlmICghbG9hZGVkRGF0YS5jb25maWcpIGxvYWRlZERhdGEuY29uZmlnID0geyB5ZWFyOiBuZXcgRGF0ZSgpLmdldEZ1bGxZZWFyKCksIHRvdGFsOiAwLCBocDogMCwgaHNhOiAwIH07CiAgICAgICAgICAgIGlmIChsb2FkZWREYXRhLnRlYWNoZXJzKSB7CiAgICAgICAgICAgICAgICBsb2FkZWREYXRhLnRlYWNoZXJzLmZvckVhY2gocCA9PiB7CiAgICAgICAgICAgICAgICAgICAgaWYgKHAuY3NkID09PSB1bmRlZmluZWQpIHAuY3NkID0gMDsKICAgICAgICAgICAgICAgICAgICBpZiAocC5kZWNoYXJnZSA9PT0gdW5kZWZpbmVkKSBwLmRlY2hhcmdlID0gMDsKICAgICAgICAgICAgICAgICAgICBpZiAocC5kZWNoX2V4dCA9PT0gdW5kZWZpbmVkKSBwLmRlY2hfZXh0ID0gMDsgCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgLy8gRMOpdGVybWluZXIgZGFucyBxdWVsbGUgZW50aXTDqSBwbGFjZXIgbGVzIGRvbm7DqWVzIGNoYXJnw6llcwogICAgICAgICAgICBsZXQgdGFyZ2V0RW50aXR5ID0gJ2NvbGxlZ2UnOwogICAgICAgICAgICBpZiAobG9hZGVkRGF0YS5zdHJ1Y3R1cmUgJiYgQXJyYXkuaXNBcnJheShsb2FkZWREYXRhLnN0cnVjdHVyZSkpIHsKICAgICAgICAgICAgICAgIGNvbnN0IGlzTEdUID0gbG9hZGVkRGF0YS5zdHJ1Y3R1cmUuc29tZShsdmwgPT4gewogICAgICAgICAgICAgICAgICAgIGNvbnN0IG5vbSA9IGx2bC5sZXZlbCB8fCBsdmwubmFtZSB8fCAiIjsgCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5vbS5pbmNsdWRlcygiMcOocmUiKSB8fCBub20uaW5jbHVkZXMoIlRlcm1pbmFsZSIpOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBpZiAoaXNMR1QpIHRhcmdldEVudGl0eSA9ICdseWNlZSc7CiAgICAgICAgICAgICAgICBlbHNlIGlmIChsb2FkZWREYXRhLnR5cGUgPT09ICdscCcpIHRhcmdldEVudGl0eSA9ICdseWNlZSc7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIE1VTFRJX0RBVEFbdGFyZ2V0RW50aXR5XSA9IGxvYWRlZERhdGE7CiAgICAgICAgICAgIGN1cnJlbnRFbnRpdHkgPSB0YXJnZXRFbnRpdHk7CiAgICAgICAgICAgIERBVEEgPSBsb2FkZWREYXRhOwoKICAgICAgICAgICAgLy8gLS0tIETDiVRFQ1RJT04gTEdUIHBvdXIgbGUgbW9kdWxlIEVEUyAtLS0KICAgICAgICAgICAgbGV0IGlzTEdUID0gZmFsc2U7CiAgICAgICAgICAgIGlmIChEQVRBLnN0cnVjdHVyZSAmJiBBcnJheS5pc0FycmF5KERBVEEuc3RydWN0dXJlKSkgewogICAgICAgICAgICAgICAgaXNMR1QgPSBEQVRBLnN0cnVjdHVyZS5zb21lKGx2bCA9PiB7CiAgICAgICAgICAgICAgICAgICAgY29uc3Qgbm9tID0gbHZsLmxldmVsIHx8IGx2bC5uYW1lIHx8ICIiOyAKICAgICAgICAgICAgICAgICAgICByZXR1cm4gbm9tLmluY2x1ZGVzKCIxw6hyZSIpIHx8IG5vbS5pbmNsdWRlcygiVGVybWluYWxlIik7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKGlzTEdUKSB7CiAgICAgICAgICAgICAgICBzYXZlQWxsRGF0YSgpOyAKICAgICAgICAgICAgICAgIGFsZXJ0KCLinIUgRmljaGllciBjaGFyZ8OpIGRhbnMgbCdlbnRpdMOpIFwiTHljw6llXCIgISBVbmUgw6l0YXBlIGRlIHbDqXJpZmljYXRpb24gZGVzIFNww6ljaWFsaXTDqXMgdmEgcydvdXZyaXIuIik7CiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHNob3dFZHNJZGVudGlmaWNhdGlvbk1vZGFsID09PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgICAgICAgICAgICAgc2hvd0Vkc0lkZW50aWZpY2F0aW9uTW9kYWwoKTsgCiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uLnJlbG9hZCgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CiAgICAgICAgICAgIAogICAgICAgICAgICBzYXZlQWxsRGF0YSgpOwogICAgICAgICAgICBhbGVydCgi4pyFIEZpY2hpZXIgY2hhcmfDqSBhdmVjIHN1Y2PDqHMgZGFucyBsJ2VudGl0w6kgXCIiICsgKEVOVElUWV9OQU1FU1t0YXJnZXRFbnRpdHldIHx8IHRhcmdldEVudGl0eSkgKyAiXCIgISIpOwogICAgICAgICAgICBsb2NhdGlvbi5yZWxvYWQoKTsKICAgICAgICAgICAgCiAgICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoIkVycmV1ciBpbXBvcnQ6IiwgZXJyKTsKICAgICAgICAgICAgYWxlcnQoIuKdjCBFcnJldXIgOiBMZSBmaWNoaWVyIHNlbWJsZSBjb3Jyb21wdSBvdSBpbGxpc2libGUuXG4oRMOpdGFpbHMgZGFucyBsYSBjb25zb2xlIEYxMikiKTsKICAgICAgICB9CiAgICB9OwogICAgci5yZWFkQXNUZXh0KGYpOwogICAgaW5wdXQudmFsdWUgPSAnJzsKfQoKCmZ1bmN0aW9uIHNob3dFZHNJZGVudGlmaWNhdGlvbk1vZGFsKCkgewogICAgLy8gMS4gQ3LDqWF0aW9uIGRlIGwnaW50ZXJmYWNlIChPdmVybGF5ICsgRmVuw6p0cmUpCiAgICBjb25zdCBvdmVybGF5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICBvdmVybGF5LmlkID0gJ2Vkcy1jaGVjay1vdmVybGF5JzsKICAgIG92ZXJsYXkuc3R5bGUgPSBgCiAgICAgICAgcG9zaXRpb246IGZpeGVkOyB0b3A6IDA7IGxlZnQ6IDA7IHdpZHRoOiAxMDAlOyBoZWlnaHQ6IDEwMCU7CiAgICAgICAgYmFja2dyb3VuZDogcmdiYSgwLDAsMCwwLjg1KTsgei1pbmRleDogMTAwMDA7CiAgICAgICAgZGlzcGxheTogZmxleDsganVzdGlmeS1jb250ZW50OiBjZW50ZXI7IGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgICBgOwoKICAgIGNvbnN0IG1vZGFsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICBtb2RhbC5zdHlsZSA9IGAKICAgICAgICBiYWNrZ3JvdW5kOiB3aGl0ZTsgcGFkZGluZzogMjVweDsgYm9yZGVyLXJhZGl1czogMTJweDsKICAgICAgICB3aWR0aDogNjAwcHg7IG1heC1oZWlnaHQ6IDkwdmg7IGRpc3BsYXk6IGZsZXg7IGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47CiAgICAgICAgYm94LXNoYWRvdzogMCAxMHB4IDQwcHggcmdiYSgwLDAsMCwwLjUpOyBmb250LWZhbWlseTogJ1NlZ29lIFVJJywgc2Fucy1zZXJpZjsKICAgIGA7CgogICAgLy8gMi4gQ29udGVudSBIVE1MIGRlIGxhIGZlbsOqdHJlCiAgICBtb2RhbC5pbm5lckhUTUwgPSBgCiAgICAgICAgPGgyIHN0eWxlPSJtYXJnaW4tdG9wOjA7IGNvbG9yOiMyYzNlNTA7Ij7wn6e5IE5ldHRveWFnZSBkZSBsYSBHcmlsbGUgKExHVCk8L2gyPgogICAgICAgIDxwIHN0eWxlPSJjb2xvcjojNjY2OyBmb250LXNpemU6MC45cmVtOyBtYXJnaW4tYm90dG9tOjIwcHg7Ij4KICAgICAgICAgICAgQ29jaGV6IGxlcyBtYXRpw6hyZXMgcXVpIHNvbnQgZGVzIDxzdHJvbmc+U3DDqWNpYWxpdMOpcyAoRURTKTwvc3Ryb25nPi48YnI+CiAgICAgICAgICAgIDxlbT5FbGxlcyBzZXJvbnQgbWFzcXXDqWVzIGRlIGxhIGdyaWxsZSBob3JhaXJlIHByaW5jaXBhbGUgcG91ciDDqXZpdGVyIGxlcyBkb3VibG9ucyBldCBhbGzDqWdlciBsJ2FmZmljaGFnZS48L2VtPgogICAgICAgIDwvcD4KICAgICAgICA8ZGl2IHN0eWxlPSJmbGV4OjE7IG92ZXJmbG93LXk6YXV0bzsgYm9yZGVyOjFweCBzb2xpZCAjZWVlOyBib3JkZXItcmFkaXVzOjhweDsgcGFkZGluZzoxMHB4OyBtYXJnaW4tYm90dG9tOjIwcHg7IiBpZD0iZWRzLWNoZWNrLWxpc3QiPgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICA8ZGl2IHN0eWxlPSJkaXNwbGF5OmZsZXg7IGp1c3RpZnktY29udGVudDpmbGV4LWVuZDsgZ2FwOjEwcHg7Ij4KICAgICAgICAgICAgPGJ1dHRvbiBpZD0iYnRuLXNraXAtZWRzIiBzdHlsZT0icGFkZGluZzoxMHB4IDIwcHg7IGJhY2tncm91bmQ6I2JkYzNjNzsgYm9yZGVyOm5vbmU7IGJvcmRlci1yYWRpdXM6NnB4OyBjdXJzb3I6cG9pbnRlcjsgZm9udC13ZWlnaHQ6Ym9sZDsgY29sb3I6d2hpdGU7Ij5QYXNzZXIgKFRvdXQgZ2FyZGVyKTwvYnV0dG9uPgogICAgICAgICAgICA8YnV0dG9uIGlkPSJidG4tc2F2ZS1lZHMiIHN0eWxlPSJwYWRkaW5nOjEwcHggMjBweDsgYmFja2dyb3VuZDojMjdhZTYwOyBib3JkZXI6bm9uZTsgYm9yZGVyLXJhZGl1czo2cHg7IGN1cnNvcjpwb2ludGVyOyBmb250LXdlaWdodDpib2xkOyBjb2xvcjp3aGl0ZTsiPlZhbGlkZXIgJiBNYXNxdWVyPC9idXR0b24+CiAgICAgICAgPC9kaXY+CiAgICBgOwoKICAgIC8vIDMuIEfDqW7DqXJhdGlvbiBkZSBsYSBsaXN0ZSBkZXMgbWF0acOocmVzCiAgICBjb25zdCBsaXN0Q29udGFpbmVyID0gbW9kYWwucXVlcnlTZWxlY3RvcignI2Vkcy1jaGVjay1saXN0Jyk7CiAgICBjb25zdCBzb3J0ZWRTdWJqZWN0cyA9IERBVEEuc3ViamVjdHMuc2xpY2UoKS5zb3J0KCk7IC8vIFRyaSBhbHBoYWLDqXRpcXVlCgogICAgbGV0IGh0bWxUYWJsZSA9IGA8dGFibGUgc3R5bGU9IndpZHRoOjEwMCU7IGJvcmRlci1jb2xsYXBzZTpjb2xsYXBzZTsiPgogICAgICAgIDx0ciBzdHlsZT0iYmFja2dyb3VuZDojZjhmOWZhOyB0ZXh0LWFsaWduOmxlZnQ7IGNvbG9yOiM3ZjhjOGQ7Ij4KICAgICAgICAgICAgPHRoIHN0eWxlPSJwYWRkaW5nOjhweDsiPk1hdGnDqHJlPC90aD4KICAgICAgICAgICAgPHRoIHN0eWxlPSJwYWRkaW5nOjhweDsgdGV4dC1hbGlnbjpjZW50ZXI7Ij5NYXNxdWVyIGVuIDHDqHJlID88L3RoPgogICAgICAgICAgICA8dGggc3R5bGU9InBhZGRpbmc6OHB4OyB0ZXh0LWFsaWduOmNlbnRlcjsiPk1hc3F1ZXIgZW4gVGVybSA/PC90aD4KICAgICAgICA8L3RyPmA7CgogICAgc29ydGVkU3ViamVjdHMuZm9yRWFjaChzdWIgPT4gewogICAgICAgIGNvbnN0IG1ldGEgPSBEQVRBLnN1YmplY3RNZXRhW3N1Yl0gfHwge307CiAgICAgICAgCiAgICAgICAgLy8gT24gZXNzYXllIGRlIGRldmluZXIgc2kgYydlc3QgZMOpasOgIHVuIEVEUyBwb3VyIHByw6ktY29jaGVyCiAgICAgICAgY29uc3QgaXNMaWtlbHlFZHMgPSBtZXRhLmlzRWRzIHx8IG1ldGEucGFyZW50ID09PSAiU3DDqWNpYWxpdMOpcyI7CiAgICAgICAgY29uc3QgaGFzUHJlbSA9IG1ldGEubGV2ZWxzICYmIG1ldGEubGV2ZWxzLnNvbWUobCA9PiBsLmluY2x1ZGVzKCcxw6hyZScpKTsKICAgICAgICBjb25zdCBoYXNUZXJtID0gbWV0YS5sZXZlbHMgJiYgbWV0YS5sZXZlbHMuc29tZShsID0+IGwuaW5jbHVkZXMoJ1Rlcm0nKSk7CgogICAgICAgIGh0bWxUYWJsZSArPSBgCiAgICAgICAgICAgIDx0ciBzdHlsZT0iYm9yZGVyLWJvdHRvbToxcHggc29saWQgI2VlZTsiPgogICAgICAgICAgICAgICAgPHRkIHN0eWxlPSJwYWRkaW5nOjhweDsgZm9udC13ZWlnaHQ6NTAwOyI+JHtzdWJ9PC90ZD4KICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT0icGFkZGluZzo4cHg7IHRleHQtYWxpZ246Y2VudGVyOyI+CiAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9ImNoZWNrYm94IiBjbGFzcz0iY2hrLXByZW0iIGRhdGEtc3ViPSIke3N1Yn0iIAogICAgICAgICAgICAgICAgICAgICAgICAgICAkeyhpc0xpa2VseUVkcyAmJiBoYXNQcmVtKSA/ICdjaGVja2VkJyA6ICcnfSAKICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9InRyYW5zZm9ybTpzY2FsZSgxLjMpOyBjdXJzb3I6cG9pbnRlcjsiPgogICAgICAgICAgICAgICAgPC90ZD4KICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT0icGFkZGluZzo4cHg7IHRleHQtYWxpZ246Y2VudGVyOyI+CiAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9ImNoZWNrYm94IiBjbGFzcz0iY2hrLXRlcm0iIGRhdGEtc3ViPSIke3N1Yn0iIAogICAgICAgICAgICAgICAgICAgICAgICAgICAkeyhpc0xpa2VseUVkcyAmJiBoYXNUZXJtKSA/ICdjaGVja2VkJyA6ICcnfSAKICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9InRyYW5zZm9ybTpzY2FsZSgxLjMpOyBjdXJzb3I6cG9pbnRlcjsiPgogICAgICAgICAgICAgICAgPC90ZD4KICAgICAgICAgICAgPC90cj4KICAgICAgICBgOwogICAgfSk7CiAgICBodG1sVGFibGUgKz0gYDwvdGFibGU+YDsKICAgIGxpc3RDb250YWluZXIuaW5uZXJIVE1MID0gaHRtbFRhYmxlOwoKICAgIG92ZXJsYXkuYXBwZW5kQ2hpbGQobW9kYWwpOwogICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChvdmVybGF5KTsKCiAgICAvLyAtLS0gNC4gR0VTVElPTiBERVMgQ0xJQ1MgLS0tCgogICAgLy8gQm91dG9uICJQYXNzZXIiCiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnRuLXNraXAtZWRzJykub25jbGljayA9ICgpID0+IHsKICAgICAgICBpZihjb25maXJtKCJBdWN1bmUgbWF0acOocmUgbmUgc2VyYSBtYXNxdcOpZS4gQ29udGludWVyID8iKSkgewogICAgICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKG92ZXJsYXkpOwogICAgICAgICAgICBsb2NhdGlvbi5yZWxvYWQoKTsKICAgICAgICB9CiAgICB9OwoKICAgIC8vIEJvdXRvbiAiVmFsaWRlciIgKExvZ2lxdWUgZGUgTmV0dG95YWdlIFVuaXF1ZW1lbnQpCiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnRuLXNhdmUtZWRzJykub25jbGljayA9ICgpID0+IHsKICAgICAgICBjb25zdCByb3dzID0gbGlzdENvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCd0cicpOwogICAgICAgIAogICAgICAgIC8vIE9uIHBhcmNvdXJ0IGNoYXF1ZSBsaWduZSBkdSB0YWJsZWF1IChzYXVmIGwnZW4tdMOqdGUpCiAgICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPCByb3dzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIGNvbnN0IHJvdyA9IHJvd3NbaV07CiAgICAgICAgICAgIGNvbnN0IGNoa1ByZW0gPSByb3cucXVlcnlTZWxlY3RvcignLmNoay1wcmVtJyk7CiAgICAgICAgICAgIGNvbnN0IGNoa1Rlcm0gPSByb3cucXVlcnlTZWxlY3RvcignLmNoay10ZXJtJyk7CiAgICAgICAgICAgIGNvbnN0IHN1YmplY3ROYW1lID0gY2hrUHJlbS5nZXRBdHRyaWJ1dGUoJ2RhdGEtc3ViJyk7CiAgICAgICAgICAgIAogICAgICAgICAgICAvLyBTaSBhdSBtb2lucyB1bmUgY2FzZSBlc3QgY29jaMOpZSBwb3VyIGNldHRlIG1hdGnDqHJlCiAgICAgICAgICAgIGlmIChjaGtQcmVtLmNoZWNrZWQgfHwgY2hrVGVybS5jaGVja2VkKSB7CiAgICAgICAgICAgICAgICBpZiAoIURBVEEuc3ViamVjdE1ldGFbc3ViamVjdE5hbWVdKSBEQVRBLnN1YmplY3RNZXRhW3N1YmplY3ROYW1lXSA9IHt9OwogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAvLyBBLiBPbiBhY3RpdmUgbGUgbWFzcXVhZ2UgKGlzRWRzKQogICAgICAgICAgICAgICAgREFUQS5zdWJqZWN0TWV0YVtzdWJqZWN0TmFtZV0uaXNFZHMgPSB0cnVlOwogICAgICAgICAgICAgICAgREFUQS5zdWJqZWN0TWV0YVtzdWJqZWN0TmFtZV0ubW9kZSA9ICdsZXZlbCc7CiAgICAgICAgICAgICAgICBEQVRBLnN1YmplY3RNZXRhW3N1YmplY3ROYW1lXS5wYXJlbnQgPSAiU3DDqWNpYWxpdMOpcyI7CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIC8vIEIuIE9uIHN1cHByaW1lIGxlcyBoZXVyZXMgbWFudWVsbGVzIGRlIGxhIGdyaWxsZSAoTmV0dG95YWdlKQogICAgICAgICAgICAgICAgREFUQS5zdWJqZWN0TWV0YVtzdWJqZWN0TmFtZV0udm9sTGV2ZWwgPSB7fTsgCgogICAgICAgICAgICAgICAgLy8gQy4gT24gbWV0IMOgIGpvdXIgbGVzIG5pdmVhdXggY29uY2VybsOpcwogICAgICAgICAgICAgICAgbGV0IGxldmVscyA9IFtdOwogICAgICAgICAgICAgICAgaWYgKGNoa1ByZW0uY2hlY2tlZCkgbGV2ZWxzLnB1c2goIjHDqHJlIik7CiAgICAgICAgICAgICAgICBpZiAoY2hrVGVybS5jaGVja2VkKSBsZXZlbHMucHVzaCgiVGVybWluYWxlIik7CiAgICAgICAgICAgICAgICBEQVRBLnN1YmplY3RNZXRhW3N1YmplY3ROYW1lXS5sZXZlbHMgPSBsZXZlbHM7CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIC8vIE5PVEUgOiBPbiBuJ2Fqb3V0ZSBQQVMgbGEgbWF0acOocmUgZGFucyBsZSB0YWJsZWF1IEVEUyBkdSBiYXMgKERBVEEuZWRzKS4KICAgICAgICAgICAgICAgIC8vIEVsbGUgZXN0IGp1c3RlIG1hc3F1w6llIGRlIGxhIGdyaWxsZSBwcmluY2lwYWxlLgogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBzYXZlRGF0YSgpOwogICAgICAgIGFsZXJ0KCLinIUgR3JpbGxlIG5ldHRvecOpZSAhIExlcyBtYXRpw6hyZXMgc8OpbGVjdGlvbm7DqWVzIG9udCDDqXTDqSBtYXNxdcOpZXMuIik7CiAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChvdmVybGF5KTsKICAgICAgICBsb2NhdGlvbi5yZWxvYWQoKTsgLy8gUmVjaGFyZ2VtZW50IGZpbmFsIHBvdXIgYWZmaWNoZXIgbGUgcsOpc3VsdGF0CiAgICB9Owp9CgovLyBGb25jdGlvbiB1dGlsaXRhaXJlIHBvdXIgY3LDqWVyIGwnZW50csOpZSBkYW5zIGxlIHRhYmxlYXUgRURTIGR1IGJhcyBzaSBlbGxlIG4nZXhpc3RlIHBhcwpmdW5jdGlvbiBlbnN1cmVFZHNFeGlzdHNJbk1hbmFnZXIobGV2ZWxDb2RlLCBzdWJqZWN0TmFtZSkgewogICAgaWYgKCFEQVRBLmVkcykgREFUQS5lZHMgPSB7IHByZW1pZXJlOiBbXSwgdGVybWluYWxlOiBbXSB9OwogICAgaWYgKCFEQVRBLmVkc1tsZXZlbENvZGVdKSBEQVRBLmVkc1tsZXZlbENvZGVdID0gW107CgogICAgY29uc3QgZXhpc3RzID0gREFUQS5lZHNbbGV2ZWxDb2RlXS5zb21lKGUgPT4gZS5uYW1lID09PSBzdWJqZWN0TmFtZSk7CiAgICBpZiAoIWV4aXN0cykgewogICAgICAgIGNvbnN0IGVkc0RlZmF1bHRDb2VmID0gKGN1cnJlbnRFbnRpdHkgPT09ICdwb2xlJykgPyAxLjI1IDogMS4xOwogICAgICAgIERBVEEuZWRzW2xldmVsQ29kZV0ucHVzaCh7CiAgICAgICAgICAgIG5hbWU6IHN1YmplY3ROYW1lLAogICAgICAgICAgICBzdHVkZW50czogMCwKICAgICAgICAgICAgZ3JvdXBzOiAwLAogICAgICAgICAgICBoUGVyR3JvdXA6IChsZXZlbENvZGUgPT09ICdwcmVtaWVyZScgPyA0IDogNiksIC8vIEZvcmZhaXQgcGFyIGTDqWZhdXQgKDRoIG91IDZoKQogICAgICAgICAgICBjb2VmOiBlZHNEZWZhdWx0Q29lZgogICAgICAgIH0pOwogICAgfQp9CmZ1bmN0aW9uIG1pZ3JhdGVWMTh0b1YxOShkYXRhKSB7CiAgICBpZiAoIWRhdGEuc3ViamVjdHMgfHwgIWRhdGEuc3RydWN0dXJlKSByZXR1cm4gZGF0YTsKICAgIGNvbnN0IGFsbExldmVscyA9IGRhdGEuc3RydWN0dXJlLm1hcChsID0+IGwubGV2ZWwpOwogICAgaWYgKCFkYXRhLnN1YmplY3RNZXRhKSBkYXRhLnN1YmplY3RNZXRhID0ge307CgogICAgZGF0YS5zdWJqZWN0cy5mb3JFYWNoKHMgPT4gewogICAgICAgIGlmICghZGF0YS5zdWJqZWN0TWV0YVtzXSkgZGF0YS5zdWJqZWN0TWV0YVtzXSA9IHt9OwogICAgICAgIGNvbnN0IG1ldGEgPSBkYXRhLnN1YmplY3RNZXRhW3NdOwoKICAgICAgICBpZiAoIW1ldGEubW9kZSkgewogICAgICAgICAgICBpZiAobWV0YS50eXBlID09PSAnZGl2JyB8fCAhbWV0YS50eXBlKSBtZXRhLm1vZGUgPSAnZGl2JzsKICAgICAgICAgICAgZWxzZSBpZiAobWV0YS50eXBlID09PSAnZXRhYicpIG1ldGEubW9kZSA9ICdldGFiJzsKICAgICAgICAgICAgZWxzZSBpZiAobWV0YS50eXBlID09PSAnbGV2ZWwnKSBtZXRhLm1vZGUgPSAnbGV2ZWwnOwogICAgICAgIH0KCiAgICAgICAgaWYgKCFtZXRhLmxldmVscyB8fCAhQXJyYXkuaXNBcnJheShtZXRhLmxldmVscykpIHsKICAgICAgICAgICAgaWYgKHMuaW5jbHVkZXMoIlRlY2hubyIpIHx8IHMuaW5jbHVkZXMoIkVzcGFnbm9sIikgfHwgcy5pbmNsdWRlcygiTFYyIikpIHsKICAgICAgICAgICAgICAgIG1ldGEubGV2ZWxzID0gYWxsTGV2ZWxzLmZpbHRlcihsID0+ICFsLmluY2x1ZGVzKCI2IikpOwogICAgICAgICAgICB9IGVsc2UgaWYgKHMuaW5jbHVkZXMoIlBoaWxvc29waGllIikpIHsKICAgICAgICAgICAgICAgIG1ldGEubGV2ZWxzID0gYWxsTGV2ZWxzLmZpbHRlcihsID0+IGwudG9Mb3dlckNhc2UoKS5pbmNsdWRlcygidGVybSIpKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIG1ldGEubGV2ZWxzID0gWy4uLmFsbExldmVsc107IAogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBpZiAobWV0YS5ldGFiID09PSB1bmRlZmluZWQpIG1ldGEuZXRhYiA9IDA7CiAgICAgICAgaWYgKCFtZXRhLnZvbExldmVsKSBtZXRhLnZvbExldmVsID0ge307CiAgICAgICAgaWYgKCFtZXRhLmNvZGUpIG1ldGEuY29kZSA9ICIiOwogICAgfSk7CgogICAgcmV0dXJuIGRhdGE7Cn0KCi8vIC0tLSBGT05DVElPTiBERSBTQVVWRUdBUkRFIFNVUiBESVNRVUUgKE11bHRpLUVudGl0w6lzIFY5KSAtLS0KZnVuY3Rpb24gZG93bmxvYWRTYXZlRmlsZSgpIHsKICAgIGNvbnN0IGRhdGVTdHIgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkuc2xpY2UoMCwgMTApOwogICAgY29uc3QgZmlsZW5hbWUgPSBgREhHX01hbmFnZXJfTXVsdGlfJHtkYXRlU3RyfS5kYXRhYDsKICAgIAogICAgLy8gU2F1dmVnYXJkZXIgbCdlbnRpdMOpIGNvdXJhbnRlCiAgICBpZiAoREFUQSAmJiBjdXJyZW50RW50aXR5KSBNVUxUSV9EQVRBW2N1cnJlbnRFbnRpdHldID0gREFUQTsKICAgIAogICAgLy8gT24gZXhwb3J0ZSB0b3V0ZXMgbGVzIGVudGl0w6lzICsgbGVzIG5vbXMgKyBsZXMgZW5zZWlnbmFudHMgbXV0dWFsaXPDqXMKICAgIGNvbnN0IGV4cG9ydERhdGEgPSB7CiAgICAgICAgdmVyc2lvbjogJ211bHRpLXY5JywKICAgICAgICBlbnRpdGllczogTVVMVElfREFUQSwKICAgICAgICBuYW1lczogRU5USVRZX05BTUVTLAogICAgICAgIGN1cnJlbnRFbnRpdHk6IGN1cnJlbnRFbnRpdHksCiAgICAgICAgc2hhcmVkVGVhY2hlcnM6IFNIQVJFRF9URUFDSEVSUwogICAgfTsKICAgIAogICAgY29uc3QgYmxvYiA9IG5ldyBCbG9iKFtKU09OLnN0cmluZ2lmeShleHBvcnREYXRhKV0sIHsgdHlwZTogJ2FwcGxpY2F0aW9uL2pzb24nIH0pOwogICAgY29uc3QgdXJsID0gVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTsKICAgIAogICAgY29uc3QgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTsKICAgIGEuaHJlZiA9IHVybDsKICAgIGEuZG93bmxvYWQgPSBmaWxlbmFtZTsKICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoYSk7CiAgICBhLmNsaWNrKCk7CiAgICAKICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoYSk7CiAgICBVUkwucmV2b2tlT2JqZWN0VVJMKHVybCk7Cn0KCmZ1bmN0aW9uIHN3aXRjaFJIVmlldyhtb2RlKSB7IAogICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JoLXZpZXctbGlzdCcpLnN0eWxlLmRpc3BsYXk9bW9kZT09PSdsaXN0Jz8nYmxvY2snOidub25lJzsgCiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmgtdmlldy1kaXNjJykuc3R5bGUuZGlzcGxheT1tb2RlPT09J2Rpc2MnPydibG9jayc6J25vbmUnOyAKICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdidG4tdmlldy1saXN0JykuY2xhc3NMaXN0LnRvZ2dsZSgnYWN0aXZlJyxtb2RlPT09J2xpc3QnKTsgCiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnRuLXZpZXctZGlzYycpLmNsYXNzTGlzdC50b2dnbGUoJ2FjdGl2ZScsbW9kZT09PSdkaXNjJyk7IAogICAgaWYobW9kZT09PSdkaXNjJykgcmVuZGVyUkhEaXNjKCk7IAp9CgpmdW5jdGlvbiB0b2dnbGVSaENvZGVzKCkgeyBzaG93UmhDb2RlcyA9ICFzaG93UmhDb2RlczsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2J0bi10b2dnbGUtY29kZXMnKS5jbGFzc0xpc3QudG9nZ2xlKCdhY3RpdmUnLCBzaG93UmhDb2Rlcyk7IHJlbmRlclJIKCk7IH0KCi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQovLyBHRVNUSU9OIFJIIChDT1JSRUNUSUYgVjIuOS4yKSAtIENvcnJlY3Rpb24gYWxpZ25lbWVudCBoYXV0ZXVyIGRlcyBib3V0b25zCi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQpmdW5jdGlvbiByZW5kZXJSSCgpIHsgCiAgICBjb25zdCB0Ym9keSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyaC1ib2R5Jyk7IAogICAgdGJvZHkuaW5uZXJIVE1MID0gJyc7IAogICAgY29uc3QgaGVhZGVycyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJyNyaC10YWJsZS1saXN0IHRoJyk7CiAgICBoZWFkZXJzLmZvckVhY2goaCA9PiB7IGlmKGguY2xhc3NMaXN0LmNvbnRhaW5zKCdjb2wtY29kZS1oZWFkZXInKSkgaC5zdHlsZS5kaXNwbGF5ID0gc2hvd1JoQ29kZXMgPyAndGFibGUtY2VsbCcgOiAnbm9uZSc7IH0pOwoKICAgIC8vIE1VVFVBTElTQVRJT046IFRyaWVyIGxlcyBTSEFSRURfVEVBQ0hFUlMgcGFyIG9yZHJlIGFscGhhYsOpdGlxdWUKICAgIC8vIE9uIGZpbHRyZSBwYXIgZW50aXTDqSBjb3VyYW50ZSA6IHVuIGVuc2VpZ25hbnQgbidhcHBhcmHDrnQgcXVlIHMnaWwgYSDDqXTDqSBham91dMOpIMOgIGNldHRlIGVudGl0w6kKICAgIGNvbnN0IHNvcnRlZCA9IFNIQVJFRF9URUFDSEVSUwogICAgICAgIC5tYXAoKHQsIGlkeCkgPT4gewogICAgICAgICAgICAvLyBJbmplY3RlciBsYSBkaXNjaXBsaW5lIHNww6ljaWZpcXVlIMOgIGwnZW50aXTDqSBjb3VyYW50ZQogICAgICAgICAgICBjb25zdCBzdWJqZWN0Rm9yRW50aXR5ID0gZ2V0VGVhY2hlclN1YmplY3RGb3JFbnRpdHkodCwgY3VycmVudEVudGl0eSk7CiAgICAgICAgICAgIHJldHVybiB7Li4udCwgX3NoYXJlZElkeDogaWR4LCBzdWJqZWN0OiBzdWJqZWN0Rm9yRW50aXR5fTsKICAgICAgICB9KQogICAgICAgIC5maWx0ZXIodCA9PiB0LmVudGl0aWVzICYmIHQuZW50aXRpZXMuaW5jbHVkZXMoY3VycmVudEVudGl0eSkpCiAgICAgICAgLnNvcnQoKGEsIGIpID0+IChhLm5hbWV8fCcnKS5sb2NhbGVDb21wYXJlKGIubmFtZXx8JycsICdmcicsIHtzZW5zaXRpdml0eTogJ2Jhc2UnfSkpOwoKICAgIC8vIENvbGxlY3RlciBsZXMgbWF0acOocmVzIGRlIGwnZW50aXTDqSBjb3VyYW50ZSB1bmlxdWVtZW50IChjb2jDqXJlbmNlIGF2ZWMgTWF0acOocmVzICYgTW9kYWxpdMOpcykKICAgIGNvbnN0IHN1YmplY3RMaXN0ID0gKERBVEEuc3ViamVjdHMgfHwgW10pLnNsaWNlKCkuc29ydCgoYSxiKSA9PiBhLmxvY2FsZUNvbXBhcmUoYiwgJ2ZyJykpOwoKICAgIHNvcnRlZC5mb3JFYWNoKChwKSA9PiB7IAogICAgICAgIGNvbnN0IGkgPSBwLl9zaGFyZWRJZHg7IC8vIEluZGV4IHLDqWVsIGRhbnMgU0hBUkVEX1RFQUNIRVJTCgogICAgICAgIGlmIChwLmNzZCA9PT0gdW5kZWZpbmVkKSBwLmNzZCA9IDA7CiAgICAgICAgaWYgKHAuZGVjaGFyZ2UgPT09IHVuZGVmaW5lZCkgcC5kZWNoYXJnZSA9IDA7CiAgICAgICAgaWYgKHAuZGVjaF9leHQgPT09IHVuZGVmaW5lZCkgcC5kZWNoX2V4dCA9IDA7CiAgICAgICAgaWYgKHAuYm1wID09PSB1bmRlZmluZWQpIHAuYm1wID0gMDsKICAgICAgICBpZiAoIXAuc2VydmljZXMpIHAuc2VydmljZXMgPSB7Y29sbGVnZTowLCBseWNlZTowLCBwb2xlOjB9OwoKICAgICAgICAvLyBDb2RlIFBORSA6IGNoZXJjaGVyIGRhbnMgdG91dGVzIGxlcyBlbnRpdMOpcwogICAgICAgIGxldCBtZXRhQ29kZSA9ICcnOwogICAgICAgIFsnY29sbGVnZScsJ2x5Y2VlJywnbHljZWVfcHJvJywncG9sZSddLmZvckVhY2goayA9PiB7IAogICAgICAgICAgICBjb25zdCBjID0gTVVMVElfREFUQVtrXT8uc3ViamVjdE1ldGE/LltwLnN1YmplY3RdPy5jb2RlIHx8IE1VTFRJX0RBVEFba10/LnN1YmplY3RNZXRhPy5bcC5zdWJqZWN0XT8ucG5lQ29kZSB8fCAnJzsKICAgICAgICAgICAgaWYgKGMpIG1ldGFDb2RlID0gYzsKICAgICAgICB9KTsKICAgICAgICBsZXQgY29kZUh0bWwgPSBzaG93UmhDb2RlcyA/IGA8dGQgY2xhc3M9ImNvbC1jb2RlIj4ke21ldGFDb2RlfTwvdGQ+YCA6ICcnOwogICAgICAgIAogICAgICAgIGxldCBpbmZvRGlzcGxheSA9ICcnOwogICAgICAgIGxldCByb3dTdHlsZSA9ICcnOwogICAgICAgIGlmIChwLmJtcCA+IDApIHsgaW5mb0Rpc3BsYXkgKz0gYDxkaXYgc3R5bGU9ImZvbnQtc2l6ZTowLjdyZW07IGNvbG9yOiMyYzNlNTA7IGZvbnQtd2VpZ2h0OmJvbGQ7Ij7imIUgQk1QOiAke3AuYm1wfWg8L2Rpdj5gOyByb3dTdHlsZSA9IGBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoOTBkZWcsICNmZmYgMCUsICNlYmY1ZmIgMTAwJSk7YDsgfQogICAgICAgIGlmIChwLmNzZCA+IDApIHsgaW5mb0Rpc3BsYXkgKz0gYDxkaXYgc3R5bGU9ImZvbnQtc2l6ZTowLjdyZW07IGNvbG9yOiMxN2EyYjg7IGZvbnQtd2VpZ2h0OmJvbGQ7Ij4tICR7cC5jc2R9aCBDU0Q8L2Rpdj5gOyBpZighcm93U3R5bGUpIHJvd1N0eWxlID0gYGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCg5MGRlZywgI2ZmZiAwJSwgI2VlZmJmZCAxMDAlKTtgOyB9CiAgICAgICAgaWYgKHAuZGVjaGFyZ2UgPiAwKSB7IGluZm9EaXNwbGF5ICs9IGA8ZGl2IHN0eWxlPSJmb250LXNpemU6MC43cmVtOyBjb2xvcjojZTY3ZTIyOyBmb250LXdlaWdodDpib2xkOyI+LSAke3AuZGVjaGFyZ2V9aCBER0g8L2Rpdj5gOyBpZighcm93U3R5bGUpIHJvd1N0eWxlID0gYGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCg5MGRlZywgI2ZmZiAwJSwgI2ZmZmNmNSAxMDAlKTtgOyB9CiAgICAgICAgaWYgKHAuZGVjaF9leHQgPiAwKSB7IGluZm9EaXNwbGF5ICs9IGA8ZGl2IHN0eWxlPSJmb250LXNpemU6MC43cmVtOyBjb2xvcjojMjdhZTYwOyBmb250LXdlaWdodDpib2xkOyI+LSAke3AuZGVjaF9leHR9aCBSZWN0LjwvZGl2PmA7IGlmKCFyb3dTdHlsZSkgcm93U3R5bGUgPSBgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KDkwZGVnLCAjZmZmIDAlLCAjZWFmYWYxIDEwMCUpO2A7IH0KCiAgICAgICAgY29uc3QgYnRuU3R5bGUgPSAicGFkZGluZzoycHggNXB4OyBtYXJnaW46MDsgZm9udC1zaXplOjAuN3JlbTsiOwogICAgICAgIGNvbnN0IGJtcEJ0biA9IGA8YnV0dG9uIGNsYXNzPSJidG4gYnRuLXNtIiBzdHlsZT0iYmFja2dyb3VuZDojMzQ0OTVlOyBjb2xvcjp3aGl0ZTsgJHtidG5TdHlsZX0iIG9uY2xpY2s9InNldEJNUCgke2l9KSIgdGl0bGU9IkJNUCI+Qk1QPC9idXR0b24+YDsKICAgICAgICBjb25zdCBjc2RCdG4gPSBgPGJ1dHRvbiBjbGFzcz0iYnRuIGJ0bi1zbSIgc3R5bGU9ImJhY2tncm91bmQ6IzE3YTJiODsgY29sb3I6d2hpdGU7ICR7YnRuU3R5bGV9IiBvbmNsaWNrPSJzZXRDU0QoJHtpfSkiIHRpdGxlPSJDU0QiPkNTRDwvYnV0dG9uPmA7CiAgICAgICAgY29uc3QgZGVjaEJ0biA9IGA8YnV0dG9uIGNsYXNzPSJidG4gYnRuLXNtIiBzdHlsZT0iYmFja2dyb3VuZDojOWI1OWI2OyBjb2xvcjp3aGl0ZTsgJHtidG5TdHlsZX0iIG9uY2xpY2s9Im9wZW5EZWNoYXJnZU1lbnUoJHtpfSkiIHRpdGxlPSJEw6ljaGFyZ2UiPkTDqWNoLjwvYnV0dG9uPmA7CgogICAgICAgIC8vIEJhZGdlcyBwYXIgZW50aXTDqSAoaGV1cmVzIGFmZmVjdMOpZXMpCiAgICAgICAgY29uc3QgZW50Q29sb3JzID0ge2NvbGxlZ2U6JyMyOTgwYjknLCBseWNlZTonIzFlODQ0OScsIGx5Y2VlX3BybzonI2QzNTQwMCcsIHBvbGU6JyM4ZTQ0YWQnfTsKICAgICAgICBjb25zdCBlbnRJY29ucyA9IHtjb2xsZWdlOifwn4+rJywgbHljZWU6J/Cfj5vvuI8nLCBseWNlZV9wcm86J/Cfj60nLCBwb2xlOifwn46TJ307CiAgICAgICAgbGV0IGVudGl0eUJhZGdlcyA9ICcnOwogICAgICAgIFsnY29sbGVnZScsJ2x5Y2VlJywnbHljZWVfcHJvJywncG9sZSddLmZvckVhY2goayA9PiB7CiAgICAgICAgICAgIGNvbnN0IGggPSBwYXJzZUZsb2F0KHAuc2VydmljZXM/LltrXSkgfHwgMDsKICAgICAgICAgICAgaWYgKGggPiAwKSBlbnRpdHlCYWRnZXMgKz0gYDxzcGFuIHN0eWxlPSJiYWNrZ3JvdW5kOiR7ZW50Q29sb3JzW2tdfTIyO2NvbG9yOiR7ZW50Q29sb3JzW2tdfTtib3JkZXI6MXB4IHNvbGlkICR7ZW50Q29sb3JzW2tdfTQ0O2JvcmRlci1yYWRpdXM6MTBweDtwYWRkaW5nOjFweCA1cHg7Zm9udC1zaXplOjAuN3JlbTtmb250LXdlaWdodDo3MDA7d2hpdGUtc3BhY2U6bm93cmFwOyI+JHtlbnRJY29uc1trXX0gJHtofWg8L3NwYW4+IGA7CiAgICAgICAgfSk7CiAgICAgICAgLy8gQ2FsY3VsIHBvbmTDqXJhdGlvbiBwb3VyIGNldCBlbnNlaWduYW50IHN1ciBsJ2VudGl0w6kgY291cmFudGUgKGF2ZWMgcGxhZm9ubmVtZW50KQogICAgICAgIGNvbnN0IF9iZCA9IGNhbGNUZWFjaGVySG91cnNCcmVha2Rvd24oaSwgY3VycmVudEVudGl0eSk7CiAgICAgICAgY29uc3QgdG90YWxFbnRpdHlIID0gX2JkLndlaWdodGVkOwogICAgICAgIGNvbnN0IHNvbGRlID0gKHBhcnNlRmxvYXQocC5vcnMpfHwwKSAtIHRvdGFsRW50aXR5SDsKICAgICAgICBjb25zdCBzb2xkZUNvbG9yID0gTWF0aC5hYnMoc29sZGUpIDwgMC4xID8gJyMyN2FlNjAnIDogKHNvbGRlID4gMCA/ICcjZTY3ZTIyJyA6ICcjYzAzOTJiJyk7CgogICAgICAgIGNvbnN0IF9jYXBCYWRnZSA9IF9iZC5wb25kQ2FwcGVkCiAgICAgICAgICAgID8gYDxzcGFuIHRpdGxlPSJQb25kw6lyYXRpb24gcGxhZm9ubsOpZSDDoCAxaCAocsOpZ2xlbWVudGFpcmUpIiBzdHlsZT0iZm9udC1zaXplOjAuOHJlbTtjb2xvcjojZTY3ZTIyO2ZvbnQtd2VpZ2h0OjkwMDt0ZXh0LWRlY29yYXRpb246dW5kZXJsaW5lO3RleHQtdW5kZXJsaW5lLW9mZnNldDoycHg7bWFyZ2luLWxlZnQ6MnB4OyI+4pqg77iPMWg8L3NwYW4+YAogICAgICAgICAgICA6IChfYmQucG9uZEV4Y2VlZHNPUlMKICAgICAgICAgICAgICAgID8gYDxzcGFuIHRpdGxlPSJQb25kw6lyYXRpb24gQlRTL3DDtGxlOiBwcm9mIGTDqXBhc3NlIGwnT1JTIiBzdHlsZT0iZm9udC1zaXplOjAuOHJlbTtjb2xvcjojOGU0NGFkO2ZvbnQtd2VpZ2h0OjkwMDttYXJnaW4tbGVmdDoycHg7Ij7imqDvuI9PUlM8L3NwYW4+YAogICAgICAgICAgICAgICAgOiAnJyk7CiAgICAgICAgY29uc3QgcG9uZERpc3BsYXkgPSBfYmQucG9uZCA+IDAuMDEKICAgICAgICAgICAgPyBgPGRpdiBzdHlsZT0iZm9udC1zaXplOjAuNjhyZW07IGNvbG9yOiM4ZTQ0YWQ7IGZvbnQtd2VpZ2h0OjcwMDsgbWFyZ2luLXRvcDoycHg7IiB0aXRsZT0iRGV2YW50IMOpbMOodmVzICsgcG9uZMOpcmF0aW9uID0gdG90YWwiPiR7X2JkLnJhdy50b0ZpeGVkKDEpfWg8c3BhbiBzdHlsZT0iY29sb3I6I2JiYjsiPis8L3NwYW4+JHtfYmQucG9uZC50b0ZpeGVkKDEpfWg8c3BhbiBzdHlsZT0iY29sb3I6I2JiYjsiPj08L3NwYW4+JHtfYmQud2VpZ2h0ZWQudG9GaXhlZCgxKX1oJHtfY2FwQmFkZ2V9PC9kaXY+YAogICAgICAgICAgICA6ICcnOwoKICAgICAgICBjb25zdCBzdWJqZWN0T3B0aW9ucyA9IHN1YmplY3RMaXN0Lm1hcChzID0+IGA8b3B0aW9uICR7cyA9PT0gcC5zdWJqZWN0ID8gJ3NlbGVjdGVkJyA6ICcnfT4ke3N9PC9vcHRpb24+YCkuam9pbignJyk7CgogICAgICAgIHRib2R5LmlubmVySFRNTCArPSBgPHRyIHN0eWxlPSIke3Jvd1N0eWxlfSI+CiAgICAgICAgICAgIDx0ZCBzdHlsZT0idmVydGljYWwtYWxpZ246bWlkZGxlOyI+PGlucHV0IHR5cGU9InRleHQiIHZhbHVlPSIke3AubmFtZXx8Jyd9IiBvbmNoYW5nZT0idXBkVCgke2l9LCduYW1lJyx0aGlzLnZhbHVlKSI+PC90ZD4KICAgICAgICAgICAgJHtjb2RlSHRtbH0KICAgICAgICAgICAgPHRkIHN0eWxlPSJ2ZXJ0aWNhbC1hbGlnbjptaWRkbGU7Ij48c2VsZWN0IG9uY2hhbmdlPSJ1cGRUKCR7aX0sJ3N1YmplY3QnLHRoaXMudmFsdWUpIj4ke3N1YmplY3RPcHRpb25zfTwvc2VsZWN0PjwvdGQ+CiAgICAgICAgICAgIDx0ZCBzdHlsZT0idmVydGljYWwtYWxpZ246bWlkZGxlOyBtaW4td2lkdGg6MTgwcHg7Ij4KICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9ImRpc3BsYXk6ZmxleDsgZmxleC13cmFwOndyYXA7IGdhcDoycHg7IG1hcmdpbi1ib3R0b206M3B4OyI+JHtlbnRpdHlCYWRnZXMgfHwgJzxlbSBzdHlsZT0iY29sb3I6I2FhYTtmb250LXNpemU6MC43cmVtOyI+Tm9uIGFmZmVjdMOpPC9lbT4nfTwvZGl2PgogICAgICAgICAgICAgICAgJHtwb25kRGlzcGxheX0KICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9ImZvbnQtc2l6ZTowLjdyZW07IGNvbG9yOiR7c29sZGVDb2xvcn07IGZvbnQtd2VpZ2h0OjcwMDsiPlNvbGRlOiAke3NvbGRlPj0wPycrJzonJ30ke3NvbGRlLnRvRml4ZWQoMSl9aDwvZGl2PgogICAgICAgICAgICA8L3RkPgogICAgICAgICAgICA8dGQgc3R5bGU9InZlcnRpY2FsLWFsaWduOm1pZGRsZTsgd2lkdGg6MjAwcHg7Ij4KICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9ImRpc3BsYXk6ZmxleDsganVzdGlmeS1jb250ZW50OmNlbnRlcjsgYWxpZ24taXRlbXM6Y2VudGVyOyBnYXA6M3B4OyBmbGV4LXdyYXA6d3JhcDsiPgogICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImJ0biBidG4tc3VjY2VzcyBidG4tc20iIHN0eWxlPSJiYWNrZ3JvdW5kOiMxNmEwODU7IGNvbG9yOndoaXRlOyAke2J0blN0eWxlfSIgb25jbGljaz0iZWRpdFRlYWNoZXJTZXJ2aWNlcygke2l9KSIgdGl0bGU9IkFmZmVjdGVyIGhldXJlcyBwYXIgZW50aXTDqSI+4pqhPC9idXR0b24+CiAgICAgICAgICAgICAgICAgICAgJHtibXBCdG59ICR7ZGVjaEJ0bn0gJHtjc2RCdG59CiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYnRuIGJ0bi1kYW5nZXIgYnRuLXNtIiBzdHlsZT0iJHtidG5TdHlsZX0iIG9uY2xpY2s9InJlbW92ZVRlYWNoZXJGcm9tRW50aXR5KCR7aX0pIiB0aXRsZT0iUmV0aXJlciBkZSBjZXR0ZSBlbnRpdMOpIiBzdHlsZT0iJHtidG5TdHlsZX07IGJhY2tncm91bmQ6I2U2N2UyMjsgY29sb3I6d2hpdGU7Ij7ihqkgUmV0aXJlcjwvYnV0dG9uPgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDwvdGQ+CiAgICAgICAgPC90cj5gOyAKICAgIH0pOwogICAgCiAgICBpZiAoc29ydGVkLmxlbmd0aCA9PT0gMCkgewogICAgICAgIGNvbnN0IGhhc0dsb2JhbCA9IFNIQVJFRF9URUFDSEVSUy5sZW5ndGggPiAwOwogICAgICAgIHRib2R5LmlubmVySFRNTCA9ICc8dHI+PHRkIGNvbHNwYW49IjkiIHN0eWxlPSJ0ZXh0LWFsaWduOmNlbnRlcjtwYWRkaW5nOjIwcHg7Y29sb3I6I2FhYTtmb250LXN0eWxlOml0YWxpYzsiPicgKyAKICAgICAgICAgICAgKGhhc0dsb2JhbCAKICAgICAgICAgICAgICAgID8gJ0F1Y3VuIGVuc2VpZ25hbnQgYXNzaWduw6kgw6AgY2V0dGUgZW50aXTDqSDigJQgQ2xpcXVleiBzdXIgPGI+8J+TiyBBc3NpZ25lcjwvYj4gcG91ciBlbiBham91dGVyIGRlcHVpcyBsYSBsaXN0ZSBnbG9iYWxlJwogICAgICAgICAgICAgICAgOiAnQXVjdW4gZW5zZWlnbmFudCBkYW5zIGxhIGxpc3RlIGdsb2JhbGUg4oCUIENyw6lleiBkZXMgZW5zZWlnbmFudHMgZGFucyBsXCdvbmdsZXQgPGI+RW5zZWlnbmFudHM8L2I+JwogICAgICAgICAgICApICsgJzwvdGQ+PC90cj4nOwogICAgfQogICAgCiAgICBpZiAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BpbG90YWdlJykuY2xhc3NMaXN0LmNvbnRhaW5zKCdhY3RpdmUnKSkgcmVuZGVyUkhEaXNjKCk7IAp9CgpmdW5jdGlvbiBzZXRDU0QoaWR4KSB7CiAgICBjb25zdCB0ZWFjaGVyID0gU0hBUkVEX1RFQUNIRVJTW2lkeF0gfHwgREFUQS50ZWFjaGVyc1tpZHhdOwogICAgY29uc3QgY3VycmVudCA9IHRlYWNoZXIuY3NkIHx8IDA7CiAgICAKICAgIGNvbnN0IHZhbCA9IHByb21wdChgR8OpcmVyIGxlIENTRCAoQ29tcGzDqW1lbnQgZGUgU2VydmljZSBEb25uw6kpIHBvdXIgJHt0ZWFjaGVyLm5hbWV9LlxuXG5DZSBwcm9mZXNzZXVyIGZlcmEgdW5lIHBhcnRpZSBkZSBzb24gc2VydmljZSBhaWxsZXVycy5cbkNvbWJpZW4gZCdoZXVyZXMgZmFpdC1pbCDDgCBMJ0VYVMOJUklFVVIgP2AsIGN1cnJlbnQpOwogICAgCiAgICBpZiAodmFsICE9PSBudWxsKSB7CiAgICAgICAgY29uc3QgaG91cnMgPSBwYXJzZUZsb2F0KHZhbCk7CiAgICAgICAgaWYgKGlzTmFOKGhvdXJzKSB8fCBob3VycyA8IDApIHJldHVybiBhbGVydCgiVmFsZXVyIGludmFsaWRlIik7CiAgICAgICAgaWYgKGhvdXJzID49IHRlYWNoZXIub3JzKSByZXR1cm4gYWxlcnQoIkxlIENTRCBuZSBwZXV0IHBhcyDDqnRyZSBzdXDDqXJpZXVyIG91IMOpZ2FsIMOgIGwnT1JTIHRvdGFsICEiKTsKICAgICAgICAKICAgICAgICB0ZWFjaGVyLmNzZCA9IGhvdXJzOwogICAgICAgIHNhdmVEYXRhKCk7CiAgICAgICAgcmVuZGVyUkgoKTsKICAgICAgICAvLyBPbiByYWZyYcOuY2hpdCBsZXMgdGFibGVhdXggZGUgYm9yZCBjYXIgbCdhcHBvcnQgY2hhbmdlCiAgICAgICAgaWYgKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyaC12aWV3LWRpc2MnKS5zdHlsZS5kaXNwbGF5ICE9PSAnbm9uZScpIHJlbmRlclJIRGlzYygpOwogICAgICAgIGNhbGN1bGF0ZVJlY2FwKCk7CiAgICB9Cn0KCmZ1bmN0aW9uIHNldERlY2hhcmdlKGlkeCkgewogICAgY29uc3QgdGVhY2hlciA9IFNIQVJFRF9URUFDSEVSU1tpZHhdIHx8IERBVEEudGVhY2hlcnNbaWR4XTsKICAgIGNvbnN0IGN1cnJlbnQgPSB0ZWFjaGVyLmRlY2hhcmdlIHx8IDA7CiAgICAKICAgIGNvbnN0IHZhbCA9IHByb21wdChgR8OpcmVyIGxlcyBEw6ljaGFyZ2VzIC8gSGV1cmVzIGRlIExhYm8gcG91ciAke3RlYWNoZXIubmFtZX0uXG5cbkNlcyBoZXVyZXMgc29udCBQQVnDiUVTIG1haXMgbmUgc29udCBQQVMgZGVzIGhldXJlcyBkZSBjb3VycyAoZmFjZSDDqWzDqHZlcykuXG5FeDogSGV1cmUgZGUgVmFpc3NlbGxlLCBDYWJpbmV0LCBTeW5kaWNhbC4uLlxuXG5Wb2x1bWUgw6AgZMOpZHVpcmUgZHUgdGVtcHMgZGUgY291cnMgOmAsIGN1cnJlbnQpOwogICAgCiAgICBpZiAodmFsICE9PSBudWxsKSB7CiAgICAgICAgY29uc3QgaG91cnMgPSBwYXJzZUZsb2F0KHZhbCk7CiAgICAgICAgaWYgKGlzTmFOKGhvdXJzKSB8fCBob3VycyA8IDApIHJldHVybiBhbGVydCgiVmFsZXVyIGludmFsaWRlIik7CiAgICAgICAgaWYgKGhvdXJzID49IHRlYWNoZXIub3JzKSByZXR1cm4gYWxlcnQoIkxhIGTDqWNoYXJnZSBuZSBwZXV0IHBhcyBkw6lwYXNzZXIgbCdPUlMgISIpOwogICAgICAgIAogICAgICAgIHRlYWNoZXIuZGVjaGFyZ2UgPSBob3VyczsKICAgICAgICBzYXZlRGF0YSgpOwogICAgICAgIHJlbmRlclJIKCk7CiAgICAgICAgaWYgKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyaC12aWV3LWRpc2MnKS5zdHlsZS5kaXNwbGF5ICE9PSAnbm9uZScpIHJlbmRlclJIRGlzYygpOwogICAgICAgIGNhbGN1bGF0ZVJlY2FwKCk7CiAgICB9Cn0KCi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQovLyBWRU5USUxBVElPTiBWSVNVRUxMRSAoVjIuNSkgLSBQb3AtdXAgYXZlYyBjYXNlcyBtdWx0aXBsZXMKLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgpsZXQgY3VycmVudFNwbGl0SWR4ID0gLTE7IC8vIFBvdXIgbcOpbW9yaXNlciBxdWVsIHByb2Ygb24gbW9kaWZpZQoKZnVuY3Rpb24gc3BsaXRUZWFjaGVyKGlkeCkgewogICAgY29uc3QgdGVhY2hlciA9IERBVEEudGVhY2hlcnNbaWR4XTsKICAgIAogICAgLy8gMS4gVHJvdXZlciBsZXMgc291cy1tYXRpw6hyZXMKICAgIGNvbnN0IGNoaWxkcmVuID0gREFUQS5zdWJqZWN0cy5maWx0ZXIocyA9PiBEQVRBLnN1YmplY3RNZXRhW3NdLnBhcmVudCA9PT0gdGVhY2hlci5zdWJqZWN0KTsKICAgIAogICAgaWYgKGNoaWxkcmVuLmxlbmd0aCA9PT0gMCkgcmV0dXJuIGFsZXJ0KCLimqDvuI8gQ2V0dGUgbWF0acOocmUgbidhIGF1Y3VuZSBzb3VzLW1hdGnDqHJlIHJhdHRhY2jDqWUgKGV4OiBVTlNTLCBTZWN0aW9uLi4uKSBkYW5zIGwnb25nbGV0ICdNYXRpw6hyZXMnLiIpOwoKICAgIGN1cnJlbnRTcGxpdElkeCA9IGlkeDsKICAgIAogICAgLy8gMi4gUmVtcGxpciBsZXMgaW5mb3MgZHUgUG9wLXVwCiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3BsaXQtaW5mbycpLmlubmVySFRNTCA9IGAKICAgICAgICBQcm9mZXNzZXVyIDogJHt0ZWFjaGVyLm5hbWV9PGJyPgogICAgICAgIERpc2NpcGxpbmUgOiAke3RlYWNoZXIuc3ViamVjdH08YnI+CiAgICAgICAgPHNwYW4gc3R5bGU9ImRpc3BsYXk6YmxvY2s7IG1hcmdpbi10b3A6NXB4OyBib3JkZXItdG9wOjFweCBzb2xpZCAjYTJkOWNlOyBwYWRkaW5nLXRvcDo1cHg7Ij4KICAgICAgICBEaXNwb25pYmxlIHN1ciBjZXR0ZSBsaWduZSA6IDxzdHJvbmc+JHt0ZWFjaGVyLm9yc30gaDwvc3Ryb25nPgogICAgICAgIDwvc3Bhbj4KICAgIGA7CgogICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NwbGl0LWNvbnRhaW5lcicpOwogICAgY29udGFpbmVyLmlubmVySFRNTCA9ICcnOwoKICAgIC8vIDMuIEfDqW7DqXJlciB1bmUgbGlnbmUgcG91ciBjaGFxdWUgbWF0acOocmUgZmlsbGUKICAgIGNoaWxkcmVuLmZvckVhY2goY2hpbGQgPT4gewogICAgICAgIGNvbnRhaW5lci5pbm5lckhUTUwgKz0gYAogICAgICAgICAgICA8ZGl2IGNsYXNzPSJzcGxpdC1yb3ciPgogICAgICAgICAgICAgICAgPGxhYmVsPiR7Y2hpbGR9PC9sYWJlbD4KICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJudW1iZXIiIGlkPSJzcGxpdC12YWwtJHtjaGlsZH0iIHBsYWNlaG9sZGVyPSIwIiBtaW49IjAiIG1heD0iJHt0ZWFjaGVyLm9yc30iIHN0ZXA9IjAuNSI+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgIGA7CiAgICB9KTsKCiAgICAvLyA0LiBBZmZpY2hlciBsZSBQb3AtdXAKICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzcGxpdC1vdmVybGF5Jykuc3R5bGUuZGlzcGxheSA9ICdmbGV4JzsKICAgIAogICAgLy8gRm9jdXMgc3VyIGxhIHByZW1pw6hyZSBjYXNlCiAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICBjb25zdCBmaXJzdElucHV0ID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJ2lucHV0Jyk7CiAgICAgICAgaWYoZmlyc3RJbnB1dCkgZmlyc3RJbnB1dC5mb2N1cygpOwogICAgfSwgMTAwKTsKfQoKZnVuY3Rpb24gY29uZmlybVZlbnRpbGF0aW9uKCkgewogICAgaWYgKGN1cnJlbnRTcGxpdElkeCA9PT0gLTEpIHJldHVybjsKICAgIAogICAgY29uc3QgdGVhY2hlciA9IERBVEEudGVhY2hlcnNbY3VycmVudFNwbGl0SWR4XTsKICAgIGNvbnN0IGNoaWxkcmVuID0gREFUQS5zdWJqZWN0cy5maWx0ZXIocyA9PiBEQVRBLnN1YmplY3RNZXRhW3NdLnBhcmVudCA9PT0gdGVhY2hlci5zdWJqZWN0KTsKICAgIGxldCB0b3RhbFZlbnRpbGUgPSAwOwogICAgbGV0IG5ld0xpbmVzID0gW107CgogICAgLy8gMS4gT24gcsOpY3Vww6hyZSBsZXMgdmFsZXVycyBzYWlzaWVzCiAgICBmb3IgKGxldCBjaGlsZCBvZiBjaGlsZHJlbikgewogICAgICAgIGNvbnN0IGlucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYHNwbGl0LXZhbC0ke2NoaWxkfWApOwogICAgICAgIGNvbnN0IHZhbCA9IHBhcnNlRmxvYXQoaW5wdXQudmFsdWUpOwogICAgICAgIAogICAgICAgIGlmICghaXNOYU4odmFsKSAmJiB2YWwgPiAwKSB7CiAgICAgICAgICAgIHRvdGFsVmVudGlsZSArPSB2YWw7CiAgICAgICAgICAgIG5ld0xpbmVzLnB1c2goeyBzdWJqZWN0OiBjaGlsZCwgaG91cnM6IHZhbCB9KTsKICAgICAgICB9CiAgICB9CgogICAgLy8gMi4gVsOpcmlmaWNhdGlvbnMKICAgIGlmICh0b3RhbFZlbnRpbGUgPT09IDApIHsKICAgICAgICByZXR1cm4gY2xvc2VTcGxpdE1vZGFsKCk7IC8vIFJpZW4gw6AgZmFpcmUKICAgIH0KICAgIGlmICh0b3RhbFZlbnRpbGUgPiB0ZWFjaGVyLm9ycykgewogICAgICAgIGFsZXJ0KGDim5QgRXJyZXVyIDogVm91cyBlc3NheWV6IGRlIHZlbnRpbGVyICR7dG90YWxWZW50aWxlfWggYWxvcnMgcXVlIGxlIHByb2Zlc3NldXIgbidhIHF1ZSAke3RlYWNoZXIub3JzfWggc3VyIGNldHRlIGxpZ25lICFgKTsKICAgICAgICByZXR1cm47CiAgICB9CgogICAgLy8gMy4gQXBwbGljYXRpb24gZGVzIGNoYW5nZW1lbnRzCiAgICAvLyBBLiBPbiByw6lkdWl0IGxhIGxpZ25lIG3DqHJlCiAgICB0ZWFjaGVyLm9ycyAtPSB0b3RhbFZlbnRpbGU7CgogICAgLy8gQi4gT24gaW5zw6hyZSBsZXMgbm91dmVsbGVzIGxpZ25lcyBqdXN0ZSBlbiBkZXNzb3VzCiAgICAvLyBPbiBpbnZlcnNlIGxhIGJvdWNsZSBwb3VyIGxlcyBpbnPDqXJlciBkYW5zIGxlIGJvbiBvcmRyZSB2aXN1ZWwKICAgIGZvciAobGV0IGkgPSBuZXdMaW5lcy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgewogICAgICAgIGNvbnN0IGxpbmUgPSBuZXdMaW5lc1tpXTsKICAgICAgICBEQVRBLnRlYWNoZXJzLnNwbGljZShjdXJyZW50U3BsaXRJZHggKyAxLCAwLCB7CiAgICAgICAgICAgIG5hbWU6IHRlYWNoZXIubmFtZSwKICAgICAgICAgICAgc3ViamVjdDogbGluZS5zdWJqZWN0LAogICAgICAgICAgICBzdGF0dXM6IHRlYWNoZXIuc3RhdHVzLAogICAgICAgICAgICBvcnM6IGxpbmUuaG91cnMsCiAgICAgICAgICAgIGhzYTogMCAvLyBQYXMgZCdIU0Egc3VyIGxlcyB2ZW50aWxhdGlvbnMKICAgICAgICB9KTsKICAgIH0KCiAgICAvLyA0LiBTYXV2ZWdhcmRlIGV0IEZlcm1ldHVyZQogICAgc2F2ZURhdGEoKTsKICAgIHJlbmRlclJIKCk7CiAgICBjbG9zZVNwbGl0TW9kYWwoKTsKICAgIAogICAgLy8gUGV0aXQgZmVlZGJhY2sgc3ltcGEKICAgIC8vIGFsZXJ0KGDinIUgVmVudGlsYXRpb24gZWZmZWN0dcOpZSBhdmVjIHN1Y2PDqHMgIWApOyAKfQoKZnVuY3Rpb24gY2xvc2VTcGxpdE1vZGFsKCkgewogICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NwbGl0LW92ZXJsYXknKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOwogICAgY3VycmVudFNwbGl0SWR4ID0gLTE7Cn0KCmZ1bmN0aW9uIHVwZFQoaSxmLHYpeyAKICAgIC8vIE1VVFVBTElTQVRJT046IG1pc2Ugw6Agam91ciBkYW5zIFNIQVJFRF9URUFDSEVSUwogICAgaWYgKFNIQVJFRF9URUFDSEVSU1tpXSkgewogICAgICAgIFNIQVJFRF9URUFDSEVSU1tpXVtmXSA9IChmPT0nb3JzJ3x8Zj09J2hzYScpID8gcGFyc2VGbG9hdCh2KXx8MCA6IHY7CiAgICAgICAgLy8gU2kgb24gY2hhbmdlIGxhIGRpc2NpcGxpbmUgZGVwdWlzIGxhIGxpc3RlIHByb2YgZCd1bmUgZW50aXTDqSwKICAgICAgICAvLyBtZXR0cmUgw6Agam91ciBzdWJqZWN0c1tjdXJyZW50RW50aXR5XSBwb3VyIGdhcmRlciBsYSBkaXNjaXBsaW5lIHBhciBlbnRpdMOpCiAgICAgICAgaWYgKGYgPT09ICdzdWJqZWN0JykgewogICAgICAgICAgICBpZiAoIVNIQVJFRF9URUFDSEVSU1tpXS5zdWJqZWN0cykgU0hBUkVEX1RFQUNIRVJTW2ldLnN1YmplY3RzID0ge307CiAgICAgICAgICAgIFNIQVJFRF9URUFDSEVSU1tpXS5zdWJqZWN0c1tjdXJyZW50RW50aXR5XSA9IHY7CiAgICAgICAgfQogICAgfQogICAgc2F2ZUFsbERhdGEoKTsgCiAgICBpZihkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGlsb3RhZ2UnKS5jbGFzc0xpc3QuY29udGFpbnMoJ2FjdGl2ZScpKSB7CiAgICAgICAgcmVuZGVyUkhEaXNjKCk7IAogICAgfSBlbHNlIHsKICAgICAgICByZW5kZXJSSCgpOwogICAgfQp9CmZ1bmN0aW9uIGFkZFRlYWNoZXJUb1N1YmplY3QocykgeyAKICAgIC8vIE1VVFVBTElTQVRJT046IGNyw6llciBkYW5zIFNIQVJFRF9URUFDSEVSUyBhdmVjIGhldXJlcyBwb3VyIGwnZW50aXTDqSBjb3VyYW50ZQogICAgY29uc3QgbmV3VCA9IHsKICAgICAgICBpZDogJ1RfJyArIERhdGUubm93KCkgKyAnXycgKyBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zbGljZSgyLDYpLAogICAgICAgIG5hbWU6ICJOb3V2ZWF1IiwKICAgICAgICBzdWJqZWN0OiBzLAogICAgICAgIHN0YXR1czogIkNlcnRpZmnDqSIsCiAgICAgICAgb3JzOiAxOCwKICAgICAgICBoc2E6IDAsCiAgICAgICAgY3NkOiAwLAogICAgICAgIGRlY2hhcmdlOiAwLAogICAgICAgIGRlY2hfZXh0OiAwLAogICAgICAgIGJtcDogMCwKICAgICAgICBzZXJ2aWNlczoge2NvbGxlZ2U6MCwgbHljZWU6MCwgbHljZWVfcHJvOjAsIHBvbGU6MH0sCiAgICAgICAgZW50aXRpZXM6IFtdCiAgICB9OwogICAgU0hBUkVEX1RFQUNIRVJTLnB1c2gobmV3VCk7CiAgICByZW5kZXJSSCgpOyAKICAgIHNhdmVBbGxEYXRhKCk7CiAgICBpZihkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGlsb3RhZ2UnKS5jbGFzc0xpc3QuY29udGFpbnMoJ2FjdGl2ZScpKSByZW5kZXJSSERpc2MoKTsgCn0KZnVuY3Rpb24gZGVsVChpKXsgU0hBUkVEX1RFQUNIRVJTLnNwbGljZShpLDEpOyByZW5kZXJSSCgpOyBzYXZlQWxsRGF0YSgpOyB9CmZ1bmN0aW9uIGNsZWFyVGVhY2hlcnMoKXsgaWYoY29uZmlybSgiU3VwcHJpbWVyIFRPVVMgbGVzIGVuc2VpZ25hbnRzID9cbihDZXR0ZSBhY3Rpb24gYWZmZWN0ZSB0b3V0ZXMgbGVzIGVudGl0w6lzKSIpKSB7IFNIQVJFRF9URUFDSEVSUz1bXTsgaWYoREFUQS50ZWFjaGVycykgREFUQS50ZWFjaGVycz1bXTsgcmVuZGVyUkgoKTsgc2F2ZUFsbERhdGEoKTsgfSB9CmZ1bmN0aW9uIHByb21wdEFkZFRlYWNoZXIoKSB7CiAgICAvLyBPdXZyaXIgbGUgbW9kYWwgZGUgc8OpbGVjdGlvbiBkZSBtYXRpw6hyZSBwb3VyIGFqb3V0ZXIgdW4gZW5zZWlnbmFudCBtdXR1YWxpc8OpCiAgICBvcGVuQWRkU3ViamVjdE1vZGFsKHRydWUpOyAvLyB0cnVlID0gbW9kZSAiYWpvdXRlciBlbnNlaWduYW50Igp9CgovKiogU3VyY2hhcmdlIDogc2kgbW9kZT0ndGVhY2hlcicsIGFqb3V0ZXIgdW4gZW5zZWlnbmFudCBhcHLDqHMgc8OpbGVjdGlvbiBkZSBtYXRpw6hyZSAqLwpmdW5jdGlvbiBvcGVuQWRkU3ViamVjdE1vZGFsRm9yVGVhY2hlcigpIHsKICAgIC8vIENvbGxlY3RlciB0b3V0ZXMgbGVzIG1hdGnDqHJlcyBkZSB0b3V0ZXMgbGVzIGVudGl0w6lzCiAgICBjb25zdCBhbGxTdWJzID0gbmV3IFNldCgpOwogICAgWydjb2xsZWdlJywnbHljZWUnLCdseWNlZV9wcm8nLCdwb2xlJ10uZm9yRWFjaChrID0+IHsgTVVMVElfREFUQVtrXT8uc3ViamVjdHM/LmZvckVhY2gocyA9PiBhbGxTdWJzLmFkZChzKSk7IH0pOwogICAgCiAgICBsZXQgb3ZlcmxheSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhZGQtdGVhY2hlci1zdWJqZWN0LW1vZGFsJyk7CiAgICBpZiAoIW92ZXJsYXkpIHsKICAgICAgICBvdmVybGF5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgICAgb3ZlcmxheS5pZCA9ICdhZGQtdGVhY2hlci1zdWJqZWN0LW1vZGFsJzsKICAgICAgICBvdmVybGF5LnN0eWxlLmNzc1RleHQgPSAnZGlzcGxheTpub25lOyBwb3NpdGlvbjpmaXhlZDsgdG9wOjA7IGxlZnQ6MDsgd2lkdGg6MTAwJTsgaGVpZ2h0OjEwMCU7IGJhY2tncm91bmQ6cmdiYSgwLDAsMCwwLjYpOyB6LWluZGV4OjMwMDAwOyBqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyOyBhbGlnbi1pdGVtczpjZW50ZXI7JzsKICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKG92ZXJsYXkpOwogICAgfQogICAgCiAgICBjb25zdCBzdWJqZWN0TGlzdCA9IFsuLi5hbGxTdWJzXS5zb3J0KCk7CiAgICBjb25zdCBkYXRhbGlzdE9wdHMgPSBzdWJqZWN0TGlzdC5tYXAocyA9PiBgPG9wdGlvbiB2YWx1ZT0iJHtzfSI+YCkuam9pbignJyk7CiAgICAKICAgIC8vIEFqb3V0ZXIgYXVzc2kgbGVzIGRpc2NpcGxpbmVzIFBORQogICAgbGV0IHBuZU9wdHMgPSAnJzsKICAgIE9iamVjdC5lbnRyaWVzKFBORV9CVVJFQVVYKS5mb3JFYWNoKChbYmlkLCBiXSkgPT4gewogICAgICAgIE9iamVjdC5lbnRyaWVzKGIuZGlzY2lwbGluZXMpLmZvckVhY2goKFtjb2RlLCBsYWJlbF0pID0+IHsKICAgICAgICAgICAgcG5lT3B0cyArPSBgPG9wdGlvbiB2YWx1ZT0iJHtsYWJlbH0iPmA7CiAgICAgICAgfSk7CiAgICB9KTsKICAgIAogICAgb3ZlcmxheS5pbm5lckhUTUwgPSBgCiAgICAgICAgPGRpdiBzdHlsZT0iYmFja2dyb3VuZDp3aGl0ZTsgYm9yZGVyLXJhZGl1czoxMnB4OyBwYWRkaW5nOjMwcHg7IHdpZHRoOjQ2MHB4OyBtYXgtd2lkdGg6OTV2dzsgYm94LXNoYWRvdzowIDEwcHggNDBweCByZ2JhKDAsMCwwLDAuMyk7Ij4KICAgICAgICAgICAgPGRpdiBzdHlsZT0iZGlzcGxheTpmbGV4OyBqdXN0aWZ5LWNvbnRlbnQ6c3BhY2UtYmV0d2VlbjsgYWxpZ24taXRlbXM6Y2VudGVyOyBtYXJnaW4tYm90dG9tOjIwcHg7Ij4KICAgICAgICAgICAgICAgIDxoMyBzdHlsZT0ibWFyZ2luOjA7IGNvbG9yOiMyYzNlNTA7Ij7wn5GlIEFqb3V0ZXIgdW4gRW5zZWlnbmFudDwvaDM+CiAgICAgICAgICAgICAgICA8YnV0dG9uIG9uY2xpY2s9ImRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhZGQtdGVhY2hlci1zdWJqZWN0LW1vZGFsJykuc3R5bGUuZGlzcGxheT0nbm9uZSciIHN0eWxlPSJiYWNrZ3JvdW5kOm5vbmU7Ym9yZGVyOm5vbmU7Zm9udC1zaXplOjEuNHJlbTtjdXJzb3I6cG9pbnRlcjtjb2xvcjojOTk5OyI+w5c8L2J1dHRvbj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDxkaXYgc3R5bGU9Im1hcmdpbi1ib3R0b206MTVweDsiPgogICAgICAgICAgICAgICAgPGxhYmVsIHN0eWxlPSJmb250LXdlaWdodDo2MDA7IGRpc3BsYXk6YmxvY2s7IG1hcmdpbi1ib3R0b206NXB4OyI+UHLDqW5vbSAvIE5vbSA6PC9sYWJlbD4KICAgICAgICAgICAgICAgIDxpbnB1dCBpZD0ibmV3LXRlYWNoZXItbmFtZSIgcGxhY2Vob2xkZXI9IkV4OiBEVVBPTlQiIHN0eWxlPSJ3aWR0aDoxMDAlOyBwYWRkaW5nOjEwcHg7IGJvcmRlcjoycHggc29saWQgIzI3YWU2MDsgYm9yZGVyLXJhZGl1czo2cHg7IGZvbnQtc2l6ZToxcmVtOyBib3gtc2l6aW5nOmJvcmRlci1ib3g7Ij4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDxkaXYgc3R5bGU9Im1hcmdpbi1ib3R0b206MTVweDsiPgogICAgICAgICAgICAgICAgPGxhYmVsIHN0eWxlPSJmb250LXdlaWdodDo2MDA7IGRpc3BsYXk6YmxvY2s7IG1hcmdpbi1ib3R0b206NXB4OyI+RGlzY2lwbGluZSA6PC9sYWJlbD4KICAgICAgICAgICAgICAgIDxpbnB1dCBpZD0ibmV3LXRlYWNoZXItc3ViamVjdCIgbGlzdD0idGVhY2hlci1zdWJqZWN0LWxpc3QiIHBsYWNlaG9sZGVyPSJUYXBleiBwb3VyIGNoZXJjaGVyLi4uIiBzdHlsZT0id2lkdGg6MTAwJTsgcGFkZGluZzoxMHB4OyBib3JkZXI6MnB4IHNvbGlkICMzNDk4ZGI7IGJvcmRlci1yYWRpdXM6NnB4OyBmb250LXNpemU6MXJlbTsgYm94LXNpemluZzpib3JkZXItYm94OyI+CiAgICAgICAgICAgICAgICA8ZGF0YWxpc3QgaWQ9InRlYWNoZXItc3ViamVjdC1saXN0Ij4ke2RhdGFsaXN0T3B0c30ke3BuZU9wdHN9PC9kYXRhbGlzdD4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDxkaXYgc3R5bGU9Im1hcmdpbi1ib3R0b206MTVweDsiPgogICAgICAgICAgICAgICAgPGxhYmVsIHN0eWxlPSJmb250LXdlaWdodDo2MDA7IGRpc3BsYXk6YmxvY2s7IG1hcmdpbi1ib3R0b206NXB4OyI+R3JhZGUgOjwvbGFiZWw+CiAgICAgICAgICAgICAgICA8c2VsZWN0IGlkPSJuZXctdGVhY2hlci1zdGF0dXMiIHN0eWxlPSJ3aWR0aDoxMDAlOyBwYWRkaW5nOjhweDsgYm9yZGVyOjFweCBzb2xpZCAjZGRkOyBib3JkZXItcmFkaXVzOjZweDsiPgogICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IiI+4oCTIFPDqWxlY3Rpb25uZXIg4oCTPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgPG9wdGlvbj5BZ3LDqWfDqTwvb3B0aW9uPjxvcHRpb24+Q2VydGlmacOpPC9vcHRpb24+PG9wdGlvbj5QTFA8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICA8b3B0aW9uPkNBUEVQUzwvb3B0aW9uPjxvcHRpb24+QWdyw6lnw6kgRVBTPC9vcHRpb24+PG9wdGlvbj5QRUdDPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgPG9wdGlvbj5QQ1M8L29wdGlvbj48b3B0aW9uPkNQRTwvb3B0aW9uPjxvcHRpb24+Q29udHJhY3R1ZWw8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICA8b3B0aW9uPlZhY2F0YWlyZTwvb3B0aW9uPjxvcHRpb24+UFJBRzwvb3B0aW9uPjxvcHRpb24+Qk1QL0NTUjwvb3B0aW9uPjxvcHRpb24+QXV0cmU8L29wdGlvbj4KICAgICAgICAgICAgICAgIDwvc2VsZWN0PgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPGRpdiBzdHlsZT0ibWFyZ2luLWJvdHRvbToyMHB4OyI+CiAgICAgICAgICAgICAgICA8bGFiZWwgc3R5bGU9ImZvbnQtd2VpZ2h0OjYwMDsgZGlzcGxheTpibG9jazsgbWFyZ2luLWJvdHRvbTo1cHg7Ij5PUlMgKGhldXJlcyB0b3RhbGVzKSA6PC9sYWJlbD4KICAgICAgICAgICAgICAgIDxpbnB1dCBpZD0ibmV3LXRlYWNoZXItb3JzIiB0eXBlPSJudW1iZXIiIHZhbHVlPSIxOCIgc3RlcD0iMC41IiBtaW49IjAiIHN0eWxlPSJ3aWR0aDoxMDBweDsgcGFkZGluZzo4cHg7IGJvcmRlcjoxcHggc29saWQgI2RkZDsgYm9yZGVyLXJhZGl1czo2cHg7IHRleHQtYWxpZ246Y2VudGVyOyI+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8ZGl2IHN0eWxlPSJkaXNwbGF5OmZsZXg7IGdhcDoxMHB4OyBqdXN0aWZ5LWNvbnRlbnQ6ZmxleC1lbmQ7Ij4KICAgICAgICAgICAgICAgIDxidXR0b24gb25jbGljaz0iZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FkZC10ZWFjaGVyLXN1YmplY3QtbW9kYWwnKS5zdHlsZS5kaXNwbGF5PSdub25lJyIgc3R5bGU9InBhZGRpbmc6OHB4IDIwcHg7IGJvcmRlcjoxcHggc29saWQgI2RkZDsgYm9yZGVyLXJhZGl1czo2cHg7IGJhY2tncm91bmQ6I2Y1ZjVmNTsgY3Vyc29yOnBvaW50ZXI7Ij5Bbm51bGVyPC9idXR0b24+CiAgICAgICAgICAgICAgICA8YnV0dG9uIG9uY2xpY2s9ImNvbmZpcm1BZGRUZWFjaGVyRnJvbU1vZGFsKCkiIHN0eWxlPSJwYWRkaW5nOjhweCAyMHB4OyBib3JkZXI6bm9uZTsgYm9yZGVyLXJhZGl1czo2cHg7IGJhY2tncm91bmQ6IzI3YWU2MDsgY29sb3I6d2hpdGU7IGZvbnQtd2VpZ2h0OjYwMDsgY3Vyc29yOnBvaW50ZXI7Ij7inJMgQWpvdXRlcjwvYnV0dG9uPgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICA8L2Rpdj5gOwogICAgCiAgICBvdmVybGF5LnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7CiAgICBzZXRUaW1lb3V0KCgpID0+IHsgY29uc3QgbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCduZXctdGVhY2hlci1uYW1lJyk7IGlmKG4pIG4uZm9jdXMoKTsgfSwgMTAwKTsKfQoKZnVuY3Rpb24gY29uZmlybUFkZFRlYWNoZXJGcm9tTW9kYWwoKSB7CiAgICBjb25zdCBuYW1lID0gKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCduZXctdGVhY2hlci1uYW1lJykudmFsdWUgfHwgJycpLnRyaW0oKTsKICAgIGNvbnN0IHN1YmplY3QgPSAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ25ldy10ZWFjaGVyLXN1YmplY3QnKS52YWx1ZSB8fCAnJykudHJpbSgpOwogICAgY29uc3Qgc3RhdHVzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ25ldy10ZWFjaGVyLXN0YXR1cycpLnZhbHVlOwogICAgY29uc3Qgb3JzID0gcGFyc2VGbG9hdChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbmV3LXRlYWNoZXItb3JzJykudmFsdWUpIHx8IDE4OwogICAgCiAgICBpZiAoIW5hbWUpIHsgYWxlcnQoJ1ZldWlsbGV6IHNhaXNpciB1biBub20uJyk7IHJldHVybjsgfQogICAgaWYgKCFzdWJqZWN0KSB7IGFsZXJ0KCdWZXVpbGxleiBzYWlzaXIgdW5lIGRpc2NpcGxpbmUuJyk7IHJldHVybjsgfQogICAgCiAgICAvLyBWw6lyaWZpZXIgc2kgbGEgbWF0acOocmUgZXhpc3RlLCBzaW5vbiBsYSBjcsOpZXIKICAgIGlmIChEQVRBICYmICFEQVRBLnN1YmplY3RzLmluY2x1ZGVzKHN1YmplY3QpKSB7CiAgICAgICAgaWYgKGNvbmZpcm0oIkxhIG1hdGnDqHJlICciICsgc3ViamVjdCArICInIG4nZXhpc3RlIHBhcyBkYW5zIGwnZW50aXTDqSBjb3VyYW50ZS5cblZvdWxlei12b3VzIGxhIGNyw6llciA/IikpIHsKICAgICAgICAgICAgREFUQS5zdWJqZWN0cy5wdXNoKHN1YmplY3QpOwogICAgICAgICAgICBEQVRBLnN1YmplY3RNZXRhW3N1YmplY3RdID0geyBtb2RlOidkaXYnLCBsZXZlbHM6Z2V0RGVmYXVsdEFjdGl2ZUxldmVscyhzdWJqZWN0KSwgZXRhYjowLCB2b2xMZXZlbDp7fSwgcGFyZW50OicnLCBjb2RlOicnIH07CiAgICAgICAgICAgIERBVEEuc3RydWN0dXJlLmZvckVhY2gobCA9PiB7IGlmKCFEQVRBLmxldmVsQ29uZmlnW2wubGV2ZWxdKSBEQVRBLmxldmVsQ29uZmlnW2wubGV2ZWxdPXt9OyBEQVRBLmxldmVsQ29uZmlnW2wubGV2ZWxdW3N1YmplY3RdPXtiYXNlOjAsZGVtaTowLG1hcmdlOjAsY29lZjoxLjB9OyB9KTsKICAgICAgICAgICAgc2F2ZURhdGEoKTsKICAgICAgICB9CiAgICB9CiAgICAKICAgIGNvbnN0IG5ld1QgPSB7CiAgICAgICAgaWQ6ICdUXycgKyBEYXRlLm5vdygpICsgJ18nICsgTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc2xpY2UoMiw2KSwKICAgICAgICBuYW1lLCBzdWJqZWN0LCBncmFkZTogc3RhdHVzLCBzdGF0dXMsIG9ycywgaHNhOjAsIGNzZDowLCBkZWNoYXJnZTowLCBkZWNoX2V4dDowLCBibXA6MCwKICAgICAgICBzZXJ2aWNlczoge2NvbGxlZ2U6MCwgbHljZWU6MCwgbHljZWVfcHJvOjAsIHBvbGU6MH0sCiAgICAgICAgZW50aXRpZXM6IFtdCiAgICB9OwogICAgU0hBUkVEX1RFQUNIRVJTLnB1c2gobmV3VCk7CiAgICAKICAgIHNhdmVBbGxEYXRhKCk7CiAgICByZW5kZXJSSCgpOwogICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FkZC10ZWFjaGVyLXN1YmplY3QtbW9kYWwnKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOwp9CgpmdW5jdGlvbiBpbXBvcnRSSChpbnB1dCkgewogICAgY29uc3QgZiA9IGlucHV0LmZpbGVzWzBdOwogICAgaWYgKCFmKSByZXR1cm47CiAgICBjb25zdCByID0gbmV3IEZpbGVSZWFkZXIoKTsKICAgIHIub25sb2FkID0gZSA9PiB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgY29uc3Qgd2IgPSBYTFNYLnJlYWQobmV3IFVpbnQ4QXJyYXkoZS50YXJnZXQucmVzdWx0KSwgeyB0eXBlOiAnYXJyYXknLCBjb2RlcGFnZTogMTI1MiB9KTsKICAgICAgICAgICAgY29uc3Qgcm93cyA9IFhMU1gudXRpbHMuc2hlZXRfdG9fanNvbih3Yi5TaGVldHNbd2IuU2hlZXROYW1lc1swXV0pOwogICAgICAgICAgICBsZXQgY250ID0gMDsKICAgICAgICAgICAgcm93cy5mb3JFYWNoKHIgPT4gewogICAgICAgICAgICAgICAgY29uc3QgZ2V0ID0gayA9PiByW09iamVjdC5rZXlzKHIpLmZpbmQoeCA9PiB4LnRyaW0oKS50b0xvd2VyQ2FzZSgpID09PSBrLnRvTG93ZXJDYXNlKCkpXTsKICAgICAgICAgICAgICAgIGNvbnN0IG4gPSBnZXQoJ05vbScpIHx8IGdldCgnTk9NJyk7CiAgICAgICAgICAgICAgICBjb25zdCBkID0gZ2V0KCdEaXNjaXBsaW5lJykgfHwgZ2V0KCdESVNDSVBMSU5FJyk7CiAgICAgICAgICAgICAgICBpZiAobiAmJiBkKSB7CiAgICAgICAgICAgICAgICAgICAgbGV0IGNvZGVSYXcgPSAiIjsKICAgICAgICAgICAgICAgICAgICBsZXQgY29kZU1hdGNoID0gZC5tYXRjaCgvXihbQS1aMC05XSspXHMrLyk7CiAgICAgICAgICAgICAgICAgICAgaWYgKGNvZGVNYXRjaCkgY29kZVJhdyA9IGNvZGVNYXRjaFsxXTsKICAgICAgICAgICAgICAgICAgICBsZXQgY2wgPSBkLnJlcGxhY2UoL14oW0EtWjAtOV0rKVxzKy8sICcnKS5yZXBsYWNlKC9eW0xdXGQrXHMrLywgJycpLnRyaW0oKS50b1VwcGVyQ2FzZSgpOwogICAgICAgICAgICAgICAgICAgIGxldCBmaW4gPSBjbDsKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAvLyBWb3RyZSBsb2dpcXVlIGRlIG1hcHBpbmcgb3JpZ2luYWxlIChWMi5vbGQpIHF1aSBmb25jdGlvbm5lIGJpZW4gcG91ciB2b3VzCiAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBbaywgdl0gb2YgT2JqZWN0LmVudHJpZXMoU1VCSkVDVF9NQVBQSU5HKSkKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNsLmluY2x1ZGVzKGspKSB7IGZpbiA9IHY7IGJyZWFrOyB9CgogICAgICAgICAgICAgICAgICAgIGlmICghREFUQS5zdWJqZWN0cy5pbmNsdWRlcyhmaW4pKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIERBVEEuc3ViamVjdHMucHVzaChmaW4pOwogICAgICAgICAgICAgICAgICAgICAgICBEQVRBLnN1YmplY3RNZXRhW2Zpbl0gPSB7IG1vZGU6ICdkaXYnLCBsZXZlbHM6IGdldERlZmF1bHRBY3RpdmVMZXZlbHMoZmluKSwgZXRhYjogMCwgdm9sTGV2ZWw6IHt9LCBwYXJlbnQ6ICIiLCBjb2RlOiBjb2RlUmF3IH07CiAgICAgICAgICAgICAgICAgICAgICAgIERBVEEuc3RydWN0dXJlLmZvckVhY2gobCA9PiBEQVRBLmxldmVsQ29uZmlnW2wubGV2ZWxdW2Zpbl0gPSB7IGJhc2U6IDAsIGRlbWk6IDAsIG1hcmdlOiAwLCBjb2VmOiAxLjAgfSk7CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAvLyAtLS0gTU9ESUZJQ0FUSU9OIElDSSAtLS0KICAgICAgICAgICAgICAgICAgICAvLyBPbiBham91dGUgY3NkOjAgZXQgZGVjaGFyZ2U6MCBwb3VyIGxhIGNvbXBhdGliaWxpdMOpIFYyCiAgICAgICAgICAgICAgICAgICAgREFUQS50ZWFjaGVycy5wdXNoKHsgCiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IGAke259ICR7Z2V0KCdQcsOpbm9tJykgfHwgJyd9YC50cmltKCksIAogICAgICAgICAgICAgICAgICAgICAgICBzdWJqZWN0OiBmaW4sIAogICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXM6ICJDZXJ0aWZpw6kiLCAKICAgICAgICAgICAgICAgICAgICAgICAgb3JzOiAxOCwgCiAgICAgICAgICAgICAgICAgICAgICAgIGhzYTogMCwKICAgICAgICAgICAgICAgICAgICAgICAgY3NkOiAwLCAgICAgICAvLyBBam91dMOpCiAgICAgICAgICAgICAgICAgICAgICAgIGRlY2hhcmdlOiAwICAgLy8gQWpvdXTDqQogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIGNudCsrOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgYWxlcnQoYCR7Y250fSBpbXBvcnTDqXNgKTsgcmVuZGVyUkgoKTsgc2F2ZURhdGEoKTsKICAgICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnIpOyAvLyBKJ2FpIGFqb3V0w6kgY2VjaSBwb3VyIHZvaXIgbCdlcnJldXIgcHLDqWNpc2UgZGFucyBsYSBjb25zb2xlIChGMTIpIGF1IGNhcyBvw7kKICAgICAgICAgICAgYWxlcnQoIkVycmV1ciBsb3JzIGRlIGwnaW1wb3J0Iik7CiAgICAgICAgfQogICAgICAgIGlucHV0LnZhbHVlID0gJyc7CiAgICB9OwogICAgci5yZWFkQXNBcnJheUJ1ZmZlcihmKTsKfQoKCmZ1bmN0aW9uIGNhbGN1bGF0ZVJlY2FwKCkgeyAKICAgIC8vIE1pc2Ugw6Agam91ciBkdSB0aXRyZSBkZSBsJ2VudGl0w6kgYWN0aXZlCiAgICB1cGRhdGVFbnRpdHlUaXRsZSgpOwogICAgLy8gTWlzZSDDoCBqb3VyIGRlcyBiYWRnZXMgZGFucyBsYSBzaWRlYmFyCiAgICB1cGRhdGVFbnRpdHlCYWRnZXMoKTsKICAgIAogICAgLy8gU8OpY3VyaXTDqSA6IE9uIHbDqXJpZmllIHF1ZSBsZXMgYmVzb2lucyBzb250IGNhbGN1bMOpcwogICAgY29uc3QgbmVlZHMgPSAodHlwZW9mIGNhbGN1bGF0ZU5lZWRzID09PSAnZnVuY3Rpb24nKSA/IGNhbGN1bGF0ZU5lZWRzKCkgOiB7fTsKICAgIGNvbnN0IHQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVjYXAtYm9keScpOyAKICAgIGlmICghdCkgcmV0dXJuOyAKICAgIHQuaW5uZXJIVE1MID0gJyc7IAogICAgCiAgICAvLyAtLS0gMS4gQ0FMQ1VMIFBBU1NFUkVMTEUgRURTIChWb2x1bWUgRHluYW1pcXVlKSAtLS0KICAgIGxldCB0b3RhbEhldXJlc0VEUyA9IDA7CiAgICBpZiAoREFUQS50eXBlICE9PSAnY29sbGVnZScgJiYgREFUQS5lZHMpIHsKICAgICAgICBbJ3ByZW1pZXJlJywgJ3Rlcm1pbmFsZSddLmZvckVhY2gobHZsID0+IHsKICAgICAgICAgICAgaWYgKERBVEEuZWRzW2x2bF0pIHsKICAgICAgICAgICAgICAgIERBVEEuZWRzW2x2bF0uZm9yRWFjaChlID0+IHsKICAgICAgICAgICAgICAgICAgICAvLyBVdGlsaXNlIGxlIHZvbHVtZSBzYWlzaSBwYXIgbGlnbmUgb3UgbGUgZMOpZmF1dCBvZmZpY2llbCAoNGgvNmgpLCBwb25kw6lyw6kKICAgICAgICAgICAgICAgICAgICBjb25zdCB2b2wgPSBwYXJzZUZsb2F0KGUuaFBlckdyb3VwKSB8fCAobHZsID09PSAncHJlbWllcmUnID8gNCA6IDYpOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvZWYgPSBwYXJzZUZsb2F0KGUuY29lZikgfHwgMS4wOwogICAgICAgICAgICAgICAgICAgIHRvdGFsSGV1cmVzRURTICs9IChwYXJzZUZsb2F0KGUuZ3JvdXBzKSB8fCAwKSAqIHZvbCAqIGNvZWY7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgIH0pOwogICAgfQoKICAgIC8vIDIuIEluaXRpYWxpc2F0aW9uIGRlcyBjb21wdGV1cnMgZXQgY29tbWVudGFpcmVzCiAgICBsZXQgcmVzID0ge307IAogICAgbGV0IGF1dG9Db21tZW50cyA9IHt9OyAKCiAgICBEQVRBLnN1YmplY3RzLmZvckVhY2gocyA9PiB7CiAgICAgICAgcmVzW3NdID0geyB0ZWFjaGluZzowLCBjb3N0OjAsIGhzYTowLCBkZWNoSW50OjAgfTsKICAgICAgICBhdXRvQ29tbWVudHNbc10gPSBbXTsgCiAgICB9KTsgCiAgICAKICAgIC8vIDMuIENhbGN1bHMgaXNzdXMgZGVzIHByb2Zlc3NldXJzIChBcHBvcnRzKQogICAgLy8gQm91Y2xlIHN1ciBEQVRBLnRlYWNoZXJzIChkb25uw6llcyBhbmNpZW5uZXMgbm9uIG1pZ3LDqWVzKQogICAgZ2V0RW50aXR5VGVhY2hlcnMoKS5mb3JFYWNoKHAgPT4gewogICAgICAgIGlmICghcC5zdWJqZWN0KSByZXR1cm47CiAgICAgICAgaWYgKCFyZXNbcC5zdWJqZWN0XSkgcmVzW3Auc3ViamVjdF0gPSB7IHRlYWNoaW5nOjAsIGNvc3Q6MCwgaHNhOjAsIGRlY2hJbnQ6MCB9OwogICAgICAgIGlmICghYXV0b0NvbW1lbnRzW3Auc3ViamVjdF0pIGF1dG9Db21tZW50c1twLnN1YmplY3RdID0gW107CiAgICAgICAgY29uc3QgY3NkID0gcGFyc2VGbG9hdChwLmNzZCB8fCAwKTsKICAgICAgICBjb25zdCBkZWNoSW50ID0gcGFyc2VGbG9hdChwLmRlY2hhcmdlIHx8IDApOwogICAgICAgIGNvbnN0IGRlY2hFeHQgPSBwYXJzZUZsb2F0KHAuZGVjaF9leHQgfHwgMCk7CiAgICAgICAgY29uc3Qgb3JzID0gcGFyc2VGbG9hdChwLm9ycyB8fCAwKTsKICAgICAgICBjb25zdCBoc2EgPSBwYXJzZUZsb2F0KHAuaHNhIHx8IDApOwogICAgICAgIGNvbnN0IGJtcCA9IHBhcnNlRmxvYXQocC5ibXAgfHwgMCk7CiAgICAgICAgY29uc3QgZmluYW5jaWFsQ29zdCA9IChvcnMgLSBjc2QgLSBkZWNoRXh0KSArIGhzYTsKICAgICAgICByZXNbcC5zdWJqZWN0XS5jb3N0ICs9IGZpbmFuY2lhbENvc3Q7CiAgICAgICAgcmVzW3Auc3ViamVjdF0uaHNhICs9IGhzYTsKICAgICAgICByZXNbcC5zdWJqZWN0XS5kZWNoSW50ICs9IGRlY2hJbnQ7CiAgICAgICAgaWYgKGJtcCA+IDApIGF1dG9Db21tZW50c1twLnN1YmplY3RdLnB1c2goYEJNUCAke2JtcH1oYCk7CiAgICAgICAgaWYgKGNzZCA+IDApIGF1dG9Db21tZW50c1twLnN1YmplY3RdLnB1c2goYENTRCAke3AubmFtZX0gJHtjc2R9aGApOwogICAgfSk7CiAgICAKICAgIC8vIE1VVFVBTElTQVRJT046IEJvdWNsZSBzdXIgU0hBUkVEX1RFQUNIRVJTIHBvdXIgbCdlbnRpdMOpIGNvdXJhbnRlCiAgICBTSEFSRURfVEVBQ0hFUlMuZm9yRWFjaChwID0+IHsKICAgICAgICBpZiAoIXAuc3ViamVjdCkgcmV0dXJuOwogICAgICAgIGNvbnN0IGVudGl0eUhvdXJzID0gcGFyc2VGbG9hdChwLnNlcnZpY2VzPy5bY3VycmVudEVudGl0eV0pIHx8IDA7CiAgICAgICAgaWYgKGVudGl0eUhvdXJzID09PSAwKSByZXR1cm47CiAgICAgICAgaWYgKCFyZXNbcC5zdWJqZWN0XSkgcmVzW3Auc3ViamVjdF0gPSB7IHRlYWNoaW5nOjAsIGNvc3Q6MCwgaHNhOjAsIGRlY2hJbnQ6MCB9OwogICAgICAgIGlmICghYXV0b0NvbW1lbnRzW3Auc3ViamVjdF0pIGF1dG9Db21tZW50c1twLnN1YmplY3RdID0gW107CiAgICAgICAgY29uc3QgY3NkID0gcGFyc2VGbG9hdChwLmNzZCB8fCAwKTsKICAgICAgICBjb25zdCBkZWNoSW50ID0gcGFyc2VGbG9hdChwLmRlY2hhcmdlIHx8IDApOwogICAgICAgIGNvbnN0IGRlY2hFeHQgPSBwYXJzZUZsb2F0KHAuZGVjaF9leHQgfHwgMCk7CiAgICAgICAgY29uc3QgaHNhID0gcGFyc2VGbG9hdChwLmhzYSB8fCAwKTsKICAgICAgICBjb25zdCBibXAgPSBwYXJzZUZsb2F0KHAuYm1wIHx8IDApOwogICAgICAgIC8vIFV0aWxpc2VyIGxlcyBoZXVyZXMgZW50aXTDqSwgcGFzIGwnT1JTIHRvdGFsCiAgICAgICAgY29uc3QgZmluYW5jaWFsQ29zdCA9IChlbnRpdHlIb3VycyAtIE1hdGgubWluKGNzZCwgZW50aXR5SG91cnMpIC0gTWF0aC5taW4oZGVjaEV4dCwgZW50aXR5SG91cnMpKSArIGhzYTsKICAgICAgICByZXNbcC5zdWJqZWN0XS5jb3N0ICs9IGZpbmFuY2lhbENvc3Q7CiAgICAgICAgcmVzW3Auc3ViamVjdF0uaHNhICs9IGhzYTsKICAgICAgICByZXNbcC5zdWJqZWN0XS5kZWNoSW50ICs9IGRlY2hJbnQ7CiAgICAgICAgaWYgKGJtcCA+IDApIGF1dG9Db21tZW50c1twLnN1YmplY3RdLnB1c2goYEJNUCAke2JtcH1oYCk7CiAgICAgICAgaWYgKGNzZCA+IDApIGF1dG9Db21tZW50c1twLnN1YmplY3RdLnB1c2goYENTRCAke3AubmFtZX0gJHtjc2R9aGApOwogICAgfSk7CgogICAgLy8gQVBQT1JUIEVEUyA6IGhldXJlcyBkZXMgZW5zZWlnbmFudHMgYXNzaWduw6lzIGRpcmVjdGVtZW50IGRhbnMgU3DDqWNpYWxpdMOpcyAmIEVEUwogICAgaWYgKERBVEEuZWRzKSB7CiAgICAgICAgWydwcmVtaWVyZScsICd0ZXJtaW5hbGUnXS5mb3JFYWNoKGx2bCA9PiB7CiAgICAgICAgICAgIChEQVRBLmVkc1tsdmxdIHx8IFtdKS5mb3JFYWNoKGVkcyA9PiB7CiAgICAgICAgICAgICAgICBpZiAoIWVkcy50ZWFjaGVycykgcmV0dXJuOwogICAgICAgICAgICAgICAgY29uc3QgaFBHID0gKHBhcnNlRmxvYXQoZWRzLmhQZXJHcm91cCkgfHwgKGx2bCA9PT0gJ3ByZW1pZXJlJyA/IDQgOiA2KSkgKiAocGFyc2VGbG9hdChlZHMuY29lZikgfHwgMS4wKTsKICAgICAgICAgICAgICAgIGVkcy50ZWFjaGVycy5mb3JFYWNoKHRpZCA9PiB7CiAgICAgICAgICAgICAgICAgICAgaWYgKCF0aWQpIHJldHVybjsKICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZWFjaGVyID0gU0hBUkVEX1RFQUNIRVJTLmZpbmQodCA9PiB0LmlkID09PSB0aWQpOwogICAgICAgICAgICAgICAgICAgIGlmICghdGVhY2hlcikgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IHN1YmogPSBlZHMubmFtZTsgLy8gbGEgbWF0acOocmUgRURTID0gbm9tIGRlIGxhIHNww6ljaWFsaXTDqQogICAgICAgICAgICAgICAgICAgIGlmICghcmVzW3N1YmpdKSByZXNbc3Vial0gPSB7IHRlYWNoaW5nOjAsIGNvc3Q6MCwgaHNhOjAsIGRlY2hJbnQ6MCB9OwogICAgICAgICAgICAgICAgICAgIHJlc1tzdWJqXS5jb3N0ICs9IGhQRzsKICAgICAgICAgICAgICAgICAgICBpZiAoIWF1dG9Db21tZW50c1tzdWJqXSkgYXV0b0NvbW1lbnRzW3N1YmpdID0gW107CiAgICAgICAgICAgICAgICAgICAgYXV0b0NvbW1lbnRzW3N1YmpdLnB1c2goYCR7dGVhY2hlci5uYW1lfSAoJHtsdmwgPT09ICdwcmVtaWVyZScgPyAnMcOocmUnIDogJ1RsZSd9IEdyLilgKTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgIH0KICAgIAogICAgLy8gLS0tIGdsb2JhbE5lZWQgZGVwdWlzIG5lZWRzW10gcXVpIGluY2x1dCBkw6lqw6AgbGVzIEVEUyAtLS0KICAgIGxldCBnbG9iYWxOZWVkID0gMCwgdG90YWxBcHBvcnQgPSAwLCB0b3RhbEhTQSA9IDA7CgogICAgLy8gNC4gRm9uY3Rpb24gZGUgcmVuZHUgZGVzIGxpZ25lcwogICAgY29uc3QgcmVuZGVyUm93ID0gKHMsIGxhYmVsLCBpc1BvbGUsIGlzQ2hpbGQpID0+IHsKICAgICAgICBjb25zdCBzdGF0cyA9IHJlc1tzXSB8fCB7IGNvc3Q6MCwgaHNhOjAsIGRlY2hJbnQ6MCB9OwogICAgICAgIGNvbnN0IG1ldGEgPSBEQVRBLnN1YmplY3RNZXRhW3NdOwogICAgICAgIGNvbnN0IGlzRWRzID0gISEobWV0YSAmJiBtZXRhLmlzRWRzKTsKICAgICAgICBjb25zdCBzdHJ1Y3ROZWVkID0gbmVlZHNbc10gfHwgMDsKICAgICAgICBjb25zdCB0b3RhbE5lZWQgPSBzdHJ1Y3ROZWVkICsgc3RhdHMuZGVjaEludDsgCiAgICAgICAgY29uc3QgYXBwb3J0ID0gc3RhdHMuY29zdDsKICAgICAgICBjb25zdCBlY2FydCA9IGFwcG9ydCAtIHRvdGFsTmVlZDsKICAgICAgICBjb25zdCBocE9ubHkgPSBhcHBvcnQgLSBzdGF0cy5oc2E7CgogICAgICAgIGlmICghaXNQb2xlICYmIHRvdGFsTmVlZCA9PT0gMCAmJiBhcHBvcnQgPT09IDAgJiYgIWlzRWRzKSByZXR1cm4gbnVsbDsKICAgICAgICBjb25zdCBpc0NvdW50ZWQgPSAobWV0YSAmJiBtZXRhLmlzQ291bnRlZCAhPT0gZmFsc2UpOwogICAgICAgIGNvbnN0IHNhZmVTID0gcy5yZXBsYWNlKC8nL2csICJcXCciKTsKICAgICAgICAKICAgICAgICBpZiAoIURBVEEucmVjYXBDb21tZW50cykgREFUQS5yZWNhcENvbW1lbnRzID0ge307CiAgICAgICAgY29uc3QgY29tbSA9IERBVEEucmVjYXBDb21tZW50c1tzXSB8fCAiIjsgCiAgICAgICAgCiAgICAgICAgbGV0IHJvd0NsYXNzID0gIiI7CiAgICAgICAgbGV0IGJnU3R5bGUgPSAiIjsKICAgICAgICBsZXQgbmFtZVN0eWxlID0gInRleHQtYWxpZ246bGVmdDsgZm9udC13ZWlnaHQ6Ym9sZDsiOwogICAgICAgIAogICAgICAgIGlmIChpc1BvbGUpIHJvd0NsYXNzID0gInJvdy1oZWFkZXIiOyAKICAgICAgICBlbHNlIGlmICghaXNDaGlsZCAmJiAhaXNQb2xlKSByb3dDbGFzcyA9ICJyb3ctaGVhZGVyIjsgCiAgICAgICAgZWxzZSBpZiAoaXNDaGlsZCkgeyBiZ1N0eWxlID0gImJhY2tncm91bmQ6I2Y5ZjlmOTsiOyBuYW1lU3R5bGUgKz0gIiBwYWRkaW5nLWxlZnQ6MjBweDsiOyB9CiAgICAgICAgZWxzZSBpZiAoIWlzQ291bnRlZCkgYmdTdHlsZSA9ICJiYWNrZ3JvdW5kOiNmNGY2ZjY7IGNvbG9yOiM5NWE1YTY7IGZvbnQtc3R5bGU6aXRhbGljOyI7CgogICAgICAgIGNvbnN0IGJhZGdlID0gKCFpc1BvbGUgJiYgIWlzQ291bnRlZCAmJiByb3dDbGFzcyAhPT0gInJvdy1oZWFkZXIiKSA/ICc8c3BhbiBzdHlsZT0iZm9udC1zaXplOjAuN3JlbTsgYmFja2dyb3VuZDojOTVhNWE2OyBjb2xvcjp3aGl0ZTsgcGFkZGluZzoxcHggNHB4OyBib3JkZXItcmFkaXVzOjNweDsgbWFyZ2luLWxlZnQ6NXB4OyI+SE9SUyBESEc8L3NwYW4+JyA6ICcnOwogICAgICAgIGNvbnN0IGlzSGVhZGVyID0gKHJvd0NsYXNzID09PSAicm93LWhlYWRlciIpOwoKICAgICAgICBjb25zdCBhdXRvVGFncyA9IGF1dG9Db21tZW50c1tzXSB8fCBbXTsKICAgICAgICBsZXQgYXV0b0hUTUwgPSAiIjsKICAgICAgICBjb25zdCBhbGVydENvbG9yID0gaXNIZWFkZXIgPyAnI2ZmY2EyOCcgOiAnI2QzNTQwMCc7IAoKICAgICAgICBpZiAoYXV0b1RhZ3MubGVuZ3RoID4gMCAmJiAhaXNQb2xlKSB7CiAgICAgICAgICAgIGF1dG9IVE1MID0gYDxkaXYgc3R5bGU9Im1hcmdpbi1ib3R0b206NHB4OyBmb250LXNpemU6MC43NXJlbTsgY29sb3I6JHthbGVydENvbG9yfTsgZm9udC13ZWlnaHQ6Ym9sZDsiPiR7YXV0b1RhZ3Muam9pbignIC8gJyl9PC9kaXY+YDsKICAgICAgICB9CgogICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIGh0bWw6IGA8dHIgY2xhc3M9IiR7cm93Q2xhc3N9IiBzdHlsZT0iJHtiZ1N0eWxlfSI+CiAgICAgICAgICAgICAgICA8dGQgc3R5bGU9IiR7bmFtZVN0eWxlfTsgb3ZlcmZsb3c6aGlkZGVuOyB0ZXh0LW92ZXJmbG93OmVsbGlwc2lzOyB3aGl0ZS1zcGFjZTpub3dyYXA7Ij4ke2xhYmVsfSAke2JhZGdlfTwvdGQ+CiAgICAgICAgICAgICAgICA8dGQgc3R5bGU9ImZvbnQtd2VpZ2h0OmJvbGQ7ICR7aXNIZWFkZXI/J2NvbG9yOiNmMWM0MGY7JzonY29sb3I6I2MwMzkyYjsnfSI+JHt0b3RhbE5lZWQudG9GaXhlZCgxKX08L3RkPgogICAgICAgICAgICAgICAgPHRkIHN0eWxlPSJmb250LXdlaWdodDpib2xkOyAke2lzSGVhZGVyPydjb2xvcjojODFkNGZhOyc6J2NvbG9yOiMxNmEwODU7J30iPiR7YXBwb3J0LnRvRml4ZWQoMSl9PC90ZD4KICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT0iZm9udC13ZWlnaHQ6Ym9sZDsgY29sb3I6JHtlY2FydD49MD8oaXNIZWFkZXI/JyMyZWNjNzEnOidncmVlbicpOihpc0hlYWRlcj8nI2U3NGMzYyc6J3JlZCcpfTsiPiR7ZWNhcnQudG9GaXhlZCgxKX08L3RkPgogICAgICAgICAgICAgICAgPHRkIHN0eWxlPSJwYWRkaW5nOjRweDsgdmVydGljYWwtYWxpZ246bWlkZGxlOyI+CiAgICAgICAgICAgICAgICAgICAgJHshaXNQb2xlID8gYCR7YXV0b0hUTUx9PGlucHV0IGNsYXNzPSJpbnB1dC1jb21tZW50IiB2YWx1ZT0iJHtjb21tfSIgb25jaGFuZ2U9InVwZENvbW1lbnQoJyR7c2FmZVN9Jyx0aGlzLnZhbHVlKSIgc3R5bGU9IndpZHRoOjEwMCU7IGJveC1zaXppbmc6Ym9yZGVyLWJveDsgYm9yZGVyOjFweCBzb2xpZCAke2lzSGVhZGVyPycjNzg5MDljJzonI2NjYyd9OyBwYWRkaW5nOjRweDsgY29sb3I6YmxhY2s7IiBwbGFjZWhvbGRlcj0iQXV0cmUgY29tbWVudGFpcmUuLi4iPmAgOiAnJ30KICAgICAgICAgICAgICAgIDwvdGQ+CiAgICAgICAgICAgIDwvdHI+YCwKICAgICAgICAgICAgZGF0YTogeyBuZWVkOiB0b3RhbE5lZWQsIGFwcG9ydDogYXBwb3J0LCBoc2E6IHN0YXRzLmhzYSwgY291bnRlZDogaXNDb3VudGVkIH0KICAgICAgICB9OwogICAgfTsKCiAgICAvLyA2LiBCb3VjbGUgZCdhZmZpY2hhZ2UgZGVzIHDDtGxlcyBldCBtYXRpw6hyZXMgKGhvcnMgRURTKQogICAgY29uc3Qgcm9vdHMgPSBEQVRBLnN1YmplY3RzLmZpbHRlcihzID0+IERBVEEuc3ViamVjdE1ldGFbc10gJiYgIURBVEEuc3ViamVjdE1ldGFbc10ucGFyZW50ICYmICFEQVRBLnN1YmplY3RNZXRhW3NdLmlzRWRzKS5zb3J0KCk7CgogICAgcm9vdHMuZm9yRWFjaChyID0+IHsKICAgICAgICBjb25zdCBraWRzID0gREFUQS5zdWJqZWN0cy5maWx0ZXIocyA9PiBEQVRBLnN1YmplY3RNZXRhW3NdICYmIERBVEEuc3ViamVjdE1ldGFbc10ucGFyZW50ID09PSByICYmICFEQVRBLnN1YmplY3RNZXRhW3NdLmlzRWRzKTsKICAgICAgICBpZiAoa2lkcy5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgIGxldCBwb2xlTmVlZCA9IDAsIHBvbGVBcHBvcnQgPSAwLCBwb2xlSFNBID0gMDsKICAgICAgICAgICAgbGV0IHJvd3NUb1JlbmRlciA9IFtdOwogICAgICAgICAgICBjb25zdCByUm93ID0gcmVuZGVyUm93KHIsIGDihrMgJHtyfWAsIGZhbHNlLCB0cnVlKTsKICAgICAgICAgICAgaWYgKHJSb3cpIHsKICAgICAgICAgICAgICAgIGlmKHJSb3cuZGF0YS5jb3VudGVkKSB7IHBvbGVOZWVkICs9IHJSb3cuZGF0YS5uZWVkOyBwb2xlQXBwb3J0ICs9IHJSb3cuZGF0YS5hcHBvcnQ7IHBvbGVIU0EgKz0gclJvdy5kYXRhLmhzYTsgfQogICAgICAgICAgICAgICAgcm93c1RvUmVuZGVyLnB1c2goclJvdy5odG1sKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBraWRzLmZvckVhY2goayA9PiB7CiAgICAgICAgICAgICAgICBjb25zdCBrUm93ID0gcmVuZGVyUm93KGssIGDihrMgJHtrfWAsIGZhbHNlLCB0cnVlKTsKICAgICAgICAgICAgICAgIGlmIChrUm93KSB7CiAgICAgICAgICAgICAgICAgICAgaWYoa1Jvdy5kYXRhLmNvdW50ZWQpIHsgcG9sZU5lZWQgKz0ga1Jvdy5kYXRhLm5lZWQ7IHBvbGVBcHBvcnQgKz0ga1Jvdy5kYXRhLmFwcG9ydDsgcG9sZUhTQSArPSBrUm93LmRhdGEuaHNhOyB9CiAgICAgICAgICAgICAgICAgICAgcm93c1RvUmVuZGVyLnB1c2goa1Jvdy5odG1sKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGNvbnN0IHBvbGVFY2FydCA9IHBvbGVBcHBvcnQgLSBwb2xlTmVlZDsKICAgICAgICAgICAgY29uc3QgcG9sZUhQT25seSA9IHBvbGVBcHBvcnQgLSBwb2xlSFNBOwogICAgICAgICAgICBpZiAocm93c1RvUmVuZGVyLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICAgIHQuaW5uZXJIVE1MICs9IGA8dHIgY2xhc3M9InJvdy1oZWFkZXIiPgogICAgICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT0idGV4dC1hbGlnbjpsZWZ0OyBmb250LXdlaWdodDpib2xkOyI+8J+TpiBQw5RMRSAke3IudG9VcHBlckNhc2UoKX08L3RkPgogICAgICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT0iZm9udC13ZWlnaHQ6Ym9sZDsgY29sb3I6I2YxYzQwZjsiPiR7cG9sZU5lZWQudG9GaXhlZCgxKX08L3RkPgogICAgICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT0iZm9udC13ZWlnaHQ6Ym9sZDsgY29sb3I6IzgxZDRmYTsiPiR7cG9sZUFwcG9ydC50b0ZpeGVkKDEpfTwvdGQ+CiAgICAgICAgICAgICAgICAgICAgPHRkIHN0eWxlPSJmb250LXdlaWdodDpib2xkOyBiYWNrZ3JvdW5kOiR7cG9sZUVjYXJ0Pj0wPycjMjdhZTYwJzonI2MwMzkyYid9OyBjb2xvcjp3aGl0ZTsiPiR7cG9sZUVjYXJ0LnRvRml4ZWQoMSl9PC90ZD4KICAgICAgICAgICAgICAgICAgICA8dGQ+PC90ZD4KICAgICAgICAgICAgICAgIDwvdHI+YDsKICAgICAgICAgICAgICAgIHJvd3NUb1JlbmRlci5mb3JFYWNoKGh0bWwgPT4gdC5pbm5lckhUTUwgKz0gaHRtbCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZ2xvYmFsTmVlZCArPSBwb2xlTmVlZDsgdG90YWxBcHBvcnQgKz0gcG9sZUFwcG9ydDsgdG90YWxIU0EgKz0gcG9sZUhTQTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBjb25zdCByb3cgPSByZW5kZXJSb3cociwgciwgZmFsc2UsIGZhbHNlKTsKICAgICAgICAgICAgaWYgKHJvdykgewogICAgICAgICAgICAgICAgdC5pbm5lckhUTUwgKz0gcm93Lmh0bWw7CiAgICAgICAgICAgICAgICBpZihyb3cuZGF0YS5jb3VudGVkKSB7IGdsb2JhbE5lZWQgKz0gcm93LmRhdGEubmVlZDsgdG90YWxBcHBvcnQgKz0gcm93LmRhdGEuYXBwb3J0OyB0b3RhbEhTQSArPSByb3cuZGF0YS5oc2E7IH0KICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0pOwoKICAgIC8vIDZiLiBTRUNUSU9OIEVEUyDigJMgYWZmaWNoYWdlIGdyb3Vww6kgZGUgdG91dGVzIGxlcyBtYXRpw6hyZXMgRURTCiAgICBjb25zdCBlZHNTdWJqZWN0cyA9IERBVEEuc3ViamVjdHMuZmlsdGVyKHMgPT4gREFUQS5zdWJqZWN0TWV0YVtzXSAmJiBEQVRBLnN1YmplY3RNZXRhW3NdLmlzRWRzKS5zb3J0KCk7CiAgICBpZiAoZWRzU3ViamVjdHMubGVuZ3RoID4gMCkgewogICAgICAgIGxldCBlZHNOZWVkID0gMCwgZWRzQXBwb3J0ID0gMCwgZWRzSFNBID0gMDsKICAgICAgICBsZXQgZWRzUm93cyA9IFtdOwogICAgICAgIGVkc1N1YmplY3RzLmZvckVhY2gocyA9PiB7CiAgICAgICAgICAgIGNvbnN0IHJvdyA9IHJlbmRlclJvdyhzLCBg4oazICR7c31gLCBmYWxzZSwgdHJ1ZSk7CiAgICAgICAgICAgIGlmIChyb3cpIHsKICAgICAgICAgICAgICAgIGVkc05lZWQgICArPSByb3cuZGF0YS5uZWVkOwogICAgICAgICAgICAgICAgZWRzQXBwb3J0ICs9IHJvdy5kYXRhLmFwcG9ydDsKICAgICAgICAgICAgICAgIGVkc0hTQSAgICArPSByb3cuZGF0YS5oc2E7CiAgICAgICAgICAgICAgICBlZHNSb3dzLnB1c2gocm93Lmh0bWwpOwogICAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgaWYgKGVkc1Jvd3MubGVuZ3RoID4gMCkgewogICAgICAgICAgICBjb25zdCBlZHNFY2FydCAgPSBlZHNBcHBvcnQgLSBlZHNOZWVkOwogICAgICAgICAgICBjb25zdCBlZHNIUE9ubHkgPSBlZHNBcHBvcnQgLSBlZHNIU0E7CiAgICAgICAgICAgIHQuaW5uZXJIVE1MICs9IGA8dHIgY2xhc3M9InJvdy1oZWFkZXIiIHN0eWxlPSJiYWNrZ3JvdW5kOiMyYzNlNTA7IGNvbG9yOndoaXRlOyI+CiAgICAgICAgICAgICAgICA8dGQgc3R5bGU9InRleHQtYWxpZ246bGVmdDsgZm9udC13ZWlnaHQ6Ym9sZDsiPvCfjpMgU1DDiUNJQUxJVMOJUyAoRURTKTwvdGQ+CiAgICAgICAgICAgICAgICA8dGQgc3R5bGU9ImZvbnQtd2VpZ2h0OmJvbGQ7IGNvbG9yOiNmMWM0MGY7Ij4ke2Vkc05lZWQudG9GaXhlZCgxKX08L3RkPgogICAgICAgICAgICAgICAgPHRkIHN0eWxlPSJmb250LXdlaWdodDpib2xkOyBjb2xvcjojODFkNGZhOyI+JHtlZHNBcHBvcnQudG9GaXhlZCgxKX08L3RkPgogICAgICAgICAgICAgICAgPHRkPiR7ZWRzSFBPbmx5LnRvRml4ZWQoMSl9PC90ZD4KICAgICAgICAgICAgICAgIDx0ZD4ke2Vkc0hTQS50b0ZpeGVkKDEpfTwvdGQ+CiAgICAgICAgICAgICAgICA8dGQgc3R5bGU9ImZvbnQtd2VpZ2h0OmJvbGQ7IGJhY2tncm91bmQ6JHtlZHNFY2FydD49MD8nIzI3YWU2MCc6JyNjMDM5MmInfTsgY29sb3I6d2hpdGU7Ij4ke2Vkc0VjYXJ0LnRvRml4ZWQoMSl9PC90ZD4KICAgICAgICAgICAgICAgIDx0ZD48L3RkPgogICAgICAgICAgICA8L3RyPmA7CiAgICAgICAgICAgIGVkc1Jvd3MuZm9yRWFjaChodG1sID0+IHQuaW5uZXJIVE1MICs9IGh0bWwpOwogICAgICAgICAgICBnbG9iYWxOZWVkICArPSBlZHNOZWVkOwogICAgICAgICAgICB0b3RhbEFwcG9ydCArPSBlZHNBcHBvcnQ7CiAgICAgICAgICAgIHRvdGFsSFNBICAgICs9IGVkc0hTQTsKICAgICAgICB9CiAgICB9CiAgICAKICAgIC8vIDcuIE1pc2Ugw6Agam91ciBkZXMgVG90YXV4IChQaWVkIGRlIHRhYmxlYXUpCiAgICBjb25zdCB0b3RhbEVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JlY2FwLXRvdGFsJyk7CiAgICBpZih0b3RhbEVsKSB7CiAgICAgICAgdG90YWxFbC5pbm5lckhUTUwgPSBgCiAgICAgICAgICAgIDx0ZCBzdHlsZT0idGV4dC1hbGlnbjpyaWdodDsiPlRPVEFMIEfDiU7DiVJBTDwvdGQ+CiAgICAgICAgICAgIDx0ZCBzdHlsZT0iY29sb3I6I2MwMzkyYjsgZm9udC1zaXplOjEuMXJlbTsiPiR7Z2xvYmFsTmVlZC50b0ZpeGVkKDEpfTwvdGQ+CiAgICAgICAgICAgIDx0ZCBzdHlsZT0iY29sb3I6IzE2YTA4NTsgZm9udC1zaXplOjEuMXJlbTsiPiR7dG90YWxBcHBvcnQudG9GaXhlZCgxKX08L3RkPgogICAgICAgICAgICA8dGQ+JHsodG90YWxBcHBvcnQgLSB0b3RhbEhTQSkudG9GaXhlZCgxKX08L3RkPgogICAgICAgICAgICA8dGQ+JHt0b3RhbEhTQS50b0ZpeGVkKDEpfTwvdGQ+CiAgICAgICAgICAgIDx0ZCBzdHlsZT0iY29sb3I6JHsodG90YWxBcHBvcnQgLSBnbG9iYWxOZWVkKT49MD8nZ3JlZW4nOidyZWQnfTsgZm9udC1zaXplOjEuMXJlbTsiPiR7KHRvdGFsQXBwb3J0IC0gZ2xvYmFsTmVlZCkudG9GaXhlZCgxKX08L3RkPgogICAgICAgICAgICA8dGQ+PC90ZD5gOyAKICAgIH0KICAgIAogICAgLy8gOC4gTWlzZSDDoCBqb3VyIGRlcyBLUEkgZHUgRGFzaGJvYXJkIGQnYWNjdWVpbAogICAgaWYoREFUQS5jb25maWcgJiYgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Rhc2gtdG90YWwtZGhnJykpIHsKICAgICAgICBjb25zdCBnID0gREFUQS5jb25maWcudG90YWwgfHwgMDsgCiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Rhc2gtdG90YWwtZGhnJykuaW5uZXJUZXh0ID0gZzsgCiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Rhc2gtY29uc28nKS5pbm5lclRleHQgPSB0b3RhbEFwcG9ydC50b0ZpeGVkKDEpOyAKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGFzaC1oc2EnKS5pbm5lclRleHQgPSB0b3RhbEhTQS50b0ZpeGVkKDEpOyAKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGFzaC1zb2xkZScpLmlubmVyVGV4dCA9IChnIC0gdG90YWxBcHBvcnQpLnRvRml4ZWQoMSk7CiAgICAgICAgCiAgICAgICAgY29uc3QgaHBVc2VkID0gTWF0aC5tYXgoMCwgdG90YWxBcHBvcnQgLSB0b3RhbEhTQSk7CiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Rhc2gtaHAtdXNlZCcpLmlubmVyVGV4dCA9IGhwVXNlZC50b0ZpeGVkKDEpOwoKICAgICAgICBjb25zdCBoc2FJbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdnbG9iYWwtaHNhJyk7CiAgICAgICAgY29uc3QgZ2xvYmFsSHNhSW5wdXQgPSBoc2FJbnB1dCA/IChwYXJzZUZsb2F0KGhzYUlucHV0LnZhbHVlKSB8fCAwKSA6IDA7CiAgICAgICAgY29uc3QgZ2xvYmFsRG90YXRpb24gPSBwYXJzZUZsb2F0KGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkYXNoLXRvdGFsLWRoZycpLmlubmVyVGV4dCkgfHwgMDsKICAgICAgICBsZXQgcmF0aW8gPSAwOyBpZihnbG9iYWxEb3RhdGlvbiA+IDApIHsgcmF0aW8gPSAoZ2xvYmFsSHNhSW5wdXQgLyBnbG9iYWxEb3RhdGlvbikgKiAxMDA7IH0KICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ2xvYmFsLWhzYS1wZXJjZW50LWRpc3BsYXknKS5pbm5lclRleHQgPSByYXRpby50b0ZpeGVkKDEpICsgIiUiOwogICAgfQp9CmZ1bmN0aW9uIHJlbmRlckZpbmFsS1BJcyhuZWVkLCBhcHBvcnQsIGhzYSkgewogICAgY29uc3QgdG90YWxFbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZWNhcC10b3RhbCcpOwogICAgaWYodG90YWxFbCkgewogICAgICAgIHRvdGFsRWwuaW5uZXJIVE1MID0gYAogICAgICAgICAgICA8dGQgc3R5bGU9InRleHQtYWxpZ246cmlnaHQ7Ij5UT1RBTCBHw4lOw4lSQUw8L3RkPgogICAgICAgICAgICA8dGQgc3R5bGU9ImNvbG9yOiNjMDM5MmI7Ij4ke25lZWQudG9GaXhlZCgxKX08L3RkPgogICAgICAgICAgICA8dGQgc3R5bGU9ImNvbG9yOiMxNmEwODU7Ij4ke2FwcG9ydC50b0ZpeGVkKDEpfTwvdGQ+CiAgICAgICAgICAgIDx0ZD4keyhhcHBvcnQgLSBoc2EpLnRvRml4ZWQoMSl9PC90ZD48dGQ+JHtoc2EudG9GaXhlZCgxKX08L3RkPgogICAgICAgICAgICA8dGQgc3R5bGU9ImNvbG9yOiR7KGFwcG9ydCAtIG5lZWQpPj0wPydncmVlbic6J3JlZCd9OyI+JHsoYXBwb3J0IC0gbmVlZCkudG9GaXhlZCgxKX08L3RkPjx0ZD48L3RkPmA7IAogICAgfQogICAgLy8gTWlzZSDDoCBqb3VyIERhc2hib2FyZAogICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Rhc2gtY29uc28nKS5pbm5lclRleHQgPSBhcHBvcnQudG9GaXhlZCgxKTsKICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkYXNoLXNvbGRlJykuaW5uZXJUZXh0ID0gKERBVEEuY29uZmlnLnRvdGFsIC0gYXBwb3J0KS50b0ZpeGVkKDEpOwp9CgpmdW5jdGlvbiB1cGRDb21tZW50KHMsdil7IGlmKCFEQVRBLnJlY2FwQ29tbWVudHMpREFUQS5yZWNhcENvbW1lbnRzPXt9OyBEQVRBLnJlY2FwQ29tbWVudHNbc109djsgc2F2ZURhdGEoKTsgfQoKLy8gVmFyaWFibGUgZ2xvYmFsZSBwb3VyIHNhdm9pciBxdWVsbGUgcGFnZSBvbiBlc3QgZW4gdHJhaW4gZCdleHBvcnRlcgpsZXQgcGVuZGluZ0V4cG9ydFNlY3Rpb24gPSAiIjsKbGV0IHBlbmRpbmdFeHBvcnRUaXRsZSA9ICIiOwpmdW5jdGlvbiBleHBvcnRDdXJyZW50UGFnZSh0eXBlKSB7CiAgICAvLyAxLiBJZGVudGlmaWNhdGlvbiBkZSBsYSBzZWN0aW9uIGFjdGl2ZQogICAgY29uc3QgYWN0aXZlU2VjdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zZWN0aW9uLmFjdGl2ZScpLmlkOwogICAgCiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICAgIC8vIENBUyBTUMOJQ0lGSVFVRSA6IE9OR0xFVCBSw4lQQVJUSVRJT04KICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogICAgaWYgKGFjdGl2ZVNlY3Rpb24gPT09ICdyZXBhcnRpdGlvbicpIHsKICAgICAgICAKICAgICAgICAvLyBBLiBTb3VzLXZ1ZSAiUGFyIEVuc2VpZ25hbnQiIChDYXJ0ZXMgdmlzdWVsbGVzKQogICAgICAgIGlmICh0eXBlb2YgY3VycmVudFJlcGFydGl0aW9uVmlldyAhPT0gJ3VuZGVmaW5lZCcgJiYgY3VycmVudFJlcGFydGl0aW9uVmlldyA9PT0gJ3Byb2ZzJykgewogICAgICAgICAgICBpZiAodHlwZSA9PT0gJ2V4Y2VsJykgewogICAgICAgICAgICAgICAgYWxlcnQoIuKblCBFeHBvcnQgRXhjZWwgaW1wb3NzaWJsZSBzdXIgbGEgdnVlICdDYXJ0ZXMgRW5zZWlnbmFudHMnLlxuXG5DZXR0ZSB2dWUgZXN0IGdyYXBoaXF1ZS4gVXRpbGlzZXogbCdleHBvcnQgUERGIHBvdXIgaW1wcmltZXIgbGVzIGZpY2hlcywgb3UgcGFzc2V6IGVuIHZ1ZSAnUGFyIE1hdGnDqHJlJyBwb3VyIHVuIGV4cG9ydCBFeGNlbC4iKTsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAodHlwZSA9PT0gJ3BkZicpIHsKICAgICAgICAgICAgICAgIC8vIExhbmNlIGxhIGZvbmN0aW9uIFBERiBzcMOpY2lmaXF1ZSAiQ2FydGVzIgogICAgICAgICAgICAgICAgZ2VuZXJhdGVSZXBhcnRpdGlvblByb2ZzUERGKCk7IAogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CiAgICAgICAgfSAKICAgICAgICAKICAgICAgICAvLyBCLiBTb3VzLXZ1ZSAiUGFyIE1hdGnDqHJlIiAoVGFibGVhdXgpCiAgICAgICAgZWxzZSB7CiAgICAgICAgICAgIGlmICh0eXBlID09PSAnZXhjZWwnKSB7CiAgICAgICAgICAgICAgICAvLyBMYW5jZSBsYSBmb25jdGlvbiBFeGNlbCBzcMOpY2lmaXF1ZSAoTXVsdGktb25nbGV0cyBwYXIgUMO0bGUpCiAgICAgICAgICAgICAgICBleHBvcnRSZXBhcnRpdGlvbk1hdGllcmVFeGNlbCgpOyAKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAodHlwZSA9PT0gJ3BkZicpIHsKICAgICAgICAgICAgICAgIC8vIExhbmNlIGxhIGZvbmN0aW9uIFBERiBzcMOpY2lmaXF1ZSAoU2F1dHMgZGUgcGFnZSBwYXIgUMO0bGUpCiAgICAgICAgICAgICAgICBleHBvcnRSZXBhcnRpdGlvbk1hdGllcmVQREYoKTsgCiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9CgogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAgICAvLyBDQVMgU1RBTkRBUkQgOiBBVVRSRVMgT05HTEVUUwogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAgICAKICAgIGNvbnN0IGRhdGVTdHIgPSBuZXcgRGF0ZSgpLnRvTG9jYWxlRGF0ZVN0cmluZygnZnItRlInKTsKICAgIGxldCB0aXRsZSA9ICdFeHBvcnQnOwogICAgbGV0IHRhYmxlSWQgPSBudWxsOwoKICAgIC8vIENvbmZpZ3VyYXRpb24gZGVzIElEcyBkZSB0YWJsZWF1eCBzZWxvbiBsYSBwYWdlCiAgICBpZiAoYWN0aXZlU2VjdGlvbiA9PT0gJ2Rhc2hib2FyZCcpIHRpdGxlID0gJ1RhYmxlYXUgZGUgQm9yZCc7CiAgICBlbHNlIGlmIChhY3RpdmVTZWN0aW9uID09PSAnc3RydWN0dXJlJykgeyB0aXRsZSA9ICdTdHJ1Y3R1cmUnOyB0YWJsZUlkID0gJ3N0cnVjdHVyZS10YWJsZSc7IH0KICAgIGVsc2UgaWYgKGFjdGl2ZVNlY3Rpb24gPT09ICd2ZW50aWxhdGlvbicpIHRpdGxlID0gJ0dyaWxsZSBIb3JhaXJlJzsgCiAgICBlbHNlIGlmIChhY3RpdmVTZWN0aW9uID09PSAncHJvZmVzc2V1cnMnKSB7IHRpdGxlID0gJ0xpc3RlIGRlcyBFbnNlaWduYW50cyc7IHRhYmxlSWQgPSAncmgtdGFibGUtbGlzdCc7IH0KICAgIGVsc2UgaWYgKGFjdGl2ZVNlY3Rpb24gPT09ICdwaWxvdGFnZScpIHsgdGl0bGUgPSAnVmVudGlsYXRpb24gcGFyIE1hdGnDqHJlJzsgdGFibGVJZCA9ICdyaC10YWJsZS1kaXNjJzsgfQogICAgZWxzZSBpZiAoYWN0aXZlU2VjdGlvbiA9PT0gJ3JlY2FwJykgeyB0aXRsZSA9ICdCaWxhbic7IHRhYmxlSWQgPSAncmVjYXAtdGFibGUnOyB9CiAgICBlbHNlIGlmIChhY3RpdmVTZWN0aW9uID09PSAnZXF1aXBlcycpIHRpdGxlID0gJ0VxdWlwZXMgUMOpZGFnb2dpcXVlcyc7CiAgICBlbHNlIGlmIChhY3RpdmVTZWN0aW9uID09PSAnbWF0aWVyZXMnKSB7IHRpdGxlID0gJ01hdGnDqHJlcyc7IHRhYmxlSWQgPSAnc3ViamVjdHMtdGFibGUnOyB9CgogICAgY29uc3QgZmlsZW5hbWUgPSBgREhHIC0gJHt0aXRsZX0gLSAke2RhdGVTdHJ9YDsKCiAgICAvLyAtLS0gRXhwb3J0IEVYQ0VMIFN0YW5kYXJkIC0tLQogICAgaWYgKHR5cGUgPT09ICdleGNlbCcpIHsKICAgICAgICBjb25zdCB3YiA9IFhMU1gudXRpbHMuYm9va19uZXcoKTsKICAgICAgICAKICAgICAgICAvLyBDYXMgMSA6IFRhYmxlYXV4IGNvbXBsZXhlcyBuw6ljZXNzaXRhbnQgdW4gbmV0dG95YWdlIChJbnB1dHMgLT4gVGV4dGUpCiAgICAgICAgaWYgKGFjdGl2ZVNlY3Rpb24gPT09ICd2ZW50aWxhdGlvbicgfHwgYWN0aXZlU2VjdGlvbiA9PT0gJ21hdGllcmVzJyB8fCBhY3RpdmVTZWN0aW9uID09PSAnc3RydWN0dXJlJykgewogICAgICAgICAgICBsZXQgZ3JpZCA9IG51bGw7CiAgICAgICAgICAgIGlmIChhY3RpdmVTZWN0aW9uID09PSAndmVudGlsYXRpb24nKSBncmlkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmdyaWQtdGFibGUnKTsKICAgICAgICAgICAgZWxzZSBpZiAoYWN0aXZlU2VjdGlvbiA9PT0gJ21hdGllcmVzJykgZ3JpZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzdWJqZWN0cy10YWJsZScpOwogICAgICAgICAgICBlbHNlIGlmIChhY3RpdmVTZWN0aW9uID09PSAnc3RydWN0dXJlJykgZ3JpZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzdHJ1Y3R1cmUtdGFibGUnKTsKICAgICAgICAgICAgCiAgICAgICAgICAgIGlmKGdyaWQpIHsKICAgICAgICAgICAgICAgIGNvbnN0IGNsZWFuVCA9IGNsZWFuVGFibGVGb3JFeHBvcnQoZ3JpZCk7CiAgICAgICAgICAgICAgICBYTFNYLnV0aWxzLmJvb2tfYXBwZW5kX3NoZWV0KHdiLCBYTFNYLnV0aWxzLnRhYmxlX3RvX3NoZWV0KGNsZWFuVCksICJEb25uw6llcyIpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIC8vIENhcyAyIDogVGFibGVhdXggc2ltcGxlcyB2aWEgSUQKICAgICAgICBlbHNlIGlmICh0YWJsZUlkKSB7CiAgICAgICAgICAgIGNvbnN0IGVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGFibGVJZCk7CiAgICAgICAgICAgIGlmKGVsKSB7CiAgICAgICAgICAgICAgICBjb25zdCBjbGVhblQgPSBjbGVhblRhYmxlRm9yRXhwb3J0KGVsKTsKICAgICAgICAgICAgICAgIFhMU1gudXRpbHMuYm9va19hcHBlbmRfc2hlZXQod2IsIFhMU1gudXRpbHMudGFibGVfdG9fc2hlZXQoY2xlYW5UKSwgIkRvbm7DqWVzIik7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgLy8gQ2FzIDMgOiBQaWxvdGFnZSAoVGFibGVhdSBzcMOpY2lmaXF1ZSkKICAgICAgICBlbHNlIGlmIChhY3RpdmVTZWN0aW9uID09PSAncGlsb3RhZ2UnKSB7CiAgICAgICAgICAgICBjb25zdCBlbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyaC10YWJsZS1kaXNjJyk7CiAgICAgICAgICAgICBpZihlbCkgWExTWC51dGlscy5ib29rX2FwcGVuZF9zaGVldCh3YiwgWExTWC51dGlscy50YWJsZV90b19zaGVldChlbCksICJEb25uw6llcyIpOwogICAgICAgIH0KICAgICAgICAvLyBDYXMgNCA6IFJpZW4gw6AgZXhwb3J0ZXIKICAgICAgICBlbHNlIHsKICAgICAgICAgICAgYWxlcnQoIlJpZW4gw6AgZXhwb3J0ZXIgc3VyIGNldHRlIHZ1ZS4iKTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICAKICAgICAgICBYTFNYLndyaXRlRmlsZSh3YiwgYCR7ZmlsZW5hbWV9Lnhsc3hgKTsKICAgIH0gCiAgICAKICAgIC8vIC0tLSBFeHBvcnQgUERGIFN0YW5kYXJkIChWaWEgTW9kYWxlKSAtLS0KICAgIGVsc2UgaWYgKHR5cGUgPT09ICdwZGYnKSB7CiAgICAgICAgLy8gT24gc3RvY2tlIGxlIGNvbnRleHRlIGV0IG9uIG91dnJlIGxhIG1vZGFsZSBkZSBjaG9peCAoQTQvQTMsIFBvcnRyYWl0L1BheXNhZ2UpCiAgICAgICAgcGVuZGluZ0V4cG9ydFNlY3Rpb24gPSBhY3RpdmVTZWN0aW9uOwogICAgICAgIHBlbmRpbmdFeHBvcnRUaXRsZSA9IHRpdGxlOwogICAgICAgIG9wZW5FeHBvcnRNb2RhbCgpOwogICAgfQp9CgovLyAtLS0gVVRJTElUQUlSRSA6IENvbnZlcnRpdCB1biBpbmRleCAoMCwgMSwgMikgZW4gbGV0dHJlIEV4Y2VsIChBLCBCLCBDLi4uIEFBLCBBQikgLS0tCmZ1bmN0aW9uIGdldEV4Y2VsQWxwaGEoY29sSW5kZXgpIHsKICAgIGxldCB0ZW1wLCBsZXR0ZXIgPSAnJzsKICAgIHdoaWxlIChjb2xJbmRleCA+PSAwKSB7CiAgICAgICAgdGVtcCA9IChjb2xJbmRleCkgJSAyNjsKICAgICAgICBsZXR0ZXIgPSBTdHJpbmcuZnJvbUNoYXJDb2RlKHRlbXAgKyA2NSkgKyBsZXR0ZXI7CiAgICAgICAgY29sSW5kZXggPSAoY29sSW5kZXggLSB0ZW1wIC0gMSkgLyAyNjsKICAgIH0KICAgIHJldHVybiBsZXR0ZXI7Cn0KCmZ1bmN0aW9uIGV4cG9ydFJlcGFydGl0aW9uTWF0aWVyZUV4Y2VsKCkgewogICAgY29uc3Qgd2IgPSBYTFNYLnV0aWxzLmJvb2tfbmV3KCk7CiAgICBjb25zdCByb290cyA9IERBVEEuc3ViamVjdHMuZmlsdGVyKHMgPT4gIURBVEEuc3ViamVjdE1ldGFbc10/LnBhcmVudCkuc29ydCgpOwoKICAgIC8vIC0tLSBTVFlMRVMgLS0tCiAgICBjb25zdCBiYXNlU3R5bGUgPSB7CiAgICAgICAgYm9yZGVyOiB7CiAgICAgICAgICAgIHRvcDogeyBzdHlsZTogInRoaW4iLCBjb2xvcjogeyBhdXRvOiAxIH0gfSwKICAgICAgICAgICAgYm90dG9tOiB7IHN0eWxlOiAidGhpbiIsIGNvbG9yOiB7IGF1dG86IDEgfSB9LAogICAgICAgICAgICBsZWZ0OiB7IHN0eWxlOiAidGhpbiIsIGNvbG9yOiB7IGF1dG86IDEgfSB9LAogICAgICAgICAgICByaWdodDogeyBzdHlsZTogInRoaW4iLCBjb2xvcjogeyBhdXRvOiAxIH0gfQogICAgICAgIH0sCiAgICAgICAgZm9udDogeyBuYW1lOiAiQ2FsaWJyaSIsIHN6OiAxMSB9CiAgICB9OwoKICAgIGNvbnN0IGhlYWRlclN0eWxlID0gewogICAgICAgIC4uLmJhc2VTdHlsZSwKICAgICAgICBmaWxsOiB7IGZnQ29sb3I6IHsgcmdiOiAiRTdFNkU2IiB9IH0sIC8vIEdyaXMgY2xhaXIKICAgICAgICBmb250OiB7IG5hbWU6ICJDYWxpYnJpIiwgc3o6IDExLCBib2xkOiB0cnVlIH0sCiAgICAgICAgYWxpZ25tZW50OiB7IGhvcml6b250YWw6ICJjZW50ZXIiLCB2ZXJ0aWNhbDogImNlbnRlciIgfQogICAgfTsKCiAgICBjb25zdCBuZWVkU3R5bGUgPSB7CiAgICAgICAgLi4uYmFzZVN0eWxlLAogICAgICAgIGZpbGw6IHsgZmdDb2xvcjogeyByZ2I6ICJGRkYyQ0MiIH0gfSwgLy8gSmF1bmUgY2xhaXIKICAgICAgICBmb250OiB7IG5hbWU6ICJDYWxpYnJpIiwgc3o6IDExLCBpdGFsaWM6IHRydWUgfQogICAgfTsKICAgIAogICAgLy8gRm9uY3Rpb24gbmV0dG95YWdlIG5vbSBvbmdsZXQKICAgIGNvbnN0IGNsZWFuU2hlZXROYW1lID0gKG5hbWUpID0+IG5hbWUucmVwbGFjZSgvW1xcLz8qW1xdXS9nLCAnICcpLnN1YnN0cmluZygwLCAzMSk7CgogICAgcm9vdHMuZm9yRWFjaChyb290ID0+IHsKICAgICAgICBjb25zdCBzdWJqZWN0c0luUG9sZSA9IFtyb290LCAuLi5EQVRBLnN1YmplY3RzLmZpbHRlcihzID0+IERBVEEuc3ViamVjdE1ldGFbc10/LnBhcmVudCA9PT0gcm9vdCldOwogICAgICAgIGxldCB3c0RhdGEgPSBbXTsKICAgICAgICAKICAgICAgICAvLyBUaXRyZSBkdSBQw7RsZSAoTGlnbmUgMSkKICAgICAgICB3c0RhdGEucHVzaChbeyB2OiBgUMOUTEUgOiAke3Jvb3QudG9VcHBlckNhc2UoKX1gLCBzOiB7IGZvbnQ6IHsgYm9sZDogdHJ1ZSwgc3o6IDE0IH0gfSB9XSk7CiAgICAgICAgd3NEYXRhLnB1c2goW10pOyAKCiAgICAgICAgc3ViamVjdHNJblBvbGUuZm9yRWFjaChzdWIgPT4gewogICAgICAgICAgICBjb25zdCBtZXRhID0gREFUQS5zdWJqZWN0TWV0YVtzdWJdOwogICAgICAgICAgICBpZiAoIW1ldGEpIHJldHVybjsKICAgICAgICAgICAgY29uc3QgaXNMYWJvID0gKG1ldGEuY29kZSA9PT0gJ0xBQicgJiYgbWV0YS5wYXJlbnQpOwogICAgICAgICAgICAKICAgICAgICAgICAgbGV0IHByb2ZzID0gW107CiAgICAgICAgICAgIGlmIChpc0xhYm8pIHByb2ZzID0gZ2V0RW50aXR5VGVhY2hlcnMoKS5maWx0ZXIodCA9PiB0LnN1YmplY3QgPT09IG1ldGEucGFyZW50KTsKICAgICAgICAgICAgZWxzZSBwcm9mcyA9IGdldEVudGl0eVRlYWNoZXJzKCkuZmlsdGVyKHQgPT4gdC5zdWJqZWN0ID09PSBzdWIpOwogICAgICAgICAgICBpZiAocHJvZnMubGVuZ3RoID09PSAwICYmIGlzTGFibykgcmV0dXJuOwoKICAgICAgICAgICAgLy8gLS0tIDEuIFBSw4lQQVJBVElPTiBERVMgQ09MT05ORVMgLS0tCiAgICAgICAgICAgIGxldCBjb2xLZXlzID0gW107IAogICAgICAgICAgICBsZXQgaGVhZGVyUm93ID0gW3sgdjogIkVuc2VpZ25hbnQiLCBzOiBoZWFkZXJTdHlsZSB9XTsKCiAgICAgICAgICAgIGlmIChtZXRhLm1vZGUgPT09ICdkaXYnKSB7CiAgICAgICAgICAgICAgICBEQVRBLnN0cnVjdHVyZS5mb3JFYWNoKGx2bCA9PiB7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgcHJlZml4ID0gZ2V0TGV2ZWxQcmVmaXgobHZsLmxldmVsKTsKICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGx2bC5kaXY7IGkrKykgewogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjSWQgPSBgJHtwcmVmaXh9JHtTdHJpbmcuZnJvbUNoYXJDb2RlKDY1ICsgaSl9YDsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaXNBY3RpdmUgPSAobWV0YS5sZXZlbHMgJiYgbWV0YS5sZXZlbHMuaW5jbHVkZXMobHZsLmxldmVsKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGhhc0hvdXJzID0gZ2V0SG91cnNGb3JDbGFzc1N1YmplY3QoY0lkLCBsdmwubGV2ZWwsIHN1YikgPiAwOwogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGhhc0hvdXJzIHx8IGlzQWN0aXZlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJSb3cucHVzaCh7IHY6IERBVEEuY2xhc3NOYW1lc1tjSWRdIHx8IGNJZCwgczogaGVhZGVyU3R5bGUgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIOKsh++4jyBDJ0VTVCBJQ0kgUVVFIEMnw4lUQUlUIENPUlJJR8OJIDogQWpvdXQgZGUgJ2x2bDogbHZsLmxldmVsJwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sS2V5cy5wdXNoKHtpZDogY0lkLCB0eXBlOiAnY2xhc3MnLCBsdmw6IGx2bC5sZXZlbH0pOyAKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9IGVsc2UgaWYgKG1ldGEubW9kZSA9PT0gJ2xldmVsJykgewogICAgICAgICAgICAgICAgREFUQS5zdHJ1Y3R1cmUuZm9yRWFjaChsdmwgPT4gewogICAgICAgICAgICAgICAgICAgIGhlYWRlclJvdy5wdXNoKHsgdjogbHZsLmxldmVsLCBzOiBoZWFkZXJTdHlsZSB9KTsKICAgICAgICAgICAgICAgICAgICBjb2xLZXlzLnB1c2goe2lkOiBsdmwubGV2ZWwsIHR5cGU6ICdsZXZlbCd9KTsgLy8gSWNpIGxlIG5pdmVhdSBlc3QgbCdJRAogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0gZWxzZSBpZiAobWV0YS5tb2RlID09PSAnZXRhYicpIHsKICAgICAgICAgICAgICAgIGhlYWRlclJvdy5wdXNoKHsgdjogIkdsb2JhbCIsIHM6IGhlYWRlclN0eWxlIH0pOwogICAgICAgICAgICAgICAgY29sS2V5cy5wdXNoKHtpZDogJ0VUQUInLCB0eXBlOiAnZXRhYid9KTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKGNvbEtleXMubGVuZ3RoID09PSAwKSByZXR1cm47CgogICAgICAgICAgICAvLyBDb2xvbm5lcyBUb3RhdXgKICAgICAgICAgICAgaGVhZGVyUm93LnB1c2goCiAgICAgICAgICAgICAgICB7IHY6ICJUb3RhbCBNYXRpw6hyZSIsIHM6IGhlYWRlclN0eWxlIH0sCiAgICAgICAgICAgICAgICB7IHY6ICJTZXJ2aWNlIEdsb2JhbCIsIHM6IGhlYWRlclN0eWxlIH0sCiAgICAgICAgICAgICAgICB7IHY6ICJTZXJ2aWNlIETDuyIsIHM6IGhlYWRlclN0eWxlIH0sCiAgICAgICAgICAgICAgICB7IHY6ICJTb2xkZSIsIHM6IGhlYWRlclN0eWxlIH0KICAgICAgICAgICAgKTsKCiAgICAgICAgICAgIC8vIFRpdHJlIE1hdGnDqHJlCiAgICAgICAgICAgIHdzRGF0YS5wdXNoKFt7IHY6IGBNYXRpw6hyZSA6ICR7c3VifWAsIHM6IHsgZm9udDogeyBib2xkOiB0cnVlLCBjb2xvcjogeyByZ2I6ICIyRjc1QjUiIH0gfSB9IH1dKTsKICAgICAgICAgICAgd3NEYXRhLnB1c2goaGVhZGVyUm93KTsKICAgICAgICAgICAgCiAgICAgICAgICAgIC8vIC0tLSAyLiBMSUdORSBCRVNPSU4gKENpYmxlKSAtLS0KICAgICAgICAgICAgaWYgKCFpc0xhYm8pIHsKICAgICAgICAgICAgICAgIGxldCBuZWVkUm93ID0gW3sgdjogIkJFU09JTiAoQ2libGUpIiwgczogbmVlZFN0eWxlIH1dOwogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBjb2xLZXlzLmZvckVhY2goY29sID0+IHsKICAgICAgICAgICAgICAgICAgICBsZXQgYmVzb2luID0gMDsKICAgICAgICAgICAgICAgICAgICAvLyBNYWludGVuYW50ICdjb2wubHZsJyBleGlzdGUgYmllbiwgZG9uYyBsZSBjYWxjdWwgZm9uY3Rpb25uZSAhCiAgICAgICAgICAgICAgICAgICAgaWYoY29sLnR5cGUgPT09ICdjbGFzcycpIGJlc29pbiA9IGdldEhvdXJzRm9yQ2xhc3NTdWJqZWN0KGNvbC5pZCwgY29sLmx2bCwgc3ViKTsKICAgICAgICAgICAgICAgICAgICBlbHNlIGlmKGNvbC50eXBlID09PSAnbGV2ZWwnKSBiZXNvaW4gPSAobWV0YS52b2xMZXZlbCAmJiBtZXRhLnZvbExldmVsW2NvbC5pZF0pIHx8IDA7CiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZihjb2wudHlwZSA9PT0gJ2V0YWInKSBiZXNvaW4gPSBtZXRhLmV0YWIgfHwgMDsKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAvLyBPbiBmb3JjZSB1biBOb21icmUgKHQ6J24nKSBwb3VyIHF1ZSBsZXMgZm9ybXVsZXMgRXhjZWwgbWFyY2hlbnQKICAgICAgICAgICAgICAgICAgICBuZWVkUm93LnB1c2goeyB2OiBiZXNvaW4gPiAwID8gYmVzb2luIDogIiIsIHQ6ICduJywgczogbmVlZFN0eWxlIH0pOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIC8vIENlbGx1bGVzIHZpZGVzIGRlIGZpbiBkZSBsaWduZSAocG91ciBsZSBzdHlsZSkKICAgICAgICAgICAgICAgIG5lZWRSb3cucHVzaCh7djoiIiwgczpuZWVkU3R5bGV9LCB7djoiIiwgczpuZWVkU3R5bGV9LCB7djoiIiwgczpuZWVkU3R5bGV9LCB7djoiIiwgczpuZWVkU3R5bGV9KTsKICAgICAgICAgICAgICAgIHdzRGF0YS5wdXNoKG5lZWRSb3cpOwogICAgICAgICAgICB9CgogICAgICAgICAgICAvLyAtLS0gMy4gTElHTkVTIFBST0ZTIC0tLQogICAgICAgICAgICBwcm9mcy5mb3JFYWNoKHAgPT4gewogICAgICAgICAgICAgICAgY29uc3QgY3VycmVudFJvd051bSA9IHdzRGF0YS5sZW5ndGggKyAxOyAvLyBJbmRleCBFeGNlbCAoMS1iYXNlZCkKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgbGV0IHJvdyA9IFt7IHY6IHAubmFtZSwgczogYmFzZVN0eWxlIH1dOwoKICAgICAgICAgICAgICAgIGNvbEtleXMuZm9yRWFjaChjb2wgPT4gewogICAgICAgICAgICAgICAgICAgIGxldCB2YWwgPSAwOwogICAgICAgICAgICAgICAgICAgIGlmIChpc0xhYm8pIHZhbCA9IHAuZGVjaGFyZ2UgfHwgMDsgCiAgICAgICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGtleSA9IGAke2NvbC5pZH1fJHtwLmlkeH1gOwogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhc3NpZ24gPSBEQVRBLmFzc2lnbm1lbnRzW2tleV07CiAgICAgICAgICAgICAgICAgICAgICAgIHZhbCA9IChhc3NpZ24gJiYgYXNzaWduLnF1b3RhICE9PSB1bmRlZmluZWQpID8gYXNzaWduLnF1b3RhIDogMDsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgcm93LnB1c2goeyB2OiB2YWwgPiAwID8gdmFsIDogIiIsIHQ6ICduJywgczogYmFzZVN0eWxlIH0pOwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgLy8gRk9STVVMRSBTT01NRQogICAgICAgICAgICAgICAgY29uc3Qgc3RhcnRDaGFyID0gZ2V0RXhjZWxBbHBoYSgxKTsgLy8gIkIiCiAgICAgICAgICAgICAgICBjb25zdCBlbmRDaGFyID0gZ2V0RXhjZWxBbHBoYShjb2xLZXlzLmxlbmd0aCk7IAogICAgICAgICAgICAgICAgY29uc3QgZm9ybXVsYVRvdGFsID0gYFNVTSgke3N0YXJ0Q2hhcn0ke2N1cnJlbnRSb3dOdW19OiR7ZW5kQ2hhcn0ke2N1cnJlbnRSb3dOdW19KWA7CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIHJvdy5wdXNoKHsgdDogJ24nLCBmOiBmb3JtdWxhVG90YWwsIHM6IHsgLi4uYmFzZVN0eWxlLCBmb250OiB7IGJvbGQ6IHRydWUgfSB9IH0pOwoKICAgICAgICAgICAgICAgIC8vIFNlcnZpY2VzICYgU29sZGUKICAgICAgICAgICAgICAgIGNvbnN0IHNlcnZpY2VHbG9iYWwgPSBnZXRHbG9iYWxUZWFjaGVyU2VydmljZShwLmlkeCk7CiAgICAgICAgICAgICAgICBjb25zdCBzZXJ2aWNlRHUgPSBwLm9ycyAtIChwLmNzZCB8fCAwKTsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgcm93LnB1c2goeyB2OiBzZXJ2aWNlR2xvYmFsLCB0OiAnbicsIHM6IGJhc2VTdHlsZSB9KTsKICAgICAgICAgICAgICAgIHJvdy5wdXNoKHsgdjogc2VydmljZUR1LCB0OiAnbicsIHM6IGJhc2VTdHlsZSB9KTsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgLy8gRm9ybXVsZSBTb2xkZQogICAgICAgICAgICAgICAgY29uc3QgY29sR2xvYmFsQ2hhciA9IGdldEV4Y2VsQWxwaGEoY29sS2V5cy5sZW5ndGggKyAyKTsKICAgICAgICAgICAgICAgIGNvbnN0IGNvbER1Q2hhciA9IGdldEV4Y2VsQWxwaGEoY29sS2V5cy5sZW5ndGggKyAzKTsKICAgICAgICAgICAgICAgIGNvbnN0IGZvcm11bGFTb2xkZSA9IGAke2NvbEdsb2JhbENoYXJ9JHtjdXJyZW50Um93TnVtfS0ke2NvbER1Q2hhcn0ke2N1cnJlbnRSb3dOdW19YDsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgcm93LnB1c2goeyB0OiAnbicsIGY6IGZvcm11bGFTb2xkZSwgczogeyAuLi5iYXNlU3R5bGUsIGZvbnQ6IHsgYm9sZDogdHJ1ZSB9IH0gfSk7CgogICAgICAgICAgICAgICAgd3NEYXRhLnB1c2gocm93KTsKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAvLyAtLS0gNC4gTElHTkUgUkVMSVFVQVQgLS0tCiAgICAgICAgICAgIGlmICghaXNMYWJvKSB7CiAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50Um93TnVtID0gd3NEYXRhLmxlbmd0aCArIDE7CiAgICAgICAgICAgICAgICBjb25zdCBuZWVkUm93TnVtID0gY3VycmVudFJvd051bSAtIHByb2ZzLmxlbmd0aCAtIDE7IC8vIE9uIHJlbW9udGUgY2hlcmNoZXIgbGEgbGlnbmUgQmVzb2luCgogICAgICAgICAgICAgICAgbGV0IHJlbFJvdyA9IFt7IHY6ICJSRUxJUVVBVCIsIHM6IHsgLi4uYmFzZVN0eWxlLCBmb250OiB7IGl0YWxpYzogdHJ1ZSwgY29sb3I6IHsgcmdiOiAiQzAwMDAwIiB9IH0gfSB9XTsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgY29sS2V5cy5mb3JFYWNoKChjb2wsIGlkeCkgPT4gewogICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbENoYXIgPSBnZXRFeGNlbEFscGhhKGlkeCArIDEpOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IHByb2ZTdGFydFJvdyA9IG5lZWRSb3dOdW0gKyAxOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IHByb2ZFbmRSb3cgPSBjdXJyZW50Um93TnVtIC0gMTsKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAvLyBGb3JtdWxlIDogPSBCZXNvaW4gLSBTT01NRShQcm9mcykKICAgICAgICAgICAgICAgICAgICBsZXQgZm9ybXVsYVJlbCA9ICIiOwogICAgICAgICAgICAgICAgICAgIGlmIChwcm9mU3RhcnRSb3cgPiBwcm9mRW5kUm93KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vIENhcyBzYW5zIHByb2ZzIDogUmVsaXF1YXQgPSBCZXNvaW4KICAgICAgICAgICAgICAgICAgICAgICAgZm9ybXVsYVJlbCA9IGAke2NvbENoYXJ9JHtuZWVkUm93TnVtfWA7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgZm9ybXVsYVJlbCA9IGAke2NvbENoYXJ9JHtuZWVkUm93TnVtfS1TVU0oJHtjb2xDaGFyfSR7cHJvZlN0YXJ0Um93fToke2NvbENoYXJ9JHtwcm9mRW5kUm93fSlgOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICByZWxSb3cucHVzaCh7IHQ6ICduJywgZjogZm9ybXVsYVJlbCwgczogYmFzZVN0eWxlIH0pOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIHJlbFJvdy5wdXNoKHt2OiIiLCBzOmJhc2VTdHlsZX0sIHt2OiIiLCBzOmJhc2VTdHlsZX0sIHt2OiIiLCBzOmJhc2VTdHlsZX0sIHt2OiIiLCBzOmJhc2VTdHlsZX0pOwogICAgICAgICAgICAgICAgd3NEYXRhLnB1c2gocmVsUm93KTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgd3NEYXRhLnB1c2goW10pOyAKICAgICAgICAgICAgd3NEYXRhLnB1c2goW10pOyAKICAgICAgICB9KTsKCiAgICAgICAgLy8gQ3LDqWF0aW9uIGRlIGxhIGZldWlsbGUKICAgICAgICBpZiAod3NEYXRhLmxlbmd0aCA+IDIpIHsKICAgICAgICAgICAgY29uc3Qgd3MgPSBYTFNYLnV0aWxzLmFvYV90b19zaGVldChbXSk7CiAgICAgICAgICAgIFhMU1gudXRpbHMuc2hlZXRfYWRkX2FvYSh3cywgd3NEYXRhLCB7IG9yaWdpbjogIkExIiB9KTsKCiAgICAgICAgICAgIC8vIExhcmdldXJzIGNvbG9ubmVzCiAgICAgICAgICAgIGxldCBtYXhDb2xDb3VudCA9IDA7CiAgICAgICAgICAgIHdzRGF0YS5mb3JFYWNoKHIgPT4geyBpZihyLmxlbmd0aCA+IG1heENvbENvdW50KSBtYXhDb2xDb3VudCA9IHIubGVuZ3RoOyB9KTsKICAgICAgICAgICAgbGV0IHdzY29scyA9IFtdOwogICAgICAgICAgICBmb3IobGV0IGk9MDsgaTxtYXhDb2xDb3VudDsgaSsrKSB3c2NvbHMucHVzaCh7d2NoOiAxMn0pOwogICAgICAgICAgICB3c2NvbHNbMF0gPSB7d2NoOiAyNX07CiAgICAgICAgICAgIHdzWychY29scyddID0gd3Njb2xzOwoKICAgICAgICAgICAgWExTWC51dGlscy5ib29rX2FwcGVuZF9zaGVldCh3Yiwgd3MsIGNsZWFuU2hlZXROYW1lKHJvb3QpKTsKICAgICAgICB9CiAgICB9KTsKCiAgICBjb25zdCBkYXRlU3RyID0gbmV3IERhdGUoKS50b0xvY2FsZURhdGVTdHJpbmcoJ2ZyLUZSJykucmVwbGFjZSgvXC8vZywgJy0nKTsKICAgIFhMU1gud3JpdGVGaWxlKHdiLCBgREhHX1JlcGFydGl0aW9uX01hdGllcmVzX1BST18ke2RhdGVTdHJ9Lnhsc3hgKTsKfQoKZnVuY3Rpb24gZXhwb3J0UmVwYXJ0aXRpb25NYXRpZXJlUERGKCkgewogICAgY29uc3QgeyBqc1BERiB9ID0gd2luZG93LmpzcGRmOwogICAgLy8gRm9ybWF0IFBheXNhZ2Ugb2JsaWdhdG9pcmUgdnUgbGEgbGFyZ2V1ciBkZXMgdGFibGVhdXgKICAgIGNvbnN0IGRvYyA9IG5ldyBqc1BERih7IG9yaWVudGF0aW9uOiAnbGFuZHNjYXBlJywgZm9ybWF0OiAnYTQnIH0pOwogICAgCiAgICBjb25zdCBtYXJnaW4gPSAxNDsKICAgIGxldCBjdXJzb3JZID0gMjA7CiAgICBjb25zdCBwYWdlV2lkdGggPSBkb2MuaW50ZXJuYWwucGFnZVNpemUud2lkdGg7CgogICAgLy8gRm9uY3Rpb24gRW4tdMOqdGUgKHLDqXDDqXTDqWUgc3VyIGNoYXF1ZSBwYWdlIHNpIGJlc29pbikKICAgIGNvbnN0IHByaW50SGVhZGVyID0gKHRpdGxlKSA9PiB7CiAgICAgICAgZG9jLnNldEZpbGxDb2xvcig0NCwgNjIsIDgwKTsKICAgICAgICBkb2MucmVjdCgwLCAwLCBwYWdlV2lkdGgsIDE1LCAnRicpOwogICAgICAgIGRvYy5zZXRUZXh0Q29sb3IoMjU1LCAyNTUsIDI1NSk7CiAgICAgICAgZG9jLnNldEZvbnRTaXplKDEwKTsKICAgICAgICBkb2Muc2V0Rm9udCgiaGVsdmV0aWNhIiwgImJvbGQiKTsKICAgICAgICBkb2MudGV4dChgREhHIE1BTkFHRVIgLSBSw4lQQVJUSVRJT04gOiAke3RpdGxlLnRvVXBwZXJDYXNlKCl9YCwgbWFyZ2luLCAxMCk7CiAgICAgICAgZG9jLnRleHQoYEFubsOpZSAke0RBVEEuY29uZmlnLnllYXJ9YCwgcGFnZVdpZHRoIC0gbWFyZ2luLCAxMCwgeyBhbGlnbjogJ3JpZ2h0JyB9KTsKICAgICAgICBjdXJzb3JZID0gMjU7CiAgICB9OwoKICAgIGNvbnN0IHJvb3RzID0gREFUQS5zdWJqZWN0cy5maWx0ZXIocyA9PiAhREFUQS5zdWJqZWN0TWV0YVtzXT8ucGFyZW50KS5zb3J0KCk7CiAgICBsZXQgaXNGaXJzdFBhZ2UgPSB0cnVlOwoKICAgIHJvb3RzLmZvckVhY2gocm9vdCA9PiB7CiAgICAgICAgY29uc3Qgc3ViamVjdHNJblBvbGUgPSBbcm9vdCwgLi4uREFUQS5zdWJqZWN0cy5maWx0ZXIocyA9PiBEQVRBLnN1YmplY3RNZXRhW3NdPy5wYXJlbnQgPT09IHJvb3QpXTsKICAgICAgICAKICAgICAgICAvLyBWw6lyaWZpZXIgcydpbCB5IGEgZHUgY29udGVudSDDoCBhZmZpY2hlciBwb3VyIGNlIHDDtGxlCiAgICAgICAgLy8gKFBvdXIgw6l2aXRlciBkZSBjcsOpZXIgdW5lIHBhZ2UgdmlkZSBzaSBsZSBww7RsZSBlc3QgdmlkZSkKICAgICAgICBsZXQgaGFzQ29udGVudCA9IHN1YmplY3RzSW5Qb2xlLnNvbWUoc3ViID0+IHsKICAgICAgICAgICAgIGNvbnN0IG1ldGEgPSBEQVRBLnN1YmplY3RNZXRhW3N1Yl07CiAgICAgICAgICAgICAvLyBMb2dpcXVlIHNpbXBsaWZpw6llIDogc2kgbGEgbWF0acOocmUgZXhpc3RlLCBvbiBzdXBwb3NlIHF1J2lsIGZhdXQgbCdhZmZpY2hlcgogICAgICAgICAgICAgcmV0dXJuICEhbWV0YTsgCiAgICAgICAgfSk7CgogICAgICAgIGlmICghaGFzQ29udGVudCkgcmV0dXJuOwoKICAgICAgICAvLyBHRVNUSU9OIERVIFNBVVQgREUgUEFHRSBFTlRSRSBQw5RMRVMKICAgICAgICBpZiAoIWlzRmlyc3RQYWdlKSB7CiAgICAgICAgICAgIGRvYy5hZGRQYWdlKCk7CiAgICAgICAgICAgIGN1cnNvclkgPSAyMDsKICAgICAgICB9CiAgICAgICAgaXNGaXJzdFBhZ2UgPSBmYWxzZTsKCiAgICAgICAgLy8gSW1wcmVzc2lvbiBkdSBUaXRyZSBkdSBQw7RsZSAoSGF1dCBkZSBwYWdlKQogICAgICAgIHByaW50SGVhZGVyKHJvb3QpOwoKICAgICAgICAvLyBCb3VjbGUgc3VyIGxlcyBtYXRpw6hyZXMgZHUgcMO0bGUKICAgICAgICBzdWJqZWN0c0luUG9sZS5mb3JFYWNoKHN1YiA9PiB7CiAgICAgICAgICAgIGNvbnN0IG1ldGEgPSBEQVRBLnN1YmplY3RNZXRhW3N1Yl07CiAgICAgICAgICAgIGlmICghbWV0YSkgcmV0dXJuOwoKICAgICAgICAgICAgY29uc3QgaXNMYWJvID0gKG1ldGEuY29kZSA9PT0gJ0xBQicgJiYgbWV0YS5wYXJlbnQpOwogICAgICAgICAgICBsZXQgcHJvZnMgPSBbXTsKICAgICAgICAgICAgaWYgKGlzTGFibykgcHJvZnMgPSBnZXRFbnRpdHlUZWFjaGVycygpLmZpbHRlcih0ID0+IHQuc3ViamVjdCA9PT0gbWV0YS5wYXJlbnQpOwogICAgICAgICAgICBlbHNlIHByb2ZzID0gZ2V0RW50aXR5VGVhY2hlcnMoKS5maWx0ZXIodCA9PiB0LnN1YmplY3QgPT09IHN1Yik7CgogICAgICAgICAgICBpZiAocHJvZnMubGVuZ3RoID09PSAwICYmIGlzTGFibykgcmV0dXJuOwoKICAgICAgICAgICAgLy8gLS0tIFByw6lwYXJhdGlvbiBkZXMgY29sb25uZXMgcG91ciBsZSBQREYgLS0tCiAgICAgICAgICAgIGxldCBwZGZDb2x1bW5zID0gW3sgaGVhZGVyOiAnRW5zZWlnbmFudCcsIGRhdGFLZXk6ICduYW1lJyB9XTsKICAgICAgICAgICAgbGV0IGNvbEtleXMgPSBbXTsKCiAgICAgICAgICAgIGlmIChtZXRhLm1vZGUgPT09ICdkaXYnKSB7CiAgICAgICAgICAgICAgICBEQVRBLnN0cnVjdHVyZS5mb3JFYWNoKGx2bCA9PiB7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgcHJlZml4ID0gZ2V0TGV2ZWxQcmVmaXgobHZsLmxldmVsKTsKICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGx2bC5kaXY7IGkrKykgewogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjSWQgPSBgJHtwcmVmaXh9JHtTdHJpbmcuZnJvbUNoYXJDb2RlKDY1ICsgaSl9YDsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaXNBY3RpdmUgPSAobWV0YS5sZXZlbHMgJiYgbWV0YS5sZXZlbHMuaW5jbHVkZXMobHZsLmxldmVsKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGhhc0hvdXJzID0gZ2V0SG91cnNGb3JDbGFzc1N1YmplY3QoY0lkLCBsdmwubGV2ZWwsIHN1YikgPiAwOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoaGFzSG91cnMgfHwgaXNBY3RpdmUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBkZkNvbHVtbnMucHVzaCh7IGhlYWRlcjogREFUQS5jbGFzc05hbWVzW2NJZF0gfHwgY0lkLCBkYXRhS2V5OiBjSWQgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xLZXlzLnB1c2goe2lkOiBjSWQsIGx2bDogbHZsLmxldmVsLCB0eXBlOiAnY2xhc3MnfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSBlbHNlIGlmIChtZXRhLm1vZGUgPT09ICdsZXZlbCcpIHsKICAgICAgICAgICAgICAgIERBVEEuc3RydWN0dXJlLmZvckVhY2gobHZsID0+IHsKICAgICAgICAgICAgICAgICAgICBwZGZDb2x1bW5zLnB1c2goeyBoZWFkZXI6IGx2bC5sZXZlbCwgZGF0YUtleTogbHZsLmxldmVsIH0pOwogICAgICAgICAgICAgICAgICAgIGNvbEtleXMucHVzaCh7aWQ6IGx2bC5sZXZlbCwgbHZsOiBsdmwubGV2ZWwsIHR5cGU6ICdsZXZlbCd9KTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9IGVsc2UgaWYgKG1ldGEubW9kZSA9PT0gJ2V0YWInKSB7CiAgICAgICAgICAgICAgICBwZGZDb2x1bW5zLnB1c2goeyBoZWFkZXI6ICdHbG9iYWwnLCBkYXRhS2V5OiAnRVRBQicgfSk7CiAgICAgICAgICAgICAgICBjb2xLZXlzLnB1c2goe2lkOiAnRVRBQicsIHR5cGU6ICdldGFiJ30pOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAoY29sS2V5cy5sZW5ndGggPT09IDApIHJldHVybjsKCiAgICAgICAgICAgIC8vIENvbG9ubmVzIGRlIHRvdGF1eAogICAgICAgICAgICBwZGZDb2x1bW5zLnB1c2goCiAgICAgICAgICAgICAgICB7IGhlYWRlcjogJ1RvdC4nLCBkYXRhS2V5OiAndG90YWwnIH0sCiAgICAgICAgICAgICAgICB7IGhlYWRlcjogJ1N2Yy4nLCBkYXRhS2V5OiAnZ2xvYmFsJyB9LAogICAgICAgICAgICAgICAgeyBoZWFkZXI6ICdEw7snLCBkYXRhS2V5OiAnZHVlJyB9CiAgICAgICAgICAgICk7CgogICAgICAgICAgICAvLyAtLS0gUHLDqXBhcmF0aW9uIGRlcyBkb25uw6llcyAoTGlnbmVzKSAtLS0KICAgICAgICAgICAgbGV0IHBkZlJvd3MgPSBbXTsKICAgICAgICAgICAgcHJvZnMuZm9yRWFjaChwID0+IHsKICAgICAgICAgICAgICAgIGxldCByb3cgPSB7IG5hbWU6IHAubmFtZSB9OwogICAgICAgICAgICAgICAgbGV0IHJvd1RvdGFsID0gMDsKCiAgICAgICAgICAgICAgICBjb2xLZXlzLmZvckVhY2goY29sID0+IHsKICAgICAgICAgICAgICAgICAgICBsZXQgdmFsID0gMDsKICAgICAgICAgICAgICAgICAgICBpZiAoaXNMYWJvKSB2YWwgPSBwLmRlY2hhcmdlIHx8IDA7CiAgICAgICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGtleSA9IGAke2NvbC5pZH1fJHtwLmlkeH1gOwogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhc3NpZ24gPSBEQVRBLmFzc2lnbm1lbnRzW2tleV07CiAgICAgICAgICAgICAgICAgICAgICAgIHZhbCA9IChhc3NpZ24gJiYgYXNzaWduLnF1b3RhICE9PSB1bmRlZmluZWQpID8gYXNzaWduLnF1b3RhIDogMDsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgaWYgKHZhbCA+IDApIHJvd1RvdGFsICs9IHBhcnNlRmxvYXQodmFsKTsKICAgICAgICAgICAgICAgICAgICByb3dbY29sLmlkXSA9IHZhbCA+IDAgPyB2YWwgOiAiIjsKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgIGNvbnN0IHNlcnZpY2VHbG9iYWwgPSBnZXRHbG9iYWxUZWFjaGVyU2VydmljZShwLmlkeCk7CiAgICAgICAgICAgICAgICBjb25zdCBzZXJ2aWNlRHUgPSBwLm9ycyAtIChwLmNzZCB8fCAwKTsKCiAgICAgICAgICAgICAgICByb3cudG90YWwgPSByb3dUb3RhbC50b0ZpeGVkKDEpOwogICAgICAgICAgICAgICAgcm93Lmdsb2JhbCA9IHNlcnZpY2VHbG9iYWwudG9GaXhlZCgxKTsKICAgICAgICAgICAgICAgIHJvdy5kdWUgPSBzZXJ2aWNlRHUudG9GaXhlZCgxKTsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgLy8gSW5mbyBkZSBzdHlsZSBwb3VyIGxhIGxpZ25lCiAgICAgICAgICAgICAgICByb3cuX3N0eWxlX2dsb2JhbCA9IHsgdGV4dENvbG9yOiBzZXJ2aWNlR2xvYmFsID49IHNlcnZpY2VEdSA/IFszOSwgMTc0LCA5Nl0gOiBbMTkyLCA1NywgNDNdLCBmb250U3R5bGU6ICdib2xkJyB9OwogICAgICAgICAgICAgICAgcm93Ll9zdHlsZV9kdWUgPSB7IHRleHRDb2xvcjogWzE0MiwgNjgsIDE3M10gfTsgLy8gVmlvbGV0IHBvdXIgbGUgZMO7CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIHBkZlJvd3MucHVzaChyb3cpOwogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIC8vIExpZ25lIFJlbGlxdWF0CiAgICAgICAgICAgIGlmICghaXNMYWJvKSB7CiAgICAgICAgICAgICAgICBsZXQgcmVsUm93ID0geyBuYW1lOiAiUkVMSVFVQVQiIH07CiAgICAgICAgICAgICAgICBjb2xLZXlzLmZvckVhY2goY29sID0+IHsKICAgICAgICAgICAgICAgICAgICBsZXQgYXNzaWduZWRJbkNvbCA9IDA7CiAgICAgICAgICAgICAgICAgICAgcHJvZnMuZm9yRWFjaChwID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHEgPSBEQVRBLmFzc2lnbm1lbnRzW2Ake2NvbC5pZH1fJHtwLmlkeH1gXT8ucXVvdGEgfHwgMDsKICAgICAgICAgICAgICAgICAgICAgICAgIGFzc2lnbmVkSW5Db2wgKz0gcGFyc2VGbG9hdChxKTsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICBsZXQgYmVzb2luID0gMDsKICAgICAgICAgICAgICAgICAgICBpZihjb2wudHlwZSA9PT0gJ2NsYXNzJykgYmVzb2luID0gZ2V0SG91cnNGb3JDbGFzc1N1YmplY3QoY29sLmlkLCBjb2wubHZsLCBzdWIpOwogICAgICAgICAgICAgICAgICAgIGVsc2UgaWYoY29sLnR5cGUgPT09ICdsZXZlbCcpIGJlc29pbiA9IChtZXRhLnZvbExldmVsICYmIG1ldGEudm9sTGV2ZWxbY29sLmlkXSkgfHwgMDsKICAgICAgICAgICAgICAgICAgICBlbHNlIGlmKGNvbC50eXBlID09PSAnZXRhYicpIGJlc29pbiA9IG1ldGEuZXRhYiB8fCAwOwoKICAgICAgICAgICAgICAgICAgICBjb25zdCBkaWZmID0gYmVzb2luIC0gYXNzaWduZWRJbkNvbDsKICAgICAgICAgICAgICAgICAgICByZWxSb3dbY29sLmlkXSA9IE1hdGguYWJzKGRpZmYpIDwgMC4wMSA/ICJPSyIgOiBkaWZmLnRvRml4ZWQoMSk7CiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgLy8gU3R5bGUgY29uZGl0aW9ubmVsIGNlbGx1bGUKICAgICAgICAgICAgICAgICAgICByZWxSb3dbYF9zdHlsZV8ke2NvbC5pZH1gXSA9IHsgCiAgICAgICAgICAgICAgICAgICAgICAgIHRleHRDb2xvcjogTWF0aC5hYnMoZGlmZikgPCAwLjAxID8gWzM5LCAxNzQsIDk2XSA6IChkaWZmID4gMCA/IFsxOTIsIDU3LCA0M10gOiBbMjMwLCAxMjYsIDM0XSksCiAgICAgICAgICAgICAgICAgICAgICAgIGZvbnRTdHlsZTogJ2JvbGQnCiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgLy8gU3R5bGVzIHZpZGVzIHBvdXIgbGVzIHRvdGF1eCBzdXIgbGEgbGlnbmUgcmVsaXF1YXQKICAgICAgICAgICAgICAgIHJlbFJvdy50b3RhbCA9ICIiOyByZWxSb3cuZ2xvYmFsID0gIiI7IHJlbFJvdy5kdWUgPSAiIjsKICAgICAgICAgICAgICAgIHBkZlJvd3MucHVzaChyZWxSb3cpOwogICAgICAgICAgICB9CgogICAgICAgICAgICAvLyAtLS0gR8OpbsOpcmF0aW9uIGR1IFRhYmxlYXUgUERGIC0tLQogICAgICAgICAgICAKICAgICAgICAgICAgLy8gVGl0cmUgZGUgbGEgbWF0acOocmUKICAgICAgICAgICAgZG9jLnNldEZvbnRTaXplKDExKTsKICAgICAgICAgICAgZG9jLnNldFRleHRDb2xvcig1MiwgMTUyLCAyMTkpOwogICAgICAgICAgICBkb2MudGV4dChgJHtzdWJ9ICgke2lzTGFibyA/ICdMYWJvJyA6IG1ldGEubW9kZX0pYCwgbWFyZ2luLCBjdXJzb3JZICsgNSk7CiAgICAgICAgICAgIAogICAgICAgICAgICBkb2MuYXV0b1RhYmxlKHsKICAgICAgICAgICAgICAgIHN0YXJ0WTogY3Vyc29yWSArIDcsCiAgICAgICAgICAgICAgICBjb2x1bW5zOiBwZGZDb2x1bW5zLAogICAgICAgICAgICAgICAgYm9keTogcGRmUm93cywKICAgICAgICAgICAgICAgIHRoZW1lOiAnZ3JpZCcsCiAgICAgICAgICAgICAgICBzdHlsZXM6IHsgZm9udFNpemU6IDgsIGNlbGxQYWRkaW5nOiAxLCB0ZXh0Q29sb3I6IDUwLCBoYWxpZ246ICdjZW50ZXInIH0sCiAgICAgICAgICAgICAgICBoZWFkU3R5bGVzOiB7IGZpbGxDb2xvcjogWzUyLCA3MywgOTRdLCB0ZXh0Q29sb3I6IDI1NSwgZm9udFN0eWxlOiAnYm9sZCcgfSwKICAgICAgICAgICAgICAgIGNvbHVtblN0eWxlczogeyBuYW1lOiB7IGhhbGlnbjogJ2xlZnQnLCBmb250U3R5bGU6ICdib2xkJywgY2VsbFdpZHRoOiAzNSB9IH0sCiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIC8vIEFwcGxpY2F0aW9uIGRlcyBzdHlsZXMgY29uZGl0aW9ubmVscwogICAgICAgICAgICAgICAgZGlkUGFyc2VDZWxsOiBmdW5jdGlvbihkYXRhKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGEuc2VjdGlvbiA9PT0gJ2JvZHknKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJvd1JhdyA9IGRhdGEucm93LnJhdzsKICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFN0eWxlIENvbG9ubmUgVG90YWxlIEdsb2JhbCBQcm9mCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkYXRhLmNvbHVtbi5kYXRhS2V5ID09PSAnZ2xvYmFsJyAmJiByb3dSYXcuX3N0eWxlX2dsb2JhbCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5jZWxsLnN0eWxlcy50ZXh0Q29sb3IgPSByb3dSYXcuX3N0eWxlX2dsb2JhbC50ZXh0Q29sb3I7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLmNlbGwuc3R5bGVzLmZvbnRTdHlsZSA9IHJvd1Jhdy5fc3R5bGVfZ2xvYmFsLmZvbnRTdHlsZTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAvLyBTdHlsZSBDb2xvbm5lIETDuwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YS5jb2x1bW4uZGF0YUtleSA9PT0gJ2R1ZScgJiYgcm93UmF3Ll9zdHlsZV9kdWUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEuY2VsbC5zdHlsZXMudGV4dENvbG9yID0gcm93UmF3Ll9zdHlsZV9kdWUudGV4dENvbG9yOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFN0eWxlIENlbGx1bGVzIFJlbGlxdWF0CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHN0eWxlTWV0YSA9IHJvd1Jhd1tgX3N0eWxlXyR7ZGF0YS5jb2x1bW4uZGF0YUtleX1gXTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN0eWxlTWV0YSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5jZWxsLnN0eWxlcy50ZXh0Q29sb3IgPSBzdHlsZU1ldGEudGV4dENvbG9yOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5jZWxsLnN0eWxlcy5mb250U3R5bGUgPSBzdHlsZU1ldGEuZm9udFN0eWxlOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZvbmQgcm91Z2UgcG91ciBsYSBsaWduZSBSZWxpcXVhdAogICAgICAgICAgICAgICAgICAgICAgICBpZiAocm93UmF3Lm5hbWUgPT09ICJSRUxJUVVBVCIgJiYgZGF0YS5jb2x1bW4uZGF0YUtleSA9PT0gJ25hbWUnKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5jZWxsLnN0eWxlcy5mb250U3R5bGUgPSAnaXRhbGljJzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLmNlbGwuc3R5bGVzLnRleHRDb2xvciA9IFsxOTIsIDU3LCA0M107CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgbWFyZ2luOiB7IGxlZnQ6IG1hcmdpbiwgcmlnaHQ6IG1hcmdpbiB9CiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgY3Vyc29yWSA9IGRvYy5sYXN0QXV0b1RhYmxlLmZpbmFsWSArIDEwOwogICAgICAgICAgICAKICAgICAgICAgICAgLy8gU2kgb24gYXJyaXZlIGVuIGJhcyBkZSBwYWdlLCBvbiBzYXV0ZQogICAgICAgICAgICBpZiAoY3Vyc29yWSA+IGRvYy5pbnRlcm5hbC5wYWdlU2l6ZS5oZWlnaHQgLSAyMCkgewogICAgICAgICAgICAgICAgZG9jLmFkZFBhZ2UoKTsKICAgICAgICAgICAgICAgIGN1cnNvclkgPSAyMDsKICAgICAgICAgICAgfQogICAgICAgIH0pOwogICAgfSk7CgogICAgY29uc3QgZGF0ZVN0ciA9IG5ldyBEYXRlKCkudG9Mb2NhbGVEYXRlU3RyaW5nKCdmci1GUicpLnJlcGxhY2UoL1wvL2csICctJyk7CiAgICBkb2Muc2F2ZShgUmVwYXJ0aXRpb25fTWF0aWVyZV9QYXJfUG9sZV8ke2RhdGVTdHJ9LnBkZmApOwp9CgpmdW5jdGlvbiBnZW5lcmF0ZVJlcGFydGl0aW9uUHJvZnNQREYoKSB7CiAgICBjb25zdCB7IGpzUERGIH0gPSB3aW5kb3cuanNwZGY7CiAgICAvLyBGb3JjZSBwYXlzYWdlIChMYW5kc2NhcGUpIHBvdXIgYXZvaXIgZGUgbGEgcGxhY2UsIGZvcm1hdCBBNAogICAgY29uc3QgZG9jID0gbmV3IGpzUERGKHsgb3JpZW50YXRpb246ICdsYW5kc2NhcGUnLCBmb3JtYXQ6ICdhNCcgfSk7CiAgICAKICAgIGNvbnN0IHBhZ2VXaWR0aCA9IGRvYy5pbnRlcm5hbC5wYWdlU2l6ZS53aWR0aDsKICAgIGNvbnN0IHBhZ2VIZWlnaHQgPSBkb2MuaW50ZXJuYWwucGFnZVNpemUuaGVpZ2h0OwogICAgY29uc3QgbWFyZ2luID0gMTQ7CiAgICBsZXQgY3Vyc29yWSA9IDIwOwoKICAgIC8vIC0tLSBFTi1Uw4pURSBEVSBET0NVTUVOVCAtLS0KICAgIGNvbnN0IGFkZEhlYWRlciA9ICgpID0+IHsKICAgICAgICBkb2Muc2V0RmlsbENvbG9yKDQ0LCA2MiwgODApOyAvLyBDb3VsZXVyIFByaW1hcnkKICAgICAgICBkb2MucmVjdCgwLCAwLCBwYWdlV2lkdGgsIDE1LCAnRicpOwogICAgICAgIGRvYy5zZXRUZXh0Q29sb3IoMjU1LCAyNTUsIDI1NSk7CiAgICAgICAgZG9jLnNldEZvbnRTaXplKDEwKTsKICAgICAgICBkb2Muc2V0Rm9udCgiaGVsdmV0aWNhIiwgImJvbGQiKTsKICAgICAgICBkb2MudGV4dChgREhHIE1BTkFHRVIgLSBSw4lQQVJUSVRJT04gUEFSIEVOU0VJR05BTlRgLCBtYXJnaW4sIDEwKTsKICAgICAgICBkb2MudGV4dChgQW5uw6llICR7REFUQS5jb25maWcueWVhcn1gLCBwYWdlV2lkdGggLSBtYXJnaW4sIDEwLCB7IGFsaWduOiAncmlnaHQnIH0pOwogICAgICAgIGN1cnNvclkgPSAyNTsKICAgIH07CiAgICBhZGRIZWFkZXIoKTsKCiAgICAvLyAxLiBSZWdyb3VwZW1lbnQgZGVzIGRvbm7DqWVzIChJZGVtIHF1ZSBsJ2FmZmljaGFnZSDDqWNyYW4pCiAgICBjb25zdCBjb25zb2xpZGF0ZWQgPSB7fTsKICAgIGdldEVudGl0eVRlYWNoZXJzKCkuZm9yRWFjaCgodCkgPT4gewogICAgICAgIGNvbnN0IGNsZWFuTmFtZSA9IHQubmFtZS50cmltKCk7CiAgICAgICAgaWYoIWNvbnNvbGlkYXRlZFtjbGVhbk5hbWVdKSB7CiAgICAgICAgICAgIGNvbnNvbGlkYXRlZFtjbGVhbk5hbWVdID0geyBuYW1lOiBjbGVhbk5hbWUsIGluZGljZXM6IFtdLCBkYXRhOiBbXSB9OwogICAgICAgIH0KICAgICAgICBjb25zb2xpZGF0ZWRbY2xlYW5OYW1lXS5pbmRpY2VzLnB1c2godC5pZHgpOyAvLyBpbmRleCByw6llbCBkYW5zIFNIQVJFRF9URUFDSEVSUwogICAgICAgIGNvbnNvbGlkYXRlZFtjbGVhbk5hbWVdLmRhdGEucHVzaCh0KTsKICAgIH0pOwoKICAgIC8vIFRyaSBhbHBoYWLDqXRpcXVlCiAgICBjb25zdCBncm91cHMgPSBPYmplY3QudmFsdWVzKGNvbnNvbGlkYXRlZCkuc29ydCgoYSwgYikgPT4gYS5uYW1lLmxvY2FsZUNvbXBhcmUoYi5uYW1lKSk7CgogICAgLy8gMi4gQm91Y2xlIHN1ciBjaGFxdWUgcHJvZmVzc2V1cgogICAgZ3JvdXBzLmZvckVhY2goZ3JvdXAgPT4gewogICAgICAgIGxldCB0b3RhbFNlcnZpY2VGYWl0ID0gMDsKICAgICAgICBsZXQgdG90YWxEdSA9IDA7CiAgICAgICAgbGV0IHJvd3MgPSBbXTsKCiAgICAgICAgLy8gTWF0acOocmUgcHJpbmNpcGFsZQogICAgICAgIGxldCBtYWluU3ViID0gZ3JvdXAuZGF0YVswXS5zdWJqZWN0OwogICAgICAgIGdyb3VwLmRhdGEuZm9yRWFjaCh0ID0+IHsKICAgICAgICAgICAgY29uc3QgbWV0YSA9IERBVEEuc3ViamVjdE1ldGFbdC5zdWJqZWN0XTsKICAgICAgICAgICAgY29uc3QgbWV0YU1haW4gPSBEQVRBLnN1YmplY3RNZXRhW21haW5TdWJdOwogICAgICAgICAgICBpZihEQVRBLnN1YmplY3RzLnNvbWUocyA9PiBEQVRBLnN1YmplY3RNZXRhW3NdPy5wYXJlbnQgPT09IHQuc3ViamVjdCkpIG1haW5TdWIgPSB0LnN1YmplY3Q7CiAgICAgICAgICAgIGlmKG1ldGFNYWluPy5wYXJlbnQgPT09IHQuc3ViamVjdCkgbWFpblN1YiA9IHQuc3ViamVjdDsKICAgICAgICB9KTsKCiAgICAgICAgLy8gdG90YWxTZXJ2aWNlRmFpdCB2aWEgY2FsY1RlYWNoZXJIb3Vyc0JyZWFrZG93biAocGxhZm9ubmVtZW50IGx5Y8OpZS9ww7RsZSBpbmNsdXMpCiAgICAgICAgZ3JvdXAuZGF0YS5mb3JFYWNoKCh0LCBpKSA9PiB7CiAgICAgICAgICAgIGNvbnN0IHJlYWxJZHggPSBncm91cC5pbmRpY2VzW2ldOwogICAgICAgICAgICBjb25zdCBjc2QgPSBwYXJzZUZsb2F0KHQuY3NkIHx8IDApOwogICAgICAgICAgICB0b3RhbER1ICs9ICh0Lm9ycyAtIGNzZCk7CiAgICAgICAgICAgIGNvbnN0IGJkID0gY2FsY1RlYWNoZXJIb3Vyc0JyZWFrZG93bihyZWFsSWR4LCBjdXJyZW50RW50aXR5KTsKICAgICAgICAgICAgdG90YWxTZXJ2aWNlRmFpdCArPSBiZC53ZWlnaHRlZDsKICAgICAgICB9KTsKCiAgICAgICAgLy8gQ29uc3RydWN0aW9uIGRlcyBsaWduZXMgUERGIChhZmZpY2hhZ2UgdW5pcXVlbWVudCAtIHNhbnMgbW9kaWZpZXIgdG90YWxTZXJ2aWNlRmFpdCkKICAgICAgICBncm91cC5kYXRhLmZvckVhY2goKHQsIGkpID0+IHsKICAgICAgICAgICAgY29uc3QgcmVhbElkeCA9IGdyb3VwLmluZGljZXNbaV07CiAgICAgICAgICAgIGNvbnN0IGRlY2ggPSAocGFyc2VGbG9hdCh0LmRlY2hhcmdlIHx8IDApICsgcGFyc2VGbG9hdCh0LmRlY2hfZXh0IHx8IDApKTsKCiAgICAgICAgICAgIGxldCBsZXZlbHNQYWlkID0gbmV3IFNldCgpOwogICAgICAgICAgICBjb25zdCByZWxldmFudEtleXMgPSBPYmplY3Qua2V5cyhEQVRBLmFzc2lnbm1lbnRzKS5maWx0ZXIoayA9PiBwYXJzZUludChrLnNwbGl0KCdfJylbMV0pID09PSByZWFsSWR4KTsKCiAgICAgICAgICAgIHJlbGV2YW50S2V5cy5mb3JFYWNoKGtleSA9PiB7CiAgICAgICAgICAgICAgICBjb25zdCBwYXJ0cyA9IGtleS5zcGxpdCgnXycpOwogICAgICAgICAgICAgICAgY29uc3QgYXNzaWduID0gREFUQS5hc3NpZ25tZW50c1trZXldOwogICAgICAgICAgICAgICAgY29uc3QgZW50aXR5SWQgPSBwYXJ0cy5zbGljZSgwLCBwYXJ0cy5sZW5ndGggLSAxKS5qb2luKCdfJyk7CiAgICAgICAgICAgICAgICBjb25zdCBtZXRhID0gREFUQS5zdWJqZWN0TWV0YVt0LnN1YmplY3RdOwogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBsZXQgcGFyZW50TGV2ZWxOYW1lID0gbnVsbDsKICAgICAgICAgICAgICAgIGNvbnN0IHN0cnVjdEx2bEV4YWN0ID0gREFUQS5zdHJ1Y3R1cmUuZmluZChsID0+IGwubGV2ZWwgPT09IGVudGl0eUlkKTsKICAgICAgICAgICAgICAgIGlmIChzdHJ1Y3RMdmxFeGFjdCkgcGFyZW50TGV2ZWxOYW1lID0gc3RydWN0THZsRXhhY3QubGV2ZWw7CiAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBjb25zdCBzdHJ1Y3RMdmxQcmVmaXggPSBEQVRBLnN0cnVjdHVyZS5maW5kKGwgPT4gZW50aXR5SWQuc3RhcnRzV2l0aChnZXRMZXZlbFByZWZpeChsLmxldmVsKSkpOwogICAgICAgICAgICAgICAgICAgIGlmIChzdHJ1Y3RMdmxQcmVmaXgpIHBhcmVudExldmVsTmFtZSA9IHN0cnVjdEx2bFByZWZpeC5sZXZlbDsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBsZXQgaCA9IGFzc2lnbi5xdW90YSAhPT0gdW5kZWZpbmVkID8gcGFyc2VGbG9hdChhc3NpZ24ucXVvdGEpIDogMDsKICAgICAgICAgICAgICAgIGlmKGggPT09IDAgJiYgcGFyZW50TGV2ZWxOYW1lKSBoID0gZ2V0SG91cnNGb3JDbGFzc1N1YmplY3QoZW50aXR5SWQsIHBhcmVudExldmVsTmFtZSwgdC5zdWJqZWN0KTsKCiAgICAgICAgICAgICAgICBpZihoID4gMCkgewogICAgICAgICAgICAgICAgICAgIGxldCBsYWJlbCA9IERBVEEuY2xhc3NOYW1lc1tlbnRpdHlJZF0gfHwgZW50aXR5SWQ7CiAgICAgICAgICAgICAgICAgICAgbGV0IHR5cGVCYWRnZSA9ICJDbC4iOwogICAgICAgICAgICAgICAgICAgIGlmIChlbnRpdHlJZCA9PT0gJ0VUQUInKSB7IGxhYmVsID0gIkZvcmZhaXQgRXRhYiI7IHR5cGVCYWRnZSA9ICJFdGFiIjsgfQogICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHN0cnVjdEx2bEV4YWN0KSB7IHR5cGVCYWRnZSA9ICJOaXYiOyB9CgogICAgICAgICAgICAgICAgICAgIGxldCBpc0luY2x1ZGVkID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgaWYgKG1ldGEgJiYgbWV0YS5tb2RlID09PSAnbGV2ZWwnICYmIHBhcmVudExldmVsTmFtZSkgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAobGV2ZWxzUGFpZC5oYXMocGFyZW50TGV2ZWxOYW1lKSkgeyBpc0luY2x1ZGVkID0gdHJ1ZTsgfQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsgbGV2ZWxzUGFpZC5hZGQocGFyZW50TGV2ZWxOYW1lKTsgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICBsZXQgcm93TGFiZWwgPSBsYWJlbDsKICAgICAgICAgICAgICAgICAgICBpZih0LnN1YmplY3QgIT09IG1haW5TdWIpIHJvd0xhYmVsICs9IGAgKCR7dC5zdWJqZWN0fSlgOwoKICAgICAgICAgICAgICAgICAgICByb3dzLnB1c2goewogICAgICAgICAgICAgICAgICAgICAgICBjb2wxOiByb3dMYWJlbCwKICAgICAgICAgICAgICAgICAgICAgICAgY29sMjogaXNJbmNsdWRlZCA/ICIoSW5jbC4pIiA6IGgudG9GaXhlZCgxKSwKICAgICAgICAgICAgICAgICAgICAgICAgY29sMzogdHlwZUJhZGdlLAogICAgICAgICAgICAgICAgICAgICAgICBpc0luY2x1ZGVkOiBpc0luY2x1ZGVkLAogICAgICAgICAgICAgICAgICAgICAgICBpc0RlY2g6IGZhbHNlCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgaWYoZGVjaCA+IDApIHsKICAgICAgICAgICAgICAgIC8vIETDqWNoYXJnZXMgdmlzdWVsbGVzIChkw6lqw6AgZGFucyBsZSB3ZWlnaHRlZCBkZSBjYWxjVGVhY2hlckhvdXJzQnJlYWtkb3duKQogICAgICAgICAgICAgICAgcm93cy5wdXNoKHsgY29sMTogIkTDqWNoYXJnZXMgLyBBdXRyZXMiLCBjb2wyOiBkZWNoLnRvRml4ZWQoMSksIGNvbDM6ICJEaXYuIiwgaXNEZWNoOiB0cnVlIH0pOwogICAgICAgICAgICB9CiAgICAgICAgfSk7CgogICAgICAgIC8vIENhbGN1bCBkdSBzb2xkZSBldCBjb3VsZXVyCiAgICAgICAgY29uc3Qgc29sZGUgPSB0b3RhbFNlcnZpY2VGYWl0IC0gdG90YWxEdTsKICAgICAgICBjb25zdCBpc09rID0gc29sZGUgPj0gLTAuMTsKICAgICAgICBjb25zdCBjb2xvckhleCA9IGlzT2sgPyAiIzI3YWU2MCIgOiAiI2MwMzkyYiI7IC8vIFZlcnQgb3UgUm91Z2UKICAgICAgICBjb25zdCBjb2xvclJHQiA9IGlzT2sgPyBbMzksIDE3NCwgOTZdIDogWzE5MiwgNTcsIDQzXTsKCiAgICAgICAgLy8gLS0tIFJFTkRVIFNVUiBMRSBQREYgLS0tCgogICAgICAgIC8vIDEuIFbDqXJpZmljYXRpb24gZGUgbCdlc3BhY2UgcmVzdGFudCBwb3VyIMOpdml0ZXIgZGUgY291cGVyIHVuZSBjYXJ0ZQogICAgICAgIC8vIEVzdGltYXRpb24gaGF1dGV1ciA6IEhlYWRlciAoMTApICsgVGFibGUgKGFwcHJveCA3IHBhciBsaWduZSkgKyBQYWRkaW5nCiAgICAgICAgY29uc3QgZXN0aW1hdGVkSGVpZ2h0ID0gMTUgKyAocm93cy5sZW5ndGggKiA3KSArIDEwOwogICAgICAgIAogICAgICAgIGlmIChjdXJzb3JZICsgZXN0aW1hdGVkSGVpZ2h0ID4gcGFnZUhlaWdodCAtIDEwKSB7CiAgICAgICAgICAgIGRvYy5hZGRQYWdlKCk7CiAgICAgICAgICAgIGFkZEhlYWRlcigpOyAvLyBSZW1ldHRyZSBsJ2VuLXTDqnRlIHN1ciBsYSBub3V2ZWxsZSBwYWdlCiAgICAgICAgfQoKICAgICAgICAvLyAyLiBEZXNzaW4gZHUgY2FkcmUgIkNhcnRlIgogICAgICAgIGNvbnN0IGNhcmRTdGFydFkgPSBjdXJzb3JZOwogICAgICAgIAogICAgICAgIC8vIEJhcnJlIGRlIGNvdWxldXIgw6AgZ2F1Y2hlCiAgICAgICAgZG9jLnNldEZpbGxDb2xvcihjb2xvclJHQlswXSwgY29sb3JSR0JbMV0sIGNvbG9yUkdCWzJdKTsKICAgICAgICBkb2MucmVjdChtYXJnaW4sIGNhcmRTdGFydFksIDIsIDgsICdGJyk7IC8vIFBldGl0ZSBiYXJyZSBjb2xvcsOpZSB2aXN1ZWxsZQoKICAgICAgICAvLyBUaXRyZSBQcm9mZXNzZXVyCiAgICAgICAgZG9jLnNldEZvbnRTaXplKDExKTsKICAgICAgICBkb2Muc2V0Rm9udCgiaGVsdmV0aWNhIiwgImJvbGQiKTsKICAgICAgICBkb2Muc2V0VGV4dENvbG9yKDQ0LCA2MiwgODApOwogICAgICAgIGRvYy50ZXh0KGAke2dyb3VwLm5hbWV9IC0gJHttYWluU3VifWAsIG1hcmdpbiArIDQsIGNhcmRTdGFydFkgKyA2KTsKCiAgICAgICAgLy8gSW5kaWNhdGV1ciBTb2xkZSAow6AgZHJvaXRlKQogICAgICAgIGRvYy5zZXRGb250U2l6ZSgxMCk7CiAgICAgICAgZG9jLnRleHQoYEZhaXQ6ICR7dG90YWxTZXJ2aWNlRmFpdC50b0ZpeGVkKDIpfWggLyBEw7s6ICR7dG90YWxEdS50b0ZpeGVkKDEpfWhgLCBwYWdlV2lkdGggLSBtYXJnaW4gLSAzMCwgY2FyZFN0YXJ0WSArIDYsIHsgYWxpZ246ICdyaWdodCcgfSk7CiAgICAgICAgCiAgICAgICAgLy8gQmFkZ2UgU29sZGUKICAgICAgICBkb2Muc2V0RmlsbENvbG9yKGNvbG9yUkdCWzBdLCBjb2xvclJHQlsxXSwgY29sb3JSR0JbMl0pOwogICAgICAgIGRvYy5yb3VuZGVkUmVjdChwYWdlV2lkdGggLSBtYXJnaW4gLSAyNSwgY2FyZFN0YXJ0WSArIDEsIDI1LCA3LCAyLCAyLCAnRicpOwogICAgICAgIGRvYy5zZXRUZXh0Q29sb3IoMjU1LCAyNTUsIDI1NSk7CiAgICAgICAgZG9jLnNldEZvbnQoImhlbHZldGljYSIsICJib2xkIik7CiAgICAgICAgZG9jLnRleHQoYCR7c29sZGUgPiAwID8gJysnIDogJyd9JHtzb2xkZS50b0ZpeGVkKDIpfWAsIHBhZ2VXaWR0aCAtIG1hcmdpbiAtIDEyLjUsIGNhcmRTdGFydFkgKyA1LjUsIHsgYWxpZ246ICdjZW50ZXInIH0pOwoKICAgICAgICBjdXJzb3JZICs9IDEwOwoKICAgICAgICAvLyAzLiBUYWJsZWF1IGRlcyBzZXJ2aWNlcyAocydpbCB5IGEgZGVzIGxpZ25lcykKICAgICAgICBpZiAocm93cy5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgIGRvYy5hdXRvVGFibGUoewogICAgICAgICAgICAgICAgc3RhcnRZOiBjdXJzb3JZLAogICAgICAgICAgICAgICAgaGVhZDogW1snU3VwcG9ydCAvIENsYXNzZScsICdIZXVyZXMnLCAnVHlwZSddXSwKICAgICAgICAgICAgICAgIGJvZHk6IHJvd3MubWFwKHIgPT4gW3IuY29sMSwgci5jb2wyLCByLmNvbDNdKSwKICAgICAgICAgICAgICAgIHRoZW1lOiAnZ3JpZCcsCiAgICAgICAgICAgICAgICBzdHlsZXM6IHsgZm9udFNpemU6IDksIGNlbGxQYWRkaW5nOiAxLCB0ZXh0Q29sb3I6IDUwIH0sCiAgICAgICAgICAgICAgICBoZWFkU3R5bGVzOiB7IGZpbGxDb2xvcjogWzIzNiwgMjQwLCAyNDFdLCB0ZXh0Q29sb3I6IDUwLCBmb250U3R5bGU6ICdib2xkJywgbGluZVdpZHRoOiAwLjEsIGxpbmVDb2xvcjogMjAwIH0sCiAgICAgICAgICAgICAgICBjb2x1bW5TdHlsZXM6IHsKICAgICAgICAgICAgICAgICAgICAwOiB7IGNlbGxXaWR0aDogJ2F1dG8nIH0sCiAgICAgICAgICAgICAgICAgICAgMTogeyBjZWxsV2lkdGg6IDIwLCBoYWxpZ246ICdjZW50ZXInLCBmb250U3R5bGU6ICdib2xkJyB9LAogICAgICAgICAgICAgICAgICAgIDI6IHsgY2VsbFdpZHRoOiAxNSwgaGFsaWduOiAnY2VudGVyJywgdGV4dENvbG9yOiAxMDAgfQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGRpZFBhcnNlQ2VsbDogZnVuY3Rpb24oZGF0YSkgewogICAgICAgICAgICAgICAgICAgIC8vIFN0eWxlIGNvbmRpdGlvbm5lbCAobGlnbmVzIGdyaXPDqWVzIHNpIGluY2x1c2VzLCBldGMuKQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHJvd1JhdyA9IHJvd3NbZGF0YS5yb3cuaW5kZXhdOwogICAgICAgICAgICAgICAgICAgIGlmIChkYXRhLnNlY3Rpb24gPT09ICdib2R5JyAmJiByb3dSYXcpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJvd1Jhdy5pc0luY2x1ZGVkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLmNlbGwuc3R5bGVzLnRleHRDb2xvciA9IFsxNTAsIDE1MCwgMTUwXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEuY2VsbC5zdHlsZXMuZmlsbENvbG9yID0gWzI0OCwgMjQ5LCAyNTBdOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyb3dSYXcuaXNEZWNoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLmNlbGwuc3R5bGVzLnRleHRDb2xvciA9IFsxNDIsIDY4LCAxNzNdOyAvLyBWaW9sZXQgcG91ciBkw6ljaGFyZ2VzCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLmNlbGwuc3R5bGVzLmZpbGxDb2xvciA9IFsyNDQsIDIzNiwgMjQ3XTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBtYXJnaW46IHsgbGVmdDogbWFyZ2luICsgNCwgcmlnaHQ6IG1hcmdpbiB9IC8vIEluZGVudGF0aW9uIGzDqWfDqHJlIHNvdXMgbGUgdGl0cmUKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBjdXJzb3JZID0gZG9jLmxhc3RBdXRvVGFibGUuZmluYWxZICsgODsgLy8gRXNwYWNlIGFwcsOocyBsZSB0YWJsZWF1CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgLy8gQ2FzIHNhbnMgc2VydmljZQogICAgICAgICAgICBkb2Muc2V0Rm9udCgiaGVsdmV0aWNhIiwgIml0YWxpYyIpOwogICAgICAgICAgICBkb2Muc2V0Rm9udFNpemUoOSk7CiAgICAgICAgICAgIGRvYy5zZXRUZXh0Q29sb3IoMTUwKTsKICAgICAgICAgICAgZG9jLnRleHQoIihBdWN1biBzZXJ2aWNlIHNhaXNpKSIsIG1hcmdpbiArIDQsIGN1cnNvclkgKyA1KTsKICAgICAgICAgICAgY3Vyc29yWSArPSAxNTsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgLy8gTGlnbmUgZGUgc8OpcGFyYXRpb24gbMOpZ8OocmUgZW50cmUgbGVzIHByb2ZzIChvcHRpb25uZWwpCiAgICAgICAgZG9jLnNldERyYXdDb2xvcigyMzAsIDIzMCwgMjMwKTsKICAgICAgICBkb2MubGluZShtYXJnaW4sIGN1cnNvclkgLSA0LCBwYWdlV2lkdGggLSBtYXJnaW4sIGN1cnNvclkgLSA0KTsKCiAgICB9KTsKCiAgICAvLyBGaW5hbGlzYXRpb24KICAgIGNvbnN0IGRhdGVTdHIgPSBuZXcgRGF0ZSgpLnRvTG9jYWxlRGF0ZVN0cmluZygnZnItRlInKS5yZXBsYWNlKC9cLy9nLCAnLScpOwogICAgZG9jLnNhdmUoYFJlcGFydGl0aW9uX1NlcnZpY2VfRW5zZWlnbmFudHNfJHtkYXRlU3RyfS5wZGZgKTsKfQoKLy8gRm9uY3Rpb24gYXBwZWzDqWUgcXVhbmQgb24gY2xpcXVlIHN1ciAiVMOpbMOpY2hhcmdlciIgZGFucyBsZSBwb3AtdXAKZnVuY3Rpb24gY29uZmlybUdsb2JhbEV4cG9ydCgpIHsKICAgIC8vIFLDqWN1cMOocmUgbGVzIGNob2l4IGR1IG1lbnUKICAgIGNvbnN0IG9yaWVudGF0aW9uID0gZXhwQ29uZmlnLm9yaWVudGF0aW9uOyAvLyAncG9ydHJhaXQnIG91ICdsYW5kc2NhcGUnCiAgICBjb25zdCBmb3JtYXQgPSBleHBDb25maWcuZm9ybWF0OyAgICAgICAgICAgLy8gJ2EzJyBvdSAnYTQnCiAgICBjb25zdCBmb3JjZU9uZVBhZ2UgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2hrLWZvcmNlLW9uZS1wYWdlJykuY2hlY2tlZDsKICAgIAogICAgLy8gRmVybWUgbGUgbWVudQogICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2V4cG9ydC1vdmVybGF5Jykuc3R5bGUuZGlzcGxheSA9ICdub25lJzsKCiAgICAvLyBMYW5jZSBsZSBib24gZXhwb3J0IHNlbG9uIGxhIHNlY3Rpb24KICAgIGlmIChwZW5kaW5nRXhwb3J0U2VjdGlvbiA9PT0gJ2VxdWlwZXMnKSB7CiAgICAgICAgZXhwb3J0VGVhbXNHcmlkUERGKG9yaWVudGF0aW9uLCBmb3JtYXQsIGZvcmNlT25lUGFnZSk7CiAgICB9IGVsc2UgewogICAgICAgIGNvbnN0IGRhdGVTdHIgPSBuZXcgRGF0ZSgpLnRvTG9jYWxlRGF0ZVN0cmluZygnZnItRlInKTsKICAgICAgICBjb25zdCBmaWxlbmFtZSA9IGBESEcgLSAke3BlbmRpbmdFeHBvcnRUaXRsZX0gLSAke2RhdGVTdHJ9YDsKICAgICAgICBnZW5lcmF0ZVByb1BERihwZW5kaW5nRXhwb3J0U2VjdGlvbiwgcGVuZGluZ0V4cG9ydFRpdGxlLCBmaWxlbmFtZSwgb3JpZW50YXRpb24sIGZvcm1hdCk7CiAgICB9Cn0KCi8vIE5vdXZlbGxlIHZlcnNpb24gZGUgZ2VuZXJhdGVQcm9QREYgcXVpIGFjY2VwdGUgbGUgZm9ybWF0IGV0IGwnb3JpZW50YXRpb24KZnVuY3Rpb24gZ2VuZXJhdGVQcm9QREYoc2VjdGlvbiwgdGl0bGUsIGZpbGVuYW1lLCBjdXN0b21PcmllbnRhdGlvbiwgY3VzdG9tRm9ybWF0KSB7CiAgICBjb25zdCB7IGpzUERGIH0gPSB3aW5kb3cuanNwZGY7CiAgICAKICAgIC8vIFNpIHBhcyBkZSBjaG9peCAoZXg6IGFwcGVsIGRpcmVjdCksIHZhbGV1cnMgcGFyIGTDqWZhdXQKICAgIGNvbnN0IG9yaWVudCA9IGN1c3RvbU9yaWVudGF0aW9uIHx8ICdsYW5kc2NhcGUnOwogICAgY29uc3QgZm10ID0gY3VzdG9tRm9ybWF0IHx8ICdhNCc7CgogICAgY29uc3QgZG9jID0gbmV3IGpzUERGKHsgb3JpZW50YXRpb246IG9yaWVudCwgZm9ybWF0OiBmbXQgfSk7CiAgICAKICAgIGNvbnN0IHBhZ2VXaWR0aCA9IGRvYy5pbnRlcm5hbC5wYWdlU2l6ZS53aWR0aDsKICAgIGNvbnN0IG1hcmdpbiA9IDE0OwoKICAgIC8vIEFqdXN0ZW1lbnQgZGUgbGEgdGFpbGxlIGRlIHBvbGljZSBkZSBiYXNlIHNlbG9uIGxlIGZvcm1hdCBwb3VyIHJlbXBsaXIgbCdlc3BhY2UKICAgIC8vIEEzIHBlcm1ldCBkJ8OpY3JpcmUgcGx1cyBncm9zIG91IGQnYXZvaXIgcGx1cyBkZSBjb2xvbm5lcwogICAgbGV0IGJhc2VGb250U2l6ZSA9IChmbXQgPT09ICdhMycpID8gMTEgOiA5OwogICAgbGV0IGhlYWRlckZvbnRTaXplID0gKGZtdCA9PT0gJ2EzJykgPyAxMSA6IDk7CgogICAgLy8gLS0tIEVOLVTDilRFIC0tLQogICAgY29uc3QgYWRkSGVhZGVyID0gKGRhdGEpID0+IHsKICAgICAgICBkb2Muc2V0VGV4dENvbG9yKDQ0LCA2MiwgODApOwogICAgICAgIGRvYy5zZXRGb250U2l6ZSgxNik7CiAgICAgICAgZG9jLnNldEZvbnQoImhlbHZldGljYSIsICJib2xkIik7CiAgICAgICAgZG9jLnRleHQodGl0bGUudG9VcHBlckNhc2UoKSwgbWFyZ2luLCAyMCk7IAogICAgICAgIAogICAgICAgIGRvYy5zZXRGb250U2l6ZSgxMik7CiAgICAgICAgZG9jLnNldEZvbnQoImhlbHZldGljYSIsICJib2xkIik7CiAgICAgICAgZG9jLnNldFRleHRDb2xvcigxMDApOyAKICAgICAgICBkb2MudGV4dChgUmVudHLDqWUgJHtEQVRBLmNvbmZpZy55ZWFyfSAtICR7REFUQS5jb25maWcueWVhcisxfWAsIHBhZ2VXaWR0aCAtIG1hcmdpbiwgMjAsIHsgYWxpZ246ICdyaWdodCcgfSk7CiAgICAgICAgCiAgICAgICAgZG9jLnNldERyYXdDb2xvcigyMDAsIDIwMCwgMjAwKTsKICAgICAgICBkb2MubGluZShtYXJnaW4sIDI1LCBwYWdlV2lkdGggLSBtYXJnaW4sIDI1KTsKICAgIH07CgogICAgLy8gLS0tIFZFTlRJTEFUSU9OIChQSUxPVEFHRSkgLS0tCiAgICBpZiAoc2VjdGlvbiA9PT0gJ3BpbG90YWdlJykgewogICAgICAgIGNvbnN0IG5lZWRzID0gY2FsY3VsYXRlTmVlZHMoKTsKICAgICAgICBjb25zdCByb3dzID0gW107CiAgICAgICAgCiAgICAgICAgLy8gKExvZ2lxdWUgZGUgcsOpY3Vww6lyYXRpb24gZGVzIGRvbm7DqWVzIGlkZW50aXF1ZS4uLikKICAgICAgICBjb25zdCBnZXRTdGF0cyA9IChzdWIpID0+IHsKICAgICAgICAgICAgY29uc3QgcHJvZnMgPSBnZXRFbnRpdHlUZWFjaGVycygpLmZpbHRlcih0ID0+IHQuc3ViamVjdCA9PT0gc3ViKTsKICAgICAgICAgICAgY29uc3QgZGVjaEludCA9IHByb2ZzLnJlZHVjZSgoYSx0KT0+YSsodC5kZWNoYXJnZXx8MCksIDApOwogICAgICAgICAgICBjb25zdCBkZWNoRXh0ID0gcHJvZnMucmVkdWNlKChhLHQpPT5hKyh0LmRlY2hfZXh0fHwwKSwgMCk7CiAgICAgICAgICAgIGNvbnN0IGhwID0gcHJvZnMucmVkdWNlKChhLHQpPT4gYSArICh0Lm9ycyAtICh0LmNzZHx8MCkgLSAodC5kZWNoX2V4dHx8MCkpLCAwKTsKICAgICAgICAgICAgY29uc3QgaHNhID0gcHJvZnMucmVkdWNlKChhLHQpPT5hK3QuaHNhLCAwKTsKICAgICAgICAgICAgY29uc3QgYmVzID0gKG5lZWRzW3N1Yl0gfHwgMCkgKyBkZWNoSW50OwogICAgICAgICAgICBjb25zdCBhcHAgPSBocCArIGhzYTsKICAgICAgICAgICAgcmV0dXJuIHsgYmVzLCBhcHAsIGhwLCBoc2EsIHByb2ZzIH07CiAgICAgICAgfTsKCiAgICAgICAgY29uc3Qgcm9vdHMgPSBEQVRBLnN1YmplY3RzLmZpbHRlcihzID0+ICFEQVRBLnN1YmplY3RNZXRhW3NdPy5wYXJlbnQpLnNvcnQoKTsKICAgICAgICAKICAgICAgICByb290cy5mb3JFYWNoKHIgPT4gewogICAgICAgICAgICBjb25zdCByU3RhdHMgPSBnZXRTdGF0cyhyKTsKICAgICAgICAgICAgY29uc3Qga2lkcyA9IERBVEEuc3ViamVjdHMuZmlsdGVyKHMgPT4gREFUQS5zdWJqZWN0TWV0YVtzXT8ucGFyZW50ID09PSByKTsKICAgICAgICAgICAgCiAgICAgICAgICAgIGlmIChraWRzLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICAgIGxldCBwb2xlQmVzID0gclN0YXRzLmJlcywgcG9sZUFwcCA9IHJTdGF0cy5hcHAsIHBvbGVIUCA9IHJTdGF0cy5ocCwgcG9sZUhTQSA9IHJTdGF0cy5oc2E7CiAgICAgICAgICAgICAgICBjb25zdCBraWRzRGF0YSA9IGtpZHMubWFwKGsgPT4gewogICAgICAgICAgICAgICAgICAgIGNvbnN0IGtTdGF0cyA9IGdldFN0YXRzKGspOwogICAgICAgICAgICAgICAgICAgIHBvbGVCZXMgKz0ga1N0YXRzLmJlczsgcG9sZUFwcCArPSBrU3RhdHMuYXBwOyBwb2xlSFAgKz0ga1N0YXRzLmhwOyBwb2xlSFNBICs9IGtTdGF0cy5oc2E7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgbmFtZTogaywgc3RhdHM6IGtTdGF0cyB9OwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBjb25zdCBzb2xkZVBvbGUgPSBwb2xlQXBwIC0gcG9sZUJlczsKCiAgICAgICAgICAgICAgICByb3dzLnB1c2goewogICAgICAgICAgICAgICAgICAgIGNvbDE6IGBQw5RMRSAke3IudG9VcHBlckNhc2UoKX1gLAogICAgICAgICAgICAgICAgICAgIGNvbDI6IHBvbGVCZXMudG9GaXhlZCgxKSwgY29sMzogcG9sZUFwcC50b0ZpeGVkKDEpLCBjb2w0OiBwb2xlSFAudG9GaXhlZCgxKSwgY29sNTogcG9sZUhTQS50b0ZpeGVkKDEpLCBjb2w2OiBzb2xkZVBvbGUudG9GaXhlZCgxKSwKICAgICAgICAgICAgICAgICAgICBfc3R5bGU6IHsgZmlsbENvbG9yOiBbNjksIDkwLCAxMDBdLCBmb250U3R5bGU6ICdib2xkJywgdGV4dENvbG9yOiAyNTUgfSAvLyBHcmlzIEFudGhyYWNpdGUKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgIGFkZFN1YmplY3RSb3dzKHJvd3MsIHIsIHJTdGF0cywgdHJ1ZSk7CiAgICAgICAgICAgICAgICBraWRzRGF0YS5mb3JFYWNoKGtkID0+IGFkZFN1YmplY3RSb3dzKHJvd3MsIGtkLm5hbWUsIGtkLnN0YXRzLCB0cnVlKSk7CgogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgLy8gTWF0acOocmUgU29sbyA6IFN0eWxlICJFbi10w6p0ZSIgYXVzc2kKICAgICAgICAgICAgICAgIHJvd3MucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgY29sMTogciwKICAgICAgICAgICAgICAgICAgICBjb2wyOiByU3RhdHMuYmVzLnRvRml4ZWQoMSksIGNvbDM6IHJTdGF0cy5hcHAudG9GaXhlZCgxKSwgY29sNjogKHJTdGF0cy5hcHAgLSByU3RhdHMuYmVzKS50b0ZpeGVkKDEpLAogICAgICAgICAgICAgICAgICAgIF9zdHlsZTogeyBmaWxsQ29sb3I6IFs2OSwgOTAsIDEwMF0sIGZvbnRTdHlsZTogJ2JvbGQnLCB0ZXh0Q29sb3I6IDI1NSB9IC8vIEdyaXMgQW50aHJhY2l0ZQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIC8vIFByb2ZzIGRlIGxhIG1hdGnDqHJlIHNvbG8KICAgICAgICAgICAgICAgIHJTdGF0cy5wcm9mcy5mb3JFYWNoKHAgPT4gYWRkUHJvZlJvdyhyb3dzLCBwLCBmYWxzZSkpOwogICAgICAgICAgICB9CiAgICAgICAgfSk7CgogICAgICAgIGZ1bmN0aW9uIGFkZFN1YmplY3RSb3dzKHRhcmdldEFycmF5LCBuYW1lLCBzdGF0cywgaW5kZW50KSB7CiAgICAgICAgICAgIC8vIFBvdXIgbGVzIHNvdXMtbWF0acOocmVzIGRhbnMgdW4gcMO0bGUKICAgICAgICAgICAgaWYoc3RhdHMuYmVzID09PSAwICYmIHN0YXRzLmFwcCA9PT0gMCkgcmV0dXJuOwogICAgICAgICAgICBjb25zdCBzb2xkZSA9IHN0YXRzLmFwcCAtIHN0YXRzLmJlczsKICAgICAgICAgICAgY29uc3QgbGFiZWwgPSBpbmRlbnQgPyBgICAgJHtuYW1lfWAgOiBuYW1lOyAKCiAgICAgICAgICAgIHRhcmdldEFycmF5LnB1c2goewogICAgICAgICAgICAgICAgY29sMTogbGFiZWwsCiAgICAgICAgICAgICAgICBjb2wyOiBzdGF0cy5iZXMudG9GaXhlZCgxKSwgY29sMzogc3RhdHMuYXBwLnRvRml4ZWQoMSksIGNvbDY6IHNvbGRlLnRvRml4ZWQoMSksCiAgICAgICAgICAgICAgICBfc3R5bGU6IHsgZmlsbENvbG9yOiBbMjQ1LCAyNDUsIDI0NV0sIGZvbnRTdHlsZTogJ2JvbGQnLCB0ZXh0Q29sb3I6IDAgfSAvLyBHcmlzIHRyw6hzIGNsYWlyCiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBzdGF0cy5wcm9mcy5mb3JFYWNoKHAgPT4gYWRkUHJvZlJvdyh0YXJnZXRBcnJheSwgcCwgdHJ1ZSkpOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gYWRkUHJvZlJvdyh0YXJnZXRBcnJheSwgcCwgaW5kZW50KSB7CiAgICAgICAgICAgIGNvbnN0IHJlYWxDb250cmliID0gKHAub3JzIC0gKHAuY3NkfHwwKSAtIChwLmRlY2hfZXh0fHwwKSkgKyBwLmhzYTsKICAgICAgICAgICAgbGV0IGluZm8gPSAiIjsgCiAgICAgICAgICAgIGlmKHAuYm1wPjApIGluZm8gKz0gYEJNUCAke3AuYm1wfWggYDsKICAgICAgICAgICAgaWYocC5jc2Q+MCkgaW5mbyArPSBgKERvbnQgJHtwLmNzZH1oIENTRCkgYDsKICAgICAgICAgICAgaWYocC5kZWNoYXJnZT4wKSBpbmZvICs9IGAoRG9udCAke3AuZGVjaGFyZ2V9aCBER0gpIGA7CiAgICAgICAgICAgIAogICAgICAgICAgICBjb25zdCBwcm9mTGFiZWwgPSBpbmRlbnQgPyBgICAgICAgJHtwLm5hbWV9ICgke3Auc3RhdHVzfSlgIDogYCAgICR7cC5uYW1lfSAoJHtwLnN0YXR1c30pYDsKCiAgICAgICAgICAgIHRhcmdldEFycmF5LnB1c2goewogICAgICAgICAgICAgICAgY29sMTogcHJvZkxhYmVsLAogICAgICAgICAgICAgICAgY29sMjogJycsIGNvbDM6ICcnLCAKICAgICAgICAgICAgICAgIGNvbDQ6IHJlYWxDb250cmliLnRvRml4ZWQoMSksCiAgICAgICAgICAgICAgICBfc3R5bGU6IHsgZmlsbENvbG9yOiBbMjU1LCAyNTUsIDI1NV0sIGZvbnRTdHlsZTogJ25vcm1hbCcsIHRleHRDb2xvcjogNTAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9CgogICAgICAgIGRvYy5hdXRvVGFibGUoewogICAgICAgICAgICBoZWFkOiBbWydEaXNjaXBsaW5lIC8gRW5zZWlnbmFudCcsICdCZXNvaW4nLCAnQXBwb3J0JywgJ1NvbGRlJ11dLAogICAgICAgICAgICBib2R5OiByb3dzLm1hcChyID0+IFtyLmNvbDEsIHIuY29sMiwgci5jb2wzLCByLmNvbDZdKSwKICAgICAgICAgICAgc3RhcnRZOiAzNSwKICAgICAgICAgICAgdGhlbWU6ICdncmlkJywKICAgICAgICAgICAgaGVhZFN0eWxlczogeyBmaWxsQ29sb3I6IFs1MiwgMTUyLCAyMTldLCB0ZXh0Q29sb3I6IDI1NSwgZm9udFN0eWxlOiAnYm9sZCcsIGhhbGlnbjogJ2NlbnRlcicsIGZvbnRTaXplOiBoZWFkZXJGb250U2l6ZSB9LAogICAgICAgICAgICBzdHlsZXM6IHsgZm9udFNpemU6IGJhc2VGb250U2l6ZSwgY2VsbFBhZGRpbmc6IDEuNSwgdmFsaWduOiAnbWlkZGxlJywgaGFsaWduOiAnY2VudGVyJywgbGluZUNvbG9yOiBbMjAwLDIwMCwyMDBdLCBsaW5lV2lkdGg6IDAuMSB9LAogICAgICAgICAgICBjb2x1bW5TdHlsZXM6IHsgMDogeyBoYWxpZ246ICdsZWZ0JywgY2VsbFdpZHRoOiAnYXV0bycgfSB9LAogICAgICAgICAgICBkaWRQYXJzZUNlbGw6IGZ1bmN0aW9uKGRhdGEpIHsKICAgICAgICAgICAgICAgIGNvbnN0IHJvd09iaiA9IHJvd3NbZGF0YS5yb3cuaW5kZXhdOwogICAgICAgICAgICAgICAgaWYgKGRhdGEuc2VjdGlvbiA9PT0gJ2JvZHknICYmIHJvd09iaiAmJiByb3dPYmouX3N0eWxlKSB7CiAgICAgICAgICAgICAgICAgICAgZGF0YS5jZWxsLnN0eWxlcy5maWxsQ29sb3IgPSByb3dPYmouX3N0eWxlLmZpbGxDb2xvcjsKICAgICAgICAgICAgICAgICAgICBkYXRhLmNlbGwuc3R5bGVzLmZvbnRTdHlsZSA9IHJvd09iai5fc3R5bGUuZm9udFN0eWxlOwogICAgICAgICAgICAgICAgICAgIGRhdGEuY2VsbC5zdHlsZXMudGV4dENvbG9yID0gcm93T2JqLl9zdHlsZS50ZXh0Q29sb3I7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGRpZERyYXdQYWdlOiBhZGRIZWFkZXIsCiAgICAgICAgICAgIG1hcmdpbjogeyB0b3A6IDM1LCBib3R0b206IDIwLCBsZWZ0OiBtYXJnaW4sIHJpZ2h0OiBtYXJnaW4gfQogICAgICAgIH0pOwogICAgfQoKICAgIC8vIC0tLSBBVVRSRVMgKEJJTEFOLCBQUk9GUywgRVRDLikgLS0tCiAgICBlbHNlIHsKICAgICAgICBsZXQgc291cmNlRWxlbSA9IG51bGw7CiAgICAgICAgaWYgKHNlY3Rpb24gPT09ICdwcm9mZXNzZXVycycpIHNvdXJjZUVsZW0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmgtdGFibGUtbGlzdCcpOyAKICAgICAgICBlbHNlIGlmIChzZWN0aW9uID09PSAncmVjYXAnKSBzb3VyY2VFbGVtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JlY2FwLXRhYmxlJyk7CiAgICAgICAgZWxzZSBpZiAoc2VjdGlvbiA9PT0gJ3ZlbnRpbGF0aW9uJykgc291cmNlRWxlbSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5ncmlkLXRhYmxlJyk7CiAgICAgICAgZWxzZSBpZiAoc2VjdGlvbiA9PT0gJ3N0cnVjdHVyZScpIHNvdXJjZUVsZW0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3RydWN0dXJlLXRhYmxlJyk7CiAgICAgICAgZWxzZSBpZiAoc2VjdGlvbiA9PT0gJ21hdGllcmVzJykgc291cmNlRWxlbSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzdWJqZWN0cy10YWJsZScpOwoKICAgICAgICBpZiAoIXNvdXJjZUVsZW0gJiYgc2VjdGlvbiAhPT0gJ2Rhc2hib2FyZCcpIHsgYWxlcnQoIlJpZW4gw6AgZXhwb3J0ZXIuIik7IHJldHVybjsgfQoKICAgICAgICBpZiAoc2VjdGlvbiA9PT0gJ2Rhc2hib2FyZCcpIHsKICAgICAgICAgICAgIC8vIChDb2RlIGRhc2hib2FyZCBpbmNoYW5nw6kuLi4pCiAgICAgICAgICAgICBhZGRIZWFkZXIoKTsKICAgICAgICAgICAgIGRvYy5zYXZlKGAke2ZpbGVuYW1lfS5wZGZgKTsKICAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIC8vIE5ldHRveWFnZSBhdmFudCBleHBvcnQKICAgICAgICBjb25zdCBjbGVhblQgPSBjbGVhblRhYmxlRm9yRXhwb3J0KHNvdXJjZUVsZW0pOwogICAgICAgIAogICAgICAgIGRvYy5hdXRvVGFibGUoewogICAgICAgICAgICBodG1sOiBjbGVhblQsCiAgICAgICAgICAgIHN0YXJ0WTogMzUsCiAgICAgICAgICAgIHRoZW1lOiAnZ3JpZCcsCiAgICAgICAgICAgIGhlYWRTdHlsZXM6IHsgZmlsbENvbG9yOiBbNTIsIDE1MiwgMjE5XSwgdGV4dENvbG9yOiAyNTUsIGZvbnRTdHlsZTogJ2JvbGQnLCBoYWxpZ246ICdjZW50ZXInLCBmb250U2l6ZTogaGVhZGVyRm9udFNpemUgfSwKICAgICAgICAgICAgc3R5bGVzOiB7IGZvbnRTaXplOiBiYXNlRm9udFNpemUsIHRleHRDb2xvcjogNTAsIHZhbGlnbjogJ21pZGRsZScsIGhhbGlnbjogJ2NlbnRlcicsIGNlbGxQYWRkaW5nOiAxIH0sCiAgICAgICAgICAgIAogICAgICAgICAgICAvLyBHZXN0aW9uIGRlcyBjb3VsZXVycyBwb3VyIGxlIEJJTEFOCiAgICAgICAgICAgIGRpZFBhcnNlQ2VsbDogZnVuY3Rpb24oZGF0YSkgewogICAgICAgICAgICAgICAgaWYoc2VjdGlvbiA9PT0gJ3JlY2FwJyAmJiBkYXRhLnNlY3Rpb24gPT09ICdib2R5JykgewogICAgICAgICAgICAgICAgICAgIGNvbnN0IHJvd1JhdyA9IGRhdGEucm93LnJhdzsKICAgICAgICAgICAgICAgICAgICAvLyBTaSBsYSBsaWduZSBhIGxhIGNsYXNzZSAicm93LWhlYWRlciIgKG5vdHJlIGdyaXMgYW50aHJhY2l0ZSkKICAgICAgICAgICAgICAgICAgICBpZihyb3dSYXcuY2xhc3NMaXN0ICYmIHJvd1Jhdy5jbGFzc0xpc3QuY29udGFpbnMoJ3Jvdy1oZWFkZXInKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5jZWxsLnN0eWxlcy5maWxsQ29sb3IgPSBbNjksIDkwLCAxMDBdOyAvLyBHcmlzIEFudGhyYWNpdGUKICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEuY2VsbC5zdHlsZXMudGV4dENvbG9yID0gMjU1OwogICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5jZWxsLnN0eWxlcy5mb250U3R5bGUgPSAnYm9sZCc7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LAogICAgICAgICAgICAKICAgICAgICAgICAgZGlkRHJhd1BhZ2U6IGFkZEhlYWRlciwKICAgICAgICAgICAgbWFyZ2luOiB7IHRvcDogMzUsIGJvdHRvbTogMjAsIGxlZnQ6IG1hcmdpbiwgcmlnaHQ6IG1hcmdpbiB9CiAgICAgICAgfSk7CiAgICB9CgogICAgZG9jLnNhdmUoYCR7ZmlsZW5hbWV9LnBkZmApOwp9CgpmdW5jdGlvbiBjbGVhblRhYmxlRm9yRXhwb3J0KG9yaWdpbmFsKSB7CiAgICBpZiAoIW9yaWdpbmFsKSByZXR1cm4gbnVsbDsKICAgIGNvbnN0IGNsb25lID0gb3JpZ2luYWwuY2xvbmVOb2RlKHRydWUpOwoKICAgIC8vIDEuIFN1cHByZXNzaW9uIENvbG9ubmUgQ29kZQogICAgY29uc3QgY29kZUhlYWRlciA9IGNsb25lLnF1ZXJ5U2VsZWN0b3IoJy5jb2wtY29kZS1oZWFkZXInKTsKICAgIGlmKGNvZGVIZWFkZXIpIGNvZGVIZWFkZXIucmVtb3ZlKCk7CiAgICBjbG9uZS5xdWVyeVNlbGVjdG9yQWxsKCcuY29sLWNvZGUnKS5mb3JFYWNoKGVsID0+IGVsLnJlbW92ZSgpKTsKCiAgICAvLyAyLiBBcGxhdGlzc2VtZW50IGRlcyBJbnB1dHMKICAgIGNsb25lLnF1ZXJ5U2VsZWN0b3JBbGwoJy50ZC1jbGFzcycpLmZvckVhY2godGQgPT4gewogICAgICAgIGNvbnN0IGJ0biA9IHRkLnF1ZXJ5U2VsZWN0b3IoJy5jbGFzcy1uYW1lLWJ0bicpOwogICAgICAgIGNvbnN0IG5hbWUgPSBidG4gPyBidG4uaW5uZXJUZXh0IDogdGQuaW5uZXJUZXh0OwogICAgICAgIHRkLmlubmVySFRNTCA9ICcnOwogICAgICAgIHRkLmlubmVyVGV4dCA9IG5hbWUudHJpbSgpOwogICAgICAgIHRkLnN0eWxlLmZvbnRXZWlnaHQgPSAnYm9sZCc7CiAgICAgICAgdGQuc3R5bGUudGV4dEFsaWduID0gJ2NlbnRlcic7IAogICAgfSk7CgogICAgY2xvbmUucXVlcnlTZWxlY3RvckFsbCgnLnZlcnRpY2FsLXN0YWNrJykuZm9yRWFjaChzdGFjayA9PiB7CiAgICAgICAgY29uc3QgaW5wdXRzID0gc3RhY2sucXVlcnlTZWxlY3RvckFsbCgnaW5wdXQnKTsKICAgICAgICBpZihpbnB1dHMubGVuZ3RoID09PSAyKSB7CiAgICAgICAgICAgIGNvbnN0IGJhc2UgPSBwYXJzZUZsb2F0KGlucHV0c1swXS52YWx1ZSB8fCAwKTsKICAgICAgICAgICAgY29uc3QgbWFyZ2UgPSBwYXJzZUZsb2F0KGlucHV0c1sxXS52YWx1ZSB8fCAwKTsKICAgICAgICAgICAgY29uc3Qgc3BhbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTsKICAgICAgICAgICAgc3Bhbi5pbm5lclRleHQgPSBtYXJnZSA+IDAgPyBgJHtiYXNlfSArICR7bWFyZ2V9YCA6IGJhc2U7CiAgICAgICAgICAgIHNwYW4uc3R5bGUud2hpdGVTcGFjZSA9ICdub3dyYXAnOwogICAgICAgICAgICBzdGFjay5wYXJlbnROb2RlLnJlcGxhY2VDaGlsZChzcGFuLCBzdGFjayk7CiAgICAgICAgfQogICAgfSk7CgogICAgY2xvbmUucXVlcnlTZWxlY3RvckFsbCgnaW5wdXQnKS5mb3JFYWNoKGlucHV0ID0+IHsKICAgICAgICBjb25zdCBzcGFuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpOwogICAgICAgIHNwYW4uaW5uZXJUZXh0ID0gaW5wdXQudmFsdWUgIT09ICIiID8gaW5wdXQudmFsdWUgOiAiIjsKICAgICAgICBpbnB1dC5wYXJlbnROb2RlLnJlcGxhY2VDaGlsZChzcGFuLCBpbnB1dCk7CiAgICB9KTsKCiAgICBjbG9uZS5xdWVyeVNlbGVjdG9yQWxsKCdzZWxlY3QnKS5mb3JFYWNoKHNlbGVjdCA9PiB7CiAgICAgICAgY29uc3Qgc3BhbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTsKICAgICAgICBzcGFuLmlubmVyVGV4dCA9IHNlbGVjdC5vcHRpb25zW3NlbGVjdC5zZWxlY3RlZEluZGV4XT8udGV4dCB8fCAiIjsKICAgICAgICBzZWxlY3QucGFyZW50Tm9kZS5yZXBsYWNlQ2hpbGQoc3Bhbiwgc2VsZWN0KTsKICAgIH0pOwoKICAgIC8vIDMuIE5ldHRveWFnZSBJbnRlcmZhY2UKICAgIGNsb25lLnF1ZXJ5U2VsZWN0b3JBbGwoJ2J1dHRvbiwgLmRlbC1iYWRnZSwgLmJ0biwgbGFiZWwsIGlucHV0W3R5cGU9Y2hlY2tib3hdJykuZm9yRWFjaChlbCA9PiBlbC5yZW1vdmUoKSk7CgogICAgLy8gNC4gTmV0dG95YWdlIEVuLXTDqnRlcwogICAgY2xvbmUucXVlcnlTZWxlY3RvckFsbCgndGgnKS5mb3JFYWNoKHRoID0+IHsKICAgICAgICBjb25zdCB0ZXh0ID0gdGguaW5uZXJUZXh0LnRyaW0oKS5yZXBsYWNlKC9ccysvZywgJyAnKTsgCiAgICAgICAgdGguaW5uZXJIVE1MID0gdGV4dDsKICAgICAgICB0aC5zdHlsZS53aWR0aCA9ICdhdXRvJzsKICAgICAgICB0aC5zdHlsZS5oZWlnaHQgPSAnYXV0byc7CiAgICB9KTsKICAgIAogICAgLy8gNS4gU3VwcHJlc3Npb24gQ29sb25uZSBBY3Rpb25zCiAgICBjb25zdCBoZWFkZXJzID0gY2xvbmUucXVlcnlTZWxlY3RvckFsbCgndGgnKTsKICAgIGxldCBhY3Rpb25JbmRleCA9IC0xOwogICAgaGVhZGVycy5mb3JFYWNoKCh0aCwgaWR4KSA9PiB7CiAgICAgICAgaWYodGguaW5uZXJUZXh0LmluY2x1ZGVzKCdBY3QnKSB8fCB0aC5pbm5lclRleHQuaW5jbHVkZXMoJ1N1cHByJykgfHwgdGguaW5uZXJUZXh0LmluY2x1ZGVzKCdBY3Rpb25zJykgfHwgdGguaW5uZXJUZXh0LmluY2x1ZGVzKCdBY3Rpb24nKSkgYWN0aW9uSW5kZXggPSBpZHg7CiAgICB9KTsKICAgIAogICAgaWYgKGFjdGlvbkluZGV4ID4gLTEpIHsKICAgICAgICBoZWFkZXJzW2FjdGlvbkluZGV4XS5yZW1vdmUoKTsKICAgICAgICBjbG9uZS5xdWVyeVNlbGVjdG9yQWxsKCd0Ym9keSB0cicpLmZvckVhY2godHIgPT4gewogICAgICAgICAgICBpZih0ci5jZWxscy5sZW5ndGggPiBhY3Rpb25JbmRleCkgdHIuZGVsZXRlQ2VsbChhY3Rpb25JbmRleCk7CiAgICAgICAgfSk7CiAgICB9CgogICAgLy8gLS0tIDYuIE9QVElNSVNBVElPTiBFVCBORVRUT1lBR0UgREVTIElDT05FUyAtLS0KICAgIGNsb25lLnF1ZXJ5U2VsZWN0b3JBbGwoJ3RkJykuZm9yRWFjaChlbCA9PiB7CiAgICAgICAgLy8gU3VwcHJlc3Npb24gZmzDqGNoZXMKICAgICAgICBpZihlbC5pbm5lclRleHQuaW5jbHVkZXMoJ+KGsycpKSB7CiAgICAgICAgICAgIGVsLmlubmVyVGV4dCA9IGVsLmlubmVyVGV4dC5yZXBsYWNlKC/ihrMvZywgJycpLnRyaW0oKTsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgLy8gQUpPVVQgOiBTdXBwcmVzc2lvbiBkZSBsJ2ljw7RuZSBCT8OOVEUvUE9MRSAo8J+TpikgcG91ciBsZSBQREYKICAgICAgICBpZihlbC5pbm5lclRleHQuaW5jbHVkZXMoJ/Cfk6YnKSkgewogICAgICAgICAgICBlbC5pbm5lclRleHQgPSBlbC5pbm5lclRleHQucmVwbGFjZSgv8J+Tpi9nLCAnJykudHJpbSgpOwogICAgICAgIH0KICAgICAgICAKICAgICAgICAvLyBOZXR0b3lhZ2UgZ8OpbsOpcmFsCiAgICAgICAgZWwuaW5uZXJIVE1MID0gZWwuaW5uZXJUZXh0LnJlcGxhY2UoL1xuL2csICcgJykucmVwbGFjZSgvXHMrL2csICcgJykudHJpbSgpOwogICAgICAgIAogICAgICAgIC8vIENvbXBhY3RhZ2UgdmlzdWVsCiAgICAgICAgZWwuc3R5bGUucGFkZGluZ0xlZnQgPSAnMnB4JzsKICAgICAgICBlbC5zdHlsZS50ZXh0QWxpZ24gPSAnbGVmdCc7CiAgICB9KTsKCiAgICByZXR1cm4gY2xvbmU7Cn0KCmZ1bmN0aW9uIHJlbmRlclRlYW1zKCkgewogICAgY2xlYW5Hcm91cEFzc2lnbm1lbnRzKCk7CiAgICBjb25zdCB0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RlYW1zLXRhYmxlJyk7CiAgICBpZiAoIXQpIHJldHVybjsKICAgIHQuaW5uZXJIVE1MID0gJyc7CiAgICAKICAgIC8vIE1vZGlmaWNhdGlvbiBkZSBsYSBsw6lnZW5kZSAoaW5jaGFuZ8OpKQogICAgY29uc3QgbGVnZW5kQ29udGFpbmVyID0gdC5jbG9zZXN0KCcuY2FyZCcpLnF1ZXJ5U2VsZWN0b3IoJy5jYXJkLWhlYWRlciBkaXZbc3R5bGUqPSJmb250LXN0eWxlOml0YWxpYyJdJyk7CiAgICBpZiAobGVnZW5kQ29udGFpbmVyKSB7CiAgICAgICAgbGVnZW5kQ29udGFpbmVyLmlubmVySFRNTCA9IGAKICAgICAgICAgICAgPHNwYW4gc3R5bGU9ImRpc3BsYXk6ZmxleDsgYWxpZ24taXRlbXM6Y2VudGVyOyI+PHNwYW4gc3R5bGU9IndpZHRoOjEycHg7IGhlaWdodDoxMnB4OyBiYWNrZ3JvdW5kOiMyN2FlNjA7IG1hcmdpbi1yaWdodDo0cHg7Ij48L3NwYW4+Q2xhc3NlPC9zcGFuPgogICAgICAgICAgICA8c3BhbiBzdHlsZT0iZGlzcGxheTpmbGV4OyBhbGlnbi1pdGVtczpjZW50ZXI7IG1hcmdpbi1sZWZ0OjEwcHg7Ij48c3BhbiBzdHlsZT0id2lkdGg6MTJweDsgaGVpZ2h0OjEycHg7IGJhY2tncm91bmQ6IzM0OThkYjsgbWFyZ2luLXJpZ2h0OjRweDsiPjwvc3Bhbj5QYXJ0YWdlIGRlIGNsYXNzZTwvc3Bhbj4KICAgICAgICAgICAgPHNwYW4gc3R5bGU9Im1hcmdpbi1sZWZ0OjEwcHg7Ij7wn5GRIENsaWMgRHJvaXQgPSBQcm9mIFByaW5jaXBhbDwvc3Bhbj4KICAgICAgICAgICAgPHNwYW4gc3R5bGU9ImNvbG9yOiNjMDM5MmI7IGZvbnQtd2VpZ2h0OmJvbGQ7IG1hcmdpbi1sZWZ0OjEwcHg7Ij5Sb3VnZSA9IFByb2YgbWFucXVhbnQ8L3NwYW4+CiAgICAgICAgYDsKICAgIH0KCiAgICAvLyBDb25zdHJ1Y3Rpb24gZHUgSGVhZGVyIChpbmNoYW5nw6kpCiAgICBsZXQgaGVhZGVySFRNTCA9ICc8dGhlYWQ+PHRyPjx0aCBzdHlsZT0ibWluLXdpZHRoOjIyMHB4OyB0ZXh0LWFsaWduOmxlZnQ7IHBhZGRpbmctbGVmdDoxMHB4OyI+TWF0acOocmUgLyBFbnNlaWduYW50PC90aD4nOwogICAgREFUQS5zdHJ1Y3R1cmUuZm9yRWFjaChsdmwgPT4gewogICAgICAgIGNvbnN0IHByZWZpeCA9IGdldExldmVsUHJlZml4KGx2bC5sZXZlbCk7CiAgICAgICAgZm9yKGxldCBpPTA7IGk8bHZsLmRpdjsgaSsrKSB7CiAgICAgICAgICAgIGNvbnN0IGRlZklkID0gYCR7cHJlZml4fSR7U3RyaW5nLmZyb21DaGFyQ29kZSg2NStpKX1gOwogICAgICAgICAgICBjb25zdCBkaXNwbGF5TmFtZSA9IERBVEEuY2xhc3NOYW1lc1tkZWZJZF0gfHwgZGVmSWQ7CiAgICAgICAgICAgIGhlYWRlckhUTUwgKz0gYDx0aCBzdHlsZT0id2lkdGg6NDVweDsgZm9udC1zaXplOjAuOHJlbTsiPiR7ZGlzcGxheU5hbWV9PC90aD5gOwogICAgICAgIH0KICAgIH0pOwogICAgaGVhZGVySFRNTCArPSAnPC90cj48L3RoZWFkPic7CiAgICB0LmlubmVySFRNTCA9IGhlYWRlckhUTUw7CiAgICAKICAgIGNvbnN0IGJvZHkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0Ym9keScpOwogICAgY29uc3Qgcm9vdHMgPSBEQVRBLnN1YmplY3RzLmZpbHRlcihzID0+ICFEQVRBLnN1YmplY3RNZXRhW3NdPy5wYXJlbnQpLnNvcnQoKTsKICAgIGNvbnN0IG9yZ2FuaXplZCA9IFtdOwogICAgCiAgICAvLyBPcmdhbmlzYXRpb24gaGnDqXJhcmNoaXF1ZQogICAgcm9vdHMuZm9yRWFjaChyID0+IHsgCiAgICAgICAgb3JnYW5pemVkLnB1c2goe25hbWU6IHIsIGlzQ2hpbGQ6IGZhbHNlfSk7IAogICAgICAgIERBVEEuc3ViamVjdHMuZmlsdGVyKHMgPT4gREFUQS5zdWJqZWN0TWV0YVtzXT8ucGFyZW50ID09PSByKS5mb3JFYWNoKGMgPT4gb3JnYW5pemVkLnB1c2goe25hbWU6IGMsIGlzQ2hpbGQ6IHRydWUsIHBhcmVudDogcn0pKTsgCiAgICB9KTsKCiAgICBvcmdhbml6ZWQuZm9yRWFjaChzdWJqSXRlbSA9PiB7CiAgICAgICAgY29uc3Qgc3ViID0gc3Viakl0ZW0ubmFtZTsKICAgICAgICBjb25zdCBtZXRhID0gREFUQS5zdWJqZWN0TWV0YVtzdWJdIHx8IHt9OwogICAgICAgIAogICAgICAgIC8vIExlcyBzdXItbWF0acOocmVzIChtb2RlPWdyb3VwKSBuJ29udCBwYXMgZGUgdm9sdW1lIGhvcmFpcmUgcHJvcHJlIOKGkiBqYW1haXMgYWZmaWNow6llcwogICAgICAgIGlmIChtZXRhLm1vZGUgPT09ICdncm91cCcpIHJldHVybjsKICAgICAgICAKICAgICAgICBsZXQgaXNTdWJqZWN0VmlzaWJsZSA9IGZhbHNlOwoKICAgICAgICAvLyBWw6lyaWZpY2F0aW9uIGRlIHZpc2liaWxpdMOpCiAgICAgICAgREFUQS5zdHJ1Y3R1cmUuZm9yRWFjaChsdmwgPT4gewogICAgICAgICAgICBjb25zdCBwcmVmaXggPSBnZXRMZXZlbFByZWZpeChsdmwubGV2ZWwpOwogICAgICAgICAgICBmb3IobGV0IGk9MDsgaTxsdmwuZGl2OyBpKyspIHsKICAgICAgICAgICAgICAgIGNvbnN0IGNJZCA9IGAke3ByZWZpeH0ke1N0cmluZy5mcm9tQ2hhckNvZGUoNjUraSl9YDsKICAgICAgICAgICAgICAgIGlmIChnZXRIb3Vyc0ZvckNsYXNzU3ViamVjdChjSWQsIGx2bC5sZXZlbCwgc3ViKSA+IDApIGlzU3ViamVjdFZpc2libGUgPSB0cnVlOwogICAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgCiAgICAgICAgaWYgKCFpc1N1YmplY3RWaXNpYmxlKSByZXR1cm47CgogICAgICAgIC8vIFRpdHJlIGRlIGxhIHNlY3Rpb24gTWF0acOocmUgYXZlYyB2b2x1bWVzIGhvcmFpcmVzIHBhciBjbGFzc2UKICAgICAgICB7CiAgICAgICAgICAgIGxldCBoZWFkZXJIVE1MID0gYDx0ciBjbGFzcz0idGVhbS1zdWJqZWN0LXJvdyI+PHRkIHN0eWxlPSJ0ZXh0LWFsaWduOmxlZnQ7IHBhZGRpbmctbGVmdDoxMnB4OyI+JHtzdWJ9YDsKICAgICAgICAgICAgLy8gVm9sdW1lcyBob3JhaXJlcyA6IGFmZmljaGVyIHBvdXIgY2hhcXVlIGNvbG9ubmUKICAgICAgICAgICAgbGV0IHZvbHVtZUNlbGxzID0gJyc7CiAgICAgICAgICAgIERBVEEuc3RydWN0dXJlLmZvckVhY2gobHZsID0+IHsKICAgICAgICAgICAgICAgIGNvbnN0IHByZWZpeCA9IGdldExldmVsUHJlZml4KGx2bC5sZXZlbCk7CiAgICAgICAgICAgICAgICBmb3IobGV0IGk9MDsgaTxsdmwuZGl2OyBpKyspIHsKICAgICAgICAgICAgICAgICAgICBjb25zdCBjSWQgPSBgJHtwcmVmaXh9JHtTdHJpbmcuZnJvbUNoYXJDb2RlKDY1K2kpfWA7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgaCA9IGdldEhvdXJzRm9yQ2xhc3NTdWJqZWN0KGNJZCwgbHZsLmxldmVsLCBzdWIpOwogICAgICAgICAgICAgICAgICAgIC8vIFLDqWN1cMOpcmVyIGNvbmZpZyBkZW1pIHBvdXIgbm90YXRpb24gWCsoWSkKICAgICAgICAgICAgICAgICAgICBsZXQgbGFiZWwgPSAnJzsKICAgICAgICAgICAgICAgICAgICBpZiAoaCA+IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbGMgPSBEQVRBLmxldmVsQ29uZmlnPy5bbHZsLmxldmVsXTsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY2ZnID0gKERBVEEuY2xhc3NPdmVycmlkZXM/LltjSWRdPy5bc3ViXSkgfHwgKGxjPy5bc3ViXSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGRlbWkgPSBjZmcgPyAocGFyc2VGbG9hdChjZmcuZGVtaSkgfHwgMCkgOiAwOwogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjb2VmID0gY2ZnID8gKHBhcnNlRmxvYXQoY2ZnLmNvZWYpIHx8IDEpIDogMTsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYmFzZSA9IGNmZyA/IChwYXJzZUZsb2F0KGNmZy5iYXNlKSB8fCAwKSA6IDA7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkZW1pID4gMCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWwgPSBgJHtiYXNlfSsoJHtkZW1pfSlgOwogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWwgPSBgJHtoICUgMSA9PT0gMCA/IGgudG9GaXhlZCgwKSA6IGgudG9GaXhlZCgxKX1oYDsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB2b2x1bWVDZWxscyArPSBgPHRkIHN0eWxlPSJ0ZXh0LWFsaWduOmNlbnRlcjsgZm9udC1zaXplOjAuN3JlbTsgY29sb3I6IzI3YWU2MDsgZm9udC13ZWlnaHQ6NzAwOyI+JHtsYWJlbH08L3RkPmA7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgdm9sdW1lQ2VsbHMgKz0gYDx0ZD48L3RkPmA7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgaGVhZGVySFRNTCArPSBgPC90ZD4ke3ZvbHVtZUNlbGxzfTwvdHI+YDsKICAgICAgICAgICAgYm9keS5pbm5lckhUTUwgKz0gaGVhZGVySFRNTDsKICAgICAgICB9CgogICAgICAgIC8vIC0tLSBOT1VWRUxMRSBMT0dJUVVFIERFIEZVU0lPTiAtLS0KICAgICAgICAKICAgICAgICAvLyAxLiBMZXMgdGl0dWxhaXJlcyBkaXJlY3RzIGRlIGNldHRlIHNvdXMtbWF0acOocmUKICAgICAgICBjb25zdCBwYXJlbnRHcm91cCA9IG1ldGEucGFyZW50ICYmIERBVEEuc3ViamVjdE1ldGFbbWV0YS5wYXJlbnRdPy5tb2RlID09PSAnZ3JvdXAnID8gbWV0YS5wYXJlbnQgOiBudWxsOwogICAgICAgIGNvbnN0IG1haW5Qcm9mcyA9IGdldEVudGl0eVRlYWNoZXJzKCkuZmlsdGVyKHAgPT4gcC5zdWJqZWN0ID09PSBzdWIpOwoKICAgICAgICAvLyAyLiBMZXMgcHJvZnMgZHUgZ3JvdXBlIHBhcmVudCA6IFRPVUpPVVJTIGFmZmljaMOpcyBkYW5zIHRvdXRlcyBsZXMgc291cy1tYXRpw6hyZXMKICAgICAgICAvLyAgICBwb3VyIHBlcm1ldHRyZSBsJ2FmZmVjdGF0aW9uIGluZMOpcGVuZGFudGUgcGFyIHNvdXMtbWF0acOocmUuCiAgICAgICAgLy8gICAgTGV1ciBjbMOpIGQnYWZmZWN0YXRpb24gZXN0IDogY0lkX3RJZHh+Y2hpbGRTdWIgKGF2ZWMgfiBjb21tZSBzw6lwYXJhdGV1cikKICAgICAgICBsZXQgZ3JvdXBQcm9mcyA9IFtdOwogICAgICAgIGlmIChwYXJlbnRHcm91cCkgewogICAgICAgICAgICBnZXRFbnRpdHlUZWFjaGVycygpCiAgICAgICAgICAgICAgICAuZmlsdGVyKHAgPT4gcC5zdWJqZWN0ID09PSBwYXJlbnRHcm91cCkKICAgICAgICAgICAgICAgIC5mb3JFYWNoKHAgPT4gZ3JvdXBQcm9mcy5wdXNoKHsuLi5wLCBfZnJvbUdyb3VwOiB0cnVlLCBfZ3JvdXBOYW1lOiBwYXJlbnRHcm91cH0pKTsKICAgICAgICB9CiAgICAgICAgICAgIAogICAgICAgIC8vIDMuIExlcyBpbnZpdMOpcyAoRGlzY2lwbGluZXMgYXNzb2Npw6llcykKICAgICAgICBsZXQgZ3Vlc3RQcm9mcyA9IFtdOwogICAgICAgIGlmIChtZXRhLmxpbmtlZFN1YmplY3RzICYmIG1ldGEubGlua2VkU3ViamVjdHMubGVuZ3RoID4gMCkgewogICAgICAgICAgICBndWVzdFByb2ZzID0gZ2V0RW50aXR5VGVhY2hlcnMoKQogICAgICAgICAgICAgICAgLmZpbHRlcihwID0+IG1ldGEubGlua2VkU3ViamVjdHMuaW5jbHVkZXMocC5zdWJqZWN0KSk7CiAgICAgICAgfQoKICAgICAgICAvLyA0LiBGdXNpb24gZXQgVHJpIChzYW5zIGRvdWJsb25zKQogICAgICAgIGNvbnN0IHNlZW5Qcm9mSWR4ID0gbmV3IFNldCgpOwogICAgICAgIGNvbnN0IHByb2ZzID0gWy4uLm1haW5Qcm9mcywgLi4uZ3JvdXBQcm9mcywgLi4uZ3Vlc3RQcm9mc10uZmlsdGVyKHAgPT4gewogICAgICAgICAgICBjb25zdCB1aWQgPSBwLl9mcm9tR3JvdXAgPyBgZ18ke3AuaWR4fWAgOiBgJHtwLmlkeH1gOwogICAgICAgICAgICBpZiAoc2VlblByb2ZJZHguaGFzKHVpZCkpIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgc2VlblByb2ZJZHguYWRkKHVpZCk7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0pLnNvcnQoKGEsIGIpID0+IGEubmFtZS5sb2NhbGVDb21wYXJlKGIubmFtZSkpOwogICAgICAgIAogICAgICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgICAgICAgcHJvZnMuZm9yRWFjaChwID0+IHsKICAgICAgICAgICAgLy8gQWZmaWNoYWdlIGRpc3RpbmN0aWYgc2Vsb24gbCdvcmlnaW5lIGR1IHByb2YKICAgICAgICAgICAgbGV0IGRpc3BsYXlOYW1lID0gcC5uYW1lOwogICAgICAgICAgICBpZiAocC5fZnJvbUdyb3VwKSB7CiAgICAgICAgICAgICAgICBkaXNwbGF5TmFtZSArPSBgIDxzcGFuIHN0eWxlPSJmb250LXNpemU6MC43NXJlbTsgY29sb3I6IzhlNDRhZDsgZm9udC13ZWlnaHQ6bm9ybWFsOyIgdGl0bGU9IkFzc2lnbsOpIHZpYSBsZSBncm91cGUgJyR7cC5fZ3JvdXBOYW1lfSciPvCfk4IgJHtwLl9ncm91cE5hbWV9PC9zcGFuPmA7CiAgICAgICAgICAgIH0gZWxzZSBpZiAocC5zdWJqZWN0ICE9PSBzdWIpIHsKICAgICAgICAgICAgICAgIGRpc3BsYXlOYW1lICs9IGAgPHNwYW4gc3R5bGU9ImZvbnQtc2l6ZTowLjc1cmVtOyBjb2xvcjojZTY3ZTIyOyBmb250LXdlaWdodDpub3JtYWw7Ij4oJHtwLnN1YmplY3R9KTwvc3Bhbj5gOwogICAgICAgICAgICB9CgogICAgICAgICAgICBsZXQgcm93SFRNTCA9IGA8dHI+PHRkIGNsYXNzPSJ0ZWFtLXRlYWNoZXItbGFiZWwiIHRpdGxlPSIke3AubmFtZX0iPiR7ZGlzcGxheU5hbWV9PC90ZD5gOwogICAgICAgICAgICAKICAgICAgICAgICAgLy8gR8OpbsOpcmF0aW9uIGRlcyBjZWxsdWxlcwogICAgICAgICAgICBEQVRBLnN0cnVjdHVyZS5mb3JFYWNoKGx2bCA9PiB7CiAgICAgICAgICAgICAgICBjb25zdCBwcmVmaXggPSBnZXRMZXZlbFByZWZpeChsdmwubGV2ZWwpOwogICAgICAgICAgICAgICAgZm9yKGxldCBpPTA7IGk8bHZsLmRpdjsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgY0lkID0gYCR7cHJlZml4fSR7U3RyaW5nLmZyb21DaGFyQ29kZSg2NStpKX1gOwogICAgICAgICAgICAgICAgICAgIC8vIENsw6kgc3DDqWNpZmlxdWUgw6AgbGEgc291cy1tYXRpw6hyZSBwb3VyIGxlcyBwcm9mcyBkZSBncm91cGUKICAgICAgICAgICAgICAgICAgICBjb25zdCBrZXkgPSBwLl9mcm9tR3JvdXAgPyBgJHtjSWR9XyR7cC5pZHh9fiR7c3VifWAgOiBgJHtjSWR9XyR7cC5pZHh9YDsKICAgICAgICAgICAgICAgICAgICBjb25zdCBhc3NpZ24gPSBEQVRBLmFzc2lnbm1lbnRzW2tleV07CiAgICAgICAgICAgICAgICAgICAgY29uc3QgaG91cnMgPSBnZXRIb3Vyc0ZvckNsYXNzU3ViamVjdChjSWQsIGx2bC5sZXZlbCwgc3ViKTsKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICBsZXQgY2VsbENsYXNzID0gImNlbGwtYXNzaWduIjsKICAgICAgICAgICAgICAgICAgICBsZXQgY29udGVudCA9ICIiOwogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIGlmIChob3VycyA8PSAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNlbGxDbGFzcyArPSAiIGNlbGwtZGlzYWJsZWQiOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoYXNzaWduKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNlbGxDbGFzcyArPSBhc3NpZ24ubW9kZSA9PT0gJ0dST1VQJyA/ICIgbW9kZS1ncm91cCIgOiAiIG1vZGUtY2xhc3MiOwogICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50ID0gYXNzaWduLm1vZGUgPT09ICdHUk9VUCcgPyAi8J+RpSIgOiAi4pyFIjsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoYXNzaWduLmlzUFApIGNlbGxDbGFzcyArPSAiIGlzLXBwIjsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICBjZWxsQ2xhc3MgKz0gIiBtaXNzaW5nLXRlYWNoZXIiOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAvLyBQcm9mcyBkZSBncm91cGUgOiBjbGlxdWFibGVzIGF2ZWMgY2hpbGRTdWIgcGFzc8OpIGVuIGFyZ3VtZW50CiAgICAgICAgICAgICAgICAgICAgbGV0IGFjdGlvbnMgPSAiIjsKICAgICAgICAgICAgICAgICAgICBpZiAoaG91cnMgPiAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwLl9mcm9tR3JvdXApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbnMgPSBgb25jbGljaz0idG9nZ2xlVGVhbUFzc2lnbignJHtjSWR9JywgJHtwLmlkeH0sICcke3N1Yi5yZXBsYWNlKC8nL2csIlwnIil9JykiIG9uY29udGV4dG1lbnU9InRvZ2dsZVRlYW1QUChldmVudCwgJyR7Y0lkfScsICR7cC5pZHh9LCAnJHtzdWIucmVwbGFjZSgvJy9nLCJcJyIpfScpImA7IAogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0aW9ucyA9IGBvbmNsaWNrPSJ0b2dnbGVUZWFtQXNzaWduKCcke2NJZH0nLCAke3AuaWR4fSkiIG9uY29udGV4dG1lbnU9InRvZ2dsZVRlYW1QUChldmVudCwgJyR7Y0lkfScsICR7cC5pZHh9KSJgOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHJvd0hUTUwgKz0gYDx0ZD48ZGl2IGNsYXNzPSIke2NlbGxDbGFzc30iICR7YWN0aW9uc30+JHtjb250ZW50fTwvZGl2PjwvdGQ+YDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHJvd0hUTUwgKz0gYDwvdHI+YDsKICAgICAgICAgICAgYm9keS5pbm5lckhUTUwgKz0gcm93SFRNTDsKICAgICAgICB9KTsKCiAgICAgICAgLy8gQ2FzIHZpZGUgKGluY2hhbmfDqSkKICAgICAgICBpZihwcm9mcy5sZW5ndGggPT09IDApIHsKICAgICAgICAgICAgbGV0IHJvd0hUTUwgPSBgPHRyPjx0ZCBjbGFzcz0idGVhbS10ZWFjaGVyLWxhYmVsIiBzdHlsZT0iZm9udC1zdHlsZTppdGFsaWM7IGNvbG9yOiM5OTk7Ij4oQXVjdW4gZW5zZWlnbmFudCk8L3RkPmA7CiAgICAgICAgICAgIERBVEEuc3RydWN0dXJlLmZvckVhY2gobHZsID0+IHsKICAgICAgICAgICAgICAgIGNvbnN0IHByZWZpeCA9IGdldExldmVsUHJlZml4KGx2bC5sZXZlbCk7CiAgICAgICAgICAgICAgICBmb3IobGV0IGk9MDsgaTxsdmwuZGl2OyBpKyspIHsKICAgICAgICAgICAgICAgICAgICBjb25zdCBjSWQgPSBgJHtwcmVmaXh9JHtTdHJpbmcuZnJvbUNoYXJDb2RlKDY1K2kpfWA7CiAgICAgICAgICAgICAgICAgICAgaWYgKGdldEhvdXJzRm9yQ2xhc3NTdWJqZWN0KGNJZCwgbHZsLmxldmVsLCBzdWIpIDw9IDApIHJvd0hUTUwgKz0gYDx0ZD48ZGl2IGNsYXNzPSJjZWxsLWFzc2lnbiBjZWxsLWRpc2FibGVkIj48L2Rpdj48L3RkPmA7CiAgICAgICAgICAgICAgICAgICAgZWxzZSByb3dIVE1MICs9IGA8dGQ+PGRpdiBjbGFzcz0iY2VsbC1hc3NpZ24gbWlzc2luZy10ZWFjaGVyIj48L2Rpdj48L3RkPmA7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBib2R5LmlubmVySFRNTCArPSByb3dIVE1MICsgYDwvdHI+YDsKICAgICAgICB9CiAgICB9KTsKICAgIHQuYXBwZW5kQ2hpbGQoYm9keSk7Cn0KCmZ1bmN0aW9uIHRvZ2dsZVRlYW1Bc3NpZ24oY0lkLCB0SWR4LCBjaGlsZFN1YikgewogICAgLy8gY2hpbGRTdWIgOiBmb3VybmkgcG91ciBsZXMgcHJvZnMgZCd1biBncm91cGUgKHN1ci1tYXRpw6hyZSksIHNww6ljaWZpZSBsYSBzb3VzLW1hdGnDqHJlIGNsaXF1w6llCiAgICBjb25zdCBrZXkgPSBjaGlsZFN1YiA/IGAke2NJZH1fJHt0SWR4fX4ke2NoaWxkU3VifWAgOiBgJHtjSWR9XyR7dElkeH1gOwogICAgY29uc3QgZW50aXR5VGVhY2hlcnMgPSBnZXRFbnRpdHlUZWFjaGVycygpOwogICAgY29uc3QgdGVhY2hlciA9IGVudGl0eVRlYWNoZXJzLmZpbmQodCA9PiB0LmlkeCA9PT0gdElkeCkgfHwgU0hBUkVEX1RFQUNIRVJTW3RJZHhdOwoKICAgIGlmICghREFUQS5hc3NpZ25tZW50c1trZXldKSB7CiAgICAgICAgY29uc3QgbHZsTmFtZSA9IERBVEEuc3RydWN0dXJlLmZpbmQobCA9PiBjSWQuc3RhcnRzV2l0aChnZXRMZXZlbFByZWZpeChsLmxldmVsKSkpPy5sZXZlbDsKICAgICAgICAvLyBQb3VyIHVuIHByb2YgZGUgZ3JvdXBlIDogcXVvdGEgPSBoZXVyZXMgZGUgbGEgU09VUy1tYXRpw6hyZSBzcMOpY2lmaXF1ZQogICAgICAgIGNvbnN0IHN1YmplY3RGb3JIb3VycyA9IGNoaWxkU3ViIHx8IHRlYWNoZXIuc3ViamVjdDsKICAgICAgICBjb25zdCBoID0gZ2V0SG91cnNGb3JDbGFzc1N1YmplY3QoY0lkLCBsdmxOYW1lLCBzdWJqZWN0Rm9ySG91cnMpOwogICAgICAgIERBVEEuYXNzaWdubWVudHNba2V5XSA9IHsgbW9kZTogJ0NMQVNTJywgcXVvdGE6IGgsIGlzUFA6IGZhbHNlLCBjaGlsZFN1YjogY2hpbGRTdWIgfHwgbnVsbCB9OwogICAgfSBlbHNlIHsKICAgICAgICBkZWxldGUgREFUQS5hc3NpZ25tZW50c1trZXldOwogICAgfQoKICAgIC8vIFJlY2FsY3VsIGRlcyBtb2RlcyAocGFydGFnZSBkZSBjbGFzc2UpIHBvdXIgbGVzIGNsw6lzIGR1IG3Dqm1lIHR5cGUKICAgIGNvbnN0IHN1YmplY3QgPSBjaGlsZFN1YiB8fCB0ZWFjaGVyLnN1YmplY3Q7CiAgICBjb25zdCBhc3NpZ25lZCA9IGdldEVudGl0eVRlYWNoZXJzKCkubWFwKHQgPT4gdC5pZHgpCiAgICAgICAgLmZpbHRlcihpZHggPT4gewogICAgICAgICAgICBjb25zdCBrID0gY2hpbGRTdWIgPyBgJHtjSWR9XyR7aWR4fX4ke2NoaWxkU3VifWAgOiBgJHtjSWR9XyR7aWR4fWA7CiAgICAgICAgICAgIHJldHVybiBEQVRBLmFzc2lnbm1lbnRzW2tdICYmIChTSEFSRURfVEVBQ0hFUlNbaWR4XSB8fCB7c3ViamVjdDonJ30pLnN1YmplY3QgPT09IHRlYWNoZXIuc3ViamVjdDsKICAgICAgICB9KTsKCiAgICBjb25zdCBuZXdNb2RlID0gYXNzaWduZWQubGVuZ3RoID4gMSA/ICdHUk9VUCcgOiAnQ0xBU1MnOwogICAgYXNzaWduZWQuZm9yRWFjaChpZHggPT4gewogICAgICAgIGNvbnN0IGsgPSBjaGlsZFN1YiA/IGAke2NJZH1fJHtpZHh9fiR7Y2hpbGRTdWJ9YCA6IGAke2NJZH1fJHtpZHh9YDsKICAgICAgICBpZiAoREFUQS5hc3NpZ25tZW50c1trXSkgREFUQS5hc3NpZ25tZW50c1trXS5tb2RlID0gbmV3TW9kZTsKICAgIH0pOwoKICAgIHNhdmVEYXRhKCk7CiAgICByZW5kZXJUZWFtcygpOwp9CgovLyBDbGljIERyb2l0IDogUHJvZiBQcmluY2lwYWwKZnVuY3Rpb24gdG9nZ2xlVGVhbVBQKGUsIGNJZCwgdElkeCwgY2hpbGRTdWIpIHsKICAgIGUucHJldmVudERlZmF1bHQoKTsgLy8gQmxvcXVlIGxlIG1lbnUgY29udGV4dHVlbCBkdSBuYXZpZ2F0ZXVyCiAgICBpZighREFUQS5hc3NpZ25tZW50cykgREFUQS5hc3NpZ25tZW50cyA9IHt9OwogICAgY29uc3Qga2V5ID0gY2hpbGRTdWIgPyBgJHtjSWR9XyR7dElkeH1+JHtjaGlsZFN1Yn1gIDogYCR7Y0lkfV8ke3RJZHh9YDsKICAgIAogICAgLy8gU2kgbGEgY2FzZSBlc3QgdmlkZSwgbGUgY2xpYyBkcm9pdCBsJ2FjdGl2ZSBlbiAiQ2xhc3NlIGVudGnDqHJlIiBkaXJlY3QKICAgIGlmKCFEQVRBLmFzc2lnbm1lbnRzW2tleV0pIERBVEEuYXNzaWdubWVudHNba2V5XSA9IHsgbW9kZTogJ0NMQVNTJywgaXNQUDogZmFsc2UsIGNoaWxkU3ViOiBjaGlsZFN1YiB8fCBudWxsIH07CiAgICAKICAgIERBVEEuYXNzaWdubWVudHNba2V5XS5pc1BQID0gIURBVEEuYXNzaWdubWVudHNba2V5XS5pc1BQOwogICAgc2F2ZURhdGEoKTsKICAgIHJlbmRlclRlYW1zKCk7Cn0KCmZ1bmN0aW9uIGV4cG9ydFRlYW1zTGlzdHNQREYoKSB7CiAgICBjb25zdCB7IGpzUERGIH0gPSB3aW5kb3cuanNwZGY7CiAgICBjb25zdCBkb2MgPSBuZXcganNQREYoKTsKICAgIGNvbnN0IHBhZ2VXaWR0aCA9IGRvYy5pbnRlcm5hbC5wYWdlU2l6ZS53aWR0aDsKICAgIGxldCBwYWdlQWRkZWQgPSBmYWxzZTsKCiAgICBEQVRBLnN0cnVjdHVyZS5mb3JFYWNoKGx2bCA9PiB7CiAgICAgICAgY29uc3QgcHJlZml4ID0gbHZsLmxldmVsLnJlcGxhY2UoL1teMC05XS9nLCAnJykgfHwgbHZsLmxldmVsLmNoYXJBdCgwKTsKICAgICAgICBmb3IobGV0IGk9MDsgaTxsdmwuZGl2OyBpKyspIHsKICAgICAgICAgICAgY29uc3QgY0lkID0gYCR7cHJlZml4fSR7U3RyaW5nLmZyb21DaGFyQ29kZSg2NStpKX1gOwogICAgICAgICAgICBjb25zdCBkaXNwbGF5TmFtZSA9IERBVEEuY2xhc3NOYW1lc1tjSWRdIHx8IGNJZDsKICAgICAgICAgICAgCiAgICAgICAgICAgIGlmKHBhZ2VBZGRlZCkgZG9jLmFkZFBhZ2UoKTsKICAgICAgICAgICAgcGFnZUFkZGVkID0gdHJ1ZTsKCiAgICAgICAgICAgIC8vIFRpdHJlIENsYXNzZQogICAgICAgICAgICBkb2Muc2V0RmlsbENvbG9yKDQ0LCA2MiwgODApOwogICAgICAgICAgICBkb2MucmVjdCgwLCAwLCBwYWdlV2lkdGgsIDI1LCAnRicpOwogICAgICAgICAgICBkb2Muc2V0VGV4dENvbG9yKDI1NSwgMjU1LCAyNTUpOwogICAgICAgICAgICBkb2Muc2V0Rm9udFNpemUoMTYpOwogICAgICAgICAgICBkb2Muc2V0Rm9udCgiaGVsdmV0aWNhIiwgImJvbGQiKTsKICAgICAgICAgICAgZG9jLnRleHQoYMOJUVVJUEUgUMOJREFHT0dJUVVFIC0gJHtkaXNwbGF5TmFtZX1gLCBwYWdlV2lkdGgvMiwgMTYsIHsgYWxpZ246ICdjZW50ZXInIH0pOwoKICAgICAgICAgICAgbGV0IHBwTmFtZSA9ICJOb24gZMOpc2lnbsOpIjsKICAgICAgICAgICAgZm9yKGNvbnN0IFtrZXksIHZhbF0gb2YgT2JqZWN0LmVudHJpZXMoREFUQS5hc3NpZ25tZW50cykpIHsKICAgICAgICAgICAgICAgIGlmKGtleS5zdGFydHNXaXRoKGNJZCsnXycpICYmIHZhbC5pc1BQKSB7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgaWR4ID0gcGFyc2VJbnQoa2V5LnNwbGl0KCdfJylbMV0pOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlYWNoZXIgPSBTSEFSRURfVEVBQ0hFUlNbaWR4XTsKICAgICAgICAgICAgICAgICAgICBpZih0ZWFjaGVyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHN1YiA9IHRlYWNoZXIuc3ViamVjdDsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbWV0YSA9IERBVEEuc3ViamVjdE1ldGFbc3ViXSB8fCB7fTsKICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGlzQWN0aXZlID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtZXRhLm1vZGUgPT09ICdkaXYnKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgb3YgPSBEQVRBLmNsYXNzT3ZlcnJpZGVzW2NJZF0gJiYgREFUQS5jbGFzc092ZXJyaWRlc1tjSWRdW3N1Yl07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY2ZnID0gREFUQS5sZXZlbENvbmZpZ1tsdmwubGV2ZWxdICYmIERBVEEubGV2ZWxDb25maWdbbHZsLmxldmVsXVtzdWJdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCAoKG92fHxjZmcpLmJhc2V8fDApICsgKChvdnx8Y2ZnKS5tYXJnZXx8MCkgPiAwICkgaXNBY3RpdmUgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG1ldGEubW9kZSA9PT0gJ2xldmVsJykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCAobWV0YS52b2xMZXZlbCAmJiBtZXRhLnZvbExldmVsW2x2bC5sZXZlbF0gPiAwKSApIGlzQWN0aXZlID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBpZihpc0FjdGl2ZSkgcHBOYW1lID0gdGVhY2hlci5uYW1lOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKICAgICAgICAgICAgZG9jLnNldEZvbnRTaXplKDExKTsKICAgICAgICAgICAgZG9jLnRleHQoYFByb2Zlc3NldXIgUHJpbmNpcGFsIDogJHtwcE5hbWV9YCwgcGFnZVdpZHRoLzIsIDIzLCB7IGFsaWduOiAnY2VudGVyJyB9KTsKCiAgICAgICAgICAgIGNvbnN0IHRhYmxlQm9keSA9IFtdOwogICAgICAgICAgICAgY29uc3Qgcm9vdHMgPSBEQVRBLnN1YmplY3RzLmZpbHRlcihzID0+ICFEQVRBLnN1YmplY3RNZXRhW3NdPy5wYXJlbnQpLnNvcnQoKTsKICAgICAgICAgICAgIGNvbnN0IG9yZ2FuaXplZCA9IFtdOwogICAgICAgICAgICAgcm9vdHMuZm9yRWFjaChyID0+IHsgCiAgICAgICAgICAgICAgICBvcmdhbml6ZWQucHVzaChyKTsgCiAgICAgICAgICAgICAgICBEQVRBLnN1YmplY3RzLmZpbHRlcihzID0+IERBVEEuc3ViamVjdE1ldGFbc10/LnBhcmVudCA9PT0gcikuZm9yRWFjaChjID0+IG9yZ2FuaXplZC5wdXNoKGMpKTsgCiAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICBvcmdhbml6ZWQuZm9yRWFjaChzdWIgPT4gewogICAgICAgICAgICAgICAgIGNvbnN0IG1ldGEgPSBEQVRBLnN1YmplY3RNZXRhW3N1Yl0gfHwge307CiAgICAgICAgICAgICAgICAgbGV0IGhvdXJzID0gMDsKICAgICAgICAgICAgICAgICBpZiAobWV0YS5tb2RlID09PSAnZXRhYicpIHJldHVybjsKCiAgICAgICAgICAgICAgICAgaWYgKG1ldGEubW9kZSA9PT0gJ2RpdicpIHsKICAgICAgICAgICAgICAgICAgICAgY29uc3Qgb3YgPSBEQVRBLmNsYXNzT3ZlcnJpZGVzW2NJZF0gJiYgREFUQS5jbGFzc092ZXJyaWRlc1tjSWRdW3N1Yl07CiAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNmZyA9IERBVEEubGV2ZWxDb25maWdbbHZsLmxldmVsXSAmJiBEQVRBLmxldmVsQ29uZmlnW2x2bC5sZXZlbF1bc3ViXTsKICAgICAgICAgICAgICAgICAgICAgaWYob3YgfHwgY2ZnKSBob3VycyA9ICgob3Z8fGNmZykuYmFzZXx8MCkgKyAoKG92fHxjZmcpLm1hcmdlfHwwKTsKICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG1ldGEubW9kZSA9PT0gJ2xldmVsJykgewogICAgICAgICAgICAgICAgICAgICBob3VycyA9IChtZXRhLnZvbExldmVsICYmIG1ldGEudm9sTGV2ZWxbbHZsLmxldmVsXSkgfHwgMDsKICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgaWYgKGhvdXJzIDw9IDApIHJldHVybjsgCgogICAgICAgICAgICAgICAgIGNvbnN0IGFzc2lnbmVkUHJvZnMgPSBbXTsKICAgICAgICAgICAgICAgICBnZXRFbnRpdHlUZWFjaGVycygpLmZvckVhY2goKHQsIGlkeCkgPT4gewogICAgICAgICAgICAgICAgICAgICBpZih0LnN1YmplY3QgPT09IHN1YikgewogICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qga2V5ID0gYCR7Y0lkfV8ke2lkeH1gOwogICAgICAgICAgICAgICAgICAgICAgICAgaWYoREFUQS5hc3NpZ25tZW50c1trZXldICYmIERBVEEuYXNzaWdubWVudHNba2V5XS5tb2RlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG5hbWUgPSB0Lm5hbWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTU9ESUZJQ0FUSU9OIElDSSA6IFRlcm1lICJQYXJ0YWdlIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKERBVEEuYXNzaWdubWVudHNba2V5XS5tb2RlID09PSAnR1JPVVAnKSBuYW1lICs9ICIgKFBhcnRhZ2UpIjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihEQVRBLmFzc2lnbm1lbnRzW2tleV0uaXNQUCkgbmFtZSArPSAiIChQUCkiOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzc2lnbmVkUHJvZnMucHVzaChuYW1lKTsKICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICBpZihhc3NpZ25lZFByb2ZzLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICAgICAgICAgdGFibGVCb2R5LnB1c2goW3N1YiwgYXNzaWduZWRQcm9mcy5qb2luKCcsICcpXSk7CiAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBkb2MuYXV0b1RhYmxlKHsKICAgICAgICAgICAgICAgIGhlYWQ6IFtbJ01hdGnDqHJlJywgJ0Vuc2VpZ25hbnQocyknXV0sCiAgICAgICAgICAgICAgICBib2R5OiB0YWJsZUJvZHksCiAgICAgICAgICAgICAgICBzdGFydFk6IDM1LAogICAgICAgICAgICAgICAgdGhlbWU6ICdncmlkJywKICAgICAgICAgICAgICAgIGhlYWRTdHlsZXM6IHsgZmlsbENvbG9yOiBbNTIsIDE1MiwgMjE5XSB9LAogICAgICAgICAgICAgICAgY29sdW1uU3R5bGVzOiB7IDA6IHsgZm9udFN0eWxlOiAnYm9sZCcsIHdpZHRoOiA2MCB9IH0KICAgICAgICAgICAgfSk7CiAgICAgICAgfQogICAgfSk7CiAgICBkb2Muc2F2ZShgRXF1aXBlc19QZWRhZ29naXF1ZXNfJHtEQVRBLmNvbmZpZy55ZWFyfS5wZGZgKTsKfQoKLy8gVmFyaWFibGVzIGQnw6l0YXQgcG91ciBsJ2V4cG9ydApsZXQgZXhwQ29uZmlnID0gewogICAgb3JpZW50YXRpb246ICdsYW5kc2NhcGUnLCAvLyAncG9ydHJhaXQnIG91ICdsYW5kc2NhcGUnCiAgICBmb3JtYXQ6ICdhMycgICAgICAgICAgICAgIC8vICdhNCcgb3UgJ2EzJwp9OwoKZnVuY3Rpb24gb3BlbkV4cG9ydE1vZGFsKCkgewogICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2V4cG9ydC1vdmVybGF5Jykuc3R5bGUuZGlzcGxheSA9ICdmbGV4JzsKICAgIC8vIE9uIHJlbWV0IGxlcyB2YWxldXJzIHBhciBkw6lmYXV0IHZpc3VlbGxlbWVudAogICAgc2V0RXhwb3J0UGFyYW0oJ29yaWVudGF0aW9uJywgJ2xhbmRzY2FwZScpOwogICAgc2V0RXhwb3J0UGFyYW0oJ2Zvcm1hdCcsICdhMycpOwp9CgpmdW5jdGlvbiBzZXRFeHBvcnRQYXJhbSh0eXBlLCB2YWx1ZSkgewogICAgLy8gTWlzZSDDoCBqb3VyIGRlIGxhIGNvbmZpZwogICAgZXhwQ29uZmlnW3R5cGVdID0gdmFsdWU7CiAgICAKICAgIC8vIE1pc2Ugw6Agam91ciB2aXN1ZWxsZSAoQ2xhc3NlIC5zZWxlY3RlZCkKICAgIGlmICh0eXBlID09PSAnb3JpZW50YXRpb24nKSB7CiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RpbGUtb3JpZW50LXBvcnRyYWl0JykuY2xhc3NMaXN0LnRvZ2dsZSgnc2VsZWN0ZWQnLCB2YWx1ZSA9PT0gJ3BvcnRyYWl0Jyk7CiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RpbGUtb3JpZW50LWxhbmRzY2FwZScpLmNsYXNzTGlzdC50b2dnbGUoJ3NlbGVjdGVkJywgdmFsdWUgPT09ICdsYW5kc2NhcGUnKTsKICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gJ2Zvcm1hdCcpIHsKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGlsZS1mb3JtYXQtYTQnKS5jbGFzc0xpc3QudG9nZ2xlKCdzZWxlY3RlZCcsIHZhbHVlID09PSAnYTQnKTsKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGlsZS1mb3JtYXQtYTMnKS5jbGFzc0xpc3QudG9nZ2xlKCdzZWxlY3RlZCcsIHZhbHVlID09PSAnYTMnKTsKICAgIH0KfQoKZnVuY3Rpb24gY29uZmlybVRlYW1FeHBvcnQoKSB7CiAgICBjb25zdCBmb3JjZU9uZVBhZ2UgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2hrLWZvcmNlLW9uZS1wYWdlJykuY2hlY2tlZDsKICAgIGV4cG9ydFRlYW1zR3JpZFBERihleHBDb25maWcub3JpZW50YXRpb24sIGV4cENvbmZpZy5mb3JtYXQsIGZvcmNlT25lUGFnZSk7CiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZXhwb3J0LW92ZXJsYXknKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOwp9CgpmdW5jdGlvbiBleHBvcnRUZWFtc0dyaWRQREYob3JpZW50YXRpb24sIGZvcm1hdCwgZm9yY2VPbmVQYWdlKSB7CiAgICBjb25zdCB7IGpzUERGIH0gPSB3aW5kb3cuanNwZGY7CiAgICAKICAgIGNvbnN0IGRvYyA9IG5ldyBqc1BERih7IAogICAgICAgIG9yaWVudGF0aW9uOiBvcmllbnRhdGlvbiwgCiAgICAgICAgZm9ybWF0OiBmb3JtYXQgCiAgICB9KTsKICAgIAogICAgY29uc3QgZGF0ZVN0ciA9IG5ldyBEYXRlKCkudG9Mb2NhbGVEYXRlU3RyaW5nKCdmci1GUicpOwogICAgY29uc3QgcGFnZVdpZHRoID0gZG9jLmludGVybmFsLnBhZ2VTaXplLndpZHRoOwogICAgY29uc3QgbWFyZ2luID0gMTQ7CgogICAgLy8gLS0tIDEuIEVOLVTDilRFIC0tLQogICAgZG9jLnNldEZvbnRTaXplKDE0KTsKICAgIGRvYy5zZXRGb250KCJoZWx2ZXRpY2EiLCAiYm9sZCIpOwogICAgZG9jLnRleHQoIsOJUVVJUEVTIFDDiURBR09HSVFVRVMiLCBtYXJnaW4sIDE1KTsKICAgIAogICAgZG9jLnNldEZvbnRTaXplKDEwKTsKICAgIGRvYy5zZXRGb250KCJoZWx2ZXRpY2EiLCAibm9ybWFsIik7CiAgICBkb2MudGV4dChgVmVyc2lvbiBkdSAke2RhdGVTdHJ9YCwgbWFyZ2luLCAyMCk7CiAgICAKICAgIGRvYy5zZXRGb250U2l6ZSg5KTsKICAgIGRvYy5zZXRUZXh0Q29sb3IoMTAwKTsKICAgIAogICAgY29uc3QgbGVnZW5kWCA9IG9yaWVudGF0aW9uID09PSAnbGFuZHNjYXBlJyA/IHBhZ2VXaWR0aCAtIG1hcmdpbiA6IG1hcmdpbjsKICAgIGNvbnN0IGxlZ2VuZEFsaWduID0gb3JpZW50YXRpb24gPT09ICdsYW5kc2NhcGUnID8gJ3JpZ2h0JyA6ICdsZWZ0JzsKICAgIGNvbnN0IGxlZ2VuZFkgPSBvcmllbnRhdGlvbiA9PT0gJ2xhbmRzY2FwZScgPyAxNSA6IDI1OwogICAgCiAgICAvLyBNT0RJRklDQVRJT04gREUgTEEgTMOJR0VOREUgSUNJCiAgICBkb2MudGV4dCgiTMOpZ2VuZGUgOiBWZXJ0ID0gQ2xhc3NlIHwgQmxldSA9IFBhcnRhZ2UgZGUgY2xhc3NlIHwgKFBQKSA9IFByb2YuIFByaW5jaXBhbCIsIGxlZ2VuZFgsIGxlZ2VuZFksIHsgYWxpZ246IGxlZ2VuZEFsaWduIH0pOwogICAgZG9jLnNldFRleHRDb2xvcigwKTsKCiAgICBsZXQgYmFzZUZvbnRTaXplID0gODsKICAgIGxldCBjZWxsUGFkZGluZyA9IDE7CiAgICAKICAgIGlmIChmb3JjZU9uZVBhZ2UpIHsKICAgICAgICBiYXNlRm9udFNpemUgPSA3OwogICAgICAgIGNlbGxQYWRkaW5nID0gMC44OwogICAgICAgIGlmIChvcmllbnRhdGlvbiA9PT0gJ3BvcnRyYWl0JyAmJiBmb3JtYXQgPT09ICdhNCcpIHsKICAgICAgICAgICAgYmFzZUZvbnRTaXplID0gNTsKICAgICAgICAgICAgY2VsbFBhZGRpbmcgPSAwLjU7CiAgICAgICAgfSBlbHNlIGlmIChmb3JtYXQgPT09ICdhNCcgfHwgb3JpZW50YXRpb24gPT09ICdwb3J0cmFpdCcpIHsKICAgICAgICAgICAgYmFzZUZvbnRTaXplID0gNjsKICAgICAgICB9CiAgICB9IGVsc2UgewogICAgICAgIGlmIChmb3JtYXQgPT09ICdhMycgJiYgb3JpZW50YXRpb24gPT09ICdsYW5kc2NhcGUnKSB7CiAgICAgICAgICAgIGJhc2VGb250U2l6ZSA9IDEwOwogICAgICAgIH0KICAgIH0KCiAgICBjb25zdCBjb2x1bW5zID0gWwogICAgICAgIHsgaGVhZGVyOiAnRGlzY2lwbGluZSAvIEVuc2VpZ25hbnQnLCBkYXRhS2V5OiAnbGliZWxsZScgfQogICAgXTsKICAgIAogICAgY29uc3QgY2xhc3NLZXlzID0gW107CiAgICBEQVRBLnN0cnVjdHVyZS5mb3JFYWNoKGx2bCA9PiB7CiAgICAgICAgY29uc3QgcHJlZml4ID0gbHZsLmxldmVsLnJlcGxhY2UoL1teMC05XS9nLCAnJykgfHwgbHZsLmxldmVsLmNoYXJBdCgwKTsKICAgICAgICBmb3IobGV0IGk9MDsgaTxsdmwuZGl2OyBpKyspIHsKICAgICAgICAgICAgY29uc3QgY0lkID0gYCR7cHJlZml4fSR7U3RyaW5nLmZyb21DaGFyQ29kZSg2NStpKX1gOwogICAgICAgICAgICBjb25zdCBjTmFtZSA9IERBVEEuY2xhc3NOYW1lc1tjSWRdIHx8IGNJZDsKICAgICAgICAgICAgY29sdW1ucy5wdXNoKHsgaGVhZGVyOiBjTmFtZSwgZGF0YUtleTogY0lkIH0pOwogICAgICAgICAgICBjbGFzc0tleXMucHVzaChjSWQpOwogICAgICAgIH0KICAgIH0pOwoKICAgIGNvbnN0IGNvbE5hbWVXaWR0aCA9IChmb3JtYXQgPT09ICdhMycgJiYgb3JpZW50YXRpb24gPT09ICdsYW5kc2NhcGUnKSA/IDgwIDogNTA7CiAgICBjb25zdCBhdmFpbGFibGVXaWR0aCA9IHBhZ2VXaWR0aCAtIChtYXJnaW4gKiAyKSAtIGNvbE5hbWVXaWR0aDsKICAgIGNvbnN0IG5iQ2xhc3NlcyA9IGNsYXNzS2V5cy5sZW5ndGg7CiAgICBjb25zdCBjb2xDbGFzc1dpZHRoID0gbmJDbGFzc2VzID4gMCA/IChhdmFpbGFibGVXaWR0aCAvIG5iQ2xhc3NlcykgOiAyMDsKCiAgICBsZXQgY3VzdG9tQ29sU3R5bGVzID0geyAKICAgICAgICAwOiB7IGNlbGxXaWR0aDogY29sTmFtZVdpZHRoLCBoYWxpZ246ICdsZWZ0JyB9IAogICAgfTsKICAgIGZvcihsZXQgaT0xOyBpIDw9IG5iQ2xhc3NlczsgaSsrKSB7CiAgICAgICAgY3VzdG9tQ29sU3R5bGVzW2ldID0geyBjZWxsV2lkdGg6IGNvbENsYXNzV2lkdGgsIGhhbGlnbjogJ2NlbnRlcicgfTsKICAgIH0KCiAgICBjb25zdCByb3dzID0gW107CiAgICBjb25zdCByb290cyA9IERBVEEuc3ViamVjdHMuZmlsdGVyKHMgPT4gIURBVEEuc3ViamVjdE1ldGFbc10/LnBhcmVudCkuc29ydCgpOwogICAgY29uc3Qgb3JnYW5pemVkID0gW107CiAgICByb290cy5mb3JFYWNoKHIgPT4geyAKICAgICAgICBvcmdhbml6ZWQucHVzaCh7bmFtZTogciwgaXNDaGlsZDogZmFsc2V9KTsgCiAgICAgICAgREFUQS5zdWJqZWN0cy5maWx0ZXIocyA9PiBEQVRBLnN1YmplY3RNZXRhW3NdPy5wYXJlbnQgPT09IHIpLmZvckVhY2goYyA9PiBvcmdhbml6ZWQucHVzaCh7bmFtZTogYywgaXNDaGlsZDogdHJ1ZSwgcGFyZW50OiByfSkpOyAKICAgIH0pOwoKICAgIG9yZ2FuaXplZC5mb3JFYWNoKHN1YmpJdGVtID0+IHsKICAgICAgICBjb25zdCBzdWIgPSBzdWJqSXRlbS5uYW1lOwogICAgICAgIGxldCBpc1Zpc2libGUgPSBmYWxzZTsKICAgICAgICBjb25zdCBtZXRhID0gREFUQS5zdWJqZWN0TWV0YVtzdWJdIHx8IHt9OwogICAgICAgIGlmIChtZXRhLm1vZGUgIT09ICdldGFiJykgewogICAgICAgICAgICBEQVRBLnN0cnVjdHVyZS5mb3JFYWNoKGx2bCA9PiB7CiAgICAgICAgICAgICAgICAgY29uc3QgcHJlZml4ID0gbHZsLmxldmVsLnJlcGxhY2UoL1teMC05XS9nLCAnJykgfHwgbHZsLmxldmVsLmNoYXJBdCgwKTsKICAgICAgICAgICAgICAgICBmb3IobGV0IGk9MDsgaTxsdmwuZGl2OyBpKyspIHsKICAgICAgICAgICAgICAgICAgICBjb25zdCBjSWQgPSBgJHtwcmVmaXh9JHtTdHJpbmcuZnJvbUNoYXJDb2RlKDY1K2kpfWA7CiAgICAgICAgICAgICAgICAgICAgaWYgKERBVEEubGV2ZWxDb25maWdbbHZsLmxldmVsXSAmJiBEQVRBLmxldmVsQ29uZmlnW2x2bC5sZXZlbF1bc3ViXSAmJiBEQVRBLmxldmVsQ29uZmlnW2x2bC5sZXZlbF1bc3ViXS5iYXNlID4gMCkgaXNWaXNpYmxlID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICBpZiAoREFUQS5jbGFzc092ZXJyaWRlc1tjSWRdICYmIERBVEEuY2xhc3NPdmVycmlkZXNbY0lkXVtzdWJdICYmIERBVEEuY2xhc3NPdmVycmlkZXNbY0lkXVtzdWJdLmJhc2UgPiAwKSBpc1Zpc2libGUgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIGlmIChtZXRhLm1vZGUgPT09ICdsZXZlbCcgJiYgbWV0YS52b2xMZXZlbCAmJiBtZXRhLnZvbExldmVsW2x2bC5sZXZlbF0gPiAwKSBpc1Zpc2libGUgPSB0cnVlOwogICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICAgIGlmICghaXNWaXNpYmxlKSByZXR1cm47CgogICAgICAgIHJvd3MucHVzaCh7IGxpYmVsbGU6IHN1YiwgaXNTdWJqZWN0Um93OiB0cnVlIH0pOwoKICAgICAgICBjb25zdCBwcm9mcyA9IGdldEVudGl0eVRlYWNoZXJzKCkuZmlsdGVyKHAgPT4gcC5zdWJqZWN0ID09PSBzdWIpOwogICAgICAgIHByb2ZzLmZvckVhY2gocCA9PiB7CiAgICAgICAgICAgIGNvbnN0IHBSb3cgPSB7IGxpYmVsbGU6IHAubmFtZSwgaXNTdWJqZWN0Um93OiBmYWxzZSB9OwogICAgICAgICAgICBjbGFzc0tleXMuZm9yRWFjaChjSWQgPT4gewogICAgICAgICAgICAgICAgY29uc3Qga2V5ID0gYCR7Y0lkfV8ke3AuaWR4fWA7CiAgICAgICAgICAgICAgICBjb25zdCBhc3NpZ24gPSAoREFUQS5hc3NpZ25tZW50cyAmJiBEQVRBLmFzc2lnbm1lbnRzW2tleV0pID8gREFUQS5hc3NpZ25tZW50c1trZXldIDogbnVsbDsKICAgICAgICAgICAgICAgIGlmIChhc3NpZ24pIHsKICAgICAgICAgICAgICAgICAgICBsZXQgdHh0ID0gIiI7CiAgICAgICAgICAgICAgICAgICAgaWYgKGFzc2lnbi5tb2RlID09PSAnQ0xBU1MnKSB0eHQgPSAiWCI7CiAgICAgICAgICAgICAgICAgICAgLy8gTU9ESUZJQ0FUSU9OIElDSSA6IEFicsOpdmlhdGlvbiAiUHRnIiBwb3VyICJQYXJ0YWdlIgogICAgICAgICAgICAgICAgICAgIGlmIChhc3NpZ24ubW9kZSA9PT0gJ0dST1VQJykgdHh0ID0gIlB0ZyI7CiAgICAgICAgICAgICAgICAgICAgaWYgKGFzc2lnbi5pc1BQKSB0eHQgKz0gIiBQUCI7CiAgICAgICAgICAgICAgICAgICAgcFJvd1tjSWRdID0gdHh0OwogICAgICAgICAgICAgICAgICAgIHBSb3dbYF9zdHlsZV8ke2NJZH1gXSA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgZmlsbENvbG9yOiBhc3NpZ24ubW9kZSA9PT0gJ0NMQVNTJyA/IFszOSwgMTc0LCA5Nl0gOiBbNTIsIDE1MiwgMjE5XSwKICAgICAgICAgICAgICAgICAgICAgICAgdGV4dENvbG9yOiAyNTUsCiAgICAgICAgICAgICAgICAgICAgICAgIGZvbnRTdHlsZTogYXNzaWduLmlzUFAgPyAnYm9sZCcgOiAnbm9ybWFsJwogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICByb3dzLnB1c2gocFJvdyk7CiAgICAgICAgfSk7CiAgICB9KTsKCiAgICBkb2MuYXV0b1RhYmxlKHsKICAgICAgICBjb2x1bW5zOiBjb2x1bW5zLAogICAgICAgIGJvZHk6IHJvd3MsCiAgICAgICAgc3RhcnRZOiBvcmllbnRhdGlvbiA9PT0gJ2xhbmRzY2FwZScgPyAyNSA6IDMwLAogICAgICAgIHRoZW1lOiAnZ3JpZCcsCiAgICAgICAgc3R5bGVzOiB7IAogICAgICAgICAgICBmb250U2l6ZTogYmFzZUZvbnRTaXplLAogICAgICAgICAgICBjZWxsUGFkZGluZzogY2VsbFBhZGRpbmcsCiAgICAgICAgICAgIHZhbGlnbjogJ21pZGRsZScsIAogICAgICAgICAgICBsaW5lV2lkdGg6IDAuMSwKICAgICAgICAgICAgbGluZUNvbG9yOiBbMjAwLCAyMDAsIDIwMF0sCiAgICAgICAgICAgIG92ZXJmbG93OiAnbGluZWJyZWFrJwogICAgICAgIH0sCiAgICAgICAgaGVhZFN0eWxlczogewogICAgICAgICAgICBmaWxsQ29sb3I6IFs0NCwgNjIsIDgwXSwKICAgICAgICAgICAgdGV4dENvbG9yOiAyNTUsCiAgICAgICAgICAgIGZvbnRTdHlsZTogJ2JvbGQnLAogICAgICAgICAgICBoYWxpZ246ICdjZW50ZXInLAogICAgICAgICAgICBmb250U2l6ZTogYmFzZUZvbnRTaXplICsgMQogICAgICAgIH0sCiAgICAgICAgY29sdW1uU3R5bGVzOiBjdXN0b21Db2xTdHlsZXMsCiAgICAgICAgZGlkUGFyc2VDZWxsOiBmdW5jdGlvbihkYXRhKSB7CiAgICAgICAgICAgIGlmIChkYXRhLnJvdy5yYXcuaXNTdWJqZWN0Um93KSB7CiAgICAgICAgICAgICAgICBkYXRhLmNlbGwuc3R5bGVzLmZpbGxDb2xvciA9IFsyMzAsIDIzMCwgMjUwXTsKICAgICAgICAgICAgICAgIGRhdGEuY2VsbC5zdHlsZXMuZm9udFN0eWxlID0gJ2JvbGQnOwogICAgICAgICAgICAgICAgZGF0YS5jZWxsLnN0eWxlcy50ZXh0Q29sb3IgPSBbMCwgMCwgMF07CiAgICAgICAgICAgICAgICBpZihkYXRhLmNvbHVtbi5pbmRleCA+IDApIGRhdGEuY2VsbC50ZXh0ID0gIiI7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKCFkYXRhLnJvdy5yYXcuaXNTdWJqZWN0Um93ICYmIGRhdGEuY29sdW1uLmRhdGFLZXkgIT09ICdsaWJlbGxlJykgewogICAgICAgICAgICAgICAgY29uc3Qgc3R5bGVNZXRhID0gZGF0YS5yb3cucmF3W2Bfc3R5bGVfJHtkYXRhLmNvbHVtbi5kYXRhS2V5fWBdOwogICAgICAgICAgICAgICAgaWYgKHN0eWxlTWV0YSkgewogICAgICAgICAgICAgICAgICAgIGRhdGEuY2VsbC5zdHlsZXMuZmlsbENvbG9yID0gc3R5bGVNZXRhLmZpbGxDb2xvcjsKICAgICAgICAgICAgICAgICAgICBkYXRhLmNlbGwuc3R5bGVzLnRleHRDb2xvciA9IHN0eWxlTWV0YS50ZXh0Q29sb3I7CiAgICAgICAgICAgICAgICAgICAgZGF0YS5jZWxsLnN0eWxlcy5mb250U3R5bGUgPSBzdHlsZU1ldGEuZm9udFN0eWxlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfSk7CgogICAgZG9jLnNhdmUoYEVxdWlwZXNfUGVkYWdvZ2lxdWVzXyR7Zm9ybWF0LnRvVXBwZXJDYXNlKCl9XyR7b3JpZW50YXRpb259LnBkZmApOwp9CgovLyAtLS0gRk9OQ1RJT04gREUgTUlTRSDDgCBKT1VSIERFUyBDT01QVEVVUlMgKFdJREdFVCAmIEdMT0JBTFMpIC0tLQpmdW5jdGlvbiB1cGRhdGVHcmlkQ291bnRlcigpIHsKICAgIGlmICghREFUQSkgcmV0dXJuOwoKICAgIC8vIC0tLSAxLiBDQUxDVUwgR0xPQkFMIMOJVEFCTElTU0VNRU5UIC0tLQogICAgbGV0IHRvdGFsQ29uc29FdGFiID0gMDsKICAgIAogICAgLy8gQS4gQWpvdXQgZGVzIEVEUyAoTGUgZm9yZmFpdCBnbG9iYWwpCiAgICBpZiAoREFUQS50eXBlICE9PSAnY29sbGVnZScgJiYgREFUQS5lZHMpIHsKICAgICAgICBbJ3ByZW1pZXJlJywgJ3Rlcm1pbmFsZSddLmZvckVhY2gobHZsID0+IHsKICAgICAgICAgICAgaWYgKERBVEEuZWRzW2x2bF0pIHsKICAgICAgICAgICAgICAgIERBVEEuZWRzW2x2bF0uZm9yRWFjaChlID0+IHsKICAgICAgICAgICAgICAgICAgICBjb25zdCB2b2wgPSBwYXJzZUZsb2F0KGUuaFBlckdyb3VwKSB8fCAobHZsID09PSAncHJlbWllcmUnID8gNCA6IDYpOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvZWYgPSBwYXJzZUZsb2F0KGUuY29lZikgfHwgMS4wOwogICAgICAgICAgICAgICAgICAgIHRvdGFsQ29uc29FdGFiICs9IChwYXJzZUZsb2F0KGUuZ3JvdXBzKSB8fCAwKSAqIHZvbCAqIGNvZWY7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgIH0pOwogICAgfQoKICAgIC8vIEIuIEFqb3V0IGR1IFRyb25jIENvbW11biAoT24gaWdub3JlIGxlcyBtYXRpw6hyZXMgRURTIGljaSkKICAgIERBVEEuc3RydWN0dXJlLmZvckVhY2gobHZsID0+IHsKICAgICAgICBjb25zdCBwcmVmaXggPSBnZXRMZXZlbFByZWZpeChsdmwubGV2ZWwpOwogICAgICAgIGZvcihsZXQgaT0wOyBpPGx2bC5kaXY7IGkrKykgewogICAgICAgICAgICBjb25zdCBjSWQgPSBgJHtwcmVmaXh9JHtTdHJpbmcuZnJvbUNoYXJDb2RlKDY1K2kpfWA7CiAgICAgICAgICAgIERBVEEuc3ViamVjdHMuZm9yRWFjaChzID0+IHsKICAgICAgICAgICAgICAgIGNvbnN0IG1ldGEgPSBEQVRBLnN1YmplY3RNZXRhW3NdOwogICAgICAgICAgICAgICAgLy8gQ09SUkVDVElGIDogT24gc2F1dGUgc2kgYydlc3QgdW4gRURTCiAgICAgICAgICAgICAgICBpZiAobWV0YSAmJiBtZXRhLmlzRWRzKSByZXR1cm47IAoKICAgICAgICAgICAgICAgIGlmIChtZXRhICYmIG1ldGEubW9kZSA9PT0gJ2RpdicpIHsKICAgICAgICAgICAgICAgICAgICBjb25zdCBjZmcgPSAoREFUQS5jbGFzc092ZXJyaWRlcyAmJiBEQVRBLmNsYXNzT3ZlcnJpZGVzW2NJZF0gJiYgREFUQS5jbGFzc092ZXJyaWRlc1tjSWRdW3NdKSAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IERBVEEuY2xhc3NPdmVycmlkZXNbY0lkXVtzXSAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IERBVEEubGV2ZWxDb25maWdbbHZsLmxldmVsXVtzXTsKICAgICAgICAgICAgICAgICAgICBpZiAoY2ZnKSB0b3RhbENvbnNvRXRhYiArPSAoZ2V0RWZmZWN0aXZlQmFzZShjZmcpICsgKGNmZy5tYXJnZXx8MCkpICogKGNmZy5jb2VmfHwxKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICAgIERBVEEuc3ViamVjdHMuZm9yRWFjaChzID0+IHsKICAgICAgICAgICAgIGNvbnN0IG1ldGEgPSBEQVRBLnN1YmplY3RNZXRhW3NdOwogICAgICAgICAgICAgLy8gQ09SUkVDVElGIDogT24gc2F1dGUgc2kgYydlc3QgdW4gRURTCiAgICAgICAgICAgICBpZiAobWV0YSAmJiBtZXRhLmlzRWRzKSByZXR1cm47CgogICAgICAgICAgICAgaWYgKG1ldGEgJiYgbWV0YS5tb2RlID09PSAnbGV2ZWwnICYmIG1ldGEudm9sTGV2ZWwgJiYgbWV0YS52b2xMZXZlbFtsdmwubGV2ZWxdKSB7CiAgICAgICAgICAgICAgICAgdG90YWxDb25zb0V0YWIgKz0gcGFyc2VGbG9hdChtZXRhLnZvbExldmVsW2x2bC5sZXZlbF0gfHwgMCk7CiAgICAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICB9KTsKCiAgICAvLyBDLiBBam91dCBkw6ljaGFyZ2VzIGV0IGZvcmZhaXRzIEV0YWIKICAgIERBVEEuc3ViamVjdHMuZm9yRWFjaChzID0+IHsgCiAgICAgICAgaWYoREFUQS5zdWJqZWN0TWV0YVtzXSAmJiBEQVRBLnN1YmplY3RNZXRhW3NdLm1vZGUgPT09ICdldGFiJykgCiAgICAgICAgICAgIHRvdGFsQ29uc29FdGFiICs9IHBhcnNlRmxvYXQoREFUQS5zdWJqZWN0TWV0YVtzXS5ldGFiIHx8IDApOyAKICAgIH0pOwogICAgZ2V0RW50aXR5VGVhY2hlcnMoKS5mb3JFYWNoKHQgPT4geyB0b3RhbENvbnNvRXRhYiArPSBwYXJzZUZsb2F0KHQuZGVjaGFyZ2UgfHwgMCk7IH0pOwoKICAgIC8vIE1pc2Ugw6Agam91ciBkZXMgV2lkZ2V0cwogICAgY29uc3QgZG90YXRpb25FdGFiID0gREFUQS5jb25maWcudG90YWwgfHwgMDsKICAgIGNvbnN0IHNvbGRlRXRhYiA9IGRvdGF0aW9uRXRhYiAtIHRvdGFsQ29uc29FdGFiOwogICAgY29uc3QgZXRhYlZhbEVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2twaS1ldGFiLXZhbCcpOwogICAgaWYgKGV0YWJWYWxFbCkgewogICAgICAgIGV0YWJWYWxFbC5pbm5lclRleHQgPSBgJHt0b3RhbENvbnNvRXRhYi50b0ZpeGVkKDEpfSAvICR7ZG90YXRpb25FdGFiLnRvRml4ZWQoMSl9IGhgOwogICAgICAgIHVwZGF0ZUtwaVRhZygna3BpLWV0YWItZGlmZicsIHNvbGRlRXRhYik7CiAgICB9CiAgICAKICAgIC8vIChMZSByZXN0ZSBkZSBsYSBmb25jdGlvbiBwb3VyIGxlIFdpZGdldCBOaXZlYXUgcmVzdGUgaWRlbnRpcXVlLi4uKQogICAgY29uc3QgYWN0aXZlVGFiID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2dyaWQtdGFicyAudGFiLmFjdGl2ZScpOwogICAgY29uc3QgbGV2ZWxSb3cgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgna3BpLWxldmVsLXJvdycpOwogICAgaWYgKCFhY3RpdmVUYWIgfHwgYWN0aXZlVGFiLmNsYXNzTGlzdC5jb250YWlucygnZ2xvYmFsLXRhYicpKSB7CiAgICAgICAgaWYgKGxldmVsUm93KSBsZXZlbFJvdy5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOwogICAgfSBlbHNlIHsKICAgICAgICBpZiAobGV2ZWxSb3cpIGxldmVsUm93LnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7CiAgICAgICAgY29uc3QgbGV2ZWxOYW1lID0gYWN0aXZlVGFiLmlubmVyVGV4dDsKICAgICAgICBjb25zdCBsdmxPYmogPSBEQVRBLnN0cnVjdHVyZS5maW5kKGwgPT4gbC5sZXZlbCA9PT0gbGV2ZWxOYW1lKTsKICAgICAgICBpZiAobHZsT2JqKSB7CiAgICAgICAgICAgIGNvbnN0IGRvdGF0aW9uTml2ZWF1ID0gKGx2bE9iai5kaXYgKiBsdmxPYmoudGFyZ2V0KTsgCiAgICAgICAgICAgIGNvbnN0IGdyaWxsZVRvdGFsRWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndG90YWwtZmluYWwtZ3JpbGxlJyk7CiAgICAgICAgICAgIGNvbnN0IGNvbnNvTml2ZWF1ID0gZ3JpbGxlVG90YWxFbCA/IHBhcnNlRmxvYXQoZ3JpbGxlVG90YWxFbC5pbm5lclRleHQpIDogMDsKICAgICAgICAgICAgY29uc3Qgc29sZGVOaXZlYXUgPSBkb3RhdGlvbk5pdmVhdSAtIGNvbnNvTml2ZWF1OwogICAgICAgICAgICBjb25zdCBsdmxWYWxFbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdrcGktbHZsLXZhbCcpOwogICAgICAgICAgICBpZiAobHZsVmFsRWwpIHsKICAgICAgICAgICAgICAgIGx2bFZhbEVsLmlubmVyVGV4dCA9IGAke2NvbnNvTml2ZWF1LnRvRml4ZWQoMSl9IC8gJHtkb3RhdGlvbk5pdmVhdS50b0ZpeGVkKDEpfSBoYDsKICAgICAgICAgICAgICAgIHVwZGF0ZUtwaVRhZygna3BpLWx2bC1kaWZmJywgc29sZGVOaXZlYXUpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQp9CgovLyBQZXRpdCBoZWxwZXIgcG91ciBsYSBjb3VsZXVyIGR1IGJhZGdlIChDb3JyZWN0aWYgaW5jbHVzKQpmdW5jdGlvbiB1cGRhdGVLcGlUYWcoaWQsIHZhbCkgewogICAgY29uc3QgZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCk7CiAgICBpZighZWwpIHJldHVybjsKICAgIGNvbnN0IHNpZ24gPSB2YWwgPiAwID8gIisiIDogIiI7CiAgICBlbC5pbm5lclRleHQgPSBgJHtzaWdufSR7dmFsLnRvRml4ZWQoMSl9YDsKICAgIGVsLmNsYXNzTmFtZSA9ICdrcGktdGFnJzsgCiAgICBpZihNYXRoLmFicyh2YWwpIDwgMC4xKSBlbC5jbGFzc0xpc3QuYWRkKCdiZy1udWwnKTsKICAgIGVsc2UgaWYodmFsID4gMCkgZWwuY2xhc3NMaXN0LmFkZCgnYmctcG9zJyk7CiAgICBlbHNlIGVsLmNsYXNzTGlzdC5hZGQoJ2JnLW5lZycpOwp9CgoKZnVuY3Rpb24gY2hhbmdlVGFiKGVsLCBpZHgpIHsKICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJyNncmlkLXRhYnMgLnRhYicpLmZvckVhY2godCA9PiB0LmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpKTsKICAgIGVsLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpOwogICAgd2luZG93Lmxhc3RBY3RpdmVHcmlkVGFiID0gaWR4OwogICAgaWYoaWR4ID09PSAtMSkgcmVuZGVyR2xvYmFsR3JpZCgpOwogICAgZWxzZSByZW5kZXJMZXZlbEdyaWQoaWR4KTsKICAgIAogICAgLy8gQUpPVVQgSUNJIDogTWV0dHJlIMOgIGpvdXIgbGUgY29tcHRldXIgKEV0YWIgKyBOaXZlYXUgYWN0aWYpCiAgICB1cGRhdGVHcmlkQ291bnRlcigpOwp9CgovKiAtLS0gR0VTVElPTiBBVkFOQ8OJRSBERVMgRMOJQ0hBUkdFUyAtLS0gKi8KbGV0IGN1cnJlbnREZWNoSWR4ID0gLTE7CgpmdW5jdGlvbiBvcGVuRGVjaGFyZ2VNZW51KGlkeCkgewogICAgY3VycmVudERlY2hJZHggPSBpZHg7CiAgICBjb25zdCB0ID0gU0hBUkVEX1RFQUNIRVJTW2lkeF0gfHwgREFUQS50ZWFjaGVyc1tpZHhdOwogICAgCiAgICAvLyBPbiByZW1wbGl0IGxlcyBjaGFtcHMgZHUgcG9wLXVwIGF2ZWMgbGVzIHZhbGV1cnMgYWN0dWVsbGVzIGR1IHByb2YKICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkZWNoLXRlYWNoZXItbmFtZScpLmlubmVyVGV4dCA9IHQubmFtZTsKICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbnB1dC1kZWNoLWludCcpLnZhbHVlID0gdC5kZWNoYXJnZSB8fCAwOwogICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2lucHV0LWRlY2gtZXh0JykudmFsdWUgPSB0LmRlY2hfZXh0IHx8IDA7CiAgICAKICAgIC8vIEFmZmljaGFnZSBkdSBwb3AtdXAKICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkZWNoLW92ZXJsYXknKS5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnOwogICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2lucHV0LWRlY2gtaW50JykuZm9jdXMoKTsKfQoKZnVuY3Rpb24gc2F2ZURlY2hhcmdlRGV0YWlscygpIHsKICAgIGlmIChjdXJyZW50RGVjaElkeCA9PT0gLTEpIHJldHVybjsKICAgIAogICAgY29uc3QgdmFsSW50ID0gcGFyc2VGbG9hdChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW5wdXQtZGVjaC1pbnQnKS52YWx1ZSkgfHwgMDsKICAgIGNvbnN0IHZhbEV4dCA9IHBhcnNlRmxvYXQoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2lucHV0LWRlY2gtZXh0JykudmFsdWUpIHx8IDA7CiAgICAKICAgIGNvbnN0IHQgPSBTSEFSRURfVEVBQ0hFUlNbY3VycmVudERlY2hJZHhdIHx8IERBVEEudGVhY2hlcnNbY3VycmVudERlY2hJZHhdOwogICAgCiAgICAvLyBWw6lyaWZpY2F0aW9uIGRlIGNvaMOpcmVuY2UgYXZhbnQgbW9kaWZpY2F0aW9uCiAgICBpZiAoKHZhbEludCArIHZhbEV4dCkgPiB0Lm9ycykgewogICAgICAgIGFsZXJ0KCJBdHRlbnRpb24gOiBMZSB0b3RhbCBkZXMgZMOpY2hhcmdlcyBkw6lwYXNzZSBsJ09SUyBkdSBwcm9mZXNzZXVyICEiKTsKICAgICAgICByZXR1cm47CiAgICB9CiAgICAKICAgIC8vIE9uIGFwcGxpcXVlIGxlcyBtb2RpZmljYXRpb25zIHNldWxlbWVudCBtYWludGVuYW50CiAgICB0LmRlY2hhcmdlID0gdmFsSW50OwogICAgdC5kZWNoX2V4dCA9IHZhbEV4dDsKICAgIAogICAgLy8gU2F1dmVnYXJkZSBldCBtaXNlIMOgIGpvdXIgZGUgbCdpbnRlcmZhY2UKICAgIHNhdmVEYXRhKCk7CiAgICAKICAgIC8vIEZlcm1ldHVyZSBkdSBwb3AtdXAgQVZBTlQgbGVzIHJhZnJhw65jaGlzc2VtZW50cyBsb3VyZHMgcG91ciDDqXZpdGVyIGxlcyBibG9jYWdlcyB2aXN1ZWxzCiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGVjaC1vdmVybGF5Jykuc3R5bGUuZGlzcGxheSA9ICdub25lJzsKICAgIAogICAgLy8gTWlzZSDDoCBqb3VyIGRlcyB0YWJsZWF1eAogICAgcmVuZGVyUkgoKTsKICAgIGlmIChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGlsb3RhZ2UnKS5jbGFzc0xpc3QuY29udGFpbnMoJ2FjdGl2ZScpKSByZW5kZXJSSERpc2MoKTsKICAgIGNhbGN1bGF0ZVJlY2FwKCk7CiAgICAKICAgIGN1cnJlbnREZWNoSWR4ID0gLTE7Cn0KCmZ1bmN0aW9uIHNldEJNUChpZHgpIHsKICAgIGNvbnN0IHQgPSBTSEFSRURfVEVBQ0hFUlNbaWR4XSB8fCBEQVRBLnRlYWNoZXJzW2lkeF07CiAgICBjb25zdCBjdXJyZW50ID0gdC5ibXAgfHwgMDsKICAgIAogICAgY29uc3QgdmFsID0gcHJvbXB0KGBHw6lyZXIgQk1QIC8gQ1NSIHBvdXIgJHt0Lm5hbWV9LlxuXG5TYWlzaXNzZXogbGUgdm9sdW1lIGhvcmFpcmUgZGUgY2UgYmxvYy5cbihDZWxhIHJlbXBsYWNlcmEgYXV0b21hdGlxdWVtZW50IGxhIHZhbGV1ciBkZSBsJ09SUykuYCwgY3VycmVudCk7CiAgICAKICAgIGlmICh2YWwgIT09IG51bGwpIHsKICAgICAgICBjb25zdCBob3VycyA9IHBhcnNlRmxvYXQodmFsKTsKICAgICAgICBpZiAoaXNOYU4oaG91cnMpIHx8IGhvdXJzIDwgMCkgcmV0dXJuIGFsZXJ0KCJWYWxldXIgaW52YWxpZGUiKTsKICAgICAgICAKICAgICAgICB0LmJtcCA9IGhvdXJzOwogICAgICAgIAogICAgICAgIC8vIExvZ2lxdWUgbcOpdGllciA6IFNpIGMnZXN0IHVuIEJNUCwgbCdPUlMgZGV2aWVudCDDqWdhbCBhdSB2b2x1bWUgZHUgQk1QCiAgICAgICAgaWYgKGhvdXJzID4gMCkgewogICAgICAgICAgICB0Lm9ycyA9IGhvdXJzOwogICAgICAgICAgICB0LnN0YXR1cyA9ICJCTVAvQ1NSIjsgLy8gT24gbWV0IMOgIGpvdXIgbGUgc3RhdHV0IGF1dG9tYXRpcXVlbWVudAogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIC8vIFNpIG9uIHJlbWV0IMOgIDAsIG9uIHJlcGFzc2UgZW4gQ2VydGlmacOpIHBhciBkw6lmYXV0ICjDoCBhanVzdGVyIG1hbnVlbGxlbWVudCBzaSBiZXNvaW4pCiAgICAgICAgICAgIGlmKHQuc3RhdHVzID09PSAiQk1QL0NTUiIpIHQuc3RhdHVzID0gIkNlcnRpZmnDqSI7CiAgICAgICAgfQoKICAgICAgICBzYXZlRGF0YSgpOwogICAgICAgIAogICAgICAgIC8vIFJhZnJhw65jaGlzc2VtZW50IGludGVsbGlnZW50IHNlbG9uIGxhIHBhZ2UgYWN0aXZlCiAgICAgICAgaWYgKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwaWxvdGFnZScpLmNsYXNzTGlzdC5jb250YWlucygnYWN0aXZlJykpIHsKICAgICAgICAgICAgcmVuZGVyUkhEaXNjKCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmVuZGVyUkgoKTsKICAgICAgICB9CiAgICAgICAgY2FsY3VsYXRlUmVjYXAoKTsKICAgIH0KfQoKLyogLS0tIEVYUE9SVCBQUFRYIFBPVVIgQ0EgKFZFUlNJT04gTkVUVE9Zw4lFIC0gU0FOUyBFRFMgREFOUyBMRVMgR1JJTExFUykgLS0tICovCmZ1bmN0aW9uIGdlbmVyYXRlQ0FQcmVzKCkgewogICAgLy8gMS4gSW5pdGlhbGlzYXRpb24KICAgIGxldCBwcHR4ID0gbmV3IFBwdHhHZW5KUygpOwogICAgcHB0eC5sYXlvdXQgPSAnTEFZT1VUXzE2eDknOyAKICAgIAogICAgY29uc3QgY29sb3JzID0gewogICAgICAgIHByaW1hcnk6ICIyQzNFNTAiLCBzZWNvbmRhcnk6ICIzNDk4REIiLCBhY2NlbnQ6ICJFNjdFMjIiLAogICAgICAgIHRhYmxlSGVhZGVyOiAiMzQ0OTVFIiwgdGFibGVSb3dBbHQ6ICJGNEY2RjYiLCBzdWNjZXNzOiAiMjdBRTYwIiwKICAgICAgICBkYW5nZXI6ICJDMDM5MkIiLCBwb2xlSGVhZGVyOiAiNDU1QTY0IiwgdGV4dDogIjJDM0U1MCIsCiAgICAgICAgd2hpdGU6ICJGRkZGRkYiLCBibGFjazogIjAwMDAwMCIsIGJvcmRlcjogIkJEQzNDNyIKICAgIH07CgogICAgY29uc3QgaGVhZGVyU3R5bGVzID0geyBmaWxsOiBjb2xvcnMudGFibGVIZWFkZXIsIGNvbG9yOiBjb2xvcnMud2hpdGUsIGJvbGQ6IHRydWUsIGhhbGlnbjogJ2NlbnRlcicsIHZhbGlnbjonbWlkZGxlJyB9OwogICAgY29uc3Qgc3RkQm9yZGVyID0geyBwdDogMC41LCBjb2xvcjogY29sb3JzLmJvcmRlciB9OwogICAgY29uc3QgY2h1bmtBcnJheSA9IChhcnIsIHNpemUpID0+IEFycmF5LmZyb20oeyBsZW5ndGg6IE1hdGguY2VpbChhcnIubGVuZ3RoIC8gc2l6ZSkgfSwgKHYsIGkpID0+IGFyci5zbGljZShpICogc2l6ZSwgaSAqIHNpemUgKyBzaXplKSk7CiAgICBjb25zdCBhZGRGb290ZXIgPSAoc2xpZGUsIHRleHQpID0+IHsKICAgICAgICBzbGlkZS5hZGRUZXh0KHRleHQsIHsgeDogMC41LCB5OiA1LjMsIGZvbnRTaXplOiA4LCBjb2xvcjogIjk1QTVBNiIgfSk7CiAgICAgICAgc2xpZGUuYWRkVGV4dChgREhHICR7REFUQS5jb25maWcueWVhcn1gLCB7IHg6IDksIHk6IDUuMywgdzowLjUsIGZvbnRTaXplOiA4LCBjb2xvcjogIjk1QTVBNiIsIGFsaWduOidyaWdodCcgfSk7CiAgICB9OwoKICAgIC8vIC0tLSAxLiBTTElERSBJTlRSTyAtLS0KICAgIGxldCBzMSA9IHBwdHguYWRkU2xpZGUoKTsKICAgIHMxLmJhY2tncm91bmQgPSB7IGNvbG9yOiAiRUNGMEYxIiB9OwogICAgczEuYWRkU2hhcGUocHB0eC5TaGFwZVR5cGUucmVjdCwgeyB4OiAwLCB5OiAwLCB3OiAwLjYsIGg6ICcxMDAlJywgZmlsbDogY29sb3JzLnByaW1hcnkgfSk7CiAgICBzMS5hZGRUZXh0KCJDT05TRUlMIEQnQURNSU5JU1RSQVRJT04iLCB7IHg6IDEuMiwgeTogMi4wLCB3OiAnODAlJywgZm9udFNpemU6IDIwLCBib2xkOiB0cnVlLCBjb2xvcjogY29sb3JzLnNlY29uZGFyeSwgc3BjOjIgfSk7CiAgICBzMS5hZGRUZXh0KCJQUsOJUEFSQVRJT04gUkVOVFLDiUUiLCB7IHg6IDEuMiwgeTogMi42LCB3OiAnODAlJywgZm9udFNpemU6IDM2LCBib2xkOiB0cnVlLCBjb2xvcjogY29sb3JzLnByaW1hcnkgfSk7CiAgICBzMS5hZGRUZXh0KGBBbm7DqWUgU2NvbGFpcmUgJHtEQVRBLmNvbmZpZy55ZWFyfSAtICR7REFUQS5jb25maWcueWVhciArIDF9YCwgeyB4OiAxLjIsIHk6IDMuOCwgdzogJzgwJScsIGZvbnRTaXplOiAxOCwgY29sb3I6ICI3RjhDOEQiLCBpdGFsaWM6dHJ1ZSB9KTsKCiAgICAvLyAtLS0gMi4gU1RSVUNUVVJFICYgTU9ZRU5TIC0tLQogICAgbGV0IHMyID0gcHB0eC5hZGRTbGlkZSgpOwogICAgczIuYWRkVGV4dCgiMS4gU3RydWN0dXJlICYgTW95ZW5zIiwgeyB4OiAwLjUsIHk6IDAuMywgZm9udFNpemU6IDE4LCBib2xkOiB0cnVlLCBjb2xvcjogY29sb3JzLnByaW1hcnkgfSk7CiAgICBzMi5hZGRTaGFwZShwcHR4LlNoYXBlVHlwZS5saW5lLCB7IHg6MC41LCB5OjAuNywgdzo5LCBoOjAsIGxpbmU6e2NvbG9yOmNvbG9ycy5hY2NlbnQsIHdpZHRoOjJ9IH0pOwoKICAgIC8vIDEuIE9uIGFqb3V0ZSBsYSBjb2xvbm5lIEgvRGl2IGRhbnMgbGVzIGVuLXTDqnRlcyAoSidhaSBhanVzdMOpIGxlcyBsYXJnZXVycyAndycgcG91ciBxdWUgw6dhIHJlbnRyZSkKICAgIGxldCBzdHJ1Y3RIZWFkZXJzID0gWwogICAgICAgIHsgdGV4dDogIk5pdmVhdSIsIG9wdGlvbnM6IHsgLi4uaGVhZGVyU3R5bGVzLCBmaWxsOiBjb2xvcnMuc2Vjb25kYXJ5LCB3OiAxLjEgfSB9LAogICAgICAgIHsgdGV4dDogIkVmZi4iLCBvcHRpb25zOiB7IC4uLmhlYWRlclN0eWxlcywgZmlsbDogY29sb3JzLnNlY29uZGFyeSwgdzogMC43IH0gfSwKICAgICAgICB7IHRleHQ6ICJEaXYuIiwgb3B0aW9uczogeyAuLi5oZWFkZXJTdHlsZXMsIGZpbGw6IGNvbG9ycy5zZWNvbmRhcnksIHc6IDAuNiB9IH0sCiAgICAgICAgeyB0ZXh0OiAiRS9EIiwgb3B0aW9uczogeyAuLi5oZWFkZXJTdHlsZXMsIGZpbGw6IGNvbG9ycy5zZWNvbmRhcnksIHc6IDAuNyB9IH0sCiAgICAgICAgeyB0ZXh0OiAiSC9EaXYiLCBvcHRpb25zOiB7IC4uLmhlYWRlclN0eWxlcywgZmlsbDogY29sb3JzLnNlY29uZGFyeSwgdzogMC44IH0gfSwgLy8gPC0tLSBOT1VWRUxMRSBDT0xPTk5FCiAgICAgICAgeyB0ZXh0OiAiRG90YXRpb24iLCBvcHRpb25zOiB7IC4uLmhlYWRlclN0eWxlcywgZmlsbDogY29sb3JzLnByaW1hcnksIHc6IDEuMSB9IH0KICAgIF07CgogICAgbGV0IHN0cnVjdFJvd3MgPSBbXTsKICAgIGxldCB0b3RFbGV2ZXMgPSAwLCB0b3REaXYgPSAwLCB0b3REb3QgPSAwOwoKICAgIERBVEEuc3RydWN0dXJlLmZvckVhY2gobHZsID0+IHsKICAgICAgICBjb25zdCBkaXYgPSBwYXJzZUZsb2F0KGx2bC5kaXYpIHx8IDA7CiAgICAgICAgY29uc3QgdGFyZ2V0ID0gcGFyc2VGbG9hdChsdmwudGFyZ2V0KSB8fCAwOyAvLyBMZSBIL0UgKEhldXJlcyBwYXIgZGl2aXNpb24pCiAgICAgICAgY29uc3Qgc3R1ZGVudHMgPSBwYXJzZUludChsdmwuc3R1ZGVudHMpIHx8IDA7CiAgICAgICAgCiAgICAgICAgLy8gQ2FsY3VsIHNpbXBsZSA6IERpdiB4IEgvRGl2CiAgICAgICAgbGV0IG5lZWQgPSBkaXYgKiB0YXJnZXQ7CgogICAgICAgIHN0cnVjdFJvd3MucHVzaChbCiAgICAgICAgICAgIHsgdGV4dDogbHZsLmxldmVsLCBvcHRpb25zOiB7IGJvbGQ6IHRydWUsIGFsaWduOiAnbGVmdCcsIGJvcmRlcjogc3RkQm9yZGVyIH0gfSwKICAgICAgICAgICAgeyB0ZXh0OiBzdHVkZW50cy50b1N0cmluZygpLCBvcHRpb25zOiB7IGJvcmRlcjogc3RkQm9yZGVyIH0gfSwKICAgICAgICAgICAgeyB0ZXh0OiBkaXYudG9TdHJpbmcoKSwgb3B0aW9uczogeyBib3JkZXI6IHN0ZEJvcmRlciB9IH0sCiAgICAgICAgICAgIHsgdGV4dDogZGl2ID4gMCA/IChzdHVkZW50cy9kaXYpLnRvRml4ZWQoMSkgOiAiLSIsIG9wdGlvbnM6IHsgYm9yZGVyOiBzdGRCb3JkZXIgfSB9LAogICAgICAgICAgICB7IHRleHQ6IHRhcmdldC50b0ZpeGVkKDEpLCBvcHRpb25zOiB7IGJvcmRlcjogc3RkQm9yZGVyLCBmaWxsOiAiRjRGNkY2IiB9IH0sIC8vIDwtLS0gQUZGSUNIQUdFIEgvRElWCiAgICAgICAgICAgIHsgdGV4dDogbmVlZC50b0ZpeGVkKDEpLCBvcHRpb25zOiB7IGJvbGQ6IHRydWUsIGNvbG9yOiBjb2xvcnMucHJpbWFyeSwgYm9yZGVyOiBzdGRCb3JkZXIgfSB9CiAgICAgICAgXSk7CgogICAgICAgIHRvdEVsZXZlcyArPSBzdHVkZW50czsgCiAgICAgICAgdG90RGl2ICs9IGRpdjsgCiAgICAgICAgdG90RG90ICs9IG5lZWQ7CiAgICB9KTsKCiAgICAvLyBHZXN0aW9uIGRlcyBtb3llbnMgc3VwcGzDqW1lbnRhaXJlcwogICAgY29uc3Qgc3VwcCA9IERBVEEuYWRkaXRpb25hbE1lYW5zID8gcGFyc2VGbG9hdChEQVRBLmFkZGl0aW9uYWxNZWFucy50b3RhbCB8fCAwKSA6IDA7CiAgICBpZihzdXBwID4gMCkgewogICAgICAgIC8vIE9uIG1ldCB1biBjb2xzcGFuIGRlIDUgcG91ciBjb3V2cmlyIGp1c3F1J8OgIGxhIGNvbG9ubmUgRG90YXRpb24KICAgICAgICBzdHJ1Y3RSb3dzLnB1c2goWwogICAgICAgICAgICB7IHRleHQ6ICJNb3llbnMgU3VwcGzDqW1lbnRhaXJlcyIsIG9wdGlvbnM6IHsgY29sc3BhbjogNSwgYWxpZ246ICdyaWdodCcsIGl0YWxpYzogdHJ1ZSwgY29sb3I6ICI4RDZFNjMiLCBmaWxsOiBjb2xvcnMud2hpdGUsIGJvcmRlcjogc3RkQm9yZGVyIH0gfSwgCiAgICAgICAgICAgIHsgdGV4dDogIisgIiArIHN1cHAudG9GaXhlZCgxKSwgb3B0aW9uczogeyBib2xkOiB0cnVlLCBjb2xvcjogY29sb3JzLmFjY2VudCwgZmlsbDogY29sb3JzLndoaXRlLCBib3JkZXI6IHN0ZEJvcmRlciwgYWxpZ246ICdjZW50ZXInIH0gfQogICAgICAgIF0pOwogICAgICAgIHRvdERvdCArPSBzdXBwOwogICAgfQogICAgCiAgICAvLyBMaWduZSBUT1RBTAogICAgc3RydWN0Um93cy5wdXNoKFsKICAgICAgICB7IHRleHQ6ICJUT1RBTCIsIG9wdGlvbnM6IHsgZmlsbDogIkQ1RDhEQyIsIGJvbGQ6IHRydWUsIGJvcmRlcjogc3RkQm9yZGVyIH0gfSwgCiAgICAgICAgeyB0ZXh0OiB0b3RFbGV2ZXMudG9TdHJpbmcoKSwgb3B0aW9uczogeyBmaWxsOiAiRDVEOERDIiwgYm9sZDogdHJ1ZSwgYm9yZGVyOiBzdGRCb3JkZXIgfSB9LCAKICAgICAgICB7IHRleHQ6IHRvdERpdi50b1N0cmluZygpLCBvcHRpb25zOiB7IGZpbGw6ICJENUQ4REMiLCBib2xkOiB0cnVlLCBib3JkZXI6IHN0ZEJvcmRlciB9IH0sIAogICAgICAgIHsgdGV4dDogdG90RGl2PjA/KHRvdEVsZXZlcy90b3REaXYpLnRvRml4ZWQoMSk6Ii0iLCBvcHRpb25zOiB7IGZpbGw6ICJENUQ4REMiLCBib2xkOiB0cnVlLCBib3JkZXI6IHN0ZEJvcmRlciB9IH0sIAogICAgICAgIHsgdGV4dDogIi0iLCBvcHRpb25zOiB7IGZpbGw6ICJENUQ4REMiLCBib2xkOiB0cnVlLCBib3JkZXI6IHN0ZEJvcmRlciB9IH0sIC8vIFBhcyBkZSB0b3RhbCBwb3VyIEgvRGl2CiAgICAgICAgeyB0ZXh0OiB0b3REb3QudG9GaXhlZCgxKSwgb3B0aW9uczogeyBmaWxsOiAiRDVEOERDIiwgYm9sZDogdHJ1ZSwgY29sb3I6IGNvbG9ycy5wcmltYXJ5LCBib3JkZXI6IHN0ZEJvcmRlciB9IH0KICAgIF0pOwogICAgCiAgICAvLyBHw6luw6lyYXRpb24gZHUgdGFibGVhdSAoSidhaSBsw6lnw6hyZW1lbnQgw6lsYXJnaSBsZSB0YWJsZWF1IMOgIHc6IDUuMCBwb3VyIGwnZXN0aMOpdGlxdWUpCiAgICBzMi5hZGRUYWJsZShbc3RydWN0SGVhZGVycywgLi4uc3RydWN0Um93c10sIHsgeDogMC41LCB5OiAxLjIsIHc6IDUuMCwgZm9udFNpemU6IDEwLCByb3dIOiAwLjQsIGFsaWduOidjZW50ZXInLCB2YWxpZ246J21pZGRsZScsIGZpbGw6IHsgY29sb3I6IGNvbG9ycy50YWJsZVJvd0FsdCB9IH0pOwoKICAgIC8vIC0tLSBQYXJ0aWUgRHJvaXRlIChSZXN0ZSBpbmNoYW5nw6kpIC0tLQogICAgY29uc3QgZGhnVG90YWxlID0gcGFyc2VGbG9hdChEQVRBLmNvbmZpZy50b3RhbCB8fCAwKTsKICAgIGNvbnN0IGhwID0gcGFyc2VGbG9hdChEQVRBLmNvbmZpZy5ocCB8fCAwKTsKICAgIGNvbnN0IGhzYSA9IHBhcnNlRmxvYXQoREFUQS5jb25maWcuaHNhIHx8IDApOwogICAgY29uc3QgcGVyY2VudEhTQSA9IGRoZ1RvdGFsZSA+IDAgPyAoKGhzYSAvIGRoZ1RvdGFsZSkgKiAxMDApLnRvRml4ZWQoMSkgOiAwOwogICAgCiAgICBzMi5hZGRTaGFwZShwcHR4LlNoYXBlVHlwZS5yZWN0LCB7IHg6IDUuOCwgeTogMS4yLCB3OiAzLjcsIGg6IDMuNSwgZmlsbDogIkY4RjlGOSIsIGxpbmU6IHtjb2xvcjogY29sb3JzLmJvcmRlciwgd2lkdGg6IDF9IH0pOwogICAgczIuYWRkVGV4dCgiRE9UQVRJT04gR0xPQkFMRSIsIHsgeDogNS44LCB5OiAxLjQsIHc6IDMuNywgZm9udFNpemU6IDEyLCBib2xkOiB0cnVlLCBjb2xvcjogY29sb3JzLnByaW1hcnksIGFsaWduOiAnY2VudGVyJyB9KTsKICAgIHMyLmFkZFRleHQoYCR7ZGhnVG90YWxlLnRvRml4ZWQoMSl9IGhgLCB7IHg6IDUuOCwgeTogMS44LCB3OiAzLjcsIGZvbnRTaXplOiAzMiwgYm9sZDogdHJ1ZSwgY29sb3I6IGNvbG9ycy5wcmltYXJ5LCBhbGlnbjogJ2NlbnRlcicgfSk7CiAgICBzMi5hZGRTaGFwZShwcHR4LlNoYXBlVHlwZS5yZWN0LCB7IHg6IDYsIHk6IDIuOCwgdzogMy4zLCBoOiAwLjYsIGZpbGw6IGNvbG9ycy5zZWNvbmRhcnkgfSk7CiAgICBzMi5hZGRUZXh0KGBIZXVyZXMgUG9zdGVzIDogJHtocC50b0ZpeGVkKDEpfWAsIHsgeDogNiwgeTogMi44LCB3OiAzLjMsIGg6IDAuNiwgZm9udFNpemU6IDExLCBjb2xvcjogY29sb3JzLndoaXRlLCBib2xkOiB0cnVlLCBhbGlnbjogJ2NlbnRlcicgfSk7CiAgICBzMi5hZGRTaGFwZShwcHR4LlNoYXBlVHlwZS5yZWN0LCB7IHg6IDYsIHk6IDMuNiwgdzogMy4zLCBoOiAwLjYsIGZpbGw6IGNvbG9ycy5hY2NlbnQgfSk7CiAgICBzMi5hZGRUZXh0KGBILlMuQS4gOiAke2hzYS50b0ZpeGVkKDEpfWAsIHsgeDogNiwgeTogMy42LCB3OiAzLjMsIGg6IDAuNiwgZm9udFNpemU6IDExLCBjb2xvcjogY29sb3JzLndoaXRlLCBib2xkOiB0cnVlLCBhbGlnbjogJ2NlbnRlcicgfSk7CiAgICBzMi5hZGRUZXh0KGAoVGF1eCBIU0EgOiAke3BlcmNlbnRIU0F9ICUpYCwgeyB4OiA1LjgsIHk6IDQuNCwgdzogMy43LCBmb250U2l6ZTogOSwgY29sb3I6ICI3RjhDOEQiLCBhbGlnbjogJ2NlbnRlcicsIGl0YWxpYzp0cnVlIH0pOwogICAgCiAgICBhZGRGb290ZXIoczIsICJTdHJ1Y3R1cmUgcHLDqXZpc2lvbm5lbGxlIik7CgogICAgLy8gLS0tIDIuIETDiVRBSUwgRURTIChMeWPDqWUgdW5pcXVlbWVudCAtIFJlc3RlIGluY2hhbmfDqSkgLS0tCiAgICBjb25zdCBsZXZlbHNFRFMgPSBbeyBrZXk6ICdwcmVtaWVyZScsIGxhYmVsOiAnUFJFTUnDiFJFJyB9LCB7IGtleTogJ3Rlcm1pbmFsZScsIGxhYmVsOiAnVEVSTUlOQUxFJyB9XTsKICAgIGxldmVsc0VEUy5mb3JFYWNoKGx2bCA9PiB7CiAgICAgICAgaWYgKERBVEEuZWRzICYmIERBVEEuZWRzW2x2bC5rZXldICYmIERBVEEuZWRzW2x2bC5rZXldLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgY29uc3QgY2h1bmtzID0gY2h1bmtBcnJheShEQVRBLmVkc1tsdmwua2V5XSwgOCk7CiAgICAgICAgICAgIGNodW5rcy5mb3JFYWNoKChjaHVuaywgaWR4KSA9PiB7CiAgICAgICAgICAgICAgICBsZXQgc0VkcyA9IHBwdHguYWRkU2xpZGUoKTsKICAgICAgICAgICAgICAgIHNFZHMuYWRkVGV4dChgMi4gRMOpdGFpbCBTcMOpY2lhbGl0w6lzIChFRFMpIDogJHtsdmwubGFiZWx9JHtjaHVua3MubGVuZ3RoID4gMSA/IGAgKCR7aWR4ICsgMX0vJHtjaHVua3MubGVuZ3RofSlgIDogIiJ9YCwgeyB4OiAwLjUsIHk6IDAuMywgZm9udFNpemU6IDE4LCBib2xkOiB0cnVlLCBjb2xvcjogY29sb3JzLnNlY29uZGFyeSB9KTsKICAgICAgICAgICAgICAgIHNFZHMuYWRkU2hhcGUocHB0eC5TaGFwZVR5cGUubGluZSwgeyB4OjAuNSwgeTowLjcsIHc6OSwgaDowLCBsaW5lOntjb2xvcjpjb2xvcnMuc2Vjb25kYXJ5LCB3aWR0aDoyfSB9KTsKICAgICAgICAgICAgICAgIGxldCBlZHNSb3dzID0gY2h1bmsubWFwKGUgPT4gewogICAgICAgICAgICAgICAgICAgIGNvbnN0IHZvbCA9IHBhcnNlRmxvYXQoZS5oUGVyR3JvdXApIHx8IChsdmwua2V5ID09PSAncHJlbWllcmUnID8gNCA6IDYpOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvZWYgPSBwYXJzZUZsb2F0KGUuY29lZikgfHwgMS4wOwogICAgICAgICAgICAgICAgICAgIHJldHVybiBbeyB0ZXh0OiBlLm5hbWUsIG9wdGlvbnM6IHsgYWxpZ246ICdsZWZ0JywgYm9sZDogdHJ1ZSwgYm9yZGVyOiBzdGRCb3JkZXIgfSB9LCB7IHRleHQ6IGUuc3R1ZGVudHMudG9TdHJpbmcoKSwgb3B0aW9uczogeyBib3JkZXI6IHN0ZEJvcmRlciB9IH0sIHsgdGV4dDogZS5ncm91cHMudG9TdHJpbmcoKSwgb3B0aW9uczogeyBib3JkZXI6IHN0ZEJvcmRlciB9IH0sIHsgdGV4dDogdm9sLnRvRml4ZWQoMSkgKyAiIGgiLCBvcHRpb25zOiB7IGJvcmRlcjogc3RkQm9yZGVyIH0gfSwgeyB0ZXh0OiBjb2VmICE9PSAxLjAgPyBgw5cke2NvZWYudG9GaXhlZCgyKX1gIDogJycsIG9wdGlvbnM6IHsgYm9yZGVyOiBzdGRCb3JkZXIsIGNvbG9yOiAnOGU0NGFkJyB9IH0sIHsgdGV4dDogKGUuZ3JvdXBzICogdm9sICogY29lZikudG9GaXhlZCgxKSArICIgaCIsIG9wdGlvbnM6IHsgYm9sZDogdHJ1ZSwgZmlsbDogIkVCRjVGQiIsIGJvcmRlcjogc3RkQm9yZGVyIH0gfV07CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIHNFZHMuYWRkVGFibGUoW1t7IHRleHQ6ICJTcMOpY2lhbGl0w6kiLCBvcHRpb25zOiB7IC4uLmhlYWRlclN0eWxlcywgdzogMy4wIH0gfSwgeyB0ZXh0OiAiw4lsw6h2ZXMiLCBvcHRpb25zOiB7IC4uLmhlYWRlclN0eWxlcywgdzogMC45IH0gfSwgeyB0ZXh0OiAiR3IuIiwgb3B0aW9uczogeyAuLi5oZWFkZXJTdHlsZXMsIHc6IDAuOCB9IH0sIHsgdGV4dDogIkgvR3IuIiwgb3B0aW9uczogeyAuLi5oZWFkZXJTdHlsZXMsIHc6IDAuOCB9IH0sIHsgdGV4dDogIlBvbmQuIiwgb3B0aW9uczogeyAuLi5oZWFkZXJTdHlsZXMsIHc6IDAuOCwgZmlsbDogJzhlNDRhZCcgfSB9LCB7IHRleHQ6ICJUb3RhbCB1dGlsaXPDqSIsIG9wdGlvbnM6IHsgLi4uaGVhZGVyU3R5bGVzLCB3OiAxLjUsIGZpbGw6IGNvbG9ycy5wcmltYXJ5IH0gfV0sIC4uLmVkc1Jvd3NdLCB7IHg6IDAuNSwgeTogMS4wLCB3OiA5LCBmb250U2l6ZTogMTEsIHZhbGlnbjogJ21pZGRsZScsIGFsaWduOiAnY2VudGVyJyB9KTsKICAgICAgICAgICAgICAgIGFkZEZvb3RlcihzRWRzLCBgRMOpdGFpbCBFRFMgJHtsdmwubGFiZWx9YCk7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0KICAgIH0pOwoKICAgIC8vIC0tLSAzLiBHUklMTEVTIEhPUkFJUkVTIFBBUiBOSVZFQVUgKEVEUyBFWENMVVMpIC0tLQogICAgY29uc3QgTElNSVRfR1JJRCA9IDExOwogICAgREFUQS5zdHJ1Y3R1cmUuZm9yRWFjaChsdmwgPT4gewogICAgICAgIGxldCBhbGxHcmlkUm93cyA9IFtdOwogICAgICAgIERBVEEuc3ViamVjdHMuZm9yRWFjaChzID0+IHsKICAgICAgICAgICAgY29uc3QgbWV0YSA9IERBVEEuc3ViamVjdE1ldGFbc107CiAgICAgICAgICAgIGlmIChtZXRhLmlzRWRzKSByZXR1cm47IC8vIENPUlJFQ1RJRiA6IE9uIHNhdXRlIGxlcyBzcMOpY2lhbGl0w6lzIGluZGl2aWR1ZWxsZXMKICAgICAgICAgICAgCiAgICAgICAgICAgIGxldCBiYXNlID0gMCwgbWFyZ2UgPSAwLCBjb2VmID0gMSwgZGlzcGxheSA9IGZhbHNlLCBsYWJlbEhvcmFpcmUgPSAiIjsKICAgICAgICAgICAgaWYobWV0YS5tb2RlID09PSAnZGl2JyAmJiBtZXRhLmxldmVscyAmJiBtZXRhLmxldmVscy5pbmNsdWRlcyhsdmwubGV2ZWwpKSB7CiAgICAgICAgICAgICAgICBjb25zdCBjZmcgPSBEQVRBLmxldmVsQ29uZmlnW2x2bC5sZXZlbF1bc107CiAgICAgICAgICAgICAgICBpZihjZmcgJiYgKGNmZy5iYXNlID4gMCB8fCAoY2ZnLmRlbWl8fDApID4gMCB8fCBjZmcubWFyZ2UgPiAwKSkgewogICAgICAgICAgICAgICAgICAgIHZhciBlZmZCYXNlID0gZ2V0RWZmZWN0aXZlQmFzZShjZmcpOwogICAgICAgICAgICAgICAgICAgIGJhc2UgPSBlZmZCYXNlOyBtYXJnZSA9IGNmZy5tYXJnZSB8fCAwOyBjb2VmID0gY2ZnLmNvZWYgfHwgMTsKICAgICAgICAgICAgICAgICAgICBsYWJlbEhvcmFpcmUgPSAoY2ZnLmRlbWl8fDApID4gMCA/IGNmZ1RvRXhwckxhYmVsKGNmZykgKyAnIGgnIDogZWZmQmFzZS50b0ZpeGVkKDEpICsgIiBoIjsgZGlzcGxheSA9IHRydWU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gZWxzZSBpZihtZXRhLm1vZGUgPT09ICdsZXZlbCcpIHsKICAgICAgICAgICAgICAgIGNvbnN0IHZvbCA9IG1ldGEudm9sTGV2ZWwgPyBwYXJzZUZsb2F0KG1ldGEudm9sTGV2ZWxbbHZsLmxldmVsXSB8fCAwKSA6IDA7CiAgICAgICAgICAgICAgICBpZih2b2wgPiAwKSB7IGxhYmVsSG9yYWlyZSA9ICIoRm9yZmFpdCkiOyBiYXNlID0gdm9sOyBkaXNwbGF5ID0gdHJ1ZTsgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmKGRpc3BsYXkpIHsKICAgICAgICAgICAgICAgIGFsbEdyaWRSb3dzLnB1c2goW3sgdGV4dDogcywgb3B0aW9uczogeyBhbGlnbjogJ2xlZnQnLCBib2xkOiB0cnVlIH0gfSwgbGFiZWxIb3JhaXJlLCBtYXJnZSA+IDAgPyBtYXJnZS50b0ZpeGVkKDEpICsgIiBoIiA6ICItIiwgeyB0ZXh0OiAoKGJhc2UgKyBtYXJnZSkgKiBjb2VmKS50b0ZpeGVkKDEpICsgIiBoIiwgb3B0aW9uczogeyBib2xkOiB0cnVlLCBmaWxsOiAiRUFGMkY4IiwgY29sb3I6IGNvbG9ycy5wcmltYXJ5IH0gfV0pOwogICAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgaWYoYWxsR3JpZFJvd3MubGVuZ3RoID4gMCkgewogICAgICAgICAgICBjb25zdCBjaHVua3MgPSBjaHVua0FycmF5KGFsbEdyaWRSb3dzLCBMSU1JVF9HUklEKTsKICAgICAgICAgICAgY2h1bmtzLmZvckVhY2goKGNodW5rLCBpZHgpID0+IHsKICAgICAgICAgICAgICAgIGxldCBzTHZsID0gcHB0eC5hZGRTbGlkZSgpOwogICAgICAgICAgICAgICAgc0x2bC5hZGRUZXh0KGAzLiBHcmlsbGUgSG9yYWlyZSA6IE5pdmVhdSAke2x2bC5sZXZlbH0ke2NodW5rcy5sZW5ndGggPiAxID8gYCAoJHtpZHgrMX0vJHtjaHVua3MubGVuZ3RofSlgIDogIiJ9YCwgeyB4OiAwLjUsIHk6IDAuMywgZm9udFNpemU6IDE4LCBib2xkOiB0cnVlLCBjb2xvcjogY29sb3JzLnByaW1hcnkgfSk7CiAgICAgICAgICAgICAgICBzTHZsLmFkZFNoYXBlKHBwdHguU2hhcGVUeXBlLmxpbmUsIHsgeDowLjUsIHk6MC41LCB3OjksIGg6MCwgbGluZTp7Y29sb3I6Y29sb3JzLnNlY29uZGFyeSwgd2lkdGg6Mn0gfSk7CiAgICAgICAgICAgICAgICBzTHZsLmFkZFRhYmxlKFtbeyB0ZXh0OiAiRGlzY2lwbGluZSIsIG9wdGlvbnM6IHsgLi4uaGVhZGVyU3R5bGVzLCBmaWxsOiBjb2xvcnMucHJpbWFyeSwgdzogMy41IH0gfSwgeyB0ZXh0OiAiSG9yYWlyZSDDiWzDqHZlIiwgb3B0aW9uczogeyAuLi5oZWFkZXJTdHlsZXMsIGZpbGw6IGNvbG9ycy5zZWNvbmRhcnksIHc6IDIuMCB9IH0sIHsgdGV4dDogIkF1dG9ub21pZSIsIG9wdGlvbnM6IHsgLi4uaGVhZGVyU3R5bGVzLCBmaWxsOiBjb2xvcnMuYWNjZW50LCB3OiAyLjAgfSB9LCB7IHRleHQ6ICJUb3RhbCBQcm9mIiwgb3B0aW9uczogeyAuLi5oZWFkZXJTdHlsZXMsIGZpbGw6IGNvbG9ycy50YWJsZUhlYWRlciwgdzogMi4wIH0gfV0sIC4uLmNodW5rXSwgeyB4OiAwLjI1LCB5OiAwLjY1LCB3OiA5LjUsIGZvbnRTaXplOiAxMCwgcm93SDogMC4zNSwgYm9yZGVyOiBzdGRCb3JkZXIsIGFsaWduOiAnY2VudGVyJywgdmFsaWduOiAnbWlkZGxlJyB9KTsKICAgICAgICAgICAgICAgIGFkZEZvb3RlcihzTHZsLCBgR3JpbGxlICR7bHZsLmxldmVsfWApOwogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICB9KTsKCiAgICAvLyAtLS0gNC4gU1lOVEjDiFNFIEdMT0JBTEUgLS0tCiAgICBjb25zdCBMSU1JVF9HTE9CQUwgPSAxNDsgCiAgICBsZXQgY29sVyA9ICg5LjUgLSAyLjUpIC8gKERBVEEuc3RydWN0dXJlLmxlbmd0aCArIDEpOwogICAgbGV0IGdsb2JIZWFkZXJzID0gW3sgdGV4dDogIkRpc2NpcGxpbmUiLCBvcHRpb25zOiB7IC4uLmhlYWRlclN0eWxlcywgZmlsbDogY29sb3JzLnByaW1hcnksIHc6IDIuNSB9IH1dOwogICAgREFUQS5zdHJ1Y3R1cmUuZm9yRWFjaChsID0+IGdsb2JIZWFkZXJzLnB1c2goeyB0ZXh0OiBsLmxldmVsLCBvcHRpb25zOiB7IC4uLmhlYWRlclN0eWxlcywgZmlsbDogY29sb3JzLnNlY29uZGFyeSwgdzogY29sVyB9IH0pKTsKICAgIGdsb2JIZWFkZXJzLnB1c2goeyB0ZXh0OiAiVE9UIiwgb3B0aW9uczogeyAuLi5oZWFkZXJTdHlsZXMsIGZpbGw6IGNvbG9ycy50YWJsZUhlYWRlciwgdzogY29sVyB9IH0pOwoKICAgIGxldCBhbGxHbG9iUm93cyA9IFtdOwogICAgREFUQS5zdWJqZWN0cy5mb3JFYWNoKHMgPT4gewogICAgICAgIGxldCByb3dEYXRhID0gW10sIGdyYW5kVG90YWwgPSAwLCB2aXNpYmxlID0gZmFsc2U7CiAgICAgICAgcm93RGF0YS5wdXNoKHsgdGV4dDogcywgb3B0aW9uczogeyBhbGlnbjogJ2xlZnQnLCBib2xkOiB0cnVlLCBmaWxsOiAiRjJGM0Y0IiwgZm9udFNpemU6IDggfSB9KTsKICAgICAgICBEQVRBLnN0cnVjdHVyZS5mb3JFYWNoKGx2bCA9PiB7CiAgICAgICAgICAgIGxldCBoID0gMDsgY29uc3QgbWV0YSA9IERBVEEuc3ViamVjdE1ldGFbc107CiAgICAgICAgICAgIGlmKG1ldGEubW9kZSA9PT0gJ2RpdicpIHsgY29uc3QgY2ZnID0gREFUQS5sZXZlbENvbmZpZ1tsdmwubGV2ZWxdW3NdOyBpZihjZmcpIGggPSAoZ2V0RWZmZWN0aXZlQmFzZShjZmcpICsgKGNmZy5tYXJnZXx8MCkpICogKGNmZy5jb2VmfHwxKSAqIGx2bC5kaXY7IH0KICAgICAgICAgICAgZWxzZSBpZihtZXRhLm1vZGUgPT09ICdsZXZlbCcpIHsgaCA9IG1ldGEudm9sTGV2ZWwgPyBwYXJzZUZsb2F0KG1ldGEudm9sTGV2ZWxbbHZsLmxldmVsXSB8fCAwKSA6IDA7IH0KICAgICAgICAgICAgaWYoaCA+IDApIHZpc2libGUgPSB0cnVlOyBncmFuZFRvdGFsICs9IGg7IHJvd0RhdGEucHVzaCh7IHRleHQ6IGggPiAwID8gaC50b0ZpeGVkKDEpIDogIi0iLCBvcHRpb25zOiB7IGZvbnRTaXplOiA4LCBjb2xvcjogaD4wP2NvbG9ycy5ibGFjazoiQ0NDQ0NDIiB9IH0pOwogICAgICAgIH0pOwogICAgICAgIGlmKERBVEEuc3ViamVjdE1ldGFbc10ubW9kZSA9PT0gJ2V0YWInKSB7IGdyYW5kVG90YWwgKz0gcGFyc2VGbG9hdChEQVRBLnN1YmplY3RNZXRhW3NdLmV0YWIgfHwgMCk7IHZpc2libGUgPSB0cnVlOyB9CiAgICAgICAgcm93RGF0YS5wdXNoKHsgdGV4dDogZ3JhbmRUb3RhbC50b0ZpeGVkKDEpLCBvcHRpb25zOiB7IGJvbGQ6IHRydWUsIGZpbGw6ICJFQUZBRjEiLCBjb2xvcjogY29sb3JzLnN1Y2Nlc3MsIGZvbnRTaXplOiA4IH0gfSk7CiAgICAgICAgaWYodmlzaWJsZSkgYWxsR2xvYlJvd3MucHVzaChyb3dEYXRhKTsKICAgIH0pOwogICAgY2h1bmtBcnJheShhbGxHbG9iUm93cywgTElNSVRfR0xPQkFMKS5mb3JFYWNoKChjaHVuaywgaWR4KSA9PiB7CiAgICAgICAgbGV0IHNHbG9iYWwgPSBwcHR4LmFkZFNsaWRlKCk7CiAgICAgICAgc0dsb2JhbC5hZGRUZXh0KGA0LiBTeW50aMOoc2UgR2xvYmFsZSR7YWxsR2xvYlJvd3MubGVuZ3RoID4gTElNSVRfR0xPQkFMID8gYCAoJHtpZHgrMX0pYCA6ICIifWAsIHsgeDogMC41LCB5OiAwLjMsIGZvbnRTaXplOiAxOCwgYm9sZDogdHJ1ZSwgY29sb3I6IGNvbG9ycy5wcmltYXJ5IH0pOwogICAgICAgIHNHbG9iYWwuYWRkU2hhcGUocHB0eC5TaGFwZVR5cGUubGluZSwgeyB4OjAuNSwgeTowLjYsIHc6OSwgaDowLCBsaW5lOntjb2xvcjpjb2xvcnMudGFibGVIZWFkZXIsIHdpZHRoOjJ9IH0pOwogICAgICAgIHNHbG9iYWwuYWRkVGFibGUoW2dsb2JIZWFkZXJzLCAuLi5jaHVua10sIHsgeDogMC4yNSwgeTogMC43NSwgdzogOS41LCByb3dIOiAwLjMsIGJvcmRlcjogeyBwdDogMC4yNSwgY29sb3I6ICJDQ0NDQ0MiIH0sIGFsaWduOiAnY2VudGVyJywgdmFsaWduOiAnbWlkZGxlJyB9KTsKICAgICAgICBhZGRGb290ZXIoc0dsb2JhbCwgIlZ1ZSBkJ2Vuc2VtYmxlIik7CiAgICB9KTsKCiAgICAvLyAtLS0gNS4gQklMQU4gUEFSIFDDlExFUyAtLS0KICAgIGNvbnN0IExJTUlUX0JJTEFOID0gMTE7IAogICAgbGV0IHJlY2FwUm93cyA9IFtdOyBjb25zdCBuZWVkcyA9IGNhbGN1bGF0ZU5lZWRzKCk7IGxldCByZXMgPSB7fTsgbGV0IGF1dG9Db21tZW50cyA9IHt9OwogICAgREFUQS5zdWJqZWN0cy5mb3JFYWNoKHMgPT4geyByZXNbc10gPSB7IGNvc3Q6MCB9OyBhdXRvQ29tbWVudHNbc10gPSBbXTsgfSk7CiAgICBnZXRFbnRpdHlUZWFjaGVycygpLmZvckVhY2gocCA9PiB7CiAgICAgICAgaWYgKCFwLnN1YmplY3QpIHJldHVybjsgaWYgKCFyZXNbcC5zdWJqZWN0XSkgcmVzW3Auc3ViamVjdF0gPSB7IGNvc3Q6MCB9OwogICAgICAgIHJlc1twLnN1YmplY3RdLmNvc3QgKz0gKHAub3JzIC0gKHAuY3NkfHwwKSAtIChwLmRlY2hfZXh0fHwwKSkgKyBwLmhzYTsKICAgICAgICBpZiAocC5ibXAgPiAwKSBhdXRvQ29tbWVudHNbcC5zdWJqZWN0XS5wdXNoKGBCTVAgJHtwLmJtcH1oYCk7CiAgICAgICAgaWYgKHAuY3NkID4gMCkgYXV0b0NvbW1lbnRzW3Auc3ViamVjdF0ucHVzaChgQ1NEICR7cC5uYW1lfWApOwogICAgfSk7CiAgICBjb25zdCByb290cyA9IERBVEEuc3ViamVjdHMuZmlsdGVyKHMgPT4gIURBVEEuc3ViamVjdE1ldGFbc10/LnBhcmVudCkuc29ydCgpOwogICAgcm9vdHMuZm9yRWFjaChyID0+IHsKICAgICAgICBjb25zdCBraWRzID0gREFUQS5zdWJqZWN0cy5maWx0ZXIocyA9PiBEQVRBLnN1YmplY3RNZXRhW3NdPy5wYXJlbnQgPT09IHIpOwogICAgICAgIGNvbnN0IG1ha2VSb3cgPSAobGFiZWwsIHN1YmpOYW1lLCBpc0hlYWRlciwgaXNDaGlsZCkgPT4gewogICAgICAgICAgICBjb25zdCBiZXMgPSBuZWVkc1tzdWJqTmFtZV0gfHwgMCwgYXBwID0gcmVzW3N1YmpOYW1lXSA/IHJlc1tzdWJqTmFtZV0uY29zdCA6IDAsIGVjYXJ0ID0gYXBwIC0gYmVzLCBtYW5Db21tID0gKERBVEEucmVjYXBDb21tZW50cyAmJiBEQVRBLnJlY2FwQ29tbWVudHNbc3Viak5hbWVdKSA/IERBVEEucmVjYXBDb21tZW50c1tzdWJqTmFtZV0gOiAiIiwgYXV0Q29tbSA9IGF1dG9Db21tZW50c1tzdWJqTmFtZV0gPyBhdXRvQ29tbWVudHNbc3Viak5hbWVdLmpvaW4oIiwgIikgOiAiIjsKICAgICAgICAgICAgbGV0IGZ1bGxDb21tID0gKGF1dENvbW0gJiYgbWFuQ29tbSkgPyBgJHthdXRDb21tfSAvICR7bWFuQ29tbX1gIDogKGF1dENvbW0gfHwgbWFuQ29tbSk7CiAgICAgICAgICAgIGlmKGlzSGVhZGVyKSByZXR1cm4gW3sgdGV4dDogbGFiZWwsIG9wdGlvbnM6IHsgZmlsbDogY29sb3JzLnBvbGVIZWFkZXIsIGNvbG9yOiBjb2xvcnMud2hpdGUsIGJvbGQ6IHRydWUsIGFsaWduOiAnbGVmdCcgfSB9LCB7IHRleHQ6IGJlcy50b0ZpeGVkKDEpLCBvcHRpb25zOiB7IGZpbGw6IGNvbG9ycy5wb2xlSGVhZGVyLCBjb2xvcjogY29sb3JzLndoaXRlLCBib2xkOiB0cnVlIH0gfSwgeyB0ZXh0OiBhcHAudG9GaXhlZCgxKSwgb3B0aW9uczogeyBmaWxsOiBjb2xvcnMucG9sZUhlYWRlciwgY29sb3I6IGNvbG9ycy53aGl0ZSwgYm9sZDogdHJ1ZSB9IH0sIHsgdGV4dDogZWNhcnQudG9GaXhlZCgxKSwgb3B0aW9uczogeyBmaWxsOiBjb2xvcnMucG9sZUhlYWRlciwgY29sb3I6IGVjYXJ0Pj0wP2NvbG9ycy5zdWNjZXNzOiIjRTU3MzczIiwgYm9sZDogdHJ1ZSB9IH0sIHsgdGV4dDogIiIsIG9wdGlvbnM6IHsgZmlsbDogY29sb3JzLnBvbGVIZWFkZXIgfSB9XTsKICAgICAgICAgICAgZWxzZSByZXR1cm4gW3sgdGV4dDogaXNDaGlsZCA/ICIgICAgIiArIGxhYmVsIDogbGFiZWwsIG9wdGlvbnM6IHsgYWxpZ246ICdsZWZ0JyB9IH0sIGJlcy50b0ZpeGVkKDEpLCBhcHAudG9GaXhlZCgxKSwgeyB0ZXh0OiBlY2FydC50b0ZpeGVkKDEpLCBvcHRpb25zOiB7IGNvbG9yOiBlY2FydD49MCA/IGNvbG9ycy5zdWNjZXNzIDogY29sb3JzLmRhbmdlciwgYm9sZDogdHJ1ZSB9IH0sIHsgdGV4dDogZnVsbENvbW0sIG9wdGlvbnM6IHsgYWxpZ246ICdsZWZ0JywgaXRhbGljOiB0cnVlLCBmb250U2l6ZTogOCB9IH1dOwogICAgICAgIH07CiAgICAgICAgaWYgKGtpZHMubGVuZ3RoID4gMCkgewogICAgICAgICAgICBsZXQgcG9sZUJlcyA9IDAsIHBvbGVBcHAgPSAwLCBraWRzUm93cyA9IFtdOwogICAgICAgICAgICBpZigobmVlZHNbcl0gfHwgMCkgPiAwIHx8IChyZXNbcl0gJiYgcmVzW3JdLmNvc3QgPiAwKSkgeyBwb2xlQmVzICs9IG5lZWRzW3JdIHx8IDA7IHBvbGVBcHAgKz0gKHJlc1tyXT8uY29zdCB8fCAwKTsga2lkc1Jvd3MucHVzaChtYWtlUm93KHIsIHIsIGZhbHNlLCB0cnVlKSk7IH0KICAgICAgICAgICAga2lkcy5mb3JFYWNoKGsgPT4geyBpZigobmVlZHNba10gfHwgMCkgPiAwIHx8IChyZXNba10gJiYgcmVzW2tdLmNvc3QgPiAwKSkgeyBwb2xlQmVzICs9IG5lZWRzW2tdIHx8IDA7IHBvbGVBcHAgKz0gKHJlc1trXT8uY29zdCB8fCAwKTsga2lkc1Jvd3MucHVzaChtYWtlUm93KGssIGssIGZhbHNlLCB0cnVlKSk7IH19KTsKICAgICAgICAgICAgaWYocG9sZUFwcCA+IDAgfHwgcG9sZUJlcyA+IDApIHsKICAgICAgICAgICAgICAgIGxldCBlY2FydFBvbGUgPSBwb2xlQXBwIC0gcG9sZUJlczsgcmVjYXBSb3dzLnB1c2gobWFrZVJvdyhgUMOUTEUgJHtyLnRvVXBwZXJDYXNlKCl9YCwgciwgdHJ1ZSwgZmFsc2UpKTsgCiAgICAgICAgICAgICAgICByZWNhcFJvd3NbcmVjYXBSb3dzLmxlbmd0aC0xXVsxXS50ZXh0ID0gcG9sZUJlcy50b0ZpeGVkKDEpOyByZWNhcFJvd3NbcmVjYXBSb3dzLmxlbmd0aC0xXVsyXS50ZXh0ID0gcG9sZUFwcC50b0ZpeGVkKDEpOyByZWNhcFJvd3NbcmVjYXBSb3dzLmxlbmd0aC0xXVszXS50ZXh0ID0gZWNhcnRQb2xlLnRvRml4ZWQoMSk7IHJlY2FwUm93c1tyZWNhcFJvd3MubGVuZ3RoLTFdWzNdLm9wdGlvbnMuY29sb3IgPSBlY2FydFBvbGU+PTA/IiM4MUM3ODQiOiIjRTU3MzczIjsKICAgICAgICAgICAgICAgIHJlY2FwUm93cy5wdXNoKC4uLmtpZHNSb3dzKTsKICAgICAgICAgICAgfQogICAgICAgIH0gZWxzZSBpZigobmVlZHNbcl0gfHwgMCkgPiAwIHx8IChyZXNbcl0gJiYgcmVzW3JdLmNvc3QgPiAwKSkgcmVjYXBSb3dzLnB1c2gobWFrZVJvdyhyLCByLCBmYWxzZSwgZmFsc2UpKTsKICAgIH0pOwogICAgY2h1bmtBcnJheShyZWNhcFJvd3MsIExJTUlUX0JJTEFOKS5mb3JFYWNoKChjaHVuaywgaWR4KSA9PiB7CiAgICAgICAgbGV0IHNCaWxhbiA9IHBwdHguYWRkU2xpZGUoKTsKICAgICAgICBzQmlsYW4uYWRkVGV4dChgNS4gQmlsYW4gJiBDb21tZW50YWlyZXMke3JlY2FwUm93cy5sZW5ndGggPiBMSU1JVF9CSUxBTiA/IGAgKCR7aWR4KzF9KWAgOiAiIn1gLCB7IHg6IDAuNSwgeTogMC4zLCBmb250U2l6ZTogMTgsIGJvbGQ6IHRydWUsIGNvbG9yOiBjb2xvcnMucHJpbWFyeSB9KTsKICAgICAgICBzQmlsYW4uYWRkU2hhcGUocHB0eC5TaGFwZVR5cGUubGluZSwgeyB4OjAuNSwgeTowLjYsIHc6OSwgaDowLCBsaW5lOntjb2xvcjpjb2xvcnMuZGFuZ2VyLCB3aWR0aDoyfSB9KTsKICAgICAgICBzQmlsYW4uYWRkVGFibGUoW1t7IHRleHQ6ICJEaXNjaXBsaW5lIiwgb3B0aW9uczogeyAuLi5oZWFkZXJTdHlsZXMsIGZpbGw6IGNvbG9ycy5wcmltYXJ5LCB3OiAyLjUgfSB9LCB7IHRleHQ6ICJCZXNvaW4iLCBvcHRpb25zOiB7IC4uLmhlYWRlclN0eWxlcywgZmlsbDogY29sb3JzLmRhbmdlciwgY29sb3I6IGNvbG9ycy5ibGFjaywgdzogMS4wIH0gfSwgeyB0ZXh0OiAiQXBwb3J0Iiwgb3B0aW9uczogeyAuLi5oZWFkZXJTdHlsZXMsIGZpbGw6IGNvbG9ycy5zdWNjZXNzLCB3OiAxLjAgfSB9LCB7IHRleHQ6ICLDiWNhcnQiLCBvcHRpb25zOiB7IC4uLmhlYWRlclN0eWxlcywgZmlsbDogIjk1QTVBNiIsIHc6IDEuMCB9IH0sIHsgdGV4dDogIkNvbW1lbnRhaXJlcyIsIG9wdGlvbnM6IHsgLi4uaGVhZGVyU3R5bGVzLCBmaWxsOiBjb2xvcnMuc2Vjb25kYXJ5LCB3OiA0LjAgfSB9XSwgLi4uY2h1bmtdLCB7IHg6IDAuMjUsIHk6IDAuNzUsIHc6IDkuNSwgZm9udFNpemU6IDEwLCByb3dIOiAwLjM1LCBib3JkZXI6IHN0ZEJvcmRlciwgYWxpZ246ICdjZW50ZXInLCB2YWxpZ246ICdtaWRkbGUnIH0pOwogICAgICAgIGFkZEZvb3RlcihzQmlsYW4sICJCaWxhbiBkaXNjaXBsaW5haXJlIik7CiAgICB9KTsKCiAgICAvLyAtLS0gNi4gVk9URSAmIFJIIC0tLQogICAgbGV0IHNWb3RlID0gcHB0eC5hZGRTbGlkZSgpOwogICAgc1ZvdGUuYWRkVGV4dCgiNi4gU3ludGjDqHNlICYgVm90ZSIsIHsgeDogMC41LCB5OiAwLjMsIGZvbnRTaXplOiAxOCwgYm9sZDogdHJ1ZSwgY29sb3I6IGNvbG9ycy5wcmltYXJ5IH0pOwogICAgc1ZvdGUuYWRkU2hhcGUocHB0eC5TaGFwZVR5cGUubGluZSwgeyB4OjAuNSwgeTowLjYsIHc6OSwgaDowLCBsaW5lOntjb2xvcjpjb2xvcnMucHJpbWFyeSwgd2lkdGg6Mn0gfSk7CiAgICBzVm90ZS5hZGRTaGFwZShwcHR4LlNoYXBlVHlwZS5yZWN0LCB7IHg6IDAuNSwgeTogMC44LCB3OiA5LCBoOiAzLjIsIGZpbGw6ICJGRkY4RTEiLCBsaW5lOiB7Y29sb3I6IGNvbG9ycy5hY2NlbnQsIGRhc2hUeXBlOidkYXNoJ30gfSk7CiAgICBzVm90ZS5hZGRUZXh0KCJJTkZPUk1BVElPTlMgUkggKFBvc3RlcyAmIEJNUCkiLCB7IHg6IDAuNywgeTogMS4wLCBmb250U2l6ZTogMTEsIGJvbGQ6IHRydWUsIGNvbG9yOiBjb2xvcnMuYWNjZW50IH0pOwogICAgbGV0IHJoVHh0ID0gW107CiAgICBnZXRFbnRpdHlUZWFjaGVycygpLmZvckVhY2godCA9PiB7CiAgICAgICAgaWYodC5ibXAgPiAwKSByaFR4dC5wdXNoKGDigKIgJHt0LnN1YmplY3R9IDogQk1QICR7dC5ibXB9aGApOwogICAgICAgIGlmKHQuY3NkID4gMCkgcmhUeHQucHVzaChg4oCiICR7dC5zdWJqZWN0fSA6IENTRCAke3QuY3NkfWggKCR7dC5uYW1lfSlgKTsKICAgIH0pOwogICAgaWYocmhUeHQubGVuZ3RoID4gMCkgewogICAgICAgIGxldCBoYWxmID0gTWF0aC5jZWlsKHJoVHh0Lmxlbmd0aC8yKTsKICAgICAgICBzVm90ZS5hZGRUZXh0KHJoVHh0LnNsaWNlKDAsIGhhbGYpLmpvaW4oIlxuIiksIHsgeDogMC43LCB5OiAxLjMsIHc6IDQsIGg6IDIuNSwgZm9udFNpemU6IDEwLCB2YWxpZ246J3RvcCcgfSk7CiAgICAgICAgc1ZvdGUuYWRkVGV4dChyaFR4dC5zbGljZShoYWxmKS5qb2luKCJcbiIpLCB7IHg6IDUuMCwgeTogMS4zLCB3OiA0LCBoOiAyLjUsIGZvbnRTaXplOiAxMCwgdmFsaWduOid0b3AnIH0pOwogICAgfSBlbHNlIHNWb3RlLmFkZFRleHQoIkF1Y3VuIG1veWVuIHByb3Zpc29pcmUgc2lnbmFsw6kuIiwgeyB4OiAwLjcsIHk6IDEuNCwgZm9udFNpemU6IDEwLCBpdGFsaWM6IHRydWUgfSk7CiAgICAKICAgIGxldCB5Vm90ZSA9IDQuMzsgbGV0IGhWb3RlID0gMC44OwogICAgc1ZvdGUuYWRkU2hhcGUocHB0eC5TaGFwZVR5cGUucmVjdCwgeyB4OiAwLjUsIHk6IHlWb3RlLCB3OiA5LCBoOiBoVm90ZSwgZmlsbDogY29sb3JzLnByaW1hcnkgfSk7CiAgICBzVm90ZS5hZGRUZXh0KCJWT1RFIENBIiwgeyB4OiAwLjcsIHk6IHlWb3RlLCB3OiAyLCBoOiBoVm90ZSwgZm9udFNpemU6IDE2LCBib2xkOiB0cnVlLCBjb2xvcjogY29sb3JzLndoaXRlLCB2YWxpZ246J21pZGRsZScgfSk7CiAgICBsZXQgYm94WSA9IHlWb3RlICsgMC4xNTsgbGV0IGJveEggPSAwLjU7CiAgICBzVm90ZS5hZGRTaGFwZShwcHR4LlNoYXBlVHlwZS5yZWN0LCB7IHg6IDMuMCwgeTogYm94WSwgdzogMS44LCBoOiBib3hILCBmaWxsOiBjb2xvcnMud2hpdGUgfSk7CiAgICBzVm90ZS5hZGRUZXh0KCJQT1VSIiwgeyB4OiAzLjAsIHk6IGJveFksIHc6IDEuOCwgaDogYm94SCwgZm9udFNpemU6IDEwLCBhbGlnbjonY2VudGVyJywgdmFsaWduOidtaWRkbGUnIH0pOwogICAgc1ZvdGUuYWRkU2hhcGUocHB0eC5TaGFwZVR5cGUucmVjdCwgeyB4OiA1LjEsIHk6IGJveFksIHc6IDEuOCwgaDogYm94SCwgZmlsbDogY29sb3JzLndoaXRlIH0pOwogICAgc1ZvdGUuYWRkVGV4dCgiQ09OVFJFIiwgeyB4OiA1LjEsIHk6IGJveFksIHc6IDEuOCwgaDogYm94SCwgZm9udFNpemU6IDEwLCBhbGlnbjonY2VudGVyJywgdmFsaWduOidtaWRkbGUnIH0pOwogICAgc1ZvdGUuYWRkU2hhcGUocHB0eC5TaGFwZVR5cGUucmVjdCwgeyB4OiA3LjIsIHk6IGJveFksIHc6IDEuOCwgaDogYm94SCwgZmlsbDogY29sb3JzLndoaXRlIH0pOwogICAgc1ZvdGUuYWRkVGV4dCgiQUJTVC4iLCB7IHg6IDcuMiwgeTogYm94WSwgdzogMS44LCBoOiBib3hILCBmb250U2l6ZTogMTAsIGFsaWduOidjZW50ZXInLCB2YWxpZ246J21pZGRsZScgfSk7CiAgICBhZGRGb290ZXIoc1ZvdGUsICJTw6lhbmNlIGR1IC4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLiIpOwoKICAgIHBwdHgud3JpdGVGaWxlKHsgZmlsZU5hbWU6IGBESEdfQ0FfJHtEQVRBLmNvbmZpZy55ZWFyfS5wcHR4YCB9KTsKfQpsZXQgY3VycmVudEVkc0xldmVsID0gJyc7IC8vIFBvdXIgc2F2b2lyIHNpIG9uIGVzdCBlbiAxZXJlIG91IFRlcm0KbGV0IHRlbXBTZWxlY3RlZEVkcyA9IG5ldyBTZXQoKTsKCmNvbnN0IEVEU19SRUZFUkVOVElFTCA9IFsKICAgIC8vIC0tLSBFTlNFSUdORU1FTlRTIERFIFNQw4lDSUFMSVTDiSBHw4lOw4lSQVVYIC0tLQogICAgeyBuYW1lOiAiTWF0aMOpbWF0aXF1ZXMiLCBjYXQ6ICJHZW4iIH0sCiAgICB7IG5hbWU6ICJQaHlzaXF1ZS1DaGltaWUiLCBjYXQ6ICJHZW4iIH0sCiAgICB7IG5hbWU6ICJTVlQiLCBjYXQ6ICJHZW4iIH0sCiAgICB7IG5hbWU6ICJIR0dTUCIsIGNhdDogIkdlbiIgfSwKICAgIHsgbmFtZTogIlNFUyIsIGNhdDogIkdlbiIgfSwKICAgIHsgbmFtZTogIkhMUCIsIGNhdDogIkdlbiIgfSwKICAgIHsgbmFtZTogIkxMQ0UgQW5nbGFpcyIsIGNhdDogIkdlbiIgfSwKICAgIHsgbmFtZTogIkxMQ0UgRXNwYWdub2wiLCBjYXQ6ICJHZW4iIH0sCiAgICB7IG5hbWU6ICJMTENFIEFsbGVtYW5kIiwgY2F0OiAiR2VuIiB9LAogICAgeyBuYW1lOiAiTExDRSBJdGFsaWVuIiwgY2F0OiAiR2VuIiB9LAogICAgeyBuYW1lOiAiTlNJIiwgY2F0OiAiR2VuIiB9LAogICAgeyBuYW1lOiAiU0kgKFNjaWVuY2VzIGRlIGwnSW5nw6luaWV1cikiLCBjYXQ6ICJHZW4iIH0sCiAgICB7IG5hbWU6ICJBTUMgKEFuZ2xhaXMgTW9uZGUgQ29udGVtcC4pIiwgY2F0OiAiR2VuIiB9LAogICAgeyBuYW1lOiAiRVBQQ1MgKFNwb3J0KSIsIGNhdDogIkdlbiIgfSwKICAgIAogICAgLy8gLS0tIFDDlExFIEFSVFMgKEluZMOpcGVuZGFudHMpIC0tLQogICAgeyBuYW1lOiAiU3DDqSBBcnRzIFBsYXN0aXF1ZXMgKEFydHMpIiwgY2F0OiAiR2VuIiB9LAogICAgeyBuYW1lOiAiU3DDqSBNdXNpcXVlIChBcnRzKSIsIGNhdDogIkdlbiIgfSwKICAgIHsgbmFtZTogIlNww6kgVGjDqcOidHJlIChBcnRzKSIsIGNhdDogIkdlbiIgfSwKICAgIHsgbmFtZTogIlNww6kgQ2luw6ltYS1BdWRpb3Zpc3VlbCAoQXJ0cykiLCBjYXQ6ICJHZW4iIH0sCiAgICB7IG5hbWU6ICJTcMOpIERhbnNlIChBcnRzKSIsIGNhdDogIkdlbiIgfSwKICAgIHsgbmFtZTogIlNww6kgSGlzdG9pcmUgZGVzIEFydHMgKEFydHMpIiwgY2F0OiAiR2VuIiB9LAogICAgeyBuYW1lOiAiU3DDqSBBcnRzIGR1IENpcnF1ZSAoQXJ0cykiLCBjYXQ6ICJHZW4iIH0sCgogICAgLy8gLS0tIEZJTEnDiFJFIFNUSTJEIDogUFJFTUnDiFJFIC0tLQogICAgeyBuYW1lOiAiU1RJMkQgLSBJbm5vdmF0aW9uIFRlY2hub2xvZ2lxdWUgKElUKSIsIGNhdDogIlRlY2giIH0sCiAgICB7IG5hbWU6ICJTVEkyRCAtIEluZ8OpbmllcmllIGV0IGTDqXYuIGR1cmFibGUgKEkyRCkiLCBjYXQ6ICJUZWNoIiB9LAogICAgeyBuYW1lOiAiU1RJMkQgLSBQaHlzLi1DaGltaWUgZXQgTWF0aHMgKFBDTSkiLCBjYXQ6ICJUZWNoIiB9LAoKICAgIC8vIC0tLSBGSUxJw4hSRSBTVEkyRCA6IFRFUk1JTkFMRSAtLS0KICAgIHsgbmFtZTogIlBoeXNpcXVlLUNoaW1pZSBldCBNYXRow6ltYXRpcXVlcyAoU1RJMkQpIiwgY2F0OiAiVGVjaCIgfSwKICAgIHsgbmFtZTogIjJJMkQgLSBBcmNoLiBldCBDb25zdHJ1Y3Rpb24gKEFDKSIsIGNhdDogIlRlY2giIH0sCiAgICB7IG5hbWU6ICIySTJEIC0gw4luZXJnaWUgZXQgRW52aXJvbm5lbWVudCAoRUUpIiwgY2F0OiAiVGVjaCIgfSwKICAgIHsgbmFtZTogIjJJMkQgLSBJbm5vdmF0aW9uIFRlY2guIGV0IMOJY28tY29uY2VwdGlvbiAoSVRFQykiLCBjYXQ6ICJUZWNoIiB9LAogICAgeyBuYW1lOiAiMkkyRCAtIFN5c3TDqG1lcyBkJ0luZm8uIGV0IE51bcOpcmlxdWUgKFNJTikiLCBjYXQ6ICJUZWNoIiB9LAoKICAgIC8vIC0tLSBGSUxJw4hSRSBTVE1HIC0tLQogICAgeyBuYW1lOiAiU1RNRyAtIEdlc3Rpb24gZXQgRmluYW5jZSIsIGNhdDogIlRlY2giIH0sCiAgICB7IG5hbWU6ICJTVE1HIC0gTWVyY2F0aXF1ZSAoTWFya2V0aW5nKSIsIGNhdDogIlRlY2giIH0sCiAgICB7IG5hbWU6ICJTVE1HIC0gUmVzc291cmNlcyBIdW1haW5lcyBldCBDb21tLiIsIGNhdDogIlRlY2giIH0sCiAgICB7IG5hbWU6ICJTVE1HIC0gU3lzdMOobWVzIGQnSW5mb3JtYXRpb24gZGUgR2VzdGlvbiIsIGNhdDogIlRlY2giIH0sCgogICAgLy8gLS0tIEFVVFJFUyBGSUxJw4hSRVMgVEVDSE5PIC0tLQogICAgeyBuYW1lOiAiU1QyUyAtIFNjaWVuY2VzIGV0IHRlY2guIHNhbml0YWlyZXMgZXQgc29jaWFsZXMiLCBjYXQ6ICJUZWNoIiB9LAogICAgeyBuYW1lOiAiU1QyUyAtIEJpb2xvZ2llIGV0IHBoeXNpb3BhdGhvbG9naWUgaHVtYWluZXMiLCBjYXQ6ICJUZWNoIiB9LAogICAgeyBuYW1lOiAiU1RMIC0gQmlvdGVjaG5vbG9naWVzIiwgY2F0OiAiVGVjaCIgfSwKICAgIHsgbmFtZTogIlNUTCAtIFNjaWVuY2VzIHBoeXMuIGV0IGNoaW0uIGVuIGxhYm8iLCBjYXQ6ICJUZWNoIiB9LAogICAgeyBuYW1lOiAiU1REMkEgLSBBbmFseXNlIGV0IG3DqXRob2RlcyBlbiBkZXNpZ24iLCBjYXQ6ICJUZWNoIiB9LAogICAgeyBuYW1lOiAiU1REMkEgLSBDb25jZXB0aW9uIGV0IGNyw6lhdGlvbiBlbiBkZXNpZ24iLCBjYXQ6ICJUZWNoIiB9LAogICAgeyBuYW1lOiAiU1RIUiAtIEjDtHRlbGxlcmllIGV0IFJlc3RhdXJhdGlvbiIsIGNhdDogIlRlY2giIH0sCiAgICB7IG5hbWU6ICJTVEFWIC0gQW3DqW5hZ2VtZW50IC8gUHJvZHVjdGlvbiAvIFRyYW5zZm9ybWF0aW9uIiwgY2F0OiAiVGVjaCIgfSwKICAgIHsgbmFtZTogIlMyVE1EIC0gTXVzaXF1ZSAvIERhbnNlIC8gVGjDqcOidHJlIiwgY2F0OiAiVGVjaCIgfQpdOwoKZnVuY3Rpb24gYWRkRURTKGxldmVsKSB7CiAgICAvLyBTw6ljdXJpdMOpIDogb24gcydhc3N1cmUgcXVlIGxhIHN0cnVjdHVyZSBleGlzdGUgYXUgbW9tZW50IGR1IGNsaWMKICAgIGlmICghREFUQS5lZHMpIERBVEEuZWRzID0geyBwcmVtaWVyZTogW10sIHRlcm1pbmFsZTogW10gfTsKICAgIGlmICghREFUQS5lZHNbbGV2ZWxdKSBEQVRBLmVkc1tsZXZlbF0gPSBbXTsKCiAgICBjdXJyZW50RWRzTGV2ZWwgPSBsZXZlbDsKICAgIHRlbXBTZWxlY3RlZEVkcy5jbGVhcigpOwogICAgCiAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZWRzLXRpbGVzLWNvbnRhaW5lcicpOwogICAgY29uc3QgdGl0bGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZWRzLXNlbGVjdG9yLXRpdGxlJyk7CiAgICAKICAgIGlmICghY29udGFpbmVyIHx8ICF0aXRsZSkgcmV0dXJuOwoKICAgIHRpdGxlLmlubmVyVGV4dCA9IGBDaG9pc2lyIGxlcyBFRFMgOiAke2xldmVsID09PSAncHJlbWllcmUnID8gJ1ByZW1pw6hyZScgOiAnVGVybWluYWxlJ31gOwogICAgY29udGFpbmVyLmlubmVySFRNTCA9ICcnOwoKICAgIGNvbnN0IGV4aXN0aW5nID0gREFUQS5lZHNbbGV2ZWxdLm1hcChlID0+IGUubmFtZSB8fCAiIik7CgogICAgLy8gR8OpbsOpcmF0aW9uIGRlcyB0dWlsZXMgYXZlYyBGSUxUUkFHRSBDT1JSSUfDiQogICAgRURTX1JFRkVSRU5USUVMLmZvckVhY2goZWRzID0+IHsKICAgICAgICAvLyAtLS0gTE9HSVFVRSBERSBGSUxUUkFHRSBTVEkyRCAvIDJJMkQgLS0tCiAgICAgICAgCiAgICAgICAgLy8gMS4gRW4gUHJlbWnDqHJlIDogT24gY2FjaGUgbGVzIHNww6lzIGRlIFRlcm1pbmFsZSAoY2VsbGVzIGNvbW1lbsOnYW50IHBhciAySTJEIG91IGNvbnRlbmFudCAoU1RJMkQpKQogICAgICAgIGlmIChsZXZlbCA9PT0gJ3ByZW1pZXJlJyAmJiAoZWRzLm5hbWUuc3RhcnRzV2l0aCgiMkkyRCIpIHx8IGVkcy5uYW1lLmluY2x1ZGVzKCIoU1RJMkQpIikpKSB7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgLy8gMi4gRW4gVGVybWluYWxlIDogT24gY2FjaGUgbGVzIDMgc3DDqXMgb2JsaWdhdG9pcmVzIGRlIFByZW1pw6hyZSAoY2VsbGVzIGNvbW1lbsOnYW50IHBhciBTVEkyRCAtKQogICAgICAgIGlmIChsZXZlbCA9PT0gJ3Rlcm1pbmFsZScgJiYgZWRzLm5hbWUuc3RhcnRzV2l0aCgiU1RJMkQgLSAiKSkgewogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICAvLyBBZmZpY2hhZ2Ugc2kgcGFzIGTDqWrDoCBzw6lsZWN0aW9ubsOpCiAgICAgICAgaWYgKCFleGlzdGluZy5pbmNsdWRlcyhlZHMubmFtZSkpIHsKICAgICAgICAgICAgY29uc3QgdGlsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgICAgICAgICB0aWxlLmNsYXNzTmFtZSA9ICdlZHMtdGlsZSc7CiAgICAgICAgICAgIHRpbGUuaW5uZXJUZXh0ID0gZWRzLm5hbWU7CiAgICAgICAgICAgIHRpbGUub25jbGljayA9ICgpID0+IHsKICAgICAgICAgICAgICAgIHRpbGUuY2xhc3NMaXN0LnRvZ2dsZSgnc2VsZWN0ZWQnKTsKICAgICAgICAgICAgICAgIGlmKHRpbGUuY2xhc3NMaXN0LmNvbnRhaW5zKCdzZWxlY3RlZCcpKSB0ZW1wU2VsZWN0ZWRFZHMuYWRkKGVkcy5uYW1lKTsKICAgICAgICAgICAgICAgIGVsc2UgdGVtcFNlbGVjdGVkRWRzLmRlbGV0ZShlZHMubmFtZSk7CiAgICAgICAgICAgIH07CiAgICAgICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZCh0aWxlKTsKICAgICAgICB9CiAgICB9KTsKCiAgICBjb25zdCBvdmVybGF5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Vkcy1zZWxlY3Rvci1vdmVybGF5Jyk7CiAgICBpZiAob3ZlcmxheSkgewogICAgICAgIG92ZXJsYXkuc3R5bGUuZGlzcGxheSA9ICdmbGV4JzsKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnRuLXZhbGlkYXRlLWVkcycpLm9uY2xpY2sgPSBjb25maXJtRWRzU2VsZWN0aW9uOwogICAgfQp9CgpmdW5jdGlvbiBjb25maXJtRWRzU2VsZWN0aW9uKCkgewogICAgdGVtcFNlbGVjdGVkRWRzLmZvckVhY2gobmFtZSA9PiB7CiAgICAgICAgLy8gMS4gQWpvdXQgZGFucyBsYSBsaXN0ZSBkZSBnZXN0aW9uIGRlcyBFRFMgKFRhYmxlYXUgZHUgYmFzKQogICAgICAgIGlmICghREFUQS5lZHNbY3VycmVudEVkc0xldmVsXS5zb21lKGUgPT4gZS5uYW1lID09PSBuYW1lKSkgewogICAgICAgICAgICBEQVRBLmVkc1tjdXJyZW50RWRzTGV2ZWxdLnB1c2goeyAKICAgICAgICAgICAgICAgIG5hbWU6IG5hbWUsIAogICAgICAgICAgICAgICAgc3R1ZGVudHM6IDAsIAogICAgICAgICAgICAgICAgZ3JvdXBzOiAwLCAKICAgICAgICAgICAgICAgIGhQZXJHcm91cDogKGN1cnJlbnRFZHNMZXZlbCA9PT0gJ3ByZW1pZXJlJyA/IDQgOiA2KSwKICAgICAgICAgICAgICAgIGNvZWY6IDEuMAogICAgICAgICAgICB9KTsKICAgICAgICB9CgogICAgICAgIC8vIDIuIEdlc3Rpb24gZGUgbGEgTWF0acOocmUgKFRhYmxlYXUgcHJpbmNpcGFsKQogICAgICAgIGlmICghREFUQS5zdWJqZWN0cy5pbmNsdWRlcyhuYW1lKSkgewogICAgICAgICAgICAvLyBDYXMgQSA6IExhIG1hdGnDqHJlIG4nZXhpc3RlIHBhcywgb24gbGEgY3LDqWUgcHJvcHJlbWVudAogICAgICAgICAgICBEQVRBLnN1YmplY3RzLnB1c2gobmFtZSk7CiAgICAgICAgICAgIERBVEEuc3ViamVjdE1ldGFbbmFtZV0gPSB7IAogICAgICAgICAgICAgICAgbW9kZTogJ2xldmVsJywgCiAgICAgICAgICAgICAgICBsZXZlbHM6IFtjdXJyZW50RWRzTGV2ZWwgPT09ICdwcmVtaWVyZScgPyAnMcOocmUnIDogJ1Rlcm1pbmFsZSddLAogICAgICAgICAgICAgICAgZXRhYjogMCwgCiAgICAgICAgICAgICAgICB2b2xMZXZlbDoge30sIAogICAgICAgICAgICAgICAgcGFyZW50OiAiU3DDqWNpYWxpdMOpcyIsCiAgICAgICAgICAgICAgICBjb2RlOiAiRURTIiwKICAgICAgICAgICAgICAgIGlzRWRzOiB0cnVlIC8vIEMnZXN0IGNlIGZsYWcgcXVpIGNhY2hlIGxhIGNvbG9ubmUKICAgICAgICAgICAgfTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAvLyBDYXMgQiA6IExhIG1hdGnDqHJlIEVYSVNURSBEw4lKw4AgKFNhaXNpZSBtYW51ZWxsZSBhdmFudCkKICAgICAgICAgICAgLy8gPT0+IE9OIEZPUkNFIExBIENPTlZFUlNJT04gRU4gRURTCiAgICAgICAgICAgIGlmICghREFUQS5zdWJqZWN0TWV0YVtuYW1lXSkgREFUQS5zdWJqZWN0TWV0YVtuYW1lXSA9IHt9OwogICAgICAgICAgICAKICAgICAgICAgICAgREFUQS5zdWJqZWN0TWV0YVtuYW1lXS5pc0VkcyA9IHRydWU7IC8vIE9uIGZvcmNlIGxlIG1hc3F1YWdlIGRlIGxhIGNvbG9ubmUKICAgICAgICAgICAgREFUQS5zdWJqZWN0TWV0YVtuYW1lXS5tb2RlID0gJ2xldmVsJzsgLy8gT24gZm9yY2UgbGUgbW9kZSAiTml2ZWF1IgogICAgICAgICAgICBEQVRBLnN1YmplY3RNZXRhW25hbWVdLnBhcmVudCA9ICJTcMOpY2lhbGl0w6lzIjsgLy8gT24gbGEgcmFuZ2UgZGFucyBsZSBib24gcMO0bGUKICAgICAgICAgICAgCiAgICAgICAgICAgIC8vIE9uIHMnYXNzdXJlIHF1ZSBsZSBuaXZlYXUgYWN0dWVsIGVzdCBiaWVuIGFjdGl2w6kgcG91ciBjZXR0ZSBtYXRpw6hyZQogICAgICAgICAgICBjb25zdCBsdmxMYWJlbCA9IGN1cnJlbnRFZHNMZXZlbCA9PT0gJ3ByZW1pZXJlJyA/ICcxw6hyZScgOiAnVGVybWluYWxlJzsKICAgICAgICAgICAgaWYgKCFEQVRBLnN1YmplY3RNZXRhW25hbWVdLmxldmVscykgREFUQS5zdWJqZWN0TWV0YVtuYW1lXS5sZXZlbHMgPSBbXTsKICAgICAgICAgICAgaWYgKCFEQVRBLnN1YmplY3RNZXRhW25hbWVdLmxldmVscy5pbmNsdWRlcyhsdmxMYWJlbCkpIHsKICAgICAgICAgICAgICAgIERBVEEuc3ViamVjdE1ldGFbbmFtZV0ubGV2ZWxzLnB1c2gobHZsTGFiZWwpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfSk7CiAgICAKICAgIHNhdmVEYXRhKCk7CiAgICBzeW5jRWRzVG9WZW50aWxhdGlvbigpOyAvLyBTeW5jaHJvbmlzZSBsZXMgaGV1cmVzCiAgICByZW5kZXJFRFMoKTsKICAgIGNsb3NlRWRzU2VsZWN0b3IoKTsKICAgIAogICAgLy8gUmFmcmHDrmNoaXQgbGVzIMOpY3JhbnMgcG91ciBmYWlyZSBkaXNwYXJhw650cmUgaW5zdGFudGFuw6ltZW50IGxhIGNvbG9ubmUgZW4gdHJvcAogICAgaWYodHlwZW9mIHJlbmRlclN1YmplY3RzQ29uZmlnID09PSAnZnVuY3Rpb24nKSByZW5kZXJTdWJqZWN0c0NvbmZpZygpOwogICAgaWYodHlwZW9mIHJlbmRlckdyaWRTeXN0ZW0gPT09ICdmdW5jdGlvbicpIHJlbmRlckdyaWRTeXN0ZW0oKTsKfQoKZnVuY3Rpb24gY2xvc2VFZHNTZWxlY3RvcigpIHsKICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlZHMtc2VsZWN0b3Itb3ZlcmxheScpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7Cn0KCmZ1bmN0aW9uIHJlbmRlckVEUygpIHsKICAgIGNvbnN0IGxldmVscyA9IFsncHJlbWllcmUnLCAndGVybWluYWxlJ107CiAgICBsZXQgZ2xvYmFsVG90YWwgPSAwOwoKICAgIGxldmVscy5mb3JFYWNoKGx2bCA9PiB7CiAgICAgICAgY29uc3QgdGJvZHkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChgZWRzLWZ1bGwtJHtsdmwgPT09ICdwcmVtaWVyZScgPyAnMWVyZScgOiAndGVybSd9YCk7CiAgICAgICAgaWYoIXRib2R5KSByZXR1cm47CiAgICAgICAgdGJvZHkuaW5uZXJIVE1MID0gJyc7CiAgICAgICAgbGV0IGxldmVsVG90YWwgPSAwOwoKICAgICAgICBjb25zdCBnZW5JdGVtcyA9IERBVEEuZWRzW2x2bF0KICAgICAgICAgICAgLmZpbHRlcihlID0+IHsgY29uc3QgcmVmID0gRURTX1JFRkVSRU5USUVMLmZpbmQociA9PiByLm5hbWUgPT09IGUubmFtZSk7IHJldHVybiAhcmVmIHx8IHJlZi5jYXQgPT09ICdHZW4nOyB9KQogICAgICAgICAgICAuc29ydCgoYSwgYikgPT4gYS5uYW1lLmxvY2FsZUNvbXBhcmUoYi5uYW1lKSk7CgogICAgICAgIGNvbnN0IHRlY2hJdGVtcyA9IERBVEEuZWRzW2x2bF0KICAgICAgICAgICAgLmZpbHRlcihlID0+IHsgY29uc3QgcmVmID0gRURTX1JFRkVSRU5USUVMLmZpbmQociA9PiByLm5hbWUgPT09IGUubmFtZSk7IHJldHVybiByZWYgJiYgcmVmLmNhdCAhPT0gJ0dlbic7IH0pCiAgICAgICAgICAgIC5zb3J0KChhLCBiKSA9PiBhLm5hbWUubG9jYWxlQ29tcGFyZShiLm5hbWUpKTsKCiAgICAgICAgLy8gQ29uc3RydWl0IGxhIGxpc3RlIGRlcyBlbnNlaWduYW50cyBkaXNwb25pYmxlcyAoU0hBUkVEX1RFQUNIRVJTKQogICAgICAgIGNvbnN0IHRlYWNoZXJPcHRpb25zID0gU0hBUkVEX1RFQUNIRVJTLmxlbmd0aCA+IDAKICAgICAgICAgICAgPyAnPG9wdGlvbiB2YWx1ZT0iIj7igJMgQ2hvaXNpciDigJM8L29wdGlvbj4nICsgU0hBUkVEX1RFQUNIRVJTLm1hcCh0ID0+CiAgICAgICAgICAgICAgICBgPG9wdGlvbiB2YWx1ZT0iJHt0LmlkfSI+JHt0Lm5hbWV9JHt0LnN1YmplY3QgPyAnICgnICsgdC5zdWJqZWN0ICsgJyknIDogJyd9PC9vcHRpb24+YAogICAgICAgICAgICAgICkuam9pbignJykKICAgICAgICAgICAgOiAnPG9wdGlvbiB2YWx1ZT0iIj7imqDvuI8gQXVjdW4gZW5zZWlnbmFudCBjcsOpw6k8L29wdGlvbj4nOwoKICAgICAgICBjb25zdCByZW5kZXJJdGVtcyA9IChpdGVtcywgbGFiZWwpID0+IHsKICAgICAgICAgICAgaWYoaXRlbXMubGVuZ3RoID09PSAwKSByZXR1cm47CiAgICAgICAgICAgIHRib2R5LmlubmVySFRNTCArPSBgPHRyPjx0ZCBjb2xzcGFuPSI5IiBjbGFzcz0iZWRzLWNhdC1oZWFkZXIiPiR7bGFiZWx9PC90ZD48L3RyPmA7CgogICAgICAgICAgICBpdGVtcy5mb3JFYWNoKGl0ZW0gPT4gewogICAgICAgICAgICAgICAgY29uc3QgZ2xvYmFsSWR4ID0gREFUQS5lZHNbbHZsXS5pbmRleE9mKGl0ZW0pOwogICAgICAgICAgICAgICAgaWYoaXRlbS5oUGVyR3JvdXAgPT09IHVuZGVmaW5lZCkgaXRlbS5oUGVyR3JvdXAgPSAobHZsID09PSAncHJlbWllcmUnID8gNCA6IDYpOwogICAgICAgICAgICAgICAgLy8gQ29lZiBwYXIgZMOpZmF1dCBzZWxvbiBsJ2VudGl0w6kgOiAxLjEgcG91ciBseWPDqWUgR1QgKDHDqHJlL1Rlcm0pLCAxLjI1IHBvdXIgUMO0bGUgU3VwCiAgICAgICAgICAgICAgICBjb25zdCBfZWRzRGVmYXVsdENvZWYgPSAoY3VycmVudEVudGl0eSA9PT0gJ3BvbGUnKSA/IDEuMjUgOiAxLjE7CiAgICAgICAgICAgICAgICBpZihpdGVtLmNvZWYgPT09IHVuZGVmaW5lZCB8fCBpdGVtLmNvZWYgPT09IDEuMCkgaXRlbS5jb2VmID0gX2Vkc0RlZmF1bHRDb2VmOwogICAgICAgICAgICAgICAgaWYoIWl0ZW0udGVhY2hlcnMpIGl0ZW0udGVhY2hlcnMgPSBbXTsgLy8gdGFibGVhdSBkJ0lEcywgdW4gcGFyIGdyb3VwZQoKICAgICAgICAgICAgICAgIGNvbnN0IHJhdGlvRV9HID0gaXRlbS5ncm91cHMgPiAwID8gKGl0ZW0uc3R1ZGVudHMgLyBpdGVtLmdyb3VwcykudG9GaXhlZCgxKSA6IDA7CiAgICAgICAgICAgICAgICBjb25zdCByYXdIb3VycyA9IGl0ZW0uZ3JvdXBzICogaXRlbS5oUGVyR3JvdXA7CiAgICAgICAgICAgICAgICBjb25zdCB0b3RhbEhvdXJzID0gcmF3SG91cnMgKiAoaXRlbS5jb2VmIHx8IDEuMCk7CiAgICAgICAgICAgICAgICBsZXZlbFRvdGFsICs9IHRvdGFsSG91cnM7CiAgICAgICAgICAgICAgICBjb25zdCBjb3N0UGVyU3R1ZGVudCA9IGl0ZW0uc3R1ZGVudHMgPiAwID8gKHRvdGFsSG91cnMgLyBpdGVtLnN0dWRlbnRzKS50b0ZpeGVkKDMpIDogMDsKICAgICAgICAgICAgICAgIGNvbnN0IHJhdGlvQ2xhc3MgPSByYXRpb0VfRyA+IDM1ID8gJ3RleHQtZGFuZ2VyJyA6IChyYXRpb0VfRyA8IDE1ID8gJ3RleHQtd2FybmluZycgOiAndGV4dC1zdWNjZXNzJyk7CgogICAgICAgICAgICAgICAgLy8gR8OpbsOocmUgbGVzIHNlbGVjdHMgZW5zZWlnbmFudHMgOiB1biBwYXIgZ3JvdXBlCiAgICAgICAgICAgICAgICBsZXQgdGVhY2hlckNlbGxzID0gJyc7CiAgICAgICAgICAgICAgICBjb25zdCBuYkdyb3VwcyA9IE1hdGgubWF4KDEsIGl0ZW0uZ3JvdXBzIHx8IDEpOwogICAgICAgICAgICAgICAgZm9yIChsZXQgZyA9IDA7IGcgPCBuYkdyb3VwczsgZysrKSB7CiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2VsZWN0ZWRJZCA9IGl0ZW0udGVhY2hlcnNbZ10gfHwgJyc7CiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2VsZWN0ZWROYW1lID0gc2VsZWN0ZWRJZAogICAgICAgICAgICAgICAgICAgICAgICA/IChTSEFSRURfVEVBQ0hFUlMuZmluZCh0ID0+IHQuaWQgPT09IHNlbGVjdGVkSWQpPy5uYW1lIHx8ICc/JykKICAgICAgICAgICAgICAgICAgICAgICAgOiAnJzsKICAgICAgICAgICAgICAgICAgICBjb25zdCBnTGFiZWwgPSBuYkdyb3VwcyA+IDEgPyBgPHNwYW4gc3R5bGU9ImZvbnQtc2l6ZTowLjdyZW07Y29sb3I6Izk5OTtkaXNwbGF5OmJsb2NrOyI+R3IuJHtnKzF9PC9zcGFuPmAgOiAnJzsKICAgICAgICAgICAgICAgICAgICB0ZWFjaGVyQ2VsbHMgKz0gYAogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJkaXNwbGF5OmlubGluZS1mbGV4O2ZsZXgtZGlyZWN0aW9uOmNvbHVtbjthbGlnbi1pdGVtczpjZW50ZXI7bWFyZ2luOjJweCAzcHg7Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICR7Z0xhYmVsfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNlbGVjdCBvbmNoYW5nZT0idXBkRURTVGVhY2hlcignJHtsdmx9Jywke2dsb2JhbElkeH0sJHtnfSx0aGlzLnZhbHVlKSIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT0iZm9udC1zaXplOjAuNzhyZW07cGFkZGluZzozcHggNXB4O2JvcmRlci1yYWRpdXM6NXB4O2JvcmRlcjoxcHggc29saWQgI2QyYjRkZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZDoke3NlbGVjdGVkSWQgPyAnI2Y1ZWVmOCcgOiAnI2ZhZmFmYSd9O2NvbG9yOiM2YzM0ODM7bWF4LXdpZHRoOjE0MHB4O2N1cnNvcjpwb2ludGVyOyI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHt0ZWFjaGVyT3B0aW9ucy5yZXBsYWNlKGB2YWx1ZT0iJHtzZWxlY3RlZElkfSJgLCBgdmFsdWU9IiR7c2VsZWN0ZWRJZH0iIHNlbGVjdGVkYCl9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3NlbGVjdD4KICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+YDsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBjb25zdCBjb2VmQ29sb3IgPSAoaXRlbS5jb2VmIHx8IDEuMCkgIT09IDEuMCA/ICcjOGU0NGFkJyA6ICcjOTk5JzsKICAgICAgICAgICAgICAgIHRib2R5LmlubmVySFRNTCArPSBgCiAgICAgICAgICAgICAgICAgICAgPHRyPgogICAgICAgICAgICAgICAgICAgICAgICA8dGQgc3R5bGU9InRleHQtYWxpZ246bGVmdDsgZm9udC13ZWlnaHQ6Ym9sZDsgZm9udC1zaXplOjAuOXJlbTsiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9ImJhZGdlLWNhdCI+JHtsYWJlbC5pbmNsdWRlcygnR8OJTicpID8gJ0dFTicgOiAnVEVDSCd9PC9zcGFuPiR7aXRlbS5uYW1lfQogICAgICAgICAgICAgICAgICAgICAgICA8L3RkPgogICAgICAgICAgICAgICAgICAgICAgICA8dGQ+PGlucHV0IHR5cGU9Im51bWJlciIgdmFsdWU9IiR7aXRlbS5zdHVkZW50c30iIGNsYXNzPSJpbnB1dC1pbmxpbmUtZWRzIiBvbmNoYW5nZT0idXBkRURTKCcke2x2bH0nLCAke2dsb2JhbElkeH0sICdzdHVkZW50cycsIHRoaXMudmFsdWUpIj48L3RkPgogICAgICAgICAgICAgICAgICAgICAgICA8dGQ+PGlucHV0IHR5cGU9Im51bWJlciIgdmFsdWU9IiR7aXRlbS5ncm91cHN9IiBjbGFzcz0iaW5wdXQtaW5saW5lLWVkcyIgc3R5bGU9ImJvcmRlci1jb2xvcjp2YXIoLS1zZWNvbmRhcnkpIiBvbmNoYW5nZT0idXBkRURTKCcke2x2bH0nLCAke2dsb2JhbElkeH0sICdncm91cHMnLCB0aGlzLnZhbHVlKSI+PC90ZD4KICAgICAgICAgICAgICAgICAgICAgICAgPHRkPjxpbnB1dCB0eXBlPSJudW1iZXIiIHZhbHVlPSIke2l0ZW0uaFBlckdyb3VwfSIgY2xhc3M9ImlucHV0LWlubGluZS1lZHMiIHN0eWxlPSJib3JkZXItY29sb3I6dmFyKC0tYWNjZW50KSIgb25jaGFuZ2U9InVwZEVEUygnJHtsdmx9JywgJHtnbG9iYWxJZHh9LCAnaFBlckdyb3VwJywgdGhpcy52YWx1ZSkiPjwvdGQ+CiAgICAgICAgICAgICAgICAgICAgICAgIDx0ZD48aW5wdXQgdHlwZT0ibnVtYmVyIiBzdGVwPSIwLjAxIiBtaW49IjAuMSIgbWF4PSI1IiB2YWx1ZT0iJHsoaXRlbS5jb2VmIHx8IDEuMCkudG9GaXhlZCgyKX0iIGNsYXNzPSJpbnB1dC1pbmxpbmUtZWRzIiBzdHlsZT0iYm9yZGVyLWNvbG9yOiM4ZTQ0YWQ7IGNvbG9yOiR7Y29lZkNvbG9yfTsgZm9udC13ZWlnaHQ6Ym9sZDsiIHRpdGxlPSJDb2VmZmljaWVudCBkZSBwb25kw6lyYXRpb24gKGV4OiAxLjUgcG91ciBtYWpvcmVyIGRlIDUwJSkiIG9uY2hhbmdlPSJ1cGRFRFMoJyR7bHZsfScsICR7Z2xvYmFsSWR4fSwgJ2NvZWYnLCB0aGlzLnZhbHVlKSI+PC90ZD4KICAgICAgICAgICAgICAgICAgICAgICAgPHRkIGNsYXNzPSIke3JhdGlvQ2xhc3N9IiBzdHlsZT0iZm9udC13ZWlnaHQ6Ym9sZDsgZm9udC1zaXplOjEuMXJlbTsiPiR7cmF0aW9FX0d9PC90ZD4KICAgICAgICAgICAgICAgICAgICAgICAgPHRkPjxzcGFuIGNsYXNzPSJjb3N0LWJhZGdlIj4ke2Nvc3RQZXJTdHVkZW50fSBoL8OpbC48L3NwYW4+PC90ZD4KICAgICAgICAgICAgICAgICAgICAgICAgPHRkIHN0eWxlPSJ2ZXJ0aWNhbC1hbGlnbjptaWRkbGU7IG1pbi13aWR0aDoxNjBweDsiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iZGlzcGxheTpmbGV4O2ZsZXgtd3JhcDp3cmFwO2dhcDoycHg7YWxpZ24taXRlbXM6Y2VudGVyOyI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHt0ZWFjaGVyQ2VsbHN9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD4KICAgICAgICAgICAgICAgICAgICAgICAgPHRkPjxidXR0b24gb25jbGljaz0iZGVsRURTKCcke2x2bH0nLCAke2dsb2JhbElkeH0pIiBzdHlsZT0iYm9yZGVyOm5vbmU7IGJhY2tncm91bmQ6bm9uZTsgY29sb3I6I2MwMzkyYjsgY3Vyc29yOnBvaW50ZXI7IGZvbnQtc2l6ZToxLjJyZW07Ij7DlzwvYnV0dG9uPjwvdGQ+CiAgICAgICAgICAgICAgICAgICAgPC90cj4KICAgICAgICAgICAgICAgIGA7CiAgICAgICAgICAgIH0pOwogICAgICAgIH07CgogICAgICAgIHJlbmRlckl0ZW1zKGdlbkl0ZW1zLCAiRURTIEfDiU7DiVJBVVgiKTsKICAgICAgICByZW5kZXJJdGVtcyh0ZWNoSXRlbXMsICJFRFMgVEVDSE5PTE9HSVFVRVMiKTsKCiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYHRvdGFsLWVkcy0ke2x2bCA9PT0gJ3ByZW1pZXJlJyA/ICcxZXJlJyA6ICd0ZXJtJ31gKS5pbm5lclRleHQgPSBsZXZlbFRvdGFsLnRvRml4ZWQoMSk7CiAgICAgICAgZ2xvYmFsVG90YWwgKz0gbGV2ZWxUb3RhbDsKICAgIH0pOwoKICAgIGlmKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0b3RhbC1lZHMtZ2xvYmFsJykpCiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RvdGFsLWVkcy1nbG9iYWwnKS5pbm5lclRleHQgPSBnbG9iYWxUb3RhbC50b0ZpeGVkKDEpICsgIiBoIjsKCiAgICAvLyBBY3R1YWxpc2VyIGxlIHLDqWNhcGl0dWxhdGlmIGVuc2VpZ25hbnRzCiAgICByZW5kZXJFRFNUZWFjaGVyU3VtbWFyeSgpOwp9CgovKiogTWV0IMOgIGpvdXIgbCdlbnNlaWduYW50IGFzc2lnbsOpIMOgIHVuIGdyb3VwZSBkJ3VuZSBFRFMgKi8KZnVuY3Rpb24gdXBkRURTVGVhY2hlcihsdmwsIGlkeCwgZ3JvdXBJZHgsIHRlYWNoZXJJZCkgewogICAgaWYgKCFEQVRBLmVkc1tsdmxdW2lkeF0udGVhY2hlcnMpIERBVEEuZWRzW2x2bF1baWR4XS50ZWFjaGVycyA9IFtdOwogICAgREFUQS5lZHNbbHZsXVtpZHhdLnRlYWNoZXJzW2dyb3VwSWR4XSA9IHRlYWNoZXJJZDsKICAgIHNhdmVEYXRhKCk7CiAgICByZW5kZXJFRFNUZWFjaGVyU3VtbWFyeSgpOwp9CgovKiogUsOpY2FwaXR1bGF0aWYgZGVzIGVuc2VpZ25hbnRzIEVEUyA6IHVuZSBsaWduZSBwYXIgZW5zZWlnbmFudCBhdmVjIHNlcyBFRFMgKi8KZnVuY3Rpb24gcmVuZGVyRURTVGVhY2hlclN1bW1hcnkoKSB7CiAgICBjb25zdCBkaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZWRzLXRlYWNoZXItc3VtbWFyeScpOwogICAgaWYgKCFkaXYpIHJldHVybjsKCiAgICAvLyBDb25zdHJ1aXJlIG1hcCB0ZWFjaGVySWQg4oaSIHsgbmFtZSwgYXNzaWdubWVudHM6IFt7bHZsLCBlZHMsIGdyb3VwLCBob3Vyc31dIH0KICAgIGNvbnN0IG1hcCA9IHt9OwogICAgWydwcmVtaWVyZScsJ3Rlcm1pbmFsZSddLmZvckVhY2gobHZsID0+IHsKICAgICAgICBjb25zdCBsdmxMYWJlbCA9IGx2bCA9PT0gJ3ByZW1pZXJlJyA/ICcxw6hyZScgOiAnVGVybWluYWxlJzsKICAgICAgICAoREFUQS5lZHNbbHZsXSB8fCBbXSkuZm9yRWFjaChpdGVtID0+IHsKICAgICAgICAgICAgY29uc3QgbmJHID0gaXRlbS5ncm91cHMgfHwgMDsKICAgICAgICAgICAgY29uc3QgaFBHID0gKGl0ZW0uaFBlckdyb3VwIHx8IChsdmwgPT09ICdwcmVtaWVyZScgPyA0IDogNikpICogKHBhcnNlRmxvYXQoaXRlbS5jb2VmKSB8fCAxLjApOwogICAgICAgICAgICAoaXRlbS50ZWFjaGVycyB8fCBbXSkuZm9yRWFjaCgodGlkLCBnKSA9PiB7CiAgICAgICAgICAgICAgICBpZiAoIXRpZCkgcmV0dXJuOwogICAgICAgICAgICAgICAgaWYgKCFtYXBbdGlkXSkgbWFwW3RpZF0gPSB7IGFzc2lnbm1lbnRzOiBbXSB9OwogICAgICAgICAgICAgICAgbWFwW3RpZF0uYXNzaWdubWVudHMucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgbHZsOiBsdmxMYWJlbCwgZWRzOiBpdGVtLm5hbWUsCiAgICAgICAgICAgICAgICAgICAgZ3JvdXA6IG5iRyA+IDEgPyBgR3IuJHtnKzF9YCA6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgaG91cnM6IGhQRwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0pOwogICAgfSk7CgogICAgaWYgKE9iamVjdC5rZXlzKG1hcCkubGVuZ3RoID09PSAwKSB7CiAgICAgICAgZGl2LmlubmVySFRNTCA9ICc8ZW0gc3R5bGU9ImNvbG9yOiNhYWE7Ij5BdWN1biBlbnNlaWduYW50IGFzc2lnbsOpIHBvdXIgbFwnaW5zdGFudC48L2VtPic7CiAgICAgICAgcmV0dXJuOwogICAgfQoKICAgIGxldCBodG1sID0gJzx0YWJsZSBzdHlsZT0id2lkdGg6MTAwJTtib3JkZXItY29sbGFwc2U6Y29sbGFwc2U7Zm9udC1zaXplOjAuODZyZW07Ij4nOwogICAgaHRtbCArPSAnPHRoZWFkPjx0ciBzdHlsZT0iYmFja2dyb3VuZDojNmMzNDgzO2NvbG9yOndoaXRlOyI+JzsKICAgIGh0bWwgKz0gJzx0aCBzdHlsZT0icGFkZGluZzo4cHggMTBweDt0ZXh0LWFsaWduOmxlZnQ7Ij5FbnNlaWduYW50PC90aD4nOwogICAgaHRtbCArPSAnPHRoIHN0eWxlPSJwYWRkaW5nOjhweDt0ZXh0LWFsaWduOmxlZnQ7Ij5EaXNjaXBsaW5lPC90aD4nOwogICAgaHRtbCArPSAnPHRoIHN0eWxlPSJwYWRkaW5nOjhweDt0ZXh0LWFsaWduOmxlZnQ7Ij5FRFMgYXNzaWduw6llczwvdGg+JzsKICAgIGh0bWwgKz0gJzx0aCBzdHlsZT0icGFkZGluZzo4cHg7dGV4dC1hbGlnbjpjZW50ZXI7d2lkdGg6OTBweDsiPlRvdGFsIEVEUyBoPC90aD4nOwogICAgaHRtbCArPSAnPC90cj48L3RoZWFkPjx0Ym9keT4nOwoKICAgIGxldCBpID0gMDsKICAgIGZvciAoY29uc3QgW3RpZCwgZGF0YV0gb2YgT2JqZWN0LmVudHJpZXMobWFwKSkgewogICAgICAgIGNvbnN0IHQgPSBTSEFSRURfVEVBQ0hFUlMuZmluZCh4ID0+IHguaWQgPT09IHRpZCk7CiAgICAgICAgY29uc3QgbmFtZSAgICAgPSB0ID8gdC5uYW1lICAgIDogYElEOiR7dGlkfWA7CiAgICAgICAgY29uc3Qgc3ViamVjdCAgPSB0ID8gKGdldFRlYWNoZXJTdWJqZWN0Rm9yRW50aXR5KHQsIGN1cnJlbnRFbnRpdHkpIHx8ICfigJMnKSA6ICfigJMnOwogICAgICAgIGNvbnN0IHRvdGFsSCAgID0gZGF0YS5hc3NpZ25tZW50cy5yZWR1Y2UoKHMsIGEpID0+IHMgKyBhLmhvdXJzLCAwKTsKICAgICAgICBjb25zdCBiZyA9IGkgJSAyID09PSAwID8gJyNmZGY1ZmYnIDogJ3doaXRlJzsKCiAgICAgICAgY29uc3QgYXNzaWduTGlzdCA9IGRhdGEuYXNzaWdubWVudHMubWFwKGEgPT4KICAgICAgICAgICAgYDxzcGFuIHN0eWxlPSJkaXNwbGF5OmlubGluZS1ibG9jaztiYWNrZ3JvdW5kOiNlOGRhZWY7Y29sb3I6IzZjMzQ4Mztib3JkZXItcmFkaXVzOjEwcHg7cGFkZGluZzoycHggOHB4O21hcmdpbjoycHg7Zm9udC1zaXplOjAuOHJlbTsiPgogICAgICAgICAgICAgICAgJHthLmx2bH0g4oCTICR7YS5lZHN9JHthLmdyb3VwID8gJyAoJyArIGEuZ3JvdXAgKyAnKScgOiAnJ30gwrcgJHthLmhvdXJzfWgKICAgICAgICAgICAgPC9zcGFuPmAKICAgICAgICApLmpvaW4oJycpOwoKICAgICAgICBodG1sICs9IGA8dHIgc3R5bGU9ImJhY2tncm91bmQ6JHtiZ307Ym9yZGVyLWJvdHRvbToxcHggc29saWQgI2YwZTZmYjsiPgogICAgICAgICAgICA8dGQgc3R5bGU9InBhZGRpbmc6OHB4IDEwcHg7Zm9udC13ZWlnaHQ6NzAwO2NvbG9yOiMyYzNlNTA7Ij4ke25hbWV9PC90ZD4KICAgICAgICAgICAgPHRkIHN0eWxlPSJwYWRkaW5nOjhweDtjb2xvcjojN2QzYzk4OyI+JHtzdWJqZWN0fTwvdGQ+CiAgICAgICAgICAgIDx0ZCBzdHlsZT0icGFkZGluZzo4cHg7Ij4ke2Fzc2lnbkxpc3R9PC90ZD4KICAgICAgICAgICAgPHRkIHN0eWxlPSJwYWRkaW5nOjhweDt0ZXh0LWFsaWduOmNlbnRlcjtmb250LXdlaWdodDo4MDA7Y29sb3I6IzZjMzQ4Mztmb250LXNpemU6MXJlbTsiPiR7dG90YWxIfWg8L3RkPgogICAgICAgIDwvdHI+YDsKICAgICAgICBpKys7CiAgICB9CgogICAgaHRtbCArPSAnPC90Ym9keT48L3RhYmxlPic7CiAgICBkaXYuaW5uZXJIVE1MID0gaHRtbDsKfQoKLy8gRk9OQ1RJT04gREUgQkFTQ1VMRU1FTlQgKFRyYW5zZmVydCkKZnVuY3Rpb24gdHJhbnNmZXJFRFMoZnJvbSwgdG8pIHsKICAgIGlmKERBVEEuZWRzW2Zyb21dLmxlbmd0aCA9PT0gMCkgcmV0dXJuIGFsZXJ0KCJSaWVuIMOgIHRyYW5zZsOpcmVyICEiKTsKICAgIGlmKCFjb25maXJtKGBWb3VsZXotdm91cyBjb3BpZXIgbGEgc3RydWN0dXJlIGRlcyBFRFMgZGUgJHtmcm9tfSB2ZXJzICR7dG99ID9cbihMZXMgZWZmZWN0aWZzIHNlcm9udCByZW1pcyDDoCAwLCBtYWlzIGxlcyBncm91cGVzLCBub21zIGV0IGVuc2VpZ25hbnRzIHNlcm9udCBjb25zZXJ2w6lzKWApKSByZXR1cm47CgogICAgREFUQS5lZHNbZnJvbV0uZm9yRWFjaChzb3VyY2UgPT4gewogICAgICAgIGlmKCFEQVRBLmVkc1t0b10uc29tZShlID0+IGUubmFtZSA9PT0gc291cmNlLm5hbWUpKSB7CiAgICAgICAgICAgIERBVEEuZWRzW3RvXS5wdXNoKHsKICAgICAgICAgICAgICAgIG5hbWU6IHNvdXJjZS5uYW1lLAogICAgICAgICAgICAgICAgc3R1ZGVudHM6IDAsCiAgICAgICAgICAgICAgICBncm91cHM6IHNvdXJjZS5ncm91cHMsCiAgICAgICAgICAgICAgICBoUGVyR3JvdXA6ICh0byA9PT0gJ3Rlcm1pbmFsZScgPyA2IDogNCksCiAgICAgICAgICAgICAgICB0ZWFjaGVyczogc291cmNlLnRlYWNoZXJzID8gWy4uLnNvdXJjZS50ZWFjaGVyc10gOiBbXQogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICB9KTsKICAgIHNhdmVEYXRhKCk7CiAgICByZW5kZXJFRFMoKTsKICAgIGFsZXJ0KCLinIUgU3RydWN0dXJlIHRyYW5zZsOpcsOpZSAhIFBlbnNleiDDoCBhanVzdGVyIGxlcyBlZmZlY3RpZnMgZXQgbGVzIHZvbHVtZXMgaG9yYWlyZXMuIik7Cn0KCmZ1bmN0aW9uIHVwZEVEUyhsdmwsIGlkeCwgZmllbGQsIHZhbCkgewogICAgaWYgKGZpZWxkID09PSAnY29lZicpIHsKICAgICAgICBjb25zdCBjID0gcGFyc2VGbG9hdCh2YWwpOwogICAgICAgIERBVEEuZWRzW2x2bF1baWR4XVtmaWVsZF0gPSAoaXNOYU4oYykgfHwgYyA8PSAwKSA/IDEuMCA6IGM7CiAgICB9IGVsc2UgewogICAgICAgIERBVEEuZWRzW2x2bF1baWR4XVtmaWVsZF0gPSBwYXJzZUZsb2F0KHZhbCkgfHwgMDsKICAgIH0KICAgIAogICAgLy8gU3luY2hyb25pc2VyIGxlcyB2b2x1bWVzIHZlcnMgbGEgdmVudGlsYXRpb24KICAgIHN5bmNFZHNUb1ZlbnRpbGF0aW9uKCk7CiAgICAKICAgIHNhdmVEYXRhKCk7CiAgICByZW5kZXJFRFMoKTsKICAgIGNhbGN1bGF0ZVJlY2FwKCk7Cn0KCmZ1bmN0aW9uIGRlbEVEUyhsdmwsIGlkeCkgewogICAgaWYoY29uZmlybSgiU3VwcHJpbWVyIGNldCBlbnNlaWduZW1lbnQgZGUgc3DDqWNpYWxpdMOpID8iKSkgewogICAgICAgIC8vIE9uIHJldGlyZSBsJ8OpbMOpbWVudCBkdSB0YWJsZWF1IGNvcnJlc3BvbmRhbnQgKDFlcmUgb3UgVGVybSkKICAgICAgICBEQVRBLmVkc1tsdmxdLnNwbGljZShpZHgsIDEpOwogICAgICAgIAogICAgICAgIC8vIFNhdXZlZ2FyZGUgZXQgbWlzZSDDoCBqb3VyIGRlIGwnaW50ZXJmYWNlCiAgICAgICAgc2F2ZURhdGEoKTsKICAgICAgICByZW5kZXJFRFMoKTsKICAgICAgICAKICAgICAgICAvLyBPbiBtZXQgw6Agam91ciBsZSBiaWxhbiBnbG9iYWwgcG91ciByZWZsw6l0ZXIgbGEgc3VwcHJlc3Npb24gZGVzIGhldXJlcwogICAgICAgIGNhbGN1bGF0ZVJlY2FwKCk7CiAgICB9Cn0KCmZ1bmN0aW9uIHN5bmNFZHNUb1ZlbnRpbGF0aW9uKCkgewogICAgY29uc3QgbGV2ZWxzID0gWydwcmVtaWVyZScsICd0ZXJtaW5hbGUnXTsKICAgIGxldmVscy5mb3JFYWNoKGx2bEtleSA9PiB7CiAgICAgICAgY29uc3QgcmVhbExldmVsTmFtZSA9IERBVEEuc3RydWN0dXJlLmZpbmQobCA9PiAKICAgICAgICAgICAgbHZsS2V5ID09PSAncHJlbWllcmUnID8gKGwubGV2ZWwuaW5jbHVkZXMoIjEiKSB8fCBsLmxldmVsLmluY2x1ZGVzKCJQcmVtIikpIDogKGwubGV2ZWwuaW5jbHVkZXMoIlRlcm0iKSB8fCBsLmxldmVsLmluY2x1ZGVzKCJUbGUiKSkKICAgICAgICApPy5sZXZlbDsKCiAgICAgICAgaWYgKHJlYWxMZXZlbE5hbWUgJiYgREFUQS5lZHNbbHZsS2V5XSkgewogICAgICAgICAgICBEQVRBLmVkc1tsdmxLZXldLmZvckVhY2goZWRzID0+IHsKICAgICAgICAgICAgICAgIGNvbnN0IGNvZWYgPSBwYXJzZUZsb2F0KGVkcy5jb2VmKSB8fCAxLjA7CiAgICAgICAgICAgICAgICBjb25zdCB0b3RhbEhvdXJzID0gKGVkcy5ncm91cHMgfHwgMCkgKiAoZWRzLmhQZXJHcm91cCB8fCAobHZsS2V5ID09PSAncHJlbWllcmUnID8gNCA6IDYpKSAqIGNvZWY7CiAgICAgICAgICAgICAgICBpZiAoREFUQS5zdWJqZWN0TWV0YVtlZHMubmFtZV0pIHsKICAgICAgICAgICAgICAgICAgICBpZiAoIURBVEEuc3ViamVjdE1ldGFbZWRzLm5hbWVdLnZvbExldmVsKSBEQVRBLnN1YmplY3RNZXRhW2Vkcy5uYW1lXS52b2xMZXZlbCA9IHt9OwogICAgICAgICAgICAgICAgICAgIERBVEEuc3ViamVjdE1ldGFbZWRzLm5hbWVdLnZvbExldmVsW3JlYWxMZXZlbE5hbWVdID0gdG90YWxIb3VyczsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgfQogICAgfSk7Cn0KLy8gQ2hhbmdleiAncHJvZnMnIHBhciAnbWF0aWVyZXMnCmxldCBjdXJyZW50UmVwYXJ0aXRpb25WaWV3ID0gJ21hdGllcmVzJzsgCgpmdW5jdGlvbiBzd2l0Y2hSZXBhcnRpdGlvblZpZXcodmlldykgewogICAgY3VycmVudFJlcGFydGl0aW9uVmlldyA9IHZpZXc7CiAgICAvLyBNaXNlIMOgIGpvdXIgdmlzdWVsbGUgZGVzIGJvdXRvbnMKICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdidG4tdmlldy1yZXBhcnQtcHJvZicpLmNsYXNzTGlzdC50b2dnbGUoJ2FjdGl2ZScsIHZpZXcgPT09ICdwcm9mcycpOwogICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2J0bi12aWV3LXJlcGFydC1tYXQnKS5jbGFzc0xpc3QudG9nZ2xlKCdhY3RpdmUnLCB2aWV3ID09PSAnbWF0aWVyZXMnKTsKICAgIHJlbmRlclJlcGFydGl0aW9uKCk7Cn0KCmZ1bmN0aW9uIHJlbmRlclJlcGFydGl0aW9uKCkgewogICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JlcGFydGl0aW9uLWNvbnRlbnQnKTsKICAgIGlmICghY29udGFpbmVyKSByZXR1cm47CiAgICBjb250YWluZXIuaW5uZXJIVE1MID0gJyc7CgogICAgaWYgKGN1cnJlbnRSZXBhcnRpdGlvblZpZXcgPT09ICdwcm9mcycpIHsKICAgICAgICByZW5kZXJSZXBhcnRpdGlvblByb2ZzKGNvbnRhaW5lcik7CiAgICB9IGVsc2UgewogICAgICAgIHJlbmRlclJlcGFydGl0aW9uTWF0aWVyZXMoY29udGFpbmVyKTsKICAgIH0KfQovLyAtLS0gVlVFIFBBUiBFTlNFSUdOQU5UIChDT1JSSUfDiUUgVjcgOiBEw6lkb3VibG9ubmFnZSBTdHJpY3QgQ2xhc3NlcyB2cyBOaXZlYXUpIC0tLQpmdW5jdGlvbiByZW5kZXJSZXBhcnRpdGlvblByb2ZzKGNvbnRhaW5lcikgewogICAgY2xlYW5Hcm91cEFzc2lnbm1lbnRzKCk7CiAgICAvLyAxLiBSZWdyb3VwZW1lbnQgcGFyIEVuc2VpZ25hbnQKICAgIGNvbnN0IGNvbnNvbGlkYXRlZCA9IHt9OwoKICAgIGdldEVudGl0eVRlYWNoZXJzKCkuZm9yRWFjaCgodCkgPT4gewogICAgICAgIGNvbnN0IGNsZWFuTmFtZSA9IHQubmFtZS50cmltKCk7CiAgICAgICAgaWYoIWNvbnNvbGlkYXRlZFtjbGVhbk5hbWVdKSB7CiAgICAgICAgICAgIGNvbnNvbGlkYXRlZFtjbGVhbk5hbWVdID0geyBuYW1lOiBjbGVhbk5hbWUsIGluZGljZXM6IFtdLCBkYXRhOiBbXSB9OwogICAgICAgIH0KICAgICAgICBjb25zb2xpZGF0ZWRbY2xlYW5OYW1lXS5pbmRpY2VzLnB1c2godC5pZHgpOyAvLyBpbmRleCByw6llbCBkYW5zIFNIQVJFRF9URUFDSEVSUwogICAgICAgIGNvbnNvbGlkYXRlZFtjbGVhbk5hbWVdLmRhdGEucHVzaCh0KTsKICAgIH0pOwoKICAgIC8vIDIuIEfDqW7DqXJhdGlvbiBkZSBsJ2FmZmljaGFnZQogICAgT2JqZWN0LnZhbHVlcyhjb25zb2xpZGF0ZWQpCiAgICAgICAgLnNvcnQoKGEsIGIpID0+IGEubmFtZS5sb2NhbGVDb21wYXJlKGIubmFtZSkpCiAgICAgICAgLmZvckVhY2goZ3JvdXAgPT4gewogICAgICAgICAgICBsZXQgdG90YWxTZXJ2aWNlRmFpdCA9IDA7CiAgICAgICAgICAgIGxldCB0b3RhbER1ID0gMDsKICAgICAgICAgICAgbGV0IHJvd3MgPSBbXTsKCiAgICAgICAgICAgIC8vIEEuIE1hdGnDqHJlIHByaW5jaXBhbGUKICAgICAgICAgICAgbGV0IG1haW5TdWIgPSBncm91cC5kYXRhWzBdLnN1YmplY3Q7CiAgICAgICAgICAgIGdyb3VwLmRhdGEuZm9yRWFjaCh0ID0+IHsKICAgICAgICAgICAgICAgIGNvbnN0IG1ldGEgPSBEQVRBLnN1YmplY3RNZXRhW3Quc3ViamVjdF07CiAgICAgICAgICAgICAgICBjb25zdCBtZXRhTWFpbiA9IERBVEEuc3ViamVjdE1ldGFbbWFpblN1Yl07CiAgICAgICAgICAgICAgICBpZihEQVRBLnN1YmplY3RzLnNvbWUocyA9PiBEQVRBLnN1YmplY3RNZXRhW3NdPy5wYXJlbnQgPT09IHQuc3ViamVjdCkpIG1haW5TdWIgPSB0LnN1YmplY3Q7CiAgICAgICAgICAgICAgICBpZihtZXRhTWFpbj8ucGFyZW50ID09PSB0LnN1YmplY3QpIG1haW5TdWIgPSB0LnN1YmplY3Q7CiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgLy8gQi4gQ2FsY3VsIGR1IHRvdGFsU2VydmljZUZhaXQgdmlhIGNhbGNUZWFjaGVySG91cnNCcmVha2Rvd24KICAgICAgICAgICAgLy8g4oaSIGFwcGxpcXVlIGxlIHBsYWZvbm5lbWVudCByw6lnbGVtZW50YWlyZSAobHljw6llOiBwb25k4omkMWgsIHDDtGxlOiBwb25k4omkT1JTKQogICAgICAgICAgICBsZXQgZ2xvYmFsUmF3ID0gMCwgZ2xvYmFsUG9uZCA9IDA7CiAgICAgICAgICAgIGxldCBnbG9iYWxQb25kQ2FwcGVkID0gZmFsc2UsIGdsb2JhbFBvbmRFeGNlZWRzT1JTID0gZmFsc2U7CiAgICAgICAgICAgIGdyb3VwLmRhdGEuZm9yRWFjaCgodCwgaSkgPT4gewogICAgICAgICAgICAgICAgY29uc3QgcmVhbElkeCA9IGdyb3VwLmluZGljZXNbaV07CiAgICAgICAgICAgICAgICBjb25zdCBjc2QgPSBwYXJzZUZsb2F0KHQuY3NkIHx8IDApOwogICAgICAgICAgICAgICAgdG90YWxEdSArPSAodC5vcnMgLSBjc2QpOwoKICAgICAgICAgICAgICAgIC8vIFV0aWxpc2VyIGxlIG3Dqm1lIGNhbGN1bCBxdWUgbGUgQmlsYW4gQ29uc29saWTDqSAoYXZlYyBwbGFmb25uZW1lbnQpCiAgICAgICAgICAgICAgICBjb25zdCBiZCA9IGNhbGNUZWFjaGVySG91cnNCcmVha2Rvd24ocmVhbElkeCwgY3VycmVudEVudGl0eSk7CiAgICAgICAgICAgICAgICBnbG9iYWxSYXcgICs9IGJkLnJhdzsKICAgICAgICAgICAgICAgIGdsb2JhbFBvbmQgKz0gYmQucG9uZDsKICAgICAgICAgICAgICAgIHRvdGFsU2VydmljZUZhaXQgKz0gYmQud2VpZ2h0ZWQ7CiAgICAgICAgICAgICAgICBpZiAoYmQucG9uZENhcHBlZCkgICAgICBnbG9iYWxQb25kQ2FwcGVkICAgICAgPSB0cnVlOwogICAgICAgICAgICAgICAgaWYgKGJkLnBvbmRFeGNlZWRzT1JTKSAgZ2xvYmFsUG9uZEV4Y2VlZHNPUlMgID0gdHJ1ZTsKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAvLyBDLiBDb25zdHJ1Y3Rpb24gZGVzIGxpZ25lcyB2aXN1ZWxsZXMgKEFGRklDSEFHRSBVTklRVUVNRU5UIC0gc2FucyBtb2RpZmllciB0b3RhbFNlcnZpY2VGYWl0KQogICAgICAgICAgICBncm91cC5kYXRhLmZvckVhY2goKHQsIGkpID0+IHsKICAgICAgICAgICAgICAgIGNvbnN0IHJlYWxJZHggPSBncm91cC5pbmRpY2VzW2ldOwogICAgICAgICAgICAgICAgY29uc3QgZGVjaCA9IChwYXJzZUZsb2F0KHQuZGVjaGFyZ2UgfHwgMCkgKyBwYXJzZUZsb2F0KHQuZGVjaF9leHQgfHwgMCkpOwoKICAgICAgICAgICAgICAgIC8vIC0tLSBTRVQgQU5USS1ET1VCTE9OIC0tLQogICAgICAgICAgICAgICAgbGV0IGxldmVsc1BhaWQgPSBuZXcgU2V0KCk7CgogICAgICAgICAgICAgICAgLy8gUsOpY3Vww6lyYXRpb24gZXQgVFJJIGRlcyBhZmZlY3RhdGlvbnMKICAgICAgICAgICAgICAgIC8vIEluY2x1cmUgbGVzIGNsw6lzIHN0YW5kYXJkIChjSWRfdElkeCkgRVQgbGVzIGNsw6lzIGRlIHNvdXMtbWF0acOocmUgKGNJZF90SWR4fmNoaWxkU3ViKQogICAgICAgICAgICAgICAgY29uc3QgcmVsZXZhbnRLZXlzID0gT2JqZWN0LmtleXMoREFUQS5hc3NpZ25tZW50cykuZmlsdGVyKGtleSA9PiB7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgYmFzZVBhcnQgPSBrZXkuaW5jbHVkZXMoJ34nKSA/IGtleS5zcGxpdCgnficpWzBdIDoga2V5OwogICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhcnRzID0gYmFzZVBhcnQuc3BsaXQoJ18nKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gcGFyc2VJbnQocGFydHNbcGFydHMubGVuZ3RoIC0gMV0pID09PSByZWFsSWR4OwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgY29uc3Qgc29ydGVkS2V5cyA9IHJlbGV2YW50S2V5cy5zb3J0KChhLCBiKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgaWRBID0gYS5zcGxpdCgnXycpWzBdOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IGlkQiA9IGIuc3BsaXQoJ18nKVswXTsKICAgICAgICAgICAgICAgICAgICBjb25zdCBpc0x2bEEgPSBEQVRBLnN0cnVjdHVyZS5zb21lKGwgPT4gbC5sZXZlbCA9PT0gaWRBKSB8fCBpZEEgPT09ICdFVEFCJzsKICAgICAgICAgICAgICAgICAgICBjb25zdCBpc0x2bEIgPSBEQVRBLnN0cnVjdHVyZS5zb21lKGwgPT4gbC5sZXZlbCA9PT0gaWRCKSB8fCBpZEIgPT09ICdFVEFCJzsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXNMdmxCIC0gaXNMdmxBOwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgc29ydGVkS2V5cy5mb3JFYWNoKGtleSA9PiB7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgYXNzaWduID0gREFUQS5hc3NpZ25tZW50c1trZXldOwogICAgICAgICAgICAgICAgICAgIC8vIExlcyBjbMOpcyB+Y2hpbGRTdWIgb250IGxlIGZvcm1hdDogY0lkX3RJZHh+Y2hpbGRTdWIg4oaSIGV4dHJhaXJlIGNJZCBjb3JyZWN0ZW1lbnQKICAgICAgICAgICAgICAgICAgICBjb25zdCBiYXNlS2V5ID0ga2V5LmluY2x1ZGVzKCd+JykgPyBrZXkuc3BsaXQoJ34nKVswXSA6IGtleTsKICAgICAgICAgICAgICAgICAgICBjb25zdCBjaGlsZFN1YkZyb21LZXkgPSBrZXkuaW5jbHVkZXMoJ34nKSA/IGtleS5zcGxpdCgnficpLnNsaWNlKDEpLmpvaW4oJ34nKSA6IG51bGw7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgcGFydHMgPSBiYXNlS2V5LnNwbGl0KCdfJyk7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgZW50aXR5SWQgPSBwYXJ0cy5zbGljZSgwLCBwYXJ0cy5sZW5ndGggLSAxKS5qb2luKCdfJyk7CiAgICAgICAgICAgICAgICAgICAgLy8gUG91ciBsZXMgcHJvZnMgZGUgZ3JvdXBlIDogdXRpbGlzZXIgbGEgc291cy1tYXRpw6hyZSBkZSBsYSBjbMOpIHBvdXIgbGUgY2FsY3VsIGQnaGV1cmVzCiAgICAgICAgICAgICAgICAgICAgY29uc3QgZWZmZWN0aXZlU3ViID0gY2hpbGRTdWJGcm9tS2V5IHx8IHQuc3ViamVjdDsKICAgICAgICAgICAgICAgICAgICBjb25zdCBtZXRhID0gREFUQS5zdWJqZWN0TWV0YVtlZmZlY3RpdmVTdWJdIHx8IERBVEEuc3ViamVjdE1ldGFbdC5zdWJqZWN0XTsKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICBsZXQgcGFyZW50TGV2ZWxOYW1lID0gbnVsbDsKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICBjb25zdCBzdHJ1Y3RMdmxFeGFjdCA9IERBVEEuc3RydWN0dXJlLmZpbmQobCA9PiBsLmxldmVsID09PSBlbnRpdHlJZCk7CiAgICAgICAgICAgICAgICAgICAgaWYgKHN0cnVjdEx2bEV4YWN0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudExldmVsTmFtZSA9IHN0cnVjdEx2bEV4YWN0LmxldmVsOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHN0cnVjdEx2bFByZWZpeCA9IERBVEEuc3RydWN0dXJlLmZpbmQobCA9PiBlbnRpdHlJZC5zdGFydHNXaXRoKGdldExldmVsUHJlZml4KGwubGV2ZWwpKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdHJ1Y3RMdmxQcmVmaXgpIHBhcmVudExldmVsTmFtZSA9IHN0cnVjdEx2bFByZWZpeC5sZXZlbDsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGxldCBoID0gMDsKICAgICAgICAgICAgICAgICAgICBjb25zdCBpc0dyb3VwU3ViamVjdCA9IERBVEEuc3ViamVjdE1ldGFbdC5zdWJqZWN0XT8ubW9kZSA9PT0gJ2dyb3VwJzsKICAgICAgICAgICAgICAgICAgICBpZiAoY2hpbGRTdWJGcm9tS2V5KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vIENsw6kgZGUgc291cy1tYXRpw6hyZSAofmNoaWxkU3ViKSA6IHJlY2FsY3VsZXIgZGVwdWlzIGxhIHNvdXMtbWF0acOocmUgc3DDqWNpZmlxdWUKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBhcmVudExldmVsTmFtZSkgaCA9IGdldEhvdXJzRm9yQ2xhc3NTdWJqZWN0KGVudGl0eUlkLCBwYXJlbnRMZXZlbE5hbWUsIGNoaWxkU3ViRnJvbUtleSk7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChpc0dyb3VwU3ViamVjdCkgewogICAgICAgICAgICAgICAgICAgICAgICAvLyBHcm91cGUgc2FucyBjbMOpIHNww6ljaWZpcXVlIDogc29tbWUgZGUgdG91dGVzIGxlcyBzb3VzLW1hdGnDqHJlcwogICAgICAgICAgICAgICAgICAgICAgICBpZiAocGFyZW50TGV2ZWxOYW1lKSBoID0gZ2V0SG91cnNGb3JDbGFzc1N1YmplY3QoZW50aXR5SWQsIHBhcmVudExldmVsTmFtZSwgdC5zdWJqZWN0KTsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYoYXNzaWduLnF1b3RhICE9PSB1bmRlZmluZWQgJiYgYXNzaWduLnF1b3RhICE9PSBudWxsKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGggPSBwYXJzZUZsb2F0KGFzc2lnbi5xdW90YSk7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmKHBhcmVudExldmVsTmFtZSkgewogICAgICAgICAgICAgICAgICAgICAgICBoID0gZ2V0SG91cnNGb3JDbGFzc1N1YmplY3QoZW50aXR5SWQsIHBhcmVudExldmVsTmFtZSwgdC5zdWJqZWN0KTsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGxldCBsZXZlbENvZWYgPSAxLjA7CiAgICAgICAgICAgICAgICAgICAgbGV0IGNmZ0RlbWkgPSAwOyAvLyBoZXVyZXMgZGVtaS1jbGFzc2UgcG91ciBhZmZpY2hhZ2UgWCsoWSkKICAgICAgICAgICAgICAgICAgICBpZiAocGFyZW50TGV2ZWxOYW1lICYmIERBVEEubGV2ZWxDb25maWcgJiYgREFUQS5sZXZlbENvbmZpZ1twYXJlbnRMZXZlbE5hbWVdKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGxjID0gREFUQS5sZXZlbENvbmZpZ1twYXJlbnRMZXZlbE5hbWVdOwogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBlbnRpdHlTdWJqID0gZ2V0VGVhY2hlclN1YmplY3RGb3JFbnRpdHkodCwgY3VycmVudEVudGl0eSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNmZ1N1YmogPSBsY1tlbnRpdHlTdWJqXSB8fCBsY1t0LnN1YmplY3RdIHx8IE9iamVjdC52YWx1ZXMobGMpWzBdOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2ZnU3ViaiAmJiBjZmdTdWJqLmNvZWYgIT09IHVuZGVmaW5lZCkgbGV2ZWxDb2VmID0gcGFyc2VGbG9hdChjZmdTdWJqLmNvZWYpIHx8IDEuMDsKICAgICAgICAgICAgICAgICAgICAgICAgLy8gUsOpY3Vww6lyZXIgZGVtaSBwb3VyIG5vdGF0aW9uIFgrKFkpCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNmZ1JhdyA9IChEQVRBLmNsYXNzT3ZlcnJpZGVzPy5bZW50aXR5SWRdPy5bZW50aXR5U3ViaiB8fCB0LnN1YmplY3RdKSAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfHwgbGNbZW50aXR5U3Vial0gfHwgbGNbdC5zdWJqZWN0XTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNmZ1JhdykgY2ZnRGVtaSA9IHBhcnNlRmxvYXQoY2ZnUmF3LmRlbWkpIHx8IDA7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIC8vIGhSYXcgPSBoZXVyZXMgYnJ1dGVzIGRldmFudCDDqWzDqHZlcyAoaCBlc3QgZMOpasOgIHBvbmTDqXLDqSBzaSBjb2VmID4gMSkKICAgICAgICAgICAgICAgICAgICBjb25zdCBoUmF3ID0gbGV2ZWxDb2VmID4gMS4wMSA/IE1hdGgucm91bmQoaCAvIGxldmVsQ29lZiAqIDEwKSAvIDEwIDogaDsKICAgICAgICAgICAgICAgICAgICAvLyBMYWJlbCB2b2x1bWUgYnJ1dCBkZXZhbnQgw6lsw6h2ZXMgYXZlYyBub3RhdGlvbiBkZW1pLWNsYXNzZSBzaSBhcHBsaWNhYmxlCiAgICAgICAgICAgICAgICAgICAgY29uc3QgaEJhc2UgPSBsZXZlbENvZWYgPiAxLjAxID8gaFJhdyA6IGg7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmF3Vm9sdW1lTGFiZWwgPSBjZmdEZW1pID4gMAogICAgICAgICAgICAgICAgICAgICAgICA/IGAkeyhoQmFzZSAtIDIqY2ZnRGVtaSoobGV2ZWxDb2VmID4gMS4wMSA/IDEgOiAxKSkudG9GaXhlZCgxKX0rKCR7Y2ZnRGVtaS50b0ZpeGVkKDEpfSlgCiAgICAgICAgICAgICAgICAgICAgICAgIDogbnVsbDsKCiAgICAgICAgICAgICAgICAgICAgaWYoaCA+IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGxhYmVsID0gREFUQS5jbGFzc05hbWVzW2VudGl0eUlkXSB8fCBlbnRpdHlJZDsKICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHR5cGVCYWRnZSA9ICJDbC4iOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZW50aXR5SWQgPT09ICdFVEFCJykgeyBsYWJlbCA9ICJGb3JmYWl0IEdsb2JhbCI7IHR5cGVCYWRnZSA9ICJFdGFiIjsgfQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChzdHJ1Y3RMdmxFeGFjdCkgeyB0eXBlQmFkZ2UgPSAiTml2IjsgfQoKICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGlzSW5jbHVkZWQgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1ldGEgJiYgbWV0YS5tb2RlID09PSAnbGV2ZWwnICYmIHBhcmVudExldmVsTmFtZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGxldmVsc1BhaWQuaGFzKHBhcmVudExldmVsTmFtZSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc0luY2x1ZGVkID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV2ZWxzUGFpZC5hZGQocGFyZW50TGV2ZWxOYW1lKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgaWYodHlwZUJhZGdlID09PSAiQ2wuIiAmJiBhc3NpZ24ubW9kZSA9PT0gJ0dST1VQJykgdHlwZUJhZGdlID0gIlB0ZyI7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vIExhYmVsIDogcG91ciBjbMOpIH5jaGlsZFN1YiwgYWZmaWNoZXIgbGUgbm9tIGRlIGxhIHNvdXMtbWF0acOocmUKICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGxhYmVsU3ViID0gJyc7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjaGlsZFN1YkZyb21LZXkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsU3ViID0gYDxicj48c21hbGwgc3R5bGU9ImNvbG9yOiM4ZTQ0YWQ7IGZvbnQtd2VpZ2h0OmJvbGQ7Ij4ke2NoaWxkU3ViRnJvbUtleX08L3NtYWxsPmA7CiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodC5zdWJqZWN0ICE9PSBtYWluU3ViKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbFN1YiA9IGA8YnI+PHNtYWxsIHN0eWxlPSJjb2xvcjojZTY3ZTIyOyBmb250LXdlaWdodDpib2xkOyI+JHt0LnN1YmplY3R9PC9zbWFsbD5gOwogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICBsZXQgZGlzcGxheUhvdXJzOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNJbmNsdWRlZCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheUhvdXJzID0gYDxzcGFuIHN0eWxlPSJjb2xvcjojYmRjM2M3OyBmb250LXNpemU6MC44cmVtOyI+KEluY2wuKTwvc3Bhbj5gOwogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQWZmaWNoZXIgVU5JUVVFTUVOVCBsZXMgaGV1cmVzIGRldmFudCDDqWzDqHZlcyAobm90YXRpb24gWCsoWSkgc2kgZGVtaS1jbGFzc2UpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmF3Vm9sdW1lTGFiZWwpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5SG91cnMgPSBgPHNwYW4gc3R5bGU9ImZvbnQtc2l6ZTowLjgycmVtO2NvbG9yOiMyYzNlNTA7Ij4ke3Jhd1ZvbHVtZUxhYmVsfTwvc3Bhbj49PGI+JHtoUmF3LnRvRml4ZWQoMSl9aDwvYj5gOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5SG91cnMgPSBgPGI+JHtoUmF3LnRvRml4ZWQoMSl9aDwvYj5gOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICBsZXQgc3R5bGVDZWxsID0gIiI7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc0luY2x1ZGVkKSBzdHlsZUNlbGwgPSAiYmFja2dyb3VuZDojZjRmNmY2OyBjb2xvcjojOTVhNWE2OyBib3JkZXI6MXB4IGRhc2hlZCAjYmRjM2M3OyI7CiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHR5cGVCYWRnZSA9PT0gIk5pdiIgfHwgdHlwZUJhZGdlID09PSAiRXRhYiIpIHN0eWxlQ2VsbCA9ICJiYWNrZ3JvdW5kOiNmZmZjZjU7IGJvcmRlci1ib3R0b206MnB4IHNvbGlkICNmMWM0MGY7IjsKICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAobGV2ZWxDb2VmID4gMS4wMSkgc3R5bGVDZWxsID0gImJhY2tncm91bmQ6I2ZkZjVmZjsgYm9yZGVyLWJvdHRvbToycHggc29saWQgIzhlNDRhZDsiOwoKICAgICAgICAgICAgICAgICAgICAgICAgcm93cy5wdXNoKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzRGVjaDogZmFsc2UsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc01haW46ICh0LnN1YmplY3QgPT09IG1haW5TdWIpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNJbmNsdWRlZDogaXNJbmNsdWRlZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzRWRzOiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudExldmVsOiBwYXJlbnRMZXZlbE5hbWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbnRpdHlJZDogZW50aXR5SWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBodG1sOiBgPHRkIHN0eWxlPSIke3N0eWxlQ2VsbH0iPjxiPiR7bGFiZWx9PC9iPiR7bGFiZWxTdWJ9PGJyPiR7ZGlzcGxheUhvdXJzfSA8c21hbGwgc3R5bGU9ImNvbG9yOiM5OTk7Ij4oJHt0eXBlQmFkZ2V9KTwvc21hbGw+PC90ZD5gCiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgIC8vIETDqWNoYXJnZXMgKHZpc3VlbGxlcyB1bmlxdWVtZW50KQogICAgICAgICAgICAgICAgaWYoZGVjaCA+IDApIHsKICAgICAgICAgICAgICAgICAgICByb3dzLnB1c2goeyBpc0RlY2g6IHRydWUsIGh0bWw6IGA8dGQgc3R5bGU9ImNvbG9yOiM4ZTQ0YWQ7IGJhY2tncm91bmQ6I2Y0ZWNmNzsiPjxpPkTDqWNoYXJnZXM8L2k+PGJyPiR7ZGVjaC50b0ZpeGVkKDEpfWg8L3RkPmAgfSk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgLy8gRURTIGFzc2lnbsOpZXMgw6AgY2V0IGVuc2VpZ25hbnQKICAgICAgICAgICAgICAgIGlmIChEQVRBLmVkcykgewogICAgICAgICAgICAgICAgICAgIFsncHJlbWllcmUnLCAndGVybWluYWxlJ10uZm9yRWFjaChsdmwgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAoREFUQS5lZHNbbHZsXSB8fCBbXSkuZm9yRWFjaChlZHMgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFlZHMudGVhY2hlcnMpIHJldHVybjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVkcy50ZWFjaGVycy5mb3JFYWNoKCh0aWQsIGdyb3VwSWR4KSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRpZCAhPT0gdC5pZCkgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvZWYgPSBwYXJzZUZsb2F0KGVkcy5jb2VmKSB8fCAxLjA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaFBHID0gKHBhcnNlRmxvYXQoZWRzLmhQZXJHcm91cCkgfHwgKGx2bCA9PT0gJ3ByZW1pZXJlJyA/IDQgOiA2KSkgKiBjb2VmOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGx2bExhYmVsID0gbHZsID09PSAncHJlbWllcmUnID8gJzHDqHJlJyA6ICdUZXJtaW5hbGUnOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5iRyA9IGVkcy5ncm91cHMgfHwgMTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBncnBMYWJlbCA9IG5iRyA+IDEgPyBgIEdyLiR7Z3JvdXBJZHggKyAxfWAgOiAnJzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjb2VmTGFiZWwgPSBjb2VmICE9PSAxLjAgPyBgIMOXJHtjb2VmLnRvRml4ZWQoMil9YCA6ICcnOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIChFRFMgaW5jbHVzZXMgZGFucyBjYWxjVGVhY2hlckhvdXJzQnJlYWtkb3duIC0gcGFzIGQnYWpvdXQgaWNpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvd3MucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzRGVjaDogZmFsc2UsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzRWRzOiB0cnVlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc01haW46IGZhbHNlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc0luY2x1ZGVkOiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50TGV2ZWw6IGx2bCA9PT0gJ3ByZW1pZXJlJyA/ICcxw6hyZScgOiAnVGVybWluYWxlJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW50aXR5SWQ6IGx2bCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaHRtbDogYDx0ZCBzdHlsZT0iYmFja2dyb3VuZDojZjVlZWY4OyBib3JkZXItYm90dG9tOjJweCBzb2xpZCAjOGU0NGFkOyI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YiBzdHlsZT0iY29sb3I6IzZjMzQ4MzsiPiR7ZWRzLm5hbWV9PC9iPjxicj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIHN0eWxlPSJmb250LXNpemU6MC43OHJlbTsgY29sb3I6IzhlNDRhZDsiPiR7bHZsTGFiZWx9JHtncnBMYWJlbH0ke2NvZWZMYWJlbH08L3NwYW4+PGJyPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gc3R5bGU9ImZvbnQtd2VpZ2h0OjcwMDsiPiR7aFBHLnRvRml4ZWQoMSl9aDwvc3Bhbj4gPHNtYWxsIHN0eWxlPSJjb2xvcjojOTk5OyI+KEVEUyk8L3NtYWxsPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RkPmAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAvLyBPcmRyZSBww6lkYWdvZ2lxdWUgOiBjb2xsw6hnZSA24oaSMywgbHljw6llL0xQIDJuZGXihpIxw6hyZeKGklRlcm0sIHDDtGxlL0JUUy9DUEdFIGFwcsOocwogICAgICAgICAgICBjb25zdCBMRVZFTF9PUkRFUiA9IFsKICAgICAgICAgICAgICAgICc2w6htZScsJzYnLCc2ZScsJzZFJywKICAgICAgICAgICAgICAgICc1w6htZScsJzUnLCc1ZScsJzVFJywKICAgICAgICAgICAgICAgICc0w6htZScsJzQnLCc0ZScsJzRFJywKICAgICAgICAgICAgICAgICczw6htZScsJzMnLCczZScsJzNFJywKICAgICAgICAgICAgICAgICcybmRlJywnMm5kZSBwcm8nLCdzZWNvbmRlJywnMicsCiAgICAgICAgICAgICAgICAnMcOocmUnLCdwcmVtacOocmUnLCcxZXJlJywnMScsJ0NBUCAxJywKICAgICAgICAgICAgICAgICd0ZXJtaW5hbGUnLCd0ZXJtJywndGxlJywnVCcsJ0NBUCAyJwogICAgICAgICAgICBdOwoKICAgICAgICAgICAgZnVuY3Rpb24gbGV2ZWxTb3J0S2V5KHJvdykgewogICAgICAgICAgICAgICAgaWYgKHJvdy5pc0RlY2gpIHJldHVybiA5MDAwOyAvLyBEw6ljaGFyZ2VzIHRvdXQgw6AgbGEgZmluCiAgICAgICAgICAgICAgICBjb25zdCBsdmwgPSAocm93LnBhcmVudExldmVsIHx8IHJvdy5lbnRpdHlJZCB8fCAnJykudG9Mb3dlckNhc2UoKS50cmltKCk7CiAgICAgICAgICAgICAgICAvLyBSZWNoZXJjaGUgZGFucyBMRVZFTF9PUkRFUgogICAgICAgICAgICAgICAgY29uc3QgaWR4ID0gTEVWRUxfT1JERVIuZmluZEluZGV4KGsgPT4gewogICAgICAgICAgICAgICAgICAgIGNvbnN0IGtsID0gay50b0xvd2VyQ2FzZSgpOwogICAgICAgICAgICAgICAgICAgIHJldHVybiBsdmwgPT09IGtsIHx8IGx2bC5zdGFydHNXaXRoKGtsKSB8fCBrbC5zdGFydHNXaXRoKGx2bCk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIGlmIChpZHggPj0gMCkgcmV0dXJuIGlkeCAqIDEwICsgKHJvdy5pc0VkcyA/IDEgOiAwKTsgLy8gRURTIGR1IG3Dqm1lIG5pdmVhdSBqdXN0ZSBhcHLDqHMgVEMKICAgICAgICAgICAgICAgIC8vIE5pdmVhdSBwYXMgZGFucyBsYSBsaXN0ZSDihpIgY2hlcmNoZSBkYW5zIERBVEEuc3RydWN0dXJlCiAgICAgICAgICAgICAgICBjb25zdCBzSWR4ID0gREFUQS5zdHJ1Y3R1cmUuZmluZEluZGV4KGwgPT4gewogICAgICAgICAgICAgICAgICAgIGNvbnN0IGxsID0gbC5sZXZlbC50b0xvd2VyQ2FzZSgpOwogICAgICAgICAgICAgICAgICAgIHJldHVybiBsdmwgPT09IGxsIHx8IGx2bC5zdGFydHNXaXRoKGxsLnJlcGxhY2UoL1teMC05YS16XS9nLCcnKSk7IAogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBpZiAoc0lkeCA+PSAwKSByZXR1cm4gNTAwICsgc0lkeCAqIDEwICsgKHJvdy5pc0VkcyA/IDEgOiAwKTsKICAgICAgICAgICAgICAgIC8vIE5pdmVhdXggc3DDqWNpYXV4IChCVFMsIENQR0UsIEVUQULigKYpCiAgICAgICAgICAgICAgICBpZiAocm93LmVudGl0eUlkID09PSAnRVRBQicpIHJldHVybiA4MDAwOwogICAgICAgICAgICAgICAgcmV0dXJuIDcwMDAgKyAocm93LmlzRWRzID8gMSA6IDApOwogICAgICAgICAgICB9CgogICAgICAgICAgICAvLyBUcmkgZmluYWwgOiBwYXIgbml2ZWF1IHDDqWRhZ29naXF1ZSwgcHVpcyBJbmNsdXMgw6AgbGEgZmluIGRlIGxldXIgZ3JvdXBlCiAgICAgICAgICAgIHJvd3Muc29ydCgoYSwgYikgPT4gewogICAgICAgICAgICAgICAgY29uc3Qga2EgPSBsZXZlbFNvcnRLZXkoYSkgKyAoYS5pc0luY2x1ZGVkID8gMC41IDogMCk7CiAgICAgICAgICAgICAgICBjb25zdCBrYiA9IGxldmVsU29ydEtleShiKSArIChiLmlzSW5jbHVkZWQgPyAwLjUgOiAwKTsKICAgICAgICAgICAgICAgIHJldHVybiBrYSAtIGtiOwogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIGNvbnN0IHNvbGRlID0gdG90YWxTZXJ2aWNlRmFpdCAtIHRvdGFsRHU7CiAgICAgICAgICAgIGNvbnN0IGlzT2sgPSBzb2xkZSA+PSAtMC4xOwogICAgICAgICAgICBjb25zdCBjb2xvciA9IGlzT2sgPyAnIzI3YWU2MCcgOiAnI2MwMzkyYic7CiAgICAgICAgICAgIGNvbnN0IGJnID0gaXNPayA/ICcjZThmOGY1JyA6ICcjZmRlZGVjJzsKCiAgICAgICAgICAgIC8vIEZvcm1hdGFnZSBiYW5kZWF1IGRyb2l0IDogcmF3VG90YWwrcG9uZFRvdGFsPXRvdGFsIC8gT1JTCiAgICAgICAgICAgIC8vIFNpIHBvbmTDqXJhdGlvbiBwbGFmb25uw6llIDogbGUgK1hoIGVuIGdyYXMvY291bGV1ciBhdmVydGlzc2VtZW50CiAgICAgICAgICAgIGxldCBzZXJ2aWNlRGlzcGxheTsKICAgICAgICAgICAgaWYgKGdsb2JhbFBvbmQgPiAwLjAxKSB7CiAgICAgICAgICAgICAgICBjb25zdCBwb25kU3R5bGUgPSBnbG9iYWxQb25kQ2FwcGVkCiAgICAgICAgICAgICAgICAgICAgPyAnZm9udC13ZWlnaHQ6OTAwOyBjb2xvcjojZTY3ZTIyOycKICAgICAgICAgICAgICAgICAgICA6IChnbG9iYWxQb25kRXhjZWVkc09SUyA/ICdmb250LXdlaWdodDo5MDA7IGNvbG9yOiM4ZTQ0YWQ7JyA6ICdjb2xvcjojOGU0NGFkOycpOwogICAgICAgICAgICAgICAgc2VydmljZURpc3BsYXkgPSBgPHNwYW4gc3R5bGU9ImZvbnQtc2l6ZTowLjg4cmVtO2NvbG9yOiM3ZjhjOGQ7Zm9udC13ZWlnaHQ6NDAwOyI+JHtnbG9iYWxSYXcudG9GaXhlZCgxKX1oPHNwYW4gc3R5bGU9ImNvbG9yOiNjY2M7Ij4rPC9zcGFuPjxzcGFuIHN0eWxlPSIke3BvbmRTdHlsZX0iPiR7Z2xvYmFsUG9uZC50b0ZpeGVkKDEpfWg8L3NwYW4+PTwvc3Bhbj48c3BhbiBzdHlsZT0iZm9udC13ZWlnaHQ6ODAwOyBmb250LXNpemU6MS4xcmVtOyBjb2xvcjojMmMzZTUwOyI+JHt0b3RhbFNlcnZpY2VGYWl0LnRvRml4ZWQoMSl9aDwvc3Bhbj5gOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgc2VydmljZURpc3BsYXkgPSBgPHNwYW4gc3R5bGU9ImZvbnQtd2VpZ2h0OjgwMDsgZm9udC1zaXplOjEuMXJlbTsgY29sb3I6IzJjM2U1MDsiPiR7dG90YWxTZXJ2aWNlRmFpdC50b0ZpeGVkKDEpfWg8L3NwYW4+YDsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgY29uc3Qgb3JzRGlzcGxheSA9IGA8c3BhbiBzdHlsZT0iZm9udC1zaXplOjAuOXJlbTsgY29sb3I6Izk5OTsgZm9udC13ZWlnaHQ6bm9ybWFsOyI+IC8gJHt0b3RhbER1LnRvRml4ZWQoMSl9IGg8L3NwYW4+YDsKCiAgICAgICAgICAgIGNvbnRhaW5lci5pbm5lckhUTUwgKz0gYAogICAgICAgICAgICA8ZGl2IGNsYXNzPSJjYXJkIiBzdHlsZT0iYm9yZGVyLWxlZnQ6IDVweCBzb2xpZCAke2NvbG9yfTsgbWFyZ2luLWJvdHRvbTogMTBweDsgcGFkZGluZzogMTVweDsiPgogICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iZGlzcGxheTpmbGV4OyBqdXN0aWZ5LWNvbnRlbnQ6c3BhY2UtYmV0d2VlbjsgYWxpZ24taXRlbXM6Y2VudGVyOyI+CiAgICAgICAgICAgICAgICAgICAgPGg0IHN0eWxlPSJtYXJnaW46MDsgY29sb3I6IzJjM2U1MDsiPgogICAgICAgICAgICAgICAgICAgICAgICAke2dyb3VwLm5hbWV9IAogICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBzdHlsZT0iZm9udC13ZWlnaHQ6bm9ybWFsOyBmb250LXNpemU6MC45cmVtOyBjb2xvcjojN2Y4YzhkOyBtYXJnaW4tbGVmdDo1cHg7Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICR7bWFpblN1Yn0gJHtncm91cC5kYXRhLmxlbmd0aCA+IDEgPyAnKCsgT3B0aW9ucyknIDogJyd9CiAgICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj4KICAgICAgICAgICAgICAgICAgICA8L2g0PgogICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9ImRpc3BsYXk6ZmxleDsgYWxpZ24taXRlbXM6Y2VudGVyOyBnYXA6MTBweDsiPgogICAgICAgICAgICAgICAgICAgICAgICA8c3Bhbj4ke3NlcnZpY2VEaXNwbGF5fSR7b3JzRGlzcGxheX08L3NwYW4+CiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIHN0eWxlPSJwYWRkaW5nOjJweCA4cHg7IGJvcmRlci1yYWRpdXM6NHB4OyBiYWNrZ3JvdW5kOiR7Ymd9OyBjb2xvcjoke2NvbG9yfTsgZm9udC13ZWlnaHQ6Ym9sZDsgZm9udC1zaXplOjAuOXJlbTsiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgJHtzb2xkZSA+IDAgPyAnKycgOiAnJ30ke3NvbGRlLnRvRml4ZWQoMSl9CiAgICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj4KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0ibWFyZ2luLXRvcDoxMnB4OyBvdmVyZmxvdy14OmF1dG87Ij4KICAgICAgICAgICAgICAgICAgICA8dGFibGUgc3R5bGU9ImZvbnQtc2l6ZTowLjg1cmVtOyB3aWR0aDphdXRvOyI+CiAgICAgICAgICAgICAgICAgICAgICAgIDx0ciBzdHlsZT0iYmFja2dyb3VuZDojZjhmOWZhOyBib3JkZXItcmFkaXVzOjRweDsiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgJHtyb3dzLmxlbmd0aCA+IDAgPyByb3dzLm1hcChyID0+IHIuaHRtbCkuam9pbignJykgOiAnPHRkIHN0eWxlPSJmb250LXN0eWxlOml0YWxpYzsgY29sb3I6I2MwMzkyYjsgcGFkZGluZzo1cHg7IGZvbnQtd2VpZ2h0OmJvbGQ7Ij7imqDvuI8gQXVjdW4gc2VydmljZSBzYWlzaTwvdGQ+J30KICAgICAgICAgICAgICAgICAgICAgICAgPC90cj4KICAgICAgICAgICAgICAgICAgICA8L3RhYmxlPgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDwvZGl2PmA7CiAgICAgICAgfSk7Cn0KCmZ1bmN0aW9uIHJlbmRlclJlcGFydGl0aW9uTWF0aWVyZXMoY29udGFpbmVyKSB7CiAgICBjb250YWluZXIuaW5uZXJIVE1MID0gJyc7CiAgICAKICAgIC8vIENvcnJlY3Rpb24gcHLDqXZlbnRpdmUgZGVzIGRvbm7DqWVzCiAgICBjaGVja0FuZEZpeERhdGEoKTsKCiAgICAvLyBPbiByw6ljdXDDqHJlIGxlcyBtYXRpw6hyZXMgcmFjaW5lcyAoUMO0bGVzKQogICAgY29uc3Qgcm9vdHMgPSBEQVRBLnN1YmplY3RzLmZpbHRlcihzID0+ICFEQVRBLnN1YmplY3RNZXRhW3NdPy5wYXJlbnQpLnNvcnQoKTsKCiAgICByb290cy5mb3JFYWNoKHJvb3QgPT4gewogICAgICAgIGNvbnN0IHN1YmplY3RzSW5Qb2xlID0gW3Jvb3QsIC4uLkRBVEEuc3ViamVjdHMuZmlsdGVyKHMgPT4gREFUQS5zdWJqZWN0TWV0YVtzXT8ucGFyZW50ID09PSByb290KV07CiAgICAgICAgCiAgICAgICAgLy8gQ3LDqWF0aW9uIGRlIGxhIGNhcnRlIGR1IFDDtGxlCiAgICAgICAgbGV0IHBvbGVIVE1MID0gYDxkaXYgY2xhc3M9ImNhcmQiIHN0eWxlPSJvdmVyZmxvdy14OmF1dG87IG1hcmdpbi1ib3R0b206MzBweDsgYm9yZGVyLXRvcDogNHB4IHNvbGlkICM0NTVhNjQ7Ij4KICAgICAgICAgICAgICAgICAgICAgICAgPGgzIHN0eWxlPSJjb2xvcjojNDU1YTY0OyBtYXJnaW4tYm90dG9tOjIwcHg7Ij7wn5OmIFDDtGxlICR7cm9vdC50b1VwcGVyQ2FzZSgpfTwvaDM+YDsKCiAgICAgICAgc3ViamVjdHNJblBvbGUuZm9yRWFjaChzdWIgPT4gewogICAgICAgICAgICBjb25zdCBtZXRhID0gREFUQS5zdWJqZWN0TWV0YVtzdWJdOwogICAgICAgICAgICBpZiAoIW1ldGEpIHJldHVybjsKICAgICAgICAgICAgCiAgICAgICAgICAgIC8vIC0tLSAxLiBEw4lURUNUSU9OIERVIFRZUEUgREUgTUFUScOIUkUgKExBQk8gPykgLS0tCiAgICAgICAgICAgIGNvbnN0IGlzTGFibyA9IChtZXRhLmNvZGUgPT09ICdMQUInICYmIG1ldGEucGFyZW50KTsKCiAgICAgICAgICAgIC8vIC0tLSAyLiBSw4lDVVDDiVJBVElPTiBERVMgUFJPRlMgKE1pc2Ugw6Agam91ciBDby1pbnRlcnZlbnRpb24pIC0tLQogICAgICAgICAgICBsZXQgcHJvZnMgPSBbXTsKICAgICAgICAgICAgCiAgICAgICAgICAgIGlmIChpc0xhYm8pIHsKICAgICAgICAgICAgICAgIC8vIENBUyBMQUJPIDogT24gcHJlbmQgbGVzIHByb2ZzIGRlIGxhIG1hdGnDqHJlIFBBUkVOVEUKICAgICAgICAgICAgICAgIHByb2ZzID0gZ2V0RW50aXR5VGVhY2hlcnMoKQogICAgICAgICAgICAgICAgICAgIC5maWx0ZXIodCA9PiB0LnN1YmplY3QgPT09IG1ldGEucGFyZW50KTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIC8vIENBUyBTVEFOREFSRCA6IFRpdHVsYWlyZXMgKyBJbnZpdMOpcyAoQ28taW50ZXJ2ZW50aW9uKQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAvLyBBLiBQcm9mcyB0aXR1bGFpcmVzIGRlIGxhIG1hdGnDqHJlCiAgICAgICAgICAgICAgICBjb25zdCBtYWluUHJvZnMgPSBnZXRFbnRpdHlUZWFjaGVycygpCiAgICAgICAgICAgICAgICAgICAgLmZpbHRlcih0ID0+IHQuc3ViamVjdCA9PT0gc3ViKTsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgLy8gQTIuIFByb2ZzIGFzc2lnbsOpcyDDoCBsYSBzdXItbWF0acOocmUgcGFyZW50ZSAoZ3JvdXBlKSDigJQgaMOpcml0ZW50IHN1ciB0b3V0ZXMgbGVzIHNvdXMtbWF0acOocmVzCiAgICAgICAgICAgICAgICBjb25zdCBwYXJlbnRHcm91cCA9IG1ldGEucGFyZW50ICYmIERBVEEuc3ViamVjdE1ldGFbbWV0YS5wYXJlbnRdPy5tb2RlID09PSAnZ3JvdXAnID8gbWV0YS5wYXJlbnQgOiBudWxsOwogICAgICAgICAgICAgICAgY29uc3QgZ3JvdXBQcm9mcyA9IHBhcmVudEdyb3VwCiAgICAgICAgICAgICAgICAgICAgPyBnZXRFbnRpdHlUZWFjaGVycygpLmZpbHRlcih0ID0+IHQuc3ViamVjdCA9PT0gcGFyZW50R3JvdXApCiAgICAgICAgICAgICAgICAgICAgOiBbXTsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgLy8gQi4gUHJvZnMgImludml0w6lzIiB2aWEgbGVzIGRpc2NpcGxpbmVzIGFzc29jacOpZXMKICAgICAgICAgICAgICAgIGxldCBndWVzdFByb2ZzID0gW107CiAgICAgICAgICAgICAgICBpZiAobWV0YS5saW5rZWRTdWJqZWN0cyAmJiBtZXRhLmxpbmtlZFN1YmplY3RzLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICAgICAgICBndWVzdFByb2ZzID0gZ2V0RW50aXR5VGVhY2hlcnMoKQogICAgICAgICAgICAgICAgICAgICAgICAuZmlsdGVyKHQgPT4gbWV0YS5saW5rZWRTdWJqZWN0cy5pbmNsdWRlcyh0LnN1YmplY3QpKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAvLyBDLiBGdXNpb24gZXQgVHJpICjDqXZpdGVyIGRvdWJsb25zKQogICAgICAgICAgICAgICAgY29uc3Qgc2VlbklkeCA9IG5ldyBTZXQoKTsKICAgICAgICAgICAgICAgIHByb2ZzID0gWy4uLm1haW5Qcm9mcywgLi4uZ3JvdXBQcm9mcywgLi4uZ3Vlc3RQcm9mc10uZmlsdGVyKHAgPT4gewogICAgICAgICAgICAgICAgICAgIGlmIChzZWVuSWR4LmhhcyhwLmlkeCkpIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgICAgICAgICBzZWVuSWR4LmFkZChwLmlkeCk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgLy8gRC4gVHJpIGFscGhhYsOpdGlxdWUgcG91ciB1biBhZmZpY2hhZ2UgcHJvcHJlCiAgICAgICAgICAgICAgICBwcm9mcy5zb3J0KChhLCBiKSA9PiBhLm5hbWUubG9jYWxlQ29tcGFyZShiLm5hbWUpKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgLy8gU2kgYXVjdW4gcHJvZiBjb25jZXJuw6ksIG9uIG4nYWZmaWNoZSBwYXMgbGUgdGFibGVhdQogICAgICAgICAgICBpZiAocHJvZnMubGVuZ3RoID09PSAwICYmIGlzTGFibykgcmV0dXJuOwoKICAgICAgICAgICAgLy8gLS0tIDMuIETDiUZJTklUSU9OIERFUyBDT0xPTk5FUyAoQ2xhc3Nlcy9OaXZlYXV4KSAtLS0KICAgICAgICAgICAgbGV0IGNvbHVtbnMgPSBbXTsKICAgICAgICAgICAgaWYgKG1ldGEubW9kZSA9PT0gJ2RpdicpIHsKICAgICAgICAgICAgICAgIERBVEEuc3RydWN0dXJlLmZvckVhY2gobHZsID0+IHsKICAgICAgICAgICAgICAgICAgICBjb25zdCBwcmVmaXggPSBnZXRMZXZlbFByZWZpeChsdmwubGV2ZWwpOwogICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbHZsLmRpdjsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNJZCA9IGAke3ByZWZpeH0ke1N0cmluZy5mcm9tQ2hhckNvZGUoNjUgKyBpKX1gOwogICAgICAgICAgICAgICAgICAgICAgICAvLyBPbiBhZmZpY2hlIGxhIGNvbG9ubmUgc2kgOgogICAgICAgICAgICAgICAgICAgICAgICAvLyAxLiBMZSBuaXZlYXUgZXN0IGNvY2jDqSBkYW5zIGxlcyBwYXJhbcOodHJlcwogICAgICAgICAgICAgICAgICAgICAgICAvLyAyLiBPVSBzJ2lsIHkgYSBkZXMgaGV1cmVzIHNhaXNpZXMgKG92ZXJyaWRlKQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpc0FjdGl2ZSA9IChtZXRhLmxldmVscyAmJiBtZXRhLmxldmVscy5pbmNsdWRlcyhsdmwubGV2ZWwpKTsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaGFzSG91cnMgPSBnZXRIb3Vyc0ZvckNsYXNzU3ViamVjdChjSWQsIGx2bC5sZXZlbCwgc3ViKSA+IDA7CiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICBpZiAoaGFzSG91cnMgfHwgaXNBY3RpdmUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbHVtbnMucHVzaCh7IAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBjSWQsIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IERBVEEuY2xhc3NOYW1lc1tjSWRdIHx8IGNJZCwgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbHZsOiBsdmwubGV2ZWwsIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdjbGFzcycgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9IGVsc2UgaWYgKG1ldGEubW9kZSA9PT0gJ2xldmVsJykgewogICAgICAgICAgICAgICAgREFUQS5zdHJ1Y3R1cmUuZm9yRWFjaChsdmwgPT4gY29sdW1ucy5wdXNoKHsgaWQ6IGx2bC5sZXZlbCwgbmFtZTogbHZsLmxldmVsLCBsdmw6IGx2bC5sZXZlbCwgdHlwZTogJ2xldmVsJyB9KSk7CiAgICAgICAgICAgIH0gZWxzZSBpZiAobWV0YS5tb2RlID09PSAnZXRhYicpIHsKICAgICAgICAgICAgICAgIGNvbHVtbnMucHVzaCh7IGlkOiAnRVRBQicsIG5hbWU6ICdGb3JmYWl0IEdsb2JhbCcsIGx2bDogJ0V0YWInLCB0eXBlOiAnZXRhYicgfSk7CiAgICAgICAgICAgIH0gZWxzZSBpZiAobWV0YS5tb2RlID09PSAnZ3JvdXAnKSB7CiAgICAgICAgICAgICAgICAvLyBTdXItbWF0acOocmUgZ3JvdXBlIDogZ8OpbsOpcmVyIGxlcyBjb2xvbm5lcyDDoCBwYXJ0aXIgZGVzIGNsYXNzZXMgZGVzIHNvdXMtbWF0acOocmVzCiAgICAgICAgICAgICAgICBEQVRBLnN0cnVjdHVyZS5mb3JFYWNoKGx2bCA9PiB7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgcHJlZml4ID0gZ2V0TGV2ZWxQcmVmaXgobHZsLmxldmVsKTsKICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGx2bC5kaXY7IGkrKykgewogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjSWQgPSBgJHtwcmVmaXh9JHtTdHJpbmcuZnJvbUNoYXJDb2RlKDY1ICsgaSl9YDsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGdldEhvdXJzRm9yQ2xhc3NTdWJqZWN0KGNJZCwgbHZsLmxldmVsLCBzdWIpID4gMCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sdW1ucy5wdXNoKHsgaWQ6IGNJZCwgbmFtZTogREFUQS5jbGFzc05hbWVzW2NJZF0gfHwgY0lkLCBsdmw6IGx2bC5sZXZlbCwgdHlwZTogJ2NsYXNzJyB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAoY29sdW1ucy5sZW5ndGggPT09IDApIHJldHVybjsKCiAgICAgICAgICAgIC8vIC0tLSA0LiBDT05TVFJVQ1RJT04gRFUgSEVBREVSIERVIFRBQkxFQVUgLS0tCiAgICAgICAgICAgIGxldCB0YWJsZUhUTUwgPSBgPGg0IHN0eWxlPSJjb2xvcjp2YXIoLS1zZWNvbmRhcnkpOyBtYXJnaW4tYm90dG9tOjEwcHg7IHBhZGRpbmctbGVmdDo1cHg7Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAke3N1Yn0gPHNtYWxsIHN0eWxlPSJjb2xvcjojOTk5OyBmb250LXdlaWdodDpub3JtYWw7IGZvbnQtc2l6ZTowLjdyZW07Ij4oJHtpc0xhYm8gPyAnRMOpY2hhcmdlIC8gSGV1cmUgZGUgVmFpc3NlbGxlJyA6IChtZXRhLm1vZGUgPT09ICdkaXYnID8gJ1BhciBDbGFzc2UnIDogJ0ZvcmZhaXQnKX0pPC9zbWFsbD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2g0PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0YWJsZSBzdHlsZT0id2lkdGg6MTAwJTsgZm9udC1zaXplOjAuOHJlbTsgYm9yZGVyLWNvbGxhcHNlOmNvbGxhcHNlOyBtYXJnaW4tYm90dG9tOjI1cHg7Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGhlYWQ+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRyIHN0eWxlPSJiYWNrZ3JvdW5kOiM0NTVhNjQ7IGNvbG9yOndoaXRlOyI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aCBzdHlsZT0idGV4dC1hbGlnbjpsZWZ0OyBib3JkZXI6MXB4IHNvbGlkICNkZGQ7IHBhZGRpbmc6OHB4OyB3aWR0aDoxODBweDsiPkVuc2VpZ25hbnQ8L3RoPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAke2NvbHVtbnMubWFwKGNvbCA9PiBgPHRoIHN0eWxlPSJib3JkZXI6MXB4IHNvbGlkICNkZGQ7IHBhZGRpbmc6OHB4OyI+JHtjb2wubmFtZX08L3RoPmApLmpvaW4oJycpfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGggc3R5bGU9ImJvcmRlcjoxcHggc29saWQgI2JkYzNjNzsgcGFkZGluZzo4cHg7IHdpZHRoOjY1cHg7IGJhY2tncm91bmQ6I2Q2ZWFmODsgY29sb3I6IzI5ODBiOTsgZm9udC13ZWlnaHQ6Ym9sZDsiPlRvdC4gTWF0LjwvdGg+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90cj5gOwogICAgICAgICAgICAKICAgICAgICAgICAgLy8gTGlnbmUgZGUgQmVzb2luIChNYXNxdcOpZSBwb3VyIGxlcyBMYWJvcyBjYXIgYydlc3QgZHUgYm9udXMgZW5zZWlnbmFudCkKICAgICAgICAgICAgaWYgKCFpc0xhYm8pIHsKICAgICAgICAgICAgICAgICB0YWJsZUhUTUwgKz0gYDx0ciBzdHlsZT0iYmFja2dyb3VuZDojZmZmYmU2OyBmb250LXNpemU6MC43NXJlbTsiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQgc3R5bGU9InRleHQtYWxpZ246cmlnaHQ7IGZvbnQtd2VpZ2h0OmJvbGQ7IGJvcmRlcjoxcHggc29saWQgI2RkZDsgcGFkZGluZzo2cHg7Ij5CZXNvaW4gKGgpPC90ZD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHtjb2x1bW5zLm1hcChjb2wgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHZhbCA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihjb2wudHlwZSA9PT0gJ2NsYXNzJykgdmFsID0gZ2V0SG91cnNGb3JDbGFzc1N1YmplY3QoY29sLmlkLCBjb2wubHZsLCBzdWIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZihjb2wudHlwZSA9PT0gJ2xldmVsJykgdmFsID0gKG1ldGEudm9sTGV2ZWwgJiYgbWV0YS52b2xMZXZlbFtjb2wuaWRdKSB8fCAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZihjb2wudHlwZSA9PT0gJ2V0YWInKSB2YWwgPSBtZXRhLmV0YWIgfHwgMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBgPHRkIHN0eWxlPSJib3JkZXI6MXB4IHNvbGlkICNkZGQ7IHBhZGRpbmc6NnB4OyBmb250LXdlaWdodDpib2xkOyI+JHt2YWwudG9GaXhlZCgxKX08L3RkPmA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLmpvaW4oJycpfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQgY29sc3Bhbj0iMSIgc3R5bGU9ImJvcmRlcjoxcHggc29saWQgI2RkZDsgYmFja2dyb3VuZDojZmZmOWM0OyI+PC90ZD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RyPmA7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdGFibGVIVE1MICs9IGA8L3RoZWFkPjx0Ym9keT5gOwoKICAgICAgICAgICAgLy8gLS0tIDUuIExJR05FUyBFTlNFSUdOQU5UUyAtLS0KICAgICAgICAgICAgcHJvZnMuZm9yRWFjaChwID0+IHsKICAgICAgICAgICAgICAgIGxldCByb3dUb3RhbCA9IDA7CgogICAgICAgICAgICAgICAgLy8gQWZmaWNoYWdlIGR1IG5vbSArIERpc2NpcGxpbmUgZCdvcmlnaW5lIHNpIGRpZmbDqXJlbnRlCiAgICAgICAgICAgICAgICBsZXQgZGlzcGxheU5hbWUgPSBwLm5hbWU7CiAgICAgICAgICAgICAgICBpZiAocC5zdWJqZWN0ICE9PSBzdWIpIHsKICAgICAgICAgICAgICAgICAgICBkaXNwbGF5TmFtZSArPSBgIDxzcGFuIHN0eWxlPSJmb250LXNpemU6MC43cmVtOyBjb2xvcjojZTY3ZTIyOyBmb250LXdlaWdodDpub3JtYWw7Ij4oJHtwLnN1YmplY3R9KTwvc3Bhbj5gOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHRhYmxlSFRNTCArPSBgPHRyPgogICAgICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT0idGV4dC1hbGlnbjpsZWZ0OyBmb250LXdlaWdodDpib2xkOyBib3JkZXI6MXB4IHNvbGlkICNkZGQ7IHBhZGRpbmc6OHB4OyBiYWNrZ3JvdW5kOiNmYWZhZmE7Ij4ke2Rpc3BsYXlOYW1lfTwvdGQ+YDsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgLy8gQ0VMTFVMRVMgREUgU0FJU0lFCiAgICAgICAgICAgICAgICB0YWJsZUhUTUwgKz0gY29sdW1ucy5tYXAoY29sID0+IHsKICAgICAgICAgICAgICAgICAgICBsZXQgdmFsID0gMDsKICAgICAgICAgICAgICAgICAgICBsZXQgYWN0aW9uID0gIiI7CiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgaWYgKGlzTGFibykgewogICAgICAgICAgICAgICAgICAgICAgICB2YWwgPSBwLmRlY2hhcmdlIHx8IDA7CiAgICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbiA9IGBvbmNoYW5nZT0idXBkYXRlRGVjaGFyZ2VGcm9tR3JpZCgke3AuaWR4fSwgdGhpcy52YWx1ZSwgdGhpcykiYDsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBrZXkgPSBgJHtjb2wuaWR9XyR7cC5pZHh9YDsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYXNzaWduID0gREFUQS5hc3NpZ25tZW50c1trZXldOwogICAgICAgICAgICAgICAgICAgICAgICB2YWwgPSAoYXNzaWduICYmIGFzc2lnbi5xdW90YSAhPT0gdW5kZWZpbmVkKSA/IGFzc2lnbi5xdW90YSA6IDA7CiAgICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbiA9IGBvbmNoYW5nZT0idXBkYXRlQ29UZWFjaGluZygnJHtjb2wuaWR9JywgJHtwLmlkeH0sIHRoaXMudmFsdWUsIHRoaXMpIiBvbmlucHV0PSJ1cGRhdGVDb1RlYWNoaW5nKCcke2NvbC5pZH0nLCAke3AuaWR4fSwgdGhpcy52YWx1ZSwgdGhpcykiYDsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgLy8gQ29lZiBkdSBuaXZlYXUgcG91ciBhZmZpY2hhZ2UgYnJ1dC9wb25kCiAgICAgICAgICAgICAgICAgICAgLy8gdmFsID0gcXVvdGEgZMOpasOgIHBvbmTDqXLDqSAoYmFzZcOXY29lZiksIG9uIHJlY2FsY3VsZSBsZSBicnV0IHBvdXIgbCdhZmZpY2hhZ2UKICAgICAgICAgICAgICAgICAgICBsZXQgY29sQ29lZiA9IDEuMDsKICAgICAgICAgICAgICAgICAgICBpZiAoIWlzTGFibyAmJiBjb2wubHZsICYmIERBVEEubGV2ZWxDb25maWcgJiYgREFUQS5sZXZlbENvbmZpZ1tjb2wubHZsXSkgewogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBsYyA9IERBVEEubGV2ZWxDb25maWdbY29sLmx2bF07CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGVudGl0eVN1YmogPSBnZXRUZWFjaGVyU3ViamVjdEZvckVudGl0eShwLCBjdXJyZW50RW50aXR5KTsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY2ZnU3ViaiA9IGxjW2VudGl0eVN1YmpdIHx8IGxjW3Auc3ViamVjdF0gfHwgT2JqZWN0LnZhbHVlcyhsYylbMF07CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjZmdTdWJqICYmIGNmZ1N1YmouY29lZiAhPT0gdW5kZWZpbmVkKSBjb2xDb2VmID0gcGFyc2VGbG9hdChjZmdTdWJqLmNvZWYpIHx8IDEuMDsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgLy8gdmFsIGVzdCBkw6lqw6AgcG9uZMOpcsOpIOKGkiByYXdWYWwgPSB2YWwgLyBjb2VmCiAgICAgICAgICAgICAgICAgICAgY29uc3QgdmFsUG9uZCA9IHBhcnNlRmxvYXQodmFsKTsKICAgICAgICAgICAgICAgICAgICBjb25zdCB2YWxSYXcgID0gY29sQ29lZiA+IDEuMDEgPyBNYXRoLnJvdW5kKHZhbFBvbmQgLyBjb2xDb2VmICogMTApIC8gMTAgOiB2YWxQb25kOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IHBvbmQgICAgPSBNYXRoLnJvdW5kKCh2YWxQb25kIC0gdmFsUmF3KSAqIDEwKSAvIDEwOwoKICAgICAgICAgICAgICAgICAgICBpZiAodmFsID4gMCkgcm93VG90YWwgKz0gdmFsUG9uZDsKCiAgICAgICAgICAgICAgICAgICAgLy8gQWZmaWNoYWdlIDogaW5wdXQgZW4gaGV1cmVzIGJydXRlcyArIGJhZGdlIHBvbmTDqXJhdGlvbiBzaSBjb2VmID4gMQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHBvbmRCYWRnZSA9IChjb2xDb2VmID4gMS4wMSAmJiB2YWxQb25kID4gMCkKICAgICAgICAgICAgICAgICAgICAgICAgPyBgPGRpdiBzdHlsZT0iZm9udC1zaXplOjAuNjVyZW07Y29sb3I6IzhlNDRhZDt0ZXh0LWFsaWduOmNlbnRlcjttYXJnaW4tdG9wOjFweDsiPiR7dmFsUmF3LnRvRml4ZWQoMSl9KyR7cG9uZC50b0ZpeGVkKDEpfT08Yj4ke3ZhbFBvbmQudG9GaXhlZCgxKX1oPC9iPjwvZGl2PmAKICAgICAgICAgICAgICAgICAgICAgICAgOiAnJzsKCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGA8dGQgc3R5bGU9ImJvcmRlcjoxcHggc29saWQgI2RkZDsgcGFkZGluZzo0cHg7IGJhY2tncm91bmQ6JHt2YWwgPiAwID8gKGNvbENvZWYgPiAxLjAxID8gJyNmZGY1ZmYnIDogJyNlM2YyZmQnKSA6ICd3aGl0ZSd9OyI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9Im51bWJlciIgc3RlcD0iMC41IiB2YWx1ZT0iJHt2YWwgPT09IDAgPyAnJyA6IHZhbH0iIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj0iMCIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9IndpZHRoOjUwcHg7IHRleHQtYWxpZ246Y2VudGVyOyBib3JkZXI6MXB4IHNvbGlkICR7dmFsID4gMCA/IChjb2xDb2VmID4gMS4wMSA/ICcjYzM5YmQzJyA6ICcjOTBjYWY5JykgOiAnI2VlZSd9OyBmb250LXdlaWdodDoke3ZhbCA+IDAgPyAnYm9sZCcgOiAnbm9ybWFsJ307IgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAke2FjdGlvbn0+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHtwb25kQmFkZ2V9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RkPmA7CiAgICAgICAgICAgICAgICB9KS5qb2luKCcnKTsKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIC8vIENlbGx1bGUgVG90YWwgbWF0acOocmUgdW5pcXVlbWVudAogICAgICAgICAgICAgICAgdGFibGVIVE1MICs9IGA8dGQgc3R5bGU9ImJvcmRlcjoxcHggc29saWQgI2RkZDsgcGFkZGluZzo4cHg7IGZvbnQtd2VpZ2h0OmJvbGQ7IGJhY2tncm91bmQ6I2U4ZjBmZTsgY29sb3I6dmFyKC0tcHJpbWFyeSk7IHRleHQtYWxpZ246Y2VudGVyOyI+JHtyb3dUb3RhbC50b0ZpeGVkKDEpfTwvdGQ+CiAgICAgICAgICAgICAgICA8L3RyPmA7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICAKICAgICAgICAgICAgLy8gLS0tIDYuIFJFTElRVUFUIChVbmlxdWVtZW50IHNpIHBhcyBMYWJvKSAtLS0KICAgICAgICAgICAgaWYgKCFpc0xhYm8pIHsKICAgICAgICAgICAgICAgIHRhYmxlSFRNTCArPSBgPHRyIHN0eWxlPSJiYWNrZ3JvdW5kOiNmZGVkZWM7Ij4KICAgICAgICAgICAgICAgICAgICA8dGQgc3R5bGU9InRleHQtYWxpZ246cmlnaHQ7IGZvbnQtc3R5bGU6aXRhbGljOyBib3JkZXI6MXB4IHNvbGlkICNkZGQ7IHBhZGRpbmc6OHB4OyBjb2xvcjojYzAzOTJiOyBmb250LXdlaWdodDpib2xkOyI+UmVsaXF1YXQ8L3RkPgogICAgICAgICAgICAgICAgICAgICR7Y29sdW1ucy5tYXAoY29sID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGFzc2lnbmVkSW5Db2wgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAvLyBPbiBzb21tZSBsZXMgaGV1cmVzIGFzc2lnbsOpZXMgcG91ciB0b3VzIGxlcyBwcm9mcyBhZmZpY2jDqXMKICAgICAgICAgICAgICAgICAgICAgICAgcHJvZnMuZm9yRWFjaChwID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBxID0gREFUQS5hc3NpZ25tZW50c1tgJHtjb2wuaWR9XyR7cC5pZHh9YF0/LnF1b3RhIHx8IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXNzaWduZWRJbkNvbCArPSBwYXJzZUZsb2F0KHEpOwogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBiZXNvaW4gPSAwOwogICAgICAgICAgICAgICAgICAgICAgICBpZihjb2wudHlwZSA9PT0gJ2NsYXNzJykgYmVzb2luID0gZ2V0SG91cnNGb3JDbGFzc1N1YmplY3QoY29sLmlkLCBjb2wubHZsLCBzdWIpOwogICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmKGNvbC50eXBlID09PSAnbGV2ZWwnKSBiZXNvaW4gPSAobWV0YS52b2xMZXZlbCAmJiBtZXRhLnZvbExldmVsW2NvbC5pZF0pIHx8IDA7CiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYoY29sLnR5cGUgPT09ICdldGFiJykgYmVzb2luID0gbWV0YS5ldGFiIHx8IDA7CgogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkaWZmID0gYmVzb2luIC0gYXNzaWduZWRJbkNvbDsKICAgICAgICAgICAgICAgICAgICAgICAgLy8gVmVydCBzaSAwLCBSb3VnZSBzaSBwb3NpdGlmIChtYW5xdWUpLCBPcmFuZ2Ugc2kgbsOpZ2F0aWYgKHRyb3ApCiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBjb2xvciA9IE1hdGguYWJzKGRpZmYpIDwgMC4wMSA/ICIjMjdhZTYwIiA6IChkaWZmID4gMCA/ICIjYzAzOTJiIiA6ICIjZTY3ZTIyIik7CiAgICAgICAgICAgICAgICAgICAgICAgIGxldCB0ZXh0ID0gTWF0aC5hYnMoZGlmZikgPCAwLjAxID8gJ09LJyA6IGRpZmYudG9GaXhlZCgxKTsKCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBgPHRkIHN0eWxlPSJib3JkZXI6MXB4IHNvbGlkICNkZGQ7IHBhZGRpbmc6NHB4OyBmb250LXdlaWdodDpib2xkOyBjb2xvcjoke2NvbG9yfTsgdGV4dC1hbGlnbjpjZW50ZXI7Ij4ke3RleHR9PC90ZD5gOwogICAgICAgICAgICAgICAgICAgIH0pLmpvaW4oJycpfQogICAgICAgICAgICAgICAgICAgIDx0ZCBjb2xzcGFuPSIxIiBzdHlsZT0iYm9yZGVyOjFweCBzb2xpZCAjZGRkOyBiYWNrZ3JvdW5kOiNmZGVkZWM7Ij48L3RkPgogICAgICAgICAgICAgICAgPC90cj5gOwogICAgICAgICAgICB9CgogICAgICAgICAgICB0YWJsZUhUTUwgKz0gYDwvdGJvZHk+PC90YWJsZT5gOwogICAgICAgICAgICBwb2xlSFRNTCArPSB0YWJsZUhUTUw7CiAgICAgICAgfSk7CiAgICAgICAgCiAgICAgICAgY29udGFpbmVyLmlubmVySFRNTCArPSBwb2xlSFRNTCArIGA8L2Rpdj5gOwogICAgfSk7Cn0KCi8qKgogKiBGT05DVElPTiBERSBDT1JSRUNUSU9OIEFVVE9NQVRJUVVFIERFIExBIFNUUlVDVFVSRQogKiBHw6hyZSBsJ1VOU1MgZXQgbGVzIExhYm9zIChTVlQvUEMgdW5pcXVlbWVudCkKICovCmZ1bmN0aW9uIGNsZWFuR3JvdXBBc3NpZ25tZW50cygpIHsKICAgIC8vIFN1cHByaW1lciBsZXMgYW5jaWVubmVzIGNsw6lzIGQnYWZmZWN0YXRpb24gc2ltcGxlcyAoY0lkX3RJZHgpIHBvdXIgbGVzIHByb2ZzIGRlIGdyb3VwZQogICAgLy8gcXVhbmQgZGVzIGNsw6lzIHNww6ljaWZpcXVlcyBwYXIgc291cy1tYXRpw6hyZSAoY0lkX3RJZHh+Y2hpbGRTdWIpIGV4aXN0ZW50IGTDqWrDoC4KICAgIGlmICghREFUQSB8fCAhREFUQS5hc3NpZ25tZW50cykgcmV0dXJuOwogICAgCiAgICBjb25zdCB0b0RlbGV0ZSA9IFtdOwogICAgT2JqZWN0LmtleXMoREFUQS5hc3NpZ25tZW50cykuZm9yRWFjaChrZXkgPT4gewogICAgICAgIGlmIChrZXkuaW5jbHVkZXMoJ34nKSkgcmV0dXJuOyAvLyBjbMOpIH5jaGlsZFN1YiA6IE9LCiAgICAgICAgLy8gRm9ybWF0IHN0YW5kYXJkIDogY0lkX3RJZHgKICAgICAgICBjb25zdCBwYXJ0cyA9IGtleS5zcGxpdCgnXycpOwogICAgICAgIGNvbnN0IHRJZHggPSBwYXJzZUludChwYXJ0c1twYXJ0cy5sZW5ndGggLSAxXSk7CiAgICAgICAgaWYgKGlzTmFOKHRJZHgpKSByZXR1cm47CiAgICAgICAgY29uc3QgdGVhY2hlciA9IFNIQVJFRF9URUFDSEVSU1t0SWR4XTsKICAgICAgICBpZiAoIXRlYWNoZXIpIHJldHVybjsKICAgICAgICAvLyBWw6lyaWZpZXIgc2kgYydlc3QgdW4gcHJvZiBkZSBncm91cGUKICAgICAgICBjb25zdCBzdWJqZWN0Rm9yRW50ID0gKHRlYWNoZXIuc3ViamVjdHMgJiYgdGVhY2hlci5zdWJqZWN0c1tjdXJyZW50RW50aXR5XSkgfHwgdGVhY2hlci5zdWJqZWN0OwogICAgICAgIGlmIChEQVRBLnN1YmplY3RNZXRhW3N1YmplY3RGb3JFbnRdPy5tb2RlICE9PSAnZ3JvdXAnKSByZXR1cm47CiAgICAgICAgLy8gU2kgZGVzIGNsw6lzIH5jaGlsZFN1YiBleGlzdGVudCBwb3VyIGNlIG3Dqm1lIGNJZCt0SWR4IOKGkiBzdXBwcmltZXIgbCdhbmNpZW5uZQogICAgICAgIGNvbnN0IGNJZCA9IHBhcnRzLnNsaWNlKDAsIHBhcnRzLmxlbmd0aCAtIDEpLmpvaW4oJ18nKTsKICAgICAgICBjb25zdCBoYXNDaGlsZEtleXMgPSBPYmplY3Qua2V5cyhEQVRBLmFzc2lnbm1lbnRzKS5zb21lKGsgPT4gay5zdGFydHNXaXRoKGAke2NJZH1fJHt0SWR4fX5gKSk7CiAgICAgICAgaWYgKGhhc0NoaWxkS2V5cykgdG9EZWxldGUucHVzaChrZXkpOwogICAgfSk7CiAgICB0b0RlbGV0ZS5mb3JFYWNoKGsgPT4gZGVsZXRlIERBVEEuYXNzaWdubWVudHNba10pOwogICAgaWYgKHRvRGVsZXRlLmxlbmd0aCA+IDApIHNhdmVEYXRhKCk7Cn0KCmZ1bmN0aW9uIGNoZWNrQW5kRml4RGF0YSgpIHsKICAgIGlmICghREFUQSkgcmV0dXJuOwogICAgCiAgICAvLyAwLiBOZXR0b3llciBsZXMgYW5jaWVubmVzIGFmZmVjdGF0aW9ucyBkZSBncm91cGUgc2FucyB+Y2hpbGRTdWIKICAgIGNsZWFuR3JvdXBBc3NpZ25tZW50cygpOwoKICAgIC8vIDEuIExpZXIgVU5TUyDDoCBFUFMKICAgIGlmIChEQVRBLnN1YmplY3RzLmluY2x1ZGVzKCJVTlNTIikpIHsKICAgICAgICBpZiAoIURBVEEuc3ViamVjdE1ldGFbIlVOU1MiXSkgREFUQS5zdWJqZWN0TWV0YVsiVU5TUyJdID0ge307CiAgICAgICAgREFUQS5zdWJqZWN0TWV0YVsiVU5TUyJdLnBhcmVudCA9ICJFUFMiOwogICAgICAgIERBVEEuc3ViamVjdE1ldGFbIlVOU1MiXS5tb2RlID0gImV0YWIiOyAKICAgIH0KCiAgICAvLyAyLiBDcsOpZXIgbGVzIG1hdGnDqHJlcyAiTGFib3JhdG9pcmUiIFVOSVFVRU1FTlQgcG91ciBTVlQgZXQgUGh5c2lxdWUKICAgIC8vIE9uIHJldGlyZSAiVGVjaG5vIiBkZSBsYSBsaXN0ZQogICAgY29uc3Qgc2NpZW5jZVN1YmplY3RzID0gWyJTVlQiLCAiUGh5cy1DaGkiLCAiU2NpZW5jZXMiLCAiUy4gVi4gVC4iLCAiUEhZU0lRVUUtQ0hJTUlFIl07CiAgICAKICAgIHNjaWVuY2VTdWJqZWN0cy5mb3JFYWNoKHNjID0+IHsKICAgICAgICAvLyBPbiBjaGVyY2hlIHNpIGxhIG1hdGnDqHJlIGV4aXN0ZQogICAgICAgIGNvbnN0IHBhcmVudEV4aXN0cyA9IERBVEEuc3ViamVjdHMuZmluZChzID0+IHMudG9VcHBlckNhc2UoKSA9PT0gc2MudG9VcHBlckNhc2UoKSAmJiAhREFUQS5zdWJqZWN0TWV0YVtzXT8ucGFyZW50KTsKICAgICAgICAKICAgICAgICBpZiAocGFyZW50RXhpc3RzKSB7CiAgICAgICAgICAgIGNvbnN0IGxhYm9OYW1lID0gYExhYm8gJHtwYXJlbnRFeGlzdHN9YDsgLy8gRXg6ICJMYWJvIFNWVCIKICAgICAgICAgICAgCiAgICAgICAgICAgIC8vIE9uIGNyw6llIGxlIExhYm8gc2V1bGVtZW50IHMnaWwgbidleGlzdGUgcGFzCiAgICAgICAgICAgIGlmICghREFUQS5zdWJqZWN0cy5pbmNsdWRlcyhsYWJvTmFtZSkpIHsKICAgICAgICAgICAgICAgIERBVEEuc3ViamVjdHMucHVzaChsYWJvTmFtZSk7CiAgICAgICAgICAgICAgICBEQVRBLnN1YmplY3RNZXRhW2xhYm9OYW1lXSA9IHsKICAgICAgICAgICAgICAgICAgICBtb2RlOiAnZXRhYicsICAgICAgIAogICAgICAgICAgICAgICAgICAgIHBhcmVudDogcGFyZW50RXhpc3RzLAogICAgICAgICAgICAgICAgICAgIGNvZGU6ICdMQUInLAogICAgICAgICAgICAgICAgICAgIGV0YWI6IDAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgLy8gUydpbCBleGlzdGUsIG9uIGZvcmNlIGxlIG1vZGUgJ2V0YWInIGV0IGxlIGNvZGUgJ0xBQicKICAgICAgICAgICAgICAgIGlmKERBVEEuc3ViamVjdE1ldGFbbGFib05hbWVdKSB7CiAgICAgICAgICAgICAgICAgICAgREFUQS5zdWJqZWN0TWV0YVtsYWJvTmFtZV0ucGFyZW50ID0gcGFyZW50RXhpc3RzOwogICAgICAgICAgICAgICAgICAgIERBVEEuc3ViamVjdE1ldGFbbGFib05hbWVdLm1vZGUgPSAnZXRhYic7CiAgICAgICAgICAgICAgICAgICAgREFUQS5zdWJqZWN0TWV0YVtsYWJvTmFtZV0uY29kZSA9ICdMQUInOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfSk7CiAgICAKICAgIC8vIE5ldHRveWFnZSDDqXZlbnR1ZWwgOiBTaSB1biAiTGFibyBUZWNobm8iIHRyYcOubmUgZCd1bmUgdmVyc2lvbiBwcsOpY8OpZGVudGUsIG9uIHBvdXJyYWl0IGxlIHN1cHByaW1lciBpY2ksCiAgICAvLyBtYWlzIHBhciBzw6ljdXJpdMOpIG9uIGxlIGxhaXNzZSBqdXN0ZSBpbmFjdGlmIG91IG9uIGxlIHN1cHByaW1lIG1hbnVlbGxlbWVudCB2aWEgbGUgbWVudSBNYXRpw6hyZXMuCgogICAgc2F2ZURhdGEoKTsKfQoKLyoqCiAqIE1ldCDDoCBqb3VyIGxhIGTDqWNoYXJnZSBkJ3VuIGVuc2VpZ25hbnQgZGVwdWlzIGxhIGdyaWxsZSAiTGFibyIKICovCmZ1bmN0aW9uIHVwZGF0ZURlY2hhcmdlRnJvbUdyaWQodElkeCwgdmFsLCBpbnB1dEVsZW1lbnQpIHsKICAgIGNvbnN0IHRlYWNoZXIgPSBTSEFSRURfVEVBQ0hFUlNbdElkeF07CiAgICBpZiAodGVhY2hlcikgewogICAgICAgIHRlYWNoZXIuZGVjaGFyZ2UgPSBwYXJzZUZsb2F0KHZhbCkgfHwgMDsKICAgICAgICBzYXZlRGF0YSgpOwogICAgICAgIAogICAgICAgIC8vIE1pc2Ugw6Agam91ciB2aXN1ZWxsZSBkZXMgdG90YXV4IGRlIGxhIGxpZ25lCiAgICAgICAgaWYgKGlucHV0RWxlbWVudCkgewogICAgICAgICAgICAgY29uc3Qgcm93ID0gaW5wdXRFbGVtZW50LmNsb3Nlc3QoJ3RyJyk7CiAgICAgICAgICAgICAvLyBPbiBtZXQgw6Agam91ciBsYSBjZWxsdWxlICJUb3QuIE1hdC4iIChkZXJuacOocmUgY2VsbHVsZSkKICAgICAgICAgICAgIC8vIE5vdGUgOiBQb3VyIHVuZSBkw6ljaGFyZ2UsIGxlICJUb3QuIE1hdC4iIGVzdCDDqWdhbCDDoCBsYSBkw6ljaGFyZ2UgZWxsZS1tw6ptZQogICAgICAgICAgICAgaWYocm93KSB7CiAgICAgICAgICAgICAgICAgY29uc3QgY2VsbHMgPSByb3cuY2VsbHM7CiAgICAgICAgICAgICAgICAgY29uc3QgdG90TWF0Q2VsbCA9IGNlbGxzW2NlbGxzLmxlbmd0aCAtIDFdOyAvLyBUb3QuIE1hdC4gdW5pcXVlbWVudAogICAgICAgICAgICAgICAgIGlmICh0b3RNYXRDZWxsKSB0b3RNYXRDZWxsLmlubmVyVGV4dCA9IHRlYWNoZXIuZGVjaGFyZ2UudG9GaXhlZCgxKTsKICAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9Cn0KCi8qKgogKiBDQUxDVUxFIExFIFNFUlZJQ0UgUsOJRUwgKEZBQ0Ugw4Agw4lMw4hWRVMpIEQnVU4gRU5TRUlHTkFOVAogKiBQcmVuZCBlbiBjb21wdGUgbGVzIGhldXJlcyBkZSBjby1lbnNlaWduZW1lbnQgc2Fpc2llcyBtYW51ZWxsZW1lbnQKICovCmZ1bmN0aW9uIGdldFRlYWNoZXJMaXZlU2VydmljZSh0ZWFjaGVySWR4KSB7CiAgICBjb25zdCB0ZWFjaGVyID0gU0hBUkVEX1RFQUNIRVJTW3RlYWNoZXJJZHhdOwogICAgaWYgKCF0ZWFjaGVyKSByZXR1cm4gMDsKCiAgICBsZXQgdG90YWxTZXJ2aWNlID0gMDsKICAgIAogICAgLy8gT24gcGFyY291cnQgdG91dGVzIGxlcyBjbMOpcyBkJ2FmZmVjdGF0aW9ucyAoZm9ybWF0OiAiQ2xhc3NlSURfUHJvZkluZGV4IikKICAgIE9iamVjdC5rZXlzKERBVEEuYXNzaWdubWVudHMpLmZvckVhY2goa2V5ID0+IHsKICAgICAgICBjb25zdCBbY0lkLCB0SWR4XSA9IGtleS5zcGxpdCgnXycpOwogICAgICAgIAogICAgICAgIGlmIChwYXJzZUludCh0SWR4KSA9PT0gdGVhY2hlcklkeCkgewogICAgICAgICAgICBjb25zdCBhc3NpZ24gPSBEQVRBLmFzc2lnbm1lbnRzW2tleV07CiAgICAgICAgICAgIAogICAgICAgICAgICAvLyBTaSB1bmUgcsOpcGFydGl0aW9uIG1hbnVlbGxlIChxdW90YSkgZXhpc3RlLCBvbiBsJ3V0aWxpc2UKICAgICAgICAgICAgaWYgKGFzc2lnbi5xdW90YSAhPT0gdW5kZWZpbmVkICYmIGFzc2lnbi5xdW90YSAhPT0gbnVsbCkgewogICAgICAgICAgICAgICAgdG90YWxTZXJ2aWNlICs9IHBhcnNlRmxvYXQoYXNzaWduLnF1b3RhKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIC8vIFNpbm9uLCBvbiByw6ljdXDDqHJlIGxhIHZhbGV1ciBwYXIgZMOpZmF1dCBkZSBsYSBncmlsbGUgaG9yYWlyZQogICAgICAgICAgICAgICAgY29uc3QgbGV2ZWxPYmogPSBEQVRBLnN0cnVjdHVyZS5maW5kKGwgPT4gY0lkLnN0YXJ0c1dpdGgoZ2V0TGV2ZWxQcmVmaXgobC5sZXZlbCkpKTsKICAgICAgICAgICAgICAgIGlmIChsZXZlbE9iaikgewogICAgICAgICAgICAgICAgICAgIHRvdGFsU2VydmljZSArPSBnZXRIb3Vyc0ZvckNsYXNzU3ViamVjdChjSWQsIGxldmVsT2JqLmxldmVsLCB0ZWFjaGVyLnN1YmplY3QpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfSk7CiAgICByZXR1cm4gdG90YWxTZXJ2aWNlOwp9CgpmdW5jdGlvbiB1cGRhdGVDb1RlYWNoaW5nKGNJZCwgdElkeCwgdmFsLCBpbnB1dEVsZW1lbnQpIHsKICAgIGNvbnN0IGhvdXJzID0gcGFyc2VGbG9hdCh2YWwpOwogICAgY29uc3Qga2V5ID0gYCR7Y0lkfV8ke3RJZHh9YDsKCiAgICAvLyAtLS0gMS4gU0FVVkVHQVJERSAoQmFjay1FbmQpIC0tLQogICAgaWYgKGlzTmFOKGhvdXJzKSB8fCBob3VycyA8PSAwKSB7CiAgICAgICAgaWYgKERBVEEuYXNzaWdubWVudHNba2V5XSkgZGVsZXRlIERBVEEuYXNzaWdubWVudHNba2V5XTsKICAgICAgICBpZiAoaW5wdXRFbGVtZW50KSB7CiAgICAgICAgICAgIGlucHV0RWxlbWVudC5zdHlsZS5ib3JkZXJDb2xvciA9ICcjZWVlJzsKICAgICAgICAgICAgaW5wdXRFbGVtZW50LnN0eWxlLmZvbnRXZWlnaHQgPSAnbm9ybWFsJzsKICAgICAgICAgICAgaW5wdXRFbGVtZW50LnBhcmVudEVsZW1lbnQuc3R5bGUuYmFja2dyb3VuZCA9ICd3aGl0ZSc7CiAgICAgICAgfQogICAgfSBlbHNlIHsKICAgICAgICBpZiAoIURBVEEuYXNzaWdubWVudHNba2V5XSkgREFUQS5hc3NpZ25tZW50c1trZXldID0geyBtb2RlOiAnQ0xBU1MnLCBxdW90YTogaG91cnMsIGlzUFA6IGZhbHNlIH07CiAgICAgICAgZWxzZSBEQVRBLmFzc2lnbm1lbnRzW2tleV0ucXVvdGEgPSBob3VyczsKICAgICAgICAKICAgICAgICBpZiAoaW5wdXRFbGVtZW50KSB7CiAgICAgICAgICAgIGlucHV0RWxlbWVudC5zdHlsZS5ib3JkZXJDb2xvciA9ICcjOTBjYWY5JzsKICAgICAgICAgICAgaW5wdXRFbGVtZW50LnN0eWxlLmZvbnRXZWlnaHQgPSAnYm9sZCc7CiAgICAgICAgICAgIGlucHV0RWxlbWVudC5wYXJlbnRFbGVtZW50LnN0eWxlLmJhY2tncm91bmQgPSAnI2UzZjJmZCc7CiAgICAgICAgfQogICAgfQoKICAgIC8vIENhbGN1bCBhdXRvIEdyb3VwZS9DbGFzc2UKICAgIGNvbnN0IHRlYWNoZXIgPSBTSEFSRURfVEVBQ0hFUlNbdElkeF07CiAgICBpZiAodGVhY2hlcikgewogICAgICAgIGNvbnN0IHN1YmplY3QgPSB0ZWFjaGVyLnN1YmplY3Q7CiAgICAgICAgY29uc3QgYXNzaWduZWRQZWVycyA9IGdldEVudGl0eVRlYWNoZXJzKCkubWFwKHQgPT4gdC5pZHgpCiAgICAgICAgICAgIC5maWx0ZXIoaWR4ID0+IHsKICAgICAgICAgICAgICAgIGNvbnN0IGsgPSBgJHtjSWR9XyR7aWR4fWA7CiAgICAgICAgICAgICAgICByZXR1cm4gREFUQS5hc3NpZ25tZW50c1trXSAmJiAoU0hBUkVEX1RFQUNIRVJTW2lkeF18fHtzdWJqZWN0OicnfSkuc3ViamVjdCA9PT0gc3ViamVjdDsKICAgICAgICAgICAgfSk7CiAgICAgICAgY29uc3QgbmV3TW9kZSA9IGFzc2lnbmVkUGVlcnMubGVuZ3RoID4gMSA/ICdHUk9VUCcgOiAnQ0xBU1MnOwogICAgICAgIGFzc2lnbmVkUGVlcnMuZm9yRWFjaChpZHggPT4gewogICAgICAgICAgICBjb25zdCBrID0gYCR7Y0lkfV8ke2lkeH1gOwogICAgICAgICAgICBpZiAoREFUQS5hc3NpZ25tZW50c1trXSkgREFUQS5hc3NpZ25tZW50c1trXS5tb2RlID0gbmV3TW9kZTsKICAgICAgICB9KTsKICAgIH0KICAgIAogICAgc2F2ZURhdGEoKTsKCiAgICAvLyAtLS0gMi4gTUlTRSDDgCBKT1VSIFZJU1VFTExFIChGcm9udC1FbmQpIC0tLQogICAgaWYgKGlucHV0RWxlbWVudCkgewogICAgICAgIGNvbnN0IHRhYmxlID0gaW5wdXRFbGVtZW50LmNsb3Nlc3QoJ3RhYmxlJyk7CiAgICAgICAgY29uc3Qgcm93ID0gaW5wdXRFbGVtZW50LmNsb3Nlc3QoJ3RyJyk7CiAgICAgICAgCiAgICAgICAgLy8gQS4gTUlTRSDDgCBKT1VSIExJR05FIChQUk9GKQogICAgICAgIGlmIChyb3cpIHsKICAgICAgICAgICAgY29uc3QgaW5wdXRzID0gcm93LnF1ZXJ5U2VsZWN0b3JBbGwoJ2lucHV0W3R5cGU9Im51bWJlciJdJyk7CiAgICAgICAgICAgIGxldCByb3dUb3RhbCA9IDA7CiAgICAgICAgICAgIGlucHV0cy5mb3JFYWNoKGlucCA9PiByb3dUb3RhbCArPSBwYXJzZUZsb2F0KGlucC52YWx1ZSkgfHwgMCk7CiAgICAgICAgICAgIAogICAgICAgICAgICAvLyBVbmlxdWUgY2VsbHVsZSBkZSB0b3RhbCA6IFRvdC4gTWF0LiAoZGVybmnDqHJlIGNlbGx1bGUpCiAgICAgICAgICAgIGNvbnN0IGNlbGxUb3RNYXQgPSByb3cuY2VsbHNbcm93LmNlbGxzLmxlbmd0aCAtIDFdOwogICAgICAgICAgICBpZiAoY2VsbFRvdE1hdCkgewogICAgICAgICAgICAgICAgY2VsbFRvdE1hdC5pbm5lclRleHQgPSByb3dUb3RhbC50b0ZpeGVkKDEpOwogICAgICAgICAgICAgICAgY2VsbFRvdE1hdC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSByb3dUb3RhbCA+IDAgPyAnI2U4ZjBmZScgOiAnd2hpdGUnOwogICAgICAgICAgICAgICAgY2VsbFRvdE1hdC5zdHlsZS5jb2xvciA9IHJvd1RvdGFsID4gMCA/ICcjMmMzZTUwJyA6ICdibGFjayc7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIC8vIEIuIE1JU0Ugw4AgSk9VUiBDT0xPTk5FIChSRUxJUVVBVCkKICAgICAgICBjb25zdCBjZWxsID0gaW5wdXRFbGVtZW50LmNsb3Nlc3QoJ3RkJyk7CiAgICAgICAgY29uc3QgY29sSWR4ID0gY2VsbC5jZWxsSW5kZXg7CiAgICAgICAgCiAgICAgICAgLy8gT24gcsOpY3Vww6hyZSBsZSBiZXNvaW4gKGxpZ25lIDIgZHUgaGVhZGVyLCBjYXIgbGlnbmUgMSA9IHRpdHJlcyBjb2xvbm5lcykKICAgICAgICBjb25zdCBuZWVkQ2VsbCA9IHRhYmxlLnRIZWFkLnJvd3NbMV0uY2VsbHNbY29sSWR4XTsKICAgICAgICBjb25zdCBuZWVkVmFsID0gcGFyc2VGbG9hdChuZWVkQ2VsbC5pbm5lclRleHQpIHx8IDA7CgogICAgICAgIGxldCBjb2xTdW0gPSAwOwogICAgICAgIGNvbnN0IGJvZHlSb3dzID0gdGFibGUudEJvZGllc1swXS5yb3dzOwogICAgICAgIC8vIE9uIGJvdWNsZSBzdXIgdG91dGVzIGxlcyBsaWduZXMgc2F1ZiBsYSBkZXJuacOocmUgKGxlIHJlbGlxdWF0KQogICAgICAgIGZvcihsZXQgaT0wOyBpIDwgYm9keVJvd3MubGVuZ3RoIC0gMTsgaSsrKSB7CiAgICAgICAgICAgIGNvbnN0IGNlbGxJblJvdyA9IGJvZHlSb3dzW2ldLmNlbGxzW2NvbElkeF07CiAgICAgICAgICAgIGlmKGNlbGxJblJvdykgewogICAgICAgICAgICAgICAgY29uc3QgaW5wdXRJblJvdyA9IGNlbGxJblJvdy5xdWVyeVNlbGVjdG9yKCdpbnB1dCcpOwogICAgICAgICAgICAgICAgaWYoaW5wdXRJblJvdykgY29sU3VtICs9IHBhcnNlRmxvYXQoaW5wdXRJblJvdy52YWx1ZSkgfHwgMDsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgY29uc3QgZGlmZiA9IG5lZWRWYWwgLSBjb2xTdW07CiAgICAgICAgY29uc3QgcmVsaXF1YXRSb3cgPSB0YWJsZS50Qm9kaWVzWzBdLmxhc3RFbGVtZW50Q2hpbGQ7CiAgICAgICAgY29uc3QgcmVsaXF1YXRDZWxsID0gcmVsaXF1YXRSb3cuY2VsbHNbY29sSWR4XTsKICAgICAgICAKICAgICAgICBpZiAocmVsaXF1YXRDZWxsKSB7CiAgICAgICAgICAgIGlmIChNYXRoLmFicyhkaWZmKSA8IDAuMDEpIHsKICAgICAgICAgICAgICAgIHJlbGlxdWF0Q2VsbC5pbm5lclRleHQgPSAiT0siOwogICAgICAgICAgICAgICAgcmVsaXF1YXRDZWxsLnN0eWxlLmNvbG9yID0gIiMyN2FlNjAiOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgcmVsaXF1YXRDZWxsLmlubmVyVGV4dCA9IGRpZmYudG9GaXhlZCgxKTsKICAgICAgICAgICAgICAgIHJlbGlxdWF0Q2VsbC5zdHlsZS5jb2xvciA9IGRpZmYgPiAwID8gIiNjMDM5MmIiIDogIiNlNjdlMjIiOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQp9CgovKioKICogUsOJQ1VQw4hSRSBMRSBQUsOJRklYRSBEVSBOSVZFQVUgKGV4OiAiNiIgcG91ciAiNsOobWUiKQogKi8KZnVuY3Rpb24gZ2V0TGV2ZWxQcmVmaXgobGV2ZWxOYW1lKSB7CiAgICByZXR1cm4gbGV2ZWxOYW1lLnJlcGxhY2UoL1teMC05XS9nLCAnJykgfHwgbGV2ZWxOYW1lLmNoYXJBdCgwKTsKfQoKLy8gSGVscGVyIHBvdXIgcsOpY3Vww6lyZXIgbCdob3JhaXJlIGQndW5lIGNsYXNzZSAoZ8OocmUgbGVzIG92ZXJyaWRlcykKZnVuY3Rpb24gZ2V0SG91cnNGb3JDbGFzc1N1YmplY3QoY0lkLCBsZXZlbE5hbWUsIHN1YmplY3QpIHsKICAgIGNvbnN0IG1ldGEgPSBEQVRBLnN1YmplY3RNZXRhW3N1YmplY3RdOwogICAgaWYgKCFtZXRhIHx8IG1ldGEubW9kZSA9PT0gJ2V0YWInKSByZXR1cm4gMDsKICAgIGlmIChtZXRhLm1vZGUgPT09ICdsZXZlbCcpIHJldHVybiAobWV0YS52b2xMZXZlbCAmJiBtZXRhLnZvbExldmVsW2xldmVsTmFtZV0pIHx8IDA7CiAgICAKICAgIC8vIE1vZGUgZ3JvdXBlIChzdXItbWF0acOocmUpIDogc29tbWVyIGxlcyBoZXVyZXMgZGUgdG91dGVzIGxlcyBzb3VzLW1hdGnDqHJlcyBlbmZhbnRzCiAgICBpZiAobWV0YS5tb2RlID09PSAnZ3JvdXAnKSB7CiAgICAgICAgY29uc3QgY2hpbGRyZW4gPSAoREFUQS5zdWJqZWN0cyB8fCBbXSkuZmlsdGVyKHMgPT4gREFUQS5zdWJqZWN0TWV0YVtzXT8ucGFyZW50ID09PSBzdWJqZWN0KTsKICAgICAgICByZXR1cm4gY2hpbGRyZW4ucmVkdWNlKChzdW0sIGNoaWxkKSA9PiBzdW0gKyBnZXRIb3Vyc0ZvckNsYXNzU3ViamVjdChjSWQsIGxldmVsTmFtZSwgY2hpbGQpLCAwKTsKICAgIH0KICAgIAogICAgY29uc3QgY2ZnID0gKERBVEEuY2xhc3NPdmVycmlkZXMgJiYgREFUQS5jbGFzc092ZXJyaWRlc1tjSWRdICYmIERBVEEuY2xhc3NPdmVycmlkZXNbY0lkXVtzdWJqZWN0XSkgCiAgICAgICAgICAgICAgICA/IERBVEEuY2xhc3NPdmVycmlkZXNbY0lkXVtzdWJqZWN0XSAKICAgICAgICAgICAgICAgIDogKERBVEEubGV2ZWxDb25maWdbbGV2ZWxOYW1lXSA/IERBVEEubGV2ZWxDb25maWdbbGV2ZWxOYW1lXVtzdWJqZWN0XSA6IG51bGwpOwogICAgCiAgICByZXR1cm4gY2ZnID8gKGdldEVmZmVjdGl2ZUJhc2UoY2ZnKSArIChjZmcubWFyZ2UgfHwgMCkpICogKGNmZy5jb2VmIHx8IDEpIDogMDsKfQovKioKICogQ2FsY3VsZSBsYSBzb21tZSBkZSBUT1VURVMgbGVzIGhldXJlcyBhc3NpZ27DqWVzIMOgIHVuIHByb2YKICogKFRvdXRlcyBtYXRpw6hyZXMgZXQgdG91dGVzIGNsYXNzZXMgY29uZm9uZHVlcykKICovCi8qKgogKiBDYWxjdWxlIGxlIHNlcnZpY2UgdG90YWwgZCd1biBlbnNlaWduYW50IGRhbnMgbCdlbnRpdMOpIGNvdXJhbnRlCiAqIFV0aWxpc2UgY2FsY1RlYWNoZXJIb3Vyc0JyZWFrZG93biBwb3VyIHRlbmlyIGNvbXB0ZSBkZSBUT1VURVMgbGVzIG1hdGnDqHJlcywKICogZGUgbGEgcG9uZMOpcmF0aW9uIHBsYWZvbm7DqWUsIGV0IGRlcyBFRFMuCiAqLwpmdW5jdGlvbiBnZXRHbG9iYWxUZWFjaGVyU2VydmljZSh0SWR4KSB7CiAgICByZXR1cm4gY2FsY1RlYWNoZXJIb3Vyc0JyZWFrZG93bih0SWR4LCBjdXJyZW50RW50aXR5KS53ZWlnaHRlZDsKfQoKbGV0IGN1cnJlbnRTdWJqZWN0Rm9yTGlua2luZyA9ICIiOyAvLyBWYXJpYWJsZSBnbG9iYWxlIHRlbXBvcmFpcmUKCmZ1bmN0aW9uIG9wZW5MaW5rZWRTdWJqZWN0c01vZGFsKHN1YmplY3ROYW1lKSB7CiAgICBjdXJyZW50U3ViamVjdEZvckxpbmtpbmcgPSBzdWJqZWN0TmFtZTsKICAgIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsaW5rZWQtc3ViamVjdHMtbGlzdCcpOwogICAgY29uc3QgdGl0bGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbGlua2VkLW1vZGFsLXRhcmdldC1uYW1lJyk7CiAgICBjb25zdCBvdmVybGF5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xpbmtlZC1zdWJqZWN0cy1vdmVybGF5Jyk7CiAgICAKICAgIC8vIFRpdHJlCiAgICB0aXRsZS5pbm5lclRleHQgPSBzdWJqZWN0TmFtZTsKICAgIGNvbnRhaW5lci5pbm5lckhUTUwgPSAnJzsKICAgIAogICAgLy8gUsOpY3Vww6lyYXRpb24gZGVzIGRvbm7DqWVzIGV4aXN0YW50ZXMKICAgIGNvbnN0IG0gPSBEQVRBLnN1YmplY3RNZXRhW3N1YmplY3ROYW1lXTsKICAgIGNvbnN0IGxpbmtlZExpc3QgPSBtLmxpbmtlZFN1YmplY3RzIHx8IFtdOwoKICAgIC8vIEfDqW7DqXJhdGlvbiBkZXMgY2FzZXMgw6AgY29jaGVyIChUb3V0ZXMgbGVzIG1hdGnDqHJlcyBzYXVmIGVsbGUtbcOqbWUpCiAgICBjb25zdCBzb3J0ZWRTdWJqZWN0cyA9IFsuLi5EQVRBLnN1YmplY3RzXS5zb3J0KCk7CiAgICAKICAgIHNvcnRlZFN1YmplY3RzLmZvckVhY2gocyA9PiB7CiAgICAgICAgaWYgKHMgIT09IHN1YmplY3ROYW1lKSB7CiAgICAgICAgICAgIGNvbnN0IGlzQ2hlY2tlZCA9IGxpbmtlZExpc3QuaW5jbHVkZXMocyk7CiAgICAgICAgICAgIGNvbnN0IHNhZmVTID0gcy5yZXBsYWNlKC8nL2csICJcXCciKTsKICAgICAgICAgICAgCiAgICAgICAgICAgIC8vIENyw6lhdGlvbiBkZSBsJ8OpbMOpbWVudCB2aXN1ZWwKICAgICAgICAgICAgY29uc3QgaXRlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xhYmVsJyk7CiAgICAgICAgICAgIGl0ZW0uc3R5bGUuY3NzVGV4dCA9IGAKICAgICAgICAgICAgICAgIGRpc3BsYXk6ZmxleDsgYWxpZ24taXRlbXM6Y2VudGVyOyBnYXA6OHB4OyAKICAgICAgICAgICAgICAgIHBhZGRpbmc6OHB4OyBiYWNrZ3JvdW5kOndoaXRlOyBib3JkZXI6MXB4IHNvbGlkICNlZWU7IAogICAgICAgICAgICAgICAgYm9yZGVyLXJhZGl1czo0cHg7IGN1cnNvcjpwb2ludGVyOyB0cmFuc2l0aW9uOjAuMXM7CiAgICAgICAgICAgIGA7CiAgICAgICAgICAgIC8vIEVmZmV0IGhvdmVyCiAgICAgICAgICAgIGl0ZW0ub25tb3VzZW92ZXIgPSAoKSA9PiBpdGVtLnN0eWxlLmJhY2tncm91bmQgPSAiI2ViZjVmYiI7CiAgICAgICAgICAgIGl0ZW0ub25tb3VzZW91dCA9ICgpID0+IGl0ZW0uc3R5bGUuYmFja2dyb3VuZCA9ICJ3aGl0ZSI7CgogICAgICAgICAgICBpdGVtLmlubmVySFRNTCA9IGAKICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJjaGVja2JveCIgCiAgICAgICAgICAgICAgICAgICAgICAgJHtpc0NoZWNrZWQgPyAnY2hlY2tlZCcgOiAnJ30gCiAgICAgICAgICAgICAgICAgICAgICAgb25jaGFuZ2U9InRvZ2dsZUxpbmtlZFN1YmplY3RJbk1vZGFsKCcke3NhZmVTfScpIgogICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPSJ3aWR0aDoxNnB4OyBoZWlnaHQ6MTZweDsgY3Vyc29yOnBvaW50ZXI7Ij4KICAgICAgICAgICAgICAgIDxzcGFuIHN0eWxlPSJmb250LXNpemU6MC45cmVtOyBjb2xvcjojMmMzZTUwOyBmb250LXdlaWdodDo1MDA7Ij4ke3N9PC9zcGFuPgogICAgICAgICAgICBgOwogICAgICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoaXRlbSk7CiAgICAgICAgfQogICAgfSk7CgogICAgLy8gQWZmaWNoYWdlCiAgICBvdmVybGF5LnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7Cn0KCmZ1bmN0aW9uIHRvZ2dsZUxpbmtlZFN1YmplY3RJbk1vZGFsKGxpbmtlZFN1YmplY3QpIHsKICAgIGlmICghY3VycmVudFN1YmplY3RGb3JMaW5raW5nKSByZXR1cm47CiAgICBjb25zdCBtID0gREFUQS5zdWJqZWN0TWV0YVtjdXJyZW50U3ViamVjdEZvckxpbmtpbmddOwogICAgCiAgICBpZiAoIW0ubGlua2VkU3ViamVjdHMpIG0ubGlua2VkU3ViamVjdHMgPSBbXTsKICAgIAogICAgY29uc3QgaWR4ID0gbS5saW5rZWRTdWJqZWN0cy5pbmRleE9mKGxpbmtlZFN1YmplY3QpOwogICAgaWYgKGlkeCA+IC0xKSB7CiAgICAgICAgbS5saW5rZWRTdWJqZWN0cy5zcGxpY2UoaWR4LCAxKTsKICAgIH0gZWxzZSB7CiAgICAgICAgbS5saW5rZWRTdWJqZWN0cy5wdXNoKGxpbmtlZFN1YmplY3QpOwogICAgfQogICAgCiAgICBzYXZlRGF0YSgpOwogICAgLy8gT24gbmUgcmVjaGFyZ2UgcGFzIGxhIHBhZ2UgaWNpIHBvdXIgZ2FyZGVyIGxhIGZsdWlkaXTDqSBkYW5zIGxhIG1vZGFsZQp9CgpmdW5jdGlvbiBjbG9zZUxpbmtlZFN1YmplY3RzTW9kYWwoKSB7CiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbGlua2VkLXN1YmplY3RzLW92ZXJsYXknKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOwogICAgY3VycmVudFN1YmplY3RGb3JMaW5raW5nID0gIiI7CiAgICAKICAgIC8vIE9uIHJlY2hhcmdlIGxhIGxpc3RlIGRlcyBtYXRpw6hyZXMgcG91ciBtZXR0cmUgw6Agam91ciBsZXMgY29tcHRldXJzIHN1ciBsZXMgYm91dG9ucwogICAgcmVuZGVyU3ViamVjdHNDb25maWcoKTsKfQoKZnVuY3Rpb24gc2FuaXRpemVMZWdhY3lEYXRhKCkgewogICAgaWYgKCFEQVRBLmVkcykgcmV0dXJuOwoKICAgIC8vIDEuIERpY3Rpb25uYWlyZSBkZXMgc3lub255bWVzIGNvdXJhbnRzIChNaW51c2N1bGUgc2FucyBhY2NlbnQgLT4gTm9tIE9mZmljaWVsIEVEUykKICAgIC8vIENlbGEgcGVybWV0IGRlIGZhaXJlIGxlIGxpZW4gZW50cmUgIk1hdGhzIiAoc2Fpc2kgbWFpbikgZXQgIk1hdGjDqW1hdGlxdWVzIiAoRURTKQogICAgY29uc3QgYWxpYXNlcyA9IHsKICAgICAgICAibWF0aHMiOiAiTWF0aMOpbWF0aXF1ZXMiLAogICAgICAgICJtYXRoIjogIk1hdGjDqW1hdGlxdWVzIiwKICAgICAgICAibWF0aGVtYXRpcXVlcyI6ICJNYXRow6ltYXRpcXVlcyIsCiAgICAgICAgInNlcyI6ICJTY2llbmNlcyDDiWNvbm9taXF1ZXMgZXQgU29jaWFsZXMiLAogICAgICAgICJlY28iOiAiU2NpZW5jZXMgw4ljb25vbWlxdWVzIGV0IFNvY2lhbGVzIiwKICAgICAgICAibnNpIjogIk51bcOpcmlxdWUgZXQgU2NpZW5jZXMgSW5mb3JtYXRpcXVlcyIsCiAgICAgICAgInNpIjogIlNjaWVuY2VzIGRlIGwnSW5nw6luaWV1ciIsCiAgICAgICAgInN2dCI6ICJTY2llbmNlcyBkZSBsYSBWaWUgZXQgZGUgbGEgVGVycmUiLAogICAgICAgICJiaW8iOiAiU2NpZW5jZXMgZGUgbGEgVmllIGV0IGRlIGxhIFRlcnJlIiwKICAgICAgICAibGxjZSI6ICJMTENFIEFuZ2xhaXMiLCAvLyBvdSBhdXRyZSBsYW5ndWUgc2Vsb24gdm90cmUgbWVudQogICAgICAgICJhbWMiOiAiTExDRSBBbmdsYWlzIE1vbmRlIENvbnRlbXBvLiIsCiAgICAgICAgImhscCI6ICJIdW1hbml0w6lzLCBMaXR0w6lyYXR1cmUgZXQgUGhpbG9zb3BoaWUiLAogICAgICAgICJoZ2dzcCI6ICJIaXN0b2lyZS1Hw6lvLCBHw6lvcG9saXRpcXVlICYgU1AiLAogICAgICAgICJoZ2ciOiAiSGlzdG9pcmUtR8OpbywgR8Opb3BvbGl0aXF1ZSAmIFNQIiwKICAgICAgICAiZ2VvcG8iOiAiSGlzdG9pcmUtR8OpbywgR8Opb3BvbGl0aXF1ZSAmIFNQIiwKICAgICAgICAicGh5c2lxdWUiOiAiUGh5c2lxdWUtQ2hpbWllIiwKICAgICAgICAicGMiOiAiUGh5c2lxdWUtQ2hpbWllIgogICAgfTsKCiAgICAvLyBGb25jdGlvbiBwb3VyIG5ldHRveWVyIHVuZSBjaGFpbmUgKG1pbnVzY3VsZSwgc2FucyBhY2NlbnQsIHNhbnMgZXNwYWNlIGludXRpbGUpCiAgICBjb25zdCBjbGVhblN0ciA9IChzdHIpID0+IHN0ci50b0xvd2VyQ2FzZSgpLm5vcm1hbGl6ZSgiTkZEIikucmVwbGFjZSgvW1x1MDMwMC1cdTAzNmZdL2csICIiKS50cmltKCk7CgogICAgY29uc29sZS5sb2coIk5ldHRveWFnZSBpbnRlbGxpZ2VudCBkZXMgZG91YmxvbnMgRURTLi4uIik7CgogICAgLy8gT24gcGFyY291cnQgVE9VVEVTIGxlcyBtYXRpw6hyZXMgZXhpc3RhbnRlcyBkdSB0YWJsZWF1CiAgICBEQVRBLnN1YmplY3RzLmZvckVhY2goc3ViamVjdE5hbWUgPT4gewogICAgICAgIGNvbnN0IGNsZWFuTmFtZSA9IGNsZWFuU3RyKHN1YmplY3ROYW1lKTsKICAgICAgICAKICAgICAgICAvLyBPbiB2w6lyaWZpZSBzaSBjZXR0ZSBtYXRpw6hyZSBjb3JyZXNwb25kIMOgIHVuIEVEUyBhY3RpZiAodmlhIE5vbSBFeGFjdCBvdSBBbGlhcykKICAgICAgICBbJ3ByZW1pZXJlJywgJ3Rlcm1pbmFsZSddLmZvckVhY2gobGV2ZWwgPT4gewogICAgICAgICAgICBpZiAoREFUQS5lZHNbbGV2ZWxdKSB7CiAgICAgICAgICAgICAgICBEQVRBLmVkc1tsZXZlbF0uZm9yRWFjaChlZHNJdGVtID0+IHsKICAgICAgICAgICAgICAgICAgICBjb25zdCBjbGVhbkVkc05hbWUgPSBjbGVhblN0cihlZHNJdGVtLm5hbWUpOwogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIC8vIEVzdC1jZSBxdWUgw6dhIG1hdGNoZSA/CiAgICAgICAgICAgICAgICAgICAgLy8gMS4gTm9tIGV4YWN0IG5ldHRvecOpIChleDogIm1hdGhlbWF0aXF1ZXMiID09ICJtYXRoZW1hdGlxdWVzIikKICAgICAgICAgICAgICAgICAgICAvLyAyLiBWaWEgbCdhbGlhcyAoZXg6ICJtYXRocyIgLT4gIm1hdGhlbWF0aXF1ZXMiID09ICJtYXRoZW1hdGlxdWVzIikKICAgICAgICAgICAgICAgICAgICBjb25zdCBpc01hdGNoID0gKGNsZWFuTmFtZSA9PT0gY2xlYW5FZHNOYW1lKSB8fCAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGFsaWFzZXNbY2xlYW5OYW1lXSA9PT0gZWRzSXRlbS5uYW1lKTsKCiAgICAgICAgICAgICAgICAgICAgaWYgKGlzTWF0Y2gpIHsKICAgICAgICAgICAgICAgICAgICAgICAgLy8gQklOR08gISBDJ2VzdCB1biBkb3VibG9uLiBPbiBjYWNoZSBsYSBtYXRpw6hyZSBtYW51ZWxsZS4KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFEQVRBLnN1YmplY3RNZXRhW3N1YmplY3ROYW1lXSkgREFUQS5zdWJqZWN0TWV0YVtzdWJqZWN0TmFtZV0gPSB7fTsKICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIE9uIGFwcGxpcXVlIGxlcyB0YWdzIHBvdXIgbGEgbWFzcXVlciBkZSBsYSBncmlsbGUKICAgICAgICAgICAgICAgICAgICAgICAgREFUQS5zdWJqZWN0TWV0YVtzdWJqZWN0TmFtZV0uaXNFZHMgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICBEQVRBLnN1YmplY3RNZXRhW3N1YmplY3ROYW1lXS5tb2RlID0gJ2xldmVsJzsKICAgICAgICAgICAgICAgICAgICAgICAgREFUQS5zdWJqZWN0TWV0YVtzdWJqZWN0TmFtZV0ucGFyZW50ID0gIlNww6ljaWFsaXTDqXMiOwogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYERvdWJsb24gZMOpdGVjdMOpIGV0IGNvcnJpZ8OpIDogIiR7c3ViamVjdE5hbWV9IiBlc3QgbGnDqSDDoCBsJ0VEUyAiJHtlZHNJdGVtLm5hbWV9ImApOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICB9KTsKfQo8L3NjcmlwdD4KCjxkaXYgc3R5bGU9InBvc2l0aW9uOiBhYnNvbHV0ZSAhaW1wb3J0YW50OyB0b3A6IDBweCAhaW1wb3J0YW50OyBsZWZ0OiAwcHggIWltcG9ydGFudDsgaGVpZ2h0OiAwcHggIWltcG9ydGFudDsgd2lkdGg6IDBweCAhaW1wb3J0YW50OyBkaXNwbGF5OiBpbml0aWFsICFpbXBvcnRhbnQ7IiBkYXRhLWxhc3RwYXNzLXJvb3Q9IiI+PC9kaXY+PC9ib2R5PjwvaHRtbD4="};

    const STORAGE_KEY = 'pilote_suite_settings';
    let currentModule = null;


        updateDockActive();
function updateDockActive() {
        document.querySelectorAll('.module-card').forEach(c => c.classList.remove('active'));
        if (!currentModule) return;
        const card = document.querySelector('.module-card[data-m="' + currentModule + '"]');
        if (card) card.classList.add('active');
    }

    const loadedModules = new Set();
    const blobUrls = {};
    const moduleNames = ['perdir','exam','oral','dhg','aed','bibase','data'];

    const MODULE_META = {
        perdir: { label:'CADIR', sublabel:'Direction', icon:'fas fa-building-columns', color:'var(--c-info)' },
        exam:   { label:'Écrit', sublabel:'Épreuves', icon:'fas fa-file-pen', color:'var(--c-accent)' },
        oral:   { label:'Oral',  sublabel:'Oraux', icon:'fas fa-comments', color:'var(--c-warning)' },
        dhg:    { label:'DHG',   sublabel:'Services', icon:'fas fa-chart-line', color:'var(--c-success)' },
        aed:    { label:'AED',   sublabel:'Vie Scolaire', icon:'fas fa-user-shield', color:'var(--c-success)' },
        bibase: { label:'BULLETIN', sublabel:'Information', icon:'fas fa-newspaper', color:'#e67e22' },
        data:   { label:'DONNÉES', sublabel:'Import', icon:'fas fa-database', color:'var(--c-purple)' },
    };
    const ALL_ITEMS = ['perdir','exam','oral','dhg','aed','bibase','data'];
    const DEFAULT_ORDER = ['perdir','exam','oral','dhg','aed','bibase','data'];

    // ═══ EXCEL TEMPLATES ═══
    const TEMPLATES = {
        teachers: {
            filename: 'Modele_Enseignants.xlsx',
            columns: ['Nom','Prénom','Email'],
            widths: [20,18,30]
        },
        students: {
            filename: 'Modele_Eleves.xlsx',
            columns: ['Classe','Nom','Prénom','Email','Aménagement'],
            widths: [12,18,16,28,22]
        }
    };

    function downloadTemplate(type) {
        const tpl = TEMPLATES[type];
        const wb = XLSX.utils.book_new();
        const wsData = [tpl.columns];
        // Add 2 example rows
        if (type === 'teachers') {
            wsData.push(['Dupont','Jean','j.dupont@ac-rennes.fr']);
            wsData.push(['Martin','Sophie','s.martin@ac-rennes.fr']);
        } else {
            wsData.push(['2GT1','Durand','Marie','m.durand@eleve.fr','']);
            wsData.push(['1STMG2','Leroy','Thomas','t.leroy@eleve.fr','1/3 temps']);
        }
        const ws = XLSX.utils.aoa_to_sheet(wsData);
        // Set column widths
        ws['!cols'] = tpl.widths.map(w => ({ wch: w }));
        XLSX.utils.book_append_sheet(wb, ws, type === 'teachers' ? 'Enseignants' : 'Élèves');
        XLSX.writeFile(wb, tpl.filename);
    }

    // ═══ SETTINGS ═══
    function getSettings() { try { return JSON.parse(localStorage.getItem(STORAGE_KEY)) || {}; } catch(e) { return {}; } }
    function getNavOrder() {
        const s = getSettings();
        if (s.navOrder && s.navOrder.length) {
            // Add any missing modules (not separators)
            var order = s.navOrder.slice();
            ALL_ITEMS.forEach(function(m) { if (order.indexOf(m) < 0) order.push(m); });
            // Remove deleted modules but keep separators (__sep__)
            order = order.filter(function(m) { return m === '__sep__' || ALL_ITEMS.indexOf(m) >= 0; });
            return order;
        }
        return [...DEFAULT_ORDER];
    }

    function loadSettingsUI() {
        // Restore cloud config
        var ms = JSON.parse(localStorage.getItem('pilote_master_settings') || '{}');
        if (ms.cloud) {
            if (ms.cloud.provider) { _cloudProvider = ms.cloud.provider; selectCloudProvider(ms.cloud.provider); }
            if (ms.cloud.key) document.getElementById('s-cloud-key').value = ms.cloud.key;
            if (ms.cloud.bin) document.getElementById('s-cloud-bin').value = ms.cloud.bin;
            if (ms.cloud.gistToken) document.getElementById('s-gist-token').value = ms.cloud.gistToken;
            if (ms.cloud.gistId) document.getElementById('s-gist-id').value = ms.cloud.gistId;
            if (ms.cloud.gdriveClientId) document.getElementById('s-gdrive-clientid').value = ms.cloud.gdriveClientId;
            if (ms.cloud.gdriveFileId) document.getElementById('s-gdrive-fileid').value = ms.cloud.gdriveFileId;
            if (ms.cloud.wdUrl) document.getElementById('s-webdav-url').value = ms.cloud.wdUrl;
            if (ms.cloud.wdUser) document.getElementById('s-webdav-user').value = ms.cloud.wdUser;
            if (ms.cloud.wdPass) document.getElementById('s-webdav-pass').value = ms.cloud.wdPass;
            if (ms.cloud.auto) document.getElementById('s-cloud-auto').checked = true;
            if (ms.cloud.enabled) { document.getElementById('s-cloud-enabled').checked = true; toggleCloudUI(); }
        }
        const s = getSettings();
        document.getElementById('s-school').value = s.school || '';
        document.getElementById('s-name').value = s.name || '';
        document.getElementById('s-role').value = s.role || '';
        document.getElementById('s-city').value = s.city || '';
        if(document.getElementById('s-zone')) document.getElementById('s-zone').value = s.zone || 'B';
        if(document.getElementById('s-pdf-layout')) document.getElementById('s-pdf-layout').value = s.pdfHeaderLayout || 'classique';
        if(document.getElementById('s-pdf-color'))  { document.getElementById('s-pdf-color').value = s.pdfHeaderColor || '#1b2433'; document.getElementById('s-pdf-color-hex').value = s.pdfHeaderColor || '#1b2433'; }
        if(document.getElementById('s-pdf-subtitle')) document.getElementById('s-pdf-subtitle').value = s.pdfHeaderSubtitle || '';
        updatePdfHeaderPreview();
        document.getElementById('s-gcal').checked = s.gcalEnabled || false;
        if(document.getElementById('s-gcal-clientid')) document.getElementById('s-gcal-clientid').value = s.gcalClientId || '';
        if(document.getElementById('s-gcal-key')) document.getElementById('s-gcal-key').value = s.gcalKey || '';
        toggleGcal();
        if(s.gcalCals && s.gcalCals.length) { _gcalCalsData = s.gcalCals; renderGcalList(s.gcalCals, s.gcalSel || []); renderManualList(s.gcalCals); }
        document.getElementById('s-zone').value = s.zone || 'B';
        if(document.getElementById('s-pdf-layout')) document.getElementById('s-pdf-layout').value = s.pdfHeaderLayout || 'classique';
        if(document.getElementById('s-pdf-color'))  { document.getElementById('s-pdf-color').value = s.pdfHeaderColor || '#1b2433'; document.getElementById('s-pdf-color-hex').value = s.pdfHeaderColor || '#1b2433'; }
        if(document.getElementById('s-pdf-subtitle')) document.getElementById('s-pdf-subtitle').value = s.pdfHeaderSubtitle || '';
        updatePdfHeaderPreview();
        if (s.logoSrc) {
                updateFavicon(s.logoSrc); document.getElementById('img-logo').src = s.logoSrc; document.getElementById('img-logo').style.display='block'; document.getElementById('ph-logo').style.display='none'; }
        if (s.signSrc) { document.getElementById('img-sign').src = s.signSrc; document.getElementById('img-sign').style.display='block'; document.getElementById('ph-sign').style.display='none'; }
        renderOrderList();
        updateModuleVisibility();
        updateBrandLogo();
        refreshDataUI();
    }


    function loadBibSettingsUI() {
        var bib = JSON.parse(localStorage.getItem('bibase_establishment') || '{}');
        if(bib.layout) document.getElementById('bib-layout').value = bib.layout;
        if(bib.font) document.getElementById('bib-font').value = bib.font;
        if(bib.defaultSignatory) {
            var sel = document.getElementById('bib-signatory');
            var found = false;
            for(var i=0;i<sel.options.length;i++) { if(sel.options[i].value===bib.defaultSignatory) { found=true; break; } }
            if(!found) { var o=document.createElement('option'); o.value=bib.defaultSignatory; o.text=bib.defaultSignatory; sel.appendChild(o); }
            sel.value = bib.defaultSignatory;
        }
        if(bib.docTitle) document.getElementById('bib-doc-title').value = bib.docTitle;
        if(bib.docFooter) document.getElementById('bib-doc-footer').value = bib.docFooter;
    }
    function saveBibSettings() {
        try {
            var bib = JSON.parse(localStorage.getItem('bibase_establishment') || '{}');
            var el;
            el = document.getElementById('bib-layout'); if (el) bib.layout = el.value;
            el = document.getElementById('bib-font'); if (el) bib.font = el.value;
            el = document.getElementById('bib-signatory'); if (el) bib.defaultSignatory = el.value;
            el = document.getElementById('bib-doc-title'); if (el) bib.docTitle = el.value;
            el = document.getElementById('bib-doc-footer'); if (el) bib.docFooter = el.value;
            var s = getSettings();
            if (s.school) bib.name = s.school;
            if (s.city) bib.address = s.city;
            if (s.logoSrc) bib.logo = s.logoSrc;
            localStorage.setItem('bibase_establishment', JSON.stringify(bib));
            var frame = document.getElementById('frame-bibase');
            if (frame && frame.contentWindow) {
                frame.contentWindow.postMessage({type: 'bibase-settings', data: bib}, '*');
                frame.contentWindow.postMessage({type: 'pilote-settings', data: {school: s.school||'', city: s.city||'', logoSrc: s.logoSrc||''}}, '*');
            }
        } catch(e) { console.warn('saveBibSettings:', e); }
    }
function saveSettings() {
        // 1. Save main settings first (critical)
        try {
            var s = getSettings();
            s.school = document.getElementById('s-school').value;
            s.name = document.getElementById('s-name').value;
            s.role = document.getElementById('s-role').value;
            s.city = document.getElementById('s-city').value;
            s.zone = document.getElementById('s-zone').value;
            if(document.getElementById('s-pdf-layout')) s.pdfHeaderLayout = document.getElementById('s-pdf-layout').value;
            if(document.getElementById('s-pdf-color'))  { var col = document.getElementById('s-pdf-color').value || document.getElementById('s-pdf-color-hex').value; s.pdfHeaderColor = col; document.getElementById('s-pdf-color-hex').value = col; }
            if(document.getElementById('s-pdf-subtitle')) s.pdfHeaderSubtitle = document.getElementById('s-pdf-subtitle').value;
            s.gcalEnabled = document.getElementById('s-gcal').checked;
            if(document.getElementById('s-gcal-clientid')) s.gcalClientId = document.getElementById('s-gcal-clientid').value;
            if(document.getElementById('s-gcal-key')) s.gcalKey = document.getElementById('s-gcal-key').value;
            s.gcalSel = getGcalSel();
            var logoImg = document.getElementById('img-logo');
            s.logoSrc = (logoImg && logoImg.style.display !== 'none') ? logoImg.src : '';
            var signImg = document.getElementById('img-sign');
            s.signSrc = (signImg && signImg.style.display !== 'none') ? signImg.src : '';
            moduleNames.forEach(function(m) { var tog = document.getElementById('tog-' + m); if(tog) s['show_' + m] = tog.checked; });
            s.navOrder = getCurrentOrderFromList();
            s._lastSync = new Date().toISOString();
            localStorage.setItem(STORAGE_KEY, JSON.stringify(s));
        } catch(e1) { console.error('saveSettings main:', e1); }
        // 2. Save cloud config (independent)
        try {
            var cs = getCloudConfig();
            var ms = JSON.parse(localStorage.getItem('pilote_master_settings') || '{}');
            ms.cloud = cs;
            localStorage.setItem('pilote_master_settings', JSON.stringify(ms));
            setTimeout(cloudAutoSync, 800);
        } catch(e2) { console.error('saveSettings cloud:', e2); }
        // 3. Save BiBase settings (independent)
        try { saveBibSettings(); } catch(e3) { console.error('saveSettings bib:', e3); }
        // 4. Save PERDIR submenu config
        try {
            var perdirCfg = [];
            document.querySelectorAll('#perdir-submenu-list .order-item').forEach(function(item) {
                var menuId = item.dataset.menuid;
                if (menuId === '__sep__') {
                    perdirCfg.push({id: '__sep__'});
                } else {
                    var chk = item.querySelector('input[type=checkbox]');
                    perdirCfg.push({id: menuId, visible: chk ? chk.checked : true});
                }
            });
            if (perdirCfg.length) {
                var ms2 = JSON.parse(localStorage.getItem('pilote_master_settings') || '{}');
                ms2.perdirMenus = perdirCfg;
                localStorage.setItem('pilote_master_settings', JSON.stringify(ms2));
            }
        } catch(e4) { console.error('saveSettings perdir:', e4); }
        // 5. Apply changes (each independent)
        try { updateModuleVisibility(); } catch(e) {}
        try { updateBrandLogo(); } catch(e) {}
        try { applyNavOrder(); } catch(e) {}
        try { pushSettingsToAllModules(); } catch(e) {}
        try {
            var bibFrame = document.getElementById('frame-bibase');
            if (bibFrame && bibFrame.contentWindow) {
                var bibData = JSON.parse(localStorage.getItem('bibase_establishment') || '{}');
                bibFrame.contentWindow.postMessage({type: 'bibase-settings', data: bibData}, '*');
            }
        } catch(e) {}
        closeSettings();
        if (_lfDirHandle) { lfMarkDirty(); setTimeout(function(){ lfWriteToFolder(); }, 500); }
    }


    function updateBrandLogo() {
        const s = getSettings();
        const brandLetter = document.getElementById('brandLetter');
        const brandLogo = document.getElementById('brandLogo');
        const welcomeLetter = document.getElementById('welcomeLetter');
        const welcomeLogoImg = document.getElementById('welcomeLogoImg');
        const welcomeSubtitle = document.getElementById('welcomeSubtitle');
        const bottomInfo = document.getElementById('bottomBarInfo');

        const brandIconEl = document.getElementById('brandIcon');
        const welcomeLogoEl = document.getElementById('welcomeLogo');
        if (s.logoSrc) {
                updateFavicon(s.logoSrc);
            brandLetter.style.display = 'none';
            brandLogo.src = s.logoSrc;
            brandLogo.style.display = 'block';
            brandIconEl.style.background = 'none';
            brandIconEl.style.boxShadow = 'none';
            welcomeLetter.style.display = 'none';
            welcomeLogoImg.src = s.logoSrc;
            welcomeLogoImg.style.display = 'block';
            welcomeLogoEl.style.background = 'none';
            welcomeLogoEl.style.boxShadow = 'none';
            welcomeLogoEl.style.borderRadius = '0';
            welcomeLogoEl.style.width = 'auto';
            welcomeLogoEl.style.height = 'auto';
        } else {
            brandLetter.style.display = '';
            brandLogo.style.display = 'none';
            brandIconEl.style.background = '';
            brandIconEl.style.boxShadow = '';
            welcomeLetter.style.display = '';
            welcomeLogoImg.style.display = 'none';
            welcomeLogoEl.style.background = '';
            welcomeLogoEl.style.boxShadow = '';
        }
        // Update school name in subtitle & bottom bar
        if (s.school) {
            welcomeSubtitle.textContent = s.school + ' — Suite de direction';
            bottomInfo.textContent = 'Pilote Suite — ' + s.school;
        } else {
            welcomeSubtitle.textContent = 'Suite d\'outils pour la direction d\'établissement';
            bottomInfo.textContent = 'CADIR Suite — Direction';
        }
    }

    function handleSettingsImage(input, type) {
        const file = input.files[0]; if (!file) return;
        const reader = new FileReader();
        reader.onload = function(e) {
            document.getElementById('img-' + type).src = e.target.result;
            document.getElementById('img-' + type).style.display = 'block';
            document.getElementById('ph-' + type).style.display = 'none';
        };
        reader.readAsDataURL(file);
    }

    function clearImage(type) {
        document.getElementById('img-' + type).style.display = 'none';
        document.getElementById('img-' + type).src = '';
        document.getElementById('ph-' + type).style.display = '';
    }

    function openSettings() {
        renderPerdirSubmenus(); loadSettingsUI(); loadBibSettingsUI();
        if (typeof lfInitMode === 'function') lfInitMode();
        document.getElementById('settingsOverlay').classList.add('open'); }

    var _gcalAccessToken = null;
    var _gcalCalsData = [];

    function toggleGcal() {
        var checked = document.getElementById('s-gcal').checked;
        document.getElementById('gcal-opts').style.display = checked ? 'block' : 'none';
        var s = getSettings();
        s.gcalEnabled = checked;
        localStorage.setItem(STORAGE_KEY, JSON.stringify(s));
        pushSettingsToAllModules();
    }

    function gcalAuth() {
        if (window.location.protocol === 'file:') {
            var iframe = document.querySelector('.module-frame.active');
            if (iframe && iframe.contentWindow && (function(){try{return iframe.contentWindow.location.protocol==='file:';}catch(e){return false;}})()) {}
            alert('\u26a0 Google Agenda nécessite un serveur web local.\n\nPour lancer :\n1. Ouvrez un terminal dans le dossier contenant PILOTE_Suite.html\n2. Tapez : python3 -m http.server 8080\n3. Ouvrez http://localhost:8080/PILOTE_Suite.html\n\nL\'authentification OAuth2 ne fonctionne pas depuis file://.');
            document.getElementById('gcal-auth-status').innerHTML = '<span style=\"color:#e74c3c\"><i class=\"fas fa-exclamation-triangle\"></i> Nécessite http://localhost</span>';
            return;
        }
        var clientId = document.getElementById('s-gcal-clientid').value.trim();
        if (!clientId) { alert('Veuillez saisir un Client ID OAuth2.'); return; }
        document.getElementById('gcal-auth-status').innerHTML = '<i class="fas fa-spinner fa-spin"></i> Chargement...';
        function _doGcalAuth() {
            document.getElementById('gcal-auth-status').innerHTML = '<i class="fas fa-spinner fa-spin"></i> Connexion...';
        var tokenClient = google.accounts.oauth2.initTokenClient({
            client_id: clientId,
            scope: 'https://www.googleapis.com/auth/calendar.events https://www.googleapis.com/auth/calendar.readonly',
            callback: function(resp) {
                if (resp.error) {
                    document.getElementById('gcal-auth-status').innerHTML = '<span style="color:#e74c3c;"><i class="fas fa-times"></i> ' + (resp.error_description || resp.error) + '</span>';
                    return;
                }
                _gcalAccessToken = resp.access_token;
                window._gcalAccessToken = resp.access_token;
                if (resp.expires_in) window._gcalTokenExpiresAt = Date.now() + (resp.expires_in * 1000);
                try{ sessionStorage.setItem('pilote_gcal_token', resp.access_token); sessionStorage.setItem('pilote_gcal_token_exp', String(window._gcalTokenExpiresAt)); }catch(e){}
                document.getElementById('gcal-auth-status').innerHTML = '<span style="color:#34a853;"><i class="fas fa-check"></i> Connect\u00e9</span>';
                document.getElementById('btn-gcal-auth').innerHTML = '<i class="fas fa-check-circle"></i> Connect\u00e9';
                document.getElementById('btn-gcal-auth').style.background = '#34a853';
                fetchGcalList();
            }
        });
        tokenClient.requestAccessToken();
        }
        if (typeof google !== 'undefined' && google.accounts && google.accounts.oauth2) {
            _doGcalAuth();
        } else {
            var s = document.createElement('script');
            s.src = 'https://accounts.google.com/gsi/client';
            s.async = true;
            s.onload = function() { _doGcalAuth(); };
            s.onerror = function() {
                document.getElementById('gcal-auth-status').innerHTML = '<span style="color:#e74c3c;"><i class="fas fa-exclamation-triangle"></i> Impossible de charger la bibliothèque Google (vérifiez votre connexion)</span>';
            };
            document.head.appendChild(s);
        }
    }

    function fetchGcalList() {
        if (!_gcalAccessToken) return;
        var div = document.getElementById('gcal-list');
        div.innerHTML = '<span style="color:#888;font-size:.78rem;"><i class="fas fa-spinner fa-spin"></i> Chargement...</span>';
        fetch('https://www.googleapis.com/calendar/v3/users/me/calendarList', {
            headers: { 'Authorization': 'Bearer ' + _gcalAccessToken }
        })
        .then(function(r) { if (!r.ok) throw new Error('Erreur ' + r.status); return r.json(); })
        .then(function(data) {
            if (!data.items || !data.items.length) { div.innerHTML = '<span style="color:#e74c3c;">Aucun agenda.</span>'; return; }
            var s = getSettings();
            _gcalCalsData = data.items.map(function(c) { return {id: c.id, name: c.summary, bg: c.backgroundColor || '#4285f4', primary: c.primary || false}; });
            s.gcalCals = _gcalCalsData;
            localStorage.setItem(STORAGE_KEY, JSON.stringify(s));
            renderGcalList(_gcalCalsData, s.gcalSel || []);
            document.getElementById('gcal-list-wrap').style.display = 'block';
            /* Auto-sync events after calendar list loaded */
            setTimeout(function(){ try{ gcalFetchEvents(); }catch(e){} }, 300);
        })
        .catch(function(err) {
            div.innerHTML = '<span style="color:#e74c3c;font-size:.78rem;"><i class="fas fa-exclamation-triangle"></i> ' + err.message + '</span>';
        });
    }

    function renderGcalList(cals, sel) {
        var div = document.getElementById('gcal-list');
        if (!cals || !cals.length) { div.innerHTML = ''; return; }
        var h = '';
        cals.forEach(function(c) {
            var checked = sel.indexOf(c.id) >= 0 || (sel.length === 0 && c.primary);
            h += '<label style="display:flex;align-items:center;gap:8px;padding:5px 8px;font-size:.78rem;cursor:pointer;border-radius:6px;">';
            h += '<input type="checkbox" class="gcal-chk" value="' + c.id + '" ' + (checked ? 'checked' : '') + ' style="accent-color:' + c.bg + ';">';
            h += '<span style="width:12px;height:12px;border-radius:3px;background:' + c.bg + ';flex-shrink:0;"></span>';
            h += '<span>' + c.name + (c.primary ? ' <small style="color:#888;">(principal)</small>' : '') + '</span>';
            h += '</label>';
        });
        div.innerHTML = h;
        document.getElementById('gcal-list-wrap').style.display = 'block';
    }

    function getGcalSel() { return Array.from(document.querySelectorAll('.gcal-chk:checked')).map(function(c) { return c.value; }); }

    function gcalFetchEvents() {
        var sel = getGcalSel();
        if (!sel.length) { alert('S\u00e9lectionnez au moins un agenda.'); return; }
        var useOAuth = !!_gcalAccessToken;
        var apiKey = document.getElementById('s-gcal-key') ? document.getElementById('s-gcal-key').value.trim() : '';
        if (!useOAuth && !apiKey) { alert('Connectez-vous via OAuth2 ou saisissez une cl\u00e9 API.'); return; }

        var statusEl = document.getElementById('gcal-events-status');
        statusEl.innerHTML = '<i class="fas fa-spinner fa-spin"></i> R\u00e9cup\u00e9ration...';

        var now = new Date();
        var start = new Date(now.getFullYear(), now.getMonth() - 2, 1).toISOString();
        var end = new Date(now.getFullYear(), now.getMonth() + 4, 0).toISOString();

        var calMap = {};
        (_gcalCalsData.length ? _gcalCalsData : (getSettings().gcalCals || [])).forEach(function(c) { calMap[c.id] = c; });

        var promises = sel.map(function(calId) {
            var url = 'https://www.googleapis.com/calendar/v3/calendars/' + encodeURIComponent(calId) + '/events?timeMin=' + encodeURIComponent(start) + '&timeMax=' + encodeURIComponent(end) + '&singleEvents=true&orderBy=startTime&maxResults=500';
            var opts = {};
            if (useOAuth) { opts.headers = { 'Authorization': 'Bearer ' + _gcalAccessToken }; }
            else { url += '&key=' + apiKey; }
            return fetch(url, opts).then(function(r) { return r.ok ? r.json() : {items:[]}; }).catch(function() { return {items:[]}; });
        });

        Promise.all(promises).then(function(results) {
            var events = [];
            results.forEach(function(data, i) {
                var calId = sel[i];
                var calInfo = calMap[calId] || {name: calId, bg: '#4285f4'};
                (data.items || []).forEach(function(ev) {
                    if (!ev.start) return;
                    var startDate = ev.start.date || (ev.start.dateTime ? ev.start.dateTime.split('T')[0] : null);
                    if (!startDate) return;
                    var startTime = ev.start.dateTime ? ev.start.dateTime.split('T')[1].substring(0, 5) : '';
                    var endTime = ev.end && ev.end.dateTime ? ev.end.dateTime.split('T')[1].substring(0, 5) : '';
                    events.push({ id: ev.id, title: ev.summary || '(sans titre)', date: startDate, time: startTime, endTime: endTime, calName: calInfo.name, color: calInfo.bg, calId: calId });
                });
            });
            events.sort(function(a, b) { return (a.date + ' ' + (a.time || '00:00')).localeCompare(b.date + ' ' + (b.time || '00:00')); });

            var s = getSettings();
            s.gcalEvents = events;
            s.gcalSel = sel;
            localStorage.setItem(STORAGE_KEY, JSON.stringify(s));

            statusEl.innerHTML = '<span style="color:#34a853;"><i class="fas fa-check"></i> ' + events.length + ' \u00e9v\u00e9nement(s) synchronis\u00e9(s)</span>';
            pushGcalToModules();
            /* Refresh home page events immediately */
            if (typeof renderHomeTodayEvents === 'function') try{ renderHomeTodayEvents(); }catch(e){}
        });
    }


    // ═══ OUTLOOK / OFFICE 365 CALENDAR ═══
    var _outlookToken = null;
    var _outlookCals = [];

    function outlookAuth() {
        var clientId = (document.getElementById('s-outlook-clientid').value || '').trim();
        if (!clientId) return alert('Saisissez l\'Application (client) ID');
        var redir = location.origin + location.pathname;
        var scope = 'Calendars.ReadWrite';
        var url = 'https://login.microsoftonline.com/common/oauth2/v2.0/authorize?client_id='+encodeURIComponent(clientId)+'&response_type=token&redirect_uri='+encodeURIComponent(redir)+'&scope='+encodeURIComponent(scope);
        var w = window.open(url, '_blank', 'width=500,height=600');
        var check = setInterval(function() {
            try {
                if (w.closed) { clearInterval(check); return; }
                if (w.location.hash) {
                    var params = new URLSearchParams(w.location.hash.substring(1));
                    var tk = params.get('access_token');
                    if (tk) {
                        _outlookToken = tk;
                        w.close(); clearInterval(check);
                        document.getElementById('outlook-auth-status').innerHTML = '<span style="color:#0078d4"><i class="fas fa-check-circle"></i> Connecté</span>';
                        document.getElementById('btn-outlook-auth').innerHTML = '<i class="fas fa-check-circle"></i> Connecté';
                        document.getElementById('btn-outlook-auth').style.background = '#0078d4';
                        outlookFetchCalendars();
                    }
                }
            } catch(e) {}
        }, 500);
    }

    function outlookFetchCalendars() {
        if (!_outlookToken) return;
        fetch('https://graph.microsoft.com/v1.0/me/calendars', {
            headers: { 'Authorization': 'Bearer ' + _outlookToken }
        }).then(function(r) { return r.json(); }).then(function(data) {
            _outlookCals = (data.value || []).map(function(c) { return {id:c.id, name:c.name, color:c.hexColor||'#0078d4'}; });
            var div = document.getElementById('outlook-cal-list');
            var s = getSettings();
            var sel = s.outlookSel || [];
            div.innerHTML = _outlookCals.map(function(c) {
                var chk = sel.indexOf(c.id) >= 0 || sel.length === 0 ? 'checked' : '';
                return '<label style="display:flex;align-items:center;gap:6px;margin:4px 0;font-size:.78rem;cursor:pointer;"><input type="checkbox" class="outlook-cal-chk" value="'+c.id+'" '+chk+'><span style="width:10px;height:10px;border-radius:50%;background:'+(c.color||'#0078d4')+'"></span>'+c.name+'</label>';
            }).join('');
            document.getElementById('outlook-cal-list-wrap').style.display = 'block';
        }).catch(function(err) {
            document.getElementById('outlook-auth-status').innerHTML = '<span style="color:#e74c3c">'+err.message+'</span>';
        });
    }

    function getOutlookSel() {
        var chks = document.querySelectorAll('.outlook-cal-chk:checked');
        return Array.from(chks).map(function(c) { return c.value; });
    }

    function outlookFetchEvents() {
        var sel = getOutlookSel();
        if (!sel.length) { alert('Sélectionnez au moins un agenda Outlook.'); return; }
        if (!_outlookToken) { alert('Connectez Outlook d\'abord.'); return; }

        var statusEl = document.getElementById('outlook-events-status');
        statusEl.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Récupération...';

        var now = new Date();
        var start = new Date(now.getFullYear(), now.getMonth() - 2, 1).toISOString();
        var end = new Date(now.getFullYear(), now.getMonth() + 4, 0).toISOString();

        var calMap = {};
        _outlookCals.forEach(function(c) { calMap[c.id] = c; });

        var promises = sel.map(function(calId) {
            var url = 'https://graph.microsoft.com/v1.0/me/calendars/' + encodeURIComponent(calId) + '/events?$select=subject,start,end,id&$filter=start/dateTime ge \''+start+'\' and start/dateTime le \''+end+'\'&$top=500&$orderby=start/dateTime';
            return fetch(url, {
                headers: { 'Authorization': 'Bearer ' + _outlookToken, 'Prefer': 'outlook.timezone="Europe/Paris"' }
            }).then(function(r) { return r.ok ? r.json() : {value:[]}; }).catch(function() { return {value:[]}; });
        });

        Promise.all(promises).then(function(results) {
            var events = [];
            results.forEach(function(data, i) {
                var calId = sel[i];
                var calInfo = calMap[calId] || {name:'Outlook', color:'#0078d4'};
                (data.value || []).forEach(function(ev) {
                    if (!ev.start) return;
                    var startDT = ev.start.dateTime || '';
                    var startDate = startDT.split('T')[0];
                    var startTime = startDT.indexOf('T') >= 0 ? startDT.split('T')[1].substring(0,5) : '';
                    var endDT = ev.end ? (ev.end.dateTime||'') : '';
                    var endTime = endDT.indexOf('T') >= 0 ? endDT.split('T')[1].substring(0,5) : '';
                    if (startTime === '00:00' && endTime === '00:00') { startTime = ''; endTime = ''; }
                    events.push({id:ev.id, title:ev.subject||'(sans titre)', date:startDate, time:startTime, endTime:endTime, calName:calInfo.name, color:calInfo.color, calId:calId});
                });
            });

            var s = getSettings();
            s.outlookEvents = events;
            s.outlookSel = sel;
            s.outlookEnabled = true;
            localStorage.setItem(STORAGE_KEY, JSON.stringify(s));

            statusEl.innerHTML = '<span style="color:#0078d4"><i class="fas fa-check"></i> '+events.length+' événement(s)</span>';
            pushOutlookToModules();
        });
    }

    function pushOutlookToModules() {
        var s = getSettings();
        var frame = document.getElementById('frame-perdir');
        if (frame && frame.contentWindow) {
            frame.contentWindow.postMessage({ type: 'pilote-outlook', data: {
                outlookEvents: s.outlookEvents || [],
                outlookCals: _outlookCals || [],
                outlookSel: s.outlookSel || [],
                outlookEnabled: s.outlookEnabled || false
            }}, '*');
        }
    }

    // Outlook CRUD
    function outlookAddEvent(data) {
        if (!_outlookToken) { alert('Outlook non connecté'); return; }
        var body = { subject: data.title };
        if (data.time) {
            body.start = { dateTime: data.date + 'T' + data.time + ':00', timeZone: 'Europe/Paris' };
            body.end = { dateTime: data.date + 'T' + (data.endTime || data.time) + ':00', timeZone: 'Europe/Paris' };
        } else {
            body.isAllDay = true;
            body.start = { dateTime: data.date + 'T00:00:00', timeZone: 'Europe/Paris' };
            body.end = { dateTime: data.date + 'T23:59:00', timeZone: 'Europe/Paris' };
        }
        fetch('https://graph.microsoft.com/v1.0/me/calendars/' + encodeURIComponent(data.calId) + '/events', {
            method: 'POST', headers: { 'Authorization': 'Bearer ' + _outlookToken, 'Content-Type': 'application/json' }, body: JSON.stringify(body)
        }).then(function(r) { if (!r.ok) throw new Error(r.status); notifyPerdirCrudOk(); outlookFetchEvents(); })
        .catch(function(err) { alert('Erreur Outlook: ' + err.message); });
    }
    function outlookUpdateEvent(data) {
        if (!_outlookToken) { alert('Outlook non connecté'); return; }
        var body = { subject: data.title };
        if (data.time) {
            body.start = { dateTime: data.date + 'T' + data.time + ':00', timeZone: 'Europe/Paris' };
            body.end = { dateTime: data.date + 'T' + (data.endTime || data.time) + ':00', timeZone: 'Europe/Paris' };
        } else {
            body.isAllDay = true;
            body.start = { dateTime: data.date + 'T00:00:00', timeZone: 'Europe/Paris' };
            body.end = { dateTime: data.date + 'T23:59:00', timeZone: 'Europe/Paris' };
        }
        fetch('https://graph.microsoft.com/v1.0/me/events/' + encodeURIComponent(data.eventId), {
            method: 'PATCH', headers: { 'Authorization': 'Bearer ' + _outlookToken, 'Content-Type': 'application/json' }, body: JSON.stringify(body)
        }).then(function(r) { if (!r.ok) throw new Error(r.status); notifyPerdirCrudOk(); outlookFetchEvents(); })
        .catch(function(err) { alert('Erreur Outlook: ' + err.message); });
    }
    function outlookDeleteEvent(data) {
        if (!_outlookToken) { alert('Outlook non connecté'); return; }
        fetch('https://graph.microsoft.com/v1.0/me/events/' + encodeURIComponent(data.eventId), {
            method: 'DELETE', headers: { 'Authorization': 'Bearer ' + _outlookToken }
        }).then(function(r) { if (r.status !== 204 && !r.ok) throw new Error(r.status); notifyPerdirCrudOk(); outlookFetchEvents(); })
        .catch(function(err) { alert('Erreur Outlook: ' + err.message); });
    }

    // ═══ GOOGLE CALENDAR CRUD ═══
    function gcalAddEvent(data) {
        if (!_gcalAccessToken) { alert('Google Agenda non connecté'); return; }
        var body = { summary: data.title };
        if (data.time) {
            body.start = { dateTime: data.date + 'T' + data.time + ':00', timeZone: 'Europe/Paris' };
            body.end = { dateTime: data.date + 'T' + (data.endTime || data.time) + ':00', timeZone: 'Europe/Paris' };
        } else {
            body.start = { date: data.date };
            body.end = { date: data.date };
        }
        fetch('https://www.googleapis.com/calendar/v3/calendars/' + encodeURIComponent(data.calId) + '/events', {
            method: 'POST',
            headers: { 'Authorization': 'Bearer ' + _gcalAccessToken, 'Content-Type': 'application/json' },
            body: JSON.stringify(body)
        }).then(function(r) {
            if (!r.ok) throw new Error('Erreur ' + r.status);
            return r.json();
        }).then(function() {
            notifyPerdirCrudOk();
            gcalFetchEvents();
        }).catch(function(err) { alert('Erreur ajout Google: ' + err.message); });
    }

    function gcalUpdateEvent(data) {
        if (!_gcalAccessToken) { alert('Google Agenda non connecté'); return; }
        var calId = data.calId;
        // If no calId, try to find from selected calendars
        if (!calId) {
            var sel = getGcalSel();
            calId = sel.length ? sel[0] : 'primary';
        }
        var body = { summary: data.title };
        if (data.time) {
            body.start = { dateTime: data.date + 'T' + data.time + ':00', timeZone: 'Europe/Paris' };
            body.end = { dateTime: data.date + 'T' + (data.endTime || data.time) + ':00', timeZone: 'Europe/Paris' };
        } else {
            body.start = { date: data.date };
            body.end = { date: data.date };
        }
        fetch('https://www.googleapis.com/calendar/v3/calendars/' + encodeURIComponent(calId) + '/events/' + encodeURIComponent(data.eventId), {
            method: 'PATCH',
            headers: { 'Authorization': 'Bearer ' + _gcalAccessToken, 'Content-Type': 'application/json' },
            body: JSON.stringify(body)
        }).then(function(r) {
            if (!r.ok) throw new Error('Erreur ' + r.status);
            notifyPerdirCrudOk();
            gcalFetchEvents();
        }).catch(function(err) { alert('Erreur modification Google: ' + err.message); });
    }

    function gcalDeleteEvent(data) {
        if (!_gcalAccessToken) { alert('Google Agenda non connecté'); return; }
        var calId = data.calId;
        if (!calId) {
            var sel = getGcalSel();
            calId = sel.length ? sel[0] : 'primary';
        }
        fetch('https://www.googleapis.com/calendar/v3/calendars/' + encodeURIComponent(calId) + '/events/' + encodeURIComponent(data.eventId), {
            method: 'DELETE',
            headers: { 'Authorization': 'Bearer ' + _gcalAccessToken }
        }).then(function(r) {
            if (r.status !== 204 && !r.ok) throw new Error('Erreur ' + r.status);
            notifyPerdirCrudOk();
            gcalFetchEvents();
        }).catch(function(err) { alert('Erreur suppression Google: ' + err.message); });
    }

    function notifyPerdirCrudOk() {
        var fr = document.getElementById('frame-perdir');
        if (fr && fr.contentWindow) {
            fr.contentWindow.postMessage({type:'pilote-gcal-crud-ok'}, '*');
        }
    }

    function pushGcalToModules() {
        var s = getSettings();
        var frame = document.getElementById('frame-perdir');
        if (frame && frame.contentWindow) {
            frame.contentWindow.postMessage({ type: 'pilote-settings', data: {
                school: s.school || '', name: s.name || '', role: s.role || '', city: s.city || '',
                zone: s.zone || 'B', logoSrc: s.logoSrc || '', signSrc: s.signSrc || '',
                teachers: s.teachers || [], students: s.students || [],
                gcalEnabled: s.gcalEnabled || false,
                gcalEvents: s.gcalEvents || [],
                gcalCalendars: s.gcalCals || [],
                gcalSel: s.gcalSel || []
            }}, '*');
        }
    }

    function addManualCal() {
        var id = document.getElementById('gcal-manual-id').value.trim();
        var name = document.getElementById('gcal-manual-name').value.trim() || id;
        if (!id) { alert('Saisissez l\'ID du calendrier.'); return; }
        var s = getSettings();
        if (!s.gcalCals) s.gcalCals = [];
        if (s.gcalCals.find(function(c) { return c.id === id; })) { alert('D\u00e9j\u00e0 ajout\u00e9.'); return; }
        var colors = ['#4285f4', '#0b8043', '#d50000', '#f09300', '#7986cb', '#8e24aa', '#039be5', '#616161'];
        var bg = colors[s.gcalCals.length % colors.length];
        s.gcalCals.push({ id: id, name: name, bg: bg, manual: true });
        if (!s.gcalSel) s.gcalSel = [];
        s.gcalSel.push(id);
        localStorage.setItem(STORAGE_KEY, JSON.stringify(s));
        _gcalCalsData = s.gcalCals;
        renderGcalList(s.gcalCals, s.gcalSel);
        renderManualList(s.gcalCals);
        document.getElementById('gcal-manual-id').value = '';
        document.getElementById('gcal-manual-name').value = '';
    }

    function renderManualList(cals) {
        var div = document.getElementById('gcal-manual-list');
        if (!div) return;
        var manuals = (cals || []).filter(function(c) { return c.manual; });
        if (!manuals.length) { div.innerHTML = ''; return; }
        var h = '';
        manuals.forEach(function(c) {
            h += '<div style="display:flex;align-items:center;gap:6px;font-size:.72rem;padding:2px 0;">';
            h += '<span style="width:8px;height:8px;border-radius:50%;background:' + c.bg + ';"></span>' + c.name;
            h += ' <button onclick="removeManualCal(this.dataset.cid)" data-cid="' + c.id + '" style="background:none;border:none;color:#e74c3c;cursor:pointer;font-size:.72rem;">&times;</button></div>';
        });
        div.innerHTML = h;
    }

    function removeManualCal(id) {
        var s = getSettings();
        s.gcalCals = (s.gcalCals || []).filter(function(c) { return c.id !== id; });
        s.gcalSel = (s.gcalSel || []).filter(function(x) { return x !== id; });
        localStorage.setItem(STORAGE_KEY, JSON.stringify(s));
        _gcalCalsData = s.gcalCals;
        renderGcalList(s.gcalCals, s.gcalSel);
        renderManualList(s.gcalCals);
    }

    function closeSettings() { document.getElementById('settingsOverlay').classList.remove('open'); }

    // ═══ EXPORT / IMPORT SETTINGS ═══
    function exportSettings() {
        const s = getSettings();
        const json = JSON.stringify(s, null, 2);
        const blob = new Blob([json], { type: 'application/json' });
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        const date = new Date().toISOString().split('T')[0];
        a.download = 'pilote_parametres_' + date + '.json';
        document.body.appendChild(a);
        a.click();
        document.body.removeChild(a);
        URL.revokeObjectURL(url);
    }

    function importSettings(input) {
        const file = input.files[0]; if (!file) return;
        const reader = new FileReader();
        reader.onload = function(e) {
            try {
                const imported = JSON.parse(e.target.result);
                // Validate it's an object
                if (typeof imported !== 'object' || Array.isArray(imported)) throw new Error('Format invalide');
                // Merge: imported settings overwrite current
                localStorage.setItem(STORAGE_KEY, JSON.stringify(imported));
                loadSettingsUI();
                applyNavOrder();
                updateBrandLogo();
                pushSettingsToAllModules();
                alert('✅ Paramètres importés avec succès !');
            } catch(err) {
                alert('❌ Erreur lors de l\'import : ' + err.message);
            }
        };
        reader.readAsText(file);
        input.value = ''; // reset for re-import
    }

    // ═══ DRAG & DROP ORDER ═══
    function _makeOrderItem(list, id, checked) {
        const li = document.createElement('li');
        if (id === '__sep__') {
            li.className = 'order-item sep-item';
            li.setAttribute('draggable', 'true');
            li.dataset.module = '__sep__';
            li.innerHTML = `
                <span class="order-grip"><i class="fas fa-grip-vertical"></i></span>
                <span class="sep-label">— séparateur —</span>
                <span class="sep-line"></span>
                <button class="sep-del" title="Supprimer" onclick="this.closest('li').remove()"><i class="fas fa-times"></i></button>
            `;
        } else {
            const meta = MODULE_META[id];
            if (!meta) return null;
            const isChecked = checked !== false;
            li.className = 'order-item';
            li.setAttribute('draggable', 'true');
            li.dataset.module = id;
            li.innerHTML = `
                <span class="order-grip"><i class="fas fa-grip-vertical"></i></span>
                <span class="order-icon" style="background:${meta.color}"><i class="${meta.icon}"></i></span>
                <span class="order-label">${meta.label} <span style="color:#999;font-weight:400;font-size:0.72rem;">— ${meta.sublabel}</span></span>
                <label class="toggle-switch" onclick="event.stopPropagation()">
                    <input type="checkbox" id="tog-${id}" ${isChecked ? 'checked' : ''} onchange="updateModuleVisibility()">
                    <span class="toggle-slider"></span>
                </label>
            `;
        }
        li.addEventListener('dragstart', () => { li.classList.add('dragging'); });
        li.addEventListener('dragend', () => { li.classList.remove('dragging'); document.querySelectorAll('.order-item').forEach(el => el.classList.remove('drag-over')); });
        li.addEventListener('dragover', (e) => { e.preventDefault(); li.classList.add('drag-over'); });
        li.addEventListener('dragleave', () => { li.classList.remove('drag-over'); });
        li.addEventListener('drop', (e) => {
            e.preventDefault();
            li.classList.remove('drag-over');
            const dragging = list.querySelector('.dragging');
            if (dragging && dragging !== li) {
                const items = [...list.children];
                const fromIdx = items.indexOf(dragging);
                const toIdx = items.indexOf(li);
                if (fromIdx < toIdx) li.after(dragging); else li.before(dragging);
            }
        });
        return li;
    }

    function renderOrderList() {
        const order = getNavOrder();
        const s = getSettings();
        const list = document.getElementById('orderList');
        list.innerHTML = '';
        order.forEach((id) => {
            const checked = id === '__sep__' ? null : s['show_' + id] !== false;
            const li = _makeOrderItem(list, id, checked);
            if (li) list.appendChild(li);
        });
    }

    function addSeparatorToOrderList() {
        const list = document.getElementById('orderList');
        const li = _makeOrderItem(list, '__sep__', null);
        if (li) list.appendChild(li);
    }

    function getCurrentOrderFromList() {
        return [...document.querySelectorAll('#orderList .order-item')].map(el => el.dataset.module);
    }

    function applyNavOrder() {
        const order = getNavOrder();
        const container = document.getElementById('navItems');
        const items = {};
        container.querySelectorAll('.nav-item').forEach(el => { items[el.dataset.module] = el; });
        while (container.firstChild) container.removeChild(container.firstChild);
        order.forEach((id) => {
            if (id === '__sep__') {
                const sep = document.createElement('div');
                sep.className = 'nav-sep';
                container.appendChild(sep);
            } else if (items[id]) {
                container.appendChild(items[id]);
            }
        });

        // Also render/reorder dock cards (home cards)
        const grid = document.getElementById('moduleGrid');
        if (grid) {
            const existing = {};
            grid.querySelectorAll('.module-card').forEach(c => { existing[c.dataset.m] = c; });

            function isVisible(id) {
                const tog = document.getElementById('tog-' + id);
                return tog ? !!tog.checked : true;
            }

            function makeCard(id) {
                const meta = MODULE_META[id];
                if (!meta) return null;
                const card = document.createElement('div');
                card.className = 'module-card';
                card.dataset.m = id;
                card.onclick = () => loadModule(id);

                const iconWrap = document.createElement('div');
                iconWrap.className = 'module-icon';
                const icon = document.createElement('i');
                icon.className = meta.icon || 'fas fa-circle';
                icon.style.color = meta.color || 'currentColor';
                iconWrap.appendChild(icon);

                const h3 = document.createElement('h3');
                h3.textContent = meta.label || id.toUpperCase();

                const p = document.createElement('p');
                p.textContent = meta.sublabel || '';

                card.appendChild(iconWrap);
                card.appendChild(h3);
                card.appendChild(p);
                return card;
            }

            // rebuild in correct order and visibility
            while (grid.firstChild) grid.removeChild(grid.firstChild);
            order.forEach(id => {
                if (id === '__sep__') return;
                if (!isVisible(id)) return;
                const c = existing[id] || makeCard(id);
                if (c) grid.appendChild(c);
            });
        }
}

    // ═══ EXCEL IMPORT (Data Panel) ═══
    function handleExcelImport(input, type) {
        const files = Array.from(input.files);
        if (!files.length) return;

        // Ask whether to merge or replace if data already exists
        const s = getSettings();
        const existing = s[type] || [];
        let mergeMode = false;
        if (existing.length > 0 && files.length >= 1) {
            mergeMode = confirm('Des données existent déjà (' + existing.length + ' entrées).\n\nOK = Ajouter aux données existantes\nAnnuler = Remplacer les données');
        }

        const label = document.getElementById('lbl-' + type);
        if (label) label.textContent = 'Lecture de ' + files.length + ' fichier(s)...';

        let allData = mergeMode ? existing.slice() : [];
        let processed = 0;
        let errors = [];

        files.forEach(function(file, idx) {
            const reader = new FileReader();
            reader.onload = function(e) {
                try {
                    const wb = XLSX.read(e.target.result, { type: 'array' });
                    const sheet = wb.Sheets[wb.SheetNames[0]];
                    const rows = XLSX.utils.sheet_to_json(sheet, { defval: '' });
                    allData = allData.concat(rows);
                } catch(err) {
                    errors.push(file.name + ': ' + err.message);
                }
                processed++;
                if (processed === files.length) {
                    // All files read — save
                    const s2 = getSettings();
                    s2[type] = allData;
                    localStorage.setItem(STORAGE_KEY, JSON.stringify(s2));
                    refreshDataUI();
                    pushSettingsToAllModules();
                    if (errors.length) alert('Erreurs sur certains fichiers :\n' + errors.join('\n'));
                    if (label) label.textContent = files.length + ' fichier(s) chargé(s) ✓';
                }
            };
            reader.readAsArrayBuffer(file);
        });
    }

    function clearExcelData(type) {
        if (!confirm('Supprimer les données importées ?')) return;
        const s = getSettings();
        delete s[type];
        localStorage.setItem(STORAGE_KEY, JSON.stringify(s));
        refreshDataUI();
        pushSettingsToAllModules();
    }

    function refreshDataUI() {
        const s = getSettings();
        ['teachers', 'students'].forEach(type => {
            const data = s[type];
            const hasData = data && data.length > 0;
            const label = type === 'teachers' ? 'enseignant' : 'élève';
            document.getElementById('drop-' + type).classList.toggle('loaded', hasData);
            document.getElementById('lbl-' + type).textContent = hasData ? (data.length + ' entrées chargées ✓') : 'Cliquez ou glissez un ou plusieurs fichiers Excel';
            document.getElementById('actions-' + type).style.display = hasData ? 'flex' : 'none';
            document.getElementById('badge-' + type).textContent = hasData ? (data.length + ' ' + label + 's') : 'Non chargé';
            document.getElementById('badge-' + type).classList.toggle('has-data', hasData);
            document.getElementById('count-' + type).innerHTML = hasData ? ('<i class="fas fa-check-circle"></i> <strong>' + data.length + '</strong> ' + label + '(s) importé(s)') : '';
            if (!hasData) { document.getElementById('preview-' + type).style.display = 'none'; document.getElementById('preview-' + type).innerHTML = ''; }
        });
    }

    function togglePreview(type) {
        const el = document.getElementById('preview-' + type);
        if (el.style.display === 'none') {
            const s = getSettings();
            const data = s[type];
            if (!data || !data.length) return;
            const cols = Object.keys(data[0]);
            let html = '<table><thead><tr>' + cols.map(c => '<th>' + c + '</th>').join('') + '</tr></thead><tbody>';
            data.slice(0, 50).forEach(row => {
                html += '<tr>' + cols.map(c => '<td>' + (row[c] || '') + '</td>').join('') + '</tr>';
            });
            if (data.length > 50) html += '<tr><td colspan="' + cols.length + '" style="text-align:center;color:#999;font-style:italic">… et ' + (data.length - 50) + ' autres lignes</td></tr>';
            html += '</tbody></table>';
            el.innerHTML = html;
            el.style.display = 'block';
        } else {
            el.style.display = 'none';
        }
    }

    // ═══ DATA PANEL ═══
    function openDataPanel() {
        closeDataPanel();
        document.querySelectorAll('.nav-item').forEach(el => el.classList.remove('active'));
        const navItem = document.querySelector('.nav-item[data-module="data"]');
        if (navItem) navItem.classList.add('active');
        document.getElementById('welcome').classList.add('hidden');
        document.querySelectorAll('.module-frame').forEach(f => f.classList.remove('active'));
        document.getElementById('dataPanel').classList.add('active');
        currentModule = 'data';
        document.title = 'PILOTE — Données';
        refreshDataUI();
    }

    function closeDataPanel() { document.getElementById('dataPanel').classList.remove('active'); }

    // ═══ PUSH TO MODULES ═══
    function pushSettingsToModule(name) {
        const frame = document.getElementById('frame-' + name);
        if (!frame || !frame.contentWindow) return;
        const s = getSettings();
        frame.contentWindow.postMessage({
            type: 'pilote-settings',
            data: { school: s.school||'', name: s.name||'', role: s.role||'', city: s.city||'', zone: s.zone||'B', logoSrc: s.logoSrc||'', signSrc: s.signSrc||'', teachers: s.teachers||[], students: s.students||[], gcalEnabled: s.gcalEnabled||false, gcalEvents: s.gcalEvents||[], gcalCalendars: s.gcalCals||[], gcalSel: s.gcalSel||[], pdfHeaderLayout: s.pdfHeaderLayout||'classique', pdfHeaderColor: s.pdfHeaderColor||'#1b2433', pdfHeaderSubtitle: s.pdfHeaderSubtitle||'' }
        }, '*');
    }

    function pushSettingsToAllModules() { loadedModules.forEach(name => pushSettingsToModule(name)); }

    window.addEventListener('message', function(e) {
        if (e.data && e.data.type === 'pilote-gcal-refresh') { gcalFetchEvents(); return; }
        if (e.data && e.data.type === 'pilote-gcal-add') { gcalAddEvent(e.data); return; }
        if (e.data && e.data.type === 'pilote-gcal-update') { gcalUpdateEvent(e.data); return; }
        if (e.data && e.data.type === 'pilote-gcal-delete') { gcalDeleteEvent(e.data); return; }
        if (e.data && e.data.type === 'pilote-outlook-add') { outlookAddEvent(e.data); return; }
        if (e.data && e.data.type === 'pilote-outlook-update') { outlookUpdateEvent(e.data); return; }
        if (e.data && e.data.type === 'pilote-outlook-delete') { outlookDeleteEvent(e.data); return; }
        if (e.data && e.data.type === 'pilote-outlook-refresh') { outlookFetchEvents(); return; }
        if (e.data && e.data.type === 'pilote-module-ready' && e.data.module) {
            setTimeout(() => { pushSettingsToModule(e.data.module); if(typeof pushOutlookToModules==='function') pushOutlookToModules(); }, 200);
        }
    });

    // ═══ MODULE VISIBILITY ═══
    function updateModuleVisibility() {
        moduleNames.forEach(m => {
            const tog = document.getElementById('tog-' + m);
            const visible = tog ? tog.checked : true;
            const navItem = document.querySelector('.nav-item[data-module="' + m + '"]');
            if (navItem) navItem.classList.toggle('hidden-module', !visible);
            const card = document.querySelector('.module-card[data-m="' + m + '"]');
            if (card) card.classList.toggle('card-hidden', !visible);
            if (!visible && currentModule === m) goHome();
        });
    }

    // ═══ MODULE LOADING ═══
    function b64toBlob(b64) {
        const bin = atob(b64);
        const bytes = new Uint8Array(bin.length);
        for (let i = 0; i < bin.length; i++) bytes[i] = bin.charCodeAt(i);
        return URL.createObjectURL(new Blob([bytes], { type: 'text/html; charset=utf-8' }));
    }


    // ═══ KEYBOARD SHORTCUTS ═══
    document.addEventListener('keydown', function(e) {
        // Only trigger with Ctrl (not inside iframes)
        if (!e.ctrlKey || e.shiftKey || e.altKey || e.metaKey) return;
        var key = e.key.toLowerCase();
        var map = {
            'p': 'perdir',
            'e': 'exam',
            'o': 'oral',
            'a': 'aed',
            'b': 'bibase',
            'd': 'data'
        };
        if (map[key]) {
            e.preventDefault();
            e.stopPropagation();
            loadModule(map[key]);
        }
    });

    // Also listen for shortcuts from within iframes
    window.addEventListener('message', function(e) {
        if (e.data && e.data.type === 'pilote-shortcut') {
            var map = {'p':'perdir','e':'exam','o':'oral','a':'aed','d':'data'};
            if (map[e.data.key]) loadModule(map[e.data.key]);
        }
    });

    function loadModule(name) {
        if (name === 'data') { openDataPanel(); return; }
        const s = getSettings();
        if (s['show_' + name] === false) return;
        closeDataPanel();
        document.querySelectorAll('.nav-item').forEach(el => el.classList.remove('active'));
        const navItem = document.querySelector('.nav-item[data-module="' + name + '"]');
        if (navItem) navItem.classList.add('active');
        document.getElementById('welcome').classList.add('hidden');
        document.querySelectorAll('.module-frame').forEach(f => f.classList.remove('active'));
        const frame = document.getElementById('frame-' + name);
        if (!loadedModules.has(name)) {
            document.getElementById('loader').classList.add('show');
            if (!blobUrls[name]) blobUrls[name] = b64toBlob(MODULE_DATA[name]);
            frame.src = blobUrls[name];
            frame.onload = () => {
                loadedModules.add(name);
                document.getElementById('loader').classList.remove('show');
                frame.classList.add('active');
                setTimeout(() => pushSettingsToModule(name), 300);
            };
        } else { frame.classList.add('active'); }
        currentModule = name;

        updateDockActive();
document.title = 'PILOTE — ' + name.toUpperCase();
    }

    function goHome() {
        currentModule = null;
        closeDataPanel();
        document.querySelectorAll('.nav-item').forEach(el => el.classList.remove('active'));
        document.querySelectorAll('.module-frame').forEach(f => f.classList.remove('active'));
        document.getElementById('welcome').classList.remove('hidden');
        document.title = 'PILOTE — Suite de Direction';
    }

    function updateClock() {
        document.getElementById('clock').textContent = new Date().toLocaleDateString('fr-FR', { weekday:'short', day:'numeric', month:'short', hour:'2-digit', minute:'2-digit' });
    }
    updateClock(); setInterval(updateClock, 30000);

    function toggleFullscreen() {
        if (!document.fullscreenElement) document.documentElement.requestFullscreen();
        else document.exitFullscreen();
    }
    // Apply PERDIR submenus when frames load
    document.getElementById('frame-perdir').addEventListener('load', function(){ setTimeout(applyPerdirSubmenus, 500); });

    document.addEventListener('fullscreenchange', () => {
        document.getElementById('fs-icon').className = document.fullscreenElement ? 'fas fa-compress' : 'fas fa-expand';
    });

    document.addEventListener('keydown', (e) => {
        if (e.altKey) {
            const order = getNavOrder();
            switch(e.key) {
                case '1': case '2': case '3': case '4': case '5': case '6': {
                    const idx = parseInt(e.key) - 1;
                    if (order[idx]) { e.preventDefault(); loadModule(order[idx]); }
                    break;
                }
                case '0': e.preventDefault(); goHome(); break;
                case 'p': e.preventDefault(); openSettings(); break;
                case 'd': e.preventDefault(); openDataPanel(); break;
            }
        }
        if (e.key === 'Escape') {
            if (document.getElementById('settingsOverlay').classList.contains('open')) closeSettings();
            else if (currentModule) goHome();
        }
    });

    // ═══ INIT ═══
    loadSettingsUI();
    applyNavOrder();
    goHome();

    // ═══ ACCORDION TOGGLE ═══


    // ═══ PERDIR SUBMENUS MANAGEMENT ═══
    var PERDIR_MENUS = [
        {id:'menu2', icon:'fa-check-square', label:'To Do List', color:'#3498db'},
        {id:'menu3', icon:'fa-calendar-alt', label:'Calendrier', color:'#e67e22'},
        {id:'menu4', icon:'fa-clipboard-list', label:'Conseil de Direction', color:'#2c3e50'},
        {id:'menu5', icon:'fa-user-graduate', label:'Suivi Élève / Point CPE', color:'#27ae60'},
        {id:'menu6', icon:'fa-comments', label:'Entretiens', color:'#9b59b6'},
        {id:'menu7', icon:'fa-users', label:'Réunions', color:'#e74c3c'},
        {id:'menu8', icon:'fa-history', label:'Historique', color:'#95a5a6'},
        {id:'menu9', icon:'fa-chart-line', label:'Tableau de Bord', color:'#f39c12'},
        {id:'menu10', icon:'fa-calendar-check', label:'Activités pédagogiques', color:'#1abc9c'},
        {id:'menu11', icon:'fa-stream', label:'Échéances', color:'#8e44ad'},
        {id:'menu12', icon:'fa-book', label:'Procédures', color:'#16a085'}
    ];

    function renderPerdirSubmenus() {
        var ms = JSON.parse(localStorage.getItem('pilote_master_settings') || '{}');
        var cfg = ms.perdirMenus || PERDIR_MENUS.map(function(m){ return {id:m.id, visible:true}; });
        // Add missing real menus (not separators)
        var cfgIds2 = cfg.filter(function(c){return c.id!=='__sep__';}).map(function(c){return c.id;});
        PERDIR_MENUS.forEach(function(m){if(cfgIds2.indexOf(m.id)<0)cfg.push({id:m.id,visible:true});});
        var list = document.getElementById('perdir-submenu-list');
        if (!list) return;
        list.innerHTML = '';
        cfg.forEach(function(item, i) {
            var el = document.createElement('div');
            el.dataset.idx = i;
            el.dataset.menuid = item.id;
            el.setAttribute('draggable', 'true');
            el.addEventListener('dragstart', function(e){ dragSubM(e, i); });
            el.addEventListener('dragover', function(e){ overSubM(e, el); });
            el.addEventListener('drop', function(e){ dropSubM(e, i); });
            if (item.id === '__sep__') {
                el.className = 'order-item sep-item';
                el.innerHTML = '<span class="order-grip"><i class="fas fa-grip-vertical"></i></span>'
                    + '<span class="sep-label">— séparateur —</span>'
                    + '<span class="sep-line"></span>'
                    + '<button class="sep-del" title="Supprimer" onclick="event.stopPropagation();deleteSubMenuSep('+i+')"><i class="fas fa-times"></i></button>';
            } else {
                var def = PERDIR_MENUS.find(function(m){ return m.id === item.id; });
                if (!def) return;
                el.className = 'order-item';
                el.innerHTML = '<span class="order-grip" style="color:#bbb;font-size:.9rem;"><i class="fas fa-grip-vertical"></i></span>'
                    + '<div class="order-icon" style="background:'+def.color+';width:26px;height:26px;border-radius:6px;display:flex;align-items:center;justify-content:center;color:white;font-size:.7rem;flex-shrink:0;"><i class="fas '+def.icon+'"></i></div>'
                    + '<span class="order-label">'+def.label+'</span>'
                    + '<label class="toggle-switch" onclick="event.stopPropagation()">'
                    + '<input type="checkbox" '+(item.visible!==false?'checked':'')+' onchange="toggleSubM(\''+item.id+'\',this.checked)">'
                    + '<span class="toggle-slider"></span></label>';
            }
            list.appendChild(el);
        });
    }

    function addSubMenuSeparator() {
        var ms = JSON.parse(localStorage.getItem('pilote_master_settings') || '{}');
        var cfg = ms.perdirMenus || PERDIR_MENUS.map(function(m){ return {id:m.id, visible:true}; });
        cfg.push({id: '__sep__'});
        ms.perdirMenus = cfg;
        localStorage.setItem('pilote_master_settings', JSON.stringify(ms));
        renderPerdirSubmenus();
        applyPerdirSubmenus();
    }

    function deleteSubMenuSep(idx) {
        var ms = JSON.parse(localStorage.getItem('pilote_master_settings') || '{}');
        var cfg = ms.perdirMenus || PERDIR_MENUS.map(function(m){ return {id:m.id, visible:true}; });
        cfg.splice(idx, 1);
        ms.perdirMenus = cfg;
        localStorage.setItem('pilote_master_settings', JSON.stringify(ms));
        renderPerdirSubmenus();
        applyPerdirSubmenus();
    }

    var _dragSubIdx = null;
    function dragSubM(e, idx) { _dragSubIdx = idx; e.dataTransfer.effectAllowed = 'move'; }
    function overSubM(e, el) { e.preventDefault(); }
    function dropSubM(e, toIdx) {
        e.preventDefault();
        if (_dragSubIdx === null || _dragSubIdx === toIdx) return;
        var ms = JSON.parse(localStorage.getItem('pilote_master_settings') || '{}');
        var cfg = ms.perdirMenus || PERDIR_MENUS.map(function(m){ return {id:m.id, visible:true}; });
        var item = cfg.splice(_dragSubIdx, 1)[0];
        cfg.splice(toIdx, 0, item);
        ms.perdirMenus = cfg;
        localStorage.setItem('pilote_master_settings', JSON.stringify(ms));
        renderPerdirSubmenus();
        applyPerdirSubmenus();
        _dragSubIdx = null;
    }

    function toggleSubM(menuId, visible) {
        var ms = JSON.parse(localStorage.getItem('pilote_master_settings') || '{}');
        var cfg = ms.perdirMenus || PERDIR_MENUS.map(function(m){ return {id:m.id, visible:true}; });
        var item = cfg.find(function(c){ return c.id === menuId; });
        if (item) item.visible = visible;
        ms.perdirMenus = cfg;
        localStorage.setItem('pilote_master_settings', JSON.stringify(ms));
        applyPerdirSubmenus();
    }

    function applyPerdirSubmenus() {
        var fr = document.getElementById('frame-perdir');
        try { if (!fr || !fr.contentWindow || !fr.contentWindow.document) return; } catch(e) { return; }
        var ms = JSON.parse(localStorage.getItem('pilote_master_settings') || '{}');
        var cfg = ms.perdirMenus || PERDIR_MENUS.map(function(m){ return {id:m.id, visible:true}; });
        var cfgIds = cfg.filter(function(c){return c.id!=='__sep__';}).map(function(c){return c.id;});
        PERDIR_MENUS.forEach(function(m){if(cfgIds.indexOf(m.id)<0)cfg.push({id:m.id,visible:true});});
        var menuDiv; try { menuDiv = fr.contentWindow.document.querySelector('.menu'); } catch(e) { return; }
        if (!menuDiv) return;

        // Remove previously injected separators
        menuDiv.querySelectorAll('.__cadir_sep__').forEach(function(s){ s.remove(); });

        // First pass: order & visibility of real items
        var visNum = 1;
        cfg.filter(function(c){return c.id!=='__sep__';}).forEach(function(item, i) {
            var link = menuDiv.querySelector('[data-menu="'+item.id+'"]');
            if (link) {
                var isVisible = item.visible !== false;
                link.style.display = isVisible ? '' : 'none';
                // order = position in cfg (skipping seps for offset)
                link.style.order = cfg.indexOf(item) * 2; // *2 to leave room for seps
                if (isVisible) {
                    var numSpan = link.querySelector('.menu-num');
                    if (numSpan) numSpan.textContent = visNum + '.';
                    visNum++;
                }
            }
        });

        // Second pass: insert separator elements at correct flex order
        cfg.forEach(function(item, i) {
            if (item.id !== '__sep__') return;
            var hr = fr.contentWindow.document.createElement('hr');
            hr.className = '__cadir_sep__';
            hr.style.cssText = 'border:none;border-top:1.5px solid #ffffff;margin:6px 10px;order:'+(i*2-1)+';flex-shrink:0;border-radius:2px;';
            menuDiv.appendChild(hr);
        });

        menuDiv.style.display = 'flex';
        menuDiv.style.flexDirection = 'column';
    }

    function triggerVacancesUpdate() {
        var fr = document.getElementById('frame-perdir');
        if (fr && fr.contentWindow && typeof fr.contentWindow.majVacances === 'function') {
            fr.contentWindow.majVacances();
        } else {
            alert('Module PERDIR non chargé. Ouvrez d\'abord le module PERDIR.');
        }
    }


    function updateFavicon(logoSrc){
        if(!logoSrc)return;
        var link=document.querySelector('link[rel="icon"]');
        if(!link){link=document.createElement('link');link.rel='icon';document.head.appendChild(link);}
        link.href=logoSrc;
    }

    function toggleAcc(header) {
        var section = header.parentElement;
        var wasOpen = section.classList.contains('open');
        // Fermer tous les autres
        document.querySelectorAll('.acc-section.open').forEach(function(s) { s.classList.remove('open'); });
        // Ouvrir celui-ci sauf s'il était déjà ouvert
        if (!wasOpen) section.classList.add('open');
    }

    // ═══ CLOUD SYNC (multi-fournisseur) ═══
    var _cloudProvider = 'jsonbin';

    function selectCloudProvider(prov) {
        _cloudProvider = prov;
        ['jsonbin','gist','webdav','gdrive','localfolder'].forEach(function(p) {
            var el = document.getElementById('cloud-cfg-' + p);
            if (el) el.style.display = p === prov ? 'block' : 'none';
            var btn = document.querySelector('.cloud-prov-btn[data-prov="'+p+'"]');
            if (btn) btn.classList.toggle('active', p === prov);
        });
        if (prov === 'localfolder' && typeof lfInitMode === 'function') lfInitMode();
    }

    function toggleCloudUI() {
        var on = document.getElementById('s-cloud-enabled').checked;
        document.getElementById('cloud-opts').style.display = on ? 'block' : 'none';
    }

    function getCloudConfig() {
        return {
            provider: _cloudProvider,
            // jsonbin
            key: (document.getElementById('s-cloud-key').value || '').trim(),
            bin: (document.getElementById('s-cloud-bin').value || '').trim(),
            // github gist
            gistToken: (document.getElementById('s-gist-token').value || '').trim(),
            gistId: (document.getElementById('s-gist-id').value || '').trim(),
            // gdrive
            gdriveClientId: (document.getElementById('s-gdrive-clientid').value || '').trim(),
            gdriveFileId: (document.getElementById('s-gdrive-fileid').value || '').trim(),
            // webdav
            wdUrl: (document.getElementById('s-webdav-url').value || '').trim(),
            wdUser: (document.getElementById('s-webdav-user').value || '').trim(),
            wdPass: (document.getElementById('s-webdav-pass').value || '').trim(),
            // common
            auto: document.getElementById('s-cloud-auto').checked,
            enabled: document.getElementById('s-cloud-enabled').checked
        };
    }

    function cloudSetStatus(msg, color) {
        var el = document.getElementById('cloud-status');
        if (el) { el.innerHTML = msg; el.style.color = color || '#888'; }
    }

    // ── jsonbin.io ──
    async function jsonbinPush(data, cfg) {
        var headers = { 'Content-Type': 'application/json', 'X-Master-Key': cfg.key };
        if (cfg.bin) {
            var r = await fetch('https://api.jsonbin.io/v3/b/' + cfg.bin, { method: 'PUT', headers: headers, body: JSON.stringify(data) });
            if (!r.ok) throw new Error('jsonbin PUT: ' + r.status);
            return cfg.bin;
        } else {
            headers['X-Bin-Name'] = 'PILOTE_Data';
            headers['X-Bin-Private'] = 'true';
            var r = await fetch('https://api.jsonbin.io/v3/b', { method: 'POST', headers: headers, body: JSON.stringify(data) });
            if (!r.ok) throw new Error('jsonbin POST: ' + r.status);
            var j = await r.json();
            document.getElementById('s-cloud-bin').value = j.metadata.id;
            return j.metadata.id;
        }
    }
    async function jsonbinPull(cfg) {
        var r = await fetch('https://api.jsonbin.io/v3/b/' + cfg.bin + '/latest', { headers: { 'X-Master-Key': cfg.key } });
        if (!r.ok) throw new Error('jsonbin GET: ' + r.status);
        var j = await r.json();
        return j.record;
    }

    // ── GitHub Gist ──
    async function gistPush(data, cfg) {
        var content = JSON.stringify(data);
        var headers = { 'Content-Type': 'application/json', 'Authorization': 'token ' + cfg.gistToken };
        if (cfg.gistId) {
            var r = await fetch('https://api.github.com/gists/' + cfg.gistId, { method: 'PATCH', headers: headers,
                body: JSON.stringify({ files: { 'pilote_data.json': { content: content } } })
            });
            if (!r.ok) throw new Error('Gist PATCH: ' + r.status);
            return cfg.gistId;
        } else {
            var r = await fetch('https://api.github.com/gists', { method: 'POST', headers: headers,
                body: JSON.stringify({ description: 'PILOTE Suite Data', public: false, files: { 'pilote_data.json': { content: content } } })
            });
            if (!r.ok) throw new Error('Gist POST: ' + r.status);
            var j = await r.json();
            document.getElementById('s-gist-id').value = j.id;
            return j.id;
        }
    }
    async function gistPull(cfg) {
        var r = await fetch('https://api.github.com/gists/' + cfg.gistId, { headers: { 'Authorization': 'token ' + cfg.gistToken } });
        if (!r.ok) throw new Error('Gist GET: ' + r.status);
        var j = await r.json();
        return JSON.parse(j.files['pilote_data.json'].content);
    }

    // ── WebDAV ──
    async function webdavPush(data, cfg) {
        var url = cfg.wdUrl.replace(/\/$/, '') + '/pilote_data.json';
        var headers = { 'Content-Type': 'application/json', 'Authorization': 'Basic ' + btoa(cfg.wdUser + ':' + cfg.wdPass) };
        var r = await fetch(url, { method: 'PUT', headers: headers, body: JSON.stringify(data) });
        if (!r.ok && r.status !== 201 && r.status !== 204) throw new Error('WebDAV PUT: ' + r.status);
        return url;
    }
    async function webdavPull(cfg) {
        var url = cfg.wdUrl.replace(/\/$/, '') + '/pilote_data.json';
        var headers = { 'Authorization': 'Basic ' + btoa(cfg.wdUser + ':' + cfg.wdPass) };
        var r = await fetch(url, { method: 'GET', headers: headers });
        if (!r.ok) throw new Error('WebDAV GET: ' + r.status);
        return await r.json();
    }


    // ── Google Drive ──
    var _gdriveToken = null;
    function gdriveAuth() {
        var clientId = (document.getElementById('s-gdrive-clientid').value || '').trim();
        if (!clientId) return alert('Saisissez le Client ID OAuth2');
        var scope = 'https://www.googleapis.com/auth/drive.file';
        var redir = location.origin + location.pathname;
        var url = 'https://accounts.google.com/o/oauth2/v2/auth?client_id='+encodeURIComponent(clientId)+'&response_type=token&redirect_uri='+encodeURIComponent(redir)+'&scope='+encodeURIComponent(scope);
        var w = window.open(url, '_blank', 'width=500,height=600');
        // Listen for redirect
        var check = setInterval(function() {
            try {
                if (w.closed) { clearInterval(check); return; }
                if (w.location.hash) {
                    var hash = w.location.hash.substring(1);
                    var params = new URLSearchParams(hash);
                    var tk = params.get('access_token');
                    if (tk) {
                        _gdriveToken = tk;
                        w.close();
                        clearInterval(check);
                        document.getElementById('gdrive-auth-status').innerHTML = '<span style="color:#27ae60"><i class="fas fa-check-circle"></i> Connecté</span>';
                    }
                }
            } catch(e) {}
        }, 500);
    }

    async function gdrivePush(data, cfg) {
        if (!_gdriveToken) throw new Error('Connectez-vous à Google Drive d\'abord');
        var content = JSON.stringify(data);
        var headers = { 'Authorization': 'Bearer ' + _gdriveToken };
        if (cfg.gdriveFileId) {
            var r = await fetch('https://www.googleapis.com/upload/drive/v3/files/' + cfg.gdriveFileId + '?uploadType=media', {
                method: 'PATCH', headers: Object.assign(headers, {'Content-Type':'application/json'}), body: content
            });
            if (!r.ok) throw new Error('GDrive PATCH: ' + r.status);
            return cfg.gdriveFileId;
        } else {
            var meta = { name: 'pilote_data.json', mimeType: 'application/json' };
            var form = new FormData();
            form.append('metadata', new Blob([JSON.stringify(meta)], {type:'application/json'}));
            form.append('file', new Blob([content], {type:'application/json'}));
            var r = await fetch('https://www.googleapis.com/upload/drive/v3/files?uploadType=multipart', {
                method: 'POST', headers: headers, body: form
            });
            if (!r.ok) throw new Error('GDrive POST: ' + r.status);
            var j = await r.json();
            document.getElementById('s-gdrive-fileid').value = j.id;
            return j.id;
        }
    }

    async function gdrivePull(cfg) {
        if (!_gdriveToken) throw new Error('Connectez-vous à Google Drive d\'abord');
        var r = await fetch('https://www.googleapis.com/drive/v3/files/' + cfg.gdriveFileId + '?alt=media', {
            headers: { 'Authorization': 'Bearer ' + _gdriveToken }
        });
        if (!r.ok) throw new Error('GDrive GET: ' + r.status);
        return await r.json();
    }

    // ── Dispatcher ──
    async // ── Dossier Local (auto-sync via File System Access + fallback manuel) ──
    var _lfDirHandle = null;
    var _lfAutoSaveTimer = null;
    var _lfDirty = false;
    var _lfSaving = false;
    var _lfHasAPI = (typeof window.showDirectoryPicker === 'function');

    // ── Détection du mode et initialisation ──
    function lfInitMode() {
        var autoDiv = document.getElementById('lf-mode-auto');
        var manDiv = document.getElementById('lf-mode-manual');
        // Re-check API availability (may not be set at parse time)
        _lfHasAPI = !!(window.showDirectoryPicker);
        console.log('[PILOTE] lfInitMode: File System Access API =', _lfHasAPI, 'protocol =', location.protocol);
        if (_lfHasAPI) {
            if (autoDiv) autoDiv.style.display = 'block';
            if (manDiv) manDiv.style.display = 'none';
            lfRestoreHandle();
        } else {
            if (autoDiv) autoDiv.style.display = 'none';
            if (manDiv) manDiv.style.display = 'block';
        }
    }

    // ── File System Access API (auto mode) ──
    async function lfPickFolder() {
        try {
            _lfDirHandle = await window.showDirectoryPicker({ mode: 'readwrite' });
            await lfSaveHandleToIDB(_lfDirHandle);
            lfSetAutoStatus('<i class="fas fa-check-circle"></i> ' + _lfDirHandle.name, '#27ae60');
            document.getElementById('lf-auto-actions').style.display = 'block';
            // Check if file already exists in folder (restore if newer)
            await lfAutoLoadOnStartup();
            lfStartAutoSync();
            // Initial save
            await lfWriteToFolder();
        } catch(e) {
            if (e.name !== 'AbortError') lfSetAutoStatus('<i class="fas fa-times"></i> ' + e.message, '#e74c3c');
        }
    }

    async function lfSaveHandleToIDB(handle) {
        return new Promise(function(res, rej) {
            var req = indexedDB.open('pilote_lf', 1);
            req.onupgradeneeded = function(e) { e.target.result.createObjectStore('h'); };
            req.onsuccess = function(e) {
                var tx = e.target.result.transaction('h', 'readwrite');
                tx.objectStore('h').put(handle, 'dir');
                tx.oncomplete = res; tx.onerror = function() { rej(tx.error); };
            };
            req.onerror = function() { rej(req.error); };
        });
    }

    async function lfLoadHandleFromIDB() {
        return new Promise(function(res) {
            var req = indexedDB.open('pilote_lf', 1);
            req.onupgradeneeded = function(e) { e.target.result.createObjectStore('h'); };
            req.onsuccess = function(e) {
                var tx = e.target.result.transaction('h', 'readonly');
                var g = tx.objectStore('h').get('dir');
                g.onsuccess = function() { res(g.result || null); };
                g.onerror = function() { res(null); };
            };
            req.onerror = function() { res(null); };
        });
    }

    async function lfRestoreHandle() {
        try {
            var h = await lfLoadHandleFromIDB();
            if (!h) return;
            var perm = await h.queryPermission({ mode: 'readwrite' });
            if (perm === 'granted') {
                _lfDirHandle = h;
                lfSetAutoStatus('<i class="fas fa-spinner fa-spin"></i> Chargement des données...', '#3498db');
                document.getElementById('lf-auto-actions').style.display = 'block';
                lfShowSyncIndicator();
                // AUTO-LOAD: restore data from file on startup
                await lfAutoLoadOnStartup();
                lfSetAutoStatus('<i class="fas fa-link"></i> ' + h.name + ' (synchronisé)', '#27ae60');
                lfStartAutoSync();
            } else {
                lfSetAutoStatus('<i class="fas fa-lock"></i> ' + h.name + ' — cliquez pour réautoriser', '#e67e22');
                var btn = document.getElementById('lf-pick-btn');
                if (btn) btn.innerHTML = '<i class="fas fa-lock-open"></i> Réautoriser ' + h.name;
            }
        } catch(e) { console.warn('lfRestoreHandle:', e); }
    }

    async function lfAutoLoadOnStartup() {
        try {
            var data = await lfReadFromFolder();
            if (!data) { console.log('[PILOTE] No pilote_data.json found, starting fresh'); return; }
            var fileMeta = data._cloudMeta || {};
            var fileTime = fileMeta.lastPush || '2000-01-01';
            // Compare with local settings timestamp
            var localSettings = JSON.parse(localStorage.getItem('pilote_suite_settings') || '{}');
            var localTime = localSettings._lastSync || '2000-01-01';
            console.log('[PILOTE] File time:', fileTime, '| Local time:', localTime);
            if (fileTime > localTime) {
                console.log('[PILOTE] File is newer → restoring all data');
                distributeToModules(data);
                lfUpdateSyncIndicator('Données restaurées', '#27ae60');
            } else {
                console.log('[PILOTE] Local is current, no restore needed');
            }
        } catch(e) { console.warn('lfAutoLoadOnStartup:', e); }
    }

    async function lfEnsurePermission() {
        if (!_lfDirHandle) return false;
        var perm = await _lfDirHandle.queryPermission({ mode: 'readwrite' });
        if (perm === 'granted') return true;
        perm = await _lfDirHandle.requestPermission({ mode: 'readwrite' });
        return perm === 'granted';
    }

    async function lfWriteToFolder() {
        if (!_lfDirHandle || _lfSaving) return;
        _lfSaving = true;
        try {
            if (!await lfEnsurePermission()) throw new Error('Permission refusée');
            var allData = collectAllModulesData();
            var now = new Date().toISOString();
            allData._cloudMeta = { lastPush: now, provider: 'localfolder' };
            // Update local timestamp so we know we're in sync
            try {
                var ls = JSON.parse(localStorage.getItem('pilote_suite_settings') || '{}');
                ls._lastSync = now;
                localStorage.setItem('pilote_suite_settings', JSON.stringify(ls));
            } catch(e) {}
            var json = JSON.stringify(allData, null, 2);
            var fh = await _lfDirHandle.getFileHandle('pilote_data.json', { create: true });
            var w = await fh.createWritable();
            await w.write(json);
            await w.close();
            _lfDirty = false;
            lfUpdateSyncIndicator('Synchronisé ' + new Date().toLocaleTimeString('fr-FR', {hour:'2-digit',minute:'2-digit'}), '#27ae60');
        } catch(err) {
            console.error('lfWriteToFolder:', err);
            lfUpdateSyncIndicator('Erreur sync', '#e74c3c');
        }
        _lfSaving = false;
    }

    async function lfReadFromFolder() {
        if (!_lfDirHandle) return null;
        try {
            if (!await lfEnsurePermission()) return null;
            var fh = await _lfDirHandle.getFileHandle('pilote_data.json');
            var file = await fh.getFile();
            var text = await file.text();
            return JSON.parse(text);
        } catch(e) {
            if (e.name === 'NotFoundError') return null;
            console.error('lfReadFromFolder:', e);
            return null;
        }
    }

    function lfStartAutoSync() {
        if (_lfAutoSaveTimer) clearInterval(_lfAutoSaveTimer);
        // Take initial snapshot
        _lfLastSnapshot = lfComputeSnapshot();
        // Poll every 3 seconds for changes + save if dirty
        _lfAutoSaveTimer = setInterval(function() {
            lfPollForChanges();
            if (_lfDirty && _lfDirHandle && !_lfSaving) {
                lfWriteToFolder();
            }
        }, 3000);
        lfShowSyncIndicator();
    }

    function lfMarkDirty() {
        _lfDirty = true;
        lfUpdateSyncIndicator('Modifications non sauvegardées…', '#f39c12');
    }

    async function lfForceSave() {
        if (_lfDirHandle) {
            lfUpdateSyncIndicator('<i class="fas fa-spinner fa-spin"></i> Sauvegarde...', '#3498db');
            lfSetAutoStatus('<i class="fas fa-spinner fa-spin"></i> Sauvegarde en cours...', '#3498db');
            await lfWriteToFolder();
            lfSetAutoStatus('<i class="fas fa-check-circle"></i> Sauvegardé ' + new Date().toLocaleTimeString('fr-FR'), '#27ae60');
        } else {
            localFolderExport();
        }
    }

    async function lfForceLoad() {
        if (!_lfDirHandle) { document.getElementById('localfolder-import').click(); return; }
        lfSetAutoStatus('<i class="fas fa-spinner fa-spin"></i> Chargement...', '#3498db');
        var data = await lfReadFromFolder();
        if (data) {
            distributeToModules(data);
            var meta = data._cloudMeta || {};
            lfSetAutoStatus('<i class="fas fa-check-circle"></i> Restauré (' + (meta.lastPush ? new Date(meta.lastPush).toLocaleString('fr-FR') : '?') + ')', '#27ae60');
            alert('✅ Données importées ! Rechargez la page pour appliquer.');
        } else {
            lfSetAutoStatus('<i class="fas fa-exclamation-triangle"></i> Aucun fichier trouvé', '#e67e22');
        }
    }

    // ── UI helpers ──
    function lfSetAutoStatus(html, color) {
        var el = document.getElementById('lf-auto-status');
        if (el) el.innerHTML = '<span style="color:' + (color||'#888') + ';">' + html + '</span>';
    }

    function lfShowSyncIndicator() {
        var el = document.getElementById('lf-sync-indicator');
        if (el) el.style.display = 'block';
    }

    function lfUpdateSyncIndicator(text, color) {
        var dot = document.querySelector('#lf-sync-indicator i');
        var span = document.getElementById('lf-sync-text');
        if (dot) dot.style.color = color || '#888';
        if (span) span.textContent = text;
        lfShowSyncIndicator();
    }

    // ── Manual mode (fallback file://) ──
    function localFolderExport() {
        try {
            localFolderSetStatus('<i class="fas fa-spinner fa-spin"></i> Préparation...', '#f39c12');
            var allData = collectAllModulesData();
            allData._cloudMeta = { lastPush: new Date().toISOString(), provider: 'localfolder' };
            var json = JSON.stringify(allData, null, 2);
            var blob = new Blob([json], { type: 'application/json' });
            var url = URL.createObjectURL(blob);
            var a = document.createElement('a');
            a.href = url; a.download = 'pilote_data.json';
            document.body.appendChild(a); a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            localFolderSetStatus('✅ Fichier téléchargé', '#27ae60');
        } catch(err) { localFolderSetStatus('❌ ' + err.message, '#e74c3c'); }
    }

    function localFolderImport(input) {
        var file = input.files[0]; if (!file) return;
        localFolderSetStatus('<i class="fas fa-spinner fa-spin"></i> Lecture...', '#3498db');
        var reader = new FileReader();
        reader.onload = function(e) {
            try {
                var data = JSON.parse(e.target.result);
                if (!data || typeof data !== 'object') throw new Error('Format invalide');
                distributeToModules(data);
                var meta = data._cloudMeta || {};
                localFolderSetStatus('✅ Importé (' + (meta.lastPush ? new Date(meta.lastPush).toLocaleString('fr-FR') : '?') + ')', '#27ae60');
                alert('✅ Données importées ! Rechargez la page pour appliquer.');
            } catch(err) { localFolderSetStatus('❌ ' + err.message, '#e74c3c'); }
        };
        reader.readAsText(file);
        input.value = '';
    }

    function localFolderSetStatus(html, color) {
        var el = document.getElementById('localfolder-status');
        if (el) el.innerHTML = '<span style="color:' + (color||'#888') + ';">' + html + '</span>';
    }

    // ── Sync Engine: poll ALL modules data for changes ──
    var _lfLastSnapshot = '';

    function _lfHash(str) {
        // DJB2 hash — fast, reliable for change detection
        var hash = 5381;
        for (var i = 0; i < str.length; i++) {
            hash = ((hash << 5) + hash) + str.charCodeAt(i);
            hash = hash & hash; // Convert to 32-bit integer
        }
        return hash.toString(36);
    }

    function lfComputeSnapshot() {
        // Build a fingerprint of ALL data using content hashes
        var parts = [];
        // 1. Wrapper localStorage (pilote_suite_settings, pilote_master_settings, bibase_*)
        try {
            for (var i = 0; i < localStorage.length; i++) {
                var k = localStorage.key(i);
                var v = localStorage.getItem(k) || '';
                parts.push(k + '=' + v.length + ':' + _lfHash(v));
            }
        } catch(e) {}
        // 2. All iframe modules localStorage
        var frames = ['frame-perdir', 'frame-exam', 'frame-oral', 'frame-aed', 'frame-bibase'];
        frames.forEach(function(fid) {
            var fr = document.getElementById(fid);
            if (fr && fr.contentWindow) {
                try {
                    var ls = fr.contentWindow.localStorage;
                    for (var j = 0; j < ls.length; j++) {
                        var k2 = ls.key(j);
                        var v2 = ls.getItem(k2) || '';
                        parts.push(fid + ':' + k2 + '=' + v2.length + ':' + _lfHash(v2));
                    }
                } catch(e2) {}
            }
        });
        return parts.sort().join('|');
    }

    function lfPollForChanges() {
        if (!_lfDirHandle || _lfSaving) return;
        var snap = lfComputeSnapshot();
        if (snap !== _lfLastSnapshot) {
            _lfLastSnapshot = snap;
            _lfDirty = true;
            lfUpdateSyncIndicator('Modifications détectées…', '#f39c12');
        }
    }

    // ── Init on page load ──
    // Fallback if DOMContentLoaded already fired
    if (document.readyState !== 'loading') { setTimeout(function() { lfInitMode(); }, 200); }
    window.addEventListener('DOMContentLoaded', function() {
        setTimeout(function() {
            lfInitMode();
        }, 500);
    });

    // ── Save before leaving ──
    window.addEventListener('beforeunload', function() {
        if (_lfDirHandle && _lfDirty) {
            // Synchronous attempt — may not complete but worth trying
            try { lfWriteToFolder(); } catch(e) {}
        }
    });

    // ── Save when tab becomes hidden (user switches tab/app) ──
    document.addEventListener('visibilitychange', function() {
        if (document.hidden && _lfDirHandle && _lfDirty) {
            lfWriteToFolder();
        }
    });

    async function cloudPush() {
        var cfg = getCloudConfig();
        if (cfg.provider === 'jsonbin' && !cfg.key) return alert('Saisissez votre clé API jsonbin.io');
        if (cfg.provider === 'gist' && !cfg.gistToken) return alert('Saisissez votre GitHub Personal Access Token');
        if (cfg.provider === 'webdav' && !cfg.wdUrl) return alert('Saisissez l\'URL de votre serveur WebDAV');
        if (cfg.provider === 'gdrive' && !_gdriveToken) return alert('Connectez-vous à Google Drive');
        if (cfg.provider === 'localfolder') { lfForceSave(); return; }

        cloudSetStatus('<i class="fas fa-spinner fa-spin"></i> Envoi en cours...', '#f39c12');
        try {
            var allData = collectAllModulesData();
            allData._cloudMeta = { lastPush: new Date().toISOString(), provider: cfg.provider };

            if (cfg.provider === 'jsonbin') await jsonbinPush(allData, cfg);
            else if (cfg.provider === 'gist') await gistPush(allData, cfg);
            else if (cfg.provider === 'webdav') await webdavPush(allData, cfg);
            else if (cfg.provider === 'gdrive') await gdrivePush(allData, cfg);


            cloudSetStatus('✅ Envoyé le ' + new Date().toLocaleString('fr-FR') + ' via ' + cfg.provider, '#27ae60');
        } catch (err) {
            cloudSetStatus('❌ ' + err.message, '#e74c3c');
        }
    }

    async function cloudPull() {
        var cfg = getCloudConfig();
        if (cfg.provider === 'jsonbin' && (!cfg.key || !cfg.bin)) return alert('Clé API et ID du Bin requis');
        if (cfg.provider === 'gist' && (!cfg.gistToken || !cfg.gistId)) return alert('Token et Gist ID requis');
        if (cfg.provider === 'webdav' && !cfg.wdUrl) return alert('URL WebDAV requise');
        if (cfg.provider === 'gdrive' && (!_gdriveToken || !cfg.gdriveFileId)) return alert('Connectez Google Drive et renseignez le File ID');
        if (cfg.provider === 'localfolder') { lfForceLoad(); return; }

        cloudSetStatus('<i class="fas fa-spinner fa-spin"></i> Récupération...', '#3498db');
        try {
            var record;
            if (cfg.provider === 'jsonbin') record = await jsonbinPull(cfg);
            else if (cfg.provider === 'gist') record = await gistPull(cfg);
            else if (cfg.provider === 'webdav') record = await webdavPull(cfg);
            else if (cfg.provider === 'gdrive') record = await gdrivePull(cfg);


            if (!record) throw new Error('Données vides');
            distributeToModules(record);

            var meta = record._cloudMeta || {};
            cloudSetStatus('✅ Récupéré (' + (meta.lastPush ? new Date(meta.lastPush).toLocaleString('fr-FR') : '?') + ')', '#27ae60');
            alert('✅ Données importées ! Rechargez la page pour appliquer.');
        } catch (err) {
            cloudSetStatus('❌ ' + err.message, '#e74c3c');
        }
    }

    function collectAllModulesData() {
        var allData = {};
        var frames = ['frame-perdir', 'frame-exam', 'frame-oral', 'frame-aed', 'frame-bibase'];
        frames.forEach(function(fid) {
            var fr = document.getElementById(fid);
            if (fr && fr.contentWindow) {
                try {
                    var keys = Object.keys(fr.contentWindow.localStorage);
                    keys.forEach(function(k) {
                        allData['__' + fid + '__' + k] = fr.contentWindow.localStorage.getItem(k);
                    });
                } catch(e) {}
            }
        });
        // Wrapper localStorage (settings, bibase_establishment, etc.)
        try {
            for (var wi = 0; wi < localStorage.length; wi++) {
                var wk = localStorage.key(wi);
                allData['__wrapper__' + wk] = localStorage.getItem(wk);
            }
        } catch(e) {}
        return allData;
    }

    function distributeToModules(record) {
        var frames = ['frame-perdir', 'frame-exam', 'frame-oral', 'frame-aed', 'frame-bibase'];
        frames.forEach(function(fid) {
            var fr = document.getElementById(fid);
            if (fr && fr.contentWindow) {
                try {
                    var prefix = '__' + fid + '__';
                    Object.keys(record).forEach(function(k) {
                        if (k.indexOf(prefix) === 0) {
                            try { fr.contentWindow.localStorage.setItem(k.substring(prefix.length), record[k]); } catch(e2) {}
                        }
                    });
                } catch(e) {}
            }
        });
        // Restore wrapper localStorage
        Object.keys(record).forEach(function(k) {
            if (k.indexOf('__wrapper__') === 0) {
                try { localStorage.setItem(k.substring(11), record[k]); } catch(e3) {}
            }
        });
    }

    // Auto-sync hook
    function cloudAutoSync() {
        var el = document.getElementById('s-cloud-auto');
        var ek = document.getElementById('s-cloud-enabled');
        if (el && el.checked && ek && ek.checked) { setTimeout(cloudPush, 500); }
    }


    function loadBibSettings() {
        var s = JSON.parse(localStorage.getItem('bibase_establishment') || '{}');
        var el;
        el = document.getElementById('bib-layout'); if (el && s.layout) el.value = s.layout;
        el = document.getElementById('bib-font'); if (el && s.font) el.value = s.font;
        el = document.getElementById('bib-signatory'); if (el && s.defaultSignatory) {
            var found = false;
            for (var i = 0; i < el.options.length; i++) { if (el.options[i].value === s.defaultSignatory) { found = true; break; } }
            if (!found) { var o = document.createElement('option'); o.value = s.defaultSignatory; o.text = s.defaultSignatory; el.appendChild(o); }
            el.value = s.defaultSignatory;
        }
        el = document.getElementById('bib-doc-title'); if (el && s.docTitle) el.value = s.docTitle;
        el = document.getElementById('bib-doc-footer'); if (el && s.docFooter) el.value = s.docFooter;
    }


    // === PDF HEADER PREVIEW ===
    function updatePdfHeaderPreview() {
        var layout   = (document.getElementById('s-pdf-layout')  || {}).value || 'classique';
        var color    = (document.getElementById('s-pdf-color-hex') || {}).value || '#1b2433';
        var subtitle = (document.getElementById('s-pdf-subtitle') || {}).value || 'Direction';
        var s = getSettings();
        var school = s.school || "Nom de l'\u00e9tablissement";
        var city   = s.city   || '';
        var logo   = s.logoSrc ? '<img src="'+s.logoSrc+'" style="max-height:48px;max-width:96px;object-fit:contain;display:block;">' : '';
        var sub    = subtitle || 'Direction';
        var inn    = document.getElementById('pdf-header-preview-inner');
        if (!inn) return;
        var html = '';
        if (layout === 'moderne') {
            html = '<div style="text-align:center;padding-bottom:8px;border-bottom:2px solid '+color+';">'+(s.logoSrc ? '<img src="'+s.logoSrc+'" style="max-height:40px;object-fit:contain;display:block;margin:0 auto 6px;">' : '')+'<div style="font-size:.95rem;font-weight:900;text-transform:uppercase;letter-spacing:2px;color:'+color+';">'+school+'</div><div style="font-size:.7rem;color:#666;margin-top:2px;">'+sub+(city ? ' — '+city : '')+'</div></div>';
        } else if (layout === 'bandeau') {
            html = '<div style="background:'+color+';color:white;padding:8px 14px;display:flex;justify-content:space-between;align-items:center;"><div><div style="font-size:.88rem;font-weight:900;text-transform:uppercase;letter-spacing:1px;">'+school+'</div><div style="font-size:.65rem;opacity:.85;margin-top:1px;">'+sub+(city ? ' — '+city : '')+'</div></div>'+(s.logoSrc ? '<img src="'+s.logoSrc+'" style="max-height:36px;max-width:70px;object-fit:contain;background:white;padding:2px;border-radius:3px;">' : '')+'</div>';
        } else {
            html = '<div style="display:flex;justify-content:space-between;align-items:flex-start;border-bottom:1.5px solid #000;padding-bottom:8px;"><div><div style="font-weight:bold;text-transform:uppercase;font-size:.9rem;">'+school+'</div><div style="font-size:.7rem;color:#555;margin-top:1px;">'+sub+(city ? ' — '+city : '')+'</div></div><div>'+(s.logoSrc ? '<img src="'+s.logoSrc+'" style="max-height:48px;max-width:96px;object-fit:contain;">' : '')+'</div></div>';
        }
        inn.innerHTML = html;
    }
    // Sync color input ↔ hex text
    document.addEventListener('change', function(e) {
        if (e.target && e.target.id === 's-pdf-color') {
            var hex = document.getElementById('s-pdf-color-hex');
            if (hex) hex.value = e.target.value;
            updatePdfHeaderPreview();
        }
        if (e.target && e.target.id === 's-pdf-layout') updatePdfHeaderPreview();
    });

    </script>


<script>
// ===== RESET ACCORDEONS A L'OUVERTURE =====
(function() {
    const originalOpenSettings = window.openSettings;
    const originalCloseSettings = window.closeSettings;

    window.openSettings = function() {
        document.querySelectorAll('.acc-section').forEach(sec => {
            sec.classList.remove('open');
        });
        if (originalOpenSettings) originalOpenSettings();
    };

    window.closeSettings = function() {
        document.querySelectorAll('.acc-section').forEach(sec => {
            sec.classList.remove('open');
        });
        if (originalCloseSettings) originalCloseSettings();
    };
})();
</script>


<script>
/* ===== V8 - MASQUER EVENEMENTS <= 3 CARACTERES ===== */

function hideShortEvents(){
    const possibleEvents = document.querySelectorAll('[class*="event"], [class*="rdv"], [data-event]');
    possibleEvents.forEach(el => {
        const txt = (el.innerText || "").trim();
        if(txt.length > 0 && txt.length <= 3){
            el.style.display = "none";
        }
    });
}

// Exécution après chargement
document.addEventListener("DOMContentLoaded", function(){
    hideShortEvents();
    
    // Observer si agenda dynamique
    const observer = new MutationObserver(() => hideShortEvents());
    observer.observe(document.body, { childList: true, subtree: true });
});
</script>


<script>
/* ===== V9 - EVENEMENTS DU JOUR SUR ACCUEIL ===== */

function handleHomeEvents(){

    const today = new Date();
    const yyyy = today.getFullYear();
    const mm = String(today.getMonth()+1).padStart(2,'0');
    const dd = String(today.getDate()).padStart(2,'0');
    const todayStr = yyyy + "-" + mm + "-" + dd;

    // Cherche événements avec attribut data-date="YYYY-MM-DD"
    const allEvents = document.querySelectorAll('[data-date]');
    let todayEvents = [];

    allEvents.forEach(ev => {
        if(ev.getAttribute('data-date') === todayStr){
            todayEvents.push(ev);
        }
    });

    // Trie chronologique si data-time="HH:MM"
    todayEvents.sort((a,b)=>{
        const ta = a.getAttribute('data-time') || "23:59";
        const tb = b.getAttribute('data-time') || "23:59";
        return ta.localeCompare(tb);
    });

    const welcomeHeader = document.querySelector('.welcome-header');
    if(!welcomeHeader) return;

    // Supprimer ancien bloc si existant
    const old = document.getElementById('home-today-events');
    if(old) old.remove();

    if(todayEvents.length > 0){

        document.body.classList.remove('home-no-events');

        const container = document.createElement('div');
        container.id = "home-today-events";
        container.style.marginTop = "18px";
        container.style.fontSize = "0.9rem";
        container.style.color = "#1f2937";
        container.style.textAlign = "center";

        const title = document.createElement('div');
        title.innerHTML = "<strong>ÉVÉNEMENTS DU JOUR</strong>";
        title.style.marginBottom = "8px";
        container.appendChild(title);

        todayEvents.forEach(ev=>{
            const line = document.createElement('div');
            const time = ev.getAttribute('data-time') || "";
            const text = (ev.innerText || "").trim();
            line.textContent = (time ? time + " — " : "") + text;
            line.style.marginBottom = "4px";
            container.appendChild(line);
        });

        welcomeHeader.appendChild(container);

    } else {
        // Aucun événement → centre verticalement le logo
        document.body.classList.add('home-no-events');
    }
}

document.addEventListener("DOMContentLoaded", handleHomeEvents);
</script>


<script>
/* ===== V10 - FILTRE EVENEMENTS COURTS + ACCUEIL EVENEMENTS DU JOUR =====
   Règle: masquer/ignorer tout événement dont le titre (trim) fait <= 3 caractères.
   Objectif: les "créneaux" (ex: "hyg", "TRM") ne polluent ni la liste, ni l'accueil.
*/

function _evtTitleOk(t){
  t = (t || "").trim();
  return t.length > 3;
}

function sanitizeEventsInSettings(){
  try{
    if (typeof getSettings !== "function" || typeof STORAGE_KEY === "undefined") return;
    const s = getSettings() || {};
    let changed = false;

    if (Array.isArray(s.gcalEvents)) {
      const before = s.gcalEvents.length;
      s.gcalEvents = s.gcalEvents.filter(ev => _evtTitleOk(ev && ev.title));
      if (s.gcalEvents.length !== before) changed = true;
    }
    if (Array.isArray(s.outlookEvents)) {
      const before = s.outlookEvents.length;
      s.outlookEvents = s.outlookEvents.filter(ev => _evtTitleOk(ev && ev.title));
      if (s.outlookEvents.length !== before) changed = true;
    }

    if (changed){
      localStorage.setItem(STORAGE_KEY, JSON.stringify(s));
      // repousser vers les modules si dispo
      if (typeof pushGcalToModules === "function") try{ pushGcalToModules(); } catch(e){}
      if (typeof pushOutlookToModules === "function") try{ pushOutlookToModules(); } catch(e){}
    }
  }catch(e){}
}

/* Hook après synchro Google/Outlook (sans réécrire vos fonctions) */
(function(){
  const ogGcal = window.gcalFetchEvents;
  if (typeof ogGcal === "function"){
    window.gcalFetchEvents = function(){
      const r = ogGcal.apply(this, arguments);
      // la fetch est async → on sanitize après un court délai, puis re-check
      setTimeout(sanitizeEventsInSettings, 1200);
      setTimeout(sanitizeEventsInSettings, 3200);
      return r;
    };
  }
  const ogOutlook = window.outlookFetchEvents;
  if (typeof ogOutlook === "function"){
    window.outlookFetchEvents = function(){
      const r = ogOutlook.apply(this, arguments);
      setTimeout(sanitizeEventsInSettings, 1200);
      setTimeout(sanitizeEventsInSettings, 3200);
      return r;
    };
  }
})();

/* ===== ACCUEIL: afficher les événements DU JOUR sous le logo (ordre chrono) ===== */
function renderHomeTodayEvents(){
  try{
    if (typeof getSettings !== "function") return;

    const s = getSettings() || {};
    const events = []
      .concat(Array.isArray(s.gcalEvents) ? s.gcalEvents : [])
      .concat(Array.isArray(s.outlookEvents) ? s.outlookEvents : [])
      .filter(ev => ev && _evtTitleOk(ev.title));

    const now = new Date();
    const yyyy = now.getFullYear();
    const mm = String(now.getMonth()+1).padStart(2,'0');
    const dd = String(now.getDate()).padStart(2,'0');
    const todayStr = `${yyyy}-${mm}-${dd}`;

    const todayEvents = events.filter(ev => ev.date === todayStr);

    todayEvents.sort((a,b)=>{
      const ta = (a.time || "23:59");
      const tb = (b.time || "23:59");
      return (todayStr + " " + ta).localeCompare(todayStr + " " + tb);
    });

    const welcomeHeader = document.querySelector('.welcome-header');
    if(!welcomeHeader) return;

    const old = document.getElementById('home-today-events');
    if(old) old.remove();

    if(todayEvents.length){
      document.body.classList.remove('home-no-events');

      const box = document.createElement('div');
      box.id = 'home-today-events';
      box.style.marginTop = '14px';
      box.style.textAlign = 'center';

      const title = document.createElement('div');
      title.innerHTML = '<strong style="font-size:.82rem;letter-spacing:.8px;">ÉVÉNEMENTS DU JOUR</strong>';
      title.style.marginBottom = '8px';
      title.style.color = '#1f2937';
      box.appendChild(title);

      todayEvents.forEach(ev=>{
        const line = document.createElement('div');
        const time = (ev.time || '').trim();
        const txt = (ev.title || '').trim();
        line.textContent = (time ? (time + ' — ') : '') + txt;
        line.style.fontSize = '.88rem';
        line.style.color = '#1f2937';
        line.style.marginBottom = '4px';
        box.appendChild(line);
      });

      welcomeHeader.appendChild(box);
    }else{
      document.body.classList.add('home-no-events');
    }
  }catch(e){}
}

/* Exécutions */
document.addEventListener('DOMContentLoaded', function(){
  sanitizeEventsInSettings();
  renderHomeTodayEvents();
});

/* Si une synchro modifie le localStorage dans un autre contexte, MAJ accueil */
window.addEventListener('storage', function(){
  sanitizeEventsInSettings();
  renderHomeTodayEvents();
});

/* Petit re-check au cas où les modules alimentent les settings après coup */
setTimeout(function(){
  sanitizeEventsInSettings();
  renderHomeTodayEvents();
}, 1800);
</script>


<script>
/* ===== V11 - MAJ AFFICHAGE EVENEMENTS ACCUEIL (Google Agenda) =====
   Problème: l'accueil est affiché après coup (goHome) et la liste d'événements est en localStorage.
   Solution: relancer le rendu à chaque retour accueil + après synchronisation.
*/

(function(){
  // Réutiliser la fonction V10 si elle existe
  function rerenderSoon(){
    if (typeof sanitizeEventsInSettings === "function") { try{ sanitizeEventsInSettings(); }catch(e){} }
    if (typeof renderHomeTodayEvents === "function") {
      // double appel: immédiat + après repaint
      try{ renderHomeTodayEvents(); }catch(e){}
      setTimeout(function(){ try{ renderHomeTodayEvents(); }catch(e){} }, 120);
      setTimeout(function(){ try{ renderHomeTodayEvents(); }catch(e){} }, 600);
    }
  }

  // Hook goHome (retour accueil)
  const _goHome = window.goHome;
  if (typeof _goHome === "function"){
    window.goHome = function(){
      const r = _goHome.apply(this, arguments);
      rerenderSoon();
      return r;
    };
  } else {
    // Si jamais goHome n'existe pas au moment du hook
    window.addEventListener('load', rerenderSoon);
  }

  // Hook loadModule: quand on quitte un module et revient rapidement, on garde l'accueil à jour
  const _loadModule = window.loadModule;
  if (typeof _loadModule === "function"){
    window.loadModule = function(){
      const r = _loadModule.apply(this, arguments);
      // rien à faire côté module, mais on garde un refresh léger au cas où l'accueil reste visible
      setTimeout(function(){}, 0);
      return r;
    };
  }

  // Hook synchro Google/Outlook (si non déjà hooké correctement)
  const _gcalFetch = window.gcalFetchEvents;
  if (typeof _gcalFetch === "function" && !_gcalFetch.__v11Wrapped){
    const wrapped = function(){
      const r = _gcalFetch.apply(this, arguments);
      setTimeout(rerenderSoon, 1400);
      setTimeout(rerenderSoon, 3400);
      return r;
    };
    wrapped.__v11Wrapped = true;
    window.gcalFetchEvents = wrapped;
  }
  const _outlookFetch = window.outlookFetchEvents;
  if (typeof _outlookFetch === "function" && !_outlookFetch.__v11Wrapped){
    const wrapped2 = function(){
      const r = _outlookFetch.apply(this, arguments);
      setTimeout(rerenderSoon, 1400);
      setTimeout(rerenderSoon, 3400);
      return r;
    };
    wrapped2.__v11Wrapped = true;
    window.outlookFetchEvents = wrapped2;
  }

  // 1er rendu (au chargement)
  document.addEventListener('DOMContentLoaded', rerenderSoon);
})();
</script>


<script>
/* ===== V12 - ACCUEIL EVENEMENTS (ROBUSTE) =====
   - Lit les événements depuis getSettings() si dispo, sinon depuis plusieurs clés localStorage.
   - Normalise les dates (YYYY-MM-DD, DD/MM/YYYY, "jeu 26/02", etc.).
   - Affiche les événements du jour (ordre chrono) sous le logo.
   - Conserve le masquage des titres <= 3 caractères (déjà en place via sanitizeEventsInSettings quand possible).
*/

function _v12TitleOk(t){
  t = (t || "").trim();
  return t.length > 3;
}

function _v12TryParseSettings(){
  // 1) via getSettings()
  try{
    if (typeof getSettings === "function") {
      const s = getSettings();
      if (s && typeof s === "object") return s;
    }
  }catch(e){}

  // 2) via clés connues
  const keys = ['pilote_suite_settings','pilote_master_settings','pilote_settings','settings','cadir_settings'];
  for (const k of keys){
    try{
      const raw = localStorage.getItem(k);
      if (!raw) continue;
      const obj = JSON.parse(raw);
      if (obj && typeof obj === "object") return obj;
    }catch(e){}
  }

  // 3) scan heuristique: trouver un objet contenant gcalEvents
  try{
    for (let i=0;i<localStorage.length;i++){
      const k = localStorage.key(i);
      const raw = localStorage.getItem(k);
      if (!raw || raw[0] !== '{') continue;
      try{
        const obj = JSON.parse(raw);
        if (obj && obj.gcalEvents && Array.isArray(obj.gcalEvents)) return obj;
      }catch(e2){}
    }
  }catch(e){}

  return {};
}

function _v12Pad2(n){ return String(n).padStart(2,'0'); }

function _v12TodayParts(){
  const d = new Date();
  return { y:d.getFullYear(), m:_v12Pad2(d.getMonth()+1), d:_v12Pad2(d.getDate()) };
}

function _v12NormDateAny(x){
  // Retourne {iso:'YYYY-MM-DD', md:'MM-DD'} ou null
  if (!x) return null;
  let s = String(x).trim();

  // Si ISO avec time
  if (/^\d{4}-\d{2}-\d{2}T/.test(s)) s = s.split('T')[0];

  // ISO yyyy-mm-dd
  if (/^\d{4}-\d{2}-\d{2}$/.test(s)){
    return { iso:s, md:s.substring(5) };
  }

  // dd/mm/yyyy
  let m = s.match(/^(\d{1,2})\/(\d{1,2})\/(\d{4})$/);
  if (m){
    const dd=_v12Pad2(m[1]), mm=_v12Pad2(m[2]), yy=m[3];
    const iso = `${yy}-${mm}-${dd}`;
    return { iso, md:`${mm}-${dd}` };
  }

  // dd/mm (sans année) ou "jeu 26/02" etc.
  m = s.match(/(\d{1,2})\/(\d{1,2})/);
  if (m){
    const dd=_v12Pad2(m[1]), mm=_v12Pad2(m[2]);
    const {y} = _v12TodayParts();
    const iso = `${y}-${mm}-${dd}`;
    return { iso, md:`${mm}-${dd}` };
  }

  // Fallback: Date.parse
  const t = Date.parse(s);
  if (!Number.isNaN(t)){
    const d = new Date(t);
    const iso = `${d.getFullYear()}-${_v12Pad2(d.getMonth()+1)}-${_v12Pad2(d.getDate())}`;
    return { iso, md: iso.substring(5) };
  }

  return null;
}

function _v12NormTimeAny(x){
  if (!x) return '';
  const s = String(x).trim();
  // HH:MM from strings like "12:30"
  const m = s.match(/(\d{1,2}):(\d{2})/);
  if (m) return _v12Pad2(m[1]) + ":" + m[2];
  // if "1230"
  const m2 = s.match(/^(\d{2})(\d{2})$/);
  if (m2) return m2[1]+":"+m2[2];
  return '';
}

function _v12CollectEvents(){
  const s = _v12TryParseSettings();
  const g = Array.isArray(s.gcalEvents) ? s.gcalEvents : [];
  const o = Array.isArray(s.outlookEvents) ? s.outlookEvents : [];
  const all = g.concat(o);

  // Normalisation structure
  const out = [];
  all.forEach(ev=>{
    if (!ev) return;
    const title = (ev.title || ev.summary || ev.subject || '').trim();
    if (!_v12TitleOk(title)) return;

    // date possible: ev.date, ev.startDate, ev.start, ev.startDT
    const dateRaw = ev.date || ev.startDate || ev.start || (ev.start && ev.start.date) || (ev.start && ev.start.dateTime) || ev.startDT || ev.startDateTime;
    const nd = _v12NormDateAny(dateRaw);
    if (!nd) return;

    const timeRaw = ev.time || ev.startTime || (ev.start && ev.start.dateTime) || ev.startDT || ev.startDateTime;
    const time = _v12NormTimeAny(timeRaw);

    out.push({
      title,
      iso: nd.iso,
      md: nd.md,
      time,
      calName: ev.calName || ev.calendar || ev.source || '',
      color: ev.color || ev.bg || ''
    });
  });

  return out;
}

function _v12RenderHomeToday(){
  const welcomeHeader = document.querySelector('.welcome-header');
  if (!welcomeHeader) return;

  const old = document.getElementById('home-today-events');
  if (old) old.remove();

  const {y,m,d} = _v12TodayParts();
  const todayIso = `${y}-${m}-${d}`;
  const todayMd = `${m}-${d}`;

  const events = _v12CollectEvents();

  // match strict ISO OR match month-day (au cas où l'année diffère / est absente)
  const todayEvents = events.filter(e => e.iso === todayIso || e.md === todayMd);

  todayEvents.sort((a,b)=>{
    const ta = a.time || "23:59";
    const tb = b.time || "23:59";
    return (todayIso + " " + ta).localeCompare(todayIso + " " + tb);
  });

  if (todayEvents.length){
    document.body.classList.remove('home-no-events');

    const box = document.createElement('div');
    box.id = 'home-today-events';
    box.style.marginTop = '14px';
    box.style.textAlign = 'center';

    const title = document.createElement('div');
    title.innerHTML = '<strong style="font-size:.82rem;letter-spacing:.8px;">ÉVÉNEMENTS DU JOUR</strong>';
    title.style.marginBottom = '8px';
    title.style.color = '#1f2937';
    box.appendChild(title);

    todayEvents.forEach(ev=>{
      const line = document.createElement('div');
      line.textContent = (ev.time ? (ev.time + ' — ') : '') + ev.title;
      line.style.fontSize = '.88rem';
      line.style.color = '#1f2937';
      line.style.marginBottom = '4px';
      box.appendChild(line);
    });

    welcomeHeader.appendChild(box);
  }else{
    document.body.classList.add('home-no-events');
  }
}

function _v12RerenderSoon(){
  try{
    // si vos fonctions V10 existent, on les laisse travailler aussi
    if (typeof sanitizeEventsInSettings === "function") { sanitizeEventsInSettings(); }
  }catch(e){}
  try{ _v12RenderHomeToday(); }catch(e){}
  setTimeout(function(){ try{ _v12RenderHomeToday(); }catch(e){} }, 120);
  setTimeout(function(){ try{ _v12RenderHomeToday(); }catch(e){} }, 800);
}

/* Hook retour Accueil */
(function(){
  const _goHome = window.goHome;
  if (typeof _goHome === "function"){
    window.goHome = function(){
      const r = _goHome.apply(this, arguments);
      _v12RerenderSoon();
      return r;
    };
  }
  // Après synchro
  const _gcalFetch = window.gcalFetchEvents;
  if (typeof _gcalFetch === "function" && !_gcalFetch.__v12Wrapped){
    const wrapped = function(){
      const r = _gcalFetch.apply(this, arguments);
      setTimeout(_v12RerenderSoon, 1400);
      setTimeout(_v12RerenderSoon, 3400);
      return r;
    };
    wrapped.__v12Wrapped = true;
    window.gcalFetchEvents = wrapped;
  }

  document.addEventListener('DOMContentLoaded', _v12RerenderSoon);
  window.addEventListener('storage', _v12RerenderSoon);
  setTimeout(_v12RerenderSoon, 1800);
})();
</script>


<script>
/* ===== V13 - SYNC GOOGLE AGENDA AUTOMATIQUE =====
   Objectif: lancer la synchro Google Agenda automatiquement
   - au chargement
   - au retour Accueil
   - puis périodiquement (toutes les 15 minutes par défaut)
   Sans casser si l'utilisateur n'a pas activé Google Agenda.
*/

(function(){
  const AUTO_SYNC_MINUTES = 15;   // <-- modifiable si besoin
  let _autoSyncTimer = null;
  let _autoSyncRunning = false;

  function _v13GetSettingsSafe(){
    try{ if (typeof getSettings === "function") return getSettings() || {}; }catch(e){}
    // fallback: tenter les mêmes clés que v12
    const keys = ['pilote_suite_settings','pilote_master_settings','pilote_settings','settings','cadir_settings'];
    for (const k of keys){
      try{
        const raw = localStorage.getItem(k);
        if (!raw) continue;
        const obj = JSON.parse(raw);
        if (obj && typeof obj === "object") return obj;
      }catch(e){}
    }
    return {};
  }

  function _v13IsGcalEnabled(){
    const s = _v13GetSettingsSafe();
    // plusieurs noms possibles selon vos versions
    const flag = !!(s.gcalEnabled || s.useGcal || s.gcal || s.googleCalendarEnabled);
    // checkbox paramètres si présente
    const cb = document.getElementById('s-gcal');
    const cbOn = cb ? cb.checked : false;
    return flag || cbOn;
  }

  function _v13CanSync(){
    // On ne force pas l'auth, on déclenche juste la synchro si elle est possible.
    // Si pas connecté, la fonction existante gère (status UI) sans casser.
    return (typeof window.gcalFetchEvents === "function") && _v13IsGcalEnabled();
  }

  function _v13SyncNow(reason){
    if (!_v13CanSync()) return;
    if (_autoSyncRunning) return;
    _autoSyncRunning = true;
    try{
      window.gcalFetchEvents();
    }catch(e){
      // noop
    }finally{
      setTimeout(()=>{ _autoSyncRunning = false; }, 1500);
    }
  }

  function _v13StartAutoSync(){
    if (_autoSyncTimer) return;
    _autoSyncTimer = setInterval(function(){
      _v13SyncNow("interval");
    }, AUTO_SYNC_MINUTES * 60 * 1000);
  }

  function _v13StopAutoSync(){
    if (_autoSyncTimer){
      clearInterval(_autoSyncTimer);
      _autoSyncTimer = null;
    }
  }

  function _v13RefreshAutoSyncState(){
    if (_v13CanSync()){
      _v13StartAutoSync();
    }else{
      _v13StopAutoSync();
    }
  }

  // Hook retour Accueil: on relance une synchro légère
  const _goHome = window.goHome;
  if (typeof _goHome === "function"){
    window.goHome = function(){
      const r = _goHome.apply(this, arguments);
      setTimeout(function(){ _v13SyncNow("home"); }, 400);
      return r;
    };
  }

  // Si l'utilisateur active/désactive la case dans Paramètres
  document.addEventListener('change', function(e){
    if (e && e.target && e.target.id === 's-gcal'){
      _v13RefreshAutoSyncState();
      if (e.target.checked) setTimeout(()=>_v13SyncNow("toggle"), 300);
    }
  });

  // Au chargement: refresh + synchro initiale
  document.addEventListener('DOMContentLoaded', function(){
    _v13RefreshAutoSyncState();
    setTimeout(function(){ _v13SyncNow("init"); }, 800);
    // re-check au cas où le module agenda charge après
    setTimeout(function(){ _v13RefreshAutoSyncState(); _v13SyncNow("late"); }, 2500);
  });

  // Si un autre onglet met à jour les settings
  window.addEventListener('storage', function(){
    _v13RefreshAutoSyncState();
  });
})();
</script>


<script>
/* ===== V14 - GOOGLE AGENDA: ordre des agendas + synchro fiable (clé stockée + pagination) + plus d'alerte sur Accueil ===== */

(function(){
  const PRIORITY_CALS = [
    "Enseignants STMG",
    "Familles Secteur STMG",
    "Familles - Secteur STMG"
  ];

  function prioIndex(name){
    const n = String(name||"").trim().toLowerCase();
    for (let i=0;i<PRIORITY_CALS.length;i++){
      if (n === PRIORITY_CALS[i].toLowerCase()) return i;
    }
    return 999;
  }

  /* 1) Rendre la liste d'agendas (checkbox) avec les 2 agendas prioritaires en tête */
  const _renderGcalList = window.renderGcalList;
  if (typeof _renderGcalList === "function"){
    window.renderGcalList = function(cals, sel){
      try{
        if (Array.isArray(cals)){
          cals = cals.slice().sort((a,b)=>{
            const ia = prioIndex(a && a.name), ib = prioIndex(b && b.name);
            if (ia !== ib) return ia - ib;
            return String((a&&a.name)||"").localeCompare(String((b&&b.name)||""), 'fr', {sensitivity:'base'});
          });
        }
      }catch(e){}
      return _renderGcalList.call(this, cals, sel);
    };
  }

  /* 2) Sur le calendrier (cards), l'ordre dépend de s.gcalCals -> on trie et on persiste */
  function sortAndPersistCals(){
    try{
      if (typeof getSettings !== "function" || typeof STORAGE_KEY === "undefined") return;
      const s = getSettings() || {};
      if (!Array.isArray(s.gcalCals)) return;
      const sorted = s.gcalCals.slice().sort((a,b)=>{
        const ia = prioIndex(a && a.name), ib = prioIndex(b && b.name);
        if (ia !== ib) return ia - ib;
        return String((a&&a.name)||"").localeCompare(String((b&&b.name)||""), 'fr', {sensitivity:'base'});
      });
      s.gcalCals = sorted;
      localStorage.setItem(STORAGE_KEY, JSON.stringify(s));
      // mettre aussi en mémoire
      try{ window._gcalCalsData = sorted; }catch(e){}
    }catch(e){}
  }
  document.addEventListener('DOMContentLoaded', sortAndPersistCals);

  /* 3) Synchro Google: utiliser la clé stockée (s.gcalKey) + pagination (nextPageToken) */
  const _origGcalFetchEvents = window.gcalFetchEvents;
  if (typeof _origGcalFetchEvents === "function"){
    window.gcalFetchEvents = async function(options){
      // options: {silent:true} pour éviter les alert() automatiques
      const silent = !!(options && options.silent);

      const sel = (typeof getGcalSel === "function") ? getGcalSel() : [];
      if (!sel.length){
        if (!silent) alert('Sélectionnez au moins un agenda.');
        return;
      }

      const useOAuth = !!window._gcalAccessToken;
      // clé: input (si settings ouverts) OU settings sauvegardés
      let apiKey = '';
      try{
        const el = document.getElementById('s-gcal-key');
        if (el && el.value) apiKey = String(el.value||'').trim();
      }catch(e){}
      if (!apiKey){
        try{
          if (typeof getSettings === "function"){
            const s = getSettings() || {};
            apiKey = String(s.gcalKey || '').trim();
          }
        }catch(e){}
      }

      if (!useOAuth && !apiKey){
        // surtout pas d'alerte sur Accueil
        if (!silent) alert('Connectez-vous via OAuth2 ou saisissez une clé API.');
        return;
      }

      const statusEl = document.getElementById('gcal-events-status');
      if (statusEl) statusEl.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Récupération...';

      const now = new Date();
      const start = new Date(now.getFullYear(), now.getMonth() - 2, 1).toISOString();
      const end   = new Date(now.getFullYear(), now.getMonth() + 4, 0).toISOString();

      // map calendriers
      const calMap = {};
      try{
        const s = (typeof getSettings==="function") ? (getSettings()||{}) : {};
        const src = (window._gcalCalsData && window._gcalCalsData.length) ? window._gcalCalsData : (s.gcalCals || []);
        (src||[]).forEach(c=>{ if(c && c.id) calMap[c.id]=c; });
      }catch(e){}

      async function fetchAllPages(calId){
        const all = [];
        let pageToken = '';
        for (let guard=0; guard<30; guard++){
          let url = 'https://www.googleapis.com/calendar/v3/calendars/' + encodeURIComponent(calId) +
            '/events?timeMin=' + encodeURIComponent(start) +
            '&timeMax=' + encodeURIComponent(end) +
            '&singleEvents=true&orderBy=startTime&maxResults=2500' +
            '&showDeleted=false' +
            '&showHiddenInvitations=true';
          if (pageToken) url += '&pageToken=' + encodeURIComponent(pageToken);

          const opts = {};
          if (useOAuth) opts.headers = { 'Authorization': 'Bearer ' + window._gcalAccessToken };
          else url += '&key=' + encodeURIComponent(apiKey);

          let data = {items:[]};
          try{
            const r = await fetch(url, opts);
            data = r.ok ? await r.json() : {items:[]};
          }catch(e){ data = {items:[]}; }

          (data.items||[]).forEach(it=>all.push(it));
          pageToken = data.nextPageToken || '';
          if (!pageToken) break;
        }
        return all;
      }

      const results = await Promise.all(sel.map(async calId => ({calId, items: await fetchAllPages(calId)})));

      const events = [];
      results.forEach(res=>{
        const calId = res.calId;
        const calInfo = calMap[calId] || {name: calId, bg:'#4285f4'};
        (res.items||[]).forEach(ev=>{
          if (!ev.start) return;
          const startDate = ev.start.date || (ev.start.dateTime ? ev.start.dateTime.split('T')[0] : null);
          if (!startDate) return;
          const startTime = ev.start.dateTime ? ev.start.dateTime.split('T')[1].substring(0,5) : '';
          const endTime = (ev.end && ev.end.dateTime) ? ev.end.dateTime.split('T')[1].substring(0,5) : '';
          events.push({
            id: ev.id,
            title: ev.summary || '(sans titre)',
            date: startDate,
            time: startTime,
            endTime: endTime,
            calName: calInfo.name,
            color: calInfo.bg,
            calId: calId
          });
        });
      });

      events.sort((a,b)=> (a.date + ' ' + (a.time||'00:00')).localeCompare(b.date + ' ' + (b.time||'00:00')));

      try{
        if (typeof getSettings === "function" && typeof STORAGE_KEY !== "undefined"){
          const s = getSettings() || {};
          s.gcalEvents = events;
          s.gcalSel = sel;
          // persister la clé si elle a été saisie dans l'UI (évite "vide" si settings pas ouverts)
          if (apiKey && !s.gcalKey) s.gcalKey = apiKey;
          localStorage.setItem(STORAGE_KEY, JSON.stringify(s));
        }
      }catch(e){}

      // pousser aux modules (et donc au calendrier)
      try{ if (typeof pushGcalToModules === "function") pushGcalToModules(); }catch(e){}

      if (statusEl){
        statusEl.innerHTML = '<span style="color:#34a853;"><i class="fas fa-check"></i> ' + events.length + ' événement(s) synchronisé(s)</span>';
      }

      // après synchro, on relance l'affichage Accueil si v12/v11 est présent
      try{
        if (typeof _v12RerenderSoon === "function") _v12RerenderSoon();
        if (typeof renderHomeTodayEvents === "function") renderHomeTodayEvents();
      }catch(e){}
    };
  }

  /* 4) Stopper l'alerte quand on clique "Accueil" : l'auto-sync passe en mode silent */
  // On surcharge goHome si présent
  const _goHome = window.goHome;
  if (typeof _goHome === "function"){
    window.goHome = function(){
      const r = _goHome.apply(this, arguments);
      // synchro silencieuse (pas d'alert)
      try{
        const s = (typeof getSettings==="function") ? (getSettings()||{}) : {};
        if (s.gcalEnabled && typeof window.gcalFetchEvents === "function"){
          window.gcalFetchEvents({silent:true});
        }
      }catch(e){}
      return r;
    };
  }
})();
</script>


<script>
/* ===== V15 - Ordre agendas cochés + Sync fiabilisée + Masquage créneaux (<=3) dans la grille ===== */
(function(){
  const TITLE_MIN = 4; // >3 affiché
  function getSettingsSafe(){
    try{ if (typeof getSettings === 'function') return getSettings() || {}; }catch(e){}
    try{ if (typeof STORAGE_KEY !== 'undefined') return JSON.parse(localStorage.getItem(STORAGE_KEY) || '{}') || {}; }catch(e){}
    return {};
  }
  function saveSettingsSafe(s){
    try{ if (typeof STORAGE_KEY !== 'undefined') localStorage.setItem(STORAGE_KEY, JSON.stringify(s)); }catch(e){}
  }
  function getCalNameById(id, s){
    const cals = (s && Array.isArray(s.gcalCals)) ? s.gcalCals : (window._gcalCalsData || []);
    const found = (cals||[]).find(c => c && c.id === id);
    return found ? found.name : id;
  }

  function renderGcalOrderUI(){
    const wrap = document.getElementById('gcal-order-wrap');
    const list = document.getElementById('gcal-order-list');
    if (!wrap || !list) return;

    const s = getSettingsSafe();
    const enabled = !!(s.gcalEnabled || s.useGcal || s.gcal || s.googleCalendarEnabled) ||
      (document.getElementById('s-gcal') && document.getElementById('s-gcal').checked);
    if (!enabled){ wrap.style.display='none'; return; }

    const sel = Array.isArray(s.gcalSel) ? s.gcalSel.slice() : (typeof getGcalSel === 'function' ? (getGcalSel()||[]) : []);
    if (!sel.length){ wrap.style.display='none'; return; }
    wrap.style.display='block';

    const order = Array.isArray(s.gcalSelOrder) ? s.gcalSelOrder.slice() : [];
    const setOrder = new Set(order);
    const merged = order.filter(id => sel.includes(id)).concat(sel.filter(id => !setOrder.has(id)));

    list.innerHTML = '';
    merged.forEach((id) => {
      const li = document.createElement('li');
      li.className = 'order-item';
      li.draggable = true;
      li.dataset.id = id;
      li.innerHTML = `
        <i class="fas fa-grip-lines order-grip"></i>
        <div class="order-icon" style="background:#3498db;"><i class="fas fa-calendar-alt"></i></div>
        <div class="order-label">${getCalNameById(id, s)}</div>
      `;

      li.addEventListener('dragstart', () => { li.classList.add('dragging'); });
      li.addEventListener('dragend', () => {
        li.classList.remove('dragging');
        persistGcalOrderFromUI();
        try{ if (typeof pushGcalToModules === 'function') pushGcalToModules(); }catch(e){}
      });
      li.addEventListener('dragover', (e) => {
        e.preventDefault();
        const dragging = list.querySelector('.dragging');
        if (!dragging || dragging === li) return;
        const rect = li.getBoundingClientRect();
        const after = (e.clientY - rect.top) > rect.height/2;
        list.insertBefore(dragging, after ? li.nextSibling : li);
      });
      list.appendChild(li);
    });
  }

  function persistGcalOrderFromUI(){
    const list = document.getElementById('gcal-order-list');
    if (!list) return;
    const ids = Array.from(list.querySelectorAll('.order-item')).map(li => li.dataset.id).filter(Boolean);
    const s = getSettingsSafe();
    s.gcalSelOrder = ids;
    if (Array.isArray(s.gcalSel)){
      const set = new Set(ids);
      s.gcalSel = ids.filter(id => s.gcalSel.includes(id)).concat(s.gcalSel.filter(id => !set.has(id)));
    }
    saveSettingsSafe(s);
  }

  const _getGcalSel = window.getGcalSel;
  if (typeof _getGcalSel === 'function'){
    window.getGcalSel = function(){
      const sel = _getGcalSel.apply(this, arguments) || [];
      try{
        const s = getSettingsSafe();
        const order = Array.isArray(s.gcalSelOrder) ? s.gcalSelOrder : [];
        if (!order.length) return sel;
        const set = new Set(order);
        return order.filter(id => sel.includes(id)).concat(sel.filter(id => !set.has(id)));
      }catch(e){ return sel; }
    };
  }

  function hideShortBlocksInGrid(){
    const titles = document.querySelectorAll('.fc-event-title, .fc-event-title-container, .fc-event-title.fc-sticky, .fc-list-event-title');
    titles.forEach(t => {
      const txt = (t.textContent || '').trim();
      if (txt && txt.length <= 3){
        const ev = t.closest('.fc-event') || t.closest('tr') || t.closest('a');
        if (ev) ev.style.display = 'none';
      }
    });
  }

  function trySilentSync(){
    try{
      const s = getSettingsSafe();
      const enabled = !!(s.gcalEnabled || s.useGcal || s.gcal || s.googleCalendarEnabled) ||
        (document.getElementById('s-gcal') && document.getElementById('s-gcal').checked);
      if (!enabled) return;
      if (typeof window.gcalFetchEvents === 'function'){
        window.gcalFetchEvents({silent:true});
      }
    }catch(e){}
  }

  document.addEventListener('visibilitychange', function(){
    if (!document.hidden) setTimeout(trySilentSync, 600);
  });
  window.addEventListener('focus', function(){
    setTimeout(trySilentSync, 600);
  });

  document.addEventListener('DOMContentLoaded', function(){
    renderGcalOrderUI();
    hideShortBlocksInGrid();
    const obs = new MutationObserver(() => { hideShortBlocksInGrid(); });
    obs.observe(document.body, {childList:true, subtree:true});
  });

  const _openSettings = window.openSettings;
  if (typeof _openSettings === 'function'){
    window.openSettings = function(){
      const r = _openSettings.apply(this, arguments);
      setTimeout(renderGcalOrderUI, 250);
      return r;
    };
  }
})();
</script>


<script>
/* ===== V16 - FIX POPUP OAUTH/API + ORDRE AGENDAS VISIBLE =====
   1) Supprime l'alerte "Connectez-vous via OAuth2..." lors d'un simple refresh / auto-sync.
      -> On considère une synchro "user initiated" uniquement quand l'utilisateur clique sur le bouton Synchroniser.
   2) Le réglage d'ordre s'affiche dès qu'au moins 1 agenda est coché (via DOM), même si gcalSel n'est pas encore persisté.
*/

(function(){
  // ----- 1) Anti-popup: détecter action utilisateur -----
  window.__gcalUserInitiated = false;

  document.addEventListener('click', function(e){
    const t = e.target && (e.target.closest ? e.target.closest('button') : e.target);
    if (!t) return;
    // Bouton Google sync (texte ou icône sync)
    const txt = (t.textContent || '').toLowerCase();
    const onclick = (t.getAttribute && t.getAttribute('onclick')) ? t.getAttribute('onclick') : '';
    if (txt.includes('synchroniser') || onclick.includes('gcalFetchEvents')){
      window.__gcalUserInitiated = true;
      setTimeout(()=>{ window.__gcalUserInitiated = false; }, 1200);
    }
  }, true);

  // Wrapper gcalFetchEvents: par défaut silencieux sauf si user initiated
  const _gcalFetch = window.gcalFetchEvents;
  if (typeof _gcalFetch === 'function' && !_gcalFetch.__v16Wrapped){
    const wrapped = function(opts){
      const user = !!window.__gcalUserInitiated;
      // Si appelé sans opts, on met silent=true quand ce n'est pas l'utilisateur
      if (!opts || typeof opts !== 'object'){
        opts = user ? {silent:false} : {silent:true};
      } else if (opts.silent === undefined){
        opts.silent = !user;
      }
      return _gcalFetch.call(this, opts);
    };
    wrapped.__v16Wrapped = true;
    window.gcalFetchEvents = wrapped;
  }

  // ----- 2) Ordre agendas: utiliser DOM checked si settings pas encore persistés -----
  function getSettingsSafe(){
    try{ if (typeof getSettings === 'function') return getSettings() || {}; }catch(e){}
    try{ if (typeof STORAGE_KEY !== 'undefined') return JSON.parse(localStorage.getItem(STORAGE_KEY) || '{}') || {}; }catch(e){}
    return {};
  }
  function saveSettingsSafe(s){
    try{ if (typeof STORAGE_KEY !== 'undefined') localStorage.setItem(STORAGE_KEY, JSON.stringify(s)); }catch(e){}
  }

  function readCheckedCalIdsFromDOM(){
    const wrap = document.getElementById('gcal-list');
    if (!wrap) return [];
    const ids = [];
    wrap.querySelectorAll('input[type="checkbox"]:checked').forEach(cb=>{
      if (cb.value) ids.push(cb.value);
      else if (cb.dataset && cb.dataset.id) ids.push(cb.dataset.id);
    });
    // Certaines versions mettent l'id dans l'attribut name
    if (!ids.length){
      wrap.querySelectorAll('input[type="checkbox"]:checked').forEach(cb=>{
        if (cb.name) ids.push(cb.name);
      });
    }
    // unique
    return Array.from(new Set(ids));
  }

  function getCalNameById(id, s){
    const cals = (s && Array.isArray(s.gcalCals)) ? s.gcalCals : (window._gcalCalsData || []);
    const found = (cals||[]).find(c => c && c.id === id);
    return found ? found.name : id;
  }

  function renderGcalOrderUI(){
    const wrap = document.getElementById('gcal-order-wrap');
    const list = document.getElementById('gcal-order-list');
    if (!wrap || !list) return;

    const s = getSettingsSafe();
    const enabled = !!(s.gcalEnabled || s.useGcal || s.gcal || s.googleCalendarEnabled) ||
      (document.getElementById('s-gcal') && document.getElementById('s-gcal').checked);

    if (!enabled){ wrap.style.display='none'; return; }

    // sel: settings -> sinon DOM checked
    let sel = Array.isArray(s.gcalSel) ? s.gcalSel.slice() : [];
    if (!sel.length) sel = readCheckedCalIdsFromDOM();
    if (!sel.length){ wrap.style.display='none'; return; }

    wrap.style.display='block';

    const order = Array.isArray(s.gcalSelOrder) ? s.gcalSelOrder.slice() : [];
    const setOrder = new Set(order);
    const merged = order.filter(id => sel.includes(id)).concat(sel.filter(id => !setOrder.has(id)));

    list.innerHTML = '';
    merged.forEach((id) => {
      const li = document.createElement('li');
      li.className = 'order-item';
      li.draggable = true;
      li.dataset.id = id;
      li.innerHTML = `
        <i class="fas fa-grip-lines order-grip"></i>
        <div class="order-icon" style="background:#3498db;"><i class="fas fa-calendar-alt"></i></div>
        <div class="order-label">${getCalNameById(id, s)}</div>
      `;

      li.addEventListener('dragstart', () => { li.classList.add('dragging'); });
      li.addEventListener('dragend', () => {
        li.classList.remove('dragging');
        persistOrder();
        try{ if (typeof pushGcalToModules === 'function') pushGcalToModules(); }catch(e){}
      });
      li.addEventListener('dragover', (e) => {
        e.preventDefault();
        const dragging = list.querySelector('.dragging');
        if (!dragging || dragging === li) return;
        const rect = li.getBoundingClientRect();
        const after = (e.clientY - rect.top) > rect.height/2;
        list.insertBefore(dragging, after ? li.nextSibling : li);
      });

      list.appendChild(li);
    });

    function persistOrder(){
      const ids = Array.from(list.querySelectorAll('.order-item')).map(li => li.dataset.id).filter(Boolean);
      const s2 = getSettingsSafe();
      s2.gcalSelOrder = ids;
      // aussi gcalSel pour compat
      const checked = readCheckedCalIdsFromDOM();
      if (checked.length){
        const set = new Set(ids);
        s2.gcalSel = ids.filter(id => checked.includes(id)).concat(checked.filter(id => !set.has(id)));
      }
      saveSettingsSafe(s2);
    }
  }

  // Rafraîchir l'UI quand:
  // - on ouvre les paramètres
  // - on coche/décoche un agenda
  const _openSettings = window.openSettings;
  if (typeof _openSettings === 'function'){
    window.openSettings = function(){
      const r = _openSettings.apply(this, arguments);
      setTimeout(renderGcalOrderUI, 350);
      return r;
    };
  }
  document.addEventListener('change', function(e){
    if (!e || !e.target) return;
    // changement sur checkbox agenda
    if (e.target.closest && e.target.closest('#gcal-list')){
      setTimeout(renderGcalOrderUI, 80);
    }
    if (e.target.id === 's-gcal'){
      setTimeout(renderGcalOrderUI, 250);
    }
  }, true);

  document.addEventListener('DOMContentLoaded', function(){
    setTimeout(renderGcalOrderUI, 600);
  });

})();
</script>


<script>
/* ===== V17 - Hook renderGcalList pour afficher l'ordre ===== */
(function(){
  function _callOrderUI(){
    try{ if (typeof renderGcalOrderUI === 'function') renderGcalOrderUI(); }catch(e){}
  }
  const _render = window.renderGcalList;
  if (typeof _render === 'function' && !_render.__v17Wrapped){
    const wrapped = function(){
      const r = _render.apply(this, arguments);
      setTimeout(_callOrderUI, 60);
      setTimeout(_callOrderUI, 250);
      return r;
    };
    wrapped.__v17Wrapped = true;
    window.renderGcalList = wrapped;
  } else {
    document.addEventListener('DOMContentLoaded', function(){
      setTimeout(_callOrderUI, 600);
    });
  }
})();
</script>


<script>
/* ===== V18 - Edition d'événements par clic dans le module Calendrier (Google) =====
   - Nécessite OAuth2 scope: calendar.events (déjà mis à jour dans V18)
   - Fonctionne si un FullCalendar est présent dans l'iframe PERDIR.
   - Au clic, propose modifier Titre + heures, puis PATCH Google via piloter-gcal-update.
*/
(function(){
  function _formatHHMM(d){
    if(!d) return '';
    const hh = String(d.getHours()).padStart(2,'0');
    const mm = String(d.getMinutes()).padStart(2,'0');
    return hh+':'+mm;
  }
  function _formatYYYYMMDD(d){
    if(!d) return '';
    const y = d.getFullYear();
    const m = String(d.getMonth()+1).padStart(2,'0');
    const da = String(d.getDate()).padStart(2,'0');
    return y+'-'+m+'-'+da;
  }

  function injectIntoPerdir(){
    const fr = document.getElementById('frame-perdir');
    if(!fr || !fr.contentWindow) return;

    let w;
    try{ w = fr.contentWindow; }catch(e){ return; }
    if (w.__cadirCalEditInjected) return;

    function findCalendarInstance(){
      const candidates = [
        w.calendar, w.cal, w.fcCalendar, w._calendar, w.__calendar, w.__fc, w.fullCalendar, w.perdirCalendar
      ].filter(Boolean);

      function isFc(obj){
        return obj && typeof obj.setOption === 'function' && typeof obj.getEvents === 'function';
      }
      for (const c of candidates){
        if (isFc(c)) return c;
      }
      // heuristic scan: try common property names
      try{
        const keys = Object.keys(w);
        for (let i=0;i<keys.length;i++){
          const k = keys[i];
          const v = w[k];
          if (isFc(v)) return v;
        }
      }catch(e){}
      return null;
    }

    function attach(){
      const cal = findCalendarInstance();
      if(!cal) return false;

      // Keep existing handler if present
      let prev = null;
      try{ prev = cal.getOption ? cal.getOption('eventClick') : null; }catch(e){ prev = null; }

      cal.setOption('eventClick', function(info){
        try{
          if (prev) { try{ prev(info); }catch(e){} }
          const ev = info && info.event;
          if(!ev) return;

          // only Google events that have an id
          const eventId = ev.id || (ev.extendedProps && ev.extendedProps.id);
          const calId = (ev.extendedProps && (ev.extendedProps.calId || ev.extendedProps.calendarId)) || null;

          if (!eventId) return;

          // Build default values
          const curTitle = ev.title || '';
          const start = ev.start;
          const end = ev.end;
          const date = start ? _formatYYYYMMDD(start) : '';
          const time = start ? _formatHHMM(start) : '';
          const endTime = end ? _formatHHMM(end) : '';

          // UI simple (prompt) — rapide et robuste
          const newTitle = prompt('Modifier le titre :', curTitle);
          if (newTitle === null) return;

          const newTime = prompt('Heure début (HH:MM) — laissez vide pour "journée entière" :', time);
          if (newTime === null) return;

          let newEndTime = '';
          if (newTime && newTime.trim()){
            newEndTime = prompt('Heure fin (HH:MM) :', endTime || newTime);
            if (newEndTime === null) return;
          }

          // Send to parent for PATCH
          window.postMessage({
            type: 'pilote-gcal-update',
            eventId: eventId,
            calId: calId,
            title: (newTitle || '').trim() || '(sans titre)',
            date: date,
            time: (newTime || '').trim(),
            endTime: (newEndTime || '').trim()
          }, '*');
        }catch(e){}
      });

      w.__cadirCalEditInjected = true;
      return true;
    }

    // try now, then retry a bit (calendar may init after load)
    if (attach()) return;
    let tries = 0;
    const t = setInterval(()=>{
      tries++;
      if (attach() || tries>20) clearInterval(t);
    }, 400);
  }

  // Inject on PERDIR load + when module becomes active
  document.getElementById('frame-perdir')?.addEventListener('load', function(){
    setTimeout(injectIntoPerdir, 600);
  });

  // Also attempt when switching to PERDIR
  const _loadModule = window.loadModule;
  if (typeof _loadModule === 'function'){
    window.loadModule = function(name){
      const r = _loadModule.apply(this, arguments);
      if (name === 'perdir') setTimeout(injectIntoPerdir, 800);
      return r;
    };
  }
})();
</script>


<script>
/* ===== V19 - RENDRE LES EVENEMENTS CLIQUABLES (FullCalendar) =====
   Symptôme: pas la main / clic impossible sur les événements.
   Cause la plus fréquente: CSS "pointer-events:none" sur les événements ou un overlay au-dessus.
   Fix: injecter CSS dans l'iframe PERDIR + rehausser z-index + fallback click listener.
*/
(function(){
  function injectClickFixIntoPerdir(){
    const fr = document.getElementById('frame-perdir');
    if(!fr) return;
    let doc, win;
    try{ win = fr.contentWindow; doc = win.document; }catch(e){ return; }
    if(!doc || doc.__cadirClickFixInjected) return;

    // 1) CSS: forcer pointer-events sur les events FullCalendar
    const st = doc.createElement('style');
    st.textContent = `
      /* CADIR V19: FullCalendar events clickable */
      .fc .fc-event, .fc .fc-event a, .fc .fc-event-main, .fc .fc-event-main-frame, .fc .fc-event-title,
      .fc .fc-event-time, .fc .fc-list-event, .fc .fc-list-event-title, .fc .fc-list-event-time {
        pointer-events: auto !important;
        cursor: pointer !important;
      }
      /* Eviter qu'un conteneur coupe les clics */
      .fc .fc-daygrid-event-harness, .fc .fc-timegrid-event-harness {
        pointer-events: auto !important;
      }
      /* Mettre les events au-dessus de certains overlays */
      .fc .fc-timegrid-event, .fc .fc-daygrid-event {
        z-index: 5 !important;
      }
      /* Si un overlay transparent existe, on évite qu'il capte les clics */
      .fc .fc-scrollgrid-section, .fc .fc-scrollgrid, .fc .fc-scrollgrid-liquid {
        pointer-events: auto !important;
      }
    `;
    doc.head.appendChild(st);

    // 2) Fallback: si FullCalendar n'accroche pas eventClick, on capte le clic sur .fc-event
    doc.addEventListener('click', function(ev){
      const el = ev.target && ev.target.closest ? ev.target.closest('.fc-event') : null;
      if(!el) return;
      // Laisser FullCalendar gérer si possible (ne pas empêcher)
      // Mais si rien ne se passe, on pourra au moins remonter l'info visuelle
    }, true);

    doc.__cadirClickFixInjected = true;
  }

  // inject on load and on module switch to perdir
  document.getElementById('frame-perdir')?.addEventListener('load', function(){
    setTimeout(injectClickFixIntoPerdir, 600);
    setTimeout(injectClickFixIntoPerdir, 1400);
  });

  const _loadModule = window.loadModule;
  if (typeof _loadModule === 'function'){
    window.loadModule = function(name){
      const r = _loadModule.apply(this, arguments);
      if (name === 'perdir') {
        setTimeout(injectClickFixIntoPerdir, 700);
        setTimeout(injectClickFixIntoPerdir, 1600);
      }
      return r;
    };
  }

  document.addEventListener('DOMContentLoaded', function(){
    setTimeout(injectClickFixIntoPerdir, 1200);
  });
})();
</script>


<script>
/* ===== V20 - CLIC SUR LIGNE EVENEMENT (Calendrier "liste compacte") =====
   Votre module "Calendrier" n'est pas un FullCalendar cliquable : c'est une liste compacte par agenda.
   V20 ajoute :
   - Curseur "main" sur les lignes d'événements
   - Clic -> ouvre une petite édition (prompt) et met à jour Google (PATCH) si OAuth2 est connecté
   Fonctionnement :
   - Dans l'iframe PERDIR, on détecte la ligne cliquée et on envoie son texte au parent
   - Le parent retrouve l'événement dans s.gcalEvents via date+heure+début de titre
*/

(function(){
  // ---------- Parent side: handle line-click from iframe ----------
  function pad2(n){ return String(n).padStart(2,'0'); }
  function normIsoFromDDMM(dd, mm){
    const y = new Date().getFullYear();
    return `${y}-${pad2(mm)}-${pad2(dd)}`;
  }
  function parseLineText(txt){
    // Ex: "lun 02/03 • 17:00  Conseil de classe TMERCA2"
    // or "jeu 26/02 • 15:45 hygzer zr zer 1234"
    const t = (txt||'').replace(/\s+/g,' ').trim();
    const m = t.match(/(\d{1,2})\/(\d{1,2})\s*[•\-]\s*(\d{1,2}:\d{2})\s*(.*)$/);
    if (!m) return null;
    const dd = parseInt(m[1],10);
    const mm = parseInt(m[2],10);
    const time = pad2(m[3].split(':')[0]) + ":" + m[3].split(':')[1];
    const title = (m[4]||'').trim();
    return { dateIso: normIsoFromDDMM(dd, mm), time, title };
  }
  function getSettingsSafe(){
    try{ if (typeof getSettings === 'function') return getSettings() || {}; }catch(e){}
    try{ if (typeof STORAGE_KEY !== 'undefined') return JSON.parse(localStorage.getItem(STORAGE_KEY) || '{}') || {}; }catch(e){}
    return {};
  }
  function findEventMatch(parsed){
    const s = getSettingsSafe();
    const events = []
      .concat(Array.isArray(s.gcalEvents) ? s.gcalEvents : [])
      .concat(Array.isArray(s.outlookEvents) ? s.outlookEvents : []);

    // match strict: date + time + title startsWith (case-insensitive)
    const titleKey = (parsed.title||'').toLowerCase();
    let best = null;
    for (const ev of events){
      if (!ev) continue;
      if (ev.date !== parsed.dateIso) continue;
      const evTime = (ev.time||'').trim() || '00:00';
      if (parsed.time && evTime !== parsed.time) continue;
      const evTitle = (ev.title||'').trim();
      if (!evTitle) continue;
      const evKey = evTitle.toLowerCase();
      if (titleKey && (evKey.startsWith(titleKey) || titleKey.startsWith(evKey) || evKey.includes(titleKey))) {
        best = ev;
        break;
      }
    }
    // fallback: date+time only
    if (!best){
      best = events.find(ev => ev && ev.date === parsed.dateIso && ((ev.time||'').trim()||'00:00') === parsed.time) || null;
    }
    return best;
  }

  window.addEventListener('message', function(e){
    if (!e || !e.data || e.data.type !== 'pilote-cal-line-click') return;
    const parsed = parseLineText(e.data.text || '');
    if (!parsed) return;

    const ev = findEventMatch(parsed);
    if (!ev) {
      alert("Événement non retrouvé dans la synchro.\n\nPensez à cliquer sur « Synchroniser les événements » dans Paramétrages → Agendas externes.");
      return;
    }

    // Edition simple
    const curTitle = ev.title || '';
    const newTitle = prompt('Modifier le titre :', curTitle);
    if (newTitle === null) return;

    const newTime = prompt('Heure début (HH:MM) — laissez vide pour journée entière :', (ev.time||'').trim());
    if (newTime === null) return;

    let newEndTime = '';
    if ((newTime||'').trim()){
      newEndTime = prompt('Heure fin (HH:MM) :', (ev.endTime||'').trim() || (newTime||'').trim());
      if (newEndTime === null) return;
    }

    // Google update only if OAuth2 token exists; otherwise explain
    if (!window._gcalAccessToken){
      alert("Modification impossible : Google Agenda n'est pas connecté (OAuth2).\n\nConnectez-vous dans Paramétrages → Agendas externes → Connexion OAuth2.");
      return;
    }

    // PATCH via fonction existante si présente
    if (typeof window.gcalUpdateEvent === 'function'){
      window.gcalUpdateEvent({
        eventId: ev.id,
        calId: ev.calId,
        title: (newTitle||'').trim() || '(sans titre)',
        date: ev.date,
        time: (newTime||'').trim(),
        endTime: (newEndTime||'').trim()
      });
    } else {
      // fallback message protocol (si la fonction n'existe pas dans votre build)
      window.postMessage({
        type:'pilote-gcal-update',
        eventId: ev.id,
        calId: ev.calId,
        title:(newTitle||'').trim() || '(sans titre)',
        date: ev.date,
        time:(newTime||'').trim(),
        endTime:(newEndTime||'').trim()
      }, '*');
    }
  });

  // ---------- Iframe side: make rows clickable + send line text ----------
  function injectIntoPerdir(){
    const fr = document.getElementById('frame-perdir');
    if(!fr) return;
    let doc, win;
    try{ win = fr.contentWindow; doc = win.document; }catch(e){ return; }
    if(!doc || doc.__cadirListClickInjected) return;

    const st = doc.createElement('style');
    st.textContent = `
      /* CADIR V20: rendre les lignes d'événements cliquables (liste compacte) */
      .cal-list .cal-row, .calendar-list .row, .cal-item, .cal-line, .evt-row, .evt-line { cursor: pointer !important; }
      /* fallback: toute ligne contenant "• HH:MM" */
      .__cadir_clickable_event__ { cursor: pointer !important; }
    `;
    doc.head.appendChild(st);

    function markClickable(){
      // heuristique: trouver des blocs qui contiennent "• 12:34"
      const nodes = Array.from(doc.querySelectorAll('div, li, p, span')).filter(n => {
        if (!n || !n.textContent) return false;
        const t = n.textContent.trim();
        return /\d{1,2}\/\d{1,2}\s*[•\-]\s*\d{1,2}:\d{2}/.test(t) && t.length < 220;
      });
      nodes.forEach(n => {
        // monter à un parent "ligne" raisonnable
        let el = n;
        for (let i=0;i<3;i++){
          if (!el.parentElement) break;
          if (el.parentElement.children.length > 1 && el.textContent.trim().length < 220) break;
          el = el.parentElement;
        }
        el.classList.add('__cadir_clickable_event__');
      });
    }

    doc.addEventListener('click', function(ev){
      const el = ev.target && ev.target.closest ? ev.target.closest('.__cadir_clickable_event__') : null;
      if (!el) return;
      const text = (el.textContent || '').replace(/\s+/g,' ').trim();
      if (!/\d{1,2}\/\d{1,2}\s*[•\-]\s*\d{1,2}:\d{2}/.test(text)) return;
      // send to parent
      try{
        window.postMessage({ type:'pilote-cal-line-click', text:text }, '*');
      }catch(e){}
    }, true);

    // watch DOM for calendar rendering
    const obs = new MutationObserver(()=>{ markClickable(); });
    obs.observe(doc.body, {childList:true, subtree:true});
    setTimeout(markClickable, 600);
    setTimeout(markClickable, 1400);

    doc.__cadirListClickInjected = true;
  }

  document.getElementById('frame-perdir')?.addEventListener('load', function(){
    setTimeout(injectIntoPerdir, 600);
    setTimeout(injectIntoPerdir, 1400);
  });

  const _loadModule = window.loadModule;
  if (typeof _loadModule === 'function'){
    window.loadModule = function(name){
      const r = _loadModule.apply(this, arguments);
      if (name === 'perdir') {
        setTimeout(injectIntoPerdir, 700);
        setTimeout(injectIntoPerdir, 1600);
      }
      return r;
    };
  }

  document.addEventListener('DOMContentLoaded', function(){
    setTimeout(injectIntoPerdir, 1200);
  });
})();
</script>


<!-- ===== V21 - Modal Edition Evénement ===== -->
<div id="evtEditBackdrop" role="dialog" aria-modal="true" aria-hidden="true">
  <div id="evtEditModal">
    <div class="hdr">
      <div class="t">Modifier l’événement</div>
      <button id="evtEditCloseBtn" aria-label="Fermer">✕</button>
    </div>
    <div class="body">
      <div class="meta" id="evtEditMeta"></div>

      <label for="evtEditTitle">Titre</label>
      <input id="evtEditTitle" type="text" placeholder="Titre de l’événement" />

      <div class="row">
        <div>
          <label for="evtEditStart">Début (HH:MM)</label>
          <input id="evtEditStart" type="text" inputmode="numeric" placeholder="08:30" />
        </div>
        <div>
          <label for="evtEditEnd">Fin (HH:MM)</label>
          <input id="evtEditEnd" type="text" inputmode="numeric" placeholder="09:15" />
        </div>
      </div>

      <div class="warn" id="evtEditWarn"></div>
    </div>
    <div class="ftr">
      <button class="btn secondary" id="evtEditCancelBtn">Annuler</button>
      <button class="btn primary" id="evtEditSaveBtn">Enregistrer</button>
    </div>
  </div>
</div>


<script>
/* ===== V21 - Edition via MODAL (une seule popup) ===== */
(function(){
  const $ = (id)=>document.getElementById(id);
  const backdrop = $('evtEditBackdrop');
  const meta = $('evtEditMeta');
  const titleI = $('evtEditTitle');
  const startI = $('evtEditStart');
  const endI = $('evtEditEnd');
  const warn = $('evtEditWarn');
  const btnSave = $('evtEditSaveBtn');
  const btnCancel = $('evtEditCancelBtn');
  const btnClose = $('evtEditCloseBtn');

  // contexte de l'événement en cours
  let ctx = null;

  function showWarn(msg){
    if (!warn) return;
    warn.textContent = msg || '';
    warn.style.display = msg ? 'block' : 'none';
  }

  function openModal(){
    if (!backdrop) return;
    backdrop.style.display = 'flex';
    backdrop.setAttribute('aria-hidden','false');
    setTimeout(()=>{ try{ titleI && titleI.focus(); }catch(e){} }, 20);
  }

  function closeModal(){
    if (!backdrop) return;
    backdrop.style.display = 'none';
    backdrop.setAttribute('aria-hidden','true');
    showWarn('');
    ctx = null;
  }

  function normTime(v){
    v = (v||'').trim();
    if (!v) return '';
    const m = v.match(/^(\d{1,2}):(\d{2})$/);
    if (!m) return null;
    const hh = String(parseInt(m[1],10)).padStart(2,'0');
    const mm = m[2];
    if (parseInt(hh,10) > 23 || parseInt(mm,10) > 59) return null;
    return hh+":"+mm;
  }

  function canEditGoogle(){
    return !!window._gcalAccessToken;
  }

  function setSaveEnabled(on){
    if (!btnSave) return;
    btnSave.disabled = !on;
  }

  function populateModal(context){
    ctx = context;
    const calName = ctx.calName ? ` — ${ctx.calName}` : '';
    meta.textContent = `Date : ${ctx.date}${calName}`;

    titleI.value = ctx.title || '';
    startI.value = ctx.time || '';
    endI.value = ctx.endTime || '';

    if (!canEditGoogle()){
      showWarn("Google Agenda n’est pas connecté (OAuth2). Connectez-vous dans Paramétrages → Agendas externes pour pouvoir modifier.");
      setSaveEnabled(false);
    }else{
      showWarn("");
      setSaveEnabled(true);
    }
  }

  function save(){
    if (!ctx) return;

    const newTitle = (titleI.value||'').trim() || '(sans titre)';
    const t1 = normTime(startI.value);
    const t2 = normTime(endI.value);

    if (t1 === null){
      showWarn("Heure de début invalide. Format attendu : HH:MM");
      return;
    }
    if (t2 === null){
      showWarn("Heure de fin invalide. Format attendu : HH:MM");
      return;
    }
    if (t1 && t2 && t2 < t1){
      showWarn("Heure de fin avant l'heure de début.");
      return;
    }

    if (!canEditGoogle()){
      showWarn("Impossible d’enregistrer : OAuth2 non connecté.");
      return;
    }

    // Appel update existant si disponible
    const payload = {
      eventId: ctx.id,
      calId: ctx.calId,
      title: newTitle,
      date: ctx.date,
      time: t1 || '',
      endTime: t2 || ''
    };

    try{
      if (typeof window.gcalUpdateEvent === 'function'){
        window.gcalUpdateEvent(payload);
      }else{
        window.postMessage(Object.assign({type:'pilote-gcal-update'}, payload), '*');
      }
      closeModal();
    }catch(e){
      showWarn("Erreur lors de l’enregistrement.");
    }
  }

  // UI events
  btnCancel && btnCancel.addEventListener('click', closeModal);
  btnClose && btnClose.addEventListener('click', closeModal);
  backdrop && backdrop.addEventListener('click', (e)=>{ if (e.target === backdrop) closeModal(); });
  document.addEventListener('keydown', (e)=>{ if (e.key === 'Escape') closeModal(); });

  btnSave && btnSave.addEventListener('click', save);

  // Override listener: on reçoit un clic ligne (V20) -> on retrouve l'événement puis modal
  function getSettingsSafe(){
    try{ if (typeof getSettings === 'function') return getSettings() || {}; }catch(e){}
    try{ if (typeof STORAGE_KEY !== 'undefined') return JSON.parse(localStorage.getItem(STORAGE_KEY) || '{}') || {}; }catch(e){}
    return {};
  }
  function pad2(n){ return String(n).padStart(2,'0'); }
  function normIsoFromDDMM(dd, mm){
    const y = new Date().getFullYear();
    return `${y}-${pad2(mm)}-${pad2(dd)}`;
  }
  function parseLineText(txt){
    const t = (txt||'').replace(/\s+/g,' ').trim();
    const m = t.match(/(\d{1,2})\/(\d{1,2})\s*[•\-]\s*(\d{1,2}:\d{2})\s*(.*)$/);
    if (!m) return null;
    const dd = parseInt(m[1],10);
    const mm = parseInt(m[2],10);
    const time = pad2(m[3].split(':')[0]) + ":" + m[3].split(':')[1];
    const title = (m[4]||'').trim();
    return { dateIso: normIsoFromDDMM(dd, mm), time, title };
  }
  function findEventMatch(parsed){
    const s = getSettingsSafe();
    const events = []
      .concat(Array.isArray(s.gcalEvents) ? s.gcalEvents : [])
      .concat(Array.isArray(s.outlookEvents) ? s.outlookEvents : []);

    const titleKey = (parsed.title||'').toLowerCase();
    for (const ev of events){
      if (!ev || !ev.date) continue;
      if (ev.date !== parsed.dateIso) continue;
      const evTime = (ev.time||'').trim() || '00:00';
      if (parsed.time && evTime !== parsed.time) continue;
      const evTitle = (ev.title||'').trim();
      if (!evTitle) continue;
      const evKey = evTitle.toLowerCase();
      if (!titleKey || evKey.startsWith(titleKey) || titleKey.startsWith(evKey) || evKey.includes(titleKey)) return ev;
    }
    return events.find(ev => ev && ev.date === parsed.dateIso && ((ev.time||'').trim()||'00:00') === parsed.time) || null;
  }

  window.addEventListener('message', function(e){
    if (!e || !e.data) return;
    if (e.data.type !== 'pilote-cal-line-click') return;

    const parsed = parseLineText(e.data.text || '');
    if (!parsed) return;

    const ev = findEventMatch(parsed);
    if (!ev) {
      showWarn("");
      alert("Événement non retrouvé dans la synchro.\n\nCliquez sur « Synchroniser les événements » dans Paramétrages → Agendas externes.");
      return;
    }

    populateModal({
      id: ev.id,
      calId: ev.calId,
      calName: ev.calName,
      title: ev.title,
      date: ev.date,
      time: (ev.time||'').trim(),
      endTime: (ev.endTime||'').trim()
    });
    openModal();
  });
})();
</script>


<script>
/* ===== V22 - BLOQUER LES ANCIENS PROMPTS =====
   Problème: un ancien listener "message" ouvre encore un prompt (titre) avant la modal.
   Fix: intercepter en CAPTURE les messages 'pilote-cal-line-click' et stopper la propagation.
*/
(function(){
  window.addEventListener('message', function(e){
    try{
      if (e && e.data && e.data.type === 'pilote-cal-line-click'){
        // Empêche les autres listeners (anciens) de se déclencher
        if (typeof e.stopImmediatePropagation === 'function') e.stopImmediatePropagation();
        if (typeof e.stopPropagation === 'function') e.stopPropagation();
      }
    }catch(err){}
  }, true); // capture
})();
</script>


<script>
/* ===== V23 - DESACTIVER DEFINITIVEMENT LES PROMPTS ANCIENS =====
   Le prompt "Modifier le titre" vient d'un ancien code (V18/V20) encore présent.
   Fix robuste: on override window.prompt (parent + iframe PERDIR) uniquement pour ces invites,
   en retournant null (équivalent Annuler) => aucun prompt ne s'affiche.
   La nouvelle MODAL (V21) reste active.
*/
(function(){
  const BLOCK_PATTERNS = [
    'modifier le titre',
    'heure début',
    'heure debut',
    'heure fin'
  ];

  function shouldBlock(msg){
    const m = String(msg||'').toLowerCase();
    return BLOCK_PATTERNS.some(p => m.includes(p));
  }

  // parent prompt override
  (function(){
    const _prompt = window.prompt;
    if (!_prompt || _prompt.__v23Wrapped) return;
    const wrapped = function(msg, defVal){
      if (shouldBlock(msg)) return null;
      return _prompt.call(window, msg, defVal);
    };
    wrapped.__v23Wrapped = true;
    window.prompt = wrapped;
  })();

  // iframe prompt override
  function patchIframePrompt(){
    const fr = document.getElementById('frame-perdir');
    if(!fr) return;
    let w;
    try{ w = fr.contentWindow; }catch(e){ return; }
    if(!w || !w.prompt) return;
    if (w.prompt.__v23Wrapped) return;

    const _p = w.prompt;
    const wrapped = function(msg, defVal){
      if (shouldBlock(msg)) return null;
      return _p.call(w, msg, defVal);
    };
    wrapped.__v23Wrapped = true;
    w.prompt = wrapped;
  }

  document.getElementById('frame-perdir')?.addEventListener('load', function(){
    setTimeout(patchIframePrompt, 250);
    setTimeout(patchIframePrompt, 900);
  });

  document.addEventListener('DOMContentLoaded', function(){
    setTimeout(patchIframePrompt, 900);
  });

  const _loadModule = window.loadModule;
  if (typeof _loadModule === 'function'){
    window.loadModule = function(name){
      const r = _loadModule.apply(this, arguments);
      if (name === 'perdir') setTimeout(patchIframePrompt, 700);
      return r;
    };
  }
})();
</script>


<script>
/* ===== V35 - Synchro totale vers pilote_data.json (miroir localStorage des iframes) =====
Objectif: TOUTES les données saisies (dans les modules/iframes) doivent finir dans pilote_data.json.
Problème en ligne: parfois l'accès direct à frame.contentWindow.localStorage est instable (blob/sandbox/timing).
Solution:
1) Bridge injecté dans chaque iframe (PERDIR/EXAM/ORAL/AED/BIBASE) :
   - wrap localStorage.setItem/removeItem/clear -> postMessage au parent
   - handler "pilote-ls-apply" pour restaurer après import
   - dump initial "pilote-ls-dump"
2) Parent:
   - stocke un miroir persistant dans SON localStorage: __mirror__<fid>__<key>
   - collectAllModulesData inclut le miroir (même si accès direct échoue)
   - distributeToModules restaure via message (même si accès direct échoue)
3) Déclenche une sauvegarde auto (local folder) quand une iframe change.
*/
(function(){
  const FRAMES = ['frame-perdir', 'frame-exam', 'frame-oral', 'frame-aed', 'frame-bibase'];
  const MIRROR_PREFIX = '__mirror__';

  function mirrorKey(fid, k){ return MIRROR_PREFIX + fid + '__' + k; }
  function isMirrorKey(k){ return typeof k === 'string' && k.startsWith(MIRROR_PREFIX); }

  // --- Parent: listen to iframe storage events and keep mirror ---
  window.addEventListener('message', function(e){
    const d = e && e.data;
    if (!d || !d.type) return;
    if (!d.fid || FRAMES.indexOf(d.fid) === -1) return;

    if (d.type === 'pilote-ls-set'){
      try{ localStorage.setItem(mirrorKey(d.fid, d.key), String(d.value)); }catch(err){}
      // trigger autosave if local folder is enabled
      try{ if (typeof lfMarkDirty === 'function') lfMarkDirty(); }catch(err){}
      return;
    }
    if (d.type === 'pilote-ls-remove'){
      try{ localStorage.removeItem(mirrorKey(d.fid, d.key)); }catch(err){}
      try{ if (typeof lfMarkDirty === 'function') lfMarkDirty(); }catch(err){}
      return;
    }
    if (d.type === 'pilote-ls-clear'){
      try{
        const toDel = [];
        for (let i=0;i<localStorage.length;i++){
          const k = localStorage.key(i);
          if (k && k.startsWith(MIRROR_PREFIX + d.fid + '__')) toDel.push(k);
        }
        toDel.forEach(k=>localStorage.removeItem(k));
      }catch(err){}
      try{ if (typeof lfMarkDirty === 'function') lfMarkDirty(); }catch(err){}
      return;
    }
    if (d.type === 'pilote-ls-dump'){
      // payload: {fid, data:{k:v,...}}
      try{
        const data = d.data || {};
        Object.keys(data).forEach(k=>{
          localStorage.setItem(mirrorKey(d.fid, k), String(data[k]));
        });
      }catch(err){}
      return;
    }
  });

  // --- Inject bridge into iframe when accessible ---
  function injectBridge(fid){
    const fr = document.getElementById(fid);
    if (!fr) return;
    let doc, win;
    try{ win = fr.contentWindow; doc = fr.contentDocument; }catch(e){ return; }
    if (!doc || doc.__piloteBridgeInjected) return;

    const s = doc.createElement('script');
    s.textContent = `
      (function(){
        const FID = ${JSON.stringify(fid)};
        function safePost(msg){ try{ parent.postMessage(msg, '*'); }catch(e){} }

        // dump at start
        try{
          const dump = {};
          for (let i=0;i<localStorage.length;i++){
            const k = localStorage.key(i);
            dump[k] = localStorage.getItem(k);
          }
          safePost({type:'pilote-ls-dump', fid:FID, data: dump});
        }catch(e){}

        // wrap localStorage mutations
        try{
          const _set = localStorage.setItem.bind(localStorage);
          const _rem = localStorage.removeItem.bind(localStorage);
          const _clr = localStorage.clear.bind(localStorage);

          localStorage.setItem = function(k,v){
            _set(k,v);
            safePost({type:'pilote-ls-set', fid:FID, key:String(k), value:String(v)});
          };
          localStorage.removeItem = function(k){
            _rem(k);
            safePost({type:'pilote-ls-remove', fid:FID, key:String(k)});
          };
          localStorage.clear = function(){
            _clr();
            safePost({type:'pilote-ls-clear', fid:FID});
          };
        }catch(e){}

        // apply from parent (import)
        window.addEventListener('message', function(ev){
          const d = ev && ev.data;
          if (!d || d.type !== 'pilote-ls-apply' || d.fid !== FID) return;
          try{
            const items = d.items || {};
            // clear existing then apply
            localStorage.clear();
            Object.keys(items).forEach(k=>localStorage.setItem(k, items[k]));
            safePost({type:'pilote-ls-dump', fid:FID, data: items});
          }catch(e){}
        });
      })();
    `;
    doc.documentElement.appendChild(s);
    doc.__piloteBridgeInjected = true;
  }

  // Hook iframe load events (ensure bridge exists quickly)
  FRAMES.forEach(fid=>{
    const fr = document.getElementById(fid);
    if (!fr) return;
    fr.addEventListener('load', function(){
      setTimeout(()=>injectBridge(fid), 200);
      setTimeout(()=>injectBridge(fid), 900);
      setTimeout(()=>injectBridge(fid), 1800);
    });
  });

  // periodic ensure (handles iframe recreated in blob)
  setInterval(()=>{ FRAMES.forEach(injectBridge); }, 1200);
  document.addEventListener('DOMContentLoaded', ()=>setTimeout(()=>FRAMES.forEach(injectBridge), 900));

  // --- Patch collectAllModulesData to include mirror keys ---
  if (typeof window.collectAllModulesData === 'function' && !window.collectAllModulesData.__v35Wrapped){
    const _origCollect = window.collectAllModulesData;
    const wrapped = function(){
      const allData = _origCollect() || {};

      // add mirror of iframes (guarantees data presence)
      try{
        for (let i=0;i<localStorage.length;i++){
          const k = localStorage.key(i);
          if (isMirrorKey(k)){
            allData[k] = localStorage.getItem(k);
          }
        }
      }catch(e){}
      return allData;
    };
    wrapped.__v35Wrapped = true;
    window.collectAllModulesData = wrapped;
  }

  // --- Patch distributeToModules: if direct access fails, use postMessage apply ---
  if (typeof window.distributeToModules === 'function' && !window.distributeToModules.__v35Wrapped){
    const _origDist = window.distributeToModules;
    const wrappedDist = function(record){
      // call original first (works when accessible)
      try{ _origDist(record); }catch(e){}

      // build per-frame items from record (supports __frame__key and mirror keys)
      FRAMES.forEach(fid=>{
        const items = {};
        Object.keys(record||{}).forEach(k=>{
          const p1 = '__' + fid + '__';
          const p2 = MIRROR_PREFIX + fid + '__';
          if (k.startsWith(p1)){
            items[k.slice(p1.length)] = record[k];
          } else if (k.startsWith(p2)){
            items[k.slice(p2.length)] = record[k];
          }
        });

        // also store mirror locally
        try{
          Object.keys(items).forEach(k=>localStorage.setItem(mirrorKey(fid,k), String(items[k])));
        }catch(e){}

        // send to iframe to apply
        const fr = document.getElementById(fid);
        try{
          fr && fr.contentWindow && fr.contentWindow.postMessage({type:'pilote-ls-apply', fid: fid, items: items}, '*');
        }catch(e){}
      });
    };
    wrappedDist.__v35Wrapped = true;
    window.distributeToModules = wrappedDist;
  }

  // --- Ensure lfMarkDirty exists (if not) so bridge can trigger autosave pipeline ---
  if (typeof window.lfMarkDirty !== 'function'){
    window.lfMarkDirty = function(){
      try{
        window._lfDirty = true;
        if (typeof window.lfWriteToFolder === 'function'){
          // debounce existing mechanism
          if (window._lfDebTimer) clearTimeout(window._lfDebTimer);
          window._lfDebTimer = setTimeout(()=>{ try{ lfWriteToFolder(); }catch(e){} }, 800);
        }
      }catch(e){}
    };
  }

})();
</script>


<script>
/* ===== V39 - SYNCHRO TOTALE "UN SEUL FICHIER" (pilot_data.json) =====
Objectif utilisateur:
- Toutes les données saisies (y compris dans les modules/iframes) doivent être stockées dans UN fichier: pilote_data.json
- Ce fichier est écrit soit:
  (A) dans un dossier par défaut (si l'utilisateur a autorisé un dossier via File System Access API),
  (B) dans le dossier choisi par l'utilisateur,
  (C) sinon via téléchargement (fallback) -> on obtient quand même un seul fichier transportable.
Principe:
1) Bridge LocalStorage pour chaque iframe: on WRAP setItem/removeItem/clear + dump initial -> postMessage parent
   => le parent tient un "miroir" complet, donc export = complet.
2) Export: on collecte TOUT (settings + data modules + miroir) et on écrit pilote_data.json (autosave debounced).
3) Import: on lit pilote_data.json et on restaure parent + modules via postMessage (pilote-ls-apply).
*/
(function(){
  const FILE_NAME = 'pilote_data.json';
  const FRAMES = ['frame-perdir','frame-exam','frame-oral','frame-dhg','frame-aed','frame-bibase','frame-donnees'];
  const MIRROR_PREFIX = '__mirror__';
  const HANDLE_DB = 'cadir_fs_handles_v1';
  const HANDLE_KEY = 'syncFolderHandle';

  function mirrorKey(fid, k){ return MIRROR_PREFIX + fid + '__' + k; }
  function isMirrorKey(k){ return typeof k === 'string' && k.startsWith(MIRROR_PREFIX); }
  function nowIso(){ try{ return new Date().toISOString(); }catch(e){ return '';} }

  // -------------------- IndexedDB helper to store folder handle (persistent) --------------------
  function idbOpen(){
    return new Promise((resolve,reject)=>{
      const req = indexedDB.open(HANDLE_DB, 1);
      req.onupgradeneeded = ()=>{
        const db = req.result;
        if (!db.objectStoreNames.contains('kv')) db.createObjectStore('kv');
      };
      req.onsuccess = ()=>resolve(req.result);
      req.onerror = ()=>reject(req.error);
    });
  }
  async function idbSet(key, val){
    const db = await idbOpen();
    return new Promise((resolve,reject)=>{
      const tx = db.transaction('kv','readwrite');
      tx.objectStore('kv').put(val, key);
      tx.oncomplete = ()=>resolve(true);
      tx.onerror = ()=>reject(tx.error);
    });
  }
  async function idbGet(key){
    const db = await idbOpen();
    return new Promise((resolve,reject)=>{
      const tx = db.transaction('kv','readonly');
      const req = tx.objectStore('kv').get(key);
      req.onsuccess = ()=>resolve(req.result);
      req.onerror = ()=>reject(req.error);
    });
  }

  // -------------------- File System Access API: write/read --------------------
  async function getSavedFolderHandle(){
    try{ return await idbGet(HANDLE_KEY); }catch(e){ return null; }
  }
  async function setSavedFolderHandle(handle){
    try{ await idbSet(HANDLE_KEY, handle); }catch(e){}
  }

  async function ensurePermission(handle){
    if (!handle) return false;
    try{
      const opts = { mode: 'readwrite' };
      let p = await handle.queryPermission(opts);
      if (p === 'granted') return true;
      p = await handle.requestPermission(opts);
      return p === 'granted';
    }catch(e){ return false; }
  }

  async function writeJsonToFolder(handle, obj){
    const ok = await ensurePermission(handle);
    if (!ok) throw new Error('no-permission');
    const fileHandle = await handle.getFileHandle(FILE_NAME, { create:true });
    const writable = await fileHandle.createWritable();
    await writable.write(new Blob([JSON.stringify(obj, null, 2)], {type:'application/json'}));
    await writable.close();
    return true;
  }

  async function readJsonFromFolder(handle){
    const ok = await ensurePermission(handle);
    if (!ok) throw new Error('no-permission');
    const fileHandle = await handle.getFileHandle(FILE_NAME, { create:false });
    const file = await fileHandle.getFile();
    const txt = await file.text();
    return JSON.parse(txt);
  }

  function downloadJson(obj){
    const blob = new Blob([JSON.stringify(obj, null, 2)], {type:'application/json'});
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = FILE_NAME;
    document.body.appendChild(a);
    a.click();
    a.remove();
    setTimeout(()=>URL.revokeObjectURL(url), 1500);
  }

  // -------------------- Bridge iframe -> parent mirror --------------------
  function injectBridgeIntoFrame(fid){
    const fr = document.getElementById(fid);
    if (!fr) return;
    let win, doc;
    try{ win = fr.contentWindow; doc = fr.contentDocument; }catch(e){ return; }
    if (!win || !doc) return;
    if (win.__piloteBridgeInjectedV39) return;

    // Inject via Function in the iframe context (does not touch module source)
    try{
      const fn = win.Function(`
        (function(){
          if (window.__piloteBridgeInjectedV39) return;
          window.__piloteBridgeInjectedV39 = true;
          const FID = ${JSON.stringify(fid)};
          function safePost(msg){ try{ parent.postMessage(msg, '*'); }catch(e){} }

          function dump(){
            try{
              const data = {};
              for (let i=0;i<localStorage.length;i++){
                const k = localStorage.key(i);
                data[k] = localStorage.getItem(k);
              }
              safePost({type:'pilote-ls-dump', fid:FID, data});
            }catch(e){}
          }
          dump();

          try{
            const _set = localStorage.setItem.bind(localStorage);
            const _rem = localStorage.removeItem.bind(localStorage);
            const _clr = localStorage.clear.bind(localStorage);

            localStorage.setItem = function(k,v){
              _set(k,v);
              safePost({type:'pilote-ls-set', fid:FID, key:String(k), value:String(v)});
            };
            localStorage.removeItem = function(k){
              _rem(k);
              safePost({type:'pilote-ls-remove', fid:FID, key:String(k)});
            };
            localStorage.clear = function(){
              _clr();
              safePost({type:'pilote-ls-clear', fid:FID});
            };
          }catch(e){}

          window.addEventListener('message', function(ev){
            const d = ev && ev.data;
            if (!d || d.type !== 'pilote-ls-apply' || d.fid !== FID) return;
            try{
              const items = d.items || {};
              localStorage.clear();
              Object.keys(items).forEach(k=>localStorage.setItem(k, items[k]));
              safePost({type:'pilote-ls-dump', fid:FID, data: items});
            }catch(e){}
          });
        })();
      `);
      fn();
    }catch(e){
      // ignore
    }
  }

  function ensureAllBridges(){
    FRAMES.forEach(injectBridgeIntoFrame);
  }

  // Listen mirror updates
  window.addEventListener('message', function(e){
    const d = e && e.data;
    if (!d || !d.type || !d.fid) return;
    if (FRAMES.indexOf(d.fid) === -1) return;

    if (d.type === 'pilote-ls-set'){
      try{ localStorage.setItem(mirrorKey(d.fid, d.key), String(d.value)); }catch(err){}
      markDirty();
      return;
    }
    if (d.type === 'pilote-ls-remove'){
      try{ localStorage.removeItem(mirrorKey(d.fid, d.key)); }catch(err){}
      markDirty();
      return;
    }
    if (d.type === 'pilote-ls-clear'){
      try{
        const todel = [];
        for (let i=0;i<localStorage.length;i++){
          const k = localStorage.key(i);
          if (k && k.startsWith(MIRROR_PREFIX + d.fid + '__')) todel.push(k);
        }
        todel.forEach(k=>localStorage.removeItem(k));
      }catch(err){}
      markDirty();
      return;
    }
    if (d.type === 'pilote-ls-dump'){
      try{
        const data = d.data || {};
        Object.keys(data).forEach(k=>localStorage.setItem(mirrorKey(d.fid, k), String(data[k])));
      }catch(err){}
      // dump doesn't necessarily mean change, don't mark dirty
      return;
    }
  });

  // Hook iframe loads
  FRAMES.forEach(fid=>{
    const fr = document.getElementById(fid);
    if (!fr) return;
    fr.addEventListener('load', ()=>{
      setTimeout(()=>injectBridgeIntoFrame(fid), 150);
      setTimeout(()=>injectBridgeIntoFrame(fid), 700);
      setTimeout(()=>injectBridgeIntoFrame(fid), 1500);
    });
  });

  // Also poll (blob iframe can be recreated)
  setInterval(ensureAllBridges, 1100);
  document.addEventListener('DOMContentLoaded', ()=>setTimeout(ensureAllBridges, 900));

  // -------------------- Collect / restore ALL data --------------------
  function collectAll(){
    // Prefer existing function if present
    let data = {};
    try{
      if (typeof window.collectAllModulesData === 'function'){
        data = window.collectAllModulesData() || {};
      }
    }catch(e){ data = {}; }

    // Always include mirror keys to guarantee module data
    try{
      for (let i=0;i<localStorage.length;i++){
        const k = localStorage.key(i);
        if (isMirrorKey(k)) data[k] = localStorage.getItem(k);
      }
    }catch(e){}

    return {
      schema: 'cadir-pilote-data-v1',
      updatedAt: nowIso(),
      data
    };
  }

  function splitPerFrame(recordData){
    const per = {};
    FRAMES.forEach(fid=>per[fid] = {});
    Object.keys(recordData||{}).forEach(k=>{
      FRAMES.forEach(fid=>{
        const p1 = '__' + fid + '__';
        const p2 = MIRROR_PREFIX + fid + '__';
        if (k.startsWith(p1)){
          per[fid][k.slice(p1.length)] = recordData[k];
        }else if (k.startsWith(p2)){
          per[fid][k.slice(p2.length)] = recordData[k];
        }
      });
    });
    return per;
  }

  function restoreAll(payload){
    if (!payload || !payload.data) return;
    const record = payload.data;

    // Restore parent localStorage non-mirror keys that belong to app (keep mirrors too)
    try{
      Object.keys(record).forEach(k=>{
        // write everything back; it's safe (includes mirrors)
        localStorage.setItem(k, record[k]);
      });
    }catch(e){}

    // Restore modules via postMessage apply
    const per = splitPerFrame(record);
    FRAMES.forEach(fid=>{
      const fr = document.getElementById(fid);
      try{
        fr && fr.contentWindow && fr.contentWindow.postMessage({type:'pilote-ls-apply', fid, items: per[fid]}, '*');
      }catch(e){}
    });

    // If your app already has distributeToModules, call it too
    try{ if (typeof window.distributeToModules === 'function') window.distributeToModules(record); }catch(e){}
  }

  // -------------------- Autosave (folder if enabled, else download) --------------------
  let dirty = false;
  let tmr = 0;

  function markDirty(){
    dirty = true;
    if (tmr) clearTimeout(tmr);
    tmr = setTimeout(()=>autoSave(), 900);
  }

  async function autoSave(){
    if (!dirty) return;
    dirty = false;

    const payload = collectAll();

    // If folder sync enabled and handle exists -> write file
    const s = (function(){
      try{ return (typeof getSettings==='function') ? (getSettings()||{}) : (JSON.parse(localStorage.getItem('PILOTE_SETTINGS')||'{}')||{}); }catch(e){ return {}; }
    })();

    const folderEnabled = !!(s.localFolderEnabled || s.folderSyncEnabled || s.syncFolderEnabled);
    if (folderEnabled && 'showDirectoryPicker' in window){
      const handle = await getSavedFolderHandle();
      if (handle){
        try{
          await writeJsonToFolder(handle, payload);
          // optional toast if your UI has it
          try{ if (typeof toast === 'function') toast('Sauvegarde OK', 'pilote_data.json mis à jour'); }catch(e){}
          return;
        }catch(e){
          // permission lost -> fall back
        }
      }
    }

    // fallback: store payload in localStorage (always) so you don't lose anything
    try{ localStorage.setItem('__last_export__', JSON.stringify(payload)); }catch(e){}
  }

  // Public actions for UI buttons (can be wired later)
  window.PILOTE_SYNC = {
    chooseFolder: async function(){
      if (!('showDirectoryPicker' in window)){
        alert("Votre navigateur ne permet pas la sélection de dossier (File System Access API).\\nUtilisez Chrome/Edge.");
        return;
      }
      const handle = await window.showDirectoryPicker();
      await setSavedFolderHandle(handle);
      await ensurePermission(handle);
      alert("Dossier de synchronisation enregistré.\\nLe fichier pilote_data.json sera mis à jour automatiquement.");
      // write immediately
      await writeJsonToFolder(handle, collectAll());
    },
    exportNow: async function(){
      const payload = collectAll();
      const handle = await getSavedFolderHandle();
      if (handle){
        try{ await writeJsonToFolder(handle, payload); return; }catch(e){}
      }
      downloadJson(payload);
    },
    importFromFolder: async function(){
      const handle = await getSavedFolderHandle();
      if (!handle){
        alert("Aucun dossier enregistré.\\nChoisissez d'abord un dossier de synchronisation.");
        return;
      }
      const payload = await readJsonFromFolder(handle);
      restoreAll(payload);
      alert("Import terminé depuis pilote_data.json");
    },
    importFromFile: async function(file){
      const txt = await file.text();
      const payload = JSON.parse(txt);
      restoreAll(payload);
      alert("Import terminé depuis fichier");
    }
  };

  // initial save after load (captures dumps)
  setTimeout(()=>{ markDirty(); }, 1800);

})();
</script>



<script>
/* ═══════════════════════════════════════════════════════════════════════════════
   ACTIVITÉS PÉDAGOGIQUES — Module unifié
   ═══════════════════════════════════════════════════════════════════════════════
   Remplace V24→V34 et V43→V50.
   
   Fonctionnalités :
   ① Dates : détection depuis le formulaire (reporter iframe → parent via postMessage),
     fallback par scan du localStorage iframe, stockage persistant côté parent.
   ② Layout vignettes : Intitulé + Date + badge PARENTS INFORMÉS + bouton Modifier.
     Masque description, message parents, bouton supprimer.
   ③ Tri : du plus récent au plus ancien.
   ④ Formulaire : titre + date de début obligatoires, champ échéance masqué.
   ═══════════════════════════════════════════════════════════════════════════════ */
(function(){
  'use strict';

  /* ─────────── Constantes ─────────── */
  var MAP_KEY = 'cadir_ap_title_to_start_v2';
  var FRAME_ID = 'frame-perdir';

  /* ─────────── Helpers ─────────── */
  function normalize(s){ return String(s||'').trim().toLowerCase().replace(/\s+/g,' '); }
  function pad2(n){ return String(n).padStart(2,'0'); }

  var dateFmt = new Intl.DateTimeFormat('fr-FR', { weekday:'long', day:'2-digit', month:'long' });
  function parseToDate(v){
    if (!v) return null;
    var s = String(v).trim();
    var m = s.match(/^(\d{1,2})\s*\/\s*(\d{1,2})\s*\/\s*(\d{4})$/);
    if (m) return new Date(Number(m[3]), Number(m[2])-1, Number(m[1]));
    m = s.match(/^(\d{4})-(\d{2})-(\d{2})/);
    if (m) return new Date(Number(m[1]), Number(m[2])-1, Number(m[3]));
    var t = Date.parse(s);
    if (!Number.isNaN(t)) return new Date(t);
    return null;
  }
  function niceDate(v){
    var d = parseToDate(v);
    if (!d || isNaN(d.getTime())) return null;
    return dateFmt.format(d).replace(/\.$/,'');
  }
  function isoToFr(iso){
    var m = String(iso||'').trim().match(/^(\d{4})-(\d{2})-(\d{2})/);
    if (!m) return String(iso||'').trim();
    return m[3]+'/'+m[2]+'/'+m[1];
  }

  /* ─────────── Mapping titre→date (localStorage parent) ─────────── */
  function loadMap(){
    try{ return JSON.parse(localStorage.getItem(MAP_KEY)||'{}') || {}; }catch(e){ return {}; }
  }
  function saveMap(m){
    try{ localStorage.setItem(MAP_KEY, JSON.stringify(m||{})); }catch(e){}
  }

  /* ─────────── Accès iframe ─────────── */
  function getFrame(){
    return document.getElementById(FRAME_ID);
  }
  function getIframeDocWin(){
    var fr = getFrame();
    if (!fr) return null;
    try{ return { doc: fr.contentDocument, win: fr.contentWindow }; }catch(e){ return null; }
  }

  /* ═══════════════════════════════════════
     ① REPORTER IFRAME (détection formulaire)
     ═══════════════════════════════════════ */
  function ensureIframeReporter(){
    var ifw = getIframeDocWin();
    if (!ifw || !ifw.doc || ifw.doc.__cadirAPReporter) return;
    var doc = ifw.doc;

    var reporter = doc.createElement('script');
    reporter.textContent = [
      '(function(){',
      '  function norm(s){ return String(s||"").trim().toLowerCase().replace(/\\s+/g," "); }',
      '  function findFormFields(){',
      '    var labels = Array.from(document.querySelectorAll("label"));',
      '    var titleLb = labels.find(function(lb){ return norm(lb.textContent).indexOf("intitul")>=0; });',
      '    var dateLb  = labels.find(function(lb){ var t=norm(lb.textContent); return t==="début" || t.indexOf("début")>=0; });',
      '    var titleInput=null, dateInput=null;',
      '    if(titleLb){ var fid=titleLb.getAttribute("for"); titleInput=fid?document.querySelector("#"+CSS.escape(fid)):titleLb.parentElement&&titleLb.parentElement.querySelector("input,textarea"); }',
      '    if(!titleInput) titleInput=document.querySelector("input[name*=intitul i],input[name*=title i]");',
      '    if(dateLb){ var fid2=dateLb.getAttribute("for"); dateInput=fid2?document.querySelector("#"+CSS.escape(fid2)):dateLb.parentElement&&dateLb.parentElement.querySelector("input"); }',
      '    if(!dateInput) dateInput=document.querySelector("input[type=date],input[name*=debut i],input[name*=start i]");',
      '    return {titleInput:titleInput, dateInput:dateInput};',
      '  }',
      '  function snapshot(){',
      '    var f=findFormFields(); if(!f.titleInput||!f.dateInput) return;',
      '    var title=norm(f.titleInput.value), start=String(f.dateInput.value||f.dateInput.getAttribute("value")||"").trim();',
      '    if(!title||!start) return;',
      '    try{ parent.postMessage({type:"cadir-ap-start",title:title,start:start},"*"); }catch(e){}',
      '  }',
      '  var obs=new MutationObserver(function(){snapshot();});',
      '  obs.observe(document.body,{childList:true,subtree:true});',
      '  document.addEventListener("input",snapshot,true);',
      '  document.addEventListener("change",snapshot,true);',
      '  setInterval(snapshot,800); setTimeout(snapshot,500);',
      '})();'
    ].join('\n');
    doc.body.appendChild(reporter);
    doc.__cadirAPReporter = true;
  }

  /* Écoute les messages du reporter */
  window.addEventListener('message', function(e){
    if (!e||!e.data||e.data.type!=='cadir-ap-start') return;
    var title = normalize(e.data.title);
    var start = String(e.data.start||'').trim();
    if (!title||!start) return;
    var m = loadMap();
    m[title] = start;
    saveMap(m);
    applyToCards();
  });

  /* ═══════════════════════════════════════
     ② SCAN LOCALSTORAGE IFRAME (fallback)
     ═══════════════════════════════════════ */
  function pickTitle(o){ return o&&(o.title||o.titre||o.intitule||o['intitulé']||o.name||o.libelle||o.label)||null; }
  function pickStart(o){ return o&&(o.start||o.debut||o.dateDebut||o['date_début']||o.date_debut||o.startDate||o.date)||null; }

  function extractActivitiesFromValue(val){
    if (!val) return null;
    var t = String(val).trim();
    if (!(t.charAt(0)==='{' || t.charAt(0)==='[')) return null;
    var data;
    try{ data = JSON.parse(t); }catch(e){ return null; }
    if (Array.isArray(data) && data.length && pickTitle(data[0]) && pickStart(data[0])) return data;
    if (data && typeof data==='object'){
      var keys = Object.keys(data);
      for (var i=0;i<keys.length;i++){
        var arr = data[keys[i]];
        if (Array.isArray(arr)&&arr.length&&pickTitle(arr[0])&&pickStart(arr[0])) return arr;
      }
    }
    return null;
  }

  function scanLocalStorageForDates(){
    var ifw = getIframeDocWin();
    if (!ifw||!ifw.win) return {};
    var ls = ifw.win.localStorage;
    var result = {};
    try{
      for (var i=0;i<ls.length;i++){
        var k = ls.key(i);
        var arr = extractActivitiesFromValue(ls.getItem(k));
        if (arr){
          arr.forEach(function(a){
            var tit = normalize(pickTitle(a));
            var st = pickStart(a);
            if (tit && st && !result[tit]) result[tit] = st;
          });
        }
      }
    }catch(e){}
    return result;
  }

  /* ═══════════════════════════════════════
     ③ DÉTECTION DES CARTES
     ═══════════════════════════════════════ */
  function findCards(doc){
    var pens = Array.from(doc.querySelectorAll('.fa-pen,.fa-pencil,.fa-edit'));
    var cards = new Set();
    pens.forEach(function(icon){
      var p = (icon.closest('button,a')||icon).closest('div,li,article,section');
      if (!p) return;
      var card = p;
      for(var j=0;j<4;j++){
        if (!card.parentElement) break;
        var cs = doc.defaultView.getComputedStyle(card);
        if ((cs.borderRadius && cs.borderRadius!=='0px') || cs.boxShadow!=='none') break;
        card = card.parentElement;
      }
      cards.add(card);
    });
    return Array.from(cards);
  }

  function getCardTitle(card){
    var el = card.querySelector('h3,h4,.title,.card-title,strong') || card;
    return normalize(el.textContent || '');
  }

  /* ═══════════════════════════════════════
     ④ INJECTION CSS IFRAME
     ═══════════════════════════════════════ */
  function injectCSS(doc){
    if (doc.__cadirAPCss) return;
    var st = doc.createElement('style');
    st.textContent = [
      /* Date inline */
      '.ap-inline-date{ color:#6b7280; font-size:12px; font-weight:800; margin-left:8px; white-space:nowrap; }',

      /* Card compact */
      '.cadir-ap-card{ padding:10px 14px !important; }',

      /* Header flex: left + right */
      '.cadir-ap-head{ display:flex !important; align-items:flex-start !important; justify-content:space-between !important; gap:12px !important; }',
      '.cadir-ap-left{ flex:1 1 auto !important; min-width:0 !important; display:flex !important; flex-direction:column !important; gap:6px !important; }',
      '.cadir-ap-titleline{ display:flex !important; align-items:baseline !important; gap:8px !important; flex-wrap:wrap !important; }',
      '.cadir-ap-date{ color:#6b7280 !important; font-size:12px !important; font-weight:800 !important; white-space:nowrap !important; }',
      '.cadir-ap-meta{ display:flex !important; align-items:center !important; gap:8px !important; flex-wrap:wrap !important; }',

      /* Badge parents */
      '.cadir-ap-badge{ background:rgba(16,185,129,.12) !important; color:#059669 !important;',
      '  border:1px solid rgba(16,185,129,.25) !important; font-weight:900 !important;',
      '  font-size:11px !important; padding:3px 8px !important; border-radius:999px !important;',
      '  text-transform:uppercase !important; white-space:nowrap !important; }',

      /* Actions (bouton modifier) */
      '.cadir-ap-actions{ flex:0 0 auto !important; margin-left:auto !important; display:flex !important; align-items:center !important; justify-content:flex-end !important; }',

      /* Bouton modifier stylisé */
      '.cadir-ap-edit-btn{ width:34px !important; height:34px !important; border-radius:10px !important;',
      '  border:1px solid rgba(15,23,42,.10) !important; background:#f8fafc !important;',
      '  box-shadow:0 6px 16px rgba(0,0,0,.06) !important;',
      '  display:inline-flex !important; align-items:center !important; justify-content:center !important;',
      '  cursor:pointer !important; transition:transform .08s ease,background .15s ease; }',
      '.cadir-ap-edit-btn:hover{ transform:translateY(-1px); background:#fff !important; }',
      '.cadir-ap-edit-btn:active{ transform:translateY(0); }',
      '.cadir-ap-edit-btn .fa-pen,.cadir-ap-edit-btn .fa-pencil,.cadir-ap-edit-btn .fa-edit{ font-size:14px !important; opacity:.9 !important; }',

      /* Masquer supprimer */
      '.cadir-ap-card .fa-trash,.cadir-ap-card .fa-trash-alt,.cadir-ap-card .bi-trash,',
      '.cadir-ap-card button[title*="sup" i],.cadir-ap-card a[title*="sup" i]{ display:none !important; visibility:hidden !important; pointer-events:none !important; }',

      /* Masquer description / message / contenu long */
      '.cadir-ap-card .ql-editor,.cadir-ap-card [contenteditable="true"],',
      '.cadir-ap-card textarea,.cadir-ap-card .richtext,.cadir-ap-card .wysiwyg,',
      '.cadir-ap-card .description,.cadir-ap-card [class*="desc" i],',
      '.cadir-ap-card [data-field*="message" i]{ display:none !important; }',

      /* Doublons texte parents */
      '.cadir-ap-old-parents{ display:none !important; }',

      /* Champ échéance masqué */
      '.cadir-hide-due{ display:none !important; }',

      /* Champs date compacts */
      'input[type="date"]{ width:140px !important; max-width:140px !important; }',

      /* Requis */
      '.ap-invalid{ outline:2px solid #ef4444 !important; border-color:#ef4444 !important; }',
      '.ap-required-hint{ color:#b91c1c; font-size:12px; font-weight:900; margin-left:6px; }'
    ].join('\n');
    doc.head.appendChild(st);
    doc.__cadirAPCss = true;
  }

  /* ═══════════════════════════════════════
     ⑤ LAYOUT D'UNE CARTE
     ═══════════════════════════════════════ */
  function detectParentsInformed(card){
    var t = normalize(card.textContent || '');
    if (t.indexOf('parents inform')>=0) return true;
    if (t.indexOf('message envoyé aux parents')>=0 || t.indexOf('message envoye aux parents')>=0) return true;
    if (card.querySelector('.fa-check,.fa-check-circle,.bi-check,.lucide-check')) return true;
    return false;
  }

  function removeDuplicateParentsText(card){
    Array.from(card.querySelectorAll('*')).forEach(function(n){
      if (n.classList && (n.classList.contains('cadir-ap-badge') || n.classList.contains('cadir-ap-date'))) return;
      var txt = normalize(n.textContent || '');
      if ((txt==='parents informés'||txt==='parents informes'||txt.indexOf('parents inform')===0)
          && (n.textContent||'').trim().length<=40){
        n.classList.add('cadir-ap-old-parents');
      }
    });
  }

  function hideNonHeaderContent(card, head){
    Array.from(card.children).forEach(function(ch){
      if (ch===head) return;
      if (ch.querySelector && ch.querySelector('.fa-pen,.fa-pencil,.fa-edit')) return;
      ch.style.display = 'none';
    });
  }

  function ensureLayout(doc, card, dateMap, lsFallback){
    if (card.__cadirAPDone) return;
    card.classList.add('cadir-ap-card');

    var parentsSent = detectParentsInformed(card);
    var editIcon = card.querySelector('.fa-pen,.fa-pencil,.fa-edit');
    var editBtn = editIcon ? editIcon.closest('button,a') : null;
    var titleNode = card.querySelector('h3,h4,.title,.card-title,strong') || card.firstElementChild || card;
    var existingDateNode = card.querySelector('.ap-inline-date');

    /* Résoudre la date */
    var cardTitle = normalize(titleNode ? titleNode.textContent : '');
    var rawDate = dateMap[cardTitle];
    if (!rawDate){
      /* Fallback: chercher par inclusion */
      var keys = Object.keys(dateMap);
      for (var i=0;i<keys.length;i++){
        if (keys[i] && (keys[i].indexOf(cardTitle)>=0 || cardTitle.indexOf(keys[i])>=0)){ rawDate=dateMap[keys[i]]; break; }
      }
    }
    if (!rawDate && lsFallback){
      rawDate = lsFallback[cardTitle];
      if (!rawDate){
        var lsKeys = Object.keys(lsFallback);
        for (var j=0;j<lsKeys.length;j++){
          if (lsKeys[j] && (lsKeys[j].indexOf(cardTitle)>=0 || cardTitle.indexOf(lsKeys[j])>=0)){ rawDate=lsFallback[lsKeys[j]]; break; }
        }
      }
    }
    var displayDate = niceDate(rawDate);

    /* Construire le header */
    var head = doc.createElement('div');
    head.className = 'cadir-ap-head';
    var left = doc.createElement('div');
    left.className = 'cadir-ap-left';
    var titleLine = doc.createElement('div');
    titleLine.className = 'cadir-ap-titleline';
    var meta = doc.createElement('div');
    meta.className = 'cadir-ap-meta';
    var actions = doc.createElement('div');
    actions.className = 'cadir-ap-actions';

    card.insertBefore(head, card.firstChild);
    head.appendChild(left);
    head.appendChild(actions);
    left.appendChild(titleLine);
    left.appendChild(meta);

    /* Titre */
    if (titleNode) titleLine.appendChild(titleNode);

    /* Date */
    if (rawDate) card.dataset.sortDate = rawDate;
    if (existingDateNode){
      existingDateNode.classList.add('cadir-ap-date');
      if (displayDate) existingDateNode.textContent = displayDate;
      else existingDateNode.textContent = (existingDateNode.textContent||'').replace(/^•\s*/,'').trim();
      titleLine.appendChild(existingDateNode);
    } else if (displayDate){
      var dateSpan = doc.createElement('span');
      dateSpan.className = 'cadir-ap-date';
      dateSpan.textContent = displayDate;
      titleLine.appendChild(dateSpan);
    }

    /* Badge parents */
    if (parentsSent){
      var badge = doc.createElement('span');
      badge.className = 'cadir-ap-badge';
      badge.textContent = 'PARENTS INFORMÉS';
      meta.appendChild(badge);
    }

    /* Bouton modifier */
    if (editBtn){
      editBtn.classList.add('cadir-ap-edit-btn');
      editBtn.setAttribute('title','Modifier');
      editBtn.setAttribute('aria-label','Modifier');
      actions.appendChild(editBtn);
    }

    removeDuplicateParentsText(card);
    hideNonHeaderContent(card, head);

    card.__cadirAPDone = true;
  }

  /* ═══════════════════════════════════════
     ⑥ TRI
     ═══════════════════════════════════════ */
  function parseDateForSort(card){
    /* Priorité : data-sort-date stocké sur la carte */
    if (card.dataset && card.dataset.sortDate){
      var d = parseToDate(card.dataset.sortDate);
      if (d && !isNaN(d.getTime())) return d.getTime();
    }
    var dateEl = card.querySelector('.cadir-ap-date,.ap-inline-date');
    if (!dateEl) return -Infinity;
    var d2 = parseToDate(dateEl.textContent);
    return d2 ? d2.getTime() : -Infinity;
  }

  function sortCards(cards){
    if (cards.length<2) return;
    var parent = cards[0].parentElement;
    if (!parent) return;
    var siblings = cards.filter(function(c){ return c.parentElement===parent; });
    if (siblings.length<2) return;
    var sorted = siblings.slice().sort(function(a,b){ return parseDateForSort(b)-parseDateForSort(a); });
    var needsSort = false;
    for(var i=0;i<sorted.length;i++){ if(sorted[i]!==siblings[i]){ needsSort=true; break; } }
    if (needsSort) sorted.forEach(function(c){ parent.appendChild(c); });
  }

  /* ═══════════════════════════════════════
     ⑦ FORMULAIRE : requis + masquer échéance
     ═══════════════════════════════════════ */
  function enforceFormRules(doc){
    if (doc.__cadirAPFormDone) return;

    /* Masquer champ échéance */
    var labels = Array.from(doc.querySelectorAll('label,.field-label,.form-label'));
    labels.forEach(function(lb){
      var t = normalize(lb.textContent);
      if (t.indexOf('échéance')>=0 || t.indexOf('echeance')>=0 || t.indexOf('due')>=0){
        var row = lb.closest('.field,.form-group,.row,.grid,.input-group') || lb.parentElement;
        if (row) row.classList.add('cadir-hide-due');
        lb.classList.add('cadir-hide-due');
        var inp = (row||lb).querySelector && (row||lb).querySelector('input,select,textarea');
        if (inp){ inp.classList.add('cadir-hide-due'); var w=inp.closest('.field,.form-group,.row,.grid,.input-group')||inp.parentElement; if(w)w.classList.add('cadir-hide-due'); }
      }
    });
    doc.querySelectorAll('input[name*="echeance" i],input[id*="echeance" i],input[name*="due" i],input[id*="due" i]').forEach(function(inp){
      inp.classList.add('cadir-hide-due');
      var w = inp.closest('.field,.form-group,.row,.grid,.input-group')||inp.parentElement;
      if(w) w.classList.add('cadir-hide-due');
    });

    /* Titre + Date obligatoires */
    var titleLb = labels.find(function(x){ return normalize(x.textContent).indexOf('intitul')>=0; });
    var dateLb  = labels.find(function(x){ var t2=normalize(x.textContent); return t2==='début'||t2.indexOf('début')>=0; });

    var titleInput=null, dateInput=null;
    if(titleLb){ var fid=titleLb.getAttribute('for'); titleInput=fid?doc.querySelector('#'+CSS.escape(fid)):titleLb.parentElement&&titleLb.parentElement.querySelector('input,textarea'); }
    if(!titleInput) titleInput=doc.querySelector('input[name*="intitul" i],input[name*="title" i]');
    if(dateLb){ var fid2=dateLb.getAttribute('for'); dateInput=fid2?doc.querySelector('#'+CSS.escape(fid2)):dateLb.parentElement&&dateLb.parentElement.querySelector('input'); }
    if(!dateInput) dateInput=doc.querySelector('input[type="date"],input[name*="debut" i],input[name*="start" i]');

    if(titleInput){ titleInput.required=true; if(titleLb&&!titleLb.querySelector('.ap-required-hint')){ var s=doc.createElement('span');s.className='ap-required-hint';s.textContent='*';titleLb.appendChild(s); } }
    if(dateInput){ dateInput.required=true; if(dateLb&&!dateLb.querySelector('.ap-required-hint')){ var s2=doc.createElement('span');s2.className='ap-required-hint';s2.textContent='*';dateLb.appendChild(s2); } }

    var saveBtn = Array.from(doc.querySelectorAll('button,input[type="submit"]')).find(function(b){ return normalize(b.textContent||b.value).indexOf('enregistrer')>=0; });
    if(saveBtn && !saveBtn.__cadirAPSaveHook){
      saveBtn.__cadirAPSaveHook = true;
      saveBtn.addEventListener('click', function(ev){
        var ok=true;
        if(titleInput){ titleInput.classList.remove('ap-invalid'); if(!String(titleInput.value||'').trim()){ ok=false; titleInput.classList.add('ap-invalid'); } }
        if(dateInput){ dateInput.classList.remove('ap-invalid'); if(!String(dateInput.value||'').trim()){ ok=false; dateInput.classList.add('ap-invalid'); } }
        if(!ok){ ev.preventDefault(); ev.stopPropagation(); alert('Veuillez renseigner le titre et la date de début.'); }
      }, true);
    }

    doc.__cadirAPFormDone = true;
  }

  /* ═══════════════════════════════════════
     ⑧ BOUCLE PRINCIPALE
     ═══════════════════════════════════════ */
  var _raf = 0;
  var _applying = false;

  function applyToCards(){
    var ifw = getIframeDocWin();
    if (!ifw||!ifw.doc) return;
    var doc = ifw.doc;

    _applying = true;
    try{
      injectCSS(doc);
      ensureIframeReporter();
      enforceFormRules(doc);

      var dateMap = loadMap();
      var lsFallback = scanLocalStorageForDates();

      var cards = findCards(doc);
      cards.forEach(function(card){ ensureLayout(doc, card, dateMap, lsFallback); });
      sortCards(cards);
    }finally{
      _applying = false;
    }
  }

  function schedule(){
    if (_applying || _raf) return;
    _raf = requestAnimationFrame(function(){ _raf=0; applyToCards(); });
  }

  /* ─────────── Observer dans l'iframe ─────────── */
  function setupObserver(){
    var ifw = getIframeDocWin();
    if (!ifw||!ifw.doc||ifw.doc.__cadirAPObs) return;
    var obs = new MutationObserver(schedule);
    obs.observe(ifw.doc.body, {childList:true, subtree:true});
    ifw.doc.__cadirAPObs = true;
  }

  /* ─────────── Init ─────────── */
  function fullInit(){
    applyToCards();
    setupObserver();
  }

  /* Polling robuste (gère blob recreation / timing online) — modéré */
  setInterval(function(){
    ensureIframeReporter();
    var ifw = getIframeDocWin();
    if (ifw && ifw.doc && !ifw.doc.__cadirAPObs) setupObserver();
  }, 1500);

  /* Hooks */
  getFrame()?.addEventListener('load', function(){
    setTimeout(fullInit, 600);
    setTimeout(fullInit, 1400);
  });

  var _loadModule = window.loadModule;
  if (typeof _loadModule === 'function'){
    window.loadModule = function(name){
      var r = _loadModule.apply(this, arguments);
      if (name === 'perdir'){
        setTimeout(fullInit, 700);
        setTimeout(fullInit, 1500);
      }
      return r;
    };
  }

  document.addEventListener('DOMContentLoaded', function(){
    setTimeout(fullInit, 1000);
  });

})();
</script>



<script>
/* ===== V48 - Accueil: afficher les "ÉVÉNEMENTS DU JOUR" DANS UNE VIGNETTE (toujours) =====
   - Détecte le bloc "ÉVÉNEMENTS DU JOUR" existant (titre + lignes heures)
   - Le remplace/encapsule dans une card visible (fond blanc, bordure, ombre)
   - Si rien n'est trouvé, ne fait rien.
*/
(function(){
  function findHomeTodayBlock(){
    // Find heading that matches
    const nodes = Array.from(document.querySelectorAll('h1,h2,h3,h4,div,span,p'));
    const heading = nodes.find(n => (n.textContent||'').trim().toUpperCase() === "ÉVÉNEMENTS DU JOUR" || (n.textContent||'').trim().toUpperCase() === "EVENEMENTS DU JOUR");
    if (!heading) return null;

    // collect following siblings that look like event lines (contain "—" or time)
    const lines = [];
    let cur = heading.nextElementSibling;
    for (let i=0; i<8 && cur; i++){
      const txt = (cur.textContent||'').trim();
      if (!txt) { cur = cur.nextElementSibling; continue; }
      if (/^\d{1,2}:\d{2}\s*[—-]/.test(txt) || /\d{1,2}:\d{2}/.test(txt)){
        lines.push(cur);
        cur = cur.nextElementSibling;
      } else {
        // stop if we reach another section heading
        if (/^[A-ZÉÈÊÀÇ0-9 \-]{8,}$/.test(txt.toUpperCase())) break;
        // allow small spacer
        if (lines.length===0 && txt.length<3){ cur = cur.nextElementSibling; continue; }
        // stop otherwise
        break;
      }
    }
    return {heading, lines};
  }

  function ensureCardStyles(){
    if (document.getElementById('cadir-home-today-card-style')) return;
    const st = document.createElement('style');
    st.id = 'cadir-home-today-card-style';
    st.textContent = `
      .cadir-today-card{
        background:#ffffff;
        border-radius:16px;
        border:1px solid rgba(15,23,42,.10);
        box-shadow:0 10px 28px rgba(0,0,0,.08);
        padding:14px 18px;
        max-width: 520px;
        margin: 16px auto 0 auto;
        text-align:left;
      }
      .cadir-today-card-title{
        font-weight:900;
        letter-spacing:.05em;
        font-size:12px;
        color:#0f172a;
        text-transform:uppercase;
        margin-bottom:10px;
        display:flex;
        align-items:center;
        gap:8px;
      }
      .cadir-today-card-list{
        display:flex;
        flex-direction:column;
        gap:6px;
        font-size:14px;
        color:#0f172a;
      }
      .cadir-today-card-item{
        display:flex;
        gap:10px;
        align-items:flex-start;
        line-height:1.2;
      }
      .cadir-today-card-time{
        font-weight:900;
        color:#0f172a;
        min-width:60px;
        white-space:nowrap;
      }
      .cadir-today-card-text{
        color:#0f172a;
        flex:1;
      }
    `;
    document.head.appendChild(st);
  }

  function wrapTodayIntoCard(){
    const found = findHomeTodayBlock();
    if (!found) return;

    ensureCardStyles();

    const {heading, lines} = found;

    // If already wrapped, do nothing
    if (heading.closest('.cadir-today-card')) return;

    const card = document.createElement('div');
    card.className = 'cadir-today-card';

    const title = document.createElement('div');
    title.className = 'cadir-today-card-title';
    title.textContent = 'ÉVÉNEMENTS DU JOUR';

    const list = document.createElement('div');
    list.className = 'cadir-today-card-list';

    // Replace original heading content
    const parent = heading.parentElement;
    if (!parent) return;

    // Insert card before heading
    parent.insertBefore(card, heading);
    card.appendChild(title);
    card.appendChild(list);

    // Remove original heading
    heading.remove();

    // Move lines into card
    if (lines.length){
      lines.forEach(el=>{
        const txt = (el.textContent||'').trim();
        const m = txt.match(/^(\d{1,2}:\d{2})\s*[—-]\s*(.*)$/);
        const item = document.createElement('div');
        item.className = 'cadir-today-card-item';
        if (m){
          const time = document.createElement('div');
          time.className = 'cadir-today-card-time';
          time.textContent = m[1];
          const text = document.createElement('div');
          text.className = 'cadir-today-card-text';
          text.textContent = m[2] || '';
          item.appendChild(time);
          item.appendChild(text);
        } else {
          const text = document.createElement('div');
          text.className = 'cadir-today-card-text';
          text.textContent = txt;
          item.appendChild(text);
        }
        list.appendChild(item);
        el.remove();
      });
    } else {
      const empty = document.createElement('div');
      empty.className = 'cadir-today-card-item';
      empty.textContent = 'Aucun événement aujourd’hui.';
      list.appendChild(empty);
    }
  }

  // Run after render + on module load
  function schedule(){
    wrapTodayIntoCard();
    setTimeout(wrapTodayIntoCard, 500);
    setTimeout(wrapTodayIntoCard, 1400);
  }

  document.addEventListener('DOMContentLoaded', schedule);

  const _loadModule = window.loadModule;
  if (typeof _loadModule === 'function'){
    window.loadModule = function(name){
      const r = _loadModule.apply(this, arguments);
      if (name === 'home' || name === 'cadir'){
        setTimeout(wrapTodayIntoCard, 600);
        setTimeout(wrapTodayIntoCard, 1400);
      }
      return r;
    };
  }

  // Also observe home re-render
  const obs = new MutationObserver(()=>wrapTodayIntoCard());
  obs.observe(document.body, {childList:true, subtree:true});
})();
</script>


<script>
/* ═══════════════════════════════════════════════════════════════════════════════
   GOOGLE CALENDAR — Auto-sync transparent
   ═══════════════════════════════════════════════════════════════════════════════
   ① Au chargement: si gcal activé + clientId → auth silencieuse → fetch auto
   ② Refresh périodique toutes les 5 min
   ③ Gestion expiration token (re-auth silencieuse avant expiry)
   ④ Indicateur visuel de statut dans la barre
   ═══════════════════════════════════════════════════════════════════════════════ */
(function(){
  'use strict';

  var SYNC_INTERVAL = 5 * 60 * 1000;   // 5 minutes
  var TOKEN_MARGIN  = 5 * 60 * 1000;    // refresh 5 min avant expiry
  var _tokenExpiresAt = 0;
  var _syncTimer = null;
  var _gsiLoaded = false;
  var _silentAuthFailed = false;
  var _tokenClient = null;

  /* ─── Helpers ─── */
  function getS(){
    try{ return JSON.parse(localStorage.getItem(typeof STORAGE_KEY!=='undefined'?STORAGE_KEY:'pilote_settings')||'{}'); }catch(e){ return {}; }
  }

  function isGcalConfigured(){
    var s = getS();
    return !!(s.gcalEnabled && (s.gcalClientId || '').trim());
  }

  function getClientId(){
    var s = getS();
    return (s.gcalClientId || '').trim();
  }

  function hasToken(){
    return typeof _gcalAccessToken !== 'undefined' && !!_gcalAccessToken;
  }

  function tokenAlive(){
    if (!hasToken()) return false;
    if (_tokenExpiresAt && Date.now() > _tokenExpiresAt - TOKEN_MARGIN) return false;
    return true;
  }

  /* ─── Charger la bibliothèque GIS ─── */
  function loadGSI(cb){
    if (typeof google !== 'undefined' && google.accounts && google.accounts.oauth2){
      _gsiLoaded = true;
      cb();
      return;
    }
    if (_gsiLoaded) { cb(); return; }
    var s = document.createElement('script');
    s.src = 'https://accounts.google.com/gsi/client';
    s.async = true;
    s.onload = function(){ _gsiLoaded = true; cb(); };
    s.onerror = function(){ console.warn('[PILOTE] Impossible de charger GIS'); };
    document.head.appendChild(s);
  }

  /* ─── Créer le tokenClient (une seule fois) ─── */
  function ensureTokenClient(){
    if (_tokenClient) return _tokenClient;
    var clientId = getClientId();
    if (!clientId) return null;
    try{
      _tokenClient = google.accounts.oauth2.initTokenClient({
        client_id: clientId,
        scope: 'https://www.googleapis.com/auth/calendar.events https://www.googleapis.com/auth/calendar.readonly',
        callback: function(resp){
          if (resp.error){
            _silentAuthFailed = true;
            updateSyncStatus('disconnected');
            return;
          }
          _gcalAccessToken = resp.access_token;
          window._gcalAccessToken = resp.access_token;
          _tokenExpiresAt = Date.now() + ((resp.expires_in || 3600) * 1000);
          _silentAuthFailed = false;
          /* ── Persister en sessionStorage pour survivre au F5 ── */
          try{
            sessionStorage.setItem('pilote_gcal_token', resp.access_token);
            sessionStorage.setItem('pilote_gcal_token_exp', String(_tokenExpiresAt));
          }catch(e){}
          updateSyncStatus('connected');
          /* UI settings panel — update if visible */
          var statusEl = document.getElementById('gcal-auth-status');
          if (statusEl) statusEl.innerHTML = '<span style="color:#34a853;"><i class="fas fa-check"></i> Connecté</span>';
          var btnEl = document.getElementById('btn-gcal-auth');
          if (btnEl){ btnEl.innerHTML = '<i class="fas fa-check-circle"></i> Connecté'; btnEl.style.background = '#34a853'; }
          /* Auto-fetch: get calendar list then events */
          autoFetchAfterAuth();
        }
      });
    }catch(e){ _tokenClient = null; }
    return _tokenClient;
  }

  /* ─── Auth silencieuse (pas de popup si consentement déjà donné) ─── */
  function silentAuth(cb){
    var tc = ensureTokenClient();
    if (!tc) return;
    try{
      tc.requestAccessToken({ prompt: '' });
    }catch(e){
      _silentAuthFailed = true;
      if (cb) cb(false);
    }
  }

  /* ─── Auth interactive (fallback si silent échoue) ─── */
  function interactiveAuth(){
    var tc = ensureTokenClient();
    if (!tc) return;
    try{ tc.requestAccessToken({ prompt: 'consent' }); }catch(e){}
  }

  /* ─── Auto-fetch après auth réussie ─── */
  function autoFetchAfterAuth(){
    /* S'assurer qu'il y a des agendas sélectionnés */
    var s = getS();
    if (s.gcalCals && s.gcalCals.length && s.gcalSel && s.gcalSel.length){
      /* Agendas déjà connus → fetch events directement */
      if (typeof _gcalCalsData !== 'undefined') _gcalCalsData = s.gcalCals;
      if (typeof renderGcalList === 'function') try{ renderGcalList(s.gcalCals, s.gcalSel); }catch(e){}
      setTimeout(function(){ doSyncEvents(); }, 200);
    } else {
      /* Pas d'agendas connus → fetch list d'abord (qui déclenche fetch events via fix 2) */
      if (typeof fetchGcalList === 'function') try{ fetchGcalList(); }catch(e){}
    }
    startPeriodicSync();
  }

  /* ─── Sync events (wrapper robuste) ─── */
  function doSyncEvents(){
    if (!tokenAlive()){
      /* Token expiré → re-auth silencieuse */
      if (!_silentAuthFailed){
        silentAuth();
      }
      return;
    }
    if (typeof gcalFetchEvents === 'function'){
      try{ gcalFetchEvents(); }catch(e){}
    }
  }

  /* ─── Refresh périodique ─── */
  function startPeriodicSync(){
    if (_syncTimer) return;
    _syncTimer = setInterval(function(){
      if (!isGcalConfigured()) return;
      if (!tokenAlive()){
        if (!_silentAuthFailed) silentAuth();
        return;
      }
      doSyncEvents();
    }, SYNC_INTERVAL);
  }

  function stopPeriodicSync(){
    if (_syncTimer){ clearInterval(_syncTimer); _syncTimer = null; }
  }

  /* ─── Indicateur visuel de sync ─── */
  function updateSyncStatus(state){
    var el = document.getElementById('gcal-sync-indicator');
    if (!el){
      /* Créer l'indicateur dans la barre de titre si possible */
      var titleBar = document.querySelector('.title-bar-right, .nav-right, .top-bar-actions');
      if (!titleBar) return;
      el = document.createElement('span');
      el.id = 'gcal-sync-indicator';
      el.style.cssText = 'font-size:.68rem;cursor:pointer;display:inline-flex;align-items:center;gap:4px;padding:2px 8px;border-radius:6px;margin-left:8px;transition:opacity .3s;';
      el.title = 'Google Agenda — cliquer pour resynchroniser';
      el.onclick = function(){
        if (tokenAlive()) doSyncEvents();
        else if (!_silentAuthFailed) silentAuth();
        else interactiveAuth();
      };
      titleBar.appendChild(el);
    }
    if (state === 'connected'){
      el.innerHTML = '<i class="fab fa-google" style="color:#34a853;font-size:.7rem;"></i><span style="color:#34a853;">Sync</span>';
      el.style.opacity = '1';
      setTimeout(function(){ el.style.opacity = '.5'; }, 3000);
    } else if (state === 'syncing'){
      el.innerHTML = '<i class="fas fa-sync fa-spin" style="color:#4285f4;font-size:.65rem;"></i><span style="color:#4285f4;">Sync...</span>';
      el.style.opacity = '1';
    } else if (state === 'disconnected'){
      el.innerHTML = '<i class="fab fa-google" style="color:#ccc;font-size:.7rem;"></i><span style="color:#999;">Déconnecté</span>';
      el.style.opacity = '1';
    }
  }

  /* ─── Hook gcalAuth() existant pour capter le token ─── */
  var _origGcalAuth = window.gcalAuth;
  if (typeof _origGcalAuth === 'function'){
    window.gcalAuth = function(){
      /* Si on a notre tokenClient avec le scope élargi, l'utiliser */
      if (typeof google !== 'undefined' && google.accounts && google.accounts.oauth2){
        var tc = ensureTokenClient();
        if (tc){ tc.requestAccessToken({ prompt: 'consent' }); return; }
      }
      /* Sinon fallback vers l'original */
      return _origGcalAuth.apply(this, arguments);
    };
  }

  /* ─── Hook gcalFetchEvents pour ajouter indicateur ─── */
  var _origFetch = window.gcalFetchEvents;
  if (typeof _origFetch === 'function'){
    window.gcalFetchEvents = function(){
      updateSyncStatus('syncing');
      var r = _origFetch.apply(this, arguments);
      /* La fetch est async (Promise.all), on re-check après un délai */
      setTimeout(function(){
        if (tokenAlive()) updateSyncStatus('connected');
        else updateSyncStatus('disconnected');
      }, 4000);
      return r;
    };
  }

  /* ─── Point d'entrée : au chargement de la page ─── */
  function initAutoSync(){
    if (window.location.protocol === 'file:') return;  /* OAuth ne marche pas en file:// */
    if (!isGcalConfigured()) return;

    /* ── Restaurer le token depuis sessionStorage (survit au F5) ── */
    try{
      var savedToken = sessionStorage.getItem('pilote_gcal_token');
      var savedExp   = Number(sessionStorage.getItem('pilote_gcal_token_exp') || 0);
      if (savedToken && savedExp > Date.now()){
        _gcalAccessToken = savedToken;
        window._gcalAccessToken = savedToken;
        _tokenExpiresAt = savedExp;
        window._gcalTokenExpiresAt = savedExp;
        _silentAuthFailed = false;
        console.log('[PILOTE] Token GCal restauré depuis sessionStorage (expire dans ' + Math.round((savedExp - Date.now())/60000) + ' min)');
        /* UI status */
        var statusEl = document.getElementById('gcal-auth-status');
        if (statusEl) statusEl.innerHTML = '<span style="color:#34a853;"><i class="fas fa-check"></i> Connecté</span>';
        var btnEl = document.getElementById('btn-gcal-auth');
        if (btnEl){ btnEl.innerHTML = '<i class="fas fa-check-circle"></i> Connecté'; btnEl.style.background = '#34a853'; }
        updateSyncStatus('connected');
        /* Fetch events immédiatement */
        setTimeout(function(){ autoFetchAfterAuth(); }, 300);
        return;
      } else if (savedToken){
        /* Token expiré, nettoyer */
        sessionStorage.removeItem('pilote_gcal_token');
        sessionStorage.removeItem('pilote_gcal_token_exp');
      }
    }catch(e){}

    loadGSI(function(){
      /* Tenter l'auth silencieuse */
      silentAuth();
    });
  }

  /* Attendre que le DOM et les settings soient chargés */
  if (document.readyState === 'loading'){
    document.addEventListener('DOMContentLoaded', function(){ setTimeout(initAutoSync, 800); });
  } else {
    setTimeout(initAutoSync, 800);
  }

  /* Aussi re-tenter quand on revient sur l'onglet (le token a pu expirer) */
  document.addEventListener('visibilitychange', function(){
    if (document.visibilityState === 'visible' && isGcalConfigured()){
      if (!tokenAlive() && !_silentAuthFailed){
        loadGSI(function(){ silentAuth(); });
      } else if (tokenAlive()){
        doSyncEvents();
      }
    }
  });

})();
</script>

